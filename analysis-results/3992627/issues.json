[{"url": "https://api.github.com/repos/espnet/espnet/issues/5148", "repository_url": "https://api.github.com/repos/espnet/espnet", "labels_url": "https://api.github.com/repos/espnet/espnet/issues/5148/labels{/name}", "comments_url": "https://api.github.com/repos/espnet/espnet/issues/5148/comments", "events_url": "https://api.github.com/repos/espnet/espnet/issues/5148/events", "html_url": "https://github.com/espnet/espnet/issues/5148", "id": 1687900959, "node_id": "I_kwDOBsxW2c5km1Mf", "number": 5148, "title": "Shouldn't skip stage 14 if `--skip_upload_hf` is true when calling `asr.sh`", "user": {"login": "tjysdsg", "id": 21212505, "node_id": "MDQ6VXNlcjIxMjEyNTA1", "avatar_url": "https://avatars.githubusercontent.com/u/21212505?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tjysdsg", "html_url": "https://github.com/tjysdsg", "followers_url": "https://api.github.com/users/tjysdsg/followers", "following_url": "https://api.github.com/users/tjysdsg/following{/other_user}", "gists_url": "https://api.github.com/users/tjysdsg/gists{/gist_id}", "starred_url": "https://api.github.com/users/tjysdsg/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tjysdsg/subscriptions", "organizations_url": "https://api.github.com/users/tjysdsg/orgs", "repos_url": "https://api.github.com/users/tjysdsg/repos", "events_url": "https://api.github.com/users/tjysdsg/events{/privacy}", "received_events_url": "https://api.github.com/users/tjysdsg/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 777173273, "node_id": "MDU6TGFiZWw3NzcxNzMyNzM=", "url": "https://api.github.com/repos/espnet/espnet/labels/Bug", "name": "Bug", "color": "ee0701", "default": false, "description": "bug should be fixed"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2023-04-28T05:01:15Z", "updated_at": "2023-04-28T11:05:40Z", "closed_at": "2023-04-28T11:05:40Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "**Describe the bug**\r\nWhen running `asr.sh`, stage 14 (packing model) is skipped even if `--skip_upload_hf` is set to true.\r\nThis is because the script doesn't add `14` to `skip_stages` only if both `--skip_upload` and `--skip_upload_hf` are set to true.\r\nHowever, a common usecase is to upload a model only to huggingface but not zendoo.\r\n\r\nThis bug is introduced by 09ce6405 @kamo-naoyuki ", "reactions": {"url": "https://api.github.com/repos/espnet/espnet/issues/5148/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/espnet/espnet/issues/5148/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/espnet/espnet/issues/5115", "repository_url": "https://api.github.com/repos/espnet/espnet", "labels_url": "https://api.github.com/repos/espnet/espnet/issues/5115/labels{/name}", "comments_url": "https://api.github.com/repos/espnet/espnet/issues/5115/comments", "events_url": "https://api.github.com/repos/espnet/espnet/issues/5115/events", "html_url": "https://github.com/espnet/espnet/issues/5115", "id": 1667584953, "node_id": "I_kwDOBsxW2c5jZVO5", "number": 5115, "title": "chime7_task1 \uff1aGSS and ASR training can only run on one gpu", "user": {"login": "icestoneking", "id": 28999208, "node_id": "MDQ6VXNlcjI4OTk5MjA4", "avatar_url": "https://avatars.githubusercontent.com/u/28999208?v=4", "gravatar_id": "", "url": "https://api.github.com/users/icestoneking", "html_url": "https://github.com/icestoneking", "followers_url": "https://api.github.com/users/icestoneking/followers", "following_url": "https://api.github.com/users/icestoneking/following{/other_user}", "gists_url": "https://api.github.com/users/icestoneking/gists{/gist_id}", "starred_url": "https://api.github.com/users/icestoneking/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/icestoneking/subscriptions", "organizations_url": "https://api.github.com/users/icestoneking/orgs", "repos_url": "https://api.github.com/users/icestoneking/repos", "events_url": "https://api.github.com/users/icestoneking/events{/privacy}", "received_events_url": "https://api.github.com/users/icestoneking/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 777173273, "node_id": "MDU6TGFiZWw3NzcxNzMyNzM=", "url": "https://api.github.com/repos/espnet/espnet/labels/Bug", "name": "Bug", "color": "ee0701", "default": false, "description": "bug should be fixed"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-04-14T06:21:07Z", "updated_at": "2023-04-14T08:54:04Z", "closed_at": "2023-04-14T08:54:04Z", "author_association": "NONE", "active_lock_reason": null, "body": null, "reactions": {"url": "https://api.github.com/repos/espnet/espnet/issues/5115/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/espnet/espnet/issues/5115/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/espnet/espnet/issues/5108", "repository_url": "https://api.github.com/repos/espnet/espnet", "labels_url": "https://api.github.com/repos/espnet/espnet/issues/5108/labels{/name}", "comments_url": "https://api.github.com/repos/espnet/espnet/issues/5108/comments", "events_url": "https://api.github.com/repos/espnet/espnet/issues/5108/events", "html_url": "https://github.com/espnet/espnet/issues/5108", "id": 1666373364, "node_id": "I_kwDOBsxW2c5jUtb0", "number": 5108, "title": "How to use the TTS recipe for a mel spectrogram reconstruction?", "user": {"login": "rishabh135", "id": 10608935, "node_id": "MDQ6VXNlcjEwNjA4OTM1", "avatar_url": "https://avatars.githubusercontent.com/u/10608935?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rishabh135", "html_url": "https://github.com/rishabh135", "followers_url": "https://api.github.com/users/rishabh135/followers", "following_url": "https://api.github.com/users/rishabh135/following{/other_user}", "gists_url": "https://api.github.com/users/rishabh135/gists{/gist_id}", "starred_url": "https://api.github.com/users/rishabh135/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rishabh135/subscriptions", "organizations_url": "https://api.github.com/users/rishabh135/orgs", "repos_url": "https://api.github.com/users/rishabh135/repos", "events_url": "https://api.github.com/users/rishabh135/events{/privacy}", "received_events_url": "https://api.github.com/users/rishabh135/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 777173273, "node_id": "MDU6TGFiZWw3NzcxNzMyNzM=", "url": "https://api.github.com/repos/espnet/espnet/labels/Bug", "name": "Bug", "color": "ee0701", "default": false, "description": "bug should be fixed"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2023-04-13T12:58:51Z", "updated_at": "2023-04-19T17:34:15Z", "closed_at": "2023-04-19T17:32:38Z", "author_association": "NONE", "active_lock_reason": null, "body": "**Describe the bug**\r\n\r\nI am trying to reproduce the 80 dimensional mel-filter spectrogram from extract_feats , using the standard Transformer based TTS model. \r\n\r\nThe Transformer TTS model takes in text and feats and the TTS decoder seems to return a spectrogram (in form of after outs), but I don't know how to configure the Transformer architecture so that it takes in the sampled latent space and produces spectrogram  ? I hope to compare the generated spectrogram with the ground truth spectrogram to calculate reconstruction + regularization losses.  Can somebody please help/cite any paper ?\r\n\r\n**Basic environments:**\r\n - OS information: [e.g., Linux 4.9.0-11-amd64 #1 SMP Debian 4.9.189-3+deb9u2 (2019-11-11) x86_64]\r\n - python version: [e.g. 3.7.3 (default, Mar 27 2019, 22:11:17) [GCC 7.3.0]]\r\n - espnet version: [e.g. espnet 0.8.0]\r\n - Git hash [e.g. b88e89fc7246fed4c2842b55baba884fe1b4ecc2]\r\n   - Commit date [e.g. Tue Sep 1 09:32:54 2020 -0400]\r\n - pytorch version [e.g. pytorch 1.4.0]", "reactions": {"url": "https://api.github.com/repos/espnet/espnet/issues/5108/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/espnet/espnet/issues/5108/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/espnet/espnet/issues/5101", "repository_url": "https://api.github.com/repos/espnet/espnet", "labels_url": "https://api.github.com/repos/espnet/espnet/issues/5101/labels{/name}", "comments_url": "https://api.github.com/repos/espnet/espnet/issues/5101/comments", "events_url": "https://api.github.com/repos/espnet/espnet/issues/5101/events", "html_url": "https://github.com/espnet/espnet/issues/5101", "id": 1663446993, "node_id": "I_kwDOBsxW2c5jJi_R", "number": 5101, "title": "import libs.common as common_lib ModuleNotFoundError: No module named 'libs' when trying EEND-SS", "user": {"login": "kaiwei890604", "id": 81306576, "node_id": "MDQ6VXNlcjgxMzA2NTc2", "avatar_url": "https://avatars.githubusercontent.com/u/81306576?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kaiwei890604", "html_url": "https://github.com/kaiwei890604", "followers_url": "https://api.github.com/users/kaiwei890604/followers", "following_url": "https://api.github.com/users/kaiwei890604/following{/other_user}", "gists_url": "https://api.github.com/users/kaiwei890604/gists{/gist_id}", "starred_url": "https://api.github.com/users/kaiwei890604/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kaiwei890604/subscriptions", "organizations_url": "https://api.github.com/users/kaiwei890604/orgs", "repos_url": "https://api.github.com/users/kaiwei890604/repos", "events_url": "https://api.github.com/users/kaiwei890604/events{/privacy}", "received_events_url": "https://api.github.com/users/kaiwei890604/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 777173273, "node_id": "MDU6TGFiZWw3NzcxNzMyNzM=", "url": "https://api.github.com/repos/espnet/espnet/labels/Bug", "name": "Bug", "color": "ee0701", "default": false, "description": "bug should be fixed"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2023-04-12T00:39:27Z", "updated_at": "2023-04-13T11:20:46Z", "closed_at": "2023-04-13T08:48:33Z", "author_association": "NONE", "active_lock_reason": null, "body": "When I run /egs2/librimix/enh_diar1/run.sh\r\nIt's fail at stage 2\r\n\r\nTraceback (most recent call last):\r\n  File \"steps/segmentation/convert_utt2spk_and_segments_to_rttm.py\", line 30, in <module>\r\n    import libs.common as common_lib\r\nModuleNotFoundError: No module named 'libs'\r\n\r\nBasic environments:\r\n\r\n OS information: Ubuntu x86-64\r\n python version: 3.8.16\r\n espnet version: espnet202301\r\n torch version: 1.13.1", "reactions": {"url": "https://api.github.com/repos/espnet/espnet/issues/5101/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/espnet/espnet/issues/5101/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/espnet/espnet/issues/5099", "repository_url": "https://api.github.com/repos/espnet/espnet", "labels_url": "https://api.github.com/repos/espnet/espnet/issues/5099/labels{/name}", "comments_url": "https://api.github.com/repos/espnet/espnet/issues/5099/comments", "events_url": "https://api.github.com/repos/espnet/espnet/issues/5099/events", "html_url": "https://github.com/espnet/espnet/issues/5099", "id": 1661032855, "node_id": "I_kwDOBsxW2c5jAVmX", "number": 5099, "title": "egs2/aishell3/tts1 error occured when extracting x-vector", "user": {"login": "alandarker", "id": 33546429, "node_id": "MDQ6VXNlcjMzNTQ2NDI5", "avatar_url": "https://avatars.githubusercontent.com/u/33546429?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alandarker", "html_url": "https://github.com/alandarker", "followers_url": "https://api.github.com/users/alandarker/followers", "following_url": "https://api.github.com/users/alandarker/following{/other_user}", "gists_url": "https://api.github.com/users/alandarker/gists{/gist_id}", "starred_url": "https://api.github.com/users/alandarker/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alandarker/subscriptions", "organizations_url": "https://api.github.com/users/alandarker/orgs", "repos_url": "https://api.github.com/users/alandarker/repos", "events_url": "https://api.github.com/users/alandarker/events{/privacy}", "received_events_url": "https://api.github.com/users/alandarker/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 777173273, "node_id": "MDU6TGFiZWw3NzcxNzMyNzM=", "url": "https://api.github.com/repos/espnet/espnet/labels/Bug", "name": "Bug", "color": "ee0701", "default": false, "description": "bug should be fixed"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2023-04-10T16:28:35Z", "updated_at": "2023-04-14T15:16:59Z", "closed_at": "2023-04-14T15:16:59Z", "author_association": "NONE", "active_lock_reason": null, "body": "**Describe the bug**\r\nhello, Im trying to run egs2/aishell3/tts1 to figure out how this toolkit is working,\r\nstage 1 is already done,\r\n\r\n- [ ]  1. \r\n\r\n when i run  espnet/egs2/aishell3/tts1$ nohup ./run.sh --stage 2 --stop-stage 3 --use_xvector true \r\nif I set xvector_tool=kaldi,  an error occured,\r\n![image](https://user-images.githubusercontent.com/33546429/230944389-a57e0643-75f5-4be9-90d6-4964752c583d.png)\r\nit pointed that Failed to open script file dump/mfcc/train_no_dev/split4utt/4/wav.scp, and yes as i examined. but stage 1 is already done before this work, I dont know how to resolve it.\r\n\r\n- [x] 2. \r\n\r\nso i tried to set xvector_tool=speechbrain but another error occured as:\r\n![image](https://user-images.githubusercontent.com/33546429/230944963-8afd64e2-2ba4-466a-a81b-bac260533599.png)\r\nit seems that error occured by python file(pyscripts/utils/extract_xvectors.py), Im trying to solve it.\r\n\r\nupdate:  when i turned \r\nwav = self.audio_norm(torch.from_numpy(wav), in_sr).to(self.device)\r\nto\r\nwav = self.audio_norm(torch.from_numpy(wav).to(torch.float32), in_sr).to(self.device),\r\nerror info dispeared\r\n\r\n\r\n\r\n**Basic environments:**\r\n - OS information: wsl2 ubuntu18.04\r\n - python version: 3.8\r\n - espnet version: lastest\r\n\r\n[x] python=3.8.16 | packaged by conda-forge | (default, Feb  1 2023, 16:01:55)  [GCC 11.3.0]\r\n\r\nPython modules:\r\n[x] torch=2.0.0+cu117\r\n[x] torch cuda=11.7\r\n[x] torch cudnn=8600\r\n[x] torch nccl\r\n[x] chainer=6.0.0\r\n[x] chainer cuda\r\n[x] chainer cudnn\r\n[x] cupy=12.0.0\r\n[x] cupy nccl\r\n[x] torchaudio=2.0.1+cu117\r\n[ ] torch_optimizer\r\n[ ] warprnnt_pytorch\r\n[x] chainer_ctc\r\n[ ] pyopenjtalk\r\n[ ] tdmelodic_pyopenjtalk\r\n[ ] kenlm\r\n[ ] mmseg\r\n[x] espnet=202301\r\n[x] numpy=1.23.5\r\n[ ] fairseq\r\n[ ] phonemizer\r\n[ ] gtn\r\n[ ] s3prl\r\n[ ] transformers\r\n[x] speechbrain=0.5.14\r\n[ ] k2\r\n[ ] longformer\r\n[ ] nlg-eval\r\n[ ] datasets\r\n[ ] pykeops\r\n[ ] whisper\r\n[ ] RawNet3\r\n[ ] reazonspeech\r\n[ ] muskits\r\n\r\nExecutables:\r\n[ ] sclite\r\n[ ] sph2pipe\r\n[ ] PESQ\r\n[ ] BeamformIt\r\n[ ] spm_train\r\n[ ] spm_encode\r\n[ ] spm_decode\r\n[x] sox=14.4.2\r\n[x] ffmpeg=5.1.2\r\n[x] flac=1.4.2\r\n[x] cmake=3.25.0\r\n[x] Kaldi (compiled)\r\n\r\n**To Reproduce**\r\nespnet/egs2/aishell3/tts1$ nohup ./run.sh --use_xvector true \r\n\r\n**Error logs**\r\n1.\r\n# wav-to-duration --read-entire-file=false scp:dump/mfcc/train_no_dev/split4utt/4/wav.scp ark,t:dump/mfcc/train_no_dev/split4utt/4/utt2dur \r\n# Started at Mon Apr 10 19:59:44 CST 2023\r\n#\r\nwav-to-duration --read-entire-file=false scp:dump/mfcc/train_no_dev/split4utt/4/wav.scp ark,t:dump/mfcc/train_no_dev/split4utt/4/utt2dur \r\nWARNING (wav-to-duration[5.5.1068~1-59299]:Open():util/kaldi-table-inl.h:106) Failed to open script file dump/mfcc/train_no_dev/split4utt/4/wav.scp\r\nERROR (wav-to-duration[5.5.1068~1-59299]:SequentialTableReader():util/kaldi-table-inl.h:860) Error constructing TableReader: rspecifier is scp:dump/mfcc/train_no_dev/split4utt/4/wav.scp\r\n\r\n[ Stack-Trace: ]\r\n/home/wangzhike/github/kaldi/src/lib/libkaldi-base.so(kaldi::MessageLogger::LogMessage() const+0xb42) [0x7feff020b742]\r\nwav-to-duration(kaldi::MessageLogger::LogAndThrow::operator=(kaldi::MessageLogger const&)+0x21) [0x55a08460be35]\r\nwav-to-duration(kaldi::SequentialTableReader<kaldi::WaveInfoHolder>::SequentialTableReader(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&)+0xc2) [0x55a084613cc8]\r\nwav-to-duration(main+0x385) [0x55a08460a85f]\r\n/lib/x86_64-linux-gnu/libc.so.6(__libc_start_main+0xe7) [0x7fefef675c87]\r\nwav-to-duration(_start+0x2a) [0x55a08460a3fa]\r\n\r\nkaldi::KaldiFatalError# Accounting: time=0 threads=1\r\n# Ended (code 255) at Mon Apr 10 19:59:44 CST 2023, elapsed time 0 seconds\r\n\r\n\r\n2.\r\n2023-04-10T23:19:01 (tts.sh:211:main) ./tts.sh --lang zh --feats_type raw --fs 24000 --n_fft 2048 --n_shift 300 --win_length 1200 --token_type phn --cleaner none --g2p pypinyin_g2p_phone --train_config conf/train.yaml --inference_config conf/decode.yaml --train_set train_no_dev --valid_set dev --test_sets dev test --srctexts data/train_no_dev/text --use_xvector true --audio_format flac --stage 2 --stop-stage 3 --use_xvector true\r\n2023-04-10T23:19:02 (tts.sh:323:main) Stage 2: Format wav.scp: data/ -> dump/raw/\r\nutils/copy_data_dir.sh: copied data from data/train_no_dev to dump/raw/org/train_no_dev\r\nutils/validate_data_dir.sh: Successfully validated data-directory dump/raw/org/train_no_dev\r\n2023-04-10T23:19:03 (format_wav_scp.sh:45:main) scripts/audio/format_wav_scp.sh --nj 16 --cmd run.pl --audio-format flac --fs 24000 --segments data/train_no_dev/segments data/train_no_dev/wav.scp dump/raw/org/train_no_dev\r\n2023-04-10T23:19:04 (format_wav_scp.sh:96:main) [info]: using data/train_no_dev/segments\r\n2023-04-10T23:41:58 (tts.sh:211:main) ./tts.sh --lang zh --feats_type raw --fs 24000 --n_fft 2048 --n_shift 300 --win_length 1200 --token_type phn --cleaner none --g2p pypinyin_g2p_phone --train_config conf/train.yaml --inference_config conf/decode.yaml --train_set train_no_dev --valid_set dev --test_sets dev test --srctexts data/train_no_dev/text --use_xvector true --audio_format flac --stage 2 --stop-stage 3 --use_xvector true\r\n2023-04-10T23:41:58 (tts.sh:323:main) Stage 2: Format wav.scp: data/ -> dump/raw/\r\nutils/copy_data_dir.sh: copied data from data/train_no_dev to dump/raw/org/train_no_dev\r\nutils/validate_data_dir.sh: Successfully validated data-directory dump/raw/org/train_no_dev\r\n2023-04-10T23:41:59 (format_wav_scp.sh:45:main) scripts/audio/format_wav_scp.sh --nj 16 --cmd run.pl --audio-format flac --fs 24000 --segments data/train_no_dev/segments data/train_no_dev/wav.scp dump/raw/org/train_no_dev\r\n2023-04-10T23:42:00 (format_wav_scp.sh:96:main) [info]: using data/train_no_dev/segments\r\n2023-04-10T23:51:53 (format_wav_scp.sh:152:main) Successfully finished. [elapsed=594s]\r\nutils/copy_data_dir.sh: copied data from data/dev to dump/raw/org/dev\r\nutils/validate_data_dir.sh: Successfully validated data-directory dump/raw/org/dev\r\n2023-04-10T23:51:53 (format_wav_scp.sh:45:main) scripts/audio/format_wav_scp.sh --nj 16 --cmd run.pl --audio-format flac --fs 24000 --segments data/dev/segments data/dev/wav.scp dump/raw/org/dev\r\n2023-04-10T23:51:54 (format_wav_scp.sh:96:main) [info]: using data/dev/segments\r\n2023-04-10T23:51:59 (format_wav_scp.sh:152:main) Successfully finished. [elapsed=6s]\r\nutils/copy_data_dir.sh: copied data from data/dev to dump/raw/org/dev\r\nutils/validate_data_dir.sh: Successfully validated data-directory dump/raw/org/dev\r\n2023-04-10T23:51:59 (format_wav_scp.sh:45:main) scripts/audio/format_wav_scp.sh --nj 16 --cmd run.pl --audio-format flac --fs 24000 --segments data/dev/segments data/dev/wav.scp dump/raw/org/dev\r\n2023-04-10T23:52:00 (format_wav_scp.sh:96:main) [info]: using data/dev/segments\r\n2023-04-10T23:52:04 (format_wav_scp.sh:152:main) Successfully finished. [elapsed=5s]\r\nutils/copy_data_dir.sh: copied data from data/test to dump/raw/test\r\nutils/validate_data_dir.sh: Successfully validated data-directory dump/raw/test\r\n2023-04-10T23:52:05 (format_wav_scp.sh:45:main) scripts/audio/format_wav_scp.sh --nj 16 --cmd run.pl --audio-format flac --fs 24000 --segments data/test/segments data/test/wav.scp dump/raw/test\r\n2023-04-10T23:52:05 (format_wav_scp.sh:96:main) [info]: using data/test/segments\r\n2023-04-10T23:55:54 (format_wav_scp.sh:152:main) Successfully finished. [elapsed=229s]\r\n2023-04-10T23:55:54 (tts.sh:403:main) Stage 2+: Extract X-vector: data/ -> dump/xvector using python toolkits\r\n2023-04-10 23:55:57,507 (fetching:91) INFO: Fetch hyperparams.yaml: Using existing file/symlink in pretrained_models/EncoderClassifier-8f6f7fdaa9628acf73e21ad1f99d5f83/hyperparams.yaml.\r\n2023-04-10 23:55:57,508 (fetching:118) INFO: Fetch custom.py: Delegating to Huggingface hub, source speechbrain/spkrec-ecapa-voxceleb.\r\n2023-04-10 23:55:58,913 (fetching:91) INFO: Fetch embedding_model.ckpt: Using existing file/symlink in pretrained_models/EncoderClassifier-8f6f7fdaa9628acf73e21ad1f99d5f83/embedding_model.ckpt.\r\n2023-04-10 23:55:58,913 (fetching:91) INFO: Fetch mean_var_norm_emb.ckpt: Using existing file/symlink in pretrained_models/EncoderClassifier-8f6f7fdaa9628acf73e21ad1f99d5f83/mean_var_norm_emb.ckpt.\r\n2023-04-10 23:55:58,913 (fetching:91) INFO: Fetch classifier.ckpt: Using existing file/symlink in pretrained_models/EncoderClassifier-8f6f7fdaa9628acf73e21ad1f99d5f83/classifier.ckpt.\r\n2023-04-10 23:55:58,914 (fetching:91) INFO: Fetch label_encoder.txt: Using existing file/symlink in pretrained_models/EncoderClassifier-8f6f7fdaa9628acf73e21ad1f99d5f83/label_encoder.ckpt.\r\n2023-04-10 23:55:58,914 (parameter_transfer:245) INFO: Loading pretrained files for: embedding_model, mean_var_norm_emb, classifier, label_encoder\r\n\r\n  0%|          | 0/174 [00:00<?, ?it/s]\r\n  0%|          | 0/174 [00:00<?, ?it/s]\r\nTraceback (most recent call last):\r\n  File \"pyscripts/utils/extract_xvectors.py\", line 182, in <module>\r\n    main(sys.argv[1:])\r\n  File \"pyscripts/utils/extract_xvectors.py\", line 161, in main\r\n    embeds = xv_extractor(wav, in_sr)\r\n  File \"pyscripts/utils/extract_xvectors.py\", line 107, in __call__\r\n    wav = self.audio_norm(torch.from_numpy(wav), in_sr).to(self.device)\r\n  File \"/home/wangzhike/anaconda3/envs/espnet/lib/python3.8/site-packages/speechbrain/dataio/preprocess.py\", line 56, in __call__\r\n    resampled = resampler(audio.unsqueeze(0)).squeeze(0)\r\n  File \"/home/wangzhike/anaconda3/envs/espnet/lib/python3.8/site-packages/torch/nn/modules/module.py\", line 1501, in _call_impl\r\n    return forward_call(*args, **kwargs)\r\n  File \"/home/wangzhike/anaconda3/envs/espnet/lib/python3.8/site-packages/speechbrain/processing/speech_augmentation.py\", line 600, in forward\r\n    resampled_waveform = self._perform_resample(waveforms)\r\n  File \"/home/wangzhike/anaconda3/envs/espnet/lib/python3.8/site-packages/speechbrain/processing/speech_augmentation.py\", line 673, in _perform_resample\r\n    conv_wave = torch.nn.functional.conv1d(\r\nRuntimeError: expected scalar type Double but found Float\r\n\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/espnet/espnet/issues/5099/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/espnet/espnet/issues/5099/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/espnet/espnet/issues/5095", "repository_url": "https://api.github.com/repos/espnet/espnet", "labels_url": "https://api.github.com/repos/espnet/espnet/issues/5095/labels{/name}", "comments_url": "https://api.github.com/repos/espnet/espnet/issues/5095/comments", "events_url": "https://api.github.com/repos/espnet/espnet/issues/5095/events", "html_url": "https://github.com/espnet/espnet/issues/5095", "id": 1659886135, "node_id": "I_kwDOBsxW2c5i79o3", "number": 5095, "title": "question about finetune in TTS", "user": {"login": "asr-pub", "id": 22003430, "node_id": "MDQ6VXNlcjIyMDAzNDMw", "avatar_url": "https://avatars.githubusercontent.com/u/22003430?v=4", "gravatar_id": "", "url": "https://api.github.com/users/asr-pub", "html_url": "https://github.com/asr-pub", "followers_url": "https://api.github.com/users/asr-pub/followers", "following_url": "https://api.github.com/users/asr-pub/following{/other_user}", "gists_url": "https://api.github.com/users/asr-pub/gists{/gist_id}", "starred_url": "https://api.github.com/users/asr-pub/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/asr-pub/subscriptions", "organizations_url": "https://api.github.com/users/asr-pub/orgs", "repos_url": "https://api.github.com/users/asr-pub/repos", "events_url": "https://api.github.com/users/asr-pub/events{/privacy}", "received_events_url": "https://api.github.com/users/asr-pub/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 777173273, "node_id": "MDU6TGFiZWw3NzcxNzMyNzM=", "url": "https://api.github.com/repos/espnet/espnet/labels/Bug", "name": "Bug", "color": "ee0701", "default": false, "description": "bug should be fixed"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-04-09T14:01:35Z", "updated_at": "2023-04-11T07:10:06Z", "closed_at": "2023-04-11T07:10:06Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hello, is there any trick about finetune with VITS pretrained model, such freeze some layers or tune the LR ?", "reactions": {"url": "https://api.github.com/repos/espnet/espnet/issues/5095/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/espnet/espnet/issues/5095/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/espnet/espnet/issues/5089", "repository_url": "https://api.github.com/repos/espnet/espnet", "labels_url": "https://api.github.com/repos/espnet/espnet/issues/5089/labels{/name}", "comments_url": "https://api.github.com/repos/espnet/espnet/issues/5089/comments", "events_url": "https://api.github.com/repos/espnet/espnet/issues/5089/events", "html_url": "https://github.com/espnet/espnet/issues/5089", "id": 1659162577, "node_id": "I_kwDOBsxW2c5i5M_R", "number": 5089, "title": "ASR on own data, Wav2Vec2 as upstream - Expected 2D (unbatched) or 3D (batched) input to conv1d, but got input of size: [232, 1, 80256, 2]", "user": {"login": "iamsashank09", "id": 26921144, "node_id": "MDQ6VXNlcjI2OTIxMTQ0", "avatar_url": "https://avatars.githubusercontent.com/u/26921144?v=4", "gravatar_id": "", "url": "https://api.github.com/users/iamsashank09", "html_url": "https://github.com/iamsashank09", "followers_url": "https://api.github.com/users/iamsashank09/followers", "following_url": "https://api.github.com/users/iamsashank09/following{/other_user}", "gists_url": "https://api.github.com/users/iamsashank09/gists{/gist_id}", "starred_url": "https://api.github.com/users/iamsashank09/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/iamsashank09/subscriptions", "organizations_url": "https://api.github.com/users/iamsashank09/orgs", "repos_url": "https://api.github.com/users/iamsashank09/repos", "events_url": "https://api.github.com/users/iamsashank09/events{/privacy}", "received_events_url": "https://api.github.com/users/iamsashank09/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 777173273, "node_id": "MDU6TGFiZWw3NzcxNzMyNzM=", "url": "https://api.github.com/repos/espnet/espnet/labels/Bug", "name": "Bug", "color": "ee0701", "default": false, "description": "bug should be fixed"}, {"id": 3317075130, "node_id": "MDU6TGFiZWwzMzE3MDc1MTMw", "url": "https://api.github.com/repos/espnet/espnet/labels/SSL", "name": "SSL", "color": "006b75", "default": false, "description": "self-supervised learning"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2023-04-07T20:26:59Z", "updated_at": "2023-04-24T14:23:13Z", "closed_at": "2023-04-24T14:23:13Z", "author_association": "NONE", "active_lock_reason": null, "body": "Task: ASR\r\nData: Custom data\r\n\r\nConfig: Using Wav2Vec as feature extractor\r\nhttps://github.com/espnet/espnet/blob/master/egs2/librispeech/asr1/conf/tuning/train_asr_conformer7_wav2vec2_960hr_large.yaml\r\n\r\nHere's the command I use to run Stage 11. \r\n\r\n```\r\n./asr.sh --stage 11 --stop_stage 11 --train_set traindir --valid_set validdir --test_sets testdir \\\r\n --asr_config \"conf/tuning/train_asr_conformer7_wav2vec2_960hr_large.yaml\" --asr_tag \"$ASR_FOLDER_NAME\" \\\r\n --ngpu 1 --feats_normalize utterance_mvn\r\n```\r\nI'm unable to figure out where I should be looking, to solve this issue. What should I be focusing on?\r\n\r\nI have been able to train my model with the same data, when I've trained it with config: https://github.com/espnet/espnet/blob/master/egs2/librispeech/asr1/conf/tuning/train_asr_transformer.yaml\r\n\r\nIt's the same process, all the stages 1 to 5, then running a fresh stage 10 and 11 using the wav2vec2 config for using SSLR. \r\n\r\nThe stage 10 runs fine, this is the output from Stage 10 - \r\n\r\n```\r\n2023-04-07T16:02:03 (asr.sh:267:main) ./asr.sh --stage 10 --stop_stage 10 --train_set traindir --valid_set validdir --test_sets testdir --asr_config conf/tuning/train_asr_conformer7_wav2vec2_960hr_large.yaml --feats_normalize utterance_mvn\r\n2023-04-07T16:02:04 (asr.sh:1021:main) Stage 10: ASR collect stats: train_set=dump/raw/traindir, valid_set=dump/raw/validdir\r\n2023-04-07T16:02:04 (asr.sh:1071:main) Generate 'exp/asr_stats_raw_bpe500/run.sh'. You can resume the process from stage 10 using this script\r\n2023-04-07T16:02:04 (asr.sh:1075:main) ASR collect-stats started... log: 'exp/asr_stats_raw_bpe500/logdir/stats.*.log'\r\n2023-04-07T16:04:21 (asr.sh:1621:main) Skip the uploading stage\r\n2023-04-07T16:04:21 (asr.sh:1673:main) Skip the uploading to HuggingFace stage\r\n2023-04-07T16:04:21 (asr.sh:1676:main) Successfully finished. [elapsed=138s]\r\n```\r\n\r\nThis is the error I get in Stage 11, from the train.log:\r\n\r\n```\r\n[gpu004] 2023-04-07 16:04:37,860 (abs_task:1195) INFO: Scheduler: WarmupLR(warmup_steps=40000)\r\n[gpu004] 2023-04-07 16:04:37,864 (abs_task:1204) INFO: Saving the configuration in exp/asr_cordi_wav2vec_upstream_50wav_500token_training/config.yaml\r\n[gpu004] 2023-04-07 16:04:38,086 (asr:471) INFO: Optional Data Names: ('text_spk2', 'text_spk3', 'text_spk4')\r\n[gpu004] 2023-04-07 16:04:38,170 (abs_task:1559) INFO: [train] dataset:\r\nESPnetDataset(\r\n  speech: {\"path\": \"dump/raw/traindir/wav.scp\", \"type\": \"sound\"}\r\n  text: {\"path\": \"dump/raw/traindir/text\", \"type\": \"text\"}\r\n  preprocess: <espnet2.train.preprocessor.CommonPreprocessor object at 0x7f23d5413220>)\r\n[gpu004] 2023-04-07 16:04:38,170 (abs_task:1560) INFO: [train] Batch sampler: NumElementsBatchSampler(N-batch=20, batch_bins=40000000, sort_in_batch=descending, sort_batch=descending)\r\n[gpu004] 2023-04-07 16:04:38,171 (abs_task:1561) INFO: [train] mini-batch sizes summary: N-batch=20, mean=388.1, min=2, max=1037\r\n[gpu004] 2023-04-07 16:04:38,188 (asr:471) INFO: Optional Data Names: ('text_spk2', 'text_spk3', 'text_spk4')\r\n[gpu004] 2023-04-07 16:04:38,194 (abs_task:1559) INFO: [valid] dataset:\r\nESPnetDataset(\r\n  speech: {\"path\": \"dump/raw/validdir/wav.scp\", \"type\": \"sound\"}\r\n  text: {\"path\": \"dump/raw/validdir/text\", \"type\": \"text\"}\r\n  preprocess: <espnet2.train.preprocessor.CommonPreprocessor object at 0x7f23d5413670>)\r\n[gpu004] 2023-04-07 16:04:38,194 (abs_task:1560) INFO: [valid] Batch sampler: NumElementsBatchSampler(N-batch=3, batch_bins=40000000, sort_in_batch=descending, sort_batch=descending)\r\n[gpu004] 2023-04-07 16:04:38,194 (abs_task:1561) INFO: [valid] mini-batch sizes summary: N-batch=3, mean=322.7, min=152, max=489\r\n[gpu004] 2023-04-07 16:04:38,196 (asr:471) INFO: Optional Data Names: ('text_spk2', 'text_spk3', 'text_spk4')\r\n[gpu004] 2023-04-07 16:04:38,212 (abs_task:1559) INFO: [plot_att] dataset:\r\nESPnetDataset(\r\n  speech: {\"path\": \"dump/raw/validdir/wav.scp\", \"type\": \"sound\"}\r\n  text: {\"path\": \"dump/raw/validdir/text\", \"type\": \"text\"}\r\n  preprocess: <espnet2.train.preprocessor.CommonPreprocessor object at 0x7f23d5413dc0>)\r\n[gpu004] 2023-04-07 16:04:38,212 (abs_task:1560) INFO: [plot_att] Batch sampler: UnsortedBatchSampler(N-batch=968, batch_size=1, key_file=exp/asr_stats_raw_bpe500/valid/speech_shape, \r\n[gpu004] 2023-04-07 16:04:38,212 (abs_task:1561) INFO: [plot_att] mini-batch sizes summary: N-batch=3, mean=1.0, min=1, max=1\r\n[gpu004] 2023-04-07 16:04:38,273 (trainer:284) INFO: 1/35epoch started\r\nTraceback (most recent call last):\r\n  File \"/home/skakarap/Research/espnet/espnet/tools/anaconda/envs/espnet/lib/python3.9/runpy.py\", line 197, in _run_module_as_main\r\n    return _run_code(code, main_globals, None,\r\n  File \"/home/skakarap/Research/espnet/espnet/tools/anaconda/envs/espnet/lib/python3.9/runpy.py\", line 87, in _run_code\r\n    exec(code, run_globals)\r\n  File \"/home/skakarap/Research/espnet/espnet/espnet2/bin/asr_train.py\", line 23, in <module>\r\n    main()\r\n  File \"/home/skakarap/Research/espnet/espnet/espnet2/bin/asr_train.py\", line 19, in main\r\n    ASRTask.main(cmd=cmd)\r\n  File \"/home/skakarap/Research/espnet/espnet/espnet2/tasks/abs_task.py\", line 1043, in main\r\n    cls.main_worker(args)\r\n  File \"/home/skakarap/Research/espnet/espnet/espnet2/tasks/abs_task.py\", line 1348, in main_worker\r\n    cls.trainer.run(\r\n  File \"/home/skakarap/Research/espnet/espnet/espnet2/train/trainer.py\", line 290, in run\r\n    all_steps_are_invalid = cls.train_one_epoch(\r\n  File \"/home/skakarap/Research/espnet/espnet/espnet2/train/trainer.py\", line 567, in train_one_epoch\r\n    retval = model(**batch)\r\n  File \"/home/skakarap/Research/espnet/espnet/tools/anaconda/envs/espnet/lib/python3.9/site-packages/torch/nn/modules/module.py\", line 1194, in _call_impl\r\n    return forward_call(*input, **kwargs)\r\n  File \"/home/skakarap/Research/espnet/espnet/espnet2/asr/espnet_model.py\", line 217, in forward\r\n    encoder_out, encoder_out_lens = self.encode(speech, speech_lengths)\r\n  File \"/home/skakarap/Research/espnet/espnet/espnet2/asr/espnet_model.py\", line 358, in encode\r\n    feats, feats_lengths = self._extract_feats(speech, speech_lengths)\r\n  File \"/home/skakarap/Research/espnet/espnet/espnet2/asr/espnet_model.py\", line 423, in _extract_feats\r\n    feats, feats_lengths = self.frontend(speech, speech_lengths)\r\n  File \"/home/skakarap/Research/espnet/espnet/tools/anaconda/envs/espnet/lib/python3.9/site-packages/torch/nn/modules/module.py\", line 1194, in _call_impl\r\n    return forward_call(*input, **kwargs)\r\n  File \"/home/skakarap/Research/espnet/espnet/espnet2/asr/frontend/s3prl.py\", line 103, in forward\r\n    feats, feats_lens = self.upstream(input, input_lengths)\r\n  File \"/home/skakarap/Research/espnet/espnet/tools/anaconda/envs/espnet/lib/python3.9/site-packages/torch/nn/modules/module.py\", line 1194, in _call_impl\r\n    return forward_call(*input, **kwargs)\r\n  File \"/home/skakarap/Research/espnet/espnet/tools/anaconda/envs/espnet/lib/python3.9/site-packages/s3prl/nn/upstream.py\", line 209, in forward\r\n    hidden_states = self.upstream(wavs_list)[\"hidden_states\"]\r\n  File \"/home/skakarap/Research/espnet/espnet/tools/anaconda/envs/espnet/lib/python3.9/site-packages/s3prl/upstream/interfaces.py\", line 103, in __call__\r\n    result = super().__call__(wavs, *args, **kwargs) or {}\r\n  File \"/home/skakarap/Research/espnet/espnet/tools/anaconda/envs/espnet/lib/python3.9/site-packages/torch/nn/modules/module.py\", line 1194, in _call_impl\r\n    return forward_call(*input, **kwargs)\r\n  File \"/home/skakarap/Research/espnet/espnet/tools/anaconda/envs/espnet/lib/python3.9/site-packages/s3prl/upstream/wav2vec2/expert.py\", line 77, in forward\r\n    results = self.model.extract_features(\r\n  File \"/home/skakarap/Research/espnet/espnet/tools/anaconda/envs/espnet/lib/python3.9/site-packages/s3prl/upstream/wav2vec2/wav2vec2_model.py\", line 2820, in extract_features\r\n    res = self.forward(\r\n  File \"/home/skakarap/Research/espnet/espnet/tools/anaconda/envs/espnet/lib/python3.9/site-packages/s3prl/upstream/wav2vec2/wav2vec2_model.py\", line 2648, in forward\r\n    features = self.feature_extractor(source)\r\n  File \"/home/skakarap/Research/espnet/espnet/tools/anaconda/envs/espnet/lib/python3.9/site-packages/torch/nn/modules/module.py\", line 1194, in _call_impl\r\n    return forward_call(*input, **kwargs)\r\n  File \"/home/skakarap/Research/espnet/espnet/tools/anaconda/envs/espnet/lib/python3.9/site-packages/s3prl/upstream/wav2vec2/wav2vec2_model.py\", line 2937, in forward\r\n    x = conv(x)\r\n  File \"/home/skakarap/Research/espnet/espnet/tools/anaconda/envs/espnet/lib/python3.9/site-packages/torch/nn/modules/module.py\", line 1194, in _call_impl\r\n    return forward_call(*input, **kwargs)\r\n  File \"/home/skakarap/Research/espnet/espnet/tools/anaconda/envs/espnet/lib/python3.9/site-packages/torch/nn/modules/container.py\", line 204, in forward\r\n    input = module(input)\r\n  File \"/home/skakarap/Research/espnet/espnet/tools/anaconda/envs/espnet/lib/python3.9/site-packages/torch/nn/modules/module.py\", line 1194, in _call_impl\r\n    return forward_call(*input, **kwargs)\r\n  File \"/home/skakarap/Research/espnet/espnet/tools/anaconda/envs/espnet/lib/python3.9/site-packages/torch/nn/modules/conv.py\", line 313, in forward\r\n    return self._conv_forward(input, self.weight, self.bias)\r\n  File \"/home/skakarap/Research/espnet/espnet/tools/anaconda/envs/espnet/lib/python3.9/site-packages/torch/nn/modules/conv.py\", line 309, in _conv_forward\r\n    return F.conv1d(input, weight, bias, self.stride,\r\nRuntimeError: Expected 2D (unbatched) or 3D (batched) input to conv1d, but got input of size: [232, 1, 80256, 2]\r\n# Accounting: time=19 threads=1\r\n# Ended (code 1) at Fri Apr  7 16:04:41 EDT 2023, elapsed time 19 seconds\r\n```\r\n\r\nTruly appreciate any help and guidance on this, Thank you. \r\n\r\n", "reactions": {"url": "https://api.github.com/repos/espnet/espnet/issues/5089/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/espnet/espnet/issues/5089/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/espnet/espnet/issues/5083", "repository_url": "https://api.github.com/repos/espnet/espnet", "labels_url": "https://api.github.com/repos/espnet/espnet/issues/5083/labels{/name}", "comments_url": "https://api.github.com/repos/espnet/espnet/issues/5083/comments", "events_url": "https://api.github.com/repos/espnet/espnet/issues/5083/events", "html_url": "https://github.com/espnet/espnet/issues/5083", "id": 1654737141, "node_id": "I_kwDOBsxW2c5ioUj1", "number": 5083, "title": "[QUESTION] : How do you change the reference speech after training GST TTS", "user": {"login": "Kodhandarama", "id": 44093589, "node_id": "MDQ6VXNlcjQ0MDkzNTg5", "avatar_url": "https://avatars.githubusercontent.com/u/44093589?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Kodhandarama", "html_url": "https://github.com/Kodhandarama", "followers_url": "https://api.github.com/users/Kodhandarama/followers", "following_url": "https://api.github.com/users/Kodhandarama/following{/other_user}", "gists_url": "https://api.github.com/users/Kodhandarama/gists{/gist_id}", "starred_url": "https://api.github.com/users/Kodhandarama/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Kodhandarama/subscriptions", "organizations_url": "https://api.github.com/users/Kodhandarama/orgs", "repos_url": "https://api.github.com/users/Kodhandarama/repos", "events_url": "https://api.github.com/users/Kodhandarama/events{/privacy}", "received_events_url": "https://api.github.com/users/Kodhandarama/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 777173273, "node_id": "MDU6TGFiZWw3NzcxNzMyNzM=", "url": "https://api.github.com/repos/espnet/espnet/labels/Bug", "name": "Bug", "color": "ee0701", "default": false, "description": "bug should be fixed"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2023-04-05T00:12:50Z", "updated_at": "2023-04-08T22:24:45Z", "closed_at": "2023-04-08T22:24:44Z", "author_association": "NONE", "active_lock_reason": null, "body": "I have trained a GST TTS using the espnet framework and I obtained good quality speech samples.\r\nHowever, I haven't able to locate where I can change the reference audio during inference in tts.sh and espnet2.bin.tts_inference.\r\nI'd be happy to provide more info if needed!\r\nThanks\r\n(also, I intended to raise this as a discussion and not a bug)", "reactions": {"url": "https://api.github.com/repos/espnet/espnet/issues/5083/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/espnet/espnet/issues/5083/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/espnet/espnet/issues/5079", "repository_url": "https://api.github.com/repos/espnet/espnet", "labels_url": "https://api.github.com/repos/espnet/espnet/issues/5079/labels{/name}", "comments_url": "https://api.github.com/repos/espnet/espnet/issues/5079/comments", "events_url": "https://api.github.com/repos/espnet/espnet/issues/5079/events", "html_url": "https://github.com/espnet/espnet/issues/5079", "id": 1652234736, "node_id": "I_kwDOBsxW2c5iexnw", "number": 5079, "title": "RuntimeError: The size of tensor a (2) must match the size of tensor b (80) at non-singleton dimension 2", "user": {"login": "iamsashank09", "id": 26921144, "node_id": "MDQ6VXNlcjI2OTIxMTQ0", "avatar_url": "https://avatars.githubusercontent.com/u/26921144?v=4", "gravatar_id": "", "url": "https://api.github.com/users/iamsashank09", "html_url": "https://github.com/iamsashank09", "followers_url": "https://api.github.com/users/iamsashank09/followers", "following_url": "https://api.github.com/users/iamsashank09/following{/other_user}", "gists_url": "https://api.github.com/users/iamsashank09/gists{/gist_id}", "starred_url": "https://api.github.com/users/iamsashank09/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/iamsashank09/subscriptions", "organizations_url": "https://api.github.com/users/iamsashank09/orgs", "repos_url": "https://api.github.com/users/iamsashank09/repos", "events_url": "https://api.github.com/users/iamsashank09/events{/privacy}", "received_events_url": "https://api.github.com/users/iamsashank09/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 777173273, "node_id": "MDU6TGFiZWw3NzcxNzMyNzM=", "url": "https://api.github.com/repos/espnet/espnet/labels/Bug", "name": "Bug", "color": "ee0701", "default": false, "description": "bug should be fixed"}, {"id": 3317075130, "node_id": "MDU6TGFiZWwzMzE3MDc1MTMw", "url": "https://api.github.com/repos/espnet/espnet/labels/SSL", "name": "SSL", "color": "006b75", "default": false, "description": "self-supervised learning"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2023-04-03T14:55:02Z", "updated_at": "2023-04-05T02:40:02Z", "closed_at": "2023-04-05T02:40:02Z", "author_association": "NONE", "active_lock_reason": null, "body": "Task: ASR\r\nData: Custom Data\r\n\r\nConfig: Using Wav2Vec and finetuning the last layer\r\nhttps://github.com/espnet/espnet/blob/master/egs2/librispeech/asr1/conf/tuning/train_asr_transformer3_w2v_large_lv60_960h_finetuning_last_1layer.yaml\r\n\r\nThis is my Stage 11 command:\r\n\r\n`./asr.sh --stage 11 --stop_stage 11 --train_set traindir --valid_set validdir --test_sets testdir \\\r\n --asr_config \"conf/tuning/train_asr_transformer3_w2v_large_lv60_960h_finetuning_last_1layer.yaml\" --asr_tag \"cordi_wav2vec_ft_50wav_500token_training\" \\\r\n --ngpu 1 --ignore_init_mismatch true`\r\n\r\nI get this error:\r\n\r\n> Model summary:\r\n>     Class Name: ESPnetASRModel\r\n>     Total Number of model parameters: 392.58 M\r\n>     Number of trainable parameters: 89.74 M (22.9%)\r\n>     Size: 358.95 MB\r\n>     Type: torch.float32\r\n> [dgx001] 2023-04-03 10:08:35,415 (abs_task:1194) INFO: Optimizer:\r\n> Adam (\r\n> Parameter Group 0\r\n>     amsgrad: False\r\n>     betas: (0.9, 0.999)\r\n>     capturable: False\r\n>     differentiable: False\r\n>     eps: 1e-08\r\n>     foreach: None\r\n>     fused: False\r\n>     initial_lr: 0.001\r\n>     lr: 4e-08\r\n>     maximize: False\r\n>     weight_decay: 0\r\n> )\r\n> [dgx001] 2023-04-03 10:08:35,415 (abs_task:1195) INFO: Scheduler: WarmupLR(warmup_steps=25000)\r\n> [dgx001] 2023-04-03 10:08:35,418 (abs_task:1204) INFO: Saving the configuration in exp/asr_cordi_wav2vec_ft_50wav_500token_training/config.yaml\r\n> [dgx001] 2023-04-03 10:08:35,753 (asr:471) INFO: Optional Data Names: ('text_spk2', 'text_spk3', 'text_spk4')\r\n> [dgx001] 2023-04-03 10:08:35,894 (abs_task:1559) INFO: [train] dataset:\r\n> ESPnetDataset(\r\n>   speech: {\"path\": \"dump/raw/traindir/wav.scp\", \"type\": \"sound\"}\r\n>   text: {\"path\": \"dump/raw/traindir/text\", \"type\": \"text\"}\r\n>   preprocess: <espnet2.train.preprocessor.CommonPreprocessor object at 0x7fbc4c6bce50>)\r\n> [dgx001] 2023-04-03 10:08:35,894 (abs_task:1560) INFO: [train] Batch sampler: NumElementsBatchSampler(N-batch=48, batch_bins=15000000, sort_in_batch=descending, sort_batch=descending)\r\n> [dgx001] 2023-04-03 10:08:35,895 (abs_task:1561) INFO: [train] mini-batch sizes summary: N-batch=48, mean=161.7, min=32, max=527\r\n> [dgx001] 2023-04-03 10:08:35,919 (asr:471) INFO: Optional Data Names: ('text_spk2', 'text_spk3', 'text_spk4')\r\n> [dgx001] 2023-04-03 10:08:35,931 (abs_task:1559) INFO: [valid] dataset:\r\n> ESPnetDataset(\r\n>   speech: {\"path\": \"dump/raw/validdir/wav.scp\", \"type\": \"sound\"}\r\n>   text: {\"path\": \"dump/raw/validdir/text\", \"type\": \"text\"}\r\n>   preprocess: <espnet2.train.preprocessor.CommonPreprocessor object at 0x7fbc4c7f5c70>)\r\n> [dgx001] 2023-04-03 10:08:35,931 (abs_task:1560) INFO: [valid] Batch sampler: NumElementsBatchSampler(N-batch=7, batch_bins=15000000, sort_in_batch=descending, sort_batch=descending)\r\n> [dgx001] 2023-04-03 10:08:35,931 (abs_task:1561) INFO: [valid] mini-batch sizes summary: N-batch=7, mean=138.3, min=19, max=267\r\n> [dgx001] 2023-04-03 10:08:35,934 (asr:471) INFO: Optional Data Names: ('text_spk2', 'text_spk3', 'text_spk4')\r\n> [dgx001] 2023-04-03 10:08:35,957 (abs_task:1559) INFO: [plot_att] dataset:\r\n> ESPnetDataset(\r\n>   speech: {\"path\": \"dump/raw/validdir/wav.scp\", \"type\": \"sound\"}\r\n>   text: {\"path\": \"dump/raw/validdir/text\", \"type\": \"text\"}\r\n>   preprocess: <espnet2.train.preprocessor.CommonPreprocessor object at 0x7fbc4c7f9220>)\r\n> [dgx001] 2023-04-03 10:08:35,957 (abs_task:1560) INFO: [plot_att] Batch sampler: UnsortedBatchSampler(N-batch=968, batch_size=1, key_file=exp/asr_stats_raw_bpe500/valid/speech_shape, \r\n> [dgx001] 2023-04-03 10:08:35,957 (abs_task:1561) INFO: [plot_att] mini-batch sizes summary: N-batch=3, mean=1.0, min=1, max=1\r\n> [dgx001] 2023-04-03 10:08:36,047 (trainer:284) INFO: 1/100epoch started\r\n> Traceback (most recent call last):\r\n>   File \"/home/skakarap/Research/espnet/espnet/tools/anaconda/envs/espnet/lib/python3.9/runpy.py\", line 197, in _run_module_as_main\r\n>     return _run_code(code, main_globals, None,\r\n>   File \"/home/skakarap/Research/espnet/espnet/tools/anaconda/envs/espnet/lib/python3.9/runpy.py\", line 87, in _run_code\r\n>     exec(code, run_globals)\r\n>   File \"/home/skakarap/Research/espnet/espnet/espnet2/bin/asr_train.py\", line 23, in <module>\r\n>     main()\r\n>   File \"/home/skakarap/Research/espnet/espnet/espnet2/bin/asr_train.py\", line 19, in main\r\n>     ASRTask.main(cmd=cmd)\r\n>   File \"/home/skakarap/Research/espnet/espnet/espnet2/tasks/abs_task.py\", line 1043, in main\r\n>     cls.main_worker(args)\r\n>   File \"/home/skakarap/Research/espnet/espnet/espnet2/tasks/abs_task.py\", line 1348, in main_worker\r\n>     cls.trainer.run(\r\n>   File \"/home/skakarap/Research/espnet/espnet/espnet2/train/trainer.py\", line 290, in run\r\n>     all_steps_are_invalid = cls.train_one_epoch(\r\n>   File \"/home/skakarap/Research/espnet/espnet/espnet2/train/trainer.py\", line 567, in train_one_epoch\r\n>     retval = model(**batch)\r\n>   File \"/home/skakarap/Research/espnet/espnet/tools/anaconda/envs/espnet/lib/python3.9/site-packages/torch/nn/modules/module.py\", line 1194, in _call_impl\r\n>     return forward_call(*input, **kwargs)\r\n>   File \"/home/skakarap/Research/espnet/espnet/espnet2/asr/espnet_model.py\", line 217, in forward\r\n>     encoder_out, encoder_out_lens = self.encode(speech, speech_lengths)\r\n>   File \"/home/skakarap/Research/espnet/espnet/espnet2/asr/espnet_model.py\", line 366, in encode\r\n>     feats, feats_lengths = self.normalize(feats, feats_lengths)\r\n>   File \"/home/skakarap/Research/espnet/espnet/tools/anaconda/envs/espnet/lib/python3.9/site-packages/torch/nn/modules/module.py\", line 1194, in _call_impl\r\n>     return forward_call(*input, **kwargs)\r\n>   File \"/home/skakarap/Research/espnet/espnet/espnet2/layers/global_mvn.py\", line 86, in forward\r\n>     x -= self.mean\r\n> RuntimeError: The size of tensor a (2) must match the size of tensor b (80) at non-singleton dimension 2\r\n> \r\n\r\nI don't have an idea of how to get started with fixing this? Would really appreciate some advice on this. \r\n", "reactions": {"url": "https://api.github.com/repos/espnet/espnet/issues/5079/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/espnet/espnet/issues/5079/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/espnet/espnet/issues/5058", "repository_url": "https://api.github.com/repos/espnet/espnet", "labels_url": "https://api.github.com/repos/espnet/espnet/issues/5058/labels{/name}", "comments_url": "https://api.github.com/repos/espnet/espnet/issues/5058/comments", "events_url": "https://api.github.com/repos/espnet/espnet/issues/5058/events", "html_url": "https://github.com/espnet/espnet/issues/5058", "id": 1640317996, "node_id": "I_kwDOBsxW2c5hxUQs", "number": 5058, "title": "Unable to run mfa.sh to train fastspeech2", "user": {"login": "Kodhandarama", "id": 44093589, "node_id": "MDQ6VXNlcjQ0MDkzNTg5", "avatar_url": "https://avatars.githubusercontent.com/u/44093589?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Kodhandarama", "html_url": "https://github.com/Kodhandarama", "followers_url": "https://api.github.com/users/Kodhandarama/followers", "following_url": "https://api.github.com/users/Kodhandarama/following{/other_user}", "gists_url": "https://api.github.com/users/Kodhandarama/gists{/gist_id}", "starred_url": "https://api.github.com/users/Kodhandarama/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Kodhandarama/subscriptions", "organizations_url": "https://api.github.com/users/Kodhandarama/orgs", "repos_url": "https://api.github.com/users/Kodhandarama/repos", "events_url": "https://api.github.com/users/Kodhandarama/events{/privacy}", "received_events_url": "https://api.github.com/users/Kodhandarama/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 777173273, "node_id": "MDU6TGFiZWw3NzcxNzMyNzM=", "url": "https://api.github.com/repos/espnet/espnet/labels/Bug", "name": "Bug", "color": "ee0701", "default": false, "description": "bug should be fixed"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2023-03-25T01:51:26Z", "updated_at": "2023-03-25T14:01:41Z", "closed_at": "2023-03-25T14:01:41Z", "author_association": "NONE", "active_lock_reason": null, "body": "Unable to run mfa.sh to train fastspeech2\r\n\r\nEnvironment :\r\nOS : Operating System: Red Hat Enterprise Linux 9.1 (Plow)   \r\npython version : 3. 8.16\r\nlibraries :\r\nPython modules:\r\n[x] torch=1.13.1\r\n[x] torch cuda=11.7\r\n[x] torch cudnn=8500\r\n[x] torch nccl\r\n[x] chainer=6.0.0\r\n[ ] chainer cuda\r\n[ ] chainer cudnn\r\n[ ] cupy\r\n[x] torchaudio=0.13.1\r\n[x] torch_optimizer=0.3.0\r\n[ ] warprnnt_pytorch\r\n[ ] chainer_ctc\r\n[x] pyopenjtalk=0.3.0\r\n[ ] tdmelodic_pyopenjtalk\r\n[ ] kenlm\r\n[ ] mmseg\r\n[x] espnet=202301\r\n[x] numpy=1.23.5\r\n[ ] fairseq\r\n[x] phonemizer=3.2.1\r\n[ ] gtn\r\n[ ] s3prl\r\n[ ] transformers\r\n[ ] speechbrain\r\n[ ] k2\r\n[ ] longformer\r\n[ ] nlg-eval\r\n[ ] datasets\r\n[ ] pykeops\r\n[ ] whisper\r\n[ ] RawNet3\r\n[ ] reazonspeech\r\n[ ] muskits\r\n[ ] Kaldi\r\n\r\nExecutables:\r\n[ ] sclite\r\n[ ] sph2pipe\r\n[ ] PESQ\r\n[ ] BeamformIt\r\n[ ] spm_train\r\n[ ] spm_encode\r\n[ ] spm_decode\r\n[x] sox=14.4.2\r\n[x] ffmpeg=4.2.2\r\n[x] flac=1.3.4\r\n[x] cmake=3.22.1\r\n\r\ngit hash :\r\ncommit 666dd77fa7cf8069ffbb84f275ec056d36e8151f (HEAD -> master, origin/master, origin/HEAD)\r\nMerge: 4d4959c24 aec4a6f0e\r\nAuthor: mergify[bot] <37929162+mergify[bot]@users.noreply.github.com>\r\nDate:   Mon Mar 20 10:39:05 2023 +0000\r\n\r\n    Merge pull request #5038 from espnet/kamo-naoyuki-patch-2\r\n    \r\n    Fix for  format_wav_scp.py\r\nTask : \r\negs2/ljspeech/tts1\r\n\r\nsteps to reproduce :\r\n1) cd to egs2/ljspeech/tts1 and run local/mfa.sh\r\n\r\nerror log file : (espnet/egs2/ljspeech/tts1/data/local/mfa/tmp/logs/train_g2p.log)\r\n\r\n# mfa train_g2p -j 12 --clean --phonetisaurus -t data/local/mfa/tmp data/local/mfa/train_dict.txt data/local/mfa/g2p/english_us_espeak.zip \r\n# Started at Fri Mar 24 20:30:15 CDT 2023\r\n#\r\n/home/eng/s/sxc220013/Documents/espnet/tools/anaconda/envs/espnet/lib/python3.8/site-packages/Bio/pairwise2.py:278: BiopythonDeprecationWarning: Bio.pairwise2 has been deprecated, and we intend to remove it in a future release of Biopython. As an alternative, please consider using Bio.Align.PairwiseAligner as a replacement, and contact the Biopython developers if you still need the Bio.pairwise2 module.\r\n  warnings.warn(\r\nTraceback (most recent call last):\r\n  File \"/home/eng/s/sxc220013/Documents/espnet/tools/anaconda/envs/espnet/bin/mfa\", line 5, in <module>\r\n    from montreal_forced_aligner.command_line.mfa import main\r\n  File \"/home/eng/s/sxc220013/Documents/espnet/tools/anaconda/envs/espnet/lib/python3.8/site-packages/montreal_forced_aligner/__init__.py\", line 6, in <module>\r\n    import montreal_forced_aligner.command_line as command_line\r\n  File \"/home/eng/s/sxc220013/Documents/espnet/tools/anaconda/envs/espnet/lib/python3.8/site-packages/montreal_forced_aligner/command_line/__init__.py\", line 13, in <module>\r\n    from montreal_forced_aligner.command_line.mfa import create_parser, main\r\n  File \"/home/eng/s/sxc220013/Documents/espnet/tools/anaconda/envs/espnet/lib/python3.8/site-packages/montreal_forced_aligner/command_line/mfa.py\", line 18, in <module>\r\n    from montreal_forced_aligner.command_line.model import run_model\r\n  File \"/home/eng/s/sxc220013/Documents/espnet/tools/anaconda/envs/espnet/lib/python3.8/site-packages/montreal_forced_aligner/command_line/model.py\", line 8, in <module>\r\n    from montreal_forced_aligner.config import get_temporary_directory\r\n  File \"/home/eng/s/sxc220013/Documents/espnet/tools/anaconda/envs/espnet/lib/python3.8/site-packages/montreal_forced_aligner/config.py\", line 228, in <module>\r\n    USE_COLORS = load_global_config().get(\"terminal_colors\", True)\r\n  File \"/home/eng/s/sxc220013/Documents/espnet/tools/anaconda/envs/espnet/lib/python3.8/site-packages/montreal_forced_aligner/config.py\", line 221, in load_global_config\r\n    data = yaml.safe_load(f)\r\n  File \"/home/eng/s/sxc220013/Documents/espnet/tools/anaconda/envs/espnet/lib/python3.8/site-packages/yaml/__init__.py\", line 125, in safe_load\r\n    return load(stream, SafeLoader)\r\n  File \"/home/eng/s/sxc220013/Documents/espnet/tools/anaconda/envs/espnet/lib/python3.8/site-packages/yaml/__init__.py\", line 81, in load\r\n    return loader.get_single_data()\r\n  File \"/home/eng/s/sxc220013/Documents/espnet/tools/anaconda/envs/espnet/lib/python3.8/site-packages/yaml/constructor.py\", line 51, in get_single_data\r\n    return self.construct_document(node)\r\n  File \"/home/eng/s/sxc220013/Documents/espnet/tools/anaconda/envs/espnet/lib/python3.8/site-packages/yaml/constructor.py\", line 60, in construct_document\r\n    for dummy in generator:\r\n  File \"/home/eng/s/sxc220013/Documents/espnet/tools/anaconda/envs/espnet/lib/python3.8/site-packages/yaml/constructor.py\", line 413, in construct_yaml_map\r\n    value = self.construct_mapping(node)\r\n  File \"/home/eng/s/sxc220013/Documents/espnet/tools/anaconda/envs/espnet/lib/python3.8/site-packages/yaml/constructor.py\", line 218, in construct_mapping\r\n    return super().construct_mapping(node, deep=deep)\r\n  File \"/home/eng/s/sxc220013/Documents/espnet/tools/anaconda/envs/espnet/lib/python3.8/site-packages/yaml/constructor.py\", line 143, in construct_mapping\r\n    value = self.construct_object(value_node, deep=deep)\r\n  File \"/home/eng/s/sxc220013/Documents/espnet/tools/anaconda/envs/espnet/lib/python3.8/site-packages/yaml/constructor.py\", line 100, in construct_object\r\n    data = constructor(self, node)\r\n  ******File \"/home/eng/s/sxc220013/Documents/espnet/tools/anaconda/envs/espnet/lib/python3.8/site-packages/yaml/constructor.py\", line 427, in construct_undefined\r\n    raise ConstructorError(None, None,\r\nyaml.constructor.ConstructorError: could not determine a constructor for the tag 'tag:yaml.org,2002:python/object/apply:pathlib.PosixPath'\r\n\r\n  in \"/home/eng/s/sxc220013/Documents/MFA/global_config.yaml\", line 16, column 22\r\n# Accounting: time=0 threads=1\r\n# Ended (code 1) at Fri Mar 24 20:30:15 CDT 2023, elapsed time 0 seconds******\r\n\r\nI read that sqlalchemy and prratio versions were causing trouble in https://github.com/MontrealCorpusTools/Montreal-Forced-Aligner/issues/551\r\nI changed the versions to praatio=5.1.1 sqlachemy=1.4.3\r\nThe error message changed to the one mentioned above(mentioned in bold).\r\n[train_g2p.log](https://github.com/espnet/espnet/files/11067718/train_g2p.log)", "reactions": {"url": "https://api.github.com/repos/espnet/espnet/issues/5058/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/espnet/espnet/issues/5058/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/espnet/espnet/issues/5048", "repository_url": "https://api.github.com/repos/espnet/espnet", "labels_url": "https://api.github.com/repos/espnet/espnet/issues/5048/labels{/name}", "comments_url": "https://api.github.com/repos/espnet/espnet/issues/5048/comments", "events_url": "https://api.github.com/repos/espnet/espnet/issues/5048/events", "html_url": "https://github.com/espnet/espnet/issues/5048", "id": 1635367464, "node_id": "I_kwDOBsxW2c5heboo", "number": 5048, "title": "Broken ASR url in espnet/egs/libri_css/asr1/run.sh", "user": {"login": "boeddeker", "id": 13744128, "node_id": "MDQ6VXNlcjEzNzQ0MTI4", "avatar_url": "https://avatars.githubusercontent.com/u/13744128?v=4", "gravatar_id": "", "url": "https://api.github.com/users/boeddeker", "html_url": "https://github.com/boeddeker", "followers_url": "https://api.github.com/users/boeddeker/followers", "following_url": "https://api.github.com/users/boeddeker/following{/other_user}", "gists_url": "https://api.github.com/users/boeddeker/gists{/gist_id}", "starred_url": "https://api.github.com/users/boeddeker/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/boeddeker/subscriptions", "organizations_url": "https://api.github.com/users/boeddeker/orgs", "repos_url": "https://api.github.com/users/boeddeker/repos", "events_url": "https://api.github.com/users/boeddeker/events{/privacy}", "received_events_url": "https://api.github.com/users/boeddeker/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 777173273, "node_id": "MDU6TGFiZWw3NzcxNzMyNzM=", "url": "https://api.github.com/repos/espnet/espnet/labels/Bug", "name": "Bug", "color": "ee0701", "default": false, "description": "bug should be fixed"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2023-03-22T09:21:01Z", "updated_at": "2023-03-22T15:30:10Z", "closed_at": "2023-03-22T15:30:10Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "**Describe the bug**\r\nI get a 404 error, when I try to open the `asr_url` from `espnet/egs/libri_css/asr1/run.sh`.\r\nThe link is: https://drive.google.com/open?id=17cOOSHHMKI82e1MXj4r2ig8gpGCRmG2p\r\n\r\nCode: https://github.com/espnet/espnet/blob/f3e5ce080505d1d49c4a16248aa0a61e4c04a27e/egs/libri_css/asr1/run.sh#LL23C9-L23C75\r\n\r\n**Task information:**\r\n - Task: ASR\r\n - Recipe: libri_css\r\n - ESPnet1\r\n\r\n**To Reproduce**\r\nSteps to reproduce the behavior:\r\n1. Copy value of `asr_url` from `espnet/egs/libri_css/asr1/run.sh`\r\n2. Paste link in browser and press enter", "reactions": {"url": "https://api.github.com/repos/espnet/espnet/issues/5048/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/espnet/espnet/issues/5048/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/espnet/espnet/issues/5047", "repository_url": "https://api.github.com/repos/espnet/espnet", "labels_url": "https://api.github.com/repos/espnet/espnet/issues/5047/labels{/name}", "comments_url": "https://api.github.com/repos/espnet/espnet/issues/5047/comments", "events_url": "https://api.github.com/repos/espnet/espnet/issues/5047/events", "html_url": "https://github.com/espnet/espnet/issues/5047", "id": 1634081824, "node_id": "I_kwDOBsxW2c5hZhwg", "number": 5047, "title": "installers/install_warp-ctc.sh ERROR: No matching distribution found for warpctc-pytorch==0.2.1+torch14.cpu", "user": {"login": "mera-mike", "id": 122914661, "node_id": "U_kgDOB1OHZQ", "avatar_url": "https://avatars.githubusercontent.com/u/122914661?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mera-mike", "html_url": "https://github.com/mera-mike", "followers_url": "https://api.github.com/users/mera-mike/followers", "following_url": "https://api.github.com/users/mera-mike/following{/other_user}", "gists_url": "https://api.github.com/users/mera-mike/gists{/gist_id}", "starred_url": "https://api.github.com/users/mera-mike/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mera-mike/subscriptions", "organizations_url": "https://api.github.com/users/mera-mike/orgs", "repos_url": "https://api.github.com/users/mera-mike/repos", "events_url": "https://api.github.com/users/mera-mike/events{/privacy}", "received_events_url": "https://api.github.com/users/mera-mike/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 777173273, "node_id": "MDU6TGFiZWw3NzcxNzMyNzM=", "url": "https://api.github.com/repos/espnet/espnet/labels/Bug", "name": "Bug", "color": "ee0701", "default": false, "description": "bug should be fixed"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-03-21T14:43:37Z", "updated_at": "2023-03-24T18:57:21Z", "closed_at": "2023-03-24T18:57:21Z", "author_association": "NONE", "active_lock_reason": null, "body": "anyone got any idea why this\r\n\r\ninstallers/install_warp-ctc.sh\r\n<stdin>:4: DeprecationWarning: distutils Version classes are deprecated. Use packaging.version instead.\r\n<stdin>:4: DeprecationWarning: distutils Version classes are deprecated. Use packaging.version instead.\r\n<stdin>:4: DeprecationWarning: distutils Version classes are deprecated. Use packaging.version instead.\r\ncuda_version=\r\nCollecting warpctc-pytorch==0.2.1+torch14.cpu\r\n  Using cached warpctc_pytorch-0.2.1%2Btorch14.cpu-cp38-cp38-manylinux1_x86_64.whl (1.9 MB)\r\nDiscarding https://files.pythonhosted.org/packages/9e/9c/316b6d72610538e07997dfeba6672d44ae27b4c898385dfba6fd4e72e073/warpctc_pytorch-0.2.1%2Btorch14.cpu-cp38-cp38-manylinux1_x86_64.whl (from https://pypi.org/simple/warpctc-pytorch/): Requested warpctc-pytorch==0.2.1+torch14.cpu from https://files.pythonhosted.org/packages/9e/9c/316b6d72610538e07997dfeba6672d44ae27b4c898385dfba6fd4e72e073/warpctc_pytorch-0.2.1%2Btorch14.cpu-cp38-cp38-manylinux1_x86_64.whl has inconsistent version: expected '0.2.1+torch14.cpu', but metadata has '0.2.1'\r\nERROR: Could not find a version that satisfies the requirement warpctc-pytorch==0.2.1+torch14.cpu (from versions: 0.2.0+torch14.cpu, 0.2.0+torch14.cuda100, 0.2.0+torch14.cuda101, 0.2.0+torch14.cuda102, 0.2.0+torch14.cuda92, 0.2.0+torch15.cpu, 0.2.0+torch15.cuda100, 0.2.0+torch15.cuda101, 0.2.0+torch15.cuda102, 0.2.0+torch15.cuda92, 0.2.0+torch16.cpu, 0.2.0+torch16.cuda100, 0.2.0+torch16.cuda101, 0.2.0+torch16.cuda102, 0.2.0+torch16.cuda92, 0.2.1+torch14.cpu, 0.2.1+torch14.cuda100, 0.2.1+torch14.cuda101, 0.2.1+torch14.cuda102, 0.2.1+torch14.cuda92, 0.2.1+torch15.cpu, 0.2.1+torch15.cuda100, 0.2.1+torch15.cuda101, 0.2.1+torch15.cuda102, 0.2.1+torch15.cuda92, 0.2.1+torch16.cpu, 0.2.1+torch16.cuda100, 0.2.1+torch16.cuda101, 0.2.1+torch16.cuda102, 0.2.1+torch16.cuda92)\r\nERROR: No matching distribution found for warpctc-pytorch==0.2.1+torch14.cpu", "reactions": {"url": "https://api.github.com/repos/espnet/espnet/issues/5047/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/espnet/espnet/issues/5047/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/espnet/espnet/issues/5037", "repository_url": "https://api.github.com/repos/espnet/espnet", "labels_url": "https://api.github.com/repos/espnet/espnet/issues/5037/labels{/name}", "comments_url": "https://api.github.com/repos/espnet/espnet/issues/5037/comments", "events_url": "https://api.github.com/repos/espnet/espnet/issues/5037/events", "html_url": "https://github.com/espnet/espnet/issues/5037", "id": 1631544872, "node_id": "I_kwDOBsxW2c5hP2Yo", "number": 5037, "title": "AttributeError: 'Namespace' object has no attribute 'use_ddp' in ars.py train", "user": {"login": "mera-mike", "id": 122914661, "node_id": "U_kgDOB1OHZQ", "avatar_url": "https://avatars.githubusercontent.com/u/122914661?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mera-mike", "html_url": "https://github.com/mera-mike", "followers_url": "https://api.github.com/users/mera-mike/followers", "following_url": "https://api.github.com/users/mera-mike/following{/other_user}", "gists_url": "https://api.github.com/users/mera-mike/gists{/gist_id}", "starred_url": "https://api.github.com/users/mera-mike/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mera-mike/subscriptions", "organizations_url": "https://api.github.com/users/mera-mike/orgs", "repos_url": "https://api.github.com/users/mera-mike/repos", "events_url": "https://api.github.com/users/mera-mike/events{/privacy}", "received_events_url": "https://api.github.com/users/mera-mike/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 777173273, "node_id": "MDU6TGFiZWw3NzcxNzMyNzM=", "url": "https://api.github.com/repos/espnet/espnet/labels/Bug", "name": "Bug", "color": "ee0701", "default": false, "description": "bug should be fixed"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 23, "created_at": "2023-03-20T07:27:53Z", "updated_at": "2023-04-09T14:01:35Z", "closed_at": "2023-03-21T13:09:35Z", "author_association": "NONE", "active_lock_reason": null, "body": "\r\nhi guyz i am having trouble training using the voxforge recipes under espnet/egs/voxforge during stage 3 neural network training it says\r\n\r\nrun.pl: job failed, log is in exp/tr_it_pytorch_train/train.log\r\nand in the log it is\r\n\r\nAttributeError: 'Namespace' object has no attribute 'use_ddp'\r\n\r\ncan anyone help\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/espnet/espnet/issues/5037/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/espnet/espnet/issues/5037/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/espnet/espnet/issues/5036", "repository_url": "https://api.github.com/repos/espnet/espnet", "labels_url": "https://api.github.com/repos/espnet/espnet/issues/5036/labels{/name}", "comments_url": "https://api.github.com/repos/espnet/espnet/issues/5036/comments", "events_url": "https://api.github.com/repos/espnet/espnet/issues/5036/events", "html_url": "https://github.com/espnet/espnet/issues/5036", "id": 1631540866, "node_id": "I_kwDOBsxW2c5hP1aC", "number": 5036, "title": "AttributeError: 'Namespace' object has no attribute 'use_ddp'", "user": {"login": "mera-mike", "id": 122914661, "node_id": "U_kgDOB1OHZQ", "avatar_url": "https://avatars.githubusercontent.com/u/122914661?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mera-mike", "html_url": "https://github.com/mera-mike", "followers_url": "https://api.github.com/users/mera-mike/followers", "following_url": "https://api.github.com/users/mera-mike/following{/other_user}", "gists_url": "https://api.github.com/users/mera-mike/gists{/gist_id}", "starred_url": "https://api.github.com/users/mera-mike/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mera-mike/subscriptions", "organizations_url": "https://api.github.com/users/mera-mike/orgs", "repos_url": "https://api.github.com/users/mera-mike/repos", "events_url": "https://api.github.com/users/mera-mike/events{/privacy}", "received_events_url": "https://api.github.com/users/mera-mike/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 777173273, "node_id": "MDU6TGFiZWw3NzcxNzMyNzM=", "url": "https://api.github.com/repos/espnet/espnet/labels/Bug", "name": "Bug", "color": "ee0701", "default": false, "description": "bug should be fixed"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-03-20T07:23:57Z", "updated_at": "2023-03-21T13:10:06Z", "closed_at": "2023-03-21T13:10:06Z", "author_association": "NONE", "active_lock_reason": null, "body": "hi guyz i am having trouble training using the voxforge recipes under espnet/egs/voxforge during stage 3 neural network training it says\r\n\r\n\r\nrun.pl: job failed, log is in exp/tr_it_pytorch_train/train.log\r\nand in the log it is \r\n\r\nAttributeError: 'Namespace' object has no attribute 'use_ddp'\r\n\r\ncan anyone help\r\n", "reactions": {"url": "https://api.github.com/repos/espnet/espnet/issues/5036/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/espnet/espnet/issues/5036/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/espnet/espnet/issues/5023", "repository_url": "https://api.github.com/repos/espnet/espnet", "labels_url": "https://api.github.com/repos/espnet/espnet/issues/5023/labels{/name}", "comments_url": "https://api.github.com/repos/espnet/espnet/issues/5023/comments", "events_url": "https://api.github.com/repos/espnet/espnet/issues/5023/events", "html_url": "https://github.com/espnet/espnet/issues/5023", "id": 1628795882, "node_id": "I_kwDOBsxW2c5hFXPq", "number": 5023, "title": "ImportError: cannot import name 'check_argument_types' from 'typeguard'", "user": {"login": "DannyLeee", "id": 48764932, "node_id": "MDQ6VXNlcjQ4NzY0OTMy", "avatar_url": "https://avatars.githubusercontent.com/u/48764932?v=4", "gravatar_id": "", "url": "https://api.github.com/users/DannyLeee", "html_url": "https://github.com/DannyLeee", "followers_url": "https://api.github.com/users/DannyLeee/followers", "following_url": "https://api.github.com/users/DannyLeee/following{/other_user}", "gists_url": "https://api.github.com/users/DannyLeee/gists{/gist_id}", "starred_url": "https://api.github.com/users/DannyLeee/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/DannyLeee/subscriptions", "organizations_url": "https://api.github.com/users/DannyLeee/orgs", "repos_url": "https://api.github.com/users/DannyLeee/repos", "events_url": "https://api.github.com/users/DannyLeee/events{/privacy}", "received_events_url": "https://api.github.com/users/DannyLeee/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 777173273, "node_id": "MDU6TGFiZWw3NzcxNzMyNzM=", "url": "https://api.github.com/repos/espnet/espnet/labels/Bug", "name": "Bug", "color": "ee0701", "default": false, "description": "bug should be fixed"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2023-03-17T06:51:04Z", "updated_at": "2023-03-17T08:24:47Z", "closed_at": "2023-03-17T07:58:32Z", "author_association": "NONE", "active_lock_reason": null, "body": "I encountered an ImportError while using `from espnet2.bin.asr_inference import Speech2Text`. The error message indicates that `check_argument_types` cannot be imported from typeguard.\r\n\r\nThe reason is that typeguard has removed `check_argument_types` in version 3.0.0, which was released on March 15, two days ago. More information about typeguard, please refer to https://typeguard.readthedocs.io/en/stable/versionhistory.html.\r\n\r\nI am currently using espnet v.202209, and the setup.py of v.202301 still uses `requirements = \"typeguard>=2.7.0\"`. This may cause the same problem.\r\n\r\nCould you please either limit the version of typeguard in the future version of espnet or modify the function that calls `check_argument_types` to conform to the new version of typeguard?\r\n\r\nThank you very much!", "reactions": {"url": "https://api.github.com/repos/espnet/espnet/issues/5023/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/espnet/espnet/issues/5023/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/espnet/espnet/issues/5018", "repository_url": "https://api.github.com/repos/espnet/espnet", "labels_url": "https://api.github.com/repos/espnet/espnet/issues/5018/labels{/name}", "comments_url": "https://api.github.com/repos/espnet/espnet/issues/5018/comments", "events_url": "https://api.github.com/repos/espnet/espnet/issues/5018/events", "html_url": "https://github.com/espnet/espnet/issues/5018", "id": 1627404723, "node_id": "I_kwDOBsxW2c5hADmz", "number": 5018, "title": "whisper fine-tuning error in the decoder", "user": {"login": "sameerkhurana10", "id": 7698301, "node_id": "MDQ6VXNlcjc2OTgzMDE=", "avatar_url": "https://avatars.githubusercontent.com/u/7698301?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sameerkhurana10", "html_url": "https://github.com/sameerkhurana10", "followers_url": "https://api.github.com/users/sameerkhurana10/followers", "following_url": "https://api.github.com/users/sameerkhurana10/following{/other_user}", "gists_url": "https://api.github.com/users/sameerkhurana10/gists{/gist_id}", "starred_url": "https://api.github.com/users/sameerkhurana10/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sameerkhurana10/subscriptions", "organizations_url": "https://api.github.com/users/sameerkhurana10/orgs", "repos_url": "https://api.github.com/users/sameerkhurana10/repos", "events_url": "https://api.github.com/users/sameerkhurana10/events{/privacy}", "received_events_url": "https://api.github.com/users/sameerkhurana10/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 777173273, "node_id": "MDU6TGFiZWw3NzcxNzMyNzM=", "url": "https://api.github.com/repos/espnet/espnet/labels/Bug", "name": "Bug", "color": "ee0701", "default": false, "description": "bug should be fixed"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2023-03-16T12:45:53Z", "updated_at": "2023-03-16T19:26:05Z", "closed_at": "2023-03-16T17:34:38Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi,\r\n\r\nespnet: 202301\r\ncuda: 11.7\r\npytorch: 1.13.1\r\nwhisper: 20230308\r\nGPUs: 8 A100\r\n\r\nI am trying to perform multilingual fine-tuning of the pre-trained whisper model on the fleurs dataset. I am using whisper_multilingual tokenizer. I get the following error:\r\n\r\n```\r\nTraceback (most recent call last):\r\n  File \"/gpfswork/rech/iqh/upp27cx/conda-envs/espnet_mar142023_whisper/lib/python3.8/multiprocessing/process.py\", line 315, in _bootstrap\r\n    self.run()\r\n  File \"/gpfswork/rech/iqh/upp27cx/conda-envs/espnet_mar142023_whisper/lib/python3.8/multiprocessing/process.py\", line 108, in run\r\n    self._target(*self._args, **self._kwargs)\r\n  File \"/gpfsdswork/projects/rech/iqh/upp27cx/sameerk/espnet_mar142023_whisper/espnet/espnet2/tasks/abs_task.py\", line 1359, in main_worker\r\n    cls.trainer.run(\r\n  File \"/gpfsdswork/projects/rech/iqh/upp27cx/sameerk/espnet_mar142023_whisper/espnet/espnet2/train/trainer.py\", line 290, in run\r\n    all_steps_are_invalid = cls.train_one_epoch(\r\n  File \"/gpfsdswork/projects/rech/iqh/upp27cx/sameerk/espnet_mar142023_whisper/espnet/espnet2/train/trainer.py\", line 567, in train_one_epoch\r\n    retval = model(**batch)\r\n  File \"/gpfswork/rech/iqh/upp27cx/conda-envs/espnet_mar142023_whisper/lib/python3.8/site-packages/torch/nn/modules/module.py\", line 1194, in _call_impl\r\n    return forward_call(*input, **kwargs)\r\n  File \"/gpfswork/rech/iqh/upp27cx/conda-envs/espnet_mar142023_whisper/lib/python3.8/site-packages/torch/nn/parallel/distributed.py\", line 1040, in forward\r\n    output = self._run_ddp_forward(*inputs, **kwargs)\r\n  File \"/gpfswork/rech/iqh/upp27cx/conda-envs/espnet_mar142023_whisper/lib/python3.8/site-packages/torch/nn/parallel/distributed.py\", line 1000, in _run_ddp_forward\r\n    return module_to_run(*inputs[0], **kwargs[0])\r\n  File \"/gpfswork/rech/iqh/upp27cx/conda-envs/espnet_mar142023_whisper/lib/python3.8/site-packages/torch/nn/modules/module.py\", line 1194, in _call_impl\r\n    return forward_call(*input, **kwargs)\r\n  File \"/gpfsdswork/projects/rech/iqh/upp27cx/sameerk/espnet_mar142023_whisper/espnet/espnet2/asr/espnet_model.py\", line 315, in forward\r\n    loss_att, acc_att, cer_att, wer_att = self._calc_att_loss(\r\n  File \"/gpfsdswork/projects/rech/iqh/upp27cx/sameerk/espnet_mar142023_whisper/espnet/espnet2/asr/espnet_model.py\", line 539, in _calc_att_loss\r\n    decoder_out, _ = self.decoder(\r\n  File \"/gpfswork/rech/iqh/upp27cx/conda-envs/espnet_mar142023_whisper/lib/python3.8/site-packages/torch/nn/modules/module.py\", line 1194, in _call_impl\r\n    return forward_call(*input, **kwargs)\r\n  File \"/gpfsdswork/projects/rech/iqh/upp27cx/sameerk/espnet_mar142023_whisper/espnet/espnet2/asr/decoder/whisper_decoder.py\", line 92, in forward\r\n    self.decoders.token_embedding(tgt)\r\nRuntimeError: The size of tensor a (468) must match the size of tensor b (448) at non-singleton dimension 1\r\n```\r\nThe error seems to be coming from this line: https://github.com/espnet/espnet/blob/master/espnet2/asr/decoder/whisper_decoder.py#L92\r\n\r\nIs it because I have some small utterances in my training set? The minimum wav duration that I am accepting is 0.1 seconds. I tried increasing this to up to 3 seconds, but its not helping.\r\n\r\nAn example of the training transcript is as follows:\r\n```\r\n10000156097013738607_sw <|sw|> <|transcribe|> <|notimestamps|> AKAWATUMIA WANAFUNZI WA CHUO KIKUU CHAA NDANI BARUA PEPE NA AKAPATA MATOLEO MENGI SANA YA MALAZI YA BURE\r\n```\r\n\r\nAlso, the smallest utterance in my training set has 100480 samples.\r\n\r\nI am fine-tuning the whisper small model on 8 GPUs.\r\n\r\nI tried setting `do_pad_trim=true,` but the error persists.\r\n\r\nI did not get the above error with the same dataset when I ran fine-tuning with `--tokenizer_type bpe` instead of `whisper_multilingual`. \r\n\r\n", "reactions": {"url": "https://api.github.com/repos/espnet/espnet/issues/5018/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/espnet/espnet/issues/5018/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/espnet/espnet/issues/5016", "repository_url": "https://api.github.com/repos/espnet/espnet", "labels_url": "https://api.github.com/repos/espnet/espnet/issues/5016/labels{/name}", "comments_url": "https://api.github.com/repos/espnet/espnet/issues/5016/comments", "events_url": "https://api.github.com/repos/espnet/espnet/issues/5016/events", "html_url": "https://github.com/espnet/espnet/issues/5016", "id": 1626309140, "node_id": "I_kwDOBsxW2c5g74IU", "number": 5016, "title": "whisper_multilingual tokenizer error", "user": {"login": "sameerkhurana10", "id": 7698301, "node_id": "MDQ6VXNlcjc2OTgzMDE=", "avatar_url": "https://avatars.githubusercontent.com/u/7698301?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sameerkhurana10", "html_url": "https://github.com/sameerkhurana10", "followers_url": "https://api.github.com/users/sameerkhurana10/followers", "following_url": "https://api.github.com/users/sameerkhurana10/following{/other_user}", "gists_url": "https://api.github.com/users/sameerkhurana10/gists{/gist_id}", "starred_url": "https://api.github.com/users/sameerkhurana10/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sameerkhurana10/subscriptions", "organizations_url": "https://api.github.com/users/sameerkhurana10/orgs", "repos_url": "https://api.github.com/users/sameerkhurana10/repos", "events_url": "https://api.github.com/users/sameerkhurana10/events{/privacy}", "received_events_url": "https://api.github.com/users/sameerkhurana10/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 777173273, "node_id": "MDU6TGFiZWw3NzcxNzMyNzM=", "url": "https://api.github.com/repos/espnet/espnet/labels/Bug", "name": "Bug", "color": "ee0701", "default": false, "description": "bug should be fixed"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2023-03-15T21:25:00Z", "updated_at": "2023-03-15T22:54:11Z", "closed_at": "2023-03-15T22:54:11Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi,\r\n\r\nI was to fine-tune whisper small.\r\n\r\nWhen I use `--tokenizer whisper_multilingual` as input to run.sh, I get the following error:\r\n\r\n```\r\n2023-03-15T22:19:28 (asr.sh:267:main) ./asr.sh --lang all --ngpu 1 --nj 16 --gpu_inference true --inference_nj 2 --nbpe 6500 --max_wav_duration 30 --speed_perturb_factors  --audio_format flac.ark --feats_type raw --use_lm false --asr_config conf/tuning/train_asr_whisper_full.yaml --inference_config conf/decode_asr_whisper_noctc_greedy.yaml --train_set train_all --valid_set dev_all --test_sets test_all --lm_train_text data/train_all/text --bpe_train_text data/train_all/text --stage 5 --stop-stage 8 --token_type whisper_multilingual --nj 32 --speed_perturb_factors  --use_lm false --asr_config conf/tuning/train_asr_whisper_full.yaml --num_nodes 1 --ngpu 8 --inference_nj 100 --lm_train_text data/train_all/text --bpe_train_text data/train_all/text --asr_stats_dir exp/asr_stats_bpe6k_whisper_small_all --asr_tag whisper_small_all --bpe_nlsyms data/train_all/bpe_nlsyms.txt\r\n2023-03-15T22:19:29 (asr.sh:788:main) Stage 5: Generate whisper token_list from whisper_multilingual tokenizer\r\ndata/all_token_list/whisper_multilingual/tokens.txt\r\n/gpfswork/rech/iqh/upp27cx/conda-envs/espnet_mar142023_whisper/bin/python3 /gpfsdswork/projects/rech/iqh/upp27cx/sameerk/espnet_mar142023_whisper/espnet/espnet2/bin/whisper_export_vocabulary.py --whisper_model whisper_multilingual --output data/all_token_list/whisper_multilingual/tokens.txt\r\nTraceback (most recent call last):\r\n  File \"/gpfswork/rech/iqh/upp27cx/conda-envs/espnet_mar142023_whisper/lib/python3.8/runpy.py\", line 194, in _run_module_as_main\r\n    return _run_code(code, main_globals, None,\r\n  File \"/gpfswork/rech/iqh/upp27cx/conda-envs/espnet_mar142023_whisper/lib/python3.8/runpy.py\", line 87, in _run_code\r\n    exec(code, run_globals)\r\n  File \"/gpfsdswork/projects/rech/iqh/upp27cx/sameerk/espnet_mar142023_whisper/espnet/espnet2/bin/whisper_export_vocabulary.py\", line 96, in <module>\r\n    main()\r\n  File \"/gpfsdswork/projects/rech/iqh/upp27cx/sameerk/espnet_mar142023_whisper/espnet/espnet2/bin/whisper_export_vocabulary.py\", line 92, in main\r\n    export_vocabulary(**kwargs)\r\n  File \"/gpfsdswork/projects/rech/iqh/upp27cx/sameerk/espnet_mar142023_whisper/espnet/espnet2/bin/whisper_export_vocabulary.py\", line 45, in export_vocabulary\r\n    vocab_size = tokenizer.tokenizer.vocab_size + len(\r\nAttributeError: 'Tokenizer' object has no attribute 'tokenizer'\r\n```\r\n\r\nAny ideas on how to fix this?\r\n\r\nUsing: \r\nespnet version 202301\r\npytorch 1.13.1\r\nCuda 11.7\r\nwhisper version 20230308\r\n\r\nThanks,\r\nSameer", "reactions": {"url": "https://api.github.com/repos/espnet/espnet/issues/5016/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/espnet/espnet/issues/5016/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/espnet/espnet/issues/4989", "repository_url": "https://api.github.com/repos/espnet/espnet", "labels_url": "https://api.github.com/repos/espnet/espnet/issues/4989/labels{/name}", "comments_url": "https://api.github.com/repos/espnet/espnet/issues/4989/comments", "events_url": "https://api.github.com/repos/espnet/espnet/issues/4989/events", "html_url": "https://github.com/espnet/espnet/issues/4989", "id": 1615040240, "node_id": "I_kwDOBsxW2c5gQ47w", "number": 4989, "title": "Can I know witch wav's feat that i use in 'ys'", "user": {"login": "huaiche", "id": 43847544, "node_id": "MDQ6VXNlcjQzODQ3NTQ0", "avatar_url": "https://avatars.githubusercontent.com/u/43847544?v=4", "gravatar_id": "", "url": "https://api.github.com/users/huaiche", "html_url": "https://github.com/huaiche", "followers_url": "https://api.github.com/users/huaiche/followers", "following_url": "https://api.github.com/users/huaiche/following{/other_user}", "gists_url": "https://api.github.com/users/huaiche/gists{/gist_id}", "starred_url": "https://api.github.com/users/huaiche/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/huaiche/subscriptions", "organizations_url": "https://api.github.com/users/huaiche/orgs", "repos_url": "https://api.github.com/users/huaiche/repos", "events_url": "https://api.github.com/users/huaiche/events{/privacy}", "received_events_url": "https://api.github.com/users/huaiche/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 777173273, "node_id": "MDU6TGFiZWw3NzcxNzMyNzM=", "url": "https://api.github.com/repos/espnet/espnet/labels/Bug", "name": "Bug", "color": "ee0701", "default": false, "description": "bug should be fixed"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-03-08T10:30:39Z", "updated_at": "2023-03-08T10:41:42Z", "closed_at": "2023-03-08T10:41:42Z", "author_association": "NONE", "active_lock_reason": null, "body": "In fastspeech2 model the code \r\n        xs = F.pad(text, [0, 1], \"constant\", self.padding_idx)\r\n        for i, l in enumerate(text_lengths):\r\n            xs[i, l] = self.eos\r\n        ilens = text_lengths + 1\r\n\r\n        ys, ds, ps, es = feats, durations, pitch, energy\r\n        olens = feats_lengths\r\nCan i know the feats is come from witch wav? ", "reactions": {"url": "https://api.github.com/repos/espnet/espnet/issues/4989/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/espnet/espnet/issues/4989/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/espnet/espnet/issues/4973", "repository_url": "https://api.github.com/repos/espnet/espnet", "labels_url": "https://api.github.com/repos/espnet/espnet/issues/4973/labels{/name}", "comments_url": "https://api.github.com/repos/espnet/espnet/issues/4973/comments", "events_url": "https://api.github.com/repos/espnet/espnet/issues/4973/events", "html_url": "https://github.com/espnet/espnet/issues/4973", "id": 1602498040, "node_id": "I_kwDOBsxW2c5fhC34", "number": 4973, "title": "[BUG]there are incompatible upgrade in parratio==6.0.0", "user": {"login": "yt605155624", "id": 24568452, "node_id": "MDQ6VXNlcjI0NTY4NDUy", "avatar_url": "https://avatars.githubusercontent.com/u/24568452?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yt605155624", "html_url": "https://github.com/yt605155624", "followers_url": "https://api.github.com/users/yt605155624/followers", "following_url": "https://api.github.com/users/yt605155624/following{/other_user}", "gists_url": "https://api.github.com/users/yt605155624/gists{/gist_id}", "starred_url": "https://api.github.com/users/yt605155624/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yt605155624/subscriptions", "organizations_url": "https://api.github.com/users/yt605155624/orgs", "repos_url": "https://api.github.com/users/yt605155624/repos", "events_url": "https://api.github.com/users/yt605155624/events{/privacy}", "received_events_url": "https://api.github.com/users/yt605155624/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 777173273, "node_id": "MDU6TGFiZWw3NzcxNzMyNzM=", "url": "https://api.github.com/repos/espnet/espnet/labels/Bug", "name": "Bug", "color": "ee0701", "default": false, "description": "bug should be fixed"}, {"id": 777173280, "node_id": "MDU6TGFiZWw3NzcxNzMyODA=", "url": "https://api.github.com/repos/espnet/espnet/labels/Wontfix", "name": "Wontfix", "color": "e5f291", "default": false, "description": "Want to fix"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2023-02-28T07:17:19Z", "updated_at": "2023-03-22T17:45:02Z", "closed_at": "2023-03-22T17:45:02Z", "author_association": "NONE", "active_lock_reason": null, "body": "please check https://github.com/timmahrt/praatIO/issues/54", "reactions": {"url": "https://api.github.com/repos/espnet/espnet/issues/4973/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/espnet/espnet/issues/4973/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/espnet/espnet/issues/4959", "repository_url": "https://api.github.com/repos/espnet/espnet", "labels_url": "https://api.github.com/repos/espnet/espnet/issues/4959/labels{/name}", "comments_url": "https://api.github.com/repos/espnet/espnet/issues/4959/comments", "events_url": "https://api.github.com/repos/espnet/espnet/issues/4959/events", "html_url": "https://github.com/espnet/espnet/issues/4959", "id": 1596510484, "node_id": "I_kwDOBsxW2c5fKNEU", "number": 4959, "title": "Error of Librispeech feature extraction", "user": {"login": "Happydici", "id": 69334217, "node_id": "MDQ6VXNlcjY5MzM0MjE3", "avatar_url": "https://avatars.githubusercontent.com/u/69334217?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Happydici", "html_url": "https://github.com/Happydici", "followers_url": "https://api.github.com/users/Happydici/followers", "following_url": "https://api.github.com/users/Happydici/following{/other_user}", "gists_url": "https://api.github.com/users/Happydici/gists{/gist_id}", "starred_url": "https://api.github.com/users/Happydici/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Happydici/subscriptions", "organizations_url": "https://api.github.com/users/Happydici/orgs", "repos_url": "https://api.github.com/users/Happydici/repos", "events_url": "https://api.github.com/users/Happydici/events{/privacy}", "received_events_url": "https://api.github.com/users/Happydici/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 777173273, "node_id": "MDU6TGFiZWw3NzcxNzMyNzM=", "url": "https://api.github.com/repos/espnet/espnet/labels/Bug", "name": "Bug", "color": "ee0701", "default": false, "description": "bug should be fixed"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2023-02-23T09:32:11Z", "updated_at": "2023-02-23T13:25:07Z", "closed_at": "2023-02-23T13:24:59Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi,\r\n\r\nI tried to learn to use Librispeech corpus to train a small asr model. At the third stage, I faced a problem as follows,\r\n\r\n2023-02-23T17:09:09 (asr.sh:526:main) Stage 3: Format wav.scp: data/ -> dump/raw\r\nutils/copy_data_dir.sh: copied data from data/train_clean_100_sp to dump/raw/org/train_clean_100_sp\r\nutils/validate_data_dir.sh: Successfully validated data-directory dump/raw/org/train_clean_100_sp\r\n2023-02-23T17:09:15 (format_wav_scp.sh:43:main) scripts/audio/format_wav_scp.sh --nj 32 --cmd run.pl --audio-format flac --fs 16k data/train_clean_100_sp/wav.scp dump/raw/org/train_clean_100_sp\r\n2023-02-23T17:09:15 (format_wav_scp.sh:112:main) [info]: without segments\r\nrun.pl: 22 / 32 failed, log is in dump/raw/org/train_clean_100_sp/logs/format_wav_scp.*.log\r\n\r\nWhy some of the files are successfully processed while some are failed?\r\n\r\nThank you. \r\n", "reactions": {"url": "https://api.github.com/repos/espnet/espnet/issues/4959/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/espnet/espnet/issues/4959/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/espnet/espnet/issues/4890", "repository_url": "https://api.github.com/repos/espnet/espnet", "labels_url": "https://api.github.com/repos/espnet/espnet/issues/4890/labels{/name}", "comments_url": "https://api.github.com/repos/espnet/espnet/issues/4890/comments", "events_url": "https://api.github.com/repos/espnet/espnet/issues/4890/events", "html_url": "https://github.com/espnet/espnet/issues/4890", "id": 1557805350, "node_id": "I_kwDOBsxW2c5c2jkm", "number": 4890, "title": "Improper phoneme alignment in FastSpeech2 with Tacotron teacher model", "user": {"login": "iamanigeeit", "id": 13131208, "node_id": "MDQ6VXNlcjEzMTMxMjA4", "avatar_url": "https://avatars.githubusercontent.com/u/13131208?v=4", "gravatar_id": "", "url": "https://api.github.com/users/iamanigeeit", "html_url": "https://github.com/iamanigeeit", "followers_url": "https://api.github.com/users/iamanigeeit/followers", "following_url": "https://api.github.com/users/iamanigeeit/following{/other_user}", "gists_url": "https://api.github.com/users/iamanigeeit/gists{/gist_id}", "starred_url": "https://api.github.com/users/iamanigeeit/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/iamanigeeit/subscriptions", "organizations_url": "https://api.github.com/users/iamanigeeit/orgs", "repos_url": "https://api.github.com/users/iamanigeeit/repos", "events_url": "https://api.github.com/users/iamanigeeit/events{/privacy}", "received_events_url": "https://api.github.com/users/iamanigeeit/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 777173273, "node_id": "MDU6TGFiZWw3NzcxNzMyNzM=", "url": "https://api.github.com/repos/espnet/espnet/labels/Bug", "name": "Bug", "color": "ee0701", "default": false, "description": "bug should be fixed"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2023-01-26T08:58:12Z", "updated_at": "2023-01-30T11:13:59Z", "closed_at": "2023-01-30T11:13:59Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Hello,\r\n\r\nI am trying to customize pitch, energy and duration on FS2 and i realized that it's not possible on the [pretrained FS2](https://huggingface.co/espnet/kan-bayashi_ljspeech_tts_train_fastspeech2_raw_phn_tacotron_g2p_en_no_space_train.loss.ave) because the phoneme alignment is off.\r\n\r\nThe audio samples are here: [fs2_from_tacotron.zip](https://github.com/espnet/espnet/files/10507632/fs2_from_tacotron.zip)\r\nThe audio for \"book\" (B UH1 K) misses out the B. Adding a full stop before it makes the B sound, but when i manually modify the duration for the vowel during inference, i get something like \"bffffook\", not \"boooook\". Same thing happens with \"sure\". When i extend the duration of the u, i get \"shhhhure\", not \"suuuure\".\r\n\r\nWith MFA-trained models this doesn't happen, the phonemes are properly aligned and the duration can be changed. Audio samples: \r\n[fastspeech2_mfa.zip](https://github.com/espnet/espnet/files/10507682/fastspeech2_mfa.zip)\r\n\r\nI would like to upload the MFA-trained model on Hugging Face if possible.\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/espnet/espnet/issues/4890/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/espnet/espnet/issues/4890/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/espnet/espnet/issues/4886", "repository_url": "https://api.github.com/repos/espnet/espnet", "labels_url": "https://api.github.com/repos/espnet/espnet/issues/4886/labels{/name}", "comments_url": "https://api.github.com/repos/espnet/espnet/issues/4886/comments", "events_url": "https://api.github.com/repos/espnet/espnet/issues/4886/events", "html_url": "https://github.com/espnet/espnet/issues/4886", "id": 1556600643, "node_id": "I_kwDOBsxW2c5cx9dD", "number": 4886, "title": "Whisper breaks the CI", "user": {"login": "sw005320", "id": 11741550, "node_id": "MDQ6VXNlcjExNzQxNTUw", "avatar_url": "https://avatars.githubusercontent.com/u/11741550?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sw005320", "html_url": "https://github.com/sw005320", "followers_url": "https://api.github.com/users/sw005320/followers", "following_url": "https://api.github.com/users/sw005320/following{/other_user}", "gists_url": "https://api.github.com/users/sw005320/gists{/gist_id}", "starred_url": "https://api.github.com/users/sw005320/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sw005320/subscriptions", "organizations_url": "https://api.github.com/users/sw005320/orgs", "repos_url": "https://api.github.com/users/sw005320/repos", "events_url": "https://api.github.com/users/sw005320/events{/privacy}", "received_events_url": "https://api.github.com/users/sw005320/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 777173273, "node_id": "MDU6TGFiZWw3NzcxNzMyNzM=", "url": "https://api.github.com/repos/espnet/espnet/labels/Bug", "name": "Bug", "color": "ee0701", "default": false, "description": "bug should be fixed"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2023-01-25T12:53:15Z", "updated_at": "2023-01-27T09:11:46Z", "closed_at": "2023-01-27T09:11:46Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "@slSeanWU, it seems that whisper breaks the CI\r\nhttps://github.com/espnet/espnet/actions/runs/4005928925/jobs/6876869037#step:7:864\r\n\r\nNot sure if this is due to their temporal bug (if so, we may wait for their bug fix and use the older version) or some interface changes (if so, can you fix it?).\r\nCould you check this?\r\n", "reactions": {"url": "https://api.github.com/repos/espnet/espnet/issues/4886/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/espnet/espnet/issues/4886/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/espnet/espnet/issues/4866", "repository_url": "https://api.github.com/repos/espnet/espnet", "labels_url": "https://api.github.com/repos/espnet/espnet/issues/4866/labels{/name}", "comments_url": "https://api.github.com/repos/espnet/espnet/issues/4866/comments", "events_url": "https://api.github.com/repos/espnet/espnet/issues/4866/events", "html_url": "https://github.com/espnet/espnet/issues/4866", "id": 1531564322, "node_id": "I_kwDOBsxW2c5bSdEi", "number": 4866, "title": "On how2 and how2-2000h recipes", "user": {"login": "chlorane", "id": 39242468, "node_id": "MDQ6VXNlcjM5MjQyNDY4", "avatar_url": "https://avatars.githubusercontent.com/u/39242468?v=4", "gravatar_id": "", "url": "https://api.github.com/users/chlorane", "html_url": "https://github.com/chlorane", "followers_url": "https://api.github.com/users/chlorane/followers", "following_url": "https://api.github.com/users/chlorane/following{/other_user}", "gists_url": "https://api.github.com/users/chlorane/gists{/gist_id}", "starred_url": "https://api.github.com/users/chlorane/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/chlorane/subscriptions", "organizations_url": "https://api.github.com/users/chlorane/orgs", "repos_url": "https://api.github.com/users/chlorane/repos", "events_url": "https://api.github.com/users/chlorane/events{/privacy}", "received_events_url": "https://api.github.com/users/chlorane/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 777173273, "node_id": "MDU6TGFiZWw3NzcxNzMyNzM=", "url": "https://api.github.com/repos/espnet/espnet/labels/Bug", "name": "Bug", "color": "ee0701", "default": false, "description": "bug should be fixed"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2023-01-13T01:16:54Z", "updated_at": "2023-02-01T00:41:43Z", "closed_at": "2023-02-01T00:41:43Z", "author_association": "NONE", "active_lock_reason": null, "body": "I tried to use how2 recipe from egs2/how2/asr1. However, when I execute run.sh, an error happened\r\nlocal/data.sh: error executing wget http://islpc21.is.cs.cmu.edu/ramons/iwslt2019.tar.gz\r\nIt seems the link here is unavailable.\r\n\r\nAlso, I tried to run the new how2-2000h recipe from egs2/how2_2000h/asr1. However, error still happens.\r\n2023-01-13T10:15:50 (data.sh:50:main) stage 1: Data preparation and verification\r\nutils/fix_data_dir.sh: file data/tr_2000h_utt/feats.scp is not in sorted order or not unique, sorting it\r\nutils/fix_data_dir.sh: filtered data/tr_2000h_utt/segments from 950026 to 0 lines based on filter /tmp/kaldi.T4ZL/recordings.\r\nutils/fix_data_dir.sh: filtered data/tr_2000h_utt/wav.scp from 950026 to 0 lines based on filter /tmp/kaldi.T4ZL/recordings.\r\nfix_data_dir.sh: no utterances remained: not proceeding further.\r\n\r\nHow could I solve them?", "reactions": {"url": "https://api.github.com/repos/espnet/espnet/issues/4866/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/espnet/espnet/issues/4866/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/espnet/espnet/issues/4839", "repository_url": "https://api.github.com/repos/espnet/espnet", "labels_url": "https://api.github.com/repos/espnet/espnet/issues/4839/labels{/name}", "comments_url": "https://api.github.com/repos/espnet/espnet/issues/4839/comments", "events_url": "https://api.github.com/repos/espnet/espnet/issues/4839/events", "html_url": "https://github.com/espnet/espnet/issues/4839", "id": 1512360238, "node_id": "I_kwDOBsxW2c5aJMku", "number": 4839, "title": "\"nlsyms_txt doesn't exist\" in Stage 13: scoring", "user": {"login": "pyf98", "id": 29177009, "node_id": "MDQ6VXNlcjI5MTc3MDA5", "avatar_url": "https://avatars.githubusercontent.com/u/29177009?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pyf98", "html_url": "https://github.com/pyf98", "followers_url": "https://api.github.com/users/pyf98/followers", "following_url": "https://api.github.com/users/pyf98/following{/other_user}", "gists_url": "https://api.github.com/users/pyf98/gists{/gist_id}", "starred_url": "https://api.github.com/users/pyf98/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pyf98/subscriptions", "organizations_url": "https://api.github.com/users/pyf98/orgs", "repos_url": "https://api.github.com/users/pyf98/repos", "events_url": "https://api.github.com/users/pyf98/events{/privacy}", "received_events_url": "https://api.github.com/users/pyf98/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 777173273, "node_id": "MDU6TGFiZWw3NzcxNzMyNzM=", "url": "https://api.github.com/repos/espnet/espnet/labels/Bug", "name": "Bug", "color": "ee0701", "default": false, "description": "bug should be fixed"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2022-12-28T03:29:20Z", "updated_at": "2022-12-28T22:54:40Z", "closed_at": "2022-12-28T22:54:39Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "**Describe the bug**\r\n\r\nWhen executing scoring for WSJ in ESPnet2 ASR, I am warned that \"data/nlsyms.txt\" doesn't exist: [code](https://github.com/espnet/espnet/blob/master/espnet2/text/word_tokenizer.py#L34). As a result, the special symbols such as `<NOISE>` are not removed for calculating error rates. However, the following argument is passed to `asr.sh`:\r\n\r\n```bash\r\n./asr.sh \\\r\n    ...\r\n    --nlsyms_txt data/nlsyms.txt \\\r\n```\r\n\r\nThe issue comes from [this line](https://github.com/espnet/espnet/blob/master/egs2/TEMPLATE/asr1/asr.sh#L1413):\r\n```bash\r\n_opts+=\"--non_linguistic_symbols \\\"${nlsyms_txt}\\\" \"\r\n```\r\nAfter changing it to `_opts+=\"--non_linguistic_symbols ${nlsyms_txt} \"`, the issue seems to be fixed.\r\n", "reactions": {"url": "https://api.github.com/repos/espnet/espnet/issues/4839/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/espnet/espnet/issues/4839/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/espnet/espnet/issues/4809", "repository_url": "https://api.github.com/repos/espnet/espnet", "labels_url": "https://api.github.com/repos/espnet/espnet/issues/4809/labels{/name}", "comments_url": "https://api.github.com/repos/espnet/espnet/issues/4809/comments", "events_url": "https://api.github.com/repos/espnet/espnet/issues/4809/events", "html_url": "https://github.com/espnet/espnet/issues/4809", "id": 1479581082, "node_id": "I_kwDOBsxW2c5YMJ2a", "number": 4809, "title": "Running the espnet2 example reports an error", "user": {"login": "wugu123", "id": 90166097, "node_id": "MDQ6VXNlcjkwMTY2MDk3", "avatar_url": "https://avatars.githubusercontent.com/u/90166097?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wugu123", "html_url": "https://github.com/wugu123", "followers_url": "https://api.github.com/users/wugu123/followers", "following_url": "https://api.github.com/users/wugu123/following{/other_user}", "gists_url": "https://api.github.com/users/wugu123/gists{/gist_id}", "starred_url": "https://api.github.com/users/wugu123/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wugu123/subscriptions", "organizations_url": "https://api.github.com/users/wugu123/orgs", "repos_url": "https://api.github.com/users/wugu123/repos", "events_url": "https://api.github.com/users/wugu123/events{/privacy}", "received_events_url": "https://api.github.com/users/wugu123/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 777173273, "node_id": "MDU6TGFiZWw3NzcxNzMyNzM=", "url": "https://api.github.com/repos/espnet/espnet/labels/Bug", "name": "Bug", "color": "ee0701", "default": false, "description": "bug should be fixed"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2022-12-06T16:41:42Z", "updated_at": "2022-12-06T16:43:30Z", "closed_at": "2022-12-06T16:43:30Z", "author_association": "NONE", "active_lock_reason": null, "body": ":~/Desktop/espnet/egs2/an4/asr1$ . path.sh \r\n(espnet) :~/Desktop/espnet/egs2/an4/asr1$ ./run.sh \r\n.....\r\n.....\r\ntrainer_interface.cc(685) LOG(INFO) Saving model: data/en_token_list/bpe_unigram30/bpe.model\r\ntrainer_interface.cc(697) LOG(INFO) Saving vocabs: data/en_token_list/bpe_unigram30/bpe.vocab\r\n2022-12-07T00:35:45 (asr.sh:809:main) Stage 6: LM collect stats: train_set=dump/raw/lm_train.txt, dev_set=dump/raw/train_dev/text\r\n2022-12-07T00:35:45 (asr.sh:841:main) Generate 'exp/lm_stats_en_bpe30/run.sh'. You can resume the process from stage 6 using this script\r\n2022-12-07T00:35:45 (asr.sh:845:main) LM collect-stats started... log: 'exp/lm_stats_en_bpe30/logdir/stats.*.log'\r\nrun.pl: 32 / 32 failed, log is in exp/lm_stats_en_bpe30/logdir/stats.*.log\r\n", "reactions": {"url": "https://api.github.com/repos/espnet/espnet/issues/4809/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/espnet/espnet/issues/4809/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/espnet/espnet/issues/4802", "repository_url": "https://api.github.com/repos/espnet/espnet", "labels_url": "https://api.github.com/repos/espnet/espnet/issues/4802/labels{/name}", "comments_url": "https://api.github.com/repos/espnet/espnet/issues/4802/comments", "events_url": "https://api.github.com/repos/espnet/espnet/issues/4802/events", "html_url": "https://github.com/espnet/espnet/issues/4802", "id": 1472664278, "node_id": "I_kwDOBsxW2c5XxxLW", "number": 4802, "title": "3card training speed is close to one card", "user": {"login": "lzl-mt", "id": 114667476, "node_id": "U_kgDOBtWv1A", "avatar_url": "https://avatars.githubusercontent.com/u/114667476?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lzl-mt", "html_url": "https://github.com/lzl-mt", "followers_url": "https://api.github.com/users/lzl-mt/followers", "following_url": "https://api.github.com/users/lzl-mt/following{/other_user}", "gists_url": "https://api.github.com/users/lzl-mt/gists{/gist_id}", "starred_url": "https://api.github.com/users/lzl-mt/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lzl-mt/subscriptions", "organizations_url": "https://api.github.com/users/lzl-mt/orgs", "repos_url": "https://api.github.com/users/lzl-mt/repos", "events_url": "https://api.github.com/users/lzl-mt/events{/privacy}", "received_events_url": "https://api.github.com/users/lzl-mt/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 777173273, "node_id": "MDU6TGFiZWw3NzcxNzMyNzM=", "url": "https://api.github.com/repos/espnet/espnet/labels/Bug", "name": "Bug", "color": "ee0701", "default": false, "description": "bug should be fixed"}, {"id": 1885270144, "node_id": "MDU6TGFiZWwxODg1MjcwMTQ0", "url": "https://api.github.com/repos/espnet/espnet/labels/Multiple%20GPUs", "name": "Multiple GPUs", "color": "c2e0c6", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2022-12-02T10:43:46Z", "updated_at": "2022-12-02T12:23:32Z", "closed_at": "2022-12-02T12:23:31Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hey, \r\nI run the AIshell demo use [https://github.com/espnet/espnet/blob/master/egs2/aishell/asr1/run_streaming.sh](url)\r\nWhen i use single V100, the first epoch cost:\r\n`2022-12-02 10:16:49,542 (trainer:330) INFO: 1epoch results: [train] iter_time=2.763e-04, forward_time=0.133, loss_ctc=82.949, loss_att=68.302, acc=0.232, loss=72.696, backward_time=0.122, optim_step_time=0.073, optim0_lr0=9.193e-05, train_time=0.429, time=1 hour, 18 minutes and 52.65 seconds, total_count=11029, gpu_max_cached_mem_GB=14.514, [valid] loss_ctc=27.347, cer_ctc=0.440, loss_att=30.635, acc=0.587, cer=0.821, wer=0.984, loss=29.649, time=1 minute and 3.74 seconds, total_count=441, gpu_max_cached_mem_GB=14.514`\r\nWhile i use 3 V100 to speed up, i got:\r\n`:0/3] 2022-12-02 10:00:49,474 (trainer:330) INFO: 1epoch results: [train] iter_time=1.570e-04, forward_time=0.071, loss_ctc=83.667, loss_att=68.555, acc=0.230, loss=73.089, backward_time=0.096, optim_step_time=0.068, optim0_lr0=9.193e-05, train_time=0.323, time=59 minutes and 24.89 seconds, total_count=11029, gpu_max_cached_mem_GB=9.873, [valid] loss_ctc=27.844, cer_ctc=0.455, loss_att=31.161, acc=0.580, cer=0.695, wer=0.984, loss=30.166, time=1 minute and 3.24 seconds, total_count=441, gpu_max_cached_mem_GB=9.873`\r\nAnd i found when only use one card, bsz 64 will cost 15G/16G, however, when i use multi GPUs, the GPU memory usage is wired:\r\n<img width=\"693\" alt=\"image\" src=\"https://user-images.githubusercontent.com/114667476/205274985-770db9a8-2e89-4b55-8ba1-bee79326fa6c.png\">\r\nSo how can i speed up my training use multi cards, thanks a lot", "reactions": {"url": "https://api.github.com/repos/espnet/espnet/issues/4802/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/espnet/espnet/issues/4802/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/espnet/espnet/issues/4785", "repository_url": "https://api.github.com/repos/espnet/espnet", "labels_url": "https://api.github.com/repos/espnet/espnet/issues/4785/labels{/name}", "comments_url": "https://api.github.com/repos/espnet/espnet/issues/4785/comments", "events_url": "https://api.github.com/repos/espnet/espnet/issues/4785/events", "html_url": "https://github.com/espnet/espnet/issues/4785", "id": 1462627829, "node_id": "I_kwDOBsxW2c5XLe31", "number": 4785, "title": "setup_anaconda.sh cannot create venv directory", "user": {"login": "lunar333", "id": 103866630, "node_id": "U_kgDOBjDhBg", "avatar_url": "https://avatars.githubusercontent.com/u/103866630?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lunar333", "html_url": "https://github.com/lunar333", "followers_url": "https://api.github.com/users/lunar333/followers", "following_url": "https://api.github.com/users/lunar333/following{/other_user}", "gists_url": "https://api.github.com/users/lunar333/gists{/gist_id}", "starred_url": "https://api.github.com/users/lunar333/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lunar333/subscriptions", "organizations_url": "https://api.github.com/users/lunar333/orgs", "repos_url": "https://api.github.com/users/lunar333/repos", "events_url": "https://api.github.com/users/lunar333/events{/privacy}", "received_events_url": "https://api.github.com/users/lunar333/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 777173273, "node_id": "MDU6TGFiZWw3NzcxNzMyNzM=", "url": "https://api.github.com/repos/espnet/espnet/labels/Bug", "name": "Bug", "color": "ee0701", "default": false, "description": "bug should be fixed"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2022-11-24T01:28:29Z", "updated_at": "2022-11-24T07:25:17Z", "closed_at": "2022-11-24T07:25:17Z", "author_association": "NONE", "active_lock_reason": null, "body": "I just use the commond ./setup_anaconda.sh /data/softwares/anaconda3/ espnet 3.7, and it just create activate_python.sh , but did not create venv directory", "reactions": {"url": "https://api.github.com/repos/espnet/espnet/issues/4785/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/espnet/espnet/issues/4785/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/espnet/espnet/issues/4780", "repository_url": "https://api.github.com/repos/espnet/espnet", "labels_url": "https://api.github.com/repos/espnet/espnet/issues/4780/labels{/name}", "comments_url": "https://api.github.com/repos/espnet/espnet/issues/4780/comments", "events_url": "https://api.github.com/repos/espnet/espnet/issues/4780/events", "html_url": "https://github.com/espnet/espnet/issues/4780", "id": 1460917982, "node_id": "I_kwDOBsxW2c5XE9be", "number": 4780, "title": "Hit OOM when training seame recipe (stage 11).", "user": {"login": "XIUWEN-ZHENG", "id": 96778918, "node_id": "U_kgDOBcS6pg", "avatar_url": "https://avatars.githubusercontent.com/u/96778918?v=4", "gravatar_id": "", "url": "https://api.github.com/users/XIUWEN-ZHENG", "html_url": "https://github.com/XIUWEN-ZHENG", "followers_url": "https://api.github.com/users/XIUWEN-ZHENG/followers", "following_url": "https://api.github.com/users/XIUWEN-ZHENG/following{/other_user}", "gists_url": "https://api.github.com/users/XIUWEN-ZHENG/gists{/gist_id}", "starred_url": "https://api.github.com/users/XIUWEN-ZHENG/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/XIUWEN-ZHENG/subscriptions", "organizations_url": "https://api.github.com/users/XIUWEN-ZHENG/orgs", "repos_url": "https://api.github.com/users/XIUWEN-ZHENG/repos", "events_url": "https://api.github.com/users/XIUWEN-ZHENG/events{/privacy}", "received_events_url": "https://api.github.com/users/XIUWEN-ZHENG/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 777173273, "node_id": "MDU6TGFiZWw3NzcxNzMyNzM=", "url": "https://api.github.com/repos/espnet/espnet/labels/Bug", "name": "Bug", "color": "ee0701", "default": false, "description": "bug should be fixed"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2022-11-23T03:18:43Z", "updated_at": "2022-11-23T04:08:31Z", "closed_at": "2022-11-23T04:08:31Z", "author_association": "NONE", "active_lock_reason": null, "body": "**Describe the bug**\r\nAfter modified batch_bins from 15000000 to 10000000 (and also tried 1000000) in train.yaml [which originally requires 2 GPUs with 32GB memory and 2 days for training], I tried to train seame recipe in egs2 using GPU 2&3, but it continuously hits OOM error.\r\n\r\n> Here is my GPU info. \r\n<img width=\"476\" alt=\"1669173029053\" src=\"https://user-images.githubusercontent.com/96778918/203462323-871a60f1-d912-49cc-89bc-aa4bf330081f.png\">\r\n\r\n**Basic environments:**\r\n - OS information: Linux 4.15.0-192-generic #203-Ubuntu SMP Wed Aug 10 17:40:03 UTC 2022 x86_64\r\n - python version: 3.9.15 (main, Nov  4 2022, 16:13:54) [GCC 11.2.0]\r\n - espnet version: espnet 202209\r\n - pytorch version: pytorch 1.12.1+cu102\r\n\r\n\r\n**Environments from `torch.utils.collect_env`:**\r\n```\r\nCollecting environment information...\r\nPyTorch version: 1.12.1+cu102\r\nIs debug build: False\r\nCUDA used to build PyTorch: 10.2\r\nROCM used to build PyTorch: N/A\r\n\r\nOS: Ubuntu 18.04.4 LTS (x86_64)\r\nGCC version: (Ubuntu 7.5.0-3ubuntu1~18.04) 7.5.0\r\nClang version: Could not collect\r\nCMake version: version 3.10.2\r\nLibc version: glibc-2.27\r\n\r\nPython version: 3.9.15 (main, Nov  4 2022, 16:13:54)  [GCC 11.2.0] (64-bit runtime)\r\nPython platform: Linux-4.15.0-192-generic-x86_64-with-glibc2.27\r\nIs CUDA available: True\r\nCUDA runtime version: 10.2.89\r\nGPU models and configuration:\r\nGPU 0: GeForce GTX 1080 Ti\r\nGPU 1: GeForce GTX 1080 Ti\r\nGPU 2: GeForce GTX 1080 Ti\r\nGPU 3: GeForce GTX 1080 Ti\r\n\r\nNvidia driver version: 440.82\r\ncuDNN version: /usr/local/cuda-10.2/targets/x86_64-linux/lib/libcudnn.so.7\r\nHIP runtime version: N/A\r\nMIOpen runtime version: N/A\r\nIs XNNPACK available: True\r\n\r\nVersions of relevant libraries:\r\n[pip3] numpy==1.23.3\r\n[pip3] pytorch-ranger==0.1.1\r\n[pip3] pytorch-wpe==0.0.1\r\n[pip3] torch==1.12.1\r\n[pip3] torch-complex==0.4.3\r\n[pip3] torch-optimizer==0.3.0\r\n[pip3] torchaudio==0.12.1\r\n[pip3] torchvision==0.11.0\r\n[conda] blas                      1.0                         mkl\r\n[conda] cudatoolkit               10.2.89              hfd86e86_1\r\n[conda] ffmpeg                    4.3                  hf484d3e_0    pytorch\r\n[conda] mkl                       2021.4.0           h06a4308_640\r\n[conda] mkl-service               2.4.0            py39h7f8727e_0\r\n[conda] mkl_fft                   1.3.1            py39hd3c417c_0\r\n[conda] mkl_random                1.2.2            py39h51133e4_0\r\n[conda] numpy                     1.23.3           py39h14f4228_1\r\n[conda] numpy-base                1.23.3           py39h31eccc5_1\r\n[conda] pytorch-mutex             1.0                        cuda    pytorch\r\n[conda] pytorch-ranger            0.1.1                    pypi_0    pypi\r\n[conda] pytorch-wpe               0.0.1                    pypi_0    pypi\r\n[conda] torch                     1.12.1                   pypi_0    pypi\r\n[conda] torch-complex             0.4.3                    pypi_0    pypi\r\n[conda] torch-optimizer           0.3.0                    pypi_0    pypi\r\n[conda] torchaudio                0.12.1                   pypi_0    pypi\r\n[conda] torchvision               0.11.0               py39_cu102    pytorch\r\n```\r\n\r\n**Task information:**\r\n - Task: ASR\r\n - Recipe: Seame\r\n - ESPnet2\r\n\r\n**To Reproduce**\r\nSteps to reproduce the behavior:\r\n1. move to a recipe directory, `cd egs2/seame/asr1`\r\n2. execute `run.sh` with specific arguments, `run.sh --stage 11 --use_lm false`\r\n3. specify the error log, `exp/asr_train_asr_conformer_raw_bpe5633_sp/train.log`\r\n\r\n**Error logs**\r\n`RuntimeError: CUDA out of memory. Tried to allocate 86.00 MiB (GPU 0; 10.92 GiB total capacity; 9.82 GiB already allocated; 9.00 MiB free; 10.23 GiB reserved in total by PyTorch) If reserved memory is >> allocated memory try setting max_split_size_mb to avoid fragmentation.  See documentation for Memory Management and PYTORCH_CUDA_ALLOC_CONF`\r\n[train.log](https://github.com/espnet/espnet/files/10072573/train.log)\r\n", "reactions": {"url": "https://api.github.com/repos/espnet/espnet/issues/4780/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/espnet/espnet/issues/4780/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/espnet/espnet/issues/4779", "repository_url": "https://api.github.com/repos/espnet/espnet", "labels_url": "https://api.github.com/repos/espnet/espnet/issues/4779/labels{/name}", "comments_url": "https://api.github.com/repos/espnet/espnet/issues/4779/comments", "events_url": "https://api.github.com/repos/espnet/espnet/issues/4779/events", "html_url": "https://github.com/espnet/espnet/issues/4779", "id": 1460808108, "node_id": "I_kwDOBsxW2c5XEims", "number": 4779, "title": "AttributeError: 'Namespace' object has no attribute 'use_ddp'", "user": {"login": "lunar333", "id": 103866630, "node_id": "U_kgDOBjDhBg", "avatar_url": "https://avatars.githubusercontent.com/u/103866630?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lunar333", "html_url": "https://github.com/lunar333", "followers_url": "https://api.github.com/users/lunar333/followers", "following_url": "https://api.github.com/users/lunar333/following{/other_user}", "gists_url": "https://api.github.com/users/lunar333/gists{/gist_id}", "starred_url": "https://api.github.com/users/lunar333/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lunar333/subscriptions", "organizations_url": "https://api.github.com/users/lunar333/orgs", "repos_url": "https://api.github.com/users/lunar333/repos", "events_url": "https://api.github.com/users/lunar333/events{/privacy}", "received_events_url": "https://api.github.com/users/lunar333/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 777173273, "node_id": "MDU6TGFiZWw3NzcxNzMyNzM=", "url": "https://api.github.com/repos/espnet/espnet/labels/Bug", "name": "Bug", "color": "ee0701", "default": false, "description": "bug should be fixed"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2022-11-23T01:54:27Z", "updated_at": "2022-11-24T07:21:19Z", "closed_at": "2022-11-24T07:21:19Z", "author_association": "NONE", "active_lock_reason": null, "body": "when I use asr_trian.py to train a model, it has a error as followed \r\n~\r\n~\r\n\"exp/train_raw_nodev_25ms_pytorch_train/train.log\" 17L, 1295C                                                                        6,1           All\r\n# asr_train.py --config conf/train.yaml --ngpu 1 --backend pytorch --outdir exp/train_raw_nodev_25ms_pytorch_train/results --tensorboard-dir tensorboard/train_raw_nodev_25ms_pytorch_train --debugmode 1 --dict data/lang_1char/train_nodev_units.txt --debugdir exp/train_raw_nodev_25ms_pytorch_train --minibatches 0 --verbose 1 --resume --train-json dump_raw_25ms/train_raw_nodev_25ms/data.json --valid-json dump_raw_25ms/train_raw_dev_25ms/data.json\r\n# Started at Wed Nov 23 01:43:45 UTC 2022\r\n#\r\n2022-11-23 01:43:48,198 (asr_train:316) INFO: ngpu: 1\r\n2022-11-23 01:43:48,198 (asr_train:319) INFO: python path = (None)\r\n2022-11-23 01:43:48,198 (asr_train:322) INFO: random seed = 1\r\n2022-11-23 01:43:48,198 (asr_train:339) INFO: backend = pytorch\r\nTraceback (most recent call last):\r\n  File \"/disk2/zhh/E2E-SincNet-master/espnet/bin/asr_train.py\", line 366, in <module>\r\n    main(sys.argv[1:])\r\n  File \"/disk2/zhh/E2E-SincNet-master/espnet/bin/asr_train.py\", line 347, in main\r\n    train(args)\r\n  File \"/disk2/zhh/miniconda3/envs/pytorch/lib/python3.7/site-packages/espnet/asr/pytorch_backend/asr.py\", line 465, in train\r\n    if args.use_ddp:\r\nAttributeError: 'Namespace' object has no attribute 'use_ddp'\r\n# Accounting: time=3 threads=1\r\n# Ended (code 1) at Wed Nov 23 01:43:48 UTC 2022, elapsed time 3 seconds", "reactions": {"url": "https://api.github.com/repos/espnet/espnet/issues/4779/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/espnet/espnet/issues/4779/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/espnet/espnet/issues/4776", "repository_url": "https://api.github.com/repos/espnet/espnet", "labels_url": "https://api.github.com/repos/espnet/espnet/issues/4776/labels{/name}", "comments_url": "https://api.github.com/repos/espnet/espnet/issues/4776/comments", "events_url": "https://api.github.com/repos/espnet/espnet/issues/4776/events", "html_url": "https://github.com/espnet/espnet/issues/4776", "id": 1459025033, "node_id": "I_kwDOBsxW2c5W9vSJ", "number": 4776, "title": "egs2/seame/asr1/run.sh fails at Stage 3", "user": {"login": "shcxlee", "id": 113081290, "node_id": "U_kgDOBr17yg", "avatar_url": "https://avatars.githubusercontent.com/u/113081290?v=4", "gravatar_id": "", "url": "https://api.github.com/users/shcxlee", "html_url": "https://github.com/shcxlee", "followers_url": "https://api.github.com/users/shcxlee/followers", "following_url": "https://api.github.com/users/shcxlee/following{/other_user}", "gists_url": "https://api.github.com/users/shcxlee/gists{/gist_id}", "starred_url": "https://api.github.com/users/shcxlee/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/shcxlee/subscriptions", "organizations_url": "https://api.github.com/users/shcxlee/orgs", "repos_url": "https://api.github.com/users/shcxlee/repos", "events_url": "https://api.github.com/users/shcxlee/events{/privacy}", "received_events_url": "https://api.github.com/users/shcxlee/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 777173273, "node_id": "MDU6TGFiZWw3NzcxNzMyNzM=", "url": "https://api.github.com/repos/espnet/espnet/labels/Bug", "name": "Bug", "color": "ee0701", "default": false, "description": "bug should be fixed"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2022-11-22T04:14:17Z", "updated_at": "2022-11-22T05:34:33Z", "closed_at": "2022-11-22T05:34:32Z", "author_association": "NONE", "active_lock_reason": null, "body": "**Describe the bug**\r\nI am trying to train ASR model using the existing SEAME recipe, but `run.sh` fails at `Stage 3`\r\n```bash\r\n2022-11-21T21:55:50 (asr.sh:474:main) Stage 3: Format wav.scp: data/ -> dump/raw\r\nutils/copy_data_dir.sh: copied data from data/train_sp to dump/raw/org/train_sp\r\nutils/validate_data_dir.sh: Successfully validated data-directory dump/raw/org/train_sp\r\n2022-11-21T21:55:59 (format_wav_scp.sh:42:main) scripts/audio/format_wav_scp.sh --nj 32 --cmd run.pl --audio-format flac --fs 16k --segments data/train_sp/segments data/train_sp/wav.scp dump/raw/org/train_sp\r\n2022-11-21T21:55:59 (format_wav_scp.sh:90:main) [info]: using data/train_sp/segments\r\nrun.pl: 32 / 32 failed, log is in dump/raw/org/train_sp/logs/format_wav_scp.*.log\r\n```\r\n\r\n**Basic environments:**\r\n - OS information: Linux 4.15.0-192-generic #203-Ubuntu SMP\r\n - python version: `3.9.15 (main, Nov  4 2022, 16:13:54)  [GCC 11.2.0]`\r\n - espnet version: `espnet 202209`\r\n - Git hash: 209ffa0aea77757b9ee6882f06edfbba3aa261ee\r\n   - Commit date: Fri Nov 11 10:24:24 2022 -0500\r\n - pytorch version: `pytorch 1.12.1+cu102`\r\n \r\n\r\n**Environments from `torch.utils.collect_env`:**\r\n```\r\nCollecting environment information...\r\nPyTorch version: 1.12.1+cu102\r\nIs debug build: False\r\nCUDA used to build PyTorch: 10.2\r\nROCM used to build PyTorch: N/A\r\n\r\nOS: Ubuntu 18.04.4 LTS (x86_64)\r\nGCC version: (Ubuntu 7.5.0-3ubuntu1~18.04) 7.5.0\r\nClang version: Could not collect\r\nCMake version: version 3.10.2\r\nLibc version: glibc-2.27\r\n\r\nPython version: 3.9.15 (main, Nov  4 2022, 16:13:54)  [GCC 11.2.0] (64-bit runtime)\r\nPython platform: Linux-4.15.0-192-generic-x86_64-with-glibc2.27\r\nIs CUDA available: True\r\nCUDA runtime version: 10.2.89\r\nGPU models and configuration:\r\nGPU 0: GeForce GTX 1080 Ti\r\nGPU 1: GeForce GTX 1080 Ti\r\nGPU 2: GeForce GTX 1080 Ti\r\nGPU 3: GeForce GTX 1080 Ti\r\n\r\nNvidia driver version: 440.82\r\ncuDNN version: /usr/local/cuda-10.2/targets/x86_64-linux/lib/libcudnn.so.7\r\nHIP runtime version: N/A\r\nMIOpen runtime version: N/A\r\nIs XNNPACK available: True\r\n\r\nVersions of relevant libraries:\r\n[pip3] numpy==1.23.3\r\n[pip3] pytorch-ranger==0.1.1\r\n[pip3] pytorch-wpe==0.0.1\r\n[pip3] torch==1.12.1\r\n[pip3] torch-complex==0.4.3\r\n[pip3] torch-optimizer==0.3.0\r\n[pip3] torchaudio==0.12.1\r\n[pip3] torchvision==0.11.0\r\n[conda] blas                      1.0                         mkl\r\n[conda] cudatoolkit               10.2.89              hfd86e86_1\r\n[conda] ffmpeg                    4.3                  hf484d3e_0    pytorch\r\n[conda] mkl                       2021.4.0           h06a4308_640\r\n[conda] mkl-service               2.4.0            py39h7f8727e_0\r\n[conda] mkl_fft                   1.3.1            py39hd3c417c_0\r\n[conda] mkl_random                1.2.2            py39h51133e4_0\r\n[conda] numpy                     1.23.3           py39h14f4228_1\r\n[conda] numpy-base                1.23.3           py39h31eccc5_1\r\n[conda] pytorch-mutex             1.0                        cuda    pytorch\r\n[conda] pytorch-ranger            0.1.1                    pypi_0    pypi\r\n[conda] pytorch-wpe               0.0.1                    pypi_0    pypi\r\n[conda] torch                     1.12.1                   pypi_0    pypi\r\n[conda] torch-complex             0.4.3                    pypi_0    pypi\r\n[conda] torch-optimizer           0.3.0                    pypi_0    pypi\r\n[conda] torchaudio                0.12.1                   pypi_0    pypi\r\n[conda] torchvision               0.11.0               py39_cu102    pytorch\r\n```\r\nYou can obtain them by the following command\r\n\r\n```\r\ncd <espnet-root>/tools\r\n. ./activate_python.sh\r\npython3 -m torch.utils.collect_env\r\n```\r\n\r\n**Task information:**\r\n - Task: ASR\r\n - Recipe: SEAME\r\n - ESPnet2\r\n\r\n**To Reproduce**\r\nSteps to reproduce the behavior:\r\n1. move to a recipe directory: `cd egs2/seame/asr1`\r\n2. execute `asr.sh` with specific arguments, e.g., `run.sh --stage 3 --ngp 2`\r\n3. error log: `/dump/raw/org/train/logs/format_wav_scp.1.log`\r\n\r\n**Error logs**\r\n```bash\r\n# pyscripts/audio/format_wav_scp.py --fs 16k --audio-format flac --segment=dump/raw/org/train/logs/segments.1 data/train/wav.scp dump/raw/org/train/data/format.1\r\n# Started at Mon Nov 21 21:26:58 CST 2022\r\n#\r\n2022-11-21 21:26:59,845 (format_wav_scp:43) INFO: /env/esp/bin/python3 pyscripts/audio/format_wav_scp.py --fs 16k --audio-format flac --segment=dump/raw/org/train/logs/segments.1 data/train/wav.scp dump/raw/org/train/data/format.1\r\n0it [00:00, ?it/s]/bin/sh: 1: flac: not found\r\n/env/esp/lib/python3.9/site-packages/kaldiio/utils.py:482: UserWarning: An error happens at loading \"flac -c -d -s /espnet/egs2/seame/asr1/data/seame/data/conversation/audio/01NC01FBX_0101.flac |\"\r\n  warnings.warn('An error happens at loading \"{}\"'.format(ark_name))\r\n0it [00:00, ?it/s]\r\nTraceback (most recent call last):\r\n  File \"/espnet/egs2/seame/asr1/pyscripts/audio/format_wav_scp.py\", line 243, in <module>\r\n    main()\r\n  File \"/espnet/egs2/seame/asr1/pyscripts/audio/format_wav_scp.py\", line 102, in main\r\n    for uttid, (rate, wave) in tqdm(loader):\r\n  File \"/env/esp/lib/python3.9/site-packages/tqdm/std.py\", line 1195, in __iter__\r\n    for obj in iterable:\r\n  File \"/env/esp/lib/python3.9/site-packages/kaldiio/matio.py\", line 138, in load_scp_sequential\r\n    for data in SegmentsExtractor(\r\n  File \"/env/esp/lib/python3.9/site-packages/kaldiio/matio.py\", line 187, in generator\r\n    cached[recodeid] = self.wav_loader[recodeid]\r\n  File \"/env/esp/lib/python3.9/site-packages/kaldiio/utils.py\", line 480, in __getitem__\r\n    return self._loader(ark_name)\r\n  File \"/env/esp/lib/python3.9/site-packages/kaldiio/matio.py\", line 241, in load_mat\r\n    return _load_mat(fd, offset, slices, endian=endian)\r\n  File \"/env/esp/lib/python3.9/site-packages/kaldiio/matio.py\", line 331, in _load_mat\r\n    array = read_kaldi(fd, endian)\r\n  File \"/env/esp/lib/python3.9/site-packages/kaldiio/matio.py\", line 441, in read_kaldi\r\n    array = read_ascii_mat(fd)\r\n  File \"/env/esp/lib/python3.9/site-packages/kaldiio/matio.py\", line 605, in read_ascii_mat\r\n    assert len(string) != 0\r\nAssertionError\r\n# Accounting: time=2 threads=1\r\n# Ended (code 1) at Mon Nov 21 21:27:00 CST 2022, elapsed time 2 seconds\r\n```\r\n", "reactions": {"url": "https://api.github.com/repos/espnet/espnet/issues/4776/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/espnet/espnet/issues/4776/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/espnet/espnet/issues/4768", "repository_url": "https://api.github.com/repos/espnet/espnet", "labels_url": "https://api.github.com/repos/espnet/espnet/issues/4768/labels{/name}", "comments_url": "https://api.github.com/repos/espnet/espnet/issues/4768/comments", "events_url": "https://api.github.com/repos/espnet/espnet/issues/4768/events", "html_url": "https://github.com/espnet/espnet/issues/4768", "id": 1449227111, "node_id": "I_kwDOBsxW2c5WYXNn", "number": 4768, "title": "wav2vec2 encoder does not disable masking during inference", "user": {"login": "kehanlu", "id": 22369406, "node_id": "MDQ6VXNlcjIyMzY5NDA2", "avatar_url": "https://avatars.githubusercontent.com/u/22369406?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kehanlu", "html_url": "https://github.com/kehanlu", "followers_url": "https://api.github.com/users/kehanlu/followers", "following_url": "https://api.github.com/users/kehanlu/following{/other_user}", "gists_url": "https://api.github.com/users/kehanlu/gists{/gist_id}", "starred_url": "https://api.github.com/users/kehanlu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kehanlu/subscriptions", "organizations_url": "https://api.github.com/users/kehanlu/orgs", "repos_url": "https://api.github.com/users/kehanlu/repos", "events_url": "https://api.github.com/users/kehanlu/events{/privacy}", "received_events_url": "https://api.github.com/users/kehanlu/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 777173273, "node_id": "MDU6TGFiZWw3NzcxNzMyNzM=", "url": "https://api.github.com/repos/espnet/espnet/labels/Bug", "name": "Bug", "color": "ee0701", "default": false, "description": "bug should be fixed"}, {"id": 3317075130, "node_id": "MDU6TGFiZWwzMzE3MDc1MTMw", "url": "https://api.github.com/repos/espnet/espnet/labels/SSL", "name": "SSL", "color": "006b75", "default": false, "description": "self-supervised learning"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2022-11-15T06:11:59Z", "updated_at": "2023-01-31T19:04:16Z", "closed_at": "2023-01-31T19:04:16Z", "author_association": "NONE", "active_lock_reason": null, "body": "**Describe the bug**\r\nIn ESPNET2, wav2vec2 encoder calls fairseq `Wav2Vec2Model`. However, the `mask` parameter defaults to `True` in fairseq; this will result in always applying masking even during inference.\r\nhttps://github.com/espnet/espnet/blob/d0c12f994042b7bc621f6f996f4e6bf0200232c3/espnet2/asr/encoder/wav2vec2_encoder.py#L123-L127\r\n\r\n`fairseq/fairseq/models/wav2vec/wav2vec2.py`\r\nhttps://github.com/facebookresearch/fairseq/blob/313ff0581561c7725ea9430321d6af2901573dfb/fairseq/models/wav2vec/wav2vec2.py#L515-L525\r\n```python\r\ndef forward(\r\n        self,\r\n        source,\r\n        padding_mask=None,\r\n        mask=True,\r\n        features_only=False,\r\n        layer=None,\r\n        mask_indices=None,\r\n        mask_channel_indices=None,\r\n        padding_count=None,\r\n    ):\r\n```\r\nhttps://github.com/facebookresearch/fairseq/blob/313ff05815/fairseq/models/wav2vec/wav2vec2.py#L582-L600\r\n```python\r\n        if mask:\r\n            x, mask_indices = self.apply_mask(\r\n                features,\r\n                padding_mask,\r\n                mask_indices=mask_indices,\r\n                mask_channel_indices=mask_channel_indices,\r\n            )\r\n            if not is_xla_tensor(x) and mask_indices is not None:\r\n                # tpu-comment: reducing the size in a dynamic way causes\r\n                # too many recompilations on xla.\r\n                y = unmasked_features[mask_indices].view(\r\n                    unmasked_features.size(0), -1, unmasked_features.size(-1)\r\n                )\r\n            else:\r\n                y = unmasked_features\r\n        else:\r\n            x = features\r\n            y = unmasked_features\r\n            mask_indices = None\r\n```\r\n\r\nTo fixed the bug, just pass `mask` to the forward call:\r\n```python\r\n enc_outputs = self.encoders( \r\n     xs_pad, \r\n     masks, \r\n     mask=self.training, \r\n     features_only=True, \r\n ) \r\n```\r\n\r\nSee also `fairseq/fairseq/models/wav2vec/wav2vec2_asr.py` : https://github.com/facebookresearch/fairseq/blob/313ff0581561c7725ea9430321d6af2901573dfb/fairseq/models/wav2vec/wav2vec2_asr.py#L389-L406\r\n", "reactions": {"url": "https://api.github.com/repos/espnet/espnet/issues/4768/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/espnet/espnet/issues/4768/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/espnet/espnet/issues/4767", "repository_url": "https://api.github.com/repos/espnet/espnet", "labels_url": "https://api.github.com/repos/espnet/espnet/issues/4767/labels{/name}", "comments_url": "https://api.github.com/repos/espnet/espnet/issues/4767/comments", "events_url": "https://api.github.com/repos/espnet/espnet/issues/4767/events", "html_url": "https://github.com/espnet/espnet/issues/4767", "id": 1449139766, "node_id": "I_kwDOBsxW2c5WYB42", "number": 4767, "title": "How2 dataset downloading link unavailable", "user": {"login": "chlorane", "id": 39242468, "node_id": "MDQ6VXNlcjM5MjQyNDY4", "avatar_url": "https://avatars.githubusercontent.com/u/39242468?v=4", "gravatar_id": "", "url": "https://api.github.com/users/chlorane", "html_url": "https://github.com/chlorane", "followers_url": "https://api.github.com/users/chlorane/followers", "following_url": "https://api.github.com/users/chlorane/following{/other_user}", "gists_url": "https://api.github.com/users/chlorane/gists{/gist_id}", "starred_url": "https://api.github.com/users/chlorane/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/chlorane/subscriptions", "organizations_url": "https://api.github.com/users/chlorane/orgs", "repos_url": "https://api.github.com/users/chlorane/repos", "events_url": "https://api.github.com/users/chlorane/events{/privacy}", "received_events_url": "https://api.github.com/users/chlorane/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 777173273, "node_id": "MDU6TGFiZWw3NzcxNzMyNzM=", "url": "https://api.github.com/repos/espnet/espnet/labels/Bug", "name": "Bug", "color": "ee0701", "default": false, "description": "bug should be fixed"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2022-11-15T04:17:22Z", "updated_at": "2023-01-31T19:03:51Z", "closed_at": "2023-01-31T19:03:51Z", "author_association": "NONE", "active_lock_reason": null, "body": "**Describe the bug**\r\nA clear and concise description of what the bug is.\r\nI'm using your example program in eg2/how2_2000h, but when I run local/run_asr.sh --asr_tag asr_pretrain, the command line shows that the link to the dataset is corrupted. \r\n\r\nAccess denied with the following error:\r\n\r\n        Cannot retrieve the public link of the file. You may need to change\r\n        the permission to 'Anyone with the link', or have had many accesses.\r\n\r\nYou may still be able to access the file from the browser:\r\n\r\n         https://drive.google.com/uc?id=sharing\r\n\r\nCan you provide a new link?", "reactions": {"url": "https://api.github.com/repos/espnet/espnet/issues/4767/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/espnet/espnet/issues/4767/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/espnet/espnet/issues/4743", "repository_url": "https://api.github.com/repos/espnet/espnet", "labels_url": "https://api.github.com/repos/espnet/espnet/issues/4743/labels{/name}", "comments_url": "https://api.github.com/repos/espnet/espnet/issues/4743/comments", "events_url": "https://api.github.com/repos/espnet/espnet/issues/4743/events", "html_url": "https://github.com/espnet/espnet/issues/4743", "id": 1429289429, "node_id": "I_kwDOBsxW2c5VMTnV", "number": 4743, "title": "Get errors when trying to inference on JETS with GST", "user": {"login": "oohara1202", "id": 82015395, "node_id": "MDQ6VXNlcjgyMDE1Mzk1", "avatar_url": "https://avatars.githubusercontent.com/u/82015395?v=4", "gravatar_id": "", "url": "https://api.github.com/users/oohara1202", "html_url": "https://github.com/oohara1202", "followers_url": "https://api.github.com/users/oohara1202/followers", "following_url": "https://api.github.com/users/oohara1202/following{/other_user}", "gists_url": "https://api.github.com/users/oohara1202/gists{/gist_id}", "starred_url": "https://api.github.com/users/oohara1202/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/oohara1202/subscriptions", "organizations_url": "https://api.github.com/users/oohara1202/orgs", "repos_url": "https://api.github.com/users/oohara1202/repos", "events_url": "https://api.github.com/users/oohara1202/events{/privacy}", "received_events_url": "https://api.github.com/users/oohara1202/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 777173273, "node_id": "MDU6TGFiZWw3NzcxNzMyNzM=", "url": "https://api.github.com/repos/espnet/espnet/labels/Bug", "name": "Bug", "color": "ee0701", "default": false, "description": "bug should be fixed"}, {"id": 1680978630, "node_id": "MDU6TGFiZWwxNjgwOTc4NjMw", "url": "https://api.github.com/repos/espnet/espnet/labels/TTS", "name": "TTS", "color": "fbca04", "default": false, "description": "Text-to-speech"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2022-10-31T05:44:16Z", "updated_at": "2022-11-01T00:18:40Z", "closed_at": "2022-10-31T11:29:49Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi!\r\nI found GST parameters in `espnet2/gan_tts/jets/jets.py`, so I trained JETS with GST on JSUT.\r\n\r\ntrain_config:\r\n```\r\n# This configuration is for ESPnet2 to train JETS, which\r\n# is truely end-to-end text-to-waveform model. To run\r\n# this config, you need to specify \"--tts_task gan_tts\"\r\n# option for tts.sh at least and use 24000 hz audio as\r\n# the training data (mainly tested on LJspeech).\r\n# This configuration tested on 4 GPUs (V100) with 32GB GPU\r\n# memory. It takes around 2 weeks to finish the training\r\n# but 100k iters model should generate reasonable results.\r\n\r\n##########################################################\r\n#                  TTS MODEL SETTING                     #\r\n##########################################################\r\ntts: jets\r\ntts_conf:\r\n    # generator related\r\n    generator_type: jets_generator\r\n    generator_params:\r\n        adim: 256                                    # attention dimension\r\n        aheads: 2                                    # number of attention heads\r\n        elayers: 4                                   # number of encoder layers\r\n        eunits: 1024                                 # number of encoder ff units\r\n        dlayers: 4                                   # number of decoder layers\r\n        dunits: 1024                                 # number of decoder ff units\r\n        positionwise_layer_type: conv1d              # type of position-wise layer\r\n        positionwise_conv_kernel_size: 3             # kernel size of position wise conv layer\r\n        duration_predictor_layers: 2                 # number of layers of duration predictor\r\n        duration_predictor_chans: 256                # number of channels of duration predictor\r\n        duration_predictor_kernel_size: 3            # filter size of duration predictor\r\n        use_masking: True                            # whether to apply masking for padded part in loss calculation\r\n        encoder_normalize_before: True               # whether to perform layer normalization before the input\r\n        decoder_normalize_before: True               # whether to perform layer normalization before the input\r\n        encoder_type: transformer                    # encoder type\r\n        decoder_type: transformer                    # decoder type\r\n        conformer_rel_pos_type: latest               # relative positional encoding type\r\n        conformer_pos_enc_layer_type: rel_pos        # conformer positional encoding type\r\n        conformer_self_attn_layer_type: rel_selfattn # conformer self-attention type\r\n        conformer_activation_type: swish             # conformer activation type\r\n        use_macaron_style_in_conformer: true         # whether to use macaron style in conformer\r\n        use_cnn_in_conformer: true                   # whether to use CNN in conformer\r\n        conformer_enc_kernel_size: 7                 # kernel size in CNN module of conformer-based encoder\r\n        conformer_dec_kernel_size: 31                # kernel size in CNN module of conformer-based decoder\r\n        init_type: xavier_uniform                    # initialization type\r\n        transformer_enc_dropout_rate: 0.2            # dropout rate for transformer encoder layer\r\n        transformer_enc_positional_dropout_rate: 0.2 # dropout rate for transformer encoder positional encoding\r\n        transformer_enc_attn_dropout_rate: 0.2       # dropout rate for transformer encoder attention layer\r\n        transformer_dec_dropout_rate: 0.2            # dropout rate for transformer decoder layer\r\n        transformer_dec_positional_dropout_rate: 0.2 # dropout rate for transformer decoder positional encoding\r\n        transformer_dec_attn_dropout_rate: 0.2       # dropout rate for transformer decoder attention layer\r\n        pitch_predictor_layers: 5                    # number of conv layers in pitch predictor\r\n        pitch_predictor_chans: 256                   # number of channels of conv layers in pitch predictor\r\n        pitch_predictor_kernel_size: 5               # kernel size of conv leyers in pitch predictor\r\n        pitch_predictor_dropout: 0.5                 # dropout rate in pitch predictor\r\n        pitch_embed_kernel_size: 1                   # kernel size of conv embedding layer for pitch\r\n        pitch_embed_dropout: 0.0                     # dropout rate after conv embedding layer for pitch\r\n        stop_gradient_from_pitch_predictor: true     # whether to stop the gradient from pitch predictor to encoder\r\n        energy_predictor_layers: 2                   # number of conv layers in energy predictor\r\n        energy_predictor_chans: 256                  # number of channels of conv layers in energy predictor\r\n        energy_predictor_kernel_size: 3              # kernel size of conv leyers in energy predictor\r\n        energy_predictor_dropout: 0.5                # dropout rate in energy predictor\r\n        energy_embed_kernel_size: 1                  # kernel size of conv embedding layer for energy\r\n        energy_embed_dropout: 0.0                    # dropout rate after conv embedding layer for energy\r\n        stop_gradient_from_energy_predictor: false   # whether to stop the gradient from energy predictor to encoder\r\n        generator_out_channels: 1\r\n        generator_channels: 512\r\n        generator_global_channels: -1\r\n        generator_kernel_size: 7\r\n        generator_upsample_scales: [8, 8, 2, 2]\r\n        generator_upsample_kernel_sizes: [16, 16, 4, 4]\r\n        generator_resblock_kernel_sizes: [3, 7, 11]\r\n        generator_resblock_dilations: [[1, 3, 5], [1, 3, 5], [1, 3, 5]]\r\n        generator_use_additional_convs: true\r\n        generator_bias: true\r\n        generator_nonlinear_activation: \"LeakyReLU\"\r\n        generator_nonlinear_activation_params:\r\n            negative_slope: 0.1\r\n        generator_use_weight_norm: true\r\n        segment_size: 64                             # segment size for random windowed discriminator\r\n        use_gst: true\r\n        gst_tokens: 10\r\n        gst_heads: 4\r\n\r\n    # discriminator related\r\n    discriminator_type: hifigan_multi_scale_multi_period_discriminator\r\n    discriminator_params:\r\n        scales: 1\r\n        scale_downsample_pooling: \"AvgPool1d\"\r\n        scale_downsample_pooling_params:\r\n            kernel_size: 4\r\n            stride: 2\r\n            padding: 2\r\n        scale_discriminator_params:\r\n            in_channels: 1\r\n            out_channels: 1\r\n            kernel_sizes: [15, 41, 5, 3]\r\n            channels: 128\r\n            max_downsample_channels: 1024\r\n            max_groups: 16\r\n            bias: True\r\n            downsample_scales: [2, 2, 4, 4, 1]\r\n            nonlinear_activation: \"LeakyReLU\"\r\n            nonlinear_activation_params:\r\n                negative_slope: 0.1\r\n            use_weight_norm: True\r\n            use_spectral_norm: False\r\n        follow_official_norm: False\r\n        periods: [2, 3, 5, 7, 11]\r\n        period_discriminator_params:\r\n            in_channels: 1\r\n            out_channels: 1\r\n            kernel_sizes: [5, 3]\r\n            channels: 32\r\n            downsample_scales: [3, 3, 3, 3, 1]\r\n            max_downsample_channels: 1024\r\n            bias: True\r\n            nonlinear_activation: \"LeakyReLU\"\r\n            nonlinear_activation_params:\r\n                negative_slope: 0.1\r\n            use_weight_norm: True\r\n            use_spectral_norm: False\r\n\r\n    # loss function related\r\n    generator_adv_loss_params:\r\n        average_by_discriminators: false # whether to average loss value by #discriminators\r\n        loss_type: mse                   # loss type, \"mse\" or \"hinge\"\r\n    discriminator_adv_loss_params:\r\n        average_by_discriminators: false # whether to average loss value by #discriminators\r\n        loss_type: mse                   # loss type, \"mse\" or \"hinge\"\r\n    feat_match_loss_params:\r\n        average_by_discriminators: false # whether to average loss value by #discriminators\r\n        average_by_layers: false         # whether to average loss value by #layers of each discriminator\r\n        include_final_outputs: true      # whether to include final outputs for loss calculation\r\n    mel_loss_params:\r\n        fs: 24000                        # must be the same as the training data\r\n        n_fft: 1024                      # fft points\r\n        hop_length: 256                  # hop size\r\n        win_length: null                 # window length\r\n        window: hann                     # window type\r\n        n_mels: 80                       # number of Mel basis\r\n        fmin: 0                          # minimum frequency for Mel basis\r\n        fmax: null                       # maximum frequency for Mel basis\r\n        log_base: null                   # null represent natural log\r\n    lambda_adv: 1.0                      # loss scaling coefficient for adversarial loss\r\n    lambda_mel: 45.0                     # loss scaling coefficient for Mel loss\r\n    lambda_feat_match: 2.0               # loss scaling coefficient for feat match loss\r\n    lambda_var: 1.0\r\n    lambda_align: 2.0\r\n    # others\r\n    sampling_rate: 24000                 # needed in the inference for saving wav\r\n    cache_generator_outputs: true        # whether to cache generator outputs in the training\r\n\r\n# extra module for additional inputs\r\npitch_extract: dio           # pitch extractor type\r\npitch_extract_conf:\r\n    reduction_factor: 1\r\n    use_token_averaged_f0: false\r\npitch_normalize: global_mvn  # normalizer for the pitch feature\r\nenergy_extract: energy       # energy extractor type\r\nenergy_extract_conf:\r\n    reduction_factor: 1\r\n    use_token_averaged_energy: false\r\nenergy_normalize: global_mvn # normalizer for the energy feature\r\n\r\n##########################################################\r\n#            OPTIMIZER & SCHEDULER SETTING               #\r\n##########################################################\r\n# optimizer setting for generator\r\noptim: adamw\r\noptim_conf:\r\n    lr: 2.0e-4\r\n    betas: [0.8, 0.99]\r\n    eps: 1.0e-9\r\n    weight_decay: 0.0\r\nscheduler: exponentiallr\r\nscheduler_conf:\r\n    gamma: 0.999875\r\n# optimizer setting for discriminator\r\noptim2: adamw\r\noptim2_conf:\r\n    lr: 2.0e-4\r\n    betas: [0.8, 0.99]\r\n    eps: 1.0e-9\r\n    weight_decay: 0.0\r\nscheduler2: exponentiallr\r\nscheduler2_conf:\r\n    gamma: 0.999875\r\ngenerator_first: true # whether to start updating generator first\r\n\r\n##########################################################\r\n#                OTHER TRAINING SETTING                  #\r\n##########################################################\r\nnum_iters_per_epoch: 1000 # number of iterations per epoch\r\nmax_epoch: 1000           # number of epochs\r\naccum_grad: 1             # gradient accumulation\r\nbatch_bins: 2000000       # batch bins (feats_type=raw)\r\nbatch_type: numel         # how to make batch\r\ngrad_clip: -1             # gradient clipping norm\r\ngrad_noise: false         # whether to use gradient noise injection\r\nsort_in_batch: descending # how to sort data in making batch\r\nsort_batch: descending    # how to sort created batches\r\nnum_workers: 4            # number of workers of data loader\r\nuse_amp: false            # whether to use pytorch amp\r\nlog_interval: 50          # log interval in iterations\r\nkeep_nbest_models: 5      # number of models to keep\r\nnum_att_plot: 3           # number of attention figures to be saved in every check\r\nseed: 777                 # random seed number\r\npatience: null            # patience for early stopping\r\nunused_parameters: true   # needed for multi gpu case\r\nbest_model_criterion:     # criterion to save the best models\r\n-   - valid\r\n    - text2mel_loss\r\n    - min\r\n-   - train\r\n    - text2mel_loss\r\n    - min\r\n-   - train\r\n    - total_count\r\n    - max\r\ncudnn_deterministic: false # setting to false accelerates the training speed but makes it non-deterministic\r\n                           # in the case of GAN-TTS training, we strongly recommend setting to false\r\ncudnn_benchmark: false     # setting to true might acdelerate the training speed but sometimes decrease it\r\n                           # therefore, we set to false as a default (recommend trying both cases)\r\n```\r\n\r\nrun command (reference is kss recipe):\r\n```\r\n$./run.sh \\\r\n    --tts_task gan_tts \\\r\n    --fs 24000 \\\r\n    --fmin 0 \\\r\n    --fmax null \\\r\n    --n_fft 1024 \\\r\n    --n_shift 256 \\\r\n    --win_length null \\\r\n    --train_config conf/tuning/train_gst_jets.yaml \\\r\n    --token_type phn \\\r\n    --g2p pyopenjtalk_prosody \\\r\n    --cleaner null \\\r\n```\r\n\r\nI finished training, but I cannot inference.\r\nI used `espnet2.bin.tts_inference.Text2Speech` to inference.\r\n```\r\nTraceback (most recent call last):\r\n  File \"/work/abelab4/s_koha/shinycolors_tts/egs2/abelab/jsut_jets_gst/generate_wav/generate_wav.py\", line 157, in <module>\r\n    main()\r\n  File \"/work/abelab4/s_koha/shinycolors_tts/egs2/abelab/jsut_jets_gst/generate_wav/generate_wav.py\", line 117, in main\r\n    output = text2speech(text, speech=speech, spembs=spembs, sids=sids)['wav']\r\n  File \"/home/abelab/s_koha/miniconda3/envs/sctts/lib/python3.9/site-packages/torch/autograd/grad_mode.py\", line 28, in decorate_context\r\n    return func(*args, **kwargs)\r\n  File \"/work/abelab4/s_koha/shinycolors_tts/espnet2/bin/tts_inference.py\", line 196, in __call__\r\n    output_dict = self.model.inference(**batch, **cfg)\r\n  File \"/work/abelab4/s_koha/shinycolors_tts/espnet2/tts/espnet_model.py\", line 299, in inference\r\n    output_dict = self.tts.inference(**input_dict, **decode_config)\r\n  File \"/work/abelab4/s_koha/shinycolors_tts/espnet2/gan_tts/jets/jets.py\", line 646, in inference\r\n    wav, dur = self.generator.inference(\r\n  File \"/work/abelab4/s_koha/shinycolors_tts/espnet2/gan_tts/jets/generator.py\", line 674, in inference\r\n    style_embs = self.gst(feats)\r\n  File \"/home/abelab/s_koha/miniconda3/envs/sctts/lib/python3.9/site-packages/torch/nn/modules/module.py\", line 1102, in _call_impl\r\n    return forward_call(*input, **kwargs)\r\n  File \"/work/abelab4/s_koha/shinycolors_tts/espnet2/tts/gst/style_encoder.py\", line 88, in forward\r\n    ref_embs = self.ref_enc(speech)\r\n  File \"/home/abelab/s_koha/miniconda3/envs/sctts/lib/python3.9/site-packages/torch/nn/modules/module.py\", line 1102, in _call_impl\r\n    return forward_call(*input, **kwargs)\r\n  File \"/work/abelab4/s_koha/shinycolors_tts/espnet2/tts/gst/style_encoder.py\", line 181, in forward\r\n    batch_size = speech.size(0)\r\nAttributeError: 'NoneType' object has no attribute 'size'\r\n```\r\nLooking forward to your reply!\r\n", "reactions": {"url": "https://api.github.com/repos/espnet/espnet/issues/4743/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/espnet/espnet/issues/4743/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/espnet/espnet/issues/4738", "repository_url": "https://api.github.com/repos/espnet/espnet", "labels_url": "https://api.github.com/repos/espnet/espnet/issues/4738/labels{/name}", "comments_url": "https://api.github.com/repos/espnet/espnet/issues/4738/comments", "events_url": "https://api.github.com/repos/espnet/espnet/issues/4738/events", "html_url": "https://github.com/espnet/espnet/issues/4738", "id": 1429122637, "node_id": "I_kwDOBsxW2c5VLq5N", "number": 4738, "title": "Missing key(s) in state_dict: \"ctc.ctc_lo.weight\", \"ctc.ctc_lo.bias\"", "user": {"login": "pengaoao", "id": 12378083, "node_id": "MDQ6VXNlcjEyMzc4MDgz", "avatar_url": "https://avatars.githubusercontent.com/u/12378083?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pengaoao", "html_url": "https://github.com/pengaoao", "followers_url": "https://api.github.com/users/pengaoao/followers", "following_url": "https://api.github.com/users/pengaoao/following{/other_user}", "gists_url": "https://api.github.com/users/pengaoao/gists{/gist_id}", "starred_url": "https://api.github.com/users/pengaoao/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pengaoao/subscriptions", "organizations_url": "https://api.github.com/users/pengaoao/orgs", "repos_url": "https://api.github.com/users/pengaoao/repos", "events_url": "https://api.github.com/users/pengaoao/events{/privacy}", "received_events_url": "https://api.github.com/users/pengaoao/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 777173273, "node_id": "MDU6TGFiZWw3NzcxNzMyNzM=", "url": "https://api.github.com/repos/espnet/espnet/labels/Bug", "name": "Bug", "color": "ee0701", "default": false, "description": "bug should be fixed"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2022-10-31T01:43:03Z", "updated_at": "2022-11-07T01:27:07Z", "closed_at": "2022-11-07T01:27:07Z", "author_association": "NONE", "active_lock_reason": null, "body": "**Describe the bug**\r\nA clear and concise description of what the bug is.\r\nhttps://github.com/espnet/espnet/tree/master/egs2/librispeech/asr1\r\n**Basic environments:**\r\n - OS information: x86 ubuntu 18.04\r\n - python version: 3.7.5\r\n - espnet version: espnet 0.10.7a1\r\n - Git hash    21d19be00089678ca27f7fce474ef8d787689512\r\n - pytorch version [e.g. pytorch 1.12.0]\r\n \r\n**To Reproduce**\r\nSteps to reproduce the behavior:\r\n1. move to a recipe directory, e.g.,\r\ncd egs2/librispeech/asr1\r\nbash run.sh --stage 12\r\n\r\n\r\n**Error logs**\r\nPaste the error logs. If applicable, add screenshots to help explain your problem.\r\nMissing key(s) in state_dict: \"ctc.ctc_lo.weight\", \"ctc.ctc_lo.bias\r\n\r\nThe pretrained model is:\r\nhttps://github.com/espnet/espnet/tree/master/egs2/librispeech/asr1\r\nConformer-RNN Transducer\r\nEnvironments\r\ndate: Wed Apr 27 09:30:57 EDT 2022\r\nespnet version: espnet 0.10.7a1\r\nGit hash: 21d19be00089678ca27f7fce474ef8d787689512\r\nCommit date: Wed Mar 16 08:06:52 2022 -0400\r\nASR config: [conf/tuning/transducer/train_conformer-rnn_transducer.yaml](https://github.com/espnet/espnet/blob/master/egs2/librispeech/asr1/conf/tuning/transducer/train_conformer-rnn_transducer.yaml)\r\nDecode config: [conf/tuning/transducer/decode.yaml](https://github.com/espnet/espnet/blob/master/egs2/librispeech/asr1/conf/tuning/transducer/decode.yaml)\r\nPretrained model: https://huggingface.co/espnet/chai_librispeech_asr_train_conformer-rnn_transducer_raw_en_bpe5000_sp\r\n\r\n\r\n1\u3001the first error is:\r\n![image](https://user-images.githubusercontent.com/12378083/198915176-9727dd6f-05e4-4e7f-a55a-0e5e8c15a706.png)\r\n\r\nso I remove the fastemiut_lambda parameter\r\n\r\n2\u3001 then the second error is bellow when i tried to infer the given pretrained model\r\n[Missing key(s) in state_dict: \"ctc.ctc_lo.weight\", \"ctc.ctc_lo.bias\"](https://github.com/espnet/espnet/issues/4738#top)\r\n#4738\r\n\r\n\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/espnet/espnet/issues/4738/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/espnet/espnet/issues/4738/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/espnet/espnet/issues/4726", "repository_url": "https://api.github.com/repos/espnet/espnet", "labels_url": "https://api.github.com/repos/espnet/espnet/issues/4726/labels{/name}", "comments_url": "https://api.github.com/repos/espnet/espnet/issues/4726/comments", "events_url": "https://api.github.com/repos/espnet/espnet/issues/4726/events", "html_url": "https://github.com/espnet/espnet/issues/4726", "id": 1418676994, "node_id": "I_kwDOBsxW2c5Uj0sC", "number": 4726, "title": "RuntimeError: NCCL error, invalid usage, NCCL version 2.7.8 when Multi-processing with 2-HOST jobs with 1-GPU for each host, Multi host, DistributedDataParallel", "user": {"login": "yfyeung", "id": 64255737, "node_id": "MDQ6VXNlcjY0MjU1NzM3", "avatar_url": "https://avatars.githubusercontent.com/u/64255737?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yfyeung", "html_url": "https://github.com/yfyeung", "followers_url": "https://api.github.com/users/yfyeung/followers", "following_url": "https://api.github.com/users/yfyeung/following{/other_user}", "gists_url": "https://api.github.com/users/yfyeung/gists{/gist_id}", "starred_url": "https://api.github.com/users/yfyeung/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yfyeung/subscriptions", "organizations_url": "https://api.github.com/users/yfyeung/orgs", "repos_url": "https://api.github.com/users/yfyeung/repos", "events_url": "https://api.github.com/users/yfyeung/events{/privacy}", "received_events_url": "https://api.github.com/users/yfyeung/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 777173273, "node_id": "MDU6TGFiZWw3NzcxNzMyNzM=", "url": "https://api.github.com/repos/espnet/espnet/labels/Bug", "name": "Bug", "color": "ee0701", "default": false, "description": "bug should be fixed"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2022-10-21T17:56:13Z", "updated_at": "2022-10-24T02:53:24Z", "closed_at": "2022-10-24T02:53:24Z", "author_association": "NONE", "active_lock_reason": null, "body": "### Error log\r\n```\r\nTraceback (most recent call last):\r\n  File \"/home/yfy62/espnet/tools/anaconda/envs/espnet/lib/python3.8/runpy.py\", line 194, in _run_module_as_main\r\n    return _run_code(code, main_globals, None,\r\n  File \"/home/yfy62/espnet/tools/anaconda/envs/espnet/lib/python3.8/runpy.py\", line 87, in _run_code\r\n    exec(code, run_globals)\r\n  File \"/home/yfy62/espnet/espnet2/bin/asr_train.py\", line 23, in <module>\r\n    main()\r\n  File \"/home/yfy62/espnet/espnet2/bin/asr_train.py\", line 19, in main\r\n    ASRTask.main(cmd=cmd)\r\n  File \"/home/yfy62/espnet/espnet2/tasks/abs_task.py\", line 1019, in main\r\n    cls.main_worker(args)\r\n  File \"/home/yfy62/espnet/espnet2/tasks/abs_task.py\", line 1315, in main_worker\r\n    cls.trainer.run(\r\n  File \"/home/yfy62/espnet/espnet2/train/trainer.py\", line 221, in run\r\n    dp_model = torch.nn.parallel.DistributedDataParallel(\r\n  File \"/home/yfy62/espnet/tools/anaconda/envs/espnet/lib/python3.8/site-packages/torch/nn/parallel/distributed.py\", line 446, in __init__\r\n    self._sync_params_and_buffers(authoritative_rank=0)\r\n  File \"/home/yfy62/espnet/tools/anaconda/envs/espnet/lib/python3.8/site-packages/torch/nn/parallel/distributed.py\", line 457, in _sync_params_and_buffers\r\n    self._distributed_broadcast_coalesced(\r\n  File \"/home/yfy62/espnet/tools/anaconda/envs/espnet/lib/python3.8/site-packages/torch/nn/parallel/distributed.py\", line 1155, in _distributed_broadcast_coalesced\r\n    dist._broadcast_coalesced(\r\nRuntimeError: NCCL error in: /opt/conda/conda-bld/pytorch_1616554793803/work/torch/lib/c10d/ProcessGroupNCCL.cpp:825, invalid usage, NCCL version 2.7.8\r\nncclInvalidUsage: This usually reflects invalid usage of NCCL library (such as too many async ops, too many collectives at once, mixing streams in a group, etc).\r\n```\r\n\r\n### Case\r\n-  Multi-processing with 2-HOST jobs with 1-GPU for each host, Multi host, DistributedDataParallel\r\n- DDP HOST 1\r\n```\r\n#!/usr/bin/env bash\r\n\r\npython -m espnet2.bin.asr_train \\\r\n\t--use_preprocessor true \\\r\n\t--bpemodel data/en_token_list/bpe_unigram5000/bpe.model \\\r\n\t--token_type bpe \\\r\n\t--token_list data/en_token_list/bpe_unigram5000/tokens.txt \\\r\n\t--non_linguistic_symbols none \\\r\n\t--cleaner none \\\r\n\t--g2p none \\\r\n\t--valid_data_path_and_name_and_type dump/raw/dev/wav.scp,speech,kaldi_ark \\\r\n\t--valid_data_path_and_name_and_type dump/raw/dev/text,text,text \\\r\n\t--valid_shape_file exp/asr_stats_raw_en_bpe5000/valid/speech_shape \\\r\n\t--valid_shape_file exp/asr_stats_raw_en_bpe5000/valid/text_shape.bpe \\\r\n\t--resume true \\\r\n\t--init_param \\\r\n\t--ignore_init_mismatch false \\\r\n\t--fold_length 80000 \\\r\n\t--fold_length 150 \\\r\n\t--output_dir exp/asr_train_asr_rnnt_raw_en_bpe5000 \\\r\n\t--config conf/train_asr_rnnt.yaml \\\r\n\t--frontend_conf fs=16k \\\r\n\t--normalize=global_mvn \\\r\n\t--normalize_conf stats_file=exp/asr_stats_raw_en_bpe5000/train/feats_stats.npz \\\r\n\t--train_data_path_and_name_and_type dump/raw/train/wav.scp,speech,kaldi_ark \\\r\n\t--train_data_path_and_name_and_type dump/raw/train/text,text,text \\\r\n\t--train_shape_file exp/asr_stats_raw_en_bpe5000/train/speech_shape \\\r\n\t--train_shape_file exp/asr_stats_raw_en_bpe5000/train/text_shape.bpe \\\r\n\t--multiprocessing_distributed True \\\r\n\t--ngpu 1 \\\r\n\t--dist_rank 0 \\\r\n\t--dist_world_size 2 \\\r\n\t--dist_master_addr <ip_addr> \\\r\n\t--dist_master_port <port>\r\n```\r\n- DDP Host 2\r\n```\r\n#!/usr/bin/env bash\r\n\r\npython -m espnet2.bin.asr_train \\\r\n\t--use_preprocessor true \\\r\n\t--bpemodel data/en_token_list/bpe_unigram5000/bpe.model \\\r\n\t--token_type bpe \\\r\n\t--token_list data/en_token_list/bpe_unigram5000/tokens.txt \\\r\n\t--non_linguistic_symbols none \\\r\n\t--cleaner none \\\r\n\t--g2p none \\\r\n\t--valid_data_path_and_name_and_type dump/raw/dev/wav.scp,speech,kaldi_ark \\\r\n\t--valid_data_path_and_name_and_type dump/raw/dev/text,text,text \\\r\n\t--valid_shape_file exp/asr_stats_raw_en_bpe5000/valid/speech_shape \\\r\n\t--valid_shape_file exp/asr_stats_raw_en_bpe5000/valid/text_shape.bpe \\\r\n\t--resume true \\\r\n\t--init_param \\\r\n\t--ignore_init_mismatch false \\\r\n\t--fold_length 80000 \\\r\n\t--fold_length 150 \\\r\n\t--output_dir exp/asr_train_asr_rnnt_raw_en_bpe5000 \\\r\n\t--config conf/train_asr_rnnt.yaml \\\r\n\t--frontend_conf fs=16k \\\r\n\t--normalize=global_mvn \\\r\n\t--normalize_conf stats_file=exp/asr_stats_raw_en_bpe5000/train/feats_stats.npz \\\r\n\t--train_data_path_and_name_and_type dump/raw/train/wav.scp,speech,kaldi_ark \\\r\n\t--train_data_path_and_name_and_type dump/raw/train/text,text,text \\\r\n\t--train_shape_file exp/asr_stats_raw_en_bpe5000/train/speech_shape \\\r\n\t--train_shape_file exp/asr_stats_raw_en_bpe5000/train/text_shape.bpe \\\r\n\t--multiprocessing_distributed True \\\r\n\t--ngpu 1 \\\r\n\t--dist_rank 1 \\\r\n\t--dist_world_size 2 \\\r\n\t--dist_master_addr <ip_addr> \\\r\n\t--dist_master_port <port>\r\n```\r\n\r\n### Reason\r\nThe argument of `torch.nn.parallel.DistributedDataParallel`, `model`,  of Hosts 1 and 2 are both on the same CUDA.\r\n```\r\ndp_model = torch.nn.parallel.DistributedDataParallel(\r\n\tmodel,\r\n\tdevice_ids=(\r\n\t\t# Perform multi-Process with multi-GPUs\r\n\t\t[torch.cuda.current_device()]\r\n\t\tif distributed_option.ngpu == 1\r\n\t\t# Perform single-Process with multi-GPUs\r\n\t\telse None\r\n\t),\r\n\toutput_device=(\r\n\t\ttorch.cuda.current_device()\r\n\t\tif distributed_option.ngpu == 1\r\n\t\telse None\r\n        ),\r\n\tfind_unused_parameters=trainer_options.unused_parameters,\r\n)\r\n```", "reactions": {"url": "https://api.github.com/repos/espnet/espnet/issues/4726/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/espnet/espnet/issues/4726/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/espnet/espnet/issues/4716", "repository_url": "https://api.github.com/repos/espnet/espnet", "labels_url": "https://api.github.com/repos/espnet/espnet/issues/4716/labels{/name}", "comments_url": "https://api.github.com/repos/espnet/espnet/issues/4716/comments", "events_url": "https://api.github.com/repos/espnet/espnet/issues/4716/events", "html_url": "https://github.com/espnet/espnet/issues/4716", "id": 1413394966, "node_id": "I_kwDOBsxW2c5UPrIW", "number": 4716, "title": "Error in training enahncement model when using a different model config file", "user": {"login": "bunny-sung", "id": 73008672, "node_id": "MDQ6VXNlcjczMDA4Njcy", "avatar_url": "https://avatars.githubusercontent.com/u/73008672?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bunny-sung", "html_url": "https://github.com/bunny-sung", "followers_url": "https://api.github.com/users/bunny-sung/followers", "following_url": "https://api.github.com/users/bunny-sung/following{/other_user}", "gists_url": "https://api.github.com/users/bunny-sung/gists{/gist_id}", "starred_url": "https://api.github.com/users/bunny-sung/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bunny-sung/subscriptions", "organizations_url": "https://api.github.com/users/bunny-sung/orgs", "repos_url": "https://api.github.com/users/bunny-sung/repos", "events_url": "https://api.github.com/users/bunny-sung/events{/privacy}", "received_events_url": "https://api.github.com/users/bunny-sung/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 777173273, "node_id": "MDU6TGFiZWw3NzcxNzMyNzM=", "url": "https://api.github.com/repos/espnet/espnet/labels/Bug", "name": "Bug", "color": "ee0701", "default": false, "description": "bug should be fixed"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2022-10-18T15:05:34Z", "updated_at": "2022-10-20T00:53:01Z", "closed_at": "2022-10-20T00:53:01Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi,\r\n\r\nI am running experiment derivied from the egs2/librimix/enh_diar1 and egs2/wsj0_2mix/enh1 directory. There is no error when I was using the default `conf/tuning/train_enh_conv_tasnet.yaml` and `train_enh_dprnn_tasnet.yaml`.\r\n\r\nHowever when I switched to DPT network: `conf/tuning/train_enh_dptnet.yaml` in the `run.sh` for wsj0_2mix, I got this error at the training stage:\r\n\r\n```\r\n<DIR>/tools/anaconda/envs/espnet_enh_2022/bin/python3 <DIR>/espnet2/bin/enh_train.py --collect_stats true --train_data_path_and_name_and_type dump/raw/train/wav.scp,speech_mix,sound --train_data_path_and_name_and_type dump/raw/train/spk1.scp,speech_ref1,sound --train_data_path_and_name_and_type dump/raw/train/spk2.scp,speech_ref2,sound --valid_data_path_and_name_and_type dump/raw/dev/wav.scp,speech_mix,sound --valid_data_path_and_name_and_type dump/raw/dev/spk1.scp,speech_ref1,sound --valid_data_path_and_name_and_type dump/raw/dev/spk2.scp,speech_ref2,sound --train_shape_file exp_dptnet/enh_stats_8k/logdir/train.9.scp --valid_shape_file exp_dptnet/enh_stats_8k/logdir/valid.9.scp --output_dir exp_dptnet/enh_stats_8k/logdir/stats.9 --config conf/tuning/train_enh_dptnet.yaml\r\nTraceback (most recent call last):\r\n  File \"<DIR>/tools/anaconda/envs/espnet_enh_2022/lib/python3.8/runpy.py\", line 194, in _run_module_as_main\r\n    return _run_code(code, main_globals, None,\r\n  File \"<DIR>/tools/anaconda/envs/espnet_enh_2022/lib/python3.8/runpy.py\", line 87, in _run_code\r\n    exec(code, run_globals)\r\n  File \"<DIR>/espnet2/bin/enh_train.py\", line 23, in <module>\r\n    main()\r\n  File \"<DIR>/espnet2/bin/enh_train.py\", line 19, in main\r\n    EnhancementTask.main(cmd=cmd)\r\n  File \"<DIR>/espnet2/tasks/abs_task.py\", line 1019, in main\r\n    cls.main_worker(args)\r\n  File \"<DIR>/espnet2/tasks/abs_task.py\", line 1121, in main_worker\r\n    model = cls.build_model(args=args)\r\n  File \"<DIR>/espnet2/tasks/enh.py\", line 468, in build_model\r\n    separator = separator_choices.get_class(args.separator)(\r\nTypeError: __init__() got an unexpected keyword argument 'feature_dim'\r\n# Accounting: time=45 threads=1\r\n```\r\n\r\nThe repo is cloned and build on Oct 7. Any help will be appreciated. Thanks!\r\n", "reactions": {"url": "https://api.github.com/repos/espnet/espnet/issues/4716/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/espnet/espnet/issues/4716/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/espnet/espnet/issues/4704", "repository_url": "https://api.github.com/repos/espnet/espnet", "labels_url": "https://api.github.com/repos/espnet/espnet/issues/4704/labels{/name}", "comments_url": "https://api.github.com/repos/espnet/espnet/issues/4704/comments", "events_url": "https://api.github.com/repos/espnet/espnet/issues/4704/events", "html_url": "https://github.com/espnet/espnet/issues/4704", "id": 1403638658, "node_id": "I_kwDOBsxW2c5TqdOC", "number": 4704, "title": "Installing Error when install relevant packages using tools/installers", "user": {"login": "lidl2019", "id": 59629076, "node_id": "MDQ6VXNlcjU5NjI5MDc2", "avatar_url": "https://avatars.githubusercontent.com/u/59629076?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lidl2019", "html_url": "https://github.com/lidl2019", "followers_url": "https://api.github.com/users/lidl2019/followers", "following_url": "https://api.github.com/users/lidl2019/following{/other_user}", "gists_url": "https://api.github.com/users/lidl2019/gists{/gist_id}", "starred_url": "https://api.github.com/users/lidl2019/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lidl2019/subscriptions", "organizations_url": "https://api.github.com/users/lidl2019/orgs", "repos_url": "https://api.github.com/users/lidl2019/repos", "events_url": "https://api.github.com/users/lidl2019/events{/privacy}", "received_events_url": "https://api.github.com/users/lidl2019/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 777173273, "node_id": "MDU6TGFiZWw3NzcxNzMyNzM=", "url": "https://api.github.com/repos/espnet/espnet/labels/Bug", "name": "Bug", "color": "ee0701", "default": false, "description": "bug should be fixed"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2022-10-10T19:51:11Z", "updated_at": "2022-10-11T02:42:33Z", "closed_at": "2022-10-11T02:42:33Z", "author_association": "NONE", "active_lock_reason": null, "body": "**Describe the bug**\r\nThis happens when I try to run espnet tutorials 2021 in colab\r\n\r\n**Basic environments:*\r\n - python version: 3.9\r\n - espnet version: 2022.07\r\n - Git hash [e.g. b88e89fc7246fed4c2842b55baba884fe1b4ecc2]\r\n   - Commit date [e.g. Tue Sep 1 09:32:54 2020 -0400]\r\n - pytorch version [e.g. pytorch 1.12.1]\r\n![issue1](https://user-images.githubusercontent.com/59629076/194942116-35eb7f18-19b5-45f8-a06b-85ac62f9b367.jpg)\r\n![issue2](https://user-images.githubusercontent.com/59629076/194942119-a2566628-1170-4e28-853c-6a8045c09699.jpg)\r\n\r\n \r\nWhen I try to download using the installer provided (phonemizer or sctk) for example, the installing process finished but the \"check_install.py\" cannot detect the package.\r\n\r\n\r\n\r\nThank you and appreciate your help!\r\n", "reactions": {"url": "https://api.github.com/repos/espnet/espnet/issues/4704/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/espnet/espnet/issues/4704/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/espnet/espnet/issues/4691", "repository_url": "https://api.github.com/repos/espnet/espnet", "labels_url": "https://api.github.com/repos/espnet/espnet/issues/4691/labels{/name}", "comments_url": "https://api.github.com/repos/espnet/espnet/issues/4691/comments", "events_url": "https://api.github.com/repos/espnet/espnet/issues/4691/events", "html_url": "https://github.com/espnet/espnet/issues/4691", "id": 1398391799, "node_id": "I_kwDOBsxW2c5TWcP3", "number": 4691, "title": "asr.py vs asr_transducer.py", "user": {"login": "JingbiaoMei", "id": 47608793, "node_id": "MDQ6VXNlcjQ3NjA4Nzkz", "avatar_url": "https://avatars.githubusercontent.com/u/47608793?v=4", "gravatar_id": "", "url": "https://api.github.com/users/JingbiaoMei", "html_url": "https://github.com/JingbiaoMei", "followers_url": "https://api.github.com/users/JingbiaoMei/followers", "following_url": "https://api.github.com/users/JingbiaoMei/following{/other_user}", "gists_url": "https://api.github.com/users/JingbiaoMei/gists{/gist_id}", "starred_url": "https://api.github.com/users/JingbiaoMei/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/JingbiaoMei/subscriptions", "organizations_url": "https://api.github.com/users/JingbiaoMei/orgs", "repos_url": "https://api.github.com/users/JingbiaoMei/repos", "events_url": "https://api.github.com/users/JingbiaoMei/events{/privacy}", "received_events_url": "https://api.github.com/users/JingbiaoMei/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 777173273, "node_id": "MDU6TGFiZWw3NzcxNzMyNzM=", "url": "https://api.github.com/repos/espnet/espnet/labels/Bug", "name": "Bug", "color": "ee0701", "default": false, "description": "bug should be fixed"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2022-10-05T21:16:48Z", "updated_at": "2022-10-07T13:00:11Z", "closed_at": "2022-10-06T13:55:24Z", "author_association": "NONE", "active_lock_reason": null, "body": "I did not encounter any bug, I was just wondering: accourding to `espnet2_tutorial.md`, for transducer models, we need to use the asr_transducer.py rather than asr.py. However, the transducer example config here [egs2/librispeech/asr1/conf/tuning/transducer/train_conformer-rnn_transducer.yaml] has an argument \"encoder\" that only asr.py supported, while asr_tranducer does not have the \"encoder_choices.get_class(args.encoder)\" method to select from different encoder.\r\n\r\nMy question is that if we set ctc_weight to 0, these two python file should have built the exact same model.", "reactions": {"url": "https://api.github.com/repos/espnet/espnet/issues/4691/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/espnet/espnet/issues/4691/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/espnet/espnet/issues/4684", "repository_url": "https://api.github.com/repos/espnet/espnet", "labels_url": "https://api.github.com/repos/espnet/espnet/issues/4684/labels{/name}", "comments_url": "https://api.github.com/repos/espnet/espnet/issues/4684/comments", "events_url": "https://api.github.com/repos/espnet/espnet/issues/4684/events", "html_url": "https://github.com/espnet/espnet/issues/4684", "id": 1394442096, "node_id": "I_kwDOBsxW2c5THX9w", "number": 4684, "title": "Postnet does not update at all in FastSpeech2", "user": {"login": "iamanigeeit", "id": 13131208, "node_id": "MDQ6VXNlcjEzMTMxMjA4", "avatar_url": "https://avatars.githubusercontent.com/u/13131208?v=4", "gravatar_id": "", "url": "https://api.github.com/users/iamanigeeit", "html_url": "https://github.com/iamanigeeit", "followers_url": "https://api.github.com/users/iamanigeeit/followers", "following_url": "https://api.github.com/users/iamanigeeit/following{/other_user}", "gists_url": "https://api.github.com/users/iamanigeeit/gists{/gist_id}", "starred_url": "https://api.github.com/users/iamanigeeit/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/iamanigeeit/subscriptions", "organizations_url": "https://api.github.com/users/iamanigeeit/orgs", "repos_url": "https://api.github.com/users/iamanigeeit/repos", "events_url": "https://api.github.com/users/iamanigeeit/events{/privacy}", "received_events_url": "https://api.github.com/users/iamanigeeit/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 777173273, "node_id": "MDU6TGFiZWw3NzcxNzMyNzM=", "url": "https://api.github.com/repos/espnet/espnet/labels/Bug", "name": "Bug", "color": "ee0701", "default": false, "description": "bug should be fixed"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2022-10-03T09:42:19Z", "updated_at": "2022-10-05T10:36:44Z", "closed_at": "2022-10-05T10:36:44Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "While pruning FastSpeech2 using [connection gradient](https://arxiv.org/abs/1810.02340), i realized that the entire postnet is being pruned with gradient 0.\r\n\r\nThen i checked my FS2 checkpoints and found that the postnet indeed does not get updated at all. \r\n```\r\nimport torch\r\nm1 = torch.load('/home/perry/PycharmProjects/espnet/egs2/ljspeech/tts1/exp/test/1epoch.pth')\r\nm2 = torch.load('/home/perry/PycharmProjects/espnet/egs2/ljspeech/tts1/exp/test/2epoch.pth')\r\nfor name, param in m1.items():\r\n    if 'postnet' in name:\r\n        if 'weight' in name or 'bias' in name:\r\n            print(name, param.equal(m2[name]))\r\n                                \r\ntts.postnet.postnet.0.0.weight True\r\ntts.postnet.postnet.0.1.weight True\r\ntts.postnet.postnet.0.1.bias True\r\ntts.postnet.postnet.1.0.weight True\r\ntts.postnet.postnet.1.1.weight True\r\ntts.postnet.postnet.1.1.bias True\r\ntts.postnet.postnet.2.0.weight True\r\ntts.postnet.postnet.2.1.weight True\r\ntts.postnet.postnet.2.1.bias True\r\ntts.postnet.postnet.3.0.weight True\r\ntts.postnet.postnet.3.1.weight True\r\ntts.postnet.postnet.3.1.bias True\r\ntts.postnet.postnet.4.0.weight True\r\ntts.postnet.postnet.4.1.weight True\r\ntts.postnet.postnet.4.1.bias False\r\n```\r\n\r\nWhat is the role of the postnet?", "reactions": {"url": "https://api.github.com/repos/espnet/espnet/issues/4684/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/espnet/espnet/issues/4684/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/espnet/espnet/issues/4650", "repository_url": "https://api.github.com/repos/espnet/espnet", "labels_url": "https://api.github.com/repos/espnet/espnet/issues/4650/labels{/name}", "comments_url": "https://api.github.com/repos/espnet/espnet/issues/4650/comments", "events_url": "https://api.github.com/repos/espnet/espnet/issues/4650/events", "html_url": "https://github.com/espnet/espnet/issues/4650", "id": 1378854778, "node_id": "I_kwDOBsxW2c5SL6d6", "number": 4650, "title": "Issue in enh_asr.sh", "user": {"login": "YoshikiMas", "id": 40336669, "node_id": "MDQ6VXNlcjQwMzM2NjY5", "avatar_url": "https://avatars.githubusercontent.com/u/40336669?v=4", "gravatar_id": "", "url": "https://api.github.com/users/YoshikiMas", "html_url": "https://github.com/YoshikiMas", "followers_url": "https://api.github.com/users/YoshikiMas/followers", "following_url": "https://api.github.com/users/YoshikiMas/following{/other_user}", "gists_url": "https://api.github.com/users/YoshikiMas/gists{/gist_id}", "starred_url": "https://api.github.com/users/YoshikiMas/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/YoshikiMas/subscriptions", "organizations_url": "https://api.github.com/users/YoshikiMas/orgs", "repos_url": "https://api.github.com/users/YoshikiMas/repos", "events_url": "https://api.github.com/users/YoshikiMas/events{/privacy}", "received_events_url": "https://api.github.com/users/YoshikiMas/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 777173273, "node_id": "MDU6TGFiZWw3NzcxNzMyNzM=", "url": "https://api.github.com/repos/espnet/espnet/labels/Bug", "name": "Bug", "color": "ee0701", "default": false, "description": "bug should be fixed"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2022-09-20T05:49:33Z", "updated_at": "2022-11-20T07:22:05Z", "closed_at": "2022-11-20T07:22:05Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "**Describe the bug**\r\nAs discussed with @Emrys365, [these lines](https://github.com/YoshikiMas/espnet/blob/6d5236553b7fb3e653907c447bbbbb0790a013f9/egs2/TEMPLATE/enh_asr1/enh_asr.sh#L795-L801) in `enh_asr.sh` rely on the outputs of stages 3 and 4 but are called even with `--stop_stage 1`.\r\nIt seems not to cause a bad effect to the generated data, but can we avoid the following error?\r\n\r\n\r\n**Basic environments:**\r\n - OS information: Ubuntu 20.04.3 LTS (x86_64)\r\n - python version: 3.7.4 (default, Aug 13 2019, 20:35:49)  [GCC 7.3.0] (64-bit runtime)\r\n - espnet version: espnet 202207\r\n - Git hash 6d5236553b7fb3e653907c447bbbbb0790a013f9\r\n - pytorch version 1.10.1+cu111 \r\n \r\n\r\n**Task information:**\r\n - Task: ENH_ASR\r\n - Recipe: wsj0_2mix_spatialized\r\n - ESPnet2\r\n\r\n**To Reproduce**\r\nSteps to reproduce the behavior:\r\n1. move to docker directory\r\n2. execute `run.sh` as `bash run.sh --docker-gpu 0 --is-egs2 --docker-egs wsj0_2mix_spatialized/enh_asr1 --ngpu 1 --stage 1 --stop-stage 1`\r\n3. I got the error in the command line.\r\n\r\n**Error logs**\r\n```\r\n./enh_asr.sh: line 799: dump/raw/lm_dev.txt: No such file or directory                                                                     \r\nawk: fatal: cannot open file `dump/raw/cv_spatialized_anechoic_multich_max_16k/text_spk1' for reading (No such file or directory)\r\n\r\n```", "reactions": {"url": "https://api.github.com/repos/espnet/espnet/issues/4650/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/espnet/espnet/issues/4650/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/espnet/espnet/issues/4632", "repository_url": "https://api.github.com/repos/espnet/espnet", "labels_url": "https://api.github.com/repos/espnet/espnet/issues/4632/labels{/name}", "comments_url": "https://api.github.com/repos/espnet/espnet/issues/4632/comments", "events_url": "https://api.github.com/repos/espnet/espnet/issues/4632/events", "html_url": "https://github.com/espnet/espnet/issues/4632", "id": 1368957185, "node_id": "I_kwDOBsxW2c5RmKEB", "number": 4632, "title": "Increasing CPU memory during training stage", "user": {"login": "dalision", "id": 46208723, "node_id": "MDQ6VXNlcjQ2MjA4NzIz", "avatar_url": "https://avatars.githubusercontent.com/u/46208723?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dalision", "html_url": "https://github.com/dalision", "followers_url": "https://api.github.com/users/dalision/followers", "following_url": "https://api.github.com/users/dalision/following{/other_user}", "gists_url": "https://api.github.com/users/dalision/gists{/gist_id}", "starred_url": "https://api.github.com/users/dalision/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dalision/subscriptions", "organizations_url": "https://api.github.com/users/dalision/orgs", "repos_url": "https://api.github.com/users/dalision/repos", "events_url": "https://api.github.com/users/dalision/events{/privacy}", "received_events_url": "https://api.github.com/users/dalision/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 777173273, "node_id": "MDU6TGFiZWw3NzcxNzMyNzM=", "url": "https://api.github.com/repos/espnet/espnet/labels/Bug", "name": "Bug", "color": "ee0701", "default": false, "description": "bug should be fixed"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 7, "created_at": "2022-09-11T14:07:16Z", "updated_at": "2022-09-15T16:29:57Z", "closed_at": "2022-09-15T16:29:57Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi, maintainers! When I run an ASR trainer script, I observed an increasing CPU memory each step by psutil.virtual_memory()(about 2-3MB), while GPU memory is relatively stable. I have noted the code about Reporter ( it may cause the problem because it will accumulate process variables). And I check some other variables like loss(loss.detach() are used). However, the problem still exists. OOM or dataloader worker pipe broken may happen if the steps number in an epoch is big enough. I wonder what the reason for that. Thanks!", "reactions": {"url": "https://api.github.com/repos/espnet/espnet/issues/4632/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/espnet/espnet/issues/4632/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/espnet/espnet/issues/4630", "repository_url": "https://api.github.com/repos/espnet/espnet", "labels_url": "https://api.github.com/repos/espnet/espnet/issues/4630/labels{/name}", "comments_url": "https://api.github.com/repos/espnet/espnet/issues/4630/comments", "events_url": "https://api.github.com/repos/espnet/espnet/issues/4630/events", "html_url": "https://github.com/espnet/espnet/issues/4630", "id": 1368556431, "node_id": "I_kwDOBsxW2c5RkoOP", "number": 4630, "title": "Feature extraction is not working", "user": {"login": "yoni-jj", "id": 111046356, "node_id": "U_kgDOBp5u1A", "avatar_url": "https://avatars.githubusercontent.com/u/111046356?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yoni-jj", "html_url": "https://github.com/yoni-jj", "followers_url": "https://api.github.com/users/yoni-jj/followers", "following_url": "https://api.github.com/users/yoni-jj/following{/other_user}", "gists_url": "https://api.github.com/users/yoni-jj/gists{/gist_id}", "starred_url": "https://api.github.com/users/yoni-jj/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yoni-jj/subscriptions", "organizations_url": "https://api.github.com/users/yoni-jj/orgs", "repos_url": "https://api.github.com/users/yoni-jj/repos", "events_url": "https://api.github.com/users/yoni-jj/events{/privacy}", "received_events_url": "https://api.github.com/users/yoni-jj/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 777173273, "node_id": "MDU6TGFiZWw3NzcxNzMyNzM=", "url": "https://api.github.com/repos/espnet/espnet/labels/Bug", "name": "Bug", "color": "ee0701", "default": false, "description": "bug should be fixed"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2022-09-10T08:56:30Z", "updated_at": "2022-09-10T10:45:16Z", "closed_at": "2022-09-10T10:45:16Z", "author_association": "NONE", "active_lock_reason": null, "body": "2022-09-10T08:53:47 (asr.sh:254:main) ./asr.sh --stage 3 --stop_stage 3 --train_set train_nodev --valid_set train_dev --test_sets train_dev test --nj 4\r\n2022-09-10T08:53:47 (asr.sh:474:main) Stage 3: Format wav.scp: data/ -> dump/raw\r\nutils/copy_data_dir.sh: copied data from data/train_nodev to dump/raw/org/train_nodev\r\nutils/validate_data_dir.sh: Successfully validated data-directory dump/raw/org/train_nodev\r\n2022-09-10T08:53:48 (format_wav_scp.sh:42:main) scripts/audio/format_wav_scp.sh --nj 4 --cmd run.pl --audio-format flac --fs 16k data/train_nodev/wav.scp dump/raw/org/train_nodev\r\n2022-09-10T08:53:48 (format_wav_scp.sh:110:main) [info]: without segments\r\nrun.pl: 4 / 4 failed, log is in dump/raw/org/train_nodev/logs/format_wav_scp.*.log\r\n\r\n\r\nWhen i tried running the espnet2 tutorial on colab it gave this error\r\nand when i opened the log files it says:\r\n pyscripts/audio/format_wav_scp.py --fs 16k --audio-format flac dump/raw/org/train_nodev/logs/wav.1.scp dump/raw/org/train_nodev/data/format.1 \r\n Started at Sat Sep 10 08:53:49 UTC 2022\r\n\r\nTraceback (most recent call last):\r\n  File \"pyscripts/audio/format_wav_scp.py\", line 11, in <module>\r\n    import resampy\r\n  File \"/content/espnet/tools/anaconda/envs/espnet/lib/python3.8/site-packages/resampy/__init__.py\", line 7, in <module>\r\n    from .core import *\r\n  File \"/content/espnet/tools/anaconda/envs/espnet/lib/python3.8/site-packages/resampy/core.py\", line 7, in <module>\r\n    import numba\r\n  File \"/content/espnet/tools/anaconda/envs/espnet/lib/python3.8/site-packages/numba/__init__.py\", line 200, in <module>\r\n    _ensure_critical_deps()\r\n  File \"/content/espnet/tools/anaconda/envs/espnet/lib/python3.8/site-packages/numba/__init__.py\", line 140, in _ensure_critical_deps\r\n    raise ImportError(\"Numba needs NumPy 1.21 or less\")\r\nImportError: Numba needs NumPy 1.21 or less\r\n Accounting: time=1 threads=1\r\nEnded (code 1) at Sat Sep 10 08:53:50 UTC 2022, elapsed time 1 seconds\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/espnet/espnet/issues/4630/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/espnet/espnet/issues/4630/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/espnet/espnet/issues/4575", "repository_url": "https://api.github.com/repos/espnet/espnet", "labels_url": "https://api.github.com/repos/espnet/espnet/issues/4575/labels{/name}", "comments_url": "https://api.github.com/repos/espnet/espnet/issues/4575/comments", "events_url": "https://api.github.com/repos/espnet/espnet/issues/4575/events", "html_url": "https://github.com/espnet/espnet/issues/4575", "id": 1341173693, "node_id": "I_kwDOBsxW2c5P8K-9", "number": 4575, "title": "Running an4 recipe", "user": {"login": "AdityaYadavalli1", "id": 32356916, "node_id": "MDQ6VXNlcjMyMzU2OTE2", "avatar_url": "https://avatars.githubusercontent.com/u/32356916?v=4", "gravatar_id": "", "url": "https://api.github.com/users/AdityaYadavalli1", "html_url": "https://github.com/AdityaYadavalli1", "followers_url": "https://api.github.com/users/AdityaYadavalli1/followers", "following_url": "https://api.github.com/users/AdityaYadavalli1/following{/other_user}", "gists_url": "https://api.github.com/users/AdityaYadavalli1/gists{/gist_id}", "starred_url": "https://api.github.com/users/AdityaYadavalli1/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/AdityaYadavalli1/subscriptions", "organizations_url": "https://api.github.com/users/AdityaYadavalli1/orgs", "repos_url": "https://api.github.com/users/AdityaYadavalli1/repos", "events_url": "https://api.github.com/users/AdityaYadavalli1/events{/privacy}", "received_events_url": "https://api.github.com/users/AdityaYadavalli1/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 777173273, "node_id": "MDU6TGFiZWw3NzcxNzMyNzM=", "url": "https://api.github.com/repos/espnet/espnet/labels/Bug", "name": "Bug", "color": "ee0701", "default": false, "description": "bug should be fixed"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2022-08-17T05:07:50Z", "updated_at": "2022-08-18T03:25:44Z", "closed_at": "2022-08-18T03:25:44Z", "author_association": "NONE", "active_lock_reason": null, "body": "**Describe the bug**\r\nRunning into the following error at Stage 7 (LM training) of an4 recipe:\r\n`ImportError: libpng12.so.0: cannot open shared object file: No such file or directory`\r\n\r\n**Basic environments:**\r\n - OS information: Linux 4.15.0-189-generic #200-Ubuntu SMP Wed Jun 22 19:53:37 UTC 2022 x86_64\r\n - python version: 3.8.13 (default, Mar 28 2022, 11:38:47)  [GCC 7.5.0]\r\n - espnet version: espnet 202207\r\n - Git hash: 277ec3c33d2ca7f47d9d31c84e4dae54ce017bd7\r\n   - Commit date: Wed Aug 10 13:32:09 2022 -0400\r\n - pytorch version: pytorch 1.11.0\r\n\r\n**Environments from `torch.utils.collect_env`:**\r\ne.g.,\r\n```\r\nCollecting environment information...\r\nPyTorch version: 1.11.0\r\nIs debug build: False\r\nCUDA used to build PyTorch: 10.2\r\nROCM used to build PyTorch: N/A\r\n\r\nOS: Ubuntu 18.04.6 LTS (x86_64)\r\nGCC version: (Ubuntu 7.5.0-3ubuntu1~18.04) 7.5.0\r\nClang version: 6.0.0-1ubuntu2 (tags/RELEASE_600/final)\r\nCMake version: version 3.10.2\r\nLibc version: glibc-2.27\r\n\r\nPython version: 3.8.13 (default, Mar 28 2022, 11:38:47)  [GCC 7.5.0] (64-bit runtime)\r\nPython platform: Linux-4.15.0-189-generic-x86_64-with-glibc2.17\r\nIs CUDA available: True\r\nCUDA runtime version: 10.2.89\r\nGPU models and configuration: \r\nGPU 0: NVIDIA GeForce GTX 1080 Ti\r\nGPU 1: NVIDIA GeForce GTX 1080 Ti\r\nGPU 2: NVIDIA GeForce GTX 1080 Ti\r\nGPU 3: NVIDIA GeForce GTX 1080 Ti\r\n\r\nNvidia driver version: 510.85.02\r\ncuDNN version: Could not collect\r\nHIP runtime version: N/A\r\nMIOpen runtime version: N/A\r\n\r\nVersions of relevant libraries:\r\n[pip3] numpy==1.22.4\r\n[pip3] pytorch-ranger==0.1.1\r\n[pip3] pytorch-wpe==0.0.1\r\n[pip3] torch==1.11.0\r\n[pip3] torch-complex==0.4.3\r\n[pip3] torch-optimizer==0.3.0\r\n[pip3] torchaudio==0.11.0\r\n[conda] blas                      1.0                         mkl  \r\n[conda] cudatoolkit               10.2.89              hfd86e86_1  \r\n[conda] mkl                       2021.4.0           h06a4308_640  \r\n[conda] mkl-service               2.4.0            py38h7f8727e_0  \r\n[conda] mkl_fft                   1.3.1            py38hd3c417c_0  \r\n[conda] mkl_random                1.2.2            py38h51133e4_0  \r\n[conda] numpy                     1.21.4                   pypi_0    pypi\r\n[conda] pytorch                   1.11.0          py3.8_cuda10.2_cudnn7.6.5_0    pytorch\r\n[conda] pytorch-mutex             1.0                        cuda    pytorch\r\n[conda] pytorch-ranger            0.1.1                    pypi_0    pypi\r\n[conda] pytorch-wpe               0.0.1                    pypi_0    pypi\r\n[conda] torch-complex             0.4.3                    pypi_0    pypi\r\n[conda] torch-optimizer           0.3.0                    pypi_0    pypi\r\n[conda] torchaudio                0.11.0               py38_cu102    pytorch\r\n```\r\n\r\n**Task information:**\r\n - Task: ASR\r\n - Recipe: an4\r\n - ESPnet2\r\n\r\n**To Reproduce**\r\nSteps to reproduce the behavior:\r\n1. `cd egs2/an4/asr1`\r\n2. execute `run.sh`\r\n3. error log: `exp/lm_train_lm_en_bpe30/train.log` (also attached)\r\n[nohup.txt](https://github.com/espnet/espnet/files/9356458/nohup.txt)\r\n\r\nAny help in debugging this is appreciated! \r\n", "reactions": {"url": "https://api.github.com/repos/espnet/espnet/issues/4575/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/espnet/espnet/issues/4575/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/espnet/espnet/issues/4554", "repository_url": "https://api.github.com/repos/espnet/espnet", "labels_url": "https://api.github.com/repos/espnet/espnet/issues/4554/labels{/name}", "comments_url": "https://api.github.com/repos/espnet/espnet/issues/4554/comments", "events_url": "https://api.github.com/repos/espnet/espnet/issues/4554/events", "html_url": "https://github.com/espnet/espnet/issues/4554", "id": 1326611715, "node_id": "I_kwDOBsxW2c5PEn0D", "number": 4554, "title": "The speed of running lm_train.py in asr1 of espnet librispeech is very slow ", "user": {"login": "zdyupup", "id": 87793223, "node_id": "MDQ6VXNlcjg3NzkzMjIz", "avatar_url": "https://avatars.githubusercontent.com/u/87793223?v=4", "gravatar_id": "", "url": "https://api.github.com/users/zdyupup", "html_url": "https://github.com/zdyupup", "followers_url": "https://api.github.com/users/zdyupup/followers", "following_url": "https://api.github.com/users/zdyupup/following{/other_user}", "gists_url": "https://api.github.com/users/zdyupup/gists{/gist_id}", "starred_url": "https://api.github.com/users/zdyupup/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/zdyupup/subscriptions", "organizations_url": "https://api.github.com/users/zdyupup/orgs", "repos_url": "https://api.github.com/users/zdyupup/repos", "events_url": "https://api.github.com/users/zdyupup/events{/privacy}", "received_events_url": "https://api.github.com/users/zdyupup/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 777173273, "node_id": "MDU6TGFiZWw3NzcxNzMyNzM=", "url": "https://api.github.com/repos/espnet/espnet/labels/Bug", "name": "Bug", "color": "ee0701", "default": false, "description": "bug should be fixed"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2022-08-03T02:54:51Z", "updated_at": "2022-08-03T03:30:20Z", "closed_at": "2022-08-03T03:30:20Z", "author_association": "NONE", "active_lock_reason": null, "body": "I'm running librispeech-asr1 recipe use espnet in docker, the GPU device is 2 Tasla P100, but the speed of running lm_train.py  is very slow,\r\nhere are few logs about it, could you tell me whether the speech is right or not? and how can I improve it?\r\n\r\n# lm_train.py --config conf/lm.yaml --ngpu 2 --backend pytorch --verbose 1 --outdir exp/train_rnnlm_pytorch_lm_unigram5000_ngpu2 --tensorboard-dir tensorboard/train_rnnlm_pytorch_lm_unigram5000_ngpu2 --train-label data/local/lm_train_unigram5000/train.txt --valid-label data/local/lm_train_unigram5000/valid.txt --resume --dict data/lang_char/train_960_unigram5000_units.txt --dump-hdf5-path data/local/lm_train_unigram5000 \r\n# Started at Tue Aug  2 08:52:29 UTC 2022\r\n#\r\n2022-08-02 08:52:32,099 (lm_train:254) INFO: ngpu: 2\r\n2022-08-02 08:52:32,099 (lm_train:257) INFO: python path = /espnet/tools/s3prl:\r\n2022-08-02 08:52:32,104 (lm_train:274) INFO: backend = pytorch\r\n2022-08-02 08:52:33,045 (lm:217) INFO: torch version = 1.9.0+cu111\r\n2022-08-02 08:52:33,046 (deterministic_utils:26) INFO: torch type check is disabled\r\n2022-08-02 08:52:34,990 (lm_utils:45) INFO: reading text dataset: data/local/lm_train_unigram5000/valid.txt\r\n\r\n\r\n2022-08-02 09:05:13,317 (lm_utils:49) INFO: saving binary dataset: data/local/lm_train_unigram5000/train.txt.h5\r\n2022-08-02 09:07:33,947 (lm:235) INFO: #vocab = 5002\r\n2022-08-02 09:07:33,947 (lm:236) INFO: #sentences in the training data = 40699491\r\n2022-08-02 09:07:33,947 (lm:237) INFO: #tokens in the training data = 1022396479\r\n2022-08-02 09:07:33,948 (lm:240) INFO: oov rate in the training data = 0.00 %\r\n2022-08-02 09:07:33,948 (lm:242) INFO: #sentences in the validation data = 5542\r\n2022-08-02 09:07:33,948 (lm:243) INFO: #tokens in the validation data = 128689\r\n2022-08-02 09:07:33,948 (lm:245) INFO: oov rate in the validation data = 0.00 %\r\n2022-08-02 09:07:33,948 (lm:253) INFO: batch size is automatically increased (32 -> 64)\r\n2022-08-02 09:08:14,356 (lm:268) INFO: #iterations per epoch = 767344\r\n2022-08-02 09:08:14,356 (lm:269) INFO: #total iterations = 38367200\r\n2022-08-02 09:08:14,404 (encoder:177) INFO: encoder self-attention layer type = self-attention\r\n2022-08-02 09:08:18,308 (transformer:124) INFO: Tie weights set to False\r\n2022-08-02 09:08:18,308 (transformer:125) INFO: Dropout set to 0.0\r\n2022-08-02 09:08:18,308 (transformer:126) INFO: Emb Dropout set to 0.0\r\n2022-08-02 09:08:18,309 (transformer:127) INFO: Att Dropout set to 0.0\r\n2022-08-02 09:08:22,553 (lm:285) INFO: writing a model config file to exp/train_rnnlm_pytorch_lm_unigram5000_ngpu2/model.json\r\n2022-08-02 09:08:22,568 (lm:298) WARNING: num. model params: 53,712,522 (num. trained: 53,712,522 (100.0%))\r\n\r\n\r\n\u001b[J0           290500      3.78372     41.0679                     63174.7       \r\n\u001b[J     total [..................................................]  0.76%\r\nthis epoch [##################................................] 37.86%\r\n    290500 iter, 0 epoch / 50 epochs\r\n     4.588 iters/sec. Estimated time to finish: 96 days, 1:18:54.947484.\r\n\u001b[4A\u001b[J0           290600      3.724       40.0387                     63195         \r\n\u001b[J     total [..................................................]  0.76%\r\nthis epoch [##################................................] 37.87%\r\n    290600 iter, 0 epoch / 50 epochs\r\n    4.5918 iters/sec. Estimated time to finish: 95 days, 23:24:53.089227.\r\n\u001b[4A\u001b[J0           290700      3.68717     39.3019                     63214.7       \r\n\u001b[J     total [..................................................]  0.76%\r\nthis epoch [##################................................] 37.88%\r\n    290700 iter, 0 epoch / 50 epochs\r\n     4.595 iters/sec. Estimated time to finish: 95 days, 21:48:29.133048.\r\n\u001b[4A\u001b[J0           290800      3.71924     40.1                        63236.4       \r\n\u001b[J     total [..................................................]  0.76%\r\nthis epoch [##################................................] 37.90%\r\n    290800 iter, 0 epoch / 50 epochs\r\n    4.5939 iters/sec. Estimated time to finish: 95 days, 22:21:58.568098.\r\n\u001b[4A\u001b[J0           290900      3.74183     40.977                      63257.1       \r\n\u001b[J     total [..................................................]  0.76%\r\nthis epoch [##################................................] 37.91%\r\n    290900 iter, 0 epoch / 50 epochs\r\n    4.5969 iters/sec. Estimated time to finish: 95 days, 20:51:39.737654.\r\n\u001b[4A", "reactions": {"url": "https://api.github.com/repos/espnet/espnet/issues/4554/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/espnet/espnet/issues/4554/timeline", "performed_via_github_app": null, "state_reason": "not_planned"}, {"url": "https://api.github.com/repos/espnet/espnet/issues/4542", "repository_url": "https://api.github.com/repos/espnet/espnet", "labels_url": "https://api.github.com/repos/espnet/espnet/issues/4542/labels{/name}", "comments_url": "https://api.github.com/repos/espnet/espnet/issues/4542/comments", "events_url": "https://api.github.com/repos/espnet/espnet/issues/4542/events", "html_url": "https://github.com/espnet/espnet/issues/4542", "id": 1318951711, "node_id": "I_kwDOBsxW2c5OnZsf", "number": 4542, "title": "transducer loss impl formula diff in cpu and gpu", "user": {"login": "zh794390558", "id": 3038472, "node_id": "MDQ6VXNlcjMwMzg0NzI=", "avatar_url": "https://avatars.githubusercontent.com/u/3038472?v=4", "gravatar_id": "", "url": "https://api.github.com/users/zh794390558", "html_url": "https://github.com/zh794390558", "followers_url": "https://api.github.com/users/zh794390558/followers", "following_url": "https://api.github.com/users/zh794390558/following{/other_user}", "gists_url": "https://api.github.com/users/zh794390558/gists{/gist_id}", "starred_url": "https://api.github.com/users/zh794390558/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/zh794390558/subscriptions", "organizations_url": "https://api.github.com/users/zh794390558/orgs", "repos_url": "https://api.github.com/users/zh794390558/repos", "events_url": "https://api.github.com/users/zh794390558/events{/privacy}", "received_events_url": "https://api.github.com/users/zh794390558/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 777173273, "node_id": "MDU6TGFiZWw3NzcxNzMyNzM=", "url": "https://api.github.com/repos/espnet/espnet/labels/Bug", "name": "Bug", "color": "ee0701", "default": false, "description": "bug should be fixed"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2022-07-27T02:48:03Z", "updated_at": "2022-07-27T06:08:39Z", "closed_at": "2022-07-27T06:08:39Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "@b-flo I read the source of transducer loss impl, but confused with cpu and gpu grad implementation, which has `Tp grad = exp(alphas[col] + betas[col] + logpk - logll[mb]);` in gpu grad kernel, but not in cpu. Can you give some explanation for that, thx very much.", "reactions": {"url": "https://api.github.com/repos/espnet/espnet/issues/4542/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/espnet/espnet/issues/4542/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/espnet/espnet/issues/4535", "repository_url": "https://api.github.com/repos/espnet/espnet", "labels_url": "https://api.github.com/repos/espnet/espnet/issues/4535/labels{/name}", "comments_url": "https://api.github.com/repos/espnet/espnet/issues/4535/comments", "events_url": "https://api.github.com/repos/espnet/espnet/issues/4535/events", "html_url": "https://github.com/espnet/espnet/issues/4535", "id": 1317651821, "node_id": "I_kwDOBsxW2c5OicVt", "number": 4535, "title": "Gibberish output while using average checkpoints for transducers", "user": {"login": "vinitunni", "id": 1404235, "node_id": "MDQ6VXNlcjE0MDQyMzU=", "avatar_url": "https://avatars.githubusercontent.com/u/1404235?v=4", "gravatar_id": "", "url": "https://api.github.com/users/vinitunni", "html_url": "https://github.com/vinitunni", "followers_url": "https://api.github.com/users/vinitunni/followers", "following_url": "https://api.github.com/users/vinitunni/following{/other_user}", "gists_url": "https://api.github.com/users/vinitunni/gists{/gist_id}", "starred_url": "https://api.github.com/users/vinitunni/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/vinitunni/subscriptions", "organizations_url": "https://api.github.com/users/vinitunni/orgs", "repos_url": "https://api.github.com/users/vinitunni/repos", "events_url": "https://api.github.com/users/vinitunni/events{/privacy}", "received_events_url": "https://api.github.com/users/vinitunni/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 777173273, "node_id": "MDU6TGFiZWw3NzcxNzMyNzM=", "url": "https://api.github.com/repos/espnet/espnet/labels/Bug", "name": "Bug", "color": "ee0701", "default": false, "description": "bug should be fixed"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2022-07-26T03:37:18Z", "updated_at": "2022-07-26T10:27:58Z", "closed_at": "2022-07-26T09:57:11Z", "author_association": "NONE", "active_lock_reason": null, "body": "**Describe the bug**\r\nWhen using the average checkpoints option for RNN-Transducers, Inference stage gives gibberish results. THis was primarily noticed when trying to train our own models. But I am seeing this issue with PreTrained RNNT model too (librispeech pretrained RNNT model). However, to ensure there is no issue of dictionary or encoding, I am able to use pre-trained \"conformer-sp\" model to get proper outputs.\r\nBecause the problem is seen with pretrained models too, I am not sure how to fix/diagnose the issue on my end.\r\n\r\n\r\n**Basic environments:**\r\n- OS information: Linux 5.4.0-94-generic 106-Ubuntu SMP Thu Jan 6 23:58:14 UTC 2022 x86_64\r\n- python version: `3.8.10 (default, Mar 15 2022, 12:22:08)  [GCC 9.4.0]`\r\n- espnet version: `espnet 0.10.4`\r\n- pytorch version: `pytorch 1.10.0+cu113`\r\n - Git commit eee2566f2395d676e3978376315a4cd116a4e335\r\nAuthor: Tomoki Hayashi <hayashi.tomoki@g.sp.m.is.nagoya-u.ac.jp>\r\nDate:   Wed Nov 10 17:23:24 2021 +0900 \r\n\r\nTo Reproduce:\r\n1) Run inference on pretrained RNNT models with averaging checkpoints\r\n\r\n**Error logs**\r\nOn RNNT pretrained\r\n'''\r\n2022-07-26 08:39:54,657 (asr:1128) INFO: (1/271) decoding 1272-128104-0000\r\n2022-07-26 08:40:07,244 (asr_utils:895) INFO: groundtruth: MISTER QUILTER IS THE APOSTLE OF THE MIDDLE CLASSES AND WE ARE GLAD TO WELCOME HIS GOSPEL\r\n2022-07-26 08:40:07,244 (asr_utils:896) INFO: prediction : \u2581A\u2581ASCENT\u2581OF\u2581THOSE\u2581HESSEXUASIVELUOUS\u2581A\r\n2022-07-26 08:40:07,244 (asr:1128) INFO: (2/271) decoding 1272-128104-0001\r\n2022-07-26 08:40:19,657 (asr_utils:895) INFO: groundtruth: NOR IS MISTER QUILTER'S MANNER LESS INTERESTING THAN HIS MATTER\r\n2022-07-26 08:40:19,657 (asr_utils:896) INFO: prediction : \u2581A\u2581ZEALOUSLY\u2581AS\u2581UM\u2581SOME\r\n'''\r\nOn Conformer Pretrained\r\n'''\r\n2022-07-26 08:24:37,870 (asr:1128) INFO: (1/271) decoding 1272-128104-0000\r\n2022-07-26 08:24:38,668 (e2e_asr_transformer:329) INFO: input lengths: 145\r\n2022-07-26 08:24:38,668 (e2e_asr_transformer:345) INFO: max output length: 145\r\n2022-07-26 08:24:38,668 (e2e_asr_transformer:346) INFO: min output length: 0\r\n2022-07-26 08:26:19,425 (e2e_asr_transformer:475) INFO: end detected at 34\r\n2022-07-26 08:26:19,439 (e2e_asr_transformer:508) INFO: total log probability: -1.961397159844637\r\n2022-07-26 08:26:19,439 (e2e_asr_transformer:509) INFO: normalized log probability: -0.0817248816601932\r\n2022-07-26 08:26:19,440 (asr_utils:895) INFO: groundtruth: MISTER QUILTER IS THE APOSTLE OF THE MIDDLE CLASSES AND WE ARE GLAD TO WELCOME HIS GOSPEL\r\n2022-07-26 08:26:19,440 (asr_utils:896) INFO: prediction : \u2581MISTER\u2581QUILTER\u2581IS\u2581THE\u2581APOSTLE\u2581OF\u2581THE\u2581MIDDLE\u2581CLASSES\u2581AND\u2581WE\u2581ARE\u2581GLAD\u2581TO\u2581WELCOME\u2581HIS\u2581GOSPEL<eos>\r\n2022-07-26 08:26:19,440 (asr:1128) INFO: (2/271) decoding 1272-128104-0001\r\n2022-07-26 08:26:21,845 (e2e_asr_transformer:329) INFO: input lengths: 119\r\n2022-07-26 08:26:21,846 (e2e_asr_transformer:345) INFO: max output length: 119\r\n2022-07-26 08:26:21,846 (e2e_asr_transformer:346) INFO: min output length: 0\r\n2022-07-26 08:27:35,633 (e2e_asr_transformer:475) INFO: end detected at 19\r\n2022-07-26 08:27:35,643 (e2e_asr_transformer:508) INFO: total log probability: -2.5117600932717323\r\n2022-07-26 08:27:35,643 (e2e_asr_transformer:509) INFO: normalized log probability: -0.15698500582948327\r\n2022-07-26 08:27:35,643 (asr_utils:895) INFO: groundtruth: NOR IS MISTER QUILTER'S MANNER LESS INTERESTING THAN HIS MATTER\r\n2022-07-26 08:27:35,644 (asr_utils:896) INFO: prediction : \u2581NOR\u2581IS\u2581MISTER\u2581QUILTER'S\u2581MANNER\u2581LESS\u2581INTERESTING\u2581THAN\u2581HIS\u2581MATTER<eos>\r\n\r\n'''\r\n", "reactions": {"url": "https://api.github.com/repos/espnet/espnet/issues/4535/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/espnet/espnet/issues/4535/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/espnet/espnet/issues/4527", "repository_url": "https://api.github.com/repos/espnet/espnet", "labels_url": "https://api.github.com/repos/espnet/espnet/issues/4527/labels{/name}", "comments_url": "https://api.github.com/repos/espnet/espnet/issues/4527/comments", "events_url": "https://api.github.com/repos/espnet/espnet/issues/4527/events", "html_url": "https://github.com/espnet/espnet/issues/4527", "id": 1315765723, "node_id": "I_kwDOBsxW2c5ObP3b", "number": 4527, "title": "Problem decoding with a Transformer LM.", "user": {"login": "picheny-nyu", "id": 55798528, "node_id": "MDQ6VXNlcjU1Nzk4NTI4", "avatar_url": "https://avatars.githubusercontent.com/u/55798528?v=4", "gravatar_id": "", "url": "https://api.github.com/users/picheny-nyu", "html_url": "https://github.com/picheny-nyu", "followers_url": "https://api.github.com/users/picheny-nyu/followers", "following_url": "https://api.github.com/users/picheny-nyu/following{/other_user}", "gists_url": "https://api.github.com/users/picheny-nyu/gists{/gist_id}", "starred_url": "https://api.github.com/users/picheny-nyu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/picheny-nyu/subscriptions", "organizations_url": "https://api.github.com/users/picheny-nyu/orgs", "repos_url": "https://api.github.com/users/picheny-nyu/repos", "events_url": "https://api.github.com/users/picheny-nyu/events{/privacy}", "received_events_url": "https://api.github.com/users/picheny-nyu/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 777173273, "node_id": "MDU6TGFiZWw3NzcxNzMyNzM=", "url": "https://api.github.com/repos/espnet/espnet/labels/Bug", "name": "Bug", "color": "ee0701", "default": false, "description": "bug should be fixed"}, {"id": 2519100905, "node_id": "MDU6TGFiZWwyNTE5MTAwOTA1", "url": "https://api.github.com/repos/espnet/espnet/labels/RNNT", "name": "RNNT", "color": "0e8a16", "default": false, "description": "(RNN) transducer related issue"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2022-07-23T23:27:06Z", "updated_at": "2022-07-25T06:09:34Z", "closed_at": "2022-07-25T06:09:34Z", "author_association": "NONE", "active_lock_reason": null, "body": "**Describe the bug**\r\nTraining seems to work fine for the RNNT but then I get this error. Please help! I can attach whatever files you need to examine. \r\n\r\nThanks\r\nMichael\r\n\r\n\r\n**Error logs**\r\n\r\n```bash\r\n# python3 -m espnet2.bin.asr_inference --batch_size 1 --ngpu 0 --data_path_and_name_and_type dump/raw/dev2/wav.scp,speech,sound --key_file exp/asr_train_rnnt_conformer_raw_en_bpe100_sp/decode_rnnt_conformer_lm_lm_train_lm_transformer2_en_bpe100_valid.loss.ave_asr_model_valid.loss.ave/dev2/logdir/keys.1.scp --asr_train_config exp/asr_train_rnnt_conformer_raw_en_bpe100_sp/config.yaml --asr_model_file exp/asr_train_rnnt_conformer_raw_en_bpe100_sp/valid.loss.ave.pth --output_dir exp/asr_train_rnnt_conformer_raw_en_bpe100_sp/decode_rnnt_conformer_lm_lm_train_lm_transformer2_en_bpe100_valid.loss.ave_asr_model_valid.loss.ave/dev2/logdir/output.1 --config conf/decode_rnnt_conformer.yaml --lm_train_config exp/lm_train_lm_transformer2_en_bpe100/config.yaml --lm_file exp/lm_train_lm_transformer2_en_bpe100/valid.loss.ave.pth \r\n# Started at Sat Jul 23 18:12:18 EDT 2022\r\n#\r\n/ext3/miniconda3/bin/python3 /vast/map22/espnet/espnet2/bin/asr_inference.py --batch_size 1 --ngpu 0 --data_path_and_name_and_type dump/raw/dev2/wav.scp,speech,sound --key_file exp/asr_train_rnnt_conformer_raw_en_bpe100_sp/decode_rnnt_conformer_lm_lm_train_lm_transformer2_en_bpe100_valid.loss.ave_asr_model_valid.loss.ave/dev2/logdir/keys.1.scp --asr_train_config exp/asr_train_rnnt_conformer_raw_en_bpe100_sp/config.yaml --asr_model_file exp/asr_train_rnnt_conformer_raw_en_bpe100_sp/valid.loss.ave.pth --output_dir exp/asr_train_rnnt_conformer_raw_en_bpe100_sp/decode_rnnt_conformer_lm_lm_train_lm_transformer2_en_bpe100_valid.loss.ave_asr_model_valid.loss.ave/dev2/logdir/output.1 --config conf/decode_rnnt_conformer.yaml --lm_train_config exp/lm_train_lm_transformer2_en_bpe100/config.yaml --lm_file exp/lm_train_lm_transformer2_en_bpe100/valid.loss.ave.pth\r\n2022-07-23 18:12:32,602 (asr:411) INFO: Vocabulary size: 100\r\n2022-07-23 18:12:32,714 (conformer_encoder:137) WARNING: Using legacy_rel_pos and it will be deprecated in the future.\r\n2022-07-23 18:12:32,783 (conformer_encoder:237) WARNING: Using legacy_rel_selfattn and it will be deprecated in the future.\r\n2022-07-23 18:12:36,016 (lm:199) INFO: Vocabulary size: 100\r\n2022-07-23 18:12:36,017 (encoder:172) INFO: encoder self-attention layer type = self-attention\r\n2022-07-23 18:12:37,565 (asr_inference:199) INFO: Text tokenizer: SentencepiecesTokenizer(model=\"data/en_token_list/bpe_unigram100/bpe.model\")\r\n/vast/map22/espnet/espnet2/layers/stft.py:166: UserWarning: __floordiv__ is deprecated, and its behavior will change in a future version of pytorch. It currently rounds toward 0 (like the 'trunc' function NOT 'floor'). This results in incorrect rounding for negative values. To keep the current behavior, use torch.div(a, b, rounding_mode='trunc'), or for actual floor division, use torch.div(a, b, rounding_mode='floor').\r\n  olens = (ilens - self.n_fft) // self.hop_length + 1\r\nTraceback (most recent call last):\r\n  File \"/ext3/miniconda3/lib/python3.9/runpy.py\", line 197, in _run_module_as_main\r\n    return _run_code(code, main_globals, None,\r\n  File \"/ext3/miniconda3/lib/python3.9/runpy.py\", line 87, in _run_code\r\n    exec(code, run_globals)\r\n  File \"/vast/map22/espnet/espnet2/bin/asr_inference.py\", line 609, in <module>\r\n    main()\r\n  File \"/vast/map22/espnet/espnet2/bin/asr_inference.py\", line 605, in main\r\n    inference(**kwargs)\r\n  File \"/vast/map22/espnet/espnet2/bin/asr_inference.py\", line 425, in inference\r\n    results = speech2text(**batch)\r\n  File \"/ext3/miniconda3/lib/python3.9/site-packages/torch/autograd/grad_mode.py\", line 28, in decorate_context\r\n    return func(*args, **kwargs)\r\n  File \"/vast/map22/espnet/espnet2/bin/asr_inference.py\", line 255, in __call__\r\n    nbest_hyps = self.beam_search_transducer(enc[0])\r\n  File \"/vast/map22/espnet/espnet2/asr/transducer/beam_search_transducer.py\", line 142, in __call__\r\n    nbest_hyps = self.search_algorithm(enc_out)\r\n  File \"/vast/map22/espnet/espnet2/asr/transducer/beam_search_transducer.py\", line 281, in default_beam_search\r\n    lm_scores, lm_state = self.lm.score(\r\n  File \"/vast/map22/espnet/espnet2/lm/transformer_lm.py\", line 86, in score\r\n    h, _, cache = self.encoder.forward_one_step(\r\n  File \"/vast/map22/espnet/espnet/nets/pytorch_backend/transformer/encoder.py\", line 370, in forward_one_step\r\n    xs, masks = e(xs, masks, cache=c)\r\n  File \"/ext3/miniconda3/lib/python3.9/site-packages/torch/nn/modules/module.py\", line 1102, in _call_impl\r\n    return forward_call(*input, **kwargs)\r\n  File \"/vast/map22/espnet/espnet/nets/pytorch_backend/transformer/encoder_layer.py\", line 95, in forward\r\n    assert cache.shape == (x.shape[0], x.shape[1] - 1, self.size)\r\nAssertionError\r\n# Accounting: time=23 threads=1\r\n# Ended (code 1) at Sat Jul 23 18:12:41 EDT 2022, elapsed time 23 seconds\r\n```", "reactions": {"url": "https://api.github.com/repos/espnet/espnet/issues/4527/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/espnet/espnet/issues/4527/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/espnet/espnet/issues/4518", "repository_url": "https://api.github.com/repos/espnet/espnet", "labels_url": "https://api.github.com/repos/espnet/espnet/issues/4518/labels{/name}", "comments_url": "https://api.github.com/repos/espnet/espnet/issues/4518/comments", "events_url": "https://api.github.com/repos/espnet/espnet/issues/4518/events", "html_url": "https://github.com/espnet/espnet/issues/4518", "id": 1309504769, "node_id": "I_kwDOBsxW2c5ODXUB", "number": 4518, "title": "About the use of run.pl", "user": {"login": "semicarryispig", "id": 7950895, "node_id": "MDQ6VXNlcjc5NTA4OTU=", "avatar_url": "https://avatars.githubusercontent.com/u/7950895?v=4", "gravatar_id": "", "url": "https://api.github.com/users/semicarryispig", "html_url": "https://github.com/semicarryispig", "followers_url": "https://api.github.com/users/semicarryispig/followers", "following_url": "https://api.github.com/users/semicarryispig/following{/other_user}", "gists_url": "https://api.github.com/users/semicarryispig/gists{/gist_id}", "starred_url": "https://api.github.com/users/semicarryispig/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/semicarryispig/subscriptions", "organizations_url": "https://api.github.com/users/semicarryispig/orgs", "repos_url": "https://api.github.com/users/semicarryispig/repos", "events_url": "https://api.github.com/users/semicarryispig/events{/privacy}", "received_events_url": "https://api.github.com/users/semicarryispig/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 777173273, "node_id": "MDU6TGFiZWw3NzcxNzMyNzM=", "url": "https://api.github.com/repos/espnet/espnet/labels/Bug", "name": "Bug", "color": "ee0701", "default": false, "description": "bug should be fixed"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2022-07-19T13:14:00Z", "updated_at": "2022-07-20T07:26:28Z", "closed_at": "2022-07-20T03:25:42Z", "author_association": "NONE", "active_lock_reason": null, "body": "When run the code of espnet, I get the log below:\r\n```\r\nstage 1: Feature Generation\r\n~/work/espnet/egs/an4/tts1/../../../utils/make_fbank.sh --cmd run.pl --nj 4 --fs 16000 --fmax  --fmin  --n_fft 1024 --n_shift 256 --win_length  --n_mels 80 data/train exp/make_fbank/train fbank\r\nutils/validate_data_dir.sh: Successfully validated data-directory data/train\r\n~/work/espnet/egs/an4/tts1/../../../utils/make_fbank.sh: [info]: no segments file exists: assuming pcm.scp indexed by utterance.\r\nusage: run.pl log-file command-line arguments... at utils/parallel/run.pl line 26.\r\n```\r\n\r\nIt gets error when come acoss the run.pl command. \r\n\r\nI find that in kaldi https://github.com/kaldi-asr/kaldi/tree/master/egs/wsj/s5/steps/make_fbank.sh\uff0cthe code looks like this:\r\n![image](https://user-images.githubusercontent.com/7950895/179758630-e7134da6-ae1f-45c8-b731-08e31388bd2f.png)\r\n\r\nwhile in espnet, the code looks like this:\r\n![image](https://user-images.githubusercontent.com/7950895/179758796-2b2e890c-7ca7-44e0-8c5e-f0c0bf7ead68.png)\r\nit replace the command with a python script\r\n\r\nHow can I make the code here execute smoothly?", "reactions": {"url": "https://api.github.com/repos/espnet/espnet/issues/4518/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/espnet/espnet/issues/4518/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/espnet/espnet/issues/4502", "repository_url": "https://api.github.com/repos/espnet/espnet", "labels_url": "https://api.github.com/repos/espnet/espnet/issues/4502/labels{/name}", "comments_url": "https://api.github.com/repos/espnet/espnet/issues/4502/comments", "events_url": "https://api.github.com/repos/espnet/espnet/issues/4502/events", "html_url": "https://github.com/espnet/espnet/issues/4502", "id": 1300198190, "node_id": "I_kwDOBsxW2c5Nf3Mu", "number": 4502, "title": "SXSXDX    ", "user": {"login": "linhthuy98", "id": 107536385, "node_id": "U_kgDOBmjgAQ", "avatar_url": "https://avatars.githubusercontent.com/u/107536385?v=4", "gravatar_id": "", "url": "https://api.github.com/users/linhthuy98", "html_url": "https://github.com/linhthuy98", "followers_url": "https://api.github.com/users/linhthuy98/followers", "following_url": "https://api.github.com/users/linhthuy98/following{/other_user}", "gists_url": "https://api.github.com/users/linhthuy98/gists{/gist_id}", "starred_url": "https://api.github.com/users/linhthuy98/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/linhthuy98/subscriptions", "organizations_url": "https://api.github.com/users/linhthuy98/orgs", "repos_url": "https://api.github.com/users/linhthuy98/repos", "events_url": "https://api.github.com/users/linhthuy98/events{/privacy}", "received_events_url": "https://api.github.com/users/linhthuy98/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 777173273, "node_id": "MDU6TGFiZWw3NzcxNzMyNzM=", "url": "https://api.github.com/repos/espnet/espnet/labels/Bug", "name": "Bug", "color": "ee0701", "default": false, "description": "bug should be fixed"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2022-07-11T04:42:01Z", "updated_at": "2022-07-11T06:51:22Z", "closed_at": "2022-07-11T06:51:22Z", "author_association": "NONE", "active_lock_reason": null, "body": "**Describe the bug**\r\nA clear and concise description of what the bug is.\r\n\r\n**Basic environments:**\r\n - OS information: [e.g., Linux 4.9.0-11-amd64 #1 SMP Debian 4.9.189-3+deb9u2 (2019-11-11) x86_64]\r\n - python version: [e.g. 3.7.3 (default, Mar 27 2019, 22:11:17) [GCC 7.3.0]]\r\n - espnet version: [e.g. espnet 0.8.0]\r\n - Git hash [e.g. b88e89fc7246fed4c2842b55baba884fe1b4ecc2]\r\n   - Commit date [e.g. Tue Sep 1 09:32:54 2020 -0400]\r\n - pytorch version [e.g. pytorch 1.4.0]\r\n \r\nYou can obtain them by the following command\r\n```\r\ncd <espnet-root>/tools\r\n. ./activate_python.sh\r\n\r\necho \"- OS information: `uname -mrsv`\"\r\npython3 << EOF\r\nimport sys, espnet, torch\r\npyversion = sys.version.replace('\\n', ' ')\r\nprint(f\"\"\"- python version: \\`{pyversion}\\`\r\n- espnet version: \\`espnet {espnet.__version__}\\`\r\n- pytorch version: \\`pytorch {torch.__version__}\\`\"\"\")\r\nEOF\r\ncat << EOF\r\n- Git hash: \\`$(git rev-parse HEAD)\\`\r\n  - Commit date: \\`$(git log -1 --format='%cd')\\`\r\nEOF\r\n```\r\n\r\n**Environments from `torch.utils.collect_env`:**\r\ne.g.,\r\n```\r\nCollecting environment information...\r\nPyTorch version: 1.4.0\r\nIs debug build: No\r\nCUDA used to build PyTorch: 10.0\r\n\r\nOS: CentOS Linux release 7.5.1804 (Core)\r\nGCC version: (GCC) 7.2.0\r\nCMake version: version 2.8.12.2\r\n\r\nPython version: 3.7\r\nIs CUDA available: Yes\r\nCUDA runtime version: 10.0.130\r\nGPU models and configuration:\r\nGPU 0: TITAN RTX\r\nGPU 1: TITAN RTX\r\nGPU 2: TITAN RTX\r\nGPU 3: TITAN RTX\r\n\r\nNvidia driver version: 440.33.01\r\ncuDNN version: Could not collect\r\n\r\nVersions of relevant libraries:\r\n[pip3] numpy==1.18.5\r\n[pip3] pytorch-ranger==0.1.1\r\n[pip3] pytorch-wpe==0.0.0\r\n[pip3] torch==1.4.0\r\n[pip3] torch-complex==0.1.1\r\n[pip3] torch-optimizer==0.0.1a14\r\n[pip3] torchaudio==0.4.0\r\n[pip3] warprnnt-pytorch==0.1\r\n[conda] blas                      1.0                         mkl\r\n[conda] mkl                       2020.1                      217\r\n[conda] mkl-service               2.3.0            py37he904b0f_0\r\n[conda] mkl_fft                   1.1.0            py37h23d657b_0\r\n[conda] mkl_random                1.1.1            py37h0573a6f_0\r\n[conda] pytorch                   1.4.0           py3.7_cuda10.0.130_cudnn7.6.3_0    pytorch\r\n[conda] pytorch-ranger            0.1.1                    pypi_0    pypi\r\n[conda] pytorch-wpe               0.0.0                    pypi_0    pypi\r\n[conda] torch-complex             0.1.1                    pypi_0    pypi\r\n[conda] torch-optimizer           0.0.1a14                 pypi_0    pypi\r\n[conda] torchaudio                0.4.0                    pypi_0    pypi\r\n[conda] warprnnt-pytorch          0.1                      pypi_0    pypi\r\n```\r\nYou can obtain them by the following command\r\n\r\n```\r\ncd <espnet-root>/tools\r\n. ./activate_python.sh\r\npython3 -m torch.utils.collect_env\r\n```\r\n\r\n**Task information:**\r\n - Task: [e.g., ASR, TTS, ST, ENH]\r\n - Recipe: [e.g. librispeech]\r\n - ESPnet1 or ESPnet2\r\n\r\n**To Reproduce**\r\nSteps to reproduce the behavior:\r\n1. move to a recipe directory, e.g., `cd egs/librispeech/asr1`\r\n2. execute `run.sh` with specific arguments, e.g., `run.sh --stage 3 --ngp 1`\r\n3. specify the error log, e.g., `exp/xxx/yyy.log`\r\n\r\n**Error logs**\r\nPaste the error logs. If applicable, add screenshots to help explain your problem.\r\n", "reactions": {"url": "https://api.github.com/repos/espnet/espnet/issues/4502/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/espnet/espnet/issues/4502/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/espnet/espnet/issues/4498", "repository_url": "https://api.github.com/repos/espnet/espnet", "labels_url": "https://api.github.com/repos/espnet/espnet/issues/4498/labels{/name}", "comments_url": "https://api.github.com/repos/espnet/espnet/issues/4498/comments", "events_url": "https://api.github.com/repos/espnet/espnet/issues/4498/events", "html_url": "https://github.com/espnet/espnet/issues/4498", "id": 1298673042, "node_id": "I_kwDOBsxW2c5NaC2S", "number": 4498, "title": "char_tokenizer use fixed space_symbol \"<space>\" instead of `self.space_symbol`", "user": {"login": "xiabingquan", "id": 53991699, "node_id": "MDQ6VXNlcjUzOTkxNjk5", "avatar_url": "https://avatars.githubusercontent.com/u/53991699?v=4", "gravatar_id": "", "url": "https://api.github.com/users/xiabingquan", "html_url": "https://github.com/xiabingquan", "followers_url": "https://api.github.com/users/xiabingquan/followers", "following_url": "https://api.github.com/users/xiabingquan/following{/other_user}", "gists_url": "https://api.github.com/users/xiabingquan/gists{/gist_id}", "starred_url": "https://api.github.com/users/xiabingquan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/xiabingquan/subscriptions", "organizations_url": "https://api.github.com/users/xiabingquan/orgs", "repos_url": "https://api.github.com/users/xiabingquan/repos", "events_url": "https://api.github.com/users/xiabingquan/events{/privacy}", "received_events_url": "https://api.github.com/users/xiabingquan/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 777173273, "node_id": "MDU6TGFiZWw3NzcxNzMyNzM=", "url": "https://api.github.com/repos/espnet/espnet/labels/Bug", "name": "Bug", "color": "ee0701", "default": false, "description": "bug should be fixed"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2022-07-08T08:27:35Z", "updated_at": "2022-07-08T13:01:05Z", "closed_at": "2022-07-08T13:01:05Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "**Describe the bug**\r\nA bug about the [char_tokenizer](https://github.com/espnet/espnet/blob/master/espnet2/text/char_tokenizer.py).\r\nIn the class `CharTokenizer`, the space_symbol is defined by `self.space_symbol`. However, in the method `text2tokens`t, it says\r\n\r\n```python\r\n                t = line[0]\r\n                if t == \" \":\r\n                    t = \"<space>\"\r\n                tokens.append(t)\r\n                line = line[1:]\r\n```\r\nIt means that the space symbol is fixed to be `<space>` instead of `self.space_symbol`\r\n\r\nIt should be\r\n\r\n```python\r\n                t = line[0]\r\n                if t == \" \":\r\n                    t = self.sapce_symbol\r\n                tokens.append(t)\r\n                line = line[1:]\r\n```\r\n\r\nIn this way, the settings of `sapce_symbol` can be in line with the method `tokens2text`:\r\n```python\r\ntokens = [t if t != self.space_symbol else \" \" for t in tokens]\r\n```\r\n", "reactions": {"url": "https://api.github.com/repos/espnet/espnet/issues/4498/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/espnet/espnet/issues/4498/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/espnet/espnet/issues/4482", "repository_url": "https://api.github.com/repos/espnet/espnet", "labels_url": "https://api.github.com/repos/espnet/espnet/issues/4482/labels{/name}", "comments_url": "https://api.github.com/repos/espnet/espnet/issues/4482/comments", "events_url": "https://api.github.com/repos/espnet/espnet/issues/4482/events", "html_url": "https://github.com/espnet/espnet/issues/4482", "id": 1289721579, "node_id": "I_kwDOBsxW2c5M35br", "number": 4482, "title": "Black formatting issue for test CLI ESPNET", "user": {"login": "chorongi", "id": 35532722, "node_id": "MDQ6VXNlcjM1NTMyNzIy", "avatar_url": "https://avatars.githubusercontent.com/u/35532722?v=4", "gravatar_id": "", "url": "https://api.github.com/users/chorongi", "html_url": "https://github.com/chorongi", "followers_url": "https://api.github.com/users/chorongi/followers", "following_url": "https://api.github.com/users/chorongi/following{/other_user}", "gists_url": "https://api.github.com/users/chorongi/gists{/gist_id}", "starred_url": "https://api.github.com/users/chorongi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/chorongi/subscriptions", "organizations_url": "https://api.github.com/users/chorongi/orgs", "repos_url": "https://api.github.com/users/chorongi/repos", "events_url": "https://api.github.com/users/chorongi/events{/privacy}", "received_events_url": "https://api.github.com/users/chorongi/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 777173273, "node_id": "MDU6TGFiZWw3NzcxNzMyNzM=", "url": "https://api.github.com/repos/espnet/espnet/labels/Bug", "name": "Bug", "color": "ee0701", "default": false, "description": "bug should be fixed"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2022-06-30T07:33:45Z", "updated_at": "2022-07-01T08:18:59Z", "closed_at": "2022-07-01T08:18:59Z", "author_association": "NONE", "active_lock_reason": null, "body": "**Describe the bug**\r\nPR error for git CLI test for Centos7 and Debian9 when already used black to reformat all my files.\r\n\r\n**Error logs**\r\nError Message is the following:\r\n![image](https://user-images.githubusercontent.com/35532722/176608263-e5f9090e-59c4-4d07-a7cc-3665fcdd1f56.png)\r\n\r\n\r\n**Basic environments:**\r\npython==3.7.13\r\nblack==22.6.0\r\n \r\n\r\n**Comments**\r\nI would like to know exactly which black version is used for CLI test on espnet! Also, currently I can only find ways to install black 22.6.0 (not able to install older versions) so installing an older version of black doesn't seem to be an option.\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/espnet/espnet/issues/4482/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/espnet/espnet/issues/4482/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/espnet/espnet/issues/4481", "repository_url": "https://api.github.com/repos/espnet/espnet", "labels_url": "https://api.github.com/repos/espnet/espnet/issues/4481/labels{/name}", "comments_url": "https://api.github.com/repos/espnet/espnet/issues/4481/comments", "events_url": "https://api.github.com/repos/espnet/espnet/issues/4481/events", "html_url": "https://github.com/espnet/espnet/issues/4481", "id": 1289540627, "node_id": "I_kwDOBsxW2c5M3NQT", "number": 4481, "title": "Error while uncompress model.v1.tar.gz", "user": {"login": "li563042811", "id": 22743415, "node_id": "MDQ6VXNlcjIyNzQzNDE1", "avatar_url": "https://avatars.githubusercontent.com/u/22743415?v=4", "gravatar_id": "", "url": "https://api.github.com/users/li563042811", "html_url": "https://github.com/li563042811", "followers_url": "https://api.github.com/users/li563042811/followers", "following_url": "https://api.github.com/users/li563042811/following{/other_user}", "gists_url": "https://api.github.com/users/li563042811/gists{/gist_id}", "starred_url": "https://api.github.com/users/li563042811/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/li563042811/subscriptions", "organizations_url": "https://api.github.com/users/li563042811/orgs", "repos_url": "https://api.github.com/users/li563042811/repos", "events_url": "https://api.github.com/users/li563042811/events{/privacy}", "received_events_url": "https://api.github.com/users/li563042811/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 777173273, "node_id": "MDU6TGFiZWw3NzcxNzMyNzM=", "url": "https://api.github.com/repos/espnet/espnet/labels/Bug", "name": "Bug", "color": "ee0701", "default": false, "description": "bug should be fixed"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2022-06-30T03:47:18Z", "updated_at": "2022-07-06T11:05:33Z", "closed_at": "2022-07-06T11:05:33Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi,\r\n    I'm using the egs/lrs/avsr1. But when I run run.sh and it exit at step 1 like this\r\n\r\nstage 1: Data preparation\r\nDownload pretrained video feature extractor and check directory configuration\r\n--2022-06-30 11:38:31--  https://docs.google.com/uc?export=download&confirm=t&id=1ITgdZoa8vQ7lDwi1jLziYGXOyUtgE2ow\r\nConnecting to 172.18.18.131:80... connected.\r\nProxy request sent, awaiting response... 303 See Other\r\nLocation: https://doc-0k-3k-docs.googleusercontent.com/docs/securesc/ha0ro937gcuc7l7deffksulhg5h7mbp1/qpbdpr3ivh9ldo31ktoh4tupbq16831p/1656560250000/04626072373573315601/*/1ITgdZoa8vQ7lDwi1jLziYGXOyUtgE2ow?e=download&uuid=5dfc9b48-b0ae-45a3-9816-f3b65a6994fb [following]\r\nWarning: wildcards not supported in HTTP.\r\n--2022-06-30 11:38:31--  https://doc-0k-3k-docs.googleusercontent.com/docs/securesc/ha0ro937gcuc7l7deffksulhg5h7mbp1/qpbdpr3ivh9ldo31ktoh4tupbq16831p/1656560250000/04626072373573315601/*/1ITgdZoa8vQ7lDwi1jLziYGXOyUtgE2ow?e=download&uuid=5dfc9b48-b0ae-45a3-9816-f3b65a6994fb\r\nConnecting to 172.18.18.131:80... connected.\r\nProxy request sent, awaiting response... 200 OK\r\nLength: 707592192 (675M) [application/gzip]\r\nSaving to: 'model.v1.tar.gz'\r\n\r\n100%[==============================================================================================================================>] 707,592,192 5.75MB/s   in 1m 57s \r\n\r\n2022-06-30 11:40:29 (5.74 MB/s) - 'model.v1.tar.gz' saved [707592192/707592192]\r\n\r\n\r\ngzip: stdin: unexpected end of file\r\ntar: Unexpected EOF in archive\r\ntar: Unexpected EOF in archive\r\ntar: Error is not recoverable: exiting now\r\n\r\nI have tried many times but it all put this error. I don't know how to do with this.", "reactions": {"url": "https://api.github.com/repos/espnet/espnet/issues/4481/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/espnet/espnet/issues/4481/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/espnet/espnet/issues/4469", "repository_url": "https://api.github.com/repos/espnet/espnet", "labels_url": "https://api.github.com/repos/espnet/espnet/issues/4469/labels{/name}", "comments_url": "https://api.github.com/repos/espnet/espnet/issues/4469/comments", "events_url": "https://api.github.com/repos/espnet/espnet/issues/4469/events", "html_url": "https://github.com/espnet/espnet/issues/4469", "id": 1284206620, "node_id": "I_kwDOBsxW2c5Mi3Ac", "number": 4469, "title": "Symbolic link not working for AmericasNLP baseline", "user": {"login": "danperazzo", "id": 39570908, "node_id": "MDQ6VXNlcjM5NTcwOTA4", "avatar_url": "https://avatars.githubusercontent.com/u/39570908?v=4", "gravatar_id": "", "url": "https://api.github.com/users/danperazzo", "html_url": "https://github.com/danperazzo", "followers_url": "https://api.github.com/users/danperazzo/followers", "following_url": "https://api.github.com/users/danperazzo/following{/other_user}", "gists_url": "https://api.github.com/users/danperazzo/gists{/gist_id}", "starred_url": "https://api.github.com/users/danperazzo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/danperazzo/subscriptions", "organizations_url": "https://api.github.com/users/danperazzo/orgs", "repos_url": "https://api.github.com/users/danperazzo/repos", "events_url": "https://api.github.com/users/danperazzo/events{/privacy}", "received_events_url": "https://api.github.com/users/danperazzo/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 777173273, "node_id": "MDU6TGFiZWw3NzcxNzMyNzM=", "url": "https://api.github.com/repos/espnet/espnet/labels/Bug", "name": "Bug", "color": "ee0701", "default": false, "description": "bug should be fixed"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 9, "created_at": "2022-06-24T21:25:53Z", "updated_at": "2022-06-28T23:44:01Z", "closed_at": "2022-06-28T23:44:01Z", "author_association": "NONE", "active_lock_reason": null, "body": "**Describe the bug**\r\nI have been trying to test the baseline for the [AmericasNLP2022 competition,](https://github.com/espnet/espnet/tree/master/egs2/americasnlp22/asr1) and have been following the steps at [hugging_face](https://huggingface.co/espnet/americasnlp22-asr-gn). \r\n\r\nHowever, the symbolic link in `utils` seens to been broken, and this is causing it to not work in the run script.\r\n**Basic environments:**\r\n - OS information: [\\ubuntu 18.04\r\n - python version: 3.9\r\n - espnet version: Followed the commit at huggingFace\r\n\r\n**To Reproduce**\r\nSteps to reproduce the behavior:\r\n1.  `git clone --recursive  https://github.com/espnet/espnet.git`\r\n2. `cd espnet`\r\n3. `git checkout fc62b1ce3e50c5ef8a2ac8cedb0d92ac41df54ca`\r\n4. `pip install -e .`\r\n5. `cd egs2/americasnlp22/asr1`\r\n6. `./run.sh --skip_data_prep false --skip_train true --download_model espnet/americasnlp22-asr-gn`\r\n\r\n**Error logs**\r\n`022-06-24T18:14:51 (asr.sh:252:main) ./asr.sh --lang tav --ngpu 1 --nbpe 100 --use_lm false --max_wav_duration 38 --speed_perturb_factors 0.9 1.0 1.1 --feats_normalize utterance_mvn --asr_config conf/train_asr_transformer.yaml --inference_config conf/decode_asr.yaml --inference_asr_model valid.cer_ctc.best.pth --inference_nj 1 --gpu_inference true --local_data_opts --lang tav --train_set train_tav --valid_set dev_tav --test_sets dev_tav --lm_train_text data/train_tav/text --bpe_train_text data/train_tav/text --skip_data_prep false --skip_train true --download_model espnet/americasnlp22-asr-gn\r\n./asr.sh: line 255: utils/parse_options.sh: No such file or directory\r\n`\r\n", "reactions": {"url": "https://api.github.com/repos/espnet/espnet/issues/4469/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/espnet/espnet/issues/4469/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/espnet/espnet/issues/4465", "repository_url": "https://api.github.com/repos/espnet/espnet", "labels_url": "https://api.github.com/repos/espnet/espnet/issues/4465/labels{/name}", "comments_url": "https://api.github.com/repos/espnet/espnet/issues/4465/comments", "events_url": "https://api.github.com/repos/espnet/espnet/issues/4465/events", "html_url": "https://github.com/espnet/espnet/issues/4465", "id": 1283116257, "node_id": "I_kwDOBsxW2c5Meszh", "number": 4465, "title": "ModuleNotFoundError: No module named 'espnet2.diar.layers' in Colab SE demo", "user": {"login": "cycentum", "id": 13790803, "node_id": "MDQ6VXNlcjEzNzkwODAz", "avatar_url": "https://avatars.githubusercontent.com/u/13790803?v=4", "gravatar_id": "", "url": "https://api.github.com/users/cycentum", "html_url": "https://github.com/cycentum", "followers_url": "https://api.github.com/users/cycentum/followers", "following_url": "https://api.github.com/users/cycentum/following{/other_user}", "gists_url": "https://api.github.com/users/cycentum/gists{/gist_id}", "starred_url": "https://api.github.com/users/cycentum/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/cycentum/subscriptions", "organizations_url": "https://api.github.com/users/cycentum/orgs", "repos_url": "https://api.github.com/users/cycentum/repos", "events_url": "https://api.github.com/users/cycentum/events{/privacy}", "received_events_url": "https://api.github.com/users/cycentum/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 777173273, "node_id": "MDU6TGFiZWw3NzcxNzMyNzM=", "url": "https://api.github.com/repos/espnet/espnet/labels/Bug", "name": "Bug", "color": "ee0701", "default": false, "description": "bug should be fixed"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2022-06-24T00:46:10Z", "updated_at": "2022-06-27T06:53:53Z", "closed_at": "2022-06-27T06:53:53Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "When running the Colab notebook of SE demo, I encountered the error \r\n\r\n> ModuleNotFoundError: No module named 'espnet2.diar.layers'\r\n\r\nat \u201cEnhance your own pre-recordings\u201d cell.\r\n\r\nI found the error is caused by espnet/espnet2/diar and espnet/espnet2/layer not properly installed.\r\n\r\nIn my local environment, I could fix the error by adding __init__.py in these directories.\r\n\r\nCan I open a pull request to fix this bug?\r\n\r\n**To Reproduce**\r\nRun cells sequentially from the top in ESPnet SSE Demonstration.ipynb", "reactions": {"url": "https://api.github.com/repos/espnet/espnet/issues/4465/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/espnet/espnet/issues/4465/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/espnet/espnet/issues/4444", "repository_url": "https://api.github.com/repos/espnet/espnet", "labels_url": "https://api.github.com/repos/espnet/espnet/issues/4444/labels{/name}", "comments_url": "https://api.github.com/repos/espnet/espnet/issues/4444/comments", "events_url": "https://api.github.com/repos/espnet/espnet/issues/4444/events", "html_url": "https://github.com/espnet/espnet/issues/4444", "id": 1270343743, "node_id": "I_kwDOBsxW2c5Lt-g_", "number": 4444, "title": "No information about remaining time in train.log", "user": {"login": "Yerzhaisang", "id": 55043014, "node_id": "MDQ6VXNlcjU1MDQzMDE0", "avatar_url": "https://avatars.githubusercontent.com/u/55043014?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Yerzhaisang", "html_url": "https://github.com/Yerzhaisang", "followers_url": "https://api.github.com/users/Yerzhaisang/followers", "following_url": "https://api.github.com/users/Yerzhaisang/following{/other_user}", "gists_url": "https://api.github.com/users/Yerzhaisang/gists{/gist_id}", "starred_url": "https://api.github.com/users/Yerzhaisang/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Yerzhaisang/subscriptions", "organizations_url": "https://api.github.com/users/Yerzhaisang/orgs", "repos_url": "https://api.github.com/users/Yerzhaisang/repos", "events_url": "https://api.github.com/users/Yerzhaisang/events{/privacy}", "received_events_url": "https://api.github.com/users/Yerzhaisang/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 777173273, "node_id": "MDU6TGFiZWw3NzcxNzMyNzM=", "url": "https://api.github.com/repos/espnet/espnet/labels/Bug", "name": "Bug", "color": "ee0701", "default": false, "description": "bug should be fixed"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2022-06-14T06:57:18Z", "updated_at": "2022-06-22T10:30:38Z", "closed_at": "2022-06-22T10:30:37Z", "author_association": "NONE", "active_lock_reason": null, "body": "I believe in the log file there should be information about left time. I left below the full content of train.log.\r\n\r\npython3 -m espnet2.bin.lm_train --ngpu 1 --use_preprocessor true --bpemodel none --token_type char --token_list data/kz_token_list/char/tokens.txt --non_linguistic_symbols none --cleaner none --g2p none --valid_data_path_and_name_and_type dump/raw/dev/text,text,text --valid_shape_file exp/lm_stats_kz_char/valid/text_shape.char --fold_length 150 --resume true --output_dir exp/lm_train_lm_transformer_kz_char --config conf/train_lm_transformer.yaml --train_data_path_and_name_and_type dump/raw/lm_train.txt,text,text --train_shape_file exp/lm_stats_kz_char/train/text_shape.char --ngpu 1 --multiprocessing_distributed True \r\nStarted at Tue Jun 14 11:03:52 +06 2022\r\n\r\nWARNING:root:Torch AMP is not available on this platform\r\n/raid/yerzhaisang_taskali/my_work/espnet/tools/anaconda/envs/espnet/bin/python3 /raid/yerzhaisang_taskali/my_work/espnet/espnet2/bin/lm_train.py --ngpu 1 --use_preprocessor true --bpemodel none --token_type char --token_list data/kz_token_list/char/tokens.txt --non_linguistic_symbols none --cleaner none --g2p none --valid_data_path_and_name_and_type dump/raw/dev/text,text,text --valid_shape_file exp/lm_stats_kz_char/valid/text_shape.char --fold_length 150 --resume true --output_dir exp/lm_train_lm_transformer_kz_char --config conf/train_lm_transformer.yaml --train_data_path_and_name_and_type dump/raw/lm_train.txt,text,text --train_shape_file exp/lm_stats_kz_char/train/text_shape.char --ngpu 1 --multiprocessing_distributed True\r\n", "reactions": {"url": "https://api.github.com/repos/espnet/espnet/issues/4444/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/espnet/espnet/issues/4444/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/espnet/espnet/issues/4422", "repository_url": "https://api.github.com/repos/espnet/espnet", "labels_url": "https://api.github.com/repos/espnet/espnet/issues/4422/labels{/name}", "comments_url": "https://api.github.com/repos/espnet/espnet/issues/4422/comments", "events_url": "https://api.github.com/repos/espnet/espnet/issues/4422/events", "html_url": "https://github.com/espnet/espnet/issues/4422", "id": 1260590673, "node_id": "I_kwDOBsxW2c5LIxZR", "number": 4422, "title": "Espnet ST transformer model GPU decoding problem", "user": {"login": "Xiaoliang1223", "id": 92855996, "node_id": "U_kgDOBYjevA", "avatar_url": "https://avatars.githubusercontent.com/u/92855996?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Xiaoliang1223", "html_url": "https://github.com/Xiaoliang1223", "followers_url": "https://api.github.com/users/Xiaoliang1223/followers", "following_url": "https://api.github.com/users/Xiaoliang1223/following{/other_user}", "gists_url": "https://api.github.com/users/Xiaoliang1223/gists{/gist_id}", "starred_url": "https://api.github.com/users/Xiaoliang1223/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Xiaoliang1223/subscriptions", "organizations_url": "https://api.github.com/users/Xiaoliang1223/orgs", "repos_url": "https://api.github.com/users/Xiaoliang1223/repos", "events_url": "https://api.github.com/users/Xiaoliang1223/events{/privacy}", "received_events_url": "https://api.github.com/users/Xiaoliang1223/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 777173273, "node_id": "MDU6TGFiZWw3NzcxNzMyNzM=", "url": "https://api.github.com/repos/espnet/espnet/labels/Bug", "name": "Bug", "color": "ee0701", "default": false, "description": "bug should be fixed"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 9, "created_at": "2022-06-04T02:59:57Z", "updated_at": "2022-06-06T18:18:54Z", "closed_at": "2022-06-06T18:18:54Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hello, when I use ST Transformer  for GPU decoding, there is an error RuntimeError: Input type (torch.FloatTensor) and weight type (torch.cuda.FloatTensor) should be the same . I have tried to change run.sh like this:\r\n        ${decode_cmd} JOB=1:${nj} ${expdir}/${decode_dir}/log/decode.JOB.log \\\r\n            st_trans.py \\\r\n            --config ${decode_config} \\\r\n            --ngpu ${dec_ngpu} \\\r\n            --backend ${backend} \\\r\n            --batchsize 1 \\\r\n            --trans-json ${feat_trans_dir}/split${nj}utt/data_${bpemode}${nbpe}.JOB.json \\\r\n            --result-label ${expdir}/${decode_dir}/data.JOB.json \\\r\n            --model ${expdir}/results/${trans_model}\r\nYet the error would be like:\r\nNotImplementedError: Batch decoding is not supported yet.\r\n\r\nThen I tried to change decode.yaml to\r\nbatchsize: 1\r\nbeam-size: 10\r\npenalty: 0.6\r\nmaxlenratio: 0.3\r\nminlenratio: 0.0\r\napi: v2\r\nBut the RuntimeError remains.", "reactions": {"url": "https://api.github.com/repos/espnet/espnet/issues/4422/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/espnet/espnet/issues/4422/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/espnet/espnet/issues/4416", "repository_url": "https://api.github.com/repos/espnet/espnet", "labels_url": "https://api.github.com/repos/espnet/espnet/issues/4416/labels{/name}", "comments_url": "https://api.github.com/repos/espnet/espnet/issues/4416/comments", "events_url": "https://api.github.com/repos/espnet/espnet/issues/4416/events", "html_url": "https://github.com/espnet/espnet/issues/4416", "id": 1259079640, "node_id": "I_kwDOBsxW2c5LDAfY", "number": 4416, "title": "Covost2 recipe: lowercase.perl not found", "user": {"login": "sameerkhurana10", "id": 7698301, "node_id": "MDQ6VXNlcjc2OTgzMDE=", "avatar_url": "https://avatars.githubusercontent.com/u/7698301?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sameerkhurana10", "html_url": "https://github.com/sameerkhurana10", "followers_url": "https://api.github.com/users/sameerkhurana10/followers", "following_url": "https://api.github.com/users/sameerkhurana10/following{/other_user}", "gists_url": "https://api.github.com/users/sameerkhurana10/gists{/gist_id}", "starred_url": "https://api.github.com/users/sameerkhurana10/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sameerkhurana10/subscriptions", "organizations_url": "https://api.github.com/users/sameerkhurana10/orgs", "repos_url": "https://api.github.com/users/sameerkhurana10/repos", "events_url": "https://api.github.com/users/sameerkhurana10/events{/privacy}", "received_events_url": "https://api.github.com/users/sameerkhurana10/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 777173273, "node_id": "MDU6TGFiZWw3NzcxNzMyNzM=", "url": "https://api.github.com/repos/espnet/espnet/labels/Bug", "name": "Bug", "color": "ee0701", "default": false, "description": "bug should be fixed"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 9, "created_at": "2022-06-03T00:41:20Z", "updated_at": "2022-06-03T02:56:20Z", "closed_at": "2022-06-03T02:55:06Z", "author_association": "NONE", "active_lock_reason": null, "body": "hello,\r\n\r\nI was trying to run the covost2 recipe under egs2.\r\n\r\nWhen running the local/data.sh as follows:\r\n\r\n```\r\nbash -x local/data.sh --stage 1 --src_lang fr --tgt_lang en\r\n```\r\n\r\nI get the following issue:\r\n\r\n```\r\nlocal/data_prep_covost2.sh: line 62: lowercase.perl: command not found\r\nlocal/data_prep_covost2.sh: line 64: normalize-punctuation.perl: command not found\r\nlocal/data_prep_covost2.sh: line 70: lowercase.perl: command not found\r\nlocal/data_prep_covost2.sh: line 78: tokenizer.perl: command not found\r\nlocal/data_prep_covost2.sh: line 78: tokenizer.perl: command not found\r\nlocal/data_prep_covost2.sh: line 78: tokenizer.perl: command not found\r\nlocal/data_prep_covost2.sh: line 84: lowercase.perl: command not found\r\nlocal/data_prep_covost2.sh: line 86: lowercase.perl: command not found\r\nlocal/data_prep_covost2.sh: line 66: normalize-punctuation.perl: command not found\r\nlocal/data_prep_covost2.sh: line 70: lowercase.perl: command not found\r\nlocal/data_prep_covost2.sh: line 78: tokenizer.perl: command not found\r\nlocal/data_prep_covost2.sh: line 78: tokenizer.perl: command not found\r\nlocal/data_prep_covost2.sh: line 78: tokenizer.perl: command not found\r\nlocal/data_prep_covost2.sh: line 84: lowercase.perl: command not found\r\nlocal/data_prep_covost2.sh: line 86: lowercase.perl: command not found\r\n```\r\n\r\nMore info\r\n```\r\n>>> import espnet\r\n>>> espnet.__version__\r\n'202205'\r\n```", "reactions": {"url": "https://api.github.com/repos/espnet/espnet/issues/4416/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/espnet/espnet/issues/4416/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/espnet/espnet/issues/4396", "repository_url": "https://api.github.com/repos/espnet/espnet", "labels_url": "https://api.github.com/repos/espnet/espnet/issues/4396/labels{/name}", "comments_url": "https://api.github.com/repos/espnet/espnet/issues/4396/comments", "events_url": "https://api.github.com/repos/espnet/espnet/issues/4396/events", "html_url": "https://github.com/espnet/espnet/issues/4396", "id": 1250510974, "node_id": "I_kwDOBsxW2c5KiUh-", "number": 4396, "title": "AttributeError: 'NoneType' object has no attribute 'run'", "user": {"login": "ily6", "id": 97342412, "node_id": "U_kgDOBc1TzA", "avatar_url": "https://avatars.githubusercontent.com/u/97342412?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ily6", "html_url": "https://github.com/ily6", "followers_url": "https://api.github.com/users/ily6/followers", "following_url": "https://api.github.com/users/ily6/following{/other_user}", "gists_url": "https://api.github.com/users/ily6/gists{/gist_id}", "starred_url": "https://api.github.com/users/ily6/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ily6/subscriptions", "organizations_url": "https://api.github.com/users/ily6/orgs", "repos_url": "https://api.github.com/users/ily6/repos", "events_url": "https://api.github.com/users/ily6/events{/privacy}", "received_events_url": "https://api.github.com/users/ily6/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 777173273, "node_id": "MDU6TGFiZWw3NzcxNzMyNzM=", "url": "https://api.github.com/repos/espnet/espnet/labels/Bug", "name": "Bug", "color": "ee0701", "default": false, "description": "bug should be fixed"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2022-05-27T08:50:35Z", "updated_at": "2022-05-28T00:31:01Z", "closed_at": "2022-05-28T00:31:01Z", "author_association": "NONE", "active_lock_reason": null, "body": "I train conformer model using aishell recipe(ESPnet2) , but when in training stage , I got this:\r\n\r\n2022-05-26 21:31:26,160 (trainer:328) INFO: 50epoch results: [train] iter_time=6.764e-05, forward_time=0.043, loss_ctc=0.331, loss_att=0.502, acc=0.993, loss=0.225, backward_time=0.040, optim_step_time=0.038, optim0_lr0=1.133e-04, train_time=0.264, time=51 minutes and 57 seconds, total_count=1181200, gpu_max_cached_mem_GB=5.084, [valid] loss_ctc=6.020, cer_ctc=0.112, loss_att=3.802, acc=0.916, cer=0.107, wer=0.466, loss=4.467, time=23.6 seconds, total_count=25950, gpu_max_cached_mem_GB=5.084, [att_plot] time=31.79 seconds, total_count=0, gpu_max_cached_mem_GB=5.084\r\n2022-05-26 21:32:34,718 (trainer:374) INFO: There are no improvements in this epoch\r\n2022-05-26 21:32:34,731 (trainer:449) INFO: The training was finished at 50 epochs \r\n2022-05-26 21:32:34,755 (average_nbest_models:70) INFO: Averaging 10best models: criterion=\"valid.acc\": exp/asr_train_asr_conformer_raw_zh_char/valid.acc.ave_10best.pth\r\nTraceback (most recent call last):\r\n  File \"/Share/lli/espnet/tools/anaconda/envs/espnet/lib/python3.7/runpy.py\", line 193, in _run_module_as_main\r\n    \"__main__\", mod_spec)\r\n  File \"/Share/lli/espnet/tools/anaconda/envs/espnet/lib/python3.7/runpy.py\", line 85, in _run_code\r\n    exec(code, run_globals)\r\n  File \"/Share/lli/espnet/espnet2/bin/asr_train.py\", line 23, in <module>\r\n    main()\r\n  File \"/Share/lli/espnet/espnet2/bin/asr_train.py\", line 19, in main\r\n    ASRTask.main(cmd=cmd)\r\n  File \"/Share/lli/espnet/espnet2/tasks/abs_task.py\", line 1011, in main\r\n    cls.main_worker(args)\r\n  File \"/Share/lli/espnet/espnet2/tasks/abs_task.py\", line 1318, in main_worker\r\n    if wandb.run:\r\nAttributeError: 'NoneType' object has no attribute 'run'\r\nAccounting: time=170861 threads=1\r\nEnded (code 1) at Thu May 26 21:35:06 CST 2022, elapsed time 170861 seconds\r\n\r\nBasic environments:\r\nOS information: Linux\r\npython version: 3.7.4\r\nespnet version: 202204\r\npytorch version 1.6.0\r\nTask information:\r\n\r\nTask: ASR\r\nRecipe: aishell\r\nESPnet2\r\nCould you please help me?", "reactions": {"url": "https://api.github.com/repos/espnet/espnet/issues/4396/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/espnet/espnet/issues/4396/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/espnet/espnet/issues/4390", "repository_url": "https://api.github.com/repos/espnet/espnet", "labels_url": "https://api.github.com/repos/espnet/espnet/issues/4390/labels{/name}", "comments_url": "https://api.github.com/repos/espnet/espnet/issues/4390/comments", "events_url": "https://api.github.com/repos/espnet/espnet/issues/4390/events", "html_url": "https://github.com/espnet/espnet/issues/4390", "id": 1247865590, "node_id": "I_kwDOBsxW2c5KYOr2", "number": 4390, "title": "Dead link described in espnet1 jsut-based pretrained tts installer", "user": {"login": "supikiti", "id": 37444351, "node_id": "MDQ6VXNlcjM3NDQ0MzUx", "avatar_url": "https://avatars.githubusercontent.com/u/37444351?v=4", "gravatar_id": "", "url": "https://api.github.com/users/supikiti", "html_url": "https://github.com/supikiti", "followers_url": "https://api.github.com/users/supikiti/followers", "following_url": "https://api.github.com/users/supikiti/following{/other_user}", "gists_url": "https://api.github.com/users/supikiti/gists{/gist_id}", "starred_url": "https://api.github.com/users/supikiti/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/supikiti/subscriptions", "organizations_url": "https://api.github.com/users/supikiti/orgs", "repos_url": "https://api.github.com/users/supikiti/repos", "events_url": "https://api.github.com/users/supikiti/events{/privacy}", "received_events_url": "https://api.github.com/users/supikiti/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 777173273, "node_id": "MDU6TGFiZWw3NzcxNzMyNzM=", "url": "https://api.github.com/repos/espnet/espnet/labels/Bug", "name": "Bug", "color": "ee0701", "default": false, "description": "bug should be fixed"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2022-05-25T10:07:18Z", "updated_at": "2022-05-26T11:43:19Z", "closed_at": "2022-05-26T11:43:00Z", "author_association": "NONE", "active_lock_reason": null, "body": "I tried to install the pretrained tts model, jsut.24k.phn.transformer, by using [this codes](https://github.com/espnet/espnet/blob/047d0c474c18a87c205e566948410be16787e477/egs/jvs/tts1/run.sh#L73). \r\nHowever, I could not install it. \r\nCould you please check if the link is valid ? \r\nOr could you tell me if I can install it in another way ?", "reactions": {"url": "https://api.github.com/repos/espnet/espnet/issues/4390/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/espnet/espnet/issues/4390/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/espnet/espnet/issues/4389", "repository_url": "https://api.github.com/repos/espnet/espnet", "labels_url": "https://api.github.com/repos/espnet/espnet/issues/4389/labels{/name}", "comments_url": "https://api.github.com/repos/espnet/espnet/issues/4389/comments", "events_url": "https://api.github.com/repos/espnet/espnet/issues/4389/events", "html_url": "https://github.com/espnet/espnet/issues/4389", "id": 1246555011, "node_id": "I_kwDOBsxW2c5KTOuD", "number": 4389, "title": "longformer report an error", "user": {"login": "Uriel-w", "id": 60969278, "node_id": "MDQ6VXNlcjYwOTY5Mjc4", "avatar_url": "https://avatars.githubusercontent.com/u/60969278?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Uriel-w", "html_url": "https://github.com/Uriel-w", "followers_url": "https://api.github.com/users/Uriel-w/followers", "following_url": "https://api.github.com/users/Uriel-w/following{/other_user}", "gists_url": "https://api.github.com/users/Uriel-w/gists{/gist_id}", "starred_url": "https://api.github.com/users/Uriel-w/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Uriel-w/subscriptions", "organizations_url": "https://api.github.com/users/Uriel-w/orgs", "repos_url": "https://api.github.com/users/Uriel-w/repos", "events_url": "https://api.github.com/users/Uriel-w/events{/privacy}", "received_events_url": "https://api.github.com/users/Uriel-w/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 777173273, "node_id": "MDU6TGFiZWw3NzcxNzMyNzM=", "url": "https://api.github.com/repos/espnet/espnet/labels/Bug", "name": "Bug", "color": "ee0701", "default": false, "description": "bug should be fixed"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2022-05-24T13:25:43Z", "updated_at": "2022-05-25T06:06:18Z", "closed_at": "2022-05-25T06:06:18Z", "author_association": "NONE", "active_lock_reason": null, "body": "Excuse me, when running the source code longformer, there will be a problem that xs_pad.size(1) is greater than olens.max(). Is there any problem with the source code?\r\n\r\n![cd171e2b498e3ba5f8607f7dc53282d](https://user-images.githubusercontent.com/60969278/170044634-71b8d4fa-4f6f-4a1d-a674-2e2d0b025c7f.png)\r\n", "reactions": {"url": "https://api.github.com/repos/espnet/espnet/issues/4389/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/espnet/espnet/issues/4389/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/espnet/espnet/issues/4368", "repository_url": "https://api.github.com/repos/espnet/espnet", "labels_url": "https://api.github.com/repos/espnet/espnet/issues/4368/labels{/name}", "comments_url": "https://api.github.com/repos/espnet/espnet/issues/4368/comments", "events_url": "https://api.github.com/repos/espnet/espnet/issues/4368/events", "html_url": "https://github.com/espnet/espnet/issues/4368", "id": 1237423692, "node_id": "I_kwDOBsxW2c5JwZZM", "number": 4368, "title": "Possible error with number of returned values in transformer encoder.", "user": {"login": "Ore-an", "id": 18559156, "node_id": "MDQ6VXNlcjE4NTU5MTU2", "avatar_url": "https://avatars.githubusercontent.com/u/18559156?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Ore-an", "html_url": "https://github.com/Ore-an", "followers_url": "https://api.github.com/users/Ore-an/followers", "following_url": "https://api.github.com/users/Ore-an/following{/other_user}", "gists_url": "https://api.github.com/users/Ore-an/gists{/gist_id}", "starred_url": "https://api.github.com/users/Ore-an/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Ore-an/subscriptions", "organizations_url": "https://api.github.com/users/Ore-an/orgs", "repos_url": "https://api.github.com/users/Ore-an/repos", "events_url": "https://api.github.com/users/Ore-an/events{/privacy}", "received_events_url": "https://api.github.com/users/Ore-an/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 777173273, "node_id": "MDU6TGFiZWw3NzcxNzMyNzM=", "url": "https://api.github.com/repos/espnet/espnet/labels/Bug", "name": "Bug", "color": "ee0701", "default": false, "description": "bug should be fixed"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2022-05-16T16:46:28Z", "updated_at": "2022-05-20T10:36:57Z", "closed_at": "2022-05-20T10:36:57Z", "author_association": "NONE", "active_lock_reason": null, "body": "I'm not sure if development in espnet1 is still ongoing, but I found that in this line:\r\n\r\nhttps://github.com/espnet/espnet/blob/afa8f8ec5b8ec77deb1a3c1531915ebbee7b80e6/espnet/nets/pytorch_backend/e2e_asr_transformer.py#L193\r\n\r\nThe transformer expects hs_intermediates to be returned by the encoder in every case. Looking at the encoder code, if the intermediate layers are not specified, it will return 2 values instead of 3:\r\n\r\nhttps://github.com/espnet/espnet/blob/afa8f8ec5b8ec77deb1a3c1531915ebbee7b80e6/espnet/nets/pytorch_backend/transformer/encoder.py#L344-L346\r\n\r\nThis would result in a crash, since it would be unable to unpack 3 values. Returning a None or an empty list might be fine because if you don't set intermediate_ctc_weight the hs_intermediates won't be used for anything in the e2e_asr_transformer forward.", "reactions": {"url": "https://api.github.com/repos/espnet/espnet/issues/4368/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/espnet/espnet/issues/4368/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/espnet/espnet/issues/4360", "repository_url": "https://api.github.com/repos/espnet/espnet", "labels_url": "https://api.github.com/repos/espnet/espnet/issues/4360/labels{/name}", "comments_url": "https://api.github.com/repos/espnet/espnet/issues/4360/comments", "events_url": "https://api.github.com/repos/espnet/espnet/issues/4360/events", "html_url": "https://github.com/espnet/espnet/issues/4360", "id": 1233363773, "node_id": "I_kwDOBsxW2c5Jg6M9", "number": 4360, "title": "conformer-transducer labels:bug", "user": {"login": "Macsim2", "id": 47729187, "node_id": "MDQ6VXNlcjQ3NzI5MTg3", "avatar_url": "https://avatars.githubusercontent.com/u/47729187?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Macsim2", "html_url": "https://github.com/Macsim2", "followers_url": "https://api.github.com/users/Macsim2/followers", "following_url": "https://api.github.com/users/Macsim2/following{/other_user}", "gists_url": "https://api.github.com/users/Macsim2/gists{/gist_id}", "starred_url": "https://api.github.com/users/Macsim2/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Macsim2/subscriptions", "organizations_url": "https://api.github.com/users/Macsim2/orgs", "repos_url": "https://api.github.com/users/Macsim2/repos", "events_url": "https://api.github.com/users/Macsim2/events{/privacy}", "received_events_url": "https://api.github.com/users/Macsim2/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 777173273, "node_id": "MDU6TGFiZWw3NzcxNzMyNzM=", "url": "https://api.github.com/repos/espnet/espnet/labels/Bug", "name": "Bug", "color": "ee0701", "default": false, "description": "bug should be fixed"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2022-05-12T02:22:25Z", "updated_at": "2022-05-12T05:47:06Z", "closed_at": "2022-05-12T05:47:06Z", "author_association": "NONE", "active_lock_reason": null, "body": "Im sorry. plese delete this issue\r\nI thought I could delete it\r\nI'd repost it later", "reactions": {"url": "https://api.github.com/repos/espnet/espnet/issues/4360/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/espnet/espnet/issues/4360/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/espnet/espnet/issues/4354", "repository_url": "https://api.github.com/repos/espnet/espnet", "labels_url": "https://api.github.com/repos/espnet/espnet/issues/4354/labels{/name}", "comments_url": "https://api.github.com/repos/espnet/espnet/issues/4354/comments", "events_url": "https://api.github.com/repos/espnet/espnet/issues/4354/events", "html_url": "https://github.com/espnet/espnet/issues/4354", "id": 1231972599, "node_id": "I_kwDOBsxW2c5Jbmj3", "number": 4354, "title": "TTS lid=true bug", "user": {"login": "unparalleled-ysj", "id": 39238619, "node_id": "MDQ6VXNlcjM5MjM4NjE5", "avatar_url": "https://avatars.githubusercontent.com/u/39238619?v=4", "gravatar_id": "", "url": "https://api.github.com/users/unparalleled-ysj", "html_url": "https://github.com/unparalleled-ysj", "followers_url": "https://api.github.com/users/unparalleled-ysj/followers", "following_url": "https://api.github.com/users/unparalleled-ysj/following{/other_user}", "gists_url": "https://api.github.com/users/unparalleled-ysj/gists{/gist_id}", "starred_url": "https://api.github.com/users/unparalleled-ysj/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/unparalleled-ysj/subscriptions", "organizations_url": "https://api.github.com/users/unparalleled-ysj/orgs", "repos_url": "https://api.github.com/users/unparalleled-ysj/repos", "events_url": "https://api.github.com/users/unparalleled-ysj/events{/privacy}", "received_events_url": "https://api.github.com/users/unparalleled-ysj/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 777173273, "node_id": "MDU6TGFiZWw3NzcxNzMyNzM=", "url": "https://api.github.com/repos/espnet/espnet/labels/Bug", "name": "Bug", "color": "ee0701", "default": false, "description": "bug should be fixed"}, {"id": 1680978630, "node_id": "MDU6TGFiZWwxNjgwOTc4NjMw", "url": "https://api.github.com/repos/espnet/espnet/labels/TTS", "name": "TTS", "color": "fbca04", "default": false, "description": "Text-to-speech"}, {"id": 1889036170, "node_id": "MDU6TGFiZWwxODg5MDM2MTcw", "url": "https://api.github.com/repos/espnet/espnet/labels/ESPnet2", "name": "ESPnet2", "color": "f2db68", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2022-05-11T03:59:39Z", "updated_at": "2022-05-11T08:59:02Z", "closed_at": "2022-05-11T07:28:31Z", "author_association": "NONE", "active_lock_reason": null, "body": "@kan-bayashi  Hi when I set use_lid=true , the following error occurs, like the support for lid is incomplete\r\n`RuntimeError: The data-name must be one of ('text', 'speech', 'spembs', 'sids', 'durations', 'pitch', 'energy') for GANTTSTask: \"lids\" is not allowed.`", "reactions": {"url": "https://api.github.com/repos/espnet/espnet/issues/4354/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/espnet/espnet/issues/4354/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/espnet/espnet/issues/4326", "repository_url": "https://api.github.com/repos/espnet/espnet", "labels_url": "https://api.github.com/repos/espnet/espnet/issues/4326/labels{/name}", "comments_url": "https://api.github.com/repos/espnet/espnet/issues/4326/comments", "events_url": "https://api.github.com/repos/espnet/espnet/issues/4326/events", "html_url": "https://github.com/espnet/espnet/issues/4326", "id": 1217448516, "node_id": "I_kwDOBsxW2c5IkMpE", "number": 4326, "title": "Joint GAN-TTS learning problem in fastspeech with multi GPU", "user": {"login": "IrisLhy", "id": 45890541, "node_id": "MDQ6VXNlcjQ1ODkwNTQx", "avatar_url": "https://avatars.githubusercontent.com/u/45890541?v=4", "gravatar_id": "", "url": "https://api.github.com/users/IrisLhy", "html_url": "https://github.com/IrisLhy", "followers_url": "https://api.github.com/users/IrisLhy/followers", "following_url": "https://api.github.com/users/IrisLhy/following{/other_user}", "gists_url": "https://api.github.com/users/IrisLhy/gists{/gist_id}", "starred_url": "https://api.github.com/users/IrisLhy/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/IrisLhy/subscriptions", "organizations_url": "https://api.github.com/users/IrisLhy/orgs", "repos_url": "https://api.github.com/users/IrisLhy/repos", "events_url": "https://api.github.com/users/IrisLhy/events{/privacy}", "received_events_url": "https://api.github.com/users/IrisLhy/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 777173273, "node_id": "MDU6TGFiZWw3NzcxNzMyNzM=", "url": "https://api.github.com/repos/espnet/espnet/labels/Bug", "name": "Bug", "color": "ee0701", "default": false, "description": "bug should be fixed"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2022-04-27T14:32:22Z", "updated_at": "2022-04-28T02:40:45Z", "closed_at": "2022-04-28T02:37:51Z", "author_association": "NONE", "active_lock_reason": null, "body": "**Describe the bug**\r\nThe model can be launched on single GPU, but not multiples.\r\n\r\n**Basic environments:**\r\n - python version: [e.g. 3.8.5 (default, Mar 27 2019, 22:11:17) [GCC 7.3.0]]\r\n - espnet version: [e.g. espnet 0.8.5]\r\n - Git hash [e.g. b88e89fc7246fed4c2842b55baba884fe1b4ecc2]\r\n   - Commit date [e.g. Tue Sep 1 09:32:54 2020 -0400]\r\n - pytorch version [e.g. pytorch 1.7.1]\r\n \r\nIs CUDA available: Yes\r\nCUDA runtime version: 11.1\r\n\r\n**Task information:**\r\n - Task: GAN-TTS\r\n - Recipe: [e.g. librispeech]\r\n - ESPnet2\r\n\r\n\r\n**Error logs**\r\n\r\ntensor([117.5469], device='cuda:2', grad_fn=<UnsqueezeBackward0>)\r\ntensor([139.6633], device='cuda:1', grad_fn=<UnsqueezeBackward0>)\r\ntensor([114.5397], device='cuda:0', grad_fn=<UnsqueezeBackward0>)\r\ntensor([131.6933], device='cuda:3', grad_fn=<UnsqueezeBackward0>)\r\nTraceback (most recent call last):\r\n  File \"<input>\", line 1, in <module>\r\n  File \"/home/user/.pycharm_helpers/pydev/_pydev_bundle/pydev_umd.py\", line 197, in runfile\r\n    pydev_imports.execfile(filename, global_vars, local_vars)  # execute the script\r\n  File \"/home/user/.pycharm_helpers/pydev/_pydev_imps/_pydev_execfile.py\", line 18, in execfile\r\n    exec(compile(contents+\"\\n\", file, 'exec'), glob, loc)\r\n  File \"/home/user/train_gan_tts.py\", line 148, in <module>\r\n    retval = model(forward_generator=turn == \"generator\",\r\n  File \"/home/user/miniconda3/envs/lib/python3.8/site-packages/torch/nn/modules/module.py\", line 727, in _call_impl\r\n    result = self.forward(*input, **kwargs)\r\n  File \"/home/user/miniconda3/envs/lib/python3.8/site-packages/torch/nn/parallel/data_parallel.py\", line 162, in forward\r\n    return self.gather(outputs, self.output_device)\r\n  File \"/home/user/miniconda3/envs/lib/python3.8/site-packages/torch/nn/parallel/data_parallel.py\", line 174, in gather\r\n    return gather(outputs, output_device, dim=self.dim)\r\n  File \"/home/user/miniconda3/envs/lib/python3.8/site-packages/torch/nn/parallel/scatter_gather.py\", line 68, in gather\r\n    res = gather_map(outputs)\r\n  File \"/home/user/miniconda3/envs/lib/python3.8/site-packages/torch/nn/parallel/scatter_gather.py\", line 61, in gather_map\r\n    return type(out)(((k, gather_map([d[k] for d in outputs]))\r\n  File \"/home/user/miniconda3/envs/lib/python3.8/site-packages/torch/nn/parallel/scatter_gather.py\", line 61, in <genexpr>\r\n    return type(out)(((k, gather_map([d[k] for d in outputs]))\r\n  File \"/home/user/miniconda3/envs/lib/python3.8/site-packages/torch/nn/parallel/scatter_gather.py\", line 63, in gather_map\r\n    return type(out)(map(gather_map, zip(*outputs)))\r\nTypeError: 'int' object is not iterable", "reactions": {"url": "https://api.github.com/repos/espnet/espnet/issues/4326/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/espnet/espnet/issues/4326/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/espnet/espnet/issues/4302", "repository_url": "https://api.github.com/repos/espnet/espnet", "labels_url": "https://api.github.com/repos/espnet/espnet/issues/4302/labels{/name}", "comments_url": "https://api.github.com/repos/espnet/espnet/issues/4302/comments", "events_url": "https://api.github.com/repos/espnet/espnet/issues/4302/events", "html_url": "https://github.com/espnet/espnet/issues/4302", "id": 1210549611, "node_id": "I_kwDOBsxW2c5IJ4Vr", "number": 4302, "title": "Decoding error while using the model transfer from pretrained model", "user": {"login": "Subohao", "id": 22214866, "node_id": "MDQ6VXNlcjIyMjE0ODY2", "avatar_url": "https://avatars.githubusercontent.com/u/22214866?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Subohao", "html_url": "https://github.com/Subohao", "followers_url": "https://api.github.com/users/Subohao/followers", "following_url": "https://api.github.com/users/Subohao/following{/other_user}", "gists_url": "https://api.github.com/users/Subohao/gists{/gist_id}", "starred_url": "https://api.github.com/users/Subohao/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Subohao/subscriptions", "organizations_url": "https://api.github.com/users/Subohao/orgs", "repos_url": "https://api.github.com/users/Subohao/repos", "events_url": "https://api.github.com/users/Subohao/events{/privacy}", "received_events_url": "https://api.github.com/users/Subohao/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 777173273, "node_id": "MDU6TGFiZWw3NzcxNzMyNzM=", "url": "https://api.github.com/repos/espnet/espnet/labels/Bug", "name": "Bug", "color": "ee0701", "default": false, "description": "bug should be fixed"}, {"id": 1889036170, "node_id": "MDU6TGFiZWwxODg5MDM2MTcw", "url": "https://api.github.com/repos/espnet/espnet/labels/ESPnet2", "name": "ESPnet2", "color": "f2db68", "default": false, "description": ""}, {"id": 2519100905, "node_id": "MDU6TGFiZWwyNTE5MTAwOTA1", "url": "https://api.github.com/repos/espnet/espnet/labels/RNNT", "name": "RNNT", "color": "0e8a16", "default": false, "description": "(RNN) transducer related issue"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2022-04-21T06:16:49Z", "updated_at": "2023-01-12T12:20:13Z", "closed_at": "2023-01-12T12:20:13Z", "author_association": "NONE", "active_lock_reason": null, "body": "**Describe the bug**\r\nDear developers, \r\nI met some problems while applying the fine-tuning asr model to decode the test set, and I found no further information on solving this bug. Thanks for helping me!!\r\nI think the bug is about the BeamSearchTransducer function initialization of asr_inference.py, and the description is provided below:\r\n\r\n```\r\n# python3 -m espnet2.bin.asr_inference --batch_size 1 --ngpu 1 --data_path_and_name_and_type dump/raw/test1/wav.scp,speech,sound --key_file exp/asr_transfer_learning_with_pre_trained_model_from_HF/inference_lm_lm_train_bpe38_valid.loss.ave_asr_model_valid.loss.ave_10best/test1/logdir/keys.1.scp --asr_train_config exp/asr_transfer_learning_with_pre_trained_model_from_HF/config.yaml --asr_model_file exp/asr_transfer_learning_with_pre_trained_model_from_HF/valid.loss.ave_10best.pth --output_dir exp/asr_transfer_learning_with_pre_trained_model_from_HF/inference_lm_lm_train_bpe38_valid.loss.ave_asr_model_valid.loss.ave_10best/test1/logdir/output.1 --lm_train_config exp/lm_train_bpe38/config.yaml --lm_file exp/lm_train_bpe38/valid.loss.ave.pth \r\n# Started at Tue Apr 19 17:54:49 CST 2022\r\n#\r\n/home/subohao/.conda/envs/espnet_py38/bin/python3 /opt/software/espnet/espnet2/bin/asr_inference.py --batch_size 1 --ngpu 1 --data_path_and_name_and_type dump/raw/test1/wav.scp,speech,sound --key_file exp/asr_transfer_learning_with_pre_trained_model_from_HF/inference_lm_lm_train_bpe38_valid.loss.ave_asr_model_valid.loss.ave_10best/test1/logdir/keys.1.scp --asr_train_config exp/asr_transfer_learning_with_pre_trained_model_from_HF/config.yaml --asr_model_file exp/asr_transfer_learning_with_pre_trained_model_from_HF/valid.loss.ave_10best.pth --output_dir exp/asr_transfer_learning_with_pre_trained_model_from_HF/inference_lm_lm_train_bpe38_valid.loss.ave_asr_model_valid.loss.ave_10best/test1/logdir/output.1 --lm_train_config exp/lm_train_bpe38/config.yaml --lm_file exp/lm_train_bpe38/valid.loss.ave.pth\r\n2022-04-19 17:54:51,931 (asr:411) INFO: Vocabulary size: 38\r\n2022-04-19 17:54:52,060 (conformer_encoder:137) WARNING: Using legacy_rel_pos and it will be deprecated in the future.\r\n2022-04-19 17:54:52,119 (conformer_encoder:237) WARNING: Using legacy_rel_selfattn and it will be deprecated in the future.\r\n2022-04-19 17:54:57,923 (lm:199) INFO: Vocabulary size: 38\r\nTraceback (most recent call last):\r\n  File \"/home/subohao/.conda/envs/espnet_py38/lib/python3.8/runpy.py\", line 192, in _run_module_as_main\r\n    return _run_code(code, main_globals, None,\r\n  File \"/home/subohao/.conda/envs/espnet_py38/lib/python3.8/runpy.py\", line 85, in _run_code\r\n    exec(code, run_globals)\r\n  File \"/opt/software/espnet/espnet2/bin/asr_inference.py\", line 609, in <module>\r\n    main()\r\n  File \"/opt/software/espnet/espnet2/bin/asr_inference.py\", line 605, in main\r\n    inference(**kwargs)\r\n  File \"/opt/software/espnet/espnet2/bin/asr_inference.py\", line 395, in inference\r\n    speech2text = Speech2Text.from_pretrained(\r\n  File \"/opt/software/espnet/espnet2/bin/asr_inference.py\", line 317, in from_pretrained\r\n    return Speech2Text(**kwargs)\r\n  File \"/opt/software/espnet/espnet2/bin/asr_inference.py\", line 123, in __init__\r\n    beam_search_transducer = BeamSearchTransducer(\r\nTypeError: type object argument after ** must be a mapping, not NoneType\r\n# Accounting: time=9 threads=1\r\n# Ended (code 1) at Tue Apr 19 17:54:58 CST 2022, elapsed time 9 seconds\r\n```\r\n\r\n\r\n**Basic environments:**\r\n - OS information: Linux 5.4.0-105-generic #119-Ubuntu SMP Mon Mar 7 18:49:24 UTC 2022 x86_64\r\n - python version: `3.8.0 (default, Nov  6 2019, 21:49:08)  [GCC 7.3.0]\r\n - espnet version: `espnet 0.10.7a1`\r\n - Git hash: `189e1593dcd5e4c74b84e9a04a6da3906f64b40f`\r\n   - Commit date `Wed Apr 6 16:42:01 2022 -0400`\r\n - pytorch version: `pytorch 1.10.0`\r\n\r\n**Environments from `torch.utils.collect_env`:**\r\n\r\n```\r\nPyTorch version: 1.10.0\r\nIs debug build: False\r\nCUDA used to build PyTorch: 11.1\r\nROCM used to build PyTorch: N/A\r\n\r\nOS: Ubuntu 20.04.4 LTS (x86_64)\r\nGCC version: (Ubuntu 9.4.0-1ubuntu1~20.04.1) 9.4.0\r\nClang version: Could not collect\r\nCMake version: version 3.16.3\r\nLibc version: glibc-2.31\r\n\r\nPython version: 3.8.0 (default, Nov  6 2019, 21:49:08)  [GCC 7.3.0] (64-bit runtime)\r\nPython platform: Linux-5.4.0-105-generic-x86_64-with-glibc2.10\r\nIs CUDA available: True\r\nCUDA runtime version: 11.0.221\r\nGPU models and configuration: \r\nGPU 0: A100-SXM-80GB\r\nGPU 1: A100-SXM-80GB\r\nGPU 2: A100-SXM-80GB\r\nGPU 3: DGX Display\r\nGPU 4: A100-SXM-80GB\r\n\r\nNvidia driver version: 450.172.01\r\ncuDNN version: Could not collect\r\nHIP runtime version: N/A\r\nMIOpen runtime version: N/A\r\n\r\nVersions of relevant libraries:\r\n[pip3] mypy-extensions==0.4.3\r\n[pip3] numpy==1.21.2\r\n[pip3] numpydoc==1.2\r\n[pip3] pytorch-ranger==0.1.1\r\n[pip3] pytorch-wpe==0.0.1\r\n[pip3] torch==1.10.0\r\n[pip3] torch-complex==0.4.3\r\n[pip3] torch-optimizer==0.3.0\r\n[pip3] torchaudio==0.10.0\r\n[pip3] warprnnt-pytorch==0.1\r\n[conda] blas                      1.0                         mkl  \r\n[conda] cudatoolkit               11.1.74              h6bb024c_0    nvidia\r\n[conda] mkl                       2021.4.0           h06a4308_640  \r\n[conda] mkl-service               2.4.0            py38h7f8727e_0  \r\n[conda] mkl_fft                   1.3.1            py38hd3c417c_0  \r\n[conda] mkl_random                1.2.2            py38h51133e4_0  \r\n[conda] mypy_extensions           0.4.3            py38h06a4308_1  \r\n[conda] numpy                     1.21.2           py38h20f2e39_0  \r\n[conda] numpy-base                1.21.2           py38h79a1101_0  \r\n[conda] numpydoc                  1.2                pyhd3eb1b0_0  \r\n[conda] pytorch                   1.10.0          py3.8_cuda11.1_cudnn8.0.5_0    pytorch\r\n[conda] pytorch-mutex             1.0                        cuda    pytorch\r\n[conda] pytorch-ranger            0.1.1                    pypi_0    pypi\r\n[conda] pytorch-wpe               0.0.1                    pypi_0    pypi\r\n[conda] torch-complex             0.4.3                    pypi_0    pypi\r\n[conda] torch-optimizer           0.3.0                    pypi_0    pypi\r\n[conda] torchaudio                0.10.0               py38_cu111    pytorch\r\n[conda] warprnnt-pytorch          0.1                       dev_0    <develop>\r\n```\r\n\r\n**Task information:**\r\n - Task: ASR\r\n - Recipe: TEMPLATE/asr1/asr.sh\r\n - ESPnet2\r\n\r\n**To Reproduce**\r\n1. Download the pre-trained model (chai_librispeech_asr_train_rnnt_conformer_raw_en_bpe5000_sp-15epoch.pth) from [Huggingface](https://huggingface.co/espnet/chai_librispeech_asr_train_rnnt_conformer_raw_en_bpe5000_sp/tree/main/exp/asr_train_rnnt_conformer_ngpu4_raw_en_bpe5000_sp)\r\n2. transfer learning with my own dataset following the tutorial in (document)[https://espnet.github.io/espnet/notebook/espnet2_asr_transfer_learning_demo.html#mini_an4-recipe-as-a-transfer-learning-example]\r\n3. I get the model after finetuning the pretrained model, then I use the command : `./asr.sh --stage 12 --stop_stage 12 --train-set \"train1\" --valid-set \"dev1\" --test_sets \"test1\" --asr_config \"conf/train_rnnt_conformer.yaml\" --asr_tag \"transfer_learning_with_pre_trained_model_from_HF\" --pretrained_model \"15epoch.pth\" --ignore_init_mismatch \"true\" --inference_asr_model valid.loss.ave_10best.pth` to decode the test data.\r\n4. Then the error shows as the following description\r\n\r\n**Error logs**\r\n```\r\n# python3 -m espnet2.bin.asr_inference --batch_size 1 --ngpu 1 --data_path_and_name_and_type dump/raw/test1/wav.scp,speech,sound --key_file exp/asr_transfer_learning_with_pre_trained_model_from_HF/inference_lm_lm_train_bpe38_valid.loss.ave_asr_model_valid.loss.ave_10best/test1/logdir/keys.1.scp --asr_train_config exp/asr_transfer_learning_with_pre_trained_model_from_HF/config.yaml --asr_model_file exp/asr_transfer_learning_with_pre_trained_model_from_HF/valid.loss.ave_10best.pth --output_dir exp/asr_transfer_learning_with_pre_trained_model_from_HF/inference_lm_lm_train_bpe38_valid.loss.ave_asr_model_valid.loss.ave_10best/test1/logdir/output.1 --lm_train_config exp/lm_train_bpe38/config.yaml --lm_file exp/lm_train_bpe38/valid.loss.ave.pth \r\n# Started at Tue Apr 19 17:54:49 CST 2022\r\n#\r\n/home/subohao/.conda/envs/espnet_py38/bin/python3 /opt/software/espnet/espnet2/bin/asr_inference.py --batch_size 1 --ngpu 1 --data_path_and_name_and_type dump/raw/test1/wav.scp,speech,sound --key_file exp/asr_transfer_learning_with_pre_trained_model_from_HF/inference_lm_lm_train_bpe38_valid.loss.ave_asr_model_valid.loss.ave_10best/test1/logdir/keys.1.scp --asr_train_config exp/asr_transfer_learning_with_pre_trained_model_from_HF/config.yaml --asr_model_file exp/asr_transfer_learning_with_pre_trained_model_from_HF/valid.loss.ave_10best.pth --output_dir exp/asr_transfer_learning_with_pre_trained_model_from_HF/inference_lm_lm_train_bpe38_valid.loss.ave_asr_model_valid.loss.ave_10best/test1/logdir/output.1 --lm_train_config exp/lm_train_bpe38/config.yaml --lm_file exp/lm_train_bpe38/valid.loss.ave.pth\r\n2022-04-19 17:54:51,931 (asr:411) INFO: Vocabulary size: 38\r\n2022-04-19 17:54:52,060 (conformer_encoder:137) WARNING: Using legacy_rel_pos and it will be deprecated in the future.\r\n2022-04-19 17:54:52,119 (conformer_encoder:237) WARNING: Using legacy_rel_selfattn and it will be deprecated in the future.\r\n2022-04-19 17:54:57,923 (lm:199) INFO: Vocabulary size: 38\r\nTraceback (most recent call last):\r\n  File \"/home/subohao/.conda/envs/espnet_py38/lib/python3.8/runpy.py\", line 192, in _run_module_as_main\r\n    return _run_code(code, main_globals, None,\r\n  File \"/home/subohao/.conda/envs/espnet_py38/lib/python3.8/runpy.py\", line 85, in _run_code\r\n    exec(code, run_globals)\r\n  File \"/opt/software/espnet/espnet2/bin/asr_inference.py\", line 609, in <module>\r\n    main()\r\n  File \"/opt/software/espnet/espnet2/bin/asr_inference.py\", line 605, in main\r\n    inference(**kwargs)\r\n  File \"/opt/software/espnet/espnet2/bin/asr_inference.py\", line 395, in inference\r\n    speech2text = Speech2Text.from_pretrained(\r\n  File \"/opt/software/espnet/espnet2/bin/asr_inference.py\", line 317, in from_pretrained\r\n    return Speech2Text(**kwargs)\r\n  File \"/opt/software/espnet/espnet2/bin/asr_inference.py\", line 123, in __init__\r\n    beam_search_transducer = BeamSearchTransducer(\r\nTypeError: type object argument after ** must be a mapping, not NoneType\r\n# Accounting: time=9 threads=1\r\n# Ended (code 1) at Tue Apr 19 17:54:58 CST 2022, elapsed time 9 seconds\r\n```\r\n", "reactions": {"url": "https://api.github.com/repos/espnet/espnet/issues/4302/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/espnet/espnet/issues/4302/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/espnet/espnet/issues/4296", "repository_url": "https://api.github.com/repos/espnet/espnet", "labels_url": "https://api.github.com/repos/espnet/espnet/issues/4296/labels{/name}", "comments_url": "https://api.github.com/repos/espnet/espnet/issues/4296/comments", "events_url": "https://api.github.com/repos/espnet/espnet/issues/4296/events", "html_url": "https://github.com/espnet/espnet/issues/4296", "id": 1210125398, "node_id": "I_kwDOBsxW2c5IIQxW", "number": 4296, "title": "Two times sqrt in utterance_mvn.py", "user": {"login": "boeddeker", "id": 13744128, "node_id": "MDQ6VXNlcjEzNzQ0MTI4", "avatar_url": "https://avatars.githubusercontent.com/u/13744128?v=4", "gravatar_id": "", "url": "https://api.github.com/users/boeddeker", "html_url": "https://github.com/boeddeker", "followers_url": "https://api.github.com/users/boeddeker/followers", "following_url": "https://api.github.com/users/boeddeker/following{/other_user}", "gists_url": "https://api.github.com/users/boeddeker/gists{/gist_id}", "starred_url": "https://api.github.com/users/boeddeker/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/boeddeker/subscriptions", "organizations_url": "https://api.github.com/users/boeddeker/orgs", "repos_url": "https://api.github.com/users/boeddeker/repos", "events_url": "https://api.github.com/users/boeddeker/events{/privacy}", "received_events_url": "https://api.github.com/users/boeddeker/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 777173273, "node_id": "MDU6TGFiZWw3NzcxNzMyNzM=", "url": "https://api.github.com/repos/espnet/espnet/labels/Bug", "name": "Bug", "color": "ee0701", "default": false, "description": "bug should be fixed"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2022-04-20T19:32:30Z", "updated_at": "2022-04-26T19:14:57Z", "closed_at": "2022-04-26T19:14:57Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "https://github.com/espnet/espnet/blob/c7881c215e019324257620bc1dd83cec898ba6a9/espnet2/layers/utterance_mvn.py#L73-L80\r\n\r\nI was checking what `utterance_mvn` does and recognized that `sqrt` was used two times instead of just once to convert the variance to the standard deviation in `espnet2`.", "reactions": {"url": "https://api.github.com/repos/espnet/espnet/issues/4296/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/espnet/espnet/issues/4296/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/espnet/espnet/issues/4236", "repository_url": "https://api.github.com/repos/espnet/espnet", "labels_url": "https://api.github.com/repos/espnet/espnet/issues/4236/labels{/name}", "comments_url": "https://api.github.com/repos/espnet/espnet/issues/4236/comments", "events_url": "https://api.github.com/repos/espnet/espnet/issues/4236/events", "html_url": "https://github.com/espnet/espnet/issues/4236", "id": 1192391924, "node_id": "I_kwDOBsxW2c5HEnT0", "number": 4236, "title": "loss diverged to nan when training vits with fp16 option enabled.", "user": {"login": "ariacat3366", "id": 17879821, "node_id": "MDQ6VXNlcjE3ODc5ODIx", "avatar_url": "https://avatars.githubusercontent.com/u/17879821?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ariacat3366", "html_url": "https://github.com/ariacat3366", "followers_url": "https://api.github.com/users/ariacat3366/followers", "following_url": "https://api.github.com/users/ariacat3366/following{/other_user}", "gists_url": "https://api.github.com/users/ariacat3366/gists{/gist_id}", "starred_url": "https://api.github.com/users/ariacat3366/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ariacat3366/subscriptions", "organizations_url": "https://api.github.com/users/ariacat3366/orgs", "repos_url": "https://api.github.com/users/ariacat3366/repos", "events_url": "https://api.github.com/users/ariacat3366/events{/privacy}", "received_events_url": "https://api.github.com/users/ariacat3366/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 777173273, "node_id": "MDU6TGFiZWw3NzcxNzMyNzM=", "url": "https://api.github.com/repos/espnet/espnet/labels/Bug", "name": "Bug", "color": "ee0701", "default": false, "description": "bug should be fixed"}, {"id": 777173280, "node_id": "MDU6TGFiZWw3NzcxNzMyODA=", "url": "https://api.github.com/repos/espnet/espnet/labels/Wontfix", "name": "Wontfix", "color": "e5f291", "default": false, "description": "Want to fix"}, {"id": 1680978630, "node_id": "MDU6TGFiZWwxNjgwOTc4NjMw", "url": "https://api.github.com/repos/espnet/espnet/labels/TTS", "name": "TTS", "color": "fbca04", "default": false, "description": "Text-to-speech"}, {"id": 1889036170, "node_id": "MDU6TGFiZWwxODg5MDM2MTcw", "url": "https://api.github.com/repos/espnet/espnet/labels/ESPnet2", "name": "ESPnet2", "color": "f2db68", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2022-04-04T22:47:14Z", "updated_at": "2022-05-11T07:27:55Z", "closed_at": "2022-05-11T07:27:55Z", "author_association": "NONE", "active_lock_reason": null, "body": "I trained VITS using the original dataset with the fp16 option enabled (--use_amp true), but after turning the training around for a few days, the loss values diverged to NAN in the process.\r\nI think the exception handling when values outside the range of fp16 is not working properly.\r\nI did not see this error when the fp16 option was not enabled for the same data set.", "reactions": {"url": "https://api.github.com/repos/espnet/espnet/issues/4236/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/espnet/espnet/issues/4236/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/espnet/espnet/issues/4228", "repository_url": "https://api.github.com/repos/espnet/espnet", "labels_url": "https://api.github.com/repos/espnet/espnet/issues/4228/labels{/name}", "comments_url": "https://api.github.com/repos/espnet/espnet/issues/4228/comments", "events_url": "https://api.github.com/repos/espnet/espnet/issues/4228/events", "html_url": "https://github.com/espnet/espnet/issues/4228", "id": 1189207447, "node_id": "I_kwDOBsxW2c5G4d2X", "number": 4228, "title": "Dimension problem with Multi-GPU training in fastspeech2", "user": {"login": "IrisLhy", "id": 45890541, "node_id": "MDQ6VXNlcjQ1ODkwNTQx", "avatar_url": "https://avatars.githubusercontent.com/u/45890541?v=4", "gravatar_id": "", "url": "https://api.github.com/users/IrisLhy", "html_url": "https://github.com/IrisLhy", "followers_url": "https://api.github.com/users/IrisLhy/followers", "following_url": "https://api.github.com/users/IrisLhy/following{/other_user}", "gists_url": "https://api.github.com/users/IrisLhy/gists{/gist_id}", "starred_url": "https://api.github.com/users/IrisLhy/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/IrisLhy/subscriptions", "organizations_url": "https://api.github.com/users/IrisLhy/orgs", "repos_url": "https://api.github.com/users/IrisLhy/repos", "events_url": "https://api.github.com/users/IrisLhy/events{/privacy}", "received_events_url": "https://api.github.com/users/IrisLhy/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 777173273, "node_id": "MDU6TGFiZWw3NzcxNzMyNzM=", "url": "https://api.github.com/repos/espnet/espnet/labels/Bug", "name": "Bug", "color": "ee0701", "default": false, "description": "bug should be fixed"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2022-04-01T04:11:47Z", "updated_at": "2022-04-06T13:59:42Z", "closed_at": "2022-04-06T13:59:42Z", "author_association": "NONE", "active_lock_reason": null, "body": "**Describe the bug**\r\nThe model can be launched on single GPU, but not multiples. \r\n\r\n**Basic environments:**\r\n - OS information: [e.g., Linux amax 4.15.0-45-generic #48~16.04.1-Ubuntu SMP Tue Jan 29 18:03:48 UTC 2019 x86_64 x86_64 x86_64 GNU/Linux]\r\n - python version: [e.g. 3.8.5 ]\r\n - espnet version: [e.g. espnet 1.10.6]\r\n - pytorch version [e.g. pytorch 1.7.1]\r\n \r\n\r\n\r\n\r\n\r\nPython version: 3.8.5\r\nIs CUDA available: Yes\r\nCUDA runtime version: 11.1\r\n\r\n\r\nNvidia driver version:455.23.04\r\n\r\nTo solve the \r\n`x_masks = make_non_pad_mask(ilens).to(next(self.parameters()).device)` in Fastpseech2\r\nI change the code to\r\n`x_masks = make_non_pad_mask(ilens).to(xs.device)`\r\n\r\nHowever, I still have the problem that is similar with [https://discuss.pytorch.org/t/dimension-problem-by-multiple-gpus/76075](url),\r\n![image](https://user-images.githubusercontent.com/45890541/161193467-4585c693-5733-49f9-bc7c-342d339c394f.png)\r\nError logs are \r\n\r\n`Traceback (most recent call last):\r\n  File \"<input>\", line 1, in <module>\r\n  File \"/home/bme2/.pycharm_helpers/pydev/_pydev_bundle/pydev_umd.py\", line 197, in runfile\r\n    pydev_imports.execfile(filename, global_vars, local_vars)  # execute the script\r\n  File \"/home/bme2/.pycharm_helpers/pydev/_pydev_imps/_pydev_execfile.py\", line 18, in execfile\r\n    exec(compile(contents+\"\\n\", file, 'exec'), glob, loc)\r\n  File \"/data/data-lhy/emg2speech/05_Mandarin_dataset/fastspeech2/train.py\", line 249, in <module>\r\n    output = model(xs=xs, ilens=ilens, ys=ys, olens=olens, ds=ds, ps=ps, es=es,spembs=spembs)\r\n  File \"/home/bme2/miniconda3/lib/python3.8/site-packages/torch/nn/modules/module.py\", line 727, in _call_impl\r\n    result = self.forward(*input, **kwargs)\r\n  File \"/home/bme2/miniconda3/lib/python3.8/site-packages/torch/nn/parallel/data_parallel.py\", line 162, in forward\r\n    return self.gather(outputs, self.output_device)\r\n  File \"/home/bme2/miniconda3/lib/python3.8/site-packages/torch/nn/parallel/data_parallel.py\", line 174, in gather\r\n    return gather(outputs, output_device, dim=self.dim)\r\n  File \"/home/bme2/miniconda3/lib/python3.8/site-packages/torch/nn/parallel/scatter_gather.py\", line 68, in gather\r\n    res = gather_map(outputs)\r\n  File \"/home/bme2/miniconda3/lib/python3.8/site-packages/torch/nn/parallel/scatter_gather.py\", line 63, in gather_map\r\n    return type(out)(map(gather_map, zip(*outputs)))\r\n  File \"/home/bme2/miniconda3/lib/python3.8/site-packages/torch/nn/parallel/scatter_gather.py\", line 55, in gather_map\r\n    return Gather.apply(target_device, dim, *outputs)\r\n  File \"/home/bme2/miniconda3/lib/python3.8/site-packages/torch/nn/parallel/_functions.py\", line 71, in forward\r\n    return comm.gather(inputs, ctx.dim, ctx.target_device)\r\n  File \"/home/bme2/miniconda3/lib/python3.8/site-packages/torch/nn/parallel/comm.py\", line 230, in gather\r\n    return torch._C._gather(tensors, dim, destination)\r\nRuntimeError: Input tensor at index 1 has invalid shape [4, 170, 80], but expected [4, 303, 80]`", "reactions": {"url": "https://api.github.com/repos/espnet/espnet/issues/4228/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/espnet/espnet/issues/4228/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/espnet/espnet/issues/4224", "repository_url": "https://api.github.com/repos/espnet/espnet", "labels_url": "https://api.github.com/repos/espnet/espnet/issues/4224/labels{/name}", "comments_url": "https://api.github.com/repos/espnet/espnet/issues/4224/comments", "events_url": "https://api.github.com/repos/espnet/espnet/issues/4224/events", "html_url": "https://github.com/espnet/espnet/issues/4224", "id": 1188034002, "node_id": "I_kwDOBsxW2c5Gz_XS", "number": 4224, "title": "StopIteration: Caught StopIteration in replica 0 on device 0. in multi-GPU training", "user": {"login": "IrisLhy", "id": 45890541, "node_id": "MDQ6VXNlcjQ1ODkwNTQx", "avatar_url": "https://avatars.githubusercontent.com/u/45890541?v=4", "gravatar_id": "", "url": "https://api.github.com/users/IrisLhy", "html_url": "https://github.com/IrisLhy", "followers_url": "https://api.github.com/users/IrisLhy/followers", "following_url": "https://api.github.com/users/IrisLhy/following{/other_user}", "gists_url": "https://api.github.com/users/IrisLhy/gists{/gist_id}", "starred_url": "https://api.github.com/users/IrisLhy/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/IrisLhy/subscriptions", "organizations_url": "https://api.github.com/users/IrisLhy/orgs", "repos_url": "https://api.github.com/users/IrisLhy/repos", "events_url": "https://api.github.com/users/IrisLhy/events{/privacy}", "received_events_url": "https://api.github.com/users/IrisLhy/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 777173273, "node_id": "MDU6TGFiZWw3NzcxNzMyNzM=", "url": "https://api.github.com/repos/espnet/espnet/labels/Bug", "name": "Bug", "color": "ee0701", "default": false, "description": "bug should be fixed"}, {"id": 1680978630, "node_id": "MDU6TGFiZWwxNjgwOTc4NjMw", "url": "https://api.github.com/repos/espnet/espnet/labels/TTS", "name": "TTS", "color": "fbca04", "default": false, "description": "Text-to-speech"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2022-03-31T12:52:32Z", "updated_at": "2022-04-01T03:00:18Z", "closed_at": "2022-04-01T03:00:18Z", "author_association": "NONE", "active_lock_reason": null, "body": "**Describe the bug\uff1a**\r\nI have the error report about fastspeech2 \r\n`from espnet2.tts.fastspeech2.fastspeech2 import FastSpeech2`\r\nx_masks = make_non_pad_mask(ilens).to(next(self.parameters()).device)\r\n**StopIteration: Caught StopIteration in replica 0 on device 0.**\r\n**Basic environments:**\r\ntorch 1.7.1+cu110\r\n\r\nAnd I know torch 1.4 will solve the problem, but I do not want to change the environment.\r\n\r\nSo I change the code like \r\n\r\n`x_masks = make_non_pad_mask(ilens).to(xs.device)`\r\nand\r\n`x_masks = make_non_pad_mask(ilens).to(ilens.device)`\r\n\r\nBut I still have the problem in multi_GPUs that in single GPU is correct\r\n\r\n**RuntimeError: The size of tensor a (49) must match the size of tensor b (53) at non-singleton dimension 3**\r\n    hs, _ = self.encoder(xs, x_masks)  # (B, Tmax, adim)\r\n  File \"/home/miniconda3/lib/python3.8/site-packages/torch/nn/modules/module.py\", line 727, in _call_impl\r\n    result = self.forward(*input, **kwargs)\r\n  File \"/home/miniconda3/lib/python3.8/site-packages/espnet/nets/pytorch_backend/transformer/encoder.py\", line 313, in forward\r\n    xs, masks = self.encoders(xs, masks)\r\n  File \"/home/miniconda3/lib/python3.8/site-packages/torch/nn/modules/module.py\", line 727, in _call_impl\r\n    result = self.forward(*input, **kwargs)\r\n  File \"/home/miniconda3/lib/python3.8/site-packages/espnet/nets/pytorch_backend/transformer/repeat.py\", line 18, in forward\r\n    args = m(*args)\r\n  File \"/home/miniconda3/lib/python3.8/site-packages/torch/nn/modules/module.py\", line 727, in _call_impl\r\n    result = self.forward(*input, **kwargs)\r\n  File \"/home/miniconda3/lib/python3.8/site-packages/espnet/nets/pytorch_backend/transformer/encoder_layer.py\", line 105, in forward\r\n    self.self_attn(x_q, x, x, mask)\r\n  File \"/home/miniconda3/lib/python3.8/site-packages/torch/nn/modules/module.py\", line 727, in _call_impl\r\n    result = self.forward(*input, **kwargs)\r\n  File \"/home/miniconda3/lib/python3.8/site-packages/espnet/nets/pytorch_backend/transformer/attention.py\", line 114, in forward\r\n    return self.forward_attention(v, scores, mask)\r\n  File \"/home/miniconda3/lib/python3.8/site-packages/espnet/nets/pytorch_backend/transformer/attention.py\", line 83, in forward_attention\r\n    scores = scores.masked_fill(mask, min_value)", "reactions": {"url": "https://api.github.com/repos/espnet/espnet/issues/4224/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/espnet/espnet/issues/4224/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/espnet/espnet/issues/4208", "repository_url": "https://api.github.com/repos/espnet/espnet", "labels_url": "https://api.github.com/repos/espnet/espnet/issues/4208/labels{/name}", "comments_url": "https://api.github.com/repos/espnet/espnet/issues/4208/comments", "events_url": "https://api.github.com/repos/espnet/espnet/issues/4208/events", "html_url": "https://github.com/espnet/espnet/issues/4208", "id": 1181491516, "node_id": "I_kwDOBsxW2c5GbCE8", "number": 4208, "title": "can't use recog_wav.sh", "user": {"login": "xzwworkplace", "id": 76607786, "node_id": "MDQ6VXNlcjc2NjA3Nzg2", "avatar_url": "https://avatars.githubusercontent.com/u/76607786?v=4", "gravatar_id": "", "url": "https://api.github.com/users/xzwworkplace", "html_url": "https://github.com/xzwworkplace", "followers_url": "https://api.github.com/users/xzwworkplace/followers", "following_url": "https://api.github.com/users/xzwworkplace/following{/other_user}", "gists_url": "https://api.github.com/users/xzwworkplace/gists{/gist_id}", "starred_url": "https://api.github.com/users/xzwworkplace/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/xzwworkplace/subscriptions", "organizations_url": "https://api.github.com/users/xzwworkplace/orgs", "repos_url": "https://api.github.com/users/xzwworkplace/repos", "events_url": "https://api.github.com/users/xzwworkplace/events{/privacy}", "received_events_url": "https://api.github.com/users/xzwworkplace/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 777173273, "node_id": "MDU6TGFiZWw3NzcxNzMyNzM=", "url": "https://api.github.com/repos/espnet/espnet/labels/Bug", "name": "Bug", "color": "ee0701", "default": false, "description": "bug should be fixed"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2022-03-26T03:23:05Z", "updated_at": "2022-04-30T11:37:45Z", "closed_at": "2022-04-30T11:37:45Z", "author_association": "NONE", "active_lock_reason": null, "body": "**Describe the bug**\r\nI train a transformer model in another compute,and I use this model in my computer to recognize a wav by recog_wav.sh,i miss a problem ,here is the log.\r\nThank you\r\n\r\n\r\nYou can obtain them by the following command\r\n```\r\n./recog_wav.sh --cmvn ./cmvn.ark --lang_model ./model/conformer/rnnlm.model.best --recog_model ./model/conformer/model.acc.best --decode_config ./conf/tuning/decode_rnn.yaml /media/shiyanshi/E/2020_XZW/\u5f55\u97f3\u6570\u636e-\u7b2c\u4e00\u6279\u6570\u636e\u5e93/\u4e2d\u6587/S0001/S0001-UTT001.wav\r\n```\r\n\r\n\r\n**Task information:**\r\n - Task:ASR\r\n - Recipe: \r\n - ESPnet1\r\n\r\n\r\n**Error logs**\r\nasr_recog.py --config ./conf/tuning/decode_rnn.yaml --ngpu 0 --backend pytorch --debugmode 1 --verbose 1 --recog-json decode/S0001-UTT001/dump/data.json --result-label decode/S0001-UTT001/result.json --model ./model/conformer/model.acc.best --api v2 --rnnlm ./model/conformer/rnnlm.model.best \r\nStarted at Sat Mar 26 11:05:25 CST 2022\r\n\r\n2022-03-26 11:05:26,953 (asr_recog:353) INFO: python path = /media/shiyanshi/E/2020_XZW/espnet/tools/s3prl:\r\n2022-03-26 11:05:26,954 (asr_recog:358) INFO: set random seed = 1\r\n2022-03-26 11:05:26,954 (asr_recog:369) INFO: backend = pytorch\r\n2022-03-26 11:05:34,453 (recog:35) WARNING: experimental API for custom LMs is selected by --api v2\r\n2022-03-26 11:05:34,459 (deterministic_utils:26) INFO: torch type check is disabled\r\n2022-03-26 11:05:34,459 (asr_utils:694) INFO: reading a config file from ./model/conformer/model.json\r\n2022-03-26 11:05:34,461 (asr_init:215) INFO: Reading model parameters from ./model/conformer/model.acc.best\r\n2022-03-26 11:05:34,538 (encoder:172) INFO: encoder self-attention layer type = self-attention\r\n2022-03-26 11:05:34,737 (decoder:127) INFO: decoder self-attention layer type = self-attention\r\n2022-03-26 11:05:35,370 (io_utils:59) WARNING: [Experimental feature] Some preprocessing will be done for the mini-batch creation using Transformation(\r\n    0: TimeWarp(max_time_warp=5, inplace=True, mode=PIL)\r\n    1: FreqMask(F=30, n_mask=2, replace_with_zero=False, inplace=True)\r\n    2: TimeMask(T=40, n_mask=2, replace_with_zero=False, inplace=True))\r\n2022-03-26 11:05:35,371 (asr_utils:694) INFO: reading a config file from ./model/conformer/model.json\r\nTraceback (most recent call last):\r\n  File \"/media/shiyanshi/E/2020_XZW/espnet/egs/aishell/asr2/../../../espnet/bin/asr_recog.py\", line 411, in <module>\r\n    main(sys.argv[1:])\r\n  File \"/media/shiyanshi/E/2020_XZW/espnet/egs/aishell/asr2/../../../espnet/bin/asr_recog.py\", line 381, in main\r\n    recog_v2(args)\r\n  File \"/media/shiyanshi/E/2020_XZW/espnet/espnet/asr/pytorch_backend/recog.py\", line 92, in recog_v2\r\n    lm_class = dynamic_import_lm(lm_model_module, lm_args.backend)\r\nAttributeError: 'tuple' object has no attribute 'backend'\r\n Accounting: time=9 threads=1\r\n Ended (code 1) at Sat Mar 26 11:05:35 CST 2022, elapsed time 9 seconds\r\n\r\n**Describe the bug**\r\nand when i use os.system(\"./recog_wav.sh --cmvn ./cmvn.ark --lang_model %s --recog_model %s --decode_config %s %s\"%(model_am, model_lm ,decode_conf ,my_file_path[0]))\r\n\r\n**Error logs**\r\n asr_recog.py --config ./conf/tuning/decode_rnn.yaml --ngpu 0 --backend pytorch --debugmode 1 --verbose 1 --recog-json decode/S0001-UTT001/dump/data.json --result-label decode/S0001-UTT001/result.json --model ./model/conformer/rnnlm.model.best --api v2 --rnnlm ./model/conformer/model.acc.best \r\n Started at Sat Mar 26 11:20:14 CST 2022\r\n\r\n2022-03-26 11:20:15,121 (asr_recog:353) INFO: python path = /media/shiyanshi/E/2020_XZW/espnet/tools/s3prl:/media/shiyanshi/E/2020_XZW/espnet/egs/aishell/asr2\r\n2022-03-26 11:20:15,121 (asr_recog:358) INFO: set random seed = 1\r\n2022-03-26 11:20:15,121 (asr_recog:369) INFO: backend = pytorch\r\n2022-03-26 11:20:22,614 (recog:35) WARNING: experimental API for custom LMs is selected by --api v2\r\n2022-03-26 11:20:22,622 (deterministic_utils:26) INFO: torch type check is disabled\r\n2022-03-26 11:20:22,622 (asr_utils:694) INFO: reading a config file from ./model/conformer/model.json\r\n2022-03-26 11:20:22,623 (asr_init:215) INFO: Reading model parameters from ./model/conformer/rnnlm.model.best\r\n2022-03-26 11:20:22,700 (encoder:172) INFO: encoder self-attention layer type = self-attention\r\n2022-03-26 11:20:22,896 (decoder:127) INFO: decoder self-attention layer type = self-attention\r\nTraceback (most recent call last):\r\n  File \"/media/shiyanshi/E/2020_XZW/espnet/egs/aishell/asr2/../../../espnet/bin/asr_recog.py\", line 411, in <module>\r\n    main(sys.argv[1:])\r\n  File \"/media/shiyanshi/E/2020_XZW/espnet/egs/aishell/asr2/../../../espnet/bin/asr_recog.py\", line 381, in main\r\n    recog_v2(args)\r\n  File \"/media/shiyanshi/E/2020_XZW/espnet/espnet/asr/pytorch_backend/recog.py\", line 44, in recog_v2\r\n    model, train_args = load_trained_model(args.model)\r\n  File \"/media/shiyanshi/E/2020_XZW/espnet/espnet/asr/pytorch_backend/asr_init.py\", line 233, in load_trained_model\r\n    torch_load(model_path, model)\r\n  File \"/media/shiyanshi/E/2020_XZW/espnet/espnet/asr/asr_utils.py\", line 778, in torch_load\r\n    model.load_state_dict(model_state_dict)\r\n  File \"/media/shiyanshi/E/2020_XZW/espnet/tools/anaconda/envs/espnet/espnet/lib/python3.7/site-packages/torch/nn/modules/module.py\", line 1052, in load_state_dict\r\n    self.__class__.__name__, \"\\n\\t\".join(error_msgs)))\r\nRuntimeError: Error(s) in loading state_dict for E2E:\r\n\tMissing key(s) in state_dict: \"ctc.ctc_lo.weight\", \"ctc.ctc_lo.bias\", \"encoder.embed.conv.0.weight\", \"encoder.embed.conv.0.bias\", \"encoder.embed.conv.2.weight\", \"encoder.embed.conv.2.bias\", \"encoder.embed.out.0.weight\", \"encoder.embed.out.0.bias\", \"encoder.encoders.0.self_attn.pos_bias_u\", \"encoder.encoders.0.self_attn.pos_bias_v\", \"encoder.encoders.0.self_attn.linear_q.weight\", \"encoder.encoders.0.self_attn.linear_q.bias\", \"encoder.encoders.0.self_attn.linear_k.weight\", \"encoder.encoders.0.self_attn.linear_k.bias\", \"encoder.encoders.0.self_attn.linear_v.weight\", \"encoder.encoders.0.self_attn.linear_v.bias\", \"encoder.encoders.0.self_attn.linear_out.weight\", \"encoder.encoders.0.self_attn.linear_out.bias\", \"encoder.encoders.0.self_attn.linear_pos.weight\", \"encoder.encoders.0.feed_forward.w_1.weight\", \"encoder.encoders.0.feed_forward.w_1.bias\", \"encoder.encoders.0.feed_forward.w_2.weight\", \"encoder.encoders.0.feed_forward.w_2.bias\", \"encoder.encoders.0.feed_forward_macaron.w_1.weight\", \"encoder.encoders.0.feed_forward_macaron.w_1.bias\", \"encoder.encoders.0.feed_forward_macaron.w_2.weight\", \"encoder.encoders.0.feed_forward_macaron.w_2.bias\", \"encoder.encoders.0.conv_module.pointwise_conv1.weight\", \"encoder.encoders.0.conv_module.pointwise_conv1.bias\", \"encoder.encoders.0.conv_module.depthwise_conv.weight\", \"encoder.encoders.0.conv_module.depthwise_conv.bias\", \"encoder.encoders.0.conv_module.norm.weight\", \"encoder.encoders.0.conv_module.norm.bias\", \"encoder.encoders.0.conv_module.norm.running_mean\", \"encoder.encoders.0.conv_module.norm.running_var\", \"encoder.encoders.0.conv_module.pointwise_conv2.weight\", \"encoder.encoders.0.conv_module.pointwise_conv2.bias\", \"encoder.encoders.0.norm_ff.weight\", \"encoder.encoders.0.norm_ff.bias\", \"encoder.encoders.0.norm_mha.weight\", \"encoder.encoders.0.norm_mha.bias\", \"encoder.encoders.0.norm_ff_macaron.weight\", \"encoder.encoders.0.norm_ff_macaron.bias\", \"encoder.encoders.0.norm_conv.weight\", \"encoder.encoders.0.norm_conv.bias\", \"encoder.encoders.0.norm_final.weight\", \"encoder.encoders.0.norm_final.bias\", \"encoder.encoders.1.self_attn.pos_bias_u\", \"encoder.encoders.1.self_attn.pos_bias_v\", \"encoder.encoders.1.self_attn.linear_q.weight\", \"encoder.encoders.1.self_attn.linear_q.bias\", \"encoder.encoders.1.self_attn.linear_k.weight\", \"encoder.encoders.1.self_attn.linear_k.bias\", \"encoder.encoders.1.self_attn.linear_v.weight\", \"encoder.encoders.1.self_attn.linear_v.bias\", \"encoder.encoders.1.self_attn.linear_out.weight\", \"encoder.encoders.1.self_attn.linear_out.bias\", \"encoder.encoders.1.self_attn.linear_pos.weight\", \"encoder.encoders.1.feed_forward.w_1.weight\", \"encoder.encoders.1.feed_forward.w_1.bias\", \"encoder.encoders.1.feed_forward.w_2.weight\", \"encoder.encoders.1.feed_forward.w_2.bias\", \"encoder.encoders.1.feed_forward_macaron.w_1.weight\", \"encoder.encoders.1.feed_forward_macaron.w_1.bias\", \"encoder.encoders.1.feed_forward_macaron.w_2.weight\", \"encoder.encoders.1.feed_forward_macaron.w_2.bias\", \"encoder.encoders.1.conv_module.pointwise_conv1.weight\", \"encoder.encoders.1.conv_module.pointwise_conv1.bias\", \"encoder.encoders.1.conv_module.depthwise_conv.weight\", \"encoder.encoders.1.conv_module.depthwise_conv.bias\", \"encoder.encoders.1.conv_module.norm.weight\", \"encoder.encoders.1.conv_module.norm.bias\", \"encoder.encoders.1.conv_module.norm.running_mean\", \"encoder.encoders.1.conv_module.norm.running_var\", \"encoder.encoders.1.conv_module.pointwise_conv2.weight\", \"encoder.encoders.1.conv_module.pointwise_conv2.bias\", \"encoder.encoders.1.norm_ff.weight\", \"encoder.encoders.1.norm_ff.bias\", \"encoder.encoders.1.norm_mha.weight\", \"encoder.encoders.1.norm_mha.bias\", \"encoder.encoders.1.norm_ff_macaron.weight\", \"encoder.encoders.1.norm_ff_macaron.bias\", \"encoder.encoders.1.norm_conv.weight\", \"encoder.encoders.1.norm_conv.bias\", \"encoder.encoders.1.norm_final.weight\", \"encoder.encoders.1.norm_final.bias\", \"encoder.encoders.2.self_attn.pos_bias_u\", \"encoder.encoders.2.self_attn.pos_bias_v\", \"encoder.encoders.2.self_attn.linear_q.weight\", \"encoder.encoders.2.self_attn.linear_q.bias\", \"encoder.encoders.2.self_attn.linear_k.weight\", \"encoder.encoders.2.self_attn.linear_k.bias\", \"encoder.encoders.2.self_attn.linear_v.weight\", \"encoder.encoders.2.self_attn.linear_v.bias\", \"encoder.encoders.2.self_attn.linear_out.weight\", \"encoder.encoders.2.self_attn.linear_out.bias\", \"encoder.encoders.2.self_attn.linear_pos.weight\", \"encoder.encoders.2.feed_forward.w_1.weight\", \"encoder.encoders.2.feed_forward.w_1.bias\", \"encoder.encoders.2.feed_forward.w_2.weight\", \"encoder.encoders.2.feed_forward.w_2.bias\", \"encoder.encoders.2.feed_forward_macaron.w_1.weight\", \"encoder.encoders.2.feed_forward_macaron.w_1.bias\", \"encoder.encoders.2.feed_forward_macaron.w_2.weight\", \"encoder.encoders.2.feed_forward_macaron.w_2.bias\", \"encoder.encoders.2.conv_module.pointwise_conv1.weight\", \"encoder.encoders.2.conv_module.pointwise_conv1.bias\", \"encoder.encoders.2.conv_module.depthwise_conv.weight\", \"encoder.encoders.2.conv_module.depthwise_conv.bias\", \"encoder.encoders.2.conv_module.norm.weight\", \"encoder.encoders.2.conv_module.norm.bias\", \"encoder.encoders.2.conv_module.norm.running_mean\", \"encoder.encoders.2.conv_module.norm.running_var\", \"encoder.encoders.2.conv_module.pointwise_conv2.weight\", \"encoder.encoders.2.conv_module.pointwise_conv2.bias\", \"encoder.encoders.2.norm_ff.weight\", \"encoder.encoders.2.norm_ff.bias\", \"encoder.encoders.2.norm_mha.weight\", \"encoder.encoders.2.norm_mha.bias\", \"encoder.encoders.2.norm_ff_macaron.weight\", \"encoder.encoders.2.norm_ff_macaron.bias\", \"encoder.encoders.2.norm_conv.weight\", \"encoder.encoders.2.norm_conv.bias\", \"encoder.encoders.2.norm_final.weight\", \"encoder.encoders.2.norm_final.bias\", \"encoder.encoders.3.self_attn.pos_bias_u\", \"encoder.encoders.3.self_attn.pos_bias_v\", \"encoder.encoders.3.self_attn.linear_q.weight\", \"encoder.encoders.3.self_attn.linear_q.bias\", \"encoder.encoders.3.self_attn.linear_k.weight\", \"encoder.encoders.3.self_attn.linear_k.bias\", \"encoder.encoders.3.self_attn.linear_v.weight\", \"encoder.encoders.3.self_attn.linear_v.bias\", \"encoder.encoders.3.self_attn.linear_out.weight\", \"encoder.encoders.3.self_attn.linear_out.bias\", \"encoder.encoders.3.self_attn.linear_pos.weight\", \"encoder.encoders.3.feed_forward.w_1.weight\", \"encoder.encoders.3.feed_forward.w_1.bias\", \"encoder.encoders.3.feed_forward.w_2.weight\", \"encoder.encoders.3.feed_forward.w_2.bias\", \"encoder.encoders.3.feed_forward_macaron.w_1.weight\", \"encoder.encoders.3.feed_forward_macaron.w_1.bias\", \"encoder.encoders.3.feed_forward_macaron.w_2.weight\", \"encoder.encoders.3.feed_forward_macaron.w_2.bias\", \"encoder.encoders.3.conv_module.pointwise_conv1.weight\", \"encoder.encoders.3.conv_module.pointwise_conv1.bias\", \"encoder.encoders.3.conv_module.depthwise_conv.weight\", \"encoder.encoders.3.conv_module.depthwise_conv.bias\", \"encoder.encoders.3.conv_module.norm.weight\", \"encoder.encoders.3.conv_module.norm.bias\", \"encoder.encoders.3.conv_module.norm.running_mean\", \"encoder.encoders.3.conv_module.norm.running_var\", \"encoder.encoders.3.conv_module.pointwise_conv2.weight\", \"encoder.encoders.3.conv_module.pointwise_conv2.bias\", \"encoder.encoders.3.norm_ff.weight\", \"encoder.encoders.3.norm_ff.bias\", \"encoder.encoders.3.norm_mha.weight\", \"encoder.encoders.3.norm_mha.bias\", \"encoder.encoders.3.norm_ff_macaron.weight\", \"encoder.encoders.3.norm_ff_macaron.bias\", \"encoder.encoders.3.norm_conv.weight\", \"encoder.encoders.3.norm_conv.bias\", \"encoder.encoders.3.norm_final.weight\", \"encoder.encoders.3.norm_final.bias\", \"encoder.encoders.4.self_attn.pos_bias_u\", \"encoder.encoders.4.self_attn.pos_bias_v\", \"encoder.encoders.4.self_attn.linear_q.weight\", \"encoder.encoders.4.self_attn.linear_q.bias\", \"encoder.encoders.4.self_attn.linear_k.weight\", \"encoder.encoders.4.self_attn.linear_k.bias\", \"encoder.encoders.4.self_attn.linear_v.weight\", \"encoder.encoders.4.self_attn.linear_v.bias\", \"encoder.encoders.4.self_attn.linear_out.weight\", \"encoder.encoders.4.self_attn.linear_out.bias\", \"encoder.encoders.4.self_attn.linear_pos.weight\", \"encoder.encoders.4.feed_forward.w_1.weight\", \"encoder.encoders.4.feed_forward.w_1.bias\", \"encoder.encoders.4.feed_forward.w_2.weight\", \"encoder.encoders.4.feed_forward.w_2.bias\", \"encoder.encoders.4.feed_forward_macaron.w_1.weight\", \"encoder.encoders.4.feed_forward_macaron.w_1.bias\", \"encoder.encoders.4.feed_forward_macaron.w_2.weight\", \"encoder.encoders.4.feed_forward_macaron.w_2.bias\", \"encoder.encoders.4.conv_module.pointwise_conv1.weight\", \"encoder.encoders.4.conv_module.pointwise_conv1.bias\", \"encoder.encoders.4.conv_module.depthwise_conv.weight\", \"encoder.encoders.4.conv_module.depthwise_conv.bias\", \"encoder.encoders.4.conv_module.norm.weight\", \"encoder.encoders.4.conv_module.norm.bias\", \"encoder.encoders.4.conv_module.norm.running_mean\", \"encoder.encoders.4.conv_module.norm.running_var\", \"encoder.encoders.4.conv_module.pointwise_conv2.weight\", \"encoder.encoders.4.conv_module.pointwise_conv2.bias\", \"encoder.encoders.4.norm_ff.weight\", \"encoder.encoders.4.norm_ff.bias\", \"encoder.encoders.4.norm_mha.weight\", \"encoder.encoders.4.norm_mha.bias\", \"encoder.encoders.4.norm_ff_macaron.weight\", \"encoder.encoders.4.norm_ff_macaron.bias\", \"encoder.encoders.4.norm_conv.weight\", \"encoder.encoders.4.norm_conv.bias\", \"encoder.encoders.4.norm_final.weight\", \"encoder.encoders.4.norm_final.bias\", \"encoder.encoders.5.self_attn.pos_bias_u\", \"encoder.encoders.5.self_attn.pos_bias_v\", \"encoder.encoders.5.self_attn.linear_q.weight\", \"encoder.encoders.5.self_attn.linear_q.bias\", \"encoder.encoders.5.self_attn.linear_k.weight\", \"encoder.encoders.5.self_attn.linear_k.bias\", \"encoder.encoders.5.self_attn.linear_v.weight\", \"encoder.encoders.5.self_attn.linear_v.bias\", \"encoder.encoders.5.self_attn.linear_out.weight\", \"encoder.encoders.5.self_attn.linear_out.bias\", \"encoder.encoders.5.self_attn.linear_pos.weight\", \"encoder.encoders.5.feed_forward.w_1.weight\", \"encoder.encoders.5.feed_forward.w_1.bias\", \"encoder.encoders.5.feed_forward.w_2.weight\", \"encoder.encoders.5.feed_forward.w_2.bias\", \"encoder.encoders.5.feed_forward_macaron.w_1.weight\", \"encoder.encoders.5.feed_forward_macaron.w_1.bias\", \"encoder.encoders.5.feed_forward_macaron.w_2.weight\", \"encoder.encoders.5.feed_forward_macaron.w_2.bias\", \"encoder.encoders.5.conv_module.pointwise_conv1.weight\", \"encoder.encoders.5.conv_module.pointwise_conv1.bias\", \"encoder.encoders.5.conv_module.depthwise_conv.weight\", \"encoder.encoders.5.conv_module.depthwise_conv.bias\", \"encoder.encoders.5.conv_module.norm.weight\", \"encoder.encoders.5.conv_module.norm.bias\", \"encoder.encoders.5.conv_module.norm.running_mean\", \"encoder.encoders.5.conv_module.norm.running_var\", \"encoder.encoders.5.conv_module.pointwise_conv2.weight\", \"encoder.encoders.5.conv_module.pointwise_conv2.bias\", \"encoder.encoders.5.norm_ff.weight\", \"encoder.encoders.5.norm_ff.bias\", \"encoder.encoders.5.norm_mha.weight\", \"encoder.encoders.5.norm_mha.bias\", \"encoder.encoders.5.norm_ff_macaron.weight\", \"encoder.encoders.5.norm_ff_macaron.bias\", \"encoder.encoders.5.norm_conv.weight\", \"encoder.encoders.5.norm_conv.bias\", \"encoder.encoders.5.norm_final.weight\", \"encoder.encoders.5.norm_final.bias\", \"encoder.encoders.6.self_attn.pos_bias_u\", \"encoder.encoders.6.self_attn.pos_bias_v\", \"encoder.encoders.6.self_attn.linear_q.weight\", \"encoder.encoders.6.self_attn.linear_q.bias\", \"encoder.encoders.6.self_attn.linear_k.weight\", \"encoder.encoders.6.self_attn.linear_k.bias\", \"encoder.encoders.6.self_attn.linear_v.weight\", \"encoder.encoders.6.self_attn.linear_v.bias\", \"encoder.encoders.6.self_attn.linear_out.weight\", \"encoder.encoders.6.self_attn.linear_out.bias\", \"encoder.encoders.6.self_attn.linear_pos.weight\", \"encoder.encoders.6.feed_forward.w_1.weight\", \"encoder.encoders.6.feed_forward.w_1.bias\", \"encoder.encoders.6.feed_forward.w_2.weight\", \"encoder.encoders.6.feed_forward.w_2.bias\", \"encoder.encoders.6.feed_forward_macaron.w_1.weight\", \"encoder.encoders.6.feed_forward_macaron.w_1.bias\", \"encoder.encoders.6.feed_forward_macaron.w_2.weight\", \"encoder.encoders.6.feed_forward_macaron.w_2.bias\", \"encoder.encoders.6.conv_module.pointwise_conv1.weight\", \"encoder.encoders.6.conv_module.pointwise_conv1.bias\", \"encoder.encoders.6.conv_module.depthwise_conv.weight\", \"encoder.encoders.6.conv_module.depthwise_conv.bias\", \"encoder.encoders.6.conv_module.norm.weight\", \"encoder.encoders.6.conv_module.norm.bias\", \"encoder.encoders.6.conv_module.norm.running_mean\", \"encoder.encoders.6.conv_module.norm.running_var\", \"encoder.encoders.6.conv_module.pointwise_conv2.weight\", \"encoder.encoders.6.conv_module.pointwise_conv2.bias\", \"encoder.encoders.6.norm_ff.weight\", \"encoder.encoders.6.norm_ff.bias\", \"encoder.encoders.6.norm_mha.weight\", \"encoder.encoders.6.norm_mha.bias\", \"encoder.encoders.6.norm_ff_macaron.weight\", \"encoder.encoders.6.norm_ff_macaron.bias\", \"encoder.encoders.6.norm_conv.weight\", \"encoder.encoders.6.norm_conv.bias\", \"encoder.encoders.6.norm_final.weight\", \"encoder.encoders.6.norm_final.bias\", \"encoder.encoders.7.self_attn.pos_bias_u\", \"encoder.encoders.7.self_attn.pos_bias_v\", \"encoder.encoders.7.self_attn.linear_q.weight\", \"encoder.encoders.7.self_attn.linear_q.bias\", \"encoder.encoders.7.self_attn.linear_k.weight\", \"encoder.encoders.7.self_attn.linear_k.bias\", \"encoder.encoders.7.self_attn.linear_v.weight\", \"encoder.encoders.7.self_attn.linear_v.bias\", \"encoder.encoders.7.self_attn.linear_out.weight\", \"encoder.encoders.7.self_attn.linear_out.bias\", \"encoder.encoders.7.self_attn.linear_pos.weight\", \"encoder.encoders.7.feed_forward.w_1.weight\", \"encoder.encoders.7.feed_forward.w_1.bias\", \"encoder.encoders.7.feed_forward.w_2.weight\", \"encoder.encoders.7.feed_forward.w_2.bias\", \"encoder.encoders.7.feed_forward_macaron.w_1.weight\", \"encoder.encoders.7.feed_forward_macaron.w_1.bias\", \"encoder.encoders.7.feed_forward_macaron.w_2.weight\", \"encoder.encoders.7.feed_forward_macaron.w_2.bias\", \"encoder.encoders.7.conv_module.pointwise_conv1.weight\", \"encoder.encoders.7.conv_module.pointwise_conv1.bias\", \"encoder.encoders.7.conv_module.depthwise_conv.weight\", \"encoder.encoders.7.conv_module.depthwise_conv.bias\", \"encoder.encoders.7.conv_module.norm.weight\", \"encoder.encoders.7.conv_module.norm.bias\", \"encoder.encoders.7.conv_module.norm.running_mean\", \"encoder.encoders.7.conv_module.norm.running_var\", \"encoder.encoders.7.conv_module.pointwise_conv2.weight\", \"encoder.encoders.7.conv_module.pointwise_conv2.bias\", \"encoder.encoders.7.norm_ff.weight\", \"encoder.encoders.7.norm_ff.bias\", \"encoder.encoders.7.norm_mha.weight\", \"encoder.encoders.7.norm_mha.bias\", \"encoder.encoders.7.norm_ff_macaron.weight\", \"encoder.encoders.7.norm_ff_macaron.bias\", \"encoder.encoders.7.norm_conv.weight\", \"encoder.encoders.7.norm_conv.bias\", \"encoder.encoders.7.norm_final.weight\", \"encoder.encoders.7.norm_final.bias\", \"encoder.encoders.8.self_attn.pos_bias_u\", \"encoder.encoders.8.self_attn.pos_bias_v\", \"encoder.encoders.8.self_attn.linear_q.weight\", \"encoder.encoders.8.self_attn.linear_q.bias\", \"encoder.encoders.8.self_attn.linear_k.weight\", \"encoder.encoders.8.self_attn.linear_k.bias\", \"encoder.encoders.8.self_attn.linear_v.weight\", \"encoder.encoders.8.self_attn.linear_v.bias\", \"encoder.encoders.8.self_attn.linear_out.weight\", \"encoder.encoders.8.self_attn.linear_out.bias\", \"encoder.encoders.8.self_attn.linear_pos.weight\", \"encoder.encoders.8.feed_forward.w_1.weight\", \"encoder.encoders.8.feed_forward.w_1.bias\", \"encoder.encoders.8.feed_forward.w_2.weight\", \"encoder.encoders.8.feed_forward.w_2.bias\", \"encoder.encoders.8.feed_forward_macaron.w_1.weight\", \"encoder.encoders.8.feed_forward_macaron.w_1.bias\", \"encoder.encoders.8.feed_forward_macaron.w_2.weight\", \"encoder.encoders.8.feed_forward_macaron.w_2.bias\", \"encoder.encoders.8.conv_module.pointwise_conv1.weight\", \"encoder.encoders.8.conv_module.pointwise_conv1.bias\", \"encoder.encoders.8.conv_module.depthwise_conv.weight\", \"encoder.encoders.8.conv_module.depthwise_conv.bias\", \"encoder.encoders.8.conv_module.norm.weight\", \"encoder.encoders.8.conv_module.norm.bias\", \"encoder.encoders.8.conv_module.norm.running_mean\", \"encoder.encoders.8.conv_module.norm.running_var\", \"encoder.encoders.8.conv_module.pointwise_conv2.weight\", \"encoder.encoders.8.conv_module.pointwise_conv2.bias\", \"encoder.encoders.8.norm_ff.weight\", \"encoder.encoders.8.norm_ff.bias\", \"encoder.encoders.8.norm_mha.weight\", \"encoder.encoders.8.norm_mha.bias\", \"encoder.encoders.8.norm_ff_macaron.weight\", \"encoder.encoders.8.norm_ff_macaron.bias\", \"encoder.encoders.8.norm_conv.weight\", \"encoder.encoders.8.norm_conv.bias\", \"encoder.encoders.8.norm_final.weight\", \"encoder.encoders.8.norm_final.bias\", \"encoder.encoders.9.self_attn.pos_bias_u\", \"encoder.encoders.9.self_attn.pos_bias_v\", \"encoder.encoders.9.self_attn.linear_q.weight\", \"encoder.encoders.9.self_attn.linear_q.bias\", \"encoder.encoders.9.self_attn.linear_k.weight\", \"encoder.encoders.9.self_attn.linear_k.bias\", \"encoder.encoders.9.self_attn.linear_v.weight\", \"encoder.encoders.9.self_attn.linear_v.bias\", \"encoder.encoders.9.self_attn.linear_out.weight\", \"encoder.encoders.9.self_attn.linear_out.bias\", \"encoder.encoders.9.self_attn.linear_pos.weight\", \"encoder.encoders.9.feed_forward.w_1.weight\", \"encoder.encoders.9.feed_forward.w_1.bias\", \"encoder.encoders.9.feed_forward.w_2.weight\", \"encoder.encoders.9.feed_forward.w_2.bias\", \"encoder.encoders.9.feed_forward_macaron.w_1.weight\", \"encoder.encoders.9.feed_forward_macaron.w_1.bias\", \"encoder.encoders.9.feed_forward_macaron.w_2.weight\", \"encoder.encoders.9.feed_forward_macaron.w_2.bias\", \"encoder.encoders.9.conv_module.pointwise_conv1.weight\", \"encoder.encoders.9.conv_module.pointwise_conv1.bias\", \"encoder.encoders.9.conv_module.depthwise_conv.weight\", \"encoder.encoders.9.conv_module.depthwise_conv.bias\", \"encoder.encoders.9.conv_module.norm.weight\", \"encoder.encoders.9.conv_module.norm.bias\", \"encoder.encoders.9.conv_module.norm.running_mean\", \"encoder.encoders.9.conv_module.norm.running_var\", \"encoder.encoders.9.conv_module.pointwise_conv2.weight\", \"encoder.encoders.9.conv_module.pointwise_conv2.bias\", \"encoder.encoders.9.norm_ff.weight\", \"encoder.encoders.9.norm_ff.bias\", \"encoder.encoders.9.norm_mha.weight\", \"encoder.encoders.9.norm_mha.bias\", \"encoder.encoders.9.norm_ff_macaron.weight\", \"encoder.encoders.9.norm_ff_macaron.bias\", \"encoder.encoders.9.norm_conv.weight\", \"encoder.encoders.9.norm_conv.bias\", \"encoder.encoders.9.norm_final.weight\", \"encoder.encoders.9.norm_final.bias\", \"encoder.encoders.10.self_attn.pos_bias_u\", \"encoder.encoders.10.self_attn.pos_bias_v\", \"encoder.encoders.10.self_attn.linear_q.weight\", \"encoder.encoders.10.self_attn.linear_q.bias\", \"encoder.encoders.10.self_attn.linear_k.weight\", \"encoder.encoders.10.self_attn.linear_k.bias\", \"encoder.encoders.10.self_attn.linear_v.weight\", \"encoder.encoders.10.self_attn.linear_v.bias\", \"encoder.encoders.10.self_attn.linear_out.weight\", \"encoder.encoders.10.self_attn.linear_out.bias\", \"encoder.encoders.10.self_attn.linear_pos.weight\", \"encoder.encoders.10.feed_forward.w_1.weight\", \"encoder.encoders.10.feed_forward.w_1.bias\", \"encoder.encoders.10.feed_forward.w_2.weight\", \"encoder.encoders.10.feed_forward.w_2.bias\", \"encoder.encoders.10.feed_forward_macaron.w_1.weight\", \"encoder.encoders.10.feed_forward_macaron.w_1.bias\", \"encoder.encoders.10.feed_forward_macaron.w_2.weight\", \"encoder.encoders.10.feed_forward_macaron.w_2.bias\", \"encoder.encoders.10.conv_module.pointwise_conv1.weight\", \"encoder.encoders.10.conv_module.pointwise_conv1.bias\", \"encoder.encoders.10.conv_module.depthwise_conv.weight\", \"encoder.encoders.10.conv_module.depthwise_conv.bias\", \"encoder.encoders.10.conv_module.norm.weight\", \"encoder.encoders.10.conv_module.norm.bias\", \"encoder.encoders.10.conv_module.norm.running_mean\", \"encoder.encoders.10.conv_module.norm.running_var\", \"encoder.encoders.10.conv_module.pointwise_conv2.weight\", \"encoder.encoders.10.conv_module.pointwise_conv2.bias\", \"encoder.encoders.10.norm_ff.weight\", \"encoder.encoders.10.norm_ff.bias\", \"encoder.encoders.10.norm_mha.weight\", \"encoder.encoders.10.norm_mha.bias\", \"encoder.encoders.10.norm_ff_macaron.weight\", \"encoder.encoders.10.norm_ff_macaron.bias\", \"encoder.encoders.10.norm_conv.weight\", \"encoder.encoders.10.norm_conv.bias\", \"encoder.encoders.10.norm_final.weight\", \"encoder.encoders.10.norm_final.bias\", \"encoder.encoders.11.self_attn.pos_bias_u\", \"encoder.encoders.11.self_attn.pos_bias_v\", \"encoder.encoders.11.self_attn.linear_q.weight\", \"encoder.encoders.11.self_attn.linear_q.bias\", \"encoder.encoders.11.self_attn.linear_k.weight\", \"encoder.encoders.11.self_attn.linear_k.bias\", \"encoder.encoders.11.self_attn.linear_v.weight\", \"encoder.encoders.11.self_attn.linear_v.bias\", \"encoder.encoders.11.self_attn.linear_out.weight\", \"encoder.encoders.11.self_attn.linear_out.bias\", \"encoder.encoders.11.self_attn.linear_pos.weight\", \"encoder.encoders.11.feed_forward.w_1.weight\", \"encoder.encoders.11.feed_forward.w_1.bias\", \"encoder.encoders.11.feed_forward.w_2.weight\", \"encoder.encoders.11.feed_forward.w_2.bias\", \"encoder.encoders.11.feed_forward_macaron.w_1.weight\", \"encoder.encoders.11.feed_forward_macaron.w_1.bias\", \"encoder.encoders.11.feed_forward_macaron.w_2.weight\", \"encoder.encoders.11.feed_forward_macaron.w_2.bias\", \"encoder.encoders.11.conv_module.pointwise_conv1.weight\", \"encoder.encoders.11.conv_module.pointwise_conv1.bias\", \"encoder.encoders.11.conv_module.depthwise_conv.weight\", \"encoder.encoders.11.conv_module.depthwise_conv.bias\", \"encoder.encoders.11.conv_module.norm.weight\", \"encoder.encoders.11.conv_module.norm.bias\", \"encoder.encoders.11.conv_module.norm.running_mean\", \"encoder.encoders.11.conv_module.norm.running_var\", \"encoder.encoders.11.conv_module.pointwise_conv2.weight\", \"encoder.encoders.11.conv_module.pointwise_conv2.bias\", \"encoder.encoders.11.norm_ff.weight\", \"encoder.encoders.11.norm_ff.bias\", \"encoder.encoders.11.norm_mha.weight\", \"encoder.encoders.11.norm_mha.bias\", \"encoder.encoders.11.norm_ff_macaron.weight\", \"encoder.encoders.11.norm_ff_macaron.bias\", \"encoder.encoders.11.norm_conv.weight\", \"encoder.encoders.11.norm_conv.bias\", \"encoder.encoders.11.norm_final.weight\", \"encoder.encoders.11.norm_final.bias\", \"encoder.after_norm.weight\", \"encoder.after_norm.bias\", \"decoder.embed.0.weight\", \"decoder.decoders.0.self_attn.linear_q.weight\", \"decoder.decoders.0.self_attn.linear_q.bias\", \"decoder.decoders.0.self_attn.linear_k.weight\", \"decoder.decoders.0.self_attn.linear_k.bias\", \"decoder.decoders.0.self_attn.linear_v.weight\", \"decoder.decoders.0.self_attn.linear_v.bias\", \"decoder.decoders.0.self_attn.linear_out.weight\", \"decoder.decoders.0.self_attn.linear_out.bias\", \"decoder.decoders.0.src_attn.linear_q.weight\", \"decoder.decoders.0.src_attn.linear_q.bias\", \"decoder.decoders.0.src_attn.linear_k.weight\", \"decoder.decoders.0.src_attn.linear_k.bias\", \"decoder.decoders.0.src_attn.linear_v.weight\", \"decoder.decoders.0.src_attn.linear_v.bias\", \"decoder.decoders.0.src_attn.linear_out.weight\", \"decoder.decoders.0.src_attn.linear_out.bias\", \"decoder.decoders.0.feed_forward.w_1.weight\", \"decoder.decoders.0.feed_forward.w_1.bias\", \"decoder.decoders.0.feed_forward.w_2.weight\", \"decoder.decoders.0.feed_forward.w_2.bias\", \"decoder.decoders.0.norm1.weight\", \"decoder.decoders.0.norm1.bias\", \"decoder.decoders.0.norm2.weight\", \"decoder.decoders.0.norm2.bias\", \"decoder.decoders.0.norm3.weight\", \"decoder.decoders.0.norm3.bias\", \"decoder.decoders.1.self_attn.linear_q.weight\", \"decoder.decoders.1.self_attn.linear_q.bias\", \"decoder.decoders.1.self_attn.linear_k.weight\", \"decoder.decoders.1.self_attn.linear_k.bias\", \"decoder.decoders.1.self_attn.linear_v.weight\", \"decoder.decoders.1.self_attn.linear_v.bias\", \"decoder.decoders.1.self_attn.linear_out.weight\", \"decoder.decoders.1.self_attn.linear_out.bias\", \"decoder.decoders.1.src_attn.linear_q.weight\", \"decoder.decoders.1.src_attn.linear_q.bias\", \"decoder.decoders.1.src_attn.linear_k.weight\", \"decoder.decoders.1.src_attn.linear_k.bias\", \"decoder.decoders.1.src_attn.linear_v.weight\", \"decoder.decoders.1.src_attn.linear_v.bias\", \"decoder.decoders.1.src_attn.linear_out.weight\", \"decoder.decoders.1.src_attn.linear_out.bias\", \"decoder.decoders.1.feed_forward.w_1.weight\", \"decoder.decoders.1.feed_forward.w_1.bias\", \"decoder.decoders.1.feed_forward.w_2.weight\", \"decoder.decoders.1.feed_forward.w_2.bias\", \"decoder.decoders.1.norm1.weight\", \"decoder.decoders.1.norm1.bias\", \"decoder.decoders.1.norm2.weight\", \"decoder.decoders.1.norm2.bias\", \"decoder.decoders.1.norm3.weight\", \"decoder.decoders.1.norm3.bias\", \"decoder.decoders.2.self_attn.linear_q.weight\", \"decoder.decoders.2.self_attn.linear_q.bias\", \"decoder.decoders.2.self_attn.linear_k.weight\", \"decoder.decoders.2.self_attn.linear_k.bias\", \"decoder.decoders.2.self_attn.linear_v.weight\", \"decoder.decoders.2.self_attn.linear_v.bias\", \"decoder.decoders.2.self_attn.linear_out.weight\", \"decoder.decoders.2.self_attn.linear_out.bias\", \"decoder.decoders.2.src_attn.linear_q.weight\", \"decoder.decoders.2.src_attn.linear_q.bias\", \"decoder.decoders.2.src_attn.linear_k.weight\", \"decoder.decoders.2.src_attn.linear_k.bias\", \"decoder.decoders.2.src_attn.linear_v.weight\", \"decoder.decoders.2.src_attn.linear_v.bias\", \"decoder.decoders.2.src_attn.linear_out.weight\", \"decoder.decoders.2.src_attn.linear_out.bias\", \"decoder.decoders.2.feed_forward.w_1.weight\", \"decoder.decoders.2.feed_forward.w_1.bias\", \"decoder.decoders.2.feed_forward.w_2.weight\", \"decoder.decoders.2.feed_forward.w_2.bias\", \"decoder.decoders.2.norm1.weight\", \"decoder.decoders.2.norm1.bias\", \"decoder.decoders.2.norm2.weight\", \"decoder.decoders.2.norm2.bias\", \"decoder.decoders.2.norm3.weight\", \"decoder.decoders.2.norm3.bias\", \"decoder.decoders.3.self_attn.linear_q.weight\", \"decoder.decoders.3.self_attn.linear_q.bias\", \"decoder.decoders.3.self_attn.linear_k.weight\", \"decoder.decoders.3.self_attn.linear_k.bias\", \"decoder.decoders.3.self_attn.linear_v.weight\", \"decoder.decoders.3.self_attn.linear_v.bias\", \"decoder.decoders.3.self_attn.linear_out.weight\", \"decoder.decoders.3.self_attn.linear_out.bias\", \"decoder.decoders.3.src_attn.linear_q.weight\", \"decoder.decoders.3.src_attn.linear_q.bias\", \"decoder.decoders.3.src_attn.linear_k.weight\", \"decoder.decoders.3.src_attn.linear_k.bias\", \"decoder.decoders.3.src_attn.linear_v.weight\", \"decoder.decoders.3.src_attn.linear_v.bias\", \"decoder.decoders.3.src_attn.linear_out.weight\", \"decoder.decoders.3.src_attn.linear_out.bias\", \"decoder.decoders.3.feed_forward.w_1.weight\", \"decoder.decoders.3.feed_forward.w_1.bias\", \"decoder.decoders.3.feed_forward.w_2.weight\", \"decoder.decoders.3.feed_forward.w_2.bias\", \"decoder.decoders.3.norm1.weight\", \"decoder.decoders.3.norm1.bias\", \"decoder.decoders.3.norm2.weight\", \"decoder.decoders.3.norm2.bias\", \"decoder.decoders.3.norm3.weight\", \"decoder.decoders.3.norm3.bias\", \"decoder.decoders.4.self_attn.linear_q.weight\", \"decoder.decoders.4.self_attn.linear_q.bias\", \"decoder.decoders.4.self_attn.linear_k.weight\", \"decoder.decoders.4.self_attn.linear_k.bias\", \"decoder.decoders.4.self_attn.linear_v.weight\", \"decoder.decoders.4.self_attn.linear_v.bias\", \"decoder.decoders.4.self_attn.linear_out.weight\", \"decoder.decoders.4.self_attn.linear_out.bias\", \"decoder.decoders.4.src_attn.linear_q.weight\", \"decoder.decoders.4.src_attn.linear_q.bias\", \"decoder.decoders.4.src_attn.linear_k.weight\", \"decoder.decoders.4.src_attn.linear_k.bias\", \"decoder.decoders.4.src_attn.linear_v.weight\", \"decoder.decoders.4.src_attn.linear_v.bias\", \"decoder.decoders.4.src_attn.linear_out.weight\", \"decoder.decoders.4.src_attn.linear_out.bias\", \"decoder.decoders.4.feed_forward.w_1.weight\", \"decoder.decoders.4.feed_forward.w_1.bias\", \"decoder.decoders.4.feed_forward.w_2.weight\", \"decoder.decoders.4.feed_forward.w_2.bias\", \"decoder.decoders.4.norm1.weight\", \"decoder.decoders.4.norm1.bias\", \"decoder.decoders.4.norm2.weight\", \"decoder.decoders.4.norm2.bias\", \"decoder.decoders.4.norm3.weight\", \"decoder.decoders.4.norm3.bias\", \"decoder.decoders.5.self_attn.linear_q.weight\", \"decoder.decoders.5.self_attn.linear_q.bias\", \"decoder.decoders.5.self_attn.linear_k.weight\", \"decoder.decoders.5.self_attn.linear_k.bias\", \"decoder.decoders.5.self_attn.linear_v.weight\", \"decoder.decoders.5.self_attn.linear_v.bias\", \"decoder.decoders.5.self_attn.linear_out.weight\", \"decoder.decoders.5.self_attn.linear_out.bias\", \"decoder.decoders.5.src_attn.linear_q.weight\", \"decoder.decoders.5.src_attn.linear_q.bias\", \"decoder.decoders.5.src_attn.linear_k.weight\", \"decoder.decoders.5.src_attn.linear_k.bias\", \"decoder.decoders.5.src_attn.linear_v.weight\", \"decoder.decoders.5.src_attn.linear_v.bias\", \"decoder.decoders.5.src_attn.linear_out.weight\", \"decoder.decoders.5.src_attn.linear_out.bias\", \"decoder.decoders.5.feed_forward.w_1.weight\", \"decoder.decoders.5.feed_forward.w_1.bias\", \"decoder.decoders.5.feed_forward.w_2.weight\", \"decoder.decoders.5.feed_forward.w_2.bias\", \"decoder.decoders.5.norm1.weight\", \"decoder.decoders.5.norm1.bias\", \"decoder.decoders.5.norm2.weight\", \"decoder.decoders.5.norm2.bias\", \"decoder.decoders.5.norm3.weight\", \"decoder.decoders.5.norm3.bias\", \"decoder.after_norm.weight\", \"decoder.after_norm.bias\", \"decoder.output_layer.weight\", \"decoder.output_layer.bias\". \r\n\tUnexpected key(s) in state_dict: \"predictor.embed.weight\", \"predictor.rnn.0.weight_ih\", \"predictor.rnn.0.weight_hh\", \"predictor.rnn.0.bias_ih\", \"predictor.rnn.0.bias_hh\", \"predictor.rnn.1.weight_ih\", \"predictor.rnn.1.weight_hh\", \"predictor.rnn.1.bias_ih\", \"predictor.rnn.1.bias_hh\", \"predictor.lo.weight\", \"predictor.lo.bias\". \r\n[0m# Accounting: time=9 threads=1\r\n Ended (code 1) at Sat Mar 26 11:20:23 CST 2022, elapsed time 9 seconds", "reactions": {"url": "https://api.github.com/repos/espnet/espnet/issues/4208/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/espnet/espnet/issues/4208/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/espnet/espnet/issues/4135", "repository_url": "https://api.github.com/repos/espnet/espnet", "labels_url": "https://api.github.com/repos/espnet/espnet/issues/4135/labels{/name}", "comments_url": "https://api.github.com/repos/espnet/espnet/issues/4135/comments", "events_url": "https://api.github.com/repos/espnet/espnet/issues/4135/events", "html_url": "https://github.com/espnet/espnet/issues/4135", "id": 1160349150, "node_id": "I_kwDOBsxW2c5FKYXe", "number": 4135, "title": "In librispeech recipe i stop in stage 4 but i can not resume.", "user": {"login": "DaobinZhu", "id": 37605608, "node_id": "MDQ6VXNlcjM3NjA1NjA4", "avatar_url": "https://avatars.githubusercontent.com/u/37605608?v=4", "gravatar_id": "", "url": "https://api.github.com/users/DaobinZhu", "html_url": "https://github.com/DaobinZhu", "followers_url": "https://api.github.com/users/DaobinZhu/followers", "following_url": "https://api.github.com/users/DaobinZhu/following{/other_user}", "gists_url": "https://api.github.com/users/DaobinZhu/gists{/gist_id}", "starred_url": "https://api.github.com/users/DaobinZhu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/DaobinZhu/subscriptions", "organizations_url": "https://api.github.com/users/DaobinZhu/orgs", "repos_url": "https://api.github.com/users/DaobinZhu/repos", "events_url": "https://api.github.com/users/DaobinZhu/events{/privacy}", "received_events_url": "https://api.github.com/users/DaobinZhu/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 777173273, "node_id": "MDU6TGFiZWw3NzcxNzMyNzM=", "url": "https://api.github.com/repos/espnet/espnet/labels/Bug", "name": "Bug", "color": "ee0701", "default": false, "description": "bug should be fixed"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2022-03-05T13:17:11Z", "updated_at": "2022-03-05T15:02:10Z", "closed_at": "2022-03-05T15:02:10Z", "author_association": "NONE", "active_lock_reason": null, "body": "**Describe the bug**\r\nI used CTRL + C to exit the training while I was training the network in stage 4, but when I tried to continue training the network, I got an error.\r\n \r\n\r\n**Error logs**\r\nI key in \r\n`bash run.sh --resume /home/SuXiangDong/GPU20StuA/zdb/espnet/egs/librispeech/asr1/exp/train_rnnlm_pytorch_lm_unigram5000_ngpu4/snapshot.ep.17 --ngpu 4 --stage 4`\r\n\r\nthe snapshot is in here :\r\n![image](https://user-images.githubusercontent.com/37605608/156884667-2559db36-c285-4a89-9bb5-72f643aa119b.png)\r\n\r\nAnd the error log output in **\"/home/SuXiangDong/GPU20StuA/zdb/espnet/egs/librispeech/asr1/exp/train_960_pytorch_train_specaug/train.log\"**\r\n\r\n\r\n asr_train.py --config conf/train.yaml --preprocess-conf conf/specaug.yaml --ngpu 4 --backend pytorch --outdir exp/train_960_pytorch_train_specaug/results --tensorboard-dir tensorboard/train_960_pytorch_train_specaug --debugmode 1 --dict data/lang_char/train_960_unigram5000_units.txt --debugdir exp/train_960_pytorch_train_specaug --minibatches 0 --verbose 0 --resume /home/SuXiangDong/GPU20StuA/zdb/espnet/egs/librispeech/asr1/exp/train_rnnlm_pytorch_lm_unigram5000_ngpu4/snapshot.ep.16 --train-json dump/train_sp/deltafalse/data_unigram5000.json --valid-json dump/dev/deltafalse/data_unigram5000.json \r\n Started at Sat Mar  5 21:00:22 CST 2022\r\n\r\nAccounting: time=25 threads=1\r\nEnded (code 1) at Sat Mar  5 21:00:23 CST 2022, elapsed time 25 seconds\r\n2022-03-05 21:00:25,695 (asr_train:563) WARNING: Skip DEBUG/INFO messages\r\n2022-03-05 21:00:25,932 (ctc:38) WARNING: CTC was set to builtin due to PyTorch version.\r\n2022-03-05 21:00:26,540 (argument:79) WARNING: Using legacy_rel_pos and it will be deprecated in the future.\r\n2022-03-05 21:00:26,541 (argument:84) WARNING: Using legacy_rel_selfattn and it will be deprecated in the future.\r\n2022-03-05 21:00:27,185 (asr:471) WARNING: batch size is automatically increased (64 -> 256)\r\n2022-03-05 21:00:30,432 (asr:499) WARNING: num. model params: 116,412,180 (num. trained: 116,412,180 (100.0%))\r\n2022-03-05 21:00:50,302 (io_utils:59) WARNING: [Experimental feature] Some preprocessing will be done for the mini-batch creation using Transformation(\r\n    0: TimeWarp(max_time_warp=5, inplace=True, mode=PIL)\r\n    1: FreqMask(F=30, n_mask=2, replace_with_zero=False, inplace=True)\r\n    2: TimeMask(T=40, n_mask=2, replace_with_zero=False, inplace=True))\r\n2022-03-05 21:00:50,305 (io_utils:59) WARNING: [Experimental feature] Some preprocessing will be done for the mini-batch creation using Transformation(\r\n    0: TimeWarp(max_time_warp=5, inplace=True, mode=PIL)\r\n    1: FreqMask(F=30, n_mask=2, replace_with_zero=False, inplace=True)\r\n    2: TimeMask(T=40, n_mask=2, replace_with_zero=False, inplace=True))\r\nTraceback (most recent call last):\r\n  File \"/home/SuXiangDong/GPU20StuA/zdb/espnet/egs/librispeech/asr1/../../../espnet/bin/asr_train.py\", line 639, in <module>\r\n    main(sys.argv[1:])\r\n  File \"/home/SuXiangDong/GPU20StuA/zdb/espnet/egs/librispeech/asr1/../../../espnet/bin/asr_train.py\", line 625, in main\r\n    train(args)\r\n  File \"/home/SuXiangDong/GPU20StuA/zdb/espnet/espnet/asr/pytorch_backend/asr.py\", line 667, in train\r\n    torch_resume(args.resume, trainer)\r\n  File \"/home/SuXiangDong/GPU20StuA/zdb/espnet/espnet/asr/asr_utils.py\", line 798, in torch_resume\r\n    d.load(trainer)\r\n  File \"/home/SuXiangDong/GPU20StuA/anaconda3/envs/zdb/lib/python3.7/site-packages/chainer/serializer.py\", line 83, in load\r\n    obj.serialize(self)\r\n  File \"/home/SuXiangDong/GPU20StuA/anaconda3/envs/zdb/lib/python3.7/site-packages/chainer/training/trainer.py\", line 361, in serialize\r\n    self.updater.serialize(serializer['updater'])\r\n  File \"/home/SuXiangDong/GPU20StuA/anaconda3/envs/zdb/lib/python3.7/site-packages/chainer/training/updaters/standard_updater.py\", line 199, in serialize\r\n    iterator.serialize(serializer['iterator:' + name])\r\n  File \"/home/SuXiangDong/GPU20StuA/zdb/espnet/espnet/utils/dataset.py\", line 81, in serialize\r\n    current_position = serializer(\"current_position\", self.current_position)\r\n  File \"/home/SuXiangDong/GPU20StuA/anaconda3/envs/zdb/lib/python3.7/site-packages/chainer/serializers/npz.py\", line 175, in __call__\r\n    dataset = self.npz[key]\r\nKeyError: 'updater/iterator:main/current_position'\r\nAccounting: time=41 threads=1\r\nEnded (code 1) at Sat Mar  5 21:01:03 CST 2022, elapsed time 41 seconds\r\n", "reactions": {"url": "https://api.github.com/repos/espnet/espnet/issues/4135/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/espnet/espnet/issues/4135/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/espnet/espnet/issues/4131", "repository_url": "https://api.github.com/repos/espnet/espnet", "labels_url": "https://api.github.com/repos/espnet/espnet/issues/4131/labels{/name}", "comments_url": "https://api.github.com/repos/espnet/espnet/issues/4131/comments", "events_url": "https://api.github.com/repos/espnet/espnet/issues/4131/events", "html_url": "https://github.com/espnet/espnet/issues/4131", "id": 1159920679, "node_id": "I_kwDOBsxW2c5FIvwn", "number": 4131, "title": "awk error in scripts/utils/perturb_data_dir_speed.sh", "user": {"login": "woong97", "id": 60849888, "node_id": "MDQ6VXNlcjYwODQ5ODg4", "avatar_url": "https://avatars.githubusercontent.com/u/60849888?v=4", "gravatar_id": "", "url": "https://api.github.com/users/woong97", "html_url": "https://github.com/woong97", "followers_url": "https://api.github.com/users/woong97/followers", "following_url": "https://api.github.com/users/woong97/following{/other_user}", "gists_url": "https://api.github.com/users/woong97/gists{/gist_id}", "starred_url": "https://api.github.com/users/woong97/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/woong97/subscriptions", "organizations_url": "https://api.github.com/users/woong97/orgs", "repos_url": "https://api.github.com/users/woong97/repos", "events_url": "https://api.github.com/users/woong97/events{/privacy}", "received_events_url": "https://api.github.com/users/woong97/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 777173273, "node_id": "MDU6TGFiZWw3NzcxNzMyNzM=", "url": "https://api.github.com/repos/espnet/espnet/labels/Bug", "name": "Bug", "color": "ee0701", "default": false, "description": "bug should be fixed"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2022-03-04T18:17:29Z", "updated_at": "2022-03-05T07:35:14Z", "closed_at": "2022-03-05T07:35:14Z", "author_association": "NONE", "active_lock_reason": null, "body": "I tried to run egs2/an4/asr1/run.sh\r\n\r\nFirst, I ran local/data.sh in order to download data\r\nAfter that, I run run.sh\r\nBut it doesn't work in scripts/utils/perturb_data_dir_speed.sh\r\n\r\n[error log]\r\nawk: illegal field $(), name \"_\"\r\n    input record number 1, file\r\n    source line number 1\r\n\r\nHow can I solve this problem?", "reactions": {"url": "https://api.github.com/repos/espnet/espnet/issues/4131/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/espnet/espnet/issues/4131/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/espnet/espnet/issues/4128", "repository_url": "https://api.github.com/repos/espnet/espnet", "labels_url": "https://api.github.com/repos/espnet/espnet/issues/4128/labels{/name}", "comments_url": "https://api.github.com/repos/espnet/espnet/issues/4128/comments", "events_url": "https://api.github.com/repos/espnet/espnet/issues/4128/events", "html_url": "https://github.com/espnet/espnet/issues/4128", "id": 1158103688, "node_id": "I_kwDOBsxW2c5FB0KI", "number": 4128, "title": "Issue about st2 on fisher_callhome_spanish", "user": {"login": "D-Keqi", "id": 61508571, "node_id": "MDQ6VXNlcjYxNTA4NTcx", "avatar_url": "https://avatars.githubusercontent.com/u/61508571?v=4", "gravatar_id": "", "url": "https://api.github.com/users/D-Keqi", "html_url": "https://github.com/D-Keqi", "followers_url": "https://api.github.com/users/D-Keqi/followers", "following_url": "https://api.github.com/users/D-Keqi/following{/other_user}", "gists_url": "https://api.github.com/users/D-Keqi/gists{/gist_id}", "starred_url": "https://api.github.com/users/D-Keqi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/D-Keqi/subscriptions", "organizations_url": "https://api.github.com/users/D-Keqi/orgs", "repos_url": "https://api.github.com/users/D-Keqi/repos", "events_url": "https://api.github.com/users/D-Keqi/events{/privacy}", "received_events_url": "https://api.github.com/users/D-Keqi/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 777173273, "node_id": "MDU6TGFiZWw3NzcxNzMyNzM=", "url": "https://api.github.com/repos/espnet/espnet/labels/Bug", "name": "Bug", "color": "ee0701", "default": false, "description": "bug should be fixed"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2022-03-03T08:17:38Z", "updated_at": "2022-03-03T08:32:34Z", "closed_at": "2022-03-03T08:32:34Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Hi, all! @siddalmia @ftshijt \r\nThanks for your jobs on ST task!\r\n\r\nI come into a little issue when I use the latest ESPnet to the  ST egs2 of fisher_callhome_spanish, the error report is as follows:\r\n\r\nlocal/normalize_trans.sh: successfully prepared data\r\n2022-03-03T08:01:21 (data.sh:72:main) stage 2: Combine train and dev set\r\nrm: cannot remove 'data/dev/text.*.en': No such file or directory\r\n\r\nThis may be related to here https://github.com/espnet/espnet/blob/master/egs2/fisher_callhome_spanish/st1/local/data.sh#L82, there is no corresponding file for me.\r\nAfter I try to skip this line, by change \"rm data/dev/text.*.en\" into:\r\n```\r\nif [[ -a data/dev/text.*.en ]];then\r\n       rm data/dev/text.*.en\r\nfi\r\n```\r\nI can temperarily skip this issue, but I still failed in the \"Stage 13: Scoring\" and got error reports as follows:\r\n\r\n2022-03-03T07:29:37 (st.sh:1447:main) Stage 13: Scoring\r\n./st.sh: line 1466: dump/raw/fisher_dev/text.lc.rm.en: No such file or directory\r\n\r\n./st.sh: line 1466: dump/raw/fisher_dev2/text.lc.rm.en: No such file or directory\r\n\r\n./st.sh: line 1466: dump/raw/fisher_test/text.lc.rm.en: No such file or directory\r\n\r\nls: cannot access 'dump/raw/callhome_devtest/text.lc.rm.en.*': No such file or directory\r\n\r\nls: cannot access 'dump/raw/callhome_evltest/text.lc.rm.en.*': No such file or directory\r\n\r\n./st.sh: line 1554: scripts/utils/show_st_result.sh: No such file or directory\r\n\r\n\r\nCan I get some advice?", "reactions": {"url": "https://api.github.com/repos/espnet/espnet/issues/4128/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/espnet/espnet/issues/4128/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/espnet/espnet/issues/4115", "repository_url": "https://api.github.com/repos/espnet/espnet", "labels_url": "https://api.github.com/repos/espnet/espnet/issues/4115/labels{/name}", "comments_url": "https://api.github.com/repos/espnet/espnet/issues/4115/comments", "events_url": "https://api.github.com/repos/espnet/espnet/issues/4115/events", "html_url": "https://github.com/espnet/espnet/issues/4115", "id": 1152644970, "node_id": "I_kwDOBsxW2c5Es_dq", "number": 4115, "title": "Can't generate text for new beam size", "user": {"login": "asadolahzade", "id": 48569360, "node_id": "MDQ6VXNlcjQ4NTY5MzYw", "avatar_url": "https://avatars.githubusercontent.com/u/48569360?v=4", "gravatar_id": "", "url": "https://api.github.com/users/asadolahzade", "html_url": "https://github.com/asadolahzade", "followers_url": "https://api.github.com/users/asadolahzade/followers", "following_url": "https://api.github.com/users/asadolahzade/following{/other_user}", "gists_url": "https://api.github.com/users/asadolahzade/gists{/gist_id}", "starred_url": "https://api.github.com/users/asadolahzade/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/asadolahzade/subscriptions", "organizations_url": "https://api.github.com/users/asadolahzade/orgs", "repos_url": "https://api.github.com/users/asadolahzade/repos", "events_url": "https://api.github.com/users/asadolahzade/events{/privacy}", "received_events_url": "https://api.github.com/users/asadolahzade/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 777173273, "node_id": "MDU6TGFiZWw3NzcxNzMyNzM=", "url": "https://api.github.com/repos/espnet/espnet/labels/Bug", "name": "Bug", "color": "ee0701", "default": false, "description": "bug should be fixed"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2022-02-27T02:10:02Z", "updated_at": "2022-03-01T17:25:31Z", "closed_at": "2022-03-01T17:25:31Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi,\r\n\r\nI am following the recipe of librispeech_100 in ESPnet2.\r\n\r\nI could generate text with beam_size 20. But when I change the `beam_size` to 1 or any number and run `./run.sh --stage 12`, I get the following error:\r\n**Error logs**\r\n```\r\n2022-02-27T01:30:22 (asr.sh:249:main) ./asr.sh --skip_data_prep false --skip_train false --skip_eval false --lang en --ngpu 1 --nj 32 --inference_nj 32 --nbpe 5000 --max_wav_duration 30 --speed_perturb_factors 0.9 1.0 1.1 --audio_format flac.ark --feats_type raw --use_lm false --asr_tag train_asr_conformer_lr2e-3_warmup15k_amp_nondeterministic_specAugment_F0-27_T0-40 --asr_config conf/tuning/train_asr_conformer_lr2e-3_warmup15k_amp_nondeterministic_specAugment_F0-27_T0-40.yaml --inference_config conf/decode_asr.yaml --train_set train_clean_100 --valid_set dev --test_sets test_clean test_other dev_clean dev_other --lm_train_text data/train_clean_100/text --bpe_train_text data/train_clean_100/text --stage 12\r\n2022-02-27T01:30:22 (asr.sh:887:main) Stage 6-8: Skip lm-related stages: use_lm=false\r\n2022-02-27T01:30:22 (asr.sh:1156:main) Stage 12: Decoding: training_dir=exp/asr_train_asr_conformer_lr2e-3_warmup15k_amp_nondeterministic_specAugment_F0-27_T0-40\r\n2022-02-27T01:30:22 (asr.sh:1184:main) Generate 'exp/asr_train_asr_conformer_lr2e-3_warmup15k_amp_nondeterministic_specAugment_F0-27_T0-40/decode_asr_asr_model_valid.acc.ave/run.sh'. You can resume the process from stage 12 using this script\r\n./asr.sh: line 1198: key_file: unbound variable\r\n./asr.sh: line 17: [: : integer expression expected\r\n2022-02-27T01:30:22 (asr.sh:1235:main) Decoding started... log: 'exp/asr_train_asr_conformer_lr2e-3_warmup15k_amp_nondeterministic_specAugment_F0-27_T0-40/decode_asr_asr_model_valid.acc.ave/test_clean/logdir/asr_inference.*.log'\r\nrun.pl: 32 / 32 failed, log is in exp/asr_train_asr_conformer_lr2e-3_warmup15k_amp_nondeterministic_specAugment_F0-27_T0-40/decode_asr_asr_model_valid.acc.ave/test_clean/logdir/asr_inference.*.log\r\n```\r\nNo asr_inference.*.log files are created though.\r\nI don't know what my mistake is. Thanks a lot for helping.\r\n\r\n**Basic environments:**\r\n```\r\n- OS information: Linux 5.4.0-100-generic #113-Ubuntu SMP Thu Feb 3 18:43:29 UTC 2022 x86_64\r\n- python version: `3.8.10 (default, Nov 26 2021, 20:14:08)  [GCC 9.3.0]`\r\n- espnet version: `espnet 0.10.5a1`\r\n- pytorch version: `pytorch 1.10.0+cu113`\r\n- Git hash: `23bee1a584e1138b0a07ff8ff03f7c3eaec79904`\r\n- Commit date: `Fri Dec 3 13:56:17 2021 +0000`\r\n```\r\n**Environments from `torch.utils.collect_env`:**\r\n```\r\nEnvironments from torch.utils.collect_env:\r\nCollecting environment information...\r\n\r\nGPU models and configuration: GPU 0: NVIDIA GeForce RTX 3090\r\nNvidia driver version: 470.103.01\r\ncuDNN version: Probably one of the following:\r\n/usr/local/cuda-11.3/targets/x86_64-linux/lib/libcudnn.so.8.2.1\r\n/usr/local/cuda-11.3/targets/x86_64-linux/lib/libcudnn_adv_infer.so.8.2.1\r\n/usr/local/cuda-11.3/targets/x86_64-linux/lib/libcudnn_adv_train.so.8.2.1\r\n/usr/local/cuda-11.3/targets/x86_64-linux/lib/libcudnn_cnn_infer.so.8.2.1\r\n/usr/local/cuda-11.3/targets/x86_64-linux/lib/libcudnn_cnn_train.so.8.2.1\r\n/usr/local/cuda-11.3/targets/x86_64-linux/lib/libcudnn_ops_infer.so.8.2.1\r\n/usr/local/cuda-11.3/targets/x86_64-linux/lib/libcudnn_ops_train.so.8.2.1\r\nHIP runtime version: N/A\r\nMIOpen runtime version: N/A\r\n\r\nVersions of relevant libraries:\r\n[pip3] numpy==1.20.3\r\n[pip3] pytorch-ranger==0.1.1\r\n[pip3] pytorch-wpe==0.0.1\r\n[pip3] torch==1.10.0+cu113\r\n[pip3] torch-complex==0.2.1\r\n[pip3] torch-optimizer==0.3.0\r\n[pip3] torchaudio==0.10.0+cu113\r\n[conda] Could not collect\r\n```\r\n**Task information:**\r\n - Task: ASR\r\n - Recipe: librispeech_100\r\n - ESPnet2\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/espnet/espnet/issues/4115/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/espnet/espnet/issues/4115/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/espnet/espnet/issues/4107", "repository_url": "https://api.github.com/repos/espnet/espnet", "labels_url": "https://api.github.com/repos/espnet/espnet/issues/4107/labels{/name}", "comments_url": "https://api.github.com/repos/espnet/espnet/issues/4107/comments", "events_url": "https://api.github.com/repos/espnet/espnet/issues/4107/events", "html_url": "https://github.com/espnet/espnet/issues/4107", "id": 1149882834, "node_id": "I_kwDOBsxW2c5EidHS", "number": 4107, "title": "Lower quality voice synthesize with the new version", "user": {"login": "roholazandie", "id": 7584674, "node_id": "MDQ6VXNlcjc1ODQ2NzQ=", "avatar_url": "https://avatars.githubusercontent.com/u/7584674?v=4", "gravatar_id": "", "url": "https://api.github.com/users/roholazandie", "html_url": "https://github.com/roholazandie", "followers_url": "https://api.github.com/users/roholazandie/followers", "following_url": "https://api.github.com/users/roholazandie/following{/other_user}", "gists_url": "https://api.github.com/users/roholazandie/gists{/gist_id}", "starred_url": "https://api.github.com/users/roholazandie/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/roholazandie/subscriptions", "organizations_url": "https://api.github.com/users/roholazandie/orgs", "repos_url": "https://api.github.com/users/roholazandie/repos", "events_url": "https://api.github.com/users/roholazandie/events{/privacy}", "received_events_url": "https://api.github.com/users/roholazandie/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 777173273, "node_id": "MDU6TGFiZWw3NzcxNzMyNzM=", "url": "https://api.github.com/repos/espnet/espnet/labels/Bug", "name": "Bug", "color": "ee0701", "default": false, "description": "bug should be fixed"}, {"id": 1680978630, "node_id": "MDU6TGFiZWwxNjgwOTc4NjMw", "url": "https://api.github.com/repos/espnet/espnet/labels/TTS", "name": "TTS", "color": "fbca04", "default": false, "description": "Text-to-speech"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 9, "created_at": "2022-02-24T23:45:48Z", "updated_at": "2022-03-08T01:57:55Z", "closed_at": "2022-02-26T00:01:41Z", "author_association": "NONE", "active_lock_reason": null, "body": "I trained a speech model and the vocoder using the new version (espnet==0.10.6 and parallel_wavegan==0.5.4) and the synthesized voices have low quality. But when I use the old espnet (espnet==0.9.6 and parallel_wavegan==0.4.8) for inference the outputs have good quality. The new code for inference looks like this (the version that doesn't work for me):\r\n\r\n```\r\ntts = Text2Speech.from_pretrained(model_file=\"exp/tts_train_conformer_fastspeech2_raw_phn_tacotron_g2p_en_no_space/1000epoch.pth\",\r\n                                  vocoder_file=\"/home/rohola/codes/ryan-tts/models/vocoders/train_nodev_ryanspeech_parallel_wavegan.v1/checkpoint-400000steps.pkl\",\r\n                                  speed_control_alpha=1.0,)\r\nwav = tts(\"Hi I am a good guy. This is a test.\")[\"wav\"]\r\n\r\nwrite(\"x.wav\", 22050, wav.view(-1).cpu().numpy())\r\n```\r\n\r\nwhile the same model works fine with old inference code.\r\n```\r\ntext2speech = Text2Speech(\r\n        train_config=\"exp/tts_train_raw_phn_tacotron_g2p_en_no_space/config.yaml\",\r\n        model_file=\"exp/tts_train_raw_phn_tacotron_g2p_en_no_space/200epoch.pth\",\r\n        device=\"cuda\",\r\n        # Only for Tacotron 2\r\n        threshold=0.5,\r\n        minlenratio=0.0,\r\n        maxlenratio=10.0,\r\n        use_att_constraint=False,\r\n        backward_window=1,\r\n        forward_window=3\r\n    )\r\n\r\ntext2speech.spc2wav = None \r\n\r\nvocoder = load_model(config.vocoder_model).to(\"cuda\").eval()\r\nvocoder.remove_weight_norm()\r\n\r\nwith torch.no_grad():\r\n    wav, outs, outs_denorm, probs, att_ws, durations, focus_rate = text2speech(text)\r\n    wav = vocoder.inference(outs)\r\n\r\nwrite(\"x.wav\", 22050, wav.view(-1).cpu().numpy())\r\n```\r\n\r\nThe new ``Text2Speech`` works perfectly fine with model_tag and vocoder_tag. I tried to use predefined model_tag (like kan-bayashi/ljspeech_tacotron2) with my trained vocoder (using new espent) and it still gives low volume outputs.\r\n\r\n\r\n**Basic environments:**\r\n - OS information: Ubuntu 18.04 x86_64]\r\n - python version: new code python 3.8.12 and old code 3.8.7\r\n - espnet version: above\r\n - pytorch version: new code 1.10.2+cu102,  old code 1.7.1\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/espnet/espnet/issues/4107/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/espnet/espnet/issues/4107/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/espnet/espnet/issues/4105", "repository_url": "https://api.github.com/repos/espnet/espnet", "labels_url": "https://api.github.com/repos/espnet/espnet/issues/4105/labels{/name}", "comments_url": "https://api.github.com/repos/espnet/espnet/issues/4105/comments", "events_url": "https://api.github.com/repos/espnet/espnet/issues/4105/events", "html_url": "https://github.com/espnet/espnet/issues/4105", "id": 1148885278, "node_id": "I_kwDOBsxW2c5Eepke", "number": 4105, "title": "n-gram based decoding in v0.10.6", "user": {"login": "arunbaby0", "id": 16813485, "node_id": "MDQ6VXNlcjE2ODEzNDg1", "avatar_url": "https://avatars.githubusercontent.com/u/16813485?v=4", "gravatar_id": "", "url": "https://api.github.com/users/arunbaby0", "html_url": "https://github.com/arunbaby0", "followers_url": "https://api.github.com/users/arunbaby0/followers", "following_url": "https://api.github.com/users/arunbaby0/following{/other_user}", "gists_url": "https://api.github.com/users/arunbaby0/gists{/gist_id}", "starred_url": "https://api.github.com/users/arunbaby0/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/arunbaby0/subscriptions", "organizations_url": "https://api.github.com/users/arunbaby0/orgs", "repos_url": "https://api.github.com/users/arunbaby0/repos", "events_url": "https://api.github.com/users/arunbaby0/events{/privacy}", "received_events_url": "https://api.github.com/users/arunbaby0/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 777173273, "node_id": "MDU6TGFiZWw3NzcxNzMyNzM=", "url": "https://api.github.com/repos/espnet/espnet/labels/Bug", "name": "Bug", "color": "ee0701", "default": false, "description": "bug should be fixed"}, {"id": 1275359095, "node_id": "MDU6TGFiZWwxMjc1MzU5MDk1", "url": "https://api.github.com/repos/espnet/espnet/labels/Discussion", "name": "Discussion", "color": "e06b28", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 7, "created_at": "2022-02-24T05:43:02Z", "updated_at": "2022-03-17T04:06:42Z", "closed_at": "2022-03-16T12:43:44Z", "author_association": "NONE", "active_lock_reason": null, "body": "when trying to decode using the n-gram in the latest version, 0.10.6, the decoding doesn't take the ngram properly, however, this was working fine with the 0.10.4 version. This is the kenlm based n-gram decode.\r\nAny recent changes are done in the codebase affects the n-gram based decode.\r\n\r\nThe following is the args passed to the asr_inference_tool which is set to espnet2.bin.asr_inference: \r\n` --config /opt/espnet2/egs2/test/asr1/conf/decode_asr.yaml --ngram_file exp/ngram/model/5gram.bin`\r\n\r\nAlso, is it better to use k2 based decoding for this? Any specific advantage for each of these methods", "reactions": {"url": "https://api.github.com/repos/espnet/espnet/issues/4105/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/espnet/espnet/issues/4105/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/espnet/espnet/issues/4103", "repository_url": "https://api.github.com/repos/espnet/espnet", "labels_url": "https://api.github.com/repos/espnet/espnet/issues/4103/labels{/name}", "comments_url": "https://api.github.com/repos/espnet/espnet/issues/4103/comments", "events_url": "https://api.github.com/repos/espnet/espnet/issues/4103/events", "html_url": "https://github.com/espnet/espnet/issues/4103", "id": 1147794469, "node_id": "I_kwDOBsxW2c5EafQl", "number": 4103, "title": "Pretrained Diarization Model has version conflict", "user": {"login": "EmreOzkose", "id": 17765576, "node_id": "MDQ6VXNlcjE3NzY1NTc2", "avatar_url": "https://avatars.githubusercontent.com/u/17765576?v=4", "gravatar_id": "", "url": "https://api.github.com/users/EmreOzkose", "html_url": "https://github.com/EmreOzkose", "followers_url": "https://api.github.com/users/EmreOzkose/followers", "following_url": "https://api.github.com/users/EmreOzkose/following{/other_user}", "gists_url": "https://api.github.com/users/EmreOzkose/gists{/gist_id}", "starred_url": "https://api.github.com/users/EmreOzkose/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/EmreOzkose/subscriptions", "organizations_url": "https://api.github.com/users/EmreOzkose/orgs", "repos_url": "https://api.github.com/users/EmreOzkose/repos", "events_url": "https://api.github.com/users/EmreOzkose/events{/privacy}", "received_events_url": "https://api.github.com/users/EmreOzkose/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 777173273, "node_id": "MDU6TGFiZWw3NzcxNzMyNzM=", "url": "https://api.github.com/repos/espnet/espnet/labels/Bug", "name": "Bug", "color": "ee0701", "default": false, "description": "bug should be fixed"}, {"id": 3518143565, "node_id": "LA_kwDOBsxW2c7RspxN", "url": "https://api.github.com/repos/espnet/espnet/labels/Diarization", "name": "Diarization", "color": "fbca04", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2022-02-23T08:25:50Z", "updated_at": "2022-02-24T13:31:44Z", "closed_at": "2022-02-24T13:31:44Z", "author_association": "NONE", "active_lock_reason": null, "body": "**Describe the bug**\r\nI downloaded [pretrained model](https://zenodo.org/record/5264020) and run [run.sh](https://github.com/espnet/espnet/blob/master/egs2/mini_librispeech/diar1/run.sh). I didn't skip data preparation and skipped training part. Then I came to stage 6. When I run stage 6, I got this error:\r\n\r\n```\r\n/path/to/espnet/tools/anaconda/envs/espnet/bin/python3 /path/to/espnet/espnet2/bin/diar_inference.py --ngpu 0 --fs 8k --data_path_and_name_and_type dump/raw/simu/data/dev_clean_2_ns2_beta2_500/wav.scp,speech,sound --key_file exp/diar_train_diar_raw/diarized_simu/data/dev_clean_2_ns2_beta2_500/logdir/keys.1.scp --train_config exp/diar_train_diar_raw/config.yaml --model_file exp/diar_train_diar_raw/valid.acc.best.pth --output_dir exp/diar_train_diar_raw/diarized_simu/data/dev_clean_2_ns2_beta2_500/logdir/output.1 --config conf/decode_diar.yaml\r\nTraceback (most recent call last):\r\n  File \"/path/to/espnet/tools/anaconda/envs/espnet/lib/python3.8/runpy.py\", line 194, in _run_module_as_main\r\n    return _run_code(code, main_globals, None,\r\n  File \"/path/to/espnet/tools/anaconda/envs/espnet/lib/python3.8/runpy.py\", line 87, in _run_code\r\n    exec(code, run_globals)\r\n  File \"/path/to/espnet/espnet2/bin/diar_inference.py\", line 480, in <module>\r\n    main()\r\n  File \"/path/to/espnet/espnet2/bin/diar_inference.py\", line 476, in main\r\n    inference(**kwargs)\r\n  File \"/path/to/espnet/espnet2/bin/diar_inference.py\", line 329, in inference\r\n    diarize_speech = DiarizeSpeech.from_pretrained(\r\n  File \"/path/to/espnet/espnet2/bin/diar_inference.py\", line 278, in from_pretrained\r\n    return DiarizeSpeech(**kwargs)\r\n  File \"/path/to/espnet/espnet2/bin/diar_inference.py\", line 58, in __init__\r\n    diar_model, diar_train_args = DiarizationTask.build_model_from_file(\r\n  File \"/path/to/espnet/espnet2/tasks/abs_task.py\", line 1821, in build_model_from_file\r\n    model = cls.build_model(args)\r\n  File \"/path/to/espnet/espnet2/tasks/diar.py\", line 289, in build_model\r\n    model = ESPnetDiarizationModel(\r\nTypeError: __init__() got an unexpected keyword argument 'loss_type'\r\n```\r\n\r\nI checked previous versions and found `loss_type` variable in [this commit](https://github.com/espnet/espnet/commit/3d793ab4243710c1429ffe333ead52a72802fdc6) (3 commit before from latest). I guess pretrained model is trained with this version of Espnet and it doesn't work now. \r\n\r\n**Basic environments:**\r\n - OS information: Linux\r\n - python version: 3.8.12\r\n - espnet version: espnet 0.10.7a1\r\n \r\n\r\n**Task information:**\r\n - Task: Diarization\r\n - Recipe: mini librispeech\r\n - ESPnet2\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/espnet/espnet/issues/4103/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/espnet/espnet/issues/4103/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/espnet/espnet/issues/4102", "repository_url": "https://api.github.com/repos/espnet/espnet", "labels_url": "https://api.github.com/repos/espnet/espnet/issues/4102/labels{/name}", "comments_url": "https://api.github.com/repos/espnet/espnet/issues/4102/comments", "events_url": "https://api.github.com/repos/espnet/espnet/issues/4102/events", "html_url": "https://github.com/espnet/espnet/issues/4102", "id": 1147766574, "node_id": "I_kwDOBsxW2c5EaYcu", "number": 4102, "title": "a missing Indent symbol", "user": {"login": "dalision", "id": 46208723, "node_id": "MDQ6VXNlcjQ2MjA4NzIz", "avatar_url": "https://avatars.githubusercontent.com/u/46208723?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dalision", "html_url": "https://github.com/dalision", "followers_url": "https://api.github.com/users/dalision/followers", "following_url": "https://api.github.com/users/dalision/following{/other_user}", "gists_url": "https://api.github.com/users/dalision/gists{/gist_id}", "starred_url": "https://api.github.com/users/dalision/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dalision/subscriptions", "organizations_url": "https://api.github.com/users/dalision/orgs", "repos_url": "https://api.github.com/users/dalision/repos", "events_url": "https://api.github.com/users/dalision/events{/privacy}", "received_events_url": "https://api.github.com/users/dalision/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 777173273, "node_id": "MDU6TGFiZWw3NzcxNzMyNzM=", "url": "https://api.github.com/repos/espnet/espnet/labels/Bug", "name": "Bug", "color": "ee0701", "default": false, "description": "bug should be fixed"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2022-02-23T07:59:07Z", "updated_at": "2022-02-25T02:30:45Z", "closed_at": "2022-02-25T02:30:45Z", "author_association": "NONE", "active_lock_reason": null, "body": "I guess there a missing Indent symbol, but everything goes well when training. You may have a look.\r\nhttps://github.com/espnet/espnet/blob/650472b45a67612eaac09c7fbd61dc25f8ff2405/espnet2/samplers/num_elements_batch_sampler.py#L92", "reactions": {"url": "https://api.github.com/repos/espnet/espnet/issues/4102/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/espnet/espnet/issues/4102/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/espnet/espnet/issues/4048", "repository_url": "https://api.github.com/repos/espnet/espnet", "labels_url": "https://api.github.com/repos/espnet/espnet/issues/4048/labels{/name}", "comments_url": "https://api.github.com/repos/espnet/espnet/issues/4048/comments", "events_url": "https://api.github.com/repos/espnet/espnet/issues/4048/events", "html_url": "https://github.com/espnet/espnet/issues/4048", "id": 1128014276, "node_id": "I_kwDOBsxW2c5DPCHE", "number": 4048, "title": "Question about positionwise/feedforward layers", "user": {"login": "danpovey", "id": 3298747, "node_id": "MDQ6VXNlcjMyOTg3NDc=", "avatar_url": "https://avatars.githubusercontent.com/u/3298747?v=4", "gravatar_id": "", "url": "https://api.github.com/users/danpovey", "html_url": "https://github.com/danpovey", "followers_url": "https://api.github.com/users/danpovey/followers", "following_url": "https://api.github.com/users/danpovey/following{/other_user}", "gists_url": "https://api.github.com/users/danpovey/gists{/gist_id}", "starred_url": "https://api.github.com/users/danpovey/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/danpovey/subscriptions", "organizations_url": "https://api.github.com/users/danpovey/orgs", "repos_url": "https://api.github.com/users/danpovey/repos", "events_url": "https://api.github.com/users/danpovey/events{/privacy}", "received_events_url": "https://api.github.com/users/danpovey/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 777173273, "node_id": "MDU6TGFiZWw3NzcxNzMyNzM=", "url": "https://api.github.com/repos/espnet/espnet/labels/Bug", "name": "Bug", "color": "ee0701", "default": false, "description": "bug should be fixed"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2022-02-09T03:44:19Z", "updated_at": "2022-02-10T10:24:17Z", "closed_at": "2022-02-10T10:24:17Z", "author_association": "NONE", "active_lock_reason": null, "body": "This is just a question,\r\n\r\nI noticed you guys have \"positionwise\" layers in place of the conventional feedforward layers in conformers, where you replace the Linear with a Conv1d that has typically kernel size 3.  This looks like it would nearly double the number of parameters in the model.   Does it give a significant WER improvement for ASR tasks, and would this still be true if you were to keep the number of parameters constant, for instance by halving the positionwise/feedforward dim?", "reactions": {"url": "https://api.github.com/repos/espnet/espnet/issues/4048/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/espnet/espnet/issues/4048/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/espnet/espnet/issues/4046", "repository_url": "https://api.github.com/repos/espnet/espnet", "labels_url": "https://api.github.com/repos/espnet/espnet/issues/4046/labels{/name}", "comments_url": "https://api.github.com/repos/espnet/espnet/issues/4046/comments", "events_url": "https://api.github.com/repos/espnet/espnet/issues/4046/events", "html_url": "https://github.com/espnet/espnet/issues/4046", "id": 1126957173, "node_id": "I_kwDOBsxW2c5DLAB1", "number": 4046, "title": "An error occurred when I ran stage 4 on the Aishell dataset.", "user": {"login": "DaobinZhu", "id": 37605608, "node_id": "MDQ6VXNlcjM3NjA1NjA4", "avatar_url": "https://avatars.githubusercontent.com/u/37605608?v=4", "gravatar_id": "", "url": "https://api.github.com/users/DaobinZhu", "html_url": "https://github.com/DaobinZhu", "followers_url": "https://api.github.com/users/DaobinZhu/followers", "following_url": "https://api.github.com/users/DaobinZhu/following{/other_user}", "gists_url": "https://api.github.com/users/DaobinZhu/gists{/gist_id}", "starred_url": "https://api.github.com/users/DaobinZhu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/DaobinZhu/subscriptions", "organizations_url": "https://api.github.com/users/DaobinZhu/orgs", "repos_url": "https://api.github.com/users/DaobinZhu/repos", "events_url": "https://api.github.com/users/DaobinZhu/events{/privacy}", "received_events_url": "https://api.github.com/users/DaobinZhu/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 777173273, "node_id": "MDU6TGFiZWw3NzcxNzMyNzM=", "url": "https://api.github.com/repos/espnet/espnet/labels/Bug", "name": "Bug", "color": "ee0701", "default": false, "description": "bug should be fixed"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2022-02-08T08:48:59Z", "updated_at": "2022-02-08T14:07:05Z", "closed_at": "2022-02-08T14:07:04Z", "author_association": "NONE", "active_lock_reason": null, "body": "**Describe the bug**\r\nThis error occurred when I ran stage 4 on the Aishell dataset.\r\n\r\n**Basic environments:**\r\n - OS information: Linux 3.10.0-862.el7.x86_64 #1 SMP Fri Apr 20 16:44:24 UTC 2018 x86_64\r\n - python version: 3.7\r\n - espnet version: espnet 0.10.6a1\r\n - pytorch version pytorch 1.10.1+cu102\r\n \r\n\r\nthe train.log is show below:\r\n`\u001b[J     total [..................................................]  1.97%\r\nthis epoch [#################################################.] 98.58%\r\n      1800 iter, 0 epoch / 50 epochs\r\n   0.65912 iters/sec. Estimated time to finish: 1 day, 13:43:06.996285.\r\n\u001b[4A\u001b[J/home/SuXiangDong/GPU20StuA/anaconda3/envs/zdb/lib/python3.7/site-packages/torch/nn/parallel/_functions.py:68: UserWarning: Was asked to gather along dimension 0, but all input tensors were scalars; will instead unsqueeze and return a vector.\r\n  warnings.warn('Was asked to gather along dimension 0, but all '\r\n/home/SuXiangDong/GPU20StuA/anaconda3/envs/zdb/lib/python3.7/site-packages/torch/nn/parallel/_functions.py:68: UserWarning: Was asked to gather along dimension 0, but all input tensors were scalars; will instead unsqueeze and return a vector.\r\n  warnings.warn('Was asked to gather along dimension 0, but all '\r\n/home/SuXiangDong/GPU20StuA/zdb/espnet/espnet/nets/pytorch_backend/transformer/plot.py:43: MatplotlibDeprecationWarning: savefig() got unexpected keyword argument \"dpi\" which is no longer supported as of 3.3 and will become an error two minor releases later\r\n  fig.tight_layout()\r\nException in main training loop: The number of FixedLocator locations (14), usually from a call to set_ticks, does not match the number of ticklabels (15).\r\nTraceback (most recent call last):\r\n  File \"/home/SuXiangDong/GPU20StuA/anaconda3/envs/zdb/lib/python3.7/site-packages/chainer/training/trainer.py\", line 319, in run\r\n    entry.extension(self)\r\n  File \"/home/SuXiangDong/GPU20StuA/zdb/espnet/espnet/nets/pytorch_backend/transformer/plot.py\", line 136, in __call__\r\n    self.plotfn(self.data_dict, uttid_list, attn_dict, self.outdir, suffix, savefig)\r\n  File \"/home/SuXiangDong/GPU20StuA/zdb/espnet/espnet/nets/pytorch_backend/transformer/plot.py\", line 131, in plotfn\r\n    plot_multi_head_attention(*args, **kwargs)\r\n  File \"/home/SuXiangDong/GPU20StuA/zdb/espnet/espnet/nets/pytorch_backend/transformer/plot.py\", line 120, in plot_multi_head_attention\r\n    fig = _plot_and_save_attention(att_w, filename, xtokens, ytokens)\r\n  File \"/home/SuXiangDong/GPU20StuA/zdb/espnet/espnet/nets/pytorch_backend/transformer/plot.py\", line 38, in _plot_and_save_attention\r\n    ax.set_xticklabels(xtokens + [\"\"], rotation=40)\r\n  File \"/home/SuXiangDong/GPU20StuA/anaconda3/envs/zdb/lib/python3.7/site-packages/matplotlib/axes/_base.py\", line 63, in wrapper\r\n    return get_method(self)(*args, **kwargs)\r\n  File \"/home/SuXiangDong/GPU20StuA/anaconda3/envs/zdb/lib/python3.7/site-packages/matplotlib/cbook/deprecation.py\", line 451, in wrapper\r\n    return func(*args, **kwargs)\r\n  File \"/home/SuXiangDong/GPU20StuA/anaconda3/envs/zdb/lib/python3.7/site-packages/matplotlib/axis.py\", line 1796, in _set_ticklabels\r\n    return self.set_ticklabels(labels, minor=minor, **kwargs)\r\n  File \"/home/SuXiangDong/GPU20StuA/anaconda3/envs/zdb/lib/python3.7/site-packages/matplotlib/axis.py\", line 1718, in set_ticklabels\r\n    \"The number of FixedLocator locations\"\r\nWill finalize trainer extensions and updater before reraising the exception.\r\nTraceback (most recent call last):\r\n  File \"/home/SuXiangDong/GPU20StuA/zdb/espnet/egs/aishell/asr1/../../../espnet/bin/asr_train.py\", line 639, in <module>\r\n    main(sys.argv[1:])\r\n  File \"/home/SuXiangDong/GPU20StuA/zdb/espnet/egs/aishell/asr1/../../../espnet/bin/asr_train.py\", line 625, in main\r\n    train(args)\r\n  File \"/home/SuXiangDong/GPU20StuA/zdb/espnet/espnet/asr/pytorch_backend/asr.py\", line 965, in train\r\n    trainer.run()\r\n  File \"/home/SuXiangDong/GPU20StuA/anaconda3/envs/zdb/lib/python3.7/site-packages/chainer/training/trainer.py\", line 349, in run\r\n    six.reraise(*exc_info)\r\n  File \"/home/SuXiangDong/GPU20StuA/anaconda3/envs/zdb/lib/python3.7/site-packages/six.py\", line 719, in reraise\r\n    raise value\r\n  File \"/home/SuXiangDong/GPU20StuA/anaconda3/envs/zdb/lib/python3.7/site-packages/chainer/training/trainer.py\", line 319, in run\r\n    entry.extension(self)\r\n  File \"/home/SuXiangDong/GPU20StuA/zdb/espnet/espnet/nets/pytorch_backend/transformer/plot.py\", line 136, in __call__\r\n    self.plotfn(self.data_dict, uttid_list, attn_dict, self.outdir, suffix, savefig)\r\n  File \"/home/SuXiangDong/GPU20StuA/zdb/espnet/espnet/nets/pytorch_backend/transformer/plot.py\", line 131, in plotfn\r\n    plot_multi_head_attention(*args, **kwargs)\r\n  File \"/home/SuXiangDong/GPU20StuA/zdb/espnet/espnet/nets/pytorch_backend/transformer/plot.py\", line 120, in plot_multi_head_attention\r\n    fig = _plot_and_save_attention(att_w, filename, xtokens, ytokens)\r\n  File \"/home/SuXiangDong/GPU20StuA/zdb/espnet/espnet/nets/pytorch_backend/transformer/plot.py\", line 38, in _plot_and_save_attention\r\n    ax.set_xticklabels(xtokens + [\"\"], rotation=40)\r\n  File \"/home/SuXiangDong/GPU20StuA/anaconda3/envs/zdb/lib/python3.7/site-packages/matplotlib/axes/_base.py\", line 63, in wrapper\r\n    return get_method(self)(*args, **kwargs)\r\n  File \"/home/SuXiangDong/GPU20StuA/anaconda3/envs/zdb/lib/python3.7/site-packages/matplotlib/cbook/deprecation.py\", line 451, in wrapper\r\n    return func(*args, **kwargs)\r\n  File \"/home/SuXiangDong/GPU20StuA/anaconda3/envs/zdb/lib/python3.7/site-packages/matplotlib/axis.py\", line 1796, in _set_ticklabels\r\n    return self.set_ticklabels(labels, minor=minor, **kwargs)\r\n  File \"/home/SuXiangDong/GPU20StuA/anaconda3/envs/zdb/lib/python3.7/site-packages/matplotlib/axis.py\", line 1718, in set_ticklabels\r\n    \"The number of FixedLocator locations\"\r\nValueError: The number of FixedLocator locations (14), usually from a call to set_ticks, does not match the number of ticklabels (15).\r\n# Accounting: time=2982 threads=1\r\n# Ended (code 1) at Tue Feb  8 13:55:14 CST 2022, elapsed time 2982 seconds`\r\n\r\n**Task information:**\r\n - Task: ASR\r\n - Recipe: aishell\r\n - ESPnet1 or ESPnet2\r\n\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/espnet/espnet/issues/4046/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/espnet/espnet/issues/4046/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/espnet/espnet/issues/4018", "repository_url": "https://api.github.com/repos/espnet/espnet", "labels_url": "https://api.github.com/repos/espnet/espnet/issues/4018/labels{/name}", "comments_url": "https://api.github.com/repos/espnet/espnet/issues/4018/comments", "events_url": "https://api.github.com/repos/espnet/espnet/issues/4018/events", "html_url": "https://github.com/espnet/espnet/issues/4018", "id": 1120416974, "node_id": "I_kwDOBsxW2c5CyDTO", "number": 4018, "title": "utils/validate_data_dir.sh: text contains 1 lines with non-printable characters during processing mustc v1", "user": {"login": "hannlp", "id": 42163912, "node_id": "MDQ6VXNlcjQyMTYzOTEy", "avatar_url": "https://avatars.githubusercontent.com/u/42163912?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hannlp", "html_url": "https://github.com/hannlp", "followers_url": "https://api.github.com/users/hannlp/followers", "following_url": "https://api.github.com/users/hannlp/following{/other_user}", "gists_url": "https://api.github.com/users/hannlp/gists{/gist_id}", "starred_url": "https://api.github.com/users/hannlp/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hannlp/subscriptions", "organizations_url": "https://api.github.com/users/hannlp/orgs", "repos_url": "https://api.github.com/users/hannlp/repos", "events_url": "https://api.github.com/users/hannlp/events{/privacy}", "received_events_url": "https://api.github.com/users/hannlp/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 777173273, "node_id": "MDU6TGFiZWw3NzcxNzMyNzM=", "url": "https://api.github.com/repos/espnet/espnet/labels/Bug", "name": "Bug", "color": "ee0701", "default": false, "description": "bug should be fixed"}], "state": "closed", "locked": false, "assignee": {"login": "ftshijt", "id": 22814472, "node_id": "MDQ6VXNlcjIyODE0NDcy", "avatar_url": "https://avatars.githubusercontent.com/u/22814472?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ftshijt", "html_url": "https://github.com/ftshijt", "followers_url": "https://api.github.com/users/ftshijt/followers", "following_url": "https://api.github.com/users/ftshijt/following{/other_user}", "gists_url": "https://api.github.com/users/ftshijt/gists{/gist_id}", "starred_url": "https://api.github.com/users/ftshijt/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ftshijt/subscriptions", "organizations_url": "https://api.github.com/users/ftshijt/orgs", "repos_url": "https://api.github.com/users/ftshijt/repos", "events_url": "https://api.github.com/users/ftshijt/events{/privacy}", "received_events_url": "https://api.github.com/users/ftshijt/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ftshijt", "id": 22814472, "node_id": "MDQ6VXNlcjIyODE0NDcy", "avatar_url": "https://avatars.githubusercontent.com/u/22814472?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ftshijt", "html_url": "https://github.com/ftshijt", "followers_url": "https://api.github.com/users/ftshijt/followers", "following_url": "https://api.github.com/users/ftshijt/following{/other_user}", "gists_url": "https://api.github.com/users/ftshijt/gists{/gist_id}", "starred_url": "https://api.github.com/users/ftshijt/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ftshijt/subscriptions", "organizations_url": "https://api.github.com/users/ftshijt/orgs", "repos_url": "https://api.github.com/users/ftshijt/repos", "events_url": "https://api.github.com/users/ftshijt/events{/privacy}", "received_events_url": "https://api.github.com/users/ftshijt/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 7, "created_at": "2022-02-01T09:21:44Z", "updated_at": "2022-02-21T09:20:26Z", "closed_at": "2022-02-21T09:20:26Z", "author_association": "NONE", "active_lock_reason": null, "body": "**Describe the bug**\r\n\r\nHello, when i use the deafult recipe for mustc v1,  a bug raised(at stage 1):\r\n**utils/validate_data_dir.sh: text contains 1 lines with non-printable characters**\r\nI think this bug is related to #4126 and #4157, but I don't know how to avoid it.\r\n\r\n**Task information:**\r\n - Task: ST\r\n - Recipe: must_c\r\n - ESPnet1\r\n\r\n**To Reproduce**\r\n1. cd egs/must_c/st1`\r\n2. ./run_basectc.sh --stage 0 --stop_stage 1\r\n```\r\n#!/usr/bin/env bash\r\n# run_basectc.sh\r\n# Copyright 2019 Kyoto University (Hirofumi Inaguma)\r\n#  Apache 2.0  (http://www.apache.org/licenses/LICENSE-2.0)\r\n\r\n. ./path.sh || exit 1;\r\n. ./cmd.sh || exit 1;\r\n\r\n# general configuration\r\nbackend=pytorch\r\nstage=-1        # start from -1 if you need to start from data download\r\nstop_stage=100\r\nngpu=1          # number of gpus during training (\"0\" uses cpu, otherwise use gpu)\r\ndec_ngpu=0      # number of gpus during decoding (\"0\" uses cpu, otherwise use gpu)\r\nnj=8            # number of parallel jobs for decoding\r\ndebugmode=1\r\ndumpdir=dump    # directory to dump full features\r\nN=0             # number of minibatches to be used (mainly for debugging). \"0\" uses all minibatches.\r\nverbose=0       # verbose option\r\nresume=         # Resume the training from snapshot\r\nseed=1          # seed to generate random number\r\n# feature configuration\r\ndo_delta=false\r\n\r\npreprocess_config=conf/specaug.yaml\r\ntrain_config=conf/train.yaml\r\ndecode_config=conf/decode.yaml\r\n\r\n# decoding parameter\r\ntrans_model=model.acc.best # set a model to be used for decoding: 'model.acc.best' or 'model.loss.best'\r\n\r\n# model average realted (only for transformer)\r\nn_average=10                 # the number of ST models to be averaged\r\nuse_valbest_average=true     # if true, the validation `n_average`-best ST models will be averaged.\r\n                             # if false, the last `n_average` ST models will be averaged.\r\nmetric=bleu                  # loss/acc/bleu\r\n\r\n# pre-training related\r\nasr_model=\r\nmt_model=\r\n\r\n# preprocessing related\r\nsrc_case=lc.rm\r\ntgt_case=tc\r\n# tc: truecase\r\n# lc: lowercase\r\n# lc.rm: lowercase with punctuation removal\r\n\r\n# postprocessing related\r\nremove_nonverbal=true  # remove non-verbal labels such as \"( Applaus )\"\r\n# NOTE: IWSLT community accepts this setting and therefore we use this by default\r\n\r\n# Set this to somewhere where you want to put your data, or where\r\n# someone else has already put it.\r\nmust_c=mustc_v1.0\r\n\r\n# target language related\r\ntgt_lang=de\r\n# you can choose from de, es, fr, it, nl, pt, ro, ru\r\n\r\n# bpemode (unigram or bpe)\r\nnbpe=10000\r\nbpemode=unigram\r\n\r\n# exp tag\r\ntag=\"\" # tag for managing experiments.\r\n\r\n. utils/parse_options.sh || exit 1;\r\n\r\n# Set bash to 'debug' mode, it will exit on :\r\n# -e 'error', -u 'undefined variable', -o ... 'error in pipeline', -x 'print commands',\r\nset -e\r\nset -u\r\nset -o pipefail\r\n\r\ntrain_set=train_sp.en-${tgt_lang}.${tgt_lang}\r\ntrain_dev=dev.en-${tgt_lang}.${tgt_lang}\r\ntrans_set=\"dev_org.en-${tgt_lang}.${tgt_lang} tst-COMMON.en-${tgt_lang}.${tgt_lang} tst-HE.en-${tgt_lang}.${tgt_lang}\"\r\n\r\nif [ ${stage} -le -1 ] && [ ${stop_stage} -ge -1 ]; then\r\n    echo \"stage -1: Data Download\"\r\n    local/download_and_untar.sh ${must_c} ${tgt_lang} \"v1\"\r\nfi\r\n\r\nif [ ${stage} -le 0 ] && [ ${stop_stage} -ge 0 ]; then\r\n    ### Task dependent. You have to make data the following preparation part by yourself.\r\n    ### But you can utilize Kaldi recipes in most cases\r\n    echo \"stage 0: Data Preparation\"\r\n    local/data_prep.sh ${must_c} ${tgt_lang} \"v1\"\r\nfi\r\n\r\nfeat_tr_dir=${dumpdir}/${train_set}/delta${do_delta}; mkdir -p ${feat_tr_dir}\r\nfeat_dt_dir=${dumpdir}/${train_dev}/delta${do_delta}; mkdir -p ${feat_dt_dir}\r\nif [ ${stage} -le 1 ] && [ ${stop_stage} -ge 1 ]; then\r\n    ### Task dependent. You have to design training and dev sets by yourself.\r\n    ### But you can utilize Kaldi recipes in most cases\r\n    echo \"stage 1: Feature Generation\"\r\n    fbankdir=fbank\r\n    # Generate the fbank features; by default 80-dimensional fbanks with pitch on each frame\r\n    for lang in $(echo ${tgt_lang} | tr '_' ' '); do\r\n        for x in dev.en-${tgt_lang} tst-COMMON.en-${tgt_lang} tst-HE.en-${tgt_lang}; do\r\n            steps/make_fbank_pitch.sh --cmd \"$train_cmd\" --nj 32 --write_utt2num_frames true \\\r\n                data/${x} exp/make_fbank/${x} ${fbankdir}\r\n        done\r\n    done\r\n\r\n    # speed perturbation\r\n    speed_perturb.sh --cmd \"$train_cmd\" --speeds \"1.0\" --cases \"lc.rm lc tc\" --langs \"en ${tgt_lang}\" data/train.en-${tgt_lang} data/train_sp.en-${tgt_lang} ${fbankdir}\r\n\r\n    # Divide into source and target languages\r\n    for x in train_sp.en-${tgt_lang} dev.en-${tgt_lang} tst-COMMON.en-${tgt_lang} tst-HE.en-${tgt_lang}; do\r\n        divide_lang.sh ${x} \"en ${tgt_lang}\"\r\n    done\r\n    for lang in ${tgt_lang} en; do\r\n        cp -rf data/dev.en-${tgt_lang}.${lang} data/dev_org.en-${tgt_lang}.${lang}\r\n    done\r\n\r\n    # remove long and short utterances\r\n    for x in train_sp.en-${tgt_lang} dev.en-${tgt_lang}; do\r\n        clean_corpus.sh --maxframes 3000 --maxchars 400 --utt_extra_files \"text.tc text.lc text.lc.rm\" data/${x} \"en ${tgt_lang}\"\r\n    done\r\n\r\n    # compute global CMVN\r\n    compute-cmvn-stats scp:data/${train_set}/feats.scp data/${train_set}/cmvn.ark\r\n\r\n    # dump features for training\r\n    dump.sh --cmd \"$train_cmd\" --nj 80 --do_delta $do_delta \\\r\n        data/${train_set}/feats.scp data/${train_set}/cmvn.ark exp/dump_feats/${train_set} ${feat_tr_dir}\r\n    for x in ${train_dev} ${trans_set}; do\r\n        feat_trans_dir=${dumpdir}/${x}/delta${do_delta}; mkdir -p ${feat_trans_dir}\r\n        dump.sh --cmd \"$train_cmd\" --nj 32 --do_delta $do_delta \\\r\n            data/${x}/feats.scp data/${train_set}/cmvn.ark exp/dump_feats/trans/${x} ${feat_trans_dir}\r\n    done\r\nfi\r\n\r\ndict=data/lang_1spm/${train_set}_${bpemode}${nbpe}_units_${tgt_case}.txt\r\nnlsyms=data/lang_1spm/${train_set}_non_lang_syms_${tgt_case}.txt\r\nbpemodel=data/lang_1spm/${train_set}_${bpemode}${nbpe}_${tgt_case}\r\necho \"dictionary: ${dict}\"\r\nif [ ${stage} -le 2 ] && [ ${stop_stage} -ge 2 ]; then\r\n    ### Task dependent. You have to check non-linguistic symbols used in the corpus.\r\n    echo \"stage 2: Dictionary and Json Data Preparation\"\r\n    mkdir -p data/lang_1spm/\r\n\r\n    echo \"make a non-linguistic symbol list for all languages\"\r\n    grep sp1.0 data/train_sp.en-${tgt_lang}.*/text.${tgt_case} | cut -f 2- -d' ' | grep -o -P '&[^;]*;'| sort | uniq > ${nlsyms}\r\n    cat ${nlsyms}\r\n\r\n    echo \"make a joint source and target dictionary\"\r\n    echo \"<unk> 1\" > ${dict} # <unk> must be 1, 0 will be used for \"blank\" in CTC\r\n    offset=$(wc -l < ${dict})\r\n    grep sp1.0 data/train_sp.en-${tgt_lang}.*/text.${tgt_case} | cut -f 2- -d' ' | grep -v -e '^\\s*$' > data/lang_1spm/input_${tgt_lang}_${src_case}_${tgt_case}.txt\r\n    spm_train --user_defined_symbols=\"$(tr \"\\n\" \",\" < ${nlsyms})\" --input=data/lang_1spm/input_${tgt_lang}_${src_case}_${tgt_case}.txt \\\r\n        --vocab_size=${nbpe} --model_type=${bpemode} --model_prefix=${bpemodel} --input_sentence_size=100000000 --character_coverage=1.0\r\n    spm_encode --model=${bpemodel}.model --output_format=piece < data/lang_1spm/input_${tgt_lang}_${src_case}_${tgt_case}.txt \\\r\n        | tr ' ' '\\n' | sort | uniq | awk -v offset=${offset} '{print $0 \" \" NR+offset}' >> ${dict}\r\n    wc -l ${dict}\r\n\r\n    echo \"make json files\"\r\n    data2json.sh --nj 16 --feat ${feat_tr_dir}/feats.scp --text data/${train_set}/text.${tgt_case} --bpecode ${bpemodel}.model --lang \"${tgt_lang}\" \\\r\n        data/${train_set} ${dict} > ${feat_tr_dir}/data_${bpemode}${nbpe}.${src_case}_${tgt_case}.json\r\n    for x in ${train_dev} ${trans_set}; do\r\n        feat_trans_dir=${dumpdir}/${x}/delta${do_delta}\r\n        data2json.sh --feat ${feat_trans_dir}/feats.scp --text data/${x}/text.${tgt_case} --bpecode ${bpemodel}.model --lang \"${tgt_lang}\" \\\r\n            data/${x} ${dict} > ${feat_trans_dir}/data_${bpemode}${nbpe}.${src_case}_${tgt_case}.json\r\n    done\r\n\r\n    # update json (add source references)\r\n    for x in ${train_set} ${train_dev} ${trans_set}; do\r\n        feat_dir=${dumpdir}/${x}/delta${do_delta}\r\n        data_dir=data/$(echo ${x} | cut -f 1 -d \".\").en-${tgt_lang}.en\r\n        update_json.sh --text ${data_dir}/text.${src_case} --bpecode ${bpemodel}.model \\\r\n            ${feat_dir}/data_${bpemode}${nbpe}.${src_case}_${tgt_case}.json ${data_dir} ${dict}\r\n    done\r\nfi\r\n\r\n# NOTE: skip stage 3: LM Preparation\r\n\r\nif [ -z ${tag} ]; then\r\n    expname=${train_set}_${tgt_case}_${backend}_$(basename ${train_config%.*})_${bpemode}${nbpe}\r\n    if ${do_delta}; then\r\n        expname=${expname}_delta\r\n    fi\r\n    if [ -n \"${preprocess_config}\" ]; then\r\n        expname=${expname}_$(basename ${preprocess_config%.*})\r\n    fi\r\n    if [ -n \"${asr_model}\" ]; then\r\n        expname=${expname}_asrtrans\r\n    fi\r\n    if [ -n \"${mt_model}\" ]; then\r\n        expname=${expname}_mttrans\r\n    fi\r\nelse\r\n    expname=${train_set}_${tgt_case}_${backend}_${tag}\r\nfi\r\nexpdir=exp/${expname}\r\nmkdir -p ${expdir}\r\n\r\nif [ ${stage} -le 4 ] && [ ${stop_stage} -ge 4 ]; then\r\n    echo \"stage 4: Network Training\"\r\n\r\n    ${cuda_cmd} --gpu ${ngpu} ${expdir}/train.log \\\r\n        st_train.py \\\r\n        --config ${train_config} \\\r\n        --preprocess-conf ${preprocess_config} \\\r\n        --ngpu ${ngpu} \\\r\n        --backend ${backend} \\\r\n        --outdir ${expdir}/results \\\r\n        --tensorboard-dir tensorboard/${expname} \\\r\n        --debugmode ${debugmode} \\\r\n        --dict ${dict} \\\r\n        --debugdir ${expdir} \\\r\n        --minibatches ${N} \\\r\n        --seed ${seed} \\\r\n        --verbose ${verbose} \\\r\n        --resume ${resume} \\\r\n        --train-json ${feat_tr_dir}/data_${bpemode}${nbpe}.${src_case}_${tgt_case}.json \\\r\n        --valid-json ${feat_dt_dir}/data_${bpemode}${nbpe}.${src_case}_${tgt_case}.json \\\r\n        --enc-init ${asr_model} \\\r\n        --dec-init ${mt_model}\r\nfi\r\n\r\nif [ ${stage} -le 5 ] && [ ${stop_stage} -ge 5 ]; then\r\n    echo \"stage 5: Decoding\"\r\n    if [[ $(get_yaml.py ${train_config} model-module) = *transformer* ]] || \\\r\n       [[ $(get_yaml.py ${train_config} model-module) = *conformer* ]]; then\r\n        # Average ST models\r\n        if ${use_valbest_average}; then\r\n            trans_model=model.val${n_average}.avg.best\r\n            opt=\"--log ${expdir}/results/log --metric ${metric}\"\r\n        else\r\n            trans_model=model.last${n_average}.avg.best\r\n            opt=\"--log\"\r\n        fi\r\n        average_checkpoints.py \\\r\n            ${opt} \\\r\n            --backend ${backend} \\\r\n            --snapshots ${expdir}/results/snapshot.ep.* \\\r\n            --out ${expdir}/results/${trans_model} \\\r\n            --num ${n_average}\r\n    fi\r\n\r\n    if [ ${dec_ngpu} = 1 ]; then\r\n        nj=1\r\n    fi\r\n\r\n    pids=() # initialize pids\r\n    for x in ${trans_set}; do\r\n    (\r\n        decode_dir=decode_${x}_$(basename ${decode_config%.*})\r\n        feat_trans_dir=${dumpdir}/${x}/delta${do_delta}\r\n\r\n        # reset log for RTF calculation\r\n        if [ -f ${expdir}/${decode_dir}/log/decode.1.log ]; then\r\n            rm ${expdir}/${decode_dir}/log/decode.*.log\r\n        fi\r\n\r\n        # split data\r\n        splitjson.py --parts ${nj} ${feat_trans_dir}/data_${bpemode}${nbpe}.${src_case}_${tgt_case}.json\r\n\r\n        ${decode_cmd} JOB=1:${nj} ${expdir}/${decode_dir}/log/decode.JOB.log \\\r\n            st_trans.py \\\r\n            --config ${decode_config} \\\r\n            --ngpu ${dec_ngpu} \\\r\n            --backend ${backend} \\\r\n            --batchsize 0 \\\r\n            --trans-json ${feat_trans_dir}/split${nj}utt/data_${bpemode}${nbpe}.JOB.json \\\r\n            --result-label ${expdir}/${decode_dir}/data.JOB.json \\\r\n            --model ${expdir}/results/${trans_model}\r\n\r\n        score_bleu.sh --case ${tgt_case} --bpemodel ${bpemodel}.model \\\r\n            --remove_nonverbal ${remove_nonverbal} \\\r\n            ${expdir}/${decode_dir} ${tgt_lang} ${dict}\r\n\r\n        calculate_rtf.py --log-dir ${expdir}/${decode_dir}/log\r\n    ) &\r\n    pids+=($!) # store background pids\r\n    done\r\n    i=0; for pid in \"${pids[@]}\"; do wait ${pid} || ((++i)); done\r\n    [ ${i} -gt 0 ] && echo \"$0: ${i} background jobs are failed.\" && false\r\n    echo \"Finished\"\r\nfi\r\n```\r\n\r\n**Error logs**\r\n(espnet) [.xxx@localhost st1]$ ./run_basectc.sh --stage 0 --stop_stage 0\r\nstage 0: Data Preparation\r\nremove duplicate lines...\r\nReduced #utt from 229699 to 229696\r\nfix_data_dir.sh: kept all 229696 utterances.\r\nfix_data_dir.sh: old files are kept in data/train.en-de/.backup\r\nlocal/data_prep.sh: successfully prepared data in data/local/en-de/train\r\nremove duplicate lines...\r\nReduced #utt from 1423 to 1423\r\nfix_data_dir.sh: kept all 1423 utterances.\r\nfix_data_dir.sh: old files are kept in data/dev.en-de/.backup\r\nlocal/data_prep.sh: successfully prepared data in data/local/en-de/dev\r\nremove duplicate lines...\r\nReduced #utt from 2641 to 2641\r\nfix_data_dir.sh: kept all 2641 utterances.\r\nfix_data_dir.sh: old files are kept in data/tst-COMMON.en-de/.backup\r\nlocal/data_prep.sh: successfully prepared data in data/local/en-de/tst-COMMON\r\nremove duplicate lines...\r\nReduced #utt from 600 to 600\r\nfix_data_dir.sh: kept all 600 utterances.\r\nfix_data_dir.sh: old files are kept in data/tst-HE.en-de/.backup\r\nlocal/data_prep.sh: successfully prepared data in data/local/en-de/tst-HE\r\ndictionary: data/lang_1spm/train_sp.en-de.de_unigram10000_units_tc.txt\r\n(espnet) [xxx@localhost st1]$ ./run_basectc.sh --stage 1 --stop_stage 1\r\nstage 1: Feature Generation\r\nsteps/make_fbank_pitch.sh --cmd run.pl --nj 32 --write_utt2num_frames true data/dev.en-de exp/make_fbank/dev.en-de fbank\r\nutils/validate_data_dir.sh: Successfully validated data-directory data/dev.en-de\r\nsteps/make_fbank_pitch.sh [info]: segments file exists: using that.\r\nsteps/make_fbank_pitch.sh: Succeeded creating filterbank and pitch features for dev.en-de\r\nsteps/make_fbank_pitch.sh --cmd run.pl --nj 32 --write_utt2num_frames true data/tst-COMMON.en-de exp/make_fbank/tst-COMMON.en-de fbank\r\nutils/validate_data_dir.sh: Successfully validated data-directory data/tst-COMMON.en-de\r\nsteps/make_fbank_pitch.sh [info]: segments file exists: using that.\r\nsteps/make_fbank_pitch.sh: Succeeded creating filterbank and pitch features for tst-COMMON.en-de\r\nsteps/make_fbank_pitch.sh --cmd run.pl --nj 32 --write_utt2num_frames true data/tst-HE.en-de exp/make_fbank/tst-HE.en-de fbank\r\nutils/validate_data_dir.sh: Successfully validated data-directory data/tst-HE.en-de\r\nsteps/make_fbank_pitch.sh [info]: segments file exists: using that.\r\nsteps/make_fbank_pitch.sh: Succeeded creating filterbank and pitch features for tst-HE.en-de\r\n/mnt/hanyuchen/espnet/espnet/egs/must_c/st1/../../../utils/speed_perturb.sh --cmd run.pl --speeds 1.0 --cases lc.rm lc tc --langs en de data/train.en-de data/train_sp.en-de fbank\r\nutils/data/get_utt2dur.sh: working out data/train.en-de/utt2dur from data/train.en-de/segments\r\nutils/data/get_utt2dur.sh: computed data/train.en-de/utt2dur\r\nutils/data/get_reco2dur.sh: obtaining durations from recordings\r\nutils/data/get_reco2dur.sh: could not get recording lengths from sphere-file headers, using wav-to-duration\r\nutils/data/get_reco2dur.sh: computed data/train.en-de/reco2dur\r\nutils/perturb_data_dir_speed.sh: generated speed-perturbed version of data in data/train.en-de, in data/train.en-de/tmp-hTyC9/temp.1.0\r\nfix_data_dir.sh: kept all 229696 utterances.\r\nfix_data_dir.sh: old files are kept in data/train.en-de/tmp-hTyC9/temp.1.0/.backup\r\nutils/validate_data_dir.sh: Successfully validated data-directory data/train.en-de/tmp-hTyC9/temp.1.0\r\nutils/combine_data.sh --extra-files utt2uniq data/train_sp.en-de data/train.en-de/tmp-hTyC9/temp.1.0\r\nutils/combine_data.sh: combined utt2uniq\r\nutils/combine_data.sh: combined segments\r\nutils/combine_data.sh: combined utt2spk\r\nutils/combine_data.sh [info]: not combining utt2lang as it does not exist\r\nutils/combine_data.sh: combined utt2dur\r\nutils/combine_data.sh [info]: not combining utt2num_frames as it does not exist\r\nutils/combine_data.sh: combined reco2dur\r\nutils/combine_data.sh [info]: not combining feats.scp as it does not exist\r\nutils/combine_data.sh [info]: not combining text as it does not exist\r\nutils/combine_data.sh [info]: not combining cmvn.scp as it does not exist\r\nutils/combine_data.sh [info]: not combining vad.scp as it does not exist\r\nutils/combine_data.sh [info]: not combining reco2file_and_channel as it does not exist\r\nutils/combine_data.sh: combined wav.scp\r\nutils/combine_data.sh [info]: not combining spk2gender as it does not exist\r\nfix_data_dir.sh: kept all 229696 utterances.\r\nfix_data_dir.sh: old files are kept in data/train_sp.en-de/.backup\r\nsteps/make_fbank_pitch.sh --cmd run.pl --nj 32 --write_utt2num_frames true data/train_sp.en-de exp/make_fbank/train_sp.en-de fbank\r\nutils/validate_data_dir.sh: Successfully validated data-directory data/train_sp.en-de\r\nsteps/make_fbank_pitch.sh [info]: segments file exists: using that.\r\nsteps/make_fbank_pitch.sh: Succeeded creating filterbank and pitch features for train_sp.en-de\r\nfix_data_dir.sh: kept all 229696 utterances.\r\nfix_data_dir.sh: old files are kept in data/train_sp.en-de/.backup\r\nutils/validate_data_dir.sh: Successfully validated data-directory data/train_sp.en-de\r\nfix_data_dir.sh: kept all 229696 utterances.\r\nfix_data_dir.sh: old files are kept in data/train_sp.en-de.en/.backup\r\n**utils/validate_data_dir.sh: text contains 1 lines with non-printable characters**\r\n", "reactions": {"url": "https://api.github.com/repos/espnet/espnet/issues/4018/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/espnet/espnet/issues/4018/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/espnet/espnet/issues/3963", "repository_url": "https://api.github.com/repos/espnet/espnet", "labels_url": "https://api.github.com/repos/espnet/espnet/issues/3963/labels{/name}", "comments_url": "https://api.github.com/repos/espnet/espnet/issues/3963/comments", "events_url": "https://api.github.com/repos/espnet/espnet/issues/3963/events", "html_url": "https://github.com/espnet/espnet/issues/3963", "id": 1101242594, "node_id": "I_kwDOBsxW2c5Bo6Di", "number": 3963, "title": "AttributeError: 'ChainerDataLoader' object has no attribute 'previous_epoch_detail While trying to resume from snapshot", "user": {"login": "vinitunni", "id": 1404235, "node_id": "MDQ6VXNlcjE0MDQyMzU=", "avatar_url": "https://avatars.githubusercontent.com/u/1404235?v=4", "gravatar_id": "", "url": "https://api.github.com/users/vinitunni", "html_url": "https://github.com/vinitunni", "followers_url": "https://api.github.com/users/vinitunni/followers", "following_url": "https://api.github.com/users/vinitunni/following{/other_user}", "gists_url": "https://api.github.com/users/vinitunni/gists{/gist_id}", "starred_url": "https://api.github.com/users/vinitunni/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/vinitunni/subscriptions", "organizations_url": "https://api.github.com/users/vinitunni/orgs", "repos_url": "https://api.github.com/users/vinitunni/repos", "events_url": "https://api.github.com/users/vinitunni/events{/privacy}", "received_events_url": "https://api.github.com/users/vinitunni/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 777173273, "node_id": "MDU6TGFiZWw3NzcxNzMyNzM=", "url": "https://api.github.com/repos/espnet/espnet/labels/Bug", "name": "Bug", "color": "ee0701", "default": false, "description": "bug should be fixed"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 8, "created_at": "2022-01-13T05:58:52Z", "updated_at": "2022-01-18T09:21:02Z", "closed_at": "2022-01-17T07:26:15Z", "author_association": "NONE", "active_lock_reason": null, "body": "**Describe the bug**\r\nI am running a transducer experiment. However, when I try to resume my training from a snapshot, I see the following error\r\n\"return self._iterators['main'].previous_epoch_detail\r\nAttributeError: 'ChainerDataLoader' object has no attribute 'previous_epoch_detail'\"\r\n\r\n**Basic environments:**\r\n - OS information: Ubuntu 18.04 (Kernel 4.15.0)\r\n - python version: 3.8.0 (gcc(8.4.0)\r\n - espnet version: espnet-0.10.4\r\n - Git hash commit eee2566f2395d676e3978376315a4cd116a4e335 (tag: v.0.10.4, master)\r\n - pytorch version '1.10.0+cu102'\r\n Collecting environment information...\r\nPyTorch version: 1.10.0+cu102\r\nIs debug build: False\r\nCUDA used to build PyTorch: 10.2\r\nROCM used to build PyTorch: N/A\r\n\r\nOS: Ubuntu 18.04.5 LTS (x86_64)\r\nGCC version: (Ubuntu 8.4.0-1ubuntu1~18.04) 8.4.0\r\nClang version: Could not collect\r\nCMake version: version 3.10.2\r\nLibc version: glibc-2.27\r\n\r\nPython version: 3.8.0 (default, Feb 25 2021, 22:10:10)  [GCC 8.4.0] (64-bit runtime)\r\nPython platform: Linux-4.15.0-143-generic-x86_64-with-glibc2.27\r\nIs CUDA available: True\r\nCUDA runtime version: 10.2.89\r\nGPU models and configuration: \r\nGPU 0: NVIDIA GeForce RTX 2080 Ti\r\nGPU 1: NVIDIA GeForce RTX 2080 Ti\r\nGPU 2: NVIDIA GeForce RTX 2080 Ti\r\nGPU 3: NVIDIA GeForce RTX 2080 Ti\r\n\r\nNvidia driver version: 470.42.01\r\ncuDNN version: Probably one of the following:\r\n/usr/lib/x86_64-linux-gnu/libcudnn.so.8.2.2\r\n/usr/lib/x86_64-linux-gnu/libcudnn_adv_infer.so.8.2.2\r\n/usr/lib/x86_64-linux-gnu/libcudnn_adv_train.so.8.2.2\r\n/usr/lib/x86_64-linux-gnu/libcudnn_cnn_infer.so.8.2.2\r\n/usr/lib/x86_64-linux-gnu/libcudnn_cnn_train.so.8.2.2\r\n/usr/lib/x86_64-linux-gnu/libcudnn_ops_infer.so.8.2.2\r\n/usr/lib/x86_64-linux-gnu/libcudnn_ops_train.so.8.2.2\r\nHIP runtime version: N/A\r\nMIOpen runtime version: N/A\r\n\r\nVersions of relevant libraries:\r\n[pip3] numpy==1.20.3\r\n[pip3] pytorch-ranger==0.1.1\r\n[pip3] pytorch-wpe==0.0.1\r\n[pip3] torch==1.10.0\r\n[pip3] torch-complex==0.2.1\r\n[pip3] torch-optimizer==0.3.0\r\n[pip3] torchaudio==0.10.0\r\n[pip3] warprnnt-pytorch==0.1\r\n[conda] Could not collect\r\n\r\n\r\n**Task information:**\r\n - Task:ASR\r\n - Recipe: librispeech\r\n - ESPnet1\r\n\r\n**To Reproduce**\r\nSteps to reproduce the behavior:\r\n1. cd egs/librispeech/asr1\r\n2. execute transducer run.sh (adapted from voxforge) for a few epochs\r\n3. Run again with resume variable set for an epoch\r\n3. error in exp/XXX/train.log\r\n\r\n**Error logs**\r\n2022-01-13 11:27:48,999 (asr:666) INFO: resumed from /home/vinit/exp/espnet-0.10.4/egs/librispeech/asr1/exp/XXXX/results/snapshot.ep.20\r\n/home/vinit/exp/XXXX_ASR_repo_devp/tools/venv/lib/python3.8/site-packages/chainer/training/triggers/interval_trigger.py:91: UserWarning: The previous value of iteration is not saved. IntervalTrigger guesses it using current iteration. If this trigger is not called at every iteration, it may not work correctly.\r\n  warnings.warn(\r\n/home/vinit/exp/XXXX_ASR_repo_devp/tools/venv/lib/python3.8/site-packages/chainer/training/triggers/interval_trigger.py:103: UserWarning: The previous value of epoch_detail is not saved. IntervalTrigger uses the value of trainer.updater.previous_epoch_detail. If this trigger is not called at every iteration, it may not work correctly.\r\n  warnings.warn(\r\nException in main training loop: 'ChainerDataLoader' object has no attribute 'previous_epoch_detail'\r\nTraceback (most recent call last):\r\n  File \"/home/vinit/exp/XXXX_ASR_repo_devp/tools/venv/lib/python3.8/site-packages/chainer/training/trainer.py\", line 313, in run\r\n    while not stop_trigger(self):\r\n  File \"/home/vinit/exp/XXXX_ASR_repo_devp/tools/venv/lib/python3.8/site-packages/chainer/training/triggers/interval_trigger.py\", line 60, in __call__\r\n    previous_epoch_detail = updater.previous_epoch_detail\r\n  File \"/home/vinit/exp/XXXX_ASR_repo_devp/tools/venv/lib/python3.8/site-packages/chainer/training/updaters/standard_updater.py\", line 115, in previous_epoch_detail\r\n    return self._iterators['main'].previous_epoch_detail\r\nWill finalize trainer extensions and updater before reraising the exception.\r\nTraceback (most recent call last):\r\n  File \"/home/vinit/exp/XXXX_ASR_repo_devp/egs/librispeech/asr1/../../../espnet/bin/asr_train.py\", line 657, in <module>\r\n    main(sys.argv[1:])\r\n  File \"/home/vinit/exp/XXXX_ASR_repo_devp/egs/librispeech/asr1/../../../espnet/bin/asr_train.py\", line 643, in main\r\n    train(args)\r\n  File \"/home/vinit/exp/XXXX_ASR_repo_devp/espnet/asr/pytorch_backend/asr.py\", line 965, in train\r\n    trainer.run()\r\n  File \"/home/vinit/exp/XXXX_ASR_repo_devp/tools/venv/lib/python3.8/site-packages/chainer/training/trainer.py\", line 349, in run\r\n    six.reraise(*exc_info)\r\n  File \"/home/vinit/exp/XXXX_ASR_repo_devp/tools/venv/lib/python3.8/site-packages/six.py\", line 719, in reraise\r\n    raise value\r\n  File \"/home/vinit/exp/XXXX_ASR_repo_devp/tools/venv/lib/python3.8/site-packages/chainer/training/trainer.py\", line 313, in run\r\n    while not stop_trigger(self):\r\n  File \"/home/vinit/exp/XXXX_ASR_repo_devp/tools/venv/lib/python3.8/site-packages/chainer/training/triggers/interval_trigger.py\", line 60, in __call__\r\n    previous_epoch_detail = updater.previous_epoch_detail\r\n  File \"/home/vinit/exp/XXXX_ASR_repo_devp/tools/venv/lib/python3.8/site-packages/chainer/training/updaters/standard_updater.py\", line 115, in previous_epoch_detail\r\n    return self._iterators['main'].previous_epoch_detail\r\nAttributeError: 'ChainerDataLoader' object has no attribute 'previous_epoch_detail'\r\n\r\n\r\n\r\nSimilar issue has been mentgiones in https://github.com/espnet/espnet/issues/636#issuecomment-620667584 but unaddressed", "reactions": {"url": "https://api.github.com/repos/espnet/espnet/issues/3963/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/espnet/espnet/issues/3963/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/espnet/espnet/issues/3948", "repository_url": "https://api.github.com/repos/espnet/espnet", "labels_url": "https://api.github.com/repos/espnet/espnet/issues/3948/labels{/name}", "comments_url": "https://api.github.com/repos/espnet/espnet/issues/3948/comments", "events_url": "https://api.github.com/repos/espnet/espnet/issues/3948/events", "html_url": "https://github.com/espnet/espnet/issues/3948", "id": 1096912675, "node_id": "I_kwDOBsxW2c5BYY8j", "number": 3948, "title": "AttributeError: module 'warprnnt_pytorch.warp_rnnt' has no attribute 'gpu_rnnt'", "user": {"login": "ily6", "id": 97342412, "node_id": "U_kgDOBc1TzA", "avatar_url": "https://avatars.githubusercontent.com/u/97342412?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ily6", "html_url": "https://github.com/ily6", "followers_url": "https://api.github.com/users/ily6/followers", "following_url": "https://api.github.com/users/ily6/following{/other_user}", "gists_url": "https://api.github.com/users/ily6/gists{/gist_id}", "starred_url": "https://api.github.com/users/ily6/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ily6/subscriptions", "organizations_url": "https://api.github.com/users/ily6/orgs", "repos_url": "https://api.github.com/users/ily6/repos", "events_url": "https://api.github.com/users/ily6/events{/privacy}", "received_events_url": "https://api.github.com/users/ily6/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 777173273, "node_id": "MDU6TGFiZWw3NzcxNzMyNzM=", "url": "https://api.github.com/repos/espnet/espnet/labels/Bug", "name": "Bug", "color": "ee0701", "default": false, "description": "bug should be fixed"}, {"id": 2519100905, "node_id": "MDU6TGFiZWwyNTE5MTAwOTA1", "url": "https://api.github.com/repos/espnet/espnet/labels/RNNT", "name": "RNNT", "color": "0e8a16", "default": false, "description": "(RNN) transducer related issue"}], "state": "closed", "locked": false, "assignee": {"login": "b-flo", "id": 41155456, "node_id": "MDQ6VXNlcjQxMTU1NDU2", "avatar_url": "https://avatars.githubusercontent.com/u/41155456?v=4", "gravatar_id": "", "url": "https://api.github.com/users/b-flo", "html_url": "https://github.com/b-flo", "followers_url": "https://api.github.com/users/b-flo/followers", "following_url": "https://api.github.com/users/b-flo/following{/other_user}", "gists_url": "https://api.github.com/users/b-flo/gists{/gist_id}", "starred_url": "https://api.github.com/users/b-flo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/b-flo/subscriptions", "organizations_url": "https://api.github.com/users/b-flo/orgs", "repos_url": "https://api.github.com/users/b-flo/repos", "events_url": "https://api.github.com/users/b-flo/events{/privacy}", "received_events_url": "https://api.github.com/users/b-flo/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "b-flo", "id": 41155456, "node_id": "MDQ6VXNlcjQxMTU1NDU2", "avatar_url": "https://avatars.githubusercontent.com/u/41155456?v=4", "gravatar_id": "", "url": "https://api.github.com/users/b-flo", "html_url": "https://github.com/b-flo", "followers_url": "https://api.github.com/users/b-flo/followers", "following_url": "https://api.github.com/users/b-flo/following{/other_user}", "gists_url": "https://api.github.com/users/b-flo/gists{/gist_id}", "starred_url": "https://api.github.com/users/b-flo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/b-flo/subscriptions", "organizations_url": "https://api.github.com/users/b-flo/orgs", "repos_url": "https://api.github.com/users/b-flo/repos", "events_url": "https://api.github.com/users/b-flo/events{/privacy}", "received_events_url": "https://api.github.com/users/b-flo/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 27, "created_at": "2022-01-08T12:15:35Z", "updated_at": "2022-02-13T07:21:02Z", "closed_at": "2022-02-13T07:21:02Z", "author_association": "NONE", "active_lock_reason": null, "body": "cuda: 11.3,  pytorch: 1.10.1, python: 3.8.5\r\nI trained a conformer transducer model using aishell recipe, but got this as follows, could anyone give me a hand?\r\n2022-01-08 19:48:09,317 (asr_train:563) WARNING: Skip DEBUG/INFO messages\r\n2022-01-08 19:48:17,344 (asr:493) WARNING: num. model params: 32,575,561 (num. trained: 32,575,561 (100.0%))\r\n2022-01-08 19:48:23,164 (io_utils:57) WARNING: [Experimental feature] Some preprocessing will be done for the mini-batch creation using Transformation(\r\n    0: TimeWarp(max_time_warp=5, inplace=True, mode=PIL)\r\n    1: FreqMask(F=30, n_mask=2, replace_with_zero=False, inplace=True)\r\n    2: TimeMask(T=40, n_mask=2, replace_with_zero=False, inplace=True))\r\n2022-01-08 19:48:23,167 (io_utils:57) WARNING: [Experimental feature] Some preprocessing will be done for the mini-batch creation using Transformation(\r\n    0: TimeWarp(max_time_warp=5, inplace=True, mode=PIL)\r\n    1: FreqMask(F=30, n_mask=2, replace_with_zero=False, inplace=True)\r\n    2: TimeMask(T=40, n_mask=2, replace_with_zero=False, inplace=True))\r\n^[[JException in main training loop: module 'warprnnt_pytorch.warp_rnnt' has no attribute 'gpu_rnnt'\r\nTraceback (most recent call last):\r\n  File \"/home/lli/anaconda3/lib/python3.8/site-packages/chainer/training/trainer.py\", line 316, in run\r\n    update()\r\n  File \"/mnt/data3/lli/espnet/espnet/asr/pytorch_backend/asr.py\", line 231, in update\r\n    self.update_core()\r\n  File \"/mnt/data3/lli/espnet/espnet/asr/pytorch_backend/asr.py\", line 195, in update_core\r\n    data_parallel(self.model, x, range(self.ngpu)).mean() / self.accum_grad\r\n  File \"/home/lli/anaconda3/lib/python3.8/site-packages/torch/nn/parallel/data_parallel.py\", line 228, in data_parallel\r\n    return module(*inputs[0], **module_kwargs[0])\r\n  File \"/home/lli/anaconda3/lib/python3.8/site-packages/torch/nn/modules/module.py\", line 1102, in _call_impl\r\n    return forward_call(*input, **kwargs)\r\n  File \"/mnt/data3/lli/espnet/espnet/nets/pytorch_backend/e2e_asr_transducer.py\", line 418, in forward\r\n    losses = self.transducer_tasks(\r\n  File \"/home/lli/anaconda3/lib/python3.8/site-packages/torch/nn/modules/module.py\", line 1102, in _call_impl\r\n    return forward_call(*input, **kwargs)\r\n  File \"/mnt/data3/lli/espnet/espnet/nets/pytorch_backend/transducer/transducer_tasks.py\", line 440, in forward\r\n    joint_out, trans_loss = self.compute_transducer_loss(\r\n  File \"/mnt/data3/lli/espnet/espnet/nets/pytorch_backend/transducer/transducer_tasks.py\", line 170, in compute_transducer_loss\r\n    loss_trans = self.transducer_loss(joint_out, target, t_len, u_len)\r\n  File \"/home/lli/anaconda3/lib/python3.8/site-packages/torch/nn/modules/module.py\", line 1102, in _call_impl\r\n    return forward_call(*input, **kwargs)\r\n  File \"/mnt/data3/lli/espnet/tools/warp-transducer/pytorch_binding/warprnnt_pytorch/__init__.py\", line 104, in forward\r\n    return self.loss(acts, labels, act_lens, label_lens, self.blank, self.reduction, self.fastemit_lambda)\r\n  File \"/mnt/data3/lli/espnet/tools/warp-transducer/pytorch_binding/warprnnt_pytorch/__init__.py\", line 24, in forward\r\n    loss_func = warp_rnnt.gpu_rnnt if is_cuda else warp_rnnt.cpu_rnnt\r\nWill finalize trainer extensions and updater before reraising the exception.\r\nTraceback (most recent call last):\r\n  File \"/mnt/data3/lli/espnet/egs/aishell/asr1/../../../espnet/bin/asr_train.py\", line 639, in <module>\r\n    main(sys.argv[1:])\r\n  File \"/mnt/data3/lli/espnet/egs/aishell/asr1/../../../espnet/bin/asr_train.py\", line 625, in main\r\n    train(args)\r\n  File \"/mnt/data3/lli/espnet/espnet/asr/pytorch_backend/asr.py\", line 965, in train\r\n    trainer.run()\r\n File \"/home/lli/anaconda3/lib/python3.8/site-packages/chainer/training/trainer.py\", line 349, in run\r\n    six.reraise(*exc_info)\r\n  File \"/home/lli/anaconda3/lib/python3.8/site-packages/six.py\", line 703, in reraise\r\n    raise value\r\n  File \"/home/lli/anaconda3/lib/python3.8/site-packages/chainer/training/trainer.py\", line 316, in run\r\n    update()\r\n  File \"/mnt/data3/lli/espnet/espnet/asr/pytorch_backend/asr.py\", line 231, in update\r\n    self.update_core()\r\n  File \"/mnt/data3/lli/espnet/espnet/asr/pytorch_backend/asr.py\", line 195, in update_core\r\n    data_parallel(self.model, x, range(self.ngpu)).mean() / self.accum_grad\r\n  File \"/home/lli/anaconda3/lib/python3.8/site-packages/torch/nn/parallel/data_parallel.py\", line 228, in data_parallel\r\n    return module(*inputs[0], **module_kwargs[0])\r\n  File \"/home/lli/anaconda3/lib/python3.8/site-packages/torch/nn/modules/module.py\", line 1102, in _call_impl\r\n    return forward_call(*input, **kwargs)\r\n  File \"/mnt/data3/lli/espnet/espnet/nets/pytorch_backend/e2e_asr_transducer.py\", line 418, in forward\r\n    losses = self.transducer_tasks(\r\n  File \"/home/lli/anaconda3/lib/python3.8/site-packages/torch/nn/modules/module.py\", line 1102, in _call_impl\r\n    return forward_call(*input, **kwargs)\r\n  File \"/mnt/data3/lli/espnet/espnet/nets/pytorch_backend/transducer/transducer_tasks.py\", line 440, in forward\r\n    joint_out, trans_loss = self.compute_transducer_loss(\r\n  File \"/mnt/data3/lli/espnet/espnet/nets/pytorch_backend/transducer/transducer_tasks.py\", line 170, in compute_transducer_loss\r\n    loss_trans = self.transducer_loss(joint_out, target, t_len, u_len)\r\n  File \"/home/lli/anaconda3/lib/python3.8/site-packages/torch/nn/modules/module.py\", line 1102, in _call_impl\r\n    return forward_call(*input, **kwargs)\r\n  File \"/mnt/data3/lli/espnet/tools/warp-transducer/pytorch_binding/warprnnt_pytorch/__init__.py\", line 104, in forward\r\n    return self.loss(acts, labels, act_lens, label_lens, self.blank, self.reduction, self.fastemit_lambda)\r\n  File \"/mnt/data3/lli/espnet/tools/warp-transducer/pytorch_binding/warprnnt_pytorch/__init__.py\", line 24, in forward\r\n    loss_func = warp_rnnt.gpu_rnnt if is_cuda else warp_rnnt.cpu_rnnt\r\nAttributeError: module 'warprnnt_pytorch.warp_rnnt' has no attribute 'gpu_rnnt'\r\n", "reactions": {"url": "https://api.github.com/repos/espnet/espnet/issues/3948/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/espnet/espnet/issues/3948/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/espnet/espnet/issues/3934", "repository_url": "https://api.github.com/repos/espnet/espnet", "labels_url": "https://api.github.com/repos/espnet/espnet/issues/3934/labels{/name}", "comments_url": "https://api.github.com/repos/espnet/espnet/issues/3934/comments", "events_url": "https://api.github.com/repos/espnet/espnet/issues/3934/events", "html_url": "https://github.com/espnet/espnet/issues/3934", "id": 1090465172, "node_id": "I_kwDOBsxW2c5A_y2U", "number": 3934, "title": "espnet2.bin.asr_align.py: AttributeError: 'Namespace' object has no attribute 'token_list'", "user": {"login": "tjysdsg", "id": 21212505, "node_id": "MDQ6VXNlcjIxMjEyNTA1", "avatar_url": "https://avatars.githubusercontent.com/u/21212505?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tjysdsg", "html_url": "https://github.com/tjysdsg", "followers_url": "https://api.github.com/users/tjysdsg/followers", "following_url": "https://api.github.com/users/tjysdsg/following{/other_user}", "gists_url": "https://api.github.com/users/tjysdsg/gists{/gist_id}", "starred_url": "https://api.github.com/users/tjysdsg/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tjysdsg/subscriptions", "organizations_url": "https://api.github.com/users/tjysdsg/orgs", "repos_url": "https://api.github.com/users/tjysdsg/repos", "events_url": "https://api.github.com/users/tjysdsg/events{/privacy}", "received_events_url": "https://api.github.com/users/tjysdsg/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 777173273, "node_id": "MDU6TGFiZWw3NzcxNzMyNzM=", "url": "https://api.github.com/repos/espnet/espnet/labels/Bug", "name": "Bug", "color": "ee0701", "default": false, "description": "bug should be fixed"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2021-12-29T11:45:58Z", "updated_at": "2021-12-30T11:30:33Z", "closed_at": "2021-12-30T11:30:33Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "**Describe the bug**\r\nError encountered when using espnet2.bin.asr_align.py to align a .wav file\r\n\r\n**Basic environments:**\r\n- OS information: `Linux 5.4.54-1.0.0.std7c.el7.2.x86_64 #1 SMP Mon Nov 16 10:02:20 CST 2020 x86_64`\r\n- python version: `3.8.10 (default, May 19 2021, 18:05:58)  [GCC 7.3.0]`\r\n- espnet version: `espnet 0.10.5a1`\r\n- pytorch version: `pytorch 1.10.1`\r\n- Git hash: `b914fa273377796f77f99ee0a8356359f046900d`\r\n  - Commit date: `Wed Dec 29 19:25:42 2021 +0800`\r\n(The commit is the from my fork, but none of python code was modified)\r\n\r\n**Task information:**\r\n - Task: ASR\r\n - Recipe: WSJ, Self-supervised learning features Wav2Vec2_large_ll60k, Conformer, utt_mvn with Transformer-LM, adapted to aishell3\r\n - the align script is written by myself:\r\n```\r\n#!/usr/bin/env bash\r\n\r\nset -e\r\nset -u\r\nset -o pipefail\r\n\r\nlog() {\r\n  local fname=${BASH_SOURCE[1]##*/}\r\n  echo -e \"$(date '+%Y-%m-%dT%H:%M:%S') (${fname}:${BASH_LINENO[0]}:${FUNCNAME[1]}) $*\"\r\n}\r\n\r\nstage=1          # Processes starts from the specified stage.\r\nstop_stage=10000 # Processes is stopped at the specified stage.\r\ntrain_set=\"train\"\r\nval_set=\"test\"\r\ntest_sets=\"test\"\r\nnj=1\r\n\r\nasr_config=conf/tuning/train_asr_conformer_s3prlfrontend_wav2vec2.yaml\r\nexp_dir=exp/asr_train_asr_conformer_s3prlfrontend_wav2vec2_raw_word_sp\r\nout_dir=exp/asr_align_asr_conformer_s3prlfrontend_wav2vec2_raw_word_sp\r\n\r\nlog \"$0 $*\"\r\n. utils/parse_options.sh\r\n\r\nif [ $# -ne 0 ]; then\r\n  log \"Error: No positional arguments are required.\"\r\n  exit 2\r\nfi\r\n\r\n. ./path.sh\r\n. ./cmd.sh\r\n\r\nmkdir -p ${out_dir}\r\n\r\n${train_cmd} JOB=1:\"${nj}\" \"${out_dir}\"/asr_align.JOB.log \\\r\n  python3 -m espnet2.bin.asr_align \\\r\n  --asr_train_config ${asr_config} \\\r\n  --asr_model_file ${exp_dir}/valid.acc.best.pth \\\r\n  --fs 16000 \\\r\n  --audio exp/SSB00050353.wav \\\r\n  --text exp/text \\\r\n  --output \"${out_dir}/aligned.txt\" || exit 1\r\n```\r\n - ESPnet2\r\n\r\n**Error logs**\r\n```\r\n/home/storage15/tangjiyang/espnet/tools/anaconda/envs/espnet/bin/python3 /home/storage15/tangjiyang/espnet/espnet2/bin/asr_align.py --asr_train_config conf/tuning/train_asr_conformer_s3prlfrontend_wav2vec2.yaml --asr_model_file exp/asr_train_asr_conformer_s3prlfrontend_wav2vec2_raw_word_sp/valid.acc.best.pth --fs 16000 --audio exp/SSB00050353.wav --text exp/text --output exp/asr_align_asr_conformer_s3prlfrontend_wav2vec2_raw_word_sp/aligned.txt\r\nTraceback (most recent call last):\r\n  File \"/home/storage15/tangjiyang/espnet/tools/anaconda/envs/espnet/lib/python3.8/runpy.py\", line 194, in _run_module_as_main\r\n    return _run_code(code, main_globals, None,\r\n  File \"/home/storage15/tangjiyang/espnet/tools/anaconda/envs/espnet/lib/python3.8/runpy.py\", line 87, in _run_code\r\n    exec(code, run_globals)\r\n  File \"/home/storage15/tangjiyang/espnet/espnet2/bin/asr_align.py\", line 827, in <module>\r\n    main()\r\n  File \"/home/storage15/tangjiyang/espnet/espnet2/bin/asr_align.py\", line 823, in main\r\n    ctc_align(**kwargs)\r\n  File \"/home/storage15/tangjiyang/espnet/espnet2/bin/asr_align.py\", line 632, in ctc_align\r\n    aligner = CTCSegmentation(**model, **kwargs)\r\n  File \"/home/storage15/tangjiyang/espnet/espnet2/bin/asr_align.py\", line 235, in __init__\r\n    asr_model, asr_train_args = ASRTask.build_model_from_file(\r\n  File \"/home/storage15/tangjiyang/espnet/espnet2/tasks/abs_task.py\", line 1822, in build_model_from_file\r\n    model = cls.build_model(args)\r\n  File \"/home/storage15/tangjiyang/espnet/espnet2/tasks/asr.py\", line 377, in build_model\r\n    if isinstance(args.token_list, str):\r\nAttributeError: 'Namespace' object has no attribute 'token_list'\r\n```\r\n", "reactions": {"url": "https://api.github.com/repos/espnet/espnet/issues/3934/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/espnet/espnet/issues/3934/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/espnet/espnet/issues/3907", "repository_url": "https://api.github.com/repos/espnet/espnet", "labels_url": "https://api.github.com/repos/espnet/espnet/issues/3907/labels{/name}", "comments_url": "https://api.github.com/repos/espnet/espnet/issues/3907/comments", "events_url": "https://api.github.com/repos/espnet/espnet/issues/3907/events", "html_url": "https://github.com/espnet/espnet/issues/3907", "id": 1087668270, "node_id": "I_kwDOBsxW2c5A1IAu", "number": 3907, "title": "RNN-T ALSD beam search decoder bug ???", "user": {"login": "kobenaxie", "id": 22359441, "node_id": "MDQ6VXNlcjIyMzU5NDQx", "avatar_url": "https://avatars.githubusercontent.com/u/22359441?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kobenaxie", "html_url": "https://github.com/kobenaxie", "followers_url": "https://api.github.com/users/kobenaxie/followers", "following_url": "https://api.github.com/users/kobenaxie/following{/other_user}", "gists_url": "https://api.github.com/users/kobenaxie/gists{/gist_id}", "starred_url": "https://api.github.com/users/kobenaxie/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kobenaxie/subscriptions", "organizations_url": "https://api.github.com/users/kobenaxie/orgs", "repos_url": "https://api.github.com/users/kobenaxie/repos", "events_url": "https://api.github.com/users/kobenaxie/events{/privacy}", "received_events_url": "https://api.github.com/users/kobenaxie/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 777173273, "node_id": "MDU6TGFiZWw3NzcxNzMyNzM=", "url": "https://api.github.com/repos/espnet/espnet/labels/Bug", "name": "Bug", "color": "ee0701", "default": false, "description": "bug should be fixed"}, {"id": 2519100905, "node_id": "MDU6TGFiZWwyNTE5MTAwOTA1", "url": "https://api.github.com/repos/espnet/espnet/labels/RNNT", "name": "RNNT", "color": "0e8a16", "default": false, "description": "(RNN) transducer related issue"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2021-12-23T12:21:39Z", "updated_at": "2021-12-23T14:09:51Z", "closed_at": "2021-12-23T14:09:51Z", "author_association": "NONE", "active_lock_reason": null, "body": "https://github.com/espnet/espnet/blob/682dad150bb13c7d852600583c53ce8d24fd1d6e/espnet/nets/pytorch_backend/transducer/utils.py#L296\r\n\r\nreturn `final` rather than `hyps`  here ?", "reactions": {"url": "https://api.github.com/repos/espnet/espnet/issues/3907/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/espnet/espnet/issues/3907/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/espnet/espnet/issues/3885", "repository_url": "https://api.github.com/repos/espnet/espnet", "labels_url": "https://api.github.com/repos/espnet/espnet/issues/3885/labels{/name}", "comments_url": "https://api.github.com/repos/espnet/espnet/issues/3885/comments", "events_url": "https://api.github.com/repos/espnet/espnet/issues/3885/events", "html_url": "https://github.com/espnet/espnet/issues/3885", "id": 1084794683, "node_id": "I_kwDOBsxW2c5AqKc7", "number": 3885, "title": "-Infinity and Large Negative CTC Loss values in training Transformer,ESPNET-1", "user": {"login": "sairitwik27", "id": 66405406, "node_id": "MDQ6VXNlcjY2NDA1NDA2", "avatar_url": "https://avatars.githubusercontent.com/u/66405406?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sairitwik27", "html_url": "https://github.com/sairitwik27", "followers_url": "https://api.github.com/users/sairitwik27/followers", "following_url": "https://api.github.com/users/sairitwik27/following{/other_user}", "gists_url": "https://api.github.com/users/sairitwik27/gists{/gist_id}", "starred_url": "https://api.github.com/users/sairitwik27/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sairitwik27/subscriptions", "organizations_url": "https://api.github.com/users/sairitwik27/orgs", "repos_url": "https://api.github.com/users/sairitwik27/repos", "events_url": "https://api.github.com/users/sairitwik27/events{/privacy}", "received_events_url": "https://api.github.com/users/sairitwik27/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 777173273, "node_id": "MDU6TGFiZWw3NzcxNzMyNzM=", "url": "https://api.github.com/repos/espnet/espnet/labels/Bug", "name": "Bug", "color": "ee0701", "default": false, "description": "bug should be fixed"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2021-12-20T13:29:11Z", "updated_at": "2021-12-20T15:02:42Z", "closed_at": "2021-12-20T15:02:42Z", "author_association": "NONE", "active_lock_reason": null, "body": "I am training a hybrid CTC+Attention Transformer ASR architecture on a custom English dataset in ESPNET-1.\r\n\r\nWhile training, in certain epochs the CTC loss is a large negative value or -Infinity, as seen in the Logs below. Is it some bug? Am I encountering log(0) here? How does ESPNET deal with this when proceeding to train further? \r\n\r\nWhat could be some reasons this might happen, or any pointers on what I should look for to correct this? How can I avoid this from happening? \r\n\r\nI have pasted the Log info for the relevant epochs below:\r\n\r\nThis is in the 2nd epoch:\r\n\r\n\r\n    {\r\n        \"main/loss_ctc\": 108.71437326431274,\r\n        \"main/loss_att\": 37.65539085388183,\r\n        \"main/acc\": 0.8430992370614624,\r\n        \"main/loss\": 58.973086261749266,\r\n        \"epoch\": 1,\r\n        \"iteration\": 8900,\r\n        \"elapsed_time\": 4625.597098432947\r\n    },\r\n    {\r\n        \"main/loss_ctc\": 110.13659646987915,\r\n        \"main/loss_att\": 37.941686143875124,\r\n        \"main/acc\": 0.8417587452432902,\r\n        \"main/loss\": 59.60016016960144,\r\n        \"epoch\": 1,\r\n        \"iteration\": 9000,\r\n        \"elapsed_time\": 4674.663548453944\r\n    }\r\n\r\nHERE IS THE BUG:\r\n\r\n    {\r\n        \"main/loss_ctc\": -1.0633823332454027e+35,\r\n        \"main/loss_att\": 33.7449349117279,\r\n        \"main/acc\": 0.8588202696569839,\r\n        \"main/loss\": -3.190146999736208e+34,\r\n        \"main/cer_ctc\": 0.5,\r\n        \"main/cer\": 0.25806451612903225,\r\n        \"main/wer\": 0.56,\r\n        \"validation/main/loss_ctc\": 94.53634327835178,\r\n        \"validation/main/loss_att\": 25.39011526107788,\r\n        \"validation/main/acc\": 0.8954681877503573,\r\n        \"validation/main/cer_ctc\": 0.2903944302370258,\r\n        \"validation/main/cer\": 0.13007220444671863,\r\n        \"validation/main/wer\": 0.40138911275437356,\r\n        \"validation/main/loss\": 46.13398478490225,\r\n        \"epoch\": 2,\r\n        \"iteration\": 9100,\r\n        \"elapsed_time\": 4900.8509092121385\r\n    },\r\n\r\n\r\n    {\r\n        \"main/loss_ctc\": 107.66262237548828,\r\n        \"main/loss_att\": 34.65400894641876,\r\n        \"main/acc\": 0.8588821330866492,\r\n        \"main/loss\": 56.55659395217896,\r\n        \"epoch\": 2,\r\n        \"iteration\": 9200,\r\n        \"elapsed_time\": 4949.161990025081\r\n    },\r\n    {\r\n        \"main/loss_ctc\": 105.64264076232911,\r\n        \"main/loss_att\": 34.456401147842406,\r\n        \"main/acc\": 0.8594218544011567,\r\n        \"main/loss\": 55.81227375507355,\r\n        \"epoch\": 2,\r\n        \"iteration\": 9300,\r\n        \"elapsed_time\": 4998.13778205798\r\n    } \r\n\r\n\r\nThis happens again in the 7th epoch:\r\n\r\n    {\r\n        \"main/loss_ctc\": 61.394277324676516,\r\n        \"main/loss_att\": 14.41912658214569,\r\n        \"main/acc\": 0.939583179521388,\r\n        \"main/loss\": 28.51167245388031,\r\n        \"epoch\": 7,\r\n        \"iteration\": 35300,\r\n        \"elapsed_time\": 18497.071233517025\r\n    },\r\n    {\r\n        \"main/loss_ctc\": 63.5604776763916,\r\n        \"main/loss_att\": 16.440751180648803,\r\n        \"main/acc\": 0.930040720627006,\r\n        \"main/loss\": 30.57666962623596,\r\n        \"epoch\": 7,\r\n        \"iteration\": 35400,\r\n        \"elapsed_time\": 18546.422725314973\r\n    },\r\n\r\nHERE IS THE BUG AGAIN:\r\n\r\n    {\r\n        \"main/loss_ctc\": -Infinity,\r\n        \"main/loss_att\": 15.544101314544678,\r\n        \"main/acc\": 0.9344525899503685,\r\n        \"main/loss\": -Infinity,\r\n        \"epoch\": 7,\r\n        \"iteration\": 35500,\r\n        \"elapsed_time\": 18594.736651994055\r\n    },\r\n\r\n\r\n    {\r\n        \"main/loss_ctc\": 65.15866382598877,\r\n        \"main/loss_att\": 15.682408819198608,\r\n        \"main/acc\": 0.9380623444817587,\r\n        \"main/loss\": 30.52528594017029,\r\n        \"epoch\": 7,\r\n        \"iteration\": 35600,\r\n        \"elapsed_time\": 18644.14574455493\r\n    },\r\n    {\r\n        \"main/loss_ctc\": 62.12017169952392,\r\n        \"main/loss_att\": 14.673978538513184,\r\n        \"main/acc\": 0.9380897674552255,\r\n        \"main/loss\": 28.90783706665039,\r\n        \"epoch\": 7,\r\n        \"iteration\": 35700,\r\n        \"elapsed_time\": 18692.988422461087\r\n    },\r\n\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/espnet/espnet/issues/3885/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/espnet/espnet/issues/3885/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/espnet/espnet/issues/3863", "repository_url": "https://api.github.com/repos/espnet/espnet", "labels_url": "https://api.github.com/repos/espnet/espnet/issues/3863/labels{/name}", "comments_url": "https://api.github.com/repos/espnet/espnet/issues/3863/comments", "events_url": "https://api.github.com/repos/espnet/espnet/issues/3863/events", "html_url": "https://github.com/espnet/espnet/issues/3863", "id": 1080441756, "node_id": "I_kwDOBsxW2c5AZjuc", "number": 3863, "title": "Incorrect usage of the `cache` in the method `score()` for transducer beam search", "user": {"login": "csukuangfj", "id": 5284924, "node_id": "MDQ6VXNlcjUyODQ5MjQ=", "avatar_url": "https://avatars.githubusercontent.com/u/5284924?v=4", "gravatar_id": "", "url": "https://api.github.com/users/csukuangfj", "html_url": "https://github.com/csukuangfj", "followers_url": "https://api.github.com/users/csukuangfj/followers", "following_url": "https://api.github.com/users/csukuangfj/following{/other_user}", "gists_url": "https://api.github.com/users/csukuangfj/gists{/gist_id}", "starred_url": "https://api.github.com/users/csukuangfj/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/csukuangfj/subscriptions", "organizations_url": "https://api.github.com/users/csukuangfj/orgs", "repos_url": "https://api.github.com/users/csukuangfj/repos", "events_url": "https://api.github.com/users/csukuangfj/events{/privacy}", "received_events_url": "https://api.github.com/users/csukuangfj/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 777173273, "node_id": "MDU6TGFiZWw3NzcxNzMyNzM=", "url": "https://api.github.com/repos/espnet/espnet/labels/Bug", "name": "Bug", "color": "ee0701", "default": false, "description": "bug should be fixed"}], "state": "closed", "locked": false, "assignee": {"login": "b-flo", "id": 41155456, "node_id": "MDQ6VXNlcjQxMTU1NDU2", "avatar_url": "https://avatars.githubusercontent.com/u/41155456?v=4", "gravatar_id": "", "url": "https://api.github.com/users/b-flo", "html_url": "https://github.com/b-flo", "followers_url": "https://api.github.com/users/b-flo/followers", "following_url": "https://api.github.com/users/b-flo/following{/other_user}", "gists_url": "https://api.github.com/users/b-flo/gists{/gist_id}", "starred_url": "https://api.github.com/users/b-flo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/b-flo/subscriptions", "organizations_url": "https://api.github.com/users/b-flo/orgs", "repos_url": "https://api.github.com/users/b-flo/repos", "events_url": "https://api.github.com/users/b-flo/events{/privacy}", "received_events_url": "https://api.github.com/users/b-flo/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "b-flo", "id": 41155456, "node_id": "MDQ6VXNlcjQxMTU1NDU2", "avatar_url": "https://avatars.githubusercontent.com/u/41155456?v=4", "gravatar_id": "", "url": "https://api.github.com/users/b-flo", "html_url": "https://github.com/b-flo", "followers_url": "https://api.github.com/users/b-flo/followers", "following_url": "https://api.github.com/users/b-flo/following{/other_user}", "gists_url": "https://api.github.com/users/b-flo/gists{/gist_id}", "starred_url": "https://api.github.com/users/b-flo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/b-flo/subscriptions", "organizations_url": "https://api.github.com/users/b-flo/orgs", "repos_url": "https://api.github.com/users/b-flo/repos", "events_url": "https://api.github.com/users/b-flo/events{/privacy}", "received_events_url": "https://api.github.com/users/b-flo/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 1, "created_at": "2021-12-15T00:52:02Z", "updated_at": "2021-12-16T09:36:27Z", "closed_at": "2021-12-16T09:36:27Z", "author_association": "NONE", "active_lock_reason": null, "body": "See the code below\r\nhttps://github.com/espnet/espnet/blob/ae635955ff79efde9c4df007bb8324fea386c169/espnet/nets/pytorch_backend/transducer/rnn_decoder.py#L180-L183\r\n\r\nIt concatenates all the integers in `yseq` and uses it as a key into the `cache`.\r\n\r\nThe issue is that it places no separators during the concatenation. The consequence is that different `yseq` may map to the same key. For instance, both `[1, 11, 1, 2]` and `[1, 1, 1, 12]` map to the same key `11112`.\r\n```python3\r\n>>> ''.join(list(map(str, [1, 11, 1, 2])))\r\n'11112'\r\n>>> ''.join(list(map(str, [1, 1, 1, 12])))\r\n'11112'\r\n```", "reactions": {"url": "https://api.github.com/repos/espnet/espnet/issues/3863/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/espnet/espnet/issues/3863/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/espnet/espnet/issues/3835", "repository_url": "https://api.github.com/repos/espnet/espnet", "labels_url": "https://api.github.com/repos/espnet/espnet/issues/3835/labels{/name}", "comments_url": "https://api.github.com/repos/espnet/espnet/issues/3835/comments", "events_url": "https://api.github.com/repos/espnet/espnet/issues/3835/events", "html_url": "https://github.com/espnet/espnet/issues/3835", "id": 1069443330, "node_id": "I_kwDOBsxW2c4_vmkC", "number": 3835, "title": "Tried replicating AIShell recipe with a custom dataset and failed due to an error", "user": {"login": "tarunsaib1997", "id": 31347497, "node_id": "MDQ6VXNlcjMxMzQ3NDk3", "avatar_url": "https://avatars.githubusercontent.com/u/31347497?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tarunsaib1997", "html_url": "https://github.com/tarunsaib1997", "followers_url": "https://api.github.com/users/tarunsaib1997/followers", "following_url": "https://api.github.com/users/tarunsaib1997/following{/other_user}", "gists_url": "https://api.github.com/users/tarunsaib1997/gists{/gist_id}", "starred_url": "https://api.github.com/users/tarunsaib1997/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tarunsaib1997/subscriptions", "organizations_url": "https://api.github.com/users/tarunsaib1997/orgs", "repos_url": "https://api.github.com/users/tarunsaib1997/repos", "events_url": "https://api.github.com/users/tarunsaib1997/events{/privacy}", "received_events_url": "https://api.github.com/users/tarunsaib1997/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 777173273, "node_id": "MDU6TGFiZWw3NzcxNzMyNzM=", "url": "https://api.github.com/repos/espnet/espnet/labels/Bug", "name": "Bug", "color": "ee0701", "default": false, "description": "bug should be fixed"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2021-12-02T11:33:53Z", "updated_at": "2021-12-03T07:50:47Z", "closed_at": "2021-12-03T07:50:47Z", "author_association": "NONE", "active_lock_reason": null, "body": "# asr_train.py --config conf/train_conformer.yaml --preprocess-conf --ngpu 1 --backend pytorch --outdir exp/train_IISC_pytorch_train_conformer/results --tensorboard-dir tensorboard/train_IISC_pytorch_train_conformer --debugmode 1 --dict data/lang_1char/train_IISC_units.txt --debugdir exp/train_IISC_pytorch_train_conformer --minibatches 0 --verbose 0 --resume --train-json dump/train_IISC/deltafalse/data.json --valid-json dump/dev/deltafalse/data.json \r\n# Started at Wed Dec  1 19:09:58 IST 2021\r\n#\r\n2021-12-01 20:06:07,712 (asr_train:563) WARNING: Skip DEBUG/INFO messages\r\n2021-12-01 20:06:22,853 (ctc:38) WARNING: CTC was set to builtin due to PyTorch version.\r\n2021-12-01 20:06:36,562 (asr:503) WARNING: num. model params: 43,112,732 (num. trained: 43,112,732 (100.0%))\r\nepoch       iteration   main/loss   main/loss_ctc  main/loss_att  validation/main/loss  validation/main/loss_ctc  validation/main/loss_att  main/acc    validation/main/acc  main/cer_ctc  validation/main/cer_ctc  elapsed_time\r\n\u001b[J0           100         295.608     489.762        212.399                                                                                  0.00909221                                                              504.339       \r\n\u001b[J     total [..................................................]  0.08%\r\nthis epoch [##................................................]  4.07%\r\n       100 iter, 0 epoch / 50 epochs\r\n       inf iters/sec. Estimated time to finish: 0:00:00.\r\n\u001b[4A\u001b[J0           200         221.104     232.721        216.125                                                                                  0.0144449                                                               937.849       \r\n\u001b[J     total [..................................................]  0.16%\r\nthis epoch [####..............................................]  8.15%\r\n       200 iter, 0 epoch / 50 epochs\r\n   0.23067 iters/sec. Estimated time to finish: 6 days, 3:32:47.418440.\r\n\u001b[4A\u001b[J0           300         187.596     184.985        188.715                                                                                  0.0429184                                                               1394.47       \r\n\u001b[J     total [..................................................]  0.24%\r\nthis epoch [######............................................] 12.22%\r\n       300 iter, 0 epoch / 50 epochs\r\n   0.22468 iters/sec. Estimated time to finish: 6 days, 7:21:14.824984.\r\n\u001b[4A\u001b[J0           400         180.17      180.994        179.816                                                                                  0.15135                                                                 1817.09       \r\n\u001b[J     total [..................................................]  0.33%\r\nthis epoch [########..........................................] 16.30%\r\n       400 iter, 0 epoch / 50 epochs\r\n   0.22853 iters/sec. Estimated time to finish: 6 days, 4:41:11.511320.\r\n\u001b[4A\u001b[J0           500         185.251     193.933        181.53                                                                                   0.186138                                                                2231.07       \r\n\u001b[J     total [..................................................]  0.41%\r\nthis epoch [##########........................................] 20.37%\r\n       500 iter, 0 epoch / 50 epochs\r\n   0.23165 iters/sec. Estimated time to finish: 6 days, 2:33:41.714599.\r\n\u001b[4A\u001b[J0           600         166.412     181.078        160.127                                                                                  0.190111                                                                2669.47       \r\n\u001b[J     total [..................................................]  0.49%\r\nthis epoch [############......................................] 24.44%\r\n       600 iter, 0 epoch / 50 epochs\r\n   0.23093 iters/sec. Estimated time to finish: 6 days, 2:53:52.717241.\r\n\u001b[4A\u001b[J0           700         154.674     172.98         146.828                                                                                  0.212874                                                                3101.21       \r\n\u001b[J     total [..................................................]  0.57%\r\nthis epoch [##############....................................] 28.52%\r\n       700 iter, 0 epoch / 50 epochs\r\n   0.23105 iters/sec. Estimated time to finish: 6 days, 2:42:21.052563.\r\n\u001b[4A\u001b[JException in main training loop: Calculated padded input size per channel: (1 x 41). Kernel size: (3 x 3). Kernel size can't be greater than actual input size\r\nTraceback (most recent call last):\r\n  File \"/home/taruns/.conda/envs/espnetenv/lib/python3.7/site-packages/chainer/training/trainer.py\", line 316, in run\r\n    update()\r\n  File \"/home/taruns/espnet/espnet/asr/pytorch_backend/asr.py\", line 235, in update\r\n    self.update_core()\r\n  File \"/home/taruns/espnet/espnet/asr/pytorch_backend/asr.py\", line 199, in update_core\r\n    data_parallel(self.model, x, range(self.ngpu)).mean() / self.accum_grad\r\n  File \"/home/taruns/.conda/envs/espnetenv/lib/python3.7/site-packages/torch/nn/parallel/data_parallel.py\", line 228, in data_parallel\r\n    return module(*inputs[0], **module_kwargs[0])\r\n  File \"/home/taruns/.conda/envs/espnetenv/lib/python3.7/site-packages/torch/nn/modules/module.py\", line 1102, in _call_impl\r\n    return forward_call(*input, **kwargs)\r\n  File \"/home/taruns/espnet/espnet/nets/pytorch_backend/e2e_asr_transformer.py\", line 190, in forward\r\n    hs_pad, hs_mask, hs_intermediates = self.encoder(xs_pad, src_mask)\r\n  File \"/home/taruns/.conda/envs/espnetenv/lib/python3.7/site-packages/torch/nn/modules/module.py\", line 1102, in _call_impl\r\n    return forward_call(*input, **kwargs)\r\n  File \"/home/taruns/espnet/espnet/nets/pytorch_backend/conformer/encoder.py\", line 245, in forward\r\n    xs, masks = self.embed(xs, masks)\r\n  File \"/home/taruns/.conda/envs/espnetenv/lib/python3.7/site-packages/torch/nn/modules/module.py\", line 1102, in _call_impl\r\n    return forward_call(*input, **kwargs)\r\n  File \"/home/taruns/espnet/espnet/nets/pytorch_backend/transformer/subsampling.py\", line 84, in forward\r\n    x = self.conv(x)\r\n  File \"/home/taruns/.conda/envs/espnetenv/lib/python3.7/site-packages/torch/nn/modules/module.py\", line 1102, in _call_impl\r\n    return forward_call(*input, **kwargs)\r\n  File \"/home/taruns/.conda/envs/espnetenv/lib/python3.7/site-packages/torch/nn/modules/container.py\", line 141, in forward\r\n    input = module(input)\r\n  File \"/home/taruns/.conda/envs/espnetenv/lib/python3.7/site-packages/torch/nn/modules/module.py\", line 1102, in _call_impl\r\n    return forward_call(*input, **kwargs)\r\n  File \"/home/taruns/.conda/envs/espnetenv/lib/python3.7/site-packages/torch/nn/modules/conv.py\", line 446, in forward\r\n    return self._conv_forward(input, self.weight, self.bias)\r\n  File \"/home/taruns/.conda/envs/espnetenv/lib/python3.7/site-packages/torch/nn/modules/conv.py\", line 443, in _conv_forward\r\n    self.padding, self.dilation, self.groups)\r\nWill finalize trainer extensions and updater before reraising the exception.\r\nTraceback (most recent call last):\r\n  File \"/home/taruns/espnet/espnet/bin/asr_train.py\", line 639, in <module>\r\n    main(sys.argv[1:])\r\n  File \"/home/taruns/espnet/espnet/bin/asr_train.py\", line 625, in main\r\n    train(args)\r\n  File \"/home/taruns/espnet/espnet/asr/pytorch_backend/asr.py\", line 967, in train\r\n    trainer.run()\r\n  File \"/home/taruns/.conda/envs/espnetenv/lib/python3.7/site-packages/chainer/training/trainer.py\", line 349, in run\r\n    six.reraise(*exc_info)\r\n  File \"/home/taruns/.conda/envs/espnetenv/lib/python3.7/site-packages/six.py\", line 719, in reraise\r\n    raise value\r\n  File \"/home/taruns/.conda/envs/espnetenv/lib/python3.7/site-packages/chainer/training/trainer.py\", line 316, in run\r\n    update()\r\n  File \"/home/taruns/espnet/espnet/asr/pytorch_backend/asr.py\", line 235, in update\r\n    self.update_core()\r\n  File \"/home/taruns/espnet/espnet/asr/pytorch_backend/asr.py\", line 199, in update_core\r\n    data_parallel(self.model, x, range(self.ngpu)).mean() / self.accum_grad\r\n  File \"/home/taruns/.conda/envs/espnetenv/lib/python3.7/site-packages/torch/nn/parallel/data_parallel.py\", line 228, in data_parallel\r\n    return module(*inputs[0], **module_kwargs[0])\r\n  File \"/home/taruns/.conda/envs/espnetenv/lib/python3.7/site-packages/torch/nn/modules/module.py\", line 1102, in _call_impl\r\n    return forward_call(*input, **kwargs)\r\n  File \"/home/taruns/espnet/espnet/nets/pytorch_backend/e2e_asr_transformer.py\", line 190, in forward\r\n    hs_pad, hs_mask, hs_intermediates = self.encoder(xs_pad, src_mask)\r\n  File \"/home/taruns/.conda/envs/espnetenv/lib/python3.7/site-packages/torch/nn/modules/module.py\", line 1102, in _call_impl\r\n    return forward_call(*input, **kwargs)\r\n  File \"/home/taruns/espnet/espnet/nets/pytorch_backend/conformer/encoder.py\", line 245, in forward\r\n    xs, masks = self.embed(xs, masks)\r\n  File \"/home/taruns/.conda/envs/espnetenv/lib/python3.7/site-packages/torch/nn/modules/module.py\", line 1102, in _call_impl\r\n    return forward_call(*input, **kwargs)\r\n  File \"/home/taruns/espnet/espnet/nets/pytorch_backend/transformer/subsampling.py\", line 84, in forward\r\n    x = self.conv(x)\r\n  File \"/home/taruns/.conda/envs/espnetenv/lib/python3.7/site-packages/torch/nn/modules/module.py\", line 1102, in _call_impl\r\n    return forward_call(*input, **kwargs)\r\n  File \"/home/taruns/.conda/envs/espnetenv/lib/python3.7/site-packages/torch/nn/modules/container.py\", line 141, in forward\r\n    input = module(input)\r\n  File \"/home/taruns/.conda/envs/espnetenv/lib/python3.7/site-packages/torch/nn/modules/module.py\", line 1102, in _call_impl\r\n    return forward_call(*input, **kwargs)\r\n  File \"/home/taruns/.conda/envs/espnetenv/lib/python3.7/site-packages/torch/nn/modules/conv.py\", line 446, in forward\r\n    return self._conv_forward(input, self.weight, self.bias)\r\n  File \"/home/taruns/.conda/envs/espnetenv/lib/python3.7/site-packages/torch/nn/modules/conv.py\", line 443, in _conv_forward\r\n    self.padding, self.dilation, self.groups)\r\nRuntimeError: Calculated padded input size per channel: (1 x 41). Kernel size: (3 x 3). Kernel size can't be greater than actual input size\r\n# Accounting: time=6595 threads=1\r\n# Ended (code 1) at Wed Dec  1 20:59:53 IST 2021, elapsed time 6595 seconds", "reactions": {"url": "https://api.github.com/repos/espnet/espnet/issues/3835/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/espnet/espnet/issues/3835/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/espnet/espnet/issues/3811", "repository_url": "https://api.github.com/repos/espnet/espnet", "labels_url": "https://api.github.com/repos/espnet/espnet/issues/3811/labels{/name}", "comments_url": "https://api.github.com/repos/espnet/espnet/issues/3811/comments", "events_url": "https://api.github.com/repos/espnet/espnet/issues/3811/events", "html_url": "https://github.com/espnet/espnet/issues/3811", "id": 1060865052, "node_id": "I_kwDOBsxW2c4_O4Qc", "number": 3811, "title": "incorrect olens result for stft when win_length is not same as n_fft", "user": {"login": "IceCreamWW", "id": 20967938, "node_id": "MDQ6VXNlcjIwOTY3OTM4", "avatar_url": "https://avatars.githubusercontent.com/u/20967938?v=4", "gravatar_id": "", "url": "https://api.github.com/users/IceCreamWW", "html_url": "https://github.com/IceCreamWW", "followers_url": "https://api.github.com/users/IceCreamWW/followers", "following_url": "https://api.github.com/users/IceCreamWW/following{/other_user}", "gists_url": "https://api.github.com/users/IceCreamWW/gists{/gist_id}", "starred_url": "https://api.github.com/users/IceCreamWW/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/IceCreamWW/subscriptions", "organizations_url": "https://api.github.com/users/IceCreamWW/orgs", "repos_url": "https://api.github.com/users/IceCreamWW/repos", "events_url": "https://api.github.com/users/IceCreamWW/events{/privacy}", "received_events_url": "https://api.github.com/users/IceCreamWW/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 777173273, "node_id": "MDU6TGFiZWw3NzcxNzMyNzM=", "url": "https://api.github.com/repos/espnet/espnet/labels/Bug", "name": "Bug", "color": "ee0701", "default": false, "description": "bug should be fixed"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2021-11-23T05:58:33Z", "updated_at": "2021-12-22T14:04:23Z", "closed_at": "2021-12-22T14:04:23Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "In torch.stft, win_length is not used when calculating the number of frames, which is same as libriosa.stft,  see also http://librosa.org/doc/main/_modules/librosa/core/spectrum.html#stft.\r\n\r\nIn espnet2/layers/stft.py\r\n```python\r\n161        if ilens is not None:\r\n162            if self.center:\r\n163                pad = self.win_length // 2\r\n164                ilens = ilens + 2 * pad\r\n165\r\n166            olens = (ilens - self.win_length) // self.hop_length + 1\r\n```\r\nshould be\r\n```python\r\n161         if ilens is not None:\r\n162             if self.center:\r\n163                 pad = self.n_fft // 2\r\n164                 ilens = ilens + 2 * pad\r\n165\r\n166             olens = (ilens - self.n_fft) // self.hop_length + 1\r\n```", "reactions": {"url": "https://api.github.com/repos/espnet/espnet/issues/3811/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/espnet/espnet/issues/3811/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/espnet/espnet/issues/3803", "repository_url": "https://api.github.com/repos/espnet/espnet", "labels_url": "https://api.github.com/repos/espnet/espnet/issues/3803/labels{/name}", "comments_url": "https://api.github.com/repos/espnet/espnet/issues/3803/comments", "events_url": "https://api.github.com/repos/espnet/espnet/issues/3803/events", "html_url": "https://github.com/espnet/espnet/issues/3803", "id": 1056821316, "node_id": "I_kwDOBsxW2c4-_dBE", "number": 3803, "title": "An error occurred in the ASR task using the streaming conformer config on ESPnet2", "user": {"login": "lin-nerd", "id": 61384871, "node_id": "MDQ6VXNlcjYxMzg0ODcx", "avatar_url": "https://avatars.githubusercontent.com/u/61384871?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lin-nerd", "html_url": "https://github.com/lin-nerd", "followers_url": "https://api.github.com/users/lin-nerd/followers", "following_url": "https://api.github.com/users/lin-nerd/following{/other_user}", "gists_url": "https://api.github.com/users/lin-nerd/gists{/gist_id}", "starred_url": "https://api.github.com/users/lin-nerd/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lin-nerd/subscriptions", "organizations_url": "https://api.github.com/users/lin-nerd/orgs", "repos_url": "https://api.github.com/users/lin-nerd/repos", "events_url": "https://api.github.com/users/lin-nerd/events{/privacy}", "received_events_url": "https://api.github.com/users/lin-nerd/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 777173273, "node_id": "MDU6TGFiZWw3NzcxNzMyNzM=", "url": "https://api.github.com/repos/espnet/espnet/labels/Bug", "name": "Bug", "color": "ee0701", "default": false, "description": "bug should be fixed"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 24, "created_at": "2021-11-18T01:22:10Z", "updated_at": "2021-12-28T08:25:36Z", "closed_at": "2021-12-28T08:25:36Z", "author_association": "NONE", "active_lock_reason": null, "body": "- python=3.8.5\r\n- torch=1.10.0+cu102\r\n- torch cuda=10.2\r\n- espnet=0.10.5a1\r\n\r\nI want to use streaming conformer config for my dataset of the ASR task, but this error occurs after the first epoch training.\r\nThe log is:\r\n[user] 2021-11-17 21:07:07,236 (trainer:668) INFO: 1epoch:train:26767-28253batch: iter_time=7.281e-05, forward_time=0.133, loss=150.549, loss_att=116.794, loss_ctc=229.310, acc=0.325, backward_time=0.169, optim_step_time=0.031, optim0_lr0=4.585e-04, train_time=0.425\r\n[user] 2021-11-17 21:17:35,754 (trainer:668) INFO: 1epoch:train:28254-29740batch: iter_time=2.378e-04, forward_time=0.133, loss=142.284, loss_att=110.287, loss_ctc=216.944, acc=0.327, backward_time=0.166, optim_step_time=0.031, optim0_lr0=4.833e-04, train_time=0.422\r\nTraceback (most recent call last):\r\n  File \"/home/user/espnet/tools/anaconda/envs/espnet/lib/python3.8/runpy.py\", line 194, in _run_module_as_main\r\n    return _run_code(code, main_globals, None,\r\n  File \"/home/user/espnet/tools/anaconda/envs/espnet/lib/python3.8/runpy.py\", line 87, in _run_code\r\n    exec(code, run_globals)\r\n  File \"/home/user/espnet/espnet2/bin/asr_train.py\", line 23, in <module>\r\n    main()\r\n  File \"/home/user/espnet/espnet2/bin/asr_train.py\", line 19, in main\r\n    ASRTask.main(cmd=cmd)\r\n  File \"/home/user/espnet/espnet2/tasks/abs_task.py\", line 1013, in main\r\n    cls.main_worker(args)\r\n  File \"/home/user/espnet/espnet2/tasks/abs_task.py\", line 1305, in main_worker\r\n    cls.trainer.run(\r\n  File \"/home/user/espnet/espnet2/train/trainer.py\", line 293, in run\r\n    cls.validate_one_epoch(\r\n  File \"/home/user/espnet/tools/anaconda/envs/espnet/lib/python3.8/site-packages/torch/autograd/grad_mode.py\", line 28, in decorate_context\r\n    return func(*args, **kwargs)\r\n  File \"/home/user/espnet/espnet2/train/trainer.py\", line 711, in validate_one_epoch\r\n    retval = model(**batch)\r\n  File \"/home/user/espnet/tools/anaconda/envs/espnet/lib/python3.8/site-packages/torch/nn/modules/module.py\", line 1102, in _call_impl\r\n    return forward_call(*input, **kwargs)\r\n  File \"/home/user/espnet/espnet2/asr/espnet_model.py\", line 142, in forward\r\n    encoder_out, encoder_out_lens = self.encode(speech, speech_lengths)\r\n  File \"/home/user/espnet/espnet2/asr/espnet_model.py\", line 244, in encode\r\n    assert encoder_out.size(1) <= encoder_out_lens.max(), (\r\nAttributeError: 'NoneType' object has no attribute 'max'\r\n[user] 2021-11-17 21:17:44,911 (internal:139) INFO: Internal process exited.\r\n\r\n\r\n\r\n\r\n\r\n\r\nBut I can use a smaller data set for training, I would like to ask how can I solve this problem.\r\nThe log is:\r\n[user] 2021-11-18 09:07:55,870 (trainer:668) INFO: 1epoch:train:257-272batch: iter_time=7.188e-05, forward_time=0.144, loss=188.445, loss_att=146.988, loss_ctc=285.178, acc=0.257, backward_time=0.172, optim_step_time=0.032, optim0_lr0=4.425e-06, train_time=0.449\r\n[user] 2021-11-18 09:08:02,991 (trainer:668) INFO: 1epoch:train:273-288batch: iter_time=6.664e-05, forward_time=0.142, loss=237.047, loss_att=180.976, loss_ctc=367.880, acc=0.277, backward_time=0.170, optim_step_time=0.032, optim0_lr0=4.692e-06, train_time=0.445\r\n[user] 2021-11-18 09:08:10,122 (trainer:668) INFO: 1epoch:train:289-304batch: iter_time=7.703e-05, forward_time=0.140, loss=278.296, loss_att=215.102, loss_ctc=425.748, acc=0.278, backward_time=0.185, optim_step_time=0.032, optim0_lr0=4.958e-06, train_time=0.445\r\n[user] 2021-11-18 09:08:17,111 (trainer:668) INFO: 1epoch:train:305-320batch: iter_time=7.410e-05, forward_time=0.139, loss=205.749, loss_att=159.653, loss_ctc=313.307, acc=0.271, backward_time=0.170, optim_step_time=0.033, optim0_lr0=5.225e-06, train_time=0.437\r\n[user] 2021-11-18 09:08:24,423 (trainer:668) INFO: 1epoch:train:321-336batch: iter_time=7.448e-05, forward_time=0.146, loss=235.820, loss_att=181.995, loss_ctc=361.411, acc=0.310, backward_time=0.178, optim_step_time=0.032, optim0_lr0=5.492e-06, train_time=0.457\r\n[user] 2021-11-18 09:08:27,867 (trainer:328) INFO: 1epoch results: [train] iter_time=2.738e-04, forward_time=0.141, loss=319.074, loss_att=237.090, loss_ctc=510.369, acc=0.192, backward_time=0.172, optim_step_time=0.032, optim0_lr0=2.842e-06, train_time=0.442, time=2 minutes and 29.56 seconds, total_count=338, gpu_max_cached_mem_GB=9.566, [valid] loss=225.508, loss_att=171.193, loss_ctc=352.243, acc=0.288, cer=0.720, wer=1.284, cer_ctc=1.000, time=2.41 seconds, total_count=12, gpu_max_cached_mem_GB=9.566\r\n[user] 2021-11-18 09:08:28,769 (trainer:375) INFO: The best model has been updated: valid.acc\r\n[user] 2021-11-18 09:08:28,770 (trainer:262) INFO: 2/50epoch started. Estimated time to finish: 2 hours, 4 minutes and 55.87 seconds\r\n[user] 2021-11-18 09:08:36,278 (trainer:668) INFO: 2epoch:train:1-16batch: iter_time=0.004, forward_time=0.148, loss=235.967, loss_att=180.346, loss_ctc=365.749, acc=0.316, backward_time=0.184, optim_step_time=0.033, optim0_lr0=5.792e-06, train_time=0.469\r\n[user] 2021-11-18 09:08:43,533 (trainer:668) INFO: 2epoch:train:17-32batch: iter_time=7.638e-05, forward_time=0.143, loss=189.732, loss_att=145.995, loss_ctc=291.784, acc=0.321, backward_time=0.173, optim_step_time=0.034, optim0_lr0=6.058e-06, train_time=0.453\r\n[user] 2021-11-18 09:08:50,837 (trainer:668) INFO: 2epoch:train:33-48batch: iter_time=7.702e-05, forward_time=0.146, loss=182.177, loss_att=138.910, loss_ctc=283.135, acc=0.321, backward_time=0.179, optim_step_time=0.033, optim0_lr0=6.325e-06, train_time=0.456", "reactions": {"url": "https://api.github.com/repos/espnet/espnet/issues/3803/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/espnet/espnet/issues/3803/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/espnet/espnet/issues/3798", "repository_url": "https://api.github.com/repos/espnet/espnet", "labels_url": "https://api.github.com/repos/espnet/espnet/issues/3798/labels{/name}", "comments_url": "https://api.github.com/repos/espnet/espnet/issues/3798/comments", "events_url": "https://api.github.com/repos/espnet/espnet/issues/3798/events", "html_url": "https://github.com/espnet/espnet/issues/3798", "id": 1055816920, "node_id": "I_kwDOBsxW2c4-7nzY", "number": 3798, "title": "`torch.to` for pe", "user": {"login": "yt605155624", "id": 24568452, "node_id": "MDQ6VXNlcjI0NTY4NDUy", "avatar_url": "https://avatars.githubusercontent.com/u/24568452?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yt605155624", "html_url": "https://github.com/yt605155624", "followers_url": "https://api.github.com/users/yt605155624/followers", "following_url": "https://api.github.com/users/yt605155624/following{/other_user}", "gists_url": "https://api.github.com/users/yt605155624/gists{/gist_id}", "starred_url": "https://api.github.com/users/yt605155624/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yt605155624/subscriptions", "organizations_url": "https://api.github.com/users/yt605155624/orgs", "repos_url": "https://api.github.com/users/yt605155624/repos", "events_url": "https://api.github.com/users/yt605155624/events{/privacy}", "received_events_url": "https://api.github.com/users/yt605155624/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 777173273, "node_id": "MDU6TGFiZWw3NzcxNzMyNzM=", "url": "https://api.github.com/repos/espnet/espnet/labels/Bug", "name": "Bug", "color": "ee0701", "default": false, "description": "bug should be fixed"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2021-11-17T07:54:25Z", "updated_at": "2022-02-15T07:24:42Z", "closed_at": "2022-02-15T07:24:42Z", "author_association": "NONE", "active_lock_reason": null, "body": "https://github.com/espnet/espnet/blob/b22953621a76efd8a5d9e68811056874fdcc2acc/espnet/nets/pytorch_backend/transformer/embedding.py#L78\r\nthere is a `torch.to` for pe, Is it because if not, the GPU memory will be leaked..", "reactions": {"url": "https://api.github.com/repos/espnet/espnet/issues/3798/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/espnet/espnet/issues/3798/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/espnet/espnet/issues/3783", "repository_url": "https://api.github.com/repos/espnet/espnet", "labels_url": "https://api.github.com/repos/espnet/espnet/issues/3783/labels{/name}", "comments_url": "https://api.github.com/repos/espnet/espnet/issues/3783/comments", "events_url": "https://api.github.com/repos/espnet/espnet/issues/3783/events", "html_url": "https://github.com/espnet/espnet/issues/3783", "id": 1053336156, "node_id": "I_kwDOBsxW2c4-yKJc", "number": 3783, "title": "make: command: Command not found ", "user": {"login": "kan-bayashi", "id": 22779813, "node_id": "MDQ6VXNlcjIyNzc5ODEz", "avatar_url": "https://avatars.githubusercontent.com/u/22779813?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kan-bayashi", "html_url": "https://github.com/kan-bayashi", "followers_url": "https://api.github.com/users/kan-bayashi/followers", "following_url": "https://api.github.com/users/kan-bayashi/following{/other_user}", "gists_url": "https://api.github.com/users/kan-bayashi/gists{/gist_id}", "starred_url": "https://api.github.com/users/kan-bayashi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kan-bayashi/subscriptions", "organizations_url": "https://api.github.com/users/kan-bayashi/orgs", "repos_url": "https://api.github.com/users/kan-bayashi/repos", "events_url": "https://api.github.com/users/kan-bayashi/events{/privacy}", "received_events_url": "https://api.github.com/users/kan-bayashi/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 777173273, "node_id": "MDU6TGFiZWw3NzcxNzMyNzM=", "url": "https://api.github.com/repos/espnet/espnet/labels/Bug", "name": "Bug", "color": "ee0701", "default": false, "description": "bug should be fixed"}, {"id": 777173276, "node_id": "MDU6TGFiZWw3NzcxNzMyNzY=", "url": "https://api.github.com/repos/espnet/espnet/labels/Help%20wanted", "name": "Help wanted", "color": "3cb371", "default": false, "description": "Need help"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2021-11-15T08:10:08Z", "updated_at": "2021-11-15T12:22:42Z", "closed_at": "2021-11-15T12:22:42Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "**Describe the bug**\r\n\r\n`$(shell command -v nvcc)` in Makefile causes `command: Command not found` error even if `command` is available as the shell built-in command.\r\n\r\nhttps://github.com/espnet/espnet/blob/c6139d5f0dc79fc4676fd908bbce05486a6672e1/tools/Makefile#L14\r\n\r\nThen, `CPU_ONLY = 0` is always used.\r\n\r\nThis is also caused in CI except for centos.\r\nhttps://github.com/espnet/espnet/runs/4206382740?check_suite_focus=true#step:6:31\r\n\r\nMaybe this is because in centos `which command` returns the path but the others return `shell built-in command`.\r\n\r\n**Basic environments:**\r\n\r\n```\r\n- OS information: Linux 5.8.0-48-generic #54~20.04.1-Ubuntu SMP Sat Mar 20 13:40:25 UTC 2021 x86_64\r\n```\r\n\r\n**To Reproduce**\r\n\r\n```bash\r\n$ cd tools\r\n$ ./setup_anaconda.sh venv espnet 3.8\r\n$ make showenv\r\nmake: command: Command not found\r\nPerform on CPU mode: CPU_ONLY=0\r\nPYTHON=/home/t_hayashi/workspace6/espnet/tools/venv/envs/espnet/bin/python3\r\nPYTHON_VERSION=Python 3.8.12\r\nUSE_CONDA=1\r\nTH_VERSION=1.10.0\r\n```\r\n\r\n`command` itself in available in shell.\r\n```\r\n$ which command\r\ncommand: shell built-in command\r\n```\r\n", "reactions": {"url": "https://api.github.com/repos/espnet/espnet/issues/3783/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/espnet/espnet/issues/3783/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/espnet/espnet/issues/3782", "repository_url": "https://api.github.com/repos/espnet/espnet", "labels_url": "https://api.github.com/repos/espnet/espnet/issues/3782/labels{/name}", "comments_url": "https://api.github.com/repos/espnet/espnet/issues/3782/comments", "events_url": "https://api.github.com/repos/espnet/espnet/issues/3782/events", "html_url": "https://github.com/espnet/espnet/issues/3782", "id": 1053331953, "node_id": "I_kwDOBsxW2c4-yJHx", "number": 3782, "title": "One issue about the CustomUpdater.", "user": {"login": "lixucuhk", "id": 44832757, "node_id": "MDQ6VXNlcjQ0ODMyNzU3", "avatar_url": "https://avatars.githubusercontent.com/u/44832757?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lixucuhk", "html_url": "https://github.com/lixucuhk", "followers_url": "https://api.github.com/users/lixucuhk/followers", "following_url": "https://api.github.com/users/lixucuhk/following{/other_user}", "gists_url": "https://api.github.com/users/lixucuhk/gists{/gist_id}", "starred_url": "https://api.github.com/users/lixucuhk/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lixucuhk/subscriptions", "organizations_url": "https://api.github.com/users/lixucuhk/orgs", "repos_url": "https://api.github.com/users/lixucuhk/repos", "events_url": "https://api.github.com/users/lixucuhk/events{/privacy}", "received_events_url": "https://api.github.com/users/lixucuhk/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 777173273, "node_id": "MDU6TGFiZWw3NzcxNzMyNzM=", "url": "https://api.github.com/repos/espnet/espnet/labels/Bug", "name": "Bug", "color": "ee0701", "default": false, "description": "bug should be fixed"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2021-11-15T08:05:44Z", "updated_at": "2021-11-15T09:00:01Z", "closed_at": "2021-11-15T09:00:00Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hello, I would like to ask for help if someone is familiar with this issue. : )\r\nI am implementing the `egs/librispeech/asr1` project. I have successfully installed all requirements.\r\n\r\nThen, I ran the `run.sh` script step by step. When comes to Step 4, i.e. network training with the `asr_train.py` script, I met the issue indicated in the picture.\r\n![image](https://user-images.githubusercontent.com/44832757/141744995-9db1920f-9970-47e6-a88c-f8735cb12bed.png)\r\n\r\n\r\nI went deeper into the code `espnet/asr/pytorch_backend/asr.py` and found that in the initialization part of a CustomUpdater, the line `self.device = device` caused this problem. \r\n![image](https://user-images.githubusercontent.com/44832757/141744411-1424f922-3d90-4a08-9d7e-f9fd26733407.png)\r\n\r\n\r\nI am not sure whether this is a bug in the codes. Can anyone help me to figure out this? Many thanks for your kindly help!\r\n", "reactions": {"url": "https://api.github.com/repos/espnet/espnet/issues/3782/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/espnet/espnet/issues/3782/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/espnet/espnet/issues/3781", "repository_url": "https://api.github.com/repos/espnet/espnet", "labels_url": "https://api.github.com/repos/espnet/espnet/issues/3781/labels{/name}", "comments_url": "https://api.github.com/repos/espnet/espnet/issues/3781/comments", "events_url": "https://api.github.com/repos/espnet/espnet/issues/3781/events", "html_url": "https://github.com/espnet/espnet/issues/3781", "id": 1053192404, "node_id": "I_kwDOBsxW2c4-xnDU", "number": 3781, "title": "Index error in Transducer beam search ALSD", "user": {"login": "maxwellzh", "id": 32546978, "node_id": "MDQ6VXNlcjMyNTQ2OTc4", "avatar_url": "https://avatars.githubusercontent.com/u/32546978?v=4", "gravatar_id": "", "url": "https://api.github.com/users/maxwellzh", "html_url": "https://github.com/maxwellzh", "followers_url": "https://api.github.com/users/maxwellzh/followers", "following_url": "https://api.github.com/users/maxwellzh/following{/other_user}", "gists_url": "https://api.github.com/users/maxwellzh/gists{/gist_id}", "starred_url": "https://api.github.com/users/maxwellzh/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/maxwellzh/subscriptions", "organizations_url": "https://api.github.com/users/maxwellzh/orgs", "repos_url": "https://api.github.com/users/maxwellzh/repos", "events_url": "https://api.github.com/users/maxwellzh/events{/privacy}", "received_events_url": "https://api.github.com/users/maxwellzh/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 777173273, "node_id": "MDU6TGFiZWw3NzcxNzMyNzM=", "url": "https://api.github.com/repos/espnet/espnet/labels/Bug", "name": "Bug", "color": "ee0701", "default": false, "description": "bug should be fixed"}, {"id": 2519100905, "node_id": "MDU6TGFiZWwyNTE5MTAwOTA1", "url": "https://api.github.com/repos/espnet/espnet/labels/RNNT", "name": "RNNT", "color": "0e8a16", "default": false, "description": "(RNN) transducer related issue"}], "state": "closed", "locked": false, "assignee": {"login": "b-flo", "id": 41155456, "node_id": "MDQ6VXNlcjQxMTU1NDU2", "avatar_url": "https://avatars.githubusercontent.com/u/41155456?v=4", "gravatar_id": "", "url": "https://api.github.com/users/b-flo", "html_url": "https://github.com/b-flo", "followers_url": "https://api.github.com/users/b-flo/followers", "following_url": "https://api.github.com/users/b-flo/following{/other_user}", "gists_url": "https://api.github.com/users/b-flo/gists{/gist_id}", "starred_url": "https://api.github.com/users/b-flo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/b-flo/subscriptions", "organizations_url": "https://api.github.com/users/b-flo/orgs", "repos_url": "https://api.github.com/users/b-flo/repos", "events_url": "https://api.github.com/users/b-flo/events{/privacy}", "received_events_url": "https://api.github.com/users/b-flo/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "b-flo", "id": 41155456, "node_id": "MDQ6VXNlcjQxMTU1NDU2", "avatar_url": "https://avatars.githubusercontent.com/u/41155456?v=4", "gravatar_id": "", "url": "https://api.github.com/users/b-flo", "html_url": "https://github.com/b-flo", "followers_url": "https://api.github.com/users/b-flo/followers", "following_url": "https://api.github.com/users/b-flo/following{/other_user}", "gists_url": "https://api.github.com/users/b-flo/gists{/gist_id}", "starred_url": "https://api.github.com/users/b-flo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/b-flo/subscriptions", "organizations_url": "https://api.github.com/users/b-flo/orgs", "repos_url": "https://api.github.com/users/b-flo/repos", "events_url": "https://api.github.com/users/b-flo/events{/privacy}", "received_events_url": "https://api.github.com/users/b-flo/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 3, "created_at": "2021-11-15T04:10:55Z", "updated_at": "2021-11-17T08:39:05Z", "closed_at": "2021-11-17T08:39:04Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "**Describe the bug**\r\nThe index of `(t, u)` is wrong. Since indices of `u` and `i` are beginning with  0, the `t` should be `t = i - u`. In current impl, `t` is beginning with 1, and the encoder output at `t=0` is never used.\r\nhttps://github.com/espnet/espnet/blob/3c30eab699d8c3a0c61331e3cac38050345527de/espnet/nets/beam_search_transducer.py#L467-L469", "reactions": {"url": "https://api.github.com/repos/espnet/espnet/issues/3781/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/espnet/espnet/issues/3781/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/espnet/espnet/issues/3780", "repository_url": "https://api.github.com/repos/espnet/espnet", "labels_url": "https://api.github.com/repos/espnet/espnet/issues/3780/labels{/name}", "comments_url": "https://api.github.com/repos/espnet/espnet/issues/3780/comments", "events_url": "https://api.github.com/repos/espnet/espnet/issues/3780/events", "html_url": "https://github.com/espnet/espnet/issues/3780", "id": 1052864498, "node_id": "I_kwDOBsxW2c4-wW_y", "number": 3780, "title": "app Ly_map. pl: undefined key POD10000000040000012 in /home/share/maziyang/gigaspeech/data/dump/raw/dev/utt_map", "user": {"login": "ddlBoJack", "id": 51037098, "node_id": "MDQ6VXNlcjUxMDM3MDk4", "avatar_url": "https://avatars.githubusercontent.com/u/51037098?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ddlBoJack", "html_url": "https://github.com/ddlBoJack", "followers_url": "https://api.github.com/users/ddlBoJack/followers", "following_url": "https://api.github.com/users/ddlBoJack/following{/other_user}", "gists_url": "https://api.github.com/users/ddlBoJack/gists{/gist_id}", "starred_url": "https://api.github.com/users/ddlBoJack/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ddlBoJack/subscriptions", "organizations_url": "https://api.github.com/users/ddlBoJack/orgs", "repos_url": "https://api.github.com/users/ddlBoJack/repos", "events_url": "https://api.github.com/users/ddlBoJack/events{/privacy}", "received_events_url": "https://api.github.com/users/ddlBoJack/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 777173273, "node_id": "MDU6TGFiZWw3NzcxNzMyNzM=", "url": "https://api.github.com/repos/espnet/espnet/labels/Bug", "name": "Bug", "color": "ee0701", "default": false, "description": "bug should be fixed"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2021-11-14T07:02:28Z", "updated_at": "2021-11-20T16:14:50Z", "closed_at": "2021-11-20T16:14:50Z", "author_association": "NONE", "active_lock_reason": null, "body": "**Describe the bug**\r\n```bash\r\napp Ly_map. pl: undefined key POD10000000040000012 in /home/share/maziyang/gigaspeech/data/dump/raw/dev/utt_map\r\n```\r\nwhen running `./run.sh`. It happen in `Stage 4: Remove long/short data: ${data_feats}/org -> ${data_feats}` in`asr.sh`", "reactions": {"url": "https://api.github.com/repos/espnet/espnet/issues/3780/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/espnet/espnet/issues/3780/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/espnet/espnet/issues/3774", "repository_url": "https://api.github.com/repos/espnet/espnet", "labels_url": "https://api.github.com/repos/espnet/espnet/issues/3774/labels{/name}", "comments_url": "https://api.github.com/repos/espnet/espnet/issues/3774/comments", "events_url": "https://api.github.com/repos/espnet/espnet/issues/3774/events", "html_url": "https://github.com/espnet/espnet/issues/3774", "id": 1049499480, "node_id": "I_kwDOBsxW2c4-jhdY", "number": 3774, "title": "asr.sh stops at stage 10, ASR stats collection with user warning.", "user": {"login": "arunbaby0", "id": 16813485, "node_id": "MDQ6VXNlcjE2ODEzNDg1", "avatar_url": "https://avatars.githubusercontent.com/u/16813485?v=4", "gravatar_id": "", "url": "https://api.github.com/users/arunbaby0", "html_url": "https://github.com/arunbaby0", "followers_url": "https://api.github.com/users/arunbaby0/followers", "following_url": "https://api.github.com/users/arunbaby0/following{/other_user}", "gists_url": "https://api.github.com/users/arunbaby0/gists{/gist_id}", "starred_url": "https://api.github.com/users/arunbaby0/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/arunbaby0/subscriptions", "organizations_url": "https://api.github.com/users/arunbaby0/orgs", "repos_url": "https://api.github.com/users/arunbaby0/repos", "events_url": "https://api.github.com/users/arunbaby0/events{/privacy}", "received_events_url": "https://api.github.com/users/arunbaby0/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 777173273, "node_id": "MDU6TGFiZWw3NzcxNzMyNzM=", "url": "https://api.github.com/repos/espnet/espnet/labels/Bug", "name": "Bug", "color": "ee0701", "default": false, "description": "bug should be fixed"}, {"id": 1412395969, "node_id": "MDU6TGFiZWwxNDEyMzk1OTY5", "url": "https://api.github.com/repos/espnet/espnet/labels/Docker", "name": "Docker", "color": "a3fc8a", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": {"login": "Fhrozen", "id": 11988996, "node_id": "MDQ6VXNlcjExOTg4OTk2", "avatar_url": "https://avatars.githubusercontent.com/u/11988996?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Fhrozen", "html_url": "https://github.com/Fhrozen", "followers_url": "https://api.github.com/users/Fhrozen/followers", "following_url": "https://api.github.com/users/Fhrozen/following{/other_user}", "gists_url": "https://api.github.com/users/Fhrozen/gists{/gist_id}", "starred_url": "https://api.github.com/users/Fhrozen/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Fhrozen/subscriptions", "organizations_url": "https://api.github.com/users/Fhrozen/orgs", "repos_url": "https://api.github.com/users/Fhrozen/repos", "events_url": "https://api.github.com/users/Fhrozen/events{/privacy}", "received_events_url": "https://api.github.com/users/Fhrozen/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "Fhrozen", "id": 11988996, "node_id": "MDQ6VXNlcjExOTg4OTk2", "avatar_url": "https://avatars.githubusercontent.com/u/11988996?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Fhrozen", "html_url": "https://github.com/Fhrozen", "followers_url": "https://api.github.com/users/Fhrozen/followers", "following_url": "https://api.github.com/users/Fhrozen/following{/other_user}", "gists_url": "https://api.github.com/users/Fhrozen/gists{/gist_id}", "starred_url": "https://api.github.com/users/Fhrozen/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Fhrozen/subscriptions", "organizations_url": "https://api.github.com/users/Fhrozen/orgs", "repos_url": "https://api.github.com/users/Fhrozen/repos", "events_url": "https://api.github.com/users/Fhrozen/events{/privacy}", "received_events_url": "https://api.github.com/users/Fhrozen/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 5, "created_at": "2021-11-10T07:48:07Z", "updated_at": "2021-11-23T08:27:23Z", "closed_at": "2021-11-23T08:27:23Z", "author_association": "NONE", "active_lock_reason": null, "body": "`\r\n[7340ae05d216] 2021-11-10 07:33:20,284 (abs_task:1150) INFO: Scheduler: WarmupLR(warmup_steps=25000)\r\n[7340ae05d216] 2021-11-10 07:33:20,284 (abs_task:1159) INFO: Saving the configuration in exp/asr_stats_raw_hin_bpe5000/logdir/stats.1/config.yaml\r\n[7340ae05d216] 2021-11-10 07:33:20,723 (abs_task:1170) INFO: Namespace(accum_grad=8, allow_variable_data_keys=False, batch_bins=40000000,.....\r\n\r\n/opt/espnet2/espnet2/layers/stft.py:166: UserWarning: __floordiv__ is deprecated, and its behavior will change in a future version of pytorch. It currently rounds toward 0 (like the 'trunc' function NOT 'floor'). This results in incorrect rounding for negative values. To keep the current behavior, use torch.div(a, b, rounding_mode='trunc'), or for actual floor division, use torch.div(a, b, rounding_mode='floor').\r\n  olens = (ilens - self.win_length) // self.hop_length + 1\r\n[7340ae05d216] 2021-11-10 07:33:31,641 (collect_stats:110) INFO: Niter: 100\r\n[7340ae05d216] 2021-11-10 07:33:40,902 (collect_stats:110) INFO: Niter: 200\r\n[7340ae05d216] 2021-11-10 07:33:48,314 (collect_stats:110) INFO: Niter: 300\r\n[7340ae05d216] 2021-11-10 07:33:56,091 (collect_stats:110) INFO: Niter: 400\r\nAccounting: time=53 threads=1\r\nEnded (code 0) at Wed Nov 10 07:34:04 UTC 2021, elapsed time 53 seconds`\r\n\r\n**This happens only in the first run of docker. From the second time, it works perfectly fine.**\r\n\r\n\r\n\r\n`- python version: `3.8.10 (default, Jun  4 2021, 15:09:15)  [GCC 7.5.0]`\r\n- espnet version: `espnet 0.10.4a1`\r\n- pytorch version: `pytorch 1.10.0`\r\n(espnet) root@cfdbcb422965:/opt/espnet2/tools# cat << EOF\r\n> - Git hash: \\`$(git rev-parse HEAD)\\`\r\n>   - Commit date: \\`$(git log -1 --format='%cd')\\`\r\n> EOF\r\n- Git hash: `09044aa4e599687fb6e4e9becb76315e79c9d983`\r\n  - Commit date: `Wed Nov 10 07:10:23 2021 +0000`\r\n \r\n**Environments from `torch.utils.collect_env`:**\r\n```\r\nPyTorch version: 1.10.0\r\nIs debug build: False\r\nCUDA used to build PyTorch: 11.1\r\nROCM used to build PyTorch: N/A\r\n\r\nOS: Ubuntu 20.04.3 LTS (x86_64)\r\nGCC version: (Ubuntu 9.3.0-17ubuntu1~20.04) 9.3.0\r\nClang version: Could not collect\r\nCMake version: version 3.16.3\r\nLibc version: glibc-2.31\r\n\r\nPython version: 3.8.10 (default, Jun  4 2021, 15:09:15)  [GCC 7.5.0] (64-bit runtime)\r\nPython platform: Linux-5.11.0-1020-aws-x86_64-with-glibc2.17\r\nIs CUDA available: True\r\nCUDA runtime version: 11.1.105\r\nGPU models and configuration: GPU 0: NVIDIA Tesla V100-SXM2-16GB\r\nNvidia driver version: 465.19.01\r\ncuDNN version: Probably one of the following:\r\n/usr/lib/x86_64-linux-gnu/libcudnn.so.8.0.5\r\n/usr/lib/x86_64-linux-gnu/libcudnn_adv_infer.so.8.0.5\r\n/usr/lib/x86_64-linux-gnu/libcudnn_adv_train.so.8.0.5\r\n/usr/lib/x86_64-linux-gnu/libcudnn_cnn_infer.so.8.0.5\r\n/usr/lib/x86_64-linux-gnu/libcudnn_cnn_train.so.8.0.5\r\n/usr/lib/x86_64-linux-gnu/libcudnn_ops_infer.so.8.0.5\r\n/usr/lib/x86_64-linux-gnu/libcudnn_ops_train.so.8.0.5\r\nHIP runtime version: N/A\r\nMIOpen runtime version: N/A\r\n\r\nVersions of relevant libraries:\r\n[pip3] numpy==1.20.3\r\n[pip3] pytorch-ranger==0.1.1\r\n[pip3] pytorch-wpe==0.0.1\r\n[pip3] torch==1.10.0\r\n[pip3] torch-complex==0.2.1\r\n[pip3] torch-optimizer==0.3.0\r\n[pip3] torchaudio==0.10.0\r\n[conda] blas                      1.0                         mkl  \r\n[conda] cudatoolkit               11.1.74              h6bb024c_0    nvidia\r\n[conda] mkl                       2021.4.0           h06a4308_640  \r\n[conda] mkl-service               2.4.0            py38h7f8727e_0  \r\n[conda] mkl_fft                   1.3.1            py38hd3c417c_0  \r\n[conda] mkl_random                1.2.2            py38h51133e4_0  \r\n[conda] numpy                     1.20.3                   pypi_0    pypi\r\n[conda] pytorch                   1.10.0          py3.8_cuda11.1_cudnn8.0.5_0    pytorch\r\n[conda] pytorch-mutex             1.0                        cuda    pytorch\r\n[conda] pytorch-ranger            0.1.1                    pypi_0    pypi\r\n[conda] pytorch-wpe               0.0.1                    pypi_0    pypi\r\n[conda] torch-complex             0.2.1                    pypi_0    pypi\r\n[conda] torch-optimizer           0.3.0                    pypi_0    pypi\r\n[conda] torchaudio                0.10.0               py38_cu111    pytorch\r\n```\r\n\r\n**Task information:**\r\n - Task: ASR\r\n - Recipe: custom\r\n - ESPnet2\r\n", "reactions": {"url": "https://api.github.com/repos/espnet/espnet/issues/3774/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/espnet/espnet/issues/3774/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/espnet/espnet/issues/3760", "repository_url": "https://api.github.com/repos/espnet/espnet", "labels_url": "https://api.github.com/repos/espnet/espnet/issues/3760/labels{/name}", "comments_url": "https://api.github.com/repos/espnet/espnet/issues/3760/comments", "events_url": "https://api.github.com/repos/espnet/espnet/issues/3760/events", "html_url": "https://github.com/espnet/espnet/issues/3760", "id": 1047163513, "node_id": "I_kwDOBsxW2c4-anJ5", "number": 3760, "title": "conformer-ctc small not converge", "user": {"login": "BuaaAlban", "id": 25258181, "node_id": "MDQ6VXNlcjI1MjU4MTgx", "avatar_url": "https://avatars.githubusercontent.com/u/25258181?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuaaAlban", "html_url": "https://github.com/BuaaAlban", "followers_url": "https://api.github.com/users/BuaaAlban/followers", "following_url": "https://api.github.com/users/BuaaAlban/following{/other_user}", "gists_url": "https://api.github.com/users/BuaaAlban/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuaaAlban/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuaaAlban/subscriptions", "organizations_url": "https://api.github.com/users/BuaaAlban/orgs", "repos_url": "https://api.github.com/users/BuaaAlban/repos", "events_url": "https://api.github.com/users/BuaaAlban/events{/privacy}", "received_events_url": "https://api.github.com/users/BuaaAlban/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 777173273, "node_id": "MDU6TGFiZWw3NzcxNzMyNzM=", "url": "https://api.github.com/repos/espnet/espnet/labels/Bug", "name": "Bug", "color": "ee0701", "default": false, "description": "bug should be fixed"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 16, "created_at": "2021-11-08T08:36:51Z", "updated_at": "2022-02-10T03:03:58Z", "closed_at": "2021-11-25T08:14:22Z", "author_association": "NONE", "active_lock_reason": null, "body": "**Describe the bug**\r\nNot a bug, ask for help and training techniques\r\nconformer-ctc small can't  converge on Librispeech 960h\r\n\r\n**Basic environments:**\r\n - OS information: Ubuntu 18.04.1 LTS\r\n - python version: [e.g. 3.8.5 (default, Sep 24 2020, 16:55:52)  [GCC 7.5.0]`]\r\n - espnet version: [e.g. espnet 0.9.6]\r\n - Git hash [e.g. c84da5743b7ef70c0c6212715859bdebdcf873b2]\r\n   - Commit date [e.g. Tue Sep 1 09:32:54 2020 -0400]\r\n - pytorch version [e.g. pytorch 1.7.1]\r\n \r\n\r\n**Environments from `torch.utils.collect_env`:**\r\nCollecting environment information...\r\nPyTorch version: 1.7.1\r\nIs debug build: False\r\nCUDA used to build PyTorch: 10.2\r\n\r\nOS: Ubuntu 18.04.1 LTS\r\nGCC version: (GCC) 7.5.0\r\nCMake version: version 3.10.2\r\n\r\nPython version: 3.8\r\nIs CUDA available: Yes\r\nCUDA runtime version: 10.0.130\r\nGPU models and configuration:\r\nGPU 0: Tesla V100-PCIE\r\nGPU 1: Tesla V100-PCIE\r\nGPU 2: Tesla V100-PCIE\r\nGPU 3: Tesla V100-PCIE\r\n\r\nNvidia driver version: 470.63.01\r\ncuDNN version: /usr/lib/x86_64-linux-gnu/libcudnn.so.7.6.5\r\n\r\nVersions of relevant libraries:\r\nVersions of relevant libraries:\r\n[pip3] numpy==1.20.1\r\n[pip3] pytorch-wpe==0.0.1\r\n[pip3] torch==1.7.1\r\n[pip3] torch-complex==0.2.1\r\n[conda] Could not collect\r\n\r\n**Task information:**\r\n - Task: ASR\r\n - librispeech 960h\r\n - ESPnet2\r\n\r\n**To Reproduce**\r\nActually I want to reproduce this model (https://catalog.ngc.nvidia.com/orgs/nvidia/teams/nemo/models/stt_en_conformer_ctc_small) in espnet, but I can't get it converge.\r\n\r\nI have tried several parameters, these are my config files. \r\nThe  init one is the default conformer yaml in espnet and I change the ctc weight to 1.0 and the dimensions of encoder.\r\nIt can't converge and I tried to change the config it refering to (https://github.com/NVIDIA/NeMo/blob/main/examples/asr/conf/conformer/conformer_ctc_bpe.yaml) \r\n\r\n\r\n[train_asr_conformer_ctc.txt](https://github.com/espnet/espnet/files/7495286/train_asr_conformer_ctc.txt)\r\n[train_asr_conformer_ctc_v1.txt](https://github.com/espnet/espnet/files/7495283/train_asr_conformer_ctc_v1.txt)\r\n[train_asr_conformer_ctc_v2.txt](https://github.com/espnet/espnet/files/7495284/train_asr_conformer_ctc_v2.txt)\r\n\r\nI also find that the loss doesn't going down anymore at about epoch2 (maybe it's due to gradient vanishing?, the same happens for v0 and v2,  v1 diverge due to the large lr)\r\n![loss_ctc](https://user-images.githubusercontent.com/25258181/140704211-79a0b392-d193-4828-8d47-4d9812e0dda4.png)\r\n\r\nThe training logs for v0 and v2 is here (there is warning for no valid stats in the log, does this have any impact on the results?)\r\n[trainv0.log](https://github.com/espnet/espnet/files/7495365/trainv0.log)\r\n[trainv2.log](https://github.com/espnet/espnet/files/7495368/trainv2.log)\r\n\r\nI have run the whole process just for one time , the other exp are conducted from stage 10vim \r\n\r\nDo you have any suggestions \uff1f Thanks a lot if you could help\r\n\r\n\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/espnet/espnet/issues/3760/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/espnet/espnet/issues/3760/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/espnet/espnet/issues/3745", "repository_url": "https://api.github.com/repos/espnet/espnet", "labels_url": "https://api.github.com/repos/espnet/espnet/issues/3745/labels{/name}", "comments_url": "https://api.github.com/repos/espnet/espnet/issues/3745/comments", "events_url": "https://api.github.com/repos/espnet/espnet/issues/3745/events", "html_url": "https://github.com/espnet/espnet/issues/3745", "id": 1044811948, "node_id": "I_kwDOBsxW2c4-RpCs", "number": 3745, "title": "Diarization model is NoneType", "user": {"login": "JoesSattes", "id": 20948773, "node_id": "MDQ6VXNlcjIwOTQ4Nzcz", "avatar_url": "https://avatars.githubusercontent.com/u/20948773?v=4", "gravatar_id": "", "url": "https://api.github.com/users/JoesSattes", "html_url": "https://github.com/JoesSattes", "followers_url": "https://api.github.com/users/JoesSattes/followers", "following_url": "https://api.github.com/users/JoesSattes/following{/other_user}", "gists_url": "https://api.github.com/users/JoesSattes/gists{/gist_id}", "starred_url": "https://api.github.com/users/JoesSattes/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/JoesSattes/subscriptions", "organizations_url": "https://api.github.com/users/JoesSattes/orgs", "repos_url": "https://api.github.com/users/JoesSattes/repos", "events_url": "https://api.github.com/users/JoesSattes/events{/privacy}", "received_events_url": "https://api.github.com/users/JoesSattes/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 777173273, "node_id": "MDU6TGFiZWw3NzcxNzMyNzM=", "url": "https://api.github.com/repos/espnet/espnet/labels/Bug", "name": "Bug", "color": "ee0701", "default": false, "description": "bug should be fixed"}, {"id": 3518143565, "node_id": "LA_kwDOBsxW2c7RspxN", "url": "https://api.github.com/repos/espnet/espnet/labels/Diarization", "name": "Diarization", "color": "fbca04", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2021-11-04T14:17:33Z", "updated_at": "2021-11-06T10:34:05Z", "closed_at": "2021-11-06T10:34:05Z", "author_association": "NONE", "active_lock_reason": null, "body": "First of all, I would like to thank you for your contribution to EDA-EEND model. I try to train diarization model without RNN attractor like a SA-EEND by setting None in the attractor configuration based on mini_librispeech/diar1/conf,  NoneType issue is reported. My assumption is this code section that has a return None in attractor_class and then attractor_class try to get value of None.\r\nhttps://github.com/espnet/espnet/blob/7a1329a6fb713a17f5860ea7aed2315ade8d9860/espnet2/tasks/diar.py#L258-L262", "reactions": {"url": "https://api.github.com/repos/espnet/espnet/issues/3745/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/espnet/espnet/issues/3745/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/espnet/espnet/issues/3718", "repository_url": "https://api.github.com/repos/espnet/espnet", "labels_url": "https://api.github.com/repos/espnet/espnet/issues/3718/labels{/name}", "comments_url": "https://api.github.com/repos/espnet/espnet/issues/3718/comments", "events_url": "https://api.github.com/repos/espnet/espnet/issues/3718/events", "html_url": "https://github.com/espnet/espnet/issues/3718", "id": 1039486085, "node_id": "I_kwDOBsxW2c499UyF", "number": 3718, "title": "AttributeError: module 'torch_optimizer' has no attribute 'RAdam'", "user": {"login": "arunbaby0", "id": 16813485, "node_id": "MDQ6VXNlcjE2ODEzNDg1", "avatar_url": "https://avatars.githubusercontent.com/u/16813485?v=4", "gravatar_id": "", "url": "https://api.github.com/users/arunbaby0", "html_url": "https://github.com/arunbaby0", "followers_url": "https://api.github.com/users/arunbaby0/followers", "following_url": "https://api.github.com/users/arunbaby0/following{/other_user}", "gists_url": "https://api.github.com/users/arunbaby0/gists{/gist_id}", "starred_url": "https://api.github.com/users/arunbaby0/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/arunbaby0/subscriptions", "organizations_url": "https://api.github.com/users/arunbaby0/orgs", "repos_url": "https://api.github.com/users/arunbaby0/repos", "events_url": "https://api.github.com/users/arunbaby0/events{/privacy}", "received_events_url": "https://api.github.com/users/arunbaby0/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 777173273, "node_id": "MDU6TGFiZWw3NzcxNzMyNzM=", "url": "https://api.github.com/repos/espnet/espnet/labels/Bug", "name": "Bug", "color": "ee0701", "default": false, "description": "bug should be fixed"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2021-10-29T11:54:08Z", "updated_at": "2021-10-29T12:02:58Z", "closed_at": "2021-10-29T12:02:58Z", "author_association": "NONE", "active_lock_reason": null, "body": "I have created a docker image for espnet for a custom recipe. Was facing the issue [#3708](https://github.com/espnet/espnet/issues/3708),so downgraded to 0.12.2. \r\nNow facing this new issue. Is this because of the latest release of **torch-optimizer==0.2.0**?\r\nIn that case, how should we standardise all the python dependencies while installing?\r\n\r\n**Basic environments:**\r\n - OS information: Linux 5.11.0-1020-aws #21~20.04.2-Ubuntu SMP Fri Oct 1 13:03:59 UTC 2021 x86_64\r\n - python version: `3.8.10 (default, Jun  4 2021, 15:09:15)  [GCC 7.5.0]`\r\n- espnet version: `espnet 0.10.2a1`\r\n- pytorch version: `pytorch 1.9.0`\r\n \r\n```\r\nPyTorch version: 1.9.0\r\nIs debug build: False\r\nCUDA used to build PyTorch: 11.1\r\nROCM used to build PyTorch: N/A\r\n\r\nOS: Ubuntu 20.04.3 LTS (x86_64)\r\nGCC version: (Ubuntu 9.3.0-17ubuntu1~20.04) 9.3.0\r\nClang version: Could not collect\r\nCMake version: version 3.16.3\r\nLibc version: glibc-2.31\r\n\r\nPython version: 3.8 (64-bit runtime)\r\nPython platform: Linux-5.11.0-1020-aws-x86_64-with-glibc2.17\r\nIs CUDA available: True\r\nCUDA runtime version: 11.1.105\r\nGPU models and configuration: GPU 0: NVIDIA Tesla T4\r\nNvidia driver version: 465.19.01\r\ncuDNN version: Probably one of the following:\r\n/usr/lib/x86_64-linux-gnu/libcudnn.so.8.0.5\r\n/usr/lib/x86_64-linux-gnu/libcudnn_adv_infer.so.8.0.5\r\n/usr/lib/x86_64-linux-gnu/libcudnn_adv_train.so.8.0.5\r\n/usr/lib/x86_64-linux-gnu/libcudnn_cnn_infer.so.8.0.5\r\n/usr/lib/x86_64-linux-gnu/libcudnn_cnn_train.so.8.0.5\r\n/usr/lib/x86_64-linux-gnu/libcudnn_ops_infer.so.8.0.5\r\n/usr/lib/x86_64-linux-gnu/libcudnn_ops_train.so.8.0.5\r\nHIP runtime version: N/A\r\nMIOpen runtime version: N/A\r\n\r\nVersions of relevant libraries:\r\n[pip3] numpy==1.20.3\r\n[pip3] pytorch-ranger==0.1.1\r\n[pip3] pytorch-wpe==0.0.1\r\n[pip3] torch==1.9.0\r\n[pip3] torch-complex==0.2.1\r\n[pip3] torch-optimizer==0.2.0\r\n[pip3] torchaudio==0.9.0\r\n[conda] blas                      1.0                         mkl  \r\n[conda] cudatoolkit               11.1.1               h6406543_8    conda-forge\r\n[conda] mkl                       2021.3.0           h06a4308_520  \r\n[conda] numpy                     1.20.3                   pypi_0    pypi\r\n[conda] pytorch                   1.9.0           py3.8_cuda11.1_cudnn8.0.5_0    pytorch\r\n[conda] pytorch-ranger            0.1.1                    pypi_0    pypi\r\n[conda] pytorch-wpe               0.0.1                    pypi_0    pypi\r\n[conda] torch-complex             0.2.1                    pypi_0    pypi\r\n[conda] torch-optimizer           0.2.0                    pypi_0    pypi\r\n[conda] torchaudio                0.9.0                    pypi_0    pypi\r\n```\r\n\r\n\r\n**Task information:**\r\n - Task: ASR\r\n - Recipe: custom, uses TEMPLATE/asr.sh\r\n - ESPnet2\r\n\r\n**To Reproduce**\r\nThis is using docker for espnet2.\r\n\r\n```\r\nStage 10: ASR collect stats: train_set=dump/raw/train, valid_set=dump/raw/validation\r\n2021-10-29T11:01:13 (asr.sh:954:main) Generate 'exp/asr_stats_raw_hi_bpe5000/run.sh'. You can resume the process from stage 10 using this script\r\n2021-10-29T11:01:13 (asr.sh:960:main) ASR collect-stats started... log: 'exp/asr_stats_raw_hi_bpe5000/logdir/stats.*.log'\r\nrun.pl: 8 / 8 failed, log is in exp/asr_stats_raw_hi_bpe5000/logdir/stats.*.log\r\n# python3 -m espnet2.bin.asr_train --collect_stats true --use_preprocessor true --bpemodel data/hi_token_list/bpe_unigram5000/bpe.model --token_type bpe --token_list data/hi_token_list/bpe_unigram5000/tokens.txt --non_linguistic_symbols none --cleaner none --g2p none --train_data_path_and_name_and_type dump/raw/train/wav.scp,speech,sound --train_data_path_and_name_and_type dump/raw/train/text,text,text --valid_data_path_and_name_and_type dump/raw/validation/wav.scp,speech,sound --valid_data_path_and_name_and_type dump/raw/validation/text,text,text --train_shape_file exp/asr_stats_raw_hi_bpe5000/logdir/train.1.scp --valid_shape_file exp/asr_stats_raw_hi_bpe5000/logdir/valid.1.scp --output_dir exp/asr_stats_raw_hi_bpe5000/logdir/stats.1 --config /opt/espnet2/egs2/zapr/asr1//conf/train_asr_transformer.yaml --frontend_conf fs=8k \r\n# Started at Fri Oct 29 11:01:13 UTC 2021\r\n#\r\nTraceback (most recent call last):\r\n  File \"/miniconda/envs/espnet/lib/python3.8/runpy.py\", line 194, in _run_module_as_main\r\n    return _run_code(code, main_globals, None,\r\n  File \"/miniconda/envs/espnet/lib/python3.8/runpy.py\", line 87, in _run_code\r\n    exec(code, run_globals)\r\n  File \"/opt/espnet2/espnet2/bin/asr_train.py\", line 2, in <module>\r\n    from espnet2.tasks.asr import ASRTask\r\n  File \"/opt/espnet2/espnet2/tasks/asr.py\", line 55, in <module>\r\n    from espnet2.tasks.abs_task import AbsTask\r\n  File \"/opt/espnet2/espnet2/tasks/abs_task.py\", line 107, in <module>\r\n    radam=torch_optimizer.RAdam,\r\nAttributeError: module 'torch_optimizer' has no attribute 'RAdam'\r\n# Accounting: time=4 threads=1\r\n# Ended (code 1) at Fri Oct 29 11:01:17 UTC 2021, elapsed time 4 seconds\r\n```\r\n", "reactions": {"url": "https://api.github.com/repos/espnet/espnet/issues/3718/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/espnet/espnet/issues/3718/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/espnet/espnet/issues/3716", "repository_url": "https://api.github.com/repos/espnet/espnet", "labels_url": "https://api.github.com/repos/espnet/espnet/issues/3716/labels{/name}", "comments_url": "https://api.github.com/repos/espnet/espnet/issues/3716/comments", "events_url": "https://api.github.com/repos/espnet/espnet/issues/3716/events", "html_url": "https://github.com/espnet/espnet/issues/3716", "id": 1039238007, "node_id": "I_kwDOBsxW2c498YN3", "number": 3716, "title": "Fix accent phrase border in pyopenjtalk_g2p_prosody", "user": {"login": "sucveria", "id": 93114370, "node_id": "U_kgDOBYzQAg", "avatar_url": "https://avatars.githubusercontent.com/u/93114370?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sucveria", "html_url": "https://github.com/sucveria", "followers_url": "https://api.github.com/users/sucveria/followers", "following_url": "https://api.github.com/users/sucveria/following{/other_user}", "gists_url": "https://api.github.com/users/sucveria/gists{/gist_id}", "starred_url": "https://api.github.com/users/sucveria/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sucveria/subscriptions", "organizations_url": "https://api.github.com/users/sucveria/orgs", "repos_url": "https://api.github.com/users/sucveria/repos", "events_url": "https://api.github.com/users/sucveria/events{/privacy}", "received_events_url": "https://api.github.com/users/sucveria/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 777173273, "node_id": "MDU6TGFiZWw3NzcxNzMyNzM=", "url": "https://api.github.com/repos/espnet/espnet/labels/Bug", "name": "Bug", "color": "ee0701", "default": false, "description": "bug should be fixed"}, {"id": 1680978630, "node_id": "MDU6TGFiZWwxNjgwOTc4NjMw", "url": "https://api.github.com/repos/espnet/espnet/labels/TTS", "name": "TTS", "color": "fbca04", "default": false, "description": "Text-to-speech"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2021-10-29T07:07:31Z", "updated_at": "2021-12-07T13:53:23Z", "closed_at": "2021-12-07T13:53:23Z", "author_association": "NONE", "active_lock_reason": null, "body": "In pyopenjtalk_g2p_prosody of espnet/espnet2/text/phoneme_tokenizer.py, the condition of the accent phrase boundary on the 163st line is\r\nif a3 == 1 and a2_next == 1:\r\nSince there is no distinction between consonants and vowels, the delimiter'#' will be inserted between the consonants and vowels. \r\nAdd the case where the phoneme corresponds to a vowel,  syllabic nasal/N/ and choked sounds/cl/ to the condition,\r\nif a3 == 1 and a2_next == 1 and p3 in \"aeiouAEIOUNcl\":\r\nShouldn't it be?\r\nDue to this change, the output example of g2p changes from\r\ne.g. \u3053\u3001\u3053\u3093\u306b\u3061\u306f -> [^, k, #, o, _, k, o, [, N, n, i, ch, i, w, a, $]\r\nto\r\ne.g. \u3053\u3001\u3053\u3093\u306b\u3061\u306f -> [^, k, o, _, k, o, [, N, n, i, ch, i, w, a, $]", "reactions": {"url": "https://api.github.com/repos/espnet/espnet/issues/3716/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/espnet/espnet/issues/3716/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/espnet/espnet/issues/3690", "repository_url": "https://api.github.com/repos/espnet/espnet", "labels_url": "https://api.github.com/repos/espnet/espnet/issues/3690/labels{/name}", "comments_url": "https://api.github.com/repos/espnet/espnet/issues/3690/comments", "events_url": "https://api.github.com/repos/espnet/espnet/issues/3690/events", "html_url": "https://github.com/espnet/espnet/issues/3690", "id": 1034644766, "node_id": "I_kwDOBsxW2c49q20e", "number": 3690, "title": "Espnet2 ASR with fs=8k error", "user": {"login": "caohongnga", "id": 50764011, "node_id": "MDQ6VXNlcjUwNzY0MDEx", "avatar_url": "https://avatars.githubusercontent.com/u/50764011?v=4", "gravatar_id": "", "url": "https://api.github.com/users/caohongnga", "html_url": "https://github.com/caohongnga", "followers_url": "https://api.github.com/users/caohongnga/followers", "following_url": "https://api.github.com/users/caohongnga/following{/other_user}", "gists_url": "https://api.github.com/users/caohongnga/gists{/gist_id}", "starred_url": "https://api.github.com/users/caohongnga/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/caohongnga/subscriptions", "organizations_url": "https://api.github.com/users/caohongnga/orgs", "repos_url": "https://api.github.com/users/caohongnga/repos", "events_url": "https://api.github.com/users/caohongnga/events{/privacy}", "received_events_url": "https://api.github.com/users/caohongnga/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 777173273, "node_id": "MDU6TGFiZWw3NzcxNzMyNzM=", "url": "https://api.github.com/repos/espnet/espnet/labels/Bug", "name": "Bug", "color": "ee0701", "default": false, "description": "bug should be fixed"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2021-10-25T03:51:37Z", "updated_at": "2021-10-25T12:52:32Z", "closed_at": "2021-10-25T12:52:32Z", "author_association": "NONE", "active_lock_reason": null, "body": "I train ASR with fs=8k at stage 3 has an error with the command: soundfile.write(str(wav), signal, rate) of espnet2/fileio/sound_scp.py\r\n\r\nThe soundfile.py, line 1299, in _check_dtype sorted(_ffi_types.keys()), dtype))\r\nValueError: dtype must be one of ['float32', 'float64', 'int16', 'int32'] and not 'uint8'\r\n\r\nif I set fs=16k or I format data to int16 (soundfile.write(str(wav), np.int16(signal), rate)) I can run the model without error but the segments after split are changed because the sample_rate of my data is 8k.\r\n\r\nHow to fix this please\r\nThank you,\r\n", "reactions": {"url": "https://api.github.com/repos/espnet/espnet/issues/3690/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/espnet/espnet/issues/3690/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/espnet/espnet/issues/3647", "repository_url": "https://api.github.com/repos/espnet/espnet", "labels_url": "https://api.github.com/repos/espnet/espnet/issues/3647/labels{/name}", "comments_url": "https://api.github.com/repos/espnet/espnet/issues/3647/comments", "events_url": "https://api.github.com/repos/espnet/espnet/issues/3647/events", "html_url": "https://github.com/espnet/espnet/issues/3647", "id": 1022016002, "node_id": "I_kwDOBsxW2c486roC", "number": 3647, "title": "nnet training failing on chime6", "user": {"login": "aarora8", "id": 29442373, "node_id": "MDQ6VXNlcjI5NDQyMzcz", "avatar_url": "https://avatars.githubusercontent.com/u/29442373?v=4", "gravatar_id": "", "url": "https://api.github.com/users/aarora8", "html_url": "https://github.com/aarora8", "followers_url": "https://api.github.com/users/aarora8/followers", "following_url": "https://api.github.com/users/aarora8/following{/other_user}", "gists_url": "https://api.github.com/users/aarora8/gists{/gist_id}", "starred_url": "https://api.github.com/users/aarora8/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/aarora8/subscriptions", "organizations_url": "https://api.github.com/users/aarora8/orgs", "repos_url": "https://api.github.com/users/aarora8/repos", "events_url": "https://api.github.com/users/aarora8/events{/privacy}", "received_events_url": "https://api.github.com/users/aarora8/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 777173273, "node_id": "MDU6TGFiZWw3NzcxNzMyNzM=", "url": "https://api.github.com/repos/espnet/espnet/labels/Bug", "name": "Bug", "color": "ee0701", "default": false, "description": "bug should be fixed"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2021-10-10T15:34:55Z", "updated_at": "2021-10-11T01:59:17Z", "closed_at": "2021-10-10T19:35:16Z", "author_association": "NONE", "active_lock_reason": null, "body": "**Describe the bug**\r\nI am running CHiME-6 egg 1 script. At stage 6 in run.sh (https://github.com/espnet/espnet/blob/master/egs/chime6/asr1/run.sh). I am getting the following error \"unrecognized arguments: --atype=location --adim=256 --aheads=1 --awin=5 --aconv-chans=10 --aconv-filts=100 --rnnt-mode=rnnt\". I did not made any modification in the scripts.  If you can please help me with it, it would be very helpful.\r\n\r\n**Basic environments:**\r\n - OS information: \"CentOS Linux release 7.5.1804 (Core)\" (Linux 3.10.0-862.11.6.el7.x86_64 #1 SMP Tue Aug 14 21:49:04 UTC 2018 x86_64)\r\n - python version: [3.8.11 (default, Aug  3 2021, 15:09:35)  [GCC 7.5.0]]\r\n - espnet version: [0.10.3a4]\r\n - pytorch version [torch=1.8.1]\r\n - git hash 66facd2859977d23349cf74d5c8f5394e5cb6784\r\n - Commit date: `Sun Oct 3 12:14:15 2021 +0900`\r\n \r\nVersions of relevant libraries:\r\n[pip3] numpy==1.20.3\r\n[pip3] pytorch-ranger==0.1.1\r\n[pip3] pytorch-wpe==0.0.1\r\n[pip3] torch==1.8.1\r\n[pip3] torch-complex==0.2.1\r\n[pip3] torch-optimizer==0.1.0\r\n[pip3] torch-tb-profiler==0.2.1\r\n[pip3] torchaudio==0.8.1\r\n[conda] blas                      1.0                         mkl\r\n[conda] cudatoolkit               10.2.89              hfd86e86_1\r\n[conda] mkl                       2021.3.0           h06a4308_520\r\n[conda] mkl-service               2.4.0            py38h7f8727e_0\r\n[conda] mkl_fft                   1.3.0            py38h42c9631_2\r\n[conda] mkl_random                1.2.2            py38h51133e4_0\r\n[conda] numpy                     1.20.3           py38hf144106_0\r\n[conda] numpy-base                1.20.3           py38h74d4b33_0\r\n[conda] pytorch                   1.8.1           py3.8_cuda10.2_cudnn7.6.5_0    pytorch\r\n[conda] pytorch-ranger            0.1.1                    pypi_0    pypi\r\n[conda] pytorch-wpe               0.0.1                    pypi_0    pypi\r\n[conda] torch-complex             0.2.1                    pypi_0    pypi\r\n[conda] torch-optimizer           0.1.0                    pypi_0    pypi\r\n[conda] torchaudio                0.8.1                    pypi_0    pypi\r\n\r\nI have following modules installed.\r\n \r\nPython modules:\r\n[x] torch=1.8.1\r\n[ ] torch cuda\r\n[x] torch cudnn=7605\r\n[x] torch nccl\r\n[x] chainer=6.0.0\r\n[ ] chainer cuda\r\n[ ] chainer cudnn\r\n[ ] cupy\r\n[x] torchaudio=0.8.1\r\n[x] torch_optimizer=0.1.0\r\n[ ] warpctc_pytorch\r\n[ ] warprnnt_pytorch\r\n[ ] chainer_ctc\r\n[ ] pyopenjtalk\r\n[ ] tdmelodic_pyopenjtalk\r\n[ ] kenlm\r\n[ ] mmseg\r\n[x] espnet=0.10.3a4\r\n[ ] fairseq\r\n[ ] phonemizer\r\n[ ] gtn\r\n[ ] s3prl\r\n[x] transformers=4.11.3\r\n\r\n**Task information:**\r\n - Task: [ASR]\r\n - Recipe: [ chime6]\r\n - ESPnet1\r\n\r\n**To Reproduce**\r\nSteps to reproduce the behavior:\r\n1. move to a recipe directory, e.g., `cd egs/chime6/asr1/`\r\n2. execute `run.sh` with specific arguments, e.g., `run.sh --stage 6 --ngp 1`\r\n3. specify the error log, e.g., `exp/train_worn_simu_u400k_cleaned_trim_sp_pytorch_train/train.log`\r\n\r\n```\r\nYou can obtain them by the following command\r\n\r\n```\r\ncd <espnet-root>/tools\r\n. ./activate_python.sh\r\npython3 -m torch.utils.collect_env\r\n```\r\n\r\n**Error logs**\r\n# asr_train.py --config conf/train.yaml --ngpu 3 --backend pytorch --outdir exp/train_worn_simu_u400k_cleaned_trim_sp_pytorch_train/results --tensorboard-dir tensorboard/train_worn_simu_u400k_cleaned_trim_sp_pytorch_train --debugmode 1 --dict data/lang_1char/train_worn_simu_u400k_cleaned_trim_sp_units.txt --debugdir exp/train_worn_simu_u400k_cleaned_trim_sp_pytorch_train --minibatches 0 --verbose 0 --resume --train-json dump/train_worn_simu_u400k_cleaned_trim_sp/deltafalse/data.json --valid-json dump/dev_gss_u1k/deltafalse/data.json --preprocess-conf conf/specaug.yaml\r\n# Started at Sun Oct 10 11:14:52 EDT 2021\r\n#\r\nusage: asr_train.py [-h] [--config CONFIG] [--config2 CONFIG2]\r\n                    [--config3 CONFIG3] [--ngpu NGPU]\r\n                    [--train-dtype {float16,float32,float64,O0,O1,O2,O3}]\r\n                    [--backend {chainer,pytorch}] --outdir OUTDIR\r\n                    [--debugmode DEBUGMODE] --dict DICT [--seed SEED]\r\n                    [--debugdir DEBUGDIR] [--resume [RESUME]]\r\n                    [--minibatches MINIBATCHES] [--verbose VERBOSE]\r\n                    [--tensorboard-dir [TENSORBOARD_DIR]]\r\n                    [--report-interval-iters REPORT_INTERVAL_ITERS]\r\n                    [--save-interval-iters SAVE_INTERVAL_ITERS]\r\n                    [--train-json TRAIN_JSON] [--valid-json VALID_JSON]\r\n                    [--model-module MODEL_MODULE] [--num-encs NUM_ENCS]\r\n                    [--ctc_type {builtin,warpctc,gtnctc,cudnnctc}]\r\n                    [--mtlalpha MTLALPHA] [--lsm-weight LSM_WEIGHT]\r\n                    [--report-cer] [--report-wer] [--nbest NBEST]\r\n                    [--beam-size BEAM_SIZE] [--penalty PENALTY]\r\n                    [--maxlenratio MAXLENRATIO] [--minlenratio MINLENRATIO]\r\n                    [--ctc-weight CTC_WEIGHT] [--rnnlm RNNLM]\r\n                    [--rnnlm-conf RNNLM_CONF] [--lm-weight LM_WEIGHT]\r\n                    [--sym-space SYM_SPACE] [--sym-blank SYM_BLANK]\r\n                    [--sortagrad [SORTAGRAD]]\r\n                    [--batch-count {auto,seq,bin,frame}]\r\n                    [--batch-size BATCH_SIZE] [--batch-bins BATCH_BINS]\r\n                    [--batch-frames-in BATCH_FRAMES_IN]\r\n                    [--batch-frames-out BATCH_FRAMES_OUT]\r\n                    [--batch-frames-inout BATCH_FRAMES_INOUT] [--maxlen-in ML]\r\n                    [--maxlen-out ML] [--n-iter-processes N_ITER_PROCESSES]\r\n                    [--preprocess-conf [PREPROCESS_CONF]]\r\n                    [--opt {adadelta,adam,noam}] [--accum-grad ACCUM_GRAD]\r\n                    [--eps EPS] [--eps-decay EPS_DECAY]\r\n                    [--weight-decay WEIGHT_DECAY]\r\n                    [--criterion {loss,loss_eps_decay_only,acc}]\r\n                    [--threshold THRESHOLD] [--epochs EPOCHS]\r\n                    [--early-stop-criterion [EARLY_STOP_CRITERION]]\r\n                    [--patience [PATIENCE]] [--grad-clip GRAD_CLIP]\r\n                    [--num-save-attention NUM_SAVE_ATTENTION]\r\n                    [--num-save-ctc NUM_SAVE_CTC] [--grad-noise GRAD_NOISE]\r\n                    [--num-spkrs {1,2}]\r\n                    [--context-residual [CONTEXT_RESIDUAL]]\r\n                    [--enc-init ENC_INIT] [--enc-init-mods ENC_INIT_MODS]\r\n                    [--dec-init DEC_INIT] [--dec-init-mods DEC_INIT_MODS]\r\n                    [--freeze-mods FREEZE_MODS] [--use-frontend USE_FRONTEND]\r\n                    [--use-wpe USE_WPE]\r\n                    [--wtype {lstm,blstm,lstmp,blstmp,vgglstmp,vggblstmp,vgglstm,vggblstm,gru,bgru,grup,bgrup,vgggrup,vggbgrup,vgggru,vggbgru}]\r\n                    [--wlayers WLAYERS] [--wunits WUNITS] [--wprojs WPROJS]\r\n                    [--wdropout-rate WDROPOUT_RATE] [--wpe-taps WPE_TAPS]\r\n                    [--wpe-delay WPE_DELAY]\r\n                    [--use-dnn-mask-for-wpe USE_DNN_MASK_FOR_WPE]\r\n                    [--use-beamformer USE_BEAMFORMER]\r\n                    [--btype {lstm,blstm,lstmp,blstmp,vgglstmp,vggblstmp,vgglstm,vggblstm,gru,bgru,grup,bgrup,vgggrup,vggbgrup,vgggru,vggbgru}]\r\n                    [--blayers BLAYERS] [--bunits BUNITS] [--bprojs BPROJS]\r\n                    [--badim BADIM] [--bnmask BNMASK]\r\n                    [--ref-channel REF_CHANNEL]\r\n                    [--bdropout-rate BDROPOUT_RATE] [--stats-file STATS_FILE]\r\n                    [--apply-uttmvn APPLY_UTTMVN]\r\n                    [--uttmvn-norm-means UTTMVN_NORM_MEANS]\r\n                    [--uttmvn-norm-vars UTTMVN_NORM_VARS]\r\n                    [--fbank-fs FBANK_FS] [--n-mels N_MELS]\r\n                    [--fbank-fmin FBANK_FMIN] [--fbank-fmax FBANK_FMAX]\r\n                    [--etype {custom,lstm,blstm,lstmp,blstmp,vgglstmp,vggblstmp,vgglstm,vggblstm,gru,bgru,grup,bgrup,vgggrup,vggbgrup,vgggru,vggbgru}]\r\n                    [--dropout-rate DROPOUT_RATE] [--elayers ELAYERS]\r\n                    [--eunits EUNITS] [--eprojs EPROJS]\r\n                    [--subsample SUBSAMPLE] [--enc-block-arch ENC_BLOCK_ARCH]\r\n                    [--enc-block-repeat ENC_BLOCK_REPEAT]\r\n                    [--custom-enc-input-layer {conv2d,vgg2l,linear,embed}]\r\n                    [--custom-enc-positional-encoding-type {abs_pos,scaled_abs_pos,rel_pos}]\r\n                    [--custom-enc-self-attn-type {self_attn,rel_self_attn}]\r\n                    [--custom-enc-pw-activation-type {relu,hardtanh,selu,swish}]\r\n                    [--custom-enc-conv-mod-activation-type {relu,hardtanh,selu,swish}]\r\n                    [--dtype {lstm,gru,custom}]\r\n                    [--dropout-rate-decoder DROPOUT_RATE_DECODER]\r\n                    [--dropout-rate-embed-decoder DROPOUT_RATE_EMBED_DECODER]\r\n                    [--dec-embed-dim DEC_EMBED_DIM] [--dlayers DLAYERS]\r\n                    [--dunits DUNITS] [--dec-block-arch DEC_BLOCK_ARCH]\r\n                    [--dec-block-repeat DEC_BLOCK_REPEAT]\r\n                    [--custom-dec-input-layer {linear,embed}]\r\n                    [--custom-dec-pw-activation-type {relu,hardtanh,selu,swish}]\r\n                    [--optimizer-warmup-steps OPTIMIZER_WARMUP_STEPS]\r\n                    [--noam-lr NOAM_LR] [--noam-adim NOAM_ADIM]\r\n                    [--transformer-warmup-steps OPTIMIZER_WARMUP_STEPS]\r\n                    [--transformer-lr NOAM_LR] [--adim NOAM_ADIM]\r\n                    [--transducer-weight TRANSDUCER_WEIGHT]\r\n                    [--joint-dim JOINT_DIM]\r\n                    [--joint-activation-type {relu,tanh,swish}]\r\n                    [--score-norm [SCORE_NORM]]\r\n                    [--fastemit-lambda FASTEMIT_LAMBDA]\r\n                    [--use-ctc-loss [USE_CTC_LOSS]]\r\n                    [--ctc-loss-weight CTC_LOSS_WEIGHT]\r\n                    [--ctc-loss-dropout-rate CTC_LOSS_DROPOUT_RATE]\r\n                    [--use-lm-loss [USE_LM_LOSS]]\r\n                    [--lm-loss-weight LM_LOSS_WEIGHT]\r\n                    [--lm-loss-smoothing-rate LM_LOSS_SMOOTHING_RATE]\r\n                    [--use-aux-transducer-loss [USE_AUX_TRANSDUCER_LOSS]]\r\n                    [--aux-transducer-loss-weight AUX_TRANSDUCER_LOSS_WEIGHT]\r\n                    [--aux-transducer-loss-enc-output-layers AUX_TRANSDUCER_LOSS_ENC_OUTPUT_LAYERS]\r\n                    [--aux-transducer-loss-mlp-dim AUX_TRANSDUCER_LOSS_MLP_DIM]\r\n                    [--aux-transducer-loss-mlp-dropout-rate AUX_TRANSDUCER_LOSS_MLP_DROPOUT_RATE]\r\n                    [--use-symm-kl-div-loss [USE_SYMM_KL_DIV_LOSS]]\r\n                    [--symm-kl-div-loss-weight SYMM_KL_DIV_LOSS_WEIGHT]\r\nasr_train.py: error: unrecognized arguments: --atype=location --aheads=1 --awin=5 --aconv-chans=10 --aconv-filts=100 --rnnt-mode=rnnt\r\n# Accounting: time=5 threads=1\r\n# Ended (code 2) at Sun Oct 10 11:14:57 EDT 2021, elapsed time 5 seconds\r\n", "reactions": {"url": "https://api.github.com/repos/espnet/espnet/issues/3647/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/espnet/espnet/issues/3647/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/espnet/espnet/issues/3645", "repository_url": "https://api.github.com/repos/espnet/espnet", "labels_url": "https://api.github.com/repos/espnet/espnet/issues/3645/labels{/name}", "comments_url": "https://api.github.com/repos/espnet/espnet/issues/3645/comments", "events_url": "https://api.github.com/repos/espnet/espnet/issues/3645/events", "html_url": "https://github.com/espnet/espnet/issues/3645", "id": 1020884935, "node_id": "I_kwDOBsxW2c482XfH", "number": 3645, "title": "StopIteration exception was raised when running vcc20", "user": {"login": "zzxiang", "id": 10098144, "node_id": "MDQ6VXNlcjEwMDk4MTQ0", "avatar_url": "https://avatars.githubusercontent.com/u/10098144?v=4", "gravatar_id": "", "url": "https://api.github.com/users/zzxiang", "html_url": "https://github.com/zzxiang", "followers_url": "https://api.github.com/users/zzxiang/followers", "following_url": "https://api.github.com/users/zzxiang/following{/other_user}", "gists_url": "https://api.github.com/users/zzxiang/gists{/gist_id}", "starred_url": "https://api.github.com/users/zzxiang/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/zzxiang/subscriptions", "organizations_url": "https://api.github.com/users/zzxiang/orgs", "repos_url": "https://api.github.com/users/zzxiang/repos", "events_url": "https://api.github.com/users/zzxiang/events{/privacy}", "received_events_url": "https://api.github.com/users/zzxiang/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 777173273, "node_id": "MDU6TGFiZWw3NzcxNzMyNzM=", "url": "https://api.github.com/repos/espnet/espnet/labels/Bug", "name": "Bug", "color": "ee0701", "default": false, "description": "bug should be fixed"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2021-10-08T09:23:32Z", "updated_at": "2021-10-08T09:44:28Z", "closed_at": "2021-10-08T09:44:28Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "**Describe the bug**\r\nWhen running stage 4 of [egs/vcc20/tts1_en_zh/run.sh](https://github.com/espnet/espnet/blob/66facd2859977d23349cf74d5c8f5394e5cb6784/egs/vcc20/tts1_en_zh/run.sh), StopIteration exception was raised and the training process failed.\r\n\r\n**Basic environments:**\r\n - OS information: Linux 5.11.0-1020-gcp 20.04.1-Ubuntu SMP x86_64\r\n - python version: 3.8.10\r\n - cudatoolkit version: 11.1.1\r\n - espnet version: 0.10.0\r\n - Git hash 06335e6a427e174d1db5e68c97fba944451426f5\r\n   - Commit date Mon Jul 12 23:40:03 2021 -0400\r\n - pytorch version: 1.9.0\r\n \r\nI also tried\r\n- python version: 3.8.11\r\n- cudatoolkit version: 10.1.243\r\n- pytorch version: 1.4.0\r\n\r\nbut the same problem occurred.\r\n\r\nYou can obtain them by the following command\r\n```\r\ncd <espnet-root>/egs/vcc20/tts1_en_zh\r\n./run.sh --stop-stage 3\r\n./run.sh --stage 4 --stop-stage 4\r\n```\r\n\r\n**Environments from `torch.utils.collect_env` (pytorch 1.9.0):**\r\n```\r\nCollecting environment information...\r\nPyTorch version: 1.9.0\r\nIs debug build: False\r\nCUDA used to build PyTorch: 11.1\r\nROCM used to build PyTorch: N/A\r\n\r\nOS: Ubuntu 20.04.3 LTS (x86_64)\r\nGCC version: (Ubuntu 8.4.0-3ubuntu2) 8.4.0\r\nClang version: Could not collect\r\nCMake version: version 3.19.6\r\nLibc version: glibc-2.31\r\n\r\nPython version: 3.8 (64-bit runtime)\r\nPython platform: Linux-5.11.0-1020-gcp-x86_64-with-glibc2.17\r\nIs CUDA available: True\r\nCUDA runtime version: 11.1.74\r\nGPU models and configuration: \r\nGPU 0: Tesla T4\r\nGPU 1: Tesla T4\r\n\r\nNvidia driver version: 460.91.03\r\ncuDNN version: Could not collect\r\nHIP runtime version: N/A\r\nMIOpen runtime version: N/A\r\n\r\nVersions of relevant libraries:\r\n[pip3] numpy==1.21.0\r\n[pip3] pytorch-ranger==0.1.1\r\n[pip3] pytorch-wpe==0.0.1\r\n[pip3] torch==1.9.0\r\n[pip3] torch-complex==0.2.1\r\n[pip3] torch-optimizer==0.1.0\r\n[pip3] torchaudio==0.9.0\r\n[conda] blas                      1.0                         mkl  \r\n[conda] cudatoolkit               11.1.1               h6406543_8    conda-forge\r\n[conda] mkl                       2021.2.0           h06a4308_296  \r\n[conda] numpy                     1.21.0                   pypi_0    pypi\r\n[conda] pytorch                   1.9.0           py3.8_cuda11.1_cudnn8.0.5_0    pytorch\r\n[conda] pytorch-ranger            0.1.1                    pypi_0    pypi\r\n[conda] pytorch-wpe               0.0.1                    pypi_0    pypi\r\n[conda] torch-complex             0.2.1                    pypi_0    pypi\r\n[conda] torch-optimizer           0.1.0                    pypi_0    pypi\r\n[conda] torchaudio                0.9.0                    pypi_0    pypi\r\n```\r\n\r\n**Environments from `torch.utils.collect_env` (pytorch 1.4.0):**\r\n```\r\nCollecting environment information...\r\nPyTorch version: 1.4.0\r\nIs debug build: No\r\nCUDA used to build PyTorch: 10.1\r\n\r\nOS: Ubuntu 20.04.3 LTS\r\nGCC version: (Ubuntu 8.4.0-3ubuntu2) 8.4.0\r\nCMake version: Could not collect\r\n\r\nPython version: 3.8\r\nIs CUDA available: Yes\r\nCUDA runtime version: Could not collect\r\nGPU models and configuration: \r\nGPU 0: Tesla T4\r\nGPU 1: Tesla T4\r\n\r\nNvidia driver version: 460.91.03\r\ncuDNN version: Could not collect\r\n\r\nVersions of relevant libraries:\r\n[pip3] numpy==1.20.3\r\n[pip3] torch==1.4.0\r\n[pip3] torchvision==0.5.0\r\n[conda] blas                      1.0                         mkl  \r\n[conda] mkl                       2021.3.0           h06a4308_520  \r\n[conda] mkl-service               2.4.0            py38h7f8727e_0  \r\n[conda] mkl_fft                   1.3.0            py38h42c9631_2  \r\n[conda] mkl_random                1.2.2            py38h51133e4_0  \r\n[conda] pytorch                   1.4.0           py3.8_cuda10.1.243_cudnn7.6.3_0    pytorch\r\n[conda] torchvision               0.5.0                py38_cu101    pytorch\r\n```\r\n\r\nYou can obtain them by the following command\r\n\r\n```\r\ncd <espnet-root>/tools\r\n. ./activate_python.sh\r\npython3 -m torch.utils.collect_env\r\n```\r\n\r\n**Task information:**\r\n - Task: VC\r\n - Recipe: vcc20/tts1_en_zh\r\n - ESPnet1\r\n\r\n**To Reproduce**\r\nSteps to reproduce the behavior:\r\n1. move to a recipe directory: `cd  vcc20/tts1_en_zh`\r\n2. execute `run.sh` to stage 4 (inclusive)\r\n3. check the error log: `exp/train_pytorch_train_pytorch_transformer+spkemb/train.log`\r\n\r\n**Error logs**\r\n```\r\nException in main training loop: Caught StopIteration in replica 0 on device 0.\r\nOriginal Traceback (most recent call last):\r\n  File \"/home/sshu/anaconda3/envs/espnet/lib/python3.8/site-packages/torch/nn/parallel/parallel_apply.py\", line 61, in _worker\r\n    output = module(*input, **kwargs)\r\n  File \"/home/sshu/anaconda3/envs/espnet/lib/python3.8/site-packages/torch/nn/modules/module.py\", line 1051, in _call_impl\r\n    return forward_call(*input, **kwargs)\r\n  File \"/home/sshu/espnet/espnet/nets/pytorch_backend/e2e_tts_transformer.py\", line 717, in forward\r\n    x_masks = self._source_mask(ilens)\r\n  File \"/home/sshu/espnet/espnet/nets/pytorch_backend/e2e_tts_transformer.py\", line 1095, in _source_mask\r\n    x_masks = make_non_pad_mask(ilens).to(next(self.parameters()).device)\r\nStopIteration\r\n\r\nTraceback (most recent call last):\r\n  File \"/home/sshu/anaconda3/envs/espnet/lib/python3.8/site-packages/chainer/training/trainer.py\", line 316, in run\r\n    update()\r\n  File \"/home/sshu/espnet/espnet/tts/pytorch_backend/tts.py\", line 171, in update\r\n    self.update_core()\r\n  File \"/home/sshu/espnet/espnet/tts/pytorch_backend/tts.py\", line 151, in update_core\r\n    loss = self.model(**x).mean() / self.accum_grad\r\n  File \"/home/sshu/anaconda3/envs/espnet/lib/python3.8/site-packages/torch/nn/modules/module.py\", line 1051, in _call_impl\r\n    return forward_call(*input, **kwargs)\r\n  File \"/home/sshu/anaconda3/envs/espnet/lib/python3.8/site-packages/torch/nn/parallel/data_parallel.py\", line 168, in forward\r\n    outputs = self.parallel_apply(replicas, inputs, kwargs)\r\n  File \"/home/sshu/anaconda3/envs/espnet/lib/python3.8/site-packages/torch/nn/parallel/data_parallel.py\", line 178, in parallel_apply\r\n    return parallel_apply(replicas, inputs, kwargs, self.device_ids[:len(replicas)])\r\n  File \"/home/sshu/anaconda3/envs/espnet/lib/python3.8/site-packages/torch/nn/parallel/parallel_apply.py\", line 86, in parallel_apply\r\n    output.reraise()\r\n  File \"/home/sshu/anaconda3/envs/espnet/lib/python3.8/site-packages/torch/_utils.py\", line 425, in reraise\r\n    raise self.exc_type(msg)\r\nWill finalize trainer extensions and updater before reraising the exception.\r\nTraceback (most recent call last):\r\n  File \"/home/sshu/espnet/egs/vcc20/tts1_en_zh/../../../espnet/bin/tts_train.py\", line 359, in <module>\r\n    main(sys.argv[1:])\r\n  File \"/home/sshu/espnet/egs/vcc20/tts1_en_zh/../../../espnet/bin/tts_train.py\", line 353, in main\r\n    train(args)\r\n  File \"/home/sshu/espnet/espnet/tts/pytorch_backend/tts.py\", line 565, in train\r\n    trainer.run()\r\n  File \"/home/sshu/anaconda3/envs/espnet/lib/python3.8/site-packages/chainer/training/trainer.py\", line 349, in run\r\n    six.reraise(*exc_info)\r\n  File \"/home/sshu/anaconda3/envs/espnet/lib/python3.8/site-packages/six.py\", line 719, in reraise\r\n    raise value\r\n  File \"/home/sshu/anaconda3/envs/espnet/lib/python3.8/site-packages/chainer/training/trainer.py\", line 316, in run\r\n    update()\r\n  File \"/home/sshu/espnet/espnet/tts/pytorch_backend/tts.py\", line 171, in update\r\n    self.update_core()\r\n  File \"/home/sshu/espnet/espnet/tts/pytorch_backend/tts.py\", line 151, in update_core\r\n    loss = self.model(**x).mean() / self.accum_grad\r\n  File \"/home/sshu/anaconda3/envs/espnet/lib/python3.8/site-packages/torch/nn/modules/module.py\", line 1051, in _call_impl\r\n    return forward_call(*input, **kwargs)\r\n  File \"/home/sshu/anaconda3/envs/espnet/lib/python3.8/site-packages/torch/nn/parallel/data_parallel.py\", line 168, in forward\r\n    outputs = self.parallel_apply(replicas, inputs, kwargs)\r\n  File \"/home/sshu/anaconda3/envs/espnet/lib/python3.8/site-packages/torch/nn/parallel/data_parallel.py\", line 178, in parallel_apply\r\n    return parallel_apply(replicas, inputs, kwargs, self.device_ids[:len(replicas)])\r\n  File \"/home/sshu/anaconda3/envs/espnet/lib/python3.8/site-packages/torch/nn/parallel/parallel_apply.py\", line 86, in parallel_apply\r\n    output.reraise()\r\n  File \"/home/sshu/anaconda3/envs/espnet/lib/python3.8/site-packages/torch/_utils.py\", line 425, in reraise\r\n    raise self.exc_type(msg)\r\nStopIteration: Caught StopIteration in replica 0 on device 0.\r\nOriginal Traceback (most recent call last):\r\n  File \"/home/sshu/anaconda3/envs/espnet/lib/python3.8/site-packages/torch/nn/parallel/parallel_apply.py\", line 61, in _worker\r\n    output = module(*input, **kwargs)\r\n  File \"/home/sshu/anaconda3/envs/espnet/lib/python3.8/site-packages/torch/nn/modules/module.py\", line 1051, in _call_impl\r\n    return forward_call(*input, **kwargs)\r\n  File \"/home/sshu/espnet/espnet/nets/pytorch_backend/e2e_tts_transformer.py\", line 717, in forward\r\n    x_masks = self._source_mask(ilens)\r\n  File \"/home/sshu/espnet/espnet/nets/pytorch_backend/e2e_tts_transformer.py\", line 1095, in _source_mask\r\n    x_masks = make_non_pad_mask(ilens).to(next(self.parameters()).device)\r\nStopIteration\r\n```\r\n", "reactions": {"url": "https://api.github.com/repos/espnet/espnet/issues/3645/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/espnet/espnet/issues/3645/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/espnet/espnet/issues/3643", "repository_url": "https://api.github.com/repos/espnet/espnet", "labels_url": "https://api.github.com/repos/espnet/espnet/issues/3643/labels{/name}", "comments_url": "https://api.github.com/repos/espnet/espnet/issues/3643/comments", "events_url": "https://api.github.com/repos/espnet/espnet/issues/3643/events", "html_url": "https://github.com/espnet/espnet/issues/3643", "id": 1018310404, "node_id": "I_kwDOBsxW2c48si8E", "number": 3643, "title": "Question: Is there any referral paper for \"keep_n_model\" method that is used in config file? I am unable to find a paper. Or should I cite ESPNet for it?", "user": {"login": "ronitd", "id": 4819409, "node_id": "MDQ6VXNlcjQ4MTk0MDk=", "avatar_url": "https://avatars.githubusercontent.com/u/4819409?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ronitd", "html_url": "https://github.com/ronitd", "followers_url": "https://api.github.com/users/ronitd/followers", "following_url": "https://api.github.com/users/ronitd/following{/other_user}", "gists_url": "https://api.github.com/users/ronitd/gists{/gist_id}", "starred_url": "https://api.github.com/users/ronitd/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ronitd/subscriptions", "organizations_url": "https://api.github.com/users/ronitd/orgs", "repos_url": "https://api.github.com/users/ronitd/repos", "events_url": "https://api.github.com/users/ronitd/events{/privacy}", "received_events_url": "https://api.github.com/users/ronitd/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 777173273, "node_id": "MDU6TGFiZWw3NzcxNzMyNzM=", "url": "https://api.github.com/repos/espnet/espnet/labels/Bug", "name": "Bug", "color": "ee0701", "default": false, "description": "bug should be fixed"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2021-10-06T13:18:31Z", "updated_at": "2021-10-06T20:31:12Z", "closed_at": "2021-10-06T20:31:12Z", "author_association": "NONE", "active_lock_reason": null, "body": null, "reactions": {"url": "https://api.github.com/repos/espnet/espnet/issues/3643/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/espnet/espnet/issues/3643/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/espnet/espnet/issues/3641", "repository_url": "https://api.github.com/repos/espnet/espnet", "labels_url": "https://api.github.com/repos/espnet/espnet/issues/3641/labels{/name}", "comments_url": "https://api.github.com/repos/espnet/espnet/issues/3641/comments", "events_url": "https://api.github.com/repos/espnet/espnet/issues/3641/events", "html_url": "https://github.com/espnet/espnet/issues/3641", "id": 1015877180, "node_id": "I_kwDOBsxW2c48jQ48", "number": 3641, "title": "/usr/bin/env: 'bash -e': No such file or directory", "user": {"login": "zzxiang", "id": 10098144, "node_id": "MDQ6VXNlcjEwMDk4MTQ0", "avatar_url": "https://avatars.githubusercontent.com/u/10098144?v=4", "gravatar_id": "", "url": "https://api.github.com/users/zzxiang", "html_url": "https://github.com/zzxiang", "followers_url": "https://api.github.com/users/zzxiang/followers", "following_url": "https://api.github.com/users/zzxiang/following{/other_user}", "gists_url": "https://api.github.com/users/zzxiang/gists{/gist_id}", "starred_url": "https://api.github.com/users/zzxiang/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/zzxiang/subscriptions", "organizations_url": "https://api.github.com/users/zzxiang/orgs", "repos_url": "https://api.github.com/users/zzxiang/repos", "events_url": "https://api.github.com/users/zzxiang/events{/privacy}", "received_events_url": "https://api.github.com/users/zzxiang/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 777173273, "node_id": "MDU6TGFiZWw3NzcxNzMyNzM=", "url": "https://api.github.com/repos/espnet/espnet/labels/Bug", "name": "Bug", "color": "ee0701", "default": false, "description": "bug should be fixed"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2021-10-05T04:37:17Z", "updated_at": "2021-10-11T11:51:11Z", "closed_at": "2021-10-11T11:51:11Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Some recipe scripts use `-e` option in shebang lines. For example,\r\n\r\nhttps://github.com/espnet/espnet/blob/66facd2859977d23349cf74d5c8f5394e5cb6784/egs/vcc20/tts1_en_zh/local/download_csmsc.sh#L1\r\n\r\nThis may cause errors in some environments:\r\n\r\n```\r\n$ ./run.sh --stop-stage -1\r\nstage -1: Data Download\r\n/usr/bin/env: 'bash -e': No such file or directory\r\n/usr/bin/env: use -[v]S to pass options in shebang lines\r\n```\r\n\r\n[The solution](https://stackoverflow.com/a/57049647/444860) is to add `-S` in the shebang lines:\r\n\r\n```\r\n#!/usr/bin/env -S bash -e\r\n```", "reactions": {"url": "https://api.github.com/repos/espnet/espnet/issues/3641/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/espnet/espnet/issues/3641/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/espnet/espnet/issues/3626", "repository_url": "https://api.github.com/repos/espnet/espnet", "labels_url": "https://api.github.com/repos/espnet/espnet/issues/3626/labels{/name}", "comments_url": "https://api.github.com/repos/espnet/espnet/issues/3626/comments", "events_url": "https://api.github.com/repos/espnet/espnet/issues/3626/events", "html_url": "https://github.com/espnet/espnet/issues/3626", "id": 1009348199, "node_id": "I_kwDOBsxW2c48KW5n", "number": 3626, "title": "ModuleNotFoundError: No module named 'espnet2'", "user": {"login": "arabae", "id": 46676700, "node_id": "MDQ6VXNlcjQ2Njc2NzAw", "avatar_url": "https://avatars.githubusercontent.com/u/46676700?v=4", "gravatar_id": "", "url": "https://api.github.com/users/arabae", "html_url": "https://github.com/arabae", "followers_url": "https://api.github.com/users/arabae/followers", "following_url": "https://api.github.com/users/arabae/following{/other_user}", "gists_url": "https://api.github.com/users/arabae/gists{/gist_id}", "starred_url": "https://api.github.com/users/arabae/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/arabae/subscriptions", "organizations_url": "https://api.github.com/users/arabae/orgs", "repos_url": "https://api.github.com/users/arabae/repos", "events_url": "https://api.github.com/users/arabae/events{/privacy}", "received_events_url": "https://api.github.com/users/arabae/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 777173273, "node_id": "MDU6TGFiZWw3NzcxNzMyNzM=", "url": "https://api.github.com/repos/espnet/espnet/labels/Bug", "name": "Bug", "color": "ee0701", "default": false, "description": "bug should be fixed"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2021-09-28T06:40:59Z", "updated_at": "2021-09-28T08:24:19Z", "closed_at": "2021-09-28T08:24:19Z", "author_association": "NONE", "active_lock_reason": null, "body": "**Describe the bug**\r\nI was performed ASR task using espnet2 and librispeech, But got the error \"ModuleNotFoundError: No module named 'espnet2'\" at stage 6 of asr.sh.\r\n\r\nIf I run python in the espnet folder and import espnet2, no error occurs, and when I run python in espnet/egs2/librispeech/asr1 and import espnet2, an error occurs.\r\n\r\nIt seems to have something to do with this, how can I fix it?\r\n\r\n**Basic environments:**\r\n - OS information: [Linux 5.11.0-27-generic # 29~20.04.1-Ubuntu SMP x86_64]\r\n - python version: [3.8.11 (default, Aug  3 2021, 15:09:35)  [GCC 7.5.0]]\r\n - espnet version: [espnet 0.10.3a3]\r\n - pytorch version [pytorch 1.9.1]\r\n\r\n**Environments from `torch.utils.collect_env`:**\r\ne.g.,\r\n```\r\nCollecting environment information...\r\nPyTorch version: 1.9.1\r\nIs debug build: False\r\nCUDA used to build PyTorch: 11.1\r\nROCM used to build PyTorch: N/A\r\n\r\nOS: Ubuntu 18.04.5 LTS (x86_64)\r\nGCC version: (Ubuntu 7.5.0-3ubuntu1~18.04) 7.5.0\r\nClang version: Could not collect\r\nCMake version: version 3.10.2\r\nLibc version: glibc-2.27\r\n\r\nPython version: 3.8 (64-bit runtime)\r\nPython platform: Linux-5.11.0-27-generic-x86_64-with-glibc2.17\r\nIs CUDA available: True\r\nCUDA runtime version: Could not collect\r\nGPU models and configuration: \r\nGPU 0: GeForce RTX 3090\r\nGPU 1: GeForce RTX 3090\r\n\r\nNvidia driver version: 460.91.03\r\ncuDNN version: Could not collect\r\nHIP runtime version: N/A\r\nMIOpen runtime version: N/A\r\n\r\nVersions of relevant libraries:\r\n[pip3] numpy==1.20.3\r\n[pip3] torch==1.9.1\r\n[pip3] torchaudio==0.9.0a0+a85b239\r\n[pip3] torchvision==0.10.1\r\n[conda] blas                      1.0                         mkl  \r\n[conda] cudatoolkit               11.1.74              h6bb024c_0    nvidia\r\n[conda] ffmpeg                    4.3                  hf484d3e_0    pytorch\r\n[conda] mkl                       2021.3.0           h06a4308_520  \r\n[conda] mkl-service               2.4.0            py38h7f8727e_0  \r\n[conda] mkl_fft                   1.3.0            py38h42c9631_2  \r\n[conda] mkl_random                1.2.2            py38h51133e4_0  \r\n[conda] numpy                     1.20.3           py38hf144106_0  \r\n[conda] numpy-base                1.20.3           py38h74d4b33_0  \r\n[conda] pytorch                   1.9.1           py3.8_cuda11.1_cudnn8.0.5_0    pytorch\r\n[conda] torchaudio                0.9.1                      py38    pytorch\r\n[conda] torchvision               0.10.1               py38_cu111    pytorch\r\n```\r\n\r\n**Task information:**\r\n - Task: [ASR]\r\n - Recipe: [librispeech]\r\n - ESPnet2\r\n\r\n**To Reproduce**\r\nSteps to reproduce the behavior:\r\n1. `cd egs2/librispeech/asr1`\r\n2. `run.sh --stage 6 --ngp 2`\r\n\r\n**Error logs**\r\n```\r\n2021-09-28T06:37:38 (asr.sh:230:main) ./asr.sh --stage 6 --lang en --ngpu 2 --nbpe 5000 --max_wav_duration 30 --speed_perturb_factors 0.9 1.0 1.1 --asr_config conf/tuning/train_asr_conformer7_n_fft512_hop_length256.yaml --lm_config conf/tuning/train_lm_transformer2.yaml --inference_config conf/decode_asr.yaml --train_set train_960 --valid_set dev --test_sets test_clean test_other dev_clean dev_other --lm_train_text data/train_960/text data/local/other_text/text --bpe_train_text data/train_960/text\r\n2021-09-28T06:37:38 (asr.sh:695:main) Stage 6: LM collect stats: train_set=dump/raw/lm_train.txt, dev_set=dump/raw/dev/text\r\n2021-09-28T06:38:01 (asr.sh:727:main) Generate 'exp/lm_stats_en_bpe5000/run.sh'. You can resume the process from stage 6 using this script\r\n2021-09-28T06:38:01 (asr.sh:731:main) LM collect-stats started... log: 'exp/lm_stats_en_bpe5000/logdir/stats.*.log'\r\nrun.pl: 32 / 32 failed, log is in exp/lm_stats_en_bpe5000/logdir/stats.*.log\r\n# python3 -m espnet2.bin.lm_train --collect_stats true --use_preprocessor true --bpemodel data/en_token_list/bpe_unigram5000/bpe.model --token_type bpe --token_list data/en_token_list/bpe_unigram5000/tokens.txt --non_linguistic_symbols none --cleaner none --g2p none --train_data_path_and_name_and_type dump/raw/lm_train.txt,text,text --valid_data_path_and_name_and_type dump/raw/dev/text,text,text --train_shape_file exp/lm_stats_en_bpe5000/logdir/train.1.scp --valid_shape_file exp/lm_stats_en_bpe5000/logdir/dev.1.scp --output_dir exp/lm_stats_en_bpe5000/logdir/stats.1 --config conf/tuning/train_lm_transformer2.yaml \r\n# Started at Tue Sep 28 06:38:01 UTC 2021\r\n#\r\n/home/arabae/share/espnet/tools/anaconda/envs/espnet/bin/python3: Error while finding module specification for 'espnet2.bin.lm_train' (ModuleNotFoundError: No module named 'espnet2')\r\n# Accounting: time=0 threads=1\r\n# Ended (code 1) at Tue Sep 28 06:38:01 UTC 2021, elapsed time 0 seconds\r\n```", "reactions": {"url": "https://api.github.com/repos/espnet/espnet/issues/3626/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/espnet/espnet/issues/3626/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/espnet/espnet/issues/3609", "repository_url": "https://api.github.com/repos/espnet/espnet", "labels_url": "https://api.github.com/repos/espnet/espnet/issues/3609/labels{/name}", "comments_url": "https://api.github.com/repos/espnet/espnet/issues/3609/comments", "events_url": "https://api.github.com/repos/espnet/espnet/issues/3609/events", "html_url": "https://github.com/espnet/espnet/issues/3609", "id": 1000931004, "node_id": "I_kwDOBsxW2c47qP68", "number": 3609, "title": "no module named tranformers", "user": {"login": "200987299", "id": 33377212, "node_id": "MDQ6VXNlcjMzMzc3MjEy", "avatar_url": "https://avatars.githubusercontent.com/u/33377212?v=4", "gravatar_id": "", "url": "https://api.github.com/users/200987299", "html_url": "https://github.com/200987299", "followers_url": "https://api.github.com/users/200987299/followers", "following_url": "https://api.github.com/users/200987299/following{/other_user}", "gists_url": "https://api.github.com/users/200987299/gists{/gist_id}", "starred_url": "https://api.github.com/users/200987299/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/200987299/subscriptions", "organizations_url": "https://api.github.com/users/200987299/orgs", "repos_url": "https://api.github.com/users/200987299/repos", "events_url": "https://api.github.com/users/200987299/events{/privacy}", "received_events_url": "https://api.github.com/users/200987299/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 777173273, "node_id": "MDU6TGFiZWw3NzcxNzMyNzM=", "url": "https://api.github.com/repos/espnet/espnet/labels/Bug", "name": "Bug", "color": "ee0701", "default": false, "description": "bug should be fixed"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2021-09-20T12:49:24Z", "updated_at": "2021-09-21T08:11:05Z", "closed_at": "2021-09-21T08:11:05Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Dear developers,\r\n\r\nI am using a recently downloaded espent version, and I got error when training asr, the error is:\r\n\r\n  File \"/espnet/espnet2/asr/postencoder/hugging_face_transformers_postencoder.py\", line 9, in <module>\r\n    from transformers import AutoModel\r\nModuleNotFoundError: No module named 'transformers'\r\n\r\n\r\nI could not find this transformers module, can anyone help me here?\r\n\r\nBests\r\n", "reactions": {"url": "https://api.github.com/repos/espnet/espnet/issues/3609/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/espnet/espnet/issues/3609/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/espnet/espnet/issues/3604", "repository_url": "https://api.github.com/repos/espnet/espnet", "labels_url": "https://api.github.com/repos/espnet/espnet/issues/3604/labels{/name}", "comments_url": "https://api.github.com/repos/espnet/espnet/issues/3604/comments", "events_url": "https://api.github.com/repos/espnet/espnet/issues/3604/events", "html_url": "https://github.com/espnet/espnet/issues/3604", "id": 1000659930, "node_id": "I_kwDOBsxW2c47pNva", "number": 3604, "title": "Difference between \"espnet2.bin.launch\" and \"asr_train", "user": {"login": "D-X-Y", "id": 9547057, "node_id": "MDQ6VXNlcjk1NDcwNTc=", "avatar_url": "https://avatars.githubusercontent.com/u/9547057?v=4", "gravatar_id": "", "url": "https://api.github.com/users/D-X-Y", "html_url": "https://github.com/D-X-Y", "followers_url": "https://api.github.com/users/D-X-Y/followers", "following_url": "https://api.github.com/users/D-X-Y/following{/other_user}", "gists_url": "https://api.github.com/users/D-X-Y/gists{/gist_id}", "starred_url": "https://api.github.com/users/D-X-Y/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/D-X-Y/subscriptions", "organizations_url": "https://api.github.com/users/D-X-Y/orgs", "repos_url": "https://api.github.com/users/D-X-Y/repos", "events_url": "https://api.github.com/users/D-X-Y/events{/privacy}", "received_events_url": "https://api.github.com/users/D-X-Y/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 777173273, "node_id": "MDU6TGFiZWw3NzcxNzMyNzM=", "url": "https://api.github.com/repos/espnet/espnet/labels/Bug", "name": "Bug", "color": "ee0701", "default": false, "description": "bug should be fixed"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2021-09-20T07:36:15Z", "updated_at": "2021-09-20T07:49:52Z", "closed_at": "2021-09-20T07:49:52Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Hi ESPNet team,\r\n\r\nIn the documentation, the explanation for espnet2.bin.launch remains \"Coming soon\u2026\".\r\nI'm wondering what is the difference if I run jobs via \"espnet2.bin.launch\" and \"espnet2.bin.asr_train\", especially that for:\r\n- Multi-threading with single host\r\n- Multi-processing with single host\r\n- \r\nWill there be any differences?\r\n\r\nThanks for your time in advance.", "reactions": {"url": "https://api.github.com/repos/espnet/espnet/issues/3604/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/espnet/espnet/issues/3604/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/espnet/espnet/issues/3582", "repository_url": "https://api.github.com/repos/espnet/espnet", "labels_url": "https://api.github.com/repos/espnet/espnet/issues/3582/labels{/name}", "comments_url": "https://api.github.com/repos/espnet/espnet/issues/3582/comments", "events_url": "https://api.github.com/repos/espnet/espnet/issues/3582/events", "html_url": "https://github.com/espnet/espnet/issues/3582", "id": 994529953, "node_id": "MDU6SXNzdWU5OTQ1Mjk5NTM=", "number": 3582, "title": "New version got worse results", "user": {"login": "tzyll", "id": 15124358, "node_id": "MDQ6VXNlcjE1MTI0MzU4", "avatar_url": "https://avatars.githubusercontent.com/u/15124358?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tzyll", "html_url": "https://github.com/tzyll", "followers_url": "https://api.github.com/users/tzyll/followers", "following_url": "https://api.github.com/users/tzyll/following{/other_user}", "gists_url": "https://api.github.com/users/tzyll/gists{/gist_id}", "starred_url": "https://api.github.com/users/tzyll/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tzyll/subscriptions", "organizations_url": "https://api.github.com/users/tzyll/orgs", "repos_url": "https://api.github.com/users/tzyll/repos", "events_url": "https://api.github.com/users/tzyll/events{/privacy}", "received_events_url": "https://api.github.com/users/tzyll/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 777173273, "node_id": "MDU6TGFiZWw3NzcxNzMyNzM=", "url": "https://api.github.com/repos/espnet/espnet/labels/Bug", "name": "Bug", "color": "ee0701", "default": false, "description": "bug should be fixed"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2021-09-13T07:04:22Z", "updated_at": "2021-09-14T10:48:14Z", "closed_at": "2021-09-14T10:48:14Z", "author_association": "NONE", "active_lock_reason": null, "body": "The espnet2 baselines of 2 datasets all got worse results than older one with the same machine.\r\nIs that because default conf changed or something else?\r\n\r\n\r\n# Env\r\nOld version:\r\npytorch1.7.1-cuda9.2\r\nNew version:\r\npytorch1.9.0-cuda11.1\r\n\r\n\r\n# WSJ\r\nconf  | dev93 | eval92\r\n-- | -- | --\r\nconf/train_asr_transformer.yaml  | 6.2 | 3.9\r\nconf/train_asr_transformer_new_version.yaml | 7.9 | 5.0\r\n\r\nconf diff:\r\n```\r\n$ diff exp/asr_train_asr_transformer_raw_en_char/config.yaml exp/asr_train_asr_transformer_new_version_raw_en_char/config.yaml \r\n1c1\r\n< config: conf/train_asr_transformer.yaml\r\n---\r\n> config: conf/train_asr_transformer_new_version.yaml\r\n6c6\r\n< output_dir: exp/asr_train_asr_transformer_raw_en_char\r\n---\r\n> output_dir: exp/asr_train_asr_transformer_new_version_raw_en_char\r\n53a54,57\r\n> wandb_entity: null\r\n> wandb_name: null\r\n> wandb_model_log_interval: -1\r\n> detect_anomaly: false\r\n55a60\r\n> ignore_init_mismatch: false\r\n175c180\r\n<     ignore_nan_grad: false\r\n---\r\n>     ignore_nan_grad: true\r\n225c230\r\n< version: 0.9.7\r\n---\r\n> version: 0.10.0\r\n```\r\n\r\n# HKUST\r\nconf | dev\r\n--|--\r\nconf/train_asr_transformer.yaml  | 21.2\r\n conf/train_asr_transformer_new_version.yaml  | 22.6\r\n\r\nconf diff:\r\n```\r\n$ diff exp/asr_train_asr_transformer2_raw_zh_char_sp/config.yaml exp/asr_train_asr_transformer_new_version_raw_zh_char_sp/config.yaml \r\n1c1\r\n< config: conf/tuning/train_asr_transformer2.yaml\r\n---\r\n> config: conf/train_asr_transformer_new_version.yaml\r\n6c6\r\n< output_dir: exp/asr_train_asr_transformer2_raw_zh_char_sp\r\n---\r\n> output_dir: exp/asr_train_asr_transformer_new_version_raw_zh_char_sp\r\n53a54,57\r\n> wandb_entity: null\r\n> wandb_name: null\r\n> wandb_model_log_interval: -1\r\n> detect_anomaly: false\r\n55a60\r\n> ignore_init_mismatch: false\r\n3825c3830\r\n< version: 0.9.7\r\n---\r\n> version: 0.10.0\r\n```\r\n", "reactions": {"url": "https://api.github.com/repos/espnet/espnet/issues/3582/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/espnet/espnet/issues/3582/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/espnet/espnet/issues/3562", "repository_url": "https://api.github.com/repos/espnet/espnet", "labels_url": "https://api.github.com/repos/espnet/espnet/issues/3562/labels{/name}", "comments_url": "https://api.github.com/repos/espnet/espnet/issues/3562/comments", "events_url": "https://api.github.com/repos/espnet/espnet/issues/3562/events", "html_url": "https://github.com/espnet/espnet/issues/3562", "id": 988426932, "node_id": "MDU6SXNzdWU5ODg0MjY5MzI=", "number": 3562, "title": "Hang when training", "user": {"login": "gafsd", "id": 62999745, "node_id": "MDQ6VXNlcjYyOTk5NzQ1", "avatar_url": "https://avatars.githubusercontent.com/u/62999745?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gafsd", "html_url": "https://github.com/gafsd", "followers_url": "https://api.github.com/users/gafsd/followers", "following_url": "https://api.github.com/users/gafsd/following{/other_user}", "gists_url": "https://api.github.com/users/gafsd/gists{/gist_id}", "starred_url": "https://api.github.com/users/gafsd/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gafsd/subscriptions", "organizations_url": "https://api.github.com/users/gafsd/orgs", "repos_url": "https://api.github.com/users/gafsd/repos", "events_url": "https://api.github.com/users/gafsd/events{/privacy}", "received_events_url": "https://api.github.com/users/gafsd/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 777173273, "node_id": "MDU6TGFiZWw3NzcxNzMyNzM=", "url": "https://api.github.com/repos/espnet/espnet/labels/Bug", "name": "Bug", "color": "ee0701", "default": false, "description": "bug should be fixed"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2021-09-05T05:20:33Z", "updated_at": "2021-09-07T12:58:30Z", "closed_at": "2021-09-07T12:57:02Z", "author_association": "NONE", "active_lock_reason": null, "body": "**Describe the bug**\r\nSometimes in training espnet hang while iterating\r\n\r\n**Basic environments:**\r\n - Python 3.7.10\r\n - espnet version: main, git hash 65e1d4627ba84401fb68176b6aace2a9e321a79c\r\n - pytorch 1.9.0\r\n\r\n**Task information:**\r\n - Task: TTS\r\n - Recipe: multiple previously but I only have debug statement for ljspeech/gan training\r\n - ESPNet 2\r\n\r\n**To Reproduce**\r\nSteps to reproduce the behavior:\r\n1. move to a recipe directory, e.g., `cd egs2/ljspeech/tts`\r\n2. execute joint gan training task\r\n3. exp log will stop update after some iters (random amount)\r\n\r\nI add debug output and it freeze on optimizer.step() call after unknown iters\r\n**Error logs**\r\n```\r\n2021-09-05 12:53:58,946 (trainer:274) INFO: 1/2000epoch started \r\n2021-09-05 12:54:09,654 (gan_trainer:261) INFO: pre_optim None <class 'torch.optim.adam.Adam'> 0 1\r\n2021-09-05 12:54:09,655 (gan_trainer:271) INFO: !!! pre_optim <class 'torch.optim.adam.Adam'>\r\n2021-09-05 12:54:09,656 (gan_trainer:261) INFO: pre_optim None <class 'torch.optim.adam.Adam'> 1 1\r\n2021-09-05 12:54:09,932 (gan_trainer:261) INFO: pre_optim None <class 'torch.optim.adam.Adam'> 0 1\r\n2021-09-05 12:54:09,933 (gan_trainer:261) INFO: pre_optim None <class 'torch.optim.adam.Adam'> 1 1\r\n2021-09-05 12:54:09,933 (gan_trainer:271) INFO: !!! pre_optim <class 'torch.optim.adam.Adam'>\r\n\r\nwith following code change\r\nwith reporter.measure_time(f\"{turn}_optim_step_time\"): \r\n    for iopt, (optimizer, scheduler) in enumerate(\r\n        zip(optimizers, schedulers)\r\n    ):\r\n        logging.info (f'pre_optim {scaler} {type(optimizer)} {iopt} {optim_idx}')\r\n        if optim_idx is not None and iopt != optim_idx:\r\n            continue\r\n        if scaler is not None:\r\n            # scaler.step() first unscales the gradients of\r\n            # the optimizer's assigned params.\r\n            scaler.step(optimizer)\r\n            # Updates the scale for next iteration.\r\n            scaler.update()\r\n        else:\r\n            logging.info (f'!!! pre_optim {type(optimizer)}')\r\n            optimizer.step()\r\n        logging.info (f'pre_schedule {scheduler}')\r\n        if isinstance(scheduler, AbsBatchStepScheduler):\r\n            scheduler.step() \r\n```\r\n", "reactions": {"url": "https://api.github.com/repos/espnet/espnet/issues/3562/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/espnet/espnet/issues/3562/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/espnet/espnet/issues/3548", "repository_url": "https://api.github.com/repos/espnet/espnet", "labels_url": "https://api.github.com/repos/espnet/espnet/issues/3548/labels{/name}", "comments_url": "https://api.github.com/repos/espnet/espnet/issues/3548/comments", "events_url": "https://api.github.com/repos/espnet/espnet/issues/3548/events", "html_url": "https://github.com/espnet/espnet/issues/3548", "id": 987304021, "node_id": "MDU6SXNzdWU5ODczMDQwMjE=", "number": 3548, "title": "espnet1 transducer bug report", "user": {"login": "qmpzzpmq", "id": 21037898, "node_id": "MDQ6VXNlcjIxMDM3ODk4", "avatar_url": "https://avatars.githubusercontent.com/u/21037898?v=4", "gravatar_id": "", "url": "https://api.github.com/users/qmpzzpmq", "html_url": "https://github.com/qmpzzpmq", "followers_url": "https://api.github.com/users/qmpzzpmq/followers", "following_url": "https://api.github.com/users/qmpzzpmq/following{/other_user}", "gists_url": "https://api.github.com/users/qmpzzpmq/gists{/gist_id}", "starred_url": "https://api.github.com/users/qmpzzpmq/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/qmpzzpmq/subscriptions", "organizations_url": "https://api.github.com/users/qmpzzpmq/orgs", "repos_url": "https://api.github.com/users/qmpzzpmq/repos", "events_url": "https://api.github.com/users/qmpzzpmq/events{/privacy}", "received_events_url": "https://api.github.com/users/qmpzzpmq/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 777173273, "node_id": "MDU6TGFiZWw3NzcxNzMyNzM=", "url": "https://api.github.com/repos/espnet/espnet/labels/Bug", "name": "Bug", "color": "ee0701", "default": false, "description": "bug should be fixed"}, {"id": 1275359095, "node_id": "MDU6TGFiZWwxMjc1MzU5MDk1", "url": "https://api.github.com/repos/espnet/espnet/labels/Discussion", "name": "Discussion", "color": "e06b28", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2021-09-03T01:17:30Z", "updated_at": "2021-09-06T06:12:30Z", "closed_at": "2021-09-06T06:12:30Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "@b-flo I think I meet a bug in VIVOS.\r\n\r\nPytorch: 1.9\r\nCUDA: 11.1\r\n\r\nThe script is running with all default setting and I just add two line as followed in to train.yaml.\r\n`\r\nnoam-lr: 5.0\r\nnoam-adim: 4\r\n`\r\nI copy from other transducer config, but there still are some bug log:\r\n\r\n> Exception in main training loop: CUDA error: CUBLAS_STATUS_EXECUTION_FAILED when calling `cublasSgemm( handle, opa, opb, m, n, k, &alpha, a, lda, b, ldb, &beta, c, ldc)`\r\nTraceback (most recent call last):\r\n  File \"/home/acc12416pz/anaconda3/envs/tespnet/lib/python3.8/site-packages/chainer/training/trainer.py\", line 316, in run\r\n    update()\r\n  File \"/groups/4/gcc50479/tanghaoyu/espnet/espnet/asr/pytorch_backend/asr.py\", line 235, in update\r\n    self.update_core()\r\n  File \"/groups/4/gcc50479/tanghaoyu/espnet/espnet/asr/pytorch_backend/asr.py\", line 209, in update_core\r\n    loss.backward()\r\n  File \"/home/acc12416pz/anaconda3/envs/tespnet/lib/python3.8/site-packages/torch/_tensor.py\", line 255, in backward\r\n    torch.autograd.backward(self, gradient, retain_graph, create_graph, inputs=inputs)\r\n  File \"/home/acc12416pz/anaconda3/envs/tespnet/lib/python3.8/site-packages/torch/autograd/__init__.py\", line 147, in backward\r\n    Variable._execution_engine.run_backward(\r\nWill finalize trainer extensions and updater before reraising the exception.\r\nTraceback (most recent call last):\r\n  File \"/groups/4/gcc50479/tanghaoyu/espnet/egs/vivos/asr1/../../../espnet/bin/asr_train.py\", line 639, in <module>\r\n    main(sys.argv[1:])\r\n  File \"/groups/4/gcc50479/tanghaoyu/espnet/egs/vivos/asr1/../../../espnet/bin/asr_train.py\", line 625, in main\r\n    train(args)\r\n  File \"/groups/4/gcc50479/tanghaoyu/espnet/espnet/asr/pytorch_backend/asr.py\", line 967, in train\r\n    trainer.run()\r\n  File \"/home/acc12416pz/anaconda3/envs/tespnet/lib/python3.8/site-packages/chainer/training/trainer.py\", line 349, in run\r\n    six.reraise(*exc_info)\r\n  File \"/home/acc12416pz/anaconda3/envs/tespnet/lib/python3.8/site-packages/six.py\", line 719, in reraise\r\n    raise value\r\n  File \"/home/acc12416pz/anaconda3/envs/tespnet/lib/python3.8/site-packages/chainer/training/trainer.py\", line 316, in run\r\n    update()\r\n  File \"/groups/4/gcc50479/tanghaoyu/espnet/espnet/asr/pytorch_backend/asr.py\", line 235, in update\r\n    self.update_core()\r\n  File \"/groups/4/gcc50479/tanghaoyu/espnet/espnet/asr/pytorch_backend/asr.py\", line 209, in update_core\r\n    loss.backward()\r\n  File \"/home/acc12416pz/anaconda3/envs/tespnet/lib/python3.8/site-packages/torch/_tensor.py\", line 255, in backward\r\n    torch.autograd.backward(self, gradient, retain_graph, create_graph, inputs=inputs)\r\n  File \"/home/acc12416pz/anaconda3/envs/tespnet/lib/python3.8/site-packages/torch/autograd/__init__.py\", line 147, in backward\r\n    Variable._execution_engine.run_backward(\r\nRuntimeError: CUDA error: CUBLAS_STATUS_EXECUTION_FAILED when calling `cublasSgemm( handle, opa, opb, m, n, k, &alpha, a, lda, b, ldb, &beta, c, ldc)`\r\n\r\nBut I check the log, it semms only happen in the last batch.\r\n", "reactions": {"url": "https://api.github.com/repos/espnet/espnet/issues/3548/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/espnet/espnet/issues/3548/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/espnet/espnet/issues/3496", "repository_url": "https://api.github.com/repos/espnet/espnet", "labels_url": "https://api.github.com/repos/espnet/espnet/issues/3496/labels{/name}", "comments_url": "https://api.github.com/repos/espnet/espnet/issues/3496/comments", "events_url": "https://api.github.com/repos/espnet/espnet/issues/3496/events", "html_url": "https://github.com/espnet/espnet/issues/3496", "id": 976071414, "node_id": "MDU6SXNzdWU5NzYwNzE0MTQ=", "number": 3496, "title": "LibriSpeech/ASR CUDA error: an illegal memory access was encountered", "user": {"login": "D-X-Y", "id": 9547057, "node_id": "MDQ6VXNlcjk1NDcwNTc=", "avatar_url": "https://avatars.githubusercontent.com/u/9547057?v=4", "gravatar_id": "", "url": "https://api.github.com/users/D-X-Y", "html_url": "https://github.com/D-X-Y", "followers_url": "https://api.github.com/users/D-X-Y/followers", "following_url": "https://api.github.com/users/D-X-Y/following{/other_user}", "gists_url": "https://api.github.com/users/D-X-Y/gists{/gist_id}", "starred_url": "https://api.github.com/users/D-X-Y/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/D-X-Y/subscriptions", "organizations_url": "https://api.github.com/users/D-X-Y/orgs", "repos_url": "https://api.github.com/users/D-X-Y/repos", "events_url": "https://api.github.com/users/D-X-Y/events{/privacy}", "received_events_url": "https://api.github.com/users/D-X-Y/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 777173273, "node_id": "MDU6TGFiZWw3NzcxNzMyNzM=", "url": "https://api.github.com/repos/espnet/espnet/labels/Bug", "name": "Bug", "color": "ee0701", "default": false, "description": "bug should be fixed"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 13, "created_at": "2021-08-21T07:32:53Z", "updated_at": "2022-05-04T16:41:33Z", "closed_at": "2021-08-26T23:37:54Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "**Describe the bug**\r\nA clear and concise description of what the bug is.\r\n\r\n**Basic environments:**\r\n - OS information: Linux 4.14.243-185.433.amzn2.x86_64 #1 SMP Mon Aug 9 05:55:52 UTC 2021 x86_64\r\n - python version: `3.7.10 (default, Jun  3 2021, 00:02:01)  [GCC 7.3.1 20180712 (Red Hat 7.3.1-13)]`\r\n- espnet version: `espnet 0.9.10`\r\n- pytorch version: `pytorch 1.7.1+cu110`\r\n \r\n\r\n**Environments from `torch.utils.collect_env`:**\r\n```\r\nPyTorch version: 1.7.1+cu110\r\nIs debug build: False\r\nCUDA used to build PyTorch: 11.0\r\nROCM used to build PyTorch: N/A\r\n\r\nOS: Amazon Linux 2 (x86_64)\r\nGCC version: (GCC) 7.3.1 20180712 (Red Hat 7.3.1-13)\r\nClang version: Could not collect\r\nCMake version: version 3.20.4\r\n\r\nPython version: 3.7 (64-bit runtime)\r\nIs CUDA available: True\r\nCUDA runtime version: Could not collect\r\nGPU models and configuration:\r\nGPU 0: Tesla V100-SXM2-32GB\r\nGPU 1: Tesla V100-SXM2-32GB\r\nGPU 2: Tesla V100-SXM2-32GB\r\nGPU 3: Tesla V100-SXM2-32GB\r\nGPU 4: Tesla V100-SXM2-32GB\r\nGPU 5: Tesla V100-SXM2-32GB\r\nGPU 6: Tesla V100-SXM2-32GB\r\nGPU 7: Tesla V100-SXM2-32GB\r\n\r\nNvidia driver version: 450.119.03\r\ncuDNN version: Probably one of the following:\r\n/usr/local/cuda-10.1/targets/x86_64-linux/lib/libcudnn.so.7.6.5\r\n/usr/local/cuda-10.2/targets/x86_64-linux/lib/libcudnn.so.7.6.5\r\n/usr/local/cuda-11.0/targets/x86_64-linux/lib/libcudnn.so.8.0.5\r\n/usr/local/cuda-11.0/targets/x86_64-linux/lib/libcudnn_adv_infer.so.8.0.5\r\n/usr/local/cuda-11.0/targets/x86_64-linux/lib/libcudnn_adv_train.so.8.0.5\r\n/usr/local/cuda-11.0/targets/x86_64-linux/lib/libcudnn_cnn_infer.so.8.0.5\r\n/usr/local/cuda-11.0/targets/x86_64-linux/lib/libcudnn_cnn_train.so.8.0.5\r\n/usr/local/cuda-11.0/targets/x86_64-linux/lib/libcudnn_ops_infer.so.8.0.5\r\n/usr/local/cuda-11.0/targets/x86_64-linux/lib/libcudnn_ops_train.so.8.0.5\r\n/usr/local/cuda-11.1/targets/x86_64-linux/lib/libcudnn.so.8.0.5\r\n/usr/local/cuda-11.1/targets/x86_64-linux/lib/libcudnn_adv_infer.so.8.0.5\r\n/usr/local/cuda-11.1/targets/x86_64-linux/lib/libcudnn_adv_train.so.8.0.5\r\n/usr/local/cuda-11.1/targets/x86_64-linux/lib/libcudnn_cnn_infer.so.8.0.5\r\n/usr/local/cuda-11.1/targets/x86_64-linux/lib/libcudnn_cnn_train.so.8.0.5\r\n/usr/local/cuda-11.1/targets/x86_64-linux/lib/libcudnn_ops_infer.so.8.0.5\r\n/usr/local/cuda-11.1/targets/x86_64-linux/lib/libcudnn_ops_train.so.8.0.5\r\nHIP runtime version: N/A\r\nMIOpen runtime version: N/A\r\n\r\nVersions of relevant libraries:\r\n[pip3] numpy==1.19.5\r\n[pip3] pytorch-ranger==0.1.1\r\n[pip3] pytorch-wpe==0.0.1\r\n[pip3] torch==1.7.1+cu110\r\n[pip3] torch-complex==0.2.1\r\n[pip3] torch-optimizer==0.1.0\r\n[pip3] torchaudio==0.7.2\r\n[conda] blas                      1.0                         mkl\r\n[conda] mkl                       2020.2                      256\r\n[conda] mkl-service               2.3.0            py37he8ac12f_0\r\n[conda] mkl_fft                   1.2.1            py37h54f3939_0\r\n[conda] mkl_random                1.1.1            py37h0573a6f_0\r\n[conda] numpy                     1.19.2           py37h54aff64_0\r\n[conda] numpy-base                1.19.2           py37hfa32c7d_0\r\n[conda] numpydoc                  1.1.0              pyhd3eb1b0_1\r\n```\r\n\r\n**Task information:**\r\n - Task: ASR\r\n - Recipe: librispeech\r\n - ESPnet1 or ESPnet2\r\n\r\n**To Reproduce**\r\nSteps to reproduce the behavior:\r\n1. `cd egs2/librispeech/asr1`\r\n2. modify the encoder part of `conf/tuning/train_asr_conformer7_n_fft512_hop_length256.yaml` as follows:\r\n```\r\nencoder: conformer\r\nencoder_conf:\r\n    input_layer: conv2d\r\n    output_size: 144\r\n    num_blocks: 16\r\n    attention_heads: 4\r\n    linear_units: 576\r\n    dropout_rate: 0.1\r\n    positional_dropout_rate: 0.1\r\n    attention_dropout_rate: 0.1\r\n    normalize_before: true\r\n    pos_enc_layer_type: rel_pos\r\n    rel_pos_type: latest\r\n    selfattention_layer_type: rel_selfattn\r\n    activation_type: swish\r\n    macaron_style: true\r\n    use_cnn_module:  true\r\n    cnn_module_kernel: 31\r\n\r\ndecoder: transformer\r\ndecoder_conf:\r\n    input_layer: embed\r\n    attention_heads: 4\r\n    linear_units: 576\r\n    num_blocks: 1\r\n    dropout_rate: 0.1\r\n    positional_dropout_rate: 0.1\r\n    self_attention_dropout_rate: 0.1\r\n    src_attention_dropout_rate: 0.1\r\n\r\n# hybrid CTC/attention\r\nmodel_conf:\r\n    ctc_weight: 0.3\r\n    lsm_weight: 0.1\r\n    length_normalized_loss: false\r\n```\r\n3. run on 8 V100 GPUs, then the first hundreds of iterations work well, but then the CUDA error occours.\r\n\r\n**Error logs**\r\n```\r\n[ip-172-31-15-245:0/8] 2021-08-21 06:55:50,549 (abs_task:1504) INFO: [train] dataset:\r\nESPnetDataset(\r\n  speech: {\"path\": \"dump/raw/librispeech_train_960_sp/wav.scp\", \"type\": \"sound\"}\r\n  text: {\"path\": \"dump/raw/librispeech_train_960_sp/text\", \"type\": \"text\"}\r\n  preprocess: <espnet2.train.preprocessor.CommonPreprocessor object at 0x7f0c3052ef50>)\r\n[ip-172-31-15-245:0/8] 2021-08-21 06:55:50,551 (abs_task:1505) INFO: [train] Batch sampler: NumElementsBatchSampler(N-batch=2779, batch_bins=140000000, sort_in_batch=descending, sort_batch=descending)\r\n[ip-172-31-15-245:0/8] 2021-08-21 06:55:50,552 (abs_task:1507) INFO: [train] mini-batch sizes summary: N-batch=2779, mean=303.6, min=41, max=1653\r\n[ip-172-31-15-245:0/8] 2021-08-21 06:55:50,678 (abs_task:1504) INFO: [valid] dataset:\r\nESPnetDataset(\r\n  speech: {\"path\": \"dump/raw/librispeech_dev/wav.scp\", \"type\": \"sound\"}\r\n  text: {\"path\": \"dump/raw/librispeech_dev/text\", \"type\": \"text\"}\r\n  preprocess: <espnet2.train.preprocessor.CommonPreprocessor object at 0x7f0c470a98d0>)\r\n[ip-172-31-15-245:0/8] 2021-08-21 06:55:50,678 (abs_task:1505) INFO: [valid] Batch sampler: NumElementsBatchSampler(N-batch=12, batch_bins=140000000, sort_in_batch=descending, sort_batch=descending)\r\n[ip-172-31-15-245:0/8] 2021-08-21 06:55:50,679 (abs_task:1507) INFO: [valid] mini-batch sizes summary: N-batch=12, mean=462.6, min=77, max=1042\r\n[ip-172-31-15-245:0/8] 2021-08-21 06:55:50,718 (abs_task:1504) INFO: [plot_att] dataset:\r\nESPnetDataset(\r\n  speech: {\"path\": \"dump/raw/librispeech_dev/wav.scp\", \"type\": \"sound\"}\r\n  text: {\"path\": \"dump/raw/librispeech_dev/text\", \"type\": \"text\"}\r\n  preprocess: <espnet2.train.preprocessor.CommonPreprocessor object at 0x7f0b7f72f990>)\r\n[ip-172-31-15-245:0/8] 2021-08-21 06:55:50,718 (abs_task:1505) INFO: [plot_att] Batch sampler: UnsortedBatchSampler(N-batch=5551, batch_size=1, key_file=snapshots/asr_stats_librispeech_train_960_sp_raw_en_bpe5000/valid/speech_shape, \r\n[ip-172-31-15-245:0/8] 2021-08-21 06:55:50,719 (abs_task:1507) INFO: [plot_att] mini-batch sizes summary: N-batch=3, mean=1.0, min=1, max=1\r\n[ip-172-31-15-245:0/8] 2021-08-21 06:55:57,117 (trainer:273) INFO: 1/35epoch started\r\n~/espnet/tools/venv/lib64/python3.7/site-packages/torch/functional.py:516: UserWarning: The function torch.rfft is deprecated and will be removed in a future PyTorch release. Use the new torch.fft module functions, instead, by importing torch.fft and calling torch.fft.fft or torch.fft.rfft. (Triggered internally at  /pytorch/aten/src/ATen/native/SpectralOps.cpp:590.)\r\n  normalized, onesided, return_complex)\r\n[ip-172-31-15-245:0/8] 2021-08-21 06:56:13,645 (distributed:607) INFO: Reducer buckets have been rebuilt in this iteration.\r\n[ip-172-31-15-245:0/8] 2021-08-21 06:57:54,249 (trainer:654) INFO: 1epoch:train:1-138batch: iter_time=0.004, forward_time=0.164, loss=744.241, loss_att=321.751, loss_ctc=1.730e+03, acc=2.198e-04, backward_time=0.366, optim_step_time=0.061, optim0_lr0=4.406e-06, train_time=0.844\r\n[ip-172-31-15-245:0/8] 2021-08-21 06:59:34,964 (trainer:654) INFO: 1epoch:train:139-276batch: iter_time=7.903e-05, forward_time=0.158, loss=458.286, loss_att=329.184, loss_ctc=759.523, acc=3.533e-04, backward_time=0.363, optim_step_time=0.061, optim0_lr0=1.303e-05, train_time=0.730\r\n[ip-172-31-15-245:0/8] 2021-08-21 07:01:14,062 (trainer:654) INFO: 1epoch:train:277-414batch: iter_time=7.788e-05, forward_time=0.159, loss=356.214, loss_att=301.985, loss_ctc=482.747, acc=0.006, backward_time=0.361, optim_step_time=0.060, optim0_lr0=2.166e-05, train_time=0.718\r\n[ip-172-31-15-245:0/8] 2021-08-21 07:02:51,940 (trainer:654) INFO: 1epoch:train:415-552batch: iter_time=7.711e-05, forward_time=0.157, loss=287.477, loss_att=264.993, loss_ctc=339.938, acc=0.044, backward_time=0.360, optim_step_time=0.059, optim0_lr0=3.028e-05, train_time=0.709\r\n[ip-172-31-15-245:0/8] 2021-08-21 07:04:30,121 (trainer:654) INFO: 1epoch:train:553-690batch: iter_time=7.716e-05, forward_time=0.158, loss=252.736, loss_att=239.338, loss_ctc=283.996, acc=0.050, backward_time=0.361, optim_step_time=0.060, optim0_lr0=3.891e-05, train_time=0.711\r\n[ip-172-31-15-245:0/8] 2021-08-21 07:06:13,661 (trainer:654) INFO: 1epoch:train:691-828batch: iter_time=7.761e-05, forward_time=0.159, loss=250.943, loss_att=238.980, loss_ctc=278.856, acc=0.055, backward_time=0.363, optim_step_time=0.060, optim0_lr0=4.753e-05, train_time=0.750\r\n[ip-172-31-15-245:0/8] 2021-08-21 07:07:58,053 (trainer:654) INFO: 1epoch:train:829-966batch: iter_time=7.727e-05, forward_time=0.159, loss=261.135, loss_att=248.019, loss_ctc=291.737, acc=0.059, backward_time=0.364, optim_step_time=0.060, optim0_lr0=5.616e-05, train_time=0.756\r\n[ip-172-31-15-245:0/8] 2021-08-21 07:09:41,661 (trainer:654) INFO: 1epoch:train:967-1104batch: iter_time=7.750e-05, forward_time=0.159, loss=232.536, loss_att=220.398, loss_ctc=260.858, acc=0.063, backward_time=0.359, optim_step_time=0.059, optim0_lr0=6.478e-05, train_time=0.750\r\n[ip-172-31-15-245:0/8] 2021-08-21 07:11:23,413 (trainer:654) INFO: 1epoch:train:1105-1242batch: iter_time=7.753e-05, forward_time=0.158, loss=238.665, loss_att=225.604, loss_ctc=269.139, acc=0.069, backward_time=0.361, optim_step_time=0.060, optim0_lr0=7.341e-05, train_time=0.737\r\n[ip-172-31-15-245:0/8] 2021-08-21 07:13:01,887 (trainer:654) INFO: 1epoch:train:1243-1380batch: iter_time=7.705e-05, forward_time=0.158, loss=253.029, loss_att=238.852, loss_ctc=286.108, acc=0.073, backward_time=0.364, optim_step_time=0.060, optim0_lr0=8.203e-05, train_time=0.713\r\nterminate called after throwing an instance of 'c10::Errorterminate called after throwing an instance of ''\r\nc10::Errorterminate called after throwing an instance of ''\r\nc10::Error'\r\nterminate called after throwing an instance of 'c10::Error'\r\n  what():    what():  CUDA error: an illegal memory access was encountered\r\nException raised from create_event_internal at /pytorch/c10/cuda/CUDACachingAllocator.cpp:687 (most recent call first):\r\nframe #0: c10::Error::Error(c10::SourceLocation, std::string) + 0x42 (0x7fe8087518b2 in ~/espnet/tools/venv/lib64/python3.7/site-packages/torch/lib/libc10.so)\r\nframe #1: c10::cuda::CUDACachingAllocator::raw_delete(void*) + 0xad2 (0x7fe8089a3952 in ~/espnet/tools/venv/lib64/python3.7/site-packages/torch/lib/libc10_cuda.so)\r\nframe #2: c10::TensorImpl::release_resources() + 0x4d (0x7fe80873cb7d in ~/espnet/tools/venv/lib64/python3.7/site-packages/torch/lib/libc10.so)\r\nframe #3: <unknown function> + 0x60253a (0x7fe8a405853a in ~/espnet/tools/venv/lib64/python3.7/site-packages/torch/lib/libtorch_python.so)\r\nframe #4: <unknown function> + 0x6025e6 (0x7fe8a40585e6 in ~/espnet/tools/venv/lib64/python3.7/site-packages/torch/lib/libtorch_python.so)\r\n<omitting python frames>\r\nframe #28: __libc_start_main + 0xea (0x7fe8b03ba0ba in /lib64/libc.so.6)\r\nframe #29: _start + 0x2a (0x40066a in ~/espnet/tools/venv/bin/python3)\r\n  what():  CUDA error: an illegal memory access was encountered\r\nException raised from create_event_internal at /pytorch/c10/cuda/CUDACachingAllocator.cpp:687 (most recent call first):\r\nframe #0: c10::Error::Error(c10::SourceLocation, std::string) + 0x42 (0x7f761a1eb8b2 in ~/espnet/tools/venv/lib64/python3.7/site-packages/torch/lib/libc10.so)\r\nframe #1: c10::cuda::CUDACachingAllocator::raw_delete(void*) + 0xad2 (0x7f761a43d952 in ~/espnet/tools/venv/lib64/python3.7/site-packages/torch/lib/libc10_cuda.so)\r\nframe #2: c10::TensorImpl::release_resources() + 0x4d (0x7f761a1d6b7d in ~/espnet/tools/venv/lib64/python3.7/site-packages/torch/lib/libc10.so)\r\nframe #3: <unknown function> + 0x60253a (0x7f76b5af253a in ~/espnet/tools/venv/lib64/python3.7/site-packages/torch/lib/libtorch_python.so)\r\nframe #4: <unknown function> + 0x6025e6 (0x7f76b5af25e6 in ~/espnet/tools/venv/lib64/python3.7/site-packages/torch/lib/libtorch_python.so)\r\n<omitting python frames>\r\nframe #28: __libc_start_main + 0xea (0x7f76c1e540ba in /lib64/libc.so.6)\r\nframe #29: _start + 0x2a (0x40066a in ~/espnet/tools/venv/bin/python3)\r\n\r\nCUDA error: an illegal memory access was encountered\r\nException raised from create_event_internal at /pytorch/c10/cuda/CUDACachingAllocator.cpp:687 (most recent call first):\r\nframe #0: c10::Error::Error(c10::SourceLocation, std::string) + 0x42 (0x7f0c6bca58b2 in ~/espnet/tools/venv/lib64/python3.7/site-packages/torch/lib/libc10.so)\r\nframe #1: c10::cuda::CUDACachingAllocator::raw_delete(void*) + 0xad2 (0x7f0c6bef7952 in ~/espnet/tools/venv/lib64/python3.7/site-packages/torch/lib/libc10_cuda.so)\r\nframe #2: c10::TensorImpl::release_resources() + 0x4d (0x7f0c6bc90b7d in ~/espnet/tools/venv/lib64/python3.7/site-packages/torch/lib/libc10.so)\r\nframe #3: <unknown function> + 0x60253a (0x7f0d075ac53a in ~/espnet/tools/venv/lib64/python3.7/site-packages/torch/lib/libtorch_python.so)\r\nframe #4: <unknown function> + 0x6025e6 (0x7f0d075ac5e6 in ~/espnet/tools/venv/lib64/python3.7/site-packages/torch/lib/libtorch_python.so)\r\n<omitting python frames>\r\nframe #28: __libc_start_main + 0xea (0x7f0d1390e0ba in /lib64/libc.so.6)\r\nframe #29: _start + 0x2a (0x40066a in ~/espnet/tools/venv/bin/python3)\r\n\r\n  what():  \r\nCUDA error: an illegal memory access was encountered\r\nException raised from create_event_internal at /pytorch/c10/cuda/CUDACachingAllocator.cpp:687 (most recent call first):\r\nframe #0: c10::Error::Error(c10::SourceLocation, std::string) + 0x42 (0x7f24eb4128b2 in ~/espnet/tools/venv/lib64/python3.7/site-packages/torch/lib/libc10.so)\r\nframe #1: c10::cuda::CUDACachingAllocator::raw_delete(void*) + 0xad2 (0x7f24eb664952 in ~/espnet/tools/venv/lib64/python3.7/site-packages/torch/lib/libc10_cuda.so)\r\nframe #2: c10::TensorImpl::release_resources() + 0x4d (0x7f24eb3fdb7d in ~/espnet/tools/venv/lib64/python3.7/site-packages/torch/lib/libc10.so)\r\nframe #3: <unknown function> + 0x60253a (0x7f2586d1953a in ~/espnet/tools/venv/lib64/python3.7/site-packages/torch/lib/libtorch_python.so)\r\nframe #4: <unknown function> + 0x6025e6 (0x7f2586d195e6 in ~/espnet/tools/venv/lib64/python3.7/site-packages/torch/lib/libtorch_python.so)\r\n<omitting python frames>\r\nframe #28: __libc_start_main + 0xea (0x7f259307b0ba in /lib64/libc.so.6)\r\nframe #29: _start + 0x2a (0x40066a in ~/espnet/tools/venv/bin/python3)\r\n\r\nterminate called after throwing an instance of 'c10::Errorterminate called after throwing an instance of ''\r\nc10::Error'\r\n  what():  CUDA error: an illegal memory access was encountered\r\nException raised from create_event_internal at /pytorch/c10/cuda/CUDACachingAllocator.cpp:687 (most recent call first):\r\nframe #0: c10::Error::Error(c10::SourceLocation, std::string) + 0x42 (0x7ff75b04e8b2 in ~/espnet/tools/venv/lib64/python3.7/site-packages/torch/lib/libc10.so)\r\nframe #1: c10::cuda::CUDACachingAllocator::raw_delete(void*) + 0xad2 (0x7ff75b2a0952 in ~/espnet/tools/venv/lib64/python3.7/site-packages/torch/lib/libc10_cuda.so)\r\nframe #2: c10::TensorImpl::release_resources() + 0x4d (0x7ff75b039b7d in ~/espnet/tools/venv/lib64/python3.7/site-packages/torch/lib/libc10.so)\r\nframe #3: <unknown function> + 0x60253a (0x7ff7f695553a in ~/espnet/tools/venv/lib64/python3.7/site-packages/torch/lib/libtorch_python.so)\r\nframe #4: <unknown function> + 0x6025e6 (0x7ff7f69555e6 in ~/espnet/tools/venv/lib64/python3.7/site-packages/torch/lib/libtorch_python.so)\r\n<omitting python frames>\r\nframe #28: __libc_start_main + 0xea (0x7ff802cb70ba in /lib64/libc.so.6)\r\nframe #29: _start + 0x2a (0x40066a in ~/espnet/tools/venv/bin/python3)\r\n\r\n  what():  CUDA error: an illegal memory access was encountered\r\nException raised from create_event_internal at /pytorch/c10/cuda/CUDACachingAllocator.cpp:687 (most recent call first):\r\nframe #0: c10::Error::Error(c10::SourceLocation, std::string) + 0x42 (0x7f04b2d288b2 in ~/espnet/tools/venv/lib64/python3.7/site-packages/torch/lib/libc10.so)\r\nframe #1: c10::cuda::CUDACachingAllocator::raw_delete(void*) + 0xad2 (0x7f04b2f7a952 in ~/espnet/tools/venv/lib64/python3.7/site-packages/torch/lib/libc10_cuda.so)\r\nframe #2: c10::TensorImpl::release_resources() + 0x4d (0x7f04b2d13b7d in ~/espnet/tools/venv/lib64/python3.7/site-packages/torch/lib/libc10.so)\r\nframe #3: <unknown function> + 0x60253a (0x7f054e62f53a in ~/espnet/tools/venv/lib64/python3.7/site-packages/torch/lib/libtorch_python.so)\r\nframe #4: <unknown function> + 0x6025e6 (0x7f054e62f5e6 in ~/espnet/tools/venv/lib64/python3.7/site-packages/torch/lib/libtorch_python.so)\r\n<omitting python frames>\r\nframe #28: __libc_start_main + 0xea (0x7f055a9910ba in /lib64/libc.so.6)\r\nframe #29: _start + 0x2a (0x40066a in ~/espnet/tools/venv/bin/python3)\r\n\r\nterminate called after throwing an instance of 'c10::Error'\r\n  what():  CUDA error: an illegal memory access was encountered\r\nException raised from create_event_internal at /pytorch/c10/cuda/CUDACachingAllocator.cpp:687 (most recent call first):\r\nframe #0: c10::Error::Error(c10::SourceLocation, std::string) + 0x42 (0x7f035ae458b2 in ~/espnet/tools/venv/lib64/python3.7/site-packages/torch/lib/libc10.so)\r\nframe #1: c10::cuda::CUDACachingAllocator::raw_delete(void*) + 0xad2 (0x7f035b097952 in ~/espnet/tools/venv/lib64/python3.7/site-packages/torch/lib/libc10_cuda.so)\r\nframe #2: c10::TensorImpl::release_resources() + 0x4d (0x7f035ae30b7d in ~/espnet/tools/venv/lib64/python3.7/site-packages/torch/lib/libc10.so)\r\nframe #3: <unknown function> + 0x60253a (0x7f03f674c53a in ~/espnet/tools/venv/lib64/python3.7/site-packages/torch/lib/libtorch_python.so)\r\nframe #4: <unknown function> + 0x6025e6 (0x7f03f674c5e6 in ~/espnet/tools/venv/lib64/python3.7/site-packages/torch/lib/libtorch_python.so)\r\n<omitting python frames>\r\nframe #28: __libc_start_main + 0xea (0x7f0402aae0ba in /lib64/libc.so.6)\r\nframe #29: _start + 0x2a (0x40066a in ~/espnet/tools/venv/bin/python3)\r\n\r\nterminate called after throwing an instance of 'c10::Error'\r\n  what():  CUDA error: an illegal memory access was encountered\r\nException raised from create_event_internal at /pytorch/c10/cuda/CUDACachingAllocator.cpp:687 (most recent call first):\r\nframe #0: c10::Error::Error(c10::SourceLocation, std::string) + 0x42 (0x7f70b8a198b2 in ~/espnet/tools/venv/lib64/python3.7/site-packages/torch/lib/libc10.so)\r\nframe #1: c10::cuda::CUDACachingAllocator::raw_delete(void*) + 0xad2 (0x7f70b8c6b952 in ~/espnet/tools/venv/lib64/python3.7/site-packages/torch/lib/libc10_cuda.so)\r\nframe #2: c10::TensorImpl::release_resources() + 0x4d (0x7f70b8a04b7d in ~/espnet/tools/venv/lib64/python3.7/site-packages/torch/lib/libc10.so)\r\nframe #3: <unknown function> + 0x60253a (0x7f715432053a in ~/espnet/tools/venv/lib64/python3.7/site-packages/torch/lib/libtorch_python.so)\r\nframe #4: <unknown function> + 0x6025e6 (0x7f71543205e6 in ~/espnet/tools/venv/lib64/python3.7/site-packages/torch/lib/libtorch_python.so)\r\n<omitting python frames>\r\nframe #28: __libc_start_main + 0xea (0x7f71606820ba in /lib64/libc.so.6)\r\nframe #29: _start + 0x2a (0x40066a in ~/espnet/tools/venv/bin/python3)\r\n\r\nTraceback (most recent call last):\r\n  File \"/usr/lib64/python3.7/runpy.py\", line 193, in _run_module_as_main\r\n    \"__main__\", mod_spec)\r\n  File \"/usr/lib64/python3.7/runpy.py\", line 85, in _run_code\r\n    exec(code, run_globals)\r\n  File \"~/espnet/espnet2/bin/asr_train.py\", line 23, in <module>\r\n    main()\r\n  File \"~/espnet/espnet2/bin/asr_train.py\", line 19, in main\r\n    ASRTask.main(cmd=cmd)\r\n  File \"~/espnet/espnet2/tasks/abs_task.py\", line 1052, in main\r\n    while not ProcessContext(processes, error_queues).join():\r\n  File \"~/espnet/tools/venv/lib64/python3.7/site-packages/torch/multiprocessing/spawn.py\", line 107, in join\r\n    (error_index, name)\r\nException: process 7 terminated with signal SIGABRT\r\n# Accounting: time=1118 threads=1\r\n# Ended (code 1) at Sat Aug 21 07:13:51 UTC 2021, elapsed time 1118 seconds\r\n```\r\n\r\nTo mention more, this should not be a hardware error. I tried three different machines, which with 8 V100s, but all of them raise this error. In addition, when I changed the encoder part to other configurations, they work well....", "reactions": {"url": "https://api.github.com/repos/espnet/espnet/issues/3496/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/espnet/espnet/issues/3496/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/espnet/espnet/issues/3428", "repository_url": "https://api.github.com/repos/espnet/espnet", "labels_url": "https://api.github.com/repos/espnet/espnet/issues/3428/labels{/name}", "comments_url": "https://api.github.com/repos/espnet/espnet/issues/3428/comments", "events_url": "https://api.github.com/repos/espnet/espnet/issues/3428/events", "html_url": "https://github.com/espnet/espnet/issues/3428", "id": 968081004, "node_id": "MDU6SXNzdWU5NjgwODEwMDQ=", "number": 3428, "title": "ESPnet SSE Demonstration.ipynb: TypeError: Expected 'Iterator' ...", "user": {"login": "r9y9", "id": 1220272, "node_id": "MDQ6VXNlcjEyMjAyNzI=", "avatar_url": "https://avatars.githubusercontent.com/u/1220272?v=4", "gravatar_id": "", "url": "https://api.github.com/users/r9y9", "html_url": "https://github.com/r9y9", "followers_url": "https://api.github.com/users/r9y9/followers", "following_url": "https://api.github.com/users/r9y9/following{/other_user}", "gists_url": "https://api.github.com/users/r9y9/gists{/gist_id}", "starred_url": "https://api.github.com/users/r9y9/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/r9y9/subscriptions", "organizations_url": "https://api.github.com/users/r9y9/orgs", "repos_url": "https://api.github.com/users/r9y9/repos", "events_url": "https://api.github.com/users/r9y9/events{/privacy}", "received_events_url": "https://api.github.com/users/r9y9/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 777173273, "node_id": "MDU6TGFiZWw3NzcxNzMyNzM=", "url": "https://api.github.com/repos/espnet/espnet/labels/Bug", "name": "Bug", "color": "ee0701", "default": false, "description": "bug should be fixed"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2021-08-12T05:24:33Z", "updated_at": "2021-08-17T08:20:33Z", "closed_at": "2021-08-17T08:20:33Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "**Describe the bug**\r\nA clear and concise description of what the bug is.\r\n\r\nESPnet SSE Demonstration does not work on colab.\r\n\r\nESPnet SSE Demonstration.ipynb: https://colab.research.google.com/drive/1fjRJCh96SoYLZPRxsjF9VDv4Q2VoIckI?usp=sharing\r\n\r\nI got errors while running the noteobok on colab:\r\n\r\n```\r\nTypeError                                 Traceback (most recent call last)\r\n<ipython-input-4-6a1109169182> in <module>()\r\n      3 import sys\r\n      4 import soundfile\r\n----> 5 from espnet2.bin.enh_inference import SeparateSpeech\r\n      6 \r\n      7 \r\n\r\n6 frames\r\n/usr/local/lib/python3.7/dist-packages/torch/utils/data/_typing.py in _dp_init_subclass(sub_cls, *args, **kwargs)\r\n    369                      return_hint.__origin__ == collections.abc.Iterator)):\r\n    370                 raise TypeError(\"Expected 'Iterator' as the return annotation for `__iter__` of {}\"\r\n--> 371                                 \", but found {}\".format(sub_cls.__name__, _type_repr(hints['return'])))\r\n    372             data_type = return_hint.__args__[0]\r\n    373             if not issubtype(data_type, sub_cls.type.param):\r\n\r\nTypeError: Expected 'Iterator' as the return annotation for `__iter__` of IterableESPnetDataset, but found typing.Iterable[typing.Tuple[typing.Union[str, int], typing.Dict[str, numpy.ndarray]]]\r\n```\r\n\r\nCould anyone help to solve the issue?\r\n\r\n**Basic environments:**\r\n\r\nGoogle colab\r\n \r\n**Environments from `torch.utils.collect_env`:*\r\n\r\n```\r\nCollecting environment information...\r\nPyTorch version: 1.9.0+cu102\r\nIs debug build: False\r\nCUDA used to build PyTorch: 10.2\r\nROCM used to build PyTorch: N/A\r\n\r\nOS: Ubuntu 18.04.5 LTS (x86_64)\r\nGCC version: (Ubuntu 7.5.0-3ubuntu1~18.04) 7.5.0\r\nClang version: 6.0.0-1ubuntu2 (tags/RELEASE_600/final)\r\nCMake version: version 3.12.0\r\nLibc version: glibc-2.26\r\n\r\nPython version: 3.7 (64-bit runtime)\r\nPython platform: Linux-5.4.104+-x86_64-with-Ubuntu-18.04-bionic\r\nIs CUDA available: True\r\nCUDA runtime version: 11.0.221\r\nGPU models and configuration: GPU 0: Tesla T4\r\nNvidia driver version: 460.32.03\r\ncuDNN version: Probably one of the following:\r\n/usr/lib/x86_64-linux-gnu/libcudnn.so.7.6.5\r\n/usr/lib/x86_64-linux-gnu/libcudnn.so.8.0.4\r\n/usr/lib/x86_64-linux-gnu/libcudnn_adv_infer.so.8.0.4\r\n/usr/lib/x86_64-linux-gnu/libcudnn_adv_train.so.8.0.4\r\n/usr/lib/x86_64-linux-gnu/libcudnn_cnn_infer.so.8.0.4\r\n/usr/lib/x86_64-linux-gnu/libcudnn_cnn_train.so.8.0.4\r\n/usr/lib/x86_64-linux-gnu/libcudnn_ops_infer.so.8.0.4\r\n/usr/lib/x86_64-linux-gnu/libcudnn_ops_train.so.8.0.4\r\nHIP runtime version: N/A\r\nMIOpen runtime version: N/A\r\n\r\nVersions of relevant libraries:\r\n[pip3] numpy==1.19.5\r\n[pip3] pytorch-wpe==0.0.1\r\n[pip3] torch==1.9.0+cu102\r\n[pip3] torch-complex==0.2.1\r\n[pip3] torchsummary==1.5.1\r\n[pip3] torchtext==0.10.0\r\n[pip3] torchvision==0.10.0+cu102\r\n[conda] Could not collect\r\n```\r\n\r\n**Task information:**\r\n - Task: SE\r\n - Recipe: ESPnet SSE Demonstration.ipynb\r\n - ESPnet 2\r\n\r\n**To Reproduce**\r\nSteps to reproduce the behavior:\r\n\r\n1. Open ESPnet SSE Demonstration.ipynb on colab\r\n2. Run by \"Enhance the single-channel real noisy speech in CHiME4\"", "reactions": {"url": "https://api.github.com/repos/espnet/espnet/issues/3428/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/espnet/espnet/issues/3428/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/espnet/espnet/issues/3418", "repository_url": "https://api.github.com/repos/espnet/espnet", "labels_url": "https://api.github.com/repos/espnet/espnet/issues/3418/labels{/name}", "comments_url": "https://api.github.com/repos/espnet/espnet/issues/3418/comments", "events_url": "https://api.github.com/repos/espnet/espnet/issues/3418/events", "html_url": "https://github.com/espnet/espnet/issues/3418", "id": 965297679, "node_id": "MDU6SXNzdWU5NjUyOTc2Nzk=", "number": 3418, "title": "espnet1 vivos recipe RNNT training error", "user": {"login": "sairitwik27", "id": 66405406, "node_id": "MDQ6VXNlcjY2NDA1NDA2", "avatar_url": "https://avatars.githubusercontent.com/u/66405406?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sairitwik27", "html_url": "https://github.com/sairitwik27", "followers_url": "https://api.github.com/users/sairitwik27/followers", "following_url": "https://api.github.com/users/sairitwik27/following{/other_user}", "gists_url": "https://api.github.com/users/sairitwik27/gists{/gist_id}", "starred_url": "https://api.github.com/users/sairitwik27/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sairitwik27/subscriptions", "organizations_url": "https://api.github.com/users/sairitwik27/orgs", "repos_url": "https://api.github.com/users/sairitwik27/repos", "events_url": "https://api.github.com/users/sairitwik27/events{/privacy}", "received_events_url": "https://api.github.com/users/sairitwik27/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 777173273, "node_id": "MDU6TGFiZWw3NzcxNzMyNzM=", "url": "https://api.github.com/repos/espnet/espnet/labels/Bug", "name": "Bug", "color": "ee0701", "default": false, "description": "bug should be fixed"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2021-08-10T19:34:42Z", "updated_at": "2021-08-11T10:09:59Z", "closed_at": "2021-08-11T10:09:59Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi,\r\nI am trying to run the vivos asr1 recipe in espnet1 with the following train.yaml config file(it's the default file given):\r\n\r\n\r\nbatch-size: 30\r\nmaxlen-in: 800\r\nmaxlen-out: 150\r\n\r\ncriterion: loss\r\nearly-stop-criterion: \"validation/main/loss\"\r\nsortagrad: 0\r\nopt: noam\r\ntransformer-lr: 10.0\r\ntransformer-warmup-steps: 8000\r\nepochs: 30\r\npatience: 0\r\naccum-grad: 4\r\ngrad-clip: 5.0\r\n\r\ncustom-enc-positional-encoding-type: rel_pos\r\ncustom-enc-self-attn-type: rel_self_attn\r\n\r\netype: custom\r\ncustom-enc-input-layer: vgg2l\r\nenc-block-arch:\r\n        - type: conformer\r\n          d_hidden: 320\r\n          d_ff: 320\r\n          heads: 4\r\n          macaron_style: True\r\n          use_conv_mod: True\r\n          conv_mod_kernel: 15\r\n          dropout-rate: 0.4\r\n          pos-dropout-rate: 0.4\r\n          att-dropout-rate: 0.4\r\nenc-block-repeat: 8\r\n\r\ndtype: lstm\r\ndlayers: 1\r\ndec-embed-dim: 512\r\ndunits: 512\r\ndropout-rate-decoder: 0.2\r\ndropout-rate-embed-decoder: 0.2\r\n\r\njoint-dim: 128\r\nmodel-module: \"espnet.nets.pytorch_backend.e2e_asr_transducer:E2E\"\r\n\r\nI encounter the following error. I have tried other transducer config files in the directory as well and I get the same error.\r\n\r\nasr_train.py: error: argument --etype: invalid choice: 'custom' (choose from 'transformer', 'lstm', 'blstm', 'lstmp', 'blstmp', 'vgglstmp', 'vggblstmp', 'vgglstm', 'vggblstm', 'gru', 'bgru', 'grup', 'bgrup', 'vgggrup', 'vggbgrup', 'vgggru', 'vggbgru')", "reactions": {"url": "https://api.github.com/repos/espnet/espnet/issues/3418/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/espnet/espnet/issues/3418/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/espnet/espnet/issues/3414", "repository_url": "https://api.github.com/repos/espnet/espnet", "labels_url": "https://api.github.com/repos/espnet/espnet/issues/3414/labels{/name}", "comments_url": "https://api.github.com/repos/espnet/espnet/issues/3414/comments", "events_url": "https://api.github.com/repos/espnet/espnet/issues/3414/events", "html_url": "https://github.com/espnet/espnet/issues/3414", "id": 963466049, "node_id": "MDU6SXNzdWU5NjM0NjYwNDk=", "number": 3414, "title": "\"cannot pickle 'SwigPyObject' object\" error when using multhi-thread", "user": {"login": "shinotk15", "id": 15014204, "node_id": "MDQ6VXNlcjE1MDE0MjA0", "avatar_url": "https://avatars.githubusercontent.com/u/15014204?v=4", "gravatar_id": "", "url": "https://api.github.com/users/shinotk15", "html_url": "https://github.com/shinotk15", "followers_url": "https://api.github.com/users/shinotk15/followers", "following_url": "https://api.github.com/users/shinotk15/following{/other_user}", "gists_url": "https://api.github.com/users/shinotk15/gists{/gist_id}", "starred_url": "https://api.github.com/users/shinotk15/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/shinotk15/subscriptions", "organizations_url": "https://api.github.com/users/shinotk15/orgs", "repos_url": "https://api.github.com/users/shinotk15/repos", "events_url": "https://api.github.com/users/shinotk15/events{/privacy}", "received_events_url": "https://api.github.com/users/shinotk15/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 777173273, "node_id": "MDU6TGFiZWw3NzcxNzMyNzM=", "url": "https://api.github.com/repos/espnet/espnet/labels/Bug", "name": "Bug", "color": "ee0701", "default": false, "description": "bug should be fixed"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 8, "created_at": "2021-08-08T16:18:17Z", "updated_at": "2021-08-12T07:10:18Z", "closed_at": "2021-08-11T02:53:14Z", "author_association": "NONE", "active_lock_reason": null, "body": "I encounter \"TypeError: cannot pickle 'SwigPyObject' object\" when using ESPnet from my program.\r\nIs it possible to avoid the problem?\r\n\r\nWhat I did with my code was to insert the following single line;\r\nnbests = speech2text(utterance)\r\nIf I comment out this line, or if I do not enable multi-thread, the error does not occur.\r\n\r\nAs the preparation to use speech2text, the following lines are in my code.\r\n\r\nfrom espnet2.bin.asr_inference import Speech2Text\r\nfrom espnet_model_zoo.downloader import ModelDownloader\r\ntag = 'Shinji Watanabe/spgispeech_asr_train_asr_conformer6_n_fft512_hop_length256_raw_en_unnorm_bpe5000_valid.acc.ave'\r\nd = ModelDownloader()\r\nspeech2text = Speech2Text(\r\n    **d.download_and_unpack(tag),\r\n    device=\"cuda\",\r\n    minlenratio=0.0,\r\n    maxlenratio=0.0,\r\n    ctc_weight=0.3,\r\n    beam_size=10,\r\n    batch_size=0,\r\n    nbest=1\r\n)\r\n\r\nIn the espnet2/text/sentencepiece_tokenizer.py, I found the following memo. \r\nBut I'm not sure what I can do. Where do you use Swig in ESPnet?\r\n        # Don't build SentencePieceProcessor in __init__()\r\n        # because it's not picklable and it may cause following error,\r\n        # \"TypeError: can't pickle SwigPyObject objects\",\r\n\r\n\r\n\r\n$ conda env export | egrep 'pytorch|espnet'\r\n    - pytorch=1.9.0=py3.8_cuda11.1_cudnn8.0.5_0\r\n    - espnet==0.10.0\r\n    - espnet-model-zoo==0.0.0a30\r\n    - espnet-tts-frontend==0.0.3\r\n    - pytorch-wpe==0.0.1\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/espnet/espnet/issues/3414/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/espnet/espnet/issues/3414/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/espnet/espnet/issues/3388", "repository_url": "https://api.github.com/repos/espnet/espnet", "labels_url": "https://api.github.com/repos/espnet/espnet/issues/3388/labels{/name}", "comments_url": "https://api.github.com/repos/espnet/espnet/issues/3388/comments", "events_url": "https://api.github.com/repos/espnet/espnet/issues/3388/events", "html_url": "https://github.com/espnet/espnet/issues/3388", "id": 956839202, "node_id": "MDU6SXNzdWU5NTY4MzkyMDI=", "number": 3388, "title": "TTS BCE loss issue since labels is not modified exactly correctly in TTS Transformer", "user": {"login": "mechanicalsea", "id": 17514212, "node_id": "MDQ6VXNlcjE3NTE0MjEy", "avatar_url": "https://avatars.githubusercontent.com/u/17514212?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mechanicalsea", "html_url": "https://github.com/mechanicalsea", "followers_url": "https://api.github.com/users/mechanicalsea/followers", "following_url": "https://api.github.com/users/mechanicalsea/following{/other_user}", "gists_url": "https://api.github.com/users/mechanicalsea/gists{/gist_id}", "starred_url": "https://api.github.com/users/mechanicalsea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mechanicalsea/subscriptions", "organizations_url": "https://api.github.com/users/mechanicalsea/orgs", "repos_url": "https://api.github.com/users/mechanicalsea/repos", "events_url": "https://api.github.com/users/mechanicalsea/events{/privacy}", "received_events_url": "https://api.github.com/users/mechanicalsea/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 777173273, "node_id": "MDU6TGFiZWw3NzcxNzMyNzM=", "url": "https://api.github.com/repos/espnet/espnet/labels/Bug", "name": "Bug", "color": "ee0701", "default": false, "description": "bug should be fixed"}, {"id": 1680978630, "node_id": "MDU6TGFiZWwxNjgwOTc4NjMw", "url": "https://api.github.com/repos/espnet/espnet/labels/TTS", "name": "TTS", "color": "fbca04", "default": false, "description": "Text-to-speech"}, {"id": 1889036170, "node_id": "MDU6TGFiZWwxODg5MDM2MTcw", "url": "https://api.github.com/repos/espnet/espnet/labels/ESPnet2", "name": "ESPnet2", "color": "f2db68", "default": false, "description": ""}, {"id": 2288028984, "node_id": "MDU6TGFiZWwyMjg4MDI4OTg0", "url": "https://api.github.com/repos/espnet/espnet/labels/ESPnet1", "name": "ESPnet1", "color": "0a68d3", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2021-07-30T15:15:41Z", "updated_at": "2021-08-01T04:38:02Z", "closed_at": "2021-08-01T04:38:02Z", "author_association": "NONE", "active_lock_reason": null, "body": "**Describe the bug**\r\n\r\nIn [epsnet2/tts/transformer](https://github.com/espnet/espnet/blob/4c7442ad8faad6a6d975337563fe7e1a795c00cb/espnet2/tts/transformer.py#L428) and [espnet/nets/pytorch_backend/e2e_tts_transformer.py](https://github.com/espnet/espnet/blob/4c7442ad8faad6a6d975337563fe7e1a795c00cb/espnet/nets/pytorch_backend/e2e_tts_transformer.py#L756)\r\n\r\n```python\r\nlabels[:, -1] = 1.0  # make sure at least one frame has 1\r\n```\r\n\r\nIt is not sure the stop frames when `self.reductor_factor > 1` and should be modified as\r\n\r\n```python\r\nimport torch\r\n\r\nlabels = torch.scatter(labels, 1, (olens - 1).unsqueeze(1), 1.0)\r\n```\r\n\r\n**Example of the bug**\r\n\r\nGiven the case that \r\n\r\n```python\r\nolens = torch.LongTensor([5, 3])\r\nlabels = torch.FloatTensor([\r\n    [0, 0, 0, 0, 1],\r\n    [0, 0, 1, 1, 1],\r\n])\r\n```\r\n\r\nwhen `reduction_factor == 2`, follow the program, we would have\r\n\r\n```python\r\nolens = torch.LongTensor([4, 2])\r\nlabels = torch.FloatTensor([\r\n    [0, 0, 0, 1], # correct\r\n    [0, 0, 1, 1], # wrong, ``[0, 1, 1, 1]`` is correct\r\n])\r\n```\r\n\r\nHere, we can see `olens` and `labels` are **mismatched**. So this may cause error while computing BCE loss.\r\n\r\nWish the report can be helpful.", "reactions": {"url": "https://api.github.com/repos/espnet/espnet/issues/3388/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/espnet/espnet/issues/3388/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/espnet/espnet/issues/3363", "repository_url": "https://api.github.com/repos/espnet/espnet", "labels_url": "https://api.github.com/repos/espnet/espnet/issues/3363/labels{/name}", "comments_url": "https://api.github.com/repos/espnet/espnet/issues/3363/comments", "events_url": "https://api.github.com/repos/espnet/espnet/issues/3363/events", "html_url": "https://github.com/espnet/espnet/issues/3363", "id": 949631015, "node_id": "MDU6SXNzdWU5NDk2MzEwMTU=", "number": 3363, "title": "Accuracy Result Plots of egs/an4/asr1 examples are Different  in Two Different ESPNET Releases", "user": {"login": "Gouranga95", "id": 38810770, "node_id": "MDQ6VXNlcjM4ODEwNzcw", "avatar_url": "https://avatars.githubusercontent.com/u/38810770?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Gouranga95", "html_url": "https://github.com/Gouranga95", "followers_url": "https://api.github.com/users/Gouranga95/followers", "following_url": "https://api.github.com/users/Gouranga95/following{/other_user}", "gists_url": "https://api.github.com/users/Gouranga95/gists{/gist_id}", "starred_url": "https://api.github.com/users/Gouranga95/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Gouranga95/subscriptions", "organizations_url": "https://api.github.com/users/Gouranga95/orgs", "repos_url": "https://api.github.com/users/Gouranga95/repos", "events_url": "https://api.github.com/users/Gouranga95/events{/privacy}", "received_events_url": "https://api.github.com/users/Gouranga95/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 777173273, "node_id": "MDU6TGFiZWw3NzcxNzMyNzM=", "url": "https://api.github.com/repos/espnet/espnet/labels/Bug", "name": "Bug", "color": "ee0701", "default": false, "description": "bug should be fixed"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2021-07-21T11:57:41Z", "updated_at": "2021-07-21T21:53:18Z", "closed_at": "2021-07-21T21:53:18Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi,\r\nI was doing training using a older ESPNET release(60682e8823d8fb44bf54ef157ddf7ae2c8797fc0). Now I want to move to latest ESPNET. I installed it successfully. I ran the  egs/an4/asr1 and egs/yesno/asr1 and they ran well. But when I was comparing the train/valid acc plot of egs/an4/asr1 between old ESPNet and latest ESPNET, I found that this plot is different and acc of latest ESPNET is lesser than that of old ESPNET(about 15% drop in train/valid acc in latest ESPNET). CTC loss of the latest ESPNET is higher than the old ESPNET. Here the model architecure is same in both cases.\r\n\r\nCould you please help me why this is happening?", "reactions": {"url": "https://api.github.com/repos/espnet/espnet/issues/3363/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/espnet/espnet/issues/3363/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/espnet/espnet/issues/3337", "repository_url": "https://api.github.com/repos/espnet/espnet", "labels_url": "https://api.github.com/repos/espnet/espnet/issues/3337/labels{/name}", "comments_url": "https://api.github.com/repos/espnet/espnet/issues/3337/comments", "events_url": "https://api.github.com/repos/espnet/espnet/issues/3337/events", "html_url": "https://github.com/espnet/espnet/issues/3337", "id": 937593491, "node_id": "MDU6SXNzdWU5Mzc1OTM0OTE=", "number": 3337, "title": "Commonvoice fails due to issue in Pillow 8.3.0", "user": {"login": "blokje", "id": 851418, "node_id": "MDQ6VXNlcjg1MTQxOA==", "avatar_url": "https://avatars.githubusercontent.com/u/851418?v=4", "gravatar_id": "", "url": "https://api.github.com/users/blokje", "html_url": "https://github.com/blokje", "followers_url": "https://api.github.com/users/blokje/followers", "following_url": "https://api.github.com/users/blokje/following{/other_user}", "gists_url": "https://api.github.com/users/blokje/gists{/gist_id}", "starred_url": "https://api.github.com/users/blokje/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/blokje/subscriptions", "organizations_url": "https://api.github.com/users/blokje/orgs", "repos_url": "https://api.github.com/users/blokje/repos", "events_url": "https://api.github.com/users/blokje/events{/privacy}", "received_events_url": "https://api.github.com/users/blokje/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 777173273, "node_id": "MDU6TGFiZWw3NzcxNzMyNzM=", "url": "https://api.github.com/repos/espnet/espnet/labels/Bug", "name": "Bug", "color": "ee0701", "default": false, "description": "bug should be fixed"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2021-07-06T07:19:39Z", "updated_at": "2021-07-07T14:06:00Z", "closed_at": "2021-07-07T14:06:00Z", "author_association": "NONE", "active_lock_reason": null, "body": "**Describe the bug**\r\nPillow 8.3.0 introduces and issue which affect (at least) the commonvoice egs\r\n\r\nDuring some investigation I found the following github issue with the same problem and suggested solution. It seems that Pillow 8.3.0 is triggering this issue.\r\n\r\n- https://github.com/tensorflow/tensorflow/issues/46840\r\n- https://github.com/python-pillow/Pillow/issues/5571\r\n\r\nInstalling any other version than 8.3.0 solved the problem\r\n\r\n`pip install \"pillow!=8.3.0\"`\r\n\r\n**Basic environments:**\r\n - OS information: `Linux gpu03 5.4.0-1051-azure #53~18.04.1-Ubuntu SMP Fri Jun 18 22:32:58 UTC 2021 x86_64 x86_64 x86_64 GNU/Linux`\r\n- python version: `3.6.9 (default, Jan 26 2021, 15:33:00)  [GCC 8.4.0]`\r\n- espnet version: `espnet 0.10.0`\r\n- pytorch version: `pytorch 1.8.0`\r\n\r\n**Environments from `torch.utils.collect_env`:**\r\nCollecting environment information...\r\nPyTorch version: 1.8.0\r\nIs debug build: False\r\nCUDA used to build PyTorch: 10.2\r\nROCM used to build PyTorch: N/A\r\n\r\nOS: Ubuntu 18.04.5 LTS (x86_64)\r\nGCC version: (Ubuntu 7.5.0-3ubuntu1~18.04) 7.5.0\r\nClang version: Could not collect\r\nCMake version: version 3.10.2\r\n\r\nPython version: 3.6 (64-bit runtime)\r\nIs CUDA available: True\r\nCUDA runtime version: 9.1.85\r\nGPU models and configuration: GPU 0: Tesla K80\r\nNvidia driver version: 470.42.01\r\ncuDNN version: Probably one of the following:\r\n/usr/lib/x86_64-linux-gnu/libcudnn.so.8.2.1\r\n/usr/lib/x86_64-linux-gnu/libcudnn_adv_infer.so.8.2.1\r\n/usr/lib/x86_64-linux-gnu/libcudnn_adv_train.so.8.2.1\r\n/usr/lib/x86_64-linux-gnu/libcudnn_cnn_infer.so.8.2.1\r\n/usr/lib/x86_64-linux-gnu/libcudnn_cnn_train.so.8.2.1\r\n/usr/lib/x86_64-linux-gnu/libcudnn_ops_infer.so.8.2.1\r\n/usr/lib/x86_64-linux-gnu/libcudnn_ops_train.so.8.2.1\r\nHIP runtime version: N/A\r\nMIOpen runtime version: N/A\r\n\r\nVersions of relevant libraries:\r\n[pip3] numpy==1.19.5\r\n[pip3] pytorch-ranger==0.1.1\r\n[pip3] pytorch-wpe==0.0.1\r\n[pip3] torch==1.8.0\r\n[pip3] torch-complex==0.2.1\r\n[pip3] torch-optimizer==0.1.0\r\n[pip3] torchaudio==0.8.0\r\n[conda] Could not collect\r\n\r\n**Task information:**\r\n - Task: ASR\r\n - Recipe: Commonvoice\r\n - ESPnet1\r\n\r\n**To Reproduce**\r\nSteps to reproduce the behavior:\r\n1. move to a recipe directory, `cd egs/commonvoice/asr1`\r\n2. execute `run.sh --lang fy-NL`. The errors is introduced in step 4.\r\n3. specify the error log, e.g., `exp/train_fy_NL_pytorch_train_specaug/train.log`\r\n\r\n**Error logs**\r\n```\r\n2021-07-06 07:03:34,018 (asr_train:563) WARNING: Skip DEBUG/INFO messages\r\n2021-07-06 07:03:34,434 (ctc:37) WARNING: CTC was set to builtin due to PyTorch version.\r\n2021-07-06 07:03:34,435 (argument:79) WARNING: Using legacy_rel_pos and it will be deprecated in the future.\r\n2021-07-06 07:03:34,435 (argument:84) WARNING: Using legacy_rel_selfattn and it will be deprecated in the future.\r\n2021-07-06 07:03:37,098 (asr:503) WARNING: num. model params: 43,133,522 (num. trained: 43,133,522 (100.0%))\r\n2021-07-06 07:03:39,043 (io_utils:59) WARNING: [Experimental feature] Some preprocessing will be done for the mini-batch creation using Transformation(\r\n    0: TimeWarp(max_time_warp=5, inplace=True, mode=PIL)\r\n    1: FreqMask(F=30, n_mask=2, replace_with_zero=False, inplace=True)\r\n    2: TimeMask(T=40, n_mask=2, replace_with_zero=False, inplace=True))\r\n2021-07-06 07:03:39,052 (io_utils:59) WARNING: [Experimental feature] Some preprocessing will be done for the mini-batch creation using Transformation(\r\n    0: TimeWarp(max_time_warp=5, inplace=True, mode=PIL)\r\n    1: FreqMask(F=30, n_mask=2, replace_with_zero=False, inplace=True)\r\n    2: TimeMask(T=40, n_mask=2, replace_with_zero=False, inplace=True))\r\n2021-07-06 07:03:39,086 (transformation:138) CRITICAL: Catch a exception from 0th func: TimeWarp(max_time_warp=5, inplace=True, mode=PIL)\r\nException in main training loop: __array__() takes 1 positional argument but 2 were given\r\nTraceback (most recent call last):\r\n  File \"/opt/espnet/tools/venv/lib/python3.6/site-packages/chainer/training/trainer.py\", line 316, in run\r\n    update()\r\n  File \"/opt/espnet/espnet/asr/pytorch_backend/asr.py\", line 235, in update\r\n    self.update_core()\r\n  File \"/opt/espnet/espnet/asr/pytorch_backend/asr.py\", line 183, in update_core\r\n    batch = train_iter.next()\r\n  File \"/opt/espnet/espnet/utils/dataset.py\", line 58, in next\r\n    ret = next(self.iter)\r\n  File \"/opt/espnet/tools/venv/lib/python3.6/site-packages/torch/utils/data/dataloader.py\", line 517, in __next__\r\n    data = self._next_data()\r\n  File \"/opt/espnet/tools/venv/lib/python3.6/site-packages/torch/utils/data/dataloader.py\", line 557, in _next_data\r\n    data = self._dataset_fetcher.fetch(index)  # may raise StopIteration\r\n  File \"/opt/espnet/tools/venv/lib/python3.6/site-packages/torch/utils/data/_utils/fetch.py\", line 44, in fetch\r\n    data = [self.dataset[idx] for idx in possibly_batched_index]\r\n  File \"/opt/espnet/tools/venv/lib/python3.6/site-packages/torch/utils/data/_utils/fetch.py\", line 44, in <listcomp>\r\n    data = [self.dataset[idx] for idx in possibly_batched_index]\r\n  File \"/opt/espnet/espnet/utils/dataset.py\", line 33, in __getitem__\r\n    return self.transform(self.data[idx])\r\n  File \"/opt/espnet/espnet/asr/pytorch_backend/asr.py\", line 627, in <lambda>\r\n    dataset=TransformDataset(train, lambda data: converter([load_tr(data)])),\r\n  File \"/opt/espnet/espnet/utils/io_utils.py\", line 188, in __call__\r\n    return_batch[x_name], uttid_list, **self.preprocess_args\r\n  File \"/opt/espnet/espnet/transform/transformation.py\", line 135, in __call__\r\n    xs = [func(x, **_kwargs) for x in xs]\r\n  File \"/opt/espnet/espnet/transform/transformation.py\", line 135, in <listcomp>\r\n    xs = [func(x, **_kwargs) for x in xs]\r\n  File \"/opt/espnet/espnet/transform/spec_augment.py\", line 61, in __call__\r\n    return super().__call__(x)\r\n  File \"/opt/espnet/espnet/transform/functional.py\", line 37, in __call__\r\n    return self.func(x, **self.kwargs)\r\n  File \"/opt/espnet/espnet/transform/spec_augment.py\", line 35, in time_warp\r\n    x[:warped] = left\r\nWill finalize trainer extensions and updater before reraising the exception.\r\n```\r\n", "reactions": {"url": "https://api.github.com/repos/espnet/espnet/issues/3337/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/espnet/espnet/issues/3337/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/espnet/espnet/issues/3332", "repository_url": "https://api.github.com/repos/espnet/espnet", "labels_url": "https://api.github.com/repos/espnet/espnet/issues/3332/labels{/name}", "comments_url": "https://api.github.com/repos/espnet/espnet/issues/3332/comments", "events_url": "https://api.github.com/repos/espnet/espnet/issues/3332/events", "html_url": "https://github.com/espnet/espnet/issues/3332", "id": 935642708, "node_id": "MDU6SXNzdWU5MzU2NDI3MDg=", "number": 3332, "title": "No error when specifying a different model", "user": {"login": "misumisumi", "id": 24451978, "node_id": "MDQ6VXNlcjI0NDUxOTc4", "avatar_url": "https://avatars.githubusercontent.com/u/24451978?v=4", "gravatar_id": "", "url": "https://api.github.com/users/misumisumi", "html_url": "https://github.com/misumisumi", "followers_url": "https://api.github.com/users/misumisumi/followers", "following_url": "https://api.github.com/users/misumisumi/following{/other_user}", "gists_url": "https://api.github.com/users/misumisumi/gists{/gist_id}", "starred_url": "https://api.github.com/users/misumisumi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/misumisumi/subscriptions", "organizations_url": "https://api.github.com/users/misumisumi/orgs", "repos_url": "https://api.github.com/users/misumisumi/repos", "events_url": "https://api.github.com/users/misumisumi/events{/privacy}", "received_events_url": "https://api.github.com/users/misumisumi/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 777173273, "node_id": "MDU6TGFiZWw3NzcxNzMyNzM=", "url": "https://api.github.com/repos/espnet/espnet/labels/Bug", "name": "Bug", "color": "ee0701", "default": false, "description": "bug should be fixed"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2021-07-02T10:33:15Z", "updated_at": "2021-07-03T03:33:06Z", "closed_at": "2021-07-03T03:33:06Z", "author_association": "NONE", "active_lock_reason": null, "body": "**Describe the bug**\r\nI tried learning tacotron2 in `arctic/vc1`.\r\nDiscrepancies between the pre-training model and the configuration due to my not reading the shell script carefully.\r\nI specified `downloads/m_ailabs.judy.vtn_tts_pt` as pretrained-model and specified `conf/train_pytorch_transformer.tts_pt.single.yaml`. \r\nNormally, the model should not be loaded, but it was loaded and training proceeded.\r\nIs this behavior bug or expected?\r\nWhen I train model, the script not load pretrained_model without warning.\r\n\r\n**Task information:**\r\n - Task: [e.g., ASR, TTS, ST, ENH]\r\n - Recipe: [e.g. librispeech]\r\n - ESPnet1 or ESPnet2\r\n\r\n**To Reproduce**\r\nSteps to reproduce the behavior:\r\n1. move to a recipe directory, e.g., `cd egs/arctic/vc1`\r\n2. execute `run.sh` with specific arguments, e.g., `run.sh --stage 4 --norm_name judy --pretrained_model m_ailabs.judy.vtn_tts_pt --train_config conf/train_pytorch_tacotron2.tts_pt.single.yaml --tag vtn_tts_pt`\r\n3. specify the error log, e.g., `exp/clb_slt_pytorch_vtn_tts_pt/train.log`\r\n\r\n**Error logs**\r\nNo error.\r\n", "reactions": {"url": "https://api.github.com/repos/espnet/espnet/issues/3332/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/espnet/espnet/issues/3332/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/espnet/espnet/issues/3331", "repository_url": "https://api.github.com/repos/espnet/espnet", "labels_url": "https://api.github.com/repos/espnet/espnet/issues/3331/labels{/name}", "comments_url": "https://api.github.com/repos/espnet/espnet/issues/3331/comments", "events_url": "https://api.github.com/repos/espnet/espnet/issues/3331/events", "html_url": "https://github.com/espnet/espnet/issues/3331", "id": 935627705, "node_id": "MDU6SXNzdWU5MzU2Mjc3MDU=", "number": 3331, "title": "I could not see 'model.json' of tacotron2 in arctic/vc1.", "user": {"login": "misumisumi", "id": 24451978, "node_id": "MDQ6VXNlcjI0NDUxOTc4", "avatar_url": "https://avatars.githubusercontent.com/u/24451978?v=4", "gravatar_id": "", "url": "https://api.github.com/users/misumisumi", "html_url": "https://github.com/misumisumi", "followers_url": "https://api.github.com/users/misumisumi/followers", "following_url": "https://api.github.com/users/misumisumi/following{/other_user}", "gists_url": "https://api.github.com/users/misumisumi/gists{/gist_id}", "starred_url": "https://api.github.com/users/misumisumi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/misumisumi/subscriptions", "organizations_url": "https://api.github.com/users/misumisumi/orgs", "repos_url": "https://api.github.com/users/misumisumi/repos", "events_url": "https://api.github.com/users/misumisumi/events{/privacy}", "received_events_url": "https://api.github.com/users/misumisumi/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 777173273, "node_id": "MDU6TGFiZWw3NzcxNzMyNzM=", "url": "https://api.github.com/repos/espnet/espnet/labels/Bug", "name": "Bug", "color": "ee0701", "default": false, "description": "bug should be fixed"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2021-07-02T10:14:30Z", "updated_at": "2021-07-09T08:05:50Z", "closed_at": "2021-07-09T08:05:50Z", "author_association": "NONE", "active_lock_reason": null, "body": "**Describe the bug**\r\nThere is not a 'model.json' of tacotron2 of arctic/vc1.\r\nI downloaded using `pretrained_model_download.sh`.\r\nI could see `model.json` of vtn_tts_pt in tar.gz but I could not see `model.json` of taco2_tts_pt in tar.gz.\r\nI had same result manually install from url of google drive written in `pretrained_model_download.sh`\r\nDo you forget it ? or I should use any `model.json` in arctic/tts1?\r\n\r\n**To Reproduce**\r\nSteps to reproduce the behavior:\r\n1. move to a recipe directory, e.g., `cd egs/arctic/vc1`\r\n2. execute `run.sh` with specific arguments, e.g., `run.sh --stop_stage 4 --norm_name judy --pretrained_model m_ailabs.judy.taco2_tts_pt ...(and any pram)...`\r\n3. specify the error log, e.g., `exp/clb_slt_pytorch_taco2_tts_pt/train.log`\r\n\r\n**Error logs**\r\n2021-07-02 10:10:12,376 (asr_init:253) WARNING: model(s) found for pre-initialization\r\nTraceback (most recent call last):\r\n  File \"/workspace/espnet/egs/arctic/vc1/../../../espnet/bin/vc_train.py\", line 368, in <module>\r\n    main(sys.argv[1:])\r\n  File \"/workspace/espnet/egs/arctic/vc1/../../../espnet/bin/vc_train.py\", line 362, in main\r\n    train(args)\r\n  File \"/workspace/espnet/espnet/vc/pytorch_backend/vc.py\", line 308, in train\r\n    model = load_trained_modules(idim, odim, args, TTSInterface)\r\n  File \"/workspace/espnet/espnet/asr/pytorch_backend/asr_init.py\", line 260, in load_trained_modules\r\n    model_state_dict = get_trained_model_state_dict(model_path)\r\n  File \"/workspace/espnet/espnet/asr/pytorch_backend/asr_init.py\", line 201, in get_trained_model_state_dict\r\n    idim, odim, args = get_model_conf(model_path, conf_path)\r\n  File \"/workspace/espnet/espnet/asr/asr_utils.py\", line 693, in get_model_conf\r\n    with open(model_conf, \"rb\") as f:\r\nFileNotFoundError: [Errno 2] No such file or directory: 'downloads/m_ailabs.judy.taco2_tts_pt/m_ailabs.judy.taco2_tts_pt/model.json'\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/espnet/espnet/issues/3331/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/espnet/espnet/issues/3331/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/espnet/espnet/issues/3309", "repository_url": "https://api.github.com/repos/espnet/espnet", "labels_url": "https://api.github.com/repos/espnet/espnet/issues/3309/labels{/name}", "comments_url": "https://api.github.com/repos/espnet/espnet/issues/3309/comments", "events_url": "https://api.github.com/repos/espnet/espnet/issues/3309/events", "html_url": "https://github.com/espnet/espnet/issues/3309", "id": 926227104, "node_id": "MDU6SXNzdWU5MjYyMjcxMDQ=", "number": 3309, "title": "TypeError: Expected 'Iterator' as the return annotation for `__iter__` of IterableESPnetDataset, but found typing.Iterable[typing.Tuple[typing.Union[str, int], typing.Dict[str, numpy.ndarray]]]", "user": {"login": "vumichien", "id": 31467068, "node_id": "MDQ6VXNlcjMxNDY3MDY4", "avatar_url": "https://avatars.githubusercontent.com/u/31467068?v=4", "gravatar_id": "", "url": "https://api.github.com/users/vumichien", "html_url": "https://github.com/vumichien", "followers_url": "https://api.github.com/users/vumichien/followers", "following_url": "https://api.github.com/users/vumichien/following{/other_user}", "gists_url": "https://api.github.com/users/vumichien/gists{/gist_id}", "starred_url": "https://api.github.com/users/vumichien/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/vumichien/subscriptions", "organizations_url": "https://api.github.com/users/vumichien/orgs", "repos_url": "https://api.github.com/users/vumichien/repos", "events_url": "https://api.github.com/users/vumichien/events{/privacy}", "received_events_url": "https://api.github.com/users/vumichien/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 777173273, "node_id": "MDU6TGFiZWw3NzcxNzMyNzM=", "url": "https://api.github.com/repos/espnet/espnet/labels/Bug", "name": "Bug", "color": "ee0701", "default": false, "description": "bug should be fixed"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2021-06-21T13:36:55Z", "updated_at": "2021-06-22T00:49:24Z", "closed_at": "2021-06-22T00:49:24Z", "author_association": "NONE", "active_lock_reason": null, "body": "I got this error when running example in colab \r\nespnet==0.9.7 \r\nparallel_wavegan==0.4.8\r\n![image](https://user-images.githubusercontent.com/31467068/122771365-52967a00-d2e1-11eb-830a-c17658e4e3f6.png)\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/espnet/espnet/issues/3309/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/espnet/espnet/issues/3309/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/espnet/espnet/issues/3263", "repository_url": "https://api.github.com/repos/espnet/espnet", "labels_url": "https://api.github.com/repos/espnet/espnet/issues/3263/labels{/name}", "comments_url": "https://api.github.com/repos/espnet/espnet/issues/3263/comments", "events_url": "https://api.github.com/repos/espnet/espnet/issues/3263/events", "html_url": "https://github.com/espnet/espnet/issues/3263", "id": 908167634, "node_id": "MDU6SXNzdWU5MDgxNjc2MzQ=", "number": 3263, "title": "Error when \"--field -5\" is passed to espnet2.bin.tokenize_text", "user": {"login": "tjysdsg", "id": 21212505, "node_id": "MDQ6VXNlcjIxMjEyNTA1", "avatar_url": "https://avatars.githubusercontent.com/u/21212505?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tjysdsg", "html_url": "https://github.com/tjysdsg", "followers_url": "https://api.github.com/users/tjysdsg/followers", "following_url": "https://api.github.com/users/tjysdsg/following{/other_user}", "gists_url": "https://api.github.com/users/tjysdsg/gists{/gist_id}", "starred_url": "https://api.github.com/users/tjysdsg/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tjysdsg/subscriptions", "organizations_url": "https://api.github.com/users/tjysdsg/orgs", "repos_url": "https://api.github.com/users/tjysdsg/repos", "events_url": "https://api.github.com/users/tjysdsg/events{/privacy}", "received_events_url": "https://api.github.com/users/tjysdsg/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 777173273, "node_id": "MDU6TGFiZWw3NzcxNzMyNzM=", "url": "https://api.github.com/repos/espnet/espnet/labels/Bug", "name": "Bug", "color": "ee0701", "default": false, "description": "bug should be fixed"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2021-06-01T10:55:53Z", "updated_at": "2021-06-01T17:09:27Z", "closed_at": "2021-06-01T17:09:27Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "**Describe the bug**\r\n\r\n```\r\nD:\\Anaconda\\python.exe D:/repos/espnet/espnet2/bin/tokenize_text.py --token_type phn --input tmp.txt --output tmp.phn --field -2 --cleaner none --g2p g2p_en --add_symbol '$<blank>:0' --add_symbol '<oov>:1' --add_symbol '<sos/eos>:-1' --write_vocabulary false --keep_all_fields true\r\nTraceback (most recent call last):\r\n  File \"D:/repos/espnet/espnet2/bin/tokenize_text.py\", line 297, in <module>\r\n    main()\r\n  File \"D:/repos/espnet/espnet2/bin/tokenize_text.py\", line 293, in main\r\n    tokenize(**kwargs)\r\n  File \"D:/repos/espnet/espnet2/bin/tokenize_text.py\", line 112, in tokenize\r\n    field = field2slice(field)\r\n  File \"D:/repos/espnet/espnet2/bin/tokenize_text.py\", line 59, in field2slice\r\n    slic = slice(s1 - 1, s2)\r\nTypeError: unsupported operand type(s) for -: 'NoneType' and 'int'\r\n```\r\nThis is because of a missing None check [here](https://github.com/espnet/espnet/blob/master/espnet2/bin/tokenize_text.py#L59)\r\n", "reactions": {"url": "https://api.github.com/repos/espnet/espnet/issues/3263/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/espnet/espnet/issues/3263/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/espnet/espnet/issues/3250", "repository_url": "https://api.github.com/repos/espnet/espnet", "labels_url": "https://api.github.com/repos/espnet/espnet/issues/3250/labels{/name}", "comments_url": "https://api.github.com/repos/espnet/espnet/issues/3250/comments", "events_url": "https://api.github.com/repos/espnet/espnet/issues/3250/events", "html_url": "https://github.com/espnet/espnet/issues/3250", "id": 906717021, "node_id": "MDU6SXNzdWU5MDY3MTcwMjE=", "number": 3250, "title": "Typo in espnet2/tts/transformer.py", "user": {"login": "Hiroshiba", "id": 4987327, "node_id": "MDQ6VXNlcjQ5ODczMjc=", "avatar_url": "https://avatars.githubusercontent.com/u/4987327?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Hiroshiba", "html_url": "https://github.com/Hiroshiba", "followers_url": "https://api.github.com/users/Hiroshiba/followers", "following_url": "https://api.github.com/users/Hiroshiba/following{/other_user}", "gists_url": "https://api.github.com/users/Hiroshiba/gists{/gist_id}", "starred_url": "https://api.github.com/users/Hiroshiba/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Hiroshiba/subscriptions", "organizations_url": "https://api.github.com/users/Hiroshiba/orgs", "repos_url": "https://api.github.com/users/Hiroshiba/repos", "events_url": "https://api.github.com/users/Hiroshiba/events{/privacy}", "received_events_url": "https://api.github.com/users/Hiroshiba/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 777173273, "node_id": "MDU6TGFiZWw3NzcxNzMyNzM=", "url": "https://api.github.com/repos/espnet/espnet/labels/Bug", "name": "Bug", "color": "ee0701", "default": false, "description": "bug should be fixed"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2021-05-30T10:58:08Z", "updated_at": "2021-05-31T05:50:53Z", "closed_at": "2021-05-31T05:50:53Z", "author_association": "NONE", "active_lock_reason": null, "body": "**Describe the bug**\r\nI found a typo in this line.\r\nhttps://github.com/espnet/espnet/blob/4a60d8f39e9872b345bb3b32cf227832985b661d/espnet2/tts/transformer.py#L364\r\n`init_dec_alpha=init_dec_alpha,` isn't it?\r\n\r\n**Task information:**\r\n - Task: TTS\r\n - ESPnet2\r\n", "reactions": {"url": "https://api.github.com/repos/espnet/espnet/issues/3250/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/espnet/espnet/issues/3250/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/espnet/espnet/issues/3246", "repository_url": "https://api.github.com/repos/espnet/espnet", "labels_url": "https://api.github.com/repos/espnet/espnet/issues/3246/labels{/name}", "comments_url": "https://api.github.com/repos/espnet/espnet/issues/3246/comments", "events_url": "https://api.github.com/repos/espnet/espnet/issues/3246/events", "html_url": "https://github.com/espnet/espnet/issues/3246", "id": 905050632, "node_id": "MDU6SXNzdWU5MDUwNTA2MzI=", "number": 3246, "title": "ver0.9.9      espnet2/train/trainer.py:616  indenting error", "user": {"login": "zhangzhengyi-sogou", "id": 77726109, "node_id": "MDQ6VXNlcjc3NzI2MTA5", "avatar_url": "https://avatars.githubusercontent.com/u/77726109?v=4", "gravatar_id": "", "url": "https://api.github.com/users/zhangzhengyi-sogou", "html_url": "https://github.com/zhangzhengyi-sogou", "followers_url": "https://api.github.com/users/zhangzhengyi-sogou/followers", "following_url": "https://api.github.com/users/zhangzhengyi-sogou/following{/other_user}", "gists_url": "https://api.github.com/users/zhangzhengyi-sogou/gists{/gist_id}", "starred_url": "https://api.github.com/users/zhangzhengyi-sogou/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/zhangzhengyi-sogou/subscriptions", "organizations_url": "https://api.github.com/users/zhangzhengyi-sogou/orgs", "repos_url": "https://api.github.com/users/zhangzhengyi-sogou/repos", "events_url": "https://api.github.com/users/zhangzhengyi-sogou/events{/privacy}", "received_events_url": "https://api.github.com/users/zhangzhengyi-sogou/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 777173273, "node_id": "MDU6TGFiZWw3NzcxNzMyNzM=", "url": "https://api.github.com/repos/espnet/espnet/labels/Bug", "name": "Bug", "color": "ee0701", "default": false, "description": "bug should be fixed"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2021-05-28T09:36:22Z", "updated_at": "2021-05-28T13:05:27Z", "closed_at": "2021-05-28T09:58:54Z", "author_association": "NONE", "active_lock_reason": null, "body": "An indenting error in 0.9.9 version  :\r\nespnet2/train/trainer.py:616\r\nThe statement \"optimizer.zero_grad()\" should not be in the scope of \"else\" but in the scope of \"if iiter % accum_grad == 0:\"\r\n\r\n\r\n\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/espnet/espnet/issues/3246/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/espnet/espnet/issues/3246/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/espnet/espnet/issues/3232", "repository_url": "https://api.github.com/repos/espnet/espnet", "labels_url": "https://api.github.com/repos/espnet/espnet/issues/3232/labels{/name}", "comments_url": "https://api.github.com/repos/espnet/espnet/issues/3232/comments", "events_url": "https://api.github.com/repos/espnet/espnet/issues/3232/events", "html_url": "https://github.com/espnet/espnet/issues/3232", "id": 897996600, "node_id": "MDU6SXNzdWU4OTc5OTY2MDA=", "number": 3232, "title": "espnet2 ctc segmentation", "user": {"login": "abnerLing", "id": 43106139, "node_id": "MDQ6VXNlcjQzMTA2MTM5", "avatar_url": "https://avatars.githubusercontent.com/u/43106139?v=4", "gravatar_id": "", "url": "https://api.github.com/users/abnerLing", "html_url": "https://github.com/abnerLing", "followers_url": "https://api.github.com/users/abnerLing/followers", "following_url": "https://api.github.com/users/abnerLing/following{/other_user}", "gists_url": "https://api.github.com/users/abnerLing/gists{/gist_id}", "starred_url": "https://api.github.com/users/abnerLing/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/abnerLing/subscriptions", "organizations_url": "https://api.github.com/users/abnerLing/orgs", "repos_url": "https://api.github.com/users/abnerLing/repos", "events_url": "https://api.github.com/users/abnerLing/events{/privacy}", "received_events_url": "https://api.github.com/users/abnerLing/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 777173273, "node_id": "MDU6TGFiZWw3NzcxNzMyNzM=", "url": "https://api.github.com/repos/espnet/espnet/labels/Bug", "name": "Bug", "color": "ee0701", "default": false, "description": "bug should be fixed"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2021-05-21T12:27:07Z", "updated_at": "2022-08-23T09:14:13Z", "closed_at": "2022-08-23T09:14:13Z", "author_association": "NONE", "active_lock_reason": null, "body": "I've tried testing out the CTC segmentation example with ESPnet2 and I get the same error of \"No such file or directory: 'data/nlsyms.txt'.\"\r\nThis occurs when using the below script and also when running the exact same python code in the example.\r\n`espnet2/bin/asr_align.py  --asr_train_config config.yaml --asr_model_file model.pth --audio audio.wav --text text.txt --output segments`\r\n\r\n\r\n`\r\nTraceback (most recent call last):\r\n  File \"espnet2/bin/asr_align.py\", line 827, in <module>\r\n    main()\r\n  File \"espnet2/bin/asr_align.py\", line 823, in main\r\n    ctc_align(**kwargs)\r\n  File \"espnet2/bin/asr_align.py\", line 632, in ctc_align\r\n    aligner = CTCSegmentation(**model, **kwargs)\r\n  File \"espnet2/bin/asr_align.py\", line 239, in __init__\r\n    self.preprocess_fn = ASRTask.build_preprocess_fn(asr_train_args, False)\r\n  File \"/home/abner/work/espnet/espnet2/tasks/asr.py\", line 293, in build_preprocess_fn\r\n    retval = CommonPreprocessor(\r\n  File \"/home/abner/work/espnet/espnet2/train/preprocessor.py\", line 161, in __init__\r\n    self.tokenizer = build_tokenizer(\r\n  File \"/home/abner/work/espnet/espnet2/text/build_tokenizer.py\", line 46, in build_tokenizer\r\n    return CharTokenizer(\r\n  File \"/home/abner/work/espnet/espnet2/text/char_tokenizer.py\", line 24, in __init__\r\n    with non_linguistic_symbols.open(\"r\", encoding=\"utf-8\") as f:\r\n  File \"/home/abner/anaconda3/envs/es/lib/python3.8/pathlib.py\", line 1222, in open\r\n    return io.open(self, mode, buffering, encoding, errors, newline,\r\n  File \"/home/abner/anaconda3/envs/es/lib/python3.8/pathlib.py\", line 1078, in _opener\r\n    return self._accessor.open(self, flags, mode)\r\nFileNotFoundError: [Errno 2] No such file or directory: 'data/nlsyms.txt'\r\n`\r\n\r\n**Basic environments:**\r\n - OS information: Ubuntu 20.04\r\n - python version: 3.8\r\n - espnet version: 0.9.9\r\n - Git hash [a9169489a5bc570ebbfe6f343aadca343dfeb08b]\r\n - Commit date Fri May 21 20:25:28 2021 +0900\r\n - pytorch version: 1.8.0\r\n \r\n", "reactions": {"url": "https://api.github.com/repos/espnet/espnet/issues/3232/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/espnet/espnet/issues/3232/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/espnet/espnet/issues/3231", "repository_url": "https://api.github.com/repos/espnet/espnet", "labels_url": "https://api.github.com/repos/espnet/espnet/issues/3231/labels{/name}", "comments_url": "https://api.github.com/repos/espnet/espnet/issues/3231/comments", "events_url": "https://api.github.com/repos/espnet/espnet/issues/3231/events", "html_url": "https://github.com/espnet/espnet/issues/3231", "id": 897947672, "node_id": "MDU6SXNzdWU4OTc5NDc2NzI=", "number": 3231, "title": "No module named 'espnet2.enh.decoder'", "user": {"login": "nellorebhanuteja", "id": 64081481, "node_id": "MDQ6VXNlcjY0MDgxNDgx", "avatar_url": "https://avatars.githubusercontent.com/u/64081481?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nellorebhanuteja", "html_url": "https://github.com/nellorebhanuteja", "followers_url": "https://api.github.com/users/nellorebhanuteja/followers", "following_url": "https://api.github.com/users/nellorebhanuteja/following{/other_user}", "gists_url": "https://api.github.com/users/nellorebhanuteja/gists{/gist_id}", "starred_url": "https://api.github.com/users/nellorebhanuteja/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nellorebhanuteja/subscriptions", "organizations_url": "https://api.github.com/users/nellorebhanuteja/orgs", "repos_url": "https://api.github.com/users/nellorebhanuteja/repos", "events_url": "https://api.github.com/users/nellorebhanuteja/events{/privacy}", "received_events_url": "https://api.github.com/users/nellorebhanuteja/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 777173273, "node_id": "MDU6TGFiZWw3NzcxNzMyNzM=", "url": "https://api.github.com/repos/espnet/espnet/labels/Bug", "name": "Bug", "color": "ee0701", "default": false, "description": "bug should be fixed"}, {"id": 2179413355, "node_id": "MDU6TGFiZWwyMTc5NDEzMzU1", "url": "https://api.github.com/repos/espnet/espnet/labels/SE", "name": "SE", "color": "bfdadc", "default": false, "description": "Speech enhancement"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2021-05-21T11:17:34Z", "updated_at": "2021-06-02T11:33:04Z", "closed_at": "2021-06-02T11:33:04Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi\r\n\r\nI am trying to run the speech enhancement inference script given [here](https://github.com/espnet/espnet_model_zoo#speech-separation).\r\n\r\nHowever, I am getting the following error:\r\n```bash\r\nModuleNotFoundError: No module named 'espnet2.enh.decoder'\r\n```\r\n\r\nI have checked manually for decoder.py, but it doesn't exist.\r\nI have checked in espnet 0.9.9 and 0.9.7 as well.", "reactions": {"url": "https://api.github.com/repos/espnet/espnet/issues/3231/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/espnet/espnet/issues/3231/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/espnet/espnet/issues/3228", "repository_url": "https://api.github.com/repos/espnet/espnet", "labels_url": "https://api.github.com/repos/espnet/espnet/issues/3228/labels{/name}", "comments_url": "https://api.github.com/repos/espnet/espnet/issues/3228/comments", "events_url": "https://api.github.com/repos/espnet/espnet/issues/3228/events", "html_url": "https://github.com/espnet/espnet/issues/3228", "id": 897665014, "node_id": "MDU6SXNzdWU4OTc2NjUwMTQ=", "number": 3228, "title": "ESPNet2 for aishell at stage 9", "user": {"login": "im73", "id": 36858700, "node_id": "MDQ6VXNlcjM2ODU4NzAw", "avatar_url": "https://avatars.githubusercontent.com/u/36858700?v=4", "gravatar_id": "", "url": "https://api.github.com/users/im73", "html_url": "https://github.com/im73", "followers_url": "https://api.github.com/users/im73/followers", "following_url": "https://api.github.com/users/im73/following{/other_user}", "gists_url": "https://api.github.com/users/im73/gists{/gist_id}", "starred_url": "https://api.github.com/users/im73/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/im73/subscriptions", "organizations_url": "https://api.github.com/users/im73/orgs", "repos_url": "https://api.github.com/users/im73/repos", "events_url": "https://api.github.com/users/im73/events{/privacy}", "received_events_url": "https://api.github.com/users/im73/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 777173273, "node_id": "MDU6TGFiZWw3NzcxNzMyNzM=", "url": "https://api.github.com/repos/espnet/espnet/labels/Bug", "name": "Bug", "color": "ee0701", "default": false, "description": "bug should be fixed"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2021-05-21T04:27:15Z", "updated_at": "2021-05-21T06:44:10Z", "closed_at": "2021-05-21T06:44:10Z", "author_association": "NONE", "active_lock_reason": null, "body": "**Describe the bug**\r\nI use ESPnet2 for aishell, but with my own datasets. Some configuration are as follows:\r\n- lm_config conf/train_lm_transformer.yaml   \r\n- asr_config conf/train_asr_transformer.yaml(**the default is train_asr_conformer.yaml,Because I encountered some problems in use, so I modified it**)\r\n- inference_config conf/decode_asr_rnn.yaml \r\nThe problems I encountered are as follows:\r\n1. when I'm training asr at stage 10, the log information in the log file show that\r\n<img width=\"1152\" alt=\"image\" src=\"https://user-images.githubusercontent.com/36858700/119076940-06c48c80-ba26-11eb-86af-b1d45eb80660.png\">\r\nthe \"There are no improvements in this epoch\" appeared in every epoch, and stop at epoch 20 (the max epoch used in my configuration is 200)but from the loss_ctc, loss_att and loss, we could find that the loss decreased \r\n<img width=\"507\" alt=\"image\" src=\"https://user-images.githubusercontent.com/36858700/119078371-a3882980-ba28-11eb-8525-bd857f8a532b.png\">\r\n<img width=\"491\" alt=\"image\" src=\"https://user-images.githubusercontent.com/36858700/119078377-a84cdd80-ba28-11eb-9c83-6a25ffa03dff.png\">\r\n<img width=\"479\" alt=\"image\" src=\"https://user-images.githubusercontent.com/36858700/119078386-aedb5500-ba28-11eb-9feb-4ba573b6fcfd.png\">\r\n\r\n but the car and wer always are 1.0:\r\n<img width=\"490\" alt=\"image\" src=\"https://user-images.githubusercontent.com/36858700/119080219-42625500-ba2c-11eb-8077-89af3495a51f.png\">\r\n\r\nIs there something wrong with my usage? \r\n2. If the audio time is too short in the training data(All the audio in the data set is only about 3s), will it lead to any problems ? or  will there be measures to deal with the situation of short time audio in the training progress\uff1fbecause judging from the current results, it has performed poorly,I wonder if it's my training problem or my training data.\r\n3. In the stage 10(training ars), will it load the trained lm_model in the stage 7(LM training) to train the whole asr model\uff1f\r\n**Basic environments:**\r\n - OS information: Linux 5.4.0-72-generic #80-Ubuntu SMP Mon Apr 12 17:35:00 UTC 2021 x86_64\r\n- python version: `3.6.13 |Anaconda, Inc.| (default, Feb 23 2021, 21:15:04)  [GCC 7.3.0]`\r\n- espnet version: `espnet 0.9.9`\r\n- pytorch version: `pytorch 1.4.0`\r\n - Git hash [e.g. b88e89fc7246fed4c2842b55baba884fe1b4ecc2]\r\n- Git hash: `55160fc20c48686808cbdf208919e668e3b1451a`\r\n  - Commit date: `Mon Apr 26 18:21:56 2021 -0400`\r\n ", "reactions": {"url": "https://api.github.com/repos/espnet/espnet/issues/3228/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/espnet/espnet/issues/3228/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/espnet/espnet/issues/3218", "repository_url": "https://api.github.com/repos/espnet/espnet", "labels_url": "https://api.github.com/repos/espnet/espnet/issues/3218/labels{/name}", "comments_url": "https://api.github.com/repos/espnet/espnet/issues/3218/comments", "events_url": "https://api.github.com/repos/espnet/espnet/issues/3218/events", "html_url": "https://github.com/espnet/espnet/issues/3218", "id": 892401131, "node_id": "MDU6SXNzdWU4OTI0MDExMzE=", "number": 3218, "title": "ERROR: Could not build wheels for fairscale which use PEP 517 and cannot be installed directly", "user": {"login": "mikaizhu", "id": 59464933, "node_id": "MDQ6VXNlcjU5NDY0OTMz", "avatar_url": "https://avatars.githubusercontent.com/u/59464933?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mikaizhu", "html_url": "https://github.com/mikaizhu", "followers_url": "https://api.github.com/users/mikaizhu/followers", "following_url": "https://api.github.com/users/mikaizhu/following{/other_user}", "gists_url": "https://api.github.com/users/mikaizhu/gists{/gist_id}", "starred_url": "https://api.github.com/users/mikaizhu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mikaizhu/subscriptions", "organizations_url": "https://api.github.com/users/mikaizhu/orgs", "repos_url": "https://api.github.com/users/mikaizhu/repos", "events_url": "https://api.github.com/users/mikaizhu/events{/privacy}", "received_events_url": "https://api.github.com/users/mikaizhu/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 777173273, "node_id": "MDU6TGFiZWw3NzcxNzMyNzM=", "url": "https://api.github.com/repos/espnet/espnet/labels/Bug", "name": "Bug", "color": "ee0701", "default": false, "description": "bug should be fixed"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2021-05-15T09:40:26Z", "updated_at": "2021-05-16T01:28:32Z", "closed_at": "2021-05-16T01:28:32Z", "author_association": "NONE", "active_lock_reason": null, "body": "**Describe the bug**\r\n\r\ni am using these command to build espnet!\r\n\r\n```\r\nconda create -n asr python=3.8\r\n\r\nconda activate asr\r\n\r\nconda install -c anaconda cudatoolkit=10.2\r\n\r\nconda install pytorch==1.8.0 torchvision==0.9.0 torchaudio==0.8.0 cudatoolkit=10.2 -c pytorch\r\n\r\nsudo apt-get install gcc\r\nsudo apt-get install cmake\r\nsudo apt-get install sox\r\nsudo apt-get install libsndfile1-dev\r\nsudo apt-get install ffmpeg\r\nsudo apt-get install flac\r\n\r\ncd espnet/tools\r\n\r\nCONDA_TOOLS_DIR=$(dirname ${CONDA_EXE})/..\r\n\r\n./setup_anaconda.sh ${CONDA_TOOLS_DIR} asr 3.8.8\r\n\r\nmake TH_VERSION=1.8.0 CUDA_VERSION=10.2\r\n```\r\n\r\n\r\n**Basic environments:**\r\n - OS information: [Linux zwl-desktop 5.8.0-53-generic #60~20.04.1-Ubuntu SMP Thu May 6 09:52:46 UTC 2021 x86_64 x86_64 x86_64 GNU/Linux]\r\n - python version: [3.8.0]\r\n - espnet version: [0.9.9]\r\n - pytorch version [1.8.0]\r\n \r\n\r\n```\r\nCollecting environment information...\r\nPyTorch version: 1.8.0\r\nIs debug build: No\r\nCUDA used to build PyTorch: 10.2\r\n\r\nGCC version: (GCC) 9.3.0\r\nCMake version: version 3.16.3\r\n\r\nPython version: 3.8.8\r\nIs CUDA available: Yes\r\nCUDA runtime version: 10.2\r\n\r\nNvidia driver version: 460\r\n\r\nVersions of relevant libraries:\r\n[pip3] numpy==1.20.1\r\n[pip3] pytorch-wpe==0.0.1\r\n[pip3] torch==1.8.0\r\n[pip3] torch-complex==0.2.1\r\n[pip3] torchaudio==0.8.0a0+a751e1d\r\n[pip3] torchvision==0.9.0\r\n[conda] blas                      1.0                         mkl\r\n[conda] cudatoolkit               10.2.89              hfd86e86_1    anaconda\r\n[conda] ffmpeg                    4.3                  hf484d3e_0    pytorch\r\n[conda] mkl                       2021.2.0           h06a4308_296\r\n[conda] mkl-service               2.3.0            py38h27cfd23_1\r\n[conda] mkl_fft                   1.3.0            py38h42c9631_2\r\n[conda] mkl_random                1.2.1            py38ha9443f7_2\r\n[conda] numpy                     1.20.1           py38h93e21f0_0\r\n[conda] numpy-base                1.20.1           py38h7d8b39e_0\r\n[conda] pytorch                   1.8.0           py3.8_cuda10.2_cudnn7.6.5_0    pytorch\r\n[conda] pytorch-wpe               0.0.1                    pypi_0    pypi\r\n[conda] torch-complex             0.2.1                    pypi_0    pypi\r\n[conda] torchaudio                0.8.0                      py38    pytorch\r\n[conda] torchvision               0.9.0                py38_cu102    pytorch\r\n```\r\n\r\n**Error logs**\r\n\r\nwhen i run make TH_VERSION=1.8.0 CUDA_VERSION=10.2, it went wrong:\r\n\r\n```\r\nERROR: Command errored out with exit status 1:\r\n   command: /home/zwl/miniconda3/envs/asr/bin/python3 /home/zwl/miniconda3/envs/asr/lib/python3.8/site-packages/pip/_vendor/pep517/in_process/_in_process.py build_wheel /tmp/tmps3ha9x5s\r\n       cwd: /tmp/pip-install-efvv7qtf/fairscale_c4f951244ec9423f979e7ff9cf23ead6\r\nninja: build stopped: subcommand failed.\r\n  Traceback (most recent call last):\r\n    File \"/tmp/pip-build-env-3_5gxw9u/overlay/lib/python3.8/site-packages/torch/utils/cpp_extension.py\", line 1667, in _run_ninja_build\r\n      subprocess.run(\r\n    File \"/home/zwl/miniconda3/envs/asr/lib/python3.8/subprocess.py\", line 516, in run\r\n      raise CalledProcessError(retcode, process.args,\r\n  subprocess.CalledProcessError: Command '['ninja', '-v']' returned non-zero exit status 1.\r\n\r\n  The above exception was the direct cause of the following exception:\r\n\r\n  Traceback (most recent call last):\r\n    File \"/home/zwl/miniconda3/envs/asr/lib/python3.8/site-packages/pip/_vendor/pep517/in_process/_in_process.py\", line 280, in <module>\r\n      main()\r\n    File \"/home/zwl/miniconda3/envs/asr/lib/python3.8/site-packages/pip/_vendor/pep517/in_process/_in_process.py\", line 263, in main\r\n      json_out['return_val'] = hook(**hook_input['kwargs'])\r\n    File \"/home/zwl/miniconda3/envs/asr/lib/python3.8/site-packages/pip/_vendor/pep517/in_process/_in_process.py\", line 204, in build_wheel\r\n      return _build_backend().build_wheel(wheel_directory, config_settings,\r\n    File \"/tmp/pip-build-env-3_5gxw9u/overlay/lib/python3.8/site-packages/setuptools/build_meta.py\", line 221, in build_wheel\r\n      return self._build_with_temp_dir(['bdist_wheel'], '.whl',\r\n    File \"/tmp/pip-build-env-3_5gxw9u/overlay/lib/python3.8/site-packages/setuptools/build_meta.py\", line 207, in _build_with_temp_dir\r\n      self.run_setup()\r\n    File \"/tmp/pip-build-env-3_5gxw9u/overlay/lib/python3.8/site-packages/setuptools/build_meta.py\", line 258, in run_setup\r\n      super(_BuildMetaLegacyBackend,\r\n    File \"/tmp/pip-build-env-3_5gxw9u/overlay/lib/python3.8/site-packages/setuptools/build_meta.py\", line 150, in run_setup\r\n      exec(compile(code, __file__, 'exec'), locals())\r\n    File \"setup.py\", line 59, in <module>\r\n      setuptools.setup(\r\n    File \"/tmp/pip-build-env-3_5gxw9u/overlay/lib/python3.8/site-packages/setuptools/__init__.py\", line 153, in setup\r\n      return distutils.core.setup(**attrs)\r\n    File \"/home/zwl/miniconda3/envs/asr/lib/python3.8/distutils/core.py\", line 148, in setup\r\n      dist.run_commands()\r\n    File \"/home/zwl/miniconda3/envs/asr/lib/python3.8/distutils/dist.py\", line 966, in run_commands\r\n      self.run_command(cmd)\r\n    File \"/home/zwl/miniconda3/envs/asr/lib/python3.8/distutils/dist.py\", line 985, in run_command\r\n      cmd_obj.run()\r\n    File \"/tmp/pip-build-env-3_5gxw9u/overlay/lib/python3.8/site-packages/wheel/bdist_wheel.py\", line 299, in run\r\n      self.run_command('build')\r\n    File \"/home/zwl/miniconda3/envs/asr/lib/python3.8/distutils/cmd.py\", line 313, in run_command\r\n      self.distribution.run_command(command)\r\n    File \"/home/zwl/miniconda3/envs/asr/lib/python3.8/distutils/dist.py\", line 985, in run_command\r\n      cmd_obj.run()\r\n    File \"/home/zwl/miniconda3/envs/asr/lib/python3.8/distutils/command/build.py\", line 135, in run\r\n      self.run_command(cmd_name)\r\n    File \"/home/zwl/miniconda3/envs/asr/lib/python3.8/distutils/cmd.py\", line 313, in run_command\r\n      self.distribution.run_command(command)\r\n    File \"/home/zwl/miniconda3/envs/asr/lib/python3.8/distutils/dist.py\", line 985, in run_command\r\n      cmd_obj.run()\r\n    File \"/tmp/pip-build-env-3_5gxw9u/overlay/lib/python3.8/site-packages/setuptools/command/build_ext.py\", line 79, in run\r\n      _build_ext.run(self)\r\n    File \"/home/zwl/miniconda3/envs/asr/lib/python3.8/distutils/command/build_ext.py\", line 340, in run\r\n      self.build_extensions()\r\n    File \"/tmp/pip-build-env-3_5gxw9u/overlay/lib/python3.8/site-packages/torch/utils/cpp_extension.py\", line 708, in build_extensions\r\n      build_ext.build_extensions(self)\r\n    File \"/home/zwl/miniconda3/envs/asr/lib/python3.8/distutils/command/build_ext.py\", line 449, in build_extensions\r\n      self._build_extensions_serial()\r\n    File \"/home/zwl/miniconda3/envs/asr/lib/python3.8/distutils/command/build_ext.py\", line 474, in _build_extensions_serial\r\n      self.build_extension(ext)\r\n    File \"/tmp/pip-build-env-3_5gxw9u/overlay/lib/python3.8/site-packages/setuptools/command/build_ext.py\", line 196, in build_extension\r\n      _build_ext.build_extension(self, ext)\r\n    File \"/home/zwl/miniconda3/envs/asr/lib/python3.8/distutils/command/build_ext.py\", line 528, in build_extension\r\n      objects = self.compiler.compile(sources,\r\n    File \"/tmp/pip-build-env-3_5gxw9u/overlay/lib/python3.8/site-packages/torch/utils/cpp_extension.py\", line 529, in unix_wrap_ninja_compile\r\n      _write_ninja_file_and_compile_objects(\r\n    File \"/tmp/pip-build-env-3_5gxw9u/overlay/lib/python3.8/site-packages/torch/utils/cpp_extension.py\", line 1354, in _write_ninja_file_and_compile_objects\r\n      _run_ninja_build(\r\n    File \"/tmp/pip-build-env-3_5gxw9u/overlay/lib/python3.8/site-packages/torch/utils/cpp_extension.py\", line 1683, in _run_ninja_build\r\n      raise RuntimeError(message) from e\r\n  RuntimeError: Error compiling objects for extension\r\n  ----------------------------------------\r\n  ERROR: Failed building wheel for fairscale\r\nFailed to build fairscale\r\nERROR: Could not build wheels for fairscale which use PEP 517 and cannot be installed directly\r\n```\r\n", "reactions": {"url": "https://api.github.com/repos/espnet/espnet/issues/3218/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/espnet/espnet/issues/3218/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/espnet/espnet/issues/3212", "repository_url": "https://api.github.com/repos/espnet/espnet", "labels_url": "https://api.github.com/repos/espnet/espnet/issues/3212/labels{/name}", "comments_url": "https://api.github.com/repos/espnet/espnet/issues/3212/comments", "events_url": "https://api.github.com/repos/espnet/espnet/issues/3212/events", "html_url": "https://github.com/espnet/espnet/issues/3212", "id": 890276172, "node_id": "MDU6SXNzdWU4OTAyNzYxNzI=", "number": 3212, "title": "Question about different torch sizes of decoding", "user": {"login": "Yixando", "id": 84092118, "node_id": "MDQ6VXNlcjg0MDkyMTE4", "avatar_url": "https://avatars.githubusercontent.com/u/84092118?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Yixando", "html_url": "https://github.com/Yixando", "followers_url": "https://api.github.com/users/Yixando/followers", "following_url": "https://api.github.com/users/Yixando/following{/other_user}", "gists_url": "https://api.github.com/users/Yixando/gists{/gist_id}", "starred_url": "https://api.github.com/users/Yixando/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Yixando/subscriptions", "organizations_url": "https://api.github.com/users/Yixando/orgs", "repos_url": "https://api.github.com/users/Yixando/repos", "events_url": "https://api.github.com/users/Yixando/events{/privacy}", "received_events_url": "https://api.github.com/users/Yixando/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 777173273, "node_id": "MDU6TGFiZWw3NzcxNzMyNzM=", "url": "https://api.github.com/repos/espnet/espnet/labels/Bug", "name": "Bug", "color": "ee0701", "default": false, "description": "bug should be fixed"}, {"id": 1680978730, "node_id": "MDU6TGFiZWwxNjgwOTc4NzMw", "url": "https://api.github.com/repos/espnet/espnet/labels/ASR", "name": "ASR", "color": "3ee0d5", "default": false, "description": "Automatic speech recogntion"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2021-05-12T16:31:35Z", "updated_at": "2021-05-14T13:57:19Z", "closed_at": "2021-05-14T13:57:19Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi everyone,\r\nI'm new in speech recognition and running now the script in dataset Tedlium2. In the last stage I got a failure feedback and in the decode log it's written as the picture shows. I don't know how to fix it. I really appreciate if someone could help me with this. Thanks in advance!\r\n![RunTimeErrorr](https://user-images.githubusercontent.com/84092118/118011376-3f8ea280-b350-11eb-83b4-f852b3ad518a.PNG)\r\n", "reactions": {"url": "https://api.github.com/repos/espnet/espnet/issues/3212/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/espnet/espnet/issues/3212/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/espnet/espnet/issues/3206", "repository_url": "https://api.github.com/repos/espnet/espnet", "labels_url": "https://api.github.com/repos/espnet/espnet/issues/3206/labels{/name}", "comments_url": "https://api.github.com/repos/espnet/espnet/issues/3206/comments", "events_url": "https://api.github.com/repos/espnet/espnet/issues/3206/events", "html_url": "https://github.com/espnet/espnet/issues/3206", "id": 883589384, "node_id": "MDU6SXNzdWU4ODM1ODkzODQ=", "number": 3206, "title": "Support for using text directly as input in vcc20 baseline synthesis instead of ASR", "user": {"login": "vishal16babu", "id": 11586028, "node_id": "MDQ6VXNlcjExNTg2MDI4", "avatar_url": "https://avatars.githubusercontent.com/u/11586028?v=4", "gravatar_id": "", "url": "https://api.github.com/users/vishal16babu", "html_url": "https://github.com/vishal16babu", "followers_url": "https://api.github.com/users/vishal16babu/followers", "following_url": "https://api.github.com/users/vishal16babu/following{/other_user}", "gists_url": "https://api.github.com/users/vishal16babu/gists{/gist_id}", "starred_url": "https://api.github.com/users/vishal16babu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/vishal16babu/subscriptions", "organizations_url": "https://api.github.com/users/vishal16babu/orgs", "repos_url": "https://api.github.com/users/vishal16babu/repos", "events_url": "https://api.github.com/users/vishal16babu/events{/privacy}", "received_events_url": "https://api.github.com/users/vishal16babu/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 777173273, "node_id": "MDU6TGFiZWw3NzcxNzMyNzM=", "url": "https://api.github.com/repos/espnet/espnet/labels/Bug", "name": "Bug", "color": "ee0701", "default": false, "description": "bug should be fixed"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2021-05-10T07:25:48Z", "updated_at": "2021-05-17T23:15:53Z", "closed_at": "2021-05-17T23:15:53Z", "author_association": "NONE", "active_lock_reason": null, "body": "I have trained vcc20 baseline for a target speaker. I want to use text to generate voice samples of that target speaker. The baseline for the vcc20 recipe uses ASR on the source speaker speech to get the underlying transcript tokens. \r\n\r\nIs there a way to use text directly to generate the input features for the TTS model? (ASR is very slow and is sometimes inaccurate)\r\n\r\nI've tried going through the code and the intermediate results of the ASR stage but couldn't figure out a way to do it. Any help or scripts to generate the ASR stage output directly from text is very much appreciated. \r\n\r\n", "reactions": {"url": "https://api.github.com/repos/espnet/espnet/issues/3206/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/espnet/espnet/issues/3206/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/espnet/espnet/issues/3189", "repository_url": "https://api.github.com/repos/espnet/espnet", "labels_url": "https://api.github.com/repos/espnet/espnet/issues/3189/labels{/name}", "comments_url": "https://api.github.com/repos/espnet/espnet/issues/3189/comments", "events_url": "https://api.github.com/repos/espnet/espnet/issues/3189/events", "html_url": "https://github.com/espnet/espnet/issues/3189", "id": 874480640, "node_id": "MDU6SXNzdWU4NzQ0ODA2NDA=", "number": 3189, "title": "Questions about AISHELL-2 recipe", "user": {"login": "s920128", "id": 6919165, "node_id": "MDQ6VXNlcjY5MTkxNjU=", "avatar_url": "https://avatars.githubusercontent.com/u/6919165?v=4", "gravatar_id": "", "url": "https://api.github.com/users/s920128", "html_url": "https://github.com/s920128", "followers_url": "https://api.github.com/users/s920128/followers", "following_url": "https://api.github.com/users/s920128/following{/other_user}", "gists_url": "https://api.github.com/users/s920128/gists{/gist_id}", "starred_url": "https://api.github.com/users/s920128/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/s920128/subscriptions", "organizations_url": "https://api.github.com/users/s920128/orgs", "repos_url": "https://api.github.com/users/s920128/repos", "events_url": "https://api.github.com/users/s920128/events{/privacy}", "received_events_url": "https://api.github.com/users/s920128/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 777173273, "node_id": "MDU6TGFiZWw3NzcxNzMyNzM=", "url": "https://api.github.com/repos/espnet/espnet/labels/Bug", "name": "Bug", "color": "ee0701", "default": false, "description": "bug should be fixed"}, {"id": 1356233216, "node_id": "MDU6TGFiZWwxMzU2MjMzMjE2", "url": "https://api.github.com/repos/espnet/espnet/labels/Recipe", "name": "Recipe", "color": "f7e171", "default": false, "description": ""}, {"id": 1680978730, "node_id": "MDU6TGFiZWwxNjgwOTc4NzMw", "url": "https://api.github.com/repos/espnet/espnet/labels/ASR", "name": "ASR", "color": "3ee0d5", "default": false, "description": "Automatic speech recogntion"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2021-05-03T11:15:28Z", "updated_at": "2021-05-08T06:12:04Z", "closed_at": "2021-05-08T06:12:04Z", "author_association": "NONE", "active_lock_reason": null, "body": "I run the AISHELL-2 recipe from stage 0 to stage 2.\r\nIn my train/text the sentence repeat 2 times.\r\nlike ` IC0001W0001 \u53a8\u623f\u7528\u5177    IC0001W0001 \u53a8\u623f\u7528\u5177 `\r\nso in data.json of train set, the text and token are repeat 2 times too.\r\nbut dev/\\*/text or test/\\*/text seem to be correct.\r\nI check the stage 0, train/text is correct before run `paste <(cut -f 1 data/${x}/text.org) <(cut -f 2 data/${x}/text.org | tr '[:lower:]' '[:upper:]') > data/${x}/text`\r\nHave you meet the same problem?\r\nI am not sure if it is my environment problem.\r\n\r\nBy the way, in my train/text the space in two repeat sentence are \\t. \r\nIn dev/\\*/text and test/\\*/text, the format is file_name+\\t+text.\r\nbut the format in other recipe are use a space  follow the kaldi style.\r\n", "reactions": {"url": "https://api.github.com/repos/espnet/espnet/issues/3189/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/espnet/espnet/issues/3189/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/espnet/espnet/issues/3183", "repository_url": "https://api.github.com/repos/espnet/espnet", "labels_url": "https://api.github.com/repos/espnet/espnet/issues/3183/labels{/name}", "comments_url": "https://api.github.com/repos/espnet/espnet/issues/3183/comments", "events_url": "https://api.github.com/repos/espnet/espnet/issues/3183/events", "html_url": "https://github.com/espnet/espnet/issues/3183", "id": 869875791, "node_id": "MDU6SXNzdWU4Njk4NzU3OTE=", "number": 3183, "title": "the `dim` argument in LayerNorm is not used", "user": {"login": "csukuangfj", "id": 5284924, "node_id": "MDQ6VXNlcjUyODQ5MjQ=", "avatar_url": "https://avatars.githubusercontent.com/u/5284924?v=4", "gravatar_id": "", "url": "https://api.github.com/users/csukuangfj", "html_url": "https://github.com/csukuangfj", "followers_url": "https://api.github.com/users/csukuangfj/followers", "following_url": "https://api.github.com/users/csukuangfj/following{/other_user}", "gists_url": "https://api.github.com/users/csukuangfj/gists{/gist_id}", "starred_url": "https://api.github.com/users/csukuangfj/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/csukuangfj/subscriptions", "organizations_url": "https://api.github.com/users/csukuangfj/orgs", "repos_url": "https://api.github.com/users/csukuangfj/repos", "events_url": "https://api.github.com/users/csukuangfj/events{/privacy}", "received_events_url": "https://api.github.com/users/csukuangfj/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 777173273, "node_id": "MDU6TGFiZWw3NzcxNzMyNzM=", "url": "https://api.github.com/repos/espnet/espnet/labels/Bug", "name": "Bug", "color": "ee0701", "default": false, "description": "bug should be fixed"}, {"id": 1680978730, "node_id": "MDU6TGFiZWwxNjgwOTc4NzMw", "url": "https://api.github.com/repos/espnet/espnet/labels/ASR", "name": "ASR", "color": "3ee0d5", "default": false, "description": "Automatic speech recogntion"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2021-04-28T12:09:55Z", "updated_at": "2021-05-11T06:59:04Z", "closed_at": "2021-05-11T06:59:04Z", "author_association": "NONE", "active_lock_reason": null, "body": "See\r\nhttps://github.com/espnet/espnet/blob/55160fc20c48686808cbdf208919e668e3b1451a/espnet/nets/pytorch_backend/transformer/layer_norm.py#L36-L38\r\n\r\nIt always uses `x.tranpose(1, -1)` instead of `x.transpose(self.dim, -1)`.\r\n\r\nIt has not caused problems so far since the use case of LayerNorm in ESPnet happens to always be `dim==1`. See\r\nhttps://github.com/espnet/espnet/blob/55160fc20c48686808cbdf208919e668e3b1451a/espnet/nets/pytorch_backend/fastspeech/duration_predictor.py#L62\r\n\r\nhttps://github.com/espnet/espnet/blob/55160fc20c48686808cbdf208919e668e3b1451a/espnet2/tts/variance_predictor.py#L61\r\n\r\n---\r\n\r\nI would propose to replace\r\nhttps://github.com/espnet/espnet/blob/55160fc20c48686808cbdf208919e668e3b1451a/espnet/nets/pytorch_backend/transformer/layer_norm.py#L38\r\n\r\nwith\r\n\r\n```python\r\n        return super(LayerNorm, self).forward(x.transpose(self.dim, -1)).transpose(self.dim, -1)\r\n```", "reactions": {"url": "https://api.github.com/repos/espnet/espnet/issues/3183/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/espnet/espnet/issues/3183/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/espnet/espnet/issues/3163", "repository_url": "https://api.github.com/repos/espnet/espnet", "labels_url": "https://api.github.com/repos/espnet/espnet/issues/3163/labels{/name}", "comments_url": "https://api.github.com/repos/espnet/espnet/issues/3163/comments", "events_url": "https://api.github.com/repos/espnet/espnet/issues/3163/events", "html_url": "https://github.com/espnet/espnet/issues/3163", "id": 865566374, "node_id": "MDU6SXNzdWU4NjU1NjYzNzQ=", "number": 3163, "title": "egs2/wsj/asr1/README.md contains conf/decode.conf but it's conf/decode.yaml", "user": {"login": "xxjjvxb", "id": 8040329, "node_id": "MDQ6VXNlcjgwNDAzMjk=", "avatar_url": "https://avatars.githubusercontent.com/u/8040329?v=4", "gravatar_id": "", "url": "https://api.github.com/users/xxjjvxb", "html_url": "https://github.com/xxjjvxb", "followers_url": "https://api.github.com/users/xxjjvxb/followers", "following_url": "https://api.github.com/users/xxjjvxb/following{/other_user}", "gists_url": "https://api.github.com/users/xxjjvxb/gists{/gist_id}", "starred_url": "https://api.github.com/users/xxjjvxb/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/xxjjvxb/subscriptions", "organizations_url": "https://api.github.com/users/xxjjvxb/orgs", "repos_url": "https://api.github.com/users/xxjjvxb/repos", "events_url": "https://api.github.com/users/xxjjvxb/events{/privacy}", "received_events_url": "https://api.github.com/users/xxjjvxb/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 777173273, "node_id": "MDU6TGFiZWw3NzcxNzMyNzM=", "url": "https://api.github.com/repos/espnet/espnet/labels/Bug", "name": "Bug", "color": "ee0701", "default": false, "description": "bug should be fixed"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2021-04-22T23:15:16Z", "updated_at": "2021-04-23T07:00:09Z", "closed_at": "2021-04-23T07:00:09Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "**Describe the bug**\r\ndecode.conf should be change to decode.yaml.", "reactions": {"url": "https://api.github.com/repos/espnet/espnet/issues/3163/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/espnet/espnet/issues/3163/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/espnet/espnet/issues/3156", "repository_url": "https://api.github.com/repos/espnet/espnet", "labels_url": "https://api.github.com/repos/espnet/espnet/issues/3156/labels{/name}", "comments_url": "https://api.github.com/repos/espnet/espnet/issues/3156/comments", "events_url": "https://api.github.com/repos/espnet/espnet/issues/3156/events", "html_url": "https://github.com/espnet/espnet/issues/3156", "id": 859542529, "node_id": "MDU6SXNzdWU4NTk1NDI1Mjk=", "number": 3156, "title": "[ASR train] how to create speech_shape and text_shape.char", "user": {"login": "kju196", "id": 40625342, "node_id": "MDQ6VXNlcjQwNjI1MzQy", "avatar_url": "https://avatars.githubusercontent.com/u/40625342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kju196", "html_url": "https://github.com/kju196", "followers_url": "https://api.github.com/users/kju196/followers", "following_url": "https://api.github.com/users/kju196/following{/other_user}", "gists_url": "https://api.github.com/users/kju196/gists{/gist_id}", "starred_url": "https://api.github.com/users/kju196/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kju196/subscriptions", "organizations_url": "https://api.github.com/users/kju196/orgs", "repos_url": "https://api.github.com/users/kju196/repos", "events_url": "https://api.github.com/users/kju196/events{/privacy}", "received_events_url": "https://api.github.com/users/kju196/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 777173273, "node_id": "MDU6TGFiZWw3NzcxNzMyNzM=", "url": "https://api.github.com/repos/espnet/espnet/labels/Bug", "name": "Bug", "color": "ee0701", "default": false, "description": "bug should be fixed"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2021-04-16T07:23:52Z", "updated_at": "2021-04-20T07:30:28Z", "closed_at": "2021-04-20T07:30:28Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi everyone,\r\nI am new to espnet. I try to training Espnet with JSUT dataset follow the config file on modelzoo.\r\nI got error:\r\n`FileNotFoundError: [Errno 2] No such file or directory: 'exp/asr_stats_raw_char_sp/train/speech_shape'`\r\n\r\nI saw in the config:\r\n\r\n```\r\ntrain_shape_file:\r\n- exp/asr_stats_raw_char_sp/train/speech_shape\r\n- exp/asr_stats_raw_char_sp/train/text_shape.char\r\n```\r\n\r\nand \r\n\r\n```\r\ntrain_shape_file:\r\n- exp/asr_stats_raw_char_sp/valid/speech_shape\r\n- exp/asr_stats_raw_char_sp/valid/text_shape.char\r\n```\r\n\r\nBut I don't know how to create them.\r\n\r\nPlease show me if you know it.\r\nThank you very much.", "reactions": {"url": "https://api.github.com/repos/espnet/espnet/issues/3156/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/espnet/espnet/issues/3156/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/espnet/espnet/issues/3152", "repository_url": "https://api.github.com/repos/espnet/espnet", "labels_url": "https://api.github.com/repos/espnet/espnet/issues/3152/labels{/name}", "comments_url": "https://api.github.com/repos/espnet/espnet/issues/3152/comments", "events_url": "https://api.github.com/repos/espnet/espnet/issues/3152/events", "html_url": "https://github.com/espnet/espnet/issues/3152", "id": 856495795, "node_id": "MDU6SXNzdWU4NTY0OTU3OTU=", "number": 3152, "title": "TTS fintuning  param error in stage 6", "user": {"login": "ymzlygw", "id": 17065855, "node_id": "MDQ6VXNlcjE3MDY1ODU1", "avatar_url": "https://avatars.githubusercontent.com/u/17065855?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ymzlygw", "html_url": "https://github.com/ymzlygw", "followers_url": "https://api.github.com/users/ymzlygw/followers", "following_url": "https://api.github.com/users/ymzlygw/following{/other_user}", "gists_url": "https://api.github.com/users/ymzlygw/gists{/gist_id}", "starred_url": "https://api.github.com/users/ymzlygw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ymzlygw/subscriptions", "organizations_url": "https://api.github.com/users/ymzlygw/orgs", "repos_url": "https://api.github.com/users/ymzlygw/repos", "events_url": "https://api.github.com/users/ymzlygw/events{/privacy}", "received_events_url": "https://api.github.com/users/ymzlygw/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 777173273, "node_id": "MDU6TGFiZWw3NzcxNzMyNzM=", "url": "https://api.github.com/repos/espnet/espnet/labels/Bug", "name": "Bug", "color": "ee0701", "default": false, "description": "bug should be fixed"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2021-04-13T01:57:05Z", "updated_at": "2021-04-14T07:56:32Z", "closed_at": "2021-04-14T07:56:32Z", "author_association": "NONE", "active_lock_reason": null, "body": "When I do tts fintuing using jvs recipe. I finished stage1-5, but in stage 6, When I using recommeded command :\r\n$ ./run.sh --stage 6 --train_config conf/tuning/finetune_tacotron2.yaml \\\r\n    --train_args \"--init_param downloads/2dc62478870c846065fe39e609ba6657/exp/tts_train_tacotron2_raw_phn_jaconv_pyopenjtalk/199epoch.pth\" \\\r\n    --tag finetune_jsut_pretrained_tacotron2\r\n\r\n**Error occurs with folloing message:**\r\nusage: tts_train.py [-h] [--config CONFIG] [--print_config]\r\n                    [--log_level {ERROR,WARNING,INFO,DEBUG,NOTSET}]\r\n                    [--dry_run DRY_RUN]\r\n                    [--iterator_type {sequence,chunk,task,none}]\r\n                    [--output_dir OUTPUT_DIR] [--ngpu NGPU] [--seed SEED]\r\n                    [--num_workers NUM_WORKERS] [--num_att_plot NUM_ATT_PLOT]\r\n                    [--dist_backend DIST_BACKEND]\r\n                    [--dist_init_method DIST_INIT_METHOD]\r\n                    [--dist_world_size DIST_WORLD_SIZE]\r\n                    [--dist_rank DIST_RANK] [--local_rank LOCAL_RANK]\r\n                    [--dist_master_addr DIST_MASTER_ADDR]\r\n                    [--dist_master_port DIST_MASTER_PORT]\r\n                    [--dist_launcher {slurm,mpi,None}]\r\n                    [--multiprocessing_distributed MULTIPROCESSING_DISTRIBUTED]\r\n                    [--cudnn_enabled CUDNN_ENABLED]\r\n                    [--cudnn_benchmark CUDNN_BENCHMARK]\r\n                    [--cudnn_deterministic CUDNN_DETERMINISTIC]\r\n                    [--collect_stats COLLECT_STATS]\r\n                    [--write_collected_feats WRITE_COLLECTED_FEATS]\r\n                    [--max_epoch MAX_EPOCH] [--patience PATIENCE]\r\n                    [--val_scheduler_criterion VAL_SCHEDULER_CRITERION VAL_SCHEDULER_CRITERION]\r\n                    [--early_stopping_criterion EARLY_STOPPING_CRITERION EARLY_STOPPING_CRITERION EARLY_STOPPING_CRITERION]\r\n                    [--best_model_criterion BEST_MODEL_CRITERION [BEST_MODEL_CRITERION ...]]\r\n                    [--keep_nbest_models KEEP_NBEST_MODELS [KEEP_NBEST_MODELS ...]]\r\n                    [--grad_clip GRAD_CLIP] [--grad_clip_type GRAD_CLIP_TYPE]\r\n                    [--grad_noise GRAD_NOISE] [--accum_grad ACCUM_GRAD]\r\n                    [--no_forward_run NO_FORWARD_RUN] [--resume RESUME]\r\n                    [--train_dtype {float16,float32,float64}]\r\n                    [--use_amp USE_AMP] [--log_interval LOG_INTERVAL]\r\n                    [--pretrain_path [PRETRAIN_PATH [PRETRAIN_PATH ...]]]\r\n                    [--pretrain_key [PRETRAIN_KEY [PRETRAIN_KEY ...]]]\r\n                    [--num_iters_per_epoch NUM_ITERS_PER_EPOCH]\r\n                    [--batch_size BATCH_SIZE]\r\n                    [--valid_batch_size VALID_BATCH_SIZE]\r\n                    [--batch_bins BATCH_BINS]\r\n                    [--valid_batch_bins VALID_BATCH_BINS]\r\n                    [--train_shape_file TRAIN_SHAPE_FILE]\r\n                    [--valid_shape_file VALID_SHAPE_FILE]\r\n                    [--batch_type {unsorted,sorted,folded,length,numel}]\r\n                    [--valid_batch_type {unsorted,sorted,folded,length,numel,None}]\r\n                    [--fold_length FOLD_LENGTH]\r\n                    [--sort_in_batch {descending,ascending}]\r\n                    [--sort_batch {descending,ascending}]\r\n                    [--multiple_iterator MULTIPLE_ITERATOR]\r\n                    [--chunk_length CHUNK_LENGTH]\r\n                    [--chunk_shift_ratio CHUNK_SHIFT_RATIO]\r\n                    [--num_cache_chunks NUM_CACHE_CHUNKS]\r\n                    [--train_data_path_and_name_and_type TRAIN_DATA_PATH_AND_NAME_AND_TYPE]\r\n                    [--valid_data_path_and_name_and_type VALID_DATA_PATH_AND_NAME_AND_TYPE]\r\n                    [--allow_variable_data_keys ALLOW_VARIABLE_DATA_KEYS]\r\n                    [--max_cache_size MAX_CACHE_SIZE]\r\n                    [--max_cache_fd MAX_CACHE_FD]\r\n                    [--valid_max_cache_size VALID_MAX_CACHE_SIZE]\r\n                    [--optim {adam,sgd,adadelta,adagrad,adamax,asgd,lbfgs,rmsprop,rprop,accagd,adabound,adamod,diffgrad,lamb,novograd,pid,qhm,radam,sgdw,yogi}]\r\n                    [--optim_conf OPTIM_CONF]\r\n                    [--scheduler {reducelronplateau,lambdalr,steplr,multisteplr,exponentiallr,cosineannealinglr,noamlr,warmuplr,None}]\r\n                    [--scheduler_conf SCHEDULER_CONF]\r\n                    [--token_list TOKEN_LIST] [--odim ODIM]\r\n                    [--model_conf MODEL_CONF]\r\n                    [--use_preprocessor USE_PREPROCESSOR]\r\n                    [--token_type {bpe,char,word,phn}] [--bpemodel BPEMODEL]\r\n                    [--non_linguistic_symbols NON_LINGUISTIC_SYMBOLS]\r\n                    [--cleaner {None,tacotron,jaconv,vietnamese}]\r\n                    [--g2p {None,g2p_en,g2p_en_no_space,pyopenjtalk,pyopenjtalk_kana,pypinyin_g2p,pypinyin_g2p_phone}]\r\n                    [--feats_extract {fbank,spectrogram}]\r\n                    [--feats_extract_conf FEATS_EXTRACT_CONF]\r\n                    [--normalize {global_mvn,None}]\r\n                    [--normalize_conf NORMALIZE_CONF]\r\n                    [--tts {tacotron2,transformer,fastspeech,fastspeech2}]\r\n                    [--tts_conf TTS_CONF] [--pitch_extract {dio,None}]\r\n                    [--pitch_extract_conf PITCH_EXTRACT_CONF]\r\n                    [--pitch_normalize {global_mvn,None}]\r\n                    [--pitch_normalize_conf PITCH_NORMALIZE_CONF]\r\n                    [--energy_extract {energy,None}]\r\n                    [--energy_extract_conf ENERGY_EXTRACT_CONF]\r\n                    [--energy_normalize {global_mvn,None}]\r\n                    [--energy_normalize_conf ENERGY_NORMALIZE_CONF]\r\n**tts_train.py: error: unrecognized arguments: --init_param downloads/2dc62478870c846065fe39e609ba6657/exp/tts_train_tacotron2_raw_phn_jaconv_pyopenjtalk/199epoch.pth**\r\n# Accounting: time=3 threads=1\r\n# Ended (code 2) at Tue Apr 13 01:51:07 UTC 2021, elapsed time 3 seconds\r\n\r\nAnd I try to change the \"--init_param\" to \"pretrain_path\" also the same error. Could you tell me is there anything wrong?  Thanks!", "reactions": {"url": "https://api.github.com/repos/espnet/espnet/issues/3152/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/espnet/espnet/issues/3152/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/espnet/espnet/issues/3147", "repository_url": "https://api.github.com/repos/espnet/espnet", "labels_url": "https://api.github.com/repos/espnet/espnet/issues/3147/labels{/name}", "comments_url": "https://api.github.com/repos/espnet/espnet/issues/3147/comments", "events_url": "https://api.github.com/repos/espnet/espnet/issues/3147/events", "html_url": "https://github.com/espnet/espnet/issues/3147", "id": 855289101, "node_id": "MDU6SXNzdWU4NTUyODkxMDE=", "number": 3147, "title": "Espnet2 ASR DataParallel API mismatching?", "user": {"login": "winlaic", "id": 43128265, "node_id": "MDQ6VXNlcjQzMTI4MjY1", "avatar_url": "https://avatars.githubusercontent.com/u/43128265?v=4", "gravatar_id": "", "url": "https://api.github.com/users/winlaic", "html_url": "https://github.com/winlaic", "followers_url": "https://api.github.com/users/winlaic/followers", "following_url": "https://api.github.com/users/winlaic/following{/other_user}", "gists_url": "https://api.github.com/users/winlaic/gists{/gist_id}", "starred_url": "https://api.github.com/users/winlaic/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/winlaic/subscriptions", "organizations_url": "https://api.github.com/users/winlaic/orgs", "repos_url": "https://api.github.com/users/winlaic/repos", "events_url": "https://api.github.com/users/winlaic/events{/privacy}", "received_events_url": "https://api.github.com/users/winlaic/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 777173273, "node_id": "MDU6TGFiZWw3NzcxNzMyNzM=", "url": "https://api.github.com/repos/espnet/espnet/labels/Bug", "name": "Bug", "color": "ee0701", "default": false, "description": "bug should be fixed"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2021-04-11T12:01:31Z", "updated_at": "2021-04-12T03:47:11Z", "closed_at": "2021-04-12T03:47:11Z", "author_association": "NONE", "active_lock_reason": null, "body": "In `espnet/espnet2/train/trainer.py:250,17` \r\nIt seems that `torch.nn.parallel.DataParallel` doesn't have a parameter `find_unused_parameters`.\r\nIs it a bug?", "reactions": {"url": "https://api.github.com/repos/espnet/espnet/issues/3147/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/espnet/espnet/issues/3147/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/espnet/espnet/issues/3129", "repository_url": "https://api.github.com/repos/espnet/espnet", "labels_url": "https://api.github.com/repos/espnet/espnet/issues/3129/labels{/name}", "comments_url": "https://api.github.com/repos/espnet/espnet/issues/3129/comments", "events_url": "https://api.github.com/repos/espnet/espnet/issues/3129/events", "html_url": "https://github.com/espnet/espnet/issues/3129", "id": 848991883, "node_id": "MDU6SXNzdWU4NDg5OTE4ODM=", "number": 3129, "title": "espnet2 AISHELL training use my own Dataset in Stage 9: ASR collect stats", "user": {"login": "BarryKCL", "id": 48039828, "node_id": "MDQ6VXNlcjQ4MDM5ODI4", "avatar_url": "https://avatars.githubusercontent.com/u/48039828?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BarryKCL", "html_url": "https://github.com/BarryKCL", "followers_url": "https://api.github.com/users/BarryKCL/followers", "following_url": "https://api.github.com/users/BarryKCL/following{/other_user}", "gists_url": "https://api.github.com/users/BarryKCL/gists{/gist_id}", "starred_url": "https://api.github.com/users/BarryKCL/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BarryKCL/subscriptions", "organizations_url": "https://api.github.com/users/BarryKCL/orgs", "repos_url": "https://api.github.com/users/BarryKCL/repos", "events_url": "https://api.github.com/users/BarryKCL/events{/privacy}", "received_events_url": "https://api.github.com/users/BarryKCL/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 777173273, "node_id": "MDU6TGFiZWw3NzcxNzMyNzM=", "url": "https://api.github.com/repos/espnet/espnet/labels/Bug", "name": "Bug", "color": "ee0701", "default": false, "description": "bug should be fixed"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2021-04-02T06:13:15Z", "updated_at": "2021-04-02T07:56:37Z", "closed_at": "2021-04-02T07:56:37Z", "author_association": "NONE", "active_lock_reason": null, "body": "RuntimeError: Caught RuntimeError in DataLoader worker process 0.\r\nOriginal Traceback (most recent call last):\r\n  File \"/usr/local/lib/python3.6/dist-packages/torch/utils/data/_utils/worker.py\", line 178, in _worker_loop\r\n    data = fetcher.fetch(index)\r\n  File \"/usr/local/lib/python3.6/dist-packages/torch/utils/data/_utils/fetch.py\", line 35, in fetch\r\n    return self.collate_fn(data)\r\n  File \"/usr/local/lib/python3.6/dist-packages/espnet2/train/collate_fn.py\", line 42, in __call__\r\n    not_sequence=self.not_sequence,\r\n  File \"/usr/local/lib/python3.6/dist-packages/espnet2/train/collate_fn.py\", line 94, in common_collate_fn\r\n    tensor = pad_list(tensor_list, pad_value)\r\n  File \"/usr/local/lib/python3.6/dist-packages/espnet/nets/pytorch_backend/nets_utils.py\", line 59, in pad_list\r\n    pad[i, : xs[i].size(0)] = xs[i]\r\nRuntimeError: expand(torch.FloatTensor{[114320, 2]}, size=[114320]): the number of sizes provided (1) must be greater or equal to the number of dimensions in the tensor (2)\r\n\r\n# Accounting: time=36 threads=1\r\n# Ended (code 1) at Fri Apr  2 12:35:41 CST 2021, elapsed time 36 seconds", "reactions": {"url": "https://api.github.com/repos/espnet/espnet/issues/3129/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/espnet/espnet/issues/3129/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/espnet/espnet/issues/3128", "repository_url": "https://api.github.com/repos/espnet/espnet", "labels_url": "https://api.github.com/repos/espnet/espnet/issues/3128/labels{/name}", "comments_url": "https://api.github.com/repos/espnet/espnet/issues/3128/comments", "events_url": "https://api.github.com/repos/espnet/espnet/issues/3128/events", "html_url": "https://github.com/espnet/espnet/issues/3128", "id": 848932106, "node_id": "MDU6SXNzdWU4NDg5MzIxMDY=", "number": 3128, "title": "How can i use a well-trained language model to score a sentence?", "user": {"login": "3139725181", "id": 50128160, "node_id": "MDQ6VXNlcjUwMTI4MTYw", "avatar_url": "https://avatars.githubusercontent.com/u/50128160?v=4", "gravatar_id": "", "url": "https://api.github.com/users/3139725181", "html_url": "https://github.com/3139725181", "followers_url": "https://api.github.com/users/3139725181/followers", "following_url": "https://api.github.com/users/3139725181/following{/other_user}", "gists_url": "https://api.github.com/users/3139725181/gists{/gist_id}", "starred_url": "https://api.github.com/users/3139725181/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/3139725181/subscriptions", "organizations_url": "https://api.github.com/users/3139725181/orgs", "repos_url": "https://api.github.com/users/3139725181/repos", "events_url": "https://api.github.com/users/3139725181/events{/privacy}", "received_events_url": "https://api.github.com/users/3139725181/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 777173273, "node_id": "MDU6TGFiZWw3NzcxNzMyNzM=", "url": "https://api.github.com/repos/espnet/espnet/labels/Bug", "name": "Bug", "color": "ee0701", "default": false, "description": "bug should be fixed"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2021-04-02T03:30:10Z", "updated_at": "2021-04-03T08:06:49Z", "closed_at": "2021-04-03T08:06:49Z", "author_association": "NONE", "active_lock_reason": null, "body": "How can i use a well-trained language model to score a sentence?", "reactions": {"url": "https://api.github.com/repos/espnet/espnet/issues/3128/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/espnet/espnet/issues/3128/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/espnet/espnet/issues/3126", "repository_url": "https://api.github.com/repos/espnet/espnet", "labels_url": "https://api.github.com/repos/espnet/espnet/issues/3126/labels{/name}", "comments_url": "https://api.github.com/repos/espnet/espnet/issues/3126/comments", "events_url": "https://api.github.com/repos/espnet/espnet/issues/3126/events", "html_url": "https://github.com/espnet/espnet/issues/3126", "id": 847826687, "node_id": "MDU6SXNzdWU4NDc4MjY2ODc=", "number": 3126, "title": "JSUT PWG model  loading error", "user": {"login": "sciai-ai", "id": 52277510, "node_id": "MDQ6VXNlcjUyMjc3NTEw", "avatar_url": "https://avatars.githubusercontent.com/u/52277510?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sciai-ai", "html_url": "https://github.com/sciai-ai", "followers_url": "https://api.github.com/users/sciai-ai/followers", "following_url": "https://api.github.com/users/sciai-ai/following{/other_user}", "gists_url": "https://api.github.com/users/sciai-ai/gists{/gist_id}", "starred_url": "https://api.github.com/users/sciai-ai/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sciai-ai/subscriptions", "organizations_url": "https://api.github.com/users/sciai-ai/orgs", "repos_url": "https://api.github.com/users/sciai-ai/repos", "events_url": "https://api.github.com/users/sciai-ai/events{/privacy}", "received_events_url": "https://api.github.com/users/sciai-ai/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 777173273, "node_id": "MDU6TGFiZWw3NzcxNzMyNzM=", "url": "https://api.github.com/repos/espnet/espnet/labels/Bug", "name": "Bug", "color": "ee0701", "default": false, "description": "bug should be fixed"}, {"id": 1680978630, "node_id": "MDU6TGFiZWwxNjgwOTc4NjMw", "url": "https://api.github.com/repos/espnet/espnet/labels/TTS", "name": "TTS", "color": "fbca04", "default": false, "description": "Text-to-speech"}, {"id": 1889036170, "node_id": "MDU6TGFiZWwxODg5MDM2MTcw", "url": "https://api.github.com/repos/espnet/espnet/labels/ESPnet2", "name": "ESPnet2", "color": "f2db68", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2021-04-01T03:34:03Z", "updated_at": "2021-04-16T06:54:27Z", "closed_at": "2021-04-16T06:54:27Z", "author_association": "NONE", "active_lock_reason": null, "body": "I trained the JSUT PWG vocoder model using egs2 recipe. When i try to load the model `vocoder = load_model(vocoder_path).to(\"cuda\").eval()\r\n` \r\nI get the error\r\n\r\n [enforce fail at inline_container.cc:145] . PytorchStreamReader failed reading zip archive: failed finding central directory\r\n\r\nWhen i used the pretrained JSUT PWG model from zoo i dont get this error. @kan-bayashi Can you please help? Than you", "reactions": {"url": "https://api.github.com/repos/espnet/espnet/issues/3126/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/espnet/espnet/issues/3126/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/espnet/espnet/issues/3102", "repository_url": "https://api.github.com/repos/espnet/espnet", "labels_url": "https://api.github.com/repos/espnet/espnet/issues/3102/labels{/name}", "comments_url": "https://api.github.com/repos/espnet/espnet/issues/3102/comments", "events_url": "https://api.github.com/repos/espnet/espnet/issues/3102/events", "html_url": "https://github.com/espnet/espnet/issues/3102", "id": 838337482, "node_id": "MDU6SXNzdWU4MzgzMzc0ODI=", "number": 3102, "title": "Question: importing a trained ESPnet ASR model to C++", "user": {"login": "hyung8758", "id": 12028332, "node_id": "MDQ6VXNlcjEyMDI4MzMy", "avatar_url": "https://avatars.githubusercontent.com/u/12028332?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hyung8758", "html_url": "https://github.com/hyung8758", "followers_url": "https://api.github.com/users/hyung8758/followers", "following_url": "https://api.github.com/users/hyung8758/following{/other_user}", "gists_url": "https://api.github.com/users/hyung8758/gists{/gist_id}", "starred_url": "https://api.github.com/users/hyung8758/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hyung8758/subscriptions", "organizations_url": "https://api.github.com/users/hyung8758/orgs", "repos_url": "https://api.github.com/users/hyung8758/repos", "events_url": "https://api.github.com/users/hyung8758/events{/privacy}", "received_events_url": "https://api.github.com/users/hyung8758/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 777173273, "node_id": "MDU6TGFiZWw3NzcxNzMyNzM=", "url": "https://api.github.com/repos/espnet/espnet/labels/Bug", "name": "Bug", "color": "ee0701", "default": false, "description": "bug should be fixed"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2021-03-23T04:27:47Z", "updated_at": "2021-03-23T04:31:44Z", "closed_at": "2021-03-23T04:31:44Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hello all. \r\n\r\nI saw a plan for updating torch script support in Development plan note v0.10.0 and I wonder when it will be updated.\r\nI trained a few ASR models based on transformer networks and I would like to import this model in C++.\r\nOr is there anyone who knows how to import the trained ESPnet ASR model in C++ instead of using torch script, then please let me know. \r\n\r\nThank you in advance.", "reactions": {"url": "https://api.github.com/repos/espnet/espnet/issues/3102/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/espnet/espnet/issues/3102/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/espnet/espnet/issues/3075", "repository_url": "https://api.github.com/repos/espnet/espnet", "labels_url": "https://api.github.com/repos/espnet/espnet/issues/3075/labels{/name}", "comments_url": "https://api.github.com/repos/espnet/espnet/issues/3075/comments", "events_url": "https://api.github.com/repos/espnet/espnet/issues/3075/events", "html_url": "https://github.com/espnet/espnet/issues/3075", "id": 830137860, "node_id": "MDU6SXNzdWU4MzAxMzc4NjA=", "number": 3075, "title": "csmsc/tts1   HTTP request sent, awaiting response... 403 Forbidden", "user": {"login": "gbaian10", "id": 34255899, "node_id": "MDQ6VXNlcjM0MjU1ODk5", "avatar_url": "https://avatars.githubusercontent.com/u/34255899?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gbaian10", "html_url": "https://github.com/gbaian10", "followers_url": "https://api.github.com/users/gbaian10/followers", "following_url": "https://api.github.com/users/gbaian10/following{/other_user}", "gists_url": "https://api.github.com/users/gbaian10/gists{/gist_id}", "starred_url": "https://api.github.com/users/gbaian10/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gbaian10/subscriptions", "organizations_url": "https://api.github.com/users/gbaian10/orgs", "repos_url": "https://api.github.com/users/gbaian10/repos", "events_url": "https://api.github.com/users/gbaian10/events{/privacy}", "received_events_url": "https://api.github.com/users/gbaian10/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 777173273, "node_id": "MDU6TGFiZWw3NzcxNzMyNzM=", "url": "https://api.github.com/repos/espnet/espnet/labels/Bug", "name": "Bug", "color": "ee0701", "default": false, "description": "bug should be fixed"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2021-03-12T13:50:31Z", "updated_at": "2021-03-25T07:20:52Z", "closed_at": "2021-03-25T07:20:52Z", "author_association": "NONE", "active_lock_reason": null, "body": "As title, I can't start a brand new CSMSC training.", "reactions": {"url": "https://api.github.com/repos/espnet/espnet/issues/3075/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/espnet/espnet/issues/3075/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/espnet/espnet/issues/3072", "repository_url": "https://api.github.com/repos/espnet/espnet", "labels_url": "https://api.github.com/repos/espnet/espnet/issues/3072/labels{/name}", "comments_url": "https://api.github.com/repos/espnet/espnet/issues/3072/comments", "events_url": "https://api.github.com/repos/espnet/espnet/issues/3072/events", "html_url": "https://github.com/espnet/espnet/issues/3072", "id": 829738368, "node_id": "MDU6SXNzdWU4Mjk3MzgzNjg=", "number": 3072, "title": "Question on chunk shift in ChunkIterFactory.build_iter()", "user": {"login": "hchung12", "id": 12407741, "node_id": "MDQ6VXNlcjEyNDA3NzQx", "avatar_url": "https://avatars.githubusercontent.com/u/12407741?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hchung12", "html_url": "https://github.com/hchung12", "followers_url": "https://api.github.com/users/hchung12/followers", "following_url": "https://api.github.com/users/hchung12/following{/other_user}", "gists_url": "https://api.github.com/users/hchung12/gists{/gist_id}", "starred_url": "https://api.github.com/users/hchung12/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hchung12/subscriptions", "organizations_url": "https://api.github.com/users/hchung12/orgs", "repos_url": "https://api.github.com/users/hchung12/repos", "events_url": "https://api.github.com/users/hchung12/events{/privacy}", "received_events_url": "https://api.github.com/users/hchung12/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 777173273, "node_id": "MDU6TGFiZWw3NzcxNzMyNzM=", "url": "https://api.github.com/repos/espnet/espnet/labels/Bug", "name": "Bug", "color": "ee0701", "default": false, "description": "bug should be fixed"}, {"id": 1889036170, "node_id": "MDU6TGFiZWwxODg5MDM2MTcw", "url": "https://api.github.com/repos/espnet/espnet/labels/ESPnet2", "name": "ESPnet2", "color": "f2db68", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2021-03-12T04:06:38Z", "updated_at": "2021-04-16T10:25:20Z", "closed_at": "2021-03-12T06:04:22Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "In the code, shift width is calculated as a ratio of utterance length as follows:\r\nS = int(L * self.chunk_shift_ratio)\r\n\r\nShouldn't shift width be calculated as a ratio of chunk length like below ?\r\nS = int(W * self.chunk_shift_ratio)\r\n", "reactions": {"url": "https://api.github.com/repos/espnet/espnet/issues/3072/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/espnet/espnet/issues/3072/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/espnet/espnet/issues/3062", "repository_url": "https://api.github.com/repos/espnet/espnet", "labels_url": "https://api.github.com/repos/espnet/espnet/issues/3062/labels{/name}", "comments_url": "https://api.github.com/repos/espnet/espnet/issues/3062/comments", "events_url": "https://api.github.com/repos/espnet/espnet/issues/3062/events", "html_url": "https://github.com/espnet/espnet/pull/3062", "id": 826041904, "node_id": "MDExOlB1bGxSZXF1ZXN0NTg4MDc4MDkz", "number": 3062, "title": "Fix utils/speed_perturb.sh", "user": {"login": "hirofumi0810", "id": 17924227, "node_id": "MDQ6VXNlcjE3OTI0MjI3", "avatar_url": "https://avatars.githubusercontent.com/u/17924227?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hirofumi0810", "html_url": "https://github.com/hirofumi0810", "followers_url": "https://api.github.com/users/hirofumi0810/followers", "following_url": "https://api.github.com/users/hirofumi0810/following{/other_user}", "gists_url": "https://api.github.com/users/hirofumi0810/gists{/gist_id}", "starred_url": "https://api.github.com/users/hirofumi0810/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hirofumi0810/subscriptions", "organizations_url": "https://api.github.com/users/hirofumi0810/orgs", "repos_url": "https://api.github.com/users/hirofumi0810/repos", "events_url": "https://api.github.com/users/hirofumi0810/events{/privacy}", "received_events_url": "https://api.github.com/users/hirofumi0810/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 777173273, "node_id": "MDU6TGFiZWw3NzcxNzMyNzM=", "url": "https://api.github.com/repos/espnet/espnet/labels/Bug", "name": "Bug", "color": "ee0701", "default": false, "description": "bug should be fixed"}, {"id": 1979036564, "node_id": "MDU6TGFiZWwxOTc5MDM2NTY0", "url": "https://api.github.com/repos/espnet/espnet/labels/auto-merge", "name": "auto-merge", "color": "c2e0c6", "default": false, "description": "Enable auto-merge"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/espnet/espnet/milestones/28", "html_url": "https://github.com/espnet/espnet/milestone/28", "labels_url": "https://api.github.com/repos/espnet/espnet/milestones/28/labels", "id": 6491028, "node_id": "MDk6TWlsZXN0b25lNjQ5MTAyOA==", "number": 28, "title": "v.0.9.9", "description": "", "creator": {"login": "kan-bayashi", "id": 22779813, "node_id": "MDQ6VXNlcjIyNzc5ODEz", "avatar_url": "https://avatars.githubusercontent.com/u/22779813?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kan-bayashi", "html_url": "https://github.com/kan-bayashi", "followers_url": "https://api.github.com/users/kan-bayashi/followers", "following_url": "https://api.github.com/users/kan-bayashi/following{/other_user}", "gists_url": "https://api.github.com/users/kan-bayashi/gists{/gist_id}", "starred_url": "https://api.github.com/users/kan-bayashi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kan-bayashi/subscriptions", "organizations_url": "https://api.github.com/users/kan-bayashi/orgs", "repos_url": "https://api.github.com/users/kan-bayashi/repos", "events_url": "https://api.github.com/users/kan-bayashi/events{/privacy}", "received_events_url": "https://api.github.com/users/kan-bayashi/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 44, "state": "closed", "created_at": "2021-03-01T09:50:13Z", "updated_at": "2021-05-29T01:29:53Z", "due_on": "2021-03-31T07:00:00Z", "closed_at": "2021-05-29T01:29:53Z"}, "comments": 1, "created_at": "2021-03-09T14:45:47Z", "updated_at": "2021-04-04T03:53:55Z", "closed_at": "2021-03-09T21:10:14Z", "author_association": "COLLABORATOR", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/espnet/espnet/pulls/3062", "html_url": "https://github.com/espnet/espnet/pull/3062", "diff_url": "https://github.com/espnet/espnet/pull/3062.diff", "patch_url": "https://github.com/espnet/espnet/pull/3062.patch", "merged_at": "2021-03-09T21:10:14Z"}, "body": "Fixed a bug when used for ASR recipes.\r\nThe current implementation overwrites `text` in the `for` loop, which was pointed out by @pengchengguo.", "reactions": {"url": "https://api.github.com/repos/espnet/espnet/issues/3062/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/espnet/espnet/issues/3062/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/espnet/espnet/issues/3049", "repository_url": "https://api.github.com/repos/espnet/espnet", "labels_url": "https://api.github.com/repos/espnet/espnet/issues/3049/labels{/name}", "comments_url": "https://api.github.com/repos/espnet/espnet/issues/3049/comments", "events_url": "https://api.github.com/repos/espnet/espnet/issues/3049/events", "html_url": "https://github.com/espnet/espnet/pull/3049", "id": 823265405, "node_id": "MDExOlB1bGxSZXF1ZXN0NTg1NzUzNTUx", "number": 3049, "title": "Bugfix for download_and_untar for nahuatl", "user": {"login": "ftshijt", "id": 22814472, "node_id": "MDQ6VXNlcjIyODE0NDcy", "avatar_url": "https://avatars.githubusercontent.com/u/22814472?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ftshijt", "html_url": "https://github.com/ftshijt", "followers_url": "https://api.github.com/users/ftshijt/followers", "following_url": "https://api.github.com/users/ftshijt/following{/other_user}", "gists_url": "https://api.github.com/users/ftshijt/gists{/gist_id}", "starred_url": "https://api.github.com/users/ftshijt/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ftshijt/subscriptions", "organizations_url": "https://api.github.com/users/ftshijt/orgs", "repos_url": "https://api.github.com/users/ftshijt/repos", "events_url": "https://api.github.com/users/ftshijt/events{/privacy}", "received_events_url": "https://api.github.com/users/ftshijt/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 777173273, "node_id": "MDU6TGFiZWw3NzcxNzMyNzM=", "url": "https://api.github.com/repos/espnet/espnet/labels/Bug", "name": "Bug", "color": "ee0701", "default": false, "description": "bug should be fixed"}, {"id": 1356233216, "node_id": "MDU6TGFiZWwxMzU2MjMzMjE2", "url": "https://api.github.com/repos/espnet/espnet/labels/Recipe", "name": "Recipe", "color": "f7e171", "default": false, "description": ""}, {"id": 1680978730, "node_id": "MDU6TGFiZWwxNjgwOTc4NzMw", "url": "https://api.github.com/repos/espnet/espnet/labels/ASR", "name": "ASR", "color": "3ee0d5", "default": false, "description": "Automatic speech recogntion"}, {"id": 2288028984, "node_id": "MDU6TGFiZWwyMjg4MDI4OTg0", "url": "https://api.github.com/repos/espnet/espnet/labels/ESPnet1", "name": "ESPnet1", "color": "0a68d3", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/espnet/espnet/milestones/28", "html_url": "https://github.com/espnet/espnet/milestone/28", "labels_url": "https://api.github.com/repos/espnet/espnet/milestones/28/labels", "id": 6491028, "node_id": "MDk6TWlsZXN0b25lNjQ5MTAyOA==", "number": 28, "title": "v.0.9.9", "description": "", "creator": {"login": "kan-bayashi", "id": 22779813, "node_id": "MDQ6VXNlcjIyNzc5ODEz", "avatar_url": "https://avatars.githubusercontent.com/u/22779813?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kan-bayashi", "html_url": "https://github.com/kan-bayashi", "followers_url": "https://api.github.com/users/kan-bayashi/followers", "following_url": "https://api.github.com/users/kan-bayashi/following{/other_user}", "gists_url": "https://api.github.com/users/kan-bayashi/gists{/gist_id}", "starred_url": "https://api.github.com/users/kan-bayashi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kan-bayashi/subscriptions", "organizations_url": "https://api.github.com/users/kan-bayashi/orgs", "repos_url": "https://api.github.com/users/kan-bayashi/repos", "events_url": "https://api.github.com/users/kan-bayashi/events{/privacy}", "received_events_url": "https://api.github.com/users/kan-bayashi/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 44, "state": "closed", "created_at": "2021-03-01T09:50:13Z", "updated_at": "2021-05-29T01:29:53Z", "due_on": "2021-03-31T07:00:00Z", "closed_at": "2021-05-29T01:29:53Z"}, "comments": 1, "created_at": "2021-03-05T17:05:03Z", "updated_at": "2022-09-01T07:59:19Z", "closed_at": "2021-03-05T20:31:19Z", "author_association": "COLLABORATOR", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/espnet/espnet/pulls/3049", "html_url": "https://github.com/espnet/espnet/pull/3049", "diff_url": "https://github.com/espnet/espnet/pull/3049.diff", "patch_url": "https://github.com/espnet/espnet/pull/3049.patch", "merged_at": "2021-03-05T20:31:19Z"}, "body": "1. add `-N` for download and untar to skip downloading\r\n2. fix bug for concat multiple parts", "reactions": {"url": "https://api.github.com/repos/espnet/espnet/issues/3049/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/espnet/espnet/issues/3049/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/espnet/espnet/issues/3044", "repository_url": "https://api.github.com/repos/espnet/espnet", "labels_url": "https://api.github.com/repos/espnet/espnet/issues/3044/labels{/name}", "comments_url": "https://api.github.com/repos/espnet/espnet/issues/3044/comments", "events_url": "https://api.github.com/repos/espnet/espnet/issues/3044/events", "html_url": "https://github.com/espnet/espnet/pull/3044", "id": 822273764, "node_id": "MDExOlB1bGxSZXF1ZXN0NTg0OTI1NzQ3", "number": 3044, "title": "Typo fixed for nahuatl recipe", "user": {"login": "ftshijt", "id": 22814472, "node_id": "MDQ6VXNlcjIyODE0NDcy", "avatar_url": "https://avatars.githubusercontent.com/u/22814472?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ftshijt", "html_url": "https://github.com/ftshijt", "followers_url": "https://api.github.com/users/ftshijt/followers", "following_url": "https://api.github.com/users/ftshijt/following{/other_user}", "gists_url": "https://api.github.com/users/ftshijt/gists{/gist_id}", "starred_url": "https://api.github.com/users/ftshijt/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ftshijt/subscriptions", "organizations_url": "https://api.github.com/users/ftshijt/orgs", "repos_url": "https://api.github.com/users/ftshijt/repos", "events_url": "https://api.github.com/users/ftshijt/events{/privacy}", "received_events_url": "https://api.github.com/users/ftshijt/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 777173273, "node_id": "MDU6TGFiZWw3NzcxNzMyNzM=", "url": "https://api.github.com/repos/espnet/espnet/labels/Bug", "name": "Bug", "color": "ee0701", "default": false, "description": "bug should be fixed"}, {"id": 1356233216, "node_id": "MDU6TGFiZWwxMzU2MjMzMjE2", "url": "https://api.github.com/repos/espnet/espnet/labels/Recipe", "name": "Recipe", "color": "f7e171", "default": false, "description": ""}, {"id": 2288028984, "node_id": "MDU6TGFiZWwyMjg4MDI4OTg0", "url": "https://api.github.com/repos/espnet/espnet/labels/ESPnet1", "name": "ESPnet1", "color": "0a68d3", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/espnet/espnet/milestones/28", "html_url": "https://github.com/espnet/espnet/milestone/28", "labels_url": "https://api.github.com/repos/espnet/espnet/milestones/28/labels", "id": 6491028, "node_id": "MDk6TWlsZXN0b25lNjQ5MTAyOA==", "number": 28, "title": "v.0.9.9", "description": "", "creator": {"login": "kan-bayashi", "id": 22779813, "node_id": "MDQ6VXNlcjIyNzc5ODEz", "avatar_url": "https://avatars.githubusercontent.com/u/22779813?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kan-bayashi", "html_url": "https://github.com/kan-bayashi", "followers_url": "https://api.github.com/users/kan-bayashi/followers", "following_url": "https://api.github.com/users/kan-bayashi/following{/other_user}", "gists_url": "https://api.github.com/users/kan-bayashi/gists{/gist_id}", "starred_url": "https://api.github.com/users/kan-bayashi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kan-bayashi/subscriptions", "organizations_url": "https://api.github.com/users/kan-bayashi/orgs", "repos_url": "https://api.github.com/users/kan-bayashi/repos", "events_url": "https://api.github.com/users/kan-bayashi/events{/privacy}", "received_events_url": "https://api.github.com/users/kan-bayashi/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 44, "state": "closed", "created_at": "2021-03-01T09:50:13Z", "updated_at": "2021-05-29T01:29:53Z", "due_on": "2021-03-31T07:00:00Z", "closed_at": "2021-05-29T01:29:53Z"}, "comments": 1, "created_at": "2021-03-04T16:06:12Z", "updated_at": "2021-04-04T03:54:56Z", "closed_at": "2021-03-04T22:00:23Z", "author_association": "COLLABORATOR", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/espnet/espnet/pulls/3044", "html_url": "https://github.com/espnet/espnet/pull/3044", "diff_url": "https://github.com/espnet/espnet/pull/3044.diff", "patch_url": "https://github.com/espnet/espnet/pull/3044.patch", "merged_at": "2021-03-04T22:00:23Z"}, "body": "", "reactions": {"url": "https://api.github.com/repos/espnet/espnet/issues/3044/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/espnet/espnet/issues/3044/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/espnet/espnet/issues/3031", "repository_url": "https://api.github.com/repos/espnet/espnet", "labels_url": "https://api.github.com/repos/espnet/espnet/issues/3031/labels{/name}", "comments_url": "https://api.github.com/repos/espnet/espnet/issues/3031/comments", "events_url": "https://api.github.com/repos/espnet/espnet/issues/3031/events", "html_url": "https://github.com/espnet/espnet/issues/3031", "id": 818929228, "node_id": "MDU6SXNzdWU4MTg5MjkyMjg=", "number": 3031, "title": " how to fix special layers(load pre-trained model and don't update it) in espnet2 ?", "user": {"login": "shanguanma", "id": 39255927, "node_id": "MDQ6VXNlcjM5MjU1OTI3", "avatar_url": "https://avatars.githubusercontent.com/u/39255927?v=4", "gravatar_id": "", "url": "https://api.github.com/users/shanguanma", "html_url": "https://github.com/shanguanma", "followers_url": "https://api.github.com/users/shanguanma/followers", "following_url": "https://api.github.com/users/shanguanma/following{/other_user}", "gists_url": "https://api.github.com/users/shanguanma/gists{/gist_id}", "starred_url": "https://api.github.com/users/shanguanma/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/shanguanma/subscriptions", "organizations_url": "https://api.github.com/users/shanguanma/orgs", "repos_url": "https://api.github.com/users/shanguanma/repos", "events_url": "https://api.github.com/users/shanguanma/events{/privacy}", "received_events_url": "https://api.github.com/users/shanguanma/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 777173273, "node_id": "MDU6TGFiZWw3NzcxNzMyNzM=", "url": "https://api.github.com/repos/espnet/espnet/labels/Bug", "name": "Bug", "color": "ee0701", "default": false, "description": "bug should be fixed"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2021-03-01T14:38:51Z", "updated_at": "2021-03-01T16:42:02Z", "closed_at": "2021-03-01T16:42:01Z", "author_association": "NONE", "active_lock_reason": null, "body": "When I am working on the joint enhanced model and asr model based on espnet2,  But I want to load a pre-trained enhanced model and fixed it, and only update the parameter of the ASR model. I put the below code into the trainer.py.\r\n```\r\nfor module in dp_model.modules():\r\n            #logging.info(f\"dp_model contain module is {module}\")\r\n            if module._get_name() == 'TFMaskingNet1':  #(this is my modified enhanced model)\r\n                logging.info(f\"layer: {module._get_name()}\")\r\n                for param in module.parameters():\r\n                    param.requires_grad_(False)\r\n                    logging.info(f\"param should be no grad , {param}\")\r\n```\r\nI compared the log between the enhanced module output of the joint model and the pure output of the enhanced model, The results are different. I don't know that whether it is correct or not. Could you help me? Thanks ", "reactions": {"url": "https://api.github.com/repos/espnet/espnet/issues/3031/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/espnet/espnet/issues/3031/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/espnet/espnet/issues/3020", "repository_url": "https://api.github.com/repos/espnet/espnet", "labels_url": "https://api.github.com/repos/espnet/espnet/issues/3020/labels{/name}", "comments_url": "https://api.github.com/repos/espnet/espnet/issues/3020/comments", "events_url": "https://api.github.com/repos/espnet/espnet/issues/3020/events", "html_url": "https://github.com/espnet/espnet/issues/3020", "id": 817081166, "node_id": "MDU6SXNzdWU4MTcwODExNjY=", "number": 3020, "title": "\"can't set attribute\" in lm_train.py", "user": {"login": "jimbozhang", "id": 1777456, "node_id": "MDQ6VXNlcjE3Nzc0NTY=", "avatar_url": "https://avatars.githubusercontent.com/u/1777456?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jimbozhang", "html_url": "https://github.com/jimbozhang", "followers_url": "https://api.github.com/users/jimbozhang/followers", "following_url": "https://api.github.com/users/jimbozhang/following{/other_user}", "gists_url": "https://api.github.com/users/jimbozhang/gists{/gist_id}", "starred_url": "https://api.github.com/users/jimbozhang/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jimbozhang/subscriptions", "organizations_url": "https://api.github.com/users/jimbozhang/orgs", "repos_url": "https://api.github.com/users/jimbozhang/repos", "events_url": "https://api.github.com/users/jimbozhang/events{/privacy}", "received_events_url": "https://api.github.com/users/jimbozhang/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 777173273, "node_id": "MDU6TGFiZWw3NzcxNzMyNzM=", "url": "https://api.github.com/repos/espnet/espnet/labels/Bug", "name": "Bug", "color": "ee0701", "default": false, "description": "bug should be fixed"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2021-02-26T06:27:05Z", "updated_at": "2021-02-26T08:53:10Z", "closed_at": "2021-02-26T08:53:10Z", "author_association": "NONE", "active_lock_reason": null, "body": "**Describe the bug**\r\nPlease check the \"To Reproduce\" and the \"Error logs\" parts.\r\n\r\n**Basic environments:**\r\n```\r\n- python version: `3.8.6 (default, Oct 27 2020, 09:13:12)  [GCC 9.3.1 20200408 (Red Hat 9.3.1-2)]`\r\n- espnet version: `espnet 0.9.7`\r\n- pytorch version: `pytorch 1.4.0`\r\n- Git hash: `7b78b65aa99bac67e2666236c54f78c3301387aa`\r\n  - Commit date: `Thu Feb 25 18:49:26 2021 +0000`\r\n```\r\n\r\n**Environments from `torch.utils.collect_env`:**\r\n```\r\nCollecting environment information...\r\nPyTorch version: 1.4.0\r\nIs debug build: No\r\nCUDA used to build PyTorch: 10.1\r\n\r\nOS: CentOS Linux release 7.3.1611 (Core)\r\nGCC version: (GCC) 4.8.5 20150623 (Red Hat 4.8.5-28)\r\nCMake version: version 3.18.4\r\n\r\nPython version: 3.8\r\nIs CUDA available: Yes\r\nCUDA runtime version: Could not collect\r\nGPU models and configuration:\r\nGPU 0: Tesla V100-PCIE-32GB\r\nGPU 1: Tesla V100-PCIE-32GB\r\nGPU 2: Tesla V100-PCIE-32GB\r\nGPU 3: Tesla V100-PCIE-32GB\r\nGPU 4: Tesla V100-PCIE-32GB\r\nGPU 5: Tesla V100-PCIE-32GB\r\nGPU 6: Tesla V100-PCIE-32GB\r\nGPU 7: Tesla V100-PCIE-32GB\r\n\r\nNvidia driver version: 450.51.06\r\ncuDNN version: Probably one of the following:\r\n/usr/local/cuda-11.0/targets/x86_64-linux/lib/libcudnn.so.8\r\n/usr/local/cuda-11.0/targets/x86_64-linux/lib/libcudnn_adv_infer.so\r\n/usr/local/cuda-11.0/targets/x86_64-linux/lib/libcudnn_adv_train.so\r\n/usr/local/cuda-11.0/targets/x86_64-linux/lib/libcudnn_cnn_infer.so\r\n/usr/local/cuda-11.0/targets/x86_64-linux/lib/libcudnn_cnn_train.so\r\n/usr/local/cuda-11.0/targets/x86_64-linux/lib/libcudnn_ops_infer.so.8\r\n/usr/local/cuda-11.0/targets/x86_64-linux/lib/libcudnn_ops_train.so.8\r\n\r\nVersions of relevant libraries:\r\n[pip3] numpy==1.20.1\r\n[pip3] pytorch-ranger==0.1.1\r\n[pip3] pytorch-wpe==0.0.0\r\n[pip3] torch==1.4.0\r\n[pip3] torch-complex==0.2.0\r\n[pip3] torch-optimizer==0.1.0\r\n[pip3] torchaudio==0.4.0\r\n```\r\n\r\n**Task information:**\r\n - Task: ASR\r\n - Recipe: librispeech\r\n - ESPnet1\r\n\r\n**To Reproduce**\r\nSteps to reproduce the behavior:\r\n1. move the libirispeech recipe directory: `cd egs/librispeech/asr1`\r\n2. execute `run.sh`, without any extra arguments\r\n3. the error log: `exp/train_rnnlm_pytorch_lm_unigram5000_ngpu8/train.log`\r\n\r\n**Error logs**\r\n```\r\n# lm_train.py --config conf/lm.yaml --ngpu 8 --backend pytorch --verbose 1 --outdir exp/train_rnnlm_pytorch_lm_unigram5000_ngpu8 --tensorboard-dir tensorboard/train_rnnlm_pytorch_lm_unigram5000_ngpu8 --train-label data/local/lm_train_unigram5000/train.txt --valid-label data/local/lm_train_unigram5000/valid.txt --resume --dict data/lang_char/train_960_unigram5000_units.txt --dump-hdf5-path data/local/lm_train_unigram5000\r\n# Started at Fri Feb 26 14:07:05 CST 2021\r\n#\r\n2021-02-26 14:07:06,373 (lm_train:254) INFO: ngpu: 8\r\n2021-02-26 14:07:06,373 (lm_train:257) INFO: python path = (None)\r\n2021-02-26 14:07:06,377 (lm_train:274) INFO: backend = pytorch\r\n2021-02-26 14:07:07,477 (lm:223) INFO: torch version = 1.4.0\r\n2021-02-26 14:07:07,478 (deterministic_utils:26) INFO: torch type check is disabled\r\n2021-02-26 14:07:17,731 (lm_utils:40) INFO: loading binary dataset: data/local/lm_train_unigram5000/valid.txt.h5\r\n2021-02-26 14:07:17,774 (lm_utils:40) INFO: loading binary dataset: data/local/lm_train_unigram5000/train.txt.h5\r\n2021-02-26 14:08:45,924 (lm:241) INFO: #vocab = 5002\r\n2021-02-26 14:08:45,924 (lm:242) INFO: #sentences in the training data = 40699491\r\n2021-02-26 14:08:45,925 (lm:243) INFO: #tokens in the training data = 1022396479\r\n2021-02-26 14:08:45,925 (lm:244) INFO: oov rate in the training data = 0.00 %\r\n2021-02-26 14:08:45,925 (lm:248) INFO: #sentences in the validation data = 5542\r\n2021-02-26 14:08:45,925 (lm:249) INFO: #tokens in the validation data = 128689\r\n2021-02-26 14:08:45,925 (lm:250) INFO: oov rate in the validation data = 0.00 %\r\n2021-02-26 14:08:45,925 (lm:258) INFO: batch size is automatically increased (32 -> 256)\r\n2021-02-26 14:09:15,590 (lm:274) INFO: #iterations per epoch = 191667\r\n2021-02-26 14:09:15,590 (lm:275) INFO: #total iterations = 9583350\r\n2021-02-26 14:09:15,614 (encoder:151) INFO: encoder self-attention layer type = self-attention\r\n2021-02-26 14:09:19,447 (lm:291) INFO: writing a model config file to exp/train_rnnlm_pytorch_lm_unigram5000_ngpu8/model.json\r\n2021-02-26 14:09:19,459 (lm:298) WARNING: num. model params: 53,712,522 (num. trained: 53,712,522 (100.0%))\r\n\r\n2021-02-26 14:09:19,461 (lm:337) INFO: gpu_id: [0, 1, 2, 3, 4, 5, 6, 7]   # I made this log line for debugging\r\n2021-02-26 14:09:19,461 (lm:119) INFO: device: [0, 1, 2, 3, 4, 5, 6, 7]   # I made this log line for debugging\r\n\r\nTraceback (most recent call last):\r\n  File \"/home/zj/src/espnet/egs/librispeech/asr1/../../../espnet/bin/lm_train.py\", line 288, in <module>\r\n    main(sys.argv[1:])\r\n  File \"/home/zj/src/espnet/egs/librispeech/asr1/../../../espnet/bin/lm_train.py\", line 282, in main\r\n    train(args)\r\n  File \"/home/zj/src/espnet/espnet/lm/pytorch_backend/lm.py\", line 338, in train\r\n    updater = BPTTUpdater(\r\n  File \"/home/zj/src/espnet/espnet/lm/pytorch_backend/lm.py\", line 120, in __init__\r\n    self.device = device\r\nAttributeError: can't set attribute\r\n# Accounting: time=147 threads=1\r\n# Ended (code 1) at Fri Feb 26 14:09:32 CST 2021, elapsed time 147 seconds\r\n```\r\n", "reactions": {"url": "https://api.github.com/repos/espnet/espnet/issues/3020/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/espnet/espnet/issues/3020/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/espnet/espnet/issues/3017", "repository_url": "https://api.github.com/repos/espnet/espnet", "labels_url": "https://api.github.com/repos/espnet/espnet/issues/3017/labels{/name}", "comments_url": "https://api.github.com/repos/espnet/espnet/issues/3017/comments", "events_url": "https://api.github.com/repos/espnet/espnet/issues/3017/events", "html_url": "https://github.com/espnet/espnet/issues/3017", "id": 816870232, "node_id": "MDU6SXNzdWU4MTY4NzAyMzI=", "number": 3017, "title": "Error with using compute-fbank-feats.py", "user": {"login": "MNCTTY", "id": 37251686, "node_id": "MDQ6VXNlcjM3MjUxNjg2", "avatar_url": "https://avatars.githubusercontent.com/u/37251686?v=4", "gravatar_id": "", "url": "https://api.github.com/users/MNCTTY", "html_url": "https://github.com/MNCTTY", "followers_url": "https://api.github.com/users/MNCTTY/followers", "following_url": "https://api.github.com/users/MNCTTY/following{/other_user}", "gists_url": "https://api.github.com/users/MNCTTY/gists{/gist_id}", "starred_url": "https://api.github.com/users/MNCTTY/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/MNCTTY/subscriptions", "organizations_url": "https://api.github.com/users/MNCTTY/orgs", "repos_url": "https://api.github.com/users/MNCTTY/repos", "events_url": "https://api.github.com/users/MNCTTY/events{/privacy}", "received_events_url": "https://api.github.com/users/MNCTTY/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 777173273, "node_id": "MDU6TGFiZWw3NzcxNzMyNzM=", "url": "https://api.github.com/repos/espnet/espnet/labels/Bug", "name": "Bug", "color": "ee0701", "default": false, "description": "bug should be fixed"}, {"id": 2288028984, "node_id": "MDU6TGFiZWwyMjg4MDI4OTg0", "url": "https://api.github.com/repos/espnet/espnet/labels/ESPnet1", "name": "ESPnet1", "color": "0a68d3", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2021-02-25T22:47:05Z", "updated_at": "2021-02-26T11:19:21Z", "closed_at": "2021-02-26T10:47:16Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hello! I tried to use script compute-fbank-feats.py to compute fbank features from wav, and tried to use it according to its documentation https://espnet.github.io/espnet/apis/utils_py.html#compute-fbank-feats-py\r\n\r\nas folllows:\r\n```\r\npython3.7 utils/compute-fbank-feats.py scp:wav.scp ark:out.ark\r\n```\r\n\r\nbut got an error:\r\n\r\n```\r\n  File \"utils/compute-fbank-feats.py\", line 134, in <module>\r\n    main()\r\n  File \"utils/compute-fbank-feats.py\", line 128, in main\r\n    fmax=args.fmax,\r\n  File \"/home/karina/.local/lib/python3.7/site-packages/espnet/transform/spectrogram.py\", line 116, in logmelspectrogram\r\n    x_stft, fs=fs, n_mels=n_mels, n_fft=n_fft, fmin=fmin, fmax=fmax, eps=eps\r\n  File \"/home/karina/.local/lib/python3.7/site-packages/espnet/transform/spectrogram.py\", line 74, in stft2logmelspectrogram\r\n    fmax = fs / 2 if fmax is None else fmax\r\nTypeError: unsupported operand type(s) for /: 'NoneType' and 'int'\r\n```\r\n\r\nwav.scp contains this text:\r\n```\r\n0 test.wav\r\n```\r\n\r\nDoes anyone have ideas how to solve this error?", "reactions": {"url": "https://api.github.com/repos/espnet/espnet/issues/3017/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/espnet/espnet/issues/3017/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/espnet/espnet/issues/3012", "repository_url": "https://api.github.com/repos/espnet/espnet", "labels_url": "https://api.github.com/repos/espnet/espnet/issues/3012/labels{/name}", "comments_url": "https://api.github.com/repos/espnet/espnet/issues/3012/comments", "events_url": "https://api.github.com/repos/espnet/espnet/issues/3012/events", "html_url": "https://github.com/espnet/espnet/pull/3012", "id": 815427505, "node_id": "MDExOlB1bGxSZXF1ZXN0NTc5MjU5MDMx", "number": 3012, "title": "Fix local/remove_punctuation.pl -> remove_punctuation.pl", "user": {"login": "hirofumi0810", "id": 17924227, "node_id": "MDQ6VXNlcjE3OTI0MjI3", "avatar_url": "https://avatars.githubusercontent.com/u/17924227?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hirofumi0810", "html_url": "https://github.com/hirofumi0810", "followers_url": "https://api.github.com/users/hirofumi0810/followers", "following_url": "https://api.github.com/users/hirofumi0810/following{/other_user}", "gists_url": "https://api.github.com/users/hirofumi0810/gists{/gist_id}", "starred_url": "https://api.github.com/users/hirofumi0810/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hirofumi0810/subscriptions", "organizations_url": "https://api.github.com/users/hirofumi0810/orgs", "repos_url": "https://api.github.com/users/hirofumi0810/repos", "events_url": "https://api.github.com/users/hirofumi0810/events{/privacy}", "received_events_url": "https://api.github.com/users/hirofumi0810/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 777173273, "node_id": "MDU6TGFiZWw3NzcxNzMyNzM=", "url": "https://api.github.com/repos/espnet/espnet/labels/Bug", "name": "Bug", "color": "ee0701", "default": false, "description": "bug should be fixed"}, {"id": 1979036564, "node_id": "MDU6TGFiZWwxOTc5MDM2NTY0", "url": "https://api.github.com/repos/espnet/espnet/labels/auto-merge", "name": "auto-merge", "color": "c2e0c6", "default": false, "description": "Enable auto-merge"}, {"id": 2288028984, "node_id": "MDU6TGFiZWwyMjg4MDI4OTg0", "url": "https://api.github.com/repos/espnet/espnet/labels/ESPnet1", "name": "ESPnet1", "color": "0a68d3", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2021-02-24T12:21:44Z", "updated_at": "2021-02-24T13:08:25Z", "closed_at": "2021-02-24T13:08:13Z", "author_association": "COLLABORATOR", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/espnet/espnet/pulls/3012", "html_url": "https://github.com/espnet/espnet/pull/3012", "diff_url": "https://github.com/espnet/espnet/pull/3012.diff", "patch_url": "https://github.com/espnet/espnet/pull/3012.patch", "merged_at": "2021-02-24T13:08:13Z"}, "body": "Fixed missing lines in #2975.", "reactions": {"url": "https://api.github.com/repos/espnet/espnet/issues/3012/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/espnet/espnet/issues/3012/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/espnet/espnet/issues/3003", "repository_url": "https://api.github.com/repos/espnet/espnet", "labels_url": "https://api.github.com/repos/espnet/espnet/issues/3003/labels{/name}", "comments_url": "https://api.github.com/repos/espnet/espnet/issues/3003/comments", "events_url": "https://api.github.com/repos/espnet/espnet/issues/3003/events", "html_url": "https://github.com/espnet/espnet/issues/3003", "id": 812820960, "node_id": "MDU6SXNzdWU4MTI4MjA5NjA=", "number": 3003, "title": "No module named espnet.utils.cli_utils", "user": {"login": "zyzpower", "id": 4137584, "node_id": "MDQ6VXNlcjQxMzc1ODQ=", "avatar_url": "https://avatars.githubusercontent.com/u/4137584?v=4", "gravatar_id": "", "url": "https://api.github.com/users/zyzpower", "html_url": "https://github.com/zyzpower", "followers_url": "https://api.github.com/users/zyzpower/followers", "following_url": "https://api.github.com/users/zyzpower/following{/other_user}", "gists_url": "https://api.github.com/users/zyzpower/gists{/gist_id}", "starred_url": "https://api.github.com/users/zyzpower/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/zyzpower/subscriptions", "organizations_url": "https://api.github.com/users/zyzpower/orgs", "repos_url": "https://api.github.com/users/zyzpower/repos", "events_url": "https://api.github.com/users/zyzpower/events{/privacy}", "received_events_url": "https://api.github.com/users/zyzpower/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 777173273, "node_id": "MDU6TGFiZWw3NzcxNzMyNzM=", "url": "https://api.github.com/repos/espnet/espnet/labels/Bug", "name": "Bug", "color": "ee0701", "default": false, "description": "bug should be fixed"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2021-02-21T10:19:01Z", "updated_at": "2022-08-23T09:11:20Z", "closed_at": "2022-08-23T09:11:20Z", "author_association": "NONE", "active_lock_reason": null, "body": "I have a bug when I run asr transformer stage 5 decoding.\r\nutils/splitjson.py\", line 20, in <module>\r\n    ImportErrorfrom espnet.utils.cli_utils import get_commandline_args\r\n: No module named espnet.utils.cli_utils\r\n\r\n**Basic environments:**\r\n - OS information: Linux 3.10.0-327.ali2012.alios7.x86_64 #1 SMP Mon Oct 9 14:09:14 CST 2017 x86_64\r\n - python version: 3.6.8\r\n - espnet version: 0.4.0\r\n - Git hash f6b55b38a8b5e12a7b88df887dd7d5aa5cd0f6e0\r\n   - Commit date `Wed Jun 26 12:40:31 2019 -0400`\r\n - pytorch version 1.7.1\r\n \r\nI checked that there is no cli_utils file,  can you help?", "reactions": {"url": "https://api.github.com/repos/espnet/espnet/issues/3003/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/espnet/espnet/issues/3003/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/espnet/espnet/issues/2984", "repository_url": "https://api.github.com/repos/espnet/espnet", "labels_url": "https://api.github.com/repos/espnet/espnet/issues/2984/labels{/name}", "comments_url": "https://api.github.com/repos/espnet/espnet/issues/2984/comments", "events_url": "https://api.github.com/repos/espnet/espnet/issues/2984/events", "html_url": "https://github.com/espnet/espnet/issues/2984", "id": 810948476, "node_id": "MDU6SXNzdWU4MTA5NDg0NzY=", "number": 2984, "title": "`TypeError: plotfn() takes from 4 to 6 positional arguments but 7 were given` in Transformer-TTS", "user": {"login": "KAIMAN0", "id": 42691227, "node_id": "MDQ6VXNlcjQyNjkxMjI3", "avatar_url": "https://avatars.githubusercontent.com/u/42691227?v=4", "gravatar_id": "", "url": "https://api.github.com/users/KAIMAN0", "html_url": "https://github.com/KAIMAN0", "followers_url": "https://api.github.com/users/KAIMAN0/followers", "following_url": "https://api.github.com/users/KAIMAN0/following{/other_user}", "gists_url": "https://api.github.com/users/KAIMAN0/gists{/gist_id}", "starred_url": "https://api.github.com/users/KAIMAN0/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/KAIMAN0/subscriptions", "organizations_url": "https://api.github.com/users/KAIMAN0/orgs", "repos_url": "https://api.github.com/users/KAIMAN0/repos", "events_url": "https://api.github.com/users/KAIMAN0/events{/privacy}", "received_events_url": "https://api.github.com/users/KAIMAN0/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 777173273, "node_id": "MDU6TGFiZWw3NzcxNzMyNzM=", "url": "https://api.github.com/repos/espnet/espnet/labels/Bug", "name": "Bug", "color": "ee0701", "default": false, "description": "bug should be fixed"}, {"id": 1680978630, "node_id": "MDU6TGFiZWwxNjgwOTc4NjMw", "url": "https://api.github.com/repos/espnet/espnet/labels/TTS", "name": "TTS", "color": "fbca04", "default": false, "description": "Text-to-speech"}, {"id": 2288028984, "node_id": "MDU6TGFiZWwyMjg4MDI4OTg0", "url": "https://api.github.com/repos/espnet/espnet/labels/ESPnet1", "name": "ESPnet1", "color": "0a68d3", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2021-02-18T10:04:47Z", "updated_at": "2021-02-22T03:27:58Z", "closed_at": "2021-02-22T03:27:58Z", "author_association": "NONE", "active_lock_reason": null, "body": "**Describe the bug**\r\nTypeError when train the egs/vcc20/vc1_task1/ also in egs/arctic/vc1/\r\n\r\n**Conda environments:**\r\n - OS information: Ubuntu 18.04\r\n - python version: 3.7\r\n - espnet version: 0.9.7\r\n - Git hash [f1ad94ec49ccb61bcfba0175ae234609cee292a8]\r\n   - Commit date [Thu Feb 18 04:09:51 2021 +0000]\r\n - pytorch version: 1.7.1\r\n - chainer version: 6.0.0\r\n \r\n**Task information:**\r\n - Task: [TTS/VC]\r\n - Recipe: [vcc20/vc1_task1]\r\n - ESPnet1\r\n\r\n**To Reproduce**\r\nSteps to reproduce the behavior:\r\n1. `cd egs/vcc20/vc1_task1/`\r\n2. `./run.sh --stop_stage 6 --spk TEF1 --pretrained_model_name tts1`\r\n3. `exp/xxx/train.log`\r\n\r\n**Error logs**\r\n> 2021-02-18 17:31:44,511 (tts_train:320) WARNING: Skip DEBUG/INFO messages\r\n^[[JException in main training loop: plotfn() takes from 4 to 6 positional arguments but 7 were given\r\nTraceback (most recent call last):\r\n  File \"\\~/anaconda3/envs/espnet/lib/python3.7/site-packages/chainer/training/trainer.py\", line 319, in run\r\n    entry.extension(self)\r\n  File \"\\~/Project/espnet/espnet/utils/training/evaluator.py\", line 15, in __call__\r\n    tb_logger(trainer)\r\n  File \"\\~/Project/espnet/espnet/utils/training/tensorboard_logger.py\", line 45, in __call__\r\n    self._att_reporter.log_attentions(self._logger, trainer.updater.iteration)\r\n  File \"\\~/Project/espnet/espnet/nets/pytorch_backend/transformer/plot.py\", line 146, in log_attentions\r\n    self.plotfn(self.data_dict, uttid_list, attn_dict, self.outdir, \"\", log_fig)\r\nWill finalize trainer extensions and updater before reraising the exception.\r\nTraceback (most recent call last):\r\n  File \"\\~/Project/espnet/egs/vcc20/vc1_task1/../../../espnet/bin/tts_train.py\", line 359, in <module>\r\n    main(sys.argv[1:])\r\n  File \"\\~/Project/espnet/egs/vcc20/vc1_task1/../../../espnet/bin/tts_train.py\", line 353, in main\r\n    train(args)\r\n  File \"\\~/Project/espnet/espnet/tts/pytorch_backend/tts.py\", line 555, in train\r\n    trainer.run()\r\n  File \"\\~/anaconda3/envs/espnet/lib/python3.7/site-packages/chainer/training/trainer.py\", line 349, in run\r\n    six.reraise(*exc_info)\r\n  File \"\\~/anaconda3/envs/espnet/lib/python3.7/site-packages/six.py\", line 703, in reraise\r\n    raise value\r\n  File \"\\~/anaconda3/envs/espnet/lib/python3.7/site-packages/chainer/training/trainer.py\", line 319, in run\r\n    entry.extension(self)\r\n  File \"\\~/Project/espnet/espnet/utils/training/evaluator.py\", line 15, in __call__\r\n    tb_logger(trainer)\r\n  File \"\\~/Project/espnet/espnet/utils/training/tensorboard_logger.py\", line 45, in __call__\r\n    self._att_reporter.log_attentions(self._logger, trainer.updater.iteration)\r\n  File \"\\~/Project/espnet/espnet/nets/pytorch_backend/transformer/plot.py\", line 146, in log_attentions\r\n    self.plotfn(self.data_dict, uttid_list, attn_dict, self.outdir, \"\", log_fig)\r\nTypeError: plotfn() takes from 4 to 6 positional arguments but 7 were given\r\n", "reactions": {"url": "https://api.github.com/repos/espnet/espnet/issues/2984/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/espnet/espnet/issues/2984/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/espnet/espnet/issues/2970", "repository_url": "https://api.github.com/repos/espnet/espnet", "labels_url": "https://api.github.com/repos/espnet/espnet/issues/2970/labels{/name}", "comments_url": "https://api.github.com/repos/espnet/espnet/issues/2970/comments", "events_url": "https://api.github.com/repos/espnet/espnet/issues/2970/events", "html_url": "https://github.com/espnet/espnet/issues/2970", "id": 808766471, "node_id": "MDU6SXNzdWU4MDg3NjY0NzE=", "number": 2970, "title": "Old Docker Version failing recog_wav.sh due to a recent commit to support RNN-T decoding", "user": {"login": "siddalmia", "id": 6648564, "node_id": "MDQ6VXNlcjY2NDg1NjQ=", "avatar_url": "https://avatars.githubusercontent.com/u/6648564?v=4", "gravatar_id": "", "url": "https://api.github.com/users/siddalmia", "html_url": "https://github.com/siddalmia", "followers_url": "https://api.github.com/users/siddalmia/followers", "following_url": "https://api.github.com/users/siddalmia/following{/other_user}", "gists_url": "https://api.github.com/users/siddalmia/gists{/gist_id}", "starred_url": "https://api.github.com/users/siddalmia/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/siddalmia/subscriptions", "organizations_url": "https://api.github.com/users/siddalmia/orgs", "repos_url": "https://api.github.com/users/siddalmia/repos", "events_url": "https://api.github.com/users/siddalmia/events{/privacy}", "received_events_url": "https://api.github.com/users/siddalmia/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 777173273, "node_id": "MDU6TGFiZWw3NzcxNzMyNzM=", "url": "https://api.github.com/repos/espnet/espnet/labels/Bug", "name": "Bug", "color": "ee0701", "default": false, "description": "bug should be fixed"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2021-02-15T19:17:49Z", "updated_at": "2021-02-17T23:41:08Z", "closed_at": "2021-02-17T23:41:08Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "The BeamSearchTransducer function in https://github.com/espnet/espnet/blob/master/espnet/asr/pytorch_backend/asr.py#L38\r\n\r\ncauses old docker versions to fail which do not have espnet-2 installed. \r\n\r\n@b-flo for the time being would it be okay to move this to - https://github.com/espnet/espnet/blob/master/espnet/asr/pytorch_backend/asr.py#L991\r\n\r\nIt seems like it's being used only for the RNN-T decoding.\r\n\r\nThanks\r\nSid", "reactions": {"url": "https://api.github.com/repos/espnet/espnet/issues/2970/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/espnet/espnet/issues/2970/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/espnet/espnet/issues/2964", "repository_url": "https://api.github.com/repos/espnet/espnet", "labels_url": "https://api.github.com/repos/espnet/espnet/issues/2964/labels{/name}", "comments_url": "https://api.github.com/repos/espnet/espnet/issues/2964/comments", "events_url": "https://api.github.com/repos/espnet/espnet/issues/2964/events", "html_url": "https://github.com/espnet/espnet/issues/2964", "id": 807730832, "node_id": "MDU6SXNzdWU4MDc3MzA4MzI=", "number": 2964, "title": "Initializaing Language model for RNN-Transducer ", "user": {"login": "ShreyaKhare", "id": 7338625, "node_id": "MDQ6VXNlcjczMzg2MjU=", "avatar_url": "https://avatars.githubusercontent.com/u/7338625?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ShreyaKhare", "html_url": "https://github.com/ShreyaKhare", "followers_url": "https://api.github.com/users/ShreyaKhare/followers", "following_url": "https://api.github.com/users/ShreyaKhare/following{/other_user}", "gists_url": "https://api.github.com/users/ShreyaKhare/gists{/gist_id}", "starred_url": "https://api.github.com/users/ShreyaKhare/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ShreyaKhare/subscriptions", "organizations_url": "https://api.github.com/users/ShreyaKhare/orgs", "repos_url": "https://api.github.com/users/ShreyaKhare/repos", "events_url": "https://api.github.com/users/ShreyaKhare/events{/privacy}", "received_events_url": "https://api.github.com/users/ShreyaKhare/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 777173273, "node_id": "MDU6TGFiZWw3NzcxNzMyNzM=", "url": "https://api.github.com/repos/espnet/espnet/labels/Bug", "name": "Bug", "color": "ee0701", "default": false, "description": "bug should be fixed"}, {"id": 2288028984, "node_id": "MDU6TGFiZWwyMjg4MDI4OTg0", "url": "https://api.github.com/repos/espnet/espnet/labels/ESPnet1", "name": "ESPnet1", "color": "0a68d3", "default": false, "description": ""}, {"id": 2519100905, "node_id": "MDU6TGFiZWwyNTE5MTAwOTA1", "url": "https://api.github.com/repos/espnet/espnet/labels/RNNT", "name": "RNNT", "color": "0e8a16", "default": false, "description": "(RNN) transducer related issue"}], "state": "closed", "locked": false, "assignee": {"login": "b-flo", "id": 41155456, "node_id": "MDQ6VXNlcjQxMTU1NDU2", "avatar_url": "https://avatars.githubusercontent.com/u/41155456?v=4", "gravatar_id": "", "url": "https://api.github.com/users/b-flo", "html_url": "https://github.com/b-flo", "followers_url": "https://api.github.com/users/b-flo/followers", "following_url": "https://api.github.com/users/b-flo/following{/other_user}", "gists_url": "https://api.github.com/users/b-flo/gists{/gist_id}", "starred_url": "https://api.github.com/users/b-flo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/b-flo/subscriptions", "organizations_url": "https://api.github.com/users/b-flo/orgs", "repos_url": "https://api.github.com/users/b-flo/repos", "events_url": "https://api.github.com/users/b-flo/events{/privacy}", "received_events_url": "https://api.github.com/users/b-flo/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "b-flo", "id": 41155456, "node_id": "MDQ6VXNlcjQxMTU1NDU2", "avatar_url": "https://avatars.githubusercontent.com/u/41155456?v=4", "gravatar_id": "", "url": "https://api.github.com/users/b-flo", "html_url": "https://github.com/b-flo", "followers_url": "https://api.github.com/users/b-flo/followers", "following_url": "https://api.github.com/users/b-flo/following{/other_user}", "gists_url": "https://api.github.com/users/b-flo/gists{/gist_id}", "starred_url": "https://api.github.com/users/b-flo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/b-flo/subscriptions", "organizations_url": "https://api.github.com/users/b-flo/orgs", "repos_url": "https://api.github.com/users/b-flo/repos", "events_url": "https://api.github.com/users/b-flo/events{/privacy}", "received_events_url": "https://api.github.com/users/b-flo/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 1, "created_at": "2021-02-13T11:27:13Z", "updated_at": "2021-02-18T16:56:59Z", "closed_at": "2021-02-18T16:56:59Z", "author_association": "NONE", "active_lock_reason": null, "body": "I am trying to initialise the  RNN-decoder using pre-trained language model with a similar architecture (dlayers, dunits) . \r\nI get following warning messages : \r\n```\r\n2021-02-12 13:34:53,311 (asr_init:259) WARNING: model(s) found for pre-initialization\r\n2021-02-12 13:34:53,315 (asr_init:203) WARNING: reading model parameters from /exp/train_rnnlm_pytorch_rnnt4_rnnlm_char/rnnlm.model.20\r\n2021-02-12 13:34:58,336 (asr_init:150) WARNING: module(s) ['att.', ' dec.'] don't match or (partially match) available modules in model.\r\n2021-02-12 13:34:58,337 (asr_init:152) WARNING: for information, the existing modules in model are:\r\n2021-02-12 13:34:58,337 (asr_init:153) WARNING: ['predictor.embed.weight', 'predictor.rnn.0.weight_ih', 'predictor.rnn.0.weight_hh', 'predictor.rnn.0.bias_ih', 'predictor.rnn.0.bias_hh', 'predictor.lo.weight', 'predictor.lo.bias']\r\n2021-02-12 13:34:58,337 (asr_init:243) WARNING: loading [] from model: exp/train_rnnlm_pytorch_rnnt4_rnnlm_char/rnnlm.model.20\r\ne\r\n```\r\nIt seems the initalization is not correct, It will be great if somebody can point to sample configuration to do the same.  \r\nThanks", "reactions": {"url": "https://api.github.com/repos/espnet/espnet/issues/2964/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/espnet/espnet/issues/2964/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/espnet/espnet/issues/2954", "repository_url": "https://api.github.com/repos/espnet/espnet", "labels_url": "https://api.github.com/repos/espnet/espnet/issues/2954/labels{/name}", "comments_url": "https://api.github.com/repos/espnet/espnet/issues/2954/comments", "events_url": "https://api.github.com/repos/espnet/espnet/issues/2954/events", "html_url": "https://github.com/espnet/espnet/issues/2954", "id": 805261917, "node_id": "MDU6SXNzdWU4MDUyNjE5MTc=", "number": 2954, "title": "How to use ESPNET2 to build a model using as a library?", "user": {"login": "weiyengs", "id": 38935956, "node_id": "MDQ6VXNlcjM4OTM1OTU2", "avatar_url": "https://avatars.githubusercontent.com/u/38935956?v=4", "gravatar_id": "", "url": "https://api.github.com/users/weiyengs", "html_url": "https://github.com/weiyengs", "followers_url": "https://api.github.com/users/weiyengs/followers", "following_url": "https://api.github.com/users/weiyengs/following{/other_user}", "gists_url": "https://api.github.com/users/weiyengs/gists{/gist_id}", "starred_url": "https://api.github.com/users/weiyengs/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/weiyengs/subscriptions", "organizations_url": "https://api.github.com/users/weiyengs/orgs", "repos_url": "https://api.github.com/users/weiyengs/repos", "events_url": "https://api.github.com/users/weiyengs/events{/privacy}", "received_events_url": "https://api.github.com/users/weiyengs/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 777173273, "node_id": "MDU6TGFiZWw3NzcxNzMyNzM=", "url": "https://api.github.com/repos/espnet/espnet/labels/Bug", "name": "Bug", "color": "ee0701", "default": false, "description": "bug should be fixed"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2021-02-10T07:37:13Z", "updated_at": "2022-08-23T09:13:09Z", "closed_at": "2022-08-23T09:13:09Z", "author_association": "NONE", "active_lock_reason": null, "body": "I see that there are examples for ESPNET1, are there any example notebooks for ESPNET2?\r\n\r\nLooking to train a ASR model from scratch..\r\n\r\nThanks!", "reactions": {"url": "https://api.github.com/repos/espnet/espnet/issues/2954/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/espnet/espnet/issues/2954/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/espnet/espnet/issues/2931", "repository_url": "https://api.github.com/repos/espnet/espnet", "labels_url": "https://api.github.com/repos/espnet/espnet/issues/2931/labels{/name}", "comments_url": "https://api.github.com/repos/espnet/espnet/issues/2931/comments", "events_url": "https://api.github.com/repos/espnet/espnet/issues/2931/events", "html_url": "https://github.com/espnet/espnet/issues/2931", "id": 800133300, "node_id": "MDU6SXNzdWU4MDAxMzMzMDA=", "number": 2931, "title": "Stage 5 error in egs/ljspeech/asr1 (phoneme-level)", "user": {"login": "lnalborczyk", "id": 10812999, "node_id": "MDQ6VXNlcjEwODEyOTk5", "avatar_url": "https://avatars.githubusercontent.com/u/10812999?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lnalborczyk", "html_url": "https://github.com/lnalborczyk", "followers_url": "https://api.github.com/users/lnalborczyk/followers", "following_url": "https://api.github.com/users/lnalborczyk/following{/other_user}", "gists_url": "https://api.github.com/users/lnalborczyk/gists{/gist_id}", "starred_url": "https://api.github.com/users/lnalborczyk/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lnalborczyk/subscriptions", "organizations_url": "https://api.github.com/users/lnalborczyk/orgs", "repos_url": "https://api.github.com/users/lnalborczyk/repos", "events_url": "https://api.github.com/users/lnalborczyk/events{/privacy}", "received_events_url": "https://api.github.com/users/lnalborczyk/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 777173273, "node_id": "MDU6TGFiZWw3NzcxNzMyNzM=", "url": "https://api.github.com/repos/espnet/espnet/labels/Bug", "name": "Bug", "color": "ee0701", "default": false, "description": "bug should be fixed"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2021-02-03T09:16:30Z", "updated_at": "2022-08-23T09:11:13Z", "closed_at": "2022-08-23T09:11:13Z", "author_association": "NONE", "active_lock_reason": null, "body": "**Describe the bug**\r\n\r\nI can not get the LJspeech ASR example working at the phonetic level... when replacing \"char\" by \"phn\" in run.sh, everything works fine until stage 5, but I get and error during decoding. Here is one of the log file below (`espnet/egs/ljspeech/asr1/exp/phn_train_no_dev_pytorch_train_mtlalpha1.0/decode_phn_dev_decode_ctcweight1.0_lm_word100/log/decode.1.log`).\r\n\r\nAny idea why this is happening and how to make it work at the phoneme rather than at the character level?\r\n\r\n**Basic environments:**\r\n - OS information: OS information: Linux 4.15.0-101-generic #102~16.04.1-Ubuntu SMP Mon May 11 11:38:16 UTC 2020 x86_64\r\n - python version: Python 3.7.9 (default, Aug 18 2020, 06:24:24) [GCC 5.4.0 20160609]\r\n - espnet version: 0.9.6\r\n - Git hash [e.g. b88e89fc7246fed4c2842b55baba884fe1b4ecc2]\r\n - Commit date [e.g. Tue Sep 1 09:32:54 2020 -0400]\r\n - pytorch version pytorch 1.4.0\r\n \r\n\r\n**Environments from `torch.utils.collect_env`:**\r\n\r\n\r\n```\r\nCollecting environment information...\r\nPyTorch version: 1.4.0\r\nIs debug build: No\r\nCUDA used to build PyTorch: 10.1\r\n\r\nOS: Ubuntu 16.04.7 LTS\r\nGCC version: (Ubuntu 5.4.0-6ubuntu1~16.04.12) 5.4.0 20160609\r\nCMake version: version 3.5.1\r\n\r\nPython version: 3.7\r\nIs CUDA available: Yes\r\nCUDA runtime version: 10.1.243\r\nGPU models and configuration: GPU 0: Tesla P4\r\nNvidia driver version: 455.23.05\r\ncuDNN version: Probably one of the following:\r\n/usr/lib/x86_64-linux-gnu/libcudnn.so.7.6.4\r\n/usr/lib/x86_64-linux-gnu/libcudnn.so.8.0.3\r\n/usr/lib/x86_64-linux-gnu/libcudnn_adv_infer.so.8.0.3\r\n/usr/lib/x86_64-linux-gnu/libcudnn_adv_train.so.8.0.3\r\n/usr/lib/x86_64-linux-gnu/libcudnn_cnn_infer.so.8.0.3\r\n/usr/lib/x86_64-linux-gnu/libcudnn_cnn_train.so.8.0.3\r\n/usr/lib/x86_64-linux-gnu/libcudnn_ops_infer.so.8.0.3\r\n/usr/lib/x86_64-linux-gnu/libcudnn_ops_train.so.8.0.3\r\n\r\nVersions of relevant libraries:\r\n[pip3] numpy==1.19.5\r\n[pip3] pytorch-ranger==0.1.1\r\n[pip3] pytorch-wpe==0.0.0\r\n[pip3] torch==1.4.0\r\n[pip3] torch-complex==0.2.0\r\n[pip3] torch-optimizer==0.1.0\r\n[pip3] torchaudio==0.4.0\r\n[pip3] warpctc-pytorch==0.2.1\r\n[conda] Could not collect\r\n```\r\n\r\n**Task information:**\r\n - Task: ASR\r\n - Recipe: LJspeech\r\n - ESPnet1\r\n\r\n**To Reproduce**\r\nSteps to reproduce the behavior:\r\n1. move to a recipe directory, e.g., `cd egs/ljspeech/asr1`\r\n2. execute `./run.sh` (with \"phn\" rather than \"char\")\r\n3. specify the error log, e.g., `exp/xxx/yyy.log`\r\n\r\n**Error logs**\r\n\r\n```\r\n2021-01-26 17:57:39,815 (asr_recog:305) INFO: python path = (None)\r\n2021-01-26 17:57:39,815 (asr_recog:310) INFO: set random seed = 1\r\n2021-01-26 17:57:39,815 (asr_recog:321) INFO: backend = pytorch\r\n2021-01-26 17:57:45,134 (deterministic_utils:26) INFO: torch type check is disabled\r\n2021-01-26 17:57:45,139 (asr_utils:656) INFO: reading a config file from exp/phn_train_no_dev_pytorch_train_mtlalpha1.0/results/model.json\r\n2021-01-26 17:57:45,140 (asr_init:169) WARNING: reading model parameters from exp/phn_train_no_dev_pytorch_train_mtlalpha1.0/results/model.loss.best\r\n2021-01-26 17:57:45,141 (nets_utils:426) INFO: subsample: 1 2 2 1 1\r\n2021-01-26 17:57:45,223 (encoders:298) INFO: BLSTM with every-layer projection for encoder\r\n2021-01-26 17:57:45,418 (asr:918) INFO:  Total parameter of the model = 8170407\r\n2021-01-26 17:57:45,419 (asr_utils:656) INFO: reading a config file from exp/train_rnnlm_pytorch_lm_word100/model.json\r\nTraceback (most recent call last):\r\n  File \"/research/crissp/espnet/egs/ljspeech/asr1/../../../espnet/bin/asr_recog.py\", line 363, in <module>\r\n    main(sys.argv[1:])\r\n  File \"/research/crissp/espnet/egs/ljspeech/asr1/../../../espnet/bin/asr_recog.py\", line 341, in main\r\n    recog(args)\r\n  File \"/research/crissp/espnet/espnet/asr/pytorch_backend/asr.py\", line 965, in recog\r\n    word_rnnlm.predictor, word_dict, char_dict\r\n  File \"/research/crissp/espnet/espnet/lm/pytorch_backend/extlm.py\", line 129, in __init__\r\n    self.space = subword_dict[\"<space>\"]\r\nKeyError: '<space>'\r\n# Accounting: time=6 threads=1\r\n# Ended (code 1) at Tue Jan 26 17:57:45 CET 2021, elapsed time 6 seconds\r\n```", "reactions": {"url": "https://api.github.com/repos/espnet/espnet/issues/2931/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/espnet/espnet/issues/2931/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/espnet/espnet/issues/2922", "repository_url": "https://api.github.com/repos/espnet/espnet", "labels_url": "https://api.github.com/repos/espnet/espnet/issues/2922/labels{/name}", "comments_url": "https://api.github.com/repos/espnet/espnet/issues/2922/comments", "events_url": "https://api.github.com/repos/espnet/espnet/issues/2922/events", "html_url": "https://github.com/espnet/espnet/issues/2922", "id": 797745281, "node_id": "MDU6SXNzdWU3OTc3NDUyODE=", "number": 2922, "title": "Normalization After SpecAug in Espnet2", "user": {"login": "sameerkhurana10", "id": 7698301, "node_id": "MDQ6VXNlcjc2OTgzMDE=", "avatar_url": "https://avatars.githubusercontent.com/u/7698301?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sameerkhurana10", "html_url": "https://github.com/sameerkhurana10", "followers_url": "https://api.github.com/users/sameerkhurana10/followers", "following_url": "https://api.github.com/users/sameerkhurana10/following{/other_user}", "gists_url": "https://api.github.com/users/sameerkhurana10/gists{/gist_id}", "starred_url": "https://api.github.com/users/sameerkhurana10/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sameerkhurana10/subscriptions", "organizations_url": "https://api.github.com/users/sameerkhurana10/orgs", "repos_url": "https://api.github.com/users/sameerkhurana10/repos", "events_url": "https://api.github.com/users/sameerkhurana10/events{/privacy}", "received_events_url": "https://api.github.com/users/sameerkhurana10/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 777173273, "node_id": "MDU6TGFiZWw3NzcxNzMyNzM=", "url": "https://api.github.com/repos/espnet/espnet/labels/Bug", "name": "Bug", "color": "ee0701", "default": false, "description": "bug should be fixed"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2021-01-31T16:04:13Z", "updated_at": "2021-01-31T16:56:55Z", "closed_at": "2021-01-31T16:56:55Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi,\r\n\r\nI had a question about Espnet2 ASR model. I notice that MVN normalization is applied after SpecAug. See [here](https://github.com/espnet/espnet/blob/master/espnet2/asr/espnet_model.py#L195) \r\n\r\nI think this behavior is different from Espnet1. Is that correct?\r\n\r\nSpecAug followed by MVN will lead to masked regions to be non-zero, but still constant. Is that okay? \r\n\r\nThanks for the clarification.", "reactions": {"url": "https://api.github.com/repos/espnet/espnet/issues/2922/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/espnet/espnet/issues/2922/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/espnet/espnet/issues/2899", "repository_url": "https://api.github.com/repos/espnet/espnet", "labels_url": "https://api.github.com/repos/espnet/espnet/issues/2899/labels{/name}", "comments_url": "https://api.github.com/repos/espnet/espnet/issues/2899/comments", "events_url": "https://api.github.com/repos/espnet/espnet/issues/2899/events", "html_url": "https://github.com/espnet/espnet/issues/2899", "id": 793890888, "node_id": "MDU6SXNzdWU3OTM4OTA4ODg=", "number": 2899, "title": "Pretrained model link of aishell was unavailable", "user": {"login": "keshawnhsieh", "id": 29997158, "node_id": "MDQ6VXNlcjI5OTk3MTU4", "avatar_url": "https://avatars.githubusercontent.com/u/29997158?v=4", "gravatar_id": "", "url": "https://api.github.com/users/keshawnhsieh", "html_url": "https://github.com/keshawnhsieh", "followers_url": "https://api.github.com/users/keshawnhsieh/followers", "following_url": "https://api.github.com/users/keshawnhsieh/following{/other_user}", "gists_url": "https://api.github.com/users/keshawnhsieh/gists{/gist_id}", "starred_url": "https://api.github.com/users/keshawnhsieh/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/keshawnhsieh/subscriptions", "organizations_url": "https://api.github.com/users/keshawnhsieh/orgs", "repos_url": "https://api.github.com/users/keshawnhsieh/repos", "events_url": "https://api.github.com/users/keshawnhsieh/events{/privacy}", "received_events_url": "https://api.github.com/users/keshawnhsieh/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 777173273, "node_id": "MDU6TGFiZWw3NzcxNzMyNzM=", "url": "https://api.github.com/repos/espnet/espnet/labels/Bug", "name": "Bug", "color": "ee0701", "default": false, "description": "bug should be fixed"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2021-01-26T03:12:44Z", "updated_at": "2021-02-03T04:09:33Z", "closed_at": "2021-02-03T04:09:32Z", "author_association": "NONE", "active_lock_reason": null, "body": "Google drive link of pretrained model of aishell in this [readme](https://github.com/espnet/espnet/blob/master/egs/aishell/asr1/RESULTS.md) was unavailable now. Could you update it please.", "reactions": {"url": "https://api.github.com/repos/espnet/espnet/issues/2899/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/espnet/espnet/issues/2899/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/espnet/espnet/issues/2865", "repository_url": "https://api.github.com/repos/espnet/espnet", "labels_url": "https://api.github.com/repos/espnet/espnet/issues/2865/labels{/name}", "comments_url": "https://api.github.com/repos/espnet/espnet/issues/2865/comments", "events_url": "https://api.github.com/repos/espnet/espnet/issues/2865/events", "html_url": "https://github.com/espnet/espnet/issues/2865", "id": 783240746, "node_id": "MDU6SXNzdWU3ODMyNDA3NDY=", "number": 2865, "title": "Stage 1 error in egs/ljspeech/asr1", "user": {"login": "lnalborczyk", "id": 10812999, "node_id": "MDQ6VXNlcjEwODEyOTk5", "avatar_url": "https://avatars.githubusercontent.com/u/10812999?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lnalborczyk", "html_url": "https://github.com/lnalborczyk", "followers_url": "https://api.github.com/users/lnalborczyk/followers", "following_url": "https://api.github.com/users/lnalborczyk/following{/other_user}", "gists_url": "https://api.github.com/users/lnalborczyk/gists{/gist_id}", "starred_url": "https://api.github.com/users/lnalborczyk/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lnalborczyk/subscriptions", "organizations_url": "https://api.github.com/users/lnalborczyk/orgs", "repos_url": "https://api.github.com/users/lnalborczyk/repos", "events_url": "https://api.github.com/users/lnalborczyk/events{/privacy}", "received_events_url": "https://api.github.com/users/lnalborczyk/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 777173273, "node_id": "MDU6TGFiZWw3NzcxNzMyNzM=", "url": "https://api.github.com/repos/espnet/espnet/labels/Bug", "name": "Bug", "color": "ee0701", "default": false, "description": "bug should be fixed"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 26, "created_at": "2021-01-11T10:16:10Z", "updated_at": "2021-10-25T01:50:29Z", "closed_at": "2021-01-19T01:56:25Z", "author_association": "NONE", "active_lock_reason": null, "body": "**Describe the bug**\r\nHi, I am trying to run the LJspeech ASR example, but I get the following error:\r\n\r\n```\r\nstage 1: Feature Generation\r\nsteps/make_fbank_pitch.sh --cmd run.pl --nj 8 --write_utt2num_frames true data/char_eval exp/make_fbank/char_eval fbank\r\nsteps/make_fbank_pitch.sh: no such file data/char_eval/wav.scp\r\n```\r\n\r\n**Basic environments:**\r\n - OS information: OS information: Linux 4.15.0-101-generic #102~16.04.1-Ubuntu SMP Mon May 11 11:38:16 UTC 2020 x86_64\r\n - python version: Python 3.7.9 (default, Aug 18 2020, 06:24:24) [GCC 5.4.0 20160609]\r\n - espnet version: 0.9.6\r\n - Git hash [e.g. b88e89fc7246fed4c2842b55baba884fe1b4ecc2]\r\n - Commit date [e.g. Tue Sep 1 09:32:54 2020 -0400]\r\n - pytorch version pytorch 1.4.0\r\n \r\n\r\n**Environments from `torch.utils.collect_env`:**\r\n\r\n\r\n```\r\nCollecting environment information...\r\nPyTorch version: 1.4.0\r\nIs debug build: No\r\nCUDA used to build PyTorch: 10.1\r\n\r\nOS: Ubuntu 16.04.7 LTS\r\nGCC version: (Ubuntu 5.4.0-6ubuntu1~16.04.12) 5.4.0 20160609\r\nCMake version: version 3.5.1\r\n\r\nPython version: 3.7\r\nIs CUDA available: Yes\r\nCUDA runtime version: 10.1.243\r\nGPU models and configuration: GPU 0: Tesla P4\r\nNvidia driver version: 455.23.05\r\ncuDNN version: Probably one of the following:\r\n/usr/lib/x86_64-linux-gnu/libcudnn.so.7.6.4\r\n/usr/lib/x86_64-linux-gnu/libcudnn.so.8.0.3\r\n/usr/lib/x86_64-linux-gnu/libcudnn_adv_infer.so.8.0.3\r\n/usr/lib/x86_64-linux-gnu/libcudnn_adv_train.so.8.0.3\r\n/usr/lib/x86_64-linux-gnu/libcudnn_cnn_infer.so.8.0.3\r\n/usr/lib/x86_64-linux-gnu/libcudnn_cnn_train.so.8.0.3\r\n/usr/lib/x86_64-linux-gnu/libcudnn_ops_infer.so.8.0.3\r\n/usr/lib/x86_64-linux-gnu/libcudnn_ops_train.so.8.0.3\r\n\r\nVersions of relevant libraries:\r\n[pip3] numpy==1.19.5\r\n[pip3] pytorch-ranger==0.1.1\r\n[pip3] pytorch-wpe==0.0.0\r\n[pip3] torch==1.4.0\r\n[pip3] torch-complex==0.2.0\r\n[pip3] torch-optimizer==0.1.0\r\n[pip3] torchaudio==0.4.0\r\n[pip3] warpctc-pytorch==0.2.1\r\n[conda] Could not collect\r\n```\r\n\r\n**Task information:**\r\n - Task: ASR\r\n - Recipe: LJspeech\r\n - ESPnet1\r\n\r\n**To Reproduce**\r\nSteps to reproduce the behavior:\r\n1. move to a recipe directory, e.g., `cd egs/ljspeech/asr1`\r\n2. execute `./run.sh`\r\n3. specify the error log, e.g., `exp/xxx/yyy.log`\r\n\r\n**Error logs**\r\nNo logs created...\r\n", "reactions": {"url": "https://api.github.com/repos/espnet/espnet/issues/2865/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/espnet/espnet/issues/2865/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/espnet/espnet/issues/2864", "repository_url": "https://api.github.com/repos/espnet/espnet", "labels_url": "https://api.github.com/repos/espnet/espnet/issues/2864/labels{/name}", "comments_url": "https://api.github.com/repos/espnet/espnet/issues/2864/comments", "events_url": "https://api.github.com/repos/espnet/espnet/issues/2864/events", "html_url": "https://github.com/espnet/espnet/issues/2864", "id": 783144497, "node_id": "MDU6SXNzdWU3ODMxNDQ0OTc=", "number": 2864, "title": "should it be sorted?", "user": {"login": "gary083", "id": 22387510, "node_id": "MDQ6VXNlcjIyMzg3NTEw", "avatar_url": "https://avatars.githubusercontent.com/u/22387510?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gary083", "html_url": "https://github.com/gary083", "followers_url": "https://api.github.com/users/gary083/followers", "following_url": "https://api.github.com/users/gary083/following{/other_user}", "gists_url": "https://api.github.com/users/gary083/gists{/gist_id}", "starred_url": "https://api.github.com/users/gary083/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gary083/subscriptions", "organizations_url": "https://api.github.com/users/gary083/orgs", "repos_url": "https://api.github.com/users/gary083/repos", "events_url": "https://api.github.com/users/gary083/events{/privacy}", "received_events_url": "https://api.github.com/users/gary083/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 777173273, "node_id": "MDU6TGFiZWw3NzcxNzMyNzM=", "url": "https://api.github.com/repos/espnet/espnet/labels/Bug", "name": "Bug", "color": "ee0701", "default": false, "description": "bug should be fixed"}, {"id": 1889036170, "node_id": "MDU6TGFiZWwxODg5MDM2MTcw", "url": "https://api.github.com/repos/espnet/espnet/labels/ESPnet2", "name": "ESPnet2", "color": "f2db68", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2021-01-11T07:43:16Z", "updated_at": "2021-01-12T08:25:54Z", "closed_at": "2021-01-12T08:24:11Z", "author_association": "NONE", "active_lock_reason": null, "body": "https://github.com/espnet/espnet/blob/3458c70f8e639d02268ee16efcd4980feddc681b/espnet2/bin/aggregate_stats_dirs.py#L46\r\n\r\nThis function will aggregate some stats into one file, but the keys(name of text) will be sorted before merging together. \r\nIt will cause the order is different between lm_train_text and text_shape, and i right?  ", "reactions": {"url": "https://api.github.com/repos/espnet/espnet/issues/2864/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/espnet/espnet/issues/2864/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/espnet/espnet/issues/2858", "repository_url": "https://api.github.com/repos/espnet/espnet", "labels_url": "https://api.github.com/repos/espnet/espnet/issues/2858/labels{/name}", "comments_url": "https://api.github.com/repos/espnet/espnet/issues/2858/comments", "events_url": "https://api.github.com/repos/espnet/espnet/issues/2858/events", "html_url": "https://github.com/espnet/espnet/issues/2858", "id": 782285429, "node_id": "MDU6SXNzdWU3ODIyODU0Mjk=", "number": 2858, "title": "tts.sh: call to python script before sourcing path.sh", "user": {"login": "saamc", "id": 7795787, "node_id": "MDQ6VXNlcjc3OTU3ODc=", "avatar_url": "https://avatars.githubusercontent.com/u/7795787?v=4", "gravatar_id": "", "url": "https://api.github.com/users/saamc", "html_url": "https://github.com/saamc", "followers_url": "https://api.github.com/users/saamc/followers", "following_url": "https://api.github.com/users/saamc/following{/other_user}", "gists_url": "https://api.github.com/users/saamc/gists{/gist_id}", "starred_url": "https://api.github.com/users/saamc/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/saamc/subscriptions", "organizations_url": "https://api.github.com/users/saamc/orgs", "repos_url": "https://api.github.com/users/saamc/repos", "events_url": "https://api.github.com/users/saamc/events{/privacy}", "received_events_url": "https://api.github.com/users/saamc/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 777173273, "node_id": "MDU6TGFiZWw3NzcxNzMyNzM=", "url": "https://api.github.com/repos/espnet/espnet/labels/Bug", "name": "Bug", "color": "ee0701", "default": false, "description": "bug should be fixed"}, {"id": 1889036170, "node_id": "MDU6TGFiZWwxODg5MDM2MTcw", "url": "https://api.github.com/repos/espnet/espnet/labels/ESPnet2", "name": "ESPnet2", "color": "f2db68", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2021-01-08T17:34:07Z", "updated_at": "2023-03-18T00:28:06Z", "closed_at": "2023-03-18T00:28:06Z", "author_association": "NONE", "active_lock_reason": null, "body": "### Bug Description\r\n\r\nin the shell script _tts.sh_ the python script _print_args.py_ is invoked before the path is set up\r\n\r\n_print_args.py_ uses `#!/usr/bin/env python` and thus fails.\r\n\r\nhttps://github.com/espnet/espnet/blob/d72131db420e8a3455f7de9abd4c67cb8fa151a5/egs2/TEMPLATE/tts1/tts.sh#L191\r\n\r\nbut path setup happens later on\r\n\r\nhttps://github.com/espnet/espnet/blob/d72131db420e8a3455f7de9abd4c67cb8fa151a5/egs2/TEMPLATE/tts1/tts.sh#L200\r\n\r\n### Basic Environment\r\nthe issue was experienced in docker ESPnet  so its environment applies\r\n\r\n- OS information: Linux 5.4.0-48-generic #52-Ubuntu SMP Thu Sep 10 10:58:49 UTC 2020 x86_64 x86_64 x86_64 GNU/Linux\r\n- Docker version: 20.10.1, build 831ebea\r\n- image: espnet/espnet:gpu-cuda10.1-cudnn7\r\n- espnet version: v.0.9.6\r\n- Git hash: `747c46d34cbba3e32bc99aecc49098c7d7ca30f5`\r\n  - Commit date: `Tue Dec 1 12:09:32 2020 +0000`\r\n\r\n### Task Information\r\n- task: TTS\r\n- recipe: VCTK\r\n- ESPnet2\r\n\r\n### Reproduction\r\n```\r\ncd docker\r\n./run.sh --docker-egs vctk/tts1 --docker-folders ~/experiments/tts/data/VCTK --is-egs2 run.sh --stage 5 |& tee /tmp/run.log\r\n```\r\nlog file: /tmp/run.log\r\n\r\n### Error Logs:\r\n```\r\nUsing image espnet/espnet:gpu-cuda10.1-cudnn7-u18-user-user1.\r\nExecuting application in Docker\r\ndocker run --gpus '\"device=0\"' -i --rm --name espnet_gpu0_20210108T1527 -v /home/user1/experiments/tts/workspace/espnet/egs:/espnet/egs -v /home/user1/experiments/tts/workspace/espnet/espnet:/espnet/espnet -v /home/user1/experiments/tts/workspace/espnet/espnet2:/espnet/espnet2 -v /home/user1/experiments/tts/workspace/espnet/test:/espnet/test -v /home/user1/experiments/tts/workspace/espnet/utils:/espnet/utils -v /home/user1/experiments/tts/workspace/espnet/egs2:/espnet/egs2 -v /home/user1/experiments/tts/workspace/espnet/espnet2:/espnet/espnet2 -v /dev/shm:/dev/shm -v /home/user1/experiments/tts/data/VCTK:/home/user1/experiments/tts/data/VCTK espnet/espnet:gpu-cuda10.1-cudnn7-u18-user-user1 /bin/bash -c 'cd /espnet/egs2/vctk/tts1; ./run.sh --stage 5'\r\n2021-01-08T15:27:11 (tts.sh:187:main) ./tts.sh --lang en --feats_type raw --fs 24000 --n_fft 2048 --n_shift 300 --win_length 1200 --token_type phn --cleaner tacotron --g2p g2p_en_no_space --train_config conf/train.yaml --inference_config conf/decode.yaml --train_set tr_no_dev --valid_set dev --test_sets dev eval1 --srctexts data/tr_no_dev/text --audio_format flac --stage 5\r\n/usr/bin/env: 'python': No such file or directory\r\nrun.sh done.\r\n```", "reactions": {"url": "https://api.github.com/repos/espnet/espnet/issues/2858/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/espnet/espnet/issues/2858/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/espnet/espnet/issues/2852", "repository_url": "https://api.github.com/repos/espnet/espnet", "labels_url": "https://api.github.com/repos/espnet/espnet/issues/2852/labels{/name}", "comments_url": "https://api.github.com/repos/espnet/espnet/issues/2852/comments", "events_url": "https://api.github.com/repos/espnet/espnet/issues/2852/events", "html_url": "https://github.com/espnet/espnet/issues/2852", "id": 780990836, "node_id": "MDU6SXNzdWU3ODA5OTA4MzY=", "number": 2852, "title": "CTC values didn't display properly", "user": {"login": "wenjie-p", "id": 21860575, "node_id": "MDQ6VXNlcjIxODYwNTc1", "avatar_url": "https://avatars.githubusercontent.com/u/21860575?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wenjie-p", "html_url": "https://github.com/wenjie-p", "followers_url": "https://api.github.com/users/wenjie-p/followers", "following_url": "https://api.github.com/users/wenjie-p/following{/other_user}", "gists_url": "https://api.github.com/users/wenjie-p/gists{/gist_id}", "starred_url": "https://api.github.com/users/wenjie-p/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wenjie-p/subscriptions", "organizations_url": "https://api.github.com/users/wenjie-p/orgs", "repos_url": "https://api.github.com/users/wenjie-p/repos", "events_url": "https://api.github.com/users/wenjie-p/events{/privacy}", "received_events_url": "https://api.github.com/users/wenjie-p/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 777173273, "node_id": "MDU6TGFiZWw3NzcxNzMyNzM=", "url": "https://api.github.com/repos/espnet/espnet/labels/Bug", "name": "Bug", "color": "ee0701", "default": false, "description": "bug should be fixed"}, {"id": 1275359095, "node_id": "MDU6TGFiZWwxMjc1MzU5MDk1", "url": "https://api.github.com/repos/espnet/espnet/labels/Discussion", "name": "Discussion", "color": "e06b28", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2021-01-07T03:06:46Z", "updated_at": "2021-01-25T20:42:16Z", "closed_at": "2021-01-25T20:42:16Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Hi, when I run the TIMIT recipe using the `Pure CTC mode` and then to visualize the CTC output values, I found there are two issues in the visualization results:\r\n\r\n1.  the number of frames in the visualization results is mismatched to the actual wav content specified by the filename. In other words, the filename and the content in the visualization results is mismatched. After modified the above line\r\nhttps://github.com/espnet/espnet/blob/21c2f586d9b6a2357d7cf02fcec1e8d40c8f7c7a/espnet/asr/asr_utils.py#L348-L350\r\n\r\nto ` self.data = copy.deepcopy(data)`, this mismatch disapears. I think the comments in #349-350 clearly indicates why this mismatch occurs.\r\n\r\n2. the number of frames in the visualization results is less than the actual wav content. In my `timit/asr1` recipe, it is a quarter of the actual frames. After look through the training routine, I found it will subsample the frames in each layer. In my `conf/train.yaml`, it is configured with  `subsample: \"1_2_2_1_1\"`, I think it is the case. To validate my assumption, I modified the config to `subsample: 1_1_1_1_1`, that woks.\r\n\r\nThanks for the great toolkit you have built, if you need further information, please let me know.", "reactions": {"url": "https://api.github.com/repos/espnet/espnet/issues/2852/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/espnet/espnet/issues/2852/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/espnet/espnet/issues/2835", "repository_url": "https://api.github.com/repos/espnet/espnet", "labels_url": "https://api.github.com/repos/espnet/espnet/issues/2835/labels{/name}", "comments_url": "https://api.github.com/repos/espnet/espnet/issues/2835/comments", "events_url": "https://api.github.com/repos/espnet/espnet/issues/2835/events", "html_url": "https://github.com/espnet/espnet/issues/2835", "id": 777658837, "node_id": "MDU6SXNzdWU3Nzc2NTg4Mzc=", "number": 2835, "title": "Cannot install warp-ctc", "user": {"login": "picheny-nyu", "id": 55798528, "node_id": "MDQ6VXNlcjU1Nzk4NTI4", "avatar_url": "https://avatars.githubusercontent.com/u/55798528?v=4", "gravatar_id": "", "url": "https://api.github.com/users/picheny-nyu", "html_url": "https://github.com/picheny-nyu", "followers_url": "https://api.github.com/users/picheny-nyu/followers", "following_url": "https://api.github.com/users/picheny-nyu/following{/other_user}", "gists_url": "https://api.github.com/users/picheny-nyu/gists{/gist_id}", "starred_url": "https://api.github.com/users/picheny-nyu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/picheny-nyu/subscriptions", "organizations_url": "https://api.github.com/users/picheny-nyu/orgs", "repos_url": "https://api.github.com/users/picheny-nyu/repos", "events_url": "https://api.github.com/users/picheny-nyu/events{/privacy}", "received_events_url": "https://api.github.com/users/picheny-nyu/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 777173273, "node_id": "MDU6TGFiZWw3NzcxNzMyNzM=", "url": "https://api.github.com/repos/espnet/espnet/labels/Bug", "name": "Bug", "color": "ee0701", "default": false, "description": "bug should be fixed"}, {"id": 777173274, "node_id": "MDU6TGFiZWw3NzcxNzMyNzQ=", "url": "https://api.github.com/repos/espnet/espnet/labels/Duplicate", "name": "Duplicate", "color": "cccccc", "default": false, "description": "Duplicated"}, {"id": 777173280, "node_id": "MDU6TGFiZWw3NzcxNzMyODA=", "url": "https://api.github.com/repos/espnet/espnet/labels/Wontfix", "name": "Wontfix", "color": "e5f291", "default": false, "description": "Want to fix"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2021-01-03T15:22:17Z", "updated_at": "2021-02-16T08:05:32Z", "closed_at": "2021-02-16T08:05:32Z", "author_association": "NONE", "active_lock_reason": null, "body": "I am trying to install warp-etc on the latest version of espnet using pytorch 1.4 and cuda 10.1 and get the following error message. I turned on tracing in the shell script for clarity. Help!!!!!\r\n\r\nThanks\r\nMichael\r\n\r\n\r\n./installers/install_warp-ctc.sh\r\n+ MAKE=make\r\n+ '[' 0 '!=' 0 ']'\r\n++ python3\r\n+ torch_17_plus=false\r\n++ python3\r\n+ torch_11_plus=true\r\n++ python3\r\n+ torch_10_plus=true\r\n++ python3\r\n+ torch_version=14\r\n++ python3\r\n+ cuda_version=101\r\n+ echo cuda_version=101\r\ncuda_version=101\r\n+ false\r\n+ true\r\n+ warpctc_version=0.2.1\r\n+ '[' -z 101 ']'\r\n+ python3 -m pip install warpctc-pytorch==0.2.1+torch14.cuda101\r\nCollecting warpctc-pytorch==0.2.1+torch14.cuda101\r\n  Using cached warpctc_pytorch-0.2.1%2Btorch14.cuda101-cp38-cp38-manylinux1_x86_64.whl (3.1 MB)\r\nERROR: Requested warpctc-pytorch==0.2.1+torch14.cuda101 from https://files.pythonhosted.org/packages/f5/97/28387755a608f3d8ca6794384be2f887d1ed7f8053b066efa55970e05937/warpctc_pytorch-0.2.1%2Btorch14.cuda101-cp38-cp38-manylinux1_x86_64.whl#sha256=08b2499943957b3113378b6a96bd8ab81a0ceeaaf83c076d7d68a9482f96c74e has different version in metadata: '0.2.1'\r\n", "reactions": {"url": "https://api.github.com/repos/espnet/espnet/issues/2835/reactions", "total_count": 1, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/espnet/espnet/issues/2835/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/espnet/espnet/issues/2823", "repository_url": "https://api.github.com/repos/espnet/espnet", "labels_url": "https://api.github.com/repos/espnet/espnet/issues/2823/labels{/name}", "comments_url": "https://api.github.com/repos/espnet/espnet/issues/2823/comments", "events_url": "https://api.github.com/repos/espnet/espnet/issues/2823/events", "html_url": "https://github.com/espnet/espnet/issues/2823", "id": 776379648, "node_id": "MDU6SXNzdWU3NzYzNzk2NDg=", "number": 2823, "title": "Increasing ASR performance throught retraining rnn lm model with adding more text corpus", "user": {"login": "v-yunbin", "id": 38179632, "node_id": "MDQ6VXNlcjM4MTc5NjMy", "avatar_url": "https://avatars.githubusercontent.com/u/38179632?v=4", "gravatar_id": "", "url": "https://api.github.com/users/v-yunbin", "html_url": "https://github.com/v-yunbin", "followers_url": "https://api.github.com/users/v-yunbin/followers", "following_url": "https://api.github.com/users/v-yunbin/following{/other_user}", "gists_url": "https://api.github.com/users/v-yunbin/gists{/gist_id}", "starred_url": "https://api.github.com/users/v-yunbin/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/v-yunbin/subscriptions", "organizations_url": "https://api.github.com/users/v-yunbin/orgs", "repos_url": "https://api.github.com/users/v-yunbin/repos", "events_url": "https://api.github.com/users/v-yunbin/events{/privacy}", "received_events_url": "https://api.github.com/users/v-yunbin/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 777173273, "node_id": "MDU6TGFiZWw3NzcxNzMyNzM=", "url": "https://api.github.com/repos/espnet/espnet/labels/Bug", "name": "Bug", "color": "ee0701", "default": false, "description": "bug should be fixed"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2020-12-30T10:17:29Z", "updated_at": "2020-12-31T03:12:46Z", "closed_at": "2020-12-31T03:12:46Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi developers:\r\n   After finished train model( alias model_v1), I try to retrain rnn lm with adding 1000w utterance text (alias model_v2) . \r\n   I compare the results on the two models and it seems just have a little gain. \r\n   `\r\n\r\nmodel | CER\r\n-- | --\r\nmodel_v1 | 48.83%\r\nmodel_v2 | 48.18%\r\n\r\n`\r\n i want to know whether my thinking is right \uff1f or any suggests. thanks", "reactions": {"url": "https://api.github.com/repos/espnet/espnet/issues/2823/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/espnet/espnet/issues/2823/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/espnet/espnet/issues/2811", "repository_url": "https://api.github.com/repos/espnet/espnet", "labels_url": "https://api.github.com/repos/espnet/espnet/issues/2811/labels{/name}", "comments_url": "https://api.github.com/repos/espnet/espnet/issues/2811/comments", "events_url": "https://api.github.com/repos/espnet/espnet/issues/2811/events", "html_url": "https://github.com/espnet/espnet/issues/2811", "id": 774249403, "node_id": "MDU6SXNzdWU3NzQyNDk0MDM=", "number": 2811, "title": "VCTK stage 2: format_wav_scp.py get Segmentation fault (core dumped)", "user": {"login": "zhang-wy15", "id": 31053400, "node_id": "MDQ6VXNlcjMxMDUzNDAw", "avatar_url": "https://avatars.githubusercontent.com/u/31053400?v=4", "gravatar_id": "", "url": "https://api.github.com/users/zhang-wy15", "html_url": "https://github.com/zhang-wy15", "followers_url": "https://api.github.com/users/zhang-wy15/followers", "following_url": "https://api.github.com/users/zhang-wy15/following{/other_user}", "gists_url": "https://api.github.com/users/zhang-wy15/gists{/gist_id}", "starred_url": "https://api.github.com/users/zhang-wy15/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/zhang-wy15/subscriptions", "organizations_url": "https://api.github.com/users/zhang-wy15/orgs", "repos_url": "https://api.github.com/users/zhang-wy15/repos", "events_url": "https://api.github.com/users/zhang-wy15/events{/privacy}", "received_events_url": "https://api.github.com/users/zhang-wy15/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 777173273, "node_id": "MDU6TGFiZWw3NzcxNzMyNzM=", "url": "https://api.github.com/repos/espnet/espnet/labels/Bug", "name": "Bug", "color": "ee0701", "default": false, "description": "bug should be fixed"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2020-12-24T07:46:24Z", "updated_at": "2020-12-26T12:47:44Z", "closed_at": "2020-12-26T09:16:43Z", "author_association": "NONE", "active_lock_reason": null, "body": "**Describe the bug**\r\nI run the scripts with no modification on VCTK egs. In stage 2, I get the Segmentation fault (core dumped) error.\r\n<img width=\"1438\" alt=\"\u622a\u5c4f2020-12-24 \u4e0b\u53483 24 46\" src=\"https://user-images.githubusercontent.com/31053400/103070271-29c84d00-45fc-11eb-984e-2d79a01979d4.png\">\r\nThere is no traceback and error report in the log file.\r\nI test the following command on vctk dev set\r\n```\r\npyscripts/audio/format_wav_scp.py --fs 24000 --audio-format flac --segment=dump/raw/org/dev/logs/segments.1 data/dev/wav.scp dump/raw/org/dev/data/format.1\r\n```\r\nAfter it finish the processing, it happen the same error as below.\r\n<img width=\"1437\" alt=\"\u622a\u5c4f2020-12-24 \u4e0b\u53483 31 48\" src=\"https://user-images.githubusercontent.com/31053400/103070766-27b2be00-45fd-11eb-80c1-387d6966611c.png\">\r\nThere are 17 lines in ``dump/raw/org/dev/logs/segments.1 ``. It means that it finished processing, but an error is still reported.\r\n\r\nI also test on vctk train set and change the ``--nj`` options. It remains the same error.\r\n\r\n**Basic environments:**\r\n - OS information: Linux 4.4.0-142-generic # 168-Ubuntu SMP Wed Jan 16 21:00:45 UTC 2019 x86_64\r\n - python version: 3.7.4 (default, Aug 13 2019, 20:35:49)  [GCC 7.3.0]\r\n - espnet version: espnet 0.9.6\r\n - Git hash 31abeb702df734fb15ba08209db7f14cda00275b\r\n   - Commit date Sun Dec 13 08:04:10 2020 +0000\r\n - pytorch version pytorch 1.6.0\r\n \r\n**Environments from `torch.utils.collect_env`:**\r\n```\r\nCollecting environment information...\r\nPyTorch version: 1.6.0\r\nIs debug build: No\r\nCUDA used to build PyTorch: 10.2\r\n\r\nOS: Ubuntu 16.04.6 LTS\r\nGCC version: (Ubuntu 5.4.0-6ubuntu1~16.04.12) 5.4.0 20160609\r\nCMake version: version 3.5.1\r\n\r\nPython version: 3.7\r\nIs CUDA available: Yes\r\nCUDA runtime version: 10.0.130\r\nGPU models and configuration: \r\nGPU 0: GeForce RTX 2080 Ti\r\nGPU 1: GeForce RTX 2080 Ti\r\nGPU 2: GeForce RTX 2080 Ti\r\nGPU 3: GeForce RTX 2080 Ti\r\nGPU 4: GeForce RTX 2080 Ti\r\nGPU 5: GeForce RTX 2080 Ti\r\nGPU 6: GeForce RTX 2080 Ti\r\nGPU 7: GeForce RTX 2080 Ti\r\nGPU 8: GeForce RTX 2080 Ti\r\nGPU 9: GeForce RTX 2080 Ti\r\n\r\nNvidia driver version: 450.57\r\ncuDNN version: Could not collect\r\n\r\nVersions of relevant libraries:\r\n[pip3] deepspeech-pytorch==0.1\r\n[pip3] numpy==1.19.2\r\n[pip3] pytorch-ranger==0.1.1\r\n[pip3] pytorch-wpe==0.0.0\r\n[pip3] torch==1.6.0\r\n[pip3] torch-complex==0.2.0\r\n[pip3] torch-optimizer==0.0.1a17\r\n[pip3] torchaudio==0.6.0\r\n[pip3] torchelastic==0.2.0\r\n[pip3] torchfile==0.1.0\r\n[pip3] torchvision==0.7.0\r\n[pip3] warpctc-pytorch==0.1\r\n[conda] cudatoolkit               10.0.130                      0  \r\n[conda] deepspeech-pytorch        0.1                       dev_0    <develop>\r\n[conda] numpy                     1.19.2                   pypi_0    pypi\r\n[conda] pytorch-ranger            0.1.1                    pypi_0    pypi\r\n[conda] pytorch-wpe               0.0.0                    pypi_0    pypi\r\n[conda] torch                     1.6.0                    pypi_0    pypi\r\n[conda] torch-complex             0.2.0                    pypi_0    pypi\r\n[conda] torch-optimizer           0.0.1a17                 pypi_0    pypi\r\n[conda] torchaudio                0.6.0                    pypi_0    pypi\r\n[conda] torchelastic              0.2.0                    pypi_0    pypi\r\n[conda] torchfile                 0.1.0                    pypi_0    pypi\r\n[conda] torchvision               0.7.0                    pypi_0    pypi\r\n[conda] warpctc-pytorch           0.1                      pypi_0    pypi\r\n```\r\n\r\n**Task information:**\r\n - Task: TTS\r\n - Recipe: vctk\r\n - ESPnet2\r\n\r\n**To Reproduce**\r\nSteps to reproduce the behavior:\r\n1.  `cd egs2/vctk/tts1`\r\n2. `run.sh --stage 2 --stop_stage 2`\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/espnet/espnet/issues/2811/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/espnet/espnet/issues/2811/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/espnet/espnet/issues/2810", "repository_url": "https://api.github.com/repos/espnet/espnet", "labels_url": "https://api.github.com/repos/espnet/espnet/issues/2810/labels{/name}", "comments_url": "https://api.github.com/repos/espnet/espnet/issues/2810/comments", "events_url": "https://api.github.com/repos/espnet/espnet/issues/2810/events", "html_url": "https://github.com/espnet/espnet/issues/2810", "id": 774246310, "node_id": "MDU6SXNzdWU3NzQyNDYzMTA=", "number": 2810, "title": "ESPnet2 Distributed training", "user": {"login": "panpanli521", "id": 15307422, "node_id": "MDQ6VXNlcjE1MzA3NDIy", "avatar_url": "https://avatars.githubusercontent.com/u/15307422?v=4", "gravatar_id": "", "url": "https://api.github.com/users/panpanli521", "html_url": "https://github.com/panpanli521", "followers_url": "https://api.github.com/users/panpanli521/followers", "following_url": "https://api.github.com/users/panpanli521/following{/other_user}", "gists_url": "https://api.github.com/users/panpanli521/gists{/gist_id}", "starred_url": "https://api.github.com/users/panpanli521/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/panpanli521/subscriptions", "organizations_url": "https://api.github.com/users/panpanli521/orgs", "repos_url": "https://api.github.com/users/panpanli521/repos", "events_url": "https://api.github.com/users/panpanli521/events{/privacy}", "received_events_url": "https://api.github.com/users/panpanli521/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 777173273, "node_id": "MDU6TGFiZWw3NzcxNzMyNzM=", "url": "https://api.github.com/repos/espnet/espnet/labels/Bug", "name": "Bug", "color": "ee0701", "default": false, "description": "bug should be fixed"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-12-24T07:38:03Z", "updated_at": "2020-12-24T07:55:16Z", "closed_at": "2020-12-24T07:55:16Z", "author_association": "NONE", "active_lock_reason": null, "body": "**Describe the bug**\r\n![image](https://user-images.githubusercontent.com/15307422/103071355-6137f900-45fe-11eb-897c-d2bc1ef249e2.png)\r\nwhen I execute this command ,\r\n`python -m espnet2.bin.asr_train --ngpu 1 --multiprocessing_distributed true`\r\nerror occurs.\r\n![image](https://user-images.githubusercontent.com/15307422/103071046-d2c37780-45fd-11eb-8c2f-baab67bf5b5e.png)\r\nAfter I modify this command like this:\r\n`python -m espnet2.bin.asr_train --ngpu 1 --multiprocessing_distributed true --output_dir conf --token_list data/token_list/bpe_unigram30/tokens.txt --bpemodel data/token_list/bpe_unigram30/bpe.model --train_data_path_and_name_and_type dump/raw/lm_train.txt,speech,text --allow_variable_data_keys true`\r\nerror occurs too\r\n![image](https://user-images.githubusercontent.com/15307422/103071089-e373ed80-45fd-11eb-86b6-1afed4c55205.png)\r\nSomeone else run into this problem?\r\n**Basic environments:**\r\n - OS information: [e.g., Linux 4.9.0-11-amd64 #1 SMP Debian 4.9.189-3+deb9u2 (2019-11-11) x86_64]\r\n - python version: [e.g. 3.7.3 (default, Mar 27 2019, 22:11:17) [GCC 7.3.0]]\r\n - espnet version: [e.g. espnet 0.8.0]\r\n - Git hash [e.g. b88e89fc7246fed4c2842b55baba884fe1b4ecc2]\r\n   - Commit date [e.g. Tue Sep 1 09:32:54 2020 -0400]\r\n - pytorch version [e.g. pytorch 1.4.0]\r\n 1.3.1\r\nYou can obtain them by the following command\r\n```\r\ncd <espnet-root>/tools\r\n. ./activate_python.sh\r\n\r\necho \"- OS information: `uname -mrsv`\"\r\npython3 << EOF\r\nimport sys, espnet, torch\r\npyversion = sys.version.replace('\\n', ' ')\r\nprint(f\"\"\"- python version: \\`{pyversion}\\`\r\n- espnet version: \\`espnet {espnet.__version__}\\`\r\n- pytorch version: \\`pytorch {torch.__version__}\\`\"\"\")\r\nEOF\r\ncat << EOF\r\n- Git hash: \\`$(git rev-parse HEAD)\\`\r\n  - Commit date: \\`$(git log -1 --format='%cd')\\`\r\nEOF\r\n```\r\n\r\n**Environments from `torch.utils.collect_env`:**\r\ne.g.,\r\n```\r\nCollecting environment information...\r\nPyTorch version: 1.4.0\r\nIs debug build: No\r\nCUDA used to build PyTorch: 10.0\r\n\r\nOS: CentOS Linux release 7.5.1804 (Core)\r\nGCC version: (GCC) 7.2.0\r\nCMake version: version 2.8.12.2\r\n\r\nPython version: 3.7\r\nIs CUDA available: Yes\r\nCUDA runtime version: 10.0.130\r\nGPU models and configuration:\r\nGPU 0: TITAN RTX\r\nGPU 1: TITAN RTX\r\nGPU 2: TITAN RTX\r\nGPU 3: TITAN RTX\r\n\r\nNvidia driver version: 440.33.01\r\ncuDNN version: Could not collect\r\n\r\nVersions of relevant libraries:\r\n[pip3] numpy==1.18.5\r\n[pip3] pytorch-ranger==0.1.1\r\n[pip3] pytorch-wpe==0.0.0\r\n[pip3] torch==1.4.0\r\n[pip3] torch-complex==0.1.1\r\n[pip3] torch-optimizer==0.0.1a14\r\n[pip3] torchaudio==0.4.0\r\n[pip3] warprnnt-pytorch==0.1\r\n[conda] blas                      1.0                         mkl\r\n[conda] mkl                       2020.1                      217\r\n[conda] mkl-service               2.3.0            py37he904b0f_0\r\n[conda] mkl_fft                   1.1.0            py37h23d657b_0\r\n[conda] mkl_random                1.1.1            py37h0573a6f_0\r\n[conda] pytorch                   1.4.0           py3.7_cuda10.0.130_cudnn7.6.3_0    pytorch\r\n[conda] pytorch-ranger            0.1.1                    pypi_0    pypi\r\n[conda] pytorch-wpe               0.0.0                    pypi_0    pypi\r\n[conda] torch-complex             0.1.1                    pypi_0    pypi\r\n[conda] torch-optimizer           0.0.1a14                 pypi_0    pypi\r\n[conda] torchaudio                0.4.0                    pypi_0    pypi\r\n[conda] warprnnt-pytorch          0.1                      pypi_0    pypi\r\n```\r\nYou can obtain them by the following command\r\n\r\n```\r\ncd <espnet-root>/tools\r\n. ./activate_python.sh\r\npython3 -m torch.utils.collect_env\r\n```\r\n\r\n**Task information:**\r\n - Task: [e.g., ASR, TTS, ST, ENH]\r\n - Recipe: [e.g. librispeech]\r\n - ESPnet1 or ESPnet2\r\n\r\n**To Reproduce**\r\nSteps to reproduce the behavior:\r\n1. move to a recipe directory, e.g., `cd egs/librispeech/asr1`\r\n2. execute `run.sh` with specific arguments, e.g., `run.sh --stage 3 --ngp 1`\r\n3. specify the error log, e.g., `exp/xxx/yyy.log`\r\n\r\n**Error logs**\r\nPaste the error logs. If applicable, add screenshots to help explain your problem.\r\n", "reactions": {"url": "https://api.github.com/repos/espnet/espnet/issues/2810/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/espnet/espnet/issues/2810/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/espnet/espnet/issues/2806", "repository_url": "https://api.github.com/repos/espnet/espnet", "labels_url": "https://api.github.com/repos/espnet/espnet/issues/2806/labels{/name}", "comments_url": "https://api.github.com/repos/espnet/espnet/issues/2806/comments", "events_url": "https://api.github.com/repos/espnet/espnet/issues/2806/events", "html_url": "https://github.com/espnet/espnet/issues/2806", "id": 773739826, "node_id": "MDU6SXNzdWU3NzM3Mzk4MjY=", "number": 2806, "title": "why calling espnet2 module in a espnet script????", "user": {"login": "200987299", "id": 33377212, "node_id": "MDQ6VXNlcjMzMzc3MjEy", "avatar_url": "https://avatars.githubusercontent.com/u/33377212?v=4", "gravatar_id": "", "url": "https://api.github.com/users/200987299", "html_url": "https://github.com/200987299", "followers_url": "https://api.github.com/users/200987299/followers", "following_url": "https://api.github.com/users/200987299/following{/other_user}", "gists_url": "https://api.github.com/users/200987299/gists{/gist_id}", "starred_url": "https://api.github.com/users/200987299/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/200987299/subscriptions", "organizations_url": "https://api.github.com/users/200987299/orgs", "repos_url": "https://api.github.com/users/200987299/repos", "events_url": "https://api.github.com/users/200987299/events{/privacy}", "received_events_url": "https://api.github.com/users/200987299/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 777173273, "node_id": "MDU6TGFiZWw3NzcxNzMyNzM=", "url": "https://api.github.com/repos/espnet/espnet/labels/Bug", "name": "Bug", "color": "ee0701", "default": false, "description": "bug should be fixed"}, {"id": 1412395969, "node_id": "MDU6TGFiZWwxNDEyMzk1OTY5", "url": "https://api.github.com/repos/espnet/espnet/labels/Docker", "name": "Docker", "color": "a3fc8a", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 7, "created_at": "2020-12-23T13:05:04Z", "updated_at": "2021-09-27T15:01:41Z", "closed_at": "2021-09-27T15:01:41Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": " I was running chime4/asr1/run.sh and the following error occurred:\r\n\r\n\r\n\r\n File \"/espnet/espnet/nets/beam_search_transducer.py\", line 19, in <module>\r\n    from espnet2.asr.decoder.abs_decoder import AbsDecoder\r\nModuleNotFoundError: No module named 'espnet2'", "reactions": {"url": "https://api.github.com/repos/espnet/espnet/issues/2806/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/espnet/espnet/issues/2806/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/espnet/espnet/issues/2805", "repository_url": "https://api.github.com/repos/espnet/espnet", "labels_url": "https://api.github.com/repos/espnet/espnet/issues/2805/labels{/name}", "comments_url": "https://api.github.com/repos/espnet/espnet/issues/2805/comments", "events_url": "https://api.github.com/repos/espnet/espnet/issues/2805/events", "html_url": "https://github.com/espnet/espnet/issues/2805", "id": 773702440, "node_id": "MDU6SXNzdWU3NzM3MDI0NDA=", "number": 2805, "title": "How we can perform greedy decoding for RNN_T ?", "user": {"login": "Selma-KA", "id": 56079125, "node_id": "MDQ6VXNlcjU2MDc5MTI1", "avatar_url": "https://avatars.githubusercontent.com/u/56079125?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Selma-KA", "html_url": "https://github.com/Selma-KA", "followers_url": "https://api.github.com/users/Selma-KA/followers", "following_url": "https://api.github.com/users/Selma-KA/following{/other_user}", "gists_url": "https://api.github.com/users/Selma-KA/gists{/gist_id}", "starred_url": "https://api.github.com/users/Selma-KA/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Selma-KA/subscriptions", "organizations_url": "https://api.github.com/users/Selma-KA/orgs", "repos_url": "https://api.github.com/users/Selma-KA/repos", "events_url": "https://api.github.com/users/Selma-KA/events{/privacy}", "received_events_url": "https://api.github.com/users/Selma-KA/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 777173273, "node_id": "MDU6TGFiZWw3NzcxNzMyNzM=", "url": "https://api.github.com/repos/espnet/espnet/labels/Bug", "name": "Bug", "color": "ee0701", "default": false, "description": "bug should be fixed"}, {"id": 2519100905, "node_id": "MDU6TGFiZWwyNTE5MTAwOTA1", "url": "https://api.github.com/repos/espnet/espnet/labels/RNNT", "name": "RNNT", "color": "0e8a16", "default": false, "description": "(RNN) transducer related issue"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2020-12-23T11:56:57Z", "updated_at": "2020-12-24T14:37:59Z", "closed_at": "2020-12-24T14:37:59Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi,\r\nI trained an RNNT model using vivos recipe. I performed the decoding using beam search successfully now I'm trying to perform the decoding with greedy search I thought I could do that by setting beam-size parameter to 1:\r\n\r\n**# decoding parameters**\r\nbatch: 0\r\n**beam-size: 1**\r\nsearch-type: default\r\nscore-norm: True\r\n\r\n but I got this error:\r\n\r\n  File \"/home/selma/espnet/espnet/asr/pytorch_backend/asr.py\", line 1074, in recog\r\n    js[name], nbest_hyps, train_args.char_list\r\n  File \"/home/selma/espnet/espnet/asr/asr_utils.py\", line 828, in add_results_to_json\r\n    rec_text, rec_token, rec_tokenid, score = parse_hypothesis(hyp, char_list)\r\n  File \"/home/selma/espnet/espnet/asr/asr_utils.py\", line 796, in parse_hypothesis\r\n    tokenid_as_list = list(map(int, hyp[\"yseq\"][1:]))\r\nTypeError: string indices must be integers\r\n\r\nSo I would like to know how could I perform greedy decoding for my model.\r\nThanks in advance!\r\n", "reactions": {"url": "https://api.github.com/repos/espnet/espnet/issues/2805/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/espnet/espnet/issues/2805/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/espnet/espnet/issues/2804", "repository_url": "https://api.github.com/repos/espnet/espnet", "labels_url": "https://api.github.com/repos/espnet/espnet/issues/2804/labels{/name}", "comments_url": "https://api.github.com/repos/espnet/espnet/issues/2804/comments", "events_url": "https://api.github.com/repos/espnet/espnet/issues/2804/events", "html_url": "https://github.com/espnet/espnet/issues/2804", "id": 773633624, "node_id": "MDU6SXNzdWU3NzM2MzM2MjQ=", "number": 2804, "title": "ESPnet2  Distributed training", "user": {"login": "panpanli521", "id": 15307422, "node_id": "MDQ6VXNlcjE1MzA3NDIy", "avatar_url": "https://avatars.githubusercontent.com/u/15307422?v=4", "gravatar_id": "", "url": "https://api.github.com/users/panpanli521", "html_url": "https://github.com/panpanli521", "followers_url": "https://api.github.com/users/panpanli521/followers", "following_url": "https://api.github.com/users/panpanli521/following{/other_user}", "gists_url": "https://api.github.com/users/panpanli521/gists{/gist_id}", "starred_url": "https://api.github.com/users/panpanli521/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/panpanli521/subscriptions", "organizations_url": "https://api.github.com/users/panpanli521/orgs", "repos_url": "https://api.github.com/users/panpanli521/repos", "events_url": "https://api.github.com/users/panpanli521/events{/privacy}", "received_events_url": "https://api.github.com/users/panpanli521/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 777173273, "node_id": "MDU6TGFiZWw3NzcxNzMyNzM=", "url": "https://api.github.com/repos/espnet/espnet/labels/Bug", "name": "Bug", "color": "ee0701", "default": false, "description": "bug should be fixed"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-12-23T09:58:09Z", "updated_at": "2020-12-23T10:05:55Z", "closed_at": "2020-12-23T10:05:37Z", "author_association": "NONE", "active_lock_reason": null, "body": "Espnet Doc: https://espnet.github.io/espnet/espnet2_distributed.html\r\n![image](https://user-images.githubusercontent.com/15307422/102984169-26738980-4548-11eb-9832-9432bfe505b4.png)\r\n\r\nwhen I execute this command , \r\n`python -m espnet2.bin.asr_train --ngpu 1 --multiprocessing_distributed true`\r\nerror occurs.\r\n![image](https://user-images.githubusercontent.com/15307422/102984784-17410b80-4549-11eb-97b4-e18d1b6914fc.png)\r\n\r\nAfter I modify this command like this: \r\n`python -m espnet2.bin.asr_train --ngpu 1 --multiprocessing_distributed true --output_dir conf --token_list data/token_list/bpe_unigram30/tokens.txt --bpemodel data/token_list/bpe_unigram30/bpe.model --train_data_path_and_name_and_type dump/raw/lm_train.txt,speech,text --allow_variable_data_keys true`\r\nerror occurs too\r\n![image](https://user-images.githubusercontent.com/15307422/102984548-b4e80b00-4548-11eb-9a2a-3389e7529111.png)\r\n\r\nSomeone else run into this problem?", "reactions": {"url": "https://api.github.com/repos/espnet/espnet/issues/2804/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/espnet/espnet/issues/2804/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/espnet/espnet/issues/2803", "repository_url": "https://api.github.com/repos/espnet/espnet", "labels_url": "https://api.github.com/repos/espnet/espnet/issues/2803/labels{/name}", "comments_url": "https://api.github.com/repos/espnet/espnet/issues/2803/comments", "events_url": "https://api.github.com/repos/espnet/espnet/issues/2803/events", "html_url": "https://github.com/espnet/espnet/issues/2803", "id": 773611927, "node_id": "MDU6SXNzdWU3NzM2MTE5Mjc=", "number": 2803, "title": "ESPnet2  Distributed training Error", "user": {"login": "panpanli521", "id": 15307422, "node_id": "MDQ6VXNlcjE1MzA3NDIy", "avatar_url": "https://avatars.githubusercontent.com/u/15307422?v=4", "gravatar_id": "", "url": "https://api.github.com/users/panpanli521", "html_url": "https://github.com/panpanli521", "followers_url": "https://api.github.com/users/panpanli521/followers", "following_url": "https://api.github.com/users/panpanli521/following{/other_user}", "gists_url": "https://api.github.com/users/panpanli521/gists{/gist_id}", "starred_url": "https://api.github.com/users/panpanli521/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/panpanli521/subscriptions", "organizations_url": "https://api.github.com/users/panpanli521/orgs", "repos_url": "https://api.github.com/users/panpanli521/repos", "events_url": "https://api.github.com/users/panpanli521/events{/privacy}", "received_events_url": "https://api.github.com/users/panpanli521/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 777173273, "node_id": "MDU6TGFiZWw3NzcxNzMyNzM=", "url": "https://api.github.com/repos/espnet/espnet/labels/Bug", "name": "Bug", "color": "ee0701", "default": false, "description": "bug should be fixed"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-12-23T09:22:43Z", "updated_at": "2020-12-23T09:47:24Z", "closed_at": "2020-12-23T09:47:23Z", "author_association": "NONE", "active_lock_reason": null, "body": "\r\n![image](https://user-images.githubusercontent.com/15307422/102980511-a5fe5a00-4542-11eb-8081-c82fa8e9cebc.png)\r\n\r\nwhen I execute this command\uff0cerror occur as follows:\r\n![image](https://user-images.githubusercontent.com/15307422/102980605-cd552700-4542-11eb-845c-74b768211023.png)\r\n\r\nSomeone else could give me a valid example? Thanks.\r\n", "reactions": {"url": "https://api.github.com/repos/espnet/espnet/issues/2803/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/espnet/espnet/issues/2803/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/espnet/espnet/issues/2799", "repository_url": "https://api.github.com/repos/espnet/espnet", "labels_url": "https://api.github.com/repos/espnet/espnet/issues/2799/labels{/name}", "comments_url": "https://api.github.com/repos/espnet/espnet/issues/2799/comments", "events_url": "https://api.github.com/repos/espnet/espnet/issues/2799/events", "html_url": "https://github.com/espnet/espnet/issues/2799", "id": 772906219, "node_id": "MDU6SXNzdWU3NzI5MDYyMTk=", "number": 2799, "title": "Unable to run ASR : JSONDecodeError", "user": {"login": "kranthik13", "id": 42429675, "node_id": "MDQ6VXNlcjQyNDI5Njc1", "avatar_url": "https://avatars.githubusercontent.com/u/42429675?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kranthik13", "html_url": "https://github.com/kranthik13", "followers_url": "https://api.github.com/users/kranthik13/followers", "following_url": "https://api.github.com/users/kranthik13/following{/other_user}", "gists_url": "https://api.github.com/users/kranthik13/gists{/gist_id}", "starred_url": "https://api.github.com/users/kranthik13/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kranthik13/subscriptions", "organizations_url": "https://api.github.com/users/kranthik13/orgs", "repos_url": "https://api.github.com/users/kranthik13/repos", "events_url": "https://api.github.com/users/kranthik13/events{/privacy}", "received_events_url": "https://api.github.com/users/kranthik13/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 777173273, "node_id": "MDU6TGFiZWw3NzcxNzMyNzM=", "url": "https://api.github.com/repos/espnet/espnet/labels/Bug", "name": "Bug", "color": "ee0701", "default": false, "description": "bug should be fixed"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2020-12-22T12:22:09Z", "updated_at": "2021-01-02T22:28:18Z", "closed_at": "2021-01-02T22:28:18Z", "author_association": "NONE", "active_lock_reason": null, "body": "I was testing the ASR pretrained model **tedlium2.transformer.v1** on **Google Colab** using my sample wav file which had frame rate of **16000** and **1** channel.\r\n\r\n**Basic environments:**\r\n - OS information: Linux 4.19.112+ #1 SMP Thu Jul 23 08:00:38 PDT 2020 x86_64\r\n - python version: 3.6.9 (default, Oct  8 2020, 12:12:24)  [GCC 8.4.0]\r\n - espnet version: espnet 0.9.6\r\n - Git hash [53f6aa11d8702c76fc3220ca94ea279a11dbcf19]\r\n   - Commit date [Tue Dec 22 04:34:09 2020 +0000]\r\n - pytorch version: 1.1.0\r\n\r\n\r\n**Environments from `torch.utils.collect_env`:**\r\n```\r\nWarning! You haven't set Python environment yet. Go to /content/espnet/tools and generate 'activate_python.sh'\r\nCollecting environment information...\r\nPyTorch version: 1.1.0\r\nIs debug build: No\r\nCUDA used to build PyTorch: 9.0.176\r\n\r\nOS: Ubuntu 18.04.5 LTS\r\nGCC version: (Ubuntu 7.5.0-3ubuntu1~18.04) 7.5.0\r\nCMake version: version 3.12.0\r\n\r\nPython version: 3.6\r\nIs CUDA available: Yes\r\nCUDA runtime version: 10.1.243\r\nGPU models and configuration: GPU 0: Tesla P100-PCIE-16GB\r\nNvidia driver version: 418.67\r\ncuDNN version: /usr/lib/x86_64-linux-gnu/libcudnn.so.7.6.5\r\n\r\nVersions of relevant libraries:\r\n[pip3] numpy==1.19.4\r\n[pip3] pytorch-ranger==0.1.1\r\n[pip3] pytorch-wpe==0.0.0\r\n[pip3] torch==1.1.0\r\n[pip3] torch-complex==0.2.0\r\n[pip3] torch-optimizer==0.0.1a17\r\n[pip3] torchsummary==1.5.1\r\n[pip3] torchtext==0.3.1\r\n[pip3] torchvision==0.8.1+cu101\r\n[pip3] warpctc-pytorch==0.1.1\r\n[conda] Could not collect\r\n```\r\n\r\n**Task information:**\r\n - Task: ASR\r\n - Recipe: telium2\r\n\r\n**Execution command:** \r\n```\r\ncd /content/espnet/egs/tedlium2/asr1; bash ../../../utils/recog_wav.sh --models tedlium2.transformer.v1  /content/naruto_1.wav\r\n```\r\n\r\n**Output for the above command is :** \r\n```\r\nWarning! You haven't set Python environment yet. Go to /content/espnet/tools and generate 'activate_python.sh'\r\nstage 0: Data preparation\r\nstage 1: Feature Generation\r\nsteps/make_fbank_pitch.sh --cmd run.pl --nj 1 --write_utt2num_frames true decode/naruto_1/data decode/naruto_1/log decode/naruto_1/fbank\r\nWarning! You haven't set Python environment yet. Go to /content/espnet/tools and generate 'activate_python.sh'\r\nsteps/make_fbank_pitch.sh: moving decode/naruto_1/data/feats.scp to decode/naruto_1/data/.backup\r\nutils/validate_data_dir.sh: WARNING: you have only one speaker.  This probably a bad idea.\r\n   Search for the word 'bold' in http://kaldi-asr.org/doc/data_prep.html\r\n   for more information.\r\nutils/validate_data_dir.sh: Successfully validated data-directory decode/naruto_1/data\r\nsteps/make_fbank_pitch.sh: [info]: no segments file exists: assuming wav.scp indexed by utterance.\r\nsteps/make_fbank_pitch.sh: Succeeded creating filterbank and pitch features for data\r\n/content/espnet/egs/tedlium2/asr1/../../../utils/dump.sh --cmd run.pl --nj 1 --do_delta false decode/naruto_1/data/feats.scp decode/download/tedlium2.transformer.v1/data/train_trim_sp/cmvn.ark decode/naruto_1/log decode/naruto_1/dump\r\nWarning! You haven't set Python environment yet. Go to /content/espnet/tools and generate 'activate_python.sh'\r\nstage 2: Json Data Preparation\r\n/content/espnet/egs/tedlium2/asr1/../../../utils/data2json.sh --feat decode/naruto_1/dump/feats.scp decode/naruto_1/data decode/naruto_1/dict\r\n/content/espnet/egs/tedlium2/asr1/../../../utils/feat_to_shape.sh --cmd run.pl --nj 1 --filetype  --preprocess-conf  --verbose 0 decode/naruto_1/dump/feats.scp decode/naruto_1/data/tmp-3ZOjA/input_1/shape.scp\r\nsym2int.pl: replacing X with 1\r\n** Replaced 1 instances of OOVs with 1\r\nstage 3: Decoding\r\nrun.pl: job failed, log is in decode/naruto_1/log/decode.log\r\n```\r\n\r\n**Error Logs:**\r\n\r\nOutput Error Log (**decode/naruto_1/log/decode.log**)  :\r\n```\r\n# asr_recog.py --config decode/download/tedlium2.transformer.v1/conf/decode.yaml --ngpu 0 --backend pytorch --debugmode 1 --verbose 1 --recog-json decode/naruto_1/dump/data.json --result-label decode/naruto_1/result.json --model decode/download/tedlium2.transformer.v1/exp/train_trim_sp_pytorch_nbpe500_ngpu2_train_pytorch_transformer.v2_epochs100_specaug/results/model.last10.avg.best.ep86_irielmep1_beam40 --api v2 --rnnlm decode/download/tedlium2.transformer.v1/exp/train_rnnlm_pytorch_lm_irie_batchsize128_unigram500/rnnlm.model.best \r\n# Started at Tue Dec 22 11:57:04 UTC 2020\r\n#\r\n2020-12-22 11:57:05,112 (asr_recog:305) INFO: python path = /env/python\r\n2020-12-22 11:57:05,112 (asr_recog:310) INFO: set random seed = 1\r\n2020-12-22 11:57:05,112 (asr_recog:321) INFO: backend = pytorch\r\n2020-12-22 11:57:07,272 (recog:34) WARNING: experimental API for custom LMs is selected by --api v2\r\n2020-12-22 11:57:07,273 (deterministic_utils:26) INFO: torch type check is disabled\r\n2020-12-22 11:57:07,273 (asr_utils:656) INFO: reading a config file from decode/download/tedlium2.transformer.v1/exp/train_trim_sp_pytorch_nbpe500_ngpu2_train_pytorch_transformer.v2_epochs100_specaug/results/model.json\r\n2020-12-22 11:57:07,273 (asr_init:169) WARNING: reading model parameters from decode/download/tedlium2.transformer.v1/exp/train_trim_sp_pytorch_nbpe500_ngpu2_train_pytorch_transformer.v2_epochs100_specaug/results/model.last10.avg.best.ep86_irielmep1_beam40\r\n2020-12-22 11:57:07,430 (fill_missing_args:42) INFO: attribute \"transformer_encoder_selfattn_layer_type\" does not exist. use default selfattn.\r\n2020-12-22 11:57:07,430 (fill_missing_args:42) INFO: attribute \"transformer_decoder_selfattn_layer_type\" does not exist. use default selfattn.\r\n2020-12-22 11:57:07,430 (fill_missing_args:42) INFO: attribute \"wshare\" does not exist. use default 4.\r\n2020-12-22 11:57:07,430 (fill_missing_args:42) INFO: attribute \"ldconv_encoder_kernel_length\" does not exist. use default 21_23_25_27_29_31_33_35_37_39_41_43.\r\n2020-12-22 11:57:07,431 (fill_missing_args:42) INFO: attribute \"ldconv_decoder_kernel_length\" does not exist. use default 11_13_15_17_19_21.\r\n2020-12-22 11:57:07,431 (fill_missing_args:42) INFO: attribute \"ldconv_usebias\" does not exist. use default False.\r\n2020-12-22 11:57:07,462 (encoder:148) INFO: encoder self-attention layer type = self-attention\r\n2020-12-22 11:57:07,641 (decoder:125) INFO: decoder self-attention layer type = self-attention\r\n2020-12-22 11:57:07,885 (io_utils:59) WARNING: [Experimental feature] Some preprocessing will be done for the mini-batch creation using Transformation(\r\n    0: TimeWarp(max_time_warp=5, inplace=True, mode=PIL)\r\n    1: FreqMask(F=30, n_mask=2, replace_with_zero=False, inplace=True)\r\n    2: TimeMask(T=40, n_mask=2, replace_with_zero=False, inplace=True))\r\n2020-12-22 11:57:07,885 (asr_utils:656) INFO: reading a config file from decode/download/tedlium2.transformer.v1/exp/train_rnnlm_pytorch_lm_irie_batchsize128_unigram500/model.json\r\n2020-12-22 11:57:10,939 (recog:123) INFO: Decoding device=cpu, dtype=torch.float32\r\nTraceback (most recent call last):\r\n  File \"/content/espnet/egs/tedlium2/asr1/../../../espnet/bin/asr_recog.py\", line 363, in <module>\r\n    main(sys.argv[1:])\r\n  File \"/content/espnet/egs/tedlium2/asr1/../../../espnet/bin/asr_recog.py\", line 333, in main\r\n    recog_v2(args)\r\n  File \"/content/espnet/espnet/asr/pytorch_backend/recog.py\", line 129, in recog_v2\r\n    js = json.load(f)[\"utts\"]\r\n  File \"/usr/lib/python3.6/json/__init__.py\", line 299, in load\r\n    parse_constant=parse_constant, object_pairs_hook=object_pairs_hook, **kw)\r\n  File \"/usr/lib/python3.6/json/__init__.py\", line 354, in loads\r\n    return _default_decoder.decode(s)\r\n  File \"/usr/lib/python3.6/json/decoder.py\", line 339, in decode\r\n    obj, end = self.raw_decode(s, idx=_w(s, 0).end())\r\n  File \"/usr/lib/python3.6/json/decoder.py\", line 357, in raw_decode\r\n    raise JSONDecodeError(\"Expecting value\", s, err.value) from None\r\njson.decoder.JSONDecodeError: Expecting value: line 1 column 1 (char 0)\r\n# Accounting: time=7 threads=1\r\n# Ended (code 1) at Tue Dec 22 11:57:11 UTC 2020, elapsed time 7 seconds\r\n```", "reactions": {"url": "https://api.github.com/repos/espnet/espnet/issues/2799/reactions", "total_count": 1, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/espnet/espnet/issues/2799/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/espnet/espnet/issues/2790", "repository_url": "https://api.github.com/repos/espnet/espnet", "labels_url": "https://api.github.com/repos/espnet/espnet/issues/2790/labels{/name}", "comments_url": "https://api.github.com/repos/espnet/espnet/issues/2790/comments", "events_url": "https://api.github.com/repos/espnet/espnet/issues/2790/events", "html_url": "https://github.com/espnet/espnet/issues/2790", "id": 771499286, "node_id": "MDU6SXNzdWU3NzE0OTkyODY=", "number": 2790, "title": "Code-mixing Multi-GPU training: \"Segmentation fault\"", "user": {"login": "DTDwind", "id": 22238266, "node_id": "MDQ6VXNlcjIyMjM4MjY2", "avatar_url": "https://avatars.githubusercontent.com/u/22238266?v=4", "gravatar_id": "", "url": "https://api.github.com/users/DTDwind", "html_url": "https://github.com/DTDwind", "followers_url": "https://api.github.com/users/DTDwind/followers", "following_url": "https://api.github.com/users/DTDwind/following{/other_user}", "gists_url": "https://api.github.com/users/DTDwind/gists{/gist_id}", "starred_url": "https://api.github.com/users/DTDwind/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/DTDwind/subscriptions", "organizations_url": "https://api.github.com/users/DTDwind/orgs", "repos_url": "https://api.github.com/users/DTDwind/repos", "events_url": "https://api.github.com/users/DTDwind/events{/privacy}", "received_events_url": "https://api.github.com/users/DTDwind/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 777173273, "node_id": "MDU6TGFiZWw3NzcxNzMyNzM=", "url": "https://api.github.com/repos/espnet/espnet/labels/Bug", "name": "Bug", "color": "ee0701", "default": false, "description": "bug should be fixed"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2020-12-20T02:51:30Z", "updated_at": "2021-01-03T12:16:27Z", "closed_at": "2021-01-03T12:16:27Z", "author_association": "NONE", "active_lock_reason": null, "body": "### Code-mixing Multi-GPU training: \"Segmentation fault\"\r\n\r\nHi, I don't know what happened, but something went wrong.\r\n\r\nMaybe the normalize of gradient?\r\n(asr:235) INFO: grad norm\r\n\r\nAnybody can help with that?\r\n\r\nThanks!\r\n\r\n\r\n**Error logs**\r\n```\r\nbash: line 1: 21180 Segmentation fault      (core dumped) ( asr_train.py --config conf/train_635_storng_baseline.yaml --ngpu 2 --backend pytorch --outdir exp/train_635_sp_re_pytorch_rnn_635_strong_baseline_small_test/results --tensorboard-dir tensorboard/exp/train_635_sp_re_pytorch_rnn_635_strong_baseline_small_test --debugmode 1 --dict data/lang_1char/train_635_sp_re_units.txt --debugdir exp/train_635_sp_re_pytorch_rnn_635_strong_baseline_small_test --minibatches 0 --verbose 1 --resume --train-json dump/train_635_sp_re/deltafalse/data.json --valid-json dump/dev_635_re/deltafalse/data.json --dropout-rate-decoder 0.2 ) 2>> exp/train_635_sp_re_pytorch_rnn_635_strong_baseline_small_test/train.log >> exp/train_635_sp_re_pytorch_rnn_635_strong_baseline_small_test/train.log\r\n```\r\n![image](https://user-images.githubusercontent.com/22238266/102703835-1ee58380-42af-11eb-8d83-1112b5ba4a32.png)\r\n\r\n\r\n - OS information: Linux 4.15.0-123-generic #126~16.04.1-Ubuntu SMP Wed Oct 21 13:48:05 UTC 2020 x86_64\r\n - python version: Python 3.7.7\r\n - espnet version: espnet 0.9.6\r\n - pytorch version pytorch 1.4.0\r\n - Git hash: 747c46d34cbba3e32bc99aecc49098c7d7ca30f5\r\n- Commit date: Tue Dec 1 12:09:32 2020 +0000\r\n\r\nOS: Ubuntu 16.04.7 LTS\r\nGCC version: (Ubuntu 5.4.0-6ubuntu1~16.04.12) 5.4.0 20160609\r\nCMake version: version 3.14.0\r\n\r\nPython version: 3.7\r\nIs CUDA available: Yes\r\nCUDA runtime version: 10.0.130\r\nGPU models and configuration: \r\nGPU 0: GeForce GTX 1080 Ti\r\nGPU 1: GeForce GTX 1080 Ti\r\n\r\nNvidia driver version: 410.48\r\ncuDNN version: /usr/lib/x86_64-linux-gnu/libcudnn.so.7.6.5\r\n\r\nVersions of relevant libraries:\r\n[pip3] numpy==1.19.4\r\n[pip3] pytorch-ranger==0.1.1\r\n[pip3] pytorch-wpe==0.0.0\r\n[pip3] torch==1.4.0+cu100\r\n[pip3] torch-complex==0.2.0\r\n[pip3] torch-optimizer==0.0.1a17\r\n[pip3] torchaudio==0.4.0\r\n[pip3] warpctc-pytorch==0.2.1\r\n[pip3] warprnnt-pytorch==0.1\r\n[conda] Could not collect\r\n\r\n**Task information:**\r\n - Task: ASR\r\n - ESPnet1\r\n\r\n\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/espnet/espnet/issues/2790/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/espnet/espnet/issues/2790/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/espnet/espnet/issues/2746", "repository_url": "https://api.github.com/repos/espnet/espnet", "labels_url": "https://api.github.com/repos/espnet/espnet/issues/2746/labels{/name}", "comments_url": "https://api.github.com/repos/espnet/espnet/issues/2746/comments", "events_url": "https://api.github.com/repos/espnet/espnet/issues/2746/events", "html_url": "https://github.com/espnet/espnet/issues/2746", "id": 755752699, "node_id": "MDU6SXNzdWU3NTU3NTI2OTk=", "number": 2746, "title": "Problem with AMI EGS2 Recipe", "user": {"login": "picheny-nyu", "id": 55798528, "node_id": "MDQ6VXNlcjU1Nzk4NTI4", "avatar_url": "https://avatars.githubusercontent.com/u/55798528?v=4", "gravatar_id": "", "url": "https://api.github.com/users/picheny-nyu", "html_url": "https://github.com/picheny-nyu", "followers_url": "https://api.github.com/users/picheny-nyu/followers", "following_url": "https://api.github.com/users/picheny-nyu/following{/other_user}", "gists_url": "https://api.github.com/users/picheny-nyu/gists{/gist_id}", "starred_url": "https://api.github.com/users/picheny-nyu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/picheny-nyu/subscriptions", "organizations_url": "https://api.github.com/users/picheny-nyu/orgs", "repos_url": "https://api.github.com/users/picheny-nyu/repos", "events_url": "https://api.github.com/users/picheny-nyu/events{/privacy}", "received_events_url": "https://api.github.com/users/picheny-nyu/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 777173273, "node_id": "MDU6TGFiZWw3NzcxNzMyNzM=", "url": "https://api.github.com/repos/espnet/espnet/labels/Bug", "name": "Bug", "color": "ee0701", "default": false, "description": "bug should be fixed"}, {"id": 1275359095, "node_id": "MDU6TGFiZWwxMjc1MzU5MDk1", "url": "https://api.github.com/repos/espnet/espnet/labels/Discussion", "name": "Discussion", "color": "e06b28", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 12, "created_at": "2020-12-03T02:08:58Z", "updated_at": "2021-01-04T01:13:53Z", "closed_at": "2021-01-04T01:13:53Z", "author_association": "NONE", "active_lock_reason": null, "body": "I am trying to run the egs2/ami recipe (for comparison with my MALACH run) and seem to have a problem with short utterances. I am a bit surprised because the length of the input segment in this case is 3200 samples which should be 20 frames, but the input length is reported as 5 frames (see attached). Do I need to set a minimum input segment length?\r\n\r\nThanks\r\nMichael\r\n\r\n```\r\n2020-12-02 20:14:54,628 (beam_search:358) INFO: decoder input length: 5\r\n2020-12-02 20:14:54,628 (beam_search:359) INFO: max output length: 5\r\n2020-12-02 20:14:54,628 (beam_search:360) INFO: min output length: 0\r\n2020-12-02 20:14:54,828 (batch_beam_search:321) INFO: adding <eos> in the last position in the loop\r\nTraceback (most recent call last):\r\n  File \"/misc/vlgscratch4/PichenyGroup/picheny/anaconda3/envs/espnet-sep032020/lib/python3.7/runpy.py\", line 193, in _run_module_as_main\r\n    \"__main__\", mod_spec)\r\n  File \"/misc/vlgscratch4/PichenyGroup/picheny/anaconda3/envs/espnet-sep032020/lib/python3.7/runpy.py\", line 85, in _run_code\r\n    exec(code, run_globals)\r\n  File \"/misc/vlgscratch4/PichenyGroup/picheny/anaconda3/envs/espnet-sep032020/lib/python3.7/site-packages/espnet2/bin/asr_inference.py\", line 447, in <module>\r\n    main()\r\n  File \"/misc/vlgscratch4/PichenyGroup/picheny/anaconda3/envs/espnet-sep032020/lib/python3.7/site-packages/espnet2/bin/asr_inference.py\", line 443, in main\r\n    inference(**kwargs)\r\n  File \"/misc/vlgscratch4/PichenyGroup/picheny/anaconda3/envs/espnet-sep032020/lib/python3.7/site-packages/espnet2/bin/asr_inference.py\", line 312, in inference\r\n    results = speech2text(**batch)\r\n  File \"/misc/vlgscratch4/PichenyGroup/picheny/anaconda3/envs/espnet-sep032020/lib/python3.7/site-packages/torch/autograd/grad_mode.py\", line 15, in decorate_context\r\n    return func(*args, **kwargs)\r\n  File \"/misc/vlgscratch4/PichenyGroup/picheny/anaconda3/envs/espnet-sep032020/lib/python3.7/site-packages/espnet2/bin/asr_inference.py\", line 194, in __call__\r\n    x=enc[0], maxlenratio=self.maxlenratio, minlenratio=self.minlenratio\r\n  File \"/misc/vlgscratch4/PichenyGroup/picheny/anaconda3/envs/espnet-sep032020/lib/python3.7/site-packages/torch/nn/modules/module.py\", line 722, in _call_impl\r\n    result = self.forward(*input, **kwargs)\r\n  File \"/misc/vlgscratch4/PichenyGroup/picheny/anaconda3/envs/espnet-sep032020/lib/python3.7/site-packages/espnet/nets/beam_search.py\", line 369, in forward\r\n    running_hyps = self.post_process(i, maxlen, maxlenratio, best, ended_hyps)\r\n  File \"/misc/vlgscratch4/PichenyGroup/picheny/anaconda3/envs/espnet-sep032020/lib/python3.7/site-packages/espnet/nets/batch_beam_search.py\", line 341, in post_process\r\n    running_hyps.yseq[torch.arange(n_batch), running_hyps.length - 1]\r\nIndexError: index 9 is out of bounds for dimension 1 with size 7\r\n# Accounting: time=48 threads=1\r\n# Ended (code 1) at Wed Dec  2 20:14:55 EST 2020, elapsed time 48 seconds\r\n```", "reactions": {"url": "https://api.github.com/repos/espnet/espnet/issues/2746/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/espnet/espnet/issues/2746/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/espnet/espnet/issues/2738", "repository_url": "https://api.github.com/repos/espnet/espnet", "labels_url": "https://api.github.com/repos/espnet/espnet/issues/2738/labels{/name}", "comments_url": "https://api.github.com/repos/espnet/espnet/issues/2738/comments", "events_url": "https://api.github.com/repos/espnet/espnet/issues/2738/events", "html_url": "https://github.com/espnet/espnet/issues/2738", "id": 754416138, "node_id": "MDU6SXNzdWU3NTQ0MTYxMzg=", "number": 2738, "title": "Dockerfile git clone kaldi errors", "user": {"login": "xiaosujie", "id": 12859577, "node_id": "MDQ6VXNlcjEyODU5NTc3", "avatar_url": "https://avatars.githubusercontent.com/u/12859577?v=4", "gravatar_id": "", "url": "https://api.github.com/users/xiaosujie", "html_url": "https://github.com/xiaosujie", "followers_url": "https://api.github.com/users/xiaosujie/followers", "following_url": "https://api.github.com/users/xiaosujie/following{/other_user}", "gists_url": "https://api.github.com/users/xiaosujie/gists{/gist_id}", "starred_url": "https://api.github.com/users/xiaosujie/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/xiaosujie/subscriptions", "organizations_url": "https://api.github.com/users/xiaosujie/orgs", "repos_url": "https://api.github.com/users/xiaosujie/repos", "events_url": "https://api.github.com/users/xiaosujie/events{/privacy}", "received_events_url": "https://api.github.com/users/xiaosujie/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 777173273, "node_id": "MDU6TGFiZWw3NzcxNzMyNzM=", "url": "https://api.github.com/repos/espnet/espnet/labels/Bug", "name": "Bug", "color": "ee0701", "default": false, "description": "bug should be fixed"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2020-12-01T13:56:28Z", "updated_at": "2022-08-23T09:11:08Z", "closed_at": "2022-08-23T09:11:08Z", "author_association": "NONE", "active_lock_reason": null, "body": "I run the command  ./build.sh fully_local 10.1, then prebuilt/runtime/Dockerfile, in this container, I can not git clone kaldi from github, errors as follows:\r\nCloning into 'kaldi'...\r\nerror: RPC failed; curl 56 GnuTLS recv error (-54): Error in the pull function.\r\nfatal: The remote end hung up unexpectedly\r\nfatal: early EOF\r\nfatal: index-pack failed\r\n\r\nHow can I solve this problem?", "reactions": {"url": "https://api.github.com/repos/espnet/espnet/issues/2738/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/espnet/espnet/issues/2738/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/espnet/espnet/issues/2737", "repository_url": "https://api.github.com/repos/espnet/espnet", "labels_url": "https://api.github.com/repos/espnet/espnet/issues/2737/labels{/name}", "comments_url": "https://api.github.com/repos/espnet/espnet/issues/2737/comments", "events_url": "https://api.github.com/repos/espnet/espnet/issues/2737/events", "html_url": "https://github.com/espnet/espnet/issues/2737", "id": 754362157, "node_id": "MDU6SXNzdWU3NTQzNjIxNTc=", "number": 2737, "title": "VOICE CONVERSION TRAINING ISSUE", "user": {"login": "tulasiram58827", "id": 27290902, "node_id": "MDQ6VXNlcjI3MjkwOTAy", "avatar_url": "https://avatars.githubusercontent.com/u/27290902?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tulasiram58827", "html_url": "https://github.com/tulasiram58827", "followers_url": "https://api.github.com/users/tulasiram58827/followers", "following_url": "https://api.github.com/users/tulasiram58827/following{/other_user}", "gists_url": "https://api.github.com/users/tulasiram58827/gists{/gist_id}", "starred_url": "https://api.github.com/users/tulasiram58827/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tulasiram58827/subscriptions", "organizations_url": "https://api.github.com/users/tulasiram58827/orgs", "repos_url": "https://api.github.com/users/tulasiram58827/repos", "events_url": "https://api.github.com/users/tulasiram58827/events{/privacy}", "received_events_url": "https://api.github.com/users/tulasiram58827/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 777173273, "node_id": "MDU6TGFiZWw3NzcxNzMyNzM=", "url": "https://api.github.com/repos/espnet/espnet/labels/Bug", "name": "Bug", "color": "ee0701", "default": false, "description": "bug should be fixed"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 34, "created_at": "2020-12-01T12:41:07Z", "updated_at": "2022-06-23T07:14:54Z", "closed_at": "2021-03-15T12:30:30Z", "author_association": "NONE", "active_lock_reason": null, "body": "**Describe the bug**\r\nI just followed the instructions given [here](https://github.com/espnet/espnet/tree/master/egs/arctic/vc1) in the Voice Conversion tutorial then I got this error.\r\n>  File \"/home/ram/Speech_projects/espnet/egs/arctic/vc1/../../../espnet/bin/vc_train.py\", line 364, in <module>\r\n    main(sys.argv[1:])\r\n  File \"/home/ram/Speech_projects/espnet/egs/arctic/vc1/../../../espnet/bin/vc_train.py\", line 358, in main\r\n    train(args)\r\n  File \"/home/ram/Speech_projects/espnet/espnet/vc/pytorch_backend/vc.py\", line 309, in train\r\n    model = load_trained_modules(idim, odim, args, TTSInterface)\r\n  File \"/home/ram/Speech_projects/espnet/espnet/asr/pytorch_backend/asr_init.py\", line 264, in load_trained_modules\r\n    model_state_dict, is_lm = get_trained_model_state_dict(model_path)\r\n  File \"/home/ram/Speech_projects/espnet/espnet/asr/pytorch_backend/asr_init.py\", line 214, in get_trained_model_state_dict\r\n    model_class = dynamic_import(model_module)\r\n  File \"/home/ram/Speech_projects/espnet/espnet/utils/dynamic_import.py\", line 22, in dynamic_import\r\n    m = importlib.import_module(module_name)\r\n  File \"/home/ram/anaconda3/envs/espnet/lib/python3.6/importlib/__init__.py\", line 126, in import_module\r\n    return _bootstrap._gcd_import(name[level:], package, level)\r\n  File \"<frozen importlib._bootstrap>\", line 994, in _gcd_import\r\n  File \"<frozen importlib._bootstrap>\", line 971, in _find_and_load\r\n  File \"<frozen importlib._bootstrap>\", line 953, in _find_and_load_unlocked\r\nModuleNotFoundError: No module named 'espnet.nets.pytorch_backend.vc_transformer'\r\n\r\nTo reproduce just follow the steps [here](https://github.com/espnet/espnet/tree/master/egs/arctic/vc1)\r\n\r\n@unilight @kan-bayashi ", "reactions": {"url": "https://api.github.com/repos/espnet/espnet/issues/2737/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/espnet/espnet/issues/2737/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/espnet/espnet/issues/2730", "repository_url": "https://api.github.com/repos/espnet/espnet", "labels_url": "https://api.github.com/repos/espnet/espnet/issues/2730/labels{/name}", "comments_url": "https://api.github.com/repos/espnet/espnet/issues/2730/comments", "events_url": "https://api.github.com/repos/espnet/espnet/issues/2730/events", "html_url": "https://github.com/espnet/espnet/issues/2730", "id": 753659940, "node_id": "MDU6SXNzdWU3NTM2NTk5NDA=", "number": 2730, "title": "librispeech asr1 recipe emits error at stage 2", "user": {"login": "jaesong", "id": 29899547, "node_id": "MDQ6VXNlcjI5ODk5NTQ3", "avatar_url": "https://avatars.githubusercontent.com/u/29899547?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jaesong", "html_url": "https://github.com/jaesong", "followers_url": "https://api.github.com/users/jaesong/followers", "following_url": "https://api.github.com/users/jaesong/following{/other_user}", "gists_url": "https://api.github.com/users/jaesong/gists{/gist_id}", "starred_url": "https://api.github.com/users/jaesong/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jaesong/subscriptions", "organizations_url": "https://api.github.com/users/jaesong/orgs", "repos_url": "https://api.github.com/users/jaesong/repos", "events_url": "https://api.github.com/users/jaesong/events{/privacy}", "received_events_url": "https://api.github.com/users/jaesong/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 777173273, "node_id": "MDU6TGFiZWw3NzcxNzMyNzM=", "url": "https://api.github.com/repos/espnet/espnet/labels/Bug", "name": "Bug", "color": "ee0701", "default": false, "description": "bug should be fixed"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2020-11-30T17:21:27Z", "updated_at": "2020-12-02T20:46:01Z", "closed_at": "2020-12-02T20:46:01Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "```\r\n$ cd <espnet>/egs/librispeech/asr1\r\n$ bash ./run.sh --dumpdir ... --datadir ... --stop-stage 1\r\n...\r\n$ bash ./run.sh --dumpdir ... --datadir ... --stop-stage 2 --stage 2\r\ndictionary: data/lang_char/train_960_unigram5000_units.txt\r\nstage 2: Dictionary and Json Data Preparation\r\ncut: data/train_960/text: No such file or directory\r\n```\r\n\r\nStage 1 produces `train_960_org`, `train_sp_org` (with speed perturbation) and `train_sp` (via `remove_longshortdata.sh`), but it does not produce `train_960`.\r\nHowever, stage 2 tries to read `data/${train_set}/text` whereas `train_set=train_960`.\r\n\r\nI guess it is related to recent changes regarding speed perturbation (https://github.com/espnet/espnet/pull/2617).", "reactions": {"url": "https://api.github.com/repos/espnet/espnet/issues/2730/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/espnet/espnet/issues/2730/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/espnet/espnet/issues/2728", "repository_url": "https://api.github.com/repos/espnet/espnet", "labels_url": "https://api.github.com/repos/espnet/espnet/issues/2728/labels{/name}", "comments_url": "https://api.github.com/repos/espnet/espnet/issues/2728/comments", "events_url": "https://api.github.com/repos/espnet/espnet/issues/2728/events", "html_url": "https://github.com/espnet/espnet/issues/2728", "id": 753487909, "node_id": "MDU6SXNzdWU3NTM0ODc5MDk=", "number": 2728, "title": "AMI Recipe for espnet2 config question", "user": {"login": "picheny-nyu", "id": 55798528, "node_id": "MDQ6VXNlcjU1Nzk4NTI4", "avatar_url": "https://avatars.githubusercontent.com/u/55798528?v=4", "gravatar_id": "", "url": "https://api.github.com/users/picheny-nyu", "html_url": "https://github.com/picheny-nyu", "followers_url": "https://api.github.com/users/picheny-nyu/followers", "following_url": "https://api.github.com/users/picheny-nyu/following{/other_user}", "gists_url": "https://api.github.com/users/picheny-nyu/gists{/gist_id}", "starred_url": "https://api.github.com/users/picheny-nyu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/picheny-nyu/subscriptions", "organizations_url": "https://api.github.com/users/picheny-nyu/orgs", "repos_url": "https://api.github.com/users/picheny-nyu/repos", "events_url": "https://api.github.com/users/picheny-nyu/events{/privacy}", "received_events_url": "https://api.github.com/users/picheny-nyu/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 777173273, "node_id": "MDU6TGFiZWw3NzcxNzMyNzM=", "url": "https://api.github.com/repos/espnet/espnet/labels/Bug", "name": "Bug", "color": "ee0701", "default": false, "description": "bug should be fixed"}, {"id": 1356233216, "node_id": "MDU6TGFiZWwxMzU2MjMzMjE2", "url": "https://api.github.com/repos/espnet/espnet/labels/Recipe", "name": "Recipe", "color": "f7e171", "default": false, "description": ""}, {"id": 1680978730, "node_id": "MDU6TGFiZWwxNjgwOTc4NzMw", "url": "https://api.github.com/repos/espnet/espnet/labels/ASR", "name": "ASR", "color": "3ee0d5", "default": false, "description": "Automatic speech recogntion"}, {"id": 1889036170, "node_id": "MDU6TGFiZWwxODg5MDM2MTcw", "url": "https://api.github.com/repos/espnet/espnet/labels/ESPnet2", "name": "ESPnet2", "color": "f2db68", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-11-30T13:40:25Z", "updated_at": "2020-12-01T14:47:48Z", "closed_at": "2020-12-01T14:47:48Z", "author_association": "NONE", "active_lock_reason": null, "body": "I see that for the espnet2 recipe for ami run.sh points to conf/decode_asr.yaml, but there is only a conf/decode.yaml. Is that the correct yaml file for the recipe or do I need to copy it from somewhere? \r\n\r\nThanks\r\nMichael\r\n", "reactions": {"url": "https://api.github.com/repos/espnet/espnet/issues/2728/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/espnet/espnet/issues/2728/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/espnet/espnet/issues/2725", "repository_url": "https://api.github.com/repos/espnet/espnet", "labels_url": "https://api.github.com/repos/espnet/espnet/issues/2725/labels{/name}", "comments_url": "https://api.github.com/repos/espnet/espnet/issues/2725/comments", "events_url": "https://api.github.com/repos/espnet/espnet/issues/2725/events", "html_url": "https://github.com/espnet/espnet/issues/2725", "id": 752872309, "node_id": "MDU6SXNzdWU3NTI4NzIzMDk=", "number": 2725, "title": "Error of \"RuntimeError: Format is invalid\" when training csmsc/tts1", "user": {"login": "HudsonHuang", "id": 5734717, "node_id": "MDQ6VXNlcjU3MzQ3MTc=", "avatar_url": "https://avatars.githubusercontent.com/u/5734717?v=4", "gravatar_id": "", "url": "https://api.github.com/users/HudsonHuang", "html_url": "https://github.com/HudsonHuang", "followers_url": "https://api.github.com/users/HudsonHuang/followers", "following_url": "https://api.github.com/users/HudsonHuang/following{/other_user}", "gists_url": "https://api.github.com/users/HudsonHuang/gists{/gist_id}", "starred_url": "https://api.github.com/users/HudsonHuang/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/HudsonHuang/subscriptions", "organizations_url": "https://api.github.com/users/HudsonHuang/orgs", "repos_url": "https://api.github.com/users/HudsonHuang/repos", "events_url": "https://api.github.com/users/HudsonHuang/events{/privacy}", "received_events_url": "https://api.github.com/users/HudsonHuang/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 777173273, "node_id": "MDU6TGFiZWw3NzcxNzMyNzM=", "url": "https://api.github.com/repos/espnet/espnet/labels/Bug", "name": "Bug", "color": "ee0701", "default": false, "description": "bug should be fixed"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 8, "created_at": "2020-11-29T09:07:36Z", "updated_at": "2020-11-29T12:35:13Z", "closed_at": "2020-11-29T11:09:34Z", "author_association": "NONE", "active_lock_reason": null, "body": "**Describe the bug**\r\nGot RuntimeError: Format is invalid when training csmsc/tts1\r\n\r\n**Basic environments:**\r\n - OS information: Linux 4.4.0-116-generic #140-Ubuntu SMP Mon Feb 12 21:23:04 UTC 2018 x86_64\r\n- python version: `3.7.9 (default, Aug 31 2020, 12:42:55)  [GCC 7.3.0]`\r\n- espnet version: `espnet 0.9.5`\r\n- pytorch version: `pytorch 1.7.0`\r\n- Git hash: `1e443b12e2fd95c2adf9c5e1e0a84de02e2ebaaf`\r\n  - Commit date: `Mon Nov 23 12:20:26 2020 -0500`\r\n\r\n**Environments from `torch.utils.collect_env`:**\r\n```\r\nCollecting environment information...\r\nPyTorch version: 1.7.0\r\nIs debug build: True\r\nCUDA used to build PyTorch: 10.1\r\nROCM used to build PyTorch: N/A\r\n\r\nOS: Ubuntu 16.04.6 LTS (x86_64)\r\nGCC version: (Ubuntu 5.4.0-6ubuntu1~16.04.12) 5.4.0 20160609\r\nClang version: Could not collect\r\nCMake version: version 3.5.1\r\n\r\nPython version: 3.7 (64-bit runtime)\r\nIs CUDA available: True\r\nCUDA runtime version: Could not collect\r\nGPU models and configuration:\r\nGPU 0: GeForce RTX 2080 Ti\r\nGPU 1: GeForce RTX 2080 Ti\r\nGPU 2: GeForce RTX 2080 Ti\r\nGPU 3: GeForce RTX 2080 Ti\r\nGPU 4: GeForce RTX 2080 Ti\r\nGPU 5: GeForce RTX 2080 Ti\r\nGPU 6: GeForce RTX 2080 Ti\r\nGPU 7: GeForce RTX 2080 Ti\r\n\r\nNvidia driver version: 450.57\r\ncuDNN version: /usr/lib/x86_64-linux-gnu/libcudnn.so.7.6.5\r\nHIP runtime version: N/A\r\nMIOpen runtime version: N/A\r\n\r\nVersions of relevant libraries:\r\n[pip] numpy==1.19.2\r\n[pip] pytorch-lightning==0.8.5\r\n[pip] pytorch-pretrained-bert==0.6.2\r\n[pip] pytorch-ranger==0.1.1\r\n[pip] pytorch-wpe==0.0.0\r\n[pip] torch==1.7.0\r\n[pip] torch-complex==0.1.2\r\n[pip] torch-optimizer==0.0.1a15\r\n[pip] torch-stft==0.1.4\r\n[pip] torch-stoi==0.1.1\r\n[pip] torchaudio==0.7.0\r\n[pip] torchprofile==0.0.1\r\n[pip] torchstat==0.0.7\r\n[pip] torchtext==0.7.0\r\n[pip] torchvision==0.8.1\r\n[conda] blas                      1.0                         mkl\r\n[conda] cudatoolkit               10.1.243             h6bb024c_0\r\n[conda] mkl                       2020.2                      256\r\n[conda] mkl-service               2.3.0            py37he904b0f_0\r\n[conda] mkl_fft                   1.2.0            py37h23d657b_0\r\n[conda] mkl_random                1.1.1            py37h0573a6f_0\r\n[conda] numpy                     1.19.2           py37h54aff64_0\r\n[conda] numpy-base                1.19.2           py37hfa32c7d_0\r\n[conda] pytorch                   1.7.0           py3.7_cuda10.1.243_cudnn7.6.3_0    pytorch\r\n[conda] pytorch-lightning         0.8.5                    pypi_0    pypi\r\n[conda] pytorch-pretrained-bert   0.6.2                    pypi_0    pypi\r\n[conda] pytorch-ranger            0.1.1                    pypi_0    pypi\r\n[conda] pytorch-wpe               0.0.0                    pypi_0    pypi\r\n[conda] torch                     1.5.1                    pypi_0    pypi\r\n[conda] torch-complex             0.1.2                    pypi_0    pypi\r\n[conda] torch-optimizer           0.0.1a15                 pypi_0    pypi\r\n[conda] torch-stft                0.1.4                    pypi_0    pypi\r\n[conda] torch-stoi                0.1.1                    pypi_0    pypi\r\n[conda] torchaudio                0.7.0                    pypi_0    pypi\r\n[conda] torchprofile              0.0.1                    pypi_0    pypi\r\n[conda] torchstat                 0.0.7                    pypi_0    pypi\r\n[conda] torchtext                 0.7.0                    pypi_0    pypi\r\n[conda] torchvision               0.6.1                    pypi_0    pypi\r\n```\r\n\r\n\r\n**Task information:**\r\n - Task: TTS\r\n - Recipe: csmsc\r\n - ESPnet2\r\n\r\n**To Reproduce**\r\nSteps to reproduce the behavior:\r\n1. cd egs2/csmsc/tts1\r\n2. bash run.sh\r\n3. specify the error log, `dump/raw/org/tr_no_dev/logs/format_wav_scp.*.log`\r\n\r\n**Error logs**\r\n- I got error in terminal like this:\r\n```\r\n(base) zhongyihuang@ubuntu:~/workspace/espnet/egs2/csmsc/tts1$ bash run.sh\r\n2020-11-29T03:15:42 (tts.sh:187:main) ./tts.sh --lang zh --feats_type raw --fs 24000 --n_fft 2048 --n_shift 300 --win_length 1200 --token_type phn --cleaner none --g2p pypinyin_g2p_phone --train_config conf/train.yaml --inference_config conf/decode.yaml --train_set tr_no_dev --valid_set dev --test_sets dev eval1 --srctexts data/tr_no_dev/text --audio_format flac\r\n2020-11-29T03:15:46 (tts.sh:275:main) Stage 1: Data preparation for data/tr_no_dev, data/dev, etc.\r\n2020-11-29T03:15:46 (data.sh:16:main) local/data.sh\r\n2020-11-29T03:15:48 (data.sh:39:main) stage -1: Data Download\r\nlocal/data_download.sh: line 16: then#[: command not found\r\nAlready exists. Skip download.\r\n2020-11-29T03:15:48 (data.sh:44:main) stage 0: local/data_prep.sh\r\n2020-11-29T03:40:01 (data.sh:91:main) stage 2: utils/subset_data_dir.sh\r\nutils/subset_data_dir.sh: reducing #utt from 10000 to 200\r\nutils/subset_data_dir.sh: reducing #utt from 200 to 100\r\nutils/subset_data_dir.sh: reducing #utt from 200 to 100\r\nutils/subset_data_dir.sh: reducing #utt from 10000 to 9800\r\n2020-11-29T03:40:04 (data.sh:100:main) Successfully finished. [elapsed=1458s]\r\n2020-11-29T03:40:04 (tts.sh:292:main) Stage 2: Format wav.scp: data/ -> dump/raw/\r\nutils/copy_data_dir.sh: copied data from data/tr_no_dev to dump/raw/org/tr_no_dev\r\nutils/validate_data_dir.sh: WARNING: you have only one speaker.  This probably a bad idea.\r\n   Search for the word 'bold' in http://kaldi-asr.org/doc/data_prep.html\r\n   for more information.\r\nutils/validate_data_dir.sh: Successfully validated data-directory dump/raw/org/tr_no_dev\r\n2020-11-29T03:40:06 (format_wav_scp.sh:42:main) scripts/audio/format_wav_scp.sh --nj 32 --cmd run.pl --audio-format flac --fs 24000 --segments data/tr_no_dev/segments data/tr_no_dev/wav.scp dump/raw/org/tr_no_dev\r\n2020-11-29T03:40:08 (format_wav_scp.sh:90:main) [info]: using data/tr_no_dev/segments\r\nrun.pl: 32 / 32 failed, log is in dump/raw/org/tr_no_dev/logs/format_wav_scp.*.log\r\n```\r\n\r\n- In the log file(dump/raw/org/tr_no_dev/logs/format_wav_scp.*.log), I got this:\r\n```\r\n# pyscripts/audio/format_wav_scp.py --fs 24000 --audio-format flac --segment=dump/raw/org/tr_no_dev/logs/segments.10 data/tr_no_dev/wav.scp dump/raw/org/tr_no_dev/data/format.10\r\n# Started at Sun Nov 29 03:40:08 EST 2020\r\n#\r\n2020-11-29 03:40:14,234 (format_wav_scp:43) INFO: /data3/zhongyihuang/anaconda3/bin/python3 pyscripts/audio/format_wav_scp.py --fs 24000 --audio-format flac --segment=dump/raw/org/tr_no_dev/logs/segments.10 data/tr_no_dev/wav.scp dump/raw/org/tr_no_dev/data/format.10\r\n^M0it [00:00, ?it/s]^M0it [00:00, ?it/s]\r\nloader data/tr_no_dev/wav.scp dump/raw/org/tr_no_dev/logs/segments.10\r\nTraceback (most recent call last):\r\n  File \"pyscripts/audio/format_wav_scp.py\", line 249, in <module>\r\n    main()\r\n  File \"pyscripts/audio/format_wav_scp.py\", line 106, in main\r\n    for uttid, (rate, wave) in tqdm(loader):\r\n  File \"/data3/zhongyihuang/anaconda3/lib/python3.7/site-packages/tqdm/std.py\", line 1171, in __iter__\r\n    for obj in iterable:\r\n  File \"/data3/zhongyihuang/anaconda3/lib/python3.7/site-packages/kaldiio/matio.py\", line 139, in load_scp_sequential\r\n    fname, separator=separator, segments=segments\r\n  File \"/data3/zhongyihuang/anaconda3/lib/python3.7/site-packages/kaldiio/matio.py\", line 170, in __init__\r\n    raise RuntimeError(\"Format is invalid: {}\".format(line))\r\nRuntimeError: Format is invalid: 002763 002763 0.3397468035218096\r\n\r\n# Accounting: time=6 threads=1\r\n# Ended (code 1) at Sun Nov 29 03:40:14 EST 2020, elapsed time 6 seconds\r\n```\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/espnet/espnet/issues/2725/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/espnet/espnet/issues/2725/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/espnet/espnet/issues/2722", "repository_url": "https://api.github.com/repos/espnet/espnet", "labels_url": "https://api.github.com/repos/espnet/espnet/issues/2722/labels{/name}", "comments_url": "https://api.github.com/repos/espnet/espnet/issues/2722/comments", "events_url": "https://api.github.com/repos/espnet/espnet/issues/2722/events", "html_url": "https://github.com/espnet/espnet/issues/2722", "id": 751940890, "node_id": "MDU6SXNzdWU3NTE5NDA4OTA=", "number": 2722, "title": "espnet/transform/perturb.py NoiseInjection BUG!!!", "user": {"login": "BYRTIMO", "id": 31283481, "node_id": "MDQ6VXNlcjMxMjgzNDgx", "avatar_url": "https://avatars.githubusercontent.com/u/31283481?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BYRTIMO", "html_url": "https://github.com/BYRTIMO", "followers_url": "https://api.github.com/users/BYRTIMO/followers", "following_url": "https://api.github.com/users/BYRTIMO/following{/other_user}", "gists_url": "https://api.github.com/users/BYRTIMO/gists{/gist_id}", "starred_url": "https://api.github.com/users/BYRTIMO/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BYRTIMO/subscriptions", "organizations_url": "https://api.github.com/users/BYRTIMO/orgs", "repos_url": "https://api.github.com/users/BYRTIMO/repos", "events_url": "https://api.github.com/users/BYRTIMO/events{/privacy}", "received_events_url": "https://api.github.com/users/BYRTIMO/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 777173273, "node_id": "MDU6TGFiZWw3NzcxNzMyNzM=", "url": "https://api.github.com/repos/espnet/espnet/labels/Bug", "name": "Bug", "color": "ee0701", "default": false, "description": "bug should be fixed"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-11-27T02:38:48Z", "updated_at": "2020-11-27T04:31:59Z", "closed_at": "2020-11-27T04:31:59Z", "author_association": "NONE", "active_lock_reason": null, "body": "**Describe the bug**\r\nline 273 compute scale\r\nShould write like that \"scale = numpy.sqrt((x ** 2).mean()) / ratio\"", "reactions": {"url": "https://api.github.com/repos/espnet/espnet/issues/2722/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/espnet/espnet/issues/2722/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/espnet/espnet/issues/2704", "repository_url": "https://api.github.com/repos/espnet/espnet", "labels_url": "https://api.github.com/repos/espnet/espnet/issues/2704/labels{/name}", "comments_url": "https://api.github.com/repos/espnet/espnet/issues/2704/comments", "events_url": "https://api.github.com/repos/espnet/espnet/issues/2704/events", "html_url": "https://github.com/espnet/espnet/pull/2704", "id": 747245929, "node_id": "MDExOlB1bGxSZXF1ZXN0NTI0NTAxNjA0", "number": 2704, "title": "Fix token averaged feature the case when r > 1", "user": {"login": "kan-bayashi", "id": 22779813, "node_id": "MDQ6VXNlcjIyNzc5ODEz", "avatar_url": "https://avatars.githubusercontent.com/u/22779813?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kan-bayashi", "html_url": "https://github.com/kan-bayashi", "followers_url": "https://api.github.com/users/kan-bayashi/followers", "following_url": "https://api.github.com/users/kan-bayashi/following{/other_user}", "gists_url": "https://api.github.com/users/kan-bayashi/gists{/gist_id}", "starred_url": "https://api.github.com/users/kan-bayashi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kan-bayashi/subscriptions", "organizations_url": "https://api.github.com/users/kan-bayashi/orgs", "repos_url": "https://api.github.com/users/kan-bayashi/repos", "events_url": "https://api.github.com/users/kan-bayashi/events{/privacy}", "received_events_url": "https://api.github.com/users/kan-bayashi/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 777173273, "node_id": "MDU6TGFiZWw3NzcxNzMyNzM=", "url": "https://api.github.com/repos/espnet/espnet/labels/Bug", "name": "Bug", "color": "ee0701", "default": false, "description": "bug should be fixed"}, {"id": 1680978630, "node_id": "MDU6TGFiZWwxNjgwOTc4NjMw", "url": "https://api.github.com/repos/espnet/espnet/labels/TTS", "name": "TTS", "color": "fbca04", "default": false, "description": "Text-to-speech"}, {"id": 1889036170, "node_id": "MDU6TGFiZWwxODg5MDM2MTcw", "url": "https://api.github.com/repos/espnet/espnet/labels/ESPnet2", "name": "ESPnet2", "color": "f2db68", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/espnet/espnet/milestones/25", "html_url": "https://github.com/espnet/espnet/milestone/25", "labels_url": "https://api.github.com/repos/espnet/espnet/milestones/25/labels", "id": 6054027, "node_id": "MDk6TWlsZXN0b25lNjA1NDAyNw==", "number": 25, "title": "v.0.9.6", "description": "", "creator": {"login": "kan-bayashi", "id": 22779813, "node_id": "MDQ6VXNlcjIyNzc5ODEz", "avatar_url": "https://avatars.githubusercontent.com/u/22779813?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kan-bayashi", "html_url": "https://github.com/kan-bayashi", "followers_url": "https://api.github.com/users/kan-bayashi/followers", "following_url": "https://api.github.com/users/kan-bayashi/following{/other_user}", "gists_url": "https://api.github.com/users/kan-bayashi/gists{/gist_id}", "starred_url": "https://api.github.com/users/kan-bayashi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kan-bayashi/subscriptions", "organizations_url": "https://api.github.com/users/kan-bayashi/orgs", "repos_url": "https://api.github.com/users/kan-bayashi/repos", "events_url": "https://api.github.com/users/kan-bayashi/events{/privacy}", "received_events_url": "https://api.github.com/users/kan-bayashi/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 43, "state": "closed", "created_at": "2020-10-31T11:07:26Z", "updated_at": "2020-12-01T12:21:48Z", "due_on": "2020-11-30T08:00:00Z", "closed_at": "2020-12-01T12:21:48Z"}, "comments": 1, "created_at": "2020-11-20T07:27:25Z", "updated_at": "2020-11-30T05:13:38Z", "closed_at": "2020-11-20T12:27:15Z", "author_association": "MEMBER", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/espnet/espnet/pulls/2704", "html_url": "https://github.com/espnet/espnet/pull/2704", "diff_url": "https://github.com/espnet/espnet/pull/2704.diff", "patch_url": "https://github.com/espnet/espnet/pull/2704.patch", "merged_at": "2020-11-20T12:27:15Z"}, "body": "fix #2664", "reactions": {"url": "https://api.github.com/repos/espnet/espnet/issues/2704/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/espnet/espnet/issues/2704/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/espnet/espnet/issues/2701", "repository_url": "https://api.github.com/repos/espnet/espnet", "labels_url": "https://api.github.com/repos/espnet/espnet/issues/2701/labels{/name}", "comments_url": "https://api.github.com/repos/espnet/espnet/issues/2701/comments", "events_url": "https://api.github.com/repos/espnet/espnet/issues/2701/events", "html_url": "https://github.com/espnet/espnet/issues/2701", "id": 746794677, "node_id": "MDU6SXNzdWU3NDY3OTQ2Nzc=", "number": 2701, "title": "ESPnet2 TTS VCTK recipe stage 5 argument error", "user": {"login": "unilight", "id": 11516009, "node_id": "MDQ6VXNlcjExNTE2MDA5", "avatar_url": "https://avatars.githubusercontent.com/u/11516009?v=4", "gravatar_id": "", "url": "https://api.github.com/users/unilight", "html_url": "https://github.com/unilight", "followers_url": "https://api.github.com/users/unilight/followers", "following_url": "https://api.github.com/users/unilight/following{/other_user}", "gists_url": "https://api.github.com/users/unilight/gists{/gist_id}", "starred_url": "https://api.github.com/users/unilight/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/unilight/subscriptions", "organizations_url": "https://api.github.com/users/unilight/orgs", "repos_url": "https://api.github.com/users/unilight/repos", "events_url": "https://api.github.com/users/unilight/events{/privacy}", "received_events_url": "https://api.github.com/users/unilight/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 777173273, "node_id": "MDU6TGFiZWw3NzcxNzMyNzM=", "url": "https://api.github.com/repos/espnet/espnet/labels/Bug", "name": "Bug", "color": "ee0701", "default": false, "description": "bug should be fixed"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2020-11-19T17:44:09Z", "updated_at": "2020-11-20T09:44:20Z", "closed_at": "2020-11-20T09:44:20Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "**Describe the bug**\r\nSeems like https://github.com/espnet/espnet/blob/master/espnet2/tasks/tts.py#L199 is not correctly adding these https://github.com/espnet/espnet/blob/master/espnet2/tasks/tts.py#L39-L90 arguments.\r\n\r\n**Task information:**\r\n - Task: TTS\r\n - Recipe: VCTK\r\n - ESPnet2\r\n\r\n**To Reproduce**\r\nSteps to reproduce the behavior:\r\n1. `cd egs2/vctk/tts1`\r\n2. `run.sh`\r\n3. See `exp/tts_stats_raw_phn_tacotron_g2p_en_no_space/logdir/stats.*.log`\r\n\r\n**Error logs**\r\n![image](https://user-images.githubusercontent.com/11516009/99703227-cebdaa80-2ad1-11eb-9941-4b0e9320ca4d.png)\r\n![image](https://user-images.githubusercontent.com/11516009/99702987-843c2e00-2ad1-11eb-83c4-13b324af4396.png)\r\n...(middle part omitted)\r\n![image](https://user-images.githubusercontent.com/11516009/99703009-8a320f00-2ad1-11eb-8c07-5992fe8402c2.png)\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/espnet/espnet/issues/2701/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/espnet/espnet/issues/2701/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/espnet/espnet/issues/2675", "repository_url": "https://api.github.com/repos/espnet/espnet", "labels_url": "https://api.github.com/repos/espnet/espnet/issues/2675/labels{/name}", "comments_url": "https://api.github.com/repos/espnet/espnet/issues/2675/comments", "events_url": "https://api.github.com/repos/espnet/espnet/issues/2675/events", "html_url": "https://github.com/espnet/espnet/issues/2675", "id": 741357430, "node_id": "MDU6SXNzdWU3NDEzNTc0MzA=", "number": 2675, "title": "Language Model Training fails", "user": {"login": "r4nc0r", "id": 15196129, "node_id": "MDQ6VXNlcjE1MTk2MTI5", "avatar_url": "https://avatars.githubusercontent.com/u/15196129?v=4", "gravatar_id": "", "url": "https://api.github.com/users/r4nc0r", "html_url": "https://github.com/r4nc0r", "followers_url": "https://api.github.com/users/r4nc0r/followers", "following_url": "https://api.github.com/users/r4nc0r/following{/other_user}", "gists_url": "https://api.github.com/users/r4nc0r/gists{/gist_id}", "starred_url": "https://api.github.com/users/r4nc0r/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/r4nc0r/subscriptions", "organizations_url": "https://api.github.com/users/r4nc0r/orgs", "repos_url": "https://api.github.com/users/r4nc0r/repos", "events_url": "https://api.github.com/users/r4nc0r/events{/privacy}", "received_events_url": "https://api.github.com/users/r4nc0r/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 777173273, "node_id": "MDU6TGFiZWw3NzcxNzMyNzM=", "url": "https://api.github.com/repos/espnet/espnet/labels/Bug", "name": "Bug", "color": "ee0701", "default": false, "description": "bug should be fixed"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-11-12T07:35:53Z", "updated_at": "2020-11-12T07:37:18Z", "closed_at": "2020-11-12T07:37:01Z", "author_association": "NONE", "active_lock_reason": null, "body": "**Describe the bug**\r\nI'm running espnet2/commonvoice (german) and the training of the language Model fails with a RuntimeError. In the log file its says: \r\n```\r\nThe training was finished at 20 epochs \r\nfree(): invalid pointer\r\n```\r\n\r\n**Basic environments:**\r\n - OS information: Ubuntu 18.04\r\n - python version: 3.8.3 GCC 7.3.0\r\n - espnet version: 0.9.5\r\n - Git hash 53d170030417f4d70522653bdf3cdd07fad6d8c8\r\n   - Commit date Sat Nov 7 04:13:45 2020 +0000\r\n - pytorch version 1.7.0\r\n \r\n\r\n**Environments from `torch.utils.collect_env`:**\r\nPyTorch version: 1.7.0\r\nIs debug build: True\r\nCUDA used to build PyTorch: 11.0\r\nROCM used to build PyTorch: N/A\r\n\r\nOS: Ubuntu 18.04.5 LTS (x86_64)\r\nGCC version: (Ubuntu 7.5.0-3ubuntu1~18.04) 7.5.0\r\nClang version: Could not collect\r\nCMake version: version 3.10.2\r\n\r\nPython version: 3.8 (64-bit runtime)\r\nIs CUDA available: True\r\nCUDA runtime version: Could not collect\r\nGPU models and configuration: GPU 0: GeForce RTX 3090\r\nNvidia driver version: 455.23.05\r\ncuDNN version: /usr/lib/x86_64-linux-gnu/libcudnn.so.7.6.5\r\nHIP runtime version: N/A\r\nMIOpen runtime version: N/A\r\n\r\nVersions of relevant libraries:\r\n[pip3] numpy==1.19.2\r\n[pip3] pytorch-ranger==0.1.1\r\n[pip3] pytorch-wpe==0.0.0\r\n[pip3] torch==1.7.0\r\n[pip3] torch-complex==0.2.0\r\n[pip3] torch-optimizer==0.0.1a16\r\n[pip3] torchaudio==0.7.0\r\n[pip3] warprnnt-pytorch==0.1\r\n[conda] blas                      1.0                         mkl\r\n[conda] cudatoolkit               11.0.221             h6bb024c_0\r\n[conda] mkl                       2020.2                      256\r\n[conda] mkl-service               2.3.0            py38he904b0f_0\r\n[conda] mkl_fft                   1.2.0            py38h23d657b_0\r\n[conda] mkl_random                1.1.1            py38h0573a6f_0\r\n[conda] numpy                     1.19.2           py38h54aff64_0\r\n[conda] numpy-base                1.19.2           py38hfa32c7d_0\r\n[conda] pytorch                   1.7.0           py3.8_cuda11.0.221_cudnn8.0.3_0    pytorch\r\n[conda] pytorch-ranger            0.1.1                    pypi_0    pypi\r\n[conda] pytorch-wpe               0.0.0                    pypi_0    pypi\r\n[conda] torch-complex             0.2.0                    pypi_0    pypi\r\n[conda] torch-optimizer           0.0.1a16                 pypi_0    pypi\r\n[conda] torchaudio                0.7.0                    pypi_0    pypi\r\n[conda] warprnnt-pytorch          0.1                       dev_0    <develop>\r\n\r\n**Task information:**\r\n - Task: asr1\r\n - Recipe: commonvoice\r\n - ESPnet2\r\n\r\n**To Reproduce**\r\nTo Build espnet with cuda11 I had to make some tweaks:\r\n1. changed install_chainer_ctc.sh git repo to: https://github.com/r4nc0r/chainer_ctc.git (it is a current fork of the offical chainer_ctc repo with only one change: it uses https://github.com/r4nc0r/warp-ctc instead of the original)\r\nMy own Warp-Ctc fork removes the following line\r\n`set(CUDA_NVCC_FLAGS \"${CUDA_NVCC_FLAGS} -gencode arch=compute_30,code=sm_30 -O2\")`\r\nbecause compute_30 is not supported with cuda-11 and I need Cuda 11 because I Use a rtx 3090\r\n2.  changed install_warp-transducer.sh to use `https://github.com/r4nc0r/warp-transducer.git`  (it is a current fork of the offical chainer_ctc repo with only one change: \r\nremoved `set(CUDA_NVCC_FLAGS \"${CUDA_NVCC_FLAGS} -gencode arch=compute_30,code=sm_30 -O2\")` from CMAKELIST\r\n3. Not Installation of Cuda 11 and Pytorch 1.7 is a success\r\n4. move to a recipe directory, e.g., `cd egs2/commonvoice/asr1`\r\n5. change local/data.sh to use `lang=de`\r\n6. change run.sh to use `lang=de` and `nbpe=250` (last b.c. if you use the normal 150 the language model fails with too small vocabulary)\r\n7. execute `run.sh` \r\n3. specify the error log, e.g., `exp/lm_train_lm_bpe250/train.log`\r\n\r\n**Error logs**\r\n# python3 -m espnet2.bin.lm_train --ngpu 1 --use_preprocessor true --bpemodel data/token_list/bpe_unigram250/bpe.model --token_type bpe --token_list data/token_list/bpe_unigram250/tokens.txt --non_linguistic_symbols none --cleaner none --g2p none --valid_data_path_and_name_and_type dump/raw/dev_de/text,text,text --valid_shape_file exp/lm_stats_bpe250/valid/text_shape.bpe --fold_length 150 --resume true --output_dir exp/lm_train_lm_bpe250 --config conf/train_lm.yaml --train_data_path_and_name_and_type dump/raw/srctexts,text,text --train_shape_file exp/lm_stats_bpe250/train/text_shape.bpe --ngpu 1 --multiprocessing_distributed True \r\n# Started at Wed Nov 11 16:28:27 CET 2020\r\n#\r\n/home/administrator/tmp/espnet/tools/venv/bin/python3 /home/administrator/tmp/espnet/espnet2/bin/lm_train.py --ngpu 1 --use_preprocessor true --bpemodel data/token_list/bpe_unigram250/bpe.model --token_type bpe --token_list data/token_list/bpe_unigram250/tokens.txt --non_linguistic_symbols none --cleaner none --g2p none --valid_data_path_and_name_and_type dump/raw/dev_de/text,text,text --valid_shape_file exp/lm_stats_bpe250/valid/text_shape.bpe --fold_length 150 --resume true --output_dir exp/lm_train_lm_bpe250 --config conf/train_lm.yaml --train_data_path_and_name_and_type dump/raw/srctexts,text,text --train_shape_file exp/lm_stats_bpe250/train/text_shape.bpe --ngpu 1 --multiprocessing_distributed True\r\n[PC] 2020-11-11 16:28:28,370 (lm:198) INFO: Vocabulary size: 250\r\n[PC] 2020-11-11 16:28:30,730 (abs_task:1068) INFO: pytorch.version=1.7.0, cuda.available=True, cudnn.version=8003, cudnn.benchmark=False, cudnn.deterministic=True\r\n[PC] 2020-11-11 16:28:30,730 (abs_task:1069) INFO: Model structure:\r\nESPnetLanguageModel(\r\n  (lm): SequentialRNNLM(\r\n    (drop): Dropout(p=0.0, inplace=False)\r\n    (encoder): Embedding(250, 650, padding_idx=0)\r\n    (rnn): LSTM(650, 650, num_layers=2, batch_first=True)\r\n    (decoder): Linear(in_features=650, out_features=250, bias=True)\r\n  )\r\n)\r\n\r\nModel summary:\r\n    Class Name: ESPnetLanguageModel\r\n    Number of parameters: 7.10 M\r\n    Size: 28.38 MB\r\n    Type: torch.float32\r\n[PC] 2020-11-11 16:28:30,730 (abs_task:1072) INFO: Optimizer:\r\nSGD (\r\nParameter Group 0\r\n    dampening: 0.0\r\n    lr: 0.1\r\n    momentum: 0.0\r\n    nesterov: False\r\n    weight_decay: 0.0\r\n)\r\n[PC] 2020-11-11 16:28:30,730 (abs_task:1073) INFO: Scheduler: None\r\n[PC] 2020-11-11 16:28:30,730 (abs_task:1082) INFO: Saving the configuration in exp/lm_train_lm_bpe250/config.yaml\r\n[PC] 2020-11-11 16:28:32,398 (abs_task:1429) INFO: [train] dataset:\r\nESPnetDataset(\r\n  text: {\"path\": \"dump/raw/srctexts\", \"type\": \"text\"}\r\n  preprocess: <espnet2.train.preprocessor.CommonPreprocessor object at 0x7f497e1f3d30>)\r\n[PC] 2020-11-11 16:28:32,398 (abs_task:1430) INFO: [train] Batch sampler: FoldedBatchSampler(N-batch=7507, batch_size=64, shape_files=['exp/lm_stats_bpe250/train/text_shape.bpe'], sort_in_batch=descending, sort_batch=descending)\r\n[PC] 2020-11-11 16:28:32,406 (abs_task:1431) INFO: [train] mini-batch sizes summary: N-batch=7507, mean=64.0, min=18, max=64\r\n[PC] 2020-11-11 16:28:32,464 (abs_task:1429) INFO: [valid] dataset:\r\nESPnetDataset(\r\n  text: {\"path\": \"dump/raw/dev_de/text\", \"type\": \"text\"}\r\n  preprocess: <espnet2.train.preprocessor.CommonPreprocessor object at 0x7f497e20a460>)\r\n[PC] 2020-11-11 16:28:32,464 (abs_task:1430) INFO: [valid] Batch sampler: FoldedBatchSampler(N-batch=240, batch_size=64, shape_files=['exp/lm_stats_bpe250/valid/text_shape.bpe'], sort_in_batch=descending, sort_batch=descending)\r\n[PC] 2020-11-11 16:28:32,464 (abs_task:1431) INFO: [valid] mini-batch sizes summary: N-batch=240, mean=63.9, min=45, max=64\r\n[PC] 2020-11-11 16:28:32,502 (abs_task:1429) INFO: [plot_att] dataset:\r\nESPnetDataset(\r\n  text: {\"path\": \"dump/raw/dev_de/text\", \"type\": \"text\"}\r\n  preprocess: <espnet2.train.preprocessor.CommonPreprocessor object at 0x7f497e20a790>)\r\n[PC] 2020-11-11 16:28:32,502 (abs_task:1430) INFO: [plot_att] Batch sampler: UnsortedBatchSampler(N-batch=15341, batch_size=1, key_file=exp/lm_stats_bpe250/valid/text_shape.bpe, \r\n[PC] 2020-11-11 16:28:32,502 (abs_task:1431) INFO: [plot_att] mini-batch sizes summary: N-batch=3, mean=1.0, min=1, max=1\r\n[PC] 2020-11-11 16:28:32,517 (trainer:196) INFO: 1/20epoch started\r\n[PC] 2020-11-11 16:28:37,874 (trainer:486) INFO: 1epoch:train:1-375batch: iter_time=0.001, forward_time=0.005, loss=4.329, backward_time=0.005, optim_step_time=2.057e-04, lr_0=0.100, train_time=0.014\r\n[PC] 2020-11-11 16:28:42,994 (trainer:486) INFO: 1epoch:train:376-750batch: iter_time=0.001, forward_time=0.005, loss=3.798, backward_time=0.005, optim_step_time=2.011e-04, lr_0=0.100, train_time=0.013\r\n[PC] 2020-11-11 16:28:47,991 (trainer:486) INFO: 1epoch:train:751-1125batch: iter_time=8.250e-04, forward_time=0.005, loss=3.571, backward_time=0.005, optim_step_time=2.023e-04, lr_0=0.100, train_time=0.013\r\n[PC] 2020-11-11 16:28:53,080 (trainer:486) INFO: 1epoch:train:1126-1500batch: iter_time=0.001, forward_time=0.005, loss=3.332, backward_time=0.005, optim_step_time=1.936e-04, lr_0=0.100, train_time=0.013\r\n[PC] 2020-11-11 16:28:58,203 (trainer:486) INFO: 1epoch:train:1501-1875batch: iter_time=0.001, forward_time=0.005, loss=3.145, backward_time=0.005, optim_step_time=1.927e-04, lr_0=0.100, train_time=0.013\r\n[PC] 2020-11-11 16:29:03,271 (trainer:486) INFO: 1epoch:train:1876-2250batch: iter_time=0.001, forward_time=0.005, loss=3.000, backward_time=0.005, optim_step_time=1.898e-04, lr_0=0.100, train_time=0.013\r\n[PC] 2020-11-11 16:29:08,373 (trainer:486) INFO: 1epoch:train:2251-2625batch: iter_time=0.001, forward_time=0.005, loss=2.907, backward_time=0.005, optim_step_time=2.033e-04, lr_0=0.100, train_time=0.013\r\n[PC] 2020-11-11 16:29:13,588 (trainer:486) INFO: 1epoch:train:2626-3000batch: iter_time=0.001, forward_time=0.005, loss=2.827, backward_time=0.005, optim_step_time=1.947e-04, lr_0=0.100, train_time=0.014\r\n[PC] 2020-11-11 16:29:18,694 (trainer:486) INFO: 1epoch:train:3001-3375batch: iter_time=0.001, forward_time=0.005, loss=2.747, backward_time=0.005, optim_step_time=1.981e-04, lr_0=0.100, train_time=0.013\r\n[PC] 2020-11-11 16:29:23,807 (trainer:486) INFO: 1epoch:train:3376-3750batch: iter_time=0.001, forward_time=0.005, loss=2.688, backward_time=0.005, optim_step_time=2.098e-04, lr_0=0.100, train_time=0.013\r\n[PC] 2020-11-11 16:29:28,996 (trainer:486) INFO: 1epoch:train:3751-4125batch: iter_time=9.655e-04, forward_time=0.005, loss=2.644, backward_time=0.005, optim_step_time=1.959e-04, lr_0=0.100, train_time=0.014\r\n[PC] 2020-11-11 16:29:34,058 (trainer:486) INFO: 1epoch:train:4126-4500batch: iter_time=0.001, forward_time=0.005, loss=2.589, backward_time=0.005, optim_step_time=1.940e-04, lr_0=0.100, train_time=0.013\r\n[PC] 2020-11-11 16:29:39,002 (trainer:486) INFO: 1epoch:train:4501-4875batch: iter_time=0.001, forward_time=0.005, loss=2.540, backward_time=0.005, optim_step_time=1.959e-04, lr_0=0.100, train_time=0.013\r\n[PC] 2020-11-11 16:29:44,196 (trainer:486) INFO: 1epoch:train:4876-5250batch: iter_time=9.868e-04, forward_time=0.005, loss=2.515, backward_time=0.005, optim_step_time=1.943e-04, lr_0=0.100, train_time=0.014\r\n[PC] 2020-11-11 16:29:49,368 (trainer:486) INFO: 1epoch:train:5251-5625batch: iter_time=0.001, forward_time=0.005, loss=2.479, backward_time=0.005, optim_step_time=1.942e-04, lr_0=0.100, train_time=0.014\r\n[PC] 2020-11-11 16:29:54,469 (trainer:486) INFO: 1epoch:train:5626-6000batch: iter_time=0.001, forward_time=0.005, loss=2.450, backward_time=0.005, optim_step_time=1.971e-04, lr_0=0.100, train_time=0.013\r\n[PC] 2020-11-11 16:29:59,503 (trainer:486) INFO: 1epoch:train:6001-6375batch: iter_time=9.186e-04, forward_time=0.005, loss=2.409, backward_time=0.005, optim_step_time=2.001e-04, lr_0=0.100, train_time=0.013\r\n[PC] 2020-11-11 16:30:04,578 (trainer:486) INFO: 1epoch:train:6376-6750batch: iter_time=0.001, forward_time=0.005, loss=2.386, backward_time=0.005, optim_step_time=1.949e-04, lr_0=0.100, train_time=0.013\r\n[PC] 2020-11-11 16:30:09,675 (trainer:486) INFO: 1epoch:train:6751-7125batch: iter_time=0.001, forward_time=0.005, loss=2.367, backward_time=0.005, optim_step_time=1.953e-04, lr_0=0.100, train_time=0.013\r\n[PC] 2020-11-11 16:30:14,840 (trainer:486) INFO: 1epoch:train:7126-7500batch: iter_time=0.001, forward_time=0.005, loss=2.339, backward_time=0.005, optim_step_time=1.963e-04, lr_0=0.100, train_time=0.014\r\n[PC] 2020-11-11 16:30:18,406 (trainer:243) INFO: 1epoch results: [train] iter_time=0.001, forward_time=0.005, loss=2.853, backward_time=0.005, optim_step_time=1.974e-04, lr_0=0.100, train_time=0.013, time=1 minute and 42.6 seconds, total_count=7507, [valid] loss=2.387, time=3 seconds, total_count=240, [att_plot] time=0.28 seconds, total_count=0\r\n[PC] 2020-11-11 16:30:18,969 (trainer:286) INFO: The best model has been updated: valid.loss\r\n[PC] 2020-11-11 16:30:18,969 (trainer:184) INFO: 2/20epoch started. Estimated time to finish: 33 minutes and 42.59 seconds\r\n[PC] 2020-11-11 16:30:24,312 (trainer:486) INFO: 2epoch:train:1-375batch: iter_time=0.001, forward_time=0.005, loss=2.313, backward_time=0.005, optim_step_time=2.000e-04, lr_0=0.100, train_time=0.014\r\n[PC] 2020-11-11 16:30:29,508 (trainer:486) INFO: 2epoch:train:376-750batch: iter_time=0.001, forward_time=0.005, loss=2.298, backward_time=0.005, optim_step_time=1.888e-04, lr_0=0.100, train_time=0.014\r\n[PC] 2020-11-11 16:30:34,611 (trainer:486) INFO: 2epoch:train:751-1125batch: iter_time=0.001, forward_time=0.005, loss=2.266, backward_time=0.005, optim_step_time=1.894e-04, lr_0=0.100, train_time=0.013\r\n[PC] 2020-11-11 16:30:39,749 (trainer:486) INFO: 2epoch:train:1126-1500batch: iter_time=0.001, forward_time=0.005, loss=2.256, backward_time=0.005, optim_step_time=1.953e-04, lr_0=0.100, train_time=0.013\r\n[PC] 2020-11-11 16:30:44,890 (trainer:486) INFO: 2epoch:train:1501-1875batch: iter_time=0.001, forward_time=0.005, loss=2.230, backward_time=0.005, optim_step_time=1.993e-04, lr_0=0.100, train_time=0.013\r\n[PC] 2020-11-11 16:30:50,039 (trainer:486) INFO: 2epoch:train:1876-2250batch: iter_time=0.001, forward_time=0.005, loss=2.208, backward_time=0.005, optim_step_time=1.946e-04, lr_0=0.100, train_time=0.013\r\n[PC] 2020-11-11 16:30:55,251 (trainer:486) INFO: 2epoch:train:2251-2625batch: iter_time=0.001, forward_time=0.005, loss=2.200, backward_time=0.005, optim_step_time=1.995e-04, lr_0=0.100, train_time=0.014\r\n[PC] 2020-11-11 16:31:00,390 (trainer:486) INFO: 2epoch:train:2626-3000batch: iter_time=0.001, forward_time=0.005, loss=2.177, backward_time=0.005, optim_step_time=2.005e-04, lr_0=0.100, train_time=0.013\r\n[PC] 2020-11-11 16:31:05,621 (trainer:486) INFO: 2epoch:train:3001-3375batch: iter_time=0.001, forward_time=0.005, loss=2.165, backward_time=0.005, optim_step_time=1.908e-04, lr_0=0.100, train_time=0.014\r\n[PC] 2020-11-11 16:31:10,810 (trainer:486) INFO: 2epoch:train:3376-3750batch: iter_time=0.001, forward_time=0.005, loss=2.149, backward_time=0.005, optim_step_time=1.991e-04, lr_0=0.100, train_time=0.014\r\n[PC] 2020-11-11 16:31:16,043 (trainer:486) INFO: 2epoch:train:3751-4125batch: iter_time=0.001, forward_time=0.005, loss=2.130, backward_time=0.005, optim_step_time=1.931e-04, lr_0=0.100, train_time=0.014\r\n[PC] 2020-11-11 16:31:21,218 (trainer:486) INFO: 2epoch:train:4126-4500batch: iter_time=0.001, forward_time=0.005, loss=2.127, backward_time=0.005, optim_step_time=2.047e-04, lr_0=0.100, train_time=0.014\r\n[PC] 2020-11-11 16:31:26,322 (trainer:486) INFO: 2epoch:train:4501-4875batch: iter_time=0.001, forward_time=0.005, loss=2.103, backward_time=0.005, optim_step_time=1.915e-04, lr_0=0.100, train_time=0.013\r\n[PC] 2020-11-11 16:31:31,426 (trainer:486) INFO: 2epoch:train:4876-5250batch: iter_time=0.001, forward_time=0.005, loss=2.088, backward_time=0.005, optim_step_time=1.991e-04, lr_0=0.100, train_time=0.013\r\n[PC] 2020-11-11 16:31:36,547 (trainer:486) INFO: 2epoch:train:5251-5625batch: iter_time=0.001, forward_time=0.005, loss=2.085, backward_time=0.005, optim_step_time=1.942e-04, lr_0=0.100, train_time=0.013\r\n[PC] 2020-11-11 16:31:41,750 (trainer:486) INFO: 2epoch:train:5626-6000batch: iter_time=0.001, forward_time=0.005, loss=2.069, backward_time=0.005, optim_step_time=2.007e-04, lr_0=0.100, train_time=0.014\r\n[PC] 2020-11-11 16:31:46,794 (trainer:486) INFO: 2epoch:train:6001-6375batch: iter_time=9.019e-04, forward_time=0.005, loss=2.049, backward_time=0.005, optim_step_time=2.010e-04, lr_0=0.100, train_time=0.013\r\n[PC] 2020-11-11 16:31:51,923 (trainer:486) INFO: 2epoch:train:6376-6750batch: iter_time=0.001, forward_time=0.005, loss=2.047, backward_time=0.005, optim_step_time=2.063e-04, lr_0=0.100, train_time=0.013\r\n[PC] 2020-11-11 16:31:57,133 (trainer:486) INFO: 2epoch:train:6751-7125batch: iter_time=0.001, forward_time=0.005, loss=2.039, backward_time=0.005, optim_step_time=2.071e-04, lr_0=0.100, train_time=0.014\r\n[PC] 2020-11-11 16:32:02,228 (trainer:486) INFO: 2epoch:train:7126-7500batch: iter_time=0.001, forward_time=0.005, loss=2.023, backward_time=0.005, optim_step_time=2.048e-04, lr_0=0.100, train_time=0.013\r\n[PC] 2020-11-11 16:32:05,705 (trainer:243) INFO: 2epoch results: [train] iter_time=0.001, forward_time=0.005, loss=2.152, backward_time=0.005, optim_step_time=1.980e-04, lr_0=0.100, train_time=0.014, time=1 minute and 43.52 seconds, total_count=15014, [valid] loss=2.236, time=3.08 seconds, total_count=480, [att_plot] time=0.13 seconds, total_count=0\r\n[PC] 2020-11-11 16:32:06,212 (trainer:286) INFO: The best model has been updated: valid.loss\r\n[PC] 2020-11-11 16:32:06,214 (trainer:306) INFO: The model files were removed: exp/lm_train_lm_bpe250/1epoch.pth\r\n[PC] 2020-11-11 16:32:06,214 (trainer:184) INFO: 3/20epoch started. Estimated time to finish: 32 minutes and 3.27 seconds\r\n[PC] 2020-11-11 16:32:11,440 (trainer:486) INFO: 3epoch:train:1-375batch: iter_time=0.001, forward_time=0.005, loss=2.013, backward_time=0.005, optim_step_time=2.019e-04, lr_0=0.100, train_time=0.014\r\n[PC] 2020-11-11 16:32:16,571 (trainer:486) INFO: 3epoch:train:376-750batch: iter_time=0.001, forward_time=0.005, loss=2.010, backward_time=0.005, optim_step_time=1.973e-04, lr_0=0.100, train_time=0.013\r\n[PC] 2020-11-11 16:32:21,791 (trainer:486) INFO: 3epoch:train:751-1125batch: iter_time=0.001, forward_time=0.005, loss=1.986, backward_time=0.005, optim_step_time=1.952e-04, lr_0=0.100, train_time=0.014\r\n[PC] 2020-11-11 16:32:27,037 (trainer:486) INFO: 3epoch:train:1126-1500batch: iter_time=0.001, forward_time=0.005, loss=1.987, backward_time=0.005, optim_step_time=2.020e-04, lr_0=0.100, train_time=0.014\r\n[PC] 2020-11-11 16:32:32,117 (trainer:486) INFO: 3epoch:train:1501-1875batch: iter_time=9.639e-04, forward_time=0.005, loss=1.977, backward_time=0.005, optim_step_time=2.007e-04, lr_0=0.100, train_time=0.013\r\n[PC] 2020-11-11 16:32:37,212 (trainer:486) INFO: 3epoch:train:1876-2250batch: iter_time=9.614e-04, forward_time=0.005, loss=1.975, backward_time=0.005, optim_step_time=2.021e-04, lr_0=0.100, train_time=0.013\r\n[PC] 2020-11-11 16:32:42,406 (trainer:486) INFO: 3epoch:train:2251-2625batch: iter_time=0.001, forward_time=0.005, loss=1.965, backward_time=0.005, optim_step_time=1.980e-04, lr_0=0.100, train_time=0.014\r\n[PC] 2020-11-11 16:32:47,516 (trainer:486) INFO: 3epoch:train:2626-3000batch: iter_time=0.001, forward_time=0.005, loss=1.945, backward_time=0.005, optim_step_time=2.011e-04, lr_0=0.100, train_time=0.013\r\n[PC] 2020-11-11 16:32:52,783 (trainer:486) INFO: 3epoch:train:3001-3375batch: iter_time=0.001, forward_time=0.005, loss=1.958, backward_time=0.005, optim_step_time=1.951e-04, lr_0=0.100, train_time=0.014\r\n[PC] 2020-11-11 16:32:57,853 (trainer:486) INFO: 3epoch:train:3376-3750batch: iter_time=0.001, forward_time=0.005, loss=1.941, backward_time=0.005, optim_step_time=1.976e-04, lr_0=0.100, train_time=0.013\r\n[PC] 2020-11-11 16:33:02,967 (trainer:486) INFO: 3epoch:train:3751-4125batch: iter_time=0.001, forward_time=0.005, loss=1.936, backward_time=0.005, optim_step_time=1.946e-04, lr_0=0.100, train_time=0.013\r\n[PC] 2020-11-11 16:33:08,107 (trainer:486) INFO: 3epoch:train:4126-4500batch: iter_time=0.001, forward_time=0.005, loss=1.922, backward_time=0.005, optim_step_time=1.943e-04, lr_0=0.100, train_time=0.013\r\n[PC] 2020-11-11 16:33:13,259 (trainer:486) INFO: 3epoch:train:4501-4875batch: iter_time=0.001, forward_time=0.005, loss=1.913, backward_time=0.005, optim_step_time=2.032e-04, lr_0=0.100, train_time=0.013\r\n[PC] 2020-11-11 16:33:18,459 (trainer:486) INFO: 3epoch:train:4876-5250batch: iter_time=0.001, forward_time=0.005, loss=1.920, backward_time=0.005, optim_step_time=1.971e-04, lr_0=0.100, train_time=0.014\r\n[PC] 2020-11-11 16:33:23,684 (trainer:486) INFO: 3epoch:train:5251-5625batch: iter_time=0.001, forward_time=0.005, loss=1.920, backward_time=0.005, optim_step_time=1.958e-04, lr_0=0.100, train_time=0.014\r\n[PC] 2020-11-11 16:33:28,937 (trainer:486) INFO: 3epoch:train:5626-6000batch: iter_time=0.001, forward_time=0.005, loss=1.903, backward_time=0.005, optim_step_time=2.012e-04, lr_0=0.100, train_time=0.014\r\n[PC] 2020-11-11 16:33:34,141 (trainer:486) INFO: 3epoch:train:6001-6375batch: iter_time=0.001, forward_time=0.005, loss=1.891, backward_time=0.005, optim_step_time=1.928e-04, lr_0=0.100, train_time=0.014\r\n[PC] 2020-11-11 16:33:39,373 (trainer:486) INFO: 3epoch:train:6376-6750batch: iter_time=0.001, forward_time=0.005, loss=1.897, backward_time=0.005, optim_step_time=1.999e-04, lr_0=0.100, train_time=0.014\r\n[PC] 2020-11-11 16:33:44,521 (trainer:486) INFO: 3epoch:train:6751-7125batch: iter_time=0.001, forward_time=0.005, loss=1.879, backward_time=0.005, optim_step_time=1.946e-04, lr_0=0.100, train_time=0.013\r\n[PC] 2020-11-11 16:33:49,604 (trainer:486) INFO: 3epoch:train:7126-7500batch: iter_time=0.001, forward_time=0.005, loss=1.879, backward_time=0.005, optim_step_time=1.976e-04, lr_0=0.100, train_time=0.013\r\n[PC] 2020-11-11 16:33:53,133 (trainer:243) INFO: 3epoch results: [train] iter_time=0.001, forward_time=0.005, loss=1.941, backward_time=0.005, optim_step_time=1.981e-04, lr_0=0.100, train_time=0.014, time=1 minute and 43.65 seconds, total_count=22521, [valid] loss=2.005, time=3.14 seconds, total_count=720, [att_plot] time=0.13 seconds, total_count=0\r\n[PC] 2020-11-11 16:33:53,628 (trainer:286) INFO: The best model has been updated: valid.loss\r\n[PC] 2020-11-11 16:33:53,630 (trainer:306) INFO: The model files were removed: exp/lm_train_lm_bpe250/2epoch.pth\r\n[PC] 2020-11-11 16:33:53,630 (trainer:184) INFO: 4/20epoch started. Estimated time to finish: 30 minutes and 19.64 seconds\r\n[PC] 2020-11-11 16:33:58,907 (trainer:486) INFO: 4epoch:train:1-375batch: iter_time=0.001, forward_time=0.005, loss=1.876, backward_time=0.005, optim_step_time=1.991e-04, lr_0=0.100, train_time=0.014\r\n[PC] 2020-11-11 16:34:04,068 (trainer:486) INFO: 4epoch:train:376-750batch: iter_time=0.001, forward_time=0.005, loss=1.863, backward_time=0.005, optim_step_time=2.028e-04, lr_0=0.100, train_time=0.014\r\n[PC] 2020-11-11 16:34:09,217 (trainer:486) INFO: 4epoch:train:751-1125batch: iter_time=0.001, forward_time=0.005, loss=1.852, backward_time=0.005, optim_step_time=1.978e-04, lr_0=0.100, train_time=0.013\r\n[PC] 2020-11-11 16:34:14,349 (trainer:486) INFO: 4epoch:train:1126-1500batch: iter_time=0.001, forward_time=0.005, loss=1.851, backward_time=0.005, optim_step_time=1.966e-04, lr_0=0.100, train_time=0.013\r\n[PC] 2020-11-11 16:34:19,546 (trainer:486) INFO: 4epoch:train:1501-1875batch: iter_time=0.001, forward_time=0.005, loss=1.843, backward_time=0.005, optim_step_time=1.960e-04, lr_0=0.100, train_time=0.014\r\n[PC] 2020-11-11 16:34:24,739 (trainer:486) INFO: 4epoch:train:1876-2250batch: iter_time=0.001, forward_time=0.005, loss=1.845, backward_time=0.005, optim_step_time=2.002e-04, lr_0=0.100, train_time=0.014\r\n[PC] 2020-11-11 16:34:29,926 (trainer:486) INFO: 4epoch:train:2251-2625batch: iter_time=0.001, forward_time=0.005, loss=1.836, backward_time=0.005, optim_step_time=2.044e-04, lr_0=0.100, train_time=0.014\r\n[PC] 2020-11-11 16:34:35,094 (trainer:486) INFO: 4epoch:train:2626-3000batch: iter_time=0.001, forward_time=0.005, loss=1.828, backward_time=0.005, optim_step_time=1.993e-04, lr_0=0.100, train_time=0.014\r\n[PC] 2020-11-11 16:34:40,207 (trainer:486) INFO: 4epoch:train:3001-3375batch: iter_time=0.001, forward_time=0.005, loss=1.816, backward_time=0.005, optim_step_time=1.996e-04, lr_0=0.100, train_time=0.013\r\n[PC] 2020-11-11 16:34:45,402 (trainer:486) INFO: 4epoch:train:3376-3750batch: iter_time=0.001, forward_time=0.005, loss=1.819, backward_time=0.005, optim_step_time=1.923e-04, lr_0=0.100, train_time=0.014\r\n[PC] 2020-11-11 16:34:50,511 (trainer:486) INFO: 4epoch:train:3751-4125batch: iter_time=0.001, forward_time=0.005, loss=1.820, backward_time=0.005, optim_step_time=1.958e-04, lr_0=0.100, train_time=0.013\r\n[PC] 2020-11-11 16:34:55,870 (trainer:486) INFO: 4epoch:train:4126-4500batch: iter_time=0.001, forward_time=0.005, loss=1.810, backward_time=0.005, optim_step_time=1.964e-04, lr_0=0.100, train_time=0.014\r\n[PC] 2020-11-11 16:35:01,143 (trainer:486) INFO: 4epoch:train:4501-4875batch: iter_time=0.001, forward_time=0.005, loss=1.820, backward_time=0.005, optim_step_time=1.987e-04, lr_0=0.100, train_time=0.014\r\n[PC] 2020-11-11 16:35:06,342 (trainer:486) INFO: 4epoch:train:4876-5250batch: iter_time=0.001, forward_time=0.005, loss=1.805, backward_time=0.005, optim_step_time=1.971e-04, lr_0=0.100, train_time=0.014\r\n[PC] 2020-11-11 16:35:11,478 (trainer:486) INFO: 4epoch:train:5251-5625batch: iter_time=0.001, forward_time=0.005, loss=1.796, backward_time=0.005, optim_step_time=2.035e-04, lr_0=0.100, train_time=0.013\r\n[PC] 2020-11-11 16:35:16,688 (trainer:486) INFO: 4epoch:train:5626-6000batch: iter_time=0.001, forward_time=0.005, loss=1.788, backward_time=0.005, optim_step_time=2.002e-04, lr_0=0.100, train_time=0.014\r\n[PC] 2020-11-11 16:35:21,865 (trainer:486) INFO: 4epoch:train:6001-6375batch: iter_time=0.001, forward_time=0.005, loss=1.790, backward_time=0.005, optim_step_time=2.001e-04, lr_0=0.100, train_time=0.014\r\n[PC] 2020-11-11 16:35:27,129 (trainer:486) INFO: 4epoch:train:6376-6750batch: iter_time=0.001, forward_time=0.005, loss=1.800, backward_time=0.005, optim_step_time=1.978e-04, lr_0=0.100, train_time=0.014\r\n[PC] 2020-11-11 16:35:32,286 (trainer:486) INFO: 4epoch:train:6751-7125batch: iter_time=9.790e-04, forward_time=0.005, loss=1.789, backward_time=0.005, optim_step_time=1.995e-04, lr_0=0.100, train_time=0.014\r\n[PC] 2020-11-11 16:35:37,427 (trainer:486) INFO: 4epoch:train:7126-7500batch: iter_time=0.001, forward_time=0.005, loss=1.770, backward_time=0.005, optim_step_time=2.011e-04, lr_0=0.100, train_time=0.013\r\n[PC] 2020-11-11 16:35:40,852 (trainer:243) INFO: 4epoch results: [train] iter_time=0.001, forward_time=0.005, loss=1.821, backward_time=0.005, optim_step_time=1.989e-04, lr_0=0.100, train_time=0.014, time=1 minute and 44.07 seconds, total_count=30028, [valid] loss=1.937, time=3.02 seconds, total_count=960, [att_plot] time=0.13 seconds, total_count=0\r\n[PC] 2020-11-11 16:35:41,368 (trainer:286) INFO: The best model has been updated: valid.loss\r\n[PC] 2020-11-11 16:35:41,370 (trainer:306) INFO: The model files were removed: exp/lm_train_lm_bpe250/3epoch.pth\r\n[PC] 2020-11-11 16:35:41,370 (trainer:184) INFO: 5/20epoch started. Estimated time to finish: 28 minutes and 35.41 seconds\r\n[PC] 2020-11-11 16:35:46,686 (trainer:486) INFO: 5epoch:train:1-375batch: iter_time=0.001, forward_time=0.005, loss=1.771, backward_time=0.005, optim_step_time=2.022e-04, lr_0=0.100, train_time=0.014\r\n[PC] 2020-11-11 16:35:51,894 (trainer:486) INFO: 5epoch:train:376-750batch: iter_time=0.001, forward_time=0.005, loss=1.773, backward_time=0.005, optim_step_time=2.088e-04, lr_0=0.100, train_time=0.014\r\n[PC] 2020-11-11 16:35:57,026 (trainer:486) INFO: 5epoch:train:751-1125batch: iter_time=0.001, forward_time=0.005, loss=1.750, backward_time=0.005, optim_step_time=1.950e-04, lr_0=0.100, train_time=0.013\r\n[PC] 2020-11-11 16:36:02,168 (trainer:486) INFO: 5epoch:train:1126-1500batch: iter_time=0.001, forward_time=0.005, loss=1.756, backward_time=0.005, optim_step_time=2.009e-04, lr_0=0.100, train_time=0.013\r\n[PC] 2020-11-11 16:36:07,303 (trainer:486) INFO: 5epoch:train:1501-1875batch: iter_time=0.001, forward_time=0.005, loss=1.738, backward_time=0.005, optim_step_time=1.948e-04, lr_0=0.100, train_time=0.013\r\n[PC] 2020-11-11 16:36:12,526 (trainer:486) INFO: 5epoch:train:1876-2250batch: iter_time=0.001, forward_time=0.005, loss=1.740, backward_time=0.005, optim_step_time=1.957e-04, lr_0=0.100, train_time=0.014\r\n[PC] 2020-11-11 16:36:17,754 (trainer:486) INFO: 5epoch:train:2251-2625batch: iter_time=0.001, forward_time=0.005, loss=1.753, backward_time=0.005, optim_step_time=1.990e-04, lr_0=0.100, train_time=0.014\r\n[PC] 2020-11-11 16:36:22,975 (trainer:486) INFO: 5epoch:train:2626-3000batch: iter_time=0.001, forward_time=0.005, loss=1.742, backward_time=0.005, optim_step_time=1.991e-04, lr_0=0.100, train_time=0.014\r\n[PC] 2020-11-11 16:36:28,220 (trainer:486) INFO: 5epoch:train:3001-3375batch: iter_time=0.001, forward_time=0.005, loss=1.738, backward_time=0.005, optim_step_time=2.015e-04, lr_0=0.100, train_time=0.014\r\n[PC] 2020-11-11 16:36:33,446 (trainer:486) INFO: 5epoch:train:3376-3750batch: iter_time=0.001, forward_time=0.005, loss=1.733, backward_time=0.005, optim_step_time=2.005e-04, lr_0=0.100, train_time=0.014\r\n[PC] 2020-11-11 16:36:38,663 (trainer:486) INFO: 5epoch:train:3751-4125batch: iter_time=0.001, forward_time=0.005, loss=1.739, backward_time=0.005, optim_step_time=1.980e-04, lr_0=0.100, train_time=0.014\r\n[PC] 2020-11-11 16:36:43,831 (trainer:486) INFO: 5epoch:train:4126-4500batch: iter_time=0.001, forward_time=0.005, loss=1.735, backward_time=0.005, optim_step_time=1.960e-04, lr_0=0.100, train_time=0.014\r\n[PC] 2020-11-11 16:36:49,052 (trainer:486) INFO: 5epoch:train:4501-4875batch: iter_time=0.001, forward_time=0.005, loss=1.743, backward_time=0.005, optim_step_time=1.993e-04, lr_0=0.100, train_time=0.014\r\n[PC] 2020-11-11 16:36:54,306 (trainer:486) INFO: 5epoch:train:4876-5250batch: iter_time=0.001, forward_time=0.005, loss=1.734, backward_time=0.005, optim_step_time=1.984e-04, lr_0=0.100, train_time=0.014\r\n[PC] 2020-11-11 16:36:59,487 (trainer:486) INFO: 5epoch:train:5251-5625batch: iter_time=0.001, forward_time=0.005, loss=1.717, backward_time=0.005, optim_step_time=2.064e-04, lr_0=0.100, train_time=0.014\r\n[PC] 2020-11-11 16:37:04,587 (trainer:486) INFO: 5epoch:train:5626-6000batch: iter_time=0.001, forward_time=0.005, loss=1.712, backward_time=0.005, optim_step_time=1.926e-04, lr_0=0.100, train_time=0.013\r\n[PC] 2020-11-11 16:37:09,708 (trainer:486) INFO: 5epoch:train:6001-6375batch: iter_time=9.277e-04, forward_time=0.005, loss=1.720, backward_time=0.005, optim_step_time=1.909e-04, lr_0=0.100, train_time=0.013\r\n[PC] 2020-11-11 16:37:14,763 (trainer:486) INFO: 5epoch:train:6376-6750batch: iter_time=9.023e-04, forward_time=0.005, loss=1.715, backward_time=0.005, optim_step_time=1.954e-04, lr_0=0.100, train_time=0.013\r\n[PC] 2020-11-11 16:37:19,963 (trainer:486) INFO: 5epoch:train:6751-7125batch: iter_time=0.001, forward_time=0.005, loss=1.714, backward_time=0.005, optim_step_time=2.037e-04, lr_0=0.100, train_time=0.014\r\n[PC] 2020-11-11 16:37:25,185 (trainer:486) INFO: 5epoch:train:7126-7500batch: iter_time=0.001, forward_time=0.005, loss=1.692, backward_time=0.005, optim_step_time=1.946e-04, lr_0=0.100, train_time=0.014\r\n[PC] 2020-11-11 16:37:28,729 (trainer:243) INFO: 5epoch results: [train] iter_time=0.001, forward_time=0.005, loss=1.736, backward_time=0.005, optim_step_time=1.986e-04, lr_0=0.100, train_time=0.014, time=1 minute and 44.08 seconds, total_count=37535, [valid] loss=1.901, time=3.14 seconds, total_count=1200, [att_plot] time=0.14 seconds, total_count=0\r\n[PC] 2020-11-11 16:37:29,254 (trainer:286) INFO: The best model has been updated: valid.loss\r\n[PC] 2020-11-11 16:37:29,256 (trainer:306) INFO: The model files were removed: exp/lm_train_lm_bpe250/4epoch.pth\r\n[PC] 2020-11-11 16:37:29,256 (trainer:184) INFO: 6/20epoch started. Estimated time to finish: 26 minutes and 50.22 seconds\r\n[PC] 2020-11-11 16:37:34,654 (trainer:486) INFO: 6epoch:train:1-375batch: iter_time=0.001, forward_time=0.005, loss=1.688, backward_time=0.005, optim_step_time=2.001e-04, lr_0=0.100, train_time=0.014\r\n[PC] 2020-11-11 16:37:39,921 (trainer:486) INFO: 6epoch:train:376-750batch: iter_time=0.001, forward_time=0.005, loss=1.693, backward_time=0.005, optim_step_time=2.047e-04, lr_0=0.100, train_time=0.014\r\n[PC] 2020-11-11 16:37:45,128 (trainer:486) INFO: 6epoch:train:751-1125batch: iter_time=9.573e-04, forward_time=0.005, loss=1.687, backward_time=0.005, optim_step_time=2.056e-04, lr_0=0.100, train_time=0.014\r\n[PC] 2020-11-11 16:37:50,194 (trainer:486) INFO: 6epoch:train:1126-1500batch: iter_time=0.001, forward_time=0.005, loss=1.676, backward_time=0.005, optim_step_time=1.966e-04, lr_0=0.100, train_time=0.013\r\n[PC] 2020-11-11 16:37:55,306 (trainer:486) INFO: 6epoch:train:1501-1875batch: iter_time=0.001, forward_time=0.005, loss=1.690, backward_time=0.005, optim_step_time=1.954e-04, lr_0=0.100, train_time=0.013\r\n[PC] 2020-11-11 16:38:00,425 (trainer:486) INFO: 6epoch:train:1876-2250batch: iter_time=9.691e-04, forward_time=0.005, loss=1.681, backward_time=0.005, optim_step_time=1.917e-04, lr_0=0.100, train_time=0.013\r\n[PC] 2020-11-11 16:38:05,626 (trainer:486) INFO: 6epoch:train:2251-2625batch: iter_time=0.001, forward_time=0.005, loss=1.680, backward_time=0.005, optim_step_time=1.963e-04, lr_0=0.100, train_time=0.014\r\n[PC] 2020-11-11 16:38:10,751 (trainer:486) INFO: 6epoch:train:2626-3000batch: iter_time=0.001, forward_time=0.005, loss=1.673, backward_time=0.005, optim_step_time=2.049e-04, lr_0=0.100, train_time=0.013\r\n[PC] 2020-11-11 16:38:15,883 (trainer:486) INFO: 6epoch:train:3001-3375batch: iter_time=0.001, forward_time=0.005, loss=1.675, backward_time=0.005, optim_step_time=2.019e-04, lr_0=0.100, train_time=0.013\r\n[PC] 2020-11-11 16:38:21,062 (trainer:486) INFO: 6epoch:train:3376-3750batch: iter_time=0.001, forward_time=0.005, loss=1.686, backward_time=0.005, optim_step_time=1.848e-04, lr_0=0.100, train_time=0.014\r\n[PC] 2020-11-11 16:38:26,220 (trainer:486) INFO: 6epoch:train:3751-4125batch: iter_time=9.859e-04, forward_time=0.005, loss=1.684, backward_time=0.005, optim_step_time=2.027e-04, lr_0=0.100, train_time=0.014\r\n[PC] 2020-11-11 16:38:31,391 (trainer:486) INFO: 6epoch:train:4126-4500batch: iter_time=0.001, forward_time=0.005, loss=1.658, backward_time=0.005, optim_step_time=1.930e-04, lr_0=0.100, train_time=0.014\r\n[PC] 2020-11-11 16:38:36,557 (trainer:486) INFO: 6epoch:train:4501-4875batch: iter_time=0.001, forward_time=0.005, loss=1.668, backward_time=0.005, optim_step_time=1.987e-04, lr_0=0.100, train_time=0.014\r\n[PC] 2020-11-11 16:38:41,694 (trainer:486) INFO: 6epoch:train:4876-5250batch: iter_time=9.485e-04, forward_time=0.005, loss=1.654, backward_time=0.005, optim_step_time=1.986e-04, lr_0=0.100, train_time=0.013\r\n[PC] 2020-11-11 16:38:46,802 (trainer:486) INFO: 6epoch:train:5251-5625batch: iter_time=0.001, forward_time=0.005, loss=1.649, backward_time=0.005, optim_step_time=2.005e-04, lr_0=0.100, train_time=0.013\r\n[PC] 2020-11-11 16:38:51,959 (trainer:486) INFO: 6epoch:train:5626-6000batch: iter_time=0.001, forward_time=0.005, loss=1.651, backward_time=0.005, optim_step_time=2.028e-04, lr_0=0.100, train_time=0.014\r\n[PC] 2020-11-11 16:38:57,154 (trainer:486) INFO: 6epoch:train:6001-6375batch: iter_time=0.001, forward_time=0.005, loss=1.653, backward_time=0.005, optim_step_time=1.975e-04, lr_0=0.100, train_time=0.014\r\n[PC] 2020-11-11 16:39:02,273 (trainer:486) INFO: 6epoch:train:6376-6750batch: iter_time=0.001, forward_time=0.005, loss=1.640, backward_time=0.005, optim_step_time=1.946e-04, lr_0=0.100, train_time=0.013\r\n[PC] 2020-11-11 16:39:07,442 (trainer:486) INFO: 6epoch:train:6751-7125batch: iter_time=0.001, forward_time=0.005, loss=1.659, backward_time=0.005, optim_step_time=1.966e-04, lr_0=0.100, train_time=0.014\r\n[PC] 2020-11-11 16:39:12,540 (trainer:486) INFO: 6epoch:train:7126-7500batch: iter_time=8.465e-04, forward_time=0.005, loss=1.626, backward_time=0.005, optim_step_time=1.956e-04, lr_0=0.100, train_time=0.013\r\n[PC] 2020-11-11 16:39:16,073 (trainer:243) INFO: 6epoch results: [train] iter_time=0.001, forward_time=0.005, loss=1.669, backward_time=0.005, optim_step_time=1.981e-04, lr_0=0.100, train_time=0.014, time=1 minute and 43.56 seconds, total_count=45042, [valid] loss=1.880, time=3.12 seconds, total_count=1440, [att_plot] time=0.14 seconds, total_count=0\r\n[PC] 2020-11-11 16:39:16,613 (trainer:286) INFO: The best model has been updated: valid.loss\r\n[PC] 2020-11-11 16:39:16,616 (trainer:306) INFO: The model files were removed: exp/lm_train_lm_bpe250/5epoch.pth\r\n[PC] 2020-11-11 16:39:16,616 (trainer:184) INFO: 7/20epoch started. Estimated time to finish: 25 minutes and 2.9 seconds\r\n[PC] 2020-11-11 16:39:22,016 (trainer:486) INFO: 7epoch:train:1-375batch: iter_time=0.001, forward_time=0.005, loss=1.647, backward_time=0.005, optim_step_time=2.102e-04, lr_0=0.100, train_time=0.014\r\n[PC] 2020-11-11 16:39:27,230 (trainer:486) INFO: 7epoch:train:376-750batch: iter_time=0.001, forward_time=0.005, loss=1.638, backward_time=0.005, optim_step_time=2.052e-04, lr_0=0.100, train_time=0.014\r\n[PC] 2020-11-11 16:39:32,450 (trainer:486) INFO: 7epoch:train:751-1125batch: iter_time=0.001, forward_time=0.005, loss=1.636, backward_time=0.005, optim_step_time=2.017e-04, lr_0=0.100, train_time=0.014\r\n[PC] 2020-11-11 16:39:37,647 (trainer:486) INFO: 7epoch:train:1126-1500batch: iter_time=0.001, forward_time=0.005, loss=1.601, backward_time=0.005, optim_step_time=2.013e-04, lr_0=0.100, train_time=0.014\r\n[PC] 2020-11-11 16:39:42,852 (trainer:486) INFO: 7epoch:train:1501-1875batch: iter_time=0.001, forward_time=0.005, loss=1.616, backward_time=0.005, optim_step_time=1.984e-04, lr_0=0.100, train_time=0.014\r\n[PC] 2020-11-11 16:39:48,003 (trainer:486) INFO: 7epoch:train:1876-2250batch: iter_time=0.001, forward_time=0.005, loss=1.630, backward_time=0.005, optim_step_time=1.985e-04, lr_0=0.100, train_time=0.013\r\n[PC] 2020-11-11 16:39:53,069 (trainer:486) INFO: 7epoch:train:2251-2625batch: iter_time=9.911e-04, forward_time=0.005, loss=1.610, backward_time=0.005, optim_step_time=1.899e-04, lr_0=0.100, train_time=0.013\r\n[PC] 2020-11-11 16:39:58,213 (trainer:486) INFO: 7epoch:train:2626-3000batch: iter_time=0.001, forward_time=0.005, loss=1.620, backward_time=0.005, optim_step_time=1.932e-04, lr_0=0.100, train_time=0.013\r\n[PC] 2020-11-11 16:40:03,394 (trainer:486) INFO: 7epoch:train:3001-3375batch: iter_time=0.001, forward_time=0.005, loss=1.621, backward_time=0.005, optim_step_time=1.896e-04, lr_0=0.100, train_time=0.014\r\n[PC] 2020-11-11 16:40:08,511 (trainer:486) INFO: 7epoch:train:3376-3750batch: iter_time=0.001, forward_time=0.005, loss=1.619, backward_time=0.005, optim_step_time=1.976e-04, lr_0=0.100, train_time=0.013\r\n[PC] 2020-11-11 16:40:13,662 (trainer:486) INFO: 7epoch:train:3751-4125batch: iter_time=8.999e-04, forward_time=0.005, loss=1.620, backward_time=0.005, optim_step_time=1.915e-04, lr_0=0.100, train_time=0.013\r\n[PC] 2020-11-11 16:40:18,832 (trainer:486) INFO: 7epoch:train:4126-4500batch: iter_time=0.001, forward_time=0.005, loss=1.617, backward_time=0.005, optim_step_time=1.949e-04, lr_0=0.100, train_time=0.014\r\n[PC] 2020-11-11 16:40:24,055 (trainer:486) INFO: 7epoch:train:4501-4875batch: iter_time=0.001, forward_time=0.005, loss=1.616, backward_time=0.005, optim_step_time=1.964e-04, lr_0=0.100, train_time=0.014\r\n[PC] 2020-11-11 16:40:29,241 (trainer:486) INFO: 7epoch:train:4876-5250batch: iter_time=0.001, forward_time=0.005, loss=1.588, backward_time=0.005, optim_step_time=2.027e-04, lr_0=0.100, train_time=0.014\r\n[PC] 2020-11-11 16:40:34,412 (trainer:486) INFO: 7epoch:train:5251-5625batch: iter_time=0.001, forward_time=0.005, loss=1.595, backward_time=0.005, optim_step_time=1.990e-04, lr_0=0.100, train_time=0.014\r\n[PC] 2020-11-11 16:40:39,574 (trainer:486) INFO: 7epoch:train:5626-6000batch: iter_time=0.001, forward_time=0.005, loss=1.601, backward_time=0.005, optim_step_time=2.049e-04, lr_0=0.100, train_time=0.014\r\n[PC] 2020-11-11 16:40:44,889 (trainer:486) INFO: 7epoch:train:6001-6375batch: iter_time=0.001, forward_time=0.005, loss=1.594, backward_time=0.005, optim_step_time=2.007e-04, lr_0=0.100, train_time=0.014\r\n[PC] 2020-11-11 16:40:50,045 (trainer:486) INFO: 7epoch:train:6376-6750batch: iter_time=0.001, forward_time=0.005, loss=1.594, backward_time=0.005, optim_step_time=1.963e-04, lr_0=0.100, train_time=0.014\r\n[PC] 2020-11-11 16:40:55,258 (trainer:486) INFO: 7epoch:train:6751-7125batch: iter_time=0.001, forward_time=0.005, loss=1.595, backward_time=0.005, optim_step_time=2.022e-04, lr_0=0.100, train_time=0.014\r\n[PC] 2020-11-11 16:41:00,521 (trainer:486) INFO: 7epoch:train:7126-7500batch: iter_time=0.001, forward_time=0.005, loss=1.601, backward_time=0.005, optim_step_time=1.977e-04, lr_0=0.100, train_time=0.014\r\n[PC] 2020-11-11 16:41:04,070 (trainer:243) INFO: 7epoch results: [train] iter_time=0.001, forward_time=0.005, loss=1.613, backward_time=0.005, optim_step_time=1.986e-04, lr_0=0.100, train_time=0.014, time=1 minute and 44.19 seconds, total_count=52549, [valid] loss=1.854, time=3.12 seconds, total_count=1680, [att_plot] time=0.14 seconds, total_count=0\r\n[PC] 2020-11-11 16:41:04,630 (trainer:286) INFO: The best model has been updated: valid.loss\r\n[PC] 2020-11-11 16:41:04,632 (trainer:306) INFO: The model files were removed: exp/lm_train_lm_bpe250/6epoch.pth\r\n[PC] 2020-11-11 16:41:04,632 (trainer:184) INFO: 8/20epoch started. Estimated time to finish: 23 minutes and 16.79 seconds\r\n[PC] 2020-11-11 16:41:09,988 (trainer:486) INFO: 8epoch:train:1-375batch: iter_time=0.001, forward_time=0.005, loss=1.585, backward_time=0.005, optim_step_time=1.985e-04, lr_0=0.100, train_time=0.014\r\n[PC] 2020-11-11 16:41:15,125 (trainer:486) INFO: 8epoch:train:376-750batch: iter_time=9.825e-04, forward_time=0.005, loss=1.568, backward_time=0.005, optim_step_time=1.995e-04, lr_0=0.100, train_time=0.013\r\n[PC] 2020-11-11 16:41:20,404 (trainer:486) INFO: 8epoch:train:751-1125batch: iter_time=0.001, forward_time=0.005, loss=1.582, backward_time=0.005, optim_step_time=2.010e-04, lr_0=0.100, train_time=0.014\r\n[PC] 2020-11-11 16:41:25,586 (trainer:486) INFO: 8epoch:train:1126-1500batch: iter_time=0.001, forward_time=0.005, loss=1.572, backward_time=0.005, optim_step_time=2.053e-04, lr_0=0.100, train_time=0.014\r\n[PC] 2020-11-11 16:41:30,842 (trainer:486) INFO: 8epoch:train:1501-1875batch: iter_time=0.001, forward_time=0.005, loss=1.590, backward_time=0.005, optim_step_time=1.968e-04, lr_0=0.100, train_time=0.014\r\n[PC] 2020-11-11 16:41:35,938 (trainer:486) INFO: 8epoch:train:1876-2250batch: iter_time=0.001, forward_time=0.005, loss=1.554, backward_time=0.005, optim_step_time=2.016e-04, lr_0=0.100, train_time=0.013\r\n[PC] 2020-11-11 16:41:41,159 (trainer:486) INFO: 8epoch:train:2251-2625batch: iter_time=0.001, forward_time=0.005, loss=1.564, backward_time=0.005, optim_step_time=1.996e-04, lr_0=0.100, train_time=0.014\r\n[PC] 2020-11-11 16:41:46,309 (trainer:486) INFO: 8epoch:train:2626-3000batch: iter_time=0.001, forward_time=0.005, loss=1.548, backward_time=0.005, optim_step_time=2.092e-04, lr_0=0.100, train_time=0.013\r\n[PC] 2020-11-11 16:41:51,464 (trainer:486) INFO: 8epoch:train:3001-3375batch: iter_time=0.001, forward_time=0.005, loss=1.581, backward_time=0.005, optim_step_time=2.015e-04, lr_0=0.100, train_time=0.013\r\n[PC] 2020-11-11 16:41:56,685 (trainer:486) INFO: 8epoch:train:3376-3750batch: iter_time=0.001, forward_time=0.005, loss=1.584, backward_time=0.005, optim_step_time=1.987e-04, lr_0=0.100, train_time=0.014\r\n[PC] 2020-11-11 16:42:01,969 (trainer:486) INFO: 8epoch:train:3751-4125batch: iter_time=0.001, forward_time=0.005, loss=1.561, backward_time=0.005, optim_step_time=1.989e-04, lr_0=0.100, train_time=0.014\r\n[PC] 2020-11-11 16:42:07,047 (trainer:486) INFO: 8epoch:train:4126-4500batch: iter_time=9.997e-04, forward_time=0.005, loss=1.564, backward_time=0.005, optim_step_time=1.973e-04, lr_0=0.100, train_time=0.013\r\n[PC] 2020-11-11 16:42:12,215 (trainer:486) INFO: 8epoch:train:4501-4875batch: iter_time=0.001, forward_time=0.005, loss=1.542, backward_time=0.005, optim_step_time=2.008e-04, lr_0=0.100, train_time=0.014\r\n[PC] 2020-11-11 16:42:17,299 (trainer:486) INFO: 8epoch:train:4876-5250batch: iter_time=0.001, forward_time=0.005, loss=1.547, backward_time=0.005, optim_step_time=1.958e-04, lr_0=0.100, train_time=0.013\r\n[PC] 2020-11-11 16:42:22,447 (trainer:486) INFO: 8epoch:train:5251-5625batch: iter_time=0.001, forward_time=0.005, loss=1.549, backward_time=0.005, optim_step_time=1.936e-04, lr_0=0.100, train_time=0.013\r\n[PC] 2020-11-11 16:42:27,601 (trainer:486) INFO: 8epoch:train:5626-6000batch: iter_time=0.001, forward_time=0.005, loss=1.590, backward_time=0.005, optim_step_time=1.962e-04, lr_0=0.100, train_time=0.013\r\n[PC] 2020-11-11 16:42:32,710 (trainer:486) INFO: 8epoch:train:6001-6375batch: iter_time=0.001, forward_time=0.005, loss=1.553, backward_time=0.005, optim_step_time=1.948e-04, lr_0=0.100, train_time=0.013\r\n[PC] 2020-11-11 16:42:37,878 (trainer:486) INFO: 8epoch:train:6376-6750batch: iter_time=0.001, forward_time=0.005, loss=1.556, backward_time=0.005, optim_step_time=2.009e-04, lr_0=0.100, train_time=0.014\r\n[PC] 2020-11-11 16:42:43,066 (trainer:486) INFO: 8epoch:train:6751-7125batch: iter_time=0.001, forward_time=0.005, loss=1.561, backward_time=0.005, optim_step_time=1.997e-04, lr_0=0.100, train_time=0.014\r\n[PC] 2020-11-11 16:42:48,206 (trainer:486) INFO: 8epoch:train:7126-7500batch: iter_time=0.001, forward_time=0.005, loss=1.549, backward_time=0.005, optim_step_time=2.018e-04, lr_0=0.100, train_time=0.013\r\n[PC] 2020-11-11 16:42:51,685 (trainer:243) INFO: 8epoch results: [train] iter_time=0.001, forward_time=0.005, loss=1.565, backward_time=0.005, optim_step_time=1.995e-04, lr_0=0.100, train_time=0.014, time=1 minute and 43.85 seconds, total_count=60056, [valid] loss=1.836, time=3.08 seconds, total_count=1920, [att_plot] time=0.12 seconds, total_count=0\r\n[PC] 2020-11-11 16:42:52,308 (trainer:286) INFO: The best model has been updated: valid.loss\r\n[PC] 2020-11-11 16:42:52,311 (trainer:306) INFO: The model files were removed: exp/lm_train_lm_bpe250/7epoch.pth\r\n[PC] 2020-11-11 16:42:52,311 (trainer:184) INFO: 9/20epoch started. Estimated time to finish: 21 minutes and 29.69 seconds\r\n[PC] 2020-11-11 16:42:57,498 (trainer:486) INFO: 9epoch:train:1-375batch: iter_time=0.001, forward_time=0.005, loss=1.511, backward_time=0.005, optim_step_time=2.127e-04, lr_0=0.100, train_time=0.014\r\n[PC] 2020-11-11 16:43:02,799 (trainer:486) INFO: 9epoch:train:376-750batch: iter_time=0.001, forward_time=0.005, loss=1.543, backward_time=0.005, optim_step_time=1.949e-04, lr_0=0.100, train_time=0.014\r\n[PC] 2020-11-11 16:43:07,969 (trainer:486) INFO: 9epoch:train:751-1125batch: iter_time=0.001, forward_time=0.005, loss=1.524, backward_time=0.005, optim_step_time=2.110e-04, lr_0=0.100, train_time=0.014\r\n[PC] 2020-11-11 16:43:13,122 (trainer:486) INFO: 9epoch:train:1126-1500batch: iter_time=0.001, forward_time=0.005, loss=1.517, backward_time=0.005, optim_step_time=1.966e-04, lr_0=0.100, train_time=0.013\r\n[PC] 2020-11-11 16:43:18,339 (trainer:486) INFO: 9epoch:train:1501-1875batch: iter_time=0.001, forward_time=0.005, loss=1.528, backward_time=0.005, optim_step_time=1.968e-04, lr_0=0.100, train_time=0.014\r\n[PC] 2020-11-11 16:43:23,618 (trainer:486) INFO: 9epoch:train:1876-2250batch: iter_time=0.001, forward_time=0.005, loss=1.541, backward_time=0.005, optim_step_time=1.926e-04, lr_0=0.100, train_time=0.014\r\n[PC] 2020-11-11 16:43:28,914 (trainer:486) INFO: 9epoch:train:2251-2625batch: iter_time=0.001, forward_time=0.005, loss=1.535, backward_time=0.005, optim_step_time=1.937e-04, lr_0=0.100, train_time=0.014\r\n[PC] 2020-11-11 16:43:34,089 (trainer:486) INFO: 9epoch:train:2626-3000batch: iter_time=0.001, forward_time=0.005, loss=1.529, backward_time=0.005, optim_step_time=1.991e-04, lr_0=0.100, train_time=0.014\r\n[PC] 2020-11-11 16:43:39,253 (trainer:486) INFO: 9epoch:train:3001-3375batch: iter_time=8.862e-04, forward_time=0.005, loss=1.524, backward_time=0.005, optim_step_time=1.980e-04, lr_0=0.100, train_time=0.014\r\n[PC] 2020-11-11 16:43:44,499 (trainer:486) INFO: 9epoch:train:3376-3750batch: iter_time=9.751e-04, forward_time=0.005, loss=1.553, backward_time=0.005, optim_step_time=1.996e-04, lr_0=0.100, train_time=0.014\r\n[PC] 2020-11-11 16:43:49,824 (trainer:486) INFO: 9epoch:train:3751-4125batch: iter_time=0.001, forward_time=0.005, loss=1.525, backward_time=0.005, optim_step_time=1.989e-04, lr_0=0.100, train_time=0.014\r\n[PC] 2020-11-11 16:43:55,110 (trainer:486) INFO: 9epoch:train:4126-4500batch: iter_time=0.001, forward_time=0.005, loss=1.541, backward_time=0.005, optim_step_time=1.961e-04, lr_0=0.100, train_time=0.014\r\n[PC] 2020-11-11 16:44:00,368 (trainer:486) INFO: 9epoch:train:4501-4875batch: iter_time=0.001, forward_time=0.005, loss=1.535, backward_time=0.005, optim_step_time=2.020e-04, lr_0=0.100, train_time=0.014\r\n[PC] 2020-11-11 16:44:05,540 (trainer:486) INFO: 9epoch:train:4876-5250batch: iter_time=0.001, forward_time=0.005, loss=1.515, backward_time=0.005, optim_step_time=1.951e-04, lr_0=0.100, train_time=0.014\r\n[PC] 2020-11-11 16:44:10,728 (trainer:486) INFO: 9epoch:train:5251-5625batch: iter_time=0.001, forward_time=0.005, loss=1.497, backward_time=0.005, optim_step_time=1.979e-04, lr_0=0.100, train_time=0.014\r\n[PC] 2020-11-11 16:44:15,904 (trainer:486) INFO: 9epoch:train:5626-6000batch: iter_time=0.001, forward_time=0.005, loss=1.508, backward_time=0.005, optim_step_time=2.003e-04, lr_0=0.100, train_time=0.014\r\n[PC] 2020-11-11 16:44:21,084 (trainer:486) INFO: 9epoch:train:6001-6375batch: iter_time=0.001, forward_time=0.005, loss=1.498, backward_time=0.005, optim_step_time=2.002e-04, lr_0=0.100, train_time=0.014\r\n[PC] 2020-11-11 16:44:26,252 (trainer:486) INFO: 9epoch:train:6376-6750batch: iter_time=0.001, forward_time=0.005, loss=1.491, backward_time=0.005, optim_step_time=1.913e-04, lr_0=0.100, train_time=0.014\r\n[PC] 2020-11-11 16:44:31,519 (trainer:486) INFO: 9epoch:train:6751-7125batch: iter_time=0.001, forward_time=0.005, loss=1.536, backward_time=0.005, optim_step_time=1.981e-04, lr_0=0.100, train_time=0.014\r\n[PC] 2020-11-11 16:44:36,692 (trainer:486) INFO: 9epoch:train:7126-7500batch: iter_time=0.001, forward_time=0.005, loss=1.491, backward_time=0.005, optim_step_time=1.997e-04, lr_0=0.100, train_time=0.014\r\n[PC] 2020-11-11 16:44:40,151 (trainer:243) INFO: 9epoch results: [train] iter_time=0.001, forward_time=0.005, loss=1.522, backward_time=0.005, optim_step_time=1.987e-04, lr_0=0.100, train_time=0.014, time=1 minute and 44.65 seconds, total_count=67563, [valid] loss=1.822, time=3.05 seconds, total_count=2160, [att_plot] time=0.13 seconds, total_count=0\r\n[PC] 2020-11-11 16:44:40,727 (trainer:286) INFO: The best model has been updated: valid.loss\r\n[PC] 2020-11-11 16:44:40,729 (trainer:306) INFO: The model files were removed: exp/lm_train_lm_bpe250/8epoch.pth\r\n[PC] 2020-11-11 16:44:40,729 (trainer:184) INFO: 10/20epoch started. Estimated time to finish: 19 minutes and 43.37 seconds\r\n[PC] 2020-11-11 16:44:46,145 (trainer:486) INFO: 10epoch:train:1-375batch: iter_time=0.001, forward_time=0.005, loss=1.503, backward_time=0.005, optim_step_time=2.046e-04, lr_0=0.100, train_time=0.014\r\n[PC] 2020-11-11 16:44:51,418 (trainer:486) INFO: 10epoch:train:376-750batch: iter_time=0.001, forward_time=0.005, loss=1.503, backward_time=0.005, optim_step_time=2.056e-04, lr_0=0.100, train_time=0.014\r\n[PC] 2020-11-11 16:44:56,731 (trainer:486) INFO: 10epoch:train:751-1125batch: iter_time=0.001, forward_time=0.005, loss=1.492, backward_time=0.005, optim_step_time=2.014e-04, lr_0=0.100, train_time=0.014\r\n[PC] 2020-11-11 16:45:02,086 (trainer:486) INFO: 10epoch:train:1126-1500batch: iter_time=0.001, forward_time=0.005, loss=1.488, backward_time=0.005, optim_step_time=1.989e-04, lr_0=0.100, train_time=0.014\r\n[PC] 2020-11-11 16:45:07,284 (trainer:486) INFO: 10epoch:train:1501-1875batch: iter_time=0.001, forward_time=0.005, loss=1.500, backward_time=0.005, optim_step_time=1.983e-04, lr_0=0.100, train_time=0.014\r\n[PC] 2020-11-11 16:45:12,436 (trainer:486) INFO: 10epoch:train:1876-2250batch: iter_time=9.880e-04, forward_time=0.005, loss=1.481, backward_time=0.005, optim_step_time=1.956e-04, lr_0=0.100, train_time=0.013\r\n[PC] 2020-11-11 16:45:17,681 (trainer:486) INFO: 10epoch:train:2251-2625batch: iter_time=0.001, forward_time=0.005, loss=1.499, backward_time=0.005, optim_step_time=2.021e-04, lr_0=0.100, train_time=0.014\r\n[PC] 2020-11-11 16:45:22,922 (trainer:486) INFO: 10epoch:train:2626-3000batch: iter_time=0.001, forward_time=0.005, loss=1.480, backward_time=0.005, optim_step_time=2.052e-04, lr_0=0.100, train_time=0.014\r\n[PC] 2020-11-11 16:45:28,091 (trainer:486) INFO: 10epoch:train:3001-3375batch: iter_time=0.001, forward_time=0.005, loss=1.474, backward_time=0.005, optim_step_time=2.006e-04, lr_0=0.100, train_time=0.014\r\n[PC] 2020-11-11 16:45:33,401 (trainer:486) INFO: 10epoch:train:3376-3750batch: iter_time=0.001, forward_time=0.005, loss=1.502, backward_time=0.005, optim_step_time=1.974e-04, lr_0=0.100, train_time=0.014\r\n[PC] 2020-11-11 16:45:38,547 (trainer:486) INFO: 10epoch:train:3751-4125batch: iter_time=0.001, forward_time=0.005, loss=1.460, backward_time=0.005, optim_step_time=2.069e-04, lr_0=0.100, train_time=0.013\r\n[PC] 2020-11-11 16:45:43,808 (trainer:486) INFO: 10epoch:train:4126-4500batch: iter_time=0.001, forward_time=0.005, loss=1.492, backward_time=0.005, optim_step_time=1.983e-04, lr_0=0.100, train_time=0.014\r\n[PC] 2020-11-11 16:45:48,987 (trainer:486) INFO: 10epoch:train:4501-4875batch: iter_time=0.001, forward_time=0.005, loss=1.482, backward_time=0.005, optim_step_time=2.043e-04, lr_0=0.100, train_time=0.014\r\n[PC] 2020-11-11 16:45:54,231 (trainer:486) INFO: 10epoch:train:4876-5250batch: iter_time=0.001, forward_time=0.005, loss=1.487, backward_time=0.005, optim_step_time=1.975e-04, lr_0=0.100, train_time=0.014\r\n[PC] 2020-11-11 16:45:59,443 (trainer:486) INFO: 10epoch:train:5251-5625batch: iter_time=0.001, forward_time=0.005, loss=1.477, backward_time=0.005, optim_step_time=1.975e-04, lr_0=0.100, train_time=0.014\r\n[PC] 2020-11-11 16:46:04,611 (trainer:486) INFO: 10epoch:train:5626-6000batch: iter_time=0.001, forward_time=0.005, loss=1.496, backward_time=0.005, optim_step_time=1.940e-04, lr_0=0.100, train_time=0.014\r\n[PC] 2020-11-11 16:46:09,882 (trainer:486) INFO: 10epoch:train:6001-6375batch: iter_time=0.001, forward_time=0.005, loss=1.468, backward_time=0.005, optim_step_time=1.999e-04, lr_0=0.100, train_time=0.014\r\n[PC] 2020-11-11 16:46:14,986 (trainer:486) INFO: 10epoch:train:6376-6750batch: iter_time=0.001, forward_time=0.005, loss=1.458, backward_time=0.005, optim_step_time=1.980e-04, lr_0=0.100, train_time=0.013\r\n[PC] 2020-11-11 16:46:20,181 (trainer:486) INFO: 10epoch:train:6751-7125batch: iter_time=0.001, forward_time=0.005, loss=1.482, backward_time=0.005, optim_step_time=1.945e-04, lr_0=0.100, train_time=0.014\r\n[PC] 2020-11-11 16:46:25,421 (trainer:486) INFO: 10epoch:train:7126-7500batch: iter_time=0.001, forward_time=0.005, loss=1.462, backward_time=0.005, optim_step_time=1.952e-04, lr_0=0.100, train_time=0.014\r\n[PC] 2020-11-11 16:46:28,936 (trainer:243) INFO: 10epoch results: [train] iter_time=0.001, forward_time=0.005, loss=1.484, backward_time=0.005, optim_step_time=1.998e-04, lr_0=0.100, train_time=0.014, time=1 minute and 44.96 seconds, total_count=75070, [valid] loss=1.822, time=3.1 seconds, total_count=2400, [att_plot] time=0.14 seconds, total_count=0\r\n[PC] 2020-11-11 16:46:29,530 (trainer:286) INFO: The best model has been updated: valid.loss\r\n[PC] 2020-11-11 16:46:29,532 (trainer:306) INFO: The model files were removed: exp/lm_train_lm_bpe250/9epoch.pth\r\n[PC] 2020-11-11 16:46:29,532 (trainer:184) INFO: 11/20epoch started. Estimated time to finish: 17 minutes and 57.02 seconds\r\n[PC] 2020-11-11 16:46:34,861 (trainer:486) INFO: 11epoch:train:1-375batch: iter_time=0.001, forward_time=0.005, loss=1.449, backward_time=0.005, optim_step_time=1.971e-04, lr_0=0.100, train_time=0.014\r\n[PC] 2020-11-11 16:46:40,085 (trainer:486) INFO: 11epoch:train:376-750batch: iter_time=0.001, forward_time=0.005, loss=1.466, backward_time=0.005, optim_step_time=2.036e-04, lr_0=0.100, train_time=0.014\r\n[PC] 2020-11-11 16:46:45,366 (trainer:486) INFO: 11epoch:train:751-1125batch: iter_time=0.001, forward_time=0.005, loss=1.473, backward_time=0.005, optim_step_time=2.011e-04, lr_0=0.100, train_time=0.014\r\n[PC] 2020-11-11 16:46:50,602 (trainer:486) INFO: 11epoch:train:1126-1500batch: iter_time=0.001, forward_time=0.005, loss=1.469, backward_time=0.005, optim_step_time=2.021e-04, lr_0=0.100, train_time=0.014\r\n[PC] 2020-11-11 16:46:55,889 (trainer:486) INFO: 11epoch:train:1501-1875batch: iter_time=0.001, forward_time=0.005, loss=1.441, backward_time=0.005, optim_step_time=2.062e-04, lr_0=0.100, train_time=0.014\r\n[PC] 2020-11-11 16:47:01,132 (trainer:486) INFO: 11epoch:train:1876-2250batch: iter_time=0.001, forward_time=0.005, loss=1.467, backward_time=0.005, optim_step_time=1.919e-04, lr_0=0.100, train_time=0.014\r\n[PC] 2020-11-11 16:47:06,371 (trainer:486) INFO: 11epoch:train:2251-2625batch: iter_time=0.001, forward_time=0.005, loss=1.459, backward_time=0.005, optim_step_time=2.003e-04, lr_0=0.100, train_time=0.014\r\n[PC] 2020-11-11 16:47:11,500 (trainer:486) INFO: 11epoch:train:2626-3000batch: iter_time=0.001, forward_time=0.005, loss=1.448, backward_time=0.005, optim_step_time=1.966e-04, lr_0=0.100, train_time=0.013\r\n[PC] 2020-11-11 16:47:16,706 (trainer:486) INFO: 11epoch:train:3001-3375batch: iter_time=0.001, forward_time=0.005, loss=1.467, backward_time=0.005, optim_step_time=1.981e-04, lr_0=0.100, train_time=0.014\r\n[PC] 2020-11-11 16:47:21,857 (trainer:486) INFO: 11epoch:train:3376-3750batch: iter_time=0.001, forward_time=0.005, loss=1.436, backward_time=0.005, optim_step_time=2.037e-04, lr_0=0.100, train_time=0.013\r\n[PC] 2020-11-11 16:47:27,030 (trainer:486) INFO: 11epoch:train:3751-4125batch: iter_time=0.001, forward_time=0.005, loss=1.466, backward_time=0.005, optim_step_time=1.934e-04, lr_0=0.100, train_time=0.014\r\n[PC] 2020-11-11 16:47:32,157 (trainer:486) INFO: 11epoch:train:4126-4500batch: iter_time=0.001, forward_time=0.005, loss=1.437, backward_time=0.005, optim_step_time=1.947e-04, lr_0=0.100, train_time=0.013\r\n[PC] 2020-11-11 16:47:37,349 (trainer:486) INFO: 11epoch:train:4501-4875batch: iter_time=0.001, forward_time=0.005, loss=1.424, backward_time=0.005, optim_step_time=1.974e-04, lr_0=0.100, train_time=0.014\r\n[PC] 2020-11-11 16:47:42,528 (trainer:486) INFO: 11epoch:train:4876-5250batch: iter_time=0.001, forward_time=0.005, loss=1.452, backward_time=0.005, optim_step_time=2.019e-04, lr_0=0.100, train_time=0.014\r\n[PC] 2020-11-11 16:47:47,723 (trainer:486) INFO: 11epoch:train:5251-5625batch: iter_time=0.001, forward_time=0.005, loss=1.436, backward_time=0.005, optim_step_time=2.065e-04, lr_0=0.100, train_time=0.014\r\n[PC] 2020-11-11 16:47:52,901 (trainer:486) INFO: 11epoch:train:5626-6000batch: iter_time=0.001, forward_time=0.005, loss=1.436, backward_time=0.005, optim_step_time=2.003e-04, lr_0=0.100, train_time=0.014\r\n[PC] 2020-11-11 16:47:58,114 (trainer:486) INFO: 11epoch:train:6001-6375batch: iter_time=9.815e-04, forward_time=0.005, loss=1.445, backward_time=0.005, optim_step_time=1.985e-04, lr_0=0.100, train_time=0.014\r\n[PC] 2020-11-11 16:48:03,218 (trainer:486) INFO: 11epoch:train:6376-6750batch: iter_time=0.001, forward_time=0.005, loss=1.440, backward_time=0.005, optim_step_time=2.053e-04, lr_0=0.100, train_time=0.013\r\n[PC] 2020-11-11 16:48:08,395 (trainer:486) INFO: 11epoch:train:6751-7125batch: iter_time=0.001, forward_time=0.005, loss=1.438, backward_time=0.005, optim_step_time=2.002e-04, lr_0=0.100, train_time=0.014\r\n[PC] 2020-11-11 16:48:13,585 (trainer:486) INFO: 11epoch:train:7126-7500batch: iter_time=0.001, forward_time=0.005, loss=1.438, backward_time=0.005, optim_step_time=2.001e-04, lr_0=0.100, train_time=0.014\r\n[PC] 2020-11-11 16:48:17,265 (trainer:243) INFO: 11epoch results: [train] iter_time=0.001, forward_time=0.005, loss=1.449, backward_time=0.005, optim_step_time=1.999e-04, lr_0=0.100, train_time=0.014, time=1 minute and 44.32 seconds, total_count=82577, [valid] loss=1.802, time=3.28 seconds, total_count=2640, [att_plot] time=0.14 seconds, total_count=0\r\n[PC] 2020-11-11 16:48:17,784 (trainer:286) INFO: The best model has been updated: valid.loss\r\n[PC] 2020-11-11 16:48:17,786 (trainer:306) INFO: The model files were removed: exp/lm_train_lm_bpe250/10epoch.pth\r\n[PC] 2020-11-11 16:48:17,786 (trainer:184) INFO: 12/20epoch started. Estimated time to finish: 16 minutes and 9.77 seconds\r\n[PC] 2020-11-11 16:48:23,221 (trainer:486) INFO: 12epoch:train:1-375batch: iter_time=0.002, forward_time=0.005, loss=1.442, backward_time=0.005, optim_step_time=2.020e-04, lr_0=0.100, train_time=0.014\r\n[PC] 2020-11-11 16:48:28,524 (trainer:486) INFO: 12epoch:train:376-750batch: iter_time=0.001, forward_time=0.005, loss=1.405, backward_time=0.005, optim_step_time=2.065e-04, lr_0=0.100, train_time=0.014\r\n[PC] 2020-11-11 16:48:33,762 (trainer:486) INFO: 12epoch:train:751-1125batch: iter_time=0.001, forward_time=0.005, loss=1.412, backward_time=0.005, optim_step_time=2.016e-04, lr_0=0.100, train_time=0.014\r\n[PC] 2020-11-11 16:48:38,958 (trainer:486) INFO: 12epoch:train:1126-1500batch: iter_time=0.001, forward_time=0.005, loss=1.407, backward_time=0.005, optim_step_time=1.984e-04, lr_0=0.100, train_time=0.014\r\n[PC] 2020-11-11 16:48:44,122 (trainer:486) INFO: 12epoch:train:1501-1875batch: iter_time=0.001, forward_time=0.005, loss=1.395, backward_time=0.005, optim_step_time=2.037e-04, lr_0=0.100, train_time=0.014\r\n[PC] 2020-11-11 16:48:49,360 (trainer:486) INFO: 12epoch:train:1876-2250batch: iter_time=0.001, forward_time=0.005, loss=1.433, backward_time=0.005, optim_step_time=1.984e-04, lr_0=0.100, train_time=0.014\r\n[PC] 2020-11-11 16:48:54,571 (trainer:486) INFO: 12epoch:train:2251-2625batch: iter_time=0.001, forward_time=0.005, loss=1.410, backward_time=0.005, optim_step_time=1.891e-04, lr_0=0.100, train_time=0.014\r\n[PC] 2020-11-11 16:48:59,779 (trainer:486) INFO: 12epoch:train:2626-3000batch: iter_time=0.001, forward_time=0.005, loss=1.431, backward_time=0.005, optim_step_time=2.005e-04, lr_0=0.100, train_time=0.014\r\n[PC] 2020-11-11 16:49:05,027 (trainer:486) INFO: 12epoch:train:3001-3375batch: iter_time=0.001, forward_time=0.005, loss=1.420, backward_time=0.005, optim_step_time=2.000e-04, lr_0=0.100, train_time=0.014\r\n[PC] 2020-11-11 16:49:10,187 (trainer:486) INFO: 12epoch:train:3376-3750batch: iter_time=0.001, forward_time=0.005, loss=1.404, backward_time=0.005, optim_step_time=1.977e-04, lr_0=0.100, train_time=0.014\r\n[PC] 2020-11-11 16:49:15,389 (trainer:486) INFO: 12epoch:train:3751-4125batch: iter_time=0.001, forward_time=0.005, loss=1.408, backward_time=0.005, optim_step_time=2.122e-04, lr_0=0.100, train_time=0.014\r\n[PC] 2020-11-11 16:49:20,668 (trainer:486) INFO: 12epoch:train:4126-4500batch: iter_time=0.001, forward_time=0.005, loss=1.408, backward_time=0.005, optim_step_time=2.057e-04, lr_0=0.100, train_time=0.014\r\n[PC] 2020-11-11 16:49:25,943 (trainer:486) INFO: 12epoch:train:4501-4875batch: iter_time=0.001, forward_time=0.005, loss=1.446, backward_time=0.005, optim_step_time=1.944e-04, lr_0=0.100, train_time=0.014\r\n[PC] 2020-11-11 16:49:31,276 (trainer:486) INFO: 12epoch:train:4876-5250batch: iter_time=0.001, forward_time=0.005, loss=1.436, backward_time=0.005, optim_step_time=1.983e-04, lr_0=0.100, train_time=0.014\r\n[PC] 2020-11-11 16:49:36,580 (trainer:486) INFO: 12epoch:train:5251-5625batch: iter_time=0.001, forward_time=0.005, loss=1.414, backward_time=0.005, optim_step_time=2.001e-04, lr_0=0.100, train_time=0.014\r\n[PC] 2020-11-11 16:49:41,890 (trainer:486) INFO: 12epoch:train:5626-6000batch: iter_time=0.001, forward_time=0.005, loss=1.419, backward_time=0.005, optim_step_time=2.063e-04, lr_0=0.100, train_time=0.014\r\n[PC] 2020-11-11 16:49:47,107 (trainer:486) INFO: 12epoch:train:6001-6375batch: iter_time=0.001, forward_time=0.005, loss=1.379, backward_time=0.005, optim_step_time=1.964e-04, lr_0=0.100, train_time=0.014\r\n[PC] 2020-11-11 16:49:52,399 (trainer:486) INFO: 12epoch:train:6376-6750batch: iter_time=0.001, forward_time=0.005, loss=1.440, backward_time=0.005, optim_step_time=1.956e-04, lr_0=0.100, train_time=0.014\r\n[PC] 2020-11-11 16:49:57,736 (trainer:486) INFO: 12epoch:train:6751-7125batch: iter_time=0.001, forward_time=0.005, loss=1.408, backward_time=0.005, optim_step_time=2.018e-04, lr_0=0.100, train_time=0.014\r\n[PC] 2020-11-11 16:50:03,074 (trainer:486) INFO: 12epoch:train:7126-7500batch: iter_time=0.001, forward_time=0.005, loss=1.417, backward_time=0.005, optim_step_time=1.972e-04, lr_0=0.100, train_time=0.014\r\n[PC] 2020-11-11 16:50:06,620 (trainer:243) INFO: 12epoch results: [train] iter_time=0.001, forward_time=0.005, loss=1.417, backward_time=0.005, optim_step_time=2.003e-04, lr_0=0.100, train_time=0.014, time=1 minute and 45.56 seconds, total_count=90084, [valid] loss=1.792, time=3.14 seconds, total_count=2880, [att_plot] time=0.14 seconds, total_count=0\r\n[PC] 2020-11-11 16:50:07,162 (trainer:286) INFO: The best model has been updated: valid.loss\r\n[PC] 2020-11-11 16:50:07,164 (trainer:306) INFO: The model files were removed: exp/lm_train_lm_bpe250/11epoch.pth\r\n[PC] 2020-11-11 16:50:07,164 (trainer:184) INFO: 13/20epoch started. Estimated time to finish: 14 minutes and 23.1 seconds\r\n[PC] 2020-11-11 16:50:12,460 (trainer:486) INFO: 13epoch:train:1-375batch: iter_time=0.001, forward_time=0.005, loss=1.384, backward_time=0.005, optim_step_time=2.004e-04, lr_0=0.100, train_time=0.014\r\n[PC] 2020-11-11 16:50:17,593 (trainer:486) INFO: 13epoch:train:376-750batch: iter_time=0.001, forward_time=0.005, loss=1.390, backward_time=0.005, optim_step_time=2.039e-04, lr_0=0.100, train_time=0.013\r\n[PC] 2020-11-11 16:50:22,790 (trainer:486) INFO: 13epoch:train:751-1125batch: iter_time=0.001, forward_time=0.005, loss=1.380, backward_time=0.005, optim_step_time=1.985e-04, lr_0=0.100, train_time=0.014\r\n[PC] 2020-11-11 16:50:27,965 (trainer:486) INFO: 13epoch:train:1126-1500batch: iter_time=0.001, forward_time=0.005, loss=1.396, backward_time=0.005, optim_step_time=2.056e-04, lr_0=0.100, train_time=0.014\r\n[PC] 2020-11-11 16:50:33,196 (trainer:486) INFO: 13epoch:train:1501-1875batch: iter_time=0.001, forward_time=0.005, loss=1.418, backward_time=0.005, optim_step_time=2.011e-04, lr_0=0.100, train_time=0.014\r\n[PC] 2020-11-11 16:50:38,311 (trainer:486) INFO: 13epoch:train:1876-2250batch: iter_time=0.001, forward_time=0.005, loss=1.395, backward_time=0.005, optim_step_time=1.902e-04, lr_0=0.100, train_time=0.013\r\n[PC] 2020-11-11 16:50:43,584 (trainer:486) INFO: 13epoch:train:2251-2625batch: iter_time=0.001, forward_time=0.005, loss=1.380, backward_time=0.005, optim_step_time=1.964e-04, lr_0=0.100, train_time=0.014\r\n[PC] 2020-11-11 16:50:48,849 (trainer:486) INFO: 13epoch:train:2626-3000batch: iter_time=0.001, forward_time=0.005, loss=1.411, backward_time=0.005, optim_step_time=2.042e-04, lr_0=0.100, train_time=0.014\r\n[PC] 2020-11-11 16:50:54,106 (trainer:486) INFO: 13epoch:train:3001-3375batch: iter_time=0.001, forward_time=0.005, loss=1.382, backward_time=0.005, optim_step_time=2.030e-04, lr_0=0.100, train_time=0.014\r\n[PC] 2020-11-11 16:50:59,291 (trainer:486) INFO: 13epoch:train:3376-3750batch: iter_time=0.001, forward_time=0.005, loss=1.399, backward_time=0.005, optim_step_time=1.983e-04, lr_0=0.100, train_time=0.014\r\n[PC] 2020-11-11 16:51:04,626 (trainer:486) INFO: 13epoch:train:3751-4125batch: iter_time=0.001, forward_time=0.005, loss=1.381, backward_time=0.005, optim_step_time=2.099e-04, lr_0=0.100, train_time=0.014\r\n[PC] 2020-11-11 16:51:09,818 (trainer:486) INFO: 13epoch:train:4126-4500batch: iter_time=0.001, forward_time=0.005, loss=1.392, backward_time=0.005, optim_step_time=2.013e-04, lr_0=0.100, train_time=0.014\r\n[PC] 2020-11-11 16:51:15,006 (trainer:486) INFO: 13epoch:train:4501-4875batch: iter_time=0.001, forward_time=0.005, loss=1.371, backward_time=0.005, optim_step_time=2.019e-04, lr_0=0.100, train_time=0.014\r\n[PC] 2020-11-11 16:51:20,270 (trainer:486) INFO: 13epoch:train:4876-5250batch: iter_time=0.001, forward_time=0.005, loss=1.376, backward_time=0.005, optim_step_time=1.966e-04, lr_0=0.100, train_time=0.014\r\n[PC] 2020-11-11 16:51:25,519 (trainer:486) INFO: 13epoch:train:5251-5625batch: iter_time=0.001, forward_time=0.005, loss=1.381, backward_time=0.005, optim_step_time=1.898e-04, lr_0=0.100, train_time=0.014\r\n[PC] 2020-11-11 16:51:30,690 (trainer:486) INFO: 13epoch:train:5626-6000batch: iter_time=0.001, forward_time=0.005, loss=1.380, backward_time=0.005, optim_step_time=1.886e-04, lr_0=0.100, train_time=0.014\r\n[PC] 2020-11-11 16:51:35,825 (trainer:486) INFO: 13epoch:train:6001-6375batch: iter_time=9.728e-04, forward_time=0.005, loss=1.386, backward_time=0.005, optim_step_time=1.977e-04, lr_0=0.100, train_time=0.013\r\n[PC] 2020-11-11 16:51:41,094 (trainer:486) INFO: 13epoch:train:6376-6750batch: iter_time=0.001, forward_time=0.005, loss=1.368, backward_time=0.005, optim_step_time=1.977e-04, lr_0=0.100, train_time=0.014\r\n[PC] 2020-11-11 16:51:46,294 (trainer:486) INFO: 13epoch:train:6751-7125batch: iter_time=0.001, forward_time=0.005, loss=1.372, backward_time=0.005, optim_step_time=2.038e-04, lr_0=0.100, train_time=0.014\r\n[PC] 2020-11-11 16:51:51,446 (trainer:486) INFO: 13epoch:train:7126-7500batch: iter_time=0.001, forward_time=0.005, loss=1.380, backward_time=0.005, optim_step_time=1.928e-04, lr_0=0.100, train_time=0.014\r\n[PC] 2020-11-11 16:51:55,024 (trainer:243) INFO: 13epoch results: [train] iter_time=0.001, forward_time=0.005, loss=1.386, backward_time=0.005, optim_step_time=1.991e-04, lr_0=0.100, train_time=0.014, time=1 minute and 44.56 seconds, total_count=97591, [valid] loss=1.771, time=3.15 seconds, total_count=3120, [att_plot] time=0.15 seconds, total_count=0\r\n[PC] 2020-11-11 16:51:55,569 (trainer:286) INFO: The best model has been updated: valid.loss\r\n[PC] 2020-11-11 16:51:55,571 (trainer:306) INFO: The model files were removed: exp/lm_train_lm_bpe250/12epoch.pth\r\n[PC] 2020-11-11 16:51:55,571 (trainer:184) INFO: 14/20epoch started. Estimated time to finish: 12 minutes and 35.49 seconds\r\n[PC] 2020-11-11 16:52:00,970 (trainer:486) INFO: 14epoch:train:1-375batch: iter_time=0.001, forward_time=0.005, loss=1.386, backward_time=0.005, optim_step_time=1.937e-04, lr_0=0.100, train_time=0.014\r\n[PC] 2020-11-11 16:52:06,136 (trainer:486) INFO: 14epoch:train:376-750batch: iter_time=0.001, forward_time=0.005, loss=1.355, backward_time=0.005, optim_step_time=1.983e-04, lr_0=0.100, train_time=0.014\r\n[PC] 2020-11-11 16:52:11,400 (trainer:486) INFO: 14epoch:train:751-1125batch: iter_time=0.001, forward_time=0.005, loss=1.393, backward_time=0.005, optim_step_time=2.017e-04, lr_0=0.100, train_time=0.014\r\n[PC] 2020-11-11 16:52:16,699 (trainer:486) INFO: 14epoch:train:1126-1500batch: iter_time=0.001, forward_time=0.005, loss=1.359, backward_time=0.005, optim_step_time=2.009e-04, lr_0=0.100, train_time=0.014\r\n[PC] 2020-11-11 16:52:21,908 (trainer:486) INFO: 14epoch:train:1501-1875batch: iter_time=0.001, forward_time=0.005, loss=1.357, backward_time=0.005, optim_step_time=2.023e-04, lr_0=0.100, train_time=0.014\r\n[PC] 2020-11-11 16:52:27,080 (trainer:486) INFO: 14epoch:train:1876-2250batch: iter_time=0.001, forward_time=0.005, loss=1.334, backward_time=0.005, optim_step_time=2.034e-04, lr_0=0.100, train_time=0.014\r\n[PC] 2020-11-11 16:52:32,277 (trainer:486) INFO: 14epoch:train:2251-2625batch: iter_time=0.001, forward_time=0.005, loss=1.384, backward_time=0.005, optim_step_time=2.025e-04, lr_0=0.100, train_time=0.014\r\n[PC] 2020-11-11 16:52:37,424 (trainer:486) INFO: 14epoch:train:2626-3000batch: iter_time=0.001, forward_time=0.005, loss=1.346, backward_time=0.005, optim_step_time=1.939e-04, lr_0=0.100, train_time=0.013\r\n[PC] 2020-11-11 16:52:42,609 (trainer:486) INFO: 14epoch:train:3001-3375batch: iter_time=0.001, forward_time=0.005, loss=1.345, backward_time=0.005, optim_step_time=2.068e-04, lr_0=0.100, train_time=0.014\r\n[PC] 2020-11-11 16:52:47,792 (trainer:486) INFO: 14epoch:train:3376-3750batch: iter_time=0.001, forward_time=0.005, loss=1.360, backward_time=0.005, optim_step_time=1.972e-04, lr_0=0.100, train_time=0.014\r\n[PC] 2020-11-11 16:52:53,061 (trainer:486) INFO: 14epoch:train:3751-4125batch: iter_time=0.001, forward_time=0.005, loss=1.383, backward_time=0.005, optim_step_time=2.050e-04, lr_0=0.100, train_time=0.014\r\n[PC] 2020-11-11 16:52:58,284 (trainer:486) INFO: 14epoch:train:4126-4500batch: iter_time=0.001, forward_time=0.005, loss=1.362, backward_time=0.005, optim_step_time=2.002e-04, lr_0=0.100, train_time=0.014\r\n[PC] 2020-11-11 16:53:03,350 (trainer:486) INFO: 14epoch:train:4501-4875batch: iter_time=0.001, forward_time=0.005, loss=1.333, backward_time=0.005, optim_step_time=1.909e-04, lr_0=0.100, train_time=0.013\r\n[PC] 2020-11-11 16:53:08,515 (trainer:486) INFO: 14epoch:train:4876-5250batch: iter_time=0.001, forward_time=0.005, loss=1.357, backward_time=0.005, optim_step_time=2.007e-04, lr_0=0.100, train_time=0.014\r\n[PC] 2020-11-11 16:53:13,797 (trainer:486) INFO: 14epoch:train:5251-5625batch: iter_time=0.001, forward_time=0.005, loss=1.376, backward_time=0.005, optim_step_time=1.908e-04, lr_0=0.100, train_time=0.014\r\n[PC] 2020-11-11 16:53:18,924 (trainer:486) INFO: 14epoch:train:5626-6000batch: iter_time=8.881e-04, forward_time=0.005, loss=1.348, backward_time=0.005, optim_step_time=2.037e-04, lr_0=0.100, train_time=0.013\r\n[PC] 2020-11-11 16:53:24,077 (trainer:486) INFO: 14epoch:train:6001-6375batch: iter_time=0.001, forward_time=0.005, loss=1.359, backward_time=0.005, optim_step_time=2.058e-04, lr_0=0.100, train_time=0.013\r\n[PC] 2020-11-11 16:53:29,303 (trainer:486) INFO: 14epoch:train:6376-6750batch: iter_time=0.001, forward_time=0.005, loss=1.359, backward_time=0.005, optim_step_time=2.038e-04, lr_0=0.100, train_time=0.014\r\n[PC] 2020-11-11 16:53:34,498 (trainer:486) INFO: 14epoch:train:6751-7125batch: iter_time=0.001, forward_time=0.005, loss=1.342, backward_time=0.005, optim_step_time=2.000e-04, lr_0=0.100, train_time=0.014\r\n[PC] 2020-11-11 16:53:39,597 (trainer:486) INFO: 14epoch:train:7126-7500batch: iter_time=8.968e-04, forward_time=0.005, loss=1.321, backward_time=0.005, optim_step_time=2.053e-04, lr_0=0.100, train_time=0.013\r\n[PC] 2020-11-11 16:53:43,061 (trainer:243) INFO: 14epoch results: [train] iter_time=0.001, forward_time=0.005, loss=1.358, backward_time=0.005, optim_step_time=2.003e-04, lr_0=0.100, train_time=0.014, time=1 minute and 44.3 seconds, total_count=105098, [valid] loss=1.768, time=3.05 seconds, total_count=3360, [att_plot] time=0.14 seconds, total_count=0\r\n[PC] 2020-11-11 16:53:43,635 (trainer:286) INFO: The best model has been updated: valid.loss\r\n[PC] 2020-11-11 16:53:43,637 (trainer:306) INFO: The model files were removed: exp/lm_train_lm_bpe250/13epoch.pth\r\n[PC] 2020-11-11 16:53:43,637 (trainer:184) INFO: 15/20epoch started. Estimated time to finish: 10 minutes and 47.62 seconds\r\n[PC] 2020-11-11 16:53:49,050 (trainer:486) INFO: 15epoch:train:1-375batch: iter_time=0.001, forward_time=0.005, loss=1.355, backward_time=0.005, optim_step_time=1.998e-04, lr_0=0.100, train_time=0.014\r\n[PC] 2020-11-11 16:53:54,264 (trainer:486) INFO: 15epoch:train:376-750batch: iter_time=0.001, forward_time=0.005, loss=1.362, backward_time=0.005, optim_step_time=1.998e-04, lr_0=0.100, train_time=0.014\r\n[PC] 2020-11-11 16:53:59,451 (trainer:486) INFO: 15epoch:train:751-1125batch: iter_time=0.001, forward_time=0.005, loss=1.306, backward_time=0.005, optim_step_time=1.979e-04, lr_0=0.100, train_time=0.014\r\n[PC] 2020-11-11 16:54:04,662 (trainer:486) INFO: 15epoch:train:1126-1500batch: iter_time=0.001, forward_time=0.005, loss=1.336, backward_time=0.005, optim_step_time=2.020e-04, lr_0=0.100, train_time=0.014\r\n[PC] 2020-11-11 16:54:09,876 (trainer:486) INFO: 15epoch:train:1501-1875batch: iter_time=0.001, forward_time=0.005, loss=1.317, backward_time=0.005, optim_step_time=1.954e-04, lr_0=0.100, train_time=0.014\r\n[PC] 2020-11-11 16:54:15,086 (trainer:486) INFO: 15epoch:train:1876-2250batch: iter_time=0.001, forward_time=0.005, loss=1.316, backward_time=0.005, optim_step_time=1.985e-04, lr_0=0.100, train_time=0.014\r\n[PC] 2020-11-11 16:54:20,292 (trainer:486) INFO: 15epoch:train:2251-2625batch: iter_time=0.001, forward_time=0.005, loss=1.359, backward_time=0.005, optim_step_time=1.965e-04, lr_0=0.100, train_time=0.014\r\n[PC] 2020-11-11 16:54:25,556 (trainer:486) INFO: 15epoch:train:2626-3000batch: iter_time=0.001, forward_time=0.005, loss=1.346, backward_time=0.005, optim_step_time=1.926e-04, lr_0=0.100, train_time=0.014\r\n[PC] 2020-11-11 16:54:30,841 (trainer:486) INFO: 15epoch:train:3001-3375batch: iter_time=0.001, forward_time=0.005, loss=1.346, backward_time=0.005, optim_step_time=1.971e-04, lr_0=0.100, train_time=0.014\r\n[PC] 2020-11-11 16:54:35,916 (trainer:486) INFO: 15epoch:train:3376-3750batch: iter_time=0.001, forward_time=0.005, loss=1.309, backward_time=0.005, optim_step_time=1.978e-04, lr_0=0.100, train_time=0.013\r\n[PC] 2020-11-11 16:54:41,043 (trainer:486) INFO: 15epoch:train:3751-4125batch: iter_time=0.001, forward_time=0.005, loss=1.309, backward_time=0.005, optim_step_time=2.019e-04, lr_0=0.100, train_time=0.013\r\n[PC] 2020-11-11 16:54:46,221 (trainer:486) INFO: 15epoch:train:4126-4500batch: iter_time=0.001, forward_time=0.005, loss=1.362, backward_time=0.005, optim_step_time=1.987e-04, lr_0=0.100, train_time=0.014\r\n[PC] 2020-11-11 16:54:51,496 (trainer:486) INFO: 15epoch:train:4501-4875batch: iter_time=0.001, forward_time=0.005, loss=1.340, backward_time=0.005, optim_step_time=2.020e-04, lr_0=0.100, train_time=0.014\r\n[PC] 2020-11-11 16:54:56,702 (trainer:486) INFO: 15epoch:train:4876-5250batch: iter_time=0.001, forward_time=0.005, loss=1.315, backward_time=0.005, optim_step_time=2.020e-04, lr_0=0.100, train_time=0.014\r\n[PC] 2020-11-11 16:55:01,840 (trainer:486) INFO: 15epoch:train:5251-5625batch: iter_time=0.001, forward_time=0.005, loss=1.308, backward_time=0.005, optim_step_time=2.016e-04, lr_0=0.100, train_time=0.013\r\n[PC] 2020-11-11 16:55:07,069 (trainer:486) INFO: 15epoch:train:5626-6000batch: iter_time=0.001, forward_time=0.005, loss=1.330, backward_time=0.005, optim_step_time=1.987e-04, lr_0=0.100, train_time=0.014\r\n[PC] 2020-11-11 16:55:12,185 (trainer:486) INFO: 15epoch:train:6001-6375batch: iter_time=9.891e-04, forward_time=0.005, loss=1.323, backward_time=0.005, optim_step_time=2.056e-04, lr_0=0.100, train_time=0.013\r\n[PC] 2020-11-11 16:55:17,389 (trainer:486) INFO: 15epoch:train:6376-6750batch: iter_time=0.001, forward_time=0.005, loss=1.333, backward_time=0.005, optim_step_time=1.973e-04, lr_0=0.100, train_time=0.014\r\n[PC] 2020-11-11 16:55:22,534 (trainer:486) INFO: 15epoch:train:6751-7125batch: iter_time=0.001, forward_time=0.005, loss=1.345, backward_time=0.005, optim_step_time=1.945e-04, lr_0=0.100, train_time=0.013\r\n[PC] 2020-11-11 16:55:27,720 (trainer:486) INFO: 15epoch:train:7126-7500batch: iter_time=0.001, forward_time=0.005, loss=1.318, backward_time=0.005, optim_step_time=1.983e-04, lr_0=0.100, train_time=0.014\r\n[PC] 2020-11-11 16:55:31,182 (trainer:243) INFO: 15epoch results: [train] iter_time=0.001, forward_time=0.005, loss=1.332, backward_time=0.005, optim_step_time=1.989e-04, lr_0=0.100, train_time=0.014, time=1 minute and 44.36 seconds, total_count=112605, [valid] loss=1.773, time=3.06 seconds, total_count=3600, [att_plot] time=0.13 seconds, total_count=0\r\n[PC] 2020-11-11 16:55:31,730 (trainer:284) INFO: There are no improvements in this epoch\r\n[PC] 2020-11-11 16:55:31,730 (trainer:184) INFO: 16/20epoch started. Estimated time to finish: 8 minutes and 59.74 seconds\r\n[PC] 2020-11-11 16:55:37,135 (trainer:486) INFO: 16epoch:train:1-375batch: iter_time=0.001, forward_time=0.005, loss=1.320, backward_time=0.005, optim_step_time=1.951e-04, lr_0=0.100, train_time=0.014\r\n[PC] 2020-11-11 16:55:42,287 (trainer:486) INFO: 16epoch:train:376-750batch: iter_time=0.001, forward_time=0.005, loss=1.285, backward_time=0.005, optim_step_time=2.003e-04, lr_0=0.100, train_time=0.013\r\n[PC] 2020-11-11 16:55:47,533 (trainer:486) INFO: 16epoch:train:751-1125batch: iter_time=0.001, forward_time=0.005, loss=1.300, backward_time=0.005, optim_step_time=2.013e-04, lr_0=0.100, train_time=0.014\r\n[PC] 2020-11-11 16:55:52,816 (trainer:486) INFO: 16epoch:train:1126-1500batch: iter_time=0.001, forward_time=0.005, loss=1.347, backward_time=0.005, optim_step_time=1.954e-04, lr_0=0.100, train_time=0.014\r\n[PC] 2020-11-11 16:55:58,087 (trainer:486) INFO: 16epoch:train:1501-1875batch: iter_time=0.001, forward_time=0.005, loss=1.296, backward_time=0.005, optim_step_time=1.989e-04, lr_0=0.100, train_time=0.014\r\n[PC] 2020-11-11 16:56:03,295 (trainer:486) INFO: 16epoch:train:1876-2250batch: iter_time=0.001, forward_time=0.005, loss=1.304, backward_time=0.005, optim_step_time=1.957e-04, lr_0=0.100, train_time=0.014\r\n[PC] 2020-11-11 16:56:08,416 (trainer:486) INFO: 16epoch:train:2251-2625batch: iter_time=0.001, forward_time=0.005, loss=1.273, backward_time=0.005, optim_step_time=2.064e-04, lr_0=0.100, train_time=0.013\r\n[PC] 2020-11-11 16:56:13,610 (trainer:486) INFO: 16epoch:train:2626-3000batch: iter_time=0.001, forward_time=0.005, loss=1.303, backward_time=0.005, optim_step_time=2.027e-04, lr_0=0.100, train_time=0.014\r\n[PC] 2020-11-11 16:56:18,735 (trainer:486) INFO: 16epoch:train:3001-3375batch: iter_time=0.001, forward_time=0.005, loss=1.283, backward_time=0.005, optim_step_time=1.935e-04, lr_0=0.100, train_time=0.013\r\n[PC] 2020-11-11 16:56:23,813 (trainer:486) INFO: 16epoch:train:3376-3750batch: iter_time=0.001, forward_time=0.005, loss=1.279, backward_time=0.005, optim_step_time=2.074e-04, lr_0=0.100, train_time=0.013\r\n[PC] 2020-11-11 16:56:29,060 (trainer:486) INFO: 16epoch:train:3751-4125batch: iter_time=9.669e-04, forward_time=0.005, loss=1.338, backward_time=0.005, optim_step_time=1.989e-04, lr_0=0.100, train_time=0.014\r\n[PC] 2020-11-11 16:56:34,278 (trainer:486) INFO: 16epoch:train:4126-4500batch: iter_time=0.001, forward_time=0.005, loss=1.330, backward_time=0.005, optim_step_time=2.006e-04, lr_0=0.100, train_time=0.014\r\n[PC] 2020-11-11 16:56:39,527 (trainer:486) INFO: 16epoch:train:4501-4875batch: iter_time=0.001, forward_time=0.005, loss=1.330, backward_time=0.005, optim_step_time=2.075e-04, lr_0=0.100, train_time=0.014\r\n[PC] 2020-11-11 16:56:44,676 (trainer:486) INFO: 16epoch:train:4876-5250batch: iter_time=0.001, forward_time=0.005, loss=1.300, backward_time=0.005, optim_step_time=1.993e-04, lr_0=0.100, train_time=0.013\r\n[PC] 2020-11-11 16:56:49,910 (trainer:486) INFO: 16epoch:train:5251-5625batch: iter_time=0.001, forward_time=0.005, loss=1.328, backward_time=0.005, optim_step_time=1.929e-04, lr_0=0.100, train_time=0.014\r\n[PC] 2020-11-11 16:56:55,050 (trainer:486) INFO: 16epoch:train:5626-6000batch: iter_time=0.001, forward_time=0.005, loss=1.333, backward_time=0.005, optim_step_time=1.964e-04, lr_0=0.100, train_time=0.013\r\n[PC] 2020-11-11 16:57:00,198 (trainer:486) INFO: 16epoch:train:6001-6375batch: iter_time=0.001, forward_time=0.005, loss=1.291, backward_time=0.005, optim_step_time=2.001e-04, lr_0=0.100, train_time=0.013\r\n[PC] 2020-11-11 16:57:05,448 (trainer:486) INFO: 16epoch:train:6376-6750batch: iter_time=0.001, forward_time=0.005, loss=1.297, backward_time=0.005, optim_step_time=2.020e-04, lr_0=0.100, train_time=0.014\r\n[PC] 2020-11-11 16:57:10,711 (trainer:486) INFO: 16epoch:train:6751-7125batch: iter_time=0.001, forward_time=0.005, loss=1.315, backward_time=0.005, optim_step_time=2.073e-04, lr_0=0.100, train_time=0.014\r\n[PC] 2020-11-11 16:57:15,802 (trainer:486) INFO: 16epoch:train:7126-7500batch: iter_time=8.925e-04, forward_time=0.005, loss=1.279, backward_time=0.005, optim_step_time=1.996e-04, lr_0=0.100, train_time=0.013\r\n[PC] 2020-11-11 16:57:19,399 (trainer:243) INFO: 16epoch results: [train] iter_time=0.001, forward_time=0.005, loss=1.307, backward_time=0.005, optim_step_time=2.000e-04, lr_0=0.100, train_time=0.014, time=1 minute and 44.35 seconds, total_count=120112, [valid] loss=1.771, time=3.19 seconds, total_count=3840, [att_plot] time=0.13 seconds, total_count=0\r\n[PC] 2020-11-11 16:57:19,955 (trainer:284) INFO: There are no improvements in this epoch\r\n[PC] 2020-11-11 16:57:19,957 (trainer:306) INFO: The model files were removed: exp/lm_train_lm_bpe250/15epoch.pth\r\n[PC] 2020-11-11 16:57:19,957 (trainer:184) INFO: 17/20epoch started. Estimated time to finish: 7 minutes and 11.86 seconds\r\n[PC] 2020-11-11 16:57:25,359 (trainer:486) INFO: 17epoch:train:1-375batch: iter_time=0.002, forward_time=0.005, loss=1.292, backward_time=0.005, optim_step_time=2.037e-04, lr_0=0.100, train_time=0.014\r\n[PC] 2020-11-11 16:57:30,599 (trainer:486) INFO: 17epoch:train:376-750batch: iter_time=0.001, forward_time=0.005, loss=1.273, backward_time=0.005, optim_step_time=2.107e-04, lr_0=0.100, train_time=0.014\r\n[PC] 2020-11-11 16:57:35,872 (trainer:486) INFO: 17epoch:train:751-1125batch: iter_time=0.001, forward_time=0.005, loss=1.306, backward_time=0.005, optim_step_time=2.018e-04, lr_0=0.100, train_time=0.014\r\n[PC] 2020-11-11 16:57:41,130 (trainer:486) INFO: 17epoch:train:1126-1500batch: iter_time=0.001, forward_time=0.005, loss=1.306, backward_time=0.005, optim_step_time=1.960e-04, lr_0=0.100, train_time=0.014\r\n[PC] 2020-11-11 16:57:46,403 (trainer:486) INFO: 17epoch:train:1501-1875batch: iter_time=0.001, forward_time=0.005, loss=1.274, backward_time=0.005, optim_step_time=2.014e-04, lr_0=0.100, train_time=0.014\r\n[PC] 2020-11-11 16:57:51,718 (trainer:486) INFO: 17epoch:train:1876-2250batch: iter_time=0.001, forward_time=0.005, loss=1.304, backward_time=0.005, optim_step_time=1.924e-04, lr_0=0.100, train_time=0.014\r\n[PC] 2020-11-11 16:57:56,977 (trainer:486) INFO: 17epoch:train:2251-2625batch: iter_time=0.001, forward_time=0.005, loss=1.272, backward_time=0.005, optim_step_time=2.030e-04, lr_0=0.100, train_time=0.014\r\n[PC] 2020-11-11 16:58:02,247 (trainer:486) INFO: 17epoch:train:2626-3000batch: iter_time=0.001, forward_time=0.005, loss=1.302, backward_time=0.005, optim_step_time=1.982e-04, lr_0=0.100, train_time=0.014\r\n[PC] 2020-11-11 16:58:07,521 (trainer:486) INFO: 17epoch:train:3001-3375batch: iter_time=0.001, forward_time=0.005, loss=1.318, backward_time=0.005, optim_step_time=1.961e-04, lr_0=0.100, train_time=0.014\r\n[PC] 2020-11-11 16:58:12,719 (trainer:486) INFO: 17epoch:train:3376-3750batch: iter_time=0.001, forward_time=0.005, loss=1.274, backward_time=0.005, optim_step_time=1.997e-04, lr_0=0.100, train_time=0.014\r\n[PC] 2020-11-11 16:58:17,799 (trainer:486) INFO: 17epoch:train:3751-4125batch: iter_time=0.001, forward_time=0.005, loss=1.244, backward_time=0.005, optim_step_time=2.072e-04, lr_0=0.100, train_time=0.013\r\n[PC] 2020-11-11 16:58:22,899 (trainer:486) INFO: 17epoch:train:4126-4500batch: iter_time=9.505e-04, forward_time=0.005, loss=1.252, backward_time=0.005, optim_step_time=1.964e-04, lr_0=0.100, train_time=0.013\r\n[PC] 2020-11-11 16:58:28,197 (trainer:486) INFO: 17epoch:train:4501-4875batch: iter_time=0.001, forward_time=0.005, loss=1.281, backward_time=0.005, optim_step_time=1.970e-04, lr_0=0.100, train_time=0.014\r\n[PC] 2020-11-11 16:58:33,417 (trainer:486) INFO: 17epoch:train:4876-5250batch: iter_time=0.001, forward_time=0.005, loss=1.310, backward_time=0.005, optim_step_time=2.044e-04, lr_0=0.100, train_time=0.014\r\n[PC] 2020-11-11 16:58:38,489 (trainer:486) INFO: 17epoch:train:5251-5625batch: iter_time=0.001, forward_time=0.005, loss=1.287, backward_time=0.005, optim_step_time=1.966e-04, lr_0=0.100, train_time=0.013\r\n[PC] 2020-11-11 16:58:43,708 (trainer:486) INFO: 17epoch:train:5626-6000batch: iter_time=0.001, forward_time=0.005, loss=1.259, backward_time=0.005, optim_step_time=1.925e-04, lr_0=0.100, train_time=0.014\r\n[PC] 2020-11-11 16:58:48,883 (trainer:486) INFO: 17epoch:train:6001-6375batch: iter_time=9.586e-04, forward_time=0.005, loss=1.263, backward_time=0.005, optim_step_time=2.035e-04, lr_0=0.100, train_time=0.014\r\n[PC] 2020-11-11 16:58:54,066 (trainer:486) INFO: 17epoch:train:6376-6750batch: iter_time=0.001, forward_time=0.005, loss=1.295, backward_time=0.005, optim_step_time=1.968e-04, lr_0=0.100, train_time=0.014\r\n[PC] 2020-11-11 16:58:59,321 (trainer:486) INFO: 17epoch:train:6751-7125batch: iter_time=0.001, forward_time=0.005, loss=1.283, backward_time=0.005, optim_step_time=1.993e-04, lr_0=0.100, train_time=0.014\r\n[PC] 2020-11-11 16:59:04,586 (trainer:486) INFO: 17epoch:train:7126-7500batch: iter_time=0.001, forward_time=0.005, loss=1.273, backward_time=0.005, optim_step_time=2.053e-04, lr_0=0.100, train_time=0.014\r\n[PC] 2020-11-11 16:59:08,071 (trainer:243) INFO: 17epoch results: [train] iter_time=0.001, forward_time=0.005, loss=1.284, backward_time=0.005, optim_step_time=2.001e-04, lr_0=0.100, train_time=0.014, time=1 minute and 44.91 seconds, total_count=127619, [valid] loss=1.738, time=3.08 seconds, total_count=4080, [att_plot] time=0.13 seconds, total_count=0\r\n[PC] 2020-11-11 16:59:08,681 (trainer:286) INFO: The best model has been updated: valid.loss\r\n[PC] 2020-11-11 16:59:08,685 (trainer:306) INFO: The model files were removed: exp/lm_train_lm_bpe250/14epoch.pth, exp/lm_train_lm_bpe250/16epoch.pth\r\n[PC] 2020-11-11 16:59:08,685 (trainer:184) INFO: 18/20epoch started. Estimated time to finish: 5 minutes and 24.03 seconds\r\n[PC] 2020-11-11 16:59:14,145 (trainer:486) INFO: 18epoch:train:1-375batch: iter_time=0.001, forward_time=0.005, loss=1.318, backward_time=0.005, optim_step_time=2.061e-04, lr_0=0.100, train_time=0.014\r\n[PC] 2020-11-11 16:59:19,315 (trainer:486) INFO: 18epoch:train:376-750batch: iter_time=0.001, forward_time=0.005, loss=1.247, backward_time=0.005, optim_step_time=1.996e-04, lr_0=0.100, train_time=0.014\r\n[PC] 2020-11-11 16:59:24,447 (trainer:486) INFO: 18epoch:train:751-1125batch: iter_time=0.001, forward_time=0.005, loss=1.279, backward_time=0.005, optim_step_time=2.023e-04, lr_0=0.100, train_time=0.013\r\n[PC] 2020-11-11 16:59:29,625 (trainer:486) INFO: 18epoch:train:1126-1500batch: iter_time=0.001, forward_time=0.005, loss=1.272, backward_time=0.005, optim_step_time=2.052e-04, lr_0=0.100, train_time=0.014\r\n[PC] 2020-11-11 16:59:34,817 (trainer:486) INFO: 18epoch:train:1501-1875batch: iter_time=0.001, forward_time=0.005, loss=1.239, backward_time=0.005, optim_step_time=1.983e-04, lr_0=0.100, train_time=0.014\r\n[PC] 2020-11-11 16:59:39,889 (trainer:486) INFO: 18epoch:train:1876-2250batch: iter_time=0.001, forward_time=0.005, loss=1.239, backward_time=0.005, optim_step_time=2.024e-04, lr_0=0.100, train_time=0.013\r\n[PC] 2020-11-11 16:59:45,075 (trainer:486) INFO: 18epoch:train:2251-2625batch: iter_time=0.001, forward_time=0.005, loss=1.272, backward_time=0.005, optim_step_time=1.980e-04, lr_0=0.100, train_time=0.014\r\n[PC] 2020-11-11 16:59:50,230 (trainer:486) INFO: 18epoch:train:2626-3000batch: iter_time=0.001, forward_time=0.005, loss=1.266, backward_time=0.005, optim_step_time=1.995e-04, lr_0=0.100, train_time=0.014\r\n[PC] 2020-11-11 16:59:55,333 (trainer:486) INFO: 18epoch:train:3001-3375batch: iter_time=0.001, forward_time=0.005, loss=1.255, backward_time=0.005, optim_step_time=2.032e-04, lr_0=0.100, train_time=0.013\r\n[PC] 2020-11-11 17:00:00,452 (trainer:486) INFO: 18epoch:train:3376-3750batch: iter_time=0.001, forward_time=0.005, loss=1.247, backward_time=0.005, optim_step_time=2.029e-04, lr_0=0.100, train_time=0.013\r\n[PC] 2020-11-11 17:00:05,648 (trainer:486) INFO: 18epoch:train:3751-4125batch: iter_time=0.001, forward_time=0.005, loss=1.269, backward_time=0.005, optim_step_time=2.025e-04, lr_0=0.100, train_time=0.014\r\n[PC] 2020-11-11 17:00:10,981 (trainer:486) INFO: 18epoch:train:4126-4500batch: iter_time=0.001, forward_time=0.005, loss=1.264, backward_time=0.005, optim_step_time=2.002e-04, lr_0=0.100, train_time=0.014\r\n[PC] 2020-11-11 17:00:16,255 (trainer:486) INFO: 18epoch:train:4501-4875batch: iter_time=0.001, forward_time=0.005, loss=1.276, backward_time=0.005, optim_step_time=1.946e-04, lr_0=0.100, train_time=0.014\r\n[PC] 2020-11-11 17:00:21,474 (trainer:486) INFO: 18epoch:train:4876-5250batch: iter_time=0.001, forward_time=0.005, loss=1.272, backward_time=0.005, optim_step_time=2.061e-04, lr_0=0.100, train_time=0.014\r\n[PC] 2020-11-11 17:00:26,677 (trainer:486) INFO: 18epoch:train:5251-5625batch: iter_time=0.001, forward_time=0.005, loss=1.255, backward_time=0.005, optim_step_time=1.997e-04, lr_0=0.100, train_time=0.014\r\n[PC] 2020-11-11 17:00:31,915 (trainer:486) INFO: 18epoch:train:5626-6000batch: iter_time=0.001, forward_time=0.005, loss=1.221, backward_time=0.005, optim_step_time=2.032e-04, lr_0=0.100, train_time=0.014\r\n[PC] 2020-11-11 17:00:37,176 (trainer:486) INFO: 18epoch:train:6001-6375batch: iter_time=0.001, forward_time=0.005, loss=1.264, backward_time=0.005, optim_step_time=1.901e-04, lr_0=0.100, train_time=0.014\r\n[PC] 2020-11-11 17:00:42,375 (trainer:486) INFO: 18epoch:train:6376-6750batch: iter_time=0.001, forward_time=0.005, loss=1.270, backward_time=0.005, optim_step_time=1.968e-04, lr_0=0.100, train_time=0.014\r\n[PC] 2020-11-11 17:00:47,625 (trainer:486) INFO: 18epoch:train:6751-7125batch: iter_time=0.001, forward_time=0.005, loss=1.277, backward_time=0.005, optim_step_time=1.975e-04, lr_0=0.100, train_time=0.014\r\n[PC] 2020-11-11 17:00:52,882 (trainer:486) INFO: 18epoch:train:7126-7500batch: iter_time=0.001, forward_time=0.005, loss=1.235, backward_time=0.005, optim_step_time=2.063e-04, lr_0=0.100, train_time=0.014\r\n[PC] 2020-11-11 17:00:56,455 (trainer:243) INFO: 18epoch results: [train] iter_time=0.001, forward_time=0.005, loss=1.262, backward_time=0.005, optim_step_time=2.007e-04, lr_0=0.100, train_time=0.014, time=1 minute and 44.48 seconds, total_count=135126, [valid] loss=1.718, time=3.15 seconds, total_count=4320, [att_plot] time=0.13 seconds, total_count=0\r\n[PC] 2020-11-11 17:00:57,037 (trainer:286) INFO: The best model has been updated: valid.loss\r\n[PC] 2020-11-11 17:00:57,039 (trainer:306) INFO: The model files were removed: exp/lm_train_lm_bpe250/17epoch.pth\r\n[PC] 2020-11-11 17:00:57,039 (trainer:184) INFO: 19/20epoch started. Estimated time to finish: 3 minutes and 36.06 seconds\r\n[PC] 2020-11-11 17:01:02,317 (trainer:486) INFO: 19epoch:train:1-375batch: iter_time=0.001, forward_time=0.005, loss=1.242, backward_time=0.005, optim_step_time=2.060e-04, lr_0=0.100, train_time=0.014\r\n[PC] 2020-11-11 17:01:07,523 (trainer:486) INFO: 19epoch:train:376-750batch: iter_time=0.001, forward_time=0.005, loss=1.247, backward_time=0.005, optim_step_time=2.036e-04, lr_0=0.100, train_time=0.014\r\n[PC] 2020-11-11 17:01:12,659 (trainer:486) INFO: 19epoch:train:751-1125batch: iter_time=0.001, forward_time=0.005, loss=1.227, backward_time=0.005, optim_step_time=1.964e-04, lr_0=0.100, train_time=0.013\r\n[PC] 2020-11-11 17:01:17,938 (trainer:486) INFO: 19epoch:train:1126-1500batch: iter_time=0.001, forward_time=0.005, loss=1.243, backward_time=0.005, optim_step_time=2.046e-04, lr_0=0.100, train_time=0.014\r\n[PC] 2020-11-11 17:01:23,157 (trainer:486) INFO: 19epoch:train:1501-1875batch: iter_time=0.001, forward_time=0.005, loss=1.247, backward_time=0.005, optim_step_time=1.961e-04, lr_0=0.100, train_time=0.014\r\n[PC] 2020-11-11 17:01:28,330 (trainer:486) INFO: 19epoch:train:1876-2250batch: iter_time=0.001, forward_time=0.005, loss=1.241, backward_time=0.005, optim_step_time=2.026e-04, lr_0=0.100, train_time=0.014\r\n[PC] 2020-11-11 17:01:33,472 (trainer:486) INFO: 19epoch:train:2251-2625batch: iter_time=0.001, forward_time=0.005, loss=1.240, backward_time=0.005, optim_step_time=2.017e-04, lr_0=0.100, train_time=0.013\r\n[PC] 2020-11-11 17:01:38,589 (trainer:486) INFO: 19epoch:train:2626-3000batch: iter_time=0.001, forward_time=0.005, loss=1.241, backward_time=0.005, optim_step_time=1.977e-04, lr_0=0.100, train_time=0.013\r\n[PC] 2020-11-11 17:01:43,671 (trainer:486) INFO: 19epoch:train:3001-3375batch: iter_time=0.001, forward_time=0.005, loss=1.228, backward_time=0.005, optim_step_time=1.999e-04, lr_0=0.100, train_time=0.013\r\n[PC] 2020-11-11 17:01:48,847 (trainer:486) INFO: 19epoch:train:3376-3750batch: iter_time=0.001, forward_time=0.005, loss=1.242, backward_time=0.005, optim_step_time=1.970e-04, lr_0=0.100, train_time=0.014\r\n[PC] 2020-11-11 17:01:53,895 (trainer:486) INFO: 19epoch:train:3751-4125batch: iter_time=0.001, forward_time=0.005, loss=1.232, backward_time=0.005, optim_step_time=1.986e-04, lr_0=0.100, train_time=0.013\r\n[PC] 2020-11-11 17:01:59,116 (trainer:486) INFO: 19epoch:train:4126-4500batch: iter_time=0.001, forward_time=0.005, loss=1.254, backward_time=0.005, optim_step_time=2.016e-04, lr_0=0.100, train_time=0.014\r\n[PC] 2020-11-11 17:02:04,325 (trainer:486) INFO: 19epoch:train:4501-4875batch: iter_time=0.001, forward_time=0.005, loss=1.264, backward_time=0.005, optim_step_time=2.062e-04, lr_0=0.100, train_time=0.014\r\n[PC] 2020-11-11 17:02:09,640 (trainer:486) INFO: 19epoch:train:4876-5250batch: iter_time=9.867e-04, forward_time=0.005, loss=1.250, backward_time=0.005, optim_step_time=2.069e-04, lr_0=0.100, train_time=0.014\r\n[PC] 2020-11-11 17:02:14,790 (trainer:486) INFO: 19epoch:train:5251-5625batch: iter_time=0.001, forward_time=0.005, loss=1.227, backward_time=0.005, optim_step_time=2.008e-04, lr_0=0.100, train_time=0.013\r\n[PC] 2020-11-11 17:02:19,918 (trainer:486) INFO: 19epoch:train:5626-6000batch: iter_time=9.235e-04, forward_time=0.005, loss=1.225, backward_time=0.005, optim_step_time=2.092e-04, lr_0=0.100, train_time=0.013\r\n[PC] 2020-11-11 17:02:25,192 (trainer:486) INFO: 19epoch:train:6001-6375batch: iter_time=0.001, forward_time=0.005, loss=1.262, backward_time=0.005, optim_step_time=2.031e-04, lr_0=0.100, train_time=0.014\r\n[PC] 2020-11-11 17:02:30,455 (trainer:486) INFO: 19epoch:train:6376-6750batch: iter_time=0.001, forward_time=0.005, loss=1.263, backward_time=0.005, optim_step_time=2.000e-04, lr_0=0.100, train_time=0.014\r\n[PC] 2020-11-11 17:02:35,668 (trainer:486) INFO: 19epoch:train:6751-7125batch: iter_time=0.001, forward_time=0.005, loss=1.229, backward_time=0.005, optim_step_time=2.028e-04, lr_0=0.100, train_time=0.014\r\n[PC] 2020-11-11 17:02:40,909 (trainer:486) INFO: 19epoch:train:7126-7500batch: iter_time=0.001, forward_time=0.005, loss=1.232, backward_time=0.005, optim_step_time=1.999e-04, lr_0=0.100, train_time=0.014\r\n[PC] 2020-11-11 17:02:44,469 (trainer:243) INFO: 19epoch results: [train] iter_time=0.001, forward_time=0.005, loss=1.242, backward_time=0.005, optim_step_time=2.017e-04, lr_0=0.100, train_time=0.014, time=1 minute and 44.15 seconds, total_count=142633, [valid] loss=1.721, time=3.15 seconds, total_count=4560, [att_plot] time=0.13 seconds, total_count=0\r\n[PC] 2020-11-11 17:02:45,038 (trainer:284) INFO: There are no improvements in this epoch\r\n[PC] 2020-11-11 17:02:45,039 (trainer:184) INFO: 20/20epoch started. Estimated time to finish: 1 minute and 48.03 seconds\r\n[PC] 2020-11-11 17:02:50,386 (trainer:486) INFO: 20epoch:train:1-375batch: iter_time=0.001, forward_time=0.005, loss=1.212, backward_time=0.005, optim_step_time=1.999e-04, lr_0=0.100, train_time=0.014\r\n[PC] 2020-11-11 17:02:55,575 (trainer:486) INFO: 20epoch:train:376-750batch: iter_time=0.001, forward_time=0.005, loss=1.211, backward_time=0.005, optim_step_time=1.975e-04, lr_0=0.100, train_time=0.014\r\n[PC] 2020-11-11 17:03:00,664 (trainer:486) INFO: 20epoch:train:751-1125batch: iter_time=0.001, forward_time=0.005, loss=1.207, backward_time=0.005, optim_step_time=1.990e-04, lr_0=0.100, train_time=0.013\r\n[PC] 2020-11-11 17:03:05,744 (trainer:486) INFO: 20epoch:train:1126-1500batch: iter_time=0.001, forward_time=0.005, loss=1.196, backward_time=0.005, optim_step_time=2.068e-04, lr_0=0.100, train_time=0.013\r\n[PC] 2020-11-11 17:03:10,985 (trainer:486) INFO: 20epoch:train:1501-1875batch: iter_time=0.001, forward_time=0.005, loss=1.245, backward_time=0.005, optim_step_time=2.037e-04, lr_0=0.100, train_time=0.014\r\n[PC] 2020-11-11 17:03:16,200 (trainer:486) INFO: 20epoch:train:1876-2250batch: iter_time=0.001, forward_time=0.005, loss=1.234, backward_time=0.005, optim_step_time=1.948e-04, lr_0=0.100, train_time=0.014\r\n[PC] 2020-11-11 17:03:21,254 (trainer:486) INFO: 20epoch:train:2251-2625batch: iter_time=0.001, forward_time=0.005, loss=1.230, backward_time=0.005, optim_step_time=1.971e-04, lr_0=0.100, train_time=0.013\r\n[PC] 2020-11-11 17:03:26,435 (trainer:486) INFO: 20epoch:train:2626-3000batch: iter_time=0.001, forward_time=0.005, loss=1.229, backward_time=0.005, optim_step_time=1.976e-04, lr_0=0.100, train_time=0.014\r\n[PC] 2020-11-11 17:03:31,577 (trainer:486) INFO: 20epoch:train:3001-3375batch: iter_time=0.001, forward_time=0.005, loss=1.231, backward_time=0.005, optim_step_time=1.994e-04, lr_0=0.100, train_time=0.013\r\n[PC] 2020-11-11 17:03:36,733 (trainer:486) INFO: 20epoch:train:3376-3750batch: iter_time=0.001, forward_time=0.005, loss=1.247, backward_time=0.005, optim_step_time=1.985e-04, lr_0=0.100, train_time=0.014\r\n[PC] 2020-11-11 17:03:41,986 (trainer:486) INFO: 20epoch:train:3751-4125batch: iter_time=0.001, forward_time=0.005, loss=1.231, backward_time=0.005, optim_step_time=1.999e-04, lr_0=0.100, train_time=0.014\r\n[PC] 2020-11-11 17:03:47,119 (trainer:486) INFO: 20epoch:train:4126-4500batch: iter_time=0.001, forward_time=0.005, loss=1.231, backward_time=0.005, optim_step_time=2.001e-04, lr_0=0.100, train_time=0.013\r\n[PC] 2020-11-11 17:03:52,250 (trainer:486) INFO: 20epoch:train:4501-4875batch: iter_time=0.001, forward_time=0.005, loss=1.209, backward_time=0.005, optim_step_time=2.004e-04, lr_0=0.100, train_time=0.013\r\n[PC] 2020-11-11 17:03:57,445 (trainer:486) INFO: 20epoch:train:4876-5250batch: iter_time=0.001, forward_time=0.005, loss=1.174, backward_time=0.005, optim_step_time=2.039e-04, lr_0=0.100, train_time=0.014\r\n[PC] 2020-11-11 17:04:02,735 (trainer:486) INFO: 20epoch:train:5251-5625batch: iter_time=0.001, forward_time=0.005, loss=1.238, backward_time=0.005, optim_step_time=2.021e-04, lr_0=0.100, train_time=0.014\r\n[PC] 2020-11-11 17:04:07,919 (trainer:486) INFO: 20epoch:train:5626-6000batch: iter_time=0.001, forward_time=0.005, loss=1.217, backward_time=0.005, optim_step_time=2.040e-04, lr_0=0.100, train_time=0.014\r\n[PC] 2020-11-11 17:04:13,215 (trainer:486) INFO: 20epoch:train:6001-6375batch: iter_time=0.001, forward_time=0.005, loss=1.272, backward_time=0.005, optim_step_time=1.992e-04, lr_0=0.100, train_time=0.014\r\n[PC] 2020-11-11 17:04:18,397 (trainer:486) INFO: 20epoch:train:6376-6750batch: iter_time=9.917e-04, forward_time=0.005, loss=1.221, backward_time=0.005, optim_step_time=2.002e-04, lr_0=0.100, train_time=0.014\r\n[PC] 2020-11-11 17:04:23,593 (trainer:486) INFO: 20epoch:train:6751-7125batch: iter_time=9.734e-04, forward_time=0.005, loss=1.211, backward_time=0.005, optim_step_time=2.018e-04, lr_0=0.100, train_time=0.014\r\n[PC] 2020-11-11 17:04:28,782 (trainer:486) INFO: 20epoch:train:7126-7500batch: iter_time=0.001, forward_time=0.005, loss=1.219, backward_time=0.005, optim_step_time=1.934e-04, lr_0=0.100, train_time=0.014\r\n[PC] 2020-11-11 17:04:32,280 (trainer:243) INFO: 20epoch results: [train] iter_time=0.001, forward_time=0.005, loss=1.223, backward_time=0.005, optim_step_time=2.000e-04, lr_0=0.100, train_time=0.014, time=1 minute and 44.01 seconds, total_count=150140, [valid] loss=1.709, time=3.09 seconds, total_count=4800, [att_plot] time=0.14 seconds, total_count=0\r\n[PC] 2020-11-11 17:04:32,860 (trainer:286) INFO: The best model has been updated: valid.loss\r\n[PC] 2020-11-11 17:04:32,865 (trainer:306) INFO: The model files were removed: exp/lm_train_lm_bpe250/18epoch.pth, exp/lm_train_lm_bpe250/19epoch.pth\r\n[PC] 2020-11-11 17:04:32,865 (trainer:322) INFO: The training was finished at 20 epochs \r\nfree(): invalid pointer\r\n# Accounting: time=2166 threads=1\r\n# Ended (code 134) at Wed Nov 11 17:04:33 CET 2020, elapsed time 2166 seconds\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/espnet/espnet/issues/2675/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/espnet/espnet/issues/2675/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/espnet/espnet/issues/2664", "repository_url": "https://api.github.com/repos/espnet/espnet", "labels_url": "https://api.github.com/repos/espnet/espnet/issues/2664/labels{/name}", "comments_url": "https://api.github.com/repos/espnet/espnet/issues/2664/comments", "events_url": "https://api.github.com/repos/espnet/espnet/issues/2664/events", "html_url": "https://github.com/espnet/espnet/issues/2664", "id": 739493259, "node_id": "MDU6SXNzdWU3Mzk0OTMyNTk=", "number": 2664, "title": "fastspeech2 reduction_fatcor=3 training problem", "user": {"login": "windtoker", "id": 40199561, "node_id": "MDQ6VXNlcjQwMTk5NTYx", "avatar_url": "https://avatars.githubusercontent.com/u/40199561?v=4", "gravatar_id": "", "url": "https://api.github.com/users/windtoker", "html_url": "https://github.com/windtoker", "followers_url": "https://api.github.com/users/windtoker/followers", "following_url": "https://api.github.com/users/windtoker/following{/other_user}", "gists_url": "https://api.github.com/users/windtoker/gists{/gist_id}", "starred_url": "https://api.github.com/users/windtoker/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/windtoker/subscriptions", "organizations_url": "https://api.github.com/users/windtoker/orgs", "repos_url": "https://api.github.com/users/windtoker/repos", "events_url": "https://api.github.com/users/windtoker/events{/privacy}", "received_events_url": "https://api.github.com/users/windtoker/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 777173273, "node_id": "MDU6TGFiZWw3NzcxNzMyNzM=", "url": "https://api.github.com/repos/espnet/espnet/labels/Bug", "name": "Bug", "color": "ee0701", "default": false, "description": "bug should be fixed"}, {"id": 1680978630, "node_id": "MDU6TGFiZWwxNjgwOTc4NjMw", "url": "https://api.github.com/repos/espnet/espnet/labels/TTS", "name": "TTS", "color": "fbca04", "default": false, "description": "Text-to-speech"}, {"id": 1889036170, "node_id": "MDU6TGFiZWwxODg5MDM2MTcw", "url": "https://api.github.com/repos/espnet/espnet/labels/ESPnet2", "name": "ESPnet2", "color": "f2db68", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 10, "created_at": "2020-11-10T01:27:42Z", "updated_at": "2020-11-20T12:27:15Z", "closed_at": "2020-11-20T12:27:15Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "**Describe the bug**\r\nWith custom japanese dataset, I trained tacotron2 with reduction_factor = 3 using espnet2 recipe.\r\nUsing that model, i was trying to train fastspeech2 default config with reduction_factor = 3.\r\n\r\nI extracted durations using inference stage and with that, I ran the script run.sh.\r\nHowever, the error occurred at the stage 5 while extracting pitch and energy stats.\r\nFor more information, I attached the error log below.\r\n\r\nSeems like while the durations got reduced as a consequence of applying reduction_factor = 3, \r\npitches were not synchronized though.\r\n\r\n**Basic environments:**\r\n - OS information:  Linux 4.15.0-112-generic #113-Ubuntu SMP Thu Jul 9 23:41:39 UTC 2020 x86_64\r\n - python version: 3.7.6 (default, Jan  8 2020, 19:59:22)  [GCC 7.3.0]\r\n - espnet version: espnet 0.9.4\r\n - pytorch version pytorch 1.4.0\r\n\r\n**Environments from `torch.utils.collect_env`:**\r\nCollecting environment information...\r\nPyTorch version: 1.4.0\r\nIs debug build: No\r\nCUDA used to build PyTorch: 10.0\r\n\r\nOS: Ubuntu 18.04.4 LTS\r\nGCC version: (Ubuntu 7.5.0-3ubuntu1~18.04) 7.5.0\r\nCMake version: version 3.10.2\r\n\r\nPython version: 3.7\r\nIs CUDA available: Yes\r\nCUDA runtime version: 10.0.130\r\nGPU models and configuration: \r\nGPU 0: GeForce RTX 2080 Ti\r\nGPU 1: GeForce RTX 2080 Ti\r\nGPU 2: GeForce RTX 2080 Ti\r\nGPU 3: GeForce RTX 2080 Ti\r\n\r\nNvidia driver version: 440.100\r\ncuDNN version: /usr/lib/x86_64-linux-gnu/libcudnn.so.7.6.5\r\n\r\nVersions of relevant libraries:\r\n[pip] numpy==1.18.1\r\n[pip] numpydoc==0.9.2\r\n[pip] pytorch-ranger==0.1.1\r\n[pip] pytorch-wpe==0.0.0\r\n[pip] torch==1.4.0\r\n[pip] torch-complex==0.0.3\r\n[pip] torch-optimizer==0.0.1a15\r\n[pip] torchaudio==0.4.0\r\n[pip] warpctc-pytorch==0.2.1\r\n[pip] warprnnt-pytorch==0.1\r\n[conda] _pytorch_select           0.2                       gpu_0  \r\n[conda] blas                      1.0                         mkl  \r\n[conda] mkl                       2020.0                      166  \r\n[conda] mkl-service               2.3.0            py37he904b0f_0  \r\n[conda] mkl_fft                   1.0.15           py37ha843d7b_0  \r\n[conda] mkl_random                1.1.0            py37hd6b4f25_0  \r\n[conda] pytorch                   1.4.0           py3.7_cuda10.0.130_cudnn7.6.3_0    pytorch\r\n[conda] pytorch-ranger            0.1.1                    pypi_0    pypi\r\n[conda] pytorch-wpe               0.0.0                    pypi_0    pypi\r\n[conda] torch                     1.4.0                    pypi_0    pypi\r\n[conda] torch-complex             0.0.3                    pypi_0    pypi\r\n[conda] torch-optimizer           0.0.1a15                 pypi_0    pypi\r\n[conda] torchaudio                0.4.0                    pypi_0    pypi\r\n[conda] warpctc-pytorch           0.2.1                    pypi_0    pypi\r\n[conda] warprnnt-pytorch          0.1                      pypi_0    pypi\r\n\r\n**Task information:**\r\n - Task: TTS\r\n - Recipe: custom dataset\r\n - ESPnet2\r\n\r\n**To Reproduce**\r\nSteps to reproduce the behavior:\r\n- train fastspeech2 with reduction factor=3 config and teacher model as tacotron2 reduction factor =3 \r\n\r\n**Error logs**\r\nPaste the error logs. If applicable, add screenshots to help explain your problem.\r\n\r\nFile \"/espnet2/tts/feats_extract/dio.py\", line 176, in _average_by_duration\r\n    assert d.sum() == len(x), f\"{d.sum()} == {len(x)} error\"\r\nAssertionError: 225 == 677 error\r\nx shape : (202800,)\r\nx shape : (369300,)\r\nx shape : (362100,)\r\nx shape : (347400,)\r\nx shape : (332400,)\r\nx shape : (380700,)\r\nx shape : (430200,)\r\nx shape : (149400,)\r\nx shape : (302100,)\r\nx shape : (240000,)\r\nx shape : (290100,)\r\nx shape : (282000,)\r\nx shape : (354900,)\r\nx shape : (346500,)\r\nx shape : (338100,)\r\nx shape : (384000,)\r\nx shape : (338400,)\r\nx shape : (314400,)\r\nx shape : (319200,)\r\nx shape : (213900,)", "reactions": {"url": "https://api.github.com/repos/espnet/espnet/issues/2664/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/espnet/espnet/issues/2664/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/espnet/espnet/issues/2653", "repository_url": "https://api.github.com/repos/espnet/espnet", "labels_url": "https://api.github.com/repos/espnet/espnet/issues/2653/labels{/name}", "comments_url": "https://api.github.com/repos/espnet/espnet/issues/2653/comments", "events_url": "https://api.github.com/repos/espnet/espnet/issues/2653/events", "html_url": "https://github.com/espnet/espnet/issues/2653", "id": 738487693, "node_id": "MDU6SXNzdWU3Mzg0ODc2OTM=", "number": 2653, "title": "pytorch1.7 issue", "user": {"login": "AdolfVonKleist", "id": 219651, "node_id": "MDQ6VXNlcjIxOTY1MQ==", "avatar_url": "https://avatars.githubusercontent.com/u/219651?v=4", "gravatar_id": "", "url": "https://api.github.com/users/AdolfVonKleist", "html_url": "https://github.com/AdolfVonKleist", "followers_url": "https://api.github.com/users/AdolfVonKleist/followers", "following_url": "https://api.github.com/users/AdolfVonKleist/following{/other_user}", "gists_url": "https://api.github.com/users/AdolfVonKleist/gists{/gist_id}", "starred_url": "https://api.github.com/users/AdolfVonKleist/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/AdolfVonKleist/subscriptions", "organizations_url": "https://api.github.com/users/AdolfVonKleist/orgs", "repos_url": "https://api.github.com/users/AdolfVonKleist/repos", "events_url": "https://api.github.com/users/AdolfVonKleist/events{/privacy}", "received_events_url": "https://api.github.com/users/AdolfVonKleist/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 777173273, "node_id": "MDU6TGFiZWw3NzcxNzMyNzM=", "url": "https://api.github.com/repos/espnet/espnet/labels/Bug", "name": "Bug", "color": "ee0701", "default": false, "description": "bug should be fixed"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-11-08T15:16:41Z", "updated_at": "2020-11-09T07:20:32Z", "closed_at": "2020-11-09T07:20:32Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "This is more of a 'note' than a bug, as I don't think what I am doing is currently supported, nor that it is actually a bug in espnet, but perhaps someone else will run into the same issues at some point, so I thought it could be helpful to share.\r\n\r\nI have been setting up a fully local cuda 10.2 variant of the Dockerfile today, combined with pytorch 1.7.0.\r\nIt is now working [it's probably a bit hacky but I am happy to share it if there is interest], but when I tried to run the an4 eg2 test recipe I ran into another glitch.\r\nThis is the traceback from `run.sh`:\r\n\r\n```Traceback (most recent call last):\r\n  File \"/miniconda/envs/espnet/lib/python3.7/runpy.py\", line 193, in _run_module_as_main\r\n    \"__main__\", mod_spec)\r\n  File \"/miniconda/envs/espnet/lib/python3.7/runpy.py\", line 85, in _run_code\r\n    exec(code, run_globals)\r\n  File \"/espnet/espnet2/bin/asr_train.py\", line 23, in <module>\r\n    main()\r\n  File \"/espnet/espnet2/bin/asr_train.py\", line 19, in main\r\n    ASRTask.main(cmd=cmd)\r\n  File \"/espnet/espnet2/tasks/abs_task.py\", line 941, in main\r\n    cls.main_worker(args)\r\n  File \"/espnet/espnet2/tasks/abs_task.py\", line 1233, in main_worker\r\n    distributed_option=distributed_option,\r\n  File \"/espnet/espnet2/train/trainer.py\", line 210, in run\r\n    options=trainer_options,\r\n  File \"/espnet/espnet2/train/trainer.py\", line 383, in train_one_epoch\r\n    loss, stats, weight = model(**batch)\r\n  File \"/miniconda/envs/espnet/lib/python3.7/site-packages/torch/nn/modules/module.py\", line 727, in _call_impl\r\n    result = self.forward(*input, **kwargs)\r\n  File \"/espnet/espnet2/asr/espnet_model.py\", line 125, in forward\r\n    encoder_out, encoder_out_lens = self.encode(speech, speech_lengths)\r\n  File \"/espnet/espnet2/asr/espnet_model.py\", line 202, in encode\r\n    encoder_out, encoder_out_lens, _ = self.encoder(feats, feats_lengths)\r\n  File \"/miniconda/envs/espnet/lib/python3.7/site-packages/torch/nn/modules/module.py\", line 727, in _call_impl\r\n    result = self.forward(*input, **kwargs)\r\n  File \"/espnet/espnet2/asr/encoder/rnn_encoder.py\", line 108, in forward\r\n    xs_pad, ilens, states = module(xs_pad, ilens, prev_state=prev_state)\r\n  File \"/miniconda/envs/espnet/lib/python3.7/site-packages/torch/nn/modules/module.py\", line 727, in _call_impl\r\n    result = self.forward(*input, **kwargs)\r\n  File \"/espnet/espnet/nets/pytorch_backend/rnn/encoders.py\", line 77, in forward\r\n    xs_pack = pack_padded_sequence(xs_pad, ilens, batch_first=True)\r\n  File \"/miniconda/envs/espnet/lib/python3.7/site-packages/torch/nn/utils/rnn.py\", line 245, in pack_padded_sequence\r\n    _VF._pack_padded_sequence(input, lengths, batch_first)\r\nRuntimeError: 'lengths' argument should be a 1D CPU int64 tensor, but got 1D cuda:0 Long tensor\r\n```\r\n\r\ndigging a bit deeper I found this related pytorch issue:\r\n\r\n- https://github.com/pytorch/pytorch/issues/16542#issue-404589478\r\n\r\nthere is a one-line fix in the related pull request:\r\n\r\n- https://github.com/pytorch/pytorch/pull/16636\r\n\r\nbut it has been stuck for a while in review for what looks like a variety of reasons.  It is possible that there is some other, better way to fix this directly in espnet, or that it is preferred not to, but I found that applying the change suggested in the pull request resolves the issue in training, so for the moment I did not look further.\r\n\r\nTo be totally clear, the issue can be resolved in the container (or patched with the Docker file afterwards) by implementing this change:\r\n\r\n - https://github.com/pytorch/pytorch/pull/16636/files#diff-561e7cb210e877f70a6df844c7eaa13336eb11ccb2d36485fbce36ff28c22425\r\n", "reactions": {"url": "https://api.github.com/repos/espnet/espnet/issues/2653/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/espnet/espnet/issues/2653/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/espnet/espnet/issues/2644", "repository_url": "https://api.github.com/repos/espnet/espnet", "labels_url": "https://api.github.com/repos/espnet/espnet/issues/2644/labels{/name}", "comments_url": "https://api.github.com/repos/espnet/espnet/issues/2644/comments", "events_url": "https://api.github.com/repos/espnet/espnet/issues/2644/events", "html_url": "https://github.com/espnet/espnet/issues/2644", "id": 737732052, "node_id": "MDU6SXNzdWU3Mzc3MzIwNTI=", "number": 2644, "title": "ValueError: assignment destination is read-only", "user": {"login": "yuekaizhang", "id": 28823245, "node_id": "MDQ6VXNlcjI4ODIzMjQ1", "avatar_url": "https://avatars.githubusercontent.com/u/28823245?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yuekaizhang", "html_url": "https://github.com/yuekaizhang", "followers_url": "https://api.github.com/users/yuekaizhang/followers", "following_url": "https://api.github.com/users/yuekaizhang/following{/other_user}", "gists_url": "https://api.github.com/users/yuekaizhang/gists{/gist_id}", "starred_url": "https://api.github.com/users/yuekaizhang/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yuekaizhang/subscriptions", "organizations_url": "https://api.github.com/users/yuekaizhang/orgs", "repos_url": "https://api.github.com/users/yuekaizhang/repos", "events_url": "https://api.github.com/users/yuekaizhang/events{/privacy}", "received_events_url": "https://api.github.com/users/yuekaizhang/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 777173273, "node_id": "MDU6TGFiZWw3NzcxNzMyNzM=", "url": "https://api.github.com/repos/espnet/espnet/labels/Bug", "name": "Bug", "color": "ee0701", "default": false, "description": "bug should be fixed"}, {"id": 777173279, "node_id": "MDU6TGFiZWw3NzcxNzMyNzk=", "url": "https://api.github.com/repos/espnet/espnet/labels/Question", "name": "Question", "color": "cc317c", "default": false, "description": "Question"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2020-11-06T12:46:47Z", "updated_at": "2020-11-12T06:45:15Z", "closed_at": "2020-11-12T06:45:15Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "https://github.com/espnet/espnet/blob/1122ae9abdf8af006d5cc9455d2043f2df3f791a/espnet/transform/spec_augment.py#L64-L89\r\n\r\nI met a bug on line 89. I can't give 0 to the left. It said ValueError: assignment destination is read-only. \r\n\r\nI have to change line 73 to x.copy().\r\n\r\nDoes anyone know the reason?\r\n\r\nThanks.", "reactions": {"url": "https://api.github.com/repos/espnet/espnet/issues/2644/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/espnet/espnet/issues/2644/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/espnet/espnet/issues/2638", "repository_url": "https://api.github.com/repos/espnet/espnet", "labels_url": "https://api.github.com/repos/espnet/espnet/issues/2638/labels{/name}", "comments_url": "https://api.github.com/repos/espnet/espnet/issues/2638/comments", "events_url": "https://api.github.com/repos/espnet/espnet/issues/2638/events", "html_url": "https://github.com/espnet/espnet/issues/2638", "id": 737157133, "node_id": "MDU6SXNzdWU3MzcxNTcxMzM=", "number": 2638, "title": "asr.sh with feats_type \"extracted\"", "user": {"login": "sun-peach", "id": 14579257, "node_id": "MDQ6VXNlcjE0NTc5MjU3", "avatar_url": "https://avatars.githubusercontent.com/u/14579257?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sun-peach", "html_url": "https://github.com/sun-peach", "followers_url": "https://api.github.com/users/sun-peach/followers", "following_url": "https://api.github.com/users/sun-peach/following{/other_user}", "gists_url": "https://api.github.com/users/sun-peach/gists{/gist_id}", "starred_url": "https://api.github.com/users/sun-peach/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sun-peach/subscriptions", "organizations_url": "https://api.github.com/users/sun-peach/orgs", "repos_url": "https://api.github.com/users/sun-peach/repos", "events_url": "https://api.github.com/users/sun-peach/events{/privacy}", "received_events_url": "https://api.github.com/users/sun-peach/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 777173273, "node_id": "MDU6TGFiZWw3NzcxNzMyNzM=", "url": "https://api.github.com/repos/espnet/espnet/labels/Bug", "name": "Bug", "color": "ee0701", "default": false, "description": "bug should be fixed"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2020-11-05T18:09:56Z", "updated_at": "2021-09-27T14:57:08Z", "closed_at": "2021-09-27T14:57:08Z", "author_association": "NONE", "active_lock_reason": null, "body": "**Describe the bug**\r\nwhen the feats_type is \"extracted\", the utils/copy_data_dir.sh always gives errors\r\n\r\n**Basic environments:**\r\n - OS information: Linux 3.10.0-1.3.2.el7.x86_64 #1 SMP Tue Mar 31 06:25:43 UTC 2020 x86_64\r\n - python version: 3.7\r\n - espnet version: espnet 0.8.0\r\n - pytorch version [e.g. pytorch 1.1.0]\r\n\r\n**To Reproduce**\r\nThis is ASR task\r\nFinish feature extraction (feats.scp is ready), get utt2spk, spk2utt and text ready. Use compute-cmvn-stats to compute cmvn (I tried with and without utt2spk)\r\nrun run.sh with --feats_type extracted\r\n\r\n**Error logs**\r\nWhen use utt2spk in cmvn, it shows utt_map not have key ***\uff1b when not use utt2spk in cmvn, it shows spk_map not have key ****.\r\n", "reactions": {"url": "https://api.github.com/repos/espnet/espnet/issues/2638/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/espnet/espnet/issues/2638/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/espnet/espnet/issues/2621", "repository_url": "https://api.github.com/repos/espnet/espnet", "labels_url": "https://api.github.com/repos/espnet/espnet/issues/2621/labels{/name}", "comments_url": "https://api.github.com/repos/espnet/espnet/issues/2621/comments", "events_url": "https://api.github.com/repos/espnet/espnet/issues/2621/events", "html_url": "https://github.com/espnet/espnet/issues/2621", "id": 734924587, "node_id": "MDU6SXNzdWU3MzQ5MjQ1ODc=", "number": 2621, "title": "Arctic/vc1 recipe not working", "user": {"login": "shehrum", "id": 26720660, "node_id": "MDQ6VXNlcjI2NzIwNjYw", "avatar_url": "https://avatars.githubusercontent.com/u/26720660?v=4", "gravatar_id": "", "url": "https://api.github.com/users/shehrum", "html_url": "https://github.com/shehrum", "followers_url": "https://api.github.com/users/shehrum/followers", "following_url": "https://api.github.com/users/shehrum/following{/other_user}", "gists_url": "https://api.github.com/users/shehrum/gists{/gist_id}", "starred_url": "https://api.github.com/users/shehrum/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/shehrum/subscriptions", "organizations_url": "https://api.github.com/users/shehrum/orgs", "repos_url": "https://api.github.com/users/shehrum/repos", "events_url": "https://api.github.com/users/shehrum/events{/privacy}", "received_events_url": "https://api.github.com/users/shehrum/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 777173273, "node_id": "MDU6TGFiZWw3NzcxNzMyNzM=", "url": "https://api.github.com/repos/espnet/espnet/labels/Bug", "name": "Bug", "color": "ee0701", "default": false, "description": "bug should be fixed"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2020-11-03T00:15:34Z", "updated_at": "2020-11-05T11:31:22Z", "closed_at": "2020-11-05T11:31:22Z", "author_association": "NONE", "active_lock_reason": null, "body": "I am trying to run the arctic/vc1 recipe, however, I run into the following error:\r\n\r\n> download_from_google_drive_2.sh: command not found\r\n\r\nI think this is a missing file. \r\n\r\n**Environment information**\r\n```\r\nPyTorch version: 1.4.0\r\nIs debug build: No\r\nCUDA used to build PyTorch: 10.0\r\n\r\nOS: Ubuntu 18.04.5 LTS\r\nGCC version: (Ubuntu 7.5.0-3ubuntu1~18.04) 7.5.0\r\nCMake version: version 3.18.2\r\n\r\nPython version: 3.7\r\nIs CUDA available: Yes\r\nCUDA runtime version: 10.0.130\r\nGPU models and configuration: GPU 0: Tesla K80\r\nNvidia driver version: 450.80.02\r\ncuDNN version: Probably one of the following:\r\n/usr/local/cuda-10.1/targets/x86_64-linux/lib/libcudnn.so.7.6.5\r\n/usr/local/cuda-10.2/targets/x86_64-linux/lib/libcudnn.so.7.6.5\r\n/usr/local/cuda-11.0/targets/x86_64-linux/lib/libcudnn.so.8.0.4\r\n/usr/local/cuda-11.0/targets/x86_64-linux/lib/libcudnn_adv_infer.so.8.0.4\r\n/usr/local/cuda-11.0/targets/x86_64-linux/lib/libcudnn_adv_train.so.8.0.4\r\n/usr/local/cuda-11.0/targets/x86_64-linux/lib/libcudnn_cnn_infer.so.8.0.4\r\n/usr/local/cuda-11.0/targets/x86_64-linux/lib/libcudnn_cnn_train.so.8.0.4\r\n/usr/local/cuda-11.0/targets/x86_64-linux/lib/libcudnn_ops_infer.so.8.0.4\r\n/usr/local/cuda-11.0/targets/x86_64-linux/lib/libcudnn_ops_train.so.8.0.4\r\n\r\nVersions of relevant libraries:\r\n[pip3] numpy==1.19.2\r\n[pip3] pytorch-lamb==1.0.0\r\n[pip3] pytorch-ranger==0.1.1\r\n[pip3] pytorch-wpe==0.0.0\r\n[pip3] torch==1.4.0\r\n[pip3] torch-complex==0.2.0\r\n[pip3] torch-optimizer==0.0.1a16\r\n[pip3] torchaudio==0.4.0\r\n[pip3] torchvision==0.8.1\r\n[pip3] warpctc-pytorch==0.2.1\r\n[pip3] warprnnt-pytorch==0.1\r\n[conda] mkl                       2020.2                      256  \r\n[conda] pytorch                   1.4.0           py3.7_cuda10.0.130_cudnn7.6.3_0    pytorch\r\n[conda] pytorch-lamb              1.0.0                     dev_0    <develop>\r\n[conda] pytorch-ranger            0.1.1                    pypi_0    pypi\r\n[conda] pytorch-wpe               0.0.0                    pypi_0    pypi\r\n[conda] torch-complex             0.2.0                    pypi_0    pypi\r\n[conda] torch-optimizer           0.0.1a16                 pypi_0    pypi\r\n[conda] torchaudio                0.4.0                    pypi_0    pypi\r\n[conda] torchvision               0.8.1                    pypi_0    pypi\r\n[conda] warpctc-pytorch           0.2.1                    pypi_0    pypi\r\n[conda] warprnnt-pytorch          0.1                       dev_0    <develop>\r\n```\r\n\r\n**Task information:**\r\n - Task: [VC1]\r\n - Recipe: [ARCTIC]\r\n - ESPnet1 \r\n\r\n**To Reproduce**\r\nSteps to reproduce the behavior:\r\n1. move to a recipe directory, e.g., `cd egs/arctic/vc1`\r\n2. execute `run.sh` \r\n\r\n**Error logs**\r\n```\r\nstage -1: Data and Pretrained Model Download\r\n--2020-11-03 00:08:32--  http://festvox.org/cmu_arctic/cmu_arctic/packed/cmu_us_clb_arctic-0.95-release.tar.bz2\r\nResolving festvox.org (festvox.org)... 199.4.150.154\r\nConnecting to festvox.org (festvox.org)|199.4.150.154|:80... connected.\r\nHTTP request sent, awaiting response... 200 OK\r\nLength: 130040259 (124M) [application/x-bzip2]\r\nSaving to: 'cmu_us_clb_arctic-0.95-release.tar.bz2'\r\n\r\ncmu_us_clb_arctic-0.95-release.tar.bz2             100%[================================================================================================================>] 124.02M  22.0MB/s    in 12s     \r\n\r\n2020-11-03 00:08:44 (10.7 MB/s) - 'cmu_us_clb_arctic-0.95-release.tar.bz2' saved [130040259/130040259]\r\n\r\nSuccessfully finished download.\r\n--2020-11-03 00:08:58--  http://festvox.org/cmu_arctic/cmu_arctic/packed/cmu_us_slt_arctic-0.95-release.tar.bz2\r\nResolving festvox.org (festvox.org)... 199.4.150.154\r\nConnecting to festvox.org (festvox.org)|199.4.150.154|:80... connected.\r\nHTTP request sent, awaiting response... 200 OK\r\nLength: 119914432 (114M) [application/x-bzip2]\r\nSaving to: 'cmu_us_slt_arctic-0.95-release.tar.bz2'\r\n\r\ncmu_us_slt_arctic-0.95-release.tar.bz2             100%[================================================================================================================>] 114.36M  22.0MB/s    in 10s     \r\n\r\n2020-11-03 00:09:08 (11.3 MB/s) - 'cmu_us_slt_arctic-0.95-release.tar.bz2' saved [119914432/119914432]\r\n\r\nSuccessfully finished download.\r\nlocal/pretrained_model_download.sh: line 31: download_from_google_drive_2.sh: command not found\r\n\r\n```", "reactions": {"url": "https://api.github.com/repos/espnet/espnet/issues/2621/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/espnet/espnet/issues/2621/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/espnet/espnet/issues/2570", "repository_url": "https://api.github.com/repos/espnet/espnet", "labels_url": "https://api.github.com/repos/espnet/espnet/issues/2570/labels{/name}", "comments_url": "https://api.github.com/repos/espnet/espnet/issues/2570/comments", "events_url": "https://api.github.com/repos/espnet/espnet/issues/2570/events", "html_url": "https://github.com/espnet/espnet/issues/2570", "id": 719905181, "node_id": "MDU6SXNzdWU3MTk5MDUxODE=", "number": 2570, "title": "use aishell conformer v2 model\uff0cbut not get any text\uff1f", "user": {"login": "wac81", "id": 5139426, "node_id": "MDQ6VXNlcjUxMzk0MjY=", "avatar_url": "https://avatars.githubusercontent.com/u/5139426?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wac81", "html_url": "https://github.com/wac81", "followers_url": "https://api.github.com/users/wac81/followers", "following_url": "https://api.github.com/users/wac81/following{/other_user}", "gists_url": "https://api.github.com/users/wac81/gists{/gist_id}", "starred_url": "https://api.github.com/users/wac81/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wac81/subscriptions", "organizations_url": "https://api.github.com/users/wac81/orgs", "repos_url": "https://api.github.com/users/wac81/repos", "events_url": "https://api.github.com/users/wac81/events{/privacy}", "received_events_url": "https://api.github.com/users/wac81/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 777173273, "node_id": "MDU6TGFiZWw3NzcxNzMyNzM=", "url": "https://api.github.com/repos/espnet/espnet/labels/Bug", "name": "Bug", "color": "ee0701", "default": false, "description": "bug should be fixed"}, {"id": 1680978730, "node_id": "MDU6TGFiZWwxNjgwOTc4NzMw", "url": "https://api.github.com/repos/espnet/espnet/labels/ASR", "name": "ASR", "color": "3ee0d5", "default": false, "description": "Automatic speech recogntion"}, {"id": 2288028984, "node_id": "MDU6TGFiZWwyMjg4MDI4OTg0", "url": "https://api.github.com/repos/espnet/espnet/labels/ESPnet1", "name": "ESPnet1", "color": "0a68d3", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2020-10-13T06:25:03Z", "updated_at": "2020-10-15T10:51:43Z", "closed_at": "2020-10-15T10:51:43Z", "author_association": "NONE", "active_lock_reason": null, "body": "recog_wav  shell:\r\nwac@waccuda:/data/espnet/egs/aishell/asr1$ recog_wav.sh --cmvn /home/wac/PycharmProjects/espnet_tts/model.v2/data/train_sp/cmvn.ark --lang_model /home/wac/PycharmProjects/espnet_tts/model.v2/exp/train_rnnlm_pytorch_lm/rnnlm.model.best  --recog_model /home/wac/PycharmProjects/espnet_tts/model.v2/exp/train_sp_pytorch_train_pytorch_conformer_kernel15_specaug/results/model.last10.avg.best --decode_config /home/wac/PycharmProjects/espnet_tts/model.v2/conf/decode_lm0.0.yaml /data/audio/data/data_aishell/wav/test/S0906/BAC009S0906W0125.wav\r\n\r\n\r\nstage 0: Data preparation\r\nstage 1: Feature Generation\r\nsteps/make_fbank_pitch.sh --cmd run.pl --nj 1 --write_utt2num_frames true decode/BAC009S0906W0125/data decode/BAC009S0906W0125/log decode/BAC009S0906W0125/fbank\r\nsteps/make_fbank_pitch.sh: moving decode/BAC009S0906W0125/data/feats.scp to decode/BAC009S0906W0125/data/.backup\r\nutils/validate_data_dir.sh: WARNING: you have only one speaker.  This probably a bad idea.\r\n   Search for the word 'bold' in http://kaldi-asr.org/doc/data_prep.html\r\n   for more information.\r\nutils/validate_data_dir.sh: Successfully validated data-directory decode/BAC009S0906W0125/data\r\nsteps/make_fbank_pitch.sh: [info]: no segments file exists: assuming wav.scp indexed by utterance.\r\nsteps/make_fbank_pitch.sh: Succeeded creating filterbank and pitch features for data\r\n/data/espnet/egs/aishell/asr1/../../../utils/dump.sh --cmd run.pl --nj 1 --do_delta false decode/BAC009S0906W0125/data/feats.scp /home/wac/PycharmProjects/espnet_tts/model.v2/data/train_sp/cmvn.ark decode/BAC009S0906W0125/log decode/BAC009S0906W0125/dump\r\nstage 2: Json Data Preparation\r\n/data/espnet/egs/aishell/asr1/../../../utils/data2json.sh --feat decode/BAC009S0906W0125/dump/feats.scp decode/BAC009S0906W0125/data decode/BAC009S0906W0125/dict\r\n/data/espnet/egs/aishell/asr1/../../../utils/feat_to_shape.sh --cmd run.pl --nj 1 --filetype  --preprocess-conf  --verbose 0 decode/BAC009S0906W0125/dump/feats.scp decode/BAC009S0906W0125/data/tmp-h2ViK/input_1/shape.scp\r\nsym2int.pl: replacing X with 1\r\n** Replaced 1 instances of OOVs with 1\r\nstage 3: Decoding\r\n\r\nRecognized text: \r\n\r\nFinished\r\n\r\n\r\n**### and  i  use model.v1(Transformer result (default transformer with initial learning rate = 1.0 and epochs = 50)\r\nmodel link: https://drive.google.com/open?id=1BIQBpLRRy3XSMT5IRxnLcgLMirGzu8dg),  get correct results:**\r\n\r\nstage 0: Data preparation\r\nstage 1: Feature Generation\r\nsteps/make_fbank_pitch.sh --cmd run.pl --nj 1 --write_utt2num_frames true decode/BAC009S0906W0125/data decode/BAC009S0906W0125/log decode/BAC009S0906W0125/fbank\r\nsteps/make_fbank_pitch.sh: moving decode/BAC009S0906W0125/data/feats.scp to decode/BAC009S0906W0125/data/.backup\r\nutils/validate_data_dir.sh: WARNING: you have only one speaker.  This probably a bad idea.\r\n   Search for the word 'bold' in http://kaldi-asr.org/doc/data_prep.html\r\n   for more information.\r\nutils/validate_data_dir.sh: Successfully validated data-directory decode/BAC009S0906W0125/data\r\nsteps/make_fbank_pitch.sh: [info]: no segments file exists: assuming wav.scp indexed by utterance.\r\nsteps/make_fbank_pitch.sh: Succeeded creating filterbank and pitch features for data\r\n/data/espnet/egs/aishell/asr1/../../../utils/dump.sh --cmd run.pl --nj 1 --do_delta false decode/BAC009S0906W0125/data/feats.scp /home/wac/PycharmProjects/espnet_tts/model.v1/data/train_sp/cmvn.ark decode/BAC009S0906W0125/log decode/BAC009S0906W0125/dump\r\nstage 2: Json Data Preparation\r\n/data/espnet/egs/aishell/asr1/../../../utils/data2json.sh --feat decode/BAC009S0906W0125/dump/feats.scp decode/BAC009S0906W0125/data decode/BAC009S0906W0125/dict\r\n/data/espnet/egs/aishell/asr1/../../../utils/feat_to_shape.sh --cmd run.pl --nj 1 --filetype  --preprocess-conf  --verbose 0 decode/BAC009S0906W0125/dump/feats.scp decode/BAC009S0906W0125/data/tmp-4KbGS/input_1/shape.scp\r\nsym2int.pl: replacing X with 1\r\n** Replaced 1 instances of OOVs with 1\r\nstage 3: Decoding\r\n\r\nRecognized text: \u516c\u79ef\u91d1\u677e\u7ed1\u63a5\u68d2\u65bd\u538b\u623f\u4ef7\u4e0b\u8dcc\u52a8\u529b\u8d8b\u7f13\u81f3\u641c\u72d0\u8d22\u7ecf\r\n\r\n\r\n**how can inference with recog_wav.sh and with .py?**\r\n\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/espnet/espnet/issues/2570/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/espnet/espnet/issues/2570/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/espnet/espnet/issues/2543", "repository_url": "https://api.github.com/repos/espnet/espnet", "labels_url": "https://api.github.com/repos/espnet/espnet/issues/2543/labels{/name}", "comments_url": "https://api.github.com/repos/espnet/espnet/issues/2543/comments", "events_url": "https://api.github.com/repos/espnet/espnet/issues/2543/events", "html_url": "https://github.com/espnet/espnet/issues/2543", "id": 712880393, "node_id": "MDU6SXNzdWU3MTI4ODAzOTM=", "number": 2543, "title": "CUDNN_STATUS_EXECUTION_FAILED when using token_type=char", "user": {"login": "gafsd", "id": 62999745, "node_id": "MDQ6VXNlcjYyOTk5NzQ1", "avatar_url": "https://avatars.githubusercontent.com/u/62999745?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gafsd", "html_url": "https://github.com/gafsd", "followers_url": "https://api.github.com/users/gafsd/followers", "following_url": "https://api.github.com/users/gafsd/following{/other_user}", "gists_url": "https://api.github.com/users/gafsd/gists{/gist_id}", "starred_url": "https://api.github.com/users/gafsd/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gafsd/subscriptions", "organizations_url": "https://api.github.com/users/gafsd/orgs", "repos_url": "https://api.github.com/users/gafsd/repos", "events_url": "https://api.github.com/users/gafsd/events{/privacy}", "received_events_url": "https://api.github.com/users/gafsd/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 777173273, "node_id": "MDU6TGFiZWw3NzcxNzMyNzM=", "url": "https://api.github.com/repos/espnet/espnet/labels/Bug", "name": "Bug", "color": "ee0701", "default": false, "description": "bug should be fixed"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2020-10-01T14:09:29Z", "updated_at": "2020-10-01T14:39:33Z", "closed_at": "2020-10-01T14:39:08Z", "author_association": "NONE", "active_lock_reason": null, "body": "**Describe the bug**\r\nI am training tacotron TTS with GST and using token_type=char I got this crash\r\n\r\n**Basic environments:**\r\n - OS information: Linux 936c828f17cb 4.15.0-106-generic #107~16.04.1-Ubuntu SMP\r\n - python version:  3.7.7\r\n - pytorch version 1.6.0\r\n\r\n**Task information:**\r\n - Task: TTS\r\n - Recipe: ljspeech + GST\r\n - ESPnet2 0.9.4\r\n- 1x RTX 2080Ti\r\n- docker pytorch 1.6.0-CUDA 10.1 VM\r\n\r\n**Error logs**\r\n```\r\nTraceback (most recent call last):\r\n  File \"/opt/conda/lib/python3.7/runpy.py\", line 193, in _run_module_as_main\r\n    \"__main__\", mod_spec)\r\n  File \"/opt/conda/lib/python3.7/runpy.py\", line 85, in _run_code\r\n    exec(code, run_globals)\r\n  File \"/root/espnet/espnet2/bin/tts_train.py\", line 22, in <module>\r\n    main()\r\n  File \"/root/espnet/espnet2/bin/tts_train.py\", line 18, in main\r\n    TTSTask.main(cmd=cmd)\r\n  File \"/root/espnet/espnet2/tasks/abs_task.py\", line 941, in main\r\n    cls.main_worker(args)\r\n  File \"/root/espnet/espnet2/tasks/abs_task.py\", line 1233, in main_worker\r\n    distributed_option=distributed_option,\r\n  File \"/root/espnet/espnet2/train/trainer.py\", line 210, in run\r\n    options=trainer_options,\r\n  File \"/root/espnet/espnet2/train/trainer.py\", line 383, in train_one_epoch\r\n    loss, stats, weight = model(**batch)\r\n  File \"/opt/conda/lib/python3.7/site-packages/torch/nn/modules/module.py\", line 722, in _call_impl\r\n    result = self.forward(*input, **kwargs)\r\n  File \"/root/espnet/espnet2/tts/espnet_model.py\", line 109, in forward\r\n    **kwargs,\r\n  File \"/opt/conda/lib/python3.7/site-packages/torch/nn/modules/module.py\", line 722, in _call_impl\r\n    result = self.forward(*input, **kwargs)\r\n  File \"/root/espnet/espnet2/tts/tacotron2.py\", line 303, in forward\r\n    xs, ilens, ys, olens, spembs\r\n  File \"/root/espnet/espnet2/tts/tacotron2.py\", line 358, in _forward\r\n    hs, hlens = self.enc(xs, ilens)\r\n  File \"/opt/conda/lib/python3.7/site-packages/torch/nn/modules/module.py\", line 722, in _call_impl\r\n    result = self.forward(*input, **kwargs)\r\n  File \"/root/espnet/espnet/nets/pytorch_backend/tacotron2/encoder.py\", line 155, in forward\r\n    xs, _ = self.blstm(xs)  # (B, Tmax, C)\r\n  File \"/opt/conda/lib/python3.7/site-packages/torch/nn/modules/module.py\", line 722, in _call_impl\r\n    result = self.forward(*input, **kwargs)\r\n  File \"/opt/conda/lib/python3.7/site-packages/torch/nn/modules/rnn.py\", line 580, in forward\r\n    self.num_layers, self.dropout, self.training, self.bidirectional)\r\nRuntimeError: cuDNN error: CUDNN_STATUS_EXECUTION_FAILED\r\n```\r\n", "reactions": {"url": "https://api.github.com/repos/espnet/espnet/issues/2543/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/espnet/espnet/issues/2543/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/espnet/espnet/issues/2537", "repository_url": "https://api.github.com/repos/espnet/espnet", "labels_url": "https://api.github.com/repos/espnet/espnet/issues/2537/labels{/name}", "comments_url": "https://api.github.com/repos/espnet/espnet/issues/2537/comments", "events_url": "https://api.github.com/repos/espnet/espnet/issues/2537/events", "html_url": "https://github.com/espnet/espnet/issues/2537", "id": 711641637, "node_id": "MDU6SXNzdWU3MTE2NDE2Mzc=", "number": 2537, "title": "The pre-trained model of conformer in librispeech egs can't be correctly uncompressed.", "user": {"login": "JiayiFu", "id": 8230560, "node_id": "MDQ6VXNlcjgyMzA1NjA=", "avatar_url": "https://avatars.githubusercontent.com/u/8230560?v=4", "gravatar_id": "", "url": "https://api.github.com/users/JiayiFu", "html_url": "https://github.com/JiayiFu", "followers_url": "https://api.github.com/users/JiayiFu/followers", "following_url": "https://api.github.com/users/JiayiFu/following{/other_user}", "gists_url": "https://api.github.com/users/JiayiFu/gists{/gist_id}", "starred_url": "https://api.github.com/users/JiayiFu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/JiayiFu/subscriptions", "organizations_url": "https://api.github.com/users/JiayiFu/orgs", "repos_url": "https://api.github.com/users/JiayiFu/repos", "events_url": "https://api.github.com/users/JiayiFu/events{/privacy}", "received_events_url": "https://api.github.com/users/JiayiFu/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 777173273, "node_id": "MDU6TGFiZWw3NzcxNzMyNzM=", "url": "https://api.github.com/repos/espnet/espnet/labels/Bug", "name": "Bug", "color": "ee0701", "default": false, "description": "bug should be fixed"}, {"id": 1680978730, "node_id": "MDU6TGFiZWwxNjgwOTc4NzMw", "url": "https://api.github.com/repos/espnet/espnet/labels/ASR", "name": "ASR", "color": "3ee0d5", "default": false, "description": "Automatic speech recogntion"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2020-09-30T05:24:33Z", "updated_at": "2020-10-04T15:31:09Z", "closed_at": "2020-10-04T15:31:09Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi all, \r\n  I try to download the pre-trained conformer model from the [link](https://drive.google.com/drive/folders/1GFaqEKsI6M_dBbxHD7s84J3yi5WGeNNC?usp=sharing) in the [page](https://github.com/espnet/espnet/blob/master/egs/librispeech/asr1/RESULTS.md). But the downloaded file can't be uncompressed correctly.\r\n  The error logs are:\r\n ```\r\n  tar zxvf model.tar.gz\r\n  conf/tuning/conformer/train_pytorch_conformer_large.yaml\r\n  conf/decode.yaml\r\n  data/train_960/cmvn.ark\r\n  exp/train_960_pytorch_train_pytorch_conformer_large_specaug/results/model.val5.avg.best\r\n  gzip: stdin: invalid compressed data--format violated\r\n  tar: Unexpected EOF in archive\r\n  tar: Unexpected EOF in archive\r\n  tar: Error is not recoverable: exiting now\r\n```", "reactions": {"url": "https://api.github.com/repos/espnet/espnet/issues/2537/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/espnet/espnet/issues/2537/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/espnet/espnet/issues/2526", "repository_url": "https://api.github.com/repos/espnet/espnet", "labels_url": "https://api.github.com/repos/espnet/espnet/issues/2526/labels{/name}", "comments_url": "https://api.github.com/repos/espnet/espnet/issues/2526/comments", "events_url": "https://api.github.com/repos/espnet/espnet/issues/2526/events", "html_url": "https://github.com/espnet/espnet/issues/2526", "id": 710040273, "node_id": "MDU6SXNzdWU3MTAwNDAyNzM=", "number": 2526, "title": "CTC Segmentation Questions", "user": {"login": "s920128", "id": 6919165, "node_id": "MDQ6VXNlcjY5MTkxNjU=", "avatar_url": "https://avatars.githubusercontent.com/u/6919165?v=4", "gravatar_id": "", "url": "https://api.github.com/users/s920128", "html_url": "https://github.com/s920128", "followers_url": "https://api.github.com/users/s920128/followers", "following_url": "https://api.github.com/users/s920128/following{/other_user}", "gists_url": "https://api.github.com/users/s920128/gists{/gist_id}", "starred_url": "https://api.github.com/users/s920128/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/s920128/subscriptions", "organizations_url": "https://api.github.com/users/s920128/orgs", "repos_url": "https://api.github.com/users/s920128/repos", "events_url": "https://api.github.com/users/s920128/events{/privacy}", "received_events_url": "https://api.github.com/users/s920128/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 777173273, "node_id": "MDU6TGFiZWw3NzcxNzMyNzM=", "url": "https://api.github.com/repos/espnet/espnet/labels/Bug", "name": "Bug", "color": "ee0701", "default": false, "description": "bug should be fixed"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 12, "created_at": "2020-09-28T08:00:16Z", "updated_at": "2020-10-12T11:51:15Z", "closed_at": "2020-09-29T21:15:57Z", "author_association": "NONE", "active_lock_reason": null, "body": "I try to modify tedlium2/align1  CTCsegment example to another example like egs/aishell\r\nbut report error as following\r\nI have no idea to solve this index error.\r\n\r\n```2020-09-28 01:37:54,391 (asr_align:208) INFO: Decoding device=cuda\r\n2020-09-28 01:38:09,148 (asr_align:245) INFO: (1/14326) Aligning BAC009S0724W0121\r\n2020-09-28 01:38:10,293 (ctc_segmentation:66) INFO: CTC segmentation of 19 chars to 4.20s audio (105 indices).\r\n2020-09-28 01:38:10,296 (ctc_segmentation:140) WARNING: IndexError: Backtracking was not successful, the window size might be too small.\r\n2020-09-28 01:38:10,296 (ctc_segmentation:145) WARNING: Increasing the window size to: 16000\r\n2020-09-28 01:38:10,298 (ctc_segmentation:140) WARNING: IndexError: Backtracking was not successful, the window size might be too small.\r\n2020-09-28 01:38:10,299 (ctc_segmentation:145) WARNING: Increasing the window size to: 32000\r\n2020-09-28 01:38:10,301 (ctc_segmentation:140) WARNING: IndexError: Backtracking was not successful, the window size might be too small.\r\n2020-09-28 01:38:10,301 (ctc_segmentation:145) WARNING: Increasing the window size to: 64000\r\n2020-09-28 01:38:10,303 (ctc_segmentation:140) WARNING: IndexError: Backtracking was not successful, the window size might be too small.\r\n2020-09-28 01:38:10,303 (ctc_segmentation:148) ERROR: Maximum window size reached.\r\n2020-09-28 01:38:10,304 (ctc_segmentation:149) ERROR: Check data and character list!\r\nTraceback (most recent call last):\r\n  File \"/mnt/nas2/*****/espnet/tools/venv/lib/python3.7/runpy.py\", line 193, in _run_module_as_main\r\n    \"__main__\", mod_spec)\r\n  File \"/mnt/nas2/*****/espnet/tools/venv/lib/python3.7/runpy.py\", line 85, in _run_code\r\n    exec(code, run_globals)\r\n  File \"/mnt/nas2/*****/espnet/espnet/bin/asr_align.py\", line 277, in <module>\r\n    main(sys.argv[1:])\r\n  File \"/mnt/nas2/*****/espnet/espnet/bin/asr_align.py\", line 180, in main\r\n    ctc_align(args, device)\r\n  File \"/mnt/nas2/*****/espnet/espnet/bin/asr_align.py\", line 260, in ctc_align\r\n    config, lpz, ground_truth_mat\r\n  File \"/mnt/nas2/*****/espnet/tools/venv/lib/python3.7/site-packages/ctc_segmentation/ctc_segmentation.py\", line 119, in ctc_segmentation\r\n    est_stay_prob = table[t, c] - table[t - 1, c]\r\nIndexError: index -106 is out of bounds for axis 0 with size 105 \r\n```\r\n\r\n\r\nI try to run original tedlium2/align1 CTCsegment example.\r\nAnother question when stage 3: Alignments using CTC segmentation it cost a lot of memory. (run on  tedlium2/align1, align_set is test)\r\nIt will out of memory when I use gpu(TITAN RTX)\r\nI try to use cpu run stage 3, it cost over 200G RAM, and out of memory too. \r\nIf reduce test set to only 1 utt  stage 3 will success.\r\nHow can I Alignments all align_set ?\r\n\r\nThanks you!\r\n", "reactions": {"url": "https://api.github.com/repos/espnet/espnet/issues/2526/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/espnet/espnet/issues/2526/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/espnet/espnet/issues/2508", "repository_url": "https://api.github.com/repos/espnet/espnet", "labels_url": "https://api.github.com/repos/espnet/espnet/issues/2508/labels{/name}", "comments_url": "https://api.github.com/repos/espnet/espnet/issues/2508/comments", "events_url": "https://api.github.com/repos/espnet/espnet/issues/2508/events", "html_url": "https://github.com/espnet/espnet/issues/2508", "id": 707124736, "node_id": "MDU6SXNzdWU3MDcxMjQ3MzY=", "number": 2508, "title": "Docker build error", "user": {"login": "muramasa2", "id": 39404775, "node_id": "MDQ6VXNlcjM5NDA0Nzc1", "avatar_url": "https://avatars.githubusercontent.com/u/39404775?v=4", "gravatar_id": "", "url": "https://api.github.com/users/muramasa2", "html_url": "https://github.com/muramasa2", "followers_url": "https://api.github.com/users/muramasa2/followers", "following_url": "https://api.github.com/users/muramasa2/following{/other_user}", "gists_url": "https://api.github.com/users/muramasa2/gists{/gist_id}", "starred_url": "https://api.github.com/users/muramasa2/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/muramasa2/subscriptions", "organizations_url": "https://api.github.com/users/muramasa2/orgs", "repos_url": "https://api.github.com/users/muramasa2/repos", "events_url": "https://api.github.com/users/muramasa2/events{/privacy}", "received_events_url": "https://api.github.com/users/muramasa2/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 777173273, "node_id": "MDU6TGFiZWw3NzcxNzMyNzM=", "url": "https://api.github.com/repos/espnet/espnet/labels/Bug", "name": "Bug", "color": "ee0701", "default": false, "description": "bug should be fixed"}], "state": "closed", "locked": false, "assignee": {"login": "Fhrozen", "id": 11988996, "node_id": "MDQ6VXNlcjExOTg4OTk2", "avatar_url": "https://avatars.githubusercontent.com/u/11988996?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Fhrozen", "html_url": "https://github.com/Fhrozen", "followers_url": "https://api.github.com/users/Fhrozen/followers", "following_url": "https://api.github.com/users/Fhrozen/following{/other_user}", "gists_url": "https://api.github.com/users/Fhrozen/gists{/gist_id}", "starred_url": "https://api.github.com/users/Fhrozen/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Fhrozen/subscriptions", "organizations_url": "https://api.github.com/users/Fhrozen/orgs", "repos_url": "https://api.github.com/users/Fhrozen/repos", "events_url": "https://api.github.com/users/Fhrozen/events{/privacy}", "received_events_url": "https://api.github.com/users/Fhrozen/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "Fhrozen", "id": 11988996, "node_id": "MDQ6VXNlcjExOTg4OTk2", "avatar_url": "https://avatars.githubusercontent.com/u/11988996?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Fhrozen", "html_url": "https://github.com/Fhrozen", "followers_url": "https://api.github.com/users/Fhrozen/followers", "following_url": "https://api.github.com/users/Fhrozen/following{/other_user}", "gists_url": "https://api.github.com/users/Fhrozen/gists{/gist_id}", "starred_url": "https://api.github.com/users/Fhrozen/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Fhrozen/subscriptions", "organizations_url": "https://api.github.com/users/Fhrozen/orgs", "repos_url": "https://api.github.com/users/Fhrozen/repos", "events_url": "https://api.github.com/users/Fhrozen/events{/privacy}", "received_events_url": "https://api.github.com/users/Fhrozen/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 15, "created_at": "2020-09-23T07:36:54Z", "updated_at": "2020-09-25T08:40:11Z", "closed_at": "2020-09-24T16:19:26Z", "author_association": "NONE", "active_lock_reason": null, "body": "# error content\r\n I got the error while building docker image\r\nI run these commands.\r\n- command\r\n```\r\ncd docker\r\n./build.sh fully_local cpu\r\n```\r\nbut the error was occared.\r\n- the error sentence\r\n```\r\nStep 14/16 : RUN if [ -z \"$( nvcc -V )\" ]; then         echo \"Build without CUDA\" &&         MY_OPTS=\"CUPY_VERSION=\";     else         echo \"Build with CUDA\" &&         export CFLAGS=\"-I${CUDA_HOME}/include ${CFLAGS}\" &&         MY_OPTS=\"CUDA_VERSION=${CUDA_VER}\" &&         sed -i 's|_install.py|_install.py --no-cuda|g' Makefile &&         sed -i 's|which nvidia-smi|which nvcc|g' Makefile;      fi;     if [ \"${CUDA_VER}\" = \"10.1\" ]; then         MY_OPTS=\"${MY_OPTS} TH_VERSION=1.3.1\";      fi;     echo \"Make with options ${MY_OPTS}\";     make KALDI=/kaldi ${MY_OPTS}\r\n ---> Running in 59da3674b2df\r\n/bin/sh: 1: nvcc: not found\r\nBuild without CUDA\r\nMake with options CUPY_VERSION=\r\nexpr: syntax error\r\ntest -f kaldi/egs/wsj/s5/utils/parse_options.sh || { echo -e \"Error: Put Kaldi here!\\n    $ ln -s <kaldi-root> kaldi\"; exit 1; }\r\n-e Error: Put Kaldi here!\r\n    $ ln -s <kaldi-root> kaldi\r\nMakefile:65: recipe for target 'kaldi' failed\r\nmake: *** [kaldi] Error 1\r\nThe command '/bin/sh -c if [ -z \"$( nvcc -V )\" ]; then         echo \"Build without CUDA\" &&         MY_OPTS=\"CUPY_VERSION=\";     else         echo \"Build with CUDA\" &&         export CFLAGS=\"-I${CUDA_HOME}/include ${CFLAGS}\" &&         MY_OPTS=\"CUDA_VERSION=${CUDA_VER}\" &&         sed -i 's|_install.py|_install.py --no-cuda|g' Makefile &&         sed -i 's|which nvidia-smi|which nvcc|g' Makefile;      fi;     if [ \"${CUDA_VER}\" = \"10.1\" ]; then         MY_OPTS=\"${MY_OPTS} TH_VERSION=1.3.1\";      fi;     echo \"Make with options ${MY_OPTS}\";     make KALDI=/kaldi ${MY_OPTS}' returned a non-zero code: 2\r\n```\r\n\r\n# My environment:\r\nOS: macOS Catalina. (I also tried on Ubuntu18.04, but the error was also happend.)\r\n\r\n# I followed the error message, but other error occared.\r\nI tried to add the command to Dokcerfile, but other error occard.\r\n- added the command to `docker/prebuilt/local/Dockerfile`\r\n```\r\nRUN ln -s /kaldi kaldi\r\n```\r\n\r\n- another error\r\n```\r\nStep 15/17 : RUN if [ -z \"$( nvcc -V )\" ]; then         echo \"Build without CUDA\" &&         MY_OPTS=\"CUPY_VERSION=\";     else         echo \"Build with CUDA\" &&         export CFLAGS=\"-I${CUDA_HOME}/include ${CFLAGS}\" &&         MY_OPTS=\"CUDA_VERSION=${CUDA_VER}\" &&         sed -i 's|_install.py|_install.py --no-cuda|g' Makefile &&         sed -i 's|which nvidia-smi|which nvcc|g' Makefile;      fi;     if [ \"${CUDA_VER}\" = \"10.1\" ]; then         MY_OPTS=\"${MY_OPTS} TH_VERSION=1.3.1\";      fi;     echo \"Make with options ${MY_OPTS}\";     make KALDI=/kaldi ${MY_OPTS}\r\n ---> Running in fabc99f97da5\r\nBuild without CUDA\r\nMake with options CUPY_VERSION=\r\n/bin/sh: 1: nvcc: not found\r\nexpr: syntax error\r\ntest -f activate_python.sh || { echo \"Error: Run ./setup_python.sh or ./setup_anaconda.sh\"; exit 1; }\r\nError: Run ./setup_python.sh or ./setup_anaconda.sh\r\nMakefile:68: recipe for target 'activate_python.sh' failed\r\nmake: *** [activate_python.sh] Error 1\r\nThe command '/bin/sh -c if [ -z \"$( nvcc -V )\" ]; then         echo \"Build without CUDA\" &&         MY_OPTS=\"CUPY_VERSION=\";     else         echo \"Build with CUDA\" &&         export CFLAGS=\"-I${CUDA_HOME}/include ${CFLAGS}\" &&         MY_OPTS=\"CUDA_VERSION=${CUDA_VER}\" &&         sed -i 's|_install.py|_install.py --no-cuda|g' Makefile &&         sed -i 's|which nvidia-smi|which nvcc|g' Makefile;      fi;     if [ \"${CUDA_VER}\" = \"10.1\" ]; then         MY_OPTS=\"${MY_OPTS} TH_VERSION=1.3.1\";      fi;     echo \"Make with options ${MY_OPTS}\";     make KALDI=/kaldi ${MY_OPTS}' returned a non-zero code: 2\r\n```\r\nAfter that, I tried to fix more following the error message, but error was still existed.\r\n\r\n- added the command to `docker/prebuilt/local/Dockerfile`\r\n```\r\nRUN ./setup_python.sh $(which python3)\r\n```\r\n\r\n- another error\r\n```\r\nStep 15/18 : RUN ./setup_python.sh $(which python3)\r\n ---> Running in 83f7d133da5d\r\n/usr/bin/pip3 doesn't exist.\r\nThe command '/bin/sh -c ./setup_python.sh $(which python3)' returned a non-zero code: 1\r\n```\r\n# I tried to fix and build was successed but installing ESPNet was imcomplete\r\n\r\n- added the command to `docker/prebuilt/local/Dockerfile`\r\n```\r\nRUN ./setup_anaconda.sh\r\n```\r\n\r\nAfter that, building images is sccessed with no error.\r\nbut there are not all of content in ESPNet\r\ne.g. espnet/espnet, espnet/utils and espnet/egs etc. are not existed.\r\n\r\n```\r\nls espnet\r\n```\r\n```\r\nCONTRIBUTING.md  README.md  doc   espnet.egg-info  setup.cfg  test_utils\r\nLICENSE          ci         egs2  espnet2          setup.py   tools\r\n```\r\n\r\n\r\n**If someone knows how to fix it, please advice me.**", "reactions": {"url": "https://api.github.com/repos/espnet/espnet/issues/2508/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/espnet/espnet/issues/2508/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/espnet/espnet/issues/2505", "repository_url": "https://api.github.com/repos/espnet/espnet", "labels_url": "https://api.github.com/repos/espnet/espnet/issues/2505/labels{/name}", "comments_url": "https://api.github.com/repos/espnet/espnet/issues/2505/comments", "events_url": "https://api.github.com/repos/espnet/espnet/issues/2505/events", "html_url": "https://github.com/espnet/espnet/issues/2505", "id": 705161206, "node_id": "MDU6SXNzdWU3MDUxNjEyMDY=", "number": 2505, "title": "Can't reproduce results using conformer model using different code versions", "user": {"login": "alucassch", "id": 7053802, "node_id": "MDQ6VXNlcjcwNTM4MDI=", "avatar_url": "https://avatars.githubusercontent.com/u/7053802?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alucassch", "html_url": "https://github.com/alucassch", "followers_url": "https://api.github.com/users/alucassch/followers", "following_url": "https://api.github.com/users/alucassch/following{/other_user}", "gists_url": "https://api.github.com/users/alucassch/gists{/gist_id}", "starred_url": "https://api.github.com/users/alucassch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alucassch/subscriptions", "organizations_url": "https://api.github.com/users/alucassch/orgs", "repos_url": "https://api.github.com/users/alucassch/repos", "events_url": "https://api.github.com/users/alucassch/events{/privacy}", "received_events_url": "https://api.github.com/users/alucassch/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 777173273, "node_id": "MDU6TGFiZWw3NzcxNzMyNzM=", "url": "https://api.github.com/repos/espnet/espnet/labels/Bug", "name": "Bug", "color": "ee0701", "default": false, "description": "bug should be fixed"}, {"id": 1680978730, "node_id": "MDU6TGFiZWwxNjgwOTc4NzMw", "url": "https://api.github.com/repos/espnet/espnet/labels/ASR", "name": "ASR", "color": "3ee0d5", "default": false, "description": "Automatic speech recogntion"}, {"id": 2288028984, "node_id": "MDU6TGFiZWwyMjg4MDI4OTg0", "url": "https://api.github.com/repos/espnet/espnet/labels/ESPnet1", "name": "ESPnet1", "color": "0a68d3", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2020-09-20T18:35:57Z", "updated_at": "2020-09-21T23:03:10Z", "closed_at": "2020-09-21T23:03:09Z", "author_association": "NONE", "active_lock_reason": null, "body": "**Describe the bug**\r\nI trained a conformer model with espnet1 commit tag v0.9.1 with my own data and tests and got pretty good results as expected.\r\nAfter update to v0.9.3 the results got a lot worse. I could check that I can reproduce the results until the commit 4345515d95bb21ab09c159cff469f60f6d255123 where the results should be like\r\n\r\n### WER\r\n|dataset|Snt|Wrd|Corr|Sub|Del|Ins|Err|S.Err|\r\n|---|---|---|---|---|---|---|---|---|\r\n|decode_all_model.last10.avg.best_decode_lm|700|7197|96.9|2.8|0.4|0.9|4.0|27.1|\r\n### CER\r\n|dataset|Snt|Wrd|Corr|Sub|Del|Ins|Err|S.Err|\r\n|---|---|---|---|---|---|---|---|---|\r\n|decode_all_model.last10.avg.best_decode_lm|700|41860|99.3|0.4|0.3|0.4|1.1|27.1|\r\n### TER\r\n|dataset|Snt|Wrd|Corr|Sub|Del|Ins|Err|S.Err|\r\n|---|---|---|---|---|---|---|---|---|\r\n|decode_all_model.last10.avg.best_decode_lm|700|10006|96.7|2.5|0.8|0.5|3.8|27.1|\r\n\r\nAn example of two hypothesis of the same utterance\r\nscore: -0.71    hyp: \u2581pesquisa\u2581\u00e9\u2581uma\u2581coisa\u2581que\u2581muda\u2581toda\u2581hora\r\nscore: -2.58    hyp: \u2581pesquisa\u2581\u00e9\u2581uma\u2581coisa\u2581que\u2581muda\u2581toda\u2581a\u2581hora\r\n\r\nwhich is in fact the ground truth.\r\n\r\nwhen I change to commit b26563316320f31e21b2ae2f5c6567128ed33db7 and I tested some others until 27b1d17b84ff59ac7d854113f7903b4995357a94, this is what happens\r\n\r\n### WER\r\n|dataset|Snt|Wrd|Corr|Sub|Del|Ins|Err|S.Err|\r\n|---|---|---|---|---|---|---|---|---|\r\n|decode_all_model.last10.avg.best_decode_lm|700|7197|18.9|57.2|23.9|9.2|90.3|99.9|\r\n### CER\r\n|dataset|Snt|Wrd|Corr|Sub|Del|Ins|Err|S.Err|\r\n|---|---|---|---|---|---|---|---|---|\r\n|decode_all_model.last10.avg.best_decode_lm|700|41860|47.4|21.1|31.5|8.5|61.1|99.9|\r\n### TER\r\n|dataset|Snt|Wrd|Corr|Sub|Del|Ins|Err|S.Err|\r\n|---|---|---|---|---|---|---|---|---|\r\n|decode_all_model.last10.avg.best_decode_lm|700|10006|20.7|71.2|8.1|27.7|107.0|99.9|\r\n\r\nThe same first examples. The only thing that changed is the commit version\r\nscore: -18.83   hyp: \u2581\u00e9\u2581uma\u2581coisa\u2581aqutoda\r\nscore: -21.01   hyp: \u2581\u00e9\u2581uma\u2581coisa\u2581que\u2581mutatoda\r\n\r\nand saw that there is a new option to train the conformer model \"transformer_encoder_activation_type\" and the default is the Swish class. Even if it is not set in the model.json is the default option in  e2e_asr_conformer\r\n            \"--transformer-encoder-activation-type\",\r\n            type=str,\r\n            default=\"swish\"\r\n\r\nSetting manually in model.json, didn't fix it.\r\n\r\nHowever, if I change transformer-encoder-activation-type to \"relu\"  in model.json, the results using b26563316320f31e21b2ae2f5c6567128ed33db7 or 27b1d17b84ff59ac7d854113f7903b4995357a94 are:\r\n\r\n### WER\r\n|dataset|Snt|Wrd|Corr|Sub|Del|Ins|Err|S.Err|\r\n|---|---|---|---|---|---|---|---|---|\r\n|decode_all_model.last10.avg.best_decode_lm|700|7197|95.6|3.5|0.9|0.9|5.3|33.6|\r\n### CER\r\n|dataset|Snt|Wrd|Corr|Sub|Del|Ins|Err|S.Err|\r\n|---|---|---|---|---|---|---|---|---|\r\n|decode_all_model.last10.avg.best_decode_lm|700|41860|98.8|0.6|0.6|0.4|1.6|33.6|\r\n### TER\r\n|dataset|Snt|Wrd|Corr|Sub|Del|Ins|Err|S.Err|\r\n|---|---|---|---|---|---|---|---|---|\r\n|decode_all_model.last10.avg.best_decode_lm|700|10006|94.9|3.3|1.7|0.4|5.4|33.6|\r\n\r\nWhich doesn't make any sense to me because the default should be another activation function than relu as the original training process and also the results are different than the original.\r\n\r\n**Basic environments:**\r\n - python version: `3.7.3 (default, Mar 27 2019, 22:11:17)  [GCC 7.3.0]`\r\n- espnet version: `espnet 0.9.x`\r\n- pytorch version: `pytorch 1.4.0`\r\n\r\nI'm still trying to figure out if I see some change in the middle of the whole process but didn't find anything. I don't want to train the whole model again right now because it's a very large dataset and it would take a whole week.\r\n\r\nThanks for the amazing work!", "reactions": {"url": "https://api.github.com/repos/espnet/espnet/issues/2505/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/espnet/espnet/issues/2505/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/espnet/espnet/issues/2485", "repository_url": "https://api.github.com/repos/espnet/espnet", "labels_url": "https://api.github.com/repos/espnet/espnet/issues/2485/labels{/name}", "comments_url": "https://api.github.com/repos/espnet/espnet/issues/2485/comments", "events_url": "https://api.github.com/repos/espnet/espnet/issues/2485/events", "html_url": "https://github.com/espnet/espnet/issues/2485", "id": 702724564, "node_id": "MDU6SXNzdWU3MDI3MjQ1NjQ=", "number": 2485, "title": "wrong parameter for tar -d", "user": {"login": "dqqcasia", "id": 11674297, "node_id": "MDQ6VXNlcjExNjc0Mjk3", "avatar_url": "https://avatars.githubusercontent.com/u/11674297?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dqqcasia", "html_url": "https://github.com/dqqcasia", "followers_url": "https://api.github.com/users/dqqcasia/followers", "following_url": "https://api.github.com/users/dqqcasia/following{/other_user}", "gists_url": "https://api.github.com/users/dqqcasia/gists{/gist_id}", "starred_url": "https://api.github.com/users/dqqcasia/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dqqcasia/subscriptions", "organizations_url": "https://api.github.com/users/dqqcasia/orgs", "repos_url": "https://api.github.com/users/dqqcasia/repos", "events_url": "https://api.github.com/users/dqqcasia/events{/privacy}", "received_events_url": "https://api.github.com/users/dqqcasia/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 777173273, "node_id": "MDU6TGFiZWw3NzcxNzMyNzM=", "url": "https://api.github.com/repos/espnet/espnet/labels/Bug", "name": "Bug", "color": "ee0701", "default": false, "description": "bug should be fixed"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2020-09-16T12:30:57Z", "updated_at": "2020-10-02T05:12:33Z", "closed_at": "2020-10-02T05:12:33Z", "author_association": "NONE", "active_lock_reason": null, "body": "stage -1: Data Download\r\nespnet/data/MUSTC_v1.0/MUSTC_v1.0_en-de.tar.gz exists and appears to be complete.\r\ntar: You may not specify more than one '-Acdtrux', '--delete' or  '--test-label' option\r\nTry 'tar --help' or 'tar --usage' for more information.\r\nlocal/download_and_untar.sh: error un-tarring archive espnet/data/MUSTC_v1.0/MUSTC_v1.0_en-de.tar.gz", "reactions": {"url": "https://api.github.com/repos/espnet/espnet/issues/2485/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/espnet/espnet/issues/2485/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/espnet/espnet/issues/2483", "repository_url": "https://api.github.com/repos/espnet/espnet", "labels_url": "https://api.github.com/repos/espnet/espnet/issues/2483/labels{/name}", "comments_url": "https://api.github.com/repos/espnet/espnet/issues/2483/comments", "events_url": "https://api.github.com/repos/espnet/espnet/issues/2483/events", "html_url": "https://github.com/espnet/espnet/issues/2483", "id": 702428281, "node_id": "MDU6SXNzdWU3MDI0MjgyODE=", "number": 2483, "title": "Sometimes IndexError is happened in BatchBeamSearch of ESPnet2 ", "user": {"login": "kan-bayashi", "id": 22779813, "node_id": "MDQ6VXNlcjIyNzc5ODEz", "avatar_url": "https://avatars.githubusercontent.com/u/22779813?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kan-bayashi", "html_url": "https://github.com/kan-bayashi", "followers_url": "https://api.github.com/users/kan-bayashi/followers", "following_url": "https://api.github.com/users/kan-bayashi/following{/other_user}", "gists_url": "https://api.github.com/users/kan-bayashi/gists{/gist_id}", "starred_url": "https://api.github.com/users/kan-bayashi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kan-bayashi/subscriptions", "organizations_url": "https://api.github.com/users/kan-bayashi/orgs", "repos_url": "https://api.github.com/users/kan-bayashi/repos", "events_url": "https://api.github.com/users/kan-bayashi/events{/privacy}", "received_events_url": "https://api.github.com/users/kan-bayashi/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 777173273, "node_id": "MDU6TGFiZWw3NzcxNzMyNzM=", "url": "https://api.github.com/repos/espnet/espnet/labels/Bug", "name": "Bug", "color": "ee0701", "default": false, "description": "bug should be fixed"}, {"id": 1680978730, "node_id": "MDU6TGFiZWwxNjgwOTc4NzMw", "url": "https://api.github.com/repos/espnet/espnet/labels/ASR", "name": "ASR", "color": "3ee0d5", "default": false, "description": "Automatic speech recogntion"}, {"id": 1889036170, "node_id": "MDU6TGFiZWwxODg5MDM2MTcw", "url": "https://api.github.com/repos/espnet/espnet/labels/ESPnet2", "name": "ESPnet2", "color": "f2db68", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": {"login": "ShigekiKarita", "id": 6745326, "node_id": "MDQ6VXNlcjY3NDUzMjY=", "avatar_url": "https://avatars.githubusercontent.com/u/6745326?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ShigekiKarita", "html_url": "https://github.com/ShigekiKarita", "followers_url": "https://api.github.com/users/ShigekiKarita/followers", "following_url": "https://api.github.com/users/ShigekiKarita/following{/other_user}", "gists_url": "https://api.github.com/users/ShigekiKarita/gists{/gist_id}", "starred_url": "https://api.github.com/users/ShigekiKarita/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ShigekiKarita/subscriptions", "organizations_url": "https://api.github.com/users/ShigekiKarita/orgs", "repos_url": "https://api.github.com/users/ShigekiKarita/repos", "events_url": "https://api.github.com/users/ShigekiKarita/events{/privacy}", "received_events_url": "https://api.github.com/users/ShigekiKarita/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ShigekiKarita", "id": 6745326, "node_id": "MDQ6VXNlcjY3NDUzMjY=", "avatar_url": "https://avatars.githubusercontent.com/u/6745326?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ShigekiKarita", "html_url": "https://github.com/ShigekiKarita", "followers_url": "https://api.github.com/users/ShigekiKarita/followers", "following_url": "https://api.github.com/users/ShigekiKarita/following{/other_user}", "gists_url": "https://api.github.com/users/ShigekiKarita/gists{/gist_id}", "starred_url": "https://api.github.com/users/ShigekiKarita/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ShigekiKarita/subscriptions", "organizations_url": "https://api.github.com/users/ShigekiKarita/orgs", "repos_url": "https://api.github.com/users/ShigekiKarita/repos", "events_url": "https://api.github.com/users/ShigekiKarita/events{/privacy}", "received_events_url": "https://api.github.com/users/ShigekiKarita/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 11, "created_at": "2020-09-16T03:59:07Z", "updated_at": "2020-10-23T12:32:11Z", "closed_at": "2020-09-16T10:31:33Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "**Describe the bug**\r\nSometimes IndexError is happend in BatchBeamSearch of ESPnet2 during decoding.\r\n\r\n**Basic environments:**\r\n- OS information: Linux 3.10.0-1062.9.1.el7.x86_64 #1 SMP Mon Dec 2 08:31:54 EST 2019 x86_64\r\n- python version: `3.7.3 (default, Mar 27 2019, 22:11:17)  [GCC 7.3.0]`\r\n- espnet version: `espnet 0.8.0`\r\n- pytorch version: `pytorch 1.5.1`\r\n- Git hash: `bdf0fde7252ef371879c708ca1d9e465eec6d442`\r\n  - Commit date: `Sun Sep 13 22:53:12 2020 +0900`\r\n\r\n**Environments from `torch.utils.collect_env`:**\r\n\r\n```\r\nPyTorch version: 1.5.1\r\nIs debug build: No\r\nCUDA used to build PyTorch: 10.1\r\n\r\nOS: Red Hat Enterprise Linux Server release 7.7 (Maipo)\r\nGCC version: (GCC) 8.4.0\r\nCMake version: version 3.17.3\r\n\r\nPython version: 3.7\r\nIs CUDA available: Yes\r\nCUDA runtime version: 10.2.89\r\nGPU models and configuration:\r\nGPU 0: Tesla V100-PCIE-32GB\r\nGPU 1: Tesla V100-PCIE-32GB\r\n\r\nNvidia driver version: 440.64.00\r\ncuDNN version: Could not collect\r\n\r\nVersions of relevant libraries:\r\n[pip3] numpy==1.18.5\r\n[pip3] pytorch-ranger==0.1.1\r\n[pip3] pytorch-wpe==0.0.0\r\n[pip3] torch==1.5.1\r\n[pip3] torch-complex==0.1.0\r\n[pip3] torch-optimizer==0.0.1a14\r\n[pip3] warprnnt-pytorch==0.1\r\n[conda] blas                      1.0                         mkl\r\n[conda] mkl                       2020.1                      217\r\n[conda] mkl-service               2.3.0            py37he904b0f_0\r\n[conda] mkl_fft                   1.1.0            py37h23d657b_0\r\n[conda] mkl_random                1.1.1            py37h0573a6f_0\r\n[conda] pytorch                   1.5.1           py3.7_cuda10.1.243_cudnn7.6.3_0    pytorch\r\n[conda] pytorch-ranger            0.1.1                    pypi_0    pypi\r\n[conda] pytorch-wpe               0.0.0                    pypi_0    pypi\r\n[conda] torch-complex             0.1.0                    pypi_0    pypi\r\n[conda] torch-optimizer           0.0.1a14                 pypi_0    pypi\r\n[conda] warprnnt-pytorch          0.1                      pypi_0    pypi\r\n```\r\n\r\n**Task information:**\r\n - Task: ASR\r\n - Recipe: CSJ\r\n - ESPnet2\r\n\r\n**To Reproduce**\r\nSteps to reproduce the behavior:\r\n\r\n1. Run decoding state `./run.sh --stage 11`\r\n\r\n**Error logs**\r\n\r\n```\r\n# python3 -m espnet2.bin.asr_inference --ngpu 0 --data_path_and_name_and_type dump/raw/eval1/wav.scp,speech,sound --key_file exp/asr_train_asr_transformer_raw_char_sp/decode_asr_lm_lm_train_lm_char_valid.loss.ave_asr_model_valid.acc.best/eval1/logdir/keys.10.scp --asr_train_config exp/asr_train_asr_transformer_raw_char_sp/config.yaml --asr_model_file exp/asr_train_asr_transformer_raw_char_sp/valid.acc.best.pth --output_dir exp/asr_train_asr_transformer_raw_char_sp/decode_asr_lm_lm_train_lm_char_valid.loss.ave_asr_model_valid.acc.best/eval1/logdir/output.10 --config conf/decode_asr.yaml --lm_train_config exp/lm_train_lm_char/config.yaml --lm_file exp/lm_train_lm_char/valid.loss.ave.pth \r\n# Started at Wed Sep 16 11:49:54 JST 2020\r\n#\r\n/home/z43614a/work/espnet/tools/venv/bin/python3 /home/z43614a/work/espnet/espnet2/bin/asr_inference.py --ngpu 0 --data_path_and_name_and_type dump/raw/eval1/wav.scp,speech,sound --key_file exp/asr_train_asr_transformer_raw_char_sp/decode_asr_lm_lm_train_lm_char_valid.loss.ave_asr_model_valid.acc.best/eval1/logdir/keys.10.scp --asr_train_config exp/asr_train_asr_transformer_raw_char_sp/config.yaml --asr_model_file exp/asr_train_asr_transformer_raw_char_sp/valid.acc.best.pth --output_dir exp/asr_train_asr_transformer_raw_char_sp/decode_asr_lm_lm_train_lm_char_valid.loss.ave_asr_model_valid.acc.best/eval1/logdir/output.10 --config conf/decode_asr.yaml --lm_train_config exp/lm_train_lm_char/config.yaml --lm_file exp/lm_train_lm_char/valid.loss.ave.pth\r\n2020-09-16 11:51:07,297 (asr:281) INFO: Vocabulary size: 3262\r\n2020-09-16 11:51:11,029 (lm:198) INFO: Vocabulary size: 3262\r\n2020-09-16 11:51:11,260 (asr_inference:119) INFO: BatchBeamSearch implementation is selected.\r\n2020-09-16 11:51:11,265 (asr_inference:129) INFO: Beam_search: BatchBeamSearch(\r\n  (nn_dict): ModuleDict(\r\n    (decoder): TransformerDecoder(\r\n      (embed): Sequential(\r\n        (0): Embedding(3262, 512)\r\n        (1): PositionalEncoding(\r\n          (dropout): Dropout(p=0.1, inplace=False)\r\n        )\r\n      )\r\n      (after_norm): LayerNorm((512,), eps=1e-12, elementwise_affine=True)\r\n      (output_layer): Linear(in_features=512, out_features=3262, bias=True)\r\n      (decoders): MultiSequential(\r\n        (0): DecoderLayer(\r\n          (self_attn): MultiHeadedAttention(\r\n            (linear_q): Linear(in_features=512, out_features=512, bias=True)\r\n            (linear_k): Linear(in_features=512, out_features=512, bias=True)\r\n            (linear_v): Linear(in_features=512, out_features=512, bias=True)\r\n            (linear_out): Linear(in_features=512, out_features=512, bias=True)\r\n            (dropout): Dropout(p=0.1, inplace=False)\r\n          )\r\n          (src_attn): MultiHeadedAttention(\r\n            (linear_q): Linear(in_features=512, out_features=512, bias=True)\r\n            (linear_k): Linear(in_features=512, out_features=512, bias=True)\r\n            (linear_v): Linear(in_features=512, out_features=512, bias=True)\r\n            (linear_out): Linear(in_features=512, out_features=512, bias=True)\r\n            (dropout): Dropout(p=0.1, inplace=False)\r\n          )\r\n          (feed_forward): PositionwiseFeedForward(\r\n            (w_1): Linear(in_features=512, out_features=2048, bias=True)\r\n            (w_2): Linear(in_features=2048, out_features=512, bias=True)\r\n            (dropout): Dropout(p=0.1, inplace=False)\r\n            (activation): ReLU()\r\n          )\r\n          (norm1): LayerNorm((512,), eps=1e-12, elementwise_affine=True)\r\n          (norm2): LayerNorm((512,), eps=1e-12, elementwise_affine=True)\r\n          (norm3): LayerNorm((512,), eps=1e-12, elementwise_affine=True)\r\n          (dropout): Dropout(p=0.1, inplace=False)\r\n        )\r\n        (1): DecoderLayer(\r\n          (self_attn): MultiHeadedAttention(\r\n            (linear_q): Linear(in_features=512, out_features=512, bias=True)\r\n            (linear_k): Linear(in_features=512, out_features=512, bias=True)\r\n            (linear_v): Linear(in_features=512, out_features=512, bias=True)\r\n            (linear_out): Linear(in_features=512, out_features=512, bias=True)\r\n            (dropout): Dropout(p=0.1, inplace=False)\r\n          )\r\n          (src_attn): MultiHeadedAttention(\r\n            (linear_q): Linear(in_features=512, out_features=512, bias=True)\r\n            (linear_k): Linear(in_features=512, out_features=512, bias=True)\r\n            (linear_v): Linear(in_features=512, out_features=512, bias=True)\r\n            (linear_out): Linear(in_features=512, out_features=512, bias=True)\r\n            (dropout): Dropout(p=0.1, inplace=False)\r\n          )\r\n          (feed_forward): PositionwiseFeedForward(\r\n            (w_1): Linear(in_features=512, out_features=2048, bias=True)\r\n            (w_2): Linear(in_features=2048, out_features=512, bias=True)\r\n            (dropout): Dropout(p=0.1, inplace=False)\r\n            (activation): ReLU()\r\n          )\r\n          (norm1): LayerNorm((512,), eps=1e-12, elementwise_affine=True)\r\n          (norm2): LayerNorm((512,), eps=1e-12, elementwise_affine=True)\r\n          (norm3): LayerNorm((512,), eps=1e-12, elementwise_affine=True)\r\n          (dropout): Dropout(p=0.1, inplace=False)\r\n        )\r\n        (2): DecoderLayer(\r\n          (self_attn): MultiHeadedAttention(\r\n            (linear_q): Linear(in_features=512, out_features=512, bias=True)\r\n            (linear_k): Linear(in_features=512, out_features=512, bias=True)\r\n            (linear_v): Linear(in_features=512, out_features=512, bias=True)\r\n            (linear_out): Linear(in_features=512, out_features=512, bias=True)\r\n            (dropout): Dropout(p=0.1, inplace=False)\r\n          )\r\n          (src_attn): MultiHeadedAttention(\r\n            (linear_q): Linear(in_features=512, out_features=512, bias=True)\r\n            (linear_k): Linear(in_features=512, out_features=512, bias=True)\r\n            (linear_v): Linear(in_features=512, out_features=512, bias=True)\r\n            (linear_out): Linear(in_features=512, out_features=512, bias=True)\r\n            (dropout): Dropout(p=0.1, inplace=False)\r\n          )\r\n          (feed_forward): PositionwiseFeedForward(\r\n            (w_1): Linear(in_features=512, out_features=2048, bias=True)\r\n            (w_2): Linear(in_features=2048, out_features=512, bias=True)\r\n            (dropout): Dropout(p=0.1, inplace=False)\r\n            (activation): ReLU()\r\n          )\r\n          (norm1): LayerNorm((512,), eps=1e-12, elementwise_affine=True)\r\n          (norm2): LayerNorm((512,), eps=1e-12, elementwise_affine=True)\r\n          (norm3): LayerNorm((512,), eps=1e-12, elementwise_affine=True)\r\n          (dropout): Dropout(p=0.1, inplace=False)\r\n        )\r\n        (3): DecoderLayer(\r\n          (self_attn): MultiHeadedAttention(\r\n            (linear_q): Linear(in_features=512, out_features=512, bias=True)\r\n            (linear_k): Linear(in_features=512, out_features=512, bias=True)\r\n            (linear_v): Linear(in_features=512, out_features=512, bias=True)\r\n            (linear_out): Linear(in_features=512, out_features=512, bias=True)\r\n            (dropout): Dropout(p=0.1, inplace=False)\r\n          )\r\n          (src_attn): MultiHeadedAttention(\r\n            (linear_q): Linear(in_features=512, out_features=512, bias=True)\r\n            (linear_k): Linear(in_features=512, out_features=512, bias=True)\r\n            (linear_v): Linear(in_features=512, out_features=512, bias=True)\r\n            (linear_out): Linear(in_features=512, out_features=512, bias=True)\r\n            (dropout): Dropout(p=0.1, inplace=False)\r\n          )\r\n          (feed_forward): PositionwiseFeedForward(\r\n            (w_1): Linear(in_features=512, out_features=2048, bias=True)\r\n            (w_2): Linear(in_features=2048, out_features=512, bias=True)\r\n            (dropout): Dropout(p=0.1, inplace=False)\r\n            (activation): ReLU()\r\n          )\r\n          (norm1): LayerNorm((512,), eps=1e-12, elementwise_affine=True)\r\n          (norm2): LayerNorm((512,), eps=1e-12, elementwise_affine=True)\r\n          (norm3): LayerNorm((512,), eps=1e-12, elementwise_affine=True)\r\n          (dropout): Dropout(p=0.1, inplace=False)\r\n        )\r\n        (4): DecoderLayer(\r\n          (self_attn): MultiHeadedAttention(\r\n            (linear_q): Linear(in_features=512, out_features=512, bias=True)\r\n            (linear_k): Linear(in_features=512, out_features=512, bias=True)\r\n            (linear_v): Linear(in_features=512, out_features=512, bias=True)\r\n            (linear_out): Linear(in_features=512, out_features=512, bias=True)\r\n            (dropout): Dropout(p=0.1, inplace=False)\r\n          )\r\n          (src_attn): MultiHeadedAttention(\r\n            (linear_q): Linear(in_features=512, out_features=512, bias=True)\r\n            (linear_k): Linear(in_features=512, out_features=512, bias=True)\r\n            (linear_v): Linear(in_features=512, out_features=512, bias=True)\r\n            (linear_out): Linear(in_features=512, out_features=512, bias=True)\r\n            (dropout): Dropout(p=0.1, inplace=False)\r\n          )\r\n          (feed_forward): PositionwiseFeedForward(\r\n            (w_1): Linear(in_features=512, out_features=2048, bias=True)\r\n            (w_2): Linear(in_features=2048, out_features=512, bias=True)\r\n            (dropout): Dropout(p=0.1, inplace=False)\r\n            (activation): ReLU()\r\n          )\r\n          (norm1): LayerNorm((512,), eps=1e-12, elementwise_affine=True)\r\n          (norm2): LayerNorm((512,), eps=1e-12, elementwise_affine=True)\r\n          (norm3): LayerNorm((512,), eps=1e-12, elementwise_affine=True)\r\n          (dropout): Dropout(p=0.1, inplace=False)\r\n        )\r\n        (5): DecoderLayer(\r\n          (self_attn): MultiHeadedAttention(\r\n            (linear_q): Linear(in_features=512, out_features=512, bias=True)\r\n            (linear_k): Linear(in_features=512, out_features=512, bias=True)\r\n            (linear_v): Linear(in_features=512, out_features=512, bias=True)\r\n            (linear_out): Linear(in_features=512, out_features=512, bias=True)\r\n            (dropout): Dropout(p=0.1, inplace=False)\r\n          )\r\n          (src_attn): MultiHeadedAttention(\r\n            (linear_q): Linear(in_features=512, out_features=512, bias=True)\r\n            (linear_k): Linear(in_features=512, out_features=512, bias=True)\r\n            (linear_v): Linear(in_features=512, out_features=512, bias=True)\r\n            (linear_out): Linear(in_features=512, out_features=512, bias=True)\r\n            (dropout): Dropout(p=0.1, inplace=False)\r\n          )\r\n          (feed_forward): PositionwiseFeedForward(\r\n            (w_1): Linear(in_features=512, out_features=2048, bias=True)\r\n            (w_2): Linear(in_features=2048, out_features=512, bias=True)\r\n            (dropout): Dropout(p=0.1, inplace=False)\r\n            (activation): ReLU()\r\n          )\r\n          (norm1): LayerNorm((512,), eps=1e-12, elementwise_affine=True)\r\n          (norm2): LayerNorm((512,), eps=1e-12, elementwise_affine=True)\r\n          (norm3): LayerNorm((512,), eps=1e-12, elementwise_affine=True)\r\n          (dropout): Dropout(p=0.1, inplace=False)\r\n        )\r\n      )\r\n    )\r\n    (lm): SequentialRNNLM(\r\n      (drop): Dropout(p=0.0, inplace=False)\r\n      (encoder): Embedding(3262, 650, padding_idx=0)\r\n      (rnn): LSTM(650, 650, num_layers=2, batch_first=True)\r\n      (decoder): Linear(in_features=650, out_features=3262, bias=True)\r\n    )\r\n  )\r\n)\r\n2020-09-16 11:51:11,265 (asr_inference:130) INFO: Decoding device=cpu, dtype=float32\r\n2020-09-16 11:51:11,322 (asr_inference:148) INFO: Text tokenizer: CharTokenizer(space_symbol=\"<space>\"non_linguistic_symbols=\"set()\")\r\n2020-09-16 11:51:13,432 (beam_search:358) INFO: decoder input length: 156\r\n2020-09-16 11:51:13,433 (beam_search:359) INFO: max output length: 156\r\n2020-09-16 11:51:13,433 (beam_search:360) INFO: min output length: 0\r\n/opt/conda/conda-bld/pytorch_1591914880026/work/torch/csrc/utils/python_arg_parser.cpp:756: UserWarning: This overload of nonzero is deprecated:\r\n\tnonzero(Tensor input, *, Tensor out)\r\nConsider using one of the following signatures instead:\r\n\tnonzero(Tensor input, *, bool as_tuple)\r\n2020-09-16 11:51:36,910 (beam_search:372) INFO: end detected at 65\r\n2020-09-16 11:51:36,911 (beam_search:397) INFO:  -5.10 * 0.7 =  -3.57 for decoder\r\n2020-09-16 11:51:36,911 (beam_search:397) INFO:  -6.90 * 0.3 =  -2.07 for ctc\r\n2020-09-16 11:51:36,911 (beam_search:397) INFO: -154.84 * 0.3 = -46.45 for lm\r\n2020-09-16 11:51:36,911 (beam_search:399) INFO: total log probability: -52.09\r\n2020-09-16 11:51:36,911 (beam_search:400) INFO: normalized log probability: -0.85\r\n2020-09-16 11:51:36,911 (beam_search:401) INFO: total number of ended hypotheses: 79\r\n2020-09-16 11:51:36,911 (beam_search:406) INFO: best hypo: \u540c\u3058\u5236\u5fa1\u3067\u69cb\u6587\u89e3\u6790\u304c\u3067\u304d\u308b\u3068\u3067\u3053\u306e\u5834\u5408\u91cd\u8981\u306a\u306e\u306f\u3053\u306e\u30a2\u30eb\u30b4\u30ea\u30ba\u30e0\u304c\u30aa\u30fc\u30c8\u30de\u30c8\u30f3\u306e\u5177\u4f53\u5f62\u306b\u4f9d\u5b58\u3057\u306a\u3044\u3068\u3044\u3046\u70b9\u306b\u3054\u3056\u3044\u307e\u3059\r\n\r\n2020-09-16 11:51:38,032 (beam_search:358) INFO: decoder input length: 222\r\n2020-09-16 11:51:38,033 (beam_search:359) INFO: max output length: 222\r\n2020-09-16 11:51:38,033 (beam_search:360) INFO: min output length: 0\r\n2020-09-16 11:52:25,634 (beam_search:372) INFO: end detected at 101\r\n2020-09-16 11:52:25,635 (beam_search:397) INFO:  -9.83 * 0.7 =  -6.88 for decoder\r\n2020-09-16 11:52:25,636 (beam_search:397) INFO: -11.97 * 0.3 =  -3.59 for ctc\r\n2020-09-16 11:52:25,636 (beam_search:397) INFO: -201.95 * 0.3 = -60.59 for lm\r\n2020-09-16 11:52:25,636 (beam_search:399) INFO: total log probability: -71.06\r\n2020-09-16 11:52:25,636 (beam_search:400) INFO: normalized log probability: -0.74\r\n2020-09-16 11:52:25,636 (beam_search:401) INFO: total number of ended hypotheses: 81\r\n2020-09-16 11:52:25,636 (beam_search:406) INFO: best hypo: \u3067\u3053\u306e\u3088\u3046\u306a\u6587\u6cd5\u5f62\u5f0f\u306b\u304a\u3044\u3066\u3058\u3083\u3069\u3046\u3044\u3046\u98a8\u306a\u8a00\u8a9e\u3092\u8868\u73fe\u3067\u304d\u308b\u306e\u304b\u3068\u3044\u3046\u3053\u3068\u3092\u307e\u7c21\u5358\u306b\u307e\u3068\u3081\u3068\u304d\u307e\u3059\u3068\u4f8b\u3048\u3070\u3048\u30fc\u3063\u3068\u307e\u30fc\u30b3\u30f3\u30c6\u30ad\u30b9\u30c8\u30d5\u30a3\u30fc\u30e9\u30f3\u30b2\u30fc\u30b8\u3067\u3059\u306d\u307e\u30d8\u30c3\u30c9\u306e\u6982\u5ff5\u306f\u3048\u30fc\u3068\u5fc5\u8981\u306a\u3093\u3067\u3059\u304c\r\n\r\n2020-09-16 11:52:26,598 (beam_search:358) INFO: decoder input length: 209\r\n2020-09-16 11:52:26,598 (beam_search:359) INFO: max output length: 209\r\n2020-09-16 11:52:26,598 (beam_search:360) INFO: min output length: 0\r\n2020-09-16 11:53:02,819 (beam_search:372) INFO: end detected at 80\r\n2020-09-16 11:53:02,820 (beam_search:397) INFO: -12.95 * 0.7 =  -9.07 for decoder\r\n2020-09-16 11:53:02,820 (beam_search:397) INFO: -18.95 * 0.3 =  -5.68 for ctc\r\n2020-09-16 11:53:02,820 (beam_search:397) INFO: -214.31 * 0.3 = -64.29 for lm\r\n2020-09-16 11:53:02,820 (beam_search:399) INFO: total log probability: -79.05\r\n2020-09-16 11:53:02,820 (beam_search:400) INFO: normalized log probability: -1.07\r\n2020-09-16 11:53:02,820 (beam_search:401) INFO: total number of ended hypotheses: 69\r\n2020-09-16 11:53:02,821 (beam_search:406) INFO: best hypo: \u305d\u3046\u3044\u3063\u305f\u3082\u306e\u306f\u5b9f\u306f\u5148\u306e\u30b9\u30d1\u30a4\u30f3\u306b\u6cbf\u3063\u3066\u69d8\u5b50\u30c4\u30ea\u30fc\u3092\u5206\u89e3\u3057\u307e\u3059\u3068\u3048\u30fc\u3063\u3068\u751f\u8d77\u8a00\u8a9e\u3092\u4f5c\u308b\u3053\u3068\u304c\u5206\u304b\u308a\u307e\u3059\u306e\u3067\u6709\u9650\u72b6\u614b\u3092\u30c8\u30de\u30c8\u30f3\u306b\u8868\u73fe\u3067\u304d\u308b\u3042\u308b\u3044\u306f\r\n\r\n2020-09-16 11:53:03,856 (beam_search:358) INFO: decoder input length: 230\r\n2020-09-16 11:53:03,856 (beam_search:359) INFO: max output length: 230\r\n2020-09-16 11:53:03,856 (beam_search:360) INFO: min output length: 0\r\n2020-09-16 11:53:58,540 (beam_search:372) INFO: end detected at 113\r\n2020-09-16 11:53:58,541 (beam_search:397) INFO: -18.32 * 0.7 = -12.83 for decoder\r\n2020-09-16 11:53:58,541 (beam_search:397) INFO: -39.31 * 0.3 = -11.79 for ctc\r\n2020-09-16 11:53:58,541 (beam_search:397) INFO: -293.19 * 0.3 = -87.96 for lm\r\n2020-09-16 11:53:58,541 (beam_search:399) INFO: total log probability: -112.58\r\n2020-09-16 11:53:58,542 (beam_search:400) INFO: normalized log probability: -1.05\r\n2020-09-16 11:53:58,542 (beam_search:401) INFO: total number of ended hypotheses: 74\r\n2020-09-16 11:53:58,542 (beam_search:406) INFO: best hypo: \u3048\u3063\u3068\u307e\u30af\u30ea\u30a2\u30fc\u30b8\u30e7\u30cb\u30f3\u30b0\u30e9\u30f3\u30b2\u30fc\u30b8\u3067\u3059\u306d\u3053\u308c\u306f\u30b9\u30d1\u30a4\u306b\u3088\u3063\u3066\u5206\u89e3\u3057\u307e\u3059\u3068\u69d8\u5b50\u30c4\u30ea\u30fc\u306e\u63a8\u5b9a\u5909\u6570\u3068\u3044\u3046\u306e\u304c\u3042\u30fc\u306e\u6587\u8108\u81ea\u7531\u8a00\u8a9e\u306a\u3059\u3068\u3044\u3046\u3053\u3068\u304c\u77e5\u3089\u308c\u3066\u3044\u307e\u3059\u306e\u3067\u3053\u3046\u4e0b\u306e\u30aa\u30fc\u30c8\u30de\u30c8\u30f3\u3067\u8868\u73fe\u304c\u3067\u304d\u308b\u3068\u3044\u3046\u7279\u5fb4\u304c\u3042\u308a\u307e\u3059\r\n\r\n2020-09-16 11:53:58,932 (beam_search:358) INFO: decoder input length: 81\r\n2020-09-16 11:53:58,932 (beam_search:359) INFO: max output length: 81\r\n2020-09-16 11:53:58,932 (beam_search:360) INFO: min output length: 0\r\n2020-09-16 11:54:10,401 (beam_search:372) INFO: end detected at 53\r\n2020-09-16 11:54:10,402 (beam_search:397) INFO:  -9.26 * 0.7 =  -6.48 for decoder\r\n2020-09-16 11:54:10,402 (beam_search:397) INFO: -17.02 * 0.3 =  -5.10 for ctc\r\n2020-09-16 11:54:10,402 (beam_search:397) INFO: -132.29 * 0.3 = -39.69 for lm\r\n2020-09-16 11:54:10,402 (beam_search:399) INFO: total log probability: -51.28\r\n2020-09-16 11:54:10,402 (beam_search:400) INFO: normalized log probability: -1.09\r\n2020-09-16 11:54:10,402 (beam_search:401) INFO: total number of ended hypotheses: 78\r\n2020-09-16 11:54:10,403 (beam_search:406) INFO: best hypo: \u30aa\u30fc\u30c8\u30de\u30c8\u30f3\u306e\u30af\u30e9\u30b9\u304c\u3088\u304f\u4e0b\u304c\u3063\u3066\u3044\u308b\u306e\u306f\u30c4\u30ea\u30fc\u3092\u5bfe\u6bd4\u3057\u3066\u308b\u65b9\u306f\u30af\u30e9\u30b9\u30a4\u30c3\u30af\u4e0b\u304c\u308b\u8a33\u3067\u3059\u306d\r\n\r\n2020-09-16 11:54:11,404 (beam_search:358) INFO: decoder input length: 235\r\n2020-09-16 11:54:11,404 (beam_search:359) INFO: max output length: 235\r\n2020-09-16 11:54:11,404 (beam_search:360) INFO: min output length: 0\r\n2020-09-16 11:54:59,835 (beam_search:372) INFO: end detected at 108\r\n2020-09-16 11:54:59,836 (beam_search:397) INFO: -15.15 * 0.7 = -10.60 for decoder\r\n2020-09-16 11:54:59,836 (beam_search:397) INFO: -21.38 * 0.3 =  -6.42 for ctc\r\n2020-09-16 11:54:59,836 (beam_search:397) INFO: -248.58 * 0.3 = -74.57 for lm\r\n2020-09-16 11:54:59,836 (beam_search:399) INFO: total log probability: -91.59\r\n2020-09-16 11:54:59,836 (beam_search:400) INFO: normalized log probability: -0.91\r\n2020-09-16 11:54:59,836 (beam_search:401) INFO: total number of ended hypotheses: 85\r\n2020-09-16 11:54:59,837 (beam_search:406) INFO: best hypo: \u3067\u3048\u3063\u3068\u30fc\u307e\u305d\u3046\u3044\u3046\u98a8\u306a\u7279\u5fb4\u304c\u3042\u3063\u3066\u3048\u30fc\u3068\u3093\u6587\u8108\u4f9d\u5b58\u8a00\u8a9e\u307e\u3067\u3082\u3048\u30fc\u3068\u8868\u73fe\u3067\u304d\u308b\u3068\u3044\u3046\u7279\u5fb4\u304c\u3042\u308a\u307e\u3059\u3067\u3053\u3053\u3067\u5f8c\u3053\u308c\u30d7\u30e9\u30c3\u30ab\u30fc\u306b\u610f\u5473\u304c\u3042\u308b\u304b\u3068\u304b\u3088\u304f\u5206\u304b\u3093\u306a\u3044\u3093\u3067\u3059\u3051\u3069\u30aa\u30fc\u30c8\u30de\u30c8\u30f3\u304c\u5358\u8a9e\u3068\u306b\u53ef\u5909\u3067\u3059\u306e\u3067\r\n\r\n2020-09-16 11:54:59,973 (beam_search:358) INFO: decoder input length: 19\r\n2020-09-16 11:54:59,973 (beam_search:359) INFO: max output length: 19\r\n2020-09-16 11:54:59,973 (beam_search:360) INFO: min output length: 0\r\n2020-09-16 11:55:01,277 (beam_search:372) INFO: end detected at 15\r\n2020-09-16 11:55:01,278 (beam_search:397) INFO:  -1.13 * 0.7 =  -0.79 for decoder\r\n2020-09-16 11:55:01,278 (beam_search:397) INFO:  -0.26 * 0.3 =  -0.08 for ctc\r\n2020-09-16 11:55:01,278 (beam_search:397) INFO: -21.19 * 0.3 =  -6.36 for lm\r\n2020-09-16 11:55:01,278 (beam_search:399) INFO: total log probability: -7.23\r\n2020-09-16 11:55:01,278 (beam_search:400) INFO: normalized log probability: -0.72\r\n2020-09-16 11:55:01,278 (beam_search:401) INFO: total number of ended hypotheses: 82\r\n2020-09-16 11:55:01,278 (beam_search:406) INFO: best hypo: \u3042\u308b\u3068\u3053\u306b\u3042\u306e\u30fc\r\n\r\n2020-09-16 11:55:01,904 (beam_search:358) INFO: decoder input length: 152\r\n2020-09-16 11:55:01,904 (beam_search:359) INFO: max output length: 152\r\n2020-09-16 11:55:01,904 (beam_search:360) INFO: min output length: 0\r\n2020-09-16 11:55:28,522 (beam_search:372) INFO: end detected at 87\r\n2020-09-16 11:55:28,523 (beam_search:397) INFO: -10.70 * 0.7 =  -7.49 for decoder\r\n2020-09-16 11:55:28,523 (beam_search:397) INFO: -12.28 * 0.3 =  -3.68 for ctc\r\n2020-09-16 11:55:28,523 (beam_search:397) INFO: -222.42 * 0.3 = -66.73 for lm\r\n2020-09-16 11:55:28,523 (beam_search:399) INFO: total log probability: -77.90\r\n2020-09-16 11:55:28,523 (beam_search:400) INFO: normalized log probability: -0.96\r\n2020-09-16 11:55:28,523 (beam_search:401) INFO: total number of ended hypotheses: 80\r\n2020-09-16 11:55:28,523 (beam_search:406) INFO: best hypo: \u4eca\u307e\u3067\u30b3\u30f3\u30c6\u30b9\u30c8\u30ea\u30fc\u30e9\u30f3\u30b2\u30fc\u3067\u66f8\u3044\u3066\u3044\u305f\u3082\u306e\u306b\u3061\u3087\u3063\u3068\u3060\u3051\u30b3\u30f3\u30c6\u30b9\u30c8\u30bb\u30f3\u30c6\u30a3\u30d6\u3092\u5c0e\u5165\u3059\u308b\u3068\u3044\u3063\u305f\u3088\u3046\u306a\u3042\u306e\u5358\u8a9e\u3054\u3068\u306b\u30af\u30e9\u30b9\u3092\u53ef\u5909\u306b\u3059\u308b\u3068\u3044\u3063\u305f\u3088\u3046\u306a\u64cd\u4f5c\u3082\u53ef\u80fd\r\n\r\n2020-09-16 11:55:28,622 (beam_search:358) INFO: decoder input length: 8\r\n2020-09-16 11:55:28,622 (beam_search:359) INFO: max output length: 8\r\n2020-09-16 11:55:28,622 (beam_search:360) INFO: min output length: 0\r\n2020-09-16 11:55:29,079 (batch_beam_search:321) INFO: adding <eos> in the last position in the loop\r\nTraceback (most recent call last):\r\n  File \"/home/kan-bayashi/work/espnet/tools/venv/lib/python3.7/runpy.py\", line 193, in _run_module_as_main\r\n    \"__main__\", mod_spec)\r\n  File \"/home/kan-bayashi/work/espnet/tools/venv/lib/python3.7/runpy.py\", line 85, in _run_code\r\n    exec(code, run_globals)\r\n  File \"/home/kan-bayashi/work/espnet/espnet2/bin/asr_inference.py\", line 447, in <module>\r\n    main()\r\n  File \"/home/kan-bayashi/work/espnet/espnet2/bin/asr_inference.py\", line 443, in main\r\n    inference(**kwargs)\r\n  File \"/home/kan-bayashi/work/espnet/espnet2/bin/asr_inference.py\", line 312, in inference\r\n    results = speech2text(**batch)\r\n  File \"/home/kan-bayashi/work/espnet/tools/venv/lib/python3.7/site-packages/torch/autograd/grad_mode.py\", line 15, in decorate_context\r\n    return func(*args, **kwargs)\r\n  File \"/home/kan-bayashi/work/espnet/espnet2/bin/asr_inference.py\", line 194, in __call__\r\n    x=enc[0], maxlenratio=self.maxlenratio, minlenratio=self.minlenratio\r\n  File \"/home/kan-bayashi/work/espnet/tools/venv/lib/python3.7/site-packages/torch/nn/modules/module.py\", line 550, in __call__\r\n    result = self.forward(*input, **kwargs)\r\n  File \"/home/kan-bayashi/work/espnet/espnet/nets/beam_search.py\", line 369, in forward\r\n    running_hyps = self.post_process(i, maxlen, maxlenratio, best, ended_hyps)\r\n  File \"/home/kan-bayashi/work/espnet/espnet/nets/batch_beam_search.py\", line 341, in post_process\r\n    running_hyps.yseq[torch.arange(n_batch), running_hyps.length - 1]\r\nIndexError: index 19 is out of bounds for dimension 1 with size 10\r\n# Accounting: time=335 threads=1\r\n# Ended (code 1) at Wed Sep 16 11:55:29 JST 2020, elapsed time 335 seconds\r\n```\r\n", "reactions": {"url": "https://api.github.com/repos/espnet/espnet/issues/2483/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/espnet/espnet/issues/2483/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/espnet/espnet/issues/2474", "repository_url": "https://api.github.com/repos/espnet/espnet", "labels_url": "https://api.github.com/repos/espnet/espnet/issues/2474/labels{/name}", "comments_url": "https://api.github.com/repos/espnet/espnet/issues/2474/comments", "events_url": "https://api.github.com/repos/espnet/espnet/issues/2474/events", "html_url": "https://github.com/espnet/espnet/issues/2474", "id": 701168947, "node_id": "MDU6SXNzdWU3MDExNjg5NDc=", "number": 2474, "title": "No tools/activate_python.sh but called from egs/wsj/asr1/path.sh", "user": {"login": "yunigma", "id": 27154358, "node_id": "MDQ6VXNlcjI3MTU0MzU4", "avatar_url": "https://avatars.githubusercontent.com/u/27154358?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yunigma", "html_url": "https://github.com/yunigma", "followers_url": "https://api.github.com/users/yunigma/followers", "following_url": "https://api.github.com/users/yunigma/following{/other_user}", "gists_url": "https://api.github.com/users/yunigma/gists{/gist_id}", "starred_url": "https://api.github.com/users/yunigma/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yunigma/subscriptions", "organizations_url": "https://api.github.com/users/yunigma/orgs", "repos_url": "https://api.github.com/users/yunigma/repos", "events_url": "https://api.github.com/users/yunigma/events{/privacy}", "received_events_url": "https://api.github.com/users/yunigma/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 777173273, "node_id": "MDU6TGFiZWw3NzcxNzMyNzM=", "url": "https://api.github.com/repos/espnet/espnet/labels/Bug", "name": "Bug", "color": "ee0701", "default": false, "description": "bug should be fixed"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2020-09-14T14:44:30Z", "updated_at": "2020-09-14T15:26:06Z", "closed_at": "2020-09-14T14:57:47Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hello!\r\nIn the latest release, the `/tools/activate_python.sh` script is called in the line 10 in `egs/wsj/asr1/path.sh ` but it is not in the `tools` folder:\r\n```\r\nexport LD_LIBRARY_PATH=${LD_LIBRARY_PATH}:$MAIN_ROOT/tools/chainer_ctc/ext/warp-ctc/build\r\n. \"${MAIN_ROOT}\"/tools/activate_python.sh && . \"${MAIN_ROOT}\"/tools/extra_path.sh\r\n```\r\nSo, currently, I am using the previous approach.\r\nBest, Yulia", "reactions": {"url": "https://api.github.com/repos/espnet/espnet/issues/2474/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/espnet/espnet/issues/2474/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/espnet/espnet/issues/2450", "repository_url": "https://api.github.com/repos/espnet/espnet", "labels_url": "https://api.github.com/repos/espnet/espnet/issues/2450/labels{/name}", "comments_url": "https://api.github.com/repos/espnet/espnet/issues/2450/comments", "events_url": "https://api.github.com/repos/espnet/espnet/issues/2450/events", "html_url": "https://github.com/espnet/espnet/issues/2450", "id": 698205248, "node_id": "MDU6SXNzdWU2OTgyMDUyNDg=", "number": 2450, "title": "CommonPreprocessor_multi not defined", "user": {"login": "ShigekiKarita", "id": 6745326, "node_id": "MDQ6VXNlcjY3NDUzMjY=", "avatar_url": "https://avatars.githubusercontent.com/u/6745326?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ShigekiKarita", "html_url": "https://github.com/ShigekiKarita", "followers_url": "https://api.github.com/users/ShigekiKarita/followers", "following_url": "https://api.github.com/users/ShigekiKarita/following{/other_user}", "gists_url": "https://api.github.com/users/ShigekiKarita/gists{/gist_id}", "starred_url": "https://api.github.com/users/ShigekiKarita/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ShigekiKarita/subscriptions", "organizations_url": "https://api.github.com/users/ShigekiKarita/orgs", "repos_url": "https://api.github.com/users/ShigekiKarita/repos", "events_url": "https://api.github.com/users/ShigekiKarita/events{/privacy}", "received_events_url": "https://api.github.com/users/ShigekiKarita/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 777173273, "node_id": "MDU6TGFiZWw3NzcxNzMyNzM=", "url": "https://api.github.com/repos/espnet/espnet/labels/Bug", "name": "Bug", "color": "ee0701", "default": false, "description": "bug should be fixed"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2020-09-10T16:25:45Z", "updated_at": "2020-09-15T03:39:26Z", "closed_at": "2020-09-15T03:39:26Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "**Describe the bug**\r\n\r\nThis class is not defined\r\nhttps://github.com/espnet/espnet/blob/d8e1bf011c4d791a5898b72f0f3f15eab3c95450/espnet2/tasks/enh_asr.py#L41\r\nhttps://github.com/espnet/espnet/blob/d8e1bf011c4d791a5898b72f0f3f15eab3c95450/espnet2/tasks/enh_asr.py#L242\r\n\r\nSo I cannot import this module to generate the help doc in sphinx.\r\n\r\n**Basic environments:**\r\n- OS information: Linux 5.4.0-42-generic #46~18.04.1-Ubuntu SMP Fri Jul 10 07:21:24 UTC 2020 x86_64\r\n- python version: `3.8.3 (default, May 19 2020, 18:47:26)  [GCC 7.3.0]`\r\n- espnet version: `espnet 0.9.2`\r\n- pytorch version: `pytorch 1.6.0`\r\n- Git hash: `d8e1bf011c4d791a5898b72f0f3f15eab3c95450`\r\n  - Commit date: `Wed Sep 9 08:39:26 2020 -0400`\r\n\r\n**Environments from `torch.utils.collect_env`:**\r\nCollecting environment information...\r\nPyTorch version: 1.6.0\r\nIs debug build: No\r\nCUDA used to build PyTorch: 10.2\r\n\r\nOS: Ubuntu 18.04.5 LTS\r\nGCC version: (Ubuntu 7.5.0-3ubuntu1~18.04) 7.5.0\r\nCMake version: version 3.17.3\r\n\r\nPython version: 3.8\r\nIs CUDA available: Yes\r\nCUDA runtime version: 10.2.89\r\nGPU models and configuration: GPU 0: GeForce GTX 1650 with Max-Q Design\r\nNvidia driver version: 440.95.01\r\ncuDNN version: Could not collect\r\n\r\nVersions of relevant libraries:\r\n[pip3] numpy==1.19.1\r\n[pip3] pytorch-ranger==0.1.1\r\n[pip3] pytorch-wpe==0.0.0\r\n[pip3] torch==1.6.0\r\n[pip3] torch-complex==0.1.2\r\n[pip3] torch-optimizer==0.0.1a15\r\n[pip3] torchaudio==0.6.0\r\n[pip3] torchvision==0.7.0\r\n[conda] blas                      1.0                         mkl  \r\n[conda] cudatoolkit               10.2.89              hfd86e86_1  \r\n[conda] mkl                       2020.2                      256  \r\n[conda] mkl-service               2.3.0            py38he904b0f_0  \r\n[conda] mkl_fft                   1.1.0            py38h23d657b_0  \r\n[conda] mkl_random                1.1.1            py38h0573a6f_0  \r\n[conda] numpy                     1.19.1           py38hbc911f0_0  \r\n[conda] numpy-base                1.19.1           py38hfa32c7d_0  \r\n[conda] pytorch                   1.6.0           py3.8_cuda10.2.89_cudnn7.6.5_0    pytorch\r\n[conda] pytorch-ranger            0.1.1                    pypi_0    pypi\r\n[conda] pytorch-wpe               0.0.0                    pypi_0    pypi\r\n[conda] torch-complex             0.1.2                    pypi_0    pypi\r\n[conda] torch-optimizer           0.0.1a15                 pypi_0    pypi\r\n[conda] torchaudio                0.6.0                    pypi_0    pypi\r\n[conda] torchvision               0.7.0                py38_cu102    pytorch\r\n\r\n\r\n**To Reproduce**\r\nSteps to reproduce the behavior:\r\n\r\npython -c \"import espnet2.tasks.enh_asr\"\r\n\r\n**Error logs**\r\n```\r\nTraceback (most recent call last):\r\n  File \"<string>\", line 1, in <module>\r\n  File \"/home/karita/Documents/repos/espnet/espnet2/tasks/enh_asr.py\", line 41, in <module>\r\n    from espnet2.train.preprocessor import CommonPreprocessor_multi\r\nImportError: cannot import name 'CommonPreprocessor_multi' from 'espnet2.train.preprocessor' (/home/karita/Documents/repos/espnet/espnet2/train/preprocessor.py\r\n```\r\n", "reactions": {"url": "https://api.github.com/repos/espnet/espnet/issues/2450/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/espnet/espnet/issues/2450/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/espnet/espnet/issues/2443", "repository_url": "https://api.github.com/repos/espnet/espnet", "labels_url": "https://api.github.com/repos/espnet/espnet/issues/2443/labels{/name}", "comments_url": "https://api.github.com/repos/espnet/espnet/issues/2443/comments", "events_url": "https://api.github.com/repos/espnet/espnet/issues/2443/events", "html_url": "https://github.com/espnet/espnet/issues/2443", "id": 696808403, "node_id": "MDU6SXNzdWU2OTY4MDg0MDM=", "number": 2443, "title": "\bLow gpu utilization with multi-gpu training while high gpu utilization with single-gpu training", "user": {"login": "keshawnhsieh", "id": 29997158, "node_id": "MDQ6VXNlcjI5OTk3MTU4", "avatar_url": "https://avatars.githubusercontent.com/u/29997158?v=4", "gravatar_id": "", "url": "https://api.github.com/users/keshawnhsieh", "html_url": "https://github.com/keshawnhsieh", "followers_url": "https://api.github.com/users/keshawnhsieh/followers", "following_url": "https://api.github.com/users/keshawnhsieh/following{/other_user}", "gists_url": "https://api.github.com/users/keshawnhsieh/gists{/gist_id}", "starred_url": "https://api.github.com/users/keshawnhsieh/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/keshawnhsieh/subscriptions", "organizations_url": "https://api.github.com/users/keshawnhsieh/orgs", "repos_url": "https://api.github.com/users/keshawnhsieh/repos", "events_url": "https://api.github.com/users/keshawnhsieh/events{/privacy}", "received_events_url": "https://api.github.com/users/keshawnhsieh/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 777173273, "node_id": "MDU6TGFiZWw3NzcxNzMyNzM=", "url": "https://api.github.com/repos/espnet/espnet/labels/Bug", "name": "Bug", "color": "ee0701", "default": false, "description": "bug should be fixed"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 9, "created_at": "2020-09-09T13:19:05Z", "updated_at": "2020-09-09T16:11:16Z", "closed_at": "2020-09-09T16:05:49Z", "author_association": "NONE", "active_lock_reason": null, "body": "**Describe the bug**\r\nWhen training on LibriSpeech with the Transformer-Transudcer model, It can be noticed that much higher gpu utilization with single-gpu mode while it drops a lot if changed to 4-gpu mode. Batch size is modified accordingly, x4 for 4-gpu training.\r\n\r\nconfigs\r\nsingle gpu\r\n```\r\n\r\nbatch-bins: 3750000\r\n\r\n# optimization related\r\ncriterion: loss\r\nearly-stop-criterion: \"validation/main/loss\"\r\nsortagrad: 0\r\nopt: noam\r\nepochs: 120\r\npatience: 0\r\naccum-grad: 4\r\ngrad-clip: 5.0\r\nweight-decay: 1e-6\r\n\r\n# transformer related\r\ntransformer-lr: 10.0\r\ntransformer-warmup-steps: 25000\r\ntransformer-attn-dropout-rate-encoder: 0.4\r\ntransformer-attn-dropout-rate-decoder: 0.1\r\n\r\n# network architecture\r\n## encoder related\r\netype: transformer\r\ntransformer-input-layer: vgg2l\r\nelayers: 18\r\neunits: 1024\r\ndropout-rate: 0.4\r\n## decoder related\r\ndtype: transformer\r\ndlayers: 2\r\n#dec-embed-dim: 256\r\ndunits: 1024\r\ndropout-rate-decoder: 0.1\r\n## attention related\r\nadim: 64\r\naheads: 8\r\n## joint network related\r\njoint-dim: 256\r\n\r\n\r\n# transducer related\r\nmtlalpha: 1.0 # mtlalpha should be set to 1.0 (CTC) to use transducer\r\nrnnt-mode: 'rnnt' # switch to 'rnnt-att' to use transducer with attention\r\nmodel-module: \"espnet.nets.pytorch_backend.e2e_asr_transducer:E2E\"\r\n```\r\n\r\n4-gpu\r\n```\r\nn-iter-processes: 16\r\nbatch-bins: 15000000\r\n\r\n# optimization related\r\ncriterion: loss\r\nearly-stop-criterion: \"validation/main/loss\"\r\nsortagrad: 0\r\nopt: noam\r\nepochs: 120\r\npatience: 0\r\naccum-grad: 4\r\ngrad-clip: 5.0\r\nweight-decay: 1e-6\r\n\r\n# transformer related\r\ntransformer-lr: 10.0\r\ntransformer-warmup-steps: 25000\r\ntransformer-attn-dropout-rate-encoder: 0.4\r\ntransformer-attn-dropout-rate-decoder: 0.1\r\n\r\n# network architecture\r\n## encoder related\r\netype: transformer\r\ntransformer-input-layer: vgg2l\r\nelayers: 18\r\neunits: 1024\r\ndropout-rate: 0.4\r\n## decoder related\r\ndtype: transformer\r\ndlayers: 2\r\n#dec-embed-dim: 256\r\ndunits: 1024\r\ndropout-rate-decoder: 0.1\r\n## attention related\r\nadim: 64\r\naheads: 8\r\n## joint network related\r\njoint-dim: 256\r\n\r\n# transducer related\r\nmtlalpha: 1.0 # mtlalpha should be set to 1.0 (CTC) to use transducer\r\nrnnt-mode: 'rnnt' # switch to 'rnnt-att' to use transducer with attention\r\nmodel-module: \"espnet.nets.pytorch_backend.e2e_asr_transducer:E2E\"\r\n```\r\ngpu utilizations\r\nsingle gpu\r\n![image](https://user-images.githubusercontent.com/29997158/92601651-aea68980-f2df-11ea-88dc-73f24efa66b0.png)\r\n\r\n4-gpu\r\n![image](https://user-images.githubusercontent.com/29997158/92603341-c5e67680-f2e1-11ea-911d-09b7393047cf.png)\r\nThe number of utilization changes frequently, seem to be very unstable.\r\n\r\n\r\n\r\n\r\n**Basic environments:**\r\n- OS information: Linux 3.10.0-957.21.3.el7.x86_64 #1 SMP Tue Jun 18 16:35:19 UTC 2019 x86_64\r\n- python version: `3.7.9 (default, Aug 18 2020, 06:24:24)  [GCC 5.4.0 20160609]`\r\n- espnet version: `espnet 0.9.1`\r\n- pytorch version: `pytorch 1.4.0+cu100`\r\n- Git hash: `3629c9190fd7528adfd502475129fc2f6283b2d7`\r\n  - Commit date: `Sat Aug 15 16:27:57 2020 +0900`\r\n\r\n\r\n\r\n```\r\nCollecting environment information...\r\nPyTorch version: 1.4.0+cu100\r\nIs debug build: No\r\nCUDA used to build PyTorch: 10.0\r\n\r\nOS: Ubuntu 16.04.6 LTS\r\nGCC version: (Ubuntu 5.4.0-6ubuntu1~16.04.12) 5.4.0 20160609\r\nCMake version: version 3.5.1\r\n\r\nPython version: 3.7\r\nIs CUDA available: Yes\r\nCUDA runtime version: 10.0.130\r\nGPU models and configuration:\r\nGPU 0: Tesla V100-SXM2-32GB\r\nGPU 1: Tesla V100-SXM2-32GB\r\nGPU 2: Tesla V100-SXM2-32GB\r\nGPU 3: Tesla V100-SXM2-32GB\r\n\r\nNvidia driver version: 410.48\r\ncuDNN version: /usr/lib/x86_64-linux-gnu/libcudnn.so.7.6.5\r\n\r\nVersions of relevant libraries:\r\n[pip3] numpy==1.19.1\r\n[pip3] pytorch-ranger==0.1.1\r\n[pip3] pytorch-wpe==0.0.0\r\n[pip3] torch==1.4.0+cu100\r\n[pip3] torch-complex==0.1.2\r\n[pip3] torch-optimizer==0.0.1a15\r\n[pip3] torchaudio==0.4.0\r\n[pip3] warprnnt-pytorch==0.1\r\n[conda] Could not collect\r\n```\r\n\r\n**Task information:**\r\n - Task: ASR\r\n - Recipe: librispeech\r\n - ESPnet1\r\n\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/espnet/espnet/issues/2443/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/espnet/espnet/issues/2443/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/espnet/espnet/issues/2433", "repository_url": "https://api.github.com/repos/espnet/espnet", "labels_url": "https://api.github.com/repos/espnet/espnet/issues/2433/labels{/name}", "comments_url": "https://api.github.com/repos/espnet/espnet/issues/2433/comments", "events_url": "https://api.github.com/repos/espnet/espnet/issues/2433/events", "html_url": "https://github.com/espnet/espnet/issues/2433", "id": 695633608, "node_id": "MDU6SXNzdWU2OTU2MzM2MDg=", "number": 2433, "title": "Error: in data/train, recording-ids extracted from segments and wav.scp", "user": {"login": "happyjin", "id": 18534928, "node_id": "MDQ6VXNlcjE4NTM0OTI4", "avatar_url": "https://avatars.githubusercontent.com/u/18534928?v=4", "gravatar_id": "", "url": "https://api.github.com/users/happyjin", "html_url": "https://github.com/happyjin", "followers_url": "https://api.github.com/users/happyjin/followers", "following_url": "https://api.github.com/users/happyjin/following{/other_user}", "gists_url": "https://api.github.com/users/happyjin/gists{/gist_id}", "starred_url": "https://api.github.com/users/happyjin/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/happyjin/subscriptions", "organizations_url": "https://api.github.com/users/happyjin/orgs", "repos_url": "https://api.github.com/users/happyjin/repos", "events_url": "https://api.github.com/users/happyjin/events{/privacy}", "received_events_url": "https://api.github.com/users/happyjin/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 777173273, "node_id": "MDU6TGFiZWw3NzcxNzMyNzM=", "url": "https://api.github.com/repos/espnet/espnet/labels/Bug", "name": "Bug", "color": "ee0701", "default": false, "description": "bug should be fixed"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 7, "created_at": "2020-09-08T07:38:09Z", "updated_at": "2020-09-09T02:00:13Z", "closed_at": "2020-09-08T23:11:38Z", "author_association": "NONE", "active_lock_reason": null, "body": "I got an error during stage 1 of run.sh using hkust dataset. The error message is as below:\r\n![bug2](https://user-images.githubusercontent.com/18534928/92446945-2e9df800-f1e9-11ea-8b75-3cc47c627fb8.PNG)\r\nIs there anybody who knows how to figure out this error? Thanks in advance!", "reactions": {"url": "https://api.github.com/repos/espnet/espnet/issues/2433/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/espnet/espnet/issues/2433/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/espnet/espnet/issues/2432", "repository_url": "https://api.github.com/repos/espnet/espnet", "labels_url": "https://api.github.com/repos/espnet/espnet/issues/2432/labels{/name}", "comments_url": "https://api.github.com/repos/espnet/espnet/issues/2432/comments", "events_url": "https://api.github.com/repos/espnet/espnet/issues/2432/events", "html_url": "https://github.com/espnet/espnet/issues/2432", "id": 695620396, "node_id": "MDU6SXNzdWU2OTU2MjAzOTY=", "number": 2432, "title": "got all zeros result during decoding", "user": {"login": "happyjin", "id": 18534928, "node_id": "MDQ6VXNlcjE4NTM0OTI4", "avatar_url": "https://avatars.githubusercontent.com/u/18534928?v=4", "gravatar_id": "", "url": "https://api.github.com/users/happyjin", "html_url": "https://github.com/happyjin", "followers_url": "https://api.github.com/users/happyjin/followers", "following_url": "https://api.github.com/users/happyjin/following{/other_user}", "gists_url": "https://api.github.com/users/happyjin/gists{/gist_id}", "starred_url": "https://api.github.com/users/happyjin/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/happyjin/subscriptions", "organizations_url": "https://api.github.com/users/happyjin/orgs", "repos_url": "https://api.github.com/users/happyjin/repos", "events_url": "https://api.github.com/users/happyjin/events{/privacy}", "received_events_url": "https://api.github.com/users/happyjin/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 777173273, "node_id": "MDU6TGFiZWw3NzcxNzMyNzM=", "url": "https://api.github.com/repos/espnet/espnet/labels/Bug", "name": "Bug", "color": "ee0701", "default": false, "description": "bug should be fixed"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2020-09-08T07:17:51Z", "updated_at": "2020-09-08T23:17:29Z", "closed_at": "2020-09-08T23:17:29Z", "author_association": "NONE", "active_lock_reason": null, "body": "I got incorrect results when I ran hkust dataset. Here are the results as below\r\n![\u6355\u83b7](https://user-images.githubusercontent.com/18534928/92444986-3a3bef80-f1e6-11ea-9a7b-f3d8eaeb2b35.PNG)\r\n\r\nDuring stage 0 to stage 5. I got the message which I am not sure if it leads to the wrong results.\r\n![bug1](https://user-images.githubusercontent.com/18534928/92445020-4aec6580-f1e6-11ea-9b0d-c031f1d62870.PNG)\r\n Is there anybody who knows how to fix this error? Thanks in advance!", "reactions": {"url": "https://api.github.com/repos/espnet/espnet/issues/2432/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/espnet/espnet/issues/2432/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/espnet/espnet/issues/2416", "repository_url": "https://api.github.com/repos/espnet/espnet", "labels_url": "https://api.github.com/repos/espnet/espnet/issues/2416/labels{/name}", "comments_url": "https://api.github.com/repos/espnet/espnet/issues/2416/comments", "events_url": "https://api.github.com/repos/espnet/espnet/issues/2416/events", "html_url": "https://github.com/espnet/espnet/issues/2416", "id": 694078872, "node_id": "MDU6SXNzdWU2OTQwNzg4NzI=", "number": 2416, "title": "RuntimeError when I run the default run.sh on stage 5", "user": {"login": "happyjin", "id": 18534928, "node_id": "MDQ6VXNlcjE4NTM0OTI4", "avatar_url": "https://avatars.githubusercontent.com/u/18534928?v=4", "gravatar_id": "", "url": "https://api.github.com/users/happyjin", "html_url": "https://github.com/happyjin", "followers_url": "https://api.github.com/users/happyjin/followers", "following_url": "https://api.github.com/users/happyjin/following{/other_user}", "gists_url": "https://api.github.com/users/happyjin/gists{/gist_id}", "starred_url": "https://api.github.com/users/happyjin/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/happyjin/subscriptions", "organizations_url": "https://api.github.com/users/happyjin/orgs", "repos_url": "https://api.github.com/users/happyjin/repos", "events_url": "https://api.github.com/users/happyjin/events{/privacy}", "received_events_url": "https://api.github.com/users/happyjin/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 777173273, "node_id": "MDU6TGFiZWw3NzcxNzMyNzM=", "url": "https://api.github.com/repos/espnet/espnet/labels/Bug", "name": "Bug", "color": "ee0701", "default": false, "description": "bug should be fixed"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2020-09-05T12:45:20Z", "updated_at": "2020-09-08T23:12:52Z", "closed_at": "2020-09-08T23:12:52Z", "author_association": "NONE", "active_lock_reason": null, "body": "I try to run default run.sh of HKUST Chinese dataset. During stage 5, there is RuntimeError in the code of `e2e_asr_transformer.py`. The code piece which trigger this error is as below:\r\n```\r\nlocal_best_scores, joint_best_ids = torch.topk(\r\n   local_scores, beam, dim=1)\r\n```\r\nHere is the bug details:\r\n```\r\nTraceback (most recent call last):\r\n  File \"/home/jinli/projects/espnet/egs/hkust/asr1/../../../espnet/bin/asr_recog.py\", line 327, in <module>\r\n    main(sys.argv[1:])\r\n  File \"/home/jinli/projects/espnet/egs/hkust/asr1/../../../espnet/bin/asr_recog.py\", line 305, in main\r\n    recog(args)\r\n  File \"/home/jinli/projects/espnet/espnet/asr/pytorch_backend/asr.py\", line 1034, in recog\r\n    feat, args, train_args.char_list, rnnlm\r\n  File \"/home/jinli/projects/espnet/espnet/nets/pytorch_backend/e2e_asr_transformer.py\", line 549, in recognize\r\n    local_scores, beam, dim=1\r\nRuntimeError: selected index k out of range\r\n```\r\nThen I print the `local_scores.shape` which returns `torch.Size([1, 6])`. However, the `beam=10` which means the shape of `local_scores` is less than `beam`. Could you guys please help me, how can I fix this bug? Thanks in advance! ", "reactions": {"url": "https://api.github.com/repos/espnet/espnet/issues/2416/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/espnet/espnet/issues/2416/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/espnet/espnet/issues/2415", "repository_url": "https://api.github.com/repos/espnet/espnet", "labels_url": "https://api.github.com/repos/espnet/espnet/issues/2415/labels{/name}", "comments_url": "https://api.github.com/repos/espnet/espnet/issues/2415/comments", "events_url": "https://api.github.com/repos/espnet/espnet/issues/2415/events", "html_url": "https://github.com/espnet/espnet/issues/2415", "id": 693942687, "node_id": "MDU6SXNzdWU2OTM5NDI2ODc=", "number": 2415, "title": "Error: in data/train, recording-ids extracted from segments and wav.scp", "user": {"login": "happyjin", "id": 18534928, "node_id": "MDQ6VXNlcjE4NTM0OTI4", "avatar_url": "https://avatars.githubusercontent.com/u/18534928?v=4", "gravatar_id": "", "url": "https://api.github.com/users/happyjin", "html_url": "https://github.com/happyjin", "followers_url": "https://api.github.com/users/happyjin/followers", "following_url": "https://api.github.com/users/happyjin/following{/other_user}", "gists_url": "https://api.github.com/users/happyjin/gists{/gist_id}", "starred_url": "https://api.github.com/users/happyjin/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/happyjin/subscriptions", "organizations_url": "https://api.github.com/users/happyjin/orgs", "repos_url": "https://api.github.com/users/happyjin/repos", "events_url": "https://api.github.com/users/happyjin/events{/privacy}", "received_events_url": "https://api.github.com/users/happyjin/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 777173273, "node_id": "MDU6TGFiZWw3NzcxNzMyNzM=", "url": "https://api.github.com/repos/espnet/espnet/labels/Bug", "name": "Bug", "color": "ee0701", "default": false, "description": "bug should be fixed"}, {"id": 777173274, "node_id": "MDU6TGFiZWw3NzcxNzMyNzQ=", "url": "https://api.github.com/repos/espnet/espnet/labels/Duplicate", "name": "Duplicate", "color": "cccccc", "default": false, "description": "Duplicated"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2020-09-05T03:00:06Z", "updated_at": "2020-09-08T07:57:39Z", "closed_at": "2020-09-08T07:57:39Z", "author_association": "NONE", "active_lock_reason": null, "body": "I try to utilize hkust run.sh. However, I encounter the problem below:\r\n```\r\nutils/validate_data_dir.sh: Error: in data/train, recording-ids extracted from segments and wav.scp\r\nutils/validate_data_dir.sh: differ, partial diff is:\r\n--- /tmp/kaldi.GMfq/recordings  2020-09-05 10:47:13.636320116 +0800\r\n+++ /tmp/kaldi.GMfq/recordings.wav      2020-09-05 10:47:13.640320176 +0800\r\n@@ -51,2 +51,3 @@\r\n 20040615_203536_A001431_B001412-A\r\n+20040615_203536_A001431_B001412-B\r\n 20040615_204145_A003031_B003030-A\r\n...\r\n[Lengths are /tmp/kaldi.GMfq/recordings=1709 versus /tmp/kaldi.GMfq/recordings.wav=1746]\r\n```\r\nCould please tell me is there any bugs inside the bash file or any reason why it happens? Thanks in advance!", "reactions": {"url": "https://api.github.com/repos/espnet/espnet/issues/2415/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/espnet/espnet/issues/2415/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/espnet/espnet/issues/2365", "repository_url": "https://api.github.com/repos/espnet/espnet", "labels_url": "https://api.github.com/repos/espnet/espnet/issues/2365/labels{/name}", "comments_url": "https://api.github.com/repos/espnet/espnet/issues/2365/comments", "events_url": "https://api.github.com/repos/espnet/espnet/issues/2365/events", "html_url": "https://github.com/espnet/espnet/issues/2365", "id": 686288111, "node_id": "MDU6SXNzdWU2ODYyODgxMTE=", "number": 2365, "title": "ctc-segmentation installation is failed with pip in colab", "user": {"login": "kan-bayashi", "id": 22779813, "node_id": "MDQ6VXNlcjIyNzc5ODEz", "avatar_url": "https://avatars.githubusercontent.com/u/22779813?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kan-bayashi", "html_url": "https://github.com/kan-bayashi", "followers_url": "https://api.github.com/users/kan-bayashi/followers", "following_url": "https://api.github.com/users/kan-bayashi/following{/other_user}", "gists_url": "https://api.github.com/users/kan-bayashi/gists{/gist_id}", "starred_url": "https://api.github.com/users/kan-bayashi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kan-bayashi/subscriptions", "organizations_url": "https://api.github.com/users/kan-bayashi/orgs", "repos_url": "https://api.github.com/users/kan-bayashi/repos", "events_url": "https://api.github.com/users/kan-bayashi/events{/privacy}", "received_events_url": "https://api.github.com/users/kan-bayashi/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 777173273, "node_id": "MDU6TGFiZWw3NzcxNzMyNzM=", "url": "https://api.github.com/repos/espnet/espnet/labels/Bug", "name": "Bug", "color": "ee0701", "default": false, "description": "bug should be fixed"}, {"id": 1417515965, "node_id": "MDU6TGFiZWwxNDE3NTE1OTY1", "url": "https://api.github.com/repos/espnet/espnet/labels/Installation", "name": "Installation", "color": "8df4e3", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2020-08-26T12:42:25Z", "updated_at": "2020-09-02T00:54:23Z", "closed_at": "2020-09-02T00:54:23Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "Recently `ctc-segmentation` is addded in requirements (#2301).\r\nHowever, this causes the error in the installation with pip in colab.\r\n(You can reproduce in [this notebook](https://colab.research.google.com/github/espnet/notebook/blob/master/espnet2_tts_realtime_demo.ipynb).)\r\nThis affects the demo notebook so I want to fix it as soon as possible.\r\n\r\n@lumaku Could you check it?\r\n\r\n```bash\r\n!pip install -vvv ctc-segmentation\r\n```\r\n\r\n```bash\r\nCreated temporary directory: /tmp/pip-ephem-wheel-cache-334qq_lm\r\nCreated temporary directory: /tmp/pip-req-tracker-dwauuihb\r\nCreated requirements tracker '/tmp/pip-req-tracker-dwauuihb'\r\nCreated temporary directory: /tmp/pip-install-98c9o0q4\r\n1 location(s) to search for versions of ctc-segmentation:\r\n* https://pypi.org/simple/ctc-segmentation/\r\nGetting page https://pypi.org/simple/ctc-segmentation/\r\nFound index url https://pypi.org/simple\r\nLooking up \"https://pypi.org/simple/ctc-segmentation/\" in the cache\r\nRequest header has \"max_age\" as 0, cache bypassed\r\nStarting new HTTPS connection (1): pypi.org:443\r\nhttps://pypi.org:443 \"GET /simple/ctc-segmentation/ HTTP/1.1\" 304 0\r\nAnalyzing links from page https://pypi.org/simple/ctc-segmentation/\r\n  Found link https://files.pythonhosted.org/packages/5c/49/70f81b78a2c67bcfe2e72a8c3be91430f0f822857f5b8f5587cc8a1d0de0/ctc_segmentation-1.0.1.tar.gz#sha256=f146adf31fc225a3594cd52dd57b6da754808b00ca1865aeab0ad978b38909fb (from https://pypi.org/simple/ctc-segmentation/) (requires-python:>=3), version: 1.0.1\r\n  Found link https://files.pythonhosted.org/packages/67/be/5fdbb4e536cfa07affe57f947074a5f5b5325a22aebf4c661e21ca10187c/ctc_segmentation-1.0.2.tar.gz#sha256=84584a4251988414262941293f31d295fd9c406ce1295ea50306fca8a28bdf30 (from https://pypi.org/simple/ctc-segmentation/) (requires-python:>=3), version: 1.0.2\r\n  Found link https://files.pythonhosted.org/packages/ae/0e/695a66ba2e15f741a8fb27496a7bd5a7b90e292ef54e76adf09b41f4ba93/ctc_segmentation-1.0.3.tar.gz#sha256=e51b2e688d563fcd0a6cac83f84147f587ac098e98db72cb8c6e7371f2723bc2 (from https://pypi.org/simple/ctc-segmentation/) (requires-python:>=3), version: 1.0.3\r\n  Found link https://files.pythonhosted.org/packages/53/1d/1ce0dca81061c7b22bc4c83977800fcf5091f3355170ee7dfbd80c3ed9ad/ctc_segmentation-1.0.4.tar.gz#sha256=fb856f16186086f21a1322b49c138fb96f27761a2d7e7124351f23df3e3e0ebb (from https://pypi.org/simple/ctc-segmentation/) (requires-python:>=3), version: 1.0.4\r\nGiven no hashes to check 4 links for project 'ctc-segmentation': discarding no candidates\r\nUsing version 1.0.4 (newest of versions: 1.0.1, 1.0.2, 1.0.3, 1.0.4)\r\nCollecting ctc-segmentation\r\n  Created temporary directory: /tmp/pip-unpack-q2zt2e8q\r\n  Looking up \"https://files.pythonhosted.org/packages/53/1d/1ce0dca81061c7b22bc4c83977800fcf5091f3355170ee7dfbd80c3ed9ad/ctc_segmentation-1.0.4.tar.gz\" in the cache\r\n  Current age based on date: 48\r\n  Ignoring unknown cache-control directive: immutable\r\n  Freshness lifetime from max-age: 365000000\r\n  The response is \"fresh\", returning cached response\r\n  365000000 > 48\r\n  Using cached https://files.pythonhosted.org/packages/53/1d/1ce0dca81061c7b22bc4c83977800fcf5091f3355170ee7dfbd80c3ed9ad/ctc_segmentation-1.0.4.tar.gz\r\n  Added ctc-segmentation from https://files.pythonhosted.org/packages/53/1d/1ce0dca81061c7b22bc4c83977800fcf5091f3355170ee7dfbd80c3ed9ad/ctc_segmentation-1.0.4.tar.gz#sha256=fb856f16186086f21a1322b49c138fb96f27761a2d7e7124351f23df3e3e0ebb to build tracker '/tmp/pip-req-tracker-dwauuihb'\r\n    Running setup.py (path:/tmp/pip-install-98c9o0q4/ctc-segmentation/setup.py) egg_info for package ctc-segmentation\r\n    Running command python setup.py egg_info\r\n\r\n    Error compiling Cython file:\r\n    ------------------------------------------------------------\r\n    ...\r\n    #!/usr/bin/env false\r\n    ^\r\n    ------------------------------------------------------------\r\n\r\n    ctc_segmentation/ctc_segmentation_dyn.pyx:1:0: 'ctc_segmentation/ctc_segmentation_dyn' is not a valid module name\r\n    Traceback (most recent call last):\r\n      File \"<string>\", line 1, in <module>\r\n      File \"/tmp/pip-install-98c9o0q4/ctc-segmentation/setup.py\", line 17, in <module>\r\n        extensions = cythonize(extensions, include_path=[numpy.get_include()])\r\n      File \"/usr/local/lib/python3.6/dist-packages/Cython/Build/Dependencies.py\", line 1102, in cythonize\r\n        cythonize_one(*args)\r\n      File \"/usr/local/lib/python3.6/dist-packages/Cython/Build/Dependencies.py\", line 1225, in cythonize_one\r\n        raise CompileError(None, pyx_file)\r\n    Cython.Compiler.Errors.CompileError: ctc_segmentation/ctc_segmentation_dyn.pyx\r\n    Compiling ctc_segmentation/ctc_segmentation_dyn.pyx because it depends on /usr/local/lib/python3.6/dist-packages/Cython/Includes/numpy/__init__.pxd.\r\n    [1/1] Cythonizing ctc_segmentation/ctc_segmentation_dyn.pyx\r\nCleaning up...\r\n  Removing source in /tmp/pip-install-98c9o0q4/ctc-segmentation\r\nRemoved ctc-segmentation from https://files.pythonhosted.org/packages/53/1d/1ce0dca81061c7b22bc4c83977800fcf5091f3355170ee7dfbd80c3ed9ad/ctc_segmentation-1.0.4.tar.gz#sha256=fb856f16186086f21a1322b49c138fb96f27761a2d7e7124351f23df3e3e0ebb from build tracker '/tmp/pip-req-tracker-dwauuihb'\r\nRemoved build tracker '/tmp/pip-req-tracker-dwauuihb'\r\nERROR: Command errored out with exit status 1: python setup.py egg_info Check the logs for full command output.\r\nException information:\r\nTraceback (most recent call last):\r\n  File \"/usr/local/lib/python3.6/dist-packages/pip/_internal/cli/base_command.py\", line 153, in _main\r\n    status = self.run(options, args)\r\n  File \"/usr/local/lib/python3.6/dist-packages/pip/_internal/commands/install.py\", line 382, in run\r\n    resolver.resolve(requirement_set)\r\n  File \"/usr/local/lib/python3.6/dist-packages/pip/_internal/legacy_resolve.py\", line 201, in resolve\r\n    self._resolve_one(requirement_set, req)\r\n  File \"/usr/local/lib/python3.6/dist-packages/pip/_internal/legacy_resolve.py\", line 365, in _resolve_one\r\n    abstract_dist = self._get_abstract_dist_for(req_to_install)\r\n  File \"/usr/local/lib/python3.6/dist-packages/pip/_internal/legacy_resolve.py\", line 313, in _get_abstract_dist_for\r\n    req, self.session, self.finder, self.require_hashes\r\n  File \"/usr/local/lib/python3.6/dist-packages/pip/_internal/operations/prepare.py\", line 224, in prepare_linked_requirement\r\n    req, self.req_tracker, finder, self.build_isolation,\r\n  File \"/usr/local/lib/python3.6/dist-packages/pip/_internal/operations/prepare.py\", line 49, in _get_prepared_distribution\r\n    abstract_dist.prepare_distribution_metadata(finder, build_isolation)\r\n  File \"/usr/local/lib/python3.6/dist-packages/pip/_internal/distributions/source/legacy.py\", line 39, in prepare_distribution_metadata\r\n    self.req.prepare_metadata()\r\n  File \"/usr/local/lib/python3.6/dist-packages/pip/_internal/req/req_install.py\", line 563, in prepare_metadata\r\n    self.metadata_directory = metadata_generator(self)\r\n  File \"/usr/local/lib/python3.6/dist-packages/pip/_internal/operations/generate_metadata.py\", line 124, in _generate_metadata_legacy\r\n    command_desc='python setup.py egg_info',\r\n  File \"/usr/local/lib/python3.6/dist-packages/pip/_internal/utils/subprocess.py\", line 242, in call_subprocess\r\n    raise InstallationError(exc_msg)\r\npip._internal.exceptions.InstallationError: Command errored out with exit status 1: python setup.py egg_info Check the logs for full command output.\r\n```", "reactions": {"url": "https://api.github.com/repos/espnet/espnet/issues/2365/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/espnet/espnet/issues/2365/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/espnet/espnet/issues/2358", "repository_url": "https://api.github.com/repos/espnet/espnet", "labels_url": "https://api.github.com/repos/espnet/espnet/issues/2358/labels{/name}", "comments_url": "https://api.github.com/repos/espnet/espnet/issues/2358/comments", "events_url": "https://api.github.com/repos/espnet/espnet/issues/2358/events", "html_url": "https://github.com/espnet/espnet/issues/2358", "id": 684536976, "node_id": "MDU6SXNzdWU2ODQ1MzY5NzY=", "number": 2358, "title": "Bug when install espnet ", "user": {"login": "JinmingZhao", "id": 15107852, "node_id": "MDQ6VXNlcjE1MTA3ODUy", "avatar_url": "https://avatars.githubusercontent.com/u/15107852?v=4", "gravatar_id": "", "url": "https://api.github.com/users/JinmingZhao", "html_url": "https://github.com/JinmingZhao", "followers_url": "https://api.github.com/users/JinmingZhao/followers", "following_url": "https://api.github.com/users/JinmingZhao/following{/other_user}", "gists_url": "https://api.github.com/users/JinmingZhao/gists{/gist_id}", "starred_url": "https://api.github.com/users/JinmingZhao/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/JinmingZhao/subscriptions", "organizations_url": "https://api.github.com/users/JinmingZhao/orgs", "repos_url": "https://api.github.com/users/JinmingZhao/repos", "events_url": "https://api.github.com/users/JinmingZhao/events{/privacy}", "received_events_url": "https://api.github.com/users/JinmingZhao/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 777173273, "node_id": "MDU6TGFiZWw3NzcxNzMyNzM=", "url": "https://api.github.com/repos/espnet/espnet/labels/Bug", "name": "Bug", "color": "ee0701", "default": false, "description": "bug should be fixed"}, {"id": 1417515965, "node_id": "MDU6TGFiZWwxNDE3NTE1OTY1", "url": "https://api.github.com/repos/espnet/espnet/labels/Installation", "name": "Installation", "color": "8df4e3", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-08-24T10:03:09Z", "updated_at": "2020-08-25T00:09:26Z", "closed_at": "2020-08-25T00:09:26Z", "author_association": "NONE", "active_lock_reason": null, "body": "when make the espnet, there is a bug in the check_pytorch_cuda_compatibility.py\r\n\r\n$cd espnet/tools\r\n$make \r\n\r\nwhen use pytorch = 1.1.0  and there is no maybe_supported variable in   'espnet/tools/check_pytorch_cuda_compatibility.py'\r\n\r\n\r\nHow to fix:\r\nadd  'maybe_supported=[]'  in the begin of the function: check()\r\n", "reactions": {"url": "https://api.github.com/repos/espnet/espnet/issues/2358/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/espnet/espnet/issues/2358/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/espnet/espnet/issues/2321", "repository_url": "https://api.github.com/repos/espnet/espnet", "labels_url": "https://api.github.com/repos/espnet/espnet/issues/2321/labels{/name}", "comments_url": "https://api.github.com/repos/espnet/espnet/issues/2321/comments", "events_url": "https://api.github.com/repos/espnet/espnet/issues/2321/events", "html_url": "https://github.com/espnet/espnet/issues/2321", "id": 680653064, "node_id": "MDU6SXNzdWU2ODA2NTMwNjQ=", "number": 2321, "title": "[Dependency] mmseg on egs/hkust/asr1", "user": {"login": "freddy5566", "id": 32366307, "node_id": "MDQ6VXNlcjMyMzY2MzA3", "avatar_url": "https://avatars.githubusercontent.com/u/32366307?v=4", "gravatar_id": "", "url": "https://api.github.com/users/freddy5566", "html_url": "https://github.com/freddy5566", "followers_url": "https://api.github.com/users/freddy5566/followers", "following_url": "https://api.github.com/users/freddy5566/following{/other_user}", "gists_url": "https://api.github.com/users/freddy5566/gists{/gist_id}", "starred_url": "https://api.github.com/users/freddy5566/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/freddy5566/subscriptions", "organizations_url": "https://api.github.com/users/freddy5566/orgs", "repos_url": "https://api.github.com/users/freddy5566/repos", "events_url": "https://api.github.com/users/freddy5566/events{/privacy}", "received_events_url": "https://api.github.com/users/freddy5566/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 777173273, "node_id": "MDU6TGFiZWw3NzcxNzMyNzM=", "url": "https://api.github.com/repos/espnet/espnet/labels/Bug", "name": "Bug", "color": "ee0701", "default": false, "description": "bug should be fixed"}, {"id": 1356233216, "node_id": "MDU6TGFiZWwxMzU2MjMzMjE2", "url": "https://api.github.com/repos/espnet/espnet/labels/Recipe", "name": "Recipe", "color": "f7e171", "default": false, "description": ""}, {"id": 1680978730, "node_id": "MDU6TGFiZWwxNjgwOTc4NzMw", "url": "https://api.github.com/repos/espnet/espnet/labels/ASR", "name": "ASR", "color": "3ee0d5", "default": false, "description": "Automatic speech recogntion"}], "state": "closed", "locked": false, "assignee": {"login": "kamo-naoyuki", "id": 19261024, "node_id": "MDQ6VXNlcjE5MjYxMDI0", "avatar_url": "https://avatars.githubusercontent.com/u/19261024?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kamo-naoyuki", "html_url": "https://github.com/kamo-naoyuki", "followers_url": "https://api.github.com/users/kamo-naoyuki/followers", "following_url": "https://api.github.com/users/kamo-naoyuki/following{/other_user}", "gists_url": "https://api.github.com/users/kamo-naoyuki/gists{/gist_id}", "starred_url": "https://api.github.com/users/kamo-naoyuki/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kamo-naoyuki/subscriptions", "organizations_url": "https://api.github.com/users/kamo-naoyuki/orgs", "repos_url": "https://api.github.com/users/kamo-naoyuki/repos", "events_url": "https://api.github.com/users/kamo-naoyuki/events{/privacy}", "received_events_url": "https://api.github.com/users/kamo-naoyuki/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "kamo-naoyuki", "id": 19261024, "node_id": "MDQ6VXNlcjE5MjYxMDI0", "avatar_url": "https://avatars.githubusercontent.com/u/19261024?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kamo-naoyuki", "html_url": "https://github.com/kamo-naoyuki", "followers_url": "https://api.github.com/users/kamo-naoyuki/followers", "following_url": "https://api.github.com/users/kamo-naoyuki/following{/other_user}", "gists_url": "https://api.github.com/users/kamo-naoyuki/gists{/gist_id}", "starred_url": "https://api.github.com/users/kamo-naoyuki/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kamo-naoyuki/subscriptions", "organizations_url": "https://api.github.com/users/kamo-naoyuki/orgs", "repos_url": "https://api.github.com/users/kamo-naoyuki/repos", "events_url": "https://api.github.com/users/kamo-naoyuki/events{/privacy}", "received_events_url": "https://api.github.com/users/kamo-naoyuki/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 14, "created_at": "2020-08-18T03:08:08Z", "updated_at": "2020-09-15T01:04:44Z", "closed_at": "2020-09-15T01:04:44Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "## Summary\r\n\r\nIn run.sh stage 0: Data preparation\r\n\r\nscript requires mmseg on [hkust_segment.py](https://github.com/42qu/mmseg)\r\nhowever, mmseg using pyhon 2.7\r\nand in [hkust_data_prep.sh](https://github.com/espnet/espnet/blob/master/egs/hkust/asr1/local/hkust_data_prep.sh)\r\n```\r\n#transcripts normalization and segmentation\r\n#(this needs external tools),\r\npython3 -c \"import mmseg\" 2>/dev/null || \\\r\n  (echo \"mmseg is not found. Checkout tools/extra/install_mmseg.sh\" && exit 1;)\r\n\r\ncat $train_dir/transcripts.txt |\\\r\n  sed -e 's/<foreign language=\\\"[a-zA-Z]\\+\\\">/ /g' |\\\r\n  sed -e 's/<\\/foreign>/ /g' |\\\r\n  sed -e 's/<noise>\\(.\\+\\)<\\/noise>/\\1/g' |\\\r\n  sed -e 's/((\\([^)]\\{0,\\}\\)))/\\1/g' |\\\r\n  local/hkust_normalize.pl |\\\r\n  python3 local/hkust_segment.py |\\\r\n  awk '{if (NF > 1) print $0;}' > $train_dir/text || exit 1;\r\n\r\ncat $dev_dir/transcripts.txt |\\\r\n  sed -e 's/<foreign language=\\\"[a-zA-Z]\\+\\\">/ /g' |\\\r\n  sed -e 's/<\\/foreign>/ /g' |\\\r\n  sed -e 's/<noise>\\(.\\+\\)<\\/noise>/\\1/g' |\\\r\n  sed -e 's/((\\([^)]\\{0,\\}\\)))/\\1/g' |\\\r\n  local/hkust_normalize.pl |\\\r\n  python3 local/hkust_segment.py |\\\r\n  awk '{if (NF > 1) print $0;}' > $dev_dir/text || exit 1;\r\n```\r\nseems use python3 to execute python2 script\r\n\r\nI also tried [py3mmseg](https://github.com/bxshi/py3mmseg)\r\nunfortunately, it didn't work. \r\n", "reactions": {"url": "https://api.github.com/repos/espnet/espnet/issues/2321/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/espnet/espnet/issues/2321/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/espnet/espnet/issues/2318", "repository_url": "https://api.github.com/repos/espnet/espnet", "labels_url": "https://api.github.com/repos/espnet/espnet/issues/2318/labels{/name}", "comments_url": "https://api.github.com/repos/espnet/espnet/issues/2318/comments", "events_url": "https://api.github.com/repos/espnet/espnet/issues/2318/events", "html_url": "https://github.com/espnet/espnet/issues/2318", "id": 679982686, "node_id": "MDU6SXNzdWU2Nzk5ODI2ODY=", "number": 2318, "title": "AssertionError: Demo TTS not working", "user": {"login": "Arafat4341", "id": 28980062, "node_id": "MDQ6VXNlcjI4OTgwMDYy", "avatar_url": "https://avatars.githubusercontent.com/u/28980062?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Arafat4341", "html_url": "https://github.com/Arafat4341", "followers_url": "https://api.github.com/users/Arafat4341/followers", "following_url": "https://api.github.com/users/Arafat4341/following{/other_user}", "gists_url": "https://api.github.com/users/Arafat4341/gists{/gist_id}", "starred_url": "https://api.github.com/users/Arafat4341/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Arafat4341/subscriptions", "organizations_url": "https://api.github.com/users/Arafat4341/orgs", "repos_url": "https://api.github.com/users/Arafat4341/repos", "events_url": "https://api.github.com/users/Arafat4341/events{/privacy}", "received_events_url": "https://api.github.com/users/Arafat4341/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 777173273, "node_id": "MDU6TGFiZWw3NzcxNzMyNzM=", "url": "https://api.github.com/repos/espnet/espnet/labels/Bug", "name": "Bug", "color": "ee0701", "default": false, "description": "bug should be fixed"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-08-17T06:36:19Z", "updated_at": "2020-08-18T06:34:12Z", "closed_at": "2020-08-18T06:34:12Z", "author_association": "NONE", "active_lock_reason": null, "body": "Getting this error while running demo TTS notebook colab:\r\n\r\n```\r\nAssertionError: \r\nThe NVIDIA driver on your system is too old (found version 10010).\r\nPlease update your GPU driver by downloading and installing a new\r\nversion from the URL: http://www.nvidia.com/Download/index.aspx\r\nAlternatively, go to: https://pytorch.org to install\r\na PyTorch version that has been compiled with your version\r\nof the CUDA driver.\r\n```", "reactions": {"url": "https://api.github.com/repos/espnet/espnet/issues/2318/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/espnet/espnet/issues/2318/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/espnet/espnet/issues/2295", "repository_url": "https://api.github.com/repos/espnet/espnet", "labels_url": "https://api.github.com/repos/espnet/espnet/issues/2295/labels{/name}", "comments_url": "https://api.github.com/repos/espnet/espnet/issues/2295/comments", "events_url": "https://api.github.com/repos/espnet/espnet/issues/2295/events", "html_url": "https://github.com/espnet/espnet/issues/2295", "id": 677436323, "node_id": "MDU6SXNzdWU2Nzc0MzYzMjM=", "number": 2295, "title": "Vertical attention during training", "user": {"login": "gafsd", "id": 62999745, "node_id": "MDQ6VXNlcjYyOTk5NzQ1", "avatar_url": "https://avatars.githubusercontent.com/u/62999745?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gafsd", "html_url": "https://github.com/gafsd", "followers_url": "https://api.github.com/users/gafsd/followers", "following_url": "https://api.github.com/users/gafsd/following{/other_user}", "gists_url": "https://api.github.com/users/gafsd/gists{/gist_id}", "starred_url": "https://api.github.com/users/gafsd/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gafsd/subscriptions", "organizations_url": "https://api.github.com/users/gafsd/orgs", "repos_url": "https://api.github.com/users/gafsd/repos", "events_url": "https://api.github.com/users/gafsd/events{/privacy}", "received_events_url": "https://api.github.com/users/gafsd/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 777173273, "node_id": "MDU6TGFiZWw3NzcxNzMyNzM=", "url": "https://api.github.com/repos/espnet/espnet/labels/Bug", "name": "Bug", "color": "ee0701", "default": false, "description": "bug should be fixed"}, {"id": 777173279, "node_id": "MDU6TGFiZWw3NzcxNzMyNzk=", "url": "https://api.github.com/repos/espnet/espnet/labels/Question", "name": "Question", "color": "cc317c", "default": false, "description": "Question"}, {"id": 1680978630, "node_id": "MDU6TGFiZWwxNjgwOTc4NjMw", "url": "https://api.github.com/repos/espnet/espnet/labels/TTS", "name": "TTS", "color": "fbca04", "default": false, "description": "Text-to-speech"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 12, "created_at": "2020-08-12T06:43:59Z", "updated_at": "2020-08-15T03:48:31Z", "closed_at": "2020-08-15T03:48:31Z", "author_association": "NONE", "active_lock_reason": null, "body": "I am using ESPNet 1 ljspeech-like dataset for pretrained weights and am getting some attention graphs like this in training which I haven't seen before:\r\n![individualImage](https://user-images.githubusercontent.com/62999745/89983349-f8349200-dca9-11ea-8f46-2ae8b7300890.png)\r\n\r\nI recently updated to latest commit and I know there are lots of ESPNet2 changes so could this be version related?\r\nI init from pretrained tacotron v4 with BCE-pos-weight 2.0", "reactions": {"url": "https://api.github.com/repos/espnet/espnet/issues/2295/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/espnet/espnet/issues/2295/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/espnet/espnet/issues/2282", "repository_url": "https://api.github.com/repos/espnet/espnet", "labels_url": "https://api.github.com/repos/espnet/espnet/issues/2282/labels{/name}", "comments_url": "https://api.github.com/repos/espnet/espnet/issues/2282/comments", "events_url": "https://api.github.com/repos/espnet/espnet/issues/2282/events", "html_url": "https://github.com/espnet/espnet/issues/2282", "id": 675394818, "node_id": "MDU6SXNzdWU2NzUzOTQ4MTg=", "number": 2282, "title": "error in training stage \"Expected all tensors to be on the same device, but found at least two devices, cuda:0 and cpu!", "user": {"login": "marynader6", "id": 44723161, "node_id": "MDQ6VXNlcjQ0NzIzMTYx", "avatar_url": "https://avatars.githubusercontent.com/u/44723161?v=4", "gravatar_id": "", "url": "https://api.github.com/users/marynader6", "html_url": "https://github.com/marynader6", "followers_url": "https://api.github.com/users/marynader6/followers", "following_url": "https://api.github.com/users/marynader6/following{/other_user}", "gists_url": "https://api.github.com/users/marynader6/gists{/gist_id}", "starred_url": "https://api.github.com/users/marynader6/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/marynader6/subscriptions", "organizations_url": "https://api.github.com/users/marynader6/orgs", "repos_url": "https://api.github.com/users/marynader6/repos", "events_url": "https://api.github.com/users/marynader6/events{/privacy}", "received_events_url": "https://api.github.com/users/marynader6/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 777173273, "node_id": "MDU6TGFiZWw3NzcxNzMyNzM=", "url": "https://api.github.com/repos/espnet/espnet/labels/Bug", "name": "Bug", "color": "ee0701", "default": false, "description": "bug should be fixed"}, {"id": 1680978630, "node_id": "MDU6TGFiZWwxNjgwOTc4NjMw", "url": "https://api.github.com/repos/espnet/espnet/labels/TTS", "name": "TTS", "color": "fbca04", "default": false, "description": "Text-to-speech"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 8, "created_at": "2020-08-08T01:45:48Z", "updated_at": "2020-09-29T13:22:49Z", "closed_at": "2020-08-16T13:01:00Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hello guys!\r\nwe are running the recipe of ljspeech of version 0.8.0 but on our data set, we are using google colaboratory. At the stage of training we are getting this error \"Expected all tensors to be on the same device, but found at least two devices, cuda:0 and cpu!\". Any help ? \r\nlog file is attached.\r\n[train.log](https://github.com/espnet/espnet/files/5044468/train.log)\r\n\r\nThanks in advance", "reactions": {"url": "https://api.github.com/repos/espnet/espnet/issues/2282/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/espnet/espnet/issues/2282/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/espnet/espnet/issues/2280", "repository_url": "https://api.github.com/repos/espnet/espnet", "labels_url": "https://api.github.com/repos/espnet/espnet/issues/2280/labels{/name}", "comments_url": "https://api.github.com/repos/espnet/espnet/issues/2280/comments", "events_url": "https://api.github.com/repos/espnet/espnet/issues/2280/events", "html_url": "https://github.com/espnet/espnet/issues/2280", "id": 674892711, "node_id": "MDU6SXNzdWU2NzQ4OTI3MTE=", "number": 2280, "title": "Chainer dependency for espnet2", "user": {"login": "yash-s20", "id": 39774433, "node_id": "MDQ6VXNlcjM5Nzc0NDMz", "avatar_url": "https://avatars.githubusercontent.com/u/39774433?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yash-s20", "html_url": "https://github.com/yash-s20", "followers_url": "https://api.github.com/users/yash-s20/followers", "following_url": "https://api.github.com/users/yash-s20/following{/other_user}", "gists_url": "https://api.github.com/users/yash-s20/gists{/gist_id}", "starred_url": "https://api.github.com/users/yash-s20/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yash-s20/subscriptions", "organizations_url": "https://api.github.com/users/yash-s20/orgs", "repos_url": "https://api.github.com/users/yash-s20/repos", "events_url": "https://api.github.com/users/yash-s20/events{/privacy}", "received_events_url": "https://api.github.com/users/yash-s20/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 777173273, "node_id": "MDU6TGFiZWw3NzcxNzMyNzM=", "url": "https://api.github.com/repos/espnet/espnet/labels/Bug", "name": "Bug", "color": "ee0701", "default": false, "description": "bug should be fixed"}, {"id": 1680978730, "node_id": "MDU6TGFiZWwxNjgwOTc4NzMw", "url": "https://api.github.com/repos/espnet/espnet/labels/ASR", "name": "ASR", "color": "3ee0d5", "default": false, "description": "Automatic speech recogntion"}, {"id": 1889036170, "node_id": "MDU6TGFiZWwxODg5MDM2MTcw", "url": "https://api.github.com/repos/espnet/espnet/labels/ESPnet2", "name": "ESPnet2", "color": "f2db68", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-08-07T09:35:10Z", "updated_at": "2020-08-07T17:30:24Z", "closed_at": "2020-08-07T17:30:24Z", "author_association": "NONE", "active_lock_reason": null, "body": "There's a useless dependency on chainer for espnet2 scripts, and it can be removed.\r\n\r\nFile is egs2/TEMPLATE/asr/scripts/utils/show_asr_result.sh\r\n\r\nLine 32 imports chainer, but doesn't need to. Can be removed \ud83d\ude04 ", "reactions": {"url": "https://api.github.com/repos/espnet/espnet/issues/2280/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/espnet/espnet/issues/2280/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/espnet/espnet/issues/2275", "repository_url": "https://api.github.com/repos/espnet/espnet", "labels_url": "https://api.github.com/repos/espnet/espnet/issues/2275/labels{/name}", "comments_url": "https://api.github.com/repos/espnet/espnet/issues/2275/comments", "events_url": "https://api.github.com/repos/espnet/espnet/issues/2275/events", "html_url": "https://github.com/espnet/espnet/issues/2275", "id": 674130388, "node_id": "MDU6SXNzdWU2NzQxMzAzODg=", "number": 2275, "title": "egs2/TEMPLATE/asr1/scripts/utils/show_asr_result.sh doesn't generate results.", "user": {"login": "hchung12", "id": 12407741, "node_id": "MDQ6VXNlcjEyNDA3NzQx", "avatar_url": "https://avatars.githubusercontent.com/u/12407741?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hchung12", "html_url": "https://github.com/hchung12", "followers_url": "https://api.github.com/users/hchung12/followers", "following_url": "https://api.github.com/users/hchung12/following{/other_user}", "gists_url": "https://api.github.com/users/hchung12/gists{/gist_id}", "starred_url": "https://api.github.com/users/hchung12/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hchung12/subscriptions", "organizations_url": "https://api.github.com/users/hchung12/orgs", "repos_url": "https://api.github.com/users/hchung12/repos", "events_url": "https://api.github.com/users/hchung12/events{/privacy}", "received_events_url": "https://api.github.com/users/hchung12/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 777173273, "node_id": "MDU6TGFiZWw3NzcxNzMyNzM=", "url": "https://api.github.com/repos/espnet/espnet/labels/Bug", "name": "Bug", "color": "ee0701", "default": false, "description": "bug should be fixed"}, {"id": 1680978730, "node_id": "MDU6TGFiZWwxNjgwOTc4NzMw", "url": "https://api.github.com/repos/espnet/espnet/labels/ASR", "name": "ASR", "color": "3ee0d5", "default": false, "description": "Automatic speech recogntion"}, {"id": 1889036170, "node_id": "MDU6TGFiZWwxODg5MDM2MTcw", "url": "https://api.github.com/repos/espnet/espnet/labels/ESPnet2", "name": "ESPnet2", "color": "f2db68", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-08-06T08:35:15Z", "updated_at": "2020-08-06T11:11:55Z", "closed_at": "2020-08-06T11:11:55Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "The \"decode\" should be replaced to \"inference\" in egs2/TEMPLATE/asr1/scripts/utils/show_asr_result.sh.", "reactions": {"url": "https://api.github.com/repos/espnet/espnet/issues/2275/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/espnet/espnet/issues/2275/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/espnet/espnet/issues/2273", "repository_url": "https://api.github.com/repos/espnet/espnet", "labels_url": "https://api.github.com/repos/espnet/espnet/issues/2273/labels{/name}", "comments_url": "https://api.github.com/repos/espnet/espnet/issues/2273/comments", "events_url": "https://api.github.com/repos/espnet/espnet/issues/2273/events", "html_url": "https://github.com/espnet/espnet/issues/2273", "id": 673759323, "node_id": "MDU6SXNzdWU2NzM3NTkzMjM=", "number": 2273, "title": "The jobname issue in egs2/ 's newly update. ", "user": {"login": "shincling", "id": 14304866, "node_id": "MDQ6VXNlcjE0MzA0ODY2", "avatar_url": "https://avatars.githubusercontent.com/u/14304866?v=4", "gravatar_id": "", "url": "https://api.github.com/users/shincling", "html_url": "https://github.com/shincling", "followers_url": "https://api.github.com/users/shincling/followers", "following_url": "https://api.github.com/users/shincling/following{/other_user}", "gists_url": "https://api.github.com/users/shincling/gists{/gist_id}", "starred_url": "https://api.github.com/users/shincling/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/shincling/subscriptions", "organizations_url": "https://api.github.com/users/shincling/orgs", "repos_url": "https://api.github.com/users/shincling/repos", "events_url": "https://api.github.com/users/shincling/events{/privacy}", "received_events_url": "https://api.github.com/users/shincling/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 777173273, "node_id": "MDU6TGFiZWw3NzcxNzMyNzM=", "url": "https://api.github.com/repos/espnet/espnet/labels/Bug", "name": "Bug", "color": "ee0701", "default": false, "description": "bug should be fixed"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2020-08-05T18:33:13Z", "updated_at": "2020-08-06T04:50:06Z", "closed_at": "2020-08-06T04:50:06Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Hi, @kamo-naoyuki , I'm working on Espnet2-Enh realted works now.\r\nI saw the newly update of egs2/Template/*/asr.sh or tts.sh about the jobname.\r\nhttps://github.com/espnet/espnet/blob/981f5d63f1c2b9f80a534787e0bf77f1f5c39658/egs2/TEMPLATE/asr1/asr.sh#L711\r\n\r\nI just install the lastest version of espnet, when I run egs2/mini_an4/asr1/run.sh it in JHU 's environment.  The jobname issue happens. \r\nI feel the sed command above maybe not correct to extract the queue.pl. \r\nPlease check it. \r\n\r\n> (base) shijing2014@login:/export/c09/shijing2014/espnet/egs2/mini_an4/asr1$ ./run.sh --ngpu 1 --stage 7\r\n> 2020-08-05T14:06:09 (asr.sh:203:main) ./asr.sh --lang en --train_set train_nodev --valid_set train_dev --test_sets train_dev test test_seg --srctexts data/train_nodev/text --ngpu 1 --stage 7\r\n> 2020-08-05T14:06:12 (asr.sh:673:main) Stage 7: LM Training: train_set=dump/raw/srctexts, dev_set=dump/raw/train_dev/text\r\n> 2020-08-05T14:06:12 (asr.sh:710:main) LM training started... log: 'exp/lm_train_bpe/train.log'\r\n> 2020-08-05 14:06:15,887 (launch:93) INFO: /export/c09/shijing2014/espnet/tools/venv/envs/con_shin_espnet/bin/python3 /export/c09/shijing2014/espnet/espnet2/bin/launch.py --cmd 'queue-freegpu.pl --mem 2G --gpu 1 --config conf/queue.conf --name lm_train_bpe' --log exp/lm_train_bpe/train.log --ngpu 1 --num_nodes 1 --init_file_prefix exp/asr_train_raw_bpe/.dist_init_ --multiprocessing_distributed true -- python3 -m espnet2.bin.lm_train --ngpu 1 --use_preprocessor true --bpemodel data/token_list/bpe_unigram30/bpe.model --token_type bpe --token_list data/token_list/bpe_unigram30/tokens.txt --non_linguistic_symbols none --cleaner none --g2p none --valid_data_path_and_name_and_type dump/raw/train_dev/text,text,text --valid_shape_file exp/lm_stats/valid/text_shape.bpe --fold_length 150 --resume true --output_dir exp/lm_train_bpe --train_data_path_and_name_and_type dump/raw/srctexts,text,text --train_shape_file exp/lm_stats/train/text_shape.bpe\r\n> 2020-08-05 14:06:16,230 (launch:345) INFO: log file: exp/lm_train_bpe/train.log\r\n> 2020-08-05T14:08:49 (asr.sh:746:main) Stage 8: Calc perplexity: dump/raw/train_dev/text\r\n> 2020-08-05T14:08:49 (asr.sh:749:main) Perplexity calculation started... log: 'exp/lm_train_bpe/perplexity_test/lm_calc_perplexity.log'\r\n> 2020-08-05T14:09:09 (asr.sh:759:main) PPL: dump/raw/train_dev/text: 26.447825684891445\r\n> 2020-08-05T14:09:09 (asr.sh:771:main) Stage 9: ASR collect stats: train_set=dump/raw/train_nodev, valid_set=dump/raw/train_dev\r\n> 2020-08-05T14:09:09 (asr.sh:817:main) ASR collect-stats started... log: 'exp/asr_stats_raw/logdir/stats.*.log'\r\n> /export/c09/shijing2014/espnet/tools/venv/envs/con_shin_espnet/bin/python3 /export/c09/shijing2014/espnet/espnet2/bin/aggregate_stats_dirs.py --input_dir exp/asr_stats_raw/logdir/stats.1 --output_dir exp/asr_stats_raw\r\n> 2020-08-05T14:09:41 (asr.sh:864:main) Stage 10: ASR Training: train_set=dump/raw/train_nodev, valid_set=dump/raw/train_dev\r\n> 2020-08-05T14:09:41 (asr.sh:929:main) ASR training started... log: 'exp/asr_train_raw_bpe/train.log'\r\n> 2020-08-05 14:09:42,550 (launch:93) INFO: /export/c09/shijing2014/espnet/tools/venv/envs/con_shin_espnet/bin/python3 /export/c09/shijing2014/espnet/espnet2/bin/launch.py --cmd 'queue-freegpu.pl --mem 2G --gpu 1 --config conf/queue.conf --name exp/asr_train_raw_bpe/train.log' --log exp/asr_train_raw_bpe/train.log --ngpu 1 --num_nodes 1 --init_file_prefix exp/asr_train_raw_bpe/.dist_init_ --multiprocessing_distributed true -- python3 -m espnet2.bin.asr_train --use_preprocessor true --bpemodel data/token_list/bpe_unigram30/bpe.model --token_type bpe --token_list data/token_list/bpe_unigram30/tokens.txt --non_linguistic_symbols none --cleaner none --g2p none --valid_data_path_and_name_and_type dump/raw/train_dev/wav.scp,speech,sound --valid_data_path_and_name_and_type dump/raw/train_dev/text,text,text --valid_shape_file exp/asr_stats_raw/valid/speech_shape --valid_shape_file exp/asr_stats_raw/valid/text_shape.bpe --resume true --fold_length 80000 --fold_length 150 --output_dir exp/asr_train_raw_bpe --frontend_conf fs=16k --normalize=global_mvn --normalize_conf stats_file=exp/asr_stats_raw/train/feats_stats.npz --train_data_path_and_name_and_type dump/raw/train_nodev/wav.scp,speech,sound --train_data_path_and_name_and_type dump/raw/train_nodev/text,text,text --train_shape_file exp/asr_stats_raw/train/speech_shape --train_shape_file exp/asr_stats_raw/train/text_shape.bpe\r\n> 2020-08-05 14:09:42,620 (launch:345) INFO: log file: exp/asr_train_raw_bpe/train.log\r\n> queue.pl: Error submitting jobs to queue (return status was 512)\r\n> queue log file is exp/asr_train_raw_bpe/q/train.log, command was qsub -v PATH -cwd -S /bin/bash -j y -l arch=*64* -o exp/asr_train_raw_bpe/q/train.log -l gpu=1 -q g.q -l mem_free=2G,ram_free=2G -N exp/asr_train_raw_bpe/train.log   /export/c09/shijing2014/espnet/egs2/mini_an4/asr1/exp/asr_train_raw_bpe/q/train.sh >>exp/asr_train_raw_bpe/q/train.log 2>&1\r\n> Output of qsub was: qsub: argument to -N option must not contain /\r\n", "reactions": {"url": "https://api.github.com/repos/espnet/espnet/issues/2273/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/espnet/espnet/issues/2273/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/espnet/espnet/issues/2262", "repository_url": "https://api.github.com/repos/espnet/espnet", "labels_url": "https://api.github.com/repos/espnet/espnet/issues/2262/labels{/name}", "comments_url": "https://api.github.com/repos/espnet/espnet/issues/2262/comments", "events_url": "https://api.github.com/repos/espnet/espnet/issues/2262/events", "html_url": "https://github.com/espnet/espnet/issues/2262", "id": 672432012, "node_id": "MDU6SXNzdWU2NzI0MzIwMTI=", "number": 2262, "title": "Bug in Colab", "user": {"login": "YangHan-Morningstar", "id": 67748964, "node_id": "MDQ6VXNlcjY3NzQ4OTY0", "avatar_url": "https://avatars.githubusercontent.com/u/67748964?v=4", "gravatar_id": "", "url": "https://api.github.com/users/YangHan-Morningstar", "html_url": "https://github.com/YangHan-Morningstar", "followers_url": "https://api.github.com/users/YangHan-Morningstar/followers", "following_url": "https://api.github.com/users/YangHan-Morningstar/following{/other_user}", "gists_url": "https://api.github.com/users/YangHan-Morningstar/gists{/gist_id}", "starred_url": "https://api.github.com/users/YangHan-Morningstar/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/YangHan-Morningstar/subscriptions", "organizations_url": "https://api.github.com/users/YangHan-Morningstar/orgs", "repos_url": "https://api.github.com/users/YangHan-Morningstar/repos", "events_url": "https://api.github.com/users/YangHan-Morningstar/events{/privacy}", "received_events_url": "https://api.github.com/users/YangHan-Morningstar/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 777173273, "node_id": "MDU6TGFiZWw3NzcxNzMyNzM=", "url": "https://api.github.com/repos/espnet/espnet/labels/Bug", "name": "Bug", "color": "ee0701", "default": false, "description": "bug should be fixed"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2020-08-04T01:07:37Z", "updated_at": "2020-08-12T00:12:06Z", "closed_at": "2020-08-12T00:12:06Z", "author_association": "NONE", "active_lock_reason": null, "body": "When I use the TTS demo in Colab, I got an error which is \"fatal: Remote branch fix_import not found in upstream origin\"in git clone. Could you tell me how to solve it? Thanks a lot!", "reactions": {"url": "https://api.github.com/repos/espnet/espnet/issues/2262/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/espnet/espnet/issues/2262/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/espnet/espnet/issues/2261", "repository_url": "https://api.github.com/repos/espnet/espnet", "labels_url": "https://api.github.com/repos/espnet/espnet/issues/2261/labels{/name}", "comments_url": "https://api.github.com/repos/espnet/espnet/issues/2261/comments", "events_url": "https://api.github.com/repos/espnet/espnet/issues/2261/events", "html_url": "https://github.com/espnet/espnet/issues/2261", "id": 672426542, "node_id": "MDU6SXNzdWU2NzI0MjY1NDI=", "number": 2261, "title": "espnet2/train/reporter.py causes exception if  accum_grad is not 1", "user": {"login": "hchung12", "id": 12407741, "node_id": "MDQ6VXNlcjEyNDA3NzQx", "avatar_url": "https://avatars.githubusercontent.com/u/12407741?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hchung12", "html_url": "https://github.com/hchung12", "followers_url": "https://api.github.com/users/hchung12/followers", "following_url": "https://api.github.com/users/hchung12/following{/other_user}", "gists_url": "https://api.github.com/users/hchung12/gists{/gist_id}", "starred_url": "https://api.github.com/users/hchung12/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hchung12/subscriptions", "organizations_url": "https://api.github.com/users/hchung12/orgs", "repos_url": "https://api.github.com/users/hchung12/repos", "events_url": "https://api.github.com/users/hchung12/events{/privacy}", "received_events_url": "https://api.github.com/users/hchung12/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 777173273, "node_id": "MDU6TGFiZWw3NzcxNzMyNzM=", "url": "https://api.github.com/repos/espnet/espnet/labels/Bug", "name": "Bug", "color": "ee0701", "default": false, "description": "bug should be fixed"}, {"id": 1889036170, "node_id": "MDU6TGFiZWwxODg5MDM2MTcw", "url": "https://api.github.com/repos/espnet/espnet/labels/ESPnet2", "name": "ESPnet2", "color": "f2db68", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2020-08-04T00:49:28Z", "updated_at": "2020-08-04T04:43:57Z", "closed_at": "2020-08-04T04:43:57Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "If accum_grad is not 1,  the number of elements of some keys such as 'optim_step_time' are not equal to the count value.\r\nSo, it causes the exception at line 175 of reporter.py\r\n\r\nHere is the sample. \r\nwhen accum_grad = 2, self.count=2, but the number of 'optim_step_time' items is 1.\r\n\r\ndefaultdict(<class 'list'>, {'iter_time': [Average(value=0.1262605399970198), Average(value=8.855300256982446e-05)], 'forward_time': [Average(value=0.36080345801019575), Average(value=0.0742439620080404)], 'loss': [WeightedAverage(value=98.05116271972656, weight=64), WeightedAverage(value=327.82421875, weight=64)], 'loss_att': [WeightedAverage(value=27.909347534179688, weight=64), WeightedAverage(value=108.47477722167969, weight=64)], 'loss_ctc': [WeightedAverage(value=261.71539306640625, weight=64), WeightedAverage(value=839.6395263671875, weight=64)], 'acc': [WeightedAverage(value=0.0, weight=64), WeightedAverage(value=0.0, weight=64)], 'backward_time': [Average(value=0.22204561799298972), Average(value=0.20624846100690775)], 'optim_step_time': [Average(value=0.03714967500127386)], 'lr_0': [Average(value=2.2222222222222224e-07)], 'train_time': [Average(value=1.294450648012571)]})\r\n", "reactions": {"url": "https://api.github.com/repos/espnet/espnet/issues/2261/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/espnet/espnet/issues/2261/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/espnet/espnet/issues/2232", "repository_url": "https://api.github.com/repos/espnet/espnet", "labels_url": "https://api.github.com/repos/espnet/espnet/issues/2232/labels{/name}", "comments_url": "https://api.github.com/repos/espnet/espnet/issues/2232/comments", "events_url": "https://api.github.com/repos/espnet/espnet/issues/2232/events", "html_url": "https://github.com/espnet/espnet/issues/2232", "id": 667643869, "node_id": "MDU6SXNzdWU2Njc2NDM4Njk=", "number": 2232, "title": "bug: Expected object of backend CPU but got bacKend CUDA", "user": {"login": "mmmmayi", "id": 24267342, "node_id": "MDQ6VXNlcjI0MjY3MzQy", "avatar_url": "https://avatars.githubusercontent.com/u/24267342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mmmmayi", "html_url": "https://github.com/mmmmayi", "followers_url": "https://api.github.com/users/mmmmayi/followers", "following_url": "https://api.github.com/users/mmmmayi/following{/other_user}", "gists_url": "https://api.github.com/users/mmmmayi/gists{/gist_id}", "starred_url": "https://api.github.com/users/mmmmayi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mmmmayi/subscriptions", "organizations_url": "https://api.github.com/users/mmmmayi/orgs", "repos_url": "https://api.github.com/users/mmmmayi/repos", "events_url": "https://api.github.com/users/mmmmayi/events{/privacy}", "received_events_url": "https://api.github.com/users/mmmmayi/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 777173273, "node_id": "MDU6TGFiZWw3NzcxNzMyNzM=", "url": "https://api.github.com/repos/espnet/espnet/labels/Bug", "name": "Bug", "color": "ee0701", "default": false, "description": "bug should be fixed"}, {"id": 1680978730, "node_id": "MDU6TGFiZWwxNjgwOTc4NzMw", "url": "https://api.github.com/repos/espnet/espnet/labels/ASR", "name": "ASR", "color": "3ee0d5", "default": false, "description": "Automatic speech recogntion"}], "state": "closed", "locked": false, "assignee": {"login": "b-flo", "id": 41155456, "node_id": "MDQ6VXNlcjQxMTU1NDU2", "avatar_url": "https://avatars.githubusercontent.com/u/41155456?v=4", "gravatar_id": "", "url": "https://api.github.com/users/b-flo", "html_url": "https://github.com/b-flo", "followers_url": "https://api.github.com/users/b-flo/followers", "following_url": "https://api.github.com/users/b-flo/following{/other_user}", "gists_url": "https://api.github.com/users/b-flo/gists{/gist_id}", "starred_url": "https://api.github.com/users/b-flo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/b-flo/subscriptions", "organizations_url": "https://api.github.com/users/b-flo/orgs", "repos_url": "https://api.github.com/users/b-flo/repos", "events_url": "https://api.github.com/users/b-flo/events{/privacy}", "received_events_url": "https://api.github.com/users/b-flo/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "b-flo", "id": 41155456, "node_id": "MDQ6VXNlcjQxMTU1NDU2", "avatar_url": "https://avatars.githubusercontent.com/u/41155456?v=4", "gravatar_id": "", "url": "https://api.github.com/users/b-flo", "html_url": "https://github.com/b-flo", "followers_url": "https://api.github.com/users/b-flo/followers", "following_url": "https://api.github.com/users/b-flo/following{/other_user}", "gists_url": "https://api.github.com/users/b-flo/gists{/gist_id}", "starred_url": "https://api.github.com/users/b-flo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/b-flo/subscriptions", "organizations_url": "https://api.github.com/users/b-flo/orgs", "repos_url": "https://api.github.com/users/b-flo/repos", "events_url": "https://api.github.com/users/b-flo/events{/privacy}", "received_events_url": "https://api.github.com/users/b-flo/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 4, "created_at": "2020-07-29T08:13:49Z", "updated_at": "2020-07-31T16:06:23Z", "closed_at": "2020-07-31T16:06:23Z", "author_association": "NONE", "active_lock_reason": null, "body": "When I run the egs/voxforge/asr1/run_rnnt.sh with 4 GPU and train cofig of conf/tuning/transducer/train_transducer_both_init.yaml, I met the error of \r\n`RuntimeError: Expected object of backend CPU but got backend CUDA for sequence element 1 in sequence argument 1 in sequence argument at position #1 'tensors'`.\r\n\r\nThe error occured beacuse of the code `ey = torch.cat((eys, att_c),dim=1)` in rnn_decoders.py.", "reactions": {"url": "https://api.github.com/repos/espnet/espnet/issues/2232/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/espnet/espnet/issues/2232/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/espnet/espnet/issues/2229", "repository_url": "https://api.github.com/repos/espnet/espnet", "labels_url": "https://api.github.com/repos/espnet/espnet/issues/2229/labels{/name}", "comments_url": "https://api.github.com/repos/espnet/espnet/issues/2229/comments", "events_url": "https://api.github.com/repos/espnet/espnet/issues/2229/events", "html_url": "https://github.com/espnet/espnet/issues/2229", "id": 667037238, "node_id": "MDU6SXNzdWU2NjcwMzcyMzg=", "number": 2229, "title": "Could not find a version that satisfies the requirement cupy-cuda102==6.0.0 ", "user": {"login": "HuJK", "id": 15907444, "node_id": "MDQ6VXNlcjE1OTA3NDQ0", "avatar_url": "https://avatars.githubusercontent.com/u/15907444?v=4", "gravatar_id": "", "url": "https://api.github.com/users/HuJK", "html_url": "https://github.com/HuJK", "followers_url": "https://api.github.com/users/HuJK/followers", "following_url": "https://api.github.com/users/HuJK/following{/other_user}", "gists_url": "https://api.github.com/users/HuJK/gists{/gist_id}", "starred_url": "https://api.github.com/users/HuJK/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/HuJK/subscriptions", "organizations_url": "https://api.github.com/users/HuJK/orgs", "repos_url": "https://api.github.com/users/HuJK/repos", "events_url": "https://api.github.com/users/HuJK/events{/privacy}", "received_events_url": "https://api.github.com/users/HuJK/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 777173273, "node_id": "MDU6TGFiZWw3NzcxNzMyNzM=", "url": "https://api.github.com/repos/espnet/espnet/labels/Bug", "name": "Bug", "color": "ee0701", "default": false, "description": "bug should be fixed"}, {"id": 1417515965, "node_id": "MDU6TGFiZWwxNDE3NTE1OTY1", "url": "https://api.github.com/repos/espnet/espnet/labels/Installation", "name": "Installation", "color": "8df4e3", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2020-07-28T12:35:02Z", "updated_at": "2020-07-28T15:32:11Z", "closed_at": "2020-07-28T15:32:11Z", "author_association": "NONE", "active_lock_reason": null, "body": "```\r\nERROR: Could not find a version that satisfies the requirement cupy-cuda102==6.0.0 (from versions: 7.2.0, 7.3.0, 7.4.0, 7.5.0, 7.6.0, 8.0.0a1, 8.0.0b1, 8.0.0b2, 8.0.0b3, 8.0.0b4)\r\n``` \r\ncupy-cuda102 doesn't have version 6.0.0 , upgrade ```CHAINER_VERSION := 6.0.0``` to ```CHAINER_VERSION := 7.4.0```, please", "reactions": {"url": "https://api.github.com/repos/espnet/espnet/issues/2229/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/espnet/espnet/issues/2229/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/espnet/espnet/issues/2226", "repository_url": "https://api.github.com/repos/espnet/espnet", "labels_url": "https://api.github.com/repos/espnet/espnet/issues/2226/labels{/name}", "comments_url": "https://api.github.com/repos/espnet/espnet/issues/2226/comments", "events_url": "https://api.github.com/repos/espnet/espnet/issues/2226/events", "html_url": "https://github.com/espnet/espnet/issues/2226", "id": 666695135, "node_id": "MDU6SXNzdWU2NjY2OTUxMzU=", "number": 2226, "title": "espnet2 inference error without language model", "user": {"login": "hchung12", "id": 12407741, "node_id": "MDQ6VXNlcjEyNDA3NzQx", "avatar_url": "https://avatars.githubusercontent.com/u/12407741?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hchung12", "html_url": "https://github.com/hchung12", "followers_url": "https://api.github.com/users/hchung12/followers", "following_url": "https://api.github.com/users/hchung12/following{/other_user}", "gists_url": "https://api.github.com/users/hchung12/gists{/gist_id}", "starred_url": "https://api.github.com/users/hchung12/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hchung12/subscriptions", "organizations_url": "https://api.github.com/users/hchung12/orgs", "repos_url": "https://api.github.com/users/hchung12/repos", "events_url": "https://api.github.com/users/hchung12/events{/privacy}", "received_events_url": "https://api.github.com/users/hchung12/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 777173273, "node_id": "MDU6TGFiZWw3NzcxNzMyNzM=", "url": "https://api.github.com/repos/espnet/espnet/labels/Bug", "name": "Bug", "color": "ee0701", "default": false, "description": "bug should be fixed"}, {"id": 1889036170, "node_id": "MDU6TGFiZWwxODg5MDM2MTcw", "url": "https://api.github.com/repos/espnet/espnet/labels/ESPnet2", "name": "ESPnet2", "color": "f2db68", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-07-28T02:01:49Z", "updated_at": "2020-07-28T03:21:36Z", "closed_at": "2020-07-28T03:21:36Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "If not using a language model, the espnet2 asr_inference.py causes the following error. \r\n\r\nFile \"espnet2/espnet2/bin/asr_inference.py\", line 152, in __init__\r\nself.lm_train_args = lm_train_args\r\nUnboundLocalError: local variable 'lm_train_args' referenced before assignment\r\n", "reactions": {"url": "https://api.github.com/repos/espnet/espnet/issues/2226/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/espnet/espnet/issues/2226/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/espnet/espnet/issues/2211", "repository_url": "https://api.github.com/repos/espnet/espnet", "labels_url": "https://api.github.com/repos/espnet/espnet/issues/2211/labels{/name}", "comments_url": "https://api.github.com/repos/espnet/espnet/issues/2211/comments", "events_url": "https://api.github.com/repos/espnet/espnet/issues/2211/events", "html_url": "https://github.com/espnet/espnet/issues/2211", "id": 664467975, "node_id": "MDU6SXNzdWU2NjQ0Njc5NzU=", "number": 2211, "title": "WSJ dataset processing error - AttributeError: 'Namespace' object has no attribute 'etype'", "user": {"login": "Jxu-Thu", "id": 25784032, "node_id": "MDQ6VXNlcjI1Nzg0MDMy", "avatar_url": "https://avatars.githubusercontent.com/u/25784032?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Jxu-Thu", "html_url": "https://github.com/Jxu-Thu", "followers_url": "https://api.github.com/users/Jxu-Thu/followers", "following_url": "https://api.github.com/users/Jxu-Thu/following{/other_user}", "gists_url": "https://api.github.com/users/Jxu-Thu/gists{/gist_id}", "starred_url": "https://api.github.com/users/Jxu-Thu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Jxu-Thu/subscriptions", "organizations_url": "https://api.github.com/users/Jxu-Thu/orgs", "repos_url": "https://api.github.com/users/Jxu-Thu/repos", "events_url": "https://api.github.com/users/Jxu-Thu/events{/privacy}", "received_events_url": "https://api.github.com/users/Jxu-Thu/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 777173273, "node_id": "MDU6TGFiZWw3NzcxNzMyNzM=", "url": "https://api.github.com/repos/espnet/espnet/labels/Bug", "name": "Bug", "color": "ee0701", "default": false, "description": "bug should be fixed"}, {"id": 1356233216, "node_id": "MDU6TGFiZWwxMzU2MjMzMjE2", "url": "https://api.github.com/repos/espnet/espnet/labels/Recipe", "name": "Recipe", "color": "f7e171", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2020-07-23T13:21:02Z", "updated_at": "2020-08-20T06:31:52Z", "closed_at": "2020-08-20T06:31:52Z", "author_association": "NONE", "active_lock_reason": null, "body": "When run the run.sh at espnet/egs/wsj/asr1/run.sh,  run this command \r\n`\r\nlocal/filtering_samples.py \\\r\n        --config ${train_config} \\\r\n        --preprocess-conf ${preprocess_config} \\\r\n        --data-json ${feat_tr_dir}/data.json \\\r\n        --mode-subsample \"asr\" \\\r\n        --arch-subsample \"rnn\" \\\r\n        ${min_io_delta:+--min-io-delta $min_io_delta} \\\r\n        --output-json-path ${feat_tr_dir}/data.json\r\n`\r\n\r\nget this error \r\n\r\nTraceback (most recent call last):\r\n  File \"local/filtering_samples.py\", line 65, in <module>\r\n    args, mode=args.mode_subsample, arch=args.arch_subsample\r\n  File \"/mypath/espnet/espnet/nets/pytorch_backend/nets_utils.py\", line 411, in get_subsample\r\n    if train_args.etype.endswith(\"p\") and not train_args.etype.startswith(\"vgg\"):\r\nAttributeError: 'Namespace' object has no attribute 'etype'\r\n\r\nI print the args parameters and do not find the 'etype'.\r\n\r\nAnd why arch-subsample is rnn? this script run the asr model with transformer?\r\n\r\n\r\n\r\n\r\nhttps://github.com/espnet/espnet/blob/74de653ef7d37fc204562e4142c86d3c65ce96fe/egs/wsj/asr1/run.sh#L149", "reactions": {"url": "https://api.github.com/repos/espnet/espnet/issues/2211/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/espnet/espnet/issues/2211/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/espnet/espnet/issues/2198", "repository_url": "https://api.github.com/repos/espnet/espnet", "labels_url": "https://api.github.com/repos/espnet/espnet/issues/2198/labels{/name}", "comments_url": "https://api.github.com/repos/espnet/espnet/issues/2198/comments", "events_url": "https://api.github.com/repos/espnet/espnet/issues/2198/events", "html_url": "https://github.com/espnet/espnet/issues/2198", "id": 663620309, "node_id": "MDU6SXNzdWU2NjM2MjAzMDk=", "number": 2198, "title": "`TypeError: cannot serialize '_io.BufferedReader' object` in single node multi-gpu distributed training", "user": {"login": "kan-bayashi", "id": 22779813, "node_id": "MDQ6VXNlcjIyNzc5ODEz", "avatar_url": "https://avatars.githubusercontent.com/u/22779813?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kan-bayashi", "html_url": "https://github.com/kan-bayashi", "followers_url": "https://api.github.com/users/kan-bayashi/followers", "following_url": "https://api.github.com/users/kan-bayashi/following{/other_user}", "gists_url": "https://api.github.com/users/kan-bayashi/gists{/gist_id}", "starred_url": "https://api.github.com/users/kan-bayashi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kan-bayashi/subscriptions", "organizations_url": "https://api.github.com/users/kan-bayashi/orgs", "repos_url": "https://api.github.com/users/kan-bayashi/repos", "events_url": "https://api.github.com/users/kan-bayashi/events{/privacy}", "received_events_url": "https://api.github.com/users/kan-bayashi/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 777173273, "node_id": "MDU6TGFiZWw3NzcxNzMyNzM=", "url": "https://api.github.com/repos/espnet/espnet/labels/Bug", "name": "Bug", "color": "ee0701", "default": false, "description": "bug should be fixed"}, {"id": 1889036170, "node_id": "MDU6TGFiZWwxODg5MDM2MTcw", "url": "https://api.github.com/repos/espnet/espnet/labels/ESPnet2", "name": "ESPnet2", "color": "f2db68", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2020-07-22T09:37:41Z", "updated_at": "2020-07-22T14:53:44Z", "closed_at": "2020-07-22T14:53:44Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "I met the following errors when `num_workers > 0` + single node multi-gpu distributed training in ESPnet2.\r\n\r\n\r\n```bash\r\n[cx004:0/4] 2020-07-22 18:24:02,669 (abs_task:1029) INFO: Scheduler: None\r\n[cx004:0/4] 2020-07-22 18:24:02,670 (abs_task:1037) INFO: Saving the configuration in exp/tts_train_raw_phn_tacotron_g2p_en_no_space_num_workers2/config.yaml\r\n[cx004:0/4] 2020-07-22 18:24:04,074 (abs_task:1397) INFO: [train] dataset:\r\nESPnetDataset(\r\n  text: {\"path\": \"dump/raw/tr_no_dev/text\", \"type\": \"text\"}\r\n  speech: {\"path\": \"dump/raw/tr_no_dev/wav.scp\", \"type\": \"sound\"}\r\n  preprocess: <espnet2.train.preprocessor.CommonPreprocessor object at 0x2b385ff03cf8>)\r\n[cx004:0/4] 2020-07-22 18:24:04,074 (abs_task:1398) INFO: [train] Batch sampler: NumElementsBatchSampler(N-batch=433, batch_bins=5120000, sort_in_batch=descending, sort_batch=descending)\r\n[cx004:0/4] 2020-07-22 18:24:04,074 (abs_task:1400) INFO: [train] mini-batch sizes summary: N-batch=433, mean=29.1, min=15, max=102\r\n[cx004:0/4] 2020-07-22 18:24:04,829 (abs_task:1397) INFO: [valid] dataset:\r\nESPnetDataset(\r\n  text: {\"path\": \"dump/raw/dev/text\", \"type\": \"text\"}\r\n  speech: {\"path\": \"dump/raw/dev/wav.scp\", \"type\": \"sound\"}\r\n  preprocess: <espnet2.train.preprocessor.CommonPreprocessor object at 0x2b386f0590b8>)\r\n[cx004:0/4] 2020-07-22 18:24:04,829 (abs_task:1398) INFO: [valid] Batch sampler: NumElementsBatchSampler(N-batch=9, batch_bins=5120000, sort_in_batch=descending, sort_batch=descending)\r\n[cx004:0/4] 2020-07-22 18:24:04,829 (abs_task:1400) INFO: [valid] mini-batch sizes summary: N-batch=9, mean=27.8, min=20, max=42\r\n[cx004:0/4] 2020-07-22 18:24:05,473 (abs_task:1397) INFO: [plot_att] dataset:\r\nESPnetDataset(\r\n  text: {\"path\": \"dump/raw/dev/text\", \"type\": \"text\"}\r\n  speech: {\"path\": \"dump/raw/dev/wav.scp\", \"type\": \"sound\"}\r\n  preprocess: <espnet2.train.preprocessor.CommonPreprocessor object at 0x2b38cce14dd8>)\r\n[cx004:0/4] 2020-07-22 18:24:05,474 (abs_task:1398) INFO: [plot_att] Batch sampler: UnsortedBatchSampler(N-batch=250, batch_size=1, key_file=exp/tts_stats_raw_phn_tacotron_g2p_en_no_space/valid/text_shape.phn,\r\n[cx004:0/4] 2020-07-22 18:24:05,474 (abs_task:1400) INFO: [plot_att] mini-batch sizes summary: N-batch=3, mean=1.0, min=1, max=1\r\ncx004:3181:3181 [0] NCCL INFO Bootstrap : Using [0]eno1:10.102.1.4<0> [1]ib0:172.18.21.4<0> [2]ib1:172.18.22.4<0> [3]ib1:ost1p4IP:172.18.24.4<0> [4]krm-virbr0:192.168.120.1<0>\r\ncx004:3181:3181 [0] NCCL INFO NET/Plugin : No plugin found (libnccl-net.so).\r\ncx004:3181:3181 [0] NCCL INFO NET/IB : Using [0]mlx5_1:1/IB [1]mlx5_0:1/IB ; OOB eno1:10.102.1.4<0>\r\nNCCL version 2.4.8+cuda10.1\r\ncx004:3184:3184 [3] NCCL INFO Bootstrap : Using [0]eno1:10.102.1.4<0> [1]ib0:172.18.21.4<0> [2]ib1:172.18.22.4<0> [3]ib1:ost1p4IP:172.18.24.4<0> [4]krm-virbr0:192.168.120.1<0>\r\ncx004:3183:3183 [2] NCCL INFO Bootstrap : Using [0]eno1:10.102.1.4<0> [1]ib0:172.18.21.4<0> [2]ib1:172.18.22.4<0> [3]ib1:ost1p4IP:172.18.24.4<0> [4]krm-virbr0:192.168.120.1<0>\r\ncx004:3184:3184 [3] NCCL INFO NET/Plugin : No plugin found (libnccl-net.so).\r\ncx004:3183:3183 [2] NCCL INFO NET/Plugin : No plugin found (libnccl-net.so).\r\ncx004:3182:3182 [1] NCCL INFO Bootstrap : Using [0]eno1:10.102.1.4<0> [1]ib0:172.18.21.4<0> [2]ib1:172.18.22.4<0> [3]ib1:ost1p4IP:172.18.24.4<0> [4]krm-virbr0:192.168.120.1<0>\r\ncx004:3182:3182 [1] NCCL INFO NET/Plugin : No plugin found (libnccl-net.so).\r\ncx004:3183:3183 [2] NCCL INFO NET/IB : Using [0]mlx5_1:1/IB [1]mlx5_0:1/IB ; OOB eno1:10.102.1.4<0>\r\ncx004:3184:3184 [3] NCCL INFO NET/IB : Using [0]mlx5_1:1/IB [1]mlx5_0:1/IB ; OOB eno1:10.102.1.4<0>\r\ncx004:3182:3182 [1] NCCL INFO NET/IB : Using [0]mlx5_1:1/IB [1]mlx5_0:1/IB ; OOB eno1:10.102.1.4<0>\r\ncx004:3183:3227 [2] NCCL INFO Setting affinity for GPU 2 to 0e6398\r\ncx004:3184:3228 [3] NCCL INFO Setting affinity for GPU 3 to 0e6398\r\ncx004:3182:3230 [1] NCCL INFO Setting affinity for GPU 1 to 019c67\r\ncx004:3181:3221 [0] NCCL INFO Setting affinity for GPU 0 to 019c67\r\ncx004:3181:3221 [0] NCCL INFO Channel 00 :    0   1   2   3\r\ncx004:3181:3221 [0] NCCL INFO Channel 01 :    0   1   3   2\r\ncx004:3181:3221 [0] NCCL INFO Channel 02 :    0   2   1   3\r\ncx004:3181:3221 [0] NCCL INFO Channel 03 :    0   2   3   1\r\ncx004:3181:3221 [0] NCCL INFO Channel 04 :    0   3   1   2\r\ncx004:3181:3221 [0] NCCL INFO Channel 05 :    0   3   2   1\r\ncx004:3181:3221 [0] NCCL INFO Channel 06 :    0   1   2   3\r\ncx004:3181:3221 [0] NCCL INFO Channel 07 :    0   1   3   2\r\ncx004:3181:3221 [0] NCCL INFO Channel 08 :    0   2   1   3\r\ncx004:3181:3221 [0] NCCL INFO Channel 09 :    0   2   3   1\r\ncx004:3181:3221 [0] NCCL INFO Channel 10 :    0   3   1   2\r\ncx004:3181:3221 [0] NCCL INFO Channel 11 :    0   3   2   1\r\ncx004:3181:3221 [0] NCCL INFO Ring 00 : 0[0] -> 1[1] via P2P/IPC\r\ncx004:3182:3230 [1] NCCL INFO Ring 00 : 1[1] -> 2[2] via P2P/IPC\r\ncx004:3184:3228 [3] NCCL INFO Ring 00 : 3[3] -> 0[0] via P2P/IPC\r\ncx004:3183:3227 [2] NCCL INFO Ring 00 : 2[2] -> 3[3] via P2P/IPC\r\ncx004:3181:3221 [0] NCCL INFO Ring 01 : 0[0] -> 1[1] via P2P/IPC\r\ncx004:3182:3230 [1] NCCL INFO Ring 01 : 1[1] -> 3[3] via P2P/IPC\r\ncx004:3184:3228 [3] NCCL INFO Ring 01 : 3[3] -> 2[2] via P2P/IPC\r\ncx004:3183:3227 [2] NCCL INFO Ring 01 : 2[2] -> 0[0] via P2P/IPC\r\ncx004:3182:3230 [1] NCCL INFO Ring 02 : 1[1] -> 3[3] via P2P/IPC\r\ncx004:3181:3221 [0] NCCL INFO Ring 02 : 0[0] -> 2[2] via P2P/IPC\r\ncx004:3184:3228 [3] NCCL INFO Ring 02 : 3[3] -> 0[0] via P2P/IPC\r\ncx004:3183:3227 [2] NCCL INFO Ring 02 : 2[2] -> 1[1] via P2P/IPC\r\ncx004:3181:3221 [0] NCCL INFO Ring 03 : 0[0] -> 2[2] via P2P/IPC\r\ncx004:3182:3230 [1] NCCL INFO Ring 03 : 1[1] -> 0[0] via P2P/IPC\r\ncx004:3184:3228 [3] NCCL INFO Ring 03 : 3[3] -> 1[1] via P2P/IPC\r\ncx004:3183:3227 [2] NCCL INFO Ring 03 : 2[2] -> 3[3] via P2P/IPC\r\ncx004:3184:3228 [3] NCCL INFO Ring 04 : 3[3] -> 1[1] via P2P/IPC\r\ncx004:3181:3221 [0] NCCL INFO Ring 04 : 0[0] -> 3[3] via P2P/IPC\r\ncx004:3182:3230 [1] NCCL INFO Ring 04 : 1[1] -> 2[2] via P2P/IPC\r\ncx004:3183:3227 [2] NCCL INFO Ring 04 : 2[2] -> 0[0] via P2P/IPC\r\ncx004:3181:3221 [0] NCCL INFO Ring 05 : 0[0] -> 3[3] via P2P/IPC\r\ncx004:3182:3230 [1] NCCL INFO Ring 05 : 1[1] -> 0[0] via P2P/IPC\r\ncx004:3184:3228 [3] NCCL INFO Ring 05 : 3[3] -> 2[2] via P2P/IPC\r\ncx004:3183:3227 [2] NCCL INFO Ring 05 : 2[2] -> 1[1] via P2P/IPC\r\ncx004:3181:3221 [0] NCCL INFO Ring 06 : 0[0] -> 1[1] via P2P/IPC\r\ncx004:3182:3230 [1] NCCL INFO Ring 06 : 1[1] -> 2[2] via P2P/IPC\r\ncx004:3184:3228 [3] NCCL INFO Ring 06 : 3[3] -> 0[0] via P2P/IPC\r\ncx004:3183:3227 [2] NCCL INFO Ring 06 : 2[2] -> 3[3] via P2P/IPC\r\ncx004:3181:3221 [0] NCCL INFO Ring 07 : 0[0] -> 1[1] via P2P/IPC\r\ncx004:3182:3230 [1] NCCL INFO Ring 07 : 1[1] -> 3[3] via P2P/IPC\r\ncx004:3184:3228 [3] NCCL INFO Ring 07 : 3[3] -> 2[2] via P2P/IPC\r\ncx004:3183:3227 [2] NCCL INFO Ring 07 : 2[2] -> 0[0] via P2P/IPC\r\ncx004:3181:3221 [0] NCCL INFO Ring 08 : 0[0] -> 2[2] via P2P/IPC\r\ncx004:3182:3230 [1] NCCL INFO Ring 08 : 1[1] -> 3[3] via P2P/IPC\r\ncx004:3184:3228 [3] NCCL INFO Ring 08 : 3[3] -> 0[0] via P2P/IPC\r\ncx004:3183:3227 [2] NCCL INFO Ring 08 : 2[2] -> 1[1] via P2P/IPC\r\ncx004:3181:3221 [0] NCCL INFO Ring 09 : 0[0] -> 2[2] via P2P/IPC\r\ncx004:3182:3230 [1] NCCL INFO Ring 09 : 1[1] -> 0[0] via P2P/IPC\r\ncx004:3184:3228 [3] NCCL INFO Ring 09 : 3[3] -> 1[1] via P2P/IPC\r\ncx004:3183:3227 [2] NCCL INFO Ring 09 : 2[2] -> 3[3] via P2P/IPC\r\ncx004:3181:3221 [0] NCCL INFO Ring 10 : 0[0] -> 3[3] via P2P/IPC\r\ncx004:3182:3230 [1] NCCL INFO Ring 10 : 1[1] -> 2[2] via P2P/IPC\r\ncx004:3184:3228 [3] NCCL INFO Ring 10 : 3[3] -> 1[1] via P2P/IPC\r\ncx004:3183:3227 [2] NCCL INFO Ring 10 : 2[2] -> 0[0] via P2P/IPC\r\ncx004:3181:3221 [0] NCCL INFO Ring 11 : 0[0] -> 3[3] via P2P/IPC\r\ncx004:3182:3230 [1] NCCL INFO Ring 11 : 1[1] -> 0[0] via P2P/IPC\r\ncx004:3184:3228 [3] NCCL INFO Ring 11 : 3[3] -> 2[2] via P2P/IPC\r\ncx004:3183:3227 [2] NCCL INFO Ring 11 : 2[2] -> 1[1] via P2P/IPC\r\ncx004:3181:3221 [0] NCCL INFO Using 256 threads, Min Comp Cap 7, Trees disabled\r\ncx004:3181:3221 [0] NCCL INFO comm 0x2b38e0001b30 rank 0 nranks 4 cudaDev 0 nvmlDev 0 - Init COMPLETE\r\ncx004:3182:3230 [1] NCCL INFO comm 0x2aaf98001b30 rank 1 nranks 4 cudaDev 1 nvmlDev 1 - Init COMPLETE\r\ncx004:3181:3181 [0] NCCL INFO Launch mode Parallel\r\ncx004:3184:3228 [3] NCCL INFO comm 0x2b0190001b30 rank 3 nranks 4 cudaDev 3 nvmlDev 3 - Init COMPLETE\r\ncx004:3183:3227 [2] NCCL INFO comm 0x2ba478001b30 rank 2 nranks 4 cudaDev 2 nvmlDev 2 - Init COMPLETE\r\n[cx004:0/4] 2020-07-22 18:24:07,432 (trainer:200) INFO: 1/200epoch started\r\nProcess SpawnProcess-3:\r\nTraceback (most recent call last):\r\n  File \"/home/test/work/espnet/tools/venv/lib/python3.7/multiprocessing/process.py\", line 297, in _bootstrap\r\n    self.run()\r\n  File \"/home/test/work/espnet/tools/venv/lib/python3.7/multiprocessing/process.py\", line 99, in run\r\n    self._target(*self._args, **self._kwargs)\r\n  File \"/home/test/work/espnet/espnet2/tasks/abs_task.py\", line 1222, in main_worker\r\n    distributed_option=distributed_option,\r\n  File \"/home/test/work/espnet/espnet2/train/trainer.py\", line 212, in run\r\n    options=trainer_options,\r\n  File \"/home/test/work/espnet/espnet2/train/trainer.py\", line 367, in train_one_epoch\r\n    reporter.measure_iter_time(iterator, \"iter_time\"), 1\r\n  File \"/home/test/work/espnet/espnet2/train/reporter.py\", line 204, in measure_iter_time\r\n    iterator = iter(iterable)\r\n  File \"/home/test/work/espnet/tools/venv/lib/python3.7/site-packages/torch/utils/data/dataloader.py\", line 279, in __iter__\r\n    return _MultiProcessingDataLoaderIter(self)\r\n  File \"/home/test/work/espnet/tools/venv/lib/python3.7/site-packages/torch/utils/data/dataloader.py\", line 719, in __init__\r\n    w.start()\r\n  File \"/home/test/work/espnet/tools/venv/lib/python3.7/multiprocessing/process.py\", line 112, in start\r\n    self._popen = self._Popen(self)\r\n  File \"/home/test/work/espnet/tools/venv/lib/python3.7/multiprocessing/context.py\", line 223, in _Popen\r\n    return _default_context.get_context().Process._Popen(process_obj)\r\n  File \"/home/test/work/espnet/tools/venv/lib/python3.7/multiprocessing/context.py\", line 284, in _Popen\r\n    return Popen(process_obj)\r\n  File \"/home/test/work/espnet/tools/venv/lib/python3.7/multiprocessing/popen_spawn_posix.py\", line 32, in __init__\r\n    super().__init__(process_obj)\r\n  File \"/home/test/work/espnet/tools/venv/lib/python3.7/multiprocessing/popen_fork.py\", line 20, in __init__\r\n    self._launch(process_obj)\r\n  File \"/home/test/work/espnet/tools/venv/lib/python3.7/multiprocessing/popen_spawn_posix.py\", line 47, in _launch\r\n    reduction.dump(process_obj, fp)\r\n  File \"/home/test/work/espnet/tools/venv/lib/python3.7/multiprocessing/reduction.py\", line 60, in dump\r\n    ForkingPickler(file, protocol).dump(obj)\r\nTypeError: cannot serialize '_io.BufferedReader' object\r\nProcess SpawnProcess-4:\r\nTraceback (most recent call last):\r\n  File \"/home/test/work/espnet/tools/venv/lib/python3.7/multiprocessing/process.py\", line 297, in _bootstrap\r\n    self.run()\r\n  File \"/home/test/work/espnet/tools/venv/lib/python3.7/multiprocessing/process.py\", line 99, in run\r\n    self._target(*self._args, **self._kwargs)\r\n  File \"/home/test/work/espnet/espnet2/tasks/abs_task.py\", line 1222, in main_worker\r\n    distributed_option=distributed_option,\r\n  File \"/home/test/work/espnet/espnet2/train/trainer.py\", line 212, in run\r\n    options=trainer_options,\r\n  File \"/home/test/work/espnet/espnet2/train/trainer.py\", line 367, in train_one_epoch\r\n    reporter.measure_iter_time(iterator, \"iter_time\"), 1\r\n  File \"/home/test/work/espnet/espnet2/train/reporter.py\", line 204, in measure_iter_time\r\n    iterator = iter(iterable)\r\n  File \"/home/test/work/espnet/tools/venv/lib/python3.7/site-packages/torch/utils/data/dataloader.py\", line 279, in __iter__\r\n    return _MultiProcessingDataLoaderIter(self)\r\n  File \"/home/test/work/espnet/tools/venv/lib/python3.7/site-packages/torch/utils/data/dataloader.py\", line 719, in __init__\r\n    w.start()\r\n  File \"/home/test/work/espnet/tools/venv/lib/python3.7/multiprocessing/process.py\", line 112, in start\r\n    self._popen = self._Popen(self)\r\n  File \"/home/test/work/espnet/tools/venv/lib/python3.7/multiprocessing/context.py\", line 223, in _Popen\r\n    return _default_context.get_context().Process._Popen(process_obj)\r\n  File \"/home/test/work/espnet/tools/venv/lib/python3.7/multiprocessing/context.py\", line 284, in _Popen\r\n    return Popen(process_obj)\r\n  File \"/home/test/work/espnet/tools/venv/lib/python3.7/multiprocessing/popen_spawn_posix.py\", line 32, in __init__\r\n    super().__init__(process_obj)\r\n  File \"/home/test/work/espnet/tools/venv/lib/python3.7/multiprocessing/popen_fork.py\", line 20, in __init__\r\n    self._launch(process_obj)\r\n  File \"/home/test/work/espnet/tools/venv/lib/python3.7/multiprocessing/popen_spawn_posix.py\", line 47, in _launch\r\n    reduction.dump(process_obj, fp)\r\n  File \"/home/test/work/espnet/tools/venv/lib/python3.7/multiprocessing/reduction.py\", line 60, in dump\r\n    ForkingPickler(file, protocol).dump(obj)\r\nTypeError: cannot serialize '_io.BufferedReader' object\r\nProcess SpawnProcess-1:\r\nTraceback (most recent call last):\r\n  File \"/home/test/work/espnet/tools/venv/lib/python3.7/multiprocessing/process.py\", line 297, in _bootstrap\r\n    self.run()\r\n  File \"/home/test/work/espnet/tools/venv/lib/python3.7/multiprocessing/process.py\", line 99, in run\r\n    self._target(*self._args, **self._kwargs)\r\n  File \"/home/test/work/espnet/espnet2/tasks/abs_task.py\", line 1222, in main_worker\r\n    distributed_option=distributed_option,\r\n  File \"/home/test/work/espnet/espnet2/train/trainer.py\", line 212, in run\r\n    options=trainer_options,\r\n  File \"/home/test/work/espnet/espnet2/train/trainer.py\", line 367, in train_one_epoch\r\n    reporter.measure_iter_time(iterator, \"iter_time\"), 1\r\n  File \"/home/test/work/espnet/espnet2/train/reporter.py\", line 204, in measure_iter_time\r\n    iterator = iter(iterable)\r\n  File \"/home/test/work/espnet/tools/venv/lib/python3.7/site-packages/torch/utils/data/dataloader.py\", line 279, in __iter__\r\n    return _MultiProcessingDataLoaderIter(self)\r\n  File \"/home/test/work/espnet/tools/venv/lib/python3.7/site-packages/torch/utils/data/dataloader.py\", line 719, in __init__\r\n    w.start()\r\n  File \"/home/test/work/espnet/tools/venv/lib/python3.7/multiprocessing/process.py\", line 112, in start\r\n    self._popen = self._Popen(self)\r\n  File \"/home/test/work/espnet/tools/venv/lib/python3.7/multiprocessing/context.py\", line 223, in _Popen\r\n    return _default_context.get_context().Process._Popen(process_obj)\r\n  File \"/home/test/work/espnet/tools/venv/lib/python3.7/multiprocessing/context.py\", line 284, in _Popen\r\n    return Popen(process_obj)\r\n  File \"/home/test/work/espnet/tools/venv/lib/python3.7/multiprocessing/popen_spawn_posix.py\", line 32, in __init__\r\n    super().__init__(process_obj)\r\n  File \"/home/test/work/espnet/tools/venv/lib/python3.7/multiprocessing/popen_fork.py\", line 20, in __init__\r\n    self._launch(process_obj)\r\n  File \"/home/test/work/espnet/tools/venv/lib/python3.7/multiprocessing/popen_spawn_posix.py\", line 47, in _launch\r\n    reduction.dump(process_obj, fp)\r\n  File \"/home/test/work/espnet/tools/venv/lib/python3.7/multiprocessing/reduction.py\", line 60, in dump\r\n    ForkingPickler(file, protocol).dump(obj)\r\nTypeError: cannot serialize '_io.BufferedReader' object\r\nProcess SpawnProcess-2:\r\nTraceback (most recent call last):\r\n  File \"/home/test/work/espnet/tools/venv/lib/python3.7/multiprocessing/process.py\", line 297, in _bootstrap\r\n    self.run()\r\n  File \"/home/test/work/espnet/tools/venv/lib/python3.7/multiprocessing/process.py\", line 99, in run\r\n    self._target(*self._args, **self._kwargs)\r\n  File \"/home/test/work/espnet/espnet2/tasks/abs_task.py\", line 1222, in main_worker\r\n    distributed_option=distributed_option,\r\n  File \"/home/test/work/espnet/espnet2/train/trainer.py\", line 212, in run\r\n    options=trainer_options,\r\n  File \"/home/test/work/espnet/espnet2/train/trainer.py\", line 367, in train_one_epoch\r\n    reporter.measure_iter_time(iterator, \"iter_time\"), 1\r\n  File \"/home/test/work/espnet/espnet2/train/reporter.py\", line 204, in measure_iter_time\r\n    iterator = iter(iterable)\r\n  File \"/home/test/work/espnet/tools/venv/lib/python3.7/site-packages/torch/utils/data/dataloader.py\", line 279, in __iter__\r\n    return _MultiProcessingDataLoaderIter(self)\r\n  File \"/home/test/work/espnet/tools/venv/lib/python3.7/site-packages/torch/utils/data/dataloader.py\", line 719, in __init__\r\n    w.start()\r\n  File \"/home/test/work/espnet/tools/venv/lib/python3.7/multiprocessing/process.py\", line 112, in start\r\n    self._popen = self._Popen(self)\r\n  File \"/home/test/work/espnet/tools/venv/lib/python3.7/multiprocessing/context.py\", line 223, in _Popen\r\n    return _default_context.get_context().Process._Popen(process_obj)\r\n  File \"/home/test/work/espnet/tools/venv/lib/python3.7/multiprocessing/context.py\", line 284, in _Popen\r\n    return Popen(process_obj)\r\n  File \"/home/test/work/espnet/tools/venv/lib/python3.7/multiprocessing/popen_spawn_posix.py\", line 32, in __init__\r\n    super().__init__(process_obj)\r\n  File \"/home/test/work/espnet/tools/venv/lib/python3.7/multiprocessing/popen_fork.py\", line 20, in __init__\r\n    self._launch(process_obj)\r\n  File \"/home/test/work/espnet/tools/venv/lib/python3.7/multiprocessing/popen_spawn_posix.py\", line 47, in _launch\r\n    reduction.dump(process_obj, fp)\r\n  File \"/home/test/work/espnet/tools/venv/lib/python3.7/multiprocessing/reduction.py\", line 60, in dump\r\n    ForkingPickler(file, protocol).dump(obj)\r\nTypeError: cannot serialize '_io.BufferedReader' object\r\nTraceback (most recent call last):\r\n  File \"/home/test/work/espnet/tools/venv/lib/python3.7/runpy.py\", line 193, in _run_module_as_main\r\n    \"__main__\", mod_spec)\r\n  File \"/home/test/work/espnet/tools/venv/lib/python3.7/runpy.py\", line 85, in _run_code\r\n    exec(code, run_globals)\r\n  File \"/home/test/work/espnet/espnet2/bin/tts_train.py\", line 22, in <module>\r\n    main()\r\n  File \"/home/test/work/espnet/espnet2/bin/tts_train.py\", line 18, in main\r\n    TTSTask.main(cmd=cmd)\r\n  File \"/home/test/work/espnet/espnet2/tasks/abs_task.py\", line 931, in main\r\n    while not ProcessContext(processes, error_queues).join():\r\n  File \"/home/test/work/espnet/tools/venv/lib/python3.7/site-packages/torch/multiprocessing/spawn.py\", line 113, in join\r\n    (error_index, exitcode)\r\nException: process 0 terminated with exit code 1\r\n# Accounting: time=24 threads=1\r\n# Ended (code 1) at Wed Jul 22 18:24:10 JST 2020, elapsed time 24 seconds\r\n```\r\n\r\n## Environment:\r\n\r\n- CentOS 7.7\r\n- Conda / Python 3.7.3 / Pytorch 1.5.1 / cuda 10.1\r\n- ESPnet2\r\n\r\n## Note: \r\n\r\n- Use `cmd_backend=\"local\"`\r\n- Single GPU + `num_workers > 0` is fine.\r\n- Single node multi-gpu distributed training + `num_workers=0` is fine.", "reactions": {"url": "https://api.github.com/repos/espnet/espnet/issues/2198/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/espnet/espnet/issues/2198/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/espnet/espnet/issues/2185", "repository_url": "https://api.github.com/repos/espnet/espnet", "labels_url": "https://api.github.com/repos/espnet/espnet/issues/2185/labels{/name}", "comments_url": "https://api.github.com/repos/espnet/espnet/issues/2185/comments", "events_url": "https://api.github.com/repos/espnet/espnet/issues/2185/events", "html_url": "https://github.com/espnet/espnet/pull/2185", "id": 661293284, "node_id": "MDExOlB1bGxSZXF1ZXN0NDUyOTgxMjc5", "number": 2185, "title": "Fix bug in attention plotting", "user": {"login": "hirofumi0810", "id": 17924227, "node_id": "MDQ6VXNlcjE3OTI0MjI3", "avatar_url": "https://avatars.githubusercontent.com/u/17924227?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hirofumi0810", "html_url": "https://github.com/hirofumi0810", "followers_url": "https://api.github.com/users/hirofumi0810/followers", "following_url": "https://api.github.com/users/hirofumi0810/following{/other_user}", "gists_url": "https://api.github.com/users/hirofumi0810/gists{/gist_id}", "starred_url": "https://api.github.com/users/hirofumi0810/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hirofumi0810/subscriptions", "organizations_url": "https://api.github.com/users/hirofumi0810/orgs", "repos_url": "https://api.github.com/users/hirofumi0810/repos", "events_url": "https://api.github.com/users/hirofumi0810/events{/privacy}", "received_events_url": "https://api.github.com/users/hirofumi0810/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 777173273, "node_id": "MDU6TGFiZWw3NzcxNzMyNzM=", "url": "https://api.github.com/repos/espnet/espnet/labels/Bug", "name": "Bug", "color": "ee0701", "default": false, "description": "bug should be fixed"}, {"id": 1235334166, "node_id": "MDU6TGFiZWwxMjM1MzM0MTY2", "url": "https://api.github.com/repos/espnet/espnet/labels/Bugfix", "name": "Bugfix", "color": "7816c9", "default": false, "description": ""}, {"id": 1477221622, "node_id": "MDU6TGFiZWwxNDc3MjIxNjIy", "url": "https://api.github.com/repos/espnet/espnet/labels/CI", "name": "CI", "color": "5319e7", "default": false, "description": "Travis, Circle CI, etc"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/espnet/espnet/milestones/19", "html_url": "https://github.com/espnet/espnet/milestone/19", "labels_url": "https://api.github.com/repos/espnet/espnet/milestones/19/labels", "id": 5545198, "node_id": "MDk6TWlsZXN0b25lNTU0NTE5OA==", "number": 19, "title": "v.0.9.0", "description": "", "creator": {"login": "kan-bayashi", "id": 22779813, "node_id": "MDQ6VXNlcjIyNzc5ODEz", "avatar_url": "https://avatars.githubusercontent.com/u/22779813?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kan-bayashi", "html_url": "https://github.com/kan-bayashi", "followers_url": "https://api.github.com/users/kan-bayashi/followers", "following_url": "https://api.github.com/users/kan-bayashi/following{/other_user}", "gists_url": "https://api.github.com/users/kan-bayashi/gists{/gist_id}", "starred_url": "https://api.github.com/users/kan-bayashi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kan-bayashi/subscriptions", "organizations_url": "https://api.github.com/users/kan-bayashi/orgs", "repos_url": "https://api.github.com/users/kan-bayashi/repos", "events_url": "https://api.github.com/users/kan-bayashi/events{/privacy}", "received_events_url": "https://api.github.com/users/kan-bayashi/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 105, "state": "closed", "created_at": "2020-06-16T05:26:00Z", "updated_at": "2020-08-03T07:48:30Z", "due_on": "2020-07-31T07:00:00Z", "closed_at": "2020-08-03T07:48:30Z"}, "comments": 3, "created_at": "2020-07-20T02:51:09Z", "updated_at": "2020-07-22T12:53:19Z", "closed_at": "2020-07-22T12:53:19Z", "author_association": "COLLABORATOR", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/espnet/espnet/pulls/2185", "html_url": "https://github.com/espnet/espnet/pull/2185", "diff_url": "https://github.com/espnet/espnet/pull/2185.diff", "patch_url": "https://github.com/espnet/espnet/pull/2185.patch", "merged_at": "2020-07-22T12:53:19Z"}, "body": "I fixed a bug in attention plotting for non RNN-T models (see #2082 ).\r\n\r\nAlso, I slightly modified token visualization in MHA.\r\nThis is due to sos and eos tokens.\r\nI also considered subsampling in CNN layers for visualization (divided by a factor of 4).\r\n\r\nThen, I happened to find that the current plotting is conducted in the training mode (fixed to the eval mode).\r\nFurthermore, the sort order of inputs for attention calculation and data which is registered in `PlotAttentionReport` is not matched.\r\nThis was problematic when truncating the lengths of attention weights for the exact padding during visualization.", "reactions": {"url": "https://api.github.com/repos/espnet/espnet/issues/2185/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/espnet/espnet/issues/2185/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/espnet/espnet/issues/2169", "repository_url": "https://api.github.com/repos/espnet/espnet", "labels_url": "https://api.github.com/repos/espnet/espnet/issues/2169/labels{/name}", "comments_url": "https://api.github.com/repos/espnet/espnet/issues/2169/comments", "events_url": "https://api.github.com/repos/espnet/espnet/issues/2169/events", "html_url": "https://github.com/espnet/espnet/issues/2169", "id": 655445131, "node_id": "MDU6SXNzdWU2NTU0NDUxMzE=", "number": 2169, "title": "Multi-GPU training failure with PyTorch 1.5.1", "user": {"login": "unilight", "id": 11516009, "node_id": "MDQ6VXNlcjExNTE2MDA5", "avatar_url": "https://avatars.githubusercontent.com/u/11516009?v=4", "gravatar_id": "", "url": "https://api.github.com/users/unilight", "html_url": "https://github.com/unilight", "followers_url": "https://api.github.com/users/unilight/followers", "following_url": "https://api.github.com/users/unilight/following{/other_user}", "gists_url": "https://api.github.com/users/unilight/gists{/gist_id}", "starred_url": "https://api.github.com/users/unilight/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/unilight/subscriptions", "organizations_url": "https://api.github.com/users/unilight/orgs", "repos_url": "https://api.github.com/users/unilight/repos", "events_url": "https://api.github.com/users/unilight/events{/privacy}", "received_events_url": "https://api.github.com/users/unilight/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 777173273, "node_id": "MDU6TGFiZWw3NzcxNzMyNzM=", "url": "https://api.github.com/repos/espnet/espnet/labels/Bug", "name": "Bug", "color": "ee0701", "default": false, "description": "bug should be fixed"}, {"id": 1885270144, "node_id": "MDU6TGFiZWwxODg1MjcwMTQ0", "url": "https://api.github.com/repos/espnet/espnet/labels/Multiple%20GPUs", "name": "Multiple GPUs", "color": "c2e0c6", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2020-07-12T17:47:32Z", "updated_at": "2020-09-17T13:35:48Z", "closed_at": "2020-09-17T13:35:48Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "E.g. in `egs/libritts/tts1`, `$ CUDA_VISIBLE_DEVICES=0,1 ./run.sh --ngpu 2 --trans_type phn` will result in the following error in the log file,\r\n```\r\nException in main training loop: Caught StopIteration in replica 0 on device 0.\r\nOriginal Traceback (most recent call last):\r\n  File \"/home/huang18/VC/Experiments/espnet/tools/venv/lib/python3.6/site-packages/torch/nn/parallel/parallel_apply.py\", line 60, in _worker\r\n    output = module(*input, **kwargs)\r\n  File \"/home/huang18/VC/Experiments/espnet/tools/venv/lib/python3.6/site-packages/torch/nn/modules/module.py\", line 550, in __call__\r\n    result = self.forward(*input, **kwargs)\r\n  File \"/nas01/internal/wenchin-h/VC/Experiments/espnet/espnet/nets/pytorch_backend/e2e_tts_tacotron2.py\", line 746, in forward\r\n    after_outs, before_outs, logits, att_ws = self.dec(hs, hlens, ys)\r\n  File \"/home/huang18/VC/Experiments/espnet/tools/venv/lib/python3.6/site-packages/torch/nn/modules/module.py\", line 550, in __call__\r\n    result = self.forward(*input, **kwargs)\r\n  File \"/nas01/internal/wenchin-h/VC/Experiments/espnet/espnet/nets/pytorch_backend/tacotron2/decoder.py\", line 436, in forward\r\n    att_c, att_w = self.att(hs, hlens, z_list[0], prev_att_w)                                                                                                                                           File \"/home/huang18/VC/Experiments/espnet/tools/venv/lib/python3.6/site-packages/torch/nn/modules/module.py\", line 550, in __call__\r\n    result = self.forward(*input, **kwargs)                                                                                                                                                             File \"/nas01/internal/wenchin-h/VC/Experiments/espnet/espnet/nets/pytorch_backend/rnn/attentions.py\", line 365, in forward\r\n    self.mask = to_device(self, make_pad_mask(enc_hs_len))\r\n  File \"/nas01/internal/wenchin-h/VC/Experiments/espnet/espnet/nets/pytorch_backend/nets_utils.py\", line 24, in to_device\r\n    device = next(m.parameters()).device\r\nStopIteration\r\nTraceback (most recent call last):                                                                                                                                                                      File \"/home/huang18/VC/Experiments/espnet/tools/venv/lib/python3.6/site-packages/chainer/training/trainer.py\", line 316, in run\r\n    update()\r\n  File \"/nas01/internal/wenchin-h/VC/Experiments/espnet/espnet/tts/pytorch_backend/tts.py\", line 171, in update                                                                                           self.update_core()\r\n  File \"/nas01/internal/wenchin-h/VC/Experiments/espnet/espnet/tts/pytorch_backend/tts.py\", line 151, in update_core\r\n    loss = self.model(**x).mean() / self.accum_grad                                                                                                                                                     File \"/home/huang18/VC/Experiments/espnet/tools/venv/lib/python3.6/site-packages/torch/nn/modules/module.py\", line 550, in __call__\r\n    result = self.forward(*input, **kwargs)\r\n  File \"/home/huang18/VC/Experiments/espnet/tools/venv/lib/python3.6/site-packages/torch/nn/parallel/data_parallel.py\", line 155, in forward\r\n    outputs = self.parallel_apply(replicas, inputs, kwargs)\r\n  File \"/home/huang18/VC/Experiments/espnet/tools/venv/lib/python3.6/site-packages/torch/nn/parallel/data_parallel.py\", line 165, in parallel_apply\r\n    return parallel_apply(replicas, inputs, kwargs, self.device_ids[:len(replicas)])\r\n  File \"/home/huang18/VC/Experiments/espnet/tools/venv/lib/python3.6/site-packages/torch/nn/parallel/parallel_apply.py\", line 85, in parallel_apply\r\n    output.reraise()\r\n  File \"/home/huang18/VC/Experiments/espnet/tools/venv/lib/python3.6/site-packages/torch/_utils.py\", line 395, in reraise\r\n    raise self.exc_type(msg)\r\nWill finalize trainer extensions and updater before reraising the exception.\r\nTraceback (most recent call last):\r\n  File \"/home/huang18/VC/Experiments/espnet/egs/ljspeech/tts1/../../../espnet/bin/tts_train.py\", line 355, in <module>\r\n    main(sys.argv[1:])\r\n  File \"/home/huang18/VC/Experiments/espnet/egs/ljspeech/tts1/../../../espnet/bin/tts_train.py\", line 349, in main\r\n    train(args)\r\n  File \"/nas01/internal/wenchin-h/VC/Experiments/espnet/espnet/tts/pytorch_backend/tts.py\", line 563, in train\r\n    trainer.run()\r\n  File \"/home/huang18/VC/Experiments/espnet/tools/venv/lib/python3.6/site-packages/chainer/training/trainer.py\", line 349, in run\r\n    six.reraise(*exc_info)\r\n  File \"/home/huang18/VC/Experiments/espnet/tools/venv/lib/python3.6/site-packages/six.py\", line 693, in reraise\r\n    raise value\r\n  File \"/home/huang18/VC/Experiments/espnet/tools/venv/lib/python3.6/site-packages/chainer/training/trainer.py\", line 316, in run\r\n    update()\r\n  File \"/nas01/internal/wenchin-h/VC/Experiments/espnet/espnet/tts/pytorch_backend/tts.py\", line 171, in update\r\n    self.update_core()\r\n  File \"/nas01/internal/wenchin-h/VC/Experiments/espnet/espnet/tts/pytorch_backend/tts.py\", line 151, in update_core\r\n    loss = self.model(**x).mean() / self.accum_grad\r\n  File \"/home/huang18/VC/Experiments/espnet/tools/venv/lib/python3.6/site-packages/torch/nn/modules/module.py\", line 550, in __call__\r\n    result = self.forward(*input, **kwargs)\r\n  File \"/home/huang18/VC/Experiments/espnet/tools/venv/lib/python3.6/site-packages/torch/nn/parallel/data_parallel.py\", line 155, in forward\r\n    outputs = self.parallel_apply(replicas, inputs, kwargs)\r\n  File \"/home/huang18/VC/Experiments/espnet/tools/venv/lib/python3.6/site-packages/torch/nn/parallel/data_parallel.py\", line 165, in parallel_apply\r\n    return parallel_apply(replicas, inputs, kwargs, self.device_ids[:len(replicas)])\r\n  File \"/home/huang18/VC/Experiments/espnet/tools/venv/lib/python3.6/site-packages/torch/nn/parallel/parallel_apply.py\", line 85, in parallel_apply\r\n    output.reraise()\r\n  File \"/home/huang18/VC/Experiments/espnet/tools/venv/lib/python3.6/site-packages/torch/_utils.py\", line 395, in reraise\r\n    raise self.exc_type(msg)\r\nStopIteration: Caught StopIteration in replica 0 on device 0.\r\nOriginal Traceback (most recent call last):\r\n  File \"/home/huang18/VC/Experiments/espnet/tools/venv/lib/python3.6/site-packages/torch/nn/parallel/parallel_apply.py\", line 60, in _worker\r\n    output = module(*input, **kwargs)\r\n  File \"/home/huang18/VC/Experiments/espnet/tools/venv/lib/python3.6/site-packages/torch/nn/modules/module.py\", line 550, in __call__\r\n    result = self.forward(*input, **kwargs)\r\n  File \"/nas01/internal/wenchin-h/VC/Experiments/espnet/espnet/nets/pytorch_backend/e2e_tts_tacotron2.py\", line 746, in forward\r\n    after_outs, before_outs, logits, att_ws = self.dec(hs, hlens, ys)\r\n  File \"/home/huang18/VC/Experiments/espnet/tools/venv/lib/python3.6/site-packages/torch/nn/modules/module.py\", line 550, in __call__\r\n    result = self.forward(*input, **kwargs)\r\n  File \"/nas01/internal/wenchin-h/VC/Experiments/espnet/espnet/nets/pytorch_backend/tacotron2/decoder.py\", line 436, in forward\r\n    att_c, att_w = self.att(hs, hlens, z_list[0], prev_att_w)\r\n  File \"/home/huang18/VC/Experiments/espnet/tools/venv/lib/python3.6/site-packages/torch/nn/modules/module.py\", line 550, in __call__\r\n    result = self.forward(*input, **kwargs)\r\n  File \"/nas01/internal/wenchin-h/VC/Experiments/espnet/espnet/nets/pytorch_backend/rnn/attentions.py\", line 365, in forward\r\n    self.mask = to_device(self, make_pad_mask(enc_hs_len))\r\n  File \"/nas01/internal/wenchin-h/VC/Experiments/espnet/espnet/nets/pytorch_backend/nets_utils.py\", line 24, in to_device\r\n    device = next(m.parameters()).device\r\nStopIteration\r\n```\r\n\r\nAccording to this issue: https://github.com/pytorch/pytorch/issues/40457 , a quick fix is to use PyTorch 1.4.0.\r\nBut as the answer states, https://github.com/pytorch/pytorch/issues/40457#issuecomment-648396469 , accessing model parameters with `parameter()`  is the root cause. \r\nFor example, in\r\nhttps://github.com/espnet/espnet/blob/master/espnet/nets/pytorch_backend/nets_utils.py#L24 .\r\nI am not sure if there exists a small, fast solution to this issue that does not touch this seemingly fundamental, highly used function... Just reporting it in case someone else is also having this problem.", "reactions": {"url": "https://api.github.com/repos/espnet/espnet/issues/2169/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/espnet/espnet/issues/2169/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/espnet/espnet/issues/2166", "repository_url": "https://api.github.com/repos/espnet/espnet", "labels_url": "https://api.github.com/repos/espnet/espnet/issues/2166/labels{/name}", "comments_url": "https://api.github.com/repos/espnet/espnet/issues/2166/comments", "events_url": "https://api.github.com/repos/espnet/espnet/issues/2166/events", "html_url": "https://github.com/espnet/espnet/issues/2166", "id": 655178612, "node_id": "MDU6SXNzdWU2NTUxNzg2MTI=", "number": 2166, "title": "Transformer encoder with rnn attention ecoder is not supported yet", "user": {"login": "oshindow", "id": 49552492, "node_id": "MDQ6VXNlcjQ5NTUyNDky", "avatar_url": "https://avatars.githubusercontent.com/u/49552492?v=4", "gravatar_id": "", "url": "https://api.github.com/users/oshindow", "html_url": "https://github.com/oshindow", "followers_url": "https://api.github.com/users/oshindow/followers", "following_url": "https://api.github.com/users/oshindow/following{/other_user}", "gists_url": "https://api.github.com/users/oshindow/gists{/gist_id}", "starred_url": "https://api.github.com/users/oshindow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/oshindow/subscriptions", "organizations_url": "https://api.github.com/users/oshindow/orgs", "repos_url": "https://api.github.com/users/oshindow/repos", "events_url": "https://api.github.com/users/oshindow/events{/privacy}", "received_events_url": "https://api.github.com/users/oshindow/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 777173273, "node_id": "MDU6TGFiZWw3NzcxNzMyNzM=", "url": "https://api.github.com/repos/espnet/espnet/labels/Bug", "name": "Bug", "color": "ee0701", "default": false, "description": "bug should be fixed"}, {"id": 777173279, "node_id": "MDU6TGFiZWw3NzcxNzMyNzk=", "url": "https://api.github.com/repos/espnet/espnet/labels/Question", "name": "Question", "color": "cc317c", "default": false, "description": "Question"}, {"id": 1680978730, "node_id": "MDU6TGFiZWwxNjgwOTc4NzMw", "url": "https://api.github.com/repos/espnet/espnet/labels/ASR", "name": "ASR", "color": "3ee0d5", "default": false, "description": "Automatic speech recogntion"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2020-07-11T10:04:17Z", "updated_at": "2020-07-15T08:57:59Z", "closed_at": "2020-07-15T08:57:59Z", "author_association": "NONE", "active_lock_reason": null, "body": "May I ask the reason for ESPnet does not supported Transformer encoder in rnnt-att is the attention type will include both `MultiHeadedAttention` and attention types in `espnet/nets/pytorch_backend/rnn/attentions` ?  \r\n\r\nAnd an error occured when I run a `etype=Transformer`, `dtype=Transformer`, `rnnt_mode=rnnt` transducer model and returned:   \r\n```\r\nFile \"/home/oshindo/espnet/espnet/asr/asr_utils.py\", line 231, in get_attention_weight  \r\n    if len(att_w.shape) == 3:  \r\nAttributeError: 'str' object hs no attribute 'shape'  \r\n```\r\nI don't understand why the `att_w` is a 'str' type.", "reactions": {"url": "https://api.github.com/repos/espnet/espnet/issues/2166/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/espnet/espnet/issues/2166/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/espnet/espnet/issues/2162", "repository_url": "https://api.github.com/repos/espnet/espnet", "labels_url": "https://api.github.com/repos/espnet/espnet/issues/2162/labels{/name}", "comments_url": "https://api.github.com/repos/espnet/espnet/issues/2162/comments", "events_url": "https://api.github.com/repos/espnet/espnet/issues/2162/events", "html_url": "https://github.com/espnet/espnet/issues/2162", "id": 654507358, "node_id": "MDU6SXNzdWU2NTQ1MDczNTg=", "number": 2162, "title": "'mtl_mode' in espnet/asr/pytorch_backend/asr.py", "user": {"login": "oshindow", "id": 49552492, "node_id": "MDQ6VXNlcjQ5NTUyNDky", "avatar_url": "https://avatars.githubusercontent.com/u/49552492?v=4", "gravatar_id": "", "url": "https://api.github.com/users/oshindow", "html_url": "https://github.com/oshindow", "followers_url": "https://api.github.com/users/oshindow/followers", "following_url": "https://api.github.com/users/oshindow/following{/other_user}", "gists_url": "https://api.github.com/users/oshindow/gists{/gist_id}", "starred_url": "https://api.github.com/users/oshindow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/oshindow/subscriptions", "organizations_url": "https://api.github.com/users/oshindow/orgs", "repos_url": "https://api.github.com/users/oshindow/repos", "events_url": "https://api.github.com/users/oshindow/events{/privacy}", "received_events_url": "https://api.github.com/users/oshindow/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 777173273, "node_id": "MDU6TGFiZWw3NzcxNzMyNzM=", "url": "https://api.github.com/repos/espnet/espnet/labels/Bug", "name": "Bug", "color": "ee0701", "default": false, "description": "bug should be fixed"}, {"id": 1680978730, "node_id": "MDU6TGFiZWwxNjgwOTc4NzMw", "url": "https://api.github.com/repos/espnet/espnet/labels/ASR", "name": "ASR", "color": "3ee0d5", "default": false, "description": "Automatic speech recogntion"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2020-07-10T04:49:26Z", "updated_at": "2020-07-10T20:56:58Z", "closed_at": "2020-07-10T20:56:58Z", "author_association": "NONE", "active_lock_reason": null, "body": "Is this should be 'elif' in ctc mode? Otherwise, the \"transducer\" mode is not used. The source codes are as follows:\r\n`if \" transducer\" in args.model_module:\r\n    assert args.mtlalpha == 1.0\r\n    mtl_mde = \"transducer\"\r\n    logging.info(\"Pure transducer mode\")\r\nif args.mtlalpha == 1.0:\r\n    mtl_mde = \"ctc\"\r\n    logging.info(\"Pure CTC mode\")`\r\nAnother question: why we must use ctc in transducer mode ?", "reactions": {"url": "https://api.github.com/repos/espnet/espnet/issues/2162/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/espnet/espnet/issues/2162/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/espnet/espnet/issues/2151", "repository_url": "https://api.github.com/repos/espnet/espnet", "labels_url": "https://api.github.com/repos/espnet/espnet/issues/2151/labels{/name}", "comments_url": "https://api.github.com/repos/espnet/espnet/issues/2151/comments", "events_url": "https://api.github.com/repos/espnet/espnet/issues/2151/events", "html_url": "https://github.com/espnet/espnet/issues/2151", "id": 650831799, "node_id": "MDU6SXNzdWU2NTA4MzE3OTk=", "number": 2151, "title": "TypeError: 'kenlm.State' object is not subscriptable", "user": {"login": "astikbiswas", "id": 63640749, "node_id": "MDQ6VXNlcjYzNjQwNzQ5", "avatar_url": "https://avatars.githubusercontent.com/u/63640749?v=4", "gravatar_id": "", "url": "https://api.github.com/users/astikbiswas", "html_url": "https://github.com/astikbiswas", "followers_url": "https://api.github.com/users/astikbiswas/followers", "following_url": "https://api.github.com/users/astikbiswas/following{/other_user}", "gists_url": "https://api.github.com/users/astikbiswas/gists{/gist_id}", "starred_url": "https://api.github.com/users/astikbiswas/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/astikbiswas/subscriptions", "organizations_url": "https://api.github.com/users/astikbiswas/orgs", "repos_url": "https://api.github.com/users/astikbiswas/repos", "events_url": "https://api.github.com/users/astikbiswas/events{/privacy}", "received_events_url": "https://api.github.com/users/astikbiswas/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 777173273, "node_id": "MDU6TGFiZWw3NzcxNzMyNzM=", "url": "https://api.github.com/repos/espnet/espnet/labels/Bug", "name": "Bug", "color": "ee0701", "default": false, "description": "bug should be fixed"}, {"id": 1680978730, "node_id": "MDU6TGFiZWwxNjgwOTc4NzMw", "url": "https://api.github.com/repos/espnet/espnet/labels/ASR", "name": "ASR", "color": "3ee0d5", "default": false, "description": "Automatic speech recogntion"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 25, "created_at": "2020-07-04T05:36:55Z", "updated_at": "2020-12-08T09:56:56Z", "closed_at": "2020-12-08T09:56:56Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hello All,\r\n\r\nI have been trying to follow aishell/asr1/run.sh recipe to implement n-gram scorer using kenlm. Everything went fine. However, I have encountered an error during decoding as given below:\r\n 2020-07-03 15:16:48,343 (recog:133) INFO: (1/514) decoding engsot_00002_u00001_engsot\r\n2020-07-03 15:16:48,607 (beam_search:353) INFO: max output length: 54\r\n2020-07-03 15:16:48,607 (beam_search:354) INFO: min output length: 0\r\nTraceback (most recent call last):\r\n  File \"/espnet/espnet/bin/asr_recog.py\", line 311, in <module>\r\n    main(sys.argv[1:])\r\n  File \"/espnet/espnet/bin/asr_recog.py\", line 281, in main\r\n    recog_v2(args)\r\n  File \"/espnet/espnet/asr/pytorch_backend/recog.py\", line 138, in recog_v2\r\n    x=enc, maxlenratio=args.maxlenratio, minlenratio=args.minlenratio\r\n  File \"/espnet/tools/venv/lib/python3.7/site-packages/torch/nn/modules/module.py\", line 489, in __call__\r\n    result = self.forward(*input, **kwargs)\r\n  File \"/espnet/espnet/nets/beam_search.py\", line 361, in forward\r\n    best = self.search(running_hyps, x)\r\n  File \"/espnet/espnet/nets/beam_search.py\", line 321, in search\r\n    states=self.merge_states(states, part_states, part_j),\r\n  File \"/espnet/espnet/nets/beam_search.py\", line 276, in merge_states\r\n    new_states[k] = d.select_state(part_states[k], part_idx)\r\n  File \"/espnet/espnet/nets/scorer_interface.py\", line 51, in select_state\r\n    return None if state is None else state[i]\r\n**TypeError: 'kenlm.State' object is not subscriptable**\r\n\r\nI did google search but not found any helpful advise. Please advise me how to get rid of that.\r\n\r\nThe decoding snippet is as per standard format:\r\n${decode_cmd} JOB=1:${nj} ${expdir}/${decode_dir}/log/decode.JOB.log \\\r\n            asr_recog.py \\\r\n            --config ${decode_config} \\\r\n            --ngpu ${ngpu} \\\r\n            --backend ${backend} \\\r\n            --batchsize 0 \\\r\n            --recog-json ${feat_recog_dir}/split${nj}utt/data.JOB.json \\\r\n            --result-label ${expdir}/${decode_dir}/data.JOB.json \\\r\n            --model ${expdir}/results/${recog_model}  \\\r\n            --rnnlm ${lmexpdir}/rnnlm.model.best \\\r\n            --ngram-model ${ngramexpdir}/${n_gram}gram.bin \\\r\n            --api v2\r\n", "reactions": {"url": "https://api.github.com/repos/espnet/espnet/issues/2151/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/espnet/espnet/issues/2151/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/espnet/espnet/issues/2146", "repository_url": "https://api.github.com/repos/espnet/espnet", "labels_url": "https://api.github.com/repos/espnet/espnet/issues/2146/labels{/name}", "comments_url": "https://api.github.com/repos/espnet/espnet/issues/2146/comments", "events_url": "https://api.github.com/repos/espnet/espnet/issues/2146/events", "html_url": "https://github.com/espnet/espnet/issues/2146", "id": 650698828, "node_id": "MDU6SXNzdWU2NTA2OTg4Mjg=", "number": 2146, "title": "CTC align test often failed", "user": {"login": "sw005320", "id": 11741550, "node_id": "MDQ6VXNlcjExNzQxNTUw", "avatar_url": "https://avatars.githubusercontent.com/u/11741550?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sw005320", "html_url": "https://github.com/sw005320", "followers_url": "https://api.github.com/users/sw005320/followers", "following_url": "https://api.github.com/users/sw005320/following{/other_user}", "gists_url": "https://api.github.com/users/sw005320/gists{/gist_id}", "starred_url": "https://api.github.com/users/sw005320/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sw005320/subscriptions", "organizations_url": "https://api.github.com/users/sw005320/orgs", "repos_url": "https://api.github.com/users/sw005320/repos", "events_url": "https://api.github.com/users/sw005320/events{/privacy}", "received_events_url": "https://api.github.com/users/sw005320/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 777173273, "node_id": "MDU6TGFiZWw3NzcxNzMyNzM=", "url": "https://api.github.com/repos/espnet/espnet/labels/Bug", "name": "Bug", "color": "ee0701", "default": false, "description": "bug should be fixed"}, {"id": 1477221622, "node_id": "MDU6TGFiZWwxNDc3MjIxNjIy", "url": "https://api.github.com/repos/espnet/espnet/labels/CI", "name": "CI", "color": "5319e7", "default": false, "description": "Travis, Circle CI, etc"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2020-07-03T17:02:46Z", "updated_at": "2021-09-27T14:51:28Z", "closed_at": "2021-09-27T14:51:28Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "@simpleoier, `test_utils/integration_test_ctc_align_wav.bats` often failed....\r\nDo you have some ideas to fix it?\r\n```\r\nnot ok 1 ctc_align_wav\r\n# (in test file test_utils/integration_test_ctc_align_wav.bats, line 14)\r\n#   `../../../utils/ctc_align_wav.sh --stop-stage 2 --align_dir ${tmpdir} --models ${model} ${wav} \"${transcription}\"' failed with status 2\r\n# Permission denied: https://drive.google.com/uc?id=1Az-4H25uwnEFa4lENc-EKiPaWXaijcJp\r\n# Maybe you need to change permission over 'Anyone with the link'?\r\n# \r\n# gzip: stdin: unexpected end of file\r\n# tar: Child returned status 1\r\n# tar: Error is not recoverable: exiting now\r\n```", "reactions": {"url": "https://api.github.com/repos/espnet/espnet/issues/2146/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/espnet/espnet/issues/2146/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/espnet/espnet/issues/2143", "repository_url": "https://api.github.com/repos/espnet/espnet", "labels_url": "https://api.github.com/repos/espnet/espnet/issues/2143/labels{/name}", "comments_url": "https://api.github.com/repos/espnet/espnet/issues/2143/comments", "events_url": "https://api.github.com/repos/espnet/espnet/issues/2143/events", "html_url": "https://github.com/espnet/espnet/issues/2143", "id": 650244046, "node_id": "MDU6SXNzdWU2NTAyNDQwNDY=", "number": 2143, "title": "Error of default  language model setting for  espnet2 WSJ task", "user": {"login": "hchung12", "id": 12407741, "node_id": "MDQ6VXNlcjEyNDA3NzQx", "avatar_url": "https://avatars.githubusercontent.com/u/12407741?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hchung12", "html_url": "https://github.com/hchung12", "followers_url": "https://api.github.com/users/hchung12/followers", "following_url": "https://api.github.com/users/hchung12/following{/other_user}", "gists_url": "https://api.github.com/users/hchung12/gists{/gist_id}", "starred_url": "https://api.github.com/users/hchung12/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hchung12/subscriptions", "organizations_url": "https://api.github.com/users/hchung12/orgs", "repos_url": "https://api.github.com/users/hchung12/repos", "events_url": "https://api.github.com/users/hchung12/events{/privacy}", "received_events_url": "https://api.github.com/users/hchung12/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 777173273, "node_id": "MDU6TGFiZWw3NzcxNzMyNzM=", "url": "https://api.github.com/repos/espnet/espnet/labels/Bug", "name": "Bug", "color": "ee0701", "default": false, "description": "bug should be fixed"}, {"id": 1680978730, "node_id": "MDU6TGFiZWwxNjgwOTc4NzMw", "url": "https://api.github.com/repos/espnet/espnet/labels/ASR", "name": "ASR", "color": "3ee0d5", "default": false, "description": "Automatic speech recogntion"}, {"id": 1889036170, "node_id": "MDU6TGFiZWwxODg5MDM2MTcw", "url": "https://api.github.com/repos/espnet/espnet/labels/ESPnet2", "name": "ESPnet2", "color": "f2db68", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-07-02T22:56:04Z", "updated_at": "2020-07-05T16:52:16Z", "closed_at": "2020-07-05T16:52:16Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "In the default LM training configuration file \"espnet/egs2/wsj/asr1/conf/tuning/train_lm.yaml\", the best_model_criterion may be wrong:\r\nbest_model_criterion:\r\n-   - valid\r\n    - acc\r\n    - max\r\n\r\nIt should be \r\nbest_model_criterion:\r\n-   - valid\r\n    - loss\r\n    - min", "reactions": {"url": "https://api.github.com/repos/espnet/espnet/issues/2143/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/espnet/espnet/issues/2143/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/espnet/espnet/issues/2137", "repository_url": "https://api.github.com/repos/espnet/espnet", "labels_url": "https://api.github.com/repos/espnet/espnet/issues/2137/labels{/name}", "comments_url": "https://api.github.com/repos/espnet/espnet/issues/2137/comments", "events_url": "https://api.github.com/repos/espnet/espnet/issues/2137/events", "html_url": "https://github.com/espnet/espnet/issues/2137", "id": 649752043, "node_id": "MDU6SXNzdWU2NDk3NTIwNDM=", "number": 2137, "title": "ASR transformer decode on librispeech using GPU  bug", "user": {"login": "BuaaAlban", "id": 25258181, "node_id": "MDQ6VXNlcjI1MjU4MTgx", "avatar_url": "https://avatars.githubusercontent.com/u/25258181?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuaaAlban", "html_url": "https://github.com/BuaaAlban", "followers_url": "https://api.github.com/users/BuaaAlban/followers", "following_url": "https://api.github.com/users/BuaaAlban/following{/other_user}", "gists_url": "https://api.github.com/users/BuaaAlban/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuaaAlban/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuaaAlban/subscriptions", "organizations_url": "https://api.github.com/users/BuaaAlban/orgs", "repos_url": "https://api.github.com/users/BuaaAlban/repos", "events_url": "https://api.github.com/users/BuaaAlban/events{/privacy}", "received_events_url": "https://api.github.com/users/BuaaAlban/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 777173273, "node_id": "MDU6TGFiZWw3NzcxNzMyNzM=", "url": "https://api.github.com/repos/espnet/espnet/labels/Bug", "name": "Bug", "color": "ee0701", "default": false, "description": "bug should be fixed"}, {"id": 1680978730, "node_id": "MDU6TGFiZWwxNjgwOTc4NzMw", "url": "https://api.github.com/repos/espnet/espnet/labels/ASR", "name": "ASR", "color": "3ee0d5", "default": false, "description": "Automatic speech recogntion"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2020-07-02T08:45:14Z", "updated_at": "2020-07-08T21:10:53Z", "closed_at": "2020-07-07T07:09:04Z", "author_association": "NONE", "active_lock_reason": null, "body": "the training config is default. \r\nFor stage 5 decoding , I have set ngpu=1\r\nFor nj =32 or 16, it will meet CUDA memory error.\r\nBut when I reduce nj to 4, anothor  error occurs. \r\n\r\n`\r\nTraceback (most recent call last):\r\n  File \"/scratch/workspace/bokangz/project/espnet-master/egs/librispeech/asr1/../../../espnet/bin/asr_recog.py\", line 296, in <module>\r\n    main(sys.argv[1:])\r\n  File \"/scratch/workspace/bokangz/project/espnet-master/egs/librispeech/asr1/../../../espnet/bin/asr_recog.py\", line 274, in main\r\n    recog(args)\r\n  File \"/scratch/workspace/bokangz/project/espnet-master/espnet/asr/pytorch_backend/asr.py\", line 960, in recog\r\n    feat, args, train_args.char_list, rnnlm\r\n  File \"/scratch/workspace/bokangz/project/espnet-master/espnet/nets/pytorch_backend/e2e_asr_transformer.py\", line 321, in recognize\r\n    enc_output = self.encode(x).unsqueeze(0)\r\n  File \"/scratch/workspace/bokangz/project/espnet-master/espnet/nets/pytorch_backend/e2e_asr_transformer.py\", line 308, in encode\r\n    enc_output, _ = self.encoder(x, None)\r\n  File \"/proj/xcdhdstaff1/bokangz/anaconda3/envs/espnet/lib/python3.6/site-packages/torch/nn/modules/module.py\", line 489, in __call__\r\n    result = self.forward(*input, **kwargs)\r\n  File \"/scratch/workspace/bokangz/project/espnet-master/espnet/nets/pytorch_backend/transformer/encoder.py\", line 160, in forward\r\n    xs, masks = self.embed(xs, masks)\r\n  File \"/proj/xcdhdstaff1/bokangz/anaconda3/envs/espnet/lib/python3.6/site-packages/torch/nn/modules/module.py\", line 489, in __call__\r\n    result = self.forward(*input, **kwargs)\r\n  File \"/scratch/workspace/bokangz/project/espnet-master/espnet/nets/pytorch_backend/transformer/subsampling.py\", line 46, in forward\r\n    x = self.conv(x)\r\n  File \"/proj/xcdhdstaff1/bokangz/anaconda3/envs/espnet/lib/python3.6/site-packages/torch/nn/modules/module.py\", line 489, in __call__\r\n    result = self.forward(*input, **kwargs)\r\n  File \"/proj/xcdhdstaff1/bokangz/anaconda3/envs/espnet/lib/python3.6/site-packages/torch/nn/modules/container.py\", line 92, in forward\r\n    input = module(input)\r\n  File \"/proj/xcdhdstaff1/bokangz/anaconda3/envs/espnet/lib/python3.6/site-packages/torch/nn/modules/module.py\", line 489, in __call__\r\n    result = self.forward(*input, **kwargs)\r\n  File \"/proj/xcdhdstaff1/bokangz/anaconda3/envs/espnet/lib/python3.6/site-packages/torch/nn/modules/conv.py\", line 320, in forward\r\n    self.padding, self.dilation, self.groups)\r\n**RuntimeError: Input type (torch.FloatTensor) and weight type (torch.cuda.FloatTensor) should be the same**\r\n\r\n`\r\n", "reactions": {"url": "https://api.github.com/repos/espnet/espnet/issues/2137/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/espnet/espnet/issues/2137/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/espnet/espnet/issues/2121", "repository_url": "https://api.github.com/repos/espnet/espnet", "labels_url": "https://api.github.com/repos/espnet/espnet/issues/2121/labels{/name}", "comments_url": "https://api.github.com/repos/espnet/espnet/issues/2121/comments", "events_url": "https://api.github.com/repos/espnet/espnet/issues/2121/events", "html_url": "https://github.com/espnet/espnet/issues/2121", "id": 647498508, "node_id": "MDU6SXNzdWU2NDc0OTg1MDg=", "number": 2121, "title": "Libritts run.sh error", "user": {"login": "seanle24245", "id": 17115934, "node_id": "MDQ6VXNlcjE3MTE1OTM0", "avatar_url": "https://avatars.githubusercontent.com/u/17115934?v=4", "gravatar_id": "", "url": "https://api.github.com/users/seanle24245", "html_url": "https://github.com/seanle24245", "followers_url": "https://api.github.com/users/seanle24245/followers", "following_url": "https://api.github.com/users/seanle24245/following{/other_user}", "gists_url": "https://api.github.com/users/seanle24245/gists{/gist_id}", "starred_url": "https://api.github.com/users/seanle24245/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/seanle24245/subscriptions", "organizations_url": "https://api.github.com/users/seanle24245/orgs", "repos_url": "https://api.github.com/users/seanle24245/repos", "events_url": "https://api.github.com/users/seanle24245/events{/privacy}", "received_events_url": "https://api.github.com/users/seanle24245/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 777173273, "node_id": "MDU6TGFiZWw3NzcxNzMyNzM=", "url": "https://api.github.com/repos/espnet/espnet/labels/Bug", "name": "Bug", "color": "ee0701", "default": false, "description": "bug should be fixed"}, {"id": 1356233216, "node_id": "MDU6TGFiZWwxMzU2MjMzMjE2", "url": "https://api.github.com/repos/espnet/espnet/labels/Recipe", "name": "Recipe", "color": "f7e171", "default": false, "description": ""}, {"id": 1680978730, "node_id": "MDU6TGFiZWwxNjgwOTc4NzMw", "url": "https://api.github.com/repos/espnet/espnet/labels/ASR", "name": "ASR", "color": "3ee0d5", "default": false, "description": "Automatic speech recogntion"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2020-06-29T16:08:46Z", "updated_at": "2020-07-24T14:50:32Z", "closed_at": "2020-07-24T14:50:32Z", "author_association": "NONE", "active_lock_reason": null, "body": "I'm getting this error when I try to run run.sh in the libritts tts1 directory:\r\n\r\nutils/validate_data_dir.sh: text contains 1 lines with non-printable characters\r\n\r\nI don't know where I could be getting this error from.  I haven't made any modifications to anything inside of libritts.", "reactions": {"url": "https://api.github.com/repos/espnet/espnet/issues/2121/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/espnet/espnet/issues/2121/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/espnet/espnet/issues/2105", "repository_url": "https://api.github.com/repos/espnet/espnet", "labels_url": "https://api.github.com/repos/espnet/espnet/issues/2105/labels{/name}", "comments_url": "https://api.github.com/repos/espnet/espnet/issues/2105/comments", "events_url": "https://api.github.com/repos/espnet/espnet/issues/2105/events", "html_url": "https://github.com/espnet/espnet/issues/2105", "id": 646354292, "node_id": "MDU6SXNzdWU2NDYzNTQyOTI=", "number": 2105, "title": "espnet2 data preparation for the test sets", "user": {"login": "sw005320", "id": 11741550, "node_id": "MDQ6VXNlcjExNzQxNTUw", "avatar_url": "https://avatars.githubusercontent.com/u/11741550?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sw005320", "html_url": "https://github.com/sw005320", "followers_url": "https://api.github.com/users/sw005320/followers", "following_url": "https://api.github.com/users/sw005320/following{/other_user}", "gists_url": "https://api.github.com/users/sw005320/gists{/gist_id}", "starred_url": "https://api.github.com/users/sw005320/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sw005320/subscriptions", "organizations_url": "https://api.github.com/users/sw005320/orgs", "repos_url": "https://api.github.com/users/sw005320/repos", "events_url": "https://api.github.com/users/sw005320/events{/privacy}", "received_events_url": "https://api.github.com/users/sw005320/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 777173273, "node_id": "MDU6TGFiZWw3NzcxNzMyNzM=", "url": "https://api.github.com/repos/espnet/espnet/labels/Bug", "name": "Bug", "color": "ee0701", "default": false, "description": "bug should be fixed"}, {"id": 1356233216, "node_id": "MDU6TGFiZWwxMzU2MjMzMjE2", "url": "https://api.github.com/repos/espnet/espnet/labels/Recipe", "name": "Recipe", "color": "f7e171", "default": false, "description": ""}, {"id": 1889036170, "node_id": "MDU6TGFiZWwxODg5MDM2MTcw", "url": "https://api.github.com/repos/espnet/espnet/labels/ESPnet2", "name": "ESPnet2", "color": "f2db68", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2020-06-26T15:50:36Z", "updated_at": "2020-06-27T08:43:36Z", "closed_at": "2020-06-27T08:43:36Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "@kamo-naoyuki, in espnet2, I found that the eval sets are also pruned in stage 4, which we should not do because we cannot compare it with the other reports.\r\nWe should not even remove the utterance that does not have any token because it also changes the sentence error rate.\r\nCould you fix it?\r\n", "reactions": {"url": "https://api.github.com/repos/espnet/espnet/issues/2105/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/espnet/espnet/issues/2105/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/espnet/espnet/issues/2084", "repository_url": "https://api.github.com/repos/espnet/espnet", "labels_url": "https://api.github.com/repos/espnet/espnet/issues/2084/labels{/name}", "comments_url": "https://api.github.com/repos/espnet/espnet/issues/2084/comments", "events_url": "https://api.github.com/repos/espnet/espnet/issues/2084/events", "html_url": "https://github.com/espnet/espnet/issues/2084", "id": 644185563, "node_id": "MDU6SXNzdWU2NDQxODU1NjM=", "number": 2084, "title": "RuntimeError: arguments are located on different GPUs", "user": {"login": "psridhar-asapp", "id": 54286677, "node_id": "MDQ6VXNlcjU0Mjg2Njc3", "avatar_url": "https://avatars.githubusercontent.com/u/54286677?v=4", "gravatar_id": "", "url": "https://api.github.com/users/psridhar-asapp", "html_url": "https://github.com/psridhar-asapp", "followers_url": "https://api.github.com/users/psridhar-asapp/followers", "following_url": "https://api.github.com/users/psridhar-asapp/following{/other_user}", "gists_url": "https://api.github.com/users/psridhar-asapp/gists{/gist_id}", "starred_url": "https://api.github.com/users/psridhar-asapp/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/psridhar-asapp/subscriptions", "organizations_url": "https://api.github.com/users/psridhar-asapp/orgs", "repos_url": "https://api.github.com/users/psridhar-asapp/repos", "events_url": "https://api.github.com/users/psridhar-asapp/events{/privacy}", "received_events_url": "https://api.github.com/users/psridhar-asapp/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 777173273, "node_id": "MDU6TGFiZWw3NzcxNzMyNzM=", "url": "https://api.github.com/repos/espnet/espnet/labels/Bug", "name": "Bug", "color": "ee0701", "default": false, "description": "bug should be fixed"}, {"id": 1680978730, "node_id": "MDU6TGFiZWwxNjgwOTc4NzMw", "url": "https://api.github.com/repos/espnet/espnet/labels/ASR", "name": "ASR", "color": "3ee0d5", "default": false, "description": "Automatic speech recogntion"}], "state": "closed", "locked": false, "assignee": {"login": "b-flo", "id": 41155456, "node_id": "MDQ6VXNlcjQxMTU1NDU2", "avatar_url": "https://avatars.githubusercontent.com/u/41155456?v=4", "gravatar_id": "", "url": "https://api.github.com/users/b-flo", "html_url": "https://github.com/b-flo", "followers_url": "https://api.github.com/users/b-flo/followers", "following_url": "https://api.github.com/users/b-flo/following{/other_user}", "gists_url": "https://api.github.com/users/b-flo/gists{/gist_id}", "starred_url": "https://api.github.com/users/b-flo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/b-flo/subscriptions", "organizations_url": "https://api.github.com/users/b-flo/orgs", "repos_url": "https://api.github.com/users/b-flo/repos", "events_url": "https://api.github.com/users/b-flo/events{/privacy}", "received_events_url": "https://api.github.com/users/b-flo/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "b-flo", "id": 41155456, "node_id": "MDQ6VXNlcjQxMTU1NDU2", "avatar_url": "https://avatars.githubusercontent.com/u/41155456?v=4", "gravatar_id": "", "url": "https://api.github.com/users/b-flo", "html_url": "https://github.com/b-flo", "followers_url": "https://api.github.com/users/b-flo/followers", "following_url": "https://api.github.com/users/b-flo/following{/other_user}", "gists_url": "https://api.github.com/users/b-flo/gists{/gist_id}", "starred_url": "https://api.github.com/users/b-flo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/b-flo/subscriptions", "organizations_url": "https://api.github.com/users/b-flo/orgs", "repos_url": "https://api.github.com/users/b-flo/repos", "events_url": "https://api.github.com/users/b-flo/events{/privacy}", "received_events_url": "https://api.github.com/users/b-flo/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 4, "created_at": "2020-06-23T22:20:46Z", "updated_at": "2020-09-20T16:06:07Z", "closed_at": "2020-09-20T16:06:06Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi I ran into the following issue when training an RNN-T model with 8 GPUs. Both the encoder and decoder are stacked LSTMs. I asked espnet to report cer/wer. The error always happens at that step. Here is the full stack\r\n\r\n\r\nTraceback (most recent call last):\r\n  File \"/home/psridhar/espnet/egs/lima/asr1/../../../espnet/bin/asr_train.py\", line 628, in <module>\r\n    main(sys.argv[1:])\r\n  File \"/home/psridhar/espnet/egs/lima/asr1/../../../espnet/bin/asr_train.py\", line 614, in main\r\n    train(args)\r\n  File \"/home/psridhar/espnet/espnet/asr/pytorch_backend/asr.py\", line 833, in train\r\n    trainer.run()\r\n  File \"/home/psridhar/espnet/tools/venv/lib/python3.7/site-packages/chainer/training/trainer.py\", line 349, in run\r\n    six.reraise(*exc_info)\r\n  File \"/home/psridhar/espnet/tools/venv/lib/python3.7/site-packages/six.py\", line 703, in reraise\r\n    raise value\r\n  File \"/home/psridhar/espnet/tools/venv/lib/python3.7/site-packages/chainer/training/trainer.py\", line 319, in run\r\n    entry.extension(self)\r\n  File \"/home/psridhar/espnet/espnet/utils/training/evaluator.py\", line 10, in __call__\r\n    ret = super().__call__(trainer)\r\n  File \"/home/psridhar/espnet/tools/venv/lib/python3.7/site-packages/chainer/training/extensions/evaluator.py\", line 161, in __call__\r\n    result = self.evaluate()\r\n  File \"/home/psridhar/espnet/espnet/asr/pytorch_backend/asr.py\", line 134, in evaluate\r\n    data_parallel(self.model, x, range(self.ngpu))\r\n  File \"/home/psridhar/espnet/tools/venv/lib/python3.7/site-packages/torch/nn/parallel/data_parallel.py\", line 188, in data_parallel\r\n    outputs = parallel_apply(replicas, inputs, module_kwargs, used_device_ids)\r\n  File \"/home/psridhar/espnet/tools/venv/lib/python3.7/site-packages/torch/nn/parallel/parallel_apply.py\", line 83, in parallel_apply\r\n    raise output\r\n  File \"/home/psridhar/espnet/tools/venv/lib/python3.7/site-packages/torch/nn/parallel/parallel_apply.py\", line 59, in _worker\r\n    output = module(*input, **kwargs)\r\n  File \"/home/psridhar/espnet/tools/venv/lib/python3.7/site-packages/torch/nn/modules/module.py\", line 489, in __call__\r\n    result = self.forward(*input, **kwargs)\r\n  File \"/home/psridhar/espnet/espnet/nets/pytorch_backend/e2e_asr_transducer.py\", line 426, in forward\r\n    cer, wer = self.error_calculator(hs_pad, ys_pad)\r\n  File \"/home/psridhar/espnet/espnet/nets/e2e_asr_common.py\", line 305, in __call__\r\n    nbest_hyps = self.dec.recognize_beam(hs_pad[b], self.recog_args)\r\n  File \"/home/psridhar/espnet/espnet/nets/pytorch_backend/transducer/rnn_decoders.py\", line 268, in recognize_beam\r\n    ytu = F.log_softmax(self.joint(hi, y[0]), dim=0)\r\n  File \"/home/psridhar/espnet/espnet/nets/pytorch_backend/transducer/rnn_decoders.py\", line 143, in joint\r\n    z = torch.tanh(self.lin_enc(h_enc) + self.lin_dec(h_dec))\r\n  File \"/home/psridhar/espnet/tools/venv/lib/python3.7/site-packages/torch/nn/modules/module.py\", line 489, in __call__\r\n    result = self.forward(*input, **kwargs)\r\n  File \"/home/psridhar/espnet/tools/venv/lib/python3.7/site-packages/torch/nn/modules/linear.py\", line 67, in forward\r\n    return F.linear(input, self.weight, self.bias)\r\n  File \"/home/psridhar/espnet/tools/venv/lib/python3.7/site-packages/torch/nn/functional.py\", line 1354, in linear\r\n    output = input.matmul(weight.t())\r\nRuntimeError: arguments are located on different GPUs at /opt/conda/conda-bld/pytorch_1549636813070/work/aten/src/THC/generic/THCTensorMathBlas.cu:253", "reactions": {"url": "https://api.github.com/repos/espnet/espnet/issues/2084/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/espnet/espnet/issues/2084/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/espnet/espnet/issues/2078", "repository_url": "https://api.github.com/repos/espnet/espnet", "labels_url": "https://api.github.com/repos/espnet/espnet/issues/2078/labels{/name}", "comments_url": "https://api.github.com/repos/espnet/espnet/issues/2078/comments", "events_url": "https://api.github.com/repos/espnet/espnet/issues/2078/events", "html_url": "https://github.com/espnet/espnet/issues/2078", "id": 643715108, "node_id": "MDU6SXNzdWU2NDM3MTUxMDg=", "number": 2078, "title": "ESPNet2: collect_stats() produces duplicate keys if num_workers > 1.", "user": {"login": "LiChenda", "id": 9349732, "node_id": "MDQ6VXNlcjkzNDk3MzI=", "avatar_url": "https://avatars.githubusercontent.com/u/9349732?v=4", "gravatar_id": "", "url": "https://api.github.com/users/LiChenda", "html_url": "https://github.com/LiChenda", "followers_url": "https://api.github.com/users/LiChenda/followers", "following_url": "https://api.github.com/users/LiChenda/following{/other_user}", "gists_url": "https://api.github.com/users/LiChenda/gists{/gist_id}", "starred_url": "https://api.github.com/users/LiChenda/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/LiChenda/subscriptions", "organizations_url": "https://api.github.com/users/LiChenda/orgs", "repos_url": "https://api.github.com/users/LiChenda/repos", "events_url": "https://api.github.com/users/LiChenda/events{/privacy}", "received_events_url": "https://api.github.com/users/LiChenda/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 777173273, "node_id": "MDU6TGFiZWw3NzcxNzMyNzM=", "url": "https://api.github.com/repos/espnet/espnet/labels/Bug", "name": "Bug", "color": "ee0701", "default": false, "description": "bug should be fixed"}, {"id": 1889036170, "node_id": "MDU6TGFiZWwxODg5MDM2MTcw", "url": "https://api.github.com/repos/espnet/espnet/labels/ESPnet2", "name": "ESPnet2", "color": "f2db68", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 7, "created_at": "2020-06-23T10:14:08Z", "updated_at": "2020-06-23T18:01:18Z", "closed_at": "2020-06-23T18:01:18Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "When I set `num_workers = 4` in config file, the `collect_stats` procedure in ABSTask produces 4 times duplicate record in output files.\r\nThe default `num_workers = 1` is OK.\r\n\r\n![image](https://user-images.githubusercontent.com/9349732/85391564-ef162700-b57c-11ea-9d57-f513584814fa.png)\r\n![image](https://user-images.githubusercontent.com/9349732/85391619-ffc69d00-b57c-11ea-8035-6bf973e6e015.png)\r\n\r\nHere is my  python environment: `pip list`[pip_env.txt](https://github.com/espnet/espnet/files/4818680/pip_env.txt)\r\n", "reactions": {"url": "https://api.github.com/repos/espnet/espnet/issues/2078/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/espnet/espnet/issues/2078/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/espnet/espnet/issues/2071", "repository_url": "https://api.github.com/repos/espnet/espnet", "labels_url": "https://api.github.com/repos/espnet/espnet/issues/2071/labels{/name}", "comments_url": "https://api.github.com/repos/espnet/espnet/issues/2071/comments", "events_url": "https://api.github.com/repos/espnet/espnet/issues/2071/events", "html_url": "https://github.com/espnet/espnet/issues/2071", "id": 642585578, "node_id": "MDU6SXNzdWU2NDI1ODU1Nzg=", "number": 2071, "title": "Downloading large files using `download_from_google_drive.sh` is not working", "user": {"login": "unilight", "id": 11516009, "node_id": "MDQ6VXNlcjExNTE2MDA5", "avatar_url": "https://avatars.githubusercontent.com/u/11516009?v=4", "gravatar_id": "", "url": "https://api.github.com/users/unilight", "html_url": "https://github.com/unilight", "followers_url": "https://api.github.com/users/unilight/followers", "following_url": "https://api.github.com/users/unilight/following{/other_user}", "gists_url": "https://api.github.com/users/unilight/gists{/gist_id}", "starred_url": "https://api.github.com/users/unilight/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/unilight/subscriptions", "organizations_url": "https://api.github.com/users/unilight/orgs", "repos_url": "https://api.github.com/users/unilight/repos", "events_url": "https://api.github.com/users/unilight/events{/privacy}", "received_events_url": "https://api.github.com/users/unilight/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 777173273, "node_id": "MDU6TGFiZWw3NzcxNzMyNzM=", "url": "https://api.github.com/repos/espnet/espnet/labels/Bug", "name": "Bug", "color": "ee0701", "default": false, "description": "bug should be fixed"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 7, "created_at": "2020-06-21T15:33:55Z", "updated_at": "2020-06-30T05:41:58Z", "closed_at": "2020-06-30T05:41:58Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "I found that downloading large files using `download_from_google_drive.sh` is not working well now. For example, the following is the log when downloading pre-trained model in `egs/vcc20/vc1_task2/` recipe:\r\n```\r\n$ ./run.sh --stop_stage -1 --pretrained_model_name tts1_en_zh\r\nstage -1: Data and Pretrained model download\r\nPlease download the dataset following the README.\r\nDownloading pretrained TTS model...\r\n--2020-06-22 00:29:17--  https://drive.google.com/uc?export=download&id=1E6vzNaXT6r7Zybefat_p9ncnMOQCXtem\r\nResolving drive.google.com (drive.google.com)... 216.58.196.238, 2404:6800:400a:808::200e\r\nConnecting to drive.google.com (drive.google.com)|216.58.196.238|:443... connected.\r\nHTTP request sent, awaiting response... 200 OK\r\nLength: unspecified [text/html]\r\nSaving to: 'downloads/tts1_en_zh/agUQal..tar.gz'\r\n\r\ndownloads/tts1_en_zh/agUQal..tar.gz                    [ <=>                                                                                                            ]   3.19K  --.-KB/s    in 0s\r\n\r\n2020-06-22 00:29:18 (30.0 MB/s) - 'downloads/tts1_en_zh/agUQal..tar.gz' saved [3263]\r\n\r\n\r\ngzip: stdin: not in gzip format\r\ntar: Child returned status 1\r\ntar: Error is not recoverable: exiting now\r\n  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current\r\n                                 Dload  Upload   Total   Spent    Left  Speed\r\n100  3263    0  3263    0     0   9217      0 --:--:-- --:--:-- --:--:--  9191\r\n  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current\r\n                                 Dload  Upload   Total   Spent    Left  Speed\r\n100  3280    0  3280    0     0   9479      0 --:--:-- --:--:-- --:--:--  9479\r\n\r\ngzip: stdin: not in gzip format\r\ntar: Child returned status 1\r\ntar: Error is not recoverable: exiting now\r\n```\r\nI believe similar problems occur when downloading large files in other recipes. Is anyone having the same issue?", "reactions": {"url": "https://api.github.com/repos/espnet/espnet/issues/2071/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/espnet/espnet/issues/2071/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/espnet/espnet/issues/2060", "repository_url": "https://api.github.com/repos/espnet/espnet", "labels_url": "https://api.github.com/repos/espnet/espnet/issues/2060/labels{/name}", "comments_url": "https://api.github.com/repos/espnet/espnet/issues/2060/comments", "events_url": "https://api.github.com/repos/espnet/espnet/issues/2060/events", "html_url": "https://github.com/espnet/espnet/issues/2060", "id": 641638952, "node_id": "MDU6SXNzdWU2NDE2Mzg5NTI=", "number": 2060, "title": "recog_wav.sh broken", "user": {"login": "Dicksonchin93", "id": 28866718, "node_id": "MDQ6VXNlcjI4ODY2NzE4", "avatar_url": "https://avatars.githubusercontent.com/u/28866718?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Dicksonchin93", "html_url": "https://github.com/Dicksonchin93", "followers_url": "https://api.github.com/users/Dicksonchin93/followers", "following_url": "https://api.github.com/users/Dicksonchin93/following{/other_user}", "gists_url": "https://api.github.com/users/Dicksonchin93/gists{/gist_id}", "starred_url": "https://api.github.com/users/Dicksonchin93/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Dicksonchin93/subscriptions", "organizations_url": "https://api.github.com/users/Dicksonchin93/orgs", "repos_url": "https://api.github.com/users/Dicksonchin93/repos", "events_url": "https://api.github.com/users/Dicksonchin93/events{/privacy}", "received_events_url": "https://api.github.com/users/Dicksonchin93/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 777173273, "node_id": "MDU6TGFiZWw3NzcxNzMyNzM=", "url": "https://api.github.com/repos/espnet/espnet/labels/Bug", "name": "Bug", "color": "ee0701", "default": false, "description": "bug should be fixed"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2020-06-19T01:19:22Z", "updated_at": "2020-06-24T15:34:12Z", "closed_at": "2020-06-19T12:06:27Z", "author_association": "NONE", "active_lock_reason": null, "body": "I got this error in the latest master using recog_wav.sh\r\n\r\n`AttributeError:` 'Namespace' object has no attribute 'transformer_encoder_selfattn_layer_type' `\r\n\r\nchecking out version v.0.7.0 solved the problem, but I thought I should report this bug", "reactions": {"url": "https://api.github.com/repos/espnet/espnet/issues/2060/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/espnet/espnet/issues/2060/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/espnet/espnet/issues/2057", "repository_url": "https://api.github.com/repos/espnet/espnet", "labels_url": "https://api.github.com/repos/espnet/espnet/issues/2057/labels{/name}", "comments_url": "https://api.github.com/repos/espnet/espnet/issues/2057/comments", "events_url": "https://api.github.com/repos/espnet/espnet/issues/2057/events", "html_url": "https://github.com/espnet/espnet/issues/2057", "id": 640869046, "node_id": "MDU6SXNzdWU2NDA4NjkwNDY=", "number": 2057, "title": "Error: it seems that PESQ is not installed.", "user": {"login": "200987299", "id": 33377212, "node_id": "MDQ6VXNlcjMzMzc3MjEy", "avatar_url": "https://avatars.githubusercontent.com/u/33377212?v=4", "gravatar_id": "", "url": "https://api.github.com/users/200987299", "html_url": "https://github.com/200987299", "followers_url": "https://api.github.com/users/200987299/followers", "following_url": "https://api.github.com/users/200987299/following{/other_user}", "gists_url": "https://api.github.com/users/200987299/gists{/gist_id}", "starred_url": "https://api.github.com/users/200987299/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/200987299/subscriptions", "organizations_url": "https://api.github.com/users/200987299/orgs", "repos_url": "https://api.github.com/users/200987299/repos", "events_url": "https://api.github.com/users/200987299/events{/privacy}", "received_events_url": "https://api.github.com/users/200987299/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 777173273, "node_id": "MDU6TGFiZWw3NzcxNzMyNzM=", "url": "https://api.github.com/repos/espnet/espnet/labels/Bug", "name": "Bug", "color": "ee0701", "default": false, "description": "bug should be fixed"}, {"id": 1417515965, "node_id": "MDU6TGFiZWwxNDE3NTE1OTY1", "url": "https://api.github.com/repos/espnet/espnet/labels/Installation", "name": "Installation", "color": "8df4e3", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2020-06-18T03:00:03Z", "updated_at": "2020-06-18T03:58:14Z", "closed_at": "2020-06-18T03:58:14Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Dear all,\r\n\r\nI have successfully installed pesq with commands `cd /home/dee/Documents/espnet/egs/chime4/asr1_multich/../../../tools && make pesq`\r\n\r\nBut I still got error like:\r\n`Error: it seems that PESQ is not installed.\r\nError: please install PESQ as follows.\r\nError: cd /home/dee/Documents/espnet/egs/chime4/asr1_multich/../../../tools && make pesq`\r\n\r\nwhen I run run.sh under egs/chime4/asr_multich, can someone help me how to solve this?\r\n\r\n\r\nBests\r\nDee", "reactions": {"url": "https://api.github.com/repos/espnet/espnet/issues/2057/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/espnet/espnet/issues/2057/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/espnet/espnet/issues/2037", "repository_url": "https://api.github.com/repos/espnet/espnet", "labels_url": "https://api.github.com/repos/espnet/espnet/issues/2037/labels{/name}", "comments_url": "https://api.github.com/repos/espnet/espnet/issues/2037/comments", "events_url": "https://api.github.com/repos/espnet/espnet/issues/2037/events", "html_url": "https://github.com/espnet/espnet/issues/2037", "id": 638122085, "node_id": "MDU6SXNzdWU2MzgxMjIwODU=", "number": 2037, "title": "Question about validation", "user": {"login": "wentaoxandry", "id": 47325204, "node_id": "MDQ6VXNlcjQ3MzI1MjA0", "avatar_url": "https://avatars.githubusercontent.com/u/47325204?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wentaoxandry", "html_url": "https://github.com/wentaoxandry", "followers_url": "https://api.github.com/users/wentaoxandry/followers", "following_url": "https://api.github.com/users/wentaoxandry/following{/other_user}", "gists_url": "https://api.github.com/users/wentaoxandry/gists{/gist_id}", "starred_url": "https://api.github.com/users/wentaoxandry/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wentaoxandry/subscriptions", "organizations_url": "https://api.github.com/users/wentaoxandry/orgs", "repos_url": "https://api.github.com/users/wentaoxandry/repos", "events_url": "https://api.github.com/users/wentaoxandry/events{/privacy}", "received_events_url": "https://api.github.com/users/wentaoxandry/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 777173273, "node_id": "MDU6TGFiZWw3NzcxNzMyNzM=", "url": "https://api.github.com/repos/espnet/espnet/labels/Bug", "name": "Bug", "color": "ee0701", "default": false, "description": "bug should be fixed"}, {"id": 1680978730, "node_id": "MDU6TGFiZWwxNjgwOTc4NzMw", "url": "https://api.github.com/repos/espnet/espnet/labels/ASR", "name": "ASR", "color": "3ee0d5", "default": false, "description": "Automatic speech recogntion"}, {"id": 1885270144, "node_id": "MDU6TGFiZWwxODg1MjcwMTQ0", "url": "https://api.github.com/repos/espnet/espnet/labels/Multiple%20GPUs", "name": "Multiple GPUs", "color": "c2e0c6", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 8, "created_at": "2020-06-13T08:29:35Z", "updated_at": "2020-08-11T17:33:16Z", "closed_at": "2020-08-11T17:33:16Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "I have a question about espnet validation, I run a ASR code on espnet, if I choose the Batchsize 8, 10, 16, 32, it is all right with validation, but if I choose Batchsize 12, 13 , I got validation report only on even epochs, like this\r\n\r\n![acc](https://user-images.githubusercontent.com/47325204/84564050-67504180-ad60-11ea-92b0-1f70a7f67d91.png)\r\n\r\nBut at the first epoch, I can still get model.acc.best and at the odd epochs there are still attention plots.\r\nI want to ask will it cause a bad performance? How can I fix that?\r\nThank you\r\n", "reactions": {"url": "https://api.github.com/repos/espnet/espnet/issues/2037/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/espnet/espnet/issues/2037/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/espnet/espnet/issues/2025", "repository_url": "https://api.github.com/repos/espnet/espnet", "labels_url": "https://api.github.com/repos/espnet/espnet/issues/2025/labels{/name}", "comments_url": "https://api.github.com/repos/espnet/espnet/issues/2025/comments", "events_url": "https://api.github.com/repos/espnet/espnet/issues/2025/events", "html_url": "https://github.com/espnet/espnet/issues/2025", "id": 637450565, "node_id": "MDU6SXNzdWU2Mzc0NTA1NjU=", "number": 2025, "title": "espnet2 calculate_all_attention questions", "user": {"login": "Cescfangs", "id": 11382612, "node_id": "MDQ6VXNlcjExMzgyNjEy", "avatar_url": "https://avatars.githubusercontent.com/u/11382612?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Cescfangs", "html_url": "https://github.com/Cescfangs", "followers_url": "https://api.github.com/users/Cescfangs/followers", "following_url": "https://api.github.com/users/Cescfangs/following{/other_user}", "gists_url": "https://api.github.com/users/Cescfangs/gists{/gist_id}", "starred_url": "https://api.github.com/users/Cescfangs/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Cescfangs/subscriptions", "organizations_url": "https://api.github.com/users/Cescfangs/orgs", "repos_url": "https://api.github.com/users/Cescfangs/repos", "events_url": "https://api.github.com/users/Cescfangs/events{/privacy}", "received_events_url": "https://api.github.com/users/Cescfangs/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 777173273, "node_id": "MDU6TGFiZWw3NzcxNzMyNzM=", "url": "https://api.github.com/repos/espnet/espnet/labels/Bug", "name": "Bug", "color": "ee0701", "default": false, "description": "bug should be fixed"}, {"id": 1889036170, "node_id": "MDU6TGFiZWwxODg5MDM2MTcw", "url": "https://api.github.com/repos/espnet/espnet/labels/ESPnet2", "name": "ESPnet2", "color": "f2db68", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2020-06-12T03:06:21Z", "updated_at": "2020-06-12T12:02:27Z", "closed_at": "2020-06-12T12:01:12Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "I believe we are plotting encoder-decoder alignments:\r\nhttps://github.com/espnet/espnet/blob/8da1e963d7d01b24d54ad73f2b19dc71d89fa0d3/espnet2/main_funcs/calculate_all_attentions.py#L50-L55\r\n\r\nbut the output of `MultiHeadedAttention` is the context info (batch_size, time, d_model)\r\nhttps://github.com/espnet/espnet/blob/8da1e963d7d01b24d54ad73f2b19dc71d89fa0d3/espnet/nets/pytorch_backend/transformer/attention.py#L73-L78\r\n\r\nSo I guess the attention plot would be like that(x-axis is attention dim, 256 here not input time):\r\n![decoder decoders 0 src_attn](https://user-images.githubusercontent.com/11382612/84460489-a4530000-ac9c-11ea-9d2b-434cf6df5b3d.png)\r\n", "reactions": {"url": "https://api.github.com/repos/espnet/espnet/issues/2025/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/espnet/espnet/issues/2025/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/espnet/espnet/issues/2009", "repository_url": "https://api.github.com/repos/espnet/espnet", "labels_url": "https://api.github.com/repos/espnet/espnet/issues/2009/labels{/name}", "comments_url": "https://api.github.com/repos/espnet/espnet/issues/2009/comments", "events_url": "https://api.github.com/repos/espnet/espnet/issues/2009/events", "html_url": "https://github.com/espnet/espnet/pull/2009", "id": 634981418, "node_id": "MDExOlB1bGxSZXF1ZXN0NDMxNDM0ODI3", "number": 2009, "title": "Fix BLEU/PPL calculation during training", "user": {"login": "hirofumi0810", "id": 17924227, "node_id": "MDQ6VXNlcjE3OTI0MjI3", "avatar_url": "https://avatars.githubusercontent.com/u/17924227?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hirofumi0810", "html_url": "https://github.com/hirofumi0810", "followers_url": "https://api.github.com/users/hirofumi0810/followers", "following_url": "https://api.github.com/users/hirofumi0810/following{/other_user}", "gists_url": "https://api.github.com/users/hirofumi0810/gists{/gist_id}", "starred_url": "https://api.github.com/users/hirofumi0810/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hirofumi0810/subscriptions", "organizations_url": "https://api.github.com/users/hirofumi0810/orgs", "repos_url": "https://api.github.com/users/hirofumi0810/repos", "events_url": "https://api.github.com/users/hirofumi0810/events{/privacy}", "received_events_url": "https://api.github.com/users/hirofumi0810/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 777173273, "node_id": "MDU6TGFiZWw3NzcxNzMyNzM=", "url": "https://api.github.com/repos/espnet/espnet/labels/Bug", "name": "Bug", "color": "ee0701", "default": false, "description": "bug should be fixed"}, {"id": 1035815469, "node_id": "MDU6TGFiZWwxMDM1ODE1NDY5", "url": "https://api.github.com/repos/espnet/espnet/labels/Refactoring", "name": "Refactoring", "color": "006b75", "default": false, "description": "Refactoring"}, {"id": 1680978835, "node_id": "MDU6TGFiZWwxNjgwOTc4ODM1", "url": "https://api.github.com/repos/espnet/espnet/labels/ST", "name": "ST", "color": "69ef7d", "default": false, "description": "Speech translation"}, {"id": 1680979049, "node_id": "MDU6TGFiZWwxNjgwOTc5MDQ5", "url": "https://api.github.com/repos/espnet/espnet/labels/MT", "name": "MT", "color": "e3c4ff", "default": false, "description": "Machine translation"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/espnet/espnet/milestones/17", "html_url": "https://github.com/espnet/espnet/milestone/17", "labels_url": "https://api.github.com/repos/espnet/espnet/milestones/17/labels", "id": 5285598, "node_id": "MDk6TWlsZXN0b25lNTI4NTU5OA==", "number": 17, "title": "v.0.8.0", "description": "", "creator": {"login": "kamo-naoyuki", "id": 19261024, "node_id": "MDQ6VXNlcjE5MjYxMDI0", "avatar_url": "https://avatars.githubusercontent.com/u/19261024?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kamo-naoyuki", "html_url": "https://github.com/kamo-naoyuki", "followers_url": "https://api.github.com/users/kamo-naoyuki/followers", "following_url": "https://api.github.com/users/kamo-naoyuki/following{/other_user}", "gists_url": "https://api.github.com/users/kamo-naoyuki/gists{/gist_id}", "starred_url": "https://api.github.com/users/kamo-naoyuki/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kamo-naoyuki/subscriptions", "organizations_url": "https://api.github.com/users/kamo-naoyuki/orgs", "repos_url": "https://api.github.com/users/kamo-naoyuki/repos", "events_url": "https://api.github.com/users/kamo-naoyuki/events{/privacy}", "received_events_url": "https://api.github.com/users/kamo-naoyuki/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 22, "state": "closed", "created_at": "2020-04-07T16:43:29Z", "updated_at": "2020-06-16T06:34:15Z", "due_on": "2020-06-30T07:00:00Z", "closed_at": "2020-06-16T06:34:15Z"}, "comments": 7, "created_at": "2020-06-08T22:42:47Z", "updated_at": "2020-06-16T05:25:31Z", "closed_at": "2020-06-09T02:38:51Z", "author_association": "COLLABORATOR", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/espnet/espnet/pulls/2009", "html_url": "https://github.com/espnet/espnet/pull/2009", "diff_url": "https://github.com/espnet/espnet/pull/2009.diff", "patch_url": "https://github.com/espnet/espnet/pull/2009.patch", "merged_at": "2020-06-09T02:38:51Z"}, "body": "- Fixed PPL calculation\r\n- Fix BLEU calculation\r\n- Refine ST/MT scripts to keep consistency", "reactions": {"url": "https://api.github.com/repos/espnet/espnet/issues/2009/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/espnet/espnet/issues/2009/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/espnet/espnet/issues/2001", "repository_url": "https://api.github.com/repos/espnet/espnet", "labels_url": "https://api.github.com/repos/espnet/espnet/issues/2001/labels{/name}", "comments_url": "https://api.github.com/repos/espnet/espnet/issues/2001/comments", "events_url": "https://api.github.com/repos/espnet/espnet/issues/2001/events", "html_url": "https://github.com/espnet/espnet/issues/2001", "id": 630778141, "node_id": "MDU6SXNzdWU2MzA3NzgxNDE=", "number": 2001, "title": "loading Transformer ASR model using model.recognize with DefaultRNNLM", "user": {"login": "ahmedalbahnasawy", "id": 50653875, "node_id": "MDQ6VXNlcjUwNjUzODc1", "avatar_url": "https://avatars.githubusercontent.com/u/50653875?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ahmedalbahnasawy", "html_url": "https://github.com/ahmedalbahnasawy", "followers_url": "https://api.github.com/users/ahmedalbahnasawy/followers", "following_url": "https://api.github.com/users/ahmedalbahnasawy/following{/other_user}", "gists_url": "https://api.github.com/users/ahmedalbahnasawy/gists{/gist_id}", "starred_url": "https://api.github.com/users/ahmedalbahnasawy/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ahmedalbahnasawy/subscriptions", "organizations_url": "https://api.github.com/users/ahmedalbahnasawy/orgs", "repos_url": "https://api.github.com/users/ahmedalbahnasawy/repos", "events_url": "https://api.github.com/users/ahmedalbahnasawy/events{/privacy}", "received_events_url": "https://api.github.com/users/ahmedalbahnasawy/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 777173273, "node_id": "MDU6TGFiZWw3NzcxNzMyNzM=", "url": "https://api.github.com/repos/espnet/espnet/labels/Bug", "name": "Bug", "color": "ee0701", "default": false, "description": "bug should be fixed"}, {"id": 1680978730, "node_id": "MDU6TGFiZWwxNjgwOTc4NzMw", "url": "https://api.github.com/repos/espnet/espnet/labels/ASR", "name": "ASR", "color": "3ee0d5", "default": false, "description": "Automatic speech recogntion"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2020-06-04T12:27:01Z", "updated_at": "2021-09-27T14:50:10Z", "closed_at": "2021-09-27T14:50:10Z", "author_association": "NONE", "active_lock_reason": null, "body": "i'm using load_language_model to load lm before pass it to model.recognice(fbank,...rnnlm=lm)\r\nrnnlm and rnnlm_conf are parameters at ASR model.json\r\n```model, train_args = load_trained_model(args.model)\r\n    assert isinstance(model, ASRInterface)\r\n    model.eval()\r\n    vocab = train_args.char_list\r\n    with open (model_dir + \"/model.json\", \"r\") as f:\r\n        idim, odim, conf=json.load(f)\r\n    vocab = conf[\"char_list\"]\r\n   lm =load_language_model(args.rnnlm, args.rnnlm_conf)`\r\ndef load_language_model(rnnlm,rnnlm_conf):\r\n\r\n    lm_args = get_model_conf(rnnlm, rnnlm_conf)\r\n    lm_model_module = getattr(lm_args, \"model_module\", \"default\")\r\n    lm_class = dynamic_import_lm(lm_model_module,backend)\r\n    lm = lm_class(4999, lm_args)\r\n    torch_load(rnnlm,lm)\r\n    lm.eval()\r\n    print(lm)\r\n    DefaultRNNLM(\r\n  (model): ClassifierWithState(\r\n    (lossfun): CrossEntropyLoss()\r\n    (predictor): RNNLM(\r\n      (embed): Embedding(4999, 2048)\r\n      (rnn): ModuleList(\r\n        (0): LSTMCell(2048, 2048)\r\n        (1): LSTMCell(2048, 2048)\r\n\r\n    return lm\r\n```\r\nI'm getting this **Error : AttributeError: 'DefaultRNNLM' object has no attribute 'predict'**\r\ni'm able to use Beamsearch scorer 'api v2' but i would like to use jit.trace method.\r\nThanks", "reactions": {"url": "https://api.github.com/repos/espnet/espnet/issues/2001/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/espnet/espnet/issues/2001/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/espnet/espnet/issues/1994", "repository_url": "https://api.github.com/repos/espnet/espnet", "labels_url": "https://api.github.com/repos/espnet/espnet/issues/1994/labels{/name}", "comments_url": "https://api.github.com/repos/espnet/espnet/issues/1994/comments", "events_url": "https://api.github.com/repos/espnet/espnet/issues/1994/events", "html_url": "https://github.com/espnet/espnet/issues/1994", "id": 628870503, "node_id": "MDU6SXNzdWU2Mjg4NzA1MDM=", "number": 1994, "title": "need help with CHIME4 recipe in both Espnet and Espnet2", "user": {"login": "200987299", "id": 33377212, "node_id": "MDQ6VXNlcjMzMzc3MjEy", "avatar_url": "https://avatars.githubusercontent.com/u/33377212?v=4", "gravatar_id": "", "url": "https://api.github.com/users/200987299", "html_url": "https://github.com/200987299", "followers_url": "https://api.github.com/users/200987299/followers", "following_url": "https://api.github.com/users/200987299/following{/other_user}", "gists_url": "https://api.github.com/users/200987299/gists{/gist_id}", "starred_url": "https://api.github.com/users/200987299/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/200987299/subscriptions", "organizations_url": "https://api.github.com/users/200987299/orgs", "repos_url": "https://api.github.com/users/200987299/repos", "events_url": "https://api.github.com/users/200987299/events{/privacy}", "received_events_url": "https://api.github.com/users/200987299/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 777173273, "node_id": "MDU6TGFiZWw3NzcxNzMyNzM=", "url": "https://api.github.com/repos/espnet/espnet/labels/Bug", "name": "Bug", "color": "ee0701", "default": false, "description": "bug should be fixed"}, {"id": 1680978730, "node_id": "MDU6TGFiZWwxNjgwOTc4NzMw", "url": "https://api.github.com/repos/espnet/espnet/labels/ASR", "name": "ASR", "color": "3ee0d5", "default": false, "description": "Automatic speech recogntion"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 16, "created_at": "2020-06-02T03:24:54Z", "updated_at": "2020-07-14T03:57:50Z", "closed_at": "2020-07-14T03:56:27Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Dear all,\r\n\r\nI have been trying to run the chime4 recipe in both espnet and espnet2 for a while. Does anyone feel comfortable running it without issues? I really want to get help from you. I have to debug every step forward and it is really frustrating. \r\n\r\nMy first concern is that, based on the codes in espnet recipes, the WSJ0 directory structure under chime3/data/WSJ0 is different from the structure described in WSJ0 official documents. \r\n\r\nSecondly, I got a lot of errors like:\r\n`fix_data_dir.sh: kept all 89844 utterances.\r\nfix_data_dir.sh: old files are kept in dump/fbank_pitch/org/tr05_multi_noisy_si284/.backup\r\nscripts/feats/feat_to_shape.sh --nj 32 --cmd run.pl dump/fbank_pitch/org/tr05_multi_noisy_si284/feats.scp dump/fbank_pitch/org/tr05_multi_noisy_si284/feats_shape\r\ndt05_multi_isolated_1ch_track ,   \r\ndump/fbank_pitch/org/dt05_multi_isolated_1ch_track\r\ncopy_data_dir\r\nutils/copy_data_dir.sh: copied data from data/dt05_multi_isolated_1ch_track to dump/fbank_pitch/org/dt05_multi_isolated_1ch_track\r\nutils/validate_text.pl: ERROR: file 'dump/fbank_pitch/org/dt05_multi_isolated_1ch_track/text' is empty or does not exist\r\n`\r\nDid anyone solved the same issue or anyone had successfully executed the CHIME4 recipe in Espnet or Espnet2? I am really appreciate your help.  \r\n\r\nThank you all for caring. ", "reactions": {"url": "https://api.github.com/repos/espnet/espnet/issues/1994/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/espnet/espnet/issues/1994/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/espnet/espnet/issues/1985", "repository_url": "https://api.github.com/repos/espnet/espnet", "labels_url": "https://api.github.com/repos/espnet/espnet/issues/1985/labels{/name}", "comments_url": "https://api.github.com/repos/espnet/espnet/issues/1985/comments", "events_url": "https://api.github.com/repos/espnet/espnet/issues/1985/events", "html_url": "https://github.com/espnet/espnet/issues/1985", "id": 627508598, "node_id": "MDU6SXNzdWU2Mjc1MDg1OTg=", "number": 1985, "title": "wget in pretrained model setup returns error 404 (dead link)", "user": {"login": "OfekCohen1", "id": 50832863, "node_id": "MDQ6VXNlcjUwODMyODYz", "avatar_url": "https://avatars.githubusercontent.com/u/50832863?v=4", "gravatar_id": "", "url": "https://api.github.com/users/OfekCohen1", "html_url": "https://github.com/OfekCohen1", "followers_url": "https://api.github.com/users/OfekCohen1/followers", "following_url": "https://api.github.com/users/OfekCohen1/following{/other_user}", "gists_url": "https://api.github.com/users/OfekCohen1/gists{/gist_id}", "starred_url": "https://api.github.com/users/OfekCohen1/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/OfekCohen1/subscriptions", "organizations_url": "https://api.github.com/users/OfekCohen1/orgs", "repos_url": "https://api.github.com/users/OfekCohen1/repos", "events_url": "https://api.github.com/users/OfekCohen1/events{/privacy}", "received_events_url": "https://api.github.com/users/OfekCohen1/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 777173273, "node_id": "MDU6TGFiZWw3NzcxNzMyNzM=", "url": "https://api.github.com/repos/espnet/espnet/labels/Bug", "name": "Bug", "color": "ee0701", "default": false, "description": "bug should be fixed"}], "state": "closed", "locked": false, "assignee": {"login": "takenori-y", "id": 19323092, "node_id": "MDQ6VXNlcjE5MzIzMDky", "avatar_url": "https://avatars.githubusercontent.com/u/19323092?v=4", "gravatar_id": "", "url": "https://api.github.com/users/takenori-y", "html_url": "https://github.com/takenori-y", "followers_url": "https://api.github.com/users/takenori-y/followers", "following_url": "https://api.github.com/users/takenori-y/following{/other_user}", "gists_url": "https://api.github.com/users/takenori-y/gists{/gist_id}", "starred_url": "https://api.github.com/users/takenori-y/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/takenori-y/subscriptions", "organizations_url": "https://api.github.com/users/takenori-y/orgs", "repos_url": "https://api.github.com/users/takenori-y/repos", "events_url": "https://api.github.com/users/takenori-y/events{/privacy}", "received_events_url": "https://api.github.com/users/takenori-y/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "takenori-y", "id": 19323092, "node_id": "MDQ6VXNlcjE5MzIzMDky", "avatar_url": "https://avatars.githubusercontent.com/u/19323092?v=4", "gravatar_id": "", "url": "https://api.github.com/users/takenori-y", "html_url": "https://github.com/takenori-y", "followers_url": "https://api.github.com/users/takenori-y/followers", "following_url": "https://api.github.com/users/takenori-y/following{/other_user}", "gists_url": "https://api.github.com/users/takenori-y/gists{/gist_id}", "starred_url": "https://api.github.com/users/takenori-y/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/takenori-y/subscriptions", "organizations_url": "https://api.github.com/users/takenori-y/orgs", "repos_url": "https://api.github.com/users/takenori-y/repos", "events_url": "https://api.github.com/users/takenori-y/events{/privacy}", "received_events_url": "https://api.github.com/users/takenori-y/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 12, "created_at": "2020-05-29T20:03:25Z", "updated_at": "2020-06-01T22:14:20Z", "closed_at": "2020-06-01T22:14:20Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi\r\n\r\nI'm planning to use a pretrained model for my research, so I followed the instructions here: \r\nhttps://espnet.github.io/espnet/notebook/pretrained.html\r\n\r\nIn the \"Setup environment\" there's a command `!wget https://18-198329952-gh.circle-artifacts.com/0/home/circleci/repo/ubuntu16-featbin.tar.gz` , and when running this command I receive `\"ERROR 404: Not Found.\"`\r\n\r\nIs there an alternate way to run this command / setup so I can use the pretrained models and continue the example notebook? Or alternatively, can the link be fixed? \r\n\r\nThanks in advance ", "reactions": {"url": "https://api.github.com/repos/espnet/espnet/issues/1985/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/espnet/espnet/issues/1985/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/espnet/espnet/issues/1977", "repository_url": "https://api.github.com/repos/espnet/espnet", "labels_url": "https://api.github.com/repos/espnet/espnet/issues/1977/labels{/name}", "comments_url": "https://api.github.com/repos/espnet/espnet/issues/1977/comments", "events_url": "https://api.github.com/repos/espnet/espnet/issues/1977/events", "html_url": "https://github.com/espnet/espnet/issues/1977", "id": 625474024, "node_id": "MDU6SXNzdWU2MjU0NzQwMjQ=", "number": 1977, "title": "Bug in espnet/transform/cmvn.py", "user": {"login": "houwenxin", "id": 22743466, "node_id": "MDQ6VXNlcjIyNzQzNDY2", "avatar_url": "https://avatars.githubusercontent.com/u/22743466?v=4", "gravatar_id": "", "url": "https://api.github.com/users/houwenxin", "html_url": "https://github.com/houwenxin", "followers_url": "https://api.github.com/users/houwenxin/followers", "following_url": "https://api.github.com/users/houwenxin/following{/other_user}", "gists_url": "https://api.github.com/users/houwenxin/gists{/gist_id}", "starred_url": "https://api.github.com/users/houwenxin/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/houwenxin/subscriptions", "organizations_url": "https://api.github.com/users/houwenxin/orgs", "repos_url": "https://api.github.com/users/houwenxin/repos", "events_url": "https://api.github.com/users/houwenxin/events{/privacy}", "received_events_url": "https://api.github.com/users/houwenxin/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 777173273, "node_id": "MDU6TGFiZWw3NzcxNzMyNzM=", "url": "https://api.github.com/repos/espnet/espnet/labels/Bug", "name": "Bug", "color": "ee0701", "default": false, "description": "bug should be fixed"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2020-05-27T08:06:25Z", "updated_at": "2020-05-30T14:15:12Z", "closed_at": "2020-05-30T14:15:12Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "line 75 : \r\n> count = count.flattten()[0]\r\n\r\nhttps://github.com/espnet/espnet/blob/81a383a9054cf1e42d2558f81cc30f2841075b70/espnet/transform/cmvn.py#L75 \r\n\r\nMaybe should be :\r\n> count = count.flatten()[0]", "reactions": {"url": "https://api.github.com/repos/espnet/espnet/issues/1977/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/espnet/espnet/issues/1977/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/espnet/espnet/issues/1974", "repository_url": "https://api.github.com/repos/espnet/espnet", "labels_url": "https://api.github.com/repos/espnet/espnet/issues/1974/labels{/name}", "comments_url": "https://api.github.com/repos/espnet/espnet/issues/1974/comments", "events_url": "https://api.github.com/repos/espnet/espnet/issues/1974/events", "html_url": "https://github.com/espnet/espnet/issues/1974", "id": 625321908, "node_id": "MDU6SXNzdWU2MjUzMjE5MDg=", "number": 1974, "title": "ngram scorer issues", "user": {"login": "Cescfangs", "id": 11382612, "node_id": "MDQ6VXNlcjExMzgyNjEy", "avatar_url": "https://avatars.githubusercontent.com/u/11382612?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Cescfangs", "html_url": "https://github.com/Cescfangs", "followers_url": "https://api.github.com/users/Cescfangs/followers", "following_url": "https://api.github.com/users/Cescfangs/following{/other_user}", "gists_url": "https://api.github.com/users/Cescfangs/gists{/gist_id}", "starred_url": "https://api.github.com/users/Cescfangs/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Cescfangs/subscriptions", "organizations_url": "https://api.github.com/users/Cescfangs/orgs", "repos_url": "https://api.github.com/users/Cescfangs/repos", "events_url": "https://api.github.com/users/Cescfangs/events{/privacy}", "received_events_url": "https://api.github.com/users/Cescfangs/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 777173273, "node_id": "MDU6TGFiZWw3NzcxNzMyNzM=", "url": "https://api.github.com/repos/espnet/espnet/labels/Bug", "name": "Bug", "color": "ee0701", "default": false, "description": "bug should be fixed"}, {"id": 1680978730, "node_id": "MDU6TGFiZWwxNjgwOTc4NzMw", "url": "https://api.github.com/repos/espnet/espnet/labels/ASR", "name": "ASR", "color": "3ee0d5", "default": false, "description": "Automatic speech recogntion"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 8, "created_at": "2020-05-27T02:14:32Z", "updated_at": "2020-06-06T23:00:05Z", "closed_at": "2020-06-06T23:00:05Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Please correct me if I'm wrong, I think we're scoring `p(yn|y0~yn-1)` here, however following code score `p(y0~yn)` actually:\r\nhttps://github.com/espnet/espnet/blob/263e3c61a7732002e5e5b49a9c510ecc02f5c329/espnet/nets/scorers/ngram.py#L56-L61\r\nI suggest:\r\n```python\r\n        for i, j in enumerate(next_token):\r\n            scores[i] = self.lm.BaseScore(\r\n                out_state, self.chardict[j], self.tmpkenlmstate\r\n            )\r\n```\r\nand below is my decoding result with Aishell(the model was trained with other mandarin dataset, and the ngram lm was trained with much larger corpus):\r\n\r\n| Aishell test                 | CER  |  weight   |\r\n| ---------------------------- | ---- | ---- |\r\n| baseline                     | 6.8% |  0    |\r\n| +ngram part scorer(origin)        | 7.2% |  0.1  |\r\n| +ngram part scorer(my suggestion) | 6.3% |  0.1  |\r\n| +ngram part scorer(my suggestion) | 5.6% |  0.3  |\r\n| +ngram part scorer(my suggestion) | 5.1% |  0.5  |\r\n| +ngram part scorer(my suggestion) | 4.7% |  0.7  |\r\n| +ngram part scorer(my suggestion) | 4.4% |  0.9  |\r\n\r\nAnother issue is the `NgramFullScorer`, which is too slow for large vocab like chinese:\r\nhttps://github.com/espnet/espnet/blob/263e3c61a7732002e5e5b49a9c510ecc02f5c329/espnet/asr/pytorch_backend/recog.py#L68-L71\r\nhere is my results:\r\n| 20 utt       | decoding time |\r\n| ------------ | ------------- |\r\n| baseline     | 280 s         |\r\n| +full scorer | 975 s         |\r\n| +part scorer | 358 s         |\r\n\r\nSo I would like to suggest using ngram part scorer for decoding:\r\n```python\r\nif args.ngram_model:\r\n    from espnet.nets.pytorch_backend.scorers.ngram import NgramPartScorer \r\n \r\n    ngram = NgramPartScorer(args.ngram_model, train_args.char_list) \r\n```\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/espnet/espnet/issues/1974/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/espnet/espnet/issues/1974/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/espnet/espnet/issues/1949", "repository_url": "https://api.github.com/repos/espnet/espnet", "labels_url": "https://api.github.com/repos/espnet/espnet/issues/1949/labels{/name}", "comments_url": "https://api.github.com/repos/espnet/espnet/issues/1949/comments", "events_url": "https://api.github.com/repos/espnet/espnet/issues/1949/events", "html_url": "https://github.com/espnet/espnet/issues/1949", "id": 622870360, "node_id": "MDU6SXNzdWU2MjI4NzAzNjA=", "number": 1949, "title": "Error in decode stage - No such file or directory", "user": {"login": "leohuang2013", "id": 4549946, "node_id": "MDQ6VXNlcjQ1NDk5NDY=", "avatar_url": "https://avatars.githubusercontent.com/u/4549946?v=4", "gravatar_id": "", "url": "https://api.github.com/users/leohuang2013", "html_url": "https://github.com/leohuang2013", "followers_url": "https://api.github.com/users/leohuang2013/followers", "following_url": "https://api.github.com/users/leohuang2013/following{/other_user}", "gists_url": "https://api.github.com/users/leohuang2013/gists{/gist_id}", "starred_url": "https://api.github.com/users/leohuang2013/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/leohuang2013/subscriptions", "organizations_url": "https://api.github.com/users/leohuang2013/orgs", "repos_url": "https://api.github.com/users/leohuang2013/repos", "events_url": "https://api.github.com/users/leohuang2013/events{/privacy}", "received_events_url": "https://api.github.com/users/leohuang2013/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 777173273, "node_id": "MDU6TGFiZWw3NzcxNzMyNzM=", "url": "https://api.github.com/repos/espnet/espnet/labels/Bug", "name": "Bug", "color": "ee0701", "default": false, "description": "bug should be fixed"}, {"id": 1412395969, "node_id": "MDU6TGFiZWwxNDEyMzk1OTY5", "url": "https://api.github.com/repos/espnet/espnet/labels/Docker", "name": "Docker", "color": "a3fc8a", "default": false, "description": ""}, {"id": 1680978730, "node_id": "MDU6TGFiZWwxNjgwOTc4NzMw", "url": "https://api.github.com/repos/espnet/espnet/labels/ASR", "name": "ASR", "color": "3ee0d5", "default": false, "description": "Automatic speech recogntion"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 18, "created_at": "2020-05-22T00:31:47Z", "updated_at": "2020-06-06T23:11:29Z", "closed_at": "2020-06-06T23:11:29Z", "author_association": "NONE", "active_lock_reason": null, "body": "Environment:\r\n\r\n- Ubuntu 18.04\r\n- Cuda: 10.0\r\n- 1 GPU card\r\n\r\nI was using following command to train librispeech in egs folder\r\n`sudo ./run.sh --docker_os local --docker_cuda 10.0 --docker_gpu 0 --docker_egs librispeech/asr1 --docker_folders /home/leo/storage/asr_data --ngpu 1`\r\n\r\nSince I finished early stages - 1, 2, 3, I changed stage to 4 in run.sh. From log file, I can see it completed stage 4, then got error in stage 5 - decoding as shown below,\r\n```\r\nleo@leo-pc:~/asr/espnet/docker$ sudo ./run.sh --docker_os local --docker_cuda 10.0 --docker_gpu 0 --docker_egs librispeech/asr1 --docker_folders /home/leo/storage/asr_data --ngpu 1\r\n[sudo] password for leo: \r\nWarning: Your user ID belongs to root users.\r\n        Using Docker container with root instead of User-built container.\r\nUsing image espnet/espnet:gpu-cuda10.0-cudnn7-local.\r\nExecuting application in Docker\r\ndocker run --gpus 'device=0' -i --rm --name espnet_gpu0_20200518T2229 -v /home/leo/storage/asr/espnet/egs:/espnet/egs -v /home/leo/storage/asr/espnet/espnet:/espnet/espnet -v /home/leo/storage/asr/espnet/test:/espnet/test -v /home/leo/storage/asr/espnet/utils:/espnet/utils -v /home/leo/storage/asr_data:/home/leo/storage/asr_data espnet/espnet:gpu-cuda10.0-cudnn7-local /bin/bash -c 'cd /espnet/egs/librispeech/asr1; ./run.sh --ngpu 1; chmod -R 777 /espnet/egs/librispeech/asr1'\r\ndictionary: data/lang_char/train_960_unigram5000_units.txt\r\nstage 4: Network Training\r\nstage 5: Decoding\r\nbest val scores = [0.16489187 0.16076851 0.15817078 0.15651147 0.15507215]\r\nselected epochs = [11 10  9  8  7]\r\naverage over ['exp/train_960_pytorch_train_specaug/results/snapshot.ep.11', 'exp/train_960_pytorch_train_specaug/results/snapshot.ep.10', 'exp/train_960_pytorch_train_specaug/results/snapshot.ep.9', 'exp/train_960_pytorch_train_specaug/results/snapshot.ep.8', 'exp/train_960_pytorch_train_specaug/results/snapshot.ep.7']\r\n2020-05-21 13:49:30,111 (splitjson:40) INFO: /espnet/tools/venv/bin/python3 /espnet/egs/librispeech/asr1/../../../utils/splitjson.py --parts 12 dump/dev_other/deltafalse/data_unigram5000.json\r\n2020-05-21 13:49:30,111 (splitjson:40) INFO: /espnet/tools/venv/bin/python3 /espnet/egs/librispeech/asr1/../../../utils/splitjson.py --parts 12 dump/dev_clean/deltafalse/data_unigram5000.json\r\n2020-05-21 13:49:30,111 (splitjson:40) INFO: /espnet/tools/venv/bin/python3 /espnet/egs/librispeech/asr1/../../../utils/splitjson.py --parts 12 dump/test_clean/deltafalse/data_unigram5000.json\r\n2020-05-21 13:49:30,111 (splitjson:40) INFO: /espnet/tools/venv/bin/python3 /espnet/egs/librispeech/asr1/../../../utils/splitjson.py --parts 12 dump/test_other/deltafalse/data_unigram5000.json\r\n2020-05-21 13:49:30,249 (splitjson:52) INFO: number of utterances = 2620\r\n2020-05-21 13:49:30,254 (splitjson:52) INFO: number of utterances = 2703\r\n2020-05-21 13:49:30,258 (splitjson:52) INFO: number of utterances = 2864\r\n2020-05-21 13:49:30,263 (splitjson:52) INFO: number of utterances = 2939\r\n2020-05-21 13:49:31,589 (concatjson:36) INFO: /espnet/tools/venv/bin/python3 /espnet/egs/librispeech/asr1/../../../utils/concatjson.py 'exp/train_960_pytorch_train_specaug/decode_dev_other_model.val5.avg.best_decode_lm/data.*.json'\r\n2020-05-21 13:49:31,589 (concatjson:36) INFO: /espnet/tools/venv/bin/python3 /espnet/egs/librispeech/asr1/../../../utils/concatjson.py 'exp/train_960_pytorch_train_specaug/decode_dev_clean_model.val5.avg.best_decode_lm/data.*.json'\r\nTraceback (most recent call last):\r\n  File \"/espnet/egs/librispeech/asr1/../../../utils/concatjson.py\", line 41, in <module>\r\n    with codecs.open(x, encoding=\"utf-8\") as f:\r\n  File \"/espnet/tools/venv/lib/python3.7/codecs.py\", line 898, in open\r\n    file = builtins.open(filename, mode, buffering)\r\nFileNotFoundError: [Errno 2] No such file or directory: 'exp/train_960_pytorch_train_specaug/decode_dev_clean_model.val5.avg.best_decode_lm/data.*.json'\r\nTraceback (most recent call last):\r\n  File \"/espnet/egs/librispeech/asr1/../../../utils/concatjson.py\", line 41, in <module>\r\n    with codecs.open(x, encoding=\"utf-8\") as f:\r\n  File \"/espnet/tools/venv/lib/python3.7/codecs.py\", line 898, in open\r\n    file = builtins.open(filename, mode, buffering)\r\nFileNotFoundError: [Errno 2] No such file or directory: 'exp/train_960_pytorch_train_specaug/decode_dev_other_model.val5.avg.best_decode_lm/data.*.json'\r\n2020-05-21 13:49:31,600 (concatjson:36) INFO: /espnet/tools/venv/bin/python3 /espnet/egs/librispeech/asr1/../../../utils/concatjson.py 'exp/train_960_pytorch_train_specaug/decode_test_clean_model.val5.avg.best_decode_lm/data.*.json'\r\n2020-05-21 13:49:31,600 (concatjson:36) INFO: /espnet/tools/venv/bin/python3 /espnet/egs/librispeech/asr1/../../../utils/concatjson.py 'exp/train_960_pytorch_train_specaug/decode_test_other_model.val5.avg.best_decode_lm/data.*.json'\r\nTraceback (most recent call last):\r\n  File \"/espnet/egs/librispeech/asr1/../../../utils/concatjson.py\", line 41, in <module>\r\n    with codecs.open(x, encoding=\"utf-8\") as f:\r\n  File \"/espnet/tools/venv/lib/python3.7/codecs.py\", line 898, in open\r\n    file = builtins.open(filename, mode, buffering)\r\nFileNotFoundError: [Errno 2] No such file or directory: 'exp/train_960_pytorch_train_specaug/decode_test_clean_model.val5.avg.best_decode_lm/data.*.json'\r\n```\r\n\r\nI attached log file and config files\r\n[train.log](https://github.com/espnet/espnet/files/4665427/train.log)\r\n\r\n[conf.zip](https://github.com/espnet/espnet/files/4665435/conf.zip)\r\n", "reactions": {"url": "https://api.github.com/repos/espnet/espnet/issues/1949/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/espnet/espnet/issues/1949/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/espnet/espnet/issues/1948", "repository_url": "https://api.github.com/repos/espnet/espnet", "labels_url": "https://api.github.com/repos/espnet/espnet/issues/1948/labels{/name}", "comments_url": "https://api.github.com/repos/espnet/espnet/issues/1948/comments", "events_url": "https://api.github.com/repos/espnet/espnet/issues/1948/events", "html_url": "https://github.com/espnet/espnet/issues/1948", "id": 622242534, "node_id": "MDU6SXNzdWU2MjIyNDI1MzQ=", "number": 1948, "title": "Transformer input layer type error", "user": {"login": "yuexianghubit", "id": 27962411, "node_id": "MDQ6VXNlcjI3OTYyNDEx", "avatar_url": "https://avatars.githubusercontent.com/u/27962411?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yuexianghubit", "html_url": "https://github.com/yuexianghubit", "followers_url": "https://api.github.com/users/yuexianghubit/followers", "following_url": "https://api.github.com/users/yuexianghubit/following{/other_user}", "gists_url": "https://api.github.com/users/yuexianghubit/gists{/gist_id}", "starred_url": "https://api.github.com/users/yuexianghubit/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yuexianghubit/subscriptions", "organizations_url": "https://api.github.com/users/yuexianghubit/orgs", "repos_url": "https://api.github.com/users/yuexianghubit/repos", "events_url": "https://api.github.com/users/yuexianghubit/events{/privacy}", "received_events_url": "https://api.github.com/users/yuexianghubit/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 777173273, "node_id": "MDU6TGFiZWw3NzcxNzMyNzM=", "url": "https://api.github.com/repos/espnet/espnet/labels/Bug", "name": "Bug", "color": "ee0701", "default": false, "description": "bug should be fixed"}, {"id": 1680978730, "node_id": "MDU6TGFiZWwxNjgwOTc4NzMw", "url": "https://api.github.com/repos/espnet/espnet/labels/ASR", "name": "ASR", "color": "3ee0d5", "default": false, "description": "Automatic speech recogntion"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2020-05-21T04:43:28Z", "updated_at": "2020-06-06T23:02:13Z", "closed_at": "2020-06-06T23:02:13Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hello there,\r\n\r\nWhen I specify the transformer input layer as 'embed', it will occur problem:\r\n\r\n`RuntimeError: Expected tensor for argument #1 'indices' to have scalar type Long; but got torch.FloatTensor instead (while checking arguments for embedding)`\r\n\r\nI think it's due to that the type of the input tensor mismatched the type of input of torch.nn.Embedding. \r\nHope you guys to fix this error.\r\nThanks\r\n", "reactions": {"url": "https://api.github.com/repos/espnet/espnet/issues/1948/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/espnet/espnet/issues/1948/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/espnet/espnet/issues/1942", "repository_url": "https://api.github.com/repos/espnet/espnet", "labels_url": "https://api.github.com/repos/espnet/espnet/issues/1942/labels{/name}", "comments_url": "https://api.github.com/repos/espnet/espnet/issues/1942/comments", "events_url": "https://api.github.com/repos/espnet/espnet/issues/1942/events", "html_url": "https://github.com/espnet/espnet/issues/1942", "id": 620765590, "node_id": "MDU6SXNzdWU2MjA3NjU1OTA=", "number": 1942, "title": "Got worse result in asr training with specaug", "user": {"login": "RobotGF", "id": 20805320, "node_id": "MDQ6VXNlcjIwODA1MzIw", "avatar_url": "https://avatars.githubusercontent.com/u/20805320?v=4", "gravatar_id": "", "url": "https://api.github.com/users/RobotGF", "html_url": "https://github.com/RobotGF", "followers_url": "https://api.github.com/users/RobotGF/followers", "following_url": "https://api.github.com/users/RobotGF/following{/other_user}", "gists_url": "https://api.github.com/users/RobotGF/gists{/gist_id}", "starred_url": "https://api.github.com/users/RobotGF/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/RobotGF/subscriptions", "organizations_url": "https://api.github.com/users/RobotGF/orgs", "repos_url": "https://api.github.com/users/RobotGF/repos", "events_url": "https://api.github.com/users/RobotGF/events{/privacy}", "received_events_url": "https://api.github.com/users/RobotGF/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 777173273, "node_id": "MDU6TGFiZWw3NzcxNzMyNzM=", "url": "https://api.github.com/repos/espnet/espnet/labels/Bug", "name": "Bug", "color": "ee0701", "default": false, "description": "bug should be fixed"}, {"id": 1680978730, "node_id": "MDU6TGFiZWwxNjgwOTc4NzMw", "url": "https://api.github.com/repos/espnet/espnet/labels/ASR", "name": "ASR", "color": "3ee0d5", "default": false, "description": "Automatic speech recogntion"}, {"id": 1889036170, "node_id": "MDU6TGFiZWwxODg5MDM2MTcw", "url": "https://api.github.com/repos/espnet/espnet/labels/ESPnet2", "name": "ESPnet2", "color": "f2db68", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 9, "created_at": "2020-05-19T08:02:41Z", "updated_at": "2020-05-25T09:46:42Z", "closed_at": "2020-05-24T12:14:03Z", "author_association": "NONE", "active_lock_reason": null, "body": "When I used espnet2 to train asr_transformer without specaug\uff0cI got the comparable result as espnet1. But when add specaug in training, the result got much worse. I only use as default. \r\nAdd specaug: specaug in  conf/train_asr_transformer.yaml. Is there some bug in specaug in Espnet2?", "reactions": {"url": "https://api.github.com/repos/espnet/espnet/issues/1942/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/espnet/espnet/issues/1942/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/espnet/espnet/issues/1925", "repository_url": "https://api.github.com/repos/espnet/espnet", "labels_url": "https://api.github.com/repos/espnet/espnet/issues/1925/labels{/name}", "comments_url": "https://api.github.com/repos/espnet/espnet/issues/1925/comments", "events_url": "https://api.github.com/repos/espnet/espnet/issues/1925/events", "html_url": "https://github.com/espnet/espnet/issues/1925", "id": 617911003, "node_id": "MDU6SXNzdWU2MTc5MTEwMDM=", "number": 1925, "title": "self.device = device   AttributeError: can't set attribute", "user": {"login": "jiamliang", "id": 1405049, "node_id": "MDQ6VXNlcjE0MDUwNDk=", "avatar_url": "https://avatars.githubusercontent.com/u/1405049?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jiamliang", "html_url": "https://github.com/jiamliang", "followers_url": "https://api.github.com/users/jiamliang/followers", "following_url": "https://api.github.com/users/jiamliang/following{/other_user}", "gists_url": "https://api.github.com/users/jiamliang/gists{/gist_id}", "starred_url": "https://api.github.com/users/jiamliang/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jiamliang/subscriptions", "organizations_url": "https://api.github.com/users/jiamliang/orgs", "repos_url": "https://api.github.com/users/jiamliang/repos", "events_url": "https://api.github.com/users/jiamliang/events{/privacy}", "received_events_url": "https://api.github.com/users/jiamliang/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 777173273, "node_id": "MDU6TGFiZWw3NzcxNzMyNzM=", "url": "https://api.github.com/repos/espnet/espnet/labels/Bug", "name": "Bug", "color": "ee0701", "default": false, "description": "bug should be fixed"}, {"id": 1412395969, "node_id": "MDU6TGFiZWwxNDEyMzk1OTY5", "url": "https://api.github.com/repos/espnet/espnet/labels/Docker", "name": "Docker", "color": "a3fc8a", "default": false, "description": ""}, {"id": 1680978730, "node_id": "MDU6TGFiZWwxNjgwOTc4NzMw", "url": "https://api.github.com/repos/espnet/espnet/labels/ASR", "name": "ASR", "color": "3ee0d5", "default": false, "description": "Automatic speech recogntion"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2020-05-14T04:16:57Z", "updated_at": "2020-05-15T06:50:19Z", "closed_at": "2020-05-15T06:42:26Z", "author_association": "NONE", "active_lock_reason": null, "body": "i run librispeech asr sample in a docker container, and i meet the following error. is there any suggestion? Thanks a lot .\r\n\r\nUbuntu 18.04\r\nPython 2.6\r\npyTorch 1.4.0\r\n\r\n2020-05-14 03:41:17,746 (asr_train:549) WARNING: Skip DEBUG/INFO messages\r\n2020-05-14 03:41:19,786 (ctc:34) WARNING: CTC was set to builtin due to PyTorch version.\r\n2020-05-14 03:41:29,654 (io_utils:59) WARNING: [Experimental feature] Some preprocessing will be done for the mini-batch creation using Transformation(\r\n    0: TimeWarp(max_time_warp=5, inplace=True, mode=PIL)\r\n    1: FreqMask(F=30, n_mask=2, replace_with_zero=False, inplace=True)\r\n    2: TimeMask(T=40, n_mask=2, replace_with_zero=False, inplace=True))\r\n2020-05-14 03:41:29,658 (io_utils:59) WARNING: [Experimental feature] Some preprocessing will be done for the mini-batch creation using Transformation(\r\n    0: TimeWarp(max_time_warp=5, inplace=True, mode=PIL)\r\n    1: FreqMask(F=30, n_mask=2, replace_with_zero=False, inplace=True)\r\n    2: TimeMask(T=40, n_mask=2, replace_with_zero=False, inplace=True))\r\n\r\nTraceback (most recent call last):\r\n  File \"/code/espnet/egs/librispeech/asr1/../../../espnet/bin/asr_train.py\", line 622, in <module>\r\n    main(sys.argv[1:])\r\n  File \"/code/espnet/egs/librispeech/asr1/../../../espnet/bin/asr_train.py\", line 608, in main\r\n    train(args)\r\n  File \"/code/espnet/espnet/asr/pytorch_backend/asr.py\", line 620, in train\r\n    use_apex=use_apex,\r\n  File \"/code/espnet/espnet/asr/pytorch_backend/asr.py\", line 171, in __init__\r\n    self.device = device\r\nAttributeError: can't set attribute", "reactions": {"url": "https://api.github.com/repos/espnet/espnet/issues/1925/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/espnet/espnet/issues/1925/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/espnet/espnet/issues/1921", "repository_url": "https://api.github.com/repos/espnet/espnet", "labels_url": "https://api.github.com/repos/espnet/espnet/issues/1921/labels{/name}", "comments_url": "https://api.github.com/repos/espnet/espnet/issues/1921/comments", "events_url": "https://api.github.com/repos/espnet/espnet/issues/1921/events", "html_url": "https://github.com/espnet/espnet/issues/1921", "id": 617210937, "node_id": "MDU6SXNzdWU2MTcyMTA5Mzc=", "number": 1921, "title": "Increased ASR performance on pre-trained model", "user": {"login": "ivanelgran23", "id": 62716305, "node_id": "MDQ6VXNlcjYyNzE2MzA1", "avatar_url": "https://avatars.githubusercontent.com/u/62716305?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ivanelgran23", "html_url": "https://github.com/ivanelgran23", "followers_url": "https://api.github.com/users/ivanelgran23/followers", "following_url": "https://api.github.com/users/ivanelgran23/following{/other_user}", "gists_url": "https://api.github.com/users/ivanelgran23/gists{/gist_id}", "starred_url": "https://api.github.com/users/ivanelgran23/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ivanelgran23/subscriptions", "organizations_url": "https://api.github.com/users/ivanelgran23/orgs", "repos_url": "https://api.github.com/users/ivanelgran23/repos", "events_url": "https://api.github.com/users/ivanelgran23/events{/privacy}", "received_events_url": "https://api.github.com/users/ivanelgran23/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 777173273, "node_id": "MDU6TGFiZWw3NzcxNzMyNzM=", "url": "https://api.github.com/repos/espnet/espnet/labels/Bug", "name": "Bug", "color": "ee0701", "default": false, "description": "bug should be fixed"}, {"id": 1680978730, "node_id": "MDU6TGFiZWwxNjgwOTc4NzMw", "url": "https://api.github.com/repos/espnet/espnet/labels/ASR", "name": "ASR", "color": "3ee0d5", "default": false, "description": "Automatic speech recogntion"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 8, "created_at": "2020-05-13T07:27:08Z", "updated_at": "2020-06-25T22:15:55Z", "closed_at": "2020-05-15T03:52:35Z", "author_association": "NONE", "active_lock_reason": null, "body": "I recognize audio using the pre-trained **ru_open_stt** model. Unfortunately, it has low recognition optimization (10 second recording is recognized in 6-7 seconds) with parameters: `--backend pytorch --api v2 --ngpu 1`\r\nI tried changing the parameters to `--backend chainer --api v1 --ngpu 1` and in response I get an error:\r\n\r\n```# asr_recog.py --config decode/download/ru_open_stt/conf/tuning/decode_pytorch_transformer_large.yaml --ngpu 0 --backend chainer --debugmode 1 --verbose 1 --recog-json decode/13-05-2020__12_22_31/dump/data.json --result-label decode/13-05-2020__12_22_31/result.json --model decode/download/ru_open_stt/exp/train_pytorch_train/results/model.val10.avg.best --api v1 --rnnlm decode/download/ru_open_stt/exp/train_rnnlm_pytorch_lm_unigram100/rnnlm.model.best \r\n# Started at Wed May 13 07:22:33 Asia 2020\r\n#\r\nWARNING:root:CTC was set to builtin due to PyTorch version.\r\nTraceback (most recent call last):\r\n  File \"/usr/app/egs/ru_open_stt/asr1/../../../espnet/bin/asr_recog.py\", line 209, in <module>\r\n    main(sys.argv[1:])\r\n  File \"/usr/app/egs/ru_open_stt/asr1/../../../espnet/bin/asr_recog.py\", line 180, in main\r\n    recog(args)\r\n  File \"/usr/app/espnet/asr/chainer_backend/asr.py\", line 378, in recog\r\n    chainer_load(args.model, model)\r\n  File \"/usr/app/espnet/asr/asr_utils.py\", line 462, in chainer_load\r\n    chainer.serializers.load_npz(path, model)\r\n  File \"/usr/local/lib/python3.6/dist-packages/chainer/serializers/npz.py\", line 239, in load_npz\r\n    with numpy.load(file, **_allow_pickle_kwargs) as f:\r\nAttributeError: __enter__\r\n# Accounting: time=2 threads=1\r\n# Ended (code 1) at Wed May 13 07:22:35 Asia 2020, elapsed time 2 seconds\r\n```\r\n\r\n**Question 1**: Can I somehow fix the error to use this model with such parameters?\r\n**Question 2**: Are there any other ways to increase recognition performance?", "reactions": {"url": "https://api.github.com/repos/espnet/espnet/issues/1921/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/espnet/espnet/issues/1921/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/espnet/espnet/issues/1915", "repository_url": "https://api.github.com/repos/espnet/espnet", "labels_url": "https://api.github.com/repos/espnet/espnet/issues/1915/labels{/name}", "comments_url": "https://api.github.com/repos/espnet/espnet/issues/1915/comments", "events_url": "https://api.github.com/repos/espnet/espnet/issues/1915/events", "html_url": "https://github.com/espnet/espnet/issues/1915", "id": 616311854, "node_id": "MDU6SXNzdWU2MTYzMTE4NTQ=", "number": 1915, "title": "Transducer multi-gpu error with status code 139", "user": {"login": "lilian0118", "id": 15357927, "node_id": "MDQ6VXNlcjE1MzU3OTI3", "avatar_url": "https://avatars.githubusercontent.com/u/15357927?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lilian0118", "html_url": "https://github.com/lilian0118", "followers_url": "https://api.github.com/users/lilian0118/followers", "following_url": "https://api.github.com/users/lilian0118/following{/other_user}", "gists_url": "https://api.github.com/users/lilian0118/gists{/gist_id}", "starred_url": "https://api.github.com/users/lilian0118/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lilian0118/subscriptions", "organizations_url": "https://api.github.com/users/lilian0118/orgs", "repos_url": "https://api.github.com/users/lilian0118/repos", "events_url": "https://api.github.com/users/lilian0118/events{/privacy}", "received_events_url": "https://api.github.com/users/lilian0118/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 777173273, "node_id": "MDU6TGFiZWw3NzcxNzMyNzM=", "url": "https://api.github.com/repos/espnet/espnet/labels/Bug", "name": "Bug", "color": "ee0701", "default": false, "description": "bug should be fixed"}, {"id": 1680978730, "node_id": "MDU6TGFiZWwxNjgwOTc4NzMw", "url": "https://api.github.com/repos/espnet/espnet/labels/ASR", "name": "ASR", "color": "3ee0d5", "default": false, "description": "Automatic speech recogntion"}, {"id": 1885270144, "node_id": "MDU6TGFiZWwxODg1MjcwMTQ0", "url": "https://api.github.com/repos/espnet/espnet/labels/Multiple%20GPUs", "name": "Multiple GPUs", "color": "c2e0c6", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2020-05-12T02:32:16Z", "updated_at": "2020-08-28T21:23:59Z", "closed_at": "2020-08-28T21:23:59Z", "author_association": "NONE", "active_lock_reason": null, "body": "When I use espnet/egs/mini_an4/asr1/conf/train_transducer.yaml or espnet/egs/vivos/asr1/conf/tuning/transducer/train_transducer.yaml config to train a RNN-T model, I meet a strange problem:\r\n    If ngpu is larger than one, the train shell script will  exit with status 139 at hundreds of iterations. But if ngpu = 1, the train will success. I also changed the \"etype\" in \"encoder\" to \"lstmp\" and \"blstm\", if ngpu > 1, the train will exit with status 139.\r\n    When I changed the train config to espnet/egs/vivos/asr1/conf/tuning/transducer/train_transformer-rnn_transducer.yaml, the train will success no matter ngpu > 1 or ngpu = 1.\r\n\r\nMy experiment environments is below:\r\n- python version: `3.6.4 `\r\n- espnet version: `espnet 0.7.0`\r\n- chainer version: `chainer 6.0.0`\r\n- pytorch version: `pytorch 1.4.0+cu100`\r\n- Train Datasets: `About 1000H Mandarin corpus`\r\n\r\nHas anyone ever encountered this question? Thanks.", "reactions": {"url": "https://api.github.com/repos/espnet/espnet/issues/1915/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/espnet/espnet/issues/1915/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/espnet/espnet/issues/1905", "repository_url": "https://api.github.com/repos/espnet/espnet", "labels_url": "https://api.github.com/repos/espnet/espnet/issues/1905/labels{/name}", "comments_url": "https://api.github.com/repos/espnet/espnet/issues/1905/comments", "events_url": "https://api.github.com/repos/espnet/espnet/issues/1905/events", "html_url": "https://github.com/espnet/espnet/issues/1905", "id": 612955925, "node_id": "MDU6SXNzdWU2MTI5NTU5MjU=", "number": 1905, "title": "Loading a Transformer architecture based pre-trained model in Python", "user": {"login": "rppravin", "id": 32497471, "node_id": "MDQ6VXNlcjMyNDk3NDcx", "avatar_url": "https://avatars.githubusercontent.com/u/32497471?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rppravin", "html_url": "https://github.com/rppravin", "followers_url": "https://api.github.com/users/rppravin/followers", "following_url": "https://api.github.com/users/rppravin/following{/other_user}", "gists_url": "https://api.github.com/users/rppravin/gists{/gist_id}", "starred_url": "https://api.github.com/users/rppravin/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rppravin/subscriptions", "organizations_url": "https://api.github.com/users/rppravin/orgs", "repos_url": "https://api.github.com/users/rppravin/repos", "events_url": "https://api.github.com/users/rppravin/events{/privacy}", "received_events_url": "https://api.github.com/users/rppravin/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 777173273, "node_id": "MDU6TGFiZWw3NzcxNzMyNzM=", "url": "https://api.github.com/repos/espnet/espnet/labels/Bug", "name": "Bug", "color": "ee0701", "default": false, "description": "bug should be fixed"}, {"id": 1680978730, "node_id": "MDU6TGFiZWwxNjgwOTc4NzMw", "url": "https://api.github.com/repos/espnet/espnet/labels/ASR", "name": "ASR", "color": "3ee0d5", "default": false, "description": "Automatic speech recogntion"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2020-05-05T23:29:32Z", "updated_at": "2020-05-08T18:45:42Z", "closed_at": "2020-05-08T18:45:42Z", "author_association": "NONE", "active_lock_reason": null, "body": "Following code (based on https://espnet.github.io/espnet/notebook/asr_cli.html#load-model) to load pre-trained model in Python using \"model.json\" file, works for RNN based models but not Transformer based models.\r\n\r\nFor example, I try to load a pre-trained Transformer based model based on Libripeech, such as shown below. When I print \"model\" after the step \"model = E2E.build(idim, odim, **conf)\", I see an RNN based architecture not Transformer based architecture as expected.\r\n\r\n*****************************\r\n\r\nimport json\r\nimport torch\r\nfrom espnet.nets.pytorch_backend.e2e_asr import E2E\r\n\r\nmodel_dir = \"espnet/egs/librispeech/asr1/exp/train_960_pytorch_train_pytorch_transformer.v1_aheads8_batch-bins15000000_specaug/results\"\r\n\r\nwith open(model_dir + \"/model.json\", \"r\") as f:\r\n    idim, odim, conf = json.load(f)\r\nmodel = E2E.build(idim, odim, **conf)\r\nmodel.load_state_dict(torch.load(model_dir + \"/model.val5.avg.best\"))\r\nmodel.cpu().eval()\r\nvocab = conf[\"char_list\"]\r\nprint(vocab)\r\nmodel\r\n\r\n*********************\r\n\r\nCan you please let me know if E2E is expected to work for Transofmer based architecture? If not, is there an easy way to load a Transformer architecture based pre-trained using a Python based interface, and use it (similar to E2E based model loading for RNN)?\r\n\r\nThanks!", "reactions": {"url": "https://api.github.com/repos/espnet/espnet/issues/1905/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/espnet/espnet/issues/1905/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/espnet/espnet/issues/1899", "repository_url": "https://api.github.com/repos/espnet/espnet", "labels_url": "https://api.github.com/repos/espnet/espnet/issues/1899/labels{/name}", "comments_url": "https://api.github.com/repos/espnet/espnet/issues/1899/comments", "events_url": "https://api.github.com/repos/espnet/espnet/issues/1899/events", "html_url": "https://github.com/espnet/espnet/issues/1899", "id": 611112570, "node_id": "MDU6SXNzdWU2MTExMTI1NzA=", "number": 1899, "title": "'espnet.nets.pytorch_backend.e2e_asr_transformer:E2E' object has no attribute 'serialize'", "user": {"login": "david1125222", "id": 37493144, "node_id": "MDQ6VXNlcjM3NDkzMTQ0", "avatar_url": "https://avatars.githubusercontent.com/u/37493144?v=4", "gravatar_id": "", "url": "https://api.github.com/users/david1125222", "html_url": "https://github.com/david1125222", "followers_url": "https://api.github.com/users/david1125222/followers", "following_url": "https://api.github.com/users/david1125222/following{/other_user}", "gists_url": "https://api.github.com/users/david1125222/gists{/gist_id}", "starred_url": "https://api.github.com/users/david1125222/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/david1125222/subscriptions", "organizations_url": "https://api.github.com/users/david1125222/orgs", "repos_url": "https://api.github.com/users/david1125222/repos", "events_url": "https://api.github.com/users/david1125222/events{/privacy}", "received_events_url": "https://api.github.com/users/david1125222/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 777173273, "node_id": "MDU6TGFiZWw3NzcxNzMyNzM=", "url": "https://api.github.com/repos/espnet/espnet/labels/Bug", "name": "Bug", "color": "ee0701", "default": false, "description": "bug should be fixed"}, {"id": 1680978730, "node_id": "MDU6TGFiZWwxNjgwOTc4NzMw", "url": "https://api.github.com/repos/espnet/espnet/labels/ASR", "name": "ASR", "color": "3ee0d5", "default": false, "description": "Automatic speech recogntion"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2020-05-02T05:35:32Z", "updated_at": "2021-09-27T14:49:54Z", "closed_at": "2021-09-27T14:49:54Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hello, \r\nWhen I trained the Transformer model, after an epoch the following error occurred. The training config is modified by the pretrained model  [https://github.com/espnet/espnet/blob/master/egs/librispeech/asr1/RESULTS.md#pytorch-large-transformer-with-specaug-4-gpus--transformer-lm-4-gpus](url) and I only reduced the number of layer. \r\n\r\n```\r\nTraceback (most recent call last):\r\n  File \"/home/training/r08943020/espnet/egs/librispeech/asr1/../../../espnet/bin/asr_train.py\", line 368, in <module>\r\n    main(sys.argv[1:])\r\n  File \"/home/training/r08943020/espnet/egs/librispeech/asr1/../../../espnet/bin/asr_train.py\", line 355, in main\r\n    train(args)\r\n  File \"/home/training/r08943020/espnet/espnet/asr/pytorch_backend/asr.py\", line 650, in train\r\n    trainer.run()\r\n  File \"/home/training/r08943020/espnet/tools/venv/lib/python3.7/site-packages/chainer/training/trainer.py\", line 349, in run\r\n    six.reraise(*exc_info)\r\n  File \"/home/training/r08943020/espnet/tools/venv/lib/python3.7/site-packages/six.py\", line 703, in reraise\r\n    raise value\r\n  File \"/home/training/r08943020/espnet/tools/venv/lib/python3.7/site-packages/chainer/training/trainer.py\", line 319, in run\r\n    entry.extension(self)\r\n  File \"/home/training/r08943020/espnet/tools/venv/lib/python3.7/site-packages/chainer/training/extensions/_snapshot.py\", line 224, in __call__\r\n    self._make_snapshot(trainer)\r\n  File \"/home/training/r08943020/espnet/tools/venv/lib/python3.7/site-packages/chainer/training/extensions/_snapshot.py\", line 228, in _make_snapshot\r\n    serialized_target = npz.serialize(target)\r\n  File \"/home/training/r08943020/espnet/tools/venv/lib/python3.7/site-packages/chainer/serializers/npz.py\", line 79, in serialize\r\n    s.save(obj)\r\n  File \"/home/training/r08943020/espnet/tools/venv/lib/python3.7/site-packages/chainer/serializer.py\", line 67, in save\r\n    obj.serialize(self)\r\n  File \"/home/training/r08943020/espnet/tools/venv/lib/python3.7/site-packages/torch/nn/modules/module.py\", line 539, in __getattr__\r\n    type(self).__name__, name))\r\nAttributeError: 'E2E' object has no attribute 'serialize'\r\n``` ", "reactions": {"url": "https://api.github.com/repos/espnet/espnet/issues/1899/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/espnet/espnet/issues/1899/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/espnet/espnet/issues/1891", "repository_url": "https://api.github.com/repos/espnet/espnet", "labels_url": "https://api.github.com/repos/espnet/espnet/issues/1891/labels{/name}", "comments_url": "https://api.github.com/repos/espnet/espnet/issues/1891/comments", "events_url": "https://api.github.com/repos/espnet/espnet/issues/1891/events", "html_url": "https://github.com/espnet/espnet/issues/1891", "id": 609575039, "node_id": "MDU6SXNzdWU2MDk1NzUwMzk=", "number": 1891, "title": "ASR demo download link unavailable", "user": {"login": "qmpzzpmq", "id": 21037898, "node_id": "MDQ6VXNlcjIxMDM3ODk4", "avatar_url": "https://avatars.githubusercontent.com/u/21037898?v=4", "gravatar_id": "", "url": "https://api.github.com/users/qmpzzpmq", "html_url": "https://github.com/qmpzzpmq", "followers_url": "https://api.github.com/users/qmpzzpmq/followers", "following_url": "https://api.github.com/users/qmpzzpmq/following{/other_user}", "gists_url": "https://api.github.com/users/qmpzzpmq/gists{/gist_id}", "starred_url": "https://api.github.com/users/qmpzzpmq/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/qmpzzpmq/subscriptions", "organizations_url": "https://api.github.com/users/qmpzzpmq/orgs", "repos_url": "https://api.github.com/users/qmpzzpmq/repos", "events_url": "https://api.github.com/users/qmpzzpmq/events{/privacy}", "received_events_url": "https://api.github.com/users/qmpzzpmq/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 777173273, "node_id": "MDU6TGFiZWw3NzcxNzMyNzM=", "url": "https://api.github.com/repos/espnet/espnet/labels/Bug", "name": "Bug", "color": "ee0701", "default": false, "description": "bug should be fixed"}, {"id": 1394261000, "node_id": "MDU6TGFiZWwxMzk0MjYxMDAw", "url": "https://api.github.com/repos/espnet/espnet/labels/Documentation", "name": "Documentation", "color": "fcef9f", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-04-30T04:53:19Z", "updated_at": "2020-05-15T10:06:56Z", "closed_at": "2020-05-15T10:06:56Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "for tedlium2.transformer.v1 and tedlium3.transformer.v1", "reactions": {"url": "https://api.github.com/repos/espnet/espnet/issues/1891/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/espnet/espnet/issues/1891/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/espnet/espnet/issues/1888", "repository_url": "https://api.github.com/repos/espnet/espnet", "labels_url": "https://api.github.com/repos/espnet/espnet/issues/1888/labels{/name}", "comments_url": "https://api.github.com/repos/espnet/espnet/issues/1888/comments", "events_url": "https://api.github.com/repos/espnet/espnet/issues/1888/events", "html_url": "https://github.com/espnet/espnet/issues/1888", "id": 608733565, "node_id": "MDU6SXNzdWU2MDg3MzM1NjU=", "number": 1888, "title": "using rnn-t on  librispeech recipe", "user": {"login": "WanderingSven", "id": 26950286, "node_id": "MDQ6VXNlcjI2OTUwMjg2", "avatar_url": "https://avatars.githubusercontent.com/u/26950286?v=4", "gravatar_id": "", "url": "https://api.github.com/users/WanderingSven", "html_url": "https://github.com/WanderingSven", "followers_url": "https://api.github.com/users/WanderingSven/followers", "following_url": "https://api.github.com/users/WanderingSven/following{/other_user}", "gists_url": "https://api.github.com/users/WanderingSven/gists{/gist_id}", "starred_url": "https://api.github.com/users/WanderingSven/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/WanderingSven/subscriptions", "organizations_url": "https://api.github.com/users/WanderingSven/orgs", "repos_url": "https://api.github.com/users/WanderingSven/repos", "events_url": "https://api.github.com/users/WanderingSven/events{/privacy}", "received_events_url": "https://api.github.com/users/WanderingSven/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 777173273, "node_id": "MDU6TGFiZWw3NzcxNzMyNzM=", "url": "https://api.github.com/repos/espnet/espnet/labels/Bug", "name": "Bug", "color": "ee0701", "default": false, "description": "bug should be fixed"}, {"id": 1680978730, "node_id": "MDU6TGFiZWwxNjgwOTc4NzMw", "url": "https://api.github.com/repos/espnet/espnet/labels/ASR", "name": "ASR", "color": "3ee0d5", "default": false, "description": "Automatic speech recogntion"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2020-04-29T02:23:53Z", "updated_at": "2020-07-07T07:03:40Z", "closed_at": "2020-05-15T12:15:46Z", "author_association": "NONE", "active_lock_reason": null, "body": "hi,everyone\r\n      I try to use rnn-t configure from /egs/vivos/asr1/conf/tuning/transfucer/train_transformer-rnn_transducer.yaml on librispeech recipe. However, it has an error after one epcho.What is the possible cause of the problem?\r\n![\u56fe\u7247](https://user-images.githubusercontent.com/26950286/80555602-54c5b700-8a03-11ea-84c7-ac63949ce281.png)\r\n", "reactions": {"url": "https://api.github.com/repos/espnet/espnet/issues/1888/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/espnet/espnet/issues/1888/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/espnet/espnet/issues/1882", "repository_url": "https://api.github.com/repos/espnet/espnet", "labels_url": "https://api.github.com/repos/espnet/espnet/issues/1882/labels{/name}", "comments_url": "https://api.github.com/repos/espnet/espnet/issues/1882/comments", "events_url": "https://api.github.com/repos/espnet/espnet/issues/1882/events", "html_url": "https://github.com/espnet/espnet/issues/1882", "id": 608068212, "node_id": "MDU6SXNzdWU2MDgwNjgyMTI=", "number": 1882, "title": "ModuleNotFoundError: No module named 'espnet'", "user": {"login": "cdliang11", "id": 30542401, "node_id": "MDQ6VXNlcjMwNTQyNDAx", "avatar_url": "https://avatars.githubusercontent.com/u/30542401?v=4", "gravatar_id": "", "url": "https://api.github.com/users/cdliang11", "html_url": "https://github.com/cdliang11", "followers_url": "https://api.github.com/users/cdliang11/followers", "following_url": "https://api.github.com/users/cdliang11/following{/other_user}", "gists_url": "https://api.github.com/users/cdliang11/gists{/gist_id}", "starred_url": "https://api.github.com/users/cdliang11/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/cdliang11/subscriptions", "organizations_url": "https://api.github.com/users/cdliang11/orgs", "repos_url": "https://api.github.com/users/cdliang11/repos", "events_url": "https://api.github.com/users/cdliang11/events{/privacy}", "received_events_url": "https://api.github.com/users/cdliang11/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 777173273, "node_id": "MDU6TGFiZWw3NzcxNzMyNzM=", "url": "https://api.github.com/repos/espnet/espnet/labels/Bug", "name": "Bug", "color": "ee0701", "default": false, "description": "bug should be fixed"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2020-04-28T06:46:54Z", "updated_at": "2021-05-26T05:53:09Z", "closed_at": "2020-06-04T03:36:46Z", "author_association": "NONE", "active_lock_reason": null, "body": "apply-cmvn --norm-vars=true data/train_100/cmvn.ark scp:exp/dump_feats/train/feats.16.scp ark:- \r\nTraceback (most recent call last):\r\n  File \"/home/Liangcd/Espnet/espnet/egs/librispeech/asr1/../../../utils/copy-feats.py\", line 6, in <module>\r\n    from espnet.transform.transformation import Transformation\r\nModuleNotFoundError: No module named 'espnet'\r\n", "reactions": {"url": "https://api.github.com/repos/espnet/espnet/issues/1882/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/espnet/espnet/issues/1882/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/espnet/espnet/issues/1863", "repository_url": "https://api.github.com/repos/espnet/espnet", "labels_url": "https://api.github.com/repos/espnet/espnet/issues/1863/labels{/name}", "comments_url": "https://api.github.com/repos/espnet/espnet/issues/1863/comments", "events_url": "https://api.github.com/repos/espnet/espnet/issues/1863/events", "html_url": "https://github.com/espnet/espnet/issues/1863", "id": 605480871, "node_id": "MDU6SXNzdWU2MDU0ODA4NzE=", "number": 1863, "title": "Freeze modules bug?", "user": {"login": "jxzhanggg", "id": 20578158, "node_id": "MDQ6VXNlcjIwNTc4MTU4", "avatar_url": "https://avatars.githubusercontent.com/u/20578158?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jxzhanggg", "html_url": "https://github.com/jxzhanggg", "followers_url": "https://api.github.com/users/jxzhanggg/followers", "following_url": "https://api.github.com/users/jxzhanggg/following{/other_user}", "gists_url": "https://api.github.com/users/jxzhanggg/gists{/gist_id}", "starred_url": "https://api.github.com/users/jxzhanggg/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jxzhanggg/subscriptions", "organizations_url": "https://api.github.com/users/jxzhanggg/orgs", "repos_url": "https://api.github.com/users/jxzhanggg/repos", "events_url": "https://api.github.com/users/jxzhanggg/events{/privacy}", "received_events_url": "https://api.github.com/users/jxzhanggg/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 777173273, "node_id": "MDU6TGFiZWw3NzcxNzMyNzM=", "url": "https://api.github.com/repos/espnet/espnet/labels/Bug", "name": "Bug", "color": "ee0701", "default": false, "description": "bug should be fixed"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2020-04-23T12:10:06Z", "updated_at": "2020-04-24T08:03:44Z", "closed_at": "2020-04-24T08:03:44Z", "author_association": "NONE", "active_lock_reason": null, "body": "https://github.com/espnet/espnet/blob/25862dd93081746ac623720f31f4f0f323c9750e/espnet/tts/pytorch_backend/tts.py#L331-L334\r\n\r\nDo you think to freeze the module of the model, the line should be change into:\r\n if any(mod.startswith(key) for key in args.freeze_mods): \r\n?\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/espnet/espnet/issues/1863/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/espnet/espnet/issues/1863/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/espnet/espnet/issues/1860", "repository_url": "https://api.github.com/repos/espnet/espnet", "labels_url": "https://api.github.com/repos/espnet/espnet/issues/1860/labels{/name}", "comments_url": "https://api.github.com/repos/espnet/espnet/issues/1860/comments", "events_url": "https://api.github.com/repos/espnet/espnet/issues/1860/events", "html_url": "https://github.com/espnet/espnet/issues/1860", "id": 604649047, "node_id": "MDU6SXNzdWU2MDQ2NDkwNDc=", "number": 1860, "title": "Training transducer model encounter an illegal memory access", "user": {"login": "shanguanma", "id": 39255927, "node_id": "MDQ6VXNlcjM5MjU1OTI3", "avatar_url": "https://avatars.githubusercontent.com/u/39255927?v=4", "gravatar_id": "", "url": "https://api.github.com/users/shanguanma", "html_url": "https://github.com/shanguanma", "followers_url": "https://api.github.com/users/shanguanma/followers", "following_url": "https://api.github.com/users/shanguanma/following{/other_user}", "gists_url": "https://api.github.com/users/shanguanma/gists{/gist_id}", "starred_url": "https://api.github.com/users/shanguanma/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/shanguanma/subscriptions", "organizations_url": "https://api.github.com/users/shanguanma/orgs", "repos_url": "https://api.github.com/users/shanguanma/repos", "events_url": "https://api.github.com/users/shanguanma/events{/privacy}", "received_events_url": "https://api.github.com/users/shanguanma/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 777173273, "node_id": "MDU6TGFiZWw3NzcxNzMyNzM=", "url": "https://api.github.com/repos/espnet/espnet/labels/Bug", "name": "Bug", "color": "ee0701", "default": false, "description": "bug should be fixed"}, {"id": 1680978730, "node_id": "MDU6TGFiZWwxNjgwOTc4NzMw", "url": "https://api.github.com/repos/espnet/espnet/labels/ASR", "name": "ASR", "color": "3ee0d5", "default": false, "description": "Automatic speech recogntion"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 13, "created_at": "2020-04-22T10:37:15Z", "updated_at": "2020-07-03T09:51:20Z", "closed_at": "2020-04-25T07:19:13Z", "author_association": "NONE", "active_lock_reason": null, "body": "When I test transformer-transducer of espnet, \r\nAt training stage, it encounter an illegal memory access in pytorch 1.1.0. or pytorch 1.4.0.\r\n\r\n# error log is as follows:\r\n```\r\nException in main training loop: CUDA error: an illegal memory access was encountered\r\nTraceback (most recent call last):\r\n  File \"/home4/md510/w2020/espnet_20200422/espnet/tools/venv/lib/python3.7/site-packages/chainer/training/trainer.py\", line 316, in run\r\n    update()\r\n  File \"/home4/md510/w2020/espnet_20200422/espnet/espnet/asr/pytorch_backend/asr.py\", line 241, in update\r\n    self.update_core()\r\n  File \"/home4/md510/w2020/espnet_20200422/espnet/espnet/asr/pytorch_backend/asr.py\", line 205, in update_core\r\n    data_parallel(self.model, x, range(self.ngpu)).mean() / self.accum_grad\r\n  File \"/home4/md510/w2020/espnet_20200422/espnet/tools/venv/lib/python3.7/site-packages/torch/nn/parallel/data_parallel.py\", line 204, in data_parallel\r\n    return module(*inputs[0], **module_kwargs[0])\r\n  File \"/home4/md510/w2020/espnet_20200422/espnet/tools/venv/lib/python3.7/site-packages/torch/nn/modules/module.py\", line 532, in __call__\r\n    result = self.forward(*input, **kwargs)\r\n  File \"/home4/md510/w2020/espnet_20200422/espnet/espnet/nets/pytorch_backend/e2e_asr_transducer.py\", line 413, in forward\r\n    loss = self.criterion(pred_pad, target, pred_len, target_len)\r\n  File \"/home4/md510/w2020/espnet_20200422/espnet/tools/venv/lib/python3.7/site-packages/torch/nn/modules/module.py\", line 532, in __call__\r\n    result = self.forward(*input, **kwargs)\r\n  File \"/home4/md510/w2020/espnet_20200422/espnet/espnet/nets/pytorch_backend/transducer/loss.py\", line 44, in forward\r\n    loss = self.trans_loss(pred_pad, target, pred_len, target_len)\r\n  File \"/home4/md510/w2020/espnet_20200422/espnet/tools/venv/lib/python3.7/site-packages/torch/nn/modules/module.py\", line 532, in __call__\r\n    result = self.forward(*input, **kwargs)\r\n  File \"/home4/md510/w2020/espnet_20200422/espnet/tools/venv/lib/python3.7/site-packages/warprnnt_pytorch-0.1-py3.7-linux-x86_64.egg/warprnnt_pytorch/__init__.py\", line 100, in forward\r\n    return self.loss(acts, labels, act_lens, label_lens, self.blank, self.reduction)\r\n  File \"/home4/md510/w2020/espnet_20200422/espnet/tools/venv/lib/python3.7/site-packages/warprnnt_pytorch-0.1-py3.7-linux-x86_64.egg/warprnnt_pytorch/__init__.py\", line 40, in forward\r\n    grads /= minibatch_size\r\nWill finalize trainer extensions and updater before reraising the exception.\r\nTraceback (most recent call last):\r\n  File \"/home4/md510/w2020/espnet_20200422/espnet/espnet/bin/asr_train.py\", line 622, in <module>\r\n    main(sys.argv[1:])\r\n  File \"/home4/md510/w2020/espnet_20200422/espnet/espnet/bin/asr_train.py\", line 608, in main\r\n    train(args)\r\n  File \"/home4/md510/w2020/espnet_20200422/espnet/espnet/asr/pytorch_backend/asr.py\", line 813, in train\r\n    trainer.run()\r\n  File \"/home4/md510/w2020/espnet_20200422/espnet/tools/venv/lib/python3.7/site-packages/chainer/training/trainer.py\", line 349, in run\r\n    six.reraise(*exc_info)\r\n  File \"/home4/md510/w2020/espnet_20200422/espnet/tools/venv/lib/python3.7/site-packages/six.py\", line 703, in reraise\r\n    raise value\r\n  File \"/home4/md510/w2020/espnet_20200422/espnet/tools/venv/lib/python3.7/site-packages/chainer/training/trainer.py\", line 316, in run\r\n    update()\r\n  File \"/home4/md510/w2020/espnet_20200422/espnet/espnet/asr/pytorch_backend/asr.py\", line 241, in update\r\n    self.update_core()\r\n  File \"/home4/md510/w2020/espnet_20200422/espnet/espnet/asr/pytorch_backend/asr.py\", line 205, in update_core\r\n    data_parallel(self.model, x, range(self.ngpu)).mean() / self.accum_grad\r\n  File \"/home4/md510/w2020/espnet_20200422/espnet/tools/venv/lib/python3.7/site-packages/torch/nn/parallel/data_parallel.py\", line 204, in data_parallel\r\n    return module(*inputs[0], **module_kwargs[0])\r\n  File \"/home4/md510/w2020/espnet_20200422/espnet/tools/venv/lib/python3.7/site-packages/torch/nn/modules/module.py\", line 532, in __call__\r\n    result = self.forward(*input, **kwargs)\r\n  File \"/home4/md510/w2020/espnet_20200422/espnet/espnet/nets/pytorch_backend/e2e_asr_transducer.py\", line 413, in forward\r\n    loss = self.criterion(pred_pad, target, pred_len, target_len)\r\n  File \"/home4/md510/w2020/espnet_20200422/espnet/tools/venv/lib/python3.7/site-packages/torch/nn/modules/module.py\", line 532, in __call__\r\n    result = self.forward(*input, **kwargs)\r\n  File \"/home4/md510/w2020/espnet_20200422/espnet/espnet/nets/pytorch_backend/transducer/loss.py\", line 44, in forward\r\n    loss = self.trans_loss(pred_pad, target, pred_len, target_len)\r\n  File \"/home4/md510/w2020/espnet_20200422/espnet/tools/venv/lib/python3.7/site-packages/torch/nn/modules/module.py\", line 532, in __call__\r\n    result = self.forward(*input, **kwargs)\r\n  File \"/home4/md510/w2020/espnet_20200422/espnet/tools/venv/lib/python3.7/site-packages/warprnnt_pytorch-0.1-py3.7-linux-x86_64.egg/warprnnt_pytorch/__init__.py\", line 100, in forward\r\n    return self.loss(acts, labels, act_lens, label_lens, self.blank, self.reduction)\r\n  File \"/home4/md510/w2020/espnet_20200422/espnet/tools/venv/lib/python3.7/site-packages/warprnnt_pytorch-0.1-py3.7-linux-x86_64.egg/warprnnt_pytorch/__init__.py\", line 40, in forward\r\n    grads /= minibatch_size\r\nRuntimeError: CUDA error: an illegal memory access was encountered\r\n# Ended (code 256) at Wed Apr 22 18:22:55 SGT 2020, elapsed time 2169 seconds\r\n```\r\n# transformer-transducer config is as follows:\r\n```\r\nbatch-size: 16  # defailt 30\r\nmaxlen-in: 512  # default 800\r\nmaxlen-out: 150\r\n\r\n# optimization related\r\ncriterion: loss\r\nearly-stop-criterion: \"validation/main/loss\"\r\nsortagrad: 0\r\nopt: noam\r\nepochs: 30\r\npatience: 0\r\naccum-grad: 4\r\ngrad-clip: 5.0\r\n\r\n# transformer related\r\ntransformer-lr: 10.0\r\ntransformer-warmup-steps: 8000\r\ntransformer-attn-dropout-rate-encoder: 0.4\r\ntransformer-attn-dropout-rate-decoder: 0.1\r\n\r\n# network architecture\r\n## encoder related\r\netype: transformer\r\ntransformer-input-layer: vgg2l\r\nelayers: 8\r\neunits: 320\r\ndropout-rate: 0.4\r\n## decoder related\r\ndtype: transformer\r\ndlayers: 2\r\ndec-embed-dim: 300\r\ndunits: 300\r\ndropout-rate-decoder: 0.1\r\n## attention related\r\nadim: 320\r\naheads: 4\r\n## joint network related\r\njoint-dim: 300\r\n\r\n# transducer related\r\nmtlalpha: 1.0 # mtlalpha should be set to 1.0 (CTC) to use transducer\r\nrnnt-mode: 'rnnt' # switch to 'rnnt-att' to use transducer with attention\r\nmodel-module: \"espnet.nets.pytorch_backend.e2e_asr_transducer:E2E\"\r\n\r\n```\r\n\r\n ", "reactions": {"url": "https://api.github.com/repos/espnet/espnet/issues/1860/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/espnet/espnet/issues/1860/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/espnet/espnet/issues/1839", "repository_url": "https://api.github.com/repos/espnet/espnet", "labels_url": "https://api.github.com/repos/espnet/espnet/issues/1839/labels{/name}", "comments_url": "https://api.github.com/repos/espnet/espnet/issues/1839/comments", "events_url": "https://api.github.com/repos/espnet/espnet/issues/1839/events", "html_url": "https://github.com/espnet/espnet/issues/1839", "id": 600209027, "node_id": "MDU6SXNzdWU2MDAyMDkwMjc=", "number": 1839, "title": "model link for transformer in espnet/egs/tedlium3/asr1 not working", "user": {"login": "ORlGlN", "id": 35373089, "node_id": "MDQ6VXNlcjM1MzczMDg5", "avatar_url": "https://avatars.githubusercontent.com/u/35373089?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ORlGlN", "html_url": "https://github.com/ORlGlN", "followers_url": "https://api.github.com/users/ORlGlN/followers", "following_url": "https://api.github.com/users/ORlGlN/following{/other_user}", "gists_url": "https://api.github.com/users/ORlGlN/gists{/gist_id}", "starred_url": "https://api.github.com/users/ORlGlN/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ORlGlN/subscriptions", "organizations_url": "https://api.github.com/users/ORlGlN/orgs", "repos_url": "https://api.github.com/users/ORlGlN/repos", "events_url": "https://api.github.com/users/ORlGlN/events{/privacy}", "received_events_url": "https://api.github.com/users/ORlGlN/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 777173273, "node_id": "MDU6TGFiZWw3NzcxNzMyNzM=", "url": "https://api.github.com/repos/espnet/espnet/labels/Bug", "name": "Bug", "color": "ee0701", "default": false, "description": "bug should be fixed"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2020-04-15T10:56:38Z", "updated_at": "2020-04-15T17:10:13Z", "closed_at": "2020-04-15T17:10:13Z", "author_association": "NONE", "active_lock_reason": null, "body": "The model link with the following details returned 404 on Google Drive, anyone able to fix the link?\r\nfile path: espnet/egs/tedlium3/asr1/RESULTS.md\r\nmodel name: Transformer (elayers=12, dlayers=6, units=2048, 8 GPUs, specaug) + large LM\r\nmodel link: https://drive.google.com/open?id=1wYYTwgvbB7uy6agHywhQfnuVWWW_obmO\r\n\r\nThanks in advance.\r\n", "reactions": {"url": "https://api.github.com/repos/espnet/espnet/issues/1839/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/espnet/espnet/issues/1839/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/espnet/espnet/issues/1836", "repository_url": "https://api.github.com/repos/espnet/espnet", "labels_url": "https://api.github.com/repos/espnet/espnet/issues/1836/labels{/name}", "comments_url": "https://api.github.com/repos/espnet/espnet/issues/1836/comments", "events_url": "https://api.github.com/repos/espnet/espnet/issues/1836/events", "html_url": "https://github.com/espnet/espnet/issues/1836", "id": 599473591, "node_id": "MDU6SXNzdWU1OTk0NzM1OTE=", "number": 1836, "title": "CTC loss and feature extractor in espnet model with mixed precision", "user": {"login": "SeanNaren", "id": 6707363, "node_id": "MDQ6VXNlcjY3MDczNjM=", "avatar_url": "https://avatars.githubusercontent.com/u/6707363?v=4", "gravatar_id": "", "url": "https://api.github.com/users/SeanNaren", "html_url": "https://github.com/SeanNaren", "followers_url": "https://api.github.com/users/SeanNaren/followers", "following_url": "https://api.github.com/users/SeanNaren/following{/other_user}", "gists_url": "https://api.github.com/users/SeanNaren/gists{/gist_id}", "starred_url": "https://api.github.com/users/SeanNaren/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/SeanNaren/subscriptions", "organizations_url": "https://api.github.com/users/SeanNaren/orgs", "repos_url": "https://api.github.com/users/SeanNaren/repos", "events_url": "https://api.github.com/users/SeanNaren/events{/privacy}", "received_events_url": "https://api.github.com/users/SeanNaren/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 777173273, "node_id": "MDU6TGFiZWw3NzcxNzMyNzM=", "url": "https://api.github.com/repos/espnet/espnet/labels/Bug", "name": "Bug", "color": "ee0701", "default": false, "description": "bug should be fixed"}, {"id": 1889036170, "node_id": "MDU6TGFiZWwxODg5MDM2MTcw", "url": "https://api.github.com/repos/espnet/espnet/labels/ESPnet2", "name": "ESPnet2", "color": "f2db68", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/espnet/espnet/milestones/20", "html_url": "https://github.com/espnet/espnet/milestone/20", "labels_url": "https://api.github.com/repos/espnet/espnet/milestones/20/labels", "id": 5721366, "node_id": "MDk6TWlsZXN0b25lNTcyMTM2Ng==", "number": 20, "title": "v.0.9.1", "description": "", "creator": {"login": "kan-bayashi", "id": 22779813, "node_id": "MDQ6VXNlcjIyNzc5ODEz", "avatar_url": "https://avatars.githubusercontent.com/u/22779813?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kan-bayashi", "html_url": "https://github.com/kan-bayashi", "followers_url": "https://api.github.com/users/kan-bayashi/followers", "following_url": "https://api.github.com/users/kan-bayashi/following{/other_user}", "gists_url": "https://api.github.com/users/kan-bayashi/gists{/gist_id}", "starred_url": "https://api.github.com/users/kan-bayashi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kan-bayashi/subscriptions", "organizations_url": "https://api.github.com/users/kan-bayashi/orgs", "repos_url": "https://api.github.com/users/kan-bayashi/repos", "events_url": "https://api.github.com/users/kan-bayashi/events{/privacy}", "received_events_url": "https://api.github.com/users/kan-bayashi/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 39, "state": "closed", "created_at": "2020-08-01T01:27:40Z", "updated_at": "2020-08-15T07:35:49Z", "due_on": "2020-08-31T07:00:00Z", "closed_at": "2020-08-15T07:35:49Z"}, "comments": 23, "created_at": "2020-04-14T10:45:50Z", "updated_at": "2020-08-08T01:07:49Z", "closed_at": "2020-08-08T01:07:49Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Hey guys! When I use `--train_dtype O1` as a parameter for `espnet2.bin.asr_train` I run into the below error message.\r\n\r\n```\r\nRuntimeError: \"ctc_loss_cuda\" not implemented for 'Half'\r\n```\r\nIn deepspeech.pytorch this is handled by converting the loss to float32 as seen [here](https://github.com/SeanNaren/deepspeech.pytorch/blob/master/train.py#L253). We've tested this internally on a variety of scales and this works well for us.\r\n\r\nIs this something acceptable for you guys? If so I don't mind making the change via a PR!", "reactions": {"url": "https://api.github.com/repos/espnet/espnet/issues/1836/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/espnet/espnet/issues/1836/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/espnet/espnet/issues/1832", "repository_url": "https://api.github.com/repos/espnet/espnet", "labels_url": "https://api.github.com/repos/espnet/espnet/issues/1832/labels{/name}", "comments_url": "https://api.github.com/repos/espnet/espnet/issues/1832/comments", "events_url": "https://api.github.com/repos/espnet/espnet/issues/1832/events", "html_url": "https://github.com/espnet/espnet/issues/1832", "id": 599244316, "node_id": "MDU6SXNzdWU1OTkyNDQzMTY=", "number": 1832, "title": "transformer bug in Pytorch 1.2.0", "user": {"login": "RobotGF", "id": 20805320, "node_id": "MDQ6VXNlcjIwODA1MzIw", "avatar_url": "https://avatars.githubusercontent.com/u/20805320?v=4", "gravatar_id": "", "url": "https://api.github.com/users/RobotGF", "html_url": "https://github.com/RobotGF", "followers_url": "https://api.github.com/users/RobotGF/followers", "following_url": "https://api.github.com/users/RobotGF/following{/other_user}", "gists_url": "https://api.github.com/users/RobotGF/gists{/gist_id}", "starred_url": "https://api.github.com/users/RobotGF/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/RobotGF/subscriptions", "organizations_url": "https://api.github.com/users/RobotGF/orgs", "repos_url": "https://api.github.com/users/RobotGF/repos", "events_url": "https://api.github.com/users/RobotGF/events{/privacy}", "received_events_url": "https://api.github.com/users/RobotGF/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 777173273, "node_id": "MDU6TGFiZWw3NzcxNzMyNzM=", "url": "https://api.github.com/repos/espnet/espnet/labels/Bug", "name": "Bug", "color": "ee0701", "default": false, "description": "bug should be fixed"}, {"id": 1680978730, "node_id": "MDU6TGFiZWwxNjgwOTc4NzMw", "url": "https://api.github.com/repos/espnet/espnet/labels/ASR", "name": "ASR", "color": "3ee0d5", "default": false, "description": "Automatic speech recogntion"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2020-04-14T02:06:27Z", "updated_at": "2020-04-17T09:31:16Z", "closed_at": "2020-04-17T09:31:16Z", "author_association": "NONE", "active_lock_reason": null, "body": "espnet/espnet/nets/pytorch_backend/transformer/mask.py \r\n`is_torch_1_2_plus = LooseVersion(torch.__version__) >= LooseVersion('1.2.0')\r\ndatatype = torch.bool if is_torch_1_2_plus else torch.uint8\r\n\r\n\r\ndef subsequent_mask(size, device=\"cpu\", dtype=datatype):\r\n    \"\"\"Create mask for subsequent steps (1, size, size).\r\n    :param int size: size of mask\r\n    :param str device: \"cpu\" or \"cuda\" or torch.Tensor.device\r\n    :param torch.dtype dtype: result dtype\r\n    :rtype: torch.Tensor\r\n    >>> subsequent_mask(3)\r\n    [[1, 0, 0],\r\n     [1, 1, 0],\r\n     [1, 1, 1]]\r\n    \"\"\"\r\n    ret = torch.ones(size, size, device=device, dtype=dtype)\r\n    return torch.tril(ret, out=ret)\r\n`\r\nRuntimeError: \"tril\" not implemented for 'Bool'\r\n\r\npytorch 1.2.0 with GPU or CPU ", "reactions": {"url": "https://api.github.com/repos/espnet/espnet/issues/1832/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/espnet/espnet/issues/1832/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/espnet/espnet/issues/1831", "repository_url": "https://api.github.com/repos/espnet/espnet", "labels_url": "https://api.github.com/repos/espnet/espnet/issues/1831/labels{/name}", "comments_url": "https://api.github.com/repos/espnet/espnet/issues/1831/comments", "events_url": "https://api.github.com/repos/espnet/espnet/issues/1831/events", "html_url": "https://github.com/espnet/espnet/issues/1831", "id": 599111042, "node_id": "MDU6SXNzdWU1OTkxMTEwNDI=", "number": 1831, "title": "`__init__.py` files missing?", "user": {"login": "dmitriy-serdyuk", "id": 2872615, "node_id": "MDQ6VXNlcjI4NzI2MTU=", "avatar_url": "https://avatars.githubusercontent.com/u/2872615?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dmitriy-serdyuk", "html_url": "https://github.com/dmitriy-serdyuk", "followers_url": "https://api.github.com/users/dmitriy-serdyuk/followers", "following_url": "https://api.github.com/users/dmitriy-serdyuk/following{/other_user}", "gists_url": "https://api.github.com/users/dmitriy-serdyuk/gists{/gist_id}", "starred_url": "https://api.github.com/users/dmitriy-serdyuk/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dmitriy-serdyuk/subscriptions", "organizations_url": "https://api.github.com/users/dmitriy-serdyuk/orgs", "repos_url": "https://api.github.com/users/dmitriy-serdyuk/repos", "events_url": "https://api.github.com/users/dmitriy-serdyuk/events{/privacy}", "received_events_url": "https://api.github.com/users/dmitriy-serdyuk/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 777173273, "node_id": "MDU6TGFiZWw3NzcxNzMyNzM=", "url": "https://api.github.com/repos/espnet/espnet/labels/Bug", "name": "Bug", "color": "ee0701", "default": false, "description": "bug should be fixed"}, {"id": 1275359095, "node_id": "MDU6TGFiZWwxMjc1MzU5MDk1", "url": "https://api.github.com/repos/espnet/espnet/labels/Discussion", "name": "Discussion", "color": "e06b28", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 7, "created_at": "2020-04-13T20:17:51Z", "updated_at": "2020-04-15T17:05:16Z", "closed_at": "2020-04-15T17:02:45Z", "author_association": "NONE", "active_lock_reason": null, "body": "`__init__.py` files seem to be missing in all directories under `espnet/`. This causes various import errrors.\r\n\r\n```\r\n$ python -c \"import espnet.utils\"\r\nTraceback (most recent call last):\r\n  File \"<string>\", line 1, in <module>\r\nModuleNotFoundError: No module named 'espnet.utils'\r\n```\r\n\r\n```\r\napply-cmvn --norm-vars=true data/train_nodev/cmvn.ark scp:exp/dump_feats/train/feats.1.scp ark:- \r\nTraceback (most recent call last):\r\n  File \"/network/home/serdyuk/projects/espnet/egs/timit/asr1/../../../utils/copy-feats.py\", line 6, in <module>\r\n    from espnet.transform.transformation import Transformation\r\nModuleNotFoundError: No module named 'espnet.transform'\r\n```", "reactions": {"url": "https://api.github.com/repos/espnet/espnet/issues/1831/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/espnet/espnet/issues/1831/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/espnet/espnet/issues/1808", "repository_url": "https://api.github.com/repos/espnet/espnet", "labels_url": "https://api.github.com/repos/espnet/espnet/issues/1808/labels{/name}", "comments_url": "https://api.github.com/repos/espnet/espnet/issues/1808/comments", "events_url": "https://api.github.com/repos/espnet/espnet/issues/1808/events", "html_url": "https://github.com/espnet/espnet/issues/1808", "id": 598175610, "node_id": "MDU6SXNzdWU1OTgxNzU2MTA=", "number": 1808, "title": "espnet2 can't use batch_type=folded ", "user": {"login": "shanguanma", "id": 39255927, "node_id": "MDQ6VXNlcjM5MjU1OTI3", "avatar_url": "https://avatars.githubusercontent.com/u/39255927?v=4", "gravatar_id": "", "url": "https://api.github.com/users/shanguanma", "html_url": "https://github.com/shanguanma", "followers_url": "https://api.github.com/users/shanguanma/followers", "following_url": "https://api.github.com/users/shanguanma/following{/other_user}", "gists_url": "https://api.github.com/users/shanguanma/gists{/gist_id}", "starred_url": "https://api.github.com/users/shanguanma/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/shanguanma/subscriptions", "organizations_url": "https://api.github.com/users/shanguanma/orgs", "repos_url": "https://api.github.com/users/shanguanma/repos", "events_url": "https://api.github.com/users/shanguanma/events{/privacy}", "received_events_url": "https://api.github.com/users/shanguanma/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 777173273, "node_id": "MDU6TGFiZWw3NzcxNzMyNzM=", "url": "https://api.github.com/repos/espnet/espnet/labels/Bug", "name": "Bug", "color": "ee0701", "default": false, "description": "bug should be fixed"}, {"id": 1680978730, "node_id": "MDU6TGFiZWwxNjgwOTc4NzMw", "url": "https://api.github.com/repos/espnet/espnet/labels/ASR", "name": "ASR", "color": "3ee0d5", "default": false, "description": "Automatic speech recogntion"}, {"id": 1889036170, "node_id": "MDU6TGFiZWwxODg5MDM2MTcw", "url": "https://api.github.com/repos/espnet/espnet/labels/ESPnet2", "name": "ESPnet2", "color": "f2db68", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-04-11T03:00:27Z", "updated_at": "2020-04-11T10:18:31Z", "closed_at": "2020-04-11T10:17:46Z", "author_association": "NONE", "active_lock_reason": null, "body": "When I use  master of espnet currently, I will test espnet2  to train asr with transformer configure, \r\nWhen I want to get asr_states(e.g: stage 9 of asr.sh ), an error occurred. \r\n\r\nMy environment is as follows:\r\n````\r\ncuda:10\r\npython: 3.7.3\r\ntorch: 1.0.1\r\n````\r\ntransformer configure:\r\n````\r\n# network architecture\r\n# encoder related\r\nencoder: transformer\r\nencoder_conf:\r\n    input_layer: \"conv2d\"\r\n    num_blocks: 12\r\n    linear_units: 2048\r\n    dropout_rate: 0.1\r\n    output_size: 256  # dimension of attention\r\n    attention_heads: 4\r\n    attention_dropout_rate: 0.0\r\n\r\n# decoder related\r\n# decoder related\r\ndecoder: transformer\r\ndecoder_conf:\r\n    input_layer: \"embed\"\r\n    num_blocks: 6\r\n    linear_units: 2048\r\n    dropout_rate: 0.1\r\n\r\n# hybrid CTC/attention\r\nmodel_conf:\r\n    ctc_weight: 0.3\r\n    lsm_weight: 0.1\r\n    length_normalized_loss: false\r\n\r\n# minibatch related\r\nbatch_type: folded\r\nbatch_size: 32\r\ninit: xavier_uniform  # choices=[      \"chainer\",\"xavier_uniform\",\"xavier_normal\",\"kaiming_uniform\",\"kaiming_normal\", None,], default : None\r\n\r\n# optimization related\r\naccum_grad: 2\r\ngrad_clip: 5\r\npatience: none\r\nmax_epoch: 100\r\n\r\n# optimizer\r\noptim: adam\r\noptim_conf:\r\n    lr:  0.001           # pytorch default\r\n    betas: [0.9, 0.98]  # from https://github.com/espnet/espnet/blob/master/espnet/nets/pytorch_backend/transformer/optimizer.py\r\n    eps: 0.000000001    # 1e-9\r\n\r\nscheduler: reducelronplateau\r\nscheduler_conf:\r\n    mode: min\r\n    factor: 0.1\r\n    patience: 10\r\n    verbose: false\r\n    threshold: 0.0001\r\n    threshold_mode: rel\r\n    cooldown: 0\r\n    min_lr: 0\r\n    eps: 1.0e-08\r\n\r\n\r\n\r\n# others:\r\nval_scheduler_criterion:\r\n    - valid\r\n    - acc\r\nbest_model_criterion:\r\n-  - valid\r\n   - acc\r\n   - max\r\nkeep_nbest_models: 10\r\n````\r\nThe error log is as follows:\r\n````\r\n# python3 -m espnet2.bin.asr_train --collect_stats true --use_preprocessor true --bpemodel data/token_list/bpe_bpe3000/model.model --token_type bpe --token_list data/token_list/bpe_bpe3000/tokens.txt --non_linguistic_symbols none --train_data_path_and_name_and_type dump/fbank_pitch/train_trn_sp/feats.scp,speech,kaldi_ark --train_data_path_and_name_and_type dump/fbank_pitch/train_trn_sp/text,text,text --valid_data_path_and_name_and_type dump/fbank_pitch/train_dev/feats.scp,speech,kaldi_ark --valid_data_path_and_name_and_type dump/fbank_pitch/train_dev/text,text,text --train_shape_file exp/asr_stats_train_asr_transformer_pytorch_1.0.1_fbank_pitch_bpe/logdir/train.10.scp --valid_shape_file exp/asr_stats_train_asr_transformer_pytorch_1.0.1_fbank_pitch_bpe/logdir/dev.10.scp --fold_length 800 --output_dir exp/asr_stats_train_asr_transformer_pytorch_1.0.1_fbank_pitch_bpe/logdir/stats.10 --config conf/espnet2_conf_nscc_new/training/train_asr_transformer_pytorch_1.0.1.yaml --input_size=83 \r\n# Started at Sat Apr 11 10:09:34 +08 2020\r\n#\r\n/home/users/ntu/tlvu/espnet_v0.7_202004010/espnet/tools/venv/bin/python3 /home/users/ntu/tlvu/espnet_v0.7_202004010/espnet/espnet2/bin/asr_train.py --collect_stats true --use_preprocessor true --bpemodel data/token_list/bpe_bpe3000/model.model --token_type bpe --token_list data/token_list/bpe_bpe3000/tokens.txt --non_linguistic_symbols none --train_data_path_and_name_and_type dump/fbank_pitch/train_trn_sp/feats.scp,speech,kaldi_ark --train_data_path_and_name_and_type dump/fbank_pitch/train_trn_sp/text,text,text --valid_data_path_and_name_and_type dump/fbank_pitch/train_dev/feats.scp,speech,kaldi_ark --valid_data_path_and_name_and_type dump/fbank_pitch/train_dev/text,text,text --train_shape_file exp/asr_stats_train_asr_transformer_pytorch_1.0.1_fbank_pitch_bpe/logdir/train.10.scp --valid_shape_file exp/asr_stats_train_asr_transformer_pytorch_1.0.1_fbank_pitch_bpe/logdir/dev.10.scp --fold_length 800 --output_dir exp/asr_stats_train_asr_transformer_pytorch_1.0.1_fbank_pitch_bpe/logdir/stats.10 --config conf/espnet2_conf_nscc_new/training/train_asr_transformer_pytorch_1.0.1.yaml --input_size=83\r\n[dgx4105] 2020-04-11 10:09:42,987 (fileio:154) ERROR: Error happened with path=\"exp/asr_stats_train_asr_transformer_pytorch_1.0.1_fbank_pitch_bpe/logdir/train.10.scp\", id=\"sp0.9-ui13f-ui13faz_0101-63916-64870\", value=\"/home/users/ntu/tlvu/scratch/w2020/espnet-recipe/seame_e2e_espnet2/dump/fbank_pitch/org/train_trn_sp/data/raw_fbank_pitch_train_trn_sp.9.ark:651686373\"\r\nTraceback (most recent call last):\r\n  File \"/home/users/ntu/tlvu/espnet_v0.7_202004010/espnet/tools/venv/lib/python3.7/runpy.py\", line 193, in _run_module_as_main\r\n    \"__main__\", mod_spec)\r\n  File \"/home/users/ntu/tlvu/espnet_v0.7_202004010/espnet/tools/venv/lib/python3.7/runpy.py\", line 85, in _run_code\r\n    exec(code, run_globals)\r\n  File \"/home/users/ntu/tlvu/espnet_v0.7_202004010/espnet/espnet2/bin/asr_train.py\", line 23, in <module>\r\n    main()\r\n  File \"/home/users/ntu/tlvu/espnet_v0.7_202004010/espnet/espnet2/bin/asr_train.py\", line 19, in main\r\n    ASRTask.main(cmd=cmd)\r\n  File \"/home/users/ntu/tlvu/espnet_v0.7_202004010/espnet/espnet2/tasks/abs_task.py\", line 842, in main\r\n    cls.main_worker(args)\r\n  File \"/home/users/ntu/tlvu/espnet_v0.7_202004010/espnet/espnet2/tasks/abs_task.py\", line 964, in main_worker\r\n    **common_iter_kwargs,\r\n  File \"/home/users/ntu/tlvu/espnet_v0.7_202004010/espnet/espnet2/tasks/abs_task.py\", line 1257, in build_iter_factory\r\n    sort_batch=sort_batch,\r\n  File \"/home/users/ntu/tlvu/espnet_v0.7_202004010/espnet/espnet2/tasks/abs_task.py\", line 1318, in build_sequence_iter_factory\r\n    min_batch_size=torch.distributed.get_world_size() if distributed else 1,\r\n  File \"/home/users/ntu/tlvu/espnet_v0.7_202004010/espnet/espnet2/samplers/build_batch_sampler.py\", line 135, in build_batch_sampler\r\n    min_batch_size=min_batch_size,\r\n  File \"/home/users/ntu/tlvu/espnet_v0.7_202004010/espnet/espnet2/samplers/folded_batch_sampler.py\", line 45, in __init__\r\n    load_num_sequence_text(s, loader_type=\"csv_int\") for s in shape_files\r\n  File \"/home/users/ntu/tlvu/espnet_v0.7_202004010/espnet/espnet2/samplers/folded_batch_sampler.py\", line 45, in <listcomp>\r\n    load_num_sequence_text(s, loader_type=\"csv_int\") for s in shape_files\r\n  File \"/home/users/ntu/tlvu/espnet_v0.7_202004010/espnet/espnet2/utils/fileio.py\", line 150, in load_num_sequence_text\r\n    StringIO(v), ndmin=1, dtype=dtype, delimiter=delimiter\r\n  File \"/home/users/ntu/tlvu/espnet_v0.7_202004010/espnet/tools/venv/lib/python3.7/site-packages/numpy/lib/npyio.py\", line 1159, in loadtxt\r\n    for x in read_data(_loadtxt_chunksize):\r\n  File \"/home/users/ntu/tlvu/espnet_v0.7_202004010/espnet/tools/venv/lib/python3.7/site-packages/numpy/lib/npyio.py\", line 1087, in read_data\r\n    items = [conv(val) for (conv, val) in zip(converters, vals)]\r\n  File \"/home/users/ntu/tlvu/espnet_v0.7_202004010/espnet/tools/venv/lib/python3.7/site-packages/numpy/lib/npyio.py\", line 1087, in <listcomp>\r\n    items = [conv(val) for (conv, val) in zip(converters, vals)]\r\nValueError: invalid literal for int() with base 10: '/home/users/ntu/tlvu/scratch/w2020/espnet-recipe/seame_e2e_espnet2/dump/fbank_pitch/org/train_trn_sp/data/raw_fbank_pitch_train_trn_sp.9.ark:651686373'\r\n# Accounting: time=9 threads=1\r\n# Ended (code 1) at Sat Apr 11 10:09:43 +08 2020, elapsed time 9 seconds\r\n````\r\n", "reactions": {"url": "https://api.github.com/repos/espnet/espnet/issues/1808/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/espnet/espnet/issues/1808/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/espnet/espnet/issues/1806", "repository_url": "https://api.github.com/repos/espnet/espnet", "labels_url": "https://api.github.com/repos/espnet/espnet/issues/1806/labels{/name}", "comments_url": "https://api.github.com/repos/espnet/espnet/issues/1806/comments", "events_url": "https://api.github.com/repos/espnet/espnet/issues/1806/events", "html_url": "https://github.com/espnet/espnet/issues/1806", "id": 597970949, "node_id": "MDU6SXNzdWU1OTc5NzA5NDk=", "number": 1806, "title": "Unable to decode with Word RNNLM when <space> is not in corpus", "user": {"login": "ajd12342", "id": 39792269, "node_id": "MDQ6VXNlcjM5NzkyMjY5", "avatar_url": "https://avatars.githubusercontent.com/u/39792269?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ajd12342", "html_url": "https://github.com/ajd12342", "followers_url": "https://api.github.com/users/ajd12342/followers", "following_url": "https://api.github.com/users/ajd12342/following{/other_user}", "gists_url": "https://api.github.com/users/ajd12342/gists{/gist_id}", "starred_url": "https://api.github.com/users/ajd12342/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ajd12342/subscriptions", "organizations_url": "https://api.github.com/users/ajd12342/orgs", "repos_url": "https://api.github.com/users/ajd12342/repos", "events_url": "https://api.github.com/users/ajd12342/events{/privacy}", "received_events_url": "https://api.github.com/users/ajd12342/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 777173273, "node_id": "MDU6TGFiZWw3NzcxNzMyNzM=", "url": "https://api.github.com/repos/espnet/espnet/labels/Bug", "name": "Bug", "color": "ee0701", "default": false, "description": "bug should be fixed"}, {"id": 1680978730, "node_id": "MDU6TGFiZWwxNjgwOTc4NzMw", "url": "https://api.github.com/repos/espnet/espnet/labels/ASR", "name": "ASR", "color": "3ee0d5", "default": false, "description": "Automatic speech recogntion"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-04-10T16:17:32Z", "updated_at": "2020-05-15T10:04:24Z", "closed_at": "2020-05-15T10:04:24Z", "author_association": "NONE", "active_lock_reason": null, "body": "I have trained a SentencePiece BPE token based E2E system and a word-based RNNLM.\r\nWhile decoding, I get an error:\r\n```\r\nFile \"/home/anuj/espnet/espnet/lm/pytorch_backend/extlm.py\", line 116, in __init__\r\n    self.space = subword_dict['<space>']\r\nKeyError: '<space>'\r\n```\r\nIs there any solution to this?\r\nThis is similar to #1473 but the setup described in that issue was different.", "reactions": {"url": "https://api.github.com/repos/espnet/espnet/issues/1806/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/espnet/espnet/issues/1806/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/espnet/espnet/issues/1780", "repository_url": "https://api.github.com/repos/espnet/espnet", "labels_url": "https://api.github.com/repos/espnet/espnet/issues/1780/labels{/name}", "comments_url": "https://api.github.com/repos/espnet/espnet/issues/1780/comments", "events_url": "https://api.github.com/repos/espnet/espnet/issues/1780/events", "html_url": "https://github.com/espnet/espnet/issues/1780", "id": 595662167, "node_id": "MDU6SXNzdWU1OTU2NjIxNjc=", "number": 1780, "title": "Probably no dropout applied to the encoder in the RNN encoder/decoder ASR", "user": {"login": "qmeeus", "id": 25608944, "node_id": "MDQ6VXNlcjI1NjA4OTQ0", "avatar_url": "https://avatars.githubusercontent.com/u/25608944?v=4", "gravatar_id": "", "url": "https://api.github.com/users/qmeeus", "html_url": "https://github.com/qmeeus", "followers_url": "https://api.github.com/users/qmeeus/followers", "following_url": "https://api.github.com/users/qmeeus/following{/other_user}", "gists_url": "https://api.github.com/users/qmeeus/gists{/gist_id}", "starred_url": "https://api.github.com/users/qmeeus/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/qmeeus/subscriptions", "organizations_url": "https://api.github.com/users/qmeeus/orgs", "repos_url": "https://api.github.com/users/qmeeus/repos", "events_url": "https://api.github.com/users/qmeeus/events{/privacy}", "received_events_url": "https://api.github.com/users/qmeeus/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 777173273, "node_id": "MDU6TGFiZWw3NzcxNzMyNzM=", "url": "https://api.github.com/repos/espnet/espnet/labels/Bug", "name": "Bug", "color": "ee0701", "default": false, "description": "bug should be fixed"}, {"id": 1680978730, "node_id": "MDU6TGFiZWwxNjgwOTc4NzMw", "url": "https://api.github.com/repos/espnet/espnet/labels/ASR", "name": "ASR", "color": "3ee0d5", "default": false, "description": "Automatic speech recogntion"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 7, "created_at": "2020-04-07T07:43:21Z", "updated_at": "2020-04-09T14:37:42Z", "closed_at": "2020-04-09T14:37:42Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Hi,\r\n\r\nWhen trying to apply dropout on the rnn encoder, I get this warning:\r\n```\r\n/lib/python3.6/site-packages/torch/nn/modules/rnn.py:50: UserWarning: dropout option adds dropout after all but last recurrent layer, so non-zero dropout expects num_layers greater than 1, but got dropout=0.5 and num_layers=1\r\n  \"num_layers={}\".format(dropout, num_layers))\r\n```\r\nIndeed, [after a quick check in the code](https://github.com/espnet/espnet/blob/master/espnet/nets/pytorch_backend/rnn/encoders.py#L35):\r\n```python\r\nrnn = torch.nn.LSTM(inputdim, cdim, dropout=dropout, num_layers=1, bidirectional=bidir,\r\n                                batch_first=True) if \"lstm\" in typ \\\r\n                else torch.nn.GRU(inputdim, cdim, dropout=dropout, num_layers=1, bidirectional=bidir, batch_first=True)\r\n```\r\n", "reactions": {"url": "https://api.github.com/repos/espnet/espnet/issues/1780/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/espnet/espnet/issues/1780/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/espnet/espnet/issues/1757", "repository_url": "https://api.github.com/repos/espnet/espnet", "labels_url": "https://api.github.com/repos/espnet/espnet/issues/1757/labels{/name}", "comments_url": "https://api.github.com/repos/espnet/espnet/issues/1757/comments", "events_url": "https://api.github.com/repos/espnet/espnet/issues/1757/events", "html_url": "https://github.com/espnet/espnet/issues/1757", "id": 591838561, "node_id": "MDU6SXNzdWU1OTE4Mzg1NjE=", "number": 1757, "title": "Cannot load pretrained dec layers as term searched for is ' dec.' and not 'dec.'", "user": {"login": "yash-s20", "id": 39774433, "node_id": "MDQ6VXNlcjM5Nzc0NDMz", "avatar_url": "https://avatars.githubusercontent.com/u/39774433?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yash-s20", "html_url": "https://github.com/yash-s20", "followers_url": "https://api.github.com/users/yash-s20/followers", "following_url": "https://api.github.com/users/yash-s20/following{/other_user}", "gists_url": "https://api.github.com/users/yash-s20/gists{/gist_id}", "starred_url": "https://api.github.com/users/yash-s20/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yash-s20/subscriptions", "organizations_url": "https://api.github.com/users/yash-s20/orgs", "repos_url": "https://api.github.com/users/yash-s20/repos", "events_url": "https://api.github.com/users/yash-s20/events{/privacy}", "received_events_url": "https://api.github.com/users/yash-s20/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 777173273, "node_id": "MDU6TGFiZWw3NzcxNzMyNzM=", "url": "https://api.github.com/repos/espnet/espnet/labels/Bug", "name": "Bug", "color": "ee0701", "default": false, "description": "bug should be fixed"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2020-04-01T11:21:37Z", "updated_at": "2020-04-01T18:00:22Z", "closed_at": "2020-04-01T17:59:44Z", "author_association": "NONE", "active_lock_reason": null, "body": "```\r\n2020-04-01 04:01:15,648 (encoders:239) INFO: BLSTM with every-layer projection for encoder\r\n2020-04-01 04:01:15,954 (asr_init:220) WARNING: loading ['enc.enc.'] from model: /data/karan/Yashsh/ToolKit/pytorch/espnet/best_model/model.acc.best\r\n2020-04-01 04:01:15,954 (asr_init:222) WARNING: override enc.enc.0.birnn0.weight_ih_l0\r\n2020-04-01 04:01:15,954 (asr_init:222) WARNING: override enc.enc.0.birnn0.weight_hh_l0\r\n2020-04-01 04:01:15,954 (asr_init:222) WARNING: override enc.enc.0.birnn0.bias_ih_l0\r\n2020-04-01 04:01:15,954 (asr_init:222) WARNING: override enc.enc.0.birnn0.bias_hh_l0\r\n2020-04-01 04:01:15,954 (asr_init:222) WARNING: override enc.enc.0.birnn0.weight_ih_l0_reverse\r\n2020-04-01 04:01:15,954 (asr_init:222) WARNING: override enc.enc.0.birnn0.weight_hh_l0_reverse\r\n2020-04-01 04:01:15,954 (asr_init:222) WARNING: override enc.enc.0.birnn0.bias_ih_l0_reverse\r\n2020-04-01 04:01:15,954 (asr_init:222) WARNING: override enc.enc.0.birnn0.bias_hh_l0_reverse\r\n2020-04-01 04:01:15,954 (asr_init:222) WARNING: override enc.enc.0.bt0.weight\r\n2020-04-01 04:01:15,954 (asr_init:222) WARNING: override enc.enc.0.bt0.bias\r\n2020-04-01 04:01:15,954 (asr_init:222) WARNING: override enc.enc.0.birnn1.weight_ih_l0\r\n2020-04-01 04:01:15,954 (asr_init:222) WARNING: override enc.enc.0.birnn1.weight_hh_l0\r\n2020-04-01 04:01:15,954 (asr_init:222) WARNING: override enc.enc.0.birnn1.bias_ih_l0\r\n2020-04-01 04:01:15,955 (asr_init:222) WARNING: override enc.enc.0.birnn1.bias_hh_l0\r\n2020-04-01 04:01:15,955 (asr_init:222) WARNING: override enc.enc.0.birnn1.weight_ih_l0_reverse\r\n2020-04-01 04:01:15,955 (asr_init:222) WARNING: override enc.enc.0.birnn1.weight_hh_l0_reverse\r\n2020-04-01 04:01:15,955 (asr_init:222) WARNING: override enc.enc.0.birnn1.bias_ih_l0_reverse\r\n2020-04-01 04:01:15,955 (asr_init:222) WARNING: override enc.enc.0.birnn1.bias_hh_l0_reverse\r\n2020-04-01 04:01:15,955 (asr_init:222) WARNING: override enc.enc.0.bt1.weight\r\n2020-04-01 04:01:15,955 (asr_init:222) WARNING: override enc.enc.0.bt1.bias\r\n2020-04-01 04:01:15,955 (asr_init:222) WARNING: override enc.enc.0.birnn2.weight_ih_l0\r\n2020-04-01 04:01:15,955 (asr_init:222) WARNING: override enc.enc.0.birnn2.weight_hh_l0\r\n2020-04-01 04:01:15,955 (asr_init:222) WARNING: override enc.enc.0.birnn2.bias_ih_l0\r\n2020-04-01 04:01:15,955 (asr_init:222) WARNING: override enc.enc.0.birnn2.bias_hh_l0\r\n2020-04-01 04:01:15,955 (asr_init:222) WARNING: override enc.enc.0.birnn2.weight_ih_l0_reverse\r\n2020-04-01 04:01:15,955 (asr_init:222) WARNING: override enc.enc.0.birnn2.weight_hh_l0_reverse\r\n2020-04-01 04:01:15,955 (asr_init:222) WARNING: override enc.enc.0.birnn2.bias_ih_l0_reverse\r\n2020-04-01 04:01:15,955 (asr_init:222) WARNING: override enc.enc.0.birnn2.bias_hh_l0_reverse\r\n2020-04-01 04:01:15,955 (asr_init:222) WARNING: override enc.enc.0.bt2.weight\r\n2020-04-01 04:01:15,955 (asr_init:222) WARNING: override enc.enc.0.bt2.bias\r\n2020-04-01 04:01:15,955 (asr_init:222) WARNING: override enc.enc.0.birnn3.weight_ih_l0\r\n2020-04-01 04:01:15,955 (asr_init:222) WARNING: override enc.enc.0.birnn3.weight_hh_l0\r\n2020-04-01 04:01:15,955 (asr_init:222) WARNING: override enc.enc.0.birnn3.bias_ih_l0\r\n2020-04-01 04:01:15,955 (asr_init:222) WARNING: override enc.enc.0.birnn3.bias_hh_l0\r\n2020-04-01 04:01:15,955 (asr_init:222) WARNING: override enc.enc.0.birnn3.weight_ih_l0_reverse\r\n2020-04-01 04:01:15,955 (asr_init:222) WARNING: override enc.enc.0.birnn3.weight_hh_l0_reverse\r\n2020-04-01 04:01:15,955 (asr_init:222) WARNING: override enc.enc.0.birnn3.bias_ih_l0_reverse\r\n2020-04-01 04:01:15,955 (asr_init:222) WARNING: override enc.enc.0.birnn3.bias_hh_l0_reverse\r\n2020-04-01 04:01:15,955 (asr_init:222) WARNING: override enc.enc.0.bt3.weight\r\n2020-04-01 04:01:15,955 (asr_init:222) WARNING: override enc.enc.0.bt3.bias\r\n2020-04-01 04:01:15,955 (asr_utils:439) INFO: reading a config file from /data/karan/Yashsh/ToolKit/pytorch/espnet/best_model/model.json\r\n2020-04-01 04:01:15,956 (asr_init:164) WARNING: reading model parameters from /data/karan/Yashsh/ToolKit/pytorch/espnet/best_model/model.acc.best\r\n2020-04-01 04:01:15,956 (nets_utils:405) INFO: subsample: 1 2 2 1 1\r\n2020-04-01 04:01:16,105 (encoders:239) INFO: BLSTM with every-layer projection for encoder\r\n2020-04-01 04:01:16,420 (asr_init:114) WARNING: module(s) [' dec.'] don't match or (partially match) available modules in model.\r\n2020-04-01 04:01:16,421 (asr_init:115) WARNING: for information, the existing modules in model are:\r\n2020-04-01 04:01:16,421 (asr_init:116) WARNING: ['enc.enc.0.birnn0.weight_ih_l0', 'enc.enc.0.birnn0.weight_hh_l0', 'enc.enc.0.birnn0.bias_ih_l0', 'enc.enc.0.birnn0.bias_hh_l0', 'enc.enc.0.birnn0.weight_ih_l0_reverse', 'enc.enc.0.birnn0.weight_hh_l0_reverse', 'enc.enc.0.birnn0.bias_ih_l0_reverse', 'enc.enc.0.birnn0.bias_hh_l0_reverse', 'enc.enc.0.bt0.weight', 'enc.enc.0.bt0.bias', 'enc.enc.0.birnn1.weight_ih_l0', 'enc.enc.0.birnn1.weight_hh_l0', 'enc.enc.0.birnn1.bias_ih_l0', 'enc.enc.0.birnn1.bias_hh_l0', 'enc.enc.0.birnn1.weight_ih_l0_reverse', 'enc.enc.0.birnn1.weight_hh_l0_reverse', 'enc.enc.0.birnn1.bias_ih_l0_reverse', 'enc.enc.0.birnn1.bias_hh_l0_reverse', 'enc.enc.0.bt1.weight', 'enc.enc.0.bt1.bias', 'enc.enc.0.birnn2.weight_ih_l0', 'enc.enc.0.birnn2.weight_hh_l0', 'enc.enc.0.birnn2.bias_ih_l0', 'enc.enc.0.birnn2.bias_hh_l0', 'enc.enc.0.birnn2.weight_ih_l0_reverse', 'enc.enc.0.birnn2.weight_hh_l0_reverse', 'enc.enc.0.birnn2.bias_ih_l0_reverse', 'enc.enc.0.birnn2.bias_hh_l0_reverse', 'enc.enc.0.bt2.weight', 'enc.enc.0.bt2.bias', 'enc.enc.0.birnn3.weight_ih_l0', 'enc.enc.0.birnn3.weight_hh_l0', 'enc.enc.0.birnn3.bias_ih_l0', 'enc.enc.0.birnn3.bias_hh_l0', 'enc.enc.0.birnn3.weight_ih_l0_reverse', 'enc.enc.0.birnn3.weight_hh_l0_reverse', 'enc.enc.0.birnn3.bias_ih_l0_reverse', 'enc.enc.0.birnn3.bias_hh_l0_reverse', 'enc.enc.0.bt3.weight', 'enc.enc.0.bt3.bias', 'ctc.ctc_lo.weight', 'ctc.ctc_lo.bias', 'att.0.mlp_enc.weight', 'att.0.mlp_enc.bias', 'att.0.mlp_dec.weight', 'att.0.mlp_att.weight', 'att.0.loc_conv.weight', 'att.0.gvec.weight', 'att.0.gvec.bias', 'dec.embed.weight', 'dec.decoder.0.weight_ih', 'dec.decoder.0.weight_hh', 'dec.decoder.0.bias_ih', 'dec.decoder.0.bias_hh', 'dec.output.weight', 'dec.output.bias', 'dec.att.0.mlp_enc.weight', 'dec.att.0.mlp_enc.bias', 'dec.att.0.mlp_dec.weight', 'dec.att.0.mlp_att.weight', 'dec.att.0.loc_conv.weight', 'dec.att.0.gvec.weight', 'dec.att.0.gvec.bias']\r\n2020-04-01 04:01:16,421 (asr_init:220) WARNING: loading ['att.'] from model: /data/karan/Yashsh/ToolKit/pytorch/espnet/best_model/model.acc.best\r\n2020-04-01 04:01:16,421 (asr_init:222) WARNING: override att.0.mlp_enc.weight\r\n2020-04-01 04:01:16,421 (asr_init:222) WARNING: override att.0.mlp_enc.bias\r\n2020-04-01 04:01:16,421 (asr_init:222) WARNING: override att.0.mlp_dec.weight\r\n2020-04-01 04:01:16,421 (asr_init:222) WARNING: override att.0.mlp_att.weight\r\n2020-04-01 04:01:16,421 (asr_init:222) WARNING: override att.0.loc_conv.weight\r\n2020-04-01 04:01:16,421 (asr_init:222) WARNING: override att.0.gvec.weight\r\n2020-04-01 04:01:16,421 (asr_init:222) WARNING: override att.0.gvec.bias\r\n2020-04-01 04:01:16,459 (asr:397) INFO: writing a model config file to exp/train-tts-100_pytorch_tts-tune/results/model.json\r\n```\r\n\r\nThis is the train.log. I noticed the decoder layers it was looking for were named 'dec.*' but the term used is ' dec.'. This is because of this line in asr_train - https://github.com/espnet/espnet/blob/master/espnet/bin/asr_train.py#L187-L188\r\n\r\nSimple fix - remove the space between att. and dec.\r\n\r\nI hope my interpretation of the bug is right.\r\n", "reactions": {"url": "https://api.github.com/repos/espnet/espnet/issues/1757/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/espnet/espnet/issues/1757/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/espnet/espnet/issues/1753", "repository_url": "https://api.github.com/repos/espnet/espnet", "labels_url": "https://api.github.com/repos/espnet/espnet/issues/1753/labels{/name}", "comments_url": "https://api.github.com/repos/espnet/espnet/issues/1753/comments", "events_url": "https://api.github.com/repos/espnet/espnet/issues/1753/events", "html_url": "https://github.com/espnet/espnet/issues/1753", "id": 590992572, "node_id": "MDU6SXNzdWU1OTA5OTI1NzI=", "number": 1753, "title": "Some questions about the TTS attention alignment", "user": {"login": "fly12357", "id": 40494145, "node_id": "MDQ6VXNlcjQwNDk0MTQ1", "avatar_url": "https://avatars.githubusercontent.com/u/40494145?v=4", "gravatar_id": "", "url": "https://api.github.com/users/fly12357", "html_url": "https://github.com/fly12357", "followers_url": "https://api.github.com/users/fly12357/followers", "following_url": "https://api.github.com/users/fly12357/following{/other_user}", "gists_url": "https://api.github.com/users/fly12357/gists{/gist_id}", "starred_url": "https://api.github.com/users/fly12357/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/fly12357/subscriptions", "organizations_url": "https://api.github.com/users/fly12357/orgs", "repos_url": "https://api.github.com/users/fly12357/repos", "events_url": "https://api.github.com/users/fly12357/events{/privacy}", "received_events_url": "https://api.github.com/users/fly12357/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 777173273, "node_id": "MDU6TGFiZWw3NzcxNzMyNzM=", "url": "https://api.github.com/repos/espnet/espnet/labels/Bug", "name": "Bug", "color": "ee0701", "default": false, "description": "bug should be fixed"}, {"id": 777173279, "node_id": "MDU6TGFiZWw3NzcxNzMyNzk=", "url": "https://api.github.com/repos/espnet/espnet/labels/Question", "name": "Question", "color": "cc317c", "default": false, "description": "Question"}, {"id": 777173280, "node_id": "MDU6TGFiZWw3NzcxNzMyODA=", "url": "https://api.github.com/repos/espnet/espnet/labels/Wontfix", "name": "Wontfix", "color": "e5f291", "default": false, "description": "Want to fix"}, {"id": 1680978630, "node_id": "MDU6TGFiZWwxNjgwOTc4NjMw", "url": "https://api.github.com/repos/espnet/espnet/labels/TTS", "name": "TTS", "color": "fbca04", "default": false, "description": "Text-to-speech"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2020-03-31T10:38:24Z", "updated_at": "2020-04-14T03:50:36Z", "closed_at": "2020-04-14T03:50:35Z", "author_association": "NONE", "active_lock_reason": null, "body": "I trained the Tactron2 based on my own dataset; First, I use the default parameters in the CSMSC recipe. The alignment is:\r\n![image](https://user-images.githubusercontent.com/40494145/78016906-0bd7ff80-737e-11ea-8cf2-355fd5036e2d.png)\r\nThen I do the trim and set the reduction factor to 3, follows the steps mentioned in #1360 .\r\nThen the alignment change to:\r\n![image](https://user-images.githubusercontent.com/40494145/78017127-6bcea600-737e-11ea-8fa1-6ded6698dc9d.png)\r\n\r\nI have no idea about the reason why the decoder is much longer than the encoder. I mean, why it is not a Diagonal?\r\n\r\nThe original wave is :\r\n![image](https://user-images.githubusercontent.com/40494145/78017374-c536d500-737e-11ea-993e-01aec0da1274.png)\r\n\r\n![image](https://user-images.githubusercontent.com/40494145/78017382-c9fb8900-737e-11ea-9a49-65cd804d4b15.png)\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/espnet/espnet/issues/1753/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/espnet/espnet/issues/1753/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/espnet/espnet/issues/1751", "repository_url": "https://api.github.com/repos/espnet/espnet", "labels_url": "https://api.github.com/repos/espnet/espnet/issues/1751/labels{/name}", "comments_url": "https://api.github.com/repos/espnet/espnet/issues/1751/comments", "events_url": "https://api.github.com/repos/espnet/espnet/issues/1751/events", "html_url": "https://github.com/espnet/espnet/issues/1751", "id": 590790444, "node_id": "MDU6SXNzdWU1OTA3OTA0NDQ=", "number": 1751, "title": "built in ctc conflict with apex", "user": {"login": "qmpzzpmq", "id": 21037898, "node_id": "MDQ6VXNlcjIxMDM3ODk4", "avatar_url": "https://avatars.githubusercontent.com/u/21037898?v=4", "gravatar_id": "", "url": "https://api.github.com/users/qmpzzpmq", "html_url": "https://github.com/qmpzzpmq", "followers_url": "https://api.github.com/users/qmpzzpmq/followers", "following_url": "https://api.github.com/users/qmpzzpmq/following{/other_user}", "gists_url": "https://api.github.com/users/qmpzzpmq/gists{/gist_id}", "starred_url": "https://api.github.com/users/qmpzzpmq/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/qmpzzpmq/subscriptions", "organizations_url": "https://api.github.com/users/qmpzzpmq/orgs", "repos_url": "https://api.github.com/users/qmpzzpmq/repos", "events_url": "https://api.github.com/users/qmpzzpmq/events{/privacy}", "received_events_url": "https://api.github.com/users/qmpzzpmq/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 777173273, "node_id": "MDU6TGFiZWw3NzcxNzMyNzM=", "url": "https://api.github.com/repos/espnet/espnet/labels/Bug", "name": "Bug", "color": "ee0701", "default": false, "description": "bug should be fixed"}, {"id": 1680978730, "node_id": "MDU6TGFiZWwxNjgwOTc4NzMw", "url": "https://api.github.com/repos/espnet/espnet/labels/ASR", "name": "ASR", "color": "3ee0d5", "default": false, "description": "Automatic speech recogntion"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 12, "created_at": "2020-03-31T04:49:13Z", "updated_at": "2020-04-07T01:35:58Z", "closed_at": "2020-04-07T01:35:58Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "```\r\n# asr_train.py --config conf/tuning/train_pytorch_transformer_medium.yaml --train-dtype O1 --ctc_type builtin --ngpu 4 --backend pytorch --outdir exp/train_pytorch_129.d_resume/results --tensorboard-dir tensorboard/train_pytorch_129.d_resume --debugmode 1 --dict data/lang_char/train_unigram5000_units.txt --debugdir exp/train_pytorch_129.d_resume --minibatches 0 --verbose 0 --resume exp/train_pytorch_129.d/results/snapshot.ep.2 --train-json dump/train/deltafalse/data_unigram5000.json --valid-json dump/dev/deltafalse/data_unigram5000.json \r\n# Started at Tue Mar 31 12:42:36 CST 2020\r\n#\r\n2020-03-31 12:42:37,647 (asr_train:299) WARNING: Skip DEBUG/INFO messages\r\nSelected optimization level O1:  Insert automatic casts around Pytorch functions and Tensor methods.\r\n\r\nDefaults for this optimization level are:\r\nenabled                : True\r\nopt_level              : O1\r\ncast_model_type        : None\r\npatch_torch_functions  : True\r\nkeep_batchnorm_fp32    : None\r\nmaster_weights         : None\r\nloss_scale             : dynamic\r\nProcessing user overrides (additional kwargs that are not None)...\r\nAfter processing overrides, optimization options are:\r\nenabled                : True\r\nopt_level              : O1\r\ncast_model_type        : None\r\npatch_torch_functions  : True\r\nkeep_batchnorm_fp32    : None\r\nmaster_weights         : None\r\nloss_scale             : dynamic\r\n\u001b[JException in main training loop: \"ctc_loss\" not implemented for 'torch.cuda.HalfTensor'\r\nTraceback (most recent call last):\r\n  File \"/data4/tanghaoyu/espnet/tools/venv/lib/python3.7/site-packages/chainer/training/trainer.py\", line 316, in run\r\n    update()\r\n  File \"/data4/tanghaoyu/espnet/espnet/asr/pytorch_backend/asr.py\", line 223, in update\r\n    self.update_core()\r\n  File \"/data4/tanghaoyu/espnet/espnet/asr/pytorch_backend/asr.py\", line 192, in update_core\r\n    loss = data_parallel(self.model, x, range(self.ngpu)).mean() / self.accum_grad\r\n  File \"/data4/tanghaoyu/espnet/tools/venv/lib/python3.7/site-packages/torch/nn/parallel/data_parallel.py\", line 188, in data_parallel\r\n    outputs = parallel_apply(replicas, inputs, module_kwargs, used_device_ids)\r\n  File \"/data4/tanghaoyu/espnet/tools/venv/lib/python3.7/site-packages/torch/nn/parallel/parallel_apply.py\", line 83, in parallel_apply\r\n    raise output\r\n  File \"/data4/tanghaoyu/espnet/tools/venv/lib/python3.7/site-packages/torch/nn/parallel/parallel_apply.py\", line 59, in _worker\r\n    output = module(*input, **kwargs)\r\n  File \"/data4/tanghaoyu/espnet/tools/venv/lib/python3.7/site-packages/torch/nn/modules/module.py\", line 489, in __call__\r\n    result = self.forward(*input, **kwargs)\r\n  File \"/data4/tanghaoyu/espnet/espnet/nets/pytorch_backend/e2e_asr_transformer.py\", line 190, in forward\r\n    loss_ctc = self.ctc(hs_pad.view(batch_size, -1, self.adim), hs_len, ys_pad)\r\n  File \"/data4/tanghaoyu/espnet/tools/venv/lib/python3.7/site-packages/torch/nn/modules/module.py\", line 489, in __call__\r\n    result = self.forward(*input, **kwargs)\r\n  File \"/data4/tanghaoyu/espnet/espnet/nets/pytorch_backend/ctc.py\", line 96, in forward\r\n    self.loss = to_device(self, self.loss_fn(ys_hat, ys_true, hlens, olens)).to(dtype=dtype)\r\n  File \"/data4/tanghaoyu/espnet/espnet/nets/pytorch_backend/ctc.py\", line 50, in loss_fn\r\n    loss = self.ctc_loss(th_pred, th_target, th_ilen, th_olen)\r\n  File \"/data4/tanghaoyu/espnet/tools/venv/lib/python3.7/site-packages/torch/nn/modules/module.py\", line 489, in __call__\r\n    result = self.forward(*input, **kwargs)\r\n  File \"/data4/tanghaoyu/espnet/tools/venv/lib/python3.7/site-packages/torch/nn/modules/loss.py\", line 1248, in forward\r\n    return F.ctc_loss(log_probs, targets, input_lengths, target_lengths, self.blank, self.reduction)\r\n  File \"/data4/tanghaoyu/espnet/tools/venv/lib/python3.7/site-packages/apex/amp/wrap.py\", line 53, in wrapper\r\n    return orig_fn(*args, **kwargs)\r\n  File \"/data4/tanghaoyu/espnet/tools/venv/lib/python3.7/site-packages/torch/nn/functional.py\", line 1732, in ctc_loss\r\n    return torch.ctc_loss(log_probs, targets, input_lengths, target_lengths, blank, _Reduction.get_enum(reduction))\r\n  File \"/data4/tanghaoyu/espnet/tools/venv/lib/python3.7/site-packages/apex/amp/wrap.py\", line 53, in wrapper\r\n    return orig_fn(*args, **kwargs)\r\nWill finalize trainer extensions and updater before reraising the exception.\r\nTraceback (most recent call last):\r\n  File \"/data4/tanghaoyu/espnet/egs/BIGOenglish/asr1/../../../espnet/bin/asr_train.py\", line 368, in <module>\r\n    main(sys.argv[1:])\r\n  File \"/data4/tanghaoyu/espnet/egs/BIGOenglish/asr1/../../../espnet/bin/asr_train.py\", line 355, in main\r\n    train(args)\r\n  File \"/data4/tanghaoyu/espnet/espnet/asr/pytorch_backend/asr.py\", line 636, in train\r\n    trainer.run()\r\n  File \"/data4/tanghaoyu/espnet/tools/venv/lib/python3.7/site-packages/chainer/training/trainer.py\", line 349, in run\r\n    six.reraise(*exc_info)\r\n  File \"/data4/tanghaoyu/espnet/tools/venv/lib/python3.7/site-packages/six.py\", line 696, in reraise\r\n    raise value\r\n  File \"/data4/tanghaoyu/espnet/tools/venv/lib/python3.7/site-packages/chainer/training/trainer.py\", line 316, in run\r\n    update()\r\n  File \"/data4/tanghaoyu/espnet/espnet/asr/pytorch_backend/asr.py\", line 223, in update\r\n    self.update_core()\r\n  File \"/data4/tanghaoyu/espnet/espnet/asr/pytorch_backend/asr.py\", line 192, in update_core\r\n    loss = data_parallel(self.model, x, range(self.ngpu)).mean() / self.accum_grad\r\n  File \"/data4/tanghaoyu/espnet/tools/venv/lib/python3.7/site-packages/torch/nn/parallel/data_parallel.py\", line 188, in data_parallel\r\n    outputs = parallel_apply(replicas, inputs, module_kwargs, used_device_ids)\r\n  File \"/data4/tanghaoyu/espnet/tools/venv/lib/python3.7/site-packages/torch/nn/parallel/parallel_apply.py\", line 83, in parallel_apply\r\n    raise output\r\n  File \"/data4/tanghaoyu/espnet/tools/venv/lib/python3.7/site-packages/torch/nn/parallel/parallel_apply.py\", line 59, in _worker\r\n    output = module(*input, **kwargs)\r\n  File \"/data4/tanghaoyu/espnet/tools/venv/lib/python3.7/site-packages/torch/nn/modules/module.py\", line 489, in __call__\r\n    result = self.forward(*input, **kwargs)\r\n  File \"/data4/tanghaoyu/espnet/espnet/nets/pytorch_backend/e2e_asr_transformer.py\", line 190, in forward\r\n    loss_ctc = self.ctc(hs_pad.view(batch_size, -1, self.adim), hs_len, ys_pad)\r\n  File \"/data4/tanghaoyu/espnet/tools/venv/lib/python3.7/site-packages/torch/nn/modules/module.py\", line 489, in __call__\r\n    result = self.forward(*input, **kwargs)\r\n  File \"/data4/tanghaoyu/espnet/espnet/nets/pytorch_backend/ctc.py\", line 96, in forward\r\n    self.loss = to_device(self, self.loss_fn(ys_hat, ys_true, hlens, olens)).to(dtype=dtype)\r\n  File \"/data4/tanghaoyu/espnet/espnet/nets/pytorch_backend/ctc.py\", line 50, in loss_fn\r\n    loss = self.ctc_loss(th_pred, th_target, th_ilen, th_olen)\r\n  File \"/data4/tanghaoyu/espnet/tools/venv/lib/python3.7/site-packages/torch/nn/modules/module.py\", line 489, in __call__\r\n    result = self.forward(*input, **kwargs)\r\n  File \"/data4/tanghaoyu/espnet/tools/venv/lib/python3.7/site-packages/torch/nn/modules/loss.py\", line 1248, in forward\r\n    return F.ctc_loss(log_probs, targets, input_lengths, target_lengths, self.blank, self.reduction)\r\n  File \"/data4/tanghaoyu/espnet/tools/venv/lib/python3.7/site-packages/apex/amp/wrap.py\", line 53, in wrapper\r\n    return orig_fn(*args, **kwargs)\r\n  File \"/data4/tanghaoyu/espnet/tools/venv/lib/python3.7/site-packages/torch/nn/functional.py\", line 1732, in ctc_loss\r\n    return torch.ctc_loss(log_probs, targets, input_lengths, target_lengths, blank, _Reduction.get_enum(reduction))\r\n  File \"/data4/tanghaoyu/espnet/tools/venv/lib/python3.7/site-packages/apex/amp/wrap.py\", line 53, in wrapper\r\n    return orig_fn(*args, **kwargs)\r\nRuntimeError: \"ctc_loss\" not implemented for 'torch.cuda.HalfTensor'\r\n# Accounting: time=112 threads=1\r\n# Ended (code 1) at Tue Mar 31 12:44:28 CST 2020, elapsed time 112 seconds\r\n```", "reactions": {"url": "https://api.github.com/repos/espnet/espnet/issues/1751/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/espnet/espnet/issues/1751/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/espnet/espnet/issues/1750", "repository_url": "https://api.github.com/repos/espnet/espnet", "labels_url": "https://api.github.com/repos/espnet/espnet/issues/1750/labels{/name}", "comments_url": "https://api.github.com/repos/espnet/espnet/issues/1750/comments", "events_url": "https://api.github.com/repos/espnet/espnet/issues/1750/events", "html_url": "https://github.com/espnet/espnet/issues/1750", "id": 590138683, "node_id": "MDU6SXNzdWU1OTAxMzg2ODM=", "number": 1750, "title": "Missing and unexpected key error in decoding", "user": {"login": "david1125222", "id": 37493144, "node_id": "MDQ6VXNlcjM3NDkzMTQ0", "avatar_url": "https://avatars.githubusercontent.com/u/37493144?v=4", "gravatar_id": "", "url": "https://api.github.com/users/david1125222", "html_url": "https://github.com/david1125222", "followers_url": "https://api.github.com/users/david1125222/followers", "following_url": "https://api.github.com/users/david1125222/following{/other_user}", "gists_url": "https://api.github.com/users/david1125222/gists{/gist_id}", "starred_url": "https://api.github.com/users/david1125222/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/david1125222/subscriptions", "organizations_url": "https://api.github.com/users/david1125222/orgs", "repos_url": "https://api.github.com/users/david1125222/repos", "events_url": "https://api.github.com/users/david1125222/events{/privacy}", "received_events_url": "https://api.github.com/users/david1125222/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 777173273, "node_id": "MDU6TGFiZWw3NzcxNzMyNzM=", "url": "https://api.github.com/repos/espnet/espnet/labels/Bug", "name": "Bug", "color": "ee0701", "default": false, "description": "bug should be fixed"}, {"id": 1680978730, "node_id": "MDU6TGFiZWwxNjgwOTc4NzMw", "url": "https://api.github.com/repos/espnet/espnet/labels/ASR", "name": "ASR", "color": "3ee0d5", "default": false, "description": "Automatic speech recogntion"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2020-03-30T09:33:14Z", "updated_at": "2020-04-07T01:36:32Z", "closed_at": "2020-04-07T01:36:32Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi all,\r\nI'm the beginner for ESpnet and I downloaded librispeech pretrained model and run the stage 5 (decoding) of run.sh. Then, the following error occurs. It seems that this issue is similar to  issue #154, but I'm not so sure about it. \r\n\r\n```\r\nTraceback (most recent call last):\r\n  File \"/home/training/r08943020/espnet/egs/librispeech/asr1/../../../espnet/bin/asr_recog.py\", line 208, in <module>\r\n    main(sys.argv[1:])\r\n  File \"/home/training/r08943020/espnet/egs/librispeech/asr1/../../../espnet/bin/asr_recog.py\", line 185, in main\r\n    recog_v2(args)\r\n  File \"/home/training/r08943020/espnet/espnet/asr/pytorch_backend/recog.py\", line 39, in recog_v2\r\n    model, train_args = load_trained_model(args.model)\r\n  File \"/home/training/r08943020/espnet/espnet/asr/pytorch_backend/asr_init.py\", line 140, in load_trained_model\r\n    torch_load(model_path, model)\r\n  File \"/home/training/r08943020/espnet/espnet/asr/asr_utils.py\", line 528, in torch_load\r\n    model.load_state_dict(remove_dataparallel(model_state_dict))\r\n  File \"/home/training/r08943020/espnet/tools/venv/lib/python3.7/site-packages/torch/nn/modules/module.py\", line 777, in load_state_dict\r\n    self.__class__.__name__, \"\\n\\t\".join(error_msgs)))\r\nRuntimeError: Error(s) in loading state_dict for E2E:\r\n        Missing key(s) in state_dict: \"encoder.embed.conv.0.weight\", \"encoder.embed.conv.0.bias\", \"encoder.embed.conv.2.weight\", \"encoder.embed.conv.2.bias\", \"encoder.embed.out.0.weight\", \"encoder.embed.out.0.bias\", \"encoder.after_norm.weight\", \"encoder.after_norm.bias\", \"decoder.after_norm.weight\", \"decoder.after_norm.bias\".\r\n        Unexpected key(s) in state_dict: \"encoder.input_layer.conv.0.weight\", \"encoder.input_layer.conv.0.bias\", \"encoder.input_layer.conv.2.weight\", \"encoder.input_layer.conv.2.bias\", \"encoder.input_layer.out.0.weight\", \"encoder.input_layer.out.0.bias\", \"encoder.input_layer.out.1.pe\", \"encoder.norm.weight\", \"encoder.norm.bias\", \"decoder.output_norm.weight\", \"decoder.output_norm.bias\".\r\n```", "reactions": {"url": "https://api.github.com/repos/espnet/espnet/issues/1750/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/espnet/espnet/issues/1750/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/espnet/espnet/issues/1726", "repository_url": "https://api.github.com/repos/espnet/espnet", "labels_url": "https://api.github.com/repos/espnet/espnet/issues/1726/labels{/name}", "comments_url": "https://api.github.com/repos/espnet/espnet/issues/1726/comments", "events_url": "https://api.github.com/repos/espnet/espnet/issues/1726/events", "html_url": "https://github.com/espnet/espnet/issues/1726", "id": 586483700, "node_id": "MDU6SXNzdWU1ODY0ODM3MDA=", "number": 1726, "title": "An issue related to \"train_iter/valid_iter\" from asr/pytorch_backend/asr.py", "user": {"login": "simpleoier", "id": 7897644, "node_id": "MDQ6VXNlcjc4OTc2NDQ=", "avatar_url": "https://avatars.githubusercontent.com/u/7897644?v=4", "gravatar_id": "", "url": "https://api.github.com/users/simpleoier", "html_url": "https://github.com/simpleoier", "followers_url": "https://api.github.com/users/simpleoier/followers", "following_url": "https://api.github.com/users/simpleoier/following{/other_user}", "gists_url": "https://api.github.com/users/simpleoier/gists{/gist_id}", "starred_url": "https://api.github.com/users/simpleoier/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/simpleoier/subscriptions", "organizations_url": "https://api.github.com/users/simpleoier/orgs", "repos_url": "https://api.github.com/users/simpleoier/repos", "events_url": "https://api.github.com/users/simpleoier/events{/privacy}", "received_events_url": "https://api.github.com/users/simpleoier/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 777173273, "node_id": "MDU6TGFiZWw3NzcxNzMyNzM=", "url": "https://api.github.com/repos/espnet/espnet/labels/Bug", "name": "Bug", "color": "ee0701", "default": false, "description": "bug should be fixed"}], "state": "closed", "locked": false, "assignee": {"login": "bobchennan", "id": 939088, "node_id": "MDQ6VXNlcjkzOTA4OA==", "avatar_url": "https://avatars.githubusercontent.com/u/939088?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bobchennan", "html_url": "https://github.com/bobchennan", "followers_url": "https://api.github.com/users/bobchennan/followers", "following_url": "https://api.github.com/users/bobchennan/following{/other_user}", "gists_url": "https://api.github.com/users/bobchennan/gists{/gist_id}", "starred_url": "https://api.github.com/users/bobchennan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bobchennan/subscriptions", "organizations_url": "https://api.github.com/users/bobchennan/orgs", "repos_url": "https://api.github.com/users/bobchennan/repos", "events_url": "https://api.github.com/users/bobchennan/events{/privacy}", "received_events_url": "https://api.github.com/users/bobchennan/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "bobchennan", "id": 939088, "node_id": "MDQ6VXNlcjkzOTA4OA==", "avatar_url": "https://avatars.githubusercontent.com/u/939088?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bobchennan", "html_url": "https://github.com/bobchennan", "followers_url": "https://api.github.com/users/bobchennan/followers", "following_url": "https://api.github.com/users/bobchennan/following{/other_user}", "gists_url": "https://api.github.com/users/bobchennan/gists{/gist_id}", "starred_url": "https://api.github.com/users/bobchennan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bobchennan/subscriptions", "organizations_url": "https://api.github.com/users/bobchennan/orgs", "repos_url": "https://api.github.com/users/bobchennan/repos", "events_url": "https://api.github.com/users/bobchennan/events{/privacy}", "received_events_url": "https://api.github.com/users/bobchennan/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 4, "created_at": "2020-03-23T20:02:20Z", "updated_at": "2020-03-30T12:32:39Z", "closed_at": "2020-03-30T12:32:39Z", "author_association": "COLLABORATOR", "active_lock_reason": null, "body": "Start from the ESPnet v.0.6.0, data loader was modified as a dictionary.\r\n```\r\n    train_iter = {'main': ChainerDataLoader(\r\n        dataset=TransformDataset(train, lambda data: converter([load_tr(data)])),\r\n        batch_size=1, num_workers=args.n_iter_processes,\r\n        shuffle=not use_sortagrad, collate_fn=lambda x: x[0])}\r\n    valid_iter = {'main': ChainerDataLoader(\r\n        dataset=TransformDataset(valid, lambda data: converter([load_cv(data)])),\r\n        batch_size=1, shuffle=False, collate_fn=lambda x: x[0],\r\n        num_workers=args.n_iter_processes)}\r\n```\r\nThis modification is incompatible with some functions, such as the `sortagrad` and the preprocessing functions for STFT features in ASR task due to the `converter([load_tr(data)])`.\r\nE.g.\r\n```\r\nif use_sortagrad:\r\n        trainer.extend(ShufflingEnabler([train_iter]),\r\n                       trigger=(args.sortagrad if args.sortagrad != -1 else args.epochs, 'epoch'))\r\n```", "reactions": {"url": "https://api.github.com/repos/espnet/espnet/issues/1726/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/espnet/espnet/issues/1726/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/espnet/espnet/issues/1723", "repository_url": "https://api.github.com/repos/espnet/espnet", "labels_url": "https://api.github.com/repos/espnet/espnet/issues/1723/labels{/name}", "comments_url": "https://api.github.com/repos/espnet/espnet/issues/1723/comments", "events_url": "https://api.github.com/repos/espnet/espnet/issues/1723/events", "html_url": "https://github.com/espnet/espnet/issues/1723", "id": 585936373, "node_id": "MDU6SXNzdWU1ODU5MzYzNzM=", "number": 1723, "title": "KeyError: 'validation/main/loss' in pytorch when use multiple gpu in training", "user": {"login": "LCF2764", "id": 44606721, "node_id": "MDQ6VXNlcjQ0NjA2NzIx", "avatar_url": "https://avatars.githubusercontent.com/u/44606721?v=4", "gravatar_id": "", "url": "https://api.github.com/users/LCF2764", "html_url": "https://github.com/LCF2764", "followers_url": "https://api.github.com/users/LCF2764/followers", "following_url": "https://api.github.com/users/LCF2764/following{/other_user}", "gists_url": "https://api.github.com/users/LCF2764/gists{/gist_id}", "starred_url": "https://api.github.com/users/LCF2764/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/LCF2764/subscriptions", "organizations_url": "https://api.github.com/users/LCF2764/orgs", "repos_url": "https://api.github.com/users/LCF2764/repos", "events_url": "https://api.github.com/users/LCF2764/events{/privacy}", "received_events_url": "https://api.github.com/users/LCF2764/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 777173273, "node_id": "MDU6TGFiZWw3NzcxNzMyNzM=", "url": "https://api.github.com/repos/espnet/espnet/labels/Bug", "name": "Bug", "color": "ee0701", "default": false, "description": "bug should be fixed"}, {"id": 1885270144, "node_id": "MDU6TGFiZWwxODg1MjcwMTQ0", "url": "https://api.github.com/repos/espnet/espnet/labels/Multiple%20GPUs", "name": "Multiple GPUs", "color": "c2e0c6", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 9, "created_at": "2020-03-23T05:15:07Z", "updated_at": "2021-09-27T14:49:27Z", "closed_at": "2021-09-27T14:49:27Z", "author_association": "NONE", "active_lock_reason": null, "body": "hi,\r\nI use aishell recipe and running asr_train.py. When I use single GPU, it work well. However, when I use 2GPU, it finish training at the end of first epoch and throw the error: KeyError: 'validation/main/loss' error.\r\n```\r\n\u001b[J/home/lcf/anaconda3/envs/python36/lib/python3.6/site-packages/torch/nn/parallel/_functions.py:61: UserWarning: Was asked to gather along dimension 0, but all input tensors were scalars; will instead unsqueeze and return a vector.\r\n  warnings.warn('Was asked to gather along dimension 0, but all '\r\n/home/lcf/anaconda3/envs/python36/lib/python3.6/site-packages/matplotlib/tight_layout.py:231: UserWarning: tight_layout : falling back to Agg renderer\r\n  warnings.warn(\"tight_layout : falling back to Agg renderer\")\r\nException in main training loop: 'validation/main/loss'\r\nTraceback (most recent call last):\r\n  File \"/home/lcf/anaconda3/envs/python36/lib/python3.6/site-packages/chainer/training/trainer.py\", line 345, in run\r\n    if entry.trigger(self):\r\n  File \"/home/lcf/anaconda3/envs/python36/lib/python3.6/site-packages/chainer/training/triggers/minmax_value_trigger.py\", line 52, in __call__\r\n    value = float(stats[key])  # copy to CPU\r\nWill finalize trainer extensions and updater before reraising the exception.\r\nTraceback (most recent call last):\r\n  File \"/home/lcf/espnet/egs/Magicspeech/asr3/../../../espnet/bin/asr_train.py\", line 368, in <module>\r\n    main(sys.argv[1:])\r\n  File \"/home/lcf/espnet/egs/Magicspeech/asr3/../../../espnet/bin/asr_train.py\", line 355, in main\r\n    train(args)\r\n  File \"/home/lcf/espnet/espnet/asr/pytorch_backend/asr.py\", line 631, in train\r\n    trainer.run()\r\n  File \"/home/lcf/anaconda3/envs/python36/lib/python3.6/site-packages/chainer/training/trainer.py\", line 376, in run\r\n    six.reraise(*exc_info)\r\n  File \"/home/lcf/anaconda3/envs/python36/lib/python3.6/site-packages/six.py\", line 693, in reraise\r\n    raise value\r\n  File \"/home/lcf/anaconda3/envs/python36/lib/python3.6/site-packages/chainer/training/trainer.py\", line 345, in run\r\n    if entry.trigger(self):\r\n  File \"/home/lcf/anaconda3/envs/python36/lib/python3.6/site-packages/chainer/training/triggers/minmax_value_trigger.py\", line 52, in __call__\r\n    value = float(stats[key])  # copy to CPU\r\nKeyError: 'validation/main/loss'\r\n# Accounting: time=129 threads=1\r\n# Ended (code 1) at Mon Mar 23 12:46:57 CST 2020, elapsed time 129 seconds\r\n```\r\nHow to fix this?", "reactions": {"url": "https://api.github.com/repos/espnet/espnet/issues/1723/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/espnet/espnet/issues/1723/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/espnet/espnet/issues/1721", "repository_url": "https://api.github.com/repos/espnet/espnet", "labels_url": "https://api.github.com/repos/espnet/espnet/issues/1721/labels{/name}", "comments_url": "https://api.github.com/repos/espnet/espnet/issues/1721/comments", "events_url": "https://api.github.com/repos/espnet/espnet/issues/1721/events", "html_url": "https://github.com/espnet/espnet/issues/1721", "id": 585768055, "node_id": "MDU6SXNzdWU1ODU3NjgwNTU=", "number": 1721, "title": "ASR demo with wsj_mix dataset", "user": {"login": "jujusudhur", "id": 18646215, "node_id": "MDQ6VXNlcjE4NjQ2MjE1", "avatar_url": "https://avatars.githubusercontent.com/u/18646215?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jujusudhur", "html_url": "https://github.com/jujusudhur", "followers_url": "https://api.github.com/users/jujusudhur/followers", "following_url": "https://api.github.com/users/jujusudhur/following{/other_user}", "gists_url": "https://api.github.com/users/jujusudhur/gists{/gist_id}", "starred_url": "https://api.github.com/users/jujusudhur/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jujusudhur/subscriptions", "organizations_url": "https://api.github.com/users/jujusudhur/orgs", "repos_url": "https://api.github.com/users/jujusudhur/repos", "events_url": "https://api.github.com/users/jujusudhur/events{/privacy}", "received_events_url": "https://api.github.com/users/jujusudhur/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 777173273, "node_id": "MDU6TGFiZWw3NzcxNzMyNzM=", "url": "https://api.github.com/repos/espnet/espnet/labels/Bug", "name": "Bug", "color": "ee0701", "default": false, "description": "bug should be fixed"}, {"id": 1680978730, "node_id": "MDU6TGFiZWwxNjgwOTc4NzMw", "url": "https://api.github.com/repos/espnet/espnet/labels/ASR", "name": "ASR", "color": "3ee0d5", "default": false, "description": "Automatic speech recogntion"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2020-03-22T17:18:19Z", "updated_at": "2020-05-15T10:15:53Z", "closed_at": "2020-05-15T10:15:53Z", "author_association": "NONE", "active_lock_reason": null, "body": "References to do ASR demo using wsj_mix dataset. Getting error in Data Preparation stage while following steps from ASR demo with an4 dataset in interspeech tutorial.", "reactions": {"url": "https://api.github.com/repos/espnet/espnet/issues/1721/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/espnet/espnet/issues/1721/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/espnet/espnet/issues/1672", "repository_url": "https://api.github.com/repos/espnet/espnet", "labels_url": "https://api.github.com/repos/espnet/espnet/issues/1672/labels{/name}", "comments_url": "https://api.github.com/repos/espnet/espnet/issues/1672/comments", "events_url": "https://api.github.com/repos/espnet/espnet/issues/1672/events", "html_url": "https://github.com/espnet/espnet/issues/1672", "id": 581062519, "node_id": "MDU6SXNzdWU1ODEwNjI1MTk=", "number": 1672, "title": "AttributeError: 'dict' object has no attribute 'start_shuffle'", "user": {"login": "yash-s20", "id": 39774433, "node_id": "MDQ6VXNlcjM5Nzc0NDMz", "avatar_url": "https://avatars.githubusercontent.com/u/39774433?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yash-s20", "html_url": "https://github.com/yash-s20", "followers_url": "https://api.github.com/users/yash-s20/followers", "following_url": "https://api.github.com/users/yash-s20/following{/other_user}", "gists_url": "https://api.github.com/users/yash-s20/gists{/gist_id}", "starred_url": "https://api.github.com/users/yash-s20/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yash-s20/subscriptions", "organizations_url": "https://api.github.com/users/yash-s20/orgs", "repos_url": "https://api.github.com/users/yash-s20/repos", "events_url": "https://api.github.com/users/yash-s20/events{/privacy}", "received_events_url": "https://api.github.com/users/yash-s20/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 777173273, "node_id": "MDU6TGFiZWw3NzcxNzMyNzM=", "url": "https://api.github.com/repos/espnet/espnet/labels/Bug", "name": "Bug", "color": "ee0701", "default": false, "description": "bug should be fixed"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 10, "created_at": "2020-03-14T06:15:34Z", "updated_at": "2020-03-30T12:33:10Z", "closed_at": "2020-03-30T12:32:39Z", "author_association": "NONE", "active_lock_reason": null, "body": "this is the complete traceback -\r\n\r\n`Traceback (most recent call last):                                                                                                                                                                  File \".../espnet/bin/asr_train.py\", line 370, in <module>                                                                                      main(sys.argv[1:])                                                                                                                                                                              File \".../espnet/bin/asr_train.py\", line 357, in main                                                                                          train(args)                                                                                                                                                                                     File \".../espnet/asr/pytorch_backend/asr.py\", line 630, in train                                                                                              trainer.run()                                                                                                                                                                                   File \".../espnet/tools/venv/lib/python3.7/site-packages/chainer/training/trainer.py\", line 349, in run                                                               six.reraise(*exc_info)                                                                                                                                                                          File \".../espnet/tools/venv/lib/python3.7/site-packages/six.py\", line 703, in reraise                                                                                raise value                                                                                                                                                                                     File \".../espnet/tools/venv/lib/python3.7/site-packages/chainer/training/trainer.py\", line 319, in run                                                               entry.extension(self)                                                                                                                                                                           File \".../espnet/espnet/utils/training/iterators.py\", line 28, in __call__                                                                                           iterator.start_shuffle()                                                                                                                                                                      AttributeError: 'dict' object has no attribute 'start_shuffle'`\r\nthis is my train config -\r\n```\r\n# network architecture\r\n# encoder related\r\netype: blstmp     # encoder architecture type\r\nelayers: 4\r\neunits: 512\r\neprojs: 512\r\nsubsample: \"1_2_2_1_1\" # skip every n frame from input to nth layers\r\ndropout-rate: 0.3\r\n# decoder related\r\ndlayers: 1\r\ndunits: 512\r\ndropout-rate-decoder: 0.1\r\n# attention related\r\natype: location\r\nadim: 512\r\naconv-chans: 10\r\naconv-filts: 100\r\n\r\n# hybrid CTC/attention\r\nmtlalpha: 0.7\r\n\r\n# minibatch related\r\nbatch-size: 4\r\nmaxlen-in: 800  # if input length  > maxlen_in, batchsize is automatically reduced\r\nmaxlen-out: 150 # if output length > maxlen_out, batchsize is automatically reduced\r\n\r\n# optimization related\r\nopt: adadelta\r\nepochs: 20\r\npatience: 10\r\nsortagrad: 1\r\n# scheduled sampling option\r\nsampling-probability: 0.0\r\n\r\nreport-cer: true\r\nreport-wer: true\r\n\r\n```\r\nHere's what I see in espnet/asr/pytorch_backend/asr_mix.py -\r\na list containing just train_iter is passed to ShufflingEnabler, which is a dictionary, and in the call method a start_shuffle attribute is called on the this, which is causing the error. Why is this so?\r\nAlso as you can see sortagrad is set to 1, and this error sprouts at the beginning of the second epoch.\r\n**Edit:** file paths", "reactions": {"url": "https://api.github.com/repos/espnet/espnet/issues/1672/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/espnet/espnet/issues/1672/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/espnet/espnet/issues/1654", "repository_url": "https://api.github.com/repos/espnet/espnet", "labels_url": "https://api.github.com/repos/espnet/espnet/issues/1654/labels{/name}", "comments_url": "https://api.github.com/repos/espnet/espnet/issues/1654/comments", "events_url": "https://api.github.com/repos/espnet/espnet/issues/1654/events", "html_url": "https://github.com/espnet/espnet/issues/1654", "id": 576641861, "node_id": "MDU6SXNzdWU1NzY2NDE4NjE=", "number": 1654, "title": "conflict with use_transfer=true with conf/train_transformer_transducer.yaml", "user": {"login": "qmpzzpmq", "id": 21037898, "node_id": "MDQ6VXNlcjIxMDM3ODk4", "avatar_url": "https://avatars.githubusercontent.com/u/21037898?v=4", "gravatar_id": "", "url": "https://api.github.com/users/qmpzzpmq", "html_url": "https://github.com/qmpzzpmq", "followers_url": "https://api.github.com/users/qmpzzpmq/followers", "following_url": "https://api.github.com/users/qmpzzpmq/following{/other_user}", "gists_url": "https://api.github.com/users/qmpzzpmq/gists{/gist_id}", "starred_url": "https://api.github.com/users/qmpzzpmq/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/qmpzzpmq/subscriptions", "organizations_url": "https://api.github.com/users/qmpzzpmq/orgs", "repos_url": "https://api.github.com/users/qmpzzpmq/repos", "events_url": "https://api.github.com/users/qmpzzpmq/events{/privacy}", "received_events_url": "https://api.github.com/users/qmpzzpmq/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 777173273, "node_id": "MDU6TGFiZWw3NzcxNzMyNzM=", "url": "https://api.github.com/repos/espnet/espnet/labels/Bug", "name": "Bug", "color": "ee0701", "default": false, "description": "bug should be fixed"}], "state": "closed", "locked": false, "assignee": {"login": "b-flo", "id": 41155456, "node_id": "MDQ6VXNlcjQxMTU1NDU2", "avatar_url": "https://avatars.githubusercontent.com/u/41155456?v=4", "gravatar_id": "", "url": "https://api.github.com/users/b-flo", "html_url": "https://github.com/b-flo", "followers_url": "https://api.github.com/users/b-flo/followers", "following_url": "https://api.github.com/users/b-flo/following{/other_user}", "gists_url": "https://api.github.com/users/b-flo/gists{/gist_id}", "starred_url": "https://api.github.com/users/b-flo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/b-flo/subscriptions", "organizations_url": "https://api.github.com/users/b-flo/orgs", "repos_url": "https://api.github.com/users/b-flo/repos", "events_url": "https://api.github.com/users/b-flo/events{/privacy}", "received_events_url": "https://api.github.com/users/b-flo/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "b-flo", "id": 41155456, "node_id": "MDQ6VXNlcjQxMTU1NDU2", "avatar_url": "https://avatars.githubusercontent.com/u/41155456?v=4", "gravatar_id": "", "url": "https://api.github.com/users/b-flo", "html_url": "https://github.com/b-flo", "followers_url": "https://api.github.com/users/b-flo/followers", "following_url": "https://api.github.com/users/b-flo/following{/other_user}", "gists_url": "https://api.github.com/users/b-flo/gists{/gist_id}", "starred_url": "https://api.github.com/users/b-flo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/b-flo/subscriptions", "organizations_url": "https://api.github.com/users/b-flo/orgs", "repos_url": "https://api.github.com/users/b-flo/repos", "events_url": "https://api.github.com/users/b-flo/events{/privacy}", "received_events_url": "https://api.github.com/users/b-flo/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 8, "created_at": "2020-03-06T01:42:58Z", "updated_at": "2020-05-15T10:02:35Z", "closed_at": "2020-05-15T10:02:35Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Hi, when run with config file train_transformer_transducer.yaml copied from vivos egs in egs voxforge with variable use_tranfer=true and  type_transfer=enc or `both`.\r\nthere is bug said:\r\n```\r\nusage: asr_train.py [-h] [--config CONFIG] [--config2 CONFIG2]\r\n                    [--config3 CONFIG3] [--ngpu NGPU]\r\n                    [--train-dtype {float16,float32,float64,O0,O1,O2,O3}]\r\n                    [--backend {chainer,pytorch}] --outdir OUTDIR\r\n                    [--debugmode DEBUGMODE] --dict DICT [--seed SEED]\r\n                    [--debugdir DEBUGDIR] [--resume [RESUME]]\r\n                    [--minibatches MINIBATCHES] [--verbose VERBOSE]\r\n                    [--tensorboard-dir [TENSORBOARD_DIR]]\r\n                    [--report-interval-iters REPORT_INTERVAL_ITERS]\r\n                    [--save-interval-iters SAVE_INTERVAL_ITERS]\r\n                    [--train-json TRAIN_JSON] [--valid-json VALID_JSON]\r\n                    [--model-module MODEL_MODULE] [--num-encs NUM_ENCS]\r\n                    [--ctc_type {builtin,warpctc}] [--mtlalpha MTLALPHA]\r\n                    [--lsm-weight LSM_WEIGHT] [--report-cer] [--report-wer]\r\n                    [--nbest NBEST] [--beam-size BEAM_SIZE]\r\n                    [--penalty PENALTY] [--maxlenratio MAXLENRATIO]\r\n                    [--minlenratio MINLENRATIO] [--ctc-weight CTC_WEIGHT]\r\n                    [--rnnlm RNNLM] [--rnnlm-conf RNNLM_CONF]\r\n                    [--lm-weight LM_WEIGHT] [--sym-space SYM_SPACE]\r\n                    [--sym-blank SYM_BLANK] [--sortagrad [SORTAGRAD]]\r\n                    [--batch-count {auto,seq,bin,frame}]\r\n                    [--batch-size BATCH_SIZE] [--batch-bins BATCH_BINS]\r\n                    [--batch-frames-in BATCH_FRAMES_IN]\r\n                    [--batch-frames-out BATCH_FRAMES_OUT]\r\n                    [--batch-frames-inout BATCH_FRAMES_INOUT] [--maxlen-in ML]\r\n                    [--maxlen-out ML] [--n-iter-processes N_ITER_PROCESSES]\r\n                    [--preprocess-conf [PREPROCESS_CONF]]\r\n                    [--opt {adadelta,adam,noam}] [--accum-grad ACCUM_GRAD]\r\n                    [--eps EPS] [--eps-decay EPS_DECAY]\r\n                    [--weight-decay WEIGHT_DECAY] [--criterion {loss,acc}]\r\n                    [--threshold THRESHOLD] [--epochs EPOCHS]\r\n                    [--early-stop-criterion [EARLY_STOP_CRITERION]]\r\n                    [--patience [PATIENCE]] [--grad-clip GRAD_CLIP]\r\n                    [--num-save-attention NUM_SAVE_ATTENTION]\r\n                    [--grad-noise GRAD_NOISE] [--num-spkrs {1,2}]\r\n                    [--context-residual [CONTEXT_RESIDUAL]]\r\n                    [--enc-init ENC_INIT] [--enc-init-mods ENC_INIT_MODS]\r\n                    [--dec-init DEC_INIT] [--dec-init-mods DEC_INIT_MODS]\r\n                    [--use-frontend USE_FRONTEND] [--use-wpe USE_WPE]\r\n                    [--wtype {lstm,blstm,lstmp,blstmp,vgglstmp,vggblstmp,vgglstm,vggblstm,gru,bgru,grup,bgrup,vgggrup,vggbgrup,vgggru,vggbgru}]\r\n                    [--wlayers WLAYERS] [--wunits WUNITS] [--wprojs WPROJS]\r\n                    [--wdropout-rate WDROPOUT_RATE] [--wpe-taps WPE_TAPS]\r\n                    [--wpe-delay WPE_DELAY]\r\n                    [--use-dnn-mask-for-wpe USE_DNN_MASK_FOR_WPE]\r\n                    [--use-beamformer USE_BEAMFORMER]\r\n                    [--btype {lstm,blstm,lstmp,blstmp,vgglstmp,vggblstmp,vgglstm,vggblstm,gru,bgru,grup,bgrup,vgggrup,vggbgrup,vgggru,vggbgru}]\r\n                    [--blayers BLAYERS] [--bunits BUNITS] [--bprojs BPROJS]\r\n                    [--badim BADIM] [--bnmask BNMASK]\r\n                    [--ref-channel REF_CHANNEL]\r\n                    [--bdropout-rate BDROPOUT_RATE] [--stats-file STATS_FILE]\r\n                    [--apply-uttmvn APPLY_UTTMVN]\r\n                    [--uttmvn-norm-means UTTMVN_NORM_MEANS]\r\n                    [--uttmvn-norm-vars UTTMVN_NORM_VARS]\r\n                    [--fbank-fs FBANK_FS] [--n-mels N_MELS]\r\n                    [--fbank-fmin FBANK_FMIN] [--fbank-fmax FBANK_FMAX]\r\n                    [--etype {lstm,blstm,lstmp,blstmp,vgglstmp,vggblstmp,vgglstm,vggblstm,gru,bgru,grup,bgrup,vgggrup,vggbgrup,vgggru,vggbgru}]\r\n                    [--elayers ELAYERS] [--eunits EUNITS] [--eprojs EPROJS]\r\n                    [--subsample SUBSAMPLE]\r\n                    [--atype {noatt,dot,add,location,coverage,coverage_location,location2d,location_recurrent,multi_head_dot,multi_head_add,multi_head_loc,multi_head_multi_res_loc}]\r\n                    [--adim ADIM] [--awin AWIN] [--aheads AHEADS]\r\n                    [--aconv-chans ACONV_CHANS] [--aconv-filts ACONV_FILTS]\r\n                    [--dropout-rate DROPOUT_RATE] [--dtype {lstm,gru}]\r\n                    [--dlayers DLAYERS] [--dunits DUNITS]\r\n                    [--dropout-rate-decoder DROPOUT_RATE_DECODER]\r\n                    [--sampling-probability SAMPLING_PROBABILITY]\r\n                    [--lsm-type [{,unigram}]]\r\nasr_train.py: error: argument --etype: invalid choice: 'transformer' (choose from 'lstm', 'blstm', 'lstmp', 'blstmp', 'vgglstmp', 'vggblstmp', 'vgglstm', 'vggblstm', 'gru', 'bgru', 'grup', 'bgrup', 'vgggrup', 'vggbgrup', 'vgggru', 'vggbgru')\r\n# Accounting: time=1 threads=1\r\n# Ended (code 2) at Fri Mar  6 09:31:28 CST 2020, elapsed time 1 seconds\r\n```\r\n\r\nit is seems get_parser.py in the asr_train.py haven't include the \"transformer type\". It encoder of transformer couldn't be initialized by pure CTC. ", "reactions": {"url": "https://api.github.com/repos/espnet/espnet/issues/1654/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/espnet/espnet/issues/1654/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/espnet/espnet/issues/1646", "repository_url": "https://api.github.com/repos/espnet/espnet", "labels_url": "https://api.github.com/repos/espnet/espnet/issues/1646/labels{/name}", "comments_url": "https://api.github.com/repos/espnet/espnet/issues/1646/comments", "events_url": "https://api.github.com/repos/espnet/espnet/issues/1646/events", "html_url": "https://github.com/espnet/espnet/issues/1646", "id": 576112794, "node_id": "MDU6SXNzdWU1NzYxMTI3OTQ=", "number": 1646, "title": "New argument `embed_unit` in language model breaks backward compability", "user": {"login": "unilight", "id": 11516009, "node_id": "MDQ6VXNlcjExNTE2MDA5", "avatar_url": "https://avatars.githubusercontent.com/u/11516009?v=4", "gravatar_id": "", "url": "https://api.github.com/users/unilight", "html_url": "https://github.com/unilight", "followers_url": "https://api.github.com/users/unilight/followers", "following_url": "https://api.github.com/users/unilight/following{/other_user}", "gists_url": "https://api.github.com/users/unilight/gists{/gist_id}", "starred_url": "https://api.github.com/users/unilight/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/unilight/subscriptions", "organizations_url": "https://api.github.com/users/unilight/orgs", "repos_url": "https://api.github.com/users/unilight/repos", "events_url": "https://api.github.com/users/unilight/events{/privacy}", "received_events_url": "https://api.github.com/users/unilight/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 777173273, "node_id": "MDU6TGFiZWw3NzcxNzMyNzM=", "url": "https://api.github.com/repos/espnet/espnet/labels/Bug", "name": "Bug", "color": "ee0701", "default": false, "description": "bug should be fixed"}, {"id": 777173279, "node_id": "MDU6TGFiZWw3NzcxNzMyNzk=", "url": "https://api.github.com/repos/espnet/espnet/labels/Question", "name": "Question", "color": "cc317c", "default": false, "description": "Question"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 7, "created_at": "2020-03-05T09:32:23Z", "updated_at": "2020-03-06T12:11:29Z", "closed_at": "2020-03-06T12:11:29Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "I'm using the pretrained Transformer ASR model on Librispeech as in [here](https://github.com/espnet/espnet/blob/master/egs/ljspeech/tts1/local/ob_eval/evaluate_cer.sh#L36-L40). Similar to issue #1638 , I think the new argument `embed_unit` in language model is breaking backward compatibility. In the original issue the solution seemed to be retraining it from scratch. I'm wondering if it is possible to fix the commit so I can still use the pretrained model normally.", "reactions": {"url": "https://api.github.com/repos/espnet/espnet/issues/1646/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/espnet/espnet/issues/1646/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/espnet/espnet/issues/1644", "repository_url": "https://api.github.com/repos/espnet/espnet", "labels_url": "https://api.github.com/repos/espnet/espnet/issues/1644/labels{/name}", "comments_url": "https://api.github.com/repos/espnet/espnet/issues/1644/comments", "events_url": "https://api.github.com/repos/espnet/espnet/issues/1644/events", "html_url": "https://github.com/espnet/espnet/issues/1644", "id": 576024278, "node_id": "MDU6SXNzdWU1NzYwMjQyNzg=", "number": 1644, "title": "Bugs: tacotron2 tts attention visualization for version 0.7.0", "user": {"login": "liusongxiang", "id": 23516571, "node_id": "MDQ6VXNlcjIzNTE2NTcx", "avatar_url": "https://avatars.githubusercontent.com/u/23516571?v=4", "gravatar_id": "", "url": "https://api.github.com/users/liusongxiang", "html_url": "https://github.com/liusongxiang", "followers_url": "https://api.github.com/users/liusongxiang/followers", "following_url": "https://api.github.com/users/liusongxiang/following{/other_user}", "gists_url": "https://api.github.com/users/liusongxiang/gists{/gist_id}", "starred_url": "https://api.github.com/users/liusongxiang/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/liusongxiang/subscriptions", "organizations_url": "https://api.github.com/users/liusongxiang/orgs", "repos_url": "https://api.github.com/users/liusongxiang/repos", "events_url": "https://api.github.com/users/liusongxiang/events{/privacy}", "received_events_url": "https://api.github.com/users/liusongxiang/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 777173273, "node_id": "MDU6TGFiZWw3NzcxNzMyNzM=", "url": "https://api.github.com/repos/espnet/espnet/labels/Bug", "name": "Bug", "color": "ee0701", "default": false, "description": "bug should be fixed"}, {"id": 1889036170, "node_id": "MDU6TGFiZWwxODg5MDM2MTcw", "url": "https://api.github.com/repos/espnet/espnet/labels/ESPnet2", "name": "ESPnet2", "color": "f2db68", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": {"login": "kamo-naoyuki", "id": 19261024, "node_id": "MDQ6VXNlcjE5MjYxMDI0", "avatar_url": "https://avatars.githubusercontent.com/u/19261024?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kamo-naoyuki", "html_url": "https://github.com/kamo-naoyuki", "followers_url": "https://api.github.com/users/kamo-naoyuki/followers", "following_url": "https://api.github.com/users/kamo-naoyuki/following{/other_user}", "gists_url": "https://api.github.com/users/kamo-naoyuki/gists{/gist_id}", "starred_url": "https://api.github.com/users/kamo-naoyuki/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kamo-naoyuki/subscriptions", "organizations_url": "https://api.github.com/users/kamo-naoyuki/orgs", "repos_url": "https://api.github.com/users/kamo-naoyuki/repos", "events_url": "https://api.github.com/users/kamo-naoyuki/events{/privacy}", "received_events_url": "https://api.github.com/users/kamo-naoyuki/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "kamo-naoyuki", "id": 19261024, "node_id": "MDQ6VXNlcjE5MjYxMDI0", "avatar_url": "https://avatars.githubusercontent.com/u/19261024?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kamo-naoyuki", "html_url": "https://github.com/kamo-naoyuki", "followers_url": "https://api.github.com/users/kamo-naoyuki/followers", "following_url": "https://api.github.com/users/kamo-naoyuki/following{/other_user}", "gists_url": "https://api.github.com/users/kamo-naoyuki/gists{/gist_id}", "starred_url": "https://api.github.com/users/kamo-naoyuki/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kamo-naoyuki/subscriptions", "organizations_url": "https://api.github.com/users/kamo-naoyuki/orgs", "repos_url": "https://api.github.com/users/kamo-naoyuki/repos", "events_url": "https://api.github.com/users/kamo-naoyuki/events{/privacy}", "received_events_url": "https://api.github.com/users/kamo-naoyuki/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/espnet/espnet/milestones/13", "html_url": "https://github.com/espnet/espnet/milestone/13", "labels_url": "https://api.github.com/repos/espnet/espnet/milestones/13/labels", "id": 4865546, "node_id": "MDk6TWlsZXN0b25lNDg2NTU0Ng==", "number": 13, "title": "v.0.7.0", "description": "", "creator": {"login": "kan-bayashi", "id": 22779813, "node_id": "MDQ6VXNlcjIyNzc5ODEz", "avatar_url": "https://avatars.githubusercontent.com/u/22779813?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kan-bayashi", "html_url": "https://github.com/kan-bayashi", "followers_url": "https://api.github.com/users/kan-bayashi/followers", "following_url": "https://api.github.com/users/kan-bayashi/following{/other_user}", "gists_url": "https://api.github.com/users/kan-bayashi/gists{/gist_id}", "starred_url": "https://api.github.com/users/kan-bayashi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kan-bayashi/subscriptions", "organizations_url": "https://api.github.com/users/kan-bayashi/orgs", "repos_url": "https://api.github.com/users/kan-bayashi/repos", "events_url": "https://api.github.com/users/kan-bayashi/events{/privacy}", "received_events_url": "https://api.github.com/users/kan-bayashi/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 92, "state": "closed", "created_at": "2019-11-21T08:18:56Z", "updated_at": "2020-04-09T01:05:16Z", "due_on": null, "closed_at": "2020-04-09T01:05:16Z"}, "comments": 6, "created_at": "2020-03-05T06:31:51Z", "updated_at": "2020-04-07T14:20:07Z", "closed_at": "2020-04-07T14:20:07Z", "author_association": "NONE", "active_lock_reason": null, "body": "@kamo-naoyuki \r\nI tried to use espnet2 tacotron2 model to conduct TTS on LJSpeech. The whole pipeline is ok with some minor modifications in the TEMPLATE/tts.sh, and the sysnthesis performance is also acceptable (currently use Griffin-Lim to generate). \r\nBut I found that there are bugs for attention weight visualization using  https://github.com/espnet/espnet/blob/v.0.7.0/espnet2/torch_utils/calculate_all_attentions.py#L13 .\r\nBecause decoder runs iteratively, the hook function will overwritten what is in the outputs and only remain the last attention vector.\r\nI made some small modifications to make it work properly, as follows:\r\n```python\r\n# 1. Register forward_hook fn to save the output from specific layers\r\n    outputs = defaultdict(list)   # MODIFIED\r\n    handles = {}\r\n    for name, modu in model.named_modules():\r\n\r\n        def hook(module, input, output, name=name):\r\n            # TODO(kamo): Should unify the interface?\r\n            if isinstance(module, MultiHeadedAttention):\r\n                outputs[name] = output\r\n            else:\r\n                c, w = output\r\n                outputs[name].append(w)   # MODIFIED\r\n\r\n        if isinstance(modu, AbsAttention):\r\n            handle = modu.register_forward_hook(hook)  \r\n            handles[name] = handle\r\n\r\n    # 2. Just forward one by one sample.\r\n    # Batch-mode can't be used to keep requirements small for each models.\r\n    keys = []\r\n    for k in batch:\r\n        if not k.endswith(\"_lengths\"):\r\n            keys.append(k)\r\n\r\n    return_dict = defaultdict(list)    # MODIFIED\r\n    for ibatch in range(bs):\r\n        # *: (B, L, ...) -> (1, L2, ...)\r\n        _sample = {\r\n            k: batch[k][ibatch, None, : batch[k + \"_lengths\"][ibatch]]\r\n            if k + \"_lengths\" in batch\r\n            else batch[k][ibatch, None]\r\n            for k in keys\r\n        }\r\n    \r\n        # *_lengths: (B,) -> (1,)\r\n        _sample.update(\r\n            {\r\n                k + \"_lengths\": batch[k + \"_lengths\"][ibatch, None]\r\n                for k in keys\r\n                if k + \"_lengths\" in batch\r\n            }\r\n        )\r\n        model(**_sample)\r\n        \r\n\r\n        # Derive the attention results\r\n        for name, output in outputs.items():\r\n            output = torch.stack(output).squeeze()   # MODIFIED\r\n            return_dict[name].append(output)\r\n        outputs.clear()   # MODIFIED\r\n```\r\nThe modifications are noted by MODIFIED flags. Since I am not sure whether these modifications will affect other functionalities e.g ASR, I just post it here for your reference if you need it.", "reactions": {"url": "https://api.github.com/repos/espnet/espnet/issues/1644/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/espnet/espnet/issues/1644/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/espnet/espnet/issues/1638", "repository_url": "https://api.github.com/repos/espnet/espnet", "labels_url": "https://api.github.com/repos/espnet/espnet/issues/1638/labels{/name}", "comments_url": "https://api.github.com/repos/espnet/espnet/issues/1638/comments", "events_url": "https://api.github.com/repos/espnet/espnet/issues/1638/events", "html_url": "https://github.com/espnet/espnet/issues/1638", "id": 574805232, "node_id": "MDU6SXNzdWU1NzQ4MDUyMzI=", "number": 1638, "title": "New argument `embed_unit` in language model breaks an4 recipe", "user": {"login": "qmeeus", "id": 25608944, "node_id": "MDQ6VXNlcjI1NjA4OTQ0", "avatar_url": "https://avatars.githubusercontent.com/u/25608944?v=4", "gravatar_id": "", "url": "https://api.github.com/users/qmeeus", "html_url": "https://github.com/qmeeus", "followers_url": "https://api.github.com/users/qmeeus/followers", "following_url": "https://api.github.com/users/qmeeus/following{/other_user}", "gists_url": "https://api.github.com/users/qmeeus/gists{/gist_id}", "starred_url": "https://api.github.com/users/qmeeus/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/qmeeus/subscriptions", "organizations_url": "https://api.github.com/users/qmeeus/orgs", "repos_url": "https://api.github.com/users/qmeeus/repos", "events_url": "https://api.github.com/users/qmeeus/events{/privacy}", "received_events_url": "https://api.github.com/users/qmeeus/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 777173273, "node_id": "MDU6TGFiZWw3NzcxNzMyNzM=", "url": "https://api.github.com/repos/espnet/espnet/labels/Bug", "name": "Bug", "color": "ee0701", "default": false, "description": "bug should be fixed"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2020-03-03T16:54:16Z", "updated_at": "2020-03-04T09:30:32Z", "closed_at": "2020-03-04T09:30:32Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Following [this commit](https://github.com/espnet/espnet/commit/943c9933fc047133a1ba8adc07be79957416316e):\r\n```\r\nTraceback (most recent call last):\r\n  File \"/users/spraak/qmeeus/spchdisk/repos/espnet/espnet/bin/asr_recog.py\", line 208, in <module>\r\n    main(sys.argv[1:])\r\n  File \"/users/spraak/qmeeus/spchdisk/repos/espnet/espnet/bin/asr_recog.py\", line 190, in main\r\n    recog(args)\r\n  File \"/esat/spchdisk/scratch/qmeeus/repos/espnet/espnet/asr/pytorch_backend/asr.py\", line 664, in recog\r\n    len(word_dict), rnnlm_args.layer, rnnlm_args.unit, rnnlm_args.embed_unit))\r\nAttributeError: 'Namespace' object has no attribute 'embed_unit'\r\n```\r\nThis is happening for recipe `an4/asr1` but I suspect that it is causing more issues in other recipes", "reactions": {"url": "https://api.github.com/repos/espnet/espnet/issues/1638/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/espnet/espnet/issues/1638/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/espnet/espnet/issues/1634", "repository_url": "https://api.github.com/repos/espnet/espnet", "labels_url": "https://api.github.com/repos/espnet/espnet/issues/1634/labels{/name}", "comments_url": "https://api.github.com/repos/espnet/espnet/issues/1634/comments", "events_url": "https://api.github.com/repos/espnet/espnet/issues/1634/events", "html_url": "https://github.com/espnet/espnet/issues/1634", "id": 574677702, "node_id": "MDU6SXNzdWU1NzQ2Nzc3MDI=", "number": 1634, "title": "[Feature Request]: allow to specify which gpu to use", "user": {"login": "qmeeus", "id": 25608944, "node_id": "MDQ6VXNlcjI1NjA4OTQ0", "avatar_url": "https://avatars.githubusercontent.com/u/25608944?v=4", "gravatar_id": "", "url": "https://api.github.com/users/qmeeus", "html_url": "https://github.com/qmeeus", "followers_url": "https://api.github.com/users/qmeeus/followers", "following_url": "https://api.github.com/users/qmeeus/following{/other_user}", "gists_url": "https://api.github.com/users/qmeeus/gists{/gist_id}", "starred_url": "https://api.github.com/users/qmeeus/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/qmeeus/subscriptions", "organizations_url": "https://api.github.com/users/qmeeus/orgs", "repos_url": "https://api.github.com/users/qmeeus/repos", "events_url": "https://api.github.com/users/qmeeus/events{/privacy}", "received_events_url": "https://api.github.com/users/qmeeus/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 777173273, "node_id": "MDU6TGFiZWw3NzcxNzMyNzM=", "url": "https://api.github.com/repos/espnet/espnet/labels/Bug", "name": "Bug", "color": "ee0701", "default": false, "description": "bug should be fixed"}, {"id": 777173279, "node_id": "MDU6TGFiZWw3NzcxNzMyNzk=", "url": "https://api.github.com/repos/espnet/espnet/labels/Question", "name": "Question", "color": "cc317c", "default": false, "description": "Question"}, {"id": 1885270144, "node_id": "MDU6TGFiZWwxODg1MjcwMTQ0", "url": "https://api.github.com/repos/espnet/espnet/labels/Multiple%20GPUs", "name": "Multiple GPUs", "color": "c2e0c6", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2020-03-03T13:43:45Z", "updated_at": "2020-03-22T09:36:21Z", "closed_at": "2020-03-22T09:36:21Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "As far as I could see, there is no such option. To clarify, this is useful when running a script on a machine with more than one GPU, having a flag such as `--gpu 1` or `--device cuda:1` would be of great help!\r\n\r\nThanks for all the work!", "reactions": {"url": "https://api.github.com/repos/espnet/espnet/issues/1634/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/espnet/espnet/issues/1634/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/espnet/espnet/issues/1619", "repository_url": "https://api.github.com/repos/espnet/espnet", "labels_url": "https://api.github.com/repos/espnet/espnet/issues/1619/labels{/name}", "comments_url": "https://api.github.com/repos/espnet/espnet/issues/1619/comments", "events_url": "https://api.github.com/repos/espnet/espnet/issues/1619/events", "html_url": "https://github.com/espnet/espnet/issues/1619", "id": 571486489, "node_id": "MDU6SXNzdWU1NzE0ODY0ODk=", "number": 1619, "title": "Error when building docker ", "user": {"login": "wentaoxandry", "id": 47325204, "node_id": "MDQ6VXNlcjQ3MzI1MjA0", "avatar_url": "https://avatars.githubusercontent.com/u/47325204?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wentaoxandry", "html_url": "https://github.com/wentaoxandry", "followers_url": "https://api.github.com/users/wentaoxandry/followers", "following_url": "https://api.github.com/users/wentaoxandry/following{/other_user}", "gists_url": "https://api.github.com/users/wentaoxandry/gists{/gist_id}", "starred_url": "https://api.github.com/users/wentaoxandry/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wentaoxandry/subscriptions", "organizations_url": "https://api.github.com/users/wentaoxandry/orgs", "repos_url": "https://api.github.com/users/wentaoxandry/repos", "events_url": "https://api.github.com/users/wentaoxandry/events{/privacy}", "received_events_url": "https://api.github.com/users/wentaoxandry/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 777173273, "node_id": "MDU6TGFiZWw3NzcxNzMyNzM=", "url": "https://api.github.com/repos/espnet/espnet/labels/Bug", "name": "Bug", "color": "ee0701", "default": false, "description": "bug should be fixed"}, {"id": 1412395969, "node_id": "MDU6TGFiZWwxNDEyMzk1OTY5", "url": "https://api.github.com/repos/espnet/espnet/labels/Docker", "name": "Docker", "color": "a3fc8a", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 20, "created_at": "2020-02-26T15:56:33Z", "updated_at": "2020-05-15T10:14:36Z", "closed_at": "2020-05-15T10:14:36Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "When I building docker, I run espnet/docker/build.sh: sudo ./build.sh local 10.0, but I got this error:\r\n\r\n. venv/bin/activate && pip install cupy-cuda==6.0.0\r\n\r\nERROR: Could not find a version that satisfies the requirement cupy-cuda==6.0.0 (from versions: none)\r\nERROR: No matching distribution found for cupy-cuda==6.0.0\r\nMakefile:77: recipe for target 'cupy.done' failed\r\nmake: *** [cupy.done] Error 1\r\nThe command '/bin/sh -c if [ -z \"$( nvcc -V )\" ]; then         make KALDI=/kaldi CUPY_VERSION='';     else         sed -i '161s|install.py|install.py --no-cupy|' Makefile &&         sed -i '21s|nvidia-smi|nvcc|' Makefile &&         make KALDI=/kaldi CUDA_VERSION=${CUDA_VER};     fi' returned a non-zero code: 2\r\n\r\nI have installed espnet with no error but I don't know why I got this Error by building docker.\r\nPlease help me and tell me how can I fix it.\r\nThank you\r\n", "reactions": {"url": "https://api.github.com/repos/espnet/espnet/issues/1619/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/espnet/espnet/issues/1619/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/espnet/espnet/issues/1604", "repository_url": "https://api.github.com/repos/espnet/espnet", "labels_url": "https://api.github.com/repos/espnet/espnet/issues/1604/labels{/name}", "comments_url": "https://api.github.com/repos/espnet/espnet/issues/1604/comments", "events_url": "https://api.github.com/repos/espnet/espnet/issues/1604/events", "html_url": "https://github.com/espnet/espnet/issues/1604", "id": 568848777, "node_id": "MDU6SXNzdWU1Njg4NDg3Nzc=", "number": 1604, "title": "torch unsqueeze is not inplace", "user": {"login": "TitouanT", "id": 16353124, "node_id": "MDQ6VXNlcjE2MzUzMTI0", "avatar_url": "https://avatars.githubusercontent.com/u/16353124?v=4", "gravatar_id": "", "url": "https://api.github.com/users/TitouanT", "html_url": "https://github.com/TitouanT", "followers_url": "https://api.github.com/users/TitouanT/followers", "following_url": "https://api.github.com/users/TitouanT/following{/other_user}", "gists_url": "https://api.github.com/users/TitouanT/gists{/gist_id}", "starred_url": "https://api.github.com/users/TitouanT/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/TitouanT/subscriptions", "organizations_url": "https://api.github.com/users/TitouanT/orgs", "repos_url": "https://api.github.com/users/TitouanT/repos", "events_url": "https://api.github.com/users/TitouanT/events{/privacy}", "received_events_url": "https://api.github.com/users/TitouanT/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 777173273, "node_id": "MDU6TGFiZWw3NzcxNzMyNzM=", "url": "https://api.github.com/repos/espnet/espnet/labels/Bug", "name": "Bug", "color": "ee0701", "default": false, "description": "bug should be fixed"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2020-02-21T09:49:53Z", "updated_at": "2020-02-28T01:05:26Z", "closed_at": "2020-02-28T01:05:26Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Unless I am missing something the `unsqueeze` method does not change the tensor inplace.\r\nSo in the lines below, since the result of the call is not stored, either these calls are artifact of debugging, either they are meant as inplace calls. Either way something is wrong here.\r\n\r\nhttps://github.com/espnet/espnet/blob/226449ad2f9cc55b42b03393337c2586d41f688d/espnet/nets/pytorch_backend/rnn/decoders.py#L352-L355\r\n\r\nFor reference, here is the doc to torch `unsqueeze` function:\r\n+ [torch.Tensor.unsqueeze](https://pytorch.org/docs/stable/tensors.html#torch.Tensor.unsqueeze)\r\n+ [torch.unsqueeze](https://pytorch.org/docs/stable/torch.html#torch.unsqueeze)\r\n\r\nA quick grep on the repo yield also those results (the last two are the ones cited above):\r\n```\r\nnets/pytorch_backend/e2e_asr_transformer.py:307:                vy.unsqueeze(1)\r\nnets/pytorch_backend/e2e_mt_transformer.py:320:                vy.unsqueeze(1)\r\nnets/pytorch_backend/e2e_st_transformer.py:376:                vy.unsqueeze(1)\r\nnets/pytorch_backend/rnn/decoders.py:352:                vy.unsqueeze(1)\r\nnets/pytorch_backend/rnn/decoders.py:355:                ey.unsqueeze(0)\r\n```", "reactions": {"url": "https://api.github.com/repos/espnet/espnet/issues/1604/reactions", "total_count": 2, "+1": 2, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/espnet/espnet/issues/1604/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/espnet/espnet/issues/1600", "repository_url": "https://api.github.com/repos/espnet/espnet", "labels_url": "https://api.github.com/repos/espnet/espnet/issues/1600/labels{/name}", "comments_url": "https://api.github.com/repos/espnet/espnet/issues/1600/comments", "events_url": "https://api.github.com/repos/espnet/espnet/issues/1600/events", "html_url": "https://github.com/espnet/espnet/issues/1600", "id": 568072647, "node_id": "MDU6SXNzdWU1NjgwNzI2NDc=", "number": 1600, "title": "ASR experiment with the VoxForge Italian Corpus - error: unrecognized arguments", "user": {"login": "leonardltk", "id": 22384973, "node_id": "MDQ6VXNlcjIyMzg0OTcz", "avatar_url": "https://avatars.githubusercontent.com/u/22384973?v=4", "gravatar_id": "", "url": "https://api.github.com/users/leonardltk", "html_url": "https://github.com/leonardltk", "followers_url": "https://api.github.com/users/leonardltk/followers", "following_url": "https://api.github.com/users/leonardltk/following{/other_user}", "gists_url": "https://api.github.com/users/leonardltk/gists{/gist_id}", "starred_url": "https://api.github.com/users/leonardltk/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/leonardltk/subscriptions", "organizations_url": "https://api.github.com/users/leonardltk/orgs", "repos_url": "https://api.github.com/users/leonardltk/repos", "events_url": "https://api.github.com/users/leonardltk/events{/privacy}", "received_events_url": "https://api.github.com/users/leonardltk/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 777173273, "node_id": "MDU6TGFiZWw3NzcxNzMyNzM=", "url": "https://api.github.com/repos/espnet/espnet/labels/Bug", "name": "Bug", "color": "ee0701", "default": false, "description": "bug should be fixed"}, {"id": 1356233216, "node_id": "MDU6TGFiZWwxMzU2MjMzMjE2", "url": "https://api.github.com/repos/espnet/espnet/labels/Recipe", "name": "Recipe", "color": "f7e171", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-02-20T06:05:50Z", "updated_at": "2020-03-25T16:40:21Z", "closed_at": "2020-03-25T16:40:21Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi, \r\n\r\nI just installed ESPNet and was following the tutorial in https://espnet.github.io/espnet/tutorial.html \r\n\r\nInstallation went fine without errors.\r\n\r\nBut at the stage of running the example script in `egs/voxforge/asr1/run.sh`\r\nThere is error in stage 3 : \r\n```\r\nstage 3: Network Training\r\nrun.pl: job failed, log is in exp/tr_it_pytorch_train/train.log\r\n```\r\nIn this log:\r\n```\r\n# asr_train.py --config conf/train.yaml --ngpu 1 --backend pytorch --outdir exp/tr_it_pytorch_train/results --tensorboard-dir tensorboard/tr_it_pytorch_train --debugmode 1 --dict data/lang_1char/tr_it_units.txt --debugdir exp/tr_it_pytorch_train --minibatches 0 --verbose 0 --resume --train-json dump/tr_it/deltafalse/data.json --valid-json dump/dt_it/deltafalse/data.json\r\n# Started at Thu Feb 20 12:16:07 CST 2020\r\n#\r\nusage: asr_train.py [-h] [--config CONFIG] [--config2 CONFIG2]\r\n                    [--config3 CONFIG3] [--ngpu NGPU]\r\n                    [--train-dtype {float16,float32,float64,O0,O1,O2,O3}]\r\n...\r\n                    [--dlayers DLAYERS] [--dunits DUNITS]\r\nasr_train.py: error: unrecognized arguments: --lsm-type=unigram --sampling-probability=0.0\r\n# Accounting: time=2 threads=1\r\n# Ended (code 2) at Thu Feb 20 12:16:09 CST 2020, elapsed time 2 seconds\r\n```\r\n\r\nWhat should i do about these two unrecognized arguments ?\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/espnet/espnet/issues/1600/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/espnet/espnet/issues/1600/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/espnet/espnet/issues/1590", "repository_url": "https://api.github.com/repos/espnet/espnet", "labels_url": "https://api.github.com/repos/espnet/espnet/issues/1590/labels{/name}", "comments_url": "https://api.github.com/repos/espnet/espnet/issues/1590/comments", "events_url": "https://api.github.com/repos/espnet/espnet/issues/1590/events", "html_url": "https://github.com/espnet/espnet/issues/1590", "id": 566349981, "node_id": "MDU6SXNzdWU1NjYzNDk5ODE=", "number": 1590, "title": "Tedlium 2: Pretrained transformer model not available", "user": {"login": "palle-k", "id": 13896160, "node_id": "MDQ6VXNlcjEzODk2MTYw", "avatar_url": "https://avatars.githubusercontent.com/u/13896160?v=4", "gravatar_id": "", "url": "https://api.github.com/users/palle-k", "html_url": "https://github.com/palle-k", "followers_url": "https://api.github.com/users/palle-k/followers", "following_url": "https://api.github.com/users/palle-k/following{/other_user}", "gists_url": "https://api.github.com/users/palle-k/gists{/gist_id}", "starred_url": "https://api.github.com/users/palle-k/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/palle-k/subscriptions", "organizations_url": "https://api.github.com/users/palle-k/orgs", "repos_url": "https://api.github.com/users/palle-k/repos", "events_url": "https://api.github.com/users/palle-k/events{/privacy}", "received_events_url": "https://api.github.com/users/palle-k/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 777173273, "node_id": "MDU6TGFiZWw3NzcxNzMyNzM=", "url": "https://api.github.com/repos/espnet/espnet/labels/Bug", "name": "Bug", "color": "ee0701", "default": false, "description": "bug should be fixed"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/espnet/espnet/milestones/15", "html_url": "https://github.com/espnet/espnet/milestone/15", "labels_url": "https://api.github.com/repos/espnet/espnet/milestones/15/labels", "id": 5139878, "node_id": "MDk6TWlsZXN0b25lNTEzOTg3OA==", "number": 15, "title": "v.0.6.3", "description": "", "creator": {"login": "kan-bayashi", "id": 22779813, "node_id": "MDQ6VXNlcjIyNzc5ODEz", "avatar_url": "https://avatars.githubusercontent.com/u/22779813?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kan-bayashi", "html_url": "https://github.com/kan-bayashi", "followers_url": "https://api.github.com/users/kan-bayashi/followers", "following_url": "https://api.github.com/users/kan-bayashi/following{/other_user}", "gists_url": "https://api.github.com/users/kan-bayashi/gists{/gist_id}", "starred_url": "https://api.github.com/users/kan-bayashi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kan-bayashi/subscriptions", "organizations_url": "https://api.github.com/users/kan-bayashi/orgs", "repos_url": "https://api.github.com/users/kan-bayashi/repos", "events_url": "https://api.github.com/users/kan-bayashi/events{/privacy}", "received_events_url": "https://api.github.com/users/kan-bayashi/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 32, "state": "closed", "created_at": "2020-02-25T13:45:52Z", "updated_at": "2020-04-07T09:57:00Z", "due_on": "2020-03-31T07:00:00Z", "closed_at": "2020-04-07T09:57:00Z"}, "comments": 10, "created_at": "2020-02-17T14:52:29Z", "updated_at": "2020-03-09T16:12:43Z", "closed_at": "2020-03-09T16:12:43Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "The pretrained Transformer (large model + specaug + large LM) model files for Tedlium 2 are unavailable at the link in the [RESULTS.md](https://github.com/espnet/espnet/blob/master/egs/tedlium2/asr1/RESULTS.md) file for Tedlium 2, as well as in the [Results and Demo section of the README of this project](https://github.com/espnet/espnet#results-and-demo) (tedlium2.transformer.v1).\r\n\r\nIn both cases, the link is https://drive.google.com/open?id=1mgbiWabOSkh_oHJIDA-h7hekQ3W95Z_U and it leads to the 404 page of Google Drive.", "reactions": {"url": "https://api.github.com/repos/espnet/espnet/issues/1590/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/espnet/espnet/issues/1590/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/espnet/espnet/issues/1508", "repository_url": "https://api.github.com/repos/espnet/espnet", "labels_url": "https://api.github.com/repos/espnet/espnet/issues/1508/labels{/name}", "comments_url": "https://api.github.com/repos/espnet/espnet/issues/1508/comments", "events_url": "https://api.github.com/repos/espnet/espnet/issues/1508/events", "html_url": "https://github.com/espnet/espnet/issues/1508", "id": 548864390, "node_id": "MDU6SXNzdWU1NDg4NjQzOTA=", "number": 1508, "title": "Pure CTC decoding bug", "user": {"login": "luyizhou4", "id": 13762235, "node_id": "MDQ6VXNlcjEzNzYyMjM1", "avatar_url": "https://avatars.githubusercontent.com/u/13762235?v=4", "gravatar_id": "", "url": "https://api.github.com/users/luyizhou4", "html_url": "https://github.com/luyizhou4", "followers_url": "https://api.github.com/users/luyizhou4/followers", "following_url": "https://api.github.com/users/luyizhou4/following{/other_user}", "gists_url": "https://api.github.com/users/luyizhou4/gists{/gist_id}", "starred_url": "https://api.github.com/users/luyizhou4/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/luyizhou4/subscriptions", "organizations_url": "https://api.github.com/users/luyizhou4/orgs", "repos_url": "https://api.github.com/users/luyizhou4/repos", "events_url": "https://api.github.com/users/luyizhou4/events{/privacy}", "received_events_url": "https://api.github.com/users/luyizhou4/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 777173273, "node_id": "MDU6TGFiZWw3NzcxNzMyNzM=", "url": "https://api.github.com/repos/espnet/espnet/labels/Bug", "name": "Bug", "color": "ee0701", "default": false, "description": "bug should be fixed"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 7, "created_at": "2020-01-13T11:19:29Z", "updated_at": "2020-02-20T13:31:17Z", "closed_at": "2020-02-20T13:31:17Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi, there!\r\n\r\nI'm currently decoding my CTC model (mtlalpha 1.0) with pure CTC mode (ctc_weight 1.0), and find that in current implementation, ctc-prefix-search will also compute \\<blank\\> token's next-label-score, which to my understanding shall be excluded. Details below: \r\n\r\nWith ctc_weight=1.0, **ctc_beam** becomes the size of whole vocabulary (including \\<blank\\> token)\r\n\r\nhttps://github.com/espnet/espnet/blob/28ce90a17148afcb36f4e593966911b9c3a6230b/espnet/nets/pytorch_backend/e2e_asr_transformer.py#L291-L296\r\n\r\nThen \\<blank\\> token-id will be included in **local_best_ids**, and prefix-score computed. To my understanding, \\<blank\\> should be excluded here.\r\n\r\nhttps://github.com/espnet/espnet/blob/28ce90a17148afcb36f4e593966911b9c3a6230b/espnet/nets/pytorch_backend/e2e_asr_transformer.py#L328-L335\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/espnet/espnet/issues/1508/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/espnet/espnet/issues/1508/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/espnet/espnet/issues/1475", "repository_url": "https://api.github.com/repos/espnet/espnet", "labels_url": "https://api.github.com/repos/espnet/espnet/issues/1475/labels{/name}", "comments_url": "https://api.github.com/repos/espnet/espnet/issues/1475/comments", "events_url": "https://api.github.com/repos/espnet/espnet/issues/1475/events", "html_url": "https://github.com/espnet/espnet/issues/1475", "id": 542550752, "node_id": "MDU6SXNzdWU1NDI1NTA3NTI=", "number": 1475, "title": "transformer bug", "user": {"login": "kaituoxu", "id": 14189886, "node_id": "MDQ6VXNlcjE0MTg5ODg2", "avatar_url": "https://avatars.githubusercontent.com/u/14189886?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kaituoxu", "html_url": "https://github.com/kaituoxu", "followers_url": "https://api.github.com/users/kaituoxu/followers", "following_url": "https://api.github.com/users/kaituoxu/following{/other_user}", "gists_url": "https://api.github.com/users/kaituoxu/gists{/gist_id}", "starred_url": "https://api.github.com/users/kaituoxu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kaituoxu/subscriptions", "organizations_url": "https://api.github.com/users/kaituoxu/orgs", "repos_url": "https://api.github.com/users/kaituoxu/repos", "events_url": "https://api.github.com/users/kaituoxu/events{/privacy}", "received_events_url": "https://api.github.com/users/kaituoxu/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 777173273, "node_id": "MDU6TGFiZWw3NzcxNzMyNzM=", "url": "https://api.github.com/repos/espnet/espnet/labels/Bug", "name": "Bug", "color": "ee0701", "default": false, "description": "bug should be fixed"}], "state": "closed", "locked": false, "assignee": {"login": "ShigekiKarita", "id": 6745326, "node_id": "MDQ6VXNlcjY3NDUzMjY=", "avatar_url": "https://avatars.githubusercontent.com/u/6745326?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ShigekiKarita", "html_url": "https://github.com/ShigekiKarita", "followers_url": "https://api.github.com/users/ShigekiKarita/followers", "following_url": "https://api.github.com/users/ShigekiKarita/following{/other_user}", "gists_url": "https://api.github.com/users/ShigekiKarita/gists{/gist_id}", "starred_url": "https://api.github.com/users/ShigekiKarita/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ShigekiKarita/subscriptions", "organizations_url": "https://api.github.com/users/ShigekiKarita/orgs", "repos_url": "https://api.github.com/users/ShigekiKarita/repos", "events_url": "https://api.github.com/users/ShigekiKarita/events{/privacy}", "received_events_url": "https://api.github.com/users/ShigekiKarita/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ShigekiKarita", "id": 6745326, "node_id": "MDQ6VXNlcjY3NDUzMjY=", "avatar_url": "https://avatars.githubusercontent.com/u/6745326?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ShigekiKarita", "html_url": "https://github.com/ShigekiKarita", "followers_url": "https://api.github.com/users/ShigekiKarita/followers", "following_url": "https://api.github.com/users/ShigekiKarita/following{/other_user}", "gists_url": "https://api.github.com/users/ShigekiKarita/gists{/gist_id}", "starred_url": "https://api.github.com/users/ShigekiKarita/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ShigekiKarita/subscriptions", "organizations_url": "https://api.github.com/users/ShigekiKarita/orgs", "repos_url": "https://api.github.com/users/ShigekiKarita/repos", "events_url": "https://api.github.com/users/ShigekiKarita/events{/privacy}", "received_events_url": "https://api.github.com/users/ShigekiKarita/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 3, "created_at": "2019-12-26T13:03:39Z", "updated_at": "2020-08-28T21:22:07Z", "closed_at": "2020-08-28T21:22:07Z", "author_association": "NONE", "active_lock_reason": null, "body": "https://github.com/espnet/espnet/blob/master/espnet/nets/pytorch_backend/e2e_asr_transformer.py#L172 should be `ys_mask = target_mask(ys_in_pad, self.eos)` ?\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/espnet/espnet/issues/1475/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/espnet/espnet/issues/1475/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/espnet/espnet/issues/1405", "repository_url": "https://api.github.com/repos/espnet/espnet", "labels_url": "https://api.github.com/repos/espnet/espnet/issues/1405/labels{/name}", "comments_url": "https://api.github.com/repos/espnet/espnet/issues/1405/comments", "events_url": "https://api.github.com/repos/espnet/espnet/issues/1405/events", "html_url": "https://github.com/espnet/espnet/issues/1405", "id": 532063205, "node_id": "MDU6SXNzdWU1MzIwNjMyMDU=", "number": 1405, "title": "Multi encoder integration test is dead but not reported in CI", "user": {"login": "ShigekiKarita", "id": 6745326, "node_id": "MDQ6VXNlcjY3NDUzMjY=", "avatar_url": "https://avatars.githubusercontent.com/u/6745326?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ShigekiKarita", "html_url": "https://github.com/ShigekiKarita", "followers_url": "https://api.github.com/users/ShigekiKarita/followers", "following_url": "https://api.github.com/users/ShigekiKarita/following{/other_user}", "gists_url": "https://api.github.com/users/ShigekiKarita/gists{/gist_id}", "starred_url": "https://api.github.com/users/ShigekiKarita/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ShigekiKarita/subscriptions", "organizations_url": "https://api.github.com/users/ShigekiKarita/orgs", "repos_url": "https://api.github.com/users/ShigekiKarita/repos", "events_url": "https://api.github.com/users/ShigekiKarita/events{/privacy}", "received_events_url": "https://api.github.com/users/ShigekiKarita/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 777173273, "node_id": "MDU6TGFiZWw3NzcxNzMyNzM=", "url": "https://api.github.com/repos/espnet/espnet/labels/Bug", "name": "Bug", "color": "ee0701", "default": false, "description": "bug should be fixed"}, {"id": 777173276, "node_id": "MDU6TGFiZWw3NzcxNzMyNzY=", "url": "https://api.github.com/repos/espnet/espnet/labels/Help%20wanted", "name": "Help wanted", "color": "3cb371", "default": false, "description": "Need help"}, {"id": 1477221622, "node_id": "MDU6TGFiZWwxNDc3MjIxNjIy", "url": "https://api.github.com/repos/espnet/espnet/labels/CI", "name": "CI", "color": "5319e7", "default": false, "description": "Travis, Circle CI, etc"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2019-12-03T15:24:17Z", "updated_at": "2019-12-14T05:52:39Z", "closed_at": "2019-12-14T05:52:39Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "https://travis-ci.org/espnet/espnet/jobs/620043261#L14985\r\n\r\nI'm afraid that this line does not work well.\r\nhttps://github.com/espnet/espnet/blob/2b9e8476b357eee78c0d5896833eeaeb0d1d5efe/ci/test_integration.sh#L8", "reactions": {"url": "https://api.github.com/repos/espnet/espnet/issues/1405/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/espnet/espnet/issues/1405/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/espnet/espnet/issues/1396", "repository_url": "https://api.github.com/repos/espnet/espnet", "labels_url": "https://api.github.com/repos/espnet/espnet/issues/1396/labels{/name}", "comments_url": "https://api.github.com/repos/espnet/espnet/issues/1396/comments", "events_url": "https://api.github.com/repos/espnet/espnet/issues/1396/events", "html_url": "https://github.com/espnet/espnet/issues/1396", "id": 529607473, "node_id": "MDU6SXNzdWU1Mjk2MDc0NzM=", "number": 1396, "title": "Fisher Callhome Spanish ST recipe: lsm-type,lsm-weight missing", "user": {"login": "roshansh-cmu", "id": 36464960, "node_id": "MDQ6VXNlcjM2NDY0OTYw", "avatar_url": "https://avatars.githubusercontent.com/u/36464960?v=4", "gravatar_id": "", "url": "https://api.github.com/users/roshansh-cmu", "html_url": "https://github.com/roshansh-cmu", "followers_url": "https://api.github.com/users/roshansh-cmu/followers", "following_url": "https://api.github.com/users/roshansh-cmu/following{/other_user}", "gists_url": "https://api.github.com/users/roshansh-cmu/gists{/gist_id}", "starred_url": "https://api.github.com/users/roshansh-cmu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/roshansh-cmu/subscriptions", "organizations_url": "https://api.github.com/users/roshansh-cmu/orgs", "repos_url": "https://api.github.com/users/roshansh-cmu/repos", "events_url": "https://api.github.com/users/roshansh-cmu/events{/privacy}", "received_events_url": "https://api.github.com/users/roshansh-cmu/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 777173273, "node_id": "MDU6TGFiZWw3NzcxNzMyNzM=", "url": "https://api.github.com/repos/espnet/espnet/labels/Bug", "name": "Bug", "color": "ee0701", "default": false, "description": "bug should be fixed"}], "state": "closed", "locked": false, "assignee": {"login": "hirofumi0810", "id": 17924227, "node_id": "MDQ6VXNlcjE3OTI0MjI3", "avatar_url": "https://avatars.githubusercontent.com/u/17924227?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hirofumi0810", "html_url": "https://github.com/hirofumi0810", "followers_url": "https://api.github.com/users/hirofumi0810/followers", "following_url": "https://api.github.com/users/hirofumi0810/following{/other_user}", "gists_url": "https://api.github.com/users/hirofumi0810/gists{/gist_id}", "starred_url": "https://api.github.com/users/hirofumi0810/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hirofumi0810/subscriptions", "organizations_url": "https://api.github.com/users/hirofumi0810/orgs", "repos_url": "https://api.github.com/users/hirofumi0810/repos", "events_url": "https://api.github.com/users/hirofumi0810/events{/privacy}", "received_events_url": "https://api.github.com/users/hirofumi0810/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "hirofumi0810", "id": 17924227, "node_id": "MDQ6VXNlcjE3OTI0MjI3", "avatar_url": "https://avatars.githubusercontent.com/u/17924227?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hirofumi0810", "html_url": "https://github.com/hirofumi0810", "followers_url": "https://api.github.com/users/hirofumi0810/followers", "following_url": "https://api.github.com/users/hirofumi0810/following{/other_user}", "gists_url": "https://api.github.com/users/hirofumi0810/gists{/gist_id}", "starred_url": "https://api.github.com/users/hirofumi0810/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hirofumi0810/subscriptions", "organizations_url": "https://api.github.com/users/hirofumi0810/orgs", "repos_url": "https://api.github.com/users/hirofumi0810/repos", "events_url": "https://api.github.com/users/hirofumi0810/events{/privacy}", "received_events_url": "https://api.github.com/users/hirofumi0810/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 5, "created_at": "2019-11-27T22:55:44Z", "updated_at": "2019-11-30T23:59:24Z", "closed_at": "2019-11-30T23:59:24Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "In espnet/bin/st_train.py, the parser was changed recently, and the conf files, and other files including e2e_st.py were not changed to reflect that. This seems to break the recipe in egs/fisher_callhome_spanish/st1/\r\nPlease check the recent commit made for that file: reverting that commit should fix the issues.\r\n\r\nThanks", "reactions": {"url": "https://api.github.com/repos/espnet/espnet/issues/1396/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/espnet/espnet/issues/1396/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/espnet/espnet/issues/1387", "repository_url": "https://api.github.com/repos/espnet/espnet", "labels_url": "https://api.github.com/repos/espnet/espnet/issues/1387/labels{/name}", "comments_url": "https://api.github.com/repos/espnet/espnet/issues/1387/comments", "events_url": "https://api.github.com/repos/espnet/espnet/issues/1387/events", "html_url": "https://github.com/espnet/espnet/issues/1387", "id": 528544416, "node_id": "MDU6SXNzdWU1Mjg1NDQ0MTY=", "number": 1387, "title": "failed to load rnnlm", "user": {"login": "Cescfangs", "id": 11382612, "node_id": "MDQ6VXNlcjExMzgyNjEy", "avatar_url": "https://avatars.githubusercontent.com/u/11382612?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Cescfangs", "html_url": "https://github.com/Cescfangs", "followers_url": "https://api.github.com/users/Cescfangs/followers", "following_url": "https://api.github.com/users/Cescfangs/following{/other_user}", "gists_url": "https://api.github.com/users/Cescfangs/gists{/gist_id}", "starred_url": "https://api.github.com/users/Cescfangs/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Cescfangs/subscriptions", "organizations_url": "https://api.github.com/users/Cescfangs/orgs", "repos_url": "https://api.github.com/users/Cescfangs/repos", "events_url": "https://api.github.com/users/Cescfangs/events{/privacy}", "received_events_url": "https://api.github.com/users/Cescfangs/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 777173273, "node_id": "MDU6TGFiZWw3NzcxNzMyNzM=", "url": "https://api.github.com/repos/espnet/espnet/labels/Bug", "name": "Bug", "color": "ee0701", "default": false, "description": "bug should be fixed"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2019-11-26T07:38:25Z", "updated_at": "2019-11-27T12:34:50Z", "closed_at": "2019-11-27T12:34:49Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Using version 0.3.1, failed to load rnnlm before ASR training:\r\n```python\r\nTraceback (most recent call last):\r\n  File \"/data1/espnet-oldbrother/egs/LAS-Online/../../espnet/bin/asr_train.py\", line 280, in <module>\r\n    main(sys.argv[1:])\r\n  File \"/data1/espnet-oldbrother/egs/LAS-Online/../../espnet/bin/asr_train.py\", line 264, in main\r\n    train(args)\r\n  File \"/home/espnet-master/tools/venv/lib/python3.7/site-packages/espnet-0.3.1-py3.7.egg/espnet/asr/pytorch_backend/asr.py\", line 246, in train\r\n  File \"/home/espnet-master/tools/venv/lib/python3.7/site-packages/torch/serialization.py\", line 367, in load\r\n    return _load(f, map_location, pickle_module)\r\n  File \"/home/espnet-master/tools/venv/lib/python3.7/site-packages/torch/serialization.py\", line 538, in _load\r\n    result = unpickler.load()\r\n  File \"/home/espnet-master/tools/venv/lib/python3.7/site-packages/torch/serialization.py\", line 504, in persistent_load\r\n    data_type(size), location)\r\n  File \"/home/espnet-master/tools/venv/lib/python3.7/site-packages/torch/serialization.py\", line 390, in restore_location\r\n    result = map_location(storage, location)\r\n  File \"/home/espnet-master/tools/venv/lib/python3.7/site-packages/torch/nn/modules/module.py\", line 489, in __call__\r\n    result = self.forward(*input, **kwargs)\r\n  File \"/home/espnet-master/tools/venv/lib/python3.7/site-packages/espnet-0.3.1-py3.7.egg/espnet/lm/pytorch_backend/lm.py\", line 116, in forward\r\n  File \"/home/espnet-master/tools/venv/lib/python3.7/site-packages/torch/nn/modules/module.py\", line 489, in __call__\r\n    result = self.forward(*input, **kwargs)\r\nTypeError: forward() missing 1 required positional argument: 'x'\r\n# Accounting: time=3 threads=1\r\n# Ended (code 1) at Tue Nov 26 07:25:17 UTC 2019, elapsed time 3 seconds\r\n```\r\nthis error came from `asr/pytorch_backend/asr.py` in `torch.load`:\r\n```python\r\n    if args.rnnlm is not None:\r\n        rnnlm_args = get_model_conf(args.rnnlm, args.rnnlm_conf)\r\n        rnnlm = lm_pytorch.ClassifierWithState(\r\n            lm_pytorch.RNNLM(\r\n                len(args.char_list), rnnlm_args.layer, rnnlm_args.unit))\r\n        torch.load(args.rnnlm, rnnlm)\r\n```\r\n to `lm/pytroch_backend/lm.py` inside `class ClassifierWithState(nn.Module).forward()`:\r\n```python\r\nstate, self.y = self.predictor(state, *args, **kwargs)\r\n```\r\nI am confused why `load` function would raise error in `forward`?", "reactions": {"url": "https://api.github.com/repos/espnet/espnet/issues/1387/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/espnet/espnet/issues/1387/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/espnet/espnet/issues/1373", "repository_url": "https://api.github.com/repos/espnet/espnet", "labels_url": "https://api.github.com/repos/espnet/espnet/issues/1373/labels{/name}", "comments_url": "https://api.github.com/repos/espnet/espnet/issues/1373/comments", "events_url": "https://api.github.com/repos/espnet/espnet/issues/1373/events", "html_url": "https://github.com/espnet/espnet/issues/1373", "id": 525007193, "node_id": "MDU6SXNzdWU1MjUwMDcxOTM=", "number": 1373, "title": "RuntimeError: Error(s) in loading state_dict for E2E", "user": {"login": "zhazl", "id": 20295041, "node_id": "MDQ6VXNlcjIwMjk1MDQx", "avatar_url": "https://avatars.githubusercontent.com/u/20295041?v=4", "gravatar_id": "", "url": "https://api.github.com/users/zhazl", "html_url": "https://github.com/zhazl", "followers_url": "https://api.github.com/users/zhazl/followers", "following_url": "https://api.github.com/users/zhazl/following{/other_user}", "gists_url": "https://api.github.com/users/zhazl/gists{/gist_id}", "starred_url": "https://api.github.com/users/zhazl/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/zhazl/subscriptions", "organizations_url": "https://api.github.com/users/zhazl/orgs", "repos_url": "https://api.github.com/users/zhazl/repos", "events_url": "https://api.github.com/users/zhazl/events{/privacy}", "received_events_url": "https://api.github.com/users/zhazl/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 777173273, "node_id": "MDU6TGFiZWw3NzcxNzMyNzM=", "url": "https://api.github.com/repos/espnet/espnet/labels/Bug", "name": "Bug", "color": "ee0701", "default": false, "description": "bug should be fixed"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2019-11-19T13:24:12Z", "updated_at": "2021-01-29T00:41:20Z", "closed_at": "2020-08-28T21:16:52Z", "author_association": "NONE", "active_lock_reason": null, "body": "\u540c\u4e00\u4e2a\u73af\u5883venv\u4e0b\u6267\u884c\u591a\u4e2a\u89e3\u7801\u64cd\u4f5c\uff0c\u51fa\u73b0\r\n  warnings.warn(warning.format(ret))\r\nTraceback (most recent call last):\r\n  File \"espnet/egs/hkust/asr1/../../../espnet/bin/asr_recog.py\", line 166, in <module>\r\n    main(sys.argv[1:])\r\n  File \"espnet/egs/hkust/asr1/../../../espnet/bin/asr_recog.py\", line 154, in main\r\n    recog(args)\r\n  File \"espnet/espnet/asr/pytorch_backend/asr.py\", line 495, in recog\r\n    torch_load(args.model, model)\r\n  File \"espnet/espnet/asr/asr_utils.py\", line 370, in torch_load\r\n    model.load_state_dict(model_state_dict)\r\n  File \"espnet/tools/venv/lib/python3.7/site-packages/torch/nn/modules/module.py\", line 769, in load_state_dict\r\n    self.__class__.__name__, \"\\n\\t\".join(error_msgs)))\r\nRuntimeError: Error(s) in loading state_dict for E2E:\r\n    Missing key(s) in state_dict: \"encoder.embed.out.1.pe\", \"decoder.embed.1.pe\".\r\n\r\n\u6709\u8c01\u51fa\u73b0\u8fc7\u8fd9\u6837\u7684\u95ee\u9898\u561b\uff1f\u6c42\u6307\u6559", "reactions": {"url": "https://api.github.com/repos/espnet/espnet/issues/1373/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/espnet/espnet/issues/1373/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/espnet/espnet/issues/1369", "repository_url": "https://api.github.com/repos/espnet/espnet", "labels_url": "https://api.github.com/repos/espnet/espnet/issues/1369/labels{/name}", "comments_url": "https://api.github.com/repos/espnet/espnet/issues/1369/comments", "events_url": "https://api.github.com/repos/espnet/espnet/issues/1369/events", "html_url": "https://github.com/espnet/espnet/issues/1369", "id": 524215470, "node_id": "MDU6SXNzdWU1MjQyMTU0NzA=", "number": 1369, "title": "Transformer on Librispeech get RuntimeError: cuDNN error: CUDNN_STATUS_BAD_PARAM", "user": {"login": "kaituoxu", "id": 14189886, "node_id": "MDQ6VXNlcjE0MTg5ODg2", "avatar_url": "https://avatars.githubusercontent.com/u/14189886?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kaituoxu", "html_url": "https://github.com/kaituoxu", "followers_url": "https://api.github.com/users/kaituoxu/followers", "following_url": "https://api.github.com/users/kaituoxu/following{/other_user}", "gists_url": "https://api.github.com/users/kaituoxu/gists{/gist_id}", "starred_url": "https://api.github.com/users/kaituoxu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kaituoxu/subscriptions", "organizations_url": "https://api.github.com/users/kaituoxu/orgs", "repos_url": "https://api.github.com/users/kaituoxu/repos", "events_url": "https://api.github.com/users/kaituoxu/events{/privacy}", "received_events_url": "https://api.github.com/users/kaituoxu/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 777173273, "node_id": "MDU6TGFiZWw3NzcxNzMyNzM=", "url": "https://api.github.com/repos/espnet/espnet/labels/Bug", "name": "Bug", "color": "ee0701", "default": false, "description": "bug should be fixed"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2019-11-18T08:40:01Z", "updated_at": "2020-08-28T21:15:36Z", "closed_at": "2020-08-28T21:15:36Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hello, when I use Librispeech's config to train Transformer model on another dataset, I get `RuntimeError: cuDNN error: CUDNN_STATUS_BAD_PARAM` after about 500 iterations when I use 8 GPU. I can run the config successfully when I use 4GPU. The detailed traceback as follows:\r\n\r\n```\r\nException in main training loop: cuDNN error: CUDNN_STATUS_BAD_PARAM\r\nTraceback (most recent call last):                                                                                                                                                              [45/368]\r\n  File \"/home/xukaituo/Project/espnet/egs/aishell2/asr1/../../../espnet/bin/asr_train.py\", line 368, in <module>\r\n    main(sys.argv[1:])\r\n  File \"/home/xukaituo/Project/espnet/egs/aishell2/asr1/../../../espnet/bin/asr_train.py\", line 349, in main\r\n    train(args)\r\n  File \"/home/xukaituo/Project/espnet/espnet/asr/pytorch_backend/asr.py\", line 623, in train\r\n    trainer.run()\r\n  File \"/home/xukaituo/Project/espnet/tools/venv/lib/python3.7/site-packages/chainer/training/trainer.py\", line 349, in run\r\n    six.reraise(*exc_info)\r\n  File \"/home/xukaituo/Project/espnet/tools/venv/lib/python3.7/site-packages/six.py\", line 693, in reraise\r\n    raise value\r\n  File \"/home/xukaituo/Project/espnet/tools/venv/lib/python3.7/site-packages/chainer/training/trainer.py\", line 316, in run\r\n    update()\r\n  File \"/home/xukaituo/Project/espnet/espnet/asr/pytorch_backend/asr.py\", line 218, in update\r\n    self.update_core()\r\n  File \"/home/xukaituo/Project/espnet/espnet/asr/pytorch_backend/asr.py\", line 187, in update_core\r\n    loss = data_parallel(self.model, x, range(self.ngpu)).mean() / self.accum_grad\r\n  File \"/home/xukaituo/Project/espnet/tools/venv/lib/python3.7/site-packages/torch/nn/parallel/data_parallel.py\", line 188, in data_parallel\r\n    outputs = parallel_apply(replicas, inputs, module_kwargs, used_device_ids)\r\n  File \"/home/xukaituo/Project/espnet/tools/venv/lib/python3.7/site-packages/torch/nn/parallel/parallel_apply.py\", line 83, in parallel_apply\r\n    raise output\r\n  File \"/home/xukaituo/Project/espnet/tools/venv/lib/python3.7/site-packages/torch/nn/parallel/parallel_apply.py\", line 59, in _worker\r\n    output = module(*input, **kwargs)\r\n  File \"/home/xukaituo/Project/espnet/tools/venv/lib/python3.7/site-packages/torch/nn/modules/module.py\", line 489, in __call__\r\n    result = self.forward(*input, **kwargs)\r\n  File \"/home/xukaituo/Project/espnet/espnet/nets/pytorch_backend/e2e_asr_transformer.py\", line 159, in forward\r\n    hs_pad, hs_mask = self.encoder(xs_pad, src_mask)\r\n  File \"/home/xukaituo/Project/espnet/tools/venv/lib/python3.7/site-packages/torch/nn/modules/module.py\", line 489, in __call__\r\n    result = self.forward(*input, **kwargs)\r\n  File \"/home/xukaituo/Project/espnet/espnet/nets/pytorch_backend/transformer/encoder.py\", line 113, in forward\r\n    xs, masks = self.embed(xs, masks)\r\n  File \"/home/xukaituo/Project/espnet/tools/venv/lib/python3.7/site-packages/torch/nn/modules/module.py\", line 489, in __call__\r\n    result = self.forward(*input, **kwargs)\r\n  File \"/home/xukaituo/Project/espnet/espnet/nets/pytorch_backend/transformer/subsampling.py\", line 36, in forward\r\n    x = self.conv(x)\r\n  File \"/home/xukaituo/Project/espnet/tools/venv/lib/python3.7/site-packages/torch/nn/modules/module.py\", line 489, in __call__\r\n    result = self.forward(*input, **kwargs)\r\n  File \"/home/xukaituo/Project/espnet/tools/venv/lib/python3.7/site-packages/torch/nn/modules/container.py\", line 92, in forward\r\n    input = module(input)\r\n  File \"/home/xukaituo/Project/espnet/tools/venv/lib/python3.7/site-packages/torch/nn/modules/module.py\", line 489, in __call__\r\n    result = self.forward(*input, **kwargs)\r\n  File \"/home/xukaituo/Project/espnet/tools/venv/lib/python3.7/site-packages/torch/nn/modules/conv.py\", line 320, in forward\r\n    self.padding, self.dilation, self.groups)\r\nRuntimeError: cuDNN error: CUDNN_STATUS_BAD_PARAM\r\n```\r\n\r\n```\r\n## Environments\r\n- date: `Mon Nov 18 16:32:38 CST 2019`\r\n- python version: `3.7.3 (default, Mar 27 2019, 22:11:17)  [GCC 7.3.0]`\r\n- espnet version: `espnet 0.5.3`\r\n- chainer version: `chainer 6.0.0`\r\n- pytorch version: `pytorch 1.0.1.post2`\r\n- Git hash: `42dd17e382157e1038787c5f8dae1ecf360797c3`\r\n- Commit date: `Tue Oct 22 12:07:23 2019 +0900`\r\n```", "reactions": {"url": "https://api.github.com/repos/espnet/espnet/issues/1369/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/espnet/espnet/issues/1369/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/espnet/espnet/issues/1361", "repository_url": "https://api.github.com/repos/espnet/espnet", "labels_url": "https://api.github.com/repos/espnet/espnet/issues/1361/labels{/name}", "comments_url": "https://api.github.com/repos/espnet/espnet/issues/1361/comments", "events_url": "https://api.github.com/repos/espnet/espnet/issues/1361/events", "html_url": "https://github.com/espnet/espnet/issues/1361", "id": 523666268, "node_id": "MDU6SXNzdWU1MjM2NjYyNjg=", "number": 1361, "title": "join_suffix.py script might affect BPE units in TED-LIUM 2 recipe", "user": {"login": "danoneata", "id": 819256, "node_id": "MDQ6VXNlcjgxOTI1Ng==", "avatar_url": "https://avatars.githubusercontent.com/u/819256?v=4", "gravatar_id": "", "url": "https://api.github.com/users/danoneata", "html_url": "https://github.com/danoneata", "followers_url": "https://api.github.com/users/danoneata/followers", "following_url": "https://api.github.com/users/danoneata/following{/other_user}", "gists_url": "https://api.github.com/users/danoneata/gists{/gist_id}", "starred_url": "https://api.github.com/users/danoneata/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/danoneata/subscriptions", "organizations_url": "https://api.github.com/users/danoneata/orgs", "repos_url": "https://api.github.com/users/danoneata/repos", "events_url": "https://api.github.com/users/danoneata/events{/privacy}", "received_events_url": "https://api.github.com/users/danoneata/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 777173273, "node_id": "MDU6TGFiZWw3NzcxNzMyNzM=", "url": "https://api.github.com/repos/espnet/espnet/labels/Bug", "name": "Bug", "color": "ee0701", "default": false, "description": "bug should be fixed"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2019-11-15T20:13:09Z", "updated_at": "2020-05-15T10:00:08Z", "closed_at": "2020-05-15T10:00:08Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Hello! When running the TED-LIUM recipe `egs/tedlium2/asr1` I have some problems with the BPE model. Namely, among the units from `data/lang_char/train_trim_sp_unigram500_units.txt` I see tokens such as\r\n```\r\nFARTHERTHANTHESUN_2005-0022785-0022859 8\r\n_1990-0059139-0059166 15\r\n_1998-0065813-0065847 16\r\n_2007-0021335-0021365 17\r\n_2010-0114108-0114304 18\r\n_2010G-0026501-0026536 19\r\n```\r\nwhich are obviously parts of the segment ids. Am I the only one experiencing this problem?\r\n\r\n---\r\n\r\nI did some debugging and the error traceback looks something along these lines:\r\n\r\n1. The file `data/train_trim_sp/text` contains lines with no text, but only the segment id; the [`cut -f 2 -d \" \"` command](https://github.com/espnet/espnet/blob/master/egs/tedlium2/asr1/run.sh#L123) will return just the segment id in this, as it doesn't find the delimiter:\r\n```\r\nCarolineLavelleFARTHERTHANTHESUN_2005-0022785-0022859\r\n```\r\n\r\n2. The empty lines appear because in the `data/train.orig/stm` there is missing a space between the gender information `<o,f0,female>` and the text `'s`:\r\n\r\n```\r\nCarolineLavelleFARTHERTHANTHESUN_2005 A CarolineLavelleFARTHERTHANTHESUN_2005 227.85 228.59 <o,f0,female>'s\r\n```\r\n\r\n3. The missing space is caused by the `local/join_suffix.py` script which [joins a word starting with an apostrophe to the previous one](https://github.com/espnet/espnet/blob/master/egs/tedlium2/asr1/local/join_suffix.py#L24-L25).", "reactions": {"url": "https://api.github.com/repos/espnet/espnet/issues/1361/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/espnet/espnet/issues/1361/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/espnet/espnet/issues/1334", "repository_url": "https://api.github.com/repos/espnet/espnet", "labels_url": "https://api.github.com/repos/espnet/espnet/issues/1334/labels{/name}", "comments_url": "https://api.github.com/repos/espnet/espnet/issues/1334/comments", "events_url": "https://api.github.com/repos/espnet/espnet/issues/1334/events", "html_url": "https://github.com/espnet/espnet/issues/1334", "id": 518362285, "node_id": "MDU6SXNzdWU1MTgzNjIyODU=", "number": 1334, "title": "Parser in e2e_asr_transducer is missing a return statment", "user": {"login": "ahmedalbahnasawy", "id": 50653875, "node_id": "MDQ6VXNlcjUwNjUzODc1", "avatar_url": "https://avatars.githubusercontent.com/u/50653875?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ahmedalbahnasawy", "html_url": "https://github.com/ahmedalbahnasawy", "followers_url": "https://api.github.com/users/ahmedalbahnasawy/followers", "following_url": "https://api.github.com/users/ahmedalbahnasawy/following{/other_user}", "gists_url": "https://api.github.com/users/ahmedalbahnasawy/gists{/gist_id}", "starred_url": "https://api.github.com/users/ahmedalbahnasawy/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ahmedalbahnasawy/subscriptions", "organizations_url": "https://api.github.com/users/ahmedalbahnasawy/orgs", "repos_url": "https://api.github.com/users/ahmedalbahnasawy/repos", "events_url": "https://api.github.com/users/ahmedalbahnasawy/events{/privacy}", "received_events_url": "https://api.github.com/users/ahmedalbahnasawy/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 777173273, "node_id": "MDU6TGFiZWw3NzcxNzMyNzM=", "url": "https://api.github.com/repos/espnet/espnet/labels/Bug", "name": "Bug", "color": "ee0701", "default": false, "description": "bug should be fixed"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2019-11-06T09:58:10Z", "updated_at": "2020-05-15T09:58:48Z", "closed_at": "2020-05-15T09:58:48Z", "author_association": "NONE", "active_lock_reason": null, "body": "In the code: https://github.com/espnet/espnet/blob/master/espnet/nets/pytorch_backend/e2e_asr_transducer.py\r\n\r\nYou're not returning parser in `add_arguments`. This throws an error when attempting to call `E2E.build()`", "reactions": {"url": "https://api.github.com/repos/espnet/espnet/issues/1334/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/espnet/espnet/issues/1334/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/espnet/espnet/issues/1301", "repository_url": "https://api.github.com/repos/espnet/espnet", "labels_url": "https://api.github.com/repos/espnet/espnet/issues/1301/labels{/name}", "comments_url": "https://api.github.com/repos/espnet/espnet/issues/1301/comments", "events_url": "https://api.github.com/repos/espnet/espnet/issues/1301/events", "html_url": "https://github.com/espnet/espnet/issues/1301", "id": 511168262, "node_id": "MDU6SXNzdWU1MTExNjgyNjI=", "number": 1301, "title": "import librosa get OSError", "user": {"login": "kaituoxu", "id": 14189886, "node_id": "MDQ6VXNlcjE0MTg5ODg2", "avatar_url": "https://avatars.githubusercontent.com/u/14189886?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kaituoxu", "html_url": "https://github.com/kaituoxu", "followers_url": "https://api.github.com/users/kaituoxu/followers", "following_url": "https://api.github.com/users/kaituoxu/following{/other_user}", "gists_url": "https://api.github.com/users/kaituoxu/gists{/gist_id}", "starred_url": "https://api.github.com/users/kaituoxu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kaituoxu/subscriptions", "organizations_url": "https://api.github.com/users/kaituoxu/orgs", "repos_url": "https://api.github.com/users/kaituoxu/repos", "events_url": "https://api.github.com/users/kaituoxu/events{/privacy}", "received_events_url": "https://api.github.com/users/kaituoxu/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 777173273, "node_id": "MDU6TGFiZWw3NzcxNzMyNzM=", "url": "https://api.github.com/repos/espnet/espnet/labels/Bug", "name": "Bug", "color": "ee0701", "default": false, "description": "bug should be fixed"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2019-10-23T08:40:07Z", "updated_at": "2019-10-25T08:22:50Z", "closed_at": "2019-10-25T08:22:50Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi, after I pass `make check_install`, I got below import error when I tried to train models. After `apt-get install libsndfile1-dev`, this error gone. Maybe need to fix this problem in related install scripts. Thx.\r\n\r\n```\r\n>>> import librosa\r\nTraceback (most recent call last):\r\n  File \"<stdin>\", line 1, in <module>\r\n  File \"/home/Project/espnet/tools/venv/lib/python3.7/site-packages/librosa/__init__.py\", line 12, in <module>\r\n    from . import core\r\n  File \"/home/Project/espnet/tools/venv/lib/python3.7/site-packages/librosa/core/__init__.py\", line 124, in <module>\r\n    from .audio import *  # pylint: disable=wildcard-import\r\n  File \"/home/Project/espnet/tools/venv/lib/python3.7/site-packages/librosa/core/audio.py\", line 10, in <module>\r\n    import soundfile as sf\r\n  File \"/home/Project/espnet/tools/venv/lib/python3.7/site-packages/soundfile.py\", line 142, in <module>\r\n    raise OSError('sndfile library not found')\r\nOSError: sndfile library not found\r\n```", "reactions": {"url": "https://api.github.com/repos/espnet/espnet/issues/1301/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/espnet/espnet/issues/1301/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/espnet/espnet/issues/1291", "repository_url": "https://api.github.com/repos/espnet/espnet", "labels_url": "https://api.github.com/repos/espnet/espnet/issues/1291/labels{/name}", "comments_url": "https://api.github.com/repos/espnet/espnet/issues/1291/comments", "events_url": "https://api.github.com/repos/espnet/espnet/issues/1291/events", "html_url": "https://github.com/espnet/espnet/issues/1291", "id": 509014904, "node_id": "MDU6SXNzdWU1MDkwMTQ5MDQ=", "number": 1291, "title": "Attention weight of Transformer TTS is wrong in inference the cache", "user": {"login": "kan-bayashi", "id": 22779813, "node_id": "MDQ6VXNlcjIyNzc5ODEz", "avatar_url": "https://avatars.githubusercontent.com/u/22779813?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kan-bayashi", "html_url": "https://github.com/kan-bayashi", "followers_url": "https://api.github.com/users/kan-bayashi/followers", "following_url": "https://api.github.com/users/kan-bayashi/following{/other_user}", "gists_url": "https://api.github.com/users/kan-bayashi/gists{/gist_id}", "starred_url": "https://api.github.com/users/kan-bayashi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kan-bayashi/subscriptions", "organizations_url": "https://api.github.com/users/kan-bayashi/orgs", "repos_url": "https://api.github.com/users/kan-bayashi/repos", "events_url": "https://api.github.com/users/kan-bayashi/events{/privacy}", "received_events_url": "https://api.github.com/users/kan-bayashi/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 777173273, "node_id": "MDU6TGFiZWw3NzcxNzMyNzM=", "url": "https://api.github.com/repos/espnet/espnet/labels/Bug", "name": "Bug", "color": "ee0701", "default": false, "description": "bug should be fixed"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/espnet/espnet/milestones/7", "html_url": "https://github.com/espnet/espnet/milestone/7", "labels_url": "https://api.github.com/repos/espnet/espnet/milestones/7/labels", "id": 4541894, "node_id": "MDk6TWlsZXN0b25lNDU0MTg5NA==", "number": 7, "title": "v.0.6.0", "description": "", "creator": {"login": "kan-bayashi", "id": 22779813, "node_id": "MDQ6VXNlcjIyNzc5ODEz", "avatar_url": "https://avatars.githubusercontent.com/u/22779813?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kan-bayashi", "html_url": "https://github.com/kan-bayashi", "followers_url": "https://api.github.com/users/kan-bayashi/followers", "following_url": "https://api.github.com/users/kan-bayashi/following{/other_user}", "gists_url": "https://api.github.com/users/kan-bayashi/gists{/gist_id}", "starred_url": "https://api.github.com/users/kan-bayashi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kan-bayashi/subscriptions", "organizations_url": "https://api.github.com/users/kan-bayashi/orgs", "repos_url": "https://api.github.com/users/kan-bayashi/repos", "events_url": "https://api.github.com/users/kan-bayashi/events{/privacy}", "received_events_url": "https://api.github.com/users/kan-bayashi/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 37, "state": "closed", "created_at": "2019-08-02T05:39:21Z", "updated_at": "2019-11-21T08:19:01Z", "due_on": null, "closed_at": "2019-11-21T08:19:01Z"}, "comments": 1, "created_at": "2019-10-18T11:13:04Z", "updated_at": "2019-11-15T00:21:34Z", "closed_at": "2019-11-15T00:21:33Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "We need to calculate the attention weight incrementally.\r\n\r\nhttps://github.com/espnet/espnet/blob/03724e6577f7dc8e56c1db3e7b07551a307b3131/espnet/nets/pytorch_backend/e2e_tts_transformer.py#L692-L697\r\n", "reactions": {"url": "https://api.github.com/repos/espnet/espnet/issues/1291/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/espnet/espnet/issues/1291/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/espnet/espnet/issues/1290", "repository_url": "https://api.github.com/repos/espnet/espnet", "labels_url": "https://api.github.com/repos/espnet/espnet/issues/1290/labels{/name}", "comments_url": "https://api.github.com/repos/espnet/espnet/issues/1290/comments", "events_url": "https://api.github.com/repos/espnet/espnet/issues/1290/events", "html_url": "https://github.com/espnet/espnet/issues/1290", "id": 509002247, "node_id": "MDU6SXNzdWU1MDkwMDIyNDc=", "number": 1290, "title": "ChainerDataLoader with multiprocessing will cause 'Can't pickle local object'", "user": {"login": "kan-bayashi", "id": 22779813, "node_id": "MDQ6VXNlcjIyNzc5ODEz", "avatar_url": "https://avatars.githubusercontent.com/u/22779813?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kan-bayashi", "html_url": "https://github.com/kan-bayashi", "followers_url": "https://api.github.com/users/kan-bayashi/followers", "following_url": "https://api.github.com/users/kan-bayashi/following{/other_user}", "gists_url": "https://api.github.com/users/kan-bayashi/gists{/gist_id}", "starred_url": "https://api.github.com/users/kan-bayashi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kan-bayashi/subscriptions", "organizations_url": "https://api.github.com/users/kan-bayashi/orgs", "repos_url": "https://api.github.com/users/kan-bayashi/repos", "events_url": "https://api.github.com/users/kan-bayashi/events{/privacy}", "received_events_url": "https://api.github.com/users/kan-bayashi/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 777173273, "node_id": "MDU6TGFiZWw3NzcxNzMyNzM=", "url": "https://api.github.com/repos/espnet/espnet/labels/Bug", "name": "Bug", "color": "ee0701", "default": false, "description": "bug should be fixed"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/espnet/espnet/milestones/7", "html_url": "https://github.com/espnet/espnet/milestone/7", "labels_url": "https://api.github.com/repos/espnet/espnet/milestones/7/labels", "id": 4541894, "node_id": "MDk6TWlsZXN0b25lNDU0MTg5NA==", "number": 7, "title": "v.0.6.0", "description": "", "creator": {"login": "kan-bayashi", "id": 22779813, "node_id": "MDQ6VXNlcjIyNzc5ODEz", "avatar_url": "https://avatars.githubusercontent.com/u/22779813?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kan-bayashi", "html_url": "https://github.com/kan-bayashi", "followers_url": "https://api.github.com/users/kan-bayashi/followers", "following_url": "https://api.github.com/users/kan-bayashi/following{/other_user}", "gists_url": "https://api.github.com/users/kan-bayashi/gists{/gist_id}", "starred_url": "https://api.github.com/users/kan-bayashi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kan-bayashi/subscriptions", "organizations_url": "https://api.github.com/users/kan-bayashi/orgs", "repos_url": "https://api.github.com/users/kan-bayashi/repos", "events_url": "https://api.github.com/users/kan-bayashi/events{/privacy}", "received_events_url": "https://api.github.com/users/kan-bayashi/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 37, "state": "closed", "created_at": "2019-08-02T05:39:21Z", "updated_at": "2019-11-21T08:19:01Z", "due_on": null, "closed_at": "2019-11-21T08:19:01Z"}, "comments": 1, "created_at": "2019-10-18T10:45:10Z", "updated_at": "2019-11-17T06:30:50Z", "closed_at": "2019-11-17T06:30:50Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "ChainerDataLoader in v.0.6.0 with multiprocessing will cause following error.\r\n\r\n```python\r\nException in main training loop: Can't pickle local object 'train.<locals>._tr_converter'\r\nTraceback (most recent call last):\r\n  File \"/home/t_hayashi/workspace5/work/espnet_repositories/espnet_tts_refactor/tools/venv/lib/python3.7/site-packages/chainer/training/trainer.py\", line 315, in run\r\n    update()\r\n  File \"/work5/t_hayashi/work/espnet_repositories/espnet_tts_refactor/espnet/tts/pytorch_backend/tts.py\", line 171, in update\r\n    self.update_core()\r\n  File \"/work5/t_hayashi/work/espnet_repositories/espnet_tts_refactor/espnet/tts/pytorch_backend/tts.py\", line 139, in update_core\r\n    batch = train_iter.next()\r\n  File \"/work5/t_hayashi/work/espnet_repositories/espnet_tts_refactor/espnet/utils/dataset.py\", line 56, in next\r\n    self.iter = iter(self.loader)\r\n  File \"/home/t_hayashi/workspace5/work/espnet_repositories/espnet_tts_refactor/tools/venv/lib/python3.7/site-packages/torch/utils/data/dataloader.py\", line 819, in __iter__\r\n    return _DataLoaderIter(self)\r\n  File \"/home/t_hayashi/workspace5/work/espnet_repositories/espnet_tts_refactor/tools/venv/lib/python3.7/site-packages/torch/utils/data/dataloader.py\", line 560, in __init__\r\n    w.start()\r\n  File \"/home/t_hayashi/workspace5/work/espnet_repositories/espnet_tts_refactor/tools/venv/lib/python3.7/multiprocessing/process.py\", line 112, in start\r\n    self._popen = self._Popen(self)\r\n  File \"/home/t_hayashi/workspace5/work/espnet_repositories/espnet_tts_refactor/tools/venv/lib/python3.7/multiprocessing/context.py\", line 223, in _Popen\r\n    return _default_context.get_context().Process._Popen(process_obj)\r\n  File \"/home/t_hayashi/workspace5/work/espnet_repositories/espnet_tts_refactor/tools/venv/lib/python3.7/multiprocessing/context.py\", line 284, in _Popen\r\n    return Popen(process_obj)\r\n  File \"/home/t_hayashi/workspace5/work/espnet_repositories/espnet_tts_refactor/tools/venv/lib/python3.7/multiprocessing/popen_spawn_posix.py\", line 32, in __init__\r\n    super().__init__(process_obj)\r\n  File \"/home/t_hayashi/workspace5/work/espnet_repositories/espnet_tts_refactor/tools/venv/lib/python3.7/multiprocessing/popen_fork.py\", line 20, in __init__\r\n    self._launch(process_obj)\r\n  File \"/home/t_hayashi/workspace5/work/espnet_repositories/espnet_tts_refactor/tools/venv/lib/python3.7/multiprocessing/popen_spawn_posix.py\", line 47, in _launch\r\n    reduction.dump(process_obj, fp)\r\n  File \"/home/t_hayashi/workspace5/work/espnet_repositories/espnet_tts_refactor/tools/venv/lib/python3.7/multiprocessing/reduction.py\", line 60, in dump\r\n    ForkingPickler(file, protocol).dump(obj)\r\nWill finalize trainer extensions and updater before reraising the exception.\r\nTraceback (most recent call last):\r\n  File \"/work5/t_hayashi/work/espnet_repositories/espnet_tts_refactor/egs/ljspeech/tts1/../../../espnet/bin/tts_train.py\", line 189, in <module>\r\n    main(sys.argv[1:])\r\n  File \"/work5/t_hayashi/work/espnet_repositories/espnet_tts_refactor/egs/ljspeech/tts1/../../../espnet/bin/tts_train.py\", line 177, in main\r\n    train(args)\r\n  File \"/work5/t_hayashi/work/espnet_repositories/espnet_tts_refactor/espnet/tts/pytorch_backend/tts.py\", line 479, in train\r\n    trainer.run()\r\n  File \"/home/t_hayashi/workspace5/work/espnet_repositories/espnet_tts_refactor/tools/venv/lib/python3.7/site-packages/chainer/training/trainer.py\", line 329, in run\r\n    six.reraise(*sys.exc_info())\r\n  File \"/home/t_hayashi/workspace5/work/espnet_repositories/espnet_tts_refactor/tools/venv/lib/python3.7/site-packages/six.py\", line 693, in reraise\r\n    raise value\r\n  File \"/home/t_hayashi/workspace5/work/espnet_repositories/espnet_tts_refactor/tools/venv/lib/python3.7/site-packages/chainer/training/trainer.py\", line 315, in run\r\n    update()\r\n  File \"/work5/t_hayashi/work/espnet_repositories/espnet_tts_refactor/espnet/tts/pytorch_backend/tts.py\", line 171, in update\r\n    self.update_core()\r\n  File \"/work5/t_hayashi/work/espnet_repositories/espnet_tts_refactor/espnet/tts/pytorch_backend/tts.py\", line 139, in update_core\r\n    batch = train_iter.next()\r\n  File \"/work5/t_hayashi/work/espnet_repositories/espnet_tts_refactor/espnet/utils/dataset.py\", line 56, in next\r\n    self.iter = iter(self.loader)\r\n  File \"/home/t_hayashi/workspace5/work/espnet_repositories/espnet_tts_refactor/tools/venv/lib/python3.7/site-packages/torch/utils/data/dataloader.py\", line 819, in __iter__\r\n    return _DataLoaderIter(self)\r\n  File \"/home/t_hayashi/workspace5/work/espnet_repositories/espnet_tts_refactor/tools/venv/lib/python3.7/site-packages/torch/utils/data/dataloader.py\", line 560, in __init__\r\n    w.start()\r\n  File \"/home/t_hayashi/workspace5/work/espnet_repositories/espnet_tts_refactor/tools/venv/lib/python3.7/multiprocessing/process.py\", line 112, in start\r\n    self._popen = self._Popen(self)\r\n  File \"/home/t_hayashi/workspace5/work/espnet_repositories/espnet_tts_refactor/tools/venv/lib/python3.7/multiprocessing/context.py\", line 223, in _Popen\r\n    return _default_context.get_context().Process._Popen(process_obj)\r\n  File \"/home/t_hayashi/workspace5/work/espnet_repositories/espnet_tts_refactor/tools/venv/lib/python3.7/multiprocessing/context.py\", line 284, in _Popen\r\n    return Popen(process_obj)\r\n  File \"/home/t_hayashi/workspace5/work/espnet_repositories/espnet_tts_refactor/tools/venv/lib/python3.7/multiprocessing/popen_spawn_posix.py\", line 32, in __init__\r\n    super().__init__(process_obj)\r\n  File \"/home/t_hayashi/workspace5/work/espnet_repositories/espnet_tts_refactor/tools/venv/lib/python3.7/multiprocessing/popen_fork.py\", line 20, in __init__\r\n    self._launch(process_obj)\r\n  File \"/home/t_hayashi/workspace5/work/espnet_repositories/espnet_tts_refactor/tools/venv/lib/python3.7/multiprocessing/popen_spawn_posix.py\", line 47, in _launch\r\n    reduction.dump(process_obj, fp)\r\n  File \"/home/t_hayashi/workspace5/work/espnet_repositories/espnet_tts_refactor/tools/venv/lib/python3.7/multiprocessing/reduction.py\", line 60, in dump\r\n    ForkingPickler(file, protocol).dump(obj)\r\nAttributeError: Can't pickle local object 'train.<locals>._tr_converter'\r\n```", "reactions": {"url": "https://api.github.com/repos/espnet/espnet/issues/1290/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/espnet/espnet/issues/1290/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/espnet/espnet/issues/1272", "repository_url": "https://api.github.com/repos/espnet/espnet", "labels_url": "https://api.github.com/repos/espnet/espnet/issues/1272/labels{/name}", "comments_url": "https://api.github.com/repos/espnet/espnet/issues/1272/comments", "events_url": "https://api.github.com/repos/espnet/espnet/issues/1272/events", "html_url": "https://github.com/espnet/espnet/issues/1272", "id": 506642156, "node_id": "MDU6SXNzdWU1MDY2NDIxNTY=", "number": 1272, "title": "A bug in the implementation of DNN-based WPE?", "user": {"login": "Emrys365", "id": 18532145, "node_id": "MDQ6VXNlcjE4NTMyMTQ1", "avatar_url": "https://avatars.githubusercontent.com/u/18532145?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Emrys365", "html_url": "https://github.com/Emrys365", "followers_url": "https://api.github.com/users/Emrys365/followers", "following_url": "https://api.github.com/users/Emrys365/following{/other_user}", "gists_url": "https://api.github.com/users/Emrys365/gists{/gist_id}", "starred_url": "https://api.github.com/users/Emrys365/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Emrys365/subscriptions", "organizations_url": "https://api.github.com/users/Emrys365/orgs", "repos_url": "https://api.github.com/users/Emrys365/repos", "events_url": "https://api.github.com/users/Emrys365/events{/privacy}", "received_events_url": "https://api.github.com/users/Emrys365/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 777173273, "node_id": "MDU6TGFiZWw3NzcxNzMyNzM=", "url": "https://api.github.com/repos/espnet/espnet/labels/Bug", "name": "Bug", "color": "ee0701", "default": false, "description": "bug should be fixed"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2019-10-14T13:07:06Z", "updated_at": "2019-10-24T05:37:36Z", "closed_at": "2019-10-24T05:37:29Z", "author_association": "COLLABORATOR", "active_lock_reason": null, "body": "Hi, I was just checking the code in the front-end part.\r\nI found that at the end of `dnn_wpe.py`, a non-inplace operation is used without using the returned value. Should `masked_fill` be replaced with `masked_fill_`?\r\n\r\nhttps://github.com/espnet/espnet/blob/33ef80069c6f42bfbccffe2ea2f8d812f1cbeaaa/espnet/nets/pytorch_backend/frontends/dnn_wpe.py#L82", "reactions": {"url": "https://api.github.com/repos/espnet/espnet/issues/1272/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/espnet/espnet/issues/1272/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/espnet/espnet/issues/1266", "repository_url": "https://api.github.com/repos/espnet/espnet", "labels_url": "https://api.github.com/repos/espnet/espnet/issues/1266/labels{/name}", "comments_url": "https://api.github.com/repos/espnet/espnet/issues/1266/comments", "events_url": "https://api.github.com/repos/espnet/espnet/issues/1266/events", "html_url": "https://github.com/espnet/espnet/issues/1266", "id": 506237573, "node_id": "MDU6SXNzdWU1MDYyMzc1NzM=", "number": 1266, "title": "Using spawn in multiprocessing causes an error", "user": {"login": "sw005320", "id": 11741550, "node_id": "MDQ6VXNlcjExNzQxNTUw", "avatar_url": "https://avatars.githubusercontent.com/u/11741550?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sw005320", "html_url": "https://github.com/sw005320", "followers_url": "https://api.github.com/users/sw005320/followers", "following_url": "https://api.github.com/users/sw005320/following{/other_user}", "gists_url": "https://api.github.com/users/sw005320/gists{/gist_id}", "starred_url": "https://api.github.com/users/sw005320/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sw005320/subscriptions", "organizations_url": "https://api.github.com/users/sw005320/orgs", "repos_url": "https://api.github.com/users/sw005320/repos", "events_url": "https://api.github.com/users/sw005320/events{/privacy}", "received_events_url": "https://api.github.com/users/sw005320/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 777173273, "node_id": "MDU6TGFiZWw3NzcxNzMyNzM=", "url": "https://api.github.com/repos/espnet/espnet/labels/Bug", "name": "Bug", "color": "ee0701", "default": false, "description": "bug should be fixed"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2019-10-12T21:06:01Z", "updated_at": "2019-10-13T01:16:16Z", "closed_at": "2019-10-13T01:16:16Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "After #1251 is merged, we encountered the following error.\r\n```\r\n# lm_train.py --config conf/lm.yaml --ngpu 1 --backend pytorch --verbose 1 --outdir exp/train_rnnlm_pytorch_lm_word100 --tensorboard-dir tensorboard/train_rnnlm_pytorch_lm_word100 --train-label data/local/wordlm_train/train.txt --valid-label data/local/wordlm_train/valid.txt --test-label data/local/wordlm_train/test.txt --resume --dict data/local/wordlm_train/wordlist_100.txt \r\n# Started at Sat Oct 12 15:09:23 UTC 2019\r\n#\r\nTraceback (most recent call last):\r\n  File \"/content/espnet/egs/an4/asr1/../../../espnet/bin/lm_train.py\", line 170, in <module>\r\n    mp.set_start_method('spawn')\r\n  File \"/usr/lib/python3.6/multiprocessing/context.py\", line 242, in set_start_method\r\n    raise RuntimeError('context has already been set')\r\nRuntimeError: context has already been set\r\n# Accounting: time=1 threads=1\r\n# Ended (code 1) at Sat Oct 12 15:09:24 UTC 2019, elapsed time 1 seconds\r\n```\r\n@kan-bayashi, can you fix it?\r\n@arendu told me that `mp.set_start_method('spawn', force=True)` may solve it.", "reactions": {"url": "https://api.github.com/repos/espnet/espnet/issues/1266/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/espnet/espnet/issues/1266/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/espnet/espnet/issues/1203", "repository_url": "https://api.github.com/repos/espnet/espnet", "labels_url": "https://api.github.com/repos/espnet/espnet/issues/1203/labels{/name}", "comments_url": "https://api.github.com/repos/espnet/espnet/issues/1203/comments", "events_url": "https://api.github.com/repos/espnet/espnet/issues/1203/events", "html_url": "https://github.com/espnet/espnet/issues/1203", "id": 495154456, "node_id": "MDU6SXNzdWU0OTUxNTQ0NTY=", "number": 1203, "title": "Some bugs in training", "user": {"login": "CherrieWang97", "id": 42909567, "node_id": "MDQ6VXNlcjQyOTA5NTY3", "avatar_url": "https://avatars.githubusercontent.com/u/42909567?v=4", "gravatar_id": "", "url": "https://api.github.com/users/CherrieWang97", "html_url": "https://github.com/CherrieWang97", "followers_url": "https://api.github.com/users/CherrieWang97/followers", "following_url": "https://api.github.com/users/CherrieWang97/following{/other_user}", "gists_url": "https://api.github.com/users/CherrieWang97/gists{/gist_id}", "starred_url": "https://api.github.com/users/CherrieWang97/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/CherrieWang97/subscriptions", "organizations_url": "https://api.github.com/users/CherrieWang97/orgs", "repos_url": "https://api.github.com/users/CherrieWang97/repos", "events_url": "https://api.github.com/users/CherrieWang97/events{/privacy}", "received_events_url": "https://api.github.com/users/CherrieWang97/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 777173273, "node_id": "MDU6TGFiZWw3NzcxNzMyNzM=", "url": "https://api.github.com/repos/espnet/espnet/labels/Bug", "name": "Bug", "color": "ee0701", "default": false, "description": "bug should be fixed"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2019-09-18T11:03:43Z", "updated_at": "2020-08-28T21:15:03Z", "closed_at": "2020-08-28T21:15:03Z", "author_association": "NONE", "active_lock_reason": null, "body": "I find some bugs in mt.py and asr.py\r\n\r\nIn branch master, the code in espnet/mt/pytorch_backend/mt.py line 225-226:\r\n\r\n` updater = CustomUpdater(\r\n        model, args.grad_clip, train_iter, optimizer, converter, device, args.ngpu, args.accum_grad)`\r\n\r\nIt lacks parameter `grad_noise` as the initialization function for `CustomUpdater` is defined as:\r\n\r\n`def __init__(self, model, grad_clip_threshold, train_iter,\r\n                 optimizer, converter, device, ngpu, grad_noise=False, accum_grad=1, use_apex=False):`   (line 154-155 in espnet/asr/pytorch_backend/asr.py)\r\n\r\nThus, `grad_noise` is set to args.accum_grad which is `1` by default.  This bug exists in other branches.\r\n\r\nIn branch v.0.6.0, in espnet/st/pytorch_backend/st.py line 93-94:\r\n` ys_pad_asr = None`\r\nIt will cause error when run updater or evaluator, in espnet/asr/pytroch_backend/asr.py line 113 and 171:\r\n`x = tuple(arr.to(self.device) for arr in batch)'\r\n\r\nsince `ys_pad_asr` is NoneType.\r\nIt should be\r\n`x = tuple(arr.to(self.device) if arr is not None else None for arr in batch)`\r\n\r\n\r\n\r\n\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/espnet/espnet/issues/1203/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/espnet/espnet/issues/1203/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/espnet/espnet/issues/1200", "repository_url": "https://api.github.com/repos/espnet/espnet", "labels_url": "https://api.github.com/repos/espnet/espnet/issues/1200/labels{/name}", "comments_url": "https://api.github.com/repos/espnet/espnet/issues/1200/comments", "events_url": "https://api.github.com/repos/espnet/espnet/issues/1200/events", "html_url": "https://github.com/espnet/espnet/issues/1200", "id": 494556312, "node_id": "MDU6SXNzdWU0OTQ1NTYzMTI=", "number": 1200, "title": "Colab link in Docs > Speech Recognition Library is broken", "user": {"login": "juandspy", "id": 42124482, "node_id": "MDQ6VXNlcjQyMTI0NDgy", "avatar_url": "https://avatars.githubusercontent.com/u/42124482?v=4", "gravatar_id": "", "url": "https://api.github.com/users/juandspy", "html_url": "https://github.com/juandspy", "followers_url": "https://api.github.com/users/juandspy/followers", "following_url": "https://api.github.com/users/juandspy/following{/other_user}", "gists_url": "https://api.github.com/users/juandspy/gists{/gist_id}", "starred_url": "https://api.github.com/users/juandspy/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/juandspy/subscriptions", "organizations_url": "https://api.github.com/users/juandspy/orgs", "repos_url": "https://api.github.com/users/juandspy/repos", "events_url": "https://api.github.com/users/juandspy/events{/privacy}", "received_events_url": "https://api.github.com/users/juandspy/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 777173273, "node_id": "MDU6TGFiZWw3NzcxNzMyNzM=", "url": "https://api.github.com/repos/espnet/espnet/labels/Bug", "name": "Bug", "color": "ee0701", "default": false, "description": "bug should be fixed"}], "state": "closed", "locked": false, "assignee": {"login": "ShigekiKarita", "id": 6745326, "node_id": "MDQ6VXNlcjY3NDUzMjY=", "avatar_url": "https://avatars.githubusercontent.com/u/6745326?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ShigekiKarita", "html_url": "https://github.com/ShigekiKarita", "followers_url": "https://api.github.com/users/ShigekiKarita/followers", "following_url": "https://api.github.com/users/ShigekiKarita/following{/other_user}", "gists_url": "https://api.github.com/users/ShigekiKarita/gists{/gist_id}", "starred_url": "https://api.github.com/users/ShigekiKarita/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ShigekiKarita/subscriptions", "organizations_url": "https://api.github.com/users/ShigekiKarita/orgs", "repos_url": "https://api.github.com/users/ShigekiKarita/repos", "events_url": "https://api.github.com/users/ShigekiKarita/events{/privacy}", "received_events_url": "https://api.github.com/users/ShigekiKarita/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ShigekiKarita", "id": 6745326, "node_id": "MDQ6VXNlcjY3NDUzMjY=", "avatar_url": "https://avatars.githubusercontent.com/u/6745326?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ShigekiKarita", "html_url": "https://github.com/ShigekiKarita", "followers_url": "https://api.github.com/users/ShigekiKarita/followers", "following_url": "https://api.github.com/users/ShigekiKarita/following{/other_user}", "gists_url": "https://api.github.com/users/ShigekiKarita/gists{/gist_id}", "starred_url": "https://api.github.com/users/ShigekiKarita/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ShigekiKarita/subscriptions", "organizations_url": "https://api.github.com/users/ShigekiKarita/orgs", "repos_url": "https://api.github.com/users/ShigekiKarita/repos", "events_url": "https://api.github.com/users/ShigekiKarita/events{/privacy}", "received_events_url": "https://api.github.com/users/ShigekiKarita/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 1, "created_at": "2019-09-17T11:07:46Z", "updated_at": "2019-09-28T05:33:33Z", "closed_at": "2019-09-28T05:33:33Z", "author_association": "NONE", "active_lock_reason": null, "body": "The [link ](https://colab.research.google.com/github/espnet/notebook/asr_library.ipynb) on the [documentation](https://espnet.github.io/espnet/notebook/asr_library.html#) redirects to a non valid notebook. \r\nIt should redirect to https://colab.research.google.com/github/espnet/notebook/blob/master/asr_library.ipynb.\r\nI can't find the web file in the repo to make a Pull Request.", "reactions": {"url": "https://api.github.com/repos/espnet/espnet/issues/1200/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/espnet/espnet/issues/1200/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/espnet/espnet/issues/1187", "repository_url": "https://api.github.com/repos/espnet/espnet", "labels_url": "https://api.github.com/repos/espnet/espnet/issues/1187/labels{/name}", "comments_url": "https://api.github.com/repos/espnet/espnet/issues/1187/comments", "events_url": "https://api.github.com/repos/espnet/espnet/issues/1187/events", "html_url": "https://github.com/espnet/espnet/issues/1187", "id": 490764137, "node_id": "MDU6SXNzdWU0OTA3NjQxMzc=", "number": 1187, "title": "error when decoding TIMIT", "user": {"login": "TParcollet", "id": 11910731, "node_id": "MDQ6VXNlcjExOTEwNzMx", "avatar_url": "https://avatars.githubusercontent.com/u/11910731?v=4", "gravatar_id": "", "url": "https://api.github.com/users/TParcollet", "html_url": "https://github.com/TParcollet", "followers_url": "https://api.github.com/users/TParcollet/followers", "following_url": "https://api.github.com/users/TParcollet/following{/other_user}", "gists_url": "https://api.github.com/users/TParcollet/gists{/gist_id}", "starred_url": "https://api.github.com/users/TParcollet/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/TParcollet/subscriptions", "organizations_url": "https://api.github.com/users/TParcollet/orgs", "repos_url": "https://api.github.com/users/TParcollet/repos", "events_url": "https://api.github.com/users/TParcollet/events{/privacy}", "received_events_url": "https://api.github.com/users/TParcollet/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 777173273, "node_id": "MDU6TGFiZWw3NzcxNzMyNzM=", "url": "https://api.github.com/repos/espnet/espnet/labels/Bug", "name": "Bug", "color": "ee0701", "default": false, "description": "bug should be fixed"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 14, "created_at": "2019-09-08T14:55:18Z", "updated_at": "2020-05-15T09:54:43Z", "closed_at": "2020-05-15T09:54:43Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi there,\r\n\r\nJust running the run.sh of the TIMIT receipe gives me:\r\n<img width=\"690\" alt=\"Capture d\u2019\u00e9cran 2019-09-08 \u00e0 16 53 27\" src=\"https://user-images.githubusercontent.com/11910731/64490028-68949100-d259-11e9-85a6-0f4e87745e45.png\">\r\n\r\nAny idea? ", "reactions": {"url": "https://api.github.com/repos/espnet/espnet/issues/1187/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/espnet/espnet/issues/1187/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/espnet/espnet/issues/1156", "repository_url": "https://api.github.com/repos/espnet/espnet", "labels_url": "https://api.github.com/repos/espnet/espnet/issues/1156/labels{/name}", "comments_url": "https://api.github.com/repos/espnet/espnet/issues/1156/comments", "events_url": "https://api.github.com/repos/espnet/espnet/issues/1156/events", "html_url": "https://github.com/espnet/espnet/issues/1156", "id": 487302458, "node_id": "MDU6SXNzdWU0ODczMDI0NTg=", "number": 1156, "title": "Beam Search limits nbest_hyps to beam size instead of just sorting", "user": {"login": "Geish", "id": 19880834, "node_id": "MDQ6VXNlcjE5ODgwODM0", "avatar_url": "https://avatars.githubusercontent.com/u/19880834?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Geish", "html_url": "https://github.com/Geish", "followers_url": "https://api.github.com/users/Geish/followers", "following_url": "https://api.github.com/users/Geish/following{/other_user}", "gists_url": "https://api.github.com/users/Geish/gists{/gist_id}", "starred_url": "https://api.github.com/users/Geish/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Geish/subscriptions", "organizations_url": "https://api.github.com/users/Geish/orgs", "repos_url": "https://api.github.com/users/Geish/repos", "events_url": "https://api.github.com/users/Geish/events{/privacy}", "received_events_url": "https://api.github.com/users/Geish/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 777173273, "node_id": "MDU6TGFiZWw3NzcxNzMyNzM=", "url": "https://api.github.com/repos/espnet/espnet/labels/Bug", "name": "Bug", "color": "ee0701", "default": false, "description": "bug should be fixed"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2019-08-30T06:02:13Z", "updated_at": "2019-08-31T13:33:20Z", "closed_at": "2019-08-31T13:33:20Z", "author_association": "NONE", "active_lock_reason": null, "body": "https://github.com/espnet/espnet/blob/3f67cab64690806b6db8d46c32b2ddac8cc93479/espnet/nets/beam_search.py#L313\r\n\r\n`top_beam_hyps` limits the input's size to `self.beam_size`, which is incorrect when `self.beam_size` is less than `args.nbest` \u2014 I suggest the following fix:\r\n\r\n```python\r\nnbest_hyps = sorted(ended_hyps, key=lambda x: x.score, reverse=True)\r\n# check number of hypotheis\r\nif len(nbest_hyps) == 0:\r\n    logging.warning('there is no N-best results, perform recognition again with smaller minlenratio.')\r\n    return [] if minlenratio < 0.1 else self.forward(x, maxlenratio, max(0.0, minlenratio - 0.1))\r\n\r\n```\r\nThe above also fixes the problem with infinite recursion when `minlenratio` is < 0.1", "reactions": {"url": "https://api.github.com/repos/espnet/espnet/issues/1156/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/espnet/espnet/issues/1156/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/espnet/espnet/issues/1154", "repository_url": "https://api.github.com/repos/espnet/espnet", "labels_url": "https://api.github.com/repos/espnet/espnet/issues/1154/labels{/name}", "comments_url": "https://api.github.com/repos/espnet/espnet/issues/1154/comments", "events_url": "https://api.github.com/repos/espnet/espnet/issues/1154/events", "html_url": "https://github.com/espnet/espnet/issues/1154", "id": 487246576, "node_id": "MDU6SXNzdWU0ODcyNDY1NzY=", "number": 1154, "title": "index is missing in doc", "user": {"login": "ShigekiKarita", "id": 6745326, "node_id": "MDQ6VXNlcjY3NDUzMjY=", "avatar_url": "https://avatars.githubusercontent.com/u/6745326?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ShigekiKarita", "html_url": "https://github.com/ShigekiKarita", "followers_url": "https://api.github.com/users/ShigekiKarita/followers", "following_url": "https://api.github.com/users/ShigekiKarita/following{/other_user}", "gists_url": "https://api.github.com/users/ShigekiKarita/gists{/gist_id}", "starred_url": "https://api.github.com/users/ShigekiKarita/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ShigekiKarita/subscriptions", "organizations_url": "https://api.github.com/users/ShigekiKarita/orgs", "repos_url": "https://api.github.com/users/ShigekiKarita/repos", "events_url": "https://api.github.com/users/ShigekiKarita/events{/privacy}", "received_events_url": "https://api.github.com/users/ShigekiKarita/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 777173273, "node_id": "MDU6TGFiZWw3NzcxNzMyNzM=", "url": "https://api.github.com/repos/espnet/espnet/labels/Bug", "name": "Bug", "color": "ee0701", "default": false, "description": "bug should be fixed"}], "state": "closed", "locked": false, "assignee": {"login": "ShigekiKarita", "id": 6745326, "node_id": "MDQ6VXNlcjY3NDUzMjY=", "avatar_url": "https://avatars.githubusercontent.com/u/6745326?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ShigekiKarita", "html_url": "https://github.com/ShigekiKarita", "followers_url": "https://api.github.com/users/ShigekiKarita/followers", "following_url": "https://api.github.com/users/ShigekiKarita/following{/other_user}", "gists_url": "https://api.github.com/users/ShigekiKarita/gists{/gist_id}", "starred_url": "https://api.github.com/users/ShigekiKarita/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ShigekiKarita/subscriptions", "organizations_url": "https://api.github.com/users/ShigekiKarita/orgs", "repos_url": "https://api.github.com/users/ShigekiKarita/repos", "events_url": "https://api.github.com/users/ShigekiKarita/events{/privacy}", "received_events_url": "https://api.github.com/users/ShigekiKarita/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ShigekiKarita", "id": 6745326, "node_id": "MDQ6VXNlcjY3NDUzMjY=", "avatar_url": "https://avatars.githubusercontent.com/u/6745326?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ShigekiKarita", "html_url": "https://github.com/ShigekiKarita", "followers_url": "https://api.github.com/users/ShigekiKarita/followers", "following_url": "https://api.github.com/users/ShigekiKarita/following{/other_user}", "gists_url": "https://api.github.com/users/ShigekiKarita/gists{/gist_id}", "starred_url": "https://api.github.com/users/ShigekiKarita/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ShigekiKarita/subscriptions", "organizations_url": "https://api.github.com/users/ShigekiKarita/orgs", "repos_url": "https://api.github.com/users/ShigekiKarita/repos", "events_url": "https://api.github.com/users/ShigekiKarita/events{/privacy}", "received_events_url": "https://api.github.com/users/ShigekiKarita/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 1, "created_at": "2019-08-30T01:51:36Z", "updated_at": "2019-08-30T09:28:40Z", "closed_at": "2019-08-30T09:28:40Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "see \"Indices and tables\" https://espnet.github.io/espnet/", "reactions": {"url": "https://api.github.com/repos/espnet/espnet/issues/1154/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/espnet/espnet/issues/1154/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/espnet/espnet/issues/1150", "repository_url": "https://api.github.com/repos/espnet/espnet", "labels_url": "https://api.github.com/repos/espnet/espnet/issues/1150/labels{/name}", "comments_url": "https://api.github.com/repos/espnet/espnet/issues/1150/comments", "events_url": "https://api.github.com/repos/espnet/espnet/issues/1150/events", "html_url": "https://github.com/espnet/espnet/issues/1150", "id": 486650247, "node_id": "MDU6SXNzdWU0ODY2NTAyNDc=", "number": 1150, "title": "Error training on Fisher/Switchboard data", "user": {"login": "dtkettler", "id": 33641487, "node_id": "MDQ6VXNlcjMzNjQxNDg3", "avatar_url": "https://avatars.githubusercontent.com/u/33641487?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dtkettler", "html_url": "https://github.com/dtkettler", "followers_url": "https://api.github.com/users/dtkettler/followers", "following_url": "https://api.github.com/users/dtkettler/following{/other_user}", "gists_url": "https://api.github.com/users/dtkettler/gists{/gist_id}", "starred_url": "https://api.github.com/users/dtkettler/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dtkettler/subscriptions", "organizations_url": "https://api.github.com/users/dtkettler/orgs", "repos_url": "https://api.github.com/users/dtkettler/repos", "events_url": "https://api.github.com/users/dtkettler/events{/privacy}", "received_events_url": "https://api.github.com/users/dtkettler/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 777173273, "node_id": "MDU6TGFiZWw3NzcxNzMyNzM=", "url": "https://api.github.com/repos/espnet/espnet/labels/Bug", "name": "Bug", "color": "ee0701", "default": false, "description": "bug should be fixed"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 7, "created_at": "2019-08-28T23:03:33Z", "updated_at": "2020-12-08T09:56:52Z", "closed_at": "2020-12-08T09:56:52Z", "author_association": "NONE", "active_lock_reason": null, "body": "I'm trying to run the fisher_swbd recipe.  I have all the data, set the paths appropriately, and the recipe successfully makes it through the Data preparation and Feature Generation phases so something should be right.  But then this happens:\r\n\r\n```\r\nstage 2: Dictionary and Json Data Preparation\r\nmake a non-linguistic symbol list\r\n[[skip]]\r\n[laughter]\r\n[laughter]-\r\n[noise]\r\n[noise]-\r\n[pause]\r\n[sneeze]\r\nmake a dictionary\r\n54 data/lang_1char/train_units.txt\r\nmake json files\r\n/home/dkettler/espnet/egs/fisher_swbd/asr1/../../../utils/data2json.sh --feat dump/train/deltafalse/feats.scp --nlsyms data/lang_1char/non_lang_syms.txt data/train data/lang_1char/train_units.txt\r\n/home/dkettler/espnet/egs/fisher_swbd/asr1/../../../utils/feat_to_shape.sh --cmd run.pl --nj 1 --filetype  --preprocess-conf  --verbose 0 dump/train/deltafalse/feats.scp data/train/tmp-ZjF1A/input/shape.scp\r\n/home/dkettler/espnet/egs/fisher_swbd/asr1/../../../utils/data2json.sh --feat dump/rt03_trim/deltafalse/feats.scp --nlsyms data/lang_1char/non_lang_syms.txt data/rt03_trim data/lang_1char/train_units.txt\r\n/home/dkettler/espnet/egs/fisher_swbd/asr1/../../../utils/feat_to_shape.sh --cmd run.pl --nj 1 --filetype  --preprocess-conf  --verbose 0 dump/rt03_trim/deltafalse/feats.scp data/rt03_trim/tmp-M891B/input/shape.scp\r\n/home/dkettler/espnet/egs/fisher_swbd/asr1/../../../utils/data2json.sh --feat dump/eval2000/deltafalse/feats.scp --nlsyms data/lang_1char/non_lang_syms.txt data/eval2000 data/lang_1char/train_units.txt\r\n/home/dkettler/espnet/egs/fisher_swbd/asr1/../../../utils/feat_to_shape.sh --cmd run.pl --nj 1 --filetype  --preprocess-conf  --verbose 0 dump/eval2000/deltafalse/feats.scp data/eval2000/tmp-JXa57/input/shape.scp\r\nTraceback (most recent call last):\r\n  File \"/home/dkettler/espnet/egs/fisher_swbd/asr1/../../../utils/merge_scp2json.py\", line 223, in <module>\r\n    .format(nutt, info[1], line))\r\nRuntimeError: Format error 147th line in data/eval2000/tmp-JXa57/output/text.scp:  Expecting \"<key> <value>\":\r\n>>> en_4170-A_043468-043489\r\n```\r\n\r\nClearly there is something wrong with the formatting of the eval2000 data but the actual error is a bit inscrutable to me.  I tried looking at data/eval2000/tmp-JXa57/output/text.scp but it doesn't even exist.  The whole tmp-JXa57 directory doesn't in fact.  I guess it was deleted because it was tmp?  dump/eval2000/deltafalse/feats.scp does exist and even has a line with \"en_4170-A_043468-043489\" on it...but it looks just like every other line.  The \"`Expecting <key> <value>`\" error made me think something might be missing but that does not appear to be the case.\r\n\r\nAny ideas?", "reactions": {"url": "https://api.github.com/repos/espnet/espnet/issues/1150/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/espnet/espnet/issues/1150/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/espnet/espnet/issues/1132", "repository_url": "https://api.github.com/repos/espnet/espnet", "labels_url": "https://api.github.com/repos/espnet/espnet/issues/1132/labels{/name}", "comments_url": "https://api.github.com/repos/espnet/espnet/issues/1132/comments", "events_url": "https://api.github.com/repos/espnet/espnet/issues/1132/events", "html_url": "https://github.com/espnet/espnet/issues/1132", "id": 484763465, "node_id": "MDU6SXNzdWU0ODQ3NjM0NjU=", "number": 1132, "title": "spm_train", "user": {"login": "bobchennan", "id": 939088, "node_id": "MDQ6VXNlcjkzOTA4OA==", "avatar_url": "https://avatars.githubusercontent.com/u/939088?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bobchennan", "html_url": "https://github.com/bobchennan", "followers_url": "https://api.github.com/users/bobchennan/followers", "following_url": "https://api.github.com/users/bobchennan/following{/other_user}", "gists_url": "https://api.github.com/users/bobchennan/gists{/gist_id}", "starred_url": "https://api.github.com/users/bobchennan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bobchennan/subscriptions", "organizations_url": "https://api.github.com/users/bobchennan/orgs", "repos_url": "https://api.github.com/users/bobchennan/repos", "events_url": "https://api.github.com/users/bobchennan/events{/privacy}", "received_events_url": "https://api.github.com/users/bobchennan/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 777173273, "node_id": "MDU6TGFiZWw3NzcxNzMyNzM=", "url": "https://api.github.com/repos/espnet/espnet/labels/Bug", "name": "Bug", "color": "ee0701", "default": false, "description": "bug should be fixed"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2019-08-24T01:28:00Z", "updated_at": "2019-08-24T06:46:18Z", "closed_at": "2019-08-24T06:46:18Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "same problem as https://github.com/pytorch/fairseq/pull/972 for must_c", "reactions": {"url": "https://api.github.com/repos/espnet/espnet/issues/1132/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/espnet/espnet/issues/1132/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/espnet/espnet/issues/1131", "repository_url": "https://api.github.com/repos/espnet/espnet", "labels_url": "https://api.github.com/repos/espnet/espnet/issues/1131/labels{/name}", "comments_url": "https://api.github.com/repos/espnet/espnet/issues/1131/comments", "events_url": "https://api.github.com/repos/espnet/espnet/issues/1131/events", "html_url": "https://github.com/espnet/espnet/issues/1131", "id": 484614689, "node_id": "MDU6SXNzdWU0ODQ2MTQ2ODk=", "number": 1131, "title": "Apex raise TypeError", "user": {"login": "kan-bayashi", "id": 22779813, "node_id": "MDQ6VXNlcjIyNzc5ODEz", "avatar_url": "https://avatars.githubusercontent.com/u/22779813?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kan-bayashi", "html_url": "https://github.com/kan-bayashi", "followers_url": "https://api.github.com/users/kan-bayashi/followers", "following_url": "https://api.github.com/users/kan-bayashi/following{/other_user}", "gists_url": "https://api.github.com/users/kan-bayashi/gists{/gist_id}", "starred_url": "https://api.github.com/users/kan-bayashi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kan-bayashi/subscriptions", "organizations_url": "https://api.github.com/users/kan-bayashi/orgs", "repos_url": "https://api.github.com/users/kan-bayashi/repos", "events_url": "https://api.github.com/users/kan-bayashi/events{/privacy}", "received_events_url": "https://api.github.com/users/kan-bayashi/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 777173273, "node_id": "MDU6TGFiZWw3NzcxNzMyNzM=", "url": "https://api.github.com/repos/espnet/espnet/labels/Bug", "name": "Bug", "color": "ee0701", "default": false, "description": "bug should be fixed"}], "state": "closed", "locked": false, "assignee": {"login": "ShigekiKarita", "id": 6745326, "node_id": "MDQ6VXNlcjY3NDUzMjY=", "avatar_url": "https://avatars.githubusercontent.com/u/6745326?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ShigekiKarita", "html_url": "https://github.com/ShigekiKarita", "followers_url": "https://api.github.com/users/ShigekiKarita/followers", "following_url": "https://api.github.com/users/ShigekiKarita/following{/other_user}", "gists_url": "https://api.github.com/users/ShigekiKarita/gists{/gist_id}", "starred_url": "https://api.github.com/users/ShigekiKarita/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ShigekiKarita/subscriptions", "organizations_url": "https://api.github.com/users/ShigekiKarita/orgs", "repos_url": "https://api.github.com/users/ShigekiKarita/repos", "events_url": "https://api.github.com/users/ShigekiKarita/events{/privacy}", "received_events_url": "https://api.github.com/users/ShigekiKarita/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ShigekiKarita", "id": 6745326, "node_id": "MDQ6VXNlcjY3NDUzMjY=", "avatar_url": "https://avatars.githubusercontent.com/u/6745326?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ShigekiKarita", "html_url": "https://github.com/ShigekiKarita", "followers_url": "https://api.github.com/users/ShigekiKarita/followers", "following_url": "https://api.github.com/users/ShigekiKarita/following{/other_user}", "gists_url": "https://api.github.com/users/ShigekiKarita/gists{/gist_id}", "starred_url": "https://api.github.com/users/ShigekiKarita/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ShigekiKarita/subscriptions", "organizations_url": "https://api.github.com/users/ShigekiKarita/orgs", "repos_url": "https://api.github.com/users/ShigekiKarita/repos", "events_url": "https://api.github.com/users/ShigekiKarita/events{/privacy}", "received_events_url": "https://api.github.com/users/ShigekiKarita/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 7, "created_at": "2019-08-23T16:30:59Z", "updated_at": "2019-08-24T04:33:27Z", "closed_at": "2019-08-24T04:33:27Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "I met following error when running transformer multi-gpu training.\r\n\r\n```\r\n# Environment\r\n- date: `Sat Aug 24 01:26:59 JST 2019`\r\n- python version: `3.7.3 (default, Mar 27 2019, 22:11:17)  [GCC 7.3.0]`\r\n- espnet version: `espnet 0.5.1`\r\n- chainer version: `chainer 6.0.0`\r\n- pytorch version: `pytorch 1.0.1.post2`\r\n- Git hash: `53d9979f23a3b08460ada1d5d3039b88c0962374`\r\n  - Commit date: `Sat Aug 24 01:19:50 2019 +0900`\r\n```\r\n\r\n```\r\n# asr_train.py --config conf/tuning/train_pytorch_transformer.v3.yaml --preprocess-conf conf/specaug.yaml --ngpu 4 --backend pytorch --outdir exp/train_960_pytorch_train_pytorch_transformer.v3_specaug/results --tensorboard-dir tensorboard/train_960_pytorch_train_pytorch_transformer.v3_specaug --debugmode 1 --dict data/lang_char/train_960_unigram5000_units.txt --debugdir exp/train_960_pytorch_train_pytorch_transformer.v3_specaug --minibatches 0 --verbose 0 --resume --train-json dump/train_960/deltafalse/data_unigram5000.json --valid-json dump/dev/deltafalse/data_unigram5000.json\r\n/work5/t_hayashi/work/espnet_dev/tools/venv/lib/python3.7/site-packages/torch/nn/_reduction.py:49: UserWarning: size_average and reduce args will be deprecated, please use reduction='none' instead.\r\n  warnings.warn(warning.format(ret))\r\n2019-08-24 01:26:02,701 (asr_train:286) WARNING: Skip DEBUG/INFO messages\r\nSelected optimization level O1:  Insert automatic casts around Pytorch functions and Tensor methods.\r\n\r\nDefaults for this optimization level are:\r\nenabled                : True\r\nopt_level              : O1\r\ncast_model_type        : None\r\npatch_torch_functions  : True\r\nkeep_batchnorm_fp32    : None\r\nmaster_weights         : None\r\nloss_scale             : dynamic\r\nProcessing user overrides (additional kwargs that are not None)...\r\nAfter processing overrides, optimization options are:\r\nenabled                : True\r\nopt_level              : O1\r\ncast_model_type        : None\r\npatch_torch_functions  : True\r\nkeep_batchnorm_fp32    : None\r\nmaster_weights         : None\r\nloss_scale             : dynamic\r\nTraceback (most recent call last):\r\n  File \"/work5/t_hayashi/work/espnet_dev/egs/librispeech/asr1/../../../espnet/bin/asr_train.py\", line 352, in <module>\r\n    main(sys.argv[1:])\r\n  File \"/work5/t_hayashi/work/espnet_dev/egs/librispeech/asr1/../../../espnet/bin/asr_train.py\", line 339, in main\r\n    train(args)\r\n  File \"/work5/t_hayashi/work/espnet_dev/espnet/asr/pytorch_backend/asr.py\", line 425, in train\r\n    model, optimizer = amp.initialize(model, optimizer, opt_level=args.train_dtype)\r\n  File \"/work5/t_hayashi/work/espnet_dev/tools/venv/lib/python3.7/site-packages/apex/amp/frontend.py\", line 357, in initialize\r\n    return _initialize(models, optimizers, _amp_state.opt_properties, num_losses, cast_model_outputs)\r\n  File \"/work5/t_hayashi/work/espnet_dev/tools/venv/lib/python3.7/site-packages/apex/amp/_initialize.py\", line 164, in _initialize\r\n    raise TypeError(\"optimizers must be either a single optimizer or a list of optimizers.\")\r\nTypeError: optimizers must be either a single optimizer or a list of optimizers.\r\n```", "reactions": {"url": "https://api.github.com/repos/espnet/espnet/issues/1131/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/espnet/espnet/issues/1131/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/espnet/espnet/issues/1121", "repository_url": "https://api.github.com/repos/espnet/espnet", "labels_url": "https://api.github.com/repos/espnet/espnet/issues/1121/labels{/name}", "comments_url": "https://api.github.com/repos/espnet/espnet/issues/1121/comments", "events_url": "https://api.github.com/repos/espnet/espnet/issues/1121/events", "html_url": "https://github.com/espnet/espnet/issues/1121", "id": 483804040, "node_id": "MDU6SXNzdWU0ODM4MDQwNDA=", "number": 1121, "title": "Cannot set ngpu=1 to recog_wav.sh", "user": {"login": "robothubtokyo", "id": 52391327, "node_id": "MDQ6VXNlcjUyMzkxMzI3", "avatar_url": "https://avatars.githubusercontent.com/u/52391327?v=4", "gravatar_id": "", "url": "https://api.github.com/users/robothubtokyo", "html_url": "https://github.com/robothubtokyo", "followers_url": "https://api.github.com/users/robothubtokyo/followers", "following_url": "https://api.github.com/users/robothubtokyo/following{/other_user}", "gists_url": "https://api.github.com/users/robothubtokyo/gists{/gist_id}", "starred_url": "https://api.github.com/users/robothubtokyo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/robothubtokyo/subscriptions", "organizations_url": "https://api.github.com/users/robothubtokyo/orgs", "repos_url": "https://api.github.com/users/robothubtokyo/repos", "events_url": "https://api.github.com/users/robothubtokyo/events{/privacy}", "received_events_url": "https://api.github.com/users/robothubtokyo/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 777173273, "node_id": "MDU6TGFiZWw3NzcxNzMyNzM=", "url": "https://api.github.com/repos/espnet/espnet/labels/Bug", "name": "Bug", "color": "ee0701", "default": false, "description": "bug should be fixed"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 8, "created_at": "2019-08-22T06:53:20Z", "updated_at": "2019-08-24T03:53:46Z", "closed_at": "2019-08-24T03:53:46Z", "author_association": "NONE", "active_lock_reason": null, "body": "We could run \"run.sh --ngpu 1\" and \"recog_wav.sh --ngpu 0\", but cannot run \"recog_wav.sh --ngpu 1\". How can we do?\r\nHere is the log.\r\nThank you.\r\n\r\n```\r\ncat decode/gu_csj/log/decode.log\r\n\\# asr_recog.py --config conf/decode.yaml --ngpu 1 --backend pytorch --debugmode 1 --verbose 1 --recog-json decode/gu_csj/dump/data.json --result-label decode/gu_csj/result.json --model exp/train_nodup_sp_pytorch_train/results/model.acc.best --rnnlm exp/train_rnnlm_pytorch_lm/rnnlm.model.best \r\n\\# Started at Thu Aug 22 15:21:25 JST 2019\r\n\\#\r\n2019-08-22 15:21:25,711 (asr_recog:126) WARNING: CUDA_VISIBLE_DEVICES is not set.\r\n2019-08-22 15:21:25,711 (asr_recog:137) INFO: python path = (None)\r\n2019-08-22 15:21:25,711 (asr_recog:142) INFO: set random seed = 1\r\n2019-08-22 15:21:25,711 (asr_recog:150) INFO: backend = pytorch\r\n/home/robothub/hdd_mount/espnet0.5.0/espnet/tools/venv/lib/python3.7/site-packages/sklearn/externals/joblib/externals/cloudpickle/cloudpickle.py:47: DeprecationWarning: the imp module is deprecated in favour of importlib; see the module's documentation for alternative uses\r\n  import imp\r\n2019-08-22 15:21:26,395 (deterministic_utils:24) INFO: torch type check is disabled\r\n2019-08-22 15:21:26,395 (asr_utils:361) INFO: reading a config file from exp/train_nodup_sp_pytorch_train/results/model.json\r\n2019-08-22 15:21:26,396 (asr:266) INFO: reading model parameters from exp/train_nodup_sp_pytorch_train/results/model.acc.best\r\n/home/robothub/hdd_mount/espnet0.5.0/espnet/tools/venv/lib/python3.7/site-packages/torch/nn/_reduction.py:49: UserWarning: size_average and reduce args will be deprecated, please use reduction='none' instead.\r\n  warnings.warn(warning.format(ret))\r\n2019-08-22 15:21:26,718 (asr_utils:361) INFO: reading a config file from exp/train_rnnlm_pytorch_lm/model.json\r\n2019-08-22 15:21:26,840 (asr:595) INFO: gpu id: [0]\r\n2019-08-22 15:21:35,421 (asr:614) INFO: (1/1) decoding gu_csj\r\nTraceback (most recent call last):\r\n  File \"/home/robothub/hdd_mount/espnet0.5.0/espnet/egs/csj/asr1/../../../espnet/bin/asr_recog.py\", line 169, in <module>\r\n    main(sys.argv[1:])\r\n  File \"/home/robothub/hdd_mount/espnet0.5.0/espnet/egs/csj/asr1/../../../espnet/bin/asr_recog.py\", line 157, in main\r\n    recog(args)\r\n  File \"/home/robothub/hdd_mount/espnet0.5.0/espnet/espnet/asr/pytorch_backend/asr.py\", line 647, in recog\r\n    nbest_hyps = model.recognize(feat, args, train_args.char_list, rnnlm)\r\n  File \"/home/robothub/hdd_mount/espnet0.5.0/espnet/espnet/nets/pytorch_backend/e2e_asr_transformer.py\", line 225, in recognize\r\n    enc_output, _ = self.encoder(feat, None)\r\n  File \"/home/robothub/hdd_mount/espnet0.5.0/espnet/tools/venv/lib/python3.7/site-packages/torch/nn/modules/module.py\", line 489, in __call__\r\n    result = self.forward(*input, **kwargs)\r\n  File \"/home/robothub/hdd_mount/espnet0.5.0/espnet/espnet/nets/pytorch_backend/transformer/encoder.py\", line 109, in forward\r\n    xs, masks = self.embed(xs, masks)\r\n  File \"/home/robothub/hdd_mount/espnet0.5.0/espnet/tools/venv/lib/python3.7/site-packages/torch/nn/modules/module.py\", line 489, in __call__\r\n    result = self.forward(*input, **kwargs)\r\n  File \"/home/robothub/hdd_mount/espnet0.5.0/espnet/espnet/nets/pytorch_backend/transformer/subsampling.py\", line 36, in forward\r\n    x = self.conv(x)\r\n  File \"/home/robothub/hdd_mount/espnet0.5.0/espnet/tools/venv/lib/python3.7/site-packages/torch/nn/modules/module.py\", line 489, in __call__\r\n    result = self.forward(*input, **kwargs)\r\n  File \"/home/robothub/hdd_mount/espnet0.5.0/espnet/tools/venv/lib/python3.7/site-packages/torch/nn/modules/container.py\", line 92, in forward\r\n    input = module(input)\r\n  File \"/home/robothub/hdd_mount/espnet0.5.0/espnet/tools/venv/lib/python3.7/site-packages/torch/nn/modules/module.py\", line 489, in __call__\r\n    result = self.forward(*input, **kwargs)\r\n  File \"/home/robothub/hdd_mount/espnet0.5.0/espnet/tools/venv/lib/python3.7/site-packages/torch/nn/modules/conv.py\", line 320, in forward\r\n    self.padding, self.dilation, self.groups)\r\nRuntimeError: Input type (torch.FloatTensor) and weight type (torch.cuda.FloatTensor) should be the same\r\n\\# Accounting: time=10 threads=1\r\n\\# Ended (code 1) at Thu Aug 22 15:21:35 JST 2019, elapsed time 10 seconds\r\n```", "reactions": {"url": "https://api.github.com/repos/espnet/espnet/issues/1121/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/espnet/espnet/issues/1121/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/espnet/espnet/issues/1116", "repository_url": "https://api.github.com/repos/espnet/espnet", "labels_url": "https://api.github.com/repos/espnet/espnet/issues/1116/labels{/name}", "comments_url": "https://api.github.com/repos/espnet/espnet/issues/1116/comments", "events_url": "https://api.github.com/repos/espnet/espnet/issues/1116/events", "html_url": "https://github.com/espnet/espnet/issues/1116", "id": 483171280, "node_id": "MDU6SXNzdWU0ODMxNzEyODA=", "number": 1116, "title": "missing test_set_iwslt2019.en directory in how2", "user": {"login": "sw005320", "id": 11741550, "node_id": "MDQ6VXNlcjExNzQxNTUw", "avatar_url": "https://avatars.githubusercontent.com/u/11741550?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sw005320", "html_url": "https://github.com/sw005320", "followers_url": "https://api.github.com/users/sw005320/followers", "following_url": "https://api.github.com/users/sw005320/following{/other_user}", "gists_url": "https://api.github.com/users/sw005320/gists{/gist_id}", "starred_url": "https://api.github.com/users/sw005320/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sw005320/subscriptions", "organizations_url": "https://api.github.com/users/sw005320/orgs", "repos_url": "https://api.github.com/users/sw005320/repos", "events_url": "https://api.github.com/users/sw005320/events{/privacy}", "received_events_url": "https://api.github.com/users/sw005320/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 777173273, "node_id": "MDU6TGFiZWw3NzcxNzMyNzM=", "url": "https://api.github.com/repos/espnet/espnet/labels/Bug", "name": "Bug", "color": "ee0701", "default": false, "description": "bug should be fixed"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2019-08-21T02:48:50Z", "updated_at": "2019-08-21T14:11:52Z", "closed_at": "2019-08-21T14:11:52Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "@hirofumi0810, `how2/asr1/run.sh` is failed due to the missing test_set_iwslt2019.en directory, e.g., \r\n```\r\nutils/split_scp.pl: Error opening input scp file data/test_set_iwslt2019.en/feats.scp: No such file or directory\r\n```\r\nCould you fix it?", "reactions": {"url": "https://api.github.com/repos/espnet/espnet/issues/1116/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/espnet/espnet/issues/1116/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/espnet/espnet/issues/1093", "repository_url": "https://api.github.com/repos/espnet/espnet", "labels_url": "https://api.github.com/repos/espnet/espnet/issues/1093/labels{/name}", "comments_url": "https://api.github.com/repos/espnet/espnet/issues/1093/comments", "events_url": "https://api.github.com/repos/espnet/espnet/issues/1093/events", "html_url": "https://github.com/espnet/espnet/issues/1093", "id": 481111945, "node_id": "MDU6SXNzdWU0ODExMTE5NDU=", "number": 1093, "title": "V.6.0.0 asr_train with transformer raise error", "user": {"login": "Fhrozen", "id": 11988996, "node_id": "MDQ6VXNlcjExOTg4OTk2", "avatar_url": "https://avatars.githubusercontent.com/u/11988996?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Fhrozen", "html_url": "https://github.com/Fhrozen", "followers_url": "https://api.github.com/users/Fhrozen/followers", "following_url": "https://api.github.com/users/Fhrozen/following{/other_user}", "gists_url": "https://api.github.com/users/Fhrozen/gists{/gist_id}", "starred_url": "https://api.github.com/users/Fhrozen/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Fhrozen/subscriptions", "organizations_url": "https://api.github.com/users/Fhrozen/orgs", "repos_url": "https://api.github.com/users/Fhrozen/repos", "events_url": "https://api.github.com/users/Fhrozen/events{/privacy}", "received_events_url": "https://api.github.com/users/Fhrozen/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 777173273, "node_id": "MDU6TGFiZWw3NzcxNzMyNzM=", "url": "https://api.github.com/repos/espnet/espnet/labels/Bug", "name": "Bug", "color": "ee0701", "default": false, "description": "bug should be fixed"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2019-08-15T11:36:34Z", "updated_at": "2019-08-15T12:46:36Z", "closed_at": "2019-08-15T12:46:36Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "Given that the argument `atype` was moved to e2e_asr.py, the asr.py will raise error in chainer backend when the config is set to train the transformer.\r\n\r\n```\r\nTraceback (most recent call last):\r\n  File \"/export/db/espnet/egs/voxforge/asr1/../../../espnet/bin/asr_train.py\", line 341, in <module>\r\n    main(sys.argv[1:])\r\n  File \"/export/db/espnet/egs/voxforge/asr1/../../../espnet/bin/asr_train.py\", line 325, in main\r\n    train(args)\r\n  File \"/export/db/espnet/espnet/asr/chainer_backend/asr.py\", line 81, in train\r\n    if args.atype not in ['noatt', 'dot', 'location']:\r\nAttributeError: 'Namespace' object has no attribute 'atype'\r\n```\r\n\r\nnot sure if it is required to remove:\r\n\r\n```python\r\n    # check attention type\r\n    if args.atype not in ['noatt', 'dot', 'location']:\r\n        raise NotImplementedError('chainer supports only noatt, dot, and location attention.')\r\n```\r\nor not move to another part. Let me know to submit a PR", "reactions": {"url": "https://api.github.com/repos/espnet/espnet/issues/1093/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/espnet/espnet/issues/1093/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/espnet/espnet/issues/1091", "repository_url": "https://api.github.com/repos/espnet/espnet", "labels_url": "https://api.github.com/repos/espnet/espnet/issues/1091/labels{/name}", "comments_url": "https://api.github.com/repos/espnet/espnet/issues/1091/comments", "events_url": "https://api.github.com/repos/espnet/espnet/issues/1091/events", "html_url": "https://github.com/espnet/espnet/issues/1091", "id": 481055653, "node_id": "MDU6SXNzdWU0ODEwNTU2NTM=", "number": 1091, "title": "chainer is not working with `--ngpu 0`", "user": {"login": "ShigekiKarita", "id": 6745326, "node_id": "MDQ6VXNlcjY3NDUzMjY=", "avatar_url": "https://avatars.githubusercontent.com/u/6745326?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ShigekiKarita", "html_url": "https://github.com/ShigekiKarita", "followers_url": "https://api.github.com/users/ShigekiKarita/followers", "following_url": "https://api.github.com/users/ShigekiKarita/following{/other_user}", "gists_url": "https://api.github.com/users/ShigekiKarita/gists{/gist_id}", "starred_url": "https://api.github.com/users/ShigekiKarita/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ShigekiKarita/subscriptions", "organizations_url": "https://api.github.com/users/ShigekiKarita/orgs", "repos_url": "https://api.github.com/users/ShigekiKarita/repos", "events_url": "https://api.github.com/users/ShigekiKarita/events{/privacy}", "received_events_url": "https://api.github.com/users/ShigekiKarita/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 777173273, "node_id": "MDU6TGFiZWw3NzcxNzMyNzM=", "url": "https://api.github.com/repos/espnet/espnet/labels/Bug", "name": "Bug", "color": "ee0701", "default": false, "description": "bug should be fixed"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2019-08-15T08:48:27Z", "updated_at": "2019-08-16T13:59:13Z", "closed_at": "2019-08-16T13:59:13Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "In my environment `master`, `egs/mini_an4/run.sh --ngpu 0 --backend chainer` is not working now. I attached train.log\r\n[train.log](https://github.com/espnet/espnet/files/3504860/train.log)\r\n", "reactions": {"url": "https://api.github.com/repos/espnet/espnet/issues/1091/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/espnet/espnet/issues/1091/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/espnet/espnet/issues/1088", "repository_url": "https://api.github.com/repos/espnet/espnet", "labels_url": "https://api.github.com/repos/espnet/espnet/issues/1088/labels{/name}", "comments_url": "https://api.github.com/repos/espnet/espnet/issues/1088/comments", "events_url": "https://api.github.com/repos/espnet/espnet/issues/1088/events", "html_url": "https://github.com/espnet/espnet/issues/1088", "id": 480992204, "node_id": "MDU6SXNzdWU0ODA5OTIyMDQ=", "number": 1088, "title": "Warp-ctc request for cuda_ver in CPU standalone. (Enable Warp-ctc Issues?)", "user": {"login": "Fhrozen", "id": 11988996, "node_id": "MDQ6VXNlcjExOTg4OTk2", "avatar_url": "https://avatars.githubusercontent.com/u/11988996?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Fhrozen", "html_url": "https://github.com/Fhrozen", "followers_url": "https://api.github.com/users/Fhrozen/followers", "following_url": "https://api.github.com/users/Fhrozen/following{/other_user}", "gists_url": "https://api.github.com/users/Fhrozen/gists{/gist_id}", "starred_url": "https://api.github.com/users/Fhrozen/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Fhrozen/subscriptions", "organizations_url": "https://api.github.com/users/Fhrozen/orgs", "repos_url": "https://api.github.com/users/Fhrozen/repos", "events_url": "https://api.github.com/users/Fhrozen/events{/privacy}", "received_events_url": "https://api.github.com/users/Fhrozen/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 777173273, "node_id": "MDU6TGFiZWw3NzcxNzMyNzM=", "url": "https://api.github.com/repos/espnet/espnet/labels/Bug", "name": "Bug", "color": "ee0701", "default": false, "description": "bug should be fixed"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2019-08-15T04:46:07Z", "updated_at": "2019-08-15T11:50:20Z", "closed_at": "2019-08-15T11:50:19Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "@jnishi  from the update (@ysk24ok) to warp-ctc, it request for cuda version even when there is a CPU-only pc. \r\n\r\nThe output is:\r\n```\r\nTorch was not built with CUDA support, not building warp-ctc GPU extensions.\r\nTraceback (most recent call last):\r\n  File \"setup.py\", line 66, in <module>\r\n    get_torch_version(), get_cuda_version())\r\n  File \"setup.py\", line 55, in get_cuda_version\r\n    proc = Popen(['nvcc', '--version'], stdout=PIPE, stderr=PIPE)\r\n  File \"/home/nelson/docstrings/tools/venv/lib/python3.7/subprocess.py\", line 775, in __init__\r\n    restore_signals, start_new_session)\r\n  File \"/home/nelson/docstrings/tools/venv/lib/python3.7/subprocess.py\", line 1522, in _execute_child\r\n    raise child_exception_type(errno_num, err_msg, err_filename)\r\nFileNotFoundError: [Errno 2] No such file or directory: 'nvcc': 'nvcc'\r\n```\r\nhttps://github.com/espnet/warp-ctc/blob/4209ce47774b54f6e72a9be99c98bdd7d4843a78/pytorch_binding/setup.py#L65-L66\r\n\r\nIt will be better to set to:\r\n```python\r\nif enable_gpu: \r\n    tag = 'cuda{}'.format(get_cuda_version())\r\nelse:\r\n    tag = 'cpu'\r\npackage_name = 'warpctc_pytorch{}_{}'.format(\r\n    get_torch_version(), tag)\r\n\r\n```\r\nor similar\r\n\r\n* BTW, I am not sure if it is possible to enable issues in espnet/warp-ctc.", "reactions": {"url": "https://api.github.com/repos/espnet/espnet/issues/1088/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/espnet/espnet/issues/1088/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/espnet/espnet/issues/1086", "repository_url": "https://api.github.com/repos/espnet/espnet", "labels_url": "https://api.github.com/repos/espnet/espnet/issues/1086/labels{/name}", "comments_url": "https://api.github.com/repos/espnet/espnet/issues/1086/comments", "events_url": "https://api.github.com/repos/espnet/espnet/issues/1086/events", "html_url": "https://github.com/espnet/espnet/issues/1086", "id": 480868931, "node_id": "MDU6SXNzdWU0ODA4Njg5MzE=", "number": 1086, "title": "Exception about reduction-factor and guided-attention", "user": {"login": "potato-inoue", "id": 38646618, "node_id": "MDQ6VXNlcjM4NjQ2NjE4", "avatar_url": "https://avatars.githubusercontent.com/u/38646618?v=4", "gravatar_id": "", "url": "https://api.github.com/users/potato-inoue", "html_url": "https://github.com/potato-inoue", "followers_url": "https://api.github.com/users/potato-inoue/followers", "following_url": "https://api.github.com/users/potato-inoue/following{/other_user}", "gists_url": "https://api.github.com/users/potato-inoue/gists{/gist_id}", "starred_url": "https://api.github.com/users/potato-inoue/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/potato-inoue/subscriptions", "organizations_url": "https://api.github.com/users/potato-inoue/orgs", "repos_url": "https://api.github.com/users/potato-inoue/repos", "events_url": "https://api.github.com/users/potato-inoue/events{/privacy}", "received_events_url": "https://api.github.com/users/potato-inoue/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 777173273, "node_id": "MDU6TGFiZWw3NzcxNzMyNzM=", "url": "https://api.github.com/repos/espnet/espnet/labels/Bug", "name": "Bug", "color": "ee0701", "default": false, "description": "bug should be fixed"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2019-08-14T20:18:08Z", "updated_at": "2019-08-15T01:00:46Z", "closed_at": "2019-08-15T01:00:46Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Exception happened when I set `reduction-factor:2` or `reduction-factor:3` with `use-guided-attn-loss: true`.\r\nAlso I check the scripts can run in below condition:\r\n- `reduction-factor:1` with `use-guided-attn-loss: true`\r\n- `reduction-factor:2` with `use-guided-attn-loss: false`\r\n\r\nLog about the exception is indicated below:\r\n```\r\n\u001b[JException in main training loop: The size of tensor a (864) must match the size of tensor b (432) at non-singleton dimension 1\r\nTraceback (most recent call last):\r\n  File \"/home/abelab/k_inoue/work/tool/espnet/tools/venv/lib/python3.7/site-packages/chainer/training/trainer.py\", line 315, in run\r\n    update()\r\n  File \"/home/abelab/k_inoue/work/tool/espnet/espnet/tts/pytorch_backend/tts.py\", line 153, in update\r\n    self.update_core()\r\n  File \"/home/abelab/k_inoue/work/tool/espnet/espnet/tts/pytorch_backend/tts.py\", line 134, in update_core\r\n    loss = self.model(**x).mean() / self.accum_grad\r\n  File \"/home/abelab/k_inoue/work/tool/espnet/tools/venv/lib/python3.7/site-packages/torch/nn/modules/module.py\", line 489, in __call__\r\n    result = self.forward(*input, **kwargs)\r\n  File \"/home/abelab/k_inoue/work/tool/espnet/espnet/nets/pytorch_backend/e2e_tts_tacotron2.py\", line 529, in forward\r\n    attn_loss = self.attn_loss(att_ws, ilens, olens)\r\n  File \"/home/abelab/k_inoue/work/tool/espnet/tools/venv/lib/python3.7/site-packages/torch/nn/modules/module.py\", line 489, in __call__\r\n    result = self.forward(*input, **kwargs)\r\n  File \"/home/abelab/k_inoue/work/tool/espnet/espnet/nets/pytorch_backend/e2e_tts_tacotron2.py\", line 68, in forward\r\n    losses = self.guided_attn_masks * att_ws\r\nWill finalize trainer extensions and updater before reraising the exception.\r\nTraceback (most recent call last):\r\n  File \"/home/abelab/k_inoue/work/tool/espnet/egs/blizzard17/tts1/../../../espnet/bin/tts_train.py\", line 179, in <module>\r\n    main(sys.argv[1:])\r\n  File \"/home/abelab/k_inoue/work/tool/espnet/egs/blizzard17/tts1/../../../espnet/bin/tts_train.py\", line 173, in main\r\n    train(args)\r\n  File \"/home/abelab/k_inoue/work/tool/espnet/espnet/tts/pytorch_backend/tts.py\", line 424, in train\r\n    trainer.run()\r\n  File \"/home/abelab/k_inoue/work/tool/espnet/tools/venv/lib/python3.7/site-packages/chainer/training/trainer.py\", line 329, in run\r\n    six.reraise(*sys.exc_info())\r\n  File \"/home/abelab/k_inoue/work/tool/espnet/tools/venv/lib/python3.7/site-packages/six.py\", line 693, in reraise\r\n    raise value\r\n  File \"/home/abelab/k_inoue/work/tool/espnet/tools/venv/lib/python3.7/site-packages/chainer/training/trainer.py\", line 315, in run\r\n    update()\r\n  File \"/home/abelab/k_inoue/work/tool/espnet/espnet/tts/pytorch_backend/tts.py\", line 153, in update\r\n    self.update_core()\r\n  File \"/home/abelab/k_inoue/work/tool/espnet/espnet/tts/pytorch_backend/tts.py\", line 134, in update_core\r\n    loss = self.model(**x).mean() / self.accum_grad\r\n  File \"/home/abelab/k_inoue/work/tool/espnet/tools/venv/lib/python3.7/site-packages/torch/nn/modules/module.py\", line 489, in __call__\r\n    result = self.forward(*input, **kwargs)\r\n  File \"/home/abelab/k_inoue/work/tool/espnet/espnet/nets/pytorch_backend/e2e_tts_tacotron2.py\", line 529, in forward\r\n    attn_loss = self.attn_loss(att_ws, ilens, olens)\r\n  File \"/home/abelab/k_inoue/work/tool/espnet/tools/venv/lib/python3.7/site-packages/torch/nn/modules/module.py\", line 489, in __call__\r\n    result = self.forward(*input, **kwargs)\r\n  File \"/home/abelab/k_inoue/work/tool/espnet/espnet/nets/pytorch_backend/e2e_tts_tacotron2.py\", line 68, in forward\r\n    losses = self.guided_attn_masks * att_ws\r\nRuntimeError: The size of tensor a (864) must match the size of tensor b (432) at non-singleton dimension 1\r\n```\r\n", "reactions": {"url": "https://api.github.com/repos/espnet/espnet/issues/1086/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/espnet/espnet/issues/1086/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/espnet/espnet/issues/1082", "repository_url": "https://api.github.com/repos/espnet/espnet", "labels_url": "https://api.github.com/repos/espnet/espnet/issues/1082/labels{/name}", "comments_url": "https://api.github.com/repos/espnet/espnet/issues/1082/comments", "events_url": "https://api.github.com/repos/espnet/espnet/issues/1082/events", "html_url": "https://github.com/espnet/espnet/issues/1082", "id": 480503182, "node_id": "MDU6SXNzdWU0ODA1MDMxODI=", "number": 1082, "title": "Remove RNN specific options in train.yaml for #941", "user": {"login": "ShigekiKarita", "id": 6745326, "node_id": "MDQ6VXNlcjY3NDUzMjY=", "avatar_url": "https://avatars.githubusercontent.com/u/6745326?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ShigekiKarita", "html_url": "https://github.com/ShigekiKarita", "followers_url": "https://api.github.com/users/ShigekiKarita/followers", "following_url": "https://api.github.com/users/ShigekiKarita/following{/other_user}", "gists_url": "https://api.github.com/users/ShigekiKarita/gists{/gist_id}", "starred_url": "https://api.github.com/users/ShigekiKarita/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ShigekiKarita/subscriptions", "organizations_url": "https://api.github.com/users/ShigekiKarita/orgs", "repos_url": "https://api.github.com/users/ShigekiKarita/repos", "events_url": "https://api.github.com/users/ShigekiKarita/events{/privacy}", "received_events_url": "https://api.github.com/users/ShigekiKarita/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 777173273, "node_id": "MDU6TGFiZWw3NzcxNzMyNzM=", "url": "https://api.github.com/repos/espnet/espnet/labels/Bug", "name": "Bug", "color": "ee0701", "default": false, "description": "bug should be fixed"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2019-08-14T06:27:38Z", "updated_at": "2019-08-14T06:31:29Z", "closed_at": "2019-08-14T06:30:42Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "After #941, many `run.sh` needs to be changed. For example `egs/an4/run.sh` has `--sampling-probability 0.0` in config but it is not acceptable anymore.", "reactions": {"url": "https://api.github.com/repos/espnet/espnet/issues/1082/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/espnet/espnet/issues/1082/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/espnet/espnet/issues/1075", "repository_url": "https://api.github.com/repos/espnet/espnet", "labels_url": "https://api.github.com/repos/espnet/espnet/issues/1075/labels{/name}", "comments_url": "https://api.github.com/repos/espnet/espnet/issues/1075/comments", "events_url": "https://api.github.com/repos/espnet/espnet/issues/1075/events", "html_url": "https://github.com/espnet/espnet/issues/1075", "id": 479340662, "node_id": "MDU6SXNzdWU0NzkzNDA2NjI=", "number": 1075, "title": "multi gpu lm training throws CUDA out of memory exception", "user": {"login": "fanlu", "id": 1620875, "node_id": "MDQ6VXNlcjE2MjA4NzU=", "avatar_url": "https://avatars.githubusercontent.com/u/1620875?v=4", "gravatar_id": "", "url": "https://api.github.com/users/fanlu", "html_url": "https://github.com/fanlu", "followers_url": "https://api.github.com/users/fanlu/followers", "following_url": "https://api.github.com/users/fanlu/following{/other_user}", "gists_url": "https://api.github.com/users/fanlu/gists{/gist_id}", "starred_url": "https://api.github.com/users/fanlu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/fanlu/subscriptions", "organizations_url": "https://api.github.com/users/fanlu/orgs", "repos_url": "https://api.github.com/users/fanlu/repos", "events_url": "https://api.github.com/users/fanlu/events{/privacy}", "received_events_url": "https://api.github.com/users/fanlu/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 777173273, "node_id": "MDU6TGFiZWw3NzcxNzMyNzM=", "url": "https://api.github.com/repos/espnet/espnet/labels/Bug", "name": "Bug", "color": "ee0701", "default": false, "description": "bug should be fixed"}, {"id": 1885270144, "node_id": "MDU6TGFiZWwxODg1MjcwMTQ0", "url": "https://api.github.com/repos/espnet/espnet/labels/Multiple%20GPUs", "name": "Multiple GPUs", "color": "c2e0c6", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": {"login": "ShigekiKarita", "id": 6745326, "node_id": "MDQ6VXNlcjY3NDUzMjY=", "avatar_url": "https://avatars.githubusercontent.com/u/6745326?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ShigekiKarita", "html_url": "https://github.com/ShigekiKarita", "followers_url": "https://api.github.com/users/ShigekiKarita/followers", "following_url": "https://api.github.com/users/ShigekiKarita/following{/other_user}", "gists_url": "https://api.github.com/users/ShigekiKarita/gists{/gist_id}", "starred_url": "https://api.github.com/users/ShigekiKarita/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ShigekiKarita/subscriptions", "organizations_url": "https://api.github.com/users/ShigekiKarita/orgs", "repos_url": "https://api.github.com/users/ShigekiKarita/repos", "events_url": "https://api.github.com/users/ShigekiKarita/events{/privacy}", "received_events_url": "https://api.github.com/users/ShigekiKarita/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ShigekiKarita", "id": 6745326, "node_id": "MDQ6VXNlcjY3NDUzMjY=", "avatar_url": "https://avatars.githubusercontent.com/u/6745326?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ShigekiKarita", "html_url": "https://github.com/ShigekiKarita", "followers_url": "https://api.github.com/users/ShigekiKarita/followers", "following_url": "https://api.github.com/users/ShigekiKarita/following{/other_user}", "gists_url": "https://api.github.com/users/ShigekiKarita/gists{/gist_id}", "starred_url": "https://api.github.com/users/ShigekiKarita/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ShigekiKarita/subscriptions", "organizations_url": "https://api.github.com/users/ShigekiKarita/orgs", "repos_url": "https://api.github.com/users/ShigekiKarita/repos", "events_url": "https://api.github.com/users/ShigekiKarita/events{/privacy}", "received_events_url": "https://api.github.com/users/ShigekiKarita/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 8, "created_at": "2019-08-11T07:12:56Z", "updated_at": "2020-03-24T11:26:30Z", "closed_at": "2019-08-14T10:11:31Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "There was an out of memory exception thrown when I use lm.yaml and lm_large.yaml in librispeech egs with multi gpu=4.\r\n```\r\nException in main training loop: CUDA out of memory. Tried to allocate 19.62 MiB (GPU 2; 22.38 GiB total capacity; 21.01 GiB already allocated; 10.06 MiB free; 634.29 MiB cached)                                   \r\nTraceback (most recent call last):\r\n  File \"/mnt/cfs1/asr/users/fanlu/miniconda3/lib/python3.7/site-packages/chainer/training/trainer.py\", line 316, in run                                                                                              \r\n    update()\r\n  File \"/mnt/cfs1/asr/users/fanlu/miniconda3/lib/python3.7/site-packages/chainer/training/updaters/standard_updater.py\", line 175, in update                                                                         \r\n    self.update_core()\r\n  File \"/mnt/cfs1/asr/users/fanlu/espnet/espnet/lm/pytorch_backend/lm.py\", line 277, in update_core\r\n    loss.backward()  # Backprop\r\n  File \"/mnt/cfs1/asr/users/fanlu/miniconda3/lib/python3.7/site-packages/torch/tensor.py\", line 102, in backward                                                                                                     \r\n    torch.autograd.backward(self, gradient, retain_graph, create_graph)\r\n  File \"/mnt/cfs1/asr/users/fanlu/miniconda3/lib/python3.7/site-packages/torch/autograd/__init__.py\", line 90, in backward                                                                                           \r\n    allow_unreachable=True)  # allow_unreachable flag\r\nWill finalize trainer extensions and updater before reraising the exception.\r\nTraceback (most recent call last):\r\n  File \"/mnt/cfs1/asr/users/fanlu/espnet/espnet/bin/lm_train.py\", line 156, in <module>\r\n    main(sys.argv[1:])\r\n  File \"/mnt/cfs1/asr/users/fanlu/espnet/espnet/bin/lm_train.py\", line 150, in main\r\n    train(args)\r\n  File \"/mnt/cfs1/asr/users/fanlu/espnet/espnet/lm/pytorch_backend/lm.py\", line 416, in train\r\n    trainer.run()\r\n  File \"/mnt/cfs1/asr/users/fanlu/miniconda3/lib/python3.7/site-packages/chainer/training/trainer.py\", line 349, in run                                                                                              \r\n    six.reraise(*exc_info)\r\n  File \"/mnt/cfs1/asr/users/fanlu/miniconda3/lib/python3.7/site-packages/six.py\", line 693, in reraise\r\n    raise value\r\n  File \"/mnt/cfs1/asr/users/fanlu/miniconda3/lib/python3.7/site-packages/chainer/training/trainer.py\", line 316, in run                                                                                              \r\n    update()\r\n  File \"/mnt/cfs1/asr/users/fanlu/miniconda3/lib/python3.7/site-packages/chainer/training/updaters/standard_updater.py\", line 175, in update                                                                         \r\n    self.update_core()\r\n  File \"/mnt/cfs1/asr/users/fanlu/espnet/espnet/lm/pytorch_backend/lm.py\", line 277, in update_core\r\n    loss.backward()  # Backprop\r\n  File \"/mnt/cfs1/asr/users/fanlu/miniconda3/lib/python3.7/site-packages/torch/tensor.py\", line 102, in backward                                                                                                     \r\n    torch.autograd.backward(self, gradient, retain_graph, create_graph)\r\n  File \"/mnt/cfs1/asr/users/fanlu/miniconda3/lib/python3.7/site-packages/torch/autograd/__init__.py\", line 90, in backward                                                                                           \r\n    allow_unreachable=True)  # allow_unreachable flag\r\nRuntimeError: CUDA out of memory. Tried to allocate 19.62 MiB (GPU 2; 22.38 GiB total capacity; 21.01 GiB already allocated; 10.06 MiB free; 634.29 MiB cached)                                                      \r\n# Accounting: time=746 threads=1\r\n# Finished at Sun Aug 11 14:58:25 CST 2019 with status 1\r\n```", "reactions": {"url": "https://api.github.com/repos/espnet/espnet/issues/1075/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/espnet/espnet/issues/1075/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/espnet/espnet/issues/1052", "repository_url": "https://api.github.com/repos/espnet/espnet", "labels_url": "https://api.github.com/repos/espnet/espnet/issues/1052/labels{/name}", "comments_url": "https://api.github.com/repos/espnet/espnet/issues/1052/comments", "events_url": "https://api.github.com/repos/espnet/espnet/issues/1052/events", "html_url": "https://github.com/espnet/espnet/issues/1052", "id": 477651971, "node_id": "MDU6SXNzdWU0Nzc2NTE5NzE=", "number": 1052, "title": "loss curve question", "user": {"login": "zqs01", "id": 40491290, "node_id": "MDQ6VXNlcjQwNDkxMjkw", "avatar_url": "https://avatars.githubusercontent.com/u/40491290?v=4", "gravatar_id": "", "url": "https://api.github.com/users/zqs01", "html_url": "https://github.com/zqs01", "followers_url": "https://api.github.com/users/zqs01/followers", "following_url": "https://api.github.com/users/zqs01/following{/other_user}", "gists_url": "https://api.github.com/users/zqs01/gists{/gist_id}", "starred_url": "https://api.github.com/users/zqs01/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/zqs01/subscriptions", "organizations_url": "https://api.github.com/users/zqs01/orgs", "repos_url": "https://api.github.com/users/zqs01/repos", "events_url": "https://api.github.com/users/zqs01/events{/privacy}", "received_events_url": "https://api.github.com/users/zqs01/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 777173273, "node_id": "MDU6TGFiZWw3NzcxNzMyNzM=", "url": "https://api.github.com/repos/espnet/espnet/labels/Bug", "name": "Bug", "color": "ee0701", "default": false, "description": "bug should be fixed"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2019-08-07T00:37:09Z", "updated_at": "2019-08-07T12:40:08Z", "closed_at": "2019-08-07T12:40:08Z", "author_association": "NONE", "active_lock_reason": null, "body": "![TIM\u622a\u56fe20190807082854](https://user-images.githubusercontent.com/40491290/62585860-7fa83200-b8ed-11e9-8962-e1e347efe638.png)\r\n\r\nwhen I use the Transformer for ASR and set the parameter \"mtlalpha: 0\", the loss curve can only show two. Is there any problems? Thanks.", "reactions": {"url": "https://api.github.com/repos/espnet/espnet/issues/1052/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/espnet/espnet/issues/1052/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/espnet/espnet/issues/1045", "repository_url": "https://api.github.com/repos/espnet/espnet", "labels_url": "https://api.github.com/repos/espnet/espnet/issues/1045/labels{/name}", "comments_url": "https://api.github.com/repos/espnet/espnet/issues/1045/comments", "events_url": "https://api.github.com/repos/espnet/espnet/issues/1045/events", "html_url": "https://github.com/espnet/espnet/issues/1045", "id": 476564286, "node_id": "MDU6SXNzdWU0NzY1NjQyODY=", "number": 1045, "title": "ImportError: No module named espnet.transform.transformation", "user": {"login": "zyzpower", "id": 4137584, "node_id": "MDQ6VXNlcjQxMzc1ODQ=", "avatar_url": "https://avatars.githubusercontent.com/u/4137584?v=4", "gravatar_id": "", "url": "https://api.github.com/users/zyzpower", "html_url": "https://github.com/zyzpower", "followers_url": "https://api.github.com/users/zyzpower/followers", "following_url": "https://api.github.com/users/zyzpower/following{/other_user}", "gists_url": "https://api.github.com/users/zyzpower/gists{/gist_id}", "starred_url": "https://api.github.com/users/zyzpower/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/zyzpower/subscriptions", "organizations_url": "https://api.github.com/users/zyzpower/orgs", "repos_url": "https://api.github.com/users/zyzpower/repos", "events_url": "https://api.github.com/users/zyzpower/events{/privacy}", "received_events_url": "https://api.github.com/users/zyzpower/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 777173273, "node_id": "MDU6TGFiZWw3NzcxNzMyNzM=", "url": "https://api.github.com/repos/espnet/espnet/labels/Bug", "name": "Bug", "color": "ee0701", "default": false, "description": "bug should be fixed"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2019-08-04T15:20:38Z", "updated_at": "2021-05-10T10:20:30Z", "closed_at": "2019-08-14T06:38:50Z", "author_association": "NONE", "active_lock_reason": null, "body": "For new espnet 0.4.3, which running stage 1 feature generation, when running:\r\n# compute global CMVN\r\ncompute-cmvn-stats scp:data/${train_set}/feats.scp data/${train_set}/cmvn.ark\r\nthere is one error:\r\nTraceback (most recent call last):\r\nFile \"/home/owner/expts/espnet_0.4.3_0801/egs/librispeech/asr1/../../../utils/copy-feats.py\", line 6, in <module>\r\nfrom espnet.transform.transformation import Transformation\r\nImportError: No module named espnet.transform.transformation\r\napply-cmvn --norm-vars=true data/train_100/cmvn.ark scp:exp/dump_feats/train/feats.1.scp ark:-\r\nBut the file is there.", "reactions": {"url": "https://api.github.com/repos/espnet/espnet/issues/1045/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/espnet/espnet/issues/1045/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/espnet/espnet/issues/1038", "repository_url": "https://api.github.com/repos/espnet/espnet", "labels_url": "https://api.github.com/repos/espnet/espnet/issues/1038/labels{/name}", "comments_url": "https://api.github.com/repos/espnet/espnet/issues/1038/comments", "events_url": "https://api.github.com/repos/espnet/espnet/issues/1038/events", "html_url": "https://github.com/espnet/espnet/issues/1038", "id": 476417494, "node_id": "MDU6SXNzdWU0NzY0MTc0OTQ=", "number": 1038, "title": "espnet/nets/chainer_backend/e2e_asr.py has bug", "user": {"login": "boystray", "id": 26448036, "node_id": "MDQ6VXNlcjI2NDQ4MDM2", "avatar_url": "https://avatars.githubusercontent.com/u/26448036?v=4", "gravatar_id": "", "url": "https://api.github.com/users/boystray", "html_url": "https://github.com/boystray", "followers_url": "https://api.github.com/users/boystray/followers", "following_url": "https://api.github.com/users/boystray/following{/other_user}", "gists_url": "https://api.github.com/users/boystray/gists{/gist_id}", "starred_url": "https://api.github.com/users/boystray/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/boystray/subscriptions", "organizations_url": "https://api.github.com/users/boystray/orgs", "repos_url": "https://api.github.com/users/boystray/repos", "events_url": "https://api.github.com/users/boystray/events{/privacy}", "received_events_url": "https://api.github.com/users/boystray/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 777173273, "node_id": "MDU6TGFiZWw3NzcxNzMyNzM=", "url": "https://api.github.com/repos/espnet/espnet/labels/Bug", "name": "Bug", "color": "ee0701", "default": false, "description": "bug should be fixed"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2019-08-03T05:21:08Z", "updated_at": "2019-08-03T13:49:58Z", "closed_at": "2019-08-03T13:49:40Z", "author_association": "NONE", "active_lock_reason": null, "body": "when I run egs/an4/asr1$ ./run.sh --backend chainer, there is a error\r\n\r\nstage 4: Network Training\r\nrun.pl: job failed, log is in exp/train_nodev_chainer_train_mtlalpha1.0/train.log\r\n\r\n\r\nthe following is exp/train_nodev_chainer_train_mtlalpha1.0/train.log\r\n `^[[JException in main training loop: unsupported operand type(s) for *: 'float' and 'NoneType'\r\nTraceback (most recent call last):\r\n  File \"/media/boystray/two/githome/espnet/tools/venv/lib/python3.7/site-packages/chainer/training/trainer.py\", line 316, in run\r\n    update()\r\n  File \"/media/boystray/two/githome/espnet/espnet/nets/chainer_backend/rnn/training.py\", line 111, in update\r\n    self.update_core()\r\n  File \"/media/boystray/two/githome/espnet/espnet/nets/chainer_backend/rnn/training.py\", line 91, in update_core\r\n    loss = optimizer.target(*x) / self.accum_grad\r\n  File \"/media/boystray/two/githome/espnet/tools/venv/lib/python3.7/site-packages/chainer/link.py\", line 294, in __call__\r\n    out = forward(*args, **kwargs)\r\n  File \"/media/boystray/two/githome/espnet/espnet/nets/chainer_backend/e2e_asr.py\", line 119, in forward\r\n    self.loss = alpha * loss_ctc + (1 - alpha) * loss_att\r\nWill finalize trainer extensions and updater before reraising the exception.\r\nTraceback (most recent call last):\r\n  File \"/media/boystray/two/githome/espnet/egs/an4/asr1/../../../espnet/bin/asr_train.py\", line 380, in <module>\r\n    main(sys.argv[1:])\r\n  File \"/media/boystray/two/githome/espnet/egs/an4/asr1/../../../espnet/bin/asr_train.py\", line 365, in main\r\n    train(args)\r\n  File \"/media/boystray/two/githome/espnet/espnet/asr/chainer_backend/asr.py\", line 358, in train\r\n    trainer.run()\r\n  File \"/media/boystray/two/githome/espnet/tools/venv/lib/python3.7/site-packages/chainer/training/trainer.py\", line 349, in run\r\n    six.reraise(*exc_info)\r\n  File \"/media/boystray/two/githome/espnet/tools/venv/lib/python3.7/site-packages/six.py\", line 693, in reraise\r\n    raise value\r\n  File \"/media/boystray/two/githome/espnet/tools/venv/lib/python3.7/site-packages/chainer/training/trainer.py\", line 316, in run\r\n    update()\r\n  File \"/media/boystray/two/githome/espnet/espnet/nets/chainer_backend/rnn/training.py\", line 111, in update\r\n    self.update_core()\r\n  File \"/media/boystray/two/githome/espnet/espnet/nets/chainer_backend/rnn/training.py\", line 91, in update_core\r\n    loss = optimizer.target(*x) / self.accum_grad\r\n  File \"/media/boystray/two/githome/espnet/tools/venv/lib/python3.7/site-packages/chainer/link.py\", line 294, in __call__\r\n    out = forward(*args, **kwargs)\r\n  File \"/media/boystray/two/githome/espnet/espnet/nets/chainer_backend/e2e_asr.py\", line 119, in forward\r\n    self.loss = alpha * loss_ctc + (1 - alpha) * loss_att\r\nTypeError: unsupported operand type(s) for *: 'float' and 'NoneType'`\r\n\r\nthen i found source code in espnet/nets/chainer_backend/e2e_asr.py\r\n       # 4. attention loss\r\n        if self.mtlalpha == 1:\r\n            loss_att = None\r\n            acc = None\r\n        else:\r\n            loss_att, acc = self.dec(hs, ys)\r\n        self.acc = acc\r\n        alpha = self.mtlalpha\r\n        self.loss = alpha * loss_ctc + (1 - alpha) * loss_att\r\n\r\nwhen self.mtlalpha == 1,then loss_att is None,so self.loss = alpha * loss_ctc + (1 - alpha) * loss_att will report error \"TypeError: unsupported operand type(s) for *: 'float' and 'NoneType'\"\r\n", "reactions": {"url": "https://api.github.com/repos/espnet/espnet/issues/1038/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/espnet/espnet/issues/1038/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/espnet/espnet/issues/993", "repository_url": "https://api.github.com/repos/espnet/espnet", "labels_url": "https://api.github.com/repos/espnet/espnet/issues/993/labels{/name}", "comments_url": "https://api.github.com/repos/espnet/espnet/issues/993/comments", "events_url": "https://api.github.com/repos/espnet/espnet/issues/993/events", "html_url": "https://github.com/espnet/espnet/issues/993", "id": 474319595, "node_id": "MDU6SXNzdWU0NzQzMTk1OTU=", "number": 993, "title": "The scoring script is incorrect if any pruning is done on the dictionary or in the case of word models", "user": {"login": "siddalmia", "id": 6648564, "node_id": "MDQ6VXNlcjY2NDg1NjQ=", "avatar_url": "https://avatars.githubusercontent.com/u/6648564?v=4", "gravatar_id": "", "url": "https://api.github.com/users/siddalmia", "html_url": "https://github.com/siddalmia", "followers_url": "https://api.github.com/users/siddalmia/followers", "following_url": "https://api.github.com/users/siddalmia/following{/other_user}", "gists_url": "https://api.github.com/users/siddalmia/gists{/gist_id}", "starred_url": "https://api.github.com/users/siddalmia/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/siddalmia/subscriptions", "organizations_url": "https://api.github.com/users/siddalmia/orgs", "repos_url": "https://api.github.com/users/siddalmia/repos", "events_url": "https://api.github.com/users/siddalmia/events{/privacy}", "received_events_url": "https://api.github.com/users/siddalmia/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 777173273, "node_id": "MDU6TGFiZWw3NzcxNzMyNzM=", "url": "https://api.github.com/repos/espnet/espnet/labels/Bug", "name": "Bug", "color": "ee0701", "default": false, "description": "bug should be fixed"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2019-07-30T00:56:19Z", "updated_at": "2019-07-31T15:20:40Z", "closed_at": "2019-07-31T15:20:40Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Hi @sw005320 and other developers,\r\n\r\nThe command `json2trn.py ${dir}/data.json ${dic} --num-spkrs ${num_spkrs} --refs ${dir}/ref.trn --hyps ${dir}/hyp.trn` in the `score_sclite.sh` replaces all units in reference that are not in the dictionary with unk and then scores it.\r\n\r\nThis is wrong because you are modifying the reference transcription to match your dictionary. Let's say I train a model with dictionary with only 1 term \"Mr\" and the hypothesis is \r\n\"Mr unk unk\" and reference is \"Mr John Doe\". This would give a WER of 0% because the reference would be modified to \"Mr unk unk\".  ", "reactions": {"url": "https://api.github.com/repos/espnet/espnet/issues/993/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/espnet/espnet/issues/993/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/espnet/espnet/issues/969", "repository_url": "https://api.github.com/repos/espnet/espnet", "labels_url": "https://api.github.com/repos/espnet/espnet/issues/969/labels{/name}", "comments_url": "https://api.github.com/repos/espnet/espnet/issues/969/comments", "events_url": "https://api.github.com/repos/espnet/espnet/issues/969/events", "html_url": "https://github.com/espnet/espnet/issues/969", "id": 468961930, "node_id": "MDU6SXNzdWU0Njg5NjE5MzA=", "number": 969, "title": "Cupy Import Error.", "user": {"login": "Xiaofei-Wang", "id": 15830049, "node_id": "MDQ6VXNlcjE1ODMwMDQ5", "avatar_url": "https://avatars.githubusercontent.com/u/15830049?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Xiaofei-Wang", "html_url": "https://github.com/Xiaofei-Wang", "followers_url": "https://api.github.com/users/Xiaofei-Wang/followers", "following_url": "https://api.github.com/users/Xiaofei-Wang/following{/other_user}", "gists_url": "https://api.github.com/users/Xiaofei-Wang/gists{/gist_id}", "starred_url": "https://api.github.com/users/Xiaofei-Wang/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Xiaofei-Wang/subscriptions", "organizations_url": "https://api.github.com/users/Xiaofei-Wang/orgs", "repos_url": "https://api.github.com/users/Xiaofei-Wang/repos", "events_url": "https://api.github.com/users/Xiaofei-Wang/events{/privacy}", "received_events_url": "https://api.github.com/users/Xiaofei-Wang/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 777173273, "node_id": "MDU6TGFiZWw3NzcxNzMyNzM=", "url": "https://api.github.com/repos/espnet/espnet/labels/Bug", "name": "Bug", "color": "ee0701", "default": false, "description": "bug should be fixed"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2019-07-17T03:06:18Z", "updated_at": "2019-07-31T06:14:03Z", "closed_at": "2019-07-31T06:14:03Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Does someone have the cupy import error during making the ESPnet?\r\nFor example, if I \r\n`make KALDI=/path/to/kaldi CUDA_VERSION=9.0`\r\nThe cupy 6.0 still tries to find libraries of CUDA 10.0 on default, although I have correctly set the environment.\r\n\r\nInstead of using \r\n`cupy.done: espnet.done\r\nifneq ($(strip $(CUPY_VERSION)),)\r\n\t. venv/bin/activate && pip install cupy==$(CUPY_VERSION)\r\n\ttouch cupy.done\r\nendif`\r\n\r\nI have to manually change the code to\r\n`cupy.done: espnet.done\r\nifneq ($(strip $(CUPY_VERSION)),)\r\n\t. venv/bin/activate && pip install cupy-cuda90==$(CUPY_VERSION)\r\n\ttouch cupy.done\r\nendif`\r\n\r\nI would suggest making a small modification of the Makefile: )\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/espnet/espnet/issues/969/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/espnet/espnet/issues/969/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/espnet/espnet/issues/967", "repository_url": "https://api.github.com/repos/espnet/espnet", "labels_url": "https://api.github.com/repos/espnet/espnet/issues/967/labels{/name}", "comments_url": "https://api.github.com/repos/espnet/espnet/issues/967/comments", "events_url": "https://api.github.com/repos/espnet/espnet/issues/967/events", "html_url": "https://github.com/espnet/espnet/issues/967", "id": 468722045, "node_id": "MDU6SXNzdWU0Njg3MjIwNDU=", "number": 967, "title": "Feature Generation error (CSJ)", "user": {"login": "robothubtokyo", "id": 52391327, "node_id": "MDQ6VXNlcjUyMzkxMzI3", "avatar_url": "https://avatars.githubusercontent.com/u/52391327?v=4", "gravatar_id": "", "url": "https://api.github.com/users/robothubtokyo", "html_url": "https://github.com/robothubtokyo", "followers_url": "https://api.github.com/users/robothubtokyo/followers", "following_url": "https://api.github.com/users/robothubtokyo/following{/other_user}", "gists_url": "https://api.github.com/users/robothubtokyo/gists{/gist_id}", "starred_url": "https://api.github.com/users/robothubtokyo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/robothubtokyo/subscriptions", "organizations_url": "https://api.github.com/users/robothubtokyo/orgs", "repos_url": "https://api.github.com/users/robothubtokyo/repos", "events_url": "https://api.github.com/users/robothubtokyo/events{/privacy}", "received_events_url": "https://api.github.com/users/robothubtokyo/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 777173273, "node_id": "MDU6TGFiZWw3NzcxNzMyNzM=", "url": "https://api.github.com/repos/espnet/espnet/labels/Bug", "name": "Bug", "color": "ee0701", "default": false, "description": "bug should be fixed"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2019-07-16T15:28:18Z", "updated_at": "2019-07-17T10:18:50Z", "closed_at": "2019-07-17T10:18:50Z", "author_association": "NONE", "active_lock_reason": null, "body": "We encountered the following error when trying CSJ's Feature Generation.\r\nBefore running the script, we moved the data to HDD in our PC, and changed the line 37(CSJDATATOP=~/hdd_mount/CSJ_corpus).\r\nHow can we solve this error?\r\n\r\n`\r\n./run.sh --backend pytorch --ngpu 1\r\nstage 0: Data Preparation\r\nFinish processing original CSJ data\r\nWarning: expected 986 data files (Case : Using 'Academic lecture' and 'Other' data), found 3272.\r\nCSJ data preparation succeeded.\r\nutils/fix_data_dir.sh: filtered data/train/segments from 440671 to 417408 lines based on filter /tmp/kaldi.64gy/recordings.\r\nutils/fix_data_dir.sh: filtered data/train/wav.scp from 3272 to 3214 lines based on filter /tmp/kaldi.64gy/recordings.\r\nfix_data_dir.sh: kept 417408 utterances out of 440671\r\nfix_data_dir.sh: old files are kept in data/train/.backup\r\nfix_data_dir.sh: kept all 1272 utterances.\r\nfix_data_dir.sh: old files are kept in data/eval1/.backup\r\nCompleted preparation evaluation set eval1\r\nfix_data_dir.sh: kept all 1292 utterances.\r\nfix_data_dir.sh: old files are kept in data/eval2/.backup\r\nCompleted preparation evaluation set eval2\r\nfix_data_dir.sh: kept all 1385 utterances.\r\nfix_data_dir.sh: old files are kept in data/eval3/.backup\r\nCompleted preparation evaluation set eval3\r\nremoved tags, space, and <sp>\r\nremoved tags, space, and <sp>\r\nremoved tags, space, and <sp>\r\nremoved tags, space, and <sp>\r\nstage 1: Feature Generation\r\nutils/subset_data_dir.sh: reducing #utt from 417408 to 4000\r\nutils/subset_data_dir.sh: reducing #utt from 417408 to 413408\r\nReduced number of utterances from 413408 to 403096\r\nUsing fix_data_dir.sh to reconcile the other files.\r\nfix_data_dir.sh: kept 403096 utterances out of 413408\r\nfix_data_dir.sh: old files are kept in data/train_nodup/.backup\r\nutils/perturb_data_dir_speed.sh: generated speed-perturbed version of data in data/train_nodup, in data/temp1\r\nutils/validate_data_dir.sh: Error: in data/temp1, recording-ids extracted from segments and reco2dur file\r\nutils/validate_data_dir.sh: differ, partial diff is:\r\n--- /tmp/kaldi.PQlb/recordings\t2019-07-17 00:15:15.097729018 +0900\r\n+++ /tmp/kaldi.PQlb/recordings.reco2dur\t2019-07-17 00:15:15.605705021 +0900\r\n@@ -1,3176 +0,0 @@\r\n-sp0.9-A01M0009\r\n-sp0.9-A01M0013\r\n-sp0.9-A01M0014\r\n...\r\n-sp0.9-S11M1618\r\n-sp0.9-S11M1626\r\n-sp0.9-S11M1640\r\n-sp0.9-S11M1643\r\n-sp0.9-S11M1670\r\n-sp0.9-S11M1689\r\n[Lengths are /tmp/kaldi.PQlb/recordings=3176 versus /tmp/kaldi.PQlb/recordings.reco2dur=0]\r\n`\r\n", "reactions": {"url": "https://api.github.com/repos/espnet/espnet/issues/967/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/espnet/espnet/issues/967/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/espnet/espnet/issues/952", "repository_url": "https://api.github.com/repos/espnet/espnet", "labels_url": "https://api.github.com/repos/espnet/espnet/issues/952/labels{/name}", "comments_url": "https://api.github.com/repos/espnet/espnet/issues/952/comments", "events_url": "https://api.github.com/repos/espnet/espnet/issues/952/events", "html_url": "https://github.com/espnet/espnet/issues/952", "id": 465149791, "node_id": "MDU6SXNzdWU0NjUxNDk3OTE=", "number": 952, "title": "ErrorCalculator does not work in corpus without <space>", "user": {"login": "Pydataman", "id": 17594431, "node_id": "MDQ6VXNlcjE3NTk0NDMx", "avatar_url": "https://avatars.githubusercontent.com/u/17594431?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Pydataman", "html_url": "https://github.com/Pydataman", "followers_url": "https://api.github.com/users/Pydataman/followers", "following_url": "https://api.github.com/users/Pydataman/following{/other_user}", "gists_url": "https://api.github.com/users/Pydataman/gists{/gist_id}", "starred_url": "https://api.github.com/users/Pydataman/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Pydataman/subscriptions", "organizations_url": "https://api.github.com/users/Pydataman/orgs", "repos_url": "https://api.github.com/users/Pydataman/repos", "events_url": "https://api.github.com/users/Pydataman/events{/privacy}", "received_events_url": "https://api.github.com/users/Pydataman/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 777173273, "node_id": "MDU6TGFiZWw3NzcxNzMyNzM=", "url": "https://api.github.com/repos/espnet/espnet/labels/Bug", "name": "Bug", "color": "ee0701", "default": false, "description": "bug should be fixed"}], "state": "closed", "locked": false, "assignee": {"login": "Fhrozen", "id": 11988996, "node_id": "MDQ6VXNlcjExOTg4OTk2", "avatar_url": "https://avatars.githubusercontent.com/u/11988996?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Fhrozen", "html_url": "https://github.com/Fhrozen", "followers_url": "https://api.github.com/users/Fhrozen/followers", "following_url": "https://api.github.com/users/Fhrozen/following{/other_user}", "gists_url": "https://api.github.com/users/Fhrozen/gists{/gist_id}", "starred_url": "https://api.github.com/users/Fhrozen/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Fhrozen/subscriptions", "organizations_url": "https://api.github.com/users/Fhrozen/orgs", "repos_url": "https://api.github.com/users/Fhrozen/repos", "events_url": "https://api.github.com/users/Fhrozen/events{/privacy}", "received_events_url": "https://api.github.com/users/Fhrozen/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "Fhrozen", "id": 11988996, "node_id": "MDQ6VXNlcjExOTg4OTk2", "avatar_url": "https://avatars.githubusercontent.com/u/11988996?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Fhrozen", "html_url": "https://github.com/Fhrozen", "followers_url": "https://api.github.com/users/Fhrozen/followers", "following_url": "https://api.github.com/users/Fhrozen/following{/other_user}", "gists_url": "https://api.github.com/users/Fhrozen/gists{/gist_id}", "starred_url": "https://api.github.com/users/Fhrozen/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Fhrozen/subscriptions", "organizations_url": "https://api.github.com/users/Fhrozen/orgs", "repos_url": "https://api.github.com/users/Fhrozen/repos", "events_url": "https://api.github.com/users/Fhrozen/events{/privacy}", "received_events_url": "https://api.github.com/users/Fhrozen/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 5, "created_at": "2019-07-08T09:25:48Z", "updated_at": "2019-07-12T12:42:39Z", "closed_at": "2019-07-12T11:43:44Z", "author_association": "NONE", "active_lock_reason": null, "body": "hello\uff0cwhen I run aishell recipe\uff0cerror is as follows\uff1a\r\n\r\nTraceback (most recent call last):\r\n  File \"espnet/bin/asr_train.py\", line 373, in <module>\r\n    main(sys.argv[1:])\r\n  File \"espnet/bin/asr_train.py\", line 361, in main\r\n    train(args)\r\n  File \"espnet-0.4.0-py3.6.egg/espnet/asr/pytorch_backend/asr.py\", line 257, in train\r\n  File \"espnet-0.4.0-py3.6.egg/espnet/nets/pytorch_backend/e2e_asr_transformer.py\", line 116, in __init__\r\n  File \"espnet-0.4.0-py3.6.egg/espnet/nets/e2e_asr_common.py\", line 108, in __init__\r\nValueError: \"\\<space>\\\" is not in list\r\n\r\n\r\nbug?", "reactions": {"url": "https://api.github.com/repos/espnet/espnet/issues/952/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/espnet/espnet/issues/952/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/espnet/espnet/issues/916", "repository_url": "https://api.github.com/repos/espnet/espnet", "labels_url": "https://api.github.com/repos/espnet/espnet/issues/916/labels{/name}", "comments_url": "https://api.github.com/repos/espnet/espnet/issues/916/comments", "events_url": "https://api.github.com/repos/espnet/espnet/issues/916/events", "html_url": "https://github.com/espnet/espnet/issues/916", "id": 459731384, "node_id": "MDU6SXNzdWU0NTk3MzEzODQ=", "number": 916, "title": "[Bug] 'espnet.nets.pytorch_backend.e2e_asr_transformer:E2E' object has no attribute 'recognize_batch'", "user": {"login": "Emrys365", "id": 18532145, "node_id": "MDQ6VXNlcjE4NTMyMTQ1", "avatar_url": "https://avatars.githubusercontent.com/u/18532145?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Emrys365", "html_url": "https://github.com/Emrys365", "followers_url": "https://api.github.com/users/Emrys365/followers", "following_url": "https://api.github.com/users/Emrys365/following{/other_user}", "gists_url": "https://api.github.com/users/Emrys365/gists{/gist_id}", "starred_url": "https://api.github.com/users/Emrys365/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Emrys365/subscriptions", "organizations_url": "https://api.github.com/users/Emrys365/orgs", "repos_url": "https://api.github.com/users/Emrys365/repos", "events_url": "https://api.github.com/users/Emrys365/events{/privacy}", "received_events_url": "https://api.github.com/users/Emrys365/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 777173273, "node_id": "MDU6TGFiZWw3NzcxNzMyNzM=", "url": "https://api.github.com/repos/espnet/espnet/labels/Bug", "name": "Bug", "color": "ee0701", "default": false, "description": "bug should be fixed"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2019-06-24T07:23:35Z", "updated_at": "2020-05-15T09:59:26Z", "closed_at": "2020-05-15T09:59:26Z", "author_association": "COLLABORATOR", "active_lock_reason": null, "body": "Hi,\r\n\r\nWhen decoding with a trained Transformer model, the following error occurred:\r\n\r\n```bash\r\n  File \"$ESPNET_ROOT/espnet/bin/asr_recog.py\", line 159, in <module>\r\n    main(sys.argv[1:])\r\n  File \"$ESPNET_ROOT/espnet/bin/asr_recog.py\", line 147, in main\r\n    recog(args)\r\n  File \"$ESPNET_ROOT/espnet/asr/pytorch_backend/asr.py\", line 600, in recog\r\n    nbest_hyps = model.recognize_batch(feats, args, train_args.char_list, rnnlm=rnnlm)\r\n  File \"$ESPNET_ROOT/tools/venv/lib/python3.7/site-packages/torch/nn/modules/module.py\", line 535, in __getattr__\r\n    type(self).__name__, name))\r\nAttributeError: 'E2E' object has no attribute 'recognize_batch'\r\n```\r\nI found the definition of `recognize_batch()` in `$ESPNET_ROOT/espnet/nets/pytorch_backend/e2e_asr.py`, but not in `$ESPNET_ROOT/espnet/nets/pytorch_backend/e2e_asr_transformer.py`. So I guess there is some undone work in the Transformer part.", "reactions": {"url": "https://api.github.com/repos/espnet/espnet/issues/916/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/espnet/espnet/issues/916/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/espnet/espnet/issues/904", "repository_url": "https://api.github.com/repos/espnet/espnet", "labels_url": "https://api.github.com/repos/espnet/espnet/issues/904/labels{/name}", "comments_url": "https://api.github.com/repos/espnet/espnet/issues/904/comments", "events_url": "https://api.github.com/repos/espnet/espnet/issues/904/events", "html_url": "https://github.com/espnet/espnet/issues/904", "id": 459100539, "node_id": "MDU6SXNzdWU0NTkxMDA1Mzk=", "number": 904, "title": "matplotlib.use('Agg') fail", "user": {"login": "naxingyu", "id": 3320260, "node_id": "MDQ6VXNlcjMzMjAyNjA=", "avatar_url": "https://avatars.githubusercontent.com/u/3320260?v=4", "gravatar_id": "", "url": "https://api.github.com/users/naxingyu", "html_url": "https://github.com/naxingyu", "followers_url": "https://api.github.com/users/naxingyu/followers", "following_url": "https://api.github.com/users/naxingyu/following{/other_user}", "gists_url": "https://api.github.com/users/naxingyu/gists{/gist_id}", "starred_url": "https://api.github.com/users/naxingyu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/naxingyu/subscriptions", "organizations_url": "https://api.github.com/users/naxingyu/orgs", "repos_url": "https://api.github.com/users/naxingyu/repos", "events_url": "https://api.github.com/users/naxingyu/events{/privacy}", "received_events_url": "https://api.github.com/users/naxingyu/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 777173273, "node_id": "MDU6TGFiZWw3NzcxNzMyNzM=", "url": "https://api.github.com/repos/espnet/espnet/labels/Bug", "name": "Bug", "color": "ee0701", "default": false, "description": "bug should be fixed"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2019-06-21T09:22:17Z", "updated_at": "2019-06-22T12:19:03Z", "closed_at": "2019-06-22T12:19:03Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "It result in plot fail \r\n```\r\n_tkinter.TclError: no display name and no $DISPLAY environment variable\r\n```\r\nI fixed this by applying a patch on `espnet/nets/pytorch_backend/transformer/plot.py`\r\n```\r\n@@ -1,5 +1,6 @@\r\n import logging\r\n-\r\n+import matplotlib\r\n+matplotlib.use('Agg')\r\n import matplotlib.pyplot as plt\r\n\r\n from espnet.asr import asr_utils\r\n```", "reactions": {"url": "https://api.github.com/repos/espnet/espnet/issues/904/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/espnet/espnet/issues/904/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/espnet/espnet/issues/902", "repository_url": "https://api.github.com/repos/espnet/espnet", "labels_url": "https://api.github.com/repos/espnet/espnet/issues/902/labels{/name}", "comments_url": "https://api.github.com/repos/espnet/espnet/issues/902/comments", "events_url": "https://api.github.com/repos/espnet/espnet/issues/902/events", "html_url": "https://github.com/espnet/espnet/issues/902", "id": 458949031, "node_id": "MDU6SXNzdWU0NTg5NDkwMzE=", "number": 902, "title": "test error for test_eval_perm_free_error_py.bats", "user": {"login": "sw005320", "id": 11741550, "node_id": "MDQ6VXNlcjExNzQxNTUw", "avatar_url": "https://avatars.githubusercontent.com/u/11741550?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sw005320", "html_url": "https://github.com/sw005320", "followers_url": "https://api.github.com/users/sw005320/followers", "following_url": "https://api.github.com/users/sw005320/following{/other_user}", "gists_url": "https://api.github.com/users/sw005320/gists{/gist_id}", "starred_url": "https://api.github.com/users/sw005320/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sw005320/subscriptions", "organizations_url": "https://api.github.com/users/sw005320/orgs", "repos_url": "https://api.github.com/users/sw005320/repos", "events_url": "https://api.github.com/users/sw005320/events{/privacy}", "received_events_url": "https://api.github.com/users/sw005320/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 777173273, "node_id": "MDU6TGFiZWw3NzcxNzMyNzM=", "url": "https://api.github.com/repos/espnet/espnet/labels/Bug", "name": "Bug", "color": "ee0701", "default": false, "description": "bug should be fixed"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2019-06-21T00:26:02Z", "updated_at": "2019-06-21T14:16:38Z", "closed_at": "2019-06-21T14:16:38Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "@simpleoier, it's not always, but I observed that `test_eval_perm_free_error_py.bats` will be failed sometimes.\r\nDo you know what happned?\r\nCan you fix it?\r\n```\r\nnot ok 11 eval_perm_free_error.sh\r\n# (in test file test_utils/test_eval_perm_free_error_py.bats, line 102)\r\n#   `diff ${tmpdir}/min_perm_result.wrd.txt ${tmpdir}/result_wer.txt' failed\r\n# 1,2c1,2\r\n# < Total Scores: (#C #S #D #I) 30 46 46 27\r\n# < Error Rate:   97.54\r\n# ---\r\n# > Total Scores: (#C #S #D #I) 30 54 60 33\r\n# > Error Rate:   102.08\r\n```", "reactions": {"url": "https://api.github.com/repos/espnet/espnet/issues/902/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/espnet/espnet/issues/902/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/espnet/espnet/issues/891", "repository_url": "https://api.github.com/repos/espnet/espnet", "labels_url": "https://api.github.com/repos/espnet/espnet/issues/891/labels{/name}", "comments_url": "https://api.github.com/repos/espnet/espnet/issues/891/comments", "events_url": "https://api.github.com/repos/espnet/espnet/issues/891/events", "html_url": "https://github.com/espnet/espnet/issues/891", "id": 458356042, "node_id": "MDU6SXNzdWU0NTgzNTYwNDI=", "number": 891, "title": "cannot import using_transform_config", "user": {"login": "ShigekiKarita", "id": 6745326, "node_id": "MDQ6VXNlcjY3NDUzMjY=", "avatar_url": "https://avatars.githubusercontent.com/u/6745326?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ShigekiKarita", "html_url": "https://github.com/ShigekiKarita", "followers_url": "https://api.github.com/users/ShigekiKarita/followers", "following_url": "https://api.github.com/users/ShigekiKarita/following{/other_user}", "gists_url": "https://api.github.com/users/ShigekiKarita/gists{/gist_id}", "starred_url": "https://api.github.com/users/ShigekiKarita/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ShigekiKarita/subscriptions", "organizations_url": "https://api.github.com/users/ShigekiKarita/orgs", "repos_url": "https://api.github.com/users/ShigekiKarita/repos", "events_url": "https://api.github.com/users/ShigekiKarita/events{/privacy}", "received_events_url": "https://api.github.com/users/ShigekiKarita/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 777173273, "node_id": "MDU6TGFiZWw3NzcxNzMyNzM=", "url": "https://api.github.com/repos/espnet/espnet/labels/Bug", "name": "Bug", "color": "ee0701", "default": false, "description": "bug should be fixed"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2019-06-20T05:36:11Z", "updated_at": "2019-09-06T21:46:39Z", "closed_at": "2019-09-06T21:46:39Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "@kamo-naoyuki When I generating doc, I cannot find this function in master and v0.5.0? Does this still exist?\r\n\r\n```python\r\n>>> import espnet.asr.pytorch_backend.asr_mix\r\n\r\nImportError                               Traceback (most recent call last)\r\n<ipython-input-1-f7104c01923d> in <module>\r\n----> 1 import espnet.asr.pytorch_backend.asr_mix\r\n\r\n~/Desktop/espnet/espnet/asr/pytorch_backend/asr_mix.py in <module>\r\n     35 from espnet.nets.pytorch_backend.e2e_asr_mix import E2E\r\n     36 from espnet.nets.pytorch_backend.e2e_asr_mix import pad_list\r\n---> 37 from espnet.transform.transformation import using_transform_config\r\n     38 from espnet.utils.io_utils import LoadInputsAndTargets\r\n     39 \r\n\r\nImportError: cannot import name 'using_transform_config' from 'espnet.transform.transformation' (/home/skarita/Desktop/espnet/espnet/transform/transformation.py)\r\n```", "reactions": {"url": "https://api.github.com/repos/espnet/espnet/issues/891/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/espnet/espnet/issues/891/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/espnet/espnet/issues/879", "repository_url": "https://api.github.com/repos/espnet/espnet", "labels_url": "https://api.github.com/repos/espnet/espnet/issues/879/labels{/name}", "comments_url": "https://api.github.com/repos/espnet/espnet/issues/879/comments", "events_url": "https://api.github.com/repos/espnet/espnet/issues/879/events", "html_url": "https://github.com/espnet/espnet/issues/879", "id": 457966197, "node_id": "MDU6SXNzdWU0NTc5NjYxOTc=", "number": 879, "title": "install fails at building python-bottleneck because of ld incompability", "user": {"login": "lumaku", "id": 6996289, "node_id": "MDQ6VXNlcjY5OTYyODk=", "avatar_url": "https://avatars.githubusercontent.com/u/6996289?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lumaku", "html_url": "https://github.com/lumaku", "followers_url": "https://api.github.com/users/lumaku/followers", "following_url": "https://api.github.com/users/lumaku/following{/other_user}", "gists_url": "https://api.github.com/users/lumaku/gists{/gist_id}", "starred_url": "https://api.github.com/users/lumaku/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lumaku/subscriptions", "organizations_url": "https://api.github.com/users/lumaku/orgs", "repos_url": "https://api.github.com/users/lumaku/repos", "events_url": "https://api.github.com/users/lumaku/events{/privacy}", "received_events_url": "https://api.github.com/users/lumaku/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 777173273, "node_id": "MDU6TGFiZWw3NzcxNzMyNzM=", "url": "https://api.github.com/repos/espnet/espnet/labels/Bug", "name": "Bug", "color": "ee0701", "default": false, "description": "bug should be fixed"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2019-06-19T11:47:54Z", "updated_at": "2020-05-15T09:58:20Z", "closed_at": "2020-05-15T09:58:20Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "The venv setup using `make KALDI=/xxx/kaldi` fails on my system when building the python-package bottleneck. Here is the output:\r\n\r\n```\r\n. venv/bin/activate && pip install -e ..\r\nObtaining file:///xxx/espnet\r\n...\r\nCollecting pyaml (from musdb>=0.2.0->museval->espnet==0.4.0)\r\n  Using cached https://files.pythonhosted.org/packages/33/1a/936074f3492156693fc9e471269fc5747fa3b7d9d7f8a33af054f6b24066/pyaml-19.4.1-py2.py3-none-any.whl\r\nBuilding wheels for collected packages: torch-complex, pytorch-wpe, bottleneck\r\n  Building wheel for torch-complex (setup.py) ... done\r\n  Stored in directory: /tmp/pip-ephem-wheel-cache-wicl1l09/wheels/40/3e/d2/5f746b29e05eb86a7b49a0bc11081269ef656c69c74f026610\r\n  Building wheel for pytorch-wpe (setup.py) ... done\r\n  Stored in directory: /tmp/pip-ephem-wheel-cache-wicl1l09/wheels/50/fb/2e/3b720faf9b2be8e953ade6108fc74fe806e581cdfcda87c51a\r\n  Building wheel for bottleneck (setup.py) ... error\r\n  Complete output from command /xxx/espnet/tools/venv/bin/python -u -c \"import setuptools, tokenize;__file__='/tmp/pip-install-jhp_ohvs/bottleneck/setup.py';f=getattr(tokenize, 'open', open)(__file__);code=f.read().replace('\\r\\n', '\\n');f.close();exec(compile(code, __file__, 'exec'))\" bdist_wheel -d /tmp/pip-wheel-bbem2izc --python-tag cp37:\r\n  running bdist_wheel\r\n  running build\r\n  running build_py\r\n  creating build\r\n  creating build/lib.linux-x86_64-3.7\r\n  creating build/lib.linux-x86_64-3.7/bottleneck\r\n  copying bottleneck/__init__.py -> build/lib.linux-x86_64-3.7/bottleneck\r\n  copying bottleneck/version.py -> build/lib.linux-x86_64-3.7/bottleneck\r\n  creating build/lib.linux-x86_64-3.7/bottleneck/tests\r\n  copying bottleneck/tests/scalar_input_test.py -> build/lib.linux-x86_64-3.7/bottleneck/tests\r\n  copying bottleneck/tests/list_input_test.py -> build/lib.linux-x86_64-3.7/bottleneck/tests\r\n  copying bottleneck/tests/move_test.py -> build/lib.linux-x86_64-3.7/bottleneck/tests\r\n  copying bottleneck/tests/input_modifcation_test.py -> build/lib.linux-x86_64-3.7/bottleneck/tests\r\n  copying bottleneck/tests/__init__.py -> build/lib.linux-x86_64-3.7/bottleneck/tests\r\n  copying bottleneck/tests/nonreduce_axis_test.py -> build/lib.linux-x86_64-3.7/bottleneck/tests\r\n  copying bottleneck/tests/nonreduce_test.py -> build/lib.linux-x86_64-3.7/bottleneck/tests\r\n  copying bottleneck/tests/reduce_test.py -> build/lib.linux-x86_64-3.7/bottleneck/tests\r\n  copying bottleneck/tests/util.py -> build/lib.linux-x86_64-3.7/bottleneck/tests\r\n  creating build/lib.linux-x86_64-3.7/bottleneck/benchmark\r\n  copying bottleneck/benchmark/__init__.py -> build/lib.linux-x86_64-3.7/bottleneck/benchmark\r\n  copying bottleneck/benchmark/bench_detailed.py -> build/lib.linux-x86_64-3.7/bottleneck/benchmark\r\n  copying bottleneck/benchmark/bench.py -> build/lib.linux-x86_64-3.7/bottleneck/benchmark\r\n  copying bottleneck/benchmark/autotimeit.py -> build/lib.linux-x86_64-3.7/bottleneck/benchmark\r\n  creating build/lib.linux-x86_64-3.7/bottleneck/slow\r\n  copying bottleneck/slow/__init__.py -> build/lib.linux-x86_64-3.7/bottleneck/slow\r\n  copying bottleneck/slow/nonreduce.py -> build/lib.linux-x86_64-3.7/bottleneck/slow\r\n  copying bottleneck/slow/nonreduce_axis.py -> build/lib.linux-x86_64-3.7/bottleneck/slow\r\n  copying bottleneck/slow/move.py -> build/lib.linux-x86_64-3.7/bottleneck/slow\r\n  copying bottleneck/slow/reduce.py -> build/lib.linux-x86_64-3.7/bottleneck/slow\r\n  creating build/lib.linux-x86_64-3.7/bottleneck/src\r\n  copying bottleneck/src/__init__.py -> build/lib.linux-x86_64-3.7/bottleneck/src\r\n  copying bottleneck/src/template.py -> build/lib.linux-x86_64-3.7/bottleneck/src\r\n  copying bottleneck/LICENSE -> build/lib.linux-x86_64-3.7/bottleneck\r\n  running build_ext\r\n  building 'bottleneck.reduce' extension\r\n  creating build/temp.linux-x86_64-3.7\r\n  creating build/temp.linux-x86_64-3.7/bottleneck\r\n  creating build/temp.linux-x86_64-3.7/bottleneck/src\r\n  gcc -pthread -B /xxx/espnet/tools/venv/compiler_compat -Wl,--sysroot=/ -Wsign-compare -DNDEBUG -g -fwrapv -O3 -Wall -Wstrict-prototypes -fPIC -I/xxx/espnet/tools/venv/lib/python3.7/site-packages/numpy/core/include -I/xxx/espnet/tools/venv/include/python3.7m -c bottleneck/src/reduce.c -o build/temp.linux-x86_64-3.7/bottleneck/src/reduce.o -O2\r\n  gcc -pthread -shared -B /xxx/espnet/tools/venv/compiler_compat -L/xxx/espnet/tools/venv/lib -Wl,-rpath=/xxx/espnet/tools/venv/lib -Wl,--no-as-needed -Wl,--sysroot=/ build/temp.linux-x86_64-3.7/bottleneck/src/reduce.o -o build/lib.linux-x86_64-3.7/bottleneck/reduce.cpython-37m-x86_64-linux-gnu.so\r\n  /xxx/espnet/tools/venv/compiler_compat/ld: build/temp.linux-x86_64-3.7/bottleneck/src/reduce.o: unable to initialize decompress status for section .debug_info\r\n  /xxx/espnet/tools/venv/compiler_compat/ld: build/temp.linux-x86_64-3.7/bottleneck/src/reduce.o: unable to initialize decompress status for section .debug_info\r\n  /xxx/espnet/tools/venv/compiler_compat/ld: build/temp.linux-x86_64-3.7/bottleneck/src/reduce.o: unable to initialize decompress status for section .debug_info\r\n  /xxx/espnet/tools/venv/compiler_compat/ld: build/temp.linux-x86_64-3.7/bottleneck/src/reduce.o: unable to initialize decompress status for section .debug_info\r\n  build/temp.linux-x86_64-3.7/bottleneck/src/reduce.o: file not recognized: file format not recognized\r\n  collect2: Fehler: ld gab 1 als Ende-Status zur\u00fcck\r\n  error: command 'gcc' failed with exit status 1\r\n  \r\n  ----------------------------------------\r\n  Failed building wheel for bottleneck\r\n  Running setup.py clean for bottleneck\r\nSuccessfully built torch-complex pytorch-wpe\r\nFailed to build bottleneck\r\nInstalling collected packages: h5py, protobuf, typing, typing-extensions, filelock, chainer, python-speech-features, scikit-learn, decorator, llvmlite, numba, resampy, audioread, joblib, librosa, soundfile, inflect, unidecode, editdistance, tensorboardX, pillow, click, bottleneck, tqdm, nara-wpe, pyrsistent, attrs, jsonschema, stempeg, PyYAML, pyaml, musdb, simplejson, museval, pystoi, kaldiio, funcsigs, configargparse, torch-complex, pytorch-wpe, espnet\r\n  Running setup.py install for bottleneck ... error\r\n    Complete output from command /xxx/espnet/tools/venv/bin/python -u -c \"import setuptools, tokenize;__file__='/tmp/pip-install-jhp_ohvs/bottleneck/setup.py';f=getattr(tokenize, 'open', open)(__file__);code=f.read().replace('\\r\\n', '\\n');f.close();exec(compile(code, __file__, 'exec'))\" install --record /tmp/pip-record-stfk6xt7/install-record.txt --single-version-externally-managed --compile:\r\n    running install\r\n    running build\r\n    running build_py\r\n    running build_ext\r\n    building 'bottleneck.reduce' extension\r\n    creating build/temp.linux-x86_64-3.7\r\n    creating build/temp.linux-x86_64-3.7/bottleneck\r\n    creating build/temp.linux-x86_64-3.7/bottleneck/src\r\n    gcc -pthread -B /xxx/espnet/tools/venv/compiler_compat -Wl,--sysroot=/ -Wsign-compare -DNDEBUG -g -fwrapv -O3 -Wall -Wstrict-prototypes -fPIC -I/xxx/espnet/tools/venv/lib/python3.7/site-packages/numpy/core/include -I/xxx/espnet/tools/venv/include/python3.7m -c bottleneck/src/reduce.c -o build/temp.linux-x86_64-3.7/bottleneck/src/reduce.o -O2\r\n    gcc -pthread -shared -B /xxx/espnet/tools/venv/compiler_compat -L/xxx/espnet/tools/venv/lib -Wl,-rpath=/xxx/espnet/tools/venv/lib -Wl,--no-as-needed -Wl,--sysroot=/ build/temp.linux-x86_64-3.7/bottleneck/src/reduce.o -o build/lib.linux-x86_64-3.7/bottleneck/reduce.cpython-37m-x86_64-linux-gnu.so\r\n    /xxx/espnet/tools/venv/compiler_compat/ld: build/temp.linux-x86_64-3.7/bottleneck/src/reduce.o: unable to initialize decompress status for section .debug_info\r\n    /xxx/espnet/tools/venv/compiler_compat/ld: build/temp.linux-x86_64-3.7/bottleneck/src/reduce.o: unable to initialize decompress status for section .debug_info\r\n    /xxx/espnet/tools/venv/compiler_compat/ld: build/temp.linux-x86_64-3.7/bottleneck/src/reduce.o: unable to initialize decompress status for section .debug_info\r\n    /xxx/espnet/tools/venv/compiler_compat/ld: build/temp.linux-x86_64-3.7/bottleneck/src/reduce.o: unable to initialize decompress status for section .debug_info\r\n    build/temp.linux-x86_64-3.7/bottleneck/src/reduce.o: file not recognized: file format not recognized\r\n    collect2: Fehler: ld gab 1 als Ende-Status zur\u00fcck\r\n    error: command 'gcc' failed with exit status 1\r\n    \r\n    ----------------------------------------\r\nCommand \"/xxx/espnet/tools/venv/bin/python -u -c \"import setuptools, tokenize;__file__='/tmp/pip-install-jhp_ohvs/bottleneck/setup.py';f=getattr(tokenize, 'open', open)(__file__);code=f.read().replace('\\r\\n', '\\n');f.close();exec(compile(code, __file__, 'exec'))\" install --record /tmp/pip-record-stfk6xt7/install-record.txt --single-version-externally-managed --compile\" failed with error code 1 in /tmp/pip-install-jhp_ohvs/bottleneck/\r\nmake: *** [Makefile:74: espnet.done] Fehler 1\r\n```\r\n\r\nI found a fix to this issue mentioned in: pytorch/pytorch#16683\r\n\r\nOn my system, `ld` is at version `2.32`, whereas the Anaconda `espnet/tools/venv/compiler_compat/ld` is at version `2.31.1`. These versions are not compatible.\r\n\r\nAfter deleting the Anaconda `ld`, the problem was solved.", "reactions": {"url": "https://api.github.com/repos/espnet/espnet/issues/879/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/espnet/espnet/issues/879/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/espnet/espnet/issues/856", "repository_url": "https://api.github.com/repos/espnet/espnet", "labels_url": "https://api.github.com/repos/espnet/espnet/issues/856/labels{/name}", "comments_url": "https://api.github.com/repos/espnet/espnet/issues/856/comments", "events_url": "https://api.github.com/repos/espnet/espnet/issues/856/events", "html_url": "https://github.com/espnet/espnet/issues/856", "id": 456554287, "node_id": "MDU6SXNzdWU0NTY1NTQyODc=", "number": 856, "title": "Error when installing espnet", "user": {"login": "ghost", "id": 10137, "node_id": "MDQ6VXNlcjEwMTM3", "avatar_url": "https://avatars.githubusercontent.com/u/10137?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ghost", "html_url": "https://github.com/ghost", "followers_url": "https://api.github.com/users/ghost/followers", "following_url": "https://api.github.com/users/ghost/following{/other_user}", "gists_url": "https://api.github.com/users/ghost/gists{/gist_id}", "starred_url": "https://api.github.com/users/ghost/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ghost/subscriptions", "organizations_url": "https://api.github.com/users/ghost/orgs", "repos_url": "https://api.github.com/users/ghost/repos", "events_url": "https://api.github.com/users/ghost/events{/privacy}", "received_events_url": "https://api.github.com/users/ghost/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 777173273, "node_id": "MDU6TGFiZWw3NzcxNzMyNzM=", "url": "https://api.github.com/repos/espnet/espnet/labels/Bug", "name": "Bug", "color": "ee0701", "default": false, "description": "bug should be fixed"}, {"id": 1417515965, "node_id": "MDU6TGFiZWwxNDE3NTE1OTY1", "url": "https://api.github.com/repos/espnet/espnet/labels/Installation", "name": "Installation", "color": "8df4e3", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2019-06-15T16:37:42Z", "updated_at": "2020-05-24T07:14:05Z", "closed_at": "2020-05-24T07:14:05Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hello,\r\n\r\nI am getting an error when installing espnet. \r\n\r\nWarning: IRSTLM is not installed by default anymore. If you need IRSTLM\r\nWarning: use the script extras/install_irstlm.sh\r\nAll done OK.\r\nmake[1]: Leaving directory '/home/nvm/espnet/tools/kaldi/tools'\r\ncd kaldi/src; ./configure --shared --use-cuda=no; make depend; make all\r\nConfiguring KALDI to use MKL.\r\nChecking compiler g++ ...\r\nChecking OpenFst library in /home/nvm/espnet/tools/kaldi/tools/openfst-1.6.7 ...\r\nDoing OS specific configurations ...\r\nOn Linux: Checking for linear algebra header files ...\r\nConfiguring MKL library directory: ***configure failed: MKL libraries could not be found. Please use the switch --mkl-libdir or try another math library, e.g. --mathlib=ATLAS (would be slower) ***\r\nmake[1]: Entering directory '/home/nvm/espnet/tools/kaldi/src'\r\nMakefile:30: kaldi.mk: No such file or directory\r\nkaldi.mk does not exist; you have to run ./configure\r\nMakefile:90: recipe for target 'kaldi.mk' failed\r\nmake[1]: *** [kaldi.mk] Error 1\r\nmake[1]: Leaving directory '/home/nvm/espnet/tools/kaldi/src'\r\nmake[1]: Entering directory '/home/nvm/espnet/tools/kaldi/src'\r\nMakefile:30: kaldi.mk: No such file or directory\r\nkaldi.mk does not exist; you have to run ./configure\r\nMakefile:90: recipe for target 'kaldi.mk' failed\r\nmake[1]: *** [kaldi.mk] Error 1\r\nmake[1]: Leaving directory '/home/nvm/espnet/tools/kaldi/src'\r\nMakefile:42: recipe for target 'kaldi.done' failed\r\nmake: *** [kaldi.done] Error 2\r\n\r\nPleas help in resolving.", "reactions": {"url": "https://api.github.com/repos/espnet/espnet/issues/856/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/espnet/espnet/issues/856/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/espnet/espnet/issues/841", "repository_url": "https://api.github.com/repos/espnet/espnet", "labels_url": "https://api.github.com/repos/espnet/espnet/issues/841/labels{/name}", "comments_url": "https://api.github.com/repos/espnet/espnet/issues/841/comments", "events_url": "https://api.github.com/repos/espnet/espnet/issues/841/events", "html_url": "https://github.com/espnet/espnet/issues/841", "id": 456006899, "node_id": "MDU6SXNzdWU0NTYwMDY4OTk=", "number": 841, "title": "json2trn_mt.py is missing", "user": {"login": "Natalia-T", "id": 27712304, "node_id": "MDQ6VXNlcjI3NzEyMzA0", "avatar_url": "https://avatars.githubusercontent.com/u/27712304?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Natalia-T", "html_url": "https://github.com/Natalia-T", "followers_url": "https://api.github.com/users/Natalia-T/followers", "following_url": "https://api.github.com/users/Natalia-T/following{/other_user}", "gists_url": "https://api.github.com/users/Natalia-T/gists{/gist_id}", "starred_url": "https://api.github.com/users/Natalia-T/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Natalia-T/subscriptions", "organizations_url": "https://api.github.com/users/Natalia-T/orgs", "repos_url": "https://api.github.com/users/Natalia-T/repos", "events_url": "https://api.github.com/users/Natalia-T/events{/privacy}", "received_events_url": "https://api.github.com/users/Natalia-T/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 777173273, "node_id": "MDU6TGFiZWw3NzcxNzMyNzM=", "url": "https://api.github.com/repos/espnet/espnet/labels/Bug", "name": "Bug", "color": "ee0701", "default": false, "description": "bug should be fixed"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2019-06-14T00:20:30Z", "updated_at": "2019-06-25T06:28:25Z", "closed_at": "2019-06-25T06:28:25Z", "author_association": "NONE", "active_lock_reason": null, "body": "An error message appears in the IWSLT18 recipe, in local/score_bleu.sh. \r\n\r\nlocal/score_bleu.sh: line 28: json2trn_mt.py: command not found\r\n \r\nhttps://github.com/espnet/espnet/blob/master/egs/iwslt18/st1/local/score_bleu.sh\r\n \r\njson2trn_mt.py ${dir}/data.json ${dic_tgt} --ref ${dir}/ref.trn.org \\\r\n    --hyp ${dir}/hyp.trn.org --src ${dir}/src.trn.org --dict-src ${dic_src}\r\n\t", "reactions": {"url": "https://api.github.com/repos/espnet/espnet/issues/841/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/espnet/espnet/issues/841/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/espnet/espnet/issues/832", "repository_url": "https://api.github.com/repos/espnet/espnet", "labels_url": "https://api.github.com/repos/espnet/espnet/issues/832/labels{/name}", "comments_url": "https://api.github.com/repos/espnet/espnet/issues/832/comments", "events_url": "https://api.github.com/repos/espnet/espnet/issues/832/events", "html_url": "https://github.com/espnet/espnet/issues/832", "id": 455480828, "node_id": "MDU6SXNzdWU0NTU0ODA4Mjg=", "number": 832, "title": "Error in SentencePiece installation.", "user": {"login": "Natalia-T", "id": 27712304, "node_id": "MDQ6VXNlcjI3NzEyMzA0", "avatar_url": "https://avatars.githubusercontent.com/u/27712304?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Natalia-T", "html_url": "https://github.com/Natalia-T", "followers_url": "https://api.github.com/users/Natalia-T/followers", "following_url": "https://api.github.com/users/Natalia-T/following{/other_user}", "gists_url": "https://api.github.com/users/Natalia-T/gists{/gist_id}", "starred_url": "https://api.github.com/users/Natalia-T/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Natalia-T/subscriptions", "organizations_url": "https://api.github.com/users/Natalia-T/orgs", "repos_url": "https://api.github.com/users/Natalia-T/repos", "events_url": "https://api.github.com/users/Natalia-T/events{/privacy}", "received_events_url": "https://api.github.com/users/Natalia-T/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 777173273, "node_id": "MDU6TGFiZWw3NzcxNzMyNzM=", "url": "https://api.github.com/repos/espnet/espnet/labels/Bug", "name": "Bug", "color": "ee0701", "default": false, "description": "bug should be fixed"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2019-06-13T00:23:01Z", "updated_at": "2019-06-15T01:41:14Z", "closed_at": "2019-06-15T01:41:14Z", "author_association": "NONE", "active_lock_reason": null, "body": "From June, SentencePiece has started to use Bazel instead of CMake. This causes an installation error for SentencePiece. \r\n \r\n ", "reactions": {"url": "https://api.github.com/repos/espnet/espnet/issues/832/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/espnet/espnet/issues/832/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/espnet/espnet/issues/822", "repository_url": "https://api.github.com/repos/espnet/espnet", "labels_url": "https://api.github.com/repos/espnet/espnet/issues/822/labels{/name}", "comments_url": "https://api.github.com/repos/espnet/espnet/issues/822/comments", "events_url": "https://api.github.com/repos/espnet/espnet/issues/822/events", "html_url": "https://github.com/espnet/espnet/issues/822", "id": 453785006, "node_id": "MDU6SXNzdWU0NTM3ODUwMDY=", "number": 822, "title": "Output dimension of Conv2dSubsampling", "user": {"login": "kan-bayashi", "id": 22779813, "node_id": "MDQ6VXNlcjIyNzc5ODEz", "avatar_url": "https://avatars.githubusercontent.com/u/22779813?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kan-bayashi", "html_url": "https://github.com/kan-bayashi", "followers_url": "https://api.github.com/users/kan-bayashi/followers", "following_url": "https://api.github.com/users/kan-bayashi/following{/other_user}", "gists_url": "https://api.github.com/users/kan-bayashi/gists{/gist_id}", "starred_url": "https://api.github.com/users/kan-bayashi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kan-bayashi/subscriptions", "organizations_url": "https://api.github.com/users/kan-bayashi/orgs", "repos_url": "https://api.github.com/users/kan-bayashi/repos", "events_url": "https://api.github.com/users/kan-bayashi/events{/privacy}", "received_events_url": "https://api.github.com/users/kan-bayashi/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 777173273, "node_id": "MDU6TGFiZWw3NzcxNzMyNzM=", "url": "https://api.github.com/repos/espnet/espnet/labels/Bug", "name": "Bug", "color": "ee0701", "default": false, "description": "bug should be fixed"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2019-06-08T11:36:25Z", "updated_at": "2019-06-25T06:28:01Z", "closed_at": "2019-06-25T06:28:01Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "`Conv2dSubsampling` layer cause dimension mismatch when idim is multiple of 4.\r\nhttps://github.com/espnet/espnet/blob/577baff5c5d229c860ca9936daba3cb51b9857cb/espnet/nets/pytorch_backend/transformer/subsampling.py#L14-L25\r\n\r\n```python\r\n[ins] In [8]: conv = torch.nn.Conv2d(1, 1, 3, 2)\r\n\r\n[ins] In [9]: input = torch.zeros((1, 1, 20, 20))\r\n\r\n[ins] In [10]: out1 = conv(input)\r\n\r\n[ins] In [11]: out1.shape\r\nOut[11]: torch.Size([1, 1, 9, 9])\r\n\r\n[ins] In [12]: out2 = conv(out1)\r\n\r\n[ins] In [13]: out2.shape\r\nOut[13]: torch.Size([1, 1, 4, 4])\r\n```", "reactions": {"url": "https://api.github.com/repos/espnet/espnet/issues/822/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/espnet/espnet/issues/822/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/espnet/espnet/issues/777", "repository_url": "https://api.github.com/repos/espnet/espnet", "labels_url": "https://api.github.com/repos/espnet/espnet/issues/777/labels{/name}", "comments_url": "https://api.github.com/repos/espnet/espnet/issues/777/comments", "events_url": "https://api.github.com/repos/espnet/espnet/issues/777/events", "html_url": "https://github.com/espnet/espnet/issues/777", "id": 450082609, "node_id": "MDU6SXNzdWU0NTAwODI2MDk=", "number": 777, "title": "#iterations with accum_grad > 1", "user": {"login": "kan-bayashi", "id": 22779813, "node_id": "MDQ6VXNlcjIyNzc5ODEz", "avatar_url": "https://avatars.githubusercontent.com/u/22779813?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kan-bayashi", "html_url": "https://github.com/kan-bayashi", "followers_url": "https://api.github.com/users/kan-bayashi/followers", "following_url": "https://api.github.com/users/kan-bayashi/following{/other_user}", "gists_url": "https://api.github.com/users/kan-bayashi/gists{/gist_id}", "starred_url": "https://api.github.com/users/kan-bayashi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kan-bayashi/subscriptions", "organizations_url": "https://api.github.com/users/kan-bayashi/orgs", "repos_url": "https://api.github.com/users/kan-bayashi/repos", "events_url": "https://api.github.com/users/kan-bayashi/events{/privacy}", "received_events_url": "https://api.github.com/users/kan-bayashi/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 777173273, "node_id": "MDU6TGFiZWw3NzcxNzMyNzM=", "url": "https://api.github.com/repos/espnet/espnet/labels/Bug", "name": "Bug", "color": "ee0701", "default": false, "description": "bug should be fixed"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2019-05-30T01:04:16Z", "updated_at": "2021-12-01T17:57:13Z", "closed_at": "2019-08-24T04:42:35Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "Hi, @ShigekiKarita.\r\nIn chainer\u2019s trainer, the number of interation count is every updated when `update_core` called.\r\nSo, if we use `accum_grad = 2`, the actual iteration will be halved.\r\nI have modified this issue as follows:\r\nhttps://github.com/espnet/espnet/blob/75f7a14751d0bb51e96faa42fa313a595ef2b1a2/espnet/tts/pytorch_backend/tts.py#L150-L153\r\n", "reactions": {"url": "https://api.github.com/repos/espnet/espnet/issues/777/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/espnet/espnet/issues/777/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/espnet/espnet/issues/762", "repository_url": "https://api.github.com/repos/espnet/espnet", "labels_url": "https://api.github.com/repos/espnet/espnet/issues/762/labels{/name}", "comments_url": "https://api.github.com/repos/espnet/espnet/issues/762/comments", "events_url": "https://api.github.com/repos/espnet/espnet/issues/762/events", "html_url": "https://github.com/espnet/espnet/issues/762", "id": 448478583, "node_id": "MDU6SXNzdWU0NDg0Nzg1ODM=", "number": 762, "title": "dump.sh issue", "user": {"login": "desothier1", "id": 50878643, "node_id": "MDQ6VXNlcjUwODc4NjQz", "avatar_url": "https://avatars.githubusercontent.com/u/50878643?v=4", "gravatar_id": "", "url": "https://api.github.com/users/desothier1", "html_url": "https://github.com/desothier1", "followers_url": "https://api.github.com/users/desothier1/followers", "following_url": "https://api.github.com/users/desothier1/following{/other_user}", "gists_url": "https://api.github.com/users/desothier1/gists{/gist_id}", "starred_url": "https://api.github.com/users/desothier1/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/desothier1/subscriptions", "organizations_url": "https://api.github.com/users/desothier1/orgs", "repos_url": "https://api.github.com/users/desothier1/repos", "events_url": "https://api.github.com/users/desothier1/events{/privacy}", "received_events_url": "https://api.github.com/users/desothier1/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 777173273, "node_id": "MDU6TGFiZWw3NzcxNzMyNzM=", "url": "https://api.github.com/repos/espnet/espnet/labels/Bug", "name": "Bug", "color": "ee0701", "default": false, "description": "bug should be fixed"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2019-05-25T16:09:32Z", "updated_at": "2020-05-15T09:57:03Z", "closed_at": "2020-05-15T09:57:03Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi\r\n\r\nWhen running dump.sh \r\na UnicodeDecodeError occurs \r\n'utf-8' codec can't decode byte 0xc3 in position 0: unexpected end of data\r\nMore precisly in\r\nespnet/tools/venv/lib/python3.7/site-packages/kaldiio/matio.py, line 306, in read_token\r\n\r\nthe error is generated in a log file in exp/dump_feats folder\r\n\r\nThe reason of the error are filename containing characters with accents such as \u00cf,\u00e9,\u00e0 ..., but only for the read file names.\r\n\r\nAs I have only a few such file names, I can easily rename those, but this error did not occur in a previous Espnet version\r\n\r\nThanks\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/espnet/espnet/issues/762/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/espnet/espnet/issues/762/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/espnet/espnet/issues/760", "repository_url": "https://api.github.com/repos/espnet/espnet", "labels_url": "https://api.github.com/repos/espnet/espnet/issues/760/labels{/name}", "comments_url": "https://api.github.com/repos/espnet/espnet/issues/760/comments", "events_url": "https://api.github.com/repos/espnet/espnet/issues/760/events", "html_url": "https://github.com/espnet/espnet/issues/760", "id": 448469375, "node_id": "MDU6SXNzdWU0NDg0NjkzNzU=", "number": 760, "title": "Chainer 6.0.0 caused some errors.", "user": {"login": "jnishi", "id": 836541, "node_id": "MDQ6VXNlcjgzNjU0MQ==", "avatar_url": "https://avatars.githubusercontent.com/u/836541?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jnishi", "html_url": "https://github.com/jnishi", "followers_url": "https://api.github.com/users/jnishi/followers", "following_url": "https://api.github.com/users/jnishi/following{/other_user}", "gists_url": "https://api.github.com/users/jnishi/gists{/gist_id}", "starred_url": "https://api.github.com/users/jnishi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jnishi/subscriptions", "organizations_url": "https://api.github.com/users/jnishi/orgs", "repos_url": "https://api.github.com/users/jnishi/repos", "events_url": "https://api.github.com/users/jnishi/events{/privacy}", "received_events_url": "https://api.github.com/users/jnishi/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 777173273, "node_id": "MDU6TGFiZWw3NzcxNzMyNzM=", "url": "https://api.github.com/repos/espnet/espnet/labels/Bug", "name": "Bug", "color": "ee0701", "default": false, "description": "bug should be fixed"}, {"id": 777173276, "node_id": "MDU6TGFiZWw3NzcxNzMyNzY=", "url": "https://api.github.com/repos/espnet/espnet/labels/Help%20wanted", "name": "Help wanted", "color": "3cb371", "default": false, "description": "Need help"}, {"id": 777173280, "node_id": "MDU6TGFiZWw3NzcxNzMyODA=", "url": "https://api.github.com/repos/espnet/espnet/labels/Wontfix", "name": "Wontfix", "color": "e5f291", "default": false, "description": "Want to fix"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2019-05-25T14:23:36Z", "updated_at": "2019-05-29T12:37:11Z", "closed_at": "2019-05-29T12:37:11Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "There are several internal modification in version 6.0.0 and they cause errors when running with pytorch backends.\r\n\r\nFor example, `Evaluator.device` returns `GpuDevice` instead of `int` (in Chainer version 5.0.0).\r\nThis causes following error in `lm/pytorch_backend/lm.py`.\r\n```\r\nException in main training loop: '>=' not supported between instances of 'GpuDevice' and 'int'\r\nTraceback (most recent call last):\r\n  File \"/home/christopher/gitrepos/espnet-1/tools/venv/lib/python3.6/site-packages/chainer/training/trainer.py\", line 319, in run\r\n    entry.extension(self)\r\n  File \"/home/christopher/gitrepos/espnet-1/tools/venv/lib/python3.6/site-packages/chainer/training/extensions/evaluator.py\", line 161, in __call__\r\n    result = self.evaluate()\r\n  File \"/home/christopher/gitrepos/espnet-1/espnet/lm/pytorch_backend/lm.py\", line 309, in evaluate\r\n    x, t = concat_examples(batch, device=self.device, padding=(0, -100))\r\n  File \"/home/christopher/gitrepos/espnet-1/espnet/lm/pytorch_backend/lm.py\", line 229, in concat_examples\r\n    if device is not None and device >= 0:\r\nWill finalize trainer extensions and updater before reraising the exception.\r\nTraceback (most recent call last):\r\n  File \"/home/christopher/gitrepos/espnet-1/egs/an4/asr1/../../../espnet/bin/lm_train.py\", line 145, in <module>\r\n    main(sys.argv[1:])\r\n  File \"/home/christopher/gitrepos/espnet-1/egs/an4/asr1/../../../espnet/bin/lm_train.py\", line 139, in main\r\n    train(args)\r\n  File \"/home/christopher/gitrepos/espnet-1/espnet/lm/pytorch_backend/lm.py\", line 421, in train\r\n    trainer.run()\r\n  File \"/home/christopher/gitrepos/espnet-1/tools/venv/lib/python3.6/site-packages/chainer/training/trainer.py\", line 349, in run\r\n    six.reraise(*exc_info)\r\n  File \"/home/christopher/gitrepos/espnet-1/tools/venv/lib/python3.6/site-packages/six.py\", line 693, in reraise\r\n    raise value\r\n  File \"/home/christopher/gitrepos/espnet-1/tools/venv/lib/python3.6/site-packages/chainer/training/trainer.py\", line 319, in run\r\n    entry.extension(self)\r\n  File \"/home/christopher/gitrepos/espnet-1/tools/venv/lib/python3.6/site-packages/chainer/training/extensions/evaluator.py\", line 161, in __call__\r\n    result = self.evaluate()\r\n  File \"/home/christopher/gitrepos/espnet-1/espnet/lm/pytorch_backend/lm.py\", line 309, in evaluate\r\n    x, t = concat_examples(batch, device=self.device, padding=(0, -100))\r\n  File \"/home/christopher/gitrepos/espnet-1/espnet/lm/pytorch_backend/lm.py\", line 229, in concat_examples\r\n    if device is not None and device >= 0:\r\nTypeError: '>=' not supported between instances of 'GpuDevice' and 'int'\r\n```\r\n\r\nThere seems also to be some change to serialization. The following error happened.\r\n```\r\nException in main training loop: 'ClassifierWithState' object has no attribute 'serialize'\r\nTraceback (most recent call last):\r\n  File \"/home/christopher/gitrepos/espnet-1/tools/venv/lib/python3.6/site-packages/chainer/training/trainer.py\", line 319, in run\r\n    entry.extension(self)\r\n  File \"/home/christopher/gitrepos/espnet-1/tools/venv/lib/python3.6/site-packages/chainer/training/extensions/_snapshot.py\", line 224, in __call__\r\n    self._make_snapshot(trainer)\r\n  File \"/home/christopher/gitrepos/espnet-1/tools/venv/lib/python3.6/site-packages/chainer/training/extensions/_snapshot.py\", line 228, in _make_snapshot\r\n    serialized_target = npz.serialize(target)\r\n  File \"/home/christopher/gitrepos/espnet-1/tools/venv/lib/python3.6/site-packages/chainer/serializers/npz.py\", line 79, in serialize\r\n    s.save(obj)\r\n  File \"/home/christopher/gitrepos/espnet-1/tools/venv/lib/python3.6/site-packages/chainer/serializer.py\", line 67, in save\r\n    obj.serialize(self)\r\n  File \"/home/christopher/gitrepos/espnet-1/tools/venv/lib/python3.6/site-packages/torch/nn/modules/module.py\", line 539, in __getattr__\r\n    type(self).__name__, name))\r\nWill finalize trainer extensions and updater before reraising the exception.\r\nTraceback (most recent call last):\r\n  File \"/home/christopher/gitrepos/espnet-1/egs/an4/asr1/../../../espnet/bin/lm_train.py\", line 145, in <module>\r\n    main(sys.argv[1:])\r\n  File \"/home/christopher/gitrepos/espnet-1/egs/an4/asr1/../../../espnet/bin/lm_train.py\", line 139, in main\r\n    train(args)\r\n  File \"/home/christopher/gitrepos/espnet-1/espnet/lm/pytorch_backend/lm.py\", line 421, in train\r\n    trainer.run()\r\n  File \"/home/christopher/gitrepos/espnet-1/tools/venv/lib/python3.6/site-packages/chainer/training/trainer.py\", line 349, in run\r\n    six.reraise(*exc_info)\r\n  File \"/home/christopher/gitrepos/espnet-1/tools/venv/lib/python3.6/site-packages/six.py\", line 693, in reraise\r\n    raise value\r\n  File \"/home/christopher/gitrepos/espnet-1/tools/venv/lib/python3.6/site-packages/chainer/training/trainer.py\", line 319, in run\r\n    entry.extension(self)\r\n  File \"/home/christopher/gitrepos/espnet-1/tools/venv/lib/python3.6/site-packages/chainer/training/extensions/_snapshot.py\", line 224, in __call__\r\n    self._make_snapshot(trainer)\r\n  File \"/home/christopher/gitrepos/espnet-1/tools/venv/lib/python3.6/site-packages/chainer/training/extensions/_snapshot.py\", line 228, in _make_snapshot\r\n    serialized_target = npz.serialize(target)\r\n  File \"/home/christopher/gitrepos/espnet-1/tools/venv/lib/python3.6/site-packages/chainer/serializers/npz.py\", line 79, in serialize\r\n    s.save(obj)\r\n  File \"/home/christopher/gitrepos/espnet-1/tools/venv/lib/python3.6/site-packages/chainer/serializer.py\", line 67, in save\r\n    obj.serialize(self)\r\n  File \"/home/christopher/gitrepos/espnet-1/tools/venv/lib/python3.6/site-packages/torch/nn/modules/module.py\", line 539, in __getattr__\r\n    type(self).__name__, name))\r\nAttributeError: 'ClassifierWithState' object has no attribute 'serialize'\r\n```\r\n\r\nI'm going to create PR that reverts #753 .", "reactions": {"url": "https://api.github.com/repos/espnet/espnet/issues/760/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/espnet/espnet/issues/760/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/espnet/espnet/issues/755", "repository_url": "https://api.github.com/repos/espnet/espnet", "labels_url": "https://api.github.com/repos/espnet/espnet/issues/755/labels{/name}", "comments_url": "https://api.github.com/repos/espnet/espnet/issues/755/comments", "events_url": "https://api.github.com/repos/espnet/espnet/issues/755/events", "html_url": "https://github.com/espnet/espnet/issues/755", "id": 448206059, "node_id": "MDU6SXNzdWU0NDgyMDYwNTk=", "number": 755, "title": "cer_ctc is not working for the transformer", "user": {"login": "sw005320", "id": 11741550, "node_id": "MDQ6VXNlcjExNzQxNTUw", "avatar_url": "https://avatars.githubusercontent.com/u/11741550?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sw005320", "html_url": "https://github.com/sw005320", "followers_url": "https://api.github.com/users/sw005320/followers", "following_url": "https://api.github.com/users/sw005320/following{/other_user}", "gists_url": "https://api.github.com/users/sw005320/gists{/gist_id}", "starred_url": "https://api.github.com/users/sw005320/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sw005320/subscriptions", "organizations_url": "https://api.github.com/users/sw005320/orgs", "repos_url": "https://api.github.com/users/sw005320/repos", "events_url": "https://api.github.com/users/sw005320/events{/privacy}", "received_events_url": "https://api.github.com/users/sw005320/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 777173273, "node_id": "MDU6TGFiZWw3NzcxNzMyNzM=", "url": "https://api.github.com/repos/espnet/espnet/labels/Bug", "name": "Bug", "color": "ee0701", "default": false, "description": "bug should be fixed"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2019-05-24T14:38:42Z", "updated_at": "2019-08-21T05:37:55Z", "closed_at": "2019-08-21T05:37:55Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "It is always 0...\r\n@ShigekiKarita, could you fix it?\r\n\r\n![image](https://user-images.githubusercontent.com/11741550/58335658-0d58a300-7e10-11e9-9f4e-b82df0a56d0f.png)\r\n", "reactions": {"url": "https://api.github.com/repos/espnet/espnet/issues/755/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/espnet/espnet/issues/755/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/espnet/espnet/issues/751", "repository_url": "https://api.github.com/repos/espnet/espnet", "labels_url": "https://api.github.com/repos/espnet/espnet/issues/751/labels{/name}", "comments_url": "https://api.github.com/repos/espnet/espnet/issues/751/comments", "events_url": "https://api.github.com/repos/espnet/espnet/issues/751/events", "html_url": "https://github.com/espnet/espnet/issues/751", "id": 447936696, "node_id": "MDU6SXNzdWU0NDc5MzY2OTY=", "number": 751, "title": "m_ailabs TTS results", "user": {"login": "feddybear", "id": 921006, "node_id": "MDQ6VXNlcjkyMTAwNg==", "avatar_url": "https://avatars.githubusercontent.com/u/921006?v=4", "gravatar_id": "", "url": "https://api.github.com/users/feddybear", "html_url": "https://github.com/feddybear", "followers_url": "https://api.github.com/users/feddybear/followers", "following_url": "https://api.github.com/users/feddybear/following{/other_user}", "gists_url": "https://api.github.com/users/feddybear/gists{/gist_id}", "starred_url": "https://api.github.com/users/feddybear/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/feddybear/subscriptions", "organizations_url": "https://api.github.com/users/feddybear/orgs", "repos_url": "https://api.github.com/users/feddybear/repos", "events_url": "https://api.github.com/users/feddybear/events{/privacy}", "received_events_url": "https://api.github.com/users/feddybear/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 777173273, "node_id": "MDU6TGFiZWw3NzcxNzMyNzM=", "url": "https://api.github.com/repos/espnet/espnet/labels/Bug", "name": "Bug", "color": "ee0701", "default": false, "description": "bug should be fixed"}, {"id": 777173279, "node_id": "MDU6TGFiZWw3NzcxNzMyNzk=", "url": "https://api.github.com/repos/espnet/espnet/labels/Question", "name": "Question", "color": "cc317c", "default": false, "description": "Question"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2019-05-24T01:16:03Z", "updated_at": "2019-05-31T08:14:41Z", "closed_at": "2019-05-31T08:14:41Z", "author_association": "NONE", "active_lock_reason": null, "body": "m_ailabs RESULTS file only seems to point to the info.txt file and not the folder for the generated wav files themselves.", "reactions": {"url": "https://api.github.com/repos/espnet/espnet/issues/751/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/espnet/espnet/issues/751/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/espnet/espnet/issues/741", "repository_url": "https://api.github.com/repos/espnet/espnet", "labels_url": "https://api.github.com/repos/espnet/espnet/issues/741/labels{/name}", "comments_url": "https://api.github.com/repos/espnet/espnet/issues/741/comments", "events_url": "https://api.github.com/repos/espnet/espnet/issues/741/events", "html_url": "https://github.com/espnet/espnet/issues/741", "id": 446677800, "node_id": "MDU6SXNzdWU0NDY2Nzc4MDA=", "number": 741, "title": "no module 'warpctc_pytorch'", "user": {"login": "desothier1", "id": 50878643, "node_id": "MDQ6VXNlcjUwODc4NjQz", "avatar_url": "https://avatars.githubusercontent.com/u/50878643?v=4", "gravatar_id": "", "url": "https://api.github.com/users/desothier1", "html_url": "https://github.com/desothier1", "followers_url": "https://api.github.com/users/desothier1/followers", "following_url": "https://api.github.com/users/desothier1/following{/other_user}", "gists_url": "https://api.github.com/users/desothier1/gists{/gist_id}", "starred_url": "https://api.github.com/users/desothier1/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/desothier1/subscriptions", "organizations_url": "https://api.github.com/users/desothier1/orgs", "repos_url": "https://api.github.com/users/desothier1/repos", "events_url": "https://api.github.com/users/desothier1/events{/privacy}", "received_events_url": "https://api.github.com/users/desothier1/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 777173273, "node_id": "MDU6TGFiZWw3NzcxNzMyNzM=", "url": "https://api.github.com/repos/espnet/espnet/labels/Bug", "name": "Bug", "color": "ee0701", "default": false, "description": "bug should be fixed"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2019-05-21T15:14:16Z", "updated_at": "2020-08-28T21:22:46Z", "closed_at": "2020-08-28T21:22:46Z", "author_association": "NONE", "active_lock_reason": null, "body": "1.In spite of the comments read in this thread I keep getting the issue No module named 'warpctc_pytorch'\r\n2.In espnet/tools/warp-ctc/build 'make' worked for cpu, but not for gpu:\r\nCMakeFiles/test_gpu.dir/all \u00bb failed\r\n\r\n\r\n2019-05-21 16:59:57,957 (asr_train:235) INFO: python path = (None)\r\n2019-05-21 16:59:57,958 (asr_train:238) INFO: random seed = 1\r\n2019-05-21 16:59:57,958 (asr_train:255) INFO: backend = pytorch\r\n2019-05-21 17:00:08,476 (deterministic_utils:24) INFO: torch type check is disabled\r\n2019-05-21 17:00:08,492 (asr:220) INFO: #input dims : 83\r\n2019-05-21 17:00:08,493 (asr:221) INFO: #output dims: 30\r\n2019-05-21 17:00:08,493 (asr:232) INFO: Multitask learning mode\r\n2019-05-21 17:00:08,494 (e2e_asr:86) INFO: subsample: 1 2 2 1 1\r\n2019-05-21 17:00:08,585 (encoders:236) INFO: BLSTM with every-layer projection for encoder\r\nTraceback (most recent call last):\r\n  File \"/home/getalp/desotth/virtenv_pytorch/espnet3/espnet/egs/an4/asr1/../../../espnet/bin/asr_train.py\", line 274, in <module>\r\n    main(sys.argv[1:])\r\n  File \"/home/getalp/desotth/virtenv_pytorch/espnet3/espnet/egs/an4/asr1/../../../espnet/bin/asr_train.py\", line 262, in main\r\n    train(args)\r\n  File \"/data1/home/getalp/desotth/virtenv_pytorch/espnet3/espnet/espnet/asr/pytorch_backend/asr.py\", line 235, in train\r\n    model = E2E(idim, odim, args)\r\n  File \"/data1/home/getalp/desotth/virtenv_pytorch/espnet3/espnet/espnet/nets/pytorch_backend/e2e_asr.py\", line 99, in __init__\r\n    self.ctc = ctc_for(args, odim)\r\n  File \"/data1/home/getalp/desotth/virtenv_pytorch/espnet3/espnet/espnet/nets/pytorch_backend/ctc.py\", line 116, in ctc_for\r\n    ctc_type=args.ctc_type, reduce=reduce)\r\n  File \"/data1/home/getalp/desotth/virtenv_pytorch/espnet3/espnet/espnet/nets/pytorch_backend/ctc.py\", line 31, in __init__\r\n    import warpctc_pytorch as warp_ctc\r\nModuleNotFoundError: No module named 'warpctc_pytorch'\r\n\r\n\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/espnet/espnet/issues/741/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/espnet/espnet/issues/741/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/espnet/espnet/issues/733", "repository_url": "https://api.github.com/repos/espnet/espnet", "labels_url": "https://api.github.com/repos/espnet/espnet/issues/733/labels{/name}", "comments_url": "https://api.github.com/repos/espnet/espnet/issues/733/comments", "events_url": "https://api.github.com/repos/espnet/espnet/issues/733/events", "html_url": "https://github.com/espnet/espnet/issues/733", "id": 445351728, "node_id": "MDU6SXNzdWU0NDUzNTE3Mjg=", "number": 733, "title": "GPU issues with new devices [RTX 2080Ti/V100] inside docker containers", "user": {"login": "Fhrozen", "id": 11988996, "node_id": "MDQ6VXNlcjExOTg4OTk2", "avatar_url": "https://avatars.githubusercontent.com/u/11988996?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Fhrozen", "html_url": "https://github.com/Fhrozen", "followers_url": "https://api.github.com/users/Fhrozen/followers", "following_url": "https://api.github.com/users/Fhrozen/following{/other_user}", "gists_url": "https://api.github.com/users/Fhrozen/gists{/gist_id}", "starred_url": "https://api.github.com/users/Fhrozen/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Fhrozen/subscriptions", "organizations_url": "https://api.github.com/users/Fhrozen/orgs", "repos_url": "https://api.github.com/users/Fhrozen/repos", "events_url": "https://api.github.com/users/Fhrozen/events{/privacy}", "received_events_url": "https://api.github.com/users/Fhrozen/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 777173273, "node_id": "MDU6TGFiZWw3NzcxNzMyNzM=", "url": "https://api.github.com/repos/espnet/espnet/labels/Bug", "name": "Bug", "color": "ee0701", "default": false, "description": "bug should be fixed"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 16, "created_at": "2019-05-17T09:33:12Z", "updated_at": "2019-06-13T15:09:45Z", "closed_at": "2019-06-13T15:09:45Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "I've been having a problem to execute the training in a server with V100, for chainer with mtlalpha > 0. I think that the code of WarpCTC is not supporting them. \r\nI just got a new gpu (RTX2080Ti) and is showing the same issue:\r\n```\r\nTraceback (most recent call last):\r\n  File \"/espnet/egs/an4/asr1/../../../espnet/bin/asr_train.py\", line 274, in <module>\r\n    main(sys.argv[1:])\r\n  File \"/espnet/egs/an4/asr1/../../../espnet/bin/asr_train.py\", line 259, in main\r\n    train(args)\r\n  File \"/espnet/espnet/asr/chainer_backend/asr.py\", line 470, in train\r\n    trainer.run()\r\n  File \"/espnet/tools/venv/lib/python3.7/site-packages/chainer/training/trainer.py\", line 329, in run\r\n    six.reraise(*sys.exc_info())\r\n  File \"/espnet/tools/venv/lib/python3.7/site-packages/six.py\", line 693, in reraise\r\n    raise value\r\n  File \"/espnet/tools/venv/lib/python3.7/site-packages/chainer/training/trainer.py\", line 315, in run\r\n    update()\r\n  File \"/espnet/tools/venv/lib/python3.7/site-packages/chainer/training/updaters/standard_updater.py\", line 165, in update\r\n    self.update_core()\r\n  File \"/espnet/espnet/asr/chainer_backend/asr.py\", line 100, in update_core\r\n    loss = optimizer.target(*x) / self.accum_grad\r\n  File \"/espnet/espnet/nets/chainer_backend/e2e_asr.py\", line 90, in __call__\r\n    loss_ctc = self.ctc(hs, ys)\r\n  File \"/espnet/espnet/nets/chainer_backend/ctc.py\", line 95, in __call__\r\n    self.loss = warp_ctc(y_hat, ilens, [cuda.to_cpu(l.data) for l in ys])[0]\r\n  File \"/espnet/tools/venv/lib/python3.7/site-packages/chainer_ctc/warpctc.py\", line 125, in ctc\r\n    return CTC(seq_lengths, labels)(x)\r\n  File \"/espnet/tools/venv/lib/python3.7/site-packages/chainer/function.py\", line 235, in __call__\r\n    ret = node.apply(inputs)\r\n  File \"/espnet/tools/venv/lib/python3.7/site-packages/chainer/function_node.py\", line 263, in apply\r\n    outputs = self.forward(in_data)\r\n  File \"/espnet/tools/venv/lib/python3.7/site-packages/chainer/function.py\", line 135, in forward\r\n    return self._function.forward(inputs)\r\n  File \"/espnet/tools/venv/lib/python3.7/site-packages/chainer_ctc/warpctc.py\", line 77, in forward\r\n    raise e\r\n  File \"/espnet/tools/venv/lib/python3.7/site-packages/chainer_ctc/warpctc.py\", line 71, in forward\r\n    _ctc()\r\n  File \"/espnet/tools/venv/lib/python3.7/site-packages/chainer_ctc/warpctc.py\", line 68, in _ctc\r\n    stream.ptr)\r\n  File \"chainer_ctc/src/warp_ctc.pyx\", line 67, in chainer_ctc.src.warp_ctc.ctc_compute_ctc_loss_gpu\r\n  File \"chainer_ctc/src/warp_ctc.pyx\", line 87, in chainer_ctc.src.warp_ctc.ctc_compute_ctc_loss_gpu\r\n  File \"chainer_ctc/src/warp_ctc.pyx\", line 47, in chainer_ctc.src.warp_ctc.check_status\r\nchainer_ctc.src.warp_ctc.CTCError: CTC_STATUS_EXECUTION_FAILED: b'execution failed'\r\n```\r\nI did this with docker cuda 10.0 ( on a pc with ubuntu 18.04 and cuda 10.1)\r\nThe training does not raise this error when the mtlalpha is set to 0.0 (but the WER is pretty high).\r\n\r\nAlso, I tried to test espnet with pytorch in the same GPU but i got the following error:\r\n```\r\nTraceback (most recent call last):\r\n  File \"/espnet/egs/an4/asr1/../../../espnet/bin/asr_train.py\", line 274, in <module>\r\n    main(sys.argv[1:])\r\n  File \"/espnet/egs/an4/asr1/../../../espnet/bin/asr_train.py\", line 262, in main\r\n    train(args)\r\n  File \"/espnet/espnet/asr/pytorch_backend/asr.py\", line 267, in train\r\n    model = model.to(device)\r\n  File \"/espnet/tools/venv/lib/python3.7/site-packages/torch/nn/modules/module.py\", line 381, in to\r\n    return self._apply(convert)\r\n  File \"/espnet/tools/venv/lib/python3.7/site-packages/torch/nn/modules/module.py\", line 187, in _apply\r\n    module._apply(fn)\r\n  File \"/espnet/tools/venv/lib/python3.7/site-packages/torch/nn/modules/module.py\", line 187, in _apply\r\n    module._apply(fn)\r\n  File \"/espnet/tools/venv/lib/python3.7/site-packages/torch/nn/modules/module.py\", line 187, in _apply\r\n    module._apply(fn)\r\n  [Previous line repeated 1 more time]\r\n  File \"/espnet/tools/venv/lib/python3.7/site-packages/torch/nn/modules/rnn.py\", line 117, in _apply\r\n    self.flatten_parameters()\r\n  File \"/espnet/tools/venv/lib/python3.7/site-packages/torch/nn/modules/rnn.py\", line 113, in flatten_parameters\r\n    self.batch_first, bool(self.bidirectional))\r\nRuntimeError: cuDNN error: CUDNN_STATUS_EXECUTION_FAILED\r\n```\r\nThe image is the same for executing Chainer so I suppose that there should not be any bad setup on cudnn (This was also tested in another pc before update the docker containers in the hub). \r\nI will check the containers and upload a new ones, but I would like to know if this is may related to a specific device or not.", "reactions": {"url": "https://api.github.com/repos/espnet/espnet/issues/733/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/espnet/espnet/issues/733/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/espnet/espnet/issues/720", "repository_url": "https://api.github.com/repos/espnet/espnet", "labels_url": "https://api.github.com/repos/espnet/espnet/issues/720/labels{/name}", "comments_url": "https://api.github.com/repos/espnet/espnet/issues/720/comments", "events_url": "https://api.github.com/repos/espnet/espnet/issues/720/events", "html_url": "https://github.com/espnet/espnet/issues/720", "id": 442231744, "node_id": "MDU6SXNzdWU0NDIyMzE3NDQ=", "number": 720, "title": "Decoding with rnnLM badly increases CER/WER when ctc_weight=0", "user": {"login": "zz12375", "id": 29814033, "node_id": "MDQ6VXNlcjI5ODE0MDMz", "avatar_url": "https://avatars.githubusercontent.com/u/29814033?v=4", "gravatar_id": "", "url": "https://api.github.com/users/zz12375", "html_url": "https://github.com/zz12375", "followers_url": "https://api.github.com/users/zz12375/followers", "following_url": "https://api.github.com/users/zz12375/following{/other_user}", "gists_url": "https://api.github.com/users/zz12375/gists{/gist_id}", "starred_url": "https://api.github.com/users/zz12375/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/zz12375/subscriptions", "organizations_url": "https://api.github.com/users/zz12375/orgs", "repos_url": "https://api.github.com/users/zz12375/repos", "events_url": "https://api.github.com/users/zz12375/events{/privacy}", "received_events_url": "https://api.github.com/users/zz12375/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 777173273, "node_id": "MDU6TGFiZWw3NzcxNzMyNzM=", "url": "https://api.github.com/repos/espnet/espnet/labels/Bug", "name": "Bug", "color": "ee0701", "default": false, "description": "bug should be fixed"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2019-05-09T13:17:10Z", "updated_at": "2020-01-15T17:42:01Z", "closed_at": "2020-01-15T17:42:01Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi! I am using egs/wsj/asr1/run.sh to train my E2E ASR model. I used the default model architecture and default lsm_weight(0.05) and mtlalpha(0.2). But I noticed a big increase of CER/WER when decoding with word rnnLM and ctc_weight=0. Here is my result on test set eval92:\r\n\r\nlm_weight=xxx, ctc_weight=xxx, CER/WER\r\nlm_weight=0.0, ctc_weight=0.0, 5.4/15.9\r\nlm_weight=1.0, ctc_weight=0.3, 2.6/5.7\r\nlm_weight=1.0, ctc_weight=0.0, 33.1/37.1\r\n\r\nThe first two decoding results seem reasonable, so I think there must be something wrong with the third result. Could you give me some suggests to figure out what happened? Thanks!\r\n\r\nI used pytorch_backend (pytorch==1.0.1) and warp_ctc, the rnnLM is word-level, produced by run.sh.", "reactions": {"url": "https://api.github.com/repos/espnet/espnet/issues/720/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/espnet/espnet/issues/720/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/espnet/espnet/issues/713", "repository_url": "https://api.github.com/repos/espnet/espnet", "labels_url": "https://api.github.com/repos/espnet/espnet/issues/713/labels{/name}", "comments_url": "https://api.github.com/repos/espnet/espnet/issues/713/comments", "events_url": "https://api.github.com/repos/espnet/espnet/issues/713/events", "html_url": "https://github.com/espnet/espnet/issues/713", "id": 440935676, "node_id": "MDU6SXNzdWU0NDA5MzU2NzY=", "number": 713, "title": "Problem is tedlium/asr1", "user": {"login": "gruly", "id": 277515, "node_id": "MDQ6VXNlcjI3NzUxNQ==", "avatar_url": "https://avatars.githubusercontent.com/u/277515?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gruly", "html_url": "https://github.com/gruly", "followers_url": "https://api.github.com/users/gruly/followers", "following_url": "https://api.github.com/users/gruly/following{/other_user}", "gists_url": "https://api.github.com/users/gruly/gists{/gist_id}", "starred_url": "https://api.github.com/users/gruly/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gruly/subscriptions", "organizations_url": "https://api.github.com/users/gruly/orgs", "repos_url": "https://api.github.com/users/gruly/repos", "events_url": "https://api.github.com/users/gruly/events{/privacy}", "received_events_url": "https://api.github.com/users/gruly/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 777173273, "node_id": "MDU6TGFiZWw3NzcxNzMyNzM=", "url": "https://api.github.com/repos/espnet/espnet/labels/Bug", "name": "Bug", "color": "ee0701", "default": false, "description": "bug should be fixed"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2019-05-06T22:50:55Z", "updated_at": "2019-05-07T12:38:04Z", "closed_at": "2019-05-07T12:38:04Z", "author_association": "NONE", "active_lock_reason": null, "body": "The issue #694 was closed but the problem is still existing in the run.sh file of the tedlium/asr1 recipe.\r\nI suggested a fix: https://github.com/espnet/espnet/issues/694\r\n", "reactions": {"url": "https://api.github.com/repos/espnet/espnet/issues/713/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/espnet/espnet/issues/713/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/espnet/espnet/issues/707", "repository_url": "https://api.github.com/repos/espnet/espnet", "labels_url": "https://api.github.com/repos/espnet/espnet/issues/707/labels{/name}", "comments_url": "https://api.github.com/repos/espnet/espnet/issues/707/comments", "events_url": "https://api.github.com/repos/espnet/espnet/issues/707/events", "html_url": "https://github.com/espnet/espnet/issues/707", "id": 437923003, "node_id": "MDU6SXNzdWU0Mzc5MjMwMDM=", "number": 707, "title": "Missing file in iwslt18st recipe", "user": {"login": "gruly", "id": 277515, "node_id": "MDQ6VXNlcjI3NzUxNQ==", "avatar_url": "https://avatars.githubusercontent.com/u/277515?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gruly", "html_url": "https://github.com/gruly", "followers_url": "https://api.github.com/users/gruly/followers", "following_url": "https://api.github.com/users/gruly/following{/other_user}", "gists_url": "https://api.github.com/users/gruly/gists{/gist_id}", "starred_url": "https://api.github.com/users/gruly/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gruly/subscriptions", "organizations_url": "https://api.github.com/users/gruly/orgs", "repos_url": "https://api.github.com/users/gruly/repos", "events_url": "https://api.github.com/users/gruly/events{/privacy}", "received_events_url": "https://api.github.com/users/gruly/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 777173273, "node_id": "MDU6TGFiZWw3NzcxNzMyNzM=", "url": "https://api.github.com/repos/espnet/espnet/labels/Bug", "name": "Bug", "color": "ee0701", "default": false, "description": "bug should be fixed"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 21, "created_at": "2019-04-27T08:57:08Z", "updated_at": "2020-05-16T08:21:33Z", "closed_at": "2020-05-16T08:21:33Z", "author_association": "NONE", "active_lock_reason": null, "body": "Line 106 in run.sh from egs/iwslt18st/st1/: \r\n    local/data_prep_train.sh ${datadir}\r\n--> data_prep_train.sh is missing in local/ directory", "reactions": {"url": "https://api.github.com/repos/espnet/espnet/issues/707/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/espnet/espnet/issues/707/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/espnet/espnet/issues/701", "repository_url": "https://api.github.com/repos/espnet/espnet", "labels_url": "https://api.github.com/repos/espnet/espnet/issues/701/labels{/name}", "comments_url": "https://api.github.com/repos/espnet/espnet/issues/701/comments", "events_url": "https://api.github.com/repos/espnet/espnet/issues/701/events", "html_url": "https://github.com/espnet/espnet/issues/701", "id": 436799540, "node_id": "MDU6SXNzdWU0MzY3OTk1NDA=", "number": 701, "title": "make installing pytorch-cpu instead of pytorch", "user": {"login": "jan-schuchardt", "id": 13921292, "node_id": "MDQ6VXNlcjEzOTIxMjky", "avatar_url": "https://avatars.githubusercontent.com/u/13921292?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jan-schuchardt", "html_url": "https://github.com/jan-schuchardt", "followers_url": "https://api.github.com/users/jan-schuchardt/followers", "following_url": "https://api.github.com/users/jan-schuchardt/following{/other_user}", "gists_url": "https://api.github.com/users/jan-schuchardt/gists{/gist_id}", "starred_url": "https://api.github.com/users/jan-schuchardt/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jan-schuchardt/subscriptions", "organizations_url": "https://api.github.com/users/jan-schuchardt/orgs", "repos_url": "https://api.github.com/users/jan-schuchardt/repos", "events_url": "https://api.github.com/users/jan-schuchardt/events{/privacy}", "received_events_url": "https://api.github.com/users/jan-schuchardt/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 777173273, "node_id": "MDU6TGFiZWw3NzcxNzMyNzM=", "url": "https://api.github.com/repos/espnet/espnet/labels/Bug", "name": "Bug", "color": "ee0701", "default": false, "description": "bug should be fixed"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2019-04-24T16:42:09Z", "updated_at": "2019-04-25T06:59:11Z", "closed_at": "2019-04-25T06:59:10Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "When trying to build espnet today, I noticed the following problem:\r\n\r\nEven though I have a GPU and CUDA is installed, conda always installs pytorch-cpu into the virtual environment that is created upon executing _make_.\r\n\r\nI think this problem can be traced back to 1f758b5445dc8963d0785a612fae8c886342cc10\r\n\r\n```\r\nifeq (($shell which nvidia-smi),) # No 'nvcc' found\r\nCONDA_PYTORCH := pytorch=$(TH_VERSION) cudatoolkit=$(CUDA_VERSION)\r\nelse\r\nCONDA_PYTORCH := pytorch-cpu=$(TH_VERSION)\r\nendif\r\n```\r\n\r\n1.) Syntactically, shouldn't the condition be `$(shell which nvidia-smi)` instead of `($shell which nividia-smi)` ?\r\n2.) Semantically, shouldn't the body of the two conditions be switched? When no nvidia-smi / nvcc is found, we want to install pytorch-cpu. Not the other way around.", "reactions": {"url": "https://api.github.com/repos/espnet/espnet/issues/701/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/espnet/espnet/issues/701/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/espnet/espnet/issues/699", "repository_url": "https://api.github.com/repos/espnet/espnet", "labels_url": "https://api.github.com/repos/espnet/espnet/issues/699/labels{/name}", "comments_url": "https://api.github.com/repos/espnet/espnet/issues/699/comments", "events_url": "https://api.github.com/repos/espnet/espnet/issues/699/events", "html_url": "https://github.com/espnet/espnet/issues/699", "id": 436367656, "node_id": "MDU6SXNzdWU0MzYzNjc2NTY=", "number": 699, "title": "merge_json behavior when no labels.", "user": {"login": "sw005320", "id": 11741550, "node_id": "MDQ6VXNlcjExNzQxNTUw", "avatar_url": "https://avatars.githubusercontent.com/u/11741550?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sw005320", "html_url": "https://github.com/sw005320", "followers_url": "https://api.github.com/users/sw005320/followers", "following_url": "https://api.github.com/users/sw005320/following{/other_user}", "gists_url": "https://api.github.com/users/sw005320/gists{/gist_id}", "starred_url": "https://api.github.com/users/sw005320/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sw005320/subscriptions", "organizations_url": "https://api.github.com/users/sw005320/orgs", "repos_url": "https://api.github.com/users/sw005320/repos", "events_url": "https://api.github.com/users/sw005320/events{/privacy}", "received_events_url": "https://api.github.com/users/sw005320/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 777173273, "node_id": "MDU6TGFiZWw3NzcxNzMyNzM=", "url": "https://api.github.com/repos/espnet/espnet/labels/Bug", "name": "Bug", "color": "ee0701", "default": false, "description": "bug should be fixed"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2019-04-23T20:09:35Z", "updated_at": "2019-05-07T12:30:28Z", "closed_at": "2019-05-07T12:30:28Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "@kamo-naoyuki, I've found that there is a case when we don't have any label output in some utterances for the switchboard evaluation data (`rt03`). But current `data2json.sh` cannot allow such cases \r\nhttps://github.com/espnet/espnet/blob/master/utils/merge_scp2json.py#L210-L214\r\nCan you relax this?\r\nThis check is good for the training data, but it excludes such utterances in the evaluation set, and makes the evaluation different from other benchmarks.", "reactions": {"url": "https://api.github.com/repos/espnet/espnet/issues/699/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/espnet/espnet/issues/699/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/espnet/espnet/issues/695", "repository_url": "https://api.github.com/repos/espnet/espnet", "labels_url": "https://api.github.com/repos/espnet/espnet/issues/695/labels{/name}", "comments_url": "https://api.github.com/repos/espnet/espnet/issues/695/comments", "events_url": "https://api.github.com/repos/espnet/espnet/issues/695/events", "html_url": "https://github.com/espnet/espnet/issues/695", "id": 436146026, "node_id": "MDU6SXNzdWU0MzYxNDYwMjY=", "number": 695, "title": "plot spectrogram on istft enhanced signal", "user": {"login": "ShigekiKarita", "id": 6745326, "node_id": "MDQ6VXNlcjY3NDUzMjY=", "avatar_url": "https://avatars.githubusercontent.com/u/6745326?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ShigekiKarita", "html_url": "https://github.com/ShigekiKarita", "followers_url": "https://api.github.com/users/ShigekiKarita/followers", "following_url": "https://api.github.com/users/ShigekiKarita/following{/other_user}", "gists_url": "https://api.github.com/users/ShigekiKarita/gists{/gist_id}", "starred_url": "https://api.github.com/users/ShigekiKarita/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ShigekiKarita/subscriptions", "organizations_url": "https://api.github.com/users/ShigekiKarita/orgs", "repos_url": "https://api.github.com/users/ShigekiKarita/repos", "events_url": "https://api.github.com/users/ShigekiKarita/events{/privacy}", "received_events_url": "https://api.github.com/users/ShigekiKarita/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 777173273, "node_id": "MDU6TGFiZWw3NzcxNzMyNzM=", "url": "https://api.github.com/repos/espnet/espnet/labels/Bug", "name": "Bug", "color": "ee0701", "default": false, "description": "bug should be fixed"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2019-04-23T11:52:30Z", "updated_at": "2019-04-23T14:54:34Z", "closed_at": "2019-04-23T14:54:34Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "I happened to find bug (?) in the chime4 recipe during my PR #690 \r\nhttps://github.com/espnet/espnet/blob/a58b032d866af027ecf5cc74c10d2afedf6b025f/espnet/asr/pytorch_backend/asr.py#L664-L719\r\nIn this code block, `write enhanced wav` -> `plot spectrogram` will cause error on enhanced signal because the variable `enh` is already `istft` and is not spectrogram anymore. I think it should be  `plot spectrogram` -> `write enhanced wav`. Is it right? @kamo-naoyuki @sw005320 ", "reactions": {"url": "https://api.github.com/repos/espnet/espnet/issues/695/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/espnet/espnet/issues/695/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/espnet/espnet/issues/694", "repository_url": "https://api.github.com/repos/espnet/espnet", "labels_url": "https://api.github.com/repos/espnet/espnet/issues/694/labels{/name}", "comments_url": "https://api.github.com/repos/espnet/espnet/issues/694/comments", "events_url": "https://api.github.com/repos/espnet/espnet/issues/694/events", "html_url": "https://github.com/espnet/espnet/issues/694", "id": 435978942, "node_id": "MDU6SXNzdWU0MzU5Nzg5NDI=", "number": 694, "title": "tedlium asr1 problem", "user": {"login": "fanlu", "id": 1620875, "node_id": "MDQ6VXNlcjE2MjA4NzU=", "avatar_url": "https://avatars.githubusercontent.com/u/1620875?v=4", "gravatar_id": "", "url": "https://api.github.com/users/fanlu", "html_url": "https://github.com/fanlu", "followers_url": "https://api.github.com/users/fanlu/followers", "following_url": "https://api.github.com/users/fanlu/following{/other_user}", "gists_url": "https://api.github.com/users/fanlu/gists{/gist_id}", "starred_url": "https://api.github.com/users/fanlu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/fanlu/subscriptions", "organizations_url": "https://api.github.com/users/fanlu/orgs", "repos_url": "https://api.github.com/users/fanlu/repos", "events_url": "https://api.github.com/users/fanlu/events{/privacy}", "received_events_url": "https://api.github.com/users/fanlu/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 777173273, "node_id": "MDU6TGFiZWw3NzcxNzMyNzM=", "url": "https://api.github.com/repos/espnet/espnet/labels/Bug", "name": "Bug", "color": "ee0701", "default": false, "description": "bug should be fixed"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2019-04-23T03:13:38Z", "updated_at": "2019-05-06T21:42:22Z", "closed_at": "2019-04-24T02:11:02Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "When I user docker to run tedlium asr1 recipe\r\n```\r\n./run.sh --docker_gpu 0,1,2,3 --docker_egs tedlium/asr1 --ngpu 4\r\n```\r\nI got some bugs in stage 5\r\n```\r\nstage 5: Decoding\r\n2019-04-22 17:47:02,929 (splitjson:35) INFO: /espnet/tools/venv/bin/python /espnet/egs/tedlium/asr1/../../../utils/splitjson.py --parts 32 dump/dev/deltafalse/data.json\r\n2019-04-22 17:47:02,932 (splitjson:35) INFO: /espnet/tools/venv/bin/python /espnet/egs/tedlium/asr1/../../../utils/splitjson.py --parts 32 dump/test/deltafalse/data.json\r\n2019-04-22 17:47:02,981 (splitjson:47) INFO: number of utterances = 507\r\n2019-04-22 17:47:03,022 (splitjson:47) INFO: number of utterances = 1155\r\nrun.pl: 32 / 32 failed, log is in exp/train_trim_pytorch_vggblstmp_e4_subsample1_2_2_1_1_unit320_proj320_d1_unit300_location_adim320_aconvc10_aconvf100_mtlalpha0.5_adadelta_sampprob0.0_bs30_mli800_mlo150/decode_test_beam20_emodel.acc.best_p0.0_len0.0-0.0_ctcw0.3_rnnlm1.0_1layer_unit1000_sgd_bs300_word65000/log/decode.*.log\r\nrun.pl: 32 / 32 failed, log is in exp/train_trim_pytorch_vggblstmp_e4_subsample1_2_2_1_1_unit320_proj320_d1_unit300_location_adim320_aconvc10_aconvf100_mtlalpha0.5_adadelta_sampprob0.0_bs30_mli800_mlo150/decode_dev_beam20_emodel.acc.best_p0.0_len0.0-0.0_ctcw0.3_rnnlm1.0_1layer_unit1000_sgd_bs300_word65000/log/decode.*.log\r\n./run.sh: 2 background jobs are failed.\r\nrun.sh done.\r\n```\r\n```\r\n# asr_recog.py --ngpu 0 --backend pytorch --debugmode 1 --verbose 0 --recog-json dump/test/deltafalse/split32utt/data.1.json --result-label    exp/train_trim_pytorch_vggblstmp_e6_subsample1_2_2_1_1_unit320_proj320_d1_unit300_location_adim320_aconvc10_aconvf100_mtlalpha0.               5_adadelta_sampprob0.0_bs30_mli800_mlo150/decode_test_beam20_emodel.acc.best_p0.0_len0.0-0.0_ctcw0.3_rnnlm1.                                   0_1layer_unit1000_sgd_bs300_word65000/data.1.json --model exp/                                                                                 train_trim_pytorch_vggblstmp_e6_subsample1_2_2_1_1_unit320_proj320_d1_unit300_location_adim320_aconvc10_aconvf100_mtlalpha0.                   5_adadelta_sampprob0.0_bs30_mli800_mlo150/results/model.acc.best --beam-size 20 --penalty 0.0 --maxlenratio 0.0 --minlenratio 0.0 --ctc-       weight 0.3 --rnnlm exp/train_rnnlm_pytorch_1layer_unit1000_sgd_bs300_word65000/rnnlm.model.best --lm-weight 1.0 --word-rnnlm exp/              train_rnnlm_pytorch_1layer_unit1000_sgd_bs300_word65000/rnnlm.model.best\r\n # Started at Mon Apr 22 17:20:14 UTC 2019\r\n #\r\n 2019-04-22 17:20:15,087 (asr_recog:91) WARNING: Skip DEBUG/INFO messages\r\n 2019-04-22 17:20:17,292 (e2e_asr:85) WARNING: Subsampling is not performed for vgg*. It is performed in max pooling layers at CNN.\r\n Traceback (most recent call last):\r\n   File \"/espnet/egs/tedlium/asr1/../../../espnet/bin/asr_recog.py\", line 135, in <module>\r\n     main(sys.argv[1:])\r\n   File \"/espnet/egs/tedlium/asr1/../../../espnet/bin/asr_recog.py\", line 123, in main\r\n     recog(args)\r\n   File \"/espnet/espnet/asr/pytorch_backend/asr.py\", line 443, in recog\r\n     torch_load(args.rnnlm, rnnlm)\r\n   File \"/espnet/espnet/asr/asr_utils.py\", line 390, in torch_load\r\n     model.load_state_dict(model_state_dict)\r\n   File \"/espnet/tools/venv/lib/python3.7/site-packages/torch/nn/modules/module.py\", line 769, in load_state_dict\r\n     self.__class__.__name__, \"\\n\\t\".join(error_msgs)))\r\n RuntimeError: Error(s) in loading state_dict for ClassifierWithState:\r\n     size mismatch for predictor.embed.weight: copying a param with shape torch.Size([65003, 1000]) from checkpoint, the shape in current       model is torch.Size([34, 1000]).\r\n     size mismatch for predictor.lo.weight: copying a param with shape torch.Size([65003, 1000]) from checkpoint, the shape in current model    is torch.Size([34, 1000]).\r\n     size mismatch for predictor.lo.bias: copying a param with shape torch.Size([65003]) from checkpoint, the shape in current model is torch.  Size([34]).\r\n # Accounting: time=8 threads=1                                                                                                                 # Ended (code 1) at Mon Apr 22 17:20:22 UTC 2019, elapsed time 8 seconds\r\n```", "reactions": {"url": "https://api.github.com/repos/espnet/espnet/issues/694/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/espnet/espnet/issues/694/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/espnet/espnet/issues/667", "repository_url": "https://api.github.com/repos/espnet/espnet", "labels_url": "https://api.github.com/repos/espnet/espnet/issues/667/labels{/name}", "comments_url": "https://api.github.com/repos/espnet/espnet/issues/667/comments", "events_url": "https://api.github.com/repos/espnet/espnet/issues/667/events", "html_url": "https://github.com/espnet/espnet/issues/667", "id": 427543199, "node_id": "MDU6SXNzdWU0Mjc1NDMxOTk=", "number": 667, "title": "Inconsistenant calculation of WER/CER", "user": {"login": "boeddeker", "id": 13744128, "node_id": "MDQ6VXNlcjEzNzQ0MTI4", "avatar_url": "https://avatars.githubusercontent.com/u/13744128?v=4", "gravatar_id": "", "url": "https://api.github.com/users/boeddeker", "html_url": "https://github.com/boeddeker", "followers_url": "https://api.github.com/users/boeddeker/followers", "following_url": "https://api.github.com/users/boeddeker/following{/other_user}", "gists_url": "https://api.github.com/users/boeddeker/gists{/gist_id}", "starred_url": "https://api.github.com/users/boeddeker/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/boeddeker/subscriptions", "organizations_url": "https://api.github.com/users/boeddeker/orgs", "repos_url": "https://api.github.com/users/boeddeker/repos", "events_url": "https://api.github.com/users/boeddeker/events{/privacy}", "received_events_url": "https://api.github.com/users/boeddeker/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 777173273, "node_id": "MDU6TGFiZWw3NzcxNzMyNzM=", "url": "https://api.github.com/repos/espnet/espnet/labels/Bug", "name": "Bug", "color": "ee0701", "default": false, "description": "bug should be fixed"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2019-04-01T07:03:15Z", "updated_at": "2020-05-16T08:20:17Z", "closed_at": "2020-05-16T08:20:17Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "I found two ways of calculating the CERs in espnet.\r\nThe first has problems with zero length reference transcriptions.\r\nAFAIK is the second the way kaldi calculates the WER.\r\n\r\nhttps://github.com/espnet/espnet/blob/a54a001dcc3a8797febbb9c332df17f03e9afdd5/espnet/nets/pytorch_backend/e2e_asr.py#L222-L225\r\n\r\nhttps://github.com/espnet/espnet/blob/a54a001dcc3a8797febbb9c332df17f03e9afdd5/espnet/nets/pytorch_backend/e2e_asr_mix.py#L314-L318\r\n\r\nEdit:\r\nSorry, I was not carefully reading the second use. Both are the same.\r\n\r\nNevertheless, I think the way of calculating the WER/CER is different from KALDI.\r\nIs this intended?\r\n\r\n```python\r\nkalid_wer = sum(editdistances) / sum(reference_lengthes) \r\nespnet_wer = mean(e / r for e, r in zip(editdistances, reference_lengthes))\r\n```", "reactions": {"url": "https://api.github.com/repos/espnet/espnet/issues/667/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/espnet/espnet/issues/667/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/espnet/espnet/issues/665", "repository_url": "https://api.github.com/repos/espnet/espnet", "labels_url": "https://api.github.com/repos/espnet/espnet/issues/665/labels{/name}", "comments_url": "https://api.github.com/repos/espnet/espnet/issues/665/comments", "events_url": "https://api.github.com/repos/espnet/espnet/issues/665/events", "html_url": "https://github.com/espnet/espnet/issues/665", "id": 426891177, "node_id": "MDU6SXNzdWU0MjY4OTExNzc=", "number": 665, "title": "recognize_beam_batch throws an error AttributeError: 'list' object has no attribute 'view' because a_prev is None (fails for all coverage, location, multi_head variants)", "user": {"login": "sknadig", "id": 3745694, "node_id": "MDQ6VXNlcjM3NDU2OTQ=", "avatar_url": "https://avatars.githubusercontent.com/u/3745694?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sknadig", "html_url": "https://github.com/sknadig", "followers_url": "https://api.github.com/users/sknadig/followers", "following_url": "https://api.github.com/users/sknadig/following{/other_user}", "gists_url": "https://api.github.com/users/sknadig/gists{/gist_id}", "starred_url": "https://api.github.com/users/sknadig/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sknadig/subscriptions", "organizations_url": "https://api.github.com/users/sknadig/orgs", "repos_url": "https://api.github.com/users/sknadig/repos", "events_url": "https://api.github.com/users/sknadig/events{/privacy}", "received_events_url": "https://api.github.com/users/sknadig/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 777173273, "node_id": "MDU6TGFiZWw3NzcxNzMyNzM=", "url": "https://api.github.com/repos/espnet/espnet/labels/Bug", "name": "Bug", "color": "ee0701", "default": false, "description": "bug should be fixed"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2019-03-29T09:20:47Z", "updated_at": "2019-04-10T07:38:04Z", "closed_at": "2019-04-10T07:38:03Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "In [decoders.py#L457](https://github.com/espnet/espnet/blob/master/espnet/nets/pytorch_backend/decoders.py#L457) `a_prev` is not updated, it is always `None`.\r\nThis results in the [condition for handling list](https://github.com/espnet/espnet/blob/master/espnet/nets/pytorch_backend/decoders.py#L515) `if not isinstance(a_prev, list)` to be True always.\r\n`att_w` will be a list for thest attention mechanisms, `att_w.view(n_bb, -1)` fails.\r\n`AttributeError: 'list' object has no attribute 'view'`\r\n\r\nOne solution is to use `att_w` instead of `a_prev` while calling `self.att` at [decoders.py#L457](https://github.com/espnet/espnet/blob/master/espnet/nets/pytorch_backend/decoders.py#L457)\r\n`att_c, att_w = self.att[att_idx](exp_h, exp_hlens, self.dropout_dec[0](z_prev[0]), a_prev)`\r\n\r\nI think this is related to #510 ", "reactions": {"url": "https://api.github.com/repos/espnet/espnet/issues/665/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/espnet/espnet/issues/665/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/espnet/espnet/issues/661", "repository_url": "https://api.github.com/repos/espnet/espnet", "labels_url": "https://api.github.com/repos/espnet/espnet/issues/661/labels{/name}", "comments_url": "https://api.github.com/repos/espnet/espnet/issues/661/comments", "events_url": "https://api.github.com/repos/espnet/espnet/issues/661/events", "html_url": "https://github.com/espnet/espnet/issues/661", "id": 425927081, "node_id": "MDU6SXNzdWU0MjU5MjcwODE=", "number": 661, "title": "AttributeError: 'list' object has no attribute 'repeat' in recognize_batch( ) because hlens is not a torch.tensor( )", "user": {"login": "sknadig", "id": 3745694, "node_id": "MDQ6VXNlcjM3NDU2OTQ=", "avatar_url": "https://avatars.githubusercontent.com/u/3745694?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sknadig", "html_url": "https://github.com/sknadig", "followers_url": "https://api.github.com/users/sknadig/followers", "following_url": "https://api.github.com/users/sknadig/following{/other_user}", "gists_url": "https://api.github.com/users/sknadig/gists{/gist_id}", "starred_url": "https://api.github.com/users/sknadig/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sknadig/subscriptions", "organizations_url": "https://api.github.com/users/sknadig/orgs", "repos_url": "https://api.github.com/users/sknadig/repos", "events_url": "https://api.github.com/users/sknadig/events{/privacy}", "received_events_url": "https://api.github.com/users/sknadig/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 777173273, "node_id": "MDU6TGFiZWw3NzcxNzMyNzM=", "url": "https://api.github.com/repos/espnet/espnet/labels/Bug", "name": "Bug", "color": "ee0701", "default": false, "description": "bug should be fixed"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2019-03-27T12:18:26Z", "updated_at": "2019-04-10T07:37:48Z", "closed_at": "2019-04-10T07:37:48Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Linux ppc64le GNU/Linux\r\nPyTorch  0.4.1\r\nUbuntu 18.04\r\n\r\nIn /espnet/espnet/nets/pytorch_backend/e2e_asr.py [line 355](https://github.com/espnet/espnet/blob/master/espnet/nets/pytorch_backend/e2e_asr.py#L355)\r\n`y = self.dec.recognize_beam_batch(hpad, hlens, lpz, recog_args, char_list, rnnlm)`\r\nthrows an error `AttributeError: 'list' object has no attribute 'repeat'` during decoding.\r\n\r\nIf I convert the array to `torch.tensor(hlens)`\r\n`y = self.dec.recognize_beam_batch(hpad, torch.tensor(hlens), lpz, recog_args, char_list, rnnlm)`\r\nI get `RuntimeError: Could not infer dtype of numpy.int64`\r\n\r\nI tried this solution from [PyTorch issue 8365](https://github.com/pytorch/pytorch/issues/8365#issuecomment-447657233)\r\n`hlens = list(map(int, hlens))`\r\n`y = self.dec.recognize_beam_batch(hpad, torch.tensor(hlens), lpz, recog_args, char_list, rnnlm)`\r\nThis fixes the issue.\r\n\r\nI have not tested this one PyTorch 1.0 (PyTorch issue 8365 says it is fixed in 1.0).", "reactions": {"url": "https://api.github.com/repos/espnet/espnet/issues/661/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/espnet/espnet/issues/661/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/espnet/espnet/issues/659", "repository_url": "https://api.github.com/repos/espnet/espnet", "labels_url": "https://api.github.com/repos/espnet/espnet/issues/659/labels{/name}", "comments_url": "https://api.github.com/repos/espnet/espnet/issues/659/comments", "events_url": "https://api.github.com/repos/espnet/espnet/issues/659/events", "html_url": "https://github.com/espnet/espnet/issues/659", "id": 424313229, "node_id": "MDU6SXNzdWU0MjQzMTMyMjk=", "number": 659, "title": "ami recipe: RuntimeError: The keys are mismatch", "user": {"login": "shinotk15", "id": 15014204, "node_id": "MDQ6VXNlcjE1MDE0MjA0", "avatar_url": "https://avatars.githubusercontent.com/u/15014204?v=4", "gravatar_id": "", "url": "https://api.github.com/users/shinotk15", "html_url": "https://github.com/shinotk15", "followers_url": "https://api.github.com/users/shinotk15/followers", "following_url": "https://api.github.com/users/shinotk15/following{/other_user}", "gists_url": "https://api.github.com/users/shinotk15/gists{/gist_id}", "starred_url": "https://api.github.com/users/shinotk15/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/shinotk15/subscriptions", "organizations_url": "https://api.github.com/users/shinotk15/orgs", "repos_url": "https://api.github.com/users/shinotk15/repos", "events_url": "https://api.github.com/users/shinotk15/events{/privacy}", "received_events_url": "https://api.github.com/users/shinotk15/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 777173273, "node_id": "MDU6TGFiZWw3NzcxNzMyNzM=", "url": "https://api.github.com/repos/espnet/espnet/labels/Bug", "name": "Bug", "color": "ee0701", "default": false, "description": "bug should be fixed"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2019-03-22T17:09:55Z", "updated_at": "2020-10-07T10:56:31Z", "closed_at": "2020-05-15T10:13:01Z", "author_association": "NONE", "active_lock_reason": null, "body": "In run.sh in the ami recipe, the following command is skipped in the default setting.\r\n   if [ ! -d data/local/downloads ]; then\r\n       local/ami_text_prep.sh data/local/downloads\r\n   fi\r\nBut then, the following error occurs.\r\nError: File data/local/annotations/train.txt no found (run ami_text_prep.sh).\r\n\r\nIf we comment out the \"if\" condition and force the ami_text_prep.sh script is executed, data/local/annotations/train.txt is created.\r\n\r\nHowever, then we encounter the following error:\r\nRuntimeError: The keys are mismatch at 64th line between \"data/ihm_train/tmp-5tXmf/input/feat.scp\" and \"data/ihm_train/tmp-5tXmf/output/shape.scp\":\r\n\r\nCould you give us a hint was is wrong?", "reactions": {"url": "https://api.github.com/repos/espnet/espnet/issues/659/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/espnet/espnet/issues/659/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/espnet/espnet/issues/656", "repository_url": "https://api.github.com/repos/espnet/espnet", "labels_url": "https://api.github.com/repos/espnet/espnet/issues/656/labels{/name}", "comments_url": "https://api.github.com/repos/espnet/espnet/issues/656/comments", "events_url": "https://api.github.com/repos/espnet/espnet/issues/656/events", "html_url": "https://github.com/espnet/espnet/issues/656", "id": 423011410, "node_id": "MDU6SXNzdWU0MjMwMTE0MTA=", "number": 656, "title": "there is a problem in installation with compiled Kaldi", "user": {"login": "liuchenbaidu", "id": 20473182, "node_id": "MDQ6VXNlcjIwNDczMTgy", "avatar_url": "https://avatars.githubusercontent.com/u/20473182?v=4", "gravatar_id": "", "url": "https://api.github.com/users/liuchenbaidu", "html_url": "https://github.com/liuchenbaidu", "followers_url": "https://api.github.com/users/liuchenbaidu/followers", "following_url": "https://api.github.com/users/liuchenbaidu/following{/other_user}", "gists_url": "https://api.github.com/users/liuchenbaidu/gists{/gist_id}", "starred_url": "https://api.github.com/users/liuchenbaidu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/liuchenbaidu/subscriptions", "organizations_url": "https://api.github.com/users/liuchenbaidu/orgs", "repos_url": "https://api.github.com/users/liuchenbaidu/repos", "events_url": "https://api.github.com/users/liuchenbaidu/events{/privacy}", "received_events_url": "https://api.github.com/users/liuchenbaidu/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 777173273, "node_id": "MDU6TGFiZWw3NzcxNzMyNzM=", "url": "https://api.github.com/repos/espnet/espnet/labels/Bug", "name": "Bug", "color": "ee0701", "default": false, "description": "bug should be fixed"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2019-03-20T00:21:28Z", "updated_at": "2019-04-10T07:37:27Z", "closed_at": "2019-04-10T07:37:27Z", "author_association": "NONE", "active_lock_reason": null, "body": "when i run make KALDI=mykaldipath,it gives error. my pip version is 19.0.3.the python version is 2.7.15\r\n \r\nMatplotlib 3.0+ does not support Python 2.x, 3.0, 3.1, 3.2, 3.3, or 3.4.\r\n    Beginning with Matplotlib 3.0, Python 3.5 and above is required.\r\n\r\n    This may be due to an out of date pip.\r\n\r\n    Make sure you have pip >= 9.0.1.\r\n\r\n\r\n    ----------------------------------------\r\nCommand \"python setup.py egg_info\" failed with error code 1 in /tmp/pip-install-40ek3V/matplotlib/\r\n", "reactions": {"url": "https://api.github.com/repos/espnet/espnet/issues/656/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/espnet/espnet/issues/656/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/espnet/espnet/issues/621", "repository_url": "https://api.github.com/repos/espnet/espnet", "labels_url": "https://api.github.com/repos/espnet/espnet/issues/621/labels{/name}", "comments_url": "https://api.github.com/repos/espnet/espnet/issues/621/comments", "events_url": "https://api.github.com/repos/espnet/espnet/issues/621/events", "html_url": "https://github.com/espnet/espnet/issues/621", "id": 416381301, "node_id": "MDU6SXNzdWU0MTYzODEzMDE=", "number": 621, "title": "Error while install mecab-python3", "user": {"login": "coalboss", "id": 39045816, "node_id": "MDQ6VXNlcjM5MDQ1ODE2", "avatar_url": "https://avatars.githubusercontent.com/u/39045816?v=4", "gravatar_id": "", "url": "https://api.github.com/users/coalboss", "html_url": "https://github.com/coalboss", "followers_url": "https://api.github.com/users/coalboss/followers", "following_url": "https://api.github.com/users/coalboss/following{/other_user}", "gists_url": "https://api.github.com/users/coalboss/gists{/gist_id}", "starred_url": "https://api.github.com/users/coalboss/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/coalboss/subscriptions", "organizations_url": "https://api.github.com/users/coalboss/orgs", "repos_url": "https://api.github.com/users/coalboss/repos", "events_url": "https://api.github.com/users/coalboss/events{/privacy}", "received_events_url": "https://api.github.com/users/coalboss/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 777173273, "node_id": "MDU6TGFiZWw3NzcxNzMyNzM=", "url": "https://api.github.com/repos/espnet/espnet/labels/Bug", "name": "Bug", "color": "ee0701", "default": false, "description": "bug should be fixed"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 7, "created_at": "2019-03-02T10:01:19Z", "updated_at": "2020-04-07T10:04:22Z", "closed_at": "2019-03-04T13:30:20Z", "author_association": "NONE", "active_lock_reason": null, "body": "while **PATH=$(PWD)/swig/bin:$(PWD)/mecab/bin:$(PATH) pip install mecab-python3**, there is a error:\r\n\r\n1. Collecting mecab-python3\r\n2.   Retrying (Retry(total=4, connect=None, read=None, redirect=None, status=None)) after connection broken by 'NewConnectionError('<pip._vendor.urllib3.connection.VerifiedHTTPSConnection object at 0x7fe4446514a8>: Failed to establish a new connection: [Errno 101] Network is unreachable')': /simple/mecab-python3/\r\n3.   Using cached https://files.pythonhosted.org/packages/ac/48/295efe525df40cbc2173748eb869290e81a57e835bc41f6d3834fc5dad5f/mecab-python3-0.996.1.tar.gz\r\n4. Building wheels for collected packages: mecab-python3\r\n5.   Building wheel for mecab-python3 (setup.py) ... error\r\n6.   Complete output from command /home/hangchen/.conda/envs/espnet_py37/bin/python -u -c \"import setuptools, tokenize;__file__='/tmp/pip-install-xaezj77b/mecab-python3/setup.py';f=getattr(tokenize, 'open', open)(__file__);code=f.read().replace('\\r\\n', '\\n');f.close();exec(compile(code, __file__, 'exec'))\" bdist_wheel -d /tmp/pip-wheel-gzdbrlct --python-tag cp37:\r\n7.   running bdist_wheel\r\n8.   running build\r\n9.   running build_py\r\n10.   running build_ext\r\n11.   building '_MeCab' extension\r\n12.   swigging MeCab.i to MeCab_wrap.cpp\r\n13.   swig -python -shadow -c++ -I/home/hangchen/tools/espnet-master/tools/mecab/include -o MeCab_wrap.cpp MeCab.i\r\n14.   swig: error while loading shared libraries: libpcre.so.1: cannot open shared object file: No such file or directory\r\n15.   error: command 'swig' failed with exit status 127\r\n16.   \r\n17.   ----------------------------------------\r\n18.   Failed building wheel for mecab-python3\r\n19.   Running setup.py clean for mecab-python3\r\n20. Failed to build mecab-python3\r\n21. Installing collected packages: mecab-python3\r\n22.   Running setup.py install for mecab-python3 ... error\r\n23.     Complete output from command /home/hangchen/.conda/envs/espnet_py37/bin/python -u -c \"import setuptools, tokenize;__file__='/tmp/pip-install-xaezj77b/mecab-python3/setup.py';f=getattr(tokenize, 'open', open)(__file__);code=f.read().replace('\\r\\n', '\\n');f.close();exec(compile(code, __file__, 'exec'))\" install --record /tmp/pip-record-68m2p1fo/install-record.txt --single-version-externally-managed --compile:\r\n24.     running install\r\n25.     running build\r\n26.     running build_py\r\n27.     running build_ext\r\n28.     building '_MeCab' extension\r\n29.     swigging MeCab.i to MeCab_wrap.cpp\r\n30.     swig -python -shadow -c++ -I/home/hangchen/tools/espnet-master/tools/mecab/include -o MeCab_wrap.cpp MeCab.i\r\n31.     swig: error while loading shared libraries: libpcre.so.1: cannot open shared object file: No such file or directory\r\n32.     error: command 'swig' failed with exit status 127\r\n33.     \r\n34.     ----------------------------------------\r\n35. Command \"/home/hangchen/.conda/envs/espnet_py37/bin/python -u -c \"import setuptools, tokenize;__file__='/tmp/pip-install-xaezj77b/mecab-python3/setup.py';f=getattr(tokenize, 'open', open)(__file__);code=f.read().replace('\\r\\n', '\\n');f.close();exec(compile(code, __file__, 'exec'))\" install --record /tmp/pip-record-68m2p1fo/install-record.txt --single-version-externally-managed --compile\" failed with error code 1 in /tmp/pip-install-xaezj77b/mecab-python3/\r\n36. Makefile:105: recipe for target 'mecab.done' failed\r\n37. make: *** [mecab.done] Error 1\r\nBut, i already install libprce3-dev, what can do with this error?", "reactions": {"url": "https://api.github.com/repos/espnet/espnet/issues/621/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/espnet/espnet/issues/621/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/espnet/espnet/issues/616", "repository_url": "https://api.github.com/repos/espnet/espnet", "labels_url": "https://api.github.com/repos/espnet/espnet/issues/616/labels{/name}", "comments_url": "https://api.github.com/repos/espnet/espnet/issues/616/comments", "events_url": "https://api.github.com/repos/espnet/espnet/issues/616/events", "html_url": "https://github.com/espnet/espnet/issues/616", "id": 415203054, "node_id": "MDU6SXNzdWU0MTUyMDMwNTQ=", "number": 616, "title": "Conversion of AttributeDict with vars() returns unexpected results", "user": {"login": "kan-bayashi", "id": 22779813, "node_id": "MDQ6VXNlcjIyNzc5ODEz", "avatar_url": "https://avatars.githubusercontent.com/u/22779813?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kan-bayashi", "html_url": "https://github.com/kan-bayashi", "followers_url": "https://api.github.com/users/kan-bayashi/followers", "following_url": "https://api.github.com/users/kan-bayashi/following{/other_user}", "gists_url": "https://api.github.com/users/kan-bayashi/gists{/gist_id}", "starred_url": "https://api.github.com/users/kan-bayashi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kan-bayashi/subscriptions", "organizations_url": "https://api.github.com/users/kan-bayashi/orgs", "repos_url": "https://api.github.com/users/kan-bayashi/repos", "events_url": "https://api.github.com/users/kan-bayashi/events{/privacy}", "received_events_url": "https://api.github.com/users/kan-bayashi/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 777173273, "node_id": "MDU6TGFiZWw3NzcxNzMyNzM=", "url": "https://api.github.com/repos/espnet/espnet/labels/Bug", "name": "Bug", "color": "ee0701", "default": false, "description": "bug should be fixed"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 7, "created_at": "2019-02-27T16:09:11Z", "updated_at": "2019-02-28T12:49:49Z", "closed_at": "2019-02-28T01:14:04Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "I found a bug. \r\nIn training phase, `train_args` is `argparse.Namespace`.\r\nSo `vars(train_args)` convert into dict as follows.\r\n\r\n```python\r\n(Pdb) train_args\r\nNamespace(aconv_chans=10, aconv_filts=100, adim=320, aheads=4, asr_model=False, atype='location', awin=5, backend='pytorch', batch_size=30, beam_size=4, char_list=['<blank>', '<unk>', '<space>', 'A', 'B', 'C', 'D', 'E', 'F', 'G', 'H', 'I', 'J', 'K', 'L', 'M', 'N', 'O', 'P', 'Q', 'R', 'S', 'T', 'U', 'V', 'W', 'X', 'Y', 'Z', '<eos>'], criterion='acc', ctc_type='warpctc', ctc_weight=0.3, debugdir='exp/train_nodev_pytorch_blstmp_e4_subsample1_2_2_1_1_unit320_proj320_d1_unit300_location_aconvc10_aconvf100_mtlalpha0.5_adadelta_sampprob0.0_bs30_mli800_mlo150', debugmode=1, dict='data/lang_1char/train_nodev_units.txt', dlayers=1, dropout_rate=0.0, dropout_rate_decoder=0.0, dtype='lstm', dunits=300, early_stop_criterion='validation/main/acc', elayers=4, elayers_sd=4, epochs=20, eprojs=320, eps=1e-08, eps_decay=0.01, etype='blstmp', eunits=320, grad_clip=5, lm_weight=0.1, lsm_type='', lsm_weight=0.0, maxlen_in=800, maxlen_out=150, maxlenratio=0.0, minibatches=0, minlenratio=0.0, mt_model=False, mtlalpha=0.5, n_iter_processes=0, nbest=1, ngpu=1, num_save_attention=3, num_spkrs=1, opt='adadelta', outdir='exp/train_nodev_pytorch_blstmp_e4_subsample1_2_2_1_1_unit320_proj320_d1_unit300_location_aconvc10_aconvf100_mtlalpha0.5_adadelta_sampprob0.0_bs30_mli800_mlo150/results', patience=3, penalty=0.0, preprocess_conf=None, report_cer=False, report_wer=False, resume=None, rnnlm=None, rnnlm_conf=None, sampling_probability=0.0, seed=1, sortagrad=0, spa=False, subsample='1_2_2_1_1', sym_blank='<blank>', sym_space='<space>', tensorboard_dir='tensorboard/train_nodev_pytorch_blstmp_e4_subsample1_2_2_1_1_unit320_proj320_d1_unit300_location_aconvc10_aconvf100_mtlalpha0.5_adadelta_sampprob0.0_bs30_mli800_mlo150', threshold=0.0001, train_json='dump/train_nodev/deltafalse/data.json', valid_json='dump/train_dev/deltafalse/data.json', verbose=1, weight_decay=0.0)\r\n\r\n\r\n(Pdb) vars(train_args)\r\n{'aconv_chans': 10, 'aconv_filts': 100, 'adim': 320, 'aheads': 4, 'asr_model': False, 'atype': 'location', 'awin': 5, 'backend': 'pytorch', 'batch_size': 30, 'beam_size': 4, 'char_list': ['<blank>', '<unk>', '<space>', 'A', 'B', 'C', 'D', 'E', 'F', 'G', 'H', 'I', 'J', 'K', 'L', 'M', 'N', 'O', 'P', 'Q', 'R', 'S', 'T', 'U', 'V', 'W', 'X', 'Y', 'Z', '<eos>'], 'criterion': 'acc', 'ctc_type': 'warpctc', 'ctc_weight': 0.3, 'debugdir': 'exp/train_nodev_pytorch_blstmp_e4_subsample1_2_2_1_1_unit320_proj320_d1_unit300_location_aconvc10_aconvf100_mtlalpha0.5_adadelta_sampprob0.0_bs30_mli800_mlo150', 'debugmode': 1, 'dict': 'data/lang_1char/train_nodev_units.txt', 'dlayers': 1, 'dropout_rate': 0.0, 'dropout_rate_decoder': 0.0, 'dtype': 'lstm', 'dunits': 300, 'early_stop_criterion': 'validation/main/acc', 'elayers': 4, 'elayers_sd': 4, 'epochs': 20, 'eprojs': 320, 'eps': 1e-08, 'eps_decay': 0.01, 'etype': 'blstmp', 'eunits': 320, 'grad_clip': 5, 'lm_weight': 0.1, 'lsm_type': '', 'lsm_weight': 0.0, 'maxlen_in': 800, 'maxlen_out': 150, 'maxlenratio': 0.0, 'minibatches': 0, 'minlenratio': 0.0, 'mt_model': False, 'mtlalpha': 0.5, 'n_iter_processes': 0, 'nbest': 1, 'ngpu': 1, 'num_save_attention': 3, 'num_spkrs': 1, 'opt': 'adadelta', 'outdir': 'exp/train_nodev_pytorch_blstmp_e4_subsample1_2_2_1_1_unit320_proj320_d1_unit300_location_aconvc10_aconvf100_mtlalpha0.5_adadelta_sampprob0.0_bs30_mli800_mlo150/results', 'patience': 3, 'penalty': 0.0, 'preprocess_conf': None, 'report_cer': False, 'report_wer': False, 'resume': None, 'rnnlm': None, 'rnnlm_conf': None, 'sampling_probability': 0.0, 'seed': 1, 'sortagrad': 0, 'spa': False, 'subsample': '1_2_2_1_1', 'sym_blank': '<blank>', 'sym_space': '<space>', 'tensorboard_dir': 'tensorboard/train_nodev_pytorch_blstmp_e4_subsample1_2_2_1_1_unit320_proj320_d1_unit300_location_aconvc10_aconvf100_mtlalpha0.5_adadelta_sampprob0.0_bs30_mli800_mlo150', 'threshold': 0.0001, 'train_json': 'dump/train_nodev/deltafalse/data.json', 'valid_json': 'dump/train_dev/deltafalse/data.json', 'verbose': 1, 'weight_decay': 0.0}\r\n```\r\n\r\nHowever, in the testing phase, loaded `train_args` is `AttributeDict`.\r\nTherefore, `vars(train_args)` return different results.\r\n```python\r\n(Pdb) train_args\r\n<espnet.asr.asr_utils.AttributeDict object at 0x7f2323130a58>\r\n\r\n(Pdb) vars(train_args)\r\n{'obj': {'aconv_chans': 10, 'aconv_filts': 100, 'adim': 320, 'aheads': 4, 'asr_model': False, 'atype': 'location', 'awin': 5, 'backend': 'pytorch', 'batch_size': 30, 'beam_size': 4, 'char_list': ['<blank>', '<unk>', '<space>', 'A', 'B', 'C', 'D', 'E', 'F', 'G', 'H', 'I', 'J', 'K', 'L', 'M', 'N', 'O', 'P', 'Q', 'R', 'S', 'T', 'U', 'V', 'W', 'X', 'Y', 'Z', '<eos>'], 'criterion': 'acc', 'ctc_type': 'warpctc', 'ctc_weight': 0.3, 'debugdir': 'exp/train_nodev_pytorch_blstmp_e4_subsample1_2_2_1_1_unit320_proj320_d1_unit300_location_aconvc10_aconvf100_mtlalpha0.5_adadelta_sampprob0.0_bs30_mli800_mlo150', 'debugmode': 1, 'dict': 'data/lang_1char/train_nodev_units.txt', 'dlayers': 1, 'dropout_rate': 0.0, 'dropout_rate_decoder': 0.0, 'dtype': 'lstm', 'dunits': 300, 'early_stop_criterion': 'validation/main/acc', 'elayers': 4, 'elayers_sd': 4, 'epochs': 20, 'eprojs': 320, 'eps': 1e-08, 'eps_decay': 0.01, 'etype': 'blstmp', 'eunits': 320, 'grad_clip': 5, 'lm_weight': 0.1, 'lsm_type': '', 'lsm_weight': 0.0, 'maxlen_in': 800, 'maxlen_out': 150, 'maxlenratio': 0.0, 'minibatches': 0, 'minlenratio': 0.0, 'mt_model': False, 'mtlalpha': 0.5, 'n_iter_processes': 0, 'nbest': 1, 'ngpu': 1, 'num_save_attention': 3, 'num_spkrs': 1, 'opt': 'adadelta', 'outdir': 'exp/train_nodev_pytorch_blstmp_e4_subsample1_2_2_1_1_unit320_proj320_d1_unit300_location_aconvc10_aconvf100_mtlalpha0.5_adadelta_sampprob0.0_bs30_mli800_mlo150/results', 'patience': 3, 'penalty': 0.0, 'preprocess_conf': None, 'report_cer': False, 'report_wer': False, 'resume': None, 'rnnlm': None, 'rnnlm_conf': None, 'sampling_probability': 0.0, 'seed': 1, 'sortagrad': 0, 'spa': False, 'subsample': '1_2_2_1_1', 'sym_blank': '<blank>', 'sym_space': '<space>', 'tensorboard_dir': 'tensorboard/train_nodev_pytorch_blstmp_e4_subsample1_2_2_1_1_unit320_proj320_d1_unit300_location_aconvc10_aconvf100_mtlalpha0.5_adadelta_sampprob0.0_bs30_mli800_mlo150', 'threshold': 0.0001, 'train_json': 'dump/train_nodev/deltafalse/data.json', 'valid_json': 'dump/train_dev/deltafalse/data.json', 'verbose': 1, 'weight_decay': 0.0}}\r\n```\r\n\r\nThis causes unexpected behavior in following line.\r\nhttps://github.com/espnet/espnet/blob/fb1cbd605c5fefc6e82c829cafc01840918c90c4/espnet/nets/pytorch_backend/ctc.py#L116\r\n\r\n`vars(train_args).get(\u201cctc_type\u201d)` always return `None`, so `vars(train_args).get(\u201cctc_type\u201d, \u201cbuiltin\u201d)` will always return `\u201cbuiltin\u201d`. \r\n\r\n@gtache Is there any reason why using `vars(train_args).get(\u201cctc_type\u201d)` instead of `train_args.ctc_type`?\r\n\r\n@sw005320 What is your intension of using `AttributeDict` in loading a config file? ", "reactions": {"url": "https://api.github.com/repos/espnet/espnet/issues/616/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/espnet/espnet/issues/616/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/espnet/espnet/issues/487", "repository_url": "https://api.github.com/repos/espnet/espnet", "labels_url": "https://api.github.com/repos/espnet/espnet/issues/487/labels{/name}", "comments_url": "https://api.github.com/repos/espnet/espnet/issues/487/comments", "events_url": "https://api.github.com/repos/espnet/espnet/issues/487/events", "html_url": "https://github.com/espnet/espnet/pull/487", "id": 385722216, "node_id": "MDExOlB1bGxSZXF1ZXN0MjM0NjI2MzI0", "number": 487, "title": "Fix a bug related to LongTensor * float = 0", "user": {"login": "kan-bayashi", "id": 22779813, "node_id": "MDQ6VXNlcjIyNzc5ODEz", "avatar_url": "https://avatars.githubusercontent.com/u/22779813?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kan-bayashi", "html_url": "https://github.com/kan-bayashi", "followers_url": "https://api.github.com/users/kan-bayashi/followers", "following_url": "https://api.github.com/users/kan-bayashi/following{/other_user}", "gists_url": "https://api.github.com/users/kan-bayashi/gists{/gist_id}", "starred_url": "https://api.github.com/users/kan-bayashi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kan-bayashi/subscriptions", "organizations_url": "https://api.github.com/users/kan-bayashi/orgs", "repos_url": "https://api.github.com/users/kan-bayashi/repos", "events_url": "https://api.github.com/users/kan-bayashi/events{/privacy}", "received_events_url": "https://api.github.com/users/kan-bayashi/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 777173273, "node_id": "MDU6TGFiZWw3NzcxNzMyNzM=", "url": "https://api.github.com/repos/espnet/espnet/labels/Bug", "name": "Bug", "color": "ee0701", "default": false, "description": "bug should be fixed"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2018-11-29T12:52:08Z", "updated_at": "2019-05-11T00:42:04Z", "closed_at": "2018-11-29T13:16:07Z", "author_association": "MEMBER", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/espnet/espnet/pulls/487", "html_url": "https://github.com/espnet/espnet/pull/487", "diff_url": "https://github.com/espnet/espnet/pull/487.diff", "patch_url": "https://github.com/espnet/espnet/pull/487.patch", "merged_at": "2018-11-29T13:16:06Z"}, "body": "Fix #479 \r\n(LongTensor) * (float value) will be 0.\r\nPlease be careful. \r\n```\r\nIn [4]: import torch\r\nIn [5]: lens = torch.LongTensor([324])\r\nIn [6]: max(lens) * 0.5\r\nOut[6]: tensor(0)\r\nIn [7]: max(lens)\r\nOut[7]: tensor(324)\r\n```", "reactions": {"url": "https://api.github.com/repos/espnet/espnet/issues/487/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/espnet/espnet/issues/487/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/espnet/espnet/issues/479", "repository_url": "https://api.github.com/repos/espnet/espnet", "labels_url": "https://api.github.com/repos/espnet/espnet/issues/479/labels{/name}", "comments_url": "https://api.github.com/repos/espnet/espnet/issues/479/comments", "events_url": "https://api.github.com/repos/espnet/espnet/issues/479/events", "html_url": "https://github.com/espnet/espnet/issues/479", "id": 384223111, "node_id": "MDU6SXNzdWUzODQyMjMxMTE=", "number": 479, "title": "CSJ recipe with PyTorch backend", "user": {"login": "marvinzh", "id": 6829031, "node_id": "MDQ6VXNlcjY4MjkwMzE=", "avatar_url": "https://avatars.githubusercontent.com/u/6829031?v=4", "gravatar_id": "", "url": "https://api.github.com/users/marvinzh", "html_url": "https://github.com/marvinzh", "followers_url": "https://api.github.com/users/marvinzh/followers", "following_url": "https://api.github.com/users/marvinzh/following{/other_user}", "gists_url": "https://api.github.com/users/marvinzh/gists{/gist_id}", "starred_url": "https://api.github.com/users/marvinzh/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/marvinzh/subscriptions", "organizations_url": "https://api.github.com/users/marvinzh/orgs", "repos_url": "https://api.github.com/users/marvinzh/repos", "events_url": "https://api.github.com/users/marvinzh/events{/privacy}", "received_events_url": "https://api.github.com/users/marvinzh/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 777173273, "node_id": "MDU6TGFiZWw3NzcxNzMyNzM=", "url": "https://api.github.com/repos/espnet/espnet/labels/Bug", "name": "Bug", "color": "ee0701", "default": false, "description": "bug should be fixed"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 11, "created_at": "2018-11-26T08:35:04Z", "updated_at": "2018-12-02T01:47:36Z", "closed_at": "2018-12-02T01:47:35Z", "author_association": "NONE", "active_lock_reason": null, "body": "when using PyTorch as the backend, the model outputs only \\<EOS\\> token in the decoding phase, while the Chainer backend is fine (under the same hyperparameter setting). ", "reactions": {"url": "https://api.github.com/repos/espnet/espnet/issues/479/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/espnet/espnet/issues/479/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/espnet/espnet/issues/463", "repository_url": "https://api.github.com/repos/espnet/espnet", "labels_url": "https://api.github.com/repos/espnet/espnet/issues/463/labels{/name}", "comments_url": "https://api.github.com/repos/espnet/espnet/issues/463/comments", "events_url": "https://api.github.com/repos/espnet/espnet/issues/463/events", "html_url": "https://github.com/espnet/espnet/pull/463", "id": 379474036, "node_id": "MDExOlB1bGxSZXF1ZXN0MjI5OTIxMzI2", "number": 463, "title": "Fix make batchset", "user": {"login": "kan-bayashi", "id": 22779813, "node_id": "MDQ6VXNlcjIyNzc5ODEz", "avatar_url": "https://avatars.githubusercontent.com/u/22779813?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kan-bayashi", "html_url": "https://github.com/kan-bayashi", "followers_url": "https://api.github.com/users/kan-bayashi/followers", "following_url": "https://api.github.com/users/kan-bayashi/following{/other_user}", "gists_url": "https://api.github.com/users/kan-bayashi/gists{/gist_id}", "starred_url": "https://api.github.com/users/kan-bayashi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kan-bayashi/subscriptions", "organizations_url": "https://api.github.com/users/kan-bayashi/orgs", "repos_url": "https://api.github.com/users/kan-bayashi/repos", "events_url": "https://api.github.com/users/kan-bayashi/events{/privacy}", "received_events_url": "https://api.github.com/users/kan-bayashi/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 777173273, "node_id": "MDU6TGFiZWw3NzcxNzMyNzM=", "url": "https://api.github.com/repos/espnet/espnet/labels/Bug", "name": "Bug", "color": "ee0701", "default": false, "description": "bug should be fixed"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2018-11-10T23:56:54Z", "updated_at": "2019-06-20T09:10:00Z", "closed_at": "2018-11-11T18:24:47Z", "author_association": "MEMBER", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/espnet/espnet/pulls/463", "html_url": "https://github.com/espnet/espnet/pull/463", "diff_url": "https://github.com/espnet/espnet/pull/463.diff", "patch_url": "https://github.com/espnet/espnet/pull/463.patch", "merged_at": "2018-11-11T18:24:47Z"}, "body": "fix #419 #452 ", "reactions": {"url": "https://api.github.com/repos/espnet/espnet/issues/463/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/espnet/espnet/issues/463/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/espnet/espnet/issues/462", "repository_url": "https://api.github.com/repos/espnet/espnet", "labels_url": "https://api.github.com/repos/espnet/espnet/issues/462/labels{/name}", "comments_url": "https://api.github.com/repos/espnet/espnet/issues/462/comments", "events_url": "https://api.github.com/repos/espnet/espnet/issues/462/events", "html_url": "https://github.com/espnet/espnet/pull/462", "id": 379473846, "node_id": "MDExOlB1bGxSZXF1ZXN0MjI5OTIxMjA4", "number": 462, "title": "Fix py3 compatibility", "user": {"login": "kan-bayashi", "id": 22779813, "node_id": "MDQ6VXNlcjIyNzc5ODEz", "avatar_url": "https://avatars.githubusercontent.com/u/22779813?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kan-bayashi", "html_url": "https://github.com/kan-bayashi", "followers_url": "https://api.github.com/users/kan-bayashi/followers", "following_url": "https://api.github.com/users/kan-bayashi/following{/other_user}", "gists_url": "https://api.github.com/users/kan-bayashi/gists{/gist_id}", "starred_url": "https://api.github.com/users/kan-bayashi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kan-bayashi/subscriptions", "organizations_url": "https://api.github.com/users/kan-bayashi/orgs", "repos_url": "https://api.github.com/users/kan-bayashi/repos", "events_url": "https://api.github.com/users/kan-bayashi/events{/privacy}", "received_events_url": "https://api.github.com/users/kan-bayashi/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 777173273, "node_id": "MDU6TGFiZWw3NzcxNzMyNzM=", "url": "https://api.github.com/repos/espnet/espnet/labels/Bug", "name": "Bug", "color": "ee0701", "default": false, "description": "bug should be fixed"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2018-11-10T23:53:53Z", "updated_at": "2019-06-20T09:10:01Z", "closed_at": "2018-11-11T00:38:17Z", "author_association": "MEMBER", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/espnet/espnet/pulls/462", "html_url": "https://github.com/espnet/espnet/pull/462", "diff_url": "https://github.com/espnet/espnet/pull/462.diff", "patch_url": "https://github.com/espnet/espnet/pull/462.patch", "merged_at": "2018-11-11T00:38:17Z"}, "body": "", "reactions": {"url": "https://api.github.com/repos/espnet/espnet/issues/462/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/espnet/espnet/issues/462/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/espnet/espnet/issues/458", "repository_url": "https://api.github.com/repos/espnet/espnet", "labels_url": "https://api.github.com/repos/espnet/espnet/issues/458/labels{/name}", "comments_url": "https://api.github.com/repos/espnet/espnet/issues/458/comments", "events_url": "https://api.github.com/repos/espnet/espnet/issues/458/events", "html_url": "https://github.com/espnet/espnet/pull/458", "id": 378988224, "node_id": "MDExOlB1bGxSZXF1ZXN0MjI5NTYzMDUy", "number": 458, "title": "Fix manuals and makefile", "user": {"login": "kan-bayashi", "id": 22779813, "node_id": "MDQ6VXNlcjIyNzc5ODEz", "avatar_url": "https://avatars.githubusercontent.com/u/22779813?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kan-bayashi", "html_url": "https://github.com/kan-bayashi", "followers_url": "https://api.github.com/users/kan-bayashi/followers", "following_url": "https://api.github.com/users/kan-bayashi/following{/other_user}", "gists_url": "https://api.github.com/users/kan-bayashi/gists{/gist_id}", "starred_url": "https://api.github.com/users/kan-bayashi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kan-bayashi/subscriptions", "organizations_url": "https://api.github.com/users/kan-bayashi/orgs", "repos_url": "https://api.github.com/users/kan-bayashi/repos", "events_url": "https://api.github.com/users/kan-bayashi/events{/privacy}", "received_events_url": "https://api.github.com/users/kan-bayashi/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 777173273, "node_id": "MDU6TGFiZWw3NzcxNzMyNzM=", "url": "https://api.github.com/repos/espnet/espnet/labels/Bug", "name": "Bug", "color": "ee0701", "default": false, "description": "bug should be fixed"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2018-11-09T01:37:49Z", "updated_at": "2018-11-09T03:01:14Z", "closed_at": "2018-11-09T03:01:14Z", "author_association": "MEMBER", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/espnet/espnet/pulls/458", "html_url": "https://github.com/espnet/espnet/pull/458", "diff_url": "https://github.com/espnet/espnet/pull/458.diff", "patch_url": "https://github.com/espnet/espnet/pull/458.patch", "merged_at": "2018-11-09T03:01:14Z"}, "body": "#456 ", "reactions": {"url": "https://api.github.com/repos/espnet/espnet/issues/458/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/espnet/espnet/issues/458/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/espnet/espnet/issues/455", "repository_url": "https://api.github.com/repos/espnet/espnet", "labels_url": "https://api.github.com/repos/espnet/espnet/issues/455/labels{/name}", "comments_url": "https://api.github.com/repos/espnet/espnet/issues/455/comments", "events_url": "https://api.github.com/repos/espnet/espnet/issues/455/events", "html_url": "https://github.com/espnet/espnet/pull/455", "id": 378741552, "node_id": "MDExOlB1bGxSZXF1ZXN0MjI5MzcyMzIy", "number": 455, "title": "Fix Makefile", "user": {"login": "kan-bayashi", "id": 22779813, "node_id": "MDQ6VXNlcjIyNzc5ODEz", "avatar_url": "https://avatars.githubusercontent.com/u/22779813?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kan-bayashi", "html_url": "https://github.com/kan-bayashi", "followers_url": "https://api.github.com/users/kan-bayashi/followers", "following_url": "https://api.github.com/users/kan-bayashi/following{/other_user}", "gists_url": "https://api.github.com/users/kan-bayashi/gists{/gist_id}", "starred_url": "https://api.github.com/users/kan-bayashi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kan-bayashi/subscriptions", "organizations_url": "https://api.github.com/users/kan-bayashi/orgs", "repos_url": "https://api.github.com/users/kan-bayashi/repos", "events_url": "https://api.github.com/users/kan-bayashi/events{/privacy}", "received_events_url": "https://api.github.com/users/kan-bayashi/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 777173273, "node_id": "MDU6TGFiZWw3NzcxNzMyNzM=", "url": "https://api.github.com/repos/espnet/espnet/labels/Bug", "name": "Bug", "color": "ee0701", "default": false, "description": "bug should be fixed"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2018-11-08T13:55:31Z", "updated_at": "2018-11-08T14:50:05Z", "closed_at": "2018-11-08T14:40:34Z", "author_association": "MEMBER", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/espnet/espnet/pulls/455", "html_url": "https://github.com/espnet/espnet/pull/455", "diff_url": "https://github.com/espnet/espnet/pull/455.diff", "patch_url": "https://github.com/espnet/espnet/pull/455.patch", "merged_at": "2018-11-08T14:40:34Z"}, "body": "This PR fixes following problems:\r\n- fixed Makefile to install torch in the case of w/o conda\r\n- fixed .gitignore to ignore some files related to new installation. e.g. `.eggs`, `*.done`, and so on.\r\n- fixed check_install.py (#451)", "reactions": {"url": "https://api.github.com/repos/espnet/espnet/issues/455/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/espnet/espnet/issues/455/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/espnet/espnet/issues/438", "repository_url": "https://api.github.com/repos/espnet/espnet", "labels_url": "https://api.github.com/repos/espnet/espnet/issues/438/labels{/name}", "comments_url": "https://api.github.com/repos/espnet/espnet/issues/438/comments", "events_url": "https://api.github.com/repos/espnet/espnet/issues/438/events", "html_url": "https://github.com/espnet/espnet/pull/438", "id": 371842918, "node_id": "MDExOlB1bGxSZXF1ZXN0MjI0MTk4MDU5", "number": 438, "title": "Fix a bug in the case of the use w/ reduction factor + cbhg", "user": {"login": "kan-bayashi", "id": 22779813, "node_id": "MDQ6VXNlcjIyNzc5ODEz", "avatar_url": "https://avatars.githubusercontent.com/u/22779813?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kan-bayashi", "html_url": "https://github.com/kan-bayashi", "followers_url": "https://api.github.com/users/kan-bayashi/followers", "following_url": "https://api.github.com/users/kan-bayashi/following{/other_user}", "gists_url": "https://api.github.com/users/kan-bayashi/gists{/gist_id}", "starred_url": "https://api.github.com/users/kan-bayashi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kan-bayashi/subscriptions", "organizations_url": "https://api.github.com/users/kan-bayashi/orgs", "repos_url": "https://api.github.com/users/kan-bayashi/repos", "events_url": "https://api.github.com/users/kan-bayashi/events{/privacy}", "received_events_url": "https://api.github.com/users/kan-bayashi/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 777173273, "node_id": "MDU6TGFiZWw3NzcxNzMyNzM=", "url": "https://api.github.com/repos/espnet/espnet/labels/Bug", "name": "Bug", "color": "ee0701", "default": false, "description": "bug should be fixed"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2018-10-19T07:46:38Z", "updated_at": "2019-02-01T06:57:38Z", "closed_at": "2018-10-19T09:37:34Z", "author_association": "MEMBER", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/espnet/espnet/pulls/438", "html_url": "https://github.com/espnet/espnet/pull/438", "diff_url": "https://github.com/espnet/espnet/pull/438.diff", "patch_url": "https://github.com/espnet/espnet/pull/438.patch", "merged_at": "2018-10-19T09:37:34Z"}, "body": "", "reactions": {"url": "https://api.github.com/repos/espnet/espnet/issues/438/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/espnet/espnet/issues/438/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/espnet/espnet/issues/419", "repository_url": "https://api.github.com/repos/espnet/espnet", "labels_url": "https://api.github.com/repos/espnet/espnet/issues/419/labels{/name}", "comments_url": "https://api.github.com/repos/espnet/espnet/issues/419/comments", "events_url": "https://api.github.com/repos/espnet/espnet/issues/419/events", "html_url": "https://github.com/espnet/espnet/issues/419", "id": 362917892, "node_id": "MDU6SXNzdWUzNjI5MTc4OTI=", "number": 419, "title": "error when using ngpu=8", "user": {"login": "chenzhehuai", "id": 12264312, "node_id": "MDQ6VXNlcjEyMjY0MzEy", "avatar_url": "https://avatars.githubusercontent.com/u/12264312?v=4", "gravatar_id": "", "url": "https://api.github.com/users/chenzhehuai", "html_url": "https://github.com/chenzhehuai", "followers_url": "https://api.github.com/users/chenzhehuai/followers", "following_url": "https://api.github.com/users/chenzhehuai/following{/other_user}", "gists_url": "https://api.github.com/users/chenzhehuai/gists{/gist_id}", "starred_url": "https://api.github.com/users/chenzhehuai/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/chenzhehuai/subscriptions", "organizations_url": "https://api.github.com/users/chenzhehuai/orgs", "repos_url": "https://api.github.com/users/chenzhehuai/repos", "events_url": "https://api.github.com/users/chenzhehuai/events{/privacy}", "received_events_url": "https://api.github.com/users/chenzhehuai/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 777173273, "node_id": "MDU6TGFiZWw3NzcxNzMyNzM=", "url": "https://api.github.com/repos/espnet/espnet/labels/Bug", "name": "Bug", "color": "ee0701", "default": false, "description": "bug should be fixed"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 15, "created_at": "2018-09-23T06:28:02Z", "updated_at": "2018-11-11T18:24:47Z", "closed_at": "2018-11-11T18:24:47Z", "author_association": "NONE", "active_lock_reason": null, "body": "version:\r\n84f72a4950a23ee92e3a554ccc4960e565e5939e\r\n\r\ncommand (in librispeech):\r\nasr_train.py --ngpu 8 --backend pytorch --outdir exp/train_100_blstmp_e8_subsample1_2_2_1_1_unit320_proj320_d1_unit300_location_aconvc10_aconvf100_mtlalpha0.5_adadelta_bs20_mli800_mlo150.2c/results --debugmode 1 --dict data/lang_1char/train_100_units.txt --debugdir exp/train_100_blstmp_e8_subsample1_2_2_1_1_unit320_proj320_d1_unit300_location_aconvc10_aconvf100_mtlalpha0.5_adadelta_bs20_mli800_mlo150.2c --minibatches 0 --verbose 5 --resume --train-json dump/train_100/deltafalse/data.json --valid-json dump/dev/deltafalse/data.json --etype blstmp --elayers 8 --eunits 320 --eprojs 320 --subsample 1_2_2_1_1 --dlayers 1 --dunits 300 --atype location --aconv-chans 10 --aconv-filts 100 --mtlalpha 0.5 --batch-size 5 --maxlen-in 800 --maxlen-out 150 --opt adadelta --epochs 15\r\n\r\nerror log:\r\nException in main training loop: invalid gradient at index 0 - expected shape [7] but got [8]\r\nTraceback (most recent call last):\r\n  File \"/mnt/homedir/chenzhehuai/works/e2e/codes/espnet-git/tools/venv/lib/python3.7/site-packages/chainer/training/trainer.py\", line 306, in run\r\n    update()\r\n  File \"/mnt/homedir/chenzhehuai/works/e2e/codes/espnet-git/tools/venv/lib/python3.7/site-packages/chainer/training/updaters/standard_updater.py\", line 149, in update\r\n    self.update_core()\r\n  File \"/mnt/homedir/chenzhehuai/works/e2e/codes/espnet-git/src/asr/asr_pytorch.py\", line 123, in update_core\r\n    loss.backward(loss.new_ones(self.ngpu))  # Backprop\r\n  File \"/mnt/homedir/chenzhehuai/works/e2e/codes/espnet-git/tools/venv/lib/python3.7/site-packages/torch/tensor.py\", line 93, in backward\r\n    torch.autograd.backward(self, gradient, retain_graph, create_graph)\r\n  File \"/mnt/homedir/chenzhehuai/works/e2e/codes/espnet-git/tools/venv/lib/python3.7/site-packages/torch/autograd/__init__.py\", line 90, in backward\r\n    allow_unreachable=True)  # allow_unreachable flag\r\nWill finalize trainer extensions and updater before reraising the exception.\r\nTraceback (most recent call last):\r\n  File \"/mnt/homedir/chenzhehuai/works/e2e/egs/partlibrispeech/asr1/../../../codes/espnet-work//src/bin/asr_train.py\", line 193, in <module>\r\n    main()\r\n  File \"/mnt/homedir/chenzhehuai/works/e2e/egs/partlibrispeech/asr1/../../../codes/espnet-work//src/bin/asr_train.py\", line 187, in main\r\n    train(args)\r\n  File \"/mnt/homedir/chenzhehuai/works/e2e/codes/espnet-git/src/asr/asr_pytorch.py\", line 353, in train\r\n    trainer.run()\r\n  File \"/mnt/homedir/chenzhehuai/works/e2e/codes/espnet-git/tools/venv/lib/python3.7/site-packages/chainer/training/trainer.py\", line 320, in run\r\n    six.reraise(*sys.exc_info())\r\n  File \"/mnt/homedir/chenzhehuai/works/e2e/codes/espnet-git/tools/venv/lib/python3.7/site-packages/six.py\", line 693, in reraise\r\n    raise value\r\n  File \"/mnt/homedir/chenzhehuai/works/e2e/codes/espnet-git/tools/venv/lib/python3.7/site-packages/chainer/training/trainer.py\", line 306, in run\r\n    update()\r\n  File \"/mnt/homedir/chenzhehuai/works/e2e/codes/espnet-git/tools/venv/lib/python3.7/site-packages/chainer/training/updaters/standard_updater.py\", line 149, in update\r\n    self.update_core()\r\n  File \"/mnt/homedir/chenzhehuai/works/e2e/codes/espnet-git/src/asr/asr_pytorch.py\", line 123, in update_core\r\n    loss.backward(loss.new_ones(self.ngpu))  # Backprop\r\n  File \"/mnt/homedir/chenzhehuai/works/e2e/codes/espnet-git/tools/venv/lib/python3.7/site-packages/torch/tensor.py\", line 93, in backward\r\n    torch.autograd.backward(self, gradient, retain_graph, create_graph)\r\n  File \"/mnt/homedir/chenzhehuai/works/e2e/codes/espnet-git/tools/venv/lib/python3.7/site-packages/torch/autograd/__init__.py\", line 90, in backward\r\n    allow_unreachable=True)  # allow_unreachable flag\r\nRuntimeError: invalid gradient at index 0 - expected shape [7] but got [8]\r\n\r\nnote:\r\nit always exists. However, using different sizes of batch will change the number of iterations before coming into this error", "reactions": {"url": "https://api.github.com/repos/espnet/espnet/issues/419/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/espnet/espnet/issues/419/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/espnet/espnet/issues/416", "repository_url": "https://api.github.com/repos/espnet/espnet", "labels_url": "https://api.github.com/repos/espnet/espnet/issues/416/labels{/name}", "comments_url": "https://api.github.com/repos/espnet/espnet/issues/416/comments", "events_url": "https://api.github.com/repos/espnet/espnet/issues/416/events", "html_url": "https://github.com/espnet/espnet/issues/416", "id": 361993654, "node_id": "MDU6SXNzdWUzNjE5OTM2NTQ=", "number": 416, "title": "Issue when lm_weight=0", "user": {"login": "ruizhilijhu", "id": 19173430, "node_id": "MDQ6VXNlcjE5MTczNDMw", "avatar_url": "https://avatars.githubusercontent.com/u/19173430?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ruizhilijhu", "html_url": "https://github.com/ruizhilijhu", "followers_url": "https://api.github.com/users/ruizhilijhu/followers", "following_url": "https://api.github.com/users/ruizhilijhu/following{/other_user}", "gists_url": "https://api.github.com/users/ruizhilijhu/gists{/gist_id}", "starred_url": "https://api.github.com/users/ruizhilijhu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ruizhilijhu/subscriptions", "organizations_url": "https://api.github.com/users/ruizhilijhu/orgs", "repos_url": "https://api.github.com/users/ruizhilijhu/repos", "events_url": "https://api.github.com/users/ruizhilijhu/events{/privacy}", "received_events_url": "https://api.github.com/users/ruizhilijhu/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 777173273, "node_id": "MDU6TGFiZWw3NzcxNzMyNzM=", "url": "https://api.github.com/repos/espnet/espnet/labels/Bug", "name": "Bug", "color": "ee0701", "default": false, "description": "bug should be fixed"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2018-09-20T02:22:54Z", "updated_at": "2020-05-15T09:57:44Z", "closed_at": "2020-05-15T09:57:44Z", "author_association": "NONE", "active_lock_reason": null, "body": "I have run wsj script with wordLM.  I just used attention model without CTC. Without wordlm, the results looked reasonable. But when I use wordLM with lm_weight=0,0.5,1; the results are higher which are unexpected. Using the same LM on model trained with CTC, it worked fine. \r\n\r\nAlso, \"no wordLM\" should have the same results as \"wordlm=0\". Anyone experienced the similar issue before?\r\n\r\n\r\n\u00a0 | Dev |Dev| Eval|Eval\r\n-- | -- | --|--|--\r\n\u00a0 | CER | WER | CER | WER\r\nno wordlm | 7.8 | 19.4 | 6 | 15.4\r\nwordlm 0 | 17 | 27.8 | 15.5 | 24.3\r\nwordlm 0.5 | 18.6 | 24 | 18.9 | 22.6\r\nwordlm 1 | 33.5 | 37.3 | 33.2 | 35.5\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/espnet/espnet/issues/416/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/espnet/espnet/issues/416/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/espnet/espnet/issues/404", "repository_url": "https://api.github.com/repos/espnet/espnet", "labels_url": "https://api.github.com/repos/espnet/espnet/issues/404/labels{/name}", "comments_url": "https://api.github.com/repos/espnet/espnet/issues/404/comments", "events_url": "https://api.github.com/repos/espnet/espnet/issues/404/events", "html_url": "https://github.com/espnet/espnet/issues/404", "id": 356230517, "node_id": "MDU6SXNzdWUzNTYyMzA1MTc=", "number": 404, "title": "ASR training hangs in epoch 0, after few iterations", "user": {"login": "sameerkhurana10", "id": 7698301, "node_id": "MDQ6VXNlcjc2OTgzMDE=", "avatar_url": "https://avatars.githubusercontent.com/u/7698301?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sameerkhurana10", "html_url": "https://github.com/sameerkhurana10", "followers_url": "https://api.github.com/users/sameerkhurana10/followers", "following_url": "https://api.github.com/users/sameerkhurana10/following{/other_user}", "gists_url": "https://api.github.com/users/sameerkhurana10/gists{/gist_id}", "starred_url": "https://api.github.com/users/sameerkhurana10/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sameerkhurana10/subscriptions", "organizations_url": "https://api.github.com/users/sameerkhurana10/orgs", "repos_url": "https://api.github.com/users/sameerkhurana10/repos", "events_url": "https://api.github.com/users/sameerkhurana10/events{/privacy}", "received_events_url": "https://api.github.com/users/sameerkhurana10/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 777173273, "node_id": "MDU6TGFiZWw3NzcxNzMyNzM=", "url": "https://api.github.com/repos/espnet/espnet/labels/Bug", "name": "Bug", "color": "ee0701", "default": false, "description": "bug should be fixed"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 15, "created_at": "2018-09-01T20:28:56Z", "updated_at": "2019-10-10T04:25:28Z", "closed_at": "2019-10-10T04:25:28Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi,\r\n\r\nusing\r\nEspnet commit: 18ed8b0d76ae4bb32ce901152fdb35d1fc7484e4 - Tue Aug 28 10:56:46 2018 -0400\r\nPytorch: 0.4.1\r\n\r\nTrying out librispeech. The training just stops (hangs) in epoch 0 after few iterations.\r\n\r\nI am using pytorch backend with ngpus=4. There is no error in the log.\r\n\r\n`tail -f train.log \r\n0           300         288.4       324.985        251.815                                                                                  0.343726                         456.825       1e-08       \r\n     total [#.................................................]  3.62%\r\nthis epoch [###########################.......................] 54.35%\r\n       300 iter, 0 epoch / 15 epochs\r\n   0.69902 iters/sec. Estimated time to finish: 3:10:15.971187.`\r\n\r\nOutput of nvidia-smi. GPU utilization remains at zero after few iterations\r\n\r\n<img width=\"643\" alt=\"screen shot 2018-09-01 at 3 48 54 pm\" src=\"https://user-images.githubusercontent.com/7698301/44949410-9cdfa100-adfe-11e8-92db-4633c0435432.png\">\r\n\r\n\r\nusing cuda-8.0.61 and cudnn-6\r\n\r\nAny comments on this?", "reactions": {"url": "https://api.github.com/repos/espnet/espnet/issues/404/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/espnet/espnet/issues/404/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/espnet/espnet/issues/401", "repository_url": "https://api.github.com/repos/espnet/espnet", "labels_url": "https://api.github.com/repos/espnet/espnet/issues/401/labels{/name}", "comments_url": "https://api.github.com/repos/espnet/espnet/issues/401/comments", "events_url": "https://api.github.com/repos/espnet/espnet/issues/401/events", "html_url": "https://github.com/espnet/espnet/pull/401", "id": 356051112, "node_id": "MDExOlB1bGxSZXF1ZXN0MjEyNDM4MTA4", "number": 401, "title": "Fix zero division error (#400)", "user": {"login": "kan-bayashi", "id": 22779813, "node_id": "MDQ6VXNlcjIyNzc5ODEz", "avatar_url": "https://avatars.githubusercontent.com/u/22779813?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kan-bayashi", "html_url": "https://github.com/kan-bayashi", "followers_url": "https://api.github.com/users/kan-bayashi/followers", "following_url": "https://api.github.com/users/kan-bayashi/following{/other_user}", "gists_url": "https://api.github.com/users/kan-bayashi/gists{/gist_id}", "starred_url": "https://api.github.com/users/kan-bayashi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kan-bayashi/subscriptions", "organizations_url": "https://api.github.com/users/kan-bayashi/orgs", "repos_url": "https://api.github.com/users/kan-bayashi/repos", "events_url": "https://api.github.com/users/kan-bayashi/events{/privacy}", "received_events_url": "https://api.github.com/users/kan-bayashi/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 777173273, "node_id": "MDU6TGFiZWw3NzcxNzMyNzM=", "url": "https://api.github.com/repos/espnet/espnet/labels/Bug", "name": "Bug", "color": "ee0701", "default": false, "description": "bug should be fixed"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2018-08-31T16:42:24Z", "updated_at": "2019-02-01T06:57:28Z", "closed_at": "2018-08-31T17:06:59Z", "author_association": "MEMBER", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/espnet/espnet/pulls/401", "html_url": "https://github.com/espnet/espnet/pull/401", "diff_url": "https://github.com/espnet/espnet/pull/401.diff", "patch_url": "https://github.com/espnet/espnet/pull/401.patch", "merged_at": "2018-08-31T17:06:59Z"}, "body": "This PR fixes the bug #400.", "reactions": {"url": "https://api.github.com/repos/espnet/espnet/issues/401/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/espnet/espnet/issues/401/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/espnet/espnet/issues/400", "repository_url": "https://api.github.com/repos/espnet/espnet", "labels_url": "https://api.github.com/repos/espnet/espnet/issues/400/labels{/name}", "comments_url": "https://api.github.com/repos/espnet/espnet/issues/400/comments", "events_url": "https://api.github.com/repos/espnet/espnet/issues/400/events", "html_url": "https://github.com/espnet/espnet/issues/400", "id": 356043514, "node_id": "MDU6SXNzdWUzNTYwNDM1MTQ=", "number": 400, "title": "float division by zero when Using ngpu 0 on pytorch", "user": {"login": "Fhrozen", "id": 11988996, "node_id": "MDQ6VXNlcjExOTg4OTk2", "avatar_url": "https://avatars.githubusercontent.com/u/11988996?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Fhrozen", "html_url": "https://github.com/Fhrozen", "followers_url": "https://api.github.com/users/Fhrozen/followers", "following_url": "https://api.github.com/users/Fhrozen/following{/other_user}", "gists_url": "https://api.github.com/users/Fhrozen/gists{/gist_id}", "starred_url": "https://api.github.com/users/Fhrozen/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Fhrozen/subscriptions", "organizations_url": "https://api.github.com/users/Fhrozen/orgs", "repos_url": "https://api.github.com/users/Fhrozen/repos", "events_url": "https://api.github.com/users/Fhrozen/events{/privacy}", "received_events_url": "https://api.github.com/users/Fhrozen/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 777173273, "node_id": "MDU6TGFiZWw3NzcxNzMyNzM=", "url": "https://api.github.com/repos/espnet/espnet/labels/Bug", "name": "Bug", "color": "ee0701", "default": false, "description": "bug should be fixed"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2018-08-31T16:17:34Z", "updated_at": "2018-08-31T16:46:21Z", "closed_at": "2018-08-31T16:46:21Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "Currently, I am testing the docker containers and found that when I tried to run the pytorch training (on AN4/ASR1) using cpu it breaks due to this setup:\r\nhttps://github.com/espnet/espnet/blob/76f6d177752d9706279937a4126ba53b040252ee/src/asr/asr_pytorch.py#L122\r\nThe chainer training in cpu has not this problem.", "reactions": {"url": "https://api.github.com/repos/espnet/espnet/issues/400/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/espnet/espnet/issues/400/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/espnet/espnet/issues/398", "repository_url": "https://api.github.com/repos/espnet/espnet", "labels_url": "https://api.github.com/repos/espnet/espnet/issues/398/labels{/name}", "comments_url": "https://api.github.com/repos/espnet/espnet/issues/398/comments", "events_url": "https://api.github.com/repos/espnet/espnet/issues/398/events", "html_url": "https://github.com/espnet/espnet/pull/398", "id": 355827060, "node_id": "MDExOlB1bGxSZXF1ZXN0MjEyMjY1NTcx", "number": 398, "title": "Revert masking of encoder states", "user": {"login": "kan-bayashi", "id": 22779813, "node_id": "MDQ6VXNlcjIyNzc5ODEz", "avatar_url": "https://avatars.githubusercontent.com/u/22779813?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kan-bayashi", "html_url": "https://github.com/kan-bayashi", "followers_url": "https://api.github.com/users/kan-bayashi/followers", "following_url": "https://api.github.com/users/kan-bayashi/following{/other_user}", "gists_url": "https://api.github.com/users/kan-bayashi/gists{/gist_id}", "starred_url": "https://api.github.com/users/kan-bayashi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kan-bayashi/subscriptions", "organizations_url": "https://api.github.com/users/kan-bayashi/orgs", "repos_url": "https://api.github.com/users/kan-bayashi/repos", "events_url": "https://api.github.com/users/kan-bayashi/events{/privacy}", "received_events_url": "https://api.github.com/users/kan-bayashi/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 777173273, "node_id": "MDU6TGFiZWw3NzcxNzMyNzM=", "url": "https://api.github.com/repos/espnet/espnet/labels/Bug", "name": "Bug", "color": "ee0701", "default": false, "description": "bug should be fixed"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2018-08-31T03:30:25Z", "updated_at": "2019-02-01T06:57:27Z", "closed_at": "2018-08-31T04:25:04Z", "author_association": "MEMBER", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/espnet/espnet/pulls/398", "html_url": "https://github.com/espnet/espnet/pull/398", "diff_url": "https://github.com/espnet/espnet/pull/398.diff", "patch_url": "https://github.com/espnet/espnet/pull/398.patch", "merged_at": "2018-08-31T04:25:04Z"}, "body": "This PR reverts masking of encoder states.\r\nSee https://github.com/espnet/espnet/pull/397#issuecomment-417537808\r\n> I remembered masking of encoder states is performed by @ShigekiKarita in old version.\r\nBut I wrongly deleted them because I misunderstood processing of the encoder.\r\n(If we use pad_packed_sequence, the sequence is already padded with 0.0, so I deleted the function. But in our case there is linear layer after pad_packed_sequence, so there is a bias value in padded part.)\r\nSo we should revert the deletion.\r\n\r\nThis is the same as following lines in v.0.1.5\r\nhttps://github.com/espnet/espnet/blob/168a9e9e905115e2f4c209028531f4ef2bf2546d/src/nets/e2e_asr_attctc_th.py#L517-L522\r\nhttps://github.com/espnet/espnet/blob/168a9e9e905115e2f4c209028531f4ef2bf2546d/src/nets/e2e_asr_attctc_th.py#L1686", "reactions": {"url": "https://api.github.com/repos/espnet/espnet/issues/398/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/espnet/espnet/issues/398/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/espnet/espnet/issues/390", "repository_url": "https://api.github.com/repos/espnet/espnet", "labels_url": "https://api.github.com/repos/espnet/espnet/issues/390/labels{/name}", "comments_url": "https://api.github.com/repos/espnet/espnet/issues/390/comments", "events_url": "https://api.github.com/repos/espnet/espnet/issues/390/events", "html_url": "https://github.com/espnet/espnet/pull/390", "id": 355189165, "node_id": "MDExOlB1bGxSZXF1ZXN0MjExNzc1MTQ5", "number": 390, "title": "Remove duplicated lines", "user": {"login": "kan-bayashi", "id": 22779813, "node_id": "MDQ6VXNlcjIyNzc5ODEz", "avatar_url": "https://avatars.githubusercontent.com/u/22779813?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kan-bayashi", "html_url": "https://github.com/kan-bayashi", "followers_url": "https://api.github.com/users/kan-bayashi/followers", "following_url": "https://api.github.com/users/kan-bayashi/following{/other_user}", "gists_url": "https://api.github.com/users/kan-bayashi/gists{/gist_id}", "starred_url": "https://api.github.com/users/kan-bayashi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kan-bayashi/subscriptions", "organizations_url": "https://api.github.com/users/kan-bayashi/orgs", "repos_url": "https://api.github.com/users/kan-bayashi/repos", "events_url": "https://api.github.com/users/kan-bayashi/events{/privacy}", "received_events_url": "https://api.github.com/users/kan-bayashi/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 777173273, "node_id": "MDU6TGFiZWw3NzcxNzMyNzM=", "url": "https://api.github.com/repos/espnet/espnet/labels/Bug", "name": "Bug", "color": "ee0701", "default": false, "description": "bug should be fixed"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2018-08-29T14:30:41Z", "updated_at": "2019-02-01T06:57:25Z", "closed_at": "2018-08-29T14:48:22Z", "author_association": "MEMBER", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/espnet/espnet/pulls/390", "html_url": "https://github.com/espnet/espnet/pull/390", "diff_url": "https://github.com/espnet/espnet/pull/390.diff", "patch_url": "https://github.com/espnet/espnet/pull/390.patch", "merged_at": "2018-08-29T14:48:22Z"}, "body": "This PR removes duplicated lines in `tts_pytorch.py`.\r\nSnapshot is saved with `torch_snapshot()`, no need to take snapshot with `extensions.snapshot`.", "reactions": {"url": "https://api.github.com/repos/espnet/espnet/issues/390/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/espnet/espnet/issues/390/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/espnet/espnet/issues/379", "repository_url": "https://api.github.com/repos/espnet/espnet", "labels_url": "https://api.github.com/repos/espnet/espnet/issues/379/labels{/name}", "comments_url": "https://api.github.com/repos/espnet/espnet/issues/379/comments", "events_url": "https://api.github.com/repos/espnet/espnet/issues/379/events", "html_url": "https://github.com/espnet/espnet/pull/379", "id": 354097447, "node_id": "MDExOlB1bGxSZXF1ZXN0MjEwOTUzMDg2", "number": 379, "title": "Fix undefined gpu_id", "user": {"login": "kan-bayashi", "id": 22779813, "node_id": "MDQ6VXNlcjIyNzc5ODEz", "avatar_url": "https://avatars.githubusercontent.com/u/22779813?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kan-bayashi", "html_url": "https://github.com/kan-bayashi", "followers_url": "https://api.github.com/users/kan-bayashi/followers", "following_url": "https://api.github.com/users/kan-bayashi/following{/other_user}", "gists_url": "https://api.github.com/users/kan-bayashi/gists{/gist_id}", "starred_url": "https://api.github.com/users/kan-bayashi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kan-bayashi/subscriptions", "organizations_url": "https://api.github.com/users/kan-bayashi/orgs", "repos_url": "https://api.github.com/users/kan-bayashi/repos", "events_url": "https://api.github.com/users/kan-bayashi/events{/privacy}", "received_events_url": "https://api.github.com/users/kan-bayashi/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 777173273, "node_id": "MDU6TGFiZWw3NzcxNzMyNzM=", "url": "https://api.github.com/repos/espnet/espnet/labels/Bug", "name": "Bug", "color": "ee0701", "default": false, "description": "bug should be fixed"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2018-08-26T14:04:04Z", "updated_at": "2018-08-28T09:08:06Z", "closed_at": "2018-08-26T15:13:06Z", "author_association": "MEMBER", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/espnet/espnet/pulls/379", "html_url": "https://github.com/espnet/espnet/pull/379", "diff_url": "https://github.com/espnet/espnet/pull/379.diff", "patch_url": "https://github.com/espnet/espnet/pull/379.patch", "merged_at": "2018-08-26T15:13:06Z"}, "body": "Fix (#317)", "reactions": {"url": "https://api.github.com/repos/espnet/espnet/issues/379/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/espnet/espnet/issues/379/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/espnet/espnet/issues/378", "repository_url": "https://api.github.com/repos/espnet/espnet", "labels_url": "https://api.github.com/repos/espnet/espnet/issues/378/labels{/name}", "comments_url": "https://api.github.com/repos/espnet/espnet/issues/378/comments", "events_url": "https://api.github.com/repos/espnet/espnet/issues/378/events", "html_url": "https://github.com/espnet/espnet/pull/378", "id": 354094147, "node_id": "MDExOlB1bGxSZXF1ZXN0MjEwOTUxMDgx", "number": 378, "title": "Fix no hypothesis bug", "user": {"login": "kan-bayashi", "id": 22779813, "node_id": "MDQ6VXNlcjIyNzc5ODEz", "avatar_url": "https://avatars.githubusercontent.com/u/22779813?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kan-bayashi", "html_url": "https://github.com/kan-bayashi", "followers_url": "https://api.github.com/users/kan-bayashi/followers", "following_url": "https://api.github.com/users/kan-bayashi/following{/other_user}", "gists_url": "https://api.github.com/users/kan-bayashi/gists{/gist_id}", "starred_url": "https://api.github.com/users/kan-bayashi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kan-bayashi/subscriptions", "organizations_url": "https://api.github.com/users/kan-bayashi/orgs", "repos_url": "https://api.github.com/users/kan-bayashi/repos", "events_url": "https://api.github.com/users/kan-bayashi/events{/privacy}", "received_events_url": "https://api.github.com/users/kan-bayashi/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 777173273, "node_id": "MDU6TGFiZWw3NzcxNzMyNzM=", "url": "https://api.github.com/repos/espnet/espnet/labels/Bug", "name": "Bug", "color": "ee0701", "default": false, "description": "bug should be fixed"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2018-08-26T13:15:22Z", "updated_at": "2018-08-28T09:07:58Z", "closed_at": "2018-08-27T08:59:03Z", "author_association": "MEMBER", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/espnet/espnet/pulls/378", "html_url": "https://github.com/espnet/espnet/pull/378", "diff_url": "https://github.com/espnet/espnet/pull/378.diff", "patch_url": "https://github.com/espnet/espnet/pull/378.patch", "merged_at": "2018-08-27T08:59:03Z"}, "body": "This PR fix no hypothesis bug (#233).\r\nIf we use `minlenratio > 0.0`, there is possibility to get no hypothesis.\r\nIn this PR, if there is no hypothesis, perform recognition again with smaller `minlenratio`.", "reactions": {"url": "https://api.github.com/repos/espnet/espnet/issues/378/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/espnet/espnet/issues/378/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/espnet/espnet/issues/375", "repository_url": "https://api.github.com/repos/espnet/espnet", "labels_url": "https://api.github.com/repos/espnet/espnet/issues/375/labels{/name}", "comments_url": "https://api.github.com/repos/espnet/espnet/issues/375/comments", "events_url": "https://api.github.com/repos/espnet/espnet/issues/375/events", "html_url": "https://github.com/espnet/espnet/pull/375", "id": 354074985, "node_id": "MDExOlB1bGxSZXF1ZXN0MjEwOTM5NDk3", "number": 375, "title": "Fixed python3 compatibility", "user": {"login": "kan-bayashi", "id": 22779813, "node_id": "MDQ6VXNlcjIyNzc5ODEz", "avatar_url": "https://avatars.githubusercontent.com/u/22779813?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kan-bayashi", "html_url": "https://github.com/kan-bayashi", "followers_url": "https://api.github.com/users/kan-bayashi/followers", "following_url": "https://api.github.com/users/kan-bayashi/following{/other_user}", "gists_url": "https://api.github.com/users/kan-bayashi/gists{/gist_id}", "starred_url": "https://api.github.com/users/kan-bayashi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kan-bayashi/subscriptions", "organizations_url": "https://api.github.com/users/kan-bayashi/orgs", "repos_url": "https://api.github.com/users/kan-bayashi/repos", "events_url": "https://api.github.com/users/kan-bayashi/events{/privacy}", "received_events_url": "https://api.github.com/users/kan-bayashi/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 777173273, "node_id": "MDU6TGFiZWw3NzcxNzMyNzM=", "url": "https://api.github.com/repos/espnet/espnet/labels/Bug", "name": "Bug", "color": "ee0701", "default": false, "description": "bug should be fixed"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2018-08-26T07:53:38Z", "updated_at": "2018-08-28T09:08:11Z", "closed_at": "2018-08-26T08:09:00Z", "author_association": "MEMBER", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/espnet/espnet/pulls/375", "html_url": "https://github.com/espnet/espnet/pull/375", "diff_url": "https://github.com/espnet/espnet/pull/375.diff", "patch_url": "https://github.com/espnet/espnet/pull/375.patch", "merged_at": "2018-08-26T08:09:00Z"}, "body": "", "reactions": {"url": "https://api.github.com/repos/espnet/espnet/issues/375/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/espnet/espnet/issues/375/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/espnet/espnet/issues/372", "repository_url": "https://api.github.com/repos/espnet/espnet", "labels_url": "https://api.github.com/repos/espnet/espnet/issues/372/labels{/name}", "comments_url": "https://api.github.com/repos/espnet/espnet/issues/372/comments", "events_url": "https://api.github.com/repos/espnet/espnet/issues/372/events", "html_url": "https://github.com/espnet/espnet/pull/372", "id": 353889375, "node_id": "MDExOlB1bGxSZXF1ZXN0MjEwODE5MzA4", "number": 372, "title": "Fixed undefined url problem", "user": {"login": "kan-bayashi", "id": 22779813, "node_id": "MDQ6VXNlcjIyNzc5ODEz", "avatar_url": "https://avatars.githubusercontent.com/u/22779813?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kan-bayashi", "html_url": "https://github.com/kan-bayashi", "followers_url": "https://api.github.com/users/kan-bayashi/followers", "following_url": "https://api.github.com/users/kan-bayashi/following{/other_user}", "gists_url": "https://api.github.com/users/kan-bayashi/gists{/gist_id}", "starred_url": "https://api.github.com/users/kan-bayashi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kan-bayashi/subscriptions", "organizations_url": "https://api.github.com/users/kan-bayashi/orgs", "repos_url": "https://api.github.com/users/kan-bayashi/repos", "events_url": "https://api.github.com/users/kan-bayashi/events{/privacy}", "received_events_url": "https://api.github.com/users/kan-bayashi/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 777173273, "node_id": "MDU6TGFiZWw3NzcxNzMyNzM=", "url": "https://api.github.com/repos/espnet/espnet/labels/Bug", "name": "Bug", "color": "ee0701", "default": false, "description": "bug should be fixed"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2018-08-24T18:46:00Z", "updated_at": "2018-08-28T09:08:19Z", "closed_at": "2018-08-24T19:31:00Z", "author_association": "MEMBER", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/espnet/espnet/pulls/372", "html_url": "https://github.com/espnet/espnet/pull/372", "diff_url": "https://github.com/espnet/espnet/pull/372.diff", "patch_url": "https://github.com/espnet/espnet/pull/372.patch", "merged_at": "2018-08-24T19:31:00Z"}, "body": "Fix a bug in `egs/iwslt18/st1/local/download_and_untar.sh` (`$url` is undefined)", "reactions": {"url": "https://api.github.com/repos/espnet/espnet/issues/372/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/espnet/espnet/issues/372/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/espnet/espnet/issues/345", "repository_url": "https://api.github.com/repos/espnet/espnet", "labels_url": "https://api.github.com/repos/espnet/espnet/issues/345/labels{/name}", "comments_url": "https://api.github.com/repos/espnet/espnet/issues/345/comments", "events_url": "https://api.github.com/repos/espnet/espnet/issues/345/events", "html_url": "https://github.com/espnet/espnet/issues/345", "id": 349601313, "node_id": "MDU6SXNzdWUzNDk2MDEzMTM=", "number": 345, "title": "Multi GPU error when using docker for training", "user": {"login": "divyaneelagiri", "id": 33436004, "node_id": "MDQ6VXNlcjMzNDM2MDA0", "avatar_url": "https://avatars.githubusercontent.com/u/33436004?v=4", "gravatar_id": "", "url": "https://api.github.com/users/divyaneelagiri", "html_url": "https://github.com/divyaneelagiri", "followers_url": "https://api.github.com/users/divyaneelagiri/followers", "following_url": "https://api.github.com/users/divyaneelagiri/following{/other_user}", "gists_url": "https://api.github.com/users/divyaneelagiri/gists{/gist_id}", "starred_url": "https://api.github.com/users/divyaneelagiri/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/divyaneelagiri/subscriptions", "organizations_url": "https://api.github.com/users/divyaneelagiri/orgs", "repos_url": "https://api.github.com/users/divyaneelagiri/repos", "events_url": "https://api.github.com/users/divyaneelagiri/events{/privacy}", "received_events_url": "https://api.github.com/users/divyaneelagiri/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 777173273, "node_id": "MDU6TGFiZWw3NzcxNzMyNzM=", "url": "https://api.github.com/repos/espnet/espnet/labels/Bug", "name": "Bug", "color": "ee0701", "default": false, "description": "bug should be fixed"}, {"id": 777173274, "node_id": "MDU6TGFiZWw3NzcxNzMyNzQ=", "url": "https://api.github.com/repos/espnet/espnet/labels/Duplicate", "name": "Duplicate", "color": "cccccc", "default": false, "description": "Duplicated"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2018-08-10T17:43:05Z", "updated_at": "2018-08-27T10:01:41Z", "closed_at": "2018-08-27T10:01:34Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hello,\r\n\r\nI created a docker image and was able to train using that for single GPU. However when I try to use multi GPU for training I get below error.  Can you please let me know how I can fix this issue?\r\n\r\n\r\nTraceback (most recent call last):\r\n  File \"/espnet/tools/venv/local/lib/python2.7/site-packages/chainer/training/trainer.py\", line 306, in run\r\n    update()\r\n  File \"/espnet/tools/venv/local/lib/python2.7/site-packages/chainer/training/updaters/standard_updater.py\", line 149, in update\r\n    self.update_core()\r\n  File \"/espnet/src/asr/asr_pytorch.py\", line 130, in update_core\r\n    loss.backward(torch.ones(self.num_gpu))  # Backprop\r\n  File \"/espnet/tools/venv/local/lib/python2.7/site-packages/torch/tensor.py\", line 93, in backward\r\n    torch.autograd.backward(self, gradient, retain_graph, create_graph)\r\n  File \"/espnet/tools/venv/local/lib/python2.7/site-packages/torch/autograd/__init__.py\", line 89, in backward\r\n    allow_unreachable=True)  # allow_unreachable flag\r\n  File \"/espnet/tools/venv/local/lib/python2.7/site-packages/torch/autograd/function.py\", line 76, in apply\r\n    return self._forward_cls.backward(self, *args)\r\n  File \"build/bdist.linux-x86_64/egg/warpctc_pytorch/__init__.py\", line 50, in backward\r\n    return ctx.grads * grad_output.type_as(ctx.grads), None, None, None, None, None\r\nWill finalize trainer extensions and updater before reraising the exception.\r\n^[[JTraceback (most recent call last):\r\n  File \"/espnet/egs/an4/asr1/../../../src/bin/asr_train.py\", line 224, in <module>\r\n    main()\r\n  File \"/espnet/egs/an4/asr1/../../../src/bin/asr_train.py\", line 218, in main\r\n    train(args)\r\n  File \"/espnet/src/asr/asr_pytorch.py\", line 383, in train\r\n    trainer.run()\r\n  File \"/espnet/tools/venv/local/lib/python2.7/site-packages/chainer/training/trainer.py\", line 320, in run\r\n    six.reraise(*sys.exc_info())\r\n  File \"/espnet/tools/venv/local/lib/python2.7/site-packages/chainer/training/trainer.py\", line 306, in run\r\n    update()\r\n  File \"/espnet/tools/venv/local/lib/python2.7/site-packages/chainer/training/updaters/standard_updater.py\", line 149, in update\r\n    self.update_core()\r\n  File \"/espnet/src/asr/asr_pytorch.py\", line 130, in update_core\r\n    loss.backward(torch.ones(self.num_gpu))  # Backprop\r\n  File \"/espnet/tools/venv/local/lib/python2.7/site-packages/torch/tensor.py\", line 93, in backward\r\n    torch.autograd.backward(self, gradient, retain_graph, create_graph)\r\n  File \"/espnet/tools/venv/local/lib/python2.7/site-packages/torch/autograd/__init__.py\", line 89, in backward\r\n    allow_unreachable=True)  # allow_unreachable flag\r\n  File \"/espnet/tools/venv/local/lib/python2.7/site-packages/torch/autograd/function.py\", line 76, in apply\r\n    return self._forward_cls.backward(self, *args)\r\n    allow_unreachable=True)  # allow_unreachable flag\r\n  File \"/espnet/tools/venv/local/lib/python2.7/site-packages/torch/autograd/function.py\", line 76, in apply\r\n    return self._forward_cls.backward(self, *args)\r\n  File \"build/bdist.linux-x86_64/egg/warpctc_pytorch/__init__.py\", line 50, in backward\r\n\r\nRuntimeError: arguments are located on different GPUs at /pytorch/aten/src/THC/generated/../generic/THCTensorMathPointwise.cu:313\r\n\r\nThanks,\r\nDivya\r\n", "reactions": {"url": "https://api.github.com/repos/espnet/espnet/issues/345/reactions", "total_count": 2, "+1": 2, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/espnet/espnet/issues/345/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/espnet/espnet/issues/317", "repository_url": "https://api.github.com/repos/espnet/espnet", "labels_url": "https://api.github.com/repos/espnet/espnet/issues/317/labels{/name}", "comments_url": "https://api.github.com/repos/espnet/espnet/issues/317/comments", "events_url": "https://api.github.com/repos/espnet/espnet/issues/317/events", "html_url": "https://github.com/espnet/espnet/issues/317", "id": 345387080, "node_id": "MDU6SXNzdWUzNDUzODcwODA=", "number": 317, "title": "Error in Chainer RNNLM language model training.", "user": {"login": "jnishi", "id": 836541, "node_id": "MDQ6VXNlcjgzNjU0MQ==", "avatar_url": "https://avatars.githubusercontent.com/u/836541?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jnishi", "html_url": "https://github.com/jnishi", "followers_url": "https://api.github.com/users/jnishi/followers", "following_url": "https://api.github.com/users/jnishi/following{/other_user}", "gists_url": "https://api.github.com/users/jnishi/gists{/gist_id}", "starred_url": "https://api.github.com/users/jnishi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jnishi/subscriptions", "organizations_url": "https://api.github.com/users/jnishi/orgs", "repos_url": "https://api.github.com/users/jnishi/repos", "events_url": "https://api.github.com/users/jnishi/events{/privacy}", "received_events_url": "https://api.github.com/users/jnishi/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 777173273, "node_id": "MDU6TGFiZWw3NzcxNzMyNzM=", "url": "https://api.github.com/repos/espnet/espnet/labels/Bug", "name": "Bug", "color": "ee0701", "default": false, "description": "bug should be fixed"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2018-07-27T22:45:59Z", "updated_at": "2018-08-26T14:06:50Z", "closed_at": "2018-08-26T14:06:50Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "When I run the script of CSJ recipe without `--ngpu` option, error occured.\r\n```\r\n2018-07-27 22:33:54,922 (lm_chainer:145) INFO: chainer version = 4.3.0\r\n2018-07-27 22:33:54,923 (lm_chainer:150) INFO: chainer seed = 1\r\n2018-07-27 22:33:54,923 (lm_chainer:158) INFO: chainer type check is disabled\r\n2018-07-27 22:33:54,923 (lm_chainer:170) WARNING: cudnn is not available\r\n2018-07-27 22:34:00,204 (lm_chainer:181) INFO: #vocab = 5939\r\n2018-07-27 22:34:00,204 (lm_chainer:182) INFO: #words in the training data = 6666818\r\n2018-07-27 22:34:00,204 (lm_chainer:183) INFO: #words in the validation data = 6666818\r\n2018-07-27 22:34:00,204 (lm_chainer:184) INFO: #iterations per epoch = 744\r\n2018-07-27 22:34:00,204 (lm_chainer:185) INFO: #total iterations = 29762\r\nTraceback (most recent call last):\r\n  File \"/home/christopher/gitrepos/espnet-1/egs/csj/asr1/../../../src/bin/lm_train.py\", line 131, in <module>\r\n    main()\r\n  File \"/home/christopher/gitrepos/espnet-1/egs/csj/asr1/../../../src/bin/lm_train.py\", line 122, in main\r\n    train(args)\r\n  File \"/home/christopher/gitrepos/espnet-1/src/lm/lm_chainer.py\", line 242, in train\r\n    x, t = convert.concat_examples(batch, gpu_id)\r\nUnboundLocalError: local variable 'gpu_id' referenced before assignment\r\n# Accounting: time=17 threads=1\r\n# Ended (code 1) at Fri Jul 27 22:34:01 UTC 2018, elapsed time 17 seconds\r\n```\r\n\r\nThis may be because `gpu_id` is defined [here](https://github.com/espnet/espnet/blob/master/src/lm/lm_chainer.py#L199) , but it does not executed when `gpu_id` equals to 0.", "reactions": {"url": "https://api.github.com/repos/espnet/espnet/issues/317/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/espnet/espnet/issues/317/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/espnet/espnet/issues/311", "repository_url": "https://api.github.com/repos/espnet/espnet", "labels_url": "https://api.github.com/repos/espnet/espnet/issues/311/labels{/name}", "comments_url": "https://api.github.com/repos/espnet/espnet/issues/311/comments", "events_url": "https://api.github.com/repos/espnet/espnet/issues/311/events", "html_url": "https://github.com/espnet/espnet/issues/311", "id": 344855767, "node_id": "MDU6SXNzdWUzNDQ4NTU3Njc=", "number": 311, "title": "MultiGPU error on WarpCTC", "user": {"login": "Fhrozen", "id": 11988996, "node_id": "MDQ6VXNlcjExOTg4OTk2", "avatar_url": "https://avatars.githubusercontent.com/u/11988996?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Fhrozen", "html_url": "https://github.com/Fhrozen", "followers_url": "https://api.github.com/users/Fhrozen/followers", "following_url": "https://api.github.com/users/Fhrozen/following{/other_user}", "gists_url": "https://api.github.com/users/Fhrozen/gists{/gist_id}", "starred_url": "https://api.github.com/users/Fhrozen/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Fhrozen/subscriptions", "organizations_url": "https://api.github.com/users/Fhrozen/orgs", "repos_url": "https://api.github.com/users/Fhrozen/repos", "events_url": "https://api.github.com/users/Fhrozen/events{/privacy}", "received_events_url": "https://api.github.com/users/Fhrozen/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 777173273, "node_id": "MDU6TGFiZWw3NzcxNzMyNzM=", "url": "https://api.github.com/repos/espnet/espnet/labels/Bug", "name": "Bug", "color": "ee0701", "default": false, "description": "bug should be fixed"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 9, "created_at": "2018-07-26T13:57:32Z", "updated_at": "2018-08-27T09:51:50Z", "closed_at": "2018-08-27T09:51:50Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "I prepared a new docker container with the updated tools, and when I tried to run with multigpu, I got this error.\r\nI am posting this here to know if someone else has a similar error with the new warpctc.\r\n\r\n\r\n```\r\n2018-07-26 13:51:18,146 (e2e_asr_attctc_th:99) INFO: mtl loss:417.586242676\r\nException in main training loop: arguments are located on different GPUs at /pytorch/aten/src/THC/generated/../generic/THCTensorMathPointwise.cu:313\r\nTraceback (most recent call last):\r\n  File \"/espnet/tools/venv/local/lib/python2.7/site-packages/chainer/training/trainer.py\", line 306, in run\r\n    update()\r\n  File \"/espnet/tools/venv/local/lib/python2.7/site-packages/chainer/training/updaters/standard_updater.py\", line 149, in update\r\n    self.update_core()\r\n  File \"/espnet/src/asr/asr_pytorch.py\", line 131, in update_core\r\n    loss.backward(torch.ones(self.num_gpu))  # Backprop\r\n  File \"/espnet/tools/venv/local/lib/python2.7/site-packages/torch/tensor.py\", line 93, in backward\r\n    torch.autograd.backward(self, gradient, retain_graph, create_graph)\r\n  File \"/espnet/tools/venv/local/lib/python2.7/site-packages/torch/autograd/__init__.py\", line 89, in backward\r\n    allow_unreachable=True)  # allow_unreachable flag\r\n  File \"/espnet/tools/venv/local/lib/python2.7/site-packages/torch/autograd/function.py\", line 76, in apply\r\n    return self._forward_cls.backward(self, *args)\r\n  File \"build/bdist.linux-x86_64/egg/warpctc_pytorch/__init__.py\", line 50, in backward\r\n    return ctx.grads * grad_output.type_as(ctx.grads), None, None, None, None, None\r\nWill finalize trainer extensions and updater before reraising the exception.\r\nESC[JTraceback (most recent call last):\r\n  File \"/espnet/egs/voxforge/asr1/../../../src/bin/asr_train.py\", line 231, in <module>\r\n    main()\r\n  File \"/espnet/egs/voxforge/asr1/../../../src/bin/asr_train.py\", line 225, in main\r\n    train(args)\r\n  File \"/espnet/src/asr/asr_pytorch.py\", line 383, in train\r\n    trainer.run()\r\n  File \"/espnet/tools/venv/local/lib/python2.7/site-packages/chainer/training/trainer.py\", line 320, in run\r\n    six.reraise(*sys.exc_info())\r\n  File \"/espnet/tools/venv/local/lib/python2.7/site-packages/chainer/training/trainer.py\", line 306, in run\r\n    update()\r\n  File \"/espnet/tools/venv/local/lib/python2.7/site-packages/chainer/training/updaters/standard_updater.py\", line 149, in update\r\n    self.update_core()\r\n  File \"/espnet/src/asr/asr_pytorch.py\", line 131, in update_core\r\n    loss.backward(torch.ones(self.num_gpu))  # Backprop\r\n  File \"/espnet/tools/venv/local/lib/python2.7/site-packages/torch/tensor.py\", line 93, in backward\r\n    torch.autograd.backward(self, gradient, retain_graph, create_graph)\r\n  File \"/espnet/tools/venv/local/lib/python2.7/site-packages/torch/autograd/__init__.py\", line 89, in backward\r\n    allow_unreachable=True)  # allow_unreachable flag\r\n  File \"/espnet/tools/venv/local/lib/python2.7/site-packages/torch/autograd/function.py\", line 76, in apply\r\n    return self._forward_cls.backward(self, *args)\r\n  File \"build/bdist.linux-x86_64/egg/warpctc_pytorch/__init__.py\", line 50, in backward\r\n\r\nRuntimeError: arguments are located on different GPUs at /pytorch/aten/src/THC/generated/../generic/THCTensorMathPointwise.cu:313\r\n```\r\n", "reactions": {"url": "https://api.github.com/repos/espnet/espnet/issues/311/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/espnet/espnet/issues/311/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/espnet/espnet/issues/310", "repository_url": "https://api.github.com/repos/espnet/espnet", "labels_url": "https://api.github.com/repos/espnet/espnet/issues/310/labels{/name}", "comments_url": "https://api.github.com/repos/espnet/espnet/issues/310/comments", "events_url": "https://api.github.com/repos/espnet/espnet/issues/310/events", "html_url": "https://github.com/espnet/espnet/issues/310", "id": 344836085, "node_id": "MDU6SXNzdWUzNDQ4MzYwODU=", "number": 310, "title": "Memory leaking in tts_pytorch", "user": {"login": "kan-bayashi", "id": 22779813, "node_id": "MDQ6VXNlcjIyNzc5ODEz", "avatar_url": "https://avatars.githubusercontent.com/u/22779813?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kan-bayashi", "html_url": "https://github.com/kan-bayashi", "followers_url": "https://api.github.com/users/kan-bayashi/followers", "following_url": "https://api.github.com/users/kan-bayashi/following{/other_user}", "gists_url": "https://api.github.com/users/kan-bayashi/gists{/gist_id}", "starred_url": "https://api.github.com/users/kan-bayashi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kan-bayashi/subscriptions", "organizations_url": "https://api.github.com/users/kan-bayashi/orgs", "repos_url": "https://api.github.com/users/kan-bayashi/repos", "events_url": "https://api.github.com/users/kan-bayashi/events{/privacy}", "received_events_url": "https://api.github.com/users/kan-bayashi/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 777173273, "node_id": "MDU6TGFiZWw3NzcxNzMyNzM=", "url": "https://api.github.com/repos/espnet/espnet/labels/Bug", "name": "Bug", "color": "ee0701", "default": false, "description": "bug should be fixed"}], "state": "closed", "locked": false, "assignee": {"login": "kan-bayashi", "id": 22779813, "node_id": "MDQ6VXNlcjIyNzc5ODEz", "avatar_url": "https://avatars.githubusercontent.com/u/22779813?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kan-bayashi", "html_url": "https://github.com/kan-bayashi", "followers_url": "https://api.github.com/users/kan-bayashi/followers", "following_url": "https://api.github.com/users/kan-bayashi/following{/other_user}", "gists_url": "https://api.github.com/users/kan-bayashi/gists{/gist_id}", "starred_url": "https://api.github.com/users/kan-bayashi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kan-bayashi/subscriptions", "organizations_url": "https://api.github.com/users/kan-bayashi/orgs", "repos_url": "https://api.github.com/users/kan-bayashi/repos", "events_url": "https://api.github.com/users/kan-bayashi/events{/privacy}", "received_events_url": "https://api.github.com/users/kan-bayashi/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "kan-bayashi", "id": 22779813, "node_id": "MDQ6VXNlcjIyNzc5ODEz", "avatar_url": "https://avatars.githubusercontent.com/u/22779813?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kan-bayashi", "html_url": "https://github.com/kan-bayashi", "followers_url": "https://api.github.com/users/kan-bayashi/followers", "following_url": "https://api.github.com/users/kan-bayashi/following{/other_user}", "gists_url": "https://api.github.com/users/kan-bayashi/gists{/gist_id}", "starred_url": "https://api.github.com/users/kan-bayashi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kan-bayashi/subscriptions", "organizations_url": "https://api.github.com/users/kan-bayashi/orgs", "repos_url": "https://api.github.com/users/kan-bayashi/repos", "events_url": "https://api.github.com/users/kan-bayashi/events{/privacy}", "received_events_url": "https://api.github.com/users/kan-bayashi/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 8, "created_at": "2018-07-26T13:06:33Z", "updated_at": "2019-06-24T16:03:25Z", "closed_at": "2019-06-24T16:03:25Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "I found that `tts_pytorch` has memory leaking problem.\r\nBut I have not yet found the reason.", "reactions": {"url": "https://api.github.com/repos/espnet/espnet/issues/310/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/espnet/espnet/issues/310/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/espnet/espnet/issues/290", "repository_url": "https://api.github.com/repos/espnet/espnet", "labels_url": "https://api.github.com/repos/espnet/espnet/issues/290/labels{/name}", "comments_url": "https://api.github.com/repos/espnet/espnet/issues/290/comments", "events_url": "https://api.github.com/repos/espnet/espnet/issues/290/events", "html_url": "https://github.com/espnet/espnet/issues/290", "id": 340613349, "node_id": "MDU6SXNzdWUzNDA2MTMzNDk=", "number": 290, "title": "Warp CTC version in Makefile", "user": {"login": "miguelvr", "id": 7456627, "node_id": "MDQ6VXNlcjc0NTY2Mjc=", "avatar_url": "https://avatars.githubusercontent.com/u/7456627?v=4", "gravatar_id": "", "url": "https://api.github.com/users/miguelvr", "html_url": "https://github.com/miguelvr", "followers_url": "https://api.github.com/users/miguelvr/followers", "following_url": "https://api.github.com/users/miguelvr/following{/other_user}", "gists_url": "https://api.github.com/users/miguelvr/gists{/gist_id}", "starred_url": "https://api.github.com/users/miguelvr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/miguelvr/subscriptions", "organizations_url": "https://api.github.com/users/miguelvr/orgs", "repos_url": "https://api.github.com/users/miguelvr/repos", "events_url": "https://api.github.com/users/miguelvr/events{/privacy}", "received_events_url": "https://api.github.com/users/miguelvr/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 777173273, "node_id": "MDU6TGFiZWw3NzcxNzMyNzM=", "url": "https://api.github.com/repos/espnet/espnet/labels/Bug", "name": "Bug", "color": "ee0701", "default": false, "description": "bug should be fixed"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2018-07-12T12:18:30Z", "updated_at": "2018-08-27T10:09:20Z", "closed_at": "2018-08-27T10:09:20Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Since I couldn't run with multi GPU with pytorch 0.4.0, I decided to downgrade it to 0.3.1. However, I noticed a substantial slowdown in training. I think one factor might be the commit tag we are using in the Makefile, in which the GPU binding don't use the flag `voltile=True` (0.3.X) neither `with torch.no_grad()`, leading to the gradients being unnecessarily recorded in the CTC... \r\n\r\nI might be wrong, but we should at least change to this [commit](https://github.com/SeanNaren/warp-ctc/commit/34ab2673b8c5b99d8fc52bb04d53cfebbfc24fa3) for improved performance with v0.3.1. \r\n\r\nThis, however, is not a solution for the problem in version 0.4, so we should consider alternatives if backward campatibility is something desired.\r\n\r\nBest regards,\r\nMiguel", "reactions": {"url": "https://api.github.com/repos/espnet/espnet/issues/290/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/espnet/espnet/issues/290/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/espnet/espnet/issues/279", "repository_url": "https://api.github.com/repos/espnet/espnet", "labels_url": "https://api.github.com/repos/espnet/espnet/issues/279/labels{/name}", "comments_url": "https://api.github.com/repos/espnet/espnet/issues/279/comments", "events_url": "https://api.github.com/repos/espnet/espnet/issues/279/events", "html_url": "https://github.com/espnet/espnet/issues/279", "id": 338843233, "node_id": "MDU6SXNzdWUzMzg4NDMyMzM=", "number": 279, "title": "Multi Gpus with pytorch backend problem.", "user": {"login": "ZhuoranLyu", "id": 8801452, "node_id": "MDQ6VXNlcjg4MDE0NTI=", "avatar_url": "https://avatars.githubusercontent.com/u/8801452?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ZhuoranLyu", "html_url": "https://github.com/ZhuoranLyu", "followers_url": "https://api.github.com/users/ZhuoranLyu/followers", "following_url": "https://api.github.com/users/ZhuoranLyu/following{/other_user}", "gists_url": "https://api.github.com/users/ZhuoranLyu/gists{/gist_id}", "starred_url": "https://api.github.com/users/ZhuoranLyu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ZhuoranLyu/subscriptions", "organizations_url": "https://api.github.com/users/ZhuoranLyu/orgs", "repos_url": "https://api.github.com/users/ZhuoranLyu/repos", "events_url": "https://api.github.com/users/ZhuoranLyu/events{/privacy}", "received_events_url": "https://api.github.com/users/ZhuoranLyu/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 777173273, "node_id": "MDU6TGFiZWw3NzcxNzMyNzM=", "url": "https://api.github.com/repos/espnet/espnet/labels/Bug", "name": "Bug", "color": "ee0701", "default": false, "description": "bug should be fixed"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 21, "created_at": "2018-07-06T08:02:54Z", "updated_at": "2018-08-27T10:04:35Z", "closed_at": "2018-08-27T10:04:35Z", "author_association": "NONE", "active_lock_reason": null, "body": "I am using Pytorch 0.4 with 4 GTX 1080Ti. When I run using pytorch backend and multi gpus, it gives me this error.\r\n\r\n`# asr_train.py --ngpu 4 --backend pytorch --outdir exp/tr_en_vggblstmp_e4_subsample1_2_2_1_1_unit320_proj320_d1_unit300_location_aconvc10_aconvf100_mtlalpha0.5_adadelta_bs30_mli800_mlo150/results --debugmode 1 --dict data/lang_1char/tr_en_units.txt --debugdir exp/tr_en_vggblstmp_e4_subsample1_2_2_1_1_unit320_proj320_d1_unit300_location_aconvc10_aconvf100_mtlalpha0.5_adadelta_bs30_mli800_mlo150 --minibatches 0 --verbose 0 --resume --train-json dump/tr_en/deltafalse/data.json --valid-json dump/dt_en/deltafalse/data.json --etype vggblstmp --elayers 4 --eunits 320 --eprojs 320 --subsample 1_2_2_1_1 --dlayers 1 --dunits 300 --atype location --aconv-chans 10 --aconv-filts 100 --mtlalpha 0.5 --batch-size 30 --maxlen-in 800 --maxlen-out 150 --opt adadelta --epochs 100 \r\n# Started at Fri Jul  6 10:05:31 CST 2018\r\n#\r\n2018-07-06 10:05:31,582 (asr_train:146) WARNING: Skip DEBUG/INFO messages\r\n2018-07-06 10:05:31,587 (asr_train:186) WARNING: CUDA_VISIBLE_DEVICES is not set.\r\n2018-07-06 10:05:35,803 (e2e_asr_attctc_th:198) WARNING: Subsampling is not performed for vgg*. It is performed in max pooling layers at CNN.\r\nException in main training loop: torch/csrc/autograd/variable.cpp:115: get_grad_fn: Assertion `output_nr == 0` failed.\r\nTraceback (most recent call last):\r\n  File \"/home/lvzhuoran/code/espnet-master/tools/venv/local/lib/python2.7/site-packages/chainer/training/trainer.py\", line 306, in run\r\n    update()\r\n  File \"/home/lvzhuoran/code/espnet-master/tools/venv/local/lib/python2.7/site-packages/chainer/training/updaters/standard_updater.py\", line 149, in update\r\n    self.update_core()\r\n  File \"/home/lvzhuoran/code/espnet-master/src/asr/asr_pytorch.py\", line 122, in update_core\r\n    loss = 1. / self.num_gpu * self.model(x)\r\n  File \"/home/lvzhuoran/code/espnet-master/tools/venv/local/lib/python2.7/site-packages/torch/nn/modules/module.py\", line 491, in __call__\r\n    result = self.forward(*input, **kwargs)\r\n  File \"/home/lvzhuoran/code/espnet-master/src/asr/asr_pytorch.py\", line 168, in forward\r\n    outputs = self.parallel_apply(replicas, inputs, kwargs)\r\n  File \"/home/lvzhuoran/code/espnet-master/tools/venv/local/lib/python2.7/site-packages/torch/nn/parallel/data_parallel.py\", line 124, in parallel_apply\r\n    return parallel_apply(replicas, inputs, kwargs, self.device_ids[:len(replicas)])\r\n  File \"/home/lvzhuoran/code/espnet-master/tools/venv/local/lib/python2.7/site-packages/torch/nn/parallel/parallel_apply.py\", line 65, in parallel_apply\r\n    raise output\r\nWill finalize trainer extensions and updater before reraising the exception.\r\n\u001b[JTraceback (most recent call last):\r\n  File \"/home/lvzhuoran/code/espnet-master/egs/voxforge/asr1/../../../src/bin/asr_train.py\", line 224, in <module>\r\n    main()\r\n  File \"/home/lvzhuoran/code/espnet-master/egs/voxforge/asr1/../../../src/bin/asr_train.py\", line 218, in main\r\n    train(args)\r\n  File \"/home/lvzhuoran/code/espnet-master/src/asr/asr_pytorch.py\", line 377, in train\r\n    trainer.run()\r\n  File \"/home/lvzhuoran/code/espnet-master/tools/venv/local/lib/python2.7/site-packages/chainer/training/trainer.py\", line 320, in run\r\n    six.reraise(*sys.exc_info())\r\n  File \"/home/lvzhuoran/code/espnet-master/tools/venv/local/lib/python2.7/site-packages/chainer/training/trainer.py\", line 306, in run\r\n    update()\r\n  File \"/home/lvzhuoran/code/espnet-master/tools/venv/local/lib/python2.7/site-packages/chainer/training/updaters/standard_updater.py\", line 149, in update\r\n    self.update_core()\r\n  File \"/home/lvzhuoran/code/espnet-master/src/asr/asr_pytorch.py\", line 122, in update_core\r\n    loss = 1. / self.num_gpu * self.model(x)\r\n  File \"/home/lvzhuoran/code/espnet-master/tools/venv/local/lib/python2.7/site-packages/torch/nn/modules/module.py\", line 491, in __call__\r\n    result = self.forward(*input, **kwargs)\r\n  File \"/home/lvzhuoran/code/espnet-master/src/asr/asr_pytorch.py\", line 168, in forward\r\n    outputs = self.parallel_apply(replicas, inputs, kwargs)\r\n  File \"/home/lvzhuoran/code/espnet-master/tools/venv/local/lib/python2.7/site-packages/torch/nn/parallel/data_parallel.py\", line 124, in parallel_apply\r\n    return parallel_apply(replicas, inputs, kwargs, self.device_ids[:len(replicas)])\r\n  File \"/home/lvzhuoran/code/espnet-master/tools/venv/local/lib/python2.7/site-packages/torch/nn/parallel/parallel_apply.py\", line 65, in parallel_apply\r\n    raise output\r\nRuntimeError: torch/csrc/autograd/variable.cpp:115: get_grad_fn: Assertion `output_nr == 0` failed.`\r\n\r\n\r\nI am using Pytorch 0.4. I googled it and found [this](https://github.com/pytorch/pytorch/issues/7092) link to be useful. \r\n\r\nThanks,\r\nGeorge.\r\n\r\n\r\n\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/espnet/espnet/issues/279/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/espnet/espnet/issues/279/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/espnet/espnet/issues/274", "repository_url": "https://api.github.com/repos/espnet/espnet", "labels_url": "https://api.github.com/repos/espnet/espnet/issues/274/labels{/name}", "comments_url": "https://api.github.com/repos/espnet/espnet/issues/274/comments", "events_url": "https://api.github.com/repos/espnet/espnet/issues/274/events", "html_url": "https://github.com/espnet/espnet/pull/274", "id": 338126586, "node_id": "MDExOlB1bGxSZXF1ZXN0MTk5MTM2NDg4", "number": 274, "title": "fix pytorch nan pad for vgg", "user": {"login": "ShigekiKarita", "id": 6745326, "node_id": "MDQ6VXNlcjY3NDUzMjY=", "avatar_url": "https://avatars.githubusercontent.com/u/6745326?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ShigekiKarita", "html_url": "https://github.com/ShigekiKarita", "followers_url": "https://api.github.com/users/ShigekiKarita/followers", "following_url": "https://api.github.com/users/ShigekiKarita/following{/other_user}", "gists_url": "https://api.github.com/users/ShigekiKarita/gists{/gist_id}", "starred_url": "https://api.github.com/users/ShigekiKarita/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ShigekiKarita/subscriptions", "organizations_url": "https://api.github.com/users/ShigekiKarita/orgs", "repos_url": "https://api.github.com/users/ShigekiKarita/repos", "events_url": "https://api.github.com/users/ShigekiKarita/events{/privacy}", "received_events_url": "https://api.github.com/users/ShigekiKarita/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 777173273, "node_id": "MDU6TGFiZWw3NzcxNzMyNzM=", "url": "https://api.github.com/repos/espnet/espnet/labels/Bug", "name": "Bug", "color": "ee0701", "default": false, "description": "bug should be fixed"}], "state": "closed", "locked": false, "assignee": {"login": "ShigekiKarita", "id": 6745326, "node_id": "MDQ6VXNlcjY3NDUzMjY=", "avatar_url": "https://avatars.githubusercontent.com/u/6745326?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ShigekiKarita", "html_url": "https://github.com/ShigekiKarita", "followers_url": "https://api.github.com/users/ShigekiKarita/followers", "following_url": "https://api.github.com/users/ShigekiKarita/following{/other_user}", "gists_url": "https://api.github.com/users/ShigekiKarita/gists{/gist_id}", "starred_url": "https://api.github.com/users/ShigekiKarita/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ShigekiKarita/subscriptions", "organizations_url": "https://api.github.com/users/ShigekiKarita/orgs", "repos_url": "https://api.github.com/users/ShigekiKarita/repos", "events_url": "https://api.github.com/users/ShigekiKarita/events{/privacy}", "received_events_url": "https://api.github.com/users/ShigekiKarita/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ShigekiKarita", "id": 6745326, "node_id": "MDQ6VXNlcjY3NDUzMjY=", "avatar_url": "https://avatars.githubusercontent.com/u/6745326?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ShigekiKarita", "html_url": "https://github.com/ShigekiKarita", "followers_url": "https://api.github.com/users/ShigekiKarita/followers", "following_url": "https://api.github.com/users/ShigekiKarita/following{/other_user}", "gists_url": "https://api.github.com/users/ShigekiKarita/gists{/gist_id}", "starred_url": "https://api.github.com/users/ShigekiKarita/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ShigekiKarita/subscriptions", "organizations_url": "https://api.github.com/users/ShigekiKarita/orgs", "repos_url": "https://api.github.com/users/ShigekiKarita/repos", "events_url": "https://api.github.com/users/ShigekiKarita/events{/privacy}", "received_events_url": "https://api.github.com/users/ShigekiKarita/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 5, "created_at": "2018-07-04T04:29:40Z", "updated_at": "2018-07-05T11:59:25Z", "closed_at": "2018-07-05T11:59:24Z", "author_association": "MEMBER", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/espnet/espnet/pulls/274", "html_url": "https://github.com/espnet/espnet/pull/274", "diff_url": "https://github.com/espnet/espnet/pull/274.diff", "patch_url": "https://github.com/espnet/espnet/pull/274.patch", "merged_at": "2018-07-05T11:59:24Z"}, "body": "In comparison with chainer VGG implementation, pytorch has been worse (BLSTMP was fine). When I discussed with @sw005320 yesterday, I found that pytorch `pad_list` causes a serious unexpected behavior in `E2E` as follows \r\n\r\nhttps://github.com/espnet/espnet/blob/3e7af572f031b4c6819172067d2ed76aea978060/src/nets/e2e_asr_attctc_th.py#L146\r\n\r\nhttps://github.com/espnet/espnet/blob/3e7af572f031b4c6819172067d2ed76aea978060/src/nets/e2e_asr_attctc_th.py#L323-L325\r\n\r\nExcept for here, the `pad_value` is 0, `self.eos` or something not the default value. Although the `NaN` padding is good for finding out-of-bounds access, VGG is also set to `padding=(1, 1)` in  `torch.nn.Conv2d`. Hence it had convolved over NaN values while BLSTMP does not input over bounds of sequences.\r\n\r\n## WSJ training results\r\n\r\n- chainer VGGBLSTMP\r\n\r\n![acc](https://user-images.githubusercontent.com/6745326/42256688-bd21f264-7f8d-11e8-9a19-974ea25c1846.png)\r\n\r\n- pytorch VGGBLSTMP\r\n\r\n![acc](https://user-images.githubusercontent.com/6745326/42256801-256825b4-7f8e-11e8-808c-026c768f63a8.png)\r\n\r\n- pytorch VGGBLSTMP (this PR)\r\n\r\n![acc](https://user-images.githubusercontent.com/6745326/42297628-c7a4366c-803b-11e8-8845-2c7cbefd3548.png)\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/espnet/espnet/issues/274/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/espnet/espnet/issues/274/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/espnet/espnet/issues/262", "repository_url": "https://api.github.com/repos/espnet/espnet", "labels_url": "https://api.github.com/repos/espnet/espnet/issues/262/labels{/name}", "comments_url": "https://api.github.com/repos/espnet/espnet/issues/262/comments", "events_url": "https://api.github.com/repos/espnet/espnet/issues/262/events", "html_url": "https://github.com/espnet/espnet/issues/262", "id": 337353473, "node_id": "MDU6SXNzdWUzMzczNTM0NzM=", "number": 262, "title": "setting `mtlalpha` and `ctc_weight` to 0 causes large increase in CER/WER", "user": {"login": "arendu-zz", "id": 438969, "node_id": "MDQ6VXNlcjQzODk2OQ==", "avatar_url": "https://avatars.githubusercontent.com/u/438969?v=4", "gravatar_id": "", "url": "https://api.github.com/users/arendu-zz", "html_url": "https://github.com/arendu-zz", "followers_url": "https://api.github.com/users/arendu-zz/followers", "following_url": "https://api.github.com/users/arendu-zz/following{/other_user}", "gists_url": "https://api.github.com/users/arendu-zz/gists{/gist_id}", "starred_url": "https://api.github.com/users/arendu-zz/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/arendu-zz/subscriptions", "organizations_url": "https://api.github.com/users/arendu-zz/orgs", "repos_url": "https://api.github.com/users/arendu-zz/repos", "events_url": "https://api.github.com/users/arendu-zz/events{/privacy}", "received_events_url": "https://api.github.com/users/arendu-zz/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 777173273, "node_id": "MDU6TGFiZWw3NzcxNzMyNzM=", "url": "https://api.github.com/repos/espnet/espnet/labels/Bug", "name": "Bug", "color": "ee0701", "default": false, "description": "bug should be fixed"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 16, "created_at": "2018-07-02T02:58:17Z", "updated_at": "2018-08-28T03:45:58Z", "closed_at": "2018-08-28T03:45:58Z", "author_association": "NONE", "active_lock_reason": null, "body": "I ran the latest code from the master branch and notice something odd. When `mtlalpha` and `ctc_weight` is `0.0` performance drops catastrophically. I tested this on voxforge italian. See numbers below:\r\n\r\n| mtlalpha | ctc_weight | CER         |\r\n|----------|------------|-------------|\r\n| 0.5      | 0.3        | 14.5, 14.6  |\r\n| 0.0      | 0.0        | 81.1, 81.6  |\r\n| 0.5      | 0.0        | 18.6, 19.4 |\r\n\r\nInterestingly, a model trained with mtlalpha=0.5 but decoded with ctc_weight=0.5 does ok. My understanding is that the bottom 2 rows should have very similar performance.", "reactions": {"url": "https://api.github.com/repos/espnet/espnet/issues/262/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/espnet/espnet/issues/262/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/espnet/espnet/issues/233", "repository_url": "https://api.github.com/repos/espnet/espnet", "labels_url": "https://api.github.com/repos/espnet/espnet/issues/233/labels{/name}", "comments_url": "https://api.github.com/repos/espnet/espnet/issues/233/comments", "events_url": "https://api.github.com/repos/espnet/espnet/issues/233/events", "html_url": "https://github.com/espnet/espnet/issues/233", "id": 333002033, "node_id": "MDU6SXNzdWUzMzMwMDIwMzM=", "number": 233, "title": "error when no ended hypothesis ", "user": {"login": "sw005320", "id": 11741550, "node_id": "MDQ6VXNlcjExNzQxNTUw", "avatar_url": "https://avatars.githubusercontent.com/u/11741550?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sw005320", "html_url": "https://github.com/sw005320", "followers_url": "https://api.github.com/users/sw005320/followers", "following_url": "https://api.github.com/users/sw005320/following{/other_user}", "gists_url": "https://api.github.com/users/sw005320/gists{/gist_id}", "starred_url": "https://api.github.com/users/sw005320/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sw005320/subscriptions", "organizations_url": "https://api.github.com/users/sw005320/orgs", "repos_url": "https://api.github.com/users/sw005320/repos", "events_url": "https://api.github.com/users/sw005320/events{/privacy}", "received_events_url": "https://api.github.com/users/sw005320/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 777173273, "node_id": "MDU6TGFiZWw3NzcxNzMyNzM=", "url": "https://api.github.com/repos/espnet/espnet/labels/Bug", "name": "Bug", "color": "ee0701", "default": false, "description": "bug should be fixed"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2018-06-16T17:22:58Z", "updated_at": "2018-08-28T02:05:24Z", "closed_at": "2018-08-28T02:05:23Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "The recognition program will be failed when there is no ended hypothesis.\r\nThis happens at\r\nhttps://github.com/espnet/espnet/blob/master/src/nets/e2e_asr_attctc_th.py#L1894\r\nhttps://github.com/espnet/espnet/blob/master/src/nets/e2e_asr_attctc.py#L824\r\n\r\nWe need to have some treatment, e.g., just pushing a null result to `ended_hyps` with warning when no ended hypothesis.", "reactions": {"url": "https://api.github.com/repos/espnet/espnet/issues/233/reactions", "total_count": 1, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/espnet/espnet/issues/233/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/espnet/espnet/issues/78", "repository_url": "https://api.github.com/repos/espnet/espnet", "labels_url": "https://api.github.com/repos/espnet/espnet/issues/78/labels{/name}", "comments_url": "https://api.github.com/repos/espnet/espnet/issues/78/comments", "events_url": "https://api.github.com/repos/espnet/espnet/issues/78/events", "html_url": "https://github.com/espnet/espnet/issues/78", "id": 292341587, "node_id": "MDU6SXNzdWUyOTIzNDE1ODc=", "number": 78, "title": "wrong symlink to best model in lm_train.py", "user": {"login": "kan-bayashi", "id": 22779813, "node_id": "MDQ6VXNlcjIyNzc5ODEz", "avatar_url": "https://avatars.githubusercontent.com/u/22779813?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kan-bayashi", "html_url": "https://github.com/kan-bayashi", "followers_url": "https://api.github.com/users/kan-bayashi/followers", "following_url": "https://api.github.com/users/kan-bayashi/following{/other_user}", "gists_url": "https://api.github.com/users/kan-bayashi/gists{/gist_id}", "starred_url": "https://api.github.com/users/kan-bayashi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kan-bayashi/subscriptions", "organizations_url": "https://api.github.com/users/kan-bayashi/orgs", "repos_url": "https://api.github.com/users/kan-bayashi/repos", "events_url": "https://api.github.com/users/kan-bayashi/events{/privacy}", "received_events_url": "https://api.github.com/users/kan-bayashi/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 777173273, "node_id": "MDU6TGFiZWw3NzcxNzMyNzM=", "url": "https://api.github.com/repos/espnet/espnet/labels/Bug", "name": "Bug", "color": "ee0701", "default": false, "description": "bug should be fixed"}], "state": "closed", "locked": false, "assignee": {"login": "sw005320", "id": 11741550, "node_id": "MDQ6VXNlcjExNzQxNTUw", "avatar_url": "https://avatars.githubusercontent.com/u/11741550?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sw005320", "html_url": "https://github.com/sw005320", "followers_url": "https://api.github.com/users/sw005320/followers", "following_url": "https://api.github.com/users/sw005320/following{/other_user}", "gists_url": "https://api.github.com/users/sw005320/gists{/gist_id}", "starred_url": "https://api.github.com/users/sw005320/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sw005320/subscriptions", "organizations_url": "https://api.github.com/users/sw005320/orgs", "repos_url": "https://api.github.com/users/sw005320/repos", "events_url": "https://api.github.com/users/sw005320/events{/privacy}", "received_events_url": "https://api.github.com/users/sw005320/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "sw005320", "id": 11741550, "node_id": "MDQ6VXNlcjExNzQxNTUw", "avatar_url": "https://avatars.githubusercontent.com/u/11741550?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sw005320", "html_url": "https://github.com/sw005320", "followers_url": "https://api.github.com/users/sw005320/followers", "following_url": "https://api.github.com/users/sw005320/following{/other_user}", "gists_url": "https://api.github.com/users/sw005320/gists{/gist_id}", "starred_url": "https://api.github.com/users/sw005320/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sw005320/subscriptions", "organizations_url": "https://api.github.com/users/sw005320/orgs", "repos_url": "https://api.github.com/users/sw005320/repos", "events_url": "https://api.github.com/users/sw005320/events{/privacy}", "received_events_url": "https://api.github.com/users/sw005320/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2018-01-29T09:44:58Z", "updated_at": "2018-01-29T15:11:59Z", "closed_at": "2018-01-29T15:11:59Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "`lm_train.py` wrongly makes symlink to best model. \r\n```python \r\n(lm_train.py: line 400)\r\n               dest = args.outdir + '/rnnlm.model.best'\r\n                if os.path.lexists(dest):\r\n                    os.remove(dest)\r\n                os.symlink(args.outdir + '/rnnlm.model.' + str(epoch_now), dest)\r\n```\r\nI think above code should be as follows\r\n```python\r\n(lm_train.py: line 400)\r\n               dest = args.outdir + '/rnnlm.model.best'\r\n                if os.path.lexists(dest):\r\n                    os.remove(dest)\r\n                os.symlink('rnnlm.model.' + str(epoch_now), dest)\r\n```", "reactions": {"url": "https://api.github.com/repos/espnet/espnet/issues/78/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/espnet/espnet/issues/78/timeline", "performed_via_github_app": null, "state_reason": "completed"}]