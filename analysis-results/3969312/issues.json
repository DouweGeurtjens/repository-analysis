[{"url": "https://api.github.com/repos/simonw/datasette/issues/2066", "repository_url": "https://api.github.com/repos/simonw/datasette", "labels_url": "https://api.github.com/repos/simonw/datasette/issues/2066/labels{/name}", "comments_url": "https://api.github.com/repos/simonw/datasette/issues/2066/comments", "events_url": "https://api.github.com/repos/simonw/datasette/issues/2066/events", "html_url": "https://github.com/simonw/datasette/issues/2066", "id": 1686042269, "node_id": "I_kwDOBm6k_c5kfvad", "number": 2066, "title": "Failing test: httpx.InvalidURL: URL too long", "user": {"login": "simonw", "id": 9599, "node_id": "MDQ6VXNlcjk1OTk=", "avatar_url": "https://avatars.githubusercontent.com/u/9599?v=4", "gravatar_id": "", "url": "https://api.github.com/users/simonw", "html_url": "https://github.com/simonw", "followers_url": "https://api.github.com/users/simonw/followers", "following_url": "https://api.github.com/users/simonw/following{/other_user}", "gists_url": "https://api.github.com/users/simonw/gists{/gist_id}", "starred_url": "https://api.github.com/users/simonw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/simonw/subscriptions", "organizations_url": "https://api.github.com/users/simonw/orgs", "repos_url": "https://api.github.com/users/simonw/repos", "events_url": "https://api.github.com/users/simonw/events{/privacy}", "received_events_url": "https://api.github.com/users/simonw/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 727708732, "node_id": "MDU6TGFiZWw3Mjc3MDg3MzI=", "url": "https://api.github.com/repos/simonw/datasette/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}, {"id": 993222446, "node_id": "MDU6TGFiZWw5OTMyMjI0NDY=", "url": "https://api.github.com/repos/simonw/datasette/labels/ci", "name": "ci", "color": "c5daf9", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 10, "created_at": "2023-04-27T03:48:47Z", "updated_at": "2023-04-27T04:27:50Z", "closed_at": "2023-04-27T04:27:50Z", "author_association": "OWNER", "active_lock_reason": null, "body": "https://github.com/simonw/datasette/actions/runs/4815723640/jobs/8574667731\r\n```\r\n    def urlparse(url: str = \"\", **kwargs: typing.Optional[str]) -> ParseResult:\r\n        # Initial basic checks on allowable URLs.\r\n        # ---------------------------------------\r\n    \r\n        # Hard limit the maximum allowable URL length.\r\n        if len(url) > MAX_URL_LENGTH:\r\n>           raise InvalidURL(\"URL too long\")\r\nE           httpx.InvalidURL: URL too long\r\n\r\n/opt/hostedtoolcache/Python/3.7.16/x64/lib/python3.7/site-packages/httpx/_urlparse.py:155: InvalidURL\r\n=========================== short test summary info ============================\r\nFAILED tests/test_csv.py::test_max_csv_mb - httpx.InvalidURL: URL too long\r\n```", "reactions": {"url": "https://api.github.com/repos/simonw/datasette/issues/2066/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/simonw/datasette/issues/2066/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/simonw/datasette/issues/2065", "repository_url": "https://api.github.com/repos/simonw/datasette", "labels_url": "https://api.github.com/repos/simonw/datasette/issues/2065/labels{/name}", "comments_url": "https://api.github.com/repos/simonw/datasette/issues/2065/comments", "events_url": "https://api.github.com/repos/simonw/datasette/issues/2065/events", "html_url": "https://github.com/simonw/datasette/issues/2065", "id": 1686033652, "node_id": "I_kwDOBm6k_c5kftT0", "number": 2065, "title": "Datasette cannot be installed with Rye", "user": {"login": "simonw", "id": 9599, "node_id": "MDQ6VXNlcjk1OTk=", "avatar_url": "https://avatars.githubusercontent.com/u/9599?v=4", "gravatar_id": "", "url": "https://api.github.com/users/simonw", "html_url": "https://github.com/simonw", "followers_url": "https://api.github.com/users/simonw/followers", "following_url": "https://api.github.com/users/simonw/following{/other_user}", "gists_url": "https://api.github.com/users/simonw/gists{/gist_id}", "starred_url": "https://api.github.com/users/simonw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/simonw/subscriptions", "organizations_url": "https://api.github.com/users/simonw/orgs", "repos_url": "https://api.github.com/users/simonw/repos", "events_url": "https://api.github.com/users/simonw/events{/privacy}", "received_events_url": "https://api.github.com/users/simonw/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 727708732, "node_id": "MDU6TGFiZWw3Mjc3MDg3MzI=", "url": "https://api.github.com/repos/simonw/datasette/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2023-04-27T03:35:42Z", "updated_at": "2023-04-27T05:09:36Z", "closed_at": "2023-04-27T05:09:36Z", "author_association": "OWNER", "active_lock_reason": null, "body": "https://github.com/mitsuhiko/rye\r\n\r\nI tried this:\r\n\r\n    rye install datasette\r\n\r\nBut now:\r\n\r\n```\r\n% ~/.rye/shims/datasette\r\nTraceback (most recent call last):\r\n  File \"/Users/simon/.rye/shims/datasette\", line 5, in <module>\r\n    from datasette.cli import cli\r\n  File \"/Users/simon/.rye/tools/datasette/lib/python3.11/site-packages/datasette/cli.py\", line 17, in <module>\r\n    from .app import (\r\n  File \"/Users/simon/.rye/tools/datasette/lib/python3.11/site-packages/datasette/app.py\", line 14, in <module>\r\n    import pkg_resources\r\nModuleNotFoundError: No module named 'pkg_resources'\r\n```\r\nI think that's because `setuptools` is not included in Rye.", "reactions": {"url": "https://api.github.com/repos/simonw/datasette/issues/2065/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/simonw/datasette/issues/2065/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/simonw/datasette/issues/2037", "repository_url": "https://api.github.com/repos/simonw/datasette", "labels_url": "https://api.github.com/repos/simonw/datasette/issues/2037/labels{/name}", "comments_url": "https://api.github.com/repos/simonw/datasette/issues/2037/comments", "events_url": "https://api.github.com/repos/simonw/datasette/issues/2037/events", "html_url": "https://github.com/simonw/datasette/issues/2037", "id": 1615891776, "node_id": "I_kwDOBm6k_c5gUI1A", "number": 2037, "title": "Test failure: FAILED tests/test_cli.py::test_install_requirements - FileNotFoundError", "user": {"login": "simonw", "id": 9599, "node_id": "MDQ6VXNlcjk1OTk=", "avatar_url": "https://avatars.githubusercontent.com/u/9599?v=4", "gravatar_id": "", "url": "https://api.github.com/users/simonw", "html_url": "https://github.com/simonw", "followers_url": "https://api.github.com/users/simonw/followers", "following_url": "https://api.github.com/users/simonw/following{/other_user}", "gists_url": "https://api.github.com/users/simonw/gists{/gist_id}", "starred_url": "https://api.github.com/users/simonw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/simonw/subscriptions", "organizations_url": "https://api.github.com/users/simonw/orgs", "repos_url": "https://api.github.com/users/simonw/repos", "events_url": "https://api.github.com/users/simonw/events{/privacy}", "received_events_url": "https://api.github.com/users/simonw/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 727708732, "node_id": "MDU6TGFiZWw3Mjc3MDg3MzI=", "url": "https://api.github.com/repos/simonw/datasette/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}, {"id": 993222446, "node_id": "MDU6TGFiZWw5OTMyMjI0NDY=", "url": "https://api.github.com/repos/simonw/datasette/labels/ci", "name": "ci", "color": "c5daf9", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2023-03-08T20:30:06Z", "updated_at": "2023-03-09T22:33:39Z", "closed_at": "2023-03-09T22:33:39Z", "author_association": "OWNER", "active_lock_reason": null, "body": "> FAILED tests/test_cli.py::test_install_requirements - FileNotFoundError: [Errno 2] No such file or directory\r\n\r\nFrom https://github.com/simonw/datasette/actions/runs/4348548218/jobs/7597208191\r\n\r\n```\r\n=================================== FAILURES ===================================\r\n__________________________ test_install_requirements ___________________________\r\n\r\nrun_module = <MagicMock name='run_module' id='139768358191936'>\r\n\r\n    @mock.patch(\"datasette.cli.run_module\")\r\n    def test_install_requirements(run_module):\r\n        runner = CliRunner()\r\n>       with runner.isolated_filesystem():\r\n\r\n/home/runner/work/datasette/datasette/tests/test_cli.py:184: \r\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \r\n/opt/hostedtoolcache/Python/3.9.16/x64/lib/python3.9/contextlib.py:119: in __enter__\r\n    return next(self.gen)\r\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \r\n\r\nself = <click.testing.CliRunner object at 0x7f1e5bfb9490>, temp_dir = None\r\n\r\n    @contextlib.contextmanager\r\n    def isolated_filesystem(\r\n        self, temp_dir: t.Optional[t.Union[str, os.PathLike]] = None\r\n    ) -> t.Iterator[str]:\r\n        \"\"\"A context manager that creates a temporary directory and\r\n        changes the current working directory to it. This isolates tests\r\n        that affect the contents of the CWD to prevent them from\r\n        interfering with each other.\r\n    \r\n        :param temp_dir: Create the temporary directory under this\r\n            directory. If given, the created directory is not removed\r\n            when exiting.\r\n    \r\n        .. versionchanged:: 8.0\r\n            Added the ``temp_dir`` parameter.\r\n        \"\"\"\r\n>       cwd = os.getcwd()\r\nE       FileNotFoundError: [Errno 2] No such file or directory\r\n\r\n/opt/hostedtoolcache/Python/3.9.16/x64/lib/python3.9/site-packages/click/testing.py:466: FileNotFoundError\r\n```\r\nNot sure why it only affected the \"[Calculate test coverage](https://github.com/simonw/datasette/actions/workflows/test-coverage.yml)\" one.", "reactions": {"url": "https://api.github.com/repos/simonw/datasette/issues/2037/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/simonw/datasette/issues/2037/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/simonw/datasette/issues/2036", "repository_url": "https://api.github.com/repos/simonw/datasette", "labels_url": "https://api.github.com/repos/simonw/datasette/issues/2036/labels{/name}", "comments_url": "https://api.github.com/repos/simonw/datasette/issues/2036/comments", "events_url": "https://api.github.com/repos/simonw/datasette/issues/2036/events", "html_url": "https://github.com/simonw/datasette/issues/2036", "id": 1615862295, "node_id": "I_kwDOBm6k_c5gUBoX", "number": 2036, "title": "`publish cloudrun` reuses image tags, which can lead to very surprising deploy problems", "user": {"login": "simonw", "id": 9599, "node_id": "MDQ6VXNlcjk1OTk=", "avatar_url": "https://avatars.githubusercontent.com/u/9599?v=4", "gravatar_id": "", "url": "https://api.github.com/users/simonw", "html_url": "https://github.com/simonw", "followers_url": "https://api.github.com/users/simonw/followers", "following_url": "https://api.github.com/users/simonw/following{/other_user}", "gists_url": "https://api.github.com/users/simonw/gists{/gist_id}", "starred_url": "https://api.github.com/users/simonw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/simonw/subscriptions", "organizations_url": "https://api.github.com/users/simonw/orgs", "repos_url": "https://api.github.com/users/simonw/repos", "events_url": "https://api.github.com/users/simonw/events{/privacy}", "received_events_url": "https://api.github.com/users/simonw/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 727708732, "node_id": "MDU6TGFiZWw3Mjc3MDg3MzI=", "url": "https://api.github.com/repos/simonw/datasette/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}, {"id": 750250793, "node_id": "MDU6TGFiZWw3NTAyNTA3OTM=", "url": "https://api.github.com/repos/simonw/datasette/labels/datasette-publish", "name": "datasette-publish", "color": "c3bdf9", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2023-03-08T20:11:44Z", "updated_at": "2023-03-08T20:57:34Z", "closed_at": "2023-03-08T20:57:34Z", "author_association": "OWNER", "active_lock_reason": null, "body": "See this issue:\r\n- https://github.com/simonw/datasette.io/issues/141", "reactions": {"url": "https://api.github.com/repos/simonw/datasette/issues/2036/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/simonw/datasette/issues/2036/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/simonw/datasette/issues/1971", "repository_url": "https://api.github.com/repos/simonw/datasette", "labels_url": "https://api.github.com/repos/simonw/datasette/issues/1971/labels{/name}", "comments_url": "https://api.github.com/repos/simonw/datasette/issues/1971/comments", "events_url": "https://api.github.com/repos/simonw/datasette/issues/1971/events", "html_url": "https://github.com/simonw/datasette/issues/1971", "id": 1515185383, "node_id": "I_kwDOBm6k_c5aT-Tn", "number": 1971, "title": "Upgrade for Sphinx 6.0 (once Furo has support for it)", "user": {"login": "simonw", "id": 9599, "node_id": "MDQ6VXNlcjk1OTk=", "avatar_url": "https://avatars.githubusercontent.com/u/9599?v=4", "gravatar_id": "", "url": "https://api.github.com/users/simonw", "html_url": "https://github.com/simonw", "followers_url": "https://api.github.com/users/simonw/followers", "following_url": "https://api.github.com/users/simonw/following{/other_user}", "gists_url": "https://api.github.com/users/simonw/gists{/gist_id}", "starred_url": "https://api.github.com/users/simonw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/simonw/subscriptions", "organizations_url": "https://api.github.com/users/simonw/orgs", "repos_url": "https://api.github.com/users/simonw/repos", "events_url": "https://api.github.com/users/simonw/events{/privacy}", "received_events_url": "https://api.github.com/users/simonw/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 727708732, "node_id": "MDU6TGFiZWw3Mjc3MDg3MzI=", "url": "https://api.github.com/repos/simonw/datasette/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}, {"id": 750789605, "node_id": "MDU6TGFiZWw3NTA3ODk2MDU=", "url": "https://api.github.com/repos/simonw/datasette/labels/documentation", "name": "documentation", "color": "fc8b0a", "default": true, "description": null}, {"id": 2306869352, "node_id": "MDU6TGFiZWwyMzA2ODY5MzUy", "url": "https://api.github.com/repos/simonw/datasette/labels/blocked", "name": "blocked", "color": "c8acef", "default": false, "description": "Awaiting something else to happen first"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2022-12-31T19:04:35Z", "updated_at": "2023-01-10T02:02:34Z", "closed_at": "2023-01-10T02:02:34Z", "author_association": "OWNER", "active_lock_reason": null, "body": "A deployment of #1967 to ReadTheDocs just failed like this: https://readthedocs.org/projects/datasette/builds/19045460/\r\n\r\n```\r\nRunning Sphinx v6.0.0\r\nmaking output directory... done\r\nbuilding [mo]: targets for 0 po files that are out of date\r\nbuilding [html]: targets for 28 source files that are out of date\r\nupdating environment: [new config] 28 added, 0 changed, 0 removed\r\nreading sources... [  3%] authentication\r\nreading sources... [  7%] binary_data\r\nreading sources... [ 10%] changelog\r\n\r\nTraceback (most recent call last):\r\n  File \"/home/docs/checkouts/readthedocs.org/user_builds/datasette/envs/latest/lib/python3.9/site-packages/docutils/statemachine.py\", line 299, in next_line\r\n    self.line = self.input_lines[self.line_offset]\r\n  File \"/home/docs/checkouts/readthedocs.org/user_builds/datasette/envs/latest/lib/python3.9/site-packages/docutils/statemachine.py\", line 1136, in __getitem__\r\n    return self.data[i]\r\nIndexError: list index out of range\r\n\r\nDuring handling of the above exception, another exception occurred:\r\n\r\nTraceback (most recent call last):\r\n  File \"/home/docs/checkouts/readthedocs.org/user_builds/datasette/envs/latest/lib/python3.9/site-packages/docutils/statemachine.py\", line 226, in run\r\n    self.next_line()\r\n  File \"/home/docs/checkouts/readthedocs.org/user_builds/datasette/envs/latest/lib/python3.9/site-packages/docutils/statemachine.py\", line 302, in next_line\r\n    raise EOFError\r\nEOFError\r\n\r\nDuring handling of the above exception, another exception occurred:\r\n\r\nTraceback (most recent call last):\r\n  File \"/home/docs/checkouts/readthedocs.org/user_builds/datasette/envs/latest/lib/python3.9/site-packages/sphinx/cmd/build.py\", line 281, in build_main\r\n    app.build(args.force_all, args.filenames)\r\n  File \"/home/docs/checkouts/readthedocs.org/user_builds/datasette/envs/latest/lib/python3.9/site-packages/sphinx/application.py\", line 344, in build\r\n    self.builder.build_update()\r\n  File \"/home/docs/checkouts/readthedocs.org/user_builds/datasette/envs/latest/lib/python3.9/site-packages/sphinx/builders/__init__.py\", line 310, in build_update\r\n    self.build(to_build,\r\n  File \"/home/docs/checkouts/readthedocs.org/user_builds/datasette/envs/latest/lib/python3.9/site-packages/sphinx/builders/__init__.py\", line 326, in build\r\n    updated_docnames = set(self.read())\r\n  File \"/home/docs/checkouts/readthedocs.org/user_builds/datasette/envs/latest/lib/python3.9/site-packages/sphinx/builders/__init__.py\", line 433, in read\r\n    self._read_serial(docnames)\r\n  File \"/home/docs/checkouts/readthedocs.org/user_builds/datasette/envs/latest/lib/python3.9/site-packages/sphinx/builders/__init__.py\", line 454, in _read_serial\r\n    self.read_doc(docname)\r\n  File \"/home/docs/checkouts/readthedocs.org/user_builds/datasette/envs/latest/lib/python3.9/site-packages/sphinx/builders/__init__.py\", line 510, in read_doc\r\n    publisher.publish()\r\n  File \"/home/docs/checkouts/readthedocs.org/user_builds/datasette/envs/latest/lib/python3.9/site-packages/docutils/core.py\", line 224, in publish\r\n    self.document = self.reader.read(self.source, self.parser,\r\n  File \"/home/docs/checkouts/readthedocs.org/user_builds/datasette/envs/latest/lib/python3.9/site-packages/sphinx/io.py\", line 103, in read\r\n    self.parse()\r\n  File \"/home/docs/checkouts/readthedocs.org/user_builds/datasette/envs/latest/lib/python3.9/site-packages/docutils/readers/__init__.py\", line 76, in parse\r\n    self.parser.parse(self.input, document)\r\n  File \"/home/docs/checkouts/readthedocs.org/user_builds/datasette/envs/latest/lib/python3.9/site-packages/sphinx/parsers.py\", line 78, in parse\r\n    self.statemachine.run(inputlines, document, inliner=self.inliner)\r\n  File \"/home/docs/checkouts/readthedocs.org/user_builds/datasette/envs/latest/lib/python3.9/site-packages/docutils/parsers/rst/states.py\", line 169, in run\r\n    results = StateMachineWS.run(self, input_lines, input_offset,\r\n  File \"/home/docs/checkouts/readthedocs.org/user_builds/datasette/envs/latest/lib/python3.9/site-packages/docutils/statemachine.py\", line 233, in run\r\n    context, next_state, result = self.check_line(\r\n  File \"/home/docs/checkouts/readthedocs.org/user_builds/datasette/envs/latest/lib/python3.9/site-packages/docutils/statemachine.py\", line 445, in check_line\r\n    return method(match, context, next_state)\r\n  File \"/home/docs/checkouts/readthedocs.org/user_builds/datasette/envs/latest/lib/python3.9/site-packages/docutils/parsers/rst/states.py\", line 3024, in text\r\n    self.section(title.lstrip(), source, style, lineno + 1, messages)\r\n  File \"/home/docs/checkouts/readthedocs.org/user_builds/datasette/envs/latest/lib/python3.9/site-packages/docutils/parsers/rst/states.py\", line 325, in section\r\n    self.new_subsection(title, lineno, messages)\r\n  File \"/home/docs/checkouts/readthedocs.org/user_builds/datasette/envs/latest/lib/python3.9/site-packages/docutils/parsers/rst/states.py\", line 391, in new_subsection\r\n    newabsoffset = self.nested_parse(\r\n  File \"/home/docs/checkouts/readthedocs.org/user_builds/datasette/envs/latest/lib/python3.9/site-packages/docutils/parsers/rst/states.py\", line 279, in nested_parse\r\n    state_machine.run(block, input_offset, memo=self.memo,\r\n  File \"/home/docs/checkouts/readthedocs.org/user_builds/datasette/envs/latest/lib/python3.9/site-packages/docutils/parsers/rst/states.py\", line 195, in run\r\n    results = StateMachineWS.run(self, input_lines, input_offset)\r\n  File \"/home/docs/checkouts/readthedocs.org/user_builds/datasette/envs/latest/lib/python3.9/site-packages/docutils/statemachine.py\", line 233, in run\r\n    context, next_state, result = self.check_line(\r\n  File \"/home/docs/checkouts/readthedocs.org/user_builds/datasette/envs/latest/lib/python3.9/site-packages/docutils/statemachine.py\", line 445, in check_line\r\n    return method(match, context, next_state)\r\n  File \"/home/docs/checkouts/readthedocs.org/user_builds/datasette/envs/latest/lib/python3.9/site-packages/docutils/parsers/rst/states.py\", line 2785, in underline\r\n    self.section(title, source, style, lineno - 1, messages)\r\n  File \"/home/docs/checkouts/readthedocs.org/user_builds/datasette/envs/latest/lib/python3.9/site-packages/docutils/parsers/rst/states.py\", line 325, in section\r\n    self.new_subsection(title, lineno, messages)\r\n  File \"/home/docs/checkouts/readthedocs.org/user_builds/datasette/envs/latest/lib/python3.9/site-packages/docutils/parsers/rst/states.py\", line 391, in new_subsection\r\n    newabsoffset = self.nested_parse(\r\n  File \"/home/docs/checkouts/readthedocs.org/user_builds/datasette/envs/latest/lib/python3.9/site-packages/docutils/parsers/rst/states.py\", line 279, in nested_parse\r\n    state_machine.run(block, input_offset, memo=self.memo,\r\n  File \"/home/docs/checkouts/readthedocs.org/user_builds/datasette/envs/latest/lib/python3.9/site-packages/docutils/parsers/rst/states.py\", line 195, in run\r\n    results = StateMachineWS.run(self, input_lines, input_offset)\r\n  File \"/home/docs/checkouts/readthedocs.org/user_builds/datasette/envs/latest/lib/python3.9/site-packages/docutils/statemachine.py\", line 233, in run\r\n    context, next_state, result = self.check_line(\r\n  File \"/home/docs/checkouts/readthedocs.org/user_builds/datasette/envs/latest/lib/python3.9/site-packages/docutils/statemachine.py\", line 445, in check_line\r\n    return method(match, context, next_state)\r\n  File \"/home/docs/checkouts/readthedocs.org/user_builds/datasette/envs/latest/lib/python3.9/site-packages/docutils/parsers/rst/states.py\", line 1273, in bullet\r\n    i, blank_finish = self.list_item(match.end())\r\n  File \"/home/docs/checkouts/readthedocs.org/user_builds/datasette/envs/latest/lib/python3.9/site-packages/docutils/parsers/rst/states.py\", line 1295, in list_item\r\n    self.nested_parse(indented, input_offset=line_offset,\r\n  File \"/home/docs/checkouts/readthedocs.org/user_builds/datasette/envs/latest/lib/python3.9/site-packages/docutils/parsers/rst/states.py\", line 279, in nested_parse\r\n    state_machine.run(block, input_offset, memo=self.memo,\r\n  File \"/home/docs/checkouts/readthedocs.org/user_builds/datasette/envs/latest/lib/python3.9/site-packages/docutils/parsers/rst/states.py\", line 195, in run\r\n    results = StateMachineWS.run(self, input_lines, input_offset)\r\n  File \"/home/docs/checkouts/readthedocs.org/user_builds/datasette/envs/latest/lib/python3.9/site-packages/docutils/statemachine.py\", line 239, in run\r\n    result = state.eof(context)\r\n  File \"/home/docs/checkouts/readthedocs.org/user_builds/datasette/envs/latest/lib/python3.9/site-packages/docutils/parsers/rst/states.py\", line 2725, in eof\r\n    self.blank(None, context, None)\r\n  File \"/home/docs/checkouts/readthedocs.org/user_builds/datasette/envs/latest/lib/python3.9/site-packages/docutils/parsers/rst/states.py\", line 2716, in blank\r\n    paragraph, literalnext = self.paragraph(\r\n  File \"/home/docs/checkouts/readthedocs.org/user_builds/datasette/envs/latest/lib/python3.9/site-packages/docutils/parsers/rst/states.py\", line 416, in paragraph\r\n    textnodes, messages = self.inline_text(text, lineno)\r\n  File \"/home/docs/checkouts/readthedocs.org/user_builds/datasette/envs/latest/lib/python3.9/site-packages/docutils/parsers/rst/states.py\", line 425, in inline_text\r\n    nodes, messages = self.inliner.parse(text, lineno,\r\n  File \"/home/docs/checkouts/readthedocs.org/user_builds/datasette/envs/latest/lib/python3.9/site-packages/docutils/parsers/rst/states.py\", line 649, in parse\r\n    before, inlines, remaining, sysmessages = method(self, match,\r\n  File \"/home/docs/checkouts/readthedocs.org/user_builds/datasette/envs/latest/lib/python3.9/site-packages/docutils/parsers/rst/states.py\", line 792, in interpreted_or_phrase_ref\r\n    nodelist, messages = self.interpreted(rawsource, escaped, role,\r\n  File \"/home/docs/checkouts/readthedocs.org/user_builds/datasette/envs/latest/lib/python3.9/site-packages/docutils/parsers/rst/states.py\", line 889, in interpreted\r\n    nodes, messages2 = role_fn(role, rawsource, text, lineno, self)\r\n  File \"/home/docs/checkouts/readthedocs.org/user_builds/datasette/envs/latest/lib/python3.9/site-packages/sphinx/ext/extlinks.py\", line 101, in role\r\n    title = caption % part\r\nTypeError: not all arguments converted during string formatting\r\n\r\nException occurred:\r\n  File \"/home/docs/checkouts/readthedocs.org/user_builds/datasette/envs/latest/lib/python3.9/site-packages/sphinx/ext/extlinks.py\", line 101, in role\r\n    title = caption % part\r\nTypeError: not all arguments converted during string formatting\r\nThe full traceback has been saved in /tmp/sphinx-err-kq7ylgqo.log, if you want to report the issue to the developers.\r\nPlease also report this if it was a user error, so that a better error message can be provided next time.\r\nA bug report can be filed in the tracker at <https://github.com/sphinx-doc/sphinx/issues>. Thanks! \r\n```", "reactions": {"url": "https://api.github.com/repos/simonw/datasette/issues/1971/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/simonw/datasette/issues/1971/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/simonw/datasette/issues/1970", "repository_url": "https://api.github.com/repos/simonw/datasette", "labels_url": "https://api.github.com/repos/simonw/datasette/issues/1970/labels{/name}", "comments_url": "https://api.github.com/repos/simonw/datasette/issues/1970/comments", "events_url": "https://api.github.com/repos/simonw/datasette/issues/1970/events", "html_url": "https://github.com/simonw/datasette/issues/1970", "id": 1515182998, "node_id": "I_kwDOBm6k_c5aT9uW", "number": 1970, "title": "Path \"None\" in _internal database table", "user": {"login": "simonw", "id": 9599, "node_id": "MDQ6VXNlcjk1OTk=", "avatar_url": "https://avatars.githubusercontent.com/u/9599?v=4", "gravatar_id": "", "url": "https://api.github.com/users/simonw", "html_url": "https://github.com/simonw", "followers_url": "https://api.github.com/users/simonw/followers", "following_url": "https://api.github.com/users/simonw/following{/other_user}", "gists_url": "https://api.github.com/users/simonw/gists{/gist_id}", "starred_url": "https://api.github.com/users/simonw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/simonw/subscriptions", "organizations_url": "https://api.github.com/users/simonw/orgs", "repos_url": "https://api.github.com/users/simonw/repos", "events_url": "https://api.github.com/users/simonw/events{/privacy}", "received_events_url": "https://api.github.com/users/simonw/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 727708732, "node_id": "MDU6TGFiZWw3Mjc3MDg3MzI=", "url": "https://api.github.com/repos/simonw/datasette/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2022-12-31T18:51:05Z", "updated_at": "2022-12-31T19:22:58Z", "closed_at": "2022-12-31T18:52:49Z", "author_association": "OWNER", "active_lock_reason": null, "body": "See https://latest.datasette.io/_internal/databases (after https://latest.datasette.io/login-as-root)\r\n\r\n<img width=\"551\" alt=\"image\" src=\"https://user-images.githubusercontent.com/9599/210153171-625d3706-8b1a-4c80-9662-46985350f6b6.png\">\r\n", "reactions": {"url": "https://api.github.com/repos/simonw/datasette/issues/1970/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/simonw/datasette/issues/1970/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/simonw/datasette/issues/1961", "repository_url": "https://api.github.com/repos/simonw/datasette", "labels_url": "https://api.github.com/repos/simonw/datasette/issues/1961/labels{/name}", "comments_url": "https://api.github.com/repos/simonw/datasette/issues/1961/comments", "events_url": "https://api.github.com/repos/simonw/datasette/issues/1961/events", "html_url": "https://github.com/simonw/datasette/pull/1961", "id": 1499387139, "node_id": "PR_kwDOBm6k_c5FmNXs", "number": 1961, "title": "Use click.echo() instead of print() for --root option", "user": {"login": "simonw", "id": 9599, "node_id": "MDQ6VXNlcjk1OTk=", "avatar_url": "https://avatars.githubusercontent.com/u/9599?v=4", "gravatar_id": "", "url": "https://api.github.com/users/simonw", "html_url": "https://github.com/simonw", "followers_url": "https://api.github.com/users/simonw/followers", "following_url": "https://api.github.com/users/simonw/following{/other_user}", "gists_url": "https://api.github.com/users/simonw/gists{/gist_id}", "starred_url": "https://api.github.com/users/simonw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/simonw/subscriptions", "organizations_url": "https://api.github.com/users/simonw/orgs", "repos_url": "https://api.github.com/users/simonw/repos", "events_url": "https://api.github.com/users/simonw/events{/privacy}", "received_events_url": "https://api.github.com/users/simonw/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 727708732, "node_id": "MDU6TGFiZWw3Mjc3MDg3MzI=", "url": "https://api.github.com/repos/simonw/datasette/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2022-12-16T00:54:56Z", "updated_at": "2022-12-16T00:55:19Z", "closed_at": "2022-12-16T00:55:18Z", "author_association": "OWNER", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/simonw/datasette/pulls/1961", "html_url": "https://github.com/simonw/datasette/pull/1961", "diff_url": "https://github.com/simonw/datasette/pull/1961.diff", "patch_url": "https://github.com/simonw/datasette/pull/1961.patch", "merged_at": "2022-12-16T00:55:18Z"}, "body": "This ensures the URL is output correctly when running under Docker.\r\n\r\nCloses #1958\r\n\r\n<!-- readthedocs-preview datasette start -->\r\n----\n:books: Documentation preview :books:: https://datasette--1961.org.readthedocs.build/en/1961/\n\r\n<!-- readthedocs-preview datasette end -->", "reactions": {"url": "https://api.github.com/repos/simonw/datasette/issues/1961/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/simonw/datasette/issues/1961/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/simonw/datasette/issues/1955", "repository_url": "https://api.github.com/repos/simonw/datasette", "labels_url": "https://api.github.com/repos/simonw/datasette/issues/1955/labels{/name}", "comments_url": "https://api.github.com/repos/simonw/datasette/issues/1955/comments", "events_url": "https://api.github.com/repos/simonw/datasette/issues/1955/events", "html_url": "https://github.com/simonw/datasette/issues/1955", "id": 1496652622, "node_id": "I_kwDOBm6k_c5ZNRtO", "number": 1955, "title": "invoke_startup() is not run in some conditions, e.g. gunicorn/uvicorn workers, breaking lots of things", "user": {"login": "Rik-de-Kort", "id": 32839123, "node_id": "MDQ6VXNlcjMyODM5MTIz", "avatar_url": "https://avatars.githubusercontent.com/u/32839123?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Rik-de-Kort", "html_url": "https://github.com/Rik-de-Kort", "followers_url": "https://api.github.com/users/Rik-de-Kort/followers", "following_url": "https://api.github.com/users/Rik-de-Kort/following{/other_user}", "gists_url": "https://api.github.com/users/Rik-de-Kort/gists{/gist_id}", "starred_url": "https://api.github.com/users/Rik-de-Kort/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Rik-de-Kort/subscriptions", "organizations_url": "https://api.github.com/users/Rik-de-Kort/orgs", "repos_url": "https://api.github.com/users/Rik-de-Kort/repos", "events_url": "https://api.github.com/users/Rik-de-Kort/events{/privacy}", "received_events_url": "https://api.github.com/users/Rik-de-Kort/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 727708732, "node_id": "MDU6TGFiZWw3Mjc3MDg3MzI=", "url": "https://api.github.com/repos/simonw/datasette/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 36, "created_at": "2022-12-14T13:39:56Z", "updated_at": "2022-12-19T04:34:16Z", "closed_at": "2022-12-18T02:45:18Z", "author_association": "NONE", "active_lock_reason": null, "body": "In the past (pre-september 14, #1809) I had a running deployment of Datasette on Azure WebApps by emulating the call in cli.py to Gunicorn: `gunicorn -w 2 -k uvicorn.workers.UvicornWorker app:app`.\r\n\r\nMy most recent deployment, however, fails loudly by shouting that `Datasette.invoke_startup()` was not called. It does not seem to be possible to call `invoke_startup` when running using a uvicorn command directly like this (I've reproduced this locally using `uvicorn`).  Two candidates that I have tried:\r\n* Uvicorn has a `--factory` option, but the app factory has to be synchronous, so no `await invoke_startup` there\r\n* `asyncio.get_event_loop().run_until_complete` is also not an option because `uvicorn` already has the event loop running.\r\n\r\nOne additional option is:\r\n* Use Gunicorn's [server hooks](https://docs.gunicorn.org/en/stable/settings.html#server-hooks) to call `invoke_startup`. These are also synchronous, but I might be able to get ahead of the event loop starting here.\r\n\r\nIn my current deployment setup, it does not appear to be possible to use `datasette serve` directly, so I'm stuck either\r\n* Trying to rework my complete deployment setup, for instance, using Azure functions as described [here](https://github.com/simonw/azure-functions-datasette))\r\n* Or dig into the ASGI spec and write a wrapper for the sole purpose of launching Datasette using a direct Uvicorn invocation.\r\n\r\nQuestions for the maintainers:\r\n* Is this intended behaviour/will not support/etc.? If so, I'd be happy to add a PR with a couple lines in the documentation.\r\n* if this is not intended behaviour, what is a good way to fix it? I could have a go at the ASGI spec thing (I think the Azure Functions thing is related) and provide a PR with the wrapper here, but I'm all ears!\r\n\r\nAlmost forgot, minimal reproducer:\r\n```python\r\nfrom datasette import Datasette\r\n\r\nds = Datasette(files=['./global-power-plants.db'])]\r\napp = ds.app()\r\n```\r\n\r\nSave as app.py in the same folder as global-power-plants.db, and then try running\r\n`uvicorn app:app`.\r\n\r\nOpening the resulting Datasette instance in the browser will show the error message.", "reactions": {"url": "https://api.github.com/repos/simonw/datasette/issues/1955/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/simonw/datasette/issues/1955/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/simonw/datasette/issues/1950", "repository_url": "https://api.github.com/repos/simonw/datasette", "labels_url": "https://api.github.com/repos/simonw/datasette/issues/1950/labels{/name}", "comments_url": "https://api.github.com/repos/simonw/datasette/issues/1950/comments", "events_url": "https://api.github.com/repos/simonw/datasette/issues/1950/events", "html_url": "https://github.com/simonw/datasette/issues/1950", "id": 1495241162, "node_id": "I_kwDOBm6k_c5ZH5HK", "number": 1950, "title": "Bad ?_sort returns a 500 error, should be a 400", "user": {"login": "simonw", "id": 9599, "node_id": "MDQ6VXNlcjk1OTk=", "avatar_url": "https://avatars.githubusercontent.com/u/9599?v=4", "gravatar_id": "", "url": "https://api.github.com/users/simonw", "html_url": "https://github.com/simonw", "followers_url": "https://api.github.com/users/simonw/followers", "following_url": "https://api.github.com/users/simonw/following{/other_user}", "gists_url": "https://api.github.com/users/simonw/gists{/gist_id}", "starred_url": "https://api.github.com/users/simonw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/simonw/subscriptions", "organizations_url": "https://api.github.com/users/simonw/orgs", "repos_url": "https://api.github.com/users/simonw/repos", "events_url": "https://api.github.com/users/simonw/events{/privacy}", "received_events_url": "https://api.github.com/users/simonw/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 727708732, "node_id": "MDU6TGFiZWw3Mjc3MDg3MzI=", "url": "https://api.github.com/repos/simonw/datasette/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2022-12-13T22:08:16Z", "updated_at": "2022-12-13T22:23:22Z", "closed_at": "2022-12-13T22:23:22Z", "author_association": "OWNER", "active_lock_reason": null, "body": "https://latest.datasette.io/fixtures/facetable?_sort=bad\r\n\r\n<img width=\"453\" alt=\"image\" src=\"https://user-images.githubusercontent.com/9599/207454481-2ba2e2bd-7400-47a6-b8a1-f898a2d364d8.png\">\r\n", "reactions": {"url": "https://api.github.com/repos/simonw/datasette/issues/1950/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/simonw/datasette/issues/1950/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/simonw/datasette/issues/1958", "repository_url": "https://api.github.com/repos/simonw/datasette", "labels_url": "https://api.github.com/repos/simonw/datasette/issues/1958/labels{/name}", "comments_url": "https://api.github.com/repos/simonw/datasette/issues/1958/comments", "events_url": "https://api.github.com/repos/simonw/datasette/issues/1958/events", "html_url": "https://github.com/simonw/datasette/issues/1958", "id": 1497909798, "node_id": "I_kwDOBm6k_c5ZSEom", "number": 1958, "title": "datasette --root running in Docker doesn't reliably show the magic URL", "user": {"login": "davidhaley", "id": 11729897, "node_id": "MDQ6VXNlcjExNzI5ODk3", "avatar_url": "https://avatars.githubusercontent.com/u/11729897?v=4", "gravatar_id": "", "url": "https://api.github.com/users/davidhaley", "html_url": "https://github.com/davidhaley", "followers_url": "https://api.github.com/users/davidhaley/followers", "following_url": "https://api.github.com/users/davidhaley/following{/other_user}", "gists_url": "https://api.github.com/users/davidhaley/gists{/gist_id}", "starred_url": "https://api.github.com/users/davidhaley/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/davidhaley/subscriptions", "organizations_url": "https://api.github.com/users/davidhaley/orgs", "repos_url": "https://api.github.com/users/davidhaley/repos", "events_url": "https://api.github.com/users/davidhaley/events{/privacy}", "received_events_url": "https://api.github.com/users/davidhaley/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 727708732, "node_id": "MDU6TGFiZWw3Mjc3MDg3MzI=", "url": "https://api.github.com/repos/simonw/datasette/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}, {"id": 727708738, "node_id": "MDU6TGFiZWw3Mjc3MDg3Mzg=", "url": "https://api.github.com/repos/simonw/datasette/labels/question", "name": "question", "color": "cc317c", "default": true, "description": null}, {"id": 3083290624, "node_id": "MDU6TGFiZWwzMDgzMjkwNjI0", "url": "https://api.github.com/repos/simonw/datasette/labels/docker", "name": "docker", "color": "928ED5", "default": false, "description": "The official Docker image, plus other things related to running Datasette on Docker"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 11, "created_at": "2022-12-13T16:29:13Z", "updated_at": "2022-12-16T00:59:12Z", "closed_at": "2022-12-16T00:55:19Z", "author_association": "NONE", "active_lock_reason": null, "body": "I followed these steps:\r\n\r\n`docker run datasetteproject/datasette  pip install datasette-upload-csvs`\r\n\r\n`docker commit $(docker ps -lq) datasette-with-plugins`\r\n\r\n`docker run -p 8001:8001 -v $(pwd):/mnt   datasette-with-plugins   datasette --root -p 8001 -h 0.0.0.0`\r\n\r\nVisited: http://127.0.0.1:8001/-/plugins\r\n\r\n![image](https://user-images.githubusercontent.com/11729897/207392071-d939cd5e-1d96-4e11-b0be-dc06dd207866.png)\r\n\r\n\r\nVisited: http://localhost:8001/-/upload-csvs\r\n\r\n![image](https://user-images.githubusercontent.com/11729897/207389241-3e96ca66-ca74-4a16-8b7d-4427ee862c5e.png)\r\n\r\nI may have missed a step?\r\n\r\nThank you.\r\n\r\n---\r\n\r\nUbuntu 22.04.1 LTS", "reactions": {"url": "https://api.github.com/repos/simonw/datasette/issues/1958/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/simonw/datasette/issues/1958/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/simonw/datasette/issues/1929", "repository_url": "https://api.github.com/repos/simonw/datasette", "labels_url": "https://api.github.com/repos/simonw/datasette/issues/1929/labels{/name}", "comments_url": "https://api.github.com/repos/simonw/datasette/issues/1929/comments", "events_url": "https://api.github.com/repos/simonw/datasette/issues/1929/events", "html_url": "https://github.com/simonw/datasette/issues/1929", "id": 1473659191, "node_id": "I_kwDOBm6k_c5X1kE3", "number": 1929, "title": "Incorrect link from the API explorer to the JSON API documentation", "user": {"login": "davidbgk", "id": 3556, "node_id": "MDQ6VXNlcjM1NTY=", "avatar_url": "https://avatars.githubusercontent.com/u/3556?v=4", "gravatar_id": "", "url": "https://api.github.com/users/davidbgk", "html_url": "https://github.com/davidbgk", "followers_url": "https://api.github.com/users/davidbgk/followers", "following_url": "https://api.github.com/users/davidbgk/following{/other_user}", "gists_url": "https://api.github.com/users/davidbgk/gists{/gist_id}", "starred_url": "https://api.github.com/users/davidbgk/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/davidbgk/subscriptions", "organizations_url": "https://api.github.com/users/davidbgk/orgs", "repos_url": "https://api.github.com/users/davidbgk/repos", "events_url": "https://api.github.com/users/davidbgk/events{/privacy}", "received_events_url": "https://api.github.com/users/davidbgk/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 727708732, "node_id": "MDU6TGFiZWw3Mjc3MDg3MzI=", "url": "https://api.github.com/repos/simonw/datasette/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}, {"id": 750789605, "node_id": "MDU6TGFiZWw3NTA3ODk2MDU=", "url": "https://api.github.com/repos/simonw/datasette/labels/documentation", "name": "documentation", "color": "fc8b0a", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2022-12-03T02:08:58Z", "updated_at": "2022-12-06T19:36:23Z", "closed_at": "2022-12-06T19:34:20Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "I installed `datasette==1.0a1`.\r\n\r\nWhen I go to http://127.0.0.1:8001/-/api I have a link: `Use this tool to try out the [Datasette API](https://docs.datasette.io/en/1.0a1/json_api.html).` but that documentation page does not exist.\r\n\r\nI'm not sure where it has to be fixed, should it link to the stable page https://docs.datasette.io/en/stable/json_api.html , the latest one https://docs.datasette.io/en/latest/json_api.html#the-json-write-api or would it be more appropriated to deploy documentation for the `1.0a1` version?", "reactions": {"url": "https://api.github.com/repos/simonw/datasette/issues/1929/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/simonw/datasette/issues/1929/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/simonw/datasette/issues/1923", "repository_url": "https://api.github.com/repos/simonw/datasette", "labels_url": "https://api.github.com/repos/simonw/datasette/issues/1923/labels{/name}", "comments_url": "https://api.github.com/repos/simonw/datasette/issues/1923/comments", "events_url": "https://api.github.com/repos/simonw/datasette/issues/1923/events", "html_url": "https://github.com/simonw/datasette/issues/1923", "id": 1470320227, "node_id": "I_kwDOBm6k_c5Xo05j", "number": 1923, "title": "latest.datasette.io Cloud Run deploys failing", "user": {"login": "simonw", "id": 9599, "node_id": "MDQ6VXNlcjk1OTk=", "avatar_url": "https://avatars.githubusercontent.com/u/9599?v=4", "gravatar_id": "", "url": "https://api.github.com/users/simonw", "html_url": "https://github.com/simonw", "followers_url": "https://api.github.com/users/simonw/followers", "following_url": "https://api.github.com/users/simonw/following{/other_user}", "gists_url": "https://api.github.com/users/simonw/gists{/gist_id}", "starred_url": "https://api.github.com/users/simonw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/simonw/subscriptions", "organizations_url": "https://api.github.com/users/simonw/orgs", "repos_url": "https://api.github.com/users/simonw/repos", "events_url": "https://api.github.com/users/simonw/events{/privacy}", "received_events_url": "https://api.github.com/users/simonw/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 727708732, "node_id": "MDU6TGFiZWw3Mjc3MDg3MzI=", "url": "https://api.github.com/repos/simonw/datasette/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}, {"id": 2308886390, "node_id": "MDU6TGFiZWwyMzA4ODg2Mzkw", "url": "https://api.github.com/repos/simonw/datasette/labels/ops", "name": "ops", "color": "c2e2fc", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2022-11-30T22:49:34Z", "updated_at": "2022-11-30T23:04:56Z", "closed_at": "2022-11-30T23:04:56Z", "author_association": "OWNER", "active_lock_reason": null, "body": "https://github.com/simonw/datasette/actions/runs/3587402085/jobs/6038106719v\r\n\r\n```\r\nWarning: \"service_account_key\" has been deprecated. Please switch to using google-github-actions/auth which supports both Workload Identity Federation and Service Account Key JSON authentication. For more details, see https://github.com/google-github-actions/setup-gcloud#authorization\r\nError: google-github-actions/setup-gcloud failed with: failed to execute command `gcloud --quiet auth activate-service-account *** --key-file -`: /opt/hostedtoolcache/gcloud/275.0.0/x64/lib/googlecloudsdk/core/console/console_io.py:544: SyntaxWarning: \"is\" with a literal. Did you mean \"==\"?\r\n  if answer is None or (answer is '' and default is not None):\r\nERROR: gcloud failed to load: module 'collections' has no attribute 'MutableMapping'\r\n```", "reactions": {"url": "https://api.github.com/repos/simonw/datasette/issues/1923/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/simonw/datasette/issues/1923/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/simonw/datasette/issues/1917", "repository_url": "https://api.github.com/repos/simonw/datasette", "labels_url": "https://api.github.com/repos/simonw/datasette/issues/1917/labels{/name}", "comments_url": "https://api.github.com/repos/simonw/datasette/issues/1917/comments", "events_url": "https://api.github.com/repos/simonw/datasette/issues/1917/events", "html_url": "https://github.com/simonw/datasette/issues/1917", "id": 1469043836, "node_id": "I_kwDOBm6k_c5Xj9R8", "number": 1917, "title": "Don't allow writable API to edit the `_memory` database", "user": {"login": "simonw", "id": 9599, "node_id": "MDQ6VXNlcjk1OTk=", "avatar_url": "https://avatars.githubusercontent.com/u/9599?v=4", "gravatar_id": "", "url": "https://api.github.com/users/simonw", "html_url": "https://github.com/simonw", "followers_url": "https://api.github.com/users/simonw/followers", "following_url": "https://api.github.com/users/simonw/following{/other_user}", "gists_url": "https://api.github.com/users/simonw/gists{/gist_id}", "starred_url": "https://api.github.com/users/simonw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/simonw/subscriptions", "organizations_url": "https://api.github.com/users/simonw/orgs", "repos_url": "https://api.github.com/users/simonw/repos", "events_url": "https://api.github.com/users/simonw/events{/privacy}", "received_events_url": "https://api.github.com/users/simonw/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 727708732, "node_id": "MDU6TGFiZWw3Mjc3MDg3MzI=", "url": "https://api.github.com/repos/simonw/datasette/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}, {"id": 754730474, "node_id": "MDU6TGFiZWw3NTQ3MzA0NzQ=", "url": "https://api.github.com/repos/simonw/datasette/labels/json-api", "name": "json-api", "color": "77aef9", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/simonw/datasette/milestones/24", "html_url": "https://github.com/simonw/datasette/milestone/24", "labels_url": "https://api.github.com/repos/simonw/datasette/milestones/24/labels", "id": 7867486, "node_id": "MI_kwDOBm6k_c4AeAxe", "number": 24, "title": "Datasette 1.0a1", "description": "The first Datasette 1.0 alpha release.", "creator": {"login": "simonw", "id": 9599, "node_id": "MDQ6VXNlcjk1OTk=", "avatar_url": "https://avatars.githubusercontent.com/u/9599?v=4", "gravatar_id": "", "url": "https://api.github.com/users/simonw", "html_url": "https://github.com/simonw", "followers_url": "https://api.github.com/users/simonw/followers", "following_url": "https://api.github.com/users/simonw/following{/other_user}", "gists_url": "https://api.github.com/users/simonw/gists{/gist_id}", "starred_url": "https://api.github.com/users/simonw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/simonw/subscriptions", "organizations_url": "https://api.github.com/users/simonw/orgs", "repos_url": "https://api.github.com/users/simonw/repos", "events_url": "https://api.github.com/users/simonw/events{/privacy}", "received_events_url": "https://api.github.com/users/simonw/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 6, "state": "closed", "created_at": "2022-04-11T22:56:49Z", "updated_at": "2022-12-02T01:24:26Z", "due_on": null, "closed_at": "2022-12-02T01:24:26Z"}, "comments": 2, "created_at": "2022-11-30T04:51:59Z", "updated_at": "2022-11-30T05:07:56Z", "closed_at": "2022-11-30T05:07:55Z", "author_association": "OWNER", "active_lock_reason": null, "body": "It shows up on https://latest.datasette.io/-/api (once you are signed in as root) - but there's no point in creating tables in it because they likely won't persist from one request to the next, as it's not a shared named database.\r\n\r\n<img width=\"1122\" alt=\"image\" src=\"https://user-images.githubusercontent.com/9599/204710529-bfab8442-d89b-4928-9b9a-e39bc53c1673.png\">\r\n", "reactions": {"url": "https://api.github.com/repos/simonw/datasette/issues/1917/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/simonw/datasette/issues/1917/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/simonw/datasette/issues/1916", "repository_url": "https://api.github.com/repos/simonw/datasette", "labels_url": "https://api.github.com/repos/simonw/datasette/issues/1916/labels{/name}", "comments_url": "https://api.github.com/repos/simonw/datasette/issues/1916/comments", "events_url": "https://api.github.com/repos/simonw/datasette/issues/1916/events", "html_url": "https://github.com/simonw/datasette/issues/1916", "id": 1469015001, "node_id": "I_kwDOBm6k_c5Xj2PZ", "number": 1916, "title": "GET requests against POST endpoints should not 500 error", "user": {"login": "simonw", "id": 9599, "node_id": "MDQ6VXNlcjk1OTk=", "avatar_url": "https://avatars.githubusercontent.com/u/9599?v=4", "gravatar_id": "", "url": "https://api.github.com/users/simonw", "html_url": "https://github.com/simonw", "followers_url": "https://api.github.com/users/simonw/followers", "following_url": "https://api.github.com/users/simonw/following{/other_user}", "gists_url": "https://api.github.com/users/simonw/gists{/gist_id}", "starred_url": "https://api.github.com/users/simonw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/simonw/subscriptions", "organizations_url": "https://api.github.com/users/simonw/orgs", "repos_url": "https://api.github.com/users/simonw/repos", "events_url": "https://api.github.com/users/simonw/events{/privacy}", "received_events_url": "https://api.github.com/users/simonw/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 727708732, "node_id": "MDU6TGFiZWw3Mjc3MDg3MzI=", "url": "https://api.github.com/repos/simonw/datasette/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/simonw/datasette/milestones/24", "html_url": "https://github.com/simonw/datasette/milestone/24", "labels_url": "https://api.github.com/repos/simonw/datasette/milestones/24/labels", "id": 7867486, "node_id": "MI_kwDOBm6k_c4AeAxe", "number": 24, "title": "Datasette 1.0a1", "description": "The first Datasette 1.0 alpha release.", "creator": {"login": "simonw", "id": 9599, "node_id": "MDQ6VXNlcjk1OTk=", "avatar_url": "https://avatars.githubusercontent.com/u/9599?v=4", "gravatar_id": "", "url": "https://api.github.com/users/simonw", "html_url": "https://github.com/simonw", "followers_url": "https://api.github.com/users/simonw/followers", "following_url": "https://api.github.com/users/simonw/following{/other_user}", "gists_url": "https://api.github.com/users/simonw/gists{/gist_id}", "starred_url": "https://api.github.com/users/simonw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/simonw/subscriptions", "organizations_url": "https://api.github.com/users/simonw/orgs", "repos_url": "https://api.github.com/users/simonw/repos", "events_url": "https://api.github.com/users/simonw/events{/privacy}", "received_events_url": "https://api.github.com/users/simonw/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 6, "state": "closed", "created_at": "2022-04-11T22:56:49Z", "updated_at": "2022-12-02T01:24:26Z", "due_on": null, "closed_at": "2022-12-02T01:24:26Z"}, "comments": 1, "created_at": "2022-11-30T04:04:43Z", "updated_at": "2022-11-30T05:15:19Z", "closed_at": "2022-11-30T05:15:19Z", "author_association": "OWNER", "active_lock_reason": null, "body": "![CF37BA4D-0677-4DDD-A339-EAF163BB63B7](https://user-images.githubusercontent.com/9599/204705025-6f88e9f7-757d-45e8-a89c-ab97e84781e8.png)\r\n", "reactions": {"url": "https://api.github.com/repos/simonw/datasette/issues/1916/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/simonw/datasette/issues/1916/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/simonw/datasette/issues/1905", "repository_url": "https://api.github.com/repos/simonw/datasette", "labels_url": "https://api.github.com/repos/simonw/datasette/issues/1905/labels{/name}", "comments_url": "https://api.github.com/repos/simonw/datasette/issues/1905/comments", "events_url": "https://api.github.com/repos/simonw/datasette/issues/1905/events", "html_url": "https://github.com/simonw/datasette/issues/1905", "id": 1456012874, "node_id": "I_kwDOBm6k_c5WyP5K", "number": 1905, "title": "`publish heroku` failing due to old Python version", "user": {"login": "simonw", "id": 9599, "node_id": "MDQ6VXNlcjk1OTk=", "avatar_url": "https://avatars.githubusercontent.com/u/9599?v=4", "gravatar_id": "", "url": "https://api.github.com/users/simonw", "html_url": "https://github.com/simonw", "followers_url": "https://api.github.com/users/simonw/followers", "following_url": "https://api.github.com/users/simonw/following{/other_user}", "gists_url": "https://api.github.com/users/simonw/gists{/gist_id}", "starred_url": "https://api.github.com/users/simonw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/simonw/subscriptions", "organizations_url": "https://api.github.com/users/simonw/orgs", "repos_url": "https://api.github.com/users/simonw/repos", "events_url": "https://api.github.com/users/simonw/events{/privacy}", "received_events_url": "https://api.github.com/users/simonw/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 727708732, "node_id": "MDU6TGFiZWw3Mjc3MDg3MzI=", "url": "https://api.github.com/repos/simonw/datasette/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}, {"id": 750250793, "node_id": "MDU6TGFiZWw3NTAyNTA3OTM=", "url": "https://api.github.com/repos/simonw/datasette/labels/datasette-publish", "name": "datasette-publish", "color": "c3bdf9", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2022-11-19T00:01:45Z", "updated_at": "2022-11-19T01:12:05Z", "closed_at": "2022-11-19T00:52:29Z", "author_association": "OWNER", "active_lock_reason": null, "body": "Reported on Discord: https://discord.com/channels/823971286308356157/823971286941302908/1042814317118115901\r\n\r\n```\r\n-----> Building on the Heroku-22 stack\r\n-----> Determining which buildpack to use for this app\r\n-----> Python app detected\r\n-----> Using Python version specified in runtime.txt\r\n !     Requested runtime 'python-3.8.10' is not available for this stack (heroku-22).\r\n !     For supported versions, see: https://devcenter.heroku.com/articles/python-support\r\n !     Push rejected, failed to compile Python app.\r\n\r\n !     Push failed\r\n \u25b8    Build failed\r\n```\r\n", "reactions": {"url": "https://api.github.com/repos/simonw/datasette/issues/1905/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/simonw/datasette/issues/1905/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/simonw/datasette/issues/1904", "repository_url": "https://api.github.com/repos/simonw/datasette", "labels_url": "https://api.github.com/repos/simonw/datasette/issues/1904/labels{/name}", "comments_url": "https://api.github.com/repos/simonw/datasette/issues/1904/comments", "events_url": "https://api.github.com/repos/simonw/datasette/issues/1904/events", "html_url": "https://github.com/simonw/datasette/issues/1904", "id": 1455932972, "node_id": "I_kwDOBm6k_c5Wx8Ys", "number": 1904, "title": "Datasette Lite tests failing due to httpx upgrade", "user": {"login": "simonw", "id": 9599, "node_id": "MDQ6VXNlcjk1OTk=", "avatar_url": "https://avatars.githubusercontent.com/u/9599?v=4", "gravatar_id": "", "url": "https://api.github.com/users/simonw", "html_url": "https://github.com/simonw", "followers_url": "https://api.github.com/users/simonw/followers", "following_url": "https://api.github.com/users/simonw/following{/other_user}", "gists_url": "https://api.github.com/users/simonw/gists{/gist_id}", "starred_url": "https://api.github.com/users/simonw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/simonw/subscriptions", "organizations_url": "https://api.github.com/users/simonw/orgs", "repos_url": "https://api.github.com/users/simonw/repos", "events_url": "https://api.github.com/users/simonw/events{/privacy}", "received_events_url": "https://api.github.com/users/simonw/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 727708732, "node_id": "MDU6TGFiZWw3Mjc3MDg3MzI=", "url": "https://api.github.com/repos/simonw/datasette/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}, {"id": 993222446, "node_id": "MDU6TGFiZWw5OTMyMjI0NDY=", "url": "https://api.github.com/repos/simonw/datasette/labels/ci", "name": "ci", "color": "c5daf9", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/simonw/datasette/milestones/26", "html_url": "https://github.com/simonw/datasette/milestone/26", "labels_url": "https://api.github.com/repos/simonw/datasette/milestones/26/labels", "id": 8658075, "node_id": "MI_kwDOBm6k_c4AhByb", "number": 26, "title": "Datasette 1.0a0", "description": "The new Datasette Write API.", "creator": {"login": "simonw", "id": 9599, "node_id": "MDQ6VXNlcjk1OTk=", "avatar_url": "https://avatars.githubusercontent.com/u/9599?v=4", "gravatar_id": "", "url": "https://api.github.com/users/simonw", "html_url": "https://github.com/simonw", "followers_url": "https://api.github.com/users/simonw/followers", "following_url": "https://api.github.com/users/simonw/following{/other_user}", "gists_url": "https://api.github.com/users/simonw/gists{/gist_id}", "starred_url": "https://api.github.com/users/simonw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/simonw/subscriptions", "organizations_url": "https://api.github.com/users/simonw/orgs", "repos_url": "https://api.github.com/users/simonw/repos", "events_url": "https://api.github.com/users/simonw/events{/privacy}", "received_events_url": "https://api.github.com/users/simonw/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 23, "state": "closed", "created_at": "2022-11-15T19:56:07Z", "updated_at": "2022-11-29T20:11:39Z", "due_on": null, "closed_at": "2022-11-29T20:11:39Z"}, "comments": 0, "created_at": "2022-11-18T22:49:31Z", "updated_at": "2022-11-18T22:57:48Z", "closed_at": "2022-11-18T22:52:22Z", "author_association": "OWNER", "active_lock_reason": null, "body": "Same problem as this one:\r\n- https://github.com/simonw/datasette-lite/issues/56\r\n\r\nCaused this failure: https://github.com/simonw/datasette/actions/runs/3500765964", "reactions": {"url": "https://api.github.com/repos/simonw/datasette/issues/1904/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/simonw/datasette/issues/1904/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/simonw/datasette/issues/1901", "repository_url": "https://api.github.com/repos/simonw/datasette", "labels_url": "https://api.github.com/repos/simonw/datasette/issues/1901/labels{/name}", "comments_url": "https://api.github.com/repos/simonw/datasette/issues/1901/comments", "events_url": "https://api.github.com/repos/simonw/datasette/issues/1901/events", "html_url": "https://github.com/simonw/datasette/issues/1901", "id": 1453813400, "node_id": "I_kwDOBm6k_c5Wp26Y", "number": 1901, "title": "Some plugins show \"home\" breadcrumbs twice in the top left", "user": {"login": "bgrins", "id": 95570, "node_id": "MDQ6VXNlcjk1NTcw", "avatar_url": "https://avatars.githubusercontent.com/u/95570?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bgrins", "html_url": "https://github.com/bgrins", "followers_url": "https://api.github.com/users/bgrins/followers", "following_url": "https://api.github.com/users/bgrins/following{/other_user}", "gists_url": "https://api.github.com/users/bgrins/gists{/gist_id}", "starred_url": "https://api.github.com/users/bgrins/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bgrins/subscriptions", "organizations_url": "https://api.github.com/users/bgrins/orgs", "repos_url": "https://api.github.com/users/bgrins/repos", "events_url": "https://api.github.com/users/bgrins/events{/privacy}", "received_events_url": "https://api.github.com/users/bgrins/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 727708732, "node_id": "MDU6TGFiZWw3Mjc3MDg3MzI=", "url": "https://api.github.com/repos/simonw/datasette/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 8, "created_at": "2022-11-17T18:44:58Z", "updated_at": "2022-11-18T07:22:37Z", "closed_at": "2022-11-18T07:02:56Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "<img width=\"1023\" alt=\"Screenshot 2022-11-17 at 10 44 12 AM\" src=\"https://user-images.githubusercontent.com/95570/202531505-b8632f70-d95a-425f-b2f2-6380b153478b.png\">\r\n", "reactions": {"url": "https://api.github.com/repos/simonw/datasette/issues/1901/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/simonw/datasette/issues/1901/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/simonw/datasette/issues/1899", "repository_url": "https://api.github.com/repos/simonw/datasette", "labels_url": "https://api.github.com/repos/simonw/datasette/issues/1899/labels{/name}", "comments_url": "https://api.github.com/repos/simonw/datasette/issues/1899/comments", "events_url": "https://api.github.com/repos/simonw/datasette/issues/1899/events", "html_url": "https://github.com/simonw/datasette/issues/1899", "id": 1452495049, "node_id": "I_kwDOBm6k_c5Wk1DJ", "number": 1899, "title": "Clicking within the CodeMirror area below the SQL (i.e. when there's only a single line) doesn't cause the editor to get focused ", "user": {"login": "bgrins", "id": 95570, "node_id": "MDQ6VXNlcjk1NTcw", "avatar_url": "https://avatars.githubusercontent.com/u/95570?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bgrins", "html_url": "https://github.com/bgrins", "followers_url": "https://api.github.com/users/bgrins/followers", "following_url": "https://api.github.com/users/bgrins/following{/other_user}", "gists_url": "https://api.github.com/users/bgrins/gists{/gist_id}", "starred_url": "https://api.github.com/users/bgrins/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bgrins/subscriptions", "organizations_url": "https://api.github.com/users/bgrins/orgs", "repos_url": "https://api.github.com/users/bgrins/repos", "events_url": "https://api.github.com/users/bgrins/events{/privacy}", "received_events_url": "https://api.github.com/users/bgrins/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 727708732, "node_id": "MDU6TGFiZWw3Mjc3MDg3MzI=", "url": "https://api.github.com/repos/simonw/datasette/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}, {"id": 2389410569, "node_id": "MDU6TGFiZWwyMzg5NDEwNTY5", "url": "https://api.github.com/repos/simonw/datasette/labels/javascript", "name": "javascript", "color": "4c5bbf", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2022-11-17T00:29:52Z", "updated_at": "2022-11-18T07:28:28Z", "closed_at": "2022-11-18T07:20:53Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "After the upgrade to 6 (#1893) I noticed this. I think it's because we're doing overflow:hidden to accomplish the CSS resizer.\r\n\r\nWhen there's a single line of SQL there's a gap below that line where clicking doesn't do anything. It should focus at the end of the line.", "reactions": {"url": "https://api.github.com/repos/simonw/datasette/issues/1899/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/simonw/datasette/issues/1899/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/simonw/datasette/issues/1883", "repository_url": "https://api.github.com/repos/simonw/datasette", "labels_url": "https://api.github.com/repos/simonw/datasette/issues/1883/labels{/name}", "comments_url": "https://api.github.com/repos/simonw/datasette/issues/1883/comments", "events_url": "https://api.github.com/repos/simonw/datasette/issues/1883/events", "html_url": "https://github.com/simonw/datasette/issues/1883", "id": 1435917503, "node_id": "I_kwDOBm6k_c5Vlly_", "number": 1883, "title": "Errors when using table filters behind a proxy", "user": {"login": "mattmalcher", "id": 31312775, "node_id": "MDQ6VXNlcjMxMzEyNzc1", "avatar_url": "https://avatars.githubusercontent.com/u/31312775?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mattmalcher", "html_url": "https://github.com/mattmalcher", "followers_url": "https://api.github.com/users/mattmalcher/followers", "following_url": "https://api.github.com/users/mattmalcher/following{/other_user}", "gists_url": "https://api.github.com/users/mattmalcher/gists{/gist_id}", "starred_url": "https://api.github.com/users/mattmalcher/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mattmalcher/subscriptions", "organizations_url": "https://api.github.com/users/mattmalcher/orgs", "repos_url": "https://api.github.com/users/mattmalcher/repos", "events_url": "https://api.github.com/users/mattmalcher/events{/privacy}", "received_events_url": "https://api.github.com/users/mattmalcher/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 727708732, "node_id": "MDU6TGFiZWw3Mjc3MDg3MzI=", "url": "https://api.github.com/repos/simonw/datasette/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 13, "created_at": "2022-11-04T11:18:47Z", "updated_at": "2022-11-11T09:20:22Z", "closed_at": "2022-11-11T06:54:58Z", "author_association": "NONE", "active_lock_reason": null, "body": "Using datasette==0.63 table filters do not respect the `base_url` setting as described [here](https://docs.datasette.io/en/stable/deploying.html#running-datasette-behind-a-proxy)\r\n\r\nTo reproduce, go to:\r\nhttps://datasette-apache-proxy-demo.datasette.io/prefix/fixtures/binary_data\r\n\r\nThen use the table filter buttons.\r\nThe `/prefix/` is dropped, resulting in URL not found:\r\nhttps://datasette-apache-proxy-demo.datasette.io/fixtures/binary_data?_sort=rowid&rowid__exact=1\r\n", "reactions": {"url": "https://api.github.com/repos/simonw/datasette/issues/1883/reactions", "total_count": 1, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 1}, "timeline_url": "https://api.github.com/repos/simonw/datasette/issues/1883/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/simonw/datasette/issues/1876", "repository_url": "https://api.github.com/repos/simonw/datasette", "labels_url": "https://api.github.com/repos/simonw/datasette/issues/1876/labels{/name}", "comments_url": "https://api.github.com/repos/simonw/datasette/issues/1876/comments", "events_url": "https://api.github.com/repos/simonw/datasette/issues/1876/events", "html_url": "https://github.com/simonw/datasette/issues/1876", "id": 1431786951, "node_id": "I_kwDOBm6k_c5VV1XH", "number": 1876, "title": "SQL query should wrap on SQL interrupted screen", "user": {"login": "simonw", "id": 9599, "node_id": "MDQ6VXNlcjk1OTk=", "avatar_url": "https://avatars.githubusercontent.com/u/9599?v=4", "gravatar_id": "", "url": "https://api.github.com/users/simonw", "html_url": "https://github.com/simonw", "followers_url": "https://api.github.com/users/simonw/followers", "following_url": "https://api.github.com/users/simonw/following{/other_user}", "gists_url": "https://api.github.com/users/simonw/gists{/gist_id}", "starred_url": "https://api.github.com/users/simonw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/simonw/subscriptions", "organizations_url": "https://api.github.com/users/simonw/orgs", "repos_url": "https://api.github.com/users/simonw/repos", "events_url": "https://api.github.com/users/simonw/events{/privacy}", "received_events_url": "https://api.github.com/users/simonw/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 727708732, "node_id": "MDU6TGFiZWw3Mjc3MDg3MzI=", "url": "https://api.github.com/repos/simonw/datasette/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}, {"id": 967420289, "node_id": "MDU6TGFiZWw5Njc0MjAyODk=", "url": "https://api.github.com/repos/simonw/datasette/labels/minor", "name": "minor", "color": "fcd0c4", "default": false, "description": "Minor bugs (not high priority)"}, {"id": 2577163933, "node_id": "MDU6TGFiZWwyNTc3MTYzOTMz", "url": "https://api.github.com/repos/simonw/datasette/labels/usability", "name": "usability", "color": "4ace7d", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2022-11-01T17:14:01Z", "updated_at": "2022-11-01T17:22:33Z", "closed_at": "2022-11-01T17:22:33Z", "author_association": "OWNER", "active_lock_reason": null, "body": "Just saw this:\r\n\r\n<img width=\"1197\" alt=\"CleanShot 2022-11-01 at 10 12 16@2x\" src=\"https://user-images.githubusercontent.com/9599/199294909-df6fcb3b-40d0-4444-8a92-a7a358a28d86.png\">", "reactions": {"url": "https://api.github.com/repos/simonw/datasette/issues/1876/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/simonw/datasette/issues/1876/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/simonw/datasette/issues/1849", "repository_url": "https://api.github.com/repos/simonw/datasette", "labels_url": "https://api.github.com/repos/simonw/datasette/issues/1849/labels{/name}", "comments_url": "https://api.github.com/repos/simonw/datasette/issues/1849/comments", "events_url": "https://api.github.com/repos/simonw/datasette/issues/1849/events", "html_url": "https://github.com/simonw/datasette/issues/1849", "id": 1420174670, "node_id": "I_kwDOBm6k_c5UpiVO", "number": 1849, "title": "NoneType' object has no attribute 'actor'", "user": {"login": "simonw", "id": 9599, "node_id": "MDQ6VXNlcjk1OTk=", "avatar_url": "https://avatars.githubusercontent.com/u/9599?v=4", "gravatar_id": "", "url": "https://api.github.com/users/simonw", "html_url": "https://github.com/simonw", "followers_url": "https://api.github.com/users/simonw/followers", "following_url": "https://api.github.com/users/simonw/following{/other_user}", "gists_url": "https://api.github.com/users/simonw/gists{/gist_id}", "starred_url": "https://api.github.com/users/simonw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/simonw/subscriptions", "organizations_url": "https://api.github.com/users/simonw/orgs", "repos_url": "https://api.github.com/users/simonw/repos", "events_url": "https://api.github.com/users/simonw/events{/privacy}", "received_events_url": "https://api.github.com/users/simonw/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 727708732, "node_id": "MDU6TGFiZWw3Mjc3MDg3MzI=", "url": "https://api.github.com/repos/simonw/datasette/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2022-10-24T04:02:15Z", "updated_at": "2022-10-26T21:13:40Z", "closed_at": "2022-10-26T21:13:40Z", "author_association": "OWNER", "active_lock_reason": null, "body": "```\r\n  File \"/usr/local/lib/python3.10/site-packages/datasette/templates/_crumbs.html\", line 3, in template\r\n    {% set items=crumb_items(request=request, database=database, table=table) %}\r\n  File \"jinja2/async_utils.py\", line 65, in auto_await\r\n    return await t.cast(\"t.Awaitable[V]\", value)\r\n  File \"datasette/app.py\", line 638, in _crumb_items\r\n    actor=request.actor, action=\"view-instance\", default=True\r\n```\r\nFrom Sentry.", "reactions": {"url": "https://api.github.com/repos/simonw/datasette/issues/1849/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/simonw/datasette/issues/1849/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/simonw/datasette/issues/1847", "repository_url": "https://api.github.com/repos/simonw/datasette", "labels_url": "https://api.github.com/repos/simonw/datasette/issues/1847/labels{/name}", "comments_url": "https://api.github.com/repos/simonw/datasette/issues/1847/comments", "events_url": "https://api.github.com/repos/simonw/datasette/issues/1847/events", "html_url": "https://github.com/simonw/datasette/issues/1847", "id": 1420055377, "node_id": "I_kwDOBm6k_c5UpFNR", "number": 1847, "title": "Both _local_metadata and _metadata_local?", "user": {"login": "simonw", "id": 9599, "node_id": "MDQ6VXNlcjk1OTk=", "avatar_url": "https://avatars.githubusercontent.com/u/9599?v=4", "gravatar_id": "", "url": "https://api.github.com/users/simonw", "html_url": "https://github.com/simonw", "followers_url": "https://api.github.com/users/simonw/followers", "following_url": "https://api.github.com/users/simonw/following{/other_user}", "gists_url": "https://api.github.com/users/simonw/gists{/gist_id}", "starred_url": "https://api.github.com/users/simonw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/simonw/subscriptions", "organizations_url": "https://api.github.com/users/simonw/orgs", "repos_url": "https://api.github.com/users/simonw/repos", "events_url": "https://api.github.com/users/simonw/events{/privacy}", "received_events_url": "https://api.github.com/users/simonw/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 727708732, "node_id": "MDU6TGFiZWw3Mjc3MDg3MzI=", "url": "https://api.github.com/repos/simonw/datasette/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2022-10-24T01:43:08Z", "updated_at": "2022-10-24T01:53:13Z", "closed_at": "2022-10-24T01:53:13Z", "author_association": "OWNER", "active_lock_reason": null, "body": "Spotted this in the debugger against the `datasette` object while running tests (`pytest -k test_permissions_cascade` to be exact):\r\n\r\n```\r\n(Pdb) [p for p in dir(self) if p.startswith('_') and '__' not in p]\r\n['_actor', '_asset_urls', '_connected_databases', '_crumb_items', '_local_metadata', '_metadata', '_metadata_local', '_metadata_recursive_update', '_permission_checks', '_plugins', '_prepare_connection', '_refresh_schemas', '_refresh_schemas_lock', '_register_custom_units', '_register_renderers', '_root_token', '_routes', '_secret', '_settings', '_show_messages', '_startup_hook_calculation', '_startup_hook_fired', '_startup_invoked', '_threads', '_versions', '_write_messages_to_response']\r\n```\r\n", "reactions": {"url": "https://api.github.com/repos/simonw/datasette/issues/1847/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/simonw/datasette/issues/1847/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/simonw/datasette/issues/1831", "repository_url": "https://api.github.com/repos/simonw/datasette", "labels_url": "https://api.github.com/repos/simonw/datasette/issues/1831/labels{/name}", "comments_url": "https://api.github.com/repos/simonw/datasette/issues/1831/comments", "events_url": "https://api.github.com/repos/simonw/datasette/issues/1831/events", "html_url": "https://github.com/simonw/datasette/issues/1831", "id": 1397084281, "node_id": "I_kwDOBm6k_c5TRdB5", "number": 1831, "title": "If user can see table but NOT database/instance nav links should not display", "user": {"login": "simonw", "id": 9599, "node_id": "MDQ6VXNlcjk1OTk=", "avatar_url": "https://avatars.githubusercontent.com/u/9599?v=4", "gravatar_id": "", "url": "https://api.github.com/users/simonw", "html_url": "https://github.com/simonw", "followers_url": "https://api.github.com/users/simonw/followers", "following_url": "https://api.github.com/users/simonw/following{/other_user}", "gists_url": "https://api.github.com/users/simonw/gists{/gist_id}", "starred_url": "https://api.github.com/users/simonw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/simonw/subscriptions", "organizations_url": "https://api.github.com/users/simonw/orgs", "repos_url": "https://api.github.com/users/simonw/repos", "events_url": "https://api.github.com/users/simonw/events{/privacy}", "received_events_url": "https://api.github.com/users/simonw/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 727708732, "node_id": "MDU6TGFiZWw3Mjc3MDg3MzI=", "url": "https://api.github.com/repos/simonw/datasette/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}, {"id": 1913901969, "node_id": "MDU6TGFiZWwxOTEzOTAxOTY5", "url": "https://api.github.com/repos/simonw/datasette/labels/authentication-and-permissions", "name": "authentication-and-permissions", "color": "51e2ff", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 10, "created_at": "2022-10-05T02:16:31Z", "updated_at": "2022-10-13T21:52:04Z", "closed_at": "2022-10-13T21:52:04Z", "author_association": "OWNER", "active_lock_reason": null, "body": "Spotted this bug while building this plugin:\r\n- https://github.com/simonw/datasette-public\r\n\r\nThis is a public table, but the two links in the nav go to forbidden pages:\r\n\r\n<img width=\"1007\" alt=\"image\" src=\"https://user-images.githubusercontent.com/9599/193964983-c574efcd-fd7d-4507-bb71-58fe5252a831.png\">\r\n\r\nThose nav links shouldn't be shown at all.", "reactions": {"url": "https://api.github.com/repos/simonw/datasette/issues/1831/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/simonw/datasette/issues/1831/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/simonw/datasette/issues/1829", "repository_url": "https://api.github.com/repos/simonw/datasette", "labels_url": "https://api.github.com/repos/simonw/datasette/issues/1829/labels{/name}", "comments_url": "https://api.github.com/repos/simonw/datasette/issues/1829/comments", "events_url": "https://api.github.com/repos/simonw/datasette/issues/1829/events", "html_url": "https://github.com/simonw/datasette/issues/1829", "id": 1396948693, "node_id": "I_kwDOBm6k_c5TQ77V", "number": 1829, "title": "Table/database that is private due to inherited permissions does not show padlock", "user": {"login": "simonw", "id": 9599, "node_id": "MDQ6VXNlcjk1OTk=", "avatar_url": "https://avatars.githubusercontent.com/u/9599?v=4", "gravatar_id": "", "url": "https://api.github.com/users/simonw", "html_url": "https://github.com/simonw", "followers_url": "https://api.github.com/users/simonw/followers", "following_url": "https://api.github.com/users/simonw/following{/other_user}", "gists_url": "https://api.github.com/users/simonw/gists{/gist_id}", "starred_url": "https://api.github.com/users/simonw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/simonw/subscriptions", "organizations_url": "https://api.github.com/users/simonw/orgs", "repos_url": "https://api.github.com/users/simonw/repos", "events_url": "https://api.github.com/users/simonw/events{/privacy}", "received_events_url": "https://api.github.com/users/simonw/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 727708732, "node_id": "MDU6TGFiZWw3Mjc3MDg3MzI=", "url": "https://api.github.com/repos/simonw/datasette/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}, {"id": 1379448359, "node_id": "MDU6TGFiZWwxMzc5NDQ4MzU5", "url": "https://api.github.com/repos/simonw/datasette/labels/refactor", "name": "refactor", "color": "bf13bc", "default": false, "description": ""}, {"id": 1913901969, "node_id": "MDU6TGFiZWwxOTEzOTAxOTY5", "url": "https://api.github.com/repos/simonw/datasette/labels/authentication-and-permissions", "name": "authentication-and-permissions", "color": "51e2ff", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 8, "created_at": "2022-10-04T23:14:16Z", "updated_at": "2022-10-24T02:23:46Z", "closed_at": "2022-10-24T02:11:37Z", "author_association": "OWNER", "active_lock_reason": null, "body": "I noticed that a table page that is private because the database or instance is private, e.g. this one:\r\n\r\n<img width=\"982\" alt=\"image\" src=\"https://user-images.githubusercontent.com/9599/193947303-ed643dcd-a07c-4ffb-ab22-539c4c803206.png\">\r\n\r\nIs not displaying the padlock icon that indicates the table is not visible to the public.\r\n\r\n<img width=\"969\" alt=\"image\" src=\"https://user-images.githubusercontent.com/9599/193947373-ddbdf398-ea67-4e21-b54d-60c48496701d.png\">\r\n\r\nSame issue for the database page too, which in this case is private due to `view-instance`.", "reactions": {"url": "https://api.github.com/repos/simonw/datasette/issues/1829/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/simonw/datasette/issues/1829/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/simonw/datasette/issues/1828", "repository_url": "https://api.github.com/repos/simonw/datasette", "labels_url": "https://api.github.com/repos/simonw/datasette/issues/1828/labels{/name}", "comments_url": "https://api.github.com/repos/simonw/datasette/issues/1828/comments", "events_url": "https://api.github.com/repos/simonw/datasette/issues/1828/events", "html_url": "https://github.com/simonw/datasette/issues/1828", "id": 1393903845, "node_id": "I_kwDOBm6k_c5TFUjl", "number": 1828, "title": "word-wrap: anywhere resulting in weird display", "user": {"login": "simonw", "id": 9599, "node_id": "MDQ6VXNlcjk1OTk=", "avatar_url": "https://avatars.githubusercontent.com/u/9599?v=4", "gravatar_id": "", "url": "https://api.github.com/users/simonw", "html_url": "https://github.com/simonw", "followers_url": "https://api.github.com/users/simonw/followers", "following_url": "https://api.github.com/users/simonw/following{/other_user}", "gists_url": "https://api.github.com/users/simonw/gists{/gist_id}", "starred_url": "https://api.github.com/users/simonw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/simonw/subscriptions", "organizations_url": "https://api.github.com/users/simonw/orgs", "repos_url": "https://api.github.com/users/simonw/repos", "events_url": "https://api.github.com/users/simonw/events{/privacy}", "received_events_url": "https://api.github.com/users/simonw/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 727708732, "node_id": "MDU6TGFiZWw3Mjc3MDg3MzI=", "url": "https://api.github.com/repos/simonw/datasette/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}, {"id": 1918831023, "node_id": "MDU6TGFiZWwxOTE4ODMxMDIz", "url": "https://api.github.com/repos/simonw/datasette/labels/css", "name": "css", "color": "7261dd", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2022-10-02T21:25:03Z", "updated_at": "2022-10-02T23:01:17Z", "closed_at": "2022-10-02T23:01:17Z", "author_association": "OWNER", "active_lock_reason": null, "body": "e.g. on https://github-to-sqlite.dogsheep.net/github/commits\r\n\r\n<img width=\"893\" alt=\"image\" src=\"https://user-images.githubusercontent.com/9599/193476890-a96fae4f-4883-4698-816d-90f9cf6efd6c.png\">\r\n\r\nThis is from a change introduced here: https://github.com/simonw/datasette/commit/bf8d84af5422606597be893cedd375020cb2b369 in #1805\r\n\r\nhttps://github.com/simonw/datasette/blob/bf8d84af5422606597be893cedd375020cb2b369/datasette/static/app.css#L447-L450", "reactions": {"url": "https://api.github.com/repos/simonw/datasette/issues/1828/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/simonw/datasette/issues/1828/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/simonw/datasette/issues/1808", "repository_url": "https://api.github.com/repos/simonw/datasette", "labels_url": "https://api.github.com/repos/simonw/datasette/issues/1808/labels{/name}", "comments_url": "https://api.github.com/repos/simonw/datasette/issues/1808/comments", "events_url": "https://api.github.com/repos/simonw/datasette/issues/1808/events", "html_url": "https://github.com/simonw/datasette/issues/1808", "id": 1368030952, "node_id": "I_kwDOBm6k_c5Rin7o", "number": 1808, "title": "Database() constructor currently defaults is_mutable to False", "user": {"login": "simonw", "id": 9599, "node_id": "MDQ6VXNlcjk1OTk=", "avatar_url": "https://avatars.githubusercontent.com/u/9599?v=4", "gravatar_id": "", "url": "https://api.github.com/users/simonw", "html_url": "https://github.com/simonw", "followers_url": "https://api.github.com/users/simonw/followers", "following_url": "https://api.github.com/users/simonw/following{/other_user}", "gists_url": "https://api.github.com/users/simonw/gists{/gist_id}", "starred_url": "https://api.github.com/users/simonw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/simonw/subscriptions", "organizations_url": "https://api.github.com/users/simonw/orgs", "repos_url": "https://api.github.com/users/simonw/repos", "events_url": "https://api.github.com/users/simonw/events{/privacy}", "received_events_url": "https://api.github.com/users/simonw/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 727708732, "node_id": "MDU6TGFiZWw3Mjc3MDg3MzI=", "url": "https://api.github.com/repos/simonw/datasette/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}, {"id": 754269786, "node_id": "MDU6TGFiZWw3NTQyNjk3ODY=", "url": "https://api.github.com/repos/simonw/datasette/labels/plugins", "name": "plugins", "color": "f759cf", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2022-09-09T16:02:41Z", "updated_at": "2022-09-09T16:37:57Z", "closed_at": "2022-09-09T16:19:25Z", "author_association": "OWNER", "active_lock_reason": null, "body": "This is surprising. It caused a bug in `datasette-upload-dbs` because I didn't expect it to do that.\r\n\r\n> I think this is an API design flaw in Datasette itself, but I can fix it here first.\r\n\r\n_Originally posted by @simonw in https://github.com/simonw/datasette-upload-dbs/issues/6#issuecomment-1242150394_\r\n\r\nCode in question: https://github.com/simonw/datasette/blob/bf8d84af5422606597be893cedd375020cb2b369/datasette/database.py#L29-L32", "reactions": {"url": "https://api.github.com/repos/simonw/datasette/issues/1808/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/simonw/datasette/issues/1808/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/simonw/datasette/issues/1802", "repository_url": "https://api.github.com/repos/simonw/datasette", "labels_url": "https://api.github.com/repos/simonw/datasette/issues/1802/labels{/name}", "comments_url": "https://api.github.com/repos/simonw/datasette/issues/1802/comments", "events_url": "https://api.github.com/repos/simonw/datasette/issues/1802/events", "html_url": "https://github.com/simonw/datasette/issues/1802", "id": 1362402998, "node_id": "I_kwDOBm6k_c5RNJ62", "number": 1802, "title": "Tests reliably failing on Python 3.7", "user": {"login": "simonw", "id": 9599, "node_id": "MDQ6VXNlcjk1OTk=", "avatar_url": "https://avatars.githubusercontent.com/u/9599?v=4", "gravatar_id": "", "url": "https://api.github.com/users/simonw", "html_url": "https://github.com/simonw", "followers_url": "https://api.github.com/users/simonw/followers", "following_url": "https://api.github.com/users/simonw/following{/other_user}", "gists_url": "https://api.github.com/users/simonw/gists{/gist_id}", "starred_url": "https://api.github.com/users/simonw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/simonw/subscriptions", "organizations_url": "https://api.github.com/users/simonw/orgs", "repos_url": "https://api.github.com/users/simonw/repos", "events_url": "https://api.github.com/users/simonw/events{/privacy}", "received_events_url": "https://api.github.com/users/simonw/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 727708732, "node_id": "MDU6TGFiZWw3Mjc3MDg3MzI=", "url": "https://api.github.com/repos/simonw/datasette/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}, {"id": 993222446, "node_id": "MDU6TGFiZWw5OTMyMjI0NDY=", "url": "https://api.github.com/repos/simonw/datasette/labels/ci", "name": "ci", "color": "c5daf9", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 15, "created_at": "2022-09-05T19:21:16Z", "updated_at": "2022-09-06T00:40:20Z", "closed_at": "2022-09-06T00:40:20Z", "author_association": "OWNER", "active_lock_reason": null, "body": "<img width=\"819\" alt=\"image\" src=\"https://user-images.githubusercontent.com/9599/188504608-5be0f941-dca2-4f42-83bc-3d04bbad221d.png\">\r\n\r\nhttps://github.com/simonw/datasette/runs/8194907739?check_suite_focus=true\r\n\r\nI thought this might be an intermittent failure but attempts to re-run the tests have not made it pass.\r\n\r\nEnd of that trace is:\r\n\r\n```\r\n/home/runner/work/datasette/datasette/datasette/app.py:234: in __init__\r\n    self._refresh_schemas_lock = asyncio.Lock()\r\n/opt/hostedtoolcache/Python/3.7.13/x64/lib/python3.7/asyncio/locks.py:161: in __init__\r\n    self._loop = events.get_event_loop()\r\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \r\n\r\nself = <asyncio.unix_events._UnixDefaultEventLoopPolicy object at 0x7fb1fc799fd0>\r\n\r\n    def get_event_loop(self):\r\n        \"\"\"Get the event loop for the current context.\r\n    \r\n        Returns an instance of EventLoop or raises an exception.\r\n        \"\"\"\r\n        if (self._local._loop is None and\r\n                not self._local._set_called and\r\n                isinstance(threading.current_thread(), threading._MainThread)):\r\n            self.set_event_loop(self.new_event_loop())\r\n    \r\n        if self._local._loop is None:\r\n            raise RuntimeError('There is no current event loop in thread %r.'\r\n>                              % threading.current_thread().name)\r\nE           RuntimeError: There is no current event loop in thread 'MainThread'.\r\n```", "reactions": {"url": "https://api.github.com/repos/simonw/datasette/issues/1802/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/simonw/datasette/issues/1802/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/simonw/datasette/issues/1798", "repository_url": "https://api.github.com/repos/simonw/datasette", "labels_url": "https://api.github.com/repos/simonw/datasette/issues/1798/labels{/name}", "comments_url": "https://api.github.com/repos/simonw/datasette/issues/1798/comments", "events_url": "https://api.github.com/repos/simonw/datasette/issues/1798/events", "html_url": "https://github.com/simonw/datasette/issues/1798", "id": 1359557737, "node_id": "I_kwDOBm6k_c5RCTRp", "number": 1798, "title": "Parts of YAML file do not work when db name is \"off\"", "user": {"login": "CharlesNepote", "id": 562352, "node_id": "MDQ6VXNlcjU2MjM1Mg==", "avatar_url": "https://avatars.githubusercontent.com/u/562352?v=4", "gravatar_id": "", "url": "https://api.github.com/users/CharlesNepote", "html_url": "https://github.com/CharlesNepote", "followers_url": "https://api.github.com/users/CharlesNepote/followers", "following_url": "https://api.github.com/users/CharlesNepote/following{/other_user}", "gists_url": "https://api.github.com/users/CharlesNepote/gists{/gist_id}", "starred_url": "https://api.github.com/users/CharlesNepote/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/CharlesNepote/subscriptions", "organizations_url": "https://api.github.com/users/CharlesNepote/orgs", "repos_url": "https://api.github.com/users/CharlesNepote/repos", "events_url": "https://api.github.com/users/CharlesNepote/events{/privacy}", "received_events_url": "https://api.github.com/users/CharlesNepote/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 727708732, "node_id": "MDU6TGFiZWw3Mjc3MDg3MzI=", "url": "https://api.github.com/repos/simonw/datasette/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}, {"id": 947465681, "node_id": "MDU6TGFiZWw5NDc0NjU2ODE=", "url": "https://api.github.com/repos/simonw/datasette/labels/metadata", "name": "metadata", "color": "e2c712", "default": false, "description": ""}, {"id": 2577163933, "node_id": "MDU6TGFiZWwyNTc3MTYzOTMz", "url": "https://api.github.com/repos/simonw/datasette/labels/usability", "name": "usability", "color": "4ace7d", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2022-09-01T22:10:57Z", "updated_at": "2022-09-02T00:02:53Z", "closed_at": "2022-09-01T23:56:33Z", "author_association": "NONE", "active_lock_reason": null, "body": "I guess this issue is not very important and probably rare.\r\n\r\nTo reproduce:\r\n* create and populate a db named `off.db`\r\n* in the yaml file, add any kind of information below `databases:\\n   off:`\r\n* the data are not taken into account (because \"off\" is interpreted as \"false\")\r\n\r\nYAML file:\r\n```yaml\r\ntitle: Some title\r\ndescription_html: |-\r\n  <p>This is an experiment.</p>\r\ndatabases:\r\n  off:\r\n    tables:\r\n      products_from_owners:\r\n        title: products_from_owners*\r\n        description_html: |-\r\n          <p>Description</p>\r\n```\r\n\r\nThe result for http://xxxx.xxx/-/metadata gives:\r\n```json\r\n{\r\n    \"title\": \"Some title\",\r\n    \"description_html\": \"<p>This is an experiment.</p>\",\r\n    \"databases\": {\r\n        \"false\": {\r\n            \"tables\": {\r\n                \"products_from_owners\": {\r\n                    \"title\": \"products_from_owners*\",\r\n                    \"description_html\": \"<p>Description</p>\"\r\n                }\r\n            }\r\n        }\r\n    }\r\n}\r\n```\r\n=> see the `\"false\"` instead of `\"off\"`.", "reactions": {"url": "https://api.github.com/repos/simonw/datasette/issues/1798/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/simonw/datasette/issues/1798/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/simonw/datasette/issues/1773", "repository_url": "https://api.github.com/repos/simonw/datasette", "labels_url": "https://api.github.com/repos/simonw/datasette/issues/1773/labels{/name}", "comments_url": "https://api.github.com/repos/simonw/datasette/issues/1773/comments", "events_url": "https://api.github.com/repos/simonw/datasette/issues/1773/events", "html_url": "https://github.com/simonw/datasette/issues/1773", "id": 1318907685, "node_id": "I_kwDOBm6k_c5OnO8l", "number": 1773, "title": "500 error if sorted by a column not in the ?_col= list", "user": {"login": "simonw", "id": 9599, "node_id": "MDQ6VXNlcjk1OTk=", "avatar_url": "https://avatars.githubusercontent.com/u/9599?v=4", "gravatar_id": "", "url": "https://api.github.com/users/simonw", "html_url": "https://github.com/simonw", "followers_url": "https://api.github.com/users/simonw/followers", "following_url": "https://api.github.com/users/simonw/following{/other_user}", "gists_url": "https://api.github.com/users/simonw/gists{/gist_id}", "starred_url": "https://api.github.com/users/simonw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/simonw/subscriptions", "organizations_url": "https://api.github.com/users/simonw/orgs", "repos_url": "https://api.github.com/users/simonw/repos", "events_url": "https://api.github.com/users/simonw/events{/privacy}", "received_events_url": "https://api.github.com/users/simonw/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 727708732, "node_id": "MDU6TGFiZWw3Mjc3MDg3MzI=", "url": "https://api.github.com/repos/simonw/datasette/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/simonw/datasette/milestones/25", "html_url": "https://github.com/simonw/datasette/milestone/25", "labels_url": "https://api.github.com/repos/simonw/datasette/milestones/25/labels", "id": 8303187, "node_id": "MI_kwDOBm6k_c4AfrJT", "number": 25, "title": "Datasette 0.62", "description": "", "creator": {"login": "simonw", "id": 9599, "node_id": "MDQ6VXNlcjk1OTk=", "avatar_url": "https://avatars.githubusercontent.com/u/9599?v=4", "gravatar_id": "", "url": "https://api.github.com/users/simonw", "html_url": "https://github.com/simonw", "followers_url": "https://api.github.com/users/simonw/followers", "following_url": "https://api.github.com/users/simonw/following{/other_user}", "gists_url": "https://api.github.com/users/simonw/gists{/gist_id}", "starred_url": "https://api.github.com/users/simonw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/simonw/subscriptions", "organizations_url": "https://api.github.com/users/simonw/orgs", "repos_url": "https://api.github.com/users/simonw/repos", "events_url": "https://api.github.com/users/simonw/events{/privacy}", "received_events_url": "https://api.github.com/users/simonw/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 8, "state": "closed", "created_at": "2022-08-14T05:11:39Z", "updated_at": "2022-11-14T06:01:19Z", "due_on": null, "closed_at": "2022-08-14T18:03:28Z"}, "comments": 4, "created_at": "2022-07-27T01:20:27Z", "updated_at": "2022-08-14T16:06:25Z", "closed_at": "2022-08-14T15:44:05Z", "author_association": "OWNER", "active_lock_reason": null, "body": "For example: https://latest.datasette.io/fixtures/sortable?_sort_desc=sortable&_col=sortable_with_nulls\r\n\r\nThat's `?_sort_desc=sortable&_col=sortable_with_nulls`\r\n\r\n<img width=\"494\" alt=\"image\" src=\"https://user-images.githubusercontent.com/9599/181139719-06e3bf66-3fde-4f9a-bfd1-62b326121601.png\">\r\n", "reactions": {"url": "https://api.github.com/repos/simonw/datasette/issues/1773/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/simonw/datasette/issues/1773/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/simonw/datasette/issues/1771", "repository_url": "https://api.github.com/repos/simonw/datasette", "labels_url": "https://api.github.com/repos/simonw/datasette/issues/1771/labels{/name}", "comments_url": "https://api.github.com/repos/simonw/datasette/issues/1771/comments", "events_url": "https://api.github.com/repos/simonw/datasette/issues/1771/events", "html_url": "https://github.com/simonw/datasette/issues/1771", "id": 1306984363, "node_id": "I_kwDOBm6k_c5N5v-r", "number": 1771, "title": "minor a11y: <select> has no visual indicator when tabbed to", "user": {"login": "mustafa0x", "id": 1473102, "node_id": "MDQ6VXNlcjE0NzMxMDI=", "avatar_url": "https://avatars.githubusercontent.com/u/1473102?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mustafa0x", "html_url": "https://github.com/mustafa0x", "followers_url": "https://api.github.com/users/mustafa0x/followers", "following_url": "https://api.github.com/users/mustafa0x/following{/other_user}", "gists_url": "https://api.github.com/users/mustafa0x/gists{/gist_id}", "starred_url": "https://api.github.com/users/mustafa0x/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mustafa0x/subscriptions", "organizations_url": "https://api.github.com/users/mustafa0x/orgs", "repos_url": "https://api.github.com/users/mustafa0x/repos", "events_url": "https://api.github.com/users/mustafa0x/events{/privacy}", "received_events_url": "https://api.github.com/users/mustafa0x/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 727708732, "node_id": "MDU6TGFiZWw3Mjc3MDg3MzI=", "url": "https://api.github.com/repos/simonw/datasette/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}, {"id": 1918831023, "node_id": "MDU6TGFiZWwxOTE4ODMxMDIz", "url": "https://api.github.com/repos/simonw/datasette/labels/css", "name": "css", "color": "7261dd", "default": false, "description": ""}, {"id": 2389750367, "node_id": "MDU6TGFiZWwyMzg5NzUwMzY3", "url": "https://api.github.com/repos/simonw/datasette/labels/accessibility", "name": "accessibility", "color": "fcecc4", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2022-07-17T04:30:14Z", "updated_at": "2022-12-18T06:34:20Z", "closed_at": "2022-12-18T06:28:12Z", "author_association": "NONE", "active_lock_reason": null, "body": null, "reactions": {"url": "https://api.github.com/repos/simonw/datasette/issues/1771/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/simonw/datasette/issues/1771/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/simonw/datasette/issues/1738", "repository_url": "https://api.github.com/repos/simonw/datasette", "labels_url": "https://api.github.com/repos/simonw/datasette/issues/1738/labels{/name}", "comments_url": "https://api.github.com/repos/simonw/datasette/issues/1738/comments", "events_url": "https://api.github.com/repos/simonw/datasette/issues/1738/events", "html_url": "https://github.com/simonw/datasette/issues/1738", "id": 1223527226, "node_id": "I_kwDOBm6k_c5I7Ys6", "number": 1738, "title": "\"Cannot use _sort and _sort_desc at the same time\"", "user": {"login": "simonw", "id": 9599, "node_id": "MDQ6VXNlcjk1OTk=", "avatar_url": "https://avatars.githubusercontent.com/u/9599?v=4", "gravatar_id": "", "url": "https://api.github.com/users/simonw", "html_url": "https://github.com/simonw", "followers_url": "https://api.github.com/users/simonw/followers", "following_url": "https://api.github.com/users/simonw/following{/other_user}", "gists_url": "https://api.github.com/users/simonw/gists{/gist_id}", "starred_url": "https://api.github.com/users/simonw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/simonw/subscriptions", "organizations_url": "https://api.github.com/users/simonw/orgs", "repos_url": "https://api.github.com/users/simonw/repos", "events_url": "https://api.github.com/users/simonw/events{/privacy}", "received_events_url": "https://api.github.com/users/simonw/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 727708732, "node_id": "MDU6TGFiZWw3Mjc3MDg3MzI=", "url": "https://api.github.com/repos/simonw/datasette/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/simonw/datasette/milestones/25", "html_url": "https://github.com/simonw/datasette/milestone/25", "labels_url": "https://api.github.com/repos/simonw/datasette/milestones/25/labels", "id": 8303187, "node_id": "MI_kwDOBm6k_c4AfrJT", "number": 25, "title": "Datasette 0.62", "description": "", "creator": {"login": "simonw", "id": 9599, "node_id": "MDQ6VXNlcjk1OTk=", "avatar_url": "https://avatars.githubusercontent.com/u/9599?v=4", "gravatar_id": "", "url": "https://api.github.com/users/simonw", "html_url": "https://github.com/simonw", "followers_url": "https://api.github.com/users/simonw/followers", "following_url": "https://api.github.com/users/simonw/following{/other_user}", "gists_url": "https://api.github.com/users/simonw/gists{/gist_id}", "starred_url": "https://api.github.com/users/simonw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/simonw/subscriptions", "organizations_url": "https://api.github.com/users/simonw/orgs", "repos_url": "https://api.github.com/users/simonw/repos", "events_url": "https://api.github.com/users/simonw/events{/privacy}", "received_events_url": "https://api.github.com/users/simonw/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 8, "state": "closed", "created_at": "2022-08-14T05:11:39Z", "updated_at": "2022-11-14T06:01:19Z", "due_on": null, "closed_at": "2022-08-14T18:03:28Z"}, "comments": 2, "created_at": "2022-05-03T01:06:24Z", "updated_at": "2022-08-14T16:13:55Z", "closed_at": "2022-08-14T16:13:55Z", "author_association": "OWNER", "active_lock_reason": null, "body": "Triggered this error while playing with the sort desc checkbox and the apply button that are only visible on this page at mobile screen width:\r\n\r\nhttps://latest.datasette.io/fixtures/compound_three_primary_keys?_sort_desc=pk1\r\n\r\nNavigate to that page (with the browser narrow enough to show the box), un-check the box and click Apply:\r\n\r\n![sort-bug](https://user-images.githubusercontent.com/9599/166390804-cb289b29-63dc-4986-b7f9-81cf2ae04914.gif)\r\n\r\nAlso notable: I managed to get to a page with `?_sort_desk=pk1` in the URL three times by clicking around with that button.", "reactions": {"url": "https://api.github.com/repos/simonw/datasette/issues/1738/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/simonw/datasette/issues/1738/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/simonw/datasette/issues/1728", "repository_url": "https://api.github.com/repos/simonw/datasette", "labels_url": "https://api.github.com/repos/simonw/datasette/issues/1728/labels{/name}", "comments_url": "https://api.github.com/repos/simonw/datasette/issues/1728/comments", "events_url": "https://api.github.com/repos/simonw/datasette/issues/1728/events", "html_url": "https://github.com/simonw/datasette/issues/1728", "id": 1218133366, "node_id": "I_kwDOBm6k_c5Imz12", "number": 1728, "title": "Writable canned queries fail with useless non-error against immutable databases", "user": {"login": "wragge", "id": 127565, "node_id": "MDQ6VXNlcjEyNzU2NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/127565?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wragge", "html_url": "https://github.com/wragge", "followers_url": "https://api.github.com/users/wragge/followers", "following_url": "https://api.github.com/users/wragge/following{/other_user}", "gists_url": "https://api.github.com/users/wragge/gists{/gist_id}", "starred_url": "https://api.github.com/users/wragge/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wragge/subscriptions", "organizations_url": "https://api.github.com/users/wragge/orgs", "repos_url": "https://api.github.com/users/wragge/repos", "events_url": "https://api.github.com/users/wragge/events{/privacy}", "received_events_url": "https://api.github.com/users/wragge/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 727708732, "node_id": "MDU6TGFiZWw3Mjc3MDg3MzI=", "url": "https://api.github.com/repos/simonw/datasette/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/simonw/datasette/milestones/25", "html_url": "https://github.com/simonw/datasette/milestone/25", "labels_url": "https://api.github.com/repos/simonw/datasette/milestones/25/labels", "id": 8303187, "node_id": "MI_kwDOBm6k_c4AfrJT", "number": 25, "title": "Datasette 0.62", "description": "", "creator": {"login": "simonw", "id": 9599, "node_id": "MDQ6VXNlcjk1OTk=", "avatar_url": "https://avatars.githubusercontent.com/u/9599?v=4", "gravatar_id": "", "url": "https://api.github.com/users/simonw", "html_url": "https://github.com/simonw", "followers_url": "https://api.github.com/users/simonw/followers", "following_url": "https://api.github.com/users/simonw/following{/other_user}", "gists_url": "https://api.github.com/users/simonw/gists{/gist_id}", "starred_url": "https://api.github.com/users/simonw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/simonw/subscriptions", "organizations_url": "https://api.github.com/users/simonw/orgs", "repos_url": "https://api.github.com/users/simonw/repos", "events_url": "https://api.github.com/users/simonw/events{/privacy}", "received_events_url": "https://api.github.com/users/simonw/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 8, "state": "closed", "created_at": "2022-08-14T05:11:39Z", "updated_at": "2022-11-14T06:01:19Z", "due_on": null, "closed_at": "2022-08-14T18:03:28Z"}, "comments": 13, "created_at": "2022-04-28T03:10:34Z", "updated_at": "2022-08-14T16:34:40Z", "closed_at": "2022-08-14T16:34:40Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "I've been banging my head against a wall for a while and would appreciate any pointers...\r\n\r\n- I have a writeable canned query to update rows in the db. \r\n- I'm using the github-oauth plugin for authentication. \r\n- I have `allow` set on the query to accept my GitHub id and a GH organisation. \r\n- Authentication seems to work as expected both locally and on Cloudrun -- viewing `/-/actor` gives the same result in both environments\r\n- I can access the 'padlocked' canned query in both environments.\r\n\r\nEverything seems to be the same, but the canned query works perfectly when run locally, and fails when I try it on Cloudrun. I'm redirected back to the canned query page and the db is not changed. There's nothing in the Cloudstor logs to indicate an error.\r\n\r\nAny clues as to where I should be looking for the problem?", "reactions": {"url": "https://api.github.com/repos/simonw/datasette/issues/1728/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/simonw/datasette/issues/1728/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/simonw/datasette/issues/1724", "repository_url": "https://api.github.com/repos/simonw/datasette", "labels_url": "https://api.github.com/repos/simonw/datasette/issues/1724/labels{/name}", "comments_url": "https://api.github.com/repos/simonw/datasette/issues/1724/comments", "events_url": "https://api.github.com/repos/simonw/datasette/issues/1724/events", "html_url": "https://github.com/simonw/datasette/issues/1724", "id": 1216619276, "node_id": "I_kwDOBm6k_c5IhCMM", "number": 1724, "title": "?_trace=1 doesn't work on Global Power Plants demo", "user": {"login": "simonw", "id": 9599, "node_id": "MDQ6VXNlcjk1OTk=", "avatar_url": "https://avatars.githubusercontent.com/u/9599?v=4", "gravatar_id": "", "url": "https://api.github.com/users/simonw", "html_url": "https://github.com/simonw", "followers_url": "https://api.github.com/users/simonw/followers", "following_url": "https://api.github.com/users/simonw/following{/other_user}", "gists_url": "https://api.github.com/users/simonw/gists{/gist_id}", "starred_url": "https://api.github.com/users/simonw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/simonw/subscriptions", "organizations_url": "https://api.github.com/users/simonw/orgs", "repos_url": "https://api.github.com/users/simonw/repos", "events_url": "https://api.github.com/users/simonw/events{/privacy}", "received_events_url": "https://api.github.com/users/simonw/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 727708732, "node_id": "MDU6TGFiZWw3Mjc3MDg3MzI=", "url": "https://api.github.com/repos/simonw/datasette/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2022-04-27T00:15:02Z", "updated_at": "2022-04-27T06:15:14Z", "closed_at": "2022-04-27T00:18:30Z", "author_association": "OWNER", "active_lock_reason": null, "body": "https://global-power-plants.datasettes.com/global-power-plants/global-power-plants?_trace=1 is not showing the trace JSON at the bottom of the page.\r\n\r\nConfirmed that `trace_debug` is `true` on https://global-power-plants.datasettes.com/-/settings\r\n\r\nPossibly related:\r\n\r\n- https://github.com/simonw/datasette-total-page-time/issues/1", "reactions": {"url": "https://api.github.com/repos/simonw/datasette/issues/1724/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/simonw/datasette/issues/1724/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/simonw/datasette/issues/1691", "repository_url": "https://api.github.com/repos/simonw/datasette", "labels_url": "https://api.github.com/repos/simonw/datasette/issues/1691/labels{/name}", "comments_url": "https://api.github.com/repos/simonw/datasette/issues/1691/comments", "events_url": "https://api.github.com/repos/simonw/datasette/issues/1691/events", "html_url": "https://github.com/simonw/datasette/issues/1691", "id": 1182143895, "node_id": "I_kwDOBm6k_c5GdhWX", "number": 1691, "title": "Bug in pytest-httpx example", "user": {"login": "simonw", "id": 9599, "node_id": "MDQ6VXNlcjk1OTk=", "avatar_url": "https://avatars.githubusercontent.com/u/9599?v=4", "gravatar_id": "", "url": "https://api.github.com/users/simonw", "html_url": "https://github.com/simonw", "followers_url": "https://api.github.com/users/simonw/followers", "following_url": "https://api.github.com/users/simonw/following{/other_user}", "gists_url": "https://api.github.com/users/simonw/gists{/gist_id}", "starred_url": "https://api.github.com/users/simonw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/simonw/subscriptions", "organizations_url": "https://api.github.com/users/simonw/orgs", "repos_url": "https://api.github.com/users/simonw/repos", "events_url": "https://api.github.com/users/simonw/events{/privacy}", "received_events_url": "https://api.github.com/users/simonw/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 727708732, "node_id": "MDU6TGFiZWw3Mjc3MDg3MzI=", "url": "https://api.github.com/repos/simonw/datasette/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}, {"id": 750789605, "node_id": "MDU6TGFiZWw3NTA3ODk2MDU=", "url": "https://api.github.com/repos/simonw/datasette/labels/documentation", "name": "documentation", "color": "fc8b0a", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2022-03-26T22:45:30Z", "updated_at": "2022-03-26T22:46:09Z", "closed_at": "2022-03-26T22:46:09Z", "author_association": "OWNER", "active_lock_reason": null, "body": "https://docs.datasette.io/en/0.61.1/testing_plugins.html#testing-outbound-http-calls-with-pytest-httpx says:\r\n\r\n```python\r\nasync def test_outbound_http_call(httpx_mock):\r\n    httpx_mock.add_response(\r\n        url='https://www.example.com/',\r\n        data='Hello world',\r\n    )\r\n```\r\nThat's wrong - `data=` should be `text=`.\r\n\r\nhttps://github.com/Colin-b/pytest_httpx/blob/v0.20.0/README.md#reply-with-custom-body", "reactions": {"url": "https://api.github.com/repos/simonw/datasette/issues/1691/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/simonw/datasette/issues/1691/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/simonw/datasette/issues/1689", "repository_url": "https://api.github.com/repos/simonw/datasette", "labels_url": "https://api.github.com/repos/simonw/datasette/issues/1689/labels{/name}", "comments_url": "https://api.github.com/repos/simonw/datasette/issues/1689/comments", "events_url": "https://api.github.com/repos/simonw/datasette/issues/1689/events", "html_url": "https://github.com/simonw/datasette/issues/1689", "id": 1182065616, "node_id": "I_kwDOBm6k_c5GdOPQ", "number": 1689, "title": "datasette.add_message() documentation is incorrect", "user": {"login": "simonw", "id": 9599, "node_id": "MDQ6VXNlcjk1OTk=", "avatar_url": "https://avatars.githubusercontent.com/u/9599?v=4", "gravatar_id": "", "url": "https://api.github.com/users/simonw", "html_url": "https://github.com/simonw", "followers_url": "https://api.github.com/users/simonw/followers", "following_url": "https://api.github.com/users/simonw/following{/other_user}", "gists_url": "https://api.github.com/users/simonw/gists{/gist_id}", "starred_url": "https://api.github.com/users/simonw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/simonw/subscriptions", "organizations_url": "https://api.github.com/users/simonw/orgs", "repos_url": "https://api.github.com/users/simonw/repos", "events_url": "https://api.github.com/users/simonw/events{/privacy}", "received_events_url": "https://api.github.com/users/simonw/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 727708732, "node_id": "MDU6TGFiZWw3Mjc3MDg3MzI=", "url": "https://api.github.com/repos/simonw/datasette/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}, {"id": 750789605, "node_id": "MDU6TGFiZWw3NTA3ODk2MDU=", "url": "https://api.github.com/repos/simonw/datasette/labels/documentation", "name": "documentation", "color": "fc8b0a", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2022-03-26T20:49:42Z", "updated_at": "2022-03-26T21:35:57Z", "closed_at": "2022-03-26T20:51:21Z", "author_association": "OWNER", "active_lock_reason": null, "body": "https://docs.datasette.io/en/0.61.1/internals.html#add-message-request-message-message-type-datasette-info says:\r\n\r\n`.add_message(request, message, message_type=datasette.INFO)`\r\n\r\nBut in the code it's:\r\n\r\nhttps://github.com/simonw/datasette/blob/6b99e4a66ba0ed8fca8ee41ceb7206928b60d5d1/datasette/app.py#L582", "reactions": {"url": "https://api.github.com/repos/simonw/datasette/issues/1689/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/simonw/datasette/issues/1689/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/simonw/datasette/issues/1683", "repository_url": "https://api.github.com/repos/simonw/datasette", "labels_url": "https://api.github.com/repos/simonw/datasette/issues/1683/labels{/name}", "comments_url": "https://api.github.com/repos/simonw/datasette/issues/1683/comments", "events_url": "https://api.github.com/repos/simonw/datasette/issues/1683/events", "html_url": "https://github.com/simonw/datasette/issues/1683", "id": 1179928510, "node_id": "I_kwDOBm6k_c5GVEe-", "number": 1683, "title": "allow_facet: False should be respected by column cog menu", "user": {"login": "simonw", "id": 9599, "node_id": "MDQ6VXNlcjk1OTk=", "avatar_url": "https://avatars.githubusercontent.com/u/9599?v=4", "gravatar_id": "", "url": "https://api.github.com/users/simonw", "html_url": "https://github.com/simonw", "followers_url": "https://api.github.com/users/simonw/followers", "following_url": "https://api.github.com/users/simonw/following{/other_user}", "gists_url": "https://api.github.com/users/simonw/gists{/gist_id}", "starred_url": "https://api.github.com/users/simonw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/simonw/subscriptions", "organizations_url": "https://api.github.com/users/simonw/orgs", "repos_url": "https://api.github.com/users/simonw/repos", "events_url": "https://api.github.com/users/simonw/events{/privacy}", "received_events_url": "https://api.github.com/users/simonw/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 727708732, "node_id": "MDU6TGFiZWw3Mjc3MDg3MzI=", "url": "https://api.github.com/repos/simonw/datasette/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}, {"id": 1382668283, "node_id": "MDU6TGFiZWwxMzgyNjY4Mjgz", "url": "https://api.github.com/repos/simonw/datasette/labels/faceting", "name": "faceting", "color": "71dd93", "default": false, "description": ""}, {"id": 2577163933, "node_id": "MDU6TGFiZWwyNTc3MTYzOTMz", "url": "https://api.github.com/repos/simonw/datasette/labels/usability", "name": "usability", "color": "4ace7d", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2022-03-24T19:05:06Z", "updated_at": "2022-03-24T19:16:36Z", "closed_at": "2022-03-24T19:16:36Z", "author_association": "OWNER", "active_lock_reason": null, "body": "The column cog menu currently shows \"Facet by this\" even if faceting is disabled for the Datasette instance.", "reactions": {"url": "https://api.github.com/repos/simonw/datasette/issues/1683/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/simonw/datasette/issues/1683/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/simonw/datasette/issues/1682", "repository_url": "https://api.github.com/repos/simonw/datasette", "labels_url": "https://api.github.com/repos/simonw/datasette/issues/1682/labels{/name}", "comments_url": "https://api.github.com/repos/simonw/datasette/issues/1682/comments", "events_url": "https://api.github.com/repos/simonw/datasette/issues/1682/events", "html_url": "https://github.com/simonw/datasette/issues/1682", "id": 1178521513, "node_id": "I_kwDOBm6k_c5GPs-p", "number": 1682, "title": "SQL queries against databases with different routes are broken", "user": {"login": "simonw", "id": 9599, "node_id": "MDQ6VXNlcjk1OTk=", "avatar_url": "https://avatars.githubusercontent.com/u/9599?v=4", "gravatar_id": "", "url": "https://api.github.com/users/simonw", "html_url": "https://github.com/simonw", "followers_url": "https://api.github.com/users/simonw/followers", "following_url": "https://api.github.com/users/simonw/following{/other_user}", "gists_url": "https://api.github.com/users/simonw/gists{/gist_id}", "starred_url": "https://api.github.com/users/simonw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/simonw/subscriptions", "organizations_url": "https://api.github.com/users/simonw/orgs", "repos_url": "https://api.github.com/users/simonw/repos", "events_url": "https://api.github.com/users/simonw/events{/privacy}", "received_events_url": "https://api.github.com/users/simonw/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 727708732, "node_id": "MDU6TGFiZWw3Mjc3MDg3MzI=", "url": "https://api.github.com/repos/simonw/datasette/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2022-03-23T18:42:57Z", "updated_at": "2022-03-23T18:48:16Z", "closed_at": "2022-03-23T18:48:16Z", "author_association": "OWNER", "active_lock_reason": null, "body": "500 error on https://datasette-hashed-urls-preview.vercel.app/fixtures-09f8f95?sql=select+*+from+facetable\r\n\r\nHere's the trace:\r\n```\r\n  File \"/Users/simon/.local/share/virtualenvs/datasette-hashed-urls-ssI2fO50/lib/python3.10/site-packages/datasette/views/database.py\", line 54, in data\r\n    return await QueryView(self.ds).data(\r\n  File \"/Users/simon/.local/share/virtualenvs/datasette-hashed-urls-ssI2fO50/lib/python3.10/site-packages/datasette/views/database.py\", line 232, in data\r\n    self.ds.get_database(database), sql\r\n  File \"/Users/simon/.local/share/virtualenvs/datasette-hashed-urls-ssI2fO50/lib/python3.10/site-packages/datasette/app.py\", line 401, in get_database\r\n    return self.databases[name]\r\nKeyError: 'fixtures-aa7318b'\r\n```\r\nIt looks like this is a Datasette bug, which is frustrating because I just shipped Datasette 0.61 five minutes ago!\r\n\r\n_Originally posted by @simonw in https://github.com/simonw/datasette-hashed-urls/issues/13#issuecomment-1076693667_", "reactions": {"url": "https://api.github.com/repos/simonw/datasette/issues/1682/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/simonw/datasette/issues/1682/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/simonw/datasette/issues/1647", "repository_url": "https://api.github.com/repos/simonw/datasette", "labels_url": "https://api.github.com/repos/simonw/datasette/issues/1647/labels{/name}", "comments_url": "https://api.github.com/repos/simonw/datasette/issues/1647/comments", "events_url": "https://api.github.com/repos/simonw/datasette/issues/1647/events", "html_url": "https://github.com/simonw/datasette/issues/1647", "id": 1160407071, "node_id": "I_kwDOBm6k_c5FKmgf", "number": 1647, "title": "Test failures with SQLite 3.37.0+ due to column affinity case", "user": {"login": "simonw", "id": 9599, "node_id": "MDQ6VXNlcjk1OTk=", "avatar_url": "https://avatars.githubusercontent.com/u/9599?v=4", "gravatar_id": "", "url": "https://api.github.com/users/simonw", "html_url": "https://github.com/simonw", "followers_url": "https://api.github.com/users/simonw/followers", "following_url": "https://api.github.com/users/simonw/following{/other_user}", "gists_url": "https://api.github.com/users/simonw/gists{/gist_id}", "starred_url": "https://api.github.com/users/simonw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/simonw/subscriptions", "organizations_url": "https://api.github.com/users/simonw/orgs", "repos_url": "https://api.github.com/users/simonw/repos", "events_url": "https://api.github.com/users/simonw/events{/privacy}", "received_events_url": "https://api.github.com/users/simonw/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 727708732, "node_id": "MDU6TGFiZWw3Mjc3MDg3MzI=", "url": "https://api.github.com/repos/simonw/datasette/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}, {"id": 993222446, "node_id": "MDU6TGFiZWw5OTMyMjI0NDY=", "url": "https://api.github.com/repos/simonw/datasette/labels/ci", "name": "ci", "color": "c5daf9", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2022-03-05T17:37:46Z", "updated_at": "2022-03-05T19:56:28Z", "closed_at": "2022-03-05T19:47:04Z", "author_association": "OWNER", "active_lock_reason": null, "body": "These three tests are failing on my local machine:\r\n```\r\nFAILED tests/test_internals_database.py::test_table_column_details[facetable-expected0] - AssertionError: assert [Column(cid=0, name='pk', type='INTEGER', no...\r\nFAILED tests/test_internals_database.py::test_table_column_details[sortable-expected1] - AssertionError: assert [Column(cid=0, name='pk1', type='varchar(30)'...\r\nFAILED tests/test_table_html.py::test_sort_links - AssertionError: assert [{'a_href': None,\\n  'attrs': {'class': ['col-Link'],\\n            'data-column': '...\r\n```\r\nI ran `pytest --lf -vv` and the output had things like this in it:\r\n```\r\nE         -  Column(cid=1, name='created', type='text', notnull=0, default_value=None, is_pk=0, hidden=0),\r\nE         ?                                      ^^^^\r\nE         +  Column(cid=1, name='created', type='TEXT', notnull=0, default_value=None, is_pk=0, hidden=0),\r\n...\r\nE            {'a_href': '/fixtures/sortable?_sort=sortable_with_nulls_2',\r\nE             'attrs': {'class': ['col-sortable_with_nulls_2'],\r\nE                       'data-column': 'sortable_with_nulls_2',\r\nE                       'data-column-not-null': '0',\r\nE         -             'data-column-type': 'real',\r\nE         ?                                  ^^^^\r\nE         +             'data-column-type': 'REAL',\r\nE         ?                                  ^^^^\r\n```\r\nSomething is causing column types to come back in uppercase where previously they were lowercase.", "reactions": {"url": "https://api.github.com/repos/simonw/datasette/issues/1647/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/simonw/datasette/issues/1647/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/simonw/datasette/issues/1642", "repository_url": "https://api.github.com/repos/simonw/datasette", "labels_url": "https://api.github.com/repos/simonw/datasette/issues/1642/labels{/name}", "comments_url": "https://api.github.com/repos/simonw/datasette/issues/1642/comments", "events_url": "https://api.github.com/repos/simonw/datasette/issues/1642/events", "html_url": "https://github.com/simonw/datasette/issues/1642", "id": 1152072027, "node_id": "I_kwDOBm6k_c5Eqzlb", "number": 1642, "title": "Dependency issue with asgiref and uvicorn", "user": {"login": "simonw", "id": 9599, "node_id": "MDQ6VXNlcjk1OTk=", "avatar_url": "https://avatars.githubusercontent.com/u/9599?v=4", "gravatar_id": "", "url": "https://api.github.com/users/simonw", "html_url": "https://github.com/simonw", "followers_url": "https://api.github.com/users/simonw/followers", "following_url": "https://api.github.com/users/simonw/following{/other_user}", "gists_url": "https://api.github.com/users/simonw/gists{/gist_id}", "starred_url": "https://api.github.com/users/simonw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/simonw/subscriptions", "organizations_url": "https://api.github.com/users/simonw/orgs", "repos_url": "https://api.github.com/users/simonw/repos", "events_url": "https://api.github.com/users/simonw/events{/privacy}", "received_events_url": "https://api.github.com/users/simonw/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 727708732, "node_id": "MDU6TGFiZWw3Mjc3MDg3MzI=", "url": "https://api.github.com/repos/simonw/datasette/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}, {"id": 727708739, "node_id": "MDU6TGFiZWw3Mjc3MDg3Mzk=", "url": "https://api.github.com/repos/simonw/datasette/labels/wontfix", "name": "wontfix", "color": "ffffff", "default": true, "description": null}, {"id": 1970143153, "node_id": "MDU6TGFiZWwxOTcwMTQzMTUz", "url": "https://api.github.com/repos/simonw/datasette/labels/dependencies", "name": "dependencies", "color": "0366d6", "default": false, "description": "Pull requests that update a dependency file"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2022-02-26T18:00:35Z", "updated_at": "2022-03-05T01:11:27Z", "closed_at": "2022-03-05T01:11:17Z", "author_association": "OWNER", "active_lock_reason": null, "body": "```\r\nERROR: After October 2020 you may experience errors when installing or updating packages. This is because pip will change the way that it resolves dependency conflicts.\r\n\r\nWe recommend you use --use-feature=2020-resolver to test your packages with the new resolver before it becomes the default.\r\n\r\ndatasette 0.60.2 requires asgiref<3.5.0,>=3.2.10, but you'll have asgiref 3.5.0 which is incompatible.\r\n```\r\nThat's after I forced an upgrade of `uvicorn` due to this warning:\r\n```\r\nERROR: After October 2020 you may experience errors when installing or updating packages. This is because pip will change the way that it resolves dependency conflicts.\r\n\r\nWe recommend you use --use-feature=2020-resolver to test your packages with the new resolver before it becomes the default.\r\n\r\nuvicorn 0.13.1 requires click==7.*, but you'll have click 8.0.4 which is incompatible.\r\n```", "reactions": {"url": "https://api.github.com/repos/simonw/datasette/issues/1642/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/simonw/datasette/issues/1642/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/simonw/datasette/issues/1632", "repository_url": "https://api.github.com/repos/simonw/datasette", "labels_url": "https://api.github.com/repos/simonw/datasette/issues/1632/labels{/name}", "comments_url": "https://api.github.com/repos/simonw/datasette/issues/1632/comments", "events_url": "https://api.github.com/repos/simonw/datasette/issues/1632/events", "html_url": "https://github.com/simonw/datasette/issues/1632", "id": 1126604194, "node_id": "I_kwDOBm6k_c5DJp2i", "number": 1632, "title": "datasette one.db one.db opens database twice, as one and one_2", "user": {"login": "simonw", "id": 9599, "node_id": "MDQ6VXNlcjk1OTk=", "avatar_url": "https://avatars.githubusercontent.com/u/9599?v=4", "gravatar_id": "", "url": "https://api.github.com/users/simonw", "html_url": "https://github.com/simonw", "followers_url": "https://api.github.com/users/simonw/followers", "following_url": "https://api.github.com/users/simonw/following{/other_user}", "gists_url": "https://api.github.com/users/simonw/gists{/gist_id}", "starred_url": "https://api.github.com/users/simonw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/simonw/subscriptions", "organizations_url": "https://api.github.com/users/simonw/orgs", "repos_url": "https://api.github.com/users/simonw/repos", "events_url": "https://api.github.com/users/simonw/events{/privacy}", "received_events_url": "https://api.github.com/users/simonw/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 727708732, "node_id": "MDU6TGFiZWw3Mjc3MDg3MzI=", "url": "https://api.github.com/repos/simonw/datasette/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/simonw/datasette/milestones/7", "html_url": "https://github.com/simonw/datasette/milestone/7", "labels_url": "https://api.github.com/repos/simonw/datasette/milestones/7/labels", "id": 3268330, "node_id": "MDk6TWlsZXN0b25lMzI2ODMzMA==", "number": 7, "title": "Datasette 1.0", "description": "https://github.com/simonw/datasette/issues/519 - stable JSON API, documented template context, plugin API guarantee that plugins will not break until a 2.0 release.", "creator": {"login": "simonw", "id": 9599, "node_id": "MDQ6VXNlcjk1OTk=", "avatar_url": "https://avatars.githubusercontent.com/u/9599?v=4", "gravatar_id": "", "url": "https://api.github.com/users/simonw", "html_url": "https://github.com/simonw", "followers_url": "https://api.github.com/users/simonw/followers", "following_url": "https://api.github.com/users/simonw/following{/other_user}", "gists_url": "https://api.github.com/users/simonw/gists{/gist_id}", "starred_url": "https://api.github.com/users/simonw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/simonw/subscriptions", "organizations_url": "https://api.github.com/users/simonw/orgs", "repos_url": "https://api.github.com/users/simonw/repos", "events_url": "https://api.github.com/users/simonw/events{/privacy}", "received_events_url": "https://api.github.com/users/simonw/received_events", "type": "User", "site_admin": false}, "open_issues": 52, "closed_issues": 58, "state": "open", "created_at": "2018-04-15T21:11:18Z", "updated_at": "2023-03-31T17:56:10Z", "due_on": null, "closed_at": null}, "comments": 6, "created_at": "2022-02-07T23:14:47Z", "updated_at": "2022-03-19T04:04:49Z", "closed_at": "2022-02-07T23:50:01Z", "author_association": "OWNER", "active_lock_reason": null, "body": "> ```\r\n> % mkdir /tmp/data\r\n> % cp ~/Dropbox/Development/datasette/fixtures.db /tmp/data \r\n> % datasette /tmp/data/*.db /tmp/data/created.db --create -p 8852\r\n> ...\r\n> INFO:     Uvicorn running on http://127.0.0.1:8852 (Press CTRL+C to quit)\r\n> ^CINFO:     Shutting down\r\n> % datasette /tmp/data/*.db /tmp/data/created.db --create -p 8852\r\n> ...\r\n> INFO:     127.0.0.1:49533 - \"GET / HTTP/1.1\" 200 OK\r\n> ```\r\n> The first time I ran Datasette I got two databases - `fixtures` and `created`\r\n> \r\n> BUT... when I ran Datasette the second time it looked like this:\r\n> \r\n> <img width=\"697\" alt=\"image\" src=\"https://user-images.githubusercontent.com/9599/152887735-5e2b4f21-001d-4e7a-a23a-16a32fdcf554.png\">\r\n> \r\n> This is the same result you get if you run:\r\n> \r\n>     datasette /tmp/data/fixtures.db /tmp/data/created.db /tmp/data/created.db\r\n> \r\n> This is caused by this Datasette issue:\r\n> - https://github.com/simonw/datasette/issues/509\r\n> \r\n> So... either I teach Datasette to de-duplicate multiple identical file paths passed to the command, or I can't use `/data/*.db` in the `Dockerfile` here and I need to go back to other solutions for the challenge described in this comment: https://github.com/simonw/datasette-publish-fly/pull/12#issuecomment-1031971831\r\n\r\n_Originally posted by @simonw in https://github.com/simonw/datasette-publish-fly/pull/12#issuecomment-1032029874_", "reactions": {"url": "https://api.github.com/repos/simonw/datasette/issues/1632/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/simonw/datasette/issues/1632/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/simonw/datasette/issues/1623", "repository_url": "https://api.github.com/repos/simonw/datasette", "labels_url": "https://api.github.com/repos/simonw/datasette/issues/1623/labels{/name}", "comments_url": "https://api.github.com/repos/simonw/datasette/issues/1623/comments", "events_url": "https://api.github.com/repos/simonw/datasette/issues/1623/events", "html_url": "https://github.com/simonw/datasette/issues/1623", "id": 1122416919, "node_id": "I_kwDOBm6k_c5C5rkX", "number": 1623, "title": "/-/patterns returns link: alternate JSON header to 404", "user": {"login": "simonw", "id": 9599, "node_id": "MDQ6VXNlcjk1OTk=", "avatar_url": "https://avatars.githubusercontent.com/u/9599?v=4", "gravatar_id": "", "url": "https://api.github.com/users/simonw", "html_url": "https://github.com/simonw", "followers_url": "https://api.github.com/users/simonw/followers", "following_url": "https://api.github.com/users/simonw/following{/other_user}", "gists_url": "https://api.github.com/users/simonw/gists{/gist_id}", "starred_url": "https://api.github.com/users/simonw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/simonw/subscriptions", "organizations_url": "https://api.github.com/users/simonw/orgs", "repos_url": "https://api.github.com/users/simonw/repos", "events_url": "https://api.github.com/users/simonw/events{/privacy}", "received_events_url": "https://api.github.com/users/simonw/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 727708732, "node_id": "MDU6TGFiZWw3Mjc3MDg3MzI=", "url": "https://api.github.com/repos/simonw/datasette/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/simonw/datasette/milestones/7", "html_url": "https://github.com/simonw/datasette/milestone/7", "labels_url": "https://api.github.com/repos/simonw/datasette/milestones/7/labels", "id": 3268330, "node_id": "MDk6TWlsZXN0b25lMzI2ODMzMA==", "number": 7, "title": "Datasette 1.0", "description": "https://github.com/simonw/datasette/issues/519 - stable JSON API, documented template context, plugin API guarantee that plugins will not break until a 2.0 release.", "creator": {"login": "simonw", "id": 9599, "node_id": "MDQ6VXNlcjk1OTk=", "avatar_url": "https://avatars.githubusercontent.com/u/9599?v=4", "gravatar_id": "", "url": "https://api.github.com/users/simonw", "html_url": "https://github.com/simonw", "followers_url": "https://api.github.com/users/simonw/followers", "following_url": "https://api.github.com/users/simonw/following{/other_user}", "gists_url": "https://api.github.com/users/simonw/gists{/gist_id}", "starred_url": "https://api.github.com/users/simonw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/simonw/subscriptions", "organizations_url": "https://api.github.com/users/simonw/orgs", "repos_url": "https://api.github.com/users/simonw/repos", "events_url": "https://api.github.com/users/simonw/events{/privacy}", "received_events_url": "https://api.github.com/users/simonw/received_events", "type": "User", "site_admin": false}, "open_issues": 52, "closed_issues": 58, "state": "open", "created_at": "2018-04-15T21:11:18Z", "updated_at": "2023-03-31T17:56:10Z", "due_on": null, "closed_at": null}, "comments": 2, "created_at": "2022-02-02T21:42:49Z", "updated_at": "2022-03-19T04:04:49Z", "closed_at": "2022-02-02T21:48:56Z", "author_association": "OWNER", "active_lock_reason": null, "body": "Bug from:\r\n- #1620\r\n\r\n```\r\n% curl -s -I 'https://latest.datasette.io/-/patterns' | grep link\r\nlink: https://latest.datasette.io/-/patterns.json; rel=\"alternate\"; type=\"application/json+datasette\"\r\n```", "reactions": {"url": "https://api.github.com/repos/simonw/datasette/issues/1623/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/simonw/datasette/issues/1623/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/simonw/datasette/issues/1606", "repository_url": "https://api.github.com/repos/simonw/datasette", "labels_url": "https://api.github.com/repos/simonw/datasette/issues/1606/labels{/name}", "comments_url": "https://api.github.com/repos/simonw/datasette/issues/1606/comments", "events_url": "https://api.github.com/repos/simonw/datasette/issues/1606/events", "html_url": "https://github.com/simonw/datasette/issues/1606", "id": 1108846067, "node_id": "I_kwDOBm6k_c5CF6Xz", "number": 1606, "title": "Tests failing against Python 3.6", "user": {"login": "simonw", "id": 9599, "node_id": "MDQ6VXNlcjk1OTk=", "avatar_url": "https://avatars.githubusercontent.com/u/9599?v=4", "gravatar_id": "", "url": "https://api.github.com/users/simonw", "html_url": "https://github.com/simonw", "followers_url": "https://api.github.com/users/simonw/followers", "following_url": "https://api.github.com/users/simonw/following{/other_user}", "gists_url": "https://api.github.com/users/simonw/gists{/gist_id}", "starred_url": "https://api.github.com/users/simonw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/simonw/subscriptions", "organizations_url": "https://api.github.com/users/simonw/orgs", "repos_url": "https://api.github.com/users/simonw/repos", "events_url": "https://api.github.com/users/simonw/events{/privacy}", "received_events_url": "https://api.github.com/users/simonw/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 727708732, "node_id": "MDU6TGFiZWw3Mjc3MDg3MzI=", "url": "https://api.github.com/repos/simonw/datasette/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}, {"id": 993222446, "node_id": "MDU6TGFiZWw5OTMyMjI0NDY=", "url": "https://api.github.com/repos/simonw/datasette/labels/ci", "name": "ci", "color": "c5daf9", "default": false, "description": ""}, {"id": 1970143153, "node_id": "MDU6TGFiZWwxOTcwMTQzMTUz", "url": "https://api.github.com/repos/simonw/datasette/labels/dependencies", "name": "dependencies", "color": "0366d6", "default": false, "description": "Pull requests that update a dependency file"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2022-01-20T04:22:44Z", "updated_at": "2022-01-20T04:36:42Z", "closed_at": "2022-01-20T04:36:42Z", "author_association": "OWNER", "active_lock_reason": null, "body": "https://github.com/simonw/datasette/runs/4877484366\r\n\r\n```\r\nE           File \"/opt/hostedtoolcache/Python/3.6.15/x64/lib/python3.6/site-packages/uvicorn/server.py\", line 67, in run\r\nE             return asyncio.run(self.serve(sockets=sockets))\r\nE         AttributeError: module 'asyncio' has no attribute 'run'\r\n```\r\nI think this may mean `uvicorn` has dropped support for Python 3.6.", "reactions": {"url": "https://api.github.com/repos/simonw/datasette/issues/1606/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/simonw/datasette/issues/1606/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/simonw/datasette/issues/1590", "repository_url": "https://api.github.com/repos/simonw/datasette", "labels_url": "https://api.github.com/repos/simonw/datasette/issues/1590/labels{/name}", "comments_url": "https://api.github.com/repos/simonw/datasette/issues/1590/comments", "events_url": "https://api.github.com/repos/simonw/datasette/issues/1590/events", "html_url": "https://github.com/simonw/datasette/issues/1590", "id": 1099723916, "node_id": "I_kwDOBm6k_c5BjHSM", "number": 1590, "title": "Table+query JSON and CSV links broken when using `base_url` setting", "user": {"login": "eelkevdbos", "id": 1001306, "node_id": "MDQ6VXNlcjEwMDEzMDY=", "avatar_url": "https://avatars.githubusercontent.com/u/1001306?v=4", "gravatar_id": "", "url": "https://api.github.com/users/eelkevdbos", "html_url": "https://github.com/eelkevdbos", "followers_url": "https://api.github.com/users/eelkevdbos/followers", "following_url": "https://api.github.com/users/eelkevdbos/following{/other_user}", "gists_url": "https://api.github.com/users/eelkevdbos/gists{/gist_id}", "starred_url": "https://api.github.com/users/eelkevdbos/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/eelkevdbos/subscriptions", "organizations_url": "https://api.github.com/users/eelkevdbos/orgs", "repos_url": "https://api.github.com/users/eelkevdbos/repos", "events_url": "https://api.github.com/users/eelkevdbos/events{/privacy}", "received_events_url": "https://api.github.com/users/eelkevdbos/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 727708732, "node_id": "MDU6TGFiZWw3Mjc3MDg3MzI=", "url": "https://api.github.com/repos/simonw/datasette/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/simonw/datasette/milestones/23", "html_url": "https://github.com/simonw/datasette/milestone/23", "labels_url": "https://api.github.com/repos/simonw/datasette/milestones/23/labels", "id": 7571612, "node_id": "MI_kwDOBm6k_c4Ac4ic", "number": 23, "title": "Datasette 0.60", "description": "", "creator": {"login": "simonw", "id": 9599, "node_id": "MDQ6VXNlcjk1OTk=", "avatar_url": "https://avatars.githubusercontent.com/u/9599?v=4", "gravatar_id": "", "url": "https://api.github.com/users/simonw", "html_url": "https://github.com/simonw", "followers_url": "https://api.github.com/users/simonw/followers", "following_url": "https://api.github.com/users/simonw/following{/other_user}", "gists_url": "https://api.github.com/users/simonw/gists{/gist_id}", "starred_url": "https://api.github.com/users/simonw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/simonw/subscriptions", "organizations_url": "https://api.github.com/users/simonw/orgs", "repos_url": "https://api.github.com/users/simonw/repos", "events_url": "https://api.github.com/users/simonw/events{/privacy}", "received_events_url": "https://api.github.com/users/simonw/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 24, "state": "closed", "created_at": "2022-01-13T22:20:51Z", "updated_at": "2022-01-14T01:59:55Z", "due_on": null, "closed_at": "2022-01-14T01:44:41Z"}, "comments": 11, "created_at": "2022-01-11T23:46:39Z", "updated_at": "2022-01-14T01:16:34Z", "closed_at": "2022-01-14T01:16:08Z", "author_association": "NONE", "active_lock_reason": null, "body": "Datasette appends the prefix found in the `base_url` setting twice if a `base_url` is set.\r\n\r\nIn the follow asgi example, I'm hosting a custom Datasette instance:\r\n\r\n```python\r\n# asgi.py\r\nimport pathlib\r\nfrom asgi_cors import asgi_cors\r\nfrom channels.routing import URLRouter\r\nfrom django.urls import re_path\r\nfrom datasette.app import Datasette\r\n\r\ndatasette_ = Datasette(\r\n    files=[],\r\n    settings={\r\n        \"base_url\": \"/datasettes/\",\r\n        \"plugins\": {}\r\n    },\r\n    config_dir=pathlib.Path('.'),\r\n)\r\napplication = URLRouter([\r\n  re_path(r\"^datasettes/.*\", asgi_cors(datasette_.app(), allow_all=True)),\r\n])\r\n```\r\n\r\nRunning it with:\r\n```shell\r\n$ daphne -p 8002 asgi:application\r\n```\r\n\r\nUsing a simple query on the `_memory` table: \r\n```sql\r\nselect sqlite_version()\r\n```\r\n\r\nhttp://localhost:8002/datasettes/_memory?sql=select+sqlite_version%28%29\r\n\r\nIt renders the following upon inspection:\r\n![image](https://user-images.githubusercontent.com/1001306/149038851-aa842950-126a-467c-9a86-fae13bce6221.png)\r\n\r\nI am using datasette version `0.59.4`", "reactions": {"url": "https://api.github.com/repos/simonw/datasette/issues/1590/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/simonw/datasette/issues/1590/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/simonw/datasette/issues/1588", "repository_url": "https://api.github.com/repos/simonw/datasette", "labels_url": "https://api.github.com/repos/simonw/datasette/issues/1588/labels{/name}", "comments_url": "https://api.github.com/repos/simonw/datasette/issues/1588/comments", "events_url": "https://api.github.com/repos/simonw/datasette/issues/1588/events", "html_url": "https://github.com/simonw/datasette/issues/1588", "id": 1097101917, "node_id": "I_kwDOBm6k_c5BZHJd", "number": 1588, "title": "`explain query plan select` is too strict about whitespace", "user": {"login": "simonw", "id": 9599, "node_id": "MDQ6VXNlcjk1OTk=", "avatar_url": "https://avatars.githubusercontent.com/u/9599?v=4", "gravatar_id": "", "url": "https://api.github.com/users/simonw", "html_url": "https://github.com/simonw", "followers_url": "https://api.github.com/users/simonw/followers", "following_url": "https://api.github.com/users/simonw/following{/other_user}", "gists_url": "https://api.github.com/users/simonw/gists{/gist_id}", "starred_url": "https://api.github.com/users/simonw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/simonw/subscriptions", "organizations_url": "https://api.github.com/users/simonw/orgs", "repos_url": "https://api.github.com/users/simonw/repos", "events_url": "https://api.github.com/users/simonw/events{/privacy}", "received_events_url": "https://api.github.com/users/simonw/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 727708732, "node_id": "MDU6TGFiZWw3Mjc3MDg3MzI=", "url": "https://api.github.com/repos/simonw/datasette/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}, {"id": 967420289, "node_id": "MDU6TGFiZWw5Njc0MjAyODk=", "url": "https://api.github.com/repos/simonw/datasette/labels/minor", "name": "minor", "color": "fcd0c4", "default": false, "description": "Minor bugs (not high priority)"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/simonw/datasette/milestones/23", "html_url": "https://github.com/simonw/datasette/milestone/23", "labels_url": "https://api.github.com/repos/simonw/datasette/milestones/23/labels", "id": 7571612, "node_id": "MI_kwDOBm6k_c4Ac4ic", "number": 23, "title": "Datasette 0.60", "description": "", "creator": {"login": "simonw", "id": 9599, "node_id": "MDQ6VXNlcjk1OTk=", "avatar_url": "https://avatars.githubusercontent.com/u/9599?v=4", "gravatar_id": "", "url": "https://api.github.com/users/simonw", "html_url": "https://github.com/simonw", "followers_url": "https://api.github.com/users/simonw/followers", "following_url": "https://api.github.com/users/simonw/following{/other_user}", "gists_url": "https://api.github.com/users/simonw/gists{/gist_id}", "starred_url": "https://api.github.com/users/simonw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/simonw/subscriptions", "organizations_url": "https://api.github.com/users/simonw/orgs", "repos_url": "https://api.github.com/users/simonw/repos", "events_url": "https://api.github.com/users/simonw/events{/privacy}", "received_events_url": "https://api.github.com/users/simonw/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 24, "state": "closed", "created_at": "2022-01-13T22:20:51Z", "updated_at": "2022-01-14T01:59:55Z", "due_on": null, "closed_at": "2022-01-14T01:44:41Z"}, "comments": 3, "created_at": "2022-01-09T04:22:42Z", "updated_at": "2022-01-13T22:28:19Z", "closed_at": "2022-01-13T20:35:05Z", "author_association": "OWNER", "active_lock_reason": null, "body": "`explain query plan select * from facetable` is allowed: https://latest.datasette.io/fixtures?sql=explain+query+plan+select+*+from+facetable\r\n\r\nBut... `explain query plan  select * from facetable` (with two spaces before the `select`) returns a \"Statement must be a SELECT\" error: https://latest.datasette.io/fixtures?sql=explain+query+plan++select+*+from+facetable", "reactions": {"url": "https://api.github.com/repos/simonw/datasette/issues/1588/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/simonw/datasette/issues/1588/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/simonw/datasette/issues/1575", "repository_url": "https://api.github.com/repos/simonw/datasette", "labels_url": "https://api.github.com/repos/simonw/datasette/issues/1575/labels{/name}", "comments_url": "https://api.github.com/repos/simonw/datasette/issues/1575/comments", "events_url": "https://api.github.com/repos/simonw/datasette/issues/1575/events", "html_url": "https://github.com/simonw/datasette/issues/1575", "id": 1084257842, "node_id": "I_kwDOBm6k_c5AoHYy", "number": 1575, "title": "__call__() got an unexpected keyword argument 'specname'", "user": {"login": "simonw", "id": 9599, "node_id": "MDQ6VXNlcjk1OTk=", "avatar_url": "https://avatars.githubusercontent.com/u/9599?v=4", "gravatar_id": "", "url": "https://api.github.com/users/simonw", "html_url": "https://github.com/simonw", "followers_url": "https://api.github.com/users/simonw/followers", "following_url": "https://api.github.com/users/simonw/following{/other_user}", "gists_url": "https://api.github.com/users/simonw/gists{/gist_id}", "starred_url": "https://api.github.com/users/simonw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/simonw/subscriptions", "organizations_url": "https://api.github.com/users/simonw/orgs", "repos_url": "https://api.github.com/users/simonw/repos", "events_url": "https://api.github.com/users/simonw/events{/privacy}", "received_events_url": "https://api.github.com/users/simonw/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 727708732, "node_id": "MDU6TGFiZWw3Mjc3MDg3MzI=", "url": "https://api.github.com/repos/simonw/datasette/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2021-12-20T01:24:04Z", "updated_at": "2021-12-20T01:48:03Z", "closed_at": "2021-12-20T01:47:57Z", "author_association": "OWNER", "active_lock_reason": null, "body": "> I've installed the alpha version but get an error when starting up Datasette:\r\n\r\n```\r\nTraceback (most recent call last):\r\n  File \"/Users/tim/.pyenv/versions/stock-exchange/bin/datasette\", line 5, in <module>\r\n    from datasette.cli import cli\r\n  File \"/Users/tim/.pyenv/versions/3.8.5/envs/stock-exchange/lib/python3.8/site-packages/datasette/cli.py\", line 15, in <module>\r\n    from .app import Datasette, DEFAULT_SETTINGS, SETTINGS, SQLITE_LIMIT_ATTACHED, pm\r\n  File \"/Users/tim/.pyenv/versions/3.8.5/envs/stock-exchange/lib/python3.8/site-packages/datasette/app.py\", line 31, in <module>\r\n    from .views.database import DatabaseDownload, DatabaseView\r\n  File \"/Users/tim/.pyenv/versions/3.8.5/envs/stock-exchange/lib/python3.8/site-packages/datasette/views/database.py\", line 25, in <module>\r\n    from datasette.plugins import pm\r\n  File \"/Users/tim/.pyenv/versions/3.8.5/envs/stock-exchange/lib/python3.8/site-packages/datasette/plugins.py\", line 29, in <module>\r\n    mod = importlib.import_module(plugin)\r\n  File \"/Users/tim/.pyenv/versions/3.8.5/lib/python3.8/importlib/__init__.py\", line 127, in import_module\r\n    return _bootstrap._gcd_import(name[level:], package, level)\r\n  File \"/Users/tim/.pyenv/versions/3.8.5/envs/stock-exchange/lib/python3.8/site-packages/datasette/filters.py\", line 9, in <module>\r\n    @hookimpl(specname=\"filters_from_request\")\r\nTypeError: __call__() got an unexpected keyword argument 'specname'\r\n```\r\n\r\n_Originally posted by @wragge in https://github.com/simonw/datasette/issues/1547#issuecomment-997511968_", "reactions": {"url": "https://api.github.com/repos/simonw/datasette/issues/1575/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/simonw/datasette/issues/1575/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/simonw/datasette/issues/1564", "repository_url": "https://api.github.com/repos/simonw/datasette", "labels_url": "https://api.github.com/repos/simonw/datasette/issues/1564/labels{/name}", "comments_url": "https://api.github.com/repos/simonw/datasette/issues/1564/comments", "events_url": "https://api.github.com/repos/simonw/datasette/issues/1564/events", "html_url": "https://github.com/simonw/datasette/issues/1564", "id": 1083581011, "node_id": "I_kwDOBm6k_c5AliJT", "number": 1564, "title": "_prepare_connection not called on write connections", "user": {"login": "simonw", "id": 9599, "node_id": "MDQ6VXNlcjk1OTk=", "avatar_url": "https://avatars.githubusercontent.com/u/9599?v=4", "gravatar_id": "", "url": "https://api.github.com/users/simonw", "html_url": "https://github.com/simonw", "followers_url": "https://api.github.com/users/simonw/followers", "following_url": "https://api.github.com/users/simonw/following{/other_user}", "gists_url": "https://api.github.com/users/simonw/gists{/gist_id}", "starred_url": "https://api.github.com/users/simonw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/simonw/subscriptions", "organizations_url": "https://api.github.com/users/simonw/orgs", "repos_url": "https://api.github.com/users/simonw/repos", "events_url": "https://api.github.com/users/simonw/events{/privacy}", "received_events_url": "https://api.github.com/users/simonw/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 727708732, "node_id": "MDU6TGFiZWw3Mjc3MDg3MzI=", "url": "https://api.github.com/repos/simonw/datasette/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}, {"id": 3750195281, "node_id": "LA_kwDOBm6k_c7fh3BR", "url": "https://api.github.com/repos/simonw/datasette/labels/spatialite", "name": "spatialite", "color": "20CE84", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/simonw/datasette/milestones/23", "html_url": "https://github.com/simonw/datasette/milestone/23", "labels_url": "https://api.github.com/repos/simonw/datasette/milestones/23/labels", "id": 7571612, "node_id": "MI_kwDOBm6k_c4Ac4ic", "number": 23, "title": "Datasette 0.60", "description": "", "creator": {"login": "simonw", "id": 9599, "node_id": "MDQ6VXNlcjk1OTk=", "avatar_url": "https://avatars.githubusercontent.com/u/9599?v=4", "gravatar_id": "", "url": "https://api.github.com/users/simonw", "html_url": "https://github.com/simonw", "followers_url": "https://api.github.com/users/simonw/followers", "following_url": "https://api.github.com/users/simonw/following{/other_user}", "gists_url": "https://api.github.com/users/simonw/gists{/gist_id}", "starred_url": "https://api.github.com/users/simonw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/simonw/subscriptions", "organizations_url": "https://api.github.com/users/simonw/orgs", "repos_url": "https://api.github.com/users/simonw/repos", "events_url": "https://api.github.com/users/simonw/events{/privacy}", "received_events_url": "https://api.github.com/users/simonw/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 24, "state": "closed", "created_at": "2022-01-13T22:20:51Z", "updated_at": "2022-01-14T01:59:55Z", "due_on": null, "closed_at": "2022-01-14T01:44:41Z"}, "comments": 1, "created_at": "2021-12-17T20:06:47Z", "updated_at": "2022-01-20T21:29:43Z", "closed_at": "2021-12-18T01:58:44Z", "author_association": "OWNER", "active_lock_reason": null, "body": "I was trying to initalize SpatiaLite in a write connection:\r\n```pycon\r\n>>> from datasette.app import Datasette\r\n>>> ds = Datasette(memory=True, files=[], sqlite_extensions=[\"spatialite\"])\r\n>>> db = ds.add_memory_database('geo')\r\n>>> await db.execute_write(\"select InitSpatialMetadata(1)\")\r\nUUID('3f143baa-4e3d-5842-a36f-4fa2f683b72f')\r\nno such function: InitSpatialMetadata\r\n```\r\nIt looks like the code that loads additional modules only works on read-only connections, not on write connections:\r\n\r\nhttps://github.com/simonw/datasette/blob/92a5280d2e75c39424a75ad6226fc74400ae984f/datasette/database.py#L146-L153\r\n\r\nCompared to:\r\n\r\nhttps://github.com/simonw/datasette/blob/92a5280d2e75c39424a75ad6226fc74400ae984f/datasette/database.py#L124-L132", "reactions": {"url": "https://api.github.com/repos/simonw/datasette/issues/1564/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/simonw/datasette/issues/1564/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/simonw/datasette/issues/1560", "repository_url": "https://api.github.com/repos/simonw/datasette", "labels_url": "https://api.github.com/repos/simonw/datasette/issues/1560/labels{/name}", "comments_url": "https://api.github.com/repos/simonw/datasette/issues/1560/comments", "events_url": "https://api.github.com/repos/simonw/datasette/issues/1560/events", "html_url": "https://github.com/simonw/datasette/issues/1560", "id": 1082746149, "node_id": "I_kwDOBm6k_c5AiWUl", "number": 1560, "title": "Table page title has \"where where\" in it", "user": {"login": "simonw", "id": 9599, "node_id": "MDQ6VXNlcjk1OTk=", "avatar_url": "https://avatars.githubusercontent.com/u/9599?v=4", "gravatar_id": "", "url": "https://api.github.com/users/simonw", "html_url": "https://github.com/simonw", "followers_url": "https://api.github.com/users/simonw/followers", "following_url": "https://api.github.com/users/simonw/following{/other_user}", "gists_url": "https://api.github.com/users/simonw/gists{/gist_id}", "starred_url": "https://api.github.com/users/simonw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/simonw/subscriptions", "organizations_url": "https://api.github.com/users/simonw/orgs", "repos_url": "https://api.github.com/users/simonw/repos", "events_url": "https://api.github.com/users/simonw/events{/privacy}", "received_events_url": "https://api.github.com/users/simonw/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 727708732, "node_id": "MDU6TGFiZWw3Mjc3MDg3MzI=", "url": "https://api.github.com/repos/simonw/datasette/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}, {"id": 967420289, "node_id": "MDU6TGFiZWw5Njc0MjAyODk=", "url": "https://api.github.com/repos/simonw/datasette/labels/minor", "name": "minor", "color": "fcd0c4", "default": false, "description": "Minor bugs (not high priority)"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/simonw/datasette/milestones/23", "html_url": "https://github.com/simonw/datasette/milestone/23", "labels_url": "https://api.github.com/repos/simonw/datasette/milestones/23/labels", "id": 7571612, "node_id": "MI_kwDOBm6k_c4Ac4ic", "number": 23, "title": "Datasette 0.60", "description": "", "creator": {"login": "simonw", "id": 9599, "node_id": "MDQ6VXNlcjk1OTk=", "avatar_url": "https://avatars.githubusercontent.com/u/9599?v=4", "gravatar_id": "", "url": "https://api.github.com/users/simonw", "html_url": "https://github.com/simonw", "followers_url": "https://api.github.com/users/simonw/followers", "following_url": "https://api.github.com/users/simonw/following{/other_user}", "gists_url": "https://api.github.com/users/simonw/gists{/gist_id}", "starred_url": "https://api.github.com/users/simonw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/simonw/subscriptions", "organizations_url": "https://api.github.com/users/simonw/orgs", "repos_url": "https://api.github.com/users/simonw/repos", "events_url": "https://api.github.com/users/simonw/events{/privacy}", "received_events_url": "https://api.github.com/users/simonw/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 24, "state": "closed", "created_at": "2022-01-13T22:20:51Z", "updated_at": "2022-01-14T01:59:55Z", "due_on": null, "closed_at": "2022-01-14T01:44:41Z"}, "comments": 0, "created_at": "2021-12-17T00:05:48Z", "updated_at": "2022-01-13T22:28:35Z", "closed_at": "2022-01-13T22:20:15Z", "author_association": "OWNER", "active_lock_reason": null, "body": "Just noticed this while working on #1518.\r\n\r\n```\r\n% curl -s 'https://latest.datasette.io/fixtures/facetable?_sort=pk&on_earth__exact=1' | grep -C 1 '<title>'\r\n<head>\r\n    <title>fixtures: facetable: 14 rows\r\n    where where on_earth = 1 sorted by pk</title>\r\n```", "reactions": {"url": "https://api.github.com/repos/simonw/datasette/issues/1560/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/simonw/datasette/issues/1560/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/simonw/datasette/issues/1552", "repository_url": "https://api.github.com/repos/simonw/datasette", "labels_url": "https://api.github.com/repos/simonw/datasette/issues/1552/labels{/name}", "comments_url": "https://api.github.com/repos/simonw/datasette/issues/1552/comments", "events_url": "https://api.github.com/repos/simonw/datasette/issues/1552/events", "html_url": "https://github.com/simonw/datasette/issues/1552", "id": 1078702875, "node_id": "I_kwDOBm6k_c5AS7Mb", "number": 1552, "title": "Allow to set `facets_array` in metadata (like current `facets`)", "user": {"login": "davidbgk", "id": 3556, "node_id": "MDQ6VXNlcjM1NTY=", "avatar_url": "https://avatars.githubusercontent.com/u/3556?v=4", "gravatar_id": "", "url": "https://api.github.com/users/davidbgk", "html_url": "https://github.com/davidbgk", "followers_url": "https://api.github.com/users/davidbgk/followers", "following_url": "https://api.github.com/users/davidbgk/following{/other_user}", "gists_url": "https://api.github.com/users/davidbgk/gists{/gist_id}", "starred_url": "https://api.github.com/users/davidbgk/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/davidbgk/subscriptions", "organizations_url": "https://api.github.com/users/davidbgk/orgs", "repos_url": "https://api.github.com/users/davidbgk/repos", "events_url": "https://api.github.com/users/davidbgk/events{/privacy}", "received_events_url": "https://api.github.com/users/davidbgk/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 727708732, "node_id": "MDU6TGFiZWw3Mjc3MDg3MzI=", "url": "https://api.github.com/repos/simonw/datasette/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}, {"id": 750789605, "node_id": "MDU6TGFiZWw3NTA3ODk2MDU=", "url": "https://api.github.com/repos/simonw/datasette/labels/documentation", "name": "documentation", "color": "fc8b0a", "default": true, "description": null}, {"id": 1382668283, "node_id": "MDU6TGFiZWwxMzgyNjY4Mjgz", "url": "https://api.github.com/repos/simonw/datasette/labels/faceting", "name": "faceting", "color": "71dd93", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/simonw/datasette/milestones/23", "html_url": "https://github.com/simonw/datasette/milestone/23", "labels_url": "https://api.github.com/repos/simonw/datasette/milestones/23/labels", "id": 7571612, "node_id": "MI_kwDOBm6k_c4Ac4ic", "number": 23, "title": "Datasette 0.60", "description": "", "creator": {"login": "simonw", "id": 9599, "node_id": "MDQ6VXNlcjk1OTk=", "avatar_url": "https://avatars.githubusercontent.com/u/9599?v=4", "gravatar_id": "", "url": "https://api.github.com/users/simonw", "html_url": "https://github.com/simonw", "followers_url": "https://api.github.com/users/simonw/followers", "following_url": "https://api.github.com/users/simonw/following{/other_user}", "gists_url": "https://api.github.com/users/simonw/gists{/gist_id}", "starred_url": "https://api.github.com/users/simonw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/simonw/subscriptions", "organizations_url": "https://api.github.com/users/simonw/orgs", "repos_url": "https://api.github.com/users/simonw/repos", "events_url": "https://api.github.com/users/simonw/events{/privacy}", "received_events_url": "https://api.github.com/users/simonw/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 24, "state": "closed", "created_at": "2022-01-13T22:20:51Z", "updated_at": "2022-01-14T01:59:55Z", "due_on": null, "closed_at": "2022-01-14T01:44:41Z"}, "comments": 9, "created_at": "2021-12-13T16:00:44Z", "updated_at": "2022-01-13T22:26:15Z", "closed_at": "2021-12-16T18:47:48Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "For now, you can set a `facets` value (array) in your metadata file but I couldn't find a way to set a `facets_array` in order to provide default facets for arrays (like tags). My use-case is to access to [that kind of view](https://latest.datasette.io/fixtures/facetable?_facet_array=tags) by default without URL's parameters as with other default facets.\r\n\r\n_I'm new to datasette, and I'm willing to help with a PR if that is not already implemented and I missed it!_", "reactions": {"url": "https://api.github.com/repos/simonw/datasette/issues/1552/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/simonw/datasette/issues/1552/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/simonw/datasette/issues/1547", "repository_url": "https://api.github.com/repos/simonw/datasette", "labels_url": "https://api.github.com/repos/simonw/datasette/issues/1547/labels{/name}", "comments_url": "https://api.github.com/repos/simonw/datasette/issues/1547/comments", "events_url": "https://api.github.com/repos/simonw/datasette/issues/1547/events", "html_url": "https://github.com/simonw/datasette/issues/1547", "id": 1076388044, "node_id": "I_kwDOBm6k_c5AKGDM", "number": 1547, "title": "Writable canned queries fail to load custom templates", "user": {"login": "wragge", "id": 127565, "node_id": "MDQ6VXNlcjEyNzU2NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/127565?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wragge", "html_url": "https://github.com/wragge", "followers_url": "https://api.github.com/users/wragge/followers", "following_url": "https://api.github.com/users/wragge/following{/other_user}", "gists_url": "https://api.github.com/users/wragge/gists{/gist_id}", "starred_url": "https://api.github.com/users/wragge/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wragge/subscriptions", "organizations_url": "https://api.github.com/users/wragge/orgs", "repos_url": "https://api.github.com/users/wragge/repos", "events_url": "https://api.github.com/users/wragge/events{/privacy}", "received_events_url": "https://api.github.com/users/wragge/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 727708732, "node_id": "MDU6TGFiZWw3Mjc3MDg3MzI=", "url": "https://api.github.com/repos/simonw/datasette/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/simonw/datasette/milestones/23", "html_url": "https://github.com/simonw/datasette/milestone/23", "labels_url": "https://api.github.com/repos/simonw/datasette/milestones/23/labels", "id": 7571612, "node_id": "MI_kwDOBm6k_c4Ac4ic", "number": 23, "title": "Datasette 0.60", "description": "", "creator": {"login": "simonw", "id": 9599, "node_id": "MDQ6VXNlcjk1OTk=", "avatar_url": "https://avatars.githubusercontent.com/u/9599?v=4", "gravatar_id": "", "url": "https://api.github.com/users/simonw", "html_url": "https://github.com/simonw", "followers_url": "https://api.github.com/users/simonw/followers", "following_url": "https://api.github.com/users/simonw/following{/other_user}", "gists_url": "https://api.github.com/users/simonw/gists{/gist_id}", "starred_url": "https://api.github.com/users/simonw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/simonw/subscriptions", "organizations_url": "https://api.github.com/users/simonw/orgs", "repos_url": "https://api.github.com/users/simonw/repos", "events_url": "https://api.github.com/users/simonw/events{/privacy}", "received_events_url": "https://api.github.com/users/simonw/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 24, "state": "closed", "created_at": "2022-01-13T22:20:51Z", "updated_at": "2022-01-14T01:59:55Z", "due_on": null, "closed_at": "2022-01-14T01:44:41Z"}, "comments": 6, "created_at": "2021-12-10T03:31:48Z", "updated_at": "2022-01-13T22:27:59Z", "closed_at": "2021-12-19T21:12:00Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "I've created a canned query with `\"write\": true` set. I've also created a custom template for it, but the template doesn't seem to be found. If I look in the HTML I see (`stock_exchange` is the db name):\r\n\r\n`<!-- Templates considered: query-stock_exchange.html, *query.html -->`\r\n\r\nMy non-writeable canned queries pick up custom templates as expected, and if I look at their HTML I see the canned query name added to the templates considered (the canned query here is `date_search`):\r\n\r\n`<!-- Templates considered: query-stock_exchange-date_search.html, query-stock_exchange.html, *query.html -->`\r\n\r\nSo it seems like the writeable canned query is behaving differently for some reason. Is it an authentication thing? I'm using the built in `--root` authentication.\r\n\r\nThanks!\r\n", "reactions": {"url": "https://api.github.com/repos/simonw/datasette/issues/1547/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/simonw/datasette/issues/1547/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/simonw/datasette/issues/1545", "repository_url": "https://api.github.com/repos/simonw/datasette", "labels_url": "https://api.github.com/repos/simonw/datasette/issues/1545/labels{/name}", "comments_url": "https://api.github.com/repos/simonw/datasette/issues/1545/comments", "events_url": "https://api.github.com/repos/simonw/datasette/issues/1545/events", "html_url": "https://github.com/simonw/datasette/issues/1545", "id": 1075893249, "node_id": "I_kwDOBm6k_c5AINQB", "number": 1545, "title": "Custom pages don't work on windows", "user": {"login": "ryascott", "id": 559711, "node_id": "MDQ6VXNlcjU1OTcxMQ==", "avatar_url": "https://avatars.githubusercontent.com/u/559711?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ryascott", "html_url": "https://github.com/ryascott", "followers_url": "https://api.github.com/users/ryascott/followers", "following_url": "https://api.github.com/users/ryascott/following{/other_user}", "gists_url": "https://api.github.com/users/ryascott/gists{/gist_id}", "starred_url": "https://api.github.com/users/ryascott/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ryascott/subscriptions", "organizations_url": "https://api.github.com/users/ryascott/orgs", "repos_url": "https://api.github.com/users/ryascott/repos", "events_url": "https://api.github.com/users/ryascott/events{/privacy}", "received_events_url": "https://api.github.com/users/ryascott/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 727708732, "node_id": "MDU6TGFiZWw3Mjc3MDg3MzI=", "url": "https://api.github.com/repos/simonw/datasette/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}, {"id": 3411971777, "node_id": "LA_kwDOBm6k_c7LXo7B", "url": "https://api.github.com/repos/simonw/datasette/labels/windows", "name": "windows", "color": "ED72A2", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2021-12-09T18:53:05Z", "updated_at": "2022-02-03T02:08:31Z", "closed_at": "2022-02-03T01:58:35Z", "author_association": "NONE", "active_lock_reason": null, "body": "It seems that custom pages don't work when put in templates/pages\r\n\r\nTo reproduce on datasette version 0.59.4  using PowerShell on WIndows 10 with Python 3.10.0\r\n\r\n    mkdir -p templates/pages\r\n\r\n    echo \"hello world\" >> templates/pages/about.html\r\n\r\nStart datasette\r\n   \r\n    datasette --template-dir templates/\r\n\r\nNavigate to [http://127.0.0.1:8001/about](url) and receive:\r\n    \r\n   Error 404:\r\n   Database not found: about\r\n\r\n\r\n\r\n\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/simonw/datasette/issues/1545/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/simonw/datasette/issues/1545/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/simonw/datasette/issues/1544", "repository_url": "https://api.github.com/repos/simonw/datasette", "labels_url": "https://api.github.com/repos/simonw/datasette/issues/1544/labels{/name}", "comments_url": "https://api.github.com/repos/simonw/datasette/issues/1544/comments", "events_url": "https://api.github.com/repos/simonw/datasette/issues/1544/events", "html_url": "https://github.com/simonw/datasette/issues/1544", "id": 1073712378, "node_id": "I_kwDOBm6k_c4__4z6", "number": 1544, "title": "Code that detects the label column for a table is case-sensitive", "user": {"login": "simonw", "id": 9599, "node_id": "MDQ6VXNlcjk1OTk=", "avatar_url": "https://avatars.githubusercontent.com/u/9599?v=4", "gravatar_id": "", "url": "https://api.github.com/users/simonw", "html_url": "https://github.com/simonw", "followers_url": "https://api.github.com/users/simonw/followers", "following_url": "https://api.github.com/users/simonw/following{/other_user}", "gists_url": "https://api.github.com/users/simonw/gists{/gist_id}", "starred_url": "https://api.github.com/users/simonw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/simonw/subscriptions", "organizations_url": "https://api.github.com/users/simonw/orgs", "repos_url": "https://api.github.com/users/simonw/repos", "events_url": "https://api.github.com/users/simonw/events{/privacy}", "received_events_url": "https://api.github.com/users/simonw/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 727708732, "node_id": "MDU6TGFiZWw3Mjc3MDg3MzI=", "url": "https://api.github.com/repos/simonw/datasette/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2021-12-07T20:01:25Z", "updated_at": "2021-12-07T20:03:43Z", "closed_at": "2021-12-07T20:03:43Z", "author_association": "OWNER", "active_lock_reason": null, "body": "I just noticed that a column called `Name` is not being picked up as the label column for a table.", "reactions": {"url": "https://api.github.com/repos/simonw/datasette/issues/1544/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/simonw/datasette/issues/1544/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/simonw/datasette/issues/1527", "repository_url": "https://api.github.com/repos/simonw/datasette", "labels_url": "https://api.github.com/repos/simonw/datasette/issues/1527/labels{/name}", "comments_url": "https://api.github.com/repos/simonw/datasette/issues/1527/comments", "events_url": "https://api.github.com/repos/simonw/datasette/issues/1527/events", "html_url": "https://github.com/simonw/datasette/issues/1527", "id": 1059555791, "node_id": "I_kwDOBm6k_c4_J4nP", "number": 1527, "title": "Columns starting with an underscore behave poorly in filters", "user": {"login": "simonw", "id": 9599, "node_id": "MDQ6VXNlcjk1OTk=", "avatar_url": "https://avatars.githubusercontent.com/u/9599?v=4", "gravatar_id": "", "url": "https://api.github.com/users/simonw", "html_url": "https://github.com/simonw", "followers_url": "https://api.github.com/users/simonw/followers", "following_url": "https://api.github.com/users/simonw/following{/other_user}", "gists_url": "https://api.github.com/users/simonw/gists{/gist_id}", "starred_url": "https://api.github.com/users/simonw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/simonw/subscriptions", "organizations_url": "https://api.github.com/users/simonw/orgs", "repos_url": "https://api.github.com/users/simonw/repos", "events_url": "https://api.github.com/users/simonw/events{/privacy}", "received_events_url": "https://api.github.com/users/simonw/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 727708732, "node_id": "MDU6TGFiZWw3Mjc3MDg3MzI=", "url": "https://api.github.com/repos/simonw/datasette/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/simonw/datasette/milestones/23", "html_url": "https://github.com/simonw/datasette/milestone/23", "labels_url": "https://api.github.com/repos/simonw/datasette/milestones/23/labels", "id": 7571612, "node_id": "MI_kwDOBm6k_c4Ac4ic", "number": 23, "title": "Datasette 0.60", "description": "", "creator": {"login": "simonw", "id": 9599, "node_id": "MDQ6VXNlcjk1OTk=", "avatar_url": "https://avatars.githubusercontent.com/u/9599?v=4", "gravatar_id": "", "url": "https://api.github.com/users/simonw", "html_url": "https://github.com/simonw", "followers_url": "https://api.github.com/users/simonw/followers", "following_url": "https://api.github.com/users/simonw/following{/other_user}", "gists_url": "https://api.github.com/users/simonw/gists{/gist_id}", "starred_url": "https://api.github.com/users/simonw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/simonw/subscriptions", "organizations_url": "https://api.github.com/users/simonw/orgs", "repos_url": "https://api.github.com/users/simonw/repos", "events_url": "https://api.github.com/users/simonw/events{/privacy}", "received_events_url": "https://api.github.com/users/simonw/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 24, "state": "closed", "created_at": "2022-01-13T22:20:51Z", "updated_at": "2022-01-14T01:59:55Z", "due_on": null, "closed_at": "2022-01-14T01:44:41Z"}, "comments": 7, "created_at": "2021-11-22T01:01:36Z", "updated_at": "2022-01-14T00:57:08Z", "closed_at": "2022-01-14T00:57:08Z", "author_association": "OWNER", "active_lock_reason": null, "body": "Similar bug to #1525 (and #1506 before it). Start on https://latest.datasette.io/fixtures/facetable?_facet=_neighborhood - then select a neighborhood - then try to remove that filter using the little \"x\" and submitting the form again.\r\n\r\n![filter-bug](https://user-images.githubusercontent.com/9599/142786754-31d265a2-944d-4ea2-af6f-305d445a2ccb.gif)\r\n", "reactions": {"url": "https://api.github.com/repos/simonw/datasette/issues/1527/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/simonw/datasette/issues/1527/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/simonw/datasette/issues/1525", "repository_url": "https://api.github.com/repos/simonw/datasette", "labels_url": "https://api.github.com/repos/simonw/datasette/issues/1525/labels{/name}", "comments_url": "https://api.github.com/repos/simonw/datasette/issues/1525/comments", "events_url": "https://api.github.com/repos/simonw/datasette/issues/1525/events", "html_url": "https://github.com/simonw/datasette/issues/1525", "id": 1059509927, "node_id": "I_kwDOBm6k_c4_Jtan", "number": 1525, "title": "\"Links from other tables\" broken for columns starting with underscore", "user": {"login": "simonw", "id": 9599, "node_id": "MDQ6VXNlcjk1OTk=", "avatar_url": "https://avatars.githubusercontent.com/u/9599?v=4", "gravatar_id": "", "url": "https://api.github.com/users/simonw", "html_url": "https://github.com/simonw", "followers_url": "https://api.github.com/users/simonw/followers", "following_url": "https://api.github.com/users/simonw/following{/other_user}", "gists_url": "https://api.github.com/users/simonw/gists{/gist_id}", "starred_url": "https://api.github.com/users/simonw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/simonw/subscriptions", "organizations_url": "https://api.github.com/users/simonw/orgs", "repos_url": "https://api.github.com/users/simonw/repos", "events_url": "https://api.github.com/users/simonw/events{/privacy}", "received_events_url": "https://api.github.com/users/simonw/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 727708732, "node_id": "MDU6TGFiZWw3Mjc3MDg3MzI=", "url": "https://api.github.com/repos/simonw/datasette/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2021-11-21T22:55:08Z", "updated_at": "2021-11-30T06:39:01Z", "closed_at": "2021-11-30T06:34:35Z", "author_association": "OWNER", "active_lock_reason": null, "body": "Same bug as #1506, this time it's this link or the row page:\r\n\r\n<img width=\"341\" alt=\"image\" src=\"https://user-images.githubusercontent.com/9599/142782167-fe9b6ffa-cd81-4a30-9f3b-401118c498e9.png\">\r\n", "reactions": {"url": "https://api.github.com/repos/simonw/datasette/issues/1525/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/simonw/datasette/issues/1525/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/simonw/datasette/issues/1519", "repository_url": "https://api.github.com/repos/simonw/datasette", "labels_url": "https://api.github.com/repos/simonw/datasette/issues/1519/labels{/name}", "comments_url": "https://api.github.com/repos/simonw/datasette/issues/1519/comments", "events_url": "https://api.github.com/repos/simonw/datasette/issues/1519/events", "html_url": "https://github.com/simonw/datasette/issues/1519", "id": 1058790545, "node_id": "I_kwDOBm6k_c4_G9yR", "number": 1519, "title": "base_url is omitted in JSON and CSV views", "user": {"login": "phubbard", "id": 157158, "node_id": "MDQ6VXNlcjE1NzE1OA==", "avatar_url": "https://avatars.githubusercontent.com/u/157158?v=4", "gravatar_id": "", "url": "https://api.github.com/users/phubbard", "html_url": "https://github.com/phubbard", "followers_url": "https://api.github.com/users/phubbard/followers", "following_url": "https://api.github.com/users/phubbard/following{/other_user}", "gists_url": "https://api.github.com/users/phubbard/gists{/gist_id}", "starred_url": "https://api.github.com/users/phubbard/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/phubbard/subscriptions", "organizations_url": "https://api.github.com/users/phubbard/orgs", "repos_url": "https://api.github.com/users/phubbard/repos", "events_url": "https://api.github.com/users/phubbard/events{/privacy}", "received_events_url": "https://api.github.com/users/phubbard/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 727708732, "node_id": "MDU6TGFiZWw3Mjc3MDg3MzI=", "url": "https://api.github.com/repos/simonw/datasette/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 22, "created_at": "2021-11-19T18:10:45Z", "updated_at": "2021-12-01T17:50:09Z", "closed_at": "2021-11-20T19:11:21Z", "author_association": "NONE", "active_lock_reason": null, "body": "I have a datasette deployment, using Apache2 to reverse proxy:\r\n\r\n       ProxyPass /ged http://thor.phfactor.net:8001\r\n       ProxyPreserveHost On\r\n\r\nIn settings.json I have\r\n```json\r\n{\r\n    \"base_url\": \"/ged/\",\r\n    \"trace_debug\": 1,\r\n    \"template_debug\": 1\r\n}\r\n```\r\nand datasette works correctly. However, if you view a query and then click on the 'This data as json, CSV' both links omit the base_url prefix and are therefore 404.", "reactions": {"url": "https://api.github.com/repos/simonw/datasette/issues/1519/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/simonw/datasette/issues/1519/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/simonw/datasette/issues/1507", "repository_url": "https://api.github.com/repos/simonw/datasette", "labels_url": "https://api.github.com/repos/simonw/datasette/issues/1507/labels{/name}", "comments_url": "https://api.github.com/repos/simonw/datasette/issues/1507/comments", "events_url": "https://api.github.com/repos/simonw/datasette/issues/1507/events", "html_url": "https://github.com/simonw/datasette/issues/1507", "id": 1052851176, "node_id": "I_kwDOBm6k_c4-wTvo", "number": 1507, "title": "ReadTheDocs build failed for 0.59.2 release", "user": {"login": "simonw", "id": 9599, "node_id": "MDQ6VXNlcjk1OTk=", "avatar_url": "https://avatars.githubusercontent.com/u/9599?v=4", "gravatar_id": "", "url": "https://api.github.com/users/simonw", "html_url": "https://github.com/simonw", "followers_url": "https://api.github.com/users/simonw/followers", "following_url": "https://api.github.com/users/simonw/following{/other_user}", "gists_url": "https://api.github.com/users/simonw/gists{/gist_id}", "starred_url": "https://api.github.com/users/simonw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/simonw/subscriptions", "organizations_url": "https://api.github.com/users/simonw/orgs", "repos_url": "https://api.github.com/users/simonw/repos", "events_url": "https://api.github.com/users/simonw/events{/privacy}", "received_events_url": "https://api.github.com/users/simonw/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 727708732, "node_id": "MDU6TGFiZWw3Mjc3MDg3MzI=", "url": "https://api.github.com/repos/simonw/datasette/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}, {"id": 750789605, "node_id": "MDU6TGFiZWw3NTA3ODk2MDU=", "url": "https://api.github.com/repos/simonw/datasette/labels/documentation", "name": "documentation", "color": "fc8b0a", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2021-11-14T05:24:34Z", "updated_at": "2021-11-14T05:41:55Z", "closed_at": "2021-11-14T05:41:55Z", "author_association": "OWNER", "active_lock_reason": null, "body": "I had to cancel the 0.59.2 release because ReadTheDocs was failing to build the documentation.\r\n\r\nhttps://readthedocs.org/projects/datasette/builds/15268454/\r\n\r\n```\r\n /home/docs/checkouts/readthedocs.org/user_builds/datasette/envs/0.59.2/bin/python -m sphinx -T -b html -d _build/doctrees -D language=en . _build/html\r\nRunning Sphinx v1.8.5\r\nloading translations [en]... done\r\nmaking output directory...\r\nbuilding [mo]: targets for 0 po files that are out of date\r\nbuilding [html]: targets for 27 source files that are out of date\r\nupdating environment: 27 added, 0 changed, 0 removed\r\nreading sources... [  3%] authentication\r\n\r\nTraceback (most recent call last):\r\n  File \"/home/docs/checkouts/readthedocs.org/user_builds/datasette/envs/0.59.2/lib/python2.7/site-packages/sphinx/cmd/build.py\", line 304, in build_main\r\n    app.build(args.force_all, filenames)\r\n  File \"/home/docs/checkouts/readthedocs.org/user_builds/datasette/envs/0.59.2/lib/python2.7/site-packages/sphinx/application.py\", line 341, in build\r\n    self.builder.build_update()\r\n  File \"/home/docs/checkouts/readthedocs.org/user_builds/datasette/envs/0.59.2/lib/python2.7/site-packages/sphinx/builders/__init__.py\", line 347, in build_update\r\n    len(to_build))\r\n  File \"/home/docs/checkouts/readthedocs.org/user_builds/datasette/envs/0.59.2/lib/python2.7/site-packages/sphinx/builders/__init__.py\", line 360, in build\r\n    updated_docnames = set(self.read())\r\n  File \"/home/docs/checkouts/readthedocs.org/user_builds/datasette/envs/0.59.2/lib/python2.7/site-packages/sphinx/builders/__init__.py\", line 468, in read\r\n    self._read_serial(docnames)\r\n  File \"/home/docs/checkouts/readthedocs.org/user_builds/datasette/envs/0.59.2/lib/python2.7/site-packages/sphinx/builders/__init__.py\", line 490, in _read_serial\r\n    self.read_doc(docname)\r\n  File \"/home/docs/checkouts/readthedocs.org/user_builds/datasette/envs/0.59.2/lib/python2.7/site-packages/sphinx/builders/__init__.py\", line 534, in read_doc\r\n    doctree = read_doc(self.app, self.env, self.env.doc2path(docname))\r\n  File \"/home/docs/checkouts/readthedocs.org/user_builds/datasette/envs/0.59.2/lib/python2.7/site-packages/sphinx/io.py\", line 318, in read_doc\r\n    pub.publish()\r\n  File \"/home/docs/checkouts/readthedocs.org/user_builds/datasette/envs/0.59.2/lib/python2.7/site-packages/docutils/core.py\", line 219, in publish\r\n    self.apply_transforms()\r\n  File \"/home/docs/checkouts/readthedocs.org/user_builds/datasette/envs/0.59.2/lib/python2.7/site-packages/docutils/core.py\", line 200, in apply_transforms\r\n    self.document.transformer.apply_transforms()\r\n  File \"/home/docs/checkouts/readthedocs.org/user_builds/datasette/envs/0.59.2/lib/python2.7/site-packages/sphinx/transforms/__init__.py\", line 90, in apply_transforms\r\n    Transformer.apply_transforms(self)\r\n  File \"/home/docs/checkouts/readthedocs.org/user_builds/datasette/envs/0.59.2/lib/python2.7/site-packages/docutils/transforms/__init__.py\", line 171, in apply_transforms\r\n    transform.apply(**kwargs)\r\n  File \"/home/docs/checkouts/readthedocs.org/user_builds/datasette/envs/0.59.2/lib/python2.7/site-packages/sphinx/transforms/__init__.py\", line 245, in apply\r\n    apply_source_workaround(n)\r\n  File \"/home/docs/checkouts/readthedocs.org/user_builds/datasette/envs/0.59.2/lib/python2.7/site-packages/sphinx/util/nodes.py\", line 94, in apply_source_workaround\r\n    for classifier in reversed(node.parent.traverse(nodes.classifier)):\r\nTypeError: argument to reversed() must be a sequence\r\n\r\nException occurred:\r\n  File \"/home/docs/checkouts/readthedocs.org/user_builds/datasette/envs/0.59.2/lib/python2.7/site-packages/sphinx/util/nodes.py\", line 94, in apply_source_workaround\r\n    for classifier in reversed(node.parent.traverse(nodes.classifier)):\r\nTypeError: argument to reversed() must be a sequence\r\nThe full traceback has been saved in /tmp/sphinx-err-vkl0oE.log, if you want to report the issue to the developers.\r\nPlease also report this if it was a user error, so that a better error message can be provided next time.\r\nA bug report can be filed in the tracker at <https://github.com/sphinx-doc/sphinx/issues>. Thanks! \r\n```", "reactions": {"url": "https://api.github.com/repos/simonw/datasette/issues/1507/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/simonw/datasette/issues/1507/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/simonw/datasette/issues/1506", "repository_url": "https://api.github.com/repos/simonw/datasette", "labels_url": "https://api.github.com/repos/simonw/datasette/issues/1506/labels{/name}", "comments_url": "https://api.github.com/repos/simonw/datasette/issues/1506/comments", "events_url": "https://api.github.com/repos/simonw/datasette/issues/1506/events", "html_url": "https://github.com/simonw/datasette/issues/1506", "id": 1052826038, "node_id": "I_kwDOBm6k_c4-wNm2", "number": 1506, "title": "Columns beginning with an underscore do not facet correctly", "user": {"login": "simonw", "id": 9599, "node_id": "MDQ6VXNlcjk1OTk=", "avatar_url": "https://avatars.githubusercontent.com/u/9599?v=4", "gravatar_id": "", "url": "https://api.github.com/users/simonw", "html_url": "https://github.com/simonw", "followers_url": "https://api.github.com/users/simonw/followers", "following_url": "https://api.github.com/users/simonw/following{/other_user}", "gists_url": "https://api.github.com/users/simonw/gists{/gist_id}", "starred_url": "https://api.github.com/users/simonw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/simonw/subscriptions", "organizations_url": "https://api.github.com/users/simonw/orgs", "repos_url": "https://api.github.com/users/simonw/repos", "events_url": "https://api.github.com/users/simonw/events{/privacy}", "received_events_url": "https://api.github.com/users/simonw/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 727708732, "node_id": "MDU6TGFiZWw3Mjc3MDg3MzI=", "url": "https://api.github.com/repos/simonw/datasette/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2021-11-14T02:20:32Z", "updated_at": "2021-11-14T04:45:21Z", "closed_at": "2021-11-14T04:45:21Z", "author_association": "OWNER", "active_lock_reason": null, "body": "Datasette treats columns that start with an underscore as querystring parameters it should ignore!\r\n\r\n<img width=\"914\" alt=\"bchydro__item_versions__99_918_rows\" src=\"https://user-images.githubusercontent.com/9599/141664864-119990d5-42b2-47f7-91bd-09a74a288af9.png\">\r\n\r\nDiscovered in https://github.com/simonw/git-history/issues/14#issuecomment-968192464", "reactions": {"url": "https://api.github.com/repos/simonw/datasette/issues/1506/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/simonw/datasette/issues/1506/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/simonw/datasette/issues/1503", "repository_url": "https://api.github.com/repos/simonw/datasette", "labels_url": "https://api.github.com/repos/simonw/datasette/issues/1503/labels{/name}", "comments_url": "https://api.github.com/repos/simonw/datasette/issues/1503/comments", "events_url": "https://api.github.com/repos/simonw/datasette/issues/1503/events", "html_url": "https://github.com/simonw/datasette/issues/1503", "id": 1050163432, "node_id": "I_kwDOBm6k_c4-mDjo", "number": 1503, "title": "`?_nocol=` removes that column from the filter interface", "user": {"login": "simonw", "id": 9599, "node_id": "MDQ6VXNlcjk1OTk=", "avatar_url": "https://avatars.githubusercontent.com/u/9599?v=4", "gravatar_id": "", "url": "https://api.github.com/users/simonw", "html_url": "https://github.com/simonw", "followers_url": "https://api.github.com/users/simonw/followers", "following_url": "https://api.github.com/users/simonw/following{/other_user}", "gists_url": "https://api.github.com/users/simonw/gists{/gist_id}", "starred_url": "https://api.github.com/users/simonw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/simonw/subscriptions", "organizations_url": "https://api.github.com/users/simonw/orgs", "repos_url": "https://api.github.com/users/simonw/repos", "events_url": "https://api.github.com/users/simonw/events{/privacy}", "received_events_url": "https://api.github.com/users/simonw/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 727708732, "node_id": "MDU6TGFiZWw3Mjc3MDg3MzI=", "url": "https://api.github.com/repos/simonw/datasette/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2021-11-10T18:22:50Z", "updated_at": "2021-11-14T05:08:27Z", "closed_at": "2021-11-14T04:53:07Z", "author_association": "OWNER", "active_lock_reason": null, "body": "e.g. on https://latest.datasette.io/fixtures/sortable?_nocol=sortable\r\n\r\n<img width=\"723\" alt=\"fixtures__sortable__201_rows\" src=\"https://user-images.githubusercontent.com/9599/141170777-733b1ab2-c153-4276-8ba2-d975ed84156e.png\">\r\n\r\nThis causes weird behaviour when you e.g. facet by a hidden column, since selecting facets and then re-submitting the form will clear the selected filter.\r\n\r\n![nocol-bug](https://user-images.githubusercontent.com/9599/141171135-aded71d1-a4cb-4b7f-a4ea-26828fa98906.gif)\r\n", "reactions": {"url": "https://api.github.com/repos/simonw/datasette/issues/1503/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/simonw/datasette/issues/1503/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/simonw/datasette/issues/1497", "repository_url": "https://api.github.com/repos/simonw/datasette", "labels_url": "https://api.github.com/repos/simonw/datasette/issues/1497/labels{/name}", "comments_url": "https://api.github.com/repos/simonw/datasette/issues/1497/comments", "events_url": "https://api.github.com/repos/simonw/datasette/issues/1497/events", "html_url": "https://github.com/simonw/datasette/issues/1497", "id": 1034535001, "node_id": "I_kwDOBm6k_c49qcBZ", "number": 1497, "title": "Publish to Docker Hub failing with \"libcrypt.so.1: cannot open shared object file\"", "user": {"login": "simonw", "id": 9599, "node_id": "MDQ6VXNlcjk1OTk=", "avatar_url": "https://avatars.githubusercontent.com/u/9599?v=4", "gravatar_id": "", "url": "https://api.github.com/users/simonw", "html_url": "https://github.com/simonw", "followers_url": "https://api.github.com/users/simonw/followers", "following_url": "https://api.github.com/users/simonw/following{/other_user}", "gists_url": "https://api.github.com/users/simonw/gists{/gist_id}", "starred_url": "https://api.github.com/users/simonw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/simonw/subscriptions", "organizations_url": "https://api.github.com/users/simonw/orgs", "repos_url": "https://api.github.com/users/simonw/repos", "events_url": "https://api.github.com/users/simonw/events{/privacy}", "received_events_url": "https://api.github.com/users/simonw/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 727708732, "node_id": "MDU6TGFiZWw3Mjc3MDg3MzI=", "url": "https://api.github.com/repos/simonw/datasette/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}, {"id": 993222446, "node_id": "MDU6TGFiZWw5OTMyMjI0NDY=", "url": "https://api.github.com/repos/simonw/datasette/labels/ci", "name": "ci", "color": "c5daf9", "default": false, "description": ""}, {"id": 3083290624, "node_id": "MDU6TGFiZWwzMDgzMjkwNjI0", "url": "https://api.github.com/repos/simonw/datasette/labels/docker", "name": "docker", "color": "928ED5", "default": false, "description": "The official Docker image, plus other things related to running Datasette on Docker"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 18, "created_at": "2021-10-24T22:57:07Z", "updated_at": "2023-01-18T17:13:45Z", "closed_at": "2021-10-24T23:36:55Z", "author_association": "OWNER", "active_lock_reason": null, "body": "This means the Datasette 0.59.1 release has not been published to Docker Hub.\r\n\r\nHere's where that failed: https://github.com/simonw/datasette/runs/3991043374?check_suite_focus=true\r\n\r\n```\r\nPreparing to unpack .../libc6_2.32-4_amd64.deb ...\r\ndebconf: unable to initialize frontend: Dialog\r\ndebconf: (TERM is not set, so the dialog frontend is not usable.)\r\ndebconf: falling back to frontend: Readline\r\ndebconf: unable to initialize frontend: Readline\r\ndebconf: (Can't locate Term/ReadLine.pm in @INC (you may need to install the Term::ReadLine module) (@INC contains: /etc/perl /usr/local/lib/x86_64-linux-gnu/perl/5.28.1 /usr/local/share/perl/5.28.1 /usr/lib/x86_64-linux-gnu/perl5/5.28 /usr/share/perl5 /usr/lib/x86_64-linux-gnu/perl/5.28 /usr/share/perl/5.28 /usr/local/lib/site_perl /usr/lib/x86_64-linux-gnu/perl-base) at /usr/share/perl5/Debconf/FrontEnd/Readline.pm line 7.)\r\ndebconf: falling back to frontend: Teletype\r\nChecking for services that may need to be restarted...\r\nChecking init scripts...\r\nUnpacking libc6:amd64 (2.32-4) over (2.28-10) ...\r\nSetting up libc6:amd64 (2.32-4) ...\r\n/usr/bin/perl: error while loading shared libraries: libcrypt.so.1: cannot open shared object file: No such file or directory\r\ndpkg: error processing package libc6:amd64 (--configure):\r\n installed libc6:amd64 package post-installation script subprocess returned error exit status 127\r\nErrors were encountered while processing:\r\n libc6:amd64\r\nE: Sub-process /usr/bin/dpkg returned an error code (1)\r\nThe command '/bin/sh -c apt-get update &&     apt-get -y --no-install-recommends install software-properties-common &&     add-apt-repository \"deb http://httpredir.debian.org/debian sid main\" &&     apt-get update &&     apt-get -t sid install -y --no-install-recommends libsqlite3-mod-spatialite &&     apt-get remove -y software-properties-common &&     apt clean &&     rm -rf /var/lib/apt &&     rm -rf /var/lib/dpkg/info/*' returned a non-zero code: 100\r\n```\r\nSame problem when I attempted to publish using the \"Push specific Docker tag\" workflow: https://github.com/simonw/datasette/runs/3991059912?check_suite_focus=true", "reactions": {"url": "https://api.github.com/repos/simonw/datasette/issues/1497/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/simonw/datasette/issues/1497/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/simonw/datasette/issues/1488", "repository_url": "https://api.github.com/repos/simonw/datasette", "labels_url": "https://api.github.com/repos/simonw/datasette/issues/1488/labels{/name}", "comments_url": "https://api.github.com/repos/simonw/datasette/issues/1488/comments", "events_url": "https://api.github.com/repos/simonw/datasette/issues/1488/events", "html_url": "https://github.com/simonw/datasette/issues/1488", "id": 1025754125, "node_id": "I_kwDOBm6k_c49I8QN", "number": 1488, "title": "Upgrade to httpx 0.20.0 (request() got an unexpected keyword argument 'allow_redirects')", "user": {"login": "simonw", "id": 9599, "node_id": "MDQ6VXNlcjk1OTk=", "avatar_url": "https://avatars.githubusercontent.com/u/9599?v=4", "gravatar_id": "", "url": "https://api.github.com/users/simonw", "html_url": "https://github.com/simonw", "followers_url": "https://api.github.com/users/simonw/followers", "following_url": "https://api.github.com/users/simonw/following{/other_user}", "gists_url": "https://api.github.com/users/simonw/gists{/gist_id}", "starred_url": "https://api.github.com/users/simonw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/simonw/subscriptions", "organizations_url": "https://api.github.com/users/simonw/orgs", "repos_url": "https://api.github.com/users/simonw/repos", "events_url": "https://api.github.com/users/simonw/events{/privacy}", "received_events_url": "https://api.github.com/users/simonw/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 727708732, "node_id": "MDU6TGFiZWw3Mjc3MDg3MzI=", "url": "https://api.github.com/repos/simonw/datasette/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2021-10-13T22:37:22Z", "updated_at": "2021-10-14T18:03:45Z", "closed_at": "2021-10-14T18:03:45Z", "author_association": "OWNER", "active_lock_reason": null, "body": "This is caused by a change made to `httpx` in https://github.com/encode/httpx/releases/tag/0.20.0", "reactions": {"url": "https://api.github.com/repos/simonw/datasette/issues/1488/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/simonw/datasette/issues/1488/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/simonw/datasette/issues/1483", "repository_url": "https://api.github.com/repos/simonw/datasette", "labels_url": "https://api.github.com/repos/simonw/datasette/issues/1483/labels{/name}", "comments_url": "https://api.github.com/repos/simonw/datasette/issues/1483/comments", "events_url": "https://api.github.com/repos/simonw/datasette/issues/1483/events", "html_url": "https://github.com/simonw/datasette/issues/1483", "id": 1021849766, "node_id": "I_kwDOBm6k_c486DCm", "number": 1483, "title": "Running a search on page 2 of results should not preserve ?_next=", "user": {"login": "simonw", "id": 9599, "node_id": "MDQ6VXNlcjk1OTk=", "avatar_url": "https://avatars.githubusercontent.com/u/9599?v=4", "gravatar_id": "", "url": "https://api.github.com/users/simonw", "html_url": "https://github.com/simonw", "followers_url": "https://api.github.com/users/simonw/followers", "following_url": "https://api.github.com/users/simonw/following{/other_user}", "gists_url": "https://api.github.com/users/simonw/gists{/gist_id}", "starred_url": "https://api.github.com/users/simonw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/simonw/subscriptions", "organizations_url": "https://api.github.com/users/simonw/orgs", "repos_url": "https://api.github.com/users/simonw/repos", "events_url": "https://api.github.com/users/simonw/events{/privacy}", "received_events_url": "https://api.github.com/users/simonw/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 727708732, "node_id": "MDU6TGFiZWw3Mjc3MDg3MzI=", "url": "https://api.github.com/repos/simonw/datasette/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2021-10-10T01:18:12Z", "updated_at": "2021-10-13T21:08:10Z", "closed_at": "2021-10-13T21:08:10Z", "author_association": "OWNER", "active_lock_reason": null, "body": "Reported by @eigenfoo in https://github.com/simonw/datasette/issues/1470", "reactions": {"url": "https://api.github.com/repos/simonw/datasette/issues/1483/reactions", "total_count": 2, "+1": 1, "-1": 0, "laugh": 0, "hooray": 1, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/simonw/datasette/issues/1483/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/simonw/datasette/issues/1470", "repository_url": "https://api.github.com/repos/simonw/datasette", "labels_url": "https://api.github.com/repos/simonw/datasette/issues/1470/labels{/name}", "comments_url": "https://api.github.com/repos/simonw/datasette/issues/1470/comments", "events_url": "https://api.github.com/repos/simonw/datasette/issues/1470/events", "html_url": "https://github.com/simonw/datasette/issues/1470", "id": 995098231, "node_id": "MDU6SXNzdWU5OTUwOTgyMzE=", "number": 1470, "title": "?_sort=rowid with _next= returns error", "user": {"login": "eigenfoo", "id": 19851673, "node_id": "MDQ6VXNlcjE5ODUxNjcz", "avatar_url": "https://avatars.githubusercontent.com/u/19851673?v=4", "gravatar_id": "", "url": "https://api.github.com/users/eigenfoo", "html_url": "https://github.com/eigenfoo", "followers_url": "https://api.github.com/users/eigenfoo/followers", "following_url": "https://api.github.com/users/eigenfoo/following{/other_user}", "gists_url": "https://api.github.com/users/eigenfoo/gists{/gist_id}", "starred_url": "https://api.github.com/users/eigenfoo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/eigenfoo/subscriptions", "organizations_url": "https://api.github.com/users/eigenfoo/orgs", "repos_url": "https://api.github.com/users/eigenfoo/repos", "events_url": "https://api.github.com/users/eigenfoo/events{/privacy}", "received_events_url": "https://api.github.com/users/eigenfoo/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 727708732, "node_id": "MDU6TGFiZWw3Mjc3MDg3MzI=", "url": "https://api.github.com/repos/simonw/datasette/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2021-09-13T16:36:15Z", "updated_at": "2021-10-18T19:30:15Z", "closed_at": "2021-10-10T01:15:03Z", "author_association": "NONE", "active_lock_reason": null, "body": "For example:\r\n\r\n- Go to https://cryptics.eigenfoo.xyz/clues/clues?_next=100 (this is the second page of results in a Datasette site)\r\n- Search anything using the FTS search bar. For example, searching for `hello` will take you to https://cryptics.eigenfoo.xyz/clues/clues?_search=hello&_sort=rowid&_next=100\r\n- A `500 Error: list index out of range` is raised.\r\n\r\nThis is because the search URL includes the `&_next=100` UTM parameter, carried over from where the FTS search was run. However, there isn't a second page in the search results, so a `list index out of range` error is raised. You can confirm that removing this UTM parameter from the URL returns the appropriate search results.\r\n\r\nThe FTS search request should strip any `_next` UTM parameter.\r\n\r\n---\r\n\r\n```bash\r\ndatasette, version 0.58.1\r\nsqlite-utils, version 3.17\r\n```", "reactions": {"url": "https://api.github.com/repos/simonw/datasette/issues/1470/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/simonw/datasette/issues/1470/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/simonw/datasette/issues/1469", "repository_url": "https://api.github.com/repos/simonw/datasette", "labels_url": "https://api.github.com/repos/simonw/datasette/issues/1469/labels{/name}", "comments_url": "https://api.github.com/repos/simonw/datasette/issues/1469/comments", "events_url": "https://api.github.com/repos/simonw/datasette/issues/1469/events", "html_url": "https://github.com/simonw/datasette/issues/1469", "id": 994450961, "node_id": "MDU6SXNzdWU5OTQ0NTA5NjE=", "number": 1469, "title": "Column cog shows \"facet by this\" when already default faceted", "user": {"login": "simonw", "id": 9599, "node_id": "MDQ6VXNlcjk1OTk=", "avatar_url": "https://avatars.githubusercontent.com/u/9599?v=4", "gravatar_id": "", "url": "https://api.github.com/users/simonw", "html_url": "https://github.com/simonw", "followers_url": "https://api.github.com/users/simonw/followers", "following_url": "https://api.github.com/users/simonw/following{/other_user}", "gists_url": "https://api.github.com/users/simonw/gists{/gist_id}", "starred_url": "https://api.github.com/users/simonw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/simonw/subscriptions", "organizations_url": "https://api.github.com/users/simonw/orgs", "repos_url": "https://api.github.com/users/simonw/repos", "events_url": "https://api.github.com/users/simonw/events{/privacy}", "received_events_url": "https://api.github.com/users/simonw/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 727708732, "node_id": "MDU6TGFiZWw3Mjc3MDg3MzI=", "url": "https://api.github.com/repos/simonw/datasette/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}, {"id": 1382668283, "node_id": "MDU6TGFiZWwxMzgyNjY4Mjgz", "url": "https://api.github.com/repos/simonw/datasette/labels/faceting", "name": "faceting", "color": "71dd93", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2021-09-13T04:51:26Z", "updated_at": "2021-10-13T21:20:07Z", "closed_at": "2021-10-13T21:20:07Z", "author_association": "OWNER", "active_lock_reason": null, "body": "e.g. on https://covid-19.datasettes.com/covid/economist_excess_deaths\r\n\r\n<img width=\"782\" alt=\"covid__economist_excess_deaths__17_576_rows_where_sorted_by_end_date_descending_and_New_Issue_\u00b7_simonw_datasette\" src=\"https://user-images.githubusercontent.com/9599/133025772-beaf055e-374f-4180-aad3-bb0215e8aaf3.png\">\r\n\r\nBut if you add `?_facet=country` to the URL that goes away: https://covid-19.datasettes.com/covid/economist_excess_deaths?_facet_size=5&_facet=country\r\n\r\nThe logic that decides if the \"Facet by this\" item is shown does not take default `metadata.json` facets into account.", "reactions": {"url": "https://api.github.com/repos/simonw/datasette/issues/1469/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/simonw/datasette/issues/1469/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/simonw/datasette/issues/1421", "repository_url": "https://api.github.com/repos/simonw/datasette", "labels_url": "https://api.github.com/repos/simonw/datasette/issues/1421/labels{/name}", "comments_url": "https://api.github.com/repos/simonw/datasette/issues/1421/comments", "events_url": "https://api.github.com/repos/simonw/datasette/issues/1421/events", "html_url": "https://github.com/simonw/datasette/issues/1421", "id": 959999095, "node_id": "MDU6SXNzdWU5NTk5OTkwOTU=", "number": 1421, "title": "\"Query parameters\" form shows wrong input fields if query contains \"03:31\" style times", "user": {"login": "j4mie", "id": 6988, "node_id": "MDQ6VXNlcjY5ODg=", "avatar_url": "https://avatars.githubusercontent.com/u/6988?v=4", "gravatar_id": "", "url": "https://api.github.com/users/j4mie", "html_url": "https://github.com/j4mie", "followers_url": "https://api.github.com/users/j4mie/followers", "following_url": "https://api.github.com/users/j4mie/following{/other_user}", "gists_url": "https://api.github.com/users/j4mie/gists{/gist_id}", "starred_url": "https://api.github.com/users/j4mie/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/j4mie/subscriptions", "organizations_url": "https://api.github.com/users/j4mie/orgs", "repos_url": "https://api.github.com/users/j4mie/repos", "events_url": "https://api.github.com/users/j4mie/events{/privacy}", "received_events_url": "https://api.github.com/users/j4mie/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 727708732, "node_id": "MDU6TGFiZWw3Mjc3MDg3MzI=", "url": "https://api.github.com/repos/simonw/datasette/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}, {"id": 2306869352, "node_id": "MDU6TGFiZWwyMzA2ODY5MzUy", "url": "https://api.github.com/repos/simonw/datasette/labels/blocked", "name": "blocked", "color": "c8acef", "default": false, "description": "Awaiting something else to happen first"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 11, "created_at": "2021-08-04T07:29:04Z", "updated_at": "2021-08-09T03:41:07Z", "closed_at": "2021-08-09T03:33:02Z", "author_association": "NONE", "active_lock_reason": null, "body": "Datasette version `0.58.1`.\r\n\r\nI'm guessing this is a bug in the code that looks for `:param`-style query parameters..\r\n\r\n<img width=\"543\" alt=\"image\" src=\"https://user-images.githubusercontent.com/6988/128139832-ef9c5291-f3d7-4402-8625-b45d26b4e5bc.png\">\r\n", "reactions": {"url": "https://api.github.com/repos/simonw/datasette/issues/1421/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/simonw/datasette/issues/1421/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/simonw/datasette/issues/1411", "repository_url": "https://api.github.com/repos/simonw/datasette", "labels_url": "https://api.github.com/repos/simonw/datasette/issues/1411/labels{/name}", "comments_url": "https://api.github.com/repos/simonw/datasette/issues/1411/comments", "events_url": "https://api.github.com/repos/simonw/datasette/issues/1411/events", "html_url": "https://github.com/simonw/datasette/issues/1411", "id": 957345476, "node_id": "MDU6SXNzdWU5NTczNDU0NzY=", "number": 1411, "title": "Canned query ?sql= is pointlessly echoed in query string starting from hidden mode", "user": {"login": "simonw", "id": 9599, "node_id": "MDQ6VXNlcjk1OTk=", "avatar_url": "https://avatars.githubusercontent.com/u/9599?v=4", "gravatar_id": "", "url": "https://api.github.com/users/simonw", "html_url": "https://github.com/simonw", "followers_url": "https://api.github.com/users/simonw/followers", "following_url": "https://api.github.com/users/simonw/following{/other_user}", "gists_url": "https://api.github.com/users/simonw/gists{/gist_id}", "starred_url": "https://api.github.com/users/simonw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/simonw/subscriptions", "organizations_url": "https://api.github.com/users/simonw/orgs", "repos_url": "https://api.github.com/users/simonw/repos", "events_url": "https://api.github.com/users/simonw/events{/privacy}", "received_events_url": "https://api.github.com/users/simonw/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 727708732, "node_id": "MDU6TGFiZWw3Mjc3MDg3MzI=", "url": "https://api.github.com/repos/simonw/datasette/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2021-08-01T00:17:13Z", "updated_at": "2021-08-01T03:27:30Z", "closed_at": "2021-08-01T00:58:17Z", "author_association": "OWNER", "active_lock_reason": null, "body": "Example: https://latest.datasette.io/fixtures/neighborhood_search?text=cork&_hide_sql=1\r\n\r\nSubmitting that form again results in this:\r\n\r\nhttps://latest.datasette.io/fixtures/neighborhood_search?sql=%0D%0Aselect+neighborhood%2C+facet_cities.name%2C+state%0D%0Afrom+facetable%0D%0A++++join+facet_cities%0D%0A++++++++on+facetable.city_id+%3D+facet_cities.id%0D%0Awhere+neighborhood+like+%27%25%27+%7C%7C+%3Atext+%7C%7C+%27%25%27%0D%0Aorder+by+neighborhood%3B%0D%0A&_hide_sql=1&text=cork\r\n\r\nBecause the HTML on https://latest.datasette.io/fixtures/neighborhood_search?text=cork&_hide_sql=1 includes this:\r\n\r\n```html\r\n    <h3>Custom SQL query returning 1 row <span class=\"show-hide-sql\">(<a href=\"/fixtures/neighborhood_search?text=cork\">show</a>)</span></h3>\r\n    \r\n    \r\n        <input type=\"hidden\" name=\"sql\" value=\"\r\nselect neighborhood, facet_cities.name, state\r\nfrom facetable\r\n    join facet_cities\r\n        on facetable.city_id = facet_cities.id\r\nwhere neighborhood like &#39;%&#39; || :text || &#39;%&#39;\r\norder by neighborhood;\r\n\">\r\n        <input type=\"hidden\" name=\"_hide_sql\" value=\"1\">\r\n```", "reactions": {"url": "https://api.github.com/repos/simonw/datasette/issues/1411/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/simonw/datasette/issues/1411/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/simonw/datasette/issues/1407", "repository_url": "https://api.github.com/repos/simonw/datasette", "labels_url": "https://api.github.com/repos/simonw/datasette/issues/1407/labels{/name}", "comments_url": "https://api.github.com/repos/simonw/datasette/issues/1407/comments", "events_url": "https://api.github.com/repos/simonw/datasette/issues/1407/events", "html_url": "https://github.com/simonw/datasette/issues/1407", "id": 957298475, "node_id": "MDU6SXNzdWU5NTcyOTg0NzU=", "number": 1407, "title": "OSError: AF_UNIX path too long in ds_unix_domain_socket_server", "user": {"login": "simonw", "id": 9599, "node_id": "MDQ6VXNlcjk1OTk=", "avatar_url": "https://avatars.githubusercontent.com/u/9599?v=4", "gravatar_id": "", "url": "https://api.github.com/users/simonw", "html_url": "https://github.com/simonw", "followers_url": "https://api.github.com/users/simonw/followers", "following_url": "https://api.github.com/users/simonw/following{/other_user}", "gists_url": "https://api.github.com/users/simonw/gists{/gist_id}", "starred_url": "https://api.github.com/users/simonw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/simonw/subscriptions", "organizations_url": "https://api.github.com/users/simonw/orgs", "repos_url": "https://api.github.com/users/simonw/repos", "events_url": "https://api.github.com/users/simonw/events{/privacy}", "received_events_url": "https://api.github.com/users/simonw/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 727708732, "node_id": "MDU6TGFiZWw3Mjc3MDg3MzI=", "url": "https://api.github.com/repos/simonw/datasette/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}, {"id": 2092302176, "node_id": "MDU6TGFiZWwyMDkyMzAyMTc2", "url": "https://api.github.com/repos/simonw/datasette/labels/tests", "name": "tests", "color": "ecc7fc", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2021-07-31T18:36:06Z", "updated_at": "2021-07-31T19:03:44Z", "closed_at": "2021-07-31T19:03:44Z", "author_association": "OWNER", "active_lock_reason": null, "body": "Got this exception while working on #1406.\r\n\r\n```\r\n    @pytest.fixture(scope=\"session\")\r\n    def ds_unix_domain_socket_server(tmp_path_factory):\r\n        socket_folder = tmp_path_factory.mktemp(\"uds\")\r\n        uds = str(socket_folder / \"datasette.sock\")\r\n        ds_proc = subprocess.Popen(\r\n            [\"datasette\", \"--memory\", \"--uds\", uds],\r\n            stdout=subprocess.PIPE,\r\n            stderr=subprocess.STDOUT,\r\n            cwd=tempfile.gettempdir(),\r\n        )\r\n        # Give the server time to start\r\n        time.sleep(1.5)\r\n        # Check it started successfully\r\n>       assert not ds_proc.poll(), ds_proc.stdout.read().decode(\"utf-8\")\r\nE       AssertionError: INFO:     Started server process [48453]\r\nE         INFO:     Waiting for application startup.\r\nE         INFO:     Application startup complete.\r\nE         Traceback (most recent call last):\r\nE           File \"/Users/simon/.local/share/virtualenvs/datasette-AWNrQs95/bin/datasette\", line 33, in <module>\r\nE             sys.exit(load_entry_point('datasette', 'console_scripts', 'datasette')())\r\nE           File \"/Users/simon/.local/share/virtualenvs/datasette-AWNrQs95/lib/python3.8/site-packages/click/core.py\", line 1137, in __call__\r\nE             return self.main(*args, **kwargs)\r\nE           File \"/Users/simon/.local/share/virtualenvs/datasette-AWNrQs95/lib/python3.8/site-packages/click/core.py\", line 1062, in main\r\nE             rv = self.invoke(ctx)\r\nE           File \"/Users/simon/.local/share/virtualenvs/datasette-AWNrQs95/lib/python3.8/site-packages/click/core.py\", line 1668, in invoke\r\nE             return _process_result(sub_ctx.command.invoke(sub_ctx))\r\nE           File \"/Users/simon/.local/share/virtualenvs/datasette-AWNrQs95/lib/python3.8/site-packages/click/core.py\", line 1404, in invoke\r\nE             return ctx.invoke(self.callback, **ctx.params)\r\nE           File \"/Users/simon/.local/share/virtualenvs/datasette-AWNrQs95/lib/python3.8/site-packages/click/core.py\", line 763, in invoke\r\nE             return __callback(*args, **kwargs)\r\nE           File \"/Users/simon/Dropbox/Development/datasette/datasette/cli.py\", line 583, in serve\r\nE             uvicorn.run(ds.app(), **uvicorn_kwargs)\r\nE           File \"/Users/simon/.local/share/virtualenvs/datasette-AWNrQs95/lib/python3.8/site-packages/uvicorn/main.py\", line 393, in run\r\nE             server.run()\r\nE           File \"/Users/simon/.local/share/virtualenvs/datasette-AWNrQs95/lib/python3.8/site-packages/uvicorn/server.py\", line 50, in run\r\nE             loop.run_until_complete(self.serve(sockets=sockets))\r\nE           File \"/Users/simon/.pyenv/versions/3.8.2/lib/python3.8/asyncio/base_events.py\", line 616, in run_until_complete\r\nE             return future.result()\r\nE           File \"/Users/simon/.local/share/virtualenvs/datasette-AWNrQs95/lib/python3.8/site-packages/uvicorn/server.py\", line 67, in serve\r\nE             await self.startup(sockets=sockets)\r\nE           File \"/Users/simon/.local/share/virtualenvs/datasette-AWNrQs95/lib/python3.8/site-packages/uvicorn/server.py\", line 133, in startup\r\nE             server = await asyncio.start_unix_server(\r\nE           File \"/Users/simon/.pyenv/versions/3.8.2/lib/python3.8/asyncio/streams.py\", line 132, in start_unix_server\r\nE             return await loop.create_unix_server(factory, path, **kwds)\r\nE           File \"/Users/simon/.pyenv/versions/3.8.2/lib/python3.8/asyncio/unix_events.py\", line 296, in create_unix_server\r\nE             sock.bind(path)\r\nE         OSError: AF_UNIX path too long\r\nE         \r\nE       assert not 1\r\nE        +  where 1 = <bound method Popen.poll of <subprocess.Popen object at 0x106924af0>>()\r\nE        +    where <bound method Popen.poll of <subprocess.Popen object at 0x106924af0>> = <subprocess.Popen object at 0x106924af0>.poll\r\n```", "reactions": {"url": "https://api.github.com/repos/simonw/datasette/issues/1407/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/simonw/datasette/issues/1407/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/simonw/datasette/issues/1406", "repository_url": "https://api.github.com/repos/simonw/datasette", "labels_url": "https://api.github.com/repos/simonw/datasette/issues/1406/labels{/name}", "comments_url": "https://api.github.com/repos/simonw/datasette/issues/1406/comments", "events_url": "https://api.github.com/repos/simonw/datasette/issues/1406/events", "html_url": "https://github.com/simonw/datasette/issues/1406", "id": 956303470, "node_id": "MDU6SXNzdWU5NTYzMDM0NzA=", "number": 1406, "title": "Tests failing with FileNotFoundError in runner.isolated_filesystem", "user": {"login": "simonw", "id": 9599, "node_id": "MDQ6VXNlcjk1OTk=", "avatar_url": "https://avatars.githubusercontent.com/u/9599?v=4", "gravatar_id": "", "url": "https://api.github.com/users/simonw", "html_url": "https://github.com/simonw", "followers_url": "https://api.github.com/users/simonw/followers", "following_url": "https://api.github.com/users/simonw/following{/other_user}", "gists_url": "https://api.github.com/users/simonw/gists{/gist_id}", "starred_url": "https://api.github.com/users/simonw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/simonw/subscriptions", "organizations_url": "https://api.github.com/users/simonw/orgs", "repos_url": "https://api.github.com/users/simonw/repos", "events_url": "https://api.github.com/users/simonw/events{/privacy}", "received_events_url": "https://api.github.com/users/simonw/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 727708732, "node_id": "MDU6TGFiZWw3Mjc3MDg3MzI=", "url": "https://api.github.com/repos/simonw/datasette/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}, {"id": 993222446, "node_id": "MDU6TGFiZWw5OTMyMjI0NDY=", "url": "https://api.github.com/repos/simonw/datasette/labels/ci", "name": "ci", "color": "c5daf9", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 8, "created_at": "2021-07-30T00:39:00Z", "updated_at": "2021-07-31T18:56:35Z", "closed_at": "2021-07-31T18:56:35Z", "author_association": "OWNER", "active_lock_reason": null, "body": "e.g. https://github.com/simonw/datasette/runs/3197141955\r\n\r\nI've seen this error before, but I don't yet have a good workaround for it.\r\n\r\n```\r\n    @contextlib.contextmanager\r\n    def isolated_filesystem(\r\n        self, temp_dir: t.Optional[t.Union[str, os.PathLike]] = None\r\n    ) -> t.Iterator[str]:\r\n        \"\"\"A context manager that creates a temporary directory and\r\n        changes the current working directory to it. This isolates tests\r\n        that affect the contents of the CWD to prevent them from\r\n        interfering with each other.\r\n    \r\n        :param temp_dir: Create the temporary directory under this\r\n            directory. If given, the created directory is not removed\r\n            when exiting.\r\n    \r\n        .. versionchanged:: 8.0\r\n            Added the ``temp_dir`` parameter.\r\n        \"\"\"\r\n>       cwd = os.getcwd()\r\nE       FileNotFoundError: [Errno 2] No such file or directory\r\n\r\n/opt/hostedtoolcache/Python/3.6.14/x64/lib/python3.6/site-packages/click/testing.py:466: FileNotFoundError\r\n=========================== short test summary info ============================\r\nFAILED tests/test_publish_cloudrun.py::test_publish_cloudrun_apt_get_install\r\nFAILED tests/test_publish_cloudrun.py::test_publish_cloudrun_extra_options[---setting force_https_urls on]\r\nFAILED tests/test_publish_cloudrun.py::test_publish_cloudrun_extra_options[--setting base_url /foo---setting base_url /foo --setting force_https_urls on]\r\nFAILED tests/test_publish_cloudrun.py::test_publish_cloudrun_extra_options[--setting force_https_urls off---setting force_https_urls off]\r\nFAILED tests/test_publish_heroku.py::test_publish_heroku_requires_heroku - Fi...\r\nFAILED tests/test_publish_heroku.py::test_publish_heroku_installs_plugin - Fi...\r\nFAILED tests/test_publish_heroku.py::test_publish_heroku - FileNotFoundError:...\r\nFAILED tests/test_publish_heroku.py::test_publish_heroku_plugin_secrets - Fil...\r\n================== 8 failed, 920 passed in 188.22s (0:03:08) ===================\r\n```", "reactions": {"url": "https://api.github.com/repos/simonw/datasette/issues/1406/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/simonw/datasette/issues/1406/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/simonw/datasette/issues/1396", "repository_url": "https://api.github.com/repos/simonw/datasette", "labels_url": "https://api.github.com/repos/simonw/datasette/issues/1396/labels{/name}", "comments_url": "https://api.github.com/repos/simonw/datasette/issues/1396/comments", "events_url": "https://api.github.com/repos/simonw/datasette/issues/1396/events", "html_url": "https://github.com/simonw/datasette/issues/1396", "id": 944903881, "node_id": "MDU6SXNzdWU5NDQ5MDM4ODE=", "number": 1396, "title": "\"invalid reference format\" publishing Docker image", "user": {"login": "simonw", "id": 9599, "node_id": "MDQ6VXNlcjk1OTk=", "avatar_url": "https://avatars.githubusercontent.com/u/9599?v=4", "gravatar_id": "", "url": "https://api.github.com/users/simonw", "html_url": "https://github.com/simonw", "followers_url": "https://api.github.com/users/simonw/followers", "following_url": "https://api.github.com/users/simonw/following{/other_user}", "gists_url": "https://api.github.com/users/simonw/gists{/gist_id}", "starred_url": "https://api.github.com/users/simonw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/simonw/subscriptions", "organizations_url": "https://api.github.com/users/simonw/orgs", "repos_url": "https://api.github.com/users/simonw/repos", "events_url": "https://api.github.com/users/simonw/events{/privacy}", "received_events_url": "https://api.github.com/users/simonw/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 727708732, "node_id": "MDU6TGFiZWw3Mjc3MDg3MzI=", "url": "https://api.github.com/repos/simonw/datasette/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}, {"id": 2308886390, "node_id": "MDU6TGFiZWwyMzA4ODg2Mzkw", "url": "https://api.github.com/repos/simonw/datasette/labels/ops", "name": "ops", "color": "c2e2fc", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 9, "created_at": "2021-07-15T01:02:07Z", "updated_at": "2021-10-19T08:10:26Z", "closed_at": "2021-07-15T19:47:25Z", "author_association": "OWNER", "active_lock_reason": null, "body": "Error ocurred at the end of the publish flow for Datasette 0.58: https://github.com/simonw/datasette/runs/3072216421\r\n```\r\nRemoving intermediate container cf32b9440907\r\n ---> dfd6985b2afc\r\nSuccessfully built dfd6985b2afc\r\nSuccessfully tagged ***/datasette:0.58\r\ninvalid reference format\r\nError: Process completed with exit code 1.\r\n```", "reactions": {"url": "https://api.github.com/repos/simonw/datasette/issues/1396/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/simonw/datasette/issues/1396/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/simonw/datasette/issues/1387", "repository_url": "https://api.github.com/repos/simonw/datasette", "labels_url": "https://api.github.com/repos/simonw/datasette/issues/1387/labels{/name}", "comments_url": "https://api.github.com/repos/simonw/datasette/issues/1387/comments", "events_url": "https://api.github.com/repos/simonw/datasette/issues/1387/events", "html_url": "https://github.com/simonw/datasette/issues/1387", "id": 935930820, "node_id": "MDU6SXNzdWU5MzU5MzA4MjA=", "number": 1387, "title": "absolute_url() behind a proxy assembles incorrect http://127.0.0.1:8001/ URLs", "user": {"login": "simonw", "id": 9599, "node_id": "MDQ6VXNlcjk1OTk=", "avatar_url": "https://avatars.githubusercontent.com/u/9599?v=4", "gravatar_id": "", "url": "https://api.github.com/users/simonw", "html_url": "https://github.com/simonw", "followers_url": "https://api.github.com/users/simonw/followers", "following_url": "https://api.github.com/users/simonw/following{/other_user}", "gists_url": "https://api.github.com/users/simonw/gists{/gist_id}", "starred_url": "https://api.github.com/users/simonw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/simonw/subscriptions", "organizations_url": "https://api.github.com/users/simonw/orgs", "repos_url": "https://api.github.com/users/simonw/repos", "events_url": "https://api.github.com/users/simonw/events{/privacy}", "received_events_url": "https://api.github.com/users/simonw/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 727708732, "node_id": "MDU6TGFiZWw3Mjc3MDg3MzI=", "url": "https://api.github.com/repos/simonw/datasette/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 8, "created_at": "2021-07-02T16:58:25Z", "updated_at": "2021-07-02T17:58:23Z", "closed_at": "2021-07-02T17:33:05Z", "author_association": "OWNER", "active_lock_reason": null, "body": "Reported in the wild on https://ilsweb.cincinnatilibrary.org/collection-analysis/current_collection-3d4a4b7/bib?_facet=bib_level_callnumber - the \"next page\" link links to https://127.0.0.1:8010/collection-analysis/current_collection-3d4a4b7/bib?_facet=bib_level_callnumber&_next=100\r\n\r\nThat installation uses `\"base_url\": \"/collection-analysis/\"`\r\n\r\nWeirdly all of the other links on that page - to facet results, sort orders, row permalinks etc - work fine. It's JUST the `next_url` one that is broken.\r\n\r\nAlso broken in their JSON: https://ilsweb.cincinnatilibrary.org/collection-analysis/current_collection-3d4a4b7/bib.json?_size=1 returns\r\n\r\n```json\r\n  \"suggested_facets\": [],\r\n  \"next\": \"1\",\r\n  \"next_url\": \"https://127.0.0.1:8010/collection-analysis/current_collection-3d4a4b7/bib.json?_size=1&_next=1\",\r\n  \"private\": false,\r\n```", "reactions": {"url": "https://api.github.com/repos/simonw/datasette/issues/1387/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/simonw/datasette/issues/1387/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/simonw/datasette/issues/1367", "repository_url": "https://api.github.com/repos/simonw/datasette", "labels_url": "https://api.github.com/repos/simonw/datasette/issues/1367/labels{/name}", "comments_url": "https://api.github.com/repos/simonw/datasette/issues/1367/comments", "events_url": "https://api.github.com/repos/simonw/datasette/issues/1367/events", "html_url": "https://github.com/simonw/datasette/issues/1367", "id": 913823889, "node_id": "MDU6SXNzdWU5MTM4MjM4ODk=", "number": 1367, "title": "Navigation menu display bug", "user": {"login": "simonw", "id": 9599, "node_id": "MDQ6VXNlcjk1OTk=", "avatar_url": "https://avatars.githubusercontent.com/u/9599?v=4", "gravatar_id": "", "url": "https://api.github.com/users/simonw", "html_url": "https://github.com/simonw", "followers_url": "https://api.github.com/users/simonw/followers", "following_url": "https://api.github.com/users/simonw/following{/other_user}", "gists_url": "https://api.github.com/users/simonw/gists{/gist_id}", "starred_url": "https://api.github.com/users/simonw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/simonw/subscriptions", "organizations_url": "https://api.github.com/users/simonw/orgs", "repos_url": "https://api.github.com/users/simonw/repos", "events_url": "https://api.github.com/users/simonw/events{/privacy}", "received_events_url": "https://api.github.com/users/simonw/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 727708732, "node_id": "MDU6TGFiZWw3Mjc3MDg3MzI=", "url": "https://api.github.com/repos/simonw/datasette/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}, {"id": 1918831023, "node_id": "MDU6TGFiZWwxOTE4ODMxMDIz", "url": "https://api.github.com/repos/simonw/datasette/labels/css", "name": "css", "color": "7261dd", "default": false, "description": ""}, {"id": 2175284252, "node_id": "MDU6TGFiZWwyMTc1Mjg0MjUy", "url": "https://api.github.com/repos/simonw/datasette/labels/design", "name": "design", "color": "083993", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2021-06-07T18:18:08Z", "updated_at": "2021-06-07T18:24:19Z", "closed_at": "2021-06-07T18:24:19Z", "author_association": "OWNER", "active_lock_reason": null, "body": "With Datasette 0.57 the navigation menu looks like this:\r\n\r\n<img width=\"991\" alt=\"Datasette_Fixtures___memory___internal__fixtures__extra_database\" src=\"https://user-images.githubusercontent.com/9599/121069137-ffb9b000-c781-11eb-962a-b250a2772590.png\">\r\n", "reactions": {"url": "https://api.github.com/repos/simonw/datasette/issues/1367/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/simonw/datasette/issues/1367/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/simonw/datasette/issues/1361", "repository_url": "https://api.github.com/repos/simonw/datasette", "labels_url": "https://api.github.com/repos/simonw/datasette/issues/1361/labels{/name}", "comments_url": "https://api.github.com/repos/simonw/datasette/issues/1361/comments", "events_url": "https://api.github.com/repos/simonw/datasette/issues/1361/events", "html_url": "https://github.com/simonw/datasette/issues/1361", "id": 912485040, "node_id": "MDU6SXNzdWU5MTI0ODUwNDA=", "number": 1361, "title": "Intermittent CI failure: restore_working_directory FileNotFoundError", "user": {"login": "simonw", "id": 9599, "node_id": "MDQ6VXNlcjk1OTk=", "avatar_url": "https://avatars.githubusercontent.com/u/9599?v=4", "gravatar_id": "", "url": "https://api.github.com/users/simonw", "html_url": "https://github.com/simonw", "followers_url": "https://api.github.com/users/simonw/followers", "following_url": "https://api.github.com/users/simonw/following{/other_user}", "gists_url": "https://api.github.com/users/simonw/gists{/gist_id}", "starred_url": "https://api.github.com/users/simonw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/simonw/subscriptions", "organizations_url": "https://api.github.com/users/simonw/orgs", "repos_url": "https://api.github.com/users/simonw/repos", "events_url": "https://api.github.com/users/simonw/events{/privacy}", "received_events_url": "https://api.github.com/users/simonw/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 727708732, "node_id": "MDU6TGFiZWw3Mjc3MDg3MzI=", "url": "https://api.github.com/repos/simonw/datasette/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}, {"id": 993222446, "node_id": "MDU6TGFiZWw5OTMyMjI0NDY=", "url": "https://api.github.com/repos/simonw/datasette/labels/ci", "name": "ci", "color": "c5daf9", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2021-06-05T22:48:13Z", "updated_at": "2021-06-05T23:16:24Z", "closed_at": "2021-06-05T23:16:24Z", "author_association": "OWNER", "active_lock_reason": null, "body": "e.g. in https://github.com/simonw/datasette/runs/2754772233 - this is an intermittent error:\r\n```\r\n__________ ERROR at setup of test_hook_register_routes_render_message __________\r\n[gw0] linux -- Python 3.8.10 /opt/hostedtoolcache/Python/3.8.10/x64/bin/python\r\n\r\ntmpdir = local('/tmp/pytest-of-runner/pytest-0/popen-gw0/test_hook_register_routes_rend0')\r\nrequest = <SubRequest 'restore_working_directory' for <Function test_hook_register_routes_render_message>>\r\n\r\n    @pytest.fixture\r\n    def restore_working_directory(tmpdir, request):\r\n>       previous_cwd = os.getcwd()\r\nE       FileNotFoundError: [Errno 2] No such file or directory\r\n```", "reactions": {"url": "https://api.github.com/repos/simonw/datasette/issues/1361/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/simonw/datasette/issues/1361/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/simonw/datasette/issues/1349", "repository_url": "https://api.github.com/repos/simonw/datasette", "labels_url": "https://api.github.com/repos/simonw/datasette/issues/1349/labels{/name}", "comments_url": "https://api.github.com/repos/simonw/datasette/issues/1349/comments", "events_url": "https://api.github.com/repos/simonw/datasette/issues/1349/events", "html_url": "https://github.com/simonw/datasette/issues/1349", "id": 906385991, "node_id": "MDU6SXNzdWU5MDYzODU5OTE=", "number": 1349, "title": "CSV ?_stream=on redundantly calculates facets for every page", "user": {"login": "simonw", "id": 9599, "node_id": "MDQ6VXNlcjk1OTk=", "avatar_url": "https://avatars.githubusercontent.com/u/9599?v=4", "gravatar_id": "", "url": "https://api.github.com/users/simonw", "html_url": "https://github.com/simonw", "followers_url": "https://api.github.com/users/simonw/followers", "following_url": "https://api.github.com/users/simonw/following{/other_user}", "gists_url": "https://api.github.com/users/simonw/gists{/gist_id}", "starred_url": "https://api.github.com/users/simonw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/simonw/subscriptions", "organizations_url": "https://api.github.com/users/simonw/orgs", "repos_url": "https://api.github.com/users/simonw/repos", "events_url": "https://api.github.com/users/simonw/events{/privacy}", "received_events_url": "https://api.github.com/users/simonw/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 727708732, "node_id": "MDU6TGFiZWw3Mjc3MDg3MzI=", "url": "https://api.github.com/repos/simonw/datasette/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}, {"id": 2093067580, "node_id": "MDU6TGFiZWwyMDkzMDY3NTgw", "url": "https://api.github.com/repos/simonw/datasette/labels/performance", "name": "performance", "color": "e8be84", "default": false, "description": ""}, {"id": 3095460476, "node_id": "MDU6TGFiZWwzMDk1NDYwNDc2", "url": "https://api.github.com/repos/simonw/datasette/labels/csv", "name": "csv", "color": "4F1FEC", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 9, "created_at": "2021-05-29T06:11:23Z", "updated_at": "2021-06-17T18:12:32Z", "closed_at": "2021-06-01T15:52:53Z", "author_association": "OWNER", "active_lock_reason": null, "body": "I'm trying to figure out why a full CSV export from https://covid-19.datasettes.com/covid/ny_times_us_counties runs unbearably slowly.\r\n\r\nIt's because the streaming endpoint works by scrolling through every page, and it turns out every page calculates facets and suggested facets!", "reactions": {"url": "https://api.github.com/repos/simonw/datasette/issues/1349/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/simonw/datasette/issues/1349/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/simonw/datasette/issues/1345", "repository_url": "https://api.github.com/repos/simonw/datasette", "labels_url": "https://api.github.com/repos/simonw/datasette/issues/1345/labels{/name}", "comments_url": "https://api.github.com/repos/simonw/datasette/issues/1345/comments", "events_url": "https://api.github.com/repos/simonw/datasette/issues/1345/events", "html_url": "https://github.com/simonw/datasette/issues/1345", "id": 904071938, "node_id": "MDU6SXNzdWU5MDQwNzE5Mzg=", "number": 1345, "title": "?_nocol= does not interact well with default facets", "user": {"login": "simonw", "id": 9599, "node_id": "MDQ6VXNlcjk1OTk=", "avatar_url": "https://avatars.githubusercontent.com/u/9599?v=4", "gravatar_id": "", "url": "https://api.github.com/users/simonw", "html_url": "https://github.com/simonw", "followers_url": "https://api.github.com/users/simonw/followers", "following_url": "https://api.github.com/users/simonw/following{/other_user}", "gists_url": "https://api.github.com/users/simonw/gists{/gist_id}", "starred_url": "https://api.github.com/users/simonw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/simonw/subscriptions", "organizations_url": "https://api.github.com/users/simonw/orgs", "repos_url": "https://api.github.com/users/simonw/repos", "events_url": "https://api.github.com/users/simonw/events{/privacy}", "received_events_url": "https://api.github.com/users/simonw/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 727708732, "node_id": "MDU6TGFiZWw3Mjc3MDg3MzI=", "url": "https://api.github.com/repos/simonw/datasette/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 7, "created_at": "2021-05-27T18:39:55Z", "updated_at": "2021-05-31T02:40:44Z", "closed_at": "2021-05-31T02:31:21Z", "author_association": "OWNER", "active_lock_reason": null, "body": "Clicking \"Hide this column\" on `fips` on https://covid-19.datasettes.com/covid/ny_times_us_counties shows this error:\r\n\r\nhttps://covid-19.datasettes.com/covid/ny_times_us_counties?_nocol=fips\r\n\r\n> ## Invalid SQL\r\n> no such column: fips\r\n\r\nThe reason is that https://covid-19.datasettes.com/-/metadata sets up the following:\r\n\r\n```json\r\n  \"ny_times_us_counties\": {\r\n      \"sort_desc\": \"date\",\r\n      \"facets\": [\r\n          \"state\",\r\n          \"county\",\r\n          \"fips\"\r\n      ],\r\n```\r\nIt's setting `fips` as a default facet, which breaks if you attempt to remove the column using `?_nocol`.", "reactions": {"url": "https://api.github.com/repos/simonw/datasette/issues/1345/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/simonw/datasette/issues/1345/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/simonw/datasette/issues/1341", "repository_url": "https://api.github.com/repos/simonw/datasette", "labels_url": "https://api.github.com/repos/simonw/datasette/issues/1341/labels{/name}", "comments_url": "https://api.github.com/repos/simonw/datasette/issues/1341/comments", "events_url": "https://api.github.com/repos/simonw/datasette/issues/1341/events", "html_url": "https://github.com/simonw/datasette/issues/1341", "id": 903200328, "node_id": "MDU6SXNzdWU5MDMyMDAzMjg=", "number": 1341, "title": "\"Show all columns\" cog menu item should show if ?_col= is used", "user": {"login": "simonw", "id": 9599, "node_id": "MDQ6VXNlcjk1OTk=", "avatar_url": "https://avatars.githubusercontent.com/u/9599?v=4", "gravatar_id": "", "url": "https://api.github.com/users/simonw", "html_url": "https://github.com/simonw", "followers_url": "https://api.github.com/users/simonw/followers", "following_url": "https://api.github.com/users/simonw/following{/other_user}", "gists_url": "https://api.github.com/users/simonw/gists{/gist_id}", "starred_url": "https://api.github.com/users/simonw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/simonw/subscriptions", "organizations_url": "https://api.github.com/users/simonw/orgs", "repos_url": "https://api.github.com/users/simonw/repos", "events_url": "https://api.github.com/users/simonw/events{/privacy}", "received_events_url": "https://api.github.com/users/simonw/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 727708732, "node_id": "MDU6TGFiZWw3Mjc3MDg3MzI=", "url": "https://api.github.com/repos/simonw/datasette/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2021-05-27T04:28:17Z", "updated_at": "2021-05-27T04:31:16Z", "closed_at": "2021-05-27T04:31:16Z", "author_association": "OWNER", "active_lock_reason": null, "body": "On https://latest.datasette.io/fixtures/sortable?_col=sortable the \"Show all columns\" item (from #615) is not shown (it should be):\r\n\r\n<img width=\"630\" alt=\"fixtures__sortable__201_rows\" src=\"https://user-images.githubusercontent.com/9599/119766097-44337a80-be69-11eb-8674-8031e72cb17d.png\">\r\n", "reactions": {"url": "https://api.github.com/repos/simonw/datasette/issues/1341/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/simonw/datasette/issues/1341/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/simonw/datasette/issues/1308", "repository_url": "https://api.github.com/repos/simonw/datasette", "labels_url": "https://api.github.com/repos/simonw/datasette/issues/1308/labels{/name}", "comments_url": "https://api.github.com/repos/simonw/datasette/issues/1308/comments", "events_url": "https://api.github.com/repos/simonw/datasette/issues/1308/events", "html_url": "https://github.com/simonw/datasette/issues/1308", "id": 866668415, "node_id": "MDU6SXNzdWU4NjY2Njg0MTU=", "number": 1308, "title": "Columns named \"link\" display in bold", "user": {"login": "simonw", "id": 9599, "node_id": "MDQ6VXNlcjk1OTk=", "avatar_url": "https://avatars.githubusercontent.com/u/9599?v=4", "gravatar_id": "", "url": "https://api.github.com/users/simonw", "html_url": "https://github.com/simonw", "followers_url": "https://api.github.com/users/simonw/followers", "following_url": "https://api.github.com/users/simonw/following{/other_user}", "gists_url": "https://api.github.com/users/simonw/gists{/gist_id}", "starred_url": "https://api.github.com/users/simonw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/simonw/subscriptions", "organizations_url": "https://api.github.com/users/simonw/orgs", "repos_url": "https://api.github.com/users/simonw/repos", "events_url": "https://api.github.com/users/simonw/events{/privacy}", "received_events_url": "https://api.github.com/users/simonw/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 727708732, "node_id": "MDU6TGFiZWw3Mjc3MDg3MzI=", "url": "https://api.github.com/repos/simonw/datasette/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}, {"id": 1918831023, "node_id": "MDU6TGFiZWwxOTE4ODMxMDIz", "url": "https://api.github.com/repos/simonw/datasette/labels/css", "name": "css", "color": "7261dd", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2021-04-24T05:58:11Z", "updated_at": "2021-04-24T06:07:49Z", "closed_at": "2021-04-24T06:07:49Z", "author_association": "OWNER", "active_lock_reason": null, "body": "Reported in office hours today.", "reactions": {"url": "https://api.github.com/repos/simonw/datasette/issues/1308/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/simonw/datasette/issues/1308/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/simonw/datasette/issues/1305", "repository_url": "https://api.github.com/repos/simonw/datasette", "labels_url": "https://api.github.com/repos/simonw/datasette/issues/1305/labels{/name}", "comments_url": "https://api.github.com/repos/simonw/datasette/issues/1305/comments", "events_url": "https://api.github.com/repos/simonw/datasette/issues/1305/events", "html_url": "https://github.com/simonw/datasette/issues/1305", "id": 864969683, "node_id": "MDU6SXNzdWU4NjQ5Njk2ODM=", "number": 1305, "title": "Index view crashes when any database table is not accessible to actor", "user": {"login": "gfrmin", "id": 416374, "node_id": "MDQ6VXNlcjQxNjM3NA==", "avatar_url": "https://avatars.githubusercontent.com/u/416374?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gfrmin", "html_url": "https://github.com/gfrmin", "followers_url": "https://api.github.com/users/gfrmin/followers", "following_url": "https://api.github.com/users/gfrmin/following{/other_user}", "gists_url": "https://api.github.com/users/gfrmin/gists{/gist_id}", "starred_url": "https://api.github.com/users/gfrmin/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gfrmin/subscriptions", "organizations_url": "https://api.github.com/users/gfrmin/orgs", "repos_url": "https://api.github.com/users/gfrmin/repos", "events_url": "https://api.github.com/users/gfrmin/events{/privacy}", "received_events_url": "https://api.github.com/users/gfrmin/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 727708732, "node_id": "MDU6TGFiZWw3Mjc3MDg3MzI=", "url": "https://api.github.com/repos/simonw/datasette/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2021-04-22T13:44:22Z", "updated_at": "2021-06-02T04:26:29Z", "closed_at": "2021-06-02T04:26:29Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Because of https://github.com/simonw/datasette/blob/main/datasette/views/index.py#L63, the ```tables``` dict built does not include invisible tables; however, if https://github.com/simonw/datasette/blob/main/datasette/views/index.py#L80 is reached (because table_counts was not successfully initialized, e.g. due to a very large database) then as db.get_all_foreign_keys() returns ALL tables, a KeyError will be raised.\r\n\r\nThis error can be recreated with the fixtures.db if any table is hidden, e.g. by adding something like                 ```\"foreign_key_references\": {\r\n                    \"allow\": {}\r\n                }``` to fixtures-metadata.json and deleting ```or not table_counts``` from https://github.com/simonw/datasette/blob/main/datasette/views/index.py#L77.\r\n\r\nI'm not sure how to fix this error; perhaps by testing if the table is in the aforementions ```tables``` dict.", "reactions": {"url": "https://api.github.com/repos/simonw/datasette/issues/1305/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/simonw/datasette/issues/1305/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/simonw/datasette/issues/1281", "repository_url": "https://api.github.com/repos/simonw/datasette", "labels_url": "https://api.github.com/repos/simonw/datasette/issues/1281/labels{/name}", "comments_url": "https://api.github.com/repos/simonw/datasette/issues/1281/comments", "events_url": "https://api.github.com/repos/simonw/datasette/issues/1281/events", "html_url": "https://github.com/simonw/datasette/issues/1281", "id": 842881221, "node_id": "MDU6SXNzdWU4NDI4ODEyMjE=", "number": 1281, "title": "Latest Datasette tags missing from Docker Hub", "user": {"login": "simonw", "id": 9599, "node_id": "MDQ6VXNlcjk1OTk=", "avatar_url": "https://avatars.githubusercontent.com/u/9599?v=4", "gravatar_id": "", "url": "https://api.github.com/users/simonw", "html_url": "https://github.com/simonw", "followers_url": "https://api.github.com/users/simonw/followers", "following_url": "https://api.github.com/users/simonw/following{/other_user}", "gists_url": "https://api.github.com/users/simonw/gists{/gist_id}", "starred_url": "https://api.github.com/users/simonw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/simonw/subscriptions", "organizations_url": "https://api.github.com/users/simonw/orgs", "repos_url": "https://api.github.com/users/simonw/repos", "events_url": "https://api.github.com/users/simonw/events{/privacy}", "received_events_url": "https://api.github.com/users/simonw/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 727708732, "node_id": "MDU6TGFiZWw3Mjc3MDg3MzI=", "url": "https://api.github.com/repos/simonw/datasette/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}, {"id": 993222446, "node_id": "MDU6TGFiZWw5OTMyMjI0NDY=", "url": "https://api.github.com/repos/simonw/datasette/labels/ci", "name": "ci", "color": "c5daf9", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 7, "created_at": "2021-03-29T00:58:30Z", "updated_at": "2021-03-29T01:41:48Z", "closed_at": "2021-03-29T01:41:48Z", "author_association": "OWNER", "active_lock_reason": null, "body": "Spotted this while testing https://github.com/simonw/datasette/issues/1249#issuecomment-808998719_\r\n\r\nhttps://hub.docker.com/r/datasetteproject/datasette/tags?page=1&ordering=last_updated isn't showing the tags for any version more recent than 0.54.1 - we are up to 0.56 now.\r\n\r\nBut the `:latest` tag is for the new 0.56 release.", "reactions": {"url": "https://api.github.com/repos/simonw/datasette/issues/1281/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/simonw/datasette/issues/1281/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/simonw/datasette/issues/1277", "repository_url": "https://api.github.com/repos/simonw/datasette", "labels_url": "https://api.github.com/repos/simonw/datasette/issues/1277/labels{/name}", "comments_url": "https://api.github.com/repos/simonw/datasette/issues/1277/comments", "events_url": "https://api.github.com/repos/simonw/datasette/issues/1277/events", "html_url": "https://github.com/simonw/datasette/issues/1277", "id": 842212586, "node_id": "MDU6SXNzdWU4NDIyMTI1ODY=", "number": 1277, "title": "Facet by array breaks if table name contains a space", "user": {"login": "simonw", "id": 9599, "node_id": "MDQ6VXNlcjk1OTk=", "avatar_url": "https://avatars.githubusercontent.com/u/9599?v=4", "gravatar_id": "", "url": "https://api.github.com/users/simonw", "html_url": "https://github.com/simonw", "followers_url": "https://api.github.com/users/simonw/followers", "following_url": "https://api.github.com/users/simonw/following{/other_user}", "gists_url": "https://api.github.com/users/simonw/gists{/gist_id}", "starred_url": "https://api.github.com/users/simonw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/simonw/subscriptions", "organizations_url": "https://api.github.com/users/simonw/orgs", "repos_url": "https://api.github.com/users/simonw/repos", "events_url": "https://api.github.com/users/simonw/events{/privacy}", "received_events_url": "https://api.github.com/users/simonw/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 727708732, "node_id": "MDU6TGFiZWw3Mjc3MDg3MzI=", "url": "https://api.github.com/repos/simonw/datasette/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}, {"id": 727708733, "node_id": "MDU6TGFiZWw3Mjc3MDg3MzM=", "url": "https://api.github.com/repos/simonw/datasette/labels/duplicate", "name": "duplicate", "color": "cccccc", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2021-03-26T18:38:19Z", "updated_at": "2021-03-27T03:49:38Z", "closed_at": "2021-03-27T03:49:34Z", "author_association": "OWNER", "active_lock_reason": null, "body": "It breaks when you try to select a filtered item.", "reactions": {"url": "https://api.github.com/repos/simonw/datasette/issues/1277/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/simonw/datasette/issues/1277/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/simonw/datasette/issues/1276", "repository_url": "https://api.github.com/repos/simonw/datasette", "labels_url": "https://api.github.com/repos/simonw/datasette/issues/1276/labels{/name}", "comments_url": "https://api.github.com/repos/simonw/datasette/issues/1276/comments", "events_url": "https://api.github.com/repos/simonw/datasette/issues/1276/events", "html_url": "https://github.com/simonw/datasette/issues/1276", "id": 841456306, "node_id": "MDU6SXNzdWU4NDE0NTYzMDY=", "number": 1276, "title": "Invalid SQL: \"no such table: pragma_database_list\" on database page", "user": {"login": "justinallen", "id": 1314318, "node_id": "MDQ6VXNlcjEzMTQzMTg=", "avatar_url": "https://avatars.githubusercontent.com/u/1314318?v=4", "gravatar_id": "", "url": "https://api.github.com/users/justinallen", "html_url": "https://github.com/justinallen", "followers_url": "https://api.github.com/users/justinallen/followers", "following_url": "https://api.github.com/users/justinallen/following{/other_user}", "gists_url": "https://api.github.com/users/justinallen/gists{/gist_id}", "starred_url": "https://api.github.com/users/justinallen/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/justinallen/subscriptions", "organizations_url": "https://api.github.com/users/justinallen/orgs", "repos_url": "https://api.github.com/users/justinallen/repos", "events_url": "https://api.github.com/users/justinallen/events{/privacy}", "received_events_url": "https://api.github.com/users/justinallen/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 727708732, "node_id": "MDU6TGFiZWw3Mjc3MDg3MzI=", "url": "https://api.github.com/repos/simonw/datasette/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 7, "created_at": "2021-03-26T00:03:53Z", "updated_at": "2021-03-31T16:27:27Z", "closed_at": "2021-03-28T23:52:31Z", "author_association": "NONE", "active_lock_reason": null, "body": "Don't think this has been covered here yet. I'm a little stumped with this one and can't tell if it's a bug or I have something misconfigured. \r\n\r\nOddly, when running locally the usual list of tables populates (i.e. at /charts a list of tables in charts.db). But when on the web server it throws an Invalid SQL error and \"no such table: pragma_database_list\" below. \r\n\r\nAll the url endpoints seem to work fine aside from this - individual tables (/charts/chart_one), as well as stored queries (/charts/query_one). \r\n\r\nNot sure if this has anything to do with upgrading to Datasette 0.55, or something to do with our setup, which uses a metadata build script similar to [the one for the 538 server](https://github.com/simonw/fivethirtyeight-datasette/blob/main/make_metadata.py), or something else. \r\n", "reactions": {"url": "https://api.github.com/repos/simonw/datasette/issues/1276/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/simonw/datasette/issues/1276/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/simonw/datasette/issues/1268", "repository_url": "https://api.github.com/repos/simonw/datasette", "labels_url": "https://api.github.com/repos/simonw/datasette/issues/1268/labels{/name}", "comments_url": "https://api.github.com/repos/simonw/datasette/issues/1268/comments", "events_url": "https://api.github.com/repos/simonw/datasette/issues/1268/events", "html_url": "https://github.com/simonw/datasette/issues/1268", "id": 837308703, "node_id": "MDU6SXNzdWU4MzczMDg3MDM=", "number": 1268, "title": "Figure out why SpatiaLite 5.0 hangs the database page on Linux", "user": {"login": "simonw", "id": 9599, "node_id": "MDQ6VXNlcjk1OTk=", "avatar_url": "https://avatars.githubusercontent.com/u/9599?v=4", "gravatar_id": "", "url": "https://api.github.com/users/simonw", "html_url": "https://github.com/simonw", "followers_url": "https://api.github.com/users/simonw/followers", "following_url": "https://api.github.com/users/simonw/following{/other_user}", "gists_url": "https://api.github.com/users/simonw/gists{/gist_id}", "starred_url": "https://api.github.com/users/simonw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/simonw/subscriptions", "organizations_url": "https://api.github.com/users/simonw/orgs", "repos_url": "https://api.github.com/users/simonw/repos", "events_url": "https://api.github.com/users/simonw/events{/privacy}", "received_events_url": "https://api.github.com/users/simonw/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 727708732, "node_id": "MDU6TGFiZWw3Mjc3MDg3MzI=", "url": "https://api.github.com/repos/simonw/datasette/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}, {"id": 727708735, "node_id": "MDU6TGFiZWw3Mjc3MDg3MzU=", "url": "https://api.github.com/repos/simonw/datasette/labels/help%20wanted", "name": "help wanted", "color": "33aa3f", "default": true, "description": null}, {"id": 1845722916, "node_id": "MDU6TGFiZWwxODQ1NzIyOTE2", "url": "https://api.github.com/repos/simonw/datasette/labels/research", "name": "research", "color": "c165f7", "default": false, "description": ""}, {"id": 3750195281, "node_id": "LA_kwDOBm6k_c7fh3BR", "url": "https://api.github.com/repos/simonw/datasette/labels/spatialite", "name": "spatialite", "color": "20CE84", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 18, "created_at": "2021-03-22T04:44:16Z", "updated_at": "2022-01-20T21:29:43Z", "closed_at": "2021-03-22T17:41:12Z", "author_association": "OWNER", "active_lock_reason": null, "body": "See detailed notes in https://github.com/simonw/datasette/issues/1249 - for some reason SpatiaLite 5.0 hangs the `/dbname` page on Linux (inside Docker containers, both with a custom compiled SpatiaLite and one installed from the Ubuntu 20.10 package repository). This doesn't happen on macOS with SpatiaLite 5 installed using Homebrew.", "reactions": {"url": "https://api.github.com/repos/simonw/datasette/issues/1268/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/simonw/datasette/issues/1268/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/simonw/datasette/issues/1257", "repository_url": "https://api.github.com/repos/simonw/datasette", "labels_url": "https://api.github.com/repos/simonw/datasette/issues/1257/labels{/name}", "comments_url": "https://api.github.com/repos/simonw/datasette/issues/1257/comments", "events_url": "https://api.github.com/repos/simonw/datasette/issues/1257/events", "html_url": "https://github.com/simonw/datasette/issues/1257", "id": 828811618, "node_id": "MDU6SXNzdWU4Mjg4MTE2MTg=", "number": 1257, "title": "Table names containing single quotes break things", "user": {"login": "simonw", "id": 9599, "node_id": "MDQ6VXNlcjk1OTk=", "avatar_url": "https://avatars.githubusercontent.com/u/9599?v=4", "gravatar_id": "", "url": "https://api.github.com/users/simonw", "html_url": "https://github.com/simonw", "followers_url": "https://api.github.com/users/simonw/followers", "following_url": "https://api.github.com/users/simonw/following{/other_user}", "gists_url": "https://api.github.com/users/simonw/gists{/gist_id}", "starred_url": "https://api.github.com/users/simonw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/simonw/subscriptions", "organizations_url": "https://api.github.com/users/simonw/orgs", "repos_url": "https://api.github.com/users/simonw/repos", "events_url": "https://api.github.com/users/simonw/events{/privacy}", "received_events_url": "https://api.github.com/users/simonw/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 727708732, "node_id": "MDU6TGFiZWw3Mjc3MDg3MzI=", "url": "https://api.github.com/repos/simonw/datasette/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2021-03-11T06:29:38Z", "updated_at": "2021-06-02T03:28:29Z", "closed_at": "2021-06-02T03:28:29Z", "author_association": "OWNER", "active_lock_reason": null, "body": "e.g. I found a table called `Yesterday's ELRs by County`\r\n\r\nIt threw an error inside the `detect_fts()` function attempting to run this SQL query:\r\n\r\n```sql\r\n        select name from sqlite_master\r\n            where rootpage = 0\r\n            and (\r\n                sql like '%VIRTUAL TABLE%USING FTS%content=\"Yesterday's ELRs by County\"%'\r\n                or sql like '%VIRTUAL TABLE%USING FTS%content=[Yesterday's ELRs by County]%'\r\n                or (\r\n                    tbl_name = \"Yesterday's ELRs by County\"\r\n                    and sql like '%VIRTUAL TABLE%USING FTS%'\r\n                )\r\n            )\r\n```\r\nHere's the code at fault: https://github.com/simonw/datasette/blob/640ac7071b73111ba4423812cd683756e0e1936b/datasette/utils/__init__.py#L534-L548", "reactions": {"url": "https://api.github.com/repos/simonw/datasette/issues/1257/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/simonw/datasette/issues/1257/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/simonw/datasette/issues/1246", "repository_url": "https://api.github.com/repos/simonw/datasette", "labels_url": "https://api.github.com/repos/simonw/datasette/issues/1246/labels{/name}", "comments_url": "https://api.github.com/repos/simonw/datasette/issues/1246/comments", "events_url": "https://api.github.com/repos/simonw/datasette/issues/1246/events", "html_url": "https://github.com/simonw/datasette/issues/1246", "id": 817597268, "node_id": "MDU6SXNzdWU4MTc1OTcyNjg=", "number": 1246, "title": "Suggest for ArrayFacet possibly confused by blank values", "user": {"login": "simonw", "id": 9599, "node_id": "MDQ6VXNlcjk1OTk=", "avatar_url": "https://avatars.githubusercontent.com/u/9599?v=4", "gravatar_id": "", "url": "https://api.github.com/users/simonw", "html_url": "https://github.com/simonw", "followers_url": "https://api.github.com/users/simonw/followers", "following_url": "https://api.github.com/users/simonw/following{/other_user}", "gists_url": "https://api.github.com/users/simonw/gists{/gist_id}", "starred_url": "https://api.github.com/users/simonw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/simonw/subscriptions", "organizations_url": "https://api.github.com/users/simonw/orgs", "repos_url": "https://api.github.com/users/simonw/repos", "events_url": "https://api.github.com/users/simonw/events{/privacy}", "received_events_url": "https://api.github.com/users/simonw/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 727708732, "node_id": "MDU6TGFiZWw3Mjc3MDg3MzI=", "url": "https://api.github.com/repos/simonw/datasette/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}, {"id": 1382668283, "node_id": "MDU6TGFiZWwxMzgyNjY4Mjgz", "url": "https://api.github.com/repos/simonw/datasette/labels/faceting", "name": "faceting", "color": "71dd93", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2021-02-26T19:11:52Z", "updated_at": "2021-03-01T03:46:11Z", "closed_at": "2021-03-01T03:46:11Z", "author_association": "OWNER", "active_lock_reason": null, "body": "I sometimes don't get the suggestion for facet-by-array for columns that contain arrays. I think it may be because they have empty spaces in them - or perhaps it's because the null detection doesn't actually work.", "reactions": {"url": "https://api.github.com/repos/simonw/datasette/issues/1246/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/simonw/datasette/issues/1246/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/simonw/datasette/issues/1239", "repository_url": "https://api.github.com/repos/simonw/datasette", "labels_url": "https://api.github.com/repos/simonw/datasette/issues/1239/labels{/name}", "comments_url": "https://api.github.com/repos/simonw/datasette/issues/1239/comments", "events_url": "https://api.github.com/repos/simonw/datasette/issues/1239/events", "html_url": "https://github.com/simonw/datasette/issues/1239", "id": 813978858, "node_id": "MDU6SXNzdWU4MTM5Nzg4NTg=", "number": 1239, "title": "JSON filter fails if column contains spaces", "user": {"login": "simonw", "id": 9599, "node_id": "MDQ6VXNlcjk1OTk=", "avatar_url": "https://avatars.githubusercontent.com/u/9599?v=4", "gravatar_id": "", "url": "https://api.github.com/users/simonw", "html_url": "https://github.com/simonw", "followers_url": "https://api.github.com/users/simonw/followers", "following_url": "https://api.github.com/users/simonw/following{/other_user}", "gists_url": "https://api.github.com/users/simonw/gists{/gist_id}", "starred_url": "https://api.github.com/users/simonw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/simonw/subscriptions", "organizations_url": "https://api.github.com/users/simonw/orgs", "repos_url": "https://api.github.com/users/simonw/repos", "events_url": "https://api.github.com/users/simonw/events{/privacy}", "received_events_url": "https://api.github.com/users/simonw/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 727708732, "node_id": "MDU6TGFiZWw3Mjc3MDg3MzI=", "url": "https://api.github.com/repos/simonw/datasette/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2021-02-23T00:18:07Z", "updated_at": "2021-02-23T00:22:53Z", "closed_at": "2021-02-23T00:22:53Z", "author_association": "OWNER", "active_lock_reason": null, "body": "Got this exception:\r\n\r\n`ERROR: conn=<sqlite3.Connection object at 0x10ea68e40>, sql = 'select Address, Affiliation, County, [Has Report], [Latest report notes], [Latest report yes], Latitude, [Location Type], Longitude, Name, id, [Appointment scheduling instructions], [Availability Info], [Latest report] from locations where rowid in (\\n            select locations.rowid from locations, json_each(locations.Availability Info) j\\n            where j.value = :p0\\n        ) and \"Latest report yes\" = :p1 order by id limit 101', params = {'p0': 'Yes: appointment required', 'p1': '1'}: near \"Info\": syntax error`", "reactions": {"url": "https://api.github.com/repos/simonw/datasette/issues/1239/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/simonw/datasette/issues/1239/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/simonw/datasette/issues/1238", "repository_url": "https://api.github.com/repos/simonw/datasette", "labels_url": "https://api.github.com/repos/simonw/datasette/issues/1238/labels{/name}", "comments_url": "https://api.github.com/repos/simonw/datasette/issues/1238/comments", "events_url": "https://api.github.com/repos/simonw/datasette/issues/1238/events", "html_url": "https://github.com/simonw/datasette/issues/1238", "id": 813899472, "node_id": "MDU6SXNzdWU4MTM4OTk0NzI=", "number": 1238, "title": "Custom pages don't work with base_url setting", "user": {"login": "tsibley", "id": 79913, "node_id": "MDQ6VXNlcjc5OTEz", "avatar_url": "https://avatars.githubusercontent.com/u/79913?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tsibley", "html_url": "https://github.com/tsibley", "followers_url": "https://api.github.com/users/tsibley/followers", "following_url": "https://api.github.com/users/tsibley/following{/other_user}", "gists_url": "https://api.github.com/users/tsibley/gists{/gist_id}", "starred_url": "https://api.github.com/users/tsibley/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tsibley/subscriptions", "organizations_url": "https://api.github.com/users/tsibley/orgs", "repos_url": "https://api.github.com/users/tsibley/repos", "events_url": "https://api.github.com/users/tsibley/events{/privacy}", "received_events_url": "https://api.github.com/users/tsibley/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 727708732, "node_id": "MDU6TGFiZWw3Mjc3MDg3MzI=", "url": "https://api.github.com/repos/simonw/datasette/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 9, "created_at": "2021-02-22T21:58:58Z", "updated_at": "2021-06-05T18:59:55Z", "closed_at": "2021-06-05T18:59:55Z", "author_association": "NONE", "active_lock_reason": null, "body": "It seems that custom pages aren't routing properly when the `base_url` setting is used.\r\n\r\nTo reproduce, with Datasette 0.55.\r\n\r\nCreate a `templates/pages/custom.html` with some text.\r\n```\r\nmkdir -p templates/pages/\r\necho \"Hello, world!\" > templates/pages/custom.html\r\n```\r\n\r\nStart Datasette.\r\n\r\n```\r\ndatasette --template-dir templates/\r\n```\r\n\r\nVisit http://localhost:8001/custom and see \"Hello, world!\".\r\n\r\nStart Datasette with a `base_url`.\r\n\r\n```\r\ndatasette --template-dir templates/ --setting base_url /prefix/\r\n```\r\n\r\nVisit http://localhost:8001/prefix/custom and see a \"Database not found: custom\" 404.\r\n\r\nNote that like all routes, http://localhost:8001/custom still works when run with `base_url`.\r\n", "reactions": {"url": "https://api.github.com/repos/simonw/datasette/issues/1238/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/simonw/datasette/issues/1238/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/simonw/datasette/issues/1231", "repository_url": "https://api.github.com/repos/simonw/datasette", "labels_url": "https://api.github.com/repos/simonw/datasette/issues/1231/labels{/name}", "comments_url": "https://api.github.com/repos/simonw/datasette/issues/1231/comments", "events_url": "https://api.github.com/repos/simonw/datasette/issues/1231/events", "html_url": "https://github.com/simonw/datasette/issues/1231", "id": 811367257, "node_id": "MDU6SXNzdWU4MTEzNjcyNTc=", "number": 1231, "title": "Race condition errors in new refresh_schemas() mechanism", "user": {"login": "simonw", "id": 9599, "node_id": "MDQ6VXNlcjk1OTk=", "avatar_url": "https://avatars.githubusercontent.com/u/9599?v=4", "gravatar_id": "", "url": "https://api.github.com/users/simonw", "html_url": "https://github.com/simonw", "followers_url": "https://api.github.com/users/simonw/followers", "following_url": "https://api.github.com/users/simonw/following{/other_user}", "gists_url": "https://api.github.com/users/simonw/gists{/gist_id}", "starred_url": "https://api.github.com/users/simonw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/simonw/subscriptions", "organizations_url": "https://api.github.com/users/simonw/orgs", "repos_url": "https://api.github.com/users/simonw/repos", "events_url": "https://api.github.com/users/simonw/events{/privacy}", "received_events_url": "https://api.github.com/users/simonw/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 727708732, "node_id": "MDU6TGFiZWw3Mjc3MDg3MzI=", "url": "https://api.github.com/repos/simonw/datasette/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 11, "created_at": "2021-02-18T18:49:54Z", "updated_at": "2021-07-16T19:44:59Z", "closed_at": "2021-07-16T19:44:59Z", "author_association": "OWNER", "active_lock_reason": null, "body": "I tried running a Locust load test against Datasette and hit an error message about a failure to create tables because they already existed. I think this means there are race conditions in the new `refresh_schemas()` mechanism added in #1150.", "reactions": {"url": "https://api.github.com/repos/simonw/datasette/issues/1231/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/simonw/datasette/issues/1231/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/simonw/datasette/issues/1228", "repository_url": "https://api.github.com/repos/simonw/datasette", "labels_url": "https://api.github.com/repos/simonw/datasette/issues/1228/labels{/name}", "comments_url": "https://api.github.com/repos/simonw/datasette/issues/1228/comments", "events_url": "https://api.github.com/repos/simonw/datasette/issues/1228/events", "html_url": "https://github.com/simonw/datasette/issues/1228", "id": 810397025, "node_id": "MDU6SXNzdWU4MTAzOTcwMjU=", "number": 1228, "title": "500 error caused  by faceting if a column called `n` exists", "user": {"login": "Kabouik", "id": 7107523, "node_id": "MDQ6VXNlcjcxMDc1MjM=", "avatar_url": "https://avatars.githubusercontent.com/u/7107523?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Kabouik", "html_url": "https://github.com/Kabouik", "followers_url": "https://api.github.com/users/Kabouik/followers", "following_url": "https://api.github.com/users/Kabouik/following{/other_user}", "gists_url": "https://api.github.com/users/Kabouik/gists{/gist_id}", "starred_url": "https://api.github.com/users/Kabouik/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Kabouik/subscriptions", "organizations_url": "https://api.github.com/users/Kabouik/orgs", "repos_url": "https://api.github.com/users/Kabouik/repos", "events_url": "https://api.github.com/users/Kabouik/events{/privacy}", "received_events_url": "https://api.github.com/users/Kabouik/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 727708732, "node_id": "MDU6TGFiZWw3Mjc3MDg3MzI=", "url": "https://api.github.com/repos/simonw/datasette/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2021-02-17T17:41:20Z", "updated_at": "2022-03-19T06:44:40Z", "closed_at": "2022-03-19T01:38:04Z", "author_association": "NONE", "active_lock_reason": null, "body": "I recently discovered `datasette` thanks to your great talk at FOSDEM and would like to use it for some projects. However, when trying to use it on databases created from some csv ot tsv files, I am sometimes getting this issue when going to http://127.0.0.1:8001/databasetest/databasetest and I don't exactly understand what it refers to.\r\n\r\nSo far, I couldn't find anything relevant when reviewing the raw text files that could explain this issue, nor could I find something obvious between the files that generate this issue and those that don't. Does the error ring a bell and, if so, could you please point me to the right direction?\r\n\r\n```\r\n$ datasette databasetest.db \r\nINFO:     Started server process [1408482]\r\nINFO:     Waiting for application startup.\r\nINFO:     Application startup complete.\r\nINFO:     Uvicorn running on http://127.0.0.1:8001 (Press CTRL+C to quit)\r\nINFO:     127.0.0.1:56394 - \"GET / HTTP/1.1\" 200 OK\r\nINFO:     127.0.0.1:56394 - \"GET /-/static/app.css?4e362c HTTP/1.1\" 200 OK\r\nINFO:     127.0.0.1:56396 - \"GET /-/static-plugins/datasette_vega/main.2acbb312.css HTTP/1.1\" 200 OK\r\nINFO:     127.0.0.1:56398 - \"GET /-/static-plugins/datasette_vega/main.08f5d3d8.js HTTP/1.1\" 200 OK\r\nTraceback (most recent call last):\r\n  File \"/home/kabouik/.local/lib/python3.7/site-packages/datasette/app.py\", line 1099, in route_path\r\n    response = await view(request, send)\r\n  File \"/home/kabouik/.local/lib/python3.7/site-packages/datasette/views/base.py\", line 147, in view\r\n    request, **request.scope[\"url_route\"][\"kwargs\"]\r\n  File \"/home/kabouik/.local/lib/python3.7/site-packages/datasette/views/base.py\", line 121, in dispatch_request\r\n    return await handler(request, *args, **kwargs)\r\n  File \"/home/kabouik/.local/lib/python3.7/site-packages/datasette/views/base.py\", line 260, in get\r\n    request, database, hash, correct_hash_provided, **kwargs\r\n  File \"/home/kabouik/.local/lib/python3.7/site-packages/datasette/views/base.py\", line 434, in view_get\r\n    request, database, hash, **kwargs\r\n  File \"/home/kabouik/.local/lib/python3.7/site-packages/datasette/views/table.py\", line 782, in data\r\n    suggested_facets.extend(await facet.suggest())\r\n  File \"/home/kabouik/.local/lib/python3.7/site-packages/datasette/facets.py\", line 168, in suggest\r\n    and any(r[\"n\"] > 1 for r in distinct_values)\r\n  File \"/home/kabouik/.local/lib/python3.7/site-packages/datasette/facets.py\", line 168, in <genexpr>\r\n    and any(r[\"n\"] > 1 for r in distinct_values)\r\nTypeError: '>' not supported between instances of 'str' and 'int'\r\nINFO:     127.0.0.1:56402 - \"GET /databasetest/databasetest HTTP/1.1\" 500 Internal Server Error\r\nINFO:     127.0.0.1:56402 - \"GET /-/static/app.css?4e362c HTTP/1.1\" 200 OK\r\nINFO:     127.0.0.1:56404 - \"GET / HTTP/1.1\" 200 OK\r\nINFO:     127.0.0.1:56404 - \"GET /-/static/app.css?4e362c HTTP/1.1\" 200 OK\r\nINFO:     127.0.0.1:56406 - \"GET /-/static-plugins/datasette_vega/main.2acbb312.css HTTP/1.1\" 200 OK\r\nINFO:     127.0.0.1:56408 - \"GET /-/static-plugins/datasette_vega/main.08f5d3d8.js HTTP/1.1\" 200 OK\r\nINFO:     127.0.0.1:56408 - \"GET /databasetest HTTP/1.1\" 200 OK\r\nINFO:     127.0.0.1:56408 - \"GET /-/static/app.css?4e362c HTTP/1.1\" 200 OK\r\nINFO:     127.0.0.1:56404 - \"GET /-/static-plugins/datasette_vega/main.2acbb312.css HTTP/1.1\" 200 OK\r\nINFO:     127.0.0.1:56406 - \"GET /-/static/codemirror-5.57.0.min.css HTTP/1.1\" 200 OK\r\nINFO:     127.0.0.1:56410 - \"GET /-/static-plugins/datasette_vega/main.08f5d3d8.js HTTP/1.1\" 200 OK\r\nINFO:     127.0.0.1:56414 - \"GET /-/static/codemirror-5.57.0-sql.min.js HTTP/1.1\" 200 OK\r\nINFO:     127.0.0.1:56412 - \"GET /-/static/codemirror-5.57.0.min.js HTTP/1.1\" 200 OK\r\nINFO:     127.0.0.1:56408 - \"GET /-/static/sql-formatter-2.3.3.min.js HTTP/1.1\" 200 OK\r\nINFO:     127.0.0.1:56408 - \"GET /databasetest?sql=select+*+from+databasetest HTTP/1.1\" 200 OK\r\nINFO:     127.0.0.1:56410 - \"GET /-/static/app.css?4e362c HTTP/1.1\" 200 OK\r\nINFO:     127.0.0.1:56408 - \"GET /-/static-plugins/datasette_vega/main.2acbb312.css HTTP/1.1\" 200 OK\r\nINFO:     127.0.0.1:56412 - \"GET /-/static/codemirror-5.57.0.min.css HTTP/1.1\" 200 OK\r\nINFO:     127.0.0.1:56404 - \"GET /-/static/sql-formatter-2.3.3.min.js HTTP/1.1\" 200 OK\r\nINFO:     127.0.0.1:56406 - \"GET /-/static/codemirror-5.57.0.min.js HTTP/1.1\" 200 OK\r\nINFO:     127.0.0.1:56414 - \"GET /-/static-plugins/datasette_vega/main.08f5d3d8.js HTTP/1.1\" 200 OK\r\nINFO:     127.0.0.1:56408 - \"GET /-/static/codemirror-5.57.0-sql.min.js HTTP/1.1\" 200 OK\r\nINFO:     127.0.0.1:56410 - \"GET /databasetest.json?sql=select+*+from+databasetest&_shape=array&_shape=array HTTP/1.1\" 200 OK\r\n^CINFO:     Shutting down\r\nINFO:     Waiting for application shutdown.\r\nINFO:     Application shutdown complete.\r\nINFO:     Finished server process [1408482]\r\n```\r\n\r\nNote that there is no error if I go to http://127.0.0.1:8001/databasetest and then click on `Run SQL`.", "reactions": {"url": "https://api.github.com/repos/simonw/datasette/issues/1228/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/simonw/datasette/issues/1228/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/simonw/datasette/issues/1216", "repository_url": "https://api.github.com/repos/simonw/datasette", "labels_url": "https://api.github.com/repos/simonw/datasette/issues/1216/labels{/name}", "comments_url": "https://api.github.com/repos/simonw/datasette/issues/1216/comments", "events_url": "https://api.github.com/repos/simonw/datasette/issues/1216/events", "html_url": "https://github.com/simonw/datasette/issues/1216", "id": 800669347, "node_id": "MDU6SXNzdWU4MDA2NjkzNDc=", "number": 1216, "title": "/-/databases should reflect connection order, not alphabetical order", "user": {"login": "simonw", "id": 9599, "node_id": "MDQ6VXNlcjk1OTk=", "avatar_url": "https://avatars.githubusercontent.com/u/9599?v=4", "gravatar_id": "", "url": "https://api.github.com/users/simonw", "html_url": "https://github.com/simonw", "followers_url": "https://api.github.com/users/simonw/followers", "following_url": "https://api.github.com/users/simonw/following{/other_user}", "gists_url": "https://api.github.com/users/simonw/gists{/gist_id}", "starred_url": "https://api.github.com/users/simonw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/simonw/subscriptions", "organizations_url": "https://api.github.com/users/simonw/orgs", "repos_url": "https://api.github.com/users/simonw/repos", "events_url": "https://api.github.com/users/simonw/events{/privacy}", "received_events_url": "https://api.github.com/users/simonw/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 727708732, "node_id": "MDU6TGFiZWw3Mjc3MDg3MzI=", "url": "https://api.github.com/repos/simonw/datasette/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2021-02-03T20:20:23Z", "updated_at": "2021-06-02T03:10:19Z", "closed_at": "2021-06-02T03:10:19Z", "author_association": "OWNER", "active_lock_reason": null, "body": "The order in which databases are attached to Datasette matters - it affects the homepage, and it's beginning to influence how certain plugins work (see https://github.com/simonw/datasette-tiles/issues/8).\r\n\r\nTwo years ago in cccea85be6aaaeadb31f3b588ec7f732628815f5 I made `/-/databases` return things in alphabetical order, to fix a test failure in Python 3.5.\r\n\r\nPython 3.5 is no longer supported, so this is no longer necessary - and this behaviour should now be treated as a bug.", "reactions": {"url": "https://api.github.com/repos/simonw/datasette/issues/1216/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/simonw/datasette/issues/1216/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/simonw/datasette/issues/1214", "repository_url": "https://api.github.com/repos/simonw/datasette", "labels_url": "https://api.github.com/repos/simonw/datasette/issues/1214/labels{/name}", "comments_url": "https://api.github.com/repos/simonw/datasette/issues/1214/comments", "events_url": "https://api.github.com/repos/simonw/datasette/issues/1214/events", "html_url": "https://github.com/simonw/datasette/issues/1214", "id": 799693777, "node_id": "MDU6SXNzdWU3OTk2OTM3Nzc=", "number": 1214, "title": "Re-submitting filter form duplicates _x querystring arguments", "user": {"login": "simonw", "id": 9599, "node_id": "MDQ6VXNlcjk1OTk=", "avatar_url": "https://avatars.githubusercontent.com/u/9599?v=4", "gravatar_id": "", "url": "https://api.github.com/users/simonw", "html_url": "https://github.com/simonw", "followers_url": "https://api.github.com/users/simonw/followers", "following_url": "https://api.github.com/users/simonw/following{/other_user}", "gists_url": "https://api.github.com/users/simonw/gists{/gist_id}", "starred_url": "https://api.github.com/users/simonw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/simonw/subscriptions", "organizations_url": "https://api.github.com/users/simonw/orgs", "repos_url": "https://api.github.com/users/simonw/repos", "events_url": "https://api.github.com/users/simonw/events{/privacy}", "received_events_url": "https://api.github.com/users/simonw/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 727708732, "node_id": "MDU6TGFiZWw3Mjc3MDg3MzI=", "url": "https://api.github.com/repos/simonw/datasette/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2021-02-02T21:13:35Z", "updated_at": "2021-02-02T21:28:53Z", "closed_at": "2021-02-02T21:21:13Z", "author_association": "OWNER", "active_lock_reason": null, "body": "Really nasty bug, caused by #1194 fix in 07e163561592c743e4117f72102fcd350a600909\r\n\r\nNavigate to this page: https://github-to-sqlite.dogsheep.net/github/labels?_search=help&_sort=id\r\n\r\nClick \"Apply\" to submit the form and the resulting URL is https://github-to-sqlite.dogsheep.net/github/labels?_search=help&_sort=id&_search=help&_sort=id\r\n\r\nThat's because the (truncated) HTML for the form looks like this:\r\n\r\n```html\r\n    ... <input id=\"_search\" type=\"search\" name=\"_search\" value=\"help\">\r\n    ...\r\n            <div class=\"select-wrapper small-screen-only\">\r\n                <select name=\"_sort\" id=\"sort_by\">\r\n                    <option value=\"\">Sort...</option>\r\n                            <option value=\"id\" selected>Sort by id</option>\r\n                            <option value=\"node_id\">Sort by node_id</option>\r\n                            ...\r\n                </select>\r\n            </div>\r\n            ...\r\n            <input type=\"hidden\" name=\"_search\" value=\"help\">\r\n            <input type=\"hidden\" name=\"_sort\" value=\"id\">\r\n        <input type=\"submit\" value=\"Apply\">\r\n```", "reactions": {"url": "https://api.github.com/repos/simonw/datasette/issues/1214/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/simonw/datasette/issues/1214/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/simonw/datasette/issues/1194", "repository_url": "https://api.github.com/repos/simonw/datasette", "labels_url": "https://api.github.com/repos/simonw/datasette/issues/1194/labels{/name}", "comments_url": "https://api.github.com/repos/simonw/datasette/issues/1194/comments", "events_url": "https://api.github.com/repos/simonw/datasette/issues/1194/events", "html_url": "https://github.com/simonw/datasette/issues/1194", "id": 788447787, "node_id": "MDU6SXNzdWU3ODg0NDc3ODc=", "number": 1194, "title": "?_size= argument is not persisted by hidden form fields in the table filters", "user": {"login": "simonw", "id": 9599, "node_id": "MDQ6VXNlcjk1OTk=", "avatar_url": "https://avatars.githubusercontent.com/u/9599?v=4", "gravatar_id": "", "url": "https://api.github.com/users/simonw", "html_url": "https://github.com/simonw", "followers_url": "https://api.github.com/users/simonw/followers", "following_url": "https://api.github.com/users/simonw/following{/other_user}", "gists_url": "https://api.github.com/users/simonw/gists{/gist_id}", "starred_url": "https://api.github.com/users/simonw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/simonw/subscriptions", "organizations_url": "https://api.github.com/users/simonw/orgs", "repos_url": "https://api.github.com/users/simonw/repos", "events_url": "https://api.github.com/users/simonw/events{/privacy}", "received_events_url": "https://api.github.com/users/simonw/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 727708732, "node_id": "MDU6TGFiZWw3Mjc3MDg3MzI=", "url": "https://api.github.com/repos/simonw/datasette/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}, {"id": 729585263, "node_id": "MDU6TGFiZWw3Mjk1ODUyNjM=", "url": "https://api.github.com/repos/simonw/datasette/labels/small", "name": "small", "color": "a7f9b7", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/simonw/datasette/milestones/22", "html_url": "https://github.com/simonw/datasette/milestone/22", "labels_url": "https://api.github.com/repos/simonw/datasette/milestones/22/labels", "id": 6346396, "node_id": "MDk6TWlsZXN0b25lNjM0NjM5Ng==", "number": 22, "title": "Datasette 0.54", "description": "", "creator": {"login": "simonw", "id": 9599, "node_id": "MDQ6VXNlcjk1OTk=", "avatar_url": "https://avatars.githubusercontent.com/u/9599?v=4", "gravatar_id": "", "url": "https://api.github.com/users/simonw", "html_url": "https://github.com/simonw", "followers_url": "https://api.github.com/users/simonw/followers", "following_url": "https://api.github.com/users/simonw/following{/other_user}", "gists_url": "https://api.github.com/users/simonw/gists{/gist_id}", "starred_url": "https://api.github.com/users/simonw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/simonw/subscriptions", "organizations_url": "https://api.github.com/users/simonw/orgs", "repos_url": "https://api.github.com/users/simonw/repos", "events_url": "https://api.github.com/users/simonw/events{/privacy}", "received_events_url": "https://api.github.com/users/simonw/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 19, "state": "closed", "created_at": "2021-01-24T21:18:58Z", "updated_at": "2022-01-13T22:22:24Z", "due_on": null, "closed_at": "2022-01-13T22:22:24Z"}, "comments": 3, "created_at": "2021-01-18T17:41:52Z", "updated_at": "2021-01-25T03:10:23Z", "closed_at": "2021-01-25T03:10:23Z", "author_association": "OWNER", "active_lock_reason": null, "body": "Click \"Apply\" on https://covid-19.datasettes.com/covid/ny_times_us_counties?_size=1000&county__exact=San+Francisco&state__exact=California&_sort_desc=date#g.mark=line&g.x_column=date&g.x_type=temporal&g.y_column=cases&g.y_type=quantitative and the `?_size=1000` parameter from the URL will no longer apply on the reloaded page.", "reactions": {"url": "https://api.github.com/repos/simonw/datasette/issues/1194/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/simonw/datasette/issues/1194/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/simonw/datasette/issues/1185", "repository_url": "https://api.github.com/repos/simonw/datasette", "labels_url": "https://api.github.com/repos/simonw/datasette/issues/1185/labels{/name}", "comments_url": "https://api.github.com/repos/simonw/datasette/issues/1185/comments", "events_url": "https://api.github.com/repos/simonw/datasette/issues/1185/events", "html_url": "https://github.com/simonw/datasette/issues/1185", "id": 784628163, "node_id": "MDU6SXNzdWU3ODQ2MjgxNjM=", "number": 1185, "title": "\"Statement may not contain PRAGMA\" error is not strictly true", "user": {"login": "simonw", "id": 9599, "node_id": "MDQ6VXNlcjk1OTk=", "avatar_url": "https://avatars.githubusercontent.com/u/9599?v=4", "gravatar_id": "", "url": "https://api.github.com/users/simonw", "html_url": "https://github.com/simonw", "followers_url": "https://api.github.com/users/simonw/followers", "following_url": "https://api.github.com/users/simonw/following{/other_user}", "gists_url": "https://api.github.com/users/simonw/gists{/gist_id}", "starred_url": "https://api.github.com/users/simonw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/simonw/subscriptions", "organizations_url": "https://api.github.com/users/simonw/orgs", "repos_url": "https://api.github.com/users/simonw/repos", "events_url": "https://api.github.com/users/simonw/events{/privacy}", "received_events_url": "https://api.github.com/users/simonw/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 727708732, "node_id": "MDU6TGFiZWw3Mjc3MDg3MzI=", "url": "https://api.github.com/repos/simonw/datasette/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}, {"id": 967420289, "node_id": "MDU6TGFiZWw5Njc0MjAyODk=", "url": "https://api.github.com/repos/simonw/datasette/labels/minor", "name": "minor", "color": "fcd0c4", "default": false, "description": "Minor bugs (not high priority)"}, {"id": 2577163933, "node_id": "MDU6TGFiZWwyNTc3MTYzOTMz", "url": "https://api.github.com/repos/simonw/datasette/labels/usability", "name": "usability", "color": "4ace7d", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/simonw/datasette/milestones/22", "html_url": "https://github.com/simonw/datasette/milestone/22", "labels_url": "https://api.github.com/repos/simonw/datasette/milestones/22/labels", "id": 6346396, "node_id": "MDk6TWlsZXN0b25lNjM0NjM5Ng==", "number": 22, "title": "Datasette 0.54", "description": "", "creator": {"login": "simonw", "id": 9599, "node_id": "MDQ6VXNlcjk1OTk=", "avatar_url": "https://avatars.githubusercontent.com/u/9599?v=4", "gravatar_id": "", "url": "https://api.github.com/users/simonw", "html_url": "https://github.com/simonw", "followers_url": "https://api.github.com/users/simonw/followers", "following_url": "https://api.github.com/users/simonw/following{/other_user}", "gists_url": "https://api.github.com/users/simonw/gists{/gist_id}", "starred_url": "https://api.github.com/users/simonw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/simonw/subscriptions", "organizations_url": "https://api.github.com/users/simonw/orgs", "repos_url": "https://api.github.com/users/simonw/repos", "events_url": "https://api.github.com/users/simonw/events{/privacy}", "received_events_url": "https://api.github.com/users/simonw/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 19, "state": "closed", "created_at": "2021-01-24T21:18:58Z", "updated_at": "2022-01-13T22:22:24Z", "due_on": null, "closed_at": "2022-01-13T22:22:24Z"}, "comments": 3, "created_at": "2021-01-12T22:07:10Z", "updated_at": "2021-01-24T21:21:37Z", "closed_at": "2021-01-12T22:26:26Z", "author_association": "OWNER", "active_lock_reason": null, "body": "Consider https://latest.datasette.io/fixtures?sql=select+%27select%0D%0A%27+%7C%7C+group_concat%28%27++++case+when+%5B%27+%7C%7C+name+%7C%7C+%27%5D+is+not+null+then+%27+%7C%7C+quote%28name+%7C%7C+%27%2C+%27%29+%7C%7C+%27+else+%27%27%27%27+end%27%2C+%27+%7C%7C%0D%0A%27%29+%7C%7C+%27%0D%0A++as+columns%2C%0D%0A++count%28*%29+as+num_rows%0D%0Afrom%0D%0A++%5B%27+%7C%7C+%3Atable+%7C%7C+%27%5D%0D%0Agroup+by%0D%0A++columns%0D%0Aorder+by%0D%0A++num_rows+desc%27+as+query+from+pragma_ytable_info%28%3Atable%29&table=facetable\r\n\r\nIt says \"Statement may not contain PRAGMA\" - but that's not actually true. Datasette has an allow-list of PRAGMA that are OK - in this case there was a typo in `pragma_ytable_info` which caused the error, but pragma_table_info` would have been OK.\r\n\r\nSo the error message is misleading.", "reactions": {"url": "https://api.github.com/repos/simonw/datasette/issues/1185/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/simonw/datasette/issues/1185/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/simonw/datasette/issues/1181", "repository_url": "https://api.github.com/repos/simonw/datasette", "labels_url": "https://api.github.com/repos/simonw/datasette/issues/1181/labels{/name}", "comments_url": "https://api.github.com/repos/simonw/datasette/issues/1181/comments", "events_url": "https://api.github.com/repos/simonw/datasette/issues/1181/events", "html_url": "https://github.com/simonw/datasette/issues/1181", "id": 781262510, "node_id": "MDU6SXNzdWU3ODEyNjI1MTA=", "number": 1181, "title": "Certain database names results in 404: \"Database not found: None\"", "user": {"login": "jieter", "id": 1470389, "node_id": "MDQ6VXNlcjE0NzAzODk=", "avatar_url": "https://avatars.githubusercontent.com/u/1470389?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jieter", "html_url": "https://github.com/jieter", "followers_url": "https://api.github.com/users/jieter/followers", "following_url": "https://api.github.com/users/jieter/following{/other_user}", "gists_url": "https://api.github.com/users/jieter/gists{/gist_id}", "starred_url": "https://api.github.com/users/jieter/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jieter/subscriptions", "organizations_url": "https://api.github.com/users/jieter/orgs", "repos_url": "https://api.github.com/users/jieter/repos", "events_url": "https://api.github.com/users/jieter/events{/privacy}", "received_events_url": "https://api.github.com/users/jieter/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 727708732, "node_id": "MDU6TGFiZWw3Mjc3MDg3MzI=", "url": "https://api.github.com/repos/simonw/datasette/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/simonw/datasette/milestones/22", "html_url": "https://github.com/simonw/datasette/milestone/22", "labels_url": "https://api.github.com/repos/simonw/datasette/milestones/22/labels", "id": 6346396, "node_id": "MDk6TWlsZXN0b25lNjM0NjM5Ng==", "number": 22, "title": "Datasette 0.54", "description": "", "creator": {"login": "simonw", "id": 9599, "node_id": "MDQ6VXNlcjk1OTk=", "avatar_url": "https://avatars.githubusercontent.com/u/9599?v=4", "gravatar_id": "", "url": "https://api.github.com/users/simonw", "html_url": "https://github.com/simonw", "followers_url": "https://api.github.com/users/simonw/followers", "following_url": "https://api.github.com/users/simonw/following{/other_user}", "gists_url": "https://api.github.com/users/simonw/gists{/gist_id}", "starred_url": "https://api.github.com/users/simonw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/simonw/subscriptions", "organizations_url": "https://api.github.com/users/simonw/orgs", "repos_url": "https://api.github.com/users/simonw/repos", "events_url": "https://api.github.com/users/simonw/events{/privacy}", "received_events_url": "https://api.github.com/users/simonw/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 19, "state": "closed", "created_at": "2021-01-24T21:18:58Z", "updated_at": "2022-01-13T22:22:24Z", "due_on": null, "closed_at": "2022-01-13T22:22:24Z"}, "comments": 4, "created_at": "2021-01-07T12:01:16Z", "updated_at": "2021-12-21T18:25:15Z", "closed_at": "2021-01-25T05:13:19Z", "author_association": "NONE", "active_lock_reason": null, "body": "I have a file named `test-database (1).sqlite`. When requesting the home route `/`, I see datasette is able to read it correctly:\r\n\r\n<img width=\"409\" alt=\"Screenshot 2021-01-07 at 12 54 46\" src=\"https://user-images.githubusercontent.com/1470389/103889964-9442b800-50e7-11eb-9548-fbf10ed3b1ea.png\">\r\n\r\nHowever, if I click any of the links, datasette replies with: `Error 404 Database not found: None`\r\n\r\nIt seems the hash is crucial, as renaming the file to `database (1).sqlite` makes the error go away.\r\n\r\nThis lines checks for a single dash:\r\nhttps://github.com/simonw/datasette/blob/97fb10c17dd007a275ab743742e93e932335ad67/datasette/views/base.py#L184\r\n\r\n```\r\n$ datasette test-database\\ \\(1\\).sqlite \r\nINFO:     Started server process [68314]\r\nINFO:     Waiting for application startup.\r\nINFO:     Application startup complete.\r\nINFO:     Uvicorn running on http://127.0.0.1:8001 (Press CTRL+C to quit)\r\nINFO:     127.0.0.1:54043 - \"GET /favicon.ico HTTP/1.1\" 200 OK\r\nINFO:     127.0.0.1:54043 - \"GET / HTTP/1.1\" 200 OK\r\n...\r\nINFO:     127.0.0.1:54044 - \"GET /favicon.ico HTTP/1.1\" 200 OK\r\nINFO:     127.0.0.1:54044 - \"GET /test-database (1) HTTP/1.1\" 404 Not Found\r\n\r\n```\r\nVersion:\r\n```\r\n$ datasette --version\r\ndatasette, version 0.53\r\n```\r\n", "reactions": {"url": "https://api.github.com/repos/simonw/datasette/issues/1181/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/simonw/datasette/issues/1181/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/simonw/datasette/issues/1178", "repository_url": "https://api.github.com/repos/simonw/datasette", "labels_url": "https://api.github.com/repos/simonw/datasette/issues/1178/labels{/name}", "comments_url": "https://api.github.com/repos/simonw/datasette/issues/1178/comments", "events_url": "https://api.github.com/repos/simonw/datasette/issues/1178/events", "html_url": "https://github.com/simonw/datasette/issues/1178", "id": 780267857, "node_id": "MDU6SXNzdWU3ODAyNjc4NTc=", "number": 1178, "title": "Use force_https_urls on when deploying with Cloud Run", "user": {"login": "simonw", "id": 9599, "node_id": "MDQ6VXNlcjk1OTk=", "avatar_url": "https://avatars.githubusercontent.com/u/9599?v=4", "gravatar_id": "", "url": "https://api.github.com/users/simonw", "html_url": "https://github.com/simonw", "followers_url": "https://api.github.com/users/simonw/followers", "following_url": "https://api.github.com/users/simonw/following{/other_user}", "gists_url": "https://api.github.com/users/simonw/gists{/gist_id}", "starred_url": "https://api.github.com/users/simonw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/simonw/subscriptions", "organizations_url": "https://api.github.com/users/simonw/orgs", "repos_url": "https://api.github.com/users/simonw/repos", "events_url": "https://api.github.com/users/simonw/events{/privacy}", "received_events_url": "https://api.github.com/users/simonw/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 727708732, "node_id": "MDU6TGFiZWw3Mjc3MDg3MzI=", "url": "https://api.github.com/repos/simonw/datasette/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}, {"id": 750250793, "node_id": "MDU6TGFiZWw3NTAyNTA3OTM=", "url": "https://api.github.com/repos/simonw/datasette/labels/datasette-publish", "name": "datasette-publish", "color": "c3bdf9", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/simonw/datasette/milestones/22", "html_url": "https://github.com/simonw/datasette/milestone/22", "labels_url": "https://api.github.com/repos/simonw/datasette/milestones/22/labels", "id": 6346396, "node_id": "MDk6TWlsZXN0b25lNjM0NjM5Ng==", "number": 22, "title": "Datasette 0.54", "description": "", "creator": {"login": "simonw", "id": 9599, "node_id": "MDQ6VXNlcjk1OTk=", "avatar_url": "https://avatars.githubusercontent.com/u/9599?v=4", "gravatar_id": "", "url": "https://api.github.com/users/simonw", "html_url": "https://github.com/simonw", "followers_url": "https://api.github.com/users/simonw/followers", "following_url": "https://api.github.com/users/simonw/following{/other_user}", "gists_url": "https://api.github.com/users/simonw/gists{/gist_id}", "starred_url": "https://api.github.com/users/simonw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/simonw/subscriptions", "organizations_url": "https://api.github.com/users/simonw/orgs", "repos_url": "https://api.github.com/users/simonw/repos", "events_url": "https://api.github.com/users/simonw/events{/privacy}", "received_events_url": "https://api.github.com/users/simonw/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 19, "state": "closed", "created_at": "2021-01-24T21:18:58Z", "updated_at": "2022-01-13T22:22:24Z", "due_on": null, "closed_at": "2022-01-13T22:22:24Z"}, "comments": 9, "created_at": "2021-01-06T08:20:55Z", "updated_at": "2021-01-24T21:21:05Z", "closed_at": "2021-01-06T18:24:47Z", "author_association": "OWNER", "active_lock_reason": null, "body": "_Original title: datasette.absolute_url() should return https:// not http:// on Cloud Run_\r\n\r\nhttps://latest-with-plugins.datasette.io/github/issue_comments.Notebook?_labels=on currently provides `http://` links, which break in Observable since it won't load `http://` content.", "reactions": {"url": "https://api.github.com/repos/simonw/datasette/issues/1178/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/simonw/datasette/issues/1178/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/simonw/datasette/issues/1169", "repository_url": "https://api.github.com/repos/simonw/datasette", "labels_url": "https://api.github.com/repos/simonw/datasette/issues/1169/labels{/name}", "comments_url": "https://api.github.com/repos/simonw/datasette/issues/1169/comments", "events_url": "https://api.github.com/repos/simonw/datasette/issues/1169/events", "html_url": "https://github.com/simonw/datasette/issues/1169", "id": 777677671, "node_id": "MDU6SXNzdWU3Nzc2Nzc2NzE=", "number": 1169, "title": "Prettier package not actually being cached", "user": {"login": "benpickles", "id": 3637, "node_id": "MDQ6VXNlcjM2Mzc=", "avatar_url": "https://avatars.githubusercontent.com/u/3637?v=4", "gravatar_id": "", "url": "https://api.github.com/users/benpickles", "html_url": "https://github.com/benpickles", "followers_url": "https://api.github.com/users/benpickles/followers", "following_url": "https://api.github.com/users/benpickles/following{/other_user}", "gists_url": "https://api.github.com/users/benpickles/gists{/gist_id}", "starred_url": "https://api.github.com/users/benpickles/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/benpickles/subscriptions", "organizations_url": "https://api.github.com/users/benpickles/orgs", "repos_url": "https://api.github.com/users/benpickles/repos", "events_url": "https://api.github.com/users/benpickles/events{/privacy}", "received_events_url": "https://api.github.com/users/benpickles/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 727708732, "node_id": "MDU6TGFiZWw3Mjc3MDg3MzI=", "url": "https://api.github.com/repos/simonw/datasette/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}, {"id": 993222446, "node_id": "MDU6TGFiZWw5OTMyMjI0NDY=", "url": "https://api.github.com/repos/simonw/datasette/labels/ci", "name": "ci", "color": "c5daf9", "default": false, "description": ""}, {"id": 2389410569, "node_id": "MDU6TGFiZWwyMzg5NDEwNTY5", "url": "https://api.github.com/repos/simonw/datasette/labels/javascript", "name": "javascript", "color": "4c5bbf", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2021-01-03T17:04:41Z", "updated_at": "2021-01-04T19:52:34Z", "closed_at": "2021-01-04T19:52:33Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "With the current configuration Prettier seems to be installed on every run - which can been [seen from the output](https://github.com/simonw/datasette/runs/1631686028?check_suite_focus=true#step:4:4):\r\n\r\n```\r\nnpx: installed 1 in 5.166s\r\n```\r\n\r\nPrettier isn't explicitly being installed (it's surprising that actually installing the dependencies isn't included in the [actions/cache docs](https://github.com/actions/cache/blob/main/examples.md#macos-and-ubuntu)) but it turns out that `npx` will automatically install the package for the specified command (it actually _guesses_ the package name from the name of the command). I'm not sure where Prettier ends up being installed but it doesn't appear to be in `~/.npm` according to the [post-cache output](https://github.com/simonw/datasette/runs/1631686028#step:7:2) (or `./node_modules` when I tested locally):\r\n\r\n```\r\nCache hit occurred on the primary key Linux-npm-565329898f77080e58b14d45cf816ab94877e6f2ece9d395c369c533548a7ee7, not saving cache.\r\n```\r\n\r\nI think there are a couple of approaches to tackling this, you could manually install/cache Prettier within the action, or add a `package.json` with Prettier. I would go with the latter because it's a more standard and maintainable approach and it will also ensure that, along with CI, anyone working on the project will run the same version of Prettier (you'll also get Dependabot JavaScript updates).\r\n\r\nI've tested the [`package.json` approach on a branch](https://github.com/simonw/datasette/compare/main...benpickles:cache-prettier) and am happy to turn it into a pull request if you fancy.\r\n", "reactions": {"url": "https://api.github.com/repos/simonw/datasette/issues/1169/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/simonw/datasette/issues/1169/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/simonw/datasette/issues/1155", "repository_url": "https://api.github.com/repos/simonw/datasette", "labels_url": "https://api.github.com/repos/simonw/datasette/issues/1155/labels{/name}", "comments_url": "https://api.github.com/repos/simonw/datasette/issues/1155/comments", "events_url": "https://api.github.com/repos/simonw/datasette/issues/1155/events", "html_url": "https://github.com/simonw/datasette/issues/1155", "id": 771216293, "node_id": "MDU6SXNzdWU3NzEyMTYyOTM=", "number": 1155, "title": "Better internal database_name for _internal database", "user": {"login": "simonw", "id": 9599, "node_id": "MDQ6VXNlcjk1OTk=", "avatar_url": "https://avatars.githubusercontent.com/u/9599?v=4", "gravatar_id": "", "url": "https://api.github.com/users/simonw", "html_url": "https://github.com/simonw", "followers_url": "https://api.github.com/users/simonw/followers", "following_url": "https://api.github.com/users/simonw/following{/other_user}", "gists_url": "https://api.github.com/users/simonw/gists{/gist_id}", "starred_url": "https://api.github.com/users/simonw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/simonw/subscriptions", "organizations_url": "https://api.github.com/users/simonw/orgs", "repos_url": "https://api.github.com/users/simonw/repos", "events_url": "https://api.github.com/users/simonw/events{/privacy}", "received_events_url": "https://api.github.com/users/simonw/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 727708732, "node_id": "MDU6TGFiZWw3Mjc3MDg3MzI=", "url": "https://api.github.com/repos/simonw/datasette/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 9, "created_at": "2020-12-18T22:47:27Z", "updated_at": "2020-12-22T20:04:35Z", "closed_at": "2020-12-22T20:04:35Z", "author_association": "OWNER", "active_lock_reason": null, "body": "https://latest.datasette.io/login-as-root then https://latest.datasette.io/_internal\r\n\r\n<img width=\"1627\" alt=\"_schemas__columns__132_rows\" src=\"https://user-images.githubusercontent.com/9599/102668086-e70bfe00-413f-11eb-927d-e37ec9238e12.png\">\r\n\r\nThat `database_name` is ugly. It should just be `_internal`.", "reactions": {"url": "https://api.github.com/repos/simonw/datasette/issues/1155/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/simonw/datasette/issues/1155/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/simonw/datasette/issues/1141", "repository_url": "https://api.github.com/repos/simonw/datasette", "labels_url": "https://api.github.com/repos/simonw/datasette/issues/1141/labels{/name}", "comments_url": "https://api.github.com/repos/simonw/datasette/issues/1141/comments", "events_url": "https://api.github.com/repos/simonw/datasette/issues/1141/events", "html_url": "https://github.com/simonw/datasette/issues/1141", "id": 763207948, "node_id": "MDU6SXNzdWU3NjMyMDc5NDg=", "number": 1141, "title": "Default styling for bullet point lists", "user": {"login": "simonw", "id": 9599, "node_id": "MDQ6VXNlcjk1OTk=", "avatar_url": "https://avatars.githubusercontent.com/u/9599?v=4", "gravatar_id": "", "url": "https://api.github.com/users/simonw", "html_url": "https://github.com/simonw", "followers_url": "https://api.github.com/users/simonw/followers", "following_url": "https://api.github.com/users/simonw/following{/other_user}", "gists_url": "https://api.github.com/users/simonw/gists{/gist_id}", "starred_url": "https://api.github.com/users/simonw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/simonw/subscriptions", "organizations_url": "https://api.github.com/users/simonw/orgs", "repos_url": "https://api.github.com/users/simonw/repos", "events_url": "https://api.github.com/users/simonw/events{/privacy}", "received_events_url": "https://api.github.com/users/simonw/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 727708732, "node_id": "MDU6TGFiZWw3Mjc3MDg3MzI=", "url": "https://api.github.com/repos/simonw/datasette/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}, {"id": 1918831023, "node_id": "MDU6TGFiZWwxOTE4ODMxMDIz", "url": "https://api.github.com/repos/simonw/datasette/labels/css", "name": "css", "color": "7261dd", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2020-12-12T02:49:33Z", "updated_at": "2021-03-29T00:14:05Z", "closed_at": "2021-03-29T00:14:05Z", "author_association": "OWNER", "active_lock_reason": null, "body": "I just noticed that https://datasette.io/content/recent_releases (which uses `datasette-render-markdown`) is missing its bullet points:\r\n\r\n<img width=\"864\" alt=\"content__recent_releases__399_rows\" src=\"https://user-images.githubusercontent.com/9599/101970823-95b0bb80-3be1-11eb-9512-9274cef64cf3.png\">\r\n", "reactions": {"url": "https://api.github.com/repos/simonw/datasette/issues/1141/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/simonw/datasette/issues/1141/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/simonw/datasette/issues/1134", "repository_url": "https://api.github.com/repos/simonw/datasette", "labels_url": "https://api.github.com/repos/simonw/datasette/issues/1134/labels{/name}", "comments_url": "https://api.github.com/repos/simonw/datasette/issues/1134/comments", "events_url": "https://api.github.com/repos/simonw/datasette/issues/1134/events", "html_url": "https://github.com/simonw/datasette/issues/1134", "id": 760312579, "node_id": "MDU6SXNzdWU3NjAzMTI1Nzk=", "number": 1134, "title": "\"_searchmode=raw\" throws an index out of range error when combined with \"_search_COLUMN\"", "user": {"login": "clausjuhl", "id": 2181410, "node_id": "MDQ6VXNlcjIxODE0MTA=", "avatar_url": "https://avatars.githubusercontent.com/u/2181410?v=4", "gravatar_id": "", "url": "https://api.github.com/users/clausjuhl", "html_url": "https://github.com/clausjuhl", "followers_url": "https://api.github.com/users/clausjuhl/followers", "following_url": "https://api.github.com/users/clausjuhl/following{/other_user}", "gists_url": "https://api.github.com/users/clausjuhl/gists{/gist_id}", "starred_url": "https://api.github.com/users/clausjuhl/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/clausjuhl/subscriptions", "organizations_url": "https://api.github.com/users/clausjuhl/orgs", "repos_url": "https://api.github.com/users/clausjuhl/repos", "events_url": "https://api.github.com/users/clausjuhl/events{/privacy}", "received_events_url": "https://api.github.com/users/clausjuhl/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 727708732, "node_id": "MDU6TGFiZWw3Mjc3MDg3MzI=", "url": "https://api.github.com/repos/simonw/datasette/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2020-12-09T13:05:37Z", "updated_at": "2020-12-10T05:57:17Z", "closed_at": "2020-12-09T19:56:55Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi Simon!\r\nMaybe it's just me, but when [using _searchmode=raw (trying to enable wildcard-searching) in combination with the \"_search_COLUMN\"-table argument](https://byraadsarkivet.aarhus.dk/db/cases?_searchmode=raw&_search_title=sundhedsfrem*), I get a list index out of range error. [When combining with the simpler \"_search\"-argument everything works, including wildcard-seaches.](https://byraadsarkivet.aarhus.dk/db/cases?_search=sundhedsfrem*&_searchmode=raw). Here's the traceback:\r\n\r\n```\r\nTraceback (most recent call last):\r\n  File \"/Users/cjk/.local/share/virtualenvs/minutes-jMDZ8Ssk/lib/python3.7/site-packages/datasette/utils/asgi.py\", line 122, in route_path\r\n    return await view(new_scope, receive, send)\r\n  File \"/Users/cjk/.local/share/virtualenvs/minutes-jMDZ8Ssk/lib/python3.7/site-packages/datasette/utils/asgi.py\", line 196, in view\r\n    request, **scope[\"url_route\"][\"kwargs\"]\r\n  File \"/Users/cjk/.local/share/virtualenvs/minutes-jMDZ8Ssk/lib/python3.7/site-packages/datasette/views/base.py\", line 204, in get\r\n    request, database, hash, correct_hash_provided, **kwargs\r\n  File \"/Users/cjk/.local/share/virtualenvs/minutes-jMDZ8Ssk/lib/python3.7/site-packages/datasette/views/base.py\", line 342, in view_get\r\n    request, database, hash, **kwargs\r\n  File \"/Users/cjk/.local/share/virtualenvs/minutes-jMDZ8Ssk/lib/python3.7/site-packages/datasette/views/table.py\", line 393, in data\r\n    search_col = key.split(\"_search_\", 1)[1]\r\nIndexError: list index out of range\r\n\r\n```", "reactions": {"url": "https://api.github.com/repos/simonw/datasette/issues/1134/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/simonw/datasette/issues/1134/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/simonw/datasette/issues/1131", "repository_url": "https://api.github.com/repos/simonw/datasette", "labels_url": "https://api.github.com/repos/simonw/datasette/issues/1131/labels{/name}", "comments_url": "https://api.github.com/repos/simonw/datasette/issues/1131/comments", "events_url": "https://api.github.com/repos/simonw/datasette/issues/1131/events", "html_url": "https://github.com/simonw/datasette/issues/1131", "id": 757481949, "node_id": "MDU6SXNzdWU3NTc0ODE5NDk=", "number": 1131, "title": "\"datasette inspect\" outputs invalid JSON if an error is logged", "user": {"login": "simonw", "id": 9599, "node_id": "MDQ6VXNlcjk1OTk=", "avatar_url": "https://avatars.githubusercontent.com/u/9599?v=4", "gravatar_id": "", "url": "https://api.github.com/users/simonw", "html_url": "https://github.com/simonw", "followers_url": "https://api.github.com/users/simonw/followers", "following_url": "https://api.github.com/users/simonw/following{/other_user}", "gists_url": "https://api.github.com/users/simonw/gists{/gist_id}", "starred_url": "https://api.github.com/users/simonw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/simonw/subscriptions", "organizations_url": "https://api.github.com/users/simonw/orgs", "repos_url": "https://api.github.com/users/simonw/repos", "events_url": "https://api.github.com/users/simonw/events{/privacy}", "received_events_url": "https://api.github.com/users/simonw/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 727708732, "node_id": "MDU6TGFiZWw3Mjc3MDg3MzI=", "url": "https://api.github.com/repos/simonw/datasette/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2020-12-05T00:00:45Z", "updated_at": "2020-12-05T20:48:34Z", "closed_at": "2020-12-05T05:21:19Z", "author_association": "OWNER", "active_lock_reason": null, "body": "See https://github.com/simonw/register-of-members-interests/issues/6:\r\n```\r\n% datasette inspect regmem.db                       \r\nERROR: conn=<sqlite3.Connection object at 0x10d2a9c60>, sql = 'select count(*) from [items_fts]', params = None: SQL logic error\r\n{\r\n  \"regmem\": {\r\n    \"hash\": \"6fde27e3dea80d6b65f2ac7f89cd8448980fee8c91b505ba29c311ba0393317f\",\r\n    \"size\": 936198144,\r\n```", "reactions": {"url": "https://api.github.com/repos/simonw/datasette/issues/1131/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/simonw/datasette/issues/1131/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/simonw/datasette/issues/1124", "repository_url": "https://api.github.com/repos/simonw/datasette", "labels_url": "https://api.github.com/repos/simonw/datasette/issues/1124/labels{/name}", "comments_url": "https://api.github.com/repos/simonw/datasette/issues/1124/comments", "events_url": "https://api.github.com/repos/simonw/datasette/issues/1124/events", "html_url": "https://github.com/simonw/datasette/issues/1124", "id": 756439516, "node_id": "MDU6SXNzdWU3NTY0Mzk1MTY=", "number": 1124, "title": "Datasette on Amazon Linux on ARM returns 404 for static assets", "user": {"login": "simonw", "id": 9599, "node_id": "MDQ6VXNlcjk1OTk=", "avatar_url": "https://avatars.githubusercontent.com/u/9599?v=4", "gravatar_id": "", "url": "https://api.github.com/users/simonw", "html_url": "https://github.com/simonw", "followers_url": "https://api.github.com/users/simonw/followers", "following_url": "https://api.github.com/users/simonw/following{/other_user}", "gists_url": "https://api.github.com/users/simonw/gists{/gist_id}", "starred_url": "https://api.github.com/users/simonw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/simonw/subscriptions", "organizations_url": "https://api.github.com/users/simonw/orgs", "repos_url": "https://api.github.com/users/simonw/repos", "events_url": "https://api.github.com/users/simonw/events{/privacy}", "received_events_url": "https://api.github.com/users/simonw/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 727708732, "node_id": "MDU6TGFiZWw3Mjc3MDg3MzI=", "url": "https://api.github.com/repos/simonw/datasette/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 9, "created_at": "2020-12-03T18:20:37Z", "updated_at": "2020-12-03T21:42:02Z", "closed_at": "2020-12-03T21:10:54Z", "author_association": "OWNER", "active_lock_reason": null, "body": "Very weird bug this one. Steps to reproduce:\r\n```\r\n# I started a amzn2-ami-hvm-2.0.20201126.0-arm64-gp2 t4g.micro instance\r\nec2 % ssh -i simonw-ec2.pem ec2-user@ec2-18-219-238-192.us-east-2.compute.amazonaws.com\r\n[ec2-user@ip-172-31-30-7 ~]$ sudo yum install python3\r\nLoaded plugins: extras_suggestions, langpacks, priorities, update-motd\r\n...\r\nIs this ok [y/d/N]: y\r\nDownloading packages:\r\n(1/4): python3-3.7.9-1.amzn2.0.1.aarch64.rpm                                                                                        |  72 kB  00:00:00     \r\n(2/4): python3-pip-9.0.3-1.amzn2.0.2.noarch.rpm                                                                                     | 1.9 MB  00:00:00     \r\n(3/4): python3-setuptools-38.4.0-3.amzn2.0.6.noarch.rpm                                                                             | 617 kB  00:00:00     \r\n(4/4): python3-libs-3.7.9-1.amzn2.0.1.aarch64.rpm                                                                                   | 9.1 MB  00:00:00     \r\n-----------------------------------------------------------------------------------------------------------------------------------------------------------\r\nTotal                                                                                                                       68 MB/s |  12 MB  00:00:00     \r\nRunning transaction check\r\nRunning transaction test\r\nTransaction test succeeded\r\nRunning transaction\r\n  Installing : python3-pip-9.0.3-1.amzn2.0.2.noarch                                                                                                    1/4 \r\n  Installing : python3-3.7.9-1.amzn2.0.1.aarch64                                                                                                       2/4 \r\n  Installing : python3-setuptools-38.4.0-3.amzn2.0.6.noarch                                                                                            3/4 \r\n  Installing : python3-libs-3.7.9-1.amzn2.0.1.aarch64                                                                                                  4/4 \r\n  Verifying  : python3-setuptools-38.4.0-3.amzn2.0.6.noarch                                                                                            1/4 \r\n  Verifying  : python3-pip-9.0.3-1.amzn2.0.2.noarch                                                                                                    2/4 \r\n  Verifying  : python3-3.7.9-1.amzn2.0.1.aarch64                                                                                                       3/4 \r\n  Verifying  : python3-libs-3.7.9-1.amzn2.0.1.aarch64                                                                                                  4/4 \r\n\r\nInstalled:\r\n  python3.aarch64 0:3.7.9-1.amzn2.0.1                                                                                                                      \r\n\r\nDependency Installed:\r\n  python3-libs.aarch64 0:3.7.9-1.amzn2.0.1          python3-pip.noarch 0:9.0.3-1.amzn2.0.2          python3-setuptools.noarch 0:38.4.0-3.amzn2.0.6         \r\n\r\nComplete!\r\n[ec2-user@ip-172-31-30-7 ~]$ python3 -m pip install --user pipx\r\nCollecting pipx\r\n  Downloading https://files.pythonhosted.org/packages/42/8a/8447ec14562c5d97afbee54ec390864718bccce9dfb0506c8c77852489d3/pipx-0.15.6.0-py3-none-any.whl (43kB)\r\n    100% |\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588| 51kB 3.8MB/s \r\nCollecting packaging>=20.0 (from pipx)\r\n  Downloading https://files.pythonhosted.org/packages/28/87/8edcf555adaf60d053ead881bc056079e29319b643ca710339ce84413136/packaging-20.7-py2.py3-none-any.whl\r\nCollecting argcomplete<2.0,>=1.9.4 (from pipx)\r\n  Downloading https://files.pythonhosted.org/packages/e3/d0/ee7fc6ceac8957196def9bfa3b955d02163058defd3edd51ef7b1ff2769e/argcomplete-1.12.2-py2.py3-none-any.whl\r\nCollecting userpath>=1.4.1 (from pipx)\r\n  Downloading https://files.pythonhosted.org/packages/fb/f1/faca8a3cc86bd2223aaf72edd222bc31d6ae2eea5feaf17a144634a92e6d/userpath-1.4.1-py2.py3-none-any.whl\r\nCollecting pyparsing>=2.0.2 (from packaging>=20.0->pipx)\r\n  Downloading https://files.pythonhosted.org/packages/8a/bb/488841f56197b13700afd5658fc279a2025a39e22449b7cf29864669b15d/pyparsing-2.4.7-py2.py3-none-any.whl (67kB)\r\n    100% |\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588| 71kB 8.8MB/s \r\nCollecting importlib-metadata<4,>=0.23; python_version == \"3.7\" (from argcomplete<2.0,>=1.9.4->pipx)\r\n  Downloading https://files.pythonhosted.org/packages/99/c7/4ccf2baa455613aa9e61372365aba8594ff2806c82189c31a6c65e7c679e/importlib_metadata-3.1.1-py3-none-any.whl\r\nCollecting click (from userpath>=1.4.1->pipx)\r\n  Downloading https://files.pythonhosted.org/packages/d2/3d/fa76db83bf75c4f8d338c2fd15c8d33fdd7ad23a9b5e57eb6c5de26b430e/click-7.1.2-py2.py3-none-any.whl (82kB)\r\n    100% |\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588| 92kB 10.5MB/s \r\nCollecting distro; platform_system == \"Linux\" (from userpath>=1.4.1->pipx)\r\n  Downloading https://files.pythonhosted.org/packages/25/b7/b3c4270a11414cb22c6352ebc7a83aaa3712043be29daa05018fd5a5c956/distro-1.5.0-py2.py3-none-any.whl\r\nCollecting zipp>=0.5 (from importlib-metadata<4,>=0.23; python_version == \"3.7\"->argcomplete<2.0,>=1.9.4->pipx)\r\n  Downloading https://files.pythonhosted.org/packages/41/ad/6a4f1a124b325618a7fb758b885b68ff7b058eec47d9220a12ab38d90b1f/zipp-3.4.0-py3-none-any.whl\r\nInstalling collected packages: pyparsing, packaging, zipp, importlib-metadata, argcomplete, click, distro, userpath, pipx\r\nSuccessfully installed argcomplete-1.12.2 click-7.1.2 distro-1.5.0 importlib-metadata-3.1.1 packaging-20.7 pipx-0.15.6.0 pyparsing-2.4.7 userpath-1.4.1 zipp-3.4.0\r\n[ec2-user@ip-172-31-30-7 ~]$ python3 -m pipx ensurepath\r\n/home/ec2-user/.local/bin is already in PATH.\r\n/home/ec2-user/.local/bin is already in PATH.\r\n\r\nAll pipx binary directories have been added to PATH. If you are sure\r\nyou want to proceed, try again with the '--force' flag.\r\n\r\nOtherwise pipx is ready to go! \u2728 \ud83c\udf1f \u2728\r\n[ec2-user@ip-172-31-30-7 ~]$ pipx install datasette\r\n  installed package datasette 0.52.2, Python 3.7.9\r\n  These apps are now globally available\r\n    - datasette\r\ndone! \u2728 \ud83c\udf1f \u2728\r\n[ec2-user@ip-172-31-30-7 ~]$ datasette --version\r\ndatasette, version 0.52.2\r\n[ec2-user@ip-172-31-30-7 ~]$ datasette --get /-/static/app.css\r\n404\r\n```", "reactions": {"url": "https://api.github.com/repos/simonw/datasette/issues/1124/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/simonw/datasette/issues/1124/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/simonw/datasette/issues/1123", "repository_url": "https://api.github.com/repos/simonw/datasette", "labels_url": "https://api.github.com/repos/simonw/datasette/issues/1123/labels{/name}", "comments_url": "https://api.github.com/repos/simonw/datasette/issues/1123/comments", "events_url": "https://api.github.com/repos/simonw/datasette/issues/1123/events", "html_url": "https://github.com/simonw/datasette/issues/1123", "id": 755721275, "node_id": "MDU6SXNzdWU3NTU3MjEyNzU=", "number": 1123, "title": "Table actions hook are order dependent, should not be", "user": {"login": "simonw", "id": 9599, "node_id": "MDQ6VXNlcjk1OTk=", "avatar_url": "https://avatars.githubusercontent.com/u/9599?v=4", "gravatar_id": "", "url": "https://api.github.com/users/simonw", "html_url": "https://github.com/simonw", "followers_url": "https://api.github.com/users/simonw/followers", "following_url": "https://api.github.com/users/simonw/following{/other_user}", "gists_url": "https://api.github.com/users/simonw/gists{/gist_id}", "starred_url": "https://api.github.com/users/simonw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/simonw/subscriptions", "organizations_url": "https://api.github.com/users/simonw/orgs", "repos_url": "https://api.github.com/users/simonw/repos", "events_url": "https://api.github.com/users/simonw/events{/privacy}", "received_events_url": "https://api.github.com/users/simonw/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 727708732, "node_id": "MDU6TGFiZWw3Mjc3MDg3MzI=", "url": "https://api.github.com/repos/simonw/datasette/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}, {"id": 993222446, "node_id": "MDU6TGFiZWw5OTMyMjI0NDY=", "url": "https://api.github.com/repos/simonw/datasette/labels/ci", "name": "ci", "color": "c5daf9", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-12-03T00:47:12Z", "updated_at": "2020-12-03T00:50:17Z", "closed_at": "2020-12-03T00:50:17Z", "author_association": "OWNER", "active_lock_reason": null, "body": "Got this error: https://github.com/simonw/datasette/runs/1489770800\r\n```\r\n>       assert get_table_actions_links(response_2.text) == [\r\n            {\"label\": \"From async\", \"href\": \"/\"},\r\n            {\"label\": \"Database: fixtures\", \"href\": \"/\"},\r\n            {\"label\": f\"Table: {table_or_view}\", \"href\": \"/\"},\r\n        ]\r\nE       AssertionError: assert [{'href': '/'...'From async'}] == [{'href': '/'...: facetable'}]\r\nE         At index 0 diff: {'label': 'Database: fixtures', 'href': '/'} != {'label': 'From async', 'href': '/'}\r\nE         Use -v to get the full diff\r\n```", "reactions": {"url": "https://api.github.com/repos/simonw/datasette/issues/1123/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/simonw/datasette/issues/1123/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/simonw/datasette/issues/1116", "repository_url": "https://api.github.com/repos/simonw/datasette", "labels_url": "https://api.github.com/repos/simonw/datasette/issues/1116/labels{/name}", "comments_url": "https://api.github.com/repos/simonw/datasette/issues/1116/comments", "events_url": "https://api.github.com/repos/simonw/datasette/issues/1116/events", "html_url": "https://github.com/simonw/datasette/issues/1116", "id": 753668177, "node_id": "MDU6SXNzdWU3NTM2NjgxNzc=", "number": 1116, "title": "GENERATED column support", "user": {"login": "nattaylor", "id": 2789593, "node_id": "MDQ6VXNlcjI3ODk1OTM=", "avatar_url": "https://avatars.githubusercontent.com/u/2789593?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nattaylor", "html_url": "https://github.com/nattaylor", "followers_url": "https://api.github.com/users/nattaylor/followers", "following_url": "https://api.github.com/users/nattaylor/following{/other_user}", "gists_url": "https://api.github.com/users/nattaylor/gists{/gist_id}", "starred_url": "https://api.github.com/users/nattaylor/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nattaylor/subscriptions", "organizations_url": "https://api.github.com/users/nattaylor/orgs", "repos_url": "https://api.github.com/users/nattaylor/repos", "events_url": "https://api.github.com/users/nattaylor/events{/privacy}", "received_events_url": "https://api.github.com/users/nattaylor/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 727708732, "node_id": "MDU6TGFiZWw3Mjc3MDg3MzI=", "url": "https://api.github.com/repos/simonw/datasette/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 9, "created_at": "2020-11-30T17:33:47Z", "updated_at": "2020-11-30T21:29:59Z", "closed_at": "2020-11-30T21:29:59Z", "author_association": "NONE", "active_lock_reason": null, "body": "I think this is a feature request... perhaps I should just try to contribute it myself, but thought I'd check in case support is planned already.\r\n\r\nFor a table with the following schema, datasette 0.51.1 doesn't pick up the GENERATED columns and the column list only contains `(rowid, body)`  If I edit the SQL and select the generated columns, it will happily show them.\r\n\r\nAt first glance it appears that [`def table_column_details(conn, table):`](https://github.com/simonw/datasette/blob/4777362bf2692bc72b221ec47c3e6216151d1b89/datasette/utils/__init__.py#L575) would have to be refactored to use a different methodology to get the columns, since `PRAGMA table_info(deeds);` returns just `0|body|TEXT|0||0` so maybe it wouldn't be worth it.\r\n\r\n```\r\nCREATE TABLE deeds (\r\n    body TEXT,\r\n    id INT GENERATED ALWAYS AS (json_extract(body, '$.id')) STORED,\r\n    consideration INT GENERATED ALWAYS AS (json_extract(body, '$.consideration')) STORED\r\n);\r\n```", "reactions": {"url": "https://api.github.com/repos/simonw/datasette/issues/1116/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/simonw/datasette/issues/1116/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/simonw/datasette/issues/1113", "repository_url": "https://api.github.com/repos/simonw/datasette", "labels_url": "https://api.github.com/repos/simonw/datasette/issues/1113/labels{/name}", "comments_url": "https://api.github.com/repos/simonw/datasette/issues/1113/comments", "events_url": "https://api.github.com/repos/simonw/datasette/issues/1113/events", "html_url": "https://github.com/simonw/datasette/issues/1113", "id": 752789159, "node_id": "MDU6SXNzdWU3NTI3ODkxNTk=", "number": 1113, "title": "500 error on row page if query against foreign keys hits time limit", "user": {"login": "simonw", "id": 9599, "node_id": "MDQ6VXNlcjk1OTk=", "avatar_url": "https://avatars.githubusercontent.com/u/9599?v=4", "gravatar_id": "", "url": "https://api.github.com/users/simonw", "html_url": "https://github.com/simonw", "followers_url": "https://api.github.com/users/simonw/followers", "following_url": "https://api.github.com/users/simonw/following{/other_user}", "gists_url": "https://api.github.com/users/simonw/gists{/gist_id}", "starred_url": "https://api.github.com/users/simonw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/simonw/subscriptions", "organizations_url": "https://api.github.com/users/simonw/orgs", "repos_url": "https://api.github.com/users/simonw/repos", "events_url": "https://api.github.com/users/simonw/events{/privacy}", "received_events_url": "https://api.github.com/users/simonw/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 727708732, "node_id": "MDU6TGFiZWw3Mjc3MDg3MzI=", "url": "https://api.github.com/repos/simonw/datasette/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}, {"id": 727708733, "node_id": "MDU6TGFiZWw3Mjc3MDg3MzM=", "url": "https://api.github.com/repos/simonw/datasette/labels/duplicate", "name": "duplicate", "color": "cccccc", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-11-28T23:20:08Z", "updated_at": "2020-11-29T02:40:01Z", "closed_at": "2020-11-28T23:23:31Z", "author_association": "OWNER", "active_lock_reason": null, "body": "This page exhibited the following error: https://data.catalyst.coop/ferc1/f1_respondent_id/145\r\n\r\n`(OperationalError('interrupted'), 'select (select count(*) from f1_acb_epda where respondent_id=:id), (select count(*) from f1_accumdepr_prvsn where respondent_id=:id), (select count(*) from f1_accumdfrrdtaxcr where respondent_id=:id), (select count(*) from f1_adit_190_detail where respondent_id=:id), (select count(*) from f1_adit_190_notes where respondent_id=:id), (select count(*) from f1_adit_amrt_prop where respondent_id=:id), (select count(*) from f1_adit_other where respondent_id=:id), (select count(*) from f1_adit_other_prop where respondent_id=:id), (select count(*) from f1_allowances where respondent_id=:id), (select count(*) from f1_bal_sheet_cr where respondent_id=:id), (select count(*) from f1_capital_stock where respondent_id=:id), (select count(*) from f1_cash_flow where respondent_id=:id), (select count(*) from f1_cmmn_utlty_p_e where respondent_id=:id), (select count(*) from f1_comp_balance_db where respondent_id=:id), (select count(*) from f1_construction where respondent_id=:id), (select count(*) from f1_control_respdnt where respondent_id=:id), (select count(*) from f1_co_directors where respondent_id=:id), (select count(*) from f1_cptl_stk_expns where respondent_id=:id), (select count(*) from f1_csscslc_pcsircs where respondent_id=:id), (select count(*) from f1_dacs_epda where respondent_id=:id), (select count(*) from f1_dscnt_cptl_stk where respondent_id=:id), (select count(*) from f1_edcfu_epda where respondent_id=:id), (select count(*) from f1_elctrc_erg_acct where respondent_id=:id), (select count(*) from f1_elctrc_oper_rev where respondent_id=:id), (select count(*) from f1_elc_oper_rev_nb where respondent_id=:id), (select count(*) from f1_elc_op_mnt_expn where respondent_id=:id), (select count(*) from f1_electric where respondent_id=:id), (select count(*) from f1_envrnmntl_expns where respondent_id=:id), (select count(*) from f1_envrnmntl_fclty where respondent_id=:id), (select count(*) from f1_fuel where respondent_id=:id), (select count(*) from f1_general_info where respondent_id=:id), (select count(*) from f1_gnrt_plant where respondent_id=:id), (select count(*) from f1_important_chg where respondent_id=:id), (select count(*) from f1_incm_stmnt_2 where respondent_id=:id), (select count(*) from f1_income_stmnt where respondent_id=:id), (select count(*) from f1_miscgen_expnelc where respondent_id=:id), (select count(*) from f1_misc_dfrrd_dr where respondent_id=:id), (select count(*) from f1_mthly_peak_otpt where respondent_id=:id), (select count(*) from f1_mtrl_spply where respondent_id=:id), (select count(*) from f1_nbr_elc_deptemp where respondent_id=:id), (select count(*) from f1_nonutility_prop where respondent_id=:id), (select count(*) from f1_nuclear_fuel where respondent_id=:id), (select count(*) from f1_officers_co where respondent_id=:id), (select count(*) from f1_othr_dfrrd_cr where respondent_id=:id), (select count(*) from f1_othr_pd_in_cptl where respondent_id=:id), (select count(*) from f1_othr_reg_assets where respondent_id=:id), (select count(*) from f1_othr_reg_liab where respondent_id=:id), (select count(*) from f1_overhead where respondent_id=:id), (select count(*) from f1_pccidica where respondent_id=:id), (select count(*) from f1_plant_in_srvce where respondent_id=:id), (select count(*) from f1_pumped_storage where respondent_id=:id), (select count(*) from f1_purchased_pwr where respondent_id=:id), (select count(*) from f1_reconrpt_netinc where respondent_id=:id), (select count(*) from f1_reg_comm_expn where respondent_id=:id), (select count(*) from f1_respdnt_control where respondent_id=:id), (select count(*) from f1_retained_erng where respondent_id=:id), (select count(*) from f1_r_d_demo_actvty where respondent_id=:id), (select count(*) from f1_sales_by_sched where respondent_id=:id), (select count(*) from f1_sale_for_resale where respondent_id=:id), (select count(*) from f1_sbsdry_totals where respondent_id=:id), (select count(*) from f1_schedules_list where respondent_id=:id), (select count(*) from f1_security_holder where respondent_id=:id), (select count(*) from f1_slry_wg_dstrbtn where respondent_id=:id), (select count(*) from f1_substations where respondent_id=:id), (select count(*) from f1_taxacc_ppchrgyr where respondent_id=:id), (select count(*) from f1_unrcvrd_cost where respondent_id=:id), (select count(*) from f1_utltyplnt_smmry where respondent_id=:id), (select count(*) from f1_work where respondent_id=:id), (select count(*) from f1_xmssn_adds where respondent_id=:id), (select count(*) from f1_xmssn_elc_bothr where respondent_id=:id), (select count(*) from f1_xmssn_elc_fothr where respondent_id=:id), (select count(*) from f1_xmssn_line where respondent_id=:id), (select count(*) from f1_xtraordnry_loss where respondent_id=:id), (select count(*) from f1_audit_log where respondent_id=:id), (select count(*) from f1_load_file_names where respondent_id=:id), (select count(*) from f1_privilege where respondent_id=:id), (select count(*) from f1_sys_error_log where respondent_id=:id), (select count(*) from f1_hydro where respondent_id=:id), (select count(*) from f1_ident_attsttn where respondent_id=:id), (select count(*) from f1_steam where respondent_id=:id), (select count(*) from f1_leased where respondent_id=:id), (select count(*) from f1_sbsdry_detail where respondent_id=:id), (select count(*) from f1_plant where respondent_id=:id), (select count(*) from f1_long_term_debt where respondent_id=:id), (select count(*) from f1_106_2009 where respondent_id=:id), (select count(*) from f1_106a_2009 where respondent_id=:id), (select count(*) from f1_106b_2009 where respondent_id=:id), (select count(*) from f1_208_elc_dep where respondent_id=:id), (select count(*) from f1_231_trn_stdycst where respondent_id=:id), (select count(*) from f1_324_elc_expns where respondent_id=:id), (select count(*) from f1_325_elc_cust where respondent_id=:id), (select count(*) from f1_331_transiso where respondent_id=:id), (select count(*) from f1_338_dep_depl where respondent_id=:id), (select count(*) from f1_397_isorto_stl where respondent_id=:id), (select count(*) from f1_398_ancl_ps where respondent_id=:id), (select count(*) from f1_399_mth_peak where respondent_id=:id), (select count(*) from f1_400_sys_peak where respondent_id=:id), (select count(*) from f1_400a_iso_peak where respondent_id=:id), (select count(*) from f1_429_trans_aff where respondent_id=:id), (select count(*) from f1_allowances_nox where respondent_id=:id), (select count(*) from f1_cmpinc_hedge_a where respondent_id=:id), (select count(*) from f1_cmpinc_hedge where respondent_id=:id), (select count(*) from f1_email where respondent_id=:id), (select count(*) from f1_rg_trn_srv_rev where respondent_id=:id), (select count(*) from f1_s0_filing_log where respondent_id=:id), (select count(*) from f1_security where respondent_id=:id)', {'id': '145'})`", "reactions": {"url": "https://api.github.com/repos/simonw/datasette/issues/1113/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/simonw/datasette/issues/1113/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/simonw/datasette/issues/1100", "repository_url": "https://api.github.com/repos/simonw/datasette", "labels_url": "https://api.github.com/repos/simonw/datasette/issues/1100/labels{/name}", "comments_url": "https://api.github.com/repos/simonw/datasette/issues/1100/comments", "events_url": "https://api.github.com/repos/simonw/datasette/issues/1100/events", "html_url": "https://github.com/simonw/datasette/issues/1100", "id": 747702144, "node_id": "MDU6SXNzdWU3NDc3MDIxNDQ=", "number": 1100, "title": "Error on OPTIONS request to database", "user": {"login": "akehrer", "id": 1319404, "node_id": "MDQ6VXNlcjEzMTk0MDQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1319404?v=4", "gravatar_id": "", "url": "https://api.github.com/users/akehrer", "html_url": "https://github.com/akehrer", "followers_url": "https://api.github.com/users/akehrer/followers", "following_url": "https://api.github.com/users/akehrer/following{/other_user}", "gists_url": "https://api.github.com/users/akehrer/gists{/gist_id}", "starred_url": "https://api.github.com/users/akehrer/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/akehrer/subscriptions", "organizations_url": "https://api.github.com/users/akehrer/orgs", "repos_url": "https://api.github.com/users/akehrer/repos", "events_url": "https://api.github.com/users/akehrer/events{/privacy}", "received_events_url": "https://api.github.com/users/akehrer/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 727708732, "node_id": "MDU6TGFiZWw3Mjc3MDg3MzI=", "url": "https://api.github.com/repos/simonw/datasette/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2020-11-20T18:16:43Z", "updated_at": "2020-12-03T00:57:35Z", "closed_at": "2020-12-03T00:50:17Z", "author_association": "NONE", "active_lock_reason": null, "body": "When I perform an OPTIONS request against a database or table datasette fails with an internal error.\r\n\r\nAll these tests result in the traceback below.\r\n\r\n```\r\ncurl -XOPTIONS http://127.0.0.1:8001/test-db\r\ncurl -XOPTIONS http://127.0.0.1:8001/test-db/table1\r\ncurl -XOPTIONS http://127.0.0.1:8001/test-db/table1\\?_search\\=test\r\n```\r\n\r\n```\r\nTraceback (most recent call last):\r\n  File \"[path-to-python]/site-packages/datasette/app.py\", line 1033, in route_path\r\n    response = await view(request, send)\r\n  File \"[path-to-python]/site-packages/datasette/views/base.py\", line 146, in view\r\n    request, **request.scope[\"url_route\"][\"kwargs\"]\r\n  File \"[path-to-python]/site-packages/datasette/views/base.py\", line 118, in dispatch_request\r\n    return await handler(request, *args, **kwargs)\r\nTypeError: object Response can't be used in 'await' expression\r\n```\r\n\r\nMaking the `options` function in the `DataView` class async fixed it for me.\r\n\r\n```python\r\n    async def options(self, request, *args, **kwargs):\r\n        r = Response.text(\"ok\")\r\n        if self.ds.cors:\r\n            r.headers[\"Access-Control-Allow-Origin\"] = \"*\"\r\n        return r\r\n```", "reactions": {"url": "https://api.github.com/repos/simonw/datasette/issues/1100/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/simonw/datasette/issues/1100/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/simonw/datasette/issues/1098", "repository_url": "https://api.github.com/repos/simonw/datasette", "labels_url": "https://api.github.com/repos/simonw/datasette/issues/1098/labels{/name}", "comments_url": "https://api.github.com/repos/simonw/datasette/issues/1098/comments", "events_url": "https://api.github.com/repos/simonw/datasette/issues/1098/events", "html_url": "https://github.com/simonw/datasette/issues/1098", "id": 743370900, "node_id": "MDU6SXNzdWU3NDMzNzA5MDA=", "number": 1098, "title": "Foreign key links break for compound foreign keys", "user": {"login": "simonw", "id": 9599, "node_id": "MDQ6VXNlcjk1OTk=", "avatar_url": "https://avatars.githubusercontent.com/u/9599?v=4", "gravatar_id": "", "url": "https://api.github.com/users/simonw", "html_url": "https://github.com/simonw", "followers_url": "https://api.github.com/users/simonw/followers", "following_url": "https://api.github.com/users/simonw/following{/other_user}", "gists_url": "https://api.github.com/users/simonw/gists{/gist_id}", "starred_url": "https://api.github.com/users/simonw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/simonw/subscriptions", "organizations_url": "https://api.github.com/users/simonw/orgs", "repos_url": "https://api.github.com/users/simonw/repos", "events_url": "https://api.github.com/users/simonw/events{/privacy}", "received_events_url": "https://api.github.com/users/simonw/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 727708732, "node_id": "MDU6TGFiZWw3Mjc3MDg3MzI=", "url": "https://api.github.com/repos/simonw/datasette/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}, {"id": 729585263, "node_id": "MDU6TGFiZWw3Mjk1ODUyNjM=", "url": "https://api.github.com/repos/simonw/datasette/labels/small", "name": "small", "color": "a7f9b7", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2020-11-15T23:22:14Z", "updated_at": "2020-11-29T19:50:31Z", "closed_at": "2020-11-29T19:30:23Z", "author_association": "OWNER", "active_lock_reason": null, "body": "Reported on Twitter here: https://twitter.com/ZaneSelvans/status/1328093641395548161\r\n\r\n> Maybe I'm doing something wrong here but the automatically generated links based foreign key relationships seem to be working here for utility_id_eia, but not for plant_id_eia & generator_id which seems odd: https://pudl-datasette-xl7xwcpe2a-uc.a.run.app/pudl/generators_eia860\r\n>\r\n> Right now it seems like they're trying to, but with only one of the two keys, so it gives \"Error 500. You did not supply a value for binding 2.\" Maybe only create the links when it's a simple foreign key?", "reactions": {"url": "https://api.github.com/repos/simonw/datasette/issues/1098/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/simonw/datasette/issues/1098/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/simonw/datasette/issues/1091", "repository_url": "https://api.github.com/repos/simonw/datasette", "labels_url": "https://api.github.com/repos/simonw/datasette/issues/1091/labels{/name}", "comments_url": "https://api.github.com/repos/simonw/datasette/issues/1091/comments", "events_url": "https://api.github.com/repos/simonw/datasette/issues/1091/events", "html_url": "https://github.com/simonw/datasette/issues/1091", "id": 742011049, "node_id": "MDU6SXNzdWU3NDIwMTEwNDk=", "number": 1091, "title": ".json and .csv exports fail to apply base_url", "user": {"login": "simonw", "id": 9599, "node_id": "MDQ6VXNlcjk1OTk=", "avatar_url": "https://avatars.githubusercontent.com/u/9599?v=4", "gravatar_id": "", "url": "https://api.github.com/users/simonw", "html_url": "https://github.com/simonw", "followers_url": "https://api.github.com/users/simonw/followers", "following_url": "https://api.github.com/users/simonw/following{/other_user}", "gists_url": "https://api.github.com/users/simonw/gists{/gist_id}", "starred_url": "https://api.github.com/users/simonw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/simonw/subscriptions", "organizations_url": "https://api.github.com/users/simonw/orgs", "repos_url": "https://api.github.com/users/simonw/repos", "events_url": "https://api.github.com/users/simonw/events{/privacy}", "received_events_url": "https://api.github.com/users/simonw/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 727708732, "node_id": "MDU6TGFiZWw3Mjc3MDg3MzI=", "url": "https://api.github.com/repos/simonw/datasette/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/simonw/datasette/milestones/22", "html_url": "https://github.com/simonw/datasette/milestone/22", "labels_url": "https://api.github.com/repos/simonw/datasette/milestones/22/labels", "id": 6346396, "node_id": "MDk6TWlsZXN0b25lNjM0NjM5Ng==", "number": 22, "title": "Datasette 0.54", "description": "", "creator": {"login": "simonw", "id": 9599, "node_id": "MDQ6VXNlcjk1OTk=", "avatar_url": "https://avatars.githubusercontent.com/u/9599?v=4", "gravatar_id": "", "url": "https://api.github.com/users/simonw", "html_url": "https://github.com/simonw", "followers_url": "https://api.github.com/users/simonw/followers", "following_url": "https://api.github.com/users/simonw/following{/other_user}", "gists_url": "https://api.github.com/users/simonw/gists{/gist_id}", "starred_url": "https://api.github.com/users/simonw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/simonw/subscriptions", "organizations_url": "https://api.github.com/users/simonw/orgs", "repos_url": "https://api.github.com/users/simonw/repos", "events_url": "https://api.github.com/users/simonw/events{/privacy}", "received_events_url": "https://api.github.com/users/simonw/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 19, "state": "closed", "created_at": "2021-01-24T21:18:58Z", "updated_at": "2022-01-13T22:22:24Z", "due_on": null, "closed_at": "2022-01-13T22:22:24Z"}, "comments": 22, "created_at": "2020-11-12T23:45:16Z", "updated_at": "2021-01-24T21:20:24Z", "closed_at": "2021-01-09T22:19:29Z", "author_association": "OWNER", "active_lock_reason": null, "body": "> Just tested with the latest Docker image, and it works pretty much everywhere!  THANK YOU!\r\n> \r\n> I did notice that if I try to export json or csv, the base is not applied.  Not sure if I should reopen this issue or open a new one.\r\n> \r\n> To see this, go here: https://corpora.tika.apache.org/datasette/corpora-metadata/REF_PARSE_EXCEPTION_TYPES\r\n> \r\n> Click/hover over json or CSV and you'll see that the 'datasette' base is not included.\r\n\r\n_Originally posted by @tballison in https://github.com/simonw/datasette/issues/865#issuecomment-726385422_", "reactions": {"url": "https://api.github.com/repos/simonw/datasette/issues/1091/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/simonw/datasette/issues/1091/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/simonw/datasette/issues/1088", "repository_url": "https://api.github.com/repos/simonw/datasette", "labels_url": "https://api.github.com/repos/simonw/datasette/issues/1088/labels{/name}", "comments_url": "https://api.github.com/repos/simonw/datasette/issues/1088/comments", "events_url": "https://api.github.com/repos/simonw/datasette/issues/1088/events", "html_url": "https://github.com/simonw/datasette/issues/1088", "id": 741268956, "node_id": "MDU6SXNzdWU3NDEyNjg5NTY=", "number": 1088, "title": "OperationalError('interrupted') can 500 on row page", "user": {"login": "simonw", "id": 9599, "node_id": "MDQ6VXNlcjk1OTk=", "avatar_url": "https://avatars.githubusercontent.com/u/9599?v=4", "gravatar_id": "", "url": "https://api.github.com/users/simonw", "html_url": "https://github.com/simonw", "followers_url": "https://api.github.com/users/simonw/followers", "following_url": "https://api.github.com/users/simonw/following{/other_user}", "gists_url": "https://api.github.com/users/simonw/gists{/gist_id}", "starred_url": "https://api.github.com/users/simonw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/simonw/subscriptions", "organizations_url": "https://api.github.com/users/simonw/orgs", "repos_url": "https://api.github.com/users/simonw/repos", "events_url": "https://api.github.com/users/simonw/events{/privacy}", "received_events_url": "https://api.github.com/users/simonw/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 727708732, "node_id": "MDU6TGFiZWw3Mjc3MDg3MzI=", "url": "https://api.github.com/repos/simonw/datasette/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/simonw/datasette/milestones/20", "html_url": "https://github.com/simonw/datasette/milestone/20", "labels_url": "https://api.github.com/repos/simonw/datasette/milestones/20/labels", "id": 6055094, "node_id": "MDk6TWlsZXN0b25lNjA1NTA5NA==", "number": 20, "title": "Datasette 0.52", "description": "", "creator": {"login": "simonw", "id": 9599, "node_id": "MDQ6VXNlcjk1OTk=", "avatar_url": "https://avatars.githubusercontent.com/u/9599?v=4", "gravatar_id": "", "url": "https://api.github.com/users/simonw", "html_url": "https://github.com/simonw", "followers_url": "https://api.github.com/users/simonw/followers", "following_url": "https://api.github.com/users/simonw/following{/other_user}", "gists_url": "https://api.github.com/users/simonw/gists{/gist_id}", "starred_url": "https://api.github.com/users/simonw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/simonw/subscriptions", "organizations_url": "https://api.github.com/users/simonw/orgs", "repos_url": "https://api.github.com/users/simonw/repos", "events_url": "https://api.github.com/users/simonw/events{/privacy}", "received_events_url": "https://api.github.com/users/simonw/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 15, "state": "closed", "created_at": "2020-11-01T04:57:10Z", "updated_at": "2020-11-29T02:43:04Z", "due_on": null, "closed_at": "2020-11-29T02:43:04Z"}, "comments": 3, "created_at": "2020-11-12T04:29:55Z", "updated_at": "2020-11-28T23:28:35Z", "closed_at": "2020-11-12T04:36:52Z", "author_association": "OWNER", "active_lock_reason": null, "body": "I got this on my (private) https://dogsheep.simonwillison.net/twitter/tweets/1188612004572880896 page:\r\n\r\n<img width=\"1059\" alt=\"Error_500\" src=\"https://user-images.githubusercontent.com/9599/98895899-a6440980-245c-11eb-98e8-fb97d10ec2fd.png\">\r\n", "reactions": {"url": "https://api.github.com/repos/simonw/datasette/issues/1088/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/simonw/datasette/issues/1088/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/simonw/datasette/issues/1086", "repository_url": "https://api.github.com/repos/simonw/datasette", "labels_url": "https://api.github.com/repos/simonw/datasette/issues/1086/labels{/name}", "comments_url": "https://api.github.com/repos/simonw/datasette/issues/1086/comments", "events_url": "https://api.github.com/repos/simonw/datasette/issues/1086/events", "html_url": "https://github.com/simonw/datasette/issues/1086", "id": 741021342, "node_id": "MDU6SXNzdWU3NDEwMjEzNDI=", "number": 1086, "title": "Foreign keys with blank titles result in non-clickable links", "user": {"login": "simonw", "id": 9599, "node_id": "MDQ6VXNlcjk1OTk=", "avatar_url": "https://avatars.githubusercontent.com/u/9599?v=4", "gravatar_id": "", "url": "https://api.github.com/users/simonw", "html_url": "https://github.com/simonw", "followers_url": "https://api.github.com/users/simonw/followers", "following_url": "https://api.github.com/users/simonw/following{/other_user}", "gists_url": "https://api.github.com/users/simonw/gists{/gist_id}", "starred_url": "https://api.github.com/users/simonw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/simonw/subscriptions", "organizations_url": "https://api.github.com/users/simonw/orgs", "repos_url": "https://api.github.com/users/simonw/repos", "events_url": "https://api.github.com/users/simonw/events{/privacy}", "received_events_url": "https://api.github.com/users/simonw/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 727708732, "node_id": "MDU6TGFiZWw3Mjc3MDg3MzI=", "url": "https://api.github.com/repos/simonw/datasette/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/simonw/datasette/milestones/20", "html_url": "https://github.com/simonw/datasette/milestone/20", "labels_url": "https://api.github.com/repos/simonw/datasette/milestones/20/labels", "id": 6055094, "node_id": "MDk6TWlsZXN0b25lNjA1NTA5NA==", "number": 20, "title": "Datasette 0.52", "description": "", "creator": {"login": "simonw", "id": 9599, "node_id": "MDQ6VXNlcjk1OTk=", "avatar_url": "https://avatars.githubusercontent.com/u/9599?v=4", "gravatar_id": "", "url": "https://api.github.com/users/simonw", "html_url": "https://github.com/simonw", "followers_url": "https://api.github.com/users/simonw/followers", "following_url": "https://api.github.com/users/simonw/following{/other_user}", "gists_url": "https://api.github.com/users/simonw/gists{/gist_id}", "starred_url": "https://api.github.com/users/simonw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/simonw/subscriptions", "organizations_url": "https://api.github.com/users/simonw/orgs", "repos_url": "https://api.github.com/users/simonw/repos", "events_url": "https://api.github.com/users/simonw/events{/privacy}", "received_events_url": "https://api.github.com/users/simonw/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 15, "state": "closed", "created_at": "2020-11-01T04:57:10Z", "updated_at": "2020-11-29T02:43:04Z", "due_on": null, "closed_at": "2020-11-29T02:43:04Z"}, "comments": 3, "created_at": "2020-11-11T19:41:09Z", "updated_at": "2020-11-28T23:28:29Z", "closed_at": "2020-11-11T23:46:20Z", "author_association": "OWNER", "active_lock_reason": null, "body": "<img width=\"851\" alt=\"index__core_snapshot_tags__3_rows_and_swarm__select_venues_name__checkins_id__createdAt__type__timeZoneOffset__editableUntil___like___isMayor__source__venue__createdBy__event__sticker__created__comments_count__entities__shout__checkins_priv\" src=\"https://user-images.githubusercontent.com/9599/98856656-bafbaf80-2412-11eb-8070-4f3a47511973.png\">\r\n\r\nThe HTML looks like this:\r\n\r\n```html\r\n<td class=\"col-tag_id type-int\"><a href=\"/index/core_tag/1\"></a>&nbsp;<em>1</em></td>\r\n```\r\n", "reactions": {"url": "https://api.github.com/repos/simonw/datasette/issues/1086/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/simonw/datasette/issues/1086/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/simonw/datasette/issues/1084", "repository_url": "https://api.github.com/repos/simonw/datasette", "labels_url": "https://api.github.com/repos/simonw/datasette/issues/1084/labels{/name}", "comments_url": "https://api.github.com/repos/simonw/datasette/issues/1084/comments", "events_url": "https://api.github.com/repos/simonw/datasette/issues/1084/events", "html_url": "https://github.com/simonw/datasette/issues/1084", "id": 737394470, "node_id": "MDU6SXNzdWU3MzczOTQ0NzA=", "number": 1084, "title": "Table/database action menu cut off if too short ", "user": {"login": "simonw", "id": 9599, "node_id": "MDQ6VXNlcjk1OTk=", "avatar_url": "https://avatars.githubusercontent.com/u/9599?v=4", "gravatar_id": "", "url": "https://api.github.com/users/simonw", "html_url": "https://github.com/simonw", "followers_url": "https://api.github.com/users/simonw/followers", "following_url": "https://api.github.com/users/simonw/following{/other_user}", "gists_url": "https://api.github.com/users/simonw/gists{/gist_id}", "starred_url": "https://api.github.com/users/simonw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/simonw/subscriptions", "organizations_url": "https://api.github.com/users/simonw/orgs", "repos_url": "https://api.github.com/users/simonw/repos", "events_url": "https://api.github.com/users/simonw/events{/privacy}", "received_events_url": "https://api.github.com/users/simonw/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 727708732, "node_id": "MDU6TGFiZWw3Mjc3MDg3MzI=", "url": "https://api.github.com/repos/simonw/datasette/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}, {"id": 1918831023, "node_id": "MDU6TGFiZWwxOTE4ODMxMDIz", "url": "https://api.github.com/repos/simonw/datasette/labels/css", "name": "css", "color": "7261dd", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/simonw/datasette/milestones/20", "html_url": "https://github.com/simonw/datasette/milestone/20", "labels_url": "https://api.github.com/repos/simonw/datasette/milestones/20/labels", "id": 6055094, "node_id": "MDk6TWlsZXN0b25lNjA1NTA5NA==", "number": 20, "title": "Datasette 0.52", "description": "", "creator": {"login": "simonw", "id": 9599, "node_id": "MDQ6VXNlcjk1OTk=", "avatar_url": "https://avatars.githubusercontent.com/u/9599?v=4", "gravatar_id": "", "url": "https://api.github.com/users/simonw", "html_url": "https://github.com/simonw", "followers_url": "https://api.github.com/users/simonw/followers", "following_url": "https://api.github.com/users/simonw/following{/other_user}", "gists_url": "https://api.github.com/users/simonw/gists{/gist_id}", "starred_url": "https://api.github.com/users/simonw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/simonw/subscriptions", "organizations_url": "https://api.github.com/users/simonw/orgs", "repos_url": "https://api.github.com/users/simonw/repos", "events_url": "https://api.github.com/users/simonw/events{/privacy}", "received_events_url": "https://api.github.com/users/simonw/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 15, "state": "closed", "created_at": "2020-11-01T04:57:10Z", "updated_at": "2020-11-29T02:43:04Z", "due_on": null, "closed_at": "2020-11-29T02:43:04Z"}, "comments": 4, "created_at": "2020-11-06T01:55:23Z", "updated_at": "2020-11-21T23:45:59Z", "closed_at": "2020-11-21T23:45:59Z", "author_association": "OWNER", "active_lock_reason": null, "body": "![3CC0C181-959E-4B20-BE39-806ED93E833E](https://user-images.githubusercontent.com/9599/98316836-03891800-1f90-11eb-9e52-5266baf33296.jpeg)\r\n", "reactions": {"url": "https://api.github.com/repos/simonw/datasette/issues/1084/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/simonw/datasette/issues/1084/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/simonw/datasette/issues/1075", "repository_url": "https://api.github.com/repos/simonw/datasette", "labels_url": "https://api.github.com/repos/simonw/datasette/issues/1075/labels{/name}", "comments_url": "https://api.github.com/repos/simonw/datasette/issues/1075/comments", "events_url": "https://api.github.com/repos/simonw/datasette/issues/1075/events", "html_url": "https://github.com/simonw/datasette/issues/1075", "id": 733796942, "node_id": "MDU6SXNzdWU3MzM3OTY5NDI=", "number": 1075, "title": "PrefixedUrlString mechanism broke everything", "user": {"login": "simonw", "id": 9599, "node_id": "MDQ6VXNlcjk1OTk=", "avatar_url": "https://avatars.githubusercontent.com/u/9599?v=4", "gravatar_id": "", "url": "https://api.github.com/users/simonw", "html_url": "https://github.com/simonw", "followers_url": "https://api.github.com/users/simonw/followers", "following_url": "https://api.github.com/users/simonw/following{/other_user}", "gists_url": "https://api.github.com/users/simonw/gists{/gist_id}", "starred_url": "https://api.github.com/users/simonw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/simonw/subscriptions", "organizations_url": "https://api.github.com/users/simonw/orgs", "repos_url": "https://api.github.com/users/simonw/repos", "events_url": "https://api.github.com/users/simonw/events{/privacy}", "received_events_url": "https://api.github.com/users/simonw/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 727708732, "node_id": "MDU6TGFiZWw3Mjc3MDg3MzI=", "url": "https://api.github.com/repos/simonw/datasette/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/simonw/datasette/milestones/19", "html_url": "https://github.com/simonw/datasette/milestone/19", "labels_url": "https://api.github.com/repos/simonw/datasette/milestones/19/labels", "id": 6026070, "node_id": "MDk6TWlsZXN0b25lNjAyNjA3MA==", "number": 19, "title": "0.51", "description": "A new visual design, plugin hooks for adding navigation options, better handling of binary data, URL building utility methods and better support for running Datasette behind a proxy.", "creator": {"login": "simonw", "id": 9599, "node_id": "MDQ6VXNlcjk1OTk=", "avatar_url": "https://avatars.githubusercontent.com/u/9599?v=4", "gravatar_id": "", "url": "https://api.github.com/users/simonw", "html_url": "https://github.com/simonw", "followers_url": "https://api.github.com/users/simonw/followers", "following_url": "https://api.github.com/users/simonw/following{/other_user}", "gists_url": "https://api.github.com/users/simonw/gists{/gist_id}", "starred_url": "https://api.github.com/users/simonw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/simonw/subscriptions", "organizations_url": "https://api.github.com/users/simonw/orgs", "repos_url": "https://api.github.com/users/simonw/repos", "events_url": "https://api.github.com/users/simonw/events{/privacy}", "received_events_url": "https://api.github.com/users/simonw/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 53, "state": "closed", "created_at": "2020-10-23T19:42:45Z", "updated_at": "2021-11-20T19:35:48Z", "due_on": null, "closed_at": "2020-10-31T22:35:05Z"}, "comments": 6, "created_at": "2020-10-31T19:58:05Z", "updated_at": "2020-10-31T20:48:51Z", "closed_at": "2020-10-31T20:48:51Z", "author_association": "OWNER", "active_lock_reason": null, "body": "Added in 7a67bc7a569509d65b3a8661e0ad2c65f0b09166 refs #1026. Lots of tests are failing now.", "reactions": {"url": "https://api.github.com/repos/simonw/datasette/issues/1075/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/simonw/datasette/issues/1075/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/simonw/datasette/issues/1072", "repository_url": "https://api.github.com/repos/simonw/datasette", "labels_url": "https://api.github.com/repos/simonw/datasette/issues/1072/labels{/name}", "comments_url": "https://api.github.com/repos/simonw/datasette/issues/1072/comments", "events_url": "https://api.github.com/repos/simonw/datasette/issues/1072/events", "html_url": "https://github.com/simonw/datasette/issues/1072", "id": 733499930, "node_id": "MDU6SXNzdWU3MzM0OTk5MzA=", "number": 1072, "title": "load_template hook doesn't work for include/extends", "user": {"login": "simonw", "id": 9599, "node_id": "MDQ6VXNlcjk1OTk=", "avatar_url": "https://avatars.githubusercontent.com/u/9599?v=4", "gravatar_id": "", "url": "https://api.github.com/users/simonw", "html_url": "https://github.com/simonw", "followers_url": "https://api.github.com/users/simonw/followers", "following_url": "https://api.github.com/users/simonw/following{/other_user}", "gists_url": "https://api.github.com/users/simonw/gists{/gist_id}", "starred_url": "https://api.github.com/users/simonw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/simonw/subscriptions", "organizations_url": "https://api.github.com/users/simonw/orgs", "repos_url": "https://api.github.com/users/simonw/repos", "events_url": "https://api.github.com/users/simonw/events{/privacy}", "received_events_url": "https://api.github.com/users/simonw/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 727708732, "node_id": "MDU6TGFiZWw3Mjc3MDg3MzI=", "url": "https://api.github.com/repos/simonw/datasette/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}, {"id": 754269786, "node_id": "MDU6TGFiZWw3NTQyNjk3ODY=", "url": "https://api.github.com/repos/simonw/datasette/labels/plugins", "name": "plugins", "color": "f759cf", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/simonw/datasette/milestones/19", "html_url": "https://github.com/simonw/datasette/milestone/19", "labels_url": "https://api.github.com/repos/simonw/datasette/milestones/19/labels", "id": 6026070, "node_id": "MDk6TWlsZXN0b25lNjAyNjA3MA==", "number": 19, "title": "0.51", "description": "A new visual design, plugin hooks for adding navigation options, better handling of binary data, URL building utility methods and better support for running Datasette behind a proxy.", "creator": {"login": "simonw", "id": 9599, "node_id": "MDQ6VXNlcjk1OTk=", "avatar_url": "https://avatars.githubusercontent.com/u/9599?v=4", "gravatar_id": "", "url": "https://api.github.com/users/simonw", "html_url": "https://github.com/simonw", "followers_url": "https://api.github.com/users/simonw/followers", "following_url": "https://api.github.com/users/simonw/following{/other_user}", "gists_url": "https://api.github.com/users/simonw/gists{/gist_id}", "starred_url": "https://api.github.com/users/simonw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/simonw/subscriptions", "organizations_url": "https://api.github.com/users/simonw/orgs", "repos_url": "https://api.github.com/users/simonw/repos", "events_url": "https://api.github.com/users/simonw/events{/privacy}", "received_events_url": "https://api.github.com/users/simonw/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 53, "state": "closed", "created_at": "2020-10-23T19:42:45Z", "updated_at": "2021-11-20T19:35:48Z", "due_on": null, "closed_at": "2020-10-31T22:35:05Z"}, "comments": 20, "created_at": "2020-10-30T20:33:44Z", "updated_at": "2020-10-31T20:48:18Z", "closed_at": "2020-10-30T22:50:57Z", "author_association": "OWNER", "active_lock_reason": null, "body": "Includes like this one always go to disk, without hitting the `load_template` plugin hook:\r\n```html+jinja\r\n<footer class=\"ft\">{% block footer %}{% include \"_footer.html\" %}{% endblock %}</footer>\r\n```", "reactions": {"url": "https://api.github.com/repos/simonw/datasette/issues/1072/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/simonw/datasette/issues/1072/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/simonw/datasette/issues/1071", "repository_url": "https://api.github.com/repos/simonw/datasette", "labels_url": "https://api.github.com/repos/simonw/datasette/issues/1071/labels{/name}", "comments_url": "https://api.github.com/repos/simonw/datasette/issues/1071/comments", "events_url": "https://api.github.com/repos/simonw/datasette/issues/1071/events", "html_url": "https://github.com/simonw/datasette/issues/1071", "id": 733485423, "node_id": "MDU6SXNzdWU3MzM0ODU0MjM=", "number": 1071, "title": "Messages should be displayed full width", "user": {"login": "simonw", "id": 9599, "node_id": "MDQ6VXNlcjk1OTk=", "avatar_url": "https://avatars.githubusercontent.com/u/9599?v=4", "gravatar_id": "", "url": "https://api.github.com/users/simonw", "html_url": "https://github.com/simonw", "followers_url": "https://api.github.com/users/simonw/followers", "following_url": "https://api.github.com/users/simonw/following{/other_user}", "gists_url": "https://api.github.com/users/simonw/gists{/gist_id}", "starred_url": "https://api.github.com/users/simonw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/simonw/subscriptions", "organizations_url": "https://api.github.com/users/simonw/orgs", "repos_url": "https://api.github.com/users/simonw/repos", "events_url": "https://api.github.com/users/simonw/events{/privacy}", "received_events_url": "https://api.github.com/users/simonw/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 727708732, "node_id": "MDU6TGFiZWw3Mjc3MDg3MzI=", "url": "https://api.github.com/repos/simonw/datasette/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}, {"id": 1918831023, "node_id": "MDU6TGFiZWwxOTE4ODMxMDIz", "url": "https://api.github.com/repos/simonw/datasette/labels/css", "name": "css", "color": "7261dd", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/simonw/datasette/milestones/19", "html_url": "https://github.com/simonw/datasette/milestone/19", "labels_url": "https://api.github.com/repos/simonw/datasette/milestones/19/labels", "id": 6026070, "node_id": "MDk6TWlsZXN0b25lNjAyNjA3MA==", "number": 19, "title": "0.51", "description": "A new visual design, plugin hooks for adding navigation options, better handling of binary data, URL building utility methods and better support for running Datasette behind a proxy.", "creator": {"login": "simonw", "id": 9599, "node_id": "MDQ6VXNlcjk1OTk=", "avatar_url": "https://avatars.githubusercontent.com/u/9599?v=4", "gravatar_id": "", "url": "https://api.github.com/users/simonw", "html_url": "https://github.com/simonw", "followers_url": "https://api.github.com/users/simonw/followers", "following_url": "https://api.github.com/users/simonw/following{/other_user}", "gists_url": "https://api.github.com/users/simonw/gists{/gist_id}", "starred_url": "https://api.github.com/users/simonw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/simonw/subscriptions", "organizations_url": "https://api.github.com/users/simonw/orgs", "repos_url": "https://api.github.com/users/simonw/repos", "events_url": "https://api.github.com/users/simonw/events{/privacy}", "received_events_url": "https://api.github.com/users/simonw/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 53, "state": "closed", "created_at": "2020-10-23T19:42:45Z", "updated_at": "2021-11-20T19:35:48Z", "due_on": null, "closed_at": "2020-10-31T22:35:05Z"}, "comments": 1, "created_at": "2020-10-30T20:11:35Z", "updated_at": "2020-10-30T20:20:02Z", "closed_at": "2020-10-30T20:13:05Z", "author_association": "OWNER", "active_lock_reason": null, "body": "In the pattern portfolio:\r\n\r\n<img width=\"907\" alt=\"Datasette__Pattern_Portfolio_and_datasette_\u2014_pipenv_shell_\u25b8_Python_\u2014_142\u00d748\" src=\"https://user-images.githubusercontent.com/9599/97752509-5a36b380-1ab1-11eb-9a26-700cb295fe11.png\">\r\n\r\nBut they're currently showing like this:\r\n\r\n<img width=\"901\" alt=\"Datasette___memory_\" src=\"https://user-images.githubusercontent.com/9599/97752544-69b5fc80-1ab1-11eb-80c2-c88aabe6a832.png\">\r\n", "reactions": {"url": "https://api.github.com/repos/simonw/datasette/issues/1071/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/simonw/datasette/issues/1071/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/simonw/datasette/issues/1052", "repository_url": "https://api.github.com/repos/simonw/datasette", "labels_url": "https://api.github.com/repos/simonw/datasette/issues/1052/labels{/name}", "comments_url": "https://api.github.com/repos/simonw/datasette/issues/1052/comments", "events_url": "https://api.github.com/repos/simonw/datasette/issues/1052/events", "html_url": "https://github.com/simonw/datasette/issues/1052", "id": 729183332, "node_id": "MDU6SXNzdWU3MjkxODMzMzI=", "number": 1052, "title": "Column action menu overlapped by Leaflet maps", "user": {"login": "simonw", "id": 9599, "node_id": "MDQ6VXNlcjk1OTk=", "avatar_url": "https://avatars.githubusercontent.com/u/9599?v=4", "gravatar_id": "", "url": "https://api.github.com/users/simonw", "html_url": "https://github.com/simonw", "followers_url": "https://api.github.com/users/simonw/followers", "following_url": "https://api.github.com/users/simonw/following{/other_user}", "gists_url": "https://api.github.com/users/simonw/gists{/gist_id}", "starred_url": "https://api.github.com/users/simonw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/simonw/subscriptions", "organizations_url": "https://api.github.com/users/simonw/orgs", "repos_url": "https://api.github.com/users/simonw/repos", "events_url": "https://api.github.com/users/simonw/events{/privacy}", "received_events_url": "https://api.github.com/users/simonw/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 727708732, "node_id": "MDU6TGFiZWw3Mjc3MDg3MzI=", "url": "https://api.github.com/repos/simonw/datasette/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}, {"id": 754269786, "node_id": "MDU6TGFiZWw3NTQyNjk3ODY=", "url": "https://api.github.com/repos/simonw/datasette/labels/plugins", "name": "plugins", "color": "f759cf", "default": false, "description": null}, {"id": 1918831023, "node_id": "MDU6TGFiZWwxOTE4ODMxMDIz", "url": "https://api.github.com/repos/simonw/datasette/labels/css", "name": "css", "color": "7261dd", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/simonw/datasette/milestones/19", "html_url": "https://github.com/simonw/datasette/milestone/19", "labels_url": "https://api.github.com/repos/simonw/datasette/milestones/19/labels", "id": 6026070, "node_id": "MDk6TWlsZXN0b25lNjAyNjA3MA==", "number": 19, "title": "0.51", "description": "A new visual design, plugin hooks for adding navigation options, better handling of binary data, URL building utility methods and better support for running Datasette behind a proxy.", "creator": {"login": "simonw", "id": 9599, "node_id": "MDQ6VXNlcjk1OTk=", "avatar_url": "https://avatars.githubusercontent.com/u/9599?v=4", "gravatar_id": "", "url": "https://api.github.com/users/simonw", "html_url": "https://github.com/simonw", "followers_url": "https://api.github.com/users/simonw/followers", "following_url": "https://api.github.com/users/simonw/following{/other_user}", "gists_url": "https://api.github.com/users/simonw/gists{/gist_id}", "starred_url": "https://api.github.com/users/simonw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/simonw/subscriptions", "organizations_url": "https://api.github.com/users/simonw/orgs", "repos_url": "https://api.github.com/users/simonw/repos", "events_url": "https://api.github.com/users/simonw/events{/privacy}", "received_events_url": "https://api.github.com/users/simonw/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 53, "state": "closed", "created_at": "2020-10-23T19:42:45Z", "updated_at": "2021-11-20T19:35:48Z", "due_on": null, "closed_at": "2020-10-31T22:35:05Z"}, "comments": 1, "created_at": "2020-10-26T02:17:29Z", "updated_at": "2020-10-27T20:52:04Z", "closed_at": "2020-10-26T02:19:36Z", "author_association": "OWNER", "active_lock_reason": null, "body": "Using `datasette-leaflet-geojson`:\r\n\r\n<img width=\"913\" alt=\"Cursor_and_benches__benches__17_387_rows\" src=\"https://user-images.githubusercontent.com/9599/97127361-a4f1ad80-16f6-11eb-9c81-91ba7c990982.png\">", "reactions": {"url": "https://api.github.com/repos/simonw/datasette/issues/1052/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/simonw/datasette/issues/1052/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/simonw/datasette/issues/1025", "repository_url": "https://api.github.com/repos/simonw/datasette", "labels_url": "https://api.github.com/repos/simonw/datasette/issues/1025/labels{/name}", "comments_url": "https://api.github.com/repos/simonw/datasette/issues/1025/comments", "events_url": "https://api.github.com/repos/simonw/datasette/issues/1025/events", "html_url": "https://github.com/simonw/datasette/issues/1025", "id": 722724086, "node_id": "MDU6SXNzdWU3MjI3MjQwODY=", "number": 1025, "title": "Fix last remaining links to \"/\" that do not respect base_url", "user": {"login": "simonw", "id": 9599, "node_id": "MDQ6VXNlcjk1OTk=", "avatar_url": "https://avatars.githubusercontent.com/u/9599?v=4", "gravatar_id": "", "url": "https://api.github.com/users/simonw", "html_url": "https://github.com/simonw", "followers_url": "https://api.github.com/users/simonw/followers", "following_url": "https://api.github.com/users/simonw/following{/other_user}", "gists_url": "https://api.github.com/users/simonw/gists{/gist_id}", "starred_url": "https://api.github.com/users/simonw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/simonw/subscriptions", "organizations_url": "https://api.github.com/users/simonw/orgs", "repos_url": "https://api.github.com/users/simonw/repos", "events_url": "https://api.github.com/users/simonw/events{/privacy}", "received_events_url": "https://api.github.com/users/simonw/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 727708732, "node_id": "MDU6TGFiZWw3Mjc3MDg3MzI=", "url": "https://api.github.com/repos/simonw/datasette/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/simonw/datasette/milestones/19", "html_url": "https://github.com/simonw/datasette/milestone/19", "labels_url": "https://api.github.com/repos/simonw/datasette/milestones/19/labels", "id": 6026070, "node_id": "MDk6TWlsZXN0b25lNjAyNjA3MA==", "number": 19, "title": "0.51", "description": "A new visual design, plugin hooks for adding navigation options, better handling of binary data, URL building utility methods and better support for running Datasette behind a proxy.", "creator": {"login": "simonw", "id": 9599, "node_id": "MDQ6VXNlcjk1OTk=", "avatar_url": "https://avatars.githubusercontent.com/u/9599?v=4", "gravatar_id": "", "url": "https://api.github.com/users/simonw", "html_url": "https://github.com/simonw", "followers_url": "https://api.github.com/users/simonw/followers", "following_url": "https://api.github.com/users/simonw/following{/other_user}", "gists_url": "https://api.github.com/users/simonw/gists{/gist_id}", "starred_url": "https://api.github.com/users/simonw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/simonw/subscriptions", "organizations_url": "https://api.github.com/users/simonw/orgs", "repos_url": "https://api.github.com/users/simonw/repos", "events_url": "https://api.github.com/users/simonw/events{/privacy}", "received_events_url": "https://api.github.com/users/simonw/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 53, "state": "closed", "created_at": "2020-10-23T19:42:45Z", "updated_at": "2021-11-20T19:35:48Z", "due_on": null, "closed_at": "2020-10-31T22:35:05Z"}, "comments": 7, "created_at": "2020-10-15T22:46:38Z", "updated_at": "2020-10-23T19:44:06Z", "closed_at": "2020-10-20T05:21:29Z", "author_association": "OWNER", "active_lock_reason": null, "body": "Refs #1023\r\n```\r\ndatasette % git grep '\"/\"' -- '*.html'\r\ndatasette/templates/error.html:        <a href=\"/\">home</a>\r\ndatasette/templates/patterns.html:        <a href=\"/\">home</a> /\r\ndatasette/templates/query.html:        <a href=\"/\">home</a> /\r\n```", "reactions": {"url": "https://api.github.com/repos/simonw/datasette/issues/1025/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/simonw/datasette/issues/1025/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/simonw/datasette/issues/1023", "repository_url": "https://api.github.com/repos/simonw/datasette", "labels_url": "https://api.github.com/repos/simonw/datasette/issues/1023/labels{/name}", "comments_url": "https://api.github.com/repos/simonw/datasette/issues/1023/comments", "events_url": "https://api.github.com/repos/simonw/datasette/issues/1023/events", "html_url": "https://github.com/simonw/datasette/issues/1023", "id": 722673818, "node_id": "MDU6SXNzdWU3MjI2NzM4MTg=", "number": 1023, "title": "Fix issues relating to base_url", "user": {"login": "simonw", "id": 9599, "node_id": "MDQ6VXNlcjk1OTk=", "avatar_url": "https://avatars.githubusercontent.com/u/9599?v=4", "gravatar_id": "", "url": "https://api.github.com/users/simonw", "html_url": "https://github.com/simonw", "followers_url": "https://api.github.com/users/simonw/followers", "following_url": "https://api.github.com/users/simonw/following{/other_user}", "gists_url": "https://api.github.com/users/simonw/gists{/gist_id}", "starred_url": "https://api.github.com/users/simonw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/simonw/subscriptions", "organizations_url": "https://api.github.com/users/simonw/orgs", "repos_url": "https://api.github.com/users/simonw/repos", "events_url": "https://api.github.com/users/simonw/events{/privacy}", "received_events_url": "https://api.github.com/users/simonw/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 727708732, "node_id": "MDU6TGFiZWw3Mjc3MDg3MzI=", "url": "https://api.github.com/repos/simonw/datasette/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}, {"id": 2531637209, "node_id": "MDU6TGFiZWwyNTMxNjM3MjA5", "url": "https://api.github.com/repos/simonw/datasette/labels/tracking-issue", "name": "tracking-issue", "color": "26bf03", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/simonw/datasette/milestones/19", "html_url": "https://github.com/simonw/datasette/milestone/19", "labels_url": "https://api.github.com/repos/simonw/datasette/milestones/19/labels", "id": 6026070, "node_id": "MDk6TWlsZXN0b25lNjAyNjA3MA==", "number": 19, "title": "0.51", "description": "A new visual design, plugin hooks for adding navigation options, better handling of binary data, URL building utility methods and better support for running Datasette behind a proxy.", "creator": {"login": "simonw", "id": 9599, "node_id": "MDQ6VXNlcjk1OTk=", "avatar_url": "https://avatars.githubusercontent.com/u/9599?v=4", "gravatar_id": "", "url": "https://api.github.com/users/simonw", "html_url": "https://github.com/simonw", "followers_url": "https://api.github.com/users/simonw/followers", "following_url": "https://api.github.com/users/simonw/following{/other_user}", "gists_url": "https://api.github.com/users/simonw/gists{/gist_id}", "starred_url": "https://api.github.com/users/simonw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/simonw/subscriptions", "organizations_url": "https://api.github.com/users/simonw/orgs", "repos_url": "https://api.github.com/users/simonw/repos", "events_url": "https://api.github.com/users/simonw/events{/privacy}", "received_events_url": "https://api.github.com/users/simonw/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 53, "state": "closed", "created_at": "2020-10-23T19:42:45Z", "updated_at": "2021-11-20T19:35:48Z", "due_on": null, "closed_at": "2020-10-31T22:35:05Z"}, "comments": 3, "created_at": "2020-10-15T21:02:06Z", "updated_at": "2020-11-24T19:51:44Z", "closed_at": "2020-10-31T20:51:01Z", "author_association": "OWNER", "active_lock_reason": null, "body": "Lots of `base_url` bugs that I'd like to solve at once.", "reactions": {"url": "https://api.github.com/repos/simonw/datasette/issues/1023/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/simonw/datasette/issues/1023/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/simonw/datasette/issues/1011", "repository_url": "https://api.github.com/repos/simonw/datasette", "labels_url": "https://api.github.com/repos/simonw/datasette/issues/1011/labels{/name}", "comments_url": "https://api.github.com/repos/simonw/datasette/issues/1011/comments", "events_url": "https://api.github.com/repos/simonw/datasette/issues/1011/events", "html_url": "https://github.com/simonw/datasette/issues/1011", "id": 718521469, "node_id": "MDU6SXNzdWU3MTg1MjE0Njk=", "number": 1011, "title": "column name links broken in 0.50.1", "user": {"login": "mhalle", "id": 649467, "node_id": "MDQ6VXNlcjY0OTQ2Nw==", "avatar_url": "https://avatars.githubusercontent.com/u/649467?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mhalle", "html_url": "https://github.com/mhalle", "followers_url": "https://api.github.com/users/mhalle/followers", "following_url": "https://api.github.com/users/mhalle/following{/other_user}", "gists_url": "https://api.github.com/users/mhalle/gists{/gist_id}", "starred_url": "https://api.github.com/users/mhalle/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mhalle/subscriptions", "organizations_url": "https://api.github.com/users/mhalle/orgs", "repos_url": "https://api.github.com/users/mhalle/repos", "events_url": "https://api.github.com/users/mhalle/events{/privacy}", "received_events_url": "https://api.github.com/users/mhalle/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 727708732, "node_id": "MDU6TGFiZWw3Mjc3MDg3MzI=", "url": "https://api.github.com/repos/simonw/datasette/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2020-10-10T03:37:51Z", "updated_at": "2020-10-10T04:09:32Z", "closed_at": "2020-10-10T03:52:07Z", "author_association": "NONE", "active_lock_reason": null, "body": "I just upgraded from 0.49 to 0.50.1 and found that the links on column headers are broken. \r\n\r\nIf I inspect the source, they have a leading \"//\" (without host or port) rather than including base_url like other links on the page do. The links in the \"gears\" menu for each column do work.\r\n\r\n I don't have custom templates for my project. \r\n", "reactions": {"url": "https://api.github.com/repos/simonw/datasette/issues/1011/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/simonw/datasette/issues/1011/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/simonw/datasette/issues/1010", "repository_url": "https://api.github.com/repos/simonw/datasette", "labels_url": "https://api.github.com/repos/simonw/datasette/issues/1010/labels{/name}", "comments_url": "https://api.github.com/repos/simonw/datasette/issues/1010/comments", "events_url": "https://api.github.com/repos/simonw/datasette/issues/1010/events", "html_url": "https://github.com/simonw/datasette/issues/1010", "id": 718484082, "node_id": "MDU6SXNzdWU3MTg0ODQwODI=", "number": 1010, "title": "json / CSV links are broken in Datasette 0.50", "user": {"login": "simonw", "id": 9599, "node_id": "MDQ6VXNlcjk1OTk=", "avatar_url": "https://avatars.githubusercontent.com/u/9599?v=4", "gravatar_id": "", "url": "https://api.github.com/users/simonw", "html_url": "https://github.com/simonw", "followers_url": "https://api.github.com/users/simonw/followers", "following_url": "https://api.github.com/users/simonw/following{/other_user}", "gists_url": "https://api.github.com/users/simonw/gists{/gist_id}", "starred_url": "https://api.github.com/users/simonw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/simonw/subscriptions", "organizations_url": "https://api.github.com/users/simonw/orgs", "repos_url": "https://api.github.com/users/simonw/repos", "events_url": "https://api.github.com/users/simonw/events{/privacy}", "received_events_url": "https://api.github.com/users/simonw/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 727708732, "node_id": "MDU6TGFiZWw3Mjc3MDg3MzI=", "url": "https://api.github.com/repos/simonw/datasette/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2020-10-10T00:07:42Z", "updated_at": "2020-10-10T02:32:03Z", "closed_at": "2020-10-10T02:32:03Z", "author_association": "OWNER", "active_lock_reason": null, "body": "e.g. on https://latest.datasette.io/fixtures/sortable\r\n\r\nThat export link block is  broken. The HTML is:\r\n\r\n```html\r\n<p class=\"export-links\">\r\n  This data as <a href=\"//fixtures/sortable.json\">json</a>,\r\n  <a href=\"//fixtures/sortable.csv?_size=max\">CSV</a> (<a href=\"#export\">advanced</a>)\r\n</p>\r\n```", "reactions": {"url": "https://api.github.com/repos/simonw/datasette/issues/1010/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/simonw/datasette/issues/1010/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/simonw/datasette/issues/1001", "repository_url": "https://api.github.com/repos/simonw/datasette", "labels_url": "https://api.github.com/repos/simonw/datasette/issues/1001/labels{/name}", "comments_url": "https://api.github.com/repos/simonw/datasette/issues/1001/comments", "events_url": "https://api.github.com/repos/simonw/datasette/issues/1001/events", "html_url": "https://github.com/simonw/datasette/issues/1001", "id": 717768441, "node_id": "MDU6SXNzdWU3MTc3Njg0NDE=", "number": 1001, "title": "OPTIONS requests return a 500 error", "user": {"login": "simonw", "id": 9599, "node_id": "MDQ6VXNlcjk1OTk=", "avatar_url": "https://avatars.githubusercontent.com/u/9599?v=4", "gravatar_id": "", "url": "https://api.github.com/users/simonw", "html_url": "https://github.com/simonw", "followers_url": "https://api.github.com/users/simonw/followers", "following_url": "https://api.github.com/users/simonw/following{/other_user}", "gists_url": "https://api.github.com/users/simonw/gists{/gist_id}", "starred_url": "https://api.github.com/users/simonw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/simonw/subscriptions", "organizations_url": "https://api.github.com/users/simonw/orgs", "repos_url": "https://api.github.com/users/simonw/repos", "events_url": "https://api.github.com/users/simonw/events{/privacy}", "received_events_url": "https://api.github.com/users/simonw/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 727708732, "node_id": "MDU6TGFiZWw3Mjc3MDg3MzI=", "url": "https://api.github.com/repos/simonw/datasette/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/simonw/datasette/milestones/18", "html_url": "https://github.com/simonw/datasette/milestone/18", "labels_url": "https://api.github.com/repos/simonw/datasette/milestones/18/labels", "id": 5971510, "node_id": "MDk6TWlsZXN0b25lNTk3MTUxMA==", "number": 18, "title": "Datasette 0.50", "description": "", "creator": {"login": "simonw", "id": 9599, "node_id": "MDQ6VXNlcjk1OTk=", "avatar_url": "https://avatars.githubusercontent.com/u/9599?v=4", "gravatar_id": "", "url": "https://api.github.com/users/simonw", "html_url": "https://github.com/simonw", "followers_url": "https://api.github.com/users/simonw/followers", "following_url": "https://api.github.com/users/simonw/following{/other_user}", "gists_url": "https://api.github.com/users/simonw/gists{/gist_id}", "starred_url": "https://api.github.com/users/simonw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/simonw/subscriptions", "organizations_url": "https://api.github.com/users/simonw/orgs", "repos_url": "https://api.github.com/users/simonw/repos", "events_url": "https://api.github.com/users/simonw/events{/privacy}", "received_events_url": "https://api.github.com/users/simonw/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 21, "state": "closed", "created_at": "2020-10-08T23:53:30Z", "updated_at": "2020-10-09T17:53:13Z", "due_on": null, "closed_at": "2020-10-09T17:53:13Z"}, "comments": 8, "created_at": "2020-10-09T00:57:13Z", "updated_at": "2020-10-09T01:44:41Z", "closed_at": "2020-10-09T01:43:58Z", "author_association": "OWNER", "active_lock_reason": null, "body": "```\r\n% curl -vv -XOPTIONS https://latest.datasette.io/\r\n*   Trying 216.58.195.83:443...\r\n> OPTIONS / HTTP/1.1\r\n> Host: latest.datasette.io\r\n> User-Agent: curl/7.70.0\r\n> Accept: */*\r\n> \r\n* Mark bundle as not supporting multiuse\r\n< HTTP/1.1 500 Internal Server Error\r\n```", "reactions": {"url": "https://api.github.com/repos/simonw/datasette/issues/1001/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/simonw/datasette/issues/1001/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/simonw/datasette/issues/996", "repository_url": "https://api.github.com/repos/simonw/datasette", "labels_url": "https://api.github.com/repos/simonw/datasette/issues/996/labels{/name}", "comments_url": "https://api.github.com/repos/simonw/datasette/issues/996/comments", "events_url": "https://api.github.com/repos/simonw/datasette/issues/996/events", "html_url": "https://github.com/simonw/datasette/issues/996", "id": 716756082, "node_id": "MDU6SXNzdWU3MTY3NTYwODI=", "number": 996, "title": "Better handling of multiple matching template wildcard paths", "user": {"login": "simonw", "id": 9599, "node_id": "MDQ6VXNlcjk1OTk=", "avatar_url": "https://avatars.githubusercontent.com/u/9599?v=4", "gravatar_id": "", "url": "https://api.github.com/users/simonw", "html_url": "https://github.com/simonw", "followers_url": "https://api.github.com/users/simonw/followers", "following_url": "https://api.github.com/users/simonw/following{/other_user}", "gists_url": "https://api.github.com/users/simonw/gists{/gist_id}", "starred_url": "https://api.github.com/users/simonw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/simonw/subscriptions", "organizations_url": "https://api.github.com/users/simonw/orgs", "repos_url": "https://api.github.com/users/simonw/repos", "events_url": "https://api.github.com/users/simonw/events{/privacy}", "received_events_url": "https://api.github.com/users/simonw/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 727708732, "node_id": "MDU6TGFiZWw3Mjc3MDg3MzI=", "url": "https://api.github.com/repos/simonw/datasette/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}, {"id": 727708734, "node_id": "MDU6TGFiZWw3Mjc3MDg3MzQ=", "url": "https://api.github.com/repos/simonw/datasette/labels/enhancement", "name": "enhancement", "color": "84b6eb", "default": true, "description": null}, {"id": 729585263, "node_id": "MDU6TGFiZWw3Mjk1ODUyNjM=", "url": "https://api.github.com/repos/simonw/datasette/labels/small", "name": "small", "color": "a7f9b7", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/simonw/datasette/milestones/18", "html_url": "https://github.com/simonw/datasette/milestone/18", "labels_url": "https://api.github.com/repos/simonw/datasette/milestones/18/labels", "id": 5971510, "node_id": "MDk6TWlsZXN0b25lNTk3MTUxMA==", "number": 18, "title": "Datasette 0.50", "description": "", "creator": {"login": "simonw", "id": 9599, "node_id": "MDQ6VXNlcjk1OTk=", "avatar_url": "https://avatars.githubusercontent.com/u/9599?v=4", "gravatar_id": "", "url": "https://api.github.com/users/simonw", "html_url": "https://github.com/simonw", "followers_url": "https://api.github.com/users/simonw/followers", "following_url": "https://api.github.com/users/simonw/following{/other_user}", "gists_url": "https://api.github.com/users/simonw/gists{/gist_id}", "starred_url": "https://api.github.com/users/simonw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/simonw/subscriptions", "organizations_url": "https://api.github.com/users/simonw/orgs", "repos_url": "https://api.github.com/users/simonw/repos", "events_url": "https://api.github.com/users/simonw/events{/privacy}", "received_events_url": "https://api.github.com/users/simonw/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 21, "state": "closed", "created_at": "2020-10-08T23:53:30Z", "updated_at": "2020-10-09T17:53:13Z", "due_on": null, "closed_at": "2020-10-09T17:53:13Z"}, "comments": 3, "created_at": "2020-10-07T18:25:40Z", "updated_at": "2020-10-08T23:55:41Z", "closed_at": "2020-10-07T22:51:17Z", "author_association": "OWNER", "active_lock_reason": null, "body": "I tried building this:\r\n\r\n    templates/pages/{topic}.html\r\n    templates/pages/{topic}/{slug}.html\r\n\r\nAnd it didn't work - hits to /foo/bar which should have been rendered by the `{slug}.html` template were instead rendered by the top level `{topic.html}` template.", "reactions": {"url": "https://api.github.com/repos/simonw/datasette/issues/996/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/simonw/datasette/issues/996/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/simonw/datasette/issues/989", "repository_url": "https://api.github.com/repos/simonw/datasette", "labels_url": "https://api.github.com/repos/simonw/datasette/issues/989/labels{/name}", "comments_url": "https://api.github.com/repos/simonw/datasette/issues/989/comments", "events_url": "https://api.github.com/repos/simonw/datasette/issues/989/events", "html_url": "https://github.com/simonw/datasette/issues/989", "id": 713304417, "node_id": "MDU6SXNzdWU3MTMzMDQ0MTc=", "number": 989, "title": "Column action sort descending/ascending links should remove _next= pagination", "user": {"login": "simonw", "id": 9599, "node_id": "MDQ6VXNlcjk1OTk=", "avatar_url": "https://avatars.githubusercontent.com/u/9599?v=4", "gravatar_id": "", "url": "https://api.github.com/users/simonw", "html_url": "https://github.com/simonw", "followers_url": "https://api.github.com/users/simonw/followers", "following_url": "https://api.github.com/users/simonw/following{/other_user}", "gists_url": "https://api.github.com/users/simonw/gists{/gist_id}", "starred_url": "https://api.github.com/users/simonw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/simonw/subscriptions", "organizations_url": "https://api.github.com/users/simonw/orgs", "repos_url": "https://api.github.com/users/simonw/repos", "events_url": "https://api.github.com/users/simonw/events{/privacy}", "received_events_url": "https://api.github.com/users/simonw/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 727708732, "node_id": "MDU6TGFiZWw3Mjc3MDg3MzI=", "url": "https://api.github.com/repos/simonw/datasette/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/simonw/datasette/milestones/18", "html_url": "https://github.com/simonw/datasette/milestone/18", "labels_url": "https://api.github.com/repos/simonw/datasette/milestones/18/labels", "id": 5971510, "node_id": "MDk6TWlsZXN0b25lNTk3MTUxMA==", "number": 18, "title": "Datasette 0.50", "description": "", "creator": {"login": "simonw", "id": 9599, "node_id": "MDQ6VXNlcjk1OTk=", "avatar_url": "https://avatars.githubusercontent.com/u/9599?v=4", "gravatar_id": "", "url": "https://api.github.com/users/simonw", "html_url": "https://github.com/simonw", "followers_url": "https://api.github.com/users/simonw/followers", "following_url": "https://api.github.com/users/simonw/following{/other_user}", "gists_url": "https://api.github.com/users/simonw/gists{/gist_id}", "starred_url": "https://api.github.com/users/simonw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/simonw/subscriptions", "organizations_url": "https://api.github.com/users/simonw/orgs", "repos_url": "https://api.github.com/users/simonw/repos", "events_url": "https://api.github.com/users/simonw/events{/privacy}", "received_events_url": "https://api.github.com/users/simonw/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 21, "state": "closed", "created_at": "2020-10-08T23:53:30Z", "updated_at": "2020-10-09T17:53:13Z", "due_on": null, "closed_at": "2020-10-09T17:53:13Z"}, "comments": 0, "created_at": "2020-10-02T02:33:48Z", "updated_at": "2020-10-08T23:55:15Z", "closed_at": "2020-10-04T18:05:28Z", "author_association": "OWNER", "active_lock_reason": null, "body": "On page https://latest.datasette.io/fixtures/sortable?_next=15%2Cg%2Cz&_sort=sortable clicking on `sortable_with_nulls > sort_ascending` links to https://latest.datasette.io/fixtures/sortable?_next=15%2Cg%2Cz&_sort_desc=sortable_with_nulls - which doesn't make sense.\r\n\r\nChanging the sort order needs to reset to the first page.", "reactions": {"url": "https://api.github.com/repos/simonw/datasette/issues/989/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/simonw/datasette/issues/989/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/simonw/datasette/issues/980", "repository_url": "https://api.github.com/repos/simonw/datasette", "labels_url": "https://api.github.com/repos/simonw/datasette/issues/980/labels{/name}", "comments_url": "https://api.github.com/repos/simonw/datasette/issues/980/comments", "events_url": "https://api.github.com/repos/simonw/datasette/issues/980/events", "html_url": "https://github.com/simonw/datasette/issues/980", "id": 710819020, "node_id": "MDU6SXNzdWU3MTA4MTkwMjA=", "number": 980, "title": "Another rendering glitch with column headers on mobile", "user": {"login": "simonw", "id": 9599, "node_id": "MDQ6VXNlcjk1OTk=", "avatar_url": "https://avatars.githubusercontent.com/u/9599?v=4", "gravatar_id": "", "url": "https://api.github.com/users/simonw", "html_url": "https://github.com/simonw", "followers_url": "https://api.github.com/users/simonw/followers", "following_url": "https://api.github.com/users/simonw/following{/other_user}", "gists_url": "https://api.github.com/users/simonw/gists{/gist_id}", "starred_url": "https://api.github.com/users/simonw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/simonw/subscriptions", "organizations_url": "https://api.github.com/users/simonw/orgs", "repos_url": "https://api.github.com/users/simonw/repos", "events_url": "https://api.github.com/users/simonw/events{/privacy}", "received_events_url": "https://api.github.com/users/simonw/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 727708732, "node_id": "MDU6TGFiZWw3Mjc3MDg3MzI=", "url": "https://api.github.com/repos/simonw/datasette/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}, {"id": 1918831023, "node_id": "MDU6TGFiZWwxOTE4ODMxMDIz", "url": "https://api.github.com/repos/simonw/datasette/labels/css", "name": "css", "color": "7261dd", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/simonw/datasette/milestones/18", "html_url": "https://github.com/simonw/datasette/milestone/18", "labels_url": "https://api.github.com/repos/simonw/datasette/milestones/18/labels", "id": 5971510, "node_id": "MDk6TWlsZXN0b25lNTk3MTUxMA==", "number": 18, "title": "Datasette 0.50", "description": "", "creator": {"login": "simonw", "id": 9599, "node_id": "MDQ6VXNlcjk1OTk=", "avatar_url": "https://avatars.githubusercontent.com/u/9599?v=4", "gravatar_id": "", "url": "https://api.github.com/users/simonw", "html_url": "https://github.com/simonw", "followers_url": "https://api.github.com/users/simonw/followers", "following_url": "https://api.github.com/users/simonw/following{/other_user}", "gists_url": "https://api.github.com/users/simonw/gists{/gist_id}", "starred_url": "https://api.github.com/users/simonw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/simonw/subscriptions", "organizations_url": "https://api.github.com/users/simonw/orgs", "repos_url": "https://api.github.com/users/simonw/repos", "events_url": "https://api.github.com/users/simonw/events{/privacy}", "received_events_url": "https://api.github.com/users/simonw/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 21, "state": "closed", "created_at": "2020-10-08T23:53:30Z", "updated_at": "2020-10-09T17:53:13Z", "due_on": null, "closed_at": "2020-10-09T17:53:13Z"}, "comments": 2, "created_at": "2020-09-29T06:53:13Z", "updated_at": "2020-10-08T23:54:49Z", "closed_at": "2020-09-29T19:21:50Z", "author_association": "OWNER", "active_lock_reason": null, "body": "Similar to #978.\r\n\r\nhttps://latest-with-plugins.datasette.io/fixtures?sql=select%0D%0A++dateutil_rrule(%27FREQ%3DHOURLY%3BCOUNT%3D5%27)%2C%0D%0A++dateutil_rrule_date(%0D%0A++++%27FREQ%3DDAILY%3BCOUNT%3D3%27%2C%0D%0A++++%271st+jan+2020%27%0D%0A++)%3B\r\n\r\n<img width=\"452\" alt=\"fixtures__select_dateutil_rrule__FREQ_HOURLY_COUNT_5____dateutil_rrule_date___FREQ_DAILY_COUNT_3____1st_jan_2020____\" src=\"https://user-images.githubusercontent.com/9599/94523237-c0e05d00-01e5-11eb-880d-5535f43f07a5.png\">\r\n", "reactions": {"url": "https://api.github.com/repos/simonw/datasette/issues/980/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/simonw/datasette/issues/980/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/simonw/datasette/issues/978", "repository_url": "https://api.github.com/repos/simonw/datasette", "labels_url": "https://api.github.com/repos/simonw/datasette/issues/978/labels{/name}", "comments_url": "https://api.github.com/repos/simonw/datasette/issues/978/comments", "events_url": "https://api.github.com/repos/simonw/datasette/issues/978/events", "html_url": "https://github.com/simonw/datasette/issues/978", "id": 710506708, "node_id": "MDU6SXNzdWU3MTA1MDY3MDg=", "number": 978, "title": "Rendering glitch with column headings on mobile", "user": {"login": "simonw", "id": 9599, "node_id": "MDQ6VXNlcjk1OTk=", "avatar_url": "https://avatars.githubusercontent.com/u/9599?v=4", "gravatar_id": "", "url": "https://api.github.com/users/simonw", "html_url": "https://github.com/simonw", "followers_url": "https://api.github.com/users/simonw/followers", "following_url": "https://api.github.com/users/simonw/following{/other_user}", "gists_url": "https://api.github.com/users/simonw/gists{/gist_id}", "starred_url": "https://api.github.com/users/simonw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/simonw/subscriptions", "organizations_url": "https://api.github.com/users/simonw/orgs", "repos_url": "https://api.github.com/users/simonw/repos", "events_url": "https://api.github.com/users/simonw/events{/privacy}", "received_events_url": "https://api.github.com/users/simonw/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 727708732, "node_id": "MDU6TGFiZWw3Mjc3MDg3MzI=", "url": "https://api.github.com/repos/simonw/datasette/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}, {"id": 1918831023, "node_id": "MDU6TGFiZWwxOTE4ODMxMDIz", "url": "https://api.github.com/repos/simonw/datasette/labels/css", "name": "css", "color": "7261dd", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/simonw/datasette/milestones/18", "html_url": "https://github.com/simonw/datasette/milestone/18", "labels_url": "https://api.github.com/repos/simonw/datasette/milestones/18/labels", "id": 5971510, "node_id": "MDk6TWlsZXN0b25lNTk3MTUxMA==", "number": 18, "title": "Datasette 0.50", "description": "", "creator": {"login": "simonw", "id": 9599, "node_id": "MDQ6VXNlcjk1OTk=", "avatar_url": "https://avatars.githubusercontent.com/u/9599?v=4", "gravatar_id": "", "url": "https://api.github.com/users/simonw", "html_url": "https://github.com/simonw", "followers_url": "https://api.github.com/users/simonw/followers", "following_url": "https://api.github.com/users/simonw/following{/other_user}", "gists_url": "https://api.github.com/users/simonw/gists{/gist_id}", "starred_url": "https://api.github.com/users/simonw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/simonw/subscriptions", "organizations_url": "https://api.github.com/users/simonw/orgs", "repos_url": "https://api.github.com/users/simonw/repos", "events_url": "https://api.github.com/users/simonw/events{/privacy}", "received_events_url": "https://api.github.com/users/simonw/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 21, "state": "closed", "created_at": "2020-10-08T23:53:30Z", "updated_at": "2020-10-09T17:53:13Z", "due_on": null, "closed_at": "2020-10-09T17:53:13Z"}, "comments": 6, "created_at": "2020-09-28T19:04:45Z", "updated_at": "2020-10-08T23:54:40Z", "closed_at": "2020-09-28T22:43:01Z", "author_association": "OWNER", "active_lock_reason": null, "body": "![6348FED5-1310-47DA-BF54-810E63C96C6F](https://user-images.githubusercontent.com/9599/94474607-bc368d00-0182-11eb-9bb1-9a0e455353f1.jpeg)\r\n\r\nhttps://latest-with-plugins.datasette.io/fixtures?sql=select%0D%0A++dateutil_parse%28%2210+october+2020+3pm%22%29%2C%0D%0A++dateutil_easter%28%222020%22%29%2C%0D%0A++dateutil_parse_fuzzy%28%22This+is+due+10+september%22%29%2C%0D%0A++dateutil_parse%28%221%2F2%2F2020%22%29%2C%0D%0A++dateutil_parse%28%222020-03-04%22%29%2C%0D%0A++dateutil_parse_dayfirst%28%222020-03-04%22%29%2C%0D%0A++dateutil_easter%282020%29", "reactions": {"url": "https://api.github.com/repos/simonw/datasette/issues/978/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/simonw/datasette/issues/978/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/simonw/datasette/issues/973", "repository_url": "https://api.github.com/repos/simonw/datasette", "labels_url": "https://api.github.com/repos/simonw/datasette/issues/973/labels{/name}", "comments_url": "https://api.github.com/repos/simonw/datasette/issues/973/comments", "events_url": "https://api.github.com/repos/simonw/datasette/issues/973/events", "html_url": "https://github.com/simonw/datasette/issues/973", "id": 706486323, "node_id": "MDU6SXNzdWU3MDY0ODYzMjM=", "number": 973, "title": "'bool' object is not callable error", "user": {"login": "simonw", "id": 9599, "node_id": "MDQ6VXNlcjk1OTk=", "avatar_url": "https://avatars.githubusercontent.com/u/9599?v=4", "gravatar_id": "", "url": "https://api.github.com/users/simonw", "html_url": "https://github.com/simonw", "followers_url": "https://api.github.com/users/simonw/followers", "following_url": "https://api.github.com/users/simonw/following{/other_user}", "gists_url": "https://api.github.com/users/simonw/gists{/gist_id}", "starred_url": "https://api.github.com/users/simonw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/simonw/subscriptions", "organizations_url": "https://api.github.com/users/simonw/orgs", "repos_url": "https://api.github.com/users/simonw/repos", "events_url": "https://api.github.com/users/simonw/events{/privacy}", "received_events_url": "https://api.github.com/users/simonw/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 727708732, "node_id": "MDU6TGFiZWw3Mjc3MDg3MzI=", "url": "https://api.github.com/repos/simonw/datasette/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}, {"id": 993222446, "node_id": "MDU6TGFiZWw5OTMyMjI0NDY=", "url": "https://api.github.com/repos/simonw/datasette/labels/ci", "name": "ci", "color": "c5daf9", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/simonw/datasette/milestones/18", "html_url": "https://github.com/simonw/datasette/milestone/18", "labels_url": "https://api.github.com/repos/simonw/datasette/milestones/18/labels", "id": 5971510, "node_id": "MDk6TWlsZXN0b25lNTk3MTUxMA==", "number": 18, "title": "Datasette 0.50", "description": "", "creator": {"login": "simonw", "id": 9599, "node_id": "MDQ6VXNlcjk1OTk=", "avatar_url": "https://avatars.githubusercontent.com/u/9599?v=4", "gravatar_id": "", "url": "https://api.github.com/users/simonw", "html_url": "https://github.com/simonw", "followers_url": "https://api.github.com/users/simonw/followers", "following_url": "https://api.github.com/users/simonw/following{/other_user}", "gists_url": "https://api.github.com/users/simonw/gists{/gist_id}", "starred_url": "https://api.github.com/users/simonw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/simonw/subscriptions", "organizations_url": "https://api.github.com/users/simonw/orgs", "repos_url": "https://api.github.com/users/simonw/repos", "events_url": "https://api.github.com/users/simonw/events{/privacy}", "received_events_url": "https://api.github.com/users/simonw/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 21, "state": "closed", "created_at": "2020-10-08T23:53:30Z", "updated_at": "2020-10-09T17:53:13Z", "due_on": null, "closed_at": "2020-10-09T17:53:13Z"}, "comments": 2, "created_at": "2020-09-22T15:30:54Z", "updated_at": "2020-10-08T23:54:32Z", "closed_at": "2020-09-22T15:40:35Z", "author_association": "OWNER", "active_lock_reason": null, "body": "I'm getting this when latest is deployed to Cloud Run:\r\n```\r\nTraceback (most recent call last):\r\n  File \"/usr/local/bin/datasette\", line 8, in <module>\r\n    sys.exit(cli())\r\n  File \"/usr/local/lib/python3.8/site-packages/click/core.py\", line 829, in __call__\r\n    return self.main(*args, **kwargs)\r\n  File \"/usr/local/lib/python3.8/site-packages/click/core.py\", line 782, in main\r\n    rv = self.invoke(ctx)\r\n  File \"/usr/local/lib/python3.8/site-packages/click/core.py\", line 1259, in invoke\r\n    return _process_result(sub_ctx.command.invoke(sub_ctx))\r\n  File \"/usr/local/lib/python3.8/site-packages/click/core.py\", line 1066, in invoke\r\n    return ctx.invoke(self.callback, **ctx.params)\r\n  File \"/usr/local/lib/python3.8/site-packages/click/core.py\", line 610, in invoke\r\n    return callback(*args, **kwargs)\r\n  File \"/usr/local/lib/python3.8/site-packages/datasette/cli.py\", line 406, in serve\r\n    inspect_data = json.load(open(inspect_file))\r\nTypeError: 'bool' object is not callable\r\n```\r\nI think I may have broken things in #970 - a980199e61fe7ccf02c2123849d86172d2ae54ff", "reactions": {"url": "https://api.github.com/repos/simonw/datasette/issues/973/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/simonw/datasette/issues/973/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/simonw/datasette/issues/967", "repository_url": "https://api.github.com/repos/simonw/datasette", "labels_url": "https://api.github.com/repos/simonw/datasette/issues/967/labels{/name}", "comments_url": "https://api.github.com/repos/simonw/datasette/issues/967/comments", "events_url": "https://api.github.com/repos/simonw/datasette/issues/967/events", "html_url": "https://github.com/simonw/datasette/issues/967", "id": 702069429, "node_id": "MDU6SXNzdWU3MDIwNjk0Mjk=", "number": 967, "title": "Writable canned queries with magic parameters fail if POST body is empty", "user": {"login": "simonw", "id": 9599, "node_id": "MDQ6VXNlcjk1OTk=", "avatar_url": "https://avatars.githubusercontent.com/u/9599?v=4", "gravatar_id": "", "url": "https://api.github.com/users/simonw", "html_url": "https://github.com/simonw", "followers_url": "https://api.github.com/users/simonw/followers", "following_url": "https://api.github.com/users/simonw/following{/other_user}", "gists_url": "https://api.github.com/users/simonw/gists{/gist_id}", "starred_url": "https://api.github.com/users/simonw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/simonw/subscriptions", "organizations_url": "https://api.github.com/users/simonw/orgs", "repos_url": "https://api.github.com/users/simonw/repos", "events_url": "https://api.github.com/users/simonw/events{/privacy}", "received_events_url": "https://api.github.com/users/simonw/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 727708732, "node_id": "MDU6TGFiZWw3Mjc3MDg3MzI=", "url": "https://api.github.com/repos/simonw/datasette/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 11, "created_at": "2020-09-15T16:14:43Z", "updated_at": "2020-09-15T20:13:10Z", "closed_at": "2020-09-15T20:13:10Z", "author_association": "OWNER", "active_lock_reason": null, "body": "When I try to use the new `?_json=1` feature from #880 with magic parameters from #842 I get this error:\r\n\r\n> Incorrect number of bindings supplied. The current statement uses 1, and there are 0 supplied", "reactions": {"url": "https://api.github.com/repos/simonw/datasette/issues/967/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/simonw/datasette/issues/967/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/simonw/datasette/issues/966", "repository_url": "https://api.github.com/repos/simonw/datasette", "labels_url": "https://api.github.com/repos/simonw/datasette/issues/966/labels{/name}", "comments_url": "https://api.github.com/repos/simonw/datasette/issues/966/comments", "events_url": "https://api.github.com/repos/simonw/datasette/issues/966/events", "html_url": "https://github.com/simonw/datasette/issues/966", "id": 701584448, "node_id": "MDU6SXNzdWU3MDE1ODQ0NDg=", "number": 966, "title": "Remove _request_ip example from canned queries documentation", "user": {"login": "simonw", "id": 9599, "node_id": "MDQ6VXNlcjk1OTk=", "avatar_url": "https://avatars.githubusercontent.com/u/9599?v=4", "gravatar_id": "", "url": "https://api.github.com/users/simonw", "html_url": "https://github.com/simonw", "followers_url": "https://api.github.com/users/simonw/followers", "following_url": "https://api.github.com/users/simonw/following{/other_user}", "gists_url": "https://api.github.com/users/simonw/gists{/gist_id}", "starred_url": "https://api.github.com/users/simonw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/simonw/subscriptions", "organizations_url": "https://api.github.com/users/simonw/orgs", "repos_url": "https://api.github.com/users/simonw/repos", "events_url": "https://api.github.com/users/simonw/events{/privacy}", "received_events_url": "https://api.github.com/users/simonw/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 727708732, "node_id": "MDU6TGFiZWw3Mjc3MDg3MzI=", "url": "https://api.github.com/repos/simonw/datasette/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}, {"id": 750789605, "node_id": "MDU6TGFiZWw3NTA3ODk2MDU=", "url": "https://api.github.com/repos/simonw/datasette/labels/documentation", "name": "documentation", "color": "fc8b0a", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2020-09-15T03:51:33Z", "updated_at": "2020-09-15T03:52:45Z", "closed_at": "2020-09-15T03:52:45Z", "author_association": "OWNER", "active_lock_reason": null, "body": "`_request_ip` isn't valid, so it shouldn't be in the example: https://github.com/simonw/datasette/blob/cb515a9d75430adaf5e545a840bbc111648e8bfd/docs/sql_queries.rst#L320-L322", "reactions": {"url": "https://api.github.com/repos/simonw/datasette/issues/966/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/simonw/datasette/issues/966/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/simonw/datasette/issues/963", "repository_url": "https://api.github.com/repos/simonw/datasette", "labels_url": "https://api.github.com/repos/simonw/datasette/issues/963/labels{/name}", "comments_url": "https://api.github.com/repos/simonw/datasette/issues/963/comments", "events_url": "https://api.github.com/repos/simonw/datasette/issues/963/events", "html_url": "https://github.com/simonw/datasette/issues/963", "id": 699947574, "node_id": "MDU6SXNzdWU2OTk5NDc1NzQ=", "number": 963, "title": "Currently selected array facets are not correctly persisted through hidden form fields", "user": {"login": "mhalle", "id": 649467, "node_id": "MDQ6VXNlcjY0OTQ2Nw==", "avatar_url": "https://avatars.githubusercontent.com/u/649467?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mhalle", "html_url": "https://github.com/mhalle", "followers_url": "https://api.github.com/users/mhalle/followers", "following_url": "https://api.github.com/users/mhalle/following{/other_user}", "gists_url": "https://api.github.com/users/mhalle/gists{/gist_id}", "starred_url": "https://api.github.com/users/mhalle/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mhalle/subscriptions", "organizations_url": "https://api.github.com/users/mhalle/orgs", "repos_url": "https://api.github.com/users/mhalle/repos", "events_url": "https://api.github.com/users/mhalle/events{/privacy}", "received_events_url": "https://api.github.com/users/mhalle/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 727708732, "node_id": "MDU6TGFiZWw3Mjc3MDg3MzI=", "url": "https://api.github.com/repos/simonw/datasette/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/simonw/datasette/milestones/17", "html_url": "https://github.com/simonw/datasette/milestone/17", "labels_url": "https://api.github.com/repos/simonw/datasette/milestones/17/labels", "id": 5818042, "node_id": "MDk6TWlsZXN0b25lNTgxODA0Mg==", "number": 17, "title": "Datasette 0.49", "description": "", "creator": {"login": "simonw", "id": 9599, "node_id": "MDQ6VXNlcjk1OTk=", "avatar_url": "https://avatars.githubusercontent.com/u/9599?v=4", "gravatar_id": "", "url": "https://api.github.com/users/simonw", "html_url": "https://github.com/simonw", "followers_url": "https://api.github.com/users/simonw/followers", "following_url": "https://api.github.com/users/simonw/following{/other_user}", "gists_url": "https://api.github.com/users/simonw/gists{/gist_id}", "starred_url": "https://api.github.com/users/simonw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/simonw/subscriptions", "organizations_url": "https://api.github.com/users/simonw/orgs", "repos_url": "https://api.github.com/users/simonw/repos", "events_url": "https://api.github.com/users/simonw/events{/privacy}", "received_events_url": "https://api.github.com/users/simonw/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 13, "state": "closed", "created_at": "2020-08-28T04:51:37Z", "updated_at": "2020-09-14T22:19:57Z", "due_on": null, "closed_at": "2020-09-14T22:19:57Z"}, "comments": 1, "created_at": "2020-09-12T01:49:17Z", "updated_at": "2020-09-12T21:54:29Z", "closed_at": "2020-09-12T21:54:09Z", "author_association": "NONE", "active_lock_reason": null, "body": "Faceted search uses JSON array elements as facets rather than the arrays. However, if a search is \"Apply\"ed (using the Apply button), the array itself rather than its elements used. \r\n\r\nTo reproduce:\r\nhttps://latest.datasette.io/fixtures/facetable?_sort=pk&_facet=created&_facet=tags&_facet_array=tags\r\n\r\nPress \"Apply\", which might be done when removing a filter. Notice that the \"tags\" facet values are now arrays, not array elements. It appears the \"&_facet_array=tags\" element of the query string is dropped.", "reactions": {"url": "https://api.github.com/repos/simonw/datasette/issues/963/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/simonw/datasette/issues/963/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/simonw/datasette/issues/946", "repository_url": "https://api.github.com/repos/simonw/datasette", "labels_url": "https://api.github.com/repos/simonw/datasette/issues/946/labels{/name}", "comments_url": "https://api.github.com/repos/simonw/datasette/issues/946/comments", "events_url": "https://api.github.com/repos/simonw/datasette/issues/946/events", "html_url": "https://github.com/simonw/datasette/issues/946", "id": 682184050, "node_id": "MDU6SXNzdWU2ODIxODQwNTA=", "number": 946, "title": "Exception in tracing code", "user": {"login": "simonw", "id": 9599, "node_id": "MDQ6VXNlcjk1OTk=", "avatar_url": "https://avatars.githubusercontent.com/u/9599?v=4", "gravatar_id": "", "url": "https://api.github.com/users/simonw", "html_url": "https://github.com/simonw", "followers_url": "https://api.github.com/users/simonw/followers", "following_url": "https://api.github.com/users/simonw/following{/other_user}", "gists_url": "https://api.github.com/users/simonw/gists{/gist_id}", "starred_url": "https://api.github.com/users/simonw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/simonw/subscriptions", "organizations_url": "https://api.github.com/users/simonw/orgs", "repos_url": "https://api.github.com/users/simonw/repos", "events_url": "https://api.github.com/users/simonw/events{/privacy}", "received_events_url": "https://api.github.com/users/simonw/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 727708732, "node_id": "MDU6TGFiZWw3Mjc3MDg3MzI=", "url": "https://api.github.com/repos/simonw/datasette/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}, {"id": 727708737, "node_id": "MDU6TGFiZWw3Mjc3MDg3Mzc=", "url": "https://api.github.com/repos/simonw/datasette/labels/invalid", "name": "invalid", "color": "e6e6e6", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-08-19T21:12:27Z", "updated_at": "2020-09-15T20:16:50Z", "closed_at": "2020-09-15T20:16:50Z", "author_association": "OWNER", "active_lock_reason": null, "body": "When using `?_trace=1`:\r\n```\r\nTraceback (most recent call last):\r\n  File \"/Users/simon/.local/share/virtualenvs/rockybeaches-09H592sC/lib/python3.8/site-packages/uvicorn/protocols/http/httptools_impl.py\", line 390, in run_asgi\r\n    result = await app(self.scope, self.receive, self.send)\r\n  File \"/Users/simon/.local/share/virtualenvs/rockybeaches-09H592sC/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py\", line 45, in __call__\r\n    return await self.app(scope, receive, send)\r\n  File \"/Users/simon/.local/share/virtualenvs/rockybeaches-09H592sC/lib/python3.8/site-packages/datasette/utils/asgi.py\", line 150, in __call__\r\n    await self.app(scope, receive, send)\r\n  File \"/Users/simon/.local/share/virtualenvs/rockybeaches-09H592sC/lib/python3.8/site-packages/datasette/tracer.py\", line 137, in __call__\r\n    await self.app(scope, receive, wrapped_send)\r\n  File \"/usr/local/opt/python@3.8/Frameworks/Python.framework/Versions/3.8/lib/python3.8/contextlib.py\", line 120, in __exit__\r\n    next(self.gen)\r\n  File \"/Users/simon/.local/share/virtualenvs/rockybeaches-09H592sC/lib/python3.8/site-packages/datasette/tracer.py\", line 63, in capture_traces\r\n    del tracers[task_id]\r\nKeyError: 4575365856\r\n```", "reactions": {"url": "https://api.github.com/repos/simonw/datasette/issues/946/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/simonw/datasette/issues/946/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/simonw/datasette/issues/935", "repository_url": "https://api.github.com/repos/simonw/datasette", "labels_url": "https://api.github.com/repos/simonw/datasette/issues/935/labels{/name}", "comments_url": "https://api.github.com/repos/simonw/datasette/issues/935/comments", "events_url": "https://api.github.com/repos/simonw/datasette/issues/935/events", "html_url": "https://github.com/simonw/datasette/issues/935", "id": 679646710, "node_id": "MDU6SXNzdWU2Nzk2NDY3MTA=", "number": 935, "title": "db.execute_write_fn(create_tables, block=True) hangs a thread if connection fails", "user": {"login": "simonw", "id": 9599, "node_id": "MDQ6VXNlcjk1OTk=", "avatar_url": "https://avatars.githubusercontent.com/u/9599?v=4", "gravatar_id": "", "url": "https://api.github.com/users/simonw", "html_url": "https://github.com/simonw", "followers_url": "https://api.github.com/users/simonw/followers", "following_url": "https://api.github.com/users/simonw/following{/other_user}", "gists_url": "https://api.github.com/users/simonw/gists{/gist_id}", "starred_url": "https://api.github.com/users/simonw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/simonw/subscriptions", "organizations_url": "https://api.github.com/users/simonw/orgs", "repos_url": "https://api.github.com/users/simonw/repos", "events_url": "https://api.github.com/users/simonw/events{/privacy}", "received_events_url": "https://api.github.com/users/simonw/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 727708732, "node_id": "MDU6TGFiZWw3Mjc3MDg3MzI=", "url": "https://api.github.com/repos/simonw/datasette/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2020-08-15T21:49:17Z", "updated_at": "2020-08-15T22:35:33Z", "closed_at": "2020-08-15T22:35:33Z", "author_association": "OWNER", "active_lock_reason": null, "body": "Discovered in https://github.com/simonw/latest-datasette-with-all-plugins/issues/3#issuecomment-674449757", "reactions": {"url": "https://api.github.com/repos/simonw/datasette/issues/935/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/simonw/datasette/issues/935/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/simonw/datasette/issues/934", "repository_url": "https://api.github.com/repos/simonw/datasette", "labels_url": "https://api.github.com/repos/simonw/datasette/issues/934/labels{/name}", "comments_url": "https://api.github.com/repos/simonw/datasette/issues/934/comments", "events_url": "https://api.github.com/repos/simonw/datasette/issues/934/events", "html_url": "https://github.com/simonw/datasette/issues/934", "id": 679637501, "node_id": "MDU6SXNzdWU2Nzk2Mzc1MDE=", "number": 934, "title": "--get doesn't fully invoke the startup routine", "user": {"login": "simonw", "id": 9599, "node_id": "MDQ6VXNlcjk1OTk=", "avatar_url": "https://avatars.githubusercontent.com/u/9599?v=4", "gravatar_id": "", "url": "https://api.github.com/users/simonw", "html_url": "https://github.com/simonw", "followers_url": "https://api.github.com/users/simonw/followers", "following_url": "https://api.github.com/users/simonw/following{/other_user}", "gists_url": "https://api.github.com/users/simonw/gists{/gist_id}", "starred_url": "https://api.github.com/users/simonw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/simonw/subscriptions", "organizations_url": "https://api.github.com/users/simonw/orgs", "repos_url": "https://api.github.com/users/simonw/repos", "events_url": "https://api.github.com/users/simonw/events{/privacy}", "received_events_url": "https://api.github.com/users/simonw/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 727708732, "node_id": "MDU6TGFiZWw3Mjc3MDg3MzI=", "url": "https://api.github.com/repos/simonw/datasette/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2020-08-15T20:30:25Z", "updated_at": "2020-08-15T20:53:49Z", "closed_at": "2020-08-15T20:53:49Z", "author_association": "OWNER", "active_lock_reason": null, "body": "https://github.com/simonw/datasette/blob/7702ea602188899ee9b0446a874a6a9b546b564d/datasette/cli.py#L417-L433\r\n\r\nSpotted this working on https://github.com/simonw/latest-datasette-with-all-plugins/issues/3 - I'd like to be able to use `datasette --get /` as a sanity checking test, but that doesn't work if the init hooks aren't fully executed.", "reactions": {"url": "https://api.github.com/repos/simonw/datasette/issues/934/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/simonw/datasette/issues/934/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/simonw/datasette/issues/931", "repository_url": "https://api.github.com/repos/simonw/datasette", "labels_url": "https://api.github.com/repos/simonw/datasette/issues/931/labels{/name}", "comments_url": "https://api.github.com/repos/simonw/datasette/issues/931/comments", "events_url": "https://api.github.com/repos/simonw/datasette/issues/931/events", "html_url": "https://github.com/simonw/datasette/issues/931", "id": 677926613, "node_id": "MDU6SXNzdWU2Nzc5MjY2MTM=", "number": 931, "title": "Docker container is no longer being pushed (it's stuck on 0.45)", "user": {"login": "simonw", "id": 9599, "node_id": "MDQ6VXNlcjk1OTk=", "avatar_url": "https://avatars.githubusercontent.com/u/9599?v=4", "gravatar_id": "", "url": "https://api.github.com/users/simonw", "html_url": "https://github.com/simonw", "followers_url": "https://api.github.com/users/simonw/followers", "following_url": "https://api.github.com/users/simonw/following{/other_user}", "gists_url": "https://api.github.com/users/simonw/gists{/gist_id}", "starred_url": "https://api.github.com/users/simonw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/simonw/subscriptions", "organizations_url": "https://api.github.com/users/simonw/orgs", "repos_url": "https://api.github.com/users/simonw/repos", "events_url": "https://api.github.com/users/simonw/events{/privacy}", "received_events_url": "https://api.github.com/users/simonw/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 727708732, "node_id": "MDU6TGFiZWw3Mjc3MDg3MzI=", "url": "https://api.github.com/repos/simonw/datasette/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}, {"id": 993222446, "node_id": "MDU6TGFiZWw5OTMyMjI0NDY=", "url": "https://api.github.com/repos/simonw/datasette/labels/ci", "name": "ci", "color": "c5daf9", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 7, "created_at": "2020-08-12T19:33:03Z", "updated_at": "2020-08-12T21:36:20Z", "closed_at": "2020-08-12T21:36:20Z", "author_association": "OWNER", "active_lock_reason": null, "body": "e.g. https://travis-ci.org/github/simonw/datasette/jobs/717123725\r\n\r\nHere's how it broke:\r\n```\r\n--2020-08-12 03:08:17--  https://www.gaia-gis.it/gaia-sins/freexl-1.0.5.tar.gz\r\nResolving www.gaia-gis.it (www.gaia-gis.it)... 212.83.162.51\r\nConnecting to www.gaia-gis.it (www.gaia-gis.it)|212.83.162.51|:443... connected.\r\nHTTP request sent, awaiting response... 404 Not Found\r\n2020-08-12 03:08:18 ERROR 404: Not Found.\r\nThe command '/bin/sh -c wget \"https://www.gaia-gis.it/gaia-sins/freexl-1.0.5.tar.gz\" && tar zxf freexl-1.0.5.tar.gz     && cd freexl-1.0.5 && ./configure && make && make install' returned a non-zero code: 8\r\nThe command \"docker build -f Dockerfile -t $REPO:$TRAVIS_TAG .\" exited with 8.\r\n0.07s$ docker tag $REPO:$TRAVIS_TAG $REPO:latest\r\nError response from daemon: No such image: [secure]/datasette:0.47.1\r\nThe command \"docker tag $REPO:$TRAVIS_TAG $REPO:latest\" exited with 1.\r\n0.08s$ docker push $REPO\r\nThe push refers to repository [docker.io/[secure]/datasette]\r\nAn image does not exist locally with the tag: [secure]/datasette\r\nThe command \"docker push $REPO\" exited with 1.\r\ncache.2\r\nstore build cache\r\n```", "reactions": {"url": "https://api.github.com/repos/simonw/datasette/issues/931/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/simonw/datasette/issues/931/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/simonw/datasette/issues/930", "repository_url": "https://api.github.com/repos/simonw/datasette", "labels_url": "https://api.github.com/repos/simonw/datasette/issues/930/labels{/name}", "comments_url": "https://api.github.com/repos/simonw/datasette/issues/930/comments", "events_url": "https://api.github.com/repos/simonw/datasette/issues/930/events", "html_url": "https://github.com/simonw/datasette/issues/930", "id": 677326155, "node_id": "MDU6SXNzdWU2NzczMjYxNTU=", "number": 930, "title": "Datasette sdist is missing templates (hence broken when installing from Homebrew)", "user": {"login": "simonw", "id": 9599, "node_id": "MDQ6VXNlcjk1OTk=", "avatar_url": "https://avatars.githubusercontent.com/u/9599?v=4", "gravatar_id": "", "url": "https://api.github.com/users/simonw", "html_url": "https://github.com/simonw", "followers_url": "https://api.github.com/users/simonw/followers", "following_url": "https://api.github.com/users/simonw/following{/other_user}", "gists_url": "https://api.github.com/users/simonw/gists{/gist_id}", "starred_url": "https://api.github.com/users/simonw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/simonw/subscriptions", "organizations_url": "https://api.github.com/users/simonw/orgs", "repos_url": "https://api.github.com/users/simonw/repos", "events_url": "https://api.github.com/users/simonw/events{/privacy}", "received_events_url": "https://api.github.com/users/simonw/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 727708732, "node_id": "MDU6TGFiZWw3Mjc3MDg3MzI=", "url": "https://api.github.com/repos/simonw/datasette/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2020-08-12T02:20:16Z", "updated_at": "2020-08-12T03:30:59Z", "closed_at": "2020-08-12T03:30:59Z", "author_association": "OWNER", "active_lock_reason": null, "body": "Pretty nasty bug this: I'm getting 500 errors for all pages that try to render a template after installing the newly released Datasette 0.47 - both from `pip install` and via Homebrew.", "reactions": {"url": "https://api.github.com/repos/simonw/datasette/issues/930/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/simonw/datasette/issues/930/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/simonw/datasette/issues/928", "repository_url": "https://api.github.com/repos/simonw/datasette", "labels_url": "https://api.github.com/repos/simonw/datasette/issues/928/labels{/name}", "comments_url": "https://api.github.com/repos/simonw/datasette/issues/928/comments", "events_url": "https://api.github.com/repos/simonw/datasette/issues/928/events", "html_url": "https://github.com/simonw/datasette/issues/928", "id": 677272618, "node_id": "MDU6SXNzdWU2NzcyNzI2MTg=", "number": 928, "title": "Test failures caused by failed attempts to mock pip", "user": {"login": "simonw", "id": 9599, "node_id": "MDQ6VXNlcjk1OTk=", "avatar_url": "https://avatars.githubusercontent.com/u/9599?v=4", "gravatar_id": "", "url": "https://api.github.com/users/simonw", "html_url": "https://github.com/simonw", "followers_url": "https://api.github.com/users/simonw/followers", "following_url": "https://api.github.com/users/simonw/following{/other_user}", "gists_url": "https://api.github.com/users/simonw/gists{/gist_id}", "starred_url": "https://api.github.com/users/simonw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/simonw/subscriptions", "organizations_url": "https://api.github.com/users/simonw/orgs", "repos_url": "https://api.github.com/users/simonw/repos", "events_url": "https://api.github.com/users/simonw/events{/privacy}", "received_events_url": "https://api.github.com/users/simonw/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 727708732, "node_id": "MDU6TGFiZWw3Mjc3MDg3MzI=", "url": "https://api.github.com/repos/simonw/datasette/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2020-08-11T23:53:18Z", "updated_at": "2022-02-23T16:19:47Z", "closed_at": "2020-08-12T00:07:49Z", "author_association": "OWNER", "active_lock_reason": null, "body": "Errors like this one:\r\n\r\nhttps://github.com/simonw/datasette/pull/927/checks?check_run_id=973559696\r\n\r\n```\r\n2020-08-11T23:36:39.8801334Z =================================== FAILURES ===================================\r\n2020-08-11T23:36:39.8802411Z _________________________________ test_install _________________________________\r\n2020-08-11T23:36:39.8803242Z \r\n2020-08-11T23:36:39.8804935Z thing = <module 'pip._internal.cli' from '/opt/hostedtoolcache/Python/3.8.5/x64/lib/python3.8/site-packages/pip/_internal/cli/__init__.py'>\r\n2020-08-11T23:36:39.8806663Z comp = 'main', import_path = 'pip._internal.cli.main'\r\n2020-08-11T23:36:39.8807696Z \r\n2020-08-11T23:36:39.8808728Z     def _dot_lookup(thing, comp, import_path):\r\n2020-08-11T23:36:39.8810573Z         try:\r\n2020-08-11T23:36:39.8812262Z >           return getattr(thing, comp)\r\n2020-08-11T23:36:39.8817136Z E           AttributeError: module 'pip._internal.cli' has no attribute 'main'\r\n2020-08-11T23:36:39.8843043Z \r\n2020-08-11T23:36:39.8855951Z /opt/hostedtoolcache/Python/3.8.5/x64/lib/python3.8/unittest/mock.py:1215: AttributeError\r\n2020-08-11T23:36:39.8873372Z \r\n2020-08-11T23:36:39.8877803Z During handling of the above exception, another exception occurred:\r\n2020-08-11T23:36:39.8906532Z \r\n2020-08-11T23:36:39.8925767Z     def get_src_prefix():\r\n2020-08-11T23:36:39.8928277Z         # type: () -> str\r\n2020-08-11T23:36:39.8930068Z         if running_under_virtualenv():\r\n2020-08-11T23:36:39.8949721Z             src_prefix = os.path.join(sys.prefix, 'src')\r\n2020-08-11T23:36:39.8951813Z         else:\r\n2020-08-11T23:36:39.8969014Z             # FIXME: keep src in cwd for now (it is not a temporary folder)\r\n2020-08-11T23:36:39.9012110Z             try:\r\n2020-08-11T23:36:39.9013489Z >               src_prefix = os.path.join(os.getcwd(), 'src')\r\n2020-08-11T23:36:39.9014538Z E               FileNotFoundError: [Errno 2] No such file or directory\r\n2020-08-11T23:36:39.9016122Z \r\n2020-08-11T23:36:39.9017617Z /opt/hostedtoolcache/Python/3.8.5/x64/lib/python3.8/site-packages/pip/_internal/locations.py:50: FileNotFoundError\r\n2020-08-11T23:36:39.9018802Z \r\n2020-08-11T23:36:39.9020070Z During handling of the above exception, another exception occurred:\r\n2020-08-11T23:36:39.9020930Z \r\n2020-08-11T23:36:39.9022275Z args = (), keywargs = {}\r\n2020-08-11T23:36:39.9023183Z \r\n2020-08-11T23:36:39.9024077Z     @wraps(func)\r\n2020-08-11T23:36:39.9024984Z     def patched(*args, **keywargs):\r\n2020-08-11T23:36:39.9028770Z >       with self.decoration_helper(patched,\r\n2020-08-11T23:36:39.9031861Z                                     args,\r\n2020-08-11T23:36:39.9038358Z                                     keywargs) as (newargs, newkeywargs):\r\n2020-08-11T23:36:39.9039654Z \r\n2020-08-11T23:36:39.9040566Z /opt/hostedtoolcache/Python/3.8.5/x64/lib/python3.8/unittest/mock.py:1322: \r\n2020-08-11T23:36:39.9041492Z _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \r\n```", "reactions": {"url": "https://api.github.com/repos/simonw/datasette/issues/928/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/simonw/datasette/issues/928/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/simonw/datasette/issues/918", "repository_url": "https://api.github.com/repos/simonw/datasette", "labels_url": "https://api.github.com/repos/simonw/datasette/issues/918/labels{/name}", "comments_url": "https://api.github.com/repos/simonw/datasette/issues/918/comments", "events_url": "https://api.github.com/repos/simonw/datasette/issues/918/events", "html_url": "https://github.com/simonw/datasette/issues/918", "id": 675724951, "node_id": "MDU6SXNzdWU2NzU3MjQ5NTE=", "number": 918, "title": "Security issue: read-only canned queries leak CSRF token in URL", "user": {"login": "simonw", "id": 9599, "node_id": "MDQ6VXNlcjk1OTk=", "avatar_url": "https://avatars.githubusercontent.com/u/9599?v=4", "gravatar_id": "", "url": "https://api.github.com/users/simonw", "html_url": "https://github.com/simonw", "followers_url": "https://api.github.com/users/simonw/followers", "following_url": "https://api.github.com/users/simonw/following{/other_user}", "gists_url": "https://api.github.com/users/simonw/gists{/gist_id}", "starred_url": "https://api.github.com/users/simonw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/simonw/subscriptions", "organizations_url": "https://api.github.com/users/simonw/orgs", "repos_url": "https://api.github.com/users/simonw/repos", "events_url": "https://api.github.com/users/simonw/events{/privacy}", "received_events_url": "https://api.github.com/users/simonw/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 727708732, "node_id": "MDU6TGFiZWw3Mjc3MDg3MzI=", "url": "https://api.github.com/repos/simonw/datasette/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}, {"id": 2105906277, "node_id": "MDU6TGFiZWwyMTA1OTA2Mjc3", "url": "https://api.github.com/repos/simonw/datasette/labels/security", "name": "security", "color": "fcbabb", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2020-08-09T16:03:01Z", "updated_at": "2020-08-09T16:56:48Z", "closed_at": "2020-08-09T16:11:59Z", "author_association": "OWNER", "active_lock_reason": null, "body": "The HTML form for a read-only canned query includes the hidden CSRF token field added in #798 for writable canned queries (#698).\r\n\r\nThis means that submitting those read-only forms exposes the CSRF token in the URL - for example on https://latest.datasette.io/fixtures/neighborhood_search submitting the form took me to:\r\n\r\nhttps://latest.datasette.io/fixtures/neighborhood_search?text=down&csrftoken=IlFubnoxVVpLU1NGT3NMVUoi.HbOPd2YH_epQmp8f_aAt0s-MxtU\r\n\r\nThis token could potentially leak to an attacker if the resulting page has a link to an external site on it and the user clicks the link, since the token would be exposed in the referral logs.", "reactions": {"url": "https://api.github.com/repos/simonw/datasette/issues/918/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/simonw/datasette/issues/918/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/simonw/datasette/issues/914", "repository_url": "https://api.github.com/repos/simonw/datasette", "labels_url": "https://api.github.com/repos/simonw/datasette/issues/914/labels{/name}", "comments_url": "https://api.github.com/repos/simonw/datasette/issues/914/comments", "events_url": "https://api.github.com/repos/simonw/datasette/issues/914/events", "html_url": "https://github.com/simonw/datasette/issues/914", "id": 671056788, "node_id": "MDU6SXNzdWU2NzEwNTY3ODg=", "number": 914, "title": "\"Object of type bytes is not JSON serializable\" for _nl=on", "user": {"login": "simonw", "id": 9599, "node_id": "MDQ6VXNlcjk1OTk=", "avatar_url": "https://avatars.githubusercontent.com/u/9599?v=4", "gravatar_id": "", "url": "https://api.github.com/users/simonw", "html_url": "https://github.com/simonw", "followers_url": "https://api.github.com/users/simonw/followers", "following_url": "https://api.github.com/users/simonw/following{/other_user}", "gists_url": "https://api.github.com/users/simonw/gists{/gist_id}", "starred_url": "https://api.github.com/users/simonw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/simonw/subscriptions", "organizations_url": "https://api.github.com/users/simonw/orgs", "repos_url": "https://api.github.com/users/simonw/repos", "events_url": "https://api.github.com/users/simonw/events{/privacy}", "received_events_url": "https://api.github.com/users/simonw/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 727708732, "node_id": "MDU6TGFiZWw3Mjc3MDg3MzI=", "url": "https://api.github.com/repos/simonw/datasette/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}, {"id": 754730474, "node_id": "MDU6TGFiZWw3NTQ3MzA0NzQ=", "url": "https://api.github.com/repos/simonw/datasette/labels/json-api", "name": "json-api", "color": "77aef9", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-08-01T17:43:10Z", "updated_at": "2020-08-16T21:10:27Z", "closed_at": "2020-08-16T18:26:59Z", "author_association": "OWNER", "active_lock_reason": null, "body": "https://latest.datasette.io/fixtures/binary_data.json?_sort_desc=data&_shape=array returns this:\r\n```json\r\n[\r\n  {\r\n    \"rowid\": 1,\r\n    \"data\": \"this is binary data\"\r\n  }\r\n]\r\n```\r\nBut adding `&_nl=on` returns this: https://latest.datasette.io/fixtures/binary_data.json?_sort_desc=data&_shape=array&_nl=on\r\n```json\r\n{\r\n  \"ok\": false,\r\n  \"error\": \"Object of type bytes is not JSON serializable\",\r\n  \"status\": 500,\r\n  \"title\": null\r\n}\r\n```\r\nI found this error by running `wget -r 127.0.0.1:8001` against my local `fixtures.db`.\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/simonw/datasette/issues/914/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/simonw/datasette/issues/914/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/simonw/datasette/issues/909", "repository_url": "https://api.github.com/repos/simonw/datasette", "labels_url": "https://api.github.com/repos/simonw/datasette/issues/909/labels{/name}", "comments_url": "https://api.github.com/repos/simonw/datasette/issues/909/comments", "events_url": "https://api.github.com/repos/simonw/datasette/issues/909/events", "html_url": "https://github.com/simonw/datasette/issues/909", "id": 667467128, "node_id": "MDU6SXNzdWU2Njc0NjcxMjg=", "number": 909, "title": "AsgiFileDownload: filename not correctly passed", "user": {"login": "simonw", "id": 9599, "node_id": "MDQ6VXNlcjk1OTk=", "avatar_url": "https://avatars.githubusercontent.com/u/9599?v=4", "gravatar_id": "", "url": "https://api.github.com/users/simonw", "html_url": "https://github.com/simonw", "followers_url": "https://api.github.com/users/simonw/followers", "following_url": "https://api.github.com/users/simonw/following{/other_user}", "gists_url": "https://api.github.com/users/simonw/gists{/gist_id}", "starred_url": "https://api.github.com/users/simonw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/simonw/subscriptions", "organizations_url": "https://api.github.com/users/simonw/orgs", "repos_url": "https://api.github.com/users/simonw/repos", "events_url": "https://api.github.com/users/simonw/events{/privacy}", "received_events_url": "https://api.github.com/users/simonw/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 727708732, "node_id": "MDU6TGFiZWw3Mjc3MDg3MzI=", "url": "https://api.github.com/repos/simonw/datasette/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2020-07-29T00:41:43Z", "updated_at": "2020-07-30T00:56:17Z", "closed_at": "2020-07-29T21:34:48Z", "author_association": "OWNER", "active_lock_reason": null, "body": "https://github.com/simonw/datasette/blob/3c33b421320c0be81a625ca7307b2e4416a9ed5b/datasette/utils/asgi.py#L396-L405\r\n`self.filename` should be passed to `asgi_send_file()`", "reactions": {"url": "https://api.github.com/repos/simonw/datasette/issues/909/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/simonw/datasette/issues/909/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/simonw/datasette/issues/900", "repository_url": "https://api.github.com/repos/simonw/datasette", "labels_url": "https://api.github.com/repos/simonw/datasette/issues/900/labels{/name}", "comments_url": "https://api.github.com/repos/simonw/datasette/issues/900/comments", "events_url": "https://api.github.com/repos/simonw/datasette/issues/900/events", "html_url": "https://github.com/simonw/datasette/issues/900", "id": 661605489, "node_id": "MDU6SXNzdWU2NjE2MDU0ODk=", "number": 900, "title": "Some links don't honor base_url", "user": {"login": "noteed", "id": 50220, "node_id": "MDQ6VXNlcjUwMjIw", "avatar_url": "https://avatars.githubusercontent.com/u/50220?v=4", "gravatar_id": "", "url": "https://api.github.com/users/noteed", "html_url": "https://github.com/noteed", "followers_url": "https://api.github.com/users/noteed/followers", "following_url": "https://api.github.com/users/noteed/following{/other_user}", "gists_url": "https://api.github.com/users/noteed/gists{/gist_id}", "starred_url": "https://api.github.com/users/noteed/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/noteed/subscriptions", "organizations_url": "https://api.github.com/users/noteed/orgs", "repos_url": "https://api.github.com/users/noteed/repos", "events_url": "https://api.github.com/users/noteed/events{/privacy}", "received_events_url": "https://api.github.com/users/noteed/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 727708732, "node_id": "MDU6TGFiZWw3Mjc3MDg3MzI=", "url": "https://api.github.com/repos/simonw/datasette/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/simonw/datasette/milestones/19", "html_url": "https://github.com/simonw/datasette/milestone/19", "labels_url": "https://api.github.com/repos/simonw/datasette/milestones/19/labels", "id": 6026070, "node_id": "MDk6TWlsZXN0b25lNjAyNjA3MA==", "number": 19, "title": "0.51", "description": "A new visual design, plugin hooks for adding navigation options, better handling of binary data, URL building utility methods and better support for running Datasette behind a proxy.", "creator": {"login": "simonw", "id": 9599, "node_id": "MDQ6VXNlcjk1OTk=", "avatar_url": "https://avatars.githubusercontent.com/u/9599?v=4", "gravatar_id": "", "url": "https://api.github.com/users/simonw", "html_url": "https://github.com/simonw", "followers_url": "https://api.github.com/users/simonw/followers", "following_url": "https://api.github.com/users/simonw/following{/other_user}", "gists_url": "https://api.github.com/users/simonw/gists{/gist_id}", "starred_url": "https://api.github.com/users/simonw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/simonw/subscriptions", "organizations_url": "https://api.github.com/users/simonw/orgs", "repos_url": "https://api.github.com/users/simonw/repos", "events_url": "https://api.github.com/users/simonw/events{/privacy}", "received_events_url": "https://api.github.com/users/simonw/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 53, "state": "closed", "created_at": "2020-10-23T19:42:45Z", "updated_at": "2021-11-20T19:35:48Z", "due_on": null, "closed_at": "2020-10-31T22:35:05Z"}, "comments": 3, "created_at": "2020-07-20T09:40:50Z", "updated_at": "2020-10-23T19:44:04Z", "closed_at": "2020-10-15T22:57:55Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi,\r\n\r\nI've been playing with Datasette behind Nginx (awesome tool, thanks !). It seems some URLs are OK but some aren't. For instance in https://github.com/simonw/datasette/blob/master/datasette/templates/query.html#L61 it seems that `url_csv` includes a `/` prefix, resulting in the `base_url` not beeing honored.\r\n\r\nActually here, it seems that dropping the prefix `/` to make the link relative is enough (so it may not be strictly related to `base_url`).\r\n\r\nAdditional information:\r\n\r\n```\r\ndatasette, version 0.45+0.gf1f581b.dirty\r\n```\r\n\r\nRelevant Nginx configuration (note that all the trailing slashes have some effect):\r\n\r\n```\r\n  location /datasette/ {\r\n    proxy_pass http://127.0.0.1:9001/;\r\n    proxy_set_header Host $host;\r\n  }\r\n```\r\n\r\nRelelvant Datasette configuration (slashes matter too):\r\n\r\n```\r\n  --config base_url:/datasette/\r\n```", "reactions": {"url": "https://api.github.com/repos/simonw/datasette/issues/900/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/simonw/datasette/issues/900/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/simonw/datasette/issues/892", "repository_url": "https://api.github.com/repos/simonw/datasette", "labels_url": "https://api.github.com/repos/simonw/datasette/issues/892/labels{/name}", "comments_url": "https://api.github.com/repos/simonw/datasette/issues/892/comments", "events_url": "https://api.github.com/repos/simonw/datasette/issues/892/events", "html_url": "https://github.com/simonw/datasette/issues/892", "id": 655465863, "node_id": "MDU6SXNzdWU2NTU0NjU4NjM=", "number": 892, "title": "\"latest\" in new documentation navbar is invisible", "user": {"login": "simonw", "id": 9599, "node_id": "MDQ6VXNlcjk1OTk=", "avatar_url": "https://avatars.githubusercontent.com/u/9599?v=4", "gravatar_id": "", "url": "https://api.github.com/users/simonw", "html_url": "https://github.com/simonw", "followers_url": "https://api.github.com/users/simonw/followers", "following_url": "https://api.github.com/users/simonw/following{/other_user}", "gists_url": "https://api.github.com/users/simonw/gists{/gist_id}", "starred_url": "https://api.github.com/users/simonw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/simonw/subscriptions", "organizations_url": "https://api.github.com/users/simonw/orgs", "repos_url": "https://api.github.com/users/simonw/repos", "events_url": "https://api.github.com/users/simonw/events{/privacy}", "received_events_url": "https://api.github.com/users/simonw/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 727708732, "node_id": "MDU6TGFiZWw3Mjc3MDg3MzI=", "url": "https://api.github.com/repos/simonw/datasette/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}, {"id": 750789605, "node_id": "MDU6TGFiZWw3NTA3ODk2MDU=", "url": "https://api.github.com/repos/simonw/datasette/labels/documentation", "name": "documentation", "color": "fc8b0a", "default": true, "description": null}, {"id": 2175284252, "node_id": "MDU6TGFiZWwyMTc1Mjg0MjUy", "url": "https://api.github.com/repos/simonw/datasette/labels/design", "name": "design", "color": "083993", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2020-07-12T19:57:21Z", "updated_at": "2020-07-12T20:02:35Z", "closed_at": "2020-07-12T20:02:17Z", "author_association": "OWNER", "active_lock_reason": null, "body": "On https://datasette.readthedocs.io/en/latest/\r\n\r\n<img width=\"572\" alt=\"Datasette_\u2014_Datasette_documentation\" src=\"https://user-images.githubusercontent.com/9599/87255376-1b67e980-c43f-11ea-8470-781ee8842336.png\">\r\n\r\nCompare with https://datasette.readthedocs.io/en/0.45/\r\n\r\n<img width=\"584\" alt=\"Datasette_\u2014_Datasette_documentation\" src=\"https://user-images.githubusercontent.com/9599/87255387-2fabe680-c43f-11ea-875e-c474364691ca.png\">\r\n\r\nSome custom CSS should fix it.\r\n", "reactions": {"url": "https://api.github.com/repos/simonw/datasette/issues/892/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/simonw/datasette/issues/892/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/simonw/datasette/issues/889", "repository_url": "https://api.github.com/repos/simonw/datasette", "labels_url": "https://api.github.com/repos/simonw/datasette/issues/889/labels{/name}", "comments_url": "https://api.github.com/repos/simonw/datasette/issues/889/comments", "events_url": "https://api.github.com/repos/simonw/datasette/issues/889/events", "html_url": "https://github.com/simonw/datasette/issues/889", "id": 649907676, "node_id": "MDU6SXNzdWU2NDk5MDc2NzY=", "number": 889, "title": "asgi_wrapper plugin hook is crashing at startup", "user": {"login": "amjith", "id": 49260, "node_id": "MDQ6VXNlcjQ5MjYw", "avatar_url": "https://avatars.githubusercontent.com/u/49260?v=4", "gravatar_id": "", "url": "https://api.github.com/users/amjith", "html_url": "https://github.com/amjith", "followers_url": "https://api.github.com/users/amjith/followers", "following_url": "https://api.github.com/users/amjith/following{/other_user}", "gists_url": "https://api.github.com/users/amjith/gists{/gist_id}", "starred_url": "https://api.github.com/users/amjith/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/amjith/subscriptions", "organizations_url": "https://api.github.com/users/amjith/orgs", "repos_url": "https://api.github.com/users/amjith/repos", "events_url": "https://api.github.com/users/amjith/events{/privacy}", "received_events_url": "https://api.github.com/users/amjith/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 727708732, "node_id": "MDU6TGFiZWw3Mjc3MDg3MzI=", "url": "https://api.github.com/repos/simonw/datasette/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}, {"id": 754269786, "node_id": "MDU6TGFiZWw3NTQyNjk3ODY=", "url": "https://api.github.com/repos/simonw/datasette/labels/plugins", "name": "plugins", "color": "f759cf", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2020-07-02T12:53:13Z", "updated_at": "2020-09-15T20:40:52Z", "closed_at": "2020-09-15T20:40:52Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Steps to reproduce: \r\n\r\n1. Install datasette-media plugin \r\n`pip install datasette-media`\r\n2. Launch datasette\r\n`datasette databasename.db`\r\n3. Error\r\n\r\n```\r\nINFO:     Started server process [927704]\r\nINFO:     Waiting for application startup.\r\nERROR:    Exception in 'lifespan' protocol\r\nTraceback (most recent call last):\r\n  File \"/home/amjith/.virtualenvs/itsysearch/lib/python3.7/site-packages/uvicorn/lifespan/on.py\", line 48, in main\r\n    await app(scope, self.receive, self.send)\r\n  File \"/home/amjith/.virtualenvs/itsysearch/lib/python3.7/site-packages/uvicorn/middleware/proxy_headers.py\", line 45, in __call__\r\n    return await self.app(scope, receive, send)\r\n  File \"/home/amjith/.virtualenvs/itsysearch/lib/python3.7/site-packages/datasette_media/__init__.py\", line 9, in wrapped_app\r\n    path = scope[\"path\"]\r\nKeyError: 'path'\r\nERROR:    Application startup failed. Exiting.\r\n```", "reactions": {"url": "https://api.github.com/repos/simonw/datasette/issues/889/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/simonw/datasette/issues/889/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/simonw/datasette/issues/888", "repository_url": "https://api.github.com/repos/simonw/datasette", "labels_url": "https://api.github.com/repos/simonw/datasette/issues/888/labels{/name}", "comments_url": "https://api.github.com/repos/simonw/datasette/issues/888/comments", "events_url": "https://api.github.com/repos/simonw/datasette/issues/888/events", "html_url": "https://github.com/simonw/datasette/issues/888", "id": 649702801, "node_id": "MDU6SXNzdWU2NDk3MDI4MDE=", "number": 888, "title": "URLs in release notes point to 127.0.0.1", "user": {"login": "abdusco", "id": 3243482, "node_id": "MDQ6VXNlcjMyNDM0ODI=", "avatar_url": "https://avatars.githubusercontent.com/u/3243482?v=4", "gravatar_id": "", "url": "https://api.github.com/users/abdusco", "html_url": "https://github.com/abdusco", "followers_url": "https://api.github.com/users/abdusco/followers", "following_url": "https://api.github.com/users/abdusco/following{/other_user}", "gists_url": "https://api.github.com/users/abdusco/gists{/gist_id}", "starred_url": "https://api.github.com/users/abdusco/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/abdusco/subscriptions", "organizations_url": "https://api.github.com/users/abdusco/orgs", "repos_url": "https://api.github.com/users/abdusco/repos", "events_url": "https://api.github.com/users/abdusco/events{/privacy}", "received_events_url": "https://api.github.com/users/abdusco/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 727708732, "node_id": "MDU6TGFiZWw3Mjc3MDg3MzI=", "url": "https://api.github.com/repos/simonw/datasette/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}, {"id": 750789605, "node_id": "MDU6TGFiZWw3NTA3ODk2MDU=", "url": "https://api.github.com/repos/simonw/datasette/labels/documentation", "name": "documentation", "color": "fc8b0a", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-07-02T07:28:04Z", "updated_at": "2020-09-15T20:39:50Z", "closed_at": "2020-09-15T20:39:49Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Just a quick heads up:\r\n\r\nRelease notes for 0.45 include urls that point to localhost. \r\n\r\nhttps://github.com/simonw/datasette/releases/tag/0.45", "reactions": {"url": "https://api.github.com/repos/simonw/datasette/issues/888/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/simonw/datasette/issues/888/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/simonw/datasette/issues/874", "repository_url": "https://api.github.com/repos/simonw/datasette", "labels_url": "https://api.github.com/repos/simonw/datasette/issues/874/labels{/name}", "comments_url": "https://api.github.com/repos/simonw/datasette/issues/874/comments", "events_url": "https://api.github.com/repos/simonw/datasette/issues/874/events", "html_url": "https://github.com/simonw/datasette/issues/874", "id": 647095808, "node_id": "MDU6SXNzdWU2NDcwOTU4MDg=", "number": 874, "title": "/favicon.ico 500 error", "user": {"login": "simonw", "id": 9599, "node_id": "MDQ6VXNlcjk1OTk=", "avatar_url": "https://avatars.githubusercontent.com/u/9599?v=4", "gravatar_id": "", "url": "https://api.github.com/users/simonw", "html_url": "https://github.com/simonw", "followers_url": "https://api.github.com/users/simonw/followers", "following_url": "https://api.github.com/users/simonw/following{/other_user}", "gists_url": "https://api.github.com/users/simonw/gists{/gist_id}", "starred_url": "https://api.github.com/users/simonw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/simonw/subscriptions", "organizations_url": "https://api.github.com/users/simonw/orgs", "repos_url": "https://api.github.com/users/simonw/repos", "events_url": "https://api.github.com/users/simonw/events{/privacy}", "received_events_url": "https://api.github.com/users/simonw/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 727708732, "node_id": "MDU6TGFiZWw3Mjc3MDg3MzI=", "url": "https://api.github.com/repos/simonw/datasette/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}, {"id": 967420289, "node_id": "MDU6TGFiZWw5Njc0MjAyODk=", "url": "https://api.github.com/repos/simonw/datasette/labels/minor", "name": "minor", "color": "fcd0c4", "default": false, "description": "Minor bugs (not high priority)"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/simonw/datasette/milestones/15", "html_url": "https://github.com/simonw/datasette/milestone/15", "labels_url": "https://api.github.com/repos/simonw/datasette/milestones/15/labels", "id": 5533512, "node_id": "MDk6TWlsZXN0b25lNTUzMzUxMg==", "number": 15, "title": "Datasette 0.45", "description": "", "creator": {"login": "simonw", "id": 9599, "node_id": "MDQ6VXNlcjk1OTk=", "avatar_url": "https://avatars.githubusercontent.com/u/9599?v=4", "gravatar_id": "", "url": "https://api.github.com/users/simonw", "html_url": "https://github.com/simonw", "followers_url": "https://api.github.com/users/simonw/followers", "following_url": "https://api.github.com/users/simonw/following{/other_user}", "gists_url": "https://api.github.com/users/simonw/gists{/gist_id}", "starred_url": "https://api.github.com/users/simonw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/simonw/subscriptions", "organizations_url": "https://api.github.com/users/simonw/orgs", "repos_url": "https://api.github.com/users/simonw/repos", "events_url": "https://api.github.com/users/simonw/events{/privacy}", "received_events_url": "https://api.github.com/users/simonw/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 25, "state": "closed", "created_at": "2020-06-11T22:03:04Z", "updated_at": "2020-07-01T23:48:59Z", "due_on": null, "closed_at": "2020-07-01T23:48:59Z"}, "comments": 0, "created_at": "2020-06-29T04:04:22Z", "updated_at": "2020-06-29T04:27:18Z", "closed_at": "2020-06-29T04:27:18Z", "author_association": "OWNER", "active_lock_reason": null, "body": "```\r\nTraceback (most recent call last):\r\n  File \"...datasette/datasette/app.py\", line 969, in route_path\r\n    response = await view(request, send)\r\nTypeError: favicon() missing 1 required positional argument: 'send'\r\n```", "reactions": {"url": "https://api.github.com/repos/simonw/datasette/issues/874/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/simonw/datasette/issues/874/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/simonw/datasette/issues/865", "repository_url": "https://api.github.com/repos/simonw/datasette", "labels_url": "https://api.github.com/repos/simonw/datasette/issues/865/labels{/name}", "comments_url": "https://api.github.com/repos/simonw/datasette/issues/865/comments", "events_url": "https://api.github.com/repos/simonw/datasette/issues/865/events", "html_url": "https://github.com/simonw/datasette/issues/865", "id": 644582921, "node_id": "MDU6SXNzdWU2NDQ1ODI5MjE=", "number": 865, "title": "base_url doesn't seem to work when adding criteria and clicking \"apply\"", "user": {"login": "tballison", "id": 6739646, "node_id": "MDQ6VXNlcjY3Mzk2NDY=", "avatar_url": "https://avatars.githubusercontent.com/u/6739646?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tballison", "html_url": "https://github.com/tballison", "followers_url": "https://api.github.com/users/tballison/followers", "following_url": "https://api.github.com/users/tballison/following{/other_user}", "gists_url": "https://api.github.com/users/tballison/gists{/gist_id}", "starred_url": "https://api.github.com/users/tballison/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tballison/subscriptions", "organizations_url": "https://api.github.com/users/tballison/orgs", "repos_url": "https://api.github.com/users/tballison/repos", "events_url": "https://api.github.com/users/tballison/events{/privacy}", "received_events_url": "https://api.github.com/users/tballison/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 727708732, "node_id": "MDU6TGFiZWw3Mjc3MDg3MzI=", "url": "https://api.github.com/repos/simonw/datasette/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}, {"id": 727708735, "node_id": "MDU6TGFiZWw3Mjc3MDg3MzU=", "url": "https://api.github.com/repos/simonw/datasette/labels/help%20wanted", "name": "help wanted", "color": "33aa3f", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/simonw/datasette/milestones/19", "html_url": "https://github.com/simonw/datasette/milestone/19", "labels_url": "https://api.github.com/repos/simonw/datasette/milestones/19/labels", "id": 6026070, "node_id": "MDk6TWlsZXN0b25lNjAyNjA3MA==", "number": 19, "title": "0.51", "description": "A new visual design, plugin hooks for adding navigation options, better handling of binary data, URL building utility methods and better support for running Datasette behind a proxy.", "creator": {"login": "simonw", "id": 9599, "node_id": "MDQ6VXNlcjk1OTk=", "avatar_url": "https://avatars.githubusercontent.com/u/9599?v=4", "gravatar_id": "", "url": "https://api.github.com/users/simonw", "html_url": "https://github.com/simonw", "followers_url": "https://api.github.com/users/simonw/followers", "following_url": "https://api.github.com/users/simonw/following{/other_user}", "gists_url": "https://api.github.com/users/simonw/gists{/gist_id}", "starred_url": "https://api.github.com/users/simonw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/simonw/subscriptions", "organizations_url": "https://api.github.com/users/simonw/orgs", "repos_url": "https://api.github.com/users/simonw/repos", "events_url": "https://api.github.com/users/simonw/events{/privacy}", "received_events_url": "https://api.github.com/users/simonw/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 53, "state": "closed", "created_at": "2020-10-23T19:42:45Z", "updated_at": "2021-11-20T19:35:48Z", "due_on": null, "closed_at": "2020-10-31T22:35:05Z"}, "comments": 11, "created_at": "2020-06-24T12:39:57Z", "updated_at": "2020-11-12T23:49:24Z", "closed_at": "2020-10-20T05:22:59Z", "author_association": "NONE", "active_lock_reason": null, "body": "Over on Apache Tika, we're using datasette to allow users to make sense of the metadata for our file regression testing corpus.\r\n\r\nThis could be user error in how I've set up the reverse proxy!\r\n\r\nI started datasette like so:\r\n`docker run -d -p 8001:8001 -v `pwd`:/mnt datasetteproject/datasette datasette -p 8001 -h 0.0.0.0 /mnt/corpora-metadata.db --config sql_time_limit_ms:60000 --config base_url:/datasette/`\r\n\r\nI then reverse proxied like so:\r\n\r\n  ProxyPreserveHost On\r\n  ProxyPass /datasette http://x.y.z.q:xxxx\r\n  ProxyPassReverse /datasette http://x.y.z.q:xxx\r\n\r\nRegular sql works perfectly:\r\nhttps://corpora.tika.apache.org/datasette/corpora-metadata?sql=select+mime_string%2C+count%281%29+as+cnt%0D%0Afrom+profiles+p%0D%0Ajoin+mimes+m+on+p.mime_id%3Dm.mime_id%0D%0Agroup+by+mime_string%0D%0Aorder+by+cnt+desc\r\n\r\n\r\nHowever, adding criteria and clicking 'Apply' \r\nhttps://corpora.tika.apache.org/datasette/corpora-metadata/tika_1_24_1_mimes?_sort=file&mime__exact=text%2Fplain\r\n\r\nbounces back to:\r\nhttps://corpora.tika.apache.org/corpora-metadata/tika_1_24_1_mimes?_sort=file&file__contains=bug&mime__exact=text%2Fplain", "reactions": {"url": "https://api.github.com/repos/simonw/datasette/issues/865/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/simonw/datasette/issues/865/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/simonw/datasette/issues/864", "repository_url": "https://api.github.com/repos/simonw/datasette", "labels_url": "https://api.github.com/repos/simonw/datasette/issues/864/labels{/name}", "comments_url": "https://api.github.com/repos/simonw/datasette/issues/864/comments", "events_url": "https://api.github.com/repos/simonw/datasette/issues/864/events", "html_url": "https://github.com/simonw/datasette/issues/864", "id": 644309017, "node_id": "MDU6SXNzdWU2NDQzMDkwMTc=", "number": 864, "title": "datasette.add_message() doesn't work inside plugins", "user": {"login": "simonw", "id": 9599, "node_id": "MDQ6VXNlcjk1OTk=", "avatar_url": "https://avatars.githubusercontent.com/u/9599?v=4", "gravatar_id": "", "url": "https://api.github.com/users/simonw", "html_url": "https://github.com/simonw", "followers_url": "https://api.github.com/users/simonw/followers", "following_url": "https://api.github.com/users/simonw/following{/other_user}", "gists_url": "https://api.github.com/users/simonw/gists{/gist_id}", "starred_url": "https://api.github.com/users/simonw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/simonw/subscriptions", "organizations_url": "https://api.github.com/users/simonw/orgs", "repos_url": "https://api.github.com/users/simonw/repos", "events_url": "https://api.github.com/users/simonw/events{/privacy}", "received_events_url": "https://api.github.com/users/simonw/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 727708732, "node_id": "MDU6TGFiZWw3Mjc3MDg3MzI=", "url": "https://api.github.com/repos/simonw/datasette/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}, {"id": 754269786, "node_id": "MDU6TGFiZWw3NTQyNjk3ODY=", "url": "https://api.github.com/repos/simonw/datasette/labels/plugins", "name": "plugins", "color": "f759cf", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/simonw/datasette/milestones/15", "html_url": "https://github.com/simonw/datasette/milestone/15", "labels_url": "https://api.github.com/repos/simonw/datasette/milestones/15/labels", "id": 5533512, "node_id": "MDk6TWlsZXN0b25lNTUzMzUxMg==", "number": 15, "title": "Datasette 0.45", "description": "", "creator": {"login": "simonw", "id": 9599, "node_id": "MDQ6VXNlcjk1OTk=", "avatar_url": "https://avatars.githubusercontent.com/u/9599?v=4", "gravatar_id": "", "url": "https://api.github.com/users/simonw", "html_url": "https://github.com/simonw", "followers_url": "https://api.github.com/users/simonw/followers", "following_url": "https://api.github.com/users/simonw/following{/other_user}", "gists_url": "https://api.github.com/users/simonw/gists{/gist_id}", "starred_url": "https://api.github.com/users/simonw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/simonw/subscriptions", "organizations_url": "https://api.github.com/users/simonw/orgs", "repos_url": "https://api.github.com/users/simonw/repos", "events_url": "https://api.github.com/users/simonw/events{/privacy}", "received_events_url": "https://api.github.com/users/simonw/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 25, "state": "closed", "created_at": "2020-06-11T22:03:04Z", "updated_at": "2020-07-01T23:48:59Z", "due_on": null, "closed_at": "2020-07-01T23:48:59Z"}, "comments": 6, "created_at": "2020-06-24T04:30:06Z", "updated_at": "2020-06-29T00:51:01Z", "closed_at": "2020-06-29T00:51:01Z", "author_association": "OWNER", "active_lock_reason": null, "body": "Similar problem to #863 - calling `datasette.add_message()` in a view registered using the `register_routes()` plugin hook doesn't work, because the code that writes accumulated messages to the `ds_messages` signed cookie lives in the `BaseView` class here:\r\n\r\nhttps://github.com/simonw/datasette/blob/28bb1c51897f3956861755e345e18b8e0b1423ac/datasette/views/base.py#L94-L97", "reactions": {"url": "https://api.github.com/repos/simonw/datasette/issues/864/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/simonw/datasette/issues/864/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/simonw/datasette/issues/863", "repository_url": "https://api.github.com/repos/simonw/datasette", "labels_url": "https://api.github.com/repos/simonw/datasette/issues/863/labels{/name}", "comments_url": "https://api.github.com/repos/simonw/datasette/issues/863/comments", "events_url": "https://api.github.com/repos/simonw/datasette/issues/863/events", "html_url": "https://github.com/simonw/datasette/issues/863", "id": 644283211, "node_id": "MDU6SXNzdWU2NDQyODMyMTE=", "number": 863, "title": "{{ csrftoken() }} doesn't work with datasette.render_template()", "user": {"login": "simonw", "id": 9599, "node_id": "MDQ6VXNlcjk1OTk=", "avatar_url": "https://avatars.githubusercontent.com/u/9599?v=4", "gravatar_id": "", "url": "https://api.github.com/users/simonw", "html_url": "https://github.com/simonw", "followers_url": "https://api.github.com/users/simonw/followers", "following_url": "https://api.github.com/users/simonw/following{/other_user}", "gists_url": "https://api.github.com/users/simonw/gists{/gist_id}", "starred_url": "https://api.github.com/users/simonw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/simonw/subscriptions", "organizations_url": "https://api.github.com/users/simonw/orgs", "repos_url": "https://api.github.com/users/simonw/repos", "events_url": "https://api.github.com/users/simonw/events{/privacy}", "received_events_url": "https://api.github.com/users/simonw/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 727708732, "node_id": "MDU6TGFiZWw3Mjc3MDg3MzI=", "url": "https://api.github.com/repos/simonw/datasette/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}, {"id": 754269786, "node_id": "MDU6TGFiZWw3NTQyNjk3ODY=", "url": "https://api.github.com/repos/simonw/datasette/labels/plugins", "name": "plugins", "color": "f759cf", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/simonw/datasette/milestones/15", "html_url": "https://github.com/simonw/datasette/milestone/15", "labels_url": "https://api.github.com/repos/simonw/datasette/milestones/15/labels", "id": 5533512, "node_id": "MDk6TWlsZXN0b25lNTUzMzUxMg==", "number": 15, "title": "Datasette 0.45", "description": "", "creator": {"login": "simonw", "id": 9599, "node_id": "MDQ6VXNlcjk1OTk=", "avatar_url": "https://avatars.githubusercontent.com/u/9599?v=4", "gravatar_id": "", "url": "https://api.github.com/users/simonw", "html_url": "https://github.com/simonw", "followers_url": "https://api.github.com/users/simonw/followers", "following_url": "https://api.github.com/users/simonw/following{/other_user}", "gists_url": "https://api.github.com/users/simonw/gists{/gist_id}", "starred_url": "https://api.github.com/users/simonw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/simonw/subscriptions", "organizations_url": "https://api.github.com/users/simonw/orgs", "repos_url": "https://api.github.com/users/simonw/repos", "events_url": "https://api.github.com/users/simonw/events{/privacy}", "received_events_url": "https://api.github.com/users/simonw/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 25, "state": "closed", "created_at": "2020-06-11T22:03:04Z", "updated_at": "2020-07-01T23:48:59Z", "due_on": null, "closed_at": "2020-07-01T23:48:59Z"}, "comments": 0, "created_at": "2020-06-24T03:11:49Z", "updated_at": "2020-06-24T04:30:30Z", "closed_at": "2020-06-24T03:24:01Z", "author_association": "OWNER", "active_lock_reason": null, "body": "The documentation here suggests that it will work:\r\n\r\nhttps://github.com/simonw/datasette/blob/eed116ac0599c7d21b7129af94d58ce03a923e4e/docs/internals.rst#L540-L546\r\n\r\nBut right now the `csrftoken` variable is set in BaseView.render, which means it's not visible to plugins that try to render templates using `datasette.render_template`:\r\n\r\nhttps://github.com/simonw/datasette/blob/799c5d53570d773203527f19530cf772dc2eeb24/datasette/views/base.py#L99-L106", "reactions": {"url": "https://api.github.com/repos/simonw/datasette/issues/863/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/simonw/datasette/issues/863/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/simonw/datasette/issues/846", "repository_url": "https://api.github.com/repos/simonw/datasette", "labels_url": "https://api.github.com/repos/simonw/datasette/issues/846/labels{/name}", "comments_url": "https://api.github.com/repos/simonw/datasette/issues/846/comments", "events_url": "https://api.github.com/repos/simonw/datasette/issues/846/events", "html_url": "https://github.com/simonw/datasette/issues/846", "id": 638241779, "node_id": "MDU6SXNzdWU2MzgyNDE3Nzk=", "number": 846, "title": "\"Too many open files\" error running tests", "user": {"login": "simonw", "id": 9599, "node_id": "MDQ6VXNlcjk1OTk=", "avatar_url": "https://avatars.githubusercontent.com/u/9599?v=4", "gravatar_id": "", "url": "https://api.github.com/users/simonw", "html_url": "https://github.com/simonw", "followers_url": "https://api.github.com/users/simonw/followers", "following_url": "https://api.github.com/users/simonw/following{/other_user}", "gists_url": "https://api.github.com/users/simonw/gists{/gist_id}", "starred_url": "https://api.github.com/users/simonw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/simonw/subscriptions", "organizations_url": "https://api.github.com/users/simonw/orgs", "repos_url": "https://api.github.com/users/simonw/repos", "events_url": "https://api.github.com/users/simonw/events{/privacy}", "received_events_url": "https://api.github.com/users/simonw/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 727708732, "node_id": "MDU6TGFiZWw3Mjc3MDg3MzI=", "url": "https://api.github.com/repos/simonw/datasette/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}, {"id": 2092302176, "node_id": "MDU6TGFiZWwyMDkyMzAyMTc2", "url": "https://api.github.com/repos/simonw/datasette/labels/tests", "name": "tests", "color": "ecc7fc", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2020-06-13T22:11:40Z", "updated_at": "2020-06-14T00:26:31Z", "closed_at": "2020-06-14T00:26:31Z", "author_association": "OWNER", "active_lock_reason": null, "body": "I got this on my laptop:\r\n```pytest\r\n...\r\n/Users/simon/.local/share/virtualenvs/datasette-AWNrQs95/lib/python3.7/site-packages/jinja2/loaders.py:171: in get_source\r\n    f = open_if_exists(filename)\r\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \r\n\r\nfilename = '/Users/simon/Dropbox/Development/datasette/datasette/templates/400.html', mode = 'rb'\r\n\r\n    def open_if_exists(filename, mode='rb'):\r\n        \"\"\"Returns a file descriptor for the filename if that file exists,\r\n        otherwise `None`.\r\n        \"\"\"\r\n        try:\r\n>           return open(filename, mode)\r\nE           OSError: [Errno 24] Too many open files: '/Users/simon/Dropbox/Development/datasette/datasette/templates/400.html'\r\n\r\n/Users/simon/.local/share/virtualenvs/datasette-AWNrQs95/lib/python3.7/site-packages/jinja2/utils.py:154: OSError\r\n```\r\nBased on the conversation in https://github.com/pytest-dev/pytest/issues/2970 I'm worried that my tests are opening too many files without closing them.\r\n\r\nIn particular... I call `sqlite3.connect(filepath)` a LOT - and I don't ever call `conn.close()` on those opened connections:\r\n\r\nhttps://github.com/simonw/datasette/blob/cf7a2bdb404734910ec07abc7571351a2d934828/datasette/database.py#L58-L60\r\n\r\nCould this be resulting in my tests eventually opening too many unclosed file handles? How could I confirm this?", "reactions": {"url": "https://api.github.com/repos/simonw/datasette/issues/846/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/simonw/datasette/issues/846/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/simonw/datasette/issues/839", "repository_url": "https://api.github.com/repos/simonw/datasette", "labels_url": "https://api.github.com/repos/simonw/datasette/issues/839/labels{/name}", "comments_url": "https://api.github.com/repos/simonw/datasette/issues/839/comments", "events_url": "https://api.github.com/repos/simonw/datasette/issues/839/events", "html_url": "https://github.com/simonw/datasette/issues/839", "id": 637409144, "node_id": "MDU6SXNzdWU2Mzc0MDkxNDQ=", "number": 839, "title": "{\"$file\": ...} mechanism is broken", "user": {"login": "simonw", "id": 9599, "node_id": "MDQ6VXNlcjk1OTk=", "avatar_url": "https://avatars.githubusercontent.com/u/9599?v=4", "gravatar_id": "", "url": "https://api.github.com/users/simonw", "html_url": "https://github.com/simonw", "followers_url": "https://api.github.com/users/simonw/followers", "following_url": "https://api.github.com/users/simonw/following{/other_user}", "gists_url": "https://api.github.com/users/simonw/gists{/gist_id}", "starred_url": "https://api.github.com/users/simonw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/simonw/subscriptions", "organizations_url": "https://api.github.com/users/simonw/orgs", "repos_url": "https://api.github.com/users/simonw/repos", "events_url": "https://api.github.com/users/simonw/events{/privacy}", "received_events_url": "https://api.github.com/users/simonw/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 727708732, "node_id": "MDU6TGFiZWw3Mjc3MDg3MzI=", "url": "https://api.github.com/repos/simonw/datasette/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/simonw/datasette/milestones/14", "html_url": "https://github.com/simonw/datasette/milestone/14", "labels_url": "https://api.github.com/repos/simonw/datasette/milestones/14/labels", "id": 5512395, "node_id": "MDk6TWlsZXN0b25lNTUxMjM5NQ==", "number": 14, "title": "Datasette 0.44", "description": "Writeable canned queries, authentication and permissions. [Changelog](https://datasette.readthedocs.io/en/latest/changelog.html#v0-44).", "creator": {"login": "simonw", "id": 9599, "node_id": "MDQ6VXNlcjk1OTk=", "avatar_url": "https://avatars.githubusercontent.com/u/9599?v=4", "gravatar_id": "", "url": "https://api.github.com/users/simonw", "html_url": "https://github.com/simonw", "followers_url": "https://api.github.com/users/simonw/followers", "following_url": "https://api.github.com/users/simonw/following{/other_user}", "gists_url": "https://api.github.com/users/simonw/gists{/gist_id}", "starred_url": "https://api.github.com/users/simonw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/simonw/subscriptions", "organizations_url": "https://api.github.com/users/simonw/orgs", "repos_url": "https://api.github.com/users/simonw/repos", "events_url": "https://api.github.com/users/simonw/events{/privacy}", "received_events_url": "https://api.github.com/users/simonw/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 39, "state": "closed", "created_at": "2020-06-06T00:41:56Z", "updated_at": "2020-06-12T22:05:31Z", "due_on": null, "closed_at": "2020-06-12T22:05:31Z"}, "comments": 0, "created_at": "2020-06-12T00:46:24Z", "updated_at": "2020-06-12T00:48:26Z", "closed_at": "2020-06-12T00:48:26Z", "author_association": "OWNER", "active_lock_reason": null, "body": "https://travis-ci.org/github/simonw/datasette/jobs/697445318\r\n```\r\n    def test_plugin_config_file(app_client):\r\n        open(TEMP_PLUGIN_SECRET_FILE, \"w\").write(\"FROM_FILE\")\r\n>       assert {\"foo\": \"FROM_FILE\"} == app_client.ds.plugin_config(\"file-plugin\")\r\nE       AssertionError: assert {'foo': 'FROM_FILE'} == {'foo': {'$fi...ugin-secret'}}\r\nE         Differing items:\r\nE         {'foo': 'FROM_FILE'} != {'foo': {'$file': '/tmp/plugin-secret'}}\r\nE         Use -v to get the full diff\r\n```\r\nBroken in https://github.com/simonw/datasette/commit/fba8ff6e76253af2b03749ed8dd6e28985a7fb8f as part of #837", "reactions": {"url": "https://api.github.com/repos/simonw/datasette/issues/839/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/simonw/datasette/issues/839/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/simonw/datasette/issues/838", "repository_url": "https://api.github.com/repos/simonw/datasette", "labels_url": "https://api.github.com/repos/simonw/datasette/issues/838/labels{/name}", "comments_url": "https://api.github.com/repos/simonw/datasette/issues/838/comments", "events_url": "https://api.github.com/repos/simonw/datasette/issues/838/events", "html_url": "https://github.com/simonw/datasette/issues/838", "id": 637395097, "node_id": "MDU6SXNzdWU2MzczOTUwOTc=", "number": 838, "title": "Incorrect URLs when served behind a proxy with base_url set", "user": {"login": "tsibley", "id": 79913, "node_id": "MDQ6VXNlcjc5OTEz", "avatar_url": "https://avatars.githubusercontent.com/u/79913?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tsibley", "html_url": "https://github.com/tsibley", "followers_url": "https://api.github.com/users/tsibley/followers", "following_url": "https://api.github.com/users/tsibley/following{/other_user}", "gists_url": "https://api.github.com/users/tsibley/gists{/gist_id}", "starred_url": "https://api.github.com/users/tsibley/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tsibley/subscriptions", "organizations_url": "https://api.github.com/users/tsibley/orgs", "repos_url": "https://api.github.com/users/tsibley/repos", "events_url": "https://api.github.com/users/tsibley/events{/privacy}", "received_events_url": "https://api.github.com/users/tsibley/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 727708732, "node_id": "MDU6TGFiZWw3Mjc3MDg3MzI=", "url": "https://api.github.com/repos/simonw/datasette/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/simonw/datasette/milestones/19", "html_url": "https://github.com/simonw/datasette/milestone/19", "labels_url": "https://api.github.com/repos/simonw/datasette/milestones/19/labels", "id": 6026070, "node_id": "MDk6TWlsZXN0b25lNjAyNjA3MA==", "number": 19, "title": "0.51", "description": "A new visual design, plugin hooks for adding navigation options, better handling of binary data, URL building utility methods and better support for running Datasette behind a proxy.", "creator": {"login": "simonw", "id": 9599, "node_id": "MDQ6VXNlcjk1OTk=", "avatar_url": "https://avatars.githubusercontent.com/u/9599?v=4", "gravatar_id": "", "url": "https://api.github.com/users/simonw", "html_url": "https://github.com/simonw", "followers_url": "https://api.github.com/users/simonw/followers", "following_url": "https://api.github.com/users/simonw/following{/other_user}", "gists_url": "https://api.github.com/users/simonw/gists{/gist_id}", "starred_url": "https://api.github.com/users/simonw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/simonw/subscriptions", "organizations_url": "https://api.github.com/users/simonw/orgs", "repos_url": "https://api.github.com/users/simonw/repos", "events_url": "https://api.github.com/users/simonw/events{/privacy}", "received_events_url": "https://api.github.com/users/simonw/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 53, "state": "closed", "created_at": "2020-10-23T19:42:45Z", "updated_at": "2021-11-20T19:35:48Z", "due_on": null, "closed_at": "2020-10-31T22:35:05Z"}, "comments": 14, "created_at": "2020-06-11T23:58:55Z", "updated_at": "2021-11-20T19:35:48Z", "closed_at": "2021-11-20T19:35:48Z", "author_association": "NONE", "active_lock_reason": null, "body": "I'm running `datasette serve --config base_url:/foo/ \u2026`, proxying to it with this Apache config:\r\n\r\n        ProxyPass /foo/ http://localhost:8001/ \r\n        ProxyPassReverse /foo/ http://localhost:8001/ \r\n\r\nand then accessing it via `https://example.com/foo/`.\r\n\r\nAlthough many of the URLs in the pages are correct (presumably because they either use absolute paths which include `base_url` or relative paths), the faceting and pagination links still use fully-qualified URLs pointing at `http://localhost:8001`.\r\n\r\nI looked into this a little in the source code, and it seems to be an issue anywhere `request.url` or `request.path` is used, as these contain the values for the request between the frontend (Apache) and backend (Datasette) server. Those properties are primarily used via the `path_with_\u2026` family of utility functions and the `Datasette.absolute_url` method.", "reactions": {"url": "https://api.github.com/repos/simonw/datasette/issues/838/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/simonw/datasette/issues/838/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/simonw/datasette/issues/837", "repository_url": "https://api.github.com/repos/simonw/datasette", "labels_url": "https://api.github.com/repos/simonw/datasette/issues/837/labels{/name}", "comments_url": "https://api.github.com/repos/simonw/datasette/issues/837/comments", "events_url": "https://api.github.com/repos/simonw/datasette/issues/837/events", "html_url": "https://github.com/simonw/datasette/issues/837", "id": 637370652, "node_id": "MDU6SXNzdWU2MzczNzA2NTI=", "number": 837, "title": "Plugin $env secrets mechanism doesn't work inside lists", "user": {"login": "simonw", "id": 9599, "node_id": "MDQ6VXNlcjk1OTk=", "avatar_url": "https://avatars.githubusercontent.com/u/9599?v=4", "gravatar_id": "", "url": "https://api.github.com/users/simonw", "html_url": "https://github.com/simonw", "followers_url": "https://api.github.com/users/simonw/followers", "following_url": "https://api.github.com/users/simonw/following{/other_user}", "gists_url": "https://api.github.com/users/simonw/gists{/gist_id}", "starred_url": "https://api.github.com/users/simonw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/simonw/subscriptions", "organizations_url": "https://api.github.com/users/simonw/orgs", "repos_url": "https://api.github.com/users/simonw/repos", "events_url": "https://api.github.com/users/simonw/events{/privacy}", "received_events_url": "https://api.github.com/users/simonw/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 727708732, "node_id": "MDU6TGFiZWw3Mjc3MDg3MzI=", "url": "https://api.github.com/repos/simonw/datasette/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}, {"id": 729585263, "node_id": "MDU6TGFiZWw3Mjk1ODUyNjM=", "url": "https://api.github.com/repos/simonw/datasette/labels/small", "name": "small", "color": "a7f9b7", "default": false, "description": null}, {"id": 754269786, "node_id": "MDU6TGFiZWw3NTQyNjk3ODY=", "url": "https://api.github.com/repos/simonw/datasette/labels/plugins", "name": "plugins", "color": "f759cf", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/simonw/datasette/milestones/14", "html_url": "https://github.com/simonw/datasette/milestone/14", "labels_url": "https://api.github.com/repos/simonw/datasette/milestones/14/labels", "id": 5512395, "node_id": "MDk6TWlsZXN0b25lNTUxMjM5NQ==", "number": 14, "title": "Datasette 0.44", "description": "Writeable canned queries, authentication and permissions. [Changelog](https://datasette.readthedocs.io/en/latest/changelog.html#v0-44).", "creator": {"login": "simonw", "id": 9599, "node_id": "MDQ6VXNlcjk1OTk=", "avatar_url": "https://avatars.githubusercontent.com/u/9599?v=4", "gravatar_id": "", "url": "https://api.github.com/users/simonw", "html_url": "https://github.com/simonw", "followers_url": "https://api.github.com/users/simonw/followers", "following_url": "https://api.github.com/users/simonw/following{/other_user}", "gists_url": "https://api.github.com/users/simonw/gists{/gist_id}", "starred_url": "https://api.github.com/users/simonw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/simonw/subscriptions", "organizations_url": "https://api.github.com/users/simonw/orgs", "repos_url": "https://api.github.com/users/simonw/repos", "events_url": "https://api.github.com/users/simonw/events{/privacy}", "received_events_url": "https://api.github.com/users/simonw/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 39, "state": "closed", "created_at": "2020-06-06T00:41:56Z", "updated_at": "2020-06-12T22:05:31Z", "due_on": null, "closed_at": "2020-06-12T22:05:31Z"}, "comments": 0, "created_at": "2020-06-11T22:59:54Z", "updated_at": "2020-06-12T00:25:20Z", "closed_at": "2020-06-12T00:25:19Z", "author_association": "OWNER", "active_lock_reason": null, "body": "This didn't work:\r\n```json\r\n{\r\n    \"plugins\": {\r\n        \"datasette-auth-tokens\": [\r\n            {\r\n                \"token\": {\r\n                    \"$env\": \"BOT_TOKEN\"\r\n                },\r\n                \"actor\": {\r\n                    \"bot_id\": \"my-bot\"\r\n                }\r\n            }\r\n        ]\r\n    }\r\n}\r\n```", "reactions": {"url": "https://api.github.com/repos/simonw/datasette/issues/837/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/simonw/datasette/issues/837/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/simonw/datasette/issues/836", "repository_url": "https://api.github.com/repos/simonw/datasette", "labels_url": "https://api.github.com/repos/simonw/datasette/issues/836/labels{/name}", "comments_url": "https://api.github.com/repos/simonw/datasette/issues/836/comments", "events_url": "https://api.github.com/repos/simonw/datasette/issues/836/events", "html_url": "https://github.com/simonw/datasette/issues/836", "id": 637365801, "node_id": "MDU6SXNzdWU2MzczNjU4MDE=", "number": 836, "title": "actor_matches_allow fails to consider all keys", "user": {"login": "simonw", "id": 9599, "node_id": "MDQ6VXNlcjk1OTk=", "avatar_url": "https://avatars.githubusercontent.com/u/9599?v=4", "gravatar_id": "", "url": "https://api.github.com/users/simonw", "html_url": "https://github.com/simonw", "followers_url": "https://api.github.com/users/simonw/followers", "following_url": "https://api.github.com/users/simonw/following{/other_user}", "gists_url": "https://api.github.com/users/simonw/gists{/gist_id}", "starred_url": "https://api.github.com/users/simonw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/simonw/subscriptions", "organizations_url": "https://api.github.com/users/simonw/orgs", "repos_url": "https://api.github.com/users/simonw/repos", "events_url": "https://api.github.com/users/simonw/events{/privacy}", "received_events_url": "https://api.github.com/users/simonw/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 727708732, "node_id": "MDU6TGFiZWw3Mjc3MDg3MzI=", "url": "https://api.github.com/repos/simonw/datasette/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}, {"id": 729585263, "node_id": "MDU6TGFiZWw3Mjk1ODUyNjM=", "url": "https://api.github.com/repos/simonw/datasette/labels/small", "name": "small", "color": "a7f9b7", "default": false, "description": null}, {"id": 1913901969, "node_id": "MDU6TGFiZWwxOTEzOTAxOTY5", "url": "https://api.github.com/repos/simonw/datasette/labels/authentication-and-permissions", "name": "authentication-and-permissions", "color": "51e2ff", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/simonw/datasette/milestones/14", "html_url": "https://github.com/simonw/datasette/milestone/14", "labels_url": "https://api.github.com/repos/simonw/datasette/milestones/14/labels", "id": 5512395, "node_id": "MDk6TWlsZXN0b25lNTUxMjM5NQ==", "number": 14, "title": "Datasette 0.44", "description": "Writeable canned queries, authentication and permissions. [Changelog](https://datasette.readthedocs.io/en/latest/changelog.html#v0-44).", "creator": {"login": "simonw", "id": 9599, "node_id": "MDQ6VXNlcjk1OTk=", "avatar_url": "https://avatars.githubusercontent.com/u/9599?v=4", "gravatar_id": "", "url": "https://api.github.com/users/simonw", "html_url": "https://github.com/simonw", "followers_url": "https://api.github.com/users/simonw/followers", "following_url": "https://api.github.com/users/simonw/following{/other_user}", "gists_url": "https://api.github.com/users/simonw/gists{/gist_id}", "starred_url": "https://api.github.com/users/simonw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/simonw/subscriptions", "organizations_url": "https://api.github.com/users/simonw/orgs", "repos_url": "https://api.github.com/users/simonw/repos", "events_url": "https://api.github.com/users/simonw/events{/privacy}", "received_events_url": "https://api.github.com/users/simonw/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 39, "state": "closed", "created_at": "2020-06-06T00:41:56Z", "updated_at": "2020-06-12T22:05:31Z", "due_on": null, "closed_at": "2020-06-12T22:05:31Z"}, "comments": 0, "created_at": "2020-06-11T22:46:34Z", "updated_at": "2020-06-11T22:47:25Z", "closed_at": "2020-06-11T22:47:25Z", "author_association": "OWNER", "active_lock_reason": null, "body": "actor: `{\"id\": \"root\"}`\r\n\r\nallow block: `{\"bot_id\": \"my-bot\", \"id\": [\"root\"]}`\r\n\r\nThis should pass, because the `id` matches - but it fails.", "reactions": {"url": "https://api.github.com/repos/simonw/datasette/issues/836/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/simonw/datasette/issues/836/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/simonw/datasette/issues/828", "repository_url": "https://api.github.com/repos/simonw/datasette", "labels_url": "https://api.github.com/repos/simonw/datasette/issues/828/labels{/name}", "comments_url": "https://api.github.com/repos/simonw/datasette/issues/828/comments", "events_url": "https://api.github.com/repos/simonw/datasette/issues/828/events", "html_url": "https://github.com/simonw/datasette/issues/828", "id": 635914822, "node_id": "MDU6SXNzdWU2MzU5MTQ4MjI=", "number": 828, "title": "Horizontal scrollbar on changelog page on mobile", "user": {"login": "simonw", "id": 9599, "node_id": "MDQ6VXNlcjk1OTk=", "avatar_url": "https://avatars.githubusercontent.com/u/9599?v=4", "gravatar_id": "", "url": "https://api.github.com/users/simonw", "html_url": "https://github.com/simonw", "followers_url": "https://api.github.com/users/simonw/followers", "following_url": "https://api.github.com/users/simonw/following{/other_user}", "gists_url": "https://api.github.com/users/simonw/gists{/gist_id}", "starred_url": "https://api.github.com/users/simonw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/simonw/subscriptions", "organizations_url": "https://api.github.com/users/simonw/orgs", "repos_url": "https://api.github.com/users/simonw/repos", "events_url": "https://api.github.com/users/simonw/events{/privacy}", "received_events_url": "https://api.github.com/users/simonw/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 727708732, "node_id": "MDU6TGFiZWw3Mjc3MDg3MzI=", "url": "https://api.github.com/repos/simonw/datasette/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}, {"id": 750789605, "node_id": "MDU6TGFiZWw3NTA3ODk2MDU=", "url": "https://api.github.com/repos/simonw/datasette/labels/documentation", "name": "documentation", "color": "fc8b0a", "default": true, "description": null}, {"id": 1918831023, "node_id": "MDU6TGFiZWwxOTE4ODMxMDIz", "url": "https://api.github.com/repos/simonw/datasette/labels/css", "name": "css", "color": "7261dd", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/simonw/datasette/milestones/14", "html_url": "https://github.com/simonw/datasette/milestone/14", "labels_url": "https://api.github.com/repos/simonw/datasette/milestones/14/labels", "id": 5512395, "node_id": "MDk6TWlsZXN0b25lNTUxMjM5NQ==", "number": 14, "title": "Datasette 0.44", "description": "Writeable canned queries, authentication and permissions. [Changelog](https://datasette.readthedocs.io/en/latest/changelog.html#v0-44).", "creator": {"login": "simonw", "id": 9599, "node_id": "MDQ6VXNlcjk1OTk=", "avatar_url": "https://avatars.githubusercontent.com/u/9599?v=4", "gravatar_id": "", "url": "https://api.github.com/users/simonw", "html_url": "https://github.com/simonw", "followers_url": "https://api.github.com/users/simonw/followers", "following_url": "https://api.github.com/users/simonw/following{/other_user}", "gists_url": "https://api.github.com/users/simonw/gists{/gist_id}", "starred_url": "https://api.github.com/users/simonw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/simonw/subscriptions", "organizations_url": "https://api.github.com/users/simonw/orgs", "repos_url": "https://api.github.com/users/simonw/repos", "events_url": "https://api.github.com/users/simonw/events{/privacy}", "received_events_url": "https://api.github.com/users/simonw/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 39, "state": "closed", "created_at": "2020-06-06T00:41:56Z", "updated_at": "2020-06-12T22:05:31Z", "due_on": null, "closed_at": "2020-06-12T22:05:31Z"}, "comments": 3, "created_at": "2020-06-10T04:18:54Z", "updated_at": "2020-06-10T04:28:17Z", "closed_at": "2020-06-10T04:28:17Z", "author_association": "OWNER", "active_lock_reason": null, "body": "You can scroll sideways on that page and it looks bad:\r\n\r\n<img width=\"419\" alt=\"Changelog_\u2014_Datasette_documentation\" src=\"https://user-images.githubusercontent.com/9599/84226483-b8c5ab80-aa96-11ea-8fa7-db0c37ab9441.png\">\r\n\r\nThe cause is these long links:\r\n\r\n<img width=\"452\" alt=\"Changelog_\u2014_Datasette_documentation\" src=\"https://user-images.githubusercontent.com/9599/84226511-d09d2f80-aa96-11ea-8bd9-891c07098516.png\">\r\n", "reactions": {"url": "https://api.github.com/repos/simonw/datasette/issues/828/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/simonw/datasette/issues/828/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/simonw/datasette/issues/804", "repository_url": "https://api.github.com/repos/simonw/datasette", "labels_url": "https://api.github.com/repos/simonw/datasette/issues/804/labels{/name}", "comments_url": "https://api.github.com/repos/simonw/datasette/issues/804/comments", "events_url": "https://api.github.com/repos/simonw/datasette/issues/804/events", "html_url": "https://github.com/simonw/datasette/issues/804", "id": 632673972, "node_id": "MDU6SXNzdWU2MzI2NzM5NzI=", "number": 804, "title": "python tests/fixtures.py command has a bug", "user": {"login": "simonw", "id": 9599, "node_id": "MDQ6VXNlcjk1OTk=", "avatar_url": "https://avatars.githubusercontent.com/u/9599?v=4", "gravatar_id": "", "url": "https://api.github.com/users/simonw", "html_url": "https://github.com/simonw", "followers_url": "https://api.github.com/users/simonw/followers", "following_url": "https://api.github.com/users/simonw/following{/other_user}", "gists_url": "https://api.github.com/users/simonw/gists{/gist_id}", "starred_url": "https://api.github.com/users/simonw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/simonw/subscriptions", "organizations_url": "https://api.github.com/users/simonw/orgs", "repos_url": "https://api.github.com/users/simonw/repos", "events_url": "https://api.github.com/users/simonw/events{/privacy}", "received_events_url": "https://api.github.com/users/simonw/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 727708732, "node_id": "MDU6TGFiZWw3Mjc3MDg3MzI=", "url": "https://api.github.com/repos/simonw/datasette/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}, {"id": 967420289, "node_id": "MDU6TGFiZWw5Njc0MjAyODk=", "url": "https://api.github.com/repos/simonw/datasette/labels/minor", "name": "minor", "color": "fcd0c4", "default": false, "description": "Minor bugs (not high priority)"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/simonw/datasette/milestones/14", "html_url": "https://github.com/simonw/datasette/milestone/14", "labels_url": "https://api.github.com/repos/simonw/datasette/milestones/14/labels", "id": 5512395, "node_id": "MDk6TWlsZXN0b25lNTUxMjM5NQ==", "number": 14, "title": "Datasette 0.44", "description": "Writeable canned queries, authentication and permissions. [Changelog](https://datasette.readthedocs.io/en/latest/changelog.html#v0-44).", "creator": {"login": "simonw", "id": 9599, "node_id": "MDQ6VXNlcjk1OTk=", "avatar_url": "https://avatars.githubusercontent.com/u/9599?v=4", "gravatar_id": "", "url": "https://api.github.com/users/simonw", "html_url": "https://github.com/simonw", "followers_url": "https://api.github.com/users/simonw/followers", "following_url": "https://api.github.com/users/simonw/following{/other_user}", "gists_url": "https://api.github.com/users/simonw/gists{/gist_id}", "starred_url": "https://api.github.com/users/simonw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/simonw/subscriptions", "organizations_url": "https://api.github.com/users/simonw/orgs", "repos_url": "https://api.github.com/users/simonw/repos", "events_url": "https://api.github.com/users/simonw/events{/privacy}", "received_events_url": "https://api.github.com/users/simonw/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 39, "state": "closed", "created_at": "2020-06-06T00:41:56Z", "updated_at": "2020-06-12T22:05:31Z", "due_on": null, "closed_at": "2020-06-12T22:05:31Z"}, "comments": 6, "created_at": "2020-06-06T19:17:36Z", "updated_at": "2020-06-09T20:01:30Z", "closed_at": "2020-06-09T19:58:34Z", "author_association": "OWNER", "active_lock_reason": null, "body": "This command is meant to write out `fixtures.db`, `metadata.json` and a plugins directory:\r\n```\r\n$ python tests/fixtures.py /tmp/fixtures.db /tmp/metadata.json /tmp/plugins/\r\nTest tables written to /tmp/fixtures.db\r\n- metadata written to /tmp/metadata.json\r\nTraceback (most recent call last):\r\n  File \"tests/fixtures.py\", line 833, in <module>\r\n    (\"my_plugin.py\", PLUGIN1),\r\nNameError: name 'PLUGIN1' is not defined\r\n```", "reactions": {"url": "https://api.github.com/repos/simonw/datasette/issues/804/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/simonw/datasette/issues/804/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/simonw/datasette/issues/802", "repository_url": "https://api.github.com/repos/simonw/datasette", "labels_url": "https://api.github.com/repos/simonw/datasette/issues/802/labels{/name}", "comments_url": "https://api.github.com/repos/simonw/datasette/issues/802/comments", "events_url": "https://api.github.com/repos/simonw/datasette/issues/802/events", "html_url": "https://github.com/simonw/datasette/issues/802", "id": 632056825, "node_id": "MDU6SXNzdWU2MzIwNTY4MjU=", "number": 802, "title": "\"datasette plugins\" command is broken", "user": {"login": "simonw", "id": 9599, "node_id": "MDQ6VXNlcjk1OTk=", "avatar_url": "https://avatars.githubusercontent.com/u/9599?v=4", "gravatar_id": "", "url": "https://api.github.com/users/simonw", "html_url": "https://github.com/simonw", "followers_url": "https://api.github.com/users/simonw/followers", "following_url": "https://api.github.com/users/simonw/following{/other_user}", "gists_url": "https://api.github.com/users/simonw/gists{/gist_id}", "starred_url": "https://api.github.com/users/simonw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/simonw/subscriptions", "organizations_url": "https://api.github.com/users/simonw/orgs", "repos_url": "https://api.github.com/users/simonw/repos", "events_url": "https://api.github.com/users/simonw/events{/privacy}", "received_events_url": "https://api.github.com/users/simonw/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 727708732, "node_id": "MDU6TGFiZWw3Mjc3MDg3MzI=", "url": "https://api.github.com/repos/simonw/datasette/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-06-05T23:33:01Z", "updated_at": "2020-06-05T23:46:43Z", "closed_at": "2020-06-05T23:46:43Z", "author_association": "OWNER", "active_lock_reason": null, "body": "I broke it in https://github.com/simonw/datasette/commit/a7137dfe069e5fceca56f78631baebd4a6a19967 - and it turns out there was no test coverage so I didn't realize it was broken.", "reactions": {"url": "https://api.github.com/repos/simonw/datasette/issues/802/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/simonw/datasette/issues/802/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/simonw/datasette/issues/781", "repository_url": "https://api.github.com/repos/simonw/datasette", "labels_url": "https://api.github.com/repos/simonw/datasette/issues/781/labels{/name}", "comments_url": "https://api.github.com/repos/simonw/datasette/issues/781/comments", "events_url": "https://api.github.com/repos/simonw/datasette/issues/781/events", "html_url": "https://github.com/simonw/datasette/issues/781", "id": 626663119, "node_id": "MDU6SXNzdWU2MjY2NjMxMTk=", "number": 781, "title": "request.url and request.scheme should obey force_https_urls config setting", "user": {"login": "simonw", "id": 9599, "node_id": "MDQ6VXNlcjk1OTk=", "avatar_url": "https://avatars.githubusercontent.com/u/9599?v=4", "gravatar_id": "", "url": "https://api.github.com/users/simonw", "html_url": "https://github.com/simonw", "followers_url": "https://api.github.com/users/simonw/followers", "following_url": "https://api.github.com/users/simonw/following{/other_user}", "gists_url": "https://api.github.com/users/simonw/gists{/gist_id}", "starred_url": "https://api.github.com/users/simonw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/simonw/subscriptions", "organizations_url": "https://api.github.com/users/simonw/orgs", "repos_url": "https://api.github.com/users/simonw/repos", "events_url": "https://api.github.com/users/simonw/events{/privacy}", "received_events_url": "https://api.github.com/users/simonw/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 727708732, "node_id": "MDU6TGFiZWw3Mjc3MDg3MzI=", "url": "https://api.github.com/repos/simonw/datasette/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2020-05-28T16:54:47Z", "updated_at": "2020-05-28T17:39:54Z", "closed_at": "2020-05-28T17:10:13Z", "author_association": "OWNER", "active_lock_reason": null, "body": "I'm trying to get the https://www.niche-museums.com/browse/feed.atom feed to validate and I git this from https://validator.w3.org/feed/check.cgi?url=https%3A%2F%2Fwww.niche-museums.com%2Fbrowse%2Ffeed.atom\r\n\r\n> This feed is valid, but interoperability with the widest range of feed readers could be improved by implementing the following recommendations.\r\n> \r\n> [line 6](https://validator.w3.org/feed/check.cgi?url=https%3A%2F%2Fwww.niche-museums.com%2Fbrowse%2Ffeed.atom#l6), column 73: Self reference doesn't match document location [[help](https://validator.w3.org/feed/docs/warning/SelfDoesntMatchLocation.html \"more information about this error\")]\r\n> \r\n>     <link href=\"http://www.niche-museums.com/browse/feed.atom\" rel=\"self\"/>\r\n\r\nI tried to fix this using `force_https_urls` ([commit](https://github.com/simonw/museums/commit/5dc8e2c717c59f9e949b65e47a59878e01f929e4)) but it didn't work - because that setting isn't respected by the Request class:\r\n\r\nhttps://github.com/simonw/datasette/blob/40885ef24e32d91502b6b8bbad1c7376f50f2830/datasette/utils/asgi.py#L15-L32", "reactions": {"url": "https://api.github.com/repos/simonw/datasette/issues/781/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/simonw/datasette/issues/781/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/simonw/datasette/issues/777", "repository_url": "https://api.github.com/repos/simonw/datasette", "labels_url": "https://api.github.com/repos/simonw/datasette/issues/777/labels{/name}", "comments_url": "https://api.github.com/repos/simonw/datasette/issues/777/comments", "events_url": "https://api.github.com/repos/simonw/datasette/issues/777/events", "html_url": "https://github.com/simonw/datasette/issues/777", "id": 626171242, "node_id": "MDU6SXNzdWU2MjYxNzEyNDI=", "number": 777, "title": "Error pages not correctly loading CSS", "user": {"login": "simonw", "id": 9599, "node_id": "MDQ6VXNlcjk1OTk=", "avatar_url": "https://avatars.githubusercontent.com/u/9599?v=4", "gravatar_id": "", "url": "https://api.github.com/users/simonw", "html_url": "https://github.com/simonw", "followers_url": "https://api.github.com/users/simonw/followers", "following_url": "https://api.github.com/users/simonw/following{/other_user}", "gists_url": "https://api.github.com/users/simonw/gists{/gist_id}", "starred_url": "https://api.github.com/users/simonw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/simonw/subscriptions", "organizations_url": "https://api.github.com/users/simonw/orgs", "repos_url": "https://api.github.com/users/simonw/repos", "events_url": "https://api.github.com/users/simonw/events{/privacy}", "received_events_url": "https://api.github.com/users/simonw/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 727708732, "node_id": "MDU6TGFiZWw3Mjc3MDg3MzI=", "url": "https://api.github.com/repos/simonw/datasette/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}, {"id": 729585263, "node_id": "MDU6TGFiZWw3Mjk1ODUyNjM=", "url": "https://api.github.com/repos/simonw/datasette/labels/small", "name": "small", "color": "a7f9b7", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/simonw/datasette/milestones/14", "html_url": "https://github.com/simonw/datasette/milestone/14", "labels_url": "https://api.github.com/repos/simonw/datasette/milestones/14/labels", "id": 5512395, "node_id": "MDk6TWlsZXN0b25lNTUxMjM5NQ==", "number": 14, "title": "Datasette 0.44", "description": "Writeable canned queries, authentication and permissions. [Changelog](https://datasette.readthedocs.io/en/latest/changelog.html#v0-44).", "creator": {"login": "simonw", "id": 9599, "node_id": "MDQ6VXNlcjk1OTk=", "avatar_url": "https://avatars.githubusercontent.com/u/9599?v=4", "gravatar_id": "", "url": "https://api.github.com/users/simonw", "html_url": "https://github.com/simonw", "followers_url": "https://api.github.com/users/simonw/followers", "following_url": "https://api.github.com/users/simonw/following{/other_user}", "gists_url": "https://api.github.com/users/simonw/gists{/gist_id}", "starred_url": "https://api.github.com/users/simonw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/simonw/subscriptions", "organizations_url": "https://api.github.com/users/simonw/orgs", "repos_url": "https://api.github.com/users/simonw/repos", "events_url": "https://api.github.com/users/simonw/events{/privacy}", "received_events_url": "https://api.github.com/users/simonw/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 39, "state": "closed", "created_at": "2020-06-06T00:41:56Z", "updated_at": "2020-06-12T22:05:31Z", "due_on": null, "closed_at": "2020-06-12T22:05:31Z"}, "comments": 4, "created_at": "2020-05-28T02:47:52Z", "updated_at": "2020-06-09T00:35:29Z", "closed_at": "2020-06-09T00:35:29Z", "author_association": "OWNER", "active_lock_reason": null, "body": "e.g. https://latest.datasette.io/fixtures/compound_three_primary_keys.tsv?_size=max\r\n\r\n<img width=\"856\" alt=\"Error_404_and_All_plugin_hooks_should_have_unit_tests_\u00b7_Issue__773_\u00b7_simonw_datasette\" src=\"https://user-images.githubusercontent.com/9599/83092786-e5b79e80-a052-11ea-9cd7-6a1c01eb08e7.png\">\r\n\r\nThe HTML starts like this:\r\n\r\n```html\r\n<!DOCTYPE html>\r\n<html>\r\n<head>\r\n    <title>Error 404</title>\r\n    <link rel=\"stylesheet\" href=\"-/static/app.css?\">\r\n```", "reactions": {"url": "https://api.github.com/repos/simonw/datasette/issues/777/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/simonw/datasette/issues/777/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/simonw/datasette/issues/752", "repository_url": "https://api.github.com/repos/simonw/datasette", "labels_url": "https://api.github.com/repos/simonw/datasette/issues/752/labels{/name}", "comments_url": "https://api.github.com/repos/simonw/datasette/issues/752/comments", "events_url": "https://api.github.com/repos/simonw/datasette/issues/752/events", "html_url": "https://github.com/simonw/datasette/issues/752", "id": 611835285, "node_id": "MDU6SXNzdWU2MTE4MzUyODU=", "number": 752, "title": "Non-utf8 encoding in exceptionhandlers and custom-pages", "user": {"login": "clausjuhl", "id": 2181410, "node_id": "MDQ6VXNlcjIxODE0MTA=", "avatar_url": "https://avatars.githubusercontent.com/u/2181410?v=4", "gravatar_id": "", "url": "https://api.github.com/users/clausjuhl", "html_url": "https://github.com/clausjuhl", "followers_url": "https://api.github.com/users/clausjuhl/followers", "following_url": "https://api.github.com/users/clausjuhl/following{/other_user}", "gists_url": "https://api.github.com/users/clausjuhl/gists{/gist_id}", "starred_url": "https://api.github.com/users/clausjuhl/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/clausjuhl/subscriptions", "organizations_url": "https://api.github.com/users/clausjuhl/orgs", "repos_url": "https://api.github.com/users/clausjuhl/repos", "events_url": "https://api.github.com/users/clausjuhl/events{/privacy}", "received_events_url": "https://api.github.com/users/clausjuhl/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 727708732, "node_id": "MDU6TGFiZWw3Mjc3MDg3MzI=", "url": "https://api.github.com/repos/simonw/datasette/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-05-04T12:24:42Z", "updated_at": "2020-05-04T17:42:20Z", "closed_at": "2020-05-04T17:42:20Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi Simon.\r\n\r\nWhenever a response is not piped through a router-view, the template is encoded in latin-1 (I think). This is especially a problem (for me) with the new custom_pages-functionality, but also problematic with the 404- and 500-handlers. Thanks!", "reactions": {"url": "https://api.github.com/repos/simonw/datasette/issues/752/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/simonw/datasette/issues/752/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/simonw/datasette/issues/749", "repository_url": "https://api.github.com/repos/simonw/datasette", "labels_url": "https://api.github.com/repos/simonw/datasette/issues/749/labels{/name}", "comments_url": "https://api.github.com/repos/simonw/datasette/issues/749/comments", "events_url": "https://api.github.com/repos/simonw/datasette/issues/749/events", "html_url": "https://github.com/simonw/datasette/issues/749", "id": 610829227, "node_id": "MDU6SXNzdWU2MTA4MjkyMjc=", "number": 749, "title": "Cloud Run fails to serve database files larger than 32MB", "user": {"login": "simonw", "id": 9599, "node_id": "MDQ6VXNlcjk1OTk=", "avatar_url": "https://avatars.githubusercontent.com/u/9599?v=4", "gravatar_id": "", "url": "https://api.github.com/users/simonw", "html_url": "https://github.com/simonw", "followers_url": "https://api.github.com/users/simonw/followers", "following_url": "https://api.github.com/users/simonw/following{/other_user}", "gists_url": "https://api.github.com/users/simonw/gists{/gist_id}", "starred_url": "https://api.github.com/users/simonw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/simonw/subscriptions", "organizations_url": "https://api.github.com/users/simonw/orgs", "repos_url": "https://api.github.com/users/simonw/repos", "events_url": "https://api.github.com/users/simonw/events{/privacy}", "received_events_url": "https://api.github.com/users/simonw/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 727708732, "node_id": "MDU6TGFiZWw3Mjc3MDg3MzI=", "url": "https://api.github.com/repos/simonw/datasette/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}, {"id": 750250793, "node_id": "MDU6TGFiZWw3NTAyNTA3OTM=", "url": "https://api.github.com/repos/simonw/datasette/labels/datasette-publish", "name": "datasette-publish", "color": "c3bdf9", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2020-05-01T16:06:46Z", "updated_at": "2020-12-03T00:31:15Z", "closed_at": "2020-12-03T00:31:14Z", "author_association": "OWNER", "active_lock_reason": null, "body": "https://cloud.google.com/run/quotas lists the maximum response size as 32MB.\r\n\r\nI spotted a bug where attempting to download a database file larger than that from a Cloud Run deployment (in this case it was https://github-to-sqlite.dogsheep.net/github.db after I [accidentally increased the size of that database](https://github.com/dogsheep/github-to-sqlite/commit/630bdba68a23c0ac453e015518ef0bf41107a952)) returned a 500 error because of this.", "reactions": {"url": "https://api.github.com/repos/simonw/datasette/issues/749/reactions", "total_count": 1, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/simonw/datasette/issues/749/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/simonw/datasette/issues/744", "repository_url": "https://api.github.com/repos/simonw/datasette", "labels_url": "https://api.github.com/repos/simonw/datasette/issues/744/labels{/name}", "comments_url": "https://api.github.com/repos/simonw/datasette/issues/744/comments", "events_url": "https://api.github.com/repos/simonw/datasette/issues/744/events", "html_url": "https://github.com/simonw/datasette/issues/744", "id": 608058890, "node_id": "MDU6SXNzdWU2MDgwNTg4OTA=", "number": 744, "title": "link_or_copy_directory() error - Invalid cross-device link", "user": {"login": "aborruso", "id": 30607, "node_id": "MDQ6VXNlcjMwNjA3", "avatar_url": "https://avatars.githubusercontent.com/u/30607?v=4", "gravatar_id": "", "url": "https://api.github.com/users/aborruso", "html_url": "https://github.com/aborruso", "followers_url": "https://api.github.com/users/aborruso/followers", "following_url": "https://api.github.com/users/aborruso/following{/other_user}", "gists_url": "https://api.github.com/users/aborruso/gists{/gist_id}", "starred_url": "https://api.github.com/users/aborruso/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/aborruso/subscriptions", "organizations_url": "https://api.github.com/users/aborruso/orgs", "repos_url": "https://api.github.com/users/aborruso/repos", "events_url": "https://api.github.com/users/aborruso/events{/privacy}", "received_events_url": "https://api.github.com/users/aborruso/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 727708732, "node_id": "MDU6TGFiZWw3Mjc3MDg3MzI=", "url": "https://api.github.com/repos/simonw/datasette/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}, {"id": 750250793, "node_id": "MDU6TGFiZWw3NTAyNTA3OTM=", "url": "https://api.github.com/repos/simonw/datasette/labels/datasette-publish", "name": "datasette-publish", "color": "c3bdf9", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 28, "created_at": "2020-04-28T06:26:45Z", "updated_at": "2020-05-28T14:32:53Z", "closed_at": "2020-05-27T06:01:28Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi,\r\nwhen I run\r\n\r\n```\r\ndatasette  publish heroku -n myapp --template-dir ./template mydb.db\r\n```\r\n\r\nI have this error\r\n\r\n```\r\nTraceback (most recent call last):\r\n  File \"/home/aborruso/.local/lib/python3.7/site-packages/datasette/utils/__init__.py\", line 607, in link_or_copy_directory\r\n    shutil.copytree(src, dst, copy_function=os.link)\r\n  File \"/usr/lib/python3.7/shutil.py\", line 365, in copytree\r\n    raise Error(errors)\r\nshutil.Error: [('/myfolder/youtubeComunePalermo/processing/./template/base.html', '/tmp/tmps9_4mzc4/templates/base.html', \"[Errno 18] Invalid cross-device link: '/myfolder/youtubeComunePalermo/processing/./template/base.html' -> '/tmp/tmps9_4mzc4/templates/base.html'\"), ('/myfolder/youtubeComunePalermo/processing/./template/index.html', '/tmp/tmps9_4mzc4/templates/index.html', \"[Errno 18] Invalid cross-device link: '/myfolder/youtubeComunePalermo/processing/./template/index.html' -> '/tmp/tmps9_4mzc4/templates/index.html'\")]\r\n\r\nDuring handling of the above exception, another exception occurred:\r\n\r\nTraceback (most recent call last):\r\n  File \"/home/aborruso/.local/bin/datasette\", line 8, in <module>\r\n    sys.exit(cli())\r\n  File \"/home/aborruso/.local/lib/python3.7/site-packages/click/core.py\", line 829, in __call__\r\n    return self.main(*args, **kwargs)\r\n  File \"/home/aborruso/.local/lib/python3.7/site-packages/click/core.py\", line 782, in main\r\n    rv = self.invoke(ctx)\r\n  File \"/home/aborruso/.local/lib/python3.7/site-packages/click/core.py\", line 1259, in invoke\r\n    return _process_result(sub_ctx.command.invoke(sub_ctx))\r\n  File \"/home/aborruso/.local/lib/python3.7/site-packages/click/core.py\", line 1259, in invoke\r\n    return _process_result(sub_ctx.command.invoke(sub_ctx))\r\n  File \"/home/aborruso/.local/lib/python3.7/site-packages/click/core.py\", line 1066, in invoke\r\n    return ctx.invoke(self.callback, **ctx.params)\r\n  File \"/home/aborruso/.local/lib/python3.7/site-packages/click/core.py\", line 610, in invoke\r\n    return callback(*args, **kwargs)\r\n  File \"/home/aborruso/.local/lib/python3.7/site-packages/datasette/publish/heroku.py\", line 103, in heroku\r\n    extra_metadata,\r\n  File \"/usr/lib/python3.7/contextlib.py\", line 112, in __enter__\r\n    return next(self.gen)\r\n  File \"/home/aborruso/.local/lib/python3.7/site-packages/datasette/publish/heroku.py\", line 191, in temporary_heroku_directory\r\n    os.path.join(tmp.name, \"templates\"),\r\n  File \"/home/aborruso/.local/lib/python3.7/site-packages/datasette/utils/__init__.py\", line 609, in link_or_copy_directory\r\n    shutil.copytree(src, dst)\r\n  File \"/usr/lib/python3.7/shutil.py\", line 321, in copytree\r\n    os.makedirs(dst)\r\n  File \"/usr/lib/python3.7/os.py\", line 221, in makedirs\r\n    mkdir(name, mode)\r\nFileExistsError: [Errno 17] File exists: '/tmp/tmps9_4mzc4/templates'\r\n```\r\n\r\nI'm attaching my very basic template folder.\r\n\r\nThank you \r\n\r\n[template.zip](https://github.com/simonw/datasette/files/4543751/template.zip)\r\n", "reactions": {"url": "https://api.github.com/repos/simonw/datasette/issues/744/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/simonw/datasette/issues/744/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/simonw/datasette/issues/743", "repository_url": "https://api.github.com/repos/simonw/datasette", "labels_url": "https://api.github.com/repos/simonw/datasette/issues/743/labels{/name}", "comments_url": "https://api.github.com/repos/simonw/datasette/issues/743/comments", "events_url": "https://api.github.com/repos/simonw/datasette/issues/743/events", "html_url": "https://github.com/simonw/datasette/issues/743", "id": 607770595, "node_id": "MDU6SXNzdWU2MDc3NzA1OTU=", "number": 743, "title": "escape_fts() does not correctly escape * wildcards", "user": {"login": "simonw", "id": 9599, "node_id": "MDQ6VXNlcjk1OTk=", "avatar_url": "https://avatars.githubusercontent.com/u/9599?v=4", "gravatar_id": "", "url": "https://api.github.com/users/simonw", "html_url": "https://github.com/simonw", "followers_url": "https://api.github.com/users/simonw/followers", "following_url": "https://api.github.com/users/simonw/following{/other_user}", "gists_url": "https://api.github.com/users/simonw/gists{/gist_id}", "starred_url": "https://api.github.com/users/simonw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/simonw/subscriptions", "organizations_url": "https://api.github.com/users/simonw/orgs", "repos_url": "https://api.github.com/users/simonw/repos", "events_url": "https://api.github.com/users/simonw/events{/privacy}", "received_events_url": "https://api.github.com/users/simonw/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 727708732, "node_id": "MDU6TGFiZWw3Mjc3MDg3MzI=", "url": "https://api.github.com/repos/simonw/datasette/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}, {"id": 727708739, "node_id": "MDU6TGFiZWw3Mjc3MDg3Mzk=", "url": "https://api.github.com/repos/simonw/datasette/labels/wontfix", "name": "wontfix", "color": "ffffff", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2020-04-27T18:48:53Z", "updated_at": "2020-04-27T19:11:30Z", "closed_at": "2020-04-27T19:11:01Z", "author_association": "OWNER", "active_lock_reason": null, "body": "Spotted in #732. This should not return any results... but it does:\r\n\r\nhttps://latest.datasette.io/fixtures/searchable?_search=bar%2A&_trace=1\r\n\r\n<img width=\"694\" alt=\"fixtures__searchable__1_row_where_where_search_matches__bar__\" src=\"https://user-images.githubusercontent.com/9599/80408992-f66ecc00-887c-11ea-852f-08dd9d115206.png\">\r\n\r\nThe query from trace is:\r\n```\r\n      \"sql\": \"select count(*) from searchable where rowid in (select rowid from searchable_fts where searchable_fts match escape_fts(:search))\",\r\n      \"params\": {\r\n        \"search\": \"bar*\"\r\n      }\r\n```", "reactions": {"url": "https://api.github.com/repos/simonw/datasette/issues/743/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/simonw/datasette/issues/743/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/simonw/datasette/issues/740", "repository_url": "https://api.github.com/repos/simonw/datasette", "labels_url": "https://api.github.com/repos/simonw/datasette/issues/740/labels{/name}", "comments_url": "https://api.github.com/repos/simonw/datasette/issues/740/comments", "events_url": "https://api.github.com/repos/simonw/datasette/issues/740/events", "html_url": "https://github.com/simonw/datasette/issues/740", "id": 607211058, "node_id": "MDU6SXNzdWU2MDcyMTEwNTg=", "number": 740, "title": "Don't throw 500 error on attempted directory browse", "user": {"login": "simonw", "id": 9599, "node_id": "MDQ6VXNlcjk1OTk=", "avatar_url": "https://avatars.githubusercontent.com/u/9599?v=4", "gravatar_id": "", "url": "https://api.github.com/users/simonw", "html_url": "https://github.com/simonw", "followers_url": "https://api.github.com/users/simonw/followers", "following_url": "https://api.github.com/users/simonw/following{/other_user}", "gists_url": "https://api.github.com/users/simonw/gists{/gist_id}", "starred_url": "https://api.github.com/users/simonw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/simonw/subscriptions", "organizations_url": "https://api.github.com/users/simonw/orgs", "repos_url": "https://api.github.com/users/simonw/repos", "events_url": "https://api.github.com/users/simonw/events{/privacy}", "received_events_url": "https://api.github.com/users/simonw/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 727708732, "node_id": "MDU6TGFiZWw3Mjc3MDg3MzI=", "url": "https://api.github.com/repos/simonw/datasette/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-04-27T03:50:11Z", "updated_at": "2020-04-27T18:29:15Z", "closed_at": "2020-04-27T18:29:15Z", "author_association": "OWNER", "active_lock_reason": null, "body": "<img width=\"725\" alt=\"Error_500\" src=\"https://user-images.githubusercontent.com/9599/80332338-76eee780-87ff-11ea-85b3-32704d715cd9.png\">\r\n\r\nThis should be a 403 error instead, because the `--static` mechanism doesn't allow directory browsing.", "reactions": {"url": "https://api.github.com/repos/simonw/datasette/issues/740/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/simonw/datasette/issues/740/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/simonw/datasette/issues/724", "repository_url": "https://api.github.com/repos/simonw/datasette", "labels_url": "https://api.github.com/repos/simonw/datasette/issues/724/labels{/name}", "comments_url": "https://api.github.com/repos/simonw/datasette/issues/724/comments", "events_url": "https://api.github.com/repos/simonw/datasette/issues/724/events", "html_url": "https://github.com/simonw/datasette/issues/724", "id": 598013965, "node_id": "MDU6SXNzdWU1OTgwMTM5NjU=", "number": 724, "title": "--plugin-secret over-rides existing metadata.json plugin config", "user": {"login": "simonw", "id": 9599, "node_id": "MDQ6VXNlcjk1OTk=", "avatar_url": "https://avatars.githubusercontent.com/u/9599?v=4", "gravatar_id": "", "url": "https://api.github.com/users/simonw", "html_url": "https://github.com/simonw", "followers_url": "https://api.github.com/users/simonw/followers", "following_url": "https://api.github.com/users/simonw/following{/other_user}", "gists_url": "https://api.github.com/users/simonw/gists{/gist_id}", "starred_url": "https://api.github.com/users/simonw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/simonw/subscriptions", "organizations_url": "https://api.github.com/users/simonw/orgs", "repos_url": "https://api.github.com/users/simonw/repos", "events_url": "https://api.github.com/users/simonw/events{/privacy}", "received_events_url": "https://api.github.com/users/simonw/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 727708732, "node_id": "MDU6TGFiZWw3Mjc3MDg3MzI=", "url": "https://api.github.com/repos/simonw/datasette/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}, {"id": 750250793, "node_id": "MDU6TGFiZWw3NTAyNTA3OTM=", "url": "https://api.github.com/repos/simonw/datasette/labels/datasette-publish", "name": "datasette-publish", "color": "c3bdf9", "default": false, "description": null}, {"id": 947465681, "node_id": "MDU6TGFiZWw5NDc0NjU2ODE=", "url": "https://api.github.com/repos/simonw/datasette/labels/metadata", "name": "metadata", "color": "e2c712", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2020-04-10T17:56:30Z", "updated_at": "2020-04-16T04:58:12Z", "closed_at": "2020-04-10T18:34:21Z", "author_association": "OWNER", "active_lock_reason": null, "body": "This means if you use `--plugin-secret` at all (with e.g. `publish cloudrun`) any existing plugin configuration in your `metadata.json` will be ignored.\r\n\r\nhttps://github.com/simonw/datasette/blob/af9cd4ca64652fae262e6f7b5d201f6e0adc989b/datasette/publish/cloudrun.py#L98-L109\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/simonw/datasette/issues/724/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/simonw/datasette/issues/724/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/simonw/datasette/issues/716", "repository_url": "https://api.github.com/repos/simonw/datasette", "labels_url": "https://api.github.com/repos/simonw/datasette/issues/716/labels{/name}", "comments_url": "https://api.github.com/repos/simonw/datasette/issues/716/comments", "events_url": "https://api.github.com/repos/simonw/datasette/issues/716/events", "html_url": "https://github.com/simonw/datasette/issues/716", "id": 594168758, "node_id": "MDU6SXNzdWU1OTQxNjg3NTg=", "number": 716, "title": "extra_template_vars() sending wrong view_name for index", "user": {"login": "simonw", "id": 9599, "node_id": "MDQ6VXNlcjk1OTk=", "avatar_url": "https://avatars.githubusercontent.com/u/9599?v=4", "gravatar_id": "", "url": "https://api.github.com/users/simonw", "html_url": "https://github.com/simonw", "followers_url": "https://api.github.com/users/simonw/followers", "following_url": "https://api.github.com/users/simonw/following{/other_user}", "gists_url": "https://api.github.com/users/simonw/gists{/gist_id}", "starred_url": "https://api.github.com/users/simonw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/simonw/subscriptions", "organizations_url": "https://api.github.com/users/simonw/orgs", "repos_url": "https://api.github.com/users/simonw/repos", "events_url": "https://api.github.com/users/simonw/events{/privacy}", "received_events_url": "https://api.github.com/users/simonw/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 727708732, "node_id": "MDU6TGFiZWw3Mjc3MDg3MzI=", "url": "https://api.github.com/repos/simonw/datasette/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}, {"id": 754269786, "node_id": "MDU6TGFiZWw3NTQyNjk3ODY=", "url": "https://api.github.com/repos/simonw/datasette/labels/plugins", "name": "plugins", "color": "f759cf", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 8, "created_at": "2020-04-04T23:57:09Z", "updated_at": "2020-04-05T20:04:08Z", "closed_at": "2020-04-05T18:28:48Z", "author_association": "OWNER", "active_lock_reason": null, "body": "See https://github.com/simonw/museums/issues/20#issuecomment-609103663 - at some point between 286ed286b68793532c2a38436a08343b45cfbc91 and current master (e0e7a0facfc935a835cd73c720bc46661462f0b1 today) a bug was introduced where the `extra_template_vars(request, view_name)` plugin hook started being passed `None` instead of `index` for the `view_name` parameter on the site index page.", "reactions": {"url": "https://api.github.com/repos/simonw/datasette/issues/716/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/simonw/datasette/issues/716/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/simonw/datasette/issues/705", "repository_url": "https://api.github.com/repos/simonw/datasette", "labels_url": "https://api.github.com/repos/simonw/datasette/issues/705/labels{/name}", "comments_url": "https://api.github.com/repos/simonw/datasette/issues/705/comments", "events_url": "https://api.github.com/repos/simonw/datasette/issues/705/events", "html_url": "https://github.com/simonw/datasette/issues/705", "id": 585626199, "node_id": "MDU6SXNzdWU1ODU2MjYxOTk=", "number": 705, "title": "latest.datasette.io is no longer updating", "user": {"login": "simonw", "id": 9599, "node_id": "MDQ6VXNlcjk1OTk=", "avatar_url": "https://avatars.githubusercontent.com/u/9599?v=4", "gravatar_id": "", "url": "https://api.github.com/users/simonw", "html_url": "https://github.com/simonw", "followers_url": "https://api.github.com/users/simonw/followers", "following_url": "https://api.github.com/users/simonw/following{/other_user}", "gists_url": "https://api.github.com/users/simonw/gists{/gist_id}", "starred_url": "https://api.github.com/users/simonw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/simonw/subscriptions", "organizations_url": "https://api.github.com/users/simonw/orgs", "repos_url": "https://api.github.com/users/simonw/repos", "events_url": "https://api.github.com/users/simonw/events{/privacy}", "received_events_url": "https://api.github.com/users/simonw/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 727708732, "node_id": "MDU6TGFiZWw3Mjc3MDg3MzI=", "url": "https://api.github.com/repos/simonw/datasette/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}, {"id": 993222446, "node_id": "MDU6TGFiZWw5OTMyMjI0NDY=", "url": "https://api.github.com/repos/simonw/datasette/labels/ci", "name": "ci", "color": "c5daf9", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/simonw/datasette/milestones/12", "html_url": "https://github.com/simonw/datasette/milestone/12", "labels_url": "https://api.github.com/repos/simonw/datasette/milestones/12/labels", "id": 5234079, "node_id": "MDk6TWlsZXN0b25lNTIzNDA3OQ==", "number": 12, "title": "Datasette 0.39", "description": "", "creator": {"login": "simonw", "id": 9599, "node_id": "MDQ6VXNlcjk1OTk=", "avatar_url": "https://avatars.githubusercontent.com/u/9599?v=4", "gravatar_id": "", "url": "https://api.github.com/users/simonw", "html_url": "https://github.com/simonw", "followers_url": "https://api.github.com/users/simonw/followers", "following_url": "https://api.github.com/users/simonw/following{/other_user}", "gists_url": "https://api.github.com/users/simonw/gists{/gist_id}", "starred_url": "https://api.github.com/users/simonw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/simonw/subscriptions", "organizations_url": "https://api.github.com/users/simonw/orgs", "repos_url": "https://api.github.com/users/simonw/repos", "events_url": "https://api.github.com/users/simonw/events{/privacy}", "received_events_url": "https://api.github.com/users/simonw/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 8, "state": "closed", "created_at": "2020-03-24T22:15:09Z", "updated_at": "2020-03-25T04:19:33Z", "due_on": null, "closed_at": "2020-03-25T04:07:02Z"}, "comments": 15, "created_at": "2020-03-22T01:59:30Z", "updated_at": "2020-03-25T02:30:24Z", "closed_at": "2020-03-25T02:30:24Z", "author_association": "OWNER", "active_lock_reason": null, "body": "https://latest.datasette.io/-/versions is stuck on 0.35.", "reactions": {"url": "https://api.github.com/repos/simonw/datasette/issues/705/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/simonw/datasette/issues/705/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/simonw/datasette/issues/697", "repository_url": "https://api.github.com/repos/simonw/datasette", "labels_url": "https://api.github.com/repos/simonw/datasette/issues/697/labels{/name}", "comments_url": "https://api.github.com/repos/simonw/datasette/issues/697/comments", "events_url": "https://api.github.com/repos/simonw/datasette/issues/697/events", "html_url": "https://github.com/simonw/datasette/issues/697", "id": 577578306, "node_id": "MDU6SXNzdWU1Nzc1NzgzMDY=", "number": 697, "title": "index.html is not reliably loaded from a plugin", "user": {"login": "simonw", "id": 9599, "node_id": "MDQ6VXNlcjk1OTk=", "avatar_url": "https://avatars.githubusercontent.com/u/9599?v=4", "gravatar_id": "", "url": "https://api.github.com/users/simonw", "html_url": "https://github.com/simonw", "followers_url": "https://api.github.com/users/simonw/followers", "following_url": "https://api.github.com/users/simonw/following{/other_user}", "gists_url": "https://api.github.com/users/simonw/gists{/gist_id}", "starred_url": "https://api.github.com/users/simonw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/simonw/subscriptions", "organizations_url": "https://api.github.com/users/simonw/orgs", "repos_url": "https://api.github.com/users/simonw/repos", "events_url": "https://api.github.com/users/simonw/events{/privacy}", "received_events_url": "https://api.github.com/users/simonw/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 727708732, "node_id": "MDU6TGFiZWw3Mjc3MDg3MzI=", "url": "https://api.github.com/repos/simonw/datasette/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 7, "created_at": "2020-03-08T22:37:55Z", "updated_at": "2020-03-08T23:33:28Z", "closed_at": "2020-03-08T23:11:27Z", "author_association": "OWNER", "active_lock_reason": null, "body": "Lots of detail in https://github.com/simonw/datasette-search-all/issues/2 - short version is that I have a plugin with its own `index.html` template and Datasette intermittently fails to load it and uses the default `index.html` that ships with Datasette instead.\r\n\r\nRelated:\r\n\r\n* #689: \"Templates considered\" comment broken in >=0.35\r\n* #693: Variables from extra_template_vars() not exposed in _context=1 (may as well fix this while I'm in there)", "reactions": {"url": "https://api.github.com/repos/simonw/datasette/issues/697/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/simonw/datasette/issues/697/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/simonw/datasette/issues/696", "repository_url": "https://api.github.com/repos/simonw/datasette", "labels_url": "https://api.github.com/repos/simonw/datasette/issues/696/labels{/name}", "comments_url": "https://api.github.com/repos/simonw/datasette/issues/696/comments", "events_url": "https://api.github.com/repos/simonw/datasette/issues/696/events", "html_url": "https://github.com/simonw/datasette/issues/696", "id": 576722115, "node_id": "MDU6SXNzdWU1NzY3MjIxMTU=", "number": 696, "title": "Single failing unit test when run inside the Docker image", "user": {"login": "simonw", "id": 9599, "node_id": "MDQ6VXNlcjk1OTk=", "avatar_url": "https://avatars.githubusercontent.com/u/9599?v=4", "gravatar_id": "", "url": "https://api.github.com/users/simonw", "html_url": "https://github.com/simonw", "followers_url": "https://api.github.com/users/simonw/followers", "following_url": "https://api.github.com/users/simonw/following{/other_user}", "gists_url": "https://api.github.com/users/simonw/gists{/gist_id}", "starred_url": "https://api.github.com/users/simonw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/simonw/subscriptions", "organizations_url": "https://api.github.com/users/simonw/orgs", "repos_url": "https://api.github.com/users/simonw/repos", "events_url": "https://api.github.com/users/simonw/events{/privacy}", "received_events_url": "https://api.github.com/users/simonw/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 727708732, "node_id": "MDU6TGFiZWw3Mjc3MDg3MzI=", "url": "https://api.github.com/repos/simonw/datasette/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/simonw/datasette/milestones/7", "html_url": "https://github.com/simonw/datasette/milestone/7", "labels_url": "https://api.github.com/repos/simonw/datasette/milestones/7/labels", "id": 3268330, "node_id": "MDk6TWlsZXN0b25lMzI2ODMzMA==", "number": 7, "title": "Datasette 1.0", "description": "https://github.com/simonw/datasette/issues/519 - stable JSON API, documented template context, plugin API guarantee that plugins will not break until a 2.0 release.", "creator": {"login": "simonw", "id": 9599, "node_id": "MDQ6VXNlcjk1OTk=", "avatar_url": "https://avatars.githubusercontent.com/u/9599?v=4", "gravatar_id": "", "url": "https://api.github.com/users/simonw", "html_url": "https://github.com/simonw", "followers_url": "https://api.github.com/users/simonw/followers", "following_url": "https://api.github.com/users/simonw/following{/other_user}", "gists_url": "https://api.github.com/users/simonw/gists{/gist_id}", "starred_url": "https://api.github.com/users/simonw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/simonw/subscriptions", "organizations_url": "https://api.github.com/users/simonw/orgs", "repos_url": "https://api.github.com/users/simonw/repos", "events_url": "https://api.github.com/users/simonw/events{/privacy}", "received_events_url": "https://api.github.com/users/simonw/received_events", "type": "User", "site_admin": false}, "open_issues": 52, "closed_issues": 58, "state": "open", "created_at": "2018-04-15T21:11:18Z", "updated_at": "2023-03-31T17:56:10Z", "due_on": null, "closed_at": null}, "comments": 2, "created_at": "2020-03-06T06:16:36Z", "updated_at": "2021-03-29T17:04:19Z", "closed_at": "2021-03-07T07:41:18Z", "author_association": "OWNER", "active_lock_reason": null, "body": "```\r\ndocker run -it -v `pwd`:/mnt datasetteproject/datasette:latest /bin/bash\r\nroot@0e1928cfdf79:/# cd /mnt\r\nroot@0e1928cfdf79:/mnt# pip install -e .[test]\r\nroot@0e1928cfdf79:/mnt# pytest\r\n```\r\nI get one failure!\r\n\r\nIt was for `test_searchable[/fixtures/searchable.json?_search=te*+AND+do*&_searchmode=raw-expected_rows3]`\r\n```\r\n    def test_searchable(app_client, path, expected_rows):\r\n        response = app_client.get(path)\r\n>       assert expected_rows == response.json[\"rows\"]\r\nE       AssertionError: assert [[1, 'barry c...sel', 'puma']] == []\r\nE         Left contains 2 more items, first extra item: [1, 'barry cat', 'terry dog', 'panther']\r\nE         Full diff:\r\nE         + []\r\nE         - [[1, 'barry cat', 'terry dog', 'panther'],\r\nE         -  [2, 'terry dog', 'sara weasel', 'puma']]\r\n```\r\n\r\n_Originally posted by @simonw in https://github.com/simonw/datasette/issues/695#issuecomment-595614469_", "reactions": {"url": "https://api.github.com/repos/simonw/datasette/issues/696/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/simonw/datasette/issues/696/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/simonw/datasette/issues/694", "repository_url": "https://api.github.com/repos/simonw/datasette", "labels_url": "https://api.github.com/repos/simonw/datasette/issues/694/labels{/name}", "comments_url": "https://api.github.com/repos/simonw/datasette/issues/694/comments", "events_url": "https://api.github.com/repos/simonw/datasette/issues/694/events", "html_url": "https://github.com/simonw/datasette/issues/694", "id": 576582604, "node_id": "MDU6SXNzdWU1NzY1ODI2MDQ=", "number": 694, "title": "datasette publish cloudrun --memory option", "user": {"login": "simonw", "id": 9599, "node_id": "MDQ6VXNlcjk1OTk=", "avatar_url": "https://avatars.githubusercontent.com/u/9599?v=4", "gravatar_id": "", "url": "https://api.github.com/users/simonw", "html_url": "https://github.com/simonw", "followers_url": "https://api.github.com/users/simonw/followers", "following_url": "https://api.github.com/users/simonw/following{/other_user}", "gists_url": "https://api.github.com/users/simonw/gists{/gist_id}", "starred_url": "https://api.github.com/users/simonw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/simonw/subscriptions", "organizations_url": "https://api.github.com/users/simonw/orgs", "repos_url": "https://api.github.com/users/simonw/repos", "events_url": "https://api.github.com/users/simonw/events{/privacy}", "received_events_url": "https://api.github.com/users/simonw/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 727708732, "node_id": "MDU6TGFiZWw3Mjc3MDg3MzI=", "url": "https://api.github.com/repos/simonw/datasette/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}, {"id": 750250793, "node_id": "MDU6TGFiZWw3NTAyNTA3OTM=", "url": "https://api.github.com/repos/simonw/datasette/labels/datasette-publish", "name": "datasette-publish", "color": "c3bdf9", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 8, "created_at": "2020-03-05T22:59:57Z", "updated_at": "2020-06-23T17:10:51Z", "closed_at": "2020-03-05T23:49:41Z", "author_association": "OWNER", "active_lock_reason": null, "body": "Got this error deploying large (603MB) database with Cloud Run\r\n```\r\nX Deploying... Cloud Run error: Container failed to start. Failed to start and then listen on the port defined by the PORT environment variable. Logs for this revi\r\nsion might contain more information.                                                                                                                               \r\n  X Creating Revision... Cloud Run error: Container failed to start. Failed to start and then listen on the port defined by the PORT environment variable. Logs for\r\n   this revision might contain more information.                                                                                                                   \r\n  . Routing traffic...                                                                                                                                             \r\n  \u2713 Setting IAM Policy...                                                                                                                                          \r\nDeployment failed                                                                                                                                                  \r\nERROR: (gcloud.run.deploy) Cloud Run error: Container failed to start. Failed to start and then listen on the port defined by the PORT environment variable. Logs for this revision might contain more information.\r\n```", "reactions": {"url": "https://api.github.com/repos/simonw/datasette/issues/694/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/simonw/datasette/issues/694/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/simonw/datasette/issues/693", "repository_url": "https://api.github.com/repos/simonw/datasette", "labels_url": "https://api.github.com/repos/simonw/datasette/issues/693/labels{/name}", "comments_url": "https://api.github.com/repos/simonw/datasette/issues/693/comments", "events_url": "https://api.github.com/repos/simonw/datasette/issues/693/events", "html_url": "https://github.com/simonw/datasette/issues/693", "id": 574043218, "node_id": "MDU6SXNzdWU1NzQwNDMyMTg=", "number": 693, "title": "Variables from extra_template_vars() not exposed in _context=1", "user": {"login": "simonw", "id": 9599, "node_id": "MDQ6VXNlcjk1OTk=", "avatar_url": "https://avatars.githubusercontent.com/u/9599?v=4", "gravatar_id": "", "url": "https://api.github.com/users/simonw", "html_url": "https://github.com/simonw", "followers_url": "https://api.github.com/users/simonw/followers", "following_url": "https://api.github.com/users/simonw/following{/other_user}", "gists_url": "https://api.github.com/users/simonw/gists{/gist_id}", "starred_url": "https://api.github.com/users/simonw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/simonw/subscriptions", "organizations_url": "https://api.github.com/users/simonw/orgs", "repos_url": "https://api.github.com/users/simonw/repos", "events_url": "https://api.github.com/users/simonw/events{/privacy}", "received_events_url": "https://api.github.com/users/simonw/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 727708732, "node_id": "MDU6TGFiZWw3Mjc3MDg3MzI=", "url": "https://api.github.com/repos/simonw/datasette/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}, {"id": 754269786, "node_id": "MDU6TGFiZWw3NTQyNjk3ODY=", "url": "https://api.github.com/repos/simonw/datasette/labels/plugins", "name": "plugins", "color": "f759cf", "default": false, "description": null}, {"id": 967420289, "node_id": "MDU6TGFiZWw5Njc0MjAyODk=", "url": "https://api.github.com/repos/simonw/datasette/labels/minor", "name": "minor", "color": "fcd0c4", "default": false, "description": "Minor bugs (not high priority)"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2020-03-02T15:14:51Z", "updated_at": "2020-04-05T19:12:48Z", "closed_at": "2020-04-05T19:12:48Z", "author_association": "OWNER", "active_lock_reason": null, "body": "The `_context=1` debugging mode does not show variables that should have been added to the context by the `extra_template_vars()` plugin hook.", "reactions": {"url": "https://api.github.com/repos/simonw/datasette/issues/693/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/simonw/datasette/issues/693/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/simonw/datasette/issues/689", "repository_url": "https://api.github.com/repos/simonw/datasette", "labels_url": "https://api.github.com/repos/simonw/datasette/issues/689/labels{/name}", "comments_url": "https://api.github.com/repos/simonw/datasette/issues/689/comments", "events_url": "https://api.github.com/repos/simonw/datasette/issues/689/events", "html_url": "https://github.com/simonw/datasette/issues/689", "id": 573583971, "node_id": "MDU6SXNzdWU1NzM1ODM5NzE=", "number": 689, "title": "\"Templates considered\" comment broken in >=0.35", "user": {"login": "chrishas35", "id": 35075, "node_id": "MDQ6VXNlcjM1MDc1", "avatar_url": "https://avatars.githubusercontent.com/u/35075?v=4", "gravatar_id": "", "url": "https://api.github.com/users/chrishas35", "html_url": "https://github.com/chrishas35", "followers_url": "https://api.github.com/users/chrishas35/followers", "following_url": "https://api.github.com/users/chrishas35/following{/other_user}", "gists_url": "https://api.github.com/users/chrishas35/gists{/gist_id}", "starred_url": "https://api.github.com/users/chrishas35/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/chrishas35/subscriptions", "organizations_url": "https://api.github.com/users/chrishas35/orgs", "repos_url": "https://api.github.com/users/chrishas35/repos", "events_url": "https://api.github.com/users/chrishas35/events{/privacy}", "received_events_url": "https://api.github.com/users/chrishas35/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 727708732, "node_id": "MDU6TGFiZWw3Mjc3MDg3MzI=", "url": "https://api.github.com/repos/simonw/datasette/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2020-03-01T17:31:21Z", "updated_at": "2020-04-05T19:39:44Z", "closed_at": "2020-04-05T19:39:44Z", "author_association": "NONE", "active_lock_reason": null, "body": "Noticed that the \"Templates Considered\" comment is missing in 0.37.  Believe I traced it back to #664 as you can see it in https://v0-34.datasette.io/ but not https://v0-35.datasette.io/.  Looking at the template context debug between the two you can see what is missing from 0.35 vs. 0.34:\r\n\r\n```diff\r\n<     \"datasette_version\": \"0.34\",\r\n<     \"app_css_hash\": \"ffa51a\",\r\n<     \"select_templates\": [\r\n<         \"*index.html\"\r\n<     ],\r\n<     \"zip\": \"<class 'zip'>\",\r\n<     \"body_scripts\": [],\r\n<     \"extra_css_urls\": \"<generator object BaseView._asset_urls at 0x7f6529ac05f0>\",\r\n<     \"extra_js_urls\": \"<generator object BaseView._asset_urls at 0x7f6529ac0660>\",\r\n<     \"format_bytes\": \"<function format_bytes at 0x7f652a1588b0>\",\r\n<     \"database_url\": \"<bound method BaseView.database_url of <datasette.views.index.IndexView object at 0x7f6529b03e50>>\",\r\n<     \"database_color\": \"<bound method BaseView.database_color of <datasette.views.index.IndexView object at 0x7f6529b03e50>>\"\r\n---\r\n>     \"datasette_version\": \"0.35\",\r\n>     \"database_url\": \"<bound method BaseView.database_url of <datasette.views.index.IndexView object at 0x7f6140dacd90>>\",\r\n>     \"database_color\": \"<bound method BaseView.database_color of <datasette.views.index.IndexView object at 0x7f6140dacd90>>\"\r\n```", "reactions": {"url": "https://api.github.com/repos/simonw/datasette/issues/689/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/simonw/datasette/issues/689/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/simonw/datasette/issues/655", "repository_url": "https://api.github.com/repos/simonw/datasette", "labels_url": "https://api.github.com/repos/simonw/datasette/issues/655/labels{/name}", "comments_url": "https://api.github.com/repos/simonw/datasette/issues/655/comments", "events_url": "https://api.github.com/repos/simonw/datasette/issues/655/events", "html_url": "https://github.com/simonw/datasette/issues/655", "id": 542553350, "node_id": "MDU6SXNzdWU1NDI1NTMzNTA=", "number": 655, "title": "Copy and paste doesn't work reliably on iPhone for SQL editor", "user": {"login": "simonw", "id": 9599, "node_id": "MDQ6VXNlcjk1OTk=", "avatar_url": "https://avatars.githubusercontent.com/u/9599?v=4", "gravatar_id": "", "url": "https://api.github.com/users/simonw", "html_url": "https://github.com/simonw", "followers_url": "https://api.github.com/users/simonw/followers", "following_url": "https://api.github.com/users/simonw/following{/other_user}", "gists_url": "https://api.github.com/users/simonw/gists{/gist_id}", "starred_url": "https://api.github.com/users/simonw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/simonw/subscriptions", "organizations_url": "https://api.github.com/users/simonw/orgs", "repos_url": "https://api.github.com/users/simonw/repos", "events_url": "https://api.github.com/users/simonw/events{/privacy}", "received_events_url": "https://api.github.com/users/simonw/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 727708732, "node_id": "MDU6TGFiZWw3Mjc3MDg3MzI=", "url": "https://api.github.com/repos/simonw/datasette/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}, {"id": 2389410569, "node_id": "MDU6TGFiZWwyMzg5NDEwNTY5", "url": "https://api.github.com/repos/simonw/datasette/labels/javascript", "name": "javascript", "color": "4c5bbf", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/simonw/datasette/milestones/7", "html_url": "https://github.com/simonw/datasette/milestone/7", "labels_url": "https://api.github.com/repos/simonw/datasette/milestones/7/labels", "id": 3268330, "node_id": "MDk6TWlsZXN0b25lMzI2ODMzMA==", "number": 7, "title": "Datasette 1.0", "description": "https://github.com/simonw/datasette/issues/519 - stable JSON API, documented template context, plugin API guarantee that plugins will not break until a 2.0 release.", "creator": {"login": "simonw", "id": 9599, "node_id": "MDQ6VXNlcjk1OTk=", "avatar_url": "https://avatars.githubusercontent.com/u/9599?v=4", "gravatar_id": "", "url": "https://api.github.com/users/simonw", "html_url": "https://github.com/simonw", "followers_url": "https://api.github.com/users/simonw/followers", "following_url": "https://api.github.com/users/simonw/following{/other_user}", "gists_url": "https://api.github.com/users/simonw/gists{/gist_id}", "starred_url": "https://api.github.com/users/simonw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/simonw/subscriptions", "organizations_url": "https://api.github.com/users/simonw/orgs", "repos_url": "https://api.github.com/users/simonw/repos", "events_url": "https://api.github.com/users/simonw/events{/privacy}", "received_events_url": "https://api.github.com/users/simonw/received_events", "type": "User", "site_admin": false}, "open_issues": 52, "closed_issues": 58, "state": "open", "created_at": "2018-04-15T21:11:18Z", "updated_at": "2023-03-31T17:56:10Z", "due_on": null, "closed_at": null}, "comments": 3, "created_at": "2019-12-26T13:15:10Z", "updated_at": "2020-09-30T20:36:12Z", "closed_at": "2020-08-30T17:51:40Z", "author_association": "OWNER", "active_lock_reason": null, "body": "I'm having a lot of trouble copying and pasting from the codemirror editor on my iPhone.", "reactions": {"url": "https://api.github.com/repos/simonw/datasette/issues/655/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/simonw/datasette/issues/655/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/simonw/datasette/issues/636", "repository_url": "https://api.github.com/repos/simonw/datasette", "labels_url": "https://api.github.com/repos/simonw/datasette/issues/636/labels{/name}", "comments_url": "https://api.github.com/repos/simonw/datasette/issues/636/comments", "events_url": "https://api.github.com/repos/simonw/datasette/issues/636/events", "html_url": "https://github.com/simonw/datasette/issues/636", "id": 525254973, "node_id": "MDU6SXNzdWU1MjUyNTQ5NzM=", "number": 636, "title": "rowid is not included in dropdown filter menus", "user": {"login": "simonw", "id": 9599, "node_id": "MDQ6VXNlcjk1OTk=", "avatar_url": "https://avatars.githubusercontent.com/u/9599?v=4", "gravatar_id": "", "url": "https://api.github.com/users/simonw", "html_url": "https://github.com/simonw", "followers_url": "https://api.github.com/users/simonw/followers", "following_url": "https://api.github.com/users/simonw/following{/other_user}", "gists_url": "https://api.github.com/users/simonw/gists{/gist_id}", "starred_url": "https://api.github.com/users/simonw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/simonw/subscriptions", "organizations_url": "https://api.github.com/users/simonw/orgs", "repos_url": "https://api.github.com/users/simonw/repos", "events_url": "https://api.github.com/users/simonw/events{/privacy}", "received_events_url": "https://api.github.com/users/simonw/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 727708732, "node_id": "MDU6TGFiZWw3Mjc3MDg3MzI=", "url": "https://api.github.com/repos/simonw/datasette/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}, {"id": 729585263, "node_id": "MDU6TGFiZWw3Mjk1ODUyNjM=", "url": "https://api.github.com/repos/simonw/datasette/labels/small", "name": "small", "color": "a7f9b7", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2019-11-19T20:43:04Z", "updated_at": "2019-11-19T23:01:17Z", "closed_at": "2019-11-19T23:01:17Z", "author_association": "OWNER", "active_lock_reason": null, "body": "For `rowid` tables the `rowid` column isn't shown in the list of filter options:\r\n\r\n<img width=\"652\" alt=\"md__md__53_805_rows_where_where_rowid___1060124_sorted_by_rowid_descending\" src=\"https://user-images.githubusercontent.com/9599/69184590-00202680-0aca-11ea-8522-3a4690924b83.png\">\r\n\r\nThis also means if you link to e.g. `?rowid__gt=1060124` the resulting filter interface will be slightly broken: clicking the \"apply\" button again will lose your filter for example.", "reactions": {"url": "https://api.github.com/repos/simonw/datasette/issues/636/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/simonw/datasette/issues/636/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/simonw/datasette/issues/633", "repository_url": "https://api.github.com/repos/simonw/datasette", "labels_url": "https://api.github.com/repos/simonw/datasette/issues/633/labels{/name}", "comments_url": "https://api.github.com/repos/simonw/datasette/issues/633/comments", "events_url": "https://api.github.com/repos/simonw/datasette/issues/633/events", "html_url": "https://github.com/simonw/datasette/issues/633", "id": 522334771, "node_id": "MDU6SXNzdWU1MjIzMzQ3NzE=", "number": 633, "title": "Publish to Heroku is broken: \"WARNING:  You must pass the application as an import string to enable 'reload' or 'workers\"", "user": {"login": "simonw", "id": 9599, "node_id": "MDQ6VXNlcjk1OTk=", "avatar_url": "https://avatars.githubusercontent.com/u/9599?v=4", "gravatar_id": "", "url": "https://api.github.com/users/simonw", "html_url": "https://github.com/simonw", "followers_url": "https://api.github.com/users/simonw/followers", "following_url": "https://api.github.com/users/simonw/following{/other_user}", "gists_url": "https://api.github.com/users/simonw/gists{/gist_id}", "starred_url": "https://api.github.com/users/simonw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/simonw/subscriptions", "organizations_url": "https://api.github.com/users/simonw/orgs", "repos_url": "https://api.github.com/users/simonw/repos", "events_url": "https://api.github.com/users/simonw/events{/privacy}", "received_events_url": "https://api.github.com/users/simonw/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 727708732, "node_id": "MDU6TGFiZWw3Mjc3MDg3MzI=", "url": "https://api.github.com/repos/simonw/datasette/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}, {"id": 750250793, "node_id": "MDU6TGFiZWw3NTAyNTA3OTM=", "url": "https://api.github.com/repos/simonw/datasette/labels/datasette-publish", "name": "datasette-publish", "color": "c3bdf9", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2019-11-13T16:32:11Z", "updated_at": "2020-04-28T20:37:50Z", "closed_at": "2019-11-13T16:43:23Z", "author_association": "OWNER", "active_lock_reason": null, "body": "```\r\n2019-11-13T16:27:59.821483+00:00 heroku[web.1]: Starting process with command `datasette serve --host 0.0.0.0 -i fixtures.db --cors --port 36817 --inspect-file inspect-data.json`\r\n2019-11-13T16:28:01.856471+00:00 heroku[web.1]: State changed from starting to crashed\r\n2019-11-13T16:28:01.750253+00:00 app[web.1]: Serve! files=() (immutables=('fixtures.db',)) on port 36817\r\n2019-11-13T16:28:01.771524+00:00 app[web.1]: WARNING:  You must pass the application as an import string to enable 'reload' or 'workers'.\r\n2019-11-13T16:28:01.837839+00:00 heroku[web.1]: Process exited with status 1\r\n```", "reactions": {"url": "https://api.github.com/repos/simonw/datasette/issues/633/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/simonw/datasette/issues/633/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/simonw/datasette/issues/626", "repository_url": "https://api.github.com/repos/simonw/datasette", "labels_url": "https://api.github.com/repos/simonw/datasette/issues/626/labels{/name}", "comments_url": "https://api.github.com/repos/simonw/datasette/issues/626/comments", "events_url": "https://api.github.com/repos/simonw/datasette/issues/626/events", "html_url": "https://github.com/simonw/datasette/issues/626", "id": 521282013, "node_id": "MDU6SXNzdWU1MjEyODIwMTM=", "number": 626, "title": "Unit tests should fail under Python 3.8", "user": {"login": "simonw", "id": 9599, "node_id": "MDQ6VXNlcjk1OTk=", "avatar_url": "https://avatars.githubusercontent.com/u/9599?v=4", "gravatar_id": "", "url": "https://api.github.com/users/simonw", "html_url": "https://github.com/simonw", "followers_url": "https://api.github.com/users/simonw/followers", "following_url": "https://api.github.com/users/simonw/following{/other_user}", "gists_url": "https://api.github.com/users/simonw/gists{/gist_id}", "starred_url": "https://api.github.com/users/simonw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/simonw/subscriptions", "organizations_url": "https://api.github.com/users/simonw/orgs", "repos_url": "https://api.github.com/users/simonw/repos", "events_url": "https://api.github.com/users/simonw/events{/privacy}", "received_events_url": "https://api.github.com/users/simonw/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 727708732, "node_id": "MDU6TGFiZWw3Mjc3MDg3MzI=", "url": "https://api.github.com/repos/simonw/datasette/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}, {"id": 727708739, "node_id": "MDU6TGFiZWw3Mjc3MDg3Mzk=", "url": "https://api.github.com/repos/simonw/datasette/labels/wontfix", "name": "wontfix", "color": "ffffff", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2019-11-12T01:54:11Z", "updated_at": "2019-11-12T04:31:26Z", "closed_at": "2019-11-12T04:31:13Z", "author_association": "OWNER", "active_lock_reason": null, "body": "The unit tests currently pass under Python 3.8.\r\n\r\nBut... when you actually attempt to run Datasette you get an error:\r\n```\r\n~/Dropbox/Development/datasette $ venv-py3.8.0/bin/datasette --memory -p 8855\r\nServe! files=() (immutables=()) on port 8855\r\nTraceback (most recent call last):\r\n  File \"venv-py3.8.0/bin/datasette\", line 11, in <module>\r\n    load_entry_point('datasette', 'console_scripts', 'datasette')()\r\n  File \"/Users/simonw/Dropbox/Development/datasette/venv-py3.8.0/lib/python3.8/site-packages/click/core.py\", line 764, in __call__\r\n    return self.main(*args, **kwargs)\r\n  File \"/Users/simonw/Dropbox/Development/datasette/venv-py3.8.0/lib/python3.8/site-packages/click/core.py\", line 717, in main\r\n    rv = self.invoke(ctx)\r\n  File \"/Users/simonw/Dropbox/Development/datasette/venv-py3.8.0/lib/python3.8/site-packages/click/core.py\", line 1137, in invoke\r\n    return _process_result(sub_ctx.command.invoke(sub_ctx))\r\n  File \"/Users/simonw/Dropbox/Development/datasette/venv-py3.8.0/lib/python3.8/site-packages/click/core.py\", line 956, in invoke\r\n    return ctx.invoke(self.callback, **ctx.params)\r\n  File \"/Users/simonw/Dropbox/Development/datasette/venv-py3.8.0/lib/python3.8/site-packages/click/core.py\", line 555, in invoke\r\n    return callback(*args, **kwargs)\r\n  File \"/Users/simonw/Dropbox/Development/datasette/datasette/cli.py\", line 365, in serve\r\n    uvicorn.run(ds.app(), host=host, port=port, log_level=\"info\")\r\n  File \"/Users/simonw/Dropbox/Development/datasette/venv-py3.8.0/lib/python3.8/site-packages/uvicorn/main.py\", line 279, in run\r\n    server.run()\r\n  File \"/Users/simonw/Dropbox/Development/datasette/venv-py3.8.0/lib/python3.8/site-packages/uvicorn/main.py\", line 305, in run\r\n    self.config.setup_event_loop()\r\n  File \"/Users/simonw/Dropbox/Development/datasette/venv-py3.8.0/lib/python3.8/site-packages/uvicorn/config.py\", line 218, in setup_event_loop\r\n    loop_setup()\r\n  File \"/Users/simonw/Dropbox/Development/datasette/venv-py3.8.0/lib/python3.8/site-packages/uvicorn/loops/auto.py\", line 3, in auto_loop_setup\r\n    import uvloop\r\n  File \"/Users/simonw/Dropbox/Development/datasette/venv-py3.8.0/lib/python3.8/site-packages/uvloop/__init__.py\", line 7, in <module>\r\n    from .loop import Loop as __BaseLoop  # NOQA\r\n  File \"uvloop/includes/stdlib.pxi\", line 114, in init uvloop.loop\r\nAttributeError: module 'sys' has no attribute 'set_coroutine_wrapper'\r\n~/Dropbox/Development/datasette $ \r\n```\r\nIf Datasette doesn't work under Python 3.8 the tests should fail.", "reactions": {"url": "https://api.github.com/repos/simonw/datasette/issues/626/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/simonw/datasette/issues/626/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/simonw/datasette/issues/625", "repository_url": "https://api.github.com/repos/simonw/datasette", "labels_url": "https://api.github.com/repos/simonw/datasette/issues/625/labels{/name}", "comments_url": "https://api.github.com/repos/simonw/datasette/issues/625/comments", "events_url": "https://api.github.com/repos/simonw/datasette/issues/625/events", "html_url": "https://github.com/simonw/datasette/issues/625", "id": 520740741, "node_id": "MDU6SXNzdWU1MjA3NDA3NDE=", "number": 625, "title": "If you apply ?_facet_array=tags then &_facet=tags does nothing", "user": {"login": "simonw", "id": 9599, "node_id": "MDQ6VXNlcjk1OTk=", "avatar_url": "https://avatars.githubusercontent.com/u/9599?v=4", "gravatar_id": "", "url": "https://api.github.com/users/simonw", "html_url": "https://github.com/simonw", "followers_url": "https://api.github.com/users/simonw/followers", "following_url": "https://api.github.com/users/simonw/following{/other_user}", "gists_url": "https://api.github.com/users/simonw/gists{/gist_id}", "starred_url": "https://api.github.com/users/simonw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/simonw/subscriptions", "organizations_url": "https://api.github.com/users/simonw/orgs", "repos_url": "https://api.github.com/users/simonw/repos", "events_url": "https://api.github.com/users/simonw/events{/privacy}", "received_events_url": "https://api.github.com/users/simonw/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 727708732, "node_id": "MDU6TGFiZWw3Mjc3MDg3MzI=", "url": "https://api.github.com/repos/simonw/datasette/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}, {"id": 967420289, "node_id": "MDU6TGFiZWw5Njc0MjAyODk=", "url": "https://api.github.com/repos/simonw/datasette/labels/minor", "name": "minor", "color": "fcd0c4", "default": false, "description": "Minor bugs (not high priority)"}, {"id": 1382668283, "node_id": "MDU6TGFiZWwxMzgyNjY4Mjgz", "url": "https://api.github.com/repos/simonw/datasette/labels/faceting", "name": "faceting", "color": "71dd93", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/simonw/datasette/milestones/23", "html_url": "https://github.com/simonw/datasette/milestone/23", "labels_url": "https://api.github.com/repos/simonw/datasette/milestones/23/labels", "id": 7571612, "node_id": "MI_kwDOBm6k_c4Ac4ic", "number": 23, "title": "Datasette 0.60", "description": "", "creator": {"login": "simonw", "id": 9599, "node_id": "MDQ6VXNlcjk1OTk=", "avatar_url": "https://avatars.githubusercontent.com/u/9599?v=4", "gravatar_id": "", "url": "https://api.github.com/users/simonw", "html_url": "https://github.com/simonw", "followers_url": "https://api.github.com/users/simonw/followers", "following_url": "https://api.github.com/users/simonw/following{/other_user}", "gists_url": "https://api.github.com/users/simonw/gists{/gist_id}", "starred_url": "https://api.github.com/users/simonw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/simonw/subscriptions", "organizations_url": "https://api.github.com/users/simonw/orgs", "repos_url": "https://api.github.com/users/simonw/repos", "events_url": "https://api.github.com/users/simonw/events{/privacy}", "received_events_url": "https://api.github.com/users/simonw/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 24, "state": "closed", "created_at": "2022-01-13T22:20:51Z", "updated_at": "2022-01-14T01:59:55Z", "due_on": null, "closed_at": "2022-01-14T01:44:41Z"}, "comments": 13, "created_at": "2019-11-11T04:59:29Z", "updated_at": "2022-01-13T22:26:58Z", "closed_at": "2021-12-16T20:12:22Z", "author_association": "OWNER", "active_lock_reason": null, "body": "Start here: https://v0-30-2.datasette.io/fixtures/facetable?_facet_array=tags\r\n\r\n<img width=\"969\" alt=\"fixtures__facetable__15_rows\" src=\"https://user-images.githubusercontent.com/9599/68562011-c0d44480-03fc-11ea-8354-def0ba35d365.png\">\r\n\r\nNote that `tags` is offered as a suggested facet. But if you click that you get this:\r\n\r\nhttps://v0-30-2.datasette.io/fixtures/facetable?_facet_array=tags&_facet=tags\r\n\r\nThe `_facet=tags` is added to the URL and it's removed from the list of suggested tags... but the facet itself is not displayed:\r\n\r\n<img width=\"950\" alt=\"fixtures__facetable__15_rows\" src=\"https://user-images.githubusercontent.com/9599/68562039-df3a4000-03fc-11ea-9778-81f7a931d608.png\">\r\n\r\nThe `_facet=tags` facet should look like this:\r\n\r\n<img width=\"946\" alt=\"fixtures__facetable__15_rows\" src=\"https://user-images.githubusercontent.com/9599/68562067-f8db8780-03fc-11ea-8211-26281b7df9f9.png\">\r\n", "reactions": {"url": "https://api.github.com/repos/simonw/datasette/issues/625/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/simonw/datasette/issues/625/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/simonw/datasette/issues/619", "repository_url": "https://api.github.com/repos/simonw/datasette", "labels_url": "https://api.github.com/repos/simonw/datasette/issues/619/labels{/name}", "comments_url": "https://api.github.com/repos/simonw/datasette/issues/619/comments", "events_url": "https://api.github.com/repos/simonw/datasette/issues/619/events", "html_url": "https://github.com/simonw/datasette/issues/619", "id": 520655983, "node_id": "MDU6SXNzdWU1MjA2NTU5ODM=", "number": 619, "title": "\"Invalid SQL\" page should let you edit the SQL", "user": {"login": "simonw", "id": 9599, "node_id": "MDQ6VXNlcjk1OTk=", "avatar_url": "https://avatars.githubusercontent.com/u/9599?v=4", "gravatar_id": "", "url": "https://api.github.com/users/simonw", "html_url": "https://github.com/simonw", "followers_url": "https://api.github.com/users/simonw/followers", "following_url": "https://api.github.com/users/simonw/following{/other_user}", "gists_url": "https://api.github.com/users/simonw/gists{/gist_id}", "starred_url": "https://api.github.com/users/simonw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/simonw/subscriptions", "organizations_url": "https://api.github.com/users/simonw/orgs", "repos_url": "https://api.github.com/users/simonw/repos", "events_url": "https://api.github.com/users/simonw/events{/privacy}", "received_events_url": "https://api.github.com/users/simonw/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 727708732, "node_id": "MDU6TGFiZWw3Mjc3MDg3MzI=", "url": "https://api.github.com/repos/simonw/datasette/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}, {"id": 727708734, "node_id": "MDU6TGFiZWw3Mjc3MDg3MzQ=", "url": "https://api.github.com/repos/simonw/datasette/labels/enhancement", "name": "enhancement", "color": "84b6eb", "default": true, "description": null}, {"id": 729585263, "node_id": "MDU6TGFiZWw3Mjk1ODUyNjM=", "url": "https://api.github.com/repos/simonw/datasette/labels/small", "name": "small", "color": "a7f9b7", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 14, "created_at": "2019-11-10T20:54:12Z", "updated_at": "2022-01-13T22:21:42Z", "closed_at": "2021-06-02T04:15:54Z", "author_association": "OWNER", "active_lock_reason": null, "body": "https://latest.datasette.io/fixtures?sql=select%0D%0A++*%0D%0Afrom%0D%0A++%5Bfoo%5D\r\n\r\n<img src=\"https://user-images.githubusercontent.com/9599/68550604-1ab31b00-03b9-11ea-8a33-5dc339b8c5f5.jpeg\" width=\"500\">\r\n\r\nWould be useful if this page showed you the invalid SQL you entered so you can edit it and try again.", "reactions": {"url": "https://api.github.com/repos/simonw/datasette/issues/619/reactions", "total_count": 2, "+1": 2, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/simonw/datasette/issues/619/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/simonw/datasette/issues/616", "repository_url": "https://api.github.com/repos/simonw/datasette", "labels_url": "https://api.github.com/repos/simonw/datasette/issues/616/labels{/name}", "comments_url": "https://api.github.com/repos/simonw/datasette/issues/616/comments", "events_url": "https://api.github.com/repos/simonw/datasette/issues/616/events", "html_url": "https://github.com/simonw/datasette/issues/616", "id": 518506242, "node_id": "MDU6SXNzdWU1MTg1MDYyNDI=", "number": 616, "title": "Datasette FTS detection bug", "user": {"login": "null92", "id": 49656826, "node_id": "MDQ6VXNlcjQ5NjU2ODI2", "avatar_url": "https://avatars.githubusercontent.com/u/49656826?v=4", "gravatar_id": "", "url": "https://api.github.com/users/null92", "html_url": "https://github.com/null92", "followers_url": "https://api.github.com/users/null92/followers", "following_url": "https://api.github.com/users/null92/following{/other_user}", "gists_url": "https://api.github.com/users/null92/gists{/gist_id}", "starred_url": "https://api.github.com/users/null92/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/null92/subscriptions", "organizations_url": "https://api.github.com/users/null92/orgs", "repos_url": "https://api.github.com/users/null92/repos", "events_url": "https://api.github.com/users/null92/events{/privacy}", "received_events_url": "https://api.github.com/users/null92/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 727708732, "node_id": "MDU6TGFiZWw3Mjc3MDg3MzI=", "url": "https://api.github.com/repos/simonw/datasette/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}, {"id": 727708737, "node_id": "MDU6TGFiZWw3Mjc3MDg3Mzc=", "url": "https://api.github.com/repos/simonw/datasette/labels/invalid", "name": "invalid", "color": "e6e6e6", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2019-11-06T14:25:47Z", "updated_at": "2019-11-08T15:31:33Z", "closed_at": "2019-11-08T02:06:56Z", "author_association": "NONE", "active_lock_reason": null, "body": "I'm having a trouble with datasette. I deployed EXACTLY the same project on two different apps on Heroku. Both have databases (not all) with FTS activated but only one detects and works fine. You can take a look here:\r\nWith search: http://teste-templates.herokuapp.com/amazonia_protege/car\r\nWithout search: http://bases.vortex.media/amazonia_protege/car\r\n![teste](https://user-images.githubusercontent.com/49656826/68306310-11a80e00-0088-11ea-8d1c-db3bd3375518.jpg)\r\n", "reactions": {"url": "https://api.github.com/repos/simonw/datasette/issues/616/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/simonw/datasette/issues/616/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/simonw/datasette/issues/612", "repository_url": "https://api.github.com/repos/simonw/datasette", "labels_url": "https://api.github.com/repos/simonw/datasette/issues/612/labels{/name}", "comments_url": "https://api.github.com/repos/simonw/datasette/issues/612/comments", "events_url": "https://api.github.com/repos/simonw/datasette/issues/612/events", "html_url": "https://github.com/simonw/datasette/issues/612", "id": 516748849, "node_id": "MDU6SXNzdWU1MTY3NDg4NDk=", "number": 612, "title": "CSV export is broken for tables with null foreign keys", "user": {"login": "simonw", "id": 9599, "node_id": "MDQ6VXNlcjk1OTk=", "avatar_url": "https://avatars.githubusercontent.com/u/9599?v=4", "gravatar_id": "", "url": "https://api.github.com/users/simonw", "html_url": "https://github.com/simonw", "followers_url": "https://api.github.com/users/simonw/followers", "following_url": "https://api.github.com/users/simonw/following{/other_user}", "gists_url": "https://api.github.com/users/simonw/gists{/gist_id}", "starred_url": "https://api.github.com/users/simonw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/simonw/subscriptions", "organizations_url": "https://api.github.com/users/simonw/orgs", "repos_url": "https://api.github.com/users/simonw/repos", "events_url": "https://api.github.com/users/simonw/events{/privacy}", "received_events_url": "https://api.github.com/users/simonw/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 727708732, "node_id": "MDU6TGFiZWw3Mjc3MDg3MzI=", "url": "https://api.github.com/repos/simonw/datasette/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}, {"id": 3095460476, "node_id": "MDU6TGFiZWwzMDk1NDYwNDc2", "url": "https://api.github.com/repos/simonw/datasette/labels/csv", "name": "csv", "color": "4F1FEC", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2019-11-02T22:52:47Z", "updated_at": "2021-06-17T18:13:20Z", "closed_at": "2019-11-02T23:12:53Z", "author_association": "OWNER", "active_lock_reason": null, "body": "Following on from #406 - this CSV export appears to be broken:\r\n\r\nhttps://14da705.datasette.io/fixtures/foreign_key_references.csv?_labels=on&_size=max\r\n```csv\r\npk,foreign_key_with_label,foreign_key_with_label_label,foreign_key_with_no_label,foreign_key_with_no_label_label\r\n1,1,hello,1,1\r\n2,,\r\n```\r\nThat second row should have 5 values, but it only has 4.", "reactions": {"url": "https://api.github.com/repos/simonw/datasette/issues/612/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/simonw/datasette/issues/612/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/simonw/datasette/issues/611", "repository_url": "https://api.github.com/repos/simonw/datasette", "labels_url": "https://api.github.com/repos/simonw/datasette/issues/611/labels{/name}", "comments_url": "https://api.github.com/repos/simonw/datasette/issues/611/comments", "events_url": "https://api.github.com/repos/simonw/datasette/issues/611/events", "html_url": "https://github.com/simonw/datasette/issues/611", "id": 516370822, "node_id": "MDU6SXNzdWU1MTYzNzA4MjI=", "number": 611, "title": "Static assets no longer loading for installed plugins", "user": {"login": "simonw", "id": 9599, "node_id": "MDQ6VXNlcjk1OTk=", "avatar_url": "https://avatars.githubusercontent.com/u/9599?v=4", "gravatar_id": "", "url": "https://api.github.com/users/simonw", "html_url": "https://github.com/simonw", "followers_url": "https://api.github.com/users/simonw/followers", "following_url": "https://api.github.com/users/simonw/following{/other_user}", "gists_url": "https://api.github.com/users/simonw/gists{/gist_id}", "starred_url": "https://api.github.com/users/simonw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/simonw/subscriptions", "organizations_url": "https://api.github.com/users/simonw/orgs", "repos_url": "https://api.github.com/users/simonw/repos", "events_url": "https://api.github.com/users/simonw/events{/privacy}", "received_events_url": "https://api.github.com/users/simonw/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 727708732, "node_id": "MDU6TGFiZWw3Mjc3MDg3MzI=", "url": "https://api.github.com/repos/simonw/datasette/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2019-11-01T22:07:00Z", "updated_at": "2019-11-01T22:15:55Z", "closed_at": "2019-11-01T22:15:55Z", "author_association": "OWNER", "active_lock_reason": null, "body": "Caused by fix I made in #606\r\n\r\ne.g. `/-/static-plugins/datasette_leaflet_geojson/datasette-leaflet-geojson.js` is a 404, but view-`/-/static-plugins/datasette-leaflet-geojson/datasette-leaflet-geojson.js` works correctly.", "reactions": {"url": "https://api.github.com/repos/simonw/datasette/issues/611/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/simonw/datasette/issues/611/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/simonw/datasette/issues/610", "repository_url": "https://api.github.com/repos/simonw/datasette", "labels_url": "https://api.github.com/repos/simonw/datasette/issues/610/labels{/name}", "comments_url": "https://api.github.com/repos/simonw/datasette/issues/610/comments", "events_url": "https://api.github.com/repos/simonw/datasette/issues/610/events", "html_url": "https://github.com/simonw/datasette/issues/610", "id": 516310670, "node_id": "MDU6SXNzdWU1MTYzMTA2NzA=", "number": 610, "title": "Don't suggest array facet if column is only [] empty arrays", "user": {"login": "simonw", "id": 9599, "node_id": "MDQ6VXNlcjk1OTk=", "avatar_url": "https://avatars.githubusercontent.com/u/9599?v=4", "gravatar_id": "", "url": "https://api.github.com/users/simonw", "html_url": "https://github.com/simonw", "followers_url": "https://api.github.com/users/simonw/followers", "following_url": "https://api.github.com/users/simonw/following{/other_user}", "gists_url": "https://api.github.com/users/simonw/gists{/gist_id}", "starred_url": "https://api.github.com/users/simonw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/simonw/subscriptions", "organizations_url": "https://api.github.com/users/simonw/orgs", "repos_url": "https://api.github.com/users/simonw/repos", "events_url": "https://api.github.com/users/simonw/events{/privacy}", "received_events_url": "https://api.github.com/users/simonw/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 727708732, "node_id": "MDU6TGFiZWw3Mjc3MDg3MzI=", "url": "https://api.github.com/repos/simonw/datasette/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}, {"id": 729585263, "node_id": "MDU6TGFiZWw3Mjk1ODUyNjM=", "url": "https://api.github.com/repos/simonw/datasette/labels/small", "name": "small", "color": "a7f9b7", "default": false, "description": null}, {"id": 1382668283, "node_id": "MDU6TGFiZWwxMzgyNjY4Mjgz", "url": "https://api.github.com/repos/simonw/datasette/labels/faceting", "name": "faceting", "color": "71dd93", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2019-11-01T19:42:02Z", "updated_at": "2019-11-01T21:46:08Z", "closed_at": "2019-11-01T21:46:08Z", "author_association": "OWNER", "active_lock_reason": null, "body": "Follow on from #562", "reactions": {"url": "https://api.github.com/repos/simonw/datasette/issues/610/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/simonw/datasette/issues/610/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/simonw/datasette/issues/606", "repository_url": "https://api.github.com/repos/simonw/datasette", "labels_url": "https://api.github.com/repos/simonw/datasette/issues/606/labels{/name}", "comments_url": "https://api.github.com/repos/simonw/datasette/issues/606/comments", "events_url": "https://api.github.com/repos/simonw/datasette/issues/606/events", "html_url": "https://github.com/simonw/datasette/issues/606", "id": 512218858, "node_id": "MDU6SXNzdWU1MTIyMTg4NTg=", "number": 606, "title": "/-/plugins shows incorrect name for plugins", "user": {"login": "simonw", "id": 9599, "node_id": "MDQ6VXNlcjk1OTk=", "avatar_url": "https://avatars.githubusercontent.com/u/9599?v=4", "gravatar_id": "", "url": "https://api.github.com/users/simonw", "html_url": "https://github.com/simonw", "followers_url": "https://api.github.com/users/simonw/followers", "following_url": "https://api.github.com/users/simonw/following{/other_user}", "gists_url": "https://api.github.com/users/simonw/gists{/gist_id}", "starred_url": "https://api.github.com/users/simonw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/simonw/subscriptions", "organizations_url": "https://api.github.com/users/simonw/orgs", "repos_url": "https://api.github.com/users/simonw/repos", "events_url": "https://api.github.com/users/simonw/events{/privacy}", "received_events_url": "https://api.github.com/users/simonw/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 727708732, "node_id": "MDU6TGFiZWw3Mjc3MDg3MzI=", "url": "https://api.github.com/repos/simonw/datasette/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}, {"id": 754269786, "node_id": "MDU6TGFiZWw3NTQyNjk3ODY=", "url": "https://api.github.com/repos/simonw/datasette/labels/plugins", "name": "plugins", "color": "f759cf", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2019-10-24T22:53:25Z", "updated_at": "2019-11-01T05:41:04Z", "closed_at": "2019-11-01T05:40:07Z", "author_association": "OWNER", "active_lock_reason": null, "body": "https://fivethirtyeight.datasettes.com/-/plugins\r\n\r\n```json\r\n[\r\n    {\r\n        \"name\": \"datasette_jellyfish\",\r\n        \"static\": false,\r\n        \"templates\": false,\r\n        \"version\": \"0.3\"\r\n    },\r\n    {\r\n        \"name\": \"datasette_vega\",\r\n        \"static\": true,\r\n        \"templates\": false,\r\n        \"version\": \"0.6.2\"\r\n    }\r\n]\r\n```\r\n\r\nThese should be shown as `datasette-jellyfish` and `datasette-vega` since those are the names on PyPI.", "reactions": {"url": "https://api.github.com/repos/simonw/datasette/issues/606/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/simonw/datasette/issues/606/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/simonw/datasette/issues/604", "repository_url": "https://api.github.com/repos/simonw/datasette", "labels_url": "https://api.github.com/repos/simonw/datasette/issues/604/labels{/name}", "comments_url": "https://api.github.com/repos/simonw/datasette/issues/604/comments", "events_url": "https://api.github.com/repos/simonw/datasette/issues/604/events", "html_url": "https://github.com/simonw/datasette/issues/604", "id": 509693773, "node_id": "MDU6SXNzdWU1MDk2OTM3NzM=", "number": 604, "title": "_where= parameter is not persisted in hidden form fields", "user": {"login": "simonw", "id": 9599, "node_id": "MDQ6VXNlcjk1OTk=", "avatar_url": "https://avatars.githubusercontent.com/u/9599?v=4", "gravatar_id": "", "url": "https://api.github.com/users/simonw", "html_url": "https://github.com/simonw", "followers_url": "https://api.github.com/users/simonw/followers", "following_url": "https://api.github.com/users/simonw/following{/other_user}", "gists_url": "https://api.github.com/users/simonw/gists{/gist_id}", "starred_url": "https://api.github.com/users/simonw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/simonw/subscriptions", "organizations_url": "https://api.github.com/users/simonw/orgs", "repos_url": "https://api.github.com/users/simonw/repos", "events_url": "https://api.github.com/users/simonw/events{/privacy}", "received_events_url": "https://api.github.com/users/simonw/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 727708732, "node_id": "MDU6TGFiZWw3Mjc3MDg3MzI=", "url": "https://api.github.com/repos/simonw/datasette/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2019-10-21T02:14:10Z", "updated_at": "2019-10-30T19:12:38Z", "closed_at": "2019-10-30T18:49:44Z", "author_association": "OWNER", "active_lock_reason": null, "body": "e.g. on this page: https://v0-30.datasette.io/fixtures/roadside_attractions?_where=name%20like%20%27%museum%%27\r\n\r\nClick the \"Apply\" button and the `_where=` parameter will be dropped.", "reactions": {"url": "https://api.github.com/repos/simonw/datasette/issues/604/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/simonw/datasette/issues/604/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/simonw/datasette/issues/597", "repository_url": "https://api.github.com/repos/simonw/datasette", "labels_url": "https://api.github.com/repos/simonw/datasette/issues/597/labels{/name}", "comments_url": "https://api.github.com/repos/simonw/datasette/issues/597/comments", "events_url": "https://api.github.com/repos/simonw/datasette/issues/597/events", "html_url": "https://github.com/simonw/datasette/issues/597", "id": 508070977, "node_id": "MDU6SXNzdWU1MDgwNzA5Nzc=", "number": 597, "title": "If you have databases called foo.db and foo-bar.db you cannot visit /foo-bar", "user": {"login": "simonw", "id": 9599, "node_id": "MDQ6VXNlcjk1OTk=", "avatar_url": "https://avatars.githubusercontent.com/u/9599?v=4", "gravatar_id": "", "url": "https://api.github.com/users/simonw", "html_url": "https://github.com/simonw", "followers_url": "https://api.github.com/users/simonw/followers", "following_url": "https://api.github.com/users/simonw/following{/other_user}", "gists_url": "https://api.github.com/users/simonw/gists{/gist_id}", "starred_url": "https://api.github.com/users/simonw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/simonw/subscriptions", "organizations_url": "https://api.github.com/users/simonw/orgs", "repos_url": "https://api.github.com/users/simonw/repos", "events_url": "https://api.github.com/users/simonw/events{/privacy}", "received_events_url": "https://api.github.com/users/simonw/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 727708732, "node_id": "MDU6TGFiZWw3Mjc3MDg3MzI=", "url": "https://api.github.com/repos/simonw/datasette/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2019-10-16T20:07:41Z", "updated_at": "2019-10-18T22:51:08Z", "closed_at": "2019-10-18T22:51:08Z", "author_association": "OWNER", "active_lock_reason": null, "body": "Weird bug I just came across.\r\n\r\nIt appears that if you have one database called `foo.db` and another called `foo-bar.db` any attempts to visit `/foo-bar` will redirect to `/foo`.", "reactions": {"url": "https://api.github.com/repos/simonw/datasette/issues/597/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/simonw/datasette/issues/597/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/simonw/datasette/issues/586", "repository_url": "https://api.github.com/repos/simonw/datasette", "labels_url": "https://api.github.com/repos/simonw/datasette/issues/586/labels{/name}", "comments_url": "https://api.github.com/repos/simonw/datasette/issues/586/comments", "events_url": "https://api.github.com/repos/simonw/datasette/issues/586/events", "html_url": "https://github.com/simonw/datasette/issues/586", "id": 503218205, "node_id": "MDU6SXNzdWU1MDMyMTgyMDU=", "number": 586, "title": "Enable browser caching for plugin statics with datasette-auth", "user": {"login": "simonw", "id": 9599, "node_id": "MDQ6VXNlcjk1OTk=", "avatar_url": "https://avatars.githubusercontent.com/u/9599?v=4", "gravatar_id": "", "url": "https://api.github.com/users/simonw", "html_url": "https://github.com/simonw", "followers_url": "https://api.github.com/users/simonw/followers", "following_url": "https://api.github.com/users/simonw/following{/other_user}", "gists_url": "https://api.github.com/users/simonw/gists{/gist_id}", "starred_url": "https://api.github.com/users/simonw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/simonw/subscriptions", "organizations_url": "https://api.github.com/users/simonw/orgs", "repos_url": "https://api.github.com/users/simonw/repos", "events_url": "https://api.github.com/users/simonw/events{/privacy}", "received_events_url": "https://api.github.com/users/simonw/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 727708732, "node_id": "MDU6TGFiZWw3Mjc3MDg3MzI=", "url": "https://api.github.com/repos/simonw/datasette/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2019-10-07T03:47:14Z", "updated_at": "2019-10-07T15:46:04Z", "closed_at": "2019-10-07T15:46:03Z", "author_association": "OWNER", "active_lock_reason": null, "body": "An authenticated Datasette I run is seeing delays on every page load. On looking at the network inspector it turns out it's because datasette-vega is nearly 1MB and a `cache-control: private` is preventing it from being cached!\r\n\r\n<img width=\"1071\" alt=\"github__repos__32_rows_where_where_private___1\" src=\"https://user-images.githubusercontent.com/9599/66284064-f96f8400-e87a-11e9-875f-5a6c4a8c4f41.png\">\r\n\r\n\r\nThis may well turn out to be a bug in `datasette-auth-github` but it's still worth tracking here because caching of static assets from plugins is very important.\r\n", "reactions": {"url": "https://api.github.com/repos/simonw/datasette/issues/586/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/simonw/datasette/issues/586/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/simonw/datasette/issues/584", "repository_url": "https://api.github.com/repos/simonw/datasette", "labels_url": "https://api.github.com/repos/simonw/datasette/issues/584/labels{/name}", "comments_url": "https://api.github.com/repos/simonw/datasette/issues/584/comments", "events_url": "https://api.github.com/repos/simonw/datasette/issues/584/events", "html_url": "https://github.com/simonw/datasette/issues/584", "id": 503190241, "node_id": "MDU6SXNzdWU1MDMxOTAyNDE=", "number": 584, "title": "Codec error in some CSV exports", "user": {"login": "simonw", "id": 9599, "node_id": "MDQ6VXNlcjk1OTk=", "avatar_url": "https://avatars.githubusercontent.com/u/9599?v=4", "gravatar_id": "", "url": "https://api.github.com/users/simonw", "html_url": "https://github.com/simonw", "followers_url": "https://api.github.com/users/simonw/followers", "following_url": "https://api.github.com/users/simonw/following{/other_user}", "gists_url": "https://api.github.com/users/simonw/gists{/gist_id}", "starred_url": "https://api.github.com/users/simonw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/simonw/subscriptions", "organizations_url": "https://api.github.com/users/simonw/orgs", "repos_url": "https://api.github.com/users/simonw/repos", "events_url": "https://api.github.com/users/simonw/events{/privacy}", "received_events_url": "https://api.github.com/users/simonw/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 727708732, "node_id": "MDU6TGFiZWw3Mjc3MDg3MzI=", "url": "https://api.github.com/repos/simonw/datasette/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}, {"id": 967420289, "node_id": "MDU6TGFiZWw5Njc0MjAyODk=", "url": "https://api.github.com/repos/simonw/datasette/labels/minor", "name": "minor", "color": "fcd0c4", "default": false, "description": "Minor bugs (not high priority)"}, {"id": 3095460476, "node_id": "MDU6TGFiZWwzMDk1NDYwNDc2", "url": "https://api.github.com/repos/simonw/datasette/labels/csv", "name": "csv", "color": "4F1FEC", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2019-10-07T01:15:34Z", "updated_at": "2021-06-17T18:13:20Z", "closed_at": "2019-10-18T05:23:16Z", "author_association": "OWNER", "active_lock_reason": null, "body": "Got this exploring my Swarm checkins:\r\n\r\n![448DBFC4-71F8-4846-83C0-BEA511B2157A](https://user-images.githubusercontent.com/9599/66279259-3af53480-e865-11e9-9651-04fd2d895392.jpeg)\r\n\r\n`/swarm/stickers.csv?stickerType=messageOnly&_size=max`", "reactions": {"url": "https://api.github.com/repos/simonw/datasette/issues/584/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/simonw/datasette/issues/584/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/simonw/datasette/issues/562", "repository_url": "https://api.github.com/repos/simonw/datasette", "labels_url": "https://api.github.com/repos/simonw/datasette/issues/562/labels{/name}", "comments_url": "https://api.github.com/repos/simonw/datasette/issues/562/comments", "events_url": "https://api.github.com/repos/simonw/datasette/issues/562/events", "html_url": "https://github.com/simonw/datasette/issues/562", "id": 470542938, "node_id": "MDU6SXNzdWU0NzA1NDI5Mzg=", "number": 562, "title": "Facet by array shouldn't suggest for arrays that are not arrays-of-strings", "user": {"login": "simonw", "id": 9599, "node_id": "MDQ6VXNlcjk1OTk=", "avatar_url": "https://avatars.githubusercontent.com/u/9599?v=4", "gravatar_id": "", "url": "https://api.github.com/users/simonw", "html_url": "https://github.com/simonw", "followers_url": "https://api.github.com/users/simonw/followers", "following_url": "https://api.github.com/users/simonw/following{/other_user}", "gists_url": "https://api.github.com/users/simonw/gists{/gist_id}", "starred_url": "https://api.github.com/users/simonw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/simonw/subscriptions", "organizations_url": "https://api.github.com/users/simonw/orgs", "repos_url": "https://api.github.com/users/simonw/repos", "events_url": "https://api.github.com/users/simonw/events{/privacy}", "received_events_url": "https://api.github.com/users/simonw/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 727708732, "node_id": "MDU6TGFiZWw3Mjc3MDg3MzI=", "url": "https://api.github.com/repos/simonw/datasette/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}, {"id": 729585263, "node_id": "MDU6TGFiZWw3Mjk1ODUyNjM=", "url": "https://api.github.com/repos/simonw/datasette/labels/small", "name": "small", "color": "a7f9b7", "default": false, "description": null}, {"id": 1382668283, "node_id": "MDU6TGFiZWwxMzgyNjY4Mjgz", "url": "https://api.github.com/repos/simonw/datasette/labels/faceting", "name": "faceting", "color": "71dd93", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2019-07-19T20:51:29Z", "updated_at": "2019-11-01T19:42:10Z", "closed_at": "2019-11-01T19:37:55Z", "author_association": "OWNER", "active_lock_reason": null, "body": "It's triggering for arrays that look like this at the moment:\r\n```json\r\n[\r\n    {\r\n        \"type\": \"HKWorkoutEventTypeSegment\",\r\n        \"date\": \"2019-05-21 09:43:50 -0700\",\r\n        \"duration\": \"12.2780519704024\",\r\n        \"durationUnit\": \"min\"\r\n    },\r\n    {\r\n        \"type\": \"HKWorkoutEventTypeSegment\",\r\n        \"date\": \"2019-05-21 09:43:50 -0700\",\r\n        \"duration\": \"19.467273102204\",\r\n        \"durationUnit\": \"min\"\r\n    }\r\n]\r\n```", "reactions": {"url": "https://api.github.com/repos/simonw/datasette/issues/562/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/simonw/datasette/issues/562/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/simonw/datasette/issues/560", "repository_url": "https://api.github.com/repos/simonw/datasette", "labels_url": "https://api.github.com/repos/simonw/datasette/issues/560/labels{/name}", "comments_url": "https://api.github.com/repos/simonw/datasette/issues/560/comments", "events_url": "https://api.github.com/repos/simonw/datasette/issues/560/events", "html_url": "https://github.com/simonw/datasette/issues/560", "id": 467790646, "node_id": "MDU6SXNzdWU0Njc3OTA2NDY=", "number": 560, "title": "CodeMirror fails to load on database page", "user": {"login": "simonw", "id": 9599, "node_id": "MDQ6VXNlcjk1OTk=", "avatar_url": "https://avatars.githubusercontent.com/u/9599?v=4", "gravatar_id": "", "url": "https://api.github.com/users/simonw", "html_url": "https://github.com/simonw", "followers_url": "https://api.github.com/users/simonw/followers", "following_url": "https://api.github.com/users/simonw/following{/other_user}", "gists_url": "https://api.github.com/users/simonw/gists{/gist_id}", "starred_url": "https://api.github.com/users/simonw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/simonw/subscriptions", "organizations_url": "https://api.github.com/users/simonw/orgs", "repos_url": "https://api.github.com/users/simonw/repos", "events_url": "https://api.github.com/users/simonw/events{/privacy}", "received_events_url": "https://api.github.com/users/simonw/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 727708732, "node_id": "MDU6TGFiZWw3Mjc3MDg3MzI=", "url": "https://api.github.com/repos/simonw/datasette/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2019-07-14T03:31:00Z", "updated_at": "2019-09-03T01:03:02Z", "closed_at": "2019-07-14T03:38:59Z", "author_association": "OWNER", "active_lock_reason": null, "body": "It's not loading on https://latest.datasette.io/fixtures\r\n\r\nBut it does load on https://latest.datasette.io/fixtures?sql=select+*+from+facetable", "reactions": {"url": "https://api.github.com/repos/simonw/datasette/issues/560/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/simonw/datasette/issues/560/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/simonw/datasette/issues/558", "repository_url": "https://api.github.com/repos/simonw/datasette", "labels_url": "https://api.github.com/repos/simonw/datasette/issues/558/labels{/name}", "comments_url": "https://api.github.com/repos/simonw/datasette/issues/558/comments", "events_url": "https://api.github.com/repos/simonw/datasette/issues/558/events", "html_url": "https://github.com/simonw/datasette/issues/558", "id": 467218270, "node_id": "MDU6SXNzdWU0NjcyMTgyNzA=", "number": 558, "title": "Support unicode in url", "user": {"login": "0x1997", "id": 380586, "node_id": "MDQ6VXNlcjM4MDU4Ng==", "avatar_url": "https://avatars.githubusercontent.com/u/380586?v=4", "gravatar_id": "", "url": "https://api.github.com/users/0x1997", "html_url": "https://github.com/0x1997", "followers_url": "https://api.github.com/users/0x1997/followers", "following_url": "https://api.github.com/users/0x1997/following{/other_user}", "gists_url": "https://api.github.com/users/0x1997/gists{/gist_id}", "starred_url": "https://api.github.com/users/0x1997/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/0x1997/subscriptions", "organizations_url": "https://api.github.com/users/0x1997/orgs", "repos_url": "https://api.github.com/users/0x1997/repos", "events_url": "https://api.github.com/users/0x1997/events{/privacy}", "received_events_url": "https://api.github.com/users/0x1997/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 727708732, "node_id": "MDU6TGFiZWw3Mjc3MDg3MzI=", "url": "https://api.github.com/repos/simonw/datasette/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2019-07-12T04:43:24Z", "updated_at": "2019-07-15T01:29:30Z", "closed_at": "2019-07-14T02:49:33Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi, I defined some custom queries in my `metadata.json`. There are Chinese characters in the names of the queries. So the urls are like `http://127.0.0.1:8001/mydb/\u6d4b\u8bd5\u67e5\u8be2`.\r\nWhen opening such urls, datasette will throw an exception.\r\n```\r\nTraceback (most recent call last):\r\n  File \"/home/zhe/miniconda3/lib/python3.7/site-packages/datasette/utils/asgi.py\", line 100, in __call__\r\n    return await view(new_scope, receive, send)\r\n  File \"/home/zhe/miniconda3/lib/python3.7/site-packages/datasette/utils/asgi.py\", line 172, in view\r\n    request, **scope[\"url_route\"][\"kwargs\"]\r\n  File \"/home/zhe/miniconda3/lib/python3.7/site-packages/datasette/views/base.py\", line 267, in get\r\n    request, database, hash, correct_hash_provided, **kwargs\r\n  File \"/home/zhe/miniconda3/lib/python3.7/site-packages/datasette/views/base.py\", line 471, in view_get\r\n    for key in self.ds.renderers.keys()\r\n  File \"/home/zhe/miniconda3/lib/python3.7/site-packages/datasette/views/base.py\", line 471, in <dictcomp>\r\n    for key in self.ds.renderers.keys()\r\n  File \"/home/zhe/miniconda3/lib/python3.7/site-packages/datasette/utils/__init__.py\", line 655, in path_with_format\r\n    path = request.path\r\n  File \"/home/zhe/miniconda3/lib/python3.7/site-packages/datasette/utils/asgi.py\", line 49, in path\r\n    self.scope.get(\"raw_path\", self.scope[\"path\"].encode(\"latin-1\"))\r\nUnicodeEncodeError: 'latin-1' codec can't encode characters in position 9-11: ordinal not in range(256)\r\n```\r\nThis used to work when datasette was based on sanic.\r\n\r\nBtw, thanks for the great work!", "reactions": {"url": "https://api.github.com/repos/simonw/datasette/issues/558/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/simonw/datasette/issues/558/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/simonw/datasette/issues/545", "repository_url": "https://api.github.com/repos/simonw/datasette", "labels_url": "https://api.github.com/repos/simonw/datasette/issues/545/labels{/name}", "comments_url": "https://api.github.com/repos/simonw/datasette/issues/545/comments", "events_url": "https://api.github.com/repos/simonw/datasette/issues/545/events", "html_url": "https://github.com/simonw/datasette/issues/545", "id": 464905894, "node_id": "MDU6SXNzdWU0NjQ5MDU4OTQ=", "number": 545, "title": "Fix header on 404 page", "user": {"login": "simonw", "id": 9599, "node_id": "MDQ6VXNlcjk1OTk=", "avatar_url": "https://avatars.githubusercontent.com/u/9599?v=4", "gravatar_id": "", "url": "https://api.github.com/users/simonw", "html_url": "https://github.com/simonw", "followers_url": "https://api.github.com/users/simonw/followers", "following_url": "https://api.github.com/users/simonw/following{/other_user}", "gists_url": "https://api.github.com/users/simonw/gists{/gist_id}", "starred_url": "https://api.github.com/users/simonw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/simonw/subscriptions", "organizations_url": "https://api.github.com/users/simonw/orgs", "repos_url": "https://api.github.com/users/simonw/repos", "events_url": "https://api.github.com/users/simonw/events{/privacy}", "received_events_url": "https://api.github.com/users/simonw/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 727708732, "node_id": "MDU6TGFiZWw3Mjc3MDg3MzI=", "url": "https://api.github.com/repos/simonw/datasette/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}, {"id": 729585263, "node_id": "MDU6TGFiZWw3Mjk1ODUyNjM=", "url": "https://api.github.com/repos/simonw/datasette/labels/small", "name": "small", "color": "a7f9b7", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/simonw/datasette/milestones/11", "html_url": "https://github.com/simonw/datasette/milestone/11", "labels_url": "https://api.github.com/repos/simonw/datasette/milestones/11/labels", "id": 4471010, "node_id": "MDk6TWlsZXN0b25lNDQ3MTAxMA==", "number": 11, "title": "Datasette 0.29", "description": "Big new features in this release are ASGI support, new plugin hooks for ASGI and extra template variables (to support release of [datasette-auth-github](https://github.com/simonw/datasette-auth-github)), plus facet-by-date.", "creator": {"login": "simonw", "id": 9599, "node_id": "MDQ6VXNlcjk1OTk=", "avatar_url": "https://avatars.githubusercontent.com/u/9599?v=4", "gravatar_id": "", "url": "https://api.github.com/users/simonw", "html_url": "https://github.com/simonw", "followers_url": "https://api.github.com/users/simonw/followers", "following_url": "https://api.github.com/users/simonw/following{/other_user}", "gists_url": "https://api.github.com/users/simonw/gists{/gist_id}", "starred_url": "https://api.github.com/users/simonw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/simonw/subscriptions", "organizations_url": "https://api.github.com/users/simonw/orgs", "repos_url": "https://api.github.com/users/simonw/repos", "events_url": "https://api.github.com/users/simonw/events{/privacy}", "received_events_url": "https://api.github.com/users/simonw/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 11, "state": "closed", "created_at": "2019-07-07T19:59:16Z", "updated_at": "2019-07-08T03:36:57Z", "due_on": "2019-07-07T07:00:00Z", "closed_at": "2019-07-08T03:36:57Z"}, "comments": 1, "created_at": "2019-07-07T01:47:40Z", "updated_at": "2019-07-07T20:26:55Z", "closed_at": "2019-07-07T20:26:55Z", "author_association": "OWNER", "active_lock_reason": null, "body": "<img width=\"707\" alt=\"Error_404\" src=\"https://user-images.githubusercontent.com/9599/60762932-83127a00-a01e-11e9-853a-6ea6aa5e8f6d.png\">\r\n", "reactions": {"url": "https://api.github.com/repos/simonw/datasette/issues/545/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/simonw/datasette/issues/545/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/simonw/datasette/issues/503", "repository_url": "https://api.github.com/repos/simonw/datasette", "labels_url": "https://api.github.com/repos/simonw/datasette/issues/503/labels{/name}", "comments_url": "https://api.github.com/repos/simonw/datasette/issues/503/comments", "events_url": "https://api.github.com/repos/simonw/datasette/issues/503/events", "html_url": "https://github.com/simonw/datasette/issues/503", "id": 453243459, "node_id": "MDU6SXNzdWU0NTMyNDM0NTk=", "number": 503, "title": "Handle SQLite databases with spaces in their names?", "user": {"login": "chrismp", "id": 7936571, "node_id": "MDQ6VXNlcjc5MzY1NzE=", "avatar_url": "https://avatars.githubusercontent.com/u/7936571?v=4", "gravatar_id": "", "url": "https://api.github.com/users/chrismp", "html_url": "https://github.com/chrismp", "followers_url": "https://api.github.com/users/chrismp/followers", "following_url": "https://api.github.com/users/chrismp/following{/other_user}", "gists_url": "https://api.github.com/users/chrismp/gists{/gist_id}", "starred_url": "https://api.github.com/users/chrismp/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/chrismp/subscriptions", "organizations_url": "https://api.github.com/users/chrismp/orgs", "repos_url": "https://api.github.com/users/chrismp/repos", "events_url": "https://api.github.com/users/chrismp/events{/privacy}", "received_events_url": "https://api.github.com/users/chrismp/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 727708732, "node_id": "MDU6TGFiZWw3Mjc3MDg3MzI=", "url": "https://api.github.com/repos/simonw/datasette/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}, {"id": 729585263, "node_id": "MDU6TGFiZWw3Mjk1ODUyNjM=", "url": "https://api.github.com/repos/simonw/datasette/labels/small", "name": "small", "color": "a7f9b7", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "simonw", "id": 9599, "node_id": "MDQ6VXNlcjk1OTk=", "avatar_url": "https://avatars.githubusercontent.com/u/9599?v=4", "gravatar_id": "", "url": "https://api.github.com/users/simonw", "html_url": "https://github.com/simonw", "followers_url": "https://api.github.com/users/simonw/followers", "following_url": "https://api.github.com/users/simonw/following{/other_user}", "gists_url": "https://api.github.com/users/simonw/gists{/gist_id}", "starred_url": "https://api.github.com/users/simonw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/simonw/subscriptions", "organizations_url": "https://api.github.com/users/simonw/orgs", "repos_url": "https://api.github.com/users/simonw/repos", "events_url": "https://api.github.com/users/simonw/events{/privacy}", "received_events_url": "https://api.github.com/users/simonw/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "simonw", "id": 9599, "node_id": "MDQ6VXNlcjk1OTk=", "avatar_url": "https://avatars.githubusercontent.com/u/9599?v=4", "gravatar_id": "", "url": "https://api.github.com/users/simonw", "html_url": "https://github.com/simonw", "followers_url": "https://api.github.com/users/simonw/followers", "following_url": "https://api.github.com/users/simonw/following{/other_user}", "gists_url": "https://api.github.com/users/simonw/gists{/gist_id}", "starred_url": "https://api.github.com/users/simonw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/simonw/subscriptions", "organizations_url": "https://api.github.com/users/simonw/orgs", "repos_url": "https://api.github.com/users/simonw/repos", "events_url": "https://api.github.com/users/simonw/events{/privacy}", "received_events_url": "https://api.github.com/users/simonw/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 1, "created_at": "2019-06-06T21:20:59Z", "updated_at": "2019-11-04T23:16:30Z", "closed_at": "2019-11-04T23:16:30Z", "author_association": "NONE", "active_lock_reason": null, "body": "I named my SQLite database \"Government workers\" and published it to Heroku. When I clicked the \"Government workers\" database online it lead to a 404 page: `Database not found: Government%20workers`.\r\n\r\nI believe this is because the database name has a space.", "reactions": {"url": "https://api.github.com/repos/simonw/datasette/issues/503/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/simonw/datasette/issues/503/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/simonw/datasette/issues/494", "repository_url": "https://api.github.com/repos/simonw/datasette", "labels_url": "https://api.github.com/repos/simonw/datasette/issues/494/labels{/name}", "comments_url": "https://api.github.com/repos/simonw/datasette/issues/494/comments", "events_url": "https://api.github.com/repos/simonw/datasette/issues/494/events", "html_url": "https://github.com/simonw/datasette/issues/494", "id": 449931899, "node_id": "MDU6SXNzdWU0NDk5MzE4OTk=", "number": 494, "title": "--reload should only trigger for -i databases", "user": {"login": "simonw", "id": 9599, "node_id": "MDQ6VXNlcjk1OTk=", "avatar_url": "https://avatars.githubusercontent.com/u/9599?v=4", "gravatar_id": "", "url": "https://api.github.com/users/simonw", "html_url": "https://github.com/simonw", "followers_url": "https://api.github.com/users/simonw/followers", "following_url": "https://api.github.com/users/simonw/following{/other_user}", "gists_url": "https://api.github.com/users/simonw/gists{/gist_id}", "starred_url": "https://api.github.com/users/simonw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/simonw/subscriptions", "organizations_url": "https://api.github.com/users/simonw/orgs", "repos_url": "https://api.github.com/users/simonw/repos", "events_url": "https://api.github.com/users/simonw/events{/privacy}", "received_events_url": "https://api.github.com/users/simonw/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 727708732, "node_id": "MDU6TGFiZWw3Mjc3MDg3MzI=", "url": "https://api.github.com/repos/simonw/datasette/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}, {"id": 729585263, "node_id": "MDU6TGFiZWw3Mjk1ODUyNjM=", "url": "https://api.github.com/repos/simonw/datasette/labels/small", "name": "small", "color": "a7f9b7", "default": false, "description": null}, {"id": 967420289, "node_id": "MDU6TGFiZWw5Njc0MjAyODk=", "url": "https://api.github.com/repos/simonw/datasette/labels/minor", "name": "minor", "color": "fcd0c4", "default": false, "description": "Minor bugs (not high priority)"}], "state": "closed", "locked": false, "assignee": {"login": "simonw", "id": 9599, "node_id": "MDQ6VXNlcjk1OTk=", "avatar_url": "https://avatars.githubusercontent.com/u/9599?v=4", "gravatar_id": "", "url": "https://api.github.com/users/simonw", "html_url": "https://github.com/simonw", "followers_url": "https://api.github.com/users/simonw/followers", "following_url": "https://api.github.com/users/simonw/following{/other_user}", "gists_url": "https://api.github.com/users/simonw/gists{/gist_id}", "starred_url": "https://api.github.com/users/simonw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/simonw/subscriptions", "organizations_url": "https://api.github.com/users/simonw/orgs", "repos_url": "https://api.github.com/users/simonw/repos", "events_url": "https://api.github.com/users/simonw/events{/privacy}", "received_events_url": "https://api.github.com/users/simonw/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "simonw", "id": 9599, "node_id": "MDQ6VXNlcjk1OTk=", "avatar_url": "https://avatars.githubusercontent.com/u/9599?v=4", "gravatar_id": "", "url": "https://api.github.com/users/simonw", "html_url": "https://github.com/simonw", "followers_url": "https://api.github.com/users/simonw/followers", "following_url": "https://api.github.com/users/simonw/following{/other_user}", "gists_url": "https://api.github.com/users/simonw/gists{/gist_id}", "starred_url": "https://api.github.com/users/simonw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/simonw/subscriptions", "organizations_url": "https://api.github.com/users/simonw/orgs", "repos_url": "https://api.github.com/users/simonw/repos", "events_url": "https://api.github.com/users/simonw/events{/privacy}", "received_events_url": "https://api.github.com/users/simonw/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 1, "created_at": "2019-05-29T17:28:43Z", "updated_at": "2020-02-24T19:45:05Z", "closed_at": "2020-02-24T19:45:05Z", "author_association": "OWNER", "active_lock_reason": null, "body": "Right now it's triggering any time a mutable database changes.", "reactions": {"url": "https://api.github.com/repos/simonw/datasette/issues/494/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/simonw/datasette/issues/494/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/simonw/datasette/issues/492", "repository_url": "https://api.github.com/repos/simonw/datasette", "labels_url": "https://api.github.com/repos/simonw/datasette/issues/492/labels{/name}", "comments_url": "https://api.github.com/repos/simonw/datasette/issues/492/comments", "events_url": "https://api.github.com/repos/simonw/datasette/issues/492/events", "html_url": "https://github.com/simonw/datasette/issues/492", "id": 449854604, "node_id": "MDU6SXNzdWU0NDk4NTQ2MDQ=", "number": 492, "title": "Facets not correctly persisted in hidden form fields", "user": {"login": "simonw", "id": 9599, "node_id": "MDQ6VXNlcjk1OTk=", "avatar_url": "https://avatars.githubusercontent.com/u/9599?v=4", "gravatar_id": "", "url": "https://api.github.com/users/simonw", "html_url": "https://github.com/simonw", "followers_url": "https://api.github.com/users/simonw/followers", "following_url": "https://api.github.com/users/simonw/following{/other_user}", "gists_url": "https://api.github.com/users/simonw/gists{/gist_id}", "starred_url": "https://api.github.com/users/simonw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/simonw/subscriptions", "organizations_url": "https://api.github.com/users/simonw/orgs", "repos_url": "https://api.github.com/users/simonw/repos", "events_url": "https://api.github.com/users/simonw/events{/privacy}", "received_events_url": "https://api.github.com/users/simonw/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 727708732, "node_id": "MDU6TGFiZWw3Mjc3MDg3MzI=", "url": "https://api.github.com/repos/simonw/datasette/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}, {"id": 1382668283, "node_id": "MDU6TGFiZWwxMzgyNjY4Mjgz", "url": "https://api.github.com/repos/simonw/datasette/labels/faceting", "name": "faceting", "color": "71dd93", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/simonw/datasette/milestones/7", "html_url": "https://github.com/simonw/datasette/milestone/7", "labels_url": "https://api.github.com/repos/simonw/datasette/milestones/7/labels", "id": 3268330, "node_id": "MDk6TWlsZXN0b25lMzI2ODMzMA==", "number": 7, "title": "Datasette 1.0", "description": "https://github.com/simonw/datasette/issues/519 - stable JSON API, documented template context, plugin API guarantee that plugins will not break until a 2.0 release.", "creator": {"login": "simonw", "id": 9599, "node_id": "MDQ6VXNlcjk1OTk=", "avatar_url": "https://avatars.githubusercontent.com/u/9599?v=4", "gravatar_id": "", "url": "https://api.github.com/users/simonw", "html_url": "https://github.com/simonw", "followers_url": "https://api.github.com/users/simonw/followers", "following_url": "https://api.github.com/users/simonw/following{/other_user}", "gists_url": "https://api.github.com/users/simonw/gists{/gist_id}", "starred_url": "https://api.github.com/users/simonw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/simonw/subscriptions", "organizations_url": "https://api.github.com/users/simonw/orgs", "repos_url": "https://api.github.com/users/simonw/repos", "events_url": "https://api.github.com/users/simonw/events{/privacy}", "received_events_url": "https://api.github.com/users/simonw/received_events", "type": "User", "site_admin": false}, "open_issues": 52, "closed_issues": 58, "state": "open", "created_at": "2018-04-15T21:11:18Z", "updated_at": "2023-03-31T17:56:10Z", "due_on": null, "closed_at": null}, "comments": 4, "created_at": "2019-05-29T14:49:39Z", "updated_at": "2020-09-15T20:12:29Z", "closed_at": "2020-09-15T20:12:29Z", "author_association": "OWNER", "active_lock_reason": null, "body": "Steps to reproduce: visit https://2a4b892.datasette.io/fixtures/roadside_attractions?_facet_m2m=attraction_characteristic and click \"Apply\"\r\n\r\nResult is a 500: `no such column: attraction_characteristic`\r\n\r\nThe error occurs because of this hidden HTML input:\r\n\r\n    <input type=\"hidden\" name=\"_facet\" value=\"attraction_characteristic\">\r\n\r\nThis should be:\r\n\r\n    <input type=\"hidden\" name=\"_facet_m2m\" value=\"attraction_characteristic\">", "reactions": {"url": "https://api.github.com/repos/simonw/datasette/issues/492/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/simonw/datasette/issues/492/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/simonw/datasette/issues/489", "repository_url": "https://api.github.com/repos/simonw/datasette", "labels_url": "https://api.github.com/repos/simonw/datasette/issues/489/labels{/name}", "comments_url": "https://api.github.com/repos/simonw/datasette/issues/489/comments", "events_url": "https://api.github.com/repos/simonw/datasette/issues/489/events", "html_url": "https://github.com/simonw/datasette/issues/489", "id": 448977444, "node_id": "MDU6SXNzdWU0NDg5Nzc0NDQ=", "number": 489, "title": "Pagination breaks when combined with expanded foreign keys", "user": {"login": "simonw", "id": 9599, "node_id": "MDQ6VXNlcjk1OTk=", "avatar_url": "https://avatars.githubusercontent.com/u/9599?v=4", "gravatar_id": "", "url": "https://api.github.com/users/simonw", "html_url": "https://github.com/simonw", "followers_url": "https://api.github.com/users/simonw/followers", "following_url": "https://api.github.com/users/simonw/following{/other_user}", "gists_url": "https://api.github.com/users/simonw/gists{/gist_id}", "starred_url": "https://api.github.com/users/simonw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/simonw/subscriptions", "organizations_url": "https://api.github.com/users/simonw/orgs", "repos_url": "https://api.github.com/users/simonw/repos", "events_url": "https://api.github.com/users/simonw/events{/privacy}", "received_events_url": "https://api.github.com/users/simonw/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 727708732, "node_id": "MDU6TGFiZWw3Mjc3MDg3MzI=", "url": "https://api.github.com/repos/simonw/datasette/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}, {"id": 729585263, "node_id": "MDU6TGFiZWw3Mjk1ODUyNjM=", "url": "https://api.github.com/repos/simonw/datasette/labels/small", "name": "small", "color": "a7f9b7", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2019-05-27T19:56:56Z", "updated_at": "2019-05-28T02:48:57Z", "closed_at": "2019-05-28T02:23:27Z", "author_association": "OWNER", "active_lock_reason": null, "body": "Consider https://edb3662.datasette.io/fixtures/roadside_attraction_characteristics?_sort=attraction_id&_size=2\r\n\r\nThe \"Next page\" link goes here, which returns 0 rows:\r\n\r\nhttps://edb3662.datasette.io/fixtures/roadside_attraction_characteristics?_size=2&_next=%257B%2527value%2527%253A%2B2%252C%2B%2527label%2527%253A%2B%2527Winchester%2BMystery%2BHouse%2527%257D%2C2&_sort=attraction_id\r\n\r\nThat's because if you double-url-decode that `_next` link you get this:\r\n\r\n`_next={'value': 2, 'label': 'Winchester Mystery House'},2`\r\n\r\nIt should be `_next=2,2`", "reactions": {"url": "https://api.github.com/repos/simonw/datasette/issues/489/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/simonw/datasette/issues/489/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/simonw/datasette/issues/482", "repository_url": "https://api.github.com/repos/simonw/datasette", "labels_url": "https://api.github.com/repos/simonw/datasette/issues/482/labels{/name}", "comments_url": "https://api.github.com/repos/simonw/datasette/issues/482/comments", "events_url": "https://api.github.com/repos/simonw/datasette/issues/482/events", "html_url": "https://github.com/simonw/datasette/issues/482", "id": 446433735, "node_id": "MDU6SXNzdWU0NDY0MzM3MzU=", "number": 482, "title": "Example of a custom facet plugin is incorrect", "user": {"login": "simonw", "id": 9599, "node_id": "MDQ6VXNlcjk1OTk=", "avatar_url": "https://avatars.githubusercontent.com/u/9599?v=4", "gravatar_id": "", "url": "https://api.github.com/users/simonw", "html_url": "https://github.com/simonw", "followers_url": "https://api.github.com/users/simonw/followers", "following_url": "https://api.github.com/users/simonw/following{/other_user}", "gists_url": "https://api.github.com/users/simonw/gists{/gist_id}", "starred_url": "https://api.github.com/users/simonw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/simonw/subscriptions", "organizations_url": "https://api.github.com/users/simonw/orgs", "repos_url": "https://api.github.com/users/simonw/repos", "events_url": "https://api.github.com/users/simonw/events{/privacy}", "received_events_url": "https://api.github.com/users/simonw/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 727708732, "node_id": "MDU6TGFiZWw3Mjc3MDg3MzI=", "url": "https://api.github.com/repos/simonw/datasette/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}, {"id": 750789605, "node_id": "MDU6TGFiZWw3NTA3ODk2MDU=", "url": "https://api.github.com/repos/simonw/datasette/labels/documentation", "name": "documentation", "color": "fc8b0a", "default": true, "description": null}, {"id": 1382668283, "node_id": "MDU6TGFiZWwxMzgyNjY4Mjgz", "url": "https://api.github.com/repos/simonw/datasette/labels/faceting", "name": "faceting", "color": "71dd93", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/simonw/datasette/milestones/11", "html_url": "https://github.com/simonw/datasette/milestone/11", "labels_url": "https://api.github.com/repos/simonw/datasette/milestones/11/labels", "id": 4471010, "node_id": "MDk6TWlsZXN0b25lNDQ3MTAxMA==", "number": 11, "title": "Datasette 0.29", "description": "Big new features in this release are ASGI support, new plugin hooks for ASGI and extra template variables (to support release of [datasette-auth-github](https://github.com/simonw/datasette-auth-github)), plus facet-by-date.", "creator": {"login": "simonw", "id": 9599, "node_id": "MDQ6VXNlcjk1OTk=", "avatar_url": "https://avatars.githubusercontent.com/u/9599?v=4", "gravatar_id": "", "url": "https://api.github.com/users/simonw", "html_url": "https://github.com/simonw", "followers_url": "https://api.github.com/users/simonw/followers", "following_url": "https://api.github.com/users/simonw/following{/other_user}", "gists_url": "https://api.github.com/users/simonw/gists{/gist_id}", "starred_url": "https://api.github.com/users/simonw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/simonw/subscriptions", "organizations_url": "https://api.github.com/users/simonw/orgs", "repos_url": "https://api.github.com/users/simonw/repos", "events_url": "https://api.github.com/users/simonw/events{/privacy}", "received_events_url": "https://api.github.com/users/simonw/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 11, "state": "closed", "created_at": "2019-07-07T19:59:16Z", "updated_at": "2019-07-08T03:36:57Z", "due_on": "2019-07-07T07:00:00Z", "closed_at": "2019-07-08T03:36:57Z"}, "comments": 0, "created_at": "2019-05-21T06:12:47Z", "updated_at": "2019-07-07T23:19:10Z", "closed_at": "2019-07-07T23:19:10Z", "author_association": "OWNER", "active_lock_reason": null, "body": "The function signatures are wrong on https://datasette.readthedocs.io/en/0.28/plugins.html#register-facet-classes\r\n\r\nThe new signatures are: `async def suggest(self)` and `async def facet_results(self)` - the `sql` and `params` are now passed to the class constructor.", "reactions": {"url": "https://api.github.com/repos/simonw/datasette/issues/482/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/simonw/datasette/issues/482/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/simonw/datasette/issues/459", "repository_url": "https://api.github.com/repos/simonw/datasette", "labels_url": "https://api.github.com/repos/simonw/datasette/issues/459/labels{/name}", "comments_url": "https://api.github.com/repos/simonw/datasette/issues/459/comments", "events_url": "https://api.github.com/repos/simonw/datasette/issues/459/events", "html_url": "https://github.com/simonw/datasette/issues/459", "id": 443020048, "node_id": "MDU6SXNzdWU0NDMwMjAwNDg=", "number": 459, "title": "Fix the \"datasette now publish ... --alias=x\" option", "user": {"login": "simonw", "id": 9599, "node_id": "MDQ6VXNlcjk1OTk=", "avatar_url": "https://avatars.githubusercontent.com/u/9599?v=4", "gravatar_id": "", "url": "https://api.github.com/users/simonw", "html_url": "https://github.com/simonw", "followers_url": "https://api.github.com/users/simonw/followers", "following_url": "https://api.github.com/users/simonw/following{/other_user}", "gists_url": "https://api.github.com/users/simonw/gists{/gist_id}", "starred_url": "https://api.github.com/users/simonw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/simonw/subscriptions", "organizations_url": "https://api.github.com/users/simonw/orgs", "repos_url": "https://api.github.com/users/simonw/repos", "events_url": "https://api.github.com/users/simonw/events{/privacy}", "received_events_url": "https://api.github.com/users/simonw/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 727708732, "node_id": "MDU6TGFiZWw3Mjc3MDg3MzI=", "url": "https://api.github.com/repos/simonw/datasette/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}, {"id": 729585263, "node_id": "MDU6TGFiZWw3Mjk1ODUyNjM=", "url": "https://api.github.com/repos/simonw/datasette/labels/small", "name": "small", "color": "a7f9b7", "default": false, "description": null}, {"id": 750250793, "node_id": "MDU6TGFiZWw3NTAyNTA3OTM=", "url": "https://api.github.com/repos/simonw/datasette/labels/datasette-publish", "name": "datasette-publish", "color": "c3bdf9", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/simonw/datasette/milestones/10", "html_url": "https://github.com/simonw/datasette/milestone/10", "labels_url": "https://api.github.com/repos/simonw/datasette/milestones/10/labels", "id": 4305096, "node_id": "MDk6TWlsZXN0b25lNDMwNTA5Ng==", "number": 10, "title": "0.28", "description": "https://simonwillison.net/2019/May/19/datasette-0-28/", "creator": {"login": "simonw", "id": 9599, "node_id": "MDQ6VXNlcjk1OTk=", "avatar_url": "https://avatars.githubusercontent.com/u/9599?v=4", "gravatar_id": "", "url": "https://api.github.com/users/simonw", "html_url": "https://github.com/simonw", "followers_url": "https://api.github.com/users/simonw/followers", "following_url": "https://api.github.com/users/simonw/following{/other_user}", "gists_url": "https://api.github.com/users/simonw/gists{/gist_id}", "starred_url": "https://api.github.com/users/simonw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/simonw/subscriptions", "organizations_url": "https://api.github.com/users/simonw/orgs", "repos_url": "https://api.github.com/users/simonw/repos", "events_url": "https://api.github.com/users/simonw/events{/privacy}", "received_events_url": "https://api.github.com/users/simonw/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 22, "state": "closed", "created_at": "2019-05-11T18:07:05Z", "updated_at": "2019-05-19T22:24:03Z", "due_on": "2019-05-19T07:00:00Z", "closed_at": "2019-05-19T22:24:03Z"}, "comments": 3, "created_at": "2019-05-11T17:48:40Z", "updated_at": "2019-05-11T20:22:08Z", "closed_at": "2019-05-11T20:22:08Z", "author_association": "OWNER", "active_lock_reason": null, "body": "Now have deprecated the mechanism we were using for this - running `now alias` without any parameters - in favour of something new:\r\n\r\nhttps://zeit.co/blog/automatic-aliasing", "reactions": {"url": "https://api.github.com/repos/simonw/datasette/issues/459/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/simonw/datasette/issues/459/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/simonw/datasette/issues/455", "repository_url": "https://api.github.com/repos/simonw/datasette", "labels_url": "https://api.github.com/repos/simonw/datasette/issues/455/labels{/name}", "comments_url": "https://api.github.com/repos/simonw/datasette/issues/455/comments", "events_url": "https://api.github.com/repos/simonw/datasette/issues/455/events", "html_url": "https://github.com/simonw/datasette/issues/455", "id": 441858747, "node_id": "MDU6SXNzdWU0NDE4NTg3NDc=", "number": 455, "title": "Hidden tables shown on the index page", "user": {"login": "simonw", "id": 9599, "node_id": "MDQ6VXNlcjk1OTk=", "avatar_url": "https://avatars.githubusercontent.com/u/9599?v=4", "gravatar_id": "", "url": "https://api.github.com/users/simonw", "html_url": "https://github.com/simonw", "followers_url": "https://api.github.com/users/simonw/followers", "following_url": "https://api.github.com/users/simonw/following{/other_user}", "gists_url": "https://api.github.com/users/simonw/gists{/gist_id}", "starred_url": "https://api.github.com/users/simonw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/simonw/subscriptions", "organizations_url": "https://api.github.com/users/simonw/orgs", "repos_url": "https://api.github.com/users/simonw/repos", "events_url": "https://api.github.com/users/simonw/events{/privacy}", "received_events_url": "https://api.github.com/users/simonw/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 727708732, "node_id": "MDU6TGFiZWw3Mjc3MDg3MzI=", "url": "https://api.github.com/repos/simonw/datasette/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/simonw/datasette/milestones/10", "html_url": "https://github.com/simonw/datasette/milestone/10", "labels_url": "https://api.github.com/repos/simonw/datasette/milestones/10/labels", "id": 4305096, "node_id": "MDk6TWlsZXN0b25lNDMwNTA5Ng==", "number": 10, "title": "0.28", "description": "https://simonwillison.net/2019/May/19/datasette-0-28/", "creator": {"login": "simonw", "id": 9599, "node_id": "MDQ6VXNlcjk1OTk=", "avatar_url": "https://avatars.githubusercontent.com/u/9599?v=4", "gravatar_id": "", "url": "https://api.github.com/users/simonw", "html_url": "https://github.com/simonw", "followers_url": "https://api.github.com/users/simonw/followers", "following_url": "https://api.github.com/users/simonw/following{/other_user}", "gists_url": "https://api.github.com/users/simonw/gists{/gist_id}", "starred_url": "https://api.github.com/users/simonw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/simonw/subscriptions", "organizations_url": "https://api.github.com/users/simonw/orgs", "repos_url": "https://api.github.com/users/simonw/repos", "events_url": "https://api.github.com/users/simonw/events{/privacy}", "received_events_url": "https://api.github.com/users/simonw/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 22, "state": "closed", "created_at": "2019-05-11T18:07:05Z", "updated_at": "2019-05-19T22:24:03Z", "due_on": "2019-05-19T07:00:00Z", "closed_at": "2019-05-19T22:24:03Z"}, "comments": 1, "created_at": "2019-05-08T18:02:13Z", "updated_at": "2019-05-14T15:49:29Z", "closed_at": "2019-05-14T15:48:08Z", "author_association": "OWNER", "active_lock_reason": null, "body": "Minor bug in master right now.\r\n\r\nhttps://csvconf.now.sh/\r\n\r\n<img width=\"521\" alt=\"csv_conf_v4__csvconf\" src=\"https://user-images.githubusercontent.com/9599/57397073-b2bd1700-7180-11e9-82b8-677338c50987.png\">\r\n", "reactions": {"url": "https://api.github.com/repos/simonw/datasette/issues/455/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/simonw/datasette/issues/455/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/simonw/datasette/issues/453", "repository_url": "https://api.github.com/repos/simonw/datasette", "labels_url": "https://api.github.com/repos/simonw/datasette/issues/453/labels{/name}", "comments_url": "https://api.github.com/repos/simonw/datasette/issues/453/comments", "events_url": "https://api.github.com/repos/simonw/datasette/issues/453/events", "html_url": "https://github.com/simonw/datasette/issues/453", "id": 440332621, "node_id": "MDU6SXNzdWU0NDAzMzI2MjE=", "number": 453, "title": "Error pages do not return CORS header with --cors", "user": {"login": "simonw", "id": 9599, "node_id": "MDQ6VXNlcjk1OTk=", "avatar_url": "https://avatars.githubusercontent.com/u/9599?v=4", "gravatar_id": "", "url": "https://api.github.com/users/simonw", "html_url": "https://github.com/simonw", "followers_url": "https://api.github.com/users/simonw/followers", "following_url": "https://api.github.com/users/simonw/following{/other_user}", "gists_url": "https://api.github.com/users/simonw/gists{/gist_id}", "starred_url": "https://api.github.com/users/simonw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/simonw/subscriptions", "organizations_url": "https://api.github.com/users/simonw/orgs", "repos_url": "https://api.github.com/users/simonw/repos", "events_url": "https://api.github.com/users/simonw/events{/privacy}", "received_events_url": "https://api.github.com/users/simonw/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 727708732, "node_id": "MDU6TGFiZWw3Mjc3MDg3MzI=", "url": "https://api.github.com/repos/simonw/datasette/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}, {"id": 729585263, "node_id": "MDU6TGFiZWw3Mjk1ODUyNjM=", "url": "https://api.github.com/repos/simonw/datasette/labels/small", "name": "small", "color": "a7f9b7", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2019-05-04T15:07:44Z", "updated_at": "2019-05-05T12:24:24Z", "closed_at": "2019-05-05T12:11:33Z", "author_association": "OWNER", "active_lock_reason": null, "body": "This is very confusing. It means that if you send invalid SQL you will get back a CORS error, because the resulting 400 page cannot be accessed via JavaScript.", "reactions": {"url": "https://api.github.com/repos/simonw/datasette/issues/453/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/simonw/datasette/issues/453/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/simonw/datasette/issues/448", "repository_url": "https://api.github.com/repos/simonw/datasette", "labels_url": "https://api.github.com/repos/simonw/datasette/issues/448/labels{/name}", "comments_url": "https://api.github.com/repos/simonw/datasette/issues/448/comments", "events_url": "https://api.github.com/repos/simonw/datasette/issues/448/events", "html_url": "https://github.com/simonw/datasette/issues/448", "id": 440222719, "node_id": "MDU6SXNzdWU0NDAyMjI3MTk=", "number": 448, "title": "_facet_array should work against views", "user": {"login": "simonw", "id": 9599, "node_id": "MDQ6VXNlcjk1OTk=", "avatar_url": "https://avatars.githubusercontent.com/u/9599?v=4", "gravatar_id": "", "url": "https://api.github.com/users/simonw", "html_url": "https://github.com/simonw", "followers_url": "https://api.github.com/users/simonw/followers", "following_url": "https://api.github.com/users/simonw/following{/other_user}", "gists_url": "https://api.github.com/users/simonw/gists{/gist_id}", "starred_url": "https://api.github.com/users/simonw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/simonw/subscriptions", "organizations_url": "https://api.github.com/users/simonw/orgs", "repos_url": "https://api.github.com/users/simonw/repos", "events_url": "https://api.github.com/users/simonw/events{/privacy}", "received_events_url": "https://api.github.com/users/simonw/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 727708732, "node_id": "MDU6TGFiZWw3Mjc3MDg3MzI=", "url": "https://api.github.com/repos/simonw/datasette/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}, {"id": 729586521, "node_id": "MDU6TGFiZWw3Mjk1ODY1MjE=", "url": "https://api.github.com/repos/simonw/datasette/labels/medium", "name": "medium", "color": "ca08d1", "default": false, "description": null}, {"id": 1382668283, "node_id": "MDU6TGFiZWwxMzgyNjY4Mjgz", "url": "https://api.github.com/repos/simonw/datasette/labels/faceting", "name": "faceting", "color": "71dd93", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/simonw/datasette/milestones/7", "html_url": "https://github.com/simonw/datasette/milestone/7", "labels_url": "https://api.github.com/repos/simonw/datasette/milestones/7/labels", "id": 3268330, "node_id": "MDk6TWlsZXN0b25lMzI2ODMzMA==", "number": 7, "title": "Datasette 1.0", "description": "https://github.com/simonw/datasette/issues/519 - stable JSON API, documented template context, plugin API guarantee that plugins will not break until a 2.0 release.", "creator": {"login": "simonw", "id": 9599, "node_id": "MDQ6VXNlcjk1OTk=", "avatar_url": "https://avatars.githubusercontent.com/u/9599?v=4", "gravatar_id": "", "url": "https://api.github.com/users/simonw", "html_url": "https://github.com/simonw", "followers_url": "https://api.github.com/users/simonw/followers", "following_url": "https://api.github.com/users/simonw/following{/other_user}", "gists_url": "https://api.github.com/users/simonw/gists{/gist_id}", "starred_url": "https://api.github.com/users/simonw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/simonw/subscriptions", "organizations_url": "https://api.github.com/users/simonw/orgs", "repos_url": "https://api.github.com/users/simonw/repos", "events_url": "https://api.github.com/users/simonw/events{/privacy}", "received_events_url": "https://api.github.com/users/simonw/received_events", "type": "User", "site_admin": false}, "open_issues": 52, "closed_issues": 58, "state": "open", "created_at": "2018-04-15T21:11:18Z", "updated_at": "2023-03-31T17:56:10Z", "due_on": null, "closed_at": null}, "comments": 12, "created_at": "2019-05-03T21:08:04Z", "updated_at": "2021-11-16T01:32:05Z", "closed_at": "2021-11-16T01:19:40Z", "author_association": "OWNER", "active_lock_reason": null, "body": "I created this view: https://json-view-facet-bug-demo-j7hipcg4aq-uc.a.run.app/russian-ads-8dbda00/ads_with_targets\r\n\r\n```\r\nCREATE VIEW ads_with_targets as select ads.*, json_group_array(targets.name) as target_names from ads\r\n  join ad_targets on ad_targets.ad_id = ads.id\r\n  join targets on ad_targets.target_id = targets.id\r\n  group by ad_targets.ad_id\r\n```\r\n\r\nWhen I try to apply faceting by array it appears to work at first: https://json-view-facet-bug-demo-j7hipcg4aq-uc.a.run.app/russian-ads/ads_with_targets?_facet_array=target_names\r\n\r\nBut actually it's doing the wrong thing - the SQL for the facets uses rowid, but rowid is not present on views at all! These results are incorrect, and clicking to select a facet will fail to produce any rows: https://json-view-facet-bug-demo-j7hipcg4aq-uc.a.run.app/russian-ads/ads_with_targets?_facet_array=target_names&target_names__arraycontains=people_who_match%3Ainterests%3AAfrican-American+Civil+Rights+Movement+%281954%E2%80%9468%29\r\n\r\nHere's the SQL it should be using when you select a facet (note that it does not use a rowid):\r\n\r\nhttps://json-view-facet-bug-demo-j7hipcg4aq-uc.a.run.app/russian-ads?sql=select+*+from+ads_with_targets+where+id+in+%28%0D%0A++++++++++++select+ads_with_targets.id+from+ads_with_targets%2C+json_each%28ads_with_targets.target_names%29+j%0D%0A++++++++++++where+j.value+%3D+%3Ap0%0D%0A++++++++%29+limit+101&p0=people_who_match%3Ainterests%3ABlack+%28Color%29\r\n\r\nSo we need to do something a lot smarter here. I'm not sure what the fix will look like, or even if it's feasible given that views don't have a rowid to hook into so the JSON faceting SQL may have to be completely rewritten.\r\n\r\n```\r\ndatasette publish cloudrun \\\r\n    russian-ads.db \\\r\n    --name json-view-facet-bug-demo \\\r\n    --branch master \\\r\n    --extra-options \"--config sql_time_limit_ms:5000 --config facet_time_limit_ms:5000\"\r\n```", "reactions": {"url": "https://api.github.com/repos/simonw/datasette/issues/448/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/simonw/datasette/issues/448/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/simonw/datasette/issues/425", "repository_url": "https://api.github.com/repos/simonw/datasette", "labels_url": "https://api.github.com/repos/simonw/datasette/issues/425/labels{/name}", "comments_url": "https://api.github.com/repos/simonw/datasette/issues/425/comments", "events_url": "https://api.github.com/repos/simonw/datasette/issues/425/events", "html_url": "https://github.com/simonw/datasette/issues/425", "id": 430103450, "node_id": "MDU6SXNzdWU0MzAxMDM0NTA=", "number": 425, "title": "Submitting SQL on hide page is broken", "user": {"login": "simonw", "id": 9599, "node_id": "MDQ6VXNlcjk1OTk=", "avatar_url": "https://avatars.githubusercontent.com/u/9599?v=4", "gravatar_id": "", "url": "https://api.github.com/users/simonw", "html_url": "https://github.com/simonw", "followers_url": "https://api.github.com/users/simonw/followers", "following_url": "https://api.github.com/users/simonw/following{/other_user}", "gists_url": "https://api.github.com/users/simonw/gists{/gist_id}", "starred_url": "https://api.github.com/users/simonw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/simonw/subscriptions", "organizations_url": "https://api.github.com/users/simonw/orgs", "repos_url": "https://api.github.com/users/simonw/repos", "events_url": "https://api.github.com/users/simonw/events{/privacy}", "received_events_url": "https://api.github.com/users/simonw/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 727708732, "node_id": "MDU6TGFiZWw3Mjc3MDg3MzI=", "url": "https://api.github.com/repos/simonw/datasette/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2019-04-07T04:21:31Z", "updated_at": "2019-04-12T05:12:13Z", "closed_at": "2019-04-12T05:00:53Z", "author_association": "OWNER", "active_lock_reason": null, "body": "Clicking the submit button here doesn't work correctly: https://3a208a4.datasette.io/fixtures?sql=select+%2A+from+compound_three_primary_keys+order+by+pk1%2C+pk2%2C+pk3+limit+101&_hide_sql=1", "reactions": {"url": "https://api.github.com/repos/simonw/datasette/issues/425/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/simonw/datasette/issues/425/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/simonw/datasette/issues/399", "repository_url": "https://api.github.com/repos/simonw/datasette", "labels_url": "https://api.github.com/repos/simonw/datasette/issues/399/labels{/name}", "comments_url": "https://api.github.com/repos/simonw/datasette/issues/399/comments", "events_url": "https://api.github.com/repos/simonw/datasette/issues/399/events", "html_url": "https://github.com/simonw/datasette/issues/399", "id": 398089089, "node_id": "MDU6SXNzdWUzOTgwODkwODk=", "number": 399, "title": "/-/versions for official Docker image returns wrong Datasette version", "user": {"login": "simonw", "id": 9599, "node_id": "MDQ6VXNlcjk1OTk=", "avatar_url": "https://avatars.githubusercontent.com/u/9599?v=4", "gravatar_id": "", "url": "https://api.github.com/users/simonw", "html_url": "https://github.com/simonw", "followers_url": "https://api.github.com/users/simonw/followers", "following_url": "https://api.github.com/users/simonw/following{/other_user}", "gists_url": "https://api.github.com/users/simonw/gists{/gist_id}", "starred_url": "https://api.github.com/users/simonw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/simonw/subscriptions", "organizations_url": "https://api.github.com/users/simonw/orgs", "repos_url": "https://api.github.com/users/simonw/repos", "events_url": "https://api.github.com/users/simonw/events{/privacy}", "received_events_url": "https://api.github.com/users/simonw/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 727708732, "node_id": "MDU6TGFiZWw3Mjc3MDg3MzI=", "url": "https://api.github.com/repos/simonw/datasette/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}, {"id": 967420289, "node_id": "MDU6TGFiZWw5Njc0MjAyODk=", "url": "https://api.github.com/repos/simonw/datasette/labels/minor", "name": "minor", "color": "fcd0c4", "default": false, "description": "Minor bugs (not high priority)"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2019-01-11T01:19:58Z", "updated_at": "2019-01-13T23:31:59Z", "closed_at": "2019-01-13T23:10:45Z", "author_association": "OWNER", "active_lock_reason": null, "body": "```\r\ndocker run -p 8001:8001 datasetteproject/datasette datasette -p 8001 -h 0.0.0.0\r\n```\r\nhttp://0.0.0.0:8001/-/versions returns this:\r\n```\r\n{\r\n    \"datasette\": {\r\n        \"version\": \"0+unknown\"\r\n    },\r\n    ...\r\n```\r\nThis is because the Docker image is built by copying in the Datasette source code, which confuses versioneer. Maybe the Docker image should install the code using a wheel or similar?\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/simonw/datasette/issues/399/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/simonw/datasette/issues/399/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/simonw/datasette/issues/398", "repository_url": "https://api.github.com/repos/simonw/datasette", "labels_url": "https://api.github.com/repos/simonw/datasette/issues/398/labels{/name}", "comments_url": "https://api.github.com/repos/simonw/datasette/issues/398/comments", "events_url": "https://api.github.com/repos/simonw/datasette/issues/398/events", "html_url": "https://github.com/simonw/datasette/issues/398", "id": 398011658, "node_id": "MDU6SXNzdWUzOTgwMTE2NTg=", "number": 398, "title": "Ensure downloading a 100+MB SQLite database file works", "user": {"login": "simonw", "id": 9599, "node_id": "MDQ6VXNlcjk1OTk=", "avatar_url": "https://avatars.githubusercontent.com/u/9599?v=4", "gravatar_id": "", "url": "https://api.github.com/users/simonw", "html_url": "https://github.com/simonw", "followers_url": "https://api.github.com/users/simonw/followers", "following_url": "https://api.github.com/users/simonw/following{/other_user}", "gists_url": "https://api.github.com/users/simonw/gists{/gist_id}", "starred_url": "https://api.github.com/users/simonw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/simonw/subscriptions", "organizations_url": "https://api.github.com/users/simonw/orgs", "repos_url": "https://api.github.com/users/simonw/repos", "events_url": "https://api.github.com/users/simonw/events{/privacy}", "received_events_url": "https://api.github.com/users/simonw/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 727708732, "node_id": "MDU6TGFiZWw3Mjc3MDg3MzI=", "url": "https://api.github.com/repos/simonw/datasette/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/simonw/datasette/milestones/7", "html_url": "https://github.com/simonw/datasette/milestone/7", "labels_url": "https://api.github.com/repos/simonw/datasette/milestones/7/labels", "id": 3268330, "node_id": "MDk6TWlsZXN0b25lMzI2ODMzMA==", "number": 7, "title": "Datasette 1.0", "description": "https://github.com/simonw/datasette/issues/519 - stable JSON API, documented template context, plugin API guarantee that plugins will not break until a 2.0 release.", "creator": {"login": "simonw", "id": 9599, "node_id": "MDQ6VXNlcjk1OTk=", "avatar_url": "https://avatars.githubusercontent.com/u/9599?v=4", "gravatar_id": "", "url": "https://api.github.com/users/simonw", "html_url": "https://github.com/simonw", "followers_url": "https://api.github.com/users/simonw/followers", "following_url": "https://api.github.com/users/simonw/following{/other_user}", "gists_url": "https://api.github.com/users/simonw/gists{/gist_id}", "starred_url": "https://api.github.com/users/simonw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/simonw/subscriptions", "organizations_url": "https://api.github.com/users/simonw/orgs", "repos_url": "https://api.github.com/users/simonw/repos", "events_url": "https://api.github.com/users/simonw/events{/privacy}", "received_events_url": "https://api.github.com/users/simonw/received_events", "type": "User", "site_admin": false}, "open_issues": 52, "closed_issues": 58, "state": "open", "created_at": "2018-04-15T21:11:18Z", "updated_at": "2023-03-31T17:56:10Z", "due_on": null, "closed_at": null}, "comments": 3, "created_at": "2019-01-10T20:57:52Z", "updated_at": "2020-12-05T19:36:27Z", "closed_at": "2020-12-05T19:36:27Z", "author_association": "OWNER", "active_lock_reason": null, "body": "I've seen attempted downloads of large files fail after about ten seconds.", "reactions": {"url": "https://api.github.com/repos/simonw/datasette/issues/398/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/simonw/datasette/issues/398/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/simonw/datasette/issues/393", "repository_url": "https://api.github.com/repos/simonw/datasette", "labels_url": "https://api.github.com/repos/simonw/datasette/issues/393/labels{/name}", "comments_url": "https://api.github.com/repos/simonw/datasette/issues/393/comments", "events_url": "https://api.github.com/repos/simonw/datasette/issues/393/events", "html_url": "https://github.com/simonw/datasette/issues/393", "id": 395236066, "node_id": "MDU6SXNzdWUzOTUyMzYwNjY=", "number": 393, "title": "CSV export in \"Advanced export\" pane doesn't respect query", "user": {"login": "ltrgoddard", "id": 1727065, "node_id": "MDQ6VXNlcjE3MjcwNjU=", "avatar_url": "https://avatars.githubusercontent.com/u/1727065?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ltrgoddard", "html_url": "https://github.com/ltrgoddard", "followers_url": "https://api.github.com/users/ltrgoddard/followers", "following_url": "https://api.github.com/users/ltrgoddard/following{/other_user}", "gists_url": "https://api.github.com/users/ltrgoddard/gists{/gist_id}", "starred_url": "https://api.github.com/users/ltrgoddard/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ltrgoddard/subscriptions", "organizations_url": "https://api.github.com/users/ltrgoddard/orgs", "repos_url": "https://api.github.com/users/ltrgoddard/repos", "events_url": "https://api.github.com/users/ltrgoddard/events{/privacy}", "received_events_url": "https://api.github.com/users/ltrgoddard/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 727708732, "node_id": "MDU6TGFiZWw3Mjc3MDg3MzI=", "url": "https://api.github.com/repos/simonw/datasette/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}, {"id": 3095460476, "node_id": "MDU6TGFiZWwzMDk1NDYwNDc2", "url": "https://api.github.com/repos/simonw/datasette/labels/csv", "name": "csv", "color": "4F1FEC", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2019-01-02T12:39:41Z", "updated_at": "2021-06-17T18:14:24Z", "closed_at": "2019-01-03T02:44:10Z", "author_association": "NONE", "active_lock_reason": null, "body": "It looks like there's an inconsistency when exporting to CSV via the the web interface. Say I'm looking at [songs released in 1989](https://fivethirtyeight.datasettes.com/fivethirtyeight-c300360/classic-rock%2Fclassic-rock-song-list?Release+Year__exact=1989) in the `classic-rock/classic-rock-song-list` table from the Five Thirty Eight data. The JSON and CSV export links at the top of the page both give me filtered data using `Release+Year__exact=1989` in the URL. In the `Advanced export` tab, though, the CSV option gives me the whole data set, while the JSON options preserve the query.\r\n\r\nIt may be that this is intended behaviour related to the streaming CSV stuff [discussed here](https://github.com/simonw/datasette/issues/266), but if that's the case then I think it should be a little clearer.", "reactions": {"url": "https://api.github.com/repos/simonw/datasette/issues/393/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/simonw/datasette/issues/393/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/simonw/datasette/issues/350", "repository_url": "https://api.github.com/repos/simonw/datasette", "labels_url": "https://api.github.com/repos/simonw/datasette/issues/350/labels{/name}", "comments_url": "https://api.github.com/repos/simonw/datasette/issues/350/comments", "events_url": "https://api.github.com/repos/simonw/datasette/issues/350/events", "html_url": "https://github.com/simonw/datasette/issues/350", "id": 344701755, "node_id": "MDU6SXNzdWUzNDQ3MDE3NTU=", "number": 350, "title": "Don't list default plugins on /-/plugins", "user": {"login": "simonw", "id": 9599, "node_id": "MDQ6VXNlcjk1OTk=", "avatar_url": "https://avatars.githubusercontent.com/u/9599?v=4", "gravatar_id": "", "url": "https://api.github.com/users/simonw", "html_url": "https://github.com/simonw", "followers_url": "https://api.github.com/users/simonw/followers", "following_url": "https://api.github.com/users/simonw/following{/other_user}", "gists_url": "https://api.github.com/users/simonw/gists{/gist_id}", "starred_url": "https://api.github.com/users/simonw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/simonw/subscriptions", "organizations_url": "https://api.github.com/users/simonw/orgs", "repos_url": "https://api.github.com/users/simonw/repos", "events_url": "https://api.github.com/users/simonw/events{/privacy}", "received_events_url": "https://api.github.com/users/simonw/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 727708732, "node_id": "MDU6TGFiZWw3Mjc3MDg3MzI=", "url": "https://api.github.com/repos/simonw/datasette/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}, {"id": 967420289, "node_id": "MDU6TGFiZWw5Njc0MjAyODk=", "url": "https://api.github.com/repos/simonw/datasette/labels/minor", "name": "minor", "color": "fcd0c4", "default": false, "description": "Minor bugs (not high priority)"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2018-07-26T05:38:00Z", "updated_at": "2018-08-28T17:13:50Z", "closed_at": "2018-08-28T16:48:19Z", "author_association": "OWNER", "active_lock_reason": null, "body": "https://dbbe707.datasette.io/-/plugins is showing \"datasette.publish.now\" and \"datasette.publish.heroku\"", "reactions": {"url": "https://api.github.com/repos/simonw/datasette/issues/350/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/simonw/datasette/issues/350/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/simonw/datasette/issues/334", "repository_url": "https://api.github.com/repos/simonw/datasette", "labels_url": "https://api.github.com/repos/simonw/datasette/issues/334/labels{/name}", "comments_url": "https://api.github.com/repos/simonw/datasette/issues/334/comments", "events_url": "https://api.github.com/repos/simonw/datasette/issues/334/events", "html_url": "https://github.com/simonw/datasette/issues/334", "id": 339095976, "node_id": "MDU6SXNzdWUzMzkwOTU5NzY=", "number": 334, "title": "extra_options not passed to heroku publisher", "user": {"login": "kamicut", "id": 719357, "node_id": "MDQ6VXNlcjcxOTM1Nw==", "avatar_url": "https://avatars.githubusercontent.com/u/719357?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kamicut", "html_url": "https://github.com/kamicut", "followers_url": "https://api.github.com/users/kamicut/followers", "following_url": "https://api.github.com/users/kamicut/following{/other_user}", "gists_url": "https://api.github.com/users/kamicut/gists{/gist_id}", "starred_url": "https://api.github.com/users/kamicut/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kamicut/subscriptions", "organizations_url": "https://api.github.com/users/kamicut/orgs", "repos_url": "https://api.github.com/users/kamicut/repos", "events_url": "https://api.github.com/users/kamicut/events{/privacy}", "received_events_url": "https://api.github.com/users/kamicut/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 727708732, "node_id": "MDU6TGFiZWw3Mjc3MDg3MzI=", "url": "https://api.github.com/repos/simonw/datasette/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}, {"id": 729585263, "node_id": "MDU6TGFiZWw3Mjk1ODUyNjM=", "url": "https://api.github.com/repos/simonw/datasette/labels/small", "name": "small", "color": "a7f9b7", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2018-07-06T23:26:12Z", "updated_at": "2018-07-24T04:53:21Z", "closed_at": "2018-07-10T01:46:04Z", "author_association": "NONE", "active_lock_reason": null, "body": "I might be wrong but I was not able to publish to `heroku` with `--extra-options`, I think `extra_options` is not being used in this function [here](https://github.com/simonw/datasette/blob/master/datasette/utils.py#L369). \r\n\r\nAny help appreciated! ", "reactions": {"url": "https://api.github.com/repos/simonw/datasette/issues/334/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/simonw/datasette/issues/334/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/simonw/datasette/issues/333", "repository_url": "https://api.github.com/repos/simonw/datasette", "labels_url": "https://api.github.com/repos/simonw/datasette/issues/333/labels{/name}", "comments_url": "https://api.github.com/repos/simonw/datasette/issues/333/comments", "events_url": "https://api.github.com/repos/simonw/datasette/issues/333/events", "html_url": "https://github.com/simonw/datasette/issues/333", "id": 338768551, "node_id": "MDU6SXNzdWUzMzg3Njg1NTE=", "number": 333, "title": "Datasette on Zeit Now returns http URLs for facet and next links", "user": {"login": "simonw", "id": 9599, "node_id": "MDQ6VXNlcjk1OTk=", "avatar_url": "https://avatars.githubusercontent.com/u/9599?v=4", "gravatar_id": "", "url": "https://api.github.com/users/simonw", "html_url": "https://github.com/simonw", "followers_url": "https://api.github.com/users/simonw/followers", "following_url": "https://api.github.com/users/simonw/following{/other_user}", "gists_url": "https://api.github.com/users/simonw/gists{/gist_id}", "starred_url": "https://api.github.com/users/simonw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/simonw/subscriptions", "organizations_url": "https://api.github.com/users/simonw/orgs", "repos_url": "https://api.github.com/users/simonw/repos", "events_url": "https://api.github.com/users/simonw/events{/privacy}", "received_events_url": "https://api.github.com/users/simonw/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 727708732, "node_id": "MDU6TGFiZWw3Mjc3MDg3MzI=", "url": "https://api.github.com/repos/simonw/datasette/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}, {"id": 729585263, "node_id": "MDU6TGFiZWw3Mjk1ODUyNjM=", "url": "https://api.github.com/repos/simonw/datasette/labels/small", "name": "small", "color": "a7f9b7", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2018-07-06T00:40:49Z", "updated_at": "2018-07-24T04:53:20Z", "closed_at": "2018-07-24T01:51:53Z", "author_association": "OWNER", "active_lock_reason": null, "body": "e.g. on https://fivethirtyeight.datasettes.com/fivethirtyeight-ac35616/nba-elo%2Fnbaallelo.json?_facet=lg_id&_size=0\r\n```\r\n{\r\n  \"facet_results\": {\r\n    \"lg_id\": {\r\n      \"name\": \"lg_id\",\r\n      \"results\": [\r\n        {\r\n          \"value\": \"NBA\",\r\n          \"label\": \"NBA\",\r\n          \"count\": 118016,\r\n          \"toggle_url\": \"http://fivethirtyeight.datasettes.com/fivethirtyeight-ac35616/nba-elo%2Fnbaallelo.json?_facet=lg_id&_size=1&lg_id=NBA\",\r\n          \"selected\": false\r\n        },\r\n        {\r\n          \"value\": \"ABA\",\r\n          \"label\": \"ABA\",\r\n          \"count\": 8298,\r\n          \"toggle_url\": \"http://fivethirtyeight.datasettes.com/fivethirtyeight-ac35616/nba-elo%2Fnbaallelo.json?_facet=lg_id&_size=1&lg_id=ABA\",\r\n          \"selected\": false\r\n        }\r\n      ],\r\n      \"truncated\": false\r\n    }\r\n  },\r\n  \"suggested_facets\": [\r\n    {\r\n      \"name\": \"_iscopy\",\r\n      \"toggle_url\": \"/fivethirtyeight-ac35616/nba-elo%2Fnbaallelo.json?_facet=lg_id&_size=1&_facet=_iscopy\"\r\n    }\r\n  ],\r\n  \"next_url\": \"http://fivethirtyeight.datasettes.com/fivethirtyeight-ac35616/nba-elo%2Fnbaallelo.json?_facet=lg_id&_size=1&_next=1\",\r\n}\r\n```\r\n`next_url` and `facet_results` both link to `http://` when they should link to `https://`.\r\n\r\nNote that suggested facets doesn't include the full URL at all, which is a consistency bug.", "reactions": {"url": "https://api.github.com/repos/simonw/datasette/issues/333/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/simonw/datasette/issues/333/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/simonw/datasette/issues/332", "repository_url": "https://api.github.com/repos/simonw/datasette", "labels_url": "https://api.github.com/repos/simonw/datasette/issues/332/labels{/name}", "comments_url": "https://api.github.com/repos/simonw/datasette/issues/332/comments", "events_url": "https://api.github.com/repos/simonw/datasette/issues/332/events", "html_url": "https://github.com/simonw/datasette/issues/332", "id": 337141108, "node_id": "MDU6SXNzdWUzMzcxNDExMDg=", "number": 332, "title": "Sanely handle Infinity/-Infinity values in JSON using ?_json_infinity=1", "user": {"login": "simonw", "id": 9599, "node_id": "MDQ6VXNlcjk1OTk=", "avatar_url": "https://avatars.githubusercontent.com/u/9599?v=4", "gravatar_id": "", "url": "https://api.github.com/users/simonw", "html_url": "https://github.com/simonw", "followers_url": "https://api.github.com/users/simonw/followers", "following_url": "https://api.github.com/users/simonw/following{/other_user}", "gists_url": "https://api.github.com/users/simonw/gists{/gist_id}", "starred_url": "https://api.github.com/users/simonw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/simonw/subscriptions", "organizations_url": "https://api.github.com/users/simonw/orgs", "repos_url": "https://api.github.com/users/simonw/repos", "events_url": "https://api.github.com/users/simonw/events{/privacy}", "received_events_url": "https://api.github.com/users/simonw/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 727708732, "node_id": "MDU6TGFiZWw3Mjc3MDg3MzI=", "url": "https://api.github.com/repos/simonw/datasette/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 12, "created_at": "2018-06-29T21:21:27Z", "updated_at": "2018-07-24T04:53:20Z", "closed_at": "2018-07-24T03:08:30Z", "author_association": "OWNER", "active_lock_reason": null, "body": "It turns out if you load this CSV using `csvs-to-sqlite` you get an Infinity value in SQLite:\r\n\r\n```\r\nname,num\r\nsasha,10\r\nterry,Inf\r\ncathy,0.5\r\n```\r\n\r\n`csvs-to-sqlite infinity-bug.csv infinity-bug.db`\r\n\r\nI deployed this using:\r\n\r\n```\r\ndatasette publish now infinity-bug.db --name=datasette-infinity-bug --install=datasette-vega\r\n```\r\n\r\nDatasette outputs that as `Infinity` in the JSON format, which causes JavaScript errors.\r\n\r\nDemo\r\n* https://datasette-infinity-bug.now.sh/infinity-bug-0d0224e/infinity-bug - HTML view works\r\n* https://datasette-infinity-bug.now.sh/infinity-bug-0d0224e/infinity-bug.json?_shape=array - this outputs the following:\r\n\r\n```\r\n[\r\n    {\r\n        \"rowid\": 1,\r\n        \"name\": \"sasha\",\r\n        \"num\": 10.0\r\n    },\r\n    {\r\n        \"rowid\": 2,\r\n        \"name\": \"terry\",\r\n        \"num\": Infinity\r\n    },\r\n    {\r\n        \"rowid\": 3,\r\n        \"name\": \"cathy\",\r\n        \"num\": 0.5\r\n    }\r\n]\r\n```\r\n\r\nBut... in Firefox that gets rendered like this:\r\n\r\n![2018-06-29 at 4 20 pm](https://user-images.githubusercontent.com/9599/42115408-5d30f630-7bb8-11e8-8370-c8484801c49b.png)\r\n\r\nAnd if you click the \"Show charting options\" button you get this error in the console:\r\n\r\n```\r\nSyntaxError: JSON.parse: unexpected character at line 1 column 83 of the JSON data\r\n```\r\n", "reactions": {"url": "https://api.github.com/repos/simonw/datasette/issues/332/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/simonw/datasette/issues/332/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/simonw/datasette/issues/325", "repository_url": "https://api.github.com/repos/simonw/datasette", "labels_url": "https://api.github.com/repos/simonw/datasette/issues/325/labels{/name}", "comments_url": "https://api.github.com/repos/simonw/datasette/issues/325/comments", "events_url": "https://api.github.com/repos/simonw/datasette/issues/325/events", "html_url": "https://github.com/simonw/datasette/issues/325", "id": 335064777, "node_id": "MDU6SXNzdWUzMzUwNjQ3Nzc=", "number": 325, "title": "Error on row page if table has slashes in the name and ends in .csv", "user": {"login": "simonw", "id": 9599, "node_id": "MDQ6VXNlcjk1OTk=", "avatar_url": "https://avatars.githubusercontent.com/u/9599?v=4", "gravatar_id": "", "url": "https://api.github.com/users/simonw", "html_url": "https://github.com/simonw", "followers_url": "https://api.github.com/users/simonw/followers", "following_url": "https://api.github.com/users/simonw/following{/other_user}", "gists_url": "https://api.github.com/users/simonw/gists{/gist_id}", "starred_url": "https://api.github.com/users/simonw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/simonw/subscriptions", "organizations_url": "https://api.github.com/users/simonw/orgs", "repos_url": "https://api.github.com/users/simonw/repos", "events_url": "https://api.github.com/users/simonw/events{/privacy}", "received_events_url": "https://api.github.com/users/simonw/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 727708732, "node_id": "MDU6TGFiZWw3Mjc3MDg3MzI=", "url": "https://api.github.com/repos/simonw/datasette/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2018-06-23T03:43:42Z", "updated_at": "2018-07-09T17:28:27Z", "closed_at": "2018-07-08T05:21:59Z", "author_association": "OWNER", "active_lock_reason": null, "body": "https://v0-23-1.datasette.io/fixtures-e14e080/table%252Fwith%252Fslashes.csv/3\r\n\r\n> no such table: table%252Fwith%252Fslashes.csv\r\n\r\nFrom clicking the row link on https://v0-23-1.datasette.io/fixtures-e14e080/table%2Fwith%2Fslashes.csv", "reactions": {"url": "https://api.github.com/repos/simonw/datasette/issues/325/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/simonw/datasette/issues/325/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/simonw/datasette/issues/319", "repository_url": "https://api.github.com/repos/simonw/datasette", "labels_url": "https://api.github.com/repos/simonw/datasette/issues/319/labels{/name}", "comments_url": "https://api.github.com/repos/simonw/datasette/issues/319/comments", "events_url": "https://api.github.com/repos/simonw/datasette/issues/319/events", "html_url": "https://github.com/simonw/datasette/issues/319", "id": 334149717, "node_id": "MDU6SXNzdWUzMzQxNDk3MTc=", "number": 319, "title": "Incorrect display of compound primary keys with foreign key relationships", "user": {"login": "simonw", "id": 9599, "node_id": "MDQ6VXNlcjk1OTk=", "avatar_url": "https://avatars.githubusercontent.com/u/9599?v=4", "gravatar_id": "", "url": "https://api.github.com/users/simonw", "html_url": "https://github.com/simonw", "followers_url": "https://api.github.com/users/simonw/followers", "following_url": "https://api.github.com/users/simonw/following{/other_user}", "gists_url": "https://api.github.com/users/simonw/gists{/gist_id}", "starred_url": "https://api.github.com/users/simonw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/simonw/subscriptions", "organizations_url": "https://api.github.com/users/simonw/orgs", "repos_url": "https://api.github.com/users/simonw/repos", "events_url": "https://api.github.com/users/simonw/events{/privacy}", "received_events_url": "https://api.github.com/users/simonw/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 727708732, "node_id": "MDU6TGFiZWw3Mjc3MDg3MzI=", "url": "https://api.github.com/repos/simonw/datasette/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/simonw/datasette/milestones/8", "html_url": "https://github.com/simonw/datasette/milestone/8", "labels_url": "https://api.github.com/repos/simonw/datasette/milestones/8/labels", "id": 3439337, "node_id": "MDk6TWlsZXN0b25lMzQzOTMzNw==", "number": 8, "title": "0.23.1", "description": "Bugfix release for 0.23. Shipped: https://pypi.org/project/datasette/0.23.1/", "creator": {"login": "simonw", "id": 9599, "node_id": "MDQ6VXNlcjk1OTk=", "avatar_url": "https://avatars.githubusercontent.com/u/9599?v=4", "gravatar_id": "", "url": "https://api.github.com/users/simonw", "html_url": "https://github.com/simonw", "followers_url": "https://api.github.com/users/simonw/followers", "following_url": "https://api.github.com/users/simonw/following{/other_user}", "gists_url": "https://api.github.com/users/simonw/gists{/gist_id}", "starred_url": "https://api.github.com/users/simonw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/simonw/subscriptions", "organizations_url": "https://api.github.com/users/simonw/orgs", "repos_url": "https://api.github.com/users/simonw/repos", "events_url": "https://api.github.com/users/simonw/events{/privacy}", "received_events_url": "https://api.github.com/users/simonw/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 7, "state": "closed", "created_at": "2018-06-20T17:04:16Z", "updated_at": "2018-06-21T15:47:49Z", "due_on": null, "closed_at": "2018-06-21T15:47:15Z"}, "comments": 2, "created_at": "2018-06-20T16:09:36Z", "updated_at": "2018-06-21T15:58:15Z", "closed_at": "2018-06-21T14:56:41Z", "author_association": "OWNER", "active_lock_reason": null, "body": "https://registry.datasette.io/registry-7d4f81f/datasette_tags\r\n\r\n![2018-06-20 at 9 07 am](https://user-images.githubusercontent.com/9599/41670542-68cc4dec-7469-11e8-9521-3bbc6465eccb.png)\r\n\r\nUnderlying JSON looks [like this](https://registry.datasette.io/registry-7d4f81f/datasette_tags.json?_labels=on):\r\n\r\n```\r\n{\r\n    \"database\": \"registry\",\r\n    \"table\": \"datasette_tags\",\r\n    \"is_view\": false,\r\n    \"human_description_en\": \"\",\r\n    \"rows\": [\r\n        {\r\n            \"datasette_id\": {\r\n                \"value\": 1,\r\n                \"label\": \"Global Power Plant Database\"\r\n            },\r\n            \"tag\": {\r\n                \"value\": \"geospatial\",\r\n                \"label\": \"geospatial\"\r\n            }\r\n        },\r\n````\r\n\r\nBug is likely somewhere in here: https://github.com/simonw/datasette/blob/e04f5b0d348ef7275a0a5ab9eb53527105132885/datasette/views/table.py#L143-L207", "reactions": {"url": "https://api.github.com/repos/simonw/datasette/issues/319/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/simonw/datasette/issues/319/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/simonw/datasette/issues/318", "repository_url": "https://api.github.com/repos/simonw/datasette", "labels_url": "https://api.github.com/repos/simonw/datasette/issues/318/labels{/name}", "comments_url": "https://api.github.com/repos/simonw/datasette/issues/318/comments", "events_url": "https://api.github.com/repos/simonw/datasette/issues/318/events", "html_url": "https://github.com/simonw/datasette/issues/318", "id": 334148669, "node_id": "MDU6SXNzdWUzMzQxNDg2Njk=", "number": 318, "title": "Facets with value of 0 displayed incorrectly", "user": {"login": "simonw", "id": 9599, "node_id": "MDQ6VXNlcjk1OTk=", "avatar_url": "https://avatars.githubusercontent.com/u/9599?v=4", "gravatar_id": "", "url": "https://api.github.com/users/simonw", "html_url": "https://github.com/simonw", "followers_url": "https://api.github.com/users/simonw/followers", "following_url": "https://api.github.com/users/simonw/following{/other_user}", "gists_url": "https://api.github.com/users/simonw/gists{/gist_id}", "starred_url": "https://api.github.com/users/simonw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/simonw/subscriptions", "organizations_url": "https://api.github.com/users/simonw/orgs", "repos_url": "https://api.github.com/users/simonw/repos", "events_url": "https://api.github.com/users/simonw/events{/privacy}", "received_events_url": "https://api.github.com/users/simonw/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 727708732, "node_id": "MDU6TGFiZWw3Mjc3MDg3MzI=", "url": "https://api.github.com/repos/simonw/datasette/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}, {"id": 967420289, "node_id": "MDU6TGFiZWw5Njc0MjAyODk=", "url": "https://api.github.com/repos/simonw/datasette/labels/minor", "name": "minor", "color": "fcd0c4", "default": false, "description": "Minor bugs (not high priority)"}, {"id": 1382668283, "node_id": "MDU6TGFiZWwxMzgyNjY4Mjgz", "url": "https://api.github.com/repos/simonw/datasette/labels/faceting", "name": "faceting", "color": "71dd93", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/simonw/datasette/milestones/8", "html_url": "https://github.com/simonw/datasette/milestone/8", "labels_url": "https://api.github.com/repos/simonw/datasette/milestones/8/labels", "id": 3439337, "node_id": "MDk6TWlsZXN0b25lMzQzOTMzNw==", "number": 8, "title": "0.23.1", "description": "Bugfix release for 0.23. Shipped: https://pypi.org/project/datasette/0.23.1/", "creator": {"login": "simonw", "id": 9599, "node_id": "MDQ6VXNlcjk1OTk=", "avatar_url": "https://avatars.githubusercontent.com/u/9599?v=4", "gravatar_id": "", "url": "https://api.github.com/users/simonw", "html_url": "https://github.com/simonw", "followers_url": "https://api.github.com/users/simonw/followers", "following_url": "https://api.github.com/users/simonw/following{/other_user}", "gists_url": "https://api.github.com/users/simonw/gists{/gist_id}", "starred_url": "https://api.github.com/users/simonw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/simonw/subscriptions", "organizations_url": "https://api.github.com/users/simonw/orgs", "repos_url": "https://api.github.com/users/simonw/repos", "events_url": "https://api.github.com/users/simonw/events{/privacy}", "received_events_url": "https://api.github.com/users/simonw/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 7, "state": "closed", "created_at": "2018-06-20T17:04:16Z", "updated_at": "2018-06-21T15:47:49Z", "due_on": null, "closed_at": "2018-06-21T15:47:15Z"}, "comments": 1, "created_at": "2018-06-20T16:06:46Z", "updated_at": "2019-05-29T21:39:12Z", "closed_at": "2018-06-21T04:30:45Z", "author_association": "OWNER", "active_lock_reason": null, "body": "https://registry.datasette.io/registry-7d4f81f/tables?_facet=is_hidden#facet-is_hidden\r\n\r\n![2018-06-20 at 9 05 am](https://user-images.githubusercontent.com/9599/41670448-2c06e642-7469-11e8-86be-4664269582b1.png)\r\n\r\nDisplays correctly if you select it:\r\n\r\nhttps://registry.datasette.io/registry-7d4f81f/tables?_facet=is_hidden&is_hidden=0\r\n\r\n![2018-06-20 at 9 06 am](https://user-images.githubusercontent.com/9599/41670471-3e61e486-7469-11e8-8710-5da90ef65787.png)\r\n", "reactions": {"url": "https://api.github.com/repos/simonw/datasette/issues/318/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/simonw/datasette/issues/318/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/simonw/datasette/issues/317", "repository_url": "https://api.github.com/repos/simonw/datasette", "labels_url": "https://api.github.com/repos/simonw/datasette/issues/317/labels{/name}", "comments_url": "https://api.github.com/repos/simonw/datasette/issues/317/comments", "events_url": "https://api.github.com/repos/simonw/datasette/issues/317/events", "html_url": "https://github.com/simonw/datasette/issues/317", "id": 333326107, "node_id": "MDU6SXNzdWUzMzMzMjYxMDc=", "number": 317, "title": "Travis CI fails to upload new releases to PyPI", "user": {"login": "simonw", "id": 9599, "node_id": "MDQ6VXNlcjk1OTk=", "avatar_url": "https://avatars.githubusercontent.com/u/9599?v=4", "gravatar_id": "", "url": "https://api.github.com/users/simonw", "html_url": "https://github.com/simonw", "followers_url": "https://api.github.com/users/simonw/followers", "following_url": "https://api.github.com/users/simonw/following{/other_user}", "gists_url": "https://api.github.com/users/simonw/gists{/gist_id}", "starred_url": "https://api.github.com/users/simonw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/simonw/subscriptions", "organizations_url": "https://api.github.com/users/simonw/orgs", "repos_url": "https://api.github.com/users/simonw/repos", "events_url": "https://api.github.com/users/simonw/events{/privacy}", "received_events_url": "https://api.github.com/users/simonw/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 727708732, "node_id": "MDU6TGFiZWw3Mjc3MDg3MzI=", "url": "https://api.github.com/repos/simonw/datasette/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/simonw/datasette/milestones/8", "html_url": "https://github.com/simonw/datasette/milestone/8", "labels_url": "https://api.github.com/repos/simonw/datasette/milestones/8/labels", "id": 3439337, "node_id": "MDk6TWlsZXN0b25lMzQzOTMzNw==", "number": 8, "title": "0.23.1", "description": "Bugfix release for 0.23. Shipped: https://pypi.org/project/datasette/0.23.1/", "creator": {"login": "simonw", "id": 9599, "node_id": "MDQ6VXNlcjk1OTk=", "avatar_url": "https://avatars.githubusercontent.com/u/9599?v=4", "gravatar_id": "", "url": "https://api.github.com/users/simonw", "html_url": "https://github.com/simonw", "followers_url": "https://api.github.com/users/simonw/followers", "following_url": "https://api.github.com/users/simonw/following{/other_user}", "gists_url": "https://api.github.com/users/simonw/gists{/gist_id}", "starred_url": "https://api.github.com/users/simonw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/simonw/subscriptions", "organizations_url": "https://api.github.com/users/simonw/orgs", "repos_url": "https://api.github.com/users/simonw/repos", "events_url": "https://api.github.com/users/simonw/events{/privacy}", "received_events_url": "https://api.github.com/users/simonw/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 7, "state": "closed", "created_at": "2018-06-20T17:04:16Z", "updated_at": "2018-06-21T15:47:49Z", "due_on": null, "closed_at": "2018-06-21T15:47:15Z"}, "comments": 2, "created_at": "2018-06-18T15:44:26Z", "updated_at": "2018-06-21T15:45:47Z", "closed_at": "2018-06-21T15:45:47Z", "author_association": "OWNER", "active_lock_reason": null, "body": "https://travis-ci.org/simonw/datasette/jobs/393684139\r\n\r\n```\r\n...\r\nremoving build/bdist.linux-x86_64/wheel\r\nUploading distributions to https://upload.pypi.org/legacy/\r\nUploading datasette-0.23-py3-none-any.whl\r\n100%|\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588| 201k/201k [00:00<00:00, 1.02MB/s]\r\nHTTPError: 403 Client Error: Invalid or non-existent authentication information. for url: https://upload.pypi.org/legacy/\r\n```", "reactions": {"url": "https://api.github.com/repos/simonw/datasette/issues/317/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/simonw/datasette/issues/317/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/simonw/datasette/issues/314", "repository_url": "https://api.github.com/repos/simonw/datasette", "labels_url": "https://api.github.com/repos/simonw/datasette/issues/314/labels{/name}", "comments_url": "https://api.github.com/repos/simonw/datasette/issues/314/comments", "events_url": "https://api.github.com/repos/simonw/datasette/issues/314/events", "html_url": "https://github.com/simonw/datasette/issues/314", "id": 333096176, "node_id": "MDU6SXNzdWUzMzMwOTYxNzY=", "number": 314, "title": "HTML table does not correctly display entirely blank rows", "user": {"login": "simonw", "id": 9599, "node_id": "MDQ6VXNlcjk1OTk=", "avatar_url": "https://avatars.githubusercontent.com/u/9599?v=4", "gravatar_id": "", "url": "https://api.github.com/users/simonw", "html_url": "https://github.com/simonw", "followers_url": "https://api.github.com/users/simonw/followers", "following_url": "https://api.github.com/users/simonw/following{/other_user}", "gists_url": "https://api.github.com/users/simonw/gists{/gist_id}", "starred_url": "https://api.github.com/users/simonw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/simonw/subscriptions", "organizations_url": "https://api.github.com/users/simonw/orgs", "repos_url": "https://api.github.com/users/simonw/repos", "events_url": "https://api.github.com/users/simonw/events{/privacy}", "received_events_url": "https://api.github.com/users/simonw/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 727708732, "node_id": "MDU6TGFiZWw3Mjc3MDg3MzI=", "url": "https://api.github.com/repos/simonw/datasette/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}, {"id": 967420289, "node_id": "MDU6TGFiZWw5Njc0MjAyODk=", "url": "https://api.github.com/repos/simonw/datasette/labels/minor", "name": "minor", "color": "fcd0c4", "default": false, "description": "Minor bugs (not high priority)"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/simonw/datasette/milestones/8", "html_url": "https://github.com/simonw/datasette/milestone/8", "labels_url": "https://api.github.com/repos/simonw/datasette/milestones/8/labels", "id": 3439337, "node_id": "MDk6TWlsZXN0b25lMzQzOTMzNw==", "number": 8, "title": "0.23.1", "description": "Bugfix release for 0.23. Shipped: https://pypi.org/project/datasette/0.23.1/", "creator": {"login": "simonw", "id": 9599, "node_id": "MDQ6VXNlcjk1OTk=", "avatar_url": "https://avatars.githubusercontent.com/u/9599?v=4", "gravatar_id": "", "url": "https://api.github.com/users/simonw", "html_url": "https://github.com/simonw", "followers_url": "https://api.github.com/users/simonw/followers", "following_url": "https://api.github.com/users/simonw/following{/other_user}", "gists_url": "https://api.github.com/users/simonw/gists{/gist_id}", "starred_url": "https://api.github.com/users/simonw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/simonw/subscriptions", "organizations_url": "https://api.github.com/users/simonw/orgs", "repos_url": "https://api.github.com/users/simonw/repos", "events_url": "https://api.github.com/users/simonw/events{/privacy}", "received_events_url": "https://api.github.com/users/simonw/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 7, "state": "closed", "created_at": "2018-06-20T17:04:16Z", "updated_at": "2018-06-21T15:47:49Z", "due_on": null, "closed_at": "2018-06-21T15:47:15Z"}, "comments": 1, "created_at": "2018-06-17T21:58:06Z", "updated_at": "2018-06-21T16:04:59Z", "closed_at": "2018-06-21T15:26:26Z", "author_association": "OWNER", "active_lock_reason": null, "body": "https://958b75c.datasette.io/fixtures-35b6eb6/simple_view\r\n\r\n![2018-06-17 at 2 56 pm](https://user-images.githubusercontent.com/9599/41512541-b52e90be-723e-11e8-95c9-7d091738d5cc.png)\r\n\r\nhttps://958b75c.datasette.io/fixtures-35b6eb6/simple_view.json shows the underlying data:\r\n\r\n```\r\n  \"rows\": [\r\n    [\r\n      \"hello\",\r\n      \"HELLO\"\r\n    ],\r\n    [\r\n      \"world\",\r\n      \"WORLD\"\r\n    ],\r\n    [\r\n      \"\",\r\n      \"\"\r\n    ]\r\n  ]\r\n```", "reactions": {"url": "https://api.github.com/repos/simonw/datasette/issues/314/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/simonw/datasette/issues/314/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/simonw/datasette/issues/310", "repository_url": "https://api.github.com/repos/simonw/datasette", "labels_url": "https://api.github.com/repos/simonw/datasette/issues/310/labels{/name}", "comments_url": "https://api.github.com/repos/simonw/datasette/issues/310/comments", "events_url": "https://api.github.com/repos/simonw/datasette/issues/310/events", "html_url": "https://github.com/simonw/datasette/issues/310", "id": 332830309, "node_id": "MDU6SXNzdWUzMzI4MzAzMDk=", "number": 310, "title": "datasette publish now is broken in master", "user": {"login": "simonw", "id": 9599, "node_id": "MDQ6VXNlcjk1OTk=", "avatar_url": "https://avatars.githubusercontent.com/u/9599?v=4", "gravatar_id": "", "url": "https://api.github.com/users/simonw", "html_url": "https://github.com/simonw", "followers_url": "https://api.github.com/users/simonw/followers", "following_url": "https://api.github.com/users/simonw/following{/other_user}", "gists_url": "https://api.github.com/users/simonw/gists{/gist_id}", "starred_url": "https://api.github.com/users/simonw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/simonw/subscriptions", "organizations_url": "https://api.github.com/users/simonw/orgs", "repos_url": "https://api.github.com/users/simonw/repos", "events_url": "https://api.github.com/users/simonw/events{/privacy}", "received_events_url": "https://api.github.com/users/simonw/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 727708732, "node_id": "MDU6TGFiZWw3Mjc3MDg3MzI=", "url": "https://api.github.com/repos/simonw/datasette/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2018-06-15T16:01:14Z", "updated_at": "2018-06-16T16:29:50Z", "closed_at": "2018-06-16T16:29:50Z", "author_association": "OWNER", "active_lock_reason": null, "body": "```\r\n>     gcc -pthread -Wno-unused-result -Wsign-compare -DNDEBUG -g -fwrapv -O3 -Wall -Wstrict-prototypes -fPIC -I/usr/local/include/python3.6m -c httptools/parser/parser.c -o build/temp.linux-x86_64-3.6/httptools/parser/parser.o -O2\r\n>     unable to execute 'gcc': No such file or directory\r\n>     error: command 'gcc' failed with exit status 1\r\n>     \r\n>     ----------------------------------------\r\n> Command \"/usr/local/bin/python -u -c \"import setuptools, tokenize;__file__='/tmp/pip-install-s73273rj/httptools/setup.py';f=getattr(tokenize, 'open', open)(__file__);code=f.read().replace('\\r\\n', '\\n');f.close();exec(compile(code, __file__, 'exec'))\" install --record /tmp/pip-record-yha7dxqq/install-record.txt --single-version-externally-managed --compile\" failed with error code 1 in /tmp/pip-install-s73273rj/httptools/\r\n```\r\n\r\nTurns out the `python-slim` base image I introduced in b18e4515855c3f1eeca3dfcccdbb6df05869084a doesn't include gcc: https://github.com/docker-library/python/issues/60#issuecomment-134322383", "reactions": {"url": "https://api.github.com/repos/simonw/datasette/issues/310/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/simonw/datasette/issues/310/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/simonw/datasette/issues/302", "repository_url": "https://api.github.com/repos/simonw/datasette", "labels_url": "https://api.github.com/repos/simonw/datasette/issues/302/labels{/name}", "comments_url": "https://api.github.com/repos/simonw/datasette/issues/302/comments", "events_url": "https://api.github.com/repos/simonw/datasette/issues/302/events", "html_url": "https://github.com/simonw/datasette/issues/302", "id": 328171513, "node_id": "MDU6SXNzdWUzMjgxNzE1MTM=", "number": 302, "title": "test-2.3.sqlite database filename throws a 404", "user": {"login": "simonw", "id": 9599, "node_id": "MDQ6VXNlcjk1OTk=", "avatar_url": "https://avatars.githubusercontent.com/u/9599?v=4", "gravatar_id": "", "url": "https://api.github.com/users/simonw", "html_url": "https://github.com/simonw", "followers_url": "https://api.github.com/users/simonw/followers", "following_url": "https://api.github.com/users/simonw/following{/other_user}", "gists_url": "https://api.github.com/users/simonw/gists{/gist_id}", "starred_url": "https://api.github.com/users/simonw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/simonw/subscriptions", "organizations_url": "https://api.github.com/users/simonw/orgs", "repos_url": "https://api.github.com/users/simonw/repos", "events_url": "https://api.github.com/users/simonw/events{/privacy}", "received_events_url": "https://api.github.com/users/simonw/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 727708732, "node_id": "MDU6TGFiZWw3Mjc3MDg3MzI=", "url": "https://api.github.com/repos/simonw/datasette/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/simonw/datasette/milestones/8", "html_url": "https://github.com/simonw/datasette/milestone/8", "labels_url": "https://api.github.com/repos/simonw/datasette/milestones/8/labels", "id": 3439337, "node_id": "MDk6TWlsZXN0b25lMzQzOTMzNw==", "number": 8, "title": "0.23.1", "description": "Bugfix release for 0.23. Shipped: https://pypi.org/project/datasette/0.23.1/", "creator": {"login": "simonw", "id": 9599, "node_id": "MDQ6VXNlcjk1OTk=", "avatar_url": "https://avatars.githubusercontent.com/u/9599?v=4", "gravatar_id": "", "url": "https://api.github.com/users/simonw", "html_url": "https://github.com/simonw", "followers_url": "https://api.github.com/users/simonw/followers", "following_url": "https://api.github.com/users/simonw/following{/other_user}", "gists_url": "https://api.github.com/users/simonw/gists{/gist_id}", "starred_url": "https://api.github.com/users/simonw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/simonw/subscriptions", "organizations_url": "https://api.github.com/users/simonw/orgs", "repos_url": "https://api.github.com/users/simonw/repos", "events_url": "https://api.github.com/users/simonw/events{/privacy}", "received_events_url": "https://api.github.com/users/simonw/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 7, "state": "closed", "created_at": "2018-06-20T17:04:16Z", "updated_at": "2018-06-21T15:47:49Z", "due_on": null, "closed_at": "2018-06-21T15:47:15Z"}, "comments": 2, "created_at": "2018-05-31T14:50:58Z", "updated_at": "2018-06-21T15:21:17Z", "closed_at": "2018-06-21T15:21:16Z", "author_association": "OWNER", "active_lock_reason": null, "body": "The following almost works:\r\n\r\n    datasette test-2.3.sqlite\r\n\r\nhttp://127.0.0.1:8001test-2.3-c88bc35/HighWays loads OK, but http://127.0.0.1:8001test-2.3-c88bc35 throws a 404:\r\n\r\n![2018-05-31 at 7 50 am](https://user-images.githubusercontent.com/9599/40789434-447ae934-64a7-11e8-9a07-4eeba87147d5.png)\r\n", "reactions": {"url": "https://api.github.com/repos/simonw/datasette/issues/302/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/simonw/datasette/issues/302/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/simonw/datasette/issues/282", "repository_url": "https://api.github.com/repos/simonw/datasette", "labels_url": "https://api.github.com/repos/simonw/datasette/issues/282/labels{/name}", "comments_url": "https://api.github.com/repos/simonw/datasette/issues/282/comments", "events_url": "https://api.github.com/repos/simonw/datasette/issues/282/events", "html_url": "https://github.com/simonw/datasette/issues/282", "id": 325705981, "node_id": "MDU6SXNzdWUzMjU3MDU5ODE=", "number": 282, "title": "Faceting breaks pagination", "user": {"login": "simonw", "id": 9599, "node_id": "MDQ6VXNlcjk1OTk=", "avatar_url": "https://avatars.githubusercontent.com/u/9599?v=4", "gravatar_id": "", "url": "https://api.github.com/users/simonw", "html_url": "https://github.com/simonw", "followers_url": "https://api.github.com/users/simonw/followers", "following_url": "https://api.github.com/users/simonw/following{/other_user}", "gists_url": "https://api.github.com/users/simonw/gists{/gist_id}", "starred_url": "https://api.github.com/users/simonw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/simonw/subscriptions", "organizations_url": "https://api.github.com/users/simonw/orgs", "repos_url": "https://api.github.com/users/simonw/repos", "events_url": "https://api.github.com/users/simonw/events{/privacy}", "received_events_url": "https://api.github.com/users/simonw/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 727708732, "node_id": "MDU6TGFiZWw3Mjc3MDg3MzI=", "url": "https://api.github.com/repos/simonw/datasette/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2018-05-23T13:29:47Z", "updated_at": "2018-05-23T13:53:39Z", "closed_at": "2018-05-23T13:42:07Z", "author_association": "OWNER", "active_lock_reason": null, "body": "e.g. on https://fivethirtyeight.datasettes.com/fivethirtyeight-5de27e3/nba-elo%2Fnbaallelo?_facet=lg_id#facet-lg_id - click the \"next page\" link: https://fivethirtyeight.datasettes.com/fivethirtyeight-5de27e3/nba-elo%2Fnbaallelo?_facet=lg_id&_next=100\r\n\r\n    Invalid SQL: near \"and\": syntax error", "reactions": {"url": "https://api.github.com/repos/simonw/datasette/issues/282/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/simonw/datasette/issues/282/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/simonw/datasette/issues/230", "repository_url": "https://api.github.com/repos/simonw/datasette", "labels_url": "https://api.github.com/repos/simonw/datasette/issues/230/labels{/name}", "comments_url": "https://api.github.com/repos/simonw/datasette/issues/230/comments", "events_url": "https://api.github.com/repos/simonw/datasette/issues/230/events", "html_url": "https://github.com/simonw/datasette/issues/230", "id": 316128955, "node_id": "MDU6SXNzdWUzMTYxMjg5NTU=", "number": 230, "title": "Setting page size AND max returned rows to 1000 doesn't seem to work", "user": {"login": "simonw", "id": 9599, "node_id": "MDQ6VXNlcjk1OTk=", "avatar_url": "https://avatars.githubusercontent.com/u/9599?v=4", "gravatar_id": "", "url": "https://api.github.com/users/simonw", "html_url": "https://github.com/simonw", "followers_url": "https://api.github.com/users/simonw/followers", "following_url": "https://api.github.com/users/simonw/following{/other_user}", "gists_url": "https://api.github.com/users/simonw/gists{/gist_id}", "starred_url": "https://api.github.com/users/simonw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/simonw/subscriptions", "organizations_url": "https://api.github.com/users/simonw/orgs", "repos_url": "https://api.github.com/users/simonw/repos", "events_url": "https://api.github.com/users/simonw/events{/privacy}", "received_events_url": "https://api.github.com/users/simonw/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 727708732, "node_id": "MDU6TGFiZWw3Mjc3MDg3MzI=", "url": "https://api.github.com/repos/simonw/datasette/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}, {"id": 729585263, "node_id": "MDU6TGFiZWw3Mjk1ODUyNjM=", "url": "https://api.github.com/repos/simonw/datasette/labels/small", "name": "small", "color": "a7f9b7", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2018-04-20T05:05:11Z", "updated_at": "2018-04-26T04:04:25Z", "closed_at": "2018-04-26T04:04:25Z", "author_association": "OWNER", "active_lock_reason": null, "body": "It appears that if the two settings are the same Datasette fails to return any results, probably because of the trick where we try to fetch 1001 rows so we know if there's a next page.", "reactions": {"url": "https://api.github.com/repos/simonw/datasette/issues/230/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/simonw/datasette/issues/230/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/simonw/datasette/issues/216", "repository_url": "https://api.github.com/repos/simonw/datasette", "labels_url": "https://api.github.com/repos/simonw/datasette/issues/216/labels{/name}", "comments_url": "https://api.github.com/repos/simonw/datasette/issues/216/comments", "events_url": "https://api.github.com/repos/simonw/datasette/issues/216/events", "html_url": "https://github.com/simonw/datasette/issues/216", "id": 314665147, "node_id": "MDU6SXNzdWUzMTQ2NjUxNDc=", "number": 216, "title": "Bug: Sort by column with NULL in next_page URL", "user": {"login": "carlmjohnson", "id": 222245, "node_id": "MDQ6VXNlcjIyMjI0NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/222245?v=4", "gravatar_id": "", "url": "https://api.github.com/users/carlmjohnson", "html_url": "https://github.com/carlmjohnson", "followers_url": "https://api.github.com/users/carlmjohnson/followers", "following_url": "https://api.github.com/users/carlmjohnson/following{/other_user}", "gists_url": "https://api.github.com/users/carlmjohnson/gists{/gist_id}", "starred_url": "https://api.github.com/users/carlmjohnson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/carlmjohnson/subscriptions", "organizations_url": "https://api.github.com/users/carlmjohnson/orgs", "repos_url": "https://api.github.com/users/carlmjohnson/repos", "events_url": "https://api.github.com/users/carlmjohnson/events{/privacy}", "received_events_url": "https://api.github.com/users/carlmjohnson/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 727708732, "node_id": "MDU6TGFiZWw3Mjc3MDg3MzI=", "url": "https://api.github.com/repos/simonw/datasette/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 15, "created_at": "2018-04-16T14:03:18Z", "updated_at": "2018-04-17T01:45:24Z", "closed_at": "2018-04-17T01:45:24Z", "author_association": "NONE", "active_lock_reason": null, "body": "Copy-pasting from https://github.com/simonw/datasette/issues/189#issuecomment-381429213, since that issue is closed:\r\n\r\nI think I found a bug. I tried to sort by middle initial in my salaries set, and many middle initials are null. The `next_url` gets set by Datasette to:\r\n\r\nhttp://localhost:8001/salaries-d3a5631/2017+Maryland+state+salaries?_next=None%2C391&_sort=middle_initial\r\n\r\nBut then None is interpreted literally and it tries to find a name with the middle initial \"None\" and ends up skipping ahead to O on page 2.\r\n", "reactions": {"url": "https://api.github.com/repos/simonw/datasette/issues/216/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/simonw/datasette/issues/216/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/simonw/datasette/issues/190", "repository_url": "https://api.github.com/repos/simonw/datasette", "labels_url": "https://api.github.com/repos/simonw/datasette/issues/190/labels{/name}", "comments_url": "https://api.github.com/repos/simonw/datasette/issues/190/comments", "events_url": "https://api.github.com/repos/simonw/datasette/issues/190/events", "html_url": "https://github.com/simonw/datasette/issues/190", "id": 309558826, "node_id": "MDU6SXNzdWUzMDk1NTg4MjY=", "number": 190, "title": "Keyset pagination doesn't work correctly for compound primary keys", "user": {"login": "simonw", "id": 9599, "node_id": "MDQ6VXNlcjk1OTk=", "avatar_url": "https://avatars.githubusercontent.com/u/9599?v=4", "gravatar_id": "", "url": "https://api.github.com/users/simonw", "html_url": "https://github.com/simonw", "followers_url": "https://api.github.com/users/simonw/followers", "following_url": "https://api.github.com/users/simonw/following{/other_user}", "gists_url": "https://api.github.com/users/simonw/gists{/gist_id}", "starred_url": "https://api.github.com/users/simonw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/simonw/subscriptions", "organizations_url": "https://api.github.com/users/simonw/orgs", "repos_url": "https://api.github.com/users/simonw/repos", "events_url": "https://api.github.com/users/simonw/events{/privacy}", "received_events_url": "https://api.github.com/users/simonw/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 727708732, "node_id": "MDU6TGFiZWw3Mjc3MDg3MzI=", "url": "https://api.github.com/repos/simonw/datasette/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 7, "created_at": "2018-03-28T22:45:06Z", "updated_at": "2018-03-30T06:31:15Z", "closed_at": "2018-03-30T06:26:28Z", "author_association": "OWNER", "active_lock_reason": null, "body": "Consider https://datasette-issue-190-compound-pks.now.sh/compound-pks-9aafe8f/compound_primary_key\r\n\r\n![2018-03-28 at 3 47 pm](https://user-images.githubusercontent.com/9599/38060388-56da86dc-329f-11e8-9f20-5576153ad55c.png)\r\n\r\nThe next= link is to `d,v`:\r\n\r\nhttps://datasette-issue-190-compound-pks.now.sh/compound-pks-9aafe8f/compound_primary_key?_next=d%2Cv\r\n\r\nBut that page starts with:\r\n\r\n![2018-03-28 at 3 48 pm](https://user-images.githubusercontent.com/9599/38060402-6b0f5984-329f-11e8-85b8-44a666c4ee71.png)\r\n\r\nThe next key in the sequence should be `d,w`. Also we should return the full a-z of the ones that start with the letter e - in this example we only return `e-w`, `e-x`, `e-y` and `e-z`", "reactions": {"url": "https://api.github.com/repos/simonw/datasette/issues/190/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/simonw/datasette/issues/190/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/simonw/datasette/issues/184", "repository_url": "https://api.github.com/repos/simonw/datasette", "labels_url": "https://api.github.com/repos/simonw/datasette/issues/184/labels{/name}", "comments_url": "https://api.github.com/repos/simonw/datasette/issues/184/comments", "events_url": "https://api.github.com/repos/simonw/datasette/issues/184/events", "html_url": "https://github.com/simonw/datasette/issues/184", "id": 292011379, "node_id": "MDU6SXNzdWUyOTIwMTEzNzk=", "number": 184, "title": "500 from missing table name", "user": {"login": "carlmjohnson", "id": 222245, "node_id": "MDQ6VXNlcjIyMjI0NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/222245?v=4", "gravatar_id": "", "url": "https://api.github.com/users/carlmjohnson", "html_url": "https://github.com/carlmjohnson", "followers_url": "https://api.github.com/users/carlmjohnson/followers", "following_url": "https://api.github.com/users/carlmjohnson/following{/other_user}", "gists_url": "https://api.github.com/users/carlmjohnson/gists{/gist_id}", "starred_url": "https://api.github.com/users/carlmjohnson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/carlmjohnson/subscriptions", "organizations_url": "https://api.github.com/users/carlmjohnson/orgs", "repos_url": "https://api.github.com/users/carlmjohnson/repos", "events_url": "https://api.github.com/users/carlmjohnson/events{/privacy}", "received_events_url": "https://api.github.com/users/carlmjohnson/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 727708732, "node_id": "MDU6TGFiZWw3Mjc3MDg3MzI=", "url": "https://api.github.com/repos/simonw/datasette/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}, {"id": 729585263, "node_id": "MDU6TGFiZWw3Mjk1ODUyNjM=", "url": "https://api.github.com/repos/simonw/datasette/labels/small", "name": "small", "color": "a7f9b7", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2018-01-26T19:46:45Z", "updated_at": "2019-05-21T16:17:29Z", "closed_at": "2018-04-13T18:18:59Z", "author_association": "NONE", "active_lock_reason": null, "body": "https://github.com/simonw/datasette/blob/56623e48da5412b25fb39cc26b9c743b684dd968/datasette/app.py#L517-L519 throws an error if it gets an empty list back. Simplest solution is to write a helper func that just says \r\n\r\n```python\r\nresult = list(await self.execute(name, sql, params)\r\nif result:\r\n    return result[0][0]\r\n```\r\n\r\nand use it anywhere `[0][0]` is now.", "reactions": {"url": "https://api.github.com/repos/simonw/datasette/issues/184/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/simonw/datasette/issues/184/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/simonw/datasette/issues/167", "repository_url": "https://api.github.com/repos/simonw/datasette", "labels_url": "https://api.github.com/repos/simonw/datasette/issues/167/labels{/name}", "comments_url": "https://api.github.com/repos/simonw/datasette/issues/167/comments", "events_url": "https://api.github.com/repos/simonw/datasette/issues/167/events", "html_url": "https://github.com/simonw/datasette/issues/167", "id": 280315352, "node_id": "MDU6SXNzdWUyODAzMTUzNTI=", "number": 167, "title": "Nasty bug: last column not being correctly displayed", "user": {"login": "simonw", "id": 9599, "node_id": "MDQ6VXNlcjk1OTk=", "avatar_url": "https://avatars.githubusercontent.com/u/9599?v=4", "gravatar_id": "", "url": "https://api.github.com/users/simonw", "html_url": "https://github.com/simonw", "followers_url": "https://api.github.com/users/simonw/followers", "following_url": "https://api.github.com/users/simonw/following{/other_user}", "gists_url": "https://api.github.com/users/simonw/gists{/gist_id}", "starred_url": "https://api.github.com/users/simonw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/simonw/subscriptions", "organizations_url": "https://api.github.com/users/simonw/orgs", "repos_url": "https://api.github.com/users/simonw/repos", "events_url": "https://api.github.com/users/simonw/events{/privacy}", "received_events_url": "https://api.github.com/users/simonw/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 727708732, "node_id": "MDU6TGFiZWw3Mjc3MDg3MzI=", "url": "https://api.github.com/repos/simonw/datasette/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/simonw/datasette/milestones/6", "html_url": "https://github.com/simonw/datasette/milestone/6", "labels_url": "https://api.github.com/repos/simonw/datasette/milestones/6/labels", "id": 2949431, "node_id": "MDk6TWlsZXN0b25lMjk0OTQzMQ==", "number": 6, "title": "Custom templates edition", "description": "Ability to fully customize the HTML templates used to display datasette data.", "creator": {"login": "simonw", "id": 9599, "node_id": "MDQ6VXNlcjk1OTk=", "avatar_url": "https://avatars.githubusercontent.com/u/9599?v=4", "gravatar_id": "", "url": "https://api.github.com/users/simonw", "html_url": "https://github.com/simonw", "followers_url": "https://api.github.com/users/simonw/followers", "following_url": "https://api.github.com/users/simonw/following{/other_user}", "gists_url": "https://api.github.com/users/simonw/gists{/gist_id}", "starred_url": "https://api.github.com/users/simonw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/simonw/subscriptions", "organizations_url": "https://api.github.com/users/simonw/orgs", "repos_url": "https://api.github.com/users/simonw/repos", "events_url": "https://api.github.com/users/simonw/events{/privacy}", "received_events_url": "https://api.github.com/users/simonw/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 21, "state": "closed", "created_at": "2017-11-30T16:41:59Z", "updated_at": "2017-12-10T02:05:05Z", "due_on": null, "closed_at": "2017-12-10T02:05:05Z"}, "comments": 6, "created_at": "2017-12-07T23:23:46Z", "updated_at": "2017-12-10T01:00:21Z", "closed_at": "2017-12-10T01:00:20Z", "author_association": "OWNER", "active_lock_reason": null, "body": "e.g. https://datasette-bwnojrhmmg.now.sh/dk3-bde9a9a/dk?source__contains=http\r\n\r\n![2017-12-07 at 3 22 pm](https://user-images.githubusercontent.com/9599/33743613-7ee97be0-db62-11e7-8e81-9b9ec69d93f0.png)\r\n\r\nThe JSON output shows that the column is there, but is being displayed incorrectly:\r\n\r\nhttps://datasette-bwnojrhmmg.now.sh/dk3-bde9a9a/dk.jsono?source__contains=http\r\n\r\n![2017-12-07 at 3 23 pm](https://user-images.githubusercontent.com/9599/33743645-9489b302-db62-11e7-898b-72e812e8855d.png)\r\n", "reactions": {"url": "https://api.github.com/repos/simonw/datasette/issues/167/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/simonw/datasette/issues/167/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/simonw/datasette/issues/162", "repository_url": "https://api.github.com/repos/simonw/datasette", "labels_url": "https://api.github.com/repos/simonw/datasette/issues/162/labels{/name}", "comments_url": "https://api.github.com/repos/simonw/datasette/issues/162/comments", "events_url": "https://api.github.com/repos/simonw/datasette/issues/162/events", "html_url": "https://github.com/simonw/datasette/issues/162", "id": 279199916, "node_id": "MDU6SXNzdWUyNzkxOTk5MTY=", "number": 162, "title": "Link should not show up in the column selection dropdowns", "user": {"login": "simonw", "id": 9599, "node_id": "MDQ6VXNlcjk1OTk=", "avatar_url": "https://avatars.githubusercontent.com/u/9599?v=4", "gravatar_id": "", "url": "https://api.github.com/users/simonw", "html_url": "https://github.com/simonw", "followers_url": "https://api.github.com/users/simonw/followers", "following_url": "https://api.github.com/users/simonw/following{/other_user}", "gists_url": "https://api.github.com/users/simonw/gists{/gist_id}", "starred_url": "https://api.github.com/users/simonw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/simonw/subscriptions", "organizations_url": "https://api.github.com/users/simonw/orgs", "repos_url": "https://api.github.com/users/simonw/repos", "events_url": "https://api.github.com/users/simonw/events{/privacy}", "received_events_url": "https://api.github.com/users/simonw/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 727708732, "node_id": "MDU6TGFiZWw3Mjc3MDg3MzI=", "url": "https://api.github.com/repos/simonw/datasette/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/simonw/datasette/milestones/6", "html_url": "https://github.com/simonw/datasette/milestone/6", "labels_url": "https://api.github.com/repos/simonw/datasette/milestones/6/labels", "id": 2949431, "node_id": "MDk6TWlsZXN0b25lMjk0OTQzMQ==", "number": 6, "title": "Custom templates edition", "description": "Ability to fully customize the HTML templates used to display datasette data.", "creator": {"login": "simonw", "id": 9599, "node_id": "MDQ6VXNlcjk1OTk=", "avatar_url": "https://avatars.githubusercontent.com/u/9599?v=4", "gravatar_id": "", "url": "https://api.github.com/users/simonw", "html_url": "https://github.com/simonw", "followers_url": "https://api.github.com/users/simonw/followers", "following_url": "https://api.github.com/users/simonw/following{/other_user}", "gists_url": "https://api.github.com/users/simonw/gists{/gist_id}", "starred_url": "https://api.github.com/users/simonw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/simonw/subscriptions", "organizations_url": "https://api.github.com/users/simonw/orgs", "repos_url": "https://api.github.com/users/simonw/repos", "events_url": "https://api.github.com/users/simonw/events{/privacy}", "received_events_url": "https://api.github.com/users/simonw/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 21, "state": "closed", "created_at": "2017-11-30T16:41:59Z", "updated_at": "2017-12-10T02:05:05Z", "due_on": null, "closed_at": "2017-12-10T02:05:05Z"}, "comments": 0, "created_at": "2017-12-05T00:19:04Z", "updated_at": "2017-12-07T05:05:58Z", "closed_at": "2017-12-07T05:05:58Z", "author_association": "OWNER", "active_lock_reason": null, "body": "e.g. on https://san-francisco.datasettes.com/food-trucks-921342f/Applicant\r\n\r\n<img width=\"729\" alt=\"food-trucks__applicant__131_rows\" src=\"https://user-images.githubusercontent.com/9599/33583381-ece18de6-d90e-11e7-8287-d5e4813dcb78.png\">\r\n\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/simonw/datasette/issues/162/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/simonw/datasette/issues/162/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/simonw/datasette/issues/155", "repository_url": "https://api.github.com/repos/simonw/datasette", "labels_url": "https://api.github.com/repos/simonw/datasette/issues/155/labels{/name}", "comments_url": "https://api.github.com/repos/simonw/datasette/issues/155/comments", "events_url": "https://api.github.com/repos/simonw/datasette/issues/155/events", "html_url": "https://github.com/simonw/datasette/issues/155", "id": 277589569, "node_id": "MDU6SXNzdWUyNzc1ODk1Njk=", "number": 155, "title": "A primary key column that has foreign key restriction associated won't rendering label column", "user": {"login": "wsxiaoys", "id": 388154, "node_id": "MDQ6VXNlcjM4ODE1NA==", "avatar_url": "https://avatars.githubusercontent.com/u/388154?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wsxiaoys", "html_url": "https://github.com/wsxiaoys", "followers_url": "https://api.github.com/users/wsxiaoys/followers", "following_url": "https://api.github.com/users/wsxiaoys/following{/other_user}", "gists_url": "https://api.github.com/users/wsxiaoys/gists{/gist_id}", "starred_url": "https://api.github.com/users/wsxiaoys/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wsxiaoys/subscriptions", "organizations_url": "https://api.github.com/users/wsxiaoys/orgs", "repos_url": "https://api.github.com/users/wsxiaoys/repos", "events_url": "https://api.github.com/users/wsxiaoys/events{/privacy}", "received_events_url": "https://api.github.com/users/wsxiaoys/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 727708732, "node_id": "MDU6TGFiZWw3Mjc3MDg3MzI=", "url": "https://api.github.com/repos/simonw/datasette/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/simonw/datasette/milestones/6", "html_url": "https://github.com/simonw/datasette/milestone/6", "labels_url": "https://api.github.com/repos/simonw/datasette/milestones/6/labels", "id": 2949431, "node_id": "MDk6TWlsZXN0b25lMjk0OTQzMQ==", "number": 6, "title": "Custom templates edition", "description": "Ability to fully customize the HTML templates used to display datasette data.", "creator": {"login": "simonw", "id": 9599, "node_id": "MDQ6VXNlcjk1OTk=", "avatar_url": "https://avatars.githubusercontent.com/u/9599?v=4", "gravatar_id": "", "url": "https://api.github.com/users/simonw", "html_url": "https://github.com/simonw", "followers_url": "https://api.github.com/users/simonw/followers", "following_url": "https://api.github.com/users/simonw/following{/other_user}", "gists_url": "https://api.github.com/users/simonw/gists{/gist_id}", "starred_url": "https://api.github.com/users/simonw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/simonw/subscriptions", "organizations_url": "https://api.github.com/users/simonw/orgs", "repos_url": "https://api.github.com/users/simonw/repos", "events_url": "https://api.github.com/users/simonw/events{/privacy}", "received_events_url": "https://api.github.com/users/simonw/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 21, "state": "closed", "created_at": "2017-11-30T16:41:59Z", "updated_at": "2017-12-10T02:05:05Z", "due_on": null, "closed_at": "2017-12-10T02:05:05Z"}, "comments": 4, "created_at": "2017-11-29T00:40:02Z", "updated_at": "2017-12-07T05:39:53Z", "closed_at": "2017-12-07T05:39:53Z", "author_association": "NONE", "active_lock_reason": null, "body": "", "reactions": {"url": "https://api.github.com/repos/simonw/datasette/issues/155/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/simonw/datasette/issues/155/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/simonw/datasette/issues/152", "repository_url": "https://api.github.com/repos/simonw/datasette", "labels_url": "https://api.github.com/repos/simonw/datasette/issues/152/labels{/name}", "comments_url": "https://api.github.com/repos/simonw/datasette/issues/152/comments", "events_url": "https://api.github.com/repos/simonw/datasette/issues/152/events", "html_url": "https://github.com/simonw/datasette/issues/152", "id": 276765070, "node_id": "MDU6SXNzdWUyNzY3NjUwNzA=", "number": 152, "title": "Incorrect display of rows page for tables with a primary key", "user": {"login": "simonw", "id": 9599, "node_id": "MDQ6VXNlcjk1OTk=", "avatar_url": "https://avatars.githubusercontent.com/u/9599?v=4", "gravatar_id": "", "url": "https://api.github.com/users/simonw", "html_url": "https://github.com/simonw", "followers_url": "https://api.github.com/users/simonw/followers", "following_url": "https://api.github.com/users/simonw/following{/other_user}", "gists_url": "https://api.github.com/users/simonw/gists{/gist_id}", "starred_url": "https://api.github.com/users/simonw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/simonw/subscriptions", "organizations_url": "https://api.github.com/users/simonw/orgs", "repos_url": "https://api.github.com/users/simonw/repos", "events_url": "https://api.github.com/users/simonw/events{/privacy}", "received_events_url": "https://api.github.com/users/simonw/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 727708732, "node_id": "MDU6TGFiZWw3Mjc3MDg3MzI=", "url": "https://api.github.com/repos/simonw/datasette/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/simonw/datasette/milestones/6", "html_url": "https://github.com/simonw/datasette/milestone/6", "labels_url": "https://api.github.com/repos/simonw/datasette/milestones/6/labels", "id": 2949431, "node_id": "MDk6TWlsZXN0b25lMjk0OTQzMQ==", "number": 6, "title": "Custom templates edition", "description": "Ability to fully customize the HTML templates used to display datasette data.", "creator": {"login": "simonw", "id": 9599, "node_id": "MDQ6VXNlcjk1OTk=", "avatar_url": "https://avatars.githubusercontent.com/u/9599?v=4", "gravatar_id": "", "url": "https://api.github.com/users/simonw", "html_url": "https://github.com/simonw", "followers_url": "https://api.github.com/users/simonw/followers", "following_url": "https://api.github.com/users/simonw/following{/other_user}", "gists_url": "https://api.github.com/users/simonw/gists{/gist_id}", "starred_url": "https://api.github.com/users/simonw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/simonw/subscriptions", "organizations_url": "https://api.github.com/users/simonw/orgs", "repos_url": "https://api.github.com/users/simonw/repos", "events_url": "https://api.github.com/users/simonw/events{/privacy}", "received_events_url": "https://api.github.com/users/simonw/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 21, "state": "closed", "created_at": "2017-11-30T16:41:59Z", "updated_at": "2017-12-10T02:05:05Z", "due_on": null, "closed_at": "2017-12-10T02:05:05Z"}, "comments": 0, "created_at": "2017-11-25T17:29:54Z", "updated_at": "2017-12-07T05:23:20Z", "closed_at": "2017-12-07T05:23:19Z", "author_association": "OWNER", "active_lock_reason": null, "body": "This is a regression. Here's the old version:\r\n\r\n<img width=\"420\" alt=\"parlgov__party_family\" src=\"https://user-images.githubusercontent.com/9599/33232903-031ef1a0-d1c3-11e7-94b4-10f9f0076b4f.png\">\r\n\r\nAnd here's the new, broken one:\r\n\r\nhttps://parlgov-xtxlddmtiz.now.sh/parlgov-25f9855/party_family/1\r\n\r\n<img width=\"420\" alt=\"parlgov__party_family\" src=\"https://user-images.githubusercontent.com/9599/33232908-12f885be-d1c3-11e7-97f1-cb420f2a5de4.png\">\r\n\r\nThe JSON output is the same for both - it's only the HTML representation that exhibits the bug.", "reactions": {"url": "https://api.github.com/repos/simonw/datasette/issues/152/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/simonw/datasette/issues/152/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/simonw/datasette/issues/135", "repository_url": "https://api.github.com/repos/simonw/datasette", "labels_url": "https://api.github.com/repos/simonw/datasette/issues/135/labels{/name}", "comments_url": "https://api.github.com/repos/simonw/datasette/issues/135/comments", "events_url": "https://api.github.com/repos/simonw/datasette/issues/135/events", "html_url": "https://github.com/simonw/datasette/issues/135", "id": 275179724, "node_id": "MDU6SXNzdWUyNzUxNzk3MjQ=", "number": 135, "title": "?_search=x should work if used directly against a FTS virtual table", "user": {"login": "simonw", "id": 9599, "node_id": "MDQ6VXNlcjk1OTk=", "avatar_url": "https://avatars.githubusercontent.com/u/9599?v=4", "gravatar_id": "", "url": "https://api.github.com/users/simonw", "html_url": "https://github.com/simonw", "followers_url": "https://api.github.com/users/simonw/followers", "following_url": "https://api.github.com/users/simonw/following{/other_user}", "gists_url": "https://api.github.com/users/simonw/gists{/gist_id}", "starred_url": "https://api.github.com/users/simonw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/simonw/subscriptions", "organizations_url": "https://api.github.com/users/simonw/orgs", "repos_url": "https://api.github.com/users/simonw/repos", "events_url": "https://api.github.com/users/simonw/events{/privacy}", "received_events_url": "https://api.github.com/users/simonw/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 727708732, "node_id": "MDU6TGFiZWw3Mjc3MDg3MzI=", "url": "https://api.github.com/repos/simonw/datasette/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/simonw/datasette/milestones/6", "html_url": "https://github.com/simonw/datasette/milestone/6", "labels_url": "https://api.github.com/repos/simonw/datasette/milestones/6/labels", "id": 2949431, "node_id": "MDk6TWlsZXN0b25lMjk0OTQzMQ==", "number": 6, "title": "Custom templates edition", "description": "Ability to fully customize the HTML templates used to display datasette data.", "creator": {"login": "simonw", "id": 9599, "node_id": "MDQ6VXNlcjk1OTk=", "avatar_url": "https://avatars.githubusercontent.com/u/9599?v=4", "gravatar_id": "", "url": "https://api.github.com/users/simonw", "html_url": "https://github.com/simonw", "followers_url": "https://api.github.com/users/simonw/followers", "following_url": "https://api.github.com/users/simonw/following{/other_user}", "gists_url": "https://api.github.com/users/simonw/gists{/gist_id}", "starred_url": "https://api.github.com/users/simonw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/simonw/subscriptions", "organizations_url": "https://api.github.com/users/simonw/orgs", "repos_url": "https://api.github.com/users/simonw/repos", "events_url": "https://api.github.com/users/simonw/events{/privacy}", "received_events_url": "https://api.github.com/users/simonw/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 21, "state": "closed", "created_at": "2017-11-30T16:41:59Z", "updated_at": "2017-12-10T02:05:05Z", "due_on": null, "closed_at": "2017-12-10T02:05:05Z"}, "comments": 3, "created_at": "2017-11-19T18:17:53Z", "updated_at": "2017-12-07T04:54:41Z", "closed_at": "2017-12-07T04:54:41Z", "author_association": "OWNER", "active_lock_reason": null, "body": "e.g. https://sf-trees.now.sh/sf-trees-ebc2ad9/Street_Tree_List_fts?_search=grove should work", "reactions": {"url": "https://api.github.com/repos/simonw/datasette/issues/135/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/simonw/datasette/issues/135/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/simonw/datasette/issues/113", "repository_url": "https://api.github.com/repos/simonw/datasette", "labels_url": "https://api.github.com/repos/simonw/datasette/issues/113/labels{/name}", "comments_url": "https://api.github.com/repos/simonw/datasette/issues/113/comments", "events_url": "https://api.github.com/repos/simonw/datasette/issues/113/events", "html_url": "https://github.com/simonw/datasette/issues/113", "id": 274662378, "node_id": "MDU6SXNzdWUyNzQ2NjIzNzg=", "number": 113, "title": "Fix the &nbsp; bug on the database custom SQL query view", "user": {"login": "simonw", "id": 9599, "node_id": "MDQ6VXNlcjk1OTk=", "avatar_url": "https://avatars.githubusercontent.com/u/9599?v=4", "gravatar_id": "", "url": "https://api.github.com/users/simonw", "html_url": "https://github.com/simonw", "followers_url": "https://api.github.com/users/simonw/followers", "following_url": "https://api.github.com/users/simonw/following{/other_user}", "gists_url": "https://api.github.com/users/simonw/gists{/gist_id}", "starred_url": "https://api.github.com/users/simonw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/simonw/subscriptions", "organizations_url": "https://api.github.com/users/simonw/orgs", "repos_url": "https://api.github.com/users/simonw/repos", "events_url": "https://api.github.com/users/simonw/events{/privacy}", "received_events_url": "https://api.github.com/users/simonw/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 727708732, "node_id": "MDU6TGFiZWw3Mjc3MDg3MzI=", "url": "https://api.github.com/repos/simonw/datasette/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}, {"id": 727708736, "node_id": "MDU6TGFiZWw3Mjc3MDg3MzY=", "url": "https://api.github.com/repos/simonw/datasette/labels/good%20first%20issue", "name": "good first issue", "color": "7057ff", "default": true, "description": null}, {"id": 729585263, "node_id": "MDU6TGFiZWw3Mjk1ODUyNjM=", "url": "https://api.github.com/repos/simonw/datasette/labels/small", "name": "small", "color": "a7f9b7", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/simonw/datasette/milestones/5", "html_url": "https://github.com/simonw/datasette/milestone/5", "labels_url": "https://api.github.com/repos/simonw/datasette/milestones/5/labels", "id": 2919870, "node_id": "MDk6TWlsZXN0b25lMjkxOTg3MA==", "number": 5, "title": "Foreign key edition", "description": "First version where you can browse via foreign key relationships.", "creator": {"login": "simonw", "id": 9599, "node_id": "MDQ6VXNlcjk1OTk=", "avatar_url": "https://avatars.githubusercontent.com/u/9599?v=4", "gravatar_id": "", "url": "https://api.github.com/users/simonw", "html_url": "https://github.com/simonw", "followers_url": "https://api.github.com/users/simonw/followers", "following_url": "https://api.github.com/users/simonw/following{/other_user}", "gists_url": "https://api.github.com/users/simonw/gists{/gist_id}", "starred_url": "https://api.github.com/users/simonw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/simonw/subscriptions", "organizations_url": "https://api.github.com/users/simonw/orgs", "repos_url": "https://api.github.com/users/simonw/repos", "events_url": "https://api.github.com/users/simonw/events{/privacy}", "received_events_url": "https://api.github.com/users/simonw/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 11, "state": "closed", "created_at": "2017-11-17T14:37:05Z", "updated_at": "2017-11-30T16:49:38Z", "due_on": null, "closed_at": "2017-11-30T16:49:38Z"}, "comments": 0, "created_at": "2017-11-16T21:01:26Z", "updated_at": "2017-11-17T15:40:52Z", "closed_at": "2017-11-17T15:40:52Z", "author_association": "OWNER", "active_lock_reason": null, "body": "https://sf-film-locations.now.sh/sf-film-locations-57704b7?sql=select+*+from+Film_Locations_in_San_Francisco\r\n\r\n<img width=\"852\" alt=\"sf-film-locations\" src=\"https://user-images.githubusercontent.com/9599/32915540-19bad984-cace-11e7-9ed3-bd7294891dc0.png\">\r\n\r\nThis is the bug I fixed in 01e0c3fa18cd0dd7970e208790ffd683a420c924 - but I only fixed it in one place.", "reactions": {"url": "https://api.github.com/repos/simonw/datasette/issues/113/reactions", "total_count": 1, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/simonw/datasette/issues/113/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/simonw/datasette/issues/84", "repository_url": "https://api.github.com/repos/simonw/datasette", "labels_url": "https://api.github.com/repos/simonw/datasette/issues/84/labels{/name}", "comments_url": "https://api.github.com/repos/simonw/datasette/issues/84/comments", "events_url": "https://api.github.com/repos/simonw/datasette/issues/84/events", "html_url": "https://github.com/simonw/datasette/issues/84", "id": 273660425, "node_id": "MDU6SXNzdWUyNzM2NjA0MjU=", "number": 84, "title": "datasette package --metadata does not work with a relative path", "user": {"login": "simonw", "id": 9599, "node_id": "MDQ6VXNlcjk1OTk=", "avatar_url": "https://avatars.githubusercontent.com/u/9599?v=4", "gravatar_id": "", "url": "https://api.github.com/users/simonw", "html_url": "https://github.com/simonw", "followers_url": "https://api.github.com/users/simonw/followers", "following_url": "https://api.github.com/users/simonw/following{/other_user}", "gists_url": "https://api.github.com/users/simonw/gists{/gist_id}", "starred_url": "https://api.github.com/users/simonw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/simonw/subscriptions", "organizations_url": "https://api.github.com/users/simonw/orgs", "repos_url": "https://api.github.com/users/simonw/repos", "events_url": "https://api.github.com/users/simonw/events{/privacy}", "received_events_url": "https://api.github.com/users/simonw/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 727708732, "node_id": "MDU6TGFiZWw3Mjc3MDg3MzI=", "url": "https://api.github.com/repos/simonw/datasette/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}, {"id": 727708736, "node_id": "MDU6TGFiZWw3Mjc3MDg3MzY=", "url": "https://api.github.com/repos/simonw/datasette/labels/good%20first%20issue", "name": "good first issue", "color": "7057ff", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2017-11-14T04:00:50Z", "updated_at": "2017-11-15T05:18:35Z", "closed_at": "2017-11-15T05:18:35Z", "author_association": "OWNER", "active_lock_reason": null, "body": "    $ datasette package ~/parlgov-db/parlgov.db --metadata=~/parlgov-db/parlgov.json\r\n    Usage: datasette package [OPTIONS] FILES...\r\n\r\n    Error: Invalid value for \"-m\" / \"--metadata\": Could not open file: ~/parlgov-db/parlgov.json: No such file or directory\r\n    \r\n    simonw-07542:~ simonw$ cd ~/parlgov-db/\r\n    simonw-07542:parlgov-db simonw$ datasette package ~/parlgov-db/parlgov.db --metadata=parlgov.json\r\n    Sending build context to Docker daemon   4.46MB\r\n    Step 1/7 : FROM python:3\r\n", "reactions": {"url": "https://api.github.com/repos/simonw/datasette/issues/84/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/simonw/datasette/issues/84/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/simonw/datasette/issues/83", "repository_url": "https://api.github.com/repos/simonw/datasette", "labels_url": "https://api.github.com/repos/simonw/datasette/issues/83/labels{/name}", "comments_url": "https://api.github.com/repos/simonw/datasette/issues/83/comments", "events_url": "https://api.github.com/repos/simonw/datasette/issues/83/events", "html_url": "https://github.com/simonw/datasette/issues/83", "id": 273626815, "node_id": "MDU6SXNzdWUyNzM2MjY4MTU=", "number": 83, "title": "Individual row view is broken", "user": {"login": "simonw", "id": 9599, "node_id": "MDQ6VXNlcjk1OTk=", "avatar_url": "https://avatars.githubusercontent.com/u/9599?v=4", "gravatar_id": "", "url": "https://api.github.com/users/simonw", "html_url": "https://github.com/simonw", "followers_url": "https://api.github.com/users/simonw/followers", "following_url": "https://api.github.com/users/simonw/following{/other_user}", "gists_url": "https://api.github.com/users/simonw/gists{/gist_id}", "starred_url": "https://api.github.com/users/simonw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/simonw/subscriptions", "organizations_url": "https://api.github.com/users/simonw/orgs", "repos_url": "https://api.github.com/users/simonw/repos", "events_url": "https://api.github.com/users/simonw/events{/privacy}", "received_events_url": "https://api.github.com/users/simonw/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 727708732, "node_id": "MDU6TGFiZWw3Mjc3MDg3MzI=", "url": "https://api.github.com/repos/simonw/datasette/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2017-11-14T00:29:11Z", "updated_at": "2017-11-14T00:45:34Z", "closed_at": "2017-11-14T00:45:34Z", "author_association": "OWNER", "active_lock_reason": null, "body": "https://parlgov.datasettes.com/parlgov-25f9855/viewcalc_parliament_composition/18\r\n\r\n<img width=\"822\" alt=\"cursor_and_localhost_8002_parlgov-25f9855_viewcalc_parliament_composition_18\" src=\"https://user-images.githubusercontent.com/9599/32756593-c439c71c-c88f-11e7-9243-b6e1b778c8fa.png\">\r\n", "reactions": {"url": "https://api.github.com/repos/simonw/datasette/issues/83/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/simonw/datasette/issues/83/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/simonw/datasette/issues/54", "repository_url": "https://api.github.com/repos/simonw/datasette", "labels_url": "https://api.github.com/repos/simonw/datasette/issues/54/labels{/name}", "comments_url": "https://api.github.com/repos/simonw/datasette/issues/54/comments", "events_url": "https://api.github.com/repos/simonw/datasette/issues/54/events", "html_url": "https://github.com/simonw/datasette/issues/54", "id": 273121803, "node_id": "MDU6SXNzdWUyNzMxMjE4MDM=", "number": 54, "title": "Views should not attempt to link to records / use rowids", "user": {"login": "simonw", "id": 9599, "node_id": "MDQ6VXNlcjk1OTk=", "avatar_url": "https://avatars.githubusercontent.com/u/9599?v=4", "gravatar_id": "", "url": "https://api.github.com/users/simonw", "html_url": "https://github.com/simonw", "followers_url": "https://api.github.com/users/simonw/followers", "following_url": "https://api.github.com/users/simonw/following{/other_user}", "gists_url": "https://api.github.com/users/simonw/gists{/gist_id}", "starred_url": "https://api.github.com/users/simonw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/simonw/subscriptions", "organizations_url": "https://api.github.com/users/simonw/orgs", "repos_url": "https://api.github.com/users/simonw/repos", "events_url": "https://api.github.com/users/simonw/events{/privacy}", "received_events_url": "https://api.github.com/users/simonw/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 727708732, "node_id": "MDU6TGFiZWw3Mjc3MDg3MzI=", "url": "https://api.github.com/repos/simonw/datasette/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}, {"id": 729585263, "node_id": "MDU6TGFiZWw3Mjk1ODUyNjM=", "url": "https://api.github.com/repos/simonw/datasette/labels/small", "name": "small", "color": "a7f9b7", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/simonw/datasette/milestones/1", "html_url": "https://github.com/simonw/datasette/milestone/1", "labels_url": "https://api.github.com/repos/simonw/datasette/milestones/1/labels", "id": 2857392, "node_id": "MDk6TWlsZXN0b25lMjg1NzM5Mg==", "number": 1, "title": "Ship first public release", "description": "Just addressable content, a full JSON API and pages that don\u2019t look terrible.", "creator": {"login": "simonw", "id": 9599, "node_id": "MDQ6VXNlcjk1OTk=", "avatar_url": "https://avatars.githubusercontent.com/u/9599?v=4", "gravatar_id": "", "url": "https://api.github.com/users/simonw", "html_url": "https://github.com/simonw", "followers_url": "https://api.github.com/users/simonw/followers", "following_url": "https://api.github.com/users/simonw/following{/other_user}", "gists_url": "https://api.github.com/users/simonw/gists{/gist_id}", "starred_url": "https://api.github.com/users/simonw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/simonw/subscriptions", "organizations_url": "https://api.github.com/users/simonw/orgs", "repos_url": "https://api.github.com/users/simonw/repos", "events_url": "https://api.github.com/users/simonw/events{/privacy}", "received_events_url": "https://api.github.com/users/simonw/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 49, "state": "closed", "created_at": "2017-10-23T01:24:24Z", "updated_at": "2019-07-07T20:31:25Z", "due_on": "2017-11-13T08:00:00Z", "closed_at": "2017-11-14T08:24:21Z"}, "comments": 1, "created_at": "2017-11-11T05:44:54Z", "updated_at": "2017-11-12T21:29:42Z", "closed_at": "2017-11-12T21:29:33Z", "author_association": "OWNER", "active_lock_reason": null, "body": "http://localhost:8001/parlgov-development-25f9855/view_variable\r\n\r\n<img width=\"837\" alt=\"parlgov-development__view_variable\" src=\"https://user-images.githubusercontent.com/9599/32686757-5b40f6a8-c660-11e7-88de-5e8dfb12ccf1.png\">", "reactions": {"url": "https://api.github.com/repos/simonw/datasette/issues/54/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/simonw/datasette/issues/54/timeline", "performed_via_github_app": null, "state_reason": "completed"}]