[{"url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/1872", "repository_url": "https://api.github.com/repos/custom-components/alexa_media_player", "labels_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/1872/labels{/name}", "comments_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/1872/comments", "events_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/1872/events", "html_url": "https://github.com/custom-components/alexa_media_player/issues/1872", "id": 1612107373, "node_id": "I_kwDOCFMb385gFs5t", "number": 1872, "title": "Unexpected error fetching alexa_media data: argument of type 'NoneType' is not iterable", "user": {"login": "codyc1515", "id": 50791984, "node_id": "MDQ6VXNlcjUwNzkxOTg0", "avatar_url": "https://avatars.githubusercontent.com/u/50791984?v=4", "gravatar_id": "", "url": "https://api.github.com/users/codyc1515", "html_url": "https://github.com/codyc1515", "followers_url": "https://api.github.com/users/codyc1515/followers", "following_url": "https://api.github.com/users/codyc1515/following{/other_user}", "gists_url": "https://api.github.com/users/codyc1515/gists{/gist_id}", "starred_url": "https://api.github.com/users/codyc1515/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/codyc1515/subscriptions", "organizations_url": "https://api.github.com/users/codyc1515/orgs", "repos_url": "https://api.github.com/users/codyc1515/repos", "events_url": "https://api.github.com/users/codyc1515/events{/privacy}", "received_events_url": "https://api.github.com/users/codyc1515/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 983327104, "node_id": "MDU6TGFiZWw5ODMzMjcxMDQ=", "url": "https://api.github.com/repos/custom-components/alexa_media_player/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-03-06T19:54:56Z", "updated_at": "2023-03-07T03:27:08Z", "closed_at": "2023-03-07T03:27:08Z", "author_association": "NONE", "active_lock_reason": null, "body": "**IMPORTANT: Please search the issues, including closed issues, and the [FAQ](https://github.com/custom-components/alexa_media_player/wiki/FAQ) before opening a new issue. The template is mandatory; failure to use it will result in issue closure.**\r\n\r\n**Describe the bug**\r\n\r\n```\r\nThis error originated from a custom integration.\r\n\r\nLogger: custom_components.alexa_media\r\nSource: custom_components/alexa_media/__init__.py:543\r\nIntegration: Alexa Media Player (documentation, issues)\r\nFirst occurred: 8:47:54 AM (1 occurrences)\r\nLast logged: 8:47:54 AM\r\n\r\nUnexpected error fetching alexa_media data: argument of type 'NoneType' is not iterable\r\nTraceback (most recent call last):\r\n  File \"/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py\", line 239, in _async_refresh\r\n    self.data = await self._async_update_data()\r\n  File \"/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py\", line 195, in _async_update_data\r\n    return await self.update_method()\r\n  File \"/config/custom_components/alexa_media/__init__.py\", line 543, in async_update_data\r\n    if \"bluetoothStates\" in bluetooth:\r\nTypeError: argument of type 'NoneType' is not iterable\r\n```\r\n\r\n**To Reproduce**\r\n\r\nUnclear. Seemed to just start happening recently.\r\n\r\n**Expected behavior**\r\n\r\nNo errors in logs.\r\n\r\n**Screenshots**\r\n\r\nn/a\r\n\r\n**System details**\r\n\r\n- Home-assistant (version): 2023.3.1\r\n- alexa_media (version from `const.py` or HA startup): 4.6.0\r\n- alexapy (version from `pip show alexapy` or HA startup): TBC\r\n- Amazon [2FA is enabled](https://github.com/custom-components/alexa_media_player/wiki/Configuration#enable-two-factor-authentication-for-your-amazon-account) (y/n). y\r\n\r\n**Logs**\r\nPlease provide [logs](https://github.com/custom-components/alexa_media_player/wiki/FAQ#how-do-i-enable-debug-logging-for-the-component). TBC\r\n\r\n**Additional context**\r\n\r\nn/a", "reactions": {"url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/1872/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/1872/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/1845", "repository_url": "https://api.github.com/repos/custom-components/alexa_media_player", "labels_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/1845/labels{/name}", "comments_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/1845/comments", "events_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/1845/events", "html_url": "https://github.com/custom-components/alexa_media_player/issues/1845", "id": 1552767242, "node_id": "I_kwDOCFMb385cjVkK", "number": 1845, "title": "Alexa Next Alarm/Timer/Notification sensors create large entries in the database", "user": {"login": "monotonus", "id": 51734505, "node_id": "MDQ6VXNlcjUxNzM0NTA1", "avatar_url": "https://avatars.githubusercontent.com/u/51734505?v=4", "gravatar_id": "", "url": "https://api.github.com/users/monotonus", "html_url": "https://github.com/monotonus", "followers_url": "https://api.github.com/users/monotonus/followers", "following_url": "https://api.github.com/users/monotonus/following{/other_user}", "gists_url": "https://api.github.com/users/monotonus/gists{/gist_id}", "starred_url": "https://api.github.com/users/monotonus/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/monotonus/subscriptions", "organizations_url": "https://api.github.com/users/monotonus/orgs", "repos_url": "https://api.github.com/users/monotonus/repos", "events_url": "https://api.github.com/users/monotonus/events{/privacy}", "received_events_url": "https://api.github.com/users/monotonus/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 983327104, "node_id": "MDU6TGFiZWw5ODMzMjcxMDQ=", "url": "https://api.github.com/repos/custom-components/alexa_media_player/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}, {"id": 983327106, "node_id": "MDU6TGFiZWw5ODMzMjcxMDY=", "url": "https://api.github.com/repos/custom-components/alexa_media_player/labels/enhancement", "name": "enhancement", "color": "a2eeef", "default": true, "description": "New feature or request"}, {"id": 983327107, "node_id": "MDU6TGFiZWw5ODMzMjcxMDc=", "url": "https://api.github.com/repos/custom-components/alexa_media_player/labels/help%20wanted", "name": "help wanted", "color": "008672", "default": true, "description": "Extra attention is needed"}, {"id": 983327108, "node_id": "MDU6TGFiZWw5ODMzMjcxMDg=", "url": "https://api.github.com/repos/custom-components/alexa_media_player/labels/good%20first%20issue", "name": "good first issue", "color": "7057ff", "default": true, "description": "Good for newcomers"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2023-01-23T09:25:51Z", "updated_at": "2023-03-07T03:31:58Z", "closed_at": "2023-03-07T03:31:58Z", "author_association": "NONE", "active_lock_reason": null, "body": "**IMPORTANT: Please search the issues, including closed issues, and the [FAQ](https://github.com/custom-components/alexa_media_player/wiki/FAQ) before opening a new issue. The template is mandatory; failure to use it will result in issue closure.**\r\n\r\n**Describe the bug**\r\n\r\nI observed that my home assistant sqlite DB was running bigger than before in the last days. Today I've searched for the biggest entities in my DB and found, that three sensor.*_next_alarm entities made 78 percent of my data in the tables states and state_attributes.\r\n\r\nSo I don't know if it's really a bug or intended behaviour, but 55 percent for one echo device is quite a lot. For now I excluded these entitites from being written into the HA DB.\r\n\r\nJust wanted to let you guys know.\r\n\r\n<!---Steps to reproduce the behavior:--->\r\n\r\n1. Open the DB with an SQLite explorer like \"DB Browser for SQLite\"\r\n2. Run the following SQL:\r\n\r\nSELECT\r\n  COUNT(*) AS cnt,\r\n  COUNT(*) * 100 / (SELECT COUNT(*) FROM states) AS cnt_pct,\r\n  SUM(LENGTH(shared_attrs)) AS bytes,\r\n  SUM((LENGTH(shared_attrs)) * 100) / (SELECT SUM(LENGTH(shared_attrs))  FROM state_attributes) AS bytes_pct,\r\n  entity_id\r\nFROM states, state_attributes\r\nWHERE\r\n  states.attributes_id = state_attributes.attributes_id\r\nGROUP BY entity_id\r\nORDER BY bytes DESC\r\n\r\nSee: https://community.home-assistant.io/t/how-to-keep-your-recorder-database-size-under-control/295795/97 \r\n\r\n**Expected behavior**\r\n\r\n<!---A clear and concise description of what you expected to happen.--->\r\n\r\n**Screenshots**\r\n\r\n![screenshot](https://user-images.githubusercontent.com/51734505/214009111-53c7e8b2-de5c-4e85-9991-76b0b0b5eb12.jpg)\r\n\r\n**System details**\r\n\r\n- Home-assistant (version): 2023.1.5\r\n- alexa_media (version from `const.py` or HA startup): v4.5.3\r\n- alexapy (version from `pip show alexapy` or HA startup):\r\n- Amazon [2FA is enabled](https://github.com/custom-components/alexa_media_player/wiki/Configuration#enable-two-factor-authentication-for-your-amazon-account) (y/n). <!---We will not debug login issues if unanswered--->: yes\r\n\r\n**Logs**\r\nPlease provide [logs](https://github.com/custom-components/alexa_media_player/wiki/FAQ#how-do-i-enable-debug-logging-for-the-component).\r\n\r\n**Additional context**\r\n\r\n<!---Add any other context about the problem here.--->\r\n", "reactions": {"url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/1845/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/1845/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/1844", "repository_url": "https://api.github.com/repos/custom-components/alexa_media_player", "labels_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/1844/labels{/name}", "comments_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/1844/comments", "events_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/1844/events", "html_url": "https://github.com/custom-components/alexa_media_player/issues/1844", "id": 1551761492, "node_id": "I_kwDOCFMb385cfgBU", "number": 1844, "title": "Error fetching alexa_media data: Error communicating with API: string index out of range", "user": {"login": "simphide", "id": 8183517, "node_id": "MDQ6VXNlcjgxODM1MTc=", "avatar_url": "https://avatars.githubusercontent.com/u/8183517?v=4", "gravatar_id": "", "url": "https://api.github.com/users/simphide", "html_url": "https://github.com/simphide", "followers_url": "https://api.github.com/users/simphide/followers", "following_url": "https://api.github.com/users/simphide/following{/other_user}", "gists_url": "https://api.github.com/users/simphide/gists{/gist_id}", "starred_url": "https://api.github.com/users/simphide/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/simphide/subscriptions", "organizations_url": "https://api.github.com/users/simphide/orgs", "repos_url": "https://api.github.com/users/simphide/repos", "events_url": "https://api.github.com/users/simphide/events{/privacy}", "received_events_url": "https://api.github.com/users/simphide/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 983327104, "node_id": "MDU6TGFiZWw5ODMzMjcxMDQ=", "url": "https://api.github.com/repos/custom-components/alexa_media_player/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 7, "created_at": "2023-01-21T10:33:06Z", "updated_at": "2023-03-13T07:27:01Z", "closed_at": "2023-03-07T03:27:08Z", "author_association": "NONE", "active_lock_reason": null, "body": "**Describe the bug**\r\nI've gotten a notification that asked me to reconfigure Alexa three days ago. Everything went successfully but I got asked to reauthenticate one day later again. And I got the same notification today again. I took a closer look and noticed that all my Alexa devices where not available anymore since I got that first notification. I've doublechecked everything and have definetly entered the correct TLD.\r\n\r\n![image](https://user-images.githubusercontent.com/8183517/213862427-77d7d4a2-b7ad-4041-9515-a20d1182b5ef.png)\r\n\r\n\r\n\r\n\r\n**To Reproduce**\r\n\r\nI have no idea how to reproduce that bug...\r\n\r\n**Expected behavior**\r\n\r\nThe devices are displayed correct and are available.\r\n\r\n**Screenshots**\r\n\r\n\r\n\r\n**System details**\r\n\r\n- Home-assistant (version): Home Assistant 2023.1.5\r\n- alexa_media (version from `const.py` or HA startup): v4.5.3\r\n- alexapy (version from `pip show alexapy` or HA startup): 1.26.4\r\n- Amazon [2FA is enabled](https://github.com/custom-components/alexa_media_player/wiki/Configuration#enable-two-factor-authentication-for-your-amazon-account) (y/n). : yes!\r\n\r\n**Logs**\r\nThe debugging logs give the following information:\r\n```\r\n2023-01-21 10:01:04.403 DEBUG (MainThread) [alexapy.alexaapi] s**********i@g*******m: static GET: https://alexa.amazon.de/api/bootstrap returned 200:OK:application/json\r\n2023-01-21 10:01:04.454 DEBUG (MainThread) [alexapy.alexaapi] s**********i@g*******m: static GET: https://alexa.amazon.de/api/dnd/device-status-list returned 200:OK:application/json\r\n2023-01-21 10:01:04.533 DEBUG (MainThread) [alexapy.alexaapi] s**********i@g*******m: static GET: https://alexa.amazon.de/api/devices-v2/device returned 200:OK:application/json\r\n2023-01-21 10:01:04.692 DEBUG (MainThread) [alexapy.alexaapi] s**********i@g*******m: static GET: https://alexa.amazon.de/api/bluetooth?cached=false returned 200:OK:application/json\r\n2023-01-21 10:01:04.696 DEBUG (MainThread) [alexapy.alexaapi] s**********i@g*******m: static GET: https://alexa.amazon.de/api/device-preferences returned 200:OK:application/json\r\n2023-01-21 10:01:05.004 DEBUG (MainThread) [alexapy.alexaapi] s**********i@g*******m: static GET: https://alexa.amazon.de/api/notifications returned 200:OK:application/json\r\n2023-01-21 10:01:05.297 DEBUG (MainThread) [alexapy.alexaapi] s**********i@g*******m: static GET: https://alexa.amazon.de/api/activities?startTime=&size=10&offset=1 returned 200:OK:application/json\r\n2023-01-21 10:01:05.297 WARNING (MainThread) [alexapy.helpers] alexaapi.get_last_device_serial((<alexapy.alexalogin.AlexaLogin object at 0x7fca33d52ad0>,), {}): An error occured accessing AlexaAPI: An exception of type IndexError occurred. Arguments:\r\n('string index out of range',)\r\n```\r\n\r\nThe request that was made before the error occured returns the following information if I call it via my browser. If there are any information missing, please let me know:\r\n```\r\n{\r\n    \"activities\": [\r\n        {\r\n            \"_disambiguationId\": null,\r\n            \"activityStatus\": \"SUCCESS\",\r\n            \"creationTimestamp\": 1673169603048,\r\n            \"description\": null,\r\n            \"domainAttributes\": \"secret\",\r\n            \"domainType\": null,\r\n            \"feedbackAttributes\": null,\r\n            \"id\": \"registeredCustomerId#1673169603048#A3RBAYBE7VM004#G2A0XL0794230CW4\",\r\n            \"intentType\": null,\r\n            \"providerInfoDescription\": null,\r\n            \"registeredCustomerId\": \"secret\",\r\n            \"sourceActiveUsers\": null,\r\n            \"sourceDeviceIds\": [\r\n                {\r\n                    \"deviceAccountId\": null,\r\n                    \"deviceType\": \"A3RBAYBE7VM004\",\r\n                    \"serialNumber\": \"secret\"\r\n                }\r\n            ],\r\n            \"utteranceId\": null,\r\n            \"version\": 1\r\n        },\r\n        {\r\n            \"_disambiguationId\": null,\r\n            \"activityStatus\": \"SUCCESS\",\r\n            \"creationTimestamp\": 1673111927401,\r\n            \"description\": null,\r\n            \"domainAttributes\": \"secret\",\r\n            \"domainType\": null,\r\n            \"feedbackAttributes\": null,\r\n            \"id\": \"registeredCustomerId#1673111927401#A32DOYMUN6DTXA#G090U50683540MX4\",\r\n            \"intentType\": null,\r\n            \"providerInfoDescription\": null,\r\n            \"registeredCustomerId\": \"secret\",\r\n            \"sourceActiveUsers\": null,\r\n            \"sourceDeviceIds\": [\r\n                {\r\n                    \"deviceAccountId\": null,\r\n                    \"deviceType\": \"A32DOYMUN6DTXA\",\r\n                    \"serialNumber\": \"secret\"\r\n                }\r\n            ],\r\n            \"utteranceId\": null,\r\n            \"version\": 1\r\n        },\r\n        {\r\n            \"_disambiguationId\": null,\r\n            \"activityStatus\": \"SUCCESS\",\r\n            \"creationTimestamp\": 1667631912219,\r\n            \"description\": \"{\\\"summary\\\":\\\"\\\"}\",\r\n            \"domainAttributes\": \"secret\",\r\n            \"domainType\": null,\r\n            \"feedbackAttributes\": null,\r\n            \"id\": \"registeredCustomerId#1667631912219#A32DOYMUN6DTXA#G090U50683540MX4\",\r\n            \"intentType\": null,\r\n            \"providerInfoDescription\": null,\r\n            \"registeredCustomerId\": \"secret\",\r\n            \"sourceActiveUsers\": null,\r\n            \"sourceDeviceIds\": [\r\n                {\r\n                    \"deviceAccountId\": null,\r\n                    \"deviceType\": \"A32DOYMUN6DTXA\",\r\n                    \"serialNumber\": \"secret\"\r\n                }\r\n            ],\r\n            \"utteranceId\": null,\r\n            \"version\": 1\r\n        },\r\n        {\r\n            \"_disambiguationId\": null,\r\n            \"activityStatus\": \"SUCCESS\",\r\n            \"creationTimestamp\": 1667631793183,\r\n            \"description\": \"{\\\"summary\\\":\\\"\\\"}\",\r\n            \"domainAttributes\": \"secret\",\r\n            \"domainType\": null,\r\n            \"feedbackAttributes\": null,\r\n            \"id\": \"registeredCustomerId#1667631793183#A2H4LV5GIZ1JFT#G091JJ1421560B1H\",\r\n            \"intentType\": null,\r\n            \"providerInfoDescription\": null,\r\n            \"registeredCustomerId\": \"secret\",\r\n            \"sourceActiveUsers\": null,\r\n            \"sourceDeviceIds\": [\r\n                {\r\n                    \"deviceAccountId\": null,\r\n                    \"deviceType\": \"A2H4LV5GIZ1JFT\",\r\n                    \"serialNumber\": \"secret\"\r\n                }\r\n            ],\r\n            \"utteranceId\": null,\r\n            \"version\": 1\r\n        },\r\n        {\r\n            \"_disambiguationId\": null,\r\n            \"activityStatus\": \"SUCCESS\",\r\n            \"creationTimestamp\": 1667542077699,\r\n            \"description\": \"{\\\"summary\\\":\\\"\\\"}\",\r\n            \"domainAttributes\": \"secret\",\r\n            \"domainType\": null,\r\n            \"feedbackAttributes\": null,\r\n            \"id\": \"registeredCustomerId#1667542077699#A2H4LV5GIZ1JFT#G091JJ1421560B1H\",\r\n            \"intentType\": null,\r\n            \"providerInfoDescription\": null,\r\n            \"registeredCustomerId\": \"secret\",\r\n            \"sourceActiveUsers\": null,\r\n            \"sourceDeviceIds\": [\r\n                {\r\n                    \"deviceAccountId\": null,\r\n                    \"deviceType\": \"A2H4LV5GIZ1JFT\",\r\n                    \"serialNumber\": \"secret\"\r\n                }\r\n            ],\r\n            \"utteranceId\": null,\r\n            \"version\": 1\r\n        },\r\n        {\r\n            \"_disambiguationId\": null,\r\n            \"activityStatus\": \"SUCCESS\",\r\n            \"creationTimestamp\": 1667541523680,\r\n            \"description\": \"{\\\"summary\\\":\\\"\\\"}\",\r\n            \"domainAttributes\": \"secret\",\r\n            \"domainType\": null,\r\n            \"feedbackAttributes\": null,\r\n            \"id\": \"registeredCustomerId#1667541523680#A2H4LV5GIZ1JFT#G091JJ1421560B1H\",\r\n            \"intentType\": null,\r\n            \"providerInfoDescription\": null,\r\n            \"registeredCustomerId\": \"secret\",\r\n            \"sourceActiveUsers\": null,\r\n            \"sourceDeviceIds\": [\r\n                {\r\n                    \"deviceAccountId\": null,\r\n                    \"deviceType\": \"A2H4LV5GIZ1JFT\",\r\n                    \"serialNumber\": \"secret\"\r\n                }\r\n            ],\r\n            \"utteranceId\": null,\r\n            \"version\": 1\r\n        },\r\n        {\r\n            \"_disambiguationId\": null,\r\n            \"activityStatus\": \"SUCCESS\",\r\n            \"creationTimestamp\": 1667541405544,\r\n            \"description\": \"{\\\"summary\\\":\\\"\\\"}\",\r\n            \"domainAttributes\": \"secret\",\r\n            \"domainType\": null,\r\n            \"feedbackAttributes\": null,\r\n            \"id\": \"registeredCustomerId#1667541405544#A32DOYMUN6DTXA#G090U50683540MX4\",\r\n            \"intentType\": null,\r\n            \"providerInfoDescription\": null,\r\n            \"registeredCustomerId\": \"secret\",\r\n            \"sourceActiveUsers\": null,\r\n            \"sourceDeviceIds\": [\r\n                {\r\n                    \"deviceAccountId\": null,\r\n                    \"deviceType\": \"A32DOYMUN6DTXA\",\r\n                    \"serialNumber\": \"secret\"\r\n                }\r\n            ],\r\n            \"utteranceId\": null,\r\n            \"version\": 1\r\n        },\r\n        {\r\n            \"_disambiguationId\": null,\r\n            \"activityStatus\": \"SUCCESS\",\r\n            \"creationTimestamp\": 1667541323785,\r\n            \"description\": \"{\\\"summary\\\":\\\"\\\"}\",\r\n            \"domainAttributes\": \"secret\",\r\n            \"domainType\": null,\r\n            \"feedbackAttributes\": null,\r\n            \"id\": \"registeredCustomerId#1667541323785#A2H4LV5GIZ1JFT#G091JJ1421560B1H\",\r\n            \"intentType\": null,\r\n            \"providerInfoDescription\": null,\r\n            \"registeredCustomerId\": \"secret\",\r\n            \"sourceActiveUsers\": null,\r\n            \"sourceDeviceIds\": [\r\n                {\r\n                    \"deviceAccountId\": null,\r\n                    \"deviceType\": \"A2H4LV5GIZ1JFT\",\r\n                    \"serialNumber\": \"secret\"\r\n                }\r\n            ],\r\n            \"utteranceId\": null,\r\n            \"version\": 1\r\n        },\r\n        {\r\n            \"_disambiguationId\": null,\r\n            \"activityStatus\": \"SUCCESS\",\r\n            \"creationTimestamp\": 1667541216047,\r\n            \"description\": \"{\\\"summary\\\":\\\"\\\"}\",\r\n            \"domainAttributes\": \"secret\",\r\n            \"domainType\": null,\r\n            \"feedbackAttributes\": null,\r\n            \"id\": \"registeredCustomerId#1667541216047#A2H4LV5GIZ1JFT#G091JJ1421560B1H\",\r\n            \"intentType\": null,\r\n            \"providerInfoDescription\": null,\r\n            \"registeredCustomerId\": \"secret\",\r\n            \"sourceActiveUsers\": null,\r\n            \"sourceDeviceIds\": [\r\n                {\r\n                    \"deviceAccountId\": null,\r\n                    \"deviceType\": \"A2H4LV5GIZ1JFT\",\r\n                    \"serialNumber\": \"secret\"\r\n                }\r\n            ],\r\n            \"utteranceId\": null,\r\n            \"version\": 1\r\n        },\r\n        {\r\n            \"_disambiguationId\": null,\r\n            \"activityStatus\": \"SUCCESS\",\r\n            \"creationTimestamp\": 1667454920895,\r\n            \"description\": \"{\\\"summary\\\":\\\"\\\"}\",\r\n            \"domainAttributes\": \"secret\",\r\n            \"domainType\": null,\r\n            \"feedbackAttributes\": null,\r\n            \"id\": \"registeredCustomerId#1667454920895#A32DOYMUN6DTXA#G090U50683540MX4\",\r\n            \"intentType\": null,\r\n            \"providerInfoDescription\": null,\r\n            \"registeredCustomerId\": \"secret\",\r\n            \"sourceActiveUsers\": null,\r\n            \"sourceDeviceIds\": [\r\n                {\r\n                    \"deviceAccountId\": null,\r\n                    \"deviceType\": \"A32DOYMUN6DTXA\",\r\n                    \"serialNumber\": \"secret\"\r\n                }\r\n            ],\r\n            \"utteranceId\": null,\r\n            \"version\": 1\r\n        }\r\n    ],\r\n    \"endDate\": 1673169603048,\r\n    \"startDate\": 1667454920895\r\n}\r\n```\r\n\r\n\r\n**Additional context**\r\n\r\n<!---Add any other context about the problem here.--->\r\n", "reactions": {"url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/1844/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/1844/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/1836", "repository_url": "https://api.github.com/repos/custom-components/alexa_media_player", "labels_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/1836/labels{/name}", "comments_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/1836/comments", "events_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/1836/events", "html_url": "https://github.com/custom-components/alexa_media_player/issues/1836", "id": 1533421017, "node_id": "I_kwDOCFMb385bZiXZ", "number": 1836, "title": "Make Air Quality Monitor AQI & VOC numeric", "user": {"login": "nanobra1n", "id": 15968173, "node_id": "MDQ6VXNlcjE1OTY4MTcz", "avatar_url": "https://avatars.githubusercontent.com/u/15968173?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nanobra1n", "html_url": "https://github.com/nanobra1n", "followers_url": "https://api.github.com/users/nanobra1n/followers", "following_url": "https://api.github.com/users/nanobra1n/following{/other_user}", "gists_url": "https://api.github.com/users/nanobra1n/gists{/gist_id}", "starred_url": "https://api.github.com/users/nanobra1n/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nanobra1n/subscriptions", "organizations_url": "https://api.github.com/users/nanobra1n/orgs", "repos_url": "https://api.github.com/users/nanobra1n/repos", "events_url": "https://api.github.com/users/nanobra1n/events{/privacy}", "received_events_url": "https://api.github.com/users/nanobra1n/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 983327104, "node_id": "MDU6TGFiZWw5ODMzMjcxMDQ=", "url": "https://api.github.com/repos/custom-components/alexa_media_player/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}, {"id": 983327107, "node_id": "MDU6TGFiZWw5ODMzMjcxMDc=", "url": "https://api.github.com/repos/custom-components/alexa_media_player/labels/help%20wanted", "name": "help wanted", "color": "008672", "default": true, "description": "Extra attention is needed"}, {"id": 983327108, "node_id": "MDU6TGFiZWw5ODMzMjcxMDg=", "url": "https://api.github.com/repos/custom-components/alexa_media_player/labels/good%20first%20issue", "name": "good first issue", "color": "7057ff", "default": true, "description": "Good for newcomers"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2023-01-14T18:37:46Z", "updated_at": "2023-01-15T05:04:40Z", "closed_at": "2023-01-14T21:02:40Z", "author_association": "NONE", "active_lock_reason": null, "body": "The Air Quality Monitor VOC and AQI sensors show up as text sensors instead numeric in HA because they have no `unit_of_measurement`.  From what little I  read, in this case `state_class` should be defined for them, allowing line graphs and statistics on the HA frontend. \r\n", "reactions": {"url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/1836/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/1836/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/1834", "repository_url": "https://api.github.com/repos/custom-components/alexa_media_player", "labels_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/1834/labels{/name}", "comments_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/1834/comments", "events_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/1834/events", "html_url": "https://github.com/custom-components/alexa_media_player/issues/1834", "id": 1533316618, "node_id": "I_kwDOCFMb385bZI4K", "number": 1834, "title": "Local temperature not updating", "user": {"login": "Dixey-coder", "id": 55585001, "node_id": "MDQ6VXNlcjU1NTg1MDAx", "avatar_url": "https://avatars.githubusercontent.com/u/55585001?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Dixey-coder", "html_url": "https://github.com/Dixey-coder", "followers_url": "https://api.github.com/users/Dixey-coder/followers", "following_url": "https://api.github.com/users/Dixey-coder/following{/other_user}", "gists_url": "https://api.github.com/users/Dixey-coder/gists{/gist_id}", "starred_url": "https://api.github.com/users/Dixey-coder/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Dixey-coder/subscriptions", "organizations_url": "https://api.github.com/users/Dixey-coder/orgs", "repos_url": "https://api.github.com/users/Dixey-coder/repos", "events_url": "https://api.github.com/users/Dixey-coder/events{/privacy}", "received_events_url": "https://api.github.com/users/Dixey-coder/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 983327104, "node_id": "MDU6TGFiZWw5ODMzMjcxMDQ=", "url": "https://api.github.com/repos/custom-components/alexa_media_player/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2023-01-14T15:53:07Z", "updated_at": "2023-01-14T23:43:24Z", "closed_at": "2023-01-14T23:43:24Z", "author_association": "NONE", "active_lock_reason": null, "body": "Initial report is accurate.  Manual reload of alexa integration updates.  Does not update automatically.  Echo dot ver 5.", "reactions": {"url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/1834/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/1834/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/1833", "repository_url": "https://api.github.com/repos/custom-components/alexa_media_player", "labels_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/1833/labels{/name}", "comments_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/1833/comments", "events_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/1833/events", "html_url": "https://github.com/custom-components/alexa_media_player/issues/1833", "id": 1533308395, "node_id": "I_kwDOCFMb385bZG3r", "number": 1833, "title": "No data update on Indoor Air Quality Sensor's sensors", "user": {"login": "KC-inDomus", "id": 52242036, "node_id": "MDQ6VXNlcjUyMjQyMDM2", "avatar_url": "https://avatars.githubusercontent.com/u/52242036?v=4", "gravatar_id": "", "url": "https://api.github.com/users/KC-inDomus", "html_url": "https://github.com/KC-inDomus", "followers_url": "https://api.github.com/users/KC-inDomus/followers", "following_url": "https://api.github.com/users/KC-inDomus/following{/other_user}", "gists_url": "https://api.github.com/users/KC-inDomus/gists{/gist_id}", "starred_url": "https://api.github.com/users/KC-inDomus/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/KC-inDomus/subscriptions", "organizations_url": "https://api.github.com/users/KC-inDomus/orgs", "repos_url": "https://api.github.com/users/KC-inDomus/repos", "events_url": "https://api.github.com/users/KC-inDomus/events{/privacy}", "received_events_url": "https://api.github.com/users/KC-inDomus/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 983327104, "node_id": "MDU6TGFiZWw5ODMzMjcxMDQ=", "url": "https://api.github.com/repos/custom-components/alexa_media_player/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2023-01-14T15:32:44Z", "updated_at": "2023-01-14T23:43:25Z", "closed_at": "2023-01-14T23:43:25Z", "author_association": "NONE", "active_lock_reason": null, "body": "Sorry @alandtse for bothering you once again, only trying help you debugging this new Indoor Air Quality Sensor integration - for which we all thank you.\r\n\r\n**Describe the bug**\r\n\r\nAfter 4.5.2 (which solved [unavalability problem](https://github.com/custom-components/alexa_media_player/issues/1830)) data polling happends only at startup. No new data seems to be collected while Home Assistant is running, while Alexa app reports some (the only way is to restart the component). Was working fine with 4.5.0.\r\n\r\n**System details**\r\n\r\n- Home-assistant (version):2023.4.1\r\n- alexa_media (version from `const.py` or HA startup):  4.5.2\r\n\r\n**Logs**\r\nChecked, no warnings or errors come up.\r\n", "reactions": {"url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/1833/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/1833/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/1830", "repository_url": "https://api.github.com/repos/custom-components/alexa_media_player", "labels_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/1830/labels{/name}", "comments_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/1830/comments", "events_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/1830/events", "html_url": "https://github.com/custom-components/alexa_media_player/issues/1830", "id": 1533206947, "node_id": "I_kwDOCFMb385bYuGj", "number": 1830, "title": "4.5.1 made Indoor Air Quality Sensor unavailable after a few moments ", "user": {"login": "KC-inDomus", "id": 52242036, "node_id": "MDQ6VXNlcjUyMjQyMDM2", "avatar_url": "https://avatars.githubusercontent.com/u/52242036?v=4", "gravatar_id": "", "url": "https://api.github.com/users/KC-inDomus", "html_url": "https://github.com/KC-inDomus", "followers_url": "https://api.github.com/users/KC-inDomus/followers", "following_url": "https://api.github.com/users/KC-inDomus/following{/other_user}", "gists_url": "https://api.github.com/users/KC-inDomus/gists{/gist_id}", "starred_url": "https://api.github.com/users/KC-inDomus/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/KC-inDomus/subscriptions", "organizations_url": "https://api.github.com/users/KC-inDomus/orgs", "repos_url": "https://api.github.com/users/KC-inDomus/repos", "events_url": "https://api.github.com/users/KC-inDomus/events{/privacy}", "received_events_url": "https://api.github.com/users/KC-inDomus/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 983327104, "node_id": "MDU6TGFiZWw5ODMzMjcxMDQ=", "url": "https://api.github.com/repos/custom-components/alexa_media_player/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2023-01-14T10:23:03Z", "updated_at": "2023-01-15T08:30:06Z", "closed_at": "2023-01-14T10:47:45Z", "author_association": "NONE", "active_lock_reason": null, "body": "**Describe the bug**\r\n\r\nAfter a good start of the custom component with fully retrived data from the IAQS sensors set, they become unavailable.\r\n\r\n**System details**\r\n\r\n- Home-assistant (version): 2023.1.4\r\n- alexa_media (version from `const.py` or HA startup): 4.5.1\r\n\r\n**Logs**\r\n```\r\n2023-01-14 11:10:10.318 ERROR (MainThread) [custom_components.alexa_media] Unexpected error fetching alexa_media data: 'TemperatureSensor' object has no attribute 'alexa_entity_id'\r\nTraceback (most recent call last):\r\n  File \"/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py\", line 225, in _async_refresh\r\n    self.data = await self._async_update_data()\r\n  File \"/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py\", line 181, in _async_update_data\r\n    return await self.update_method()\r\n  File \"/config/custom_components/alexa_media/__init__.py\", line 404, in async_update_data\r\n    entities_to_monitor.add(temp.alexa_entity_id)\r\nAttributeError: 'TemperatureSensor' object has no attribute 'alexa_entity_id'\r\n2023-01-14 11:17:38.067 ERROR (MainThread) [custom_components.alexa_media] Unexpected error fetching alexa_media data: 'TemperatureSensor' object has no attribute 'alexa_entity_id'\r\nTraceback (most recent call last):\r\n  File \"/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py\", line 225, in _async_refresh\r\n    self.data = await self._async_update_data()\r\n  File \"/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py\", line 181, in _async_update_data\r\n    return await self.update_method()\r\n  File \"/config/custom_components/alexa_media/__init__.py\", line 404, in async_update_data\r\n    entities_to_monitor.add(temp.alexa_entity_id)\r\nAttributeError: 'TemperatureSensor' object has no attribute 'alexa_entity_id'\r\n2023-01-14 11:20:10.323 ERROR (MainThread) [custom_components.alexa_media] Unexpected error fetching alexa_media data: 'TemperatureSensor' object has no attribute 'alexa_entity_id'\r\nTraceback (most recent call last):\r\n  File \"/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py\", line 225, in _async_refresh\r\n    self.data = await self._async_update_data()\r\n  File \"/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py\", line 181, in _async_update_data\r\n    return await self.update_method()\r\n  File \"/config/custom_components/alexa_media/__init__.py\", line 404, in async_update_data\r\n    entities_to_monitor.add(temp.alexa_entity_id)\r\nAttributeError: 'TemperatureSensor' object has no attribute 'alexa_entity_id'\r\n\r\n```", "reactions": {"url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/1830/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/1830/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/1827", "repository_url": "https://api.github.com/repos/custom-components/alexa_media_player", "labels_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/1827/labels{/name}", "comments_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/1827/comments", "events_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/1827/events", "html_url": "https://github.com/custom-components/alexa_media_player/issues/1827", "id": 1532870941, "node_id": "I_kwDOCFMb385bXcEd", "number": 1827, "title": "Indoor Air Quality Monitor sensor - wrong sensors entities behavior", "user": {"login": "KC-inDomus", "id": 52242036, "node_id": "MDQ6VXNlcjUyMjQyMDM2", "avatar_url": "https://avatars.githubusercontent.com/u/52242036?v=4", "gravatar_id": "", "url": "https://api.github.com/users/KC-inDomus", "html_url": "https://github.com/KC-inDomus", "followers_url": "https://api.github.com/users/KC-inDomus/followers", "following_url": "https://api.github.com/users/KC-inDomus/following{/other_user}", "gists_url": "https://api.github.com/users/KC-inDomus/gists{/gist_id}", "starred_url": "https://api.github.com/users/KC-inDomus/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/KC-inDomus/subscriptions", "organizations_url": "https://api.github.com/users/KC-inDomus/orgs", "repos_url": "https://api.github.com/users/KC-inDomus/repos", "events_url": "https://api.github.com/users/KC-inDomus/events{/privacy}", "received_events_url": "https://api.github.com/users/KC-inDomus/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 983327104, "node_id": "MDU6TGFiZWw5ODMzMjcxMDQ=", "url": "https://api.github.com/repos/custom-components/alexa_media_player/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}, {"id": 983327107, "node_id": "MDU6TGFiZWw5ODMzMjcxMDc=", "url": "https://api.github.com/repos/custom-components/alexa_media_player/labels/help%20wanted", "name": "help wanted", "color": "008672", "default": true, "description": "Extra attention is needed"}, {"id": 983327108, "node_id": "MDU6TGFiZWw5ODMzMjcxMDg=", "url": "https://api.github.com/repos/custom-components/alexa_media_player/labels/good%20first%20issue", "name": "good first issue", "color": "7057ff", "default": true, "description": "Good for newcomers"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2023-01-13T20:26:07Z", "updated_at": "2023-01-14T08:48:47Z", "closed_at": "2023-01-14T08:48:47Z", "author_association": "NONE", "active_lock_reason": null, "body": "**Describe the bug**\n\nSensors:\n- indoor air quality\n- voc\n\neven if they're number sensors, cannot generate charts on HA dashboard \n\n**To Reproduce**\n\nopen one sensor and see how integer number are not placed as graphical chart\n\n**Expected behavior**\n\n<!---A clear and concise description of what you expected to happen.--->\n\n**Screenshots**\n\n![image](https://user-images.githubusercontent.com/52242036/212412686-6a60ab51-7a47-4bc2-8820-345531526fca.jpeg)\n\n**System details**\n\n- Home-assistant (version): 2023.1.4\n- alexa_media (version from `const.py` or HA startup): 4.5.0", "reactions": {"url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/1827/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/1827/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/1824", "repository_url": "https://api.github.com/repos/custom-components/alexa_media_player", "labels_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/1824/labels{/name}", "comments_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/1824/comments", "events_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/1824/events", "html_url": "https://github.com/custom-components/alexa_media_player/issues/1824", "id": 1531933938, "node_id": "I_kwDOCFMb385bT3Ty", "number": 1824, "title": "Alexa Media Player 4.5 next timer, reminder, alarm unavailable", "user": {"login": "OwenBerg79", "id": 103262484, "node_id": "U_kgDOBiepFA", "avatar_url": "https://avatars.githubusercontent.com/u/103262484?v=4", "gravatar_id": "", "url": "https://api.github.com/users/OwenBerg79", "html_url": "https://github.com/OwenBerg79", "followers_url": "https://api.github.com/users/OwenBerg79/followers", "following_url": "https://api.github.com/users/OwenBerg79/following{/other_user}", "gists_url": "https://api.github.com/users/OwenBerg79/gists{/gist_id}", "starred_url": "https://api.github.com/users/OwenBerg79/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/OwenBerg79/subscriptions", "organizations_url": "https://api.github.com/users/OwenBerg79/orgs", "repos_url": "https://api.github.com/users/OwenBerg79/repos", "events_url": "https://api.github.com/users/OwenBerg79/events{/privacy}", "received_events_url": "https://api.github.com/users/OwenBerg79/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 983327104, "node_id": "MDU6TGFiZWw5ODMzMjcxMDQ=", "url": "https://api.github.com/repos/custom-components/alexa_media_player/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}, {"id": 983327107, "node_id": "MDU6TGFiZWw5ODMzMjcxMDc=", "url": "https://api.github.com/repos/custom-components/alexa_media_player/labels/help%20wanted", "name": "help wanted", "color": "008672", "default": true, "description": "Extra attention is needed"}, {"id": 983327108, "node_id": "MDU6TGFiZWw5ODMzMjcxMDg=", "url": "https://api.github.com/repos/custom-components/alexa_media_player/labels/good%20first%20issue", "name": "good first issue", "color": "7057ff", "default": true, "description": "Good for newcomers"}, {"id": 983327110, "node_id": "MDU6TGFiZWw5ODMzMjcxMTA=", "url": "https://api.github.com/repos/custom-components/alexa_media_player/labels/question", "name": "question", "color": "d876e3", "default": true, "description": "Further information is requested"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 7, "created_at": "2023-01-13T08:53:48Z", "updated_at": "2023-01-14T12:46:53Z", "closed_at": "2023-01-14T08:48:47Z", "author_association": "NONE", "active_lock_reason": null, "body": "**IMPORTANT: Please search the issues, including closed issues, and the [FAQ](https://github.com/custom-components/alexa_media_player/wiki/FAQ) before opening a new issue. The template is mandatory; failure to use it will result in issue closure.**\r\n\r\n**Describe the bug**\r\n\r\nV4.5 has caused next_timer, next_alarm, next_reminder to report as unknown.\r\nFurther updates to these services are not reported back to the integration.\r\n\r\n**To Reproduce**\r\n\r\n1. Install V4.5\r\n2. Set a timer on an echo device\r\n3. Check for updated next_timer entity for that device \r\n4. Unknown reported as status. Status is unknown from the time of restart relating to upgrade to V4.5. Previous timers also missing from the entity.\r\n\r\n**Expected behavior**\r\n\r\n\r\nNext_timer, alarm, reminder would normally report a date time string of the next event. It would also report a string of previous events under the \"Sorted All\" attribute\r\n**Screenshots**\r\n\r\n\r\n\r\nIssue under V4.5:\r\n![Screenshot_2023-01-13-08-44-54-64_c3a231c25ed346e59462e84656a70e50](https://user-images.githubusercontent.com/103262484/212277577-0a59744a-9161-4ec0-995f-91f5070642b5.jpg)\r\n\r\nCorrect behaviour under V4.4:\r\n![Screenshot_2023-01-13-08-49-26-98_c3a231c25ed346e59462e84656a70e50](https://user-images.githubusercontent.com/103262484/212277850-641595e3-5f88-4304-b460-27fe83ee74b0.jpg)\r\n\r\n\r\n**System details**\r\n\r\n- Home-assistant (version): 2023.1.4\r\n- alexa_media (version from `const.py` or HA startup): 4.5\r\n- alexapy (version from `pip show alexapy` or HA startup):\r\n- Amazon [2FA is enabled](https://github.com/custom-components/alexa_media_player/wiki/Configuration#enable-two-factor-authentication-for-your-amazon-account) (y/n). <!---We will not debug login issues if unanswered--->: y\r\n\r\n**Logs**\r\nPlease provide [logs](https://github.com/custom-components/alexa_media_player/wiki/FAQ#how-do-i-enable-debug-logging-for-the-component).\r\n\r\n**Additional context**\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/1824/reactions", "total_count": 7, "+1": 7, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/1824/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/1778", "repository_url": "https://api.github.com/repos/custom-components/alexa_media_player", "labels_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/1778/labels{/name}", "comments_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/1778/comments", "events_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/1778/events", "html_url": "https://github.com/custom-components/alexa_media_player/issues/1778", "id": 1445845534, "node_id": "I_kwDOCFMb385WLdoe", "number": 1778, "title": "string index out of range on login", "user": {"login": "mmillmor", "id": 10559923, "node_id": "MDQ6VXNlcjEwNTU5OTIz", "avatar_url": "https://avatars.githubusercontent.com/u/10559923?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mmillmor", "html_url": "https://github.com/mmillmor", "followers_url": "https://api.github.com/users/mmillmor/followers", "following_url": "https://api.github.com/users/mmillmor/following{/other_user}", "gists_url": "https://api.github.com/users/mmillmor/gists{/gist_id}", "starred_url": "https://api.github.com/users/mmillmor/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mmillmor/subscriptions", "organizations_url": "https://api.github.com/users/mmillmor/orgs", "repos_url": "https://api.github.com/users/mmillmor/repos", "events_url": "https://api.github.com/users/mmillmor/events{/privacy}", "received_events_url": "https://api.github.com/users/mmillmor/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 983327104, "node_id": "MDU6TGFiZWw5ODMzMjcxMDQ=", "url": "https://api.github.com/repos/custom-components/alexa_media_player/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2022-11-11T18:16:31Z", "updated_at": "2022-11-27T21:20:00Z", "closed_at": "2022-11-27T21:20:00Z", "author_association": "NONE", "active_lock_reason": null, "body": "**IMPORTANT:  Please search the issues, including closed issues, and the [FAQ](https://github.com/custom-components/alexa_media_player/wiki/FAQ) before opening a new issue. The template is mandatory; failure to use it will result in issue closure.**\r\n\r\n**Describe the bug**\r\nI have an alexa_media_player integration that has been running fine for some time. I use 2FA login and it was stable. Recently (perhaps today) it stopped working. I got a notification that the service notify.alexa_media didn't exist. My entities don't seem to be valid any more either\r\n\r\n\r\n**To Reproduce**\r\n1. Log in to the service\r\n\r\n**Expected behavior**\r\nI have 8 echos which should be shown\r\n\r\n**Screenshots**\r\n<!---If applicable, add screenshots to help explain your problem.--->\r\n\r\n**System details**\r\n - Home-assistant (version): \r\n - Home Assistant 2022.11.2\r\nSupervisor 2022.10.2\r\nOperating System 9.3\r\nFrontend 20221108.0 - latest\r\n\r\n - alexa_media  4.3.2:\r\n - alexapy (version from `pip show alexapy` or HA startup): 1.26.4\r\n - Amazon [2FA is enabled](https://github.com/custom-components/alexa_media_player/wiki/Configuration#enable-two-factor-authentication-for-your-amazon-account) (y/n). Yes\r\n\r\n**Logs**\r\n```\r\n2022-11-11 18:03:55.613 DEBUG (MainThread) [custom_components.alexa_media] m****n@m**********t: Websocket successfully connected\r\n2022-11-11 18:03:55.613 DEBUG (MainThread) [custom_components.alexa_media] m****n@m**********t: Creating coordinator\r\n2022-11-11 18:03:55.613 DEBUG (MainThread) [custom_components.alexa_media] m****n@m**********t: Refreshing coordinator\r\n2022-11-11 18:03:55.614 DEBUG (MainThread) [alexapy.alexawebsocket] Starting message parsing loop.\r\n2022-11-11 18:03:55.615 DEBUG (MainThread) [alexapy.alexawebsocket] Received raw WebSocket: b'0x37a1b607 0x0000009c {\"protocolName\":\"A:F\",\"parameters\":{\"AlphaProtocolHandler.maxFragmentSize\":\"16000\",\"AlphaProtocolHandler.receiveWindowSize\":\"16\"}}TUNE'\r\n2022-11-11 18:03:55.617 DEBUG (MainThread) [alexapy.alexawebsocket] Encoding WebSocket Handshake MSG.\r\n2022-11-11 18:03:55.617 DEBUG (MainThread) [alexapy.alexawebsocket] 0xfe88bc52 0x0000009c {\"protocolName\":\"A:F\",\"parameters\":{\"AlphaProtocolHandler.receiveWindowSize\":\"16\",\"AlphaProtocolHandler.maxFragmentSize\":\"16000\"}}TUNE\r\n2022-11-11 18:03:55.618 DEBUG (MainThread) [alexapy.alexawebsocket] A:F Initialization Msg 2 sent: redacted\r\n2022-11-11 18:03:55.672 DEBUG (MainThread) [alexapy.alexawebsocket] Encoding Gateway Register MSG.\r\n2022-11-11 18:03:55.676 DEBUG (MainThread) [alexapy.alexawebsocket] bytearray(b'MSG\\redacted1 urn:tcomm-endpoint:service:serviceName:DeeWebsiteMessagingService {\"command\":\"REGISTER_CONNECTION\"}FABE')\r\n2022-11-11 18:03:55.677 DEBUG (MainThread) [alexapy.alexawebsocket] A:F Initialization Msg 3 (Register Connection) sent: redacted\r\n2022-11-11 18:03:55.729 DEBUG (MainThread) [alexapy.alexawebsocket] Encoding PING.\r\n2022-11-11 18:03:55.731 DEBUG (MainThread) [alexapy.alexawebsocket] bytearray(b'MSGredacted')\r\n2022-11-11 18:03:55.731 DEBUG (MainThread) [alexapy.alexawebsocket] Send First Ping: redacted\r\n2022-11-11 18:03:55.734 DEBUG (MainThread) [alexapy.alexaapi] m****n@m**********t: static GET: https://alexa.amazon.co.uk/api/phoenix returned 200:OK:application/json\r\n2022-11-11 18:03:55.734 DEBUG (MainThread) [alexapy.alexaapi] m****n@m**********t: get_network_details response: {'locationDetails': {'locationDetails': {'Default_Location': {'locationId': 'Default_Location', 'amazonBridgeDetails': {'amazonBridgeDetails': {}}, 'applianceGroups': {'applianceGroups': {}}}}}, 'version': '1.0', 'relations': []}\r\n2022-11-11 18:03:55.755 DEBUG (MainThread) [alexapy.alexaapi] m****n@m**********t: static GET: https://alexa.amazon.co.uk/api/bootstrap returned 200:OK:application/json\r\n2022-11-11 18:03:55.832 DEBUG (MainThread) [alexapy.alexawebsocket] Received raw WebSocket: b'MSGredacted'\r\n2022-11-11 18:03:56.469 DEBUG (MainThread) [alexapy.alexaapi] m****n@m**********t: static GET: https://alexa.amazon.co.uk/api/dnd/device-status-list returned 200:OK:application/json\r\n2022-11-11 18:03:56.470 DEBUG (MainThread) [alexapy.alexaapi] m****n@m**********t: static GET: https://alexa.amazon.co.uk/api/devices-v2/device returned 200:OK:application/json\r\n2022-11-11 18:03:56.472 DEBUG (MainThread) [alexapy.alexawebsocket] Encoding PING.\r\n2022-11-11 18:03:56.472 DEBUG (MainThread) [alexapy.alexawebsocket] bytearray(b\"MSGredacted\")\r\n2022-11-11 18:03:56.473 DEBUG (MainThread) [alexapy.alexawebsocket] Send Second Ping: redacted\r\n2022-11-11 18:03:56.769 DEBUG (MainThread) [alexapy.alexaapi] m****n@m**********t: static GET: https://alexa.amazon.co.uk/api/device-preferences returned 200:OK:application/json\r\n2022-11-11 18:03:56.974 DEBUG (MainThread) [alexapy.alexawebsocket] Received raw WebSocket: b'MSG\\redacted'\r\n2022-11-11 18:03:57.016 DEBUG (MainThread) [alexapy.alexaapi] m****n@m**********t: static GET: https://alexa.amazon.co.uk/api/bluetooth?cached=false returned 200:OK:application/json\r\n2022-11-11 18:03:57.018 DEBUG (MainThread) [custom_components.alexa_media] Alexa entities have been loaded. Prepared for discovery.\r\n2022-11-11 18:03:57.018 DEBUG (MainThread) [custom_components.alexa_media] m****n@m**********t: Found 27 devices, 27 bluetooth\r\n2022-11-11 18:03:57.683 DEBUG (MainThread) [alexapy.alexaapi] m****n@m**********t: static GET: https://alexa.amazon.co.uk/api/notifications returned 200:OK:application/json\r\n2022-11-11 18:03:57.684 DEBUG (MainThread) [custom_components.alexa_media] m****n@m**********t: Updated 0 notifications for 1 devices at 2022-11-11 18:03:57.684237+00:00\r\nTraceback (most recent call last):\r\nFile \"/usr/src/homeassistant/homeassistant/helpers/entity_platform.py\", line 493, in _async_add_entity\r\nawait entity.async_device_update(warning=False)\r\nFile \"/usr/src/homeassistant/homeassistant/helpers/entity.py\", line 715, in async_device_update\r\nawait task\r\nTypeError: float() argument must be a string or a real number, not 'NoneType'\r\n2022-11-11 18:03:57.929 DEBUG (MainThread) [alexapy.alexaapi] m****n@m**********t: static GET: https://alexa.amazon.co.uk/api/activities?startTime=&size=10&offset=1 returned 200:OK:application/json\r\n2022-11-11 18:03:57.932 WARNING (MainThread) [alexapy.helpers] alexaapi.get_last_device_serial((<alexapy.alexalogin.AlexaLogin object at 0x7f542c428f10>,), {}): An error occured accessing AlexaAPI: An exception of type IndexError occurred. Arguments:\r\n('string index out of range',)\r\n2022-11-11 18:03:57.938 ERROR (MainThread) [custom_components.alexa_media] Error fetching alexa_media data: Error communicating with API: string index out of range\r\n2022-11-11 18:03:57.939 DEBUG (MainThread) [custom_components.alexa_media] Finished fetching alexa_media data in 2.326 seconds (success: False)\r\n```\r\n\r\n**Additional context**\r\n<!---Add any other context about the problem here.--->\r\n", "reactions": {"url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/1778/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/1778/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/1764", "repository_url": "https://api.github.com/repos/custom-components/alexa_media_player", "labels_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/1764/labels{/name}", "comments_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/1764/comments", "events_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/1764/events", "html_url": "https://github.com/custom-components/alexa_media_player/issues/1764", "id": 1428394148, "node_id": "I_kwDOCFMb385VI5Ck", "number": 1764, "title": "New default tts missing or misunderstanding?", "user": {"login": "pedolsky", "id": 71203830, "node_id": "MDQ6VXNlcjcxMjAzODMw", "avatar_url": "https://avatars.githubusercontent.com/u/71203830?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pedolsky", "html_url": "https://github.com/pedolsky", "followers_url": "https://api.github.com/users/pedolsky/followers", "following_url": "https://api.github.com/users/pedolsky/following{/other_user}", "gists_url": "https://api.github.com/users/pedolsky/gists{/gist_id}", "starred_url": "https://api.github.com/users/pedolsky/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pedolsky/subscriptions", "organizations_url": "https://api.github.com/users/pedolsky/orgs", "repos_url": "https://api.github.com/users/pedolsky/repos", "events_url": "https://api.github.com/users/pedolsky/events{/privacy}", "received_events_url": "https://api.github.com/users/pedolsky/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 983327104, "node_id": "MDU6TGFiZWw5ODMzMjcxMDQ=", "url": "https://api.github.com/repos/custom-components/alexa_media_player/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2022-10-29T18:23:50Z", "updated_at": "2022-11-02T07:11:30Z", "closed_at": "2022-11-02T07:11:30Z", "author_association": "NONE", "active_lock_reason": null, "body": "**Describe the bug**\r\nI dont know if it's really a bug or if I simply misunderstood the release note.\r\n\r\nAfter updating to v4.2.0 I've expected not to have to type `type: tts` anymore. But if I leave it out, the service won't work ('unknown error').\r\n\r\n**To Reproduce**\r\nTry to call the service without defining the notify type.\r\n\r\n**Expected behavior**\r\n\r\nexpected not to have to type `type: tts` anymore\r\n\r\n**Screenshots**\r\n<!---If applicable, add screenshots to help explain your problem.--->\r\n\r\n**System details**\r\n - Home-assistant (version): 2022.11.0b1\r\n - alexa_media  (version from `const.py` or HA startup): 4.2.0\r\n - alexapy (version from `pip show alexapy` or HA startup): 1.26.4\r\n - Amazon [2FA is enabled](https://github.com/custom-components/alexa_media_player/wiki/Configuration#enable-two-factor-authentication-for-your-amazon-account) (y/n). <!---We will not debug login issues if unanswered--->:  yes\r\n\r\n**Logs**\r\n\r\nLogger: homeassistant.helpers.script.websocket_api_script\r\nSource: custom_components/alexa_media/notify.py:242 \r\nIntegration: Alexa Media Player (documentation, issues) \r\nFirst occurred: 18:42:05 (1 occurrences) \r\nLast logged: 18:42:05\r\n\r\nwebsocket_api script: Error executing script. Unexpected error for call_service at pos 1: 'NoneType' object has no attribute 'get'\r\nTraceback (most recent call last):\r\n  File \"/usr/src/homeassistant/homeassistant/helpers/script.py\", line 451, in _async_step\r\n    await getattr(self, handler)()\r\n  File \"/usr/src/homeassistant/homeassistant/helpers/script.py\", line 684, in _async_call_service_step\r\n    await service_task\r\n  File \"/usr/src/homeassistant/homeassistant/core.py\", line 1744, in async_call\r\n    task.result()\r\n  File \"/usr/src/homeassistant/homeassistant/core.py\", line 1781, in _execute_service\r\n    await cast(Callable[[ServiceCall], Awaitable[None]], handler.job.target)(\r\n  File \"/usr/src/homeassistant/homeassistant/components/notify/legacy.py\", line 258, in _async_notify_message_service\r\n    await self.async_send_message(**kwargs)\r\n  File \"/config/custom_components/alexa_media/notify.py\", line 242, in async_send_message\r\n    data_type = data.get(\"type\", \"tts\")\r\nAttributeError: 'NoneType' object has no attribute 'get'\r\n\r\n\r\n**Additional context**\r\n", "reactions": {"url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/1764/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/1764/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/1753", "repository_url": "https://api.github.com/repos/custom-components/alexa_media_player", "labels_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/1753/labels{/name}", "comments_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/1753/comments", "events_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/1753/events", "html_url": "https://github.com/custom-components/alexa_media_player/issues/1753", "id": 1409390707, "node_id": "I_kwDOCFMb385UAZhz", "number": 1753, "title": "Unexpected error fetching alexa_media data: argument of type 'NoneType' is not iterable", "user": {"login": "jocamane", "id": 32019937, "node_id": "MDQ6VXNlcjMyMDE5OTM3", "avatar_url": "https://avatars.githubusercontent.com/u/32019937?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jocamane", "html_url": "https://github.com/jocamane", "followers_url": "https://api.github.com/users/jocamane/followers", "following_url": "https://api.github.com/users/jocamane/following{/other_user}", "gists_url": "https://api.github.com/users/jocamane/gists{/gist_id}", "starred_url": "https://api.github.com/users/jocamane/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jocamane/subscriptions", "organizations_url": "https://api.github.com/users/jocamane/orgs", "repos_url": "https://api.github.com/users/jocamane/repos", "events_url": "https://api.github.com/users/jocamane/events{/privacy}", "received_events_url": "https://api.github.com/users/jocamane/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 983327104, "node_id": "MDU6TGFiZWw5ODMzMjcxMDQ=", "url": "https://api.github.com/repos/custom-components/alexa_media_player/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2022-10-14T13:51:43Z", "updated_at": "2022-10-29T03:53:00Z", "closed_at": "2022-10-29T03:53:00Z", "author_association": "NONE", "active_lock_reason": null, "body": "**Describe the bug**\r\nerror message appears in the HA core log\r\n\r\n**To Reproduce**\r\n<!---Steps to reproduce the behavior:--->\r\n1. Go to LOGS\r\n2. See error\r\n\r\n**Expected behavior**\r\nI hoped there was no error\r\n\r\n**Screenshots**\r\n![image](https://user-images.githubusercontent.com/32019937/195861744-fb9b0dbc-229e-4b88-a8ec-38cecc2a82b7.png)\r\n\r\n**System details**\r\n - Home-assistant (version): 2022.9.7\r\n - alexa_media  (version from `const.py` or HA startup): 4.1.2\r\n - alexapy (version from `pip show alexapy` or HA startup): 1.26.3\r\n - Amazon [2FA is enabled]: YES\r\n\r\n**Logs**\r\nThis error originated from a custom integration.\r\n\r\nLogger: custom_components.alexa_media\r\nSource: custom_components/alexa_media/__init__.py:546\r\nIntegration: Alexa Media Player (documentation, issues)\r\nFirst occurred: 13:00:46 (1 occurrences)\r\nLast logged: 13:00:46\r\n\r\nUnexpected error fetching alexa_media data: argument of type 'NoneType' is not iterable\r\nTraceback (most recent call last):\r\n  File \"/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py\", line 205, in _async_refresh\r\n    self.data = await self._async_update_data()\r\n  File \"/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py\", line 164, in _async_update_data\r\n    return await self.update_method()\r\n  File \"/config/custom_components/alexa_media/__init__.py\", line 546, in async_update_data\r\n    if \"doNotDisturbDeviceStatusList\" in dnd:\r\nTypeError: argument of type 'NoneType' is not iterable\r\n\r\n\r\n**Additional context**\r\nRandom. I don't know when it happens\r\n", "reactions": {"url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/1753/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/1753/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/1722", "repository_url": "https://api.github.com/repos/custom-components/alexa_media_player", "labels_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/1722/labels{/name}", "comments_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/1722/comments", "events_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/1722/events", "html_url": "https://github.com/custom-components/alexa_media_player/issues/1722", "id": 1367093859, "node_id": "I_kwDOCFMb385RfDJj", "number": 1722, "title": "2 new errors that arise during startup after update to latest version w/ 2022.9", "user": {"login": "Petro31", "id": 35082313, "node_id": "MDQ6VXNlcjM1MDgyMzEz", "avatar_url": "https://avatars.githubusercontent.com/u/35082313?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Petro31", "html_url": "https://github.com/Petro31", "followers_url": "https://api.github.com/users/Petro31/followers", "following_url": "https://api.github.com/users/Petro31/following{/other_user}", "gists_url": "https://api.github.com/users/Petro31/gists{/gist_id}", "starred_url": "https://api.github.com/users/Petro31/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Petro31/subscriptions", "organizations_url": "https://api.github.com/users/Petro31/orgs", "repos_url": "https://api.github.com/users/Petro31/repos", "events_url": "https://api.github.com/users/Petro31/events{/privacy}", "received_events_url": "https://api.github.com/users/Petro31/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 983327104, "node_id": "MDU6TGFiZWw5ODMzMjcxMDQ=", "url": "https://api.github.com/repos/custom-components/alexa_media_player/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}, {"id": 983327107, "node_id": "MDU6TGFiZWw5ODMzMjcxMDc=", "url": "https://api.github.com/repos/custom-components/alexa_media_player/labels/help%20wanted", "name": "help wanted", "color": "008672", "default": true, "description": "Extra attention is needed"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 7, "created_at": "2022-09-08T23:32:29Z", "updated_at": "2023-03-23T03:18:29Z", "closed_at": "2022-10-11T20:46:11Z", "author_association": "NONE", "active_lock_reason": null, "body": "**Describe the bug**\r\nThere's 2 errors in the logs, it doesn't seem like I have control over these errors.\r\n\r\n**To Reproduce**\r\nI'm not sure if this can be reproduced, but the errors themselves are pretty easy to follow.\r\n\r\nError 1: discovery info doesn't have [\"config\"][\"email\"], no check for it.\r\nError 2:  the hass object is none when it shouldn't be.\r\n\r\n\r\n**Expected behavior**\r\nNo errors in logs.\r\n\r\n**Screenshots**\r\nNA\r\n\r\n**System details**\r\n - Home-assistant (version): 2022.9\r\n - Hassio (Yes/No): Supervised.\r\n - alexa_media  (version from `const.py` or HA startup): 4.1.2\r\n - alexapy (version from `pip show alexapy` or HA startup): 1.26.3\r\n - Amazon [2FA is enabled](https://github.com/custom-components/alexa_media_player/wiki/Configuration#enable-two-factor-authentication-for-your-amazon-account) (y/n). We will not debug login issues if unanswered: Y\r\n\r\n**Logs**\r\nError 1\r\n```\r\n2022-09-08 19:19:22.473 ERROR (MainThread) [homeassistant.components.switch] Error while setting up alexa_media platform for switch\r\nTraceback (most recent call last):\r\n  File \"/usr/src/homeassistant/homeassistant/helpers/entity_platform.py\", line 281, in _async_setup_platform\r\n    await asyncio.shield(task)\r\n  File \"/config/custom_components/alexa_media/switch.py\", line 44, in async_setup_platform\r\n    account = config[CONF_EMAIL] if config else discovery_info[\"config\"][CONF_EMAIL]\r\nKeyError: 'email'\r\n\r\n```\r\n\r\nError 2\r\n```\r\n2022-09-08 19:20:58.366 ERROR (MainThread) [homeassistant] Error doing job: _GatheringFuture exception was never retrieved\r\nTraceback (most recent call last):\r\n  File \"/config/custom_components/alexa_media/helpers.py\", line 156, in _catch_login_errors\r\n    result = await func(*args, **kwargs)\r\n  File \"/config/custom_components/alexa_media/media_player.py\", line 894, in async_update\r\n    or email not in self.hass.data[DATA_ALEXAMEDIA][\"accounts\"]\r\nAttributeError: 'NoneType' object has no attribute 'data'\r\n```\r\n", "reactions": {"url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/1722/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/1722/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/1678", "repository_url": "https://api.github.com/repos/custom-components/alexa_media_player", "labels_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/1678/labels{/name}", "comments_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/1678/comments", "events_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/1678/events", "html_url": "https://github.com/custom-components/alexa_media_player/issues/1678", "id": 1315738116, "node_id": "I_kwDOCFMb385ObJIE", "number": 1678, "title": "Unable to find service notify.alexa_media_last_called if last_called service is refreshing", "user": {"login": "danielbrunt57", "id": 49846893, "node_id": "MDQ6VXNlcjQ5ODQ2ODkz", "avatar_url": "https://avatars.githubusercontent.com/u/49846893?v=4", "gravatar_id": "", "url": "https://api.github.com/users/danielbrunt57", "html_url": "https://github.com/danielbrunt57", "followers_url": "https://api.github.com/users/danielbrunt57/followers", "following_url": "https://api.github.com/users/danielbrunt57/following{/other_user}", "gists_url": "https://api.github.com/users/danielbrunt57/gists{/gist_id}", "starred_url": "https://api.github.com/users/danielbrunt57/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/danielbrunt57/subscriptions", "organizations_url": "https://api.github.com/users/danielbrunt57/orgs", "repos_url": "https://api.github.com/users/danielbrunt57/repos", "events_url": "https://api.github.com/users/danielbrunt57/events{/privacy}", "received_events_url": "https://api.github.com/users/danielbrunt57/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 983327104, "node_id": "MDU6TGFiZWw5ODMzMjcxMDQ=", "url": "https://api.github.com/repos/custom-components/alexa_media_player/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}, {"id": 983327107, "node_id": "MDU6TGFiZWw5ODMzMjcxMDc=", "url": "https://api.github.com/repos/custom-components/alexa_media_player/labels/help%20wanted", "name": "help wanted", "color": "008672", "default": true, "description": "Extra attention is needed"}, {"id": 983327108, "node_id": "MDU6TGFiZWw5ODMzMjcxMDg=", "url": "https://api.github.com/repos/custom-components/alexa_media_player/labels/good%20first%20issue", "name": "good first issue", "color": "7057ff", "default": true, "description": "Good for newcomers"}, {"id": 2434431890, "node_id": "MDU6TGFiZWwyNDM0NDMxODkw", "url": "https://api.github.com/repos/custom-components/alexa_media_player/labels/no-issue-activity", "name": "no-issue-activity", "color": "ededed", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 36, "created_at": "2022-07-23T20:16:41Z", "updated_at": "2023-03-16T02:26:03Z", "closed_at": "2023-03-16T02:26:03Z", "author_association": "NONE", "active_lock_reason": null, "body": "This has recently started becoming an issue (within the last month or so?) but when I go to troubleshoot it minutes later, the service is there and working.\r\n```\r\nLogger: homeassistant.components.script.good_morning\r\nSource: helpers/script.py:1718\r\nIntegration: Script (documentation, issues)\r\nFirst occurred: 12:38:52 PM (2 occurrences)\r\nLast logged: 12:38:52 PM\r\n\r\nGood Morning: Choose at step 4: default: Error executing script. Service not found for call_service at pos 1: Unable to find service notify.alexa_media_last_called\r\nGood Morning: Error executing script. Service not found for choose at pos 4: Unable to find service notify.alexa_media_last_called\r\n```\r\n![image](https://user-images.githubusercontent.com/49846893/180621368-139cbcc2-bf10-40e0-909f-4fc54f969cb0.png)\r\n\r\n![image](https://user-images.githubusercontent.com/49846893/180621381-317f6832-5671-41ac-a28b-12f1c13510fc.png)\r\n```\r\nalias: Good Morning\r\nsequence:\r\n  - service: alexa_media.update_last_called\r\n    data: {}\r\n  - service: input_boolean.turn_off\r\n    data: {}\r\n    target:\r\n      entity_id: input_boolean.sleep_mode\r\n  - choose:\r\n      - conditions:\r\n          - condition: state\r\n            entity_id: binary_sensor.night_mode\r\n            state: 'off'\r\n        sequence:\r\n          - service: cover.set_cover_position\r\n            data:\r\n              position: '{{ states(\"input_number.bedroom_blind\") }}'\r\n            entity_id: cover.bedroom_blind\r\n    default:\r\n      - service: light.turn_on\r\n        data:\r\n          transition: 90\r\n          brightness_pct: 70\r\n        target:\r\n          area_id: bedroom\r\n  - choose:\r\n      - conditions:\r\n          - condition: state\r\n            entity_id: input_boolean.coffee_prepared\r\n            state: 'on'\r\n        sequence:\r\n          - service: script.activate_alexa_actionable_notification\r\n            data:\r\n              text: Would you like me to start your coffee?\r\n              event_id: actionable_notification_make_coffee\r\n              alexa_device: '{{ states(\"sensor.last_alexa\") }}'\r\n          - wait_for_trigger:\r\n              - platform: event\r\n                event_type: alexa_actionable_notification\r\n            timeout: '00:00:15'\r\n          - delay:\r\n              hours: 0\r\n              minutes: 0\r\n              seconds: 10\r\n              milliseconds: 0\r\n      - conditions:\r\n          - condition: numeric_state\r\n            entity_id: input_number.coffee\r\n            below: '18'\r\n        sequence:\r\n          - service: notify.alexa_media_last_called\r\n            data:\r\n              data:\r\n                type: tts\r\n              message: You forgot to buy coffee!\r\n      - conditions:\r\n          - condition: numeric_state\r\n            entity_id: script.bought_coffee_filters\r\n            below: '1'\r\n        sequence:\r\n          - service: notify.alexa_media_last_called\r\n            data:\r\n              data:\r\n                type: tts\r\n              message: You don't have any coffee filters!\r\n    default:\r\n      - service: notify.alexa_media_last_called\r\n        data:\r\n          message: I'm sorry, It looks like you'll have to make your own coffee\r\n          data:\r\n            type: tts\r\n      - delay:\r\n          hours: 0\r\n          minutes: 0\r\n          seconds: 6\r\n          milliseconds: 0\r\n  - service: notify.alexa_media_last_called\r\n    data:\r\n      message: >\r\n        The temperature outside is {{\r\n        states(\"sensor.outside_weather_temperature\")|round(1)|replace('.0','')\r\n        }} {% if states(\"sensor.outside_weather_temperature\")|replace('.0','')\r\n        != \"1\" -%} degrees {%- else -%} degree {%- endif -%} {% if\r\n        states(\"sensor.norton_court_realfeel_temperature\") != \"unknown\" and\r\n        states(\"sensor.norton_court_realfeel_temperature\") !=\r\n        states(\"sensor.lumi_lumi_weather_temperature\") %} but it feels like {{\r\n        states(\"sensor.norton_court_realfeel_temperature\") }} {%- if\r\n        states(\"sensor.norton_court_realfeel_temperature\")|replace('.0','') !=\r\n        \"1\" %} degrees.{%- else %} degree.{%- endif -%} {%- else %}. {%- endif\r\n        %} The living room is currently {{\r\n        state_attr(\"climate.living_room\",\"current_temperature\")|round(1,\"half\")|replace('.0','')\r\n        }} degrees and the heat is {%- if is_state(\"climate.living_room\", \"off\")\r\n        %} turned off. {%- else %} set to {{\r\n        state_attr(\"climate.living_room\",\"temperature\")|round(1,\"half\")|replace('.0','')\r\n        }} {%- endif %}\r\n      data:\r\n        type: tts\r\n  - delay:\r\n      hours: 0\r\n      minutes: 0\r\n      seconds: 15\r\n      milliseconds: 0\r\n  - choose:\r\n      - conditions:\r\n          - condition: or\r\n            conditions:\r\n              - condition: state\r\n                entity_id: sensor.season\r\n                state: fall\r\n              - condition: state\r\n                entity_id: sensor.season\r\n                state: winter\r\n          - condition: numeric_state\r\n            entity_id: climate.living_room\r\n            attribute: temperature\r\n            below: '20'\r\n        sequence:\r\n          - service: climate.set_preset_mode\r\n            data:\r\n              preset_mode: none\r\n            entity_id: climate.living_room\r\n          - service: climate.set_temperature\r\n            data:\r\n              temperature: 20\r\n            target:\r\n              entity_id: climate.living_room\r\n          - service: notify.alexa_media_last_called\r\n            data:\r\n              message: >\r\n                I've set the heat to {{\r\n                state_attr(\"climate.living_room\",\"temperature\")|replace('.0','')\r\n                }}\r\n              data:\r\n                type: tts\r\n          - delay:\r\n              hours: 0\r\n              minutes: 0\r\n              seconds: 4\r\n              milliseconds: 0\r\n    default: []\r\n  - choose:\r\n      - conditions:\r\n          - condition: state\r\n            entity_id: sensor.garbage\r\n            state: '0'\r\n          - condition: state\r\n            entity_id: input_boolean.garbage_is_out\r\n            state: 'off'\r\n          - condition: time\r\n            before: '08:30:00'\r\n            weekday:\r\n              - wed\r\n            after: '00:00:00'\r\n        sequence:\r\n          - service: notify.alexa_media_last_called\r\n            data:\r\n              message: You might still have time to put the garbage out.\r\n              data:\r\n                type: tts\r\n    default: []\r\n  - choose:\r\n      - conditions:\r\n          - condition: state\r\n            entity_id: sensor.recycling\r\n            state: '0'\r\n          - condition: state\r\n            entity_id: input_boolean.recycling_is_out\r\n            state: 'off'\r\n          - condition: time\r\n            before: '08:30:00'\r\n            weekday:\r\n              - thu\r\n              - fri\r\n            after: '00:00:00'\r\n        sequence:\r\n          - service: notify.alexa_media_last_called\r\n            data:\r\n              message: You might still have time to put the recycling out\r\n              data:\r\n                type: tts\r\n    default: []\r\n  - service: input_boolean.turn_off\r\n    data: {}\r\n    target:\r\n      entity_id: input_boolean.sleep_mode\r\nmode: single\r\nicon: hass:weather-sunset-up\r\n```", "reactions": {"url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/1678/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/1678/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/1661", "repository_url": "https://api.github.com/repos/custom-components/alexa_media_player", "labels_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/1661/labels{/name}", "comments_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/1661/comments", "events_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/1661/events", "html_url": "https://github.com/custom-components/alexa_media_player/issues/1661", "id": 1299725556, "node_id": "I_kwDOCFMb385NeDz0", "number": 1661, "title": "Echo and Echo Plus Temperature Sensor in Celsius Only", "user": {"login": "jstinesnc", "id": 58440965, "node_id": "MDQ6VXNlcjU4NDQwOTY1", "avatar_url": "https://avatars.githubusercontent.com/u/58440965?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jstinesnc", "html_url": "https://github.com/jstinesnc", "followers_url": "https://api.github.com/users/jstinesnc/followers", "following_url": "https://api.github.com/users/jstinesnc/following{/other_user}", "gists_url": "https://api.github.com/users/jstinesnc/gists{/gist_id}", "starred_url": "https://api.github.com/users/jstinesnc/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jstinesnc/subscriptions", "organizations_url": "https://api.github.com/users/jstinesnc/orgs", "repos_url": "https://api.github.com/users/jstinesnc/repos", "events_url": "https://api.github.com/users/jstinesnc/events{/privacy}", "received_events_url": "https://api.github.com/users/jstinesnc/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 983327104, "node_id": "MDU6TGFiZWw5ODMzMjcxMDQ=", "url": "https://api.github.com/repos/custom-components/alexa_media_player/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}, {"id": 983327108, "node_id": "MDU6TGFiZWw5ODMzMjcxMDg=", "url": "https://api.github.com/repos/custom-components/alexa_media_player/labels/good%20first%20issue", "name": "good first issue", "color": "7057ff", "default": true, "description": "Good for newcomers"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 16, "created_at": "2022-07-09T17:09:06Z", "updated_at": "2022-09-05T00:46:31Z", "closed_at": "2022-09-05T00:46:31Z", "author_association": "NONE", "active_lock_reason": null, "body": "I recently upgraded to 2022.7.2 of Home Assistant and upgraded to the latest version of Alexa Media Player. I am in the USA and have my temp preference set as Fahrenheit Pounds Imperial in Home Assistant under Settings>System>General. Previously, my echo temperature sensors displayed in degree Fahrenheit, but now they only display in Celsius.\r\n\r\nUnder Entity states the sensor has the following attributes:\r\nunit_of_measurement: \u00b0C\r\nfriendly_name: Dining Room Echo Plus Temperature\r\n\r\nI tried customizing another sensor to see if it would display properly by manually adding the following:\r\n\r\nsensor.utility_closet_echo_plus_temperature:\r\n  device_class: temperature\r\n  unit_of_measurement: \u00b0F\r\n  state_class: measurement\r\n  \r\nThis did not change the value to Fahrenheit,  but only changed the degree icon to \u00b0F.\r\n\r\nI've also tried adding only the following customization (removing the unit of measure):\r\n\r\nsensor.utility_closet_echo_plus_temperature:\r\n  device_class: temperature\r\n  state_class: measurement\r\n\r\nThis did not provide the ability to change the sensor from C to F. \r\n\r\nOther temperature sensors that are displaying properly show a dropdown setting for Unit of Measurement when clicking the gear icon for settings on the GUI dashboard. Alexa Media Player Echo Temperature Sensors don't display this dropdown.\r\n\r\n![image](https://user-images.githubusercontent.com/58440965/178115860-f3d412d3-f182-41bd-b9de-87137c427598.png)\r\n\r\n![image](https://user-images.githubusercontent.com/58440965/178115882-5d9c327d-5282-40ca-997a-802b669072f7.png)\r\n\r\n\r\nThis could be a bug in the new HA release, but I wanted to run it by you if perhaps something needs to be addressed in how the temperate sensor is created/defined through Alexa Media Player. Thanks.\r\n", "reactions": {"url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/1661/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/1661/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/1638", "repository_url": "https://api.github.com/repos/custom-components/alexa_media_player", "labels_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/1638/labels{/name}", "comments_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/1638/comments", "events_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/1638/events", "html_url": "https://github.com/custom-components/alexa_media_player/issues/1638", "id": 1268668187, "node_id": "I_kwDOCFMb385Lnlcb", "number": 1638, "title": "Race condition updating notify.alexa_media_last_called", "user": {"login": "lxpollitt", "id": 630494, "node_id": "MDQ6VXNlcjYzMDQ5NA==", "avatar_url": "https://avatars.githubusercontent.com/u/630494?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lxpollitt", "html_url": "https://github.com/lxpollitt", "followers_url": "https://api.github.com/users/lxpollitt/followers", "following_url": "https://api.github.com/users/lxpollitt/following{/other_user}", "gists_url": "https://api.github.com/users/lxpollitt/gists{/gist_id}", "starred_url": "https://api.github.com/users/lxpollitt/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lxpollitt/subscriptions", "organizations_url": "https://api.github.com/users/lxpollitt/orgs", "repos_url": "https://api.github.com/users/lxpollitt/repos", "events_url": "https://api.github.com/users/lxpollitt/events{/privacy}", "received_events_url": "https://api.github.com/users/lxpollitt/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 983327104, "node_id": "MDU6TGFiZWw5ODMzMjcxMDQ=", "url": "https://api.github.com/repos/custom-components/alexa_media_player/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2022-06-12T18:45:59Z", "updated_at": "2022-06-16T01:09:22Z", "closed_at": "2022-06-16T01:09:22Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "**Describe the bug**\r\nThere is a race condition in the updating of last_called status which can result in the old (previous) last_called media device being set as the target for `alexa_media_last_called`. \r\n\r\nWhen a newly called media device marks itself as last_called it triggers an update of the `alexa_media_last_called` target, but due to the async nature of the updating of last_called status of media devices, the old media device may not yet have marked itself as not being the last_called. Depending on the ordering of the list of devices this can result `notify.targets()` setting the older media device being as the target for `alexa_media_last_called`. \r\n\r\nIn many scenarios this race condition is corrected after a few seconds by the code in `media_player._update_notify_targets()` which is intended to detect and cope with HA versions < 2021.2.0 by using the toggle method. However, if the`alexa_media_last_called` service is called before this code runs, then the this in turn results in the last_called processing being executed again, which results in the old media_player being set as last_called again.\r\n\r\n\r\n**To Reproduce**\r\nSteps to reproduce the behavior:\r\n1. Create a HA script that calls `alexa_media.update_last_called ` followed by `notify.alexa_media_last_called` using tts.\r\n2. Create an Alexa routine with a voice command trigger 'Alexa, run my script' which initiates the HA script.\r\n3. In room X with echo device A, say 'Alexa, what time is it'. (Alexa responds on device A.)\r\n4. Move to room Y with echo device B and say 'Alex, run my script'.\r\n5. Depending on the ordering of the list of echo devices within the HA code, the script tts response will respond from the echo device A (the room where you asked what time it was). \r\n6. If step 5 did not demostrate the issue then repeat steps 3 to 5 in the opposite rooms (i.e. start with saying 'Alexa, what time is it\" in room Y with echo device B).\r\n\r\n**Expected behavior**\r\nThe script tts response should always be read from the echo device in the current room, not the previous room.\r\n\r\n**System details**\r\n - Home-assistant (version): 2022.6.3\r\n - alexa_media  (version from `const.py` or HA startup): 4.0.2\r\n\r\n**Logs**\r\nPlease provide [logs](https://github.com/custom-components/alexa_media_player/wiki/FAQ#how-do-i-enable-debug-logging-for-the-component). We'll be most likely asking for them anyway.\r\n```\r\n2022-06-12 19:41:42 DEBUG (MainThread) [custom_components.alexa_media] a***************e@g*******m: Updated last_called: {'serialNumber': 'G************44B', 'timestamp': 1655059302007, 'summary': ''}\r\n2022-06-12 19:41:42 DEBUG (MainThread) [custom_components.alexa_media] a***************e@g*******m: last_called changed: {'serialNumber': '6****************************d26', 'timestamp': 1655059182637, 'summary': 'alexa what time is it'} to {'serialNumber': 'G************44B', 'timestamp': 1655059302007, 'summary': ''}\r\n2022-06-12 19:41:42 DEBUG (MainThread) [custom_components.alexa_media.media_player] a***************e@g*******m: <Entity Alex's 2nd Echo Dot: standby> is last_called: G************44B\r\n2022-06-12 19:41:42 DEBUG (MainThread) [custom_components.alexa_media.media_player] a***************e@g*******m: Refreshing notify targets\r\n2022-06-12 19:41:42 DEBUG (MainThread) [custom_components.alexa_media.notify] a***************e@g*******m: Creating last_called target last_called using <Entity Alex's 2nd Echo Dot: standby>\r\n2022-06-12 19:41:42 DEBUG (MainThread) [custom_components.alexa_media.notify] a***************e@g*******m: Creating last_called target last_called using <Entity Alex's Sonos One: standby>\r\n2022-06-12 19:41:42 DEBUG (MainThread) [custom_components.alexa_media.notify] a***************e@g*******m: Creating last_called target last_called using <Entity Alex's 2nd Echo Dot: standby>\r\n2022-06-12 19:41:42 DEBUG (MainThread) [custom_components.alexa_media.notify] a***************e@g*******m: Creating last_called target last_called using <Entity Alex's Sonos One: standby>\r\n```\r\n\r\n**Additional context**\r\nI have coded a fix which I am currently testing and will submit a PR shortly.\r\n", "reactions": {"url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/1638/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/1638/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/1633", "repository_url": "https://api.github.com/repos/custom-components/alexa_media_player", "labels_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/1633/labels{/name}", "comments_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/1633/comments", "events_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/1633/events", "html_url": "https://github.com/custom-components/alexa_media_player/issues/1633", "id": 1265240325, "node_id": "I_kwDOCFMb385LagkF", "number": 1633, "title": "custom_components.alexa_media.sensor.TemperatureSensor'>) does not inherit SensorEntity", "user": {"login": "edestecd", "id": 107281, "node_id": "MDQ6VXNlcjEwNzI4MQ==", "avatar_url": "https://avatars.githubusercontent.com/u/107281?v=4", "gravatar_id": "", "url": "https://api.github.com/users/edestecd", "html_url": "https://github.com/edestecd", "followers_url": "https://api.github.com/users/edestecd/followers", "following_url": "https://api.github.com/users/edestecd/following{/other_user}", "gists_url": "https://api.github.com/users/edestecd/gists{/gist_id}", "starred_url": "https://api.github.com/users/edestecd/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/edestecd/subscriptions", "organizations_url": "https://api.github.com/users/edestecd/orgs", "repos_url": "https://api.github.com/users/edestecd/repos", "events_url": "https://api.github.com/users/edestecd/events{/privacy}", "received_events_url": "https://api.github.com/users/edestecd/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 983327104, "node_id": "MDU6TGFiZWw5ODMzMjcxMDQ=", "url": "https://api.github.com/repos/custom-components/alexa_media_player/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}, {"id": 983327107, "node_id": "MDU6TGFiZWw5ODMzMjcxMDc=", "url": "https://api.github.com/repos/custom-components/alexa_media_player/labels/help%20wanted", "name": "help wanted", "color": "008672", "default": true, "description": "Extra attention is needed"}, {"id": 983327108, "node_id": "MDU6TGFiZWw5ODMzMjcxMDg=", "url": "https://api.github.com/repos/custom-components/alexa_media_player/labels/good%20first%20issue", "name": "good first issue", "color": "7057ff", "default": true, "description": "Good for newcomers"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2022-06-08T20:06:37Z", "updated_at": "2022-06-26T02:22:36Z", "closed_at": "2022-06-26T02:22:36Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "**Describe the bug**\r\nGetting this error in logs: 2022-06-08 19:57:33 WARNING (MainThread) [homeassistant.helpers.entity] Temperature sensor sensor.living_room_echo_temperature (<class 'custom_components.alexa_media.sensor.TemperatureSensor'>) does not inherit SensorEntity, this will be unsupported in Home Assistant Core 2022.7.Please report it to the custom component author.\r\n\r\n**To Reproduce**\r\nSteps to reproduce the behavior:\r\n1. Install alexa_media_player\r\n2. Go to Settings -> Integrations -> Configure on Alexa Media and check `Include devices connected via Echo`\r\n\r\n3. Have an alexa 4th gen with temp sensor\r\n4. See error\r\n\r\n**Expected behavior**\r\nNo error in log\r\n\r\n\r\n**System details**\r\n - Home-assistant (version):  Home Assistant Core 2022.6.2\r\n\r\n - alexa_media  (version from `const.py` or HA startup): 4.0.2\r\n   - alexapy (version from `pip show alexapy` or HA startup): 1.26.0\r\n - Amazon [2FA is enabled](https://github.com/custom-components/alexa_media_player/wiki/Configuration#enable-two-factor-authentication-for-your-amazon-account) (y/n). We will not debug login issues if unanswered:  y\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/1633/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/1633/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/1604", "repository_url": "https://api.github.com/repos/custom-components/alexa_media_player", "labels_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/1604/labels{/name}", "comments_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/1604/comments", "events_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/1604/events", "html_url": "https://github.com/custom-components/alexa_media_player/issues/1604", "id": 1246517429, "node_id": "I_kwDOCFMb385KTFi1", "number": 1604, "title": "Warning logged for deprecation of async_get_registry", "user": {"login": "drthanwho", "id": 22405505, "node_id": "MDQ6VXNlcjIyNDA1NTA1", "avatar_url": "https://avatars.githubusercontent.com/u/22405505?v=4", "gravatar_id": "", "url": "https://api.github.com/users/drthanwho", "html_url": "https://github.com/drthanwho", "followers_url": "https://api.github.com/users/drthanwho/followers", "following_url": "https://api.github.com/users/drthanwho/following{/other_user}", "gists_url": "https://api.github.com/users/drthanwho/gists{/gist_id}", "starred_url": "https://api.github.com/users/drthanwho/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/drthanwho/subscriptions", "organizations_url": "https://api.github.com/users/drthanwho/orgs", "repos_url": "https://api.github.com/users/drthanwho/repos", "events_url": "https://api.github.com/users/drthanwho/events{/privacy}", "received_events_url": "https://api.github.com/users/drthanwho/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 983327104, "node_id": "MDU6TGFiZWw5ODMzMjcxMDQ=", "url": "https://api.github.com/repos/custom-components/alexa_media_player/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}, {"id": 983327108, "node_id": "MDU6TGFiZWw5ODMzMjcxMDg=", "url": "https://api.github.com/repos/custom-components/alexa_media_player/labels/good%20first%20issue", "name": "good first issue", "color": "7057ff", "default": true, "description": "Good for newcomers"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2022-05-24T12:59:54Z", "updated_at": "2022-05-29T06:42:40Z", "closed_at": "2022-05-29T06:42:40Z", "author_association": "NONE", "active_lock_reason": null, "body": "**Describe the bug**\r\nThe use of `async_get_registry` to access area, device and entity registries is deprecated as of Feb 2021 and will be removed in the future.  With 2022.6 a warning will now be logged. `async_get` should be used instead. \r\n\r\nTo avoid a lot of the same issues being created with the release of 2022.6 might be better to address this before its release.\r\n\r\n**To Reproduce**\r\nSteps to reproduce the behavior:\r\n1. Update HA Core latest 2022.6 dev version\r\n2. Look at the logs for deprecation warning\r\n\r\n**System details**\r\n - Home-assistant (version): core-2022.6.0.dev20220524\r\n - Hassio (Yes/No):  Yes\r\n - alexa_media (version from `const.py` or HA startup): 3.11.3\r\n - alexapy (version from `pip show alexapy` or HA startup): 1.25.5\r\n - Amazon [2FA is enabled](https://github.com/custom-components/alexa_media_player/wiki/Configuration#enable-two-factor-authentication-for-your-amazon-account) (y/n). We will not debug login issues if unanswered: Yes\r\n\r\n**Logs**\r\nPlease provide [logs](https://github.com/custom-components/alexa_media_player/wiki/FAQ#how-do-i-enable-debug-logging-for-the-component). We'll be most likely asking for them anyway.\r\n\r\n```\r\n2022-05-24 15:26:36 WARNING (MainThread) [homeassistant.helpers.frame] Detected integration that uses deprecated `async_get_registry` to access device registry, use async_get instead. Please report issue to the custom component author for alexa_media using this method at custom_components/alexa_media/__init__.py, line 625: device_registry = await dr.async_get_registry(hass)\r\n```\r\n\r\n**Additional context**\r\nAdd any other context about the problem here. \r\n", "reactions": {"url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/1604/reactions", "total_count": 1, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/1604/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/1553", "repository_url": "https://api.github.com/repos/custom-components/alexa_media_player", "labels_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/1553/labels{/name}", "comments_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/1553/comments", "events_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/1553/events", "html_url": "https://github.com/custom-components/alexa_media_player/issues/1553", "id": 1189178048, "node_id": "I_kwDOCFMb385G4WrA", "number": 1553, "title": "Error with latest Beta core 2022.4.0b1", "user": {"login": "grantclem", "id": 30598978, "node_id": "MDQ6VXNlcjMwNTk4OTc4", "avatar_url": "https://avatars.githubusercontent.com/u/30598978?v=4", "gravatar_id": "", "url": "https://api.github.com/users/grantclem", "html_url": "https://github.com/grantclem", "followers_url": "https://api.github.com/users/grantclem/followers", "following_url": "https://api.github.com/users/grantclem/following{/other_user}", "gists_url": "https://api.github.com/users/grantclem/gists{/gist_id}", "starred_url": "https://api.github.com/users/grantclem/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/grantclem/subscriptions", "organizations_url": "https://api.github.com/users/grantclem/orgs", "repos_url": "https://api.github.com/users/grantclem/repos", "events_url": "https://api.github.com/users/grantclem/events{/privacy}", "received_events_url": "https://api.github.com/users/grantclem/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 983327104, "node_id": "MDU6TGFiZWw5ODMzMjcxMDQ=", "url": "https://api.github.com/repos/custom-components/alexa_media_player/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}, {"id": 983327108, "node_id": "MDU6TGFiZWw5ODMzMjcxMDg=", "url": "https://api.github.com/repos/custom-components/alexa_media_player/labels/good%20first%20issue", "name": "good first issue", "color": "7057ff", "default": true, "description": "Good for newcomers"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2022-04-01T03:29:46Z", "updated_at": "2022-04-05T00:54:05Z", "closed_at": "2022-04-05T00:54:05Z", "author_association": "NONE", "active_lock_reason": null, "body": "**Describe the bug**\r\n![image](https://user-images.githubusercontent.com/30598978/161189012-f9c619bc-5dac-4c02-891d-58051d8f3d75.png)\r\n\r\nFeedback from Discord suggests the following \"That looks like custom components using the string instead of the enum for EntityCategory\"\r\n\r\nWorked without issue using - Home Assistant 2022.4.0b0\r\n\r\nhttps://github.com/home-assistant/core/releases\r\n\r\nDND switch is now not available:\r\n![image](https://user-images.githubusercontent.com/30598978/161189380-49c40982-83c1-423f-a3da-1ca6983fe9cc.png)\r\n\r\n\r\n**To Reproduce**\r\nSteps to reproduce the behavior:\r\n1. Go to '...'\r\n2. Click on '....'\r\n3. Scroll down to '....'\r\n4. See error\r\n\r\n**Expected behavior**\r\nA clear and concise description of what you expected to happen.\r\n\r\n**Screenshots**\r\nIf applicable, add screenshots to help explain your problem.\r\n\r\n**System details**\r\n - Home-assistant (version): Home Assistant 2022.4.0b1\r\n - Hassio (Yes/No): (Please note you may have to restart hassio 2-3 times to load the latest version of alexapy after an update. This looks like a HA bug).\r\n - alexa_media  (version from `const.py` or HA startup):  v3.11.0\r\n - alexapy (version from `pip show alexapy` or HA startup):\r\n - Amazon [2FA is enabled](https://github.com/custom-components/alexa_media_player/wiki/Configuration#enable-two-factor-authentication-for-your-amazon-account) (y/n). We will not debug login issues if unanswered: y\r\n\r\n**Logs**\r\n2022-04-01 10:33:08 ERROR (MainThread) [homeassistant.components.switch] Error adding entities for domain switch with platform alexa_media\r\nTraceback (most recent call last):\r\n  File \"/usr/src/homeassistant/homeassistant/helpers/entity_platform.py\", line 382, in async_add_entities\r\n    await asyncio.gather(*tasks)\r\n  File \"/usr/src/homeassistant/homeassistant/helpers/entity_platform.py\", line 510, in _async_add_entity\r\n    entry = entity_registry.async_get_or_create(\r\n  File \"/usr/src/homeassistant/homeassistant/helpers/entity_registry.py\", line 345, in async_get_or_create\r\n    return self.async_update_entity(\r\n  File \"/usr/src/homeassistant/homeassistant/helpers/entity_registry.py\", line 529, in async_update_entity\r\n    raise ValueError(\"entity_category must be a valid EntityCategory instance\")\r\nValueError: entity_category must be a valid EntityCategory instance\r\n\r\n**Additional context**\r\nAdd any other context about the problem here. \r\n", "reactions": {"url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/1553/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/1553/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/1490", "repository_url": "https://api.github.com/repos/custom-components/alexa_media_player", "labels_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/1490/labels{/name}", "comments_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/1490/comments", "events_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/1490/events", "html_url": "https://github.com/custom-components/alexa_media_player/issues/1490", "id": 1100611786, "node_id": "I_kwDOCFMb385BmgDK", "number": 1490, "title": "KeyError: 'P1M' Error adding entities for domain sensor with platform alexa_media", "user": {"login": "nholben", "id": 19359193, "node_id": "MDQ6VXNlcjE5MzU5MTkz", "avatar_url": "https://avatars.githubusercontent.com/u/19359193?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nholben", "html_url": "https://github.com/nholben", "followers_url": "https://api.github.com/users/nholben/followers", "following_url": "https://api.github.com/users/nholben/following{/other_user}", "gists_url": "https://api.github.com/users/nholben/gists{/gist_id}", "starred_url": "https://api.github.com/users/nholben/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nholben/subscriptions", "organizations_url": "https://api.github.com/users/nholben/orgs", "repos_url": "https://api.github.com/users/nholben/repos", "events_url": "https://api.github.com/users/nholben/events{/privacy}", "received_events_url": "https://api.github.com/users/nholben/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 983327104, "node_id": "MDU6TGFiZWw5ODMzMjcxMDQ=", "url": "https://api.github.com/repos/custom-components/alexa_media_player/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}, {"id": 983327107, "node_id": "MDU6TGFiZWw5ODMzMjcxMDc=", "url": "https://api.github.com/repos/custom-components/alexa_media_player/labels/help%20wanted", "name": "help wanted", "color": "008672", "default": true, "description": "Extra attention is needed"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2022-01-12T17:33:33Z", "updated_at": "2022-05-29T06:42:40Z", "closed_at": "2022-05-29T06:42:40Z", "author_association": "NONE", "active_lock_reason": null, "body": "**Describe the bug**\r\nAlexa Media Player generates errors on startup. Everything appears to work afterword. I have tried removing/reinstalling with 2FA key login method but the errors in the logs persist:\r\n\r\nError adding entities for domain sensor with platform alexa_media\r\nError while setting up alexa_media platform for sensor\r\n\r\n**To Reproduce**\r\nSteps to reproduce the behavior:\r\n1. Restart Home Assistant Core\r\n2. Check Logs\r\n\r\n**Expected behavior**\r\nComponent Starts up normally and produces no errors\r\n\r\n**System details**\r\n - Home-assistant (version): 2021.12.9\r\n - Hassio (Yes/No): Yes\r\n - alexa_media  (version from `const.py` or HA startup): 3.10.15\r\n - alexapy (version from `pip show alexapy` or HA startup): 1.25.3\r\n - Amazon [2FA is enabled](https://github.com/custom-components/alexa_media_player/wiki/Configuration#enable-two-factor-authentication-for-your-amazon-account) (y/n). We will not debug login issues if unanswered: Yes\r\n\r\n**Logs**\r\n2022-01-12 12:24:24 ERROR (MainThread) [homeassistant.components.sensor] Error while setting up alexa_media platform for sensor\r\nTraceback (most recent call last):\r\nFile \"/usr/src/homeassistant/homeassistant/helpers/entity_platform.py\", line 257, in _async_setup_platform\r\nawait asyncio.gather(*pending)\r\nFile \"/usr/src/homeassistant/homeassistant/helpers/entity_platform.py\", line 382, in async_add_entities\r\nawait asyncio.gather(*tasks)\r\nFile \"/usr/src/homeassistant/homeassistant/helpers/entity_platform.py\", line 613, in _async_add_entity\r\nawait entity.add_to_platform_finish()\r\nFile \"/usr/src/homeassistant/homeassistant/helpers/entity.py\", line 747, in add_to_platform_finish\r\nawait self.async_added_to_hass()\r\nFile \"/config/custom_components/alexa_media/sensor.py\", line 411, in async_added_to_hass\r\nawait self.async_update()\r\nFile \"/config/custom_components/alexa_media/sensor.py\", line 508, in async_update\r\nself.async_write_ha_state()\r\nFile \"/usr/src/homeassistant/homeassistant/helpers/entity.py\", line 505, in async_write_ha_state\r\nself._async_write_ha_state()\r\nFile \"/usr/src/homeassistant/homeassistant/helpers/entity.py\", line 541, in _async_write_ha_state\r\nextra_state_attributes = self.extra_state_attributes\r\nFile \"/config/custom_components/alexa_media/sensor.py\", line 643, in extra_state_attributes\r\nattr = super().extra_state_attributes\r\nFile \"/config/custom_components/alexa_media/sensor.py\", line 540, in extra_state_attributes\r\n\"recurrence\": self.recurrence,\r\nFile \"/config/custom_components/alexa_media/sensor.py\", line 529, in recurrence\r\nRECURRING_PATTERN[self._next.get(\"recurringPattern\")]\r\nKeyError: 'P1M'\r\n\r\n**Additional context**\r\nAdd any other context about the problem here. \r\n", "reactions": {"url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/1490/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/1490/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/1409", "repository_url": "https://api.github.com/repos/custom-components/alexa_media_player", "labels_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/1409/labels{/name}", "comments_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/1409/comments", "events_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/1409/events", "html_url": "https://github.com/custom-components/alexa_media_player/issues/1409", "id": 1050128865, "node_id": "I_kwDOCFMb384-l7Hh", "number": 1409, "title": "Websocket connection rejected by Amazon", "user": {"login": "alandtse", "id": 7086117, "node_id": "MDQ6VXNlcjcwODYxMTc=", "avatar_url": "https://avatars.githubusercontent.com/u/7086117?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alandtse", "html_url": "https://github.com/alandtse", "followers_url": "https://api.github.com/users/alandtse/followers", "following_url": "https://api.github.com/users/alandtse/following{/other_user}", "gists_url": "https://api.github.com/users/alandtse/gists{/gist_id}", "starred_url": "https://api.github.com/users/alandtse/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alandtse/subscriptions", "organizations_url": "https://api.github.com/users/alandtse/orgs", "repos_url": "https://api.github.com/users/alandtse/repos", "events_url": "https://api.github.com/users/alandtse/events{/privacy}", "received_events_url": "https://api.github.com/users/alandtse/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 983327104, "node_id": "MDU6TGFiZWw5ODMzMjcxMDQ=", "url": "https://api.github.com/repos/custom-components/alexa_media_player/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}, {"id": 983327107, "node_id": "MDU6TGFiZWw5ODMzMjcxMDc=", "url": "https://api.github.com/repos/custom-components/alexa_media_player/labels/help%20wanted", "name": "help wanted", "color": "008672", "default": true, "description": "Extra attention is needed"}, {"id": 1246346849, "node_id": "MDU6TGFiZWwxMjQ2MzQ2ODQ5", "url": "https://api.github.com/repos/custom-components/alexa_media_player/labels/alexapy", "name": "alexapy", "color": "e23ba8", "default": false, "description": "Issue relates to the API"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2021-11-10T17:50:18Z", "updated_at": "2021-11-16T05:47:22Z", "closed_at": "2021-11-16T05:47:22Z", "author_association": "COLLABORATOR", "active_lock_reason": null, "body": "**Describe the bug**\r\nA clear and concise description of what the bug is.\r\nWebsocket refuses to connect now. This results in the multitude of reauth issues people are facing.\r\n\r\n**To Reproduce**\r\nSteps to reproduce the behavior:\r\n1. Go to '...'\r\n2. Click on '....'\r\n3. Scroll down to '....'\r\n4. See error\r\n\r\n**Expected behavior**\r\nA clear and concise description of what you expected to happen.\r\n\r\n**Screenshots**\r\nIf applicable, add screenshots to help explain your problem.\r\n\r\n**System details**\r\n - Home-assistant (version): \r\n - Hassio (Yes/No): (Please note you may have to restart hassio 2-3 times to load the latest version of alexapy after an update. This looks like a HA bug).\r\n - alexa_media  (version from `const.py` or HA startup):\r\n - alexapy (version from `pip show alexapy` or HA startup):\r\n - Amazon [2FA is enabled](https://github.com/custom-components/alexa_media_player/wiki/Configuration#enable-two-factor-authentication-for-your-amazon-account) (y/n). We will not debug login issues if unanswered: \r\n\r\n**Logs**\r\nPlease provide [logs](https://github.com/custom-components/alexa_media_player/wiki/FAQ#how-do-i-enable-debug-logging-for-the-component). We'll be most likely asking for them anyway.\r\n\r\n**Additional context**\r\nAdd any other context about the problem here. \r\nhttps://github.com/Apollon77/alexa-remote/issues/132\r\nhttps://github.com/Apollon77/alexa-remote/commits/master/alexa-wsmqtt.js", "reactions": {"url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/1409/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/1409/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/1403", "repository_url": "https://api.github.com/repos/custom-components/alexa_media_player", "labels_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/1403/labels{/name}", "comments_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/1403/comments", "events_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/1403/events", "html_url": "https://github.com/custom-components/alexa_media_player/issues/1403", "id": 1046708297, "node_id": "I_kwDOCFMb384-Y4BJ", "number": 1403, "title": "Alexa media fails to load in Home assistant dev (2021.12)", "user": {"login": "Petro31", "id": 35082313, "node_id": "MDQ6VXNlcjM1MDgyMzEz", "avatar_url": "https://avatars.githubusercontent.com/u/35082313?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Petro31", "html_url": "https://github.com/Petro31", "followers_url": "https://api.github.com/users/Petro31/followers", "following_url": "https://api.github.com/users/Petro31/following{/other_user}", "gists_url": "https://api.github.com/users/Petro31/gists{/gist_id}", "starred_url": "https://api.github.com/users/Petro31/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Petro31/subscriptions", "organizations_url": "https://api.github.com/users/Petro31/orgs", "repos_url": "https://api.github.com/users/Petro31/repos", "events_url": "https://api.github.com/users/Petro31/events{/privacy}", "received_events_url": "https://api.github.com/users/Petro31/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 983327104, "node_id": "MDU6TGFiZWw5ODMzMjcxMDQ=", "url": "https://api.github.com/repos/custom-components/alexa_media_player/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 20, "created_at": "2021-11-07T10:13:40Z", "updated_at": "2021-12-08T19:12:45Z", "closed_at": "2021-11-23T09:37:29Z", "author_association": "NONE", "active_lock_reason": null, "body": "**Describe the bug**\r\nIn the daily/dev build, alexa media player fails to load.  It seems something in the backend changed.  I updated to the current daily (11/6) and this error is in the logs:\r\n```\r\n2021-11-07 05:04:27 ERROR (MainThread) [homeassistant.setup] Setup failed for alexa_media: unknown error\r\nTraceback (most recent call last):\r\n  File \"/usr/src/homeassistant/homeassistant/setup.py\", line 206, in _async_setup_component\r\n    component = integration.get_component()\r\n  File \"/usr/src/homeassistant/homeassistant/loader.py\", line 522, in get_component\r\n    cache[self.domain] = importlib.import_module(self.pkg_path)\r\n  File \"/usr/local/lib/python3.9/importlib/__init__.py\", line 127, in import_module\r\n    return _bootstrap._gcd_import(name[level:], package, level)\r\n  File \"<frozen importlib._bootstrap>\", line 1030, in _gcd_import\r\n  File \"<frozen importlib._bootstrap>\", line 1007, in _find_and_load\r\n  File \"<frozen importlib._bootstrap>\", line 986, in _find_and_load_unlocked\r\n  File \"<frozen importlib._bootstrap>\", line 680, in _load_unlocked\r\n  File \"<frozen importlib._bootstrap_external>\", line 850, in exec_module\r\n  File \"<frozen importlib._bootstrap>\", line 228, in _call_with_frames_removed\r\n  File \"/config/custom_components/alexa_media/__init__.py\", line 16, in <module>\r\n    from alexapy import (\r\n  File \"/usr/local/lib/python3.9/site-packages/alexapy/__init__.py\", line 16, in <module>\r\n    from .alexaapi import AlexaAPI\r\n  File \"/usr/local/lib/python3.9/site-packages/alexapy/alexaapi.py\", line 21, in <module>\r\n    from alexapy.aiohttp import ClientConnectionError, ClientResponse\r\n  File \"/usr/local/lib/python3.9/site-packages/alexapy/aiohttp/__init__.py\", line 6, in <module>\r\n    from .client import (\r\n  File \"/usr/local/lib/python3.9/site-packages/alexapy/aiohttp/client.py\", line 35, in <module>\r\n    from . import hdrs, http, payload\r\n  File \"/usr/local/lib/python3.9/site-packages/alexapy/aiohttp/http.py\", line 7, in <module>\r\n    from .http_parser import (\r\n  File \"/usr/local/lib/python3.9/site-packages/alexapy/aiohttp/http_parser.py\", line 15, in <module>\r\n    from .helpers import NO_EXTENSIONS, BaseTimerContext\r\n  File \"/usr/local/lib/python3.9/site-packages/alexapy/aiohttp/helpers.py\", line 667, in <module>\r\n    class CeilTimeout(async_timeout.timeout):\r\nTypeError: function() argument 'code' must be code, not str\r\n```\r\n\r\n**To Reproduce**\r\nUpdate to the latest dev version and load alexa_meda\r\n\r\n**Expected behavior**\r\nFor it to work.\r\n\r\n**Screenshots**\r\nN/A\r\n\r\n**System details**\r\n - Home-assistant (version): supervisor-2021.11.dev0401\r\n - Hassio (Yes/No): Supervised.\r\n - alexa_media  (version from `const.py` or HA startup): v3.10.10\r\n - alexapy (version from `pip show alexapy` or HA startup): 1.25.1\r\n - Amazon [2FA is enabled](https://github.com/custom-components/alexa_media_player/wiki/Configuration#enable-two-factor-authentication-for-your-amazon-account) (y/n). We will not debug login issues if unanswered:  y\r\n\r\n**Logs**\r\nPlease provide [logs](https://github.com/custom-components/alexa_media_player/wiki/FAQ#how-do-i-enable-debug-logging-for-the-component). We'll be most likely asking for them anyway.\r\n\r\n```\r\n2021-11-07 05:04:27 ERROR (MainThread) [homeassistant.setup] Setup failed for alexa_media: unknown error\r\nTraceback (most recent call last):\r\n  File \"/usr/src/homeassistant/homeassistant/setup.py\", line 206, in _async_setup_component\r\n    component = integration.get_component()\r\n  File \"/usr/src/homeassistant/homeassistant/loader.py\", line 522, in get_component\r\n    cache[self.domain] = importlib.import_module(self.pkg_path)\r\n  File \"/usr/local/lib/python3.9/importlib/__init__.py\", line 127, in import_module\r\n    return _bootstrap._gcd_import(name[level:], package, level)\r\n  File \"<frozen importlib._bootstrap>\", line 1030, in _gcd_import\r\n  File \"<frozen importlib._bootstrap>\", line 1007, in _find_and_load\r\n  File \"<frozen importlib._bootstrap>\", line 986, in _find_and_load_unlocked\r\n  File \"<frozen importlib._bootstrap>\", line 680, in _load_unlocked\r\n  File \"<frozen importlib._bootstrap_external>\", line 850, in exec_module\r\n  File \"<frozen importlib._bootstrap>\", line 228, in _call_with_frames_removed\r\n  File \"/config/custom_components/alexa_media/__init__.py\", line 16, in <module>\r\n    from alexapy import (\r\n  File \"/usr/local/lib/python3.9/site-packages/alexapy/__init__.py\", line 16, in <module>\r\n    from .alexaapi import AlexaAPI\r\n  File \"/usr/local/lib/python3.9/site-packages/alexapy/alexaapi.py\", line 21, in <module>\r\n    from alexapy.aiohttp import ClientConnectionError, ClientResponse\r\n  File \"/usr/local/lib/python3.9/site-packages/alexapy/aiohttp/__init__.py\", line 6, in <module>\r\n    from .client import (\r\n  File \"/usr/local/lib/python3.9/site-packages/alexapy/aiohttp/client.py\", line 35, in <module>\r\n    from . import hdrs, http, payload\r\n  File \"/usr/local/lib/python3.9/site-packages/alexapy/aiohttp/http.py\", line 7, in <module>\r\n    from .http_parser import (\r\n  File \"/usr/local/lib/python3.9/site-packages/alexapy/aiohttp/http_parser.py\", line 15, in <module>\r\n    from .helpers import NO_EXTENSIONS, BaseTimerContext\r\n  File \"/usr/local/lib/python3.9/site-packages/alexapy/aiohttp/helpers.py\", line 667, in <module>\r\n    class CeilTimeout(async_timeout.timeout):\r\nTypeError: function() argument 'code' must be code, not str\r\n```\r\n\r\n**Additional context**\r\nAdd any other context about the problem here. \r\n", "reactions": {"url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/1403/reactions", "total_count": 1, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/1403/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/1373", "repository_url": "https://api.github.com/repos/custom-components/alexa_media_player", "labels_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/1373/labels{/name}", "comments_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/1373/comments", "events_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/1373/events", "html_url": "https://github.com/custom-components/alexa_media_player/issues/1373", "id": 1014550180, "node_id": "I_kwDOCFMb3848eM6k", "number": 1373, "title": "Multiple reauth requests after successful login", "user": {"login": "TheDarthFather", "id": 23462204, "node_id": "MDQ6VXNlcjIzNDYyMjA0", "avatar_url": "https://avatars.githubusercontent.com/u/23462204?v=4", "gravatar_id": "", "url": "https://api.github.com/users/TheDarthFather", "html_url": "https://github.com/TheDarthFather", "followers_url": "https://api.github.com/users/TheDarthFather/followers", "following_url": "https://api.github.com/users/TheDarthFather/following{/other_user}", "gists_url": "https://api.github.com/users/TheDarthFather/gists{/gist_id}", "starred_url": "https://api.github.com/users/TheDarthFather/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/TheDarthFather/subscriptions", "organizations_url": "https://api.github.com/users/TheDarthFather/orgs", "repos_url": "https://api.github.com/users/TheDarthFather/repos", "events_url": "https://api.github.com/users/TheDarthFather/events{/privacy}", "received_events_url": "https://api.github.com/users/TheDarthFather/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 983327104, "node_id": "MDU6TGFiZWw5ODMzMjcxMDQ=", "url": "https://api.github.com/repos/custom-components/alexa_media_player/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 14, "created_at": "2021-10-03T21:45:42Z", "updated_at": "2021-10-04T10:23:37Z", "closed_at": "2021-10-04T10:23:24Z", "author_association": "NONE", "active_lock_reason": null, "body": "**Describe the bug** & **To Reproduce**\r\n\r\nAfter the last restart, the integration asked for reauthentification.\r\nAfter reauthentification, the integration apeared 3 times on the page (used to have 2  on the page since 1 year). \r\nI tried a few more times ... every time one more integration apeared.\r\nThe system works ... there is one connected instance .. but having another 6 disabled ones is 'not perfect' :)\r\n\r\n**Expected behavior**\r\nHave 1 instance of the integration .\r\n\r\n**Screenshots**\r\n![image](https://user-images.githubusercontent.com/23462204/135772285-d4591ff1-12fe-4fe3-a37e-8a145c4232a1.png)\r\n\r\n**System details**\r\n - Home-assistant (version): core-2021.9.7\r\n - Hassio (Yes/No): No (docker)\r\n - alexa_media  (version from `const.py` or HA startup): 3.10.8\r\n - alexapy (version from `pip show alexapy` or HA startup): 1.25.1\r\n - Amazon [2FA is enabled]: Yes\r\n\r\n**Logs**\r\nalexaapi.get_guard_details((<alexapy.alexalogin.AlexaLogin object at 0x7f970071bee0>,), {}): An error occured accessing AlexaAPI: An exception of type AlexapyLoginError occurred. Arguments: ('Login error detected; not contacting API',)\r\n11:34:18 PM \u2013 (WARNING) /usr/local/lib/python3.9/site-packages/alexapy/helpers.py - message first occurred at 11:29:09 PM and shows up 58 times\r\nalexaapi.get_guard_details((<alexapy.alexalogin.AlexaLogin object at 0x7f970071bee0>,), {}): A login error occured: An exception of type JSONDecodeError occurred. Arguments: ('Expecting value: line 1 column 1 (char 0)',)\r\n11:34:16 PM \u2013 (WARNING) /usr/local/lib/python3.9/site-packages/alexapy/helpers.py - message first occurred at 11:29:09 PM and shows up 6 times", "reactions": {"url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/1373/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/1373/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/1372", "repository_url": "https://api.github.com/repos/custom-components/alexa_media_player", "labels_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/1372/labels{/name}", "comments_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/1372/comments", "events_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/1372/events", "html_url": "https://github.com/custom-components/alexa_media_player/issues/1372", "id": 1014535981, "node_id": "I_kwDOCFMb3848eJct", "number": 1372, "title": "Missing translation but Lokalize report 100%", "user": {"login": "chemelli74", "id": 57354320, "node_id": "MDQ6VXNlcjU3MzU0MzIw", "avatar_url": "https://avatars.githubusercontent.com/u/57354320?v=4", "gravatar_id": "", "url": "https://api.github.com/users/chemelli74", "html_url": "https://github.com/chemelli74", "followers_url": "https://api.github.com/users/chemelli74/followers", "following_url": "https://api.github.com/users/chemelli74/following{/other_user}", "gists_url": "https://api.github.com/users/chemelli74/gists{/gist_id}", "starred_url": "https://api.github.com/users/chemelli74/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/chemelli74/subscriptions", "organizations_url": "https://api.github.com/users/chemelli74/orgs", "repos_url": "https://api.github.com/users/chemelli74/repos", "events_url": "https://api.github.com/users/chemelli74/events{/privacy}", "received_events_url": "https://api.github.com/users/chemelli74/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 983327104, "node_id": "MDU6TGFiZWw5ODMzMjcxMDQ=", "url": "https://api.github.com/repos/custom-components/alexa_media_player/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2021-10-03T20:49:01Z", "updated_at": "2021-10-14T03:00:56Z", "closed_at": "2021-10-14T03:00:56Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "**Describe the bug**\r\nSee attached screenshot: seems a translation is missing but Lokalize reports 100% for Italian.\r\n\r\n**To Reproduce**\r\nSteps to reproduce the behavior:\r\n1. Wait for reauth request\r\n2. Open the prompt\r\n\r\n**Expected behavior**\r\nSee the right string on Alexa reauth prompt.\r\n\r\n**Screenshots**\r\n\r\n![image](https://user-images.githubusercontent.com/57354320/135771023-74a4e33e-9dc3-416a-8f6e-a2e8c94da167.png)\r\n\r\n\r\n**System details**\r\n - Home-assistant (version): 2021.9.4\r\n - Hassio (Yes/No): No\r\n - alexa_media  (version from `const.py` or HA startup): v3.10.8\r\n - alexapy (version from `pip show alexapy` or HA startup):\r\n - Amazon [2FA is enabled](https://github.com/custom-components/alexa_media_player/wiki/Configuration#enable-two-factor-authentication-for-your-amazon-account) (y/n): yes\r\n\r\n**Logs**\r\nPlease provide [logs](https://github.com/custom-components/alexa_media_player/wiki/FAQ#how-do-i-enable-debug-logging-for-the-component). We'll be most likely asking for them anyway.\r\n\r\n**Additional context**\r\nAdd any other context about the problem here. \r\n", "reactions": {"url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/1372/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/1372/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/1354", "repository_url": "https://api.github.com/repos/custom-components/alexa_media_player", "labels_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/1354/labels{/name}", "comments_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/1354/comments", "events_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/1354/events", "html_url": "https://github.com/custom-components/alexa_media_player/issues/1354", "id": 963258404, "node_id": "MDU6SXNzdWU5NjMyNTg0MDQ=", "number": 1354, "title": "Include and Exclude problems", "user": {"login": "emufan", "id": 22775515, "node_id": "MDQ6VXNlcjIyNzc1NTE1", "avatar_url": "https://avatars.githubusercontent.com/u/22775515?v=4", "gravatar_id": "", "url": "https://api.github.com/users/emufan", "html_url": "https://github.com/emufan", "followers_url": "https://api.github.com/users/emufan/followers", "following_url": "https://api.github.com/users/emufan/following{/other_user}", "gists_url": "https://api.github.com/users/emufan/gists{/gist_id}", "starred_url": "https://api.github.com/users/emufan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/emufan/subscriptions", "organizations_url": "https://api.github.com/users/emufan/orgs", "repos_url": "https://api.github.com/users/emufan/repos", "events_url": "https://api.github.com/users/emufan/events{/privacy}", "received_events_url": "https://api.github.com/users/emufan/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 983327104, "node_id": "MDU6TGFiZWw5ODMzMjcxMDQ=", "url": "https://api.github.com/repos/custom-components/alexa_media_player/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}, {"id": 983327107, "node_id": "MDU6TGFiZWw5ODMzMjcxMDc=", "url": "https://api.github.com/repos/custom-components/alexa_media_player/labels/help%20wanted", "name": "help wanted", "color": "008672", "default": true, "description": "Extra attention is needed"}, {"id": 2434431890, "node_id": "MDU6TGFiZWwyNDM0NDMxODkw", "url": "https://api.github.com/repos/custom-components/alexa_media_player/labels/no-issue-activity", "name": "no-issue-activity", "color": "ededed", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 14, "created_at": "2021-08-07T16:09:17Z", "updated_at": "2022-04-04T02:51:34Z", "closed_at": "2022-04-04T02:51:34Z", "author_association": "NONE", "active_lock_reason": null, "body": "**Describe the bug**\r\nFirst of all, include and exclude are more than welcome! Prefer this over the disabling in UI, because I have a lot of decives, which are found via alexa media player, but not working (e.g. all the Sonos tuples, ...) and other devices, which I do not want to have in HA. So great to have include and exlcude!\r\n\r\n1. If I use include during setup and include either \"Echo Dot Wohnzimmer\" oder Echo Dot Wohnzimmer without \"\", the setup creates \"Echo Dot Wohnzimmer\", but my other device called \"Wohnzimmer\" as well. This is only not happening, if I exclude \"Wohnzimmer\" on top.\r\n\r\n2. If I include only \"Echo Dot Whatever\", the integration only set up the entity/device \"Echo Dot Whatever\", but not the alarm, timer, ... entities. Bug or feature? What can I do, that the corresponding entities are set up as well?\r\n\r\n**To Reproduce**\r\nUse include and exclude during setup.\r\n\r\n**Expected behavior**\r\nad 1., If I include only \"Echo Dot Wohnzimmer\", it should create only \"\"Echo Dot Wohnzimmer\" (with corresponding additional entities)  and not the other device called \"Wohnzimmer\" as well. \r\n\r\nad 2. If I include \"Echo Dot Whatever\", it should create this, but the corresponding additional entities as well.\r\n\r\n**System details**\r\n - Home-assistant (version): 2021.8.2\r\n - Hassio (Yes/No): Yes\r\n - alexa_media  (version from `const.py` or HA startup): Do not know how to find\r\n - alexapy (version from `pip show alexapy` or HA startup): Do not know how to find\r\n - Amazon [2FA is enabled](https://github.com/custom-components/alexa_media_player/wiki/Configuration#enable-two-factor-authentication-for-your-amazon-account) (y/n). We will not debug login issues if unanswered: y", "reactions": {"url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/1354/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/1354/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/1321", "repository_url": "https://api.github.com/repos/custom-components/alexa_media_player", "labels_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/1321/labels{/name}", "comments_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/1321/comments", "events_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/1321/events", "html_url": "https://github.com/custom-components/alexa_media_player/issues/1321", "id": 921661803, "node_id": "MDU6SXNzdWU5MjE2NjE4MDM=", "number": 1321, "title": "Notifications fail to setup due to unknown recurring pattern - Key Error: 'P2W'", "user": {"login": "CodexHere", "id": 59541213, "node_id": "MDQ6VXNlcjU5NTQxMjEz", "avatar_url": "https://avatars.githubusercontent.com/u/59541213?v=4", "gravatar_id": "", "url": "https://api.github.com/users/CodexHere", "html_url": "https://github.com/CodexHere", "followers_url": "https://api.github.com/users/CodexHere/followers", "following_url": "https://api.github.com/users/CodexHere/following{/other_user}", "gists_url": "https://api.github.com/users/CodexHere/gists{/gist_id}", "starred_url": "https://api.github.com/users/CodexHere/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/CodexHere/subscriptions", "organizations_url": "https://api.github.com/users/CodexHere/orgs", "repos_url": "https://api.github.com/users/CodexHere/repos", "events_url": "https://api.github.com/users/CodexHere/events{/privacy}", "received_events_url": "https://api.github.com/users/CodexHere/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 983327104, "node_id": "MDU6TGFiZWw5ODMzMjcxMDQ=", "url": "https://api.github.com/repos/custom-components/alexa_media_player/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2021-06-15T18:04:31Z", "updated_at": "2021-06-16T04:58:43Z", "closed_at": "2021-06-16T04:58:43Z", "author_association": "NONE", "active_lock_reason": null, "body": "**Describe the bug**\r\nOn boot, an error is produced while assumingly parsing the data coming from the Alexa API, and thus all Alexa entities and services in the system fail to reconcile. This breaks a major portion of my system that's relying on the services provided by the integration that are not starting up.\r\n\r\nThis is somewhat new, maybe within the last month or so, after an upgrade of everything. I figured it'd work itself out like other issues in the past have, but I guess this one I have to actually submit \ud83d\ude0b\r\n\r\nMy best guess is that it's related to a recurring reminder? I created a funky one, and I think that might have messed it up the expected values for recurring reminders.\r\n\r\n**To Reproduce**\r\nSteps to reproduce the behavior:\r\n1. Actually, I'm uncertain.... \r\n2. Attempt setting up a recurring reminder, i.e.: \"Alexa, Remind me every 8 weeks on Tuesday at noon Do something important\"\r\n\r\n**Expected behavior**\r\nAt best, the system should understand how to parse this information and reconcile the Entities an establish the Services available to HA.\r\nAt worst, it should have a more graceful failure mechanism that doesn't render a user's system entirely disfunctional. \r\n\r\n**Screenshots**\r\n\r\n**System details**\r\n - Home-assistant (version): 2021.6.3 - docker\r\n - Hassio (Yes/No): No\r\n - alexa_media  (version from `const.py` or HA startup): 3.10.5\r\n - alexapy (version from `pip show alexapy` or HA startup): 1.25.1\r\n - Amazon [2FA is enabled](https://github.com/custom-components/alexa_media_player/wiki/Configuration#enable-two-factor-authentication-for-your-amazon-account) (y/n). We will not debug login issues if unanswered: No\r\n\r\n**Logs**\r\nPlease provide [logs](https://github.com/custom-components/alexa_media_player/wiki/FAQ#how-do-i-enable-debug-logging-for-the-component). We'll be most likely asking for them anyway.\r\n\r\nLog URL: https://pastebin.com/raw/rrdNW3fK\r\n\r\n**Additional context**\r\nI've relied heavily on this integration to provide feedback throughout my system, and had a blast doing so... Unfortunately anytime this amazing component fails, it fails hard, and takes the whole system down with it. It'd be nice if there was a form of graceful degredation that allowed scripts/triggers/etc to continue working with a failure in the component recognized.\r\n\r\nI'll submit this as a feature request, because I'm sure it needs some thought and isn't something to expect overnight.", "reactions": {"url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/1321/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/1321/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/1318", "repository_url": "https://api.github.com/repos/custom-components/alexa_media_player", "labels_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/1318/labels{/name}", "comments_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/1318/comments", "events_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/1318/events", "html_url": "https://github.com/custom-components/alexa_media_player/issues/1318", "id": 912731317, "node_id": "MDU6SXNzdWU5MTI3MzEzMTc=", "number": 1318, "title": "AttributeError: 'AsyncClient' object has no attribute 'cookie_jar'", "user": {"login": "tfriedlx", "id": 5499934, "node_id": "MDQ6VXNlcjU0OTk5MzQ=", "avatar_url": "https://avatars.githubusercontent.com/u/5499934?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tfriedlx", "html_url": "https://github.com/tfriedlx", "followers_url": "https://api.github.com/users/tfriedlx/followers", "following_url": "https://api.github.com/users/tfriedlx/following{/other_user}", "gists_url": "https://api.github.com/users/tfriedlx/gists{/gist_id}", "starred_url": "https://api.github.com/users/tfriedlx/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tfriedlx/subscriptions", "organizations_url": "https://api.github.com/users/tfriedlx/orgs", "repos_url": "https://api.github.com/users/tfriedlx/repos", "events_url": "https://api.github.com/users/tfriedlx/events{/privacy}", "received_events_url": "https://api.github.com/users/tfriedlx/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 983327104, "node_id": "MDU6TGFiZWw5ODMzMjcxMDQ=", "url": "https://api.github.com/repos/custom-components/alexa_media_player/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}, {"id": 1246346849, "node_id": "MDU6TGFiZWwxMjQ2MzQ2ODQ5", "url": "https://api.github.com/repos/custom-components/alexa_media_player/labels/alexapy", "name": "alexapy", "color": "e23ba8", "default": false, "description": "Issue relates to the API"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 28, "created_at": "2021-06-06T08:58:47Z", "updated_at": "2021-11-19T04:59:25Z", "closed_at": "2021-11-19T04:59:25Z", "author_association": "NONE", "active_lock_reason": null, "body": "**Describe the bug**\r\nMy configuration stopped working a few days ago. When I now try to reconfigure it it always fails with an unknown error. \r\n\r\n**To Reproduce**\r\nSteps to reproduce the behavior:\r\n1. Go to the integrations page\r\n2. Click on reconfigure\r\n3. Use Login Proxy (without 2FA app key)\r\n4. Unknown error is shown after submitting\r\n\r\n**Expected behavior**\r\nThe integration should be configured correctly.\r\n\r\n\r\n**System details**\r\n - Home-assistant (version): 2021.6.1\r\n - Hassio (Yes/No): Yes\r\n - alexa_media  (version from `const.py` or HA startup):  3.10.5\r\n - alexapy (version from `pip show alexapy` or HA startup):\r\n - Amazon [2FA is enabled](https://github.com/custom-components/alexa_media_player/wiki/Configuration#enable-two-factor-authentication-for-your-amazon-account) (y/n). We will not debug login issues if unanswered: yes\r\n\r\n**Logs**\r\n2021-06-06 10:58:21 DEBUG (MainThread) [custom_components.alexa_media.config_flow] Using existing login\r\n2021-06-06 10:58:21 DEBUG (MainThread) [alexapy.alexalogin] Unable to generate OTP; 2FA app key not configured\r\n2021-06-06 10:58:21 DEBUG (MainThread) [authcaptureproxy.auth_capture_proxy] Refreshed 3 modifiers: ['autofill', 'prepend_relative_urls', 'change_host_to_proxy']\r\n2021-06-06 10:58:21 DEBUG (MainThread) [custom_components.alexa_media.config_flow] Starting proxy for t****s@f********g - amazon.de\r\n2021-06-06 10:58:21 DEBUG (MainThread) [custom_components.alexa_media.config_flow] Found existing proxy_view\r\n2021-06-06 10:58:21 ERROR (MainThread) [aiohttp.server] Error handling request\r\nTraceback (most recent call last):\r\nFile \"/usr/local/lib/python3.8/site-packages/aiohttp/web_protocol.py\", line 422, in _handle_request\r\nresp = await self._request_handler(request)\r\nFile \"/usr/local/lib/python3.8/site-packages/aiohttp/web_app.py\", line 499, in _handle\r\nresp = await handler(request)\r\nFile \"/usr/local/lib/python3.8/site-packages/aiohttp/web_middlewares.py\", line 119, in impl\r\nreturn await handler(request)\r\nFile \"/usr/src/homeassistant/homeassistant/components/http/security_filter.py\", line 60, in security_filter_middleware\r\nreturn await handler(request)\r\nFile \"/usr/src/homeassistant/homeassistant/components/http/forwarded.py\", line 202, in forwarded_middleware\r\nreturn await handler(request)\r\nFile \"/usr/src/homeassistant/homeassistant/components/http/request_context.py\", line 24, in request_context_middleware\r\nreturn await handler(request)\r\nFile \"/usr/src/homeassistant/homeassistant/components/http/ban.py\", line 78, in ban_middleware\r\nreturn await handler(request)\r\nFile \"/usr/src/homeassistant/homeassistant/components/http/auth.py\", line 144, in auth_middleware\r\nreturn await handler(request)\r\nFile \"/usr/src/homeassistant/homeassistant/components/http/view.py\", line 135, in handle\r\nresult = await result\r\nFile \"/usr/src/homeassistant/homeassistant/components/config/config_entries.py\", line 155, in post\r\nreturn await super().post(request, flow_id)\r\nFile \"/usr/src/homeassistant/homeassistant/components/http/data_validator.py\", line 63, in wrapper\r\nresult = await method(view, request, *args, **kwargs)\r\nFile \"/usr/src/homeassistant/homeassistant/helpers/data_entry_flow.py\", line 109, in post\r\nresult = await self._flow_mgr.async_configure(flow_id, data)\r\nFile \"/usr/src/homeassistant/homeassistant/data_entry_flow.py\", line 202, in async_configure\r\nresult = await self._async_handle_step(flow, cur_step[\"step_id\"], user_input)\r\nFile \"/usr/src/homeassistant/homeassistant/data_entry_flow.py\", line 260, in _async_handle_step\r\nresult: FlowResult = await getattr(flow, method)(user_input)\r\nFile \"/config/custom_components/alexa_media/config_flow.py\", line 356, in async_step_user\r\nreturn await self.async_step_start_proxy(user_input)\r\nFile \"/config/custom_components/alexa_media/config_flow.py\", line 383, in async_step_start_proxy\r\nself.proxy.session.cookie_jar.update_cookies(\r\nAttributeError: 'AsyncClient' object has no attribute 'cookie_jar'\r\n\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/1318/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/1318/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/1317", "repository_url": "https://api.github.com/repos/custom-components/alexa_media_player", "labels_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/1317/labels{/name}", "comments_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/1317/comments", "events_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/1317/events", "html_url": "https://github.com/custom-components/alexa_media_player/issues/1317", "id": 912402692, "node_id": "MDU6SXNzdWU5MTI0MDI2OTI=", "number": 1317, "title": "Timer offset by timezone offset in HA 2021.6.x", "user": {"login": "JamieP83", "id": 48566948, "node_id": "MDQ6VXNlcjQ4NTY2OTQ4", "avatar_url": "https://avatars.githubusercontent.com/u/48566948?v=4", "gravatar_id": "", "url": "https://api.github.com/users/JamieP83", "html_url": "https://github.com/JamieP83", "followers_url": "https://api.github.com/users/JamieP83/followers", "following_url": "https://api.github.com/users/JamieP83/following{/other_user}", "gists_url": "https://api.github.com/users/JamieP83/gists{/gist_id}", "starred_url": "https://api.github.com/users/JamieP83/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/JamieP83/subscriptions", "organizations_url": "https://api.github.com/users/JamieP83/orgs", "repos_url": "https://api.github.com/users/JamieP83/repos", "events_url": "https://api.github.com/users/JamieP83/events{/privacy}", "received_events_url": "https://api.github.com/users/JamieP83/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 983327104, "node_id": "MDU6TGFiZWw5ODMzMjcxMDQ=", "url": "https://api.github.com/repos/custom-components/alexa_media_player/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 12, "created_at": "2021-06-05T19:13:52Z", "updated_at": "2021-06-20T01:11:43Z", "closed_at": "2021-06-16T04:58:43Z", "author_association": "NONE", "active_lock_reason": null, "body": "**Describe the bug**\r\nHey,\r\nive noticed that my \"next_timer\" values are always out by 1hour? \r\nSo if i start a timer at 7:20pm, to go off in 20min (7:40pm), it actually goes back one hour and says its \"40min ago\"\r\n\r\ni'm pretty sure its the +1 daylight savings not being taken into account?\r\n\r\n![image](https://user-images.githubusercontent.com/48566948/120902705-b8c0a300-c639-11eb-9e61-ed3f64b63061.png)\r\n\r\n![image](https://user-images.githubusercontent.com/48566948/120902743-f9202100-c639-11eb-959a-9bc95e2b368f.png)\r\n\r\n\r\n\r\n**To Reproduce**\r\nSteps to reproduce the behavior:\r\n1. set a new alexa time to go off in 30min\r\n2. check out the result in home assistant, will be incorrect\r\n\r\n**Expected behavior**\r\nFor the time to show the correct value\r\n\r\n**Screenshots**\r\nSee above\r\n\r\n**System details**\r\n - Home-assistant (version): supervisor-2021.05.4\r\n - Hassio (Yes/No): yes\r\n - alexa_media  (version from `const.py` or HA startup): \"3.10.5\"\r\n - alexapy (version from `pip show alexapy` or HA startup): \r\n - Amazon [2FA is enabled](https://github.com/custom-components/alexa_media_player/wiki/Configuration#enable-two-factor-authentication-for-your-amazon-account) (y/n). y\r\n\r\n**Logs**\r\nPlease provide [logs](https://github.com/custom-components/alexa_media_player/wiki/FAQ#how-do-i-enable-debug-logging-for-the-component). We'll be most likely asking for them anyway.\r\n\r\n**Additional context**\r\nAdd any other context about the problem here. \r\n", "reactions": {"url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/1317/reactions", "total_count": 1, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 1}, "timeline_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/1317/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/1300", "repository_url": "https://api.github.com/repos/custom-components/alexa_media_player", "labels_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/1300/labels{/name}", "comments_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/1300/comments", "events_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/1300/events", "html_url": "https://github.com/custom-components/alexa_media_player/issues/1300", "id": 892626875, "node_id": "MDU6SXNzdWU4OTI2MjY4NzU=", "number": 1300, "title": "Strange disconnection when more than one account is set up", "user": {"login": "somar05", "id": 38601295, "node_id": "MDQ6VXNlcjM4NjAxMjk1", "avatar_url": "https://avatars.githubusercontent.com/u/38601295?v=4", "gravatar_id": "", "url": "https://api.github.com/users/somar05", "html_url": "https://github.com/somar05", "followers_url": "https://api.github.com/users/somar05/followers", "following_url": "https://api.github.com/users/somar05/following{/other_user}", "gists_url": "https://api.github.com/users/somar05/gists{/gist_id}", "starred_url": "https://api.github.com/users/somar05/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/somar05/subscriptions", "organizations_url": "https://api.github.com/users/somar05/orgs", "repos_url": "https://api.github.com/users/somar05/repos", "events_url": "https://api.github.com/users/somar05/events{/privacy}", "received_events_url": "https://api.github.com/users/somar05/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 983327104, "node_id": "MDU6TGFiZWw5ODMzMjcxMDQ=", "url": "https://api.github.com/repos/custom-components/alexa_media_player/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2021-05-16T08:50:10Z", "updated_at": "2021-05-18T03:39:04Z", "closed_at": "2021-05-18T03:39:04Z", "author_association": "NONE", "active_lock_reason": null, "body": "**Describe the bug**\r\nSomething happens when two accounts are configured: the setup process is ok, but the second account lost the entities after some minutes. The entities dissapear from the \"configuration - integration - Alexa media player - account\". A restart (or integration reload) fix temporally the issue, but  finally it happens again in minutes. Not sure since which version is happening this. Delete integrations for both accounts just solve the problem temporally, and the same if delete the integration and readed from HACS\r\n\r\n**To Reproduce**\r\nSteps to reproduce the behavior:\r\n1. Add 1st account as usual\r\n2. Check entities\r\n3. Add 2nd account\r\n4. Check entities\r\n5. Wait minutes\r\n6. Suddenly, the entities from 2nd account are not available\r\n\r\n**Expected behavior**\r\nMore that one account working fine as always\r\n\r\n**Screenshots**\r\n![image](https://user-images.githubusercontent.com/38601295/118391324-0007d500-b634-11eb-80c8-767c92673a5e.png)\r\n\r\n\r\n**System details**\r\n - Home-assistant (version): 2021.5.4\r\n - Hassio (Yes/No): yes\r\n - alexa_media  (version from `const.py` or HA startup): V3.10.4\r\n - alexapy (version from `pip show alexapy` or HA startup):\r\n - Amazon [2FA is enabled](https://github.com/custom-components/alexa_media_player/wiki/Configuration#enable-two-factor-authentication-for-your-amazon-account) (y/n). Yes\r\n\r\n**Logs**\r\nI'll provide if request\r\n\r\n**Additional context**\r\nAmazon domain: .es\r\n\r\nEDIT: testing with v3.10.0 and no issues by now", "reactions": {"url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/1300/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/1300/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/1275", "repository_url": "https://api.github.com/repos/custom-components/alexa_media_player", "labels_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/1275/labels{/name}", "comments_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/1275/comments", "events_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/1275/events", "html_url": "https://github.com/custom-components/alexa_media_player/issues/1275", "id": 875249838, "node_id": "MDU6SXNzdWU4NzUyNDk4Mzg=", "number": 1275, "title": "Temperature Sensor only showing for 1 Echo device", "user": {"login": "GTunney", "id": 4008830, "node_id": "MDQ6VXNlcjQwMDg4MzA=", "avatar_url": "https://avatars.githubusercontent.com/u/4008830?v=4", "gravatar_id": "", "url": "https://api.github.com/users/GTunney", "html_url": "https://github.com/GTunney", "followers_url": "https://api.github.com/users/GTunney/followers", "following_url": "https://api.github.com/users/GTunney/following{/other_user}", "gists_url": "https://api.github.com/users/GTunney/gists{/gist_id}", "starred_url": "https://api.github.com/users/GTunney/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/GTunney/subscriptions", "organizations_url": "https://api.github.com/users/GTunney/orgs", "repos_url": "https://api.github.com/users/GTunney/repos", "events_url": "https://api.github.com/users/GTunney/events{/privacy}", "received_events_url": "https://api.github.com/users/GTunney/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 983327104, "node_id": "MDU6TGFiZWw5ODMzMjcxMDQ=", "url": "https://api.github.com/repos/custom-components/alexa_media_player/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": {"login": "blm126", "id": 213540, "node_id": "MDQ6VXNlcjIxMzU0MA==", "avatar_url": "https://avatars.githubusercontent.com/u/213540?v=4", "gravatar_id": "", "url": "https://api.github.com/users/blm126", "html_url": "https://github.com/blm126", "followers_url": "https://api.github.com/users/blm126/followers", "following_url": "https://api.github.com/users/blm126/following{/other_user}", "gists_url": "https://api.github.com/users/blm126/gists{/gist_id}", "starred_url": "https://api.github.com/users/blm126/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/blm126/subscriptions", "organizations_url": "https://api.github.com/users/blm126/orgs", "repos_url": "https://api.github.com/users/blm126/repos", "events_url": "https://api.github.com/users/blm126/events{/privacy}", "received_events_url": "https://api.github.com/users/blm126/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "blm126", "id": 213540, "node_id": "MDQ6VXNlcjIxMzU0MA==", "avatar_url": "https://avatars.githubusercontent.com/u/213540?v=4", "gravatar_id": "", "url": "https://api.github.com/users/blm126", "html_url": "https://github.com/blm126", "followers_url": "https://api.github.com/users/blm126/followers", "following_url": "https://api.github.com/users/blm126/following{/other_user}", "gists_url": "https://api.github.com/users/blm126/gists{/gist_id}", "starred_url": "https://api.github.com/users/blm126/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/blm126/subscriptions", "organizations_url": "https://api.github.com/users/blm126/orgs", "repos_url": "https://api.github.com/users/blm126/repos", "events_url": "https://api.github.com/users/blm126/events{/privacy}", "received_events_url": "https://api.github.com/users/blm126/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 4, "created_at": "2021-05-04T08:52:44Z", "updated_at": "2021-05-08T01:28:52Z", "closed_at": "2021-05-08T01:28:52Z", "author_association": "NONE", "active_lock_reason": null, "body": "**Describe the bug**\r\nLogging a ticket here as discussed with @blm126 on the HA forums.\r\n\r\nI have 2 4th Gen echo devices with embedded temp sensor. Only 1 of this devices adds a temperature sensor entity on HA.\r\n\r\nRhys Bedroom Echo - Working fine\r\nMaster Bedroom Echo - No temp sensor\r\n\r\n**Expected behavior**\r\nTemperature Sensor entity to appear in entity lists under Master Bedroom Echo temperature Sensor.\r\n\r\n**System details**\r\n - Home-assistant (version): Home Assistant 2021.4.6\r\n - Hassio (Yes/No):  No\r\n - alexa_media  (version from `const.py` or HA startup): 3.10.0\r\n - alexapy (version from `pip show alexapy` or HA startup):\r\n - Amazon [2FA is enabled]: Yes\r\n\r\n**Logs**\r\nDebug logs which you asked for on HA forums, hopefully I have captured logs from the correct place.\r\n\r\nhttps://pastebin.com/QzCizhW2\r\n", "reactions": {"url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/1275/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/1275/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/1217", "repository_url": "https://api.github.com/repos/custom-components/alexa_media_player", "labels_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/1217/labels{/name}", "comments_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/1217/comments", "events_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/1217/events", "html_url": "https://github.com/custom-components/alexa_media_player/issues/1217", "id": 831948976, "node_id": "MDU6SXNzdWU4MzE5NDg5NzY=", "number": 1217, "title": "Issue with DST time change and Alarms", "user": {"login": "roussell", "id": 3043951, "node_id": "MDQ6VXNlcjMwNDM5NTE=", "avatar_url": "https://avatars.githubusercontent.com/u/3043951?v=4", "gravatar_id": "", "url": "https://api.github.com/users/roussell", "html_url": "https://github.com/roussell", "followers_url": "https://api.github.com/users/roussell/followers", "following_url": "https://api.github.com/users/roussell/following{/other_user}", "gists_url": "https://api.github.com/users/roussell/gists{/gist_id}", "starred_url": "https://api.github.com/users/roussell/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/roussell/subscriptions", "organizations_url": "https://api.github.com/users/roussell/orgs", "repos_url": "https://api.github.com/users/roussell/repos", "events_url": "https://api.github.com/users/roussell/events{/privacy}", "received_events_url": "https://api.github.com/users/roussell/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 983327104, "node_id": "MDU6TGFiZWw5ODMzMjcxMDQ=", "url": "https://api.github.com/repos/custom-components/alexa_media_player/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2021-03-15T15:52:25Z", "updated_at": "2021-03-16T05:15:31Z", "closed_at": "2021-03-16T05:15:12Z", "author_association": "NONE", "active_lock_reason": null, "body": "**Describe the bug**\r\nI use \"next alarm\" to start various automations when we wake up each morning; to that end I created a template sensor with this template:\r\n\r\n`{{ as_timestamp(states('sensor.terry_s_2nd_echo_dot_next_alarm')) | timestamp_custom('%H:%M') }}`\r\n\r\nThis has worked well for many months, but the time changed this past weekend and now if I set an alarm on the templated Echo device (for example) at 6:00am, the time shown by the template is 7:00, 1 hour ahead of whatever time I asked Alexa to set.\r\n\r\nI\u2019ve checked the Echo Devices, the server time (I run on Debian Supervised), and the docker containers. All report the correct time, so I think it\u2019s either my template, or the integration.\r\n\r\n**To Reproduce**\r\nSteps to reproduce the behavior: (Substitute appropriate times/intervals to reproduce locally. The times/intervals I used are shown below)\r\n1.  10:00am local time, I watched an alexa device from the HA Integrations page while issusing the following verbal commands:\r\n\r\n2. Click Path: (in HA) Configuration-->Integrations--> Alexa Media Player--> xxDevices-->{Choose Alexa Device}-->watch Entities Panel while uttering commands below\r\n3. Say:\r\n    \u201cAlexa, set an alarm for two pm\u201d\r\n    \u201cAlexa, set a reminder for test at two pm\u201d\r\n    \u201cAlexa, set a timer for 4 hours\u201d\r\n\r\n**Expected behavior**\r\nI should have had \u201cIn 4 hours\u201d (2:00pm local time) for each item, however, as you can see from the image, the alarm added an hour. However, the Next Alarm time was ahead by 1 hour.\r\n\r\n**Screenshots**\r\n![IMG_3779](https://user-images.githubusercontent.com/3043951/111181486-0ae2b280-857c-11eb-9658-dbf577c7b079.jpg)\r\n\r\n\r\n**System details**\r\n\r\n\r\nI run Home assistant Supervised:\r\n\r\nHost OS: Debian 10 \r\nHA version: \r\nSupervisor: supervisor-2021.03.4\r\nHACS: 1.11.3\r\nAlexa Media Player: v3.8.4\r\n\r\n - Home-assistant (version): core-2021.3.4\r\n - Hassio (Yes/No): Yes, version supervisor-2021.03.4\r\n - alexa_media  (version from `const.py` or HA startup): v3.8.4\r\n - alexapy (version from `pip show alexapy` or HA startup): 1.24.4\r\n - Amazon [2FA is enabled] Yes.\r\n\r\n**Logs**\r\nNothing generated in logs\r\n\r\n**Additional context**\r\nI run a supervised install onto of Debian 10\r\n\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/1217/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/1217/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/1187", "repository_url": "https://api.github.com/repos/custom-components/alexa_media_player", "labels_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/1187/labels{/name}", "comments_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/1187/comments", "events_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/1187/events", "html_url": "https://github.com/custom-components/alexa_media_player/issues/1187", "id": 808735537, "node_id": "MDU6SXNzdWU4MDg3MzU1Mzc=", "number": 1187, "title": "Failed 2SV Authentication at amazon.com", "user": {"login": "tgpaul-ha", "id": 53988861, "node_id": "MDQ6VXNlcjUzOTg4ODYx", "avatar_url": "https://avatars.githubusercontent.com/u/53988861?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tgpaul-ha", "html_url": "https://github.com/tgpaul-ha", "followers_url": "https://api.github.com/users/tgpaul-ha/followers", "following_url": "https://api.github.com/users/tgpaul-ha/following{/other_user}", "gists_url": "https://api.github.com/users/tgpaul-ha/gists{/gist_id}", "starred_url": "https://api.github.com/users/tgpaul-ha/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tgpaul-ha/subscriptions", "organizations_url": "https://api.github.com/users/tgpaul-ha/orgs", "repos_url": "https://api.github.com/users/tgpaul-ha/repos", "events_url": "https://api.github.com/users/tgpaul-ha/events{/privacy}", "received_events_url": "https://api.github.com/users/tgpaul-ha/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 983327104, "node_id": "MDU6TGFiZWw5ODMzMjcxMDQ=", "url": "https://api.github.com/repos/custom-components/alexa_media_player/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}, {"id": 2748159907, "node_id": "MDU6TGFiZWwyNzQ4MTU5OTA3", "url": "https://api.github.com/repos/custom-components/alexa_media_player/labels/authcaptureproxy", "name": "authcaptureproxy", "color": "6D8DCE", "default": false, "description": "Issue relates to the proxy library"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 10, "created_at": "2021-02-15T18:12:41Z", "updated_at": "2021-02-20T15:23:09Z", "closed_at": "2021-02-20T06:24:21Z", "author_association": "NONE", "active_lock_reason": null, "body": "**Describe the bug**\r\nThe steps to authenticate Alexa Media Player with amazon.com results in a failure indicating \"There was a problem.\"\r\n\r\n**To Reproduce**\r\nSteps to reproduce the behavior:\r\nAdd Alexa Media Player integration and configure per 2SV authentication as described in the wiki\r\nFollow the instructions on the website.\r\nNote that I am presented with a total of FOUR screens:\r\n- Initial Alexa at amazon.com login (add credentials if not pre-populated from integration configuration; click button to login)\r\n- A second Alexa at amazon.com login with CAPTCHA (add credentials if not pre-populated from previous step; input CAPTCHA; click button to login)\r\n- A screen to request OTP (first screenshot); I only had authenticator app enabled when the screenshot was taken.  I confirmed this issue still exists when a phone text option is available (and the screen correctly reflects these options); click button to request\r\n- Back to the login with error message (second screenshot)\r\n\r\n**Expected behavior**\r\nAuthentication is successful and Alexa Media Player is able to access the account.\r\n\r\n**Screenshots**\r\nSee attached\r\n\r\n**System details**\r\n - Home-assistant (version): core-2021.2.1\r\n - Hassio (Yes/No): Yes HassOS 5.10\r\n - alexa_media: 3.8.0\r\n - alexapy (version from `pip show alexapy` or HA startup): Not sure; having trouble finding it\r\n - Amazon [2FA is enabled]: Y\r\n\r\n**Logs**\r\nAttached\r\nI had trouble finding the .html files despite checking \"Advanced Debugging\" in the integration.  I did not try creating an alexa_media.accounts entry in the config because I thought it might have been redundant with enabling it via the integration screen.  Let me know if this is not the case and whether the HTML in the logs isn't sufficient.\r\n\r\n**Additional context**\r\n![alexa1](https://user-images.githubusercontent.com/53988861/107981088-75a9c980-6f8f-11eb-8b42-9776632a8dec.png)\r\n![alexa2](https://user-images.githubusercontent.com/53988861/107981099-780c2380-6f8f-11eb-9e99-ed89cb59a454.png)\r\n![halogs.txt](https://github.com/custom-components/alexa_media_player/files/5985760/halogs.txt)\r\n", "reactions": {"url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/1187/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/1187/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/1178", "repository_url": "https://api.github.com/repos/custom-components/alexa_media_player", "labels_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/1178/labels{/name}", "comments_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/1178/comments", "events_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/1178/events", "html_url": "https://github.com/custom-components/alexa_media_player/issues/1178", "id": 804169490, "node_id": "MDU6SXNzdWU4MDQxNjk0OTA=", "number": 1178, "title": "Queue delay blocks successive steps in a script", "user": {"login": "friggeri", "id": 106686, "node_id": "MDQ6VXNlcjEwNjY4Ng==", "avatar_url": "https://avatars.githubusercontent.com/u/106686?v=4", "gravatar_id": "", "url": "https://api.github.com/users/friggeri", "html_url": "https://github.com/friggeri", "followers_url": "https://api.github.com/users/friggeri/followers", "following_url": "https://api.github.com/users/friggeri/following{/other_user}", "gists_url": "https://api.github.com/users/friggeri/gists{/gist_id}", "starred_url": "https://api.github.com/users/friggeri/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/friggeri/subscriptions", "organizations_url": "https://api.github.com/users/friggeri/orgs", "repos_url": "https://api.github.com/users/friggeri/repos", "events_url": "https://api.github.com/users/friggeri/events{/privacy}", "received_events_url": "https://api.github.com/users/friggeri/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 983327104, "node_id": "MDU6TGFiZWw5ODMzMjcxMDQ=", "url": "https://api.github.com/repos/custom-components/alexa_media_player/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 9, "created_at": "2021-02-09T03:23:32Z", "updated_at": "2021-02-15T04:35:15Z", "closed_at": "2021-02-15T04:35:15Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "**Describe the bug**\r\nWhen executing a script containing several calls to alexa media player (either through `notify.alexa_media` or `media_player.play_media`), successive calls to the services aren't properly batched together using the \"queue delay\" logic, instead they are being sent independently. This causes the device to not wait until it finishes saying one sentence before jumping to the next one, thus interrupting itself. \r\n\r\n**To Reproduce**\r\n\r\n0. Verify that queue_delay is set to 1.5 in the settings\r\n1. Create a script containing the following (this is a toy example for repro, I'm aware one could only issue one call to `notify.alexa_media` with a long text, however this would not solve the issue of chaining different calls, such as TTS, then weather, then start music):\r\n\r\n```yaml\r\nalias: Alexa Repro\r\nsequence:\r\n  - service: notify.alexa_media\r\n    data:\r\n      message: This text will take at least one second and a half to be read out loud\r\n      data:\r\n        type: tts\r\n      target:\r\n        - media_player.living_room_echo_dot\r\n  - service: notify.alexa_media\r\n    data:\r\n      message: This text will take at least one second and a half to be read out loud\r\n      data:\r\n        type: tts\r\n      target:\r\n        - media_player.living_room_echo_dot\r\n  - service: notify.alexa_media\r\n    data:\r\n      message: This text will take at least one second and a half to be read out loud\r\n      data:\r\n        type: tts\r\n      target:\r\n        - media_player.living_room_echo_dot\r\nmode: single\r\n```\r\n\r\n2. Execute the script.\r\n3. Observe that the TTS gets interrupted on the first 2 calls.\r\n\r\n**Expected behavior**\r\nAll calls are batched together and Alexa says each of the sentences until the end.\r\n\r\n**System details**\r\n - Home-assistant (version): 2021.2.1 (Docker)\r\n - Hassio (Yes/No): No\r\n - alexa_media  (version from `const.py` or HA startup): 3.8.0\r\n - alexapy (version from `pip show alexapy` or HA startup): 1.24.0\r\n - Amazon [2FA is enabled](https://github.com/custom-components/alexa_media_player/wiki/Configuration#enable-two-factor-authentication-for-your-amazon-account) (y/n). y\r\n\r\n**Logs**\r\n```\r\n2021-02-08 19:58:39 DEBUG (MainThread) [custom_components.alexa_media.notify] Message: This text will take at least one second and a half to be read out loud, kwargs: {'target': ['media_player.living_room_echo_dot'], 'data': {'type': 'tts'}, 'message': 'This text will take at least one second and a half to be read out loud'}\r\n2021-02-08 19:58:39 DEBUG (MainThread) [custom_components.alexa_media.notify] Target type: <class 'list'>\r\n2021-02-08 19:58:39 DEBUG (MainThread) [custom_components.alexa_media.notify] Processing: media_player.living_room_echo_dot\r\n2021-02-08 19:58:39 DEBUG (MainThread) [custom_components.alexa_media.notify] Processed Target by string: ['media_player.living_room_echo_dot']\r\n2021-02-08 19:58:39 DEBUG (MainThread) [custom_components.alexa_media.notify] TTS by <Entity Living Room Echo Dot: standby> : This text will take at least one second and a half to be read out loud\r\n2021-02-08 19:58:40 DEBUG (MainThread) [alexapy.alexaapi] a****n@f**********t: Creating sequence for 1 items\r\n2021-02-08 19:58:40 DEBUG (MainThread) [alexapy.alexaapi] a****n@f**********t: Running behavior with data: {\"behaviorId\": \"PREVIEW\", \"sequenceJson\": \"{\\\"@type\\\": \\\"com.amazon.alexa.behaviors.model.Sequence\\\", \\\"startNode\\\": {\\\"@type\\\": \\\"com.amazon.alexa.behaviors.model.SerialNode\\\", \\\"nodesToExecute\\\": [{\\\"@type\\\": \\\"com.amazon.alexa.behaviors.model.OpaquePayloadOperationNode\\\", \\\"type\\\": \\\"Alexa.Speak\\\", \\\"operationPayload\\\": {\\\"deviceType\\\": \\\"A32DOYMUN6DTXA\\\", \\\"deviceSerialNumber\\\": \\\"G******************R\\\", \\\"locale\\\": \\\"en-us\\\", \\\"customerId\\\": \\\"A1WBE5ZIVK5RWJ\\\", \\\"textToSpeak\\\": \\\"This text will take at least one second and a half to be read out loud\\\", \\\"target\\\": {\\\"customerId\\\": \\\"A1WBE5ZIVK5RWJ\\\", \\\"devices\\\": [{\\\"deviceSerialNumber\\\": \\\"G******************R\\\", \\\"deviceTypeId\\\": \\\"A32DOYMUN6DTXA\\\"}]}, \\\"skillId\\\": \\\"amzn1.ask.1p.saysomething\\\"}}]}}\", \"status\": \"ENABLED\"}\r\n2021-02-08 19:58:40 DEBUG (MainThread) [alexapy.alexaapi] a****n@f**********t: POST: https://alexa.amazon.com/api/behaviors/preview returned 200:OK:application/octet-stream\r\n2021-02-08 19:58:40 DEBUG (MainThread) [custom_components.alexa_media.notify] Message: This text will take at least one second and a half to be read out loud, kwargs: {'target': ['media_player.living_room_echo_dot'], 'data': {'type': 'tts'}, 'message': 'This text will take at least one second and a half to be read out loud'}\r\n2021-02-08 19:58:40 DEBUG (MainThread) [custom_components.alexa_media.notify] Target type: <class 'list'>\r\n2021-02-08 19:58:40 DEBUG (MainThread) [custom_components.alexa_media.notify] Processing: media_player.living_room_echo_dot\r\n2021-02-08 19:58:40 DEBUG (MainThread) [custom_components.alexa_media.notify] Processed Target by string: ['media_player.living_room_echo_dot']\r\n2021-02-08 19:58:40 DEBUG (MainThread) [custom_components.alexa_media.notify] TTS by <Entity Living Room Echo Dot: standby> : This text will take at least one second and a half to be read out loud\r\n2021-02-08 19:58:41 DEBUG (MainThread) [custom_components.alexa_media] a****n@f**********t: Received websocket command: PUSH_ACTIVITY : {'destinationUserId': 'A**********RWJ', 'timestamp': 1612839521547, 'key': {'registeredUserId': 'A1WBE5ZIVK5RWJ', 'entryId': '1612839521526#A32DOYMUN6DTXA#G******************R'}}\r\n2021-02-08 19:58:41 DEBUG (MainThread) [alexapy.alexaapi] a****n@f**********t: static GET: https://alexa.amazon.com/api/activities?startTime=&size=10&offset=1 returned 200:OK:application/json\r\n2021-02-08 19:58:41 DEBUG (MainThread) [custom_components.alexa_media] a****n@f**********t: Received websocket command: PUSH_EQUALIZER_STATE_CHANGE : {'destinationUserId': 'A**********RWJ', 'dopplerId': {'deviceType': 'A32DOYMUN6DTXA', 'deviceSerialNumber': 'G************1KR'}, 'bass': 0, 'midrange': 0, 'treble': 0}\r\n2021-02-08 19:58:41 DEBUG (MainThread) [custom_components.alexa_media] Updating media_player availability {'destinationUserId': 'A**********RWJ', 'dopplerId': {'deviceType': 'A32DOYMUN6DTXA', 'deviceSerialNumber': 'G************1KR'}, 'bass': 0, 'midrange': 0, 'treble': 0}\r\n2021-02-08 19:58:41 DEBUG (MainThread) [custom_components.alexa_media.media_player] a****n@f**********t: No PUSH_AUDIO_PLAYER_STATE/PUSH_MEDIA_CHANGE/PUSH_MEDIA_PROGRESS_CHANGE in dict_keys(['PUSH_VOLUME_CHANGE', 'PUSH_ACTIVITY', 'PUSH_EQUALIZER_STATE_CHANGE']);forcing refresh\r\n2021-02-08 19:58:41 DEBUG (MainThread) [custom_components.alexa_media.media_player] a****n@f**********t: Refreshing <Entity Living Room Echo Dot: standby>\r\n2021-02-08 19:58:41 DEBUG (MainThread) [custom_components.alexa_media.media_player] a****n@f**********t: Living Room Echo Dot: Last_called check: self: G************1KR reported: G************1KR\r\n2021-02-08 19:58:41 DEBUG (MainThread) [custom_components.alexa_media] a****n@f**********t: Received websocket command: PUSH_VOLUME_CHANGE : {'destinationUserId': 'A**********RWJ', 'dopplerId': {'deviceType': 'A32DOYMUN6DTXA', 'deviceSerialNumber': 'G************1KR'}, 'volumeSetting': 100, 'isMuted': False}\r\n2021-02-08 19:58:41 DEBUG (MainThread) [custom_components.alexa_media] Updating media_player volume: {'destinationUserId': 'A**********RWJ', 'dopplerId': {'deviceType': 'A32DOYMUN6DTXA', 'deviceSerialNumber': 'G************1KR'}, 'volumeSetting': 100, 'isMuted': False}\r\n2021-02-08 19:58:41 DEBUG (MainThread) [custom_components.alexa_media.media_player] a****n@f**********t: Living Room Echo Dot volume updated: 100\r\n2021-02-08 19:58:41 DEBUG (MainThread) [custom_components.alexa_media.media_player] a****n@f**********t: No PUSH_AUDIO_PLAYER_STATE/PUSH_MEDIA_CHANGE/PUSH_MEDIA_PROGRESS_CHANGE in dict_keys(['PUSH_VOLUME_CHANGE', 'PUSH_ACTIVITY', 'PUSH_EQUALIZER_STATE_CHANGE']);forcing refresh\r\n2021-02-08 19:58:42 DEBUG (MainThread) [alexapy.alexaapi] a****n@f**********t: GET: https://alexa.amazon.com/api/np/player?deviceSerialNumber=G******************R&deviceType=A32DOYMUN6DTXA&screenWidth=2560&_=1612839521830 returned 200:OK:application/json\r\n2021-02-08 19:58:42 DEBUG (MainThread) [alexapy.alexaapi] a****n@f**********t: Creating sequence for 1 items\r\n2021-02-08 19:58:42 DEBUG (MainThread) [alexapy.alexaapi] a****n@f**********t: Running behavior with data: {\"behaviorId\": \"PREVIEW\", \"sequenceJson\": \"{\\\"@type\\\": \\\"com.amazon.alexa.behaviors.model.Sequence\\\", \\\"startNode\\\": {\\\"@type\\\": \\\"com.amazon.alexa.behaviors.model.SerialNode\\\", \\\"nodesToExecute\\\": [{\\\"@type\\\": \\\"com.amazon.alexa.behaviors.model.OpaquePayloadOperationNode\\\", \\\"type\\\": \\\"Alexa.Speak\\\", \\\"operationPayload\\\": {\\\"deviceType\\\": \\\"A32DOYMUN6DTXA\\\", \\\"deviceSerialNumber\\\": \\\"G******************R\\\", \\\"locale\\\": \\\"en-us\\\", \\\"customerId\\\": \\\"A1WBE5ZIVK5RWJ\\\", \\\"textToSpeak\\\": \\\"This text will take at least one second and a half to be read out loud\\\", \\\"target\\\": {\\\"customerId\\\": \\\"A1WBE5ZIVK5RWJ\\\", \\\"devices\\\": [{\\\"deviceSerialNumber\\\": \\\"G******************R\\\", \\\"deviceTypeId\\\": \\\"A32DOYMUN6DTXA\\\"}]}, \\\"skillId\\\": \\\"amzn1.ask.1p.saysomething\\\"}}]}}\", \"status\": \"ENABLED\"}\r\n2021-02-08 19:58:42 DEBUG (MainThread) [alexapy.alexaapi] a****n@f**********t: POST: https://alexa.amazon.com/api/behaviors/preview returned 200:OK:application/octet-stream\r\n2021-02-08 19:58:42 DEBUG (MainThread) [custom_components.alexa_media.notify] Message: This text will take at least one second and a half to be read out loud, kwargs: {'target': ['media_player.living_room_echo_dot'], 'data': {'type': 'tts'}, 'message': 'This text will take at least one second and a half to be read out loud'}\r\n2021-02-08 19:58:42 DEBUG (MainThread) [custom_components.alexa_media.notify] Target type: <class 'list'>\r\n2021-02-08 19:58:42 DEBUG (MainThread) [custom_components.alexa_media.notify] Processing: media_player.living_room_echo_dot\r\n2021-02-08 19:58:42 DEBUG (MainThread) [custom_components.alexa_media.notify] Processed Target by string: ['media_player.living_room_echo_dot']\r\n2021-02-08 19:58:42 DEBUG (MainThread) [custom_components.alexa_media.notify] TTS by <Entity Living Room Echo Dot: standby> : This text will take at least one second and a half to be read out loud\r\n2021-02-08 19:58:43 DEBUG (MainThread) [custom_components.alexa_media] a****n@f**********t: Received websocket command: PUSH_ACTIVITY : {'destinationUserId': 'A**********RWJ', 'timestamp': 1612839523186, 'key': {'registeredUserId': 'A1WBE5ZIVK5RWJ', 'entryId': '1612839523152#A32DOYMUN6DTXA#G******************R'}}\r\n2021-02-08 19:58:43 DEBUG (MainThread) [alexapy.alexaapi] a****n@f**********t: static GET: https://alexa.amazon.com/api/activities?startTime=&size=10&offset=1 returned 200:OK:application/json\r\n2021-02-08 19:58:43 DEBUG (MainThread) [custom_components.alexa_media] a****n@f**********t: Updated last_called: {'serialNumber': 'G************1KR', 'timestamp': 1612838355492, 'summary': 'alexa stop timer'}\r\n2021-02-08 19:58:43 DEBUG (MainThread) [custom_components.alexa_media] a****n@f**********t: Received websocket command: PUSH_EQUALIZER_STATE_CHANGE : {'destinationUserId': 'A**********RWJ', 'dopplerId': {'deviceType': 'A32DOYMUN6DTXA', 'deviceSerialNumber': 'G************1KR'}, 'bass': 0, 'midrange': 0, 'treble': 0}\r\n2021-02-08 19:58:43 DEBUG (MainThread) [custom_components.alexa_media] Updating media_player availability {'destinationUserId': 'A**********RWJ', 'dopplerId': {'deviceType': 'A32DOYMUN6DTXA', 'deviceSerialNumber': 'G************1KR'}, 'bass': 0, 'midrange': 0, 'treble': 0}\r\n2021-02-08 19:58:43 DEBUG (MainThread) [custom_components.alexa_media] a****n@f**********t: Received websocket command: PUSH_VOLUME_CHANGE : {'destinationUserId': 'A**********RWJ', 'dopplerId': {'deviceType': 'A32DOYMUN6DTXA', 'deviceSerialNumber': 'G************1KR'}, 'volumeSetting': 100, 'isMuted': False}\r\n2021-02-08 19:58:43 DEBUG (MainThread) [custom_components.alexa_media] Updating media_player volume: {'destinationUserId': 'A**********RWJ', 'dopplerId': {'deviceType': 'A32DOYMUN6DTXA', 'deviceSerialNumber': 'G************1KR'}, 'volumeSetting': 100, 'isMuted': False}\r\n2021-02-08 19:58:43 DEBUG (MainThread) [custom_components.alexa_media.media_player] a****n@f**********t: No PUSH_AUDIO_PLAYER_STATE/PUSH_MEDIA_CHANGE/PUSH_MEDIA_PROGRESS_CHANGE in dict_keys(['PUSH_VOLUME_CHANGE', 'PUSH_ACTIVITY', 'PUSH_EQUALIZER_STATE_CHANGE']);forcing refresh\r\n2021-02-08 19:58:43 DEBUG (MainThread) [custom_components.alexa_media.media_player] a****n@f**********t: Refreshing <Entity Living Room Echo Dot: standby>\r\n2021-02-08 19:58:43 DEBUG (MainThread) [custom_components.alexa_media.media_player] a****n@f**********t: Living Room Echo Dot: Last_called check: self: G************1KR reported: G************1KR\r\n2021-02-08 19:58:43 DEBUG (MainThread) [custom_components.alexa_media.media_player] a****n@f**********t: Living Room Echo Dot volume updated: 100\r\n2021-02-08 19:58:43 DEBUG (MainThread) [custom_components.alexa_media.media_player] a****n@f**********t: No PUSH_AUDIO_PLAYER_STATE/PUSH_MEDIA_CHANGE/PUSH_MEDIA_PROGRESS_CHANGE in dict_keys(['PUSH_VOLUME_CHANGE', 'PUSH_ACTIVITY', 'PUSH_EQUALIZER_STATE_CHANGE']);forcing refresh\r\n2021-02-08 19:58:43 DEBUG (MainThread) [custom_components.alexa_media] a****n@f**********t: Received websocket command: PUSH_EQUALIZER_STATE_CHANGE : {'destinationUserId': 'A**********RWJ', 'dopplerId': {'deviceType': 'A32DOYMUN6DTXA', 'deviceSerialNumber': 'G************1KR'}, 'bass': 0, 'midrange': 0, 'treble': 0}\r\n2021-02-08 19:58:43 DEBUG (MainThread) [custom_components.alexa_media] Updating media_player availability {'destinationUserId': 'A**********RWJ', 'dopplerId': {'deviceType': 'A32DOYMUN6DTXA', 'deviceSerialNumber': 'G************1KR'}, 'bass': 0, 'midrange': 0, 'treble': 0}\r\n2021-02-08 19:58:43 DEBUG (MainThread) [custom_components.alexa_media.media_player] a****n@f**********t: No PUSH_AUDIO_PLAYER_STATE/PUSH_MEDIA_CHANGE/PUSH_MEDIA_PROGRESS_CHANGE in dict_keys(['PUSH_VOLUME_CHANGE', 'PUSH_ACTIVITY', 'PUSH_EQUALIZER_STATE_CHANGE']);forcing refresh\r\n2021-02-08 19:58:43 DEBUG (MainThread) [custom_components.alexa_media] a****n@f**********t: Received websocket command: PUSH_VOLUME_CHANGE : {'destinationUserId': 'A**********RWJ', 'dopplerId': {'deviceType': 'A32DOYMUN6DTXA', 'deviceSerialNumber': 'G************1KR'}, 'volumeSetting': 100, 'isMuted': False}\r\n2021-02-08 19:58:43 DEBUG (MainThread) [custom_components.alexa_media] Updating media_player volume: {'destinationUserId': 'A**********RWJ', 'dopplerId': {'deviceType': 'A32DOYMUN6DTXA', 'deviceSerialNumber': 'G************1KR'}, 'volumeSetting': 100, 'isMuted': False}\r\n2021-02-08 19:58:43 DEBUG (MainThread) [custom_components.alexa_media] G************1KR: Detected potential DND websocket change with 4 events [('PUSH_EQUALIZER_STATE_CHANGE', 0.13), ('PUSH_VOLUME_CHANGE', 0.13), ('PUSH_EQUALIZER_STATE_CHANGE', 0.01), ('PUSH_VOLUME_CHANGE', 0.0)]\r\n2021-02-08 19:58:43 DEBUG (MainThread) [custom_components.alexa_media.media_player] a****n@f**********t: Living Room Echo Dot volume updated: 100\r\n2021-02-08 19:58:43 DEBUG (MainThread) [custom_components.alexa_media.media_player] a****n@f**********t: No PUSH_AUDIO_PLAYER_STATE/PUSH_MEDIA_CHANGE/PUSH_MEDIA_PROGRESS_CHANGE in dict_keys(['PUSH_VOLUME_CHANGE', 'PUSH_ACTIVITY', 'PUSH_EQUALIZER_STATE_CHANGE']);forcing refresh\r\n2021-02-08 19:58:43 DEBUG (MainThread) [alexapy.alexaapi] a****n@f**********t: GET: https://alexa.amazon.com/api/np/player?deviceSerialNumber=G******************R&deviceType=A32DOYMUN6DTXA&screenWidth=2560&_=1612839523392 returned 200:OK:application/json\r\n2021-02-08 19:58:44 DEBUG (MainThread) [alexapy.alexaapi] a****n@f**********t: Creating sequence for 1 items\r\n2021-02-08 19:58:44 DEBUG (MainThread) [alexapy.alexaapi] a****n@f**********t: Running behavior with data: {\"behaviorId\": \"PREVIEW\", \"sequenceJson\": \"{\\\"@type\\\": \\\"com.amazon.alexa.behaviors.model.Sequence\\\", \\\"startNode\\\": {\\\"@type\\\": \\\"com.amazon.alexa.behaviors.model.SerialNode\\\", \\\"nodesToExecute\\\": [{\\\"@type\\\": \\\"com.amazon.alexa.behaviors.model.OpaquePayloadOperationNode\\\", \\\"type\\\": \\\"Alexa.Speak\\\", \\\"operationPayload\\\": {\\\"deviceType\\\": \\\"A32DOYMUN6DTXA\\\", \\\"deviceSerialNumber\\\": \\\"G******************R\\\", \\\"locale\\\": \\\"en-us\\\", \\\"customerId\\\": \\\"A1WBE5ZIVK5RWJ\\\", \\\"textToSpeak\\\": \\\"This text will take at least one second and a half to be read out loud\\\", \\\"target\\\": {\\\"customerId\\\": \\\"A1WBE5ZIVK5RWJ\\\", \\\"devices\\\": [{\\\"deviceSerialNumber\\\": \\\"G******************R\\\", \\\"deviceTypeId\\\": \\\"A32DOYMUN6DTXA\\\"}]}, \\\"skillId\\\": \\\"amzn1.ask.1p.saysomething\\\"}}]}}\", \"status\": \"ENABLED\"}\r\n2021-02-08 19:58:44 DEBUG (MainThread) [alexapy.alexaapi] a****n@f**********t: POST: https://alexa.amazon.com/api/behaviors/preview returned 200:OK:application/octet-stream\r\n2021-02-08 19:58:44 DEBUG (MainThread) [custom_components.alexa_media] a****n@f**********t: Received websocket command: PUSH_ACTIVITY : {'destinationUserId': 'A**********RWJ', 'timestamp': 1612839524779, 'key': {'registeredUserId': 'A1WBE5ZIVK5RWJ', 'entryId': '1612839524750#A32DOYMUN6DTXA#G******************R'}}\r\n2021-02-08 19:58:44 DEBUG (MainThread) [alexapy.alexaapi] a****n@f**********t: static GET: https://alexa.amazon.com/api/activities?startTime=&size=10&offset=1 returned 200:OK:application/json\r\n2021-02-08 19:58:44 DEBUG (MainThread) [custom_components.alexa_media] a****n@f**********t: Updated last_called: {'serialNumber': 'G************1KR', 'timestamp': 1612838355492, 'summary': 'alexa stop timer'}\r\n2021-02-08 19:58:44 DEBUG (MainThread) [custom_components.alexa_media] a****n@f**********t: Received websocket command: PUSH_EQUALIZER_STATE_CHANGE : {'destinationUserId': 'A**********RWJ', 'dopplerId': {'deviceType': 'A32DOYMUN6DTXA', 'deviceSerialNumber': 'G************1KR'}, 'bass': 0, 'midrange': 0, 'treble': 0}\r\n2021-02-08 19:58:44 DEBUG (MainThread) [custom_components.alexa_media] Updating media_player availability {'destinationUserId': 'A**********RWJ', 'dopplerId': {'deviceType': 'A32DOYMUN6DTXA', 'deviceSerialNumber': 'G************1KR'}, 'bass': 0, 'midrange': 0, 'treble': 0}\r\n2021-02-08 19:58:44 DEBUG (MainThread) [custom_components.alexa_media] a****n@f**********t: Received websocket command: PUSH_VOLUME_CHANGE : {'destinationUserId': 'A**********RWJ', 'dopplerId': {'deviceType': 'A32DOYMUN6DTXA', 'deviceSerialNumber': 'G************1KR'}, 'volumeSetting': 100, 'isMuted': False}\r\n2021-02-08 19:58:44 DEBUG (MainThread) [custom_components.alexa_media] Updating media_player volume: {'destinationUserId': 'A**********RWJ', 'dopplerId': {'deviceType': 'A32DOYMUN6DTXA', 'deviceSerialNumber': 'G************1KR'}, 'volumeSetting': 100, 'isMuted': False}\r\n2021-02-08 19:58:44 DEBUG (MainThread) [custom_components.alexa_media.media_player] a****n@f**********t: No PUSH_AUDIO_PLAYER_STATE/PUSH_MEDIA_CHANGE/PUSH_MEDIA_PROGRESS_CHANGE in dict_keys(['PUSH_VOLUME_CHANGE', 'PUSH_ACTIVITY', 'PUSH_EQUALIZER_STATE_CHANGE']);forcing refresh\r\n2021-02-08 19:58:44 DEBUG (MainThread) [custom_components.alexa_media.media_player] a****n@f**********t: Refreshing <Entity Living Room Echo Dot: standby>\r\n2021-02-08 19:58:44 DEBUG (MainThread) [custom_components.alexa_media.media_player] a****n@f**********t: Living Room Echo Dot: Last_called check: self: G************1KR reported: G************1KR\r\n2021-02-08 19:58:44 DEBUG (MainThread) [custom_components.alexa_media.media_player] a****n@f**********t: Living Room Echo Dot volume updated: 100\r\n2021-02-08 19:58:44 DEBUG (MainThread) [custom_components.alexa_media.media_player] a****n@f**********t: No PUSH_AUDIO_PLAYER_STATE/PUSH_MEDIA_CHANGE/PUSH_MEDIA_PROGRESS_CHANGE in dict_keys(['PUSH_VOLUME_CHANGE', 'PUSH_ACTIVITY', 'PUSH_EQUALIZER_STATE_CHANGE']);forcing refresh\r\n2021-02-08 19:58:45 DEBUG (MainThread) [custom_components.alexa_media] a****n@f**********t: Received websocket command: PUSH_EQUALIZER_STATE_CHANGE : {'destinationUserId': 'A**********RWJ', 'dopplerId': {'deviceType': 'A32DOYMUN6DTXA', 'deviceSerialNumber': 'G************1KR'}, 'bass': 0, 'midrange': 0, 'treble': 0}\r\n2021-02-08 19:58:45 DEBUG (MainThread) [custom_components.alexa_media] Updating media_player availability {'destinationUserId': 'A**********RWJ', 'dopplerId': {'deviceType': 'A32DOYMUN6DTXA', 'deviceSerialNumber': 'G************1KR'}, 'bass': 0, 'midrange': 0, 'treble': 0}\r\n2021-02-08 19:58:45 DEBUG (MainThread) [custom_components.alexa_media.media_player] a****n@f**********t: No PUSH_AUDIO_PLAYER_STATE/PUSH_MEDIA_CHANGE/PUSH_MEDIA_PROGRESS_CHANGE in dict_keys(['PUSH_VOLUME_CHANGE', 'PUSH_ACTIVITY', 'PUSH_EQUALIZER_STATE_CHANGE']);forcing refresh\r\n2021-02-08 19:58:45 DEBUG (MainThread) [custom_components.alexa_media] a****n@f**********t: Received websocket command: PUSH_VOLUME_CHANGE : {'destinationUserId': 'A**********RWJ', 'dopplerId': {'deviceType': 'A32DOYMUN6DTXA', 'deviceSerialNumber': 'G************1KR'}, 'volumeSetting': 100, 'isMuted': False}\r\n2021-02-08 19:58:45 DEBUG (MainThread) [custom_components.alexa_media] Updating media_player volume: {'destinationUserId': 'A**********RWJ', 'dopplerId': {'deviceType': 'A32DOYMUN6DTXA', 'deviceSerialNumber': 'G************1KR'}, 'volumeSetting': 100, 'isMuted': False}\r\n2021-02-08 19:58:45 DEBUG (MainThread) [custom_components.alexa_media] G************1KR: Detected potential DND websocket change with 4 events [('PUSH_EQUALIZER_STATE_CHANGE', 0.11), ('PUSH_VOLUME_CHANGE', 0.11), ('PUSH_EQUALIZER_STATE_CHANGE', 0.01), ('PUSH_VOLUME_CHANGE', 0.0)]\r\n2021-02-08 19:58:45 DEBUG (MainThread) [custom_components.alexa_media.media_player] a****n@f**********t: Living Room Echo Dot volume updated: 100\r\n2021-02-08 19:58:45 DEBUG (MainThread) [custom_components.alexa_media.media_player] a****n@f**********t: No PUSH_AUDIO_PLAYER_STATE/PUSH_MEDIA_CHANGE/PUSH_MEDIA_PROGRESS_CHANGE in dict_keys(['PUSH_VOLUME_CHANGE', 'PUSH_ACTIVITY', 'PUSH_EQUALIZER_STATE_CHANGE']);forcing refresh\r\n2021-02-08 19:58:45 DEBUG (MainThread) [alexapy.alexaapi] a****n@f**********t: GET: https://alexa.amazon.com/api/np/player?deviceSerialNumber=G******************R&deviceType=A32DOYMUN6DTXA&screenWidth=2560&_=1612839524964 returned 200:OK:application/json\r\n2021-02-08 19:58:48 DEBUG (MainThread) [custom_components.alexa_media] a****n@f**********t: Received websocket command: PUSH_EQUALIZER_STATE_CHANGE : {'destinationUserId': 'A**********RWJ', 'dopplerId': {'deviceType': 'A32DOYMUN6DTXA', 'deviceSerialNumber': 'G************1KR'}, 'bass': 0, 'midrange': 0, 'treble': 0}\r\n2021-02-08 19:58:48 DEBUG (MainThread) [custom_components.alexa_media] Updating media_player availability {'destinationUserId': 'A**********RWJ', 'dopplerId': {'deviceType': 'A32DOYMUN6DTXA', 'deviceSerialNumber': 'G************1KR'}, 'bass': 0, 'midrange': 0, 'treble': 0}\r\n2021-02-08 19:58:48 DEBUG (MainThread) [custom_components.alexa_media.media_player] a****n@f**********t: No PUSH_AUDIO_PLAYER_STATE/PUSH_MEDIA_CHANGE/PUSH_MEDIA_PROGRESS_CHANGE in dict_keys(['PUSH_VOLUME_CHANGE', 'PUSH_ACTIVITY', 'PUSH_EQUALIZER_STATE_CHANGE']);forcing refresh\r\n2021-02-08 19:58:48 DEBUG (MainThread) [custom_components.alexa_media.media_player] a****n@f**********t: Refreshing <Entity Living Room Echo Dot: standby>\r\n2021-02-08 19:58:48 DEBUG (MainThread) [custom_components.alexa_media.media_player] a****n@f**********t: Living Room Echo Dot: Last_called check: self: G************1KR reported: G************1KR\r\n2021-02-08 19:58:48 DEBUG (MainThread) [custom_components.alexa_media] a****n@f**********t: Received websocket command: PUSH_VOLUME_CHANGE : {'destinationUserId': 'A**********RWJ', 'dopplerId': {'deviceType': 'A32DOYMUN6DTXA', 'deviceSerialNumber': 'G************1KR'}, 'volumeSetting': 100, 'isMuted': False}\r\n2021-02-08 19:58:48 DEBUG (MainThread) [custom_components.alexa_media] Updating media_player volume: {'destinationUserId': 'A**********RWJ', 'dopplerId': {'deviceType': 'A32DOYMUN6DTXA', 'deviceSerialNumber': 'G************1KR'}, 'volumeSetting': 100, 'isMuted': False}\r\n2021-02-08 19:58:48 DEBUG (MainThread) [custom_components.alexa_media.media_player] a****n@f**********t: Living Room Echo Dot volume updated: 100\r\n2021-02-08 19:58:48 DEBUG (MainThread) [custom_components.alexa_media.media_player] a****n@f**********t: No PUSH_AUDIO_PLAYER_STATE/PUSH_MEDIA_CHANGE/PUSH_MEDIA_PROGRESS_CHANGE in dict_keys(['PUSH_VOLUME_CHANGE', 'PUSH_ACTIVITY', 'PUSH_EQUALIZER_STATE_CHANGE']);forcing refresh\r\n2021-02-08 19:58:49 DEBUG (MainThread) [alexapy.alexaapi] a****n@f**********t: GET: https://alexa.amazon.com/api/np/player?deviceSerialNumber=G******************R&deviceType=A32DOYMUN6DTXA&screenWidth=2560&_=1612839528912 returned 200:OK:application/json\r\n```\r\n\r\n**Additional context**\r\n\r\nI experimented with a couple of things:\r\n \r\n1. I tried increasing the queue delay to 5 seconds, the bug is still happening, however looking at the logs it seems like it does wait for 5 seconds before scheduling the next service call:\r\n```\r\n2021-02-08 19:59:22 DEBUG (MainThread) [custom_components.alexa_media] Changing option queue_delay from 1.5 to 5.0\r\n2021-02-08 19:59:35 DEBUG (MainThread) [custom_components.alexa_media.notify] Message: This text will take at least one second and a half to be read out loud, kwargs: {'target': ['media_player.living_room_echo_dot'], 'data': {'type': 'tts'}, 'message': 'This text will take at least one second and a half to be read out loud'}\r\n2021-02-08 19:59:35 DEBUG (MainThread) [custom_components.alexa_media.notify] Target type: <class 'list'>\r\n2021-02-08 19:59:35 DEBUG (MainThread) [custom_components.alexa_media.notify] Processing: media_player.living_room_echo_dot\r\n2021-02-08 19:59:35 DEBUG (MainThread) [custom_components.alexa_media.notify] Processed Target by string: ['media_player.living_room_echo_dot']\r\n2021-02-08 19:59:35 DEBUG (MainThread) [custom_components.alexa_media.notify] TTS by <Entity Living Room Echo Dot: standby> : This text will take at least one second and a half to be read out loud\r\n2021-02-08 19:59:40 DEBUG (MainThread) [alexapy.alexaapi] a****n@f**********t: Creating sequence for 1 items\r\n2021-02-08 19:59:40 DEBUG (MainThread) [alexapy.alexaapi] a****n@f**********t: Running behavior with data: {\"behaviorId\": \"PREVIEW\", \"sequenceJson\": \"{\\\"@type\\\": \\\"com.amazon.alexa.behaviors.model.Sequence\\\", \\\"startNode\\\": {\\\"@type\\\": \\\"com.amazon.alexa.behaviors.model.SerialNode\\\", \\\"nodesToExecute\\\": [{\\\"@type\\\": \\\"com.amazon.alexa.behaviors.model.OpaquePayloadOperationNode\\\", \\\"type\\\": \\\"Alexa.Speak\\\", \\\"operationPayload\\\": {\\\"deviceType\\\": \\\"A32DOYMUN6DTXA\\\", \\\"deviceSerialNumber\\\": \\\"G******************R\\\", \\\"locale\\\": \\\"en-us\\\", \\\"customerId\\\": \\\"A1WBE5ZIVK5RWJ\\\", \\\"textToSpeak\\\": \\\"This text will take at least one second and a half to be read out loud\\\", \\\"target\\\": {\\\"customerId\\\": \\\"A1WBE5ZIVK5RWJ\\\", \\\"devices\\\": [{\\\"deviceSerialNumber\\\": \\\"G******************R\\\", \\\"deviceTypeId\\\": \\\"A32DOYMUN6DTXA\\\"}]}, \\\"skillId\\\": \\\"amzn1.ask.1p.saysomething\\\"}}]}}\", \"status\": \"ENABLED\"}\r\n2021-02-08 19:59:40 DEBUG (MainThread) [alexapy.alexaapi] a****n@f**********t: POST: https://alexa.amazon.com/api/behaviors/preview returned 200:OK:application/octet-stream\r\n2021-02-08 19:59:40 DEBUG (MainThread) [custom_components.alexa_media.notify] Message: This text will take at least one second and a half to be read out loud, kwargs: {'target': ['media_player.living_room_echo_dot'], 'data': {'type': 'tts'}, 'message': 'This text will take at least one second and a half to be read out loud'}\r\n2021-02-08 19:59:40 DEBUG (MainThread) [custom_components.alexa_media.notify] Target type: <class 'list'>\r\n2021-02-08 19:59:40 DEBUG (MainThread) [custom_components.alexa_media.notify] Processing: media_player.living_room_echo_dot\r\n2021-02-08 19:59:40 DEBUG (MainThread) [custom_components.alexa_media.notify] Processed Target by string: ['media_player.living_room_echo_dot']\r\n2021-02-08 19:59:40 DEBUG (MainThread) [custom_components.alexa_media.notify] TTS by <Entity Living Room Echo Dot: standby> : This text will take at least one second and a half to be read out loud\r\n2021-02-08 19:59:41 DEBUG (MainThread) [custom_components.alexa_media] a****n@f**********t: Received websocket command: PUSH_ACTIVITY : {'destinationUserId': 'A**********RWJ', 'timestamp': 1612839581394, 'key': {'registeredUserId': 'A1WBE5ZIVK5RWJ', 'entryId': '1612839581369#A32DOYMUN6DTXA#G******************R'}}\r\n2021-02-08 19:59:41 DEBUG (MainThread) [alexapy.alexaapi] a****n@f**********t: static GET: https://alexa.amazon.com/api/activities?startTime=&size=10&offset=1 returned 200:OK:application/json\r\n2021-02-08 19:59:41 DEBUG (MainThread) [custom_components.alexa_media] a****n@f**********t: Received websocket command: PUSH_EQUALIZER_STATE_CHANGE : {'destinationUserId': 'A**********RWJ', 'dopplerId': {'deviceType': 'A32DOYMUN6DTXA', 'deviceSerialNumber': 'G************1KR'}, 'bass': 0, 'midrange': 0, 'treble': 0}\r\n2021-02-08 19:59:41 DEBUG (MainThread) [custom_components.alexa_media] Updating media_player availability {'destinationUserId': 'A**********RWJ', 'dopplerId': {'deviceType': 'A32DOYMUN6DTXA', 'deviceSerialNumber': 'G************1KR'}, 'bass': 0, 'midrange': 0, 'treble': 0}\r\n2021-02-08 19:59:41 DEBUG (MainThread) [custom_components.alexa_media.media_player] a****n@f**********t: No PUSH_AUDIO_PLAYER_STATE/PUSH_MEDIA_CHANGE/PUSH_MEDIA_PROGRESS_CHANGE in dict_keys(['PUSH_VOLUME_CHANGE', 'PUSH_ACTIVITY', 'PUSH_EQUALIZER_STATE_CHANGE']);forcing refresh\r\n2021-02-08 19:59:41 DEBUG (MainThread) [custom_components.alexa_media.media_player] a****n@f**********t: Refreshing <Entity Living Room Echo Dot: standby>\r\n2021-02-08 19:59:41 DEBUG (MainThread) [custom_components.alexa_media.media_player] a****n@f**********t: Living Room Echo Dot: Last_called check: self: G************1KR reported: G************1KR\r\n2021-02-08 19:59:41 DEBUG (MainThread) [custom_components.alexa_media] a****n@f**********t: Received websocket command: PUSH_VOLUME_CHANGE : {'destinationUserId': 'A**********RWJ', 'dopplerId': {'deviceType': 'A32DOYMUN6DTXA', 'deviceSerialNumber': 'G************1KR'}, 'volumeSetting': 100, 'isMuted': False}\r\n2021-02-08 19:59:41 DEBUG (MainThread) [custom_components.alexa_media] Updating media_player volume: {'destinationUserId': 'A**********RWJ', 'dopplerId': {'deviceType': 'A32DOYMUN6DTXA', 'deviceSerialNumber': 'G************1KR'}, 'volumeSetting': 100, 'isMuted': False}\r\n2021-02-08 19:59:41 DEBUG (MainThread) [custom_components.alexa_media.media_player] a****n@f**********t: Living Room Echo Dot volume updated: 100\r\n2021-02-08 19:59:41 DEBUG (MainThread) [custom_components.alexa_media.media_player] a****n@f**********t: No PUSH_AUDIO_PLAYER_STATE/PUSH_MEDIA_CHANGE/PUSH_MEDIA_PROGRESS_CHANGE in dict_keys(['PUSH_VOLUME_CHANGE', 'PUSH_ACTIVITY', 'PUSH_EQUALIZER_STATE_CHANGE']);forcing refresh\r\n2021-02-08 19:59:41 DEBUG (MainThread) [alexapy.alexaapi] a****n@f**********t: GET: https://alexa.amazon.com/api/np/player?deviceSerialNumber=G******************R&deviceType=A32DOYMUN6DTXA&screenWidth=2560&_=1612839581701 returned 200:OK:application/json\r\n2021-02-08 19:59:45 DEBUG (MainThread) [custom_components.alexa_media] a****n@f**********t: Received websocket command: PUSH_VOLUME_CHANGE : {'destinationUserId': 'A**********RWJ', 'dopplerId': {'deviceType': 'A32DOYMUN6DTXA', 'deviceSerialNumber': 'G************1KR'}, 'volumeSetting': 100, 'isMuted': False}\r\n2021-02-08 19:59:45 DEBUG (MainThread) [custom_components.alexa_media] Updating media_player volume: {'destinationUserId': 'A**********RWJ', 'dopplerId': {'deviceType': 'A32DOYMUN6DTXA', 'deviceSerialNumber': 'G************1KR'}, 'volumeSetting': 100, 'isMuted': False}\r\n2021-02-08 19:59:45 DEBUG (MainThread) [custom_components.alexa_media.media_player] a****n@f**********t: Living Room Echo Dot volume updated: 100\r\n2021-02-08 19:59:45 DEBUG (MainThread) [custom_components.alexa_media.media_player] a****n@f**********t: No PUSH_AUDIO_PLAYER_STATE/PUSH_MEDIA_CHANGE/PUSH_MEDIA_PROGRESS_CHANGE in dict_keys(['PUSH_VOLUME_CHANGE', 'PUSH_ACTIVITY', 'PUSH_EQUALIZER_STATE_CHANGE']);forcing refresh\r\n2021-02-08 19:59:45 DEBUG (MainThread) [custom_components.alexa_media.media_player] a****n@f**********t: Refreshing <Entity Living Room Echo Dot: standby>\r\n2021-02-08 19:59:45 DEBUG (MainThread) [custom_components.alexa_media.media_player] a****n@f**********t: Living Room Echo Dot: Last_called check: self: G************1KR reported: G************1KR\r\n2021-02-08 19:59:45 DEBUG (MainThread) [custom_components.alexa_media] a****n@f**********t: Received websocket command: PUSH_EQUALIZER_STATE_CHANGE : {'destinationUserId': 'A**********RWJ', 'dopplerId': {'deviceType': 'A32DOYMUN6DTXA', 'deviceSerialNumber': 'G************1KR'}, 'bass': 0, 'midrange': 0, 'treble': 0}\r\n2021-02-08 19:59:45 DEBUG (MainThread) [custom_components.alexa_media] Updating media_player availability {'destinationUserId': 'A**********RWJ', 'dopplerId': {'deviceType': 'A32DOYMUN6DTXA', 'deviceSerialNumber': 'G************1KR'}, 'bass': 0, 'midrange': 0, 'treble': 0}\r\n2021-02-08 19:59:45 DEBUG (MainThread) [custom_components.alexa_media.media_player] a****n@f**********t: No PUSH_AUDIO_PLAYER_STATE/PUSH_MEDIA_CHANGE/PUSH_MEDIA_PROGRESS_CHANGE in dict_keys(['PUSH_VOLUME_CHANGE', 'PUSH_ACTIVITY', 'PUSH_EQUALIZER_STATE_CHANGE']);forcing refresh\r\n2021-02-08 19:59:45 DEBUG (MainThread) [alexapy.alexaapi] a****n@f**********t: Creating sequence for 1 items\r\n2021-02-08 19:59:45 DEBUG (MainThread) [alexapy.alexaapi] a****n@f**********t: Running behavior with data: {\"behaviorId\": \"PREVIEW\", \"sequenceJson\": \"{\\\"@type\\\": \\\"com.amazon.alexa.behaviors.model.Sequence\\\", \\\"startNode\\\": {\\\"@type\\\": \\\"com.amazon.alexa.behaviors.model.SerialNode\\\", \\\"nodesToExecute\\\": [{\\\"@type\\\": \\\"com.amazon.alexa.behaviors.model.OpaquePayloadOperationNode\\\", \\\"type\\\": \\\"Alexa.Speak\\\", \\\"operationPayload\\\": {\\\"deviceType\\\": \\\"A32DOYMUN6DTXA\\\", \\\"deviceSerialNumber\\\": \\\"G******************R\\\", \\\"locale\\\": \\\"en-us\\\", \\\"customerId\\\": \\\"A1WBE5ZIVK5RWJ\\\", \\\"textToSpeak\\\": \\\"This text will take at least one second and a half to be read out loud\\\", \\\"target\\\": {\\\"customerId\\\": \\\"A1WBE5ZIVK5RWJ\\\", \\\"devices\\\": [{\\\"deviceSerialNumber\\\": \\\"G******************R\\\", \\\"deviceTypeId\\\": \\\"A32DOYMUN6DTXA\\\"}]}, \\\"skillId\\\": \\\"amzn1.ask.1p.saysomething\\\"}}]}}\", \"status\": \"ENABLED\"}\r\n2021-02-08 19:59:45 DEBUG (MainThread) [alexapy.alexaapi] a****n@f**********t: GET: https://alexa.amazon.com/api/np/player?deviceSerialNumber=G******************R&deviceType=A32DOYMUN6DTXA&screenWidth=2560&_=1612839585600 returned 200:OK:application/json\r\n2021-02-08 19:59:45 DEBUG (MainThread) [alexapy.alexaapi] a****n@f**********t: POST: https://alexa.amazon.com/api/behaviors/preview returned 200:OK:application/octet-stream\r\n2021-02-08 19:59:45 DEBUG (MainThread) [custom_components.alexa_media.notify] Message: This text will take at least one second and a half to be read out loud, kwargs: {'target': ['media_player.living_room_echo_dot'], 'data': {'type': 'tts'}, 'message': 'This text will take at least one second and a half to be read out loud'}\r\n2021-02-08 19:59:45 DEBUG (MainThread) [custom_components.alexa_media.notify] Target type: <class 'list'>\r\n2021-02-08 19:59:45 DEBUG (MainThread) [custom_components.alexa_media.notify] Processing: media_player.living_room_echo_dot\r\n2021-02-08 19:59:45 DEBUG (MainThread) [custom_components.alexa_media.notify] Processed Target by string: ['media_player.living_room_echo_dot']\r\n2021-02-08 19:59:45 DEBUG (MainThread) [custom_components.alexa_media.notify] TTS by <Entity Living Room Echo Dot: standby> : This text will take at least one second and a half to be read out loud\r\n2021-02-08 19:59:46 DEBUG (MainThread) [custom_components.alexa_media] a****n@f**********t: Received websocket command: PUSH_ACTIVITY : {'destinationUserId': 'A**********RWJ', 'timestamp': 1612839586540, 'key': {'registeredUserId': 'A1WBE5ZIVK5RWJ', 'entryId': '1612839586511#A32DOYMUN6DTXA#G******************R'}}\r\n2021-02-08 19:59:46 DEBUG (MainThread) [alexapy.alexaapi] a****n@f**********t: static GET: https://alexa.amazon.com/api/activities?startTime=&size=10&offset=1 returned 200:OK:application/json\r\n2021-02-08 19:59:46 DEBUG (MainThread) [custom_components.alexa_media] a****n@f**********t: Updated last_called: \r\n2021-02-08 19:59:46 DEBUG (MainThread) [custom_components.alexa_media] a****n@f**********t: last_called changed: {'serialNumber': 'G************1KR', 'timestamp': 1612838355492, 'summary': 'alexa stop timer'} to \r\n2021-02-08 19:59:46 DEBUG (MainThread) [custom_components.alexa_media] a****n@f**********t: Received websocket command: PUSH_VOLUME_CHANGE : {'destinationUserId': 'A**********RWJ', 'dopplerId': {'deviceType': 'A32DOYMUN6DTXA', 'deviceSerialNumber': 'G************1KR'}, 'volumeSetting': 100, 'isMuted': False}\r\n2021-02-08 19:59:46 DEBUG (MainThread) [custom_components.alexa_media] Updating media_player volume: {'destinationUserId': 'A**********RWJ', 'dopplerId': {'deviceType': 'A32DOYMUN6DTXA', 'deviceSerialNumber': 'G************1KR'}, 'volumeSetting': 100, 'isMuted': False}\r\n2021-02-08 19:59:46 DEBUG (MainThread) [custom_components.alexa_media.media_player] a****n@f**********t: Living Room Echo Dot volume updated: 100\r\n2021-02-08 19:59:46 DEBUG (MainThread) [custom_components.alexa_media.media_player] a****n@f**********t: No PUSH_AUDIO_PLAYER_STATE/PUSH_MEDIA_CHANGE/PUSH_MEDIA_PROGRESS_CHANGE in dict_keys(['PUSH_VOLUME_CHANGE', 'PUSH_ACTIVITY', 'PUSH_EQUALIZER_STATE_CHANGE']);forcing refresh\r\n2021-02-08 19:59:46 DEBUG (MainThread) [custom_components.alexa_media.media_player] a****n@f**********t: Refreshing <Entity Living Room Echo Dot: standby>\r\n2021-02-08 19:59:46 DEBUG (MainThread) [custom_components.alexa_media.media_player] a****n@f**********t: Living Room Echo Dot: Last_called check: self: G************1KR reported: \r\n2021-02-08 19:59:46 DEBUG (MainThread) [custom_components.alexa_media] a****n@f**********t: Received websocket command: PUSH_EQUALIZER_STATE_CHANGE : {'destinationUserId': 'A**********RWJ', 'dopplerId': {'deviceType': 'A32DOYMUN6DTXA', 'deviceSerialNumber': 'G************1KR'}, 'bass': 0, 'midrange': 0, 'treble': 0}\r\n2021-02-08 19:59:46 DEBUG (MainThread) [custom_components.alexa_media] Updating media_player availability {'destinationUserId': 'A**********RWJ', 'dopplerId': {'deviceType': 'A32DOYMUN6DTXA', 'deviceSerialNumber': 'G************1KR'}, 'bass': 0, 'midrange': 0, 'treble': 0}\r\n2021-02-08 19:59:46 DEBUG (MainThread) [custom_components.alexa_media.media_player] a****n@f**********t: No PUSH_AUDIO_PLAYER_STATE/PUSH_MEDIA_CHANGE/PUSH_MEDIA_PROGRESS_CHANGE in dict_keys(['PUSH_VOLUME_CHANGE', 'PUSH_ACTIVITY', 'PUSH_EQUALIZER_STATE_CHANGE']);forcing refresh\r\n2021-02-08 19:59:47 DEBUG (MainThread) [alexapy.alexaapi] a****n@f**********t: GET: https://alexa.amazon.com/api/np/player?deviceSerialNumber=G******************R&deviceType=A32DOYMUN6DTXA&screenWidth=2560&_=1612839586866 returned 200:OK:application/json\r\n2021-02-08 19:59:50 DEBUG (MainThread) [custom_components.alexa_media] a****n@f**********t: Received websocket command: PUSH_EQUALIZER_STATE_CHANGE : {'destinationUserId': 'A**********RWJ', 'dopplerId': {'deviceType': 'A32DOYMUN6DTXA', 'deviceSerialNumber': 'G************1KR'}, 'bass': 0, 'midrange': 0, 'treble': 0}\r\n2021-02-08 19:59:50 DEBUG (MainThread) [custom_components.alexa_media] Updating media_player availability {'destinationUserId': 'A**********RWJ', 'dopplerId': {'deviceType': 'A32DOYMUN6DTXA', 'deviceSerialNumber': 'G************1KR'}, 'bass': 0, 'midrange': 0, 'treble': 0}\r\n2021-02-08 19:59:50 DEBUG (MainThread) [custom_components.alexa_media.media_player] a****n@f**********t: No PUSH_AUDIO_PLAYER_STATE/PUSH_MEDIA_CHANGE/PUSH_MEDIA_PROGRESS_CHANGE in dict_keys(['PUSH_VOLUME_CHANGE', 'PUSH_ACTIVITY', 'PUSH_EQUALIZER_STATE_CHANGE']);forcing refresh\r\n2021-02-08 19:59:50 DEBUG (MainThread) [custom_components.alexa_media.media_player] a****n@f**********t: Refreshing <Entity Living Room Echo Dot: standby>\r\n2021-02-08 19:59:50 DEBUG (MainThread) [custom_components.alexa_media.media_player] a****n@f**********t: Living Room Echo Dot: Last_called check: self: G************1KR reported: \r\n2021-02-08 19:59:50 DEBUG (MainThread) [custom_components.alexa_media] a****n@f**********t: Received websocket command: PUSH_VOLUME_CHANGE : {'destinationUserId': 'A**********RWJ', 'dopplerId': {'deviceType': 'A32DOYMUN6DTXA', 'deviceSerialNumber': 'G************1KR'}, 'volumeSetting': 100, 'isMuted': False}\r\n2021-02-08 19:59:50 DEBUG (MainThread) [custom_components.alexa_media] Updating media_player volume: {'destinationUserId': 'A**********RWJ', 'dopplerId': {'deviceType': 'A32DOYMUN6DTXA', 'deviceSerialNumber': 'G************1KR'}, 'volumeSetting': 100, 'isMuted': False}\r\n2021-02-08 19:59:50 DEBUG (MainThread) [custom_components.alexa_media.media_player] a****n@f**********t: Living Room Echo Dot volume updated: 100\r\n2021-02-08 19:59:50 DEBUG (MainThread) [custom_components.alexa_media.media_player] a****n@f**********t: No PUSH_AUDIO_PLAYER_STATE/PUSH_MEDIA_CHANGE/PUSH_MEDIA_PROGRESS_CHANGE in dict_keys(['PUSH_VOLUME_CHANGE', 'PUSH_ACTIVITY', 'PUSH_EQUALIZER_STATE_CHANGE']);forcing refresh\r\n2021-02-08 19:59:50 DEBUG (MainThread) [alexapy.alexaapi] a****n@f**********t: GET: https://alexa.amazon.com/api/np/player?deviceSerialNumber=G******************R&deviceType=A32DOYMUN6DTXA&screenWidth=2560&_=1612839590758 returned 200:OK:application/json\r\n2021-02-08 19:59:50 DEBUG (MainThread) [alexapy.alexaapi] a****n@f**********t: Creating sequence for 1 items\r\n2021-02-08 19:59:50 DEBUG (MainThread) [alexapy.alexaapi] a****n@f**********t: Running behavior with data: {\"behaviorId\": \"PREVIEW\", \"sequenceJson\": \"{\\\"@type\\\": \\\"com.amazon.alexa.behaviors.model.Sequence\\\", \\\"startNode\\\": {\\\"@type\\\": \\\"com.amazon.alexa.behaviors.model.SerialNode\\\", \\\"nodesToExecute\\\": [{\\\"@type\\\": \\\"com.amazon.alexa.behaviors.model.OpaquePayloadOperationNode\\\", \\\"type\\\": \\\"Alexa.Speak\\\", \\\"operationPayload\\\": {\\\"deviceType\\\": \\\"A32DOYMUN6DTXA\\\", \\\"deviceSerialNumber\\\": \\\"G******************R\\\", \\\"locale\\\": \\\"en-us\\\", \\\"customerId\\\": \\\"A1WBE5ZIVK5RWJ\\\", \\\"textToSpeak\\\": \\\"This text will take at least one second and a half to be read out loud\\\", \\\"target\\\": {\\\"customerId\\\": \\\"A1WBE5ZIVK5RWJ\\\", \\\"devices\\\": [{\\\"deviceSerialNumber\\\": \\\"G******************R\\\", \\\"deviceTypeId\\\": \\\"A32DOYMUN6DTXA\\\"}]}, \\\"skillId\\\": \\\"amzn1.ask.1p.saysomething\\\"}}]}}\", \"status\": \"ENABLED\"}\r\n2021-02-08 19:59:51 DEBUG (MainThread) [alexapy.alexaapi] a****n@f**********t: POST: https://alexa.amazon.com/api/behaviors/preview returned 200:OK:application/octet-stream\r\n2021-02-08 19:59:51 DEBUG (MainThread) [custom_components.alexa_media] a****n@f**********t: Received websocket command: PUSH_ACTIVITY : {'destinationUserId': 'A**********RWJ', 'timestamp': 1612839591662, 'key': {'registeredUserId': 'A1WBE5ZIVK5RWJ', 'entryId': '1612839591638#A32DOYMUN6DTXA#G******************R'}}\r\n2021-02-08 19:59:51 DEBUG (MainThread) [alexapy.alexaapi] a****n@f**********t: static GET: https://alexa.amazon.com/api/activities?startTime=&size=10&offset=1 returned 200:OK:application/json\r\n2021-02-08 19:59:51 DEBUG (MainThread) [custom_components.alexa_media] a****n@f**********t: Updated last_called: \r\n2021-02-08 19:59:51 DEBUG (MainThread) [custom_components.alexa_media] a****n@f**********t: Received websocket command: PUSH_EQUALIZER_STATE_CHANGE : {'destinationUserId': 'A**********RWJ', 'dopplerId': {'deviceType': 'A32DOYMUN6DTXA', 'deviceSerialNumber': 'G************1KR'}, 'bass': 0, 'midrange': 0, 'treble': 0}\r\n2021-02-08 19:59:51 DEBUG (MainThread) [custom_components.alexa_media] Updating media_player availability {'destinationUserId': 'A**********RWJ', 'dopplerId': {'deviceType': 'A32DOYMUN6DTXA', 'deviceSerialNumber': 'G************1KR'}, 'bass': 0, 'midrange': 0, 'treble': 0}\r\n2021-02-08 19:59:51 DEBUG (MainThread) [custom_components.alexa_media.media_player] a****n@f**********t: No PUSH_AUDIO_PLAYER_STATE/PUSH_MEDIA_CHANGE/PUSH_MEDIA_PROGRESS_CHANGE in dict_keys(['PUSH_VOLUME_CHANGE', 'PUSH_ACTIVITY', 'PUSH_EQUALIZER_STATE_CHANGE']);forcing refresh\r\n2021-02-08 19:59:51 DEBUG (MainThread) [custom_components.alexa_media.media_player] a****n@f**********t: Refreshing <Entity Living Room Echo Dot: standby>\r\n2021-02-08 19:59:51 DEBUG (MainThread) [custom_components.alexa_media.media_player] a****n@f**********t: Living Room Echo Dot: Last_called check: self: G************1KR reported: \r\n2021-02-08 19:59:52 DEBUG (MainThread) [custom_components.alexa_media] a****n@f**********t: Received websocket command: PUSH_VOLUME_CHANGE : {'destinationUserId': 'A**********RWJ', 'dopplerId': {'deviceType': 'A32DOYMUN6DTXA', 'deviceSerialNumber': 'G************1KR'}, 'volumeSetting': 100, 'isMuted': False}\r\n2021-02-08 19:59:52 DEBUG (MainThread) [custom_components.alexa_media] Updating media_player volume: {'destinationUserId': 'A**********RWJ', 'dopplerId': {'deviceType': 'A32DOYMUN6DTXA', 'deviceSerialNumber': 'G************1KR'}, 'volumeSetting': 100, 'isMuted': False}\r\n2021-02-08 19:59:52 DEBUG (MainThread) [custom_components.alexa_media.media_player] a****n@f**********t: Living Room Echo Dot volume updated: 100\r\n2021-02-08 19:59:52 DEBUG (MainThread) [custom_components.alexa_media.media_player] a****n@f**********t: No PUSH_AUDIO_PLAYER_STATE/PUSH_MEDIA_CHANGE/PUSH_MEDIA_PROGRESS_CHANGE in dict_keys(['PUSH_VOLUME_CHANGE', 'PUSH_ACTIVITY', 'PUSH_EQUALIZER_STATE_CHANGE']);forcing refresh\r\n2021-02-08 19:59:52 DEBUG (MainThread) [alexapy.alexaapi] a****n@f**********t: GET: https://alexa.amazon.com/api/np/player?deviceSerialNumber=G******************R&deviceType=A32DOYMUN6DTXA&screenWidth=2560&_=1612839591974 returned 200:OK:application/json\r\n2021-02-08 19:59:55 DEBUG (MainThread) [custom_components.alexa_media] a****n@f**********t: Received websocket command: PUSH_EQUALIZER_STATE_CHANGE : {'destinationUserId': 'A**********RWJ', 'dopplerId': {'deviceType': 'A32DOYMUN6DTXA', 'deviceSerialNumber': 'G************1KR'}, 'bass': 0, 'midrange': 0, 'treble': 0}\r\n2021-02-08 19:59:55 DEBUG (MainThread) [custom_components.alexa_media] Updating media_player availability {'destinationUserId': 'A**********RWJ', 'dopplerId': {'deviceType': 'A32DOYMUN6DTXA', 'deviceSerialNumber': 'G************1KR'}, 'bass': 0, 'midrange': 0, 'treble': 0}\r\n2021-02-08 19:59:55 DEBUG (MainThread) [custom_components.alexa_media.media_player] a****n@f**********t: No PUSH_AUDIO_PLAYER_STATE/PUSH_MEDIA_CHANGE/PUSH_MEDIA_PROGRESS_CHANGE in dict_keys(['PUSH_VOLUME_CHANGE', 'PUSH_ACTIVITY', 'PUSH_EQUALIZER_STATE_CHANGE']);forcing refresh\r\n2021-02-08 19:59:55 DEBUG (MainThread) [custom_components.alexa_media.media_player] a****n@f**********t: Refreshing <Entity Living Room Echo Dot: standby>\r\n2021-02-08 19:59:55 DEBUG (MainThread) [custom_components.alexa_media.media_player] a****n@f**********t: Living Room Echo Dot: Last_called check: self: G************1KR reported: \r\n2021-02-08 19:59:55 DEBUG (MainThread) [custom_components.alexa_media] a****n@f**********t: Received websocket command: PUSH_VOLUME_CHANGE : {'destinationUserId': 'A**********RWJ', 'dopplerId': {'deviceType': 'A32DOYMUN6DTXA', 'deviceSerialNumber': 'G************1KR'}, 'volumeSetting': 100, 'isMuted': False}\r\n2021-02-08 19:59:55 DEBUG (MainThread) [custom_components.alexa_media] Updating media_player volume: {'destinationUserId': 'A**********RWJ', 'dopplerId': {'deviceType': 'A32DOYMUN6DTXA', 'deviceSerialNumber': 'G************1KR'}, 'volumeSetting': 100, 'isMuted': False}\r\n2021-02-08 19:59:55 DEBUG (MainThread) [custom_components.alexa_media.media_player] a****n@f**********t: Living Room Echo Dot volume updated: 100\r\n2021-02-08 19:59:55 DEBUG (MainThread) [custom_components.alexa_media.media_player] a****n@f**********t: No PUSH_AUDIO_PLAYER_STATE/PUSH_MEDIA_CHANGE/PUSH_MEDIA_PROGRESS_CHANGE in dict_keys(['PUSH_VOLUME_CHANGE', 'PUSH_ACTIVITY', 'PUSH_EQUALIZER_STATE_CHANGE']);forcing refresh\r\n2021-02-08 19:59:55 DEBUG (MainThread) [alexapy.alexaapi] a****n@f**********t: GET: https://alexa.amazon.com/api/np/player?deviceSerialNumber=G******************R&deviceType=A32DOYMUN6DTXA&screenWidth=2560&_=1612839595791 returned 200:OK:application/json\r\n```\r\n\r\n2. If I turn the script to parallel and I execute it twice at the same time, the calls are batched.", "reactions": {"url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/1178/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/1178/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/1120", "repository_url": "https://api.github.com/repos/custom-components/alexa_media_player", "labels_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/1120/labels{/name}", "comments_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/1120/comments", "events_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/1120/events", "html_url": "https://github.com/custom-components/alexa_media_player/issues/1120", "id": 792403957, "node_id": "MDU6SXNzdWU3OTI0MDM5NTc=", "number": 1120, "title": "A connection error occured: An exception of type KeyError occurred. Arguments: ('activities',)", "user": {"login": "kkellner", "id": 9540241, "node_id": "MDQ6VXNlcjk1NDAyNDE=", "avatar_url": "https://avatars.githubusercontent.com/u/9540241?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kkellner", "html_url": "https://github.com/kkellner", "followers_url": "https://api.github.com/users/kkellner/followers", "following_url": "https://api.github.com/users/kkellner/following{/other_user}", "gists_url": "https://api.github.com/users/kkellner/gists{/gist_id}", "starred_url": "https://api.github.com/users/kkellner/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kkellner/subscriptions", "organizations_url": "https://api.github.com/users/kkellner/orgs", "repos_url": "https://api.github.com/users/kkellner/repos", "events_url": "https://api.github.com/users/kkellner/events{/privacy}", "received_events_url": "https://api.github.com/users/kkellner/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 983327104, "node_id": "MDU6TGFiZWw5ODMzMjcxMDQ=", "url": "https://api.github.com/repos/custom-components/alexa_media_player/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}, {"id": 983327105, "node_id": "MDU6TGFiZWw5ODMzMjcxMDU=", "url": "https://api.github.com/repos/custom-components/alexa_media_player/labels/duplicate", "name": "duplicate", "color": "cfd3d7", "default": true, "description": "This issue or pull request already exists"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2021-01-23T01:37:40Z", "updated_at": "2021-01-23T01:41:08Z", "closed_at": "2021-01-23T01:40:52Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "**Describe the bug**\r\nEverything was working well on v3.4.8.  When I upgraded to v3.5.0 the \"next_timer\" sensors were not updated when I say \"alexa set timer for...\".   Looking into the log I found 2 warnings and 1 error.  These warnings and error only show up AFTER I say \"alexa set timer for...\".  Prior to that, there are no warnings or errors in the logs.\r\n\r\nWarning 1:\r\n```\r\nLogger: alexapy.helpers\r\nSource: /usr/local/lib/python3.8/site-packages/alexapy/helpers.py:143\r\nFirst occurred: 6:26:29 PM (2 occurrences)\r\nLast logged: 6:26:30 PM\r\n\r\nalexaapi.get_activities((<alexapy.alexalogin.AlexaLogin object at 0x7f27f0b10eb0>, 10), {}): A connection error occured: An exception of type KeyError occurred. Arguments: ('activities',)\r\n```\r\n\r\nWarning 2:\r\n```\r\nLogger: alexapy.helpers\r\nSource: /usr/local/lib/python3.8/site-packages/alexapy/helpers.py:189\r\nFirst occurred: 6:26:29 PM (2 occurrences)\r\nLast logged: 6:26:30 PM\r\n\r\nalexaapi.get_last_device_serial((<alexapy.alexalogin.AlexaLogin object at 0x7f27f0b10eb0>,), {}): An error occured accessing AlexaAPI: An exception of type AlexapyConnectionError occurred. Arguments: ()\r\n```\r\n\r\nError 1:\r\n```\r\nLogger: custom_components.alexa_media\r\nSource: custom_components/alexa_media/__init__.py:597\r\nIntegration: Alexa Media Player (documentation, issues)\r\nFirst occurred: 6:26:30 PM (1 occurrences)\r\nLast logged: 6:26:30 PM\r\n\r\nUnexpected error fetching alexa_media data:\r\nTraceback (most recent call last):\r\n  File \"/usr/local/lib/python3.8/site-packages/alexapy/helpers.py\", line 141, in wrapper\r\n    return await func(*args, **kwargs)\r\n  File \"/usr/local/lib/python3.8/site-packages/alexapy/alexaapi.py\", line 1197, in get_activities\r\n    (await response.json(content_type=None))[\"activities\"] if response else None\r\nKeyError: 'activities'\r\n\r\nThe above exception was the direct cause of the following exception:\r\n\r\nTraceback (most recent call last):\r\n  File \"/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py\", line 144, in async_refresh\r\n    self.data = await self._async_update_data()\r\n  File \"/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py\", line 132, in _async_update_data\r\n    return await self.update_method()\r\n  File \"/config/custom_components/alexa_media/__init__.py\", line 393, in async_update_data\r\n    await update_last_called(login_obj)\r\n  File \"/config/custom_components/alexa_media/helpers.py\", line 162, in _catch_login_errors\r\n    result = await func(*args, **kwargs)\r\n  File \"/config/custom_components/alexa_media/__init__.py\", line 597, in update_last_called\r\n    last_called = await AlexaAPI.get_last_device_serial(login_obj)\r\n  File \"/usr/local/lib/python3.8/site-packages/alexapy/helpers.py\", line 141, in wrapper\r\n    return await func(*args, **kwargs)\r\n  File \"/usr/local/lib/python3.8/site-packages/alexapy/alexaapi.py\", line 1230, in get_last_device_serial\r\n    response = await AlexaAPI.get_activities(login, items)\r\n  File \"/usr/local/lib/python3.8/site-packages/alexapy/helpers.py\", line 151, in wrapper\r\n    raise AlexapyConnectionError from ex\r\nalexapy.errors.AlexapyConnectionError\r\n```\r\n\r\n**To Reproduce**\r\nSteps to reproduce the behavior:\r\n1. Install v3.5.0 of Alexa integration (I'm using core-2021.1.4 of HA)\r\n2. Look at logs -- everything should be clean.\r\n3. Say \"Alexa set timer for 1 minute\"\r\n4. Look at log file. The above documented warnings and error occur.\r\n\r\n\r\n**System details**\r\n - Home-assistant (version): core-2021.1.4\r\n - Hassio (Yes/No): yes\r\n - alexa_media  (version from `const.py` or HA startup): v3.5.0\r\n - alexapy (version from `pip show alexapy` or HA startup): ?\r\n - Amazon [2FA is enabled](https://github.com/custom-components/alexa_media_player/wiki/Configuration#enable-two-factor-authentication-for-your-amazon-account) (y/n). y\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/1120/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/1120/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/1117", "repository_url": "https://api.github.com/repos/custom-components/alexa_media_player", "labels_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/1117/labels{/name}", "comments_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/1117/comments", "events_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/1117/events", "html_url": "https://github.com/custom-components/alexa_media_player/issues/1117", "id": 792277458, "node_id": "MDU6SXNzdWU3OTIyNzc0NTg=", "number": 1117, "title": "alexapy.errors.AlexapyConnectionError in update_last_called", "user": {"login": "chemelli74", "id": 57354320, "node_id": "MDQ6VXNlcjU3MzU0MzIw", "avatar_url": "https://avatars.githubusercontent.com/u/57354320?v=4", "gravatar_id": "", "url": "https://api.github.com/users/chemelli74", "html_url": "https://github.com/chemelli74", "followers_url": "https://api.github.com/users/chemelli74/followers", "following_url": "https://api.github.com/users/chemelli74/following{/other_user}", "gists_url": "https://api.github.com/users/chemelli74/gists{/gist_id}", "starred_url": "https://api.github.com/users/chemelli74/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/chemelli74/subscriptions", "organizations_url": "https://api.github.com/users/chemelli74/orgs", "repos_url": "https://api.github.com/users/chemelli74/repos", "events_url": "https://api.github.com/users/chemelli74/events{/privacy}", "received_events_url": "https://api.github.com/users/chemelli74/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 983327104, "node_id": "MDU6TGFiZWw5ODMzMjcxMDQ=", "url": "https://api.github.com/repos/custom-components/alexa_media_player/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2021-01-22T20:16:29Z", "updated_at": "2021-01-23T04:21:19Z", "closed_at": "2021-01-23T04:21:19Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "**Describe the bug**\r\nRefresh data not working, but there is no prompt to relogin.\r\n\r\n**To Reproduce**\r\nSteps to reproduce the behavior:\r\n1. Check log\r\n\r\n**Expected behavior**\r\nWorking connection to retrieve updated data\r\n\r\n**Screenshots**\r\nIf applicable, add screenshots to help explain your problem.\r\n\r\n**System details**\r\n - Home-assistant (version): 2021.1.3\r\n - Hassio (Yes/No): No\r\n - alexa_media  (version from `const.py` or HA startup): v3.5.0\r\n - alexapy (version from `pip show alexapy` or HA startup):\r\n - Amazon [2FA is enabled](https://github.com/custom-components/alexa_media_player/wiki/Configuration#enable-two-factor-authentication-for-your-amazon-account): Yes\r\n\r\n**Logs**\r\n```\r\n2021-01-20 20:43:46 WARNING (MainThread) [alexapy.helpers] alexaapi.get_activities((<alexapy.alexalogin.AlexaLogin object at 0x7f6929707c70>, 10), {}): A connection error occured: An exception of type KeyError occurred. Arguments:\r\n('activities',)\r\n2021-01-20 20:43:46 WARNING (MainThread) [alexapy.helpers] alexaapi.get_last_device_serial((<alexapy.alexalogin.AlexaLogin object at 0x7f6929707c70>,), {}): An error occured accessing AlexaAPI: An exception of type AlexapyConnectionError\r\n occurred. Arguments:\r\n()\r\n2021-01-20 20:43:46 ERROR (MainThread) [homeassistant] Error doing job: Task exception was never retrieved\r\nTraceback (most recent call last):\r\n  File \"/usr/local/lib/python3.8/site-packages/alexapy/helpers.py\", line 141, in wrapper\r\n    return await func(*args, **kwargs)\r\n  File \"/usr/local/lib/python3.8/site-packages/alexapy/alexaapi.py\", line 1197, in get_activities\r\n    (await response.json(content_type=None))[\"activities\"] if response else None\r\nKeyError: 'activities'\r\n\r\nThe above exception was the direct cause of the following exception:\r\n\r\nTraceback (most recent call last):\r\n  File \"/usr/local/lib/python3.8/site-packages/alexapy/alexawebsocket.py\", line 144, in process_messages\r\n    await self.on_message(cast(bytes, msg.data))\r\n  File \"/usr/local/lib/python3.8/site-packages/alexapy/alexawebsocket.py\", line 226, in on_message\r\n    await self.msg_callback(message_obj)\r\n  File \"/config/custom_components/alexa_media/__init__.py\", line 750, in ws_handler\r\n    await update_last_called(login_obj, last_called)\r\n  File \"/config/custom_components/alexa_media/helpers.py\", line 162, in _catch_login_errors\r\n    result = await func(*args, **kwargs)\r\n  File \"/config/custom_components/alexa_media/__init__.py\", line 597, in update_last_called\r\n    last_called = await AlexaAPI.get_last_device_serial(login_obj)\r\n  File \"/usr/local/lib/python3.8/site-packages/alexapy/helpers.py\", line 141, in wrapper\r\n    return await func(*args, **kwargs)\r\n  File \"/usr/local/lib/python3.8/site-packages/alexapy/alexaapi.py\", line 1230, in get_last_device_serial\r\n    response = await AlexaAPI.get_activities(login, items)\r\n  File \"/usr/local/lib/python3.8/site-packages/alexapy/helpers.py\", line 151, in wrapper\r\n    raise AlexapyConnectionError from ex\r\nalexapy.errors.AlexapyConnectionError\r\n\r\n```\r\n**Additional context**\r\nAdd any other context about the problem here. \r\n", "reactions": {"url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/1117/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/1117/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/1116", "repository_url": "https://api.github.com/repos/custom-components/alexa_media_player", "labels_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/1116/labels{/name}", "comments_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/1116/comments", "events_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/1116/events", "html_url": "https://github.com/custom-components/alexa_media_player/issues/1116", "id": 791548327, "node_id": "MDU6SXNzdWU3OTE1NDgzMjc=", "number": 1116, "title": "Announce and TTS not working for secondary accounts", "user": {"login": "Didgeridrew", "id": 19187320, "node_id": "MDQ6VXNlcjE5MTg3MzIw", "avatar_url": "https://avatars.githubusercontent.com/u/19187320?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Didgeridrew", "html_url": "https://github.com/Didgeridrew", "followers_url": "https://api.github.com/users/Didgeridrew/followers", "following_url": "https://api.github.com/users/Didgeridrew/following{/other_user}", "gists_url": "https://api.github.com/users/Didgeridrew/gists{/gist_id}", "starred_url": "https://api.github.com/users/Didgeridrew/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Didgeridrew/subscriptions", "organizations_url": "https://api.github.com/users/Didgeridrew/orgs", "repos_url": "https://api.github.com/users/Didgeridrew/repos", "events_url": "https://api.github.com/users/Didgeridrew/events{/privacy}", "received_events_url": "https://api.github.com/users/Didgeridrew/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 983327104, "node_id": "MDU6TGFiZWw5ODMzMjcxMDQ=", "url": "https://api.github.com/repos/custom-components/alexa_media_player/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 7, "created_at": "2021-01-21T22:46:14Z", "updated_at": "2021-01-23T04:21:08Z", "closed_at": "2021-01-23T04:21:08Z", "author_association": "NONE", "active_lock_reason": null, "body": "**Describe the bug**\r\nAnnouncement and TTS notification types not working as expected on Echo dot devices (2nd & 3rd Gen dots tested).  The announcement notification type will only output on media_player.everywhere and the tts type will only output on individual devices.\r\n\r\n**To Reproduce**\r\nSteps to reproduce the behavior:\r\n```\r\n notify.alexa_media\r\n\r\n  data:\r\n    type: tts\r\n  target:\r\n    - media_player.everywhere\r\n  message: Test Test Test 1 2 3\r\n```\r\nor\r\n\r\n```\r\n notify.alexa_media\r\n\r\n  data:\r\n    type: announce\r\n  target:\r\n    - media_player.basement_dot\r\n  message: Test Test Test 1 2 3\r\n```\r\n\r\n**Expected behavior**\r\n\r\nThe tts type notifications should just play the message and announcement type notifications play an attention chime then the message.\r\n\r\n**Screenshots**\r\nIf applicable, add screenshots to help explain your problem.\r\n\r\n**System details**\r\n - Home-assistant (version): 2021.1.4\r\n - Hassio (Yes/No): Home Assistant OS 5.10\r\n - alexa_media  (version from `const.py` or HA startup): 3.5.0\r\n - alexapy (version from `pip show alexapy` or HA startup): 1.22.0\r\n - Amazon [2FA is enabled]:  Y\r\n\r\n**Logs**\r\n``` \r\n2021-01-21 15:00:06 DEBUG (MainThread) [alexapy.alexalogin] Failed to refresh access token\r\n2021-01-21 15:00:06 DEBUG (MainThread) [alexapy.alexawebsocket] Received WebSocket: MSG 0x00000362 0x13289cf9 f 0x00000001 0x4e0fc0b2 0x00000225 GWM MSG 0x0000b479 0x0000005c urn:tcomm-endpoint:service:serviceName:DeeWebsiteMessagingService:domain:prod:realm:USAmazon 0x0000006e urn:tcomm-endpoint:device:customerId:A2GQJDB5O21AMC:deviceType:ALEGCNGL9K0HM:deviceSerialNumber:-1611258827000 {\"timeStamp\":null,\"payload\":\"{\\\"destinationUserId\\\":\\\"A2GQJDB5O21AMC\\\",\\\"timestamp\\\":1611259206844,\\\"key\\\":{\\\"registeredUserId\\\":\\\"A2GQJDB5O21AMC\\\",\\\"entryId\\\":\\\"1611259206823#A1RABVCI4QCIKC#G6G0XG100275009R\\\"}}\",\"command\":\"PUSH_ACTIVITY\"}FABE\r\n2021-01-21 15:00:06 DEBUG (MainThread) [alexapy.alexawebsocket] Received Standard MSG.\r\n2021-01-21 15:00:06 DEBUG (MainThread) [custom_components.alexa_media] c***********o@h*********m: Received websocket command: PUSH_ACTIVITY : {'destinationUserId': 'A**********AMC', 'timestamp': 1611259206844, 'key': {'registeredUserId': 'A2GQJDB5O21AMC', 'entryId': '1611259206823#A1RABVCI4QCIKC#G6G0XG100275009R'}}\r\n2021-01-21 15:00:06 DEBUG (MainThread) [alexapy.alexaapi] c***********o@h*********m: Detected access token expiration; refreshing\r\n2021-01-21 15:00:06 DEBUG (MainThread) [alexapy.alexalogin] refresh response <ClientResponse(https://api.amazon.com/auth/token) [400 Bad Request]>\r\n<CIMultiDictProxy('Server': 'Server', 'Date': 'Thu, 21 Jan 2021 20:00:06 GMT', 'Content-Type': 'application/json;charset=UTF-8', 'Content-Length': '98', 'Connection': 'keep-alive', 'x-amz-rid': 'TPBGAJ41R7BDJ4R55E6H', 'x-amzn-RequestId': '46b0e9de-6eb7-475f-a7fd-463eba01fc19', 'X-Amz-Date': 'Thu, 21 Jan 2021 20:00:06 GMT', 'x-amzn-ErrorType': 'InvalidValueException:http://internal.amazon.com/coral/com.amazon.panda/', 'Cache-Control': 'no-cache, no-store, must-revalidate', 'Pragma': 'no-cache', 'Vary': 'Content-Type,Accept-Encoding,X-Amzn-CDN-Cache,X-Amzn-AX-Treatment,User-Agent')>\r\nwith\r\n{\"app_name\": \"Alexa Media Player\", \"app_version\": \"2.2.223830.0\", \"di.sdk.version\": \"6.10.0\", \"source_token\": \"Atnr|-1UTG5xNF7PKdpzd3gXKdZd15Cp8_dCe7IEerEOueLcpVvf8sZY5gX5nEUmTpqKmf6--cILbxg3_Riopa8ywk4BE02dpxHMpuKnHeabBOuW4bmkKaQZQqozBEZZgnknVeWOTT0wLXPksqKXurDPoVh968RPvhNsLQftMw2cTzVpKYQyW7OLqfgUuzBnWUGOhW9NtifpmOG\", \"package_name\": \"com.amazon.echo\", \"di.hw.version\": \"iPhone\", \"platform\": \"iOS\", \"requested_token_type\": \"access_token\", \"source_token_type\": \"refresh_token\", \"di.os.name\": \"iOS\", \"di.os.version\": \"11.4.1\", \"current_version\": \"6.10.0\"}\r\n2021-01-21 15:00:06 DEBUG (MainThread) [alexapy.alexalogin] Failed to refresh access token\r\n2021-01-21 15:00:06 DEBUG (MainThread) [alexapy.alexaapi] c***********o@h*********m: GET: https://alexa.amazon.com/api/np/player?deviceSerialNumber=G090LF0971260MJE&deviceType=A3S5BH2HU6VAYF&screenWidth=2560&_=1611259206791 returned 200:OK:application/json\r\n2021-01-21 15:00:07 DEBUG (MainThread) [alexapy.alexaapi] c***********o@h*********m: static GET: https://alexa.amazon.com/api/activities?startTime=&size=10&offset=1 returned 200:OK:application/json\r\n2021-01-21 15:00:07 DEBUG (MainThread) [custom_components.alexa_media] c***********o@h*********m: Updated last_called: {'serialNumber': 'G************MJE', 'timestamp': 1611258212026, 'summary': 'alexa go to chapter sixteen'}\r\n2021-01-21 15:00:07 DEBUG (MainThread) [custom_components.alexa_media.media_player] c***********o@h*********m: Mark's Den Dot checking for potential state update due to push activity on G************09R\r\n2021-01-21 15:00:07 DEBUG (MainThread) [custom_components.alexa_media.media_player] c***********o@h*********m: Master Bedroom Dot checking for potential state update due to push activity on G************09R\r\n2021-01-21 15:00:09 DEBUG (MainThread) [custom_components.alexa_media.media_player] c***********o@h*********m: Refreshing <Entity Mark's Den Dot: idle>\r\n2021-01-21 15:00:09 DEBUG (MainThread) [custom_components.alexa_media.media_player] c***********o@h*********m: Mark's Den Dot: Last_called check: self: G************5TL reported: G************MJE\r\n2021-01-21 15:00:09 DEBUG (MainThread) [alexapy.alexaapi] c***********o@h*********m: Detected access token expiration; refreshing\r\n2021-01-21 15:00:09 DEBUG (MainThread) [custom_components.alexa_media.media_player] c***********o@h*********m: Refreshing <Entity Master Bedroom Dot: playing>\r\n2021-01-21 15:00:09 DEBUG (MainThread) [custom_components.alexa_media.media_player] c***********o@h*********m: Master Bedroom Dot: Last_called check: self: G************MJE reported: G************MJE\r\n2021-01-21 15:00:09 DEBUG (MainThread) [alexapy.alexalogin] refresh response <ClientResponse(https://api.amazon.com/auth/token) [400 Bad Request]>\r\n<CIMultiDictProxy('Server': 'Server', 'Date': 'Thu, 21 Jan 2021 20:00:09 GMT', 'Content-Type': 'application/json;charset=UTF-8', 'Content-Length': '98', 'Connection': 'keep-alive', 'x-amz-rid': 'V7NDV3DQESTE6Q6RXJQN', 'x-amzn-RequestId': '9335e29d-d4fd-4d73-93e0-23c9f83321c7', 'X-Amz-Date': 'Thu, 21 Jan 2021 20:00:09 GMT', 'x-amzn-ErrorType': 'InvalidValueException:http://internal.amazon.com/coral/com.amazon.panda/', 'Cache-Control': 'no-cache, no-store, must-revalidate', 'Pragma': 'no-cache', 'Vary': 'Content-Type,Accept-Encoding,X-Amzn-CDN-Cache,X-Amzn-AX-Treatment,User-Agent')>\r\nwith\r\n{\"app_name\": \"Alexa Media Player\", \"app_version\": \"2.2.223830.0\", \"di.sdk.version\": \"6.10.0\", \"source_token\": \"Atnr|-1UTG5xNF7PKdpzd3gXKdZd15Cp8_dCe7IEerEOueLcpVvf8sZY5gX5nEUmTpqKmf6--cILbxg3_Riopa8ywk4BE02dpxHMpuKnHeabBOuW4bmkKaQZQqozBEZZgnknVeWOTT0wLXPksqKXurDPoVh968RPvhNsLQftMw2cTzVpKYQyW7OLqfgUuzBnWUGOhW9NtifpmOG\", \"package_name\": \"com.amazon.echo\", \"di.hw.version\": \"iPhone\", \"platform\": \"iOS\", \"requested_token_type\": \"access_token\", \"source_token_type\": \"refresh_token\", \"di.os.name\": \"iOS\", \"di.os.version\": \"11.4.1\", \"current_version\": \"6.10.0\"}\r\n2021-01-21 15:00:09 DEBUG (MainThread) [alexapy.alexalogin] Failed to refresh access token\r\n2021-01-21 15:00:09 DEBUG (MainThread) [alexapy.alexaapi] c***********o@h*********m: Detected access token expiration; refreshing\r\n2021-01-21 15:00:09 DEBUG (MainThread) [alexapy.alexalogin] refresh response <ClientResponse(https://api.amazon.com/auth/token) [400 Bad Request]>\r\n<CIMultiDictProxy('Server': 'Server', 'Date': 'Thu, 21 Jan 2021 20:00:09 GMT', 'Content-Type': 'application/json;charset=UTF-8', 'Content-Length': '98', 'Connection': 'keep-alive', 'x-amz-rid': 'BRFTYS22TPTXZY4EW2XB', 'x-amzn-RequestId': 'e0ba1c9b-36c8-4b39-aaeb-6db034ca2651', 'X-Amz-Date': 'Thu, 21 Jan 2021 20:00:09 GMT', 'x-amzn-ErrorType': 'InvalidValueException:http://internal.amazon.com/coral/com.amazon.panda/', 'Cache-Control': 'no-cache, no-store, must-revalidate', 'Pragma': 'no-cache', 'Vary': 'Content-Type,Accept-Encoding,X-Amzn-CDN-Cache,X-Amzn-AX-Treatment,User-Agent')>\r\nwith\r\n{\"app_name\": \"Alexa Media Player\", \"app_version\": \"2.2.223830.0\", \"di.sdk.version\": \"6.10.0\", \"source_token\": \"Atnr|-1UTG5xNF7PKdpzd3gXKdZd15Cp8_dCe7IEerEOueLcpVvf8sZY5gX5nEUmTpqKmf6--cILbxg3_Riopa8ywk4BE02dpxHMpuKnHeabBOuW4bmkKaQZQqozBEZZgnknVeWOTT0wLXPksqKXurDPoVh968RPvhNsLQftMw2cTzVpKYQyW7OLqfgUuzBnWUGOhW9NtifpmOG\", \"package_name\": \"com.amazon.echo\", \"di.hw.version\": \"iPhone\", \"platform\": \"iOS\", \"requested_token_type\": \"access_token\", \"source_token_type\": \"refresh_token\", \"di.os.name\": \"iOS\", \"di.os.version\": \"11.4.1\", \"current_version\": \"6.10.0\"}\r\n2021-01-21 15:00:09 DEBUG (MainThread) [alexapy.alexalogin] Failed to refresh access token\r\n2021-01-21 15:00:09 DEBUG (MainThread) [alexapy.alexaapi] c***********o@h*********m: GET: https://alexa.amazon.com/api/np/player?deviceSerialNumber=G6G0XG09006505TL&deviceType=A1RABVCI4QCIKC&screenWidth=2560&_=1611259209338 returned 200:OK:application/json\r\n2021-01-21 15:00:09 DEBUG (MainThread) [alexapy.alexaapi] c***********o@h*********m: GET: https://alexa.amazon.com/api/np/player?deviceSerialNumber=G090LF0971260MJE&deviceType=A3S5BH2HU6VAYF&screenWidth=2560&_=1611259209411 returned 200:OK:application/json\r\n2021-01-21 15:00:09 DEBUG (MainThread) [custom_components.alexa_media.notify] Message: <amazon:emotion name='excited' intensity='high'>Test Test Test 1 2 3</amazon:emotion>, kwargs: {'target': ['media_player.basement_dot'], 'data': {'type': 'tts', 'method': 'speak'}, 'message': \"<amazon:emotion name='excited' intensity='high'>Test Test Test 1 2 3</amazon:emotion>\"}\r\n2021-01-21 15:00:09 DEBUG (MainThread) [custom_components.alexa_media.notify] Target type: <class 'list'>\r\n2021-01-21 15:00:09 DEBUG (MainThread) [custom_components.alexa_media.notify] Processing: media_player.basement_dot\r\n2021-01-21 15:00:09 DEBUG (MainThread) [custom_components.alexa_media.notify] Processed Target by string: ['media_player.basement_dot']\r\n2021-01-21 15:00:10 DEBUG (MainThread) [custom_components.alexa_media.notify] TTS by <Entity Basement Dot: standby> : <amazon:emotion name='excited' intensity='high'>Test Test Test 1 2 3</amazon:emotion>\r\n2021-01-21 15:00:11 DEBUG (MainThread) [alexapy.alexaapi] c***********o@h*********m: Creating sequence for 1 items\r\n2021-01-21 15:00:11 DEBUG (MainThread) [alexapy.alexaapi] c***********o@h*********m: Running behavior with data: {\"behaviorId\": \"PREVIEW\", \"sequenceJson\": \"{\\\"@type\\\": \\\"com.amazon.alexa.behaviors.model.Sequence\\\", \\\"startNode\\\": {\\\"@type\\\": \\\"com.amazon.alexa.behaviors.model.SerialNode\\\", \\\"nodesToExecute\\\": [{\\\"@type\\\": \\\"com.amazon.alexa.behaviors.model.OpaquePayloadOperationNode\\\", \\\"type\\\": \\\"Alexa.Speak\\\", \\\"operationPayload\\\": {\\\"deviceType\\\": \\\"A1RABVCI4QCIKC\\\", \\\"deviceSerialNumber\\\": \\\"G6G0XG100275009R\\\", \\\"locale\\\": \\\"en-us\\\", \\\"customerId\\\": \\\"A2GQJDB5O21AMC\\\", \\\"textToSpeak\\\": \\\"<amazon:emotion name='excited' intensity='high'>Test Test Test 1 2 3</amazon:emotion>\\\", \\\"target\\\": {\\\"customerId\\\": \\\"A2GQJDB5O21AMC\\\", \\\"devices\\\": [{\\\"deviceSerialNumber\\\": \\\"G6G0XG100275009R\\\", \\\"deviceTypeId\\\": \\\"A1RABVCI4QCIKC\\\"}]}, \\\"skillId\\\": \\\"amzn1.ask.1p.saysomething\\\"}}]}}\", \"status\": \"ENABLED\"}\r\n2021-01-21 15:00:11 DEBUG (MainThread) [alexapy.alexaapi] c***********o@h*********m: Detected access token expiration; refreshing\r\n2021-01-21 15:00:11 DEBUG (MainThread) [alexapy.alexalogin] refresh response <ClientResponse(https://api.amazon.com/auth/token) [400 Bad Request]>\r\n<CIMultiDictProxy('Server': 'Server', 'Date': 'Thu, 21 Jan 2021 20:00:11 GMT', 'Content-Type': 'application/json;charset=UTF-8', 'Content-Length': '98', 'Connection': 'keep-alive', 'x-amz-rid': 'SGMSRYFJDXD1BTPV8C4E', 'x-amzn-RequestId': 'f69de0bc-4fb9-4354-9503-5bb76fd25e16', 'X-Amz-Date': 'Thu, 21 Jan 2021 20:00:11 GMT', 'x-amzn-ErrorType': 'InvalidValueException:http://internal.amazon.com/coral/com.amazon.panda/', 'Cache-Control': 'no-cache, no-store, must-revalidate', 'Pragma': 'no-cache', 'Vary': 'Content-Type,Accept-Encoding,X-Amzn-CDN-Cache,X-Amzn-AX-Treatment,User-Agent')>\r\nwith\r\n{\"app_name\": \"Alexa Media Player\", \"app_version\": \"2.2.223830.0\", \"di.sdk.version\": \"6.10.0\", \"source_token\": \"Atnr|-1UTG5xNF7PKdpzd3gXKdZd15Cp8_dCe7IEerEOueLcpVvf8sZY5gX5nEUmTpqKmf6--cILbxg3_Riopa8ywk4BE02dpxHMpuKnHeabBOuW4bmkKaQZQqozBEZZgnknVeWOTT0wLXPksqKXurDPoVh968RPvhNsLQftMw2cTzVpKYQyW7OLqfgUuzBnWUGOhW9NtifpmOG\", \"package_name\": \"com.amazon.echo\", \"di.hw.version\": \"iPhone\", \"platform\": \"iOS\", \"requested_token_type\": \"access_token\", \"source_token_type\": \"refresh_token\", \"di.os.name\": \"iOS\", \"di.os.version\": \"11.4.1\", \"current_version\": \"6.10.0\"}\r\n2021-01-21 15:00:11 DEBUG (MainThread) [alexapy.alexalogin] Failed to refresh access token\r\n2021-01-21 15:00:11 DEBUG (MainThread) [alexapy.alexaapi] c***********o@h*********m: POST: https://alexa.amazon.com/api/behaviors/preview returned 200:OK:application/octet-stream\r\n2021-01-21 15:00:12 DEBUG (MainThread) [alexapy.alexawebsocket] Received WebSocket: MSG 0x00000362 0x12fb9849 f 0x00000001 0x730895b9 0x00000225 GWM MSG 0x0000b479 0x0000005c urn:tcomm-endpoint:service:serviceName:DeeWebsiteMessagingService:domain:prod:realm:USAmazon 0x0000006e urn:tcomm-endpoint:device:customerId:A2GQJDB5O21AMC:deviceType:ALEGCNGL9K0HM:deviceSerialNumber:-1611258827000 {\"timeStamp\":null,\"payload\":\"{\\\"destinationUserId\\\":\\\"A2GQJDB5O21AMC\\\",\\\"timestamp\\\":1611259212585,\\\"key\\\":{\\\"registeredUserId\\\":\\\"A2GQJDB5O21AMC\\\",\\\"entryId\\\":\\\"1611259212551#A1RABVCI4QCIKC#G6G0XG100275009R\\\"}}\",\"command\":\"PUSH_ACTIVITY\"}FABE\r\n2021-01-21 15:00:12 DEBUG (MainThread) [alexapy.alexawebsocket] Received Standard MSG.\r\n2021-01-21 15:00:12 DEBUG (MainThread) [custom_components.alexa_media] c***********o@h*********m: Received websocket command: PUSH_ACTIVITY : {'destinationUserId': 'A**********AMC', 'timestamp': 1611259212585, 'key': {'registeredUserId': 'A2GQJDB5O21AMC', 'entryId': '1611259212551#A1RABVCI4QCIKC#G6G0XG100275009R'}}\r\n2021-01-21 15:00:12 DEBUG (MainThread) [alexapy.alexaapi] c***********o@h*********m: Detected access token expiration; refreshing\r\n2021-01-21 15:00:12 DEBUG (MainThread) [alexapy.alexalogin] refresh response <ClientResponse(https://api.amazon.com/auth/token) [400 Bad Request]>\r\n<CIMultiDictProxy('Server': 'Server', 'Date': 'Thu, 21 Jan 2021 20:00:12 GMT', 'Content-Type': 'application/json;charset=UTF-8', 'Content-Length': '98', 'Connection': 'keep-alive', 'x-amz-rid': 'JFF56ZZC4YWNBAZRMDHJ', 'x-amzn-RequestId': '2fb2ca85-021e-477d-92b5-2afcf2d53410', 'X-Amz-Date': 'Thu, 21 Jan 2021 20:00:12 GMT', 'x-amzn-ErrorType': 'InvalidValueException:http://internal.amazon.com/coral/com.amazon.panda/', 'Cache-Control': 'no-cache, no-store, must-revalidate', 'Pragma': 'no-cache', 'Vary': 'Content-Type,Accept-Encoding,X-Amzn-CDN-Cache,X-Amzn-AX-Treatment,User-Agent')>\r\nwith\r\n{\"app_name\": \"Alexa Media Player\", \"app_version\": \"2.2.223830.0\", \"di.sdk.version\": \"6.10.0\", \"source_token\": \"Atnr|-1UTG5xNF7PKdpzd3gXKdZd15Cp8_dCe7IEerEOueLcpVvf8sZY5gX5nEUmTpqKmf6--cILbxg3_Riopa8ywk4BE02dpxHMpuKnHeabBOuW4bmkKaQZQqozBEZZgnknVeWOTT0wLXPksqKXurDPoVh968RPvhNsLQftMw2cTzVpKYQyW7OLqfgUuzBnWUGOhW9NtifpmOG\", \"package_name\": \"com.amazon.echo\", \"di.hw.version\": \"iPhone\", \"platform\": \"iOS\", \"requested_token_type\": \"access_token\", \"source_token_type\": \"refresh_token\", \"di.os.name\": \"iOS\", \"di.os.version\": \"11.4.1\", \"current_version\": \"6.10.0\"}\r\n2021-01-21 15:00:12 DEBUG (MainThread) [alexapy.alexalogin] Failed to refresh access token\r\n2021-01-21 15:00:12 DEBUG (MainThread) [alexapy.alexaapi] c***********o@h*********m: static GET: https://alexa.amazon.com/api/activities?startTime=&size=10&offset=1 returned 200:OK:application/json\r\n2021-01-21 15:00:12 DEBUG (MainThread) [custom_components.alexa_media] c***********o@h*********m: Updated last_called: {'serialNumber': 'G************MJE', 'timestamp': 1611258212026, 'summary': 'alexa go to chapter sixteen'}\r\n2021-01-21 15:00:12 DEBUG (MainThread) [custom_components.alexa_media.media_player] c***********o@h*********m: Mark's Den Dot checking for potential state update due to push activity on G************09R\r\n2021-01-21 15:00:12 DEBUG (MainThread) [custom_components.alexa_media.media_player] c***********o@h*********m: Master Bedroom Dot checking for potential state update due to push activity on G************09R\r\n2021-01-21 15:00:14 DEBUG (MainThread) [custom_components.alexa_media.media_player] c***********o@h*********m: Refreshing <Entity Mark's Den Dot: idle>\r\n2021-01-21 15:00:14 DEBUG (MainThread) [custom_components.alexa_media.media_player] c***********o@h*********m: Mark's Den Dot: Last_called check: self: G************5TL reported: G************MJE\r\n2021-01-21 15:00:14 DEBUG (MainThread) [alexapy.alexaapi] c***********o@h*********m: Detected access token expiration; refreshing\r\n2021-01-21 15:00:14 DEBUG (MainThread) [custom_components.alexa_media.media_player] c***********o@h*********m: Refreshing <Entity Master Bedroom Dot: playing>\r\n2021-01-21 15:00:14 DEBUG (MainThread) [custom_components.alexa_media.media_player] c***********o@h*********m: Master Bedroom Dot: Last_called check: self: G************MJE reported: G************MJE\r\n2021-01-21 15:00:14 DEBUG (MainThread) [alexapy.alexalogin] refresh response <ClientResponse(https://api.amazon.com/auth/token) [400 Bad Request]>\r\n<CIMultiDictProxy('Server': 'Server', 'Date': 'Thu, 21 Jan 2021 20:00:14 GMT', 'Content-Type': 'application/json;charset=UTF-8', 'Content-Length': '98', 'Connection': 'keep-alive', 'x-amz-rid': 'RVR5BN2APN26CFB9TX9K', 'x-amzn-RequestId': '409df60c-9f74-4d6b-bc3f-ff2238924494', 'X-Amz-Date': 'Thu, 21 Jan 2021 20:00:14 GMT', 'x-amzn-ErrorType': 'InvalidValueException:http://internal.amazon.com/coral/com.amazon.panda/', 'Cache-Control': 'no-cache, no-store, must-revalidate', 'Pragma': 'no-cache', 'Vary': 'Content-Type,Accept-Encoding,X-Amzn-CDN-Cache,X-Amzn-AX-Treatment,User-Agent')>\r\nwith\r\n{\"app_name\": \"Alexa Media Player\", \"app_version\": \"2.2.223830.0\", \"di.sdk.version\": \"6.10.0\", \"source_token\": \"Atnr|-1UTG5xNF7PKdpzd3gXKdZd15Cp8_dCe7IEerEOueLcpVvf8sZY5gX5nEUmTpqKmf6--cILbxg3_Riopa8ywk4BE02dpxHMpuKnHeabBOuW4bmkKaQZQqozBEZZgnknVeWOTT0wLXPksqKXurDPoVh968RPvhNsLQftMw2cTzVpKYQyW7OLqfgUuzBnWUGOhW9NtifpmOG\", \"package_name\": \"com.amazon.echo\", \"di.hw.version\": \"iPhone\", \"platform\": \"iOS\", \"requested_token_type\": \"access_token\", \"source_token_type\": \"refresh_token\", \"di.os.name\": \"iOS\", \"di.os.version\": \"11.4.1\", \"current_version\": \"6.10.0\"}\r\n2021-01-21 15:00:14 DEBUG (MainThread) [alexapy.alexalogin] Failed to refresh access token\r\n2021-01-21 15:00:14 DEBUG (MainThread) [alexapy.alexaapi] c***********o@h*********m: Detected access token expiration; refreshing\r\n2021-01-21 15:00:14 DEBUG (MainThread) [alexapy.alexalogin] refresh response <ClientResponse(https://api.amazon.com/auth/token) [400 Bad Request]>\r\n<CIMultiDictProxy('Server': 'Server', 'Date': 'Thu, 21 Jan 2021 20:00:14 GMT', 'Content-Type': 'application/json;charset=UTF-8', 'Content-Length': '98', 'Connection': 'keep-alive', 'x-amz-rid': 'GM3VQGQGTV6SY8A2J9V9', 'x-amzn-RequestId': 'b28631ba-7a56-4e0f-bb2f-a465b7198442', 'X-Amz-Date': 'Thu, 21 Jan 2021 20:00:14 GMT', 'x-amzn-ErrorType': 'InvalidValueException:http://internal.amazon.com/coral/com.amazon.panda/', 'Cache-Control': 'no-cache, no-store, must-revalidate', 'Pragma': 'no-cache', 'Vary': 'Content-Type,Accept-Encoding,X-Amzn-CDN-Cache,X-Amzn-AX-Treatment,User-Agent')>\r\nwith\r\n{\"app_name\": \"Alexa Media Player\", \"app_version\": \"2.2.223830.0\", \"di.sdk.version\": \"6.10.0\", \"source_token\": \"Atnr|-1UTG5xNF7PKdpzd3gXKdZd15Cp8_dCe7IEerEOueLcpVvf8sZY5gX5nEUmTpqKmf6--cILbxg3_Riopa8ywk4BE02dpxHMpuKnHeabBOuW4bmkKaQZQqozBEZZgnknVeWOTT0wLXPksqKXurDPoVh968RPvhNsLQftMw2cTzVpKYQyW7OLqfgUuzBnWUGOhW9NtifpmOG\", \"package_name\": \"com.amazon.echo\", \"di.hw.version\": \"iPhone\", \"platform\": \"iOS\", \"requested_token_type\": \"access_token\", \"source_token_type\": \"refresh_token\", \"di.os.name\": \"iOS\", \"di.os.version\": \"11.4.1\", \"current_version\": \"6.10.0\"}\r\n2021-01-21 15:00:14 DEBUG (MainThread) [alexapy.alexalogin] Failed to refresh access token\r\n2021-01-21 15:00:15 DEBUG (MainThread) [alexapy.alexaapi] c***********o@h*********m: GET: https://alexa.amazon.com/api/np/player?deviceSerialNumber=G6G0XG09006505TL&deviceType=A1RABVCI4QCIKC&screenWidth=2560&_=1611259214897 returned 200:OK:application/json\r\n2021-01-21 15:00:15 DEBUG (MainThread) [alexapy.alexaapi] c***********o@h*********m: GET: https://alexa.amazon.com/api/np/player?deviceSerialNumber=G090LF0971260MJE&deviceType=A3S5BH2HU6VAYF&screenWidth=2560&_=1611259214968 returned 200:OK:application/json\r\n2021-01-21 15:00:19 DEBUG (MainThread) [custom_components.alexa_media.notify] Message: <amazon:emotion name='excited' intensity='high'>Test Test Test 1 2 3</amazon:emotion>, kwargs: {'target': ['media_player.basement_dot'], 'data': {'type': 'announce', 'method': 'speak'}, 'message': \"<amazon:emotion name='excited' intensity='high'>Test Test Test 1 2 3</amazon:emotion>\"}\r\n2021-01-21 15:00:19 DEBUG (MainThread) [custom_components.alexa_media.notify] Target type: <class 'list'>\r\n2021-01-21 15:00:19 DEBUG (MainThread) [custom_components.alexa_media.notify] Processing: media_player.basement_dot\r\n2021-01-21 15:00:19 DEBUG (MainThread) [custom_components.alexa_media.notify] Processed Target by string: ['media_player.basement_dot']\r\n2021-01-21 15:00:19 DEBUG (MainThread) [custom_components.alexa_media.notify] c***********o@h*********m: Announce by <Entity Basement Dot: standby> to targets: ['g**************************************com']: <amazon:emotion name='excited' intensity='high'>Test Test Test 1 2 3</amazon:emotion>\r\n2021-01-21 15:00:21 DEBUG (MainThread) [alexapy.alexaapi] c***********o@h*********m: Creating sequence for 1 items\r\n2021-01-21 15:00:21 DEBUG (MainThread) [alexapy.alexaapi] c***********o@h*********m: Running behavior with data: {\"behaviorId\": \"PREVIEW\", \"sequenceJson\": \"{\\\"@type\\\": \\\"com.amazon.alexa.behaviors.model.Sequence\\\", \\\"startNode\\\": {\\\"@type\\\": \\\"com.amazon.alexa.behaviors.model.SerialNode\\\", \\\"nodesToExecute\\\": [{\\\"@type\\\": \\\"com.amazon.alexa.behaviors.model.OpaquePayloadOperationNode\\\", \\\"type\\\": \\\"AlexaAnnouncement\\\", \\\"operationPayload\\\": {\\\"deviceType\\\": \\\"A1RABVCI4QCIKC\\\", \\\"deviceSerialNumber\\\": \\\"G6G0XG100275009R\\\", \\\"locale\\\": \\\"en-us\\\", \\\"customerId\\\": \\\"A2GQJDB5O21AMC\\\", \\\"expireAfter\\\": \\\"PT5S\\\", \\\"content\\\": [{\\\"locale\\\": \\\"en-us\\\", \\\"display\\\": {\\\"title\\\": \\\"\\\", \\\"body\\\": \\\"\\\"}, \\\"speak\\\": {\\\"type\\\": \\\"text\\\", \\\"value\\\": \\\"<amazon:emotion name='excited' intensity='high'>Test Test Test 1 2 3</amazon:emotion>\\\"}}], \\\"target\\\": {\\\"customerId\\\": \\\"A2GQJDB5O21AMC\\\", \\\"devices\\\": []}, \\\"skillId\\\": \\\"amzn1.ask.1p.routines.messaging\\\"}}]}}\", \"status\": \"ENABLED\"}\r\n2021-01-21 15:00:21 DEBUG (MainThread) [alexapy.alexaapi] c***********o@h*********m: Detected access token expiration; refreshing\r\n2021-01-21 15:00:21 DEBUG (MainThread) [alexapy.alexalogin] refresh response <ClientResponse(https://api.amazon.com/auth/token) [400 Bad Request]>\r\n<CIMultiDictProxy('Server': 'Server', 'Date': 'Thu, 21 Jan 2021 20:00:21 GMT', 'Content-Type': 'application/json;charset=UTF-8', 'Content-Length': '98', 'Connection': 'close', 'x-amz-rid': '3734RB2JVQWT56QCXJTA', 'x-amzn-RequestId': '65b12da3-8588-41b5-ab92-01cf4122b71b', 'X-Amz-Date': 'Thu, 21 Jan 2021 20:00:21 GMT', 'x-amzn-ErrorType': 'InvalidValueException:http://internal.amazon.com/coral/com.amazon.panda/', 'Cache-Control': 'no-cache, no-store, must-revalidate', 'Pragma': 'no-cache', 'Vary': 'Content-Type,Accept-Encoding,X-Amzn-CDN-Cache,X-Amzn-AX-Treatment,User-Agent')>\r\nwith\r\n{\"app_name\": \"Alexa Media Player\", \"app_version\": \"2.2.223830.0\", \"di.sdk.version\": \"6.10.0\", \"source_token\": \"Atnr|-1UTG5xNF7PKdpzd3gXKdZd15Cp8_dCe7IEerEOueLcpVvf8sZY5gX5nEUmTpqKmf6--cILbxg3_Riopa8ywk4BE02dpxHMpuKnHeabBOuW4bmkKaQZQqozBEZZgnknVeWOTT0wLXPksqKXurDPoVh968RPvhNsLQftMw2cTzVpKYQyW7OLqfgUuzBnWUGOhW9NtifpmOG\", \"package_name\": \"com.amazon.echo\", \"di.hw.version\": \"iPhone\", \"platform\": \"iOS\", \"requested_token_type\": \"access_token\", \"source_token_type\": \"refresh_token\", \"di.os.name\": \"iOS\", \"di.os.version\": \"11.4.1\", \"current_version\": \"6.10.0\"}\r\n2021-01-21 15:00:21 DEBUG (MainThread) [alexapy.alexalogin] Failed to refresh access token\r\n2021-01-21 15:00:21 DEBUG (MainThread) [alexapy.alexaapi] c***********o@h*********m: POST: https://alexa.amazon.com/api/behaviors/preview returned 200:OK:application/octet-stream\r\n2021-01-21 15:00:28 DEBUG (MainThread) [custom_components.alexa_media.notify] Message: <amazon:emotion name='excited' intensity='high'>Test Test Test 1 2 3</amazon:emotion>, kwargs: {'target': ['media_player.basement_dot'], 'data': {'type': 'announce', 'method': 'speak'}, 'message': \"<amazon:emotion name='excited' intensity='high'>Test Test Test 1 2 3</amazon:emotion>\"}\r\n2021-01-21 15:00:28 DEBUG (MainThread) [custom_components.alexa_media.notify] Target type: <class 'list'>\r\n2021-01-21 15:00:28 DEBUG (MainThread) [custom_components.alexa_media.notify] Processing: media_player.basement_dot\r\n2021-01-21 15:00:28 DEBUG (MainThread) [custom_components.alexa_media.notify] Processed Target by string: ['media_player.basement_dot']\r\n2021-01-21 15:00:28 DEBUG (MainThread) [custom_components.alexa_media.notify] c***********o@h*********m: Announce by <Entity Basement Dot: standby> to targets: ['g**************************************com']: <amazon:emotion name='excited' intensity='high'>Test Test Test 1 2 3</amazon:emotion>\r\n2021-01-21 15:00:30 DEBUG (MainThread) [alexapy.alexaapi] c***********o@h*********m: Creating sequence for 1 items\r\n2021-01-21 15:00:30 DEBUG (MainThread) [alexapy.alexaapi] c***********o@h*********m: Running behavior with data: {\"behaviorId\": \"PREVIEW\", \"sequenceJson\": \"{\\\"@type\\\": \\\"com.amazon.alexa.behaviors.model.Sequence\\\", \\\"startNode\\\": {\\\"@type\\\": \\\"com.amazon.alexa.behaviors.model.SerialNode\\\", \\\"nodesToExecute\\\": [{\\\"@type\\\": \\\"com.amazon.alexa.behaviors.model.OpaquePayloadOperationNode\\\", \\\"type\\\": \\\"AlexaAnnouncement\\\", \\\"operationPayload\\\": {\\\"deviceType\\\": \\\"A1RABVCI4QCIKC\\\", \\\"deviceSerialNumber\\\": \\\"G6G0XG100275009R\\\", \\\"locale\\\": \\\"en-us\\\", \\\"customerId\\\": \\\"A2GQJDB5O21AMC\\\", \\\"expireAfter\\\": \\\"PT5S\\\", \\\"content\\\": [{\\\"locale\\\": \\\"en-us\\\", \\\"display\\\": {\\\"title\\\": \\\"\\\", \\\"body\\\": \\\"\\\"}, \\\"speak\\\": {\\\"type\\\": \\\"text\\\", \\\"value\\\": \\\"<amazon:emotion name='excited' intensity='high'>Test Test Test 1 2 3</amazon:emotion>\\\"}}], \\\"target\\\": {\\\"customerId\\\": \\\"A2GQJDB5O21AMC\\\", \\\"devices\\\": []}, \\\"skillId\\\": \\\"amzn1.ask.1p.routines.messaging\\\"}}]}}\", \"status\": \"ENABLED\"}\r\n2021-01-21 15:00:30 DEBUG (MainThread) [alexapy.alexaapi] c***********o@h*********m: Detected access token expiration; refreshing\r\n2021-01-21 15:00:30 DEBUG (MainThread) [alexapy.alexalogin] refresh response <ClientResponse(https://api.amazon.com/auth/token) [400 Bad Request]>\r\n<CIMultiDictProxy('Server': 'Server', 'Date': 'Thu, 21 Jan 2021 20:00:30 GMT', 'Content-Type': 'application/json;charset=UTF-8', 'Content-Length': '98', 'Connection': 'keep-alive', 'x-amz-rid': '1DXPGKDRYKK7FT8PBHY4', 'x-amzn-RequestId': 'fb13db53-8316-4a07-8f79-1dce4f33d9ad', 'X-Amz-Date': 'Thu, 21 Jan 2021 20:00:30 GMT', 'x-amzn-ErrorType': 'InvalidValueException:http://internal.amazon.com/coral/com.amazon.panda/', 'Cache-Control': 'no-cache, no-store, must-revalidate', 'Pragma': 'no-cache', 'Vary': 'Content-Type,Accept-Encoding,X-Amzn-CDN-Cache,X-Amzn-AX-Treatment,User-Agent')>\r\nwith\r\n{\"app_name\": \"Alexa Media Player\", \"app_version\": \"2.2.223830.0\", \"di.sdk.version\": \"6.10.0\", \"source_token\": \"Atnr|-1UTG5xNF7PKdpzd3gXKdZd15Cp8_dCe7IEerEOueLcpVvf8sZY5gX5nEUmTpqKmf6--cILbxg3_Riopa8ywk4BE02dpxHMpuKnHeabBOuW4bmkKaQZQqozBEZZgnknVeWOTT0wLXPksqKXurDPoVh968RPvhNsLQftMw2cTzVpKYQyW7OLqfgUuzBnWUGOhW9NtifpmOG\", \"package_name\": \"com.amazon.echo\", \"di.hw.version\": \"iPhone\", \"platform\": \"iOS\", \"requested_token_type\": \"access_token\", \"source_token_type\": \"refresh_token\", \"di.os.name\": \"iOS\", \"di.os.version\": \"11.4.1\", \"current_version\": \"6.10.0\"}\r\n2021-01-21 15:00:30 DEBUG (MainThread) [alexapy.alexalogin] Failed to refresh access token\r\n2021-01-21 15:00:30 DEBUG (MainThread) [alexapy.alexaapi] c***********o@h*********m: POST: https://alexa.amazon.com/api/behaviors/preview returned 200:OK:application/octet-stream\r\n2021-01-21 15:00:32 DEBUG (MainThread) [custom_components.alexa_media.notify] Message: <amazon:emotion name='excited' intensity='high'>Test Test Test 1 2 3</amazon:emotion>, kwargs: {'target': ['media_player.basement_dot'], 'data': {'type': 'announce', 'method': 'speak'}, 'message': \"<amazon:emotion name='excited' intensity='high'>Test Test Test 1 2 3</amazon:emotion>\"}\r\n2021-01-21 15:00:32 DEBUG (MainThread) [custom_components.alexa_media.notify] Target type: <class 'list'>\r\n2021-01-21 15:00:32 DEBUG (MainThread) [custom_components.alexa_media.notify] Processing: media_player.basement_dot\r\n2021-01-21 15:00:32 DEBUG (MainThread) [custom_components.alexa_media.notify] Processed Target by string: ['media_player.basement_dot']\r\n2021-01-21 15:00:32 DEBUG (MainThread) [custom_components.alexa_media.notify] c***********o@h*********m: Announce by <Entity Basement Dot: standby> to targets: ['g**************************************com']: <amazon:emotion name='excited' intensity='high'>Test Test Test 1 2 3</amazon:emotion>\r\n2021-01-21 15:00:34 DEBUG (MainThread) [alexapy.alexaapi] c***********o@h*********m: Creating sequence for 1 items\r\n2021-01-21 15:00:34 DEBUG (MainThread) [alexapy.alexaapi] c***********o@h*********m: Running behavior with data: {\"behaviorId\": \"PREVIEW\", \"sequenceJson\": \"{\\\"@type\\\": \\\"com.amazon.alexa.behaviors.model.Sequence\\\", \\\"startNode\\\": {\\\"@type\\\": \\\"com.amazon.alexa.behaviors.model.SerialNode\\\", \\\"nodesToExecute\\\": [{\\\"@type\\\": \\\"com.amazon.alexa.behaviors.model.OpaquePayloadOperationNode\\\", \\\"type\\\": \\\"AlexaAnnouncement\\\", \\\"operationPayload\\\": {\\\"deviceType\\\": \\\"A1RABVCI4QCIKC\\\", \\\"deviceSerialNumber\\\": \\\"G6G0XG100275009R\\\", \\\"locale\\\": \\\"en-us\\\", \\\"customerId\\\": \\\"A2GQJDB5O21AMC\\\", \\\"expireAfter\\\": \\\"PT5S\\\", \\\"content\\\": [{\\\"locale\\\": \\\"en-us\\\", \\\"display\\\": {\\\"title\\\": \\\"\\\", \\\"body\\\": \\\"\\\"}, \\\"speak\\\": {\\\"type\\\": \\\"text\\\", \\\"value\\\": \\\"<amazon:emotion name='excited' intensity='high'>Test Test Test 1 2 3</amazon:emotion>\\\"}}], \\\"target\\\": {\\\"customerId\\\": \\\"A2GQJDB5O21AMC\\\", \\\"devices\\\": []}, \\\"skillId\\\": \\\"amzn1.ask.1p.routines.messaging\\\"}}]}}\", \"status\": \"ENABLED\"}\r\n2021-01-21 15:00:34 DEBUG (MainThread) [alexapy.alexaapi] c***********o@h*********m: Detected access token expiration; refreshing\r\n2021-01-21 15:00:34 DEBUG (MainThread) [alexapy.alexalogin] refresh response <ClientResponse(https://api.amazon.com/auth/token) [400 Bad Request]>\r\n<CIMultiDictProxy('Server': 'Server', 'Date': 'Thu, 21 Jan 2021 20:00:34 GMT', 'Content-Type': 'application/json;charset=UTF-8', 'Content-Length': '98', 'Connection': 'keep-alive', 'x-amz-rid': 'CBA3479X8Z31DFT4AXH6', 'x-amzn-RequestId': 'ee48ec30-ea74-44a7-9c5c-58da0f1ff9eb', 'X-Amz-Date': 'Thu, 21 Jan 2021 20:00:34 GMT', 'x-amzn-ErrorType': 'InvalidValueException:http://internal.amazon.com/coral/com.amazon.panda/', 'Cache-Control': 'no-cache, no-store, must-revalidate', 'Pragma': 'no-cache', 'Vary': 'Content-Type,Accept-Encoding,X-Amzn-CDN-Cache,X-Amzn-AX-Treatment,User-Agent')>\r\nwith\r\n{\"app_name\": \"Alexa Media Player\", \"app_version\": \"2.2.223830.0\", \"di.sdk.version\": \"6.10.0\", \"source_token\": \"Atnr|-1UTG5xNF7PKdpzd3gXKdZd15Cp8_dCe7IEerEOueLcpVvf8sZY5gX5nEUmTpqKmf6--cILbxg3_Riopa8ywk4BE02dpxHMpuKnHeabBOuW4bmkKaQZQqozBEZZgnknVeWOTT0wLXPksqKXurDPoVh968RPvhNsLQftMw2cTzVpKYQyW7OLqfgUuzBnWUGOhW9NtifpmOG\", \"package_name\": \"com.amazon.echo\", \"di.hw.version\": \"iPhone\", \"platform\": \"iOS\", \"requested_token_type\": \"access_token\", \"source_token_type\": \"refresh_token\", \"di.os.name\": \"iOS\", \"di.os.version\": \"11.4.1\", \"current_version\": \"6.10.0\"}\r\n2021-01-21 15:00:34 DEBUG (MainThread) [alexapy.alexalogin] Failed to refresh access token\r\n2021-01-21 15:00:34 DEBUG (MainThread) [alexapy.alexaapi] c***********o@h*********m: POST: https://alexa.amazon.com/api/behaviors/preview returned 200:OK:application/octet-stream\r\n2021-01-21 15:00:34 DEBUG (MainThread) [alexapy.alexawebsocket] Received WebSocket: MSG 0x00000362 0x12e2f660 f 0x00000001 0x17065b5a 0x0000022c GWM MSG 0x0000b479 0x0000005c urn:tcomm-endpoint:service:serviceName:DeeWebsiteMessagingService:domain:prod:realm:USAmazon 0x0000006e urn:tcomm-endpoint:device:customerId:A2GQJDB5O21AMC:deviceType:ALEGCNGL9K0HM:deviceSerialNumber:-1611258827000 {\"timeStamp\":1611259234444,\"payload\":\"{\\\"destinationUserId\\\":\\\"A2GQJDB5O21AMC\\\",\\\"dopplerId\\\":{\\\"deviceType\\\":\\\"A3S5BH2HU6VAYF\\\",\\\"deviceSerialNumber\\\":\\\"G090LF0971260MJE\\\"},\\\"volumeSetting\\\":70,\\\"isMuted\\\":false}\",\"command\":\"PUSH_VOLUME_CHANGE\"}FABE\r\n2021-01-21 15:00:34 DEBUG (MainThread) [alexapy.alexawebsocket] Received Standard MSG.\r\n2021-01-21 15:00:34 DEBUG (MainThread) [custom_components.alexa_media] c***********o@h*********m: Received websocket command: PUSH_VOLUME_CHANGE : {'destinationUserId': 'A**********AMC', 'dopplerId': {'deviceType': 'A3S5BH2HU6VAYF', 'deviceSerialNumber': 'G************MJE'}, 'volumeSetting': 70, 'isMuted': False}\r\n2021-01-21 15:00:34 DEBUG (MainThread) [custom_components.alexa_media] Updating media_player volume: {'destinationUserId': 'A**********AMC', 'dopplerId': {'deviceType': 'A3S5BH2HU6VAYF', 'deviceSerialNumber': 'G************MJE'}, 'volumeSetting': 70, 'isMuted': False}\r\n2021-01-21 15:00:34 DEBUG (MainThread) [custom_components.alexa_media.media_player] c***********o@h*********m: Master Bedroom Dot volume updated: 70\r\n2021-01-21 15:00:34 DEBUG (MainThread) [alexapy.alexawebsocket] Received WebSocket: MSG 0x00000362 0x13067b28 f 0x00000001 0x3c01216d 0x00000235 GWM MSG 0x0000b479 0x0000005c urn:tcomm-endpoint:service:serviceName:DeeWebsiteMessagingService:domain:prod:realm:USAmazon 0x0000006e urn:tcomm-endpoint:device:customerId:A2GQJDB5O21AMC:deviceType:ALEGCNGL9K0HM:deviceSerialNumber:-1611258827000 {\"timeStamp\":1611259234441,\"payload\":\"{\\\"destinationUserId\\\":\\\"A2GQJDB5O21AMC\\\",\\\"dopplerId\\\":{\\\"deviceType\\\":\\\"A3S5BH2HU6VAYF\\\",\\\"deviceSerialNumber\\\":\\\"G090LF0971260MJE\\\"},\\\"bass\\\":0,\\\"midrange\\\":0,\\\"treble\\\":0}\",\"command\":\"PUSH_EQUALIZER_STATE_CHANGE\"}FABE\r\n2021-01-21 15:00:34 DEBUG (MainThread) [alexapy.alexawebsocket] Received Standard MSG.\r\n2021-01-21 15:00:34 DEBUG (MainThread) [custom_components.alexa_media] c***********o@h*********m: Received websocket command: PUSH_EQUALIZER_STATE_CHANGE : {'destinationUserId': 'A**********AMC', 'dopplerId': {'deviceType': 'A3S5BH2HU6VAYF', 'deviceSerialNumber': 'G************MJE'}, 'bass': 0, 'midrange': 0, 'treble': 0}\r\n2021-01-21 15:00:34 DEBUG (MainThread) [custom_components.alexa_media] Updating media_player availability {'destinationUserId': 'A**********AMC', 'dopplerId': {'deviceType': 'A3S5BH2HU6VAYF', 'deviceSerialNumber': 'G************MJE'}, 'bass': 0, 'midrange': 0, 'treble': 0}\r\n2021-01-21 15:00:34 DEBUG (MainThread) [alexapy.alexawebsocket] Received WebSocket: MSG 0x00000362 0x12e8a61c f 0x00000001 0xfc1f8190 0x000002c6 GWM MSG 0x0000b479 0x0000005c urn:tcomm-endpoint:service:serviceName:DeeWebsiteMessagingService:domain:prod:realm:USAmazon 0x0000006e urn:tcomm-endpoint:device:customerId:A2GQJDB5O21AMC:deviceType:ALEGCNGL9K0HM:deviceSerialNumber:-1611258827000 {\"timeStamp\":1611259234551,\"payload\":\"{\\\"destinationUserId\\\":\\\"A2GQJDB5O21AMC\\\",\\\"dopplerId\\\":{\\\"deviceType\\\":\\\"A3S5BH2HU6VAYF\\\",\\\"deviceSerialNumber\\\":\\\"G090LF0971260MJE\\\"},\\\"audioPlayerState\\\":\\\"PLAYING\\\",\\\"quality\\\":null,\\\"error\\\":false,\\\"errorMessage\\\":null,\\\"mediaReferenceId\\\":\\\"playq:audiobook/audible;mv=Audible,7b6e1cf6-135c-4ae5-b15a-80f3e8f53a23#15\\\"}\",\"command\":\"PUSH_AUDIO_PLAYER_STATE\"}FABE\r\n2021-01-21 15:00:34 DEBUG (MainThread) [alexapy.alexawebsocket] Received Standard MSG.\r\n2021-01-21 15:00:34 DEBUG (MainThread) [custom_components.alexa_media] c***********o@h*********m: Received websocket command: PUSH_AUDIO_PLAYER_STATE : {'destinationUserId': 'A**********AMC', 'dopplerId': {'deviceType': 'A3S5BH2HU6VAYF', 'deviceSerialNumber': 'G************MJE'}, 'audioPlayerState': 'PLAYING', 'quality': None, 'error': False, 'errorMessage': None, 'mediaReferenceId': 'playq:audiobook/audible;mv=Audible,7b6e1cf6-135c-4ae5-b15a-80f3e8f53a23#15'}\r\n2021-01-21 15:00:34 DEBUG (MainThread) [custom_components.alexa_media] Updating media_player: {'destinationUserId': 'A**********AMC', 'dopplerId': {'deviceType': 'A3S5BH2HU6VAYF', 'deviceSerialNumber': 'G************MJE'}, 'audioPlayerState': 'PLAYING', 'quality': None, 'error': False, 'errorMessage': None, 'mediaReferenceId': 'playq:audiobook/audible;mv=Audible,7b6e1cf6-135c-4ae5-b15a-80f3e8f53a23#15'}\r\n2021-01-21 15:00:34 DEBUG (MainThread) [custom_components.alexa_media.media_player] c***********o@h*********m: Master Bedroom Dot state update: PLAYING\r\n2021-01-21 15:00:36 DEBUG (MainThread) [custom_components.alexa_media.media_player] c***********o@h*********m: Refreshing <Entity Master Bedroom Dot: playing>\r\n2021-01-21 15:00:36 DEBUG (MainThread) [custom_components.alexa_media.media_player] c***********o@h*********m: Master Bedroom Dot: Last_called check: self: G************MJE reported: G************MJE\r\n2021-01-21 15:00:36 DEBUG (MainThread) [alexapy.alexaapi] c***********o@h*********m: Detected access token expiration; refreshing\r\n2021-01-21 15:00:36 DEBUG (MainThread) [alexapy.alexalogin] refresh response <ClientResponse(https://api.amazon.com/auth/token) [400 Bad Request]>\r\n<CIMultiDictProxy('Server': 'Server', 'Date': 'Thu, 21 Jan 2021 20:00:36 GMT', 'Content-Type': 'application/json;charset=UTF-8', 'Content-Length': '98', 'Connection': 'keep-alive', 'x-amz-rid': 'TXN93MZXHR00QYGFVKGX', 'x-amzn-RequestId': 'b72ed403-2ab8-4bbf-9871-307bcc7211f2', 'X-Amz-Date': 'Thu, 21 Jan 2021 20:00:36 GMT', 'x-amzn-ErrorType': 'InvalidValueException:http://internal.amazon.com/coral/com.amazon.panda/', 'Cache-Control': 'no-cache, no-store, must-revalidate', 'Pragma': 'no-cache', 'Vary': 'Content-Type,Accept-Encoding,X-Amzn-CDN-Cache,X-Amzn-AX-Treatment,User-Agent')>\r\nwith\r\n{\"app_name\": \"Alexa Media Player\", \"app_version\": \"2.2.223830.0\", \"di.sdk.version\": \"6.10.0\", \"source_token\": \"Atnr|-1UTG5xNF7PKdpzd3gXKdZd15Cp8_dCe7IEerEOueLcpVvf8sZY5gX5nEUmTpqKmf6--cILbxg3_Riopa8ywk4BE02dpxHMpuKnHeabBOuW4bmkKaQZQqozBEZZgnknVeWOTT0wLXPksqKXurDPoVh968RPvhNsLQftMw2cTzVpKYQyW7OLqfgUuzBnWUGOhW9NtifpmOG\", \"package_name\": \"com.amazon.echo\", \"di.hw.version\": \"iPhone\", \"platform\": \"iOS\", \"requested_token_type\": \"access_token\", \"source_token_type\": \"refresh_token\", \"di.os.name\": \"iOS\", \"di.os.version\": \"11.4.1\", \"current_version\": \"6.10.0\"}\r\n2021-01-21 15:00:36 DEBUG (MainThread) [alexapy.alexalogin] Failed to refresh access token\r\n2021-01-21 15:00:36 DEBUG (MainThread) [alexapy.alexaapi] c***********o@h*********m: GET: https://alexa.amazon.com/api/np/player?deviceSerialNumber=G090LF0971260MJE&deviceType=A3S5BH2HU6VAYF&screenWidth=2560&_=1611259236729 returned 200:OK:application/json\r\n2021-01-21 15:00:37 DEBUG (MainThread) [custom_components.alexa_media.notify] Message: <amazon:emotion name='excited' intensity='high'>Test Test Test 1 2 3</amazon:emotion>, kwargs: {'target': ['media_player.basement_dot'], 'data': {'type': 'announce', 'method': 'speak'}, 'message': \"<amazon:emotion name='excited' intensity='high'>Test Test Test 1 2 3</amazon:emotion>\"}\r\n2021-01-21 15:00:37 DEBUG (MainThread) [custom_components.alexa_media.notify] Target type: <class 'list'>\r\n2021-01-21 15:00:37 DEBUG (MainThread) [custom_components.alexa_media.notify] Processing: media_player.basement_dot\r\n2021-01-21 15:00:37 DEBUG (MainThread) [custom_components.alexa_media.notify] Processed Target by string: ['media_player.basement_dot']\r\n2021-01-21 15:00:37 DEBUG (MainThread) [custom_components.alexa_media.notify] c***********o@h*********m: Announce by <Entity Basement Dot: standby> to targets: ['g**************************************com']: <amazon:emotion name='excited' intensity='high'>Test Test Test 1 2 3</amazon:emotion>\r\n2021-01-21 15:00:38 DEBUG (MainThread) [alexapy.alexaapi] c***********o@h*********m: Creating sequence for 1 items\r\n2021-01-21 15:00:38 DEBUG (MainThread) [alexapy.alexaapi] c***********o@h*********m: Running behavior with data: {\"behaviorId\": \"PREVIEW\", \"sequenceJson\": \"{\\\"@type\\\": \\\"com.amazon.alexa.behaviors.model.Sequence\\\", \\\"startNode\\\": {\\\"@type\\\": \\\"com.amazon.alexa.behaviors.model.SerialNode\\\", \\\"nodesToExecute\\\": [{\\\"@type\\\": \\\"com.amazon.alexa.behaviors.model.OpaquePayloadOperationNode\\\", \\\"type\\\": \\\"AlexaAnnouncement\\\", \\\"operationPayload\\\": {\\\"deviceType\\\": \\\"A1RABVCI4QCIKC\\\", \\\"deviceSerialNumber\\\": \\\"G6G0XG100275009R\\\", \\\"locale\\\": \\\"en-us\\\", \\\"customerId\\\": \\\"A2GQJDB5O21AMC\\\", \\\"expireAfter\\\": \\\"PT5S\\\", \\\"content\\\": [{\\\"locale\\\": \\\"en-us\\\", \\\"display\\\": {\\\"title\\\": \\\"\\\", \\\"body\\\": \\\"\\\"}, \\\"speak\\\": {\\\"type\\\": \\\"text\\\", \\\"value\\\": \\\"<amazon:emotion name='excited' intensity='high'>Test Test Test 1 2 3</amazon:emotion>\\\"}}], \\\"target\\\": {\\\"customerId\\\": \\\"A2GQJDB5O21AMC\\\", \\\"devices\\\": []}, \\\"skillId\\\": \\\"amzn1.ask.1p.routines.messaging\\\"}}]}}\", \"status\": \"ENABLED\"}\r\n2021-01-21 15:00:38 DEBUG (MainThread) [alexapy.alexaapi] c***********o@h*********m: Detected access token expiration; refreshing\r\n2021-01-21 15:00:38 DEBUG (MainThread) [alexapy.alexalogin] refresh response <ClientResponse(https://api.amazon.com/auth/token) [400 Bad Request]>\r\n<CIMultiDictProxy('Server': 'Server', 'Date': 'Thu, 21 Jan 2021 20:00:38 GMT', 'Content-Type': 'application/json;charset=UTF-8', 'Content-Length': '98', 'Connection': 'keep-alive', 'x-amz-rid': '7VM18TXPJ02Q1M9BP5SK', 'x-amzn-RequestId': '9bc5d14d-692f-4310-83f3-dfd5eaab515e', 'X-Amz-Date': 'Thu, 21 Jan 2021 20:00:38 GMT', 'x-amzn-ErrorType': 'InvalidValueException:http://internal.amazon.com/coral/com.amazon.panda/', 'Cache-Control': 'no-cache, no-store, must-revalidate', 'Pragma': 'no-cache', 'Vary': 'Content-Type,Accept-Encoding,X-Amzn-CDN-Cache,X-Amzn-AX-Treatment,User-Agent')>\r\nwith\r\n{\"app_name\": \"Alexa Media Player\", \"app_version\": \"2.2.223830.0\", \"di.sdk.version\": \"6.10.0\", \"source_token\": \"Atnr|-1UTG5xNF7PKdpzd3gXKdZd15Cp8_dCe7IEerEOueLcpVvf8sZY5gX5nEUmTpqKmf6--cILbxg3_Riopa8ywk4BE02dpxHMpuKnHeabBOuW4bmkKaQZQqozBEZZgnknVeWOTT0wLXPksqKXurDPoVh968RPvhNsLQftMw2cTzVpKYQyW7OLqfgUuzBnWUGOhW9NtifpmOG\", \"package_name\": \"com.amazon.echo\", \"di.hw.version\": \"iPhone\", \"platform\": \"iOS\", \"requested_token_type\": \"access_token\", \"source_token_type\": \"refresh_token\", \"di.os.name\": \"iOS\", \"di.os.version\": \"11.4.1\", \"current_version\": \"6.10.0\"}\r\n2021-01-21 15:00:38 DEBUG (MainThread) [alexapy.alexalogin] Failed to refresh access token\r\n2021-01-21 15:00:39 DEBUG (MainThread) [alexapy.alexaapi] c***********o@h*********m: POST: https://alexa.amazon.com/api/behaviors/preview returned 200:OK:application/octet-stream\r\n2021-01-21 15:00:41 DEBUG (MainThread) [custom_components.alexa_media.notify] Message: <amazon:emotion name='excited' intensity='high'>Test Test Test 1 2 3</amazon:emotion>, kwargs: {'target': ['media_player.basement_dot'], 'data': {'type': 'announce', 'method': 'speak'}, 'message': \"<amazon:emotion name='excited' intensity='high'>Test Test Test 1 2 3</amazon:emotion>\"}\r\n2021-01-21 15:00:41 DEBUG (MainThread) [custom_components.alexa_media.notify] Target type: <class 'list'>\r\n2021-01-21 15:00:41 DEBUG (MainThread) [custom_components.alexa_media.notify] Processing: media_player.basement_dot\r\n2021-01-21 15:00:41 DEBUG (MainThread) [custom_components.alexa_media.notify] Processed Target by string: ['media_player.basement_dot']\r\n2021-01-21 15:00:41 DEBUG (MainThread) [custom_components.alexa_media.notify] c***********o@h*********m: Announce by <Entity Basement Dot: standby> to targets: ['g**************************************com']: <amazon:emotion name='excited' intensity='high'>Test Test Test 1 2 3</amazon:emotion>\r\n2021-01-21 15:00:42 DEBUG (MainThread) [alexapy.alexaapi] c***********o@h*********m: Creating sequence for 1 items\r\n2021-01-21 15:00:42 DEBUG (MainThread) [alexapy.alexaapi] c***********o@h*********m: Running behavior with data: {\"behaviorId\": \"PREVIEW\", \"sequenceJson\": \"{\\\"@type\\\": \\\"com.amazon.alexa.behaviors.model.Sequence\\\", \\\"startNode\\\": {\\\"@type\\\": \\\"com.amazon.alexa.behaviors.model.SerialNode\\\", \\\"nodesToExecute\\\": [{\\\"@type\\\": \\\"com.amazon.alexa.behaviors.model.OpaquePayloadOperationNode\\\", \\\"type\\\": \\\"AlexaAnnouncement\\\", \\\"operationPayload\\\": {\\\"deviceType\\\": \\\"A1RABVCI4QCIKC\\\", \\\"deviceSerialNumber\\\": \\\"G6G0XG100275009R\\\", \\\"locale\\\": \\\"en-us\\\", \\\"customerId\\\": \\\"A2GQJDB5O21AMC\\\", \\\"expireAfter\\\": \\\"PT5S\\\", \\\"content\\\": [{\\\"locale\\\": \\\"en-us\\\", \\\"display\\\": {\\\"title\\\": \\\"\\\", \\\"body\\\": \\\"\\\"}, \\\"speak\\\": {\\\"type\\\": \\\"text\\\", \\\"value\\\": \\\"<amazon:emotion name='excited' intensity='high'>Test Test Test 1 2 3</amazon:emotion>\\\"}}], \\\"target\\\": {\\\"customerId\\\": \\\"A2GQJDB5O21AMC\\\", \\\"devices\\\": []}, \\\"skillId\\\": \\\"amzn1.ask.1p.routines.messaging\\\"}}]}}\", \"status\": \"ENABLED\"}\r\n2021-01-21 15:00:42 DEBUG (MainThread) [alexapy.alexaapi] c***********o@h*********m: Detected access token expiration; refreshing\r\n2021-01-21 15:00:42 DEBUG (MainThread) [alexapy.alexalogin] refresh response <ClientResponse(https://api.amazon.com/auth/token) [400 Bad Request]>\r\n<CIMultiDictProxy('Server': 'Server', 'Date': 'Thu, 21 Jan 2021 20:00:42 GMT', 'Content-Type': 'application/json;charset=UTF-8', 'Content-Length': '98', 'Connection': 'keep-alive', 'x-amz-rid': '1SB57X0Y8JEPVDPJKACS', 'x-amzn-RequestId': '74f7f003-ec38-4cd1-9bdc-f127dca53a5a', 'X-Amz-Date': 'Thu, 21 Jan 2021 20:00:42 GMT', 'x-amzn-ErrorType': 'InvalidValueException:http://internal.amazon.com/coral/com.amazon.panda/', 'Cache-Control': 'no-cache, no-store, must-revalidate', 'Pragma': 'no-cache', 'Vary': 'Content-Type,Accept-Encoding,X-Amzn-CDN-Cache,X-Amzn-AX-Treatment,User-Agent')>\r\nwith\r\n{\"app_name\": \"Alexa Media Player\", \"app_version\": \"2.2.223830.0\", \"di.sdk.version\": \"6.10.0\", \"source_token\": \"Atnr|-1UTG5xNF7PKdpzd3gXKdZd15Cp8_dCe7IEerEOueLcpVvf8sZY5gX5nEUmTpqKmf6--cILbxg3_Riopa8ywk4BE02dpxHMpuKnHeabBOuW4bmkKaQZQqozBEZZgnknVeWOTT0wLXPksqKXurDPoVh968RPvhNsLQftMw2cTzVpKYQyW7OLqfgUuzBnWUGOhW9NtifpmOG\", \"package_name\": \"com.amazon.echo\", \"di.hw.version\": \"iPhone\", \"platform\": \"iOS\", \"requested_token_type\": \"access_token\", \"source_token_type\": \"refresh_token\", \"di.os.name\": \"iOS\", \"di.os.version\": \"11.4.1\", \"current_version\": \"6.10.0\"}\r\n2021-01-21 15:00:42 DEBUG (MainThread) [alexapy.alexalogin] Failed to refresh access token\r\n2021-01-21 15:00:42 DEBUG (MainThread) [alexapy.alexaapi] c***********o@h*********m: POST: https://alexa.amazon.com/api/behaviors/preview returned 200:OK:application/octet-stream\r\n2021-01-21 15:00:45 DEBUG (MainThread) [custom_components.alexa_media.notify] Message: <amazon:emotion name='excited' intensity='high'>Test Test Test 1 2 3</amazon:emotion>, kwargs: {'target': ['media_player.basement_dot'], 'data': {'type': 'announce', 'method': 'speak'}, 'message': \"<amazon:emotion name='excited' intensity='high'>Test Test Test 1 2 3</amazon:emotion>\"}\r\n2021-01-21 15:00:45 DEBUG (MainThread) [custom_components.alexa_media.notify] Target type: <class 'list'>\r\n2021-01-21 15:00:45 DEBUG (MainThread) [custom_components.alexa_media.notify] Processing: media_player.basement_dot\r\n2021-01-21 15:00:45 DEBUG (MainThread) [custom_components.alexa_media.notify] Processed Target by string: ['media_player.basement_dot']\r\n2021-01-21 15:00:45 DEBUG (MainThread) [custom_components.alexa_media.notify] c***********o@h*********m: Announce by <Entity Basement Dot: standby> to targets: ['g**************************************com']: <amazon:emotion name='excited' intensity='high'>Test Test Test 1 2 3</amazon:emotion>\r\n2021-01-21 15:00:46 DEBUG (MainThread) [alexapy.alexaapi] c***********o@h*********m: Creating sequence for 1 items\r\n2021-01-21 15:00:46 DEBUG (MainThread) [alexapy.alexaapi] c***********o@h*********m: Running behavior with data: {\"behaviorId\": \"PREVIEW\", \"sequenceJson\": \"{\\\"@type\\\": \\\"com.amazon.alexa.behaviors.model.Sequence\\\", \\\"startNode\\\": {\\\"@type\\\": \\\"com.amazon.alexa.behaviors.model.SerialNode\\\", \\\"nodesToExecute\\\": [{\\\"@type\\\": \\\"com.amazon.alexa.behaviors.model.OpaquePayloadOperationNode\\\", \\\"type\\\": \\\"AlexaAnnouncement\\\", \\\"operationPayload\\\": {\\\"deviceType\\\": \\\"A1RABVCI4QCIKC\\\", \\\"deviceSerialNumber\\\": \\\"G6G0XG100275009R\\\", \\\"locale\\\": \\\"en-us\\\", \\\"customerId\\\": \\\"A2GQJDB5O21AMC\\\", \\\"expireAfter\\\": \\\"PT5S\\\", \\\"content\\\": [{\\\"locale\\\": \\\"en-us\\\", \\\"display\\\": {\\\"title\\\": \\\"\\\", \\\"body\\\": \\\"\\\"}, \\\"speak\\\": {\\\"type\\\": \\\"text\\\", \\\"value\\\": \\\"<amazon:emotion name='excited' intensity='high'>Test Test Test 1 2 3</amazon:emotion>\\\"}}], \\\"target\\\": {\\\"customerId\\\": \\\"A2GQJDB5O21AMC\\\", \\\"devices\\\": []}, \\\"skillId\\\": \\\"amzn1.ask.1p.routines.messaging\\\"}}]}}\", \"status\": \"ENABLED\"}\r\n2021-01-21 15:00:46 DEBUG (MainThread) [alexapy.alexaapi] c***********o@h*********m: Detected access token expiration; refreshing\r\n2021-01-21 15:00:46 DEBUG (MainThread) [alexapy.alexalogin] refresh response <ClientResponse(https://api.amazon.com/auth/token) [400 Bad Request]>\r\n<CIMultiDictProxy('Server': 'Server', 'Date': 'Thu, 21 Jan 2021 20:00:46 GMT', 'Content-Type': 'application/json;charset=UTF-8', 'Content-Length': '98', 'Connection': 'keep-alive', 'x-amz-rid': '2H2YV58Y1GC9CBWJN5TZ', 'x-amzn-RequestId': '976d7ffd-8a5c-4d8e-b74f-3c752034a2bc', 'X-Amz-Date': 'Thu, 21 Jan 2021 20:00:46 GMT', 'x-amzn-ErrorType': 'InvalidValueException:http://internal.amazon.com/coral/com.amazon.panda/', 'Cache-Control': 'no-cache, no-store, must-revalidate', 'Pragma': 'no-cache', 'Vary': 'Content-Type,Accept-Encoding,X-Amzn-CDN-Cache,X-Amzn-AX-Treatment,User-Agent')>\r\nwith\r\n{\"app_name\": \"Alexa Media Player\", \"app_version\": \"2.2.223830.0\", \"di.sdk.version\": \"6.10.0\", \"source_token\": \"Atnr|-1UTG5xNF7PKdpzd3gXKdZd15Cp8_dCe7IEerEOueLcpVvf8sZY5gX5nEUmTpqKmf6--cILbxg3_Riopa8ywk4BE02dpxHMpuKnHeabBOuW4bmkKaQZQqozBEZZgnknVeWOTT0wLXPksqKXurDPoVh968RPvhNsLQftMw2cTzVpKYQyW7OLqfgUuzBnWUGOhW9NtifpmOG\", \"package_name\": \"com.amazon.echo\", \"di.hw.version\": \"iPhone\", \"platform\": \"iOS\", \"requested_token_type\": \"access_token\", \"source_token_type\": \"refresh_token\", \"di.os.name\": \"iOS\", \"di.os.version\": \"11.4.1\", \"current_version\": \"6.10.0\"}\r\n2021-01-21 15:00:46 DEBUG (MainThread) [alexapy.alexalogin] Failed to refresh access token\r\n2021-01-21 15:00:46 DEBUG (MainThread) [alexapy.alexaapi] c***********o@h*********m: POST: https://alexa.amazon.com/api/behaviors/preview returned 200:OK:application/octet-stream\r\n```\r\n\r\n**Additional context**\r\nAlready attempted:\r\n\r\n- Tried both with and without data:method: speak\r\n- Restart from Server Controls menu (3x)\r\n- Full system reboot (3x)\r\n- Deleted pickle file\r\n- Deleted and Reinstalled Integration\r\n- Disabled and Reenabled \"Communications\" in the Alexa App", "reactions": {"url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/1116/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/1116/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/1092", "repository_url": "https://api.github.com/repos/custom-components/alexa_media_player", "labels_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/1092/labels{/name}", "comments_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/1092/comments", "events_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/1092/events", "html_url": "https://github.com/custom-components/alexa_media_player/issues/1092", "id": 781846997, "node_id": "MDU6SXNzdWU3ODE4NDY5OTc=", "number": 1092, "title": "Unable to login to amazon.com.au", "user": {"login": "oneseventhree", "id": 15043282, "node_id": "MDQ6VXNlcjE1MDQzMjgy", "avatar_url": "https://avatars.githubusercontent.com/u/15043282?v=4", "gravatar_id": "", "url": "https://api.github.com/users/oneseventhree", "html_url": "https://github.com/oneseventhree", "followers_url": "https://api.github.com/users/oneseventhree/followers", "following_url": "https://api.github.com/users/oneseventhree/following{/other_user}", "gists_url": "https://api.github.com/users/oneseventhree/gists{/gist_id}", "starred_url": "https://api.github.com/users/oneseventhree/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/oneseventhree/subscriptions", "organizations_url": "https://api.github.com/users/oneseventhree/orgs", "repos_url": "https://api.github.com/users/oneseventhree/repos", "events_url": "https://api.github.com/users/oneseventhree/events{/privacy}", "received_events_url": "https://api.github.com/users/oneseventhree/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 983327104, "node_id": "MDU6TGFiZWw5ODMzMjcxMDQ=", "url": "https://api.github.com/repos/custom-components/alexa_media_player/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}, {"id": 1246346849, "node_id": "MDU6TGFiZWwxMjQ2MzQ2ODQ5", "url": "https://api.github.com/repos/custom-components/alexa_media_player/labels/alexapy", "name": "alexapy", "color": "e23ba8", "default": false, "description": "Issue relates to the API"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2021-01-08T05:05:23Z", "updated_at": "2021-01-11T21:40:46Z", "closed_at": "2021-01-08T08:56:25Z", "author_association": "NONE", "active_lock_reason": null, "body": "**Describe the bug**\r\nA clear and concise description of what the bug is.\r\n\r\n**To Reproduce**\r\nSteps to reproduce the behavior:\r\n1. Upgraded through HACS: \r\n![1](https://user-images.githubusercontent.com/15043282/103974822-b6f7ce00-51c6-11eb-94d0-3fbb18aae418.png)\r\n\r\n2.  When HA restarted it asked me to sign in again: \r\n![2](https://user-images.githubusercontent.com/15043282/103975080-659c0e80-51c7-11eb-9be7-2d0f02809623.png)\r\n\r\n3. Went to Integrations and signed in: \r\n![3](https://user-images.githubusercontent.com/15043282/103975465-523d7300-51c8-11eb-853a-5a029e3f4175.png)\r\n\r\n4. Then it took me to the other sign in page: \r\n![4](https://user-images.githubusercontent.com/15043282/103975513-6c775100-51c8-11eb-9a77-f788713922ee.png)\r\n\r\n5. Then I got this error: \r\n![5](https://user-images.githubusercontent.com/15043282/103975518-6ed9ab00-51c8-11eb-9239-93e872cea504.png)\r\n\r\n6. It still shows in integrations but my devices are all \"unavailable\": \r\n![6](https://user-images.githubusercontent.com/15043282/103975541-8022b780-51c8-11eb-8ce8-012304515015.png)\r\n\r\n7. I tried downgrading back to 3.4.1 with no luck\r\n8. I also tried deleting the component completely and starting fresh but it looks like it works and even shows the devices there so I know it connects to my account but the devices are still unavailable.\r\n\r\n**Expected behavior**\r\nNormal function\r\n\r\n**Screenshots**\r\nIf applicable, add screenshots to help explain your problem.\r\n\r\n**System details**\r\n - Home-assistant (version):  2020.12.7\r\n - Hassio (Yes/No): Yes\r\n - alexa_media  (version from `const.py` or HA startup):\r\n - alexapy (version from `pip show alexapy` or HA startup): \r\n - Amazon [2FA is enabled](https://github.com/custom-components/alexa_media_player/wiki/Configuration#enable-two-factor-authentication-for-your-amazon-account) (y/n). We will not debug login issues if unanswered: Yes\r\n\r\n**Logs**\r\nPlease provide [logs](https://github.com/custom-components/alexa_media_player/wiki/FAQ#how-do-i-enable-debug-logging-for-the-component). We'll be most likely asking for them anyway.\r\n\r\nNothing in the logs.\r\n\r\n**Additional context**\r\nHad to use old snapshot file to revert back to 3.4.1 and everything works fine.\r\n", "reactions": {"url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/1092/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/1092/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/1075", "repository_url": "https://api.github.com/repos/custom-components/alexa_media_player", "labels_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/1075/labels{/name}", "comments_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/1075/comments", "events_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/1075/events", "html_url": "https://github.com/custom-components/alexa_media_player/issues/1075", "id": 777282435, "node_id": "MDU6SXNzdWU3NzcyODI0MzU=", "number": 1075, "title": "Unable to pass captcha: 3.4.4", "user": {"login": "mcc05", "id": 38889743, "node_id": "MDQ6VXNlcjM4ODg5NzQz", "avatar_url": "https://avatars.githubusercontent.com/u/38889743?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mcc05", "html_url": "https://github.com/mcc05", "followers_url": "https://api.github.com/users/mcc05/followers", "following_url": "https://api.github.com/users/mcc05/following{/other_user}", "gists_url": "https://api.github.com/users/mcc05/gists{/gist_id}", "starred_url": "https://api.github.com/users/mcc05/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mcc05/subscriptions", "organizations_url": "https://api.github.com/users/mcc05/orgs", "repos_url": "https://api.github.com/users/mcc05/repos", "events_url": "https://api.github.com/users/mcc05/events{/privacy}", "received_events_url": "https://api.github.com/users/mcc05/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 983327104, "node_id": "MDU6TGFiZWw5ODMzMjcxMDQ=", "url": "https://api.github.com/repos/custom-components/alexa_media_player/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}, {"id": 1246346849, "node_id": "MDU6TGFiZWwxMjQ2MzQ2ODQ5", "url": "https://api.github.com/repos/custom-components/alexa_media_player/labels/alexapy", "name": "alexapy", "color": "e23ba8", "default": false, "description": "Issue relates to the API"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 49, "created_at": "2021-01-01T13:08:53Z", "updated_at": "2021-01-03T01:16:24Z", "closed_at": "2021-01-02T09:37:35Z", "author_association": "NONE", "active_lock_reason": null, "body": "**Describe the bug**\r\non 3.4.4 i am no longer able to authenticate to amazon.\r\ndeleted the integration and started from scratch. entered email, password and submit capcha challenge comes back (normally I would get a 2fa txt request) enter different capcha challenges multiple times and eventually fails and states, forgotten password detected.\r\ndomain is amazon.co.uk\r\n\r\n**System details**\r\n - Home-assistant (version): 2020-12-1\r\n - Hassio (Yes/No): (Please note you may have to restart hassio 2-3 times to load the latest version of alexapy after an update. This looks like a HA bug).\r\n - alexa_media  (version from `const.py` or HA startup):\r\n - alexapy (version from `pip show alexapy` or HA startup): yes\r\n - Amazon [2FA is enabled](https://github.com/custom-components/alexa_media_player/wiki/Configuration#enable-two-factor-authentication-for-your-amazon-account) (y/n). We will not debug login issues if unanswered: \r\n\r\n**Logs**\r\nPlease provide [logs](https://github.com/custom-components/alexa_media_player/wiki/FAQ#how-do-i-enable-debug-logging-for-the-component). We'll be most likely asking for them anyway.\r\n\r\n**Additional context**\r\nAdd any other context about the problem here. \r\n", "reactions": {"url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/1075/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/1075/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/1067", "repository_url": "https://api.github.com/repos/custom-components/alexa_media_player", "labels_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/1067/labels{/name}", "comments_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/1067/comments", "events_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/1067/events", "html_url": "https://github.com/custom-components/alexa_media_player/issues/1067", "id": 777135670, "node_id": "MDU6SXNzdWU3NzcxMzU2NzA=", "number": 1067, "title": "Unable to authenticate non-.com domains", "user": {"login": "alexanderfitu", "id": 3074998, "node_id": "MDQ6VXNlcjMwNzQ5OTg=", "avatar_url": "https://avatars.githubusercontent.com/u/3074998?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alexanderfitu", "html_url": "https://github.com/alexanderfitu", "followers_url": "https://api.github.com/users/alexanderfitu/followers", "following_url": "https://api.github.com/users/alexanderfitu/following{/other_user}", "gists_url": "https://api.github.com/users/alexanderfitu/gists{/gist_id}", "starred_url": "https://api.github.com/users/alexanderfitu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alexanderfitu/subscriptions", "organizations_url": "https://api.github.com/users/alexanderfitu/orgs", "repos_url": "https://api.github.com/users/alexanderfitu/repos", "events_url": "https://api.github.com/users/alexanderfitu/events{/privacy}", "received_events_url": "https://api.github.com/users/alexanderfitu/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 983327104, "node_id": "MDU6TGFiZWw5ODMzMjcxMDQ=", "url": "https://api.github.com/repos/custom-components/alexa_media_player/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-12-31T20:53:44Z", "updated_at": "2021-01-01T02:53:27Z", "closed_at": "2021-01-01T02:42:44Z", "author_association": "NONE", "active_lock_reason": null, "body": "**Describe the bug**\r\nUnable to authenticate after installing the integration. \r\n\r\nI successfully fill in the 2fa screen, with the correct information (as per the wiki) but, I then receive a message that says:\r\n\r\n![image](https://user-images.githubusercontent.com/3074998/103425483-80a8c600-4baa-11eb-98dc-c21b82b608af.png)\r\n\r\n\r\nI never receive an Otp message, or notification on the web page, alexa app, amazon app, or SMS message. \r\n\r\nIf I chose amazon.com as the auth domain, I can authenticate, but all the alexa devices created in HA show as unavailable with a red ! on them. \r\n\r\n\r\n**To Reproduce**\r\n1. Install the integration via HASS\r\n2. restart HA\r\n3. add the integration \r\n4. configure the integration as per current instructions. \r\n\r\n\r\n**System details**\r\n - Home-assistant (latest version 2020.12.2): \r\n - Hassio (no\r\n - alexa_media  (3.4.2 via HACS):\r\n - alexapy (not sure ):\r\n - Amazon [2FA is enabled] yes - Have tried via OTP or via SMS as primary source. \r\n\r\n**Logs**\r\n`attached\r\n[logs.txt](https://github.com/custom-components/alexa_media_player/files/5758259/logs.txt)\r\n", "reactions": {"url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/1067/reactions", "total_count": 1, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/1067/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/1042", "repository_url": "https://api.github.com/repos/custom-components/alexa_media_player", "labels_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/1042/labels{/name}", "comments_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/1042/comments", "events_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/1042/events", "html_url": "https://github.com/custom-components/alexa_media_player/issues/1042", "id": 762175203, "node_id": "MDU6SXNzdWU3NjIxNzUyMDM=", "number": 1042, "title": "Powered off devices still show state as \"Standby\" ", "user": {"login": "quagmired", "id": 37499059, "node_id": "MDQ6VXNlcjM3NDk5MDU5", "avatar_url": "https://avatars.githubusercontent.com/u/37499059?v=4", "gravatar_id": "", "url": "https://api.github.com/users/quagmired", "html_url": "https://github.com/quagmired", "followers_url": "https://api.github.com/users/quagmired/followers", "following_url": "https://api.github.com/users/quagmired/following{/other_user}", "gists_url": "https://api.github.com/users/quagmired/gists{/gist_id}", "starred_url": "https://api.github.com/users/quagmired/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/quagmired/subscriptions", "organizations_url": "https://api.github.com/users/quagmired/orgs", "repos_url": "https://api.github.com/users/quagmired/repos", "events_url": "https://api.github.com/users/quagmired/events{/privacy}", "received_events_url": "https://api.github.com/users/quagmired/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 983327104, "node_id": "MDU6TGFiZWw5ODMzMjcxMDQ=", "url": "https://api.github.com/repos/custom-components/alexa_media_player/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 18, "created_at": "2020-12-11T09:58:47Z", "updated_at": "2021-01-06T07:00:08Z", "closed_at": "2021-01-06T03:46:12Z", "author_association": "NONE", "active_lock_reason": null, "body": "**Describe the bug**\r\nEcho Dots (v2) which are powered off are still shown as state \"Standby\" in HA, even though they update correctly as \"Unavailable\" on Alexa app, and \"online:false\" in json at https://alexa.amazon.com/api/devices-v2/device\r\nEach time HA is restarted, they do show correctly as \"Unavailable\", but will revert to \"Standby\" within a few minutes.\r\n\r\n**To Reproduce**\r\n1. Turn off some Alexa devices\r\n2. Check state of entity media_player.echo_dot_name in HA\r\n3. Still shows as \"Standby\", regardless of its power status\r\n\r\n**Expected behavior**\r\nOnline state of powered off devices should show \"Unavailable\" in HA instead of \"Standby\", as per the [Online state feature](https://github.com/custom-components/alexa_media_player/wiki#online-status-of-devices)\r\n\r\n**System details**\r\n - Home-assistant (version): 0.118.5\r\n - Hassio (Yes/No): Yes\r\n - alexa_media: 3.4.0\r\n - Amazon [2FA is enabled](https://github.com/custom-components/alexa_media_player/wiki/Configuration#enable-two-factor-authentication-for-your-amazon-account) (y/n).: Yes\r\n\r\n**Logs**\r\n```2020-12-11 16:54:57 WARNING (MainThread) [homeassistant.loader] You are using a custom integration for alexa_media which has not been tested by Home Assistant. This component might cause stability problems, be sure to disable it if you experience issues with Home Assistant.\r\n2020-12-11 17:03:30 DEBUG (MainThread) [alexapy.alexalogin] Searching for cookies from /config/.storage/alexa_media.name@email.com.pickle\r\n2020-12-11 17:03:30 DEBUG (MainThread) [alexapy.alexalogin] Trying to load cookie from file /config/.storage/alexa_media.name@email.com.pickle\r\n2020-12-11 17:03:33 DEBUG (MainThread) [alexapy.alexalogin] Trying to load aiohttpCookieJar to session\r\n2020-12-11 17:03:33 DEBUG (MainThread) [alexapy.alexalogin] Loaded 7 cookies\r\n2020-12-11 17:03:33 DEBUG (MainThread) [alexapy.alexalogin] Searching for cookies from /config/alexa_media.name@email.com.pickle\r\n2020-12-11 17:03:33 DEBUG (MainThread) [alexapy.alexalogin] Using cookies to log in\r\n2020-12-11 17:03:35 DEBUG (MainThread) [alexapy.alexalogin] GET:\r\nhttps://alexa.amazon.com/api/bootstrap returned 200:OK with response <CIMultiDictProxy('Content-Type': 'application/json', 'Content-Length': '149', 'Connection': 'keep-alive', 'Server': 'Server', 'Date': 'Fri, 11 Dec 2020 09:03:34 GMT', 'x-amz-rid': '', 'x-amzn-RequestId': '', 'Content-Encoding': 'gzip', 'Vary': 'Content-Type,Accept-Encoding,X-Amzn-CDN-Cache,X-Amzn-AX-Treatment,User-Agent', 'X-Cache': '', 'Via': '', 'X-Amz-Cf-Pop': '', 'X-Amz-Cf-Id': '')>\r\n2020-12-11 17:03:35 DEBUG (MainThread) [alexapy.alexalogin] Logged in as name@email.com with id: \r\n2020-12-11 17:03:35 DEBUG (MainThread) [alexapy.alexalogin] Log in successful with cookies\r\n2020-12-11 17:03:35 DEBUG (MainThread) [alexapy.alexawebsocket] Connecting to wss://dp-gw-na-js.amazon.com/?x-amz-device-type= with {'User-Agent': 'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_14_6) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/ Safari/', 'Accept': 'text/html,application/xhtml+xml, application/xml;q=0.9,*/*;q=0.8', 'Accept-Language': '*', 'Referer': 'https://alexa.amazon.com/api/bootstrap', 'Cookie': '', 'Origin': 'https://alexa.amazon.com'}\r\n2020-12-11 17:03:36 DEBUG (MainThread) [alexapy.alexawebsocket] Initating Async Handshake.\r\n2020-12-11 17:03:36 DEBUG (MainThread) [alexapy.alexawebsocket] Starting message parsing loop.\r\n2020-12-11 17:03:36 DEBUG (MainThread) [alexapy.alexawebsocket] Received WebSocket: {\"protocolName\":\"A:H\",\"parameters\":{\"AlphaProtocolHandler.maxFragmentSize\":\"16000\",\"AlphaProtocolHandler.receiveWindowSize\":\"16\"}}TUNE\r\n2020-12-11 17:03:37 DEBUG (MainThread) [alexapy.alexawebsocket] Encoding WebSocket Handshake MSG.\r\n2020-12-11 17:03:37 DEBUG (MainThread) [alexapy.alexawebsocket] Encoding Gateway Handshake MSG.\r\n2020-12-11 17:03:37 DEBUG (MainThread) [alexapy.alexawebsocket] Encoding Gateway Register MSG.\r\n2020-12-11 17:03:37 DEBUG (MainThread) [alexapy.alexawebsocket] Encoding PING.\r\n2020-12-11 17:03:37 DEBUG (MainThread) [alexapy.alexawebsocket] Received WebSocket: MSG END FABE\r\n2020-12-11 17:03:37 DEBUG (MainThread) [alexapy.alexawebsocket] Received ACK MSG for Registration.\r\n2020-12-11 17:03:38 DEBUG (MainThread) [alexapy.alexaapi] static GET: https://alexa.amazon.com/api/bootstrap returned 200:OK:application/json\r\n2020-12-11 17:03:38 DEBUG (MainThread) [alexapy.alexaapi] static GET: https://alexa.amazon.com/api/dnd/device-status-list returned 200:OK:application/json\r\n2020-12-11 17:03:38 DEBUG (MainThread) [alexapy.alexaapi] static GET: https://alexa.amazon.com/api/devices-v2/device returned 200:OK:application/json\r\n2020-12-11 17:03:38 DEBUG (MainThread) [alexapy.alexaapi] static GET: https://alexa.amazon.com/api/notifications returned 200:OK:application/json\r\n2020-12-11 17:03:38 DEBUG (MainThread) [alexapy.alexaapi] static GET: https://alexa.amazon.com/api/bluetooth?cached=false returned 200:OK:application/json\r\n2020-12-11 17:03:38 DEBUG (MainThread) [alexapy.alexaapi] static GET: https://alexa.amazon.com/api/device-preferences returned 200:OK:application/json\r\n2020-12-11 17:03:39 DEBUG (MainThread) [alexapy.alexaapi] static GET: https://alexa.amazon.com/api/activities?startTime=&size=10&offset=1 returned 200:OK:application/json\r\n2020-12-11 17:03:39 DEBUG (MainThread) [alexapy.alexaapi] GET: https://alexa.amazon.com/api/np/player?deviceSerialNumber= returned 200:OK:application/json\r\n2020-12-11 17:03:39 DEBUG (MainThread) [alexapy.alexaapi] GET: https://alexa.amazon.com/api/np/player?deviceSerialNumber= returned 200:OK:application/json\r\n2020-12-11 17:03:40 DEBUG (MainThread) [alexapy.alexaapi] GET: https://alexa.amazon.com/api/np/player?deviceSerialNumber= returned 200:OK:application/json\r\n2020-12-11 17:03:40 DEBUG (MainThread) [alexapy.alexaapi] GET: https://alexa.amazon.com/api/np/player?deviceSerialNumber= returned 200:OK:application/json\r\n2020-12-11 17:03:41 DEBUG (MainThread) [alexapy.alexaapi] GET: https://alexa.amazon.com/api/np/player?deviceSerialNumber= returned 200:OK:application/json\r\n2020-12-11 17:03:41 DEBUG (MainThread) [alexapy.alexaapi] GET: https://alexa.amazon.com/api/np/player?deviceSerialNumber= returned 200:OK:application/json\r\n2020-12-11 17:03:42 DEBUG (MainThread) [alexapy.alexaapi] GET: https://alexa.amazon.com/api/np/player?deviceSerialNumber= returned 200:OK:application/json\r\n2020-12-11 17:03:43 DEBUG (MainThread) [alexapy.alexaapi] GET: https://alexa.amazon.com/api/np/player?deviceSerialNumber= returned 200:OK:application/json\r\n2020-12-11 17:03:43 DEBUG (MainThread) [alexapy.alexaapi] GET: https://alexa.amazon.com/api/np/player?deviceSerialNumber= returned 200:OK:application/json\r\n2020-12-11 17:03:44 DEBUG (MainThread) [alexapy.alexaapi] GET: https://alexa.amazon.com/api/np/player?deviceSerialNumber= returned 200:OK:application/json\r\n2020-12-11 17:03:45 DEBUG (MainThread) [alexapy.alexaapi] GET: https://alexa.amazon.com/api/np/player?deviceSerialNumber= returned 200:OK:application/json\r\n2020-12-11 17:03:45 DEBUG (MainThread) [alexapy.alexaapi] GET: https://alexa.amazon.com/api/np/player?deviceSerialNumber= returned 200:OK:application/json\r\n2020-12-11 17:03:46 DEBUG (MainThread) [alexapy.alexaapi] GET: https://alexa.amazon.com/api/np/player?deviceSerialNumber= returned 200:OK:application/json\r\n2020-12-11 17:03:46 DEBUG (MainThread) [alexapy.alexaapi] GET: https://alexa.amazon.com/api/np/player?deviceSerialNumber= returned 200:OK:application/json\r\n2020-12-11 17:03:47 DEBUG (MainThread) [alexapy.alexaapi] GET: https://alexa.amazon.com/api/np/player?deviceSerialNumber= returned 200:OK:application/json\r\n2020-12-11 17:03:47 DEBUG (MainThread) [alexapy.alexaapi] GET: https://alexa.amazon.com/api/np/player?deviceSerialNumber= returned 200:OK:application/json\r\n2020-12-11 17:03:47 DEBUG (MainThread) [alexapy.alexaapi] GET: https://alexa.amazon.com/api/np/player?deviceSerialNumber= returned 200:OK:application/json\r\n2020-12-11 17:03:48 DEBUG (MainThread) [alexapy.alexaapi] static GET: https://alexa.amazon.com/api/phoenix returned 200:OK:application/json\r\n2020-12-11 17:03:58 DEBUG (MainThread) [alexapy.alexaapi] GET: https://alexa.amazon.com/api/np/player?deviceSerialNumber= returned 200:OK:application/json\r\n2020-12-11 17:03:58 DEBUG (MainThread) [alexapy.alexaapi] GET: https://alexa.amazon.com/api/np/player?deviceSerialNumber= returned 200:OK:application/json\r\n2020-12-11 17:03:58 DEBUG (MainThread) [alexapy.alexaapi] GET: https://alexa.amazon.com/api/np/player?deviceSerialNumber= returned 200:OK:application/json\r\n2020-12-11 17:03:58 DEBUG (MainThread) [alexapy.alexaapi] GET: https://alexa.amazon.com/api/np/player?deviceSerialNumber= returned 200:OK:application/json\r\n2020-12-11 17:03:58 DEBUG (MainThread) [alexapy.alexaapi] GET: https://alexa.amazon.com/api/np/player?deviceSerialNumber= returned 200:OK:application/json\r\n2020-12-11 17:03:58 DEBUG (MainThread) [alexapy.alexaapi] GET: https://alexa.amazon.com/api/np/player?deviceSerialNumber= returned 200:OK:application/json\r\n2020-12-11 17:03:58 DEBUG (MainThread) [alexapy.alexaapi] GET: https://alexa.amazon.com/api/np/player?deviceSerialNumber= returned 200:OK:application/json\r\n2020-12-11 17:03:58 DEBUG (MainThread) [alexapy.alexaapi] GET: https://alexa.amazon.com/api/np/player?deviceSerialNumber= returned 200:OK:application/json\r\n2020-12-11 17:03:58 DEBUG (MainThread) [alexapy.alexaapi] GET: https://alexa.amazon.com/api/np/player?deviceSerialNumber= returned 200:OK:application/json\r\n2020-12-11 17:03:58 DEBUG (MainThread) [alexapy.alexaapi] GET: https://alexa.amazon.com/api/np/player?deviceSerialNumber= returned 200:OK:application/json\r\n2020-12-11 17:03:58 DEBUG (MainThread) [alexapy.alexaapi] GET: https://alexa.amazon.com/api/np/player?deviceSerialNumber= returned 200:OK:application/json\r\n2020-12-11 17:03:58 DEBUG (MainThread) [alexapy.alexaapi] GET: https://alexa.amazon.com/api/np/player?deviceSerialNumber= returned 200:OK:application/json\r\n2020-12-11 17:03:58 DEBUG (MainThread) [alexapy.alexaapi] GET: https://alexa.amazon.com/api/np/player?deviceSerialNumber= returned 200:OK:application/json\r\n2020-12-11 17:03:58 DEBUG (MainThread) [alexapy.alexaapi] GET: https://alexa.amazon.com/api/np/player?deviceSerialNumber= returned 200:OK:application/json\r\n2020-12-11 17:03:58 DEBUG (MainThread) [alexapy.alexaapi] GET: https://alexa.amazon.com/api/np/player?deviceSerialNumber= returned 200:OK:application/json\r\n2020-12-11 17:03:58 DEBUG (MainThread) [alexapy.alexaapi] GET: https://alexa.amazon.com/api/np/player?deviceSerialNumber= returned 200:OK:application/json\r\n2020-12-11 17:03:58 DEBUG (MainThread) [alexapy.alexaapi] GET: https://alexa.amazon.com/api/np/player?deviceSerialNumber= returned 200:OK:application/json\r\n2020-12-11 17:08:56 DEBUG (MainThread) [alexapy.alexawebsocket] Received WebSocket: MSG urn:tcomm-endpoint:service:serviceName:DeeWebsiteMessagingService:domain:prod:realm:USAmazon 0x00000081 urn:tcomm-endpoint:device:customerId::deviceType::deviceSerialNumber: {\"timeStamp\":null,\"payload\":\"{\\\"destinationUserId\\\":\\\"\\\",\\\"dopplerId\\\":{\\\"deviceType\\\":\\\"\\\",\\\"deviceSerialNumber\\\":\\\"\\\"},\\\"bass\\\":0,\\\"midrange\\\":0,\\\"treble\\\":0}\",\"command\":\"PUSH_EQUALIZER_STATE_CHANGE\"}FABE\r\n2020-12-11 17:08:56 DEBUG (MainThread) [alexapy.alexawebsocket] Received Standard MSG.\r\n2020-12-11 17:08:57 DEBUG (MainThread) [alexapy.alexawebsocket] Received WebSocket: MSG urn:tcomm-endpoint:service:serviceName:DeeWebsiteMessagingService:domain:prod:realm:USAmazon 0x00000081 urn:tcomm-endpoint:device:customerId::deviceType::deviceSerialNumber: {\"timeStamp\":null,\"payload\":\"{\\\"destinationUserId\\\":\\\"\\\",\\\"dopplerId\\\":{\\\"deviceType\\\":\\\"\\\",\\\"deviceSerialNumber\\\":\\\"\\\"},\\\"volumeSetting\\\":30,\\\"isMuted\\\":false}\",\"command\":\"PUSH_VOLUME_CHANGE\"}FABE\r\n2020-12-11 17:08:57 DEBUG (MainThread) [alexapy.alexawebsocket] Received Standard MSG.\r\n2020-12-11 17:08:57 DEBUG (MainThread) [alexapy.alexaapi] GET: https://alexa.amazon.com/api/np/player?deviceSerialNumber= returned 200:OK:application/json\r\n2020-12-11 17:11:55 DEBUG (MainThread) [alexapy.alexawebsocket] WebSocket Connection Closed. <Task finished name='Task-1348' coro=<WebsocketEchoClient.process_messages() done, defined at /usr/local/lib/python3.8/site-packages/alexapy/alexawebsocket.py:138> result=None>\r\n2020-12-11 17:11:56 DEBUG (MainThread) [alexapy.alexaapi] static GET: https://alexa.amazon.com/api/dnd/device-status-list returned 200:OK:application/json\r\n2020-12-11 17:11:56 DEBUG (MainThread) [alexapy.alexaapi] static GET: https://alexa.amazon.com/api/devices-v2/device returned 200:OK:application/json\r\n2020-12-11 17:11:56 DEBUG (MainThread) [alexapy.alexaapi] static GET: https://alexa.amazon.com/api/notifications returned 200:OK:application/json\r\n2020-12-11 17:11:56 DEBUG (MainThread) [alexapy.alexaapi] static GET: https://alexa.amazon.com/api/bluetooth?cached=false returned 200:OK:application/json\r\n2020-12-11 17:11:56 DEBUG (MainThread) [alexapy.alexaapi] static GET: https://alexa.amazon.com/api/device-preferences returned 200:OK:application/json\r\n2020-12-11 17:11:57 DEBUG (MainThread) [alexapy.alexaapi] static GET: https://alexa.amazon.com/api/activities?startTime=&size=10&offset=1 returned 200:OK:application/json\r\n```\r\n\r\n**Additional context**\r\nThe powered-off devices that should have remained at \"Unavailable\" reverted to \"Standby\" at around 17:08, according to that device entity's history in HA.\r\n![amp_bug_01](https://user-images.githubusercontent.com/37499059/101889443-5d59af00-3bda-11eb-8dcd-e2738346b440.JPG)\r\nI've attempted deleting the PICKLE file and re-authenticating after restarting HA, but the results are the same (inactive devices show as \"Unavailable\" for a few minutes before changing to \"Standby\" state).", "reactions": {"url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/1042/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/1042/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/1033", "repository_url": "https://api.github.com/repos/custom-components/alexa_media_player", "labels_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/1033/labels{/name}", "comments_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/1033/comments", "events_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/1033/events", "html_url": "https://github.com/custom-components/alexa_media_player/issues/1033", "id": 757921814, "node_id": "MDU6SXNzdWU3NTc5MjE4MTQ=", "number": 1033, "title": "Integration fails to load - IndexError: string index out of range in hide_serial", "user": {"login": "mikesalz", "id": 46855061, "node_id": "MDQ6VXNlcjQ2ODU1MDYx", "avatar_url": "https://avatars.githubusercontent.com/u/46855061?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mikesalz", "html_url": "https://github.com/mikesalz", "followers_url": "https://api.github.com/users/mikesalz/followers", "following_url": "https://api.github.com/users/mikesalz/following{/other_user}", "gists_url": "https://api.github.com/users/mikesalz/gists{/gist_id}", "starred_url": "https://api.github.com/users/mikesalz/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mikesalz/subscriptions", "organizations_url": "https://api.github.com/users/mikesalz/orgs", "repos_url": "https://api.github.com/users/mikesalz/repos", "events_url": "https://api.github.com/users/mikesalz/events{/privacy}", "received_events_url": "https://api.github.com/users/mikesalz/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 983327104, "node_id": "MDU6TGFiZWw5ODMzMjcxMDQ=", "url": "https://api.github.com/repos/custom-components/alexa_media_player/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}, {"id": 1246346849, "node_id": "MDU6TGFiZWwxMjQ2MzQ2ODQ5", "url": "https://api.github.com/repos/custom-components/alexa_media_player/labels/alexapy", "name": "alexapy", "color": "e23ba8", "default": false, "description": "Issue relates to the API"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 10, "created_at": "2020-12-06T13:06:50Z", "updated_at": "2020-12-12T08:57:57Z", "closed_at": "2020-12-12T08:57:57Z", "author_association": "NONE", "active_lock_reason": null, "body": "**Describe the bug**\r\nIntegration stopped loading a day or so ago\r\n\r\n**To Reproduce**\r\nSteps to reproduce the behavior:\r\n1. Restart HA\r\n\r\n**Expected behavior**\r\nIntegration should load\r\n\r\n**Screenshots**\r\nIf applicable, add screenshots to help explain your problem.\r\n\r\n**System details**\r\n - Home-assistant (version): Home Assistant 0.118.5\r\n - Hassio (Yes/No): No\r\n - alexa_media  (version from `const.py` or HA startup): __version__ = \"3.3.1\" (Also tried 4.0)\r\n - alexapy (version from `pip show alexapy` or HA startup): 1.16.0\r\n - Amazon [2FA is enabled](https://github.com/custom-components/alexa_media_player/wiki/Configuration#enable-two-factor-authentication-for-your-amazon-account) (y/n). We will not debug login issues if unanswered: Yes\r\n\r\n**Logs**\r\nLogger: homeassistant.config_entries\r\nSource: custom_components/alexa_media/__init__.py:1062\r\nFirst occurred: 7:53:03 AM (1 occurrences)\r\nLast logged: 7:53:03 AM\r\n\r\nError setting up entry xxxxxxx@gmail.com - amazon.com for alexa_media\r\nTraceback (most recent call last):\r\n  File \"/usr/src/homeassistant/homeassistant/config_entries.py\", line 236, in async_setup\r\n    result = await component.async_setup_entry(hass, self)  # type: ignore\r\n  File \"/config/custom_components/alexa_media/__init__.py\", line 261, in async_setup_entry\r\n    if await test_login_status(hass, config_entry, login):\r\n  File \"/config/custom_components/alexa_media/__init__.py\", line 1062, in test_login_status\r\n    _LOGGER.debug(\"Logging in: %s %s\", obfuscate(account), in_progess_instances(hass))\r\n  File \"/usr/local/lib/python3.8/site-packages/alexapy/helpers.py\", line 103, in obfuscate\r\n    response[key] = hide_serial(value)\r\n  File \"/usr/local/lib/python3.8/site-packages/alexapy/helpers.py\", line 69, in hide_serial\r\n    response = \"{}{}{}\".format(item[0], \"*\" * (len(item) - 4), item[-3:])\r\nIndexError: string index out of range\r\n\r\n**Additional context**\r\nThis MIGHT have started failing when I upgraded from Home Assistant 0.118.4 to 0.118.5, but I am unsure if that is related.\r\n", "reactions": {"url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/1033/reactions", "total_count": 1, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/1033/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/975", "repository_url": "https://api.github.com/repos/custom-components/alexa_media_player", "labels_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/975/labels{/name}", "comments_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/975/comments", "events_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/975/events", "html_url": "https://github.com/custom-components/alexa_media_player/issues/975", "id": 718560488, "node_id": "MDU6SXNzdWU3MTg1NjA0ODg=", "number": 975, "title": "RuntimeError: Attribute hass is None for <Entity xxxxx: standby>", "user": {"login": "agneevX", "id": 19761269, "node_id": "MDQ6VXNlcjE5NzYxMjY5", "avatar_url": "https://avatars.githubusercontent.com/u/19761269?v=4", "gravatar_id": "", "url": "https://api.github.com/users/agneevX", "html_url": "https://github.com/agneevX", "followers_url": "https://api.github.com/users/agneevX/followers", "following_url": "https://api.github.com/users/agneevX/following{/other_user}", "gists_url": "https://api.github.com/users/agneevX/gists{/gist_id}", "starred_url": "https://api.github.com/users/agneevX/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/agneevX/subscriptions", "organizations_url": "https://api.github.com/users/agneevX/orgs", "repos_url": "https://api.github.com/users/agneevX/repos", "events_url": "https://api.github.com/users/agneevX/events{/privacy}", "received_events_url": "https://api.github.com/users/agneevX/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 983327104, "node_id": "MDU6TGFiZWw5ODMzMjcxMDQ=", "url": "https://api.github.com/repos/custom-components/alexa_media_player/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2020-10-10T07:50:17Z", "updated_at": "2020-10-11T02:51:40Z", "closed_at": "2020-10-11T02:51:40Z", "author_association": "NONE", "active_lock_reason": null, "body": "**Describe the bug**\r\nI'm getting this error even though the particular entity is disabled in HA\r\n\r\n```py\r\nTraceback (most recent call last):\r\n  File \"/srv/homeassistant/lib/python3.7/site-packages/homeassistant/helpers/update_coordinator.py\", line 143, in async_refresh\r\n    self.data = await self._async_update_data()\r\n  File \"/srv/homeassistant/lib/python3.7/site-packages/homeassistant/helpers/update_coordinator.py\", line 131, in _async_update_data\r\n    return await self.update_method()\r\n  File \"/home/homeassistant/.homeassistant/custom_components/alexa_media/__init__.py\", line 427, in async_update_data\r\n    ].get(serial).refresh(device, skip_api=True)\r\n  File \"/home/homeassistant/.homeassistant/custom_components/alexa_media/helpers.py\", line 159, in _catch_login_errors\r\n    result = await func(*args, **kwargs)\r\n  File \"/home/homeassistant/.homeassistant/custom_components/alexa_media/media_player.py\", line 497, in refresh\r\n    self.async_write_ha_state()\r\n  File \"/srv/homeassistant/lib/python3.7/site-packages/homeassistant/helpers/entity.py\", line 289, in async_write_ha_state\r\n    raise RuntimeError(f\"Attribute hass is None for {self}\")\r\nRuntimeError: Attribute hass is None for <Entity Dining Hall: standby>\r\n```\r\n\r\n**To Reproduce**\r\nN/A\r\n\r\n**Expected behavior**\r\nNo errors\r\n\r\n**Screenshots**\r\nN/A\r\n\r\n**System details**\r\n - Home-assistant (version): 0.115.3\r\n - Hassio (Yes/No): No\r\n - alexa_media: `3.2.1`\r\n - alexapy:\r\n\r\n```py\r\nName: alexapy\r\nVersion: 1.15.2\r\nSummary: Python API to control Amazon Echo Devices Programatically.\r\nHome-page: https://gitlab.com/keatontaylor/alexapy\r\nAuthor: Keaton Taylor\r\nAuthor-email: keatonstaylor@gmail.com\r\nLicense: Apache-2.0\r\nLocation: /srv/homeassistant/lib/python3.7/site-packages\r\nRequires: certifi, yarl, aiohttp, bs4, simplejson, requests, aiofiles, backoff\r\nRequired-by:\r\n```\r\n - Amazon [2FA is enabled](https://github.com/custom-components/alexa_media_player/wiki/Configuration#enable-two-factor-authentication-for-your-amazon-account) (y/n): Yes\r\n\r\n**Additional context**\r\nN/A\r\n", "reactions": {"url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/975/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/975/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/972", "repository_url": "https://api.github.com/repos/custom-components/alexa_media_player", "labels_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/972/labels{/name}", "comments_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/972/comments", "events_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/972/events", "html_url": "https://github.com/custom-components/alexa_media_player/issues/972", "id": 714373649, "node_id": "MDU6SXNzdWU3MTQzNzM2NDk=", "number": 972, "title": "\"Cancel all timers\" from 2nd echo not updating next_timer sensor", "user": {"login": "kkellner", "id": 9540241, "node_id": "MDQ6VXNlcjk1NDAyNDE=", "avatar_url": "https://avatars.githubusercontent.com/u/9540241?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kkellner", "html_url": "https://github.com/kkellner", "followers_url": "https://api.github.com/users/kkellner/followers", "following_url": "https://api.github.com/users/kkellner/following{/other_user}", "gists_url": "https://api.github.com/users/kkellner/gists{/gist_id}", "starred_url": "https://api.github.com/users/kkellner/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kkellner/subscriptions", "organizations_url": "https://api.github.com/users/kkellner/orgs", "repos_url": "https://api.github.com/users/kkellner/repos", "events_url": "https://api.github.com/users/kkellner/events{/privacy}", "received_events_url": "https://api.github.com/users/kkellner/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 983327104, "node_id": "MDU6TGFiZWw5ODMzMjcxMDQ=", "url": "https://api.github.com/repos/custom-components/alexa_media_player/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}, {"id": 2434431890, "node_id": "MDU6TGFiZWwyNDM0NDMxODkw", "url": "https://api.github.com/repos/custom-components/alexa_media_player/labels/no-issue-activity", "name": "no-issue-activity", "color": "ededed", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 8, "created_at": "2020-10-04T18:29:57Z", "updated_at": "2020-12-14T02:02:44Z", "closed_at": "2020-12-14T02:02:44Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "**Describe the bug**\r\nIf a timer is set on an echo and the command \"Cancel all timers\" is given to a different echo device, all the timers are canceled however the `next_timer` sensor for the first echo does not reflect that the timer is no longer valid.\r\n\r\n**To Reproduce**\r\nSteps to reproduce the behavior:\r\n1. Issue command \"Set timer for one hour\" on EchoA device\r\n2. Issue command \"Cancel all timers\" on EchoB device\r\n3. In HA look at \"sensor.EchoA_next_timer\".  It still shows the 1 hour timer.\r\n\r\n**Expected behavior**\r\nWhen the command \"Cancel all timers\" is issues, expect all effected \"next_timer\" sensors to reflect change.\r\n\r\n**System details**\r\n - Home-assistant 0.115.6\r\n - Hassio (Yes/No): yes\r\n - alexa_media  (version from `const.py` or HA startup): v3.2.1\r\n - alexapy (version from `pip show alexapy` or HA startup):\r\n - Amazon [2FA is enabled](https://github.com/custom-components/alexa_media_player/wiki/Configuration#enable-two-factor-authentication-for-your-amazon-account) (y/n). We will not debug login issues if unanswered: n\r\n\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/972/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/972/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/957", "repository_url": "https://api.github.com/repos/custom-components/alexa_media_player", "labels_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/957/labels{/name}", "comments_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/957/comments", "events_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/957/events", "html_url": "https://github.com/custom-components/alexa_media_player/issues/957", "id": 710368303, "node_id": "MDU6SXNzdWU3MTAzNjgzMDM=", "number": 957, "title": "HA 0.115.4: play_music() got an unexpected keyword argument 'extra'", "user": {"login": "genem2", "id": 46231389, "node_id": "MDQ6VXNlcjQ2MjMxMzg5", "avatar_url": "https://avatars.githubusercontent.com/u/46231389?v=4", "gravatar_id": "", "url": "https://api.github.com/users/genem2", "html_url": "https://github.com/genem2", "followers_url": "https://api.github.com/users/genem2/followers", "following_url": "https://api.github.com/users/genem2/following{/other_user}", "gists_url": "https://api.github.com/users/genem2/gists{/gist_id}", "starred_url": "https://api.github.com/users/genem2/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/genem2/subscriptions", "organizations_url": "https://api.github.com/users/genem2/orgs", "repos_url": "https://api.github.com/users/genem2/repos", "events_url": "https://api.github.com/users/genem2/events{/privacy}", "received_events_url": "https://api.github.com/users/genem2/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 983327104, "node_id": "MDU6TGFiZWw5ODMzMjcxMDQ=", "url": "https://api.github.com/repos/custom-components/alexa_media_player/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}, {"id": 1246346849, "node_id": "MDU6TGFiZWwxMjQ2MzQ2ODQ5", "url": "https://api.github.com/repos/custom-components/alexa_media_player/labels/alexapy", "name": "alexapy", "color": "e23ba8", "default": false, "description": "Issue relates to the API"}], "state": "closed", "locked": false, "assignee": {"login": "alandtse", "id": 7086117, "node_id": "MDQ6VXNlcjcwODYxMTc=", "avatar_url": "https://avatars.githubusercontent.com/u/7086117?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alandtse", "html_url": "https://github.com/alandtse", "followers_url": "https://api.github.com/users/alandtse/followers", "following_url": "https://api.github.com/users/alandtse/following{/other_user}", "gists_url": "https://api.github.com/users/alandtse/gists{/gist_id}", "starred_url": "https://api.github.com/users/alandtse/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alandtse/subscriptions", "organizations_url": "https://api.github.com/users/alandtse/orgs", "repos_url": "https://api.github.com/users/alandtse/repos", "events_url": "https://api.github.com/users/alandtse/events{/privacy}", "received_events_url": "https://api.github.com/users/alandtse/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "alandtse", "id": 7086117, "node_id": "MDQ6VXNlcjcwODYxMTc=", "avatar_url": "https://avatars.githubusercontent.com/u/7086117?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alandtse", "html_url": "https://github.com/alandtse", "followers_url": "https://api.github.com/users/alandtse/followers", "following_url": "https://api.github.com/users/alandtse/following{/other_user}", "gists_url": "https://api.github.com/users/alandtse/gists{/gist_id}", "starred_url": "https://api.github.com/users/alandtse/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alandtse/subscriptions", "organizations_url": "https://api.github.com/users/alandtse/orgs", "repos_url": "https://api.github.com/users/alandtse/repos", "events_url": "https://api.github.com/users/alandtse/events{/privacy}", "received_events_url": "https://api.github.com/users/alandtse/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 4, "created_at": "2020-09-28T15:28:02Z", "updated_at": "2020-09-28T23:55:28Z", "closed_at": "2020-09-28T23:49:41Z", "author_association": "NONE", "active_lock_reason": null, "body": "It looks like HA 0.115.4 is jamming us up with play_music()\r\n\r\nUpon HA start, my R2D2 sound fails with:\r\n```\r\n2020-09-28 07:52:48 WARNING (MainThread) [alexapy.helpers] alexaapi.play_music((<alexapy.alexaapi.AlexaAPI object at 0x14f924dde5b0>, 'AMAZON_MUSIC', 'Robot Talk 2 by Soundsmack '), {'customer_id': 'A3**********NJ', 'queue_delay': 1.5, 'extra': {}}): An error occured accessing AlexaAPI: An exception of type TypeError occurred. Arguments:\r\nd(\"play_music() got an unexpected keyword argument 'extra'\",)\r\n\r\n```\r\nI reverted to 0.115.3 twice and this is only happening on 0.115.4.\r\n\r\n\r\n\r\n**System details**\r\n\r\n```\r\narch\tx86_64\r\ndev\tfalse\r\ndocker\ttrue\r\nhassio\tfalse\r\ninstallation_type\tHome Assistant Container\r\nos_name\tLinux\r\nos_version\t4.19.107-Unraid\r\npython_version\t3.8.5\r\ntimezone\tAmerica/Los_Angeles\r\nversion\t0.115.3\r\nvirtualenv\tfalse\r\n```\r\n\r\n**Logs**\r\nI enabled detailed logs & can provide if you'd like, but I didn't see anything else in there...\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/957/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/957/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/950", "repository_url": "https://api.github.com/repos/custom-components/alexa_media_player", "labels_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/950/labels{/name}", "comments_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/950/comments", "events_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/950/events", "html_url": "https://github.com/custom-components/alexa_media_player/issues/950", "id": 709696152, "node_id": "MDU6SXNzdWU3MDk2OTYxNTI=", "number": 950, "title": "Do not disturb switches not showing proper state", "user": {"login": "philhawthorne", "id": 716711, "node_id": "MDQ6VXNlcjcxNjcxMQ==", "avatar_url": "https://avatars.githubusercontent.com/u/716711?v=4", "gravatar_id": "", "url": "https://api.github.com/users/philhawthorne", "html_url": "https://github.com/philhawthorne", "followers_url": "https://api.github.com/users/philhawthorne/followers", "following_url": "https://api.github.com/users/philhawthorne/following{/other_user}", "gists_url": "https://api.github.com/users/philhawthorne/gists{/gist_id}", "starred_url": "https://api.github.com/users/philhawthorne/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/philhawthorne/subscriptions", "organizations_url": "https://api.github.com/users/philhawthorne/orgs", "repos_url": "https://api.github.com/users/philhawthorne/repos", "events_url": "https://api.github.com/users/philhawthorne/events{/privacy}", "received_events_url": "https://api.github.com/users/philhawthorne/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 983327104, "node_id": "MDU6TGFiZWw5ODMzMjcxMDQ=", "url": "https://api.github.com/repos/custom-components/alexa_media_player/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 16, "created_at": "2020-09-27T08:34:17Z", "updated_at": "2023-02-05T04:05:51Z", "closed_at": "2020-10-02T06:41:22Z", "author_association": "NONE", "active_lock_reason": null, "body": "**Describe the bug**\r\nWhen using the switches to toggle the Do Not Disturb status of an echo device\r\n\r\n- The do not disturb state is changed on the Amazon device _sometimes_\r\n- The do not disturb switch in Home Assistant toggles itself back to the old state\r\n- The do not disturb switch in Home Assistant changes state, despite the amazon device remaining in the old state\r\n\r\n**To Reproduce**\r\nSteps to reproduce the behavior:\r\n\r\nIn the example below, my echo dot's do not disturb status is set to `off` in the Alexa App.\r\n\r\n1. Open Home Assistant developer tools\r\n2. Find a do not disturb entity, in my case `switch.office_dot_do_not_disturb_switch`\r\n3. Turn it on\r\n4. The switch in Home Assistant will turn on, and then turn itself back off\r\n5. The echo dot's do not disturb mode is now activated\r\n6. The Home Assistant switch remains as turned off\r\n\r\nNow pressing the turn on/off action for this switch has no effect. Manually calling `switch.turn_off` does not turn do not disturb off.\r\n\r\n**Expected behavior**\r\nThe do not disturb status of my echo devices in Home Assistant should reflect their state in the Alexa app.\r\n\r\n**Screenshots**\r\n![image](https://user-images.githubusercontent.com/716711/94360196-f7877c00-00ee-11eb-99f3-fa44e33c2119.png)\r\n\r\n\r\n**System details**\r\n - Home-assistant (version): 0.115.3\r\n - Hassio (Yes/No): No\r\n - alexa_media  (version from `const.py` or HA startup): 3.0.1\r\n - alexapy (version from `pip show alexapy` or HA startup): 1.14.1\r\n - Amazon [2FA is enabled](https://github.com/custom-components/alexa_media_player/wiki/Configuration#enable-two-factor-authentication-for-your-amazon-account) (y/n). We will not debug login issues if unanswered: Yes\r\n\r\n**Logs**\r\nPlease provide [logs](https://github.com/custom-components/alexa_media_player/wiki/FAQ#how-do-i-enable-debug-logging-for-the-component). We'll be most likely asking for them anyway.\r\n\r\n```\r\n2020-09-27 18:26:02 DEBUG (MainThread) [custom_components.alexa_media.switch] Switch set to True based on True\r\n2020-09-27 18:26:02 DEBUG (MainThread) [custom_components.alexa_media] me@p***************m: Received websocket command: PUSH_VOLUME_CHANGE : {'destinationUserId': 'A*********1BB', 'dopplerId': {'deviceType': 'A3S5BH2HU6VAYF', 'deviceSerialNumber': 'G************CWG'}, 'volumeSetting': 63, 'isMuted': False}\r\n2020-09-27 18:26:02 DEBUG (MainThread) [custom_components.alexa_media] Updating media_player volume: {'destinationUserId': 'A*********1BB', 'dopplerId': {'deviceType': 'A3S5BH2HU6VAYF', 'deviceSerialNumber': 'G************CWG'}, 'volumeSetting': 63, 'isMuted': False}\r\n2020-09-27 18:26:02 DEBUG (MainThread) [custom_components.alexa_media.media_player] Office Dot volume updated: 63\r\n2020-09-27 18:26:02 DEBUG (MainThread) [custom_components.alexa_media.media_player] me@p***************m: No PUSH_AUDIO_PLAYER_STATE/PUSH_MEDIA_CHANGE/PUSH_MEDIA_PROGRESS_CHANGE in dict_keys(['PUSH_EQUALIZER_STATE_CHANGE', 'PUSH_VOLUME_CHANGE', 'PUSH_ACTIVITY', 'PUSH_NOTIFICATION_CHANGE']);forcing refresh\r\n2020-09-27 18:26:02 DEBUG (MainThread) [custom_components.alexa_media.media_player] me@p***************m: Refreshing Office Dot\r\n2020-09-27 18:26:02 DEBUG (MainThread) [custom_components.alexa_media.media_player] Office Dot: Last_called check: self: G************CWG reported: G************QGQ\r\n2020-09-27 18:26:02 DEBUG (MainThread) [custom_components.alexa_media] me@p***************m: Received websocket command: PUSH_EQUALIZER_STATE_CHANGE : {'destinationUserId': 'A*********1BB', 'dopplerId': {'deviceType': 'A3S5BH2HU6VAYF', 'deviceSerialNumber': 'G************CWG'}, 'bass': 0, 'midrange': 0, 'treble': 0}\r\n2020-09-27 18:26:02 DEBUG (MainThread) [custom_components.alexa_media] Updating media_player availability {'destinationUserId': 'A*********1BB', 'dopplerId': {'deviceType': 'A3S5BH2HU6VAYF', 'deviceSerialNumber': 'G************CWG'}, 'bass': 0, 'midrange': 0, 'treble': 0}\r\n2020-09-27 18:26:02 DEBUG (MainThread) [custom_components.alexa_media.media_player] me@p***************m: No PUSH_AUDIO_PLAYER_STATE/PUSH_MEDIA_CHANGE/PUSH_MEDIA_PROGRESS_CHANGE in dict_keys(['PUSH_EQUALIZER_STATE_CHANGE', 'PUSH_VOLUME_CHANGE', 'PUSH_ACTIVITY', 'PUSH_NOTIFICATION_CHANGE']);forcing refresh\r\n2020-09-27 18:26:02 DEBUG (MainThread) [custom_components.alexa_media] me@p***************m: Received websocket command: PUSH_EQUALIZER_STATE_CHANGE : {'destinationUserId': 'A*********1BB', 'dopplerId': {'deviceType': 'A3S5BH2HU6VAYF', 'deviceSerialNumber': 'G************CWG'}, 'bass': 0, 'midrange': 0, 'treble': 0}\r\n2020-09-27 18:26:02 DEBUG (MainThread) [custom_components.alexa_media] Updating media_player availability {'destinationUserId': 'A*********1BB', 'dopplerId': {'deviceType': 'A3S5BH2HU6VAYF', 'deviceSerialNumber': 'G************CWG'}, 'bass': 0, 'midrange': 0, 'treble': 0}\r\n2020-09-27 18:26:02 DEBUG (MainThread) [custom_components.alexa_media.media_player] me@p***************m: No PUSH_AUDIO_PLAYER_STATE/PUSH_MEDIA_CHANGE/PUSH_MEDIA_PROGRESS_CHANGE in dict_keys(['PUSH_EQUALIZER_STATE_CHANGE', 'PUSH_VOLUME_CHANGE', 'PUSH_ACTIVITY', 'PUSH_NOTIFICATION_CHANGE']);forcing refresh\r\n2020-09-27 18:26:02 DEBUG (MainThread) [custom_components.alexa_media] me@p***************m: Received websocket command: PUSH_VOLUME_CHANGE : {'destinationUserId': 'A*********1BB', 'dopplerId': {'deviceType': 'A3S5BH2HU6VAYF', 'deviceSerialNumber': 'G************CWG'}, 'volumeSetting': 63, 'isMuted': False}\r\n2020-09-27 18:26:02 DEBUG (MainThread) [custom_components.alexa_media] Updating media_player volume: {'destinationUserId': 'A*********1BB', 'dopplerId': {'deviceType': 'A3S5BH2HU6VAYF', 'deviceSerialNumber': 'G************CWG'}, 'volumeSetting': 63, 'isMuted': False}\r\n2020-09-27 18:26:02 DEBUG (MainThread) [custom_components.alexa_media.media_player] Office Dot volume updated: 63\r\n2020-09-27 18:26:02 DEBUG (MainThread) [custom_components.alexa_media.media_player] me@p***************m: No PUSH_AUDIO_PLAYER_STATE/PUSH_MEDIA_CHANGE/PUSH_MEDIA_PROGRESS_CHANGE in dict_keys(['PUSH_EQUALIZER_STATE_CHANGE', 'PUSH_VOLUME_CHANGE', 'PUSH_ACTIVITY', 'PUSH_NOTIFICATION_CHANGE']);forcing refresh\r\n2020-09-27 18:26:03 DEBUG (MainThread) [custom_components.alexa_media] me@p***************m: Received websocket command: PUSH_VOLUME_CHANGE : {'destinationUserId': 'A*********1BB', 'dopplerId': {'deviceType': 'A3S5BH2HU6VAYF', 'deviceSerialNumber': 'G************CWG'}, 'volumeSetting': 63, 'isMuted': False}\r\n2020-09-27 18:26:03 DEBUG (MainThread) [custom_components.alexa_media] Updating media_player volume: {'destinationUserId': 'A*********1BB', 'dopplerId': {'deviceType': 'A3S5BH2HU6VAYF', 'deviceSerialNumber': 'G************CWG'}, 'volumeSetting': 63, 'isMuted': False}\r\n2020-09-27 18:26:03 DEBUG (MainThread) [custom_components.alexa_media.media_player] Office Dot volume updated: 63\r\n2020-09-27 18:26:03 DEBUG (MainThread) [custom_components.alexa_media.media_player] me@p***************m: No PUSH_AUDIO_PLAYER_STATE/PUSH_MEDIA_CHANGE/PUSH_MEDIA_PROGRESS_CHANGE in dict_keys(['PUSH_EQUALIZER_STATE_CHANGE', 'PUSH_VOLUME_CHANGE', 'PUSH_ACTIVITY', 'PUSH_NOTIFICATION_CHANGE']);forcing refresh\r\n2020-09-27 18:26:03 DEBUG (MainThread) [custom_components.alexa_media] me@p***************m: Received websocket command: PUSH_EQUALIZER_STATE_CHANGE : {'destinationUserId': 'A*********1BB', 'dopplerId': {'deviceType': 'A3S5BH2HU6VAYF', 'deviceSerialNumber': 'G************CWG'}, 'bass': 0, 'midrange': 0, 'treble': 0}\r\n2020-09-27 18:26:03 DEBUG (MainThread) [custom_components.alexa_media] Updating media_player availability {'destinationUserId': 'A*********1BB', 'dopplerId': {'deviceType': 'A3S5BH2HU6VAYF', 'deviceSerialNumber': 'G************CWG'}, 'bass': 0, 'midrange': 0, 'treble': 0}\r\n2020-09-27 18:26:03 DEBUG (MainThread) [custom_components.alexa_media.media_player] me@p***************m: No PUSH_AUDIO_PLAYER_STATE/PUSH_MEDIA_CHANGE/PUSH_MEDIA_PROGRESS_CHANGE in dict_keys(['PUSH_EQUALIZER_STATE_CHANGE', 'PUSH_VOLUME_CHANGE', 'PUSH_ACTIVITY', 'PUSH_NOTIFICATION_CHANGE']);forcing refresh\r\n2020-09-27 18:26:06 DEBUG (MainThread) [custom_components.alexa_media] me@p***************m: Received websocket command: PUSH_EQUALIZER_STATE_CHANGE : {'destinationUserId': 'A*********1BB', 'dopplerId': {'deviceType': 'A3S5BH2HU6VAYF', 'deviceSerialNumber': 'G************CWG'}, 'bass': 0, 'midrange': 0, 'treble': 0}\r\n2020-09-27 18:26:06 DEBUG (MainThread) [custom_components.alexa_media] Updating media_player availability {'destinationUserId': 'A*********1BB', 'dopplerId': {'deviceType': 'A3S5BH2HU6VAYF', 'deviceSerialNumber': 'G************CWG'}, 'bass': 0, 'midrange': 0, 'treble': 0}\r\n2020-09-27 18:26:06 DEBUG (MainThread) [custom_components.alexa_media.media_player] me@p***************m: No PUSH_AUDIO_PLAYER_STATE/PUSH_MEDIA_CHANGE/PUSH_MEDIA_PROGRESS_CHANGE in dict_keys(['PUSH_EQUALIZER_STATE_CHANGE', 'PUSH_VOLUME_CHANGE', 'PUSH_ACTIVITY', 'PUSH_NOTIFICATION_CHANGE']);forcing refresh\r\n2020-09-27 18:26:06 DEBUG (MainThread) [custom_components.alexa_media.media_player] me@p***************m: Refreshing Office Dot\r\n2020-09-27 18:26:06 DEBUG (MainThread) [custom_components.alexa_media.media_player] Office Dot: Last_called check: self: G************CWG reported: G************QGQ\r\n2020-09-27 18:26:06 DEBUG (MainThread) [custom_components.alexa_media] me@p***************m: Received websocket command: PUSH_VOLUME_CHANGE : {'destinationUserId': 'A*********1BB', 'dopplerId': {'deviceType': 'A3S5BH2HU6VAYF', 'deviceSerialNumber': 'G************CWG'}, 'volumeSetting': 63, 'isMuted': False}\r\n2020-09-27 18:26:06 DEBUG (MainThread) [custom_components.alexa_media] Updating media_player volume: {'destinationUserId': 'A*********1BB', 'dopplerId': {'deviceType': 'A3S5BH2HU6VAYF', 'deviceSerialNumber': 'G************CWG'}, 'volumeSetting': 63, 'isMuted': False}\r\n2020-09-27 18:26:06 DEBUG (MainThread) [custom_components.alexa_media.media_player] Office Dot volume updated: 63\r\n2020-09-27 18:26:06 DEBUG (MainThread) [custom_components.alexa_media.media_player] me@p***************m: No PUSH_AUDIO_PLAYER_STATE/PUSH_MEDIA_CHANGE/PUSH_MEDIA_PROGRESS_CHANGE in dict_keys(['PUSH_EQUALIZER_STATE_CHANGE', 'PUSH_VOLUME_CHANGE', 'PUSH_ACTIVITY', 'PUSH_NOTIFICATION_CHANGE']);forcing refresh\r\n```\r\n\r\n**Additional context**\r\nRunning Home Assistant in a docker container, incase that matters.\r\n", "reactions": {"url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/950/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/950/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/944", "repository_url": "https://api.github.com/repos/custom-components/alexa_media_player", "labels_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/944/labels{/name}", "comments_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/944/comments", "events_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/944/events", "html_url": "https://github.com/custom-components/alexa_media_player/issues/944", "id": 708549288, "node_id": "MDU6SXNzdWU3MDg1NDkyODg=", "number": 944, "title": "Alexa Reauthentication Login page shows blank window", "user": {"login": "Bart56", "id": 46532079, "node_id": "MDQ6VXNlcjQ2NTMyMDc5", "avatar_url": "https://avatars.githubusercontent.com/u/46532079?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Bart56", "html_url": "https://github.com/Bart56", "followers_url": "https://api.github.com/users/Bart56/followers", "following_url": "https://api.github.com/users/Bart56/following{/other_user}", "gists_url": "https://api.github.com/users/Bart56/gists{/gist_id}", "starred_url": "https://api.github.com/users/Bart56/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Bart56/subscriptions", "organizations_url": "https://api.github.com/users/Bart56/orgs", "repos_url": "https://api.github.com/users/Bart56/repos", "events_url": "https://api.github.com/users/Bart56/events{/privacy}", "received_events_url": "https://api.github.com/users/Bart56/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 983327104, "node_id": "MDU6TGFiZWw5ODMzMjcxMDQ=", "url": "https://api.github.com/repos/custom-components/alexa_media_player/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 16, "created_at": "2020-09-25T00:14:58Z", "updated_at": "2020-09-27T00:05:10Z", "closed_at": "2020-09-27T00:05:10Z", "author_association": "NONE", "active_lock_reason": null, "body": "**Describe the bug**\r\nAfter getting notified that Alexa Media Reauthentication Required\r\nReauthenticate on the Integrations page, I go to the integrations page and click 'configure'. A few days ago, I got a full popup asking for email, password, 2FA code (I have 2FA enabled on Amazon). No captcha appeared. After clicking on submit, a small blank popup appears with only an 'X' on the right which closes the popup. All attempts since have given me the blank popup including updating to latest version 3.0 and hard (power off/on) many times. I've enabled logging and the html files that appear in the config directory appear to be complete.\r\nI'm attaching the log file\r\n\r\n\r\n\r\n**To Reproduce**\r\nSteps to reproduce the behavior:\r\n1. Go to 'integrations.'\r\n2. Click on 'configure. for the Alexa integration'\r\n3. blank box appears\r\n\r\n![after_config](https://user-images.githubusercontent.com/46532079/94212248-a5055000-fea1-11ea-8feb-cc90de39eeb3.jpg)\r\n\r\n4. See error\r\n\r\n**Expected behavior**\r\nA popup with text to request email, password, 2fa, captcha if necessary.\r\n\r\n**Screenshots**\r\nIf applicable, add screenshots to help explain your problem.\r\n\r\n**System details**\r\n - Home-assistant (version): \r\n - Hassio (Yes/No): (Please note you may have to restart hassio 2-3 times to load the latest version of alexapy after an update. This looks like a HA bug).\r\nHassio: Home Assistant Core  0.107.7, Supervisor 245, Operating system\r\nRaspbian GNU/Linux 10 (buster) Docker version 19.03.8\r\n - alexa_media  (__version__ = \"3.0.0\"):\r\n - alexapy (version from `pip show alexapy` or HA startup):\r\n - Amazon [2FA is enabled](https://github.com/custom-components/alexa_media_player/wiki/Configuration#enable-two-factor-authentication-for-your-amazon-account) (y/n). We will not debug login issues if unanswered: \r\nYES - I did this a little over 2 weeks ago and it worked fine. When Amazon needed reauthentication 4 days ago, this happened and I no longer have access to alexa devices.\r\n\r\n**Logs**\r\nPlease provide [logs](https://github.com/custom-components/alexa_media_player/wiki/FAQ#how-do-i-enable-debug-logging-for-the-component). We'll be most likely asking for them anyway.\r\n[home-assistant.log](https://github.com/custom-components/alexa_media_player/files/5279816/home-assistant.log)\r\n\r\n**Additional context**\r\nReporter from #941 mentioned:\r\n An error message is displayed in the browser after adding the integration.\r\n\r\n![image](https://user-images.githubusercontent.com/7328224/93856828-e6d3a200-fcb9-11ea-9d31-99cefb2586c7.png)\r\n", "reactions": {"url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/944/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/944/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/943", "repository_url": "https://api.github.com/repos/custom-components/alexa_media_player", "labels_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/943/labels{/name}", "comments_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/943/comments", "events_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/943/events", "html_url": "https://github.com/custom-components/alexa_media_player/issues/943", "id": 708526629, "node_id": "MDU6SXNzdWU3MDg1MjY2Mjk=", "number": 943, "title": "Stuck in Verification Code Loop - Amazon requests credit card details to verify", "user": {"login": "scstraus", "id": 7644023, "node_id": "MDQ6VXNlcjc2NDQwMjM=", "avatar_url": "https://avatars.githubusercontent.com/u/7644023?v=4", "gravatar_id": "", "url": "https://api.github.com/users/scstraus", "html_url": "https://github.com/scstraus", "followers_url": "https://api.github.com/users/scstraus/followers", "following_url": "https://api.github.com/users/scstraus/following{/other_user}", "gists_url": "https://api.github.com/users/scstraus/gists{/gist_id}", "starred_url": "https://api.github.com/users/scstraus/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/scstraus/subscriptions", "organizations_url": "https://api.github.com/users/scstraus/orgs", "repos_url": "https://api.github.com/users/scstraus/repos", "events_url": "https://api.github.com/users/scstraus/events{/privacy}", "received_events_url": "https://api.github.com/users/scstraus/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 983327104, "node_id": "MDU6TGFiZWw5ODMzMjcxMDQ=", "url": "https://api.github.com/repos/custom-components/alexa_media_player/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}, {"id": 1246346849, "node_id": "MDU6TGFiZWwxMjQ2MzQ2ODQ5", "url": "https://api.github.com/repos/custom-components/alexa_media_player/labels/alexapy", "name": "alexapy", "color": "e23ba8", "default": false, "description": "Issue relates to the API"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 10, "created_at": "2020-09-24T23:06:32Z", "updated_at": "2020-09-25T20:05:52Z", "closed_at": "2020-09-25T20:05:52Z", "author_association": "NONE", "active_lock_reason": null, "body": "**Describe the bug**\r\nIt keeps asking for a verification code, I keep answering, and it keeps asking again.\r\n\r\n**To Reproduce**\r\n1)Click notification, click button to login\r\n2)Click notification, enter login code\r\n3)GOTO 2\r\n\r\n**Expected behavior**\r\nAccess to alexa media\r\n\r\n**Screenshots**\r\nIf applicable, add screenshots to help explain your problem.\r\n\r\n**System details**\r\nThere's another similar bug from me with these details if you ened them. \r\n\r\n\r\n**Logs**\r\nI'm going to send them to you by PM on the homeassistant board.\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/943/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/943/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/908", "repository_url": "https://api.github.com/repos/custom-components/alexa_media_player", "labels_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/908/labels{/name}", "comments_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/908/comments", "events_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/908/events", "html_url": "https://github.com/custom-components/alexa_media_player/issues/908", "id": 694316964, "node_id": "MDU6SXNzdWU2OTQzMTY5NjQ=", "number": 908, "title": "Options are lost on relogin", "user": {"login": "alandtse", "id": 7086117, "node_id": "MDQ6VXNlcjcwODYxMTc=", "avatar_url": "https://avatars.githubusercontent.com/u/7086117?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alandtse", "html_url": "https://github.com/alandtse", "followers_url": "https://api.github.com/users/alandtse/followers", "following_url": "https://api.github.com/users/alandtse/following{/other_user}", "gists_url": "https://api.github.com/users/alandtse/gists{/gist_id}", "starred_url": "https://api.github.com/users/alandtse/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alandtse/subscriptions", "organizations_url": "https://api.github.com/users/alandtse/orgs", "repos_url": "https://api.github.com/users/alandtse/repos", "events_url": "https://api.github.com/users/alandtse/events{/privacy}", "received_events_url": "https://api.github.com/users/alandtse/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 983327104, "node_id": "MDU6TGFiZWw5ODMzMjcxMDQ=", "url": "https://api.github.com/repos/custom-components/alexa_media_player/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}, {"id": 2434431890, "node_id": "MDU6TGFiZWwyNDM0NDMxODkw", "url": "https://api.github.com/repos/custom-components/alexa_media_player/labels/no-issue-activity", "name": "no-issue-activity", "color": "ededed", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-09-06T09:53:06Z", "updated_at": "2020-11-14T01:31:37Z", "closed_at": "2020-11-14T01:31:37Z", "author_association": "COLLABORATOR", "active_lock_reason": null, "body": "**Describe the bug**\r\nQueue_delay is lost on successful relogin.\r\n\r\n**To Reproduce**\r\nSteps to reproduce the behavior:\r\n1. Enable debug logging on alexa_media.'\r\n2. Use `play_media` service. Note queue_delay has a value in the logs.\r\n3. Use `alexa_media.force_logout`\r\n4. Reauthenticate\r\n5. Repeat step 2 and notice queue_delay is now None.\r\n\r\n**Expected behavior**\r\nOptions should be transferred properly.\r\n\r\n**Screenshots**\r\nIf applicable, add screenshots to help explain your problem.\r\n\r\n**System details**\r\n - Home-assistant (version): 0.114.4\r\n - Hassio (Yes/No): (Please note you may have to restart hassio 2-3 times to load the latest version of alexapy after an update. This looks like a HA bug). Yes\r\n - alexa_media  (version from `const.py` or HA startup): 2.14.1\r\n - alexapy (version from `pip show alexapy` or HA startup): 1.14.1\r\n - Amazon [2FA is enabled](https://github.com/custom-components/alexa_media_player/wiki/Configuration#enable-two-factor-authentication-for-your-amazon-account) (y/n). We will not debug login issues if unanswered:  Yes\r\n\r\n**Logs**\r\nPlease provide [logs](https://github.com/custom-components/alexa_media_player/wiki/FAQ#how-do-i-enable-debug-logging-for-the-component). We'll be most likely asking for them anyway.\r\n\r\n**Additional context**\r\nAdd any other context about the problem here. \r\n\r\nWorkaround is already in alexapy code to handle None case for queue_delay but this still should be fixed properly so if we add new options we don't have to fix it in the API.", "reactions": {"url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/908/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/908/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/903", "repository_url": "https://api.github.com/repos/custom-components/alexa_media_player", "labels_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/903/labels{/name}", "comments_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/903/comments", "events_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/903/events", "html_url": "https://github.com/custom-components/alexa_media_player/issues/903", "id": 692011941, "node_id": "MDU6SXNzdWU2OTIwMTE5NDE=", "number": 903, "title": "Multiple discovered integrations after relogin required", "user": {"login": "moranbf", "id": 16623381, "node_id": "MDQ6VXNlcjE2NjIzMzgx", "avatar_url": "https://avatars.githubusercontent.com/u/16623381?v=4", "gravatar_id": "", "url": "https://api.github.com/users/moranbf", "html_url": "https://github.com/moranbf", "followers_url": "https://api.github.com/users/moranbf/followers", "following_url": "https://api.github.com/users/moranbf/following{/other_user}", "gists_url": "https://api.github.com/users/moranbf/gists{/gist_id}", "starred_url": "https://api.github.com/users/moranbf/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/moranbf/subscriptions", "organizations_url": "https://api.github.com/users/moranbf/orgs", "repos_url": "https://api.github.com/users/moranbf/repos", "events_url": "https://api.github.com/users/moranbf/events{/privacy}", "received_events_url": "https://api.github.com/users/moranbf/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 983327104, "node_id": "MDU6TGFiZWw5ODMzMjcxMDQ=", "url": "https://api.github.com/repos/custom-components/alexa_media_player/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 15, "created_at": "2020-09-03T14:16:22Z", "updated_at": "2020-09-06T09:29:26Z", "closed_at": "2020-09-06T09:29:26Z", "author_association": "NONE", "active_lock_reason": null, "body": "**Describe the bug**\r\nA clear and concise description of what the bug is.\r\n \r\nI've setup the integration and successfully integrated with my user/pass/2factor/captcha, and had everything working as expected with a couple of automations using the media player.  Later I get a notification that I need to re-authenticate, and go to integrations and there are pages of discovered media player integrations, each asking for a re authentication, which if you click on the captcha has expired.\r\n\r\n\r\n**To Reproduce**\r\nSteps to reproduce the behavior:\r\n1. Go to '...'\r\n2. Click on '....'\r\n3. Scroll down to '....'\r\n4. See error\r\n\r\n**Expected behavior**\r\nA clear and concise description of what you expected to happen.\r\n\r\n**Screenshots**\r\nIf applicable, add screenshots to help explain your problem.\r\n\r\n**System details**\r\n - Home-assistant (version): \r\n - Hassio (Yes/No): (Please note you may have to restart hassio 2-3 times to load the latest version of alexapy after an update. This looks like a HA bug).\r\n - alexa_media  (version from `const.py` or HA startup):\r\n - alexapy (version from `pip show alexapy` or HA startup):\r\n\r\n**Logs**\r\nPlease provide [logs](https://github.com/custom-components/alexa_media_player/wiki/FAQ#how-do-i-enable-debug-logging-for-the-component). We'll be most likely asking for them anyway.\r\n\r\n**Additional context**\r\nAdd any other context about the problem here. \r\n", "reactions": {"url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/903/reactions", "total_count": 5, "+1": 5, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/903/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/892", "repository_url": "https://api.github.com/repos/custom-components/alexa_media_player", "labels_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/892/labels{/name}", "comments_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/892/comments", "events_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/892/events", "html_url": "https://github.com/custom-components/alexa_media_player/issues/892", "id": 688347414, "node_id": "MDU6SXNzdWU2ODgzNDc0MTQ=", "number": 892, "title": "Unable to login - There was a problem Enter a valid email or mobile number.", "user": {"login": "alandtse", "id": 7086117, "node_id": "MDQ6VXNlcjcwODYxMTc=", "avatar_url": "https://avatars.githubusercontent.com/u/7086117?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alandtse", "html_url": "https://github.com/alandtse", "followers_url": "https://api.github.com/users/alandtse/followers", "following_url": "https://api.github.com/users/alandtse/following{/other_user}", "gists_url": "https://api.github.com/users/alandtse/gists{/gist_id}", "starred_url": "https://api.github.com/users/alandtse/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alandtse/subscriptions", "organizations_url": "https://api.github.com/users/alandtse/orgs", "repos_url": "https://api.github.com/users/alandtse/repos", "events_url": "https://api.github.com/users/alandtse/events{/privacy}", "received_events_url": "https://api.github.com/users/alandtse/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 983327104, "node_id": "MDU6TGFiZWw5ODMzMjcxMDQ=", "url": "https://api.github.com/repos/custom-components/alexa_media_player/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}, {"id": 1246346849, "node_id": "MDU6TGFiZWwxMjQ2MzQ2ODQ5", "url": "https://api.github.com/repos/custom-components/alexa_media_player/labels/alexapy", "name": "alexapy", "color": "e23ba8", "default": false, "description": "Issue relates to the API"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2020-08-28T20:49:12Z", "updated_at": "2020-08-29T22:25:45Z", "closed_at": "2020-08-29T06:14:24Z", "author_association": "COLLABORATOR", "active_lock_reason": null, "body": "**Describe the bug**\r\nAttempting to log in results in Amazon rejecting the login with \"There was a problem\\n            Enter a valid email or mobile number\\n\"\r\n\r\n**To Reproduce**\r\nSteps to reproduce the behavior:\r\n1. Go to Integrations\r\n2. Add component\r\n3. Clicking on submit results in an error in the logs and the UI stays on the account input screen.\r\n\r\n**Expected behavior**\r\nA clear and concise description of what you expected to happen.\r\nContinuation of login.\r\n\r\n**Screenshots**\r\nIf applicable, add screenshots to help explain your problem.\r\n\r\n**System details**\r\n - Home-assistant (version): 0.114.4\r\n - Hassio (Yes/No): (Please note you may have to restart hassio 2-3 times to load the latest version of alexapy after an update. This looks like a HA bug). Yes.\r\n - alexa_media  (version from `const.py` or HA startup): 2.10.4\r\n - alexapy (version from `pip show alexapy` or HA startup): 1.13.0\r\n\r\n**Logs**\r\nPlease provide [logs](https://github.com/custom-components/alexa_media_player/wiki/FAQ#how-do-i-enable-debug-logging-for-the-component). We'll be most likely asking for them anyway.\r\n\r\n```html\r\n 2020-08-28 11:31:04 DEBUG (MainThread) [custom_components.alexa_media.config_flow] Creating new login\r\n 2020-08-28 11:31:04 DEBUG (MainThread) [alexapy.alexalogin] No valid cookies for log in; using credentials\r\n 2020-08-28 11:31:20 DEBUG (MainThread) [alexapy.alexalogin] GET: redirected from\r\n https://alexa.amazon.com\r\n 2020-08-28 11:31:20 DEBUG (MainThread) [alexapy.alexalogin] GET:\r\n https://www.amazon.com/ap/signin?showRmrMe=1&openid.return_to=https://alexa.amazon.com/&openid.identity=http://specs.openid.net/auth/2.0/identifier_select&openid.assoc_handle=amzn_dp_project_dee&ope id.mode=checkid_setup&openid.claimed_id=http://specs.openid.net/auth/2.0/identifier_select&openid.ns=http://specs.openid.net/auth/2.0& with\r\n <CIMultiDictProxy('Host': 'www.amazon.com', 'User-Agent': 'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_14_6) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/84.0.4147.135 Safari/537.36', 'Accept': 'text html,application/xhtml+xml, application/xml;q=0.9,*/*;q=0.8', 'Accept-Language': '*', 'Accept-Encoding': 'gzip, deflate')>\r\n  returned 200:OK with response <CIMultiDictProxy('Content-Type': 'text/html;charset=UTF-8', 'Transfer-Encoding': 'chunked', 'Connection': 'keep-alive', 'Server': 'Server', 'Date': 'Fri, 28 Aug 2020 18:31:21 GMT', 'x-amz-rid': '1Y15FJG7XAE1Y0QBG24W', 'Set-Cookie': 'ap-fid=\"\"; Domain=.amazon.com; Expires=Thu, 01-Jan-1970 00:00:10 GMT; Path=/ap/; Secure', 'Set-Cookie': 'session-id=136-4909744-0586147; Domain=.amazon.com; Expires=Sat, 28-Aug-2021 18:31:21 GMT; Path=/; Secure', 'Set-Cookie': 'session-id-time=2229359481l; Domain=.amazon.com; Expires=Sat, 28-Aug-2021 18:31:21 GMT; Path=/; Secure', 'X-XSS-Protection': '1', 'X-Content-Type-Options': 'nosniff', 'x-ua-compatible': 'IE=edge', 'Pragma': 'No-cache', 'Cache-Control': 'max-age=0, no-cache, no-store, must-revalidate', 'Expires': 'Thu, 01 Jan 1970 00:00:00 GMT', 'Strict-Transport-Security': 'max-age=47474747; includeSubDomains; preload', 'Vary': 'Content-Type,Accept-Encoding,X-Amzn-CDN-Cache,X-Amzn-AX-Treatment,User-Agent', 'p3p': 'policyref=\"http://www.amazon.com/w3c/p3p.xml\",CP=\"CAO DSP LAW CUR ADM IVAo IVDo CONo OTPo OUR DELi PUBi OTRi BUS PHY ONL UNI PUR FIN COM NAV INT DEM CNT STA HEA PRE LOC GOV OTC \"', 'X-Frame-Options': 'SAMEORIGIN', 'X-Cache': 'Miss from cloudfront', 'Via': '1.1 8e223aee1ca3f4c950e8d2a26c8a546b.cloudfront.net (CloudFront)', 'X-Amz-Cf-Pop': 'LAX3-C3', 'X-Amz-Cf-Id': 'gQM4D9j88I80BBAVZzHDfzq5o3FLV 47bDvyhbmKDPWZk7dtDkIoww==')>\r\n 2020-08-28 11:31:20 DEBUG (MainThread) [alexapy.alexalogin] Processing https://www.amazon.com/ap/signin?showRmrMe=1&openid.return_to=https://alexa.amazon.com/&openid.identity=http://specs.openid.net/auth/2.0/identifier_select&openid.assoc_handle=amzn_dp_project_dee&openid.mode=checkid_setup&openid.claimed_id=http://specs.openid.net/auth/2.0/identifier_select&openid.ns=http://specs.openid.net/au h/2.0&\r\n 2020-08-28 11:31:20 DEBUG (MainThread) [alexapy.alexalogin] Links: {'0': ('Forgot password?', 'https://www.amazon.com/ap/forgotpassword?showRememberMe=true&showRmrMe=1&openid.identity=http%3A%2F%2Fspecs.openid.net%2Fauth%2F2.0%2Fidentifier_select&pageId=amzn_dp_project_dee&openid.return_to=https%3A%2F%2Falexa.amazon.com%2F&prevRID=1Y15FJG7XAE1Y0QBG24W&openid.assoc_handle=amzn_dp_project_dee&openid.mode=checkid_setup&prepopulatedLoginId=&failedSignInCount=0&openid.claimed_id=http%3A%2F%2Fspecs.openid.net%2Fauth%2F2.0%2Fidentifier_select&openid.ns=http%3A%2F%2Fspecs.openid.net%2Fauth%2F2.0'), '1': ('Conditions of Use', 'https://alexa.amazon.com/conditions_of_use_mobile?pop-up=1'), '2': ('Privacy Notice', 'https://alexa.amazon.com/privacy_policy_mobile'), '3': ('Create a new Amazon account', 'https://www.amazon.com/ap/register?showRememberMe=true&showRmrMe=1&openid.return_to=https%3A%2F%2Falexa.amazon.com%2F&prevRID=1Y15FJG7XAE1Y0QBG24W&openid.identity=http%3A%2F%2Fspecs.openid.net%2Fauth%2F2.0%2Fidentifier_select&openid.assoc_handle=amzn_dp_project_dee&openid.mode=checkid_setup&prepopulatedLoginId=&failedSignInCount=0&openid.claimed_id=http%3A%2F%2Fspecs.openid.net%2Fauth%2F2. %2Fidentifier_select&pageId=amzn_dp_project_dee&openid.ns=http%3A%2F%2Fspecs.openid.net%2Fauth%2F2.0')}\r\n 2020-08-28 11:31:20 DEBUG (MainThread) [alexapy.alexalogin] Found standard login page\r\n 2020-08-28 11:31:20 DEBUG (MainThread) [alexapy.alexalogin] Found form to process: <form action=\"https://www.amazon.com/ap/signin/136-4909744-0586147\" class=\"auth-validate-form auth-clearable-form\"  ethod=\"post\" name=\"signIn\" novalidate=\"\">\r\n <input name=\"appActionToken\" type=\"hidden\" value=\"3g3dhq7xoDBOsbo360ppDUvzyGAj3D\"/><input name=\"appAction\" type=\"hidden\" value=\"SIGNIN\"/>\r\n <input name=\"openid.return_to\" type=\"hidden\" value=\"ape:aHR0cHM6Ly9hbGV4YS5hbWF6b24uY29tLw==\"/>\r\n <input name=\"prevRID\" type=\"hidden\" value=\"ape:MVkxNUZKRzdYQUUxWTBRQkcyNFc=\"/>\r\n <input name=\"workflowState\" type=\"hidden\" value=\"eyJ6aXAiOiJERUYiLCJlbmMiOiJBMjU2R0NNIiwiYWxnIjoiQTI1NktXIn0.EhRm958TJ32NLGf-KX3KZRjtKIAGkOfDu6WZ-HULu7AbqRcjVcKrPw.e6c9lRH32I8Xhq9b.ElxyR6qrpdR25JkZaDPdizzWg4W9fAmeGlWFyJQl0SWlZQ-p5BFbTdcdj-ngboNspJWHVgBILSQygtgSv-hqo_QF1TR856saTVtuxdHOMt6cRRRwGbys0bz2Ne22aHZ4IlcWuR5XfMamURpXpx2R5o4R8QClC-2R8Q81U1e72A3fXjAtcwDfXGn1yRL_Yld0_31w6rN2FfLUaSrolSym-esF XXisEwPNGaAo5xrlZBOeVrpR2SknPjYFi5RFaQ3FzKTMkcJ5XlMp41kTDrzaj_BR_Ts3syRYqaJPDgRiw.b0P45VS9n361GR659cRjRg\"/>\r\n <h1 class=\"a-spacing-micro a-spacing-top-small a-text-left\">\r\n   Sign-In\r\n </h1>\r\n <div class=\"a-section a-spacing-base a-text-right\">\r\n <a class=\"a-link-normal\" href=\"https://www.amazon.com/ap/forgotpassword?showRememberMe=true&amp;showRmrMe=1&amp;openid.identity=http%3A%2F%2Fspecs.openid.net%2Fauth%2F2.0%2Fidentifier_select&amp;pageId=amzn_dp_project_dee&amp;openid.return_to=https%3A%2F%2Falexa.amazon.com%2F&amp;prevRID=1Y15FJG7XAE1Y0QBG24W&amp;openid.assoc_handle=amzn_dp_project_dee&amp;openid.mode=checkid_setup&amp;prepopulatedLoginId=&amp;failedSignInCount=0&amp;openid.claimed_id=http%3A%2F%2Fspecs.openid.net%2Fauth%2F2.0%2Fidentifier_select&amp;openid.ns=http%3A%2F%2Fspecs.openid.net%2Fauth%2F2.0\" id=\"auth-fpp-link-bo tom\" rel=\"noopener\" tabindex=\"9\" target=\"_top\">\r\n   Forgot password?\r\n </a>\r\n </div>\r\n <div class=\"a-input-text-group a-spacing-medium a-spacing-top-micro\">\r\n <label class=\"a-form-label auth-mobile-label\" for=\"ap_email\">\r\n       Email (phone for mobile accounts)\r\n     </label>\r\n <div class=\"a-input-text-wrapper auth-required-field auth-fill-claim\"><input autocapitalize=\"off\" autocorrect=\"off\" id=\"ap_email\" maxlength=\"128\" name=\"email\" placeholder=\"Email (phone for mobile ac ounts)\" tabindex=\"1\" type=\"email\"/></div>\r\n <div class=\"auth-clear-icons\" id=\"ap_email_icon\">\r\n <i class=\"a-icon a-icon-close\" role=\"img\"></i>\r\n </div>\r\n <script data-a-state='{\"key\":\"auth-show-password\"}' type=\"a-state\">{\"isShowPasswordEnabled\":true,\"showPasswordChecked\":false}</script>\r\n <label class=\"a-form-label auth-mobile-label\" for=\"ap_password\">\r\n   Amazon password\r\n </label>\r\n <div class=\"a-input-text-wrapper auth-required-field auth-password-container auth-password auth-fill-password\" id=\"auth-password-container\"><input id=\"ap_password\" maxlength=\"1024\" name=\"password\" p aceholder=\"Amazon password\" tabindex=\"2\" type=\"password\"/></div>\r\n <div class=\"auth-clear-icons\" id=\"ap_password_icon\">\r\n <i class=\"a-icon a-icon-close\" role=\"img\"></i>\r\n </div>\r\n <div aria-live=\"assertive\" class=\"a-box a-alert-inline a-alert-inline-error auth-inlined-error-message a-spacing-top-mini\" id=\"auth-password-missing-alert\" role=\"alert\"><div class=\"a-box-inner a-ale t-container\"><i class=\"a-icon a-icon-alert\"></i><div class=\"a-alert-content\">\r\n   Enter your password\r\n </div></div></div>\r\n <div class=\"a-row auth-visible-password-container auth-show-password-empty\">\r\n <span class=\"a-size-small a-color-secondary auth-visible-password\"></span>\r\n </div>\r\n <input id=\"ap_show_password_checked\" name=\"showPasswordChecked\" type=\"hidden\" value=\"false\"/>\r\n <input name=\"encryptedPasswordExpected\" type=\"hidden\"/>\r\n <script data-a-state='{\"key\":\"sif-encryption-profile\"}' type=\"a-state\">{\"sifProfile\":\"AuthenticationPortalSigninNA\"}</script>\r\n <script async=\"\" src=\"https://static.siege-amazon.com/prod/profiles/AuthenticationPortalSigninNA.js\" type=\"text/javascript\">\r\n </script>\r\n </div>\r\n <div class=\"a-row\">\r\n <div class=\"a-column a-span12 a-spacing-medium\">\r\n <div class=\"a-checkbox a-checkbox-fancy a-control-row a-touch-checkbox auth-show-password-checkbox\" id=\"auth-show-password-checkbox-container\"><label for=\"auth-show-password-checkbox\"><input id=\"aut -show-password-checkbox\" name=\"\" tabindex=\"3\" type=\"checkbox\" value=\"\"/><i class=\"a-icon a-icon-checkbox\"></i><span class=\"a-label a-checkbox-label\">\r\n           Show password\r\n         </span></label></div>\r\n </div>\r\n </div>\r\n <div class=\"a-row a-spacing-base\">\r\n <div class=\"a-checkbox a-checkbox-fancy a-control-row a-touch-checkbox\" data-a-input-name=\"rememberMe\"><label><input name=\"rememberMe\" tabindex=\"4\" type=\"checkbox\" value=\"true\"/><i class=\"a-icon a-i on-checkbox\"></i><span class=\"a-label a-checkbox-label\">\r\n     Keep me signed in.\r\n     <span class=\"a-declarative\" data-a-modal='{\"max-width\":\"500px\",\"width\":\"95%\",\"name\":\"remember-me-detail-link-modal\",\"header\":\"\\\"Keep Me Signed In\\\" Checkbox\"}' data-action=\"a-modal\">\r\n <a class=\"a-link-normal\" href=\"#\" id=\"remember_me_learn_more_link\">\r\n         Details\r\n       </a>\r\n </span>\r\n <div class=\"a-popover-preload\" id=\"a-popover-remember-me-detail-link-modal\">\r\n <div class=\"a-section a-spacing-large a-spacing-top-mini\">\r\n <p>\r\n <p>Choosing \"Keep me signed in\" reduces the number of times you're asked to Sign-In on this device.</p>\r\n <p>To keep your account secure, use this option only on your personal devices.</p>\r\n </p>\r\n </div>\r\n </div>\r\n </span></label></div>\r\n </div>\r\n <div class=\"a-row\">\r\n </div>\r\n <div class=\"a-section\">\r\n <div class=\"a-button-stack\">\r\n <span class=\"a-button a-button-span12 a-button-primary auth-share-credential-off\" id=\"auth-signin-button\"><span class=\"a-button-inner\"><input aria-labelledby=\"auth-signin-button-announce\" class=\"a-b tton-input\" id=\"signInSubmit\" tabindex=\"6\" type=\"submit\"/><span aria-hidden=\"true\" class=\"a-button-text\" id=\"auth-signin-button-announce\">\r\n             Sign-In\r\n           </span></span></span>\r\n <div class=\"a-section a-spacing-medium\">\r\n <div class=\"a-row a-spacing-top-medium a-size-small\" id=\"legalTextRow\">\r\n   By continuing, you agree to Amazon's <a href=\"/conditions_of_use_mobile?pop-up=1\">Conditions of Use</a> and <a href=\"/privacy_policy_mobile\">Privacy Notice</a>.\r\n </div>\r\n </div>\r\n <script>\r\n   function cf() {\r\n     if (typeof window.uet === 'function') {\r\n       uet('cf');\r\n     }\r\n     if (window.embedNotification &&\r\n       typeof window.embedNotification.onCF === 'function') {\r\n       embedNotification.onCF();\r\n     }\r\n   }\r\n </script>\r\n <script type=\"text/javascript\">cf()</script>\r\n <div class=\"a-section a-spacing-medium a-text-center\">\r\n <div class=\"a-divider a-divider-break\"><h5>New to Amazon?</h5></div>\r\n <span class=\"a-button a-button-span12 a-button-base\" id=\"auth-create-account-link\"><span class=\"a-button-inner\"><a class=\"a-button-text\" href=\"https://www.amazon.com/ap/register?showRememberMe=true&amp;showRmrMe=1&amp;openid.return_to=https%3A%2F%2Falexa.amazon.com%2F&amp;prevRID=1Y15FJG7XAE1Y0QBG24W&amp;openid.identity=http%3A%2F%2Fspecs.openid.net%2Fauth%2F2.0%2Fidentifier_select&amp;openid.assoc_handle=amzn_dp_project_dee&amp;openid.mode=checkid_setup&amp;prepopulatedLoginId=&amp;failedSignInCount=0&amp;openid.claimed_id=http%3A%2F%2Fspecs.openid.net%2Fauth%2F2.0%2Fidentifier_select&amp pageId=amzn_dp_project_dee&amp;openid.ns=http%3A%2F%2Fspecs.openid.net%2Fauth%2F2.0\" id=\"createAccountSubmit\" role=\"button\" tabindex=\"7\">\r\n           Create a new Amazon account\r\n         </a></span></span>\r\n </div>\r\n </div>\r\n </div>\r\n </form>\r\n 2020-08-28 11:31:20 DEBUG (MainThread) [alexapy.alexalogin] Found post url to https://www.amazon.com/ap/signin/136-4909744-0586147\r\n 2020-08-28 11:31:20 DEBUG (MainThread) [alexapy.alexalogin] Preparing form submission to https://www.amazon.com/ap/signin/136-4909744-0586147 with input data: {}\r\n 2020-08-28 11:31:20 DEBUG (MainThread) [alexapy.alexalogin] WARNING: Detected missing params: ['encryptedPasswordExpected']\r\n 2020-08-28 11:31:20 DEBUG (MainThread) [alexapy.alexalogin] Session Cookies:\r\n amazon.com: expires:Sat, 28-Aug-2021 18:31:21 GMT max-age: session-id=136-4909744-0586147\r\n amazon.com: expires:Sat, 28-Aug-2021 18:31:21 GMT max-age: session-id-time=2229359481l\r\n 2020-08-28 11:31:20 DEBUG (MainThread) [alexapy.alexalogin] Submit Form Data: {\"appActionToken\": \"3g3dhq7xoDBOsbo360ppDUvzyGAj3D\", \"appAction\": \"SIGNIN\", \"openid.return_to\": \"ape:aHR0cHM6Ly9hbGV4YS5hbWF6b24uY29tLw==\", \"prevRID\": \"ape:MVkxNUZKRzdYQUUxWTBRQkcyNFc=\", \"workflowState\": \"eyJ6aXAiOiJERUYiLCJlbmMiOiJBMjU2R0NNIiwiYWxnIjoiQTI1NktXIn0.EhRm958TJ32NLGf-KX3KZRjtKIAGkOfDu6WZ-HULu7AbqRcjVcKrPw.e6c9lRH32I8Xhq9b.ElxyR6qrpdR25JkZaDPdizzWg4W9fAmeGlWFyJQl0SWlZQ-p5BFbTdcdj-ngboNspJWHVgBILSQygtgSv-hqo_QF1TR856saTVtuxdHOMt6cRRRwGbys0bz2Ne22aHZ4IlcWuR5XfMamURpXpx2R5o4R8QClC-2R8Q81U1e72A3fXjAtcwDfXGn1yRL_Yld0_31w6rN2FfLUaSrolSym-esFeXXisEwPNGaAo5xrlZBOeVrpR2SknPjYFi5RFaQ3FzKTMkcJ5XlMp41kTDrzaj_BR_Ts3syRYqaJPDgRiw.b0P45VS9n361GR659cRjRg\", \"email\": \"redacted email\", \"password\": \"redacted\", \"showPasswordChecked\": \"false\", \"encryptedPasswordExpected\": \"\", \"rememberMe\": \"true\", \"metadata1\": \"true\"}\r\n 2020-08-28 11:31:20 DEBUG (MainThread) [alexapy.alexalogin] Header: {\"User-Agent\": \"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_14_6) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/84.0.4147.135 Safari/537.36\", \"Accept\": \"text/html,application/xhtml+xml, application/xml;q=0.9,*/*;q=0.8\", \"Accept-Language\": \"*\", \"Referer\": \"https://www.amazon.com/ap/signin?showRmrMe=1&openid.return_to=https://alexa.amazon.com/&openid.identity=http://specs.openid.net/auth/2.0/identifier_select&openid.assoc_handle=amzn_dp_project_dee&openid.mode=checkid_setup&openid.claimed_id=http://specs.openid.net/auth/2.0/id ntifier_select&openid.ns=http://specs.openid.net/auth/2.0&\"}\r\n 2020-08-28 11:31:21 DEBUG (MainThread) [alexapy.alexalogin] POST:\r\n https://www.amazon.com/ap/signin/136-4909744-0586147 with\r\n <CIMultiDictProxy('Host': 'www.amazon.com', 'User-Agent': 'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_14_6) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/84.0.4147.135 Safari/537.36', 'Accept': 'text/html,application/xhtml+xml, application/xml;q=0.9,*/*;q=0.8', 'Accept-Language': '*', 'Referer': 'https://www.amazon.com/ap/signin?showRmrMe=1&openid.return_to=https://alexa.amazon.com/&openid.identity=http://specs.openid.net/auth/2.0/identifier_select&openid.assoc_handle=amzn_dp_project_dee&openid.mode=checkid_setup&openid.claimed_id=http://specs.openid.net/auth/2.0/identifier_select&openid.ns=http://specs.openid.net/auth/2.0&', 'Accept-Encoding': 'gzip, deflate', 'Cookie': 'session-id=136-4909744-0586147; session-id-time=2229359481l', 'Content-Length': '774', 'Content-Type': 'application x-www-form-urlencoded')>\r\n  returned 200:OK with response <CIMultiDictProxy('Content-Type': 'text/html;charset=UTF-8', 'Transfer-Encoding': 'chunked', 'Connection': 'keep-alive', 'Server': 'Server', 'Date': 'Fri, 28 Aug 2020 18:31:21 GMT', 'x-amz-rid': 'XTQ0EWPPKHDK1K8FZC21', 'Set-Cookie': 'ap-fid=\"\"; Domain=.amazon.com; Expires=Thu, 01-Jan-1970 00:00:10 GMT; Path=/ap/; Secure', 'Set-Cookie': 'session-id=136-4909744-0586147; Domain=.amazon.com; Expires=Sat, 28-Aug-2021 18:31:21 GMT; Path=/; Secure', 'Set-Cookie': 'session-id-time=2229359481l; Domain=.amazon.com; Expires=Sat, 28-Aug-2021 18:31:21 GMT; Path=/; Secure', 'Set-Cookie': 'ubid-main=130-3865067-3544510; Domain=.amazon.com; Expires=Sat, 28-Aug-2021 18:31:21 GMT; Path=/; Secure', 'X-XSS-Protection': '1', 'X-Content-Type-Options': 'nosniff', 'x-ua-compatible': 'IE=edge', 'Pragma': 'No-cache', 'Cache-Control': 'max-age=0, no-cache, no-store, must-revalidate', 'Expires': 'Thu, 01 Jan 1970 00:00:00 GMT', 'Strict-Transport-Security': 'max-age=47474747; includeSubDomains; preload', 'Vary': 'Content-Type,Accept-Encoding,X-Amzn-CDN-Cache,X-Amzn-AX-Treatment,User-Agent', 'p3p': 'policyref=\"http://www.amazon.com/w3c/p3p.xml\",CP=\"CAO DSP LAW CUR ADM IVAo IVDo CONo OTPo OUR DELi PUBi OTRi BUS PHY ONL UNI PUR FIN COM NAV INT DEM CNT STA HEA PRE LOC GOV OTC \"', 'X-Frame-Options': 'SAMEORIGIN', 'X-Cache': 'Miss from cloudfront', 'Via': '1.1 8e223aee1ca3f c950e8d2a26c8a546b.cloudfront.net (CloudFront)', 'X-Amz-Cf-Pop': 'LAX3-C3', 'X-Amz-Cf-Id': 'g7TfQNftwR27sPFak4cmLNrWyP4PFROLxerJFJuCEG2NxY4BoSyAKw==')>\r\n 2020-08-28 11:31:21 DEBUG (MainThread) [alexapy.alexalogin] Processing https://www.amazon.com/ap/signin/136-4909744-0586147\r\n 2020-08-28 11:31:21 DEBUG (MainThread) [alexapy.alexalogin] Links: {'0': ('Forgot password?', 'https://www.amazon.com/ap/forgotpassword?showRememberMe=true&showRmrMe=1&openid.identity=http%3A%2F%2Fspecs.openid.net%2Fauth%2F2.0%2Fidentifier_select&pageId=amzn_dp_project_dee&openid.return_to=https%3A%2F%2Falexa.amazon.com%2F&prevRID=XTQ0EWPPKHDK1K8FZC21&openid.assoc_handle=amzn_dp_project_dee&openid.mode=checkid_setup&prepopulatedLoginId=eyJjaXBoZXIiOiJFUkRVQmJDU1RNcmd3ZlBzOFpjbEtwRTlYdk04MmY0a3E0MzBsN3lYaFU4PSIsIklWIjoiQjhxRFF6TWl0TXhKQ3lsVEx0SkllZz09IiwidmVyc2lvbiI6MX0%3D&failedSignInCount=1&openid.claimed_id=http%3A%2F%2Fspecs.openid.net%2Fauth%2F2.0%2Fidentifier_select&openid.ns=http%3A%2F%2Fspecs.openid.net%2Fauth%2F2.0&timestamp=1598639481000'), '1': ('Conditions of Use', 'https://alexa.amazon.com/conditions_of_use_mobile?pop-up=1'), '2': ('Privacy Notice', 'https://alexa.amazon.com/privacy_policy_mobile'), '3': ('Create a new Amazon account', 'https://www.amazon.com/ap/register?showRememberMe=true&showRmrMe=1&openid.identity=http%3A%2F%2Fspecs.openid.net%2Fauth%2F2.0%2Fidentifier_select&pageId=amzn_dp_project_dee&openid.return_to=https%3A%2F%2Falexa.amazon.com%2F&prevRID=XTQ0EWPPKHDK1K8FZC21&openid.assoc_handle=amzn_dp_project_dee&openid.mode=checkid_setup&prepopulatedLoginId=eyJjaXBoZXIiOiJZRUlXY2drd282RDVJUUlLdC83b0lQNXg3bS83Q3BZRkV1enl1Sm1taHlnPSIsIklWIjoiMUkyKzgrd2NFbFBqRnJJZVp2amwxZz09IiwidmVyc2lvbiI6MX0%3D&failedSignInCount=1&openid.claimed_id=http%3A%2F%2Fspecs.openid.net%2Fauth%2F2.0%2Fidentifier_select&openid.ns=http%3A%2F%2Fspecs.openid.net%2Fauth%2F .0&timestamp=1598639481000')}\r\n 2020-08-28 11:31:21 DEBUG (MainThread) [alexapy.alexalogin] Error message: There was a problem\r\n             Enter a valid email or mobile number\r\n\r\n 2020-08-28 11:31:21 DEBUG (MainThread) [alexapy.alexalogin] Found standard login page\r\n 2020-08-28 11:31:21 DEBUG (MainThread) [alexapy.alexalogin] Found form to process: <form action=\"https://www.amazon.com/ap/signin\" class=\"auth-validate-form auth-clearable-form\" method=\"post\" name=\" ignIn\" novalidate=\"\">\r\n <input name=\"appActionToken\" type=\"hidden\" value=\"3g3dhq7xoDBOsbo360ppDUvzyGAj3D\"/><input name=\"appAction\" type=\"hidden\" value=\"SIGNIN\"/>\r\n <input name=\"metadata1\" type=\"hidden\" value=\"ape:dHJ1ZQ==\"/>\r\n <input name=\"openid.return_to\" type=\"hidden\" value=\"ape:aHR0cHM6Ly9hbGV4YS5hbWF6b24uY29tLw==\"/>\r\n <input name=\"prevRID\" type=\"hidden\" value=\"ape:WFRRMEVXUFBLSERLMUs4RlpDMjE=\"/>\r\n <input name=\"workflowState\" type=\"hidden\" value=\"eyJ6aXAiOiJERUYiLCJlbmMiOiJBMjU2R0NNIiwiYWxnIjoiQTI1NktXIn0.HJc2usfsRy582tHVExyHsrkeWq4e8UAlJUm8vvixeRwmodW-iZrO5Q.h_yptYEIiMhVikak.v6RMiY00TIbaRHqS6lhusvuPn8tnCX-2KcRCCaVAaxPiWQnQblRUXePRHQyQfrt_EoPeaY2jnz8Qpr083TS_hJ52_W9j_TkTQp33wNLRDbLvI3MYpc8O1lr9KuZHLQD6I5135wJZVbOXJaodklP2ACOeYXDnT2ABnr0lnbMIBa6kGF6aDTRAMcphFkeuy4I2EIVMH1hHqk48A9eOufXK221U4wnOW0P4hPUBtxJe63aJ7IvDJ-_nVuOgwEHe54jGbCrQ81tzCVKEEr6UUjnN8BbP6gRhQMqg34rNmEDp8lRlgxMXaHiid5YhYEy9s5RAH_9lQ2j4N3TTz9xJw8IBRicV6CQa9HnFEfCryWH5txUEIvkr2R3uDxEdZHetwAQ6RU0HPZsUELcKTnH-7fr4dpiwL8qFXJi U3VADaU-yXreSwfC-SlF71uxHMNh14ykM9OU.jPZTSAXaH6DMWXIzEbKggA\"/>\r\n <h1 class=\"a-spacing-micro a-spacing-top-small a-text-left\">\r\n   Sign-In\r\n </h1>\r\n <div class=\"a-section a-spacing-base a-text-right\">\r\n <a class=\"a-link-normal\" href=\"https://www.amazon.com/ap/forgotpassword?showRememberMe=true&amp;showRmrMe=1&amp;openid.identity=http%3A%2F%2Fspecs.openid.net%2Fauth%2F2.0%2Fidentifier_select&amp;pageId=amzn_dp_project_dee&amp;openid.return_to=https%3A%2F%2Falexa.amazon.com%2F&amp;prevRID=XTQ0EWPPKHDK1K8FZC21&amp;openid.assoc_handle=amzn_dp_project_dee&amp;openid.mode=checkid_setup&amp;prepopulatedLoginId=eyJjaXBoZXIiOiJFUkRVQmJDU1RNcmd3ZlBzOFpjbEtwRTlYdk04MmY0a3E0MzBsN3lYaFU4PSIsIklWIjoiQjhxRFF6TWl0TXhKQ3lsVEx0SkllZz09IiwidmVyc2lvbiI6MX0%3D&amp;failedSignInCount=1&amp;openid.claimed_id=http%3A%2F%2Fspecs.openid.net%2Fauth%2F2.0%2Fidentifier_select&amp;openid.ns=http%3A%2F%2Fspecs.openid.net%2Fauth%2F2.0&amp;timestamp=1598639481000\" id=\"auth-fpp-link-bottom\" rel=\"noopener\" tabindex=\"9\" target=\"_top\">\r\n   Forgot password?\r\n </a>\r\n </div>\r\n <div class=\"a-input-text-group a-spacing-medium a-spacing-top-micro\">\r\n <label class=\"a-form-label auth-mobile-label\" for=\"ap_email\">\r\n       Email (phone for mobile accounts)\r\n     </label>\r\n <div class=\"a-input-text-wrapper auth-required-field auth-fill-claim\"><input autocapitalize=\"off\" autocorrect=\"off\" id=\"ap_email\" maxlength=\"128\" name=\"email\" placeholder=\"Email (phone for mobile ac ounts)\" tabindex=\"1\" type=\"email\" value=\"redacted email\"/></div>\r\n <div class=\"auth-clear-icons\" id=\"ap_email_icon\">\r\n <i class=\"a-icon a-icon-close\" role=\"img\"></i>\r\n </div>\r\n <script data-a-state='{\"key\":\"auth-show-password\"}' type=\"a-state\">{\"isShowPasswordEnabled\":true,\"showPasswordChecked\":false}</script>\r\n <label class=\"a-form-label auth-mobile-label\" for=\"ap_password\">\r\n   Amazon password\r\n </label>\r\n <div class=\"a-input-text-wrapper auth-required-field auth-password-container auth-password auth-fill-password\" id=\"auth-password-container\"><input id=\"ap_password\" maxlength=\"1024\" name=\"password\" p aceholder=\"Amazon password\" tabindex=\"2\" type=\"password\"/></div>\r\n <div class=\"auth-clear-icons\" id=\"ap_password_icon\">\r\n <i class=\"a-icon a-icon-close\" role=\"img\"></i>\r\n </div>\r\n <div aria-live=\"assertive\" class=\"a-box a-alert-inline a-alert-inline-error auth-inlined-error-message a-spacing-top-mini\" id=\"auth-password-missing-alert\" role=\"alert\"><div class=\"a-box-inner a-ale t-container\"><i class=\"a-icon a-icon-alert\"></i><div class=\"a-alert-content\">\r\n   Enter your password\r\n </div></div></div>\r\n <div class=\"a-row auth-visible-password-container auth-show-password-empty\">\r\n <span class=\"a-size-small a-color-secondary auth-visible-password\"></span>\r\n </div>\r\n <input id=\"ap_show_password_checked\" name=\"showPasswordChecked\" type=\"hidden\" value=\"false\"/>\r\n <input name=\"encryptedPasswordExpected\" type=\"hidden\"/>\r\n <script data-a-state='{\"key\":\"sif-encryption-profile\"}' type=\"a-state\">{\"sifProfile\":\"AuthenticationPortalSigninNA\"}</script>\r\n <script async=\"\" src=\"https://static.siege-amazon.com/prod/profiles/AuthenticationPortalSigninNA.js\" type=\"text/javascript\">\r\n </script>\r\n </div>\r\n <div class=\"a-row\">\r\n <div class=\"a-column a-span12 a-spacing-medium\">\r\n <div class=\"a-checkbox a-checkbox-fancy a-control-row a-touch-checkbox auth-show-password-checkbox\" id=\"auth-show-password-checkbox-container\"><label for=\"auth-show-password-checkbox\"><input id=\"aut -show-password-checkbox\" name=\"\" tabindex=\"3\" type=\"checkbox\" value=\"\"/><i class=\"a-icon a-icon-checkbox\"></i><span class=\"a-label a-checkbox-label\">\r\n           Show password\r\n         </span></label></div>\r\n </div>\r\n </div>\r\n <div class=\"a-row a-spacing-base\">\r\n <div class=\"a-checkbox a-checkbox-fancy a-control-row a-touch-checkbox\" data-a-input-name=\"rememberMe\"><label><input checked=\"\" name=\"rememberMe\" tabindex=\"4\" type=\"checkbox\" value=\"true\"/><i class= a-icon a-icon-checkbox\"></i><span class=\"a-label a-checkbox-label\">\r\n     Keep me signed in.\r\n     <span class=\"a-declarative\" data-a-modal='{\"max-width\":\"500px\",\"width\":\"95%\",\"name\":\"remember-me-detail-link-modal\",\"header\":\"\\\"Keep Me Signed In\\\" Checkbox\"}' data-action=\"a-modal\">\r\n <a class=\"a-link-normal\" href=\"#\" id=\"remember_me_learn_more_link\">\r\n         Details\r\n       </a>\r\n </span>\r\n <div class=\"a-popover-preload\" id=\"a-popover-remember-me-detail-link-modal\">\r\n <div class=\"a-section a-spacing-large a-spacing-top-mini\">\r\n <p>\r\n <p>Choosing \"Keep me signed in\" reduces the number of times you're asked to Sign-In on this device.</p>\r\n <p>To keep your account secure, use this option only on your personal devices.</p>\r\n </p>\r\n </div>\r\n </div>\r\n </span></label></div>\r\n </div>\r\n <div class=\"a-row\">\r\n </div>\r\n <div class=\"a-section\">\r\n <div class=\"a-button-stack\">\r\n <span class=\"a-button a-button-span12 a-button-primary auth-share-credential-off\" id=\"auth-signin-button\"><span class=\"a-button-inner\"><input aria-labelledby=\"auth-signin-button-announce\" class=\"a-b tton-input\" id=\"signInSubmit\" tabindex=\"6\" type=\"submit\"/><span aria-hidden=\"true\" class=\"a-button-text\" id=\"auth-signin-button-announce\">\r\n             Sign-In\r\n           </span></span></span>\r\n <div class=\"a-section a-spacing-medium\">\r\n <div class=\"a-row a-spacing-top-medium a-size-small\" id=\"legalTextRow\">\r\n   By continuing, you agree to Amazon's <a href=\"/conditions_of_use_mobile?pop-up=1\">Conditions of Use</a> and <a href=\"/privacy_policy_mobile\">Privacy Notice</a>.\r\n </div>\r\n </div>\r\n <script>\r\n   function cf() {\r\n     if (typeof window.uet === 'function') {\r\n       uet('cf');\r\n     }\r\n     if (window.embedNotification &&\r\n       typeof window.embedNotification.onCF === 'function') {\r\n       embedNotification.onCF();\r\n     }\r\n   }\r\n </script>\r\n <script type=\"text/javascript\">cf()</script>\r\n <div class=\"a-section a-spacing-medium a-text-center\">\r\n <div class=\"a-divider a-divider-break\"><h5>New to Amazon?</h5></div>\r\n <span class=\"a-button a-button-span12 a-button-base\" id=\"auth-create-account-link\"><span class=\"a-button-inner\"><a class=\"a-button-text\" href=\"https://www.amazon.com/ap/register?showRememberMe=true&amp;showRmrMe=1&amp;openid.identity=http%3A%2F%2Fspecs.openid.net%2Fauth%2F2.0%2Fidentifier_select&amp;pageId=amzn_dp_project_dee&amp;openid.return_to=https%3A%2F%2Falexa.amazon.com%2F&amp;prevRID=XTQ0EWPPKHDK1K8FZC21&amp;openid.assoc_handle=amzn_dp_project_dee&amp;openid.mode=checkid_setup&amp;prepopulatedLoginId=eyJjaXBoZXIiOiJZRUlXY2drd282RDVJUUlLdC83b0lQNXg3bS83Q3BZRkV1enl1Sm1taHlnPSIsIklWIjoiMUkyKzgrd2NFbFBqRnJJZVp2amwxZz09IiwidmVyc2lvbiI6MX0%3D&amp;failedSignInCount=1&amp;openid.claimed_id=http%3A%2F%2Fspecs.openid.net%2Fauth%2F2.0%2Fidentifier_select&amp;openid.ns=http%3A%2F%2Fspecs. penid.net%2Fauth%2F2.0&amp;timestamp=1598639481000\" id=\"createAccountSubmit\" role=\"button\" tabindex=\"7\">\r\n           Create a new Amazon account\r\n         </a></span></span>\r\n </div>\r\n </div>\r\n </div>\r\n </form>\r\n 2020-08-28 11:31:21 DEBUG (MainThread) [alexapy.alexalogin] Found post url to https://www.amazon.com/ap/signin\r\n 2020-08-28 11:31:21 DEBUG (MainThread) [custom_components.alexa_media.config_flow] Testing login status: {'error_message': 'There was a problem\\n            Enter a valid email or mobile number\\n          '}\r\n\r\n```\r\n\r\n**Additional context**\r\nIt appears Amazon may have changed their login system as there is now an encrypted password field generated via JavaScript.", "reactions": {"url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/892/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/892/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/848", "repository_url": "https://api.github.com/repos/custom-components/alexa_media_player", "labels_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/848/labels{/name}", "comments_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/848/comments", "events_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/848/events", "html_url": "https://github.com/custom-components/alexa_media_player/issues/848", "id": 662615876, "node_id": "MDU6SXNzdWU2NjI2MTU4NzY=", "number": 848, "title": "Cannot set volume, 400 Bad Request with Echo devices with multiple accounts", "user": {"login": "neoice", "id": 71924, "node_id": "MDQ6VXNlcjcxOTI0", "avatar_url": "https://avatars.githubusercontent.com/u/71924?v=4", "gravatar_id": "", "url": "https://api.github.com/users/neoice", "html_url": "https://github.com/neoice", "followers_url": "https://api.github.com/users/neoice/followers", "following_url": "https://api.github.com/users/neoice/following{/other_user}", "gists_url": "https://api.github.com/users/neoice/gists{/gist_id}", "starred_url": "https://api.github.com/users/neoice/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/neoice/subscriptions", "organizations_url": "https://api.github.com/users/neoice/orgs", "repos_url": "https://api.github.com/users/neoice/repos", "events_url": "https://api.github.com/users/neoice/events{/privacy}", "received_events_url": "https://api.github.com/users/neoice/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 983327104, "node_id": "MDU6TGFiZWw5ODMzMjcxMDQ=", "url": "https://api.github.com/repos/custom-components/alexa_media_player/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 20, "created_at": "2020-07-21T05:42:31Z", "updated_at": "2020-08-26T05:02:16Z", "closed_at": "2020-08-26T05:02:16Z", "author_association": "NONE", "active_lock_reason": null, "body": "**Describe the bug**\r\n`media_player.volume_set` appears to create an invalid request, likely due to a constantly changing vendor API...\r\n\r\n**To Reproduce**\r\n1. run script similar to the following:\r\n\r\n```\r\ndata:\r\n  entity_id: media_player.upstairs\r\n  volume_level: 0.77\r\nentity_id: media_player.upstairs\r\nservice: media_player.volume_set\r\n```\r\n\r\n**Expected behavior**\r\nexpect volume setting to be modified\r\n\r\n**Screenshots**\r\n```\r\n2020-07-20 22:36:58 DEBUG (MainThread) [alexapy.alexaapi] Running behavior with data: {\"behaviorId\": \"PREVIEW\", \"sequenceJson\": \"{\\\"@type\\\": \\\"com.amazon.alexa.behaviors.model.Sequence\\\", \\\"startNode\\\": {\\\"@type\\\": \\\"com.amazon.alexa.behaviors.model.SerialNode\\\", \\\"nodesToExecute\\\": [{\\\"@type\\\": \\\"com.amazon.alexa.behaviors.model.OpaquePayloadOperationNode\\\", \\\"type\\\": \\\"Alexa.DeviceControls.Volume\\\", \\\"operationPayload\\\": {\\\"deviceType\\\": \\\"REDACTED\\\", \\\"deviceSerialNumber\\\": \\\"REDACTED\\\", \\\"locale\\\": \\\"en-us\\\", \\\"customerId\\\": \\\"REDACTED\\\", \\\"value\\\": 77.0}}]}}\", \"status\": \"ENABLED\"}\r\n2020-07-20 22:36:59 DEBUG (MainThread) [alexapy.alexaapi] POST: https://alexa.amazon.com/api/behaviors/preview returned 400:Bad Request:text/html\r\n```\r\n\r\n**System details**\r\n - Home-assistant (version): 0.112.4 (via `docker run`)\r\n - Hassio (Yes/No): no\r\n - alexa_media  (version from `const.py` or HA startup): `2.10.0`\r\n - alexapy (version from `pip show alexapy` or HA startup): `1.12.0`\r\n\r\n**Logs**\r\nsee above?", "reactions": {"url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/848/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/848/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/807", "repository_url": "https://api.github.com/repos/custom-components/alexa_media_player", "labels_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/807/labels{/name}", "comments_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/807/comments", "events_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/807/events", "html_url": "https://github.com/custom-components/alexa_media_player/issues/807", "id": 645606317, "node_id": "MDU6SXNzdWU2NDU2MDYzMTc=", "number": 807, "title": "Unable to login/configure when 2FA not enabled - \"authentication required\" - /ap/cvf/approval/poll", "user": {"login": "bryeartem", "id": 45539718, "node_id": "MDQ6VXNlcjQ1NTM5NzE4", "avatar_url": "https://avatars.githubusercontent.com/u/45539718?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bryeartem", "html_url": "https://github.com/bryeartem", "followers_url": "https://api.github.com/users/bryeartem/followers", "following_url": "https://api.github.com/users/bryeartem/following{/other_user}", "gists_url": "https://api.github.com/users/bryeartem/gists{/gist_id}", "starred_url": "https://api.github.com/users/bryeartem/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bryeartem/subscriptions", "organizations_url": "https://api.github.com/users/bryeartem/orgs", "repos_url": "https://api.github.com/users/bryeartem/repos", "events_url": "https://api.github.com/users/bryeartem/events{/privacy}", "received_events_url": "https://api.github.com/users/bryeartem/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 983327104, "node_id": "MDU6TGFiZWw5ODMzMjcxMDQ=", "url": "https://api.github.com/repos/custom-components/alexa_media_player/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}, {"id": 983327107, "node_id": "MDU6TGFiZWw5ODMzMjcxMDc=", "url": "https://api.github.com/repos/custom-components/alexa_media_player/labels/help%20wanted", "name": "help wanted", "color": "008672", "default": true, "description": "Extra attention is needed"}, {"id": 1246346849, "node_id": "MDU6TGFiZWwxMjQ2MzQ2ODQ5", "url": "https://api.github.com/repos/custom-components/alexa_media_player/labels/alexapy", "name": "alexapy", "color": "e23ba8", "default": false, "description": "Issue relates to the API"}, {"id": 2434431890, "node_id": "MDU6TGFiZWwyNDM0NDMxODkw", "url": "https://api.github.com/repos/custom-components/alexa_media_player/labels/no-issue-activity", "name": "no-issue-activity", "color": "ededed", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 33, "created_at": "2020-06-25T14:23:42Z", "updated_at": "2020-11-08T01:37:52Z", "closed_at": "2020-11-08T01:37:52Z", "author_association": "NONE", "active_lock_reason": null, "body": "**Describe the bug**\r\nUnable to Login, Configure (Failed to call service configurator) \r\n\r\n**To Reproduce**\r\nSteps to reproduce the behavior:\r\n1. Restart home assistant\r\n2. Click Configurator\r\nClick button to configure Alexa Media Player - Begin - Click Configure\r\n**Expected behavior**\r\nEnter Captcha, Verify Device with code selection, Login\r\n\r\n**Screenshots**\r\nIf applicable, add screenshots to help explain your problem.\r\n\r\n**System details**\r\n - Home-assistant (version): 0.112.0b\r\n - Hassio (Yes/No): No\r\n - alexa_media: \"2.8.7\"\r\n - alexapy: Version: 1.10.5\r\n\r\n**Logs**\r\n<details>\r\n\r\n```html\r\n2020-06-25 10:51:55 DEBUG (MainThread) [custom_components.alexa_media.configurator] Configurator closed for Status: {'error_message': 'Important Message!\\n            To better protect your account, please re-enter your password and then enter the characters as they are shown in the image below.\\n          ', 'captcha_required': True, 'captcha_image_url': 'https://opfcaptcha-prod.s3.amazonaws.com/dc796225827e4e94b6341db28fe23976.jpg?AWSAccessKeyId=AKIA5WBBRBBB22K4E62K&Expires=1593096364&Signature=jigpL%2BXODaFcbWlcqZqQMMGj%2BzQ%3D'}\r\n got captcha: None securitycode: None Claimsoption: None AuthSelectOption: None  VerificationCode: None\r\n2020-06-25 10:51:55 DEBUG (MainThread) [alexapy.alexalogin] No valid cookies for log in; using credentials\r\n2020-06-25 10:51:55 DEBUG (MainThread) [alexapy.alexalogin] Loaded last request to https://www.amazon.com/ap/signin/132-4782048-0393153 \r\n2020-06-25 10:51:55 DEBUG (MainThread) [alexapy.alexalogin] Processing https://www.amazon.com/ap/signin/132-4782048-0393153\r\n2020-06-25 10:51:55 DEBUG (MainThread) [alexapy.alexalogin] Links: {'0': ('Forgot password?', 'https://www.amazon.com/ap/forgotpassword?showRememberMe=true&showRmrMe=1&openid.identity=http%3A%2F%2Fspecs.openid.net%2Fauth%2F2.0%2Fidentifier_select&forceValidateCaptcha=true&pageId=amzn_dp_project_dee&openid.return_to=https%3A%2F%2Falexa.amazon.com%2F&prevRID=BPEEXXPEVNK5PZ23WFNQ&openid.assoc_handle=amzn_dp_project_dee&openid.mode=checkid_setup&prepopulatedLoginId=eyJjaXBoZXIiOiI5OFJPeU14NVA0amp5Smk2S2QxNzZ1YnMrRjVmUHB5RmJWajJyelFRYU5RPSIsIklWIjoieU81bmVoQ0hjZDhRSWNCV2JaMkhWdz09IiwidmVyc2lvbiI6MX0%3D&failedSignInCount=1&openid.claimed_id=http%3A%2F%2Fspecs.openid.net%2Fauth%2F2.0%2Fidentifier_select&openid.ns=http%3A%2F%2Fspecs.openid.net%2Fauth%2F2.0&timestamp=1593096064000'), '1': ('See a new challenge', 'https://alexa.amazon.com/ap/signin?showRememberMe=true&showRmrMe=1&openid.identity=http%3A%2F%2Fspecs.openid.net%2Fauth%2F2.0%2Fidentifier_select&forceValidateCaptcha=true&pageId=amzn_dp_project_dee&openid.return_to=https%3A%2F%2Falexa.amazon.com%2F&prevRID=BPEEXXPEVNK5PZ23WFNQ&openid.assoc_handle=amzn_dp_project_dee&openid.mode=checkid_setup&prepopulatedLoginId=eyJjaXBoZXIiOiJNUGNnTUpJUXIyck9MeDJkdFNDdVJEQXdHdW9VbnphUDRCbm8zV3UrbDYwPSIsIklWIjoiTlVNd3BHa2V4Qzl5Z3dlNFV0WFI2Zz09IiwidmVyc2lvbiI6MX0%3D&failedSignInCount=1&openid.claimed_id=http%3A%2F%2Fspecs.openid.net%2Fauth%2F2.0%2Fidentifier_select&openid.ns=http%3A%2F%2Fspecs.openid.net%2Fauth%2F2.0&timestamp=1593096064000&use_audio_captcha=0'), '2': ('Hear the challenge', 'https://alexa.amazon.com/ap/signin?showRememberMe=true&showRmrMe=1&openid.identity=http%3A%2F%2Fspecs.openid.net%2Fauth%2F2.0%2Fidentifier_select&forceValidateCaptcha=true&pageId=amzn_dp_project_dee&openid.return_to=https%3A%2F%2Falexa.amazon.com%2F&prevRID=BPEEXXPEVNK5PZ23WFNQ&openid.assoc_handle=amzn_dp_project_dee&openid.mode=checkid_setup&prepopulatedLoginId=eyJjaXBoZXIiOiJNUGNnTUpJUXIyck9MeDJkdFNDdVJEQXdHdW9VbnphUDRCbm8zV3UrbDYwPSIsIklWIjoiTlVNd3BHa2V4Qzl5Z3dlNFV0WFI2Zz09IiwidmVyc2lvbiI6MX0%3D&failedSignInCount=1&openid.claimed_id=http%3A%2F%2Fspecs.openid.net%2Fauth%2F2.0%2Fidentifier_select&openid.ns=http%3A%2F%2Fspecs.openid.net%2Fauth%2F2.0&timestamp=1593096064000&use_audio_captcha=1'), '3': ('Hear a new challenge', 'https://alexa.amazon.com/ap/signin?showRememberMe=true&showRmrMe=1&openid.identity=http%3A%2F%2Fspecs.openid.net%2Fauth%2F2.0%2Fidentifier_select&forceValidateCaptcha=true&pageId=amzn_dp_project_dee&openid.return_to=https%3A%2F%2Falexa.amazon.com%2F&prevRID=BPEEXXPEVNK5PZ23WFNQ&openid.assoc_handle=amzn_dp_project_dee&openid.mode=checkid_setup&prepopulatedLoginId=eyJjaXBoZXIiOiJNUGNnTUpJUXIyck9MeDJkdFNDdVJEQXdHdW9VbnphUDRCbm8zV3UrbDYwPSIsIklWIjoiTlVNd3BHa2V4Qzl5Z3dlNFV0WFI2Zz09IiwidmVyc2lvbiI6MX0%3D&failedSignInCount=1&openid.claimed_id=http%3A%2F%2Fspecs.openid.net%2Fauth%2F2.0%2Fidentifier_select&openid.ns=http%3A%2F%2Fspecs.openid.net%2Fauth%2F2.0&timestamp=1593096064000&use_audio_captcha=1'), '4': ('See the challenge', 'https://alexa.amazon.com/ap/signin?showRememberMe=true&showRmrMe=1&openid.identity=http%3A%2F%2Fspecs.openid.net%2Fauth%2F2.0%2Fidentifier_select&forceValidateCaptcha=true&pageId=amzn_dp_project_dee&openid.return_to=https%3A%2F%2Falexa.amazon.com%2F&prevRID=BPEEXXPEVNK5PZ23WFNQ&openid.assoc_handle=amzn_dp_project_dee&openid.mode=checkid_setup&prepopulatedLoginId=eyJjaXBoZXIiOiJNUGNnTUpJUXIyck9MeDJkdFNDdVJEQXdHdW9VbnphUDRCbm8zV3UrbDYwPSIsIklWIjoiTlVNd3BHa2V4Qzl5Z3dlNFV0WFI2Zz09IiwidmVyc2lvbiI6MX0%3D&failedSignInCount=1&openid.claimed_id=http%3A%2F%2Fspecs.openid.net%2Fauth%2F2.0%2Fidentifier_select&openid.ns=http%3A%2F%2Fspecs.openid.net%2Fauth%2F2.0&timestamp=1593096064000&use_audio_captcha=0'), '5': ('Create a new Amazon account', 'https://www.amazon.com/ap/register?showRememberMe=true&showRmrMe=1&openid.identity=http%3A%2F%2Fspecs.openid.net%2Fauth%2F2.0%2Fidentifier_select&forceValidateCaptcha=true&pageId=amzn_dp_project_dee&openid.return_to=https%3A%2F%2Falexa.amazon.com%2F&prevRID=BPEEXXPEVNK5PZ23WFNQ&openid.assoc_handle=amzn_dp_project_dee&openid.mode=checkid_setup&prepopulatedLoginId=eyJjaXBoZXIiOiJNUGNnTUpJUXIyck9MeDJkdFNDdVJEQXdHdW9VbnphUDRCbm8zV3UrbDYwPSIsIklWIjoiTlVNd3BHa2V4Qzl5Z3dlNFV0WFI2Zz09IiwidmVyc2lvbiI6MX0%3D&failedSignInCount=1&openid.claimed_id=http%3A%2F%2Fspecs.openid.net%2Fauth%2F2.0%2Fidentifier_select&openid.ns=http%3A%2F%2Fspecs.openid.net%2Fauth%2F2.0&timestamp=1593096064000')}\r\n2020-06-25 10:51:55 DEBUG (MainThread) [alexapy.alexalogin] Error message: Important Message!\r\n            To better protect your account, please re-enter your password and then enter the characters as they are shown in the image below.\r\n          \r\n2020-06-25 10:51:55 DEBUG (MainThread) [alexapy.alexalogin] Captcha requested\r\n2020-06-25 10:51:55 DEBUG (MainThread) [alexapy.alexalogin] Found form to process: <form action=\"https://www.amazon.com/ap/signin\" class=\"auth-validate-form auth-clearable-form\" method=\"post\" name=\"signIn\" novalidate=\"\">\r\n<input name=\"appActionToken\" type=\"hidden\" value=\"00U9ufyvRBuRYlj2FYhj2F5eYpj2BEmIsj3D\"/><input name=\"appAction\" type=\"hidden\" value=\"SIGNIN\"/>\r\n<input name=\"ces\" type=\"hidden\" value=\"ape:QUNTX3hNWkNoeEIrQjh5bk10NVRTSkxENzM5L2YzOEFBQUFBQUFBQUFVaFFrMUpma3MyL2hxcXgyb0ZvZ0JPRmJhREVOb0w2b1A1VlgvUHNqVnZhTXpmTk1wbndDWE9UUEprM1U0RjVzVnYwQkxyQkxiMnp2alJINGJ5dkhKbnlORlF0WlEyU0NCQUY3VTNXU3UybEFhdUVMaHB1bldWeTlOQ28vRWZjTmt6QVBxRFQwb09ac1lMUS9ZMjE4aU1CZDJkOTlRcjRBb0RGcFltVFBPYmF6R1NuWmc4RytMNEZyOGRmeWhSbDlQTVZNSVJoeDNDWWl6ZTY5QUlhSDFJblNUS0JlM2V5TEV4OFY5enpzaVdRRmlSR1ZFYndnbFJuTERRMUhPTkZ5d1RKVFQvd2FDeTFKVitBOWFZYklyQU5pVlp6UkxMK3FmdkJsS3EySnp5WmdqQndCMWFnd0oyZU0vRFJNcjhLUjZ0RzR0a2xpREtHcVZqMTRHemdYVDg9\"/>\r\n<input name=\"openid.return_to\" type=\"hidden\" value=\"ape:aHR0cHM6Ly9hbGV4YS5hbWF6b24uY29tLw==\"/>\r\n<input name=\"prevRID\" type=\"hidden\" value=\"ape:QlBFRVhYUEVWTks1UFoyM1dGTlE=\"/>\r\n<input name=\"workflowState\" type=\"hidden\" value=\"eyJ6aXAiOiJERUYiLCJlbmMiOiJBMjU2R0NNIiwiYWxnIjoiQTI1NktXIn0.90kSzBragPup8m2sakRYg6jwuhKddKyVMsa1VbZtUDyamzU5f7U8Qg.xoOEH1Mu9zPfDe8X.CXglSDOpmTBOLSNNYAn2mGHQb3Qhj51-A1igLvXMC00-5QiwTcvUP-ju3EpSwrGltz4ktPVjKNR213yZuf61UPdLO14vL8W4BMz2dU0YhAaZon02QW0rsOyBrQvhIK4d_8PQsUsweuxHDCP9sH5BpnhmumzkBOALb-fg3wT0Lo-TcUSM2Zmv8HF8FQaQ-qNNBpOI0yFOWB2tJlz580yZHonSmOqtU5e8960dePh3M2vfleRQSMNdtwZNQ0WXwJQqMRH_nuxjbEbu6MVwVjoPgRGBB4r9tgKmPXGJ-3dw_IODp8zLNrFOxo-u2d0y9LvGgPfYTuKYNDgl0xq9vpI4Bq8vqY956-7AMinEh5iAlN3xB78oL4Hgb0f7wuCLIC73l5uxULN7sDKEuapd6tW1iQvcyVzJtmtsjAwk9uwzJp-zwwIY02ivDN7m96no0w9eNnwNSChZtiX9iJCsznSA9YHCJ4RyCxmFI60x9uZBx_REDBN_rsRAgqA.lrRHYai7oQPS6hl1v_3Neg\"/>\r\n<h1 class=\"a-spacing-micro a-spacing-top-small a-text-left\">\r\n  Sign-In\r\n</h1>\r\n<div class=\"a-section a-spacing-base a-text-right\">\r\n<a class=\"a-link-normal\" href=\"https://www.amazon.com/ap/forgotpassword?showRememberMe=true&amp;showRmrMe=1&amp;openid.identity=http%3A%2F%2Fspecs.openid.net%2Fauth%2F2.0%2Fidentifier_select&amp;forceValidateCaptcha=true&amp;pageId=amzn_dp_project_dee&amp;openid.return_to=https%3A%2F%2Falexa.amazon.com%2F&amp;prevRID=BPEEXXPEVNK5PZ23WFNQ&amp;openid.assoc_handle=amzn_dp_project_dee&amp;openid.mode=checkid_setup&amp;prepopulatedLoginId=eyJjaXBoZXIiOiI5OFJPeU14NVA0amp5Smk2S2QxNzZ1YnMrRjVmUHB5RmJWajJyelFRYU5RPSIsIklWIjoieU81bmVoQ0hjZDhRSWNCV2JaMkhWdz09IiwidmVyc2lvbiI6MX0%3D&amp;failedSignInCount=1&amp;openid.claimed_id=http%3A%2F%2Fspecs.openid.net%2Fauth%2F2.0%2Fidentifier_select&amp;openid.ns=http%3A%2F%2Fspecs.openid.net%2Fauth%2F2.0&amp;timestamp=1593096064000\" id=\"auth-fpp-link-bottom\" rel=\"noopener\" tabindex=\"9\" target=\"_top\">\r\n  Forgot password?\r\n</a>\r\n</div>\r\n<div class=\"a-input-text-group a-spacing-medium a-spacing-top-micro\">\r\n<label class=\"a-form-label auth-mobile-label\" for=\"ap_email\">\r\n      Email (phone for mobile accounts)\r\n    </label>\r\n<div class=\"a-input-text-wrapper auth-required-field auth-fill-claim\"><input autocapitalize=\"off\" autocorrect=\"off\" id=\"ap_email\" maxlength=\"128\" name=\"email\" placeholder=\"Email (phone for mobile accounts)\" tabindex=\"1\" type=\"email\" value=\"MYEMAIL@gmail.com\"/></div>\r\n<div class=\"auth-clear-icons\" id=\"ap_email_icon\">\r\n<i class=\"a-icon a-icon-close\" role=\"img\"></i>\r\n</div>\r\n<script data-a-state='{\"key\":\"auth-show-password\"}' type=\"a-state\">{\"isShowPasswordEnabled\":true,\"showPasswordChecked\":false}</script>\r\n<label class=\"a-form-label auth-mobile-label\" for=\"ap_password\">\r\n  Amazon password\r\n</label>\r\n<div class=\"a-input-text-wrapper auth-required-field auth-password-container auth-password auth-fill-password\" id=\"auth-password-container\"><input id=\"ap_password\" maxlength=\"1024\" name=\"password\" placeholder=\"Amazon password\" tabindex=\"2\" type=\"password\"/></div>\r\n<div class=\"auth-clear-icons\" id=\"ap_password_icon\">\r\n<i class=\"a-icon a-icon-close\" role=\"img\"></i>\r\n</div>\r\n<div aria-live=\"assertive\" class=\"a-box a-alert-inline a-alert-inline-error auth-inlined-error-message a-spacing-top-mini\" id=\"auth-password-missing-alert\" role=\"alert\"><div class=\"a-box-inner a-alert-container\"><i class=\"a-icon a-icon-alert\"></i><div class=\"a-alert-content\">\r\n  Enter your password\r\n</div></div></div>\r\n<div class=\"a-row auth-visible-password-container auth-show-password-empty\">\r\n<span class=\"a-size-small a-color-secondary auth-visible-password\"></span>\r\n</div>\r\n<input id=\"ap_show_password_checked\" name=\"showPasswordChecked\" type=\"hidden\" value=\"false\"/>\r\n<input name=\"encryptedPasswordExpected\" type=\"hidden\"/>\r\n<script data-a-state='{\"key\":\"sif-encryption-profile\"}' type=\"a-state\">{\"sifProfile\":\"AuthenticationPortalSigninNA\"}</script>\r\n<script async=\"\" src=\"https://static.siege-amazon.com/prod/profiles/AuthenticationPortalSigninNA.js\" type=\"text/javascript\">\r\n</script>\r\n</div>\r\n<div class=\"a-row\">\r\n<div class=\"a-column a-span12 a-spacing-medium\">\r\n<div class=\"a-checkbox a-checkbox-fancy a-control-row a-touch-checkbox auth-show-password-checkbox\" id=\"auth-show-password-checkbox-container\"><label for=\"auth-show-password-checkbox\"><input id=\"auth-show-password-checkbox\" name=\"\" tabindex=\"3\" type=\"checkbox\" value=\"\"/><i class=\"a-icon a-icon-checkbox\"></i><span class=\"a-label a-checkbox-label\">\r\n          Show password\r\n        </span></label></div>\r\n</div>\r\n</div>\r\n<div class=\"a-row a-spacing-base\">\r\n<div class=\"a-checkbox a-checkbox-fancy a-control-row a-touch-checkbox\" data-a-input-name=\"rememberMe\"><label><input checked=\"\" name=\"rememberMe\" tabindex=\"4\" type=\"checkbox\" value=\"true\"/><i class=\"a-icon a-icon-checkbox\"></i><span class=\"a-label a-checkbox-label\">\r\n    Keep me signed in.\r\n    <span class=\"a-declarative\" data-a-modal='{\"max-width\":\"500px\",\"width\":\"95%\",\"name\":\"remember-me-detail-link-modal\",\"header\":\"\\\"Keep Me Signed In\\\" Checkbox\"}' data-action=\"a-modal\">\r\n<a class=\"a-link-normal\" href=\"#\" id=\"remember_me_learn_more_link\">\r\n        Details\r\n      </a>\r\n</span>\r\n<div class=\"a-popover-preload\" id=\"a-popover-remember-me-detail-link-modal\">\r\n<div class=\"a-section a-spacing-large a-spacing-top-mini\">\r\n<p>\r\n<p>Choosing \"Keep me signed in\" reduces the number of times you're asked to Sign-In on this device.</p>\r\n<p>To keep your account secure, use this option only on your personal devices.</p>\r\n</p>\r\n</div>\r\n</div>\r\n</span></label></div>\r\n</div>\r\n<div class=\"a-row\">\r\n<div class=\"a-box a-spacing-medium\"><div class=\"a-box-inner\">\r\n<div class=\"a-section a-spacing-small a-text-center\" id=\"image-captcha-section\">\r\n<input id=\"use_image_captcha\" name=\"use_image_captcha\" type=\"hidden\" value=\"true\"/>\r\n<div class=\"a-section a-text-center\" id=\"auth-captcha-image-container\">\r\n<img alt=\"Visual CAPTCHA image, continue down for an audio option.\" data-refresh-url=\"/ap/captcha?appAction=SIGNIN&amp;captchaObfuscationLevel=ape%3AaGFyZA%3D%3D&amp;captchaType=image&amp;marketPlaceId=ATVPDKIKX0DER\" id=\"auth-captcha-image\" src=\"https://opfcaptcha-prod.s3.amazonaws.com/dc796225827e4e94b6341db28fe23976.jpg?AWSAccessKeyId=AKIA5WBBRBBB22K4E62K&amp;Expires=1593096364&amp;Signature=jigpL%2BXODaFcbWlcqZqQMMGj%2BzQ%3D\"/>\r\n</div>\r\n</div>\r\n<div class=\"a-section a-spacing-small auth-display-none\" id=\"audio-captcha-section\">\r\n<input id=\"use_audio_captcha\" name=\"use_audio_captcha\" type=\"hidden\" value=\"false\"/>\r\n<div class=\"a-section a-spacing-base a-spacing-top-base a-text-center\">\r\n<div class=\"a-section a-spacing-base a-text-center\" id=\"auth-captcha-audio-container\">\r\n<span class=\"a-button a-button-base\" id=\"audio-captcha-play-button\"><span class=\"a-button-inner\"><input aria-labelledby=\"audio-captcha-play-button-announce\" class=\"a-button-input\" id=\"audio-captcha-play-pause-button\" tabindex=\"5\" type=\"submit\"/><span aria-hidden=\"true\" class=\"a-button-text\" id=\"audio-captcha-play-button-announce\">\r\n    Play/Pause\r\n  </span></span></span>\r\n<audio id=\"audio-captcha\">\r\n<source data-refresh-url=\"/ap/captcha?appAction=SIGNIN&amp;captchaType=audio&amp;marketPlaceId=ATVPDKIKX0DER\" id=\"mp3-file\" src=\"https://opfcaptcha-prod.s3.amazonaws.com/dc796225827e4e94b6341db28fe23976.jpg?AWSAccessKeyId=AKIA5WBBRBBB22K4E62K&amp;Expires=1593096364&amp;Signature=jigpL%2BXODaFcbWlcqZqQMMGj%2BzQ%3D\" type=\"audio/mpeg\"/>\r\n</audio>\r\n</div>\r\n</div>\r\n</div>\r\n<input id=\"image-captcha-placeholder\" name=\"\" type=\"hidden\" value=\"Type the characters above\"/>\r\n<input id=\"audio-captcha-placeholder\" name=\"\" type=\"hidden\" value=\"Type the characters you hear\"/>\r\n<label class=\"a-form-label auth-mobile-label\" for=\"auth-captcha-guess\">\r\n      Type characters\r\n    </label>\r\n<div class=\"a-row a-spacing-base\">\r\n<div class=\"a-input-text-wrapper a-spacing-base auth-required-field\"><input autocapitalize=\"off\" autocomplete=\"off\" autocorrect=\"off\" id=\"auth-captcha-guess\" name=\"guess\" placeholder=\"Type the characters above\" tabindex=\"5\" type=\"text\"/></div>\r\n<div class=\"auth-clear-icons\" id=\"auth_captcha_guess_icon\">\r\n<i class=\"a-icon a-icon-close\" role=\"img\"></i>\r\n</div>\r\n<div aria-live=\"assertive\" class=\"a-box a-alert-inline a-alert-inline-error auth-inlined-error-message a-spacing-top-mini\" id=\"auth-guess-missing-alert\" role=\"alert\"><div class=\"a-box-inner a-alert-container\"><i class=\"a-icon a-icon-alert\"></i><div class=\"a-alert-content\">\r\n  Enter the characters as they are given in the challenge.\r\n</div></div></div>\r\n</div>\r\n<div class=\"a-section a-spacing-mini\" id=\"image-captcha-options\">\r\n<div class=\"a-row\" id=\"auth-switch-captcha-to-audio-container\">\r\n<div class=\"a-column a-span12 a-text-center a-spacing-small\">\r\n<a class=\"a-link-normal\" href=\"/ap/signin?showRememberMe=true&amp;showRmrMe=1&amp;openid.identity=http%3A%2F%2Fspecs.openid.net%2Fauth%2F2.0%2Fidentifier_select&amp;forceValidateCaptcha=true&amp;pageId=amzn_dp_project_dee&amp;openid.return_to=https%3A%2F%2Falexa.amazon.com%2F&amp;prevRID=BPEEXXPEVNK5PZ23WFNQ&amp;openid.assoc_handle=amzn_dp_project_dee&amp;openid.mode=checkid_setup&amp;prepopulatedLoginId=eyJjaXBoZXIiOiJNUGNnTUpJUXIyck9MeDJkdFNDdVJEQXdHdW9VbnphUDRCbm8zV3UrbDYwPSIsIklWIjoiTlVNd3BHa2V4Qzl5Z3dlNFV0WFI2Zz09IiwidmVyc2lvbiI6MX0%3D&amp;failedSignInCount=1&amp;openid.claimed_id=http%3A%2F%2Fspecs.openid.net%2Fauth%2F2.0%2Fidentifier_select&amp;openid.ns=http%3A%2F%2Fspecs.openid.net%2Fauth%2F2.0&amp;timestamp=1593096064000&amp;use_audio_captcha=0\" id=\"auth-captcha-refresh-link\" tabindex=\"5\">\r\n            See a new challenge\r\n          </a>\r\n<a class=\"a-link-normal\" href=\"javascript:void(0);\" id=\"auth-captcha-noop-link\">\r\n            See a new challenge\r\n          </a>\r\n</div>\r\n</div>\r\n<div class=\"a-row\">\r\n<div class=\"a-column a-span12 a-text-center a-spacing-small a-span-last\">\r\n<a class=\"a-link-normal\" href=\"/ap/signin?showRememberMe=true&amp;showRmrMe=1&amp;openid.identity=http%3A%2F%2Fspecs.openid.net%2Fauth%2F2.0%2Fidentifier_select&amp;forceValidateCaptcha=true&amp;pageId=amzn_dp_project_dee&amp;openid.return_to=https%3A%2F%2Falexa.amazon.com%2F&amp;prevRID=BPEEXXPEVNK5PZ23WFNQ&amp;openid.assoc_handle=amzn_dp_project_dee&amp;openid.mode=checkid_setup&amp;prepopulatedLoginId=eyJjaXBoZXIiOiJNUGNnTUpJUXIyck9MeDJkdFNDdVJEQXdHdW9VbnphUDRCbm8zV3UrbDYwPSIsIklWIjoiTlVNd3BHa2V4Qzl5Z3dlNFV0WFI2Zz09IiwidmVyc2lvbiI6MX0%3D&amp;failedSignInCount=1&amp;openid.claimed_id=http%3A%2F%2Fspecs.openid.net%2Fauth%2F2.0%2Fidentifier_select&amp;openid.ns=http%3A%2F%2Fspecs.openid.net%2Fauth%2F2.0&amp;timestamp=1593096064000&amp;use_audio_captcha=1\" id=\"auth-switch-captcha-to-audio\" tabindex=\"5\">\r\n              Hear the challenge\r\n            </a>\r\n</div>\r\n</div>\r\n</div>\r\n<div class=\"a-section a-spacing-mini auth-display-none\" id=\"audio-captcha-options\">\r\n<div class=\"a-row\">\r\n<div class=\"a-column a-span12 a-text-center a-spacing-small\">\r\n<a class=\"a-link-normal\" href=\"/ap/signin?showRememberMe=true&amp;showRmrMe=1&amp;openid.identity=http%3A%2F%2Fspecs.openid.net%2Fauth%2F2.0%2Fidentifier_select&amp;forceValidateCaptcha=true&amp;pageId=amzn_dp_project_dee&amp;openid.return_to=https%3A%2F%2Falexa.amazon.com%2F&amp;prevRID=BPEEXXPEVNK5PZ23WFNQ&amp;openid.assoc_handle=amzn_dp_project_dee&amp;openid.mode=checkid_setup&amp;prepopulatedLoginId=eyJjaXBoZXIiOiJNUGNnTUpJUXIyck9MeDJkdFNDdVJEQXdHdW9VbnphUDRCbm8zV3UrbDYwPSIsIklWIjoiTlVNd3BHa2V4Qzl5Z3dlNFV0WFI2Zz09IiwidmVyc2lvbiI6MX0%3D&amp;failedSignInCount=1&amp;openid.claimed_id=http%3A%2F%2Fspecs.openid.net%2Fauth%2F2.0%2Fidentifier_select&amp;openid.ns=http%3A%2F%2Fspecs.openid.net%2Fauth%2F2.0&amp;timestamp=1593096064000&amp;use_audio_captcha=1\" id=\"auth-refresh-audio\" tabindex=\"5\">\r\n              Hear a new challenge\r\n            </a>\r\n</div>\r\n</div>\r\n<div class=\"a-row\">\r\n<div class=\"a-column a-span12 a-text-center a-spacing-small\">\r\n<a class=\"a-link-normal\" href=\"/ap/signin?showRememberMe=true&amp;showRmrMe=1&amp;openid.identity=http%3A%2F%2Fspecs.openid.net%2Fauth%2F2.0%2Fidentifier_select&amp;forceValidateCaptcha=true&amp;pageId=amzn_dp_project_dee&amp;openid.return_to=https%3A%2F%2Falexa.amazon.com%2F&amp;prevRID=BPEEXXPEVNK5PZ23WFNQ&amp;openid.assoc_handle=amzn_dp_project_dee&amp;openid.mode=checkid_setup&amp;prepopulatedLoginId=eyJjaXBoZXIiOiJNUGNnTUpJUXIyck9MeDJkdFNDdVJEQXdHdW9VbnphUDRCbm8zV3UrbDYwPSIsIklWIjoiTlVNd3BHa2V4Qzl5Z3dlNFV0WFI2Zz09IiwidmVyc2lvbiI6MX0%3D&amp;failedSignInCount=1&amp;openid.claimed_id=http%3A%2F%2Fspecs.openid.net%2Fauth%2F2.0%2Fidentifier_select&amp;openid.ns=http%3A%2F%2Fspecs.openid.net%2Fauth%2F2.0&amp;timestamp=1593096064000&amp;use_audio_captcha=0\" id=\"auth-switch-captcha-to-image\" tabindex=\"5\">\r\n              See the challenge\r\n            </a>\r\n</div>\r\n</div>\r\n</div>\r\n<script>\r\n  P.register('auth-captcha-cf');\r\n</script>\r\n</div></div>\r\n</div>\r\n<div class=\"a-section\">\r\n<div class=\"a-button-stack\">\r\n<span class=\"a-button a-button-span12 a-button-primary auth-share-credential-off\" id=\"auth-signin-button\"><span class=\"a-button-inner\"><input aria-labelledby=\"auth-signin-button-announce\" class=\"a-button-input\" id=\"signInSubmit\" tabindex=\"6\" type=\"submit\"/><span aria-hidden=\"true\" class=\"a-button-text\" id=\"auth-signin-button-announce\">\r\n            Sign-In\r\n          </span></span></span>\r\n<script>\r\n  function cf() {\r\n    if (typeof window.uet === 'function') {\r\n      uet('cf');\r\n    }\r\n    if (window.embedNotification &&\r\n      typeof window.embedNotification.onCF === 'function') {\r\n      embedNotification.onCF();\r\n    }\r\n  }\r\n</script>\r\n<script type=\"text/javascript\">cf()</script>\r\n<div class=\"a-section a-spacing-medium a-text-center\">\r\n<div class=\"a-divider a-divider-break\"><h5>New to Amazon?</h5></div>\r\n<span class=\"a-button a-button-span12 a-button-base\" id=\"auth-create-account-link\"><span class=\"a-button-inner\"><a class=\"a-button-text\" href=\"https://www.amazon.com/ap/register?showRememberMe=true&amp;showRmrMe=1&amp;openid.identity=http%3A%2F%2Fspecs.openid.net%2Fauth%2F2.0%2Fidentifier_select&amp;forceValidateCaptcha=true&amp;pageId=amzn_dp_project_dee&amp;openid.return_to=https%3A%2F%2Falexa.amazon.com%2F&amp;prevRID=BPEEXXPEVNK5PZ23WFNQ&amp;openid.assoc_handle=amzn_dp_project_dee&amp;openid.mode=checkid_setup&amp;prepopulatedLoginId=eyJjaXBoZXIiOiJNUGNnTUpJUXIyck9MeDJkdFNDdVJEQXdHdW9VbnphUDRCbm8zV3UrbDYwPSIsIklWIjoiTlVNd3BHa2V4Qzl5Z3dlNFV0WFI2Zz09IiwidmVyc2lvbiI6MX0%3D&amp;failedSignInCount=1&amp;openid.claimed_id=http%3A%2F%2Fspecs.openid.net%2Fauth%2F2.0%2Fidentifier_select&amp;openid.ns=http%3A%2F%2Fspecs.openid.net%2Fauth%2F2.0&amp;timestamp=1593096064000\" id=\"createAccountSubmit\" role=\"button\" tabindex=\"7\">\r\n          Create a new Amazon account\r\n        </a></span></span>\r\n</div>\r\n</div>\r\n</div>\r\n</form>\r\n2020-06-25 10:51:55 DEBUG (MainThread) [alexapy.alexalogin] Found post url to https://www.amazon.com/ap/signin\r\n2020-06-25 10:51:55 DEBUG (MainThread) [alexapy.alexalogin] Preparing post to https://www.amazon.com/ap/signin with input data: {}\r\n2020-06-25 10:51:55 DEBUG (MainThread) [alexapy.alexalogin] WARNING: Detected missing params: True\r\n2020-06-25 10:51:55 DEBUG (MainThread) [alexapy.alexalogin] Session Cookies:\r\namazon.com: expires:Fri, 25-Jun-2021 14:41:04 GMT max-age: session-id=132-4782048-0393153\r\namazon.com: expires:Fri, 25-Jun-2021 14:41:04 GMT max-age: session-id-time=2223816064l\r\namazon.com: expires:Fri, 25-Jun-2021 14:41:04 GMT max-age: ubid-main=131-9865953-3328838\r\n\r\n2020-06-25 10:51:55 DEBUG (MainThread) [alexapy.alexalogin] Submit Form Data: {\"appActionToken\": \"00U9ufyvRBuRYlj2FYhj2F5eYpj2BEmIsj3D\", \"appAction\": \"SIGNIN\", \"ces\": \"ape:QUNTX3hNWkNoeEIrQjh5bk10NVRTSkxENzM5L2YzOEFBQUFBQUFBQUFVaFFrMUpma3MyL2hxcXgyb0ZvZ0JPRmJhREVOb0w2b1A1VlgvUHNqVnZhTXpmTk1wbndDWE9UUEprM1U0RjVzVnYwQkxyQkxiMnp2alJINGJ5dkhKbnlORlF0WlEyU0NCQUY3VTNXU3UybEFhdUVMaHB1bldWeTlOQ28vRWZjTmt6QVBxRFQwb09ac1lMUS9ZMjE4aU1CZDJkOTlRcjRBb0RGcFltVFBPYmF6R1NuWmc4RytMNEZyOGRmeWhSbDlQTVZNSVJoeDNDWWl6ZTY5QUlhSDFJblNUS0JlM2V5TEV4OFY5enpzaVdRRmlSR1ZFYndnbFJuTERRMUhPTkZ5d1RKVFQvd2FDeTFKVitBOWFZYklyQU5pVlp6UkxMK3FmdkJsS3EySnp5WmdqQndCMWFnd0oyZU0vRFJNcjhLUjZ0RzR0a2xpREtHcVZqMTRHemdYVDg9\", \"openid.return_to\": \"ape:aHR0cHM6Ly9hbGV4YS5hbWF6b24uY29tLw==\", \"prevRID\": \"ape:QlBFRVhYUEVWTks1UFoyM1dGTlE=\", \"workflowState\": \"eyJ6aXAiOiJERUYiLCJlbmMiOiJBMjU2R0NNIiwiYWxnIjoiQTI1NktXIn0.90kSzBragPup8m2sakRYg6jwuhKddKyVMsa1VbZtUDyamzU5f7U8Qg.xoOEH1Mu9zPfDe8X.CXglSDOpmTBOLSNNYAn2mGHQb3Qhj51-A1igLvXMC00-5QiwTcvUP-ju3EpSwrGltz4ktPVjKNR213yZuf61UPdLO14vL8W4BMz2dU0YhAaZon02QW0rsOyBrQvhIK4d_8PQsUsweuxHDCP9sH5BpnhmumzkBOALb-fg3wT0Lo-TcUSM2Zmv8HF8FQaQ-qNNBpOI0yFOWB2tJlz580yZHonSmOqtU5e8960dePh3M2vfleRQSMNdtwZNQ0WXwJQqMRH_nuxjbEbu6MVwVjoPgRGBB4r9tgKmPXGJ-3dw_IODp8zLNrFOxo-u2d0y9LvGgPfYTuKYNDgl0xq9vpI4Bq8vqY956-7AMinEh5iAlN3xB78oL4Hgb0f7wuCLIC73l5uxULN7sDKEuapd6tW1iQvcyVzJtmtsjAwk9uwzJp-zwwIY02ivDN7m96no0w9eNnwNSChZtiX9iJCsznSA9YHCJ4RyCxmFI60x9uZBx_REDBN_rsRAgqA.lrRHYai7oQPS6hl1v_3Neg\", \"email\": \"MYEMAIL@gmail.com\", \"password\": \"#######\", \"showPasswordChecked\": \"false\", \"encryptedPasswordExpected\": \"\", \"rememberMe\": \"true\", \"use_image_captcha\": \"true\", \"use_audio_captcha\": \"false\", \"guess\": \"\"}\r\n2020-06-25 10:51:55 DEBUG (MainThread) [alexapy.alexalogin] Header: {\"User-Agent\": \"Mozilla/5.0 (Windows NT 6.3; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36\", \"Accept\": \"text/html,application/xhtml+xml, application/xml;q=0.9,*/*;q=0.8\", \"Accept-Language\": \"*\", \"Referer\": \"https://www.amazon.com/ap/signin/132-4782048-0393153\"}\r\n2020-06-25 10:51:55 DEBUG (MainThread) [alexapy.alexalogin] POST: \r\nhttps://www.amazon.com/ap/signin with\r\n<CIMultiDictProxy('Host': 'www.amazon.com', 'User-Agent': 'Mozilla/5.0 (Windows NT 6.3; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36', 'Accept': 'text/html,application/xhtml+xml, application/xml;q=0.9,*/*;q=0.8', 'Accept-Language': '*', 'Referer': 'https://www.amazon.com/ap/signin/132-4782048-0393153', 'Accept-Encoding': 'gzip, deflate', 'Cookie': 'session-id=132-4782048-0393153; session-id-time=2223816064l; ubid-main=131-9865953-3328838', 'Content-Length': '1546', 'Content-Type': 'application/x-www-form-urlencoded')>\r\n returned 200:OK with response <CIMultiDictProxy('Content-Type': 'text/html;charset=UTF-8', 'Transfer-Encoding': 'chunked', 'Connection': 'keep-alive', 'Server': 'Server', 'Date': 'Thu, 25 Jun 2020 14:51:55 GMT', 'Strict-Transport-Security': 'max-age=47474747; includeSubDomains; preload', 'X-XSS-Protection': '1', 'X-Content-Type-Options': 'nosniff', 'X-Frame-Options': 'SAMEORIGIN', 'x-ua-compatible': 'IE=edge', 'Pragma': 'No-cache', 'Cache-Control': 'max-age=0, no-cache, no-store, must-revalidate', 'Expires': 'Thu, 01 Jan 1970 00:00:00 GMT', 'Set-Cookie': 'ap-fid=\"\"; Domain=.amazon.com; Expires=Thu, 01-Jan-1970 00:00:10 GMT; Path=/ap/; Secure', 'Set-Cookie': 'session-id=132-4782048-0393153; Domain=.amazon.com; Expires=Fri, 25-Jun-2021 14:51:55 GMT; Path=/; Secure', 'Set-Cookie': 'session-id-time=2223816715l; Domain=.amazon.com; Expires=Fri, 25-Jun-2021 14:51:55 GMT; Path=/; Secure', 'Set-Cookie': 'ubid-main=131-9865953-3328838; Domain=.amazon.com; Expires=Fri, 25-Jun-2021 14:51:55 GMT; Path=/; Secure', 'Set-Cookie': 'session-token=1MV1ThkYZenoC2d4V0c/ndVJyE5AvY/gwKBkYcLY5cjsi9B9RB4C4a8RG+MOn3Ow4Z0D2lBWe2a2ZNmlItRnnwMosYH2BxOT2DKFouZij5bmEc3VYb6OPH39e87A0o68lPHdrfxyeVFi65YZheZjUDZQ+OXFknsW+HQPgEWtEvhsZg9u2maYSGg4w2F343IbWSOWAF6XO2P7A4Zp5p/kzGFoZRlB5YsQ; Domain=.amazon.com; Expires=Fri, 25-Jun-2021 14:51:55 GMT; Path=/; Secure', 'Vary': 'Accept-Encoding,X-Amzn-CDN-Cache,X-Amzn-AX-Treatment,User-Agent', 'Content-Encoding': 'gzip', 'x-amz-rid': 'TQ3MNES7AZXD3RMGZ30P', 'p3p': 'policyref=\"http://www.amazon.com/w3c/p3p.xml\",CP=\"CAO DSP LAW CUR ADM IVAo IVDo CONo OTPo OUR DELi PUBi OTRi BUS PHY ONL UNI PUR FIN COM NAV INT DEM CNT STA HEA PRE LOC GOV OTC \"', 'X-Cache': 'Miss from cloudfront', 'Via': '1.1 2ead2a81ff8cd9f180f8ec7fa0607b6e.cloudfront.net (CloudFront)', 'X-Amz-Cf-Pop': 'EWR53-C1', 'X-Amz-Cf-Id': 'SFVk6S9FdIXIzi-UoZb0WUpcaeSFu4lKEq5ARtu6Dda5LY70Zlw3Sg==')>\r\n2020-06-25 10:51:55 DEBUG (MainThread) [alexapy.alexalogin] Processing https://www.amazon.com/ap/signin\r\n2020-06-25 10:51:55 DEBUG (MainThread) [alexapy.alexalogin] Links: {'0': ('Forgot password?', 'https://www.amazon.com/ap/forgotpassword?showRememberMe=true&showRmrMe=1&openid.identity=http%3A%2F%2Fspecs.openid.net%2Fauth%2F2.0%2Fidentifier_select&forceValidateCaptcha=true&use_audio_captcha=false&pageId=amzn_dp_project_dee&openid.return_to=https%3A%2F%2Falexa.amazon.com%2F&prevRID=TQ3MNES7AZXD3RMGZ30P&openid.assoc_handle=amzn_dp_project_dee&openid.mode=checkid_setup&prepopulatedLoginId=eyJjaXBoZXIiOiI0MUZlRWtUTnE5a2UxUlc0dGxzSEM3K3lMbEV3ZUFEYVlZdmFBbG9kM0tFPSIsIklWIjoieGdEWTRIMTBJS00vRUcxUHVJazVCZz09IiwidmVyc2lvbiI6MX0%3D&failedSignInCount=1&openid.claimed_id=http%3A%2F%2Fspecs.openid.net%2Fauth%2F2.0%2Fidentifier_select&openid.ns=http%3A%2F%2Fspecs.openid.net%2Fauth%2F2.0&timestamp=1593096064000'), '1': ('See a new challenge', 'https://alexa.amazon.com/ap/signin?showRememberMe=true&showRmrMe=1&openid.identity=http%3A%2F%2Fspecs.openid.net%2Fauth%2F2.0%2Fidentifier_select&forceValidateCaptcha=true&pageId=amzn_dp_project_dee&openid.return_to=https%3A%2F%2Falexa.amazon.com%2F&prevRID=TQ3MNES7AZXD3RMGZ30P&openid.assoc_handle=amzn_dp_project_dee&openid.mode=checkid_setup&prepopulatedLoginId=eyJjaXBoZXIiOiJNUGNnTUpJUXIyck9MeDJkdFNDdVJEQXdHdW9VbnphUDRCbm8zV3UrbDYwPSIsIklWIjoiTlVNd3BHa2V4Qzl5Z3dlNFV0WFI2Zz09IiwidmVyc2lvbiI6MX0%3D&failedSignInCount=1&openid.claimed_id=http%3A%2F%2Fspecs.openid.net%2Fauth%2F2.0%2Fidentifier_select&openid.ns=http%3A%2F%2Fspecs.openid.net%2Fauth%2F2.0&timestamp=1593096064000&use_audio_captcha=0'), '2': ('Hear the challenge', 'https://alexa.amazon.com/ap/signin?showRememberMe=true&showRmrMe=1&openid.identity=http%3A%2F%2Fspecs.openid.net%2Fauth%2F2.0%2Fidentifier_select&forceValidateCaptcha=true&pageId=amzn_dp_project_dee&openid.return_to=https%3A%2F%2Falexa.amazon.com%2F&prevRID=TQ3MNES7AZXD3RMGZ30P&openid.assoc_handle=amzn_dp_project_dee&openid.mode=checkid_setup&prepopulatedLoginId=eyJjaXBoZXIiOiJNUGNnTUpJUXIyck9MeDJkdFNDdVJEQXdHdW9VbnphUDRCbm8zV3UrbDYwPSIsIklWIjoiTlVNd3BHa2V4Qzl5Z3dlNFV0WFI2Zz09IiwidmVyc2lvbiI6MX0%3D&failedSignInCount=1&openid.claimed_id=http%3A%2F%2Fspecs.openid.net%2Fauth%2F2.0%2Fidentifier_select&openid.ns=http%3A%2F%2Fspecs.openid.net%2Fauth%2F2.0&timestamp=1593096064000&use_audio_captcha=1'), '3': ('Hear a new challenge', 'https://alexa.amazon.com/ap/signin?showRememberMe=true&showRmrMe=1&openid.identity=http%3A%2F%2Fspecs.openid.net%2Fauth%2F2.0%2Fidentifier_select&forceValidateCaptcha=true&pageId=amzn_dp_project_dee&openid.return_to=https%3A%2F%2Falexa.amazon.com%2F&prevRID=TQ3MNES7AZXD3RMGZ30P&openid.assoc_handle=amzn_dp_project_dee&openid.mode=checkid_setup&prepopulatedLoginId=eyJjaXBoZXIiOiJNUGNnTUpJUXIyck9MeDJkdFNDdVJEQXdHdW9VbnphUDRCbm8zV3UrbDYwPSIsIklWIjoiTlVNd3BHa2V4Qzl5Z3dlNFV0WFI2Zz09IiwidmVyc2lvbiI6MX0%3D&failedSignInCount=1&openid.claimed_id=http%3A%2F%2Fspecs.openid.net%2Fauth%2F2.0%2Fidentifier_select&openid.ns=http%3A%2F%2Fspecs.openid.net%2Fauth%2F2.0&timestamp=1593096064000&use_audio_captcha=1'), '4': ('See the challenge', 'https://alexa.amazon.com/ap/signin?showRememberMe=true&showRmrMe=1&openid.identity=http%3A%2F%2Fspecs.openid.net%2Fauth%2F2.0%2Fidentifier_select&forceValidateCaptcha=true&pageId=amzn_dp_project_dee&openid.return_to=https%3A%2F%2Falexa.amazon.com%2F&prevRID=TQ3MNES7AZXD3RMGZ30P&openid.assoc_handle=amzn_dp_project_dee&openid.mode=checkid_setup&prepopulatedLoginId=eyJjaXBoZXIiOiJNUGNnTUpJUXIyck9MeDJkdFNDdVJEQXdHdW9VbnphUDRCbm8zV3UrbDYwPSIsIklWIjoiTlVNd3BHa2V4Qzl5Z3dlNFV0WFI2Zz09IiwidmVyc2lvbiI6MX0%3D&failedSignInCount=1&openid.claimed_id=http%3A%2F%2Fspecs.openid.net%2Fauth%2F2.0%2Fidentifier_select&openid.ns=http%3A%2F%2Fspecs.openid.net%2Fauth%2F2.0&timestamp=1593096064000&use_audio_captcha=0'), '5': ('Create a new Amazon account', 'https://www.amazon.com/ap/register?showRememberMe=true&showRmrMe=1&openid.identity=http%3A%2F%2Fspecs.openid.net%2Fauth%2F2.0%2Fidentifier_select&forceValidateCaptcha=true&use_audio_captcha=false&pageId=amzn_dp_project_dee&openid.return_to=https%3A%2F%2Falexa.amazon.com%2F&prevRID=TQ3MNES7AZXD3RMGZ30P&openid.assoc_handle=amzn_dp_project_dee&openid.mode=checkid_setup&prepopulatedLoginId=eyJjaXBoZXIiOiJNUGNnTUpJUXIyck9MeDJkdFNDdVJEQXdHdW9VbnphUDRCbm8zV3UrbDYwPSIsIklWIjoiTlVNd3BHa2V4Qzl5Z3dlNFV0WFI2Zz09IiwidmVyc2lvbiI6MX0%3D&failedSignInCount=1&openid.claimed_id=http%3A%2F%2Fspecs.openid.net%2Fauth%2F2.0%2Fidentifier_select&openid.ns=http%3A%2F%2Fspecs.openid.net%2Fauth%2F2.0&timestamp=1593096064000')}\r\n2020-06-25 10:51:55 DEBUG (MainThread) [alexapy.alexalogin] Error message: There was a problem\r\n            Enter the characters as they are given in the challenge.\r\n          \r\n2020-06-25 10:51:55 DEBUG (MainThread) [alexapy.alexalogin] Captcha requested\r\n2020-06-25 10:51:55 DEBUG (MainThread) [alexapy.alexalogin] Found form to process: <form action=\"https://www.amazon.com/ap/signin\" class=\"auth-validate-form auth-clearable-form\" method=\"post\" name=\"signIn\" novalidate=\"\">\r\n<input name=\"appActionToken\" type=\"hidden\" value=\"00U9ufyvRBuRYlj2FYhj2F5eYpj2BEmIsj3D\"/><input name=\"appAction\" type=\"hidden\" value=\"SIGNIN\"/>\r\n<input name=\"ces\" type=\"hidden\" value=\"ape:QUNTXzZGc1dydXhlSnc0aS9Wa0JiMm9pVDM5L2YzOEFBQUFBQUFBQUFUVDVjVjltbzNzbVRuV3E0THNHVkdDVWlQVFlwUklvZ0VTZ3BvbkZWODZjSExlcGNqTVluTHhPNVN5U2ZBcEdKV0N3R1NNREFvVU5QZ0lkOGIzV3NnckxzbVk3V2NIdFQrbHhta3JEcVYwUWFjRDBaZyttOCtmYVV4Mm4veWhrM01TdllqMzE5bHRmZWhPNGlISGhsZDlWejhJeW1IVmlqWDdvcUhYY3kwTnlWNm01WHNSdDNLUVFKZW80OVo3QzMrNmVwdnU0K1JNcFQ0d09RZDhva2theTh5SDBlbDNudlJsMk85Tk1Ta1FKQit6NThmQnltNVRxakp3UVI2cHppMXRtNUhRWk5QY244MnMwOVgrMDViN1lLcHZwaGJheFFXcUdKSk85V3NSTDF5RlJaV0pPcmp3U2xDNFVaejRWSDd3NDQ3RG5xOTR4aFFsUUgwT2Jic3M9\"/>\r\n<input name=\"openid.return_to\" type=\"hidden\" value=\"ape:aHR0cHM6Ly9hbGV4YS5hbWF6b24uY29tLw==\"/>\r\n<input name=\"prevRID\" type=\"hidden\" value=\"ape:VFEzTU5FUzdBWlhEM1JNR1ozMFA=\"/>\r\n<input name=\"workflowState\" type=\"hidden\" value=\"eyJ6aXAiOiJERUYiLCJlbmMiOiJBMjU2R0NNIiwiYWxnIjoiQTI1NktXIn0.6c5JzaJ-NeQPjdB-EeeAO-PhUEQMUrMxf_AfNnhJKSejENnfracKfQ.BuVciqgbNh5LmTTu.j4Fk8rLOTWGjxdAQhhpaPjI-qXra4jRoGQyVLSnGZTg2bPN3K_ve_esuxTy6fZ8e8oX78yghzGE9i59LXOo0rODUu1otP1l4J9s0HmGec8ZIUQFiSyzs2TEyLz579zV9EQn21Vnih_eVooau4B56w0kBf_JgYXRs8GvVIgWXs8EGYHcRVqeycFD7M5o1N-F4ls_bReNBQTAfK1stij3YaUMPLKwPXfOksaitbJm8lo-IeXy0Uz6oAwFv1B86Jz0uqb-GU66b0s1Vr2qMGeWMz3BaTyrLI7AxS9vtqyaxLQNJWa8doOaGtcF2hnJUio_JP0NtK3ANROJCKDY6x2QPn7--uiFBMToUQvSvNj4YRNZGnQI-FLk9KLKZikGB9fG38KWpZWxjp_MNcmDU0i0PEN3trxdOkJ2wVcXt8zOayfcSzNeV7X1Q6R66LO6V8yijDwxR_N8tNh4tXI1u2fkDrWjSF5mS8ukKwWZ8PJBwFRwiN9AJetdLDKajj6xZuc2UWqduKFJWU1Gq3OBJYSZdTVUBLR6AF2viqt95KA.JLdPTriC32M72Ioh-xjvFg\"/>\r\n<h1 class=\"a-spacing-micro a-spacing-top-small a-text-left\">\r\n  Sign-In\r\n</h1>\r\n<div class=\"a-section a-spacing-base a-text-right\">\r\n<a class=\"a-link-normal\" href=\"https://www.amazon.com/ap/forgotpassword?showRememberMe=true&amp;showRmrMe=1&amp;openid.identity=http%3A%2F%2Fspecs.openid.net%2Fauth%2F2.0%2Fidentifier_select&amp;forceValidateCaptcha=true&amp;use_audio_captcha=false&amp;pageId=amzn_dp_project_dee&amp;openid.return_to=https%3A%2F%2Falexa.amazon.com%2F&amp;prevRID=TQ3MNES7AZXD3RMGZ30P&amp;openid.assoc_handle=amzn_dp_project_dee&amp;openid.mode=checkid_setup&amp;prepopulatedLoginId=eyJjaXBoZXIiOiI0MUZlRWtUTnE5a2UxUlc0dGxzSEM3K3lMbEV3ZUFEYVlZdmFBbG9kM0tFPSIsIklWIjoieGdEWTRIMTBJS00vRUcxUHVJazVCZz09IiwidmVyc2lvbiI6MX0%3D&amp;failedSignInCount=1&amp;openid.claimed_id=http%3A%2F%2Fspecs.openid.net%2Fauth%2F2.0%2Fidentifier_select&amp;openid.ns=http%3A%2F%2Fspecs.openid.net%2Fauth%2F2.0&amp;timestamp=1593096064000\" id=\"auth-fpp-link-bottom\" rel=\"noopener\" tabindex=\"9\" target=\"_top\">\r\n  Forgot password?\r\n</a>\r\n</div>\r\n<div class=\"a-input-text-group a-spacing-medium a-spacing-top-micro\">\r\n<label class=\"a-form-label auth-mobile-label\" for=\"ap_email\">\r\n      Email (phone for mobile accounts)\r\n    </label>\r\n<div class=\"a-input-text-wrapper auth-required-field auth-fill-claim\"><input autocapitalize=\"off\" autocorrect=\"off\" id=\"ap_email\" maxlength=\"128\" name=\"email\" placeholder=\"Email (phone for mobile accounts)\" tabindex=\"1\" type=\"email\" value=\"MYEMAIL@gmail.com\"/></div>\r\n<div class=\"auth-clear-icons\" id=\"ap_email_icon\">\r\n<i class=\"a-icon a-icon-close\" role=\"img\"></i>\r\n</div>\r\n<script data-a-state='{\"key\":\"auth-show-password\"}' type=\"a-state\">{\"isShowPasswordEnabled\":true,\"showPasswordChecked\":false}</script>\r\n<label class=\"a-form-label auth-mobile-label\" for=\"ap_password\">\r\n  Amazon password\r\n</label>\r\n<div class=\"a-input-text-wrapper auth-required-field auth-password-container auth-password auth-fill-password\" id=\"auth-password-container\"><input id=\"ap_password\" maxlength=\"1024\" name=\"password\" placeholder=\"Amazon password\" tabindex=\"2\" type=\"password\"/></div>\r\n<div class=\"auth-clear-icons\" id=\"ap_password_icon\">\r\n<i class=\"a-icon a-icon-close\" role=\"img\"></i>\r\n</div>\r\n<div aria-live=\"assertive\" class=\"a-box a-alert-inline a-alert-inline-error auth-inlined-error-message a-spacing-top-mini\" id=\"auth-password-missing-alert\" role=\"alert\"><div class=\"a-box-inner a-alert-container\"><i class=\"a-icon a-icon-alert\"></i><div class=\"a-alert-content\">\r\n  Enter your password\r\n</div></div></div>\r\n<div class=\"a-row auth-visible-password-container auth-show-password-empty\">\r\n<span class=\"a-size-small a-color-secondary auth-visible-password\"></span>\r\n</div>\r\n<input id=\"ap_show_password_checked\" name=\"showPasswordChecked\" type=\"hidden\" value=\"false\"/>\r\n<input name=\"encryptedPasswordExpected\" type=\"hidden\"/>\r\n<script data-a-state='{\"key\":\"sif-encryption-profile\"}' type=\"a-state\">{\"sifProfile\":\"AuthenticationPortalSigninNA\"}</script>\r\n<script async=\"\" src=\"https://static.siege-amazon.com/prod/profiles/AuthenticationPortalSigninNA.js\" type=\"text/javascript\">\r\n</script>\r\n</div>\r\n<div class=\"a-row\">\r\n<div class=\"a-column a-span12 a-spacing-medium\">\r\n<div class=\"a-checkbox a-checkbox-fancy a-control-row a-touch-checkbox auth-show-password-checkbox\" id=\"auth-show-password-checkbox-container\"><label for=\"auth-show-password-checkbox\"><input id=\"auth-show-password-checkbox\" name=\"\" tabindex=\"3\" type=\"checkbox\" value=\"\"/><i class=\"a-icon a-icon-checkbox\"></i><span class=\"a-label a-checkbox-label\">\r\n          Show password\r\n        </span></label></div>\r\n</div>\r\n</div>\r\n<div class=\"a-row a-spacing-base\">\r\n<div class=\"a-checkbox a-checkbox-fancy a-control-row a-touch-checkbox\" data-a-input-name=\"rememberMe\"><label><input checked=\"\" name=\"rememberMe\" tabindex=\"4\" type=\"checkbox\" value=\"true\"/><i class=\"a-icon a-icon-checkbox\"></i><span class=\"a-label a-checkbox-label\">\r\n    Keep me signed in.\r\n    <span class=\"a-declarative\" data-a-modal='{\"max-width\":\"500px\",\"width\":\"95%\",\"name\":\"remember-me-detail-link-modal\",\"header\":\"\\\"Keep Me Signed In\\\" Checkbox\"}' data-action=\"a-modal\">\r\n<a class=\"a-link-normal\" href=\"#\" id=\"remember_me_learn_more_link\">\r\n        Details\r\n      </a>\r\n</span>\r\n<div class=\"a-popover-preload\" id=\"a-popover-remember-me-detail-link-modal\">\r\n<div class=\"a-section a-spacing-large a-spacing-top-mini\">\r\n<p>\r\n<p>Choosing \"Keep me signed in\" reduces the number of times you're asked to Sign-In on this device.</p>\r\n<p>To keep your account secure, use this option only on your personal devices.</p>\r\n</p>\r\n</div>\r\n</div>\r\n</span></label></div>\r\n</div>\r\n<div class=\"a-row\">\r\n<div class=\"a-box a-spacing-medium\"><div class=\"a-box-inner\">\r\n<div class=\"a-section a-spacing-small a-text-center\" id=\"image-captcha-section\">\r\n<input id=\"use_image_captcha\" name=\"use_image_captcha\" type=\"hidden\" value=\"true\"/>\r\n<div class=\"a-section a-text-center\" id=\"auth-captcha-image-container\">\r\n<img alt=\"Visual CAPTCHA image, continue down for an audio option.\" data-refresh-url=\"/ap/captcha?appAction=SIGNIN&amp;captchaObfuscationLevel=ape%3AaGFyZA%3D%3D&amp;captchaType=image&amp;marketPlaceId=ATVPDKIKX0DER\" id=\"auth-captcha-image\" src=\"https://opfcaptcha-prod.s3.amazonaws.com/f5022fdde07548ddbbb72a296db181ae.jpg?AWSAccessKeyId=AKIA5WBBRBBB22K4E62K&amp;Expires=1593097015&amp;Signature=HBCi1%2BnmKPnXkUT0pz1cQLLkKPM%3D\"/>\r\n</div>\r\n</div>\r\n<div class=\"a-section a-spacing-small auth-display-none\" id=\"audio-captcha-section\">\r\n<input id=\"use_audio_captcha\" name=\"use_audio_captcha\" type=\"hidden\" value=\"false\"/>\r\n<div class=\"a-section a-spacing-base a-spacing-top-base a-text-center\">\r\n<div class=\"a-section a-spacing-base a-text-center\" id=\"auth-captcha-audio-container\">\r\n<span class=\"a-button a-button-base\" id=\"audio-captcha-play-button\"><span class=\"a-button-inner\"><input aria-labelledby=\"audio-captcha-play-button-announce\" class=\"a-button-input\" id=\"audio-captcha-play-pause-button\" tabindex=\"5\" type=\"submit\"/><span aria-hidden=\"true\" class=\"a-button-text\" id=\"audio-captcha-play-button-announce\">\r\n    Play/Pause\r\n  </span></span></span>\r\n<audio id=\"audio-captcha\">\r\n<source data-refresh-url=\"/ap/captcha?appAction=SIGNIN&amp;captchaType=audio&amp;marketPlaceId=ATVPDKIKX0DER\" id=\"mp3-file\" src=\"https://opfcaptcha-prod.s3.amazonaws.com/f5022fdde07548ddbbb72a296db181ae.jpg?AWSAccessKeyId=AKIA5WBBRBBB22K4E62K&amp;Expires=1593097015&amp;Signature=HBCi1%2BnmKPnXkUT0pz1cQLLkKPM%3D\" type=\"audio/mpeg\"/>\r\n</audio>\r\n</div>\r\n</div>\r\n</div>\r\n<input id=\"image-captcha-placeholder\" name=\"\" type=\"hidden\" value=\"Type the characters above\"/>\r\n<input id=\"audio-captcha-placeholder\" name=\"\" type=\"hidden\" value=\"Type the characters you hear\"/>\r\n<label class=\"a-form-label auth-mobile-label\" for=\"auth-captcha-guess\">\r\n      Type characters\r\n    </label>\r\n<div class=\"a-row a-spacing-base\">\r\n<div class=\"a-input-text-wrapper a-spacing-base auth-required-field\"><input autocapitalize=\"off\" autocomplete=\"off\" autocorrect=\"off\" id=\"auth-captcha-guess\" name=\"guess\" placeholder=\"Type the characters above\" tabindex=\"5\" type=\"text\"/></div>\r\n<div class=\"auth-clear-icons\" id=\"auth_captcha_guess_icon\">\r\n<i class=\"a-icon a-icon-close\" role=\"img\"></i>\r\n</div>\r\n<div aria-live=\"assertive\" class=\"a-box a-alert-inline a-alert-inline-error auth-inlined-error-message a-spacing-top-mini\" id=\"auth-guess-missing-alert\" role=\"alert\"><div class=\"a-box-inner a-alert-container\"><i class=\"a-icon a-icon-alert\"></i><div class=\"a-alert-content\">\r\n  Enter the characters as they are given in the challenge.\r\n</div></div></div>\r\n</div>\r\n<div class=\"a-section a-spacing-mini\" id=\"image-captcha-options\">\r\n<div class=\"a-row\" id=\"auth-switch-captcha-to-audio-container\">\r\n<div class=\"a-column a-span12 a-text-center a-spacing-small\">\r\n<a class=\"a-link-normal\" href=\"/ap/signin?showRememberMe=true&amp;showRmrMe=1&amp;openid.identity=http%3A%2F%2Fspecs.openid.net%2Fauth%2F2.0%2Fidentifier_select&amp;forceValidateCaptcha=true&amp;pageId=amzn_dp_project_dee&amp;openid.return_to=https%3A%2F%2Falexa.amazon.com%2F&amp;prevRID=TQ3MNES7AZXD3RMGZ30P&amp;openid.assoc_handle=amzn_dp_project_dee&amp;openid.mode=checkid_setup&amp;prepopulatedLoginId=eyJjaXBoZXIiOiJNUGNnTUpJUXIyck9MeDJkdFNDdVJEQXdHdW9VbnphUDRCbm8zV3UrbDYwPSIsIklWIjoiTlVNd3BHa2V4Qzl5Z3dlNFV0WFI2Zz09IiwidmVyc2lvbiI6MX0%3D&amp;failedSignInCount=1&amp;openid.claimed_id=http%3A%2F%2Fspecs.openid.net%2Fauth%2F2.0%2Fidentifier_select&amp;openid.ns=http%3A%2F%2Fspecs.openid.net%2Fauth%2F2.0&amp;timestamp=1593096064000&amp;use_audio_captcha=0\" id=\"auth-captcha-refresh-link\" tabindex=\"5\">\r\n            See a new challenge\r\n          </a>\r\n<a class=\"a-link-normal\" href=\"javascript:void(0);\" id=\"auth-captcha-noop-link\">\r\n            See a new challenge\r\n          </a>\r\n</div>\r\n</div>\r\n<div class=\"a-row\">\r\n<div class=\"a-column a-span12 a-text-center a-spacing-small a-span-last\">\r\n<a class=\"a-link-normal\" href=\"/ap/signin?showRememberMe=true&amp;showRmrMe=1&amp;openid.identity=http%3A%2F%2Fspecs.openid.net%2Fauth%2F2.0%2Fidentifier_select&amp;forceValidateCaptcha=true&amp;pageId=amzn_dp_project_dee&amp;openid.return_to=https%3A%2F%2Falexa.amazon.com%2F&amp;prevRID=TQ3MNES7AZXD3RMGZ30P&amp;openid.assoc_handle=amzn_dp_project_dee&amp;openid.mode=checkid_setup&amp;prepopulatedLoginId=eyJjaXBoZXIiOiJNUGNnTUpJUXIyck9MeDJkdFNDdVJEQXdHdW9VbnphUDRCbm8zV3UrbDYwPSIsIklWIjoiTlVNd3BHa2V4Qzl5Z3dlNFV0WFI2Zz09IiwidmVyc2lvbiI6MX0%3D&amp;failedSignInCount=1&amp;openid.claimed_id=http%3A%2F%2Fspecs.openid.net%2Fauth%2F2.0%2Fidentifier_select&amp;openid.ns=http%3A%2F%2Fspecs.openid.net%2Fauth%2F2.0&amp;timestamp=1593096064000&amp;use_audio_captcha=1\" id=\"auth-switch-captcha-to-audio\" tabindex=\"5\">\r\n              Hear the challenge\r\n            </a>\r\n</div>\r\n</div>\r\n</div>\r\n<div class=\"a-section a-spacing-mini auth-display-none\" id=\"audio-captcha-options\">\r\n<div class=\"a-row\">\r\n<div class=\"a-column a-span12 a-text-center a-spacing-small\">\r\n<a class=\"a-link-normal\" href=\"/ap/signin?showRememberMe=true&amp;showRmrMe=1&amp;openid.identity=http%3A%2F%2Fspecs.openid.net%2Fauth%2F2.0%2Fidentifier_select&amp;forceValidateCaptcha=true&amp;pageId=amzn_dp_project_dee&amp;openid.return_to=https%3A%2F%2Falexa.amazon.com%2F&amp;prevRID=TQ3MNES7AZXD3RMGZ30P&amp;openid.assoc_handle=amzn_dp_project_dee&amp;openid.mode=checkid_setup&amp;prepopulatedLoginId=eyJjaXBoZXIiOiJNUGNnTUpJUXIyck9MeDJkdFNDdVJEQXdHdW9VbnphUDRCbm8zV3UrbDYwPSIsIklWIjoiTlVNd3BHa2V4Qzl5Z3dlNFV0WFI2Zz09IiwidmVyc2lvbiI6MX0%3D&amp;failedSignInCount=1&amp;openid.claimed_id=http%3A%2F%2Fspecs.openid.net%2Fauth%2F2.0%2Fidentifier_select&amp;openid.ns=http%3A%2F%2Fspecs.openid.net%2Fauth%2F2.0&amp;timestamp=1593096064000&amp;use_audio_captcha=1\" id=\"auth-refresh-audio\" tabindex=\"5\">\r\n              Hear a new challenge\r\n            </a>\r\n</div>\r\n</div>\r\n<div class=\"a-row\">\r\n<div class=\"a-column a-span12 a-text-center a-spacing-small\">\r\n<a class=\"a-link-normal\" href=\"/ap/signin?showRememberMe=true&amp;showRmrMe=1&amp;openid.identity=http%3A%2F%2Fspecs.openid.net%2Fauth%2F2.0%2Fidentifier_select&amp;forceValidateCaptcha=true&amp;pageId=amzn_dp_project_dee&amp;openid.return_to=https%3A%2F%2Falexa.amazon.com%2F&amp;prevRID=TQ3MNES7AZXD3RMGZ30P&amp;openid.assoc_handle=amzn_dp_project_dee&amp;openid.mode=checkid_setup&amp;prepopulatedLoginId=eyJjaXBoZXIiOiJNUGNnTUpJUXIyck9MeDJkdFNDdVJEQXdHdW9VbnphUDRCbm8zV3UrbDYwPSIsIklWIjoiTlVNd3BHa2V4Qzl5Z3dlNFV0WFI2Zz09IiwidmVyc2lvbiI6MX0%3D&amp;failedSignInCount=1&amp;openid.claimed_id=http%3A%2F%2Fspecs.openid.net%2Fauth%2F2.0%2Fidentifier_select&amp;openid.ns=http%3A%2F%2Fspecs.openid.net%2Fauth%2F2.0&amp;timestamp=1593096064000&amp;use_audio_captcha=0\" id=\"auth-switch-captcha-to-image\" tabindex=\"5\">\r\n              See the challenge\r\n            </a>\r\n</div>\r\n</div>\r\n</div>\r\n<script>\r\n  P.register('auth-captcha-cf');\r\n</script>\r\n</div></div>\r\n</div>\r\n<div class=\"a-section\">\r\n<div class=\"a-button-stack\">\r\n<span class=\"a-button a-button-span12 a-button-primary auth-share-credential-off\" id=\"auth-signin-button\"><span class=\"a-button-inner\"><input aria-labelledby=\"auth-signin-button-announce\" class=\"a-button-input\" id=\"signInSubmit\" tabindex=\"6\" type=\"submit\"/><span aria-hidden=\"true\" class=\"a-button-text\" id=\"auth-signin-button-announce\">\r\n            Sign-In\r\n          </span></span></span>\r\n<script>\r\n  function cf() {\r\n    if (typeof window.uet === 'function') {\r\n      uet('cf');\r\n    }\r\n    if (window.embedNotification &&\r\n      typeof window.embedNotification.onCF === 'function') {\r\n      embedNotification.onCF();\r\n    }\r\n  }\r\n</script>\r\n<script type=\"text/javascript\">cf()</script>\r\n<div class=\"a-section a-spacing-medium a-text-center\">\r\n<div class=\"a-divider a-divider-break\"><h5>New to Amazon?</h5></div>\r\n<span class=\"a-button a-button-span12 a-button-base\" id=\"auth-create-account-link\"><span class=\"a-button-inner\"><a class=\"a-button-text\" href=\"https://www.amazon.com/ap/register?showRememberMe=true&amp;showRmrMe=1&amp;openid.identity=http%3A%2F%2Fspecs.openid.net%2Fauth%2F2.0%2Fidentifier_select&amp;forceValidateCaptcha=true&amp;use_audio_captcha=false&amp;pageId=amzn_dp_project_dee&amp;openid.return_to=https%3A%2F%2Falexa.amazon.com%2F&amp;prevRID=TQ3MNES7AZXD3RMGZ30P&amp;openid.assoc_handle=amzn_dp_project_dee&amp;openid.mode=checkid_setup&amp;prepopulatedLoginId=eyJjaXBoZXIiOiJNUGNnTUpJUXIyck9MeDJkdFNDdVJEQXdHdW9VbnphUDRCbm8zV3UrbDYwPSIsIklWIjoiTlVNd3BHa2V4Qzl5Z3dlNFV0WFI2Zz09IiwidmVyc2lvbiI6MX0%3D&amp;failedSignInCount=1&amp;openid.claimed_id=http%3A%2F%2Fspecs.openid.net%2Fauth%2F2.0%2Fidentifier_select&amp;openid.ns=http%3A%2F%2Fspecs.openid.net%2Fauth%2F2.0&amp;timestamp=1593096064000\" id=\"createAccountSubmit\" role=\"button\" tabindex=\"7\">\r\n          Create a new Amazon account\r\n        </a></span></span>\r\n</div>\r\n</div>\r\n</div>\r\n</form>\r\n2020-06-25 10:51:55 DEBUG (MainThread) [alexapy.alexalogin] Found post url to https://www.amazon.com/ap/signin\r\n2020-06-25 10:51:55 DEBUG (MainThread) [custom_components.alexa_media.configurator] Testing login status: {'error_message': 'There was a problem\\n            Enter the characters as they are given in the challenge.\\n          ', 'captcha_required': True, 'captcha_image_url': 'https://opfcaptcha-prod.s3.amazonaws.com/f5022fdde07548ddbbb72a296db181ae.jpg?AWSAccessKeyId=AKIA5WBBRBBB22K4E62K&Expires=1593097015&Signature=HBCi1%2BnmKPnXkUT0pz1cQLLkKPM%3D'}\r\n2020-06-25 10:51:55 DEBUG (MainThread) [custom_components.alexa_media.configurator] Creating configurator to request captcha\r\n2020-06-25 10:52:06 DEBUG (MainThread) [custom_components.alexa_media.configurator] Configurator closed for Status: {'error_message': 'There was a problem\\n            Enter the characters as they are given in the challenge.\\n          ', 'captcha_required': True, 'captcha_image_url': 'https://opfcaptcha-prod.s3.amazonaws.com/f5022fdde07548ddbbb72a296db181ae.jpg?AWSAccessKeyId=AKIA5WBBRBBB22K4E62K&Expires=1593097015&Signature=HBCi1%2BnmKPnXkUT0pz1cQLLkKPM%3D'}\r\n got captcha: 7y2727 securitycode: None Claimsoption: None AuthSelectOption: None  VerificationCode: None\r\n2020-06-25 10:52:06 DEBUG (MainThread) [alexapy.alexalogin] No valid cookies for log in; using credentials\r\n2020-06-25 10:52:06 DEBUG (MainThread) [alexapy.alexalogin] Loaded last request to https://www.amazon.com/ap/signin \r\n2020-06-25 10:52:06 DEBUG (MainThread) [alexapy.alexalogin] Processing https://www.amazon.com/ap/signin\r\n2020-06-25 10:52:06 DEBUG (MainThread) [alexapy.alexalogin] Links: {'0': ('Forgot password?', 'https://www.amazon.com/ap/forgotpassword?showRememberMe=true&showRmrMe=1&openid.identity=http%3A%2F%2Fspecs.openid.net%2Fauth%2F2.0%2Fidentifier_select&forceValidateCaptcha=true&use_audio_captcha=false&pageId=amzn_dp_project_dee&openid.return_to=https%3A%2F%2Falexa.amazon.com%2F&prevRID=TQ3MNES7AZXD3RMGZ30P&openid.assoc_handle=amzn_dp_project_dee&openid.mode=checkid_setup&prepopulatedLoginId=eyJjaXBoZXIiOiI0MUZlRWtUTnE5a2UxUlc0dGxzSEM3K3lMbEV3ZUFEYVlZdmFBbG9kM0tFPSIsIklWIjoieGdEWTRIMTBJS00vRUcxUHVJazVCZz09IiwidmVyc2lvbiI6MX0%3D&failedSignInCount=1&openid.claimed_id=http%3A%2F%2Fspecs.openid.net%2Fauth%2F2.0%2Fidentifier_select&openid.ns=http%3A%2F%2Fspecs.openid.net%2Fauth%2F2.0&timestamp=1593096064000'), '1': ('See a new challenge', 'https://alexa.amazon.com/ap/signin?showRememberMe=true&showRmrMe=1&openid.identity=http%3A%2F%2Fspecs.openid.net%2Fauth%2F2.0%2Fidentifier_select&forceValidateCaptcha=true&pageId=amzn_dp_project_dee&openid.return_to=https%3A%2F%2Falexa.amazon.com%2F&prevRID=TQ3MNES7AZXD3RMGZ30P&openid.assoc_handle=amzn_dp_project_dee&openid.mode=checkid_setup&prepopulatedLoginId=eyJjaXBoZXIiOiJNUGNnTUpJUXIyck9MeDJkdFNDdVJEQXdHdW9VbnphUDRCbm8zV3UrbDYwPSIsIklWIjoiTlVNd3BHa2V4Qzl5Z3dlNFV0WFI2Zz09IiwidmVyc2lvbiI6MX0%3D&failedSignInCount=1&openid.claimed_id=http%3A%2F%2Fspecs.openid.net%2Fauth%2F2.0%2Fidentifier_select&openid.ns=http%3A%2F%2Fspecs.openid.net%2Fauth%2F2.0&timestamp=1593096064000&use_audio_captcha=0'), '2': ('Hear the challenge', 'https://alexa.amazon.com/ap/signin?showRememberMe=true&showRmrMe=1&openid.identity=http%3A%2F%2Fspecs.openid.net%2Fauth%2F2.0%2Fidentifier_select&forceValidateCaptcha=true&pageId=amzn_dp_project_dee&openid.return_to=https%3A%2F%2Falexa.amazon.com%2F&prevRID=TQ3MNES7AZXD3RMGZ30P&openid.assoc_handle=amzn_dp_project_dee&openid.mode=checkid_setup&prepopulatedLoginId=eyJjaXBoZXIiOiJNUGNnTUpJUXIyck9MeDJkdFNDdVJEQXdHdW9VbnphUDRCbm8zV3UrbDYwPSIsIklWIjoiTlVNd3BHa2V4Qzl5Z3dlNFV0WFI2Zz09IiwidmVyc2lvbiI6MX0%3D&failedSignInCount=1&openid.claimed_id=http%3A%2F%2Fspecs.openid.net%2Fauth%2F2.0%2Fidentifier_select&openid.ns=http%3A%2F%2Fspecs.openid.net%2Fauth%2F2.0&timestamp=1593096064000&use_audio_captcha=1'), '3': ('Hear a new challenge', 'https://alexa.amazon.com/ap/signin?showRememberMe=true&showRmrMe=1&openid.identity=http%3A%2F%2Fspecs.openid.net%2Fauth%2F2.0%2Fidentifier_select&forceValidateCaptcha=true&pageId=amzn_dp_project_dee&openid.return_to=https%3A%2F%2Falexa.amazon.com%2F&prevRID=TQ3MNES7AZXD3RMGZ30P&openid.assoc_handle=amzn_dp_project_dee&openid.mode=checkid_setup&prepopulatedLoginId=eyJjaXBoZXIiOiJNUGNnTUpJUXIyck9MeDJkdFNDdVJEQXdHdW9VbnphUDRCbm8zV3UrbDYwPSIsIklWIjoiTlVNd3BHa2V4Qzl5Z3dlNFV0WFI2Zz09IiwidmVyc2lvbiI6MX0%3D&failedSignInCount=1&openid.claimed_id=http%3A%2F%2Fspecs.openid.net%2Fauth%2F2.0%2Fidentifier_select&openid.ns=http%3A%2F%2Fspecs.openid.net%2Fauth%2F2.0&timestamp=1593096064000&use_audio_captcha=1'), '4': ('See the challenge', 'https://alexa.amazon.com/ap/signin?showRememberMe=true&showRmrMe=1&openid.identity=http%3A%2F%2Fspecs.openid.net%2Fauth%2F2.0%2Fidentifier_select&forceValidateCaptcha=true&pageId=amzn_dp_project_dee&openid.return_to=https%3A%2F%2Falexa.amazon.com%2F&prevRID=TQ3MNES7AZXD3RMGZ30P&openid.assoc_handle=amzn_dp_project_dee&openid.mode=checkid_setup&prepopulatedLoginId=eyJjaXBoZXIiOiJNUGNnTUpJUXIyck9MeDJkdFNDdVJEQXdHdW9VbnphUDRCbm8zV3UrbDYwPSIsIklWIjoiTlVNd3BHa2V4Qzl5Z3dlNFV0WFI2Zz09IiwidmVyc2lvbiI6MX0%3D&failedSignInCount=1&openid.claimed_id=http%3A%2F%2Fspecs.openid.net%2Fauth%2F2.0%2Fidentifier_select&openid.ns=http%3A%2F%2Fspecs.openid.net%2Fauth%2F2.0&timestamp=1593096064000&use_audio_captcha=0'), '5': ('Create a new Amazon account', 'https://www.amazon.com/ap/register?showRememberMe=true&showRmrMe=1&openid.identity=http%3A%2F%2Fspecs.openid.net%2Fauth%2F2.0%2Fidentifier_select&forceValidateCaptcha=true&use_audio_captcha=false&pageId=amzn_dp_project_dee&openid.return_to=https%3A%2F%2Falexa.amazon.com%2F&prevRID=TQ3MNES7AZXD3RMGZ30P&openid.assoc_handle=amzn_dp_project_dee&openid.mode=checkid_setup&prepopulatedLoginId=eyJjaXBoZXIiOiJNUGNnTUpJUXIyck9MeDJkdFNDdVJEQXdHdW9VbnphUDRCbm8zV3UrbDYwPSIsIklWIjoiTlVNd3BHa2V4Qzl5Z3dlNFV0WFI2Zz09IiwidmVyc2lvbiI6MX0%3D&failedSignInCount=1&openid.claimed_id=http%3A%2F%2Fspecs.openid.net%2Fauth%2F2.0%2Fidentifier_select&openid.ns=http%3A%2F%2Fspecs.openid.net%2Fauth%2F2.0&timestamp=1593096064000')}\r\n2020-06-25 10:52:06 DEBUG (MainThread) [alexapy.alexalogin] Error message: There was a problem\r\n            Enter the characters as they are given in the challenge.\r\n          \r\n2020-06-25 10:52:06 DEBUG (MainThread) [alexapy.alexalogin] Captcha requested\r\n2020-06-25 10:52:06 DEBUG (MainThread) [alexapy.alexalogin] Found form to process: <form action=\"https://www.amazon.com/ap/signin\" class=\"auth-validate-form auth-clearable-form\" method=\"post\" name=\"signIn\" novalidate=\"\">\r\n<input name=\"appActionToken\" type=\"hidden\" value=\"00U9ufyvRBuRYlj2FYhj2F5eYpj2BEmIsj3D\"/><input name=\"appAction\" type=\"hidden\" value=\"SIGNIN\"/>\r\n<input name=\"ces\" type=\"hidden\" value=\"ape:QUNTXzZGc1dydXhlSnc0aS9Wa0JiMm9pVDM5L2YzOEFBQUFBQUFBQUFUVDVjVjltbzNzbVRuV3E0THNHVkdDVWlQVFlwUklvZ0VTZ3BvbkZWODZjSExlcGNqTVluTHhPNVN5U2ZBcEdKV0N3R1NNREFvVU5QZ0lkOGIzV3NnckxzbVk3V2NIdFQrbHhta3JEcVYwUWFjRDBaZyttOCtmYVV4Mm4veWhrM01TdllqMzE5bHRmZWhPNGlISGhsZDlWejhJeW1IVmlqWDdvcUhYY3kwTnlWNm01WHNSdDNLUVFKZW80OVo3QzMrNmVwdnU0K1JNcFQ0d09RZDhva2theTh5SDBlbDNudlJsMk85Tk1Ta1FKQit6NThmQnltNVRxakp3UVI2cHppMXRtNUhRWk5QY244MnMwOVgrMDViN1lLcHZwaGJheFFXcUdKSk85V3NSTDF5RlJaV0pPcmp3U2xDNFVaejRWSDd3NDQ3RG5xOTR4aFFsUUgwT2Jic3M9\"/>\r\n<input name=\"openid.return_to\" type=\"hidden\" value=\"ape:aHR0cHM6Ly9hbGV4YS5hbWF6b24uY29tLw==\"/>\r\n<input name=\"prevRID\" type=\"hidden\" value=\"ape:VFEzTU5FUzdBWlhEM1JNR1ozMFA=\"/>\r\n<input name=\"workflowState\" type=\"hidden\" value=\"eyJ6aXAiOiJERUYiLCJlbmMiOiJBMjU2R0NNIiwiYWxnIjoiQTI1NktXIn0.6c5JzaJ-NeQPjdB-EeeAO-PhUEQMUrMxf_AfNnhJKSejENnfracKfQ.BuVciqgbNh5LmTTu.j4Fk8rLOTWGjxdAQhhpaPjI-qXra4jRoGQyVLSnGZTg2bPN3K_ve_esuxTy6fZ8e8oX78yghzGE9i59LXOo0rODUu1otP1l4J9s0HmGec8ZIUQFiSyzs2TEyLz579zV9EQn21Vnih_eVooau4B56w0kBf_JgYXRs8GvVIgWXs8EGYHcRVqeycFD7M5o1N-F4ls_bReNBQTAfK1stij3YaUMPLKwPXfOksaitbJm8lo-IeXy0Uz6oAwFv1B86Jz0uqb-GU66b0s1Vr2qMGeWMz3BaTyrLI7AxS9vtqyaxLQNJWa8doOaGtcF2hnJUio_JP0NtK3ANROJCKDY6x2QPn7--uiFBMToUQvSvNj4YRNZGnQI-FLk9KLKZikGB9fG38KWpZWxjp_MNcmDU0i0PEN3trxdOkJ2wVcXt8zOayfcSzNeV7X1Q6R66LO6V8yijDwxR_N8tNh4tXI1u2fkDrWjSF5mS8ukKwWZ8PJBwFRwiN9AJetdLDKajj6xZuc2UWqduKFJWU1Gq3OBJYSZdTVUBLR6AF2viqt95KA.JLdPTriC32M72Ioh-xjvFg\"/>\r\n<h1 class=\"a-spacing-micro a-spacing-top-small a-text-left\">\r\n  Sign-In\r\n</h1>\r\n<div class=\"a-section a-spacing-base a-text-right\">\r\n<a class=\"a-link-normal\" href=\"https://www.amazon.com/ap/forgotpassword?showRememberMe=true&amp;showRmrMe=1&amp;openid.identity=http%3A%2F%2Fspecs.openid.net%2Fauth%2F2.0%2Fidentifier_select&amp;forceValidateCaptcha=true&amp;use_audio_captcha=false&amp;pageId=amzn_dp_project_dee&amp;openid.return_to=https%3A%2F%2Falexa.amazon.com%2F&amp;prevRID=TQ3MNES7AZXD3RMGZ30P&amp;openid.assoc_handle=amzn_dp_project_dee&amp;openid.mode=checkid_setup&amp;prepopulatedLoginId=eyJjaXBoZXIiOiI0MUZlRWtUTnE5a2UxUlc0dGxzSEM3K3lMbEV3ZUFEYVlZdmFBbG9kM0tFPSIsIklWIjoieGdEWTRIMTBJS00vRUcxUHVJazVCZz09IiwidmVyc2lvbiI6MX0%3D&amp;failedSignInCount=1&amp;openid.claimed_id=http%3A%2F%2Fspecs.openid.net%2Fauth%2F2.0%2Fidentifier_select&amp;openid.ns=http%3A%2F%2Fspecs.openid.net%2Fauth%2F2.0&amp;timestamp=1593096064000\" id=\"auth-fpp-link-bottom\" rel=\"noopener\" tabindex=\"9\" target=\"_top\">\r\n  Forgot password?\r\n</a>\r\n</div>\r\n<div class=\"a-input-text-group a-spacing-medium a-spacing-top-micro\">\r\n<label class=\"a-form-label auth-mobile-label\" for=\"ap_email\">\r\n      Email (phone for mobile accounts)\r\n    </label>\r\n<div class=\"a-input-text-wrapper auth-required-field auth-fill-claim\"><input autocapitalize=\"off\" autocorrect=\"off\" id=\"ap_email\" maxlength=\"128\" name=\"email\" placeholder=\"Email (phone for mobile accounts)\" tabindex=\"1\" type=\"email\" value=\"@gmail.com\"/></div>\r\n<div class=\"auth-clear-icons\" id=\"ap_email_icon\">\r\n<i class=\"a-icon a-icon-close\" role=\"img\"></i>\r\n</div>\r\n<script data-a-state='{\"key\":\"auth-show-password\"}' type=\"a-state\">{\"isShowPasswordEnabled\":true,\"showPasswordChecked\":false}</script>\r\n<label class=\"a-form-label auth-mobile-label\" for=\"ap_password\">\r\n  Amazon password\r\n</label>\r\n<div class=\"a-input-text-wrapper auth-required-field auth-password-container auth-password auth-fill-password\" id=\"auth-password-container\"><input id=\"ap_password\" maxlength=\"1024\" name=\"password\" placeholder=\"Amazon password\" tabindex=\"2\" type=\"password\"/></div>\r\n<div class=\"auth-clear-icons\" id=\"ap_password_icon\">\r\n<i class=\"a-icon a-icon-close\" role=\"img\"></i>\r\n</div>\r\n<div aria-live=\"assertive\" class=\"a-box a-alert-inline a-alert-inline-error auth-inlined-error-message a-spacing-top-mini\" id=\"auth-password-missing-alert\" role=\"alert\"><div class=\"a-box-inner a-alert-container\"><i class=\"a-icon a-icon-alert\"></i><div class=\"a-alert-content\">\r\n  Enter your password\r\n</div></div></div>\r\n<div class=\"a-row auth-visible-password-container auth-show-password-empty\">\r\n<span class=\"a-size-small a-color-secondary auth-visible-password\"></span>\r\n</div>\r\n<input id=\"ap_show_password_checked\" name=\"showPasswordChecked\" type=\"hidden\" value=\"false\"/>\r\n<input name=\"encryptedPasswordExpected\" type=\"hidden\"/>\r\n<script data-a-state='{\"key\":\"sif-encryption-profile\"}' type=\"a-state\">{\"sifProfile\":\"AuthenticationPortalSigninNA\"}</script>\r\n<script async=\"\" src=\"https://static.siege-amazon.com/prod/profiles/AuthenticationPortalSigninNA.js\" type=\"text/javascript\">\r\n</script>\r\n</div>\r\n<div class=\"a-row\">\r\n<div class=\"a-column a-span12 a-spacing-medium\">\r\n<div class=\"a-checkbox a-checkbox-fancy a-control-row a-touch-checkbox auth-show-password-checkbox\" id=\"auth-show-password-checkbox-container\"><label for=\"auth-show-password-checkbox\"><input id=\"auth-show-password-checkbox\" name=\"\" tabindex=\"3\" type=\"checkbox\" value=\"\"/><i class=\"a-icon a-icon-checkbox\"></i><span class=\"a-label a-checkbox-label\">\r\n          Show password\r\n        </span></label></div>\r\n</div>\r\n</div>\r\n<div class=\"a-row a-spacing-base\">\r\n<div class=\"a-checkbox a-checkbox-fancy a-control-row a-touch-checkbox\" data-a-input-name=\"rememberMe\"><label><input checked=\"\" name=\"rememberMe\" tabindex=\"4\" type=\"checkbox\" value=\"true\"/><i class=\"a-icon a-icon-checkbox\"></i><span class=\"a-label a-checkbox-label\">\r\n    Keep me signed in.\r\n    <span class=\"a-declarative\" data-a-modal='{\"max-width\":\"500px\",\"width\":\"95%\",\"name\":\"remember-me-detail-link-modal\",\"header\":\"\\\"Keep Me Signed In\\\" Checkbox\"}' data-action=\"a-modal\">\r\n<a class=\"a-link-normal\" href=\"#\" id=\"remember_me_learn_more_link\">\r\n        Details\r\n      </a>\r\n</span>\r\n<div class=\"a-popover-preload\" id=\"a-popover-remember-me-detail-link-modal\">\r\n<div class=\"a-section a-spacing-large a-spacing-top-mini\">\r\n<p>\r\n<p>Choosing \"Keep me signed in\" reduces the number of times you're asked to Sign-In on this device.</p>\r\n<p>To keep your account secure, use this option only on your personal devices.</p>\r\n</p>\r\n</div>\r\n</div>\r\n</span></label></div>\r\n</div>\r\n<div class=\"a-row\">\r\n<div class=\"a-box a-spacing-medium\"><div class=\"a-box-inner\">\r\n<div class=\"a-section a-spacing-small a-text-center\" id=\"image-captcha-section\">\r\n<input id=\"use_image_captcha\" name=\"use_image_captcha\" type=\"hidden\" value=\"true\"/>\r\n<div class=\"a-section a-text-center\" id=\"auth-captcha-image-container\">\r\n<img alt=\"Visual CAPTCHA image, continue down for an audio option.\" data-refresh-url=\"/ap/captcha?appAction=SIGNIN&amp;captchaObfuscationLevel=ape%3AaGFyZA%3D%3D&amp;captchaType=image&amp;marketPlaceId=ATVPDKIKX0DER\" id=\"auth-captcha-image\" src=\"https://opfcaptcha-prod.s3.amazonaws.com/f5022fdde07548ddbbb72a296db181ae.jpg?AWSAccessKeyId=AKIA5WBBRBBB22K4E62K&amp;Expires=1593097015&amp;Signature=HBCi1%2BnmKPnXkUT0pz1cQLLkKPM%3D\"/>\r\n</div>\r\n</div>\r\n<div class=\"a-section a-spacing-small auth-display-none\" id=\"audio-captcha-section\">\r\n<input id=\"use_audio_captcha\" name=\"use_audio_captcha\" type=\"hidden\" value=\"false\"/>\r\n<div class=\"a-section a-spacing-base a-spacing-top-base a-text-center\">\r\n<div class=\"a-section a-spacing-base a-text-center\" id=\"auth-captcha-audio-container\">\r\n<span class=\"a-button a-button-base\" id=\"audio-captcha-play-button\"><span class=\"a-button-inner\"><input aria-labelledby=\"audio-captcha-play-button-announce\" class=\"a-button-input\" id=\"audio-captcha-play-pause-button\" tabindex=\"5\" type=\"submit\"/><span aria-hidden=\"true\" class=\"a-button-text\" id=\"audio-captcha-play-button-announce\">\r\n    Play/Pause\r\n  </span></span></span>\r\n<audio id=\"audio-captcha\">\r\n<source data-refresh-url=\"/ap/captcha?appAction=SIGNIN&amp;captchaType=audio&amp;marketPlaceId=ATVPDKIKX0DER\" id=\"mp3-file\" src=\"https://opfcaptcha-prod.s3.amazonaws.com/f5022fdde07548ddbbb72a296db181ae.jpg?AWSAccessKeyId=AKIA5WBBRBBB22K4E62K&amp;Expires=1593097015&amp;Signature=HBCi1%2BnmKPnXkUT0pz1cQLLkKPM%3D\" type=\"audio/mpeg\"/>\r\n</audio>\r\n</div>\r\n</div>\r\n</div>\r\n<input id=\"image-captcha-placeholder\" name=\"\" type=\"hidden\" value=\"Type the characters above\"/>\r\n<input id=\"audio-captcha-placeholder\" name=\"\" type=\"hidden\" value=\"Type the characters you hear\"/>\r\n<label class=\"a-form-label auth-mobile-label\" for=\"auth-captcha-guess\">\r\n      Type characters\r\n    </label>\r\n<div class=\"a-row a-spacing-base\">\r\n<div class=\"a-input-text-wrapper a-spacing-base auth-required-field\"><input autocapitalize=\"off\" autocomplete=\"off\" autocorrect=\"off\" id=\"auth-captcha-guess\" name=\"guess\" placeholder=\"Type the characters above\" tabindex=\"5\" type=\"text\"/></div>\r\n<div class=\"auth-clear-icons\" id=\"auth_captcha_guess_icon\">\r\n<i class=\"a-icon a-icon-close\" role=\"img\"></i>\r\n</div>\r\n<div aria-live=\"assertive\" class=\"a-box a-alert-inline a-alert-inline-error auth-inlined-error-message a-spacing-top-mini\" id=\"auth-guess-missing-alert\" role=\"alert\"><div class=\"a-box-inner a-alert-container\"><i class=\"a-icon a-icon-alert\"></i><div class=\"a-alert-content\">\r\n  Enter the characters as they are given in the challenge.\r\n</div></div></div>\r\n</div>\r\n<div class=\"a-section a-spacing-mini\" id=\"image-captcha-options\">\r\n<div class=\"a-row\" id=\"auth-switch-captcha-to-audio-container\">\r\n<div class=\"a-column a-span12 a-text-center a-spacing-small\">\r\n<a class=\"a-link-normal\" href=\"/ap/signin?showRememberMe=true&amp;showRmrMe=1&amp;openid.identity=http%3A%2F%2Fspecs.openid.net%2Fauth%2F2.0%2Fidentifier_select&amp;forceValidateCaptcha=true&amp;pageId=amzn_dp_project_dee&amp;openid.return_to=https%3A%2F%2Falexa.amazon.com%2F&amp;prevRID=TQ3MNES7AZXD3RMGZ30P&amp;openid.assoc_handle=amzn_dp_project_dee&amp;openid.mode=checkid_setup&amp;prepopulatedLoginId=eyJjaXBoZXIiOiJNUGNnTUpJUXIyck9MeDJkdFNDdVJEQXdHdW9VbnphUDRCbm8zV3UrbDYwPSIsIklWIjoiTlVNd3BHa2V4Qzl5Z3dlNFV0WFI2Zz09IiwidmVyc2lvbiI6MX0%3D&amp;failedSignInCount=1&amp;openid.claimed_id=http%3A%2F%2Fspecs.openid.net%2Fauth%2F2.0%2Fidentifier_select&amp;openid.ns=http%3A%2F%2Fspecs.openid.net%2Fauth%2F2.0&amp;timestamp=1593096064000&amp;use_audio_captcha=0\" id=\"auth-captcha-refresh-link\" tabindex=\"5\">\r\n            See a new challenge\r\n          </a>\r\n<a class=\"a-link-normal\" href=\"javascript:void(0);\" id=\"auth-captcha-noop-link\">\r\n            See a new challenge\r\n          </a>\r\n</div>\r\n</div>\r\n<div class=\"a-row\">\r\n<div class=\"a-column a-span12 a-text-center a-spacing-small a-span-last\">\r\n<a class=\"a-link-normal\" href=\"/ap/signin?showRememberMe=true&amp;showRmrMe=1&amp;openid.identity=http%3A%2F%2Fspecs.openid.net%2Fauth%2F2.0%2Fidentifier_select&amp;forceValidateCaptcha=true&amp;pageId=amzn_dp_project_dee&amp;openid.return_to=https%3A%2F%2Falexa.amazon.com%2F&amp;prevRID=TQ3MNES7AZXD3RMGZ30P&amp;openid.assoc_handle=amzn_dp_project_dee&amp;openid.mode=checkid_setup&amp;prepopulatedLoginId=eyJjaXBoZXIiOiJNUGNnTUpJUXIyck9MeDJkdFNDdVJEQXdHdW9VbnphUDRCbm8zV3UrbDYwPSIsIklWIjoiTlVNd3BHa2V4Qzl5Z3dlNFV0WFI2Zz09IiwidmVyc2lvbiI6MX0%3D&amp;failedSignInCount=1&amp;openid.claimed_id=http%3A%2F%2Fspecs.openid.net%2Fauth%2F2.0%2Fidentifier_select&amp;openid.ns=http%3A%2F%2Fspecs.openid.net%2Fauth%2F2.0&amp;timestamp=1593096064000&amp;use_audio_captcha=1\" id=\"auth-switch-captcha-to-audio\" tabindex=\"5\">\r\n              Hear the challenge\r\n            </a>\r\n</div>\r\n</div>\r\n</div>\r\n<div class=\"a-section a-spacing-mini auth-display-none\" id=\"audio-captcha-options\">\r\n<div class=\"a-row\">\r\n<div class=\"a-column a-span12 a-text-center a-spacing-small\">\r\n<a class=\"a-link-normal\" href=\"/ap/signin?showRememberMe=true&amp;showRmrMe=1&amp;openid.identity=http%3A%2F%2Fspecs.openid.net%2Fauth%2F2.0%2Fidentifier_select&amp;forceValidateCaptcha=true&amp;pageId=amzn_dp_project_dee&amp;openid.return_to=https%3A%2F%2Falexa.amazon.com%2F&amp;prevRID=TQ3MNES7AZXD3RMGZ30P&amp;openid.assoc_handle=amzn_dp_project_dee&amp;openid.mode=checkid_setup&amp;prepopulatedLoginId=eyJjaXBoZXIiOiJNUGNnTUpJUXIyck9MeDJkdFNDdVJEQXdHdW9VbnphUDRCbm8zV3UrbDYwPSIsIklWIjoiTlVNd3BHa2V4Qzl5Z3dlNFV0WFI2Zz09IiwidmVyc2lvbiI6MX0%3D&amp;failedSignInCount=1&amp;openid.claimed_id=http%3A%2F%2Fspecs.openid.net%2Fauth%2F2.0%2Fidentifier_select&amp;openid.ns=http%3A%2F%2Fspecs.openid.net%2Fauth%2F2.0&amp;timestamp=1593096064000&amp;use_audio_captcha=1\" id=\"auth-refresh-audio\" tabindex=\"5\">\r\n              Hear a new challenge\r\n            </a>\r\n</div>\r\n</div>\r\n<div class=\"a-row\">\r\n<div class=\"a-column a-span12 a-text-center a-spacing-small\">\r\n<a class=\"a-link-normal\" href=\"/ap/signin?showRememberMe=true&amp;showRmrMe=1&amp;openid.identity=http%3A%2F%2Fspecs.openid.net%2Fauth%2F2.0%2Fidentifier_select&amp;forceValidateCaptcha=true&amp;pageId=amzn_dp_project_dee&amp;openid.return_to=https%3A%2F%2Falexa.amazon.com%2F&amp;prevRID=TQ3MNES7AZXD3RMGZ30P&amp;openid.assoc_handle=amzn_dp_project_dee&amp;openid.mode=checkid_setup&amp;prepopulatedLoginId=eyJjaXBoZXIiOiJNUGNnTUpJUXIyck9MeDJkdFNDdVJEQXdHdW9VbnphUDRCbm8zV3UrbDYwPSIsIklWIjoiTlVNd3BHa2V4Qzl5Z3dlNFV0WFI2Zz09IiwidmVyc2lvbiI6MX0%3D&amp;failedSignInCount=1&amp;openid.claimed_id=http%3A%2F%2Fspecs.openid.net%2Fauth%2F2.0%2Fidentifier_select&amp;openid.ns=http%3A%2F%2Fspecs.openid.net%2Fauth%2F2.0&amp;timestamp=1593096064000&amp;use_audio_captcha=0\" id=\"auth-switch-captcha-to-image\" tabindex=\"5\">\r\n              See the challenge\r\n            </a>\r\n</div>\r\n</div>\r\n</div>\r\n<script>\r\n  P.register('auth-captcha-cf');\r\n</script>\r\n</div></div>\r\n</div>\r\n<div class=\"a-section\">\r\n<div class=\"a-button-stack\">\r\n<span class=\"a-button a-button-span12 a-button-primary auth-share-credential-off\" id=\"auth-signin-button\"><span class=\"a-button-inner\"><input aria-labelledby=\"auth-signin-button-announce\" class=\"a-button-input\" id=\"signInSubmit\" tabindex=\"6\" type=\"submit\"/><span aria-hidden=\"true\" class=\"a-button-text\" id=\"auth-signin-button-announce\">\r\n            Sign-In\r\n          </span></span></span>\r\n<script>\r\n  function cf() {\r\n    if (typeof window.uet === 'function') {\r\n      uet('cf');\r\n    }\r\n    if (window.embedNotification &&\r\n      typeof window.embedNotification.onCF === 'function') {\r\n      embedNotification.onCF();\r\n    }\r\n  }\r\n</script>\r\n<script type=\"text/javascript\">cf()</script>\r\n<div class=\"a-section a-spacing-medium a-text-center\">\r\n<div class=\"a-divider a-divider-break\"><h5>New to Amazon?</h5></div>\r\n<span class=\"a-button a-button-span12 a-button-base\" id=\"auth-create-account-link\"><span class=\"a-button-inner\"><a class=\"a-button-text\" href=\"https://www.amazon.com/ap/register?showRememberMe=true&amp;showRmrMe=1&amp;openid.identity=http%3A%2F%2Fspecs.openid.net%2Fauth%2F2.0%2Fidentifier_select&amp;forceValidateCaptcha=true&amp;use_audio_captcha=false&amp;pageId=amzn_dp_project_dee&amp;openid.return_to=https%3A%2F%2Falexa.amazon.com%2F&amp;prevRID=TQ3MNES7AZXD3RMGZ30P&amp;openid.assoc_handle=amzn_dp_project_dee&amp;openid.mode=checkid_setup&amp;prepopulatedLoginId=eyJjaXBoZXIiOiJNUGNnTUpJUXIyck9MeDJkdFNDdVJEQXdHdW9VbnphUDRCbm8zV3UrbDYwPSIsIklWIjoiTlVNd3BHa2V4Qzl5Z3dlNFV0WFI2Zz09IiwidmVyc2lvbiI6MX0%3D&amp;failedSignInCount=1&amp;openid.claimed_id=http%3A%2F%2Fspecs.openid.net%2Fauth%2F2.0%2Fidentifier_select&amp;openid.ns=http%3A%2F%2Fspecs.openid.net%2Fauth%2F2.0&amp;timestamp=1593096064000\" id=\"createAccountSubmit\" role=\"button\" tabindex=\"7\">\r\n          Create a new Amazon account\r\n        </a></span></span>\r\n</div>\r\n</div>\r\n</div>\r\n</form>\r\n2020-06-25 10:52:06 DEBUG (MainThread) [alexapy.alexalogin] Found post url to https://www.amazon.com/ap/signin\r\n2020-06-25 10:52:06 DEBUG (MainThread) [alexapy.alexalogin] Preparing post to https://www.amazon.com/ap/signin with input data: {'captcha': '7y2727'}\r\n2020-06-25 10:52:06 DEBUG (MainThread) [alexapy.alexalogin] WARNING: Detected missing params: True\r\n2020-06-25 10:52:06 DEBUG (MainThread) [alexapy.alexalogin] Session Cookies:\r\namazon.com: expires:Fri, 25-Jun-2021 14:51:55 GMT max-age: session-id=132-4782048-0393153\r\namazon.com: expires:Fri, 25-Jun-2021 14:51:55 GMT max-age: session-id-time=2223816715l\r\namazon.com: expires:Fri, 25-Jun-2021 14:51:55 GMT max-age: ubid-main=131-9865953-3328838\r\namazon.com: expires:Fri, 25-Jun-2021 14:51:55 GMT max-age: session-token=1MV1ThkYZenoC2d4V0c/ndVJyE5AvY/gwKBkYcLY5cjsi9B9RB4C4a8RG+MOn3Ow4Z0D2lBWe2a2ZNmlItRnnwMosYH2BxOT2DKFouZij5bmEc3VYb6OPH39e87A0o68lPHdrfxyeVFi65YZheZjUDZQ+OXFknsW+HQPgEWtEvhsZg9u2maYSGg4w2F343IbWSOWAF6XO2P7A4Zp5p/kzGFoZRlB5YsQ\r\n\r\n2020-06-25 10:52:06 DEBUG (MainThread) [alexapy.alexalogin] Submit Form Data: {\"appActionToken\": \"00U9ufyvRBuRYlj2FYhj2F5eYpj2BEmIsj3D\", \"appAction\": \"SIGNIN\", \"ces\": \"ape:QUNTXzZGc1dydXhlSnc0aS9Wa0JiMm9pVDM5L2YzOEFBQUFBQUFBQUFUVDVjVjltbzNzbVRuV3E0THNHVkdDVWlQVFlwUklvZ0VTZ3BvbkZWODZjSExlcGNqTVluTHhPNVN5U2ZBcEdKV0N3R1NNREFvVU5QZ0lkOGIzV3NnckxzbVk3V2NIdFQrbHhta3JEcVYwUWFjRDBaZyttOCtmYVV4Mm4veWhrM01TdllqMzE5bHRmZWhPNGlISGhsZDlWejhJeW1IVmlqWDdvcUhYY3kwTnlWNm01WHNSdDNLUVFKZW80OVo3QzMrNmVwdnU0K1JNcFQ0d09RZDhva2theTh5SDBlbDNudlJsMk85Tk1Ta1FKQit6NThmQnltNVRxakp3UVI2cHppMXRtNUhRWk5QY244MnMwOVgrMDViN1lLcHZwaGJheFFXcUdKSk85V3NSTDF5RlJaV0pPcmp3U2xDNFVaejRWSDd3NDQ3RG5xOTR4aFFsUUgwT2Jic3M9\", \"openid.return_to\": \"ape:aHR0cHM6Ly9hbGV4YS5hbWF6b24uY29tLw==\", \"prevRID\": \"ape:VFEzTU5FUzdBWlhEM1JNR1ozMFA=\", \"workflowState\": \"eyJ6aXAiOiJERUYiLCJlbmMiOiJBMjU2R0NNIiwiYWxnIjoiQTI1NktXIn0.6c5JzaJ-NeQPjdB-EeeAO-PhUEQMUrMxf_AfNnhJKSejENnfracKfQ.BuVciqgbNh5LmTTu.j4Fk8rLOTWGjxdAQhhpaPjI-qXra4jRoGQyVLSnGZTg2bPN3K_ve_esuxTy6fZ8e8oX78yghzGE9i59LXOo0rODUu1otP1l4J9s0HmGec8ZIUQFiSyzs2TEyLz579zV9EQn21Vnih_eVooau4B56w0kBf_JgYXRs8GvVIgWXs8EGYHcRVqeycFD7M5o1N-F4ls_bReNBQTAfK1stij3YaUMPLKwPXfOksaitbJm8lo-IeXy0Uz6oAwFv1B86Jz0uqb-GU66b0s1Vr2qMGeWMz3BaTyrLI7AxS9vtqyaxLQNJWa8doOaGtcF2hnJUio_JP0NtK3ANROJCKDY6x2QPn7--uiFBMToUQvSvNj4YRNZGnQI-FLk9KLKZikGB9fG38KWpZWxjp_MNcmDU0i0PEN3trxdOkJ2wVcXt8zOayfcSzNeV7X1Q6R66LO6V8yijDwxR_N8tNh4tXI1u2fkDrWjSF5mS8ukKwWZ8PJBwFRwiN9AJetdLDKajj6xZuc2UWqduKFJWU1Gq3OBJYSZdTVUBLR6AF2viqt95KA.JLdPTriC32M72Ioh-xjvFg\", \"email\": \"MYEMAIL@gmail.com\", \"password\": \"########\", \"showPasswordChecked\": \"false\", \"encryptedPasswordExpected\": \"\", \"rememberMe\": \"true\", \"use_image_captcha\": \"true\", \"use_audio_captcha\": \"false\", \"guess\": \"7y2727\"}\r\n2020-06-25 10:52:06 DEBUG (MainThread) [alexapy.alexalogin] Header: {\"User-Agent\": \"Mozilla/5.0 (Windows NT 6.3; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36\", \"Accept\": \"text/html,application/xhtml+xml, application/xml;q=0.9,*/*;q=0.8\", \"Accept-Language\": \"*\", \"Referer\": \"https://www.amazon.com/ap/signin\"}\r\n2020-06-25 10:52:07 DEBUG (MainThread) [alexapy.alexalogin] POST: redirected from\r\nhttps://www.amazon.com/ap/signin\r\n2020-06-25 10:52:07 DEBUG (MainThread) [alexapy.alexalogin] GET: redirected from\r\nhttps://www.amazon.com/ap/challenge?ie=UTF8&arb=18fe0d28-c7d3-404e-b8fc-0d91e667e3d2\r\n2020-06-25 10:52:07 DEBUG (MainThread) [alexapy.alexalogin] GET: \r\nhttps://www.amazon.com/ap/cvf/approval?arb=ce7ff3cd-afbc-4404-b035-875d7177d4dd&openid.assoc_handle=amzn_dp_project_dee&pageId=amzn_dp_project_dee&openid.return_to=https://www.amazon.com/ap/signin?ie%3DUTF8%26clientContext%3D131-9865953-3328838%26arb%3Dbc6d1e94-80ad-43e1-b41b-216b7b62a4c3%26showRmrMe%3D1%26use_global_authentication%3Dfalse%26openid.return_to%3Dhttps%253A%252F%252Falexa.amazon.com%252F%26openid.identity%3Dhttp%253A%252F%252Fspecs.openid.net%252Fauth%252F2.0%252Fidentifier_select%26openid.assoc_handle%3Damzn_dp_project_dee%26openid.mode%3Dcheckid_setup%26use_audio_captcha%3Dfalse%26pageId%3Damzn_dp_project_dee%26openid.claimed_id%3Dhttp%253A%252F%252Fspecs.openid.net%252Fauth%252F2.0%252Fidentifier_select%26openid.ns%3Dhttp%253A%252F%252Fspecs.openid.net%252Fauth%252F2.0 with\r\n<CIMultiDictProxy('Host': 'www.amazon.com', 'User-Agent': 'Mozilla/5.0 (Windows NT 6.3; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36', 'Accept': 'text/html,application/xhtml+xml, application/xml;q=0.9,*/*;q=0.8', 'Accept-Language': '*', 'Referer': 'https://www.amazon.com/ap/signin', 'Accept-Encoding': 'gzip, deflate', 'Cookie': 'session-id=132-4782048-0393153; session-id-time=2223816727l; session-token=1MV1ThkYZenoC2d4V0c/ndVJyE5AvY/gwKBkYcLY5cjsi9B9RB4C4a8RG+MOn3Ow4Z0D2lBWe2a2ZNmlItRnnwMosYH2BxOT2DKFouZij5bmEc3VYb6OPH39e87A0o68lPHdrfxyeVFi65YZheZjUDZQ+OXFknsW+HQPgEWtEvhsZg9u2maYSGg4w2F343IbWSOWAF6XO2P7A4Zp5p/kzGFoZRlB5YsQ; ubid-main=131-9865953-3328838')>\r\n returned 200:OK with response <CIMultiDictProxy('Content-Type': 'text/html;charset=UTF-8', 'Transfer-Encoding': 'chunked', 'Connection': 'keep-alive', 'Server': 'Server', 'Date': 'Thu, 25 Jun 2020 14:52:07 GMT', 'Strict-Transport-Security': 'max-age=47474747; includeSubDomains; preload', 'X-Frame-Options': 'SAMEORIGIN', 'Pragma': 'no-cache', 'Expires': 'Thu, 01 Jan 1970 00:00:00 GMT', 'Cache-Control': 'no-cache', 'Cache-Control': 'no-store', 'Content-Language': 'en-US', 'Content-Encoding': 'gzip', 'vary': 'accept-encoding,X-Amzn-CDN-Cache,X-Amzn-AX-Treatment,User-Agent', 'Set-Cookie': 'ubid-main=131-9865953-3328838; Domain=.amazon.com; Expires=Fri, 25-Jun-2021 14:52:07 GMT; Path=/; Secure', 'x-amz-rid': 'JVTK1KMCYM8C9N4GYQ3B', 'X-Cache': 'Miss from cloudfront', 'Via': '1.1 2ead2a81ff8cd9f180f8ec7fa0607b6e.cloudfront.net (CloudFront)', 'X-Amz-Cf-Pop': 'EWR53-C1', 'X-Amz-Cf-Id': '5flzJ3qhViGFvZddS3D64BU84UIWFng6NDMH8SgLbiNbnXp8nh_QdA==')>\r\n2020-06-25 10:52:07 DEBUG (MainThread) [alexapy.alexalogin] Processing https://www.amazon.com/ap/cvf/approval?arb=ce7ff3cd-afbc-4404-b035-875d7177d4dd&openid.assoc_handle=amzn_dp_project_dee&pageId=amzn_dp_project_dee&openid.return_to=https://www.amazon.com/ap/signin?ie%3DUTF8%26clientContext%3D131-9865953-3328838%26arb%3Dbc6d1e94-80ad-43e1-b41b-216b7b62a4c3%26showRmrMe%3D1%26use_global_authentication%3Dfalse%26openid.return_to%3Dhttps%253A%252F%252Falexa.amazon.com%252F%26openid.identity%3Dhttp%253A%252F%252Fspecs.openid.net%252Fauth%252F2.0%252Fidentifier_select%26openid.assoc_handle%3Damzn_dp_project_dee%26openid.mode%3Dcheckid_setup%26use_audio_captcha%3Dfalse%26pageId%3Damzn_dp_project_dee%26openid.claimed_id%3Dhttp%253A%252F%252Fspecs.openid.net%252Fauth%252F2.0%252Fidentifier_select%26openid.ns%3Dhttp%253A%252F%252Fspecs.openid.net%252Fauth%252F2.0\r\n2020-06-25 10:52:07 DEBUG (MainThread) [alexapy.alexalogin] Links: {'0': ('Customer Service', 'https://alexa.amazon.com/gp/help/customer/account-issues/ref=ch_tiv_approval_broadcast_contact_cs?ie=UTF8'), '1': ('Conditions of Use', 'https://alexa.amazon.com/gp/help/customer/display.html/ref=ap_desktop_footer_cou?ie=UTF8&nodeId=508088'), '2': ('Privacy Notice', 'https://alexa.amazon.com/gp/help/customer/display.html/ref=ap_desktop_footer_privacy_notice?ie=UTF8&nodeId=468496'), '3': ('Help', 'https://alexa.amazon.com/help')}\r\n2020-06-25 10:52:07 DEBUG (MainThread) [alexapy.alexalogin] Captcha/2FA not requested; confirming login.\r\n2020-06-25 10:52:07 DEBUG (MainThread) [alexapy.alexalogin] Testing whether logged in to alexa.amazon.com\r\n2020-06-25 10:52:07 DEBUG (MainThread) [alexapy.alexalogin] Cookies: None\r\n2020-06-25 10:52:07 DEBUG (MainThread) [alexapy.alexalogin] Session Cookies:\r\namazon.com: expires:Fri, 25-Jun-2021 14:52:07 GMT max-age: session-id=132-4782048-0393153\r\namazon.com: expires:Fri, 25-Jun-2021 14:52:07 GMT max-age: session-id-time=2223816727l\r\namazon.com: expires:Fri, 25-Jun-2021 14:52:07 GMT max-age: ubid-main=131-9865953-3328838\r\namazon.com: expires:Fri, 25-Jun-2021 14:52:07 GMT max-age: session-token=1MV1ThkYZenoC2d4V0c/ndVJyE5AvY/gwKBkYcLY5cjsi9B9RB4C4a8RG+MOn3Ow4Z0D2lBWe2a2ZNmlItRnnwMosYH2BxOT2DKFouZij5bmEc3VYb6OPH39e87A0o68lPHdrfxyeVFi65YZheZjUDZQ+OXFknsW+HQPgEWtEvhsZg9u2maYSGg4w2F343IbWSOWAF6XO2P7A4Zp5p/kzGFoZRlB5YsQ\r\n\r\n2020-06-25 10:52:07 DEBUG (MainThread) [alexapy.alexalogin] Header: {\"User-Agent\": \"Mozilla/5.0 (Windows NT 6.3; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36\", \"Accept\": \"text/html,application/xhtml+xml, application/xml;q=0.9,*/*;q=0.8\", \"Accept-Language\": \"*\", \"Referer\": \"https://www.amazon.com/ap/cvf/approval?arb=ce7ff3cd-afbc-4404-b035-875d7177d4dd&openid.assoc_handle=amzn_dp_project_dee&pageId=amzn_dp_project_dee&openid.return_to=https://www.amazon.com/ap/signin?ie%3DUTF8%26clientContext%3D131-9865953-3328838%26arb%3Dbc6d1e94-80ad-43e1-b41b-216b7b62a4c3%26showRmrMe%3D1%26use_global_authentication%3Dfalse%26openid.return_to%3Dhttps%253A%252F%252Falexa.amazon.com%252F%26openid.identity%3Dhttp%253A%252F%252Fspecs.openid.net%252Fauth%252F2.0%252Fidentifier_select%26openid.assoc_handle%3Damzn_dp_project_dee%26openid.mode%3Dcheckid_setup%26use_audio_captcha%3Dfalse%26pageId%3Damzn_dp_project_dee%26openid.claimed_id%3Dhttp%253A%252F%252Fspecs.openid.net%252Fauth%252F2.0%252Fidentifier_select%26openid.ns%3Dhttp%253A%252F%252Fspecs.openid.net%252Fauth%252F2.0\"}\r\n2020-06-25 10:52:07 DEBUG (MainThread) [alexapy.alexalogin] GET: redirected from\r\nhttps://alexa.amazon.com/api/bootstrap\r\n2020-06-25 10:52:07 DEBUG (MainThread) [alexapy.alexalogin] GET: \r\nhttps://www.amazon.com/ap/signin?showRmrMe=1&openid.return_to=https://alexa.amazon.com/api/bootstrap&openid.identity=http://specs.openid.net/auth/2.0/identifier_select&openid.assoc_handle=amzn_dp_project_dee&openid.mode=checkid_setup&openid.claimed_id=http://specs.openid.net/auth/2.0/identifier_select&openid.ns=http://specs.openid.net/auth/2.0& with\r\n<CIMultiDictProxy('Host': 'www.amazon.com', 'User-Agent': 'Mozilla/5.0 (Windows NT 6.3; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36', 'Accept': 'text/html,application/xhtml+xml, application/xml;q=0.9,*/*;q=0.8', 'Accept-Language': '*', 'Accept-Encoding': 'gzip, deflate', 'Cookie': 'session-id=132-4782048-0393153; session-id-time=2223816727l; session-token=1MV1ThkYZenoC2d4V0c/ndVJyE5AvY/gwKBkYcLY5cjsi9B9RB4C4a8RG+MOn3Ow4Z0D2lBWe2a2ZNmlItRnnwMosYH2BxOT2DKFouZij5bmEc3VYb6OPH39e87A0o68lPHdrfxyeVFi65YZheZjUDZQ+OXFknsW+HQPgEWtEvhsZg9u2maYSGg4w2F343IbWSOWAF6XO2P7A4Zp5p/kzGFoZRlB5YsQ; ubid-main=131-9865953-3328838')>\r\n returned 200:OK with response <CIMultiDictProxy('Content-Type': 'text/html;charset=UTF-8', 'Transfer-Encoding': 'chunked', 'Connection': 'keep-alive', 'Server': 'Server', 'Date': 'Thu, 25 Jun 2020 14:52:07 GMT', 'Strict-Transport-Security': 'max-age=47474747; includeSubDomains; preload', 'X-XSS-Protection': '1', 'X-Content-Type-Options': 'nosniff', 'X-Frame-Options': 'SAMEORIGIN', 'x-ua-compatible': 'IE=edge', 'Pragma': 'No-cache', 'Cache-Control': 'max-age=0, no-cache, no-store, must-revalidate', 'Expires': 'Thu, 01 Jan 1970 00:00:00 GMT', 'Set-Cookie': 'ap-fid=\"\"; Domain=.amazon.com; Expires=Thu, 01-Jan-1970 00:00:10 GMT; Path=/ap/; Secure', 'Set-Cookie': 'session-id=132-4782048-0393153; Domain=.amazon.com; Expires=Fri, 25-Jun-2021 14:52:07 GMT; Path=/; Secure', 'Set-Cookie': 'session-id-time=2223816727l; Domain=.amazon.com; Expires=Fri, 25-Jun-2021 14:52:07 GMT; Path=/; Secure', 'Set-Cookie': 'ubid-main=131-9865953-3328838; Domain=.amazon.com; Expires=Fri, 25-Jun-2021 14:52:07 GMT; Path=/; Secure', 'Set-Cookie': 'session-token=1MV1ThkYZenoC2d4V0c/ndVJyE5AvY/gwKBkYcLY5cjsi9B9RB4C4a8RG+MOn3Ow4Z0D2lBWe2a2ZNmlItRnnwMosYH2BxOT2DKFouZij5bmEc3VYb6OPH39e87A0o68lPHdrfxyeVFi65YZheZjUDZQ+OXFknsW+HQPgEWtEvhsZg9u2maYSGg4w2F343IbWSOWAF6XO2P7A4Zp5p/kzGFoZRlB5YsQ; Domain=.amazon.com; Expires=Fri, 25-Jun-2021 14:52:07 GMT; Path=/; Secure', 'Vary': 'Accept-Encoding,X-Amzn-CDN-Cache,X-Amzn-AX-Treatment,User-Agent', 'Content-Encoding': 'gzip', 'x-amz-rid': '1WQCGJH0SK6X4CJV6A0Q', 'p3p': 'policyref=\"http://www.amazon.com/w3c/p3p.xml\",CP=\"CAO DSP LAW CUR ADM IVAo IVDo CONo OTPo OUR DELi PUBi OTRi BUS PHY ONL UNI PUR FIN COM NAV INT DEM CNT STA HEA PRE LOC GOV OTC \"', 'X-Cache': 'Miss from cloudfront', 'Via': '1.1 2ead2a81ff8cd9f180f8ec7fa0607b6e.cloudfront.net (CloudFront)', 'X-Amz-Cf-Pop': 'EWR53-C1', 'X-Amz-Cf-Id': 'kL4umyHP3QJQ0QNUjTOkmyO3tDiCBDZn2OYzmDJ9bvqpbg6R_E682A==')>\r\n2020-06-25 10:52:07 DEBUG (MainThread) [alexapy.alexalogin] Not logged in: An exception of type ContentTypeError occurred. Arguments:\r\n(RequestInfo(url=URL('https://www.amazon.com/ap/signin?showRmrMe=1&openid.return_to=https://alexa.amazon.com/api/bootstrap&openid.identity=http://specs.openid.net/auth/2.0/identifier_select&openid.assoc_handle=amzn_dp_project_dee&openid.mode=checkid_setup&openid.claimed_id=http://specs.openid.net/auth/2.0/identifier_select&openid.ns=http://specs.openid.net/auth/2.0&'), method='GET', headers=<CIMultiDictProxy('Host': 'www.amazon.com', 'User-Agent': 'Mozilla/5.0 (Windows NT 6.3; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36', 'Accept': 'text/html,application/xhtml+xml, application/xml;q=0.9,*/*;q=0.8', 'Accept-Language': '*', 'Accept-Encoding': 'gzip, deflate', 'Cookie': 'session-id=132-4782048-0393153; session-id-time=2223816727l; session-token=1MV1ThkYZenoC2d4V0c/ndVJyE5AvY/gwKBkYcLY5cjsi9B9RB4C4a8RG+MOn3Ow4Z0D2lBWe2a2ZNmlItRnnwMosYH2BxOT2DKFouZij5bmEc3VYb6OPH39e87A0o68lPHdrfxyeVFi65YZheZjUDZQ+OXFknsW+HQPgEWtEvhsZg9u2maYSGg4w2F343IbWSOWAF6XO2P7A4Zp5p/kzGFoZRlB5YsQ; ubid-main=131-9865953-3328838')>, real_url=URL('https://www.amazon.com/ap/signin?showRmrMe=1&openid.return_to=https://alexa.amazon.com/api/bootstrap&openid.identity=http://specs.openid.net/auth/2.0/identifier_select&openid.assoc_handle=amzn_dp_project_dee&openid.mode=checkid_setup&openid.claimed_id=http://specs.openid.net/auth/2.0/identifier_select&openid.ns=http://specs.openid.net/auth/2.0&')), (<ClientResponse(https://alexa.amazon.com/api/bootstrap) [302 Found]>\r\n<CIMultiDictProxy('Content-Length': '20', 'Connection': 'keep-alive', 'Server': 'Server', 'Date': 'Thu, 25 Jun 2020 14:52:07 GMT', 'x-amzn-RequestId': '947aad66-d882-46fe-9b28-1df6c3917879', 'Content-Encoding': 'gzip', 'Location': 'https://www.amazon.com/ap/signin?showRmrMe=1&openid.return_to=https%3A%2F%2Falexa.amazon.com%2Fapi%2Fbootstrap&openid.identity=http%3A%2F%2Fspecs.openid.net%2Fauth%2F2.0%2Fidentifier_select&openid.assoc_handle=amzn_dp_project_dee&openid.mode=checkid_setup&openid.claimed_id=http%3A%2F%2Fspecs.openid.net%2Fauth%2F2.0%2Fidentifier_select&openid.ns=http%3A%2F%2Fspecs.openid.net%2Fauth%2F2.0&', 'Vary': 'Content-Type,Accept-Encoding,X-Amzn-CDN-Cache,X-Amzn-AX-Treatment,User-Agent', 'x-amz-rid': 'N8AJG92CPTFSPDC6G8PF', 'X-Cache': 'Miss from cloudfront', 'Via': '1.1 94452e9f76299393d245c2536c80f67f.cloudfront.net (CloudFront)', 'X-Amz-Cf-Pop': 'EWR53-C1', 'X-Amz-Cf-Id': 'SXpZY1cL2GqrtRIwMAV6XtsqU5Iz8aPWB6cdp48Styb9NTsC3CbKMA==')>\r\n,))\r\n2020-06-25 10:52:07 DEBUG (MainThread) [alexapy.alexalogin] Login failed; check credentials\r\n2020-06-25 10:52:07 DEBUG (MainThread) [alexapy.alexalogin] If credentials correct, please report these missing values: ['encryptedPasswordExpected']\r\n2020-06-25 10:52:07 DEBUG (MainThread) [alexapy.alexalogin] Found form to process: <form action=\"/ap/cvf/approval/poll\" id=\"pollingForm\" method=\"get\">\r\n<input name=\"arb\" type=\"hidden\" value=\"ce7ff3cd-afbc-4404-b035-875d7177d4dd\"/><input name=\"openid.return_to\" type=\"hidden\" value=\"https://www.amazon.com/ap/signin?ie=UTF8&amp;clientContext=131-9865953-3328838&amp;arb=bc6d1e94-80ad-43e1-b41b-216b7b62a4c3&amp;showRmrMe=1&amp;use_global_authentication=false&amp;openid.return_to=https%3A%2F%2Falexa.amazon.com%2F&amp;openid.identity=http%3A%2F%2Fspecs.openid.net%2Fauth%2F2.0%2Fidentifier_select&amp;openid.assoc_handle=amzn_dp_project_dee&amp;openid.mode=checkid_setup&amp;use_audio_captcha=false&amp;pageId=amzn_dp_project_dee&amp;openid.claimed_id=http%3A%2F%2Fspecs.openid.net%2Fauth%2F2.0%2Fidentifier_select&amp;openid.ns=http%3A%2F%2Fspecs.openid.net%2Fauth%2F2.0\"/><input name=\"pageId\" type=\"hidden\" value=\"amzn_dp_project_dee\"/><input name=\"openid.assoc_handle\" type=\"hidden\" value=\"amzn_dp_project_dee\"/>\r\n<input name=\"csrfToken\" type=\"hidden\" value=\"4jyC9hmsD3U71yMqMJtj2FV6egUq0j3D\"/></form>\r\n2020-06-25 10:52:07 DEBUG (MainThread) [alexapy.alexalogin] Found post url to /ap/cvf/approval/poll\r\n2020-06-25 10:52:07 DEBUG (MainThread) [custom_components.alexa_media.configurator] Testing login status: {'login_failed': True}\r\n2020-06-25 10:52:07 DEBUG (MainThread) [custom_components.alexa_media.configurator] Creating configurator to start new login attempt\r\n2020-06-25 10:52:09 WARNING (SyncWorker_19) [homeassistant.components.uptimerobot.binary_sensor] Failed to get new state\r\n2020-06-25 10:52:23 DEBUG (MainThread) [custom_components.alexa_media.configurator] Configurator closed for Status: {'login_failed': True}\r\n got captcha: 7y2727 securitycode: None Claimsoption: None AuthSelectOption: None  VerificationCode: None\r\n2020-06-25 10:52:23 DEBUG (MainThread) [alexapy.alexalogin] No valid cookies for log in; using credentials\r\n2020-06-25 10:52:23 DEBUG (MainThread) [alexapy.alexalogin] Loaded last request to https://www.amazon.com/ap/cvf/approval?arb=ce7ff3cd-afbc-4404-b035-875d7177d4dd&openid.assoc_handle=amzn_dp_project_dee&pageId=amzn_dp_project_dee&openid.return_to=https://www.amazon.com/ap/signin?ie%3DUTF8%26clientContext%3D131-9865953-3328838%26arb%3Dbc6d1e94-80ad-43e1-b41b-216b7b62a4c3%26showRmrMe%3D1%26use_global_authentication%3Dfalse%26openid.return_to%3Dhttps%253A%252F%252Falexa.amazon.com%252F%26openid.identity%3Dhttp%253A%252F%252Fspecs.openid.net%252Fauth%252F2.0%252Fidentifier_select%26openid.assoc_handle%3Damzn_dp_project_dee%26openid.mode%3Dcheckid_setup%26use_audio_captcha%3Dfalse%26pageId%3Damzn_dp_project_dee%26openid.claimed_id%3Dhttp%253A%252F%252Fspecs.openid.net%252Fauth%252F2.0%252Fidentifier_select%26openid.ns%3Dhttp%253A%252F%252Fspecs.openid.net%252Fauth%252F2.0 \r\n2020-06-25 10:52:23 DEBUG (MainThread) [alexapy.alexalogin] Processing https://www.amazon.com/ap/cvf/approval?arb=ce7ff3cd-afbc-4404-b035-875d7177d4dd&openid.assoc_handle=amzn_dp_project_dee&pageId=amzn_dp_project_dee&openid.return_to=https://www.amazon.com/ap/signin?ie%3DUTF8%26clientContext%3D131-9865953-3328838%26arb%3Dbc6d1e94-80ad-43e1-b41b-216b7b62a4c3%26showRmrMe%3D1%26use_global_authentication%3Dfalse%26openid.return_to%3Dhttps%253A%252F%252Falexa.amazon.com%252F%26openid.identity%3Dhttp%253A%252F%252Fspecs.openid.net%252Fauth%252F2.0%252Fidentifier_select%26openid.assoc_handle%3Damzn_dp_project_dee%26openid.mode%3Dcheckid_setup%26use_audio_captcha%3Dfalse%26pageId%3Damzn_dp_project_dee%26openid.claimed_id%3Dhttp%253A%252F%252Fspecs.openid.net%252Fauth%252F2.0%252Fidentifier_select%26openid.ns%3Dhttp%253A%252F%252Fspecs.openid.net%252Fauth%252F2.0\r\n2020-06-25 10:52:23 DEBUG (MainThread) [alexapy.alexalogin] Links: {'0': ('Customer Service', 'https://alexa.amazon.com/gp/help/customer/account-issues/ref=ch_tiv_approval_broadcast_contact_cs?ie=UTF8'), '1': ('Conditions of Use', 'https://alexa.amazon.com/gp/help/customer/display.html/ref=ap_desktop_footer_cou?ie=UTF8&nodeId=508088'), '2': ('Privacy Notice', 'https://alexa.amazon.com/gp/help/customer/display.html/ref=ap_desktop_footer_privacy_notice?ie=UTF8&nodeId=468496'), '3': ('Help', 'https://alexa.amazon.com/help')}\r\n2020-06-25 10:52:23 DEBUG (MainThread) [alexapy.alexalogin] Captcha/2FA not requested; confirming login.\r\n2020-06-25 10:52:23 DEBUG (MainThread) [alexapy.alexalogin] Testing whether logged in to alexa.amazon.com\r\n2020-06-25 10:52:23 DEBUG (MainThread) [alexapy.alexalogin] Cookies: None\r\n2020-06-25 10:52:23 DEBUG (MainThread) [alexapy.alexalogin] Session Cookies:\r\namazon.com: expires:Fri, 25-Jun-2021 14:52:07 GMT max-age: session-id=132-4782048-0393153\r\namazon.com: expires:Fri, 25-Jun-2021 14:52:07 GMT max-age: session-id-time=2223816727l\r\namazon.com: expires:Fri, 25-Jun-2021 14:52:07 GMT max-age: ubid-main=131-9865953-3328838\r\namazon.com: expires:Fri, 25-Jun-2021 14:52:07 GMT max-age: session-token=1MV1ThkYZenoC2d4V0c/ndVJyE5AvY/gwKBkYcLY5cjsi9B9RB4C4a8RG+MOn3Ow4Z0D2lBWe2a2ZNmlItRnnwMosYH2BxOT2DKFouZij5bmEc3VYb6OPH39e87A0o68lPHdrfxyeVFi65YZheZjUDZQ+OXFknsW+HQPgEWtEvhsZg9u2maYSGg4w2F343IbWSOWAF6XO2P7A4Zp5p/kzGFoZRlB5YsQ\r\n\r\n2020-06-25 10:52:23 DEBUG (MainThread) [alexapy.alexalogin] Header: {\"User-Agent\": \"Mozilla/5.0 (Windows NT 6.3; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36\", \"Accept\": \"text/html,application/xhtml+xml, application/xml;q=0.9,*/*;q=0.8\", \"Accept-Language\": \"*\", \"Referer\": \"https://www.amazon.com/ap/signin?showRmrMe=1&openid.return_to=https://alexa.amazon.com/api/bootstrap&openid.identity=http://specs.openid.net/auth/2.0/identifier_select&openid.assoc_handle=amzn_dp_project_dee&openid.mode=checkid_setup&openid.claimed_id=http://specs.openid.net/auth/2.0/identifier_select&openid.ns=http://specs.openid.net/auth/2.0&\"}\r\n2020-06-25 10:52:23 DEBUG (MainThread) [alexapy.alexalogin] GET: redirected from\r\nhttps://alexa.amazon.com/api/bootstrap\r\n2020-06-25 10:52:23 DEBUG (MainThread) [alexapy.alexalogin] GET: \r\nhttps://www.amazon.com/ap/signin?showRmrMe=1&openid.return_to=https://alexa.amazon.com/api/bootstrap&openid.identity=http://specs.openid.net/auth/2.0/identifier_select&openid.assoc_handle=amzn_dp_project_dee&openid.mode=checkid_setup&openid.claimed_id=http://specs.openid.net/auth/2.0/identifier_select&openid.ns=http://specs.openid.net/auth/2.0& with\r\n<CIMultiDictProxy('Host': 'www.amazon.com', 'User-Agent': 'Mozilla/5.0 (Windows NT 6.3; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36', 'Accept': 'text/html,application/xhtml+xml, application/xml;q=0.9,*/*;q=0.8', 'Accept-Language': '*', 'Accept-Encoding': 'gzip, deflate', 'Cookie': 'session-id=132-4782048-0393153; session-id-time=2223816727l; session-token=1MV1ThkYZenoC2d4V0c/ndVJyE5AvY/gwKBkYcLY5cjsi9B9RB4C4a8RG+MOn3Ow4Z0D2lBWe2a2ZNmlItRnnwMosYH2BxOT2DKFouZij5bmEc3VYb6OPH39e87A0o68lPHdrfxyeVFi65YZheZjUDZQ+OXFknsW+HQPgEWtEvhsZg9u2maYSGg4w2F343IbWSOWAF6XO2P7A4Zp5p/kzGFoZRlB5YsQ; ubid-main=131-9865953-3328838')>\r\n returned 200:OK with response <CIMultiDictProxy('Content-Type': 'text/html;charset=UTF-8', 'Transfer-Encoding': 'chunked', 'Connection': 'keep-alive', 'Server': 'Server', 'Date': 'Thu, 25 Jun 2020 14:52:23 GMT', 'Strict-Transport-Security': 'max-age=47474747; includeSubDomains; preload', 'X-XSS-Protection': '1', 'X-Content-Type-Options': 'nosniff', 'X-Frame-Options': 'SAMEORIGIN', 'x-ua-compatible': 'IE=edge', 'Pragma': 'No-cache', 'Cache-Control': 'max-age=0, no-cache, no-store, must-revalidate', 'Expires': 'Thu, 01 Jan 1970 00:00:00 GMT', 'Set-Cookie': 'ap-fid=\"\"; Domain=.amazon.com; Expires=Thu, 01-Jan-1970 00:00:10 GMT; Path=/ap/; Secure', 'Set-Cookie': 'session-id=132-4782048-0393153; Domain=.amazon.com; Expires=Fri, 25-Jun-2021 14:52:23 GMT; Path=/; Secure', 'Set-Cookie': 'session-id-time=2223816743l; Domain=.amazon.com; Expires=Fri, 25-Jun-2021 14:52:23 GMT; Path=/; Secure', 'Set-Cookie': 'ubid-main=131-9865953-3328838; Domain=.amazon.com; Expires=Fri, 25-Jun-2021 14:52:23 GMT; Path=/; Secure', 'Set-Cookie': 'session-token=1MV1ThkYZenoC2d4V0c/ndVJyE5AvY/gwKBkYcLY5cjsi9B9RB4C4a8RG+MOn3Ow4Z0D2lBWe2a2ZNmlItRnnwMosYH2BxOT2DKFouZij5bmEc3VYb6OPH39e87A0o68lPHdrfxyeVFi65YZheZjUDZQ+OXFknsW+HQPgEWtEvhsZg9u2maYSGg4w2F343IbWSOWAF6XO2P7A4Zp5p/kzGFoZRlB5YsQ; Domain=.amazon.com; Expires=Fri, 25-Jun-2021 14:52:23 GMT; Path=/; Secure', 'Vary': 'Accept-Encoding,X-Amzn-CDN-Cache,X-Amzn-AX-Treatment,User-Agent', 'Content-Encoding': 'gzip', 'x-amz-rid': 'K00NQZAH72HWAXHB1KPC', 'p3p': 'policyref=\"http://www.amazon.com/w3c/p3p.xml\",CP=\"CAO DSP LAW CUR ADM IVAo IVDo CONo OTPo OUR DELi PUBi OTRi BUS PHY ONL UNI PUR FIN COM NAV INT DEM CNT STA HEA PRE LOC GOV OTC \"', 'X-Cache': 'Miss from cloudfront', 'Via': '1.1 a74c33aabb438b6226856fa442878fa2.cloudfront.net (CloudFront)', 'X-Amz-Cf-Pop': 'EWR53-C1', 'X-Amz-Cf-Id': '__9yidamqlyYH39jkh634xvisrkBas1sLfWnu8vJ1UwYgDeWTbM7BQ==')>\r\n2020-06-25 10:52:23 DEBUG (MainThread) [alexapy.alexalogin] Not logged in: An exception of type ContentTypeError occurred. Arguments:\r\n(RequestInfo(url=URL('https://www.amazon.com/ap/signin?showRmrMe=1&openid.return_to=https://alexa.amazon.com/api/bootstrap&openid.identity=http://specs.openid.net/auth/2.0/identifier_select&openid.assoc_handle=amzn_dp_project_dee&openid.mode=checkid_setup&openid.claimed_id=http://specs.openid.net/auth/2.0/identifier_select&openid.ns=http://specs.openid.net/auth/2.0&'), method='GET', headers=<CIMultiDictProxy('Host': 'www.amazon.com', 'User-Agent': 'Mozilla/5.0 (Windows NT 6.3; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36', 'Accept': 'text/html,application/xhtml+xml, application/xml;q=0.9,*/*;q=0.8', 'Accept-Language': '*', 'Accept-Encoding': 'gzip, deflate', 'Cookie': 'session-id=132-4782048-0393153; session-id-time=2223816727l; session-token=1MV1ThkYZenoC2d4V0c/ndVJyE5AvY/gwKBkYcLY5cjsi9B9RB4C4a8RG+MOn3Ow4Z0D2lBWe2a2ZNmlItRnnwMosYH2BxOT2DKFouZij5bmEc3VYb6OPH39e87A0o68lPHdrfxyeVFi65YZheZjUDZQ+OXFknsW+HQPgEWtEvhsZg9u2maYSGg4w2F343IbWSOWAF6XO2P7A4Zp5p/kzGFoZRlB5YsQ; ubid-main=131-9865953-3328838')>, real_url=URL('https://www.amazon.com/ap/signin?showRmrMe=1&openid.return_to=https://alexa.amazon.com/api/bootstrap&openid.identity=http://specs.openid.net/auth/2.0/identifier_select&openid.assoc_handle=amzn_dp_project_dee&openid.mode=checkid_setup&openid.claimed_id=http://specs.openid.net/auth/2.0/identifier_select&openid.ns=http://specs.openid.net/auth/2.0&')), (<ClientResponse(https://alexa.amazon.com/api/bootstrap) [302 Found]>\r\n<CIMultiDictProxy('Content-Length': '20', 'Connection': 'keep-alive', 'Server': 'Server', 'Date': 'Thu, 25 Jun 2020 14:52:23 GMT', 'x-amzn-RequestId': 'eb11334c-8a51-4b9a-b21a-53e8aba9c430', 'Content-Encoding': 'gzip', 'Location': 'https://www.amazon.com/ap/signin?showRmrMe=1&openid.return_to=https%3A%2F%2Falexa.amazon.com%2Fapi%2Fbootstrap&openid.identity=http%3A%2F%2Fspecs.openid.net%2Fauth%2F2.0%2Fidentifier_select&openid.assoc_handle=amzn_dp_project_dee&openid.mode=checkid_setup&openid.claimed_id=http%3A%2F%2Fspecs.openid.net%2Fauth%2F2.0%2Fidentifier_select&openid.ns=http%3A%2F%2Fspecs.openid.net%2Fauth%2F2.0&', 'Vary': 'Content-Type,Accept-Encoding,X-Amzn-CDN-Cache,X-Amzn-AX-Treatment,User-Agent', 'x-amz-rid': 'HDPTP10MJGY1GN8VW0T4', 'X-Cache': 'Miss from cloudfront', 'Via': '1.1 bd729a625f24d9635dc350a79fc561b4.cloudfront.net (CloudFront)', 'X-Amz-Cf-Pop': 'EWR53-C1', 'X-Amz-Cf-Id': 'fjzngPqNmXoViMmni85BLqIrJgPazoMPpIISyxT1oCN1fALgR3jIig==')>\r\n,))\r\n2020-06-25 10:52:23 DEBUG (MainThread) [alexapy.alexalogin] Login failed; check credentials\r\n2020-06-25 10:52:23 DEBUG (MainThread) [alexapy.alexalogin] If credentials correct, please report these missing values: ['encryptedPasswordExpected']\r\n2020-06-25 10:52:23 DEBUG (MainThread) [alexapy.alexalogin] Found form to process: <form action=\"/ap/cvf/approval/poll\" id=\"pollingForm\" method=\"get\">\r\n<input name=\"arb\" type=\"hidden\" value=\"ce7ff3cd-afbc-4404-b035-875d7177d4dd\"/><input name=\"openid.return_to\" type=\"hidden\" value=\"https://www.amazon.com/ap/signin?ie=UTF8&amp;clientContext=131-9865953-3328838&amp;arb=bc6d1e94-80ad-43e1-b41b-216b7b62a4c3&amp;showRmrMe=1&amp;use_global_authentication=false&amp;openid.return_to=https%3A%2F%2Falexa.amazon.com%2F&amp;openid.identity=http%3A%2F%2Fspecs.openid.net%2Fauth%2F2.0%2Fidentifier_select&amp;openid.assoc_handle=amzn_dp_project_dee&amp;openid.mode=checkid_setup&amp;use_audio_captcha=false&amp;pageId=amzn_dp_project_dee&amp;openid.claimed_id=http%3A%2F%2Fspecs.openid.net%2Fauth%2F2.0%2Fidentifier_select&amp;openid.ns=http%3A%2F%2Fspecs.openid.net%2Fauth%2F2.0\"/><input name=\"pageId\" type=\"hidden\" value=\"amzn_dp_project_dee\"/><input name=\"openid.assoc_handle\" type=\"hidden\" value=\"amzn_dp_project_dee\"/>\r\n<input name=\"csrfToken\" type=\"hidden\" value=\"4jyC9hmsD3U71yMqMJtj2FV6egUq0j3D\"/></form>\r\n2020-06-25 10:52:23 DEBUG (MainThread) [alexapy.alexalogin] Found post url to /ap/cvf/approval/poll\r\n2020-06-25 10:52:23 DEBUG (MainThread) [alexapy.alexalogin] Preparing post to /ap/cvf/approval/poll with input data: {'captcha': '7y2727'}\r\n2020-06-25 10:52:23 DEBUG (MainThread) [alexapy.alexalogin] WARNING: Detected missing params: True\r\n2020-06-25 10:52:23 DEBUG (MainThread) [alexapy.alexalogin] Session Cookies:\r\namazon.com: expires:Fri, 25-Jun-2021 14:52:23 GMT max-age: session-id=132-4782048-0393153\r\namazon.com: expires:Fri, 25-Jun-2021 14:52:23 GMT max-age: session-id-time=2223816743l\r\namazon.com: expires:Fri, 25-Jun-2021 14:52:23 GMT max-age: ubid-main=131-9865953-3328838\r\namazon.com: expires:Fri, 25-Jun-2021 14:52:23 GMT max-age: session-token=1MV1ThkYZenoC2d4V0c/ndVJyE5AvY/gwKBkYcLY5cjsi9B9RB4C4a8RG+MOn3Ow4Z0D2lBWe2a2ZNmlItRnnwMosYH2BxOT2DKFouZij5bmEc3VYb6OPH39e87A0o68lPHdrfxyeVFi65YZheZjUDZQ+OXFknsW+HQPgEWtEvhsZg9u2maYSGg4w2F343IbWSOWAF6XO2P7A4Zp5p/kzGFoZRlB5YsQ\r\n\r\n2020-06-25 10:52:23 DEBUG (MainThread) [alexapy.alexalogin] Submit Form Data: {\"appActionToken\": \"00U9ufyvRBuRYlj2FYhj2F5eYpj2BEmIsj3D\", \"appAction\": \"SIGNIN\", \"ces\": \"ape:QUNTXzZGc1dydXhlSnc0aS9Wa0JiMm9pVDM5L2YzOEFBQUFBQUFBQUFUVDVjVjltbzNzbVRuV3E0THNHVkdDVWlQVFlwUklvZ0VTZ3BvbkZWODZjSExlcGNqTVluTHhPNVN5U2ZBcEdKV0N3R1NNREFvVU5QZ0lkOGIzV3NnckxzbVk3V2NIdFQrbHhta3JEcVYwUWFjRDBaZyttOCtmYVV4Mm4veWhrM01TdllqMzE5bHRmZWhPNGlISGhsZDlWejhJeW1IVmlqWDdvcUhYY3kwTnlWNm01WHNSdDNLUVFKZW80OVo3QzMrNmVwdnU0K1JNcFQ0d09RZDhva2theTh5SDBlbDNudlJsMk85Tk1Ta1FKQit6NThmQnltNVRxakp3UVI2cHppMXRtNUhRWk5QY244MnMwOVgrMDViN1lLcHZwaGJheFFXcUdKSk85V3NSTDF5RlJaV0pPcmp3U2xDNFVaejRWSDd3NDQ3RG5xOTR4aFFsUUgwT2Jic3M9\", \"openid.return_to\": \"ape:aHR0cHM6Ly9hbGV4YS5hbWF6b24uY29tLw==\", \"prevRID\": \"ape:VFEzTU5FUzdBWlhEM1JNR1ozMFA=\", \"workflowState\": \"eyJ6aXAiOiJERUYiLCJlbmMiOiJBMjU2R0NNIiwiYWxnIjoiQTI1NktXIn0.6c5JzaJ-NeQPjdB-EeeAO-PhUEQMUrMxf_AfNnhJKSejENnfracKfQ.BuVciqgbNh5LmTTu.j4Fk8rLOTWGjxdAQhhpaPjI-qXra4jRoGQyVLSnGZTg2bPN3K_ve_esuxTy6fZ8e8oX78yghzGE9i59LXOo0rODUu1otP1l4J9s0HmGec8ZIUQFiSyzs2TEyLz579zV9EQn21Vnih_eVooau4B56w0kBf_JgYXRs8GvVIgWXs8EGYHcRVqeycFD7M5o1N-F4ls_bReNBQTAfK1stij3YaUMPLKwPXfOksaitbJm8lo-IeXy0Uz6oAwFv1B86Jz0uqb-GU66b0s1Vr2qMGeWMz3BaTyrLI7AxS9vtqyaxLQNJWa8doOaGtcF2hnJUio_JP0NtK3ANROJCKDY6x2QPn7--uiFBMToUQvSvNj4YRNZGnQI-FLk9KLKZikGB9fG38KWpZWxjp_MNcmDU0i0PEN3trxdOkJ2wVcXt8zOayfcSzNeV7X1Q6R66LO6V8yijDwxR_N8tNh4tXI1u2fkDrWjSF5mS8ukKwWZ8PJBwFRwiN9AJetdLDKajj6xZuc2UWqduKFJWU1Gq3OBJYSZdTVUBLR6AF2viqt95KA.JLdPTriC32M72Ioh-xjvFg\", \"email\": \"MYEMAIL@gmail.com\", \"password\": \"########\", \"showPasswordChecked\": \"false\", \"encryptedPasswordExpected\": \"\", \"rememberMe\": \"true\", \"use_image_captcha\": \"true\", \"use_audio_captcha\": \"false\", \"guess\": \"7y2727\"}\r\n2020-06-25 10:52:23 DEBUG (MainThread) [alexapy.alexalogin] Header: {\"User-Agent\": \"Mozilla/5.0 (Windows NT 6.3; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36\", \"Accept\": \"text/html,application/xhtml+xml, application/xml;q=0.9,*/*;q=0.8\", \"Accept-Language\": \"*\", \"Referer\": \"https://www.amazon.com/ap/signin?showRmrMe=1&openid.return_to=https://alexa.amazon.com/api/bootstrap&openid.identity=http://specs.openid.net/auth/2.0/identifier_select&openid.assoc_handle=amzn_dp_project_dee&openid.mode=checkid_setup&openid.claimed_id=http://specs.openid.net/auth/2.0/identifier_select&openid.ns=http://specs.openid.net/auth/2.0&\"}\r\n2020-06-25 10:52:23 ERROR (MainThread) [alexapy.helpers] alexalogin.login((<alexapy.alexalogin.AlexaLogin object at 0x7fec0e3dc4d0>,), {'data': {'captcha': '7y2727'}}): An error occured accessing AlexaAPI: An exception of type InvalidURL occurred. Arguments:\r\n(URL('/ap/cvf/approval/poll'),)\r\n2020-06-25 10:52:23 ERROR (MainThread) [homeassistant.components.websocket_api.http.connection.140650128016144] /ap/cvf/approval/poll\r\nTraceback (most recent call last):\r\n  File \"/srv/homeassistant/lib/python3.7/site-packages/homeassistant/components/websocket_api/commands.py\", line 130, in handle_call_service\r\n    connection.context(msg),\r\n  File \"/srv/homeassistant/lib/python3.7/site-packages/homeassistant/core.py\", line 1260, in async_call\r\n    task.result()\r\n  File \"/srv/homeassistant/lib/python3.7/site-packages/homeassistant/core.py\", line 1295, in _execute_service\r\n    await handler.func(service_call)\r\n  File \"/srv/homeassistant/lib/python3.7/site-packages/homeassistant/components/configurator/__init__.py\", line 235, in async_handle_service_call\r\n    await self.hass.async_add_job(callback, call.data.get(ATTR_FIELDS, {}))\r\n  File \"/home/homeassistant/.homeassistant/custom_components/alexa_media/configurator.py\", line 28, in configuration_callback\r\n    setup_platform_callback, hass, config_entry, login, callback_data\r\n  File \"/home/homeassistant/.homeassistant/custom_components/alexa_media/configurator.py\", line 177, in setup_platform_callback\r\n    await login.login(data=callback_data)\r\n  File \"/srv/homeassistant/lib/python3.7/site-packages/alexapy/helpers.py\", line 104, in wrapper\r\n    return await func(*args, **kwargs)\r\n  File \"/srv/homeassistant/lib/python3.7/site-packages/alexapy/alexalogin.py\", line 431, in login\r\n    site, data=self._data, headers=self._headers, ssl=self._ssl,\r\n  File \"/srv/homeassistant/lib/python3.7/site-packages/alexapy/aiohttp/client.py\", line 506, in _request\r\n    traces=traces,\r\n  File \"/srv/homeassistant/lib/python3.7/site-packages/alexapy/aiohttp/client_reqrep.py\", line 308, in __init__\r\n    self.update_host(url)\r\n  File \"/srv/homeassistant/lib/python3.7/site-packages/alexapy/aiohttp/client_reqrep.py\", line 369, in update_host\r\n    raise InvalidURL(url)\r\nalexapy.aiohttp.client_exceptions.InvalidURL: /ap/cvf/approval/poll\r\n```\r\n\r\n**Additional context**\r\nAdd any other context about the problem here. \r\n\r\nUnable to login configure\r\n\u201cFailed to call service configurator/configure. /ap/cvf/approval/poll\u201d\r\n\r\nNew login page sends text message for approval of access and waits for \"allow\" or \"deny\"\r\n\r\n```\r\n2020-06-25 09:58:43 DEBUG (MainThread) [custom_components.alexa_media.configurator] Configurator closed for Status: {'login_failed': True}\r\n got captcha: yb2xdb securitycode: None Claimsoption: None AuthSelectOption: None  VerificationCode: None\r\n2020-06-25 09:58:43 DEBUG (MainThread) [alexapy.alexalogin] No valid cookies for log in; using credentials\r\n2020-06-25 09:58:43 DEBUG (MainThread) [alexapy.alexalogin] Loaded last request to https://www.amazon.com/ap/cvf/approval?arb=af57af10-eaf2-4d11-9571-b2638e527364&openid.assoc_handle=amzn_dp_project_dee&pageId=amzn_dp_project_dee&openid.return_to=https://www.amazon.com/ap/signin?ie%3DUTF8%26clientContext%3D134-9998583-4128222%26arb%3Dc99ef662-1cf9-4f7b-943c-c2a9da4f2ecd%26showRmrMe%3D1%26use_global_authentication%3Dfalse%26openid.return_to%3Dhttps%253A%252F%252Falexa.amazon.com%252F%26openid.identity%3Dhttp%253A%252F%252Fspecs.openid.net%252Fauth%252F2.0%252Fidentifier_select%26openid.assoc_handle%3Damzn_dp_project_dee%26openid.mode%3Dcheckid_setup%26use_audio_captcha%3Dfalse%26pageId%3Damzn_dp_project_dee%26openid.claimed_id%3Dhttp%253A%252F%252Fspecs.openid.net%252Fauth%252F2.0%252Fidentifier_select%26openid.ns%3Dhttp%253A%252F%252Fspecs.openid.net%252Fauth%252F2.0 \r\n2020-06-25 09:58:43 DEBUG (MainThread) [alexapy.alexalogin] Processing https://www.amazon.com/ap/cvf/approval?arb=af57af10-eaf2-4d11-9571-b2638e527364&openid.assoc_handle=amzn_dp_project_dee&pageId=amzn_dp_project_dee&openid.return_to=https://www.amazon.com/ap/signin?ie%3DUTF8%26clientContext%3D134-9998583-4128222%26arb%3Dc99ef662-1cf9-4f7b-943c-c2a9da4f2ecd%26showRmrMe%3D1%26use_global_authentication%3Dfalse%26openid.return_to%3Dhttps%253A%252F%252Falexa.amazon.com%252F%26openid.identity%3Dhttp%253A%252F%252Fspecs.openid.net%252Fauth%252F2.0%252Fidentifier_select%26openid.assoc_handle%3Damzn_dp_project_dee%26openid.mode%3Dcheckid_setup%26use_audio_captcha%3Dfalse%26pageId%3Damzn_dp_project_dee%26openid.claimed_id%3Dhttp%253A%252F%252Fspecs.openid.net%252Fauth%252F2.0%252Fidentifier_select%26openid.ns%3Dhttp%253A%252F%252Fspecs.openid.net%252Fauth%252F2.0\r\n2020-06-25 09:58:43 DEBUG (MainThread) [alexapy.alexalogin] Links: {'0': ('Customer Service', 'https://alexa.amazon.com/gp/help/customer/account-issues/ref=ch_tiv_approval_broadcast_contact_cs?ie=UTF8'), '1': ('Conditions of Use', 'https://alexa.amazon.com/gp/help/customer/display.html/ref=ap_desktop_footer_cou?ie=UTF8&nodeId=508088'), '2': ('Privacy Notice', 'https://alexa.amazon.com/gp/help/customer/display.html/ref=ap_desktop_footer_privacy_notice?ie=UTF8&nodeId=468496'), '3': ('Help', 'https://alexa.amazon.com/help')}\r\n2020-06-25 09:58:43 DEBUG (MainThread) [alexapy.alexalogin] Captcha/2FA not requested; confirming login.\r\n2020-06-25 09:58:43 DEBUG (MainThread) [alexapy.alexalogin] Testing whether logged in to alexa.amazon.com\r\n2020-06-25 09:58:43 DEBUG (MainThread) [alexapy.alexalogin] Cookies: None\r\n2020-06-25 09:58:43 DEBUG (MainThread) [alexapy.alexalogin] Session Cookies:\r\namazon.com: expires:Fri, 25-Jun-2021 13:55:40 GMT max-age: session-id=140-1926401-1030615\r\namazon.com: expires:Fri, 25-Jun-2021 13:55:40 GMT max-age: session-id-time=2223813340l\r\namazon.com: expires:Fri, 25-Jun-2021 13:55:40 GMT max-age: ubid-main=134-9998583-4128222\r\namazon.com: expires:Fri, 25-Jun-2021 13:55:40 GMT max-age: session-token=8h23vDpL3moF2+OoX4OrRPk9rK0ccWd6ey1Ux+oQrPU4zSZ8OQOWY/jENsKLBLt3Hg5fObX6bsDPSXfZJuT6zS+FejQBWYbVC+lBM7hLv802EznMWudO75Ahi9v54fX3e61AZX6aYMD4lJS7S4OPf/j6nwwZyti2MevSmab7WJcNHEPS3++E4GaUutgiYYfP2iim9LhRfDq25seyiPmO55MrVBsvcR02\r\n\r\n2020-06-25 09:58:43 DEBUG (MainThread) [alexapy.alexalogin] Header: {\"User-Agent\": \"Mozilla/5.0 (Windows NT 6.3; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36\", \"Accept\": \"text/html,application/xhtml+xml, application/xml;q=0.9,*/*;q=0.8\", \"Accept-Language\": \"*\", \"Referer\": \"https://www.amazon.com/ap/signin?showRmrMe=1&openid.return_to=https://alexa.amazon.com/api/bootstrap&openid.identity=http://specs.openid.net/auth/2.0/identifier_select&openid.assoc_handle=amzn_dp_project_dee&openid.mode=checkid_setup&openid.claimed_id=http://specs.openid.net/auth/2.0/identifier_select&openid.ns=http://specs.openid.net/auth/2.0&\"}\r\n2020-06-25 09:58:43 DEBUG (MainThread) [alexapy.alexalogin] GET: redirected from\r\nhttps://alexa.amazon.com/api/bootstrap\r\n2020-06-25 09:58:43 DEBUG (MainThread) [alexapy.alexalogin] GET: \r\nhttps://www.amazon.com/ap/signin?showRmrMe=1&openid.return_to=https://alexa.amazon.com/api/bootstrap&openid.identity=http://specs.openid.net/auth/2.0/identifier_select&openid.assoc_handle=amzn_dp_project_dee&openid.mode=checkid_setup&openid.claimed_id=http://specs.openid.net/auth/2.0/identifier_select&openid.ns=http://specs.openid.net/auth/2.0& with\r\n<CIMultiDictProxy('Host': 'www.amazon.com', 'User-Agent': 'Mozilla/5.0 (Windows NT 6.3; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36', 'Accept': 'text/html,application/xhtml+xml, application/xml;q=0.9,*/*;q=0.8', 'Accept-Language': '*', 'Accept-Encoding': 'gzip, deflate', 'Cookie': 'session-id=140-1926401-1030615; session-id-time=2223813340l; session-token=8h23vDpL3moF2+OoX4OrRPk9rK0ccWd6ey1Ux+oQrPU4zSZ8OQOWY/jENsKLBLt3Hg5fObX6bsDPSXfZJuT6zS+FejQBWYbVC+lBM7hLv802EznMWudO75Ahi9v54fX3e61AZX6aYMD4lJS7S4OPf/j6nwwZyti2MevSmab7WJcNHEPS3++E4GaUutgiYYfP2iim9LhRfDq25seyiPmO55MrVBsvcR02; ubid-main=134-9998583-4128222')>\r\n returned 200:OK with response <CIMultiDictProxy('Content-Type': 'text/html;charset=UTF-8', 'Transfer-Encoding': 'chunked', 'Connection': 'keep-alive', 'Server': 'Server', 'Date': 'Thu, 25 Jun 2020 13:58:43 GMT', 'Strict-Transport-Security': 'max-age=47474747; includeSubDomains; preload', 'X-XSS-Protection': '1', 'X-Content-Type-Options': 'nosniff', 'X-Frame-Options': 'SAMEORIGIN', 'x-ua-compatible': 'IE=edge', 'Pragma': 'No-cache', 'Cache-Control': 'max-age=0, no-cache, no-store, must-revalidate', 'Expires': 'Thu, 01 Jan 1970 00:00:00 GMT', 'Set-Cookie': 'ap-fid=\"\"; Domain=.amazon.com; Expires=Thu, 01-Jan-1970 00:00:10 GMT; Path=/ap/; Secure', 'Set-Cookie': 'session-id=140-1926401-1030615; Domain=.amazon.com; Expires=Fri, 25-Jun-2021 13:58:43 GMT; Path=/; Secure', 'Set-Cookie': 'session-id-time=2223813523l; Domain=.amazon.com; Expires=Fri, 25-Jun-2021 13:58:43 GMT; Path=/; Secure', 'Set-Cookie': 'ubid-main=134-9998583-4128222; Domain=.amazon.com; Expires=Fri, 25-Jun-2021 13:58:43 GMT; Path=/; Secure', 'Set-Cookie': 'session-token=8h23vDpL3moF2+OoX4OrRPk9rK0ccWd6ey1Ux+oQrPU4zSZ8OQOWY/jENsKLBLt3Hg5fObX6bsDPSXfZJuT6zS+FejQBWYbVC+lBM7hLv802EznMWudO75Ahi9v54fX3e61AZX6aYMD4lJS7S4OPf/j6nwwZyti2MevSmab7WJcNHEPS3++E4GaUutgiYYfP2iim9LhRfDq25seyiPmO55MrVBsvcR02; Domain=.amazon.com; Expires=Fri, 25-Jun-2021 13:58:43 GMT; Path=/; Secure', 'Vary': 'Accept-Encoding,X-Amzn-CDN-Cache,X-Amzn-AX-Treatment,User-Agent', 'Content-Encoding': 'gzip', 'x-amz-rid': 'JMCCBZ7J4HJ1WGY691Y4', 'p3p': 'policyref=\"http://www.amazon.com/w3c/p3p.xml\",CP=\"CAO DSP LAW CUR ADM IVAo IVDo CONo OTPo OUR DELi PUBi OTRi BUS PHY ONL UNI PUR FIN COM NAV INT DEM CNT STA HEA PRE LOC GOV OTC \"', 'X-Cache': 'Miss from cloudfront', 'Via': '1.1 47f167ca4b48d927b2e7abade7ebfcfd.cloudfront.net (CloudFront)', 'X-Amz-Cf-Pop': 'EWR53-C2', 'X-Amz-Cf-Id': 'NKVTOa0BA2jOQREwCZNigAr-4RuO3sVBqrwzwxJA08I2QWajydazHg==')>\r\n2020-06-25 09:58:43 DEBUG (MainThread) [alexapy.alexalogin] Not logged in: An exception of type ContentTypeError occurred. Arguments:\r\n(RequestInfo(url=URL('https://www.amazon.com/ap/signin?showRmrMe=1&openid.return_to=https://alexa.amazon.com/api/bootstrap&openid.identity=http://specs.openid.net/auth/2.0/identifier_select&openid.assoc_handle=amzn_dp_project_dee&openid.mode=checkid_setup&openid.claimed_id=http://specs.openid.net/auth/2.0/identifier_select&openid.ns=http://specs.openid.net/auth/2.0&'), method='GET', headers=<CIMultiDictProxy('Host': 'www.amazon.com', 'User-Agent': 'Mozilla/5.0 (Windows NT 6.3; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36', 'Accept': 'text/html,application/xhtml+xml, application/xml;q=0.9,*/*;q=0.8', 'Accept-Language': '*', 'Accept-Encoding': 'gzip, deflate', 'Cookie': 'session-id=140-1926401-1030615; session-id-time=2223813340l; session-token=8h23vDpL3moF2+OoX4OrRPk9rK0ccWd6ey1Ux+oQrPU4zSZ8OQOWY/jENsKLBLt3Hg5fObX6bsDPSXfZJuT6zS+FejQBWYbVC+lBM7hLv802EznMWudO75Ahi9v54fX3e61AZX6aYMD4lJS7S4OPf/j6nwwZyti2MevSmab7WJcNHEPS3++E4GaUutgiYYfP2iim9LhRfDq25seyiPmO55MrVBsvcR02; ubid-main=134-9998583-4128222')>, real_url=URL('https://www.amazon.com/ap/signin?showRmrMe=1&openid.return_to=https://alexa.amazon.com/api/bootstrap&openid.identity=http://specs.openid.net/auth/2.0/identifier_select&openid.assoc_handle=amzn_dp_project_dee&openid.mode=checkid_setup&openid.claimed_id=http://specs.openid.net/auth/2.0/identifier_select&openid.ns=http://specs.openid.net/auth/2.0&')), (<ClientResponse(https://alexa.amazon.com/api/bootstrap) [302 Found]>\r\n<CIMultiDictProxy('Content-Length': '20', 'Connection': 'keep-alive', 'Server': 'Server', 'Date': 'Thu, 25 Jun 2020 13:58:43 GMT', 'x-amzn-RequestId': 'f4dfb93c-5c54-4c10-b4d2-0486b2c7fb6b', 'Content-Encoding': 'gzip', 'Location': 'https://www.amazon.com/ap/signin?showRmrMe=1&openid.return_to=https%3A%2F%2Falexa.amazon.com%2Fapi%2Fbootstrap&openid.identity=http%3A%2F%2Fspecs.openid.net%2Fauth%2F2.0%2Fidentifier_select&openid.assoc_handle=amzn_dp_project_dee&openid.mode=checkid_setup&openid.claimed_id=http%3A%2F%2Fspecs.openid.net%2Fauth%2F2.0%2Fidentifier_select&openid.ns=http%3A%2F%2Fspecs.openid.net%2Fauth%2F2.0&', 'Vary': 'Content-Type,Accept-Encoding,X-Amzn-CDN-Cache,X-Amzn-AX-Treatment,User-Agent', 'x-amz-rid': 'Q8EKT8H5R6HCHYXRHJSK', 'X-Cache': 'Miss from cloudfront', 'Via': '1.1 42d3518040c55e24793897f7f5d5f342.cloudfront.net (CloudFront)', 'X-Amz-Cf-Pop': 'EWR53-C1', 'X-Amz-Cf-Id': 'fT36v385S1gzLfpImmB0gX1kumcRGSVxKu4arqMHVaZT0fKtQW2uMQ==')>\r\n,))\r\n2020-06-25 09:58:43 DEBUG (MainThread) [alexapy.alexalogin] Login failed; check credentials\r\n2020-06-25 09:58:43 DEBUG (MainThread) [alexapy.alexalogin] If credentials correct, please report these missing values: ['encryptedPasswordExpected']\r\n2020-06-25 09:58:43 DEBUG (MainThread) [alexapy.alexalogin] Found form to process: <form action=\"/ap/cvf/approval/poll\" id=\"pollingForm\" method=\"get\">\r\n<input name=\"arb\" type=\"hidden\" value=\"af57af10-eaf2-4d11-9571-b2638e527364\"/><input name=\"openid.return_to\" type=\"hidden\" value=\"https://www.amazon.com/ap/signin?ie=UTF8&amp;clientContext=134-9998583-4128222&amp;arb=c99ef662-1cf9-4f7b-943c-c2a9da4f2ecd&amp;showRmrMe=1&amp;use_global_authentication=false&amp;openid.return_to=https%3A%2F%2Falexa.amazon.com%2F&amp;openid.identity=http%3A%2F%2Fspecs.openid.net%2Fauth%2F2.0%2Fidentifier_select&amp;openid.assoc_handle=amzn_dp_project_dee&amp;openid.mode=checkid_setup&amp;use_audio_captcha=false&amp;pageId=amzn_dp_project_dee&amp;openid.claimed_id=http%3A%2F%2Fspecs.openid.net%2Fauth%2F2.0%2Fidentifier_select&amp;openid.ns=http%3A%2F%2Fspecs.openid.net%2Fauth%2F2.0\"/><input name=\"pageId\" type=\"hidden\" value=\"amzn_dp_project_dee\"/><input name=\"openid.assoc_handle\" type=\"hidden\" value=\"amzn_dp_project_dee\"/>\r\n<input name=\"csrfToken\" type=\"hidden\" value=\"WelHiwUgMyLoYiae5OGOj2B5nklfMj3D\"/></form>\r\n2020-06-25 09:58:43 DEBUG (MainThread) [alexapy.alexalogin] Found post url to /ap/cvf/approval/poll\r\n2020-06-25 09:58:43 DEBUG (MainThread) [alexapy.alexalogin] Preparing post to /ap/cvf/approval/poll with input data: {'captcha': 'yb2xdb'}\r\n2020-06-25 09:58:43 DEBUG (MainThread) [alexapy.alexalogin] WARNING: Detected missing params: True\r\n2020-06-25 09:58:43 DEBUG (MainThread) [alexapy.alexalogin] Session Cookies:\r\namazon.com: expires:Fri, 25-Jun-2021 13:58:43 GMT max-age: session-id=140-1926401-1030615\r\namazon.com: expires:Fri, 25-Jun-2021 13:58:43 GMT max-age: session-id-time=2223813523l\r\namazon.com: expires:Fri, 25-Jun-2021 13:58:43 GMT max-age: ubid-main=134-9998583-4128222\r\namazon.com: expires:Fri, 25-Jun-2021 13:58:43 GMT max-age: session-token=8h23vDpL3moF2+OoX4OrRPk9rK0ccWd6ey1Ux+oQrPU4zSZ8OQOWY/jENsKLBLt3Hg5fObX6bsDPSXfZJuT6zS+FejQBWYbVC+lBM7hLv802EznMWudO75Ahi9v54fX3e61AZX6aYMD4lJS7S4OPf/j6nwwZyti2MevSmab7WJcNHEPS3++E4GaUutgiYYfP2iim9LhRfDq25seyiPmO55MrVBsvcR02\r\n\r\n2020-06-25 09:58:43 DEBUG (MainThread) [alexapy.alexalogin] Submit Form Data: {\"appActionToken\": \"j2FOkmfmlIlOKBVl5Uj2BesgXomez1cj3D\", \"appAction\": \"SIGNIN\", \"ces\": \"ape:QUNTXzVQbU9XL1VhOGpSWGtXNFlUaW0rcm45L2YzOEFBQUFBQUFBQUFXQ0k4d3k1MnZxM3I5dG1BWFZNVENLSlZ3YTFuNUxqdnkvWVROb1h6TzVlMnVHS0ZLa1FCZmdBV1dUYWpTSmxlQmlzcTJiQUFLNzlZZEZSNjBaWERBRklOcWt4UGpXOFFHaC9FVU1xcWRXV1RJa0QzRUpQVkZTWjZBQzFSaWRScXhEbVZNbktuWjFocjJzUENVKzZRSHcwWndPN1h6alRVUGlxWWZFU29ZUEJ3RDZsQklld2V6VGFPdHl3T2h0NTl4ZnhzRHJhUXhzNmNaenZRZFFpWmZ5NElrN3FqNStnNjhPNnVSeFJYc3ZtZSs5S1FqSWZmQXZmUGZSNUNjd0N1ZWw2R1Rsbm4zNEFaSEJrSDJJNFhuVUdTYmRaU3lwMlNuTXVzeHpTOWhxVmZjbHhIdkp2VWxXWDl2Mzl5QzFLZ2hXN2d0ZkNMMVFMdWNjQmVTVnpGSjA9\", \"openid.return_to\": \"ape:aHR0cHM6Ly9hbGV4YS5hbWF6b24uY29tLw==\", \"prevRID\": \"ape:UE1SREpITldBRFBFQUZCQjVIMFA=\", \"workflowState\": \"eyJ6aXAiOiJERUYiLCJlbmMiOiJBMjU2R0NNIiwiYWxnIjoiQTI1NktXIn0.P1GiCr5aRGE08ZXGE5IQnjF-CmoCP-I7MCJBoQhnJvd5fj42gl7gVQ.FAArKRJEeEZBWT0F.wlI60VN6NVU-UDBa0tbYV8E8Q1is3QR5fZeYMGXtv-pik0JvMzBPVISKsX7YwRaGrYeAjrU6IcB-o9BOYpGWA99Txw3lQyxA4NPa5aOe9QjVclwm231CUyXp60J7CVqXEJXuxp5PrbfUBKtz9qq3bcR1u7OUDmOr54SR4vai9_Mckd-KpL7OO5V1up7o4VDANLGpvuYvq7HuAXWa-z-27yP8F97hb3Fx-xkwpTU-6uzSnbqXJ1llKx2t2CZmUnxDy01ZxK2uMhmJM_xFQWyc1qpASM3ZzWb1XjW9BzgZ6do8jw49f90VcLxFcMmB2PgMYTj8_7f2zlLkCPsrEecsIT8eh7sRCV3BOttqKIU4JurQ0j9CLG7xkWDHgzLzETuZHi3TvsLm-NsKRcOohC8ibns2ksaoo46ExUNjunoc8nYaCmq6wJjJy2HtnBARRcv9IqoziMiZzeCoM4ZuSH8Ap5uudh1XutZm4iZpzfMTKbARJaPYBkWQnJcaT8x8rFRklIBYFD6rVsGhcN2QH-V_Sw102ymM5ZJLROw17nM.V0hq9Zzfm8kuumYCAgMdzg\", \"email\":\": \"false\", \"encryptedPasswordExpected\": \"\", \"rememberMe\": \"true\", \"use_image_captcha\": \"true\", \"use_audio_captcha\": \"false\", \"guess\": \"yb2xdb\"}\r\n2020-06-25 09:58:43 DEBUG (MainThread) [alexapy.alexalogin] Header: {\"User-Agent\": \"Mozilla/5.0 (Windows NT 6.3; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36\", \"Accept\": \"text/html,application/xhtml+xml, application/xml;q=0.9,*/*;q=0.8\", \"Accept-Language\": \"*\", \"Referer\": \"https://www.amazon.com/ap/signin?showRmrMe=1&openid.return_to=https://alexa.amazon.com/api/bootstrap&openid.identity=http://specs.openid.net/auth/2.0/identifier_select&openid.assoc_handle=amzn_dp_project_dee&openid.mode=checkid_setup&openid.claimed_id=http://specs.openid.net/auth/2.0/identifier_select&openid.ns=http://specs.openid.net/auth/2.0&\"}\r\n2020-06-25 09:58:43 ERROR (MainThread) [alexapy.helpers] alexalogin.login((<alexapy.alexalogin.AlexaLogin object at 0x7f8cddc52890>,), {'data': {'captcha': 'yb2xdb'}}): An error occured accessing AlexaAPI: An exception of type InvalidURL occurred. Arguments:\r\n(URL('/ap/cvf/approval/poll'),)\r\n2020-06-25 09:58:43 ERROR (MainThread) [homeassistant.components.websocket_api.http.connection.140242973399952] /ap/cvf/approval/poll\r\nTraceback (most recent call last):\r\n  File \"/srv/homeassistant/lib/python3.7/site-packages/homeassistant/components/websocket_api/commands.py\", line 130, in handle_call_service\r\n    connection.context(msg),\r\n  File \"/srv/homeassistant/lib/python3.7/site-packages/homeassistant/core.py\", line 1260, in async_call\r\n    task.result()\r\n  File \"/srv/homeassistant/lib/python3.7/site-packages/homeassistant/core.py\", line 1295, in _execute_service\r\n    await handler.func(service_call)\r\n  File \"/srv/homeassistant/lib/python3.7/site-packages/homeassistant/components/configurator/__init__.py\", line 235, in async_handle_service_call\r\n    await self.hass.async_add_job(callback, call.data.get(ATTR_FIELDS, {}))\r\n  File \"/home/homeassistant/.homeassistant/custom_components/alexa_media/configurator.py\", line 28, in configuration_callback\r\n    setup_platform_callback, hass, config_entry, login, callback_data\r\n  File \"/home/homeassistant/.homeassistant/custom_components/alexa_media/configurator.py\", line 177, in setup_platform_callback\r\n    await login.login(data=callback_data)\r\n  File \"/srv/homeassistant/lib/python3.7/site-packages/alexapy/helpers.py\", line 104, in wrapper\r\n    return await func(*args, **kwargs)\r\n  File \"/srv/homeassistant/lib/python3.7/site-packages/alexapy/alexalogin.py\", line 431, in login\r\n    site, data=self._data, headers=self._headers, ssl=self._ssl,\r\n  File \"/srv/homeassistant/lib/python3.7/site-packages/alexapy/aiohttp/client.py\", line 506, in _request\r\n    traces=traces,\r\n  File \"/srv/homeassistant/lib/python3.7/site-packages/alexapy/aiohttp/client_reqrep.py\", line 308, in __init__\r\n    self.update_host(url)\r\n  File \"/srv/homeassistant/lib/python3.7/site-packages/alexapy/aiohttp/client_reqrep.py\", line 369, in update_host\r\n    raise InvalidURL(url)\r\nalexapy.aiohttp.client_exceptions.InvalidURL: /ap/cvf/approval/poll`\r\n```\r\n\r\n</details>\r\n\r\n![Screen Shot 2020-06-25 at 10 21 44 AM](https://user-images.githubusercontent.com/45539718/85738099-c5204a00-b6cd-11ea-8bc3-f04c6e476b13.png)\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/807/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/807/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/805", "repository_url": "https://api.github.com/repos/custom-components/alexa_media_player", "labels_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/805/labels{/name}", "comments_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/805/comments", "events_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/805/events", "html_url": "https://github.com/custom-components/alexa_media_player/issues/805", "id": 644654345, "node_id": "MDU6SXNzdWU2NDQ2NTQzNDU=", "number": 805, "title": "Not logged in due to email mismatch - Mobile accounts unable to log in", "user": {"login": "pizzakid25", "id": 61093919, "node_id": "MDQ6VXNlcjYxMDkzOTE5", "avatar_url": "https://avatars.githubusercontent.com/u/61093919?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pizzakid25", "html_url": "https://github.com/pizzakid25", "followers_url": "https://api.github.com/users/pizzakid25/followers", "following_url": "https://api.github.com/users/pizzakid25/following{/other_user}", "gists_url": "https://api.github.com/users/pizzakid25/gists{/gist_id}", "starred_url": "https://api.github.com/users/pizzakid25/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pizzakid25/subscriptions", "organizations_url": "https://api.github.com/users/pizzakid25/orgs", "repos_url": "https://api.github.com/users/pizzakid25/repos", "events_url": "https://api.github.com/users/pizzakid25/events{/privacy}", "received_events_url": "https://api.github.com/users/pizzakid25/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 983327104, "node_id": "MDU6TGFiZWw5ODMzMjcxMDQ=", "url": "https://api.github.com/repos/custom-components/alexa_media_player/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}, {"id": 1246346849, "node_id": "MDU6TGFiZWwxMjQ2MzQ2ODQ5", "url": "https://api.github.com/repos/custom-components/alexa_media_player/labels/alexapy", "name": "alexapy", "color": "e23ba8", "default": false, "description": "Issue relates to the API"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 8, "created_at": "2020-06-24T14:19:30Z", "updated_at": "2020-06-28T21:28:14Z", "closed_at": "2020-06-27T08:39:45Z", "author_association": "NONE", "active_lock_reason": null, "body": "**Describe the bug**\r\nI am still unable to login after upgrading to v2.8.7 via HACS and restarting multiple times.\r\n\r\n**To Reproduce**\r\nSteps to reproduce the behavior:\r\n1. Go to 'Configuration'\r\n2. Click on 'Integrations'\r\n3. Select 'Set up a new integration'\r\n4. Click 'Alexa Media Player'\r\n5. Attempt login\r\n6. See error\r\n\r\n**Expected behavior**\r\nSuccessfully login and integrate Alexa Media Player\r\n\r\n**System details**\r\n - Home-assistant (version): v0.111.4\r\n - Hassio (Yes/No): Yes; HassOS v4.10\r\n - alexa_media  (version from `const.py` or HA startup): v2.8.7\r\n - alexapy (version from `pip show alexapy` or HA startup): v1.10.5\r\n\r\n**Logs**\r\n```\r\n020-06-24 09:33:44 DEBUG (MainThread) [custom_components.alexa_media.config_flow] show_form user None None OrderedDict([('email', <class 'str'>), ('password', <class 'str'>), ('url', <class 'str'>), ('debug', <class 'bool'>), ('include_devices', <class 'str'>), ('exclude_devices', <class 'str'>), ('scan_interval', <class 'int'>)])\r\n2020-06-24 09:34:01 DEBUG (MainThread) [custom_components.alexa_media.config_flow] Creating new login\r\n2020-06-24 09:34:01 DEBUG (MainThread) [alexapy.alexalogin] No valid cookies for log in; using credentials\r\n2020-06-24 09:34:01 DEBUG (MainThread) [alexapy.alexalogin] GET: redirected from\r\nhttps://alexa.amazon.com\r\n2020-06-24 09:34:01 DEBUG (MainThread) [alexapy.alexalogin] GET: \r\nhttps://www.amazon.com/ap/signin?showRmrMe=1&openid.return_to=https://alexa.amazon.com/&openid.identity=http://specs.openid.net/auth/2.0/identifier_select&openid.assoc_handle=amzn_dp_project_dee&openid.mode=checkid_setup&openid.claimed_id=http://specs.openid.net/auth/2.0/identifier_select&openid.ns=http://specs.openid.net/auth/2.0& returned 200:OK with response <CIMultiDictProxy('Server': 'Server', 'Content-Type': 'text/html;charset=UTF-8', 'Strict-Transport-Security': 'max-age=47474747; includeSubDomains; preload', 'X-XSS-Protection': '1', 'X-Content-Type-Options': 'nosniff', 'X-Frame-Options': 'SAMEORIGIN', 'x-ua-compatible': 'IE=edge', 'Pragma': 'No-cache', 'Cache-Control': 'max-age=0, no-cache, no-store, must-revalidate', 'Expires': 'Thu, 01 Jan 1970 00:00:00 GMT', 'Vary': 'Accept-Encoding,X-Amzn-CDN-Cache,X-Amzn-AX-Treatment,User-Agent', 'Content-Encoding': 'gzip', 'x-amz-rid': 'TEHV6NV92SNP8ZBMS0FD', 'p3p': 'policyref=\"http://www.amazon.com/w3c/p3p.xml\",CP=\"CAO DSP LAW CUR ADM IVAo IVDo CONo OTPo OUR DELi PUBi OTRi BUS PHY ONL UNI PUR FIN COM NAV INT DEM CNT STA HEA PRE LOC GOV OTC \"', 'Date': 'Wed, 24 Jun 2020 13:34:01 GMT', 'Transfer-Encoding': 'chunked', 'Connection': 'keep-alive', 'Connection': 'Transfer-Encoding', 'Set-Cookie': 'ap-fid=\"\"; Domain=.amazon.com; Expires=Thu, 01-Jan-1970 00:00:10 GMT; Path=/ap/; Secure', 'Set-Cookie': 'session-id=140-5623353-3294106; Domain=.amazon.com; Expires=Thu, 24-Jun-2021 13:34:01 GMT; Path=/; Secure', 'Set-Cookie': 'session-id-time=2223725641l; Domain=.amazon.com; Expires=Thu, 24-Jun-2021 13:34:01 GMT; Path=/; Secure')>\r\n2020-06-24 09:34:01 DEBUG (MainThread) [alexapy.alexalogin] Processing https://www.amazon.com/ap/signin?showRmrMe=1&openid.return_to=https://alexa.amazon.com/&openid.identity=http://specs.openid.net/auth/2.0/identifier_select&openid.assoc_handle=amzn_dp_project_dee&openid.mode=checkid_setup&openid.claimed_id=http://specs.openid.net/auth/2.0/identifier_select&openid.ns=http://specs.openid.net/auth/2.0&\r\n2020-06-24 09:34:01 DEBUG (MainThread) [alexapy.alexalogin] Found standard login page\r\n2020-06-24 09:34:01 DEBUG (MainThread) [alexapy.alexalogin] Found post url to https://www.amazon.com/ap/signin/140-5623353-3294106\r\n2020-06-24 09:34:01 DEBUG (MainThread) [alexapy.alexalogin] Preparing post to https://www.amazon.com/ap/signin/140-5623353-3294106 with input data: {}\r\n2020-06-24 09:34:02 DEBUG (MainThread) [alexapy.alexalogin] POST: \r\nhttps://www.amazon.com/ap/signin/140-5623353-3294106 returned 200:OK with response <CIMultiDictProxy('Server': 'Server', 'Content-Type': 'text/html;charset=UTF-8', 'Strict-Transport-Security': 'max-age=47474747; includeSubDomains; preload', 'X-XSS-Protection': '1', 'X-Content-Type-Options': 'nosniff', 'X-Frame-Options': 'SAMEORIGIN', 'x-ua-compatible': 'IE=edge', 'Pragma': 'No-cache', 'Cache-Control': 'max-age=0, no-cache, no-store, must-revalidate', 'Expires': 'Thu, 01 Jan 1970 00:00:00 GMT', 'Vary': 'Accept-Encoding,X-Amzn-CDN-Cache,X-Amzn-AX-Treatment,User-Agent', 'Content-Encoding': 'gzip', 'x-amz-rid': 'NFEEXM5373HRTK3JBRE3', 'p3p': 'policyref=\"http://www.amazon.com/w3c/p3p.xml\",CP=\"CAO DSP LAW CUR ADM IVAo IVDo CONo OTPo OUR DELi PUBi OTRi BUS PHY ONL UNI PUR FIN COM NAV INT DEM CNT STA HEA PRE LOC GOV OTC \"', 'Date': 'Wed, 24 Jun 2020 13:34:02 GMT', 'Transfer-Encoding': 'chunked', 'Connection': 'keep-alive', 'Connection': 'Transfer-Encoding', 'Set-Cookie': 'ap-fid=\"\"; Domain=.amazon.com; Expires=Thu, 01-Jan-1970 00:00:10 GMT; Path=/ap/; Secure', 'Set-Cookie': 'session-id=140-5623353-3294106; Domain=.amazon.com; Expires=Thu, 24-Jun-2021 13:34:02 GMT; Path=/; Secure', 'Set-Cookie': 'session-id-time=2223725642l; Domain=.amazon.com; Expires=Thu, 24-Jun-2021 13:34:02 GMT; Path=/; Secure', 'Set-Cookie': 'ubid-main=134-4902074-9930055; Domain=.amazon.com; Expires=Thu, 24-Jun-2021 13:34:02 GMT; Path=/; Secure')>\r\n2020-06-24 09:34:02 DEBUG (MainThread) [alexapy.alexalogin] Processing https://www.amazon.com/ap/signin/140-5623353-3294106\r\n2020-06-24 09:34:02 DEBUG (MainThread) [alexapy.alexalogin] Error message: Important Message!\r\n            To better protect your account, please re-enter your password and then enter the characters as they are shown in the image below.\r\n          \r\n2020-06-24 09:34:02 DEBUG (MainThread) [alexapy.alexalogin] Captcha requested\r\n2020-06-24 09:34:02 DEBUG (MainThread) [alexapy.alexalogin] Found post url to https://www.amazon.com/ap/signin\r\n2020-06-24 09:34:02 DEBUG (MainThread) [custom_components.alexa_media.config_flow] Testing login status: {'error_message': 'Important Message!\\n            To better protect your account, please re-enter your password and then enter the characters as they are shown in the image below.\\n          ', 'captcha_required': True, 'captcha_image_url': 'https://opfcaptcha-prod.s3.amazonaws.com/d72619c6349d404f910a491ecc6cbf1d.jpg?AWSAccessKeyId=AKIA5WBBRBBB22K4E62K&Expires=1593005942&Signature=sr2sSA%2FSj314vssUo%2BHsTDK3tGg%3D'}\r\n2020-06-24 09:34:02 DEBUG (MainThread) [custom_components.alexa_media.config_flow] Creating config_flow to request captcha\r\n2020-06-24 09:34:02 DEBUG (MainThread) [custom_components.alexa_media.config_flow] show_form captcha {'email': 'REDACTED EMAIL', 'url': 'amazon.com', 'captcha_image': '[![captcha](https://opfcaptcha-prod.s3.amazonaws.com/d72619c6349d404f910a491ecc6cbf1d.jpg?AWSAccessKeyId=AKIA5WBBRBBB22K4E62K&Expires=1593005942&Signature=sr2sSA%2FSj314vssUo%2BHsTDK3tGg%3D)](https://opfcaptcha-prod.s3.amazonaws.com/d72619c6349d404f910a491ecc6cbf1d.jpg?AWSAccessKeyId=AKIA5WBBRBBB22K4E62K&Expires=1593005942&Signature=sr2sSA%2FSj314vssUo%2BHsTDK3tGg%3D)', 'message': '\\n> Important Message!\\n            To better protect your account, please re-enter your password and then enter the characters as they are shown in the image below.\\n          '} {} OrderedDict([('password', <class 'str'>), ('captcha', <class 'str'>)])\r\n2020-06-24 09:34:11 DEBUG (MainThread) [alexapy.alexalogin] No valid cookies for log in; using credentials\r\n2020-06-24 09:34:11 DEBUG (MainThread) [alexapy.alexalogin] Loaded last request to https://www.amazon.com/ap/signin/140-5623353-3294106 \r\n2020-06-24 09:34:11 DEBUG (MainThread) [alexapy.alexalogin] Processing https://www.amazon.com/ap/signin/140-5623353-3294106\r\n2020-06-24 09:34:11 DEBUG (MainThread) [alexapy.alexalogin] Error message: Important Message!\r\n            To better protect your account, please re-enter your password and then enter the characters as they are shown in the image below.\r\n          \r\n2020-06-24 09:34:11 DEBUG (MainThread) [alexapy.alexalogin] Captcha requested\r\n2020-06-24 09:34:11 DEBUG (MainThread) [alexapy.alexalogin] Found post url to https://www.amazon.com/ap/signin\r\n2020-06-24 09:34:11 DEBUG (MainThread) [alexapy.alexalogin] Preparing post to https://www.amazon.com/ap/signin with input data: {'password': 'REDACTED PASSWORD', 'captcha': 'dng576'}\r\n2020-06-24 09:34:12 DEBUG (MainThread) [alexapy.alexalogin] POST: redirected from\r\nhttps://www.amazon.com/ap/signin\r\n2020-06-24 09:34:12 DEBUG (MainThread) [alexapy.alexalogin] GET: redirected from\r\nhttps://alexa.amazon.com/?openid.assoc_handle=amzn_dp_project_dee&openid.claimed_id=https://www.amazon.com/ap/id/amzn1.account.AEOJOM2G45WJCGXCRXXBFJIRJXUQ&openid.identity=https://www.amazon.com/ap/id/amzn1.account.AEOJOM2G45WJCGXCRXXBFJIRJXUQ&openid.mode=id_res&openid.ns=http://specs.openid.net/auth/2.0&openid.op_endpoint=https://www.amazon.com/ap/signin&openid.response_nonce=2020-06-24T13:34:12Z3941085863088886186&openid.return_to=https://alexa.amazon.com/&openid.signed=assoc_handle,claimed_id,identity,mode,ns,op_endpoint,response_nonce,return_to,ns.pape,pape.auth_policies,pape.auth_time,captcha_verified,signed&openid.ns.pape=http://specs.openid.net/extensions/pape/1.0&openid.pape.auth_policies=http://schemas.openid.net/pape/policies/2007/06/none&openid.pape.auth_time=2020-06-24T13:34:11Z&openid.sig=eZ/ElVkuzXVH/KxgHfURt0kwihWlD/8bHlf0ogq86kI%3D&serial=&captcha_verified=1&\r\n2020-06-24 09:34:12 DEBUG (MainThread) [alexapy.alexalogin] GET: \r\nhttps://alexa.amazon.com:443/spa/index.html returned 200:OK with response <CIMultiDictProxy('Content-Type': 'text/html', 'Content-Length': '6864', 'Connection': 'keep-alive', 'Server': 'Server', 'Date': 'Wed, 24 Jun 2020 13:34:12 GMT', 'x-amzn-RequestId': '0f603370-f12a-4eda-b35a-6b7a38b70c03', 'X-XSS-Protection': '1; mode=block', 'Content-Encoding': 'gzip', 'X-Frame-Options': 'DENY', 'Content-Security-Policy': \"script-src  'self'  'unsafe-inline'  'unsafe-eval'  https://*.amazon.com https://*.amazon.com https://static.cdn-ec.viddler.com https://c2c-eu.amazon.com https://c2c-fe.amazon.com https://completion.amazon.com https://completion.amazon.co.uk https://completion.amazon.co.jp; connect-src  'self'  wss://*.amazon.com wss://*.amazon.com:443 wss://*.amazon.com wss://*.amazon.co.uk wss://*.amazon.de wss://*.amazon.in wss://*.amazon.fr wss://*.amazon.it wss://*.amazon.nl wss://*.amazon.ca wss://*.amazon.com.mx wss://*.amazon.com.br wss://*.amazon.cn wss://*.amazon.co.jp wss://*.amazon.com.au wss://*.amazon.es  https://*.amazon.com https://*.amazon.com https://cognito-identity.us-east-1.amazonaws.com https://mobileanalytics.us-east-1.amazonaws.com https://s3.amazonaws.com https://10.201.126.241:8080 https://192.168.11.1:8080 http://10.201.126.241:8080 http://192.168.11.1:8080; report-uri /api/contentSecurityPolicy/violations\", 'Set-Cookie': 'csrf=-805186995; expires=Mon, 24-Jun-2030 13:34:12 GMT; Domain=.amazon.com; Path=/', 'Cache-Control': 'no-cache', 'Expires': 'Wed, 24 Jun 2020 13:34:12 UTC', 'X-Content-Type-Options': 'nosniff', 'Frame-Options': 'DENY', 'Vary': 'Content-Type,Accept-Encoding,X-Amzn-CDN-Cache,X-Amzn-AX-Treatment,User-Agent', 'x-amz-rid': 'WFH3S6YARQH01C2WPGEN', 'X-Cache': 'Miss from cloudfront', 'Via': '1.1 826f3843a9f6b2040e54551f0def9c7b.cloudfront.net (CloudFront)', 'X-Amz-Cf-Pop': 'IAD79-C2', 'X-Amz-Cf-Id': 'Se8846FCKN0E10lQTKgZABwKyUMuReGKIiucfpUHG8CUOchsbgw87Q==')>\r\n2020-06-24 09:34:12 DEBUG (MainThread) [alexapy.alexalogin] Processing https://alexa.amazon.com:443/spa/index.html\r\n2020-06-24 09:34:12 DEBUG (MainThread) [alexapy.alexalogin] Captcha/2FA not requested; confirming login.\r\n2020-06-24 09:34:12 DEBUG (MainThread) [alexapy.alexalogin] GET: \r\nhttps://alexa.amazon.com/api/bootstrap returned 200:OK with response <CIMultiDictProxy('Content-Type': 'application/json', 'Content-Length': '133', 'Connection': 'keep-alive', 'Server': 'Server', 'Date': 'Wed, 24 Jun 2020 13:34:12 GMT', 'x-amzn-RequestId': '53b14078-6075-4a8a-aeda-69ada74ccb8f', 'Content-Encoding': 'gzip', 'Vary': 'Content-Type,Accept-Encoding,X-Amzn-CDN-Cache,X-Amzn-AX-Treatment,User-Agent', 'x-amz-rid': 'W5TSZZH6M4GWETK9AGSS', 'X-Cache': 'Miss from cloudfront', 'Via': '1.1 826f3843a9f6b2040e54551f0def9c7b.cloudfront.net (CloudFront)', 'X-Amz-Cf-Pop': 'IAD79-C2', 'X-Amz-Cf-Id': '3UYm7Pws5gzL1JI5XBhw5oFODUSQzE9kmR4R4iP5JzlY9XTyfLhANw==')>\r\n2020-06-24 09:34:12 DEBUG (MainThread) [alexapy.alexalogin] Not logged in due to email mismatch\r\n2020-06-24 09:34:12 DEBUG (MainThread) [alexapy.alexalogin] Login failed; check credentials\r\n2020-06-24 09:34:12 ERROR (MainThread) [alexapy.helpers] alexalogin.login((<alexapy.alexalogin.AlexaLogin object at 0x6b5ec250>,), {'data': {'password': 'REDACTED 8 CHARS', 'captcha': 'dng576'}}): An error occured accessing AlexaAPI: An exception of type AssertionError occurred. Arguments:\r\n()\r\n2020-06-24 09:34:12 WARNING (MainThread) [custom_components.alexa_media.config_flow] Unknown error: \r\n2020-06-24 09:34:12 DEBUG (MainThread) [custom_components.alexa_media.config_flow] show_form user None {'base': 'unknown_error'} None\r\n```", "reactions": {"url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/805/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/805/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/796", "repository_url": "https://api.github.com/repos/custom-components/alexa_media_player", "labels_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/796/labels{/name}", "comments_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/796/comments", "events_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/796/events", "html_url": "https://github.com/custom-components/alexa_media_player/issues/796", "id": 642628105, "node_id": "MDU6SXNzdWU2NDI2MjgxMDU=", "number": 796, "title": "An error occured accessing AlexaAPI: An exception of type RuntimeError occurred. Arguments: ('Session is closed',)", "user": {"login": "alandtse", "id": 7086117, "node_id": "MDQ6VXNlcjcwODYxMTc=", "avatar_url": "https://avatars.githubusercontent.com/u/7086117?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alandtse", "html_url": "https://github.com/alandtse", "followers_url": "https://api.github.com/users/alandtse/followers", "following_url": "https://api.github.com/users/alandtse/following{/other_user}", "gists_url": "https://api.github.com/users/alandtse/gists{/gist_id}", "starred_url": "https://api.github.com/users/alandtse/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alandtse/subscriptions", "organizations_url": "https://api.github.com/users/alandtse/orgs", "repos_url": "https://api.github.com/users/alandtse/repos", "events_url": "https://api.github.com/users/alandtse/events{/privacy}", "received_events_url": "https://api.github.com/users/alandtse/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 983327104, "node_id": "MDU6TGFiZWw5ODMzMjcxMDQ=", "url": "https://api.github.com/repos/custom-components/alexa_media_player/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}, {"id": 1246346849, "node_id": "MDU6TGFiZWwxMjQ2MzQ2ODQ5", "url": "https://api.github.com/repos/custom-components/alexa_media_player/labels/alexapy", "name": "alexapy", "color": "e23ba8", "default": false, "description": "Issue relates to the API"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-06-21T19:42:34Z", "updated_at": "2020-06-24T04:30:30Z", "closed_at": "2020-06-24T04:30:30Z", "author_association": "COLLABORATOR", "active_lock_reason": null, "body": "**Describe the bug**\r\nAfter a relogin attempt, the component reconnects succesfully and performs static gets without error.\r\n\r\n**To Reproduce**\r\nSteps to reproduce the behavior:\r\n1. Relogin with configurator after session expires.\r\n2. See error\r\n\r\n**Expected behavior**\r\nA clear and concise description of what you expected to happen.\r\nSession should automatically be refreshed for all commands.\r\n\r\n**Screenshots**\r\nIf applicable, add screenshots to help explain your problem.\r\n\r\n**System details**\r\n - Home-assistant (version):  111.4\r\n - Hassio (Yes/No): (Please note you may have to restart hassio 2-3 times to load the latest version of alexapy after an update. This looks like a HA bug). Yes\r\n - alexa_media  (version from `const.py` or HA startup): 2.8.6\r\n - alexapy (version from `pip show alexapy` or HA startup): 1.10.4\r\n\r\n**Logs**\r\nPlease provide [logs](https://github.com/custom-components/alexa_media_player/wiki/FAQ#how-do-i-enable-debug-logging-for-the-component). We'll be most likely asking for them anyway.\r\n\r\n```\r\n2020-06-21 12:36:29 ERROR (MainThread) [alexapy.helpers] alexaapi.get_state((<alexapy.alexaapi.AlexaAPI object at 0xa8cddbd0>,), {}): An error occured accessing AlexaAPI: An exception of type RuntimeError occurred. Arguments:\r\n('Session is closed',)\r\n2020-06-21 12:36:29 ERROR (MainThread) [homeassistant.util.logging] Exception in _handle_event when dispatching 'alexa_media_a******e@g*******m': ({'player_state': {'destinationUserId': 'XXX', 'dopplerId': {'deviceType': 'AB72C64C86AW2', 'deviceSerialNumber': 'XXX'}, 'audioPlayerState': 'PLAYING', 'quality': None, 'error': False, 'errorMessage': None, 'mediaReferenceId': '78e56ac3-4ab4-4c85-86b4-3d9bb3f5ae60:6'}},)\r\nTraceback (most recent call last):\r\n  File \"/config/custom_components/alexa_media/media_player.py\", line 369, in _handle_event\r\n    await self.async_update()\r\n  File \"/config/custom_components/alexa_media/helpers.py\", line 148, in wrapper\r\n    result = await func(*args, **kwargs)\r\n  File \"/config/custom_components/alexa_media/media_player.py\", line 802, in async_update\r\n    device, no_throttle=True\r\n  File \"/config/custom_components/alexa_media/helpers.py\", line 148, in wrapper\r\n    result = await func(*args, **kwargs)\r\n  File \"/config/custom_components/alexa_media/media_player.py\", line 545, in refresh\r\n    session = await self.alexa_api.get_state()\r\n  File \"/usr/local/lib/python3.7/site-packages/alexapy/helpers.py\", line 69, in wrapper\r\n    return await func(*args, **kwargs)\r\n  File \"/usr/local/lib/python3.7/site-packages/alexapy/alexaapi.py\", line 761, in get_state\r\n    + \"&screenWidth=2560\"\r\n  File \"/usr/local/lib/python3.7/site-packages/alexapy/alexaapi.py\", line 122, in _get_request\r\n    return await self._request(\"get\", uri, data)\r\n  File \"/usr/local/lib/python3.7/site-packages/backoff/_async.py\", line 133, in retry\r\n    ret = await target(*args, **kwargs)\r\n  File \"/usr/local/lib/python3.7/site-packages/alexapy/alexaapi.py\", line 93, in _request\r\n    ssl=self._login._ssl,\r\n  File \"/usr/local/lib/python3.7/site-packages/alexapy/aiohttp/client.py\", line 377, in _request\r\n    raise RuntimeError(\"Session is closed\")\r\nRuntimeError: Session is closed\r\n```\r\n\r\n**Additional context**\r\nAdd any other context about the problem here. \r\n", "reactions": {"url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/796/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/796/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/783", "repository_url": "https://api.github.com/repos/custom-components/alexa_media_player", "labels_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/783/labels{/name}", "comments_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/783/comments", "events_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/783/events", "html_url": "https://github.com/custom-components/alexa_media_player/issues/783", "id": 639318265, "node_id": "MDU6SXNzdWU2MzkzMTgyNjU=", "number": 783, "title": "[Security Issue] Log file displaying password on error", "user": {"login": "rkaramandi", "id": 11652239, "node_id": "MDQ6VXNlcjExNjUyMjM5", "avatar_url": "https://avatars.githubusercontent.com/u/11652239?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rkaramandi", "html_url": "https://github.com/rkaramandi", "followers_url": "https://api.github.com/users/rkaramandi/followers", "following_url": "https://api.github.com/users/rkaramandi/following{/other_user}", "gists_url": "https://api.github.com/users/rkaramandi/gists{/gist_id}", "starred_url": "https://api.github.com/users/rkaramandi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rkaramandi/subscriptions", "organizations_url": "https://api.github.com/users/rkaramandi/orgs", "repos_url": "https://api.github.com/users/rkaramandi/repos", "events_url": "https://api.github.com/users/rkaramandi/events{/privacy}", "received_events_url": "https://api.github.com/users/rkaramandi/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 983327104, "node_id": "MDU6TGFiZWw5ODMzMjcxMDQ=", "url": "https://api.github.com/repos/custom-components/alexa_media_player/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}, {"id": 1246346849, "node_id": "MDU6TGFiZWwxMjQ2MzQ2ODQ5", "url": "https://api.github.com/repos/custom-components/alexa_media_player/labels/alexapy", "name": "alexapy", "color": "e23ba8", "default": false, "description": "Issue relates to the API"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2020-06-16T02:18:40Z", "updated_at": "2020-06-24T05:21:35Z", "closed_at": "2020-06-24T05:21:35Z", "author_association": "NONE", "active_lock_reason": null, "body": "For some reason my install was broken and while trying to reinstall it I ran into some issues and decided to check the logs. \r\n\r\nThis was while going through the configuration flow in the integrations page\r\n\r\nI noticed the following:\r\n```\r\n2020-06-15 22:12:34 ERROR (MainThread) [alexapy.helpers] alexalogin.login((<alexapy.alexalogin.AlexaLogin object at 0x7f1fc2a86c50>,), {'data': {'url': 'amazon.com', 'debug': False, 'scan_interval': 60, 'email': 'fake@email.com', 'password': 'fakepassword', 'exclude_devices': '', 'include_devices': ''}}): An error occurred accessing AlexaAPI: An exception of type AssertionError occurred. Arguments:\r\n()\r\n```\r\nSpecifically, the password is in plaintext. This shouldn't be in the logs - maybe indicate if it was entered or blank, but directly including it in the log can be dangerous.", "reactions": {"url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/783/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/783/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/774", "repository_url": "https://api.github.com/repos/custom-components/alexa_media_player", "labels_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/774/labels{/name}", "comments_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/774/comments", "events_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/774/events", "html_url": "https://github.com/custom-components/alexa_media_player/issues/774", "id": 636222091, "node_id": "MDU6SXNzdWU2MzYyMjIwOTE=", "number": 774, "title": "Cannot log in with amazon.es, amazon.fr and amazon.it", "user": {"login": "sinclairfr", "id": 118417, "node_id": "MDQ6VXNlcjExODQxNw==", "avatar_url": "https://avatars.githubusercontent.com/u/118417?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sinclairfr", "html_url": "https://github.com/sinclairfr", "followers_url": "https://api.github.com/users/sinclairfr/followers", "following_url": "https://api.github.com/users/sinclairfr/following{/other_user}", "gists_url": "https://api.github.com/users/sinclairfr/gists{/gist_id}", "starred_url": "https://api.github.com/users/sinclairfr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sinclairfr/subscriptions", "organizations_url": "https://api.github.com/users/sinclairfr/orgs", "repos_url": "https://api.github.com/users/sinclairfr/repos", "events_url": "https://api.github.com/users/sinclairfr/events{/privacy}", "received_events_url": "https://api.github.com/users/sinclairfr/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 983327104, "node_id": "MDU6TGFiZWw5ODMzMjcxMDQ=", "url": "https://api.github.com/repos/custom-components/alexa_media_player/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}, {"id": 1246346849, "node_id": "MDU6TGFiZWwxMjQ2MzQ2ODQ5", "url": "https://api.github.com/repos/custom-components/alexa_media_player/labels/alexapy", "name": "alexapy", "color": "e23ba8", "default": false, "description": "Issue relates to the API"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 79, "created_at": "2020-06-10T12:54:07Z", "updated_at": "2020-06-19T05:43:36Z", "closed_at": "2020-06-16T04:35:49Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi everyone,\r\n\r\n**Describe the bug**\r\n\r\nI lost both tts and announce features since Hassio & Alexa Media update.\r\nAlson realized I cannot log in with a amazon.fr domain, only amazon.com\r\n\r\n**To Reproduce**\r\nSteps to reproduce the behavior:\r\nUpdate to the latest HA and HACS Amazon Media component\r\n\r\n**Expected behavior**\r\nNo more TTS and Announce\r\n\r\n**Screenshots**\r\n![image](https://user-images.githubusercontent.com/118417/84269308-5669bb00-ab29-11ea-90c2-4771d1b7bcec.png)\r\n\r\n**System details**\r\n - Home-assistant (version): 0.110.7\r\n - Hassio : yes\r\n - alexa_media  v2.8.4\r\n\r\n**Logs**\r\n\r\n```\r\n2020-06-10 14:47:23 ERROR (MainThread) [alexapy.helpers] alexalogin.login((<alexapy.alexalogin.AlexaLogin object at 0x7f70cc361150>,),}): An error occured accessing AlexaAPI: An exception of type AssertionError occurred. Arguments:\r\n```\r\n.\r\n**_After trying TTS :_**\r\n\r\n2020-06-10 14:51:26 DEBUG (MainThread) [custom_components.alexa_media.notify] Announce targets: ['G************XTK'] entities: [<Entity Echo Dot - Study: unavailable>]\r\n\r\n\r\n2020-06-10 14:51:26 DEBUG (MainThread) [custom_components.alexa_media.notify] Testing item: <Entity Echo Dot - Study: unavailable> against (<Entity Echo Dot - Study: unavailable>, Echo Dot - Study, G************XTK, media_player.echo_dot_study)\r\n\r\n\r\n2020-06-10 14:51:26 DEBUG (MainThread) [custom_components.alexa_media.notify] Converting: <Entity Echo Dot - Study: unavailable> to (serialnumbers): G090U50990350XTK\r\n\r\n\r\n2020-06-10 14:51:26 DEBUG (MainThread) [custom_components.alexa_media.notify] Testing item: <Entity Echo Dot - Study: unavailable> against (<Entity Echo Dot  - Kitchen: unavailable>, Echo Dot  - Kitchen, G************6RR, media_player.echo_dot_kitchen)\r\n\r\n\r\n2020-06-10 14:51:26 DEBUG (MainThread) [custom_components.alexa_media.notify] Testing item: <Entity Echo Dot - Study: unavailable> against (<Entity Everywhere: unavailable>, Everywhere, d****************************483, media_player.everywhere)\r\n\r\n\r\n2020-06-10 14:51:26 DEBUG (MainThread) [custom_components.alexa_media.notify] Testing item: <Entity Echo Dot - Study: unavailable> against (<Entity Echo Dot - bedroom: unavailable>, Echo Dot - bedroom, G************W6R, media_player.echo_dot_bedroom)\r\n\r\n\r\n2020-06-10 14:51:26 DEBUG (MainThread) [custom_components.alexa_media.notify] Testing item: <Entity Echo Dot - Study: unavailable> against (<Entity Zoo: unavailable>, Zoo, 1****************************fc8, media_player.zoo)\r\n\r\n\r\n2020-06-10 14:51:26 DEBUG (MainThread) [custom_components.alexa_media.notify] Testing item: <Entity Echo Dot - Study: unavailable> against (<Entity This Device: standby>, This Device, 5****************************126, media_player.this_device)\r\n\r\n\r\n2020-06-10 14:51:26 DEBUG (MainThread) [custom_components.alexa_media.notify] Announce targets: ['G************XTK'] entities: [<Entity Echo Dot - Study: unavailable>]\r\n\r\n\r\n      \r\n**Additional context**\r\nEverything worked fine for a long time before the update.", "reactions": {"url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/774/reactions", "total_count": 3, "+1": 3, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/774/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/763", "repository_url": "https://api.github.com/repos/custom-components/alexa_media_player", "labels_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/763/labels{/name}", "comments_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/763/comments", "events_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/763/events", "html_url": "https://github.com/custom-components/alexa_media_player/issues/763", "id": 630586705, "node_id": "MDU6SXNzdWU2MzA1ODY3MDU=", "number": 763, "title": "Alexa TTS to devices on different Amazon accounts", "user": {"login": "SheriffOfNotts", "id": 16319499, "node_id": "MDQ6VXNlcjE2MzE5NDk5", "avatar_url": "https://avatars.githubusercontent.com/u/16319499?v=4", "gravatar_id": "", "url": "https://api.github.com/users/SheriffOfNotts", "html_url": "https://github.com/SheriffOfNotts", "followers_url": "https://api.github.com/users/SheriffOfNotts/followers", "following_url": "https://api.github.com/users/SheriffOfNotts/following{/other_user}", "gists_url": "https://api.github.com/users/SheriffOfNotts/gists{/gist_id}", "starred_url": "https://api.github.com/users/SheriffOfNotts/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/SheriffOfNotts/subscriptions", "organizations_url": "https://api.github.com/users/SheriffOfNotts/orgs", "repos_url": "https://api.github.com/users/SheriffOfNotts/repos", "events_url": "https://api.github.com/users/SheriffOfNotts/events{/privacy}", "received_events_url": "https://api.github.com/users/SheriffOfNotts/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 983327104, "node_id": "MDU6TGFiZWw5ODMzMjcxMDQ=", "url": "https://api.github.com/repos/custom-components/alexa_media_player/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}, {"id": 1246346849, "node_id": "MDU6TGFiZWwxMjQ2MzQ2ODQ5", "url": "https://api.github.com/repos/custom-components/alexa_media_player/labels/alexapy", "name": "alexapy", "color": "e23ba8", "default": false, "description": "Issue relates to the API"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 18, "created_at": "2020-06-04T07:39:12Z", "updated_at": "2020-06-16T13:25:47Z", "closed_at": "2020-06-16T04:35:49Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi there, first of all thanks for the integration!\r\n\r\nI've been trying to get TTS working to different echo devices on different accounts.\r\nIt all works fine if I send a message to devices just on one account, but if I send a message to devices registered to different accounts nothing happens - I get the notification that the script has run, but there is no output.\r\n\r\nI am assuming that this should work as there is the option to register multiple accounts in alexa_media_player?\r\n\r\nLet me know what additional info you require.\r\n\r\nThanks.", "reactions": {"url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/763/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/763/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/761", "repository_url": "https://api.github.com/repos/custom-components/alexa_media_player", "labels_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/761/labels{/name}", "comments_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/761/comments", "events_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/761/events", "html_url": "https://github.com/custom-components/alexa_media_player/issues/761", "id": 630387825, "node_id": "MDU6SXNzdWU2MzAzODc4MjU=", "number": 761, "title": "YAML macros do not work in HA service call", "user": {"login": "alesoft73", "id": 46445679, "node_id": "MDQ6VXNlcjQ2NDQ1Njc5", "avatar_url": "https://avatars.githubusercontent.com/u/46445679?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alesoft73", "html_url": "https://github.com/alesoft73", "followers_url": "https://api.github.com/users/alesoft73/followers", "following_url": "https://api.github.com/users/alesoft73/following{/other_user}", "gists_url": "https://api.github.com/users/alesoft73/gists{/gist_id}", "starred_url": "https://api.github.com/users/alesoft73/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alesoft73/subscriptions", "organizations_url": "https://api.github.com/users/alesoft73/orgs", "repos_url": "https://api.github.com/users/alesoft73/repos", "events_url": "https://api.github.com/users/alesoft73/events{/privacy}", "received_events_url": "https://api.github.com/users/alesoft73/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 983327104, "node_id": "MDU6TGFiZWw5ODMzMjcxMDQ=", "url": "https://api.github.com/repos/custom-components/alexa_media_player/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 18, "created_at": "2020-06-03T23:01:26Z", "updated_at": "2020-06-07T08:43:18Z", "closed_at": "2020-06-07T07:28:13Z", "author_association": "NONE", "active_lock_reason": null, "body": "In the documentation the target setup in notify is :  \r\n```yaml\r\n  - service: notify.alexa_media\r\n    data:\r\n      data:\r\n        type: tts\r\n      target: \r\n        - media_player.downstairs\r\n        - media_player.upstairs\r\n```\r\nor target \r\n\r\n      target: \r\n        - media_player.downstairs\r\n\r\nor target:\r\n  \r\n  target : \r\n    - '{{ states...... }}'\r\nbut don't work if i create a macro to pass a media:player\r\n  target: >-\r\n      {{ macro ecc ecc }}\r\n  with resoult  - media_player.downstairs\r\n\r\nIs possible to add a templete in target : ???\r\nMany thanks!", "reactions": {"url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/761/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/761/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/756", "repository_url": "https://api.github.com/repos/custom-components/alexa_media_player", "labels_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/756/labels{/name}", "comments_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/756/comments", "events_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/756/events", "html_url": "https://github.com/custom-components/alexa_media_player/issues/756", "id": 626792350, "node_id": "MDU6SXNzdWU2MjY3OTIzNTA=", "number": 756, "title": "JSONDecodeError on login error flooding the logs", "user": {"login": "eifinger", "id": 1481961, "node_id": "MDQ6VXNlcjE0ODE5NjE=", "avatar_url": "https://avatars.githubusercontent.com/u/1481961?v=4", "gravatar_id": "", "url": "https://api.github.com/users/eifinger", "html_url": "https://github.com/eifinger", "followers_url": "https://api.github.com/users/eifinger/followers", "following_url": "https://api.github.com/users/eifinger/following{/other_user}", "gists_url": "https://api.github.com/users/eifinger/gists{/gist_id}", "starred_url": "https://api.github.com/users/eifinger/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/eifinger/subscriptions", "organizations_url": "https://api.github.com/users/eifinger/orgs", "repos_url": "https://api.github.com/users/eifinger/repos", "events_url": "https://api.github.com/users/eifinger/events{/privacy}", "received_events_url": "https://api.github.com/users/eifinger/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 983327104, "node_id": "MDU6TGFiZWw5ODMzMjcxMDQ=", "url": "https://api.github.com/repos/custom-components/alexa_media_player/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2020-05-28T20:26:49Z", "updated_at": "2020-05-31T05:43:39Z", "closed_at": "2020-05-31T05:43:39Z", "author_association": "NONE", "active_lock_reason": null, "body": "**Describe the bug**\r\n\r\nMy homeassistant log gets flooded with messages in the form of\r\n```bash\r\n2020-05-28 01:09:15 ERROR (MainThread) [alexapy.helpers] alexaapi.get_notifications: A login error occured: An exception of type JSONDecodeError occurred. Arguments:\r\n('Expecting value: line 1 column 1 (char 0)',)\r\n```\r\nThe exact function differs but it is always in the form of `alexaapi.get_<...>`.\r\nDue to the extreme volume of messages I cannot determine what started them.\r\nA restart of homeassistant seems to work.\r\n\r\n**To Reproduce**\r\n\r\nSteps to reproduce the behavior:\r\nUnknown\r\n\r\n**Expected behavior**\r\n\r\nNo JSONDecodeErrors\r\n\r\n**Screenshots**\r\nIf applicable, add screenshots to help explain your problem.\r\n\r\n**System details**\r\n - Home-assistant (version): 0.110.3\r\n - Hassio (Yes/No): (Please note you may have to restart hassio 2-3 times to load the latest version of alexapy after an update. This looks like a HA bug). No\r\n - alexa_media  (version from `const.py` or HA startup): v2.8.2\r\n - alexapy (version from `pip show alexapy` or HA startup): v1.10.1\r\n\r\n**Logs**\r\nPlease provide [logs](https://github.com/custom-components/alexa_media_player/wiki/FAQ#how-do-i-enable-debug-logging-for-the-component). We'll be most likely asking for them anyway.\r\n\r\n```bash\r\n2020-05-28 01:09:15 ERROR (MainThread) [alexapy.helpers] alexaapi.get_notifications: A login error occured: An exception of type JSONDecodeError occurred. Arguments:\r\n('Expecting value: line 1 column 1 (char 0)',)\r\n```\r\n\r\n**Additional context**\r\nAdd any other context about the problem here. \r\n", "reactions": {"url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/756/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/756/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/750", "repository_url": "https://api.github.com/repos/custom-components/alexa_media_player", "labels_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/750/labels{/name}", "comments_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/750/comments", "events_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/750/events", "html_url": "https://github.com/custom-components/alexa_media_player/issues/750", "id": 624413058, "node_id": "MDU6SXNzdWU2MjQ0MTMwNTg=", "number": 750, "title": "Error while revalidating user with captcha", "user": {"login": "duhow", "id": 1145001, "node_id": "MDQ6VXNlcjExNDUwMDE=", "avatar_url": "https://avatars.githubusercontent.com/u/1145001?v=4", "gravatar_id": "", "url": "https://api.github.com/users/duhow", "html_url": "https://github.com/duhow", "followers_url": "https://api.github.com/users/duhow/followers", "following_url": "https://api.github.com/users/duhow/following{/other_user}", "gists_url": "https://api.github.com/users/duhow/gists{/gist_id}", "starred_url": "https://api.github.com/users/duhow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/duhow/subscriptions", "organizations_url": "https://api.github.com/users/duhow/orgs", "repos_url": "https://api.github.com/users/duhow/repos", "events_url": "https://api.github.com/users/duhow/events{/privacy}", "received_events_url": "https://api.github.com/users/duhow/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 983327104, "node_id": "MDU6TGFiZWw5ODMzMjcxMDQ=", "url": "https://api.github.com/repos/custom-components/alexa_media_player/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2020-05-25T17:26:26Z", "updated_at": "2020-05-25T20:24:45Z", "closed_at": "2020-05-25T20:24:45Z", "author_association": "NONE", "active_lock_reason": null, "body": "**Describe the bug**\r\nCan't confirm captcha due to code (UI) error.\r\n\r\n**To Reproduce**\r\nSteps to reproduce the behavior:\r\n1. Alexa Media component requests to renew captcha.\r\n2. After completion, an error appears in Home Assistant UI. Logs provided.\r\n\r\n**Expected behavior**\r\nExpected to complete captcha verification and reenable Alexa Media players.\r\n\r\n**System details**\r\n - Home-assistant (version): 0.110.2\r\n - Hassio (Yes/No): Yes\r\n - alexa_media  (version from `const.py` or HA startup): 2.8.1\r\n - alexapy (version from `pip show alexapy` or HA startup): 1.10.1\r\n\r\n**Logs**\r\n```\r\n2020-05-25 19:16:50 DEBUG (MainThread) [alexapy.alexalogin] Processing https://www.amazon.es/ap/cvf/verify\r\n2020-05-25 19:16:50 DEBUG (MainThread) [alexapy.alexalogin] Verification captcha code requested:\r\n2020-05-25 19:16:50 DEBUG (MainThread) [alexapy.alexalogin] Found form to process: \r\n2020-05-25 19:16:50 DEBUG (MainThread) [alexapy.alexalogin] Found post url to verify; converting to https://www.amazon.es/ap/cvf/verify\r\n2020-05-25 19:16:50 DEBUG (MainThread) [custom_components.alexa_media.configurator] Testing login status: {'captcha_required': True, 'captcha_image_url': 'https://opfcaptcha-prod.s3.amazonaws.com/xxxxxxxxxxxxxxxxxxx.jpg?AWSAccessKeyId=xxxxxxxxxxxxxxx&Expires=1590427309&Signature=xxxxxxxxxxxx%3D', 'verification_captcha_required': True}\r\n2020-05-25 19:16:50 DEBUG (MainThread) [custom_components.alexa_media.configurator] Creating configurator to request captcha\r\n\r\nLogger: homeassistant.components.websocket_api.http.connection.140211693798864\r\nSource: custom_components/alexa_media/configurator.py:143\r\nIntegration: Home Assistant WebSocket API (documentation, issues)\r\nFirst occurred: 19:16:50 (1 occurrences)\r\nLast logged: 19:16:50\r\n\r\nlocal variable 'config_id' referenced before assignment\r\nTraceback (most recent call last):\r\n  File \"/usr/src/homeassistant/homeassistant/components/websocket_api/commands.py\", line 130, in handle_call_service\r\n    connection.context(msg),\r\n  File \"/usr/src/homeassistant/homeassistant/core.py\", line 1253, in async_call\r\n    task.result()\r\n  File \"/usr/src/homeassistant/homeassistant/core.py\", line 1288, in _execute_service\r\n    await handler.func(service_call)\r\n  File \"/usr/src/homeassistant/homeassistant/components/configurator/__init__.py\", line 235, in async_handle_service_call\r\n    await self.hass.async_add_job(callback, call.data.get(ATTR_FIELDS, {}))\r\n  File \"/config/custom_components/alexa_media/configurator.py\", line 28, in configuration_callback\r\n    setup_platform_callback, hass, config_entry, login, callback_data\r\n  File \"/config/custom_components/alexa_media/configurator.py\", line 177, in setup_platform_callback\r\n    await test_login_status(hass, config_entry, login, alexa_setup_callback)\r\n  File \"/config/custom_components/alexa_media/configurator.py\", line 206, in test_login_status\r\n    await hass.async_add_job(request_configuration, hass, config_entry, login)\r\n  File \"/config/custom_components/alexa_media/configurator.py\", line 143, in request_configuration\r\n    if config_id:\r\nUnboundLocalError: local variable 'config_id' referenced before assignment\r\n```\r\n\r\n**Additional context**\r\nAdd any other context about the problem here. \r\n", "reactions": {"url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/750/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/750/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/714", "repository_url": "https://api.github.com/repos/custom-components/alexa_media_player", "labels_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/714/labels{/name}", "comments_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/714/comments", "events_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/714/events", "html_url": "https://github.com/custom-components/alexa_media_player/issues/714", "id": 616896281, "node_id": "MDU6SXNzdWU2MTY4OTYyODE=", "number": 714, "title": "AttributeError: 'NoneType' object has no attribute 'get'", "user": {"login": "drthanwho", "id": 22405505, "node_id": "MDQ6VXNlcjIyNDA1NTA1", "avatar_url": "https://avatars.githubusercontent.com/u/22405505?v=4", "gravatar_id": "", "url": "https://api.github.com/users/drthanwho", "html_url": "https://github.com/drthanwho", "followers_url": "https://api.github.com/users/drthanwho/followers", "following_url": "https://api.github.com/users/drthanwho/following{/other_user}", "gists_url": "https://api.github.com/users/drthanwho/gists{/gist_id}", "starred_url": "https://api.github.com/users/drthanwho/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/drthanwho/subscriptions", "organizations_url": "https://api.github.com/users/drthanwho/orgs", "repos_url": "https://api.github.com/users/drthanwho/repos", "events_url": "https://api.github.com/users/drthanwho/events{/privacy}", "received_events_url": "https://api.github.com/users/drthanwho/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 983327104, "node_id": "MDU6TGFiZWw5ODMzMjcxMDQ=", "url": "https://api.github.com/repos/custom-components/alexa_media_player/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 7, "created_at": "2020-05-12T19:17:09Z", "updated_at": "2020-05-19T05:08:49Z", "closed_at": "2020-05-19T05:08:49Z", "author_association": "NONE", "active_lock_reason": null, "body": "**Describe the bug**\r\n\r\nAll of a sudden after my last restart I've been getting the below error in the log. \r\nFirst error leads to --> AttributeError: 'NoneType' object has no attribute 'get'\r\nNext errors that show up --> ValueError: Config entry has already been setup!\r\n\r\nIn the meantime all Echos on home assistant are unavailable \r\n\r\nI also tried restarting again but keep getting same errors. On the other hand, I have restarted several other times, in the past I don't know how long since I set it up, and this hasn't happened.\r\n\r\n**To Reproduce**\r\nUnknown. Happened after HA restart.\r\n\r\n**Expected behavior**\r\nNo errors and Echo media players to be available in HA\r\n\r\n**System details**\r\n - Home-assistant (version): 0.109.2\r\n - Hassio (Yes/No): Yes\r\n - alexa_media: 2.7.3\r\n - alexapy: 1.8.4\r\n\r\n**Logs**\r\n```yaml\r\n020-05-12 21:46:23 DEBUG (MainThread) [custom_components.alexa_media] Nothing to import from configuration.yaml, loading from Integrations\r\n2020-05-12 21:46:23 INFO (MainThread) [custom_components.alexa_media] \r\n-------------------------------------------------------------------\r\nalexa_media\r\nVersion: 2.7.3\r\nThis is a custom component\r\nIf you have any issues with this you need to open an issue here:\r\nhttps://github.com/custom-components/alexa_media_player/issues\r\n-------------------------------------------------------------------\r\n\r\n2020-05-12 21:46:23 INFO (MainThread) [custom_components.alexa_media] Loaded alexapy==1.8.4\r\n2020-05-12 21:46:23 DEBUG (MainThread) [alexapy.alexalogin] Trying to load pickled cookie from file /config/.storage/alexa_media.t*********5@gmail.com.pickle\r\n2020-05-12 21:46:26 DEBUG (MainThread) [alexapy.alexalogin] Trying to load aiohttpCookieJar to session\r\n2020-05-12 21:46:26 DEBUG (MainThread) [alexapy.alexalogin] Loaded 9 cookies\r\n2020-05-12 21:46:27 WARNING (MainThread) [homeassistant.setup] Setup of input_select is taking over 10 seconds.\r\n2020-05-12 21:46:27 WARNING (MainThread) [homeassistant.setup] Setup of updater is taking over 10 seconds.\r\n2020-05-12 21:46:28 DEBUG (MainThread) [alexapy.alexalogin] GET: \r\nhttps://alexa.amazon.co.uk/api/bootstrap returned 200:OK with response <CIMultiDictProxy('Content-Type': 'application/json', 'Content-Length': '156', 'Connection': 'keep-alive', 'Server': 'Server', 'Date': 'Tue, 12 May 2020 18:46:28 GMT', 'x-amzn-RequestId': 'db4fcd9a-ce74-493c-b9d5-d17fa227eb3b', 'Content-Encoding': 'gzip', 'x-amz-rid': 'AB78B4B7ZCE19YK2W4H2', 'Vary': 'Accept-Encoding,X-Amzn-CDN-Cache,X-Amzn-AX-Treatment,User-Agent', 'X-Cache': 'Miss from cloudfront', 'Via': '1.1 98f1fdf093c866d186183399254afdf0.cloudfront.net (CloudFront)', 'X-Amz-Cf-Pop': 'ATH50-C1', 'X-Amz-Cf-Id': 'Ae14d8YAyjptn8qWpJXngZVtxiAnw0z4cbSXHkCdB-NeRsW9fK6LdQ==')>\r\n2020-05-12 21:46:28 DEBUG (MainThread) [alexapy.alexalogin] Logged in as t*********5@gmail.com\r\n2020-05-12 21:46:28 DEBUG (MainThread) [alexapy.alexalogin] Using cookies to log in\r\n2020-05-12 21:46:28 DEBUG (MainThread) [alexapy.alexalogin] Log in successful with cookies\r\n2020-05-12 21:46:28 DEBUG (MainThread) [custom_components.alexa_media.configurator] Testing login status: {'login_successful': True}\r\n2020-05-12 21:46:28 DEBUG (MainThread) [custom_components.alexa_media.configurator] Setting up Alexa devices for t*********5@g*******m\r\n2020-05-12 21:46:28 DEBUG (MainThread) [custom_components.alexa_media] t*********5@g*******m: Websocket created: <alexapy.alexawebsocket.WebsocketEchoClient object at 0x6ed59410>\r\n2020-05-12 21:46:28 DEBUG (MainThread) [alexapy.alexawebsocket] Connecting to wss://dp-gw-na.amazon.co.uk/?x-amz-device-type=ALEGCNGL9K0HM&x-amz-device-serial=**** with {'User-Agent': 'Mozilla/5.0 (Windows NT 6.3; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36', 'Accept': 'text/html,application/xhtml+xml, application/xml;q=0.9,*/*;q=0.8', 'Accept-Language': '*', 'Referer': 'https://alexa.amazon.co.uk/api/bootstrap', 'Cookie': 'session-id=***; session-id-time=***; ubid-acbuk=***; session-token=***; x-acbuk=***; at-acbuk=***; sess-at-acbuk=***; sst-acbuk=***; csrf=***; ', 'Origin': 'https://alexa.amazon.co.uk'}\r\n2020-05-12 21:46:31 DEBUG (MainThread) [alexapy.alexawebsocket] Initating Async Handshake.\r\n2020-05-12 21:46:31 DEBUG (MainThread) [alexapy.alexawebsocket] Starting message parsing loop.\r\n2020-05-12 21:46:31 DEBUG (MainThread) [alexapy.alexawebsocket] Encoding WebSocket Handshake MSG.\r\n2020-05-12 21:46:31 DEBUG (MainThread) [alexapy.alexawebsocket] Received WebSocket: 0xbafef3f3 0x000000cd {\"protocolName\":\"A:H\",\"parameters\":{\"AlphaProtocolHandler.supportedEncodings\":\"GZIP\",\"AlphaProtocolHandler.maxFragmentSize\":\"16000\",\"AlphaProtocolHandler.receiveWindowSize\":\"16\"}}TUNE\r\n2020-05-12 21:46:31 DEBUG (MainThread) [alexapy.alexawebsocket] Encoding Gateway Handshake MSG.\r\n2020-05-12 21:46:31 DEBUG (MainThread) [alexapy.alexawebsocket] Encoding Gateway Register MSG.\r\n2020-05-12 21:46:31 DEBUG (MainThread) [alexapy.alexawebsocket] Received WebSocket: MSG 0x00000361 0x3ff2313f f 0x00000001 0xc784e881 0x000000b9 ACK 0x00000003 1.0 0x00000024 01e09e62-f504-476c-85c8-9c97c8da26ed 0x00000064 0x0000016978ff598c 0x000001720a35b563 END FABE\r\n2020-05-12 21:46:31 DEBUG (MainThread) [alexapy.alexawebsocket] Received ACK MSG for Registration.\r\n2020-05-12 21:46:31 DEBUG (MainThread) [alexapy.alexawebsocket] Encoding PING.\r\n2020-05-12 21:46:32 DEBUG (MainThread) [custom_components.alexa_media] t*********5@g*******m: Websocket succesfully connected\r\n2020-05-12 21:46:32 DEBUG (MainThread) [custom_components.alexa_media] Creating coordinator\r\n2020-05-12 21:46:32 DEBUG (MainThread) [custom_components.alexa_media] Refreshing coordinator\r\n2020-05-12 21:46:32 DEBUG (MainThread) [alexapy.alexaapi] static GET: https://alexa.amazon.co.uk/api/devices-v2/device returned 200:OK:application/json\r\n2020-05-12 21:46:32 DEBUG (MainThread) [alexapy.alexaapi] static GET: https://alexa.amazon.co.uk/api/notifications returned 200:OK:application/json\r\n2020-05-12 21:46:32 DEBUG (MainThread) [alexapy.alexaapi] static GET: https://alexa.amazon.co.uk/api/bootstrap returned 200:OK:application/json\r\n2020-05-12 21:46:33 DEBUG (MainThread) [alexapy.alexaapi] static GET: https://alexa.amazon.co.uk/api/dnd/device-status-list returned 200:OK:application/json\r\n2020-05-12 21:46:33 DEBUG (MainThread) [alexapy.alexaapi] static GET: https://alexa.amazon.co.uk/api/bluetooth?cached=false returned 200:OK:application/json\r\n2020-05-12 21:46:33 DEBUG (MainThread) [alexapy.alexaapi] static GET: https://alexa.amazon.co.uk/api/device-preferences returned 200:OK:application/json\r\n2020-05-12 21:46:33 DEBUG (MainThread) [custom_components.alexa_media] t*********5@g*******m: Found 7 devices, 7 bluetooth\r\n2020-05-12 21:46:33 DEBUG (MainThread) [custom_components.alexa_media] t*********5@g*******m: Updated 6 notifications for 2 devices at 2020-05-12 21:46:33.768585+03:00\r\n2020-05-12 21:46:34 DEBUG (MainThread) [alexapy.alexaapi] static GET: https://alexa.amazon.co.uk/api/activities?startTime=&size=10&offset=1 returned 200:OK:application/json\r\n2020-05-12 21:46:34 DEBUG (MainThread) [custom_components.alexa_media] t*********5@g*******m: Updated last_called: {'serialNumber': 'G************UK5', 'timestamp': 1589308035728}\r\n2020-05-12 21:46:34 DEBUG (MainThread) [custom_components.alexa_media] t*********5@g*******m: last_called changed:  to {'serialNumber': 'G************UK5', 'timestamp': 1589308035728}\r\n2020-05-12 21:46:34 DEBUG (MainThread) [custom_components.alexa_media] Thanasis' Dot: Locale en-gb timezone Europe/Vienna\r\n2020-05-12 21:46:34 DEBUG (MainThread) [custom_components.alexa_media] Thanasis' Dot: DND False\r\n2020-05-12 21:46:34 DEBUG (MainThread) [custom_components.alexa_media] Bedroom: DND False\r\n2020-05-12 21:46:34 DEBUG (MainThread) [custom_components.alexa_media] Home Echo: Locale en-gb timezone Europe/Athens\r\n2020-05-12 21:46:34 DEBUG (MainThread) [custom_components.alexa_media] Home Echo: DND False\r\n2020-05-12 21:46:34 DEBUG (MainThread) [custom_components.alexa_media] This Device: Locale en-gb timezone Europe/Vienna\r\n2020-05-12 21:46:34 DEBUG (MainThread) [custom_components.alexa_media] This Device: DND False\r\n2020-05-12 21:46:34 DEBUG (MainThread) [custom_components.alexa_media] Thanasis's Alexa Apps: Locale en-us timezone None\r\n2020-05-12 21:46:34 DEBUG (MainThread) [custom_components.alexa_media] Thanasis's Alexa Apps: DND False\r\n2020-05-12 21:46:34 DEBUG (MainThread) [custom_components.alexa_media] t*********5@g*******m: Existing: [] New: [\"Thanasis' Dot\", 'Bedroom', 'Home Echo', 'This Device', \"Thanasis's Alexa Apps\"]; Filtered out by not being in include: [] or in exclude: [\"Thanasis' Flex\"]\r\n2020-05-12 21:46:34 DEBUG (MainThread) [custom_components.alexa_media] Loading media_player\r\n2020-05-12 21:46:34 DEBUG (MainThread) [custom_components.alexa_media] Finished fetching alexa_media data in 2.097 seconds\r\n2020-05-12 21:46:34 DEBUG (MainThread) [custom_components.alexa_media.helpers] alexa_media.notify.async_get_service: Trying with limit 5 delay 2 catch_exceptions True\r\n2020-05-12 21:46:34 DEBUG (MainThread) [custom_components.alexa_media.notify] t*********5@g*******m: Media player G************UK5 not loaded yet; delaying load\r\n2020-05-12 21:46:34 DEBUG (MainThread) [custom_components.alexa_media.helpers] alexa_media.notify.async_get_service: Try: 1/5 after waiting 0 seconds result: False\r\n2020-05-12 21:46:34 DEBUG (MainThread) [custom_components.alexa_media.media_player] t*********5@g*******m: Refreshing Thanasis' Dot\r\n2020-05-12 21:46:34 DEBUG (MainThread) [custom_components.alexa_media.media_player] Thanasis' Dot: Last_called check: self: G************UK5 reported: \r\n2020-05-12 21:46:35 DEBUG (MainThread) [alexapy.alexaapi] GET: https://alexa.amazon.co.uk/api/np/player?deviceSerialNumber=***=2560 returned 200:OK:application/json\r\n2020-05-12 21:46:35 ERROR (MainThread) [homeassistant.components.media_player] Error while setting up alexa_media platform for media_player\r\nTraceback (most recent call last):\r\n  File \"/usr/src/homeassistant/homeassistant/helpers/entity_platform.py\", line 178, in _async_setup_platform\r\n    await asyncio.wait_for(asyncio.shield(task), SLOW_SETUP_MAX_WAIT)\r\n  File \"/usr/local/lib/python3.7/asyncio/tasks.py\", line 442, in wait_for\r\n    return fut.result()\r\n  File \"/config/custom_components/alexa_media/media_player.py\", line 109, in async_setup_entry\r\n    hass, config_entry.data, async_add_devices, discovery_info=None\r\n  File \"/config/custom_components/alexa_media/media_player.py\", line 89, in async_setup_platform\r\n    await alexa_client.init(device)\r\n  File \"/config/custom_components/alexa_media/media_player.py\", line 211, in init\r\n    await self.refresh(device)\r\n  File \"/config/custom_components/alexa_media/helpers.py\", line 148, in wrapper\r\n    result = await func(*args, **kwargs)\r\n  File \"/config/custom_components/alexa_media/media_player.py\", line 563, in refresh\r\n    self._media_image_url = self._session.get(\"mainArt\", {}).get(\"url\")\r\nAttributeError: 'NoneType' object has no attribute 'get'\r\n2020-05-12 21:46:38 DEBUG (MainThread) [custom_components.alexa_media.notify] t*********5@g*******m: Media player G************UK5 not loaded yet; delaying load\r\n2020-05-12 21:46:38 DEBUG (MainThread) [custom_components.alexa_media.helpers] alexa_media.notify.async_get_service: Try: 2/5 after waiting 4 seconds result: False\r\n2020-05-12 21:46:46 DEBUG (MainThread) [custom_components.alexa_media.notify] t*********5@g*******m: Media player G************UK5 not loaded yet; delaying load\r\n2020-05-12 21:46:46 DEBUG (MainThread) [custom_components.alexa_media.helpers] alexa_media.notify.async_get_service: Try: 3/5 after waiting 8 seconds result: False\r\n2020-05-12 21:47:02 DEBUG (MainThread) [custom_components.alexa_media.notify] t*********5@g*******m: Media player G************UK5 not loaded yet; delaying load\r\n2020-05-12 21:47:02 DEBUG (MainThread) [custom_components.alexa_media.helpers] alexa_media.notify.async_get_service: Try: 4/5 after waiting 16 seconds result: False\r\n2020-05-12 21:47:34 DEBUG (MainThread) [custom_components.alexa_media.notify] t*********5@g*******m: Media player G************UK5 not loaded yet; delaying load\r\n2020-05-12 21:47:34 DEBUG (MainThread) [custom_components.alexa_media.helpers] alexa_media.notify.async_get_service: Try: 5/5 after waiting 32 seconds result: False\r\n2020-05-12 21:47:34 ERROR (MainThread) [homeassistant.core] Error doing job: Task exception was never retrieved\r\nTraceback (most recent call last):\r\n  File \"/usr/src/homeassistant/homeassistant/components/notify/__init__.py\", line 95, in async_setup_platform\r\n    notify_service.hass = hass\r\nAttributeError: 'bool' object has no attribute 'hass'\r\n2020-05-12 21:47:44 ERROR (MainThread) [homeassistant.components.automation] Home Assistant Startup: Error executing script. Service not found for call_service at pos 2: Unable to find service notify/alexa_media_thanasis_dot\r\n2020-05-12 21:58:30 DEBUG (MainThread) [alexapy.alexawebsocket] Received WebSocket: MSG 0x00000362 0x3ff5dbcd f 0x00000001 0x0ddef2c0 0x00000225 GWM MSG 0x0000b479 0x0000005c urn:tcomm-endpoint:service:serviceName:DeeWebsiteMessagingService:domain:prod:realm:USAmazon 0x00000081 urn:tcomm-endpoint:device:customerId:**** {\"payload\":\"{\\\"destinationUserId\\\":\\\"***\\\",\\\"dopplerId\\\":{\\\"deviceType\\\":\\\"***\\\",\\\"deviceSerialNumber\\\":\\\"****\\\"},\\\"volumeSetting\\\":47,\\\"isMuted\\\":false}\",\"command\":\"PUSH_VOLUME_CHANGE\"}FABE\r\n2020-05-12 21:58:30 DEBUG (MainThread) [alexapy.alexawebsocket] Received Standard MSG.\r\n2020-05-12 21:58:30 DEBUG (MainThread) [custom_components.alexa_media] t*********5@g*******m: Received websocket command: PUSH_VOLUME_CHANGE : {'destinationUserId': 'A**********4T6', 'dopplerId': {'deviceType': '***', 'deviceSerialNumber': 'G************UK5'}, 'volumeSetting': 47, 'isMuted': False}\r\n2020-05-12 21:58:30 DEBUG (MainThread) [custom_components.alexa_media] Adding PUSH_VOLUME_CHANGE to seen_commands: {'PUSH_VOLUME_CHANGE': 1589309910.9605808}\r\n2020-05-12 21:58:30 DEBUG (MainThread) [custom_components.alexa_media] Discovered new media_player ***\r\n2020-05-12 21:58:31 DEBUG (MainThread) [alexapy.alexaapi] static GET: https://alexa.amazon.co.uk/api/notifications returned 200:OK:application/json\r\n2020-05-12 21:58:31 DEBUG (MainThread) [alexapy.alexaapi] static GET: https://alexa.amazon.co.uk/api/bootstrap returned 200:OK:application/json\r\n2020-05-12 21:58:31 DEBUG (MainThread) [alexapy.alexaapi] static GET: https://alexa.amazon.co.uk/api/devices-v2/device returned 200:OK:application/json\r\n2020-05-12 21:58:32 DEBUG (MainThread) [alexapy.alexaapi] static GET: https://alexa.amazon.co.uk/api/dnd/device-status-list returned 200:OK:application/json\r\n2020-05-12 21:58:32 DEBUG (MainThread) [alexapy.alexaapi] static GET: https://alexa.amazon.co.uk/api/device-preferences returned 200:OK:application/json\r\n2020-05-12 21:58:32 DEBUG (MainThread) [alexapy.alexaapi] static GET: https://alexa.amazon.co.uk/api/bluetooth?cached=false returned 200:OK:application/json\r\n2020-05-12 21:58:32 DEBUG (MainThread) [custom_components.alexa_media] t*********5@g*******m: Found 7 devices, 7 bluetooth\r\n2020-05-12 21:58:32 DEBUG (MainThread) [custom_components.alexa_media] t*********5@g*******m: Updated 6 notifications for 2 devices at 2020-05-12 21:58:32.529738+03:00\r\n2020-05-12 21:58:32 DEBUG (MainThread) [alexapy.alexaapi] static GET: https://alexa.amazon.co.uk/api/activities?startTime=&size=10&offset=1 returned 200:OK:application/json\r\n2020-05-12 21:58:32 DEBUG (MainThread) [custom_components.alexa_media] t*********5@g*******m: Updated last_called: {'serialNumber': 'G************UK5', 'timestamp': 1589308035728}\r\n2020-05-12 21:58:32 DEBUG (MainThread) [custom_components.alexa_media] Thanasis' Dot: Locale en-gb timezone Europe/Vienna\r\n2020-05-12 21:58:32 DEBUG (MainThread) [custom_components.alexa_media] Thanasis' Dot: DND False\r\n2020-05-12 21:58:32 DEBUG (MainThread) [custom_components.alexa_media] Bedroom: DND False\r\n2020-05-12 21:58:32 DEBUG (MainThread) [custom_components.alexa_media] Home Echo: Locale en-gb timezone Europe/Athens\r\n2020-05-12 21:58:32 DEBUG (MainThread) [custom_components.alexa_media] Home Echo: DND False\r\n2020-05-12 21:58:32 DEBUG (MainThread) [custom_components.alexa_media] This Device: Locale en-gb timezone Europe/Vienna\r\n2020-05-12 21:58:32 DEBUG (MainThread) [custom_components.alexa_media] This Device: DND False\r\n2020-05-12 21:58:32 DEBUG (MainThread) [custom_components.alexa_media] Thanasis's Alexa Apps: Locale en-us timezone None\r\n2020-05-12 21:58:32 DEBUG (MainThread) [custom_components.alexa_media] Thanasis's Alexa Apps: DND False\r\n2020-05-12 21:58:32 DEBUG (MainThread) [custom_components.alexa_media] t*********5@g*******m: Existing: [] New: [\"Thanasis' Dot\", 'Bedroom', 'Home Echo', 'This Device', \"Thanasis's Alexa Apps\"]; Filtered out by not being in include: [] or in exclude: [\"Thanasis' Flex\"]\r\n2020-05-12 21:58:32 DEBUG (MainThread) [custom_components.alexa_media] Loading media_player\r\n2020-05-12 21:58:32 DEBUG (MainThread) [custom_components.alexa_media] Finished fetching alexa_media data in 1.918 seconds\r\n2020-05-12 21:58:32 ERROR (MainThread) [homeassistant.config_entries] Error setting up entry t*********5@gmail.com - amazon.co.uk for media_player\r\nTraceback (most recent call last):\r\n  File \"/usr/src/homeassistant/homeassistant/config_entries.py\", line 216, in async_setup\r\n    hass, self\r\n  File \"/usr/src/homeassistant/homeassistant/components/media_player/__init__.py\", line 332, in async_setup_entry\r\n    return await hass.data[DOMAIN].async_setup_entry(entry)\r\n  File \"/usr/src/homeassistant/homeassistant/helpers/entity_component.py\", line 163, in async_setup_entry\r\n    raise ValueError(\"Config entry has already been setup!\")\r\nValueError: Config entry has already been setup!\r\n2020-05-12 21:58:32 DEBUG (MainThread) [alexapy.alexawebsocket] Received WebSocket: MSG 0x00000362 0x3ff5dbe0 f 0x00000001 0x4ff9228d 0x0000022e GWM MSG 0x0000b479 0x0000005c urn:tcomm-endpoint:service:serviceName:DeeWebsiteMessagingService:domain:prod:realm:USAmazon 0x00000081 urn:tcomm-endpoint:device:customerId:***:deviceType:*** {\"payload\":\"{\\\"destinationUserId\\\":\\\"***\\\",\\\"dopplerId\\\":{\\\"deviceType\\\":\\\"***\\\",\\\"deviceSerialNumber\\\":\\\"***\\\"},\\\"bass\\\":0,\\\"midrange\\\":1,\\\"treble\\\":6}\",\"command\":\"PUSH_EQUALIZER_STATE_CHANGE\"}FABE\r\n2020-05-12 21:58:32 DEBUG (MainThread) [alexapy.alexawebsocket] Received Standard MSG.\r\n2020-05-12 21:58:32 DEBUG (MainThread) [custom_components.alexa_media] t*********5@g*******m: Received websocket command: PUSH_EQUALIZER_STATE_CHANGE : {'destinationUserId': 'A**********4T6', 'dopplerId': {'deviceType': '***', 'deviceSerialNumber': 'G************UK5'}, 'bass': 0, 'midrange': 1, 'treble': 6}\r\n2020-05-12 21:58:32 DEBUG (MainThread) [custom_components.alexa_media] Adding PUSH_EQUALIZER_STATE_CHANGE to seen_commands: {'PUSH_VOLUME_CHANGE': 1589309910.9605808, 'PUSH_EQUALIZER_STATE_CHANGE': 1589309912.9135938}\r\n2020-05-12 21:58:32 DEBUG (MainThread) [custom_components.alexa_media] Discovered new media_player ***\r\n2020-05-12 21:58:32 DEBUG (MainThread) [alexapy.alexawebsocket] Received WebSocket: MSG 0x00000362 0x3ff5dbf4 f 0x00000001 0x3fd80fc1 0x0000022e GWM MSG 0x0000b479 0x0000005c urn:tcomm-endpoint:service:serviceName:DeeWebsiteMessagingService:domain:prod:realm:USAmazon 0x00000081 urn:tcomm-endpoint:device:customerId:***:deviceType:*** {\"payload\":\"{\\\"destinationUserId\\\":\\\"***\\\",\\\"dopplerId\\\":{\\\"deviceType\\\":\\\"A3VRME03NAXFUB\\\",\\\"deviceSerialNumber\\\":\\\"***\\\"},\\\"bass\\\":0,\\\"midrange\\\":0,\\\"treble\\\":0}\",\"command\":\"PUSH_EQUALIZER_STATE_CHANGE\"}FABE\r\n2020-05-12 21:58:32 DEBUG (MainThread) [alexapy.alexawebsocket] Received Standard MSG.\r\n2020-05-12 21:58:32 DEBUG (MainThread) [custom_components.alexa_media] t*********5@g*******m: Received websocket command: PUSH_EQUALIZER_STATE_CHANGE : {'destinationUserId': 'A**********4T6', 'dopplerId': {'deviceType': 'A3VRME03NAXFUB', 'deviceSerialNumber': 'G************SUG'}, 'bass': 0, 'midrange': 0, 'treble': 0}\r\n2020-05-12 21:58:32 DEBUG (MainThread) [alexapy.alexawebsocket] Received WebSocket: MSG 0x00000362 0x3ff5dbf5 f 0x00000001 0xc6bee5f7 0x00000225 GWM MSG 0x0000b479 0x0000005c urn:tcomm-endpoint:service:serviceName:DeeWebsiteMessagingService:domain:prod:realm:USAmazon 0x00000081 urn:tcomm-endpoint:device:customerId:***:deviceType:*** {\"payload\":\"{\\\"destinationUserId\\\":\\\"***\\\",\\\"dopplerId\\\":{\\\"deviceType\\\":\\\"A3VRME03NAXFUB\\\",\\\"deviceSerialNumber\\\":\\\"***\\\"},\\\"volumeSetting\\\":63,\\\"isMuted\\\":false}\",\"command\":\"PUSH_VOLUME_CHANGE\"}FABE\r\n2020-05-12 21:58:32 DEBUG (MainThread) [alexapy.alexawebsocket] Received Standard MSG.\r\n2020-05-12 21:58:32 DEBUG (MainThread) [custom_components.alexa_media] t*********5@g*******m: Received websocket command: PUSH_VOLUME_CHANGE : {'destinationUserId': 'A**********4T6', 'dopplerId': {'deviceType': 'A3VRME03NAXFUB', 'deviceSerialNumber': 'G************SUG'}, 'volumeSetting': 63, 'isMuted': False}\r\n2020-05-12 21:58:43 DEBUG (MainThread) [alexapy.alexaapi] static GET: https://alexa.amazon.co.uk/api/bootstrap returned 200:OK:application/json\r\n2020-05-12 21:58:50 DEBUG (MainThread) [alexapy.alexaapi] static GET: https://alexa.amazon.co.uk/api/notifications returned 200:OK:application/json\r\n2020-05-12 21:58:50 DEBUG (MainThread) [alexapy.alexaapi] static GET: https://alexa.amazon.co.uk/api/devices-v2/device returned 200:OK:application/json\r\n2020-05-12 21:58:50 DEBUG (MainThread) [alexapy.alexaapi] static GET: https://alexa.amazon.co.uk/api/dnd/device-status-list returned 200:OK:application/json\r\n2020-05-12 21:58:50 DEBUG (MainThread) [alexapy.alexaapi] static GET: https://alexa.amazon.co.uk/api/bluetooth?cached=false returned 200:OK:application/json\r\n2020-05-12 21:58:50 DEBUG (MainThread) [alexapy.alexaapi] static GET: https://alexa.amazon.co.uk/api/device-preferences returned 200:OK:application/json\r\n2020-05-12 21:58:50 DEBUG (MainThread) [custom_components.alexa_media] t*********5@g*******m: Found 7 devices, 7 bluetooth\r\n2020-05-12 21:58:50 DEBUG (MainThread) [custom_components.alexa_media] t*********5@g*******m: Updated 6 notifications for 2 devices at 2020-05-12 21:58:50.815032+03:00\r\n2020-05-12 21:58:51 DEBUG (MainThread) [alexapy.alexaapi] static GET: https://alexa.amazon.co.uk/api/activities?startTime=&size=10&offset=1 returned 200:OK:application/json\r\n2020-05-12 21:58:51 DEBUG (MainThread) [custom_components.alexa_media] t*********5@g*******m: Updated last_called: {'serialNumber': 'G************UK5', 'timestamp': 1589308035728}\r\n2020-05-12 21:58:51 DEBUG (MainThread) [custom_components.alexa_media] Thanasis' Dot: Locale en-gb timezone Europe/Vienna\r\n2020-05-12 21:58:51 DEBUG (MainThread) [custom_components.alexa_media] Thanasis' Dot: DND False\r\n2020-05-12 21:58:51 DEBUG (MainThread) [custom_components.alexa_media] Bedroom: DND False\r\n2020-05-12 21:58:51 DEBUG (MainThread) [custom_components.alexa_media] Home Echo: Locale en-gb timezone Europe/Athens\r\n2020-05-12 21:58:51 DEBUG (MainThread) [custom_components.alexa_media] Home Echo: DND False\r\n2020-05-12 21:58:51 DEBUG (MainThread) [custom_components.alexa_media] This Device: Locale en-gb timezone Europe/Vienna\r\n2020-05-12 21:58:51 DEBUG (MainThread) [custom_components.alexa_media] This Device: DND False\r\n2020-05-12 21:58:51 DEBUG (MainThread) [custom_components.alexa_media] Thanasis's Alexa Apps: Locale en-us timezone None\r\n2020-05-12 21:58:51 DEBUG (MainThread) [custom_components.alexa_media] Thanasis's Alexa Apps: DND False\r\n2020-05-12 21:58:51 DEBUG (MainThread) [custom_components.alexa_media] t*********5@g*******m: Existing: [] New: [\"Thanasis' Dot\", 'Bedroom', 'Home Echo', 'This Device', \"Thanasis's Alexa Apps\"]; Filtered out by not being in include: [] or in exclude: [\"Thanasis' Flex\"]\r\n2020-05-12 21:58:51 DEBUG (MainThread) [custom_components.alexa_media] Loading media_player\r\n2020-05-12 21:58:51 DEBUG (MainThread) [custom_components.alexa_media] Finished fetching alexa_media data in 8.202 seconds\r\n2020-05-12 21:58:51 ERROR (MainThread) [homeassistant.config_entries] Error setting up entry t*********5@gmail.com - amazon.co.uk for media_player\r\nTraceback (most recent call last):\r\n  File \"/usr/src/homeassistant/homeassistant/config_entries.py\", line 216, in async_setup\r\n    hass, self\r\n  File \"/usr/src/homeassistant/homeassistant/components/media_player/__init__.py\", line 332, in async_setup_entry\r\n    return await hass.data[DOMAIN].async_setup_entry(entry)\r\n  File \"/usr/src/homeassistant/homeassistant/helpers/entity_component.py\", line 163, in async_setup_entry\r\n    raise ValueError(\"Config entry has already been setup!\")\r\nValueError: Config entry has already been setup!\r\n```\r\n", "reactions": {"url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/714/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/714/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/711", "repository_url": "https://api.github.com/repos/custom-components/alexa_media_player", "labels_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/711/labels{/name}", "comments_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/711/comments", "events_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/711/events", "html_url": "https://github.com/custom-components/alexa_media_player/issues/711", "id": 616515981, "node_id": "MDU6SXNzdWU2MTY1MTU5ODE=", "number": 711, "title": "RunTime error loop on HA restart", "user": {"login": "Scialla", "id": 49528981, "node_id": "MDQ6VXNlcjQ5NTI4OTgx", "avatar_url": "https://avatars.githubusercontent.com/u/49528981?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Scialla", "html_url": "https://github.com/Scialla", "followers_url": "https://api.github.com/users/Scialla/followers", "following_url": "https://api.github.com/users/Scialla/following{/other_user}", "gists_url": "https://api.github.com/users/Scialla/gists{/gist_id}", "starred_url": "https://api.github.com/users/Scialla/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Scialla/subscriptions", "organizations_url": "https://api.github.com/users/Scialla/orgs", "repos_url": "https://api.github.com/users/Scialla/repos", "events_url": "https://api.github.com/users/Scialla/events{/privacy}", "received_events_url": "https://api.github.com/users/Scialla/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 983327104, "node_id": "MDU6TGFiZWw5ODMzMjcxMDQ=", "url": "https://api.github.com/repos/custom-components/alexa_media_player/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 17, "created_at": "2020-05-12T09:45:32Z", "updated_at": "2020-05-13T16:06:53Z", "closed_at": "2020-05-13T12:54:39Z", "author_association": "NONE", "active_lock_reason": null, "body": "**Describe the bug**\r\nA clear and concise description of what the bug is.\r\nafter update at 2.7.2 log error is changed but, like with 2.7.1, a lot of error appear when HA restart o stop, same error in loop\r\n**To Reproduce**\r\nSteps to reproduce the behavior:\r\n1. Go to '...' Restart HA\r\n2. Click on '....'\r\n3. Scroll down to '....'\r\n4. See error\r\n\r\n**Expected behavior**\r\nA clear and concise description of what you expected to happen.\r\nNo error in log\r\n\r\n**Screenshots**\r\nIf applicable, add screenshots to help explain your problem.\r\nno screenshot\r\n\r\n**System details**\r\n - Home-assistant (version): HA core 109.6\r\n - Hassio (Yes/No): (Please note you may have to restart hassio 2-3 times to load the latest version of alexapy after an update. This looks like a HA bug). Restarted many times, same error\r\n - alexa_media  (version from `const.py` or HA startup): 2.7.2\r\n - alexapy (version from `pip show alexapy` or HA startup): 1.8.4\r\n\r\n**Logs**\r\nPlease provide [logs](https://github.com/custom-components/alexa_media_player/wiki/FAQ#how-do-i-enable-debug-logging-for-the-component). We'll be most likely asking for them anyway.\r\n```\r\nMay 12 11:38:30 raspberrypi hass[22806]: 2020-05-12 11:38:30 INFO (SyncWorker_0) [pyhap.accessory_driver] Stopping accessory Home Assistant Bridge on address 192.168.1.122, port 51827.\r\nMay 12 11:38:31 raspberrypi hass[22806]: 2020-05-12 11:38:31 ERROR (MainThread) [alexapy.helpers] alexaapi._static_request:An error occured accessing AlexaAPI: An exception of type RuntimeError occurred. Arguments:\r\nMay 12 11:38:31 raspberrypi hass[22806]: ('Session is closed',)\r\nMay 12 11:38:31 raspberrypi hass[22806]: 2020-05-12 11:38:31 ERROR (MainThread) [alexapy.helpers] alexaapi._static_request:An error occured accessing AlexaAPI: An exception of type RuntimeError occurred. Arguments:\r\nMay 12 11:38:31 raspberrypi hass[22806]: ('Session is closed',)\r\nMay 12 11:38:31 raspberrypi hass[22806]: 2020-05-12 11:38:31 ERROR (MainThread) [alexapy.helpers] alexaapi._static_request:An error occured accessing AlexaAPI: An exception of type RuntimeError occurred. Arguments:\r\nMay 12 11:38:31 raspberrypi hass[22806]: ('Session is closed',)\r\nMay 12 11:38:31 raspberrypi hass[22806]: 2020-05-12 11:38:31 ERROR (MainThread) [alexapy.helpers] alexaapi._static_request:An error occured accessing AlexaAPI: An exception of type RuntimeError occurred. Arguments:\r\nMay 12 11:38:31 raspberrypi hass[22806]: ('Session is closed',)\r\nMay 12 11:38:31 raspberrypi hass[22806]: 2020-05-12 11:38:31 ERROR (MainThread) [alexapy.helpers] alexaapi._static_request:An error occured accessing AlexaAPI: An exception of type RuntimeError occurred. Arguments:\r\nMay 12 11:38:31 raspberrypi hass[22806]: ('Session is closed',)\r\nMay 12 11:38:31 raspberrypi hass[22806]: 2020-05-12 11:38:31 ERROR (MainThread) [alexapy.helpers] alexaapi._static_request:An error occured accessing AlexaAPI: An exception of type RuntimeError occurred. Arguments:\r\nMay 12 11:38:31 raspberrypi hass[22806]: ('Session is closed',)\r\nMay 12 11:38:31 raspberrypi hass[22806]: 2020-05-12 11:38:31 ERROR (MainThread) [alexapy.helpers] alexaapi._static_request:An error occured accessing AlexaAPI: An exception of type RuntimeError occurred. Arguments:\r\nMay 12 11:38:31 raspberrypi hass[22806]: ('Session is closed',)\r\nMay 12 11:38:31 raspberrypi hass[22806]: 2020-05-12 11:38:31 ERROR (MainThread) [alexapy.helpers] alexaapi._static_request:An error occured accessing AlexaAPI: An exception of type RuntimeError occurred. Arguments:\r\nMay 12 11:38:31 raspberrypi hass[22806]: ('Session is closed',)\r\nMay 12 11:38:31 raspberrypi hass[22806]: 2020-05-12 11:38:31 ERROR (MainThread) [alexapy.helpers] alexaapi._static_request:An error occured accessing AlexaAPI: An exception of type RuntimeError occurred. Arguments:\r\nMay 12 11:38:31 raspberrypi hass[22806]: ('Session is closed',)\r\nMay 12 11:38:31 raspberrypi hass[22806]: 2020-05-12 11:38:31 ERROR (MainThread) [alexapy.helpers] alexaapi._static_request:An error occured accessing AlexaAPI: An exception of type RuntimeError occurred. Arguments:\r\nMay 12 11:38:31 raspberrypi hass[22806]: ('Session is closed',)\r\nMay 12 11:38:31 raspberrypi hass[22806]: 2020-05-12 11:38:31 ERROR (MainThread) [alexapy.helpers] alexaapi._static_request:An error occured accessing AlexaAPI: An exception of type RuntimeError occurred. Arguments:\r\nMay 12 11:38:31 raspberrypi hass[22806]: ('Session is closed',)\r\nMay 12 11:38:31 raspberrypi hass[22806]: 2020-05-12 11:38:31 ERROR (MainThread) [alexapy.helpers] alexaapi._static_request:An error occured accessing AlexaAPI: An exception of type RuntimeError occurred. Arguments:\r\nMay 12 11:38:31 raspberrypi hass[22806]: ('Session is closed',)\r\nMay 12 11:38:31 raspberrypi hass[22806]: 2020-05-12 11:38:31 ERROR (MainThread) [alexapy.helpers] alexaapi._static_request:An error occured accessing AlexaAPI: An exception of type RuntimeError occurred. Arguments:\r\nMay 12 11:38:31 raspberrypi hass[22806]: ('Session is closed',)\r\nMay 12 11:38:31 raspberrypi hass[22806]: 2020-05-12 11:38:31 ERROR (MainThread) [alexapy.helpers] alexaapi._static_request:An error occured accessing AlexaAPI: An exception of type RuntimeError occurred. Arguments:\r\nMay 12 11:38:31 raspberrypi hass[22806]: ('Session is closed',)\r\nMay 12 11:38:31 raspberrypi hass[22806]: 2020-05-12 11:38:31 ERROR (MainThread) [alexapy.helpers] alexaapi._static_request:An error occured accessing AlexaAPI: An exception of type RuntimeError occurred. Arguments:\r\nMay 12 11:38:31 raspberrypi hass[22806]: ('Session is closed',)\r\nMay 12 11:38:31 raspberrypi hass[22806]: 2020-05-12 11:38:31 ERROR (MainThread) [alexapy.helpers] alexaapi._static_request:An error occured accessing AlexaAPI: An exception of type RuntimeError occurred. Arguments:\r\nMay 12 11:38:31 raspberrypi hass[22806]: ('Session is closed',)\r\nMay 12 11:38:31 raspberrypi hass[22806]: 2020-05-12 11:38:31 ERROR (MainThread) [alexapy.helpers] alexaapi._static_request:An error occured accessing AlexaAPI: An exception of type RuntimeError occurred. Arguments:\r\nMay 12 11:38:31 raspberrypi hass[22806]: ('Session is closed',)\r\nMay 12 11:38:31 raspberrypi hass[22806]: 2020-05-12 11:38:31 ERROR (MainThread) [alexapy.helpers] alexaapi._static_request:An error occured accessing AlexaAPI: An exception of type RuntimeError occurred. Arguments:\r\nMay 12 11:38:31 raspberrypi hass[22806]: ('Session is closed',)\r\nMay 12 11:38:31 raspberrypi hass[22806]: 2020-05-12 11:38:31 ERROR (MainThread) [alexapy.helpers] alexaapi._static_request:An error occured accessing AlexaAPI: An exception of type RuntimeError occurred. Arguments:\r\nMay 12 11:38:31 raspberrypi hass[22806]: ('Session is closed',)\r\nMay 12 11:38:31 raspberrypi hass[22806]: 2020-05-12 11:38:31 ERROR (MainThread) [alexapy.helpers] alexaapi._static_request:An error occured accessing AlexaAPI: An exception of type RuntimeError occurred. Arguments:\r\nMay 12 11:38:31 raspberrypi hass[22806]: ('Session is closed',)\r\nMay 12 11:38:31 raspberrypi hass[22806]: 2020-05-12 11:38:31 ERROR (MainThread) [alexapy.helpers] alexaapi._static_request:An error occured accessing AlexaAPI: An exception of type RuntimeError occurred. Arguments:\r\nMay 12 11:38:31 raspberrypi hass[22806]: ('Session is closed',)\r\n```\r\n**Additional context**\r\nAdd any other context about the problem here. \r\ndeleted pickle file and re-login, log error persist", "reactions": {"url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/711/reactions", "total_count": 1, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/711/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/705", "repository_url": "https://api.github.com/repos/custom-components/alexa_media_player", "labels_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/705/labels{/name}", "comments_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/705/comments", "events_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/705/events", "html_url": "https://github.com/custom-components/alexa_media_player/issues/705", "id": 615832418, "node_id": "MDU6SXNzdWU2MTU4MzI0MTg=", "number": 705, "title": "alexaapi._static_request:An error occured accessing AlexaAPI: An exception of type RuntimeError occurred.", "user": {"login": "Scialla", "id": 49528981, "node_id": "MDQ6VXNlcjQ5NTI4OTgx", "avatar_url": "https://avatars.githubusercontent.com/u/49528981?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Scialla", "html_url": "https://github.com/Scialla", "followers_url": "https://api.github.com/users/Scialla/followers", "following_url": "https://api.github.com/users/Scialla/following{/other_user}", "gists_url": "https://api.github.com/users/Scialla/gists{/gist_id}", "starred_url": "https://api.github.com/users/Scialla/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Scialla/subscriptions", "organizations_url": "https://api.github.com/users/Scialla/orgs", "repos_url": "https://api.github.com/users/Scialla/repos", "events_url": "https://api.github.com/users/Scialla/events{/privacy}", "received_events_url": "https://api.github.com/users/Scialla/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 983327104, "node_id": "MDU6TGFiZWw5ODMzMjcxMDQ=", "url": "https://api.github.com/repos/custom-components/alexa_media_player/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 13, "created_at": "2020-05-11T12:05:08Z", "updated_at": "2020-05-12T07:04:32Z", "closed_at": "2020-05-12T05:53:35Z", "author_association": "NONE", "active_lock_reason": null, "body": "**Describe the bug**\r\nA clear and concise description of what the bug is.\r\nWhen restart or stop home assistant a lot of error appears in log\r\n\r\n**To Reproduce**\r\nSteps to reproduce the behavior:\r\n1. Start HA\r\n2. Restart or stop HA\r\n**Expected behavior**\r\nA clear and concise description of what you expected to happen.\r\nNo errors in log\r\n\r\n**Screenshots**\r\nIf applicable, add screenshots to help explain your problem.\r\nNo screenshot\r\n\r\n**System details**\r\n - Home-assistant (version): HomeAssistant Core (venv) 109.6\r\n - Hassio (Yes/No): (Please note you may have to restart hassio 2-3 times to load the latest version of alexapy after an update. This looks like a HA bug). restarted 10 times, rebooted 2 times\r\n - alexa_media  (version from `const.py` or HA startup): latest (2.7.1)\r\n - alexapy (version from `pip show alexapy` or HA startup):\r\n\r\n**Logs**\r\nPlease provide [logs](https://github.com/custom-components/alexa_media_player/wiki/FAQ#how-do-i-enable-debug-logging-for-the-component). We'll be most likely asking for them anyway.\r\nThis is a little part recursive for many many times\r\n\r\n```\r\nMay 11 13:40:02 raspberrypi hass[2753]: 2020-05-11 13:40:02 ERROR (MainThread) [alexapy.helpers] alexaapi.get_device_preferences:An error occured accessing AlexaAPI: An exception of type AttributeError occurred. Arguments:\r\nMay 11 13:40:02 raspberrypi hass[2753]: (\"'NoneType' object has no attribute 'json'\",)\r\nMay 11 13:40:02 raspberrypi hass[2753]: 2020-05-11 13:40:02 ERROR (MainThread) [alexapy.helpers] alexaapi._static_request:An error occured accessing AlexaAPI: An exception of type RuntimeError occurred. Arguments:\r\nMay 11 13:40:02 raspberrypi hass[2753]: ('Session is closed',)\r\nMay 11 13:40:02 raspberrypi hass[2753]: 2020-05-11 13:40:02 ERROR (MainThread) [alexapy.helpers] alexaapi.get_dnd_state:An error occured accessing AlexaAPI: An exception of type AttributeError occurred. Arguments:\r\nMay 11 13:40:02 raspberrypi hass[2753]: (\"'NoneType' object has no attribute 'json'\",)\r\nMay 11 13:40:02 raspberrypi hass[2753]: 2020-05-11 13:40:02 ERROR (MainThread) [alexapy.helpers] alexaapi._static_request:An error occured accessing AlexaAPI: An exception of type RuntimeError occurred. Arguments:\r\nMay 11 13:40:02 raspberrypi hass[2753]: ('Session is closed',)\r\nMay 11 13:40:02 raspberrypi hass[2753]: 2020-05-11 13:40:02 ERROR (MainThread) [alexapy.helpers] alexaapi.get_notifications:An error occured accessing AlexaAPI: An exception of type AttributeError occurred. Arguments:\r\nMay 11 13:40:02 raspberrypi hass[2753]: (\"'NoneType' object has no attribute 'json'\",)\r\nMay 11 13:40:02 raspberrypi hass[2753]: 2020-05-11 13:40:02 ERROR (MainThread) [alexapy.helpers] alexalogin.login:An error occured accessing AlexaAPI: An exception of type RuntimeError occurred. Arguments:\r\nMay 11 13:40:02 raspberrypi hass[2753]: ('Session is closed',)\r\nMay 11 13:40:02 raspberrypi hass[2753]: 2020-05-11 13:40:02 ERROR (MainThread) [alexapy.helpers] alexaapi._static_request:An error occured accessing AlexaAPI: An exception of type RuntimeError occurred. Arguments:\r\nMay 11 13:40:02 raspberrypi hass[2753]: ('Session is closed',)\r\nMay 11 13:40:02 raspberrypi hass[2753]: 2020-05-11 13:40:02 ERROR (MainThread) [alexapy.helpers] alexaapi.get_devices:An error occured accessing AlexaAPI: An exception of type AttributeError occurred. Arguments:\r\nMay 11 13:40:02 raspberrypi hass[2753]: (\"'NoneType' object has no attribute 'json'\",)\r\nMay 11 13:40:02 raspberrypi hass[2753]: 2020-05-11 13:40:02 ERROR (MainThread) [alexapy.helpers] alexaapi._static_request:An error occured accessing AlexaAPI: An exception of type RuntimeError occurred. Arguments:\r\nMay 11 13:40:02 raspberrypi hass[2753]: ('Session is closed',)\r\nMay 11 13:40:02 raspberrypi hass[2753]: 2020-05-11 13:40:02 ERROR (MainThread) [alexapy.helpers] alexaapi.get_bluetooth:An error occured accessing AlexaAPI: An exception of type AttributeError occurred. Arguments:\r\nMay 11 13:40:02 raspberrypi hass[2753]: (\"'NoneType' object has no attribute 'json'\",)\r\nMay 11 13:40:02 raspberrypi hass[2753]: 2020-05-11 13:40:02 ERROR (MainThread) [alexapy.helpers] alexaapi._static_request:An error occured accessing AlexaAPI: An exception of type RuntimeError occurred. Arguments:\r\nMay 11 13:40:02 raspberrypi hass[2753]: ('Session is closed',)\r\n```\r\n\r\n**Additional context**\r\nAdd any other context about the problem here. \r\n\r\nDowngrade to 2.7.0 version of alexa_media resolve, no errors in log", "reactions": {"url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/705/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/705/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/699", "repository_url": "https://api.github.com/repos/custom-components/alexa_media_player", "labels_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/699/labels{/name}", "comments_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/699/comments", "events_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/699/events", "html_url": "https://github.com/custom-components/alexa_media_player/issues/699", "id": 615434759, "node_id": "MDU6SXNzdWU2MTU0MzQ3NTk=", "number": 699, "title": "Full support for 0.110.x: components deprecated", "user": {"login": "chemelli74", "id": 57354320, "node_id": "MDQ6VXNlcjU3MzU0MzIw", "avatar_url": "https://avatars.githubusercontent.com/u/57354320?v=4", "gravatar_id": "", "url": "https://api.github.com/users/chemelli74", "html_url": "https://github.com/chemelli74", "followers_url": "https://api.github.com/users/chemelli74/followers", "following_url": "https://api.github.com/users/chemelli74/following{/other_user}", "gists_url": "https://api.github.com/users/chemelli74/gists{/gist_id}", "starred_url": "https://api.github.com/users/chemelli74/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/chemelli74/subscriptions", "organizations_url": "https://api.github.com/users/chemelli74/orgs", "repos_url": "https://api.github.com/users/chemelli74/repos", "events_url": "https://api.github.com/users/chemelli74/events{/privacy}", "received_events_url": "https://api.github.com/users/chemelli74/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 983327104, "node_id": "MDU6TGFiZWw5ODMzMjcxMDQ=", "url": "https://api.github.com/repos/custom-components/alexa_media_player/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 10, "created_at": "2020-05-10T17:10:36Z", "updated_at": "2020-05-23T04:39:18Z", "closed_at": "2020-05-23T04:39:18Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "**Describe the bug**\r\n0.110.x change some components, plugin needs an update.\r\n\r\n**To Reproduce**\r\nSteps to reproduce the behavior:\r\n1. Install 0.110.x dev build\r\n2. Install Alexa_media_player plugin\r\n3. Check home-assistant.log\r\n\r\n\r\n**Expected behavior**\r\nUpdate plugin to offer full compatibility since the beginning of 0.110.x\r\n\r\n**Screenshots**\r\nIf applicable, add screenshots to help explain your problem.\r\n\r\n**System details**\r\n - Home-assistant (version): 0.110.x\r\n - Hassio (Yes/No): No\r\n - alexa_media  (version from `const.py` or HA startup): v2.7.0\r\n - alexapy (version from `pip show alexapy` or HA startup):\r\n\r\n**Logs**\r\nPlease provide [logs](https://github.com/custom-components/alexa_media_player/wiki/FAQ#how-do-i-enable-debug-logging-for-the-component). We'll be most likely asking for them anyway.\r\n\r\n```\r\n2020-05-10 18:56:45 WARNING (MainThread) [homeassistant.components.media_player] MediaPlayerDevice is deprecated, modify AlexaClient to extend MediaPlayerEntity\r\n2020-05-10 18:56:46 WARNING (MainThread) [homeassistant.components.switch] SwitchDevice is deprecated, modify AlexaMediaSwitch to extend SwitchEntity\r\n2020-05-10 18:56:46 WARNING (MainThread) [homeassistant.components.alarm_control_panel] AlarmControlPanel is deprecated, modify AlexaAlarmControlPanel to extend AlarmControlPanelEntity\r\n```\r\n\r\n**Additional context**\r\nAdd any other context about the problem here. \r\n", "reactions": {"url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/699/reactions", "total_count": 9, "+1": 9, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/699/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/665", "repository_url": "https://api.github.com/repos/custom-components/alexa_media_player", "labels_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/665/labels{/name}", "comments_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/665/comments", "events_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/665/events", "html_url": "https://github.com/custom-components/alexa_media_player/issues/665", "id": 607951504, "node_id": "MDU6SXNzdWU2MDc5NTE1MDQ=", "number": 665, "title": "Integration gets duplicated when config entry is renamed (HA 0.109)", "user": {"login": "SeanPM5", "id": 9065557, "node_id": "MDQ6VXNlcjkwNjU1NTc=", "avatar_url": "https://avatars.githubusercontent.com/u/9065557?v=4", "gravatar_id": "", "url": "https://api.github.com/users/SeanPM5", "html_url": "https://github.com/SeanPM5", "followers_url": "https://api.github.com/users/SeanPM5/followers", "following_url": "https://api.github.com/users/SeanPM5/following{/other_user}", "gists_url": "https://api.github.com/users/SeanPM5/gists{/gist_id}", "starred_url": "https://api.github.com/users/SeanPM5/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/SeanPM5/subscriptions", "organizations_url": "https://api.github.com/users/SeanPM5/orgs", "repos_url": "https://api.github.com/users/SeanPM5/repos", "events_url": "https://api.github.com/users/SeanPM5/events{/privacy}", "received_events_url": "https://api.github.com/users/SeanPM5/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 983327104, "node_id": "MDU6TGFiZWw5ODMzMjcxMDQ=", "url": "https://api.github.com/repos/custom-components/alexa_media_player/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2020-04-28T01:11:17Z", "updated_at": "2020-05-02T07:25:20Z", "closed_at": "2020-05-02T07:25:20Z", "author_association": "NONE", "active_lock_reason": null, "body": "**Describe the bug**\r\nIn the upcoming Home Assistant 0.109 release, there is a feature that allows users to rename config entry. This is a handy feature that many will use, to clean up some of the long and ugly default names.\r\n\r\nAfter doing this with Alexa Media Player however, I noticed that it always gets re-added again as a duplicate but with no devices or entities. Pic shared below in screenshot section.\r\n\r\nWhen I asked about this in HA's Discord #beta channel, Frenck quickly identified the issue as being here: https://github.com/custom-components/alexa_media_player/blob/dev/custom_components/alexa_media/__init__.py#L126 and said the following:\r\n\r\n\"The component matches configs done via YAML based on the entry title. if it cannot find it, it will just create a new config entry. The title contains the email and URL. instead of matching on title, he could have matched against the actual config entry data.\"\r\n\r\n**To Reproduce**\r\nSteps to reproduce the behavior:\r\n1. Go to \"Integrations\" page (in Home Assistant 0.109)\r\n2. Click on \"Rename\" under the Alexa Media Player tile\r\n3. Either change the name, or delete all of the text so it's blank (which is what I did)\r\n4. Now restart, once you restart, you'll get the duplicate as seen in above pic\r\n\r\n**Expected behavior**\r\nAllow renaming as normal, without creating duplicate. It can be frustrating if a user renames it and it just always gets added back as a duplicate entry.\r\n\r\n**Screenshots**\r\n![image](https://i.imgur.com/6uYaO3b.png)\r\n\r\n**System details**\r\n - Home-assistant (version): 0.109.0b4\r\n - Hassio (Yes/No): (Please note you may have to restart hassio 2-3 times to load the latest version of alexapy after an update. This looks like a HA bug). Yes\r\n - alexa_media  (version from `const.py` or HA startup): v2.5.15 thru HACS\r\n - alexapy (version from `pip show alexapy` or HA startup):\r\n\r\n**Logs**\r\nPlease provide [logs](https://github.com/custom-components/alexa_media_player/wiki/FAQ#how-do-i-enable-debug-logging-for-the-component). We'll be most likely asking for them anyway.\r\n\r\n**Additional context**\r\nMy YAML config if needed\r\n\r\n```\r\nalexa_media:\r\n  accounts:\r\n    - email: !secret amazon_username\r\n      password: !secret amazon_password\r\n      url: amazon.com\r\n      # Optional\r\n      exclude_devices:\r\n        - \"My Dash\"\r\n        - \"Sean's Ford/Lincoln+Alexa App\"\r\n        - \"Sean's Alexa Apps\"\r\n        - \"Sean's 4th Echo Dot\"\r\n        - \"Sean's Fire TV\"\r\n        - \"Everywhere\"\r\n```\r\n", "reactions": {"url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/665/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/665/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/663", "repository_url": "https://api.github.com/repos/custom-components/alexa_media_player", "labels_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/663/labels{/name}", "comments_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/663/comments", "events_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/663/events", "html_url": "https://github.com/custom-components/alexa_media_player/issues/663", "id": 607489746, "node_id": "MDU6SXNzdWU2MDc0ODk3NDY=", "number": 663, "title": "RuntimeError: Session is closed", "user": {"login": "chemelli74", "id": 57354320, "node_id": "MDQ6VXNlcjU3MzU0MzIw", "avatar_url": "https://avatars.githubusercontent.com/u/57354320?v=4", "gravatar_id": "", "url": "https://api.github.com/users/chemelli74", "html_url": "https://github.com/chemelli74", "followers_url": "https://api.github.com/users/chemelli74/followers", "following_url": "https://api.github.com/users/chemelli74/following{/other_user}", "gists_url": "https://api.github.com/users/chemelli74/gists{/gist_id}", "starred_url": "https://api.github.com/users/chemelli74/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/chemelli74/subscriptions", "organizations_url": "https://api.github.com/users/chemelli74/orgs", "repos_url": "https://api.github.com/users/chemelli74/repos", "events_url": "https://api.github.com/users/chemelli74/events{/privacy}", "received_events_url": "https://api.github.com/users/chemelli74/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 983327104, "node_id": "MDU6TGFiZWw5ODMzMjcxMDQ=", "url": "https://api.github.com/repos/custom-components/alexa_media_player/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}, {"id": 983327107, "node_id": "MDU6TGFiZWw5ODMzMjcxMDc=", "url": "https://api.github.com/repos/custom-components/alexa_media_player/labels/help%20wanted", "name": "help wanted", "color": "008672", "default": true, "description": "Extra attention is needed"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2020-04-27T12:00:19Z", "updated_at": "2020-05-12T23:38:29Z", "closed_at": "2020-05-12T21:23:33Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "**Describe the bug**\r\nLog exception at every HA restart\r\n\r\n**To Reproduce**\r\nSteps to reproduce the behavior:\r\n1. tail -f homeassitant.log\r\n2. Restart HA\r\n3. Check log\r\n\r\n**Expected behavior**\r\nHandle \"Session closed\" error during restart/shutdown\r\n\r\n**System details**\r\n - Home-assistant (version): 0.109.b3\r\n - Hassio (Yes/No):  No\r\n - alexa_media  (version from `const.py` or HA startup): 2.5.15\r\n - alexapy (version from `pip show alexapy` or HA startup):\r\n\r\n**Logs**\r\n\r\n```\r\n2020-04-27 13:53:41 ERROR (MainThread) [custom_components.alexa_media] Unexpected error fetching alexa_media data: Session is closed\r\nTraceback (most recent call last):\r\n  File \"/config/custom_components/alexa_media/__init__.py\", line 277, in async_update_data\r\n    ) = await asyncio.gather(*tasks)\r\n  File \"/usr/local/lib/python3.7/site-packages/alexapy/alexaapi.py\", line 680, in get_devices\r\n    \"get\", login, \"/api/devices-v2/device\", query=None\r\n  File \"/usr/local/lib/python3.7/site-packages/alexapy/alexaapi.py\", line 167, in _static_request\r\n    ssl=login._ssl,\r\n  File \"/usr/local/lib/python3.7/site-packages/aiohttp/client.py\", line 357, in _request\r\n    raise RuntimeError('Session is closed')\r\nRuntimeError: Session is closed\r\n\r\nDuring handling of the above exception, another exception occurred:\r\n\r\nTraceback (most recent call last):\r\n  File \"/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py\", line 136, in async_refresh\r\n    self.data = await self._async_update_data()\r\n  File \"/usr/src/homeassistant/homeassistant/helpers/update_coordinator.py\", line 124, in _async_update_data\r\n    return await self.update_method()\r\n  File \"/config/custom_components/alexa_media/__init__.py\", line 294, in async_update_data\r\n    await login_obj.login_with_cookie()\r\n  File \"/usr/local/lib/python3.7/site-packages/alexapy/alexalogin.py\", line 168, in login_with_cookie\r\n    await self.login(cookies=self._cookies)\r\n  File \"/usr/local/lib/python3.7/site-packages/alexapy/alexalogin.py\", line 333, in login\r\n    if cookies and await self.test_loggedin(cookies):\r\n  File \"/usr/local/lib/python3.7/site-packages/alexapy/alexalogin.py\", line 238, in test_loggedin\r\n    self._prefix + self._url + \"/api/bootstrap\", cookies=cookies, ssl=self._ssl\r\n  File \"/usr/local/lib/python3.7/site-packages/aiohttp/client.py\", line 357, in _request\r\n    raise RuntimeError('Session is closed')\r\nRuntimeError: Session is closed\r\n\r\n```\r\n\r\n\r\n**Additional context**\r\nAdd any other context about the problem here. \r\n", "reactions": {"url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/663/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/663/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/641", "repository_url": "https://api.github.com/repos/custom-components/alexa_media_player", "labels_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/641/labels{/name}", "comments_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/641/comments", "events_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/641/events", "html_url": "https://github.com/custom-components/alexa_media_player/issues/641", "id": 598103972, "node_id": "MDU6SXNzdWU1OTgxMDM5NzI=", "number": 641, "title": "KeyError: 'originalTime'", "user": {"login": "rrosson", "id": 2329, "node_id": "MDQ6VXNlcjIzMjk=", "avatar_url": "https://avatars.githubusercontent.com/u/2329?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rrosson", "html_url": "https://github.com/rrosson", "followers_url": "https://api.github.com/users/rrosson/followers", "following_url": "https://api.github.com/users/rrosson/following{/other_user}", "gists_url": "https://api.github.com/users/rrosson/gists{/gist_id}", "starred_url": "https://api.github.com/users/rrosson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rrosson/subscriptions", "organizations_url": "https://api.github.com/users/rrosson/orgs", "repos_url": "https://api.github.com/users/rrosson/repos", "events_url": "https://api.github.com/users/rrosson/events{/privacy}", "received_events_url": "https://api.github.com/users/rrosson/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 983327104, "node_id": "MDU6TGFiZWw5ODMzMjcxMDQ=", "url": "https://api.github.com/repos/custom-components/alexa_media_player/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2020-04-10T21:31:45Z", "updated_at": "2020-04-11T17:05:39Z", "closed_at": "2020-04-11T16:09:11Z", "author_association": "NONE", "active_lock_reason": null, "body": "**Describe the bug**\r\nNo Alexa devices appear when doing integration\r\n\r\n**To Reproduce**\r\nSteps to reproduce the behavior:\r\nLost all Alexa devices. Cleared configuration, Alexa_media_player, etc along with pickle and restarted. Re-add no devices populated.\r\n\r\n```\r\n2020-04-10 15:25:43 ERROR (MainThread) [homeassistant.components.alexa.state_report] Timeout sending report to Alexa.\r\n2020-04-10 15:24:15 ERROR (MainThread) [homeassistant.core] Error doing job: Task exception was never retrieved\r\nTraceback (most recent call last):\r\n  File \"/usr/local/lib/python3.7/site-packages/alexapy/alexawebsocket.py\", line 152, in process_messages\r\n    await self.on_message(cast(bytes, msg.data))\r\n  File \"/usr/local/lib/python3.7/site-packages/alexapy/alexawebsocket.py\", line 234, in on_message\r\n    await self.msg_callback(message_obj)\r\n  File \"/config/custom_components/alexa_media/__init__.py\", line 926, in ws_handler\r\n    login_obj, no_throttle=True\r\n  File \"/config/custom_components/alexa_media/__init__.py\", line 469, in update_devices\r\n    await process_notifications(login_obj, raw_notifications)\r\n  File \"/config/custom_components/alexa_media/__init__.py\", line 613, in process_notifications\r\n    n_time = notification[\"originalTime\"]\r\nKeyError: 'originalTime'\r\n2020-04-10 15:24:36 ERROR (MainThread) [homeassistant.core] Error doing job: Unclosed client session\r\n```\r\n\r\n**Expected behavior**\r\nWorking integration of alexa_media player\r\n**Screenshots**\r\nIf applicable, add screenshots to help explain your problem.\r\n\r\n**System details**\r\n - Home-assistant (version): 108.2 \r\n - Hassio (Yes/No): (Please note you may have to restart hassio 2-3 times to load the latest version of alexapy after an update. This looks like a HA bug).\r\n - alexa_media  (version from `const.py` or HA startup): 2.5.12\r\n - alexapy (version from `pip show alexapy` or HA startup):\r\n\r\n**Logs**\r\nPlease provide [logs](https://github.com/custom-components/alexa_media_player/wiki/FAQ#how-do-i-enable-debug-logging-for-the-component). We'll be most likely asking for them anyway.\r\n\r\n**Additional context**\r\nAdd any other context about the problem here. \r\n", "reactions": {"url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/641/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/641/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/633", "repository_url": "https://api.github.com/repos/custom-components/alexa_media_player", "labels_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/633/labels{/name}", "comments_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/633/comments", "events_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/633/events", "html_url": "https://github.com/custom-components/alexa_media_player/issues/633", "id": 596074916, "node_id": "MDU6SXNzdWU1OTYwNzQ5MTY=", "number": 633, "title": "Restarting Home Assistant with Alexa timer configured causes hang (due to \"KeyError occurred. Arguments: ('originalDate',)\")", "user": {"login": "gadgetchnnel", "id": 2099542, "node_id": "MDQ6VXNlcjIwOTk1NDI=", "avatar_url": "https://avatars.githubusercontent.com/u/2099542?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gadgetchnnel", "html_url": "https://github.com/gadgetchnnel", "followers_url": "https://api.github.com/users/gadgetchnnel/followers", "following_url": "https://api.github.com/users/gadgetchnnel/following{/other_user}", "gists_url": "https://api.github.com/users/gadgetchnnel/gists{/gist_id}", "starred_url": "https://api.github.com/users/gadgetchnnel/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gadgetchnnel/subscriptions", "organizations_url": "https://api.github.com/users/gadgetchnnel/orgs", "repos_url": "https://api.github.com/users/gadgetchnnel/repos", "events_url": "https://api.github.com/users/gadgetchnnel/events{/privacy}", "received_events_url": "https://api.github.com/users/gadgetchnnel/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 983327104, "node_id": "MDU6TGFiZWw5ODMzMjcxMDQ=", "url": "https://api.github.com/repos/custom-components/alexa_media_player/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 24, "created_at": "2020-04-07T18:43:19Z", "updated_at": "2020-04-18T19:16:32Z", "closed_at": "2020-04-08T02:22:16Z", "author_association": "NONE", "active_lock_reason": null, "body": "**Describe the bug**\r\nA clear and concise description of what the bug is.\r\n\r\nIf a timer is set up on an Alexa device when Home Assistant is restarted, the alexa_media component will fail to start up followed by a full hang of Home Assistant.\r\n\r\nThe error appears to be \"KeyError occurred. Arguments: ('originalDate',)\". I added some additional debug logging and looks like the timer doesn't have the **originalDate** or **originalTime** properties that the component is looking for:\r\n\r\n```\r\n{'alarmTime': 0,\r\n 'createdDate': 1586191069120,\r\n 'deviceSerialNumber': '*****************',\r\n 'deviceType': '*************',\r\n 'id': 'A3***cbd',\r\n 'lastOccurrenceTimeInMilli': 0,\r\n 'lastUpdatedDate': 0,\r\n 'notificationIndex': '********-****-****-****-************',\r\n 'recurrenceEligibility': False,\r\n 'remainingTime': 0,\r\n 'sound': {'displayName': 'Simple Timer',\r\n           'id': 'system_alerts_melodic_02',\r\n           'providerId': 'ECHO',\r\n           'sampleUrl': 'https://s3.amazonaws.com/deeappservice.prod.notificationtones/system_alerts_melodic_02.mp3'},\r\n 'status': 'OFF',\r\n 'triggerTime': 0,\r\n 'type': 'Timer',\r\n 'version': '4'}\r\n\r\n```\r\n\r\n**To Reproduce**\r\nCreate a timer on an Alexa device\r\nRestart Home Assistant\r\n\r\nDeleting the timer allows Home Assistant to start up successfully.\r\n\r\n**Expected behavior**\r\nA clear and concise description of what you expected to happen.\r\n\r\nHome Assistant starts normally, with the alexa_media component working.\r\n\r\n**Screenshots**\r\nIf applicable, add screenshots to help explain your problem.\r\n\r\n**System details**\r\n - Home-assistant (version): 0.107.7\r\n - Hassio (Yes/No): No\r\n - alexa_media  (version from `const.py` or HA startup): 2.5.11\r\n - alexapy (version from `pip show alexapy` or HA startup): 1.5.2\r\n\r\n**Logs**\r\nPlease provide [logs](https://github.com/custom-components/alexa_media_player/wiki/FAQ#how-do-i-enable-debug-logging-for-the-component). We'll be most likely asking for them anyway.\r\n\r\n```text\r\n2020-04-07 18:28:45 DEBUG (MainThread) [custom_components.alexa_media] s*************n@b**************k: Found 11 devices, 11 bluetooth\r\n2020-04-07 18:28:45 DEBUG (MainThread) [custom_components.alexa_media.helpers] alexa_media.async_setup_entry: failure caught due to exception: An exception of type KeyError occurred. Arguments:\r\n('originalDate',)\r\n2020-04-07 18:28:45 DEBUG (MainThread) [custom_components.alexa_media.helpers] alexa_media.async_setup_entry: Try: 4/5 after waiting 40 seconds result: False\r\n2020-04-07 18:30:05 ERROR (MainThread) [homeassistant.core] Error doing job: Unclosed client session\r\n```\r\n\r\n**Additional context**\r\nAdd any other context about the problem here. \r\n", "reactions": {"url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/633/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/633/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/617", "repository_url": "https://api.github.com/repos/custom-components/alexa_media_player", "labels_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/617/labels{/name}", "comments_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/617/comments", "events_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/617/events", "html_url": "https://github.com/custom-components/alexa_media_player/issues/617", "id": 589906165, "node_id": "MDU6SXNzdWU1ODk5MDYxNjU=", "number": 617, "title": "The media player state doesn't clear after pausing and running another audio command", "user": {"login": "Flavien", "id": 296540, "node_id": "MDQ6VXNlcjI5NjU0MA==", "avatar_url": "https://avatars.githubusercontent.com/u/296540?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Flavien", "html_url": "https://github.com/Flavien", "followers_url": "https://api.github.com/users/Flavien/followers", "following_url": "https://api.github.com/users/Flavien/following{/other_user}", "gists_url": "https://api.github.com/users/Flavien/gists{/gist_id}", "starred_url": "https://api.github.com/users/Flavien/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Flavien/subscriptions", "organizations_url": "https://api.github.com/users/Flavien/orgs", "repos_url": "https://api.github.com/users/Flavien/repos", "events_url": "https://api.github.com/users/Flavien/events{/privacy}", "received_events_url": "https://api.github.com/users/Flavien/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 983327104, "node_id": "MDU6TGFiZWw5ODMzMjcxMDQ=", "url": "https://api.github.com/repos/custom-components/alexa_media_player/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 12, "created_at": "2020-03-29T23:02:06Z", "updated_at": "2020-04-02T15:58:39Z", "closed_at": "2020-04-02T15:58:39Z", "author_association": "NONE", "active_lock_reason": null, "body": "**Describe the bug**\r\nThe state of the component doesn't seem to update after stopping/pausing.\r\n\r\n**To Reproduce**\r\n1. Play something by saying e.g. \"Play XXX on deezer\".\r\n2. Ask Alexa to stop playing.\r\n3. Ask Alexa for a news update.\r\n4. The Alexa app doesn't show anything as currently playing anymore. Yet, the state of the media player is still `paused` with all the attributes still reflecting what was playing initially:\r\n- media_content_type\r\n- media_duration\r\n- media_position\r\n- media_position_updated_at\r\n- media_title\r\n- media_artist\r\n- media_album_name\r\n\r\nTrying to resume playing from Home Assistant fails.\r\n\r\n**Expected behavior**\r\nThe state of the media player component should no longer be `paused` (it should be back to `idle` or `standby`).\r\n\r\n**System details**\r\n - Home-assistant (version): 0.107.7\r\n - Hassio: No\r\n - alexa_media: 2.5.6\r\n - alexapy: 1.5.1\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/617/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/617/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/611", "repository_url": "https://api.github.com/repos/custom-components/alexa_media_player", "labels_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/611/labels{/name}", "comments_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/611/comments", "events_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/611/events", "html_url": "https://github.com/custom-components/alexa_media_player/issues/611", "id": 588876155, "node_id": "MDU6SXNzdWU1ODg4NzYxNTU=", "number": 611, "title": "TypeError: '<' not supported between instances of 'int' and 'datetime.datetime'", "user": {"login": "kkellner", "id": 9540241, "node_id": "MDQ6VXNlcjk1NDAyNDE=", "avatar_url": "https://avatars.githubusercontent.com/u/9540241?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kkellner", "html_url": "https://github.com/kkellner", "followers_url": "https://api.github.com/users/kkellner/followers", "following_url": "https://api.github.com/users/kkellner/following{/other_user}", "gists_url": "https://api.github.com/users/kkellner/gists{/gist_id}", "starred_url": "https://api.github.com/users/kkellner/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kkellner/subscriptions", "organizations_url": "https://api.github.com/users/kkellner/orgs", "repos_url": "https://api.github.com/users/kkellner/repos", "events_url": "https://api.github.com/users/kkellner/events{/privacy}", "received_events_url": "https://api.github.com/users/kkellner/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 983327104, "node_id": "MDU6TGFiZWw5ODMzMjcxMDQ=", "url": "https://api.github.com/repos/custom-components/alexa_media_player/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2020-03-27T04:20:07Z", "updated_at": "2020-03-30T01:56:34Z", "closed_at": "2020-03-30T01:56:34Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "**Describe the bug**\r\nAt HA startup getting an error in log file:\r\n`TypeError: '<' not supported between instances of 'int' and 'datetime.datetime'`\r\n\r\n**System details**\r\n - Home-assistant (version): 0.107.7\r\n - Hassio (Yes/No): (Please note you may have to restart hassio 2-3 times to load the latest version of alexapy after an update. This looks like a HA bug).\r\n - alexa_media  (version from `const.py` or HA startup): 2.5.8\r\n - alexapy (version from `pip show alexapy` or HA startup):\r\n\r\n**Additional context**\r\n\r\nNOTE: changed s/n and other identifiers to xxxxx in below log.\r\n\r\n```\r\n2020-03-26 22:05:03 DEBUG (MainThread) [custom_components.alexa_media.sensor] value ('xxxxx', {'alarmTime': 1585325040000, 'automationId': None, 'createdDate': 1519416302707, 'deferredAtTime': None, 'deliveryType': None, 'deviceName': None, 'deviceSerialNumber': 'xxxxxx', 'deviceType': 'xxxxx', 'extensibleAttribute': None, 'geoLocationTriggerData': None, 'id': 'xxxxxx_REMINDER', 'lastOccurrenceTimeInMilli': 0, 'lastUpdatedDate': 0, 'musicAlarmId': None, 'musicEntity': None, 'notificationIndex': 'xxxxx-07d5-469c-b04c-bc54b39aafcf', 'originalDate': '2020-03-27', 'originalTime': '09:04:00.000', 'personProfile': None, 'provider': None, 'rRuleData': {'byMonthDays': None, 'byWeekDays': None, 'flexibleRecurringPatternType': 'ONCE_A_DAY', 'frequency': None, 'intervals': [1], 'nextTriggerTimes': None, 'notificationTimes': ['09:04:00.000'], 'recurEndDate': None, 'recurEndTime': None, 'recurStartDate': None, 'recurStartTime': None, 'recurrenceRules': ['FREQ=DAILY;BYHOUR=9;BYMINUTE=4;BYSECOND=0;INTERVAL=1;']}, 'recurrenceEligibility': False, 'recurringPattern': 'P1D', 'remainingTime': 0, 'reminderAppLabel': None, 'reminderLabel': 'Take your vitamins', 'reminderSubLabel': None, 'skillInfo': None, 'snoozedToTime': None, 'sound': {'displayName': 'Simple Alarm', 'folder': None, 'id': 'system_alerts_melodic_01', 'providerId': 'ECHO', 'sampleUrl': 'https://s3.amazonaws.com/deeappservice.prod.notificationtones/system_alerts_melodic_01.mp3'}, 'status': 'ON', 'targetPersonProfiles': None, 'timeZoneId': None, 'timerLabel': None, 'tmwNotificationProperties': None, 'triggerTime': 0, 'type': 'Reminder', 'version': '3189', 'date_time': '2020-03-27 09:04:00.000'})\r\n2020-03-26 22:05:03 ERROR (MainThread) [homeassistant.components.sensor] Error while setting up alexa_media platform for sensor\r\nTraceback (most recent call last):\r\n  File \"/usr/src/homeassistant/homeassistant/helpers/entity_platform.py\", line 179, in _async_setup_platform\r\n    await asyncio.wait_for(asyncio.shield(task), SLOW_SETUP_MAX_WAIT)\r\n  File \"/usr/local/lib/python3.7/asyncio/tasks.py\", line 442, in wait_for\r\n    return fut.result()\r\n  File \"/config/custom_components/alexa_media/sensor.py\", line 151, in async_setup_entry\r\n    hass, config_entry.data, async_add_devices, discovery_info=None\r\n  File \"/config/custom_components/alexa_media/helpers.py\", line 111, in wrapper\r\n    result = await func(*args, **kwargs)\r\n  File \"/config/custom_components/alexa_media/sensor.py\", line 118, in async_setup_platform\r\n    account,\r\n  File \"/config/custom_components/alexa_media/sensor.py\", line 467, in __init__\r\n    client, n_json, \"alarmTime\", account, f\"next {self._type}\", \"mdi:reminder\"\r\n  File \"/config/custom_components/alexa_media/sensor.py\", line 192, in __init__\r\n    self._process_raw_notifications()\r\n  File \"/config/custom_components/alexa_media/sensor.py\", line 200, in _process_raw_notifications\r\n    self._all = list(map(self._update_recurring_alarm, self._all))\r\n  File \"/config/custom_components/alexa_media/sensor.py\", line 253, in _update_recurring_alarm\r\n    and alarm < dt.now()\r\nTypeError: '<' not supported between instances of 'int' and 'datetime.datetime'\r\n```", "reactions": {"url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/611/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/611/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/572", "repository_url": "https://api.github.com/repos/custom-components/alexa_media_player", "labels_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/572/labels{/name}", "comments_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/572/comments", "events_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/572/events", "html_url": "https://github.com/custom-components/alexa_media_player/issues/572", "id": 572650767, "node_id": "MDU6SXNzdWU1NzI2NTA3Njc=", "number": 572, "title": "Routines containing a Skill action won't play correctly unless configured for specific device", "user": {"login": "gadgetchnnel", "id": 2099542, "node_id": "MDQ6VXNlcjIwOTk1NDI=", "avatar_url": "https://avatars.githubusercontent.com/u/2099542?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gadgetchnnel", "html_url": "https://github.com/gadgetchnnel", "followers_url": "https://api.github.com/users/gadgetchnnel/followers", "following_url": "https://api.github.com/users/gadgetchnnel/following{/other_user}", "gists_url": "https://api.github.com/users/gadgetchnnel/gists{/gist_id}", "starred_url": "https://api.github.com/users/gadgetchnnel/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gadgetchnnel/subscriptions", "organizations_url": "https://api.github.com/users/gadgetchnnel/orgs", "repos_url": "https://api.github.com/users/gadgetchnnel/repos", "events_url": "https://api.github.com/users/gadgetchnnel/events{/privacy}", "received_events_url": "https://api.github.com/users/gadgetchnnel/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 983327104, "node_id": "MDU6TGFiZWw5ODMzMjcxMDQ=", "url": "https://api.github.com/repos/custom-components/alexa_media_player/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2020-02-28T10:02:04Z", "updated_at": "2020-03-01T07:26:37Z", "closed_at": "2020-03-01T07:26:37Z", "author_association": "NONE", "active_lock_reason": null, "body": "**Describe the bug**\r\nA clear and concise description of what the bug is.\r\n\r\nAlexa routines now have a Skill action which allows a skill to be opened as part of the routine. When these are triggered from the app they work whether they are configured to pay from a specific device or the device you speak to. When triggered using **media_player.play_media** they only work if configured for a specific device.\r\n\r\n**To Reproduce**\r\nSteps to reproduce the behavior:\r\n1. Create a routine with an Alexa Says action and a Skill action (see first screenshot)\r\n2. Set the **From** option to \"The device you speak to\"\r\n3. Use **media_player.play_media** to play this routine on a device\r\n4. The speech action will work (from the device you, but the skill won't open\r\n5. Change **From** action to a specific device\r\n6. Use **media_player.play_media** again\r\n7. Both actions will work, although they will always be from the device configured in the skill.\r\n\r\n**Expected behavior**\r\nA clear and concise description of what you expected to happen.\r\n\r\nRoutine should execute fully, including the Skill action, if the routine is configured to play from the device you speak to.\r\n\r\n**Screenshots**\r\nIf applicable, add screenshots to help explain your problem.\r\n\r\nNot Working Routine\r\n![Screenshot_20200228_091829_com amazon dee app](https://user-images.githubusercontent.com/2099542/75532083-267c2900-5a0c-11ea-90e9-a6ecd4d30e2c.jpg)\r\n\r\nWorking Routine\r\n![Screenshot_20200228_091820_com amazon dee app](https://user-images.githubusercontent.com/2099542/75532156-2aa84680-5a0c-11ea-9cc3-6341b4499726.jpg)\r\n\r\n**System details**\r\n - Home-assistant (version): 0.100.6\r\n - Hassio (Yes/No): No\r\n - alexa_media  (version from `const.py` or HA startup): 2.5.5\r\n - alexapy (version from `pip show alexapy` or HA startup): 1.5.0\r\n\r\n**Logs**\r\nPlease provide [logs](https://github.com/custom-components/alexa_media_player/wiki/FAQ#how-do-i-enable-debug-logging-for-the-component). We'll be most likely asking for them anyway.\r\n\r\n```text\r\n2020-02-28 09:37:45 DEBUG (MainThread) [alexapy.alexaapi] Running behavior with data: {\"behaviorId\": \"PREVIEW\", \"sequenceJson\": \"{\\\"@type\\\": \\\"com.amazon.alexa.behaviors.model.Sequence\\\", \\\"startNode\\\": {\\\"@type\\\": \\\"com.amazon.alexa.behaviors.model.SerialNode\\\", \\\"nodesToExecute\\\": [{\\\"@type\\\": \\\"com.amazon.alexa.behaviors.model.OpaquePayloadOperationNode\\\", \\\"type\\\": \\\"Alexa.Speak\\\", \\\"skillId\\\": \\\"amzn1.ask.1p.saysomething\\\", \\\"operationPayload\\\": {\\\"customerId\\\": \\\"************\\\", \\\"deviceType\\\": \\\"A3S5BH2HU6VAYF\\\", \\\"deviceSerialNumber\\\": \\\"G***************N\\\", \\\"textToSpeak\\\": \\\"hello\\\", \\\"locale\\\": \\\"en-GB\\\"}, \\\"name\\\": null}, {\\\"@type\\\": \\\"com.amazon.alexa.behaviors.model.OpaquePayloadOperationNode\\\", \\\"type\\\": \\\"Alexa.Operation.SkillConnections.Launch\\\", \\\"skillId\\\": \\\"amzn1.ask.skill.6b8619f2-e717-45ca-adf8-426da10a2357\\\", \\\"operationPayload\\\": {\\\"locale\\\": \\\"en-GB\\\", \\\"customerId\\\": \\\"*************\\\", \\\"targetDevice\\\": {\\\"deviceType\\\": \\\"ALEXA_CURRENT_DEVICE_TYPE\\\", \\\"deviceSerialNumber\\\": \\\"ALEXA_CURRENT_DSN\\\"}, \\\"connectionRequest\\\": {\\\"uri\\\": \\\"connection://AMAZON.Launch/amzn1.ask.skill.6b8619f2-e717-45ca-adf8-426da10a2357\\\", \\\"input\\\": {}}}, \\\"name\\\": null}]}}\", \"status\": \"ENABLED\"}\r\n\r\n```\r\n**Additional context**\r\nAdd any other context about the problem here. \r\n\r\nJudging from the debug log, the issue is that the **deviceType** is being passed as \"ALEXA_CURRENT_DEVICE_TYPE\" and the **deviceSerialNumber** as \"ALEXA_CURRENT_DSN\" rather than the correct device type and serial number of the device in the **media_player.play_media** call.", "reactions": {"url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/572/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/572/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/552", "repository_url": "https://api.github.com/repos/custom-components/alexa_media_player", "labels_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/552/labels{/name}", "comments_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/552/comments", "events_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/552/events", "html_url": "https://github.com/custom-components/alexa_media_player/issues/552", "id": 559066166, "node_id": "MDU6SXNzdWU1NTkwNjYxNjY=", "number": 552, "title": "Next Alarm Sensor not showing when load delayed", "user": {"login": "hankanman", "id": 3953290, "node_id": "MDQ6VXNlcjM5NTMyOTA=", "avatar_url": "https://avatars.githubusercontent.com/u/3953290?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hankanman", "html_url": "https://github.com/hankanman", "followers_url": "https://api.github.com/users/hankanman/followers", "following_url": "https://api.github.com/users/hankanman/following{/other_user}", "gists_url": "https://api.github.com/users/hankanman/gists{/gist_id}", "starred_url": "https://api.github.com/users/hankanman/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hankanman/subscriptions", "organizations_url": "https://api.github.com/users/hankanman/orgs", "repos_url": "https://api.github.com/users/hankanman/repos", "events_url": "https://api.github.com/users/hankanman/events{/privacy}", "received_events_url": "https://api.github.com/users/hankanman/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 983327104, "node_id": "MDU6TGFiZWw5ODMzMjcxMDQ=", "url": "https://api.github.com/repos/custom-components/alexa_media_player/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2020-02-03T12:56:39Z", "updated_at": "2020-02-15T18:14:30Z", "closed_at": "2020-02-15T18:14:30Z", "author_association": "NONE", "active_lock_reason": null, "body": "**Describe the bug**\r\nI have a persistant weekday alarm set up on my bedroom echo speaker. This was previously being pulled through, but now does appear as an entity at all\r\n\r\n**To Reproduce**\r\nSteps to reproduce the behavior:\r\n1. Add component\r\n2. have alarm set with alexa\r\n3. have media_player show up but not next alarm\r\n\r\n**Expected behavior**\r\nDisplay next alarm sensor\r\n\r\n**Screenshots**\r\nIf applicable, add screenshots to help explain your problem.\r\n\r\n**System details**\r\n - Home-assistant (version): 104.3\r\n - Hassio Yes\r\n - alexa_media: 2.5.4\r\n - alexapy: 1.4.2\r\n\r\n**Logs**\r\nhttps://pastebin.com/N0yih2Nx\r\n", "reactions": {"url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/552/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/552/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/548", "repository_url": "https://api.github.com/repos/custom-components/alexa_media_player", "labels_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/548/labels{/name}", "comments_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/548/comments", "events_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/548/events", "html_url": "https://github.com/custom-components/alexa_media_player/issues/548", "id": 557190726, "node_id": "MDU6SXNzdWU1NTcxOTA3MjY=", "number": 548, "title": "alexa_media.switch.async_setup_platform: failure caught due to exception: An exception of type KeyError occurred. ", "user": {"login": "Noettore", "id": 1547292, "node_id": "MDQ6VXNlcjE1NDcyOTI=", "avatar_url": "https://avatars.githubusercontent.com/u/1547292?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Noettore", "html_url": "https://github.com/Noettore", "followers_url": "https://api.github.com/users/Noettore/followers", "following_url": "https://api.github.com/users/Noettore/following{/other_user}", "gists_url": "https://api.github.com/users/Noettore/gists{/gist_id}", "starred_url": "https://api.github.com/users/Noettore/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Noettore/subscriptions", "organizations_url": "https://api.github.com/users/Noettore/orgs", "repos_url": "https://api.github.com/users/Noettore/repos", "events_url": "https://api.github.com/users/Noettore/events{/privacy}", "received_events_url": "https://api.github.com/users/Noettore/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 983327104, "node_id": "MDU6TGFiZWw5ODMzMjcxMDQ=", "url": "https://api.github.com/repos/custom-components/alexa_media_player/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2020-01-30T00:05:11Z", "updated_at": "2020-04-22T02:46:13Z", "closed_at": "2020-04-22T02:46:13Z", "author_association": "NONE", "active_lock_reason": null, "body": "When adding the integration in HA, after successfully logging in, the component finds the devices and adds them but both (Echo Dot and Android App) without DND, shuffle and repeat switch.\r\n\r\n**System details**\r\n - Home-assistant (version): 0.104.3\r\n - Hassio (Yes/No): YES\r\n - alexa_media  (version from `const.py` or HA startup): 2.5.4 installed via HACS\r\n\r\n**Logs**\r\n```\r\n2020-01-30 00:49:23 DEBUG (MainThread) [custom_components.alexa_media.helpers] alexa_media.notify.async_get_service: Try: 2/5 after waiting 4 seconds result: <custom_components.alexa_media.notify.AlexaNotificationService object at 0x7f72ccc46410>\r\n2020-01-30 00:49:29 DEBUG (MainThread) [custom_components.alexa_media.sensor] n******e@g*******m: Loading sensors\r\n2020-01-30 00:49:29 DEBUG (MainThread) [custom_components.alexa_media.sensor] n******e@g*******m: Found G************4D5 Alarm sensor (1) with next: unavailable\r\n2020-01-30 00:49:29 DEBUG (MainThread) [custom_components.alexa_media.sensor] n******e@g*******m: Found G************4D5 Timer sensor (0) with next: unavailable\r\n2020-01-30 00:49:29 DEBUG (MainThread) [custom_components.alexa_media.sensor] n******e@g*******m: Found G************4D5 Reminder sensor (0) with next: unavailable\r\n2020-01-30 00:49:29 DEBUG (MainThread) [custom_components.alexa_media.sensor] n******e@g*******m: Found e****************************96d Reminder sensor (0) with next: unavailable\r\n2020-01-30 00:49:29 DEBUG (MainThread) [custom_components.alexa_media.helpers] n******e@g*******m: Adding [<Entity Camera next Alarm: unavailable>, <Entity Camera next Timer: unavailable>, <Entity Camera next Reminder: unavailable>, <Entity This Device next Reminder: unavailable>]\r\n2020-01-30 00:49:29 DEBUG (MainThread) [custom_components.alexa_media.helpers] alexa_media.sensor.async_setup_platform: Try: 2/5 after waiting 10 seconds result: True\r\n2020-01-30 00:49:29 DEBUG (MainThread) [custom_components.alexa_media.switch] n******e@g*******m: Loading switches\r\n2020-01-30 00:49:29 DEBUG (MainThread) [custom_components.alexa_media.switch] n******e@g*******m: Found G************4D5 dnd switch with status: True\r\n2020-01-30 00:49:29 DEBUG (MainThread) [custom_components.alexa_media.switch] n******e@g*******m: Found G************4D5 shuffle switch with status: False\r\n2020-01-30 00:49:29 DEBUG (MainThread) [custom_components.alexa_media.switch] n******e@g*******m: Found G************4D5 repeat switch with status: False\r\n2020-01-30 00:49:29 DEBUG (MainThread) [custom_components.alexa_media.switch] n******e@g*******m: Found e****************************96d dnd switch with status: False\r\n2020-01-30 00:49:29 DEBUG (MainThread) [custom_components.alexa_media.switch] n******e@g*******m: Skipping shuffle for e****************************96d\r\n2020-01-30 00:49:29 DEBUG (MainThread) [custom_components.alexa_media.switch] n******e@g*******m: Skipping repeat for e****************************96d\r\n2020-01-30 00:49:29 DEBUG (MainThread) [custom_components.alexa_media.helpers] alexa_media.switch.async_setup_platform: failure caught due to exception: An exception of type KeyError occurred. Arguments:\r\n('899519E4981D4E79B25A5ADCA448B91D',)\r\n```", "reactions": {"url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/548/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/548/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/544", "repository_url": "https://api.github.com/repos/custom-components/alexa_media_player", "labels_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/544/labels{/name}", "comments_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/544/comments", "events_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/544/events", "html_url": "https://github.com/custom-components/alexa_media_player/issues/544", "id": 555272228, "node_id": "MDU6SXNzdWU1NTUyNzIyMjg=", "number": 544, "title": "KeyError: 'notifications'", "user": {"login": "Tadimsky", "id": 1149244, "node_id": "MDQ6VXNlcjExNDkyNDQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1149244?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Tadimsky", "html_url": "https://github.com/Tadimsky", "followers_url": "https://api.github.com/users/Tadimsky/followers", "following_url": "https://api.github.com/users/Tadimsky/following{/other_user}", "gists_url": "https://api.github.com/users/Tadimsky/gists{/gist_id}", "starred_url": "https://api.github.com/users/Tadimsky/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Tadimsky/subscriptions", "organizations_url": "https://api.github.com/users/Tadimsky/orgs", "repos_url": "https://api.github.com/users/Tadimsky/repos", "events_url": "https://api.github.com/users/Tadimsky/events{/privacy}", "received_events_url": "https://api.github.com/users/Tadimsky/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 983327104, "node_id": "MDU6TGFiZWw5ODMzMjcxMDQ=", "url": "https://api.github.com/repos/custom-components/alexa_media_player/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2020-01-26T19:04:13Z", "updated_at": "2020-03-21T05:39:01Z", "closed_at": "2020-03-21T05:39:01Z", "author_association": "NONE", "active_lock_reason": null, "body": "**Describe the bug**\r\nI'm seeing this error in my logs:\r\n\r\n```\r\nKeyError: 'notifications'\r\n  File \"/config/custom_components/alexa_media/__init__.py\", line 445, in update_devices\r\n    raw_notifications = await AlexaAPI.get_notifications(login_obj)\r\n  File \"alexapy/alexaapi.py\", line 761, in get_notifications\r\n    return (await response.json(content_type=None))['notifications']\r\n```\r\n![image](https://user-images.githubusercontent.com/1149244/73140210-16e37c00-402b-11ea-9f00-abe52187e03f.png)\r\n\r\nIt looks like the Alexa API returned a 500 error.\r\n\r\n**To Reproduce**\r\nUnknown, noticed in the logs.\r\nLooks like Alexa API was having issues.\r\n\r\n**Expected behavior**\r\nError is not thrown when indexing a property that may not exist.\r\n\r\n**Screenshots**\r\nIf applicable, add screenshots to help explain your problem.\r\n\r\n**System details**\r\n - Home-assistant (version):   0.104.3\r\n - Hassio (Yes/No): Yes\r\n - alexa_media  (version from `const.py` or HA startup): v2.5.2\r\n - alexapy (version from `pip show alexapy` or HA startup): \r\n\r\n", "reactions": {"url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/544/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/544/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/529", "repository_url": "https://api.github.com/repos/custom-components/alexa_media_player", "labels_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/529/labels{/name}", "comments_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/529/comments", "events_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/529/events", "html_url": "https://github.com/custom-components/alexa_media_player/issues/529", "id": 551532366, "node_id": "MDU6SXNzdWU1NTE1MzIzNjY=", "number": 529, "title": "Do Not Disturb state doesn't update", "user": {"login": "aidanblack", "id": 867786, "node_id": "MDQ6VXNlcjg2Nzc4Ng==", "avatar_url": "https://avatars.githubusercontent.com/u/867786?v=4", "gravatar_id": "", "url": "https://api.github.com/users/aidanblack", "html_url": "https://github.com/aidanblack", "followers_url": "https://api.github.com/users/aidanblack/followers", "following_url": "https://api.github.com/users/aidanblack/following{/other_user}", "gists_url": "https://api.github.com/users/aidanblack/gists{/gist_id}", "starred_url": "https://api.github.com/users/aidanblack/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/aidanblack/subscriptions", "organizations_url": "https://api.github.com/users/aidanblack/orgs", "repos_url": "https://api.github.com/users/aidanblack/repos", "events_url": "https://api.github.com/users/aidanblack/events{/privacy}", "received_events_url": "https://api.github.com/users/aidanblack/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 983327104, "node_id": "MDU6TGFiZWw5ODMzMjcxMDQ=", "url": "https://api.github.com/repos/custom-components/alexa_media_player/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2020-01-17T17:08:31Z", "updated_at": "2020-05-09T08:28:02Z", "closed_at": "2020-01-20T07:58:29Z", "author_association": "NONE", "active_lock_reason": null, "body": "SUMMARY:\r\nDo Not Disturb toggle on Echo devices works fine when you control it from HA but when the status changes on the device or from the Alexa iOS app, the updated state doesn't reflect in HA.\r\n\r\nDETAILS:\r\nWhen HA restarts it gets the correct Do Not Disturb state from all Echo devices. When you change the state from HA, the device updates correctly. However, if you tell the device \"Alexa do not disturb\" or set Do Not Disturb for a device from the Alexa iOS app, the state change doesn't get updated in HA.\r\n\r\nEXPECTATION:\r\nSetting Do Not Disturb should update the state in HA.\r\n\r\nSYSTEM:\r\nRaspberry Pi 3B+ running HassIO (v0.104.0). The Alexa Media Player add-on is installed through HACS (v2.5.1).\r\n\r\nLOGS:\r\nThere are no errors in the logs or entries in the Logbook\r\n\r\nADDITIONAL:\r\nI have a total of 6 Echo devices, plus several Fire TV and Kindle devices.", "reactions": {"url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/529/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/529/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/521", "repository_url": "https://api.github.com/repos/custom-components/alexa_media_player", "labels_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/521/labels{/name}", "comments_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/521/comments", "events_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/521/events", "html_url": "https://github.com/custom-components/alexa_media_player/issues/521", "id": 550574979, "node_id": "MDU6SXNzdWU1NTA1NzQ5Nzk=", "number": 521, "title": "CI is broken", "user": {"login": "alandtse", "id": 7086117, "node_id": "MDQ6VXNlcjcwODYxMTc=", "avatar_url": "https://avatars.githubusercontent.com/u/7086117?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alandtse", "html_url": "https://github.com/alandtse", "followers_url": "https://api.github.com/users/alandtse/followers", "following_url": "https://api.github.com/users/alandtse/following{/other_user}", "gists_url": "https://api.github.com/users/alandtse/gists{/gist_id}", "starred_url": "https://api.github.com/users/alandtse/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alandtse/subscriptions", "organizations_url": "https://api.github.com/users/alandtse/orgs", "repos_url": "https://api.github.com/users/alandtse/repos", "events_url": "https://api.github.com/users/alandtse/events{/privacy}", "received_events_url": "https://api.github.com/users/alandtse/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 983327104, "node_id": "MDU6TGFiZWw5ODMzMjcxMDQ=", "url": "https://api.github.com/repos/custom-components/alexa_media_player/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": {"login": "alandtse", "id": 7086117, "node_id": "MDQ6VXNlcjcwODYxMTc=", "avatar_url": "https://avatars.githubusercontent.com/u/7086117?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alandtse", "html_url": "https://github.com/alandtse", "followers_url": "https://api.github.com/users/alandtse/followers", "following_url": "https://api.github.com/users/alandtse/following{/other_user}", "gists_url": "https://api.github.com/users/alandtse/gists{/gist_id}", "starred_url": "https://api.github.com/users/alandtse/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alandtse/subscriptions", "organizations_url": "https://api.github.com/users/alandtse/orgs", "repos_url": "https://api.github.com/users/alandtse/repos", "events_url": "https://api.github.com/users/alandtse/events{/privacy}", "received_events_url": "https://api.github.com/users/alandtse/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "alandtse", "id": 7086117, "node_id": "MDQ6VXNlcjcwODYxMTc=", "avatar_url": "https://avatars.githubusercontent.com/u/7086117?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alandtse", "html_url": "https://github.com/alandtse", "followers_url": "https://api.github.com/users/alandtse/followers", "following_url": "https://api.github.com/users/alandtse/following{/other_user}", "gists_url": "https://api.github.com/users/alandtse/gists{/gist_id}", "starred_url": "https://api.github.com/users/alandtse/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alandtse/subscriptions", "organizations_url": "https://api.github.com/users/alandtse/orgs", "repos_url": "https://api.github.com/users/alandtse/repos", "events_url": "https://api.github.com/users/alandtse/events{/privacy}", "received_events_url": "https://api.github.com/users/alandtse/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 1, "created_at": "2020-01-16T04:57:56Z", "updated_at": "2020-01-17T04:44:38Z", "closed_at": "2020-01-17T04:44:38Z", "author_association": "COLLABORATOR", "active_lock_reason": null, "body": "Need to fix the CI because it's not posting the changelog anymore as a result of adding the zip function.", "reactions": {"url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/521/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/521/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/514", "repository_url": "https://api.github.com/repos/custom-components/alexa_media_player", "labels_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/514/labels{/name}", "comments_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/514/comments", "events_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/514/events", "html_url": "https://github.com/custom-components/alexa_media_player/issues/514", "id": 550359558, "node_id": "MDU6SXNzdWU1NTAzNTk1NTg=", "number": 514, "title": "Cannot update to 2.5.0 through HACS", "user": {"login": "mfabiani53", "id": 37701688, "node_id": "MDQ6VXNlcjM3NzAxNjg4", "avatar_url": "https://avatars.githubusercontent.com/u/37701688?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mfabiani53", "html_url": "https://github.com/mfabiani53", "followers_url": "https://api.github.com/users/mfabiani53/followers", "following_url": "https://api.github.com/users/mfabiani53/following{/other_user}", "gists_url": "https://api.github.com/users/mfabiani53/gists{/gist_id}", "starred_url": "https://api.github.com/users/mfabiani53/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mfabiani53/subscriptions", "organizations_url": "https://api.github.com/users/mfabiani53/orgs", "repos_url": "https://api.github.com/users/mfabiani53/repos", "events_url": "https://api.github.com/users/mfabiani53/events{/privacy}", "received_events_url": "https://api.github.com/users/mfabiani53/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 983327104, "node_id": "MDU6TGFiZWw5ODMzMjcxMDQ=", "url": "https://api.github.com/repos/custom-components/alexa_media_player/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}, {"id": 983327105, "node_id": "MDU6TGFiZWw5ODMzMjcxMDU=", "url": "https://api.github.com/repos/custom-components/alexa_media_player/labels/duplicate", "name": "duplicate", "color": "cfd3d7", "default": true, "description": "This issue or pull request already exists"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2020-01-15T18:38:11Z", "updated_at": "2020-01-16T04:32:55Z", "closed_at": "2020-01-16T04:32:55Z", "author_association": "NONE", "active_lock_reason": null, "body": "**Describe the bug**\r\nAs the title says i am unable to update the component to 2.5.0 release\r\n\r\n**To Reproduce**\r\n\r\n**Expected behavior**\r\n\r\n**Screenshots**\r\n\r\n**System details**\r\n - Home-assistant (version): 0.103.6\r\n - Hassio (Yes/No): Yes\r\n\r\n**Logs**\r\n```\r\n2020-01-15 15:44:59 ERROR (MainThread) [hacs.repository.integration.custom-components.alexa_media_player] Download was not complete\r\n```\r\n**Additional context**\r\nAdd any other context about the problem here. \r\n", "reactions": {"url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/514/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/514/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/513", "repository_url": "https://api.github.com/repos/custom-components/alexa_media_player", "labels_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/513/labels{/name}", "comments_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/513/comments", "events_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/513/events", "html_url": "https://github.com/custom-components/alexa_media_player/issues/513", "id": 550305888, "node_id": "MDU6SXNzdWU1NTAzMDU4ODg=", "number": 513, "title": "problem with alexa integration after upgraded to 2.5.0", "user": {"login": "pilot1981", "id": 46350465, "node_id": "MDQ6VXNlcjQ2MzUwNDY1", "avatar_url": "https://avatars.githubusercontent.com/u/46350465?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pilot1981", "html_url": "https://github.com/pilot1981", "followers_url": "https://api.github.com/users/pilot1981/followers", "following_url": "https://api.github.com/users/pilot1981/following{/other_user}", "gists_url": "https://api.github.com/users/pilot1981/gists{/gist_id}", "starred_url": "https://api.github.com/users/pilot1981/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pilot1981/subscriptions", "organizations_url": "https://api.github.com/users/pilot1981/orgs", "repos_url": "https://api.github.com/users/pilot1981/repos", "events_url": "https://api.github.com/users/pilot1981/events{/privacy}", "received_events_url": "https://api.github.com/users/pilot1981/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 983327104, "node_id": "MDU6TGFiZWw5ODMzMjcxMDQ=", "url": "https://api.github.com/repos/custom-components/alexa_media_player/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2020-01-15T16:48:43Z", "updated_at": "2020-01-16T04:32:55Z", "closed_at": "2020-01-16T04:32:55Z", "author_association": "NONE", "active_lock_reason": null, "body": "**Describe the bug**\r\nproblem with alexa integration after upgraded to 2.5.0\r\n\r\n**To Reproduce**\r\non HASSIO 0.103.6 upgrade alexa from 2.4.0 to 2.5.0 using HACS 0.20.8\r\n\r\n**Expected behavior**\r\nworking integration with alexa\r\n\r\n**Screenshots**\r\nNA\r\n\r\n**System details**\r\n- HASSIO 0.103.6\r\n - alexa_media  2.5.0\r\n - alexapy (version from `pip show alexapy` or HA startup):\r\n\r\n**Logs**\r\nPlatform error notify.alexa_media - Integration 'alexa_media' not found.\r\n\r\n**Additional context**\r\nAdd any other context about the problem here. \r\n", "reactions": {"url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/513/reactions", "total_count": 2, "+1": 2, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/513/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/512", "repository_url": "https://api.github.com/repos/custom-components/alexa_media_player", "labels_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/512/labels{/name}", "comments_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/512/comments", "events_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/512/events", "html_url": "https://github.com/custom-components/alexa_media_player/issues/512", "id": 550139111, "node_id": "MDU6SXNzdWU1NTAxMzkxMTE=", "number": 512, "title": "Unknown error during configuration", "user": {"login": "jpcanovas", "id": 14326725, "node_id": "MDQ6VXNlcjE0MzI2NzI1", "avatar_url": "https://avatars.githubusercontent.com/u/14326725?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jpcanovas", "html_url": "https://github.com/jpcanovas", "followers_url": "https://api.github.com/users/jpcanovas/followers", "following_url": "https://api.github.com/users/jpcanovas/following{/other_user}", "gists_url": "https://api.github.com/users/jpcanovas/gists{/gist_id}", "starred_url": "https://api.github.com/users/jpcanovas/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jpcanovas/subscriptions", "organizations_url": "https://api.github.com/users/jpcanovas/orgs", "repos_url": "https://api.github.com/users/jpcanovas/repos", "events_url": "https://api.github.com/users/jpcanovas/events{/privacy}", "received_events_url": "https://api.github.com/users/jpcanovas/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 983327104, "node_id": "MDU6TGFiZWw5ODMzMjcxMDQ=", "url": "https://api.github.com/repos/custom-components/alexa_media_player/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}, {"id": 1246346849, "node_id": "MDU6TGFiZWwxMjQ2MzQ2ODQ5", "url": "https://api.github.com/repos/custom-components/alexa_media_player/labels/alexapy", "name": "alexapy", "color": "e23ba8", "default": false, "description": "Issue relates to the API"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2020-01-15T11:49:41Z", "updated_at": "2020-01-16T04:32:55Z", "closed_at": "2020-01-16T04:32:55Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi all. I have installed all files in custom components, reboot home assistant and go to integrations and add an Alexa media integration. Then the configuration panel appears and I introduce my email, password and Amazon server. But when i press \"Send\" the panel cleans and this error appears in home-assistant.log:\r\n\r\n`2020-01-15 12:34:11 WARNING (MainThread) [custom_components.alexa_media.config_flow] Unknown error: int() argument must be a string, a bytes-like object or a number, not 'datetime.datetime'`\r\n\r\nThe same if I edit configurations.yaml.\r\n\r\nEnvironment:\r\n- Home Assistant 0.102.3 on Docker\r\n- Custom component Alexa-media from git clone on 2020/01/15 (2.5.0)\r\n- Alexapy 1.4.1 (Home Assistant auto installed it)\r\n\r\nAny idea to solve it? Thanks\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/512/reactions", "total_count": 1, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/512/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/501", "repository_url": "https://api.github.com/repos/custom-components/alexa_media_player", "labels_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/501/labels{/name}", "comments_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/501/comments", "events_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/501/events", "html_url": "https://github.com/custom-components/alexa_media_player/issues/501", "id": 544487027, "node_id": "MDU6SXNzdWU1NDQ0ODcwMjc=", "number": 501, "title": "AttributeError: 'NoneType' object has no attribute 'tzinfo'", "user": {"login": "alandtse", "id": 7086117, "node_id": "MDQ6VXNlcjcwODYxMTc=", "avatar_url": "https://avatars.githubusercontent.com/u/7086117?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alandtse", "html_url": "https://github.com/alandtse", "followers_url": "https://api.github.com/users/alandtse/followers", "following_url": "https://api.github.com/users/alandtse/following{/other_user}", "gists_url": "https://api.github.com/users/alandtse/gists{/gist_id}", "starred_url": "https://api.github.com/users/alandtse/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alandtse/subscriptions", "organizations_url": "https://api.github.com/users/alandtse/orgs", "repos_url": "https://api.github.com/users/alandtse/repos", "events_url": "https://api.github.com/users/alandtse/events{/privacy}", "received_events_url": "https://api.github.com/users/alandtse/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 983327104, "node_id": "MDU6TGFiZWw5ODMzMjcxMDQ=", "url": "https://api.github.com/repos/custom-components/alexa_media_player/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2020-01-02T08:27:52Z", "updated_at": "2020-01-15T08:53:28Z", "closed_at": "2020-01-15T08:53:28Z", "author_association": "COLLABORATOR", "active_lock_reason": null, "body": "**Logs**\r\nPlease provide [logs](https://github.com/custom-components/alexa_media_player/wiki/FAQ#how-do-i-enable-debug-logging-for-the-component). We'll be most likely asking for them anyway.\r\n```\r\n2020-01-01 20:40:25 ERROR (MainThread) [homeassistant.components.sensor] Error while setting up platform alexa_media\r\nTraceback (most recent call last):\r\n  File \"/usr/src/homeassistant/homeassistant/helpers/entity_platform.py\", line 150, in _async_setup_platform\r\n    await asyncio.wait_for(asyncio.shield(task), SLOW_SETUP_MAX_WAIT)\r\n  File \"/usr/local/lib/python3.7/asyncio/tasks.py\", line 442, in wait_for\r\n    return fut.result()\r\n  File \"/config/custom_components/alexa_media/sensor.py\", line 128, in async_setup_entry\r\n    hass, config_entry.data, async_add_devices, discovery_info=None\r\n  File \"/config/custom_components/alexa_media/helpers.py\", line 111, in wrapper\r\n    result = await func(*args, **kwargs)\r\n  File \"/config/custom_components/alexa_media/sensor.py\", line 89, in async_setup_platform\r\n    account,\r\n  File \"/config/custom_components/alexa_media/sensor.py\", line 343, in __init__\r\n    client, n_json, \"date_time\", account, f\"next {self._type}\", \"mdi:alarm\"\r\n  File \"/config/custom_components/alexa_media/sensor.py\", line 170, in __init__\r\n    self._all = list(map(self._fix_alarm_date_time, self._all))\r\n  File \"/config/custom_components/alexa_media/sensor.py\", line 186, in _fix_alarm_date_time\r\n    value[1][self._sensor_property] = timezone.localize(naive_time)\r\n  File \"/usr/local/lib/python3.7/site-packages/pytz/tzinfo.py\", line 317, in localize\r\n    if dt.tzinfo is not None:\r\nAttributeError: 'NoneType' object has no attribute 'tzinfo'\r\n```\r\n\r\n**Additional context**\r\nAdd any other context about the problem here. \r\n", "reactions": {"url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/501/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/501/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/496", "repository_url": "https://api.github.com/repos/custom-components/alexa_media_player", "labels_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/496/labels{/name}", "comments_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/496/comments", "events_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/496/events", "html_url": "https://github.com/custom-components/alexa_media_player/issues/496", "id": 544337890, "node_id": "MDU6SXNzdWU1NDQzMzc4OTA=", "number": 496, "title": "KeyError in v.2.4.0 in ['media_player'][x].state == STATE_PLAYING)", "user": {"login": "caiosweet", "id": 24454580, "node_id": "MDQ6VXNlcjI0NDU0NTgw", "avatar_url": "https://avatars.githubusercontent.com/u/24454580?v=4", "gravatar_id": "", "url": "https://api.github.com/users/caiosweet", "html_url": "https://github.com/caiosweet", "followers_url": "https://api.github.com/users/caiosweet/followers", "following_url": "https://api.github.com/users/caiosweet/following{/other_user}", "gists_url": "https://api.github.com/users/caiosweet/gists{/gist_id}", "starred_url": "https://api.github.com/users/caiosweet/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/caiosweet/subscriptions", "organizations_url": "https://api.github.com/users/caiosweet/orgs", "repos_url": "https://api.github.com/users/caiosweet/repos", "events_url": "https://api.github.com/users/caiosweet/events{/privacy}", "received_events_url": "https://api.github.com/users/caiosweet/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 983327104, "node_id": "MDU6TGFiZWw5ODMzMjcxMDQ=", "url": "https://api.github.com/repos/custom-components/alexa_media_player/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2020-01-01T10:03:09Z", "updated_at": "2020-01-02T00:37:42Z", "closed_at": "2020-01-02T00:37:42Z", "author_association": "NONE", "active_lock_reason": null, "body": "**Describe the bug**\r\nAfter installed alexa_media v.2.4.0 error appears in log file.\r\nEverything seems to be working properly...\r\n\r\n**System details**\r\n - Home-assistant (0.103.5): \r\n - Hassio (Yes)\r\n - alexa_media  (Installed: v2.4.0):\r\n - alexapy (version from `pip show alexapy` or HA startup):\r\n\r\n**Logs**\r\nPlease provide [logs](https://github.com/custom-components/alexa_media_player/wiki/FAQ#how-do-i-enable-debug-logging-for-the-component). We'll be most likely asking for them anyway.\r\n```\r\n2020-01-01 10:47:45 ERROR (MainThread) [homeassistant.core] Error doing job: Task exception was never retrieved\r\nTraceback (most recent call last):\r\n  File \"/config/custom_components/alexa_media/media_player.py\", line 260, in _handle_event\r\n    await self.async_update()\r\n  File \"/config/custom_components/alexa_media/helpers.py\", line 143, in wrapper\r\n    result = await func(*args, **kwargs)\r\n  File \"/config/custom_components/alexa_media/media_player.py\", line 667, in async_update\r\n    no_throttle=True)\r\n  File \"/config/custom_components/alexa_media/helpers.py\", line 143, in wrapper\r\n    result = await func(*args, **kwargs)\r\n  File \"/config/custom_components/alexa_media/media_player.py\", line 371, in refresh\r\n    self._parent_clusters))\r\n  File \"/config/custom_components/alexa_media/media_player.py\", line 370, in <lambda>\r\n    ['media_player'][x].state == STATE_PLAYING),\r\nKeyError: 'a6cd9003eaf44edc83025260bd45382e'\r\n```\r\n", "reactions": {"url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/496/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/496/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/474", "repository_url": "https://api.github.com/repos/custom-components/alexa_media_player", "labels_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/474/labels{/name}", "comments_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/474/comments", "events_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/474/events", "html_url": "https://github.com/custom-components/alexa_media_player/issues/474", "id": 534128106, "node_id": "MDU6SXNzdWU1MzQxMjgxMDY=", "number": 474, "title": "Alarm control panel stopped working in 0.103", "user": {"login": "arsaboo", "id": 18319734, "node_id": "MDQ6VXNlcjE4MzE5NzM0", "avatar_url": "https://avatars.githubusercontent.com/u/18319734?v=4", "gravatar_id": "", "url": "https://api.github.com/users/arsaboo", "html_url": "https://github.com/arsaboo", "followers_url": "https://api.github.com/users/arsaboo/followers", "following_url": "https://api.github.com/users/arsaboo/following{/other_user}", "gists_url": "https://api.github.com/users/arsaboo/gists{/gist_id}", "starred_url": "https://api.github.com/users/arsaboo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/arsaboo/subscriptions", "organizations_url": "https://api.github.com/users/arsaboo/orgs", "repos_url": "https://api.github.com/users/arsaboo/repos", "events_url": "https://api.github.com/users/arsaboo/events{/privacy}", "received_events_url": "https://api.github.com/users/arsaboo/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 983327104, "node_id": "MDU6TGFiZWw5ODMzMjcxMDQ=", "url": "https://api.github.com/repos/custom-components/alexa_media_player/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2019-12-06T16:37:46Z", "updated_at": "2019-12-13T05:27:19Z", "closed_at": "2019-12-13T05:27:19Z", "author_association": "NONE", "active_lock_reason": null, "body": "Just updated to the 0.103.b0 and realized that the alarm control panel is not working. The only thing that I see in the logs is:\r\n```bash\r\n2019-12-06 11:32:39 ERROR (MainThread) [homeassistant.components.alarm_control_panel] Setup of platform alexa_media is taking longer than 60 seconds. Startup will proceed without waiting any longer.\r\n```\r\n\r\nThe media player works fine. \r\n\r\nBTW, there was a similar error with alarm panel with another custom component ([Aarlo](https://github.com/twrecked/hass-aarlo/issues/131)) that had to be fixed. ", "reactions": {"url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/474/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/474/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/459", "repository_url": "https://api.github.com/repos/custom-components/alexa_media_player", "labels_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/459/labels{/name}", "comments_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/459/comments", "events_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/459/events", "html_url": "https://github.com/custom-components/alexa_media_player/issues/459", "id": 520717567, "node_id": "MDU6SXNzdWU1MjA3MTc1Njc=", "number": 459, "title": "Unable to find service notify/alexa_media", "user": {"login": "sephrioth", "id": 4231328, "node_id": "MDQ6VXNlcjQyMzEzMjg=", "avatar_url": "https://avatars.githubusercontent.com/u/4231328?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sephrioth", "html_url": "https://github.com/sephrioth", "followers_url": "https://api.github.com/users/sephrioth/followers", "following_url": "https://api.github.com/users/sephrioth/following{/other_user}", "gists_url": "https://api.github.com/users/sephrioth/gists{/gist_id}", "starred_url": "https://api.github.com/users/sephrioth/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sephrioth/subscriptions", "organizations_url": "https://api.github.com/users/sephrioth/orgs", "repos_url": "https://api.github.com/users/sephrioth/repos", "events_url": "https://api.github.com/users/sephrioth/events{/privacy}", "received_events_url": "https://api.github.com/users/sephrioth/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 983327104, "node_id": "MDU6TGFiZWw5ODMzMjcxMDQ=", "url": "https://api.github.com/repos/custom-components/alexa_media_player/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 9, "created_at": "2019-11-11T03:22:50Z", "updated_at": "2019-11-25T02:43:50Z", "closed_at": "2019-11-25T02:43:50Z", "author_association": "NONE", "active_lock_reason": null, "body": "**Describe the bug**\r\nEvery restart to HA will cause this error \r\n\r\n> homeassistant.exceptions.ServiceNotFound: Unable to find service notify/alexa_media\r\n\r\n\r\n**To Reproduce**\r\nSteps to reproduce the behavior:\r\nRestart HA\r\n\r\n**Expected behavior**\r\nA clear and concise description of what you expected to happen.\r\n\r\n**Screenshots**\r\nIf applicable, add screenshots to help explain your problem.\r\n\r\n**System details**\r\n - Home-assistant (version): 0.101.3 from Docker\r\n - Hassio (Yes/No): No\r\n - alexa_media  (version from `const.py` or HA startup): 2.3.3 / 2.3.4\r\n - alexapy (version from `pip show alexapy` or HA startup):\r\n\r\n**Logs**\r\n\r\n> ERROR (MainThread) [homeassistant.core] Error doing job: Task exception was never retrieved\r\nTraceback (most recent call last):\r\n  File \"/usr/src/homeassistant/homeassistant/helpers/script.py\", line 190, in async_run\r\n    await self._handle_action(action, variables, context)\r\n  File \"/usr/src/homeassistant/homeassistant/helpers/script.py\", line 274, in _handle_action\r\n    await self._actions[_determine_action(action)](action, variables, context)\r\n  File \"/usr/src/homeassistant/homeassistant/helpers/script.py\", line 357, in _async_call_service\r\n    context=context,\r\n  File \"/usr/src/homeassistant/homeassistant/helpers/service.py\", line 97, in async_call_from_config\r\n    domain, service_name, service_data, blocking=blocking, context=context\r\n  File \"/usr/src/homeassistant/homeassistant/core.py\", line 1211, in async_call\r\n    raise ServiceNotFound(domain, service) from None\r\nhomeassistant.exceptions.ServiceNotFound: Unable to find service notify/alexa_media\r\n\r\n**Additional context**\r\nAfter remove the previous alexa_media.xxx@gmail.com.pickle file, then restart HA and add Alexa again can make it work again. But restart HA will reproduce this issue.\r\n", "reactions": {"url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/459/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/459/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/451", "repository_url": "https://api.github.com/repos/custom-components/alexa_media_player", "labels_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/451/labels{/name}", "comments_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/451/comments", "events_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/451/events", "html_url": "https://github.com/custom-components/alexa_media_player/issues/451", "id": 512889838, "node_id": "MDU6SXNzdWU1MTI4ODk4Mzg=", "number": 451, "title": "ValueError: Config entry has already been setup!", "user": {"login": "denverpilot", "id": 29763059, "node_id": "MDQ6VXNlcjI5NzYzMDU5", "avatar_url": "https://avatars.githubusercontent.com/u/29763059?v=4", "gravatar_id": "", "url": "https://api.github.com/users/denverpilot", "html_url": "https://github.com/denverpilot", "followers_url": "https://api.github.com/users/denverpilot/followers", "following_url": "https://api.github.com/users/denverpilot/following{/other_user}", "gists_url": "https://api.github.com/users/denverpilot/gists{/gist_id}", "starred_url": "https://api.github.com/users/denverpilot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/denverpilot/subscriptions", "organizations_url": "https://api.github.com/users/denverpilot/orgs", "repos_url": "https://api.github.com/users/denverpilot/repos", "events_url": "https://api.github.com/users/denverpilot/events{/privacy}", "received_events_url": "https://api.github.com/users/denverpilot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 983327104, "node_id": "MDU6TGFiZWw5ODMzMjcxMDQ=", "url": "https://api.github.com/repos/custom-components/alexa_media_player/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 8, "created_at": "2019-10-26T21:51:18Z", "updated_at": "2020-04-20T04:01:53Z", "closed_at": "2020-04-20T04:01:53Z", "author_association": "NONE", "active_lock_reason": null, "body": "I am seeing errors saying certain items are \"already setup\" at startup on a system with both Nabu Casa and this community integration combined.\r\n\r\nI assume that's the cause anyway... having a hard time determining which one is running first and which is throwing the error.\r\n\r\nI also assume I could probably disable the items that this integration tries to do and only leave the ones the Nebu Casa one doesn't do, activated, but not sure if that'll break things.   Not sure if it would break nice things like the add-on being able to do TTS while the paid integration doesn't.\r\n\r\nI suppose it might be nice if the add on detected an existing integration and skipped those items automatically? \r\n\r\nOverall the bug seems harmless. Just reporting for folks who might see similar at startup.\r\n\r\n - Home-assistant (version): 0.100.3\r\n - Hassio (Yes/No): Yes\r\n - Version: 2.3.4 from HACS\r\n\r\n```\r\n2019-10-26 14:43:05 ERROR (MainThread) [homeassistant.config_entries] Error setting up entry ***REDACTED*** - amazon.com for media_player\r\nTraceback (most recent call last):\r\n  File \"/usr/src/homeassistant/homeassistant/config_entries.py\", line 190, in async_setup\r\n    hass, self\r\n  File \"/usr/src/homeassistant/homeassistant/components/media_player/__init__.py\", line 340, in async_setup_entry\r\n    return await hass.data[DOMAIN].async_setup_entry(entry)\r\n  File \"/usr/src/homeassistant/homeassistant/helpers/entity_component.py\", line 151, in async_setup_entry\r\n    raise ValueError(\"Config entry has already been setup!\")\r\nValueError: Config entry has already been setup!\r\n2019-10-26 14:43:05 ERROR (MainThread) [homeassistant.config_entries] Error setting up entry ***REDACTED*** - amazon.com for alarm_control_panel\r\nTraceback (most recent call last):\r\n  File \"/usr/src/homeassistant/homeassistant/config_entries.py\", line 190, in async_setup\r\n    hass, self\r\n  File \"/usr/src/homeassistant/homeassistant/components/alarm_control_panel/__init__.py\", line 74, in async_setup_entry\r\n    return await hass.data[DOMAIN].async_setup_entry(entry)\r\n  File \"/usr/src/homeassistant/homeassistant/helpers/entity_component.py\", line 151, in async_setup_entry\r\n    raise ValueError(\"Config entry has already been setup!\")\r\nValueError: Config entry has already been setup!\r\n2019-10-26 14:43:05 ERROR (MainThread) [homeassistant.config_entries] Error setting up entry ***REDACTED*** - amazon.com for switch\r\nTraceback (most recent call last):\r\n  File \"/usr/src/homeassistant/homeassistant/config_entries.py\", line 190, in async_setup\r\n    hass, self\r\n  File \"/usr/src/homeassistant/homeassistant/components/switch/__init__.py\", line 79, in async_setup_entry\r\n    return await hass.data[DOMAIN].async_setup_entry(entry)\r\n  File \"/usr/src/homeassistant/homeassistant/helpers/entity_component.py\", line 151, in async_setup_entry\r\n    raise ValueError(\"Config entry has already been setup!\")\r\nValueError: Config entry has already been setup!\r\n2019-10-26 14:43:05 ERROR (MainThread) [homeassistant.config_entries] Error setting up entry ***REDACTED*** - amazon.com for sensor\r\nTraceback (most recent call last):\r\n  File \"/usr/src/homeassistant/homeassistant/config_entries.py\", line 190, in async_setup\r\n    hass, self\r\n  File \"/usr/src/homeassistant/homeassistant/components/sensor/__init__.py\", line 60, in async_setup_entry\r\n    return await hass.data[DOMAIN].async_setup_entry(entry)\r\n  File \"/usr/src/homeassistant/homeassistant/helpers/entity_component.py\", line 151, in async_setup_entry\r\n    raise ValueError(\"Config entry has already been setup!\")\r\nValueError: Config entry has already been setup!**System details**```\r\n", "reactions": {"url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/451/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/451/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/443", "repository_url": "https://api.github.com/repos/custom-components/alexa_media_player", "labels_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/443/labels{/name}", "comments_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/443/comments", "events_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/443/events", "html_url": "https://github.com/custom-components/alexa_media_player/issues/443", "id": 508219803, "node_id": "MDU6SXNzdWU1MDgyMTk4MDM=", "number": 443, "title": "Status for battery-powered devices that turn off does not go unavailable", "user": {"login": "alandtse", "id": 7086117, "node_id": "MDQ6VXNlcjcwODYxMTc=", "avatar_url": "https://avatars.githubusercontent.com/u/7086117?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alandtse", "html_url": "https://github.com/alandtse", "followers_url": "https://api.github.com/users/alandtse/followers", "following_url": "https://api.github.com/users/alandtse/following{/other_user}", "gists_url": "https://api.github.com/users/alandtse/gists{/gist_id}", "starred_url": "https://api.github.com/users/alandtse/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alandtse/subscriptions", "organizations_url": "https://api.github.com/users/alandtse/orgs", "repos_url": "https://api.github.com/users/alandtse/repos", "events_url": "https://api.github.com/users/alandtse/events{/privacy}", "received_events_url": "https://api.github.com/users/alandtse/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 983327104, "node_id": "MDU6TGFiZWw5ODMzMjcxMDQ=", "url": "https://api.github.com/repos/custom-components/alexa_media_player/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2019-10-17T04:01:20Z", "updated_at": "2020-01-15T08:53:29Z", "closed_at": "2020-01-15T08:53:29Z", "author_association": "COLLABORATOR", "active_lock_reason": null, "body": "![bild2](https://user-images.githubusercontent.com/53475532/66715529-b8202c80-edc4-11e9-9c7c-a51627af0254.JPG)\r\n\r\n\r\n[home-assistant.log](https://github.com/custom-components/alexa_media_player/files/3721724/home-assistant.log)\r\n\r\nHere is a current log file.\r\nHA Reboot. Garten and Garage shows in HA Standby, on the other side they are offline (see Picture)\r\nGarage was switched on, garden was switched on.\r\nRadio KW was played on garten and finished again.\r\nGarten shut off, garage shut off.\r\n\r\nAfter that:\r\nThe status on both sides stays online (Both should be offline because switched off)\r\n\r\n![bild3](https://user-images.githubusercontent.com/53475532/66715623-b99e2480-edc5-11e9-9b1a-3b5ce2a4265e.JPG)\r\n\r\nAfter about 5 Minutes:\r\n\r\n![bild4](https://user-images.githubusercontent.com/53475532/66715709-c40cee00-edc6-11e9-98ca-075914c44e16.JPG)\r\n\r\n_Originally posted by @funkschrauber in https://github.com/custom-components/alexa_media_player/issues/420#issuecomment-541414339_", "reactions": {"url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/443/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/443/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/440", "repository_url": "https://api.github.com/repos/custom-components/alexa_media_player", "labels_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/440/labels{/name}", "comments_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/440/comments", "events_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/440/events", "html_url": "https://github.com/custom-components/alexa_media_player/issues/440", "id": 507568834, "node_id": "MDU6SXNzdWU1MDc1Njg4MzQ=", "number": 440, "title": "Sensors for next alarm, timer and reminder all show as unavailable", "user": {"login": "thewazz1", "id": 577244, "node_id": "MDQ6VXNlcjU3NzI0NA==", "avatar_url": "https://avatars.githubusercontent.com/u/577244?v=4", "gravatar_id": "", "url": "https://api.github.com/users/thewazz1", "html_url": "https://github.com/thewazz1", "followers_url": "https://api.github.com/users/thewazz1/followers", "following_url": "https://api.github.com/users/thewazz1/following{/other_user}", "gists_url": "https://api.github.com/users/thewazz1/gists{/gist_id}", "starred_url": "https://api.github.com/users/thewazz1/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/thewazz1/subscriptions", "organizations_url": "https://api.github.com/users/thewazz1/orgs", "repos_url": "https://api.github.com/users/thewazz1/repos", "events_url": "https://api.github.com/users/thewazz1/events{/privacy}", "received_events_url": "https://api.github.com/users/thewazz1/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 983327104, "node_id": "MDU6TGFiZWw5ODMzMjcxMDQ=", "url": "https://api.github.com/repos/custom-components/alexa_media_player/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 18, "created_at": "2019-10-16T02:00:58Z", "updated_at": "2019-10-24T20:15:24Z", "closed_at": "2019-10-24T20:15:24Z", "author_association": "NONE", "active_lock_reason": null, "body": "**Describe the bug**\r\nThe sensors in Home Assistant for the next alarm, timer and reminder all show as unavailable for each of my Echo\u2019s. Appears that this error from HA log may be related:\r\n\r\nError while setting up platform alexa_media\r\nTraceback (most recent call last):\r\n  File \"/usr/src/homeassistant/homeassistant/helpers/entity_platform.py\", line 150, in _async_setup_platform\r\n    await asyncio.wait_for(asyncio.shield(task), SLOW_SETUP_MAX_WAIT)\r\n  File \"/usr/local/lib/python3.7/asyncio/tasks.py\", line 442, in wait_for\r\n    return fut.result()\r\n  File \"/config/custom_components/alexa_media/sensor.py\", line 128, in async_setup_entry\r\n    discovery_info=None)\r\n  File \"/config/custom_components/alexa_media/helpers.py\", line 111, in wrapper\r\n    result = await func(*args, **kwargs)\r\n  File \"/config/custom_components/alexa_media/sensor.py\", line 89, in async_setup_platform\r\n    account)\r\n  File \"/config/custom_components/alexa_media/sensor.py\", line 324, in __init__\r\n    'mdi:alarm')\r\n  File \"/config/custom_components/alexa_media/sensor.py\", line 165, in __init__\r\n    self._all = list(map(self._fix_alarm_date_time, self._all))\r\n  File \"/config/custom_components/alexa_media/sensor.py\", line 176, in _fix_alarm_date_time\r\n    value[1][self._sensor_property] = timezone.localize(naive_time)\r\n  File \"/usr/local/lib/python3.7/site-packages/pytz/tzinfo.py\", line 317, in localize\r\n    if dt.tzinfo is not None:\r\nAttributeError: 'NoneType' object has no attribute 'tzinfo'\r\n\r\n**To Reproduce**\r\nSteps to reproduce the behavior:\r\nNo steps required, showing up in the Lovelace GUI\r\n\r\n**Expected behavior**\r\nShould be getting next alarm time/date instead of triangle showing unavailable. \r\n\r\n**Screenshots**\r\nIf applicable, add screenshots to help explain your problem.\r\n\r\n**System details**\r\n - Home-assistant (version): 100.2\r\n - Hassio (Yes/No): Yes (Please note you may have to restart hassio 2-3 times to load the latest version of alexapy after an update. This looks like a HA bug).\r\n - alexa_media  (version from `const.py` or HA startup): 2.3.3\r\n - alexapy (version from `pip show alexapy` or HA startup):1.3.2\r\n\r\n**Logs**\r\nPlease provide [logs](https://github.com/custom-components/alexa_media_player/wiki/FAQ#how-do-i-enable-debug-logging-for-the-component). We'll be most likely asking for them anyway.\r\n\r\n**Additional context**\r\nAdd any other context about the problem here. \r\n", "reactions": {"url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/440/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/440/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/430", "repository_url": "https://api.github.com/repos/custom-components/alexa_media_player", "labels_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/430/labels{/name}", "comments_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/430/comments", "events_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/430/events", "html_url": "https://github.com/custom-components/alexa_media_player/issues/430", "id": 506214557, "node_id": "MDU6SXNzdWU1MDYyMTQ1NTc=", "number": 430, "title": "Alexa components not updating", "user": {"login": "cunninr2", "id": 25829766, "node_id": "MDQ6VXNlcjI1ODI5NzY2", "avatar_url": "https://avatars.githubusercontent.com/u/25829766?v=4", "gravatar_id": "", "url": "https://api.github.com/users/cunninr2", "html_url": "https://github.com/cunninr2", "followers_url": "https://api.github.com/users/cunninr2/followers", "following_url": "https://api.github.com/users/cunninr2/following{/other_user}", "gists_url": "https://api.github.com/users/cunninr2/gists{/gist_id}", "starred_url": "https://api.github.com/users/cunninr2/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/cunninr2/subscriptions", "organizations_url": "https://api.github.com/users/cunninr2/orgs", "repos_url": "https://api.github.com/users/cunninr2/repos", "events_url": "https://api.github.com/users/cunninr2/events{/privacy}", "received_events_url": "https://api.github.com/users/cunninr2/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 983327104, "node_id": "MDU6TGFiZWw5ODMzMjcxMDQ=", "url": "https://api.github.com/repos/custom-components/alexa_media_player/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}, {"id": 983327105, "node_id": "MDU6TGFiZWw5ODMzMjcxMDU=", "url": "https://api.github.com/repos/custom-components/alexa_media_player/labels/duplicate", "name": "duplicate", "color": "cfd3d7", "default": true, "description": "This issue or pull request already exists"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2019-10-12T17:27:12Z", "updated_at": "2019-10-13T23:17:43Z", "closed_at": "2019-10-13T07:50:12Z", "author_association": "NONE", "active_lock_reason": null, "body": "**Describe the bug**\r\nThe alexa devices in my house have stopped updating the media status and associated meta data.\r\n\r\n**To Reproduce**\r\nSteps to reproduce the behavior:\r\n1. Wipe alexa media player from home assistant installation. remove all references in configuration files and remove pickle file.\r\n2. Install alexa media player from HACS and then add the integration and enter credentials with amazon.co.uk as the services url.\r\n3. reboot Hassio twice as recommended\r\n4. instruct echo dot to play song from amazon music.\r\n5. songs plays and media player component shows the status as playing and the correct meta data for the song\r\n6. ask echo dot to pause. Echo dot does pause, but home assistant component status does not change.\r\n7. ask echo dot to play new song. echo dot plays new song but media component in home assistant does not update.\r\n\r\n\r\n\r\n**Expected behavior**\r\nexpected metadata to update within a few seconds of media changing.\r\n\r\n**Screenshots**\r\nIf applicable, add screenshots to help explain your problem.\r\n\r\n**System details**\r\n - Home-assistant (version): 0.100.1\r\n - Hassio (Yes/No): Yes\r\n - alexa_media  (version from `const.py` or HA startup): __version__ = '2.3.2'\r\n - alexapy (version from `pip show alexapy` or HA startup): v2.3.2\r\n\r\n**Logs**\r\nPlease provide [logs](https://github.com/custom-components/alexa_media_player/wiki/FAQ#how-do-i-enable-debug-logging-for-the-component). We'll be most likely asking for them anyway.\r\n\r\nlog attached. \r\n\r\n[log file.txt](https://github.com/custom-components/alexa_media_player/files/3720959/log.file.txt)\r\n![Capture](https://user-images.githubusercontent.com/25829766/66705384-e0088500-ed1d-11e9-9960-7bf2d63f0501.PNG)\r\n\r\n**Additional context**\r\nAdd any other context about the problem here. \r\n", "reactions": {"url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/430/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/430/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/428", "repository_url": "https://api.github.com/repos/custom-components/alexa_media_player", "labels_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/428/labels{/name}", "comments_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/428/comments", "events_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/428/events", "html_url": "https://github.com/custom-components/alexa_media_player/issues/428", "id": 506155435, "node_id": "MDU6SXNzdWU1MDYxNTU0MzU=", "number": 428, "title": "RuntimeError: Cannot be called from within the event loop - request_configuration", "user": {"login": "itajackass", "id": 17260726, "node_id": "MDQ6VXNlcjE3MjYwNzI2", "avatar_url": "https://avatars.githubusercontent.com/u/17260726?v=4", "gravatar_id": "", "url": "https://api.github.com/users/itajackass", "html_url": "https://github.com/itajackass", "followers_url": "https://api.github.com/users/itajackass/followers", "following_url": "https://api.github.com/users/itajackass/following{/other_user}", "gists_url": "https://api.github.com/users/itajackass/gists{/gist_id}", "starred_url": "https://api.github.com/users/itajackass/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/itajackass/subscriptions", "organizations_url": "https://api.github.com/users/itajackass/orgs", "repos_url": "https://api.github.com/users/itajackass/repos", "events_url": "https://api.github.com/users/itajackass/events{/privacy}", "received_events_url": "https://api.github.com/users/itajackass/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 983327104, "node_id": "MDU6TGFiZWw5ODMzMjcxMDQ=", "url": "https://api.github.com/repos/custom-components/alexa_media_player/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": {"login": "alandtse", "id": 7086117, "node_id": "MDQ6VXNlcjcwODYxMTc=", "avatar_url": "https://avatars.githubusercontent.com/u/7086117?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alandtse", "html_url": "https://github.com/alandtse", "followers_url": "https://api.github.com/users/alandtse/followers", "following_url": "https://api.github.com/users/alandtse/following{/other_user}", "gists_url": "https://api.github.com/users/alandtse/gists{/gist_id}", "starred_url": "https://api.github.com/users/alandtse/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alandtse/subscriptions", "organizations_url": "https://api.github.com/users/alandtse/orgs", "repos_url": "https://api.github.com/users/alandtse/repos", "events_url": "https://api.github.com/users/alandtse/events{/privacy}", "received_events_url": "https://api.github.com/users/alandtse/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "alandtse", "id": 7086117, "node_id": "MDQ6VXNlcjcwODYxMTc=", "avatar_url": "https://avatars.githubusercontent.com/u/7086117?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alandtse", "html_url": "https://github.com/alandtse", "followers_url": "https://api.github.com/users/alandtse/followers", "following_url": "https://api.github.com/users/alandtse/following{/other_user}", "gists_url": "https://api.github.com/users/alandtse/gists{/gist_id}", "starred_url": "https://api.github.com/users/alandtse/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alandtse/subscriptions", "organizations_url": "https://api.github.com/users/alandtse/orgs", "repos_url": "https://api.github.com/users/alandtse/repos", "events_url": "https://api.github.com/users/alandtse/events{/privacy}", "received_events_url": "https://api.github.com/users/alandtse/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 3, "created_at": "2019-10-12T08:38:36Z", "updated_at": "2019-10-13T07:46:31Z", "closed_at": "2019-10-13T07:46:31Z", "author_association": "NONE", "active_lock_reason": null, "body": "After upgrade on latest version, on HA 0.100.1 I get a notification to configure alexa media player via sms or email. Both options i try i get error popup\r\n\r\nFallita chiamata a servizio configurator/configure . Cannot be called from within the event loop", "reactions": {"url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/428/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/428/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/423", "repository_url": "https://api.github.com/repos/custom-components/alexa_media_player", "labels_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/423/labels{/name}", "comments_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/423/comments", "events_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/423/events", "html_url": "https://github.com/custom-components/alexa_media_player/issues/423", "id": 505675095, "node_id": "MDU6SXNzdWU1MDU2NzUwOTU=", "number": 423, "title": "KeyError: 'configurator' after Unauthorized exception", "user": {"login": "alandtse", "id": 7086117, "node_id": "MDQ6VXNlcjcwODYxMTc=", "avatar_url": "https://avatars.githubusercontent.com/u/7086117?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alandtse", "html_url": "https://github.com/alandtse", "followers_url": "https://api.github.com/users/alandtse/followers", "following_url": "https://api.github.com/users/alandtse/following{/other_user}", "gists_url": "https://api.github.com/users/alandtse/gists{/gist_id}", "starred_url": "https://api.github.com/users/alandtse/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alandtse/subscriptions", "organizations_url": "https://api.github.com/users/alandtse/orgs", "repos_url": "https://api.github.com/users/alandtse/repos", "events_url": "https://api.github.com/users/alandtse/events{/privacy}", "received_events_url": "https://api.github.com/users/alandtse/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 983327104, "node_id": "MDU6TGFiZWw5ODMzMjcxMDQ=", "url": "https://api.github.com/repos/custom-components/alexa_media_player/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2019-10-11T06:59:05Z", "updated_at": "2019-10-12T07:15:44Z", "closed_at": "2019-10-12T07:15:44Z", "author_association": "COLLABORATOR", "active_lock_reason": null, "body": "Updated to 2.3.1 today and received this error when I was about to re-test:\r\n\r\n```\r\n2019-10-09 15:58:30 ERROR (MainThread) [homeassistant.components.websocket_api.http.connection.139875941900688] 'configurator'\r\nTraceback (most recent call last):\r\n  File \"/config/custom_components/alexa_media/helpers.py\", line 143, in wrapper\r\n    result = await func(*args, **kwargs)\r\n  File \"/config/custom_components/alexa_media/media_player.py\", line 796, in async_play_media\r\n    customer_id=self._customer_id, **kwargs)\r\n  File \"/usr/local/lib/python3.7/site-packages/alexapy/alexaapi.py\", line 291, in play_music\r\n    musicProviderId=provider_id)\r\n  File \"/usr/local/lib/python3.7/site-packages/alexapy/alexaapi.py\", line 208, in send_sequence\r\n    data=data)\r\n  File \"/usr/local/lib/python3.7/site-packages/alexapy/alexaapi.py\", line 90, in _post_request\r\n    return await self._request('post', uri, data)\r\n  File \"/usr/local/lib/python3.7/site-packages/alexapy/alexaapi.py\", line 82, in _request\r\n    raise AlexapyLoginError(response.reason)\r\nalexapy.errors.AlexapyLoginError: Unauthorized\r\n\r\nDuring handling of the above exception, another exception occurred:\r\n\r\nTraceback (most recent call last):\r\n  File \"/usr/src/homeassistant/homeassistant/components/websocket_api/commands.py\", line 130, in handle_call_service\r\n    connection.context(msg),\r\n  File \"/usr/src/homeassistant/homeassistant/core.py\", line 1234, in async_call\r\n    await asyncio.shield(self._execute_service(handler, service_call))\r\n  File \"/usr/src/homeassistant/homeassistant/core.py\", line 1259, in _execute_service\r\n    await handler.func(service_call)\r\n  File \"/usr/src/homeassistant/homeassistant/helpers/entity_component.py\", line 213, in handle_service\r\n    self._platforms.values(), func, call, service_name, required_features\r\n  File \"/usr/src/homeassistant/homeassistant/helpers/service.py\", line 349, in entity_service_call\r\n    future.result()  # pop exception if have\r\n  File \"/usr/src/homeassistant/homeassistant/helpers/service.py\", line 373, in _handle_service_platform_call\r\n    await func(entity, data)\r\n  File \"/config/custom_components/alexa_media/helpers.py\", line 159, in wrapper\r\n    ['configurator'])):\r\nKeyError: 'configurator'\r\n```\r\n\r\n\r\nFull log:\r\n\r\n[alexa_media.txt](https://github.com/custom-components/alexa_media_player/files/3709398/alexa_media.txt)\r\n\r\nRestarted with 2.3.1 and configurator dialog appeared, but did not finish, disapeared without a ERROR level log after hitting confirm to logon -- reverted to 2.3.0 and existing pickle was used without any issue.\r\n\r\n_Originally posted by @walthowd in https://github.com/custom-components/alexa_media_player/issues/406#issuecomment-540195631_", "reactions": {"url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/423/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/423/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/402", "repository_url": "https://api.github.com/repos/custom-components/alexa_media_player", "labels_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/402/labels{/name}", "comments_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/402/comments", "events_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/402/events", "html_url": "https://github.com/custom-components/alexa_media_player/issues/402", "id": 500932760, "node_id": "MDU6SXNzdWU1MDA5MzI3NjA=", "number": 402, "title": "next_alarm not parsed correctly for MusicAlarm", "user": {"login": "ronmichel", "id": 40127030, "node_id": "MDQ6VXNlcjQwMTI3MDMw", "avatar_url": "https://avatars.githubusercontent.com/u/40127030?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ronmichel", "html_url": "https://github.com/ronmichel", "followers_url": "https://api.github.com/users/ronmichel/followers", "following_url": "https://api.github.com/users/ronmichel/following{/other_user}", "gists_url": "https://api.github.com/users/ronmichel/gists{/gist_id}", "starred_url": "https://api.github.com/users/ronmichel/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ronmichel/subscriptions", "organizations_url": "https://api.github.com/users/ronmichel/orgs", "repos_url": "https://api.github.com/users/ronmichel/repos", "events_url": "https://api.github.com/users/ronmichel/events{/privacy}", "received_events_url": "https://api.github.com/users/ronmichel/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 983327104, "node_id": "MDU6TGFiZWw5ODMzMjcxMDQ=", "url": "https://api.github.com/repos/custom-components/alexa_media_player/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2019-10-01T14:24:00Z", "updated_at": "2019-10-09T07:13:54Z", "closed_at": "2019-10-09T07:13:54Z", "author_association": "NONE", "active_lock_reason": null, "body": "**Bug description**: next_alarm not parsed correctly if  `\"type\":\"MusicAlarm\"`\r\n\r\n- Alarm is set and ON\r\n- Following data is shown on https://alexa.amazon.de/api/notifications:\r\n`{\"notifications\":[{\"alarmTime\":1569993300000,\"automationId\":null,\"createdDate\":1564129492110,\"deferredAtTime\":null,\"deviceSerialNumber\":\"X010XX123456789X\",\"deviceType\":\"A3S5BH2HU6VAYF\",\"extensibleAttribute\":null,\"geoLocationTriggerData\":null,\"id\":\"A3S5BH2HU6VAYF-G090LF107185157H-be6e3935-5132-3df4-949d-4e2cc032ecae\",\"lastOccurrenceTimeInMilli\":0,\"lastUpdatedDate\":0,\"musicAlarmId\":\"6f8c50e0-382b-4445-b201-73bd5f312982\",\"musicEntity\":\"BAYERN 3\",\"notificationIndex\":\"be6e3935-5132-3df4-949d-4e2cc032ecae\",\"originalDate\":\"2019-10-02\",\"originalTime\":\"07:15:00.000\",\"personProfile\":null,\"provider\":\"TuneIn\",\"rRuleData\":null,\"recurrenceEligibility\":false,\"recurringPattern\":\"XXXX-WD\",\"remainingTime\":0,\"reminderAppLabel\":null,\"reminderLabel\":null,\"reminderSubLabel\":null,\"skillInfo\":null,\"snoozedToTime\":null,\"sound\":{\"displayName\":\"Simple Alarm\",\"folder\":null,\"id\":\"system_alerts_melodic_01\",\"providerId\":\"ECHO\",\"sampleUrl\":\"https://s3.amazonaws.com/deeappservice.prod.notificationtones/system_alerts_melodic_01.mp3\"},\"status\":\"ON\",\"targetPersonProfiles\":null,\"timeZoneId\":null,\"timerLabel\":null,\"tmwNotificationProperties\":null,\"triggerTime\":0,\"type\":\"MusicAlarm\",\"version\":\"424\"}]}`\r\n- Sensor in HA shows:\r\n```\r\nstate: null\r\nrecurrence: null\r\ntotal_active: 0\r\ntotal_all: 0\r\nsorted_active: []\r\nsorted_all: []\r\nfriendly_name: Echo next Alarm\r\nicon: mdi:alarm\r\ndevice_class: timestamp\r\n```\r\n**Expected**: 1 active alarm, set at 7:15 weekdays (together with and like `\"type\": \"Alarm\"`)\r\n", "reactions": {"url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/402/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/402/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/401", "repository_url": "https://api.github.com/repos/custom-components/alexa_media_player", "labels_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/401/labels{/name}", "comments_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/401/comments", "events_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/401/events", "html_url": "https://github.com/custom-components/alexa_media_player/issues/401", "id": 500235756, "node_id": "MDU6SXNzdWU1MDAyMzU3NTY=", "number": 401, "title": "Unknown error: expected string or bytes-like object during configuration", "user": {"login": "tulindo", "id": 35487880, "node_id": "MDQ6VXNlcjM1NDg3ODgw", "avatar_url": "https://avatars.githubusercontent.com/u/35487880?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tulindo", "html_url": "https://github.com/tulindo", "followers_url": "https://api.github.com/users/tulindo/followers", "following_url": "https://api.github.com/users/tulindo/following{/other_user}", "gists_url": "https://api.github.com/users/tulindo/gists{/gist_id}", "starred_url": "https://api.github.com/users/tulindo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tulindo/subscriptions", "organizations_url": "https://api.github.com/users/tulindo/orgs", "repos_url": "https://api.github.com/users/tulindo/repos", "events_url": "https://api.github.com/users/tulindo/events{/privacy}", "received_events_url": "https://api.github.com/users/tulindo/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 983327104, "node_id": "MDU6TGFiZWw5ODMzMjcxMDQ=", "url": "https://api.github.com/repos/custom-components/alexa_media_player/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2019-09-30T12:11:22Z", "updated_at": "2019-10-09T07:13:54Z", "closed_at": "2019-10-09T07:13:54Z", "author_association": "NONE", "active_lock_reason": null, "body": "Home Assistant 0.99.3, alexy py 1.3.1, alexa media player 2.3.0\r\n\r\nAdding alexa media player informations (username, password and amazon domain) in configuration.yaml and starting HA, I correctly get a notification saying that a new device needs to be configured.\r\nClick configure and capcha popup appears but when I insert the capcha I'm getting a red message:\r\nUnknown error, please report with logs\r\n\r\nPlease find log attached.\r\n  Paolo\r\nPS: Same error in case of manual integration\r\n\r\n[home-assistant.log](https://github.com/custom-components/alexa_media_player/files/3670957/home-assistant.log)\r\n", "reactions": {"url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/401/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/401/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/397", "repository_url": "https://api.github.com/repos/custom-components/alexa_media_player", "labels_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/397/labels{/name}", "comments_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/397/comments", "events_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/397/events", "html_url": "https://github.com/custom-components/alexa_media_player/issues/397", "id": 499898013, "node_id": "MDU6SXNzdWU0OTk4OTgwMTM=", "number": 397, "title": "The status of the devices is not updated to reflect playing state", "user": {"login": "funkschrauber", "id": 53475532, "node_id": "MDQ6VXNlcjUzNDc1NTMy", "avatar_url": "https://avatars.githubusercontent.com/u/53475532?v=4", "gravatar_id": "", "url": "https://api.github.com/users/funkschrauber", "html_url": "https://github.com/funkschrauber", "followers_url": "https://api.github.com/users/funkschrauber/followers", "following_url": "https://api.github.com/users/funkschrauber/following{/other_user}", "gists_url": "https://api.github.com/users/funkschrauber/gists{/gist_id}", "starred_url": "https://api.github.com/users/funkschrauber/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/funkschrauber/subscriptions", "organizations_url": "https://api.github.com/users/funkschrauber/orgs", "repos_url": "https://api.github.com/users/funkschrauber/repos", "events_url": "https://api.github.com/users/funkschrauber/events{/privacy}", "received_events_url": "https://api.github.com/users/funkschrauber/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 983327104, "node_id": "MDU6TGFiZWw5ODMzMjcxMDQ=", "url": "https://api.github.com/repos/custom-components/alexa_media_player/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 27, "created_at": "2019-09-29T10:38:43Z", "updated_at": "2019-10-13T15:46:18Z", "closed_at": "2019-10-13T07:50:32Z", "author_association": "NONE", "active_lock_reason": null, "body": "The status of the devices is not updated. If a device is available again, it will not be displayed, even if a device is no longer available.\r\n\r\nEDIT: Please fill out if you'd like me to understand.\r\n**Describe the bug**\r\nA clear and concise description of what the bug is.\r\n\r\n**To Reproduce**\r\nSteps to reproduce the behavior:\r\n1. Go to '...'\r\n2. Click on '....'\r\n3. Scroll down to '....'\r\n4. See error\r\n\r\n**Expected behavior**\r\nA clear and concise description of what you expected to happen.\r\n\r\n**Screenshots**\r\nIf applicable, add screenshots to help explain your problem.\r\n\r\n**System details**\r\n - Home-assistant (version): \r\n - Hassio (Yes/No): (Please note you may have to restart hassio 2-3 times to load the latest version of alexapy after an update. This looks like a HA bug).\r\n - alexa_media  (version from `const.py` or HA startup):\r\n - alexapy (version from `pip show alexapy` or HA startup):\r\n\r\n**Logs**\r\nPlease provide [logs](https://github.com/custom-components/alexa_media_player/wiki/FAQ#how-do-i-enable-debug-logging-for-the-component). We'll be most likely asking for them anyway.\r\n\r\n**Additional context**\r\nAdd any other context about the problem here. \r\n", "reactions": {"url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/397/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/397/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/387", "repository_url": "https://api.github.com/repos/custom-components/alexa_media_player", "labels_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/387/labels{/name}", "comments_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/387/comments", "events_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/387/events", "html_url": "https://github.com/custom-components/alexa_media_player/issues/387", "id": 496840748, "node_id": "MDU6SXNzdWU0OTY4NDA3NDg=", "number": 387, "title": "ConnectionResetError during Integration setup with config_flow", "user": {"login": "ramibouaoun", "id": 48555347, "node_id": "MDQ6VXNlcjQ4NTU1MzQ3", "avatar_url": "https://avatars.githubusercontent.com/u/48555347?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ramibouaoun", "html_url": "https://github.com/ramibouaoun", "followers_url": "https://api.github.com/users/ramibouaoun/followers", "following_url": "https://api.github.com/users/ramibouaoun/following{/other_user}", "gists_url": "https://api.github.com/users/ramibouaoun/gists{/gist_id}", "starred_url": "https://api.github.com/users/ramibouaoun/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ramibouaoun/subscriptions", "organizations_url": "https://api.github.com/users/ramibouaoun/orgs", "repos_url": "https://api.github.com/users/ramibouaoun/repos", "events_url": "https://api.github.com/users/ramibouaoun/events{/privacy}", "received_events_url": "https://api.github.com/users/ramibouaoun/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 983327104, "node_id": "MDU6TGFiZWw5ODMzMjcxMDQ=", "url": "https://api.github.com/repos/custom-components/alexa_media_player/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2019-09-22T22:21:16Z", "updated_at": "2019-09-29T06:02:55Z", "closed_at": "2019-09-29T06:02:55Z", "author_association": "NONE", "active_lock_reason": null, "body": "Home Assistant 0.99.2\r\nHACS alexa_media_player 2.2.1\r\n\r\n**custom_components/alexa_media/config_flow.py**\r\nError doing job: Task exception was never retrieved\r\nTraceback (most recent call last):\r\n  File \"/usr/local/lib/python3.7/site-packages/aiohttp/connector.py\", line 924, in _wrap_create_connection\r\n    await self._loop.create_connection(*args, **kwargs))\r\n  File \"/usr/local/lib/python3.7/asyncio/base_events.py\", line 981, in create_connection\r\n    ssl_handshake_timeout=ssl_handshake_timeout)\r\n  File \"/usr/local/lib/python3.7/asyncio/base_events.py\", line 1009, in _create_connection_transport\r\n    await waiter\r\nConnectionResetError\r\n\r\nThe above exception was the direct cause of the following exception:\r\n\r\nTraceback (most recent call last):\r\n  File \"/usr/src/homeassistant/homeassistant/data_entry_flow.py\", line 73, in async_init\r\n    return await self._async_handle_step(flow, flow.init_step, data)\r\n  File \"/usr/src/homeassistant/homeassistant/data_entry_flow.py\", line 132, in _async_handle_step\r\n    result: Dict = await getattr(flow, method)(user_input)\r\n  File \"/config/custom_components/alexa_media/config_flow.py\", line 138, in async_step_import\r\n    return await self.async_step_user(import_config)\r\n  File \"/config/custom_components/alexa_media/config_flow.py\", line 192, in async_step_user\r\n    await self.login.login_with_cookie()\r\n  File \"/usr/local/lib/python3.7/site-packages/alexapy/alexalogin.py\", line 168, in login_with_cookie\r\n    await self.login(cookies=self._cookies)\r\n  File \"/usr/local/lib/python3.7/site-packages/alexapy/alexalogin.py\", line 373, in login\r\n    ssl=self._ssl)\r\n  File \"/usr/local/lib/python3.7/site-packages/aiohttp/client.py\", line 476, in _request\r\n    timeout=real_timeout\r\n  File \"/usr/local/lib/python3.7/site-packages/aiohttp/connector.py\", line 522, in connect\r\n    proto = await self._create_connection(req, traces, timeout)\r\n  File \"/usr/local/lib/python3.7/site-packages/aiohttp/connector.py\", line 854, in _create_connection\r\n    req, traces, timeout)\r\n  File \"/usr/local/lib/python3.7/site-packages/aiohttp/connector.py\", line 992, in _create_direct_connection\r\n    raise last_exc\r\n  File \"/usr/local/lib/python3.7/site-packages/aiohttp/connector.py\", line 974, in _create_direct_connection\r\n    req=req, client_error=client_error)\r\n  File \"/usr/local/lib/python3.7/site-packages/aiohttp/connector.py\", line 931, in _wrap_create_connection\r\n    raise client_error(req.connection_key, exc) from exc\r\naiohttp.client_exceptions.ClientConnectorError: Cannot connect to host alexa.amazon.com:443 ssl:<ssl.SSLContext object at 0x7185a6f0> [None]\r\n\r\n\r\n\r\n\r\n**data_entry_flow.py  ERROR**\r\nError handling request\r\nTraceback (most recent call last):\r\n  File \"/usr/local/lib/python3.7/site-packages/aiohttp/web_protocol.py\", line 418, in start\r\n    resp = await task\r\n  File \"/usr/local/lib/python3.7/site-packages/aiohttp/web_app.py\", line 458, in _handle\r\n    resp = await handler(request)\r\n  File \"/usr/local/lib/python3.7/site-packages/aiohttp/web_middlewares.py\", line 119, in impl\r\n    return await handler(request)\r\n  File \"/usr/src/homeassistant/homeassistant/components/http/real_ip.py\", line 40, in real_ip_middleware\r\n    return await handler(request)\r\n  File \"/usr/src/homeassistant/homeassistant/components/http/ban.py\", line 73, in ban_middleware\r\n    return await handler(request)\r\n  File \"/usr/src/homeassistant/homeassistant/components/http/auth.py\", line 231, in auth_middleware\r\n    return await handler(request)\r\n  File \"/usr/src/homeassistant/homeassistant/components/http/view.py\", line 128, in handle\r\n    result = await result\r\n  File \"/usr/src/homeassistant/homeassistant/components/config/config_entries.py\", line 155, in get\r\n    return await super().get(request, flow_id)\r\n  File \"/usr/src/homeassistant/homeassistant/helpers/data_entry_flow.py\", line 78, in get\r\n    result = await self._flow_mgr.async_configure(flow_id)\r\n  File \"/usr/src/homeassistant/homeassistant/data_entry_flow.py\", line 86, in async_configure\r\n    if cur_step.get(\"data_schema\") is not None and user_input is not None:\r\nAttributeError: 'NoneType' object has no attribute 'get'", "reactions": {"url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/387/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/387/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/377", "repository_url": "https://api.github.com/repos/custom-components/alexa_media_player", "labels_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/377/labels{/name}", "comments_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/377/comments", "events_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/377/events", "html_url": "https://github.com/custom-components/alexa_media_player/issues/377", "id": 496620387, "node_id": "MDU6SXNzdWU0OTY2MjAzODc=", "number": 377, "title": "Config flow not processing include_devices or exclude_devices", "user": {"login": "alandtse", "id": 7086117, "node_id": "MDQ6VXNlcjcwODYxMTc=", "avatar_url": "https://avatars.githubusercontent.com/u/7086117?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alandtse", "html_url": "https://github.com/alandtse", "followers_url": "https://api.github.com/users/alandtse/followers", "following_url": "https://api.github.com/users/alandtse/following{/other_user}", "gists_url": "https://api.github.com/users/alandtse/gists{/gist_id}", "starred_url": "https://api.github.com/users/alandtse/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alandtse/subscriptions", "organizations_url": "https://api.github.com/users/alandtse/orgs", "repos_url": "https://api.github.com/users/alandtse/repos", "events_url": "https://api.github.com/users/alandtse/events{/privacy}", "received_events_url": "https://api.github.com/users/alandtse/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 983327104, "node_id": "MDU6TGFiZWw5ODMzMjcxMDQ=", "url": "https://api.github.com/repos/custom-components/alexa_media_player/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2019-09-21T06:29:10Z", "updated_at": "2019-09-22T10:37:42Z", "closed_at": "2019-09-22T10:37:42Z", "author_association": "COLLABORATOR", "active_lock_reason": null, "body": "**Describe the bug**\r\nConfig flow is not accepting any args for `exclude_devices` or `include_devices`\r\n**To Reproduce**\r\nSteps to reproduce the behavior:\r\n1. Add Alexa_media as an integration\r\n2. Fill in form case sensitive, without spaces and comma separated: `Guest Room,Office`\r\n3. Devices are not excluded automatically\r\n\r\n**Expected behavior**\r\nListed devices should be excluded\r\n**Screenshots**\r\nIf applicable, add screenshots to help explain your problem.\r\n\r\n**System details**\r\n - Home-assistant (version): 99.2\r\n - Hassio (Yes/No): (Please note you may have to restart hassio 2-3 times to load the latest version of alexapy after an update. This looks like a HA bug). Yes\r\n - alexa_media  (version from `const.py` or HA startup): 2.2.0\r\n - alexapy (version from `pip show alexapy` or HA startup): 1.2.0\r\n\r\n**Logs**\r\nPlease provide [logs](https://github.com/custom-components/alexa_media_player/wiki/FAQ#how-do-i-enable-debug-logging-for-the-component). We'll be most likely asking for them anyway.\r\n\r\n**Additional context**\r\nhttps://community.home-assistant.io/t/echo-devices-alexa-as-media-player-testers-needed/58639/3226?u=alandtse", "reactions": {"url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/377/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/377/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/374", "repository_url": "https://api.github.com/repos/custom-components/alexa_media_player", "labels_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/374/labels{/name}", "comments_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/374/comments", "events_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/374/events", "html_url": "https://github.com/custom-components/alexa_media_player/issues/374", "id": 495919622, "node_id": "MDU6SXNzdWU0OTU5MTk2MjI=", "number": 374, "title": "Alexa Media does not make status changes", "user": {"login": "Dielee", "id": 45101649, "node_id": "MDQ6VXNlcjQ1MTAxNjQ5", "avatar_url": "https://avatars.githubusercontent.com/u/45101649?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Dielee", "html_url": "https://github.com/Dielee", "followers_url": "https://api.github.com/users/Dielee/followers", "following_url": "https://api.github.com/users/Dielee/following{/other_user}", "gists_url": "https://api.github.com/users/Dielee/gists{/gist_id}", "starred_url": "https://api.github.com/users/Dielee/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Dielee/subscriptions", "organizations_url": "https://api.github.com/users/Dielee/orgs", "repos_url": "https://api.github.com/users/Dielee/repos", "events_url": "https://api.github.com/users/Dielee/events{/privacy}", "received_events_url": "https://api.github.com/users/Dielee/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 983327104, "node_id": "MDU6TGFiZWw5ODMzMjcxMDQ=", "url": "https://api.github.com/repos/custom-components/alexa_media_player/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}, {"id": 1246346849, "node_id": "MDU6TGFiZWwxMjQ2MzQ2ODQ5", "url": "https://api.github.com/repos/custom-components/alexa_media_player/labels/alexapy", "name": "alexapy", "color": "e23ba8", "default": false, "description": "Issue relates to the API"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 17, "created_at": "2019-09-19T17:00:11Z", "updated_at": "2019-09-23T05:48:48Z", "closed_at": "2019-09-22T10:37:41Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "**Describe the bug**\r\nAlexa Media does not make status changes\r\nas seen in #369 \r\n\r\n\r\n\r\n**System details**\r\n - Home-assistant (version): 0.99\r\n - Hassio (Yes/No): No\r\n - alexa_media  (version from `const.py` or HA startup): 2.2.0\r\n - alexapy (version from `pip show alexapy` or HA startup): 1.2.0\r\n\r\n**Logs**\r\nhttps://cloud.linusdietz.eu/index.php/s/rX6USo7jj1evikT\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/374/reactions", "total_count": 1, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/374/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/362", "repository_url": "https://api.github.com/repos/custom-components/alexa_media_player", "labels_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/362/labels{/name}", "comments_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/362/comments", "events_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/362/events", "html_url": "https://github.com/custom-components/alexa_media_player/issues/362", "id": 493591809, "node_id": "MDU6SXNzdWU0OTM1OTE4MDk=", "number": 362, "title": "ConnectionResetError in v2.x", "user": {"login": "somar05", "id": 38601295, "node_id": "MDQ6VXNlcjM4NjAxMjk1", "avatar_url": "https://avatars.githubusercontent.com/u/38601295?v=4", "gravatar_id": "", "url": "https://api.github.com/users/somar05", "html_url": "https://github.com/somar05", "followers_url": "https://api.github.com/users/somar05/followers", "following_url": "https://api.github.com/users/somar05/following{/other_user}", "gists_url": "https://api.github.com/users/somar05/gists{/gist_id}", "starred_url": "https://api.github.com/users/somar05/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/somar05/subscriptions", "organizations_url": "https://api.github.com/users/somar05/orgs", "repos_url": "https://api.github.com/users/somar05/repos", "events_url": "https://api.github.com/users/somar05/events{/privacy}", "received_events_url": "https://api.github.com/users/somar05/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 983327104, "node_id": "MDU6TGFiZWw5ODMzMjcxMDQ=", "url": "https://api.github.com/repos/custom-components/alexa_media_player/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}, {"id": 1246346849, "node_id": "MDU6TGFiZWwxMjQ2MzQ2ODQ5", "url": "https://api.github.com/repos/custom-components/alexa_media_player/labels/alexapy", "name": "alexapy", "color": "e23ba8", "default": false, "description": "Issue relates to the API"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 46, "created_at": "2019-09-14T06:50:41Z", "updated_at": "2019-09-22T10:37:41Z", "closed_at": "2019-09-22T10:37:41Z", "author_association": "NONE", "active_lock_reason": null, "body": "**Describe the bug**\r\nSince v.1.4.1, any of the v.2.x can works\r\n\r\n**To Reproduce**\r\nSteps to reproduce the behavior:\r\n1. Uninstall v.1.4.1 (HACS)\r\n2. Install any v.2.x\r\n3. Login procedure to Amazon completed\r\n4. Restart (1, 2 ,3, times)\r\n5. Error during setup of component alexa_media\r\n\r\n**Expected behavior**\r\nFor v1.4.1 there are no problem. Always run properly\r\n\r\n\r\n**System details**\r\n - Home-assistant (version): 0.98.1\r\n - Hassio (Yes/No): Yes\r\n - alexa_media  (version from `const.py` or HA startup): 2.1.2 (any 2.x)\r\n - alexapy (version from `pip show alexapy` or HA startup): 1.1.2\r\n\r\n**Logs**\r\n2019-09-14 08:33:27 ERROR (MainThread) [homeassistant.setup] Error during setup of component alexa_media\r\nTraceback (most recent call last):\r\n  File \"/usr/local/lib/python3.7/site-packages/aiohttp/connector.py\", line 924, in _wrap_create_connection\r\n    await self._loop.create_connection(*args, **kwargs))\r\n  File \"/usr/local/lib/python3.7/asyncio/base_events.py\", line 981, in create_connection\r\n    ssl_handshake_timeout=ssl_handshake_timeout)\r\n  File \"/usr/local/lib/python3.7/asyncio/base_events.py\", line 1009, in _create_connection_transport\r\n    await waiter\r\nConnectionResetError\r\n\r\nThe above exception was the direct cause of the following exception:\r\n\r\nTraceback (most recent call last):\r\n  File \"/usr/src/homeassistant/homeassistant/setup.py\", line 168, in _async_setup_component\r\n    hass, processed_config\r\n  File \"/config/custom_components/alexa_media/__init__.py\", line 132, in async_setup\r\n    await login.login_with_cookie()\r\n  File \"/usr/local/lib/python3.7/site-packages/alexapy/alexalogin.py\", line 165, in login_with_cookie\r\n    await self.login(cookies=self._cookies)\r\n  File \"/usr/local/lib/python3.7/site-packages/alexapy/alexalogin.py\", line 312, in login\r\n    if (cookies and await self.test_loggedin(cookies)):\r\n  File \"/usr/local/lib/python3.7/site-packages/alexapy/alexalogin.py\", line 233, in test_loggedin\r\n    ssl=self._ssl\r\n  File \"/usr/local/lib/python3.7/site-packages/aiohttp/client.py\", line 476, in _request\r\n    timeout=real_timeout\r\n  File \"/usr/local/lib/python3.7/site-packages/aiohttp/connector.py\", line 522, in connect\r\n    proto = await self._create_connection(req, traces, timeout)\r\n  File \"/usr/local/lib/python3.7/site-packages/aiohttp/connector.py\", line 854, in _create_connection\r\n    req, traces, timeout)\r\n  File \"/usr/local/lib/python3.7/site-packages/aiohttp/connector.py\", line 992, in _create_direct_connection\r\n    raise last_exc\r\n  File \"/usr/local/lib/python3.7/site-packages/aiohttp/connector.py\", line 974, in _create_direct_connection\r\n    req=req, client_error=client_error)\r\n  File \"/usr/local/lib/python3.7/site-packages/aiohttp/connector.py\", line 931, in _wrap_create_connection\r\n    raise client_error(req.connection_key, exc) from exc\r\n\r\n**Additional context**\r\nLogin zone: amazon.es\r\n", "reactions": {"url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/362/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/362/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/361", "repository_url": "https://api.github.com/repos/custom-components/alexa_media_player", "labels_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/361/labels{/name}", "comments_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/361/comments", "events_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/361/events", "html_url": "https://github.com/custom-components/alexa_media_player/issues/361", "id": 492968632, "node_id": "MDU6SXNzdWU0OTI5Njg2MzI=", "number": 361, "title": "Switches not created for all devices", "user": {"login": "broyuken", "id": 1593391, "node_id": "MDQ6VXNlcjE1OTMzOTE=", "avatar_url": "https://avatars.githubusercontent.com/u/1593391?v=4", "gravatar_id": "", "url": "https://api.github.com/users/broyuken", "html_url": "https://github.com/broyuken", "followers_url": "https://api.github.com/users/broyuken/followers", "following_url": "https://api.github.com/users/broyuken/following{/other_user}", "gists_url": "https://api.github.com/users/broyuken/gists{/gist_id}", "starred_url": "https://api.github.com/users/broyuken/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/broyuken/subscriptions", "organizations_url": "https://api.github.com/users/broyuken/orgs", "repos_url": "https://api.github.com/users/broyuken/repos", "events_url": "https://api.github.com/users/broyuken/events{/privacy}", "received_events_url": "https://api.github.com/users/broyuken/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 983327104, "node_id": "MDU6TGFiZWw5ODMzMjcxMDQ=", "url": "https://api.github.com/repos/custom-components/alexa_media_player/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 10, "created_at": "2019-09-12T18:45:14Z", "updated_at": "2019-09-19T08:10:01Z", "closed_at": "2019-09-19T08:10:01Z", "author_association": "NONE", "active_lock_reason": null, "body": "I have multiple alexa devices, around a dozen or so. They are all discovered as media players by this plugin, however only 4 of them have the shuffle/repeat and do not disturb switches. All of them used to exist because they flooded my alexa account with newly discovered switches from HA which I have since deleted from Alexa and ignored via the Alexa Smart Home Skill configuration portion of configuration.yaml.\r\n\r\nIt appears that ignoring a device from the smart home skill will remove that device from HA altogether when I just want Alexa to ignore it. I tried commenting out a particular device from the ignore list, but that didn't seem to make a difference either. \r\n\r\nHow would I go about getting these devices added back into HA as I would like to set up some automations with the do not disturb switches? ", "reactions": {"url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/361/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/361/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/357", "repository_url": "https://api.github.com/repos/custom-components/alexa_media_player", "labels_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/357/labels{/name}", "comments_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/357/comments", "events_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/357/events", "html_url": "https://github.com/custom-components/alexa_media_player/issues/357", "id": 491858128, "node_id": "MDU6SXNzdWU0OTE4NTgxMjg=", "number": 357, "title": "Taking over 60 seconds to \"Setup\" After restart", "user": {"login": "blacktirion", "id": 24303216, "node_id": "MDQ6VXNlcjI0MzAzMjE2", "avatar_url": "https://avatars.githubusercontent.com/u/24303216?v=4", "gravatar_id": "", "url": "https://api.github.com/users/blacktirion", "html_url": "https://github.com/blacktirion", "followers_url": "https://api.github.com/users/blacktirion/followers", "following_url": "https://api.github.com/users/blacktirion/following{/other_user}", "gists_url": "https://api.github.com/users/blacktirion/gists{/gist_id}", "starred_url": "https://api.github.com/users/blacktirion/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/blacktirion/subscriptions", "organizations_url": "https://api.github.com/users/blacktirion/orgs", "repos_url": "https://api.github.com/users/blacktirion/repos", "events_url": "https://api.github.com/users/blacktirion/events{/privacy}", "received_events_url": "https://api.github.com/users/blacktirion/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 983327104, "node_id": "MDU6TGFiZWw5ODMzMjcxMDQ=", "url": "https://api.github.com/repos/custom-components/alexa_media_player/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 12, "created_at": "2019-09-10T19:35:19Z", "updated_at": "2019-09-19T19:32:03Z", "closed_at": "2019-09-19T08:10:02Z", "author_association": "NONE", "active_lock_reason": null, "body": "**Describe the bug**\r\nAfter a restart of Home Assistant, I will get a notification that the component took too long to initialize. Component/Plugin still works as it should.\r\n\r\nNotification is as follows:\r\n`Setup of platform alexa_media is taking longer than 60 seconds. Startup will proceed without waiting any longer.`\r\n\r\n**To Reproduce**\r\nRestart Home Assistant via Server Control\r\n\r\n**Expected behavior**\r\nEither to not run \"Setup\" on every restart of homebridge, or for the setup to not take over 60 seconds.\r\n\r\n\r\n**System details**\r\n - Home-assistant (version):  0.98.5\r\n - Hassio (Yes/No): Yes\r\n - alexa_media version: 2.1.2\r\n - alexapy version: 1.1.2\r\n\r\n**Logs**\r\n```\r\n2019-09-10 14:18:13 DEBUG (MainThread) [custom_components.alexa_media] Testing login status: {'login_successful': True}\r\n2019-09-10 14:18:13 DEBUG (MainThread) [custom_components.alexa_media] Setting up Alexa devices for w********1@g*******m\r\n2019-09-10 14:18:13 DEBUG (MainThread) [custom_components.alexa_media] w********1@g*******m: Websocket created: <alexapy.alexawebsocket.WebsocketEchoClient object at 0x7f26fedf73d0>\r\n~\r\n2019-09-10 14:18:14 DEBUG (MainThread) [custom_components.alexa_media] w********1@g*******m: Websocket succesfully connected\r\n~\r\n2019-09-10 14:18:15 DEBUG (MainThread) [custom_components.alexa_media] w********1@g*******m: Found 8 devices, 1 bluetooth\r\n2019-09-10 14:18:15 DEBUG (MainThread) [custom_components.alexa_media] Locale en-us found for G************QQ9\r\n2019-09-10 14:18:15 DEBUG (MainThread) [custom_components.alexa_media] DND False found for G************QQ9\r\n2019-09-10 14:18:15 DEBUG (MainThread) [custom_components.alexa_media] Locale en-us found for G************KVQ\r\n2019-09-10 14:18:15 DEBUG (MainThread) [custom_components.alexa_media] DND False found for G************KVQ\r\n2019-09-10 14:18:15 DEBUG (MainThread) [custom_components.alexa_media] w********1@g*******m: Existing: [] New: ['Big Echo', 'Echo Dot Bedroom']; Filtered out by not being in include: [] or in exclude: [\"******'s Alexa Apps\", 'Echo Dot Living Room', 'Living Room', 'Everywhere', 'This Device', \"******'s Alexa Apps\"]\r\n2019-09-10 14:18:15 INFO (SyncWorker_15) [homeassistant.loader] Loaded alarm_control_panel from homeassistant.components.alarm_control_panel\r\n2019-09-10 14:18:15 INFO (MainThread) [homeassistant.setup] Setting up alarm_control_panel\r\n2019-09-10 14:18:15 INFO (MainThread) [homeassistant.setup] Setup of domain alarm_control_panel took 0.0 seconds.\r\n2019-09-10 14:18:16 DEBUG (MainThread) [custom_components.alexa_media] w********1@g*******m: Updated last_called: {'serialNumber': 'G************QQ9', 'timestamp': 1568122124666}\r\n2019-09-10 14:18:16 DEBUG (MainThread) [custom_components.alexa_media] w********1@g*******m: last_called changed:  to {'serialNumber': 'G************QQ9', 'timestamp': 1568122124666}\r\n2019-09-10 14:18:16 INFO (MainThread) [homeassistant.setup] Setup of domain alexa_media took 4.7 seconds.\r\n2019-09-10 14:18:16 INFO (MainThread) [homeassistant.components.media_player] Setting up media_player.alexa_media\r\n2019-09-10 14:18:16 INFO (MainThread) [homeassistant.components.notify] Setting up notify.alexa_media\r\n2019-09-10 14:18:16 DEBUG (MainThread) [custom_components.alexa_media.helpers] async_get_service: Trying with limit 5 delay 2 catch_exceptions True\r\n2019-09-10 14:18:16 DEBUG (MainThread) [custom_components.alexa_media.notify] w********1@g*******m: Media player G************QQ9 not loaded yet; delaying load\r\n2019-09-10 14:18:16 DEBUG (MainThread) [custom_components.alexa_media.helpers] async_get_service: Try: 1/5 result: False\r\n2019-09-10 14:18:16 INFO (MainThread) [homeassistant.components.switch] Setting up switch.alexa_media\r\n2019-09-10 14:18:16 INFO (MainThread) [homeassistant.components.alarm_control_panel] Setting up alarm_control_panel.alexa_media\r\n2019-09-10 14:18:16 DEBUG (MainThread) [custom_components.alexa_media.helpers] async_setup_platform: Trying with limit 5 delay 2 catch_exceptions True\r\n2019-09-10 14:18:16 DEBUG (MainThread) [custom_components.alexa_media.helpers] async_setup_platform: Trying with limit 5 delay 2 catch_exceptions True\r\n2019-09-10 14:18:16 DEBUG (MainThread) [custom_components.alexa_media.switch] w********1@g*******m: Loading switches\r\n2019-09-10 14:18:16 DEBUG (MainThread) [custom_components.alexa_media.switch] w********1@g*******m: Media player G************QQ9 not loaded yet; delaying load\r\n2019-09-10 14:18:16 DEBUG (MainThread) [custom_components.alexa_media.helpers] async_setup_platform: Try: 1/5 result: False\r\n2019-09-10 14:18:16 DEBUG (MainThread) [custom_components.alexa_media.helpers] async_setup_platform: Trying with limit 5 delay 2 catch_exceptions True\r\n2019-09-10 14:18:16 DEBUG (MainThread) [custom_components.alexa_media.media_player] w********1@g*******m: Refreshing Big Echo\r\n2019-09-10 14:18:16 DEBUG (MainThread) [custom_components.alexa_media.media_player] Big Echo: Last_called check: self: G************QQ9 reported: \r\n2019-09-10 14:18:16 DEBUG (MainThread) [custom_components.alexa_media.alarm_control_panel] w********1@g*******m: No Alexa Guard entity found\r\n2019-09-10 14:18:16 DEBUG (MainThread) [custom_components.alexa_media.alarm_control_panel] w********1@g*******m: Skipping creation of uninitialized device: <Entity Alexa Guard: None>\r\n2019-09-10 14:18:16 DEBUG (MainThread) [custom_components.alexa_media.helpers] async_setup_platform: Try: 1/5 result: False\r\n2019-09-10 14:18:16 DEBUG (MainThread) [custom_components.alexa_media.media_player] w********1@g*******m: Refreshing Echo Dot Bedroom\r\n2019-09-10 14:18:16 DEBUG (MainThread) [custom_components.alexa_media.media_player] Echo Dot Bedroom: Last_called check: self: G************KVQ reported: \r\n2019-09-10 14:18:16 DEBUG (MainThread) [custom_components.alexa_media.helpers] w********1@g*******m: Adding [<Entity Big Echo: standby>, <Entity Echo Dot Bedroom: standby>]\r\n2019-09-10 14:18:16 DEBUG (MainThread) [custom_components.alexa_media.helpers] async_setup_platform: Try: 1/5 result: True\r\n2019-09-10 14:18:20 DEBUG (MainThread) [custom_components.alexa_media.helpers] async_get_service: Try: 2/5 result: <custom_components.alexa_media.notify.AlexaNotificationService object at 0x7f26f99bff10>\r\n2019-09-10 14:18:20 DEBUG (MainThread) [custom_components.alexa_media.switch] w********1@g*******m: Loading switches\r\n2019-09-10 14:18:20 DEBUG (MainThread) [custom_components.alexa_media.switch] w********1@g*******m: Found G************QQ9 dnd switch with status: False\r\n2019-09-10 14:18:20 DEBUG (MainThread) [custom_components.alexa_media.switch] w********1@g*******m: Found G************QQ9 shuffle switch with status: None\r\n2019-09-10 14:18:20 DEBUG (MainThread) [custom_components.alexa_media.switch] w********1@g*******m: Found G************QQ9 repeat switch with status: None\r\n2019-09-10 14:18:20 DEBUG (MainThread) [custom_components.alexa_media.switch] w********1@g*******m: Found G************KVQ dnd switch with status: False\r\n2019-09-10 14:18:20 DEBUG (MainThread) [custom_components.alexa_media.switch] w********1@g*******m: Found G************KVQ shuffle switch with status: None\r\n2019-09-10 14:18:20 DEBUG (MainThread) [custom_components.alexa_media.switch] w********1@g*******m: Found G************KVQ repeat switch with status: None\r\n2019-09-10 14:18:20 DEBUG (MainThread) [custom_components.alexa_media.helpers] w********1@g*******m: Adding [<Entity Big Echo do not disturb switch: off>, <Entity Big Echo shuffle switch: off>, <Entity Big Echo repeat switch: off>, <Entity Echo Dot Bedroom do not disturb switch: off>, <Entity Echo Dot Bedroom shuffle switch: off>, <Entity Echo Dot Bedroom repeat switch: off>]\r\n2019-09-10 14:18:20 DEBUG (MainThread) [custom_components.alexa_media.helpers] async_setup_platform: Try: 2/5 result: True\r\n2019-09-10 14:18:20 DEBUG (MainThread) [custom_components.alexa_media.alarm_control_panel] w********1@g*******m: No Alexa Guard entity found\r\n2019-09-10 14:18:20 DEBUG (MainThread) [custom_components.alexa_media.alarm_control_panel] w********1@g*******m: Skipping creation of uninitialized device: <Entity Alexa Guard: None>\r\n2019-09-10 14:18:20 DEBUG (MainThread) [custom_components.alexa_media.helpers] async_setup_platform: Try: 2/5 result: False\r\n2019-09-10 14:18:26 WARNING (MainThread) [homeassistant.components.alarm_control_panel] Setup of platform alexa_media is taking over 10 seconds.\r\n2019-09-10 14:18:28 DEBUG (MainThread) [custom_components.alexa_media.alarm_control_panel] w********1@g*******m: No Alexa Guard entity found\r\n2019-09-10 14:18:28 DEBUG (MainThread) [custom_components.alexa_media.alarm_control_panel] w********1@g*******m: Skipping creation of uninitialized device: <Entity Alexa Guard: None>\r\n2019-09-10 14:18:28 DEBUG (MainThread) [custom_components.alexa_media.helpers] async_setup_platform: Try: 3/5 result: False\r\n2019-09-10 14:18:31 DEBUG (MainThread) [custom_components.alexa_media] w********1@g*******m: Received websocket command: PUSH_EQUALIZER_STATE_CHANGE : {'destinationUserId': 'A**********AIM', 'bass': 0, 'treble': 0, 'dopplerId': {'deviceSerialNumber': 'G************KVQ', 'deviceType': '************'}, 'midrange': 0}\r\n2019-09-10 14:18:45 DEBUG (MainThread) [custom_components.alexa_media.alarm_control_panel] w********1@g*******m: No Alexa Guard entity found\r\n2019-09-10 14:18:45 DEBUG (MainThread) [custom_components.alexa_media.alarm_control_panel] w********1@g*******m: Skipping creation of uninitialized device: <Entity Alexa Guard: None>\r\n2019-09-10 14:18:45 DEBUG (MainThread) [custom_components.alexa_media.helpers] async_setup_platform: Try: 4/5 result: False\r\n2019-09-10 14:19:16 ERROR (MainThread) [homeassistant.components.alarm_control_panel] Setup of platform alexa_media is taking longer than 60 seconds. Startup will proceed without waiting any longer.\r\n2019-09-10 14:19:16 INFO (MainThread) [homeassistant.bootstrap] Home Assistant initialized in 65.79s\r\n2019-09-10 14:19:16 INFO (MainThread) [homeassistant.core] Starting Home Assistant\r\n~\r\n2019-09-10 14:19:17 DEBUG (MainThread) [custom_components.alexa_media.media_player] w********1@g*******m: Refreshing Echo Dot Bedroom\r\n2019-09-10 14:19:17 DEBUG (MainThread) [custom_components.alexa_media.media_player] Echo Dot Bedroom: Last_called check: self: G************KVQ reported: G************QQ9\r\n2019-09-10 14:19:17 DEBUG (MainThread) [custom_components.alexa_media.media_player] w********1@g*******m: Refreshing Big Echo\r\n2019-09-10 14:19:17 DEBUG (MainThread) [custom_components.alexa_media.media_player] Big Echo: Last_called check: self: G************QQ9 reported: G************QQ9\r\n2019-09-10 14:19:17 DEBUG (MainThread) [custom_components.alexa_media.media_player] Disabling polling for Big Echo\r\n2019-09-10 14:19:17 DEBUG (MainThread) [custom_components.alexa_media.media_player] Disabling polling for Echo Dot Bedroom\r\n2019-09-10 14:19:17 DEBUG (MainThread) [custom_components.alexa_media.alarm_control_panel] w********1@g*******m: No Alexa Guard entity found\r\n2019-09-10 14:19:17 DEBUG (MainThread) [custom_components.alexa_media.alarm_control_panel] w********1@g*******m: Skipping creation of uninitialized device: <Entity Alexa Guard: None>\r\n2019-09-10 14:19:17 DEBUG (MainThread) [custom_components.alexa_media.helpers] async_setup_platform: Try: 5/5 result: False\r\n```\r\n\r\n**Additional context**\r\nPlugin works fine after restart of services, however it just takes forever for home assistant to restart. \r\n\r\nOriginally set up this plugin via alexpy pip installation/manual install. Removed all of that and installed via HACS.\r\n\r\nHave restarted HASS Multiple times. As stated, it works once home-assistant is up, it just delays start.\r\n", "reactions": {"url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/357/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/357/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/346", "repository_url": "https://api.github.com/repos/custom-components/alexa_media_player", "labels_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/346/labels{/name}", "comments_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/346/comments", "events_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/346/events", "html_url": "https://github.com/custom-components/alexa_media_player/issues/346", "id": 490465512, "node_id": "MDU6SXNzdWU0OTA0NjU1MTI=", "number": 346, "title": "Cannot Activate Routine", "user": {"login": "mikenabhan", "id": 13139061, "node_id": "MDQ6VXNlcjEzMTM5MDYx", "avatar_url": "https://avatars.githubusercontent.com/u/13139061?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mikenabhan", "html_url": "https://github.com/mikenabhan", "followers_url": "https://api.github.com/users/mikenabhan/followers", "following_url": "https://api.github.com/users/mikenabhan/following{/other_user}", "gists_url": "https://api.github.com/users/mikenabhan/gists{/gist_id}", "starred_url": "https://api.github.com/users/mikenabhan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mikenabhan/subscriptions", "organizations_url": "https://api.github.com/users/mikenabhan/orgs", "repos_url": "https://api.github.com/users/mikenabhan/repos", "events_url": "https://api.github.com/users/mikenabhan/events{/privacy}", "received_events_url": "https://api.github.com/users/mikenabhan/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 983327104, "node_id": "MDU6TGFiZWw5ODMzMjcxMDQ=", "url": "https://api.github.com/repos/custom-components/alexa_media_player/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}, {"id": 1246346849, "node_id": "MDU6TGFiZWwxMjQ2MzQ2ODQ5", "url": "https://api.github.com/repos/custom-components/alexa_media_player/labels/alexapy", "name": "alexapy", "color": "e23ba8", "default": false, "description": "Issue relates to the API"}], "state": "closed", "locked": false, "assignee": {"login": "alandtse", "id": 7086117, "node_id": "MDQ6VXNlcjcwODYxMTc=", "avatar_url": "https://avatars.githubusercontent.com/u/7086117?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alandtse", "html_url": "https://github.com/alandtse", "followers_url": "https://api.github.com/users/alandtse/followers", "following_url": "https://api.github.com/users/alandtse/following{/other_user}", "gists_url": "https://api.github.com/users/alandtse/gists{/gist_id}", "starred_url": "https://api.github.com/users/alandtse/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alandtse/subscriptions", "organizations_url": "https://api.github.com/users/alandtse/orgs", "repos_url": "https://api.github.com/users/alandtse/repos", "events_url": "https://api.github.com/users/alandtse/events{/privacy}", "received_events_url": "https://api.github.com/users/alandtse/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "alandtse", "id": 7086117, "node_id": "MDQ6VXNlcjcwODYxMTc=", "avatar_url": "https://avatars.githubusercontent.com/u/7086117?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alandtse", "html_url": "https://github.com/alandtse", "followers_url": "https://api.github.com/users/alandtse/followers", "following_url": "https://api.github.com/users/alandtse/following{/other_user}", "gists_url": "https://api.github.com/users/alandtse/gists{/gist_id}", "starred_url": "https://api.github.com/users/alandtse/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alandtse/subscriptions", "organizations_url": "https://api.github.com/users/alandtse/orgs", "repos_url": "https://api.github.com/users/alandtse/repos", "events_url": "https://api.github.com/users/alandtse/events{/privacy}", "received_events_url": "https://api.github.com/users/alandtse/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 10, "created_at": "2019-09-06T18:31:40Z", "updated_at": "2019-09-08T21:01:11Z", "closed_at": "2019-09-08T10:19:20Z", "author_association": "NONE", "active_lock_reason": null, "body": "**Describe the bug**\r\nTrying to initiate a routine stopped working after update.\r\n\r\n**To Reproduce**\r\nSteps to reproduce the behavior:\r\n1. Go to developer tools\r\n2. Click on dervices\r\n3. Enter data\r\n4. See error\r\n\"Call-service API error. Error Message: 0, message='Attempt to decode JSON with unexpected mimetype: text/html'\"\r\n**Expected behavior**\r\nA clear and concise description of what you expected to happen.\r\n\r\n**Screenshots**\r\nIf applicable, add screenshots to help explain your problem.\r\n![image](https://user-images.githubusercontent.com/13139061/64451189-e82b3000-d0a0-11e9-8c2a-3472e0fc474c.png)\r\n\r\n\r\n**System details**\r\n - Home-assistant (version):   0.98.4\r\n - Hassio (Yes/No): yes\r\n - alexa_media  (version from `const.py` or HA startup):  '2.0.1'\r\n - alexapy (version from `pip show alexapy` or HA startup): 1.0.1\r\n\r\n**Logs**\r\nCall-service API error. Error Message: 0, message='Attempt to decode JSON with unexpected mimetype: text/html'\r\n\r\n**Additional context**\r\nThis automation was previously working fine.  Happens when the service is called via node-red or direct from home assistant.\r\n", "reactions": {"url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/346/reactions", "total_count": 1, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/346/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/344", "repository_url": "https://api.github.com/repos/custom-components/alexa_media_player", "labels_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/344/labels{/name}", "comments_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/344/comments", "events_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/344/events", "html_url": "https://github.com/custom-components/alexa_media_player/issues/344", "id": 489536899, "node_id": "MDU6SXNzdWU0ODk1MzY4OTk=", "number": 344, "title": "Failed call to service configurator/configure . get", "user": {"login": "alandtse", "id": 7086117, "node_id": "MDQ6VXNlcjcwODYxMTc=", "avatar_url": "https://avatars.githubusercontent.com/u/7086117?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alandtse", "html_url": "https://github.com/alandtse", "followers_url": "https://api.github.com/users/alandtse/followers", "following_url": "https://api.github.com/users/alandtse/following{/other_user}", "gists_url": "https://api.github.com/users/alandtse/gists{/gist_id}", "starred_url": "https://api.github.com/users/alandtse/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alandtse/subscriptions", "organizations_url": "https://api.github.com/users/alandtse/orgs", "repos_url": "https://api.github.com/users/alandtse/repos", "events_url": "https://api.github.com/users/alandtse/events{/privacy}", "received_events_url": "https://api.github.com/users/alandtse/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 983327104, "node_id": "MDU6TGFiZWw5ODMzMjcxMDQ=", "url": "https://api.github.com/repos/custom-components/alexa_media_player/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}, {"id": 1246346849, "node_id": "MDU6TGFiZWwxMjQ2MzQ2ODQ5", "url": "https://api.github.com/repos/custom-components/alexa_media_player/labels/alexapy", "name": "alexapy", "color": "e23ba8", "default": false, "description": "Issue relates to the API"}], "state": "closed", "locked": false, "assignee": {"login": "alandtse", "id": 7086117, "node_id": "MDQ6VXNlcjcwODYxMTc=", "avatar_url": "https://avatars.githubusercontent.com/u/7086117?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alandtse", "html_url": "https://github.com/alandtse", "followers_url": "https://api.github.com/users/alandtse/followers", "following_url": "https://api.github.com/users/alandtse/following{/other_user}", "gists_url": "https://api.github.com/users/alandtse/gists{/gist_id}", "starred_url": "https://api.github.com/users/alandtse/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alandtse/subscriptions", "organizations_url": "https://api.github.com/users/alandtse/orgs", "repos_url": "https://api.github.com/users/alandtse/repos", "events_url": "https://api.github.com/users/alandtse/events{/privacy}", "received_events_url": "https://api.github.com/users/alandtse/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "alandtse", "id": 7086117, "node_id": "MDQ6VXNlcjcwODYxMTc=", "avatar_url": "https://avatars.githubusercontent.com/u/7086117?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alandtse", "html_url": "https://github.com/alandtse", "followers_url": "https://api.github.com/users/alandtse/followers", "following_url": "https://api.github.com/users/alandtse/following{/other_user}", "gists_url": "https://api.github.com/users/alandtse/gists{/gist_id}", "starred_url": "https://api.github.com/users/alandtse/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alandtse/subscriptions", "organizations_url": "https://api.github.com/users/alandtse/orgs", "repos_url": "https://api.github.com/users/alandtse/repos", "events_url": "https://api.github.com/users/alandtse/events{/privacy}", "received_events_url": "https://api.github.com/users/alandtse/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 10, "created_at": "2019-09-05T05:36:01Z", "updated_at": "2019-09-08T10:19:21Z", "closed_at": "2019-09-08T10:19:21Z", "author_association": "COLLABORATOR", "active_lock_reason": null, "body": "**Describe the bug**\r\nConfigurator can fail in the login in situations where Amazon attempts to reset cookies to `-` and that is then submitted back to Amazon. Because the cookies are invalid, Amazon then redirects to a page that says to enable javascript. There is a form which the `_process_page` function is pulling the action `get`.  This is then submitted to and it fails because it's an invalid url.\r\n\r\nThis appears to only happen for the `amazon.it` domain.\r\n\r\n**To Reproduce**\r\nSteps to reproduce the behavior:\r\n1. Set domain to amazon.it\r\n2. Try to log in using configurator\r\n3. Error will display eventually\r\n\r\n**Expected behavior**\r\nA clear and concise description of what you expected to happen.\r\n\r\n**Screenshots**\r\n![image](https://user-images.githubusercontent.com/7086117/64314402-c37d6e00-cf63-11e9-8f2c-82f6f34e722c.png)\r\n\r\n**System details**\r\n - Home-assistant (version): 0.98.1\r\n - Hassio (Yes/No): (Please note you may have to restart hassio 2-3 times to load the latest version of alexapy after an update. This looks like a HA bug).\r\n - alexa_media  (version from `const.py` or HA startup): 2.1.0\r\n - alexapy (version from `pip show alexapy` or HA startup): 1.0.2\r\n\r\n**Logs**\r\n```\r\nget\r\n11:20 custom_components/alexa_media/__init__.py (ERROR) - message first occured at 11:17 and shows up 2 times\r\n\r\nTraceback (most recent call last):\r\n  File \"/usr/src/homeassistant/homeassistant/components/websocket_api/commands.py\", line 130, in handle_call_service\r\n    connection.context(msg),\r\n  File \"/usr/src/homeassistant/homeassistant/core.py\", line 1235, in async_call\r\n    await asyncio.shield(self._execute_service(handler, service_call))\r\n  File \"/usr/src/homeassistant/homeassistant/core.py\", line 1260, in _execute_service\r\n    await handler.func(service_call)\r\n  File \"/usr/src/homeassistant/homeassistant/components/configurator/__init__.py\", line 235, in async_handle_service_call\r\n    await self.hass.async_add_job(callback, call.data.get(ATTR_FIELDS, {}))\r\n  File \"/config/custom_components/alexa_media/__init__.py\", line 153, in configuration_callback\r\n    login, callback_data)\r\n  File \"/config/custom_components/alexa_media/__init__.py\", line 143, in setup_platform_callback\r\n    await login.login(data=callback_data)\r\n  File \"/usr/local/lib/python3.7/site-packages/alexapy/alexalogin.py\", line 306, in login\r\n    headers=self._headers)\r\n  File \"/usr/local/lib/python3.7/site-packages/aiohttp/client.py\", line 466, in _request\r\n    ssl=ssl, proxy_headers=proxy_headers, traces=traces)\r\n  File \"/usr/local/lib/python3.7/site-packages/aiohttp/client_reqrep.py\", line 286, in __init__\r\n    self.update_host(url)\r\n  File \"/usr/local/lib/python3.7/site-packages/aiohttp/client_reqrep.py\", line 340, in update_host\r\n    raise InvalidURL(url)\r\naiohttp.client_exceptions.InvalidURL: get\r\n```\r\n**Additional context**\r\nThe root cause is the fact something is causing Amazon to invalidate the cookies in the login process. However, the code can probably be fixed to properly handle the page providing `get` so it restarts the login process.\r\n\r\nhttps://community.home-assistant.io/t/echo-devices-alexa-as-media-player-testers-needed/58639/3123\r\nhttps://community.home-assistant.io/t/echo-devices-alexa-as-media-player-testers-needed/58639/3141\r\n", "reactions": {"url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/344/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/344/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/323", "repository_url": "https://api.github.com/repos/custom-components/alexa_media_player", "labels_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/323/labels{/name}", "comments_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/323/comments", "events_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/323/events", "html_url": "https://github.com/custom-components/alexa_media_player/issues/323", "id": 487894652, "node_id": "MDU6SXNzdWU0ODc4OTQ2NTI=", "number": 323, "title": "v2.0.1 Setup error: certificate verify failed: unable to get local issuer certificate", "user": {"login": "gadgetchnnel", "id": 2099542, "node_id": "MDQ6VXNlcjIwOTk1NDI=", "avatar_url": "https://avatars.githubusercontent.com/u/2099542?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gadgetchnnel", "html_url": "https://github.com/gadgetchnnel", "followers_url": "https://api.github.com/users/gadgetchnnel/followers", "following_url": "https://api.github.com/users/gadgetchnnel/following{/other_user}", "gists_url": "https://api.github.com/users/gadgetchnnel/gists{/gist_id}", "starred_url": "https://api.github.com/users/gadgetchnnel/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gadgetchnnel/subscriptions", "organizations_url": "https://api.github.com/users/gadgetchnnel/orgs", "repos_url": "https://api.github.com/users/gadgetchnnel/repos", "events_url": "https://api.github.com/users/gadgetchnnel/events{/privacy}", "received_events_url": "https://api.github.com/users/gadgetchnnel/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 983327104, "node_id": "MDU6TGFiZWw5ODMzMjcxMDQ=", "url": "https://api.github.com/repos/custom-components/alexa_media_player/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}, {"id": 1246346849, "node_id": "MDU6TGFiZWwxMjQ2MzQ2ODQ5", "url": "https://api.github.com/repos/custom-components/alexa_media_player/labels/alexapy", "name": "alexapy", "color": "e23ba8", "default": false, "description": "Issue relates to the API"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 7, "created_at": "2019-09-01T14:49:22Z", "updated_at": "2021-11-26T03:15:39Z", "closed_at": "2019-09-03T07:14:08Z", "author_association": "NONE", "active_lock_reason": null, "body": "**Describe the bug**\r\n\r\nAfter updating to version 2.0.1, setup is failing with the error **certificate verify failed: unable to get local issuer certificate**\r\n\r\nDowngrading to 1.4.1 fixes it.\r\n\r\nFull error log:\r\n\r\n```\r\n2019-09-01 15:24:57 ERROR (MainThread) [homeassistant.core] Error doing job: SSL handshake failed on verifying the certificate\r\nTraceback (most recent call last):\r\n  File \"/usr/local/lib/python3.7/asyncio/sslproto.py\", line 625, in _on_handshake_complete\r\n    raise handshake_exc\r\n  File \"/usr/local/lib/python3.7/asyncio/sslproto.py\", line 189, in feed_ssldata\r\n    self._sslobj.do_handshake()\r\n  File \"/usr/local/lib/python3.7/ssl.py\", line 763, in do_handshake\r\n    self._sslobj.do_handshake()\r\nssl.SSLCertVerificationError: [SSL: CERTIFICATE_VERIFY_FAILED] certificate verify failed: unable to get local issuer certificate (_ssl.c:1056)\r\n2019-09-01 15:24:57 ERROR (MainThread) [homeassistant.core] Error doing job: SSL error in data received\r\nTraceback (most recent call last):\r\n  File \"/usr/local/lib/python3.7/asyncio/sslproto.py\", line 526, in data_received\r\n    ssldata, appdata = self._sslpipe.feed_ssldata(data)\r\n  File \"/usr/local/lib/python3.7/asyncio/sslproto.py\", line 189, in feed_ssldata\r\n    self._sslobj.do_handshake()\r\n  File \"/usr/local/lib/python3.7/ssl.py\", line 763, in do_handshake\r\n    self._sslobj.do_handshake()\r\nssl.SSLCertVerificationError: [SSL: CERTIFICATE_VERIFY_FAILED] certificate verify failed: unable to get local issuer certificate (_ssl.c:1056)\r\n2019-09-01 15:24:57 ERROR (MainThread) [homeassistant.setup] Error during setup of component alexa_media\r\nTraceback (most recent call last):\r\n  File \"/srv/homeassistant/lib/python3.7/site-packages/aiohttp/connector.py\", line 924, in _wrap_create_connection\r\n    await self._loop.create_connection(*args, **kwargs))\r\n  File \"/usr/local/lib/python3.7/asyncio/base_events.py\", line 986, in create_connection\r\n    ssl_handshake_timeout=ssl_handshake_timeout)\r\n  File \"/usr/local/lib/python3.7/asyncio/base_events.py\", line 1014, in _create_connection_transport\r\n    await waiter\r\n  File \"/usr/local/lib/python3.7/asyncio/sslproto.py\", line 526, in data_received\r\n    ssldata, appdata = self._sslpipe.feed_ssldata(data)\r\n  File \"/usr/local/lib/python3.7/asyncio/sslproto.py\", line 189, in feed_ssldata\r\n    self._sslobj.do_handshake()\r\n  File \"/usr/local/lib/python3.7/ssl.py\", line 763, in do_handshake\r\n    self._sslobj.do_handshake()\r\nssl.SSLCertVerificationError: [SSL: CERTIFICATE_VERIFY_FAILED] certificate verify failed: unable to get local issuer certificate (_ssl.c:1056)\r\n\r\nThe above exception was the direct cause of the following exception:\r\n\r\nTraceback (most recent call last):\r\n  File \"/srv/homeassistant/lib/python3.7/site-packages/homeassistant/setup.py\", line 168, in _async_setup_component\r\n    hass, processed_config\r\n  File \"/home/homeassistant/.homeassistant/custom_components/alexa_media/__init__.py\", line 120, in async_setup\r\n    await login.login_with_cookie()\r\n  File \"/srv/homeassistant/lib/python3.7/site-packages/alexapy/alexalogin.py\", line 121, in login_with_cookie\r\n    await self.login(cookies=self._cookies)\r\n  File \"/srv/homeassistant/lib/python3.7/site-packages/alexapy/alexalogin.py\", line 240, in login\r\n    if (cookies is not None and await self.test_loggedin(cookies)):\r\n  File \"/srv/homeassistant/lib/python3.7/site-packages/alexapy/alexalogin.py\", line 195, in test_loggedin\r\n    cookies=self._cookies\r\n  File \"/srv/homeassistant/lib/python3.7/site-packages/aiohttp/client.py\", line 476, in _request\r\n    timeout=real_timeout\r\n  File \"/srv/homeassistant/lib/python3.7/site-packages/aiohttp/connector.py\", line 522, in connect\r\n    proto = await self._create_connection(req, traces, timeout)\r\n  File \"/srv/homeassistant/lib/python3.7/site-packages/aiohttp/connector.py\", line 854, in _create_connection\r\n    req, traces, timeout)\r\n  File \"/srv/homeassistant/lib/python3.7/site-packages/aiohttp/connector.py\", line 992, in _create_direct_connection\r\n    raise last_exc\r\n  File \"/srv/homeassistant/lib/python3.7/site-packages/aiohttp/connector.py\", line 974, in _create_direct_connection\r\n    req=req, client_error=client_error)\r\n  File \"/srv/homeassistant/lib/python3.7/site-packages/aiohttp/connector.py\", line 927, in _wrap_create_connection\r\n    req.connection_key, exc) from exc\r\naiohttp.client_exceptions.ClientConnectorCertificateError: Cannot connect to host alexa.amazon.co.uk:443 ssl:True [SSLCertVerificationError: (1, '[SSL: CERTIFICATE_VERIFY_FAILED] certificate verify failed: unable to get local issuer certificate (_ssl.c:1056)')]\r\n```\r\n\r\n**To Reproduce**\r\nSteps to reproduce the behavior:\r\n\r\nUpdate to version 2.0.1\r\n\r\n**Expected behavior**\r\nA clear and concise description of what you expected to happen.\r\n\r\nComponent setup successfully.\r\n\r\n**Screenshots**\r\nIf applicable, add screenshots to help explain your problem.\r\n\r\n**System details**\r\n - Home-assistant (version): 0.98.1\r\n - Hassio (Yes/No): No\r\n - alexa_media  (version from `const.py` or HA startup): 2.0.1\r\n - alexapy (version from `pip show alexapy` or HA startup): 1.0.1\r\n\r\n**Additional context**\r\nAdd any other context about the problem here.\r\n\r\nConfiguration:\r\n\r\n```\r\nalexa_media:\r\n  accounts:\r\n    - email: !secret alexa_email\r\n      password: !secret alexa_password\r\n      url: amazon.co.uk\r\n```", "reactions": {"url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/323/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/323/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/317", "repository_url": "https://api.github.com/repos/custom-components/alexa_media_player", "labels_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/317/labels{/name}", "comments_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/317/comments", "events_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/317/events", "html_url": "https://github.com/custom-components/alexa_media_player/issues/317", "id": 487602891, "node_id": "MDU6SXNzdWU0ODc2MDI4OTE=", "number": 317, "title": "HA v0.98+ If you disable alexa_media created switches they will still be reported to HA ", "user": {"login": "skynet01", "id": 8117544, "node_id": "MDQ6VXNlcjgxMTc1NDQ=", "avatar_url": "https://avatars.githubusercontent.com/u/8117544?v=4", "gravatar_id": "", "url": "https://api.github.com/users/skynet01", "html_url": "https://github.com/skynet01", "followers_url": "https://api.github.com/users/skynet01/followers", "following_url": "https://api.github.com/users/skynet01/following{/other_user}", "gists_url": "https://api.github.com/users/skynet01/gists{/gist_id}", "starred_url": "https://api.github.com/users/skynet01/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/skynet01/subscriptions", "organizations_url": "https://api.github.com/users/skynet01/orgs", "repos_url": "https://api.github.com/users/skynet01/repos", "events_url": "https://api.github.com/users/skynet01/events{/privacy}", "received_events_url": "https://api.github.com/users/skynet01/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 983327104, "node_id": "MDU6TGFiZWw5ODMzMjcxMDQ=", "url": "https://api.github.com/repos/custom-components/alexa_media_player/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2019-08-30T17:53:09Z", "updated_at": "2019-09-19T08:10:01Z", "closed_at": "2019-09-19T08:10:01Z", "author_association": "NONE", "active_lock_reason": null, "body": "**Describe the bug**\r\nDisable an alexa_media sensor using the new entities feature. For example a shuffle switch entity like: _switch.alexa_dot_shuffle_switch_ \r\n\r\n\r\n**To Reproduce**\r\nSteps to reproduce the behavior:\r\n1. Go to 'entities under config, find an alexa media switch entity and disable it'\r\n2. Click on 'entity like switch.alexa_dot_shuffle_switch'\r\n3. reboot HA\r\n4. See error in console:\r\n\r\n`Entity switch.alexa_dot_shuffle_switch is incorrectly being triggered for updates while it is disabled. This is a bug in the alexa_media integration.`\r\n\r\n**Expected behavior**\r\nno error\r\n\r\n**Screenshots**\r\nsee error in console\r\n\r\n**System details**\r\n - Home-assistant (0.98.1): \r\n - Hassio (Yes/No): Yes\r\n - alexa_media  (version from `const.py` or HA startup): 2.0.0\r\n - alexapy (version from `pip show alexapy` or HA startup): latest\r\n\r\n**Additional context**\r\nAdd any other context about the problem here.\r\n", "reactions": {"url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/317/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/317/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/316", "repository_url": "https://api.github.com/repos/custom-components/alexa_media_player", "labels_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/316/labels{/name}", "comments_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/316/comments", "events_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/316/events", "html_url": "https://github.com/custom-components/alexa_media_player/issues/316", "id": 487566510, "node_id": "MDU6SXNzdWU0ODc1NjY1MTA=", "number": 316, "title": "Bluetooth device missing in source list", "user": {"login": "alandtse", "id": 7086117, "node_id": "MDQ6VXNlcjcwODYxMTc=", "avatar_url": "https://avatars.githubusercontent.com/u/7086117?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alandtse", "html_url": "https://github.com/alandtse", "followers_url": "https://api.github.com/users/alandtse/followers", "following_url": "https://api.github.com/users/alandtse/following{/other_user}", "gists_url": "https://api.github.com/users/alandtse/gists{/gist_id}", "starred_url": "https://api.github.com/users/alandtse/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alandtse/subscriptions", "organizations_url": "https://api.github.com/users/alandtse/orgs", "repos_url": "https://api.github.com/users/alandtse/repos", "events_url": "https://api.github.com/users/alandtse/events{/privacy}", "received_events_url": "https://api.github.com/users/alandtse/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 983327104, "node_id": "MDU6TGFiZWw5ODMzMjcxMDQ=", "url": "https://api.github.com/repos/custom-components/alexa_media_player/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 14, "created_at": "2019-08-30T16:17:40Z", "updated_at": "2019-09-03T07:14:08Z", "closed_at": "2019-09-03T07:14:08Z", "author_association": "COLLABORATOR", "active_lock_reason": null, "body": "Yep. Issue is fixed. Thanks for the fix.\r\n\r\nThere is one more thing about the bluetooth...it does not show in the source list.\r\n\r\n![image](https://user-images.githubusercontent.com/35133347/64033300-d8699400-cb54-11e9-9c67-03fa488e5c52.png)\r\n\r\nyet, when I catch the state change in node-red and verify the json object, I can see the bluetooth as source...yet not in the source list.\r\n![image](https://user-images.githubusercontent.com/35133347/64033470-34ccb380-cb55-11e9-8644-6f9ebc1055d8.png)\r\ncan we fix this to?\r\n\r\n_Originally posted by @danielmihalache1983 in https://github.com/keatontaylor/alexa_media_player/issues/309#issuecomment-526648169_", "reactions": {"url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/316/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/316/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/310", "repository_url": "https://api.github.com/repos/custom-components/alexa_media_player", "labels_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/310/labels{/name}", "comments_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/310/comments", "events_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/310/events", "html_url": "https://github.com/custom-components/alexa_media_player/issues/310", "id": 486191756, "node_id": "MDU6SXNzdWU0ODYxOTE3NTY=", "number": 310, "title": "Failed to call service configurator/configure expected string or bytes like object", "user": {"login": "alandtse", "id": 7086117, "node_id": "MDQ6VXNlcjcwODYxMTc=", "avatar_url": "https://avatars.githubusercontent.com/u/7086117?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alandtse", "html_url": "https://github.com/alandtse", "followers_url": "https://api.github.com/users/alandtse/followers", "following_url": "https://api.github.com/users/alandtse/following{/other_user}", "gists_url": "https://api.github.com/users/alandtse/gists{/gist_id}", "starred_url": "https://api.github.com/users/alandtse/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alandtse/subscriptions", "organizations_url": "https://api.github.com/users/alandtse/orgs", "repos_url": "https://api.github.com/users/alandtse/repos", "events_url": "https://api.github.com/users/alandtse/events{/privacy}", "received_events_url": "https://api.github.com/users/alandtse/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 983327104, "node_id": "MDU6TGFiZWw5ODMzMjcxMDQ=", "url": "https://api.github.com/repos/custom-components/alexa_media_player/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}, {"id": 1246346849, "node_id": "MDU6TGFiZWwxMjQ2MzQ2ODQ5", "url": "https://api.github.com/repos/custom-components/alexa_media_player/labels/alexapy", "name": "alexapy", "color": "e23ba8", "default": false, "description": "Issue relates to the API"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 12, "created_at": "2019-08-28T06:51:38Z", "updated_at": "2019-09-04T01:40:55Z", "closed_at": "2019-09-04T01:40:55Z", "author_association": "COLLABORATOR", "active_lock_reason": null, "body": "**Describe the bug**\r\nWith 2FA disable, Alexa will request a OTP using the claimspicker form. Selection of `sms` or `email` result in `Failed to call service configurator/configure expected string or bytes like object` and the configurator does not advance.\r\n\r\n**To Reproduce**\r\nSteps to reproduce the behavior:\r\n1. Begin log in process and fill out captcha\r\n2. Receive authentication request\r\n3. Enter any option\r\n4. See error\r\n\r\n**Expected behavior**\r\nConfiguration completes.\r\n\r\n**Screenshots**\r\nIf applicable, add screenshots to help explain your problem.\r\n\r\n**System details**\r\n - Home-assistant (version): \r\n - Hassio (Yes/No): (Please note you may have to restart hassio 2-3 times to load the latest version of alexapy after an update. This looks like a HA bug).\r\n - alexa_media  (version from `const.py` or HA startup): 2.0.0\r\n - alexapy (version from `pip show alexapy` or HA startup): 1.0.0\r\n\r\n**Additional context**\r\n```\r\n2019-08-27 08:29:44 DEBUG (MainThread) [alexapy.alexalogin] Verification method requested: Authentication required\r\nWe will send you a One Time Password (OTP) to authenticate your request.\r\n, Option: sms = As a text message - +1******xxxx.\r\nOption: email = In an email - x**x@xxxxxxx.com.\r\n\r\n2019-08-27 08:29:44 DEBUG (MainThread) [custom_components.alexa_media] Testing login status: {\u2018claimspicker_required\u2019: True, \u2018claimspicker_message\u2019: \u2018Option: sms = As a text message - +1******xxxx.\\nOption: email = In an email - x**x@xxxxxxx.com.\\n\u2019}\r\n2019-08-27 08:29:44 DEBUG (MainThread) [custom_components.alexa_media] Creating configurator to select verification option\r\n2019-08-27 08:30:22 DEBUG (MainThread) [custom_components.alexa_media] Status: {\u2018claimspicker_required\u2019: True, \u2018claimspicker_message\u2019: \u2018Option: sms = As a text message - +1******xxxx.\\nOption: email = In an email - x**x@xxxxxxxx.com.\\n\u2019} got captcha: w6geea securitycode: None Claimsoption: sms AuthSelectOption: None VerificationCode: None\r\n2019-08-27 08:30:22 DEBUG (MainThread) [alexapy.alexalogin] No valid cookies for log in; using credentials\r\n2019-08-27 08:30:22 DEBUG (MainThread) [alexapy.alexalogin] Loaded last request to https://www.amazon.com/ap/cvf/request?arb=c7cf42eb-f42b-43a1-b10b-0b471447xxxx\r\n```\r\nhttps://community.home-assistant.io/t/echo-devices-alexa-as-media-player-testers-needed/58639/3069\r\nhttps://community.home-assistant.io/t/echo-devices-alexa-as-media-player-testers-needed/58639/3079\r\nhttps://community.home-assistant.io/t/echo-devices-alexa-as-media-player-testers-needed/58639/3084\r\nhttps://community.home-assistant.io/t/echo-devices-alexa-as-media-player-testers-needed/58639/3089", "reactions": {"url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/310/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/310/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/309", "repository_url": "https://api.github.com/repos/custom-components/alexa_media_player", "labels_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/309/labels{/name}", "comments_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/309/comments", "events_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/309/events", "html_url": "https://github.com/custom-components/alexa_media_player/issues/309", "id": 486188573, "node_id": "MDU6SXNzdWU0ODYxODg1NzM=", "number": 309, "title": "KeyError: 'bluetoothStates' with websocket update", "user": {"login": "alandtse", "id": 7086117, "node_id": "MDQ6VXNlcjcwODYxMTc=", "avatar_url": "https://avatars.githubusercontent.com/u/7086117?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alandtse", "html_url": "https://github.com/alandtse", "followers_url": "https://api.github.com/users/alandtse/followers", "following_url": "https://api.github.com/users/alandtse/following{/other_user}", "gists_url": "https://api.github.com/users/alandtse/gists{/gist_id}", "starred_url": "https://api.github.com/users/alandtse/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alandtse/subscriptions", "organizations_url": "https://api.github.com/users/alandtse/orgs", "repos_url": "https://api.github.com/users/alandtse/repos", "events_url": "https://api.github.com/users/alandtse/events{/privacy}", "received_events_url": "https://api.github.com/users/alandtse/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 983327104, "node_id": "MDU6TGFiZWw5ODMzMjcxMDQ=", "url": "https://api.github.com/repos/custom-components/alexa_media_player/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}, {"id": 1246346849, "node_id": "MDU6TGFiZWwxMjQ2MzQ2ODQ5", "url": "https://api.github.com/repos/custom-components/alexa_media_player/labels/alexapy", "name": "alexapy", "color": "e23ba8", "default": false, "description": "Issue relates to the API"}], "state": "closed", "locked": false, "assignee": {"login": "alandtse", "id": 7086117, "node_id": "MDQ6VXNlcjcwODYxMTc=", "avatar_url": "https://avatars.githubusercontent.com/u/7086117?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alandtse", "html_url": "https://github.com/alandtse", "followers_url": "https://api.github.com/users/alandtse/followers", "following_url": "https://api.github.com/users/alandtse/following{/other_user}", "gists_url": "https://api.github.com/users/alandtse/gists{/gist_id}", "starred_url": "https://api.github.com/users/alandtse/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alandtse/subscriptions", "organizations_url": "https://api.github.com/users/alandtse/orgs", "repos_url": "https://api.github.com/users/alandtse/repos", "events_url": "https://api.github.com/users/alandtse/events{/privacy}", "received_events_url": "https://api.github.com/users/alandtse/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "alandtse", "id": 7086117, "node_id": "MDQ6VXNlcjcwODYxMTc=", "avatar_url": "https://avatars.githubusercontent.com/u/7086117?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alandtse", "html_url": "https://github.com/alandtse", "followers_url": "https://api.github.com/users/alandtse/followers", "following_url": "https://api.github.com/users/alandtse/following{/other_user}", "gists_url": "https://api.github.com/users/alandtse/gists{/gist_id}", "starred_url": "https://api.github.com/users/alandtse/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alandtse/subscriptions", "organizations_url": "https://api.github.com/users/alandtse/orgs", "repos_url": "https://api.github.com/users/alandtse/repos", "events_url": "https://api.github.com/users/alandtse/events{/privacy}", "received_events_url": "https://api.github.com/users/alandtse/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 14, "created_at": "2019-08-28T06:42:27Z", "updated_at": "2019-08-31T03:00:30Z", "closed_at": "2019-08-31T03:00:30Z", "author_association": "COLLABORATOR", "active_lock_reason": null, "body": "yea. this seems to work now.\r\nwhile monitoring the logs I also noticed this\r\n`\r\n2019-08-27 21:31:51 ERROR (MainThread) [homeassistant.core] Error doing job: Task exception was never retrieved\r\nTraceback (most recent call last):\r\n  File \"/usr/local/lib/python3.7/site-packages/alexapy/alexawebsocket.py\", line 135, in process_messages\r\n    await self.on_message(cast(bytes, msg.data))\r\n  File \"/usr/local/lib/python3.7/site-packages/alexapy/alexawebsocket.py\", line 217, in on_message\r\n    await self.msg_callback(message_obj)\r\n  File \"/config/custom_components/alexa_media/__init__.py\", line 590, in ws_handler\r\n    serial)\r\n  File \"/config/custom_components/alexa_media/__init__.py\", line 465, in update_bluetooth_state\r\n    for b_state in bluetooth['bluetoothStates']:\r\nKeyError: 'bluetoothStates'\r\n`\r\n\r\n_Originally posted by @danielmihalache1983 in https://github.com/keatontaylor/alexa_media_player/issues/302#issuecomment-525431094_", "reactions": {"url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/309/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/309/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/307", "repository_url": "https://api.github.com/repos/custom-components/alexa_media_player", "labels_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/307/labels{/name}", "comments_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/307/comments", "events_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/307/events", "html_url": "https://github.com/custom-components/alexa_media_player/issues/307", "id": 485842255, "node_id": "MDU6SXNzdWU0ODU4NDIyNTU=", "number": 307, "title": "Unable to configure w/ v2.0.x, getting stuck at the \"Begin\" configurator and unable to login", "user": {"login": "rpitera", "id": 19910294, "node_id": "MDQ6VXNlcjE5OTEwMjk0", "avatar_url": "https://avatars.githubusercontent.com/u/19910294?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rpitera", "html_url": "https://github.com/rpitera", "followers_url": "https://api.github.com/users/rpitera/followers", "following_url": "https://api.github.com/users/rpitera/following{/other_user}", "gists_url": "https://api.github.com/users/rpitera/gists{/gist_id}", "starred_url": "https://api.github.com/users/rpitera/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rpitera/subscriptions", "organizations_url": "https://api.github.com/users/rpitera/orgs", "repos_url": "https://api.github.com/users/rpitera/repos", "events_url": "https://api.github.com/users/rpitera/events{/privacy}", "received_events_url": "https://api.github.com/users/rpitera/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 983327104, "node_id": "MDU6TGFiZWw5ODMzMjcxMDQ=", "url": "https://api.github.com/repos/custom-components/alexa_media_player/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}, {"id": 1246346849, "node_id": "MDU6TGFiZWwxMjQ2MzQ2ODQ5", "url": "https://api.github.com/repos/custom-components/alexa_media_player/labels/alexapy", "name": "alexapy", "color": "e23ba8", "default": false, "description": "Issue relates to the API"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 18, "created_at": "2019-08-27T14:22:26Z", "updated_at": "2019-09-03T07:14:08Z", "closed_at": "2019-09-03T07:14:08Z", "author_association": "NONE", "active_lock_reason": null, "body": "**Describe the bug**\r\nConfigurator fails to advance to the next step and allow a login in 2.x.x. Clicking on Confirm in the `Begin` step on the configurator just cycles repeatedly. The workaround is to login through 1.4.1 and then upgrade again.\r\n---Old text\r\nAs the title says, I was able to resolve this myself but thought it was important to report.  After upgrading from 1.41 to 2.0.0, I got the familiar notification to start the configuration flow.  But when I pressed the \"Confirm\" button, it created a SECOND notification, then cleared the dialog.  But the original notification remained.  Subsequent attempts produced the same results. \r\n\r\n**To Reproduce**\r\nSteps to reproduce the behavior:\r\n1. Installed update\r\n2. Click on configuration message in notifications\r\n3. Click on Confirm button\r\n4. A second notification briefly shows, then disappears. Dialog disappears but original configuration notification remains.\r\n\r\nScreen capture of sequence above:\r\nhttps://www.dropbox.com/s/7lto8vnuyxvwxxs/media.io_screen-recording.mp4?dl=0\r\n\r\n**Expected behavior**\r\nStandard update of pickle file and notification clearing.\r\n\r\n**System details**\r\n - Home-assistant (version): 0.97.2\r\n - Hassio (Yes/No): Yes\r\n - alexa_media  (version from `const.py` or HA startup): 2.0.0\r\n - alexapy (version from `pip show alexapy` or HA startup): 1.0.0\r\n\r\n**Additional context**\r\nNo error was shown in the home assistant logs. Tried this with Chrome and FF, cleared cookies and cache.  No change.  Downgraded to 1.41 and rebooted.  Configuration flow worked correctly and pickle was updated.  Then upgraded to 2.0.0 and rebooted again.  Everything is working fine, no additional notifications and Alexa Media Player loaded fine.\r\n\r\nIf this was just some temporary aberration, feel free to close it but I thought I would document it in case it was important or someone else had the same issue.  \r\n", "reactions": {"url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/307/reactions", "total_count": 2, "+1": 2, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/307/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/302", "repository_url": "https://api.github.com/repos/custom-components/alexa_media_player", "labels_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/302/labels{/name}", "comments_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/302/comments", "events_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/302/events", "html_url": "https://github.com/custom-components/alexa_media_player/issues/302", "id": 485381185, "node_id": "MDU6SXNzdWU0ODUzODExODU=", "number": 302, "title": "Error - Unable to serialize to JSON: Object of type coroutine is not JSON serializable", "user": {"login": "danielmihalache1983", "id": 35133347, "node_id": "MDQ6VXNlcjM1MTMzMzQ3", "avatar_url": "https://avatars.githubusercontent.com/u/35133347?v=4", "gravatar_id": "", "url": "https://api.github.com/users/danielmihalache1983", "html_url": "https://github.com/danielmihalache1983", "followers_url": "https://api.github.com/users/danielmihalache1983/followers", "following_url": "https://api.github.com/users/danielmihalache1983/following{/other_user}", "gists_url": "https://api.github.com/users/danielmihalache1983/gists{/gist_id}", "starred_url": "https://api.github.com/users/danielmihalache1983/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/danielmihalache1983/subscriptions", "organizations_url": "https://api.github.com/users/danielmihalache1983/orgs", "repos_url": "https://api.github.com/users/danielmihalache1983/repos", "events_url": "https://api.github.com/users/danielmihalache1983/events{/privacy}", "received_events_url": "https://api.github.com/users/danielmihalache1983/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 983327104, "node_id": "MDU6TGFiZWw5ODMzMjcxMDQ=", "url": "https://api.github.com/repos/custom-components/alexa_media_player/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 13, "created_at": "2019-08-26T18:38:53Z", "updated_at": "2019-08-30T10:28:27Z", "closed_at": "2019-08-28T11:19:31Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi, I`m not sure this is alexa_media related but it looks like so.\r\nI get this error:\r\nVersion 2.0\r\n\r\n`ERROR (MainThread) [homeassistant.components.websocket_api.http.connection.1827548752] Unable to serialize to JSON: Object of type coroutine is not JSON serializable\r\n{'id': 2, 'type': 'event', 'event': {'event_type': 'state_changed', 'data': {'entity_id': 'media_player.daniel_s_echo_dot', 'old_state': <state media_player.daniel_s_echo_dot=standby; is_volume_muted=False, media_content_type=standby, media_position_updated_at=2019-08-25T23:11:45.106361+03:00, source=Ugreen-Bluetooth05, source_list=['Local Speaker'], available=True, last_called=True, friendly_name=Daniel's Echo Dot, supported_features=56253 @ 2019-08-26T10:25:47.559961+03:00>, 'new_state': <state media_player.daniel_s_echo_dot=standby; is_volume_muted=False, media_content_type=standby, media_position_updated_at=2019-08-25T23:11:45.106361+03:00, source=<coroutine object AlexaClient._get_source at 0x72b620c0>, source_list=<coroutine object AlexaClient._get_source_list at 0x6f0efd68>, available=True, last_called=True, friendly_name=Daniel's Echo Dot, supported_features=56253 @ 2019-08-26T10:25:47.559961+03:00>}, 'origin': 'LOCAL', 'time_fired': datetime.datetime(2019, 8, 26, 8, 1, 49, 181128, tzinfo=<UTC>), 'context': {'id': '715f4156742e4a23beb612ccf57fdf5e', 'parent_id': None, 'user_id': None}}}`", "reactions": {"url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/302/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/302/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/299", "repository_url": "https://api.github.com/repos/custom-components/alexa_media_player", "labels_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/299/labels{/name}", "comments_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/299/comments", "events_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/299/events", "html_url": "https://github.com/custom-components/alexa_media_player/issues/299", "id": 484506909, "node_id": "MDU6SXNzdWU0ODQ1MDY5MDk=", "number": 299, "title": "'NoneType' object has no attribute 'strip'", "user": {"login": "Maurotb", "id": 26932793, "node_id": "MDQ6VXNlcjI2OTMyNzkz", "avatar_url": "https://avatars.githubusercontent.com/u/26932793?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Maurotb", "html_url": "https://github.com/Maurotb", "followers_url": "https://api.github.com/users/Maurotb/followers", "following_url": "https://api.github.com/users/Maurotb/following{/other_user}", "gists_url": "https://api.github.com/users/Maurotb/gists{/gist_id}", "starred_url": "https://api.github.com/users/Maurotb/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Maurotb/subscriptions", "organizations_url": "https://api.github.com/users/Maurotb/orgs", "repos_url": "https://api.github.com/users/Maurotb/repos", "events_url": "https://api.github.com/users/Maurotb/events{/privacy}", "received_events_url": "https://api.github.com/users/Maurotb/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 983327104, "node_id": "MDU6TGFiZWw5ODMzMjcxMDQ=", "url": "https://api.github.com/repos/custom-components/alexa_media_player/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}, {"id": 1246346849, "node_id": "MDU6TGFiZWwxMjQ2MzQ2ODQ5", "url": "https://api.github.com/repos/custom-components/alexa_media_player/labels/alexapy", "name": "alexapy", "color": "e23ba8", "default": false, "description": "Issue relates to the API"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 12, "created_at": "2019-08-23T12:34:43Z", "updated_at": "2019-08-31T03:00:30Z", "closed_at": "2019-08-31T03:00:30Z", "author_association": "NONE", "active_lock_reason": null, "body": "**Describe the bug**\r\nA clear and concise description of what the bug is.\r\n\r\nAfter ugrade my homassistant (docker) to 0.97.2 and alexa_media to 2.0 \r\nwhen i click on \"Please hit confirm to begin login attempt.\" i have \r\n\r\n2019-08-23 14:28:35 ERROR (MainThread) [homeassistant.components.websocket_api.http.connection.1864377072] 'NoneType' object has no attribute 'strip'\r\nTraceback (most recent call last):\r\n  File \"/usr/src/homeassistant/homeassistant/components/websocket_api/commands.py\", line 128, in handle_call_service\r\n    connection.context(msg),\r\n  File \"/usr/src/homeassistant/homeassistant/core.py\", line 1235, in async_call\r\n    await asyncio.shield(self._execute_service(handler, service_call))\r\n  File \"/usr/src/homeassistant/homeassistant/core.py\", line 1260, in _execute_service\r\n    await handler.func(service_call)\r\n  File \"/usr/src/homeassistant/homeassistant/components/configurator/__init__.py\", line 235, in async_handle_service_call\r\n    await self.hass.async_add_job(callback, call.data.get(ATTR_FIELDS, {}))\r\n  File \"/config/custom_components/alexa_media/__init__.py\", line 152, in configuration_callback\r\n    login, callback_data)\r\n  File \"/config/custom_components/alexa_media/__init__.py\", line 142, in setup_platform_callback\r\n    await login.login(data=callback_data)\r\n  File \"/usr/local/lib/python3.7/site-packages/alexapy/alexalogin.py\", line 327, in login\r\n    await self._process_page(await post_resp.text(), site)\r\n  File \"/usr/local/lib/python3.7/site-packages/alexapy/alexalogin.py\", line 372, in _process_page\r\n    find_links()\r\n  File \"/usr/local/lib/python3.7/site-packages/alexapy/alexalogin.py\", line 338, in find_links\r\n    string = link.string.strip()\r\nAttributeError: 'NoneType' object has no attribute 'strip'\r\n\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/299/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/299/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/269", "repository_url": "https://api.github.com/repos/custom-components/alexa_media_player", "labels_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/269/labels{/name}", "comments_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/269/comments", "events_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/269/events", "html_url": "https://github.com/custom-components/alexa_media_player/issues/269", "id": 478241246, "node_id": "MDU6SXNzdWU0NzgyNDEyNDY=", "number": 269, "title": "homeassistant.exceptions.NoEntitySpecifiedError: No entity id specified for entity switch", "user": {"login": "alandtse", "id": 7086117, "node_id": "MDQ6VXNlcjcwODYxMTc=", "avatar_url": "https://avatars.githubusercontent.com/u/7086117?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alandtse", "html_url": "https://github.com/alandtse", "followers_url": "https://api.github.com/users/alandtse/followers", "following_url": "https://api.github.com/users/alandtse/following{/other_user}", "gists_url": "https://api.github.com/users/alandtse/gists{/gist_id}", "starred_url": "https://api.github.com/users/alandtse/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alandtse/subscriptions", "organizations_url": "https://api.github.com/users/alandtse/orgs", "repos_url": "https://api.github.com/users/alandtse/repos", "events_url": "https://api.github.com/users/alandtse/events{/privacy}", "received_events_url": "https://api.github.com/users/alandtse/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 983327104, "node_id": "MDU6TGFiZWw5ODMzMjcxMDQ=", "url": "https://api.github.com/repos/custom-components/alexa_media_player/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2019-08-08T04:14:30Z", "updated_at": "2019-08-22T07:06:35Z", "closed_at": "2019-08-22T07:06:35Z", "author_association": "COLLABORATOR", "active_lock_reason": null, "body": "**Describe the bug**\r\nha_schedule_update is called before entity_id is assigned on startup\r\n\r\n**To Reproduce**\r\nSteps to reproduce the behavior:\r\n1. Restart HA\r\n\r\n**Expected behavior**\r\nException should not be thrown\r\n\r\n**Screenshots**\r\nIf applicable, add screenshots to help explain your problem.\r\n\r\n**System details**\r\n - Home-assistant (version): 0.97.0\r\n - Hassio (Yes/No): No\r\n - alexa_media  (version from `const.py` or HA startup): 1.4.0\r\n - alexapy (version from `pip show alexapy` or HA startup): 0.7.1\r\n\r\n**Additional context**\r\nDoes not seem to degrade functionality", "reactions": {"url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/269/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/269/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/268", "repository_url": "https://api.github.com/repos/custom-components/alexa_media_player", "labels_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/268/labels{/name}", "comments_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/268/comments", "events_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/268/events", "html_url": "https://github.com/custom-components/alexa_media_player/issues/268", "id": 478241142, "node_id": "MDU6SXNzdWU0NzgyNDExNDI=", "number": 268, "title": "homeassistant.exceptions.NoEntitySpecifiedError: No entity id specified for entity Alexa Guard", "user": {"login": "alandtse", "id": 7086117, "node_id": "MDQ6VXNlcjcwODYxMTc=", "avatar_url": "https://avatars.githubusercontent.com/u/7086117?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alandtse", "html_url": "https://github.com/alandtse", "followers_url": "https://api.github.com/users/alandtse/followers", "following_url": "https://api.github.com/users/alandtse/following{/other_user}", "gists_url": "https://api.github.com/users/alandtse/gists{/gist_id}", "starred_url": "https://api.github.com/users/alandtse/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alandtse/subscriptions", "organizations_url": "https://api.github.com/users/alandtse/orgs", "repos_url": "https://api.github.com/users/alandtse/repos", "events_url": "https://api.github.com/users/alandtse/events{/privacy}", "received_events_url": "https://api.github.com/users/alandtse/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 983327104, "node_id": "MDU6TGFiZWw5ODMzMjcxMDQ=", "url": "https://api.github.com/repos/custom-components/alexa_media_player/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2019-08-08T04:13:57Z", "updated_at": "2019-08-22T07:06:35Z", "closed_at": "2019-08-22T07:06:35Z", "author_association": "COLLABORATOR", "active_lock_reason": null, "body": "**Describe the bug**\r\nha_schedule_update is called before entity_id is assigned on startup\r\n\r\n**To Reproduce**\r\nSteps to reproduce the behavior:\r\n1. Restart HA\r\n\r\n**Expected behavior**\r\nException should not be thrown\r\n\r\n**Screenshots**\r\nIf applicable, add screenshots to help explain your problem.\r\n\r\n**System details**\r\n - Home-assistant (version): 0.97.0\r\n - Hassio (Yes/No): No\r\n - alexa_media  (version from `const.py` or HA startup): 1.4.0\r\n - alexapy (version from `pip show alexapy` or HA startup): 0.7.1\r\n\r\n**Additional context**\r\nDoes not seem to degrade functionality", "reactions": {"url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/268/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/268/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/259", "repository_url": "https://api.github.com/repos/custom-components/alexa_media_player", "labels_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/259/labels{/name}", "comments_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/259/comments", "events_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/259/events", "html_url": "https://github.com/custom-components/alexa_media_player/issues/259", "id": 475580497, "node_id": "MDU6SXNzdWU0NzU1ODA0OTc=", "number": 259, "title": "The following components and platforms could not be set up:  alexa_media.media_player @0.97b0", "user": {"login": "dreimer1986", "id": 29841368, "node_id": "MDQ6VXNlcjI5ODQxMzY4", "avatar_url": "https://avatars.githubusercontent.com/u/29841368?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dreimer1986", "html_url": "https://github.com/dreimer1986", "followers_url": "https://api.github.com/users/dreimer1986/followers", "following_url": "https://api.github.com/users/dreimer1986/following{/other_user}", "gists_url": "https://api.github.com/users/dreimer1986/gists{/gist_id}", "starred_url": "https://api.github.com/users/dreimer1986/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dreimer1986/subscriptions", "organizations_url": "https://api.github.com/users/dreimer1986/orgs", "repos_url": "https://api.github.com/users/dreimer1986/repos", "events_url": "https://api.github.com/users/dreimer1986/events{/privacy}", "received_events_url": "https://api.github.com/users/dreimer1986/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 983327104, "node_id": "MDU6TGFiZWw5ODMzMjcxMDQ=", "url": "https://api.github.com/repos/custom-components/alexa_media_player/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 11, "created_at": "2019-08-01T09:41:18Z", "updated_at": "2019-08-08T05:44:16Z", "closed_at": "2019-08-08T04:44:04Z", "author_association": "NONE", "active_lock_reason": null, "body": "**Describe the bug**\r\nThe following components and platforms could not be set up:\r\nalexa_media.media_player\r\n\r\nLog Details (ERROR)\r\nUnable to prepare setup for platform alexa_media.media_player: Platform not found (cannot import name 'MEDIA_PLAYER_SCHEMA' from 'homeassistant.components.media_player' (/usr/src/homeassistant/homeassistant/components/media_player/__init__.py)).\r\n\r\n**To Reproduce**\r\nSteps to reproduce the behavior:\r\n\r\nInstall recent beta and you will see.\r\n\r\n**Expected behavior**\r\nA clear and concise description of what you expected to happen.\r\n\r\n**Screenshots**\r\nIf applicable, add screenshots to help explain your problem.\r\n\r\n**System details**\r\n - Home-assistant (version): 0.97.0b0\r\n - Hassio (Yes/No): Yes\r\n - alexa_media  (version from `const.py` or HA startup): 1.3.1\r\n - alexapy (version from `pip show alexapy` or HA startup): 0.7.0\r\n\r\n**Additional context**\r\nLudeeus meant : Custom components should provide a const.py file in the integration dir, that way when consts change in core, they will not break.\r\n\r\nAka it looks like the const was renamed I guess?\r\nHere we are: https://github.com/home-assistant/home-assistant/commit/f1e4153b2c4a9e18eebb037d2332c76f1a625c97#diff-5611ccdb60e42595186058f82df9c7a8", "reactions": {"url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/259/reactions", "total_count": 4, "+1": 4, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/259/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/258", "repository_url": "https://api.github.com/repos/custom-components/alexa_media_player", "labels_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/258/labels{/name}", "comments_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/258/comments", "events_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/258/events", "html_url": "https://github.com/custom-components/alexa_media_player/issues/258", "id": 473063958, "node_id": "MDU6SXNzdWU0NzMwNjM5NTg=", "number": 258, "title": "Error while setting up platform alexa_media - KeyError: 'csrf'", "user": {"login": "eifinger", "id": 1481961, "node_id": "MDQ6VXNlcjE0ODE5NjE=", "avatar_url": "https://avatars.githubusercontent.com/u/1481961?v=4", "gravatar_id": "", "url": "https://api.github.com/users/eifinger", "html_url": "https://github.com/eifinger", "followers_url": "https://api.github.com/users/eifinger/followers", "following_url": "https://api.github.com/users/eifinger/following{/other_user}", "gists_url": "https://api.github.com/users/eifinger/gists{/gist_id}", "starred_url": "https://api.github.com/users/eifinger/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/eifinger/subscriptions", "organizations_url": "https://api.github.com/users/eifinger/orgs", "repos_url": "https://api.github.com/users/eifinger/repos", "events_url": "https://api.github.com/users/eifinger/events{/privacy}", "received_events_url": "https://api.github.com/users/eifinger/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 983327104, "node_id": "MDU6TGFiZWw5ODMzMjcxMDQ=", "url": "https://api.github.com/repos/custom-components/alexa_media_player/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}, {"id": 1246346849, "node_id": "MDU6TGFiZWwxMjQ2MzQ2ODQ5", "url": "https://api.github.com/repos/custom-components/alexa_media_player/labels/alexapy", "name": "alexapy", "color": "e23ba8", "default": false, "description": "Issue relates to the API"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 57, "created_at": "2019-07-25T20:49:17Z", "updated_at": "2019-08-08T04:44:05Z", "closed_at": "2019-08-08T04:44:05Z", "author_association": "NONE", "active_lock_reason": null, "body": "**Describe the bug**\r\nTTS was not working anymore. I suspected an old cookie etc, deleted the .pickle file and restarted homeassistant which always worked. Configuration with 2FA seemed to work. Afterwards I started to see the following errors in the log:\r\n```bash\r\nError while setting up platform alexa_media\r\nTraceback (most recent call last):\r\n  File \"/usr/src/app/homeassistant/helpers/entity_platform.py\", line 126, in _async_setup_platform\r\n    SLOW_SETUP_MAX_WAIT)\r\n  File \"/usr/local/lib/python3.7/asyncio/tasks.py\", line 416, in wait_for\r\n    return fut.result()\r\n  File \"/usr/local/lib/python3.7/concurrent/futures/thread.py\", line 57, in run\r\n    result = self.fn(*self.args, **self.kwargs)\r\n  File \"/config/custom_components/alexa_media/alarm_control_panel.py\", line 35, in setup_platform\r\n    hass)  \\\r\n  File \"/config/custom_components/alexa_media/alarm_control_panel.py\", line 73, in __init__\r\n    self.alexa_api = AlexaAPI(self, login)\r\n  File \"/usr/local/lib/python3.7/site-packages/alexapy/alexaapi.py\", line 51, in __init__\r\n    csrf = self._session.cookies.get_dict()['csrf']\r\nKeyError: 'csrf'\r\n````\r\n\r\n**To Reproduce**\r\nSteps to reproduce the behavior:\r\n1. Delete .pickle\r\n2. Restart HA\r\n3. Configure (Login)\r\n4. Error appear\r\n\r\n**Expected behavior**\r\nMedia Players should appear along the functionality\r\n\r\n**Screenshots**\r\nIf applicable, add screenshots to help explain your problem.\r\n\r\n**System details**\r\n - Home-assistant (version): 0.95.4 (docker)\r\n - Hassio (Yes/No): No\r\n - alexa_media  (version from `const.py` or HA startup): v1.3.1\r\n - alexapy (version from `pip show alexapy` or HA startup): 0.7.0\r\n\r\n**Additional context**\r\nAdd any other context about the problem here.\r\n", "reactions": {"url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/258/reactions", "total_count": 7, "+1": 7, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/258/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/256", "repository_url": "https://api.github.com/repos/custom-components/alexa_media_player", "labels_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/256/labels{/name}", "comments_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/256/comments", "events_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/256/events", "html_url": "https://github.com/custom-components/alexa_media_player/issues/256", "id": 468432921, "node_id": "MDU6SXNzdWU0Njg0MzI5MjE=", "number": 256, "title": "Guard state not updated in Home Assistant", "user": {"login": "PlayedIn", "id": 42630166, "node_id": "MDQ6VXNlcjQyNjMwMTY2", "avatar_url": "https://avatars.githubusercontent.com/u/42630166?v=4", "gravatar_id": "", "url": "https://api.github.com/users/PlayedIn", "html_url": "https://github.com/PlayedIn", "followers_url": "https://api.github.com/users/PlayedIn/followers", "following_url": "https://api.github.com/users/PlayedIn/following{/other_user}", "gists_url": "https://api.github.com/users/PlayedIn/gists{/gist_id}", "starred_url": "https://api.github.com/users/PlayedIn/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/PlayedIn/subscriptions", "organizations_url": "https://api.github.com/users/PlayedIn/orgs", "repos_url": "https://api.github.com/users/PlayedIn/repos", "events_url": "https://api.github.com/users/PlayedIn/events{/privacy}", "received_events_url": "https://api.github.com/users/PlayedIn/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 983327104, "node_id": "MDU6TGFiZWw5ODMzMjcxMDQ=", "url": "https://api.github.com/repos/custom-components/alexa_media_player/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 23, "created_at": "2019-07-16T03:47:10Z", "updated_at": "2019-09-09T03:58:15Z", "closed_at": "2019-08-08T01:21:03Z", "author_association": "NONE", "active_lock_reason": null, "body": "I have no problems enabling Alexa Guard mode using this component. When I do, the button I press in lovelace changes color to show the status of whether Alexa Guard has been enabled or disabled.\r\n\r\nHowever if Alexa Guard is enabled or disabled by saying to the Amazon echo, \u201cI\u2019m leaving\u201d, or disabled by saying \u201cI\u2019m home\u201d, the state for Alexa Guard doesn\u2019t change in Home Assistant.  It remains \"disarmed\" whether Alexa Guard is enabled or not.\r\n\r\nAfter enabling Alexa Guard by saying to Amazon echo, \"I'm leaving\", I get the following log entries:\r\n\r\n```\r\n2019-07-15 23:30:27 DEBUG (SyncWorker_1) [alexapy.alexaapi] get_guard_state response: {'deviceStates': [{'entity': {'entityId': 'AAA_OnGuardSmartHomeBridgeService_XXX', 'entityType': ''}, 'capabilityStates': ['{\"namespace\":\"Alexa.SecurityPanelController\",\"name\":\"armState\",\"value\":\"ARMED_STAY\",\"timeOfSample\":\"2019-07-16T03:30:27.821Z\",\"uncertaintyInMilliseconds\":0,\"deepQuery\":true,\"timeOfStateChange\":\"\"}'], 'error': None}], 'errors': []}\r\n```\r\n\r\n\r\nUpon turning off Alexa Guard by saying, \"I'm Home\", I get the following log entries:\r\n\r\n```\r\n2019-07-15 23:33:03 DEBUG (SyncWorker_2) [alexapy.alexaapi] get_guard_state response: {'deviceStates': [{'entity': {'entityId': 'AAA_OnGuardSmartHomeBridgeService_XXX', 'entityType': ''}, 'capabilityStates': ['{\"namespace\":\"Alexa.SecurityPanelController\",\"name\":\"armState\",\"value\":\"ARMED_AWAY\",\"timeOfSample\":\"2019-07-16T03:33:03.186Z\",\"uncertaintyInMilliseconds\":0,\"deepQuery\":true,\"timeOfStateChange\":\"\"}'], 'error': None}], 'errors': []}\r\n```\r\n\r\nEDIT: Formatting/obfuscation", "reactions": {"url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/256/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/256/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/254", "repository_url": "https://api.github.com/repos/custom-components/alexa_media_player", "labels_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/254/labels{/name}", "comments_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/254/comments", "events_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/254/events", "html_url": "https://github.com/custom-components/alexa_media_player/issues/254", "id": 467683353, "node_id": "MDU6SXNzdWU0Njc2ODMzNTM=", "number": 254, "title": "Mobile Alexa app media player does not display media state", "user": {"login": "alandtse", "id": 7086117, "node_id": "MDQ6VXNlcjcwODYxMTc=", "avatar_url": "https://avatars.githubusercontent.com/u/7086117?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alandtse", "html_url": "https://github.com/alandtse", "followers_url": "https://api.github.com/users/alandtse/followers", "following_url": "https://api.github.com/users/alandtse/following{/other_user}", "gists_url": "https://api.github.com/users/alandtse/gists{/gist_id}", "starred_url": "https://api.github.com/users/alandtse/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alandtse/subscriptions", "organizations_url": "https://api.github.com/users/alandtse/orgs", "repos_url": "https://api.github.com/users/alandtse/repos", "events_url": "https://api.github.com/users/alandtse/events{/privacy}", "received_events_url": "https://api.github.com/users/alandtse/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 983327104, "node_id": "MDU6TGFiZWw5ODMzMjcxMDQ=", "url": "https://api.github.com/repos/custom-components/alexa_media_player/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}, {"id": 1246346849, "node_id": "MDU6TGFiZWwxMjQ2MzQ2ODQ5", "url": "https://api.github.com/repos/custom-components/alexa_media_player/labels/alexapy", "name": "alexapy", "color": "e23ba8", "default": false, "description": "Issue relates to the API"}, {"id": 2434431890, "node_id": "MDU6TGFiZWwyNDM0NDMxODkw", "url": "https://api.github.com/repos/custom-components/alexa_media_player/labels/no-issue-activity", "name": "no-issue-activity", "color": "ededed", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2019-07-13T07:12:37Z", "updated_at": "2020-10-25T01:54:35Z", "closed_at": "2020-10-25T01:54:35Z", "author_association": "COLLABORATOR", "active_lock_reason": null, "body": "This is spun off the below comment. Essentially the media player for mobile apps could consist of multiple serial numbers under the appDeviceList attribute. Websockets can easily determine which serial to poll, but I do not think polling has an effective method other than searching every appDeviceList which can be 10s of calls.\r\n\r\n--Begin old comment\r\n\r\nI think the issue is the Alexa can connect multiple phones to the same App instance.  Since, we typically treat each media device as only having 1 serial number, we don't have logic if they have secondary serial numbers.\r\n\r\nIt also looks like the mobile app is split into multiple `accountNames` depending on the function (play music or TTS).\r\n\r\n<details>\r\n\r\n```json\r\n{\"accountName\":\"This Device\",\r\n\"appDeviceList\":\r\n[{\"deviceAccountId\":\"devAccount1\",\"deviceType\":\"A2TF17PFR55MTB\",\"serialNumber\":\"serNo1\"},\r\n{\"deviceAccountId\":\"devAccount2\",\"deviceType\":\"A2TF17PFR55MTB\",\"serialNumber\":\"serNo2\"}],\r\n\"capabilities\":[\"VOLUME_SETTING\",\"DIALOG_INTERFACE_VERSION\",\"MICROPHONE\",\"REMINDERS\",\"ASCENDING_ALARM_VOLUME\"],\"charging\":null,\"clusterMembers\":[],\"deviceAccountId\":\"devAccount1\",\"deviceFamily\":\"VOX\",\"deviceOwnerCustomerId\":\"REDACTED\",\"deviceType\":\"A2TF17PFR55MTB\",\"deviceTypeFriendlyName\":null,\"essid\":null,\"language\":null,\"macAddress\":null,\"online\":true,\"parentClusters\":[],\"postalCode\":null,\"registrationId\":null,\"remainingBatteryLevel\":null,\r\n\"serialNumber\":\"serNo2\",\"softwareVersion\":\"130050002\"},\r\n\r\n\r\n{\"accountName\":\"Alan's Alexa Apps\",\r\n\"appDeviceList\":\r\n[{\"deviceAccountId\":\"devAccount3\",\"deviceType\":\"A1DL2DVDQVK3Q\",\"serialNumber\":\"serNo3\"},\r\n{\"deviceAccountId\":\"devAccount4\",\"deviceType\":\"A1DL2DVDQVK3Q\",\"serialNumber\":\"serNo4\"}],\r\n\"capabilities\":[\"VOLUME_SETTING\",\"MICROPHONE\",\"PEONY\"],\"charging\":null,\"clusterMembers\":[],\"deviceAccountId\":\"devAccount3\",\"deviceFamily\":\"AMAZONMOBILEMUSIC_ANDROID\",\"deviceOwnerCustomerId\":\"REDACTED\",\"deviceType\":\"A1DL2DVDQVK3Q\",\"deviceTypeFriendlyName\":null,\"essid\":null,\"language\":null,\"macAddress\":null,\"online\":false,\"parentClusters\":[],\"postalCode\":null,\"registrationId\":null,\"remainingBatteryLevel\":null,\r\n\"serialNumber\":\"serNo4\",\"softwareVersion\":\"0\"}\r\n```\r\n\r\n</details>\r\n\r\n_Originally posted by @alandtse in https://github.com/keatontaylor/alexa_media_player/issues/249#issuecomment-511084209_", "reactions": {"url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/254/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/254/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/249", "repository_url": "https://api.github.com/repos/custom-components/alexa_media_player", "labels_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/249/labels{/name}", "comments_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/249/comments", "events_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/249/events", "html_url": "https://github.com/custom-components/alexa_media_player/issues/249", "id": 466497840, "node_id": "MDU6SXNzdWU0NjY0OTc4NDA=", "number": 249, "title": "sensor.last_alexa goes empty if alexa is triggered on the phone app", "user": {"login": "tiagofreire-pt", "id": 41837236, "node_id": "MDQ6VXNlcjQxODM3MjM2", "avatar_url": "https://avatars.githubusercontent.com/u/41837236?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tiagofreire-pt", "html_url": "https://github.com/tiagofreire-pt", "followers_url": "https://api.github.com/users/tiagofreire-pt/followers", "following_url": "https://api.github.com/users/tiagofreire-pt/following{/other_user}", "gists_url": "https://api.github.com/users/tiagofreire-pt/gists{/gist_id}", "starred_url": "https://api.github.com/users/tiagofreire-pt/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tiagofreire-pt/subscriptions", "organizations_url": "https://api.github.com/users/tiagofreire-pt/orgs", "repos_url": "https://api.github.com/users/tiagofreire-pt/repos", "events_url": "https://api.github.com/users/tiagofreire-pt/events{/privacy}", "received_events_url": "https://api.github.com/users/tiagofreire-pt/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 983327104, "node_id": "MDU6TGFiZWw5ODMzMjcxMDQ=", "url": "https://api.github.com/repos/custom-components/alexa_media_player/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 20, "created_at": "2019-07-10T20:15:44Z", "updated_at": "2019-08-04T10:36:41Z", "closed_at": "2019-08-04T10:36:41Z", "author_association": "NONE", "active_lock_reason": null, "body": "**Describe the bug**\r\nsensor.last_alexa returns empty if alexa is triggered on its android app. Returning to the my echo dot, states correctly if triggered there.\r\n\r\n**System details**\r\n - Home-assistant (version): 0.95, with last version of alexa_media_player on HACS.\r\n", "reactions": {"url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/249/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/249/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/248", "repository_url": "https://api.github.com/repos/custom-components/alexa_media_player", "labels_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/248/labels{/name}", "comments_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/248/comments", "events_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/248/events", "html_url": "https://github.com/custom-components/alexa_media_player/issues/248", "id": 464985940, "node_id": "MDU6SXNzdWU0NjQ5ODU5NDA=", "number": 248, "title": "Alexa Guard: TypeError: 'NoneType' object is not subscriptable` in state_json refresh", "user": {"login": "alandtse", "id": 7086117, "node_id": "MDQ6VXNlcjcwODYxMTc=", "avatar_url": "https://avatars.githubusercontent.com/u/7086117?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alandtse", "html_url": "https://github.com/alandtse", "followers_url": "https://api.github.com/users/alandtse/followers", "following_url": "https://api.github.com/users/alandtse/following{/other_user}", "gists_url": "https://api.github.com/users/alandtse/gists{/gist_id}", "starred_url": "https://api.github.com/users/alandtse/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alandtse/subscriptions", "organizations_url": "https://api.github.com/users/alandtse/orgs", "repos_url": "https://api.github.com/users/alandtse/repos", "events_url": "https://api.github.com/users/alandtse/events{/privacy}", "received_events_url": "https://api.github.com/users/alandtse/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 983327104, "node_id": "MDU6TGFiZWw5ODMzMjcxMDQ=", "url": "https://api.github.com/repos/custom-components/alexa_media_player/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2019-07-07T19:44:20Z", "updated_at": "2019-08-08T04:44:05Z", "closed_at": "2019-08-08T04:44:05Z", "author_association": "COLLABORATOR", "active_lock_reason": null, "body": "Just a heads up, I'm not in Germany and I too am seeing this (I am in the U.S.).\r\n\r\n```\r\nSun Jul 07 2019 07:14:24 GMT-0700 (Pacific Daylight Time)\r\nError doing job: Future exception was never retrieved\r\nTraceback (most recent call last):\r\n  File \"/usr/local/lib/python3.7/concurrent/futures/thread.py\", line 57, in run\r\n    result = self.fn(*self.args, **self.kwargs)\r\n  File \"/config/custom_components/alexa_media/alarm_control_panel.py\", line 95, in _handle_event\r\n    self.refresh()\r\n  File \"/usr/src/homeassistant/homeassistant/util/__init__.py\", line 224, in wrapper\r\n    result = method(*args, **kwargs)\r\n  File \"/usr/src/homeassistant/homeassistant/util/__init__.py\", line 224, in wrapper\r\n    result = method(*args, **kwargs)\r\n  File \"/config/custom_components/alexa_media/alarm_control_panel.py\", line 106, in refresh\r\n    if state_json['deviceStates']:\r\nTypeError: 'NoneType' object is not subscriptable\r\n```\r\n\r\n_Originally posted by @monsieurlatte in https://github.com/keatontaylor/alexa_media_player/issues/243#issuecomment-509003674_", "reactions": {"url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/248/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/248/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/243", "repository_url": "https://api.github.com/repos/custom-components/alexa_media_player", "labels_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/243/labels{/name}", "comments_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/243/comments", "events_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/243/events", "html_url": "https://github.com/custom-components/alexa_media_player/issues/243", "id": 464477952, "node_id": "MDU6SXNzdWU0NjQ0Nzc5NTI=", "number": 243, "title": "Alexa Guard: TypeError: 'NoneType' object is not subscriptable in init", "user": {"login": "alandtse", "id": 7086117, "node_id": "MDQ6VXNlcjcwODYxMTc=", "avatar_url": "https://avatars.githubusercontent.com/u/7086117?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alandtse", "html_url": "https://github.com/alandtse", "followers_url": "https://api.github.com/users/alandtse/followers", "following_url": "https://api.github.com/users/alandtse/following{/other_user}", "gists_url": "https://api.github.com/users/alandtse/gists{/gist_id}", "starred_url": "https://api.github.com/users/alandtse/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alandtse/subscriptions", "organizations_url": "https://api.github.com/users/alandtse/orgs", "repos_url": "https://api.github.com/users/alandtse/repos", "events_url": "https://api.github.com/users/alandtse/events{/privacy}", "received_events_url": "https://api.github.com/users/alandtse/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 983327104, "node_id": "MDU6TGFiZWw5ODMzMjcxMDQ=", "url": "https://api.github.com/repos/custom-components/alexa_media_player/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2019-07-05T06:12:04Z", "updated_at": "2019-08-08T04:44:04Z", "closed_at": "2019-08-08T04:44:04Z", "author_association": "COLLABORATOR", "active_lock_reason": null, "body": "Site note (I think not relevant within this issue): The log has an error during setup of component:\r\n\r\n```\r\n2019-07-04 10:28:24 ERROR (MainThread) [homeassistant.components.alarm_control_panel] Error while setting up platform alexa_media\r\nTraceback (most recent call last):\r\n  File \"/usr/src/homeassistant/homeassistant/helpers/entity_platform.py\", line 126, in _async_setup_platform\r\n    SLOW_SETUP_MAX_WAIT)\r\n  File \"/usr/local/lib/python3.7/asyncio/tasks.py\", line 416, in wait_for\r\n    return fut.result()\r\n  File \"/usr/local/lib/python3.7/concurrent/futures/thread.py\", line 57, in run\r\n    result = self.fn(*self.args, **self.kwargs)\r\n  File \"/config/custom_components/alexa_media/alarm_control_panel.py\", line 35, in setup_platform\r\n    hass)  \\\r\n  File \"/config/custom_components/alexa_media/alarm_control_panel.py\", line 88, in __init__\r\n    guard_dict = (data['locationDetails']\r\nTypeError: 'NoneType' object is not subscriptable\r\n\r\n```\r\n\r\nThat is because, alexa guard is not yet available in germany.\r\n\r\n_Originally posted by @lweberru in https://github.com/keatontaylor/alexa_media_player/issues/242#issuecomment-508400440_", "reactions": {"url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/243/reactions", "total_count": 1, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/243/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/230", "repository_url": "https://api.github.com/repos/custom-components/alexa_media_player", "labels_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/230/labels{/name}", "comments_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/230/comments", "events_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/230/events", "html_url": "https://github.com/custom-components/alexa_media_player/issues/230", "id": 460429725, "node_id": "MDU6SXNzdWU0NjA0Mjk3MjU=", "number": 230, "title": "Alexa Guard no longer works after renaming the entity", "user": {"login": "FuzzyMistborn", "id": 16689090, "node_id": "MDQ6VXNlcjE2Njg5MDkw", "avatar_url": "https://avatars.githubusercontent.com/u/16689090?v=4", "gravatar_id": "", "url": "https://api.github.com/users/FuzzyMistborn", "html_url": "https://github.com/FuzzyMistborn", "followers_url": "https://api.github.com/users/FuzzyMistborn/followers", "following_url": "https://api.github.com/users/FuzzyMistborn/following{/other_user}", "gists_url": "https://api.github.com/users/FuzzyMistborn/gists{/gist_id}", "starred_url": "https://api.github.com/users/FuzzyMistborn/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/FuzzyMistborn/subscriptions", "organizations_url": "https://api.github.com/users/FuzzyMistborn/orgs", "repos_url": "https://api.github.com/users/FuzzyMistborn/repos", "events_url": "https://api.github.com/users/FuzzyMistborn/events{/privacy}", "received_events_url": "https://api.github.com/users/FuzzyMistborn/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 983327104, "node_id": "MDU6TGFiZWw5ODMzMjcxMDQ=", "url": "https://api.github.com/repos/custom-components/alexa_media_player/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 10, "created_at": "2019-06-25T13:37:06Z", "updated_at": "2019-06-30T07:59:14Z", "closed_at": "2019-06-30T07:59:14Z", "author_association": "NONE", "active_lock_reason": null, "body": "**Describe the bug**\r\nI updated to the latest version and Alexa Guard showed up.  I tested it and it worked fine.  I used the HASS rename function to rename the device (wanted to remove the letters/numbers at the end) and now it doesn't work/show up.  I see the following error in HASS:\r\n\r\n```\r\nAn error occured accessing AlexaAPI: An exception of type JSONDecodeError occurred. Arguments:\r\n('Expecting value: line 1 column 1 (char 0)',)\r\n```\r\n\r\nAnd a separate error:\r\n\r\n```\r\nError while setting up platform alexa_media\r\nTraceback (most recent call last):\r\n  File \"/srv/homeassistant/lib/python3.7/site-packages/homeassistant/helpers/entity_platform.py\", line 126, in _async_setup_platform\r\n    SLOW_SETUP_MAX_WAIT)\r\n  File \"/usr/local/lib/python3.7/asyncio/tasks.py\", line 416, in wait_for\r\n    return fut.result()\r\n  File \"/usr/local/lib/python3.7/concurrent/futures/thread.py\", line 57, in run\r\n    result = self.fn(*self.args, **self.kwargs)\r\n  File \"/home/homeassistant/.homeassistant/custom_components/alexa_media/alarm_control_panel.py\", line 34, in setup_platform\r\n    hass)  \\\r\n  File \"/home/homeassistant/.homeassistant/custom_components/alexa_media/alarm_control_panel.py\", line 70, in __init__\r\n    guard_dict = (data['locationDetails']\r\nTypeError: 'NoneType' object is not subscriptable\r\n```\r\n\r\n**To Reproduce**\r\nNot sure if this is what caused it but try renaming Alexa Guard panel in HASS.\r\n\r\n**Expected behavior**\r\nAlexa Guard alarm panel showing up/functioning\r\n\r\n**System details**\r\n - Home-assistant (version): 0.94.3\r\n - Hassio (Yes/No): No (hassbian)\r\n - alexa_media  (version from `const.py` or HA startup): 1.3\r\n - alexapy (version from `pip show alexapy` or HA startup): 0.7\r\n", "reactions": {"url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/230/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/230/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/226", "repository_url": "https://api.github.com/repos/custom-components/alexa_media_player", "labels_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/226/labels{/name}", "comments_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/226/comments", "events_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/226/events", "html_url": "https://github.com/custom-components/alexa_media_player/issues/226", "id": 459598500, "node_id": "MDU6SXNzdWU0NTk1OTg1MDA=", "number": 226, "title": "KeyError: 'LambdaBridge_AAA/OnGuardSmartHomeBridgeService'", "user": {"login": "alandtse", "id": 7086117, "node_id": "MDQ6VXNlcjcwODYxMTc=", "avatar_url": "https://avatars.githubusercontent.com/u/7086117?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alandtse", "html_url": "https://github.com/alandtse", "followers_url": "https://api.github.com/users/alandtse/followers", "following_url": "https://api.github.com/users/alandtse/following{/other_user}", "gists_url": "https://api.github.com/users/alandtse/gists{/gist_id}", "starred_url": "https://api.github.com/users/alandtse/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alandtse/subscriptions", "organizations_url": "https://api.github.com/users/alandtse/orgs", "repos_url": "https://api.github.com/users/alandtse/repos", "events_url": "https://api.github.com/users/alandtse/events{/privacy}", "received_events_url": "https://api.github.com/users/alandtse/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 983327104, "node_id": "MDU6TGFiZWw5ODMzMjcxMDQ=", "url": "https://api.github.com/repos/custom-components/alexa_media_player/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": {"login": "alandtse", "id": 7086117, "node_id": "MDQ6VXNlcjcwODYxMTc=", "avatar_url": "https://avatars.githubusercontent.com/u/7086117?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alandtse", "html_url": "https://github.com/alandtse", "followers_url": "https://api.github.com/users/alandtse/followers", "following_url": "https://api.github.com/users/alandtse/following{/other_user}", "gists_url": "https://api.github.com/users/alandtse/gists{/gist_id}", "starred_url": "https://api.github.com/users/alandtse/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alandtse/subscriptions", "organizations_url": "https://api.github.com/users/alandtse/orgs", "repos_url": "https://api.github.com/users/alandtse/repos", "events_url": "https://api.github.com/users/alandtse/events{/privacy}", "received_events_url": "https://api.github.com/users/alandtse/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "alandtse", "id": 7086117, "node_id": "MDQ6VXNlcjcwODYxMTc=", "avatar_url": "https://avatars.githubusercontent.com/u/7086117?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alandtse", "html_url": "https://github.com/alandtse", "followers_url": "https://api.github.com/users/alandtse/followers", "following_url": "https://api.github.com/users/alandtse/following{/other_user}", "gists_url": "https://api.github.com/users/alandtse/gists{/gist_id}", "starred_url": "https://api.github.com/users/alandtse/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alandtse/subscriptions", "organizations_url": "https://api.github.com/users/alandtse/orgs", "repos_url": "https://api.github.com/users/alandtse/repos", "events_url": "https://api.github.com/users/alandtse/events{/privacy}", "received_events_url": "https://api.github.com/users/alandtse/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 7, "created_at": "2019-06-23T17:21:50Z", "updated_at": "2019-06-30T07:58:00Z", "closed_at": "2019-06-30T07:58:00Z", "author_association": "COLLABORATOR", "active_lock_reason": null, "body": "**Describe the bug**\r\n```\r\n2019-06-23 09:59:32 ERROR (MainThread) [homeassistant.components.alarm_control_panel] Error while setting up platform alexa_media\r\nTraceback (most recent call last):\r\n  File \"/usr/src/app/homeassistant/helpers/entity_platform.py\", line 126, in _async_setup_platform\r\n    SLOW_SETUP_MAX_WAIT)\r\n  File \"/usr/local/lib/python3.7/asyncio/tasks.py\", line 416, in wait_for\r\n    return fut.result()\r\n  File \"/usr/local/lib/python3.7/concurrent/futures/thread.py\", line 57, in run\r\n    result = self.fn(*self.args, **self.kwargs)\r\n  File \"/config/custom_components/alexa_media/alarm_control_panel.py\", line 34, in setup_platform\r\n    hass)  \\\r\n  File \"/config/custom_components/alexa_media/alarm_control_panel.py\", line 73, in __init__\r\n    ['LambdaBridge_AAA/OnGuardSmartHomeBridgeService']\r\nKeyError: 'LambdaBridge_AAA/OnGuardSmartHomeBridgeService'\r\n```\r\n\r\n**To Reproduce**\r\nSteps to reproduce the behavior:\r\n1. Start HA in the UK or other location without Alexa Guard.\r\n\r\n**Expected behavior**\r\nNo errors\r\n\r\n**Screenshots**\r\nIf applicable, add screenshots to help explain your problem.\r\n\r\n**System details**\r\n - Home-assistant (version): \r\n - Hassio (Yes/No): No\r\n - alexa_media  (version from `const.py` or HA startup): 1.3.0\r\n - alexapy (version from `pip show alexapy` or HA startup): 0.7.0\r\n\r\n**Additional context**\r\n[Thread post](https://community.home-assistant.io/t/echo-devices-alexa-as-media-player-testers-needed/58639/2799)", "reactions": {"url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/226/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/226/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/210", "repository_url": "https://api.github.com/repos/custom-components/alexa_media_player", "labels_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/210/labels{/name}", "comments_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/210/comments", "events_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/210/events", "html_url": "https://github.com/custom-components/alexa_media_player/issues/210", "id": 456528282, "node_id": "MDU6SXNzdWU0NTY1MjgyODI=", "number": 210, "title": "Multiple accounts Announcements only working for one account", "user": {"login": "vigonotion", "id": 1506970, "node_id": "MDQ6VXNlcjE1MDY5NzA=", "avatar_url": "https://avatars.githubusercontent.com/u/1506970?v=4", "gravatar_id": "", "url": "https://api.github.com/users/vigonotion", "html_url": "https://github.com/vigonotion", "followers_url": "https://api.github.com/users/vigonotion/followers", "following_url": "https://api.github.com/users/vigonotion/following{/other_user}", "gists_url": "https://api.github.com/users/vigonotion/gists{/gist_id}", "starred_url": "https://api.github.com/users/vigonotion/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/vigonotion/subscriptions", "organizations_url": "https://api.github.com/users/vigonotion/orgs", "repos_url": "https://api.github.com/users/vigonotion/repos", "events_url": "https://api.github.com/users/vigonotion/events{/privacy}", "received_events_url": "https://api.github.com/users/vigonotion/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 983327104, "node_id": "MDU6TGFiZWw5ODMzMjcxMDQ=", "url": "https://api.github.com/repos/custom-components/alexa_media_player/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}, {"id": 1246346849, "node_id": "MDU6TGFiZWwxMjQ2MzQ2ODQ5", "url": "https://api.github.com/repos/custom-components/alexa_media_player/labels/alexapy", "name": "alexapy", "color": "e23ba8", "default": false, "description": "Issue relates to the API"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 9, "created_at": "2019-06-15T11:23:42Z", "updated_at": "2019-06-20T10:32:03Z", "closed_at": "2019-06-20T10:32:03Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "When adding two accounts, announcements only work on one account.\r\n\r\n```yaml\r\nalexa_media:\r\n  accounts:\r\n    - email: !secret alexa_one_email\r\n      password: !secret alexa_one_password\r\n      url: !secret alexa_one_url\r\n    - email: !secret alexa_two_email\r\n      password: !secret alexa_two_password\r\n      url: !secret alexa_two_url\r\n```\r\n\r\nI deleted the pickle file and updated home assistant, now the other devices from account two can have announcements but not from account one. TTS works on all devices on all accounts.\r\n\r\nThere are no log entries from alexa_media", "reactions": {"url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/210/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/210/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/166", "repository_url": "https://api.github.com/repos/custom-components/alexa_media_player", "labels_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/166/labels{/name}", "comments_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/166/comments", "events_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/166/events", "html_url": "https://github.com/custom-components/alexa_media_player/issues/166", "id": 435679019, "node_id": "MDU6SXNzdWU0MzU2NzkwMTk=", "number": 166, "title": "Echo Buttons (and possibly other Alexa Gadgets) showing on Sources list", "user": {"login": "gadgetchnnel", "id": 2099542, "node_id": "MDQ6VXNlcjIwOTk1NDI=", "avatar_url": "https://avatars.githubusercontent.com/u/2099542?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gadgetchnnel", "html_url": "https://github.com/gadgetchnnel", "followers_url": "https://api.github.com/users/gadgetchnnel/followers", "following_url": "https://api.github.com/users/gadgetchnnel/following{/other_user}", "gists_url": "https://api.github.com/users/gadgetchnnel/gists{/gist_id}", "starred_url": "https://api.github.com/users/gadgetchnnel/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gadgetchnnel/subscriptions", "organizations_url": "https://api.github.com/users/gadgetchnnel/orgs", "repos_url": "https://api.github.com/users/gadgetchnnel/repos", "events_url": "https://api.github.com/users/gadgetchnnel/events{/privacy}", "received_events_url": "https://api.github.com/users/gadgetchnnel/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 983327104, "node_id": "MDU6TGFiZWw5ODMzMjcxMDQ=", "url": "https://api.github.com/repos/custom-components/alexa_media_player/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2019-04-22T10:20:54Z", "updated_at": "2019-05-01T04:23:37Z", "closed_at": "2019-05-01T04:23:37Z", "author_association": "NONE", "active_lock_reason": null, "body": "The Sources list appears to pick up all Bluetooth devices connected to the Alexa device, and not just speakers or devices (such as mobile phones) using the Echo as a Bluetooth speaker. \r\nSince Alexa Gadgets (such as the Echo Buttons and the Echo Wall Clock) connect over Bluetooth, these are also being included in the list. For me that means that I have several Echo Buttons showing in the list.\r\n\r\nIs it possible to filter this list so it only has speakers are included?\r\nIf the type isn't returned it may be possible to do it by name. I know Echo Buttons all have names starting with EchoBtn. I don't know about the Echo Wall Clock as this hasn't yet launched in the UK.", "reactions": {"url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/166/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/166/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/164", "repository_url": "https://api.github.com/repos/custom-components/alexa_media_player", "labels_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/164/labels{/name}", "comments_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/164/comments", "events_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/164/events", "html_url": "https://github.com/custom-components/alexa_media_player/issues/164", "id": 435554757, "node_id": "MDU6SXNzdWU0MzU1NTQ3NTc=", "number": 164, "title": "Missing services.yaml and manifest.json for 0.92.0 Betas/Final", "user": {"login": "dreimer1986", "id": 29841368, "node_id": "MDQ6VXNlcjI5ODQxMzY4", "avatar_url": "https://avatars.githubusercontent.com/u/29841368?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dreimer1986", "html_url": "https://github.com/dreimer1986", "followers_url": "https://api.github.com/users/dreimer1986/followers", "following_url": "https://api.github.com/users/dreimer1986/following{/other_user}", "gists_url": "https://api.github.com/users/dreimer1986/gists{/gist_id}", "starred_url": "https://api.github.com/users/dreimer1986/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dreimer1986/subscriptions", "organizations_url": "https://api.github.com/users/dreimer1986/orgs", "repos_url": "https://api.github.com/users/dreimer1986/repos", "events_url": "https://api.github.com/users/dreimer1986/events{/privacy}", "received_events_url": "https://api.github.com/users/dreimer1986/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 983327104, "node_id": "MDU6TGFiZWw5ODMzMjcxMDQ=", "url": "https://api.github.com/repos/custom-components/alexa_media_player/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}, {"id": 983327107, "node_id": "MDU6TGFiZWw5ODMzMjcxMDc=", "url": "https://api.github.com/repos/custom-components/alexa_media_player/labels/help%20wanted", "name": "help wanted", "color": "008672", "default": true, "description": "Extra attention is needed"}, {"id": 983327108, "node_id": "MDU6TGFiZWw5ODMzMjcxMDg=", "url": "https://api.github.com/repos/custom-components/alexa_media_player/labels/good%20first%20issue", "name": "good first issue", "color": "7057ff", "default": true, "description": "Good for newcomers"}], "state": "closed", "locked": false, "assignee": {"login": "alandtse", "id": 7086117, "node_id": "MDQ6VXNlcjcwODYxMTc=", "avatar_url": "https://avatars.githubusercontent.com/u/7086117?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alandtse", "html_url": "https://github.com/alandtse", "followers_url": "https://api.github.com/users/alandtse/followers", "following_url": "https://api.github.com/users/alandtse/following{/other_user}", "gists_url": "https://api.github.com/users/alandtse/gists{/gist_id}", "starred_url": "https://api.github.com/users/alandtse/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alandtse/subscriptions", "organizations_url": "https://api.github.com/users/alandtse/orgs", "repos_url": "https://api.github.com/users/alandtse/repos", "events_url": "https://api.github.com/users/alandtse/events{/privacy}", "received_events_url": "https://api.github.com/users/alandtse/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "alandtse", "id": 7086117, "node_id": "MDQ6VXNlcjcwODYxMTc=", "avatar_url": "https://avatars.githubusercontent.com/u/7086117?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alandtse", "html_url": "https://github.com/alandtse", "followers_url": "https://api.github.com/users/alandtse/followers", "following_url": "https://api.github.com/users/alandtse/following{/other_user}", "gists_url": "https://api.github.com/users/alandtse/gists{/gist_id}", "starred_url": "https://api.github.com/users/alandtse/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alandtse/subscriptions", "organizations_url": "https://api.github.com/users/alandtse/orgs", "repos_url": "https://api.github.com/users/alandtse/repos", "events_url": "https://api.github.com/users/alandtse/events{/privacy}", "received_events_url": "https://api.github.com/users/alandtse/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 2, "created_at": "2019-04-21T22:43:49Z", "updated_at": "2019-05-01T04:23:37Z", "closed_at": "2019-05-01T04:23:36Z", "author_association": "NONE", "active_lock_reason": null, "body": "After I went to 0.92.0B1 and B2 I am greeted with these nice warnings now.\r\n\r\nWARNING (MainThread) [homeassistant.helpers.service] Unable to find services.yaml for the alexa_media integration\r\n\r\nNot only your component, almost ALL custom components I use are listed with such warnings. Thus I thought, I open a few reports ^^", "reactions": {"url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/164/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/164/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/156", "repository_url": "https://api.github.com/repos/custom-components/alexa_media_player", "labels_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/156/labels{/name}", "comments_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/156/comments", "events_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/156/events", "html_url": "https://github.com/custom-components/alexa_media_player/issues/156", "id": 431167151, "node_id": "MDU6SXNzdWU0MzExNjcxNTE=", "number": 156, "title": "Routine Error: Operation Payload", "user": {"login": "almostserious", "id": 14896478, "node_id": "MDQ6VXNlcjE0ODk2NDc4", "avatar_url": "https://avatars.githubusercontent.com/u/14896478?v=4", "gravatar_id": "", "url": "https://api.github.com/users/almostserious", "html_url": "https://github.com/almostserious", "followers_url": "https://api.github.com/users/almostserious/followers", "following_url": "https://api.github.com/users/almostserious/following{/other_user}", "gists_url": "https://api.github.com/users/almostserious/gists{/gist_id}", "starred_url": "https://api.github.com/users/almostserious/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/almostserious/subscriptions", "organizations_url": "https://api.github.com/users/almostserious/orgs", "repos_url": "https://api.github.com/users/almostserious/repos", "events_url": "https://api.github.com/users/almostserious/events{/privacy}", "received_events_url": "https://api.github.com/users/almostserious/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 983327104, "node_id": "MDU6TGFiZWw5ODMzMjcxMDQ=", "url": "https://api.github.com/repos/custom-components/alexa_media_player/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}, {"id": 1246346849, "node_id": "MDU6TGFiZWwxMjQ2MzQ2ODQ5", "url": "https://api.github.com/repos/custom-components/alexa_media_player/labels/alexapy", "name": "alexapy", "color": "e23ba8", "default": false, "description": "Issue relates to the API"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2019-04-09T20:07:39Z", "updated_at": "2019-05-01T04:23:37Z", "closed_at": "2019-05-01T04:23:37Z", "author_association": "NONE", "active_lock_reason": null, "body": "Im trying to add the Routines. However one of them gives me the Operation Payload Error:\r\n \r\n```json\r\n{\"@type\":\"com.amazon.alexa.behaviors.model.Automation\",\r\n\"automationId\":\"amzn1.alexa.automation.XXX\",\r\n\"name\":null,\r\n\"triggers\":[{\"payload\":{\"customerId\":\"XXX\",\"utterance\":\"Stimmungslicht\",\"locale\":\"de-DE\",\"marketplaceId\":\"XXX\"},\"id\":\"amzn1.alexa.trigger.XXXX\",\"type\":\"CustomUtterance\",\"timeLapse\":null}],\r\n\"sequence\":{\"@type\":\"com.amazon.alexa.behaviors.model.Sequence\",\"sequenceId\":\"amzn1.alexa.sequence.XXX\",\r\n\"startNode\":{\"@type\":\"com.amazon.alexa.behaviors.model.SerialNode\",\"name\":null,\r\n\"nodesToExecute\":[{\"@type\":\"com.amazon.alexa.behaviors.model.ParallelNode\",\"name\":null,\r\n\"nodesToExecute\":[{\"@type\":\"com.amazon.alexa.behaviors.model.SerialNode\",\"name\":null,\r\n\"nodesToExecute\":[{\"@type\":\"com.amazon.alexa.behaviors.model.OpaquePayloadOperationNode\",\"type\":\"sceneActivate\",\"operationPayload\":{\"customerId\":\"XXX\",\"operationId\":\"sceneActivate\",\"target\":\"XXXX\"},\"name\":null}]},{\"@type\":\"com.amazon.alexa.behaviors.model.SerialNode\",\"name\":null,\r\n\"nodesToExecute\":[{\"@type\":\"com.amazon.alexa.behaviors.model.OpaquePayloadOperationNode\",\"type\":\"sceneActivate\",\"operationPayload\":{\"customerId\":\"XXXX\",\"operationId\":\"sceneActivate\",\"target\":\"XXXX\"},\"name\":null}]},\r\n```\r\n\r\nIm on the latest version for both Hassio and the Custom Component. Running Hassio on a NUC. Using the German Alexa Server.\r\n\r\nEDIT: Formatting json", "reactions": {"url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/156/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/156/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/145", "repository_url": "https://api.github.com/repos/custom-components/alexa_media_player", "labels_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/145/labels{/name}", "comments_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/145/comments", "events_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/145/events", "html_url": "https://github.com/custom-components/alexa_media_player/issues/145", "id": 426831188, "node_id": "MDU6SXNzdWU0MjY4MzExODg=", "number": 145, "title": "Routines are not found when many routines", "user": {"login": "alandtse", "id": 7086117, "node_id": "MDQ6VXNlcjcwODYxMTc=", "avatar_url": "https://avatars.githubusercontent.com/u/7086117?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alandtse", "html_url": "https://github.com/alandtse", "followers_url": "https://api.github.com/users/alandtse/followers", "following_url": "https://api.github.com/users/alandtse/following{/other_user}", "gists_url": "https://api.github.com/users/alandtse/gists{/gist_id}", "starred_url": "https://api.github.com/users/alandtse/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alandtse/subscriptions", "organizations_url": "https://api.github.com/users/alandtse/orgs", "repos_url": "https://api.github.com/users/alandtse/repos", "events_url": "https://api.github.com/users/alandtse/events{/privacy}", "received_events_url": "https://api.github.com/users/alandtse/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 983327104, "node_id": "MDU6TGFiZWw5ODMzMjcxMDQ=", "url": "https://api.github.com/repos/custom-components/alexa_media_player/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}, {"id": 1246346849, "node_id": "MDU6TGFiZWwxMjQ2MzQ2ODQ5", "url": "https://api.github.com/repos/custom-components/alexa_media_player/labels/alexapy", "name": "alexapy", "color": "e23ba8", "default": false, "description": "Issue relates to the API"}], "state": "closed", "locked": false, "assignee": {"login": "alandtse", "id": 7086117, "node_id": "MDQ6VXNlcjcwODYxMTc=", "avatar_url": "https://avatars.githubusercontent.com/u/7086117?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alandtse", "html_url": "https://github.com/alandtse", "followers_url": "https://api.github.com/users/alandtse/followers", "following_url": "https://api.github.com/users/alandtse/following{/other_user}", "gists_url": "https://api.github.com/users/alandtse/gists{/gist_id}", "starred_url": "https://api.github.com/users/alandtse/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alandtse/subscriptions", "organizations_url": "https://api.github.com/users/alandtse/orgs", "repos_url": "https://api.github.com/users/alandtse/repos", "events_url": "https://api.github.com/users/alandtse/events{/privacy}", "received_events_url": "https://api.github.com/users/alandtse/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "alandtse", "id": 7086117, "node_id": "MDQ6VXNlcjcwODYxMTc=", "avatar_url": "https://avatars.githubusercontent.com/u/7086117?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alandtse", "html_url": "https://github.com/alandtse", "followers_url": "https://api.github.com/users/alandtse/followers", "following_url": "https://api.github.com/users/alandtse/following{/other_user}", "gists_url": "https://api.github.com/users/alandtse/gists{/gist_id}", "starred_url": "https://api.github.com/users/alandtse/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alandtse/subscriptions", "organizations_url": "https://api.github.com/users/alandtse/orgs", "repos_url": "https://api.github.com/users/alandtse/repos", "events_url": "https://api.github.com/users/alandtse/events{/privacy}", "received_events_url": "https://api.github.com/users/alandtse/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 1, "created_at": "2019-03-29T06:04:50Z", "updated_at": "2019-04-08T14:11:33Z", "closed_at": "2019-04-08T14:11:33Z", "author_association": "COLLABORATOR", "active_lock_reason": null, "body": "For users with many routines, routines are not always found. The root cause is that our use fo the [automations url](https://alexa.amazon.com/api/behaviors/automations) does not return all routines.  This may be result of a paging variable we are missing.\r\n\r\nThere apparently is a [routines url](https://alexa.amazon.com/api/behaviors/routines) that contains all information for the reporting user.\r\n\r\nFix: Need to check both locations or determine why automations is not complete\r\n", "reactions": {"url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/145/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/145/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/128", "repository_url": "https://api.github.com/repos/custom-components/alexa_media_player", "labels_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/128/labels{/name}", "comments_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/128/comments", "events_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/128/events", "html_url": "https://github.com/custom-components/alexa_media_player/issues/128", "id": 421954483, "node_id": "MDU6SXNzdWU0MjE5NTQ0ODM=", "number": 128, "title": "Websocket times out after period of time", "user": {"login": "alandtse", "id": 7086117, "node_id": "MDQ6VXNlcjcwODYxMTc=", "avatar_url": "https://avatars.githubusercontent.com/u/7086117?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alandtse", "html_url": "https://github.com/alandtse", "followers_url": "https://api.github.com/users/alandtse/followers", "following_url": "https://api.github.com/users/alandtse/following{/other_user}", "gists_url": "https://api.github.com/users/alandtse/gists{/gist_id}", "starred_url": "https://api.github.com/users/alandtse/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alandtse/subscriptions", "organizations_url": "https://api.github.com/users/alandtse/orgs", "repos_url": "https://api.github.com/users/alandtse/repos", "events_url": "https://api.github.com/users/alandtse/events{/privacy}", "received_events_url": "https://api.github.com/users/alandtse/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 983327104, "node_id": "MDU6TGFiZWw5ODMzMjcxMDQ=", "url": "https://api.github.com/repos/custom-components/alexa_media_player/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}, {"id": 1246346849, "node_id": "MDU6TGFiZWwxMjQ2MzQ2ODQ5", "url": "https://api.github.com/repos/custom-components/alexa_media_player/labels/alexapy", "name": "alexapy", "color": "e23ba8", "default": false, "description": "Issue relates to the API"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 11, "created_at": "2019-03-17T18:10:28Z", "updated_at": "2019-03-20T05:20:04Z", "closed_at": "2019-03-20T05:20:04Z", "author_association": "COLLABORATOR", "active_lock_reason": null, "body": "We aren't sending a websocket ping so the websocket eventually times out.\r\n\r\nTwo needed solutions:\r\n\r\n1. Send pings\r\n2. Graceful fallback to polling on loss of websocket", "reactions": {"url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/128/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/128/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/127", "repository_url": "https://api.github.com/repos/custom-components/alexa_media_player", "labels_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/127/labels{/name}", "comments_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/127/comments", "events_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/127/events", "html_url": "https://github.com/custom-components/alexa_media_player/issues/127", "id": 421905740, "node_id": "MDU6SXNzdWU0MjE5MDU3NDA=", "number": 127, "title": "Websocket failed: KeyError: 'ubid-main'", "user": {"login": "mcc05", "id": 38889743, "node_id": "MDQ6VXNlcjM4ODg5NzQz", "avatar_url": "https://avatars.githubusercontent.com/u/38889743?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mcc05", "html_url": "https://github.com/mcc05", "followers_url": "https://api.github.com/users/mcc05/followers", "following_url": "https://api.github.com/users/mcc05/following{/other_user}", "gists_url": "https://api.github.com/users/mcc05/gists{/gist_id}", "starred_url": "https://api.github.com/users/mcc05/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mcc05/subscriptions", "organizations_url": "https://api.github.com/users/mcc05/orgs", "repos_url": "https://api.github.com/users/mcc05/repos", "events_url": "https://api.github.com/users/mcc05/events{/privacy}", "received_events_url": "https://api.github.com/users/mcc05/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 983327104, "node_id": "MDU6TGFiZWw5ODMzMjcxMDQ=", "url": "https://api.github.com/repos/custom-components/alexa_media_player/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}, {"id": 1246346849, "node_id": "MDU6TGFiZWwxMjQ2MzQ2ODQ5", "url": "https://api.github.com/repos/custom-components/alexa_media_player/labels/alexapy", "name": "alexapy", "color": "e23ba8", "default": false, "description": "Issue relates to the API"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2019-03-17T10:22:30Z", "updated_at": "2019-03-20T05:20:04Z", "closed_at": "2019-03-20T05:20:04Z", "author_association": "NONE", "active_lock_reason": null, "body": "Just upgraded to the latest version 1.2.2, and I'm running HA 0.90.b3, however it fails to start with the following error, is there something I'm missing?\r\n\r\n```bash\r\n019-03-17 10:15:20 DEBUG (SyncWorker_0) [alexapy.alexalogin] Logged in as xxxxxxxxx@xxxxxxxx.com\r\n2019-03-17 10:15:20 DEBUG (SyncWorker_0) [alexapy.alexalogin] Using cookies to log in\r\n2019-03-17 10:15:20 DEBUG (SyncWorker_0) [alexapy.alexalogin] Log in successful with cookies\r\n2019-03-17 10:15:20 DEBUG (SyncWorker_0) [custom_components.alexa_media] Setting up Alexa devices\r\n2019-03-17 10:15:20 ERROR (SyncWorker_0) [custom_components.alexa_media] ***********@xxxxxxxx.com: Websocket failed: 'ubid-main'\r\nTraceback (most recent call last):\r\n  File \"/config/custom_components/alexa_media/__init__.py\", line 405, in setup_alexa\r\n    websocket = WebsocketEchoClient(login_obj, ws_handler)\r\n  File \"/config/deps/lib/python3.7/site-packages/alexapy/alexawebsocket.py\", line 37, in __init__\r\n    url += str(self._cookies['ubid-main'])\r\nKeyError: 'ubid-main'\r\n```\r\nEDIT: Fixed log formatting", "reactions": {"url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/127/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/127/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/124", "repository_url": "https://api.github.com/repos/custom-components/alexa_media_player", "labels_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/124/labels{/name}", "comments_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/124/comments", "events_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/124/events", "html_url": "https://github.com/custom-components/alexa_media_player/issues/124", "id": 421139382, "node_id": "MDU6SXNzdWU0MjExMzkzODI=", "number": 124, "title": "Error task exception was never retrieved (entity ID already exist)", "user": {"login": "ehendrix23", "id": 14928070, "node_id": "MDQ6VXNlcjE0OTI4MDcw", "avatar_url": "https://avatars.githubusercontent.com/u/14928070?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ehendrix23", "html_url": "https://github.com/ehendrix23", "followers_url": "https://api.github.com/users/ehendrix23/followers", "following_url": "https://api.github.com/users/ehendrix23/following{/other_user}", "gists_url": "https://api.github.com/users/ehendrix23/gists{/gist_id}", "starred_url": "https://api.github.com/users/ehendrix23/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ehendrix23/subscriptions", "organizations_url": "https://api.github.com/users/ehendrix23/orgs", "repos_url": "https://api.github.com/users/ehendrix23/repos", "events_url": "https://api.github.com/users/ehendrix23/events{/privacy}", "received_events_url": "https://api.github.com/users/ehendrix23/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 983327104, "node_id": "MDU6TGFiZWw5ODMzMjcxMDQ=", "url": "https://api.github.com/repos/custom-components/alexa_media_player/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}, {"id": 983327110, "node_id": "MDU6TGFiZWw5ODMzMjcxMTA=", "url": "https://api.github.com/repos/custom-components/alexa_media_player/labels/question", "name": "question", "color": "d876e3", "default": true, "description": "Further information is requested"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2019-03-14T17:02:00Z", "updated_at": "2019-03-25T04:45:50Z", "closed_at": "2019-03-25T04:45:50Z", "author_association": "NONE", "active_lock_reason": null, "body": "Version 1.2.1; got the following error entries. HA was already running for a number of hours with Alexa working.\r\n\r\n```\r\n2019-03-14 05:14:03 ERROR (SyncWorker_12) [alexapy.alexaapi] An error occured accessing AlexaAPI: An exception of type ConnectionError occurred. Arguments:\r\n(ProtocolError('Connection aborted.', ConnectionResetError(54, 'Connection reset by peer')),)\r\n2019-03-14 05:14:09 ERROR (MainThread) [homeassistant.core] Error doing job: Task exception was never retrieved\r\nTraceback (most recent call last):\r\n  File \"/Users/Media/homeassistant/lib/python3.7/site-packages/homeassistant/helpers/entity_platform.py\", line 344, in _async_add_entity\r\n    raise HomeAssistantError(msg)\r\nhomeassistant.exceptions.HomeAssistantError: Entity id already exists: media_player.ethan_s_echo. Platform alexa_media does not generate unique IDs\r\n2019-03-14 05:14:09 ERROR (MainThread) [homeassistant.core] Error doing job: Task exception was never retrieved\r\nTraceback (most recent call last):\r\n  File \"/Users/Media/homeassistant/lib/python3.7/site-packages/homeassistant/helpers/entity_platform.py\", line 344, in _async_add_entity\r\n    raise HomeAssistantError(msg)\r\nhomeassistant.exceptions.HomeAssistantError: Entity id already exists: media_player.master_bedroom. Platform alexa_media does not generate unique IDs\r\n```\r\n\r\nIt was reporting the above for every Echo I have. Looks like loss of connection, reconnects but then when reconnects it tries to create new entities. \r\nI also checked and it is all still working. Hence reconnecting itself went fine with existing entity IDs working. ", "reactions": {"url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/124/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/124/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/123", "repository_url": "https://api.github.com/repos/custom-components/alexa_media_player", "labels_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/123/labels{/name}", "comments_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/123/comments", "events_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/123/events", "html_url": "https://github.com/custom-components/alexa_media_player/issues/123", "id": 420747669, "node_id": "MDU6SXNzdWU0MjA3NDc2Njk=", "number": 123, "title": "routine doesn't trigger ('operationPayload' Error)", "user": {"login": "remcotim", "id": 43557175, "node_id": "MDQ6VXNlcjQzNTU3MTc1", "avatar_url": "https://avatars.githubusercontent.com/u/43557175?v=4", "gravatar_id": "", "url": "https://api.github.com/users/remcotim", "html_url": "https://github.com/remcotim", "followers_url": "https://api.github.com/users/remcotim/followers", "following_url": "https://api.github.com/users/remcotim/following{/other_user}", "gists_url": "https://api.github.com/users/remcotim/gists{/gist_id}", "starred_url": "https://api.github.com/users/remcotim/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/remcotim/subscriptions", "organizations_url": "https://api.github.com/users/remcotim/orgs", "repos_url": "https://api.github.com/users/remcotim/repos", "events_url": "https://api.github.com/users/remcotim/events{/privacy}", "received_events_url": "https://api.github.com/users/remcotim/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 983327104, "node_id": "MDU6TGFiZWw5ODMzMjcxMDQ=", "url": "https://api.github.com/repos/custom-components/alexa_media_player/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}, {"id": 1246346849, "node_id": "MDU6TGFiZWwxMjQ2MzQ2ODQ5", "url": "https://api.github.com/repos/custom-components/alexa_media_player/labels/alexapy", "name": "alexapy", "color": "e23ba8", "default": false, "description": "Issue relates to the API"}], "state": "closed", "locked": false, "assignee": {"login": "alandtse", "id": 7086117, "node_id": "MDQ6VXNlcjcwODYxMTc=", "avatar_url": "https://avatars.githubusercontent.com/u/7086117?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alandtse", "html_url": "https://github.com/alandtse", "followers_url": "https://api.github.com/users/alandtse/followers", "following_url": "https://api.github.com/users/alandtse/following{/other_user}", "gists_url": "https://api.github.com/users/alandtse/gists{/gist_id}", "starred_url": "https://api.github.com/users/alandtse/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alandtse/subscriptions", "organizations_url": "https://api.github.com/users/alandtse/orgs", "repos_url": "https://api.github.com/users/alandtse/repos", "events_url": "https://api.github.com/users/alandtse/events{/privacy}", "received_events_url": "https://api.github.com/users/alandtse/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "alandtse", "id": 7086117, "node_id": "MDQ6VXNlcjcwODYxMTc=", "avatar_url": "https://avatars.githubusercontent.com/u/7086117?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alandtse", "html_url": "https://github.com/alandtse", "followers_url": "https://api.github.com/users/alandtse/followers", "following_url": "https://api.github.com/users/alandtse/following{/other_user}", "gists_url": "https://api.github.com/users/alandtse/gists{/gist_id}", "starred_url": "https://api.github.com/users/alandtse/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alandtse/subscriptions", "organizations_url": "https://api.github.com/users/alandtse/orgs", "repos_url": "https://api.github.com/users/alandtse/repos", "events_url": "https://api.github.com/users/alandtse/events{/privacy}", "received_events_url": "https://api.github.com/users/alandtse/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 8, "created_at": "2019-03-13T22:26:38Z", "updated_at": "2019-03-17T09:49:03Z", "closed_at": "2019-03-17T09:49:03Z", "author_association": "NONE", "active_lock_reason": null, "body": "routine doesn't trigger if there's more then 1 emulated_hue lights in them.  I can have an endless amount of actions set in the routine, but it only triggers if there is not more then 1 emulated_hue switch.\r\nLog:\r\n\r\n```\r\nWed Mar 13 2019 23:22:04 GMT+0100 (Midden-Europese standaardtijd)\r\n'operationPayload'\r\nTraceback (most recent call last):\r\n  File \"/usr/local/lib/python3.7/site-packages/homeassistant/components/websocket_api/commands.py\", line 148, in handle_call_service\r\n    connection.context(msg))\r\n  File \"/usr/local/lib/python3.7/site-packages/homeassistant/core.py\", line 1133, in async_call\r\n    self._execute_service(handler, service_call))\r\n  File \"/usr/local/lib/python3.7/site-packages/homeassistant/core.py\", line 1155, in _execute_service\r\n    await handler.func(service_call)\r\n  File \"/usr/local/lib/python3.7/site-packages/homeassistant/helpers/entity_component.py\", line 188, in handle_service\r\n    self._platforms.values(), func, call, service_name\r\n  File \"/usr/local/lib/python3.7/site-packages/homeassistant/helpers/service.py\", line 278, in entity_service_call\r\n    future.result()  # pop exception if have\r\n  File \"/usr/local/lib/python3.7/site-packages/homeassistant/helpers/service.py\", line 294, in _handle_service_platform_call\r\n    await func(entity, data)\r\n  File \"/usr/local/lib/python3.7/concurrent/futures/thread.py\", line 57, in run\r\n    result = self.fn(*self.args, **self.kwargs)\r\n  File \"/config/custom_components/alexa_media/media_player.py\", line 586, in play_media\r\n    self.alexa_api.run_routine(media_id)\r\n  File \"/config/deps/lib/python3.7/site-packages/alexapy/alexaapi.py\", line 149, in run_routine\r\n    ['deviceType']) = self._device._device_type\r\nKeyError: 'operationPayload'\r\n```", "reactions": {"url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/123/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/123/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/118", "repository_url": "https://api.github.com/repos/custom-components/alexa_media_player", "labels_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/118/labels{/name}", "comments_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/118/comments", "events_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/118/events", "html_url": "https://github.com/custom-components/alexa_media_player/issues/118", "id": 420303802, "node_id": "MDU6SXNzdWU0MjAzMDM4MDI=", "number": 118, "title": "Invalid targets break notify service", "user": {"login": "alandtse", "id": 7086117, "node_id": "MDQ6VXNlcjcwODYxMTc=", "avatar_url": "https://avatars.githubusercontent.com/u/7086117?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alandtse", "html_url": "https://github.com/alandtse", "followers_url": "https://api.github.com/users/alandtse/followers", "following_url": "https://api.github.com/users/alandtse/following{/other_user}", "gists_url": "https://api.github.com/users/alandtse/gists{/gist_id}", "starred_url": "https://api.github.com/users/alandtse/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alandtse/subscriptions", "organizations_url": "https://api.github.com/users/alandtse/orgs", "repos_url": "https://api.github.com/users/alandtse/repos", "events_url": "https://api.github.com/users/alandtse/events{/privacy}", "received_events_url": "https://api.github.com/users/alandtse/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 983327104, "node_id": "MDU6TGFiZWw5ODMzMjcxMDQ=", "url": "https://api.github.com/repos/custom-components/alexa_media_player/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": {"login": "alandtse", "id": 7086117, "node_id": "MDQ6VXNlcjcwODYxMTc=", "avatar_url": "https://avatars.githubusercontent.com/u/7086117?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alandtse", "html_url": "https://github.com/alandtse", "followers_url": "https://api.github.com/users/alandtse/followers", "following_url": "https://api.github.com/users/alandtse/following{/other_user}", "gists_url": "https://api.github.com/users/alandtse/gists{/gist_id}", "starred_url": "https://api.github.com/users/alandtse/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alandtse/subscriptions", "organizations_url": "https://api.github.com/users/alandtse/orgs", "repos_url": "https://api.github.com/users/alandtse/repos", "events_url": "https://api.github.com/users/alandtse/events{/privacy}", "received_events_url": "https://api.github.com/users/alandtse/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "alandtse", "id": 7086117, "node_id": "MDQ6VXNlcjcwODYxMTc=", "avatar_url": "https://avatars.githubusercontent.com/u/7086117?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alandtse", "html_url": "https://github.com/alandtse", "followers_url": "https://api.github.com/users/alandtse/followers", "following_url": "https://api.github.com/users/alandtse/following{/other_user}", "gists_url": "https://api.github.com/users/alandtse/gists{/gist_id}", "starred_url": "https://api.github.com/users/alandtse/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alandtse/subscriptions", "organizations_url": "https://api.github.com/users/alandtse/orgs", "repos_url": "https://api.github.com/users/alandtse/repos", "events_url": "https://api.github.com/users/alandtse/events{/privacy}", "received_events_url": "https://api.github.com/users/alandtse/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2019-03-13T03:45:51Z", "updated_at": "2019-03-13T03:50:29Z", "closed_at": "2019-03-13T03:50:29Z", "author_association": "COLLABORATOR", "active_lock_reason": null, "body": "Notify service will break if any target is not an entity_id or able to be split by `.`. This causes a `ValueError: not enough values to unpack (expected 2, got 1)` \r\n\r\nThis is caused by the `self.hass.components.group.expand_entity_ids` function call.", "reactions": {"url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/118/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/118/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/117", "repository_url": "https://api.github.com/repos/custom-components/alexa_media_player", "labels_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/117/labels{/name}", "comments_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/117/comments", "events_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/117/events", "html_url": "https://github.com/custom-components/alexa_media_player/issues/117", "id": 420249813, "node_id": "MDU6SXNzdWU0MjAyNDk4MTM=", "number": 117, "title": "New Notify feature does not work with announce for groups.", "user": {"login": "ehendrix23", "id": 14928070, "node_id": "MDQ6VXNlcjE0OTI4MDcw", "avatar_url": "https://avatars.githubusercontent.com/u/14928070?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ehendrix23", "html_url": "https://github.com/ehendrix23", "followers_url": "https://api.github.com/users/ehendrix23/followers", "following_url": "https://api.github.com/users/ehendrix23/following{/other_user}", "gists_url": "https://api.github.com/users/ehendrix23/gists{/gist_id}", "starred_url": "https://api.github.com/users/ehendrix23/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ehendrix23/subscriptions", "organizations_url": "https://api.github.com/users/ehendrix23/orgs", "repos_url": "https://api.github.com/users/ehendrix23/repos", "events_url": "https://api.github.com/users/ehendrix23/events{/privacy}", "received_events_url": "https://api.github.com/users/ehendrix23/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 983327104, "node_id": "MDU6TGFiZWw5ODMzMjcxMDQ=", "url": "https://api.github.com/repos/custom-components/alexa_media_player/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": {"login": "alandtse", "id": 7086117, "node_id": "MDQ6VXNlcjcwODYxMTc=", "avatar_url": "https://avatars.githubusercontent.com/u/7086117?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alandtse", "html_url": "https://github.com/alandtse", "followers_url": "https://api.github.com/users/alandtse/followers", "following_url": "https://api.github.com/users/alandtse/following{/other_user}", "gists_url": "https://api.github.com/users/alandtse/gists{/gist_id}", "starred_url": "https://api.github.com/users/alandtse/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alandtse/subscriptions", "organizations_url": "https://api.github.com/users/alandtse/orgs", "repos_url": "https://api.github.com/users/alandtse/repos", "events_url": "https://api.github.com/users/alandtse/events{/privacy}", "received_events_url": "https://api.github.com/users/alandtse/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "alandtse", "id": 7086117, "node_id": "MDQ6VXNlcjcwODYxMTc=", "avatar_url": "https://avatars.githubusercontent.com/u/7086117?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alandtse", "html_url": "https://github.com/alandtse", "followers_url": "https://api.github.com/users/alandtse/followers", "following_url": "https://api.github.com/users/alandtse/following{/other_user}", "gists_url": "https://api.github.com/users/alandtse/gists{/gist_id}", "starred_url": "https://api.github.com/users/alandtse/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alandtse/subscriptions", "organizations_url": "https://api.github.com/users/alandtse/orgs", "repos_url": "https://api.github.com/users/alandtse/repos", "events_url": "https://api.github.com/users/alandtse/events{/privacy}", "received_events_url": "https://api.github.com/users/alandtse/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 2, "created_at": "2019-03-12T23:27:11Z", "updated_at": "2019-03-13T03:50:42Z", "closed_at": "2019-03-13T03:50:42Z", "author_association": "NONE", "active_lock_reason": null, "body": "Loving the new notify functionality, especially the announce.\r\n\r\nHowever, it looks like using Home Assistant groups with announce does not work.\r\n\r\nFor example, I have a group:\r\n```\r\nalexa_general_announce:\r\n  view: false\r\n  entities:\r\n    - media_player.basement_thermostat\r\n    - media_player.family_room\r\n    - media_player.main_thermostat\r\n\r\n```\r\n\r\nCalling the service with the group and announce does not work (method can be all or speak or all).\r\n```\r\n}\r\n    \"title\": \"Front Door\",\r\n    \"message\": \"TEST\",\r\n    \"data\": {\r\n        \"type\": \"announce\",\r\n        \"method\": \"all\"\r\n    },\r\n    \"target\": [\r\n        \"group.alexa_general_announce\"\r\n    ]\r\n}\r\n```\r\n\r\nchanging it to TTS works:\r\n```\r\n}\r\n    \"title\": \"Front Door\",\r\n    \"message\": \"TEST\",\r\n    \"data\": {\r\n        \"type\": \"tts\"\r\n    },\r\n    \"target\": [\r\n        \"group.alexa_general_announce\"\r\n    ]\r\n}\r\n```\r\n\r\nUsing announce with multiple targets works as well:\r\n```\r\n}\r\n    \"title\": \"Front Door\",\r\n    \"message\": \"TEST\",\r\n    \"data\": {\r\n        \"type\": \"announce\"\r\n        \"method\": \"all\"\r\n    },\r\n    \"target\": [\r\n      \"media_player.basement_thermostat\",\r\n      \"media_player.family_room\",\r\n      \"media_player.main_thermostat\"\r\n    ]\r\n}\r\n```\r\n\r\nSo seems to be something with announce and using group.\r\n\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/117/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/117/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/101", "repository_url": "https://api.github.com/repos/custom-components/alexa_media_player", "labels_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/101/labels{/name}", "comments_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/101/comments", "events_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/101/events", "html_url": "https://github.com/custom-components/alexa_media_player/issues/101", "id": 415009451, "node_id": "MDU6SXNzdWU0MTUwMDk0NTE=", "number": 101, "title": "Verification method configurator fails when only one option", "user": {"login": "alandtse", "id": 7086117, "node_id": "MDQ6VXNlcjcwODYxMTc=", "avatar_url": "https://avatars.githubusercontent.com/u/7086117?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alandtse", "html_url": "https://github.com/alandtse", "followers_url": "https://api.github.com/users/alandtse/followers", "following_url": "https://api.github.com/users/alandtse/following{/other_user}", "gists_url": "https://api.github.com/users/alandtse/gists{/gist_id}", "starred_url": "https://api.github.com/users/alandtse/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alandtse/subscriptions", "organizations_url": "https://api.github.com/users/alandtse/orgs", "repos_url": "https://api.github.com/users/alandtse/repos", "events_url": "https://api.github.com/users/alandtse/events{/privacy}", "received_events_url": "https://api.github.com/users/alandtse/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 983327104, "node_id": "MDU6TGFiZWw5ODMzMjcxMDQ=", "url": "https://api.github.com/repos/custom-components/alexa_media_player/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}, {"id": 1246346849, "node_id": "MDU6TGFiZWwxMjQ2MzQ2ODQ5", "url": "https://api.github.com/repos/custom-components/alexa_media_player/labels/alexapy", "name": "alexapy", "color": "e23ba8", "default": false, "description": "Issue relates to the API"}], "state": "closed", "locked": false, "assignee": {"login": "alandtse", "id": 7086117, "node_id": "MDQ6VXNlcjcwODYxMTc=", "avatar_url": "https://avatars.githubusercontent.com/u/7086117?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alandtse", "html_url": "https://github.com/alandtse", "followers_url": "https://api.github.com/users/alandtse/followers", "following_url": "https://api.github.com/users/alandtse/following{/other_user}", "gists_url": "https://api.github.com/users/alandtse/gists{/gist_id}", "starred_url": "https://api.github.com/users/alandtse/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alandtse/subscriptions", "organizations_url": "https://api.github.com/users/alandtse/orgs", "repos_url": "https://api.github.com/users/alandtse/repos", "events_url": "https://api.github.com/users/alandtse/events{/privacy}", "received_events_url": "https://api.github.com/users/alandtse/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "alandtse", "id": 7086117, "node_id": "MDQ6VXNlcjcwODYxMTc=", "avatar_url": "https://avatars.githubusercontent.com/u/7086117?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alandtse", "html_url": "https://github.com/alandtse", "followers_url": "https://api.github.com/users/alandtse/followers", "following_url": "https://api.github.com/users/alandtse/following{/other_user}", "gists_url": "https://api.github.com/users/alandtse/gists{/gist_id}", "starred_url": "https://api.github.com/users/alandtse/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alandtse/subscriptions", "organizations_url": "https://api.github.com/users/alandtse/orgs", "repos_url": "https://api.github.com/users/alandtse/repos", "events_url": "https://api.github.com/users/alandtse/events{/privacy}", "received_events_url": "https://api.github.com/users/alandtse/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 2, "created_at": "2019-02-27T08:50:54Z", "updated_at": "2019-03-01T09:11:00Z", "closed_at": "2019-03-01T09:11:00Z", "author_association": "COLLABORATOR", "active_lock_reason": null, "body": "Based on this [post](https://community.home-assistant.io/t/echo-devices-alexa-as-media-player-testers-needed/58639/2019), the verification method should not hard code \"email/sms\" options as some users will not have both verification options.\r\n![image](https://user-images.githubusercontent.com/7086117/53476387-1f03f780-3a27-11e9-89d2-3766ff6aed77.png)\r\n```html\r\n<form name=\"claimspicker\" method=\"post\" action=\"verify\" class=\"cvf-widget-form cvf-widget-form-claimspicker a-spacing-none\">\r\n\r\n<div class=\"a-row a-spacing-small\"><h1>Verification needed</h1></div>\r\n      <!-- Only sms channel is available. -->\r\n<div class=\"a-row\">We will send you a code to ensure the security of your account.</div>\r\n<input type=\"hidden\" name=\"option\" value=\"sms\">\r\n<div class=\"a-section a-spacing-top-extra-large\"><span class=\"a-button a-button-span12 a-button-primary cvf-widget-btn\"><span class=\"a-button-inner\"><input id=\"continue\" tabindex=\"3\" class=\"a-button-input\" type=\"submit\"><span class=\"a-button-text\" aria-hidden=\"true\">Send code</span></span></span></div>\r\n</form>\r\n```\r\nThis is a different screen then the verification options that we properly handle:\r\n![image](https://user-images.githubusercontent.com/7086117/53476551-7bffad80-3a27-11e9-8dd6-948a458b687e.png)\r\n\r\n```html\r\n<form name=\"claimspicker\" method=\"post\" action=\"verify\" class=\"cvf-widget-form cvf-widget-form-claimspicker a-spacing-none\">\r\n\r\n<div class=\"a-row a-spacing-small\"><h1>Verification needed</h1></div>\r\n      <!-- There are multiple challenge channels available. -->\r\n<div class=\"a-row\">We will send you a code to verify your identity. This is required when something about your sign-in activity changes, like signing in from a new device or location.</div><p class=\"a-spacing-none a-spacing-top-extra-large\"><label class=\"a-form-label\">Send verification code:</label><div data-a-input-name=\"option\" class=\"a-radio cvf-widget-input a-spacing-top-base\"><label>\r\n<input type=\"radio\" name=\"option\" value=\"sms\" checked><i class=\"a-icon a-icon-radio\"></i><span class=\"a-label a-radio-label\">As a text message - +***********</span></label></div><div data-a-input-name=\"option\" class=\"a-radio cvf-widget-input a-spacing-top-base\"><label>\r\n<input type=\"radio\" name=\"option\" value=\"email\"><i class=\"a-icon a-icon-radio\"></i><span class=\"a-label a-radio-label\">In an email - ************@gmail.com</span></label></div></p>\r\n\r\n<div class=\"a-section a-spacing-top-extra-large\"><span class=\"a-button a-button-span12 a-button-primary cvf-widget-btn\"><span class=\"a-button-inner\"><input id=\"continue\" tabindex=\"3\" class=\"a-button-input\" type=\"submit\"><span class=\"a-button-text\" aria-hidden=\"true\">Send code</span></span></span></div>\r\n</form>\r\n```\r\nThe primary difference appears to be the `option` variable set either by use` <input type=\"radio\">` vs `<input type=\"hidden\">`", "reactions": {"url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/101/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/101/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/98", "repository_url": "https://api.github.com/repos/custom-components/alexa_media_player", "labels_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/98/labels{/name}", "comments_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/98/comments", "events_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/98/events", "html_url": "https://github.com/custom-components/alexa_media_player/issues/98", "id": 414920573, "node_id": "MDU6SXNzdWU0MTQ5MjA1NzM=", "number": 98, "title": "Multiple accounts require restart to use configurator", "user": {"login": "alandtse", "id": 7086117, "node_id": "MDQ6VXNlcjcwODYxMTc=", "avatar_url": "https://avatars.githubusercontent.com/u/7086117?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alandtse", "html_url": "https://github.com/alandtse", "followers_url": "https://api.github.com/users/alandtse/followers", "following_url": "https://api.github.com/users/alandtse/following{/other_user}", "gists_url": "https://api.github.com/users/alandtse/gists{/gist_id}", "starred_url": "https://api.github.com/users/alandtse/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alandtse/subscriptions", "organizations_url": "https://api.github.com/users/alandtse/orgs", "repos_url": "https://api.github.com/users/alandtse/repos", "events_url": "https://api.github.com/users/alandtse/events{/privacy}", "received_events_url": "https://api.github.com/users/alandtse/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 983327104, "node_id": "MDU6TGFiZWw5ODMzMjcxMDQ=", "url": "https://api.github.com/repos/custom-components/alexa_media_player/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": {"login": "alandtse", "id": 7086117, "node_id": "MDQ6VXNlcjcwODYxMTc=", "avatar_url": "https://avatars.githubusercontent.com/u/7086117?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alandtse", "html_url": "https://github.com/alandtse", "followers_url": "https://api.github.com/users/alandtse/followers", "following_url": "https://api.github.com/users/alandtse/following{/other_user}", "gists_url": "https://api.github.com/users/alandtse/gists{/gist_id}", "starred_url": "https://api.github.com/users/alandtse/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alandtse/subscriptions", "organizations_url": "https://api.github.com/users/alandtse/orgs", "repos_url": "https://api.github.com/users/alandtse/repos", "events_url": "https://api.github.com/users/alandtse/events{/privacy}", "received_events_url": "https://api.github.com/users/alandtse/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "alandtse", "id": 7086117, "node_id": "MDQ6VXNlcjcwODYxMTc=", "avatar_url": "https://avatars.githubusercontent.com/u/7086117?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alandtse", "html_url": "https://github.com/alandtse", "followers_url": "https://api.github.com/users/alandtse/followers", "following_url": "https://api.github.com/users/alandtse/following{/other_user}", "gists_url": "https://api.github.com/users/alandtse/gists{/gist_id}", "starred_url": "https://api.github.com/users/alandtse/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alandtse/subscriptions", "organizations_url": "https://api.github.com/users/alandtse/orgs", "repos_url": "https://api.github.com/users/alandtse/repos", "events_url": "https://api.github.com/users/alandtse/events{/privacy}", "received_events_url": "https://api.github.com/users/alandtse/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 1, "created_at": "2019-02-27T02:54:22Z", "updated_at": "2019-03-01T09:11:00Z", "closed_at": "2019-03-01T09:11:00Z", "author_association": "COLLABORATOR", "active_lock_reason": null, "body": "During initial setup, you cannot add all accounts at the same time, only the last account gets a config alert, you must setup each account separably, 1 at a time. _(i.e enable account 01 with account 02 & 03 disabled, enable account 02 with account 01 & 03 disable, etc... until you pull cookies for each account separately)_\r\n\r\n_Originally posted by @vladtepz in https://github.com/keatontaylor/custom_components/issues/86#issuecomment-466771194_", "reactions": {"url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/98/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/98/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/97", "repository_url": "https://api.github.com/repos/custom-components/alexa_media_player", "labels_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/97/labels{/name}", "comments_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/97/comments", "events_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/97/events", "html_url": "https://github.com/custom-components/alexa_media_player/issues/97", "id": 414569943, "node_id": "MDU6SXNzdWU0MTQ1Njk5NDM=", "number": 97, "title": "multiple last_called  devices with one account", "user": {"login": "h4nc", "id": 25117255, "node_id": "MDQ6VXNlcjI1MTE3MjU1", "avatar_url": "https://avatars.githubusercontent.com/u/25117255?v=4", "gravatar_id": "", "url": "https://api.github.com/users/h4nc", "html_url": "https://github.com/h4nc", "followers_url": "https://api.github.com/users/h4nc/followers", "following_url": "https://api.github.com/users/h4nc/following{/other_user}", "gists_url": "https://api.github.com/users/h4nc/gists{/gist_id}", "starred_url": "https://api.github.com/users/h4nc/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/h4nc/subscriptions", "organizations_url": "https://api.github.com/users/h4nc/orgs", "repos_url": "https://api.github.com/users/h4nc/repos", "events_url": "https://api.github.com/users/h4nc/events{/privacy}", "received_events_url": "https://api.github.com/users/h4nc/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 983327104, "node_id": "MDU6TGFiZWw5ODMzMjcxMDQ=", "url": "https://api.github.com/repos/custom-components/alexa_media_player/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": {"login": "alandtse", "id": 7086117, "node_id": "MDQ6VXNlcjcwODYxMTc=", "avatar_url": "https://avatars.githubusercontent.com/u/7086117?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alandtse", "html_url": "https://github.com/alandtse", "followers_url": "https://api.github.com/users/alandtse/followers", "following_url": "https://api.github.com/users/alandtse/following{/other_user}", "gists_url": "https://api.github.com/users/alandtse/gists{/gist_id}", "starred_url": "https://api.github.com/users/alandtse/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alandtse/subscriptions", "organizations_url": "https://api.github.com/users/alandtse/orgs", "repos_url": "https://api.github.com/users/alandtse/repos", "events_url": "https://api.github.com/users/alandtse/events{/privacy}", "received_events_url": "https://api.github.com/users/alandtse/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "alandtse", "id": 7086117, "node_id": "MDQ6VXNlcjcwODYxMTc=", "avatar_url": "https://avatars.githubusercontent.com/u/7086117?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alandtse", "html_url": "https://github.com/alandtse", "followers_url": "https://api.github.com/users/alandtse/followers", "following_url": "https://api.github.com/users/alandtse/following{/other_user}", "gists_url": "https://api.github.com/users/alandtse/gists{/gist_id}", "starred_url": "https://api.github.com/users/alandtse/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alandtse/subscriptions", "organizations_url": "https://api.github.com/users/alandtse/orgs", "repos_url": "https://api.github.com/users/alandtse/repos", "events_url": "https://api.github.com/users/alandtse/events{/privacy}", "received_events_url": "https://api.github.com/users/alandtse/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 17, "created_at": "2019-02-26T11:44:32Z", "updated_at": "2019-03-01T09:50:40Z", "closed_at": "2019-03-01T09:11:01Z", "author_association": "NONE", "active_lock_reason": null, "body": "Coming from [here](https://community.home-assistant.io/t/echo-devices-alexa-as-media-player-testers-needed/58639/2017?u=h4nc)\r\n\r\n> If you only have one Alexa account, then there should only be one last_called echo. There is a polling thread to determine the last serial number, and all devices will read an event when a new one is discovered and should adjust themselves. If you see more than one returning true (for more than a split second, which is the time for HA to tell every component), that\u2019s a bug. Please file an issue.\r\n\r\nI only have one account, but as noticed in another issue I have echo buttons in my network. \r\nFor me it looked like they stay true (last_called) until I restart home assistant. \r\nI don't get an error.\r\n\r\nTo make it better readable I also extracted the last_called attributes to binary sensor and added them to my UI. This way I was better able to see if when the one gets TRUE if the other ons gets FALSE. But that did not happen. Both stayed TRUE.\r\n\r\nIn the thread above one other user seems to have the same issue, so I might not be the only one.\r\nSee: https://community.home-assistant.io/t/echo-devices-alexa-as-media-player-testers-needed/58639/2000?u=h4nc", "reactions": {"url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/97/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/97/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/91", "repository_url": "https://api.github.com/repos/custom-components/alexa_media_player", "labels_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/91/labels{/name}", "comments_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/91/comments", "events_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/91/events", "html_url": "https://github.com/custom-components/alexa_media_player/issues/91", "id": 413794531, "node_id": "MDU6SXNzdWU0MTM3OTQ1MzE=", "number": 91, "title": "Media_player position not showing", "user": {"login": "alandtse", "id": 7086117, "node_id": "MDQ6VXNlcjcwODYxMTc=", "avatar_url": "https://avatars.githubusercontent.com/u/7086117?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alandtse", "html_url": "https://github.com/alandtse", "followers_url": "https://api.github.com/users/alandtse/followers", "following_url": "https://api.github.com/users/alandtse/following{/other_user}", "gists_url": "https://api.github.com/users/alandtse/gists{/gist_id}", "starred_url": "https://api.github.com/users/alandtse/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alandtse/subscriptions", "organizations_url": "https://api.github.com/users/alandtse/orgs", "repos_url": "https://api.github.com/users/alandtse/repos", "events_url": "https://api.github.com/users/alandtse/events{/privacy}", "received_events_url": "https://api.github.com/users/alandtse/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 983327104, "node_id": "MDU6TGFiZWw5ODMzMjcxMDQ=", "url": "https://api.github.com/repos/custom-components/alexa_media_player/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": {"login": "alandtse", "id": 7086117, "node_id": "MDQ6VXNlcjcwODYxMTc=", "avatar_url": "https://avatars.githubusercontent.com/u/7086117?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alandtse", "html_url": "https://github.com/alandtse", "followers_url": "https://api.github.com/users/alandtse/followers", "following_url": "https://api.github.com/users/alandtse/following{/other_user}", "gists_url": "https://api.github.com/users/alandtse/gists{/gist_id}", "starred_url": "https://api.github.com/users/alandtse/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alandtse/subscriptions", "organizations_url": "https://api.github.com/users/alandtse/orgs", "repos_url": "https://api.github.com/users/alandtse/repos", "events_url": "https://api.github.com/users/alandtse/events{/privacy}", "received_events_url": "https://api.github.com/users/alandtse/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "alandtse", "id": 7086117, "node_id": "MDQ6VXNlcjcwODYxMTc=", "avatar_url": "https://avatars.githubusercontent.com/u/7086117?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alandtse", "html_url": "https://github.com/alandtse", "followers_url": "https://api.github.com/users/alandtse/followers", "following_url": "https://api.github.com/users/alandtse/following{/other_user}", "gists_url": "https://api.github.com/users/alandtse/gists{/gist_id}", "starred_url": "https://api.github.com/users/alandtse/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alandtse/subscriptions", "organizations_url": "https://api.github.com/users/alandtse/orgs", "repos_url": "https://api.github.com/users/alandtse/repos", "events_url": "https://api.github.com/users/alandtse/events{/privacy}", "received_events_url": "https://api.github.com/users/alandtse/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2019-02-24T08:09:08Z", "updated_at": "2019-03-01T09:11:00Z", "closed_at": "2019-03-01T09:11:00Z", "author_association": "COLLABORATOR", "active_lock_reason": null, "body": "The HA UI requires more data to be exposed to show media position.", "reactions": {"url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/91/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/91/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/90", "repository_url": "https://api.github.com/repos/custom-components/alexa_media_player", "labels_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/90/labels{/name}", "comments_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/90/comments", "events_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/90/events", "html_url": "https://github.com/custom-components/alexa_media_player/issues/90", "id": 413789211, "node_id": "MDU6SXNzdWU0MTM3ODkyMTE=", "number": 90, "title": "New Routine Service doesn\u2019t work.", "user": {"login": "h4nc", "id": 25117255, "node_id": "MDQ6VXNlcjI1MTE3MjU1", "avatar_url": "https://avatars.githubusercontent.com/u/25117255?v=4", "gravatar_id": "", "url": "https://api.github.com/users/h4nc", "html_url": "https://github.com/h4nc", "followers_url": "https://api.github.com/users/h4nc/followers", "following_url": "https://api.github.com/users/h4nc/following{/other_user}", "gists_url": "https://api.github.com/users/h4nc/gists{/gist_id}", "starred_url": "https://api.github.com/users/h4nc/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/h4nc/subscriptions", "organizations_url": "https://api.github.com/users/h4nc/orgs", "repos_url": "https://api.github.com/users/h4nc/repos", "events_url": "https://api.github.com/users/h4nc/events{/privacy}", "received_events_url": "https://api.github.com/users/h4nc/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 983327104, "node_id": "MDU6TGFiZWw5ODMzMjcxMDQ=", "url": "https://api.github.com/repos/custom-components/alexa_media_player/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}, {"id": 1246346849, "node_id": "MDU6TGFiZWwxMjQ2MzQ2ODQ5", "url": "https://api.github.com/repos/custom-components/alexa_media_player/labels/alexapy", "name": "alexapy", "color": "e23ba8", "default": false, "description": "Issue relates to the API"}], "state": "closed", "locked": false, "assignee": {"login": "alandtse", "id": 7086117, "node_id": "MDQ6VXNlcjcwODYxMTc=", "avatar_url": "https://avatars.githubusercontent.com/u/7086117?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alandtse", "html_url": "https://github.com/alandtse", "followers_url": "https://api.github.com/users/alandtse/followers", "following_url": "https://api.github.com/users/alandtse/following{/other_user}", "gists_url": "https://api.github.com/users/alandtse/gists{/gist_id}", "starred_url": "https://api.github.com/users/alandtse/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alandtse/subscriptions", "organizations_url": "https://api.github.com/users/alandtse/orgs", "repos_url": "https://api.github.com/users/alandtse/repos", "events_url": "https://api.github.com/users/alandtse/events{/privacy}", "received_events_url": "https://api.github.com/users/alandtse/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "alandtse", "id": 7086117, "node_id": "MDQ6VXNlcjcwODYxMTc=", "avatar_url": "https://avatars.githubusercontent.com/u/7086117?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alandtse", "html_url": "https://github.com/alandtse", "followers_url": "https://api.github.com/users/alandtse/followers", "following_url": "https://api.github.com/users/alandtse/following{/other_user}", "gists_url": "https://api.github.com/users/alandtse/gists{/gist_id}", "starred_url": "https://api.github.com/users/alandtse/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alandtse/subscriptions", "organizations_url": "https://api.github.com/users/alandtse/orgs", "repos_url": "https://api.github.com/users/alandtse/repos", "events_url": "https://api.github.com/users/alandtse/events{/privacy}", "received_events_url": "https://api.github.com/users/alandtse/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 25, "created_at": "2019-02-24T06:52:01Z", "updated_at": "2019-03-29T16:18:00Z", "closed_at": "2019-03-02T07:54:09Z", "author_association": "NONE", "active_lock_reason": null, "body": "Ok, so sequence works for me, but I don\u2019t get routines working.\r\n\r\nI have a routine called \u201ctest\u201d and I tried it this way\r\n\r\n```\r\n{\r\n\u201centity_id\u201d: \u201cmedia_player.myalexadevice\u201d,\r\n\u201cmedia_content_id\u201d: \u201ctest\u201d,\r\n\u201cmedia_content_type\u201d: \u201croutine\u201d\r\n}\r\n```\r\n\r\nbut it doesn\u2019t work.\r\n\r\nWhen I say \u201calexa, test\u201d it works.\r\n\r\nThis is the error I get when I trigger a script with the data from above.\r\n\r\n> Error doing job: Task exception was never retrieved\r\n> Traceback (most recent call last):\r\n>   File \"/usr/local/lib/python3.7/site-packages/homeassistant/helpers/service.py\", line 291, in _handle_service_platform_call\r\n>     await func(entity, data)\r\n>   File \"/usr/local/lib/python3.7/concurrent/futures/thread.py\", line 57, in run\r\n>     result = self.fn(*self.args, **self.kwargs)\r\n>   File \"/config/custom_components/alexa_media/media_player.py\", line 536, in play_media\r\n>     self.alexa_api.run_routine(media_id)\r\n>   File \"/config/deps/lib/python3.7/site-packages/alexapy/alexaapi.py\", line 127, in run_routine\r\n>     a_utterance = automation['triggers'][0]['payload']['utterance']\r\n> KeyError: 'utterance'", "reactions": {"url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/90/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/90/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/88", "repository_url": "https://api.github.com/repos/custom-components/alexa_media_player", "labels_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/88/labels{/name}", "comments_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/88/comments", "events_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/88/events", "html_url": "https://github.com/custom-components/alexa_media_player/issues/88", "id": 413781283, "node_id": "MDU6SXNzdWU0MTM3ODEyODM=", "number": 88, "title": "MySQLdb._exceptions.DataError) (1406, \"Data too long for column 'event_type' at row 1\")", "user": {"login": "alandtse", "id": 7086117, "node_id": "MDQ6VXNlcjcwODYxMTc=", "avatar_url": "https://avatars.githubusercontent.com/u/7086117?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alandtse", "html_url": "https://github.com/alandtse", "followers_url": "https://api.github.com/users/alandtse/followers", "following_url": "https://api.github.com/users/alandtse/following{/other_user}", "gists_url": "https://api.github.com/users/alandtse/gists{/gist_id}", "starred_url": "https://api.github.com/users/alandtse/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alandtse/subscriptions", "organizations_url": "https://api.github.com/users/alandtse/orgs", "repos_url": "https://api.github.com/users/alandtse/repos", "events_url": "https://api.github.com/users/alandtse/events{/privacy}", "received_events_url": "https://api.github.com/users/alandtse/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 983327104, "node_id": "MDU6TGFiZWw5ODMzMjcxMDQ=", "url": "https://api.github.com/repos/custom-components/alexa_media_player/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": {"login": "alandtse", "id": 7086117, "node_id": "MDQ6VXNlcjcwODYxMTc=", "avatar_url": "https://avatars.githubusercontent.com/u/7086117?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alandtse", "html_url": "https://github.com/alandtse", "followers_url": "https://api.github.com/users/alandtse/followers", "following_url": "https://api.github.com/users/alandtse/following{/other_user}", "gists_url": "https://api.github.com/users/alandtse/gists{/gist_id}", "starred_url": "https://api.github.com/users/alandtse/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alandtse/subscriptions", "organizations_url": "https://api.github.com/users/alandtse/orgs", "repos_url": "https://api.github.com/users/alandtse/repos", "events_url": "https://api.github.com/users/alandtse/events{/privacy}", "received_events_url": "https://api.github.com/users/alandtse/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "alandtse", "id": 7086117, "node_id": "MDQ6VXNlcjcwODYxMTc=", "avatar_url": "https://avatars.githubusercontent.com/u/7086117?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alandtse", "html_url": "https://github.com/alandtse", "followers_url": "https://api.github.com/users/alandtse/followers", "following_url": "https://api.github.com/users/alandtse/following{/other_user}", "gists_url": "https://api.github.com/users/alandtse/gists{/gist_id}", "starred_url": "https://api.github.com/users/alandtse/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alandtse/subscriptions", "organizations_url": "https://api.github.com/users/alandtse/orgs", "repos_url": "https://api.github.com/users/alandtse/repos", "events_url": "https://api.github.com/users/alandtse/events{/privacy}", "received_events_url": "https://api.github.com/users/alandtse/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 2, "created_at": "2019-02-24T04:40:16Z", "updated_at": "2019-03-01T09:11:00Z", "closed_at": "2019-03-01T09:11:00Z", "author_association": "COLLABORATOR", "active_lock_reason": null, "body": "As reported in the community [thread](https://community.home-assistant.io/t/echo-devices-alexa-as-media-player-testers-needed/58639/1953):\r\n\r\nSince we\u2019re concatenating the email to the domain alexa_media to fire to the event_bus, we\u2019ve hit a HA SQL table limitation during logging.", "reactions": {"url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/88/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/88/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/86", "repository_url": "https://api.github.com/repos/custom-components/alexa_media_player", "labels_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/86/labels{/name}", "comments_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/86/comments", "events_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/86/events", "html_url": "https://github.com/custom-components/alexa_media_player/issues/86", "id": 413708351, "node_id": "MDU6SXNzdWU0MTM3MDgzNTE=", "number": 86, "title": "Multiple Accounts Testing- TTS not working - (v1.0.0)", "user": {"login": "vladtepz", "id": 1252146, "node_id": "MDQ6VXNlcjEyNTIxNDY=", "avatar_url": "https://avatars.githubusercontent.com/u/1252146?v=4", "gravatar_id": "", "url": "https://api.github.com/users/vladtepz", "html_url": "https://github.com/vladtepz", "followers_url": "https://api.github.com/users/vladtepz/followers", "following_url": "https://api.github.com/users/vladtepz/following{/other_user}", "gists_url": "https://api.github.com/users/vladtepz/gists{/gist_id}", "starred_url": "https://api.github.com/users/vladtepz/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/vladtepz/subscriptions", "organizations_url": "https://api.github.com/users/vladtepz/orgs", "repos_url": "https://api.github.com/users/vladtepz/repos", "events_url": "https://api.github.com/users/vladtepz/events{/privacy}", "received_events_url": "https://api.github.com/users/vladtepz/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 983327104, "node_id": "MDU6TGFiZWw5ODMzMjcxMDQ=", "url": "https://api.github.com/repos/custom-components/alexa_media_player/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 9, "created_at": "2019-02-23T15:51:57Z", "updated_at": "2019-03-01T09:11:00Z", "closed_at": "2019-03-01T09:11:00Z", "author_association": "NONE", "active_lock_reason": null, "body": "Started testing v1.0.0 with multiple accounts. Yay!\r\n\r\nEverything looks good as far as setup. All 3 devices are shown and Online status & Sequence Commands seem to be working fine with my limited testing.\r\n\r\n**TTS is not working. :(**\r\n\r\n**Service used:** media_player.alexa_tts\r\n**Service Data Used:** {\"entity_id\": \"media_player.mike_jen_s_echo\", \"message\": \"Test message\"}\r\n\r\nNo errors when calling the tts service, tested with debug logging for the component enabled.\r\n\r\nI do get the following errors during the initial HA startup.\r\n\r\n```\r\n2019-02-23 10:42:25 WARNING (MainThread) [homeassistant.loader] You are using a custom component for custom_updater which has not been tested by Home Assistant. This component might cause stability problems, be sure to disable it if you do experience issues with Home Assistant.\r\n2019-02-23 10:42:25 WARNING (MainThread) [homeassistant.loader] You are using a custom component for alexa_media which has not been tested by Home Assistant. This component might cause stability problems, be sure to disable it if you do experience issues with Home Assistant.\r\n2019-02-23 10:42:27 WARNING (MainThread) [homeassistant.loader] You are using a custom component for hadockermon.switch which has not been tested by Home Assistant. This component might cause stability problems, be sure to disable it if you do experience issues with Home Assistant.\r\n2019-02-23 10:42:33 WARNING (MainThread) [homeassistant.loader] You are using a custom component for alexa_media.media_player which has not been tested by Home Assistant. This component might cause stability problems, be sure to disable it if you do experience issues with Home Assistant.\r\n2019-02-23 10:42:33 ERROR (MainThread) [homeassistant.core] Error doing job: Task exception was never retrieved\r\nTraceback (most recent call last):\r\n  File \"/usr/src/app/homeassistant/helpers/entity_platform.py\", line 344, in _async_add_entity\r\n    raise HomeAssistantError(msg)\r\nhomeassistant.exceptions.HomeAssistantError: Entity id already exists: media_player.mike_jen_s_echo. Platform alexa_media does not generate unique IDs\r\n2019-02-23 10:42:33 ERROR (MainThread) [homeassistant.core] Error doing job: Task exception was never retrieved\r\nTraceback (most recent call last):\r\n  File \"/usr/src/app/homeassistant/helpers/entity_platform.py\", line 344, in _async_add_entity\r\n    raise HomeAssistantError(msg)\r\nhomeassistant.exceptions.HomeAssistantError: Entity id already exists: media_player.mike_jen_s_echo. Platform alexa_media does not generate unique IDs\r\n2019-02-23 10:42:34 ERROR (MainThread) [homeassistant.core] Error doing job: Task exception was never retrieved\r\nTraceback (most recent call last):\r\n  File \"/usr/src/app/homeassistant/helpers/entity_platform.py\", line 344, in _async_add_entity\r\n    raise HomeAssistantError(msg)\r\nhomeassistant.exceptions.HomeAssistantError: Entity id already exists: media_player.mikey_s_echo. Platform alexa_media does not generate unique IDs\r\n2019-02-23 10:42:34 ERROR (MainThread) [homeassistant.core] Error doing job: Task exception was never retrieved\r\nTraceback (most recent call last):\r\n  File \"/usr/src/app/homeassistant/helpers/entity_platform.py\", line 344, in _async_add_entity\r\n    raise HomeAssistantError(msg)\r\nhomeassistant.exceptions.HomeAssistantError: Entity id already exists: media_player.mikey_s_echo. Platform alexa_media does not generate unique IDs\r\n2019-02-23 10:42:34 ERROR (MainThread) [homeassistant.core] Error doing job: Task exception was never retrieved\r\nTraceback (most recent call last):\r\n  File \"/usr/src/app/homeassistant/helpers/entity_platform.py\", line 344, in _async_add_entity\r\n    raise HomeAssistantError(msg)\r\nhomeassistant.exceptions.HomeAssistantError: Entity id already exists: media_player.nate_s_echo_dot. Platform alexa_media does not generate unique IDs\r\n2019-02-23 10:42:34 ERROR (MainThread) [homeassistant.core] Error doing job: Task exception was never retrieved\r\nTraceback (most recent call last):\r\n  File \"/usr/src/app/homeassistant/helpers/entity_platform.py\", line 344, in _async_add_entity\r\n    raise HomeAssistantError(msg)\r\nhomeassistant.exceptions.HomeAssistantError: Entity id already exists: media_player.nate_s_echo_dot. Platform alexa_media does not generate unique IDs\r\n```\r\n\r\ncore.entity_registry has the following:\r\n\r\n```\r\n            {\r\n                \"config_entry_id\": null,\r\n                \"device_id\": null,\r\n                \"disabled_by\": null,\r\n                \"entity_id\": \"media_player.mike_jen_s_echo\",\r\n                \"name\": null,\r\n                \"platform\": \"alexa_media\",\r\n                \"unique_id\": \"XXXX\"\r\n            },\r\n            {\r\n                \"config_entry_id\": null,\r\n                \"device_id\": null,\r\n                \"disabled_by\": null,\r\n                \"entity_id\": \"media_player.mikey_s_echo\",\r\n                \"name\": null,\r\n                \"platform\": \"alexa_media\",\r\n                \"unique_id\": \"XXXX\"\r\n            },\r\n            {\r\n                \"config_entry_id\": null,\r\n                \"device_id\": null,\r\n                \"disabled_by\": null,\r\n                \"entity_id\": \"media_player.nate_s_echo_dot\",\r\n                \"name\": null,\r\n                \"platform\": \"alexa_media\",\r\n                \"unique_id\": \"XXXX\"\r\n            }\r\n```\r\nIf you need any more info, I'm more then happy to provide it now that I can finally test it. :)\r\n\r\nEDIT by alandtse: Scrubbed out the serial numbers.", "reactions": {"url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/86/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/86/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/79", "repository_url": "https://api.github.com/repos/custom-components/alexa_media_player", "labels_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/79/labels{/name}", "comments_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/79/comments", "events_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/79/events", "html_url": "https://github.com/custom-components/alexa_media_player/issues/79", "id": 412291507, "node_id": "MDU6SXNzdWU0MTIyOTE1MDc=", "number": 79, "title": "Fix selection of locale to be based on user", "user": {"login": "alandtse", "id": 7086117, "node_id": "MDQ6VXNlcjcwODYxMTc=", "avatar_url": "https://avatars.githubusercontent.com/u/7086117?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alandtse", "html_url": "https://github.com/alandtse", "followers_url": "https://api.github.com/users/alandtse/followers", "following_url": "https://api.github.com/users/alandtse/following{/other_user}", "gists_url": "https://api.github.com/users/alandtse/gists{/gist_id}", "starred_url": "https://api.github.com/users/alandtse/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alandtse/subscriptions", "organizations_url": "https://api.github.com/users/alandtse/orgs", "repos_url": "https://api.github.com/users/alandtse/repos", "events_url": "https://api.github.com/users/alandtse/events{/privacy}", "received_events_url": "https://api.github.com/users/alandtse/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 983327104, "node_id": "MDU6TGFiZWw5ODMzMjcxMDQ=", "url": "https://api.github.com/repos/custom-components/alexa_media_player/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}, {"id": 983327110, "node_id": "MDU6TGFiZWw5ODMzMjcxMTA=", "url": "https://api.github.com/repos/custom-components/alexa_media_player/labels/question", "name": "question", "color": "d876e3", "default": true, "description": "Further information is requested"}, {"id": 1246346849, "node_id": "MDU6TGFiZWwxMjQ2MzQ2ODQ5", "url": "https://api.github.com/repos/custom-components/alexa_media_player/labels/alexapy", "name": "alexapy", "color": "e23ba8", "default": false, "description": "Issue relates to the API"}], "state": "closed", "locked": false, "assignee": {"login": "alandtse", "id": 7086117, "node_id": "MDQ6VXNlcjcwODYxMTc=", "avatar_url": "https://avatars.githubusercontent.com/u/7086117?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alandtse", "html_url": "https://github.com/alandtse", "followers_url": "https://api.github.com/users/alandtse/followers", "following_url": "https://api.github.com/users/alandtse/following{/other_user}", "gists_url": "https://api.github.com/users/alandtse/gists{/gist_id}", "starred_url": "https://api.github.com/users/alandtse/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alandtse/subscriptions", "organizations_url": "https://api.github.com/users/alandtse/orgs", "repos_url": "https://api.github.com/users/alandtse/repos", "events_url": "https://api.github.com/users/alandtse/events{/privacy}", "received_events_url": "https://api.github.com/users/alandtse/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "alandtse", "id": 7086117, "node_id": "MDQ6VXNlcjcwODYxMTc=", "avatar_url": "https://avatars.githubusercontent.com/u/7086117?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alandtse", "html_url": "https://github.com/alandtse", "followers_url": "https://api.github.com/users/alandtse/followers", "following_url": "https://api.github.com/users/alandtse/following{/other_user}", "gists_url": "https://api.github.com/users/alandtse/gists{/gist_id}", "starred_url": "https://api.github.com/users/alandtse/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alandtse/subscriptions", "organizations_url": "https://api.github.com/users/alandtse/orgs", "repos_url": "https://api.github.com/users/alandtse/repos", "events_url": "https://api.github.com/users/alandtse/events{/privacy}", "received_events_url": "https://api.github.com/users/alandtse/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 3, "created_at": "2019-02-20T07:56:46Z", "updated_at": "2019-05-01T04:23:37Z", "closed_at": "2019-05-01T04:23:37Z", "author_association": "COLLABORATOR", "active_lock_reason": null, "body": "Currently, we hardcode EN-US as the locale for much of the selection. It appears to cause no issues so far, but it may in the future.\r\n\r\nSpawned from #74 where umlauts were not processed correctly by Amazon.", "reactions": {"url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/79/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/79/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/76", "repository_url": "https://api.github.com/repos/custom-components/alexa_media_player", "labels_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/76/labels{/name}", "comments_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/76/comments", "events_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/76/events", "html_url": "https://github.com/custom-components/alexa_media_player/issues/76", "id": 410605695, "node_id": "MDU6SXNzdWU0MTA2MDU2OTU=", "number": 76, "title": "ImportError with home-assistant v. >= 0.88.0", "user": {"login": "alandtse", "id": 7086117, "node_id": "MDQ6VXNlcjcwODYxMTc=", "avatar_url": "https://avatars.githubusercontent.com/u/7086117?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alandtse", "html_url": "https://github.com/alandtse", "followers_url": "https://api.github.com/users/alandtse/followers", "following_url": "https://api.github.com/users/alandtse/following{/other_user}", "gists_url": "https://api.github.com/users/alandtse/gists{/gist_id}", "starred_url": "https://api.github.com/users/alandtse/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alandtse/subscriptions", "organizations_url": "https://api.github.com/users/alandtse/orgs", "repos_url": "https://api.github.com/users/alandtse/repos", "events_url": "https://api.github.com/users/alandtse/events{/privacy}", "received_events_url": "https://api.github.com/users/alandtse/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 983327104, "node_id": "MDU6TGFiZWw5ODMzMjcxMDQ=", "url": "https://api.github.com/repos/custom-components/alexa_media_player/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": {"login": "alandtse", "id": 7086117, "node_id": "MDQ6VXNlcjcwODYxMTc=", "avatar_url": "https://avatars.githubusercontent.com/u/7086117?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alandtse", "html_url": "https://github.com/alandtse", "followers_url": "https://api.github.com/users/alandtse/followers", "following_url": "https://api.github.com/users/alandtse/following{/other_user}", "gists_url": "https://api.github.com/users/alandtse/gists{/gist_id}", "starred_url": "https://api.github.com/users/alandtse/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alandtse/subscriptions", "organizations_url": "https://api.github.com/users/alandtse/orgs", "repos_url": "https://api.github.com/users/alandtse/repos", "events_url": "https://api.github.com/users/alandtse/events{/privacy}", "received_events_url": "https://api.github.com/users/alandtse/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "alandtse", "id": 7086117, "node_id": "MDQ6VXNlcjcwODYxMTc=", "avatar_url": "https://avatars.githubusercontent.com/u/7086117?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alandtse", "html_url": "https://github.com/alandtse", "followers_url": "https://api.github.com/users/alandtse/followers", "following_url": "https://api.github.com/users/alandtse/following{/other_user}", "gists_url": "https://api.github.com/users/alandtse/gists{/gist_id}", "starred_url": "https://api.github.com/users/alandtse/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alandtse/subscriptions", "organizations_url": "https://api.github.com/users/alandtse/orgs", "repos_url": "https://api.github.com/users/alandtse/repos", "events_url": "https://api.github.com/users/alandtse/events{/privacy}", "received_events_url": "https://api.github.com/users/alandtse/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 10, "created_at": "2019-02-15T04:58:23Z", "updated_at": "2019-02-21T19:12:42Z", "closed_at": "2019-02-20T21:43:20Z", "author_association": "COLLABORATOR", "active_lock_reason": null, "body": "```python\r\nError loading custom_components.media_player.alexa. Make sure all dependencies are installed\r\nTraceback (most recent call last):\r\n  File \"/usr/local/lib/python3.7/site-packages/homeassistant/loader.py\", line 147, in _load_file\r\n    module = importlib.import_module(path)\r\n  File \"/usr/local/lib/python3.7/importlib/__init__.py\", line 127, in import_module\r\n    return _bootstrap._gcd_import(name[level:], package, level)\r\n  File \"<frozen importlib._bootstrap>\", line 1006, in _gcd_import\r\n  File \"<frozen importlib._bootstrap>\", line 983, in _find_and_load\r\n  File \"<frozen importlib._bootstrap>\", line 967, in _find_and_load_unlocked\r\n  File \"<frozen importlib._bootstrap>\", line 677, in _load_unlocked\r\n  File \"<frozen importlib._bootstrap_external>\", line 728, in exec_module\r\n  File \"<frozen importlib._bootstrap>\", line 219, in _call_with_frames_removed\r\n  File \"/config/custom_components/media_player/alexa.py\", line 16, in <module>\r\n    from homeassistant.components.media_player import (\r\nImportError: cannot import name 'MEDIA_TYPE_MUSIC' from 'homeassistant.components.media_player' (/usr/local/lib/python3.7/site-packages/homeassistant/components/media_player/__init__.py)\r\n```\r\n[Report](https://community.home-assistant.io/t/echo-devices-alexa-as-media-player-testers-needed/58639/1871)\r\n\r\nCaused by [change in package bundling](https://rc--home-assistant-docs.netlify.com/blog/2019/02/13/release-88/):\r\n```\r\nNote for custom component developers: We are moving to a new file structure. Platforms now live embedded in components. Custom platforms will have to be updated to follow this pattern. This is a breaking change in case your custom platform overrides a built-in platform. Rename your custom platform from, ie light/hue.py to hue/light.py.\r\n```", "reactions": {"url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/76/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/76/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/70", "repository_url": "https://api.github.com/repos/custom-components/alexa_media_player", "labels_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/70/labels{/name}", "comments_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/70/comments", "events_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/70/events", "html_url": "https://github.com/custom-components/alexa_media_player/issues/70", "id": 406047882, "node_id": "MDU6SXNzdWU0MDYwNDc4ODI=", "number": 70, "title": "Reduce polling across component", "user": {"login": "alandtse", "id": 7086117, "node_id": "MDQ6VXNlcjcwODYxMTc=", "avatar_url": "https://avatars.githubusercontent.com/u/7086117?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alandtse", "html_url": "https://github.com/alandtse", "followers_url": "https://api.github.com/users/alandtse/followers", "following_url": "https://api.github.com/users/alandtse/following{/other_user}", "gists_url": "https://api.github.com/users/alandtse/gists{/gist_id}", "starred_url": "https://api.github.com/users/alandtse/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alandtse/subscriptions", "organizations_url": "https://api.github.com/users/alandtse/orgs", "repos_url": "https://api.github.com/users/alandtse/repos", "events_url": "https://api.github.com/users/alandtse/events{/privacy}", "received_events_url": "https://api.github.com/users/alandtse/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 983327104, "node_id": "MDU6TGFiZWw5ODMzMjcxMDQ=", "url": "https://api.github.com/repos/custom-components/alexa_media_player/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": {"login": "alandtse", "id": 7086117, "node_id": "MDQ6VXNlcjcwODYxMTc=", "avatar_url": "https://avatars.githubusercontent.com/u/7086117?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alandtse", "html_url": "https://github.com/alandtse", "followers_url": "https://api.github.com/users/alandtse/followers", "following_url": "https://api.github.com/users/alandtse/following{/other_user}", "gists_url": "https://api.github.com/users/alandtse/gists{/gist_id}", "starred_url": "https://api.github.com/users/alandtse/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alandtse/subscriptions", "organizations_url": "https://api.github.com/users/alandtse/orgs", "repos_url": "https://api.github.com/users/alandtse/repos", "events_url": "https://api.github.com/users/alandtse/events{/privacy}", "received_events_url": "https://api.github.com/users/alandtse/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "alandtse", "id": 7086117, "node_id": "MDQ6VXNlcjcwODYxMTc=", "avatar_url": "https://avatars.githubusercontent.com/u/7086117?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alandtse", "html_url": "https://github.com/alandtse", "followers_url": "https://api.github.com/users/alandtse/followers", "following_url": "https://api.github.com/users/alandtse/following{/other_user}", "gists_url": "https://api.github.com/users/alandtse/gists{/gist_id}", "starred_url": "https://api.github.com/users/alandtse/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alandtse/subscriptions", "organizations_url": "https://api.github.com/users/alandtse/orgs", "repos_url": "https://api.github.com/users/alandtse/repos", "events_url": "https://api.github.com/users/alandtse/events{/privacy}", "received_events_url": "https://api.github.com/users/alandtse/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 3, "created_at": "2019-02-03T03:20:29Z", "updated_at": "2019-02-23T03:40:25Z", "closed_at": "2019-02-23T03:40:25Z", "author_association": "COLLABORATOR", "active_lock_reason": null, "body": "The get_last_called Alexa request is not cached and will be pulled by every media_player refresh. This can result in excessive load if there are multiple echos on an account.", "reactions": {"url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/70/reactions", "total_count": 1, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/70/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/68", "repository_url": "https://api.github.com/repos/custom-components/alexa_media_player", "labels_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/68/labels{/name}", "comments_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/68/comments", "events_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/68/events", "html_url": "https://github.com/custom-components/alexa_media_player/issues/68", "id": 403335847, "node_id": "MDU6SXNzdWU0MDMzMzU4NDc=", "number": 68, "title": "Error introduced in v0.10.0", "user": {"login": "aaronwolen", "id": 1067915, "node_id": "MDQ6VXNlcjEwNjc5MTU=", "avatar_url": "https://avatars.githubusercontent.com/u/1067915?v=4", "gravatar_id": "", "url": "https://api.github.com/users/aaronwolen", "html_url": "https://github.com/aaronwolen", "followers_url": "https://api.github.com/users/aaronwolen/followers", "following_url": "https://api.github.com/users/aaronwolen/following{/other_user}", "gists_url": "https://api.github.com/users/aaronwolen/gists{/gist_id}", "starred_url": "https://api.github.com/users/aaronwolen/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/aaronwolen/subscriptions", "organizations_url": "https://api.github.com/users/aaronwolen/orgs", "repos_url": "https://api.github.com/users/aaronwolen/repos", "events_url": "https://api.github.com/users/aaronwolen/events{/privacy}", "received_events_url": "https://api.github.com/users/aaronwolen/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 983327104, "node_id": "MDU6TGFiZWw5ODMzMjcxMDQ=", "url": "https://api.github.com/repos/custom-components/alexa_media_player/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2019-01-25T21:16:11Z", "updated_at": "2019-01-26T03:41:05Z", "closed_at": "2019-01-26T03:40:25Z", "author_association": "NONE", "active_lock_reason": null, "body": "I've been using this custom component very successfully for several months\u2014Alexa TTS is so awesome. \r\n\r\nHowever, updating to v0.10.0 seems to have broken the component for me and HASS throws the following error:\r\n\r\n```\r\n2019-01-25 16:13:41 ERROR (MainThread) [homeassistant.core] Error doing job: Future exception was never retrieved\r\nTraceback (most recent call last):\r\n  File \"/usr/local/lib/python3.6/concurrent/futures/thread.py\", line 56, in run\r\n    result = self.fn(*self.args, **self.kwargs)\r\n  File \"/config/custom_components/media_player/alexa.py\", line 201, in <lambda>\r\n    track_utc_time_change(hass, lambda now: update_devices(), second=30)\r\n  File \"/usr/local/lib/python3.6/site-packages/homeassistant/util/__init__.py\", line 315, in wrapper\r\n    result = method(*args, **kwargs)\r\n  File \"/usr/local/lib/python3.6/site-packages/homeassistant/util/__init__.py\", line 315, in wrapper\r\n    result = method(*args, **kwargs)\r\n  File \"/config/custom_components/media_player/alexa.py\", line 235, in update_devices\r\n    update_devices, url, authentication)\r\n  File \"/config/custom_components/media_player/alexa.py\", line 318, in __init__\r\n    self.refresh(device)\r\n  File \"/config/custom_components/media_player/alexa.py\", line 358, in refresh\r\n    self._last_called = self._get_last_called()\r\n  File \"/config/custom_components/media_player/alexa.py\", line 448, in _get_last_called\r\n    if self._device_serial_number == self.alexa_api.get_last_device_serial():\r\n  File \"/config/custom_components/media_player/alexa.py\", line 1008, in get_last_device_serial\r\n    if last_activity['activityStatus'](0) != 'DISCARDED_NON_DEVICE_DIRECTED_INTENT':\r\nTypeError: 'str' object is not callable\r\n```", "reactions": {"url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/68/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/68/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/63", "repository_url": "https://api.github.com/repos/custom-components/alexa_media_player", "labels_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/63/labels{/name}", "comments_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/63/comments", "events_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/63/events", "html_url": "https://github.com/custom-components/alexa_media_player/issues/63", "id": 399636937, "node_id": "MDU6SXNzdWUzOTk2MzY5Mzc=", "number": 63, "title": "Switching account in configuration does not change logged in account", "user": {"login": "alandtse", "id": 7086117, "node_id": "MDQ6VXNlcjcwODYxMTc=", "avatar_url": "https://avatars.githubusercontent.com/u/7086117?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alandtse", "html_url": "https://github.com/alandtse", "followers_url": "https://api.github.com/users/alandtse/followers", "following_url": "https://api.github.com/users/alandtse/following{/other_user}", "gists_url": "https://api.github.com/users/alandtse/gists{/gist_id}", "starred_url": "https://api.github.com/users/alandtse/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alandtse/subscriptions", "organizations_url": "https://api.github.com/users/alandtse/orgs", "repos_url": "https://api.github.com/users/alandtse/repos", "events_url": "https://api.github.com/users/alandtse/events{/privacy}", "received_events_url": "https://api.github.com/users/alandtse/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 983327104, "node_id": "MDU6TGFiZWw5ODMzMjcxMDQ=", "url": "https://api.github.com/repos/custom-components/alexa_media_player/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": {"login": "alandtse", "id": 7086117, "node_id": "MDQ6VXNlcjcwODYxMTc=", "avatar_url": "https://avatars.githubusercontent.com/u/7086117?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alandtse", "html_url": "https://github.com/alandtse", "followers_url": "https://api.github.com/users/alandtse/followers", "following_url": "https://api.github.com/users/alandtse/following{/other_user}", "gists_url": "https://api.github.com/users/alandtse/gists{/gist_id}", "starred_url": "https://api.github.com/users/alandtse/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alandtse/subscriptions", "organizations_url": "https://api.github.com/users/alandtse/orgs", "repos_url": "https://api.github.com/users/alandtse/repos", "events_url": "https://api.github.com/users/alandtse/events{/privacy}", "received_events_url": "https://api.github.com/users/alandtse/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "alandtse", "id": 7086117, "node_id": "MDQ6VXNlcjcwODYxMTc=", "avatar_url": "https://avatars.githubusercontent.com/u/7086117?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alandtse", "html_url": "https://github.com/alandtse", "followers_url": "https://api.github.com/users/alandtse/followers", "following_url": "https://api.github.com/users/alandtse/following{/other_user}", "gists_url": "https://api.github.com/users/alandtse/gists{/gist_id}", "starred_url": "https://api.github.com/users/alandtse/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alandtse/subscriptions", "organizations_url": "https://api.github.com/users/alandtse/orgs", "repos_url": "https://api.github.com/users/alandtse/repos", "events_url": "https://api.github.com/users/alandtse/events{/privacy}", "received_events_url": "https://api.github.com/users/alandtse/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 1, "created_at": "2019-01-16T03:53:15Z", "updated_at": "2019-02-23T03:40:24Z", "closed_at": "2019-02-23T03:40:24Z", "author_association": "COLLABORATOR", "active_lock_reason": null, "body": "Changing the [configuration settings will continue to use prior cookies to log in](https://community.home-assistant.io/t/echo-devices-alexa-as-media-player-testers-needed/58639/1712).  We should perform a check on logged in user and if it doesn't match, log out and delete the cookie. We recently added a check for the logged in user so that can be reused.\r\n\r\nThis probably makes sense to deal with the multi-account login logic #37 at the same time.", "reactions": {"url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/63/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/63/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/52", "repository_url": "https://api.github.com/repos/custom-components/alexa_media_player", "labels_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/52/labels{/name}", "comments_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/52/comments", "events_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/52/events", "html_url": "https://github.com/custom-components/alexa_media_player/issues/52", "id": 393635774, "node_id": "MDU6SXNzdWUzOTM2MzU3NzQ=", "number": 52, "title": "Device Owner problem with multiple Echos in household", "user": {"login": "swbradshaw", "id": 2023547, "node_id": "MDQ6VXNlcjIwMjM1NDc=", "avatar_url": "https://avatars.githubusercontent.com/u/2023547?v=4", "gravatar_id": "", "url": "https://api.github.com/users/swbradshaw", "html_url": "https://github.com/swbradshaw", "followers_url": "https://api.github.com/users/swbradshaw/followers", "following_url": "https://api.github.com/users/swbradshaw/following{/other_user}", "gists_url": "https://api.github.com/users/swbradshaw/gists{/gist_id}", "starred_url": "https://api.github.com/users/swbradshaw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/swbradshaw/subscriptions", "organizations_url": "https://api.github.com/users/swbradshaw/orgs", "repos_url": "https://api.github.com/users/swbradshaw/repos", "events_url": "https://api.github.com/users/swbradshaw/events{/privacy}", "received_events_url": "https://api.github.com/users/swbradshaw/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 983327104, "node_id": "MDU6TGFiZWw5ODMzMjcxMDQ=", "url": "https://api.github.com/repos/custom-components/alexa_media_player/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": {"login": "keatontaylor", "id": 657559, "node_id": "MDQ6VXNlcjY1NzU1OQ==", "avatar_url": "https://avatars.githubusercontent.com/u/657559?v=4", "gravatar_id": "", "url": "https://api.github.com/users/keatontaylor", "html_url": "https://github.com/keatontaylor", "followers_url": "https://api.github.com/users/keatontaylor/followers", "following_url": "https://api.github.com/users/keatontaylor/following{/other_user}", "gists_url": "https://api.github.com/users/keatontaylor/gists{/gist_id}", "starred_url": "https://api.github.com/users/keatontaylor/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/keatontaylor/subscriptions", "organizations_url": "https://api.github.com/users/keatontaylor/orgs", "repos_url": "https://api.github.com/users/keatontaylor/repos", "events_url": "https://api.github.com/users/keatontaylor/events{/privacy}", "received_events_url": "https://api.github.com/users/keatontaylor/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "keatontaylor", "id": 657559, "node_id": "MDQ6VXNlcjY1NzU1OQ==", "avatar_url": "https://avatars.githubusercontent.com/u/657559?v=4", "gravatar_id": "", "url": "https://api.github.com/users/keatontaylor", "html_url": "https://github.com/keatontaylor", "followers_url": "https://api.github.com/users/keatontaylor/followers", "following_url": "https://api.github.com/users/keatontaylor/following{/other_user}", "gists_url": "https://api.github.com/users/keatontaylor/gists{/gist_id}", "starred_url": "https://api.github.com/users/keatontaylor/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/keatontaylor/subscriptions", "organizations_url": "https://api.github.com/users/keatontaylor/orgs", "repos_url": "https://api.github.com/users/keatontaylor/repos", "events_url": "https://api.github.com/users/keatontaylor/events{/privacy}", "received_events_url": "https://api.github.com/users/keatontaylor/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 3, "created_at": "2018-12-22T02:34:14Z", "updated_at": "2019-01-13T19:22:45Z", "closed_at": "2019-01-13T19:22:45Z", "author_association": "NONE", "active_lock_reason": null, "body": "Background: I have 4 Amazon Echos in the house. 2 of them were originally activated by me, 2 of them were activated by my wife. Once activate, you can attach multiple accounts to a device. All 4 of the devices are shown in my Amazon account, and my wife's account. When we are at a given device we can say \"Alexa, switch accounts\". This way my wife can play her music and I can play mine.\r\n\r\nProblem: This script will successfully pull all 4 devices and show them, however, I can't control the ones originally activated by my wife. The reason is because this script is making the web request with my wife's deviceOwnerCustomerId (reported by Amazon as the owner), but I'm signed in as myself (a different deviceOwnerCustomerId). If I change the code to always use the deviceOwnerCustomerId of myself (hardcode) the script works fine.\r\n\r\nSolution: I believe the fix for this is this component should access https://alexa.amazon.com/api/bootstrap and pull the deviceOwnerCustomerId of the current user. It would only need to do this one time (perhaps after it stores the cookies). It should then use this deviceOwnerCustomerId to make the calls, and not try to make the calls for another user that is not signed in. At the very least, perhaps a config option can be setup so that you can override the deviceOwnerCustomerId for all the calls.\r\n\r\nThis is not the same thing as #37 where they are asking for multiple logins.\r\n\r\nI understand this code was copied from another library - I actually contacted the author of that plugin as well.", "reactions": {"url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/52/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/52/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/50", "repository_url": "https://api.github.com/repos/custom-components/alexa_media_player", "labels_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/50/labels{/name}", "comments_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/50/comments", "events_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/50/events", "html_url": "https://github.com/custom-components/alexa_media_player/issues/50", "id": 388976214, "node_id": "MDU6SXNzdWUzODg5NzYyMTQ=", "number": 50, "title": "Updating alexa media_player took longer than the scheduled update interval", "user": {"login": "alandtse", "id": 7086117, "node_id": "MDQ6VXNlcjcwODYxMTc=", "avatar_url": "https://avatars.githubusercontent.com/u/7086117?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alandtse", "html_url": "https://github.com/alandtse", "followers_url": "https://api.github.com/users/alandtse/followers", "following_url": "https://api.github.com/users/alandtse/following{/other_user}", "gists_url": "https://api.github.com/users/alandtse/gists{/gist_id}", "starred_url": "https://api.github.com/users/alandtse/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alandtse/subscriptions", "organizations_url": "https://api.github.com/users/alandtse/orgs", "repos_url": "https://api.github.com/users/alandtse/repos", "events_url": "https://api.github.com/users/alandtse/events{/privacy}", "received_events_url": "https://api.github.com/users/alandtse/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 983327104, "node_id": "MDU6TGFiZWw5ODMzMjcxMDQ=", "url": "https://api.github.com/repos/custom-components/alexa_media_player/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2018-12-09T01:24:40Z", "updated_at": "2019-02-23T08:53:53Z", "closed_at": "2019-02-23T08:53:52Z", "author_association": "COLLABORATOR", "active_lock_reason": null, "body": "Need to figure out how to avoid this error. I don't think it's a functional problem and we can still get accepted into HA with this error but it's not desirable.", "reactions": {"url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/50/reactions", "total_count": 5, "+1": 5, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/50/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/33", "repository_url": "https://api.github.com/repos/custom-components/alexa_media_player", "labels_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/33/labels{/name}", "comments_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/33/comments", "events_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/33/events", "html_url": "https://github.com/custom-components/alexa_media_player/issues/33", "id": 355466856, "node_id": "MDU6SXNzdWUzNTU0NjY4NTY=", "number": 33, "title": "Handle verification request", "user": {"login": "alandtse", "id": 7086117, "node_id": "MDQ6VXNlcjcwODYxMTc=", "avatar_url": "https://avatars.githubusercontent.com/u/7086117?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alandtse", "html_url": "https://github.com/alandtse", "followers_url": "https://api.github.com/users/alandtse/followers", "following_url": "https://api.github.com/users/alandtse/following{/other_user}", "gists_url": "https://api.github.com/users/alandtse/gists{/gist_id}", "starred_url": "https://api.github.com/users/alandtse/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alandtse/subscriptions", "organizations_url": "https://api.github.com/users/alandtse/orgs", "repos_url": "https://api.github.com/users/alandtse/repos", "events_url": "https://api.github.com/users/alandtse/events{/privacy}", "received_events_url": "https://api.github.com/users/alandtse/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 983327104, "node_id": "MDU6TGFiZWw5ODMzMjcxMDQ=", "url": "https://api.github.com/repos/custom-components/alexa_media_player/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": {"login": "alandtse", "id": 7086117, "node_id": "MDQ6VXNlcjcwODYxMTc=", "avatar_url": "https://avatars.githubusercontent.com/u/7086117?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alandtse", "html_url": "https://github.com/alandtse", "followers_url": "https://api.github.com/users/alandtse/followers", "following_url": "https://api.github.com/users/alandtse/following{/other_user}", "gists_url": "https://api.github.com/users/alandtse/gists{/gist_id}", "starred_url": "https://api.github.com/users/alandtse/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alandtse/subscriptions", "organizations_url": "https://api.github.com/users/alandtse/orgs", "repos_url": "https://api.github.com/users/alandtse/repos", "events_url": "https://api.github.com/users/alandtse/events{/privacy}", "received_events_url": "https://api.github.com/users/alandtse/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "alandtse", "id": 7086117, "node_id": "MDQ6VXNlcjcwODYxMTc=", "avatar_url": "https://avatars.githubusercontent.com/u/7086117?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alandtse", "html_url": "https://github.com/alandtse", "followers_url": "https://api.github.com/users/alandtse/followers", "following_url": "https://api.github.com/users/alandtse/following{/other_user}", "gists_url": "https://api.github.com/users/alandtse/gists{/gist_id}", "starred_url": "https://api.github.com/users/alandtse/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alandtse/subscriptions", "organizations_url": "https://api.github.com/users/alandtse/orgs", "repos_url": "https://api.github.com/users/alandtse/repos", "events_url": "https://api.github.com/users/alandtse/events{/privacy}", "received_events_url": "https://api.github.com/users/alandtse/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2018-08-30T07:54:06Z", "updated_at": "2018-08-31T01:33:18Z", "closed_at": "2018-08-31T01:33:18Z", "author_association": "COLLABORATOR", "active_lock_reason": null, "body": "For users without 2FA, Amazon will occasionally request a sms or email verification. This was the cause of at least one Captcha loop report.", "reactions": {"url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/33/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/custom-components/alexa_media_player/issues/33/timeline", "performed_via_github_app": null, "state_reason": "completed"}]