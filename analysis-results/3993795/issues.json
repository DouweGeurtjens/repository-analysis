[{"url": "https://api.github.com/repos/MycroftAI/mycroft-core/issues/3119", "repository_url": "https://api.github.com/repos/MycroftAI/mycroft-core", "labels_url": "https://api.github.com/repos/MycroftAI/mycroft-core/issues/3119/labels{/name}", "comments_url": "https://api.github.com/repos/MycroftAI/mycroft-core/issues/3119/comments", "events_url": "https://api.github.com/repos/MycroftAI/mycroft-core/issues/3119/events", "html_url": "https://github.com/MycroftAI/mycroft-core/issues/3119", "id": 1280135088, "node_id": "I_kwDOA4jWxM5MTU-w", "number": 3119, "title": "Mycroft does not lunch after completing all the installation instructions", "user": {"login": "guyluz11", "id": 9304740, "node_id": "MDQ6VXNlcjkzMDQ3NDA=", "avatar_url": "https://avatars.githubusercontent.com/u/9304740?v=4", "gravatar_id": "", "url": "https://api.github.com/users/guyluz11", "html_url": "https://github.com/guyluz11", "followers_url": "https://api.github.com/users/guyluz11/followers", "following_url": "https://api.github.com/users/guyluz11/following{/other_user}", "gists_url": "https://api.github.com/users/guyluz11/gists{/gist_id}", "starred_url": "https://api.github.com/users/guyluz11/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/guyluz11/subscriptions", "organizations_url": "https://api.github.com/users/guyluz11/orgs", "repos_url": "https://api.github.com/users/guyluz11/repos", "events_url": "https://api.github.com/users/guyluz11/events{/privacy}", "received_events_url": "https://api.github.com/users/guyluz11/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 4031305761, "node_id": "MDU6TGFiZWw0MDMxMzA1NzYx", "url": "https://api.github.com/repos/MycroftAI/mycroft-core/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2022-06-22T13:21:37Z", "updated_at": "2022-06-24T08:43:03Z", "closed_at": "2022-06-24T08:43:03Z", "author_association": "NONE", "active_lock_reason": null, "body": "**Describe the bug**\r\nMycroft does not lunch after completing all the installation instructions.\r\nNo error is shown in the console\r\n\r\n**To Reproduce**\r\n1. Follow the instructions from https://mycroft-ai.gitbook.io/docs/using-mycroft-ai/get-mycroft/linux#installing-via-git-clone\r\n\r\n**Expected behavior**\r\nMycroft UI will pop up.\r\n\r\n**Log files**\r\n`/var/log/mycroft/audio.log`:\r\nCommit was too long to post so I have removed this part\r\n\r\n`/var/log/mycroft/bus.log`:\r\n```\r\n\r\n2022-06-21 09:12:46.542 | INFO     | 20461 | __main__:main:50 | Starting message bus service...\r\n2022-06-21 09:12:46.543 | INFO     | 20461 | mycroft.messagebus.load_config:load_message_bus_config:33 | Loading message bus configs\r\n2022-06-21 09:12:46.556 | INFO     | 20461 | __main__:on_ready:37 | Message bus service started!\r\n2022-06-21 09:12:46.612 | INFO     | 20461 | tornado.access | 101 GET /core (127.0.0.1) 0.34ms\r\n2022-06-21 09:12:46.613 | INFO     | 20461 | tornado.access | 101 GET /core (127.0.0.1) 0.18ms\r\n2022-06-21 09:12:46.912 | INFO     | 20461 | tornado.access | 101 GET /core (127.0.0.1) 0.42ms\r\n2022-06-21 09:12:51.549 | INFO     | 20461 | tornado.access | 101 GET /core (127.0.0.1) 0.46ms\r\n2022-06-21 09:12:51.550 | INFO     | 20461 | tornado.access | 101 GET /core (127.0.0.1) 0.33ms\r\n2022-06-21 09:20:27.997 | INFO     | 20461 | __main__:on_stopping:45 | Message bus is shutting down...\r\n2022-06-22 15:59:12.223 | INFO     |  9373 | __main__:main:50 | Starting message bus service...\r\n2022-06-22 15:59:12.224 | INFO     |  9373 | mycroft.messagebus.load_config:load_message_bus_config:33 | Loading message bus configs\r\n2022-06-22 15:59:12.229 | INFO     |  9373 | __main__:on_ready:37 | Message bus service started!\r\n2022-06-22 15:59:12.231 | INFO     |  9373 | tornado.access | 101 GET /core (127.0.0.1) 0.37ms\r\n2022-06-22 15:59:12.313 | INFO     |  9373 | tornado.access | 101 GET /core (127.0.0.1) 0.44ms\r\n2022-06-22 15:59:12.322 | INFO     |  9373 | tornado.access | 101 GET /core (127.0.0.1) 0.22ms\r\n2022-06-22 15:59:12.530 | INFO     |  9373 | tornado.access | 101 GET /core (127.0.0.1) 0.43ms\r\n2022-06-22 15:59:17.233 | INFO     |  9373 | tornado.access | 101 GET /core (127.0.0.1) 0.37ms\r\n\r\n```\r\n\r\n`/var/log/mycroft/enclosure.log`:\r\nCommit was too long to post so I have removed this part\r\n\r\n**Environment (please complete the following information):**\r\n - Device type: desktop\r\n - OS: Kubuntu\r\n - Mycroft-core version: Not sure\r\n - Other versions: Not sure\r\n\r\n**Additional context**\r\n\r\nI am getting the following output in the console:\r\n\r\n```\r\n:~$ mycroft-start all\r\nAlready up to date.\r\nStarting all mycroft-core services\r\nInitializing...\r\nStarting background service bus\r\nCAUTION: The Mycroft bus is an open websocket with no built-in security\r\n         measures.  You are responsible for protecting the local port\r\n         8181 with a firewall as appropriate.\r\nStarting background service skills\r\nStarting background service audio\r\nStarting background service voice\r\nStarting background service enclosure\r\n:~$ \r\n\r\n```\r\nAnd then the command end and no Mycroft window is shown.", "reactions": {"url": "https://api.github.com/repos/MycroftAI/mycroft-core/issues/3119/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/MycroftAI/mycroft-core/issues/3119/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/MycroftAI/mycroft-core/issues/3117", "repository_url": "https://api.github.com/repos/MycroftAI/mycroft-core", "labels_url": "https://api.github.com/repos/MycroftAI/mycroft-core/issues/3117/labels{/name}", "comments_url": "https://api.github.com/repos/MycroftAI/mycroft-core/issues/3117/comments", "events_url": "https://api.github.com/repos/MycroftAI/mycroft-core/issues/3117/events", "html_url": "https://github.com/MycroftAI/mycroft-core/issues/3117", "id": 1277053454, "node_id": "I_kwDOA4jWxM5MHkoO", "number": 3117, "title": "Unable to install PyYAML 5.4 on Debian Bullseye", "user": {"login": "goldyfruit", "id": 614115, "node_id": "MDQ6VXNlcjYxNDExNQ==", "avatar_url": "https://avatars.githubusercontent.com/u/614115?v=4", "gravatar_id": "", "url": "https://api.github.com/users/goldyfruit", "html_url": "https://github.com/goldyfruit", "followers_url": "https://api.github.com/users/goldyfruit/followers", "following_url": "https://api.github.com/users/goldyfruit/following{/other_user}", "gists_url": "https://api.github.com/users/goldyfruit/gists{/gist_id}", "starred_url": "https://api.github.com/users/goldyfruit/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/goldyfruit/subscriptions", "organizations_url": "https://api.github.com/users/goldyfruit/orgs", "repos_url": "https://api.github.com/users/goldyfruit/repos", "events_url": "https://api.github.com/users/goldyfruit/events{/privacy}", "received_events_url": "https://api.github.com/users/goldyfruit/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 4031305761, "node_id": "MDU6TGFiZWw0MDMxMzA1NzYx", "url": "https://api.github.com/repos/MycroftAI/mycroft-core/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2022-06-20T14:55:49Z", "updated_at": "2022-06-24T05:20:10Z", "closed_at": "2022-06-24T05:20:10Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Since Debian Bullseye, the PyYAML version 5.4 Python library cannot be installed on Debian Bullseye.\r\n\r\n`pip` complains about `yaml.h: No such file or directory` which prevent the installation of PyYAML. I tried to install `libyaml-dev` which provide the `yaml.h` file without success.\r\n\r\nI'm using the latest `mycroft-core` commit with `pip` 20.3.0 _(I tried with the latest as well)_.\r\n\r\nThe workaround to get `mycrof-core` running is to install PyAML version 5.4.1.\r\n\r\nBelow is the Python trace when I try to install PyYAML 5.4.\r\n```\r\n$ pip install PyYAML==5.4\r\nLooking in indexes: https://pypi.org/simple, https://www.piwheels.org/simple\r\nCollecting PyYAML==5.4\r\n  Using cached PyYAML-5.4.tar.gz (174 kB)\r\n  Installing build dependencies ... done\r\n  Getting requirements to build wheel ... done\r\n    Preparing wheel metadata ... done\r\nBuilding wheels for collected packages: PyYAML\r\n  Building wheel for PyYAML (PEP 517) ... error\r\n  ERROR: Command errored out with exit status 1:\r\n   command: /home/pi/mycroft-core/.venv/bin/python3 /tmp/tmpdxjbwex4_in_process.py build_wheel /tmp/tmpf_p41el3\r\n       cwd: /tmp/pip-install-_mig10of/pyyaml_7b5a5c6af741440cae086d7c90911050\r\n  Complete output (83 lines):\r\n  running bdist_wheel\r\n  running build\r\n  running build_py\r\n  creating build\r\n  creating build/lib.linux-aarch64-3.9\r\n  creating build/lib.linux-aarch64-3.9/yaml\r\n  copying lib3/yaml/tokens.py -> build/lib.linux-aarch64-3.9/yaml\r\n  copying lib3/yaml/serializer.py -> build/lib.linux-aarch64-3.9/yaml\r\n  copying lib3/yaml/scanner.py -> build/lib.linux-aarch64-3.9/yaml\r\n  copying lib3/yaml/resolver.py -> build/lib.linux-aarch64-3.9/yaml\r\n  copying lib3/yaml/representer.py -> build/lib.linux-aarch64-3.9/yaml\r\n  copying lib3/yaml/reader.py -> build/lib.linux-aarch64-3.9/yaml\r\n  copying lib3/yaml/parser.py -> build/lib.linux-aarch64-3.9/yaml\r\n  copying lib3/yaml/nodes.py -> build/lib.linux-aarch64-3.9/yaml\r\n  copying lib3/yaml/loader.py -> build/lib.linux-aarch64-3.9/yaml\r\n  copying lib3/yaml/events.py -> build/lib.linux-aarch64-3.9/yaml\r\n  copying lib3/yaml/error.py -> build/lib.linux-aarch64-3.9/yaml\r\n  copying lib3/yaml/emitter.py -> build/lib.linux-aarch64-3.9/yaml\r\n  copying lib3/yaml/dumper.py -> build/lib.linux-aarch64-3.9/yaml\r\n  copying lib3/yaml/cyaml.py -> build/lib.linux-aarch64-3.9/yaml\r\n  copying lib3/yaml/constructor.py -> build/lib.linux-aarch64-3.9/yaml\r\n  copying lib3/yaml/composer.py -> build/lib.linux-aarch64-3.9/yaml\r\n  copying lib3/yaml/__init__.py -> build/lib.linux-aarch64-3.9/yaml\r\n  creating build/lib.linux-aarch64-3.9/_yaml\r\n  copying lib3/_yaml/__init__.py -> build/lib.linux-aarch64-3.9/_yaml\r\n  running build_ext\r\n  creating build/temp.linux-aarch64-3.9\r\n  creating build/temp.linux-aarch64-3.9/yaml\r\n  aarch64-linux-gnu-gcc -pthread -Wno-unused-result -Wsign-compare -DNDEBUG -g -fwrapv -O2 -Wall -g -ffile-prefix-map=/build/python3.9-PN012d/python3.9-3.9.2=. -fstack-protector-strong -Wformat -Werror=format-security -g -fwrapv -O2 -fPIC -I/home/pi/mycroft-core/.venv/include -I/usr/include/python3.9 -c yaml/_yaml.c -o build/temp.linux-aarch64-3.9/yaml/_yaml.o\r\n  In file included from yaml/_yaml.c:696:\r\n  yaml/_yaml.h:2:10: fatal error: yaml.h: No such file or directory\r\n      2 | #include <yaml.h>\r\n        |          ^~~~~~~~\r\n  compilation terminated.\r\n  Error compiling module, falling back to pure Python\r\n  running install\r\n  running install_lib\r\n  Traceback (most recent call last):\r\n    File \"/tmp/tmpdxjbwex4_in_process.py\", line 280, in <module>\r\n      main()\r\n    File \"/tmp/tmpdxjbwex4_in_process.py\", line 263, in main\r\n      json_out['return_val'] = hook(**hook_input['kwargs'])\r\n    File \"/tmp/tmpdxjbwex4_in_process.py\", line 204, in build_wheel\r\n      return _build_backend().build_wheel(wheel_directory, config_settings,\r\n    File \"/usr/lib/python3/dist-packages/setuptools/build_meta.py\", line 216, in build_wheel\r\n      return self._build_with_temp_dir(['bdist_wheel'], '.whl',\r\n    File \"/usr/lib/python3/dist-packages/setuptools/build_meta.py\", line 202, in _build_with_temp_dir\r\n      self.run_setup()\r\n    File \"/usr/lib/python3/dist-packages/setuptools/build_meta.py\", line 145, in run_setup\r\n      exec(compile(code, __file__, 'exec'), locals())\r\n    File \"setup.py\", line 271, in <module>\r\n      setup(\r\n    File \"/usr/lib/python3/dist-packages/setuptools/__init__.py\", line 153, in setup\r\n      return distutils.core.setup(**attrs)\r\n    File \"/usr/lib/python3/dist-packages/setuptools/_distutils/core.py\", line 148, in setup\r\n      dist.run_commands()\r\n    File \"/usr/lib/python3/dist-packages/setuptools/_distutils/dist.py\", line 967, in run_commands\r\n      self.run_command(cmd)\r\n    File \"/usr/lib/python3/dist-packages/setuptools/_distutils/dist.py\", line 986, in run_command\r\n      cmd_obj.run()\r\n    File \"/usr/lib/python3/dist-packages/wheel/bdist_wheel.py\", line 259, in run\r\n      self.run_command('install')\r\n    File \"/usr/lib/python3/dist-packages/setuptools/_distutils/cmd.py\", line 313, in run_command\r\n      self.distribution.run_command(command)\r\n    File \"/usr/lib/python3/dist-packages/setuptools/_distutils/dist.py\", line 986, in run_command\r\n      cmd_obj.run()\r\n    File \"/usr/lib/python3/dist-packages/setuptools/command/install.py\", line 61, in run\r\n      return orig.install.run(self)\r\n    File \"/usr/lib/python3/dist-packages/setuptools/_distutils/command/install.py\", line 578, in run\r\n      self.run_command(cmd_name)\r\n    File \"/usr/lib/python3/dist-packages/setuptools/_distutils/cmd.py\", line 313, in run_command\r\n      self.distribution.run_command(command)\r\n    File \"/usr/lib/python3/dist-packages/setuptools/_distutils/dist.py\", line 985, in run_command\r\n      cmd_obj.ensure_finalized()\r\n    File \"/usr/lib/python3/dist-packages/setuptools/_distutils/cmd.py\", line 107, in ensure_finalized\r\n      self.finalize_options()\r\n    File \"/usr/lib/python3/dist-packages/setuptools/command/install_lib.py\", line 17, in finalize_options\r\n      self.set_undefined_options('install',('install_layout','install_layout'))\r\n    File \"/usr/lib/python3/dist-packages/setuptools/_distutils/cmd.py\", line 290, in set_undefined_options\r\n      setattr(self, dst_option, getattr(src_cmd_obj, src_option))\r\n    File \"/usr/lib/python3/dist-packages/setuptools/_distutils/cmd.py\", line 103, in __getattr__\r\n      raise AttributeError(attr)\r\n  AttributeError: install_layout\r\n  ----------------------------------------\r\n  ERROR: Failed building wheel for PyYAML\r\nFailed to build PyYAML\r\nERROR: Could not build wheels for PyYAML which use PEP 517 and cannot be installed directly\r\n```\r\n", "reactions": {"url": "https://api.github.com/repos/MycroftAI/mycroft-core/issues/3117/reactions", "total_count": 1, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/MycroftAI/mycroft-core/issues/3117/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/MycroftAI/mycroft-core/issues/2884", "repository_url": "https://api.github.com/repos/MycroftAI/mycroft-core", "labels_url": "https://api.github.com/repos/MycroftAI/mycroft-core/issues/2884/labels{/name}", "comments_url": "https://api.github.com/repos/MycroftAI/mycroft-core/issues/2884/comments", "events_url": "https://api.github.com/repos/MycroftAI/mycroft-core/issues/2884/events", "html_url": "https://github.com/MycroftAI/mycroft-core/issues/2884", "id": 866938368, "node_id": "MDU6SXNzdWU4NjY5MzgzNjg=", "number": 2884, "title": "VolumeSkill mutes microphone after wake-word is recognized", "user": {"login": "poohsen", "id": 4363005, "node_id": "MDQ6VXNlcjQzNjMwMDU=", "avatar_url": "https://avatars.githubusercontent.com/u/4363005?v=4", "gravatar_id": "", "url": "https://api.github.com/users/poohsen", "html_url": "https://github.com/poohsen", "followers_url": "https://api.github.com/users/poohsen/followers", "following_url": "https://api.github.com/users/poohsen/following{/other_user}", "gists_url": "https://api.github.com/users/poohsen/gists{/gist_id}", "starred_url": "https://api.github.com/users/poohsen/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/poohsen/subscriptions", "organizations_url": "https://api.github.com/users/poohsen/orgs", "repos_url": "https://api.github.com/users/poohsen/repos", "events_url": "https://api.github.com/users/poohsen/events{/privacy}", "received_events_url": "https://api.github.com/users/poohsen/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 4031305761, "node_id": "MDU6TGFiZWw0MDMxMzA1NzYx", "url": "https://api.github.com/repos/MycroftAI/mycroft-core/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2021-04-25T07:28:32Z", "updated_at": "2021-05-16T07:38:09Z", "closed_at": "2021-05-16T07:38:09Z", "author_association": "NONE", "active_lock_reason": null, "body": "**Describe the bug**\r\nIn my installation, in 99% of the cases, something makes the VolumeSkill mute my microphone once the wake-word is recognized and recording begins. The only way around it at present is to blacklist the VolumeSkill.\r\n\r\n**To Reproduce**\r\nSteps to reproduce the behavior:\r\n1. Fire up mycroft with debug console\r\n2. say the wake-word\r\n3. observe the muting in the logs and the abysmal recognition rate of the STT engine\r\n\r\n**Expected behavior**\r\nNo muting by the VolumeSkill\r\n\r\n**Log files**\r\nOnce loglevel is set to DEBUG, I can see this in the logs:\r\n```\r\n18:43:18.218 | INFO | 3800 | main:handle_record_begin:41 | Begin Recording\u2026\r\n18:43:18.245 | DEBUG | 3794 | VolumeSkill | MUTING!\r\n18:43:18.245 | DEBUG | 3794 | VolumeSkill | Finding Alsa Mixer for control\u2026\r\n18:43:18.284 | DEBUG | 3794 | VolumeSkill | Volume before mute: 100\r\n18:43:18.284 | DEBUG | 3794 | VolumeSkill | 100\r\n18:43:18.284 | DEBUG | 3794 | VolumeSkill | 0\r\n18:43:21.407 | DEBUG | 3794 | VolumeSkill | Finding Alsa Mixer for control\u2026\r\n18:43:21.469 | DEBUG | 3794 | VolumeSkill | 100\r\n```\r\n(after 3s it finished recording and unmuted the mic again)\r\n\r\n**Environment (please complete the following information):**\r\n - Device type: VirtualBox 6.1 on OSX 11.2.3 host\r\n - OS: Debian 9 Scratch (guest)\r\n - Mycroft-core version: 20.8.1\r\n\r\n**Additional context**\r\n\r\nThis might be some setup problem as I\u2019ve never paired my installation, but then again I played with the two most obvious settings that could affect this, \u201cmute_during_output\u201d and \u201cduck_while_listening\u201d and they had no effect here. \r\n\r\nMy user config:\r\n```\r\n{\r\n  \"max_allowed_core_version\": 20.8,\r\n  \"time_format\": \"full\",\r\n  \"date_format\": \"DMY\",\r\n  \"location\": {\r\n    \"city\": {\r\n      \"code\": \"Amsterdam\",\r\n      \"name\": \"Amsterdam\",\r\n      \"state\": {\r\n        \"code\": \"NH\",\r\n        \"name\": \"Noord-Holland\",\r\n        \"country\": {\r\n          \"code\": \"NL\",\r\n          \"name\": \"Netherlands\"\r\n        }\r\n      }\r\n    },\r\n    \"coordinate\": {\r\n      \"latitude\": 38.971669,\r\n      \"longitude\": -95.23525\r\n    },\r\n    \"timezone\": {\r\n      \"code\": \"Europe/Amsterdam\",\r\n      \"name\": \"Central European Summer Time\",\r\n      \"dstOffset\": 3600000,\r\n      \"offset\":    3600000\r\n    }\r\n  },\r\n\r\n  \"listener\": {\r\n    \"device_name\": \"Intel 82801AA-ICH\",\r\n    \"wake_word\": \"hey marvin\",\r\n    \"mute_during_output\" : false,\r\n    \"duck_while_listening\" : 0.3\r\n  },\r\n  \"hotwords\": {\r\n    \"hey marvin\": {\r\n      \"module\": \"precise\",\r\n      \"local_model_file\": \"/home/osboxes/.mycroft/precise/marvin.pb\",\r\n      \"sensitivity\": 0.8,\r\n      \"trigger_level\": 3 \r\n    }\r\n  },\r\n  \"skills\": {\r\n    \"blacklisted_skills\": [\r\n      \"mycroft-configuration.mycroftai\",\r\n      \"mycroft-weather.mycroftai\",\r\n      \"mycroft-pairing.mycroftai\"\r\n    ],\r\n  \"priority_skills\": [\"mycroft-volume\"]\r\n  },\r\n  \"stt\": {\r\n    \"deepspeech_server\": {\r\n      \"uri\": \"http://192.168.2.25:8080/stt\"\r\n    },\r\n    \"module\": \"deepspeech_server\"\r\n  },\r\n  \"user\": \"\",\r\n  \"log_level\": \"DEBUG\"\r\n}\r\n```", "reactions": {"url": "https://api.github.com/repos/MycroftAI/mycroft-core/issues/2884/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/MycroftAI/mycroft-core/issues/2884/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/MycroftAI/mycroft-core/issues/2882", "repository_url": "https://api.github.com/repos/MycroftAI/mycroft-core", "labels_url": "https://api.github.com/repos/MycroftAI/mycroft-core/issues/2882/labels{/name}", "comments_url": "https://api.github.com/repos/MycroftAI/mycroft-core/issues/2882/comments", "events_url": "https://api.github.com/repos/MycroftAI/mycroft-core/issues/2882/events", "html_url": "https://github.com/MycroftAI/mycroft-core/issues/2882", "id": 859631874, "node_id": "MDU6SXNzdWU4NTk2MzE4NzQ=", "number": 2882, "title": "Delay between wakeword and recording start", "user": {"login": "david-morris", "id": 5530960, "node_id": "MDQ6VXNlcjU1MzA5NjA=", "avatar_url": "https://avatars.githubusercontent.com/u/5530960?v=4", "gravatar_id": "", "url": "https://api.github.com/users/david-morris", "html_url": "https://github.com/david-morris", "followers_url": "https://api.github.com/users/david-morris/followers", "following_url": "https://api.github.com/users/david-morris/following{/other_user}", "gists_url": "https://api.github.com/users/david-morris/gists{/gist_id}", "starred_url": "https://api.github.com/users/david-morris/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/david-morris/subscriptions", "organizations_url": "https://api.github.com/users/david-morris/orgs", "repos_url": "https://api.github.com/users/david-morris/repos", "events_url": "https://api.github.com/users/david-morris/events{/privacy}", "received_events_url": "https://api.github.com/users/david-morris/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 4031305761, "node_id": "MDU6TGFiZWw0MDMxMzA1NzYx", "url": "https://api.github.com/repos/MycroftAI/mycroft-core/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2021-04-16T09:16:47Z", "updated_at": "2021-04-20T14:14:38Z", "closed_at": "2021-04-20T14:14:38Z", "author_association": "NONE", "active_lock_reason": null, "body": "**Describe the bug**\r\nWhen I have something playing on Kodi on the same host as my Mycroft instance, the wakeword will trigger and then 30 seconds to 2 minutes will pass before Mycroft actually reduces the volume of playback and listens.\r\n\r\n\r\n**To Reproduce**\r\nSteps to reproduce the behavior:\r\n1. Start kodi playback on the same host by any means\r\n2. use the wake word\r\n\r\n**Expected behavior**\r\nVolume lowers and recording begins within three seconds of the wakeword being recognized.\r\n\r\n**Log files**\r\n`voice.log`:\r\n```\r\n2021-04-16 10:19:56.387 | INFO     | 3764518 | __main__:handle_utterance:76 | Utterance: ['play german news from favorites']\r\n2021-04-16 10:32:57.957 | INFO     | 3764518 | mycroft.session:get:72 | New Session Start: 0ac028f4-54d6-4908a40f-4820f3bc4c7\r\n2021-04-16 10:32:57.958 | INFO     | 3764518 | __main__:handle_wakeword:71 | Wakeword Detected: computer\r\nFailed to drain stream: Timeout\r\n2021-04-16 10:33:28.023 | INFO     | 3764518 | __main__:handle_record_begin:41 | Begin Recording...\r\n2021-04-16 10:33:30.791 | INFO     | 3764518 | __main__:handle_record_end:49 | End Recording...\r\n2021-04-16 10:33:32.095 | INFO     | 3764518 | __main__:handle_utterance:76 | Utterance: ['stop kodi']\r\n2021-04-16 10:45:27.380 | INFO     | 3764518 | mycroft.session:get:72 | New Session Start: c3035158-38c7-49c8ac09-5acabf8c2b79\r\n2021-04-16 10:45:27.382 | INFO     | 3764518 | __main__:handle_wakeword:71 | Wakeword Detected: computer\r\n2021-04-16 10:45:27.763 | INFO     | 3764518 | __main__:handle_record_begin:41 | Begin Recording...\r\n2021-04-16 10:45:37.752 | INFO     | 3764518 | __main__:handle_record_end:49 | End Recording...\r\n2021-04-16 10:45:44.333 | INFO     | 3764518 | __main__:handle_utterance:76 | Utterance: ['move kodi cursor down']\r\n```\r\n\r\n\r\n**Environment (please complete the following information):**\r\n - Device type: halftop (x86_64) running headless except for a wayland kiosk instance of kodi\r\n - OS: Arch\r\n - Mycroft-core version: 20.8.1\r\n - Other versions: pulseaudio 14.2, python 3.9.2 (yes inside the .venv).\r\n\r\n**Additional context**\r\n\r\nI use mycroft on a system set up as a kodi/general server arch box. Pulseaudio is started by kodi when the kodi-standalone service starts kodi-wayland (under a different user).  I have tested playing a video back on another computer in the same room, and that makes triggering the wake word harder, but once triggered, Mycroft does not delay before recording, nor does the default speech recognition have any trouble picking out background noise.\r\n\r\n\r\n`mycroft.conf`:\r\n```\r\n{\r\n  \"max_allowed_core_version\": 20.8,\r\n  \"skills\": {\r\n    \"blacklisted_skills\": [\r\n      \"mycroft-npr-news\",\r\n      \"mycroft-stock\"\r\n    ]\r\n  },\r\n  \"listener\": {\r\n    \"wake_word\": \"computer\",\r\n    \"mute_during_output\": false\r\n  },\r\n  \"hotwords\": {\r\n    \"hey quinoa\": {\r\n      \"module\": \"pocketsphinx\",\r\n      \"phonemes\": \"HH EY . K IY N W AO.\",\r\n      \"threshold\": 1e-05\r\n    },\r\n    \"computer\": {\r\n      \"module\": \"porcupine_wakeword_plug\",\r\n      \"keyword_file_path\": \"~/.mycroft/computer_linux.ppn\",\r\n      \"sensitivity\": 0.7\r\n    }\r\n  }\r\n}\r\n```\r\n\r\nSomething might be weird with my multiprocessing setup, although I haven't chosen to touch it, this happens on startup (though padatious intents still work fine):\r\n\r\n```\r\n2021-04-15 09:33:09.006 | INFO     | 3764511 | mycroft.skills.intent_services.padatious_service:train:81 | Training... (single_thread=False)\r\nException in thread Thread-7:\r\nTraceback (most recent call last):\r\n  File \"/usr/lib/python3.9/threading.py\", line 954, in _bootstrap_inner\r\n    self.run()\r\n  File \"/usr/lib/python3.9/threading.py\", line 892, in run\r\n    self._target(*self._args, **self._kwargs)\r\n  File \"/home/dmorris/src/mycroft-core/.venv/lib/python3.9/site-packages/padatious/training_manager.py\", line 98, in train\r\n    pool = mp.Pool()\r\n  File \"/usr/lib/python3.9/multiprocessing/context.py\", line 119, in Pool\r\n    return Pool(processes, initializer, initargs, maxtasksperchild,\r\n  File \"/usr/lib/python3.9/multiprocessing/pool.py\", line 191, in __init__\r\n    self._setup_queues()\r\n  File \"/usr/lib/python3.9/multiprocessing/pool.py\", line 343, in _setup_queues\r\n    self._inqueue = self._ctx.SimpleQueue()\r\n  File \"/usr/lib/python3.9/multiprocessing/context.py\", line 112, in SimpleQueue\r\n    from .queues import SimpleQueue\r\nImportError: cannot import name 'SimpleQueue' from partially initialized module 'multiprocessing.queues' (most likely due to a circular import) (/usr/lib/python3.9/multiprocessing/queues.py)\r\n```", "reactions": {"url": "https://api.github.com/repos/MycroftAI/mycroft-core/issues/2882/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/MycroftAI/mycroft-core/issues/2882/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/MycroftAI/mycroft-core/issues/2880", "repository_url": "https://api.github.com/repos/MycroftAI/mycroft-core", "labels_url": "https://api.github.com/repos/MycroftAI/mycroft-core/issues/2880/labels{/name}", "comments_url": "https://api.github.com/repos/MycroftAI/mycroft-core/issues/2880/comments", "events_url": "https://api.github.com/repos/MycroftAI/mycroft-core/issues/2880/events", "html_url": "https://github.com/MycroftAI/mycroft-core/issues/2880", "id": 850352822, "node_id": "MDU6SXNzdWU4NTAzNTI4MjI=", "number": 2880, "title": "mycroft.conf silently overwritten", "user": {"login": "david-morris", "id": 5530960, "node_id": "MDQ6VXNlcjU1MzA5NjA=", "avatar_url": "https://avatars.githubusercontent.com/u/5530960?v=4", "gravatar_id": "", "url": "https://api.github.com/users/david-morris", "html_url": "https://github.com/david-morris", "followers_url": "https://api.github.com/users/david-morris/followers", "following_url": "https://api.github.com/users/david-morris/following{/other_user}", "gists_url": "https://api.github.com/users/david-morris/gists{/gist_id}", "starred_url": "https://api.github.com/users/david-morris/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/david-morris/subscriptions", "organizations_url": "https://api.github.com/users/david-morris/orgs", "repos_url": "https://api.github.com/users/david-morris/repos", "events_url": "https://api.github.com/users/david-morris/events{/privacy}", "received_events_url": "https://api.github.com/users/david-morris/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 4031305761, "node_id": "MDU6TGFiZWw0MDMxMzA1NzYx", "url": "https://api.github.com/repos/MycroftAI/mycroft-core/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 10, "created_at": "2021-04-05T13:04:27Z", "updated_at": "2022-03-07T00:33:11Z", "closed_at": "2022-03-07T00:33:11Z", "author_association": "NONE", "active_lock_reason": null, "body": "**Describe the bug**\r\nWhen there's an error in mycroft.conf, it is silently overwritten.  This is bad because user settings should not be permanently deleted without consent. Instead, logs and/or the output of mycroft-start should show the error.\r\n\r\n**To Reproduce**\r\nTry the following mycroft.conf:\r\n```\r\n{\r\n  \"max_allowed_core_version\": 20.8,\r\n  \"listener\": {\r\n    \"wake_word\": \"Lazarus\",\r\n    \"device_name\": \"default\"\r\n    \"energy_ratio\": 1.5\r\n  },\r\n  \"hotwords\": {\r\n    \"Lazarus\": {\r\n      \"module\": \"pocketsphinx\",\r\n      \"phonemes\": \"L AE Z ER AH S .\",\r\n    }\r\n  }\r\n}\r\n```\r\n\r\nNote the missing comma after \"default\" and incorrect use of the energy ratio parameter.\r\n\r\nAfter running mycroft-start restart all, it is overwritten with the following:\r\n\r\n```\r\n{\r\n  \"max_allowed_core_version\": 20.8\r\n}\r\n```\r\n\r\n**Expected behavior**\r\nOne of the following:\r\n\"Mycroft failed to start because of an error in mycroft.conf.\"\r\n\r\nor\r\n\r\nThe config file is copied to `mycroft.conf.old` (or `mycroft.conf.old.1`, etc.) and `mycroft.conf` is overwritten with the following:\r\n```\r\n# The previous mycroft.conf contained errors and was moved to mycroft.conf.old.\r\n{\r\n  \"max_allowed_core_version\": 20.8\r\n}\r\n```", "reactions": {"url": "https://api.github.com/repos/MycroftAI/mycroft-core/issues/2880/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/MycroftAI/mycroft-core/issues/2880/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/MycroftAI/mycroft-core/issues/2845", "repository_url": "https://api.github.com/repos/MycroftAI/mycroft-core", "labels_url": "https://api.github.com/repos/MycroftAI/mycroft-core/issues/2845/labels{/name}", "comments_url": "https://api.github.com/repos/MycroftAI/mycroft-core/issues/2845/comments", "events_url": "https://api.github.com/repos/MycroftAI/mycroft-core/issues/2845/events", "html_url": "https://github.com/MycroftAI/mycroft-core/issues/2845", "id": 813739157, "node_id": "MDU6SXNzdWU4MTM3MzkxNTc=", "number": 2845, "title": "Pytest test failed: test_unknown_language,  test_nice_date_time and test_gender", "user": {"login": "kevinsmia1939", "id": 11407922, "node_id": "MDQ6VXNlcjExNDA3OTIy", "avatar_url": "https://avatars.githubusercontent.com/u/11407922?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kevinsmia1939", "html_url": "https://github.com/kevinsmia1939", "followers_url": "https://api.github.com/users/kevinsmia1939/followers", "following_url": "https://api.github.com/users/kevinsmia1939/following{/other_user}", "gists_url": "https://api.github.com/users/kevinsmia1939/gists{/gist_id}", "starred_url": "https://api.github.com/users/kevinsmia1939/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kevinsmia1939/subscriptions", "organizations_url": "https://api.github.com/users/kevinsmia1939/orgs", "repos_url": "https://api.github.com/users/kevinsmia1939/repos", "events_url": "https://api.github.com/users/kevinsmia1939/events{/privacy}", "received_events_url": "https://api.github.com/users/kevinsmia1939/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 4031305761, "node_id": "MDU6TGFiZWw0MDMxMzA1NzYx", "url": "https://api.github.com/repos/MycroftAI/mycroft-core/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2021-02-22T18:12:02Z", "updated_at": "2021-02-23T17:07:45Z", "closed_at": "2021-02-23T17:07:44Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi, I am trying to update mycroft-core in openSUSE Tumbleweed.\r\nopenSUSE use Open Build Service (OBS) to build and ship their package.\r\nThis is the repo I'm working on: https://build.opensuse.org/package/show/home:andythe_great/mycroft-core\r\n\r\nThere are some test failures that I skipped, because it is already known. #2574\r\nHere are new test failure I got.\r\n\r\n```\r\n[   88s] =================================== FAILURES ===================================\r\n[   88s] __________________ TestNiceNumberFormat.test_unknown_language __________________\r\n[   88s] \r\n[   88s] self = <test.unittests.util.test_format.TestNiceNumberFormat testMethod=test_unknown_language>\r\n[   88s] \r\n[   88s]     def test_unknown_language(self):\r\n[   88s]         \"\"\" An unknown / unhandled language should return the string\r\n[   88s]             representation of the input number.\r\n[   88s]         \"\"\"\r\n[   88s] >       self.assertEqual(nice_number(5.5, lang='as-fd'), '5.5',\r\n[   88s]                          'should format 5.5 as 5.5 not {}'.format(\r\n[   88s]                              nice_number(5.5, lang='as-df')))\r\n[   88s] E       AssertionError: '5 and a half' != '5.5'\r\n[   88s] E       - 5 and a half\r\n[   88s] E       + 5.5\r\n[   88s] E        : should format 5.5 as 5.5 not 5 and a half\r\n[   88s] \r\n[   88s] test/unittests/util/test_format.py:98: AssertionError\r\n[   88s] ____________________ TestNiceDateFormat.test_nice_date_time ____________________\r\n[   88s] \r\n[   88s] self = <test.unittests.util.test_format.TestNiceDateFormat testMethod=test_nice_date_time>\r\n[   88s] \r\n[   88s]     def test_nice_date_time(self):\r\n[   88s]         for lang in self.test_config:\r\n[   88s]             i = 1\r\n[   88s]             while (self.test_config[lang].get('test_nice_date_time') and\r\n[   88s]                    self.test_config[lang]['test_nice_date_time'].get(str(i))):\r\n[   88s]                 p = self.test_config[lang]['test_nice_date_time'][str(i)]\r\n[   88s]                 dp = ast.literal_eval(p['datetime_param'])\r\n[   88s]                 np = ast.literal_eval(p['now'])\r\n[   88s]                 dt = datetime.datetime(\r\n[   88s]                     dp[0], dp[1], dp[2], dp[3], dp[4], dp[5])\r\n[   88s]                 now = None if not np else datetime.datetime(\r\n[   88s]                     np[0], np[1], np[2], np[3], np[4], np[5])\r\n[   88s]                 print('Testing for ' + lang + ' that ' + str(dt) +\r\n[   88s]                       ' is date time ' + p['assertEqual'])\r\n[   88s]                 self.assertEqual(\r\n[   88s]                     p['assertEqual'],\r\n[   88s] >                   nice_date_time(\r\n[   88s]                         dt, lang=lang, now=now,\r\n[   88s]                         use_24hour=ast.literal_eval(p['use_24hour']),\r\n[   88s]                         use_ampm=ast.literal_eval(p['use_ampm'])))\r\n[   88s] \r\n[   88s] test/unittests/util/test_format.py:412: \r\n[   88s] _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \r\n[   88s] ../../BUILDROOT/mycroft-core-20.8.1-0.x86_64/usr/lib/python3.8/site-packages/mycroft/util/format.py:130: in nice_date_time\r\n[   88s]     return lingua_franca.format.nice_date_time(dt, lang, now,\r\n[   88s] /usr/lib/python3.8/site-packages/lingua_franca/format.py:348: in nice_date_time\r\n[   88s]     return date_time_format.date_time_format(dt, full_code, now, use_24hour,\r\n[   88s] /usr/lib/python3.8/site-packages/lingua_franca/format.py:212: in date_time_format\r\n[   88s]     time_str = nice_time(dt, lang, use_24hour=use_24hour,\r\n[   88s] /usr/lib/python3.8/site-packages/lingua_franca/internal.py:590: in call_localized_function\r\n[   88s]     return _call_localized_function(func, *args, **kwargs)\r\n[   88s] _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \r\n[   88s] \r\n[   88s] func = <function nice_time at 0x7fc232f58550>\r\n[   88s] args = (datetime.datetime(2017, 1, 31, 13, 22, 3),)\r\n[   88s] kwargs = {'use_24hour': False, 'use_ampm': True}\r\n[   88s] func_signature = <Signature (dt, lang='', speech=True, use_24hour=False, use_ampm=False)>\r\n[   88s] func_params = ['dt', 'lang', 'speech', 'use_24hour', 'use_ampm']\r\n[   88s] lang_param_index = 1, lang_param = 'cs-cz', tmp = 'cs-cz', __use_tmp = True\r\n[   88s] _module_name = 'format'\r\n[   88s] _module = <module 'lingua_franca.lang.format_cs' from '/usr/lib/python3.8/site-packages/lingua_franca/lang/format_cs.py'>\r\n[   88s] \r\n[   88s]     def _call_localized_function(func, *args, **kwargs):\r\n[   88s]         func_signature = signature(func)\r\n[   88s]         func_params = list(func_signature.parameters)\r\n[   88s]         lang_param_index = func_params.index('lang')\r\n[   88s]         full_lang_code = None\r\n[   88s]     \r\n[   88s]         # Momentarily assume we're not passing a lang code\r\n[   88s]         lang_code = get_default_lang()\r\n[   88s]         if not lang_code:\r\n[   88s]             raise NoSuchModuleError(\"No language module loaded.\")\r\n[   88s]     \r\n[   88s]         # Check if we're passing a lang as a kwarg\r\n[   88s]         if 'lang' in kwargs.keys():\r\n[   88s]             lang_param = kwargs['lang']\r\n[   88s]             if lang_param == None:\r\n[   88s]                 warn(NoneLangWarning)\r\n[   88s]                 lang_code = get_default_lang()\r\n[   88s]             else:\r\n[   88s]                 lang_code = lang_param\r\n[   88s]     \r\n[   88s]         # Check if we're passing a lang as a positional arg\r\n[   88s]         elif lang_param_index < len(args):\r\n[   88s]             lang_param = args[lang_param_index]\r\n[   88s]             if lang_param == None:\r\n[   88s]                 warn(NoneLangWarning)\r\n[   88s]                 lang_code = get_default_lang()\r\n[   88s]             elif lang_param in _SUPPORTED_LANGUAGES or \\\r\n[   88s]                     lang_param in _SUPPORTED_FULL_LOCALIZATIONS:\r\n[   88s]                 lang_code = args[lang_param_index]\r\n[   88s]             args = args[:lang_param_index] + args[lang_param_index+1:]\r\n[   88s]     \r\n[   88s]         if lang_code not in _SUPPORTED_LANGUAGES:\r\n[   88s]             try:\r\n[   88s]                 tmp = lang_code\r\n[   88s]                 __use_tmp = True\r\n[   88s]                 lang_code = get_primary_lang_code(lang_code)\r\n[   88s]             except ValueError:\r\n[   88s]                 __error = \\\r\n[   88s]                     UnsupportedLanguageError(\"\\nLanguage '{language}' is not yet \"\r\n[   88s]                                              \"supported by Lingua Franca. \"\r\n[   88s]                                              \"Supported language codes \"\r\n[   88s]                                              \"include the following:\\n{supported}\"\r\n[   88s]                                              .format(\r\n[   88s]                                                  language=lang_code,\r\n[   88s]                                                  supported=_SUPPORTED_FULL_LOCALIZATIONS))\r\n[   88s]                 if UnsupportedLanguageError in run_own_code_on:\r\n[   88s]                     raise __error\r\n[   88s]                 else:\r\n[   88s]                     warn(DeprecationWarning(\"The following warning will \"\r\n[   88s]                                             \"become an exception in a future \"\r\n[   88s]                                             \"version of Lingua Franca.\" +\r\n[   88s]                                             str(__error)))\r\n[   88s]                     lang_code = get_default_lang()\r\n[   88s]                     full_lang_code = get_full_lang_code()\r\n[   88s]                     __use_tmp = False\r\n[   88s]             if lang_code not in _SUPPORTED_LANGUAGES:\r\n[   88s]                 _raise_unsupported_language(lang_code)\r\n[   88s]             if __use_tmp:\r\n[   88s]                 full_lang_code = tmp\r\n[   88s]         else:\r\n[   88s]             full_lang_code = get_full_lang_code(lang_code)\r\n[   88s]     \r\n[   88s]         # Here comes the ugly business.\r\n[   88s]         _module_name = func.__module__.split('.')[-1]\r\n[   88s]         _module = import_module(\".lang.\" + _module_name +\r\n[   88s]                                 \"_\" + lang_code, \"lingua_franca\")\r\n[   88s]         # The nonsense above gets you from lingua_franca.parse\r\n[   88s]         # to lingua_franca.lang.parse_xx\r\n[   88s]         if _module_name not in _localized_functions.keys():\r\n[   88s]             raise NoSuchModuleError(\"Module lingua_franca.\" +\r\n[   88s]                                     _module_name + \" not recognized\")\r\n[   88s]         if lang_code not in _localized_functions[_module_name].keys():\r\n[   88s] >           raise NoSuchModuleError(_module_name + \" module of language '\" +\r\n[   88s]                                     lang_code + \"' is not currently loaded.\")\r\n[   88s] E           lingua_franca.internal.NoSuchModuleError: format module of language 'cs' is not currently loaded.\r\n[   88s] \r\n[   88s] /usr/lib/python3.8/site-packages/lingua_franca/internal.py:531: NoSuchModuleError\r\n[   88s] ----------------------------- Captured stdout call -----------------------------\r\n[   88s] Testing for cs-cz that 2017-01-31 13:22:03 is date time \u00fater\u00fd, leden t\u0159ic\u00e1t\u00e9ho-prvn\u00edho, dvacet sedmn\u00e1ct v jedna dvacet dva p.m.\r\n[   88s] __________________________ TestNormalize.test_gender ___________________________\r\n[   88s] \r\n[   88s] self = <test.unittests.util.test_parse.TestNormalize testMethod=test_gender>\r\n[   88s] \r\n[   88s]     def test_gender(self):\r\n[   88s] >       self.assertEqual(get_gender(\"person\"),\r\n[   88s]                          None)\r\n[   88s] \r\n[   88s] test/unittests/util/test_parse.py:829: \r\n[   88s] _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \r\n[   88s] ../../BUILDROOT/mycroft-core-20.8.1-0.x86_64/usr/lib/python3.8/site-packages/mycroft/util/parse.py:235: in get_gender\r\n[   88s]     return lingua_franca.parse.get_gender(word, context, lang)\r\n[   88s] /usr/lib/python3.8/site-packages/lingua_franca/internal.py:590: in call_localized_function\r\n[   88s]     return _call_localized_function(func, *args, **kwargs)\r\n[   88s] _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \r\n[   88s] \r\n[   88s] func = <function get_gender at 0x7fc23177d040>, args = ('person', '')\r\n[   88s] kwargs = {}, func_signature = <Signature (word, context='', lang='')>\r\n[   88s] func_params = ['word', 'context', 'lang'], lang_param_index = 2\r\n[   88s] lang_param = None, _module_name = 'parse'\r\n[   88s] _module = <module 'lingua_franca.lang.parse_en' from '/usr/lib/python3.8/site-packages/lingua_franca/lang/parse_en.py'>\r\n[   88s] func_name = 'get_gender'\r\n[   88s] \r\n[   88s]     def _call_localized_function(func, *args, **kwargs):\r\n[   88s]         func_signature = signature(func)\r\n[   88s]         func_params = list(func_signature.parameters)\r\n[   88s]         lang_param_index = func_params.index('lang')\r\n[   88s]         full_lang_code = None\r\n[   88s]     \r\n[   88s]         # Momentarily assume we're not passing a lang code\r\n[   88s]         lang_code = get_default_lang()\r\n[   88s]         if not lang_code:\r\n[   88s]             raise NoSuchModuleError(\"No language module loaded.\")\r\n[   88s]     \r\n[   88s]         # Check if we're passing a lang as a kwarg\r\n[   88s]         if 'lang' in kwargs.keys():\r\n[   88s]             lang_param = kwargs['lang']\r\n[   88s]             if lang_param == None:\r\n[   88s]                 warn(NoneLangWarning)\r\n[   88s]                 lang_code = get_default_lang()\r\n[   88s]             else:\r\n[   88s]                 lang_code = lang_param\r\n[   88s]     \r\n[   88s]         # Check if we're passing a lang as a positional arg\r\n[   88s]         elif lang_param_index < len(args):\r\n[   88s]             lang_param = args[lang_param_index]\r\n[   88s]             if lang_param == None:\r\n[   88s]                 warn(NoneLangWarning)\r\n[   88s]                 lang_code = get_default_lang()\r\n[   88s]             elif lang_param in _SUPPORTED_LANGUAGES or \\\r\n[   88s]                     lang_param in _SUPPORTED_FULL_LOCALIZATIONS:\r\n[   88s]                 lang_code = args[lang_param_index]\r\n[   88s]             args = args[:lang_param_index] + args[lang_param_index+1:]\r\n[   88s]     \r\n[   88s]         if lang_code not in _SUPPORTED_LANGUAGES:\r\n[   88s]             try:\r\n[   88s]                 tmp = lang_code\r\n[   88s]                 __use_tmp = True\r\n[   88s]                 lang_code = get_primary_lang_code(lang_code)\r\n[   88s]             except ValueError:\r\n[   88s]                 __error = \\\r\n[   88s]                     UnsupportedLanguageError(\"\\nLanguage '{language}' is not yet \"\r\n[   88s]                                              \"supported by Lingua Franca. \"\r\n[   88s]                                              \"Supported language codes \"\r\n[   88s]                                              \"include the following:\\n{supported}\"\r\n[   88s]                                              .format(\r\n[   88s]                                                  language=lang_code,\r\n[   88s]                                                  supported=_SUPPORTED_FULL_LOCALIZATIONS))\r\n[   88s]                 if UnsupportedLanguageError in run_own_code_on:\r\n[   88s]                     raise __error\r\n[   88s]                 else:\r\n[   88s]                     warn(DeprecationWarning(\"The following warning will \"\r\n[   88s]                                             \"become an exception in a future \"\r\n[   88s]                                             \"version of Lingua Franca.\" +\r\n[   88s]                                             str(__error)))\r\n[   88s]                     lang_code = get_default_lang()\r\n[   88s]                     full_lang_code = get_full_lang_code()\r\n[   88s]                     __use_tmp = False\r\n[   88s]             if lang_code not in _SUPPORTED_LANGUAGES:\r\n[   88s]                 _raise_unsupported_language(lang_code)\r\n[   88s]             if __use_tmp:\r\n[   88s]                 full_lang_code = tmp\r\n[   88s]         else:\r\n[   88s]             full_lang_code = get_full_lang_code(lang_code)\r\n[   88s]     \r\n[   88s]         # Here comes the ugly business.\r\n[   88s]         _module_name = func.__module__.split('.')[-1]\r\n[   88s]         _module = import_module(\".lang.\" + _module_name +\r\n[   88s]                                 \"_\" + lang_code, \"lingua_franca\")\r\n[   88s]         # The nonsense above gets you from lingua_franca.parse\r\n[   88s]         # to lingua_franca.lang.parse_xx\r\n[   88s]         if _module_name not in _localized_functions.keys():\r\n[   88s]             raise NoSuchModuleError(\"Module lingua_franca.\" +\r\n[   88s]                                     _module_name + \" not recognized\")\r\n[   88s]         if lang_code not in _localized_functions[_module_name].keys():\r\n[   88s]             raise NoSuchModuleError(_module_name + \" module of language '\" +\r\n[   88s]                                     lang_code + \"' is not currently loaded.\")\r\n[   88s]     \r\n[   88s]         func_name = func.__name__.split('.')[-1]\r\n[   88s]         # At some point in the past, both the module and the language\r\n[   88s]         # were imported/loaded, respectively.\r\n[   88s]         # When that happened, we cached the *signature* of each\r\n[   88s]         # localized function.\r\n[   88s]         #\r\n[   88s]         # This is the crucial element that allows us to import funcs\r\n[   88s]         # on the fly.\r\n[   88s]         #\r\n[   88s]         # If we didn't find a localized function to correspond with\r\n[   88s]         # the wrapped function, we cached NotImplementedError in its\r\n[   88s]         # place.\r\n[   88s]         loc_signature = _localized_functions[_module_name][lang_code][func_name]\r\n[   88s]         if isinstance(loc_signature, type(NotImplementedError())):\r\n[   88s] >           raise loc_signature\r\n[   88s] E           lingua_franca.internal.FunctionNotLocalizedError: The requested function is not implemented in English.\r\n[   88s] \r\n[   88s] /usr/lib/python3.8/site-packages/lingua_franca/internal.py:548: FunctionNotLocalizedError\r\n[   88s] =============================== warnings summary ===============================\r\n[   88s] test/unittests/skills/test_intent_service.py::ConversationTest::test_reset_converse\r\n[   88s]   /usr/lib/python3.8/site-packages/lingua_franca/lang/__init__.py:43: DeprecationWarning: Direct imports from lingua_franc\r\n[   88s]     warn(_setlang, DeprecationWarning)\r\n[   88s] \r\n[   88s] test/unittests/skills/test_intent_service.py: 7 warnings\r\n[   88s] test/unittests/util/test_format.py: 180 warnings\r\n[   88s] test/unittests/util/test_parse.py: 568 warnings\r\n[   88s]   /usr/lib/python3.8/site-packages/lingua_franca/internal.py:483: DeprecationWarning: Lingua Franca is dropping support fo\r\n[   88s]     warn(NoneLangWarning)\r\n[   88s] \r\n[   88s] test/unittests/util/test_format.py::TestNiceDateFormat::test_nice_date\r\n[   88s]   /usr/lib/python3.8/site-packages/lingua_franca/internal.py:362: DeprecationWarning: Invalid language code detected. Fall\r\n[   88s]   This behavior is deprecated. The 'lang' parameter is optional, and only accepts supported language codes, beginning with\r\n[   88s]     warn(InvalidLangWarning)\r\n[   88s] \r\n[   88s] test/unittests/util/test_format.py: 27 warnings\r\n[   88s]   /usr/lib/python3.8/site-packages/lingua_franca/format.py:57: DeprecationWarning: Lingua Franca is dropping support for '\r\n[   88s]     warn(NoneLangWarning)\r\n[   88s] \r\n[   88s] test/unittests/util/test_parse.py: 14 warnings\r\n[   88s]   /usr/lib/python3.8/site-packages/lingua_franca/lang/__init__.py:56: DeprecationWarning: Direct imports from lingua_franc\r\n[   88s]     warn(\"Direct imports from lingua_franca.lang have been deprecated. Use\"\r\n[   88s] \r\n[   88s] test/unittests/util/test_parse.py: 14 warnings\r\n[   88s]   /usr/lib/python3.8/site-packages/lingua_franca/internal.py:303: DeprecationWarning: Lingua Franca is dropping support fo\r\n[   88s]     warn(NoneLangWarning)\r\n[   88s] \r\n[   88s] -- Docs: https://docs.pytest.org/en/stable/warnings.html\r\n[   88s] =========================== short test summary info ============================\r\n[   88s] FAILED test/unittests/util/test_format.py::TestNiceNumberFormat::test_unknown_language\r\n[   88s] FAILED test/unittests/util/test_format.py::TestNiceDateFormat::test_nice_date_time\r\n[   88s] FAILED test/unittests/util/test_parse.py::TestNormalize::test_gender - lingua...\r\n[   88s] = 3 failed, 399 passed, 4 skipped, 3 deselected, 812 warnings in 82.76s (0:01:22) =\r\n[   88s] error: Bad exit status from /var/tmp/rpm-tmp.FXGbpR (%check)\r\n\r\n```\r\n\r\nDependencies installed.\r\n\r\n```\r\n[200/402] python38-base-3.8.7-2.1\r\n[201/402] python38-PyMsgBox-1.0.7-1.5\r\n[202/402] python38-PyRIC-0.1.6.3-3.5\r\n[203/402] python38-PyTweening-1.0.3-3.5\r\n[204/402] python38-PyYAML-5.4.1-1.2\r\n[205/402] python38-appdirs-1.4.4-2.2\r\n[206/402] python38-asn1crypto-1.4.0-1.3\r\n[207/402] python38-attrs-20.3.0-1.2\r\n[208/402] python38-cachetools-4.2.1-1.1\r\n[209/402] python38-casttube-0.2.0-1.8\r\n[210/402] python38-distlib-0.3.1-2.1\r\n[211/402] python38-docopt-0.6.2-7.9\r\n[212/402] python38-filelock-3.0.12-2.5\r\n[213/402] python38-geojson-2.4.1-1.8\r\n[214/402] python38-humanhash3-0.0.6-2.9\r\n[215/402] python38-idna-3.1-1.1\r\n[216/402] python38-ifaddr-0.1.7-1.3\r\n[217/402] python38-importlib-resources-3.3.0-1.2\r\n[218/402] python38-inflection-0.5.1-1.2\r\n[219/402] python38-iniconfig-1.1.1-1.2\r\n[220/402] python38-jaraco.base-8.1.0-1.5\r\n[221/402] python38-lazy-1.4-1.8\r\n[222/402] python38-monotonic-1.5-1.8\r\n[223/402] python38-more-itertools-8.6.0-1.2\r\n[224/402] python38-multi_key_dict-2.0.3-4.4\r\n[225/402] python38-olefile-0.46-2.5\r\n[226/402] python38-ordered-set-3.1.1-5.2\r\n[227/402] python38-padaos-0.1.10-1.10\r\n[228/402] python38-parsedatetime-2.6-1.2\r\n[229/402] python38-py-1.9.0-1.5\r\n[230/402] python38-pyasn1-0.4.8-1.7\r\n[231/402] python38-pycparser-2.20-1.7\r\n[232/402] python38-pyee-8.1.0-1.1\r\n[233/402] python38-pyparsing-2.4.7-2.4\r\n[234/402] python38-sgmllib3k-1.0.0-2.1\r\n[235/402] python38-smmap-3.0.5-1.1\r\n[236/402] python38-soupsieve-2.1-1.1\r\n[237/402] python38-toml-0.10.2-2.1\r\n[238/402] python38-wcwidth-0.2.5-2.2\r\n[239/402] python38-xmltodict-0.12.0-3.3\r\n[247/402] python38-netifaces-0.10.9-1.7\r\n[248/402] python38-pycryptodome-3.9.9-1.2\r\n[249/402] python38-python-vlc-3.0.11115-1.3\r\n[250/402] python38-pytz-2021.1-1.1\r\n[251/402] python38-simplejson-3.17.2-1.4\r\n[252/402] python38-six-1.15.0-2.2\r\n[253/402] python38-wrapt-1.12.1-2.2\r\n[260/402] python38-PyAudio-0.2.11-2.6\r\n[261/402] python38-chardet-4.0.0-1.2\r\n[262/402] python38-pyalsaaudio-0.8.4-1.11\r\n[263/402] python38-pycodestyle-2.6.0-1.6\r\n[264/402] python38-pyjokes-0.6.0-2.4\r\n[265/402] python38-pyserial-3.5-1.2\r\n[266/402] python38-xxhash-2.0.0-1.2\r\n[271/402] python38-fann2-1.1.2-2.3\r\n[274/402] python38-3.8.7-2.1\r\n[282/402] python38-Deprecated-1.2.10-1.3\r\n[283/402] python38-beautifulsoup4-4.9.3-1.3\r\n[284/402] python38-feedparser-6.0.2-1.2\r\n[285/402] python38-gitdb-4.0.5-1.3\r\n[286/402] python38-inflect-5.0.2-1.1\r\n[287/402] python38-precise-runner-0.3.1-1.6\r\n[288/402] python38-protobuf-3.14.0-1.3\r\n[289/402] python38-pyasn1-modules-0.2.8-1.5\r\n[290/402] python38-python-dateutil-2.8.1-1.5\r\n[291/402] python38-python-xlib-0.29-1.2\r\n[292/402] python38-tzlocal-2.1-1.3\r\n[293/402] python38-uritemplate-3.0.1-1.5\r\n[294/402] python38-zeroconf-0.28.8-1.2\r\n[295/402] python38-zipp-3.4.0-1.2\r\n[299/402] python38-adapt-parser-0.3.4-1.6\r\n[300/402] python38-fasteners-0.14.1-5.4\r\n[301/402] python38-packaging-20.8-1.1\r\n[302/402] python38-pyxdg-0.27-1.2\r\n[305/402] python38-cffi-1.14.5-1.1\r\n[306/402] python38-num2words-0.5.10-2.4\r\n[307/402] python38-pako-0.2.3-1.8\r\n[308/402] python38-psutil-5.8.0-1.1\r\n[309/402] python38-tornado6-6.1-2.1\r\n[310/402] python38-websocket-client-0.57.0-1.6\r\n[312/402] python38-rsa-4.7-1.1\r\n[313/402] python38-numpy-1.20.1-1.1\r\n[314/402] python38-grpcio-1.34.1-1.2\r\n[319/402] python38-Pillow-8.1.0-1.2\r\n[320/402] python38-tornado-6.1-15.1\r\n[321/402] python38-PyScreeze-0.1.26-1.5\r\n[322/402] python38-arrow-0.17.0-1.2\r\n[323/402] python38-googleapis-common-protos-1.52.0-1.2\r\n[324/402] python38-importlib-metadata-3.4.0-1.1\r\n[325/402] python38-lingua-franca-0.3.1-2.1\r\n[327/402] python38-PyChromecast-7.7.2-1.1\r\n[328/402] python38-jaraco.itertools-5.0.0-1.3\r\n[333/402] python38-setuptools-44.1.1-4.2\r\n[341/402] python38-click-7.1.2-2.2\r\n[342/402] python38-pluggy-0.13.1-1.5\r\n[344/402] python3-sphinxbase5-5~git20200206.4ffc4b7-1.6\r\n[345/402] python38-pbr-5.5.1-1.2\r\n[346/402] python38-petact-0.1.2-3.4\r\n[347/402] python38-python-aiml-0.9.3-2.4\r\n[348/402] python38-wolframalpha-3.0.1-1.9\r\n[349/402] python38-PyAutoGUI-0.9.36-3.7\r\n[350/402] python38-google-auth-1.24.0-1.2\r\n[351/402] python38-pip-20.2.4-1.3\r\n[352/402] python38-padatious-0.4.7-2.6\r\n[353/402] python38-cryptography-3.3.2-1.1\r\n[354/402] python38-virtualenv-20.2.2-1.2\r\n[360/402] python38-certifi-2020.12.5-1.3\r\n[361/402] python3-stevedore-3.2.2-1.3\r\n[362/402] python38-PyJWT-2.0.1-1.1\r\n[363/402] python38-pyOpenSSL-20.0.1-1.1\r\n[364/402] python38-virtualenv-clone-0.5.4-1.6\r\n[366/402] python3-pocketsphinx5-5~git20200227.e40da77-1.6\r\n[369/402] python38-pytest-6.2.2-1.1\r\n[373/402] python38-httplib2-0.18.1-1.2\r\n[374/402] python3-virtualenvwrapper-4.8.4-4.1\r\n[377/402] python38-urllib3-1.26.3-2.1\r\n[381/402] python38-GitPython-3.1.12.1610074031.f653af66-1.2\r\n[382/402] python38-google-auth-httplib2-0.0.3-1.7\r\n[383/402] python38-gobject-3.38.0-3.2\r\n[384/402] python38-requests-2.25.1-3.1\r\n[385/402] python38-oauth2client-4.1.3-3.4\r\n[387/402] python38-gTTS-token-1.1.3-1.9\r\n[388/402] python38-requests-futures-1.0.0-2.5\r\n[389/402] python38-astral-2.2-3.1\r\n[390/402] python38-pyowm-2.10.0-1.8\r\n[391/402] python38-wikipedia-1.4.0-4.3\r\n[392/402] python38-PyGithub-1.53-1.3\r\n[393/402] python38-ddg3-0.6.6git~20170824T092521~0ef6b2f-2.4\r\n[394/402] python38-SpeechRecognition-3.8.1-3.5\r\n[395/402] python38-dbus-python-1.2.16-1.2\r\n[396/402] python38-google-api-core-1.24.1-1.2\r\n[397/402] python38-msm-0.8.5-2.4\r\n[399/402] python38-pulsectl-20.2.4-1.4\r\n[400/402] python38-msk-0.3.14-2.4\r\n[401/402] python38-google-api-python-client-1.11.0-1.3\r\n[402/402] python38-gTTS-2.2.2-1.1\r\n\r\n```", "reactions": {"url": "https://api.github.com/repos/MycroftAI/mycroft-core/issues/2845/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/MycroftAI/mycroft-core/issues/2845/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/MycroftAI/mycroft-core/issues/2842", "repository_url": "https://api.github.com/repos/MycroftAI/mycroft-core", "labels_url": "https://api.github.com/repos/MycroftAI/mycroft-core/issues/2842/labels{/name}", "comments_url": "https://api.github.com/repos/MycroftAI/mycroft-core/issues/2842/comments", "events_url": "https://api.github.com/repos/MycroftAI/mycroft-core/issues/2842/events", "html_url": "https://github.com/MycroftAI/mycroft-core/issues/2842", "id": 810709460, "node_id": "MDU6SXNzdWU4MTA3MDk0NjA=", "number": 2842, "title": "Mycroft-Core 20.8.1 breaks Pandora skill", "user": {"login": "thejacer", "id": 65841374, "node_id": "MDQ6VXNlcjY1ODQxMzc0", "avatar_url": "https://avatars.githubusercontent.com/u/65841374?v=4", "gravatar_id": "", "url": "https://api.github.com/users/thejacer", "html_url": "https://github.com/thejacer", "followers_url": "https://api.github.com/users/thejacer/followers", "following_url": "https://api.github.com/users/thejacer/following{/other_user}", "gists_url": "https://api.github.com/users/thejacer/gists{/gist_id}", "starred_url": "https://api.github.com/users/thejacer/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/thejacer/subscriptions", "organizations_url": "https://api.github.com/users/thejacer/orgs", "repos_url": "https://api.github.com/users/thejacer/repos", "events_url": "https://api.github.com/users/thejacer/events{/privacy}", "received_events_url": "https://api.github.com/users/thejacer/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 4031305761, "node_id": "MDU6TGFiZWw0MDMxMzA1NzYx", "url": "https://api.github.com/repos/MycroftAI/mycroft-core/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2021-02-18T02:57:16Z", "updated_at": "2021-03-12T05:39:33Z", "closed_at": "2021-03-12T05:39:33Z", "author_association": "NONE", "active_lock_reason": null, "body": "**Describe the bug**\r\nUpon updating to Mycroft-Core 20.8.1 the Pandora skill stops working and continually asserts the skill isn't set up at mycroft.ai. My Pandora skill had been set up for weeks but this update broke it.\r\n\r\n**To Reproduce**\r\nSteps to reproduce the behavior:\r\nInstall 20.8.1\r\nTry Pandora skill\r\nRoll back to 20.8.0\r\nTry Pandora skill\r\n\r\n**Expected behavior**\r\nPandora skill will fail as if your login credentials aren't in the settings while using 20.8.1 but will succeed without error on 20.8.0\r\n\r\n**Log files**\r\n\r\n\r\nYou may also include screenshots, however screenshots of log files are often difficult to read and parse. \r\n\r\nIf you are running Mycroft, the [Support Skill](https://github.com/MycroftAI/skill-support) helps to automate gathering this information. Simply say \"Create a support ticket\" and the Skill will put together a support package and email it to you.\r\n\r\n**Environment (please complete the following information):**\r\n - Device type: Raspberry Pi 4 B\r\n - OS: Raspberry Pi OS\r\n - Mycroft-core version: 20.8.1\r\n - Other versions: 20.8.0\r\n\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/MycroftAI/mycroft-core/issues/2842/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/MycroftAI/mycroft-core/issues/2842/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/MycroftAI/mycroft-core/issues/2826", "repository_url": "https://api.github.com/repos/MycroftAI/mycroft-core", "labels_url": "https://api.github.com/repos/MycroftAI/mycroft-core/issues/2826/labels{/name}", "comments_url": "https://api.github.com/repos/MycroftAI/mycroft-core/issues/2826/comments", "events_url": "https://api.github.com/repos/MycroftAI/mycroft-core/issues/2826/events", "html_url": "https://github.com/MycroftAI/mycroft-core/issues/2826", "id": 802593158, "node_id": "MDU6SXNzdWU4MDI1OTMxNTg=", "number": 2826, "title": "stop input returns multiple errors", "user": {"login": "goldyfruit", "id": 614115, "node_id": "MDQ6VXNlcjYxNDExNQ==", "avatar_url": "https://avatars.githubusercontent.com/u/614115?v=4", "gravatar_id": "", "url": "https://api.github.com/users/goldyfruit", "html_url": "https://github.com/goldyfruit", "followers_url": "https://api.github.com/users/goldyfruit/followers", "following_url": "https://api.github.com/users/goldyfruit/following{/other_user}", "gists_url": "https://api.github.com/users/goldyfruit/gists{/gist_id}", "starred_url": "https://api.github.com/users/goldyfruit/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/goldyfruit/subscriptions", "organizations_url": "https://api.github.com/users/goldyfruit/orgs", "repos_url": "https://api.github.com/users/goldyfruit/repos", "events_url": "https://api.github.com/users/goldyfruit/events{/privacy}", "received_events_url": "https://api.github.com/users/goldyfruit/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 4031305761, "node_id": "MDU6TGFiZWw0MDMxMzA1NzYx", "url": "https://api.github.com/repos/MycroftAI/mycroft-core/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2021-02-06T03:00:49Z", "updated_at": "2021-02-06T03:23:28Z", "closed_at": "2021-02-06T03:23:28Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "When using the `stop` command from the CLI it returns an error on 4 different skills.\r\n\r\nI'm using the `dev` version with the latest commit.\r\n\r\n![image](https://user-images.githubusercontent.com/614115/107107131-3cd65b80-67fd-11eb-9c55-12a9893d4c9b.png)\r\n\r\nErrors from the `skills.log`:\r\n```\r\n2021-02-06 02:57:32.214 - OVOS - ovos_utils.waiting_for_mycroft.base_skill:on_error:155 - ERROR - An error occurred while processing a request in Playback Control Skill\r\nTraceback (most recent call last):\r\n  File \"/home/mycroft/core/mycroft/skills/mycroft_skill/event_container.py\", line 66, in wrapper\r\n    handler(message)\r\n  File \"/opt/mycroft-venv/lib/python3.7/site-packages/ovos_utils/waiting_for_mycroft/base_skill.py\", line 184, in __handle_stop\r\n    super().__handle_stop()\r\nTypeError: __handle_stop() missing 1 required positional argument: '_'\r\n2021-02-06 02:57:32.247 - OVOS - ovos_utils.waiting_for_mycroft.base_skill:on_error:155 - ERROR - An error occurred while processing a request in Joking Skill\r\nTraceback (most recent call last):\r\n  File \"/home/mycroft/core/mycroft/skills/mycroft_skill/event_container.py\", line 66, in wrapper\r\n    handler(message)\r\n  File \"/opt/mycroft-venv/lib/python3.7/site-packages/ovos_utils/waiting_for_mycroft/base_skill.py\", line 184, in __handle_stop\r\n    super().__handle_stop()\r\nTypeError: __handle_stop() missing 1 required positional argument: '_'\r\n2021-02-06 02:57:32.252 - OVOS - ovos_utils.waiting_for_mycroft.base_skill:on_error:155 - ERROR - An error occurred while processing a request in Timer Skill\r\nTraceback (most recent call last):\r\n  File \"/home/mycroft/core/mycroft/skills/mycroft_skill/event_container.py\", line 66, in wrapper\r\n    handler(message)\r\n  File \"/opt/mycroft-venv/lib/python3.7/site-packages/ovos_utils/waiting_for_mycroft/base_skill.py\", line 184, in __handle_stop\r\n    super().__handle_stop()\r\nTypeError: __handle_stop() missing 1 required positional argument: '_'\r\n2021-02-06 02:57:32.254 - OVOS - ovos_utils.waiting_for_mycroft.base_skill:on_error:155 - ERROR - An error occurred while processing a request in News Skill\r\nTraceback (most recent call last):\r\n  File \"/home/mycroft/core/mycroft/skills/mycroft_skill/event_container.py\", line 66, in wrapper\r\n    handler(message)\r\n  File \"/opt/mycroft-venv/lib/python3.7/site-packages/ovos_utils/waiting_for_mycroft/base_skill.py\", line 184, in __handle_stop\r\n    super().__handle_stop()\r\nTypeError: __handle_stop() missing 1 required positional argument: '_'\r\n```", "reactions": {"url": "https://api.github.com/repos/MycroftAI/mycroft-core/issues/2826/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/MycroftAI/mycroft-core/issues/2826/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/MycroftAI/mycroft-core/issues/2825", "repository_url": "https://api.github.com/repos/MycroftAI/mycroft-core", "labels_url": "https://api.github.com/repos/MycroftAI/mycroft-core/issues/2825/labels{/name}", "comments_url": "https://api.github.com/repos/MycroftAI/mycroft-core/issues/2825/comments", "events_url": "https://api.github.com/repos/MycroftAI/mycroft-core/issues/2825/events", "html_url": "https://github.com/MycroftAI/mycroft-core/issues/2825", "id": 802591291, "node_id": "MDU6SXNzdWU4MDI1OTEyOTE=", "number": 2825, "title": "gTTS needs to be upgraded to 2.2.2 on dev branch", "user": {"login": "goldyfruit", "id": 614115, "node_id": "MDQ6VXNlcjYxNDExNQ==", "avatar_url": "https://avatars.githubusercontent.com/u/614115?v=4", "gravatar_id": "", "url": "https://api.github.com/users/goldyfruit", "html_url": "https://github.com/goldyfruit", "followers_url": "https://api.github.com/users/goldyfruit/followers", "following_url": "https://api.github.com/users/goldyfruit/following{/other_user}", "gists_url": "https://api.github.com/users/goldyfruit/gists{/gist_id}", "starred_url": "https://api.github.com/users/goldyfruit/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/goldyfruit/subscriptions", "organizations_url": "https://api.github.com/users/goldyfruit/orgs", "repos_url": "https://api.github.com/users/goldyfruit/repos", "events_url": "https://api.github.com/users/goldyfruit/events{/privacy}", "received_events_url": "https://api.github.com/users/goldyfruit/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 4031305761, "node_id": "MDU6TGFiZWw0MDMxMzA1NzYx", "url": "https://api.github.com/repos/MycroftAI/mycroft-core/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2021-02-06T02:48:51Z", "updated_at": "2021-02-10T01:46:44Z", "closed_at": "2021-02-10T01:46:44Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "**Describe the bug**\r\nWhen using Google TTS, the audio service returns an error and never returns audio.\r\n```\r\n2021-02-06 02:39:24.895 | ERROR    |     1 | mycroft.audio.speech:mute_and_speak:134 | TTS execution failed (gTTSError('200 (OK) from TTS API. Probable cause: Unknown'))\r\n```\r\n\r\nI had to upgrade `gTTS` from `2.2.0` to `2.2.2` to fix the issue.\r\n\r\n```\r\npip install gTTS -U\r\nCollecting gTTS\r\n  Downloading https://files.pythonhosted.org/packages/5f/b9/94e59337107be134b21ce395a29fc0715b707b560108d6797de2d93e1178/gTTS-2.2.2-py3-none-any.whl\r\nRequirement already satisfied, skipping upgrade: click in /opt/mycroft-venv/lib/python3.7/site-packages (from gTTS) (7.1.2)\r\nRequirement already satisfied, skipping upgrade: six in /opt/mycroft-venv/lib/python3.7/site-packages (from gTTS) (1.15.0)\r\nRequirement already satisfied, skipping upgrade: requests in /opt/mycroft-venv/lib/python3.7/site-packages (from gTTS) (2.20.0)\r\nRequirement already satisfied, skipping upgrade: urllib3<1.25,>=1.21.1 in /opt/mycroft-venv/lib/python3.7/site-packages (from requests->gTTS) (1.24.3)\r\nRequirement already satisfied, skipping upgrade: chardet<3.1.0,>=3.0.2 in /opt/mycroft-venv/lib/python3.7/site-packages (from requests->gTTS) (3.0.4)\r\nRequirement already satisfied, skipping upgrade: certifi>=2017.4.17 in /opt/mycroft-venv/lib/python3.7/site-packages (from requests->gTTS) (2020.12.5)\r\nRequirement already satisfied, skipping upgrade: idna<2.8,>=2.5 in /opt/mycroft-venv/lib/python3.7/site-packages (from requests->gTTS) (2.7)\r\nInstalling collected packages: gTTS\r\n  Found existing installation: gTTS 2.2.0\r\n    Uninstalling gTTS-2.2.0:\r\n      Successfully uninstalled gTTS-2.2.0\r\nSuccessfully installed gTTS-2.2.2\r\n```\r\n\r\n**Environment:**\r\n - Device type: Raspberry Pi 4\r\n - OS: Raspberry OS 64-bit\r\n - Mycroft-core version: dev\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/MycroftAI/mycroft-core/issues/2825/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/MycroftAI/mycroft-core/issues/2825/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/MycroftAI/mycroft-core/issues/2789", "repository_url": "https://api.github.com/repos/MycroftAI/mycroft-core", "labels_url": "https://api.github.com/repos/MycroftAI/mycroft-core/issues/2789/labels{/name}", "comments_url": "https://api.github.com/repos/MycroftAI/mycroft-core/issues/2789/comments", "events_url": "https://api.github.com/repos/MycroftAI/mycroft-core/issues/2789/events", "html_url": "https://github.com/MycroftAI/mycroft-core/issues/2789", "id": 776974132, "node_id": "MDU6SXNzdWU3NzY5NzQxMzI=", "number": 2789, "title": "Space in Folder name: warning when starting mycroft-core", "user": {"login": "Jomosoto", "id": 40580158, "node_id": "MDQ6VXNlcjQwNTgwMTU4", "avatar_url": "https://avatars.githubusercontent.com/u/40580158?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Jomosoto", "html_url": "https://github.com/Jomosoto", "followers_url": "https://api.github.com/users/Jomosoto/followers", "following_url": "https://api.github.com/users/Jomosoto/following{/other_user}", "gists_url": "https://api.github.com/users/Jomosoto/gists{/gist_id}", "starred_url": "https://api.github.com/users/Jomosoto/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Jomosoto/subscriptions", "organizations_url": "https://api.github.com/users/Jomosoto/orgs", "repos_url": "https://api.github.com/users/Jomosoto/repos", "events_url": "https://api.github.com/users/Jomosoto/events{/privacy}", "received_events_url": "https://api.github.com/users/Jomosoto/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 4031305761, "node_id": "MDU6TGFiZWw0MDMxMzA1NzYx", "url": "https://api.github.com/repos/MycroftAI/mycroft-core/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2020-12-31T13:19:44Z", "updated_at": "2022-06-13T06:29:58Z", "closed_at": "2022-06-13T06:29:58Z", "author_association": "NONE", "active_lock_reason": null, "body": "**Describe the bug**\r\nWhen I start mycroft-core with \"bash start-mycroft.sh\", I get a warning that the folder \"home/pi/Programm\" doesn't exists and mycroft isn't startet. The folder is actually named: \"Programm Daten\". It seems like spaces in folder names cause problems.\r\n\r\n![grafik](https://user-images.githubusercontent.com/40580158/103411831-5b986100-4b72-11eb-8a7a-90a43f7ecab1.png)\r\n\r\n**To Reproduce**\r\nSteps to reproduce the behavior:\r\n1. Install mycroft core in a path, that contains a folder with a space in the name\r\n2. Make the setup with \"bash dev_setup.sh\"\r\n3. Start mycroft-core with \"bash start-mycroft.sh\"\r\n4. Get the Warning. (See screenshot)\r\n\r\n**Expected behavior**\r\nMycroft should start without this warning.\r\n\r\n**Environment (please complete the following information):**\r\n - Device type: Raspberry Pi 3 B+\r\n - OS: Raspberry Pi OS (02.12.2020)\r\n - Mycroft-core version: 20.8.0", "reactions": {"url": "https://api.github.com/repos/MycroftAI/mycroft-core/issues/2789/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/MycroftAI/mycroft-core/issues/2789/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/MycroftAI/mycroft-core/issues/2779", "repository_url": "https://api.github.com/repos/MycroftAI/mycroft-core", "labels_url": "https://api.github.com/repos/MycroftAI/mycroft-core/issues/2779/labels{/name}", "comments_url": "https://api.github.com/repos/MycroftAI/mycroft-core/issues/2779/comments", "events_url": "https://api.github.com/repos/MycroftAI/mycroft-core/issues/2779/events", "html_url": "https://github.com/MycroftAI/mycroft-core/issues/2779", "id": 767357994, "node_id": "MDU6SXNzdWU3NjczNTc5OTQ=", "number": 2779, "title": "Exception in AudioProducer blocks speech module", "user": {"login": "dalgwen", "id": 1935721, "node_id": "MDQ6VXNlcjE5MzU3MjE=", "avatar_url": "https://avatars.githubusercontent.com/u/1935721?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dalgwen", "html_url": "https://github.com/dalgwen", "followers_url": "https://api.github.com/users/dalgwen/followers", "following_url": "https://api.github.com/users/dalgwen/following{/other_user}", "gists_url": "https://api.github.com/users/dalgwen/gists{/gist_id}", "starred_url": "https://api.github.com/users/dalgwen/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dalgwen/subscriptions", "organizations_url": "https://api.github.com/users/dalgwen/orgs", "repos_url": "https://api.github.com/users/dalgwen/repos", "events_url": "https://api.github.com/users/dalgwen/events{/privacy}", "received_events_url": "https://api.github.com/users/dalgwen/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 4031305761, "node_id": "MDU6TGFiZWw0MDMxMzA1NzYx", "url": "https://api.github.com/repos/MycroftAI/mycroft-core/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2020-12-15T09:12:17Z", "updated_at": "2020-12-30T12:36:29Z", "closed_at": "2020-12-30T12:36:21Z", "author_association": "NONE", "active_lock_reason": null, "body": "**Describe the bug**\r\nAn exception in AudioProducer could happen, by a flaw in the code, in some rare occurence.\r\nThe speech module then hangs (no more voice recognition, as the mic managment is broken)\r\n\r\n**To Reproduce**\r\nDon't know exactly.\r\nI was playing with some dev around custom TTS\r\nBut it's not very important, as the fix seems to be straightforward\r\n\r\n**Expected behavior**\r\nThis exception should not happen.\r\nI think the variable  'audio_data' should be declared outside the loop.\r\n\r\n\r\n**Log files**\r\n`2020-12-12 17:46:26.995 | ERROR    |  2194 | mycroft.client.speech.listener:run:108 | Exception in AudioProducer\r\nTraceback (most recent call last):\r\n  File \"/home/pi/mycroft-core/mycroft/client/speech/listener.py\", line 84, in run\r\n    self.stream_handler)\r\n  File \"/home/pi/mycroft-core/mycroft/client/speech/mic.py\", line 711, in listen\r\n    ww_data = self._wait_until_wake_word(source, sec_per_buffer)\r\n  File \"/home/pi/mycroft-core/mycroft/client/speech/mic.py\", line 658, in _wait_until_wake_word\r\n    return WakeWordData(audio_data, said_wake_word,\r\nUnboundLocalError: local variable 'audio_data' referenced before assignment`\r\n\r\n**Environment (please complete the following information):**\r\n - Device type: Raspberry Pi\r\n - OS: raspbian\r\n - Mycroft-core version: 20.08\r\n\r\n**Additional context**\r\nI will provide a quick PR.\r\n", "reactions": {"url": "https://api.github.com/repos/MycroftAI/mycroft-core/issues/2779/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/MycroftAI/mycroft-core/issues/2779/timeline", "performed_via_github_app": null, "state_reason": "completed"}]