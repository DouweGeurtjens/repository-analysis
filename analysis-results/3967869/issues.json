[{"url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/1170", "repository_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit", "labels_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/1170/labels{/name}", "comments_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/1170/comments", "events_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/1170/events", "html_url": "https://github.com/prompt-toolkit/python-prompt-toolkit/pull/1170", "id": 642442893, "node_id": "MDExOlB1bGxSZXF1ZXN0NDM3NDU4NjI4", "number": 1170, "title": "ThreadedHistory: invoke history load callback on event loop", "user": {"login": "bobhy", "id": 1971300, "node_id": "MDQ6VXNlcjE5NzEzMDA=", "avatar_url": "https://avatars.githubusercontent.com/u/1971300?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bobhy", "html_url": "https://github.com/bobhy", "followers_url": "https://api.github.com/users/bobhy/followers", "following_url": "https://api.github.com/users/bobhy/following{/other_user}", "gists_url": "https://api.github.com/users/bobhy/gists{/gist_id}", "starred_url": "https://api.github.com/users/bobhy/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bobhy/subscriptions", "organizations_url": "https://api.github.com/users/bobhy/orgs", "repos_url": "https://api.github.com/users/bobhy/repos", "events_url": "https://api.github.com/users/bobhy/events{/privacy}", "received_events_url": "https://api.github.com/users/bobhy/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 76984990, "node_id": "MDU6TGFiZWw3Njk4NDk5MA==", "url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 14, "created_at": "2020-06-20T20:45:17Z", "updated_at": "2021-01-24T10:03:21Z", "closed_at": "2021-01-24T10:03:20Z", "author_association": "NONE", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/pulls/1170", "html_url": "https://github.com/prompt-toolkit/python-prompt-toolkit/pull/1170", "diff_url": "https://github.com/prompt-toolkit/python-prompt-toolkit/pull/1170.diff", "patch_url": "https://github.com/prompt-toolkit/python-prompt-toolkit/pull/1170.patch", "merged_at": null}, "body": "Successor to #1159, but with a nice, compact commit history.  Here is the original description:\r\n\r\nFixes issue #1158, and seems to work in Xonsh as well.\r\n\r\nDepends on ThreadedHistory and Application being able to rendezvous on same event loop. While this may not be possible for history in general, I think it is an acceptable restriction on ThreadedHistory.", "reactions": {"url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/1170/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/1170/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/1099", "repository_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit", "labels_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/1099/labels{/name}", "comments_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/1099/comments", "events_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/1099/events", "html_url": "https://github.com/prompt-toolkit/python-prompt-toolkit/issues/1099", "id": 581186721, "node_id": "MDU6SXNzdWU1ODExODY3MjE=", "number": 1099, "title": "MouseEventType.MOUSE_DOWN ValueError on Windows 10 / Python 3.8", "user": {"login": "dskrypa", "id": 7505342, "node_id": "MDQ6VXNlcjc1MDUzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/7505342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dskrypa", "html_url": "https://github.com/dskrypa", "followers_url": "https://api.github.com/users/dskrypa/followers", "following_url": "https://api.github.com/users/dskrypa/following{/other_user}", "gists_url": "https://api.github.com/users/dskrypa/gists{/gist_id}", "starred_url": "https://api.github.com/users/dskrypa/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dskrypa/subscriptions", "organizations_url": "https://api.github.com/users/dskrypa/orgs", "repos_url": "https://api.github.com/users/dskrypa/repos", "events_url": "https://api.github.com/users/dskrypa/events{/privacy}", "received_events_url": "https://api.github.com/users/dskrypa/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 76984990, "node_id": "MDU6TGFiZWw3Njk4NDk5MA==", "url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2020-03-14T12:24:13Z", "updated_at": "2020-03-26T20:49:57Z", "closed_at": "2020-03-26T20:49:57Z", "author_association": "NONE", "active_lock_reason": null, "body": "Using prompt-toolkit 3.0.4 on Windows 10 in Git BASH in ConEmu with Python 3.8.0 and 3.8.2 results in the following exception when the left mouse button is clicked:\r\n\r\n```\r\n>>> from prompt_toolkit import prompt\r\n>>> answer = prompt('Give me some input: ')\r\n\r\nUnhandled exception in event loop:\r\n  File \"C:\\Program Files\\Python38\\lib\\asyncio\\events.py\", line 81, in _run\r\n    self._context.run(self._callback, *self._args)\r\n  File \"C:\\var\\tmp\\test\\venv\\lib\\site-packages\\prompt_toolkit\\input\\win32.py\", line 512, in ready\r\n    callback()\r\n  File \"C:\\var\\tmp\\test\\venv\\lib\\site-packages\\prompt_toolkit\\application\\application.py\", line 653, in read_from_input\r\n    self.key_processor.process_keys()\r\n  File \"C:\\var\\tmp\\test\\venv\\lib\\site-packages\\prompt_toolkit\\key_binding\\key_processor.py\", line 274, in process_keys\r\n    self._process_coroutine.send(key_press)\r\n  File \"C:\\var\\tmp\\test\\venv\\lib\\site-packages\\prompt_toolkit\\key_binding\\key_processor.py\", line 186, in _process\r\n    self._call_handler(matches[-1], key_sequence=buffer[:])\r\n  File \"C:\\var\\tmp\\test\\venv\\lib\\site-packages\\prompt_toolkit\\key_binding\\key_processor.py\", line 329, in _call_handler\r\n    handler.call(event)\r\n  File \"C:\\var\\tmp\\test\\venv\\lib\\site-packages\\prompt_toolkit\\key_binding\\key_bindings.py\", line 101, in call\r\n    self.handler(event)\r\n  File \"C:\\var\\tmp\\test\\venv\\lib\\site-packages\\prompt_toolkit\\key_binding\\bindings\\mouse.py\", line 126, in _mouse\r\n    event_type = MouseEventType(pieces[0])\r\n  File \"C:\\Program Files\\Python38\\lib\\enum.py\", line 304, in __call__\r\n    return cls.__new__(cls, value)\r\n  File \"C:\\Program Files\\Python38\\lib\\enum.py\", line 595, in __new__\r\n    raise exc\r\n  File \"C:\\Program Files\\Python38\\lib\\enum.py\", line 579, in __new__\r\n    result = cls._missing_(value)\r\n  File \"C:\\Program Files\\Python38\\lib\\enum.py\", line 608, in _missing_\r\n    raise ValueError(\"%r is not a valid %s\" % (value, cls.__name__))\r\n\r\nException 'MouseEventType.MOUSE_DOWN' is not a valid MouseEventType\r\nPress ENTER to continue...\r\n```\r\n\r\nIt happens both in the vanilla Python interactive terminal, and in ipython.\r\n\r\nThe problem seems to be that the event type is being passed as `MouseEventType.MOUSE_DOWN` instead of `MOUSE_DOWN`.  Changing the following line works to fix the issue, but I'm not familiar enough with this project to know if this is where/how the official fix should be applied:\r\n```\r\nevent_type = MouseEventType(pieces[0].rsplit('.', 1)[-1])\r\n```\r\n", "reactions": {"url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/1099/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/1099/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/1086", "repository_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit", "labels_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/1086/labels{/name}", "comments_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/1086/comments", "events_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/1086/events", "html_url": "https://github.com/prompt-toolkit/python-prompt-toolkit/issues/1086", "id": 573453006, "node_id": "MDU6SXNzdWU1NzM0NTMwMDY=", "number": 1086, "title": "Prompt generates whitespace to end of line that appears on clipboard", "user": {"login": "jaraco", "id": 308610, "node_id": "MDQ6VXNlcjMwODYxMA==", "avatar_url": "https://avatars.githubusercontent.com/u/308610?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jaraco", "html_url": "https://github.com/jaraco", "followers_url": "https://api.github.com/users/jaraco/followers", "following_url": "https://api.github.com/users/jaraco/following{/other_user}", "gists_url": "https://api.github.com/users/jaraco/gists{/gist_id}", "starred_url": "https://api.github.com/users/jaraco/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jaraco/subscriptions", "organizations_url": "https://api.github.com/users/jaraco/orgs", "repos_url": "https://api.github.com/users/jaraco/repos", "events_url": "https://api.github.com/users/jaraco/events{/privacy}", "received_events_url": "https://api.github.com/users/jaraco/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 76984990, "node_id": "MDU6TGFiZWw3Njk4NDk5MA==", "url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2020-03-01T01:35:16Z", "updated_at": "2020-04-25T20:09:12Z", "closed_at": "2020-04-25T20:09:12Z", "author_association": "NONE", "active_lock_reason": null, "body": "In xonsh/xonsh#3167, I reported an issue that appears to have emerged with prompt_toolkit 2.x. When completing a prompt, a bunch of spaces are left in place of the newline, causing them to be rendered if the command is copied to a clipboard.\r\n\r\nFor example, see this copy of a session:\r\n\r\n```\r\n$ python\r\n>>> import prompt_toolkit as pt\r\n>>> ps = pt.PromptSession()\r\n>>> ps.prompt()\r\nfoo                                                                                                  \r\n'foo'\r\n```\r\n\r\nIt looks normal until you select the text inside and see there are 98 or so spaces after `foo`. This issue causes wrapping issues and other noise when working in xonsh. Is there a way to avoid this undesirable behavior?", "reactions": {"url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/1086/reactions", "total_count": 1, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/1086/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/1023", "repository_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit", "labels_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/1023/labels{/name}", "comments_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/1023/comments", "events_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/1023/events", "html_url": "https://github.com/prompt-toolkit/python-prompt-toolkit/issues/1023", "id": 534396318, "node_id": "MDU6SXNzdWU1MzQzOTYzMTg=", "number": 1023, "title": "ConnectionResetError on Python 3.8 for windows", "user": {"login": "erezsh", "id": 731464, "node_id": "MDQ6VXNlcjczMTQ2NA==", "avatar_url": "https://avatars.githubusercontent.com/u/731464?v=4", "gravatar_id": "", "url": "https://api.github.com/users/erezsh", "html_url": "https://github.com/erezsh", "followers_url": "https://api.github.com/users/erezsh/followers", "following_url": "https://api.github.com/users/erezsh/following{/other_user}", "gists_url": "https://api.github.com/users/erezsh/gists{/gist_id}", "starred_url": "https://api.github.com/users/erezsh/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/erezsh/subscriptions", "organizations_url": "https://api.github.com/users/erezsh/orgs", "repos_url": "https://api.github.com/users/erezsh/repos", "events_url": "https://api.github.com/users/erezsh/events{/privacy}", "received_events_url": "https://api.github.com/users/erezsh/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 76984990, "node_id": "MDU6TGFiZWw3Njk4NDk5MA==", "url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 9, "created_at": "2019-12-07T12:32:06Z", "updated_at": "2021-02-09T16:39:40Z", "closed_at": "2021-02-09T16:39:39Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Using the simplest feature (`prompt`) fails with async exception.\r\n\r\nAfter running the prompt, I kept pressing `a`,`enter`.\r\n\r\nI'm using Windows 10, `prompt_toolkit.__version__ = '2.0.10'`\r\n\r\n```python\r\nPython 3.8.0 (tags/v3.8.0:fa919fd, Oct 14 2019, 19:21:23) [MSC v.1916 32 bit (Intel)] on win32\r\nType \"help\", \"copyright\", \"credits\" or \"license\" for more information.\r\n>>> from prompt_toolkit import prompt\r\n>>>\r\n>>> while 1:\r\n...     user_input = prompt('>')\r\n...     print(user_input)\r\n...\r\n>a\r\na\r\n>a\r\na\r\n>a\r\na\r\n\r\nUnhandled exception in event loop:\r\n  File \"C:\\Python38\\lib\\asyncio\\proactor_events.py\", line 768, in _loop_self_reading\r\n    f.result()  # may raise\r\n  File \"C:\\Python38\\lib\\asyncio\\windows_events.py\", line 808, in _poll\r\n    value = callback(transferred, key, ov)\r\n  File \"C:\\Python38\\lib\\asyncio\\windows_events.py\", line 457, in finish_recv\r\n    raise ConnectionResetError(*exc.args)\r\n\r\nException [WinError 995] The I/O operation has been aborted because of either a thread exit or an application request\r\nPress ENTER to continue...\r\n>a\r\na\r\n>a\r\na\r\n>a\r\na\r\n>a\r\na\r\n\r\nUnhandled exception in event loop:\r\n  File \"C:\\Python38\\lib\\asyncio\\proactor_events.py\", line 768, in _loop_self_reading\r\n    f.result()  # may raise\r\n  File \"C:\\Python38\\lib\\asyncio\\windows_events.py\", line 808, in _poll\r\n    value = callback(transferred, key, ov)\r\n  File \"C:\\Python38\\lib\\asyncio\\windows_events.py\", line 457, in finish_recv\r\n    raise ConnectionResetError(*exc.args)\r\n\r\nException [WinError 995] The I/O operation has been aborted because of either a thread exit or an application request\r\nPress ENTER to continue...\r\n>a\r\na\r\n>a\r\na\r\n>                                                                                                                       \r\n```", "reactions": {"url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/1023/reactions", "total_count": 4, "+1": 4, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/1023/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/1011", "repository_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit", "labels_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/1011/labels{/name}", "comments_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/1011/comments", "events_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/1011/events", "html_url": "https://github.com/prompt-toolkit/python-prompt-toolkit/issues/1011", "id": 529611211, "node_id": "MDU6SXNzdWU1Mjk2MTEyMTE=", "number": 1011, "title": "Some ANSI colors cause an error", "user": {"login": "dullbananas", "id": 47706471, "node_id": "MDQ6VXNlcjQ3NzA2NDcx", "avatar_url": "https://avatars.githubusercontent.com/u/47706471?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dullbananas", "html_url": "https://github.com/dullbananas", "followers_url": "https://api.github.com/users/dullbananas/followers", "following_url": "https://api.github.com/users/dullbananas/following{/other_user}", "gists_url": "https://api.github.com/users/dullbananas/gists{/gist_id}", "starred_url": "https://api.github.com/users/dullbananas/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dullbananas/subscriptions", "organizations_url": "https://api.github.com/users/dullbananas/orgs", "repos_url": "https://api.github.com/users/dullbananas/repos", "events_url": "https://api.github.com/users/dullbananas/events{/privacy}", "received_events_url": "https://api.github.com/users/dullbananas/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 76984990, "node_id": "MDU6TGFiZWw3Njk4NDk5MA==", "url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2019-11-27T23:09:20Z", "updated_at": "2022-06-28T05:19:50Z", "closed_at": "2022-06-28T05:19:50Z", "author_association": "NONE", "active_lock_reason": null, "body": "I am working on a [Python-based Unix shell](https://github.com/dullbananas/dish), and I am working on implementing usage of prompt_toolkit. When I try printing a dark green prompt, it works:\r\n\r\n```python3\r\nprompt(ANSI('\\033[32m$\\033[0;39;49m '))\r\n```\r\n\r\nBut the light green prompt does not work:\r\n\r\n```python3\r\nprompt(ANSI('\\033[38;2;144;238;144m$\\033[0;39;49m '))\r\n```\r\n\r\nIt causes this error to appear:\r\n\r\n```text.python.traceback\r\nTraceback (most recent call last):\r\n  File \"/home/dull/.local/bin/dish\", line 14, in <module>\r\n    dish.run()\r\n  File \"/home/dull/dish/dish/dish.py\", line 18, in run\r\n    cli.main.main(obj=self)\r\n  File \"/home/dull/.virtualenvs/dishdev/local/lib/python3.8/site-packages/Click-7.0-py3.8.egg/click/core.py\", line 717, in main\r\n    rv = self.invoke(ctx)\r\n  File \"/home/dull/.virtualenvs/dishdev/local/lib/python3.8/site-packages/Click-7.0-py3.8.egg/click/core.py\", line 956, in invoke\r\n    return ctx.invoke(self.callback, **ctx.params)\r\n  File \"/home/dull/.virtualenvs/dishdev/local/lib/python3.8/site-packages/Click-7.0-py3.8.egg/click/core.py\", line 555, in invoke\r\n    return callback(*args, **kwargs)\r\n  File \"/home/dull/.virtualenvs/dishdev/local/lib/python3.8/site-packages/Click-7.0-py3.8.egg/click/decorators.py\", line 17, in new_func\r\n    return f(get_current_context(), *args, **kwargs)\r\n  File \"/home/dull/dish/dish/cli.py\", line 25, in main\r\n    line = psession.prompt(prompt)\r\n  File \"/home/dull/.virtualenvs/dishdev/local/lib/python3.8/site-packages/prompt_toolkit/shortcuts/prompt.py\", line 925, in prompt\r\n    return self.app.run()\r\n  File \"/home/dull/.virtualenvs/dishdev/local/lib/python3.8/site-packages/prompt_toolkit/application/application.py\", line 781, in run\r\n    return run()\r\n  File \"/home/dull/.virtualenvs/dishdev/local/lib/python3.8/site-packages/prompt_toolkit/application/application.py\", line 754, in run\r\n    return get_event_loop().run_until_complete(coro)\r\n  File \"/usr/lib/python3.8/asyncio/base_events.py\", line 608, in run_until_complete\r\n    return future.result()\r\n  File \"/home/dull/.virtualenvs/dishdev/local/lib/python3.8/site-packages/prompt_toolkit/application/application.py\", line 739, in run_async\r\n    return await _run_async2()\r\n  File \"/home/dull/.virtualenvs/dishdev/local/lib/python3.8/site-packages/prompt_toolkit/application/application.py\", line 724, in _run_async2\r\n    result = await _run_async()\r\n  File \"/home/dull/.virtualenvs/dishdev/local/lib/python3.8/site-packages/prompt_toolkit/application/application.py\", line 666, in _run_async\r\n    self._redraw()\r\n  File \"/home/dull/.virtualenvs/dishdev/local/lib/python3.8/site-packages/prompt_toolkit/application/application.py\", line 502, in _redraw\r\n    self.context.run(run_in_context)\r\n  File \"/home/dull/.virtualenvs/dishdev/local/lib/python3.8/site-packages/prompt_toolkit/application/application.py\", line 488, in run_in_context\r\n    self.renderer.render(self, self.layout)\r\n  File \"/home/dull/.virtualenvs/dishdev/local/lib/python3.8/site-packages/prompt_toolkit/renderer.py\", line 602, in render\r\n    self._cursor_pos, self._last_style = _output_screen_diff(\r\n  File \"/home/dull/.virtualenvs/dishdev/local/lib/python3.8/site-packages/prompt_toolkit/renderer.py\", line 204, in _output_screen_diff\r\n    output_char(new_char)\r\n  File \"/home/dull/.virtualenvs/dishdev/local/lib/python3.8/site-packages/prompt_toolkit/renderer.py\", line 143, in output_char\r\n    new_attrs = attrs_for_style_string[char.style]\r\n  File \"/home/dull/.virtualenvs/dishdev/local/lib/python3.8/site-packages/prompt_toolkit/renderer.py\", line 267, in __missing__\r\n    attrs = self.get_attrs_for_style_str(style_str)\r\n  File \"/home/dull/.virtualenvs/dishdev/local/lib/python3.8/site-packages/prompt_toolkit/styles/style.py\", line 377, in get_attrs_for_style_str\r\n    return self._merged_style.get_attrs_for_style_str(style_str, default)\r\n  File \"/home/dull/.virtualenvs/dishdev/local/lib/python3.8/site-packages/prompt_toolkit/styles/style.py\", line 298, in get_attrs_for_style_str\r\n    inline_attrs = _parse_style_str(part)\r\n  File \"/home/dull/.virtualenvs/dishdev/local/lib/python3.8/site-packages/prompt_toolkit/styles/style.py\", line 158, in _parse_style_str\r\n    attrs = attrs._replace(color=parse_color(part))\r\n  File \"/home/dull/.virtualenvs/dishdev/local/lib/python3.8/site-packages/prompt_toolkit/styles/style.py\", line 75, in parse_color\r\n    raise ValueError('Wrong color format %r' % text)\r\nValueError: Wrong color format '90ee90'\r\n```", "reactions": {"url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/1011/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/1011/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/964", "repository_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit", "labels_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/964/labels{/name}", "comments_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/964/comments", "events_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/964/events", "html_url": "https://github.com/prompt-toolkit/python-prompt-toolkit/issues/964", "id": 490033599, "node_id": "MDU6SXNzdWU0OTAwMzM1OTk=", "number": 964, "title": "Race condition in ProgressBar", "user": {"login": "layday", "id": 31134424, "node_id": "MDQ6VXNlcjMxMTM0NDI0", "avatar_url": "https://avatars.githubusercontent.com/u/31134424?v=4", "gravatar_id": "", "url": "https://api.github.com/users/layday", "html_url": "https://github.com/layday", "followers_url": "https://api.github.com/users/layday/followers", "following_url": "https://api.github.com/users/layday/following{/other_user}", "gists_url": "https://api.github.com/users/layday/gists{/gist_id}", "starred_url": "https://api.github.com/users/layday/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/layday/subscriptions", "organizations_url": "https://api.github.com/users/layday/orgs", "repos_url": "https://api.github.com/users/layday/repos", "events_url": "https://api.github.com/users/layday/events{/privacy}", "received_events_url": "https://api.github.com/users/layday/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 76984990, "node_id": "MDU6TGFiZWw3Njk4NDk5MA==", "url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2019-09-05T22:11:13Z", "updated_at": "2021-03-16T18:38:31Z", "closed_at": "2021-03-16T18:38:31Z", "author_association": "NONE", "active_lock_reason": null, "body": "There appears to be a race condition in the `ProgressBar`'s context manager logic where if an exception is raised (or, indeed, if execution finishes) before the `app` has started, `self.app.is_running` will be false, the `app` will not be exited, and the thread will be left to run indefinitely.  You can reproduce this rather trivially (assuming starting a new thread takes as long as it does for me!) with:\r\n\r\n```py\r\nfrom prompt_toolkit.shortcuts import ProgressBar\r\n\r\nwith ProgressBar():\r\n    pass\r\n```", "reactions": {"url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/964/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/964/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/963", "repository_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit", "labels_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/963/labels{/name}", "comments_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/963/comments", "events_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/963/events", "html_url": "https://github.com/prompt-toolkit/python-prompt-toolkit/issues/963", "id": 489894208, "node_id": "MDU6SXNzdWU0ODk4OTQyMDg=", "number": 963, "title": "completer parameter is not overriden in PromptSession.prompt()", "user": {"login": "misko321", "id": 7603973, "node_id": "MDQ6VXNlcjc2MDM5NzM=", "avatar_url": "https://avatars.githubusercontent.com/u/7603973?v=4", "gravatar_id": "", "url": "https://api.github.com/users/misko321", "html_url": "https://github.com/misko321", "followers_url": "https://api.github.com/users/misko321/followers", "following_url": "https://api.github.com/users/misko321/following{/other_user}", "gists_url": "https://api.github.com/users/misko321/gists{/gist_id}", "starred_url": "https://api.github.com/users/misko321/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/misko321/subscriptions", "organizations_url": "https://api.github.com/users/misko321/orgs", "repos_url": "https://api.github.com/users/misko321/repos", "events_url": "https://api.github.com/users/misko321/events{/privacy}", "received_events_url": "https://api.github.com/users/misko321/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 76984990, "node_id": "MDU6TGFiZWw3Njk4NDk5MA==", "url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2019-09-05T17:12:11Z", "updated_at": "2019-09-12T17:38:45Z", "closed_at": "2019-09-12T17:38:45Z", "author_association": "NONE", "active_lock_reason": null, "body": "According to the comment in `prompt.py`, `completer` option can be overridden when a new value is passed to PromptSession.prompt() method:\r\n> \\# When any of these arguments are passed, this value is overwritten \r\n\\# in this PromptSession.\r\n\r\nHowever it seems not to be the case:\r\n```\r\ndef main():\r\n    session = PromptSession()\r\n\r\n    comp = WordCompleter(['abc', 'def'])\r\n    session.prompt(\"1> \", completer=comp, complete_while_typing=True)\r\n    session.prompt(\"2> \", completer=None)\r\n\r\n\r\nif __name__ == '__main__':\r\n    main()\r\n```\r\n\r\n![image](https://user-images.githubusercontent.com/7603973/64363031-f1b88780-d00f-11e9-866a-2eb505b04fc5.png)\r\n\r\nThe completer is still enabled in the second prompt.", "reactions": {"url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/963/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/963/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/837", "repository_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit", "labels_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/837/labels{/name}", "comments_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/837/comments", "events_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/837/events", "html_url": "https://github.com/prompt-toolkit/python-prompt-toolkit/issues/837", "id": 409524356, "node_id": "MDU6SXNzdWU0MDk1MjQzNTY=", "number": 837, "title": "completion of a line ending with a space in WordCompleter is broken in 2.0.8", "user": {"login": "jeroen-dhollander", "id": 10767030, "node_id": "MDQ6VXNlcjEwNzY3MDMw", "avatar_url": "https://avatars.githubusercontent.com/u/10767030?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jeroen-dhollander", "html_url": "https://github.com/jeroen-dhollander", "followers_url": "https://api.github.com/users/jeroen-dhollander/followers", "following_url": "https://api.github.com/users/jeroen-dhollander/following{/other_user}", "gists_url": "https://api.github.com/users/jeroen-dhollander/gists{/gist_id}", "starred_url": "https://api.github.com/users/jeroen-dhollander/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jeroen-dhollander/subscriptions", "organizations_url": "https://api.github.com/users/jeroen-dhollander/orgs", "repos_url": "https://api.github.com/users/jeroen-dhollander/repos", "events_url": "https://api.github.com/users/jeroen-dhollander/events{/privacy}", "received_events_url": "https://api.github.com/users/jeroen-dhollander/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 76984990, "node_id": "MDU6TGFiZWw3Njk4NDk5MA==", "url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2019-02-12T22:12:33Z", "updated_at": "2019-02-19T21:12:53Z", "closed_at": "2019-02-19T21:12:53Z", "author_association": "NONE", "active_lock_reason": null, "body": "In 2.0.8, completion of an input line like 'test ' is broken in the WordCompleter.\r\n\r\nThis can be seen with this simple test case:\r\n```\r\ndef test_word_completer_static_word_list():\r\n    completer = WordCompleter(['abc', 'def', 'aaa'])\r\n\r\n    <snip current tests>\r\n\r\n    # Multiple words ending with space. (Accept all options)\r\n    completions = completer.get_completions(Document('test '), CompleteEvent())\r\n    assert [c.text for c in completions] == ['abc', 'def', 'aaa']\r\n```\r\n\r\nAfter some digging I figured out it was broken by commit 81c30157.\r\nI will publish a pull request with some extra unittests and the fix.\r\n", "reactions": {"url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/837/reactions", "total_count": 1, "+1": 0, "-1": 0, "laugh": 1, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/837/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/836", "repository_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit", "labels_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/836/labels{/name}", "comments_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/836/comments", "events_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/836/events", "html_url": "https://github.com/prompt-toolkit/python-prompt-toolkit/issues/836", "id": 409129415, "node_id": "MDU6SXNzdWU0MDkxMjk0MTU=", "number": 836, "title": "print_formatted_text(ANSI(...)) removes color", "user": {"login": "RichardWarfield", "id": 4101168, "node_id": "MDQ6VXNlcjQxMDExNjg=", "avatar_url": "https://avatars.githubusercontent.com/u/4101168?v=4", "gravatar_id": "", "url": "https://api.github.com/users/RichardWarfield", "html_url": "https://github.com/RichardWarfield", "followers_url": "https://api.github.com/users/RichardWarfield/followers", "following_url": "https://api.github.com/users/RichardWarfield/following{/other_user}", "gists_url": "https://api.github.com/users/RichardWarfield/gists{/gist_id}", "starred_url": "https://api.github.com/users/RichardWarfield/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/RichardWarfield/subscriptions", "organizations_url": "https://api.github.com/users/RichardWarfield/orgs", "repos_url": "https://api.github.com/users/RichardWarfield/repos", "events_url": "https://api.github.com/users/RichardWarfield/events{/privacy}", "received_events_url": "https://api.github.com/users/RichardWarfield/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 76984990, "node_id": "MDU6TGFiZWw3Njk4NDk5MA==", "url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2019-02-12T05:38:40Z", "updated_at": "2019-02-19T21:06:54Z", "closed_at": "2019-02-13T10:38:02Z", "author_association": "NONE", "active_lock_reason": null, "body": "While using prompt_toolkit with pygments to highlight Haskell code, I discovered that I get different output using `print_formatted_text(ANSI(ansi_string))` compared to `print(ansi_string)`\r\n\r\n![bad_color](https://user-images.githubusercontent.com/4101168/52613249-22946c00-2ec8-11e9-850e-ca37bad4edbf.gif)\r\n\r\nIf I peek at the ANSI that gets output by the call to print_formatted_text, it is radically different from the input:\r\n\r\n`'\\x1b[0m\\x1b[?7h\\x1b[0m\"\\x1b[0mH\\x1b[0me\\x1b[0ml\\x1b[0ml\\x1b[0mo\\x1b[0m \\x1b[0mw\\x1b[0mo\\x1b[0mr\\x1b[0ml\\x1b[0md\\x1b[0m\"\\x1b[0m\\r\\n\\x1b[0m'`", "reactions": {"url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/836/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/836/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/831", "repository_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit", "labels_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/831/labels{/name}", "comments_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/831/comments", "events_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/831/events", "html_url": "https://github.com/prompt-toolkit/python-prompt-toolkit/issues/831", "id": 407679515, "node_id": "MDU6SXNzdWU0MDc2Nzk1MTU=", "number": 831, "title": "READLINE_LIKE completer behaves differently in 2.0.8 ? ", "user": {"login": "lambdamusic", "id": 3493663, "node_id": "MDQ6VXNlcjM0OTM2NjM=", "avatar_url": "https://avatars.githubusercontent.com/u/3493663?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lambdamusic", "html_url": "https://github.com/lambdamusic", "followers_url": "https://api.github.com/users/lambdamusic/followers", "following_url": "https://api.github.com/users/lambdamusic/following{/other_user}", "gists_url": "https://api.github.com/users/lambdamusic/gists{/gist_id}", "starred_url": "https://api.github.com/users/lambdamusic/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lambdamusic/subscriptions", "organizations_url": "https://api.github.com/users/lambdamusic/orgs", "repos_url": "https://api.github.com/users/lambdamusic/repos", "events_url": "https://api.github.com/users/lambdamusic/events{/privacy}", "received_events_url": "https://api.github.com/users/lambdamusic/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 76984990, "node_id": "MDU6TGFiZWw3Njk4NDk5MA==", "url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2019-02-07T12:37:43Z", "updated_at": "2019-02-20T22:37:18Z", "closed_at": "2019-02-20T22:37:18Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hello. I am using the fantastic autocomplete feature to build an [API REPL](https://github.com/lambdamusic/dimcli/blob/master/dimcli/console/repl.py#L224) and noticed that in version 2.0.8 if I hit TAB when no text prefix is present the autocomplete is not invoked. Eg\r\n\r\n```\r\n[1] Give some animals: # [TAB => shows all options]\r\nalligator ape       bear      bee       butterfly chicken   dinosaur  dolphin   duck      elephant  goat      kangaroo  lion      rabbit    snake     turkey\r\nant       bat       beaver    bison     cat       crocodile dog       dove      eagle     fish      gorilla   leopard   mouse     rat       spider    turtle\r\n\r\n[2] Give some animals: bear b # [TAB => shows options staring with b]\r\nbat       bear      beaver    bee       bison     butterfly\r\n\r\n[3] Give some animals: bear # [TAB => nothing shown!]\r\n```\r\n\r\n**NOTE** In version 2.0.7, the last example would show all available options. \r\n\r\nAm I doing anything wrong? Is there any way to revert back to the previous behaviour? \r\nThanks a million in advance!\r\n", "reactions": {"url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/831/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/831/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/829", "repository_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit", "labels_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/829/labels{/name}", "comments_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/829/comments", "events_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/829/events", "html_url": "https://github.com/prompt-toolkit/python-prompt-toolkit/issues/829", "id": 404829046, "node_id": "MDU6SXNzdWU0MDQ4MjkwNDY=", "number": 829, "title": "Running a shell command under ptpython Vi (NAV) mode returns an exception from prompt_toolkit", "user": {"login": "jcrmatos", "id": 1813375, "node_id": "MDQ6VXNlcjE4MTMzNzU=", "avatar_url": "https://avatars.githubusercontent.com/u/1813375?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jcrmatos", "html_url": "https://github.com/jcrmatos", "followers_url": "https://api.github.com/users/jcrmatos/followers", "following_url": "https://api.github.com/users/jcrmatos/following{/other_user}", "gists_url": "https://api.github.com/users/jcrmatos/gists{/gist_id}", "starred_url": "https://api.github.com/users/jcrmatos/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jcrmatos/subscriptions", "organizations_url": "https://api.github.com/users/jcrmatos/orgs", "repos_url": "https://api.github.com/users/jcrmatos/repos", "events_url": "https://api.github.com/users/jcrmatos/events{/privacy}", "received_events_url": "https://api.github.com/users/jcrmatos/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 76984990, "node_id": "MDU6TGFiZWw3Njk4NDk5MA==", "url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2019-01-30T15:37:35Z", "updated_at": "2019-01-30T21:01:59Z", "closed_at": "2019-01-30T21:01:59Z", "author_association": "NONE", "active_lock_reason": null, "body": "ptpython 2.04, prompt-toolkit 2.0.7 in Python 3.7.1 32b.\r\nRunning a shell command under ptpython Vi (NAV) mode returns an exception from prompt_toolkit.\r\n\r\n```\r\nUnhandled exception in event loop:\r\n  File \"C:\\Users\\JMatos\\OneDrive\\Python\\winpython371-32\\python-3.7.1\\lib\\site-pa\r\nckages\\prompt_toolkit\\eventloop\\coroutine.py\", line 90, in step_next\r\n    new_f = coroutine.throw(exc)\r\n  File \"C:\\Users\\JMatos\\OneDrive\\Python\\winpython371-32\\python-3.7.1\\lib\\site-pa\r\nckages\\prompt_toolkit\\application\\run_in_terminal.py\", line 95, in _run_in_t\r\n    result = yield From(async_func())\r\n  File \"C:\\Users\\JMatos\\OneDrive\\Python\\winpython371-32\\python-3.7.1\\lib\\site-pa\r\nckages\\prompt_toolkit\\eventloop\\coroutine.py\", line 86, in step_next\r\n    new_f = coroutine.send(None)\r\n  File \"C:\\Users\\JMatos\\OneDrive\\Python\\winpython371-32\\python-3.7.1\\lib\\site-pa\r\nckages\\prompt_toolkit\\application\\application.py\", line 771, in run\r\n    input_fd = self.input.fileno()\r\n  File \"C:\\Users\\JMatos\\OneDrive\\Python\\winpython371-32\\python-3.7.1\\lib\\site-pa\r\nckages\\prompt_toolkit\\input\\win32.py\", line 73, in fileno\r\n    raise NotImplementedError\r\n\r\nException\r\nPress ENTER to continue...\r\n```", "reactions": {"url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/829/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/829/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/763", "repository_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit", "labels_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/763/labels{/name}", "comments_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/763/comments", "events_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/763/events", "html_url": "https://github.com/prompt-toolkit/python-prompt-toolkit/issues/763", "id": 374187859, "node_id": "MDU6SXNzdWUzNzQxODc4NTk=", "number": 763, "title": "input_dialog.py example swallows ENTER", "user": {"login": "rofl0r", "id": 341425, "node_id": "MDQ6VXNlcjM0MTQyNQ==", "avatar_url": "https://avatars.githubusercontent.com/u/341425?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rofl0r", "html_url": "https://github.com/rofl0r", "followers_url": "https://api.github.com/users/rofl0r/followers", "following_url": "https://api.github.com/users/rofl0r/following{/other_user}", "gists_url": "https://api.github.com/users/rofl0r/gists{/gist_id}", "starred_url": "https://api.github.com/users/rofl0r/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rofl0r/subscriptions", "organizations_url": "https://api.github.com/users/rofl0r/orgs", "repos_url": "https://api.github.com/users/rofl0r/repos", "events_url": "https://api.github.com/users/rofl0r/events{/privacy}", "received_events_url": "https://api.github.com/users/rofl0r/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 76984990, "node_id": "MDU6TGFiZWw3Njk4NDk5MA==", "url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2018-10-26T00:59:47Z", "updated_at": "2018-11-01T04:56:27Z", "closed_at": "2018-11-01T04:56:27Z", "author_association": "NONE", "active_lock_reason": null, "body": "if you enter text, and press ENTER, the input will be deleted. if you use TAB instead to jump to the OK button, it will be preserved (same applies to password dialog example)", "reactions": {"url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/763/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/763/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/704", "repository_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit", "labels_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/704/labels{/name}", "comments_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/704/comments", "events_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/704/events", "html_url": "https://github.com/prompt-toolkit/python-prompt-toolkit/issues/704", "id": 348787791, "node_id": "MDU6SXNzdWUzNDg3ODc3OTE=", "number": 704, "title": "RadioList won't focus", "user": {"login": "stloma", "id": 24916590, "node_id": "MDQ6VXNlcjI0OTE2NTkw", "avatar_url": "https://avatars.githubusercontent.com/u/24916590?v=4", "gravatar_id": "", "url": "https://api.github.com/users/stloma", "html_url": "https://github.com/stloma", "followers_url": "https://api.github.com/users/stloma/followers", "following_url": "https://api.github.com/users/stloma/following{/other_user}", "gists_url": "https://api.github.com/users/stloma/gists{/gist_id}", "starred_url": "https://api.github.com/users/stloma/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/stloma/subscriptions", "organizations_url": "https://api.github.com/users/stloma/orgs", "repos_url": "https://api.github.com/users/stloma/repos", "events_url": "https://api.github.com/users/stloma/events{/privacy}", "received_events_url": "https://api.github.com/users/stloma/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 76984990, "node_id": "MDU6TGFiZWw3Njk4NDk5MA==", "url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2018-08-08T15:54:23Z", "updated_at": "2018-08-10T20:19:37Z", "closed_at": "2018-08-10T20:19:37Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Hi there. Thanks for this great library!\r\n\r\nSomething broke in v2.0.4 where RadioList won't take focus (I confirmed it working in v2.0.3).\r\n\r\nAn example of this not working is in: `examples/full-screen/full-screen-demo.py`. If you tab around, the radio dialog will be skipped.", "reactions": {"url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/704/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/704/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/630", "repository_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit", "labels_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/630/labels{/name}", "comments_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/630/comments", "events_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/630/events", "html_url": "https://github.com/prompt-toolkit/python-prompt-toolkit/issues/630", "id": 328998446, "node_id": "MDU6SXNzdWUzMjg5OTg0NDY=", "number": 630, "title": "\"metacompleter\" i.e. completing from a group of completers", "user": {"login": "sanga", "id": 2088, "node_id": "MDQ6VXNlcjIwODg=", "avatar_url": "https://avatars.githubusercontent.com/u/2088?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sanga", "html_url": "https://github.com/sanga", "followers_url": "https://api.github.com/users/sanga/followers", "following_url": "https://api.github.com/users/sanga/following{/other_user}", "gists_url": "https://api.github.com/users/sanga/gists{/gist_id}", "starred_url": "https://api.github.com/users/sanga/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sanga/subscriptions", "organizations_url": "https://api.github.com/users/sanga/orgs", "repos_url": "https://api.github.com/users/sanga/repos", "events_url": "https://api.github.com/users/sanga/events{/privacy}", "received_events_url": "https://api.github.com/users/sanga/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 76984990, "node_id": "MDU6TGFiZWw3Njk4NDk5MA==", "url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2018-06-04T10:30:41Z", "updated_at": "2018-06-16T20:44:53Z", "closed_at": "2018-06-16T20:44:17Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "In prompt toolkit 1 I had a set up where I had a metacompleter that had a list of completer instances and then get_completions method of the metacompleter basically just yielded from all the it's completers. The reason for this is basically to support completion plugins that may or may not be loaded by the user.\r\n\r\nThis doesn't appear to work in prompt toolkit 2. Or at least I haven't gotten it to work in a short amount of time (it's possible that that is actually fine but that there's been some other API change that is causing to me to not see any completions).\r\n```\r\n\r\nclass MetaCompleter(Completer):\r\n    def __init__(self, *completer_instances):\r\n       self.completers = completer_instances\r\n\r\n     def get_completions(self, document, complete_event):\r\n        for c in self.completers:\r\n            for h in c.get_completions(document, complete_event):\r\n                 yield h\r\n```\r\n\r\nBasically something like that ^. So is there a canonical way to do that with prompt toolkit? And should that work in prompt toolkit 2 or has there been changes in that area (I hadn't spotted anything obvious so far)", "reactions": {"url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/630/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/630/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/624", "repository_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit", "labels_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/624/labels{/name}", "comments_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/624/comments", "events_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/624/events", "html_url": "https://github.com/prompt-toolkit/python-prompt-toolkit/issues/624", "id": 324507116, "node_id": "MDU6SXNzdWUzMjQ1MDcxMTY=", "number": 624, "title": "progress_bar and Python 2: not intended to work together?", "user": {"login": "timtylin", "id": 70117, "node_id": "MDQ6VXNlcjcwMTE3", "avatar_url": "https://avatars.githubusercontent.com/u/70117?v=4", "gravatar_id": "", "url": "https://api.github.com/users/timtylin", "html_url": "https://github.com/timtylin", "followers_url": "https://api.github.com/users/timtylin/followers", "following_url": "https://api.github.com/users/timtylin/following{/other_user}", "gists_url": "https://api.github.com/users/timtylin/gists{/gist_id}", "starred_url": "https://api.github.com/users/timtylin/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/timtylin/subscriptions", "organizations_url": "https://api.github.com/users/timtylin/orgs", "repos_url": "https://api.github.com/users/timtylin/repos", "events_url": "https://api.github.com/users/timtylin/events{/privacy}", "received_events_url": "https://api.github.com/users/timtylin/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 76984990, "node_id": "MDU6TGFiZWw3Njk4NDk5MA==", "url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2018-05-18T18:20:59Z", "updated_at": "2018-05-21T15:34:08Z", "closed_at": "2018-05-21T15:34:07Z", "author_association": "NONE", "active_lock_reason": null, "body": "I'm having a lot of trouble getting the `progress_bar` construct to work under Python 2 (I'm using Python 2.7.14 on macOS 10.13), so much so that I'm thinking it was never tested with Python 2 in mind. Is that the case?\r\n\r\nFor example, if I try out the first progress bar example `a-lot-of-parallel-tasks.py`, I immediately get the following error:\r\n\r\n```python\r\n  File \"./a-lot-of-parallel-tasks.py\", line 14, in main\r\n    with progress_bar( title='Example of many parallel tasks.', bottom_toolbar='[Control-L] clear  [Control-C] abort') as pb:\r\n  File \"/usr/local/lib/python2.7/site-packages/prompt_toolkit/shortcuts/progress_bar/base.py\", line 132, in __enter__\r\n    for f in self.formatters\r\n  File \"/usr/local/lib/python2.7/site-packages/prompt_toolkit/layout/containers.py\", line 1183, in __init__\r\n    assert is_dimension(width)\r\n  File \"/usr/local/lib/python2.7/site-packages/prompt_toolkit/layout/dimension.py\", line 185, in is_dimension\r\n    return test_callable_args(value, [])\r\n  File \"/usr/local/lib/python2.7/site-packages/prompt_toolkit/utils.py\", line 125, in test_callable_args\r\n    spec = inspect.getargspec(func)\r\n  File \"/usr/local/Cellar/python@2/2.7.14_1/Frameworks/Python.framework/Versions/2.7/lib/python2.7/inspect.py\", line 818, in getargspec\r\n    raise TypeError('{!r} is not a Python function'.format(func))\r\nTypeError: <functools.partial object at 0x102b77788> is not a Python function\r\n```\r\n\r\nWhich makes sense, as you can't use `inspect.getargspec` on a `functools.partial` object, even though `callable()` returns true on it. If I hack around it by using lambdas instead of partial, I'll proceed though to get a lot of divide-by-zero errors. It's at this point that I thought perhaps it was never tested against Python 2.", "reactions": {"url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/624/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/624/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/599", "repository_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit", "labels_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/599/labels{/name}", "comments_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/599/comments", "events_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/599/events", "html_url": "https://github.com/prompt-toolkit/python-prompt-toolkit/issues/599", "id": 299417956, "node_id": "MDU6SXNzdWUyOTk0MTc5NTY=", "number": 599, "title": "Buffer.open_in_editor() deletes the file before opening editor", "user": {"login": "neonrust", "id": 6277212, "node_id": "MDQ6VXNlcjYyNzcyMTI=", "avatar_url": "https://avatars.githubusercontent.com/u/6277212?v=4", "gravatar_id": "", "url": "https://api.github.com/users/neonrust", "html_url": "https://github.com/neonrust", "followers_url": "https://api.github.com/users/neonrust/followers", "following_url": "https://api.github.com/users/neonrust/following{/other_user}", "gists_url": "https://api.github.com/users/neonrust/gists{/gist_id}", "starred_url": "https://api.github.com/users/neonrust/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/neonrust/subscriptions", "organizations_url": "https://api.github.com/users/neonrust/orgs", "repos_url": "https://api.github.com/users/neonrust/repos", "events_url": "https://api.github.com/users/neonrust/events{/privacy}", "received_events_url": "https://api.github.com/users/neonrust/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 76984990, "node_id": "MDU6TGFiZWw3Njk4NDk5MA==", "url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2018-02-22T16:24:18Z", "updated_at": "2018-03-22T07:22:51Z", "closed_at": "2018-03-22T07:22:51Z", "author_association": "NONE", "active_lock_reason": null, "body": "For me -  running in synch mode, i.e.not asynch :) - the parameter `enable_open_in_editor` works the first time. But the second time it's invoked. The temp file is deleted before the editor is launched.\r\n\r\n[buffer.py#L1348](https://github.com/jonathanslenders/python-prompt-toolkit/blob/2.0/prompt_toolkit/buffer.py#L1348)\r\n\r\nI added some logging around the above line, and it seems that the second time it just falls through down to the `os.remove(filename)` even before the editor is launched. This behavior is 100% consistent, so far...\r\n\r\nThis second time, when the editor is launched, the content is of course empty (and editor might say it is a new file).\r\n\r\nAnyone else seen this?\r\nI didn't dig into `run_in_terminal()` and the `Future` it returns, yet. I thought I'd ask here first.\r\n", "reactions": {"url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/599/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/599/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/585", "repository_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit", "labels_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/585/labels{/name}", "comments_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/585/comments", "events_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/585/events", "html_url": "https://github.com/prompt-toolkit/python-prompt-toolkit/issues/585", "id": 295137847, "node_id": "MDU6SXNzdWUyOTUxMzc4NDc=", "number": 585, "title": "No input in Win10 Asyncio", "user": {"login": "sander76", "id": 1688712, "node_id": "MDQ6VXNlcjE2ODg3MTI=", "avatar_url": "https://avatars.githubusercontent.com/u/1688712?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sander76", "html_url": "https://github.com/sander76", "followers_url": "https://api.github.com/users/sander76/followers", "following_url": "https://api.github.com/users/sander76/following{/other_user}", "gists_url": "https://api.github.com/users/sander76/gists{/gist_id}", "starred_url": "https://api.github.com/users/sander76/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sander76/subscriptions", "organizations_url": "https://api.github.com/users/sander76/orgs", "repos_url": "https://api.github.com/users/sander76/repos", "events_url": "https://api.github.com/users/sander76/events{/privacy}", "received_events_url": "https://api.github.com/users/sander76/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 76984990, "node_id": "MDU6TGFiZWw3Njk4NDk5MA==", "url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2018-02-07T13:29:56Z", "updated_at": "2018-02-16T07:42:56Z", "closed_at": "2018-02-16T07:42:55Z", "author_association": "NONE", "active_lock_reason": null, "body": "See code below.\r\nI get the prompt. But I cannot enter any test into it...\r\n\r\n```\r\nimport asyncio\r\nfrom prompt_toolkit import prompt\r\nfrom prompt_toolkit.patch_stdout import patch_stdout\r\n\r\n\r\nasync def my_coroutine():\r\n    while True:\r\n        with patch_stdout():\r\n            result = await prompt('Say something: ', async_=True)\r\n        print('You said: %s' % result)\r\n\r\n\r\nif __name__ == \"__main__\":\r\n    loop = asyncio.get_event_loop()\r\n    loop.run_until_complete(my_coroutine())\r\n```", "reactions": {"url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/585/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/585/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/576", "repository_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit", "labels_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/576/labels{/name}", "comments_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/576/comments", "events_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/576/events", "html_url": "https://github.com/prompt-toolkit/python-prompt-toolkit/pull/576", "id": 290609170, "node_id": "MDExOlB1bGxSZXF1ZXN0MTY0NDEyMDc4", "number": 576, "title": "bugfix in flush key at 2.0 branch", "user": {"login": "randy3k", "id": 1690993, "node_id": "MDQ6VXNlcjE2OTA5OTM=", "avatar_url": "https://avatars.githubusercontent.com/u/1690993?v=4", "gravatar_id": "", "url": "https://api.github.com/users/randy3k", "html_url": "https://github.com/randy3k", "followers_url": "https://api.github.com/users/randy3k/followers", "following_url": "https://api.github.com/users/randy3k/following{/other_user}", "gists_url": "https://api.github.com/users/randy3k/gists{/gist_id}", "starred_url": "https://api.github.com/users/randy3k/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/randy3k/subscriptions", "organizations_url": "https://api.github.com/users/randy3k/orgs", "repos_url": "https://api.github.com/users/randy3k/repos", "events_url": "https://api.github.com/users/randy3k/events{/privacy}", "received_events_url": "https://api.github.com/users/randy3k/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 76984990, "node_id": "MDU6TGFiZWw3Njk4NDk5MA==", "url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2018-01-22T20:46:10Z", "updated_at": "2018-01-28T13:41:32Z", "closed_at": "2018-01-23T21:57:47Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/pulls/576", "html_url": "https://github.com/prompt-toolkit/python-prompt-toolkit/pull/576", "diff_url": "https://github.com/prompt-toolkit/python-prompt-toolkit/pull/576.diff", "patch_url": "https://github.com/prompt-toolkit/python-prompt-toolkit/pull/576.patch", "merged_at": "2018-01-23T21:57:46Z"}, "body": "1. only invalidate ui when some keys are processed\r\n2. do not start_timeout if the last key is _Flush, otherwise it causes a dead loop\r\n3. only send flush key when the queue is not empty\r\n\r\nclose #570 ", "reactions": {"url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/576/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/576/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/564", "repository_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit", "labels_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/564/labels{/name}", "comments_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/564/comments", "events_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/564/events", "html_url": "https://github.com/prompt-toolkit/python-prompt-toolkit/issues/564", "id": 281508729, "node_id": "MDU6SXNzdWUyODE1MDg3Mjk=", "number": 564, "title": "pt 2.0, Windows: KeyError in wait() callback of Win32AsyncioEventLoop.add_win32_handle()", "user": {"login": "jskm", "id": 4820827, "node_id": "MDQ6VXNlcjQ4MjA4Mjc=", "avatar_url": "https://avatars.githubusercontent.com/u/4820827?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jskm", "html_url": "https://github.com/jskm", "followers_url": "https://api.github.com/users/jskm/followers", "following_url": "https://api.github.com/users/jskm/following{/other_user}", "gists_url": "https://api.github.com/users/jskm/gists{/gist_id}", "starred_url": "https://api.github.com/users/jskm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jskm/subscriptions", "organizations_url": "https://api.github.com/users/jskm/orgs", "repos_url": "https://api.github.com/users/jskm/repos", "events_url": "https://api.github.com/users/jskm/events{/privacy}", "received_events_url": "https://api.github.com/users/jskm/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 76984990, "node_id": "MDU6TGFiZWw3Njk4NDk5MA==", "url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2017-12-12T19:29:12Z", "updated_at": "2017-12-16T11:33:52Z", "closed_at": "2017-12-16T11:33:52Z", "author_association": "NONE", "active_lock_reason": null, "body": "While using prompt-toolkit with the asyncio event loop, I keep seeing `ERROR:asyncio:Future exception was never retrieved` caused by a KeyError in [eventloop/asyncio_win32.py#L101](https://github.com/jonathanslenders/python-prompt-toolkit/blob/e4c671e65330b008488a98100368ab24307b47d1/prompt_toolkit/eventloop/asyncio_win32.py#L101)\r\n\r\nIt happens with the prompts/asyncio-prompt.py example as well. This is an example of the output:\r\n```\r\n(python-prompt-toolkit) PS C:\\Code\\python-prompt-toolkit\\examples\\prompts> py .\\asyncio-prompt.py\r\nCounter: 0\r\nERROR:asyncio:Future exception was never retrieved\r\nfuture: <prompt_toolkit.eventloop.future.Future object at 0x0000000003BBFE48>\r\nTraceback (most recent call last):\r\n  File \"C:\\Users\\jskm\\AppData\\Local\\Programs\\Python\\Python36\\lib\\concurrent\\futures\\thread.py\", line 56, in run\r\n    result = self.fn(*self.args, **self.kwargs)\r\n  File \"C:\\Code\\python-prompt-toolkit\\prompt_toolkit\\eventloop\\asyncio_win32.py\", line 101, in wait\r\n    if self._handle_callbacks[handle] != callback:\r\nKeyError: 19\r\nSay something:\r\nYou said: \"\"\r\nSay something:\r\nYou said: \"\"\r\nERROR:asyncio:Future exception was never retrieved\r\nfuture: <prompt_toolkit.eventloop.future.Future object at 0x0000000003BDEE80>\r\nTraceback (most recent call last):\r\n  File \"C:\\Users\\jskm\\AppData\\Local\\Programs\\Python\\Python36\\lib\\concurrent\\futures\\thread.py\", line 56, in run\r\n    result = self.fn(*self.args, **self.kwargs)\r\n  File \"C:\\Code\\python-prompt-toolkit\\prompt_toolkit\\eventloop\\asyncio_win32.py\", line 101, in wait\r\n    if self._handle_callbacks[handle] != callback:\r\nKeyError: 19\r\nERROR:asyncio:Future exception was never retrieved\r\nfuture: <prompt_toolkit.eventloop.future.Future object at 0x0000000003C25EF0>\r\nTraceback (most recent call last):\r\n  File \"C:\\Users\\jskm\\AppData\\Local\\Programs\\Python\\Python36\\lib\\concurrent\\futures\\thread.py\", line 56, in run\r\n    result = self.fn(*self.args, **self.kwargs)\r\n  File \"C:\\Code\\python-prompt-toolkit\\prompt_toolkit\\eventloop\\asyncio_win32.py\", line 101, in wait\r\n    if self._handle_callbacks[handle] != callback:\r\nKeyError: 19\r\nCounter: 1\r\nSay something:\r\nYou said: \"\"\r\nSay something:\r\nYou said: \"\"\r\nSay something:\r\nYou said: \"\"\r\nCounter: 2\r\nSay something:\r\nYou said: \"\"\r\nERROR:asyncio:Future exception was never retrieved\r\nfuture: <prompt_toolkit.eventloop.future.Future object at 0x0000000003C660F0>\r\nTraceback (most recent call last):\r\n  File \"C:\\Users\\jskm\\AppData\\Local\\Programs\\Python\\Python36\\lib\\concurrent\\futures\\thread.py\", line 56, in run\r\n    result = self.fn(*self.args, **self.kwargs)\r\n  File \"C:\\Code\\python-prompt-toolkit\\prompt_toolkit\\eventloop\\asyncio_win32.py\", line 101, in wait\r\n    if self._handle_callbacks[handle] != callback:\r\nKeyError: 19\r\nSay something:\r\n```\r\n", "reactions": {"url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/564/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/564/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/549", "repository_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit", "labels_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/549/labels{/name}", "comments_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/549/comments", "events_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/549/events", "html_url": "https://github.com/prompt-toolkit/python-prompt-toolkit/issues/549", "id": 256486294, "node_id": "MDU6SXNzdWUyNTY0ODYyOTQ=", "number": 549, "title": "v2.0 does not work on Windows with python 2.7", "user": {"login": "randy3k", "id": 1690993, "node_id": "MDQ6VXNlcjE2OTA5OTM=", "avatar_url": "https://avatars.githubusercontent.com/u/1690993?v=4", "gravatar_id": "", "url": "https://api.github.com/users/randy3k", "html_url": "https://github.com/randy3k", "followers_url": "https://api.github.com/users/randy3k/followers", "following_url": "https://api.github.com/users/randy3k/following{/other_user}", "gists_url": "https://api.github.com/users/randy3k/gists{/gist_id}", "starred_url": "https://api.github.com/users/randy3k/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/randy3k/subscriptions", "organizations_url": "https://api.github.com/users/randy3k/orgs", "repos_url": "https://api.github.com/users/randy3k/repos", "events_url": "https://api.github.com/users/randy3k/events{/privacy}", "received_events_url": "https://api.github.com/users/randy3k/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 76984990, "node_id": "MDU6TGFiZWw3Njk4NDk5MA==", "url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2017-09-10T05:22:19Z", "updated_at": "2017-09-13T21:52:50Z", "closed_at": "2017-09-13T21:52:50Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Windows 10\r\nPython 2.7\r\n\r\n\r\nCode\r\n```python\r\nprompt(\"> \")\r\n```\r\n\r\nhere is the error\r\n```python\r\nTraceback (most recent call last):\r\n  File \"foo.py\", line 3, in <module>\r\n    prompt(\"> \")\r\n  File \"C:\\Users\\IEUser\\Miniconda3\\envs\\py27\\lib\\site-packages\\prompt_toolkit\\shortcuts\\prompt.py\", line 717, in prompt\r\n    prompt = Prompt()\r\n  File \"C:\\Users\\IEUser\\Miniconda3\\envs\\py27\\lib\\site-packages\\prompt_toolkit\\shortcuts\\prompt.py\", line 256, in __init__\r\n    input = input or get_default_input()\r\n  File \"C:\\Users\\IEUser\\Miniconda3\\envs\\py27\\lib\\site-packages\\prompt_toolkit\\input\\defaults.py\", line 37, in get_default_input\r\n    return create_input()\r\n  File \"C:\\Users\\IEUser\\Miniconda3\\envs\\py27\\lib\\site-packages\\prompt_toolkit\\input\\defaults.py\", line 18, in create_input\r\n    from .win32 import Win32Input\r\n  File \"C:\\Users\\IEUser\\Miniconda3\\envs\\py27\\lib\\site-packages\\prompt_toolkit\\input\\win32.py\", line 227\r\n    yield KeyPress(Keys.BracketedPaste, ''.join(data))\r\nSyntaxError: 'return' with argument inside generator\r\n```\r\n\r\nAnd it is working with python 3.5 on Windows.", "reactions": {"url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/549/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/549/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/543", "repository_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit", "labels_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/543/labels{/name}", "comments_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/543/comments", "events_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/543/events", "html_url": "https://github.com/prompt-toolkit/python-prompt-toolkit/issues/543", "id": 252479510, "node_id": "MDU6SXNzdWUyNTI0Nzk1MTA=", "number": 543, "title": "ctrl-c on the search bar throws KeyboardInterrupt", "user": {"login": "randy3k", "id": 1690993, "node_id": "MDQ6VXNlcjE2OTA5OTM=", "avatar_url": "https://avatars.githubusercontent.com/u/1690993?v=4", "gravatar_id": "", "url": "https://api.github.com/users/randy3k", "html_url": "https://github.com/randy3k", "followers_url": "https://api.github.com/users/randy3k/followers", "following_url": "https://api.github.com/users/randy3k/following{/other_user}", "gists_url": "https://api.github.com/users/randy3k/gists{/gist_id}", "starred_url": "https://api.github.com/users/randy3k/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/randy3k/subscriptions", "organizations_url": "https://api.github.com/users/randy3k/orgs", "repos_url": "https://api.github.com/users/randy3k/repos", "events_url": "https://api.github.com/users/randy3k/events{/privacy}", "received_events_url": "https://api.github.com/users/randy3k/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 76984990, "node_id": "MDU6TGFiZWw3Njk4NDk5MA==", "url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2017-08-24T03:50:53Z", "updated_at": "2017-08-29T23:24:32Z", "closed_at": "2017-08-29T23:24:32Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "at 2.0 branch, ctrl-c doesn't cancel the search prompt but throws KeyboardInterrupt.", "reactions": {"url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/543/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/543/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/538", "repository_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit", "labels_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/538/labels{/name}", "comments_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/538/comments", "events_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/538/events", "html_url": "https://github.com/prompt-toolkit/python-prompt-toolkit/issues/538", "id": 250227105, "node_id": "MDU6SXNzdWUyNTAyMjcxMDU=", "number": 538, "title": "HighlightMatchingBracketProcessor does not unhighlight after enter key", "user": {"login": "randy3k", "id": 1690993, "node_id": "MDQ6VXNlcjE2OTA5OTM=", "avatar_url": "https://avatars.githubusercontent.com/u/1690993?v=4", "gravatar_id": "", "url": "https://api.github.com/users/randy3k", "html_url": "https://github.com/randy3k", "followers_url": "https://api.github.com/users/randy3k/followers", "following_url": "https://api.github.com/users/randy3k/following{/other_user}", "gists_url": "https://api.github.com/users/randy3k/gists{/gist_id}", "starred_url": "https://api.github.com/users/randy3k/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/randy3k/subscriptions", "organizations_url": "https://api.github.com/users/randy3k/orgs", "repos_url": "https://api.github.com/users/randy3k/repos", "events_url": "https://api.github.com/users/randy3k/events{/privacy}", "received_events_url": "https://api.github.com/users/randy3k/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 76984990, "node_id": "MDU6TGFiZWw3Njk4NDk5MA==", "url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2017-08-15T05:48:33Z", "updated_at": "2017-08-15T18:03:00Z", "closed_at": "2017-08-15T18:03:00Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "At 2.0\r\n\r\n```python\r\n        p = Prompt(extra_input_processor=HighlightMatchingBracketProcessor())\r\n        p.prompt(\"> \")\r\n```\r\n\r\n<img width=\"187\" alt=\"screen shot 2017-08-15 at 1 48 20 am\" src=\"https://user-images.githubusercontent.com/1690993/29303582-d648fc5a-815b-11e7-9d51-50b55635c7dc.png\">\r\n", "reactions": {"url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/538/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/538/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/536", "repository_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit", "labels_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/536/labels{/name}", "comments_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/536/comments", "events_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/536/events", "html_url": "https://github.com/prompt-toolkit/python-prompt-toolkit/issues/536", "id": 249914139, "node_id": "MDU6SXNzdWUyNDk5MTQxMzk=", "number": 536, "title": "system toolbar not working at 2.0", "user": {"login": "randy3k", "id": 1690993, "node_id": "MDQ6VXNlcjE2OTA5OTM=", "avatar_url": "https://avatars.githubusercontent.com/u/1690993?v=4", "gravatar_id": "", "url": "https://api.github.com/users/randy3k", "html_url": "https://github.com/randy3k", "followers_url": "https://api.github.com/users/randy3k/followers", "following_url": "https://api.github.com/users/randy3k/following{/other_user}", "gists_url": "https://api.github.com/users/randy3k/gists{/gist_id}", "starred_url": "https://api.github.com/users/randy3k/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/randy3k/subscriptions", "organizations_url": "https://api.github.com/users/randy3k/orgs", "repos_url": "https://api.github.com/users/randy3k/repos", "events_url": "https://api.github.com/users/randy3k/events{/privacy}", "received_events_url": "https://api.github.com/users/randy3k/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 76984990, "node_id": "MDU6TGFiZWw3Njk4NDk5MA==", "url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2017-08-14T01:40:20Z", "updated_at": "2017-08-15T05:20:15Z", "closed_at": "2017-08-15T05:20:15Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "I just do\r\n```python\r\np = Prompt()\r\np.prompt(\"> \")\r\n```\r\n\r\nI first hit `esc + !` but nothing is shown.  I then type `ls` and press `enter.\r\nThe following is shown\r\n<img width=\"493\" alt=\"screen shot 2017-08-13 at 9 29 39 pm\" src=\"https://user-images.githubusercontent.com/1690993/29255426-4147f6c0-806f-11e7-8637-d7f7fc6de79f.png\">\r\nand the program is  frozen.", "reactions": {"url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/536/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/536/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/533", "repository_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit", "labels_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/533/labels{/name}", "comments_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/533/comments", "events_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/533/events", "html_url": "https://github.com/prompt-toolkit/python-prompt-toolkit/issues/533", "id": 249842636, "node_id": "MDU6SXNzdWUyNDk4NDI2MzY=", "number": 533, "title": "how to handle KeyboardInterrupt at 2.0", "user": {"login": "randy3k", "id": 1690993, "node_id": "MDQ6VXNlcjE2OTA5OTM=", "avatar_url": "https://avatars.githubusercontent.com/u/1690993?v=4", "gravatar_id": "", "url": "https://api.github.com/users/randy3k", "html_url": "https://github.com/randy3k", "followers_url": "https://api.github.com/users/randy3k/followers", "following_url": "https://api.github.com/users/randy3k/following{/other_user}", "gists_url": "https://api.github.com/users/randy3k/gists{/gist_id}", "starred_url": "https://api.github.com/users/randy3k/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/randy3k/subscriptions", "organizations_url": "https://api.github.com/users/randy3k/orgs", "repos_url": "https://api.github.com/users/randy3k/repos", "events_url": "https://api.github.com/users/randy3k/events{/privacy}", "received_events_url": "https://api.github.com/users/randy3k/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 76984990, "node_id": "MDU6TGFiZWw3Njk4NDk5MA==", "url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2017-08-13T00:00:09Z", "updated_at": "2017-08-13T21:47:11Z", "closed_at": "2017-08-13T21:47:11Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Consider this\r\n\r\n```python\r\n        prompt = Prompt()\r\n\r\n        try:\r\n            text = prompt.prompt(\"> \", enable_suspend=True)\r\n        except:\r\n            pass\r\n\r\n        text = prompt.prompt(\"> \")\r\n        print(text)\r\n```\r\n\r\nAt the first prompt, I sent a `^C`. And at the second prompt, I typed `foo`. However, at the end of the application, it shows `Future exception was never retrieved`. It may be because the exception was never probably handled. How I should handle it correctly?\r\n\r\n```\r\n>\r\n> foo\r\nfoo\r\nFuture exception was never retrieved\r\nfuture: <prompt_toolkit.eventloop.future.Future object at 0x110e3c6a0>\r\nTraceback (most recent call last):\r\n  File \"/Users/Randy/Dropbox/R/Role/role/application.py\", line 15, in run\r\n    text = prompt.prompt(\"> \", enable_suspend=True)\r\n  File \"/Users/Randy/Dropbox/R/Role/role/deps/prompt_toolkit/shortcuts/prompt.py\", line 657, in prompt\r\n    return run_sync()\r\n  File \"/Users/Randy/Dropbox/R/Role/role/deps/prompt_toolkit/shortcuts/prompt.py\", line 641, in run_sync\r\n    return self.app.run()\r\n```", "reactions": {"url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/533/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/533/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/524", "repository_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit", "labels_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/524/labels{/name}", "comments_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/524/comments", "events_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/524/events", "html_url": "https://github.com/prompt-toolkit/python-prompt-toolkit/issues/524", "id": 243556386, "node_id": "MDU6SXNzdWUyNDM1NTYzODY=", "number": 524, "title": "Is Input.read actually used? ", "user": {"login": "asmeurer", "id": 71486, "node_id": "MDQ6VXNlcjcxNDg2", "avatar_url": "https://avatars.githubusercontent.com/u/71486?v=4", "gravatar_id": "", "url": "https://api.github.com/users/asmeurer", "html_url": "https://github.com/asmeurer", "followers_url": "https://api.github.com/users/asmeurer/followers", "following_url": "https://api.github.com/users/asmeurer/following{/other_user}", "gists_url": "https://api.github.com/users/asmeurer/gists{/gist_id}", "starred_url": "https://api.github.com/users/asmeurer/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/asmeurer/subscriptions", "organizations_url": "https://api.github.com/users/asmeurer/orgs", "repos_url": "https://api.github.com/users/asmeurer/repos", "events_url": "https://api.github.com/users/asmeurer/events{/privacy}", "received_events_url": "https://api.github.com/users/asmeurer/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 76984990, "node_id": "MDU6TGFiZWw3Njk4NDk5MA==", "url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2017-07-17T23:23:05Z", "updated_at": "2018-06-02T17:33:18Z", "closed_at": "2018-06-02T17:33:18Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "I noticed that `PipeInput.read` is [wrong](https://github.com/jonathanslenders/python-prompt-toolkit/blob/36af6561be13530e631e0959fa6c78ccfc37bbba/prompt_toolkit/input.py#L115) (it calls `os.read(self._r)`, but `os.read` takes [two arguments](https://docs.python.org/2/library/os.html#os.read)).\r\n\r\nI've used PipeInput and never seen an issue with it, so I'm assuming that no code actually uses `read`, instead directly manipulating the `fileno`. Does this mean that `Input` subclasses have to have a real file number associated with them? ", "reactions": {"url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/524/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/524/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/522", "repository_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit", "labels_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/522/labels{/name}", "comments_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/522/comments", "events_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/522/events", "html_url": "https://github.com/prompt-toolkit/python-prompt-toolkit/issues/522", "id": 241684381, "node_id": "MDU6SXNzdWUyNDE2ODQzODE=", "number": 522, "title": "Cannot import name INPUT_TIMEOUT", "user": {"login": "lllama", "id": 598411, "node_id": "MDQ6VXNlcjU5ODQxMQ==", "avatar_url": "https://avatars.githubusercontent.com/u/598411?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lllama", "html_url": "https://github.com/lllama", "followers_url": "https://api.github.com/users/lllama/followers", "following_url": "https://api.github.com/users/lllama/following{/other_user}", "gists_url": "https://api.github.com/users/lllama/gists{/gist_id}", "starred_url": "https://api.github.com/users/lllama/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lllama/subscriptions", "organizations_url": "https://api.github.com/users/lllama/orgs", "repos_url": "https://api.github.com/users/lllama/repos", "events_url": "https://api.github.com/users/lllama/events{/privacy}", "received_events_url": "https://api.github.com/users/lllama/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 76984990, "node_id": "MDU6TGFiZWw3Njk4NDk5MA==", "url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2017-07-10T11:41:12Z", "updated_at": "2017-07-24T14:48:55Z", "closed_at": "2017-07-24T14:48:55Z", "author_association": "NONE", "active_lock_reason": null, "body": "Running the `pager.py` example on the 2.0 branch gives me the following import error:\r\n\r\n```\r\nTraceback (most recent call last):\r\n  File \".\\pager.py\", line 96, in <module>\r\n    full_screen=True)\r\n  File \"c:\\users\\test\\documents\\development\\python-prompt-toolkit\\prompt_toolkit\\application\\application.py\", line 217, in __init__\r\n    self._running_in_terminal_f = get_event_loop().create_future()\r\n  File \"c:\\users\\test\\documents\\development\\python-prompt-toolkit\\prompt_toolkit\\eventloop\\defaults.py\", line 61, in get_event_loop\r\n    _loop = create_event_loop()\r\n  File \"c:\\users\\test\\documents\\development\\python-prompt-toolkit\\prompt_toolkit\\eventloop\\defaults.py\", line 22, in create_event_loop\r\n    from .win32 import Win32EventLoop\r\n  File \"c:\\users\\test\\documents\\development\\python-prompt-toolkit\\prompt_toolkit\\eventloop\\win32.py\", line 8, in <module>\r\n    from .base import EventLoop, INPUT_TIMEOUT\r\nImportError: cannot import name 'INPUT_TIMEOUT'\r\n```\r\n\r\nLooks like it's not actually in `base.py` but there is a `INPUT_TIMEOUT_MS` in `win32.py`, so I'm going to guess that this is an old import that's not been cleaned up.", "reactions": {"url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/522/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/522/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/507", "repository_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit", "labels_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/507/labels{/name}", "comments_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/507/comments", "events_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/507/events", "html_url": "https://github.com/prompt-toolkit/python-prompt-toolkit/issues/507", "id": 230232492, "node_id": "MDU6SXNzdWUyMzAyMzI0OTI=", "number": 507, "title": "`patch_stdout` lines printed out of order", "user": {"login": "johshoff", "id": 353935, "node_id": "MDQ6VXNlcjM1MzkzNQ==", "avatar_url": "https://avatars.githubusercontent.com/u/353935?v=4", "gravatar_id": "", "url": "https://api.github.com/users/johshoff", "html_url": "https://github.com/johshoff", "followers_url": "https://api.github.com/users/johshoff/followers", "following_url": "https://api.github.com/users/johshoff/following{/other_user}", "gists_url": "https://api.github.com/users/johshoff/gists{/gist_id}", "starred_url": "https://api.github.com/users/johshoff/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/johshoff/subscriptions", "organizations_url": "https://api.github.com/users/johshoff/orgs", "repos_url": "https://api.github.com/users/johshoff/repos", "events_url": "https://api.github.com/users/johshoff/events{/privacy}", "received_events_url": "https://api.github.com/users/johshoff/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 76984990, "node_id": "MDU6TGFiZWw3Njk4NDk5MA==", "url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2017-05-21T16:42:58Z", "updated_at": "2017-08-15T18:04:57Z", "closed_at": "2017-08-15T18:04:57Z", "author_association": "NONE", "active_lock_reason": null, "body": "Lines printed from an `inputhook` might be printed out of order when doing `patch_stdout`.\r\n\r\nExample to illustrate:\r\n\r\n```python\r\nfrom __future__ import unicode_literals\r\nfrom prompt_toolkit.shortcuts import prompt, create_eventloop\r\nfrom time import sleep\r\n\r\nx = 0\r\ndef inputhook(context):\r\n    global x\r\n\r\n    print('%d before sleep' % x)\r\n    x = x + 1\r\n    sleep(1)\r\n    print('%d after sleep' % x)\r\n    x = x + 1\r\n\r\nprompt('> ',\r\n       eventloop=create_eventloop(inputhook=inputhook),\r\n       patch_stdout=True)\r\n```\r\n\r\nExample output (the order will be different between runs):\r\n\r\n```\r\n0 before sleep\r\n1 after sleep\r\n2 before sleep\r\n3 after sleep\r\n5 after sleep\r\n4 before sleep\r\n```\r\n\r\nExpected numbers to be 0, 1, 2, 3, ***4, 5***, but instead they are 0, 1, 2, 3, ***5, 4***.\r\n\r\nRunning MacOS 10.11.6 and iterm2 3.0.15.\r\n\r\nObservations so far:\r\n\r\n\u2022 the behavior is the same on python 2.7 and python 3.5\r\n\u2022 the behavior is (unsurprisingly) the same even if use `sys.stdout.write` and `sys.stdout.flush()` instead of `print`, however, if I `write` without a newline, lines are in order.", "reactions": {"url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/507/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/507/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/467", "repository_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit", "labels_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/467/labels{/name}", "comments_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/467/comments", "events_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/467/events", "html_url": "https://github.com/prompt-toolkit/python-prompt-toolkit/pull/467", "id": 207215326, "node_id": "MDExOlB1bGxSZXF1ZXN0MTA1ODkwOTk0", "number": 467, "title": "Fix raw input on SmartOS", "user": {"login": "gmcmanus", "id": 17578, "node_id": "MDQ6VXNlcjE3NTc4", "avatar_url": "https://avatars.githubusercontent.com/u/17578?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gmcmanus", "html_url": "https://github.com/gmcmanus", "followers_url": "https://api.github.com/users/gmcmanus/followers", "following_url": "https://api.github.com/users/gmcmanus/following{/other_user}", "gists_url": "https://api.github.com/users/gmcmanus/gists{/gist_id}", "starred_url": "https://api.github.com/users/gmcmanus/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gmcmanus/subscriptions", "organizations_url": "https://api.github.com/users/gmcmanus/orgs", "repos_url": "https://api.github.com/users/gmcmanus/repos", "events_url": "https://api.github.com/users/gmcmanus/events{/privacy}", "received_events_url": "https://api.github.com/users/gmcmanus/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 76984990, "node_id": "MDU6TGFiZWw3Njk4NDk5MA==", "url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2017-02-13T13:14:57Z", "updated_at": "2017-03-26T16:37:54Z", "closed_at": "2017-03-26T16:37:54Z", "author_association": "NONE", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/pulls/467", "html_url": "https://github.com/prompt-toolkit/python-prompt-toolkit/pull/467", "diff_url": "https://github.com/prompt-toolkit/python-prompt-toolkit/pull/467.diff", "patch_url": "https://github.com/prompt-toolkit/python-prompt-toolkit/pull/467.patch", "merged_at": null}, "body": "I found that on SmartOS (Illumos/Solaris derivative OS), IPython would not echo my input until I had typed 4 characters. I tracked it down to how prompt-toolkit was setting the terminal attributes: it was not setting VMIN (min characters to read). On SmartOS this defaults to 4. On Linux this defaults to 1. Setting it to 1 fixed my problem.\r\n\r\nIt may be worth checking this behaves correctly on Mac OS X - there is a comment that says tty.setraw fails for this OS, and tty.setraw also sets VMIN = 1. Can it be confirmed exactly how tty.setraw fails for Mac OS X? It may be worth just using tty.setraw instead.", "reactions": {"url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/467/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/467/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/460", "repository_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit", "labels_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/460/labels{/name}", "comments_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/460/comments", "events_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/460/events", "html_url": "https://github.com/prompt-toolkit/python-prompt-toolkit/issues/460", "id": 204894476, "node_id": "MDU6SXNzdWUyMDQ4OTQ0NzY=", "number": 460, "title": "Pressing 'v' drops you into the editor mode", "user": {"login": "amjith", "id": 49260, "node_id": "MDQ6VXNlcjQ5MjYw", "avatar_url": "https://avatars.githubusercontent.com/u/49260?v=4", "gravatar_id": "", "url": "https://api.github.com/users/amjith", "html_url": "https://github.com/amjith", "followers_url": "https://api.github.com/users/amjith/followers", "following_url": "https://api.github.com/users/amjith/following{/other_user}", "gists_url": "https://api.github.com/users/amjith/gists{/gist_id}", "starred_url": "https://api.github.com/users/amjith/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/amjith/subscriptions", "organizations_url": "https://api.github.com/users/amjith/orgs", "repos_url": "https://api.github.com/users/amjith/repos", "events_url": "https://api.github.com/users/amjith/events{/privacy}", "received_events_url": "https://api.github.com/users/amjith/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 76984990, "node_id": "MDU6TGFiZWw3Njk4NDk5MA==", "url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2017-02-02T14:47:57Z", "updated_at": "2017-02-03T00:58:01Z", "closed_at": "2017-02-03T00:58:01Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Pressing 'v' drops you into the editor mode.\r\n\r\nSteps to reproduce:\r\n\r\nInstall `ptpython` and latest `prompt_toolkit` (1.0.10). \r\nLaunch `ptpython` and type the letter 'v'.\r\nIt drops you into the `nano` editor instead of inserting the letter `v`.\r\n\r\nPlatform:\r\n\r\nOS X, iTerm2", "reactions": {"url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/460/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/460/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/423", "repository_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit", "labels_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/423/labels{/name}", "comments_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/423/comments", "events_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/423/events", "html_url": "https://github.com/prompt-toolkit/python-prompt-toolkit/issues/423", "id": 191184071, "node_id": "MDU6SXNzdWUxOTExODQwNzE=", "number": 423, "title": "ansi* color names not working in 1.0.9", "user": {"login": "jesaerys", "id": 7390563, "node_id": "MDQ6VXNlcjczOTA1NjM=", "avatar_url": "https://avatars.githubusercontent.com/u/7390563?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jesaerys", "html_url": "https://github.com/jesaerys", "followers_url": "https://api.github.com/users/jesaerys/followers", "following_url": "https://api.github.com/users/jesaerys/following{/other_user}", "gists_url": "https://api.github.com/users/jesaerys/gists{/gist_id}", "starred_url": "https://api.github.com/users/jesaerys/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jesaerys/subscriptions", "organizations_url": "https://api.github.com/users/jesaerys/orgs", "repos_url": "https://api.github.com/users/jesaerys/repos", "events_url": "https://api.github.com/users/jesaerys/events{/privacy}", "received_events_url": "https://api.github.com/users/jesaerys/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 76984990, "node_id": "MDU6TGFiZWw3Njk4NDk5MA==", "url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 8, "created_at": "2016-11-23T03:56:51Z", "updated_at": "2016-11-28T21:04:16Z", "closed_at": "2016-11-28T21:04:16Z", "author_association": "NONE", "active_lock_reason": null, "body": "ANSI color names (e.g., `#ansired`, `#ansiblue`, etc.) don't seem to be working as of version 1.0.9. For example, adding the following to ipython_config.py results in a blue IPython prompt with prompt_toolkit version 1.0.8:\r\n\r\n```python\r\nc.TerminalInteractiveShell.highlighting_style_overrides = {\r\n    Token.Prompt: '#ansiblue', Token.PromptNum: '#ansiblue bold'}\r\n```\r\n\r\nBut in version 1.0.9, the prompt text is just white. Note that hex colors still work as expected.", "reactions": {"url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/423/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/423/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/420", "repository_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit", "labels_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/420/labels{/name}", "comments_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/420/comments", "events_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/420/events", "html_url": "https://github.com/prompt-toolkit/python-prompt-toolkit/issues/420", "id": 189759335, "node_id": "MDU6SXNzdWUxODk3NTkzMzU=", "number": 420, "title": "ControlM detected as ControlJ", "user": {"login": "infokiller", "id": 10516814, "node_id": "MDQ6VXNlcjEwNTE2ODE0", "avatar_url": "https://avatars.githubusercontent.com/u/10516814?v=4", "gravatar_id": "", "url": "https://api.github.com/users/infokiller", "html_url": "https://github.com/infokiller", "followers_url": "https://api.github.com/users/infokiller/followers", "following_url": "https://api.github.com/users/infokiller/following{/other_user}", "gists_url": "https://api.github.com/users/infokiller/gists{/gist_id}", "starred_url": "https://api.github.com/users/infokiller/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/infokiller/subscriptions", "organizations_url": "https://api.github.com/users/infokiller/orgs", "repos_url": "https://api.github.com/users/infokiller/repos", "events_url": "https://api.github.com/users/infokiller/events{/privacy}", "received_events_url": "https://api.github.com/users/infokiller/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 76984990, "node_id": "MDU6TGFiZWw3Njk4NDk5MA==", "url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2016-11-16T16:28:44Z", "updated_at": "2018-05-15T03:43:38Z", "closed_at": "2018-05-15T03:43:38Z", "author_association": "NONE", "active_lock_reason": null, "body": "I'm using Terminator on Linux, and Bash/Zsh successfully differentiate between `Ctrl-J` and `Ctrl-M`. I know that because hitting `Ctrl-V` and then one of these keys prints different things.\r\n\r\nWhen I bind `Ctrl-M` in prompt_toolkit it seems that `Ctrl-J` is also bound to the same action, so I assume that prompt_toolkit doesn't differentiate between them correctly.\r\n\r\nIs there a workaround to this issue?\r\n\r\nMy use case is to map `Ctrl-Enter` to execute the current commands, regardless of the cursor position.\r\n\r\nThanks! ", "reactions": {"url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/420/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/420/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/418", "repository_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit", "labels_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/418/labels{/name}", "comments_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/418/comments", "events_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/418/events", "html_url": "https://github.com/prompt-toolkit/python-prompt-toolkit/pull/418", "id": 188846745, "node_id": "MDExOlB1bGxSZXF1ZXN0OTMzOTUwNDE=", "number": 418, "title": "Fix vt100 colors", "user": {"login": "melund", "id": 1038978, "node_id": "MDQ6VXNlcjEwMzg5Nzg=", "avatar_url": "https://avatars.githubusercontent.com/u/1038978?v=4", "gravatar_id": "", "url": "https://api.github.com/users/melund", "html_url": "https://github.com/melund", "followers_url": "https://api.github.com/users/melund/followers", "following_url": "https://api.github.com/users/melund/following{/other_user}", "gists_url": "https://api.github.com/users/melund/gists{/gist_id}", "starred_url": "https://api.github.com/users/melund/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/melund/subscriptions", "organizations_url": "https://api.github.com/users/melund/orgs", "repos_url": "https://api.github.com/users/melund/repos", "events_url": "https://api.github.com/users/melund/events{/privacy}", "received_events_url": "https://api.github.com/users/melund/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 76984990, "node_id": "MDU6TGFiZWw3Njk4NDk5MA==", "url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2016-11-11T20:43:49Z", "updated_at": "2016-11-12T21:56:22Z", "closed_at": "2016-11-12T21:56:22Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/pulls/418", "html_url": "https://github.com/prompt-toolkit/python-prompt-toolkit/pull/418", "diff_url": "https://github.com/prompt-toolkit/python-prompt-toolkit/pull/418.diff", "patch_url": "https://github.com/prompt-toolkit/python-prompt-toolkit/pull/418.patch", "merged_at": null}, "body": "I found a way to run xonsh/PTK with the VT100 backend on Windows. Works great, and super fast. But I just realized that the mapping from  ansi color names to vt100 codes is completely messed up. Partly my own fault in #408, but I didn't have a way to test it then. \r\n\r\nI do now. So here is a fix and sorry for the trouble. \r\n\r\n\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/418/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/418/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/402", "repository_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit", "labels_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/402/labels{/name}", "comments_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/402/comments", "events_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/402/events", "html_url": "https://github.com/prompt-toolkit/python-prompt-toolkit/issues/402", "id": 181817509, "node_id": "MDU6SXNzdWUxODE4MTc1MDk=", "number": 402, "title": "RuntimeError when autocompleting Flask-SQLAlchemy queries", "user": {"login": "jpvanhal", "id": 250983, "node_id": "MDQ6VXNlcjI1MDk4Mw==", "avatar_url": "https://avatars.githubusercontent.com/u/250983?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jpvanhal", "html_url": "https://github.com/jpvanhal", "followers_url": "https://api.github.com/users/jpvanhal/followers", "following_url": "https://api.github.com/users/jpvanhal/following{/other_user}", "gists_url": "https://api.github.com/users/jpvanhal/gists{/gist_id}", "starred_url": "https://api.github.com/users/jpvanhal/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jpvanhal/subscriptions", "organizations_url": "https://api.github.com/users/jpvanhal/orgs", "repos_url": "https://api.github.com/users/jpvanhal/repos", "events_url": "https://api.github.com/users/jpvanhal/events{/privacy}", "received_events_url": "https://api.github.com/users/jpvanhal/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 76984990, "node_id": "MDU6TGFiZWw3Njk4NDk5MA==", "url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2016-10-08T10:06:17Z", "updated_at": "2018-06-24T11:00:12Z", "closed_at": "2018-06-24T11:00:12Z", "author_association": "NONE", "active_lock_reason": null, "body": "We're using ptpython with [Flask-Konch](https://github.com/sloria/flask-konch), and noticed that the autocompletion crashes whenever ptpython tries to autocomplete Flask-SQLAlchemy queries. \n\nBelow is the minimal code to reproduce the issue in ptpython shell:\n\n``` python\n>>> from flask import Flask\n>>> from flask_sqlalchemy import SQLAlchemy\n>>>\n>>> app = Flask(__name__)\n>>> db = SQLAlchemy()\n>>> db.init_app(app)\n>>>\n>>> class User(db.Model):\n...     __tablename__ = 'users'\n...      id = db.Column(db.Integer, primary_key=True)\n...      email = db.Column(db.Text)\n\n>>> User.query.filter_by(eException in thread Thread-168:\nTraceback (most recent call last):\n  File \"/usr/local/Cellar/python/2.7.12/Frameworks/Python.framework/Versions/2.7/lib/python2.7/threading.py\", line 801, in __bootstrap_inner\n    self.run()\n  File \"/usr/local/Cellar/python/2.7.12/Frameworks/Python.framework/Versions/2.7/lib/python2.7/threading.py\", line 754, in run\n    self.__target(*self.__args, **self.__kwargs)\n  File \"/Users/janne/.virtualenvs/python-prompt-toolkit/lib/python2.7/site-packages/prompt_toolkit/interface.py\", line 836, in run [F2] Menu - CPython 2.7.12\n    completions = list(buffer.completer.get_completions(document, complete_event))\n  File \"/Users/janne/.virtualenvs/python-prompt-toolkit/lib/python2.7/site-packages/ptpython/completer.py\", line 127, in get_completions\n    completions = script.completions()\n  File \"/Users/janne/.virtualenvs/python-prompt-toolkit/lib/python2.7/site-packages/jedi/api/__init__.py\", line 192, in completions\n    for call_sig in self.call_signatures():\n  File \"/Users/janne/.virtualenvs/python-prompt-toolkit/lib/python2.7/site-packages/jedi/api/__init__.py\", line 521, in call_signatures\n    self.source, self._pos)\n  File \"/Users/janne/.virtualenvs/python-prompt-toolkit/lib/python2.7/site-packages/jedi/cache.py\", line 93, in wrapper\n    value = next(generator)\n  File \"/Users/janne/.virtualenvs/python-prompt-toolkit/lib/python2.7/site-packages/jedi/cache.py\", line 115, in cache_call_signatures\n    yield evaluator.eval_element(call)\n  File \"/Users/janne/.virtualenvs/python-prompt-toolkit/lib/python2.7/site-packages/jedi/evaluate/cache.py\", line 41, in wrapper\n    rv = function(obj, *args, **kwargs)\n  File \"/Users/janne/.virtualenvs/python-prompt-toolkit/lib/python2.7/site-packages/jedi/evaluate/__init__.py\", line 187, in eval_element\n    types = self.eval_trailer(types, trailer)\n  File \"/Users/janne/.virtualenvs/python-prompt-toolkit/lib/python2.7/site-packages/jedi/evaluate/__init__.py\", line 257, in eval_trailer\n    new_types += self.find_types(typ, node)\n  File \"/Users/janne/.virtualenvs/python-prompt-toolkit/lib/python2.7/site-packages/jedi/evaluate/__init__.py\", line 120, in find_types\n    return f.find(scopes, search_global)\n  File \"/Users/janne/.virtualenvs/python-prompt-toolkit/lib/python2.7/site-packages/jedi/debug.py\", line 52, in wrapper\n    result = func(*args, **kwargs)\n  File \"/Users/janne/.virtualenvs/python-prompt-toolkit/lib/python2.7/site-packages/jedi/evaluate/finder.py\", line 86, in find\n    names = self.filter_name(scopes)\n  File \"/Users/janne/.virtualenvs/python-prompt-toolkit/lib/python2.7/site-packages/jedi/evaluate/finder.py\", line 177, in filter_name\n    names = self.names_dict_lookup(names_dict, position)\n  File \"/Users/janne/.virtualenvs/python-prompt-toolkit/lib/python2.7/site-packages/jedi/evaluate/finder.py\", line 119, in names_dict_lookup\n    names = names_dict[search_str]\n  File \"/Users/janne/.virtualenvs/python-prompt-toolkit/lib/python2.7/site-packages/jedi/cache.py\", line 160, in wrapper\n    result = method(self, *args, **kwargs)\n  File \"/Users/janne/.virtualenvs/python-prompt-toolkit/lib/python2.7/site-packages/jedi/evaluate/compiled/__init__.py\", line 263, in __getitem__\n    getattr(self._compiled_obj.obj, name)\n  File \"/Users/janne/.virtualenvs/python-prompt-toolkit/lib/python2.7/site-packages/flask_sqlalchemy/__init__.py\", line 500, in __get__\n    return type.query_class(mapper, session=self.sa.session())\n  File \"/Users/janne/.virtualenvs/python-prompt-toolkit/lib/python2.7/site-packages/sqlalchemy/orm/scoping.py\", line 78, in __call__\n    return self.registry()\n  File \"/Users/janne/.virtualenvs/python-prompt-toolkit/lib/python2.7/site-packages/sqlalchemy/util/_collections.py\", line 990, in __call__\n    return self.registry.setdefault(key, self.createfunc())\n  File \"/Users/janne/.virtualenvs/python-prompt-toolkit/lib/python2.7/site-packages/flask_sqlalchemy/__init__.py\", line 771, in create_session\n    return SignallingSession(self, **options)\n  File \"/Users/janne/.virtualenvs/python-prompt-toolkit/lib/python2.7/site-packages/flask_sqlalchemy/__init__.py\", line 153, in __init__\n    self.app = app = db.get_app()\n  File \"/Users/janne/.virtualenvs/python-prompt-toolkit/lib/python2.7/site-packages/flask_sqlalchemy/__init__.py\", line 922, in get_app\n    raise RuntimeError('application not registered on db '\nRuntimeError: application not registered on db instance and no application bound to current context\n```\n\nThe same thing happens also even if there's an application context:\n\n``` python\n>>> ctx = app.app_context()\n>>> ctx.push()\n>>> User.query.filter_by(eException in thread Thread-407:\nTraceback (most recent call last):\n  File \"/usr/local/Cellar/python/2.7.12/Frameworks/Python.framework/Versions/2.7/lib/python2.7/threading.py\", line 801, in __bootstrap_inner\n    self.run()\n  File \"/usr/local/Cellar/python/2.7.12/Frameworks/Python.framework/Versions/2.7/lib/python2.7/threading.py\", line 754, in run\n    self.__target(*self.__args, **self.__kwargs)\n  File \"/Users/janne/.virtualenvs/python-prompt-toolkit/lib/python2.7/site-packages/prompt_toolkit/interface.py\", line 836, in run [F2] Menu - CPython 2.7.12\n    completions = list(buffer.completer.get_completions(document, complete_event))\n  File \"/Users/janne/.virtualenvs/python-prompt-toolkit/lib/python2.7/site-packages/ptpython/completer.py\", line 127, in get_completions\n    completions = script.completions()\n  File \"/Users/janne/.virtualenvs/python-prompt-toolkit/lib/python2.7/site-packages/jedi/api/__init__.py\", line 192, in completions\n    for call_sig in self.call_signatures():\n  File \"/Users/janne/.virtualenvs/python-prompt-toolkit/lib/python2.7/site-packages/jedi/api/__init__.py\", line 521, in call_signatures\n    self.source, self._pos)\n  File \"/Users/janne/.virtualenvs/python-prompt-toolkit/lib/python2.7/site-packages/jedi/cache.py\", line 93, in wrapper\n    value = next(generator)\n  File \"/Users/janne/.virtualenvs/python-prompt-toolkit/lib/python2.7/site-packages/jedi/cache.py\", line 115, in cache_call_signatures\n    yield evaluator.eval_element(call)\n  File \"/Users/janne/.virtualenvs/python-prompt-toolkit/lib/python2.7/site-packages/jedi/evaluate/cache.py\", line 41, in wrapper\n    rv = function(obj, *args, **kwargs)\n  File \"/Users/janne/.virtualenvs/python-prompt-toolkit/lib/python2.7/site-packages/jedi/evaluate/__init__.py\", line 187, in eval_element\n    types = self.eval_trailer(types, trailer)\n  File \"/Users/janne/.virtualenvs/python-prompt-toolkit/lib/python2.7/site-packages/jedi/evaluate/__init__.py\", line 257, in eval_trailer\n    new_types += self.find_types(typ, node)\n  File \"/Users/janne/.virtualenvs/python-prompt-toolkit/lib/python2.7/site-packages/jedi/evaluate/__init__.py\", line 120, in find_types\n    return f.find(scopes, search_global)\n  File \"/Users/janne/.virtualenvs/python-prompt-toolkit/lib/python2.7/site-packages/jedi/debug.py\", line 52, in wrapper\n    result = func(*args, **kwargs)\n  File \"/Users/janne/.virtualenvs/python-prompt-toolkit/lib/python2.7/site-packages/jedi/evaluate/finder.py\", line 86, in find\n    names = self.filter_name(scopes)\n  File \"/Users/janne/.virtualenvs/python-prompt-toolkit/lib/python2.7/site-packages/jedi/evaluate/finder.py\", line 177, in filter_name\n    names = self.names_dict_lookup(names_dict, position)\n  File \"/Users/janne/.virtualenvs/python-prompt-toolkit/lib/python2.7/site-packages/jedi/evaluate/finder.py\", line 119, in names_dict_lookup\n    names = names_dict[search_str]\n  File \"/Users/janne/.virtualenvs/python-prompt-toolkit/lib/python2.7/site-packages/jedi/cache.py\", line 160, in wrapper\n    result = method(self, *args, **kwargs)\n  File \"/Users/janne/.virtualenvs/python-prompt-toolkit/lib/python2.7/site-packages/jedi/evaluate/compiled/__init__.py\", line 263, in __getitem__\n    getattr(self._compiled_obj.obj, name)\n  File \"/Users/janne/.virtualenvs/python-prompt-toolkit/lib/python2.7/site-packages/flask_sqlalchemy/__init__.py\", line 500, in __get__\n    return type.query_class(mapper, session=self.sa.session())\n  File \"/Users/janne/.virtualenvs/python-prompt-toolkit/lib/python2.7/site-packages/sqlalchemy/orm/scoping.py\", line 78, in __call__\n    return self.registry()\n  File \"/Users/janne/.virtualenvs/python-prompt-toolkit/lib/python2.7/site-packages/sqlalchemy/util/_collections.py\", line 990, in __call__\n    return self.registry.setdefault(key, self.createfunc())\n  File \"/Users/janne/.virtualenvs/python-prompt-toolkit/lib/python2.7/site-packages/flask_sqlalchemy/__init__.py\", line 771, in create_session\n    return SignallingSession(self, **options)\n  File \"/Users/janne/.virtualenvs/python-prompt-toolkit/lib/python2.7/site-packages/flask_sqlalchemy/__init__.py\", line 153, in __init__\n    self.app = app = db.get_app()\n  File \"/Users/janne/.virtualenvs/python-prompt-toolkit/lib/python2.7/site-packages/flask_sqlalchemy/__init__.py\", line 922, in get_app\n    raise RuntimeError('application not registered on db '\nRuntimeError: application not registered on db instance and no application bound to current context\n```\n\nThat's probably because python-prompt-toolkit seems to use a different thread for the autocompletion, and Flask's app context is bound to the thread it was created in.\n", "reactions": {"url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/402/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/402/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/391", "repository_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit", "labels_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/391/labels{/name}", "comments_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/391/comments", "events_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/391/events", "html_url": "https://github.com/prompt-toolkit/python-prompt-toolkit/issues/391", "id": 176197310, "node_id": "MDU6SXNzdWUxNzYxOTczMTA=", "number": 391, "title": "BrokenPipeError/OSError", "user": {"login": "ghost", "id": 10137, "node_id": "MDQ6VXNlcjEwMTM3", "avatar_url": "https://avatars.githubusercontent.com/u/10137?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ghost", "html_url": "https://github.com/ghost", "followers_url": "https://api.github.com/users/ghost/followers", "following_url": "https://api.github.com/users/ghost/following{/other_user}", "gists_url": "https://api.github.com/users/ghost/gists{/gist_id}", "starred_url": "https://api.github.com/users/ghost/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ghost/subscriptions", "organizations_url": "https://api.github.com/users/ghost/orgs", "repos_url": "https://api.github.com/users/ghost/repos", "events_url": "https://api.github.com/users/ghost/events{/privacy}", "received_events_url": "https://api.github.com/users/ghost/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 76984990, "node_id": "MDU6TGFiZWw3Njk4NDk5MA==", "url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2016-09-10T19:15:37Z", "updated_at": "2016-11-19T10:32:24Z", "closed_at": "2016-11-19T10:32:24Z", "author_association": "NONE", "active_lock_reason": null, "body": "one out of 3-4 times on [xonsh](https://github.com/xonsh/xonsh) startup with ptk i'm getting \n\n```\nTraceback (most recent call last):\n  File \"/home/laerus/projects/xonsh/xonsh/ptk/shortcuts.py\", line 108, in prompt\n    document = cli.run(reset_current_buffer=False)\n  File \"/home/laerus/.local/lib/python3.5/site-packages/prompt_toolkit/interface.py\", line 389, in run\n    self.eventloop.run(self.input, self.create_eventloop_callbacks())\n  File \"/home/laerus/.local/lib/python3.5/site-packages/prompt_toolkit/eventloop/posix.py\", line 153, in run\n    t()\n  File \"/home/laerus/.local/lib/python3.5/site-packages/prompt_toolkit/eventloop/posix.py\", line 81, in read_from_stdin\n    inputstream.feed(data)\n  File \"/home/laerus/.local/lib/python3.5/site-packages/prompt_toolkit/terminal/vt100_input.py\", line 390, in feed\n    self._input_parser.send(c)\n  File \"/home/laerus/.local/lib/python3.5/site-packages/prompt_toolkit/terminal/vt100_input.py\", line 299, in _input_parser_generator\n    self._call_handler(match, prefix)\n  File \"/home/laerus/.local/lib/python3.5/site-packages/prompt_toolkit/terminal/vt100_input.py\", line 332, in _call_handler\n    self.feed_key_callback(KeyPress(key, insert_text))\n  File \"/home/laerus/.local/lib/python3.5/site-packages/prompt_toolkit/interface.py\", line 1019, in feed_key\n    cli.input_processor.process_keys()\n  File \"/home/laerus/.local/lib/python3.5/site-packages/prompt_toolkit/key_binding/input_processor.py\", line 209, in process_keys\n    cli.invalidate()\n  File \"/home/laerus/.local/lib/python3.5/site-packages/prompt_toolkit/interface.py\", line 333, in invalidate\n    self.eventloop.call_from_executor(redraw, _max_postpone_until=_max_postpone_until)\n  File \"/home/laerus/.local/lib/python3.5/site-packages/prompt_toolkit/eventloop/posix.py\", line 236, in call_from_executor\n    os.write(self._schedule_pipe[1], b'x')\nBrokenPipeError: [Errno 32] Broken pipe\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"/home/laerus/.local/bin/xonsh\", line 6, in <module>\n    exec(compile(open(__file__).read(), __file__, 'exec'))\n  File \"/home/laerus/projects/xonsh/scripts/xonsh\", line 3, in <module>\n    main()\n  File \"/home/laerus/projects/xonsh/xonsh/main.py\", line 221, in main\n    shell.shell.cmdloop()\n  File \"/home/laerus/projects/xonsh/xonsh/ptk/shell.py\", line 114, in cmdloop\n    line = self.singleline(auto_suggest=auto_suggest)\n  File \"/home/laerus/projects/xonsh/xonsh/ptk/shell.py\", line 83, in singleline\n    line = self.prompter.prompt(**prompt_args)\n  File \"/home/laerus/projects/xonsh/xonsh/ptk/shortcuts.py\", line 113, in prompt\n    eventloop.close()\n  File \"/home/laerus/.local/lib/python3.5/site-packages/prompt_toolkit/eventloop/posix.py\", line 252, in close\n    os.close(schedule_pipe[0])\nOSError: [Errno 9] Bad file descriptor\n```\n\n[xonsh issue  #1710](https://github.com/xonsh/xonsh/issues/1710#issue-176180691)\n\nany idea why this is happening?\n\non latest PyPI version `prompt-toolkit==1.0.7`\n", "reactions": {"url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/391/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/391/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/389", "repository_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit", "labels_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/389/labels{/name}", "comments_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/389/comments", "events_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/389/events", "html_url": "https://github.com/prompt-toolkit/python-prompt-toolkit/issues/389", "id": 174684783, "node_id": "MDU6SXNzdWUxNzQ2ODQ3ODM=", "number": 389, "title": "get_input won't respond to some Chinese characters.", "user": {"login": "deangl", "id": 12607057, "node_id": "MDQ6VXNlcjEyNjA3MDU3", "avatar_url": "https://avatars.githubusercontent.com/u/12607057?v=4", "gravatar_id": "", "url": "https://api.github.com/users/deangl", "html_url": "https://github.com/deangl", "followers_url": "https://api.github.com/users/deangl/followers", "following_url": "https://api.github.com/users/deangl/following{/other_user}", "gists_url": "https://api.github.com/users/deangl/gists{/gist_id}", "starred_url": "https://api.github.com/users/deangl/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/deangl/subscriptions", "organizations_url": "https://api.github.com/users/deangl/orgs", "repos_url": "https://api.github.com/users/deangl/repos", "events_url": "https://api.github.com/users/deangl/events{/privacy}", "received_events_url": "https://api.github.com/users/deangl/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 76984990, "node_id": "MDU6TGFiZWw3Njk4NDk5MA==", "url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 8, "created_at": "2016-09-02T05:41:39Z", "updated_at": "2016-10-24T18:20:08Z", "closed_at": "2016-10-24T18:20:08Z", "author_association": "NONE", "active_lock_reason": null, "body": "Simply use a example in windows, \n\n``` python\nfrom prompt_toolkit.shortcuts import get_input\n\nif __name__ == '__main__':\n    answer = get_input('Give me some input: ')\n    print('You said: %s' % answer)\n```\n\nWhen I try to input characters like '\u5f00', It dose not respond.\n", "reactions": {"url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/389/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/389/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/384", "repository_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit", "labels_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/384/labels{/name}", "comments_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/384/comments", "events_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/384/events", "html_url": "https://github.com/prompt-toolkit/python-prompt-toolkit/issues/384", "id": 172302188, "node_id": "MDU6SXNzdWUxNzIzMDIxODg=", "number": 384, "title": "Corrupted completion while one candidate is prefix of another", "user": {"login": "blahgeek", "id": 1308450, "node_id": "MDQ6VXNlcjEzMDg0NTA=", "avatar_url": "https://avatars.githubusercontent.com/u/1308450?v=4", "gravatar_id": "", "url": "https://api.github.com/users/blahgeek", "html_url": "https://github.com/blahgeek", "followers_url": "https://api.github.com/users/blahgeek/followers", "following_url": "https://api.github.com/users/blahgeek/following{/other_user}", "gists_url": "https://api.github.com/users/blahgeek/gists{/gist_id}", "starred_url": "https://api.github.com/users/blahgeek/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/blahgeek/subscriptions", "organizations_url": "https://api.github.com/users/blahgeek/orgs", "repos_url": "https://api.github.com/users/blahgeek/repos", "events_url": "https://api.github.com/users/blahgeek/events{/privacy}", "received_events_url": "https://api.github.com/users/blahgeek/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 76984990, "node_id": "MDU6TGFiZWw3Njk4NDk5MA==", "url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2016-08-21T03:12:52Z", "updated_at": "2016-08-23T16:36:50Z", "closed_at": "2016-08-23T16:08:42Z", "author_association": "NONE", "active_lock_reason": null, "body": "try this code:\n\n```\nfrom prompt_toolkit.contrib.completers import WordCompleter\nfrom prompt_toolkit import prompt\n\nanimal_completer = WordCompleter([ 'cat', 'cat_and_dog', ])\n\nif __name__ == '__main__':\n    text = prompt('Give some animals: ', completer=animal_completer,\n                  complete_while_typing=False)\n    print('You said: %s' % text)\n```\n\nType `c`, then two `<TAB>`, the result is `catat`, not expected `cat`.\n", "reactions": {"url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/384/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/384/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/383", "repository_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit", "labels_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/383/labels{/name}", "comments_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/383/comments", "events_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/383/events", "html_url": "https://github.com/prompt-toolkit/python-prompt-toolkit/issues/383", "id": 171876419, "node_id": "MDU6SXNzdWUxNzE4NzY0MTk=", "number": 383, "title": "wheel package issue", "user": {"login": "davidszotten", "id": 412005, "node_id": "MDQ6VXNlcjQxMjAwNQ==", "avatar_url": "https://avatars.githubusercontent.com/u/412005?v=4", "gravatar_id": "", "url": "https://api.github.com/users/davidszotten", "html_url": "https://github.com/davidszotten", "followers_url": "https://api.github.com/users/davidszotten/followers", "following_url": "https://api.github.com/users/davidszotten/following{/other_user}", "gists_url": "https://api.github.com/users/davidszotten/gists{/gist_id}", "starred_url": "https://api.github.com/users/davidszotten/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/davidszotten/subscriptions", "organizations_url": "https://api.github.com/users/davidszotten/orgs", "repos_url": "https://api.github.com/users/davidszotten/repos", "events_url": "https://api.github.com/users/davidszotten/events{/privacy}", "received_events_url": "https://api.github.com/users/davidszotten/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 76984990, "node_id": "MDU6TGFiZWw3Njk4NDk5MA==", "url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2016-08-18T11:11:03Z", "updated_at": "2016-08-22T14:00:46Z", "closed_at": "2016-08-22T14:00:46Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Hi,\n\nIt looks like something may have gone wrong during the building of the wheels (at least for the latest version, 1.0.6, which is the only one i've checked)\n\nthe wheel seems to include modules with the same name as a bunch of (sub-)packages, e.g.\n\n`prompt_toolkit/styles.py` next to `prompt_toolkit/styles/*`\n\nthis mostly works since packages win during regular import, but it confuses e.g. pytest assertion re-writing (c.f. #375) and of course doesn't match the source or the source distro\n", "reactions": {"url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/383/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/383/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/369", "repository_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit", "labels_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/369/labels{/name}", "comments_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/369/comments", "events_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/369/events", "html_url": "https://github.com/prompt-toolkit/python-prompt-toolkit/issues/369", "id": 169950368, "node_id": "MDU6SXNzdWUxNjk5NTAzNjg=", "number": 369, "title": "IndexError in IPython", "user": {"login": "amancevice", "id": 157711, "node_id": "MDQ6VXNlcjE1NzcxMQ==", "avatar_url": "https://avatars.githubusercontent.com/u/157711?v=4", "gravatar_id": "", "url": "https://api.github.com/users/amancevice", "html_url": "https://github.com/amancevice", "followers_url": "https://api.github.com/users/amancevice/followers", "following_url": "https://api.github.com/users/amancevice/following{/other_user}", "gists_url": "https://api.github.com/users/amancevice/gists{/gist_id}", "starred_url": "https://api.github.com/users/amancevice/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/amancevice/subscriptions", "organizations_url": "https://api.github.com/users/amancevice/orgs", "repos_url": "https://api.github.com/users/amancevice/repos", "events_url": "https://api.github.com/users/amancevice/events{/privacy}", "received_events_url": "https://api.github.com/users/amancevice/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 76984990, "node_id": "MDU6TGFiZWw3Njk4NDk5MA==", "url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2016-08-08T15:24:09Z", "updated_at": "2016-08-15T17:46:53Z", "closed_at": "2016-08-15T17:37:42Z", "author_association": "NONE", "active_lock_reason": null, "body": "I am getting an IndexError when using IPython, specifically revolving around multi-line input. The issue seems to appear in versions >= 1.0.4.\n\nTo reproduce the issue, clear your IPython history (I did this by clobbering `~/.ipython`, open IPython, and paste the following example lines into the prompt:\n\n``` python\n# This is an example\nimport os\nprint(os.getenv('USER'))\n```\n\nExit IPython, re-open, and enable verbose crash mode by typing:\n\n``` python\n%config Application.verbose_crash=True\n```\n\nPress the up-arrow twice and see the following error:\n\n``` noformat\n---------------------------------------------------------------------------\n---------------------------------------------------------------------------\nIndexError               Python 2.7.12: /usr/local/opt/python/bin/python2.7\n                                                   Mon Aug  8 11:23:28 2016\nA problem occurred executing Python code.  Here is the sequence of function\ncalls leading up to the error, with the most recent (innermost) call last.\n/usr/local/bin/ipython in <module>()\n      1 #!/usr/local/opt/python/bin/python2.7\n      2 \n      3 # -*- coding: utf-8 -*-\n      4 import re\n      5 import sys\n      6 \n      7 from IPython import start_ipython\n      8 \n      9 if __name__ == '__main__':\n     10     sys.argv[0] = re.sub(r'(-script\\.pyw|\\.exe)?$', '', sys.argv[0])\n---> 11     sys.exit(start_ipython())\n        global sys.exit = <built-in function exit>\n        global start_ipython = <function start_ipython at 0x10f6f4ed8>\n\n/usr/local/lib/python2.7/site-packages/IPython/__init__.pyc in start_ipython(argv=None, **kwargs={})\n    104     This is a public API method, and will survive implementation changes.\n    105     \n    106     Parameters\n    107     ----------\n    108     \n    109     argv : list or None, optional\n    110         If unspecified or None, IPython will parse command-line options from sys.argv.\n    111         To prevent any command-line parsing, pass an empty list: `argv=[]`.\n    112     user_ns : dict, optional\n    113         specify this dictionary to initialize the IPython user namespace with particular values.\n    114     kwargs : various, optional\n    115         Any other kwargs will be passed to the Application constructor,\n    116         such as `config`.\n    117     \"\"\"\n    118     from IPython.terminal.ipapp import launch_new_instance\n--> 119     return launch_new_instance(argv=argv, **kwargs)\n        launch_new_instance = <bound method MetaHasTraits.launch_instance of <class 'IPython.terminal.ipapp.TerminalIPythonApp'>>\n        argv = None\n        kwargs = {}\n    120 \n    121 def start_kernel(argv=None, **kwargs):\n    122     \"\"\"Launch a normal IPython kernel instance (as opposed to embedded)\n    123     \n    124     `IPython.embed_kernel()` puts a shell in a particular calling scope,\n    125     such as a function or method for debugging purposes,\n    126     which is often not desirable.\n    127     \n    128     `start_kernel()` does full, regular IPython initialization,\n    129     including loading startup files, configuration, etc.\n    130     much of which is skipped by `embed()`.\n    131     \n    132     Parameters\n    133     ----------\n    134     \n\n/usr/local/lib/python2.7/site-packages/traitlets/config/application.pyc in launch_instance(cls=<class 'IPython.terminal.ipapp.TerminalIPythonApp'>, argv=None, **kwargs={})\n    581         return '\\n'.join(lines)\n    582 \n    583     def exit(self, exit_status=0):\n    584         self.log.debug(\"Exiting application: %s\" % self.name)\n    585         logging.shutdown()\n    586         sys.exit(exit_status)\n    587 \n    588     @classmethod\n    589     def launch_instance(cls, argv=None, **kwargs):\n    590         \"\"\"Launch a global instance of this Application\n    591         \n    592         If a global instance already exists, this reinitializes and starts it\n    593         \"\"\"\n    594         app = cls.instance(**kwargs)\n    595         app.initialize(argv)\n--> 596         app.start()\n        app.start = <bound method TerminalIPythonApp.start of <IPython.terminal.ipapp.TerminalIPythonApp object at 0x10e5df690>>\n    597 \n    598 #-----------------------------------------------------------------------------\n    599 # utility functions, for convenience\n    600 #-----------------------------------------------------------------------------\n    601 \n    602 def boolean_flag(name, configurable, set_help='', unset_help=''):\n    603     \"\"\"Helper for building basic --trait, --no-trait flags.\n    604 \n    605     Parameters\n    606     ----------\n    607 \n    608     name : str\n    609         The name of the flag.\n    610     configurable : str\n    611         The 'Class.trait' string of the trait to be set/unset with the flag\n\n/usr/local/lib/python2.7/site-packages/IPython/terminal/ipapp.pyc in start(self=<IPython.terminal.ipapp.TerminalIPythonApp object>)\n    333         if self.log_level <= logging.INFO: print()\n    334 \n    335     def _pylab_changed(self, name, old, new):\n    336         \"\"\"Replace --pylab='inline' with --pylab='auto'\"\"\"\n    337         if new == 'inline':\n    338             warnings.warn(\"'inline' not available as pylab backend, \"\n    339                       \"using 'auto' instead.\")\n    340             self.pylab = 'auto'\n    341 \n    342     def start(self):\n    343         if self.subapp is not None:\n    344             return self.subapp.start()\n    345         # perform any prexec steps:\n    346         if self.interact:\n    347             self.log.debug(\"Starting IPython's mainloop...\")\n--> 348             self.shell.mainloop()\n        self.shell.mainloop = <bound method TerminalInteractiveShell.mainloop of <IPython.terminal.interactiveshell.TerminalInteractiveShell object at 0x10f709e50>>\n    349         else:\n    350             self.log.debug(\"IPython not interactive...\")\n    351 \n    352 def load_default_config(ipython_dir=None):\n    353     \"\"\"Load the default config file from the default ipython_dir.\n    354 \n    355     This is useful for embedded shells.\n    356     \"\"\"\n    357     if ipython_dir is None:\n    358         ipython_dir = get_ipython_dir()\n    359 \n    360     profile_dir = os.path.join(ipython_dir, 'profile_default')\n    361 \n    362     config = Config()\n    363     for cf in Application._load_config_files(\"ipython_config\", path=profile_dir):\n\n/usr/local/lib/python2.7/site-packages/IPython/terminal/interactiveshell.pyc in mainloop(self=<IPython.terminal.interactiveshell.TerminalInteractiveShell object>, display_banner=<object object>)\n    387                 if (not self.confirm_exit) \\\n    388                         or self.ask_yes_no('Do you really want to exit ([y]/n)?','y','n'):\n    389                     self.ask_exit()\n    390 \n    391             else:\n    392                 if code:\n    393                     self.run_cell(code, store_history=True)\n    394 \n    395     def mainloop(self, display_banner=DISPLAY_BANNER_DEPRECATED):\n    396         # An extra layer of protection in case someone mashing Ctrl-C breaks\n    397         # out of our internal code.\n    398         if display_banner is not DISPLAY_BANNER_DEPRECATED:\n    399             warn('mainloop `display_banner` argument is deprecated since IPython 5.0. Call `show_banner()` if needed.', DeprecationWarning, stacklevel=2)\n    400         while True:\n    401             try:\n--> 402                 self.interact()\n        self.interact = <bound method TerminalInteractiveShell.interact of <IPython.terminal.interactiveshell.TerminalInteractiveShell object at 0x10f709e50>>\n    403                 break\n    404             except KeyboardInterrupt:\n    405                 print(\"\\nKeyboardInterrupt escaped interact()\\n\")\n    406         \n    407         if hasattr(self, '_eventloop'):\n    408             self._eventloop.close()\n    409 \n    410     _inputhook = None\n    411     def inputhook(self, context):\n    412         if self._inputhook is not None:\n    413             self._inputhook(context)\n    414 \n    415     def enable_gui(self, gui=None):\n    416         if gui:\n    417             self._inputhook = get_inputhook_func(gui)\n\n/usr/local/lib/python2.7/site-packages/IPython/terminal/interactiveshell.pyc in interact(self=<IPython.terminal.interactiveshell.TerminalInteractiveShell object>, display_banner=<object object>)\n    370 \n    371     def pre_prompt(self):\n    372         if self.rl_next_input:\n    373             self.pt_cli.application.buffer.text = cast_unicode_py2(self.rl_next_input)\n    374             self.rl_next_input = None\n    375 \n    376     def interact(self, display_banner=DISPLAY_BANNER_DEPRECATED):\n    377 \n    378         if display_banner is not DISPLAY_BANNER_DEPRECATED:\n    379             warn('interact `display_banner` argument is deprecated since IPython 5.0. Call `show_banner()` if needed.', DeprecationWarning, stacklevel=2)\n    380 \n    381         while self.keep_running:\n    382             print(self.separate_in, end='')\n    383 \n    384             try:\n--> 385                 code = self.prompt_for_code()\n        code = u'%config Application.verbose_crash=True'\n        self.prompt_for_code = <bound method TerminalInteractiveShell.prompt_for_code of <IPython.terminal.interactiveshell.TerminalInteractiveShell object at 0x10f709e50>>\n    386             except EOFError:\n    387                 if (not self.confirm_exit) \\\n    388                         or self.ask_yes_no('Do you really want to exit ([y]/n)?','y','n'):\n    389                     self.ask_exit()\n    390 \n    391             else:\n    392                 if code:\n    393                     self.run_cell(code, store_history=True)\n    394 \n    395     def mainloop(self, display_banner=DISPLAY_BANNER_DEPRECATED):\n    396         # An extra layer of protection in case someone mashing Ctrl-C breaks\n    397         # out of our internal code.\n    398         if display_banner is not DISPLAY_BANNER_DEPRECATED:\n    399             warn('mainloop `display_banner` argument is deprecated since IPython 5.0. Call `show_banner()` if needed.', DeprecationWarning, stacklevel=2)\n    400         while True:\n\n/usr/local/lib/python2.7/site-packages/IPython/terminal/interactiveshell.pyc in prompt_for_code(self=<IPython.terminal.interactiveshell.TerminalInteractiveShell object>)\n    306                         processor=HighlightMatchingBracketProcessor(chars='[](){}'),\n    307                         filter=HasFocus(DEFAULT_BUFFER) & ~IsDone() &\n    308                             Condition(lambda cli: self.highlight_matching_brackets))],\n    309                 }\n    310 \n    311     def _update_layout(self):\n    312         \"\"\"\n    313         Ask for a re computation of the application layout, if for example ,\n    314         some configuration options have changed.\n    315         \"\"\"\n    316         if self._pt_app:\n    317             self._pt_app.layout = create_prompt_layout(**self._layout_options())\n    318 \n    319     def prompt_for_code(self):\n    320         document = self.pt_cli.run(\n--> 321             pre_run=self.pre_prompt, reset_current_buffer=True)\n        global pre_run = undefined\n        self.pre_prompt = <bound method TerminalInteractiveShell.pre_prompt of <IPython.terminal.interactiveshell.TerminalInteractiveShell object at 0x10f709e50>>\n        global reset_current_buffer = undefined\n        global True = undefined\n    322         return document.text\n    323 \n    324     def init_io(self):\n    325         if sys.platform not in {'win32', 'cli'}:\n    326             return\n    327 \n    328         import win_unicode_console\n    329         import colorama\n    330 \n    331         win_unicode_console.enable()\n    332         colorama.init()\n    333 \n    334         # For some reason we make these wrappers around stdout/stderr.\n    335         # For now, we need to reset them so all output gets coloured.\n    336         # https://github.com/ipython/ipython/issues/8669\n\n/usr/local/lib/python2.7/site-packages/prompt_toolkit/interface.pyc in run(self=<prompt_toolkit.interface.CommandLineInterface object>, reset_current_buffer=True, pre_run=<bound method TerminalInteractiveShell.pre_promp...nteractiveshell.TerminalInteractiveShell object>>)\n    374         try:\n    375             self._is_running = True\n    376 \n    377             self.on_start.fire()\n    378             self.reset(reset_current_buffer=reset_current_buffer)\n    379 \n    380             # Call pre_run.\n    381             if pre_run:\n    382                 pre_run()\n    383 \n    384             # Run eventloop in raw mode.\n    385             with self.input.raw_mode():\n    386                 self.renderer.request_absolute_cursor_position()\n    387                 self._redraw()\n    388 \n--> 389                 self.eventloop.run(self.input, self.create_eventloop_callbacks())\n        self.eventloop.run = <bound method PosixEventLoop.run of <prompt_toolkit.eventloop.posix.PosixEventLoop object at 0x10f994b50>>\n        self.input = StdinInput(stdin=<open file '<stdin>', mode 'r' at 0x10e4c10c0>)\n        self.create_eventloop_callbacks = <bound method CommandLineInterface.create_eventloop_callbacks of <prompt_toolkit.interface.CommandLineInterface object at 0x10f9948d0>>\n    390         finally:\n    391             # Clean up renderer. (This will leave the alternate screen, if we use\n    392             # that.)\n    393 \n    394             # If exit/abort haven't been called set, but another exception was\n    395             # thrown instead for some reason, make sure that we redraw in exit\n    396             # mode.\n    397             if not self.is_done:\n    398                 self._exit_flag = True\n    399                 self._redraw()\n    400 \n    401             self.renderer.reset()\n    402             self.on_stop.fire()\n    403             self._is_running = False\n    404 \n\n/usr/local/lib/python2.7/site-packages/prompt_toolkit/eventloop/posix.pyc in run(self=<prompt_toolkit.eventloop.posix.PosixEventLoop object>, stdin=StdinInput(stdin=<open file '<stdin>', mode 'r' at 0x10e4c10c0>), callbacks=<prompt_toolkit.interface._InterfaceEventLoopCallbacks object>)\n    138                             # Flush all the pipe content.\n    139                             os.read(self._schedule_pipe[0], 1024)\n    140                         else:\n    141                             handler = self._read_fds.get(fd)\n    142                             if handler:\n    143                                 tasks.append(handler)\n    144 \n    145                     # Handle everything in random order. (To avoid starvation.)\n    146                     random.shuffle(tasks)\n    147                     random.shuffle(low_priority_tasks)\n    148 \n    149                     # When there are high priority tasks, run all these.\n    150                     # Schedule low priority tasks for the next iteration.\n    151                     if tasks:\n    152                         for t in tasks:\n--> 153                             t()\n        t = <function redraw at 0x10f9c40c8>\n    154 \n    155                         # Postpone low priority tasks.\n    156                         for t, max_postpone_until in low_priority_tasks:\n    157                             self.call_from_executor(t, _max_postpone_until=max_postpone_until)\n    158                     else:\n    159                         # Currently there are only low priority tasks -> run them right now.\n    160                         for t, _ in low_priority_tasks:\n    161                             t()\n    162 \n    163                 else:\n    164                     # Flush all pending keys on a timeout. (This is most\n    165                     # important to flush the vt100 'Escape' key early when\n    166                     # nothing else follows.)\n    167                     inputstream.flush()\n    168 \n\n/usr/local/lib/python2.7/site-packages/prompt_toolkit/interface.pyc in redraw()\n    311         \"\"\"\n    312         # Never schedule a second redraw, when a previous one has not yet been\n    313         # executed. (This should protect against other threads calling\n    314         # 'invalidate' many times, resulting in 100% CPU.)\n    315         if self._invalidated:\n    316             return\n    317         else:\n    318             self._invalidated = True\n    319 \n    320         # Trigger event.\n    321         self.on_invalidate.fire()\n    322 \n    323         if self.eventloop is not None:\n    324             def redraw():\n    325                 self._invalidated = False\n--> 326                 self._redraw()\n        global self._redraw = undefined\n    327 \n    328             # Call redraw in the eventloop (thread safe).\n    329             # Give it low priority. If there is other I/O or CPU intensive\n    330             # stuff to handle, give that priority, but max postpone x seconds.\n    331             _max_postpone_until = datetime.datetime.now() + datetime.timedelta(\n    332                 seconds=self.max_render_postpone_time)\n    333             self.eventloop.call_from_executor(redraw, _max_postpone_until=_max_postpone_until)\n    334 \n    335     # Depracated alias for 'invalidate'.\n    336     request_redraw = invalidate\n    337 \n    338     def _redraw(self):\n    339         \"\"\"\n    340         Render the command line again. (Not thread safe!) (From other threads,\n    341         or if unsure, use :meth:`.CommandLineInterface.invalidate`.)\n\n/usr/local/lib/python2.7/site-packages/prompt_toolkit/interface.pyc in _redraw(self=<prompt_toolkit.interface.CommandLineInterface object>)\n    331             _max_postpone_until = datetime.datetime.now() + datetime.timedelta(\n    332                 seconds=self.max_render_postpone_time)\n    333             self.eventloop.call_from_executor(redraw, _max_postpone_until=_max_postpone_until)\n    334 \n    335     # Depracated alias for 'invalidate'.\n    336     request_redraw = invalidate\n    337 \n    338     def _redraw(self):\n    339         \"\"\"\n    340         Render the command line again. (Not thread safe!) (From other threads,\n    341         or if unsure, use :meth:`.CommandLineInterface.invalidate`.)\n    342         \"\"\"\n    343         # Only draw when no sub application was started.\n    344         if self._is_running and self._sub_cli is None:\n    345             self.render_counter += 1\n--> 346             self.renderer.render(self, self.layout, is_done=self.is_done)\n        self.renderer.render = <bound method Renderer.render of <prompt_toolkit.renderer.Renderer object at 0x10f99c650>>\n        self = <prompt_toolkit.interface.CommandLineInterface object at 0x10f9948d0>\n        self.layout = <prompt_toolkit.layout.containers.HSplit object at 0x10f98cb50>\n        global is_done = undefined\n        self.is_done = True\n    347 \n    348             # Fire render event.\n    349             self.on_render.fire()\n    350 \n    351     def _on_resize(self):\n    352         \"\"\"\n    353         When the window size changes, we erase the current output and request\n    354         again the cursor position. When the CPR answer arrives, the output is\n    355         drawn again.\n    356         \"\"\"\n    357         # Erase, request position (when cursor is at the start position)\n    358         # and redraw again. -- The order is important.\n    359         self.renderer.erase(leave_alternate_screen=False, erase_title=False)\n    360         self.renderer.request_absolute_cursor_position()\n    361         self._redraw()\n\n/usr/local/lib/python2.7/site-packages/prompt_toolkit/renderer.pyc in render(self=<prompt_toolkit.renderer.Renderer object>, cli=<prompt_toolkit.interface.CommandLineInterface object>, layout=<prompt_toolkit.layout.containers.HSplit object>, is_done=False)\n    421         # When we render using another style, do a full repaint. (Forget about\n    422         # the previous rendered screen.)\n    423         # (But note that we still use _last_screen to calculate the height.)\n    424         if self.style.invalidation_hash() != self._last_style_hash:\n    425             self._last_screen = None\n    426             self._attrs_for_token = None\n    427         if self._attrs_for_token is None:\n    428             self._attrs_for_token = _TokenToAttrsCache(self.style.get_attrs_for_token)\n    429         self._last_style_hash = self.style.invalidation_hash()\n    430 \n    431         layout.write_to_screen(cli, screen, mouse_handlers, WritePosition(\n    432             xpos=0,\n    433             ypos=0,\n    434             width=size.columns,\n    435             height=(size.rows if self.use_alternate_screen else height),\n--> 436             extended_height=size.rows,\n        global extended_height = undefined\n        size.rows = 42\n    437         ))\n    438 \n    439         # When grayed. Replace all tokens in the new screen.\n    440         if cli.is_aborting or cli.is_exiting:\n    441             screen.replace_all_tokens(Token.Aborted)\n    442 \n    443         # Process diff and write to output.\n    444         self._cursor_pos, self._last_char = _output_screen_diff(\n    445             output, screen, self._cursor_pos,\n    446             self._last_screen, self._last_char, is_done,\n    447             attrs_for_token=self._attrs_for_token,\n    448             size=size,\n    449             previous_width=(self._last_size.columns if self._last_size else 0))\n    450         self._last_screen = screen\n    451         self._last_size = size\n\n/usr/local/lib/python2.7/site-packages/prompt_toolkit/layout/containers.pyc in write_to_screen(self=<prompt_toolkit.layout.containers.HSplit object>, cli=<prompt_toolkit.interface.CommandLineInterface object>, screen=<prompt_toolkit.layout.screen.Screen object>, mouse_handlers=<prompt_toolkit.layout.mouse_handlers.MouseHandlers object>, write_position=WritePosition(0, 0, 143, 10, 42))\n    127     def preferred_height(self, cli, width, max_available_height):\n    128         dimensions = [c.preferred_height(cli, width, max_available_height) for c in self.children]\n    129         return sum_layout_dimensions(dimensions)\n    130 \n    131     def reset(self):\n    132         for c in self.children:\n    133             c.reset()\n    134 \n    135     def write_to_screen(self, cli, screen, mouse_handlers, write_position):\n    136         \"\"\"\n    137         Render the prompt to a `Screen` instance.\n    138 \n    139         :param screen: The :class:`~prompt_toolkit.layout.screen.Screen` class\n    140             to which the output has to be written.\n    141         \"\"\"\n--> 142         sizes = self._divide_heigths(cli, write_position)\n        sizes = undefined\n        self._divide_heigths = <bound method HSplit._divide_heigths of <prompt_toolkit.layout.containers.HSplit object at 0x10f98cb50>>\n        cli = <prompt_toolkit.interface.CommandLineInterface object at 0x10f9948d0>\n        write_position = WritePosition(0, 0, 143, 10, 42)\n    143 \n    144         if self.report_dimensions_callback:\n    145             self.report_dimensions_callback(cli, sizes)\n    146 \n    147         if sizes is None:\n    148             self.window_too_small.write_to_screen(\n    149                 cli, screen, mouse_handlers, write_position)\n    150         else:\n    151             # Draw child panes.\n    152             ypos = write_position.ypos\n    153             xpos = write_position.xpos\n    154             width = write_position.width\n    155 \n    156             for s, c in zip(sizes, self.children):\n    157                 c.write_to_screen(cli, screen, mouse_handlers, WritePosition(xpos, ypos, width, s))\n\n/usr/local/lib/python2.7/site-packages/prompt_toolkit/layout/containers.pyc in _divide_heigths(self=<prompt_toolkit.layout.containers.HSplit object>, cli=<prompt_toolkit.interface.CommandLineInterface object>, write_position=WritePosition(0, 0, 143, 10, 42))\n    162         Return the heights for all rows.\n    163         Or None when there is not enough space.\n    164         \"\"\"\n    165         if not self.children:\n    166             return []\n    167 \n    168         # Calculate heights.\n    169         given_dimensions = self.get_dimensions(cli) if self.get_dimensions else None\n    170 \n    171         def get_dimension_for_child(c, index):\n    172             if given_dimensions and given_dimensions[index] is not None:\n    173                 return given_dimensions[index]\n    174             else:\n    175                 return c.preferred_height(cli, write_position.width, write_position.extended_height)\n    176 \n--> 177         dimensions = [get_dimension_for_child(c, index) for index, c in enumerate(self.children)]\n        dimensions = undefined\n        get_dimension_for_child = <function get_dimension_for_child at 0x10f9c49b0>\n        c = <prompt_toolkit.layout.containers.FloatContainer object at 0x10f983c90>\n        index = 0\n        global enumerate = undefined\n        self.children = [<prompt_toolkit.layout.containers.FloatContainer object at 0x10f983c90>, ConditionalContainer(Window(content=ValidationToolbarControl(<function get_tokens at 0x10f989140>)), filter=HasValidationError()&~IsDone()), ConditionalContainer(Window(content=<prompt_toolkit.layout.toolbars.SystemToolbarControl object at 0x10f98c190>), filter=HasFocus(u'SYSTEM_BUFFER')&~IsDone()), ConditionalContainer(ConditionalContainer(Window(content=ArgToolbarControl(<function get_tokens at 0x10f989578>)), filter=HasArg()), filter=Condition(<function <lambda> at 0x10f97ac80>)), ConditionalContainer(ConditionalContainer(Window(content=<prompt_toolkit.layout.toolbars.SearchToolbarControl object at 0x10f98c750>), filter=HasSearch()&~IsDone()), filter=Condition(<function <lambda> at 0x10f97ac80>))]\n    178 \n    179         # Sum dimensions\n    180         sum_dimensions = sum_layout_dimensions(dimensions)\n    181 \n    182         # If there is not enough space for both.\n    183         # Don't do anything.\n    184         if sum_dimensions.min > write_position.extended_height:\n    185             return\n    186 \n    187         # Find optimal sizes. (Start with minimal size, increase until we cover\n    188         # the whole height.)\n    189         sizes = [d.min for d in dimensions]\n    190 \n    191         child_generator = take_using_weights(\n    192             items=list(range(len(dimensions))),\n\n/usr/local/lib/python2.7/site-packages/prompt_toolkit/layout/containers.pyc in get_dimension_for_child(c=<prompt_toolkit.layout.containers.FloatContainer object>, index=0)\n    160     def _divide_heigths(self, cli, write_position):\n    161         \"\"\"\n    162         Return the heights for all rows.\n    163         Or None when there is not enough space.\n    164         \"\"\"\n    165         if not self.children:\n    166             return []\n    167 \n    168         # Calculate heights.\n    169         given_dimensions = self.get_dimensions(cli) if self.get_dimensions else None\n    170 \n    171         def get_dimension_for_child(c, index):\n    172             if given_dimensions and given_dimensions[index] is not None:\n    173                 return given_dimensions[index]\n    174             else:\n--> 175                 return c.preferred_height(cli, write_position.width, write_position.extended_height)\n        c.preferred_height = <bound method FloatContainer.preferred_height of <prompt_toolkit.layout.containers.FloatContainer object at 0x10f983c90>>\n        global cli = undefined\n        global write_position.width = undefined\n        global write_position.extended_height = undefined\n    176 \n    177         dimensions = [get_dimension_for_child(c, index) for index, c in enumerate(self.children)]\n    178 \n    179         # Sum dimensions\n    180         sum_dimensions = sum_layout_dimensions(dimensions)\n    181 \n    182         # If there is not enough space for both.\n    183         # Don't do anything.\n    184         if sum_dimensions.min > write_position.extended_height:\n    185             return\n    186 \n    187         # Find optimal sizes. (Start with minimal size, increase until we cover\n    188         # the whole height.)\n    189         sizes = [d.min for d in dimensions]\n    190 \n\n/usr/local/lib/python2.7/site-packages/prompt_toolkit/layout/containers.pyc in preferred_height(self=<prompt_toolkit.layout.containers.FloatContainer object>, cli=<prompt_toolkit.interface.CommandLineInterface object>, width=143, max_available_height=42)\n    380     def reset(self):\n    381         self.content.reset()\n    382 \n    383         for f in self.floats:\n    384             f.content.reset()\n    385 \n    386     def preferred_width(self, cli, write_position):\n    387         return self.content.preferred_width(cli, write_position)\n    388 \n    389     def preferred_height(self, cli, width, max_available_height):\n    390         \"\"\"\n    391         Return the preferred height of the float container.\n    392         (We don't care about the height of the floats, they should always fit\n    393         into the dimensions provided by the container.)\n    394         \"\"\"\n--> 395         return self.content.preferred_height(cli, width, max_available_height)\n        self.content.preferred_height = <bound method HSplit.preferred_height of <prompt_toolkit.layout.containers.HSplit object at 0x10f919b10>>\n        cli = <prompt_toolkit.interface.CommandLineInterface object at 0x10f9948d0>\n        width = 143\n        max_available_height = 42\n    396 \n    397     def write_to_screen(self, cli, screen, mouse_handlers, write_position):\n    398         self.content.write_to_screen(cli, screen, mouse_handlers, write_position)\n    399 \n    400         for fl in self.floats:\n    401             # When a menu_position was given, use this instead of the cursor\n    402             # position. (These cursor positions are absolute, translate again\n    403             # relative to the write_position.)\n    404             # Note: This should be inside the for-loop, because one float could\n    405             #       set the cursor position to be used for the next one.\n    406             cursor_position = screen.menu_position or screen.cursor_position\n    407             cursor_position = Point(x=cursor_position.x - write_position.xpos,\n    408                                     y=cursor_position.y - write_position.ypos)\n    409 \n    410             fl_width = fl.get_width(cli)\n\n/usr/local/lib/python2.7/site-packages/prompt_toolkit/layout/containers.pyc in preferred_height(self=<prompt_toolkit.layout.containers.HSplit object>, cli=<prompt_toolkit.interface.CommandLineInterface object>, width=143, max_available_height=42)\n    113         assert report_dimensions_callback is None or callable(report_dimensions_callback)\n    114 \n    115         self.children = children\n    116         self.window_too_small = window_too_small or _window_too_small()\n    117         self.get_dimensions = get_dimensions\n    118         self.report_dimensions_callback = report_dimensions_callback\n    119 \n    120     def preferred_width(self, cli, max_available_width):\n    121         if self.children:\n    122             dimensions = [c.preferred_width(cli, max_available_width) for c in self.children]\n    123             return max_layout_dimensions(dimensions)\n    124         else:\n    125             return LayoutDimension(0)\n    126 \n    127     def preferred_height(self, cli, width, max_available_height):\n--> 128         dimensions = [c.preferred_height(cli, width, max_available_height) for c in self.children]\n        dimensions = undefined\n        c.preferred_height = <bound method Window.preferred_height of Window(content=<prompt_toolkit.layout.controls.BufferControl object at 0x10f9196d0>)>\n        cli = <prompt_toolkit.interface.CommandLineInterface object at 0x10f9948d0>\n        width = 143\n        max_available_height = 42\n        c = Window(content=<prompt_toolkit.layout.controls.BufferControl object at 0x10f9196d0>)\n        self.children = [ConditionalContainer(Window(content=TokenListControl(<function before at 0x10f97d050>)), filter=Condition(<function has_before_tokens at 0x10f97af50>)), Window(content=<prompt_toolkit.layout.controls.BufferControl object at 0x10f9196d0>)]\n    129         return sum_layout_dimensions(dimensions)\n    130 \n    131     def reset(self):\n    132         for c in self.children:\n    133             c.reset()\n    134 \n    135     def write_to_screen(self, cli, screen, mouse_handlers, write_position):\n    136         \"\"\"\n    137         Render the prompt to a `Screen` instance.\n    138 \n    139         :param screen: The :class:`~prompt_toolkit.layout.screen.Screen` class\n    140             to which the output has to be written.\n    141         \"\"\"\n    142         sizes = self._divide_heigths(cli, write_position)\n    143 \n\n/usr/local/lib/python2.7/site-packages/prompt_toolkit/layout/containers.pyc in preferred_height(self=Window(content=<prompt_toolkit.layout.controls.BufferControl object at 0x10f9196d0>), cli=<prompt_toolkit.interface.CommandLineInterface object>, width=143, max_available_height=42)\n    985 \n    986         # Merge.\n    987         return self._merge_dimensions(\n    988             dimension=self._width(cli),\n    989             preferred=preferred_width,\n    990             dont_extend=self.dont_extend_width)\n    991 \n    992     def preferred_height(self, cli, width, max_available_height):\n    993         total_margin_width = sum(self._get_margin_width(cli, m) for m in\n    994                                  self.left_margins + self.right_margins)\n    995         wrap_lines = self.wrap_lines(cli)\n    996 \n    997         return self._merge_dimensions(\n    998             dimension=self._height(cli),\n    999             preferred=self.content.preferred_height(\n-> 1000                 cli, width - total_margin_width, max_available_height, wrap_lines),\n        cli = <prompt_toolkit.interface.CommandLineInterface object at 0x10f9948d0>\n        width = 143\n        total_margin_width = 8\n        max_available_height = 42\n        wrap_lines = True\n   1001             dont_extend=self.dont_extend_height)\n   1002 \n   1003     @staticmethod\n   1004     def _merge_dimensions(dimension, preferred=None, dont_extend=False):\n   1005         \"\"\"\n   1006         Take the LayoutDimension from this `Window` class and the received\n   1007         preferred size from the `UIControl` and return a `LayoutDimension` to\n   1008         report to the parent container.\n   1009         \"\"\"\n   1010         dimension = dimension or LayoutDimension()\n   1011 \n   1012         # When a preferred dimension was explicitly given to the Window,\n   1013         # ignore the UIControl.\n   1014         if dimension.preferred_specified:\n   1015             preferred = dimension.preferred\n\n/usr/local/lib/python2.7/site-packages/prompt_toolkit/layout/controls.pyc in preferred_height(self=<prompt_toolkit.layout.controls.BufferControl object>, cli=<prompt_toolkit.interface.CommandLineInterface object>, width=135, max_available_height=42, wrap_lines=True)\n    487         This should return the preferred width.\n    488 \n    489         Note: We don't specify a preferred width according to the content,\n    490               because it would be too expensive. Calculating the preferred\n    491               width can be done by calculating the longest line, but this would\n    492               require applying all the processors to each line. This is\n    493               unfeasible for a larger document, and doing it for small\n    494               documents only would result in inconsistent behaviour.\n    495         \"\"\"\n    496         return None\n    497 \n    498     def preferred_height(self, cli, width, max_available_height, wrap_lines):\n    499         # Calculate the content height, if it was drawn on a screen with the\n    500         # given width.\n    501         height = 0\n--> 502         content = self.create_content(cli, width, None)\n        content = undefined\n        self.create_content = <bound method BufferControl.create_content of <prompt_toolkit.layout.controls.BufferControl object at 0x10f9196d0>>\n        cli = <prompt_toolkit.interface.CommandLineInterface object at 0x10f9948d0>\n        width = 135\n        global None = undefined\n    503 \n    504         # When line wrapping is off, the height should be equal to the amount\n    505         # of lines.\n    506         if not wrap_lines:\n    507             return content.line_count\n    508 \n    509         # When the number of lines exceeds the max_available_height, just\n    510         # return max_available_height. No need to calculate anything.\n    511         if content.line_count >= max_available_height:\n    512             return max_available_height\n    513 \n    514         for i in range(content.line_count):\n    515             height += content.get_height_for_line(i, width)\n    516 \n    517             if height >= max_available_height:\n\n/usr/local/lib/python2.7/site-packages/prompt_toolkit/layout/controls.pyc in create_content(self=<prompt_toolkit.layout.controls.BufferControl object>, cli=<prompt_toolkit.interface.CommandLineInterface object>, width=135, height=None)\n    626             \" Return the tokens for a given line number. \"\n    627             tokens = get_processed_line(i).tokens\n    628 \n    629             # Add a space at the end, because that is a possible cursor\n    630             # position. (When inserting after the input.) We should do this on\n    631             # all the lines, not just the line containing the cursor. (Because\n    632             # otherwise, line wrapping/scrolling could change when moving the\n    633             # cursor around.)\n    634             tokens = tokens + [(self.default_char.token, ' ')]\n    635             return tokens\n    636 \n    637         content = UIContent(\n    638             get_line=get_line,\n    639             line_count=document.line_count,\n    640             cursor_position=translate_rowcol(document.cursor_position_row,\n--> 641                                              document.cursor_position_col),\n        document.cursor_position_col = 55\n    642             default_char=self.default_char)\n    643 \n    644         # If there is an auto completion going on, use that start point for a\n    645         # pop-up menu position. (But only when this buffer has the focus --\n    646         # there is only one place for a menu, determined by the focussed buffer.)\n    647         if cli.current_buffer_name == self.buffer_name:\n    648             menu_position = self.menu_position(cli) if self.menu_position else None\n    649             if menu_position is not None:\n    650                 assert isinstance(menu_position, int)\n    651                 menu_row, menu_col = buffer.document.translate_index_to_position(menu_position)\n    652                 content.menu_position = translate_rowcol(menu_row, menu_col)\n    653             elif buffer.complete_state:\n    654                 # Position for completion menu.\n    655                 # Note: We use 'min', because the original cursor position could be\n    656                 #       behind the input string when the actual completion is for\n\n/usr/local/lib/python2.7/site-packages/prompt_toolkit/layout/controls.pyc in translate_rowcol(row=0, col=55)\n    608             else:\n    609                 ss = cli.search_state\n    610 \n    611             document = buffer.document_for_search(SearchState(\n    612                 text=cli.current_buffer.text,\n    613                 direction=ss.direction,\n    614                 ignore_case=ss.ignore_case))\n    615         else:\n    616             document = buffer.document\n    617 \n    618         get_processed_line = self._create_get_processed_line_func(cli, document)\n    619         self._last_get_processed_line = get_processed_line\n    620 \n    621         def translate_rowcol(row, col):\n    622             \" Return the content column for this coordinate. \"\n--> 623             return Point(y=row, x=get_processed_line(row).source_to_display(col))\n        global Point = <class 'prompt_toolkit.layout.screen.Point'>\n        global y = undefined\n        row = 0\n        global x = undefined\n        global get_processed_line = undefined\n        row.source_to_display = undefined\n        col = 55\n    624 \n    625         def get_line(i):\n    626             \" Return the tokens for a given line number. \"\n    627             tokens = get_processed_line(i).tokens\n    628 \n    629             # Add a space at the end, because that is a possible cursor\n    630             # position. (When inserting after the input.) We should do this on\n    631             # all the lines, not just the line containing the cursor. (Because\n    632             # otherwise, line wrapping/scrolling could change when moving the\n    633             # cursor around.)\n    634             tokens = tokens + [(self.default_char.token, ' ')]\n    635             return tokens\n    636 \n    637         content = UIContent(\n    638             get_line=get_line,\n\n/usr/local/lib/python2.7/site-packages/prompt_toolkit/layout/controls.pyc in get_processed_line(i=0)\n    568             def display_to_source(i):\n    569                 for f in reversed(display_to_source_functions):\n    570                     i = f(i)\n    571                 return i\n    572 \n    573             return _ProcessedLine(tokens, source_to_display, display_to_source)\n    574 \n    575         def create_func():\n    576             get_line = self._get_tokens_for_line_func(cli, document)\n    577             cache = {}\n    578 \n    579             def get_processed_line(i):\n    580                 try:\n    581                     return cache[i]\n    582                 except KeyError:\n--> 583                     processed_line = transform(i, get_line(i))\n        processed_line = undefined\n        global transform = undefined\n        i = 0\n        global get_line = undefined\n    584                     cache[i] = processed_line\n    585                     return processed_line\n    586             return get_processed_line\n    587 \n    588         return create_func()\n    589 \n    590     def create_content(self, cli, width, height):\n    591         \"\"\"\n    592         Create a UIContent.\n    593         \"\"\"\n    594         buffer = self._buffer(cli)\n    595 \n    596         # Get the document to be shown. If we are currently searching (the\n    597         # search buffer has focus, and the preview_search filter is enabled),\n    598         # then use the search document, which has possibly a different\n\n/usr/local/lib/python2.7/site-packages/prompt_toolkit/layout/controls.pyc in transform(lineno=0, tokens=[(Token.Comment.Single, u'# This is an example'), (Token.AutoSuggestion, u'')])\n    544             if document.cursor_position_row == lineno:\n    545                 cursor_column = document.cursor_position_col\n    546             else:\n    547                 cursor_column = None\n    548 \n    549             def source_to_display(i):\n    550                 \"\"\" Translate x position from the buffer to the x position in the\n    551                 processed token list. \"\"\"\n    552                 for f in source_to_display_functions:\n    553                     i = f(i)\n    554                 return i\n    555 \n    556             # Apply each processor.\n    557             for p in self.input_processors:\n    558                 transformation = p.apply_transformation(\n--> 559                     cli, document, lineno, source_to_display, tokens)\n        global cli = undefined\n        global document = undefined\n        lineno = 0\n        source_to_display = <function source_to_display at 0x10f9afb18>\n        tokens = [(Token.Comment.Single, u'# This is an example'), (Token.AutoSuggestion, u'')]\n    560                 tokens = transformation.tokens\n    561 \n    562                 if cursor_column:\n    563                     cursor_column = transformation.source_to_display(cursor_column)\n    564 \n    565                 display_to_source_functions.append(transformation.display_to_source)\n    566                 source_to_display_functions.append(transformation.source_to_display)\n    567 \n    568             def display_to_source(i):\n    569                 for f in reversed(display_to_source_functions):\n    570                     i = f(i)\n    571                 return i\n    572 \n    573             return _ProcessedLine(tokens, source_to_display, display_to_source)\n    574 \n\n/usr/local/lib/python2.7/site-packages/prompt_toolkit/layout/processors.pyc in apply_transformation(self=ConditionalProcessor(processor=<prompt_toolkit.l...()&Condition(<function <lambda> at 0x10f96a578>)), cli=<prompt_toolkit.interface.CommandLineInterface object>, document=Document(u\"# This is an example\\rimport os\\rprint(os.getenv('USER'))\", 55), lineno=0, source_to_display=<function source_to_display>, tokens=[(Token.Comment.Single, u'# This is an example'), (Token.AutoSuggestion, u'')])\n    539                                  Condition(highlight_enabled))])\n    540 \n    541     :param processor: :class:`.Processor` instance.\n    542     :param filter: :class:`~prompt_toolkit.filters.CLIFilter` instance.\n    543     \"\"\"\n    544     def __init__(self, processor, filter):\n    545         assert isinstance(processor, Processor)\n    546 \n    547         self.processor = processor\n    548         self.filter = to_cli_filter(filter)\n    549 \n    550     def apply_transformation(self, cli, document, lineno, source_to_display, tokens):\n    551         # Run processor when enabled.\n    552         if self.filter(cli):\n    553             return self.processor.apply_transformation(\n--> 554                 cli, document, lineno, source_to_display, tokens)\n        cli = <prompt_toolkit.interface.CommandLineInterface object at 0x10f9948d0>\n        document = Document(u\"# This is an example\\rimport os\\rprint(os.getenv('USER'))\", 55)\n        lineno = 0\n        source_to_display = <function source_to_display at 0x10f9afb18>\n        tokens = [(Token.Comment.Single, u'# This is an example'), (Token.AutoSuggestion, u'')]\n    555         else:\n    556             return Transformation(tokens)\n    557 \n    558     def has_focus(self, cli):\n    559         if self.filter(cli):\n    560             return self.processor.has_focus(cli)\n    561         else:\n    562             return False\n    563 \n    564     def __repr__(self):\n    565         return '%s(processor=%r, filter=%r)' % (\n    566             self.__class__.__name__, self.processor, self.filter)\n\n/usr/local/lib/python2.7/site-packages/prompt_toolkit/layout/processors.pyc in apply_transformation(self=<prompt_toolkit.layout.processors.HighlightMatchingBracketProcessor object>, cli=<prompt_toolkit.interface.CommandLineInterface object>, document=Document(u\"# This is an example\\rimport os\\rprint(os.getenv('USER'))\", 55), lineno=0, source_to_display=<function source_to_display>, tokens=[(Token.Comment.Single, u'#'), (Token.Comment.Si...ment.Single, u'l'), (Token.Comment.Single, u'e')])\n    240         else:\n    241             return []\n    242 \n    243     def apply_transformation(self, cli, document, lineno, source_to_display, tokens):\n    244         # Get the highlight positions.\n    245         key = (cli.render_counter, document.text, document.cursor_position)\n    246         positions = self._positions_cache.get(\n    247             key, lambda: self._get_positions_to_highlight(document))\n    248 \n    249         # Apply if positions were found at this line.\n    250         if positions:\n    251             for row, col in positions:\n    252                 if row == lineno:\n    253                     col = source_to_display(col)\n    254                     tokens = explode_tokens(tokens)\n--> 255                     token, text = tokens[col]\n        token = undefined\n        text = undefined\n        tokens = [(Token.Comment.Single, u'#'), (Token.Comment.Single, u' '), (Token.Comment.Single, u'T'), (Token.Comment.Single, u'h'), (Token.Comment.Single, u'i'), (Token.Comment.Single, u's'), (Token.Comment.Single, u' '), (Token.Comment.Single, u'i'), (Token.Comment.Single, u's'), (Token.Comment.Single, u' '), (Token.Comment.Single, u'a'), (Token.Comment.Single, u'n'), (Token.Comment.Single, u' '), (Token.Comment.Single, u'e'), (Token.Comment.Single, u'x'), (Token.Comment.Single, u'a'), (Token.Comment.Single, u'm'), (Token.Comment.Single, u'p'), (Token.Comment.Single, u'l'), (Token.Comment.Single, u'e')]\n        col = 36\n    256 \n    257                     if col == document.cursor_position_col:\n    258                         token += (':', ) + Token.MatchingBracket.Cursor\n    259                     else:\n    260                         token += (':', ) + Token.MatchingBracket.Other\n    261 \n    262                     tokens[col] = (token, text)\n    263 \n    264         return Transformation(tokens)\n    265 \n    266 \n    267 class BeforeInput(Processor):\n    268     \"\"\"\n    269     Insert tokens before the input.\n    270 \n\nIndexError: list index out of range\n\n**********************************************************************\n\nOops, ipython crashed. We do our best to make it stable, but...\n\nA crash report was automatically generated with the following information:\n  - A verbatim copy of the crash traceback.\n  - A copy of your input history during this session.\n  - Data on your current ipython configuration.\n\nIt was left in the file named:\n    '/Users/amancevice/.ipython/Crash_report_ipython.txt'\nIf you can email this file to the developers, the information in it will help\nthem in understanding and correcting the problem.\n\nYou can mail it to: The IPython Development Team at ipython-dev@scipy.org\nwith the subject 'ipython Crash Report'.\n\nIf you want to do it now, the following command will work (under Unix):\nmail -s 'ipython Crash Report' ipython-dev@scipy.org < /Users/amancevice/.ipython/Crash_report_ipython.txt\n\nTo ensure accurate tracking of this issue, please file a report about it at:\nhttps://github.com/ipython/ipython/issues\n\nHit <Enter> to quit (your terminal may close):\n```\n", "reactions": {"url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/369/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/369/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/354", "repository_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit", "labels_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/354/labels{/name}", "comments_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/354/comments", "events_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/354/events", "html_url": "https://github.com/prompt-toolkit/python-prompt-toolkit/issues/354", "id": 166859025, "node_id": "MDU6SXNzdWUxNjY4NTkwMjU=", "number": 354, "title": "\"filedescriptor out of range in select()\" error in _ready_for_reading", "user": {"login": "dsclose", "id": 103378, "node_id": "MDQ6VXNlcjEwMzM3OA==", "avatar_url": "https://avatars.githubusercontent.com/u/103378?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dsclose", "html_url": "https://github.com/dsclose", "followers_url": "https://api.github.com/users/dsclose/followers", "following_url": "https://api.github.com/users/dsclose/following{/other_user}", "gists_url": "https://api.github.com/users/dsclose/gists{/gist_id}", "starred_url": "https://api.github.com/users/dsclose/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dsclose/subscriptions", "organizations_url": "https://api.github.com/users/dsclose/orgs", "repos_url": "https://api.github.com/users/dsclose/repos", "events_url": "https://api.github.com/users/dsclose/events{/privacy}", "received_events_url": "https://api.github.com/users/dsclose/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 76984990, "node_id": "MDU6TGFiZWw3Njk4NDk5MA==", "url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2016-07-21T16:12:12Z", "updated_at": "2016-08-09T08:33:46Z", "closed_at": "2016-08-09T08:33:46Z", "author_association": "NONE", "active_lock_reason": null, "body": "On a machine with more than 1024 open file-descriptors, the _ready_for_reading function (eventloop/posix.py) will always raise a \"ValueError: filedescriptor out of range in select()\".\n\nThis is because of the use of the select.select function to poll file-descriptors. A hard-limit of 1024 on any file-descriptor passed to select.select is built into Python at compile-time using the FD_SETSIZE value. On most platforms, this is 1024. An administrator may allow more file-descriptors to be opened on busy machines making the select function unreliable in posix environments.\n\nOn posix environments, the select.poll function will provide the same functionality as select in this context. It is also not limited by the FD_SETSIZE value. May I recommend switching to this function on posix environments or otherwise catching the ValueError in your _select wrapper?\n\nThis is currently preventing us from using IPython v5, as we often use machines with more than 1024 open file-descriptors. Below is a traceback from one such IPython session:\n\n```\nIn [1]: Exception in thread Thread-97:\nTraceback (most recent call last):\n  File \"/usr/lib/python3.5/threading.py\", line 914, in _bootstrap_inner\n    self.run()\n  File \"/usr/lib/python3.5/threading.py\", line 862, in run\n    self._target(*self._args, **self._kwargs)\n  File \"/usr/local/lib/python3.5/dist-packages/prompt_toolkit/eventloop/inputhook.py\", line 66, in thread\n    input_is_ready_func(wait=True)\n  File \"/usr/local/lib/python3.5/dist-packages/prompt_toolkit/eventloop/posix.py\", line 101, in ready\n    return self._ready_for_reading(current_timeout[0] if wait else 0) != []\n  File \"/usr/local/lib/python3.5/dist-packages/prompt_toolkit/eventloop/posix.py\", line 184, in _ready_for_reading\n    r, _, _ =_select(read_fds, [], [], timeout)\n  File \"/usr/local/lib/python3.5/dist-packages/prompt_toolkit/eventloop/posix.py\", line 278, in _select\n    return select.select(*args, **kwargs)\nValueError: filedescriptor out of range in select()\n```\n", "reactions": {"url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/354/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/354/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/345", "repository_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit", "labels_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/345/labels{/name}", "comments_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/345/comments", "events_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/345/events", "html_url": "https://github.com/prompt-toolkit/python-prompt-toolkit/issues/345", "id": 165837586, "node_id": "MDU6SXNzdWUxNjU4Mzc1ODY=", "number": 345, "title": "Esc+- followed by backspace generates AssertionError", "user": {"login": "haridsv", "id": 166486, "node_id": "MDQ6VXNlcjE2NjQ4Ng==", "avatar_url": "https://avatars.githubusercontent.com/u/166486?v=4", "gravatar_id": "", "url": "https://api.github.com/users/haridsv", "html_url": "https://github.com/haridsv", "followers_url": "https://api.github.com/users/haridsv/followers", "following_url": "https://api.github.com/users/haridsv/following{/other_user}", "gists_url": "https://api.github.com/users/haridsv/gists{/gist_id}", "starred_url": "https://api.github.com/users/haridsv/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/haridsv/subscriptions", "organizations_url": "https://api.github.com/users/haridsv/orgs", "repos_url": "https://api.github.com/users/haridsv/repos", "events_url": "https://api.github.com/users/haridsv/events{/privacy}", "received_events_url": "https://api.github.com/users/haridsv/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 76984990, "node_id": "MDU6TGFiZWw3Njk4NDk5MA==", "url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2016-07-15T17:24:56Z", "updated_at": "2016-07-23T12:35:12Z", "closed_at": "2016-07-23T12:35:12Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "While using iPython 5, I got the below exception when I pressed Esc+- (which showed \"Repeat: -1\") and then pressed backspace:\n\n```\nTraceback (most recent call last):\n  File \"/Users/hdara/bin/python/bin/ipython\", line 11, in <module>\n    sys.exit(start_ipython())\n  File \"/Users/hdara/bin/python/lib/python2.7/site-packages/IPython/__init__.py\", line 119, in start_ipython\n    return launch_new_instance(argv=argv, **kwargs)\n  File \"/Users/hdara/bin/python/lib/python2.7/site-packages/traitlets/config/application.py\", line 596, in launch_instance\n    app.start()\n  File \"/Users/hdara/bin/python/lib/python2.7/site-packages/IPython/terminal/ipapp.py\", line 348, in start\n    self.shell.mainloop()\n  File \"/Users/hdara/bin/python/lib/python2.7/site-packages/IPython/terminal/interactiveshell.py\", line 402, in mainloop\n    self.interact()\n  File \"/Users/hdara/bin/python/lib/python2.7/site-packages/IPython/terminal/interactiveshell.py\", line 385, in interact\n    code = self.prompt_for_code()\n  File \"/Users/hdara/bin/python/lib/python2.7/site-packages/IPython/terminal/interactiveshell.py\", line 321, in prompt_for_code\n    pre_run=self.pre_prompt, reset_current_buffer=True)\n  File \"/Users/hdara/src/python-prompt-toolkit/prompt_toolkit/interface.py\", line 389, in run\n    self.eventloop.run(self.input, self.create_eventloop_callbacks())\n  File \"/Users/hdara/src/python-prompt-toolkit/prompt_toolkit/eventloop/posix.py\", line 154, in run\n    t()\n  File \"/Users/hdara/src/python-prompt-toolkit/prompt_toolkit/eventloop/posix.py\", line 82, in read_from_stdin\n    inputstream.feed(data)\n  File \"/Users/hdara/src/python-prompt-toolkit/prompt_toolkit/terminal/vt100_input.py\", line 380, in feed\n    self._input_parser.send(c)\n  File \"/Users/hdara/src/python-prompt-toolkit/prompt_toolkit/terminal/vt100_input.py\", line 299, in _input_parser_generator\n    self._call_handler(match, prefix)\n  File \"/Users/hdara/src/python-prompt-toolkit/prompt_toolkit/terminal/vt100_input.py\", line 332, in _call_handler\n    self.feed_key_callback(KeyPress(key, insert_text))\n  File \"/Users/hdara/src/python-prompt-toolkit/prompt_toolkit/interface.py\", line 1012, in feed_key\n    cli.input_processor.process_keys()\n  File \"/Users/hdara/src/python-prompt-toolkit/prompt_toolkit/key_binding/input_processor.py\", line 201, in process_keys\n    self._process_coroutine.send(key_press)\n  File \"/Users/hdara/src/python-prompt-toolkit/prompt_toolkit/key_binding/input_processor.py\", line 158, in _process\n    self._call_handler(matches[-1], key_sequence=buffer)\n  File \"/Users/hdara/src/python-prompt-toolkit/prompt_toolkit/key_binding/input_processor.py\", line 228, in _call_handler\n    handler.call(event)\n  File \"/Users/hdara/src/python-prompt-toolkit/prompt_toolkit/key_binding/registry.py\", line 31, in call\n    return self.handler(event)\n  File \"/Users/hdara/src/python-prompt-toolkit/prompt_toolkit/key_binding/bindings/basic.py\", line 261, in _\n    deleted = event.current_buffer.delete_before_cursor(count=event.arg)\n  File \"/Users/hdara/src/python-prompt-toolkit/prompt_toolkit/buffer.py\", line 568, in delete_before_cursor\n    assert count >= 0\nAssertionError\n```\n", "reactions": {"url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/345/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/345/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/329", "repository_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit", "labels_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/329/labels{/name}", "comments_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/329/comments", "events_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/329/events", "html_url": "https://github.com/prompt-toolkit/python-prompt-toolkit/issues/329", "id": 162385044, "node_id": "MDU6SXNzdWUxNjIzODUwNDQ=", "number": 329, "title": "pymux can't start with prompt_toolkit-1.0.3", "user": {"login": "cwt", "id": 264058, "node_id": "MDQ6VXNlcjI2NDA1OA==", "avatar_url": "https://avatars.githubusercontent.com/u/264058?v=4", "gravatar_id": "", "url": "https://api.github.com/users/cwt", "html_url": "https://github.com/cwt", "followers_url": "https://api.github.com/users/cwt/followers", "following_url": "https://api.github.com/users/cwt/following{/other_user}", "gists_url": "https://api.github.com/users/cwt/gists{/gist_id}", "starred_url": "https://api.github.com/users/cwt/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/cwt/subscriptions", "organizations_url": "https://api.github.com/users/cwt/orgs", "repos_url": "https://api.github.com/users/cwt/repos", "events_url": "https://api.github.com/users/cwt/events{/privacy}", "received_events_url": "https://api.github.com/users/cwt/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 76984990, "node_id": "MDU6TGFiZWw3Njk4NDk5MA==", "url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2016-06-27T06:54:17Z", "updated_at": "2016-06-28T02:09:29Z", "closed_at": "2016-06-28T02:09:29Z", "author_association": "NONE", "active_lock_reason": null, "body": "I install pymux with command \"pip install pymux\", which it will download the latest version of prompt_toolkit (1.0.3), which it can't start.\n\nI have to downgrade prompt_toolkit back to 1.0.0 in order to make pymux working again.\n\nPlease see me screen cast here: https://asciinema.org/a/50238\n", "reactions": {"url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/329/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/329/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/320", "repository_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit", "labels_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/320/labels{/name}", "comments_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/320/comments", "events_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/320/events", "html_url": "https://github.com/prompt-toolkit/python-prompt-toolkit/issues/320", "id": 160042323, "node_id": "MDU6SXNzdWUxNjAwNDIzMjM=", "number": 320, "title": "Not all completions are shown", "user": {"login": "melund", "id": 1038978, "node_id": "MDQ6VXNlcjEwMzg5Nzg=", "avatar_url": "https://avatars.githubusercontent.com/u/1038978?v=4", "gravatar_id": "", "url": "https://api.github.com/users/melund", "html_url": "https://github.com/melund", "followers_url": "https://api.github.com/users/melund/followers", "following_url": "https://api.github.com/users/melund/following{/other_user}", "gists_url": "https://api.github.com/users/melund/gists{/gist_id}", "starred_url": "https://api.github.com/users/melund/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/melund/subscriptions", "organizations_url": "https://api.github.com/users/melund/orgs", "repos_url": "https://api.github.com/users/melund/repos", "events_url": "https://api.github.com/users/melund/events{/privacy}", "received_events_url": "https://api.github.com/users/melund/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 76984990, "node_id": "MDU6TGFiZWw3Njk4NDk5MA==", "url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 11, "created_at": "2016-06-13T20:52:57Z", "updated_at": "2016-06-16T20:46:14Z", "closed_at": "2016-06-16T20:46:14Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "We have seen a problem with xonsh where the completer would not show all completions and left out quoted path names with spaces in the name. \n\nhttps://github.com/xonsh/xonsh/issues/1201#issuecomment-225485796\n\nSince the  xonsh completer does find all the right paths we were thinking that this may be an issue with prompt-toolkit. I remember that this used to work. \n", "reactions": {"url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/320/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/320/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/317", "repository_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit", "labels_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/317/labels{/name}", "comments_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/317/comments", "events_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/317/events", "html_url": "https://github.com/prompt-toolkit/python-prompt-toolkit/issues/317", "id": 159760518, "node_id": "MDU6SXNzdWUxNTk3NjA1MTg=", "number": 317, "title": "ptipython is not working ok with ipython5.0b3", "user": {"login": "stonebig", "id": 4312421, "node_id": "MDQ6VXNlcjQzMTI0MjE=", "avatar_url": "https://avatars.githubusercontent.com/u/4312421?v=4", "gravatar_id": "", "url": "https://api.github.com/users/stonebig", "html_url": "https://github.com/stonebig", "followers_url": "https://api.github.com/users/stonebig/followers", "following_url": "https://api.github.com/users/stonebig/following{/other_user}", "gists_url": "https://api.github.com/users/stonebig/gists{/gist_id}", "starred_url": "https://api.github.com/users/stonebig/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/stonebig/subscriptions", "organizations_url": "https://api.github.com/users/stonebig/orgs", "repos_url": "https://api.github.com/users/stonebig/repos", "events_url": "https://api.github.com/users/stonebig/events{/privacy}", "received_events_url": "https://api.github.com/users/stonebig/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 76984990, "node_id": "MDU6TGFiZWw3Njk4NDk5MA==", "url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2016-06-11T07:18:54Z", "updated_at": "2016-06-14T21:09:41Z", "closed_at": "2016-06-14T21:09:41Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "see\n https://github.com/ipython/ipython/issues/9548\n\n![ptipython_ipython5b3](https://cloud.githubusercontent.com/assets/4312421/15983864/7fd87c68-2fb5-11e6-98ae-dcb3e77f82ce.PNG)\n", "reactions": {"url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/317/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/317/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/316", "repository_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit", "labels_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/316/labels{/name}", "comments_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/316/comments", "events_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/316/events", "html_url": "https://github.com/prompt-toolkit/python-prompt-toolkit/issues/316", "id": 159699249, "node_id": "MDU6SXNzdWUxNTk2OTkyNDk=", "number": 316, "title": "master breaks up/down arrows on Windows", "user": {"login": "jorisvandenbossche", "id": 1020496, "node_id": "MDQ6VXNlcjEwMjA0OTY=", "avatar_url": "https://avatars.githubusercontent.com/u/1020496?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jorisvandenbossche", "html_url": "https://github.com/jorisvandenbossche", "followers_url": "https://api.github.com/users/jorisvandenbossche/followers", "following_url": "https://api.github.com/users/jorisvandenbossche/following{/other_user}", "gists_url": "https://api.github.com/users/jorisvandenbossche/gists{/gist_id}", "starred_url": "https://api.github.com/users/jorisvandenbossche/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jorisvandenbossche/subscriptions", "organizations_url": "https://api.github.com/users/jorisvandenbossche/orgs", "repos_url": "https://api.github.com/users/jorisvandenbossche/repos", "events_url": "https://api.github.com/users/jorisvandenbossche/events{/privacy}", "received_events_url": "https://api.github.com/users/jorisvandenbossche/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 76984990, "node_id": "MDU6TGFiZWw3Njk4NDk5MA==", "url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2016-06-10T18:53:37Z", "updated_at": "2016-06-10T19:47:53Z", "closed_at": "2016-06-10T19:18:59Z", "author_association": "NONE", "active_lock_reason": null, "body": "I was testing master for https://github.com/ipython/ipython/issues/9600, and I notice that with one of the latest commits, the up/down arrows don't work anymore (couple of hours ago this was not yet the case).\n\nTraceback of pressing up arrow (and it exits afterwards):\n\n```\nIn [4]:\nTraceback (most recent call last):\n  File \"c:\\anaconda\\envs\\devel\\lib\\runpy.py\", line 162, in _run_module_as_main\n    \"__main__\", fname, loader, pkg_name)\n  File \"c:\\anaconda\\envs\\devel\\lib\\runpy.py\", line 72, in _run_code\n    exec code in run_globals\n  File \"C:\\Anaconda\\envs\\devel\\Scripts\\ipython.exe\\__main__.py\", line 9, in <mod\nule>\n    sys.exit(start_ipython())\n  File \"c:\\anaconda\\envs\\devel\\lib\\site-packages\\IPython\\__init__.py\", line 119,\n in start_ipython\n    return launch_new_instance(argv=argv, **kwargs)\n  File \"c:\\anaconda\\envs\\devel\\lib\\site-packages\\traitlets\\config\\application.py\n\", line 596, in launch_instance\n    app.start()\n  File \"c:\\anaconda\\envs\\devel\\lib\\site-packages\\IPython\\terminal\\ipapp.py\", lin\ne 348, in start\n    self.shell.mainloop()\n  File \"c:\\anaconda\\envs\\devel\\lib\\site-packages\\IPython\\terminal\\ptshell.py\", l\nine 431, in mainloop\n    self.interact()\n  File \"c:\\anaconda\\envs\\devel\\lib\\site-packages\\IPython\\terminal\\ptshell.py\", l\nine 414, in interact\n    code = self.prompt_for_code()\n  File \"c:\\anaconda\\envs\\devel\\lib\\site-packages\\IPython\\terminal\\ptshell.py\", l\nine 357, in prompt_for_code\n    pre_run=self.pre_prompt, reset_current_buffer=True)\n  File \"c:\\anaconda\\envs\\devel\\lib\\site-packages\\prompt_toolkit\\interface.py\", l\nine 388, in run\n    self.eventloop.run(self.input, self.create_eventloop_callbacks())\n  File \"c:\\anaconda\\envs\\devel\\lib\\site-packages\\prompt_toolkit\\eventloop\\win32.\npy\", line 76, in run\n    keys = self._console_input_reader.read()\n  File \"c:\\anaconda\\envs\\devel\\lib\\site-packages\\prompt_toolkit\\terminal\\win32_i\nnput.py\", line 149, in read\n    key_presses = self._event_to_key_presses(ev)\n  File \"c:\\anaconda\\envs\\devel\\lib\\site-packages\\prompt_toolkit\\terminal\\win32_i\nnput.py\", line 171, in _event_to_key_presses\n    result = KeyPress(self.keycodes[ev.VirtualKeyCode], '')\n  File \"c:\\anaconda\\envs\\devel\\lib\\site-packages\\prompt_toolkit\\key_binding\\inpu\nt_processor.py\", line 35, in __init__\n    assert data is None or isinstance(data, six.text_type)\nAssertionError\n\nIf you suspect this is an IPython bug, please report it at:\n    https://github.com/ipython/ipython/issues\nor send an email to the mailing list at ipython-dev@scipy.org\n\nYou can print a more detailed traceback right now with \"%tb\", or use \"%debug\"\nto interactively debug it.\n\nExtra-detailed tracebacks for bug-reporting purposes can be enabled via:\n    %config Application.verbose_crash=True\n```\n", "reactions": {"url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/316/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/316/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/308", "repository_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit", "labels_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/308/labels{/name}", "comments_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/308/comments", "events_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/308/events", "html_url": "https://github.com/prompt-toolkit/python-prompt-toolkit/issues/308", "id": 157484971, "node_id": "MDU6SXNzdWUxNTc0ODQ5NzE=", "number": 308, "title": "v1.0.0 hangs autocompleting haxor-news view command on running Windows", "user": {"login": "donnemartin", "id": 5458997, "node_id": "MDQ6VXNlcjU0NTg5OTc=", "avatar_url": "https://avatars.githubusercontent.com/u/5458997?v=4", "gravatar_id": "", "url": "https://api.github.com/users/donnemartin", "html_url": "https://github.com/donnemartin", "followers_url": "https://api.github.com/users/donnemartin/followers", "following_url": "https://api.github.com/users/donnemartin/following{/other_user}", "gists_url": "https://api.github.com/users/donnemartin/gists{/gist_id}", "starred_url": "https://api.github.com/users/donnemartin/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/donnemartin/subscriptions", "organizations_url": "https://api.github.com/users/donnemartin/orgs", "repos_url": "https://api.github.com/users/donnemartin/repos", "events_url": "https://api.github.com/users/donnemartin/events{/privacy}", "received_events_url": "https://api.github.com/users/donnemartin/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 76984990, "node_id": "MDU6TGFiZWw3Njk4NDk5MA==", "url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 10, "created_at": "2016-05-30T11:30:40Z", "updated_at": "2016-08-24T00:22:17Z", "closed_at": "2016-08-23T16:56:24Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Hi Jonathan, \n\nI ran into this issue updating `prompt-toolkit` to v1.0.0 on `haxor-news` v0.4.0:\n### Build\n\n`haxor-news` v0.4.0, running `prompt-toolkit` v1.0.0: \n\nhttps://github.com/donnemartin/haxor-news/releases/tag/0.4.0\n### Environment\n\nWindows 10 (on VirtualBox 5.0.20)\nPython 3.5.1\n### Steps to reproduce\n\n```\n $ haxor-news  # start the shell\n $ hn view 1  # works the first time\n $ hn view 1  # hangs on the second time*\n```\n\n*Hangs for awhile but eventually comes back, I'm attempting to type `hn view 1 -c`.\n\nPrevious version of `prompt-toolkit` v0.52 doesn't have the same issue.  I've reverted back to v0.52 for now.\n\n-Donne\n", "reactions": {"url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/308/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/308/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/273", "repository_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit", "labels_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/273/labels{/name}", "comments_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/273/comments", "events_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/273/events", "html_url": "https://github.com/prompt-toolkit/python-prompt-toolkit/issues/273", "id": 145605279, "node_id": "MDU6SXNzdWUxNDU2MDUyNzk=", "number": 273, "title": "ptipython raises KeyError: 'extensions'", "user": {"login": "Lazar-T", "id": 8344912, "node_id": "MDQ6VXNlcjgzNDQ5MTI=", "avatar_url": "https://avatars.githubusercontent.com/u/8344912?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Lazar-T", "html_url": "https://github.com/Lazar-T", "followers_url": "https://api.github.com/users/Lazar-T/followers", "following_url": "https://api.github.com/users/Lazar-T/following{/other_user}", "gists_url": "https://api.github.com/users/Lazar-T/gists{/gist_id}", "starred_url": "https://api.github.com/users/Lazar-T/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Lazar-T/subscriptions", "organizations_url": "https://api.github.com/users/Lazar-T/orgs", "repos_url": "https://api.github.com/users/Lazar-T/repos", "events_url": "https://api.github.com/users/Lazar-T/events{/privacy}", "received_events_url": "https://api.github.com/users/Lazar-T/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 76984990, "node_id": "MDU6TGFiZWw3Njk4NDk5MA==", "url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2016-04-04T07:18:03Z", "updated_at": "2018-10-21T09:20:41Z", "closed_at": "2018-10-21T09:20:41Z", "author_association": "NONE", "active_lock_reason": null, "body": "Having issues trying to run `ptipython`, here's traceback:\n\n``` bash\n---------------------------------------------------------------------------\nKeyError                                  Traceback (most recent call last)\n/usr/local/bin/ptipython in <module>()\n      9 if __name__ == '__main__':\n     10     sys.argv[0] = re.sub(r'(-script\\.pyw|\\.exe)?$', '', sys.argv[0])\n---> 11     sys.exit(run())\n\n/usr/local/lib/python2.7/dist-packages/ptpython/entry_points/run_ptipython.pyc in run()\n     89               configure=configure,\n     90               user_ns=user_ns,\n---> 91               title='IPython REPL (ptipython)')\n     92 \n     93 \n\n/usr/local/lib/python2.7/dist-packages/ptpython/ipython.pyc in embed(**kwargs)\n    253         kwargs['config'] = config\n    254     shell = InteractiveShellEmbed.instance(**kwargs)\n--> 255     initialize_extensions(shell, config['InteractiveShellApp']['extensions'])\n    256     shell(header=header, stack_depth=2, compile_flags=compile_flags)\n\n/usr/lib/python2.7/dist-packages/IPython/config/loader.pyc in __getitem__(self, key)\n    171                 return c\n    172         else:\n--> 173             return dict.__getitem__(self, key)\n    174 \n    175     def __setitem__(self, key, value):\n\nKeyError: u'extensions'\n```\n- `Ubuntu`: 14.04\n- `Ipython`: 1.2.1\n- `CPython`: 2.7.6\n- `Ptpython`: Not sure how to look this up. When I run: `pip install --upgrade ptpython`, it gets: `Requirement already up-to-date: ptpython in /usr/local/lib/python2.7/dist-packages\n  Cleaning up...`\n\nThis is similiar issue to this one: [link](https://github.com/jonathanslenders/python-prompt-toolkit/issues/70)\n\nI have tried to run: `pip install -U IPython`, and here is output:\n\n``` bash\nDownloading/unpacking IPython from https://pypi.python.org/packages/py2/i/ipython/ipython-4.1.2-py2-none-any.whl#md5=564543ff3d70040076112\n  Downloading ipython-4.1.2-py2-none-any.whl (736kB): 736kB downloaded\nRequirement already up-to-date: pickleshare in /usr/local/lib/python2.7/dist-packages (from IPython)\nDownloading/unpacking pexpect from https://pypi.python.org/packages/source/p/pexpect/pexpect-4.0.1.tar.gz#md5=056df81e6ca7081f1015b4b147b)\n  Downloading pexpect-4.0.1.tar.gz (143kB): 143kB downloaded\n  Running setup.py (path:/tmp/pip_build_root/pexpect/setup.py) egg_info for package pexpect\n\nDownloading/unpacking setuptools>=18.5 (from IPython)\n  Downloading setuptools-20.6.7-py2.py3-none-any.whl (508kB): 508kB downloaded\nRequirement already up-to-date: simplegeneric>0.8 in /usr/lib/python2.7/dist-packages (from IPython)\nRequirement already up-to-date: traitlets in /usr/local/lib/python2.7/dist-packages (from IPython)\nDownloading/unpacking decorator from https://pypi.python.org/packages/3.4/d/decorator/decorator-4.0.9-py2.py3-none-any.whl#md5=8bb72dc6e4)\n  Downloading decorator-4.0.9-py2.py3-none-any.whl\nRequirement already up-to-date: ptyprocess>=0.5 in /usr/local/lib/python2.7/dist-packages (from pexpect->IPython)\nInstalling collected packages: IPython, pexpect, setuptools, decorator\n  Found existing installation: ipython 1.2.1\n    Not uninstalling ipython at /usr/lib/python2.7/dist-packages, owned by OS\n  Found existing installation: pexpect 3.1\n    Not uninstalling pexpect at /usr/lib/python2.7/dist-packages, owned by OS\n  Running setup.py install for pexpect\n      File \"/usr/local/lib/python2.7/dist-packages/pexpect/async.py\", line 16\n        transport, pw = yield from asyncio.get_event_loop()\\\n                                 ^\n    SyntaxError: invalid syntax\n\n\n  Found existing installation: setuptools 3.3\n    Not uninstalling setuptools at /usr/lib/python2.7/dist-packages, owned by OS\n  Found existing installation: decorator 3.4.0\n    Not uninstalling decorator at /usr/lib/python2.7/dist-packages, owned by OS\nSuccessfully installed IPython pexpect setuptools decorator\nCleaning up...\n```\n\nThis kind of issue already occurred for some people:\n\nhttps://github.com/pexpect/pexpect/issues/220\nhttps://github.com/pexpect/pexpect/issues/296\n\nHowever it seems like `ptipython` shouldn't be affected by this issue and that `pexpect` installs successfully.\n", "reactions": {"url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/273/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/273/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/263", "repository_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit", "labels_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/263/labels{/name}", "comments_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/263/comments", "events_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/263/events", "html_url": "https://github.com/prompt-toolkit/python-prompt-toolkit/issues/263", "id": 138829310, "node_id": "MDU6SXNzdWUxMzg4MjkzMTA=", "number": 263, "title": "DeprecationWarning in Py3", "user": {"login": "inducer", "id": 352067, "node_id": "MDQ6VXNlcjM1MjA2Nw==", "avatar_url": "https://avatars.githubusercontent.com/u/352067?v=4", "gravatar_id": "", "url": "https://api.github.com/users/inducer", "html_url": "https://github.com/inducer", "followers_url": "https://api.github.com/users/inducer/followers", "following_url": "https://api.github.com/users/inducer/following{/other_user}", "gists_url": "https://api.github.com/users/inducer/gists{/gist_id}", "starred_url": "https://api.github.com/users/inducer/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/inducer/subscriptions", "organizations_url": "https://api.github.com/users/inducer/orgs", "repos_url": "https://api.github.com/users/inducer/repos", "events_url": "https://api.github.com/users/inducer/events{/privacy}", "received_events_url": "https://api.github.com/users/inducer/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 76984990, "node_id": "MDU6TGFiZWw3Njk4NDk5MA==", "url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2016-03-06T19:52:06Z", "updated_at": "2016-03-18T16:55:30Z", "closed_at": "2016-03-18T16:55:30Z", "author_association": "NONE", "active_lock_reason": null, "body": "```\n/home/andreas/pool3/lib/python3.5/site-packages/prompt_toolkit/filters/base.py:76: DeprecationWarning: inspect.getargspec() is deprecated, use inspect.signature() instead\n  return inspect.getargspec(self.__call__)\n/home/andreas/pool3/lib/python3.5/site-packages/prompt_toolkit/filters/base.py:242: DeprecationWarning: inspect.getargspec() is deprecated, use inspect.signature() instead\n  return inspect.getargspec(self.func)\n```\n", "reactions": {"url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/263/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/263/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/254", "repository_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit", "labels_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/254/labels{/name}", "comments_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/254/comments", "events_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/254/events", "html_url": "https://github.com/prompt-toolkit/python-prompt-toolkit/issues/254", "id": 136718971, "node_id": "MDU6SXNzdWUxMzY3MTg5NzE=", "number": 254, "title": "Long multiline inputs are getting their tops shaved off", "user": {"login": "gforsyth", "id": 3596999, "node_id": "MDQ6VXNlcjM1OTY5OTk=", "avatar_url": "https://avatars.githubusercontent.com/u/3596999?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gforsyth", "html_url": "https://github.com/gforsyth", "followers_url": "https://api.github.com/users/gforsyth/followers", "following_url": "https://api.github.com/users/gforsyth/following{/other_user}", "gists_url": "https://api.github.com/users/gforsyth/gists{/gist_id}", "starred_url": "https://api.github.com/users/gforsyth/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gforsyth/subscriptions", "organizations_url": "https://api.github.com/users/gforsyth/orgs", "repos_url": "https://api.github.com/users/gforsyth/repos", "events_url": "https://api.github.com/users/gforsyth/events{/privacy}", "received_events_url": "https://api.github.com/users/gforsyth/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 76984990, "node_id": "MDU6TGFiZWw3Njk4NDk5MA==", "url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 7, "created_at": "2016-02-26T14:53:59Z", "updated_at": "2016-02-27T10:10:41Z", "closed_at": "2016-02-26T21:00:57Z", "author_association": "NONE", "active_lock_reason": null, "body": "This was first noticed by @melund in scopatz/xonsh#703\n\nin `xonsh` master using the `prompt_toolkit` shell (version 0.58) lines that exceed the prompt width wrap (as expected) but then on execution the top 1 or 2 lines disappears\n\n![](https://cloud.githubusercontent.com/assets/1038978/13353473/f6578fec-dc94-11e5-8fe7-681972bb5104.png)\n\n![](https://cloud.githubusercontent.com/assets/1038978/13353525/563961f6-dc95-11e5-8924-d568510081ae.png)\n\nThe same is true if a long input is put in a tiny terminal in `examples/get-multiline-input.py`\n\n![2016-02-26-094752_447x594_escrotum](https://cloud.githubusercontent.com/assets/3596999/13355484/a8026450-dc6e-11e5-989a-813cfdf4b90a.png)\n![2016-02-26-094800_447x594_escrotum](https://cloud.githubusercontent.com/assets/3596999/13355485/a8049842-dc6e-11e5-94cb-5c158572c4e9.png)\n", "reactions": {"url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/254/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/254/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/245", "repository_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit", "labels_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/245/labels{/name}", "comments_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/245/comments", "events_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/245/events", "html_url": "https://github.com/prompt-toolkit/python-prompt-toolkit/issues/245", "id": 134952083, "node_id": "MDU6SXNzdWUxMzQ5NTIwODM=", "number": 245, "title": "bug in autosuggest text in multiline", "user": {"login": "gforsyth", "id": 3596999, "node_id": "MDQ6VXNlcjM1OTY5OTk=", "avatar_url": "https://avatars.githubusercontent.com/u/3596999?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gforsyth", "html_url": "https://github.com/gforsyth", "followers_url": "https://api.github.com/users/gforsyth/followers", "following_url": "https://api.github.com/users/gforsyth/following{/other_user}", "gists_url": "https://api.github.com/users/gforsyth/gists{/gist_id}", "starred_url": "https://api.github.com/users/gforsyth/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gforsyth/subscriptions", "organizations_url": "https://api.github.com/users/gforsyth/orgs", "repos_url": "https://api.github.com/users/gforsyth/repos", "events_url": "https://api.github.com/users/gforsyth/events{/privacy}", "received_events_url": "https://api.github.com/users/gforsyth/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 76984990, "node_id": "MDU6TGFiZWw3Njk4NDk5MA==", "url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2016-02-19T19:27:06Z", "updated_at": "2016-02-20T16:06:39Z", "closed_at": "2016-02-20T16:06:39Z", "author_association": "NONE", "active_lock_reason": null, "body": "`git bisect` points to 1a55699 as the culprit for this.  A minor display issue that I ran across in `xonsh`\n\nI'm on `xonsh` master for both of these.  \nWith `prompt_toolkit 0.57` this is the autosuggest display:\n\n![pt57xonshmaster](https://cloud.githubusercontent.com/assets/3596999/13186489/7824b2ec-d714-11e5-8e32-b0fc0af68954.png)\n\nAfter 1a55699 the autosuggest text is mirrored at the end of the first line:\n\n![ptmasterxonshmaster](https://cloud.githubusercontent.com/assets/3596999/13186490/78257222-d714-11e5-9465-3533c97faa08.png)\n", "reactions": {"url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/245/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/245/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/187", "repository_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit", "labels_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/187/labels{/name}", "comments_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/187/comments", "events_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/187/events", "html_url": "https://github.com/prompt-toolkit/python-prompt-toolkit/issues/187", "id": 116003822, "node_id": "MDU6SXNzdWUxMTYwMDM4MjI=", "number": 187, "title": "Patched stdout does not allow ANSI escape codes", "user": {"login": "trap15", "id": 6866714, "node_id": "MDQ6VXNlcjY4NjY3MTQ=", "avatar_url": "https://avatars.githubusercontent.com/u/6866714?v=4", "gravatar_id": "", "url": "https://api.github.com/users/trap15", "html_url": "https://github.com/trap15", "followers_url": "https://api.github.com/users/trap15/followers", "following_url": "https://api.github.com/users/trap15/following{/other_user}", "gists_url": "https://api.github.com/users/trap15/gists{/gist_id}", "starred_url": "https://api.github.com/users/trap15/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/trap15/subscriptions", "organizations_url": "https://api.github.com/users/trap15/orgs", "repos_url": "https://api.github.com/users/trap15/repos", "events_url": "https://api.github.com/users/trap15/events{/privacy}", "received_events_url": "https://api.github.com/users/trap15/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 76984990, "node_id": "MDU6TGFiZWw3Njk4NDk5MA==", "url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 17, "created_at": "2015-11-10T01:10:47Z", "updated_at": "2018-06-02T17:49:43Z", "closed_at": "2018-06-02T17:49:43Z", "author_association": "NONE", "active_lock_reason": null, "body": "Due to this line, ANSI escape codes are mangled and cannot be used by an application that also uses the patched stdout functionality. I was going to colorize messages from `logging` in my program with a formatter, but because of this it's not possible. I'm not even sure what the intent was here?\n\nhttps://github.com/jonathanslenders/python-prompt-toolkit/blame/master/prompt_toolkit/terminal/vt100_output.py#L184\n\nTo not sound like a total downer, this module is super amazing and is really damn useful.\n", "reactions": {"url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/187/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/187/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/170", "repository_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit", "labels_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/170/labels{/name}", "comments_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/170/comments", "events_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/170/events", "html_url": "https://github.com/prompt-toolkit/python-prompt-toolkit/issues/170", "id": 109881647, "node_id": "MDU6SXNzdWUxMDk4ODE2NDc=", "number": 170, "title": "Cannot get expanduser to work with PathCompleter", "user": {"login": "pombredanne", "id": 675997, "node_id": "MDQ6VXNlcjY3NTk5Nw==", "avatar_url": "https://avatars.githubusercontent.com/u/675997?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pombredanne", "html_url": "https://github.com/pombredanne", "followers_url": "https://api.github.com/users/pombredanne/followers", "following_url": "https://api.github.com/users/pombredanne/following{/other_user}", "gists_url": "https://api.github.com/users/pombredanne/gists{/gist_id}", "starred_url": "https://api.github.com/users/pombredanne/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pombredanne/subscriptions", "organizations_url": "https://api.github.com/users/pombredanne/orgs", "repos_url": "https://api.github.com/users/pombredanne/repos", "events_url": "https://api.github.com/users/pombredanne/events{/privacy}", "received_events_url": "https://api.github.com/users/pombredanne/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 76984990, "node_id": "MDU6TGFiZWw3Njk4NDk5MA==", "url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2015-10-05T20:40:42Z", "updated_at": "2015-10-07T19:49:09Z", "closed_at": "2015-10-07T19:49:01Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Using this minimal snippet:\n\n```\n\nfrom __future__ import unicode_literals\nfrom __future__ import print_function\nfrom prompt_toolkit.contrib.completers.filesystem import PathCompleter\nfrom prompt_toolkit.shortcuts import get_input\n\ndef main():\n    completer = PathCompleter(only_directories=False, expanduser=True)\n    while True:\n        try:\n            text = get_input('path> ', completer=completer)\n        except EOFError:\n            break\n        except KeyboardInterrupt:\n            continue\n        if text and text.strip():\n            print('You selected: ', text)\n\nif __name__ == '__main__':\n    main()\n```\n\nI fire the script and start typing `~/` and I get no completion at all...\nTyping tab completes on the path of os.cwd alright.\nI am getting something wrong to get exxpanduser to work?\n\nI think this is missing a test and possibly something like that about there:\nhttps://github.com/jonathanslenders/python-prompt-toolkit/blob/c7c306bc5ca57beff9a64150eb86b7d75453ab48/prompt_toolkit/contrib/completers/filesystem.py#L45\n\n```\nif self.expanduser:\n    text = os.path.expanduser(text)\n```\n", "reactions": {"url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/170/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/170/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/163", "repository_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit", "labels_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/163/labels{/name}", "comments_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/163/comments", "events_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/163/events", "html_url": "https://github.com/prompt-toolkit/python-prompt-toolkit/issues/163", "id": 107772468, "node_id": "MDU6SXNzdWUxMDc3NzI0Njg=", "number": 163, "title": "Reserving the bottom lines for completion in xonsh", "user": {"login": "melund", "id": 1038978, "node_id": "MDQ6VXNlcjEwMzg5Nzg=", "avatar_url": "https://avatars.githubusercontent.com/u/1038978?v=4", "gravatar_id": "", "url": "https://api.github.com/users/melund", "html_url": "https://github.com/melund", "followers_url": "https://api.github.com/users/melund/followers", "following_url": "https://api.github.com/users/melund/following{/other_user}", "gists_url": "https://api.github.com/users/melund/gists{/gist_id}", "starred_url": "https://api.github.com/users/melund/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/melund/subscriptions", "organizations_url": "https://api.github.com/users/melund/orgs", "repos_url": "https://api.github.com/users/melund/repos", "events_url": "https://api.github.com/users/melund/events{/privacy}", "received_events_url": "https://api.github.com/users/melund/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 76984990, "node_id": "MDU6TGFiZWw3Njk4NDk5MA==", "url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 11, "created_at": "2015-09-22T18:29:02Z", "updated_at": "2016-02-23T06:30:30Z", "closed_at": "2016-02-23T06:30:30Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Hi \n\nI think my reply got lost in a closed issue... So I am just creating a new issue instead.\n\n@jonathanslenders . I tried to test this, your solution for reserving the lower lines for completion. It no longer scrolls up just as I hit tab, but the problem is still the same. Now scrolling just happens just when a command is executed. It can best be explained with a video.\n\n[![ScreenShot](https://cloud.githubusercontent.com/assets/1038978/9493195/4a4e4b40-4bfe-11e5-9332-10b131d448fd.png)](https://youtu.be/61tEgbNKTmM)\n\nBtw. When I press tab at the start of a line. It inserts the tab characters as well as opening the completion box. (see the end of the video). Any idea if this is due to xonsh or prompt_toolkit? \n", "reactions": {"url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/163/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/163/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/158", "repository_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit", "labels_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/158/labels{/name}", "comments_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/158/comments", "events_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/158/events", "html_url": "https://github.com/prompt-toolkit/python-prompt-toolkit/issues/158", "id": 106728668, "node_id": "MDU6SXNzdWUxMDY3Mjg2Njg=", "number": 158, "title": "  ctrl-w ctrl-w then ctrl-y", "user": {"login": "dbolser-ebi", "id": 6094975, "node_id": "MDQ6VXNlcjYwOTQ5NzU=", "avatar_url": "https://avatars.githubusercontent.com/u/6094975?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dbolser-ebi", "html_url": "https://github.com/dbolser-ebi", "followers_url": "https://api.github.com/users/dbolser-ebi/followers", "following_url": "https://api.github.com/users/dbolser-ebi/following{/other_user}", "gists_url": "https://api.github.com/users/dbolser-ebi/gists{/gist_id}", "starred_url": "https://api.github.com/users/dbolser-ebi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dbolser-ebi/subscriptions", "organizations_url": "https://api.github.com/users/dbolser-ebi/orgs", "repos_url": "https://api.github.com/users/dbolser-ebi/repos", "events_url": "https://api.github.com/users/dbolser-ebi/events{/privacy}", "received_events_url": "https://api.github.com/users/dbolser-ebi/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 76984990, "node_id": "MDU6TGFiZWw3Njk4NDk5MA==", "url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2015-09-16T08:50:55Z", "updated_at": "2015-09-17T08:50:28Z", "closed_at": "2015-09-16T18:02:16Z", "author_association": "NONE", "active_lock_reason": null, "body": "In emacs this will eat the last two words then paste them both. In mycli (which uses python-prompt-toolkit) it eats two words then pasts only the last one eaten.\n", "reactions": {"url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/158/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/158/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/150", "repository_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit", "labels_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/150/labels{/name}", "comments_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/150/comments", "events_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/150/events", "html_url": "https://github.com/prompt-toolkit/python-prompt-toolkit/issues/150", "id": 103381149, "node_id": "MDU6SXNzdWUxMDMzODExNDk=", "number": 150, "title": "TypeError when running tutorial", "user": {"login": "ALSchwalm", "id": 1063999, "node_id": "MDQ6VXNlcjEwNjM5OTk=", "avatar_url": "https://avatars.githubusercontent.com/u/1063999?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ALSchwalm", "html_url": "https://github.com/ALSchwalm", "followers_url": "https://api.github.com/users/ALSchwalm/followers", "following_url": "https://api.github.com/users/ALSchwalm/following{/other_user}", "gists_url": "https://api.github.com/users/ALSchwalm/gists{/gist_id}", "starred_url": "https://api.github.com/users/ALSchwalm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ALSchwalm/subscriptions", "organizations_url": "https://api.github.com/users/ALSchwalm/orgs", "repos_url": "https://api.github.com/users/ALSchwalm/repos", "events_url": "https://api.github.com/users/ALSchwalm/events{/privacy}", "received_events_url": "https://api.github.com/users/ALSchwalm/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 76984990, "node_id": "MDU6TGFiZWw3Njk4NDk5MA==", "url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2015-08-26T22:40:55Z", "updated_at": "2015-09-04T17:28:12Z", "closed_at": "2015-09-04T17:28:12Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "When running `sqlite-cli.py`, it fails with\n\n```\nTraceback (most recent call last):\n  File \"sqlite-cli.py\", line 55, in <module>\n    main(db)\n  File \"sqlite-cli.py\", line 29, in main\n    history = History()\nTypeError: Can't instantiate abstract class History with abstract methods __getitem__, __len__, append\n```\n\nI'm running Python 3.4.3\n", "reactions": {"url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/150/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/150/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/131", "repository_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit", "labels_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/131/labels{/name}", "comments_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/131/comments", "events_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/131/events", "html_url": "https://github.com/prompt-toolkit/python-prompt-toolkit/issues/131", "id": 88948215, "node_id": "MDU6SXNzdWU4ODk0ODIxNQ==", "number": 131, "title": "ptipython raises ArgumentError: argument 1: <type 'exceptions.TypeError'>: wrong type", "user": {"login": "zhoushun123", "id": 12932569, "node_id": "MDQ6VXNlcjEyOTMyNTY5", "avatar_url": "https://avatars.githubusercontent.com/u/12932569?v=4", "gravatar_id": "", "url": "https://api.github.com/users/zhoushun123", "html_url": "https://github.com/zhoushun123", "followers_url": "https://api.github.com/users/zhoushun123/followers", "following_url": "https://api.github.com/users/zhoushun123/following{/other_user}", "gists_url": "https://api.github.com/users/zhoushun123/gists{/gist_id}", "starred_url": "https://api.github.com/users/zhoushun123/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/zhoushun123/subscriptions", "organizations_url": "https://api.github.com/users/zhoushun123/orgs", "repos_url": "https://api.github.com/users/zhoushun123/repos", "events_url": "https://api.github.com/users/zhoushun123/events{/privacy}", "received_events_url": "https://api.github.com/users/zhoushun123/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 76984990, "node_id": "MDU6TGFiZWw3Njk4NDk5MA==", "url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2015-06-17T08:04:58Z", "updated_at": "2015-07-16T09:56:27Z", "closed_at": "2015-07-16T09:56:27Z", "author_association": "NONE", "active_lock_reason": null, "body": "**My python environment:**\nwindows 7 sp1 64bit\nPython 2.7.10 (default, May 23 2015, 09:44:00) [MSC v.1500 64 bit (AMD64)]\nIPython 3.1.0 \nprompt-toolkit-0.40 \nptpython-0.14\n\n**Traceback:**\n\n``` python\n---------------------------------------------------------------------------\nArgumentError                             Traceback (most recent call last)\nD:\\Python27\\lib\\runpy.pyc in _run_module_as_main(mod_name, alter_argv)\n    160         sys.argv[0] = fname\n    161     return _run_code(code, main_globals, None,\n--> 162                      \"__main__\", fname, loader, pkg_name)\n    163\n    164 def run_module(mod_name, init_globals=None,\n\nD:\\Python27\\lib\\runpy.pyc in _run_code(code, run_globals, init_globals, mod_name\n, mod_fname, mod_loader, pkg_name)\n     70                        __loader__ = mod_loader,\n     71                        __package__ = pkg_name)\n---> 72     exec code in run_globals\n     73     return run_globals\n     74\n\nD:\\Python27\\Scripts\\ptipython.exe\\__main__.py in <module>()\n      7 if __name__ == '__main__':\n      8     sys.argv[0] = re.sub(r'(-script\\.pyw|\\.exe)?$', '', sys.argv[0])\n----> 9     sys.exit(run())\n\nD:\\Python27\\lib\\site-packages\\ptpython\\entry_points\\run_ptipython.pyc in run()\n     62               history_filename=os.path.join(config_dir, 'history'),\n     63               configure=configure,\n---> 64               user_ns=user_ns)\n     65\n     66\n\nD:\\Python27\\lib\\site-packages\\ptpython\\ipython.pyc in embed(**kwargs)\n    235         config.InteractiveShellEmbed = config.TerminalInteractiveShell\n    236         kwargs['config'] = config\n--> 237     shell = InteractiveShellEmbed.instance(**kwargs)\n    238     initialize_extensions(shell, config['InteractiveShellApp']['extensio\nns'])\n    239     shell(header=header, stack_depth=2, compile_flags=compile_flags)\n\nD:\\Python27\\lib\\site-packages\\IPython\\config\\configurable.pyc in instance(cls, *\nargs, **kwargs)\n    335         # Create and save the instance\n    336         if cls._instance is None:\n--> 337             inst = cls(*args, **kwargs)\n    338             # Now make sure that the instance will also be returned by\n    339             # parent classes' _instance attribute.\n\nD:\\Python27\\lib\\site-packages\\ptpython\\ipython.pyc in __init__(self, *a, **kw)\n    176             return self.user_ns\n    177\n--> 178         self._eventloop = create_eventloop()\n    179         ipython_input = IPythonInput(\n    180             self,\n\nD:\\Python27\\lib\\site-packages\\prompt_toolkit\\shortcuts.pyc in create_eventloop()\n\n     69         from prompt_toolkit.eventloop.posix import PosixEventLoop as Loo\np\n     70\n---> 71     return Loop()\n     72\n     73\n\nD:\\Python27\\lib\\site-packages\\prompt_toolkit\\eventloop\\win32.pyc in __init__(sel\nf)\n     26     def __init__(self):\n     27         self._event = _create_event()\n---> 28         self._console_input_reader = ConsoleInputReader()\n     29         self._calls_from_executor = []\n     30\n\nD:\\Python27\\lib\\site-packages\\prompt_toolkit\\terminal\\win32_input.pyc in __init_\n_(self)\n     95\n     96     def __init__(self):\n---> 97         self.handle = windll.kernel32.GetStdHandle(STD_INPUT_HANDLE)\n     98\n     99     def read(self):\n\nArgumentError: argument 1: <type 'exceptions.TypeError'>: wrong type\n```\n", "reactions": {"url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/131/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/131/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/129", "repository_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit", "labels_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/129/labels{/name}", "comments_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/129/comments", "events_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/129/events", "html_url": "https://github.com/prompt-toolkit/python-prompt-toolkit/issues/129", "id": 88829654, "node_id": "MDU6SXNzdWU4ODgyOTY1NA==", "number": 129, "title": "Control-T Emacs keybinding swaps wrong characters", "user": {"login": "brenns10", "id": 5682515, "node_id": "MDQ6VXNlcjU2ODI1MTU=", "avatar_url": "https://avatars.githubusercontent.com/u/5682515?v=4", "gravatar_id": "", "url": "https://api.github.com/users/brenns10", "html_url": "https://github.com/brenns10", "followers_url": "https://api.github.com/users/brenns10/followers", "following_url": "https://api.github.com/users/brenns10/following{/other_user}", "gists_url": "https://api.github.com/users/brenns10/gists{/gist_id}", "starred_url": "https://api.github.com/users/brenns10/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/brenns10/subscriptions", "organizations_url": "https://api.github.com/users/brenns10/orgs", "repos_url": "https://api.github.com/users/brenns10/repos", "events_url": "https://api.github.com/users/brenns10/events{/privacy}", "received_events_url": "https://api.github.com/users/brenns10/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 76984990, "node_id": "MDU6TGFiZWw3Njk4NDk5MA==", "url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2015-06-16T20:17:35Z", "updated_at": "2015-06-18T20:05:26Z", "closed_at": "2015-06-18T20:05:26Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "In Emacs, the shortcut `C-t` (`transpose-chars`) does the following things:\n- Swap the character under point with the character before it.\n- Move point one character to the right.\n\n(The only exception here is when point is at the end of the line, in which case it swaps the _two characters to the left of point_, and keeps point where it is).\n\nSo, if you had \"a**b**c\" in a buffer (bold represents point), then after doing `C-t`, you would have \"ba**c**\".\n\nThe keybinding in `prompt_toolkit` always swaps the two characters to the left of point, and doesn't move it.  It seems silly, but the transpose shortcut can be a ridiculously useful one, and when the semantics are just a bit off like this, it can really mess you up!  It would be nice if `C-t` behaved the same as Emacs.  Is this something that you'd feel comfortable changing, or is it implemented that way for a reason?\n\nI see that the ControlT binding is implemented in `prompt_toolkit.key_bindings.bindings.basic` and not overridden in `prompt_toolkit.key_bindings.bindings.emacs`.  I could probably implement the expected behavior and submit a PR, but I wanted to figure out if you'd be open to such a change before spending time on it.\n\n(Also, _great_ work on this module!  I use it daily as a replacement for the default REPLs, and it blows them away!  I really appreciate the work.)\n", "reactions": {"url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/129/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/129/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/128", "repository_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit", "labels_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/128/labels{/name}", "comments_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/128/comments", "events_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/128/events", "html_url": "https://github.com/prompt-toolkit/python-prompt-toolkit/issues/128", "id": 88824324, "node_id": "MDU6SXNzdWU4ODgyNDMyNA==", "number": 128, "title": "vi mode example assertion error", "user": {"login": "Aluriak", "id": 1257159, "node_id": "MDQ6VXNlcjEyNTcxNTk=", "avatar_url": "https://avatars.githubusercontent.com/u/1257159?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Aluriak", "html_url": "https://github.com/Aluriak", "followers_url": "https://api.github.com/users/Aluriak/followers", "following_url": "https://api.github.com/users/Aluriak/following{/other_user}", "gists_url": "https://api.github.com/users/Aluriak/gists{/gist_id}", "starred_url": "https://api.github.com/users/Aluriak/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Aluriak/subscriptions", "organizations_url": "https://api.github.com/users/Aluriak/orgs", "repos_url": "https://api.github.com/users/Aluriak/repos", "events_url": "https://api.github.com/users/Aluriak/events{/privacy}", "received_events_url": "https://api.github.com/users/Aluriak/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 76984990, "node_id": "MDU6TGFiZWw3Njk4NDk5MA==", "url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2015-06-16T19:51:50Z", "updated_at": "2015-06-18T20:06:13Z", "closed_at": "2015-06-18T20:06:13Z", "author_association": "NONE", "active_lock_reason": null, "body": "When launch Python3 on [vi_mode example](https://github.com/jonathanslenders/python-prompt-toolkit/blob/master/examples/get-input-vi-mode.py), the following stack trace is generated :\n\n```\nYou have Vi keybindings here. Press [Esc] to go to navigation mode.\nTraceback (most recent call last):\n  File \"p.py\", line 8, in <module>\n    answer = get_input('Give me some input: ', multiline=False, vi_mode=True)\n  File \"/usr/lib/python3.4/site-packages/prompt_toolkit/shortcuts.py\", line 266, in get_input\n    application=create_default_application(message, **kwargs),\n  File \"/usr/lib/python3.4/site-packages/prompt_toolkit/shortcuts.py\", line 229, in create_default_application\n    enable_open_in_editor=enable_open_in_editor).registry\n  File \"/usr/lib/python3.4/site-packages/prompt_toolkit/key_binding/manager.py\", line 44, in __init__\n    assert isinstance(enable_vi_mode, CLIFilter)\nAssertionError\n```\n", "reactions": {"url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/128/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/128/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/127", "repository_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit", "labels_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/127/labels{/name}", "comments_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/127/comments", "events_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/127/events", "html_url": "https://github.com/prompt-toolkit/python-prompt-toolkit/issues/127", "id": 88529191, "node_id": "MDU6SXNzdWU4ODUyOTE5MQ==", "number": 127, "title": "Autocompletion menu leaves traces on Windows.", "user": {"login": "jonathanslenders", "id": 216638, "node_id": "MDQ6VXNlcjIxNjYzOA==", "avatar_url": "https://avatars.githubusercontent.com/u/216638?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jonathanslenders", "html_url": "https://github.com/jonathanslenders", "followers_url": "https://api.github.com/users/jonathanslenders/followers", "following_url": "https://api.github.com/users/jonathanslenders/following{/other_user}", "gists_url": "https://api.github.com/users/jonathanslenders/gists{/gist_id}", "starred_url": "https://api.github.com/users/jonathanslenders/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jonathanslenders/subscriptions", "organizations_url": "https://api.github.com/users/jonathanslenders/orgs", "repos_url": "https://api.github.com/users/jonathanslenders/repos", "events_url": "https://api.github.com/users/jonathanslenders/events{/privacy}", "received_events_url": "https://api.github.com/users/jonathanslenders/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 76984990, "node_id": "MDU6TGFiZWw3Njk4NDk5MA==", "url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2015-06-15T20:17:38Z", "updated_at": "2015-07-13T13:09:27Z", "closed_at": "2015-07-13T13:09:27Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "`cmd.exe` shows vertical lines after the completion menu hides. Probably a bug in cmd.\n\nA possible workaround is to call the repaint API after drawing;\n\n``` python\n # WIN32 update\n from ctypes.wintypes import HANDLE\n from ctypes import windll, c_uint\n\n # Get console handle\n handle = windll.kernel32.GetConsoleWindow()\n\n RDW_INVALIDATE = 0x0001\n windll.user32.RedrawWindow(handle, None, None, c_uint(RDW_INVALIDATE))\n```\n", "reactions": {"url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/127/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/127/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/124", "repository_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit", "labels_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/124/labels{/name}", "comments_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/124/comments", "events_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/124/events", "html_url": "https://github.com/prompt-toolkit/python-prompt-toolkit/issues/124", "id": 84294140, "node_id": "MDU6SXNzdWU4NDI5NDE0MA==", "number": 124, "title": "History doesn't work", "user": {"login": "tyilo", "id": 568036, "node_id": "MDQ6VXNlcjU2ODAzNg==", "avatar_url": "https://avatars.githubusercontent.com/u/568036?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tyilo", "html_url": "https://github.com/tyilo", "followers_url": "https://api.github.com/users/tyilo/followers", "following_url": "https://api.github.com/users/tyilo/following{/other_user}", "gists_url": "https://api.github.com/users/tyilo/gists{/gist_id}", "starred_url": "https://api.github.com/users/tyilo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tyilo/subscriptions", "organizations_url": "https://api.github.com/users/tyilo/orgs", "repos_url": "https://api.github.com/users/tyilo/repos", "events_url": "https://api.github.com/users/tyilo/events{/privacy}", "received_events_url": "https://api.github.com/users/tyilo/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 76984990, "node_id": "MDU6TGFiZWw3Njk4NDk5MA==", "url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 7, "created_at": "2015-06-03T01:19:12Z", "updated_at": "2015-06-03T19:05:25Z", "closed_at": "2015-06-03T19:05:25Z", "author_association": "NONE", "active_lock_reason": null, "body": "Code:\n\n```\nfrom __future__ import unicode_literals\nfrom prompt_toolkit.shortcuts import get_input\nfrom prompt_toolkit.history import History\n\ndef main():\n    history = History()\n\n    while True:\n        text = get_input(\"> \", history=history)\n        print('You entered:', text)\n    print('GoodBye!')\n\nif __name__ == '__main__':\n    main()\n```\n\nEntering `foo` and then pressing the up-arrow does nothing. This happens in both Python 2.7.9 and 3.4.2 on OS X 10.10.3.\n", "reactions": {"url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/124/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/124/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/123", "repository_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit", "labels_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/123/labels{/name}", "comments_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/123/comments", "events_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/123/events", "html_url": "https://github.com/prompt-toolkit/python-prompt-toolkit/issues/123", "id": 84226188, "node_id": "MDU6SXNzdWU4NDIyNjE4OA==", "number": 123, "title": "REPL tutorial fails in Python 2.7", "user": {"login": "lillian27", "id": 2107631, "node_id": "MDQ6VXNlcjIxMDc2MzE=", "avatar_url": "https://avatars.githubusercontent.com/u/2107631?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lillian27", "html_url": "https://github.com/lillian27", "followers_url": "https://api.github.com/users/lillian27/followers", "following_url": "https://api.github.com/users/lillian27/following{/other_user}", "gists_url": "https://api.github.com/users/lillian27/gists{/gist_id}", "starred_url": "https://api.github.com/users/lillian27/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lillian27/subscriptions", "organizations_url": "https://api.github.com/users/lillian27/orgs", "repos_url": "https://api.github.com/users/lillian27/repos", "events_url": "https://api.github.com/users/lillian27/events{/privacy}", "received_events_url": "https://api.github.com/users/lillian27/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 76984990, "node_id": "MDU6TGFiZWw3Njk4NDk5MA==", "url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2015-06-02T21:45:42Z", "updated_at": "2015-12-20T07:38:43Z", "closed_at": "2015-06-03T18:14:40Z", "author_association": "NONE", "active_lock_reason": null, "body": "Code provided for initial step in REPL tutorial fails in Python 2.7 (clean virtualenv, only prompt_toolkit and deps installed):\n\n``` python\nfrom prompt_toolkit.shortcuts import get_input\n\ndef main():\n    text = get_input(\"> \")\n    print('You entered:', text)\n\nif __name__ == '__main__':\n    main()\n```\n\n> File \"/Users/lillian/Documents/Projects/st_p2x/lib/python2.7/site-packages/prompt_toolkit/shortcuts.py\", line 266, in get_input\n>     application=create_default_application(message, **kwargs),\n>   File \"/Users/lillian/Documents/Projects/st_p2x/lib/python2.7/site-packages/prompt_toolkit/shortcuts.py\", line 239, in create_default_application\n>     extra_input_processors=extra_input_processors),\n>   File \"/Users/lillian/Documents/Projects/st_p2x/lib/python2.7/site-packages/prompt_toolkit/shortcuts.py\", line 122, in create_default_layout\n>     assert isinstance(message, text_type)\n> AssertionError\n\nThis same code works as advertised in Python 3.4\n", "reactions": {"url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/123/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/123/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/121", "repository_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit", "labels_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/121/labels{/name}", "comments_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/121/comments", "events_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/121/events", "html_url": "https://github.com/prompt-toolkit/python-prompt-toolkit/issues/121", "id": 83398190, "node_id": "MDU6SXNzdWU4MzM5ODE5MA==", "number": 121, "title": "Some files needs to be updated ", "user": {"login": "fbenmena", "id": 2233967, "node_id": "MDQ6VXNlcjIyMzM5Njc=", "avatar_url": "https://avatars.githubusercontent.com/u/2233967?v=4", "gravatar_id": "", "url": "https://api.github.com/users/fbenmena", "html_url": "https://github.com/fbenmena", "followers_url": "https://api.github.com/users/fbenmena/followers", "following_url": "https://api.github.com/users/fbenmena/following{/other_user}", "gists_url": "https://api.github.com/users/fbenmena/gists{/gist_id}", "starred_url": "https://api.github.com/users/fbenmena/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/fbenmena/subscriptions", "organizations_url": "https://api.github.com/users/fbenmena/orgs", "repos_url": "https://api.github.com/users/fbenmena/repos", "events_url": "https://api.github.com/users/fbenmena/events{/privacy}", "received_events_url": "https://api.github.com/users/fbenmena/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 76984990, "node_id": "MDU6TGFiZWw3Njk4NDk5MA==", "url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2015-06-01T09:07:13Z", "updated_at": "2015-06-01T18:27:46Z", "closed_at": "2015-06-01T18:27:42Z", "author_association": "NONE", "active_lock_reason": null, "body": "Since some recent changes invloving `KeyBindingManager` the awesome `layout.py` example\ndoesn't run anymore.\n\nHope this helps.\nRegards \n", "reactions": {"url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/121/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/121/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/116", "repository_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit", "labels_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/116/labels{/name}", "comments_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/116/comments", "events_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/116/events", "html_url": "https://github.com/prompt-toolkit/python-prompt-toolkit/issues/116", "id": 80825172, "node_id": "MDU6SXNzdWU4MDgyNTE3Mg==", "number": 116, "title": "Completions break when user input is longer than a chosen suggestion", "user": {"login": "amjith", "id": 49260, "node_id": "MDQ6VXNlcjQ5MjYw", "avatar_url": "https://avatars.githubusercontent.com/u/49260?v=4", "gravatar_id": "", "url": "https://api.github.com/users/amjith", "html_url": "https://github.com/amjith", "followers_url": "https://api.github.com/users/amjith/followers", "following_url": "https://api.github.com/users/amjith/following{/other_user}", "gists_url": "https://api.github.com/users/amjith/gists{/gist_id}", "starred_url": "https://api.github.com/users/amjith/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/amjith/subscriptions", "organizations_url": "https://api.github.com/users/amjith/orgs", "repos_url": "https://api.github.com/users/amjith/repos", "events_url": "https://api.github.com/users/amjith/events{/privacy}", "received_events_url": "https://api.github.com/users/amjith/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 76984990, "node_id": "MDU6TGFiZWw3Njk4NDk5MA==", "url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2015-05-26T06:49:58Z", "updated_at": "2015-05-27T21:21:26Z", "closed_at": "2015-05-27T21:21:26Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "I'm trying a new fuzzy completer for prompt_toolkit and during an experiment I uncovered the following bug.\n\nTry the following example script: \n\n```\n#!/usr/bin/env python\nfrom __future__ import unicode_literals\n\nfrom prompt_toolkit.completion import Completer, Completion\nfrom prompt_toolkit.shortcuts import get_input\n\n\nanimals = [\n    'alligator',\n    'fish',\n    'turtle',\n    ]\n\nclass FuzzyCompleter(Completer):\n    def get_completions(self, document, complete_event):\n        word_before_cursor = document.get_word_before_cursor(WORD=True)\n        yield Completion(animals[0], -len(word_before_cursor))\n\ndef main():\n    text = get_input('Give some animals: ', completer=FuzzyCompleter())\n    print('You said: %s' % text)\n\nif __name__ == '__main__':\n    main()\n\n```\n\nSave it as auto_fuzzy.py and run it. `python auto_fuzzy.py`. \n\nIn the user input type `abcdefaalkjafoij` (or something quite long) and then press `<tab>`. It will crash with the following error message: \n\n```\nGive some animals: ads;kljaoijasdlkjf;alkjTraceback (most recent call last):\n  File \"auto_fuzzy.py\", line 24, in <module>\n    main()\n  File \"auto_fuzzy.py\", line 20, in main\n    text = get_input('Give some animals: ', completer=FuzzyCompleter())\n  File \"/Users/amjith/Dropbox/code/python/python-prompt-toolkit/prompt_toolkit/shortcuts.py\", line 286, in get_input\n    document = cli.read_input()\n  File \"/Users/amjith/Dropbox/code/python/python-prompt-toolkit/prompt_toolkit/interface.py\", line 321, in read_input\n    self.eventloop.run(self.stdin, self.create_eventloop_callbacks())\n  File \"/Users/amjith/Dropbox/code/python/python-prompt-toolkit/prompt_toolkit/eventloop/posix.py\", line 81, in run\n    c()\n  File \"/Users/amjith/Dropbox/code/python/python-prompt-toolkit/prompt_toolkit/interface.py\", line 570, in callback\n    self._redraw()\n  File \"/Users/amjith/Dropbox/code/python/python-prompt-toolkit/prompt_toolkit/interface.py\", line 293, in _redraw\n    self.renderer.render(self, self.layout, self.style)\n  File \"/Users/amjith/Dropbox/code/python/python-prompt-toolkit/prompt_toolkit/renderer.py\", line 307, in render\n    extended_height=size.rows,\n  File \"/Users/amjith/Dropbox/code/python/python-prompt-toolkit/prompt_toolkit/layout/containers.py\", line 81, in write_to_screen\n    dimensions = [c.height(cli, write_position.width) for c in self.children]\n  File \"/Users/amjith/Dropbox/code/python/python-prompt-toolkit/prompt_toolkit/layout/containers.py\", line 239, in height\n    return self.content.height(cli, width)\n  File \"/Users/amjith/Dropbox/code/python/python-prompt-toolkit/prompt_toolkit/layout/containers.py\", line 594, in height\n    preferred_height = self.content.preferred_height(cli, width)\n  File \"/Users/amjith/Dropbox/code/python/python-prompt-toolkit/prompt_toolkit/layout/controls.py\", line 237, in preferred_height\n    screen = self.create_screen(cli, width, None)\n  File \"/Users/amjith/Dropbox/code/python/python-prompt-toolkit/prompt_toolkit/layout/controls.py\", line 378, in create_screen\n    x, y = cursor_position_to_xy(buffer.complete_state.original_document.cursor_position)\n  File \"/Users/amjith/Dropbox/code/python/python-prompt-toolkit/prompt_toolkit/layout/controls.py\", line 336, in cursor_position_to_xy\n    return indexes_to_pos[cursor_position]\nKeyError: 42\n```\n\nThe cause is the user input is longer than the completion that was recommended when the <tab> key is pressed. This exception doesn't happen if the user input is shorter than the suggestion. \n\nedit: Escape `<tab>` so github doesn't think it's a html tag. \n", "reactions": {"url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/116/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/116/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/115", "repository_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit", "labels_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/115/labels{/name}", "comments_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/115/comments", "events_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/115/events", "html_url": "https://github.com/prompt-toolkit/python-prompt-toolkit/issues/115", "id": 79711637, "node_id": "MDU6SXNzdWU3OTcxMTYzNw==", "number": 115, "title": "Redraw only one window", "user": {"login": "jucacrispim", "id": 181743, "node_id": "MDQ6VXNlcjE4MTc0Mw==", "avatar_url": "https://avatars.githubusercontent.com/u/181743?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jucacrispim", "html_url": "https://github.com/jucacrispim", "followers_url": "https://api.github.com/users/jucacrispim/followers", "following_url": "https://api.github.com/users/jucacrispim/following{/other_user}", "gists_url": "https://api.github.com/users/jucacrispim/gists{/gist_id}", "starred_url": "https://api.github.com/users/jucacrispim/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jucacrispim/subscriptions", "organizations_url": "https://api.github.com/users/jucacrispim/orgs", "repos_url": "https://api.github.com/users/jucacrispim/repos", "events_url": "https://api.github.com/users/jucacrispim/events{/privacy}", "received_events_url": "https://api.github.com/users/jucacrispim/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 76984990, "node_id": "MDU6TGFiZWw3Njk4NDk5MA==", "url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 7, "created_at": "2015-05-23T03:49:07Z", "updated_at": "2018-05-15T04:14:11Z", "closed_at": "2018-05-15T04:14:11Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi.\n\nI have a layout with two window inside a HSplit. In the bottom window I have an input and in the upper window I'm displaying the output with a TokenListControl. Is there a way to redraw only one window when the user submit some data?\n\nThanks.\n", "reactions": {"url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/115/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/115/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/87", "repository_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit", "labels_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/87/labels{/name}", "comments_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/87/comments", "events_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/87/events", "html_url": "https://github.com/prompt-toolkit/python-prompt-toolkit/issues/87", "id": 54032558, "node_id": "MDU6SXNzdWU1NDAzMjU1OA==", "number": 87, "title": "Prompt Search mode doesn't allow backspace", "user": {"login": "amjith", "id": 49260, "node_id": "MDQ6VXNlcjQ5MjYw", "avatar_url": "https://avatars.githubusercontent.com/u/49260?v=4", "gravatar_id": "", "url": "https://api.github.com/users/amjith", "html_url": "https://github.com/amjith", "followers_url": "https://api.github.com/users/amjith/followers", "following_url": "https://api.github.com/users/amjith/following{/other_user}", "gists_url": "https://api.github.com/users/amjith/gists{/gist_id}", "starred_url": "https://api.github.com/users/amjith/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/amjith/subscriptions", "organizations_url": "https://api.github.com/users/amjith/orgs", "repos_url": "https://api.github.com/users/amjith/repos", "events_url": "https://api.github.com/users/amjith/events{/privacy}", "received_events_url": "https://api.github.com/users/amjith/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 76984990, "node_id": "MDU6TGFiZWw3Njk4NDk5MA==", "url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2015-01-12T09:13:58Z", "updated_at": "2015-04-12T15:29:50Z", "closed_at": "2015-04-12T15:29:50Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Right now when I press Ctrl-R to go into the prompt search mode, I'm unable to correct my search term using backspace or Ctrl-W or Ctrl-U. \n\nBut all those keys work fine if I use the SearchToolbar mode. \n", "reactions": {"url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/87/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/87/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/83", "repository_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit", "labels_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/83/labels{/name}", "comments_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/83/comments", "events_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/83/events", "html_url": "https://github.com/prompt-toolkit/python-prompt-toolkit/issues/83", "id": 53598771, "node_id": "MDU6SXNzdWU1MzU5ODc3MQ==", "number": 83, "title": "Does not handle f1-f4 in rxvt-unicode / use terminfo?", "user": {"login": "blueyed", "id": 9766, "node_id": "MDQ6VXNlcjk3NjY=", "avatar_url": "https://avatars.githubusercontent.com/u/9766?v=4", "gravatar_id": "", "url": "https://api.github.com/users/blueyed", "html_url": "https://github.com/blueyed", "followers_url": "https://api.github.com/users/blueyed/followers", "following_url": "https://api.github.com/users/blueyed/following{/other_user}", "gists_url": "https://api.github.com/users/blueyed/gists{/gist_id}", "starred_url": "https://api.github.com/users/blueyed/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/blueyed/subscriptions", "organizations_url": "https://api.github.com/users/blueyed/orgs", "repos_url": "https://api.github.com/users/blueyed/repos", "events_url": "https://api.github.com/users/blueyed/events{/privacy}", "received_events_url": "https://api.github.com/users/blueyed/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 76984990, "node_id": "MDU6TGFiZWw3Njk4NDk5MA==", "url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2015-01-07T05:21:48Z", "updated_at": "2015-01-07T08:08:56Z", "closed_at": "2015-01-07T08:08:56Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "rxvt-unicode has non-standard escape codes for `F1` to `F1`: it uses `\\E[11~` to `\\E[14~`, instead of `\\EOP` to `\\EOS`.\n\nThis can be seen in `infocmp -1`.\n\nDo you plan to use `terminfo`, instead of the hard coded escape sequences?\n\n(I've came here because I've noticed that the function keys do not work in https://github.com/amjith/pgcli)\n", "reactions": {"url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/83/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/83/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/80", "repository_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit", "labels_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/80/labels{/name}", "comments_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/80/comments", "events_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/80/events", "html_url": "https://github.com/prompt-toolkit/python-prompt-toolkit/issues/80", "id": 53299724, "node_id": "MDU6SXNzdWU1MzI5OTcyNA==", "number": 80, "title": "Broken on Windows: ImportError: cannot import name KeyPress", "user": {"login": "ionelmc", "id": 129501, "node_id": "MDQ6VXNlcjEyOTUwMQ==", "avatar_url": "https://avatars.githubusercontent.com/u/129501?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ionelmc", "html_url": "https://github.com/ionelmc", "followers_url": "https://api.github.com/users/ionelmc/followers", "following_url": "https://api.github.com/users/ionelmc/following{/other_user}", "gists_url": "https://api.github.com/users/ionelmc/gists{/gist_id}", "starred_url": "https://api.github.com/users/ionelmc/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ionelmc/subscriptions", "organizations_url": "https://api.github.com/users/ionelmc/orgs", "repos_url": "https://api.github.com/users/ionelmc/repos", "events_url": "https://api.github.com/users/ionelmc/events{/privacy}", "received_events_url": "https://api.github.com/users/ionelmc/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 76984990, "node_id": "MDU6TGFiZWw3Njk4NDk5MA==", "url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2015-01-03T09:50:57Z", "updated_at": "2015-01-03T21:20:50Z", "closed_at": "2015-01-03T21:20:50Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "This happens on Windows 8.1 and Python 2.7.9 (tested from https://github.com/jonathanslenders/python-prompt-toolkit/tree/d87196e3d46e9024117c477579a7fda4cab2be90)\n\n```\nC:\\Users\\ionel_000>ptpython\nTraceback (most recent call last):\n  File \"C:\\Python27\\lib\\runpy.py\", line 162, in _run_module_as_main\n    \"__main__\", fname, loader, pkg_name)\n  File \"C:\\Python27\\lib\\runpy.py\", line 72, in _run_code\n    exec code in run_globals\n  File \"c:\\Python27\\Scripts\\ptpython.exe\\__main__.py\", line 5, in <module>\n  File \"C:\\Python27\\lib\\site-packages\\prompt_toolkit\\__init__.py\", line 31, in <module>\n    from .terminal.win32_input import raw_mode, cooked_mode\n  File \"C:\\Python27\\lib\\site-packages\\prompt_toolkit\\terminal\\win32_input.py\", line 5, in <module>\n    from ..key_binding import KeyPress\nImportError: cannot import name KeyPress\n```\n", "reactions": {"url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/80/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/80/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/73", "repository_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit", "labels_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/73/labels{/name}", "comments_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/73/comments", "events_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/73/events", "html_url": "https://github.com/prompt-toolkit/python-prompt-toolkit/issues/73", "id": 52559490, "node_id": "MDU6SXNzdWU1MjU1OTQ5MA==", "number": 73, "title": "Cannot open ptpython after installation.", "user": {"login": "c02y", "id": 2135996, "node_id": "MDQ6VXNlcjIxMzU5OTY=", "avatar_url": "https://avatars.githubusercontent.com/u/2135996?v=4", "gravatar_id": "", "url": "https://api.github.com/users/c02y", "html_url": "https://github.com/c02y", "followers_url": "https://api.github.com/users/c02y/followers", "following_url": "https://api.github.com/users/c02y/following{/other_user}", "gists_url": "https://api.github.com/users/c02y/gists{/gist_id}", "starred_url": "https://api.github.com/users/c02y/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/c02y/subscriptions", "organizations_url": "https://api.github.com/users/c02y/orgs", "repos_url": "https://api.github.com/users/c02y/repos", "events_url": "https://api.github.com/users/c02y/events{/privacy}", "received_events_url": "https://api.github.com/users/c02y/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 76984990, "node_id": "MDU6TGFiZWw3Njk4NDk5MA==", "url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2014-12-20T10:11:52Z", "updated_at": "2015-01-03T21:22:22Z", "closed_at": "2015-01-03T21:22:22Z", "author_association": "NONE", "active_lock_reason": null, "body": "I use the\n\n```\nsudo pip install ptpyton\n```\n\nsuggested in your [README.rst](https://github.com/jonathanslenders/python-prompt-toolkit#installation). But after execute in terminal, the output is this:\n\n```\nTraceback (most recent call last):\n  File \"/usr/bin/ptpython\", line 9, in <module>\n    load_entry_point('prompt-toolkit==0.25', 'console_scripts', 'ptpython')()\n  File \"/usr/lib/python2.7/site-packages/pkg_resources.py\", line 348, in load_entry_point\n    return get_distribution(dist).load_entry_point(group, name)\n  File \"/usr/lib/python2.7/site-packages/pkg_resources.py\", line 2311, in load_entry_point\n    return ep.load()\n  File \"/usr/lib/python2.7/site-packages/pkg_resources.py\", line 2025, in load\n    entry = __import__(self.module_name, globals(),globals(), ['__name__'])\n  File \"/usr/lib/python2.7/site-packages/prompt_toolkit/contrib/entry_points/ptpython.py\", line 26, in <module>\n    from prompt_toolkit.contrib.repl import embed\n  File \"/usr/lib/python2.7/site-packages/prompt_toolkit/contrib/repl.py\", line 20, in <module>\n    from prompt_toolkit.contrib.python_input import PythonCommandLineInterface, PythonStyle, AutoCompletionStyle\n  File \"/usr/lib/python2.7/site-packages/prompt_toolkit/contrib/python_input.py\", line 37, in <module>\n    import jedi\n  File \"/usr/lib/python2.7/site-packages/jedi/__init__.py\", line 45, in <module>\n    from .api import Script, Interpreter, NotFoundError, set_debug_function\n  File \"/usr/lib/python2.7/site-packages/jedi/api/__init__.py\", line 18, in <module>\n    from jedi.parser import Parser\n  File \"/usr/lib/python2.7/site-packages/jedi/parser/__init__.py\", line 23, in <module>\n    from jedi.parser import representation as pr\n  File \"/usr/lib/python2.7/site-packages/jedi/parser/representation.py\", line 41, in <module>\n    from jedi._compatibility import (next, Python3Method, encoding, unicode,\nImportError: cannot import name is_py3\n```\n\nFYI: \n\nIt works fine when I'm using Fedora 20, but now it outputs errors like above after upgrading to Fedora 21. I've tried to uninstall it, but it doesn't work.\n", "reactions": {"url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/73/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/73/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/72", "repository_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit", "labels_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/72/labels{/name}", "comments_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/72/comments", "events_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/72/events", "html_url": "https://github.com/prompt-toolkit/python-prompt-toolkit/issues/72", "id": 52089274, "node_id": "MDU6SXNzdWU1MjA4OTI3NA==", "number": 72, "title": "DistributionNotFound exception with jedi version 0.8.1-final0", "user": {"login": "pgy", "id": 3483222, "node_id": "MDQ6VXNlcjM0ODMyMjI=", "avatar_url": "https://avatars.githubusercontent.com/u/3483222?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pgy", "html_url": "https://github.com/pgy", "followers_url": "https://api.github.com/users/pgy/followers", "following_url": "https://api.github.com/users/pgy/following{/other_user}", "gists_url": "https://api.github.com/users/pgy/gists{/gist_id}", "starred_url": "https://api.github.com/users/pgy/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pgy/subscriptions", "organizations_url": "https://api.github.com/users/pgy/orgs", "repos_url": "https://api.github.com/users/pgy/repos", "events_url": "https://api.github.com/users/pgy/events{/privacy}", "received_events_url": "https://api.github.com/users/pgy/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 76984990, "node_id": "MDU6TGFiZWw3Njk4NDk5MA==", "url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 7, "created_at": "2014-12-16T09:20:54Z", "updated_at": "2015-01-03T16:32:57Z", "closed_at": "2015-01-03T16:32:57Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "The most recent jedi version seems to be [`0.8.1-final0`](https://github.com/davidhalter/jedi/blob/cd648e933bfa89adcb2a92d856abe0b1900c0d90/jedi/__init__.py#L37), causing a `DistributionNotFound` exception during installation with setup.py or launching ptpython.\nA possible workaround is to replace `jedi-0.8.1` with `jedi` in setup.py.\n\n```\n~$ pip3 freeze | grep -iP 'jedi|prompt'\njedi==0.8.1-final0\nprompt-toolkit==0.25\n```\n", "reactions": {"url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/72/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/72/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/70", "repository_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit", "labels_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/70/labels{/name}", "comments_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/70/comments", "events_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/70/events", "html_url": "https://github.com/prompt-toolkit/python-prompt-toolkit/issues/70", "id": 50954435, "node_id": "MDU6SXNzdWU1MDk1NDQzNQ==", "number": 70, "title": "ptipython raises KeyError: 'extensions'", "user": {"login": "flying-sheep", "id": 291575, "node_id": "MDQ6VXNlcjI5MTU3NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/291575?v=4", "gravatar_id": "", "url": "https://api.github.com/users/flying-sheep", "html_url": "https://github.com/flying-sheep", "followers_url": "https://api.github.com/users/flying-sheep/followers", "following_url": "https://api.github.com/users/flying-sheep/following{/other_user}", "gists_url": "https://api.github.com/users/flying-sheep/gists{/gist_id}", "starred_url": "https://api.github.com/users/flying-sheep/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/flying-sheep/subscriptions", "organizations_url": "https://api.github.com/users/flying-sheep/orgs", "repos_url": "https://api.github.com/users/flying-sheep/repos", "events_url": "https://api.github.com/users/flying-sheep/events{/privacy}", "received_events_url": "https://api.github.com/users/flying-sheep/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 76984990, "node_id": "MDU6TGFiZWw3Njk4NDk5MA==", "url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 7, "created_at": "2014-12-04T10:03:07Z", "updated_at": "2015-06-03T18:47:51Z", "closed_at": "2015-06-03T18:47:51Z", "author_association": "NONE", "active_lock_reason": null, "body": "Traceback:\n\n``` python\n---------------------------------------------------------------------------\nKeyError                                  Traceback (most recent call last)\n/usr/local/bin/ptipython in <module>()\n      7 if __name__ == '__main__':\n      8     sys.exit(\n----> 9         load_entry_point('prompt-toolkit==0.23', 'console_scripts', 'ptipython')()\n     10     )\n\n/usr/local/lib/python3.4/dist-packages/prompt_toolkit/contrib/entry_points/ptipython.py in run()\n     73               autocompletion_style=autocompletion_style,\n     74               always_multiline=always_multiline,\n---> 75               user_ns=user_ns)\n     76 \n     77 \n\n/usr/local/lib/python3.4/dist-packages/prompt_toolkit/contrib/ipython.py in embed(**kwargs)\n    176         kwargs['config'] = config\n    177     shell = InteractiveShellEmbed.instance(**kwargs)\n--> 178     initialize_extensions(shell, config['InteractiveShellApp']['extensions'])\n    179     shell(header=header, stack_depth=2, compile_flags=compile_flags)\n\n/usr/lib/python3/dist-packages/IPython/config/loader.py in __getitem__(self, key)\n    171                 return c\n    172         else:\n--> 173             return dict.__getitem__(self, key)\n    174 \n    175     def __setitem__(self, key, value):\n\nKeyError: 'extensions'\n```\n", "reactions": {"url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/70/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/70/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/67", "repository_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit", "labels_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/67/labels{/name}", "comments_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/67/comments", "events_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/67/events", "html_url": "https://github.com/prompt-toolkit/python-prompt-toolkit/issues/67", "id": 50282529, "node_id": "MDU6SXNzdWU1MDI4MjUyOQ==", "number": 67, "title": "Scoping issues for generators", "user": {"login": "carlos-alberto", "id": 1853495, "node_id": "MDQ6VXNlcjE4NTM0OTU=", "avatar_url": "https://avatars.githubusercontent.com/u/1853495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/carlos-alberto", "html_url": "https://github.com/carlos-alberto", "followers_url": "https://api.github.com/users/carlos-alberto/followers", "following_url": "https://api.github.com/users/carlos-alberto/following{/other_user}", "gists_url": "https://api.github.com/users/carlos-alberto/gists{/gist_id}", "starred_url": "https://api.github.com/users/carlos-alberto/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/carlos-alberto/subscriptions", "organizations_url": "https://api.github.com/users/carlos-alberto/orgs", "repos_url": "https://api.github.com/users/carlos-alberto/repos", "events_url": "https://api.github.com/users/carlos-alberto/events{/privacy}", "received_events_url": "https://api.github.com/users/carlos-alberto/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 76984990, "node_id": "MDU6TGFiZWw3Njk4NDk5MA==", "url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2014-11-27T11:41:13Z", "updated_at": "2014-11-28T22:37:22Z", "closed_at": "2014-11-28T22:37:22Z", "author_association": "NONE", "active_lock_reason": null, "body": "When using an imported method within a generator an error is thrown of `NameError: global name 'function' is not defined`.\n\nFor example:\n\n```\nIn [1]: from collections import Counter\n\nIn [2]: from random import randrange\n\nIn [3]: Counter(randrange(10) for _ in xrange(100))\n---------------------------------------------------------------------------\nNameError                                 Traceback (most recent call last)\n.virtualenvs/rolepoint-app/lib/python2.7/site-packages/prompt_toolkit/contrib/entry_points/ptipython.pyc in <module>()\n----> 1 Counter(randrange(10) for _ in xrange(100))\n\n/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/collections.pyc in __init__(self, iterable, **kwds)\n    448         '''\n    449         super(Counter, self).__init__()\n--> 450         self.update(iterable, **kwds)\n    451\n    452     def __missing__(self, key):\n\n/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/collections.pyc in update(self, iterable, **kwds)\n    529             else:\n    530                 self_get = self.get\n--> 531                 for elem in iterable:\n    532                     self[elem] = self_get(elem, 0) + 1\n    533         if kwds:\n\n.virtualenvs/rolepoint-app/lib/python2.7/site-packages/prompt_toolkit/contrib/entry_points/ptipython.pyc in <genexpr>((_,))\n----> 1 Counter(randrange(10) for _ in xrange(100))\n\nNameError: global name 'randrange' is not defined\n```\n", "reactions": {"url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/67/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/67/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/65", "repository_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit", "labels_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/65/labels{/name}", "comments_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/65/comments", "events_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/65/events", "html_url": "https://github.com/prompt-toolkit/python-prompt-toolkit/issues/65", "id": 49304978, "node_id": "MDU6SXNzdWU0OTMwNDk3OA==", "number": 65, "title": "Error when writing \"yield\"", "user": {"login": "rockneurotiko", "id": 1377584, "node_id": "MDQ6VXNlcjEzNzc1ODQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1377584?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rockneurotiko", "html_url": "https://github.com/rockneurotiko", "followers_url": "https://api.github.com/users/rockneurotiko/followers", "following_url": "https://api.github.com/users/rockneurotiko/following{/other_user}", "gists_url": "https://api.github.com/users/rockneurotiko/gists{/gist_id}", "starred_url": "https://api.github.com/users/rockneurotiko/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rockneurotiko/subscriptions", "organizations_url": "https://api.github.com/users/rockneurotiko/orgs", "repos_url": "https://api.github.com/users/rockneurotiko/repos", "events_url": "https://api.github.com/users/rockneurotiko/events{/privacy}", "received_events_url": "https://api.github.com/users/rockneurotiko/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 76984990, "node_id": "MDU6TGFiZWw3Njk4NDk5MA==", "url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}, {"id": 134675930, "node_id": "MDU6TGFiZWwxMzQ2NzU5MzA=", "url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/labels/bug%20in%20Jedi", "name": "bug in Jedi", "color": "fad8c7", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2014-11-18T22:52:22Z", "updated_at": "2014-11-19T19:44:04Z", "closed_at": "2014-11-19T19:43:33Z", "author_association": "NONE", "active_lock_reason": null, "body": "I don't know if it's only me...\n\nI've downloaded and installed from sources, I run ptipython, and start writing \"yield\", at the same time that I write the last character, I get that error:\n\n```\nIn [1]: yieldException in thread Thread-7:\nTraceback (most recent call last):\n  File \"/usr/lib/python3.4/threading.py\", line 921, in _bootstrap_inner\n    self.run()\n  File \"/usr/lib/python3.4/threading.py\", line 869, in run\n    self._target(*self._args, **self._kwargs)\n  File \"/usr/lib/python3.4/site-packages/prompt_toolkit-0.22-py3.4.egg/prompt_toolkit/__init__.py\", line 400, in run                                                     \n    completions = list(line.completer.get_completions(document))\n  File \"/usr/lib/python3.4/site-packages/prompt_toolkit-0.22-py3.4.egg/prompt_toolkit/contrib/ipython.py\", line 69, in get_completions\n    for c in super(IPythonCompleter, self).get_completions(document):\n  File \"/usr/lib/python3.4/site-packages/prompt_toolkit-0.22-py3.4.egg/prompt_toolkit/contrib/python_input.py\", line 477, in get_completions\n    script = get_jedi_script_from_document(document, self.get_locals(), self.get_globals())\n  File \"/usr/lib/python3.4/site-packages/prompt_toolkit-0.22-py3.4.egg/prompt_toolkit/contrib/python_input.py\", line 457, in get_jedi_script_from_document\n    namespaces=[locals, globals])\n  File \"/usr/lib/python3.4/site-packages/jedi-0.8.1_final0-py3.4.egg/jedi/api/__init__.py\", line 642, in __init__\n    interpreter.create(self._evaluator, namespaces[0], self._parser.module())\n  File \"/usr/lib/python3.4/site-packages/jedi-0.8.1_final0-py3.4.egg/jedi/api/interpreter.py\", line 108, in create\n    something.parent = ns\nAttributeError: 'NoneType' object has no attribute 'parent'\n\nException in thread Thread-8:\nTraceback (most recent call last):\n  File \"/usr/lib/python3.4/threading.py\", line 921, in _bootstrap_inner\n    self.run()\n  File \"/usr/lib/python3.4/threading.py\", line 869, in run\n    self._target(*self._args, **self._kwargs)\n  File \"/usr/lib/python3.4/site-packages/prompt_toolkit-0.22-py3.4.egg/prompt_toolkit/contrib/python_input.py\", line 579, in run\n    script = get_jedi_script_from_document(document, self.get_locals(), self.get_globals())\n  File \"/usr/lib/python3.4/site-packages/prompt_toolkit-0.22-py3.4.egg/prompt_toolkit/contrib/python_input.py\", line 457, in get_jedi_script_from_document\n    namespaces=[locals, globals])\n  File \"/usr/lib/python3.4/site-packages/jedi-0.8.1_final0-py3.4.egg/jedi/api/__init__.py\", line 642, in __init__\n    interpreter.create(self._evaluator, namespaces[0], self._parser.module())\n  File \"/usr/lib/python3.4/site-packages/jedi-0.8.1_final0-py3.4.egg/jedi/api/interpreter.py\", line 108, in create\n    something.parent = ns\nAttributeError: 'NoneType' object has no attribute 'parent'\n```\n", "reactions": {"url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/65/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/65/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/63", "repository_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit", "labels_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/63/labels{/name}", "comments_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/63/comments", "events_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/63/events", "html_url": "https://github.com/prompt-toolkit/python-prompt-toolkit/issues/63", "id": 49160669, "node_id": "MDU6SXNzdWU0OTE2MDY2OQ==", "number": 63, "title": "Strange behaviour with IPython -> Plot window hangs prompt", "user": {"login": "ThatGeoGuy", "id": 5060863, "node_id": "MDQ6VXNlcjUwNjA4NjM=", "avatar_url": "https://avatars.githubusercontent.com/u/5060863?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThatGeoGuy", "html_url": "https://github.com/ThatGeoGuy", "followers_url": "https://api.github.com/users/ThatGeoGuy/followers", "following_url": "https://api.github.com/users/ThatGeoGuy/following{/other_user}", "gists_url": "https://api.github.com/users/ThatGeoGuy/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThatGeoGuy/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThatGeoGuy/subscriptions", "organizations_url": "https://api.github.com/users/ThatGeoGuy/orgs", "repos_url": "https://api.github.com/users/ThatGeoGuy/repos", "events_url": "https://api.github.com/users/ThatGeoGuy/events{/privacy}", "received_events_url": "https://api.github.com/users/ThatGeoGuy/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 76984990, "node_id": "MDU6TGFiZWw3Njk4NDk5MA==", "url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 9, "created_at": "2014-11-17T23:35:58Z", "updated_at": "2015-07-15T21:44:11Z", "closed_at": "2015-07-15T11:34:07Z", "author_association": "NONE", "active_lock_reason": null, "body": "This is using python3.4.1, on Windows 7 Professional 64 bit, with the latest IPython, as well as numpy / scipy / matplotlib. \n\nI was just playing around with the experimental windows support, just to test out the features (like autocompletion, ipython integration, etc). Anyways, the first thing I usually do is try out matplotlib, to see if it's working / loading correctly. \n\n```\n$ ptipython --vi\nIn [1]: %pylab\nUsing matplotlib backend: TkAgg\nPopulating the interactive namespace from numpy and matplotlib\nIn [2]: plot([1,2,3,4], 'r')\nOut[2]: [<matplotlib.lines.Line2D at 0x5c92ed0>]\n```\n\nThis should, ideally, plot a single figure window with the line x = y in it. It draws the window, but the plot inside cannot be seen. What's more, if you try to interact with the window in any way, it crashes the python instance. \n\nSo I figured I'd try the same thing by pasting the relevant matplotlib code directly from python. \n\n```\n# File: test.py\nimport matplotlib.pyplot as plt\nplt.plot([1,2,3,4], 'r')\nplt.show()\n```\n\nThis works, but there is a drawback, ptpython (and of course, ptipython) both plot the figure, but do not return the prompt until the window with the plot is closed. This is somewhat of a serious flaw, as it requires you can't use plots / data visualization interactively.\n\nUnfortunately, I have not really narrowed down the factors as to why these bugs are apparent. I had initially thought it had something to do with ipython, but running the code listed in `test.py` in ptpython exhibits the same behaviour. However, there does appear to be some issue using `%pylab` and its associated functions (calling plot directly) in ptipython. In any case, I'll check when I get home and have access to a Linux machine to see if this behaviour is replicable there as well. \n", "reactions": {"url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/63/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/63/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/61", "repository_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit", "labels_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/61/labels{/name}", "comments_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/61/comments", "events_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/61/events", "html_url": "https://github.com/prompt-toolkit/python-prompt-toolkit/issues/61", "id": 48855283, "node_id": "MDU6SXNzdWU0ODg1NTI4Mw==", "number": 61, "title": "ptipython pollutes global", "user": {"login": "dankilman", "id": 1008577, "node_id": "MDQ6VXNlcjEwMDg1Nzc=", "avatar_url": "https://avatars.githubusercontent.com/u/1008577?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dankilman", "html_url": "https://github.com/dankilman", "followers_url": "https://api.github.com/users/dankilman/followers", "following_url": "https://api.github.com/users/dankilman/following{/other_user}", "gists_url": "https://api.github.com/users/dankilman/gists{/gist_id}", "starred_url": "https://api.github.com/users/dankilman/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dankilman/subscriptions", "organizations_url": "https://api.github.com/users/dankilman/orgs", "repos_url": "https://api.github.com/users/dankilman/repos", "events_url": "https://api.github.com/users/dankilman/events{/privacy}", "received_events_url": "https://api.github.com/users/dankilman/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 76984990, "node_id": "MDU6TGFiZWw3Njk4NDk5MA==", "url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2014-11-14T23:58:30Z", "updated_at": "2014-11-15T10:31:40Z", "closed_at": "2014-11-15T10:31:40Z", "author_association": "NONE", "active_lock_reason": null, "body": "Initialization of `ptipython` (and `ptpython` as well) leaves many globals.\nRunning `dir()` in `ipython`:\n\n```\n['In',\n 'Out',\n '_',\n '_1',\n '__',\n '___',\n '__builtin__',\n '__builtins__',\n '__doc__',\n '__loader__',\n '__name__',\n '__package__',\n '__spec__',\n '_dh',\n '_i',\n '_i1',\n '_i2',\n '_ih',\n '_ii',\n '_iii',\n '_oh',\n '_sh',\n 'exit',\n 'get_ipython',\n 'quit']\n```\n\nAs you can see the only non private/internal attributes are `In, Out, exit, get_ipython, quit`\n\nWhile running `dir()` in `ptipython` gives:\n\n```\n['IPython',\n 'In',\n 'Out',\n '_',\n '_1',\n '__',\n '___',\n '_dh',\n '_i',\n '_i1',\n '_i2',\n '_ih',\n '_ii',\n '_iii',\n '_oh',\n '_sh',\n 'a',\n 'always_multiline',\n 'autocompletion_style',\n 'embed',\n 'exit',\n 'get_ipython',\n 'history_filename',\n 'quit',\n 'vi_mode']\n```\n\nIn this case, I think `IPython, a, always_multiline, autocompletion_sytle, ...` should be at least prefixed with `_` or not be there at all\n", "reactions": {"url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/61/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/61/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/46", "repository_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit", "labels_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/46/labels{/name}", "comments_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/46/comments", "events_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/46/events", "html_url": "https://github.com/prompt-toolkit/python-prompt-toolkit/issues/46", "id": 45863285, "node_id": "MDU6SXNzdWU0NTg2MzI4NQ==", "number": 46, "title": "IndexError", "user": {"login": "jonathanslenders", "id": 216638, "node_id": "MDQ6VXNlcjIxNjYzOA==", "avatar_url": "https://avatars.githubusercontent.com/u/216638?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jonathanslenders", "html_url": "https://github.com/jonathanslenders", "followers_url": "https://api.github.com/users/jonathanslenders/followers", "following_url": "https://api.github.com/users/jonathanslenders/following{/other_user}", "gists_url": "https://api.github.com/users/jonathanslenders/gists{/gist_id}", "starred_url": "https://api.github.com/users/jonathanslenders/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jonathanslenders/subscriptions", "organizations_url": "https://api.github.com/users/jonathanslenders/orgs", "repos_url": "https://api.github.com/users/jonathanslenders/repos", "events_url": "https://api.github.com/users/jonathanslenders/events{/privacy}", "received_events_url": "https://api.github.com/users/jonathanslenders/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 76984990, "node_id": "MDU6TGFiZWw3Njk4NDk5MA==", "url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}, {"id": 134675930, "node_id": "MDU6TGFiZWwxMzQ2NzU5MzA=", "url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/labels/bug%20in%20Jedi", "name": "bug in Jedi", "color": "fad8c7", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2014-10-15T13:04:07Z", "updated_at": "2015-05-31T10:23:47Z", "closed_at": "2015-05-31T10:23:37Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "Not sure if this was already fixed. (I'm creating a ticket, just not to forget about this.)\n\n``` python\nTraceback (most recent call last):\n  File \"/usr/lib/python2.7/threading.py\", line 552, in __bootstrap_inner\n    self.run()DebtorSubscription\n  File \"/home/jonathan/git/prompt_toolkit/prompt_toolkit/eventloop/base.py\", line 43, in run\n    callback()\n  File \"/home/jonathan/git/prompt_toolkit/prompt_toolkit/__init__.py\", line 399, in run\n    completions = list(line.completer.get_completions(document))\n  File \"/home/jonathan/git/prompt_toolkit/prompt_toolkit/contrib/ipython.py\", line 61, in get_completions\n    for c in super(IPythonCompleter, self).get_completions(document):\n  File \"/home/jonathan/git/prompt_toolkit/prompt_toolkit/contrib/python_input.py\", line 461, in get_completions\n    script = get_jedi_script_from_document(document, self.get_locals(), self.get_globals())\n  File \"/home/jonathan/git/prompt_toolkit/prompt_toolkit/contrib/python_input.py\", line 441, in get_jedi_script_from_document\n    namespaces=[locals, globals])\n  File \"/home/jonathan/env/mobilevikings/local/lib/python2.7/site-packages/jedi/api/__init__.py\", line 642, in __init__\n    interpreter.create(self._evaluator, namespaces[0], self._parser.module())\n  File \"/home/jonathan/env/mobilevikings/local/lib/python2.7/site-packages/jedi/api/interpreter.py\", line 107, in create\n    for something in getattr(parser_module, attr_name):\n  File \"/home/jonathan/env/mobilevikings/local/lib/python2.7/site-packages/jedi/parser/fast.py\", line 38, in __getattr__\n    return getattr(self.parsers[0].module, name)\nIndexError: list index out of range\n```\n", "reactions": {"url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/46/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/46/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/45", "repository_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit", "labels_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/45/labels{/name}", "comments_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/45/comments", "events_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/45/events", "html_url": "https://github.com/prompt-toolkit/python-prompt-toolkit/issues/45", "id": 45850108, "node_id": "MDU6SXNzdWU0NTg1MDEwOA==", "number": 45, "title": "Newline in multi-line str produces SyntaxError instead of entering muliline edit mode", "user": {"login": "pgy", "id": 3483222, "node_id": "MDQ6VXNlcjM0ODMyMjI=", "avatar_url": "https://avatars.githubusercontent.com/u/3483222?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pgy", "html_url": "https://github.com/pgy", "followers_url": "https://api.github.com/users/pgy/followers", "following_url": "https://api.github.com/users/pgy/following{/other_user}", "gists_url": "https://api.github.com/users/pgy/gists{/gist_id}", "starred_url": "https://api.github.com/users/pgy/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pgy/subscriptions", "organizations_url": "https://api.github.com/users/pgy/orgs", "repos_url": "https://api.github.com/users/pgy/repos", "events_url": "https://api.github.com/users/pgy/events{/privacy}", "received_events_url": "https://api.github.com/users/pgy/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 76984990, "node_id": "MDU6TGFiZWw3Njk4NDk5MA==", "url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2014-10-15T10:13:30Z", "updated_at": "2014-10-16T08:33:29Z", "closed_at": "2014-10-15T18:40:12Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "With multiline editing turned off newline produces SyntaxError while typing multi-line string.\n\n```\nIn [1]: \"\"\"\n           ^--- pressing enter here produces Syntax Error (line=1 column=4)\n```\n\nThe same happens with '''.\nTurning `Multiline` on seems to solve the problem:\n\n```\nIn [1]: try:\n     2.     \"\"\"                         \n     3.     It works!                      \n     4.      \n```\n", "reactions": {"url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/45/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/45/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/43", "repository_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit", "labels_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/43/labels{/name}", "comments_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/43/comments", "events_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/43/events", "html_url": "https://github.com/prompt-toolkit/python-prompt-toolkit/issues/43", "id": 45474170, "node_id": "MDU6SXNzdWU0NTQ3NDE3MA==", "number": 43, "title": "UnicodeDecodeError on OpenBSD", "user": {"login": "vext01", "id": 604955, "node_id": "MDQ6VXNlcjYwNDk1NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/604955?v=4", "gravatar_id": "", "url": "https://api.github.com/users/vext01", "html_url": "https://github.com/vext01", "followers_url": "https://api.github.com/users/vext01/followers", "following_url": "https://api.github.com/users/vext01/following{/other_user}", "gists_url": "https://api.github.com/users/vext01/gists{/gist_id}", "starred_url": "https://api.github.com/users/vext01/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/vext01/subscriptions", "organizations_url": "https://api.github.com/users/vext01/orgs", "repos_url": "https://api.github.com/users/vext01/repos", "events_url": "https://api.github.com/users/vext01/events{/privacy}", "received_events_url": "https://api.github.com/users/vext01/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 76984990, "node_id": "MDU6TGFiZWw3Njk4NDk5MA==", "url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}, {"id": 134675930, "node_id": "MDU6TGFiZWwxMzQ2NzU5MzA=", "url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/labels/bug%20in%20Jedi", "name": "bug in Jedi", "color": "fad8c7", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 9, "created_at": "2014-10-10T12:12:53Z", "updated_at": "2015-06-07T08:55:42Z", "closed_at": "2015-06-07T08:55:42Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi,\n\nI installed prompt-toolkit from pip on OpenBSD to try out ptipython. It's awesome. Nice work!\n\nThere is however an annoying bug. If i start a fresh ptipython and type 'import s' the following happens:\n\n```\nIn [1]: import sException in thread Thread-8:\nTraceback (most recent call last):\n  File \"/usr/local/lib/python2.7/threading.py\", line 810, in __bootstrap_inner\n    self.run()\n  File \"/home/edd/.local/lib/python2.7/site-packages/prompt_toolkit/__init__.pyn\n    callback()\n  File \"/home/edd/.local/lib/python2.7/site-packages/prompt_toolkit/__init__.pyn\n    completions = list(line.completer.get_completions(document))\n  File \"/home/edd/.local/lib/python2.7/site-packages/prompt_toolkit/contrib/ipys\n    for c in super(IPythonCompleter, self).get_completions(document):\n  File \"/home/edd/.local/lib/python2.7/site-packages/prompt_toolkit/contrib/pyts\n    completions = script.completions()\n  File \"/home/edd/.local/lib/python2.7/site-packages/jedi/api/__init__.py\", lins\n    completions = get_completions(user_stmt, b)\n  File \"/home/edd/.local/lib/python2.7/site-packages/jedi/api/__init__.py\", lins\n    return self._simple_complete(path, like)\n  File \"/home/edd/.local/lib/python2.7/site-packages/jedi/api/__init__.py\", line\n    return super(Interpreter, self)._simple_complete(path, like)\n  File \"/home/edd/.local/lib/python2.7/site-packages/jedi/api/__init__.py\", line\n    names = s.get_defined_names(on_import_stmt=True)\n  File \"/home/edd/.local/lib/python2.7/site-packages/jedi/evaluate/imports.py\",s\n    names += self._get_module_names([path])\n  File \"/home/edd/.local/lib/python2.7/site-packages/jedi/evaluate/imports.py\",s\n    for module_loader, name, is_pkg in pkgutil.iter_modules(search_path):\n  File \"/usr/local/lib/python2.7/pkgutil.py\", line 147, in iter_modules\n    for name, ispkg in iter_importer_modules(i, prefix):\n  File \"/usr/local/lib/python2.7/pkgutil.py\", line 202, in iter_modules\n    filenames.sort()  # handle packages before same-named modules\nUnicodeDecodeError: 'ascii' codec can't decode byte 0xb0 in position 25: ordina)\n```\n\nPackages:\n\n```\n$ pkg_info | grep python-2\nipython-2.1.0p1     enhanced interactive Python shell\npython-2.7.8        interpreted object-oriented programming language\n```\n\nLocale:\n\n```\n$ echo $LC_CTYPE\nen_US.UTF-8\n```\n\nCould be a bug in Python on OpenBSD of course.\n\nAny ideas?\n", "reactions": {"url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/43/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/43/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/37", "repository_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit", "labels_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/37/labels{/name}", "comments_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/37/comments", "events_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/37/events", "html_url": "https://github.com/prompt-toolkit/python-prompt-toolkit/issues/37", "id": 44833149, "node_id": "MDU6SXNzdWU0NDgzMzE0OQ==", "number": 37, "title": "IndexError while making recursive function", "user": {"login": "pgy", "id": 3483222, "node_id": "MDQ6VXNlcjM0ODMyMjI=", "avatar_url": "https://avatars.githubusercontent.com/u/3483222?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pgy", "html_url": "https://github.com/pgy", "followers_url": "https://api.github.com/users/pgy/followers", "following_url": "https://api.github.com/users/pgy/following{/other_user}", "gists_url": "https://api.github.com/users/pgy/gists{/gist_id}", "starred_url": "https://api.github.com/users/pgy/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pgy/subscriptions", "organizations_url": "https://api.github.com/users/pgy/orgs", "repos_url": "https://api.github.com/users/pgy/repos", "events_url": "https://api.github.com/users/pgy/events{/privacy}", "received_events_url": "https://api.github.com/users/pgy/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 76984990, "node_id": "MDU6TGFiZWw3Njk4NDk5MA==", "url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}, {"id": 134675930, "node_id": "MDU6TGFiZWwxMzQ2NzU5MzA=", "url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/labels/bug%20in%20Jedi", "name": "bug in Jedi", "color": "fad8c7", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2014-10-03T18:37:06Z", "updated_at": "2015-06-07T08:54:47Z", "closed_at": "2015-06-07T08:54:47Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "IndexError was thrown while typing the following:\n\n```\n\u279c  ~  ptpython --vi\nIn [1]: def bez(cps, t):\n    2.     if len(cps) < 2:                        \n    3.         return cps[0]                           \n    4.     p1 = bez(cps[0:\n                        ^--- Exception happened here\n```\n\nFull output:\n\n```\n\u279c  ~  ptpython --vi\nIn [1]: def bez(cps, t):\n     2.     if len(cps) < 2:                        \n     3.         return cps[0]                           \n     4.     p1 = bez(Traceback (most recent call last):\n  File \"/usr/local/bin/ptpython\", line 80, in <module>\n    _run_repl()       all                        \n  File \"/usr/local/bin/ptpython\", line 77, in _run_repl\n    startup_paths=startup_paths, always_multiline=always_multiline)\n  File \"/usr/local/lib/python2.7/dist-packages/prompt_toolkit/contrib/repl.py\",d\n    cli.start_repl(startup_paths=startup_paths)\n  File \"/usr/local/lib/python2.7/dist-packages/prompt_toolkit/contrib/repl.py\",l\n    on_exit=AbortAction.RAISE_EXCEPTION)\n  File \"/usr/local/lib/python2.7/dist-packages/prompt_toolkit/__init__.py\", lint\n    self._redraw()\n  File \"/usr/local/lib/python2.7/dist-packages/prompt_toolkit/__init__.py\", linw\n    self.renderer.render(self)\n  File \"/usr/local/lib/python2.7/dist-packages/prompt_toolkit/renderer.py\", linr\n    output = self.render_to_str(cli)\n  File \"/usr/local/lib/python2.7/dist-packages/prompt_toolkit/renderer.py\", linr\n    self.layout.write_to_screen(cli, screen, height)\n  File \"/usr/local/lib/python2.7/dist-packages/prompt_toolkit/layout/__init__.pn\n    t.write(cli, screen)z(cps, t)                                               \n  File \"/usr/local/lib/python2.7/dist-packages/prompt_toolkit/layout/toolbars.pe\n    tokens = self.get_tokens(cli, width)\n  File \"/usr/local/lib/python2.7/dist-packages/prompt_toolkit/contrib/python_ins\n    append((Signature, sig.full_name))\n  File \"/usr/local/lib/python2.7/dist-packages/jedi/api/classes.py\", line 295, e\n    path = [unicode(p) for p in self._path()]\n  File \"/usr/local/lib/python2.7/dist-packages/jedi/api/classes.py\", line 170, h\n    path.insert(0, par.name)\n  File \"/usr/local/lib/python2.7/dist-packages/jedi/api/interpreter.py\", line 3_\n    return getattr(self.parser_module, name)\n  File \"/usr/local/lib/python2.7/dist-packages/jedi/parser/fast.py\", line 38, i_\n    return getattr(self.parsers[0].module, name)\nIndexError: list index out of range\n```\n", "reactions": {"url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/37/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/37/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/19", "repository_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit", "labels_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/19/labels{/name}", "comments_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/19/comments", "events_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/19/events", "html_url": "https://github.com/prompt-toolkit/python-prompt-toolkit/issues/19", "id": 44432462, "node_id": "MDU6SXNzdWU0NDQzMjQ2Mg==", "number": 19, "title": "Problem with functions I create", "user": {"login": "adamtwiss", "id": 772041, "node_id": "MDQ6VXNlcjc3MjA0MQ==", "avatar_url": "https://avatars.githubusercontent.com/u/772041?v=4", "gravatar_id": "", "url": "https://api.github.com/users/adamtwiss", "html_url": "https://github.com/adamtwiss", "followers_url": "https://api.github.com/users/adamtwiss/followers", "following_url": "https://api.github.com/users/adamtwiss/following{/other_user}", "gists_url": "https://api.github.com/users/adamtwiss/gists{/gist_id}", "starred_url": "https://api.github.com/users/adamtwiss/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/adamtwiss/subscriptions", "organizations_url": "https://api.github.com/users/adamtwiss/orgs", "repos_url": "https://api.github.com/users/adamtwiss/repos", "events_url": "https://api.github.com/users/adamtwiss/events{/privacy}", "received_events_url": "https://api.github.com/users/adamtwiss/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 76984990, "node_id": "MDU6TGFiZWw3Njk4NDk5MA==", "url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}, {"id": 134675930, "node_id": "MDU6TGFiZWwxMzQ2NzU5MzA=", "url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/labels/bug%20in%20Jedi", "name": "bug in Jedi", "color": "fad8c7", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2014-09-30T12:07:59Z", "updated_at": "2015-06-07T08:54:20Z", "closed_at": "2015-06-07T08:54:20Z", "author_association": "NONE", "active_lock_reason": null, "body": "To recreate - define a simple function, and try and call it.\n\n```\nAdams-MacBook-Pro:tmp adam$ ptpython \nIn [1]: def square(x):\n     2.     return x*x                            \n     3.                        \n\nIn [2]: square(Exception in thread Thread-36:\nTraceback (most recent call last):\n  File \"/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/threading.py\", line 808, in __bootstrap_inner\n    self.run()\n  File \"/Library/Python/2.7/site-packages/prompt_toolkit/__init__.py\", line 200, in run\n    callback()\n  File \"/Library/Python/2.7/site-packages/prompt_toolkit/__init__.py\", line 440, in run 2.7.5                                                         \n    completions = list(line.completer.get_completions(document))\n  File \"/Library/Python/2.7/site-packages/prompt_toolkit/contrib/python_input.py\", line 449, in get_completions\n    for c in script.completions():\n  File \"/Library/Python/2.7/site-packages/jedi/api/__init__.py\", line 161, in completions\n    for call_sig in self.call_signatures():\n  File \"/Library/Python/2.7/site-packages/jedi/api/__init__.py\", line 574, in call_signatures\n    self._pos, user_stmt)\n  File \"/Library/Python/2.7/site-packages/jedi/cache.py\", line 90, in wrapper\n    value = optional_callable()\n  File \"/Library/Python/2.7/site-packages/jedi/api/__init__.py\", line 572, in <lambda>\n    _callable = lambda: self._evaluator.eval_call(stmt_el)\n  File \"/Library/Python/2.7/site-packages/jedi/evaluate/__init__.py\", line 226, in eval_call\n    return self.eval_call_path(path, par, s.start_pos)\n  File \"/Library/Python/2.7/site-packages/jedi/evaluate/__init__.py\", line 240, in eval_call_path\n    search_global=True)\n  File \"/Library/Python/2.7/site-packages/jedi/evaluate/__init__.py\", line 113, in find_types\n    return f.find(scopes, resolve_decorator, search_global)\n  File \"/Library/Python/2.7/site-packages/jedi/debug.py\", line 51, in wrapper\n    result = func(*args, **kwargs)\n  File \"/Library/Python/2.7/site-packages/jedi/evaluate/finder.py\", line 46, in find\n    names = self.filter_name(scopes)\n  File \"/Library/Python/2.7/site-packages/jedi/evaluate/finder.py\", line 89, in filter_name\n    scope = name.parent.parent\n  File \"/Library/Python/2.7/site-packages/jedi/cache.py\", line 139, in wrapper\n    result = func(self)\n  File \"/Library/Python/2.7/site-packages/jedi/api/interpreter.py\", line 69, in parent\n    module = __import__(module_name)\nTypeError: __import__() argument 1 must be string, not None\n```\n\nNote the exception occurs after hitting the bracket in \"square(\" after calling the first time\n\nThis is OS X Mavericks with latest standard OS python (e.g. standard/latest Mac)\n\n```\nAdams-MacBook-Pro:tmp adam$ uname -a     \nDarwin Adams-MacBook-Pro.local 13.4.0 Darwin Kernel Version 13.4.0: Sun Aug 17 19:50:11 PDT 2014; root:xnu-2422.115.4~1/RELEASE_X86_64 x86_64\nAdams-MacBook-Pro:tmp adam$ python -V\nPython 2.7.5\nAdams-MacBook-Pro:tmp adam$ pip freeze | grep prompt\nprompt-toolkit==0.18\n```\n", "reactions": {"url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/19/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/19/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/16", "repository_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit", "labels_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/16/labels{/name}", "comments_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/16/comments", "events_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/16/events", "html_url": "https://github.com/prompt-toolkit/python-prompt-toolkit/issues/16", "id": 44424672, "node_id": "MDU6SXNzdWU0NDQyNDY3Mg==", "number": 16, "title": "mosh [mobile shell] compatibility", "user": {"login": "jhrmnn", "id": 940353, "node_id": "MDQ6VXNlcjk0MDM1Mw==", "avatar_url": "https://avatars.githubusercontent.com/u/940353?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jhrmnn", "html_url": "https://github.com/jhrmnn", "followers_url": "https://api.github.com/users/jhrmnn/followers", "following_url": "https://api.github.com/users/jhrmnn/following{/other_user}", "gists_url": "https://api.github.com/users/jhrmnn/gists{/gist_id}", "starred_url": "https://api.github.com/users/jhrmnn/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jhrmnn/subscriptions", "organizations_url": "https://api.github.com/users/jhrmnn/orgs", "repos_url": "https://api.github.com/users/jhrmnn/repos", "events_url": "https://api.github.com/users/jhrmnn/events{/privacy}", "received_events_url": "https://api.github.com/users/jhrmnn/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 76984990, "node_id": "MDU6TGFiZWw3Njk4NDk5MA==", "url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2014-09-30T10:54:59Z", "updated_at": "2016-05-02T21:06:27Z", "closed_at": "2016-05-02T21:06:27Z", "author_association": "NONE", "active_lock_reason": null, "body": "When connected via [mosh](http://mosh.mit.edu) the ptpython console is broken and blinking. I guess this might have something to do with the VT100 requirement, so it's not a bug but a design limitation? My expertise is non-existent here.\n", "reactions": {"url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/16/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/16/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/9", "repository_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit", "labels_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/9/labels{/name}", "comments_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/9/comments", "events_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/9/events", "html_url": "https://github.com/prompt-toolkit/python-prompt-toolkit/issues/9", "id": 44383957, "node_id": "MDU6SXNzdWU0NDM4Mzk1Nw==", "number": 9, "title": "Crash while typing out a for-loop.", "user": {"login": "welbornprod", "id": 3343802, "node_id": "MDEyOk9yZ2FuaXphdGlvbjMzNDM4MDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3343802?v=4", "gravatar_id": "", "url": "https://api.github.com/users/welbornprod", "html_url": "https://github.com/welbornprod", "followers_url": "https://api.github.com/users/welbornprod/followers", "following_url": "https://api.github.com/users/welbornprod/following{/other_user}", "gists_url": "https://api.github.com/users/welbornprod/gists{/gist_id}", "starred_url": "https://api.github.com/users/welbornprod/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/welbornprod/subscriptions", "organizations_url": "https://api.github.com/users/welbornprod/orgs", "repos_url": "https://api.github.com/users/welbornprod/repos", "events_url": "https://api.github.com/users/welbornprod/events{/privacy}", "received_events_url": "https://api.github.com/users/welbornprod/received_events", "type": "Organization", "site_admin": false}, "labels": [{"id": 76984990, "node_id": "MDU6TGFiZWw3Njk4NDk5MA==", "url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}, {"id": 134675930, "node_id": "MDU6TGFiZWwxMzQ2NzU5MzA=", "url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/labels/bug%20in%20Jedi", "name": "bug in Jedi", "color": "fad8c7", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2014-09-30T02:52:59Z", "updated_at": "2014-11-19T19:45:38Z", "closed_at": "2014-11-19T19:45:38Z", "author_association": "NONE", "active_lock_reason": null, "body": "Incorrectly typing a `for` loop will cause an ugly crash before pressing `Enter`.\n\nExample:\n\n``` python\nfor i in range)\n#!#! CRASH\n```\n\nOutput:\n\n``` pytb\nIn [1]: for i in range)Exception in thread Thread-13:\nTraceback (most recent call last):\n  File \"/usr/lib/python2.7/threading.py\", line 810, in __bootstrap_inner\n    self.run()\n  File \"build/bdist.linux-x86_64/egg/prompt_toolkit/__init__.py\", line 200, in run\n    callback()\n  File \"build/bdist.linux-x86_64/egg/prompt_toolkit/__init__.py\", line 440, in run                                                                                           \n    completions = list(line.completer.get_completions(document))\n  File \"build/bdist.linux-x86_64/egg/prompt_toolkit/contrib/python_input.py\", line 449, in get_completions\n    for c in script.completions():\n  File \"/home/cj/.local/lib/python2.7/site-packages/jedi-0.8.1_final0-py2.7.egg/jedi/api/__init__.py\", line 187, in completions\n    new = classes.Completion(self._evaluator, c, needs_dot, len(like), s)\n  File \"/home/cj/.local/lib/python2.7/site-packages/jedi-0.8.1_final0-py2.7.egg/jedi/api/classes.py\", line 375, in __init__\n    super(Completion, self).__init__(evaluator, name.parent, name.start_pos)\n  File \"/home/cj/.local/lib/python2.7/site-packages/jedi-0.8.1_final0-py2.7.egg/jedi/cache.py\", line 139, in wrapper\n    result = func(self)\n  File \"/home/cj/.local/lib/python2.7/site-packages/jedi-0.8.1_final0-py2.7.egg/jedi/api/interpreter.py\", line 69, in parent\n    module = __import__(module_name)\nTypeError: __import__() argument 1 must be string, not None\n```\n\nOriginally I was running with Python 3.4 when I found it. I switched to Python 2.7 just to see if it was compatible with both, and then decided to see if it would crash again.\n\n`KeyboardInterrupt` will regain the prompt, and then it won't crash on the same input. You lose the auto-complete though.\n", "reactions": {"url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/9/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/prompt-toolkit/python-prompt-toolkit/issues/9/timeline", "performed_via_github_app": null, "state_reason": "completed"}]