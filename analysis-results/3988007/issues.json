[{"url": "https://api.github.com/repos/mne-tools/mne-python/issues/11659", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/11659/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/11659/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/11659/events", "html_url": "https://github.com/mne-tools/mne-python/issues/11659", "id": 1685940944, "node_id": "I_kwDOABPcUM5kfWrQ", "number": 11659, "title": "BUG: MNE `concatenate_raws` duplicates loaded data if run in a loop", "user": {"login": "GABowers", "id": 15266221, "node_id": "MDQ6VXNlcjE1MjY2MjIx", "avatar_url": "https://avatars.githubusercontent.com/u/15266221?v=4", "gravatar_id": "", "url": "https://api.github.com/users/GABowers", "html_url": "https://github.com/GABowers", "followers_url": "https://api.github.com/users/GABowers/followers", "following_url": "https://api.github.com/users/GABowers/following{/other_user}", "gists_url": "https://api.github.com/users/GABowers/gists{/gist_id}", "starred_url": "https://api.github.com/users/GABowers/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/GABowers/subscriptions", "organizations_url": "https://api.github.com/users/GABowers/orgs", "repos_url": "https://api.github.com/users/GABowers/repos", "events_url": "https://api.github.com/users/GABowers/events{/privacy}", "received_events_url": "https://api.github.com/users/GABowers/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2023-04-27T01:18:06Z", "updated_at": "2023-04-27T11:20:58Z", "closed_at": "2023-04-27T11:20:58Z", "author_association": "NONE", "active_lock_reason": null, "body": "### Description of the problem\n\nThe `Raw` object generated from the `concatenate_raws` method duplicates data if run on the same **sequence** of `Raw` objects more than once.\r\n\r\nI first noticed this on my data which is using the .fif file format, but as can be seen below it occurs for edf files as well.\n\n### Steps to reproduce\n\n```Python\nimport mne, mne.datasets.eegbci\r\n\r\nif __name__ == \"__main__\":\r\n    mne.set_log_level(verbose='ERROR')\r\n    raw_fnames = mne.datasets.eegbci.load_data(1,  [*range(1, 15)])\r\n    raws = [mne.io.read_raw_edf(f, preload=True) for f in raw_fnames]\r\n    for i in range(5):\r\n        sub = [x for x in raws[:5]]\r\n        # if the line above is instead \"raws[i:i+5]]\" the error does not occur\r\n        main = mne.concatenate_raws(sub, verbose='INFO')\r\n        if len(sub) != len(main.filenames):\r\n            raise Exception(\"Too many files in Raw object!\")\r\n        print('{} files loaded'.format(len(main.filenames)))\r\n        del(main)\r\n        del(sub)\n```\n\n\n### Link to data\n\n_No response_\n\n### Expected results\n\nThe concatenated `Raw` object should only include files specified the most recent collection of `Raw` objects\n\n### Actual results\n\nThe concatenated `Raw` object includes duplicate data.\n\n### Additional information\n\nPlatform:         Windows-10-10.0.19044-SP0\r\nPython:           3.11.3 (tags/v3.11.3:f3909b8, Apr  4 2023, 23:49:59) [MSC v.1934 64 bit (AMD64)]\r\nExecutable:       C:\\Users\\~\\AppData\\Local\\Programs\\Python\\Python311\\python.exe\r\nCPU:              AMD64 Family 23 Model 113 Stepping 0, AuthenticAMD: 16 cores\r\nMemory:           63.9 GB\r\n\r\nmne:              1.3.1\r\nnumpy:            1.24.2 {OpenBLAS 0.3.21 with 16 threads}\r\nscipy:            1.10.1\r\nmatplotlib:       3.7.1 {backend=TkAgg}\r\n\r\nsklearn:          1.2.2\r\nnumba:            Not found\r\nnibabel:          Not found\r\nnilearn:          Not found\r\ndipy:             Not found\r\nopenmeeg:         Not found\r\ncupy:             Not found\r\npandas:           2.0.0\r\npyvista:          Not found\r\npyvistaqt:        Not found\r\nipyvtklink:       Not found\r\nvtk:              Not found\r\nqtpy:             Not found\r\nipympl:           Not found\r\npyqtgraph:        Not found\r\npooch:            v1.7.0\r\n\r\nmne_bids:         Not found\r\nmne_nirs:         Not found\r\nmne_features:     Not found\r\nmne_qt_browser:   Not found\r\nmne_connectivity: Not found\r\nmne_icalabel:     Not found", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/11659/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/11659/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/11653", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/11653/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/11653/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/11653/events", "html_url": "https://github.com/mne-tools/mne-python/issues/11653", "id": 1681407754, "node_id": "I_kwDOABPcUM5kOD8K", "number": 11653, "title": "ICA plot_components on provided axes fails", "user": {"login": "mscheltienne", "id": 73893616, "node_id": "MDQ6VXNlcjczODkzNjE2", "avatar_url": "https://avatars.githubusercontent.com/u/73893616?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mscheltienne", "html_url": "https://github.com/mscheltienne", "followers_url": "https://api.github.com/users/mscheltienne/followers", "following_url": "https://api.github.com/users/mscheltienne/following{/other_user}", "gists_url": "https://api.github.com/users/mscheltienne/gists{/gist_id}", "starred_url": "https://api.github.com/users/mscheltienne/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mscheltienne/subscriptions", "organizations_url": "https://api.github.com/users/mscheltienne/orgs", "repos_url": "https://api.github.com/users/mscheltienne/repos", "events_url": "https://api.github.com/users/mscheltienne/events{/privacy}", "received_events_url": "https://api.github.com/users/mscheltienne/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2023-04-24T14:27:34Z", "updated_at": "2023-04-25T18:58:44Z", "closed_at": "2023-04-25T18:58:44Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "### Description of the problem\r\n\r\n```\r\nfrom matplotlib import pyplot as plt\r\nfrom mne.datasets import sample\r\nfrom mne.io import read_raw_fif\r\nfrom mne.preprocessing import ICA\r\n\r\n\r\n# create a toy dataset\r\nfname = sample.data_path() / \"MEG\" / \"sample\" / \"sample_audvis_raw.fif\"\r\nraw = read_raw_fif(fname, preload=False)\r\nraw.pick_types(eeg=True)\r\nraw.crop(0, 10)\r\nraw.load_data()\r\nraw.filter(1.0, 40.0)\r\nica = ICA(n_components=5, method=\"picard\")\r\nica.fit(raw)\r\n\r\n# create figure\r\nf, ax = plt.subplots(2, 2)\r\nica.plot_components(inst=raw, picks=[1, 2, 3, 4], axes=ax)\r\n```\r\n\r\nThe code snippet above raises:\r\n\r\n```\r\nAttributeError: 'numpy.ndarray' object has no attribute 'set_title'\r\n```\r\n\r\nIf you flatten the provided `ax`, it fails with:\r\n\r\n```\r\nUnboundLocalError: local variable 'fig' referenced before assignment\r\n```\r\n\r\nWorking on it atm.", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/11653/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/11653/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/11647", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/11647/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/11647/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/11647/events", "html_url": "https://github.com/mne-tools/mne-python/issues/11647", "id": 1680145189, "node_id": "I_kwDOABPcUM5kJPsl", "number": 11647, "title": "bad pre-commit install spec", "user": {"login": "drammock", "id": 1810515, "node_id": "MDQ6VXNlcjE4MTA1MTU=", "avatar_url": "https://avatars.githubusercontent.com/u/1810515?v=4", "gravatar_id": "", "url": "https://api.github.com/users/drammock", "html_url": "https://github.com/drammock", "followers_url": "https://api.github.com/users/drammock/followers", "following_url": "https://api.github.com/users/drammock/following{/other_user}", "gists_url": "https://api.github.com/users/drammock/gists{/gist_id}", "starred_url": "https://api.github.com/users/drammock/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/drammock/subscriptions", "organizations_url": "https://api.github.com/users/drammock/orgs", "repos_url": "https://api.github.com/users/drammock/repos", "events_url": "https://api.github.com/users/drammock/events{/privacy}", "received_events_url": "https://api.github.com/users/drammock/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2023-04-23T19:45:23Z", "updated_at": "2023-04-25T11:22:58Z", "closed_at": "2023-04-25T11:22:58Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "### Description of the problem\r\n\r\nin a fresh env (where I did `mamba install --only-deps mne` to initialize it), installing the pre-commit hooks fails because it expects python 3.11 but our condaforge recipe installs python 3.10\r\n\r\n### Steps to reproduce\r\n\r\n```Python\r\nmamba install --only-deps mne\r\nmamba install pre-commit\r\ncd /path/to/mne-python\r\npre-commit install --install-hooks\r\n```\r\n\r\n\r\n### Link to data\r\n\r\n_No response_\r\n\r\n### Expected results\r\n\r\npre-commit hooks get installed\r\n\r\n### Actual results\r\n\r\n```\r\n$ pre-commit install --install-hooks\r\npre-commit installed at .git/hooks/pre-commit\r\n[INFO] Installing environment for https://github.com/charliermarsh/ruff-pre-commit.\r\n[INFO] Once installed this environment will be reused.\r\n[INFO] This may take a few minutes...\r\nAn unexpected error has occurred: CalledProcessError: command: ('/opt/mambaforge/envs/mnedev/bin/python3.10', '-mvirtualenv', '/home/drmccloy/.cache/pre-commit/repo90m6g1k7/py_env-python3.11', '-p', 'python3.11')\r\nreturn code: 1\r\nstdout:\r\n    RuntimeError: failed to find interpreter for Builtin discover of python_spec='python3.11'\r\nstderr: (none)\r\nCheck the log at /home/drmccloy/.cache/pre-commit/pre-commit.log\r\n```\r\n\r\n### Additional information\r\n\r\n```\r\nPlatform             Linux-5.15.0-58-generic-x86_64-with-glibc2.35\r\nPython               3.10.10 | packaged by conda-forge | (main, Mar 24 2023, 20:08:06) [GCC 11.3.0]\r\nExecutable           /opt/mambaforge/envs/mnedev/bin/python3.10\r\nCPU                  x86_64 (16 cores)\r\nMemory               125.7 GB\r\n\r\nCore\r\n\u251c\u2611 mne               1.4.0.dev127+g9145025c4.d20230423\r\n\u251c\u2611 numpy             1.23.5 (unknown linalg bindings)\r\n\u251c\u2611 scipy             1.10.1\r\n\u251c\u2611 matplotlib        3.7.1 (backend=QtAgg)\r\n\u251c\u2611 pooch             1.7.0\r\n\u2514\u2611 jinja2            3.1.2\r\n\r\nNumerical (optional)\r\n\u251c\u2611 sklearn           1.2.2\r\n\u251c\u2611 numba             0.56.4\r\n\u251c\u2611 nibabel           5.1.0\r\n\u251c\u2611 nilearn           0.10.0\r\n\u251c\u2611 dipy              1.6.0\r\n\u251c\u2611 openmeeg          2.4.7\r\n\u251c\u2611 pandas            2.0.0\r\n\u2514\u2610 unavailable       cupy\r\n\r\nVisualization (optional)\r\n\u251c\u2611 pyvista           0.38.5 (OpenGL 4.5.0 NVIDIA 470.161.03 via NVIDIA GeForce RTX 2060/PCIe/SSE2)\r\n\u251c\u2611 pyvistaqt         0.0.0\r\n\u251c\u2611 ipyvtklink        0.2.2\r\n\u251c\u2611 vtk               9.2.6\r\n\u251c\u2611 qtpy              2.3.1 (PyQt5=5.15.6)\r\n\u251c\u2611 pyqtgraph         0.13.3\r\n\u251c\u2611 mne-qt-browser    0.4.dev0\r\n\u2514\u2610 unavailable       ipympl\r\n\r\nEcosystem (optional)\r\n\u251c\u2611 mne-bids          0.12.dev0\r\n\u251c\u2611 mne-connectivity  0.6.0dev0\r\n\u2514\u2610 unavailable       mne-nirs, mne-features, mne-icalabel, mne-bids-pipeline\r\n```", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/11647/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/11647/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/11633", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/11633/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/11633/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/11633/events", "html_url": "https://github.com/mne-tools/mne-python/issues/11633", "id": 1670765754, "node_id": "I_kwDOABPcUM5jldy6", "number": 11633, "title": "mne.concatenate_raws(raws) wrongly concatenates raws if the order of the channel names varies across raws", "user": {"login": "moritz-gerster", "id": 45031224, "node_id": "MDQ6VXNlcjQ1MDMxMjI0", "avatar_url": "https://avatars.githubusercontent.com/u/45031224?v=4", "gravatar_id": "", "url": "https://api.github.com/users/moritz-gerster", "html_url": "https://github.com/moritz-gerster", "followers_url": "https://api.github.com/users/moritz-gerster/followers", "following_url": "https://api.github.com/users/moritz-gerster/following{/other_user}", "gists_url": "https://api.github.com/users/moritz-gerster/gists{/gist_id}", "starred_url": "https://api.github.com/users/moritz-gerster/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/moritz-gerster/subscriptions", "organizations_url": "https://api.github.com/users/moritz-gerster/orgs", "repos_url": "https://api.github.com/users/moritz-gerster/repos", "events_url": "https://api.github.com/users/moritz-gerster/events{/privacy}", "received_events_url": "https://api.github.com/users/moritz-gerster/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/mne-tools/mne-python/milestones/25", "html_url": "https://github.com/mne-tools/mne-python/milestone/25", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/milestones/25/labels", "id": 8736885, "node_id": "MI_kwDOABPcUM4AhVB1", "number": 25, "title": "1.4", "description": "", "creator": {"login": "larsoner", "id": 2365790, "node_id": "MDQ6VXNlcjIzNjU3OTA=", "avatar_url": "https://avatars.githubusercontent.com/u/2365790?v=4", "gravatar_id": "", "url": "https://api.github.com/users/larsoner", "html_url": "https://github.com/larsoner", "followers_url": "https://api.github.com/users/larsoner/followers", "following_url": "https://api.github.com/users/larsoner/following{/other_user}", "gists_url": "https://api.github.com/users/larsoner/gists{/gist_id}", "starred_url": "https://api.github.com/users/larsoner/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/larsoner/subscriptions", "organizations_url": "https://api.github.com/users/larsoner/orgs", "repos_url": "https://api.github.com/users/larsoner/repos", "events_url": "https://api.github.com/users/larsoner/events{/privacy}", "received_events_url": "https://api.github.com/users/larsoner/received_events", "type": "User", "site_admin": false}, "open_issues": 8, "closed_issues": 35, "state": "open", "created_at": "2022-12-08T20:54:15Z", "updated_at": "2023-04-28T15:07:12Z", "due_on": "2023-05-01T07:00:00Z", "closed_at": null}, "comments": 2, "created_at": "2023-04-17T09:23:36Z", "updated_at": "2023-04-27T16:05:57Z", "closed_at": "2023-04-27T16:05:57Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "### Description of the problem\r\n\r\n[For a description of the problem check this pdf.](https://github.com/mne-tools/mne-python/files/11248385/mne_concatenate_channels_order.pdf)\r\n\r\n`mne.concatenate_raws(raws)` wrongly concatenates raws if the order of the channel names varies across raws.\r\n\r\nIn my opinion, this is a huge bug that I noticed only accidentally. In my data, I add reference channels when they are missing and the index of this channel varies across my raws. In other words, the order of `raw.ch_names` is not consistent across my raws. \r\n\r\nWe should probably prepare the raws within mne.concatenate_raws with \r\n\r\n```Python\r\nfor raw in raws:\r\n    raw.reorder_channels(sorted(raw.ch_names))\r\n```\r\nI don't think we can expect all mne users to know this and do it themselves. I would have never thought that this function does not check the names of the channels it concatenates.\r\n\r\n### Steps to reproduce\r\n\r\n```Python\r\nSee jupyter-notebook pdf above.\r\n```\r\n\r\n\r\n### Link to data\r\n\r\n_No response_\r\n\r\n### Expected results\r\n\r\n`mne.concatenate_raws` reads in the channel names and only concatenates `\"ch1\"` of `raw1` with `\"ch1\"` of `raw2`.\r\n\r\n### Actual results\r\n\r\n`mne.concatenate_raws` concatenates `raw1.ch_names[0]` with `raw2.ch_names[0]` without checking whether `raw1.ch_names[0] == raw2.ch_names[0]`.\r\n\r\n### Additional information\r\n\r\nPlatform:         macOS-11.7.3-x86_64-i386-64bit\r\nPython:           3.11.0 | packaged by conda-forge | (main, Jan 15 2023, 05:44:48) [Clang 14.0.6 ]\r\nExecutable:       /opt/anaconda3/envs/bids_neu/bin/python\r\nCPU:              i386: 8 cores\r\nMemory:           16.0 GB\r\n\r\nmne:              1.3.0\r\nnumpy:            1.23.4 {OpenBLAS 0.3.20 with 4 threads}\r\nscipy:            1.10.0\r\nmatplotlib:       3.7.0 {backend=module://matplotlib_inline.backend_inline}\r\n\r\nsklearn:          1.2.1\r\nnumba:            Not found\r\nnibabel:          5.0.1\r\nnilearn:          Not found\r\ndipy:             Not found\r\nopenmeeg:         Not found\r\ncupy:             Not found\r\npandas:           1.5.3\r\npyvista:          Not found\r\npyvistaqt:        Not found\r\nipyvtklink:       Not found\r\nvtk:              Not found\r\nqtpy:             Not found\r\nipympl:           Not found\r\npyqtgraph:        Not found\r\npooch:            v1.6.0\r\n\r\nmne_bids:         0.12\r\nmne_nirs:         Not found\r\nmne_features:     Not found\r\nmne_qt_browser:   Not found\r\nmne_connectivity: Not found\r\nmne_icalabel:     Not found", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/11633/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/11633/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/11628", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/11628/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/11628/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/11628/events", "html_url": "https://github.com/mne-tools/mne-python/issues/11628", "id": 1668074271, "node_id": "I_kwDOABPcUM5jbMsf", "number": 11628, "title": "Plot raw data - visualization bug?", "user": {"login": "vpKumaravel", "id": 48288235, "node_id": "MDQ6VXNlcjQ4Mjg4MjM1", "avatar_url": "https://avatars.githubusercontent.com/u/48288235?v=4", "gravatar_id": "", "url": "https://api.github.com/users/vpKumaravel", "html_url": "https://github.com/vpKumaravel", "followers_url": "https://api.github.com/users/vpKumaravel/followers", "following_url": "https://api.github.com/users/vpKumaravel/following{/other_user}", "gists_url": "https://api.github.com/users/vpKumaravel/gists{/gist_id}", "starred_url": "https://api.github.com/users/vpKumaravel/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/vpKumaravel/subscriptions", "organizations_url": "https://api.github.com/users/vpKumaravel/orgs", "repos_url": "https://api.github.com/users/vpKumaravel/repos", "events_url": "https://api.github.com/users/vpKumaravel/events{/privacy}", "received_events_url": "https://api.github.com/users/vpKumaravel/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2023-04-14T11:28:13Z", "updated_at": "2023-04-14T14:54:37Z", "closed_at": "2023-04-14T14:54:36Z", "author_association": "NONE", "active_lock_reason": null, "body": "### Description of the problem\n\nHello!\r\n\r\nToday I noticed something strange with the plot UI. I describe it as follows:\r\n\r\n1) I used Maxwell function to detect bad channels and I plot the raw data without \"Butterfly\" effect and the data looks as below.\r\n\r\n![Maxwell_bad_channel_2023](https://user-images.githubusercontent.com/48288235/232030512-c7d7bf12-de76-46fa-9240-f48ea37d97cf.PNG)\r\n\r\n2) Then, I clicked on the channel MEG2032 because my algorithm predicts that as a bad channel, too. However, looking at the plot above, MEG2032 seems clean. While trying to investigate, I clicked on that channel and the UI marks it in red color - which is fine, but the waveform changed abruptly to something below.\r\n\r\n![Maxwell_bad_channel_2023_2032_bad](https://user-images.githubusercontent.com/48288235/232030910-342b6aef-f934-46e6-8e21-0241588eb37c.PNG)\r\n\r\nI wonder if the UI is designed this way or a bug. Please provide your comments.\r\n\n\n### Steps to reproduce\n\n```Python\n1. Import raw data\r\n2. Detect bad channels using Maxwell filter by executing the following snippet:\r\n\r\n    raw_check.info['bads'] = []\r\n    auto_noisy_chs, auto_flat_chs = find_bad_channels_maxwell(\r\n        raw_check, return_scores=False, verbose=True)\r\n    print(auto_noisy_chs)  # we should find them!\r\n    print(auto_flat_chs)  # none for this dataset\r\n\r\n    raw_check.info['bads'] = auto_noisy_chs + auto_flat_chs\r\n    for title, data in zip(['Maxwell Detection'], [raw_check]):\r\n        with mne.viz.use_browser_backend('matplotlib'):\r\n            fig = data.plot(butterfly=False, color='#00000022', bad_color='r')\r\n        fig.subplots_adjust(top=0.9)\r\n        fig.suptitle(title, size='xx-large', weight='bold')\r\n\r\n3. Click on a channel not detected as bad by Maxwell function (i.e., the ones in grey color).\r\n4. You might observe the change in shape of the data as I experienced.\n```\n\n\n### Link to data\n\n_No response_\n\n### Expected results\n\nI'd expect the shape of the data to be the same whether I click on a particular sensor or not.\n\n### Actual results\n\nAs described above, the shape changes with a mouse click over the sensor's data.\n\n### Additional information\n\nmne.sys_info()\r\nPlatform:         Windows-10-10.0.19044-SP0\r\nPython:           3.8.16 (default, Mar  2 2023, 03:18:16) [MSC v.1916 64 bit (AMD64)]\r\nExecutable:       C:\\ProgramData\\Anaconda3\\envs\\NEAR\\python.exe\r\nCPU:              Intel64 Family 6 Model 158 Stepping 10, GenuineIntel: 8 cores\r\nMemory:           Unavailable (requires \"psutil\" package)\r\nmne:              1.3.1\r\nnumpy:            1.24.2 {OpenBLAS 0.3.21 with 8 threads}\r\nscipy:            1.10.1\r\nmatplotlib:       3.7.1 {backend=module://backend_interagg}\r\nsklearn:          1.2.2\r\nnumba:            Not found\r\nnibabel:          Not found\r\nnilearn:          Not found\r\ndipy:             Not found\r\nopenmeeg:         Not found\r\ncupy:             Not found\r\npandas:           1.5.3\r\npyvista:          Not found\r\npyvistaqt:        Not found\r\nipyvtklink:       Not found\r\nvtk:              Not found\r\nqtpy:             Not found\r\nipympl:           Not found\r\npyqtgraph:        Not found\r\npooch:            v1.7.0\r\nmne_bids:         Not found\r\nmne_nirs:         Not found\r\nmne_features:     Not found\r\nmne_qt_browser:   Not found\r\nmne_connectivity: Not found\r\nmne_icalabel:     Not found", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/11628/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/11628/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/11623", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/11623/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/11623/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/11623/events", "html_url": "https://github.com/mne-tools/mne-python/pull/11623", "id": 1665078272, "node_id": "PR_kwDOABPcUM5OKU9O", "number": 11623, "title": "Display SVG figures correctly in Report", "user": {"login": "hoechenberger", "id": 2046265, "node_id": "MDQ6VXNlcjIwNDYyNjU=", "avatar_url": "https://avatars.githubusercontent.com/u/2046265?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hoechenberger", "html_url": "https://github.com/hoechenberger", "followers_url": "https://api.github.com/users/hoechenberger/followers", "following_url": "https://api.github.com/users/hoechenberger/following{/other_user}", "gists_url": "https://api.github.com/users/hoechenberger/gists{/gist_id}", "starred_url": "https://api.github.com/users/hoechenberger/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hoechenberger/subscriptions", "organizations_url": "https://api.github.com/users/hoechenberger/orgs", "repos_url": "https://api.github.com/users/hoechenberger/repos", "events_url": "https://api.github.com/users/hoechenberger/events{/privacy}", "received_events_url": "https://api.github.com/users/hoechenberger/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-04-12T18:53:54Z", "updated_at": "2023-04-13T16:16:31Z", "closed_at": "2023-04-13T16:16:30Z", "author_association": "MEMBER", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/mne-tools/mne-python/pulls/11623", "html_url": "https://github.com/mne-tools/mne-python/pull/11623", "diff_url": "https://github.com/mne-tools/mne-python/pull/11623.diff", "patch_url": "https://github.com/mne-tools/mne-python/pull/11623.patch", "merged_at": "2023-04-13T16:16:30Z"}, "body": "Fixes #11617\n", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/11623/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/11623/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/11617", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/11617/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/11617/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/11617/events", "html_url": "https://github.com/mne-tools/mne-python/issues/11617", "id": 1652730756, "node_id": "I_kwDOABPcUM5igquE", "number": 11617, "title": "Add custom figures in SVG format to MNE reports", "user": {"login": "nordme", "id": 38704848, "node_id": "MDQ6VXNlcjM4NzA0ODQ4", "avatar_url": "https://avatars.githubusercontent.com/u/38704848?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nordme", "html_url": "https://github.com/nordme", "followers_url": "https://api.github.com/users/nordme/followers", "following_url": "https://api.github.com/users/nordme/following{/other_user}", "gists_url": "https://api.github.com/users/nordme/gists{/gist_id}", "starred_url": "https://api.github.com/users/nordme/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nordme/subscriptions", "organizations_url": "https://api.github.com/users/nordme/orgs", "repos_url": "https://api.github.com/users/nordme/repos", "events_url": "https://api.github.com/users/nordme/events{/privacy}", "received_events_url": "https://api.github.com/users/nordme/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "hoechenberger", "id": 2046265, "node_id": "MDQ6VXNlcjIwNDYyNjU=", "avatar_url": "https://avatars.githubusercontent.com/u/2046265?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hoechenberger", "html_url": "https://github.com/hoechenberger", "followers_url": "https://api.github.com/users/hoechenberger/followers", "following_url": "https://api.github.com/users/hoechenberger/following{/other_user}", "gists_url": "https://api.github.com/users/hoechenberger/gists{/gist_id}", "starred_url": "https://api.github.com/users/hoechenberger/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hoechenberger/subscriptions", "organizations_url": "https://api.github.com/users/hoechenberger/orgs", "repos_url": "https://api.github.com/users/hoechenberger/repos", "events_url": "https://api.github.com/users/hoechenberger/events{/privacy}", "received_events_url": "https://api.github.com/users/hoechenberger/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "hoechenberger", "id": 2046265, "node_id": "MDQ6VXNlcjIwNDYyNjU=", "avatar_url": "https://avatars.githubusercontent.com/u/2046265?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hoechenberger", "html_url": "https://github.com/hoechenberger", "followers_url": "https://api.github.com/users/hoechenberger/followers", "following_url": "https://api.github.com/users/hoechenberger/following{/other_user}", "gists_url": "https://api.github.com/users/hoechenberger/gists{/gist_id}", "starred_url": "https://api.github.com/users/hoechenberger/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hoechenberger/subscriptions", "organizations_url": "https://api.github.com/users/hoechenberger/orgs", "repos_url": "https://api.github.com/users/hoechenberger/repos", "events_url": "https://api.github.com/users/hoechenberger/events{/privacy}", "received_events_url": "https://api.github.com/users/hoechenberger/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 1, "created_at": "2023-04-03T20:30:33Z", "updated_at": "2023-04-13T16:16:32Z", "closed_at": "2023-04-13T16:16:32Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "### Description of the problem\n\nHello!! Currently, `mne.reports.add_figure()` is broken when passing `svg` to `image_format`.\n\n### Steps to reproduce\n\n```Python\nimport mne\r\nimport matplotlib.pyplot as plt\r\nreport = mne.Report(title='SVG Image Format Test')\r\nfig, _ = plt.subplots()\r\nreport.add_figure(fig=fig, title='Attempting SVG Add', image_format='svg')\r\nreport.save('svg_test_report.html', overwrite=True)\n```\n\n\n### Link to data\n\n_No response_\n\n### Expected results\n\nI expected the html report to show a plot of some sort. Instead it shows text. \n\n### Actual results\n\n![Screenshot from 2023-04-03 13-25-13](https://user-images.githubusercontent.com/38704848/229619514-a1183217-1733-473d-b6fd-8e47455762f0.png)\r\n\n\n### Additional information\n\n>>> mne.sys_info()\r\nPlatform             Linux-5.19.0-38-generic-x86_64-with-glibc2.35\r\nPython               3.10.10 | packaged by conda-forge | (main, Mar 24 2023, 20:08:06) [GCC 11.3.0]\r\nExecutable           /home/erica/miniconda3/envs/dev_2023/bin/python\r\nCPU                  x86_64 (24 cores)\r\nMemory               62.7 GB\r\n\r\nCore\r\n\u251c\u2611 mne               1.4.0.dev105+g686857c55\r\n\u251c\u2611 numpy             1.23.5 (OpenBLAS 0.3.21 with 12 threads)\r\n\u251c\u2611 scipy             1.10.1\r\n\u251c\u2611 matplotlib        3.7.1 (backend=QtAgg)\r\n\u251c\u2611 pooch             1.7.0\r\n\u2514\u2611 jinja2            3.1.2\r\n\r\nNumerical (optional)\r\n\u251c\u2611 sklearn           1.2.2\r\n\u251c\u2611 numba             0.56.4\r\n\u251c\u2611 nibabel           5.0.1\r\n\u251c\u2611 nilearn           0.10.0\r\n\u251c\u2611 dipy              1.6.0\r\n\u251c\u2611 openmeeg          2.5.5\r\n\u251c\u2611 pandas            1.5.3\r\n\u2514\u2610 unavailable       cupy\r\n\r\nVisualization (optional)\r\n\u251c\u2611 pyvista           0.38.5 (OpenGL 4.6 (Core Profile) Mesa 22.2.5 via AMD Radeon RX 570 Series (polaris10, LLVM 15.0.6, DRM 3.47, 5.19.0-38-generic))\r\n\u251c\u2611 pyvistaqt         0.9.1\r\n\u251c\u2611 ipyvtklink        0.2.2\r\n\u251c\u2611 vtk               9.2.6\r\n\u251c\u2611 qtpy              2.3.1 (PyQt5=5.15.6)\r\n\u251c\u2611 pyqtgraph         0.13.2\r\n\u251c\u2611 mne-qt-browser    0.4.0\r\n\u2514\u2610 unavailable       ipympl\r\n\r\nEcosystem (optional)\r\n\u251c\u2611 mne-bids          0.13.dev0\r\n\u251c\u2611 mne-connectivity  0.6.0dev0\r\n\u2514\u2610 unavailable       mne-nirs, mne-features, mne-icalabel, mne-bids-pipeline\r\n>>> \r\n", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/11617/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/11617/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/11598", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/11598/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/11598/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/11598/events", "html_url": "https://github.com/mne-tools/mne-python/issues/11598", "id": 1641026865, "node_id": "I_kwDOABPcUM5h0BUx", "number": 11598, "title": "Get rid of `# -*- coding: utf-8 -*-`?", "user": {"login": "DimitriPapadopoulos", "id": 3234522, "node_id": "MDQ6VXNlcjMyMzQ1MjI=", "avatar_url": "https://avatars.githubusercontent.com/u/3234522?v=4", "gravatar_id": "", "url": "https://api.github.com/users/DimitriPapadopoulos", "html_url": "https://github.com/DimitriPapadopoulos", "followers_url": "https://api.github.com/users/DimitriPapadopoulos/followers", "following_url": "https://api.github.com/users/DimitriPapadopoulos/following{/other_user}", "gists_url": "https://api.github.com/users/DimitriPapadopoulos/gists{/gist_id}", "starred_url": "https://api.github.com/users/DimitriPapadopoulos/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/DimitriPapadopoulos/subscriptions", "organizations_url": "https://api.github.com/users/DimitriPapadopoulos/orgs", "repos_url": "https://api.github.com/users/DimitriPapadopoulos/repos", "events_url": "https://api.github.com/users/DimitriPapadopoulos/events{/privacy}", "received_events_url": "https://api.github.com/users/DimitriPapadopoulos/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2023-03-26T18:37:27Z", "updated_at": "2023-03-27T18:50:02Z", "closed_at": "2023-03-27T18:50:02Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "### Description of the problem\n\nUTF-8 is implicit in Python 3.\r\n\r\nIs it OK to remove line `# -*- coding: utf-8 -*-` from Python files?\n\n### Steps to reproduce\n\n```Python\n$ grep -R 'coding: utf-8'\r\ntutorials/epochs/20_visualize_epochs.py:# -*- coding: utf-8 -*-\r\ntutorials/epochs/15_baseline_regression.py:# -*- coding: utf-8 -*-\r\ntutorials/epochs/10_epochs_overview.py:# -*- coding: utf-8 -*-\r\ntutorials/epochs/60_make_fixed_length_epochs.py:# -*- coding: utf-8 -*-\r\n...\r\n```\n```\n\n\n### Link to data\n\n_No response_\n\n### Expected results\n\nRemove `# -*- coding: utf-8 -*-` which should be implicit in Python 3 files.\n\n### Actual results\n\nExplicit `# -*- coding: utf-8 -*-` in Python files.\n\n### Additional information\n\n-", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/11598/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/11598/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/11560", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/11560/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/11560/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/11560/events", "html_url": "https://github.com/mne-tools/mne-python/issues/11560", "id": 1625452183, "node_id": "I_kwDOABPcUM5g4m6X", "number": 11560, "title": "interpolate_bads did not work", "user": {"login": "onelyn", "id": 64457213, "node_id": "MDQ6VXNlcjY0NDU3MjEz", "avatar_url": "https://avatars.githubusercontent.com/u/64457213?v=4", "gravatar_id": "", "url": "https://api.github.com/users/onelyn", "html_url": "https://github.com/onelyn", "followers_url": "https://api.github.com/users/onelyn/followers", "following_url": "https://api.github.com/users/onelyn/following{/other_user}", "gists_url": "https://api.github.com/users/onelyn/gists{/gist_id}", "starred_url": "https://api.github.com/users/onelyn/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/onelyn/subscriptions", "organizations_url": "https://api.github.com/users/onelyn/orgs", "repos_url": "https://api.github.com/users/onelyn/repos", "events_url": "https://api.github.com/users/onelyn/events{/privacy}", "received_events_url": "https://api.github.com/users/onelyn/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "larsoner", "id": 2365790, "node_id": "MDQ6VXNlcjIzNjU3OTA=", "avatar_url": "https://avatars.githubusercontent.com/u/2365790?v=4", "gravatar_id": "", "url": "https://api.github.com/users/larsoner", "html_url": "https://github.com/larsoner", "followers_url": "https://api.github.com/users/larsoner/followers", "following_url": "https://api.github.com/users/larsoner/following{/other_user}", "gists_url": "https://api.github.com/users/larsoner/gists{/gist_id}", "starred_url": "https://api.github.com/users/larsoner/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/larsoner/subscriptions", "organizations_url": "https://api.github.com/users/larsoner/orgs", "repos_url": "https://api.github.com/users/larsoner/repos", "events_url": "https://api.github.com/users/larsoner/events{/privacy}", "received_events_url": "https://api.github.com/users/larsoner/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "larsoner", "id": 2365790, "node_id": "MDQ6VXNlcjIzNjU3OTA=", "avatar_url": "https://avatars.githubusercontent.com/u/2365790?v=4", "gravatar_id": "", "url": "https://api.github.com/users/larsoner", "html_url": "https://github.com/larsoner", "followers_url": "https://api.github.com/users/larsoner/followers", "following_url": "https://api.github.com/users/larsoner/following{/other_user}", "gists_url": "https://api.github.com/users/larsoner/gists{/gist_id}", "starred_url": "https://api.github.com/users/larsoner/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/larsoner/subscriptions", "organizations_url": "https://api.github.com/users/larsoner/orgs", "repos_url": "https://api.github.com/users/larsoner/repos", "events_url": "https://api.github.com/users/larsoner/events{/privacy}", "received_events_url": "https://api.github.com/users/larsoner/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/mne-tools/mne-python/milestones/25", "html_url": "https://github.com/mne-tools/mne-python/milestone/25", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/milestones/25/labels", "id": 8736885, "node_id": "MI_kwDOABPcUM4AhVB1", "number": 25, "title": "1.4", "description": "", "creator": {"login": "larsoner", "id": 2365790, "node_id": "MDQ6VXNlcjIzNjU3OTA=", "avatar_url": "https://avatars.githubusercontent.com/u/2365790?v=4", "gravatar_id": "", "url": "https://api.github.com/users/larsoner", "html_url": "https://github.com/larsoner", "followers_url": "https://api.github.com/users/larsoner/followers", "following_url": "https://api.github.com/users/larsoner/following{/other_user}", "gists_url": "https://api.github.com/users/larsoner/gists{/gist_id}", "starred_url": "https://api.github.com/users/larsoner/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/larsoner/subscriptions", "organizations_url": "https://api.github.com/users/larsoner/orgs", "repos_url": "https://api.github.com/users/larsoner/repos", "events_url": "https://api.github.com/users/larsoner/events{/privacy}", "received_events_url": "https://api.github.com/users/larsoner/received_events", "type": "User", "site_admin": false}, "open_issues": 8, "closed_issues": 35, "state": "open", "created_at": "2022-12-08T20:54:15Z", "updated_at": "2023-04-28T15:07:12Z", "due_on": "2023-05-01T07:00:00Z", "closed_at": null}, "comments": 9, "created_at": "2023-03-15T12:41:30Z", "updated_at": "2023-03-15T16:19:59Z", "closed_at": "2023-03-15T16:19:58Z", "author_association": "NONE", "active_lock_reason": null, "body": "### Description of the problem\n\nHello all! I have a problem interpolating bad channels of MEG data.\r\n\r\nHere is my MEG data description:\r\n![image](https://user-images.githubusercontent.com/64457213/225310293-a594a0b3-e860-42ab-97d5-c4919a5f4ee0.png)\r\n\r\nI need to interpolate the MEG 079 channel based on other channels.\r\n\r\nThe original data looks like this:\r\n![image](https://user-images.githubusercontent.com/64457213/225310347-5878db98-9fa6-4360-8aa2-5973eb449eed.png)\r\n\r\nAfter I called the `meg_data.copy().interpolate_bads(reset_bads=False)`, it seemed that the MEG 079 channel was not changed.\r\n![image](https://user-images.githubusercontent.com/64457213/225310466-7bf15964-ebe0-40e1-a688-4b36016b00f1.png)\r\n![image](https://user-images.githubusercontent.com/64457213/225310496-da61479b-6c97-4734-b110-48c74baf9b75.png)\r\n\r\nI\u2019m wondering what\u2019s wrong during the process. I\u2019d appreciate it if anyone could help! Thanks a lot!\n\n### Steps to reproduce\n\n```Python\nraw.info['bads']=['MEG 079']\r\nraw.load_data()\r\nmeg_data = raw.copy().filter(l_freq=1, h_freq=40)\r\nmeg_data_interp = meg_data.copy().pick_types(meg=True, exclude=[])\r\nmeg_data_interp = meg_data_interp.interpolate_bads(reset_bads=False)\r\npicks = mne.pick_channels(meg_data_interp.ch_names, include=['MEG 078','MEG 079','MEG 080'])\r\nmeg_data_interp.plot(duration=12, order=picks, n_channels=len(picks))\n```\n\n\n### Link to data\n\n_No response_\n\n### Expected results\n\ninterpolated data of MEG 079 channel\n\n### Actual results\n\nno change to the data\n\n### Additional information\n\nI'm using the data from https://osf.io/ag3kj/\r\nI'm using sub-01_ses-1_task-1_meg.con and corresponding marker, elp, and hsp files\r\n\r\nmne.sys_info():\r\n![image](https://user-images.githubusercontent.com/64457213/225311790-5d5149fb-2ff8-47a5-a892-a1c69f92b8d3.png)\r\n", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/11560/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/11560/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/11552", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/11552/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/11552/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/11552/events", "html_url": "https://github.com/mne-tools/mne-python/issues/11552", "id": 1623018128, "node_id": "I_kwDOABPcUM5gvUqQ", "number": 11552, "title": "Unable to use RawEDF normally", "user": {"login": "myh1041893567", "id": 49837682, "node_id": "MDQ6VXNlcjQ5ODM3Njgy", "avatar_url": "https://avatars.githubusercontent.com/u/49837682?v=4", "gravatar_id": "", "url": "https://api.github.com/users/myh1041893567", "html_url": "https://github.com/myh1041893567", "followers_url": "https://api.github.com/users/myh1041893567/followers", "following_url": "https://api.github.com/users/myh1041893567/following{/other_user}", "gists_url": "https://api.github.com/users/myh1041893567/gists{/gist_id}", "starred_url": "https://api.github.com/users/myh1041893567/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/myh1041893567/subscriptions", "organizations_url": "https://api.github.com/users/myh1041893567/orgs", "repos_url": "https://api.github.com/users/myh1041893567/repos", "events_url": "https://api.github.com/users/myh1041893567/events{/privacy}", "received_events_url": "https://api.github.com/users/myh1041893567/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 30, "created_at": "2023-03-14T08:58:14Z", "updated_at": "2023-03-23T17:36:11Z", "closed_at": "2023-03-16T15:03:29Z", "author_association": "NONE", "active_lock_reason": null, "body": "### Description of the problem\r\n\r\nDuring the model experiment, the first prompt is that the channel read from the edf file is different from the setting. This query found that a RawEDF cannot be used normally. The data file can be opened with the EDFbrowser file.\r\n2023-03-14 11:26:59,598 INFO : 29 files in total.\r\n2023-03-14 11:26:59,598 INFO : Read recording lengths...\r\n2023-03-14 11:26:59,616 INFO : Load 1 of 29\r\n2023-03-14 11:26:59,848 INFO : Load data...\r\nReading 0 ... 301249  =      0.000 ...  1204.996 secs...\r\nTraceback (most recent call last):\r\n  File \"E:\\EEG\\eeg1\\auto-eeg-diagnosis-example-master\\auto_diagnosis.py\", line 348, in <module>\r\n    exp = run_exp(\r\n  File \"E:\\EEG\\eeg1\\auto-eeg-diagnosis-example-master\\auto_diagnosis.py\", line 168, in run_exp\r\n    X,y = dataset.load()\r\n  File \"E:\\EEG\\eeg1\\auto-eeg-diagnosis-example-master\\dataset.py\", line 201, in load\r\n    x = load_data(fname, preproc_functions=self.preproc_functions,\r\n  File \"E:\\EEG\\eeg1\\auto-eeg-diagnosis-example-master\\dataset.py\", line 126, in load_data\r\n    assert np.array_equal(cnt.ch_names, selected_ch_names)\r\nAssertionError\r\n\r\nUnable to get repr for <class 'mne.io.edf.edf.RawEDF'>\r\n'RawEDF' object has no attribute '_annotations'\r\n'RawEDF' object has no attribute 'info'\r\n\r\n\r\n### Steps to reproduce\r\n\r\n```Python\r\nRecurrence model link\uff1ahttps://github.com/robintibor/auto-eeg-diagnosis-example\r\n```\r\n\r\n\r\n### Link to data\r\n\r\nhttps://isip.piconepress.com/projects/tuh_eeg/html/downloads.shtml\r\n\r\n### Expected results\r\n\r\nYou want to get the response\r\n\r\n### Actual results\r\n\r\nD:\\Anaconda\\python.exe E:/EEG/eeg1/auto-eeg-diagnosis-example-master/auto_diagnosis.py\r\n2023-03-14 11:26:59,580 INFO : Read file names\r\n2023-03-14 11:26:59,580 INFO : Reading E:\\EEG\\file\\text\\edf\\train\\...\r\n2023-03-14 11:26:59,598 INFO : .. 29 files.\r\n2023-03-14 11:26:59,598 INFO : 29 files in total.\r\n2023-03-14 11:26:59,598 INFO : Read recording lengths...\r\n2023-03-14 11:26:59,616 INFO : Load 1 of 29\r\n2023-03-14 11:26:59,848 INFO : Load data...\r\nReading 0 ... 301249  =      0.000 ...  1204.996 secs...\r\nTraceback (most recent call last):\r\n  File \"E:\\EEG\\eeg1\\auto-eeg-diagnosis-example-master\\auto_diagnosis.py\", line 348, in <module>\r\n    exp = run_exp(\r\n  File \"E:\\EEG\\eeg1\\auto-eeg-diagnosis-example-master\\auto_diagnosis.py\", line 168, in run_exp\r\n    X,y = dataset.load()\r\n  File \"E:\\EEG\\eeg1\\auto-eeg-diagnosis-example-master\\dataset.py\", line 201, in load\r\n    x = load_data(fname, preproc_functions=self.preproc_functions,\r\n  File \"E:\\EEG\\eeg1\\auto-eeg-diagnosis-example-master\\dataset.py\", line 126, in load_data\r\n    assert np.array_equal(cnt.ch_names, selected_ch_names)\r\nAssertionError\r\n\r\n### Additional information\r\n\r\n<details>\r\nMicrosoft Windows [\u7248\u672c 10.0.22000.1574]\r\nPython 3.9.12\r\nAMD Ryzen 7 5800H with Radeon Graphics\r\n\r\nPackage                       Version\r\n----------------------------- --------------------\r\naiohttp                       3.8.1\r\naiosignal                     1.2.0\r\nalabaster                     0.7.12\r\nanaconda-client               1.9.0\r\nanaconda-navigator            2.4.0\r\nanaconda-project              0.10.2\r\nanyio                         3.5.0\r\nappdirs                       1.4.4\r\nargon2-cffi                   21.3.0\r\nargon2-cffi-bindings          21.2.0\r\narrow                         1.2.2\r\nastroid                       2.6.6\r\nastropy                       5.0.4\r\nasttokens                     2.0.5\r\nasync-timeout                 4.0.1\r\natomicwrites                  1.4.0\r\nattrs                         21.4.0\r\nAutomat                       20.2.0\r\nautopep8                      1.6.0\r\nBabel                         2.9.1\r\nbackcall                      0.2.0\r\nbackports.functools-lru-cache 1.6.4\r\nbackports.tempfile            1.0\r\nbackports.weakref             1.0.post1\r\nbcrypt                        3.2.0\r\nbeautifulsoup4                4.11.1\r\nbinaryornot                   0.4.4\r\nbitarray                      2.4.1\r\nbkcharts                      0.2\r\nblack                         19.10b0\r\nbleach                        4.1.0\r\nbokeh                         2.4.2\r\nboto3                         1.21.32\r\nbotocore                      1.24.32\r\nBottleneck                    1.3.4\r\nBraindecode                   0.6\r\nbrotlipy                      0.7.0\r\ncachetools                    4.2.2\r\ncertifi                       2022.12.7\r\ncffi                          1.15.0\r\nchardet                       4.0.0\r\ncharset-normalizer            2.0.4\r\nclick                         8.0.4\r\ncloudpickle                   2.0.0\r\nclyent                        1.2.2\r\ncolorama                      0.4.4\r\ncolorcet                      2.0.6\r\ncomtypes                      1.1.10\r\nconda                         23.1.0\r\nconda-build                   3.21.8\r\nconda-content-trust           0+unknown\r\nconda-pack                    0.6.0\r\nconda-package-handling        1.8.1\r\nconda-repo-cli                1.0.4\r\nconda-token                   0.3.0\r\nconda-verify                  3.4.2\r\nconstantly                    15.1.0\r\ncookiecutter                  1.7.3\r\ncoverage                      5.5\r\ncryptography                  3.4.8\r\ncssselect                     1.1.0\r\ncycler                        0.11.0\r\nCython                        0.29.28\r\ncytoolz                       0.11.0\r\ndaal4py                       2021.5.0\r\ndask                          2022.2.1\r\ndatashader                    0.13.0\r\ndatashape                     0.5.4\r\ndebugpy                       1.5.1\r\ndecorator                     5.1.1\r\ndefusedxml                    0.7.1\r\ndiff-match-patch              20200713\r\ndistributed                   2022.2.1\r\ndocutils                      0.17.1\r\nentrypoints                   0.4\r\net-xmlfile                    1.1.0\r\nexecuting                     0.8.3\r\nfastjsonschema                2.15.1\r\nfilelock                      3.6.0\r\nflake8                        3.9.2\r\nFlask                         1.1.2\r\nfonttools                     4.25.0\r\nfrozenlist                    1.2.0\r\nfsspec                        2022.2.0\r\nfuture                        0.18.2\r\ngensim                        4.1.2\r\nglob2                         0.7\r\ngoogle-api-core               1.25.1\r\ngoogle-auth                   1.33.0\r\ngoogle-cloud-core             1.7.1\r\ngoogle-cloud-storage          1.31.0\r\ngoogle-crc32c                 1.1.2\r\ngoogle-resumable-media        1.3.1\r\ngoogleapis-common-protos      1.53.0\r\ngreenlet                      1.1.1\r\ngrpcio                        1.42.0\r\nh5py                          3.6.0\r\nHeapDict                      1.0.1\r\nholoviews                     1.14.8\r\nhuggingface-hub               0.10.1\r\nhvplot                        0.7.3\r\nhyperlink                     21.0.0\r\nidna                          3.3\r\nimagecodecs                   2021.8.26\r\nimageio                       2.9.0\r\nimagesize                     1.3.0\r\nimbalanced-learn              0.10.1\r\nimportlib-metadata            4.11.3\r\nincremental                   21.3.0\r\ninflection                    0.5.1\r\niniconfig                     1.1.1\r\nintake                        0.6.5\r\nintervaltree                  3.1.0\r\nipykernel                     6.9.1\r\nipython                       8.2.0\r\nipython-genutils              0.2.0\r\nipywidgets                    7.6.5\r\nisort                         5.9.3\r\nitemadapter                   0.3.0\r\nitemloaders                   1.0.4\r\nitsdangerous                  2.0.1\r\njdcal                         1.4.1\r\njedi                          0.18.1\r\nJinja2                        2.11.3\r\njinja2-time                   0.2.0\r\njmespath                      0.10.0\r\njoblib                        1.1.0\r\njson5                         0.9.6\r\njsonschema                    4.4.0\r\njupyter                       1.0.0\r\njupyter-client                6.1.12\r\njupyter-console               6.4.0\r\njupyter-core                  4.9.2\r\njupyter-server                1.13.5\r\njupyterlab                    3.3.2\r\njupyterlab-pygments           0.1.2\r\njupyterlab-server             2.10.3\r\njupyterlab-widgets            1.0.0\r\nkeyring                       23.4.0\r\nkiwisolver                    1.3.2\r\nlazy-object-proxy             1.6.0\r\nlibarchive-c                  2.9\r\nllvmlite                      0.38.0\r\nlocket                        0.2.1\r\nlxml                          4.8.0\r\nMarkdown                      3.3.4\r\nMarkupSafe                    2.0.1\r\nmatplotlib                    3.5.1\r\nmatplotlib-inline             0.1.2\r\nmccabe                        0.6.1\r\nmenuinst                      1.4.18\r\nmistune                       0.8.4\r\nmkl-fft                       1.3.1\r\nmkl-random                    1.2.2\r\nmkl-service                   2.4.0\r\nmne                           1.3.1\r\nmoabb                         0.4.6\r\nmock                          4.0.3\r\nmpmath                        1.2.1\r\nmsgpack                       1.0.2\r\nmultidict                     5.1.0\r\nmultipledispatch              0.6.0\r\nmunkres                       1.1.4\r\nmypy-extensions               0.4.3\r\nnavigator-updater             0.2.1\r\nnbclassic                     0.3.5\r\nnbclient                      0.5.13\r\nnbconvert                     6.4.4\r\nnbformat                      5.3.0\r\nnest-asyncio                  1.5.5\r\nnetworkx                      2.7.1\r\nnltk                          3.7\r\nnose                          1.3.7\r\nnotebook                      6.4.8\r\nnumba                         0.55.1\r\nnumexpr                       2.8.1\r\nnumpy                         1.21.5\r\nnumpydoc                      1.2\r\nolefile                       0.46\r\nopenpyxl                      3.0.9\r\npackaging                     21.3\r\npandas                        1.4.2\r\npandocfilters                 1.5.0\r\npanel                         0.13.0\r\nparam                         1.12.0\r\nparamiko                      2.8.1\r\nparsel                        1.6.0\r\nparso                         0.8.3\r\npartd                         1.2.0\r\npathspec                      0.7.0\r\npatsy                         0.5.2\r\npep8                          1.7.1\r\npexpect                       4.8.0\r\npickleshare                   0.7.5\r\nPillow                        9.0.1\r\npip                           21.2.4\r\npkginfo                       1.8.2\r\nplotly                        5.6.0\r\npluggy                        1.0.0\r\npooch                         1.6.0\r\npoyo                          0.5.0\r\nprometheus-client             0.13.1\r\nprompt-toolkit                3.0.20\r\nProtego                       0.1.16\r\nprotobuf                      3.19.1\r\npsutil                        5.8.0\r\nptyprocess                    0.7.0\r\npure-eval                     0.2.2\r\npy                            1.11.0\r\npyasn1                        0.4.8\r\npyasn1-modules                0.2.8\r\npycodestyle                   2.7.0\r\npycosat                       0.6.3\r\npycparser                     2.21\r\npyct                          0.4.6\r\npycurl                        7.44.1\r\nPyDispatcher                  2.0.5\r\npydocstyle                    6.1.1\r\npyerfa                        2.0.0\r\npyflakes                      2.3.1\r\nPygments                      2.11.2\r\nPyHamcrest                    2.0.2\r\nPyJWT                         2.1.0\r\npylint                        2.9.6\r\npyls-spyder                   0.4.0\r\nPyNaCl                        1.4.0\r\npyodbc                        4.0.32\r\npyOpenSSL                     21.0.0\r\npyparsing                     3.0.4\r\npyreadline                    2.1\r\npyriemann                     0.2.7\r\npyrsistent                    0.18.0\r\nPySocks                       1.7.1\r\npytest                        7.1.1\r\npython-dateutil               2.8.2\r\npython-lsp-black              1.0.0\r\npython-lsp-jsonrpc            1.0.0\r\npython-lsp-server             1.2.4\r\npython-slugify                5.0.2\r\npython-snappy                 0.6.0\r\npytz                          2021.3\r\npyviz-comms                   2.0.2\r\nPyWavelets                    1.3.0\r\npywin32                       302\r\npywin32-ctypes                0.2.0\r\npywinpty                      2.0.2\r\nPyYAML                        6.0\r\npyzmq                         22.3.0\r\nQDarkStyle                    3.0.2\r\nqstylizer                     0.1.10\r\nQtAwesome                     1.0.3\r\nqtconsole                     5.3.0\r\nQtPy                          2.0.1\r\nqueuelib                      1.5.0\r\nregex                         2022.3.15\r\nrequests                      2.27.1\r\nrequests-file                 1.5.1\r\nrope                          0.22.0\r\nrsa                           4.7.2\r\nRtree                         0.9.7\r\nruamel.yaml                   0.17.21\r\nruamel.yaml.clib              0.2.6\r\nruamel-yaml-conda             0.15.100\r\ns3transfer                    0.5.0\r\nscikit-image                  0.19.2\r\nscikit-learn                  1.0.2\r\nscikit-learn-intelex          2021.20220215.102710\r\nscipy                         1.7.3\r\nScrapy                        2.6.1\r\nseaborn                       0.11.2\r\nSend2Trash                    1.8.0\r\nservice-identity              18.1.0\r\nsetuptools                    61.2.0\r\nsip                           4.19.13\r\nsix                           1.16.0\r\nskorch                        0.11.0\r\nsmart-open                    5.1.0\r\nsniffio                       1.2.0\r\nsnowballstemmer               2.2.0\r\nsortedcollections             2.1.0\r\nsortedcontainers              2.4.0\r\nsoupsieve                     2.3.1\r\nSphinx                        4.4.0\r\nsphinxcontrib-applehelp       1.0.2\r\nsphinxcontrib-devhelp         1.0.2\r\nsphinxcontrib-htmlhelp        2.0.0\r\nsphinxcontrib-jsmath          1.0.1\r\nsphinxcontrib-qthelp          1.0.3\r\nsphinxcontrib-serializinghtml 1.1.5\r\nspyder                        5.1.5\r\nspyder-kernels                2.1.3\r\nSQLAlchemy                    1.4.32\r\nstack-data                    0.2.0\r\nstatsmodels                   0.13.2\r\nsympy                         1.10.1\r\ntables                        3.6.1\r\ntabulate                      0.8.9\r\nTBB                           0.2\r\ntblib                         1.7.0\r\ntenacity                      8.0.1\r\nterminado                     0.13.1\r\ntestpath                      0.5.0\r\ntext-unidecode                1.3\r\ntextdistance                  4.2.1\r\nthreadpoolctl                 2.2.0\r\nthree-merge                   0.1.1\r\ntifffile                      2021.7.2\r\ntinycss                       0.4\r\ntldextract                    3.2.0\r\ntokenizers                    0.11.4\r\ntoml                          0.10.2\r\ntomli                         1.2.2\r\ntoolz                         0.11.2\r\ntorch                         1.8.0+cu101\r\ntorchvision                   0.9.0+cu101\r\ntornado                       6.1\r\ntqdm                          4.64.0\r\ntraitlets                     5.1.1\r\ntransformers                  4.24.0\r\nTwisted                       22.2.0\r\ntwisted-iocpsupport           1.0.2\r\ntyped-ast                     1.4.3\r\ntyping_extensions             4.1.1\r\nujson                         5.1.0\r\nUnidecode                     1.2.0\r\nurllib3                       1.26.9\r\nw3lib                         1.21.0\r\nwatchdog                      2.1.6\r\nwcwidth                       0.2.5\r\nwebencodings                  0.5.1\r\nwebsocket-client              0.58.0\r\nWerkzeug                      2.0.3\r\nwheel                         0.37.1\r\nwidgetsnbextension            3.5.2\r\nwin-inet-pton                 1.1.0\r\nwin-unicode-console           0.5\r\nwincertstore                  0.2\r\nwrapt                         1.12.1\r\nxarray                        0.20.1\r\nxlrd                          2.0.1\r\nXlsxWriter                    3.0.3\r\nxlwings                       0.24.9\r\nyapf                          0.31.0\r\nyarl                          1.6.3\r\nzict                          2.0.0\r\nzipp                          3.7.0\r\nzope.interface                5.4.0\r\n</details>", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/11552/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/11552/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/11548", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/11548/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/11548/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/11548/events", "html_url": "https://github.com/mne-tools/mne-python/issues/11548", "id": 1618882330, "node_id": "I_kwDOABPcUM5gfi8a", "number": 11548, "title": "Calling maxwell_filter on Yokogawa recordings (from Brainstorm)", "user": {"login": "ftadel", "id": 6920058, "node_id": "MDQ6VXNlcjY5MjAwNTg=", "avatar_url": "https://avatars.githubusercontent.com/u/6920058?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ftadel", "html_url": "https://github.com/ftadel", "followers_url": "https://api.github.com/users/ftadel/followers", "following_url": "https://api.github.com/users/ftadel/following{/other_user}", "gists_url": "https://api.github.com/users/ftadel/gists{/gist_id}", "starred_url": "https://api.github.com/users/ftadel/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ftadel/subscriptions", "organizations_url": "https://api.github.com/users/ftadel/orgs", "repos_url": "https://api.github.com/users/ftadel/repos", "events_url": "https://api.github.com/users/ftadel/events{/privacy}", "received_events_url": "https://api.github.com/users/ftadel/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/mne-tools/mne-python/milestones/25", "html_url": "https://github.com/mne-tools/mne-python/milestone/25", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/milestones/25/labels", "id": 8736885, "node_id": "MI_kwDOABPcUM4AhVB1", "number": 25, "title": "1.4", "description": "", "creator": {"login": "larsoner", "id": 2365790, "node_id": "MDQ6VXNlcjIzNjU3OTA=", "avatar_url": "https://avatars.githubusercontent.com/u/2365790?v=4", "gravatar_id": "", "url": "https://api.github.com/users/larsoner", "html_url": "https://github.com/larsoner", "followers_url": "https://api.github.com/users/larsoner/followers", "following_url": "https://api.github.com/users/larsoner/following{/other_user}", "gists_url": "https://api.github.com/users/larsoner/gists{/gist_id}", "starred_url": "https://api.github.com/users/larsoner/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/larsoner/subscriptions", "organizations_url": "https://api.github.com/users/larsoner/orgs", "repos_url": "https://api.github.com/users/larsoner/repos", "events_url": "https://api.github.com/users/larsoner/events{/privacy}", "received_events_url": "https://api.github.com/users/larsoner/received_events", "type": "User", "site_admin": false}, "open_issues": 8, "closed_issues": 35, "state": "open", "created_at": "2022-12-08T20:54:15Z", "updated_at": "2023-04-28T15:07:12Z", "due_on": "2023-05-01T07:00:00Z", "closed_at": null}, "comments": 7, "created_at": "2023-03-10T12:11:26Z", "updated_at": "2023-03-20T11:19:17Z", "closed_at": "2023-03-17T14:25:11Z", "author_association": "NONE", "active_lock_reason": null, "body": "### Description of the problem\r\n\r\nProblem initially posted on the Brainstorm and MNE-Python forums:\r\nhttps://neuroimage.usc.edu/forums/t/tsss-with-yokogawa-data/38833\r\nhttps://mne.discourse.group/t/calling-maxwell-filter-on-yokogawa-recordings-from-brainstorm/6452\r\n\r\nI could reproduce the error on my end with an example dataset provided by the user.\r\nI confirmed that the problem is not coming too obviously from Brainstorm in the creation of the RawArray object to be passed to maxwell_filter, as I can call other MNE methods on it.\r\n\r\n\r\n\r\n### Steps to reproduce\r\n\r\n```Python\r\nimport pickle \r\nimport mne\r\nfilehandler = open('pyRaw10s.pickle', 'rb') \r\nraw = pickle.load(filehandler)\r\nfilehandler.close()\r\nmne.preprocessing.maxwell_filter(raw, int_order=8, ext_order=3, origin='auto', coord_frame='head', regularize='in', ignore_ref=False, st_duration=10, st_correlation=0.98, st_fixed=True, st_only=False, mag_scale=100, skip_by_annotation=['edge','bad_acq_skip'])\r\n```\r\n\r\n\r\n### Link to data\r\n\r\nExample dataset to reproduce the error (zipped pickle - first 10s of the Yokogawa .con file shared by the user):\r\nhttps://www.dropbox.com/s/xd7o5m3fyyc5yc7/pyRaw10s.zip?dl=0\r\n\r\nTo get a link to download the original KIT recordings, please contact privately the owner of the dataset:\r\nhannah.voss@charite.de\r\n\r\n### Expected results\r\n\r\ntSSS-cleaned data\r\n\r\n### Actual results\r\n\r\n```\r\nMaxwell filtering raw data\r\n    No bad MEG channels\r\n    Processing 0 gradiometers and 128 magnetometers (of which 125 are actually KIT gradiometers)\r\n<stdin>:1: RuntimeWarning: Only 5 head digitization points of the specified kind (\"extra\",), fitting may be inaccurate\r\n<stdin>:1: RuntimeWarning: (X, Y) fit (-7.9, 42.7) more than 20 mm from head frame origin\r\n    Automatic origin fit: head of radius 73.8 mm\r\n    Using origin -7.9, 42.7, 5.3 mm in the head frame\r\n    Processing data using tSSS with st_duration=10.0\r\nTraceback (most recent call last):\r\n  File \"<stdin>\", line 1, in <module>\r\n  File \"<decorator-gen-457>\", line 12, in maxwell_filter\r\n  File \"C:\\Users\\franc\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\mne\\preprocessing\\maxwell.py\", line 353, in maxwell_filter\r\n    raw_sss = _run_maxwell_filter(raw, **params)\r\n  File \"C:\\Users\\franc\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\mne\\preprocessing\\maxwell.py\", line 555, in _run_maxwell_filter\r\n    _get_this_decomp_trans(info['dev_head_t'], t=0.)\r\n  File \"C:\\Users\\franc\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\mne\\preprocessing\\maxwell.py\", line 1012, in _get_decomp\r\n    S_decomp, reg_moments, n_use_in = _regularize(\r\n  File \"<decorator-gen-460>\", line 12, in _regularize\r\n  File \"C:\\Users\\franc\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\mne\\preprocessing\\maxwell.py\", line 1066, in _regularize\r\n    in_removes, out_removes = _regularize_in(\r\n  File \"C:\\Users\\franc\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\mne\\preprocessing\\maxwell.py\", line 1947, in _regularize_in\r\n    u, s, v = _safe_svd(this_S, full_matrices=False, **check_disable)\r\n  File \"C:\\Users\\franc\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\mne\\fixes.py\", line 84, in _safe_svd\r\n    return linalg.svd(A, **kwargs)\r\n  File \"C:\\Users\\franc\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\scipy\\linalg\\_decomp_svd.py\", line 133, in svd\r\n    raise ValueError('illegal value in %dth argument of internal gesdd'\r\nValueError: illegal value in 4th argument of internal gesdd\r\n```\r\n\r\n### Additional information\r\n\r\nPlatform:         Windows-10-10.0.22621-SP0\r\nPython:           3.10.10 (tags/v3.10.10:aad5f6a, Feb  7 2023, 17:20:36) [MSC v.1929 64 bit (AMD64)]\r\nExecutable:       C:\\Users\\franc\\AppData\\Local\\Programs\\Python\\Python310\\python.exe\r\nCPU:              Intel64 Family 6 Model 154 Stepping 4, GenuineIntel: 12 cores\r\nMemory:           15.4 GB\r\n\r\nmne:              1.3.1\r\nnumpy:            1.23.5 {OpenBLAS 0.3.20 with 12 threads}\r\nscipy:            1.10.1\r\nmatplotlib:       3.7.0 {backend=QtAgg}\r\n\r\nsklearn:          1.2.1\r\nnumba:            0.56.4\r\nnibabel:          5.0.1\r\nnilearn:          0.10.0\r\ndipy:             1.6.0\r\nopenmeeg:         Not found\r\ncupy:             Not found\r\npandas:           1.5.3\r\npyvista:          0.38.3 {OpenGL 4.5.0 - Build 31.0.101.3616 via Intel(R) Iris(R) Xe Graphics}\r\npyvistaqt:        0.9.1\r\nipyvtklink:       Not found\r\nvtk:              9.2.6\r\nqtpy:             2.3.0 {PyQt5=5.15.2}\r\nipympl:           Not found\r\npyqtgraph:        Not found\r\npooch:            v1.6.0\r\n\r\nmne_bids:         Not found\r\nmne_nirs:         Not found\r\nmne_features:     Not found\r\nmne_qt_browser:   Not found\r\nmne_connectivity: Not found\r\nmne_icalabel:     Not found", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/11548/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/11548/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/11523", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/11523/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/11523/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/11523/events", "html_url": "https://github.com/mne-tools/mne-python/issues/11523", "id": 1606798766, "node_id": "I_kwDOABPcUM5fxc2u", "number": 11523, "title": "Rank estimated from data saved to disk is incorrect if interpolated channels are present ", "user": {"login": "ezemikulan", "id": 39155887, "node_id": "MDQ6VXNlcjM5MTU1ODg3", "avatar_url": "https://avatars.githubusercontent.com/u/39155887?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ezemikulan", "html_url": "https://github.com/ezemikulan", "followers_url": "https://api.github.com/users/ezemikulan/followers", "following_url": "https://api.github.com/users/ezemikulan/following{/other_user}", "gists_url": "https://api.github.com/users/ezemikulan/gists{/gist_id}", "starred_url": "https://api.github.com/users/ezemikulan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ezemikulan/subscriptions", "organizations_url": "https://api.github.com/users/ezemikulan/orgs", "repos_url": "https://api.github.com/users/ezemikulan/repos", "events_url": "https://api.github.com/users/ezemikulan/events{/privacy}", "received_events_url": "https://api.github.com/users/ezemikulan/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 8, "created_at": "2023-03-02T13:20:32Z", "updated_at": "2023-03-07T15:45:34Z", "closed_at": "2023-03-07T08:57:45Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "### Description of the problem\n\nHi, I've noticed that If some channels have been interpolated and the data is saved to disk and then reloaded the estimated rank is not correct. Maybe it has to do with numerical precision when saving the data as in #7727?\r\n\r\nHere are the plots from the code pasted below:\r\n\r\nOriginal\r\n![cov_original](https://user-images.githubusercontent.com/39155887/222433109-5f96bc67-a8cb-447f-a47b-bedbffdf2a64.png)\r\n\r\nReloaded\r\n![cov_reloaded](https://user-images.githubusercontent.com/39155887/222433122-f1f2a860-1fd6-48a6-b784-19c7206f0c78.png)\r\n\r\n\r\n\n\n### Steps to reproduce\n\n```Python\nimport mne\r\ndata_path = mne.datasets.sample.data_path()\r\nraw_fname = data_path / 'MEG' / 'sample' / 'sample_audvis_raw.fif'\r\nraw = mne.io.read_raw_fif(raw_fname)\r\nevents = mne.find_events(raw)\r\nepo = mne.Epochs(raw, events)\r\nepo.load_data()\r\nepo.pick_types(eeg=True)\r\n\r\nepo.info['bads'] = ['EEG 056', 'EEG 057', 'EEG 058', 'EEG 059', 'EEG 060']\r\nepo.interpolate_bads()\r\n\r\nepo.set_eeg_reference('average', projection=True)\r\nepo.apply_proj()\r\n\r\ncov = mne.compute_covariance(epo, method='shrunk', tmin=-0.2,\r\n                             tmax=-0.05)\r\n\r\nfname_save = 'test-epo.fif'\r\nepo.save(fname_save, overwrite=True)\r\n\r\nepo_reload = mne.read_epochs(fname_save)\r\ncov_reload = mne.compute_covariance(epo_reload, method='shrunk', tmin=-0.2,\r\n                                    tmax=-0.05, )\r\ncov.plot(epo.info)\r\ncov_reload.plot(epo_reload.info)\n```\n\n\n### Link to data\n\n_No response_\n\n### Expected results\n\nI would expect the same estimated rank in both cases.\n\n### Actual results\n\nThe estimated ranks differ.\n\n### Additional information\n\nPlatform:         Linux-5.15.0-60-generic-x86_64-with-glibc2.35\r\nPython:           3.10.6 | packaged by conda-forge | (main, Aug 22 2022, 20:35:26) [GCC 10.4.0]\r\nExecutable:       /home/eze/soft/anaconda3/envs/mnepy/bin/python\r\nCPU:              x86_64: 8 cores\r\nMemory:           31.3 GB\r\nmne:              1.3.0\r\nnumpy:            1.23.3 {MKL 2021.4-Product with 4 threads}\r\nscipy:            1.9.3\r\nmatplotlib:       3.5.3 {backend=Qt5Agg}\r\nsklearn:          1.1.3\r\nnumba:            0.56.3\r\nnibabel:          4.0.2\r\nnilearn:          0.9.2\r\ndipy:             1.5.0\r\nopenmeeg:         Not found\r\ncupy:             Not found\r\npandas:           1.4.4\r\npyvista:          0.37.0 {OpenGL 4.5.0 NVIDIA 515.86.01 via NVIDIA GeForce GTX 1070/PCIe/SSE2}\r\npyvistaqt:        0.9.0\r\nipyvtklink:       0.2.2\r\nvtk:              9.2.2\r\nqtpy:             2.2.0 {PyQt5=5.15.6}\r\nipympl:           Not found\r\npyqtgraph:        0.12.3\r\npooch:            v1.6.0\r\nmne_bids:         0.12\r\nmne_nirs:         Not found\r\nmne_features:     Not found\r\nmne_qt_browser:   0.4.0\r\nmne_connectivity: Not found\r\nmne_icalabel:     Not found", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/11523/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/11523/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/11520", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/11520/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/11520/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/11520/events", "html_url": "https://github.com/mne-tools/mne-python/issues/11520", "id": 1606266651, "node_id": "I_kwDOABPcUM5fva8b", "number": 11520, "title": "raw.compute_psd().plot() output a blank figure with black background", "user": {"login": "impPie", "id": 116446314, "node_id": "U_kgDOBvDUag", "avatar_url": "https://avatars.githubusercontent.com/u/116446314?v=4", "gravatar_id": "", "url": "https://api.github.com/users/impPie", "html_url": "https://github.com/impPie", "followers_url": "https://api.github.com/users/impPie/followers", "following_url": "https://api.github.com/users/impPie/following{/other_user}", "gists_url": "https://api.github.com/users/impPie/gists{/gist_id}", "starred_url": "https://api.github.com/users/impPie/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/impPie/subscriptions", "organizations_url": "https://api.github.com/users/impPie/orgs", "repos_url": "https://api.github.com/users/impPie/repos", "events_url": "https://api.github.com/users/impPie/events{/privacy}", "received_events_url": "https://api.github.com/users/impPie/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2023-03-02T07:41:29Z", "updated_at": "2023-03-16T12:36:24Z", "closed_at": "2023-03-16T03:16:41Z", "author_association": "NONE", "active_lock_reason": null, "body": "### Description of the problem\n\nraw.compute_psd().plot() output a blank figure with black background in my win10 computer.\r\nBut when I ran the same codes in google colab, it shows the correct figure.\n\n### Steps to reproduce\n\n```Python\npsd=raw.compute_psd()\r\nprint(psd)\r\npsd.plot()\n```\n\n\n### Link to data\n\n_No response_\n\n### Expected results\n\n![image](https://user-images.githubusercontent.com/116446314/222362704-53d8c40c-115e-425e-ab40-e0ece7427ab8.png)\r\n\n\n### Actual results\n\n![ca172691-f925-4949-a51e-7f5e0eafd9f2](https://user-images.githubusercontent.com/116446314/222362784-cf4d6925-1e26-44c9-91ad-80befcbe4c0e.png)\r\n\n\n### Additional information\n\nwhen I use the raw.plot(). It can show a proper result", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/11520/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/11520/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/11515", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/11515/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/11515/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/11515/events", "html_url": "https://github.com/mne-tools/mne-python/issues/11515", "id": 1605217987, "node_id": "I_kwDOABPcUM5fra7D", "number": 11515, "title": "mne.io.read_raw cannot determine the correct reader when filename has multiple periods", "user": {"login": "JohnAtl", "id": 5720074, "node_id": "MDQ6VXNlcjU3MjAwNzQ=", "avatar_url": "https://avatars.githubusercontent.com/u/5720074?v=4", "gravatar_id": "", "url": "https://api.github.com/users/JohnAtl", "html_url": "https://github.com/JohnAtl", "followers_url": "https://api.github.com/users/JohnAtl/followers", "following_url": "https://api.github.com/users/JohnAtl/following{/other_user}", "gists_url": "https://api.github.com/users/JohnAtl/gists{/gist_id}", "starred_url": "https://api.github.com/users/JohnAtl/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/JohnAtl/subscriptions", "organizations_url": "https://api.github.com/users/JohnAtl/orgs", "repos_url": "https://api.github.com/users/JohnAtl/repos", "events_url": "https://api.github.com/users/JohnAtl/events{/privacy}", "received_events_url": "https://api.github.com/users/JohnAtl/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2023-03-01T15:47:48Z", "updated_at": "2023-03-08T17:52:56Z", "closed_at": "2023-03-08T17:52:56Z", "author_association": "NONE", "active_lock_reason": null, "body": "### Description of the problem\n\nA filename such as \"my_eeg.2023.test.edf\" will raise an error.\n\n### Steps to reproduce\n\n```Python\ntest = mne.ie.read_raw(\"my.file.name.edf\")\n```\n\n\n### Link to data\n\n_No response_\n\n### Expected results\n\nShould use the last extension and use the appropriate reader.\n\n### Actual results\n\n---------------------------------------------------------------------------\r\nValueError                                Traceback (most recent call last)\r\nCell In[2], line 6\r\n      3 file_to_process = \"../data/test_eegs/patient.name.24-05-2021 18.14.46.edf\"\r\n      4 # Run the classifier, passing the name of the bucket, and the name of the key (i.e. filename).\r\n      5 # Offsets are returned as a json string. The key is \"offsets\".\r\n----> 6 offsets = classify(file_to_process)\r\n      7 print(offsets)\r\n\r\nFile ~/Projects/company/project/src/classifier.py:66, in classify(filename)\r\n     62 model.summary()\r\n     64 file_to_process = filename\r\n---> 66 raw_eeg = mne.io.read_raw(file_to_process, preload=True, encoding=\"latin1\")\r\n     67 raw_eeg.resample(DESIRED_SAMPLE_FREQ, n_jobs=4)\r\n     68 filtered_eeg = raw_eeg.filter(l_freq=0.1, h_freq=10, picks=get_channels(raw_eeg))\r\n\r\nFile ~/Projects/company/project/src/mne/io/_read_raw.py:121, in read_raw(fname, preload, verbose, **kwargs)\r\n    119 kwargs[\"preload\"] = preload\r\n    120 if ext not in readers:\r\n--> 121     _read_unsupported(fname)\r\n    122 these_readers = list(readers[ext].values())\r\n    123 for reader in these_readers:\r\n\r\nFile ~/Projects/company/project/src/mne/io/_read_raw.py:41, in _read_unsupported(fname, **kwargs)\r\n     39     msg += f\" Try reading a {suggest} file instead.\"\r\n     40 msg += \" Consider using a dedicated reader function for more options.\"\r\n---> 41 raise ValueError(msg)\r\n\r\nValueError: Unsupported file type (.name.24-05-2021 18.14.46.edf). Consider using a dedicated reader function for more options.\n\n### Additional information\n\nPlatform:         Linux-5.10.0-21-amd64-x86_64-with-glibc2.31\r\nPython:           3.10.9 (main, Jan 11 2023, 15:21:40) [GCC 11.2.0]\r\nExecutable:       /home/john/anaconda3/envs/company/bin/python\r\nCPU:              : 8 cores\r\nMemory:           46.9 GB\r\n\r\nmne:              1.4.dev0\r\nnumpy:            1.24.2 {OpenBLAS 0.3.21 with 8 threads}\r\nscipy:            1.10.1\r\nmatplotlib:       3.7.0 {backend=Qt5Agg}\r\n\r\nsklearn:          1.2.1\r\nnumba:            Not found\r\nnibabel:          Not found\r\nnilearn:          Not found\r\ndipy:             Not found\r\nopenmeeg:         Not found\r\ncupy:             Not found\r\npandas:           1.5.3\r\npyvista:          Not found\r\npyvistaqt:        Not found\r\nipyvtklink:       Not found\r\nvtk:              Not found\r\nqtpy:             Not found\r\nipympl:           Not found\r\npyqtgraph:        Not found\r\npooch:            v1.6.0\r\n\r\nmne_bids:         Not found\r\nmne_nirs:         Not found\r\nmne_features:     Not found\r\nmne_qt_browser:   Not found\r\nmne_connectivity: Not found\r\nmne_icalabel:     Not found", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/11515/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/11515/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/11514", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/11514/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/11514/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/11514/events", "html_url": "https://github.com/mne-tools/mne-python/issues/11514", "id": 1604675068, "node_id": "I_kwDOABPcUM5fpWX8", "number": 11514, "title": "plot_topo_psd is impossible when epochs are concatenated", "user": {"login": "Farzaneh-Taleb", "id": 7354119, "node_id": "MDQ6VXNlcjczNTQxMTk=", "avatar_url": "https://avatars.githubusercontent.com/u/7354119?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Farzaneh-Taleb", "html_url": "https://github.com/Farzaneh-Taleb", "followers_url": "https://api.github.com/users/Farzaneh-Taleb/followers", "following_url": "https://api.github.com/users/Farzaneh-Taleb/following{/other_user}", "gists_url": "https://api.github.com/users/Farzaneh-Taleb/gists{/gist_id}", "starred_url": "https://api.github.com/users/Farzaneh-Taleb/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Farzaneh-Taleb/subscriptions", "organizations_url": "https://api.github.com/users/Farzaneh-Taleb/orgs", "repos_url": "https://api.github.com/users/Farzaneh-Taleb/repos", "events_url": "https://api.github.com/users/Farzaneh-Taleb/events{/privacy}", "received_events_url": "https://api.github.com/users/Farzaneh-Taleb/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2023-03-01T10:15:44Z", "updated_at": "2023-03-01T11:39:06Z", "closed_at": "2023-03-01T11:39:06Z", "author_association": "NONE", "active_lock_reason": null, "body": "### Description of the problem\n\nSince the output of concatenate_epochs is an instance of BaseEpochs, it is impossible to apply plot_psd_topomap directly on that.\n\n### Steps to reproduce\n\n```Python\n.\n```\n\n\n### Link to data\n\n_No response_\n\n### Expected results\n\n.\n\n### Actual results\n\n.\n\n### Additional information\n\n.", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/11514/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/11514/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/11513", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/11513/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/11513/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/11513/events", "html_url": "https://github.com/mne-tools/mne-python/issues/11513", "id": 1603891734, "node_id": "I_kwDOABPcUM5fmXIW", "number": 11513, "title": "plot_topomap produces spurious output in jupyter", "user": {"login": "sam-s", "id": 1596894, "node_id": "MDQ6VXNlcjE1OTY4OTQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1596894?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sam-s", "html_url": "https://github.com/sam-s", "followers_url": "https://api.github.com/users/sam-s/followers", "following_url": "https://api.github.com/users/sam-s/following{/other_user}", "gists_url": "https://api.github.com/users/sam-s/gists{/gist_id}", "starred_url": "https://api.github.com/users/sam-s/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sam-s/subscriptions", "organizations_url": "https://api.github.com/users/sam-s/orgs", "repos_url": "https://api.github.com/users/sam-s/repos", "events_url": "https://api.github.com/users/sam-s/events{/privacy}", "received_events_url": "https://api.github.com/users/sam-s/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2023-02-28T22:11:27Z", "updated_at": "2023-03-03T14:43:39Z", "closed_at": "2023-03-01T16:31:08Z", "author_association": "NONE", "active_lock_reason": null, "body": "### Description of the problem\r\n\r\nThe following code:\r\n```python\r\nfig = plt.figure(figsize=(10,2))\r\naxes = fig.subplots(ncols=len(bdf.columns))\r\nfor ax, band in zip(axes, bdf.columns):\r\n    x = mne.viz.plot_topomap(data=bdf[band], pos=info, axes=ax)\r\n    # print(type(x))\r\n    bot,top = hg.band_range(band)\r\n    ax.set_title(f\"{band}\\n({bot}--{top} Hz)\")\r\n```\r\nproduces 5 spurious \"outputs\" in Jupyter (one for each band):\r\n![image](https://user-images.githubusercontent.com/1596894/221990296-cfb0e75c-8859-41cb-bb7e-e04d7b6e35df.png)\r\n\r\n\r\n### Steps to reproduce\r\n\r\n```Python\r\nfig = plt.figure(figsize=(4,2))\r\ndf = pd.DataFrame({\"delta\":[0.1, 0.2, 0.4], \"gamma\":[0.3, 0.6, 0.2]},\r\n                  index=[\"C4\",\"P4\",\"O1\"])\r\ninfo = mne.create_info(ch_names=list(df.index), sfreq=500, ch_types=\"eeg\")\r\ninfo.set_montage(\"standard_1020\")\r\naxes = fig.subplots(ncols=len(df.columns))\r\nfor ax, band in zip(axes, df.columns):\r\n    x = mne.viz.plot_topomap(data=df[band], pos=info, axes=ax)\r\n    ax.set_title(band)\r\n```\r\n\r\n### Expected results\r\n\r\nno output \r\n\r\n### Actual results\r\n\r\n2 \"lines\" (1 image, 1 text)\r\n![image](https://user-images.githubusercontent.com/1596894/221993012-a4cbd9e2-1c45-4c38-9ebb-c403205fd4d8.png)\r\n\r\n\r\n### Additional information\r\n```\r\nPlatform:         Linux-6.0.12-76060006-generic-x86_64-with-glibc2.35\r\nPython:           3.10.6 (main, Nov 14 2022, 16:10:14) [GCC 11.3.0]\r\nExecutable:       /usr/bin/python3\r\nCPU:              x86_64: 8 cores\r\nMemory:           15.3 GB\r\n\r\nmne:              1.3.0\r\nnumpy:            1.24.2 {OpenBLAS 0.3.21 with 8 threads}\r\nscipy:            1.10.1\r\nmatplotlib:       3.7.0 {backend=module://matplotlib_inline.backend_inline}\r\n\r\nsklearn:          1.2.1\r\nnumba:            Not found\r\nnibabel:          Not found\r\nnilearn:          Not found\r\ndipy:             Not found\r\nopenmeeg:         Not found\r\ncupy:             Not found\r\npandas:           1.5.3\r\npyvista:          Not found\r\npyvistaqt:        Not found\r\nipyvtklink:       Not found\r\nvtk:              Not found\r\nqtpy:             2.3.0 {PyQt5=5.15.3}\r\nipympl:           Not found\r\npyqtgraph:        Not found\r\npooch:            v1.6.0\r\n\r\nmne_bids:         Not found\r\nmne_nirs:         Not found\r\nmne_features:     Not found\r\nmne_qt_browser:   Not found\r\nmne_connectivity: 0.5.0\r\nmne_icalabel:     Not found\r\n```", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/11513/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/11513/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/11504", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/11504/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/11504/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/11504/events", "html_url": "https://github.com/mne-tools/mne-python/issues/11504", "id": 1597534425, "node_id": "I_kwDOABPcUM5fOHDZ", "number": 11504, "title": "Some times right click do not erase the annotations.", "user": {"login": "datsu28", "id": 125303091, "node_id": "U_kgDOB3f5Mw", "avatar_url": "https://avatars.githubusercontent.com/u/125303091?v=4", "gravatar_id": "", "url": "https://api.github.com/users/datsu28", "html_url": "https://github.com/datsu28", "followers_url": "https://api.github.com/users/datsu28/followers", "following_url": "https://api.github.com/users/datsu28/following{/other_user}", "gists_url": "https://api.github.com/users/datsu28/gists{/gist_id}", "starred_url": "https://api.github.com/users/datsu28/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/datsu28/subscriptions", "organizations_url": "https://api.github.com/users/datsu28/orgs", "repos_url": "https://api.github.com/users/datsu28/repos", "events_url": "https://api.github.com/users/datsu28/events{/privacy}", "received_events_url": "https://api.github.com/users/datsu28/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2023-02-23T21:10:56Z", "updated_at": "2023-02-24T07:38:02Z", "closed_at": "2023-02-24T07:38:01Z", "author_association": "NONE", "active_lock_reason": null, "body": "### Description of the problem\n\nI have a question regarding deleting interactive annotation during \"raw.plot()\".\r\nWhen you try to delete the annotation,  a thin line remains...(orange annotation in this case)\r\nI though it would be helpful if I can delete it easily using right click.\r\n\r\n\n\n### Steps to reproduce\n\n```Python\nmatplotlib.use('Qt5Agg')\r\nfig=raw.plot(start=2,duration=15, highpass=.5, lowpass=40)\r\nfig.fake_keypress(\"a\")\r\n\r\nopen the eeg using this code and annotate some data and try to erase it.\n```\n\n\n### Link to data\n\n_No response_\n\n### Expected results\n\nthe annotations are deleted(orange line disappears)\n\n### Actual results\n\n\r\n![Capture](https://user-images.githubusercontent.com/125303091/221031020-61132493-ed63-49ba-9827-9fb0f2918fe8.PNG)\r\n\n\n### Additional information\n\nPlatform:         Windows-10-10.0.19045-SP0\r\nPython:           3.9.13 (main, Aug 25 2022, 23:51:50) [MSC v.1916 64 bit (AMD64)]\r\nExecutable:       [c:\\Users\\ADaida\\Anaconda3\\python.exe](file:///C:/Users/ADaida/Anaconda3/python.exe)\r\nCPU:              Intel64 Family 6 Model 165 Stepping 5, GenuineIntel: 20 cores\r\nMemory:           63.7 GB\r\n\r\nmne:              1.3.0\r\nnumpy:            1.21.6 {OpenBLAS 0.3.17 with 20 threads}\r\nscipy:            1.9.1\r\nmatplotlib:       3.5.2 {backend=Qt5Agg}\r\n\r\nsklearn:          1.0.2\r\nnumba:            0.55.1\r\nnibabel:          Not found\r\nnilearn:          Not found\r\ndipy:             Not found\r\nopenmeeg:         Not found\r\ncupy:             Not found\r\npandas:           1.4.4\r\npyvista:          Not found\r\npyvistaqt:        Not found\r\nipyvtklink:       Not found\r\nvtk:              Not found\r\nqtpy:             2.2.0 {PyQt5=5.9.7}\r\nipympl:           Not found\r\npyqtgraph:        Not found\r\npooch:            [c:\\Users\\ADaida\\Anaconda3\\lib\\site-packages\\paramiko\\transport.py:219](file:///C:/Users/ADaida/Anaconda3/lib/site-packages/paramiko/transport.py:219): CryptographyDeprecationWarning: Blowfish has been deprecated\r\n  \"class\": algorithms.Blowfish,\r\nv1.6.0\r\n\r\nmne_bids:         Not found\r\nmne_nirs:         Not found\r\nmne_features:     Not found\r\nmne_qt_browser:   Not found\r\nmne_connectivity: 0.5.0\r\nmne_icalabel:     Not found", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/11504/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/11504/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/11501", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/11501/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/11501/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/11501/events", "html_url": "https://github.com/mne-tools/mne-python/issues/11501", "id": 1596426112, "node_id": "I_kwDOABPcUM5fJ4eA", "number": 11501, "title": "The order of raw1.info[\"bads\"] should not matter when concatenating with raw0.info[\"bads\"]", "user": {"login": "moritz-gerster", "id": 45031224, "node_id": "MDQ6VXNlcjQ1MDMxMjI0", "avatar_url": "https://avatars.githubusercontent.com/u/45031224?v=4", "gravatar_id": "", "url": "https://api.github.com/users/moritz-gerster", "html_url": "https://github.com/moritz-gerster", "followers_url": "https://api.github.com/users/moritz-gerster/followers", "following_url": "https://api.github.com/users/moritz-gerster/following{/other_user}", "gists_url": "https://api.github.com/users/moritz-gerster/gists{/gist_id}", "starred_url": "https://api.github.com/users/moritz-gerster/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/moritz-gerster/subscriptions", "organizations_url": "https://api.github.com/users/moritz-gerster/orgs", "repos_url": "https://api.github.com/users/moritz-gerster/repos", "events_url": "https://api.github.com/users/moritz-gerster/events{/privacy}", "received_events_url": "https://api.github.com/users/moritz-gerster/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-02-23T08:28:59Z", "updated_at": "2023-03-19T17:22:01Z", "closed_at": "2023-03-19T17:22:01Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "### Description of the problem\n\nI have a list of `raws` and combine them using `raw_concat = concatenate_raws(raws)`. However, I got the following error:\r\n\r\n```Python\r\nException has occurred: ValueError       (note: full exception trace is shown but execution is paused at: _run_module_as_main)\r\nraw[1].info[bads] must match:\r\n['LFP_R_4_STN_BS_RSTN', 'LFP_R_4_STN_BS'] != ['LFP_R_4_STN_BS', 'LFP_R_4_STN_BS_RSTN']\r\n  File \"/Users/moritzgerster/Library/CloudStorage/Dropbox/Code/BIDS_Neumann_ECoG_LFP/scripts/utils.py\", line 482, in _combine_raws\r\n    raw_concat = concatenate_raws(raws)\r\n                 ^^^^^^^^^^^^^^^^^^^^^^\r\n  File \"<decorator-gen-238>\", line 12, in concatenate_raws\r\n  File \"/Users/moritzgerster/anaconda3/envs/bids_neu/lib/python3.11/site-packages/mne/io/base.py\", line 2542, in concatenate_raws\r\n    _ensure_infos_match(info1=raws[0].info, info2=raw.info,\r\n  File \"/Users/moritzgerster/anaconda3/envs/bids_neu/lib/python3.11/site-packages/mne/io/meas_info.py\", line 2884, in _ensure_infos_match\r\n    raise ValueError(f'{name}.info[\\'nchan\\'] must match')\r\nValueError: raws[1].info['nchan'] must match\r\n\r\nDuring handling of the above exception, another exception occurred:\r\n\r\n  File \"/Users/moritzgerster/anaconda3/envs/bids_neu/lib/python3.11/site-packages/mne/io/base.py\", line 2495, in _check_raw_compatibility\r\n    raise ValueError(\r\n  File \"/Users/moritzgerster/anaconda3/envs/bids_neu/lib/python3.11/site-packages/mne/io/base.py\", line 1641, in append\r\n    _check_raw_compatibility(all_raws)\r\n  File \"/Users/moritzgerster/anaconda3/envs/bids_neu/lib/python3.11/site-packages/mne/io/base.py\", line 2551, in concatenate_raws\r\n    raws[0].append(raws[1:], preload)\r\n  File \"<decorator-gen-238>\", line 12, in concatenate_raws\r\n  File \"/Users/moritzgerster/Library/CloudStorage/Dropbox/Code/BIDS_Neumann_ECoG_LFP/scripts/utils.py\", line 492, in _combine_raws\r\n    raw_concat = concatenate_raws(raws)\r\n                 ^^^^^^^^^^^^^^^^^^^^^^\r\n  File \"/Users/moritzgerster/Library/CloudStorage/Dropbox/Code/BIDS_Neumann_ECoG_LFP/scripts/_02_fooof_slopes.py\", line 59, in get_fitted_spectra\r\n    raw_concat = _combine_raws(bids_paths, save_path=bids_path)\r\n                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\r\n  File \"/Users/moritzgerster/Library/CloudStorage/Dropbox/Code/BIDS_Neumann_ECoG_LFP/scripts/_02_fooof_slopes.py\", line 36, in psd_fooof_to_dataframe\r\n    dics = get_fitted_spectra(paths_to_sub_in_cond)\r\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\r\n  File \"/Users/moritzgerster/Library/CloudStorage/Dropbox/Code/BIDS_Neumann_ECoG_LFP/scripts/main.py\", line 28, in <module>\r\n    psd_fooof_to_dataframe()\r\n  File \"/Users/moritzgerster/anaconda3/envs/bids_neu/lib/python3.11/runpy.py\", line 88, in _run_code\r\n    exec(code, run_globals)\r\n  File \"/Users/moritzgerster/anaconda3/envs/bids_neu/lib/python3.11/runpy.py\", line 198, in _run_module_as_main (Current frame)\r\n    return _run_code(code, main_globals, None,\r\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\r\nValueError: raw[1].info[bads] must match:\r\n['LFP_R_4_STN_BS_RSTN', 'LFP_R_4_STN_BS'] != ['LFP_R_4_STN_BS', 'LFP_R_4_STN_BS_RSTN']\r\n```\r\n\r\nAs you can see the bad channels \r\n`['LFP_R_4_STN_BS_RSTN', 'LFP_R_4_STN_BS'] != ['LFP_R_4_STN_BS', 'LFP_R_4_STN_BS_RSTN']`\r\nare identical in both cases, only their order is wrong.\r\n\r\n\r\nhttps://github.com/mne-tools/mne-python/blob/603a96da58ddba3c2c05d3a01639abd669cc9543/mne/io/base.py#L2506-L2513\r\n\r\nThe above lines of code should be replaced with:\r\n\r\n```Python\r\n        for key in ('nchan', 'sfreq'):\r\n            a, b = raw[ri].info[key], raw[0].info[key]\r\n            if a != b:\r\n                raise ValueError(\r\n                    f'raw[{ri}].info[{key}] must match:\\n'\r\n                    f'{repr(a)} != {repr(b)}')\r\n        if not set(raw[ri].info['bads']) == set(raw[0].info['bads']):\r\n            raise ValueError('raw[%d][\\'info\\'][\\'bads\\'] must match' % ri)\r\n        if not set(raw[ri].info['ch_names']) == set(raw[0].info['ch_names']):\r\n            raise ValueError('raw[%d][\\'info\\'][\\'ch_names\\'] must match' % ri)\r\n```\r\n\n\n### Steps to reproduce\n\n```Python\nimport mne\r\nfrom mne import create_info\r\nfrom mne.io import RawArray\r\nfrom numpy.random import default_rng\r\n\r\ndef create_toy_data(n_channels=3, sfreq=250, seed=None):\r\n    rng = default_rng(seed)\r\n    data = rng.standard_normal(size=(n_channels, 50 * sfreq)) * 5e-6\r\n    info = create_info(n_channels, sfreq, \"eeg\")\r\n    return RawArray(data, info)\r\n\r\nraw0 = create_toy_data()\r\nraw1 = create_toy_data()\r\n\r\nraw0.info[\"bads\"] = [\"0\", \"1\"]\r\nraw1.info[\"bads\"] = [\"1\", \"0\"]\r\n\r\nraw_concat = mne.concatenate_raws([raw0, raw1])\n```\n\n\n### Link to data\n\n_No response_\n\n### Expected results\n\nConcatenation should work.\n\n### Actual results\n\nValueError.\n\n### Additional information\n\n```Python\r\nPlatform:         macOS-13.2.1-arm64-arm-64bit\r\nPython:           3.11.0 | packaged by conda-forge | (main, Jan 14 2023, 12:26:40) [Clang 14.0.6 ]\r\nExecutable:       /Users/moritzgerster/anaconda3/envs/bids_neu/bin/python\r\nCPU:              arm: 10 cores\r\nMemory:           16.0 GB\r\n\r\nmne:              1.3.0\r\nnumpy:            1.23.4 {OpenBLAS 0.3.21 with 10 threads}\r\nscipy:            1.9.3\r\nmatplotlib:       3.6.2 {backend=MacOSX}\r\n\r\nsklearn:          1.1.3\r\nnumba:            Not found\r\nnibabel:          5.0.1\r\nnilearn:          Not found\r\ndipy:             Not found\r\nopenmeeg:         Not found\r\ncupy:             Not found\r\npandas:           1.5.1\r\npyvista:          Not found\r\npyvistaqt:        Not found\r\nipyvtklink:       Not found\r\nvtk:              Not found\r\nqtpy:             Not found\r\nipympl:           Not found\r\npyqtgraph:        Not found\r\npooch:            v1.6.0\r\n\r\nmne_bids:         0.12\r\nmne_nirs:         Not found\r\nmne_features:     Not found\r\nmne_qt_browser:   Not found\r\nmne_connectivity: Not found\r\nmne_icalabel:     Not found\r\n```", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/11501/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/11501/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/11492", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/11492/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/11492/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/11492/events", "html_url": "https://github.com/mne-tools/mne-python/issues/11492", "id": 1589126906, "node_id": "I_kwDOABPcUM5euCb6", "number": 11492, "title": "Matplotlib 3.7 breaks annotations window", "user": {"login": "cbrnr", "id": 4377312, "node_id": "MDQ6VXNlcjQzNzczMTI=", "avatar_url": "https://avatars.githubusercontent.com/u/4377312?v=4", "gravatar_id": "", "url": "https://api.github.com/users/cbrnr", "html_url": "https://github.com/cbrnr", "followers_url": "https://api.github.com/users/cbrnr/followers", "following_url": "https://api.github.com/users/cbrnr/following{/other_user}", "gists_url": "https://api.github.com/users/cbrnr/gists{/gist_id}", "starred_url": "https://api.github.com/users/cbrnr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/cbrnr/subscriptions", "organizations_url": "https://api.github.com/users/cbrnr/orgs", "repos_url": "https://api.github.com/users/cbrnr/repos", "events_url": "https://api.github.com/users/cbrnr/events{/privacy}", "received_events_url": "https://api.github.com/users/cbrnr/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}, {"id": 1290799321, "node_id": "MDU6TGFiZWwxMjkwNzk5MzIx", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/VIZ", "name": "VIZ", "color": "22e861", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2023-02-17T10:28:45Z", "updated_at": "2023-02-17T20:34:06Z", "closed_at": "2023-02-17T20:34:06Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "### Description of the problem\r\n\r\nMatplotlib 3.7 breaks the annotation window in `raw.plot()` (which appears when pressing <kbd>a</kbd>).\r\n\r\n### Steps to reproduce\r\n\r\n1. Run `raw.plot()`\r\n2. Press <kbd>a</kbd>\r\n\r\n### Expected results\r\n\r\nThe annotation window should appear.\r\n\r\n### Actual results\r\n\r\nThe annotation window does not appear. Instead, I get the following error:\r\n\r\n```\r\n>>> Traceback (most recent call last):\r\n  File \"/Users/clemens/Projects/mne-python/.direnv/python-3.10.10/lib/python3.10/site-packages/matplotlib/cbook/__init__.py\", line 304, in process\r\n    func(*args, **kwargs)\r\n  File \"/Users/clemens/Projects/mne-python/mne/viz/_mpl_figure.py\", line 676, in _keypress\r\n    self._toggle_annotation_fig()\r\n  File \"/Users/clemens/Projects/mne-python/mne/viz/_mpl_figure.py\", line 1113, in _toggle_annotation_fig\r\n    self._create_annotation_fig()\r\n  File \"/Users/clemens/Projects/mne-python/mne/viz/_mpl_figure.py\", line 936, in _create_annotation_fig\r\n    self._update_annotation_fig()\r\n  File \"/Users/clemens/Projects/mne-python/mne/viz/_mpl_figure.py\", line 1046, in _update_annotation_fig\r\n    ax.buttons = RadioButtons(ax, labels)\r\n  File \"/Users/clemens/Projects/mne-python/.direnv/python-3.10.10/lib/python3.10/site-packages/matplotlib/widgets.py\", line 1670, in __init__\r\n    self.value_selected = labels[active]\r\nIndexError: list index out of range\r\n```\r\n\r\n### Additional information\r\n\r\n<details>\r\n\r\n```\r\nPlatform:         macOS-11.7.4-x86_64-i386-64bit\r\nPython:           3.10.10 (main, Feb  8 2023, 05:44:44) [Clang 13.0.0 (clang-1300.0.29.30)]\r\nExecutable:       /Users/clemens/Projects/mne-python/.direnv/python-3.10.10/bin/python\r\nCPU:              i386: 8 cores\r\nMemory:           Unavailable (requires \"psutil\" package)\r\nmne:              1.4.dev0\r\nnumpy:            1.24.2 {OpenBLAS 0.3.21 with 4 threads}\r\nscipy:            1.10.0\r\nmatplotlib:       3.7.0 {backend=MacOSX}\r\n\r\nsklearn:          1.2.1\r\nnumba:            Not found\r\nnibabel:          Not found\r\nnilearn:          Not found\r\ndipy:             Not found\r\nopenmeeg:         Not found\r\ncupy:             Not found\r\npandas:           Not found\r\npyvista:          Not found\r\npyvistaqt:        Not found\r\nipyvtklink:       Not found\r\nvtk:              Not found\r\nqtpy:             Not found\r\nipympl:           Not found\r\npyqtgraph:        Not found\r\npooch:            v1.6.0\r\n\r\nmne_bids:         Not found\r\nmne_nirs:         Not found\r\nmne_features:     Not found\r\nmne_qt_browser:   Not found\r\nmne_connectivity: Not found\r\nmne_icalabel:     Not found\r\n```\r\n</details>", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/11492/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/11492/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/11487", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/11487/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/11487/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/11487/events", "html_url": "https://github.com/mne-tools/mne-python/issues/11487", "id": 1587806902, "node_id": "I_kwDOABPcUM5epAK2", "number": 11487, "title": "Deleting annotation in `raw.plot()` does not work", "user": {"login": "cbrnr", "id": 4377312, "node_id": "MDQ6VXNlcjQzNzczMTI=", "avatar_url": "https://avatars.githubusercontent.com/u/4377312?v=4", "gravatar_id": "", "url": "https://api.github.com/users/cbrnr", "html_url": "https://github.com/cbrnr", "followers_url": "https://api.github.com/users/cbrnr/followers", "following_url": "https://api.github.com/users/cbrnr/following{/other_user}", "gists_url": "https://api.github.com/users/cbrnr/gists{/gist_id}", "starred_url": "https://api.github.com/users/cbrnr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/cbrnr/subscriptions", "organizations_url": "https://api.github.com/users/cbrnr/orgs", "repos_url": "https://api.github.com/users/cbrnr/repos", "events_url": "https://api.github.com/users/cbrnr/events{/privacy}", "received_events_url": "https://api.github.com/users/cbrnr/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}, {"id": 1290799321, "node_id": "MDU6TGFiZWwxMjkwNzk5MzIx", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/VIZ", "name": "VIZ", "color": "22e861", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2023-02-16T14:45:47Z", "updated_at": "2023-02-17T21:18:01Z", "closed_at": "2023-02-17T21:18:01Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "### Description of the problem\r\n\r\nWhen deleting an annotation in `raw.plot()` with a right-click, a residual annotation (with duration around zero) remains right where the mouse was clicked.\r\n\r\n### Steps to reproduce\r\n\r\n```Python\r\nimport mne\r\n\r\nfolder = mne.datasets.sample.data_path()\r\nfile = folder / \"MEG\" / \"sample\" / \"sample_audvis_raw.fif\"\r\nraw = mne.io.read_raw_fif(file)\r\n\r\nraw.plot()\r\n```\r\n\r\n### Expected results\r\n\r\nThe annotation should be completely removed.\r\n\r\n### Actual results\r\n\r\nA very short annotation remains.\r\n\r\nhttps://user-images.githubusercontent.com/4377312/219396442-29041e00-f56d-48e7-87c1-41a90fb98c5a.mov\r\n\r\nI also get this error message in the console, not sure if it is related (seems likely though):\r\n\r\n```\r\nTraceback (most recent call last):\r\n  File \"/Users/clemens/Projects/mne-python/.direnv/python-3.10.10/lib/python3.10/site-packages/matplotlib/cbook/__init__.py\", line 307, in process\r\n    func(*args, **kwargs)\r\n  File \"/Users/clemens/Projects/mne-python/mne/viz/_mpl_figure.py\", line 187, in _close\r\n    super()._close(event)\r\n  File \"/Users/clemens/Projects/mne-python/mne/viz/_mpl_figure.py\", line 111, in _close\r\n    self.mne.parent_fig.mne.child_figs.remove(self)\r\nValueError: list.remove(x): x not in list\r\n```\r\n\r\n### Additional information\r\n\r\n<details>\r\n\r\n```\r\nPlatform:         macOS-11.7.4-x86_64-i386-64bit\r\nPython:           3.10.10 (main, Feb  8 2023, 05:44:44) [Clang 13.0.0 (clang-1300.0.29.30)]\r\nExecutable:       /Users/clemens/Projects/mne-python/.direnv/python-3.10.10/bin/python\r\nCPU:              i386: 8 cores\r\nMemory:           Unavailable (requires \"psutil\" package)\r\nmne:              1.4.dev0\r\nnumpy:            1.24.2 {OpenBLAS 0.3.21 with 4 threads}\r\nscipy:            1.10.0\r\nmatplotlib:       3.6.3 {backend=MacOSX}\r\nsklearn:          1.2.1\r\nnumba:            Not found\r\nnibabel:          Not found\r\nnilearn:          Not found\r\ndipy:             Not found\r\nopenmeeg:         Not found\r\ncupy:             Not found\r\npandas:           Not found\r\npyvista:          Not found\r\npyvistaqt:        Not found\r\nipyvtklink:       Not found\r\nvtk:              Not found\r\nqtpy:             Not found\r\nipympl:           Not found\r\npyqtgraph:        Not found\r\npooch:            v1.6.0\r\nmne_bids:         Not found\r\nmne_nirs:         Not found\r\nmne_features:     Not found\r\nmne_qt_browser:   Not found\r\nmne_connectivity: Not found\r\nmne_icalabel:     Not found\r\n```\r\n</details>", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/11487/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/11487/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/11448", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/11448/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/11448/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/11448/events", "html_url": "https://github.com/mne-tools/mne-python/issues/11448", "id": 1570179621, "node_id": "I_kwDOABPcUM5dlwol", "number": 11448, "title": "`mne` depends on `setuptools` without declaring it as a dependecy, which can break build backends other than `setuptools`", "user": {"login": "aplzr", "id": 7202498, "node_id": "MDQ6VXNlcjcyMDI0OTg=", "avatar_url": "https://avatars.githubusercontent.com/u/7202498?v=4", "gravatar_id": "", "url": "https://api.github.com/users/aplzr", "html_url": "https://github.com/aplzr", "followers_url": "https://api.github.com/users/aplzr/followers", "following_url": "https://api.github.com/users/aplzr/following{/other_user}", "gists_url": "https://api.github.com/users/aplzr/gists{/gist_id}", "starred_url": "https://api.github.com/users/aplzr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/aplzr/subscriptions", "organizations_url": "https://api.github.com/users/aplzr/orgs", "repos_url": "https://api.github.com/users/aplzr/repos", "events_url": "https://api.github.com/users/aplzr/events{/privacy}", "received_events_url": "https://api.github.com/users/aplzr/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 7, "created_at": "2023-02-03T17:15:17Z", "updated_at": "2023-02-09T23:16:48Z", "closed_at": "2023-02-09T23:16:48Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "### Description of the problem\r\n\r\nWithout declaring `setuptools` as a dependency, `mne` imports `pkg_resources`, which is a part of `setuptools`, in at least one place:\r\n\r\n```\r\nFile \"/tmp/pip-build-env-t3o1ln7x/normal/lib/python3.9/site-packages/mne/datasets/eegbci/eegbci.py\", line 8, in <module>\r\n          import pkg_resources\r\n```\r\n\r\nIn my case this leads to the following problem: I have written a package that depends on `mne` and that I package with `flit`, i.e. my package is fully independent of `setuptools`. When I try to install my package (with the `flit_core` build backend instead of `setuptools`) I get the following error:\r\n\r\n```\r\npip install .[test]\r\nProcessing /home/pzr\r\n  Installing build dependencies ... done\r\n  Getting requirements to build wheel ... done\r\n  Installing backend dependencies ... done\r\n  Preparing metadata (pyproject.toml) ... error\r\n  error: subprocess-exited-with-error\r\n\r\n  \u00d7 Preparing metadata (pyproject.toml) did not run successfully.\r\n  \u2502 exit code: 1\r\n  \u2570\u2500> [38 lines of output]\r\n      Unexpected names under [project]: requires_python\r\n      [pyhelpers] SSL verification check: SSL verification failed.\r\n      [pyhelpers] Adding FhG certificate bundle to the certificate store.\r\n      [pyhelpers] Checking again: SSL verification works, continuing.\r\n      Traceback (most recent call last):\r\n        File \"/usr/local/lib/python3.9/site-packages/pip/_vendor/pep517/in_process/_in_process.py\", line 363, in <module>\r\n          main()\r\n        File \"/usr/local/lib/python3.9/site-packages/pip/_vendor/pep517/in_process/_in_process.py\", line 345, in main\r\n          json_out['return_val'] = hook(**hook_input['kwargs'])\r\n        File \"/usr/local/lib/python3.9/site-packages/pip/_vendor/pep517/in_process/_in_process.py\", line 164, in prepare_metadata_for_build_wheel\r\n          return hook(metadata_directory, config_settings)\r\n        File \"/tmp/pip-build-env-t3o1ln7x/overlay/lib/python3.9/site-packages/flit_core/buildapi.py\", line 49, in prepare_metadata_for_build_wheel\r\n          metadata = make_metadata(module, ini_info)\r\n        File \"/tmp/pip-build-env-t3o1ln7x/overlay/lib/python3.9/site-packages/flit_core/common.py\", line 410, in make_metadata\r\n          md_dict.update(get_info_from_module(module, ini_info.dynamic_metadata))\r\n        File \"/tmp/pip-build-env-t3o1ln7x/overlay/lib/python3.9/site-packages/flit_core/common.py\", line 207, in get_info_from_module\r\n          docstring, version = get_docstring_and_version_via_import(target)\r\n        File \"/tmp/pip-build-env-t3o1ln7x/overlay/lib/python3.9/site-packages/flit_core/common.py\", line 180, in get_docstring_and_version_via_import\r\n          spec.loader.exec_module(m)\r\n        File \"<frozen importlib._bootstrap_external>\", line 850, in exec_module\r\n        File \"<frozen importlib._bootstrap>\", line 228, in _call_with_frames_removed\r\n        File \"/home/pzr/src/pyhelpers/__init__.py\", line 3, in <module>\r\n          from . import constants, fileio, neuro, plotting, sigproc, string\r\n        File \"/home/pzr/src/pyhelpers/sigproc/__init__.py\", line 1, in <module>\r\n          from . import eeg\r\n        File \"/home/pzr/src/pyhelpers/sigproc/eeg/__init__.py\", line 1, in <module>\r\n          from ._eeg import (create_eeg_raw_array, drop_channels, filter_eeg,\r\n        File \"/home/pzr/src/pyhelpers/sigproc/eeg/_eeg.py\", line 4, in <module>\r\n          from mne import create_info\r\n        File \"/tmp/pip-build-env-t3o1ln7x/normal/lib/python3.9/site-packages/mne/__init__.py\", line 111, in <module>\r\n          from . import datasets\r\n        File \"/tmp/pip-build-env-t3o1ln7x/normal/lib/python3.9/site-packages/mne/datasets/__init__.py\", line 10, in <module>\r\n          from . import eegbci\r\n        File \"/tmp/pip-build-env-t3o1ln7x/normal/lib/python3.9/site-packages/mne/datasets/eegbci/__init__.py\", line 3, in <module>\r\n          from .eegbci import data_path, load_data, standardize\r\n        File \"/tmp/pip-build-env-t3o1ln7x/normal/lib/python3.9/site-packages/mne/datasets/eegbci/eegbci.py\", line 8, in <module>\r\n          import pkg_resources\r\n      ModuleNotFoundError: No module named 'pkg_resources'\r\n      [end of output]\r\n```\r\n\r\nThe problem is solved by declaring `setuptools` as a dependency in my own package, which I would prefer not having to do for obvious reasons. I understand that `setuptools` has been the de-facto standard for many years and that one could just assume that pretty much every package will be installed in an environment where it is present. But lately a lot of people have been moving away from `setuptools`, so if you depend on it I think you should explicitly declare it as a dependency in `mne`.\r\n\r\n### Steps to reproduce\r\n\r\nWrite a package with a build backend other than `setuptools` and have it depend on `mne`.\r\n\r\n\r\n### Link to data\r\n\r\n_No response_\r\n\r\n### Expected results\r\n\r\nPackage can be installed with build backend other than `setuptools`.\r\n\r\n### Actual results\r\n\r\nPackage can't be installed.\r\n\r\n### Additional information\r\n\r\n(This is on a Gitlab runner, so not sure how helpful this is)\r\n\r\n```\r\nPlatform:         Linux-3.10.0-1160.15.2.el7.x86_64-x86_64-with-glibc2.31\r\nPython:           3.9.16 (main, Jan 23 2023, 23:35:25)  [GCC 10.2.1 20210110]\r\nExecutable:       /usr/local/bin/python\r\nCPU:              : 20 cores\r\nMemory:           Unavailable (requires \"psutil\" package)\r\nmne:              1.3.0\r\nnumpy:            1.24.1 {unknown linalg bindings (threadpoolctl module not found: No module named 'threadpoolctl')}\r\nscipy:            1.10.0\r\nmatplotlib:       3.6.3 {backend=agg}\r\n\r\nsklearn:          Not found\r\nnumba:            Not found\r\nnibabel:          Not found\r\nnilearn:          Not found\r\ndipy:             Not found\r\nopenmeeg:         Not found\r\ncupy:             Not found\r\npandas:           Not found\r\npyvista:          Not found\r\npyvistaqt:        Not found\r\nipyvtklink:       Not found\r\nvtk:              Not found\r\nqtpy:             Not found\r\nipympl:           Not found\r\npyqtgraph:        Not found\r\npooch:            v1.6.0\r\n\r\nmne_bids:         Not found\r\nmne_nirs:         Not found\r\nmne_features:     Not found\r\nmne_qt_browser:   Not found\r\nmne_connectivity: Not found\r\nmne_icalabel:     Not found\r\n```", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/11448/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/11448/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/11444", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/11444/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/11444/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/11444/events", "html_url": "https://github.com/mne-tools/mne-python/issues/11444", "id": 1567913613, "node_id": "I_kwDOABPcUM5ddHaN", "number": 11444, "title": "`SlidingEstimator` seems to ignore `verbose=False` (especially when n_jobs > 1)", "user": {"login": "mmagnuski", "id": 8452354, "node_id": "MDQ6VXNlcjg0NTIzNTQ=", "avatar_url": "https://avatars.githubusercontent.com/u/8452354?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mmagnuski", "html_url": "https://github.com/mmagnuski", "followers_url": "https://api.github.com/users/mmagnuski/followers", "following_url": "https://api.github.com/users/mmagnuski/following{/other_user}", "gists_url": "https://api.github.com/users/mmagnuski/gists{/gist_id}", "starred_url": "https://api.github.com/users/mmagnuski/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mmagnuski/subscriptions", "organizations_url": "https://api.github.com/users/mmagnuski/orgs", "repos_url": "https://api.github.com/users/mmagnuski/repos", "events_url": "https://api.github.com/users/mmagnuski/events{/privacy}", "received_events_url": "https://api.github.com/users/mmagnuski/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2023-02-02T12:00:18Z", "updated_at": "2023-02-09T20:50:46Z", "closed_at": "2023-02-09T20:50:46Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "### Description of the problem\n\n`SlidingEstimator` seems to ignore `verbose=False` when n_jobs > 1. This happens during `.fit()` and `.score()` and leads to progress bar showing up and multiple messages in the console:\r\n```\r\n  0%|          | Fitting SlidingEstimator : 0/100 [00:00<?,       ?it/s]\r\n[Parallel(n_jobs=10)]: Using backend LokyBackend with 10 concurrent workers.\r\n[Parallel(n_jobs=10)]: Done   4 out of  10 | elapsed:    0.0s remaining:    0.0s\r\n[Parallel(n_jobs=10)]: Done   7 out of  10 | elapsed:    0.0s remaining:    0.0s\r\n[Parallel(n_jobs=10)]: Done  10 out of  10 | elapsed:    0.0s remaining:    0.0s\r\n[Parallel(n_jobs=10)]: Done  10 out of  10 | elapsed:    0.0s finished\r\n```\r\nWhen the estimators are fit many times (for example when calculating randomization control or processing multiple subjects) this leads to many, many messages in the console.\n\n### Steps to reproduce\n\n```Python\nimport numpy as np\r\nfrom sklearn.svm import SVC\r\nimport mne\r\n\r\ndata = np.random.random((40, 20, 100))\r\nclasses = np.random.randint(0, 2, size=40)\r\nclf = SVC()\r\n\r\n# %% shows only the progress bar when n_jobs=1\r\nestimator = mne.decoding.SlidingEstimator(clf, n_jobs=1, verbose=False)\r\nestimator.fit(data, classes)\r\nscores = estimator.score(data, classes)\r\n\r\n# %% shows progress bar and prints other messages to the console\r\nestimator = mne.decoding.SlidingEstimator(clf, n_jobs=10, verbose=False)\r\nestimator.fit(data, classes)\r\nscores = estimator.score(data, classes)\n```\n\n\n### Link to data\n\n_No response_\n\n### Expected results\n\nNothing printed to the console when `verbose=False`.\n\n### Actual results\n\n```\r\n  0%|          | Fitting SlidingEstimator : 0/100 [00:00<?,       ?it/s]\r\n[Parallel(n_jobs=10)]: Using backend LokyBackend with 10 concurrent workers.\r\n[Parallel(n_jobs=10)]: Done   4 out of  10 | elapsed:    0.0s remaining:    0.0s\r\n[Parallel(n_jobs=10)]: Done   7 out of  10 | elapsed:    0.0s remaining:    0.0s\r\n[Parallel(n_jobs=10)]: Done  10 out of  10 | elapsed:    0.0s remaining:    0.0s\r\n[Parallel(n_jobs=10)]: Done  10 out of  10 | elapsed:    0.0s finished\r\n```\n\n### Additional information\n\n```\r\nmne.sys_info()\r\nPlatform:         Windows-10-10.0.19045-SP0\r\nPython:           3.9.6 | packaged by conda-forge | (default, Jul 11 2021, 03:37:25) [MSC v.1916 64 bit (AMD64)]\r\nExecutable:       C:\\Users\\mmagnuski\\anaconda3\\envs\\mne\\python.exe\r\nCPU:              Intel64 Family 6 Model 85 Stepping 7, GenuineIntel: 24 cores\r\nMemory:           127.7 GB\r\n\r\nmne:              1.3.0\r\nnumpy:            1.20.3 {MKL 2020.0.4 with 12 threads}\r\nscipy:            1.7.1\r\nmatplotlib:       3.4.2 {backend=module://matplotlib_inline.backend_inline}\r\n\r\nsklearn:          0.24.2\r\nnumba:            0.53.1\r\nnibabel:          3.2.1\r\nnilearn:          0.8.0\r\ndipy:             1.4.1\r\nopenmeeg:         Not found\r\ncupy:             Not found\r\npandas:           1.3.1\r\npyvista:          0.31.3 {OpenGL 4.5.0 NVIDIA 516.94 via NVIDIA GeForce GTX 1660 SUPER/PCIe/SSE2}\r\npyvistaqt:        0.5.0\r\nipyvtklink:       0.2.1\r\nvtk:              9.0.1\r\nqtpy:             2.2.1 {PyQt5=5.12.9}\r\nipympl:           Not found\r\npyqtgraph:        0.12.3\r\npooch:            v1.6.0\r\n\r\nmne_bids:         Not found\r\nmne_nirs:         Not found\r\nmne_features:     Not found\r\nmne_qt_browser:   Not found\r\nmne_connectivity: Not found\r\nmne_icalabel:     Not found\r\n```", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/11444/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/11444/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/11434", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/11434/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/11434/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/11434/events", "html_url": "https://github.com/mne-tools/mne-python/issues/11434", "id": 1562857532, "node_id": "I_kwDOABPcUM5dJ1A8", "number": 11434, "title": "Exporting epochs is not working if epochs have been concatenated", "user": {"login": "Gabrock94", "id": 10880332, "node_id": "MDQ6VXNlcjEwODgwMzMy", "avatar_url": "https://avatars.githubusercontent.com/u/10880332?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Gabrock94", "html_url": "https://github.com/Gabrock94", "followers_url": "https://api.github.com/users/Gabrock94/followers", "following_url": "https://api.github.com/users/Gabrock94/following{/other_user}", "gists_url": "https://api.github.com/users/Gabrock94/gists{/gist_id}", "starred_url": "https://api.github.com/users/Gabrock94/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Gabrock94/subscriptions", "organizations_url": "https://api.github.com/users/Gabrock94/orgs", "repos_url": "https://api.github.com/users/Gabrock94/repos", "events_url": "https://api.github.com/users/Gabrock94/events{/privacy}", "received_events_url": "https://api.github.com/users/Gabrock94/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2023-01-30T17:22:54Z", "updated_at": "2023-02-25T12:28:43Z", "closed_at": "2023-02-25T12:28:43Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "### Description of the problem\r\n\r\nHi all,\r\nI ma facing this error for which exporting epochs using mne.export_epochs() will fail if epochs were concatenated using mne.concatenate_epochs.\r\n\r\nI understand from previous issues (e.g. #11131) that this is because mne.concatenate_epochs has no support for annotations, however either the concatenate function should generate empty annotations, or the export function should handle missing annotations. \r\n\r\nI tried to solve it myself using the second approach as I needed it rapidly, by editing the file mne-python/mne/export/_eeglab.py. See https://github.com/Gabrock94/mne-python\r\n\r\nThe workaround I used is to edit Line 45 from:\r\n`if len(epochs.annotations) > 0:`\r\n\r\nto:\r\n\r\n```\r\nif (type(epochs.annotations)!=None.__class__):\r\n        if (len(epochs.annotations) > 0):\r\n```\r\n\r\nhowever probably fixing the concatenation function would be a better approach. \r\n\r\n\r\n### Steps to reproduce\r\n\r\n```Python\r\nimport mne\r\nmne.datasets.sample.data_path(verbose=True)\r\n\r\nraw = mne.io.read_raw_fif('~/mne_data/MNE-sample-data/MEG/sample/sample_audvis_raw.fif', verbose=False).load_data()\r\nevents = mne.find_events(raw, shortest_event=1)\r\n\r\nepochs = mne.Epochs(raw, events, tmin=-1, tmax = 1, detrend = 0, event_id={'LA':1, 'RA':2})\r\nepochsCombined =  mne.concatenate_epochs([epochs['LA'], epochs['RA']])\r\nmne.export.export_epochs('~/mne_data/MNE-sample-data/MEG/sample/test.set', epochsCombined, fmt='auto')\r\n```\r\n\r\n\r\n### Link to data\r\n\r\n_No response_\r\n\r\n### Expected results\r\n\r\nEpochs should be exported with no annotations. \r\n\r\n### Actual results\r\n\r\nTraceback (most recent call last):\r\n\r\n  File \"/usr/local/lib/python3.8/dist-packages/spyder_kernels/py3compat.py\", line 356, in compat_exec\r\n    exec(code, globals, locals)\r\n\r\n  File \"/home/giulio/Repositories/spinrec_giulio/Scripts/untitled4.py\", line 16, in <module>\r\n    mne.export.export_epochs('~/mne_data/MNE-sample-data/MEG/sample/test.set', epochsCombined, fmt='auto')\r\n\r\n  File \"<decorator-gen-601>\", line 12, in export_epochs\r\n\r\n  File \"/usr/local/lib/python3.8/dist-packages/mne/export/_export.py\", line 105, in export_epochs\r\n    _export_epochs(fname, epochs)\r\n\r\n  File \"/usr/local/lib/python3.8/dist-packages/mne/export/_eeglab.py\", line 45, in _export_epochs\r\n    if len(epochs.annotations) > 0:\r\n\r\nTypeError: object of type 'NoneType' has no len()\r\n\r\n### Additional information\r\n\r\nmne.sys_info()\r\nPlatform:         Linux-5.15.0-58-generic-x86_64-with-glibc2.29\r\nPython:           3.8.10 (default, Nov 14 2022, 12:59:47)  [GCC 9.4.0]\r\nExecutable:       /usr/bin/python3\r\nCPU:              x86_64: 20 cores\r\nMemory:           31.1 GB\r\n\r\nmne:              1.3.0\r\nnumpy:            1.22.3 {OpenBLAS 0.3.18 with 20 threads}\r\nscipy:            1.8.0\r\nmatplotlib:       3.5.1 {backend=Qt5Agg}\r\n\r\nsklearn:          1.0.2\r\nnumba:            Not found\r\nnibabel:          Not found\r\nnilearn:          Not found\r\ndipy:             Not found\r\nopenmeeg:         Not found\r\ncupy:             10.3.0\r\npandas:           1.4.2\r\npyvista:          Not found\r\npyvistaqt:        Not found\r\nipyvtklink:       Not found\r\nvtk:              Not found\r\nqtpy:             2.0.1 {PyQt5=5.15.2}\r\nipympl:           Not found\r\npyqtgraph:        Not found\r\npooch:            v1.6.0\r\n\r\nmne_bids:         Not found\r\nmne_nirs:         Not found\r\nmne_features:     Not found\r\nmne_qt_browser:   Not found\r\nmne_connectivity: Not found\r\nmne_icalabel:     Not found", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/11434/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/11434/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/11428", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/11428/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/11428/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/11428/events", "html_url": "https://github.com/mne-tools/mne-python/issues/11428", "id": 1554999547, "node_id": "I_kwDOABPcUM5cr2j7", "number": 11428, "title": " IndexError: index 0 is out of bounds for axis 0 with size 0 for plot_topomap based on only one channel", "user": {"login": "Farzaneh-Taleb", "id": 7354119, "node_id": "MDQ6VXNlcjczNTQxMTk=", "avatar_url": "https://avatars.githubusercontent.com/u/7354119?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Farzaneh-Taleb", "html_url": "https://github.com/Farzaneh-Taleb", "followers_url": "https://api.github.com/users/Farzaneh-Taleb/followers", "following_url": "https://api.github.com/users/Farzaneh-Taleb/following{/other_user}", "gists_url": "https://api.github.com/users/Farzaneh-Taleb/gists{/gist_id}", "starred_url": "https://api.github.com/users/Farzaneh-Taleb/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Farzaneh-Taleb/subscriptions", "organizations_url": "https://api.github.com/users/Farzaneh-Taleb/orgs", "repos_url": "https://api.github.com/users/Farzaneh-Taleb/repos", "events_url": "https://api.github.com/users/Farzaneh-Taleb/events{/privacy}", "received_events_url": "https://api.github.com/users/Farzaneh-Taleb/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2023-01-24T13:35:41Z", "updated_at": "2023-01-24T15:47:39Z", "closed_at": "2023-01-24T15:47:39Z", "author_association": "NONE", "active_lock_reason": null, "body": "### Description of the problem\n\nIf the EpochsSpectrum array contains only one channel, we get this error for plot_topomap() method:\r\n IndexError: index 0 is out of bounds for axis 0 with size 0\r\n\n\n### Steps to reproduce\n\n```Python\nepochs = epochs.pick_channels( ['Fz'])\r\n  band= {'Delta (0-4 Hz)': (0, 4), 'Theta (4-8 Hz)': (4, 8),\r\n     'Alpha (8-12 Hz)': (8, 12), 'Beta (12-30 Hz)': (12, 30),\r\n     'Gamma (30-45 Hz)': (30, 45),\r\n           'High Gamma (50-80 Hz)': (50, 80)\r\n\r\n           }\r\nfig= epochs_selected.compute_psd().plot_topomap(bands={band['Alpha (8-12 Hz)']},show=False)\n```\n\n\n### Link to data\n\n_No response_\n\n### Expected results\n\n..\n\n### Actual results\n\n..\n\n### Additional information\n\n..", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/11428/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/11428/timeline", "performed_via_github_app": null, "state_reason": "not_planned"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/11395", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/11395/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/11395/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/11395/events", "html_url": "https://github.com/mne-tools/mne-python/issues/11395", "id": 1514659970, "node_id": "I_kwDOABPcUM5aR-CC", "number": 11395, "title": "coregistration GUI does not exit cleanly", "user": {"login": "jasmainak", "id": 15852194, "node_id": "MDQ6VXNlcjE1ODUyMTk0", "avatar_url": "https://avatars.githubusercontent.com/u/15852194?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jasmainak", "html_url": "https://github.com/jasmainak", "followers_url": "https://api.github.com/users/jasmainak/followers", "following_url": "https://api.github.com/users/jasmainak/following{/other_user}", "gists_url": "https://api.github.com/users/jasmainak/gists{/gist_id}", "starred_url": "https://api.github.com/users/jasmainak/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jasmainak/subscriptions", "organizations_url": "https://api.github.com/users/jasmainak/orgs", "repos_url": "https://api.github.com/users/jasmainak/repos", "events_url": "https://api.github.com/users/jasmainak/events{/privacy}", "received_events_url": "https://api.github.com/users/jasmainak/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2022-12-30T17:17:24Z", "updated_at": "2022-12-31T15:00:19Z", "closed_at": "2022-12-30T17:18:30Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "### Description of the problem\n\nIf I open the coregistration GUI and it crashes for some reason (e.g., missing subjects_dir), a dangling welcome banner is left which becomes distracting the next time the GUI is opened. One can exit ipython and restart the script, but this might require redoing lengthy computation.\n\n### Steps to reproduce\n\n```Python\n# $ unset SUBJECTS_DIR\r\n# then the following\r\n#\r\nfrom mne.gui import coregistration\r\ncoregistration()\n```\n\n\n### Link to data\n\n_No response_\n\n### Expected results\n\nThe welcome banner closes\n\n### Actual results\n\n![image](https://user-images.githubusercontent.com/15852194/210096381-7041cbf3-7658-4455-a550-61fe6f691cb1.png)\r\n\n\n### Additional information\n\nn [2]: mne.sys_info()\r\nPlatform: Linux-3.10.0-1160.76.1.el7.x86_64-x86_64-with-glibc2.10\r\nPython: 3.8.6 | packaged by conda-forge | (default, Oct 7 2020, 19:08:05) [GCC 7.5.0]\r\nExecutable: /autofs/space/meghnn_001/users/mjas/anaconda3/envs/mne/bin/python3.8\r\nCPU: x86_64: 64 cores\r\nMemory: 125.4 GB\r\n\r\nException ignored on calling ctypes callback function: <function _ThreadpoolInfo._find_modules_with_dl_iterate_phdr..match_module_callback at 0x7f8f64346940>\r\nTraceback (most recent call last):\r\nFile \"/autofs/space/meghnn_001/users/mjas/anaconda3/envs/mne/lib/python3.8/site-packages/threadpoolctl.py\", line 400, in match_module_callback\r\nself._make_module_from_path(filepath)\r\nFile \"/autofs/space/meghnn_001/users/mjas/anaconda3/envs/mne/lib/python3.8/site-packages/threadpoolctl.py\", line 515, in _make_module_from_path\r\nmodule = module_class(filepath, prefix, user_api, internal_api)\r\nFile \"/autofs/space/meghnn_001/users/mjas/anaconda3/envs/mne/lib/python3.8/site-packages/threadpoolctl.py\", line 606, in init\r\nself.version = self.get_version()\r\nFile \"/autofs/space/meghnn_001/users/mjas/anaconda3/envs/mne/lib/python3.8/site-packages/threadpoolctl.py\", line 646, in get_version\r\nconfig = get_config().split()\r\nAttributeError: 'NoneType' object has no attribute 'split'\r\nmne: 1.4.dev0\r\nnumpy: 1.23.0 {unknown linalg bindings}\r\nscipy: 1.5.3\r\nmatplotlib: 3.3.3 {backend=Qt5Agg}\r\n\r\nsklearn: 0.23.2\r\nnumba: Not found\r\nnibabel: 3.2.1\r\nnilearn: 0.7.0\r\ndipy: 1.3.0\r\nopenmeeg: Not found\r\ncupy: Not found\r\npandas: 1.1.5\r\npyvista: 0.36.1 {OpenGL 4.5.0 NVIDIA 455.45.01 via Quadro P5000/PCIe/SSE2}\r\npyvistaqt: 0.9.0\r\nipyvtklink: Not found\r\nvtk: 9.0.1\r\nqtpy: 2.0.1 {PyQt5=5.12.9}\r\nipympl: Not found\r\n/autofs/space/meghnn_001/users/mjas/anaconda3/envs/mne/lib/python3.8/site-packages/pyqtgraph/colors/palette.py:1: RuntimeWarning: PyQtGraph supports Qt version >= 5.15, but 5.12.9 detected.\r\nfrom ..Qt import QtGui\r\npyqtgraph: 0.13.1\r\npooch: v1.5.2\r\n\r\nmne_bids: Not found\r\nmne_nirs: Not found\r\nmne_features: Not found\r\nmne_qt_browser: 0.4.0\r\nmne_connectivity: Not found\r\nmne_icalabel: Not found", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/11395/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/11395/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/11392", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/11392/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/11392/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/11392/events", "html_url": "https://github.com/mne-tools/mne-python/issues/11392", "id": 1514123964, "node_id": "I_kwDOABPcUM5aP7K8", "number": 11392, "title": "Evoked IO cannot handle channel names with colons", "user": {"login": "jasmainak", "id": 15852194, "node_id": "MDQ6VXNlcjE1ODUyMTk0", "avatar_url": "https://avatars.githubusercontent.com/u/15852194?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jasmainak", "html_url": "https://github.com/jasmainak", "followers_url": "https://api.github.com/users/jasmainak/followers", "following_url": "https://api.github.com/users/jasmainak/following{/other_user}", "gists_url": "https://api.github.com/users/jasmainak/gists{/gist_id}", "starred_url": "https://api.github.com/users/jasmainak/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jasmainak/subscriptions", "organizations_url": "https://api.github.com/users/jasmainak/orgs", "repos_url": "https://api.github.com/users/jasmainak/repos", "events_url": "https://api.github.com/users/jasmainak/events{/privacy}", "received_events_url": "https://api.github.com/users/jasmainak/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2022-12-29T23:38:23Z", "updated_at": "2023-01-03T10:06:28Z", "closed_at": "2023-01-03T10:06:28Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "### Description of the problem\r\n\r\nI have data where the channel names contain `:`. While MNE is able to successfully write this data, it throws a weird error when reading. While I can fix the channel names, I think the error (if at all) should be raised when writing the data, not reading.\r\n\r\n### Steps to reproduce\r\n\r\n```Python\r\nimport mne\r\n\r\nroot = mne.datasets.sample.data_path() / 'MEG' / 'sample'\r\nevk_file = root / 'sample_audvis-ave.fif'\r\nevoked = mne.read_evokeds(evk_file, baseline=(None, 0), proj=True,\r\n                          verbose=False)[0]\r\n# comment out the following line to see now error\r\nevoked.rename_channels(lambda x: x.replace(' ', ':'))\r\n\r\nevoked.info['bads'] = [evoked.info['ch_names'][0]]\r\nmne.write_evokeds('test_ave.fif', evoked, overwrite=True)\r\n\r\nevoked2 = mne.read_evokeds('test_ave.fif')[0]\r\n```\r\n\r\n\r\n### Link to data\r\n\r\n_No response_\r\n\r\n### Expected results\r\n\r\nNo error\r\n\r\n### Actual results\r\n\r\n```py\r\n---------------------------------------------------------------------------\r\nValueError                                Traceback (most recent call last)\r\nFile /autofs/space/meghnn_001/users/mjas/github_repos/mne-opm/mne_bug.py:14\r\n     11 evoked.info['bads'] = [evoked.info['ch_names'][0]]\r\n     12 mne.write_evokeds('test_ave.fif', evoked, overwrite=True)\r\n---> 14 evoked2 = mne.read_evokeds('test_ave.fif')[0]\r\n\r\nFile <decorator-gen-255>:12, in read_evokeds(fname, condition, baseline, kind, proj, allow_maxshield, verbose)\r\n\r\nFile /autofs/space/meghnn_001/users/mjas/github_repos/mne-python/mne/evoked.py:1186, in read_evokeds(fname, condition, baseline, kind, proj, allow_maxshield, verbose)\r\n   1184 return_list = True\r\n   1185 if condition is None:\r\n-> 1186     evoked_node = _get_evoked_node(fname)\r\n   1187     condition = range(len(evoked_node))\r\n   1188 elif not isinstance(condition, list):\r\n\r\nFile /autofs/space/meghnn_001/users/mjas/github_repos/mne-python/mne/evoked.py:1005, in _get_evoked_node(fname)\r\n   1003 f, tree, _ = fiff_open(fname)\r\n   1004 with f as fid:\r\n-> 1005     _, meas = read_meas_info(fid, tree, verbose=False)\r\n   1006     evoked_node = dir_tree_find(meas, FIFF.FIFFB_EVOKED)\r\n   1007 return evoked_node\r\n\r\nFile <decorator-gen-35>:10, in read_meas_info(fid, tree, clean_bads, verbose)\r\n\r\nFile /autofs/space/meghnn_001/users/mjas/github_repos/mne-python/mne/io/meas_info.py:1552, in read_meas_info(fid, tree, clean_bads, verbose)\r\n   1549             acq_stim = tag.data\r\n   1551 #   Load the SSP data\r\n-> 1552 projs = _read_proj(\r\n   1553     fid, meas_info, ch_names_mapping=ch_names_mapping)\r\n   1555 #   Load the CTF compensation data\r\n   1556 comps = _read_ctf_comp(\r\n   1557     fid, meas_info, chs, ch_names_mapping=ch_names_mapping)\r\n\r\nFile <decorator-gen-15>:12, in _read_proj(fid, node, ch_names_mapping, verbose)\r\n\r\nFile /autofs/space/meghnn_001/users/mjas/github_repos/mne-python/mne/io/proj.py:528, in _read_proj(fid, node, ch_names_mapping, verbose)\r\n    525     data = data.T\r\n    527 if data.shape[1] != len(names):\r\n--> 528     raise ValueError('Number of channel names does not match the '\r\n    529                      'size of data matrix')\r\n    531 # just always use this, we used to have bugs with writing the\r\n    532 # number correctly...\r\n    533 nchan = len(names)\r\n\r\nValueError: Number of channel names does not match the size of data matrix\r\n```\r\n\r\n### Additional information\r\n\r\n```py\r\nPlatform:         Linux-3.10.0-1160.76.1.el7.x86_64-x86_64-with-glibc2.10\r\nPython:           3.8.6 | packaged by conda-forge | (default, Oct  7 2020, 19:08:05)  [GCC 7.5.0]\r\nExecutable:       /autofs/space/meghnn_001/users/mjas/anaconda3/envs/mne/bin/python3.8\r\nCPU:              x86_64: 64 cores\r\nMemory:           125.4 GB\r\n\r\nException ignored on calling ctypes callback function: <function _ThreadpoolInfo._find_modules_with_dl_iterate_phdr.<locals>.match_module_callback at 0x7f921e1c2790>\r\nTraceback (most recent call last):\r\n  File \"/autofs/space/meghnn_001/users/mjas/anaconda3/envs/mne/lib/python3.8/site-packages/threadpoolctl.py\", line 400, in match_module_callback\r\n    self._make_module_from_path(filepath)\r\n  File \"/autofs/space/meghnn_001/users/mjas/anaconda3/envs/mne/lib/python3.8/site-packages/threadpoolctl.py\", line 515, in _make_module_from_path\r\n    module = module_class(filepath, prefix, user_api, internal_api)\r\n  File \"/autofs/space/meghnn_001/users/mjas/anaconda3/envs/mne/lib/python3.8/site-packages/threadpoolctl.py\", line 606, in __init__\r\n    self.version = self.get_version()\r\n  File \"/autofs/space/meghnn_001/users/mjas/anaconda3/envs/mne/lib/python3.8/site-packages/threadpoolctl.py\", line 646, in get_version\r\n    config = get_config().split()\r\nAttributeError: 'NoneType' object has no attribute 'split'\r\nmne:              1.4.dev0\r\nnumpy:            1.23.0 {unknown linalg bindings}\r\nscipy:            1.5.3\r\nmatplotlib:       3.3.3 {backend=Qt5Agg}\r\n\r\nsklearn:          0.23.2\r\nnumba:            Not found\r\nnibabel:          3.2.1\r\nnilearn:          0.7.0\r\ndipy:             1.3.0\r\nopenmeeg:         Not found\r\ncupy:             Not found\r\npandas:           1.1.5\r\npyvista:          0.36.1 {OpenGL 4.5.0 NVIDIA 455.45.01 via Quadro P5000/PCIe/SSE2}\r\npyvistaqt:        0.9.0\r\nipyvtklink:       Not found\r\nvtk:              9.0.1\r\nqtpy:             2.0.1 {PyQt5=5.12.9}\r\nipympl:           Not found\r\n/autofs/space/meghnn_001/users/mjas/anaconda3/envs/mne/lib/python3.8/site-packages/pyqtgraph/colors/palette.py:1: RuntimeWarning: PyQtGraph supports Qt version >= 5.15, but 5.12.9 detected.\r\n  from ..Qt import QtGui\r\npyqtgraph:        0.13.1\r\npooch:            v1.5.2\r\n\r\nmne_bids:         Not found\r\nmne_nirs:         Not found\r\nmne_features:     Not found\r\nmne_qt_browser:   0.4.0\r\nmne_connectivity: Not found\r\nmne_icalabel:     Not found\r\n\r\n```", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/11392/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/11392/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/11386", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/11386/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/11386/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/11386/events", "html_url": "https://github.com/mne-tools/mne-python/issues/11386", "id": 1510020152, "node_id": "I_kwDOABPcUM5aARQ4", "number": 11386, "title": "\"stable\" docs show docs for MNE 1.2, not the latest 1.3", "user": {"login": "hoechenberger", "id": 2046265, "node_id": "MDQ6VXNlcjIwNDYyNjU=", "avatar_url": "https://avatars.githubusercontent.com/u/2046265?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hoechenberger", "html_url": "https://github.com/hoechenberger", "followers_url": "https://api.github.com/users/hoechenberger/followers", "following_url": "https://api.github.com/users/hoechenberger/following{/other_user}", "gists_url": "https://api.github.com/users/hoechenberger/gists{/gist_id}", "starred_url": "https://api.github.com/users/hoechenberger/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hoechenberger/subscriptions", "organizations_url": "https://api.github.com/users/hoechenberger/orgs", "repos_url": "https://api.github.com/users/hoechenberger/repos", "events_url": "https://api.github.com/users/hoechenberger/events{/privacy}", "received_events_url": "https://api.github.com/users/hoechenberger/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 40091538, "node_id": "MDU6TGFiZWw0MDA5MTUzOA==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/DOC", "name": "DOC", "color": "009800", "default": false, "description": null}, {"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2022-12-24T09:37:07Z", "updated_at": "2022-12-25T21:01:27Z", "closed_at": "2022-12-25T19:41:10Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "### Proposed documentation enhancement\n\nhttps://mne.tools/stable/index.html\r\n\r\n<img width=\"368\" alt=\"Screenshot 2022-12-24 at 10 36 41\" src=\"https://user-images.githubusercontent.com/2046265/209430066-231f2ee0-2c68-4b80-9148-0a463de314ef.png\">\r\n", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/11386/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/11386/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/11360", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/11360/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/11360/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/11360/events", "html_url": "https://github.com/mne-tools/mne-python/issues/11360", "id": 1485423414, "node_id": "I_kwDOABPcUM5YicM2", "number": 11360, "title": "[BUG] If T1 and T2 are used in recon-all, pial surface not found for `mne.viz.Brain`", "user": {"login": "alexrockhill", "id": 13473576, "node_id": "MDQ6VXNlcjEzNDczNTc2", "avatar_url": "https://avatars.githubusercontent.com/u/13473576?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alexrockhill", "html_url": "https://github.com/alexrockhill", "followers_url": "https://api.github.com/users/alexrockhill/followers", "following_url": "https://api.github.com/users/alexrockhill/following{/other_user}", "gists_url": "https://api.github.com/users/alexrockhill/gists{/gist_id}", "starred_url": "https://api.github.com/users/alexrockhill/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alexrockhill/subscriptions", "organizations_url": "https://api.github.com/users/alexrockhill/orgs", "repos_url": "https://api.github.com/users/alexrockhill/repos", "events_url": "https://api.github.com/users/alexrockhill/events{/privacy}", "received_events_url": "https://api.github.com/users/alexrockhill/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/mne-tools/mne-python/milestones/25", "html_url": "https://github.com/mne-tools/mne-python/milestone/25", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/milestones/25/labels", "id": 8736885, "node_id": "MI_kwDOABPcUM4AhVB1", "number": 25, "title": "1.4", "description": "", "creator": {"login": "larsoner", "id": 2365790, "node_id": "MDQ6VXNlcjIzNjU3OTA=", "avatar_url": "https://avatars.githubusercontent.com/u/2365790?v=4", "gravatar_id": "", "url": "https://api.github.com/users/larsoner", "html_url": "https://github.com/larsoner", "followers_url": "https://api.github.com/users/larsoner/followers", "following_url": "https://api.github.com/users/larsoner/following{/other_user}", "gists_url": "https://api.github.com/users/larsoner/gists{/gist_id}", "starred_url": "https://api.github.com/users/larsoner/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/larsoner/subscriptions", "organizations_url": "https://api.github.com/users/larsoner/orgs", "repos_url": "https://api.github.com/users/larsoner/repos", "events_url": "https://api.github.com/users/larsoner/events{/privacy}", "received_events_url": "https://api.github.com/users/larsoner/received_events", "type": "User", "site_admin": false}, "open_issues": 8, "closed_issues": 35, "state": "open", "created_at": "2022-12-08T20:54:15Z", "updated_at": "2023-04-28T15:07:12Z", "due_on": "2023-05-01T07:00:00Z", "closed_at": null}, "comments": 2, "created_at": "2022-12-08T21:22:37Z", "updated_at": "2022-12-21T20:55:32Z", "closed_at": "2022-12-21T20:55:32Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "### Description of the problem\n\nThe files are called `lh.pial.T1` and `lh.pial.T2` in the latest version of freesurfer.\n\n### Steps to reproduce\n\n```Python\nDo a recon-all with a T2 and then do\r\n\r\n\r\nimport mne\r\nbrain = mne.viz.Brain(sub='1', subjects_dir='...')\r\n```\n```\n\n\n### Link to data\n\n_No response_\n\n### Expected results\n\nBrain launches\n\n### Actual results\n\n```\r\nFileNotFoundError                         Traceback (most recent call last)\r\nInput In [26], in <cell line: 4>()\r\n      6 info = mne.io.read_info(op.join(subjects_dir, f'sub-{sub}', 'ieeg',\r\n      7                                 'ch_pos.fif'))\r\n      8 trans = mne.coreg.estimate_head_mri_t(f'sub-{sub}', subjects_dir)\r\n----> 9 brain = mne.viz.Brain(f'sub-{sub}', **brain_kwargs)\r\n     10 groups = dict()\r\n     11 for ch_name in info.ch_names:\r\n\r\nFile ~/projects/mne-python/mne/viz/_brain/_brain.py:356, in Brain.__init__(***failed resolving arguments***)\r\n    353 geo = _Surface(self._subject_id, h, surf, self._subjects_dir,\r\n    354                offset, units=self._units, x_dir=self._rigid[0, :3])\r\n    355 # Load in the geometry and curvature\r\n--> 356 geo.load_geometry()\r\n    357 geo.load_curvature()\r\n    358 self.geo[h] = geo\r\n\r\nFile ~/projects/mne-python/mne/viz/_brain/surface.py:124, in _Surface.load_geometry(self)\r\n    122     coords[:, 1] *= -1\r\n    123 else:\r\n--> 124     coords, faces = read_surface(\r\n    125         path.join(self.data_path, 'surf',\r\n    126                   '%s.%s' % (self.hemi, self.surf)))\r\n    127     orig_faces = faces\r\n    128 if self.units == 'm':\r\n\r\nFile <decorator-gen-58>:12, in read_surface(fname, read_metadata, return_dict, file_format, verbose)\r\n\r\nFile ~/projects/mne-python/mne/surface.py:809, in read_surface(fname, read_metadata, return_dict, file_format, verbose)\r\n    754 @verbose\r\n    755 def read_surface(fname, read_metadata=False, return_dict=False,\r\n    756                  file_format='auto', verbose=None):\r\n    757     \"\"\"Load a Freesurfer surface mesh in triangular format.\r\n    758 \r\n    759     Parameters\r\n   (...)\r\n    807     read_tri\r\n    808     \"\"\"\r\n--> 809     fname = _check_fname(fname, 'read', True)\r\n    810     _check_option('file_format', file_format, ['auto', 'freesurfer', 'obj'])\r\n    812     if file_format == 'auto':\r\n\r\nFile <decorator-gen-0>:12, in _check_fname(fname, overwrite, must_exist, name, need_dir, verbose)\r\n\r\nFile ~/projects/mne-python/mne/utils/check.py:244, in _check_fname(fname, overwrite, must_exist, name, need_dir, verbose)\r\n    241             raise PermissionError(\r\n    242                 f'{name} does not have read permissions: {fname}')\r\n    243 elif must_exist:\r\n--> 244     raise FileNotFoundError(f'{name} does not exist: {fname}')\r\n    246 return fname\r\n\r\nFileNotFoundError: File does not exist: /home/alex/file/path/derivatives/sub-80/surf/lh.pial\r\n```\n\n### Additional information\n\nNormal dev install.", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/11360/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/11360/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/11353", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/11353/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/11353/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/11353/events", "html_url": "https://github.com/mne-tools/mne-python/pull/11353", "id": 1476704045, "node_id": "PR_kwDOABPcUM5EWcv1", "number": 11353, "title": "[DOC,BUG] Add note about FWHM to Morlet, fix norm", "user": {"login": "britta-wstnr", "id": 20129119, "node_id": "MDQ6VXNlcjIwMTI5MTE5", "avatar_url": "https://avatars.githubusercontent.com/u/20129119?v=4", "gravatar_id": "", "url": "https://api.github.com/users/britta-wstnr", "html_url": "https://github.com/britta-wstnr", "followers_url": "https://api.github.com/users/britta-wstnr/followers", "following_url": "https://api.github.com/users/britta-wstnr/following{/other_user}", "gists_url": "https://api.github.com/users/britta-wstnr/gists{/gist_id}", "starred_url": "https://api.github.com/users/britta-wstnr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/britta-wstnr/subscriptions", "organizations_url": "https://api.github.com/users/britta-wstnr/orgs", "repos_url": "https://api.github.com/users/britta-wstnr/repos", "events_url": "https://api.github.com/users/britta-wstnr/events{/privacy}", "received_events_url": "https://api.github.com/users/britta-wstnr/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 40091538, "node_id": "MDU6TGFiZWw0MDA5MTUzOA==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/DOC", "name": "DOC", "color": "009800", "default": false, "description": null}, {"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/mne-tools/mne-python/milestones/24", "html_url": "https://github.com/mne-tools/mne-python/milestone/24", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/milestones/24/labels", "id": 8418297, "node_id": "MI_kwDOABPcUM4AgHP5", "number": 24, "title": "1.3", "description": "", "creator": {"login": "larsoner", "id": 2365790, "node_id": "MDQ6VXNlcjIzNjU3OTA=", "avatar_url": "https://avatars.githubusercontent.com/u/2365790?v=4", "gravatar_id": "", "url": "https://api.github.com/users/larsoner", "html_url": "https://github.com/larsoner", "followers_url": "https://api.github.com/users/larsoner/followers", "following_url": "https://api.github.com/users/larsoner/following{/other_user}", "gists_url": "https://api.github.com/users/larsoner/gists{/gist_id}", "starred_url": "https://api.github.com/users/larsoner/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/larsoner/subscriptions", "organizations_url": "https://api.github.com/users/larsoner/orgs", "repos_url": "https://api.github.com/users/larsoner/repos", "events_url": "https://api.github.com/users/larsoner/events{/privacy}", "received_events_url": "https://api.github.com/users/larsoner/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 18, "state": "closed", "created_at": "2022-09-13T15:22:25Z", "updated_at": "2022-12-28T21:04:54Z", "due_on": "2022-12-16T08:00:00Z", "closed_at": "2022-12-28T21:04:54Z"}, "comments": 35, "created_at": "2022-12-05T14:31:05Z", "updated_at": "2022-12-10T13:20:55Z", "closed_at": "2022-12-10T13:20:55Z", "author_association": "MEMBER", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/mne-tools/mne-python/pulls/11353", "html_url": "https://github.com/mne-tools/mne-python/pull/11353", "diff_url": "https://github.com/mne-tools/mne-python/pull/11353.diff", "patch_url": "https://github.com/mne-tools/mne-python/pull/11353.patch", "merged_at": "2022-12-10T13:20:55Z"}, "body": "\r\nThis is a draft of a note that could be added to `tfr_morlet` on how to derive the FWHM for the wavelet that has been used.\r\n\r\nDraft status because the equation reported in [Cohen 2019](https://www.sciencedirect.com/science/article/pii/S1053811919304409) is not delivering an accurate result on our wavelets, only an approximation.\r\n\r\nReasons for this are related to: https://mne.discourse.group/t/mne-pythons-implementation-of-morlet/5892\r\n\r\nCC @drammock @larsoner", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/11353/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/11353/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/11343", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/11343/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/11343/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/11343/events", "html_url": "https://github.com/mne-tools/mne-python/issues/11343", "id": 1468020693, "node_id": "I_kwDOABPcUM5XgDfV", "number": 11343, "title": "Default arguments of `raw.plot_psd()` changed", "user": {"login": "cbrnr", "id": 4377312, "node_id": "MDQ6VXNlcjQzNzczMTI=", "avatar_url": "https://avatars.githubusercontent.com/u/4377312?v=4", "gravatar_id": "", "url": "https://api.github.com/users/cbrnr", "html_url": "https://github.com/cbrnr", "followers_url": "https://api.github.com/users/cbrnr/followers", "following_url": "https://api.github.com/users/cbrnr/following{/other_user}", "gists_url": "https://api.github.com/users/cbrnr/gists{/gist_id}", "starred_url": "https://api.github.com/users/cbrnr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/cbrnr/subscriptions", "organizations_url": "https://api.github.com/users/cbrnr/orgs", "repos_url": "https://api.github.com/users/cbrnr/repos", "events_url": "https://api.github.com/users/cbrnr/events{/privacy}", "received_events_url": "https://api.github.com/users/cbrnr/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "drammock", "id": 1810515, "node_id": "MDQ6VXNlcjE4MTA1MTU=", "avatar_url": "https://avatars.githubusercontent.com/u/1810515?v=4", "gravatar_id": "", "url": "https://api.github.com/users/drammock", "html_url": "https://github.com/drammock", "followers_url": "https://api.github.com/users/drammock/followers", "following_url": "https://api.github.com/users/drammock/following{/other_user}", "gists_url": "https://api.github.com/users/drammock/gists{/gist_id}", "starred_url": "https://api.github.com/users/drammock/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/drammock/subscriptions", "organizations_url": "https://api.github.com/users/drammock/orgs", "repos_url": "https://api.github.com/users/drammock/repos", "events_url": "https://api.github.com/users/drammock/events{/privacy}", "received_events_url": "https://api.github.com/users/drammock/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "drammock", "id": 1810515, "node_id": "MDQ6VXNlcjE4MTA1MTU=", "avatar_url": "https://avatars.githubusercontent.com/u/1810515?v=4", "gravatar_id": "", "url": "https://api.github.com/users/drammock", "html_url": "https://github.com/drammock", "followers_url": "https://api.github.com/users/drammock/followers", "following_url": "https://api.github.com/users/drammock/following{/other_user}", "gists_url": "https://api.github.com/users/drammock/gists{/gist_id}", "starred_url": "https://api.github.com/users/drammock/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/drammock/subscriptions", "organizations_url": "https://api.github.com/users/drammock/orgs", "repos_url": "https://api.github.com/users/drammock/repos", "events_url": "https://api.github.com/users/drammock/events{/privacy}", "received_events_url": "https://api.github.com/users/drammock/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 6, "created_at": "2022-11-29T12:56:11Z", "updated_at": "2023-01-19T20:27:07Z", "closed_at": "2023-01-19T20:27:07Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "### Description of the problem\n\nIt seems like the default arguments of `raw.plot_psd()` changed in MNE 1.2 (see example below).\n\n### Steps to reproduce\n\n```Python\nimport mne\r\nfrom mne.datasets import sample\r\n\r\nfname = sample.data_path() / \"MEG\" / \"sample\" / \"sample_audvis_raw.fif\"\r\nraw = mne.io.read_raw(fname).pick_types(eeg=True).load_data()\r\nraw.plot_psd(fmax=60)\n```\n\n\n### Link to data\n\n_No response_\n\n### Expected results\n\nResult from MNE < 1.2:\r\n\r\n![raw-plot_psd-1 1](https://user-images.githubusercontent.com/4377312/204534595-54a35167-ba05-4365-8fcb-b5b582d689d6.png)\n\n### Actual results\n\nResult from MNE >= 1.2 (including `main`):\r\n\r\n![raw-plot_psd-main](https://user-images.githubusercontent.com/4377312/204534677-6130f0bf-fb33-4e64-afcc-c8fd0eefabee.png)\n\n### Additional information\n\nPlatform:         macOS-11.7.1-x86_64-i386-64bit\r\nPython:           3.10.8 (main, Oct 13 2022, 10:18:28) [Clang 13.0.0 (clang-1300.0.29.30)]\r\nExecutable:       /Users/clemens/Projects/mne-python/.direnv/python-3.10.8/bin/python\r\nCPU:              i386: 8 cores\r\nMemory:           Unavailable (requires \"psutil\" package)\r\nmne:              1.3.dev0\r\nnumpy:            1.23.5 {unknown linalg bindings (threadpoolctl module not found: No module named 'threadpoolctl')}\r\nscipy:            1.9.3\r\nmatplotlib:       3.6.2 {backend=MacOSX}", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/11343/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/11343/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/11339", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/11339/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/11339/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/11339/events", "html_url": "https://github.com/mne-tools/mne-python/issues/11339", "id": 1466503905, "node_id": "I_kwDOABPcUM5XaRLh", "number": 11339, "title": "Wrong adjacency when calculated on lateral channel subset", "user": {"login": "eioe", "id": 20844835, "node_id": "MDQ6VXNlcjIwODQ0ODM1", "avatar_url": "https://avatars.githubusercontent.com/u/20844835?v=4", "gravatar_id": "", "url": "https://api.github.com/users/eioe", "html_url": "https://github.com/eioe", "followers_url": "https://api.github.com/users/eioe/followers", "following_url": "https://api.github.com/users/eioe/following{/other_user}", "gists_url": "https://api.github.com/users/eioe/gists{/gist_id}", "starred_url": "https://api.github.com/users/eioe/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/eioe/subscriptions", "organizations_url": "https://api.github.com/users/eioe/orgs", "repos_url": "https://api.github.com/users/eioe/repos", "events_url": "https://api.github.com/users/eioe/events{/privacy}", "received_events_url": "https://api.github.com/users/eioe/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2022-11-28T14:12:26Z", "updated_at": "2022-11-30T20:18:22Z", "closed_at": "2022-11-30T20:18:22Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "### Description of the problem\n\nWhen calculating channel adjacency for a (lateral) subset of EEG channels (e.g., only left channels), I seem to get a slightly wrong adjacency matrix that also exhibits adjacency of clearly non-neighbouring channels (in my case: `F1`and `P1` and also `FT9` and `TP9`). \r\nWhen I use the same procedure on the full montage, the same channels are not denoted as adjacent. \r\n\r\nI did not dig very deep as I'm only superficially familiar with calculating adjacency/triangulation, and I might very well be doing something wrong or this is expected behavior. \r\nThanks for clarification!\n\n### Steps to reproduce\n\n```Python\nimport mne\r\nimport matplotlib.pyplot as plt\r\n\r\neasycap_montage = mne.channels.make_standard_montage('easycap-M1')\r\ninfo_full = mne.create_info(ch_names=easycap_montage.ch_names,\r\n                            sfreq=1,\r\n                            ch_types='eeg')\r\ninfo_full.set_montage(easycap_montage)\r\nch_sel = mne.channels.make_1020_channel_selections(info_full)\r\nchs_left = [info_full.ch_names[i] for i in ch_sel['Left']]\r\ninfo_left = mne.create_info(ch_names=chs_left,\r\n                            sfreq=1,\r\n                            ch_types='eeg')\r\ninfo_left.set_montage(easycap_montage)\r\nchan_adj, ch_n = mne.channels.find_ch_adjacency(info_left, 'eeg')\r\nfig = mne.viz.plot_sensors(info_left, show_names=True)\r\n# looks ok and, importantly, P1 and F1 are no neighbours\r\n\r\nfig, ax = plt.subplots(figsize=(16,16))\r\nax.spy(chan_adj)\r\nax.set_xticks(range(len(ch_n)))\r\nax.set_xticklabels(ch_n)\r\nax.set_yticks(range(len(ch_n)))\r\nax.set_yticklabels(ch_n)\r\nplt.show()\r\n\r\nidx_f1 = info_left.ch_names.index('F1')\r\nidx_p1 = info_left.ch_names.index('P1')\r\nprint(\"P1 and F1 adjacency (left sensors): \" + str(chan_adj[idx_f1, idx_p1]))\r\n\r\n# whereas:\r\nchan_adj_full, ch_n_full = mne.channels.find_ch_adjacency(info_full, 'eeg')\r\nidx_f1 = info_full.ch_names.index('F1')\r\nidx_p1 = info_full.ch_names.index('P1')\r\nprint(\"P1 and F1 adjacency (all sensors): \" + str(chan_adj_full[idx_f1, idx_p1]))\n```\n\n\n### Link to data\n\n_No response_\n\n### Expected results\n\nChannels which are quite far apart (like `P1` and `F1`) should not be declared as \"adjacent\". \r\nAlso, should the adjacency of such an isolated subset of channels not be a subset/\"sub-matrix\" of the adjacency matrix on the full channel set? \n\n### Actual results\n\nsee output of code snippet\n\n### Additional information\n\nPlatform:         Linux-5.3.18-150300.59.87-default-x86_64-with-glibc2.31\r\nPython:           3.10.6 | packaged by conda-forge | (main, Aug 22 2022, 20:35:26) [GCC 10.4.0]\r\nExecutable:       /u/fklotzsche/conda-envs/vr2fem/bin/python\r\nCPU:              x86_64: 144 cores\r\nMemory:           503.2 GB\r\n\r\nmne:              1.1.1\r\nnumpy:            1.23.3 {blas=mkl_rt, lapack=mkl_rt}\r\nscipy:            1.9.1\r\nmatplotlib:       3.5.2 {backend=module://matplotlib_inline.backend_inline}\r\n\r\nsklearn:          1.1.2\r\nnumba:            Not found\r\nnibabel:          4.0.2\r\nnilearn:          0.9.2\r\ndipy:             1.5.0\r\ncupy:             Not found\r\npandas:           1.4.4\r\npyvista:          0.36.1 {OpenGL 3.1 Mesa 20.2.4 via llvmpipe (LLVM 11.0.1, 256 bits)}\r\npyvistaqt:        0.9.0\r\nipyvtklink:       0.2.3\r\nvtk:              9.1.0\r\nqtpy:             2.2.0 {PyQt5=5.15.2}\r\nipympl:           Not found\r\npyqtgraph:        0.12.3\r\npooch:            v1.6.0\r\n\r\nmne_bids:         Not found\r\nmne_nirs:         Not found\r\nmne_features:     Not found\r\nmne_qt_browser:   0.4.0\r\nmne_connectivity: Not found\r\nmne_icalabel:     0.4\r\n", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/11339/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/11339/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/11337", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/11337/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/11337/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/11337/events", "html_url": "https://github.com/mne-tools/mne-python/issues/11337", "id": 1463554476, "node_id": "I_kwDOABPcUM5XPBGs", "number": 11337, "title": "no colours in plot_psd ", "user": {"login": "ggrrll", "id": 15370425, "node_id": "MDQ6VXNlcjE1MzcwNDI1", "avatar_url": "https://avatars.githubusercontent.com/u/15370425?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ggrrll", "html_url": "https://github.com/ggrrll", "followers_url": "https://api.github.com/users/ggrrll/followers", "following_url": "https://api.github.com/users/ggrrll/following{/other_user}", "gists_url": "https://api.github.com/users/ggrrll/gists{/gist_id}", "starred_url": "https://api.github.com/users/ggrrll/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ggrrll/subscriptions", "organizations_url": "https://api.github.com/users/ggrrll/orgs", "repos_url": "https://api.github.com/users/ggrrll/repos", "events_url": "https://api.github.com/users/ggrrll/events{/privacy}", "received_events_url": "https://api.github.com/users/ggrrll/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2022-11-24T16:05:25Z", "updated_at": "2022-11-24T16:09:44Z", "closed_at": "2022-11-24T16:09:08Z", "author_association": "NONE", "active_lock_reason": null, "body": "### Description of the problem\r\n\r\n\r\nI am try to get a https://mne.tools/stable/generated/mne.BaseEpochs.html#mne.BaseEpochs.plot_psd  with colours ... but it just returns gray ones\r\n\r\nmy obj is a `mne.io.RawArray` class\r\n\r\n### Link to data\r\n\r\n_No response_\r\n\r\n### Expected results\r\n\r\nColourful plot according to https://matplotlib.org/stable/gallery/color/named_colors.html \r\n\r\n### Actual results\r\n\r\nno color\r\n\r\n### Additional information\r\n\r\nPlatform:         macOS-13.0-x86_64-i386-64bit\r\nPython:           3.9.13 (main, Aug  7 2022, 01:33:23)  [Clang 13.1.6 (clang-1316.0.21.2.5)]\r\nExecutable:       /usr/local/opt/python@3.9/bin/python3.9\r\nCPU:              i386: 12 cores\r\nMemory:           32.0 GB\r\n\r\nmne:              1.1.0\r\nnumpy:            1.22.4 {}\r\nscipy:            1.8.1\r\nmatplotlib:       3.5.2 {backend=module://matplotlib_inline.backend_inline}\r\n\r\nsklearn:          Not found\r\nnumba:            Not found\r\nnibabel:          Not found\r\nnilearn:          Not found\r\ndipy:             Not found\r\ncupy:             Not found\r\npandas:           1.4.3\r\npyvista:          Not found\r\npyvistaqt:        Not found\r\nipyvtklink:       Not found\r\nvtk:              Not found\r\nqtpy:             2.1.0 {PyQt5=5.15.5}\r\nipympl:           Not found\r\npyqtgraph:        0.12.4\r\npooch:            v1.6.0\r\n\r\nmne_bids:         Not found\r\nmne_nirs:         Not found\r\nmne_features:     Not found\r\nmne_qt_browser:   Not found\r\nmne_connectivity: Not found\r\nmne_icalabel:     Not found", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/11337/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/11337/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/11323", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/11323/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/11323/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/11323/events", "html_url": "https://github.com/mne-tools/mne-python/issues/11323", "id": 1447578089, "node_id": "I_kwDOABPcUM5WSEnp", "number": 11323, "title": "mne.simulation.simulate_raw fails with default kwarg", "user": {"login": "moritz-gerster", "id": 45031224, "node_id": "MDQ6VXNlcjQ1MDMxMjI0", "avatar_url": "https://avatars.githubusercontent.com/u/45031224?v=4", "gravatar_id": "", "url": "https://api.github.com/users/moritz-gerster", "html_url": "https://github.com/moritz-gerster", "followers_url": "https://api.github.com/users/moritz-gerster/followers", "following_url": "https://api.github.com/users/moritz-gerster/following{/other_user}", "gists_url": "https://api.github.com/users/moritz-gerster/gists{/gist_id}", "starred_url": "https://api.github.com/users/moritz-gerster/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/moritz-gerster/subscriptions", "organizations_url": "https://api.github.com/users/moritz-gerster/orgs", "repos_url": "https://api.github.com/users/moritz-gerster/repos", "events_url": "https://api.github.com/users/moritz-gerster/events{/privacy}", "received_events_url": "https://api.github.com/users/moritz-gerster/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 8, "created_at": "2022-11-14T08:06:18Z", "updated_at": "2022-11-16T06:40:53Z", "closed_at": "2022-11-16T06:40:47Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "### Description of the problem\n\nFor some reason `mne.simulation.simulate_raw` does not work for me without giving the `src` kwarg:\r\n\r\n\r\n```Python\r\nimport mne\r\ninfo = mne.create_info([\"eeg1\"], sfreq=256)\r\nraw = mne.simulation.simulate_raw(info)\r\n```\n\n### Steps to reproduce\n\n```Python\nSee code above.\n```\n\n\n### Link to data\n\n_No response_\n\n### Expected results\n\nI would expect that the default kwarg `src=None` works.\n\n### Actual results\n\n```Python\r\n---------------------------------------------------------------------------\r\nValueError                                Traceback (most recent call last)\r\nCell In [2], line 3\r\n      1 import mne\r\n      2 info = mne.create_info([\"eeg1\"], sfreq=256)\r\n----> 3 raw = mne.simulation.simulate_raw(info)\r\n\r\nFile <decorator-gen-597>:12, in simulate_raw(info, stc, trans, src, bem, head_pos, mindist, interp, n_jobs, use_cps, forward, first_samp, max_iter, verbose)\r\n\r\nFile /opt/anaconda3/envs/bids_neu/lib/python3.11/site-packages/mne/simulation/raw.py:262, in simulate_raw(info, stc, trans, src, bem, head_pos, mindist, interp, n_jobs, use_cps, forward, first_samp, max_iter, verbose)\r\n    258     src = forward['src']\r\n    260 dev_head_ts, offsets = _check_head_pos(head_pos, info, first_samp, None)\r\n--> 262 src = _ensure_src(src, verbose=False)\r\n    263 if isinstance(bem, str):\r\n    264     bem = read_bem_solution(bem, verbose=False)\r\n\r\nFile <decorator-gen-115>:10, in _ensure_src(src, kind, extra, verbose)\r\n\r\nFile /opt/anaconda3/envs/bids_neu/lib/python3.11/site-packages/mne/source_space.py:2378, in _ensure_src(src, kind, extra, verbose)\r\n   2376     src = read_source_spaces(src, verbose=False)\r\n   2377 if not isinstance(src, SourceSpaces):\r\n-> 2378     raise ValueError('%s, got %s (type %s)' % (msg, src, type(src)))\r\n   2379 if kind is not None:\r\n   2380     if src.kind != kind and src.kind == 'mixed':\r\n\r\nValueError: src must be a string or instance of SourceSpaces, got None (type <class 'NoneType'>)\r\n```\r\n\n\n### Additional information\n\n```\r\nPlatform:         macOS-11.7-x86_64-i386-64bit\r\nPython:           3.11.0 | packaged by conda-forge | (main, Oct 25 2022, 06:24:51) [Clang 14.0.4 ]\r\nExecutable:       /opt/anaconda3/envs/bids_neu/bin/python\r\nCPU:              i386: 8 cores\r\nMemory:           16.0 GB\r\n\r\nmne:              1.2.2\r\nnumpy:            1.23.4 {unknown linalg bindings (threadpoolctl module not found: No module named 'threadpoolctl')}\r\nscipy:            1.9.3\r\nmatplotlib:       3.6.2 {backend=module://matplotlib_inline.backend_inline}\r\n\r\nsklearn:          Not found\r\nnumba:            Not found\r\nnibabel:          4.0.2\r\nnilearn:          Not found\r\ndipy:             Not found\r\nopenmeeg:         Not found\r\ncupy:             Not found\r\npandas:           1.5.1\r\npyvista:          Not found\r\npyvistaqt:        Not found\r\nipyvtklink:       Not found\r\nvtk:              Not found\r\nqtpy:             Not found\r\nipympl:           Not found\r\npyqtgraph:        Not found\r\npooch:            v1.6.0\r\n\r\nmne_bids:         0.11.1\r\nmne_nirs:         Not found\r\nmne_features:     Not found\r\nmne_qt_browser:   Not found\r\nmne_connectivity: Not found\r\nmne_icalabel:     Not found\r\n```\r\n", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/11323/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/11323/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/11321", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/11321/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/11321/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/11321/events", "html_url": "https://github.com/mne-tools/mne-python/issues/11321", "id": 1446713853, "node_id": "I_kwDOABPcUM5WOxn9", "number": 11321, "title": "verbose=False is sometimes ignored", "user": {"login": "sam-s", "id": 1596894, "node_id": "MDQ6VXNlcjE1OTY4OTQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1596894?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sam-s", "html_url": "https://github.com/sam-s", "followers_url": "https://api.github.com/users/sam-s/followers", "following_url": "https://api.github.com/users/sam-s/following{/other_user}", "gists_url": "https://api.github.com/users/sam-s/gists{/gist_id}", "starred_url": "https://api.github.com/users/sam-s/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sam-s/subscriptions", "organizations_url": "https://api.github.com/users/sam-s/orgs", "repos_url": "https://api.github.com/users/sam-s/repos", "events_url": "https://api.github.com/users/sam-s/events{/privacy}", "received_events_url": "https://api.github.com/users/sam-s/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2022-11-13T03:38:53Z", "updated_at": "2022-11-14T22:34:55Z", "closed_at": "2022-11-14T22:34:55Z", "author_association": "NONE", "active_lock_reason": null, "body": "### Description of the problem\r\n\r\nI get `Adding metadata with 3 columns` despite passing `verbose=False` to `mne.Epochs`.\r\nAlas, I cannot _stably_ reproduce it.\r\nHowever, I see that `BaseEpochs.__init__` in `mne/epochs.py` passes `verbose=False` to `GetEpochsMixin.metadata.fset` instead of its own argument `verbose`.\r\nThis seems wrong.\r\n\r\n### Steps to reproduce\r\n\r\n\r\nAlas, I cannot _stably_ reproduce it.\r\n\r\n\r\n### Link to data\r\n\r\n_No response_\r\n\r\n### Expected results\r\n\r\nno output\r\n\r\n### Actual results\r\n\r\n```\r\nAdding metadata with 3 columns\r\n```\r\n\r\n### Additional information\r\n\r\nPlatform:         Linux-6.0.6-76060006-generic-x86_64-with-glibc2.35\r\nPython:           3.10.6 (main, Nov  2 2022, 18:53:38) [GCC 11.3.0]\r\nExecutable:       /usr/bin/python3\r\nCPU:              x86_64: 8 cores\r\nMemory:           15.3 GB\r\n\r\nmne:              1.2.1\r\nnumpy:            1.23.4 {OpenBLAS 0.3.20 with 8 threads}\r\nscipy:            1.9.3\r\nmatplotlib:       3.6.2 {backend=module://matplotlib_inline.backend_inline}\r\n\r\nsklearn:          1.1.3\r\nnumba:            Not found\r\nnibabel:          Not found\r\nnilearn:          Not found\r\ndipy:             Not found\r\nopenmeeg:         Not found\r\ncupy:             Not found\r\npandas:           1.5.1\r\npyvista:          Not found\r\npyvistaqt:        Not found\r\nipyvtklink:       Not found\r\nvtk:              Not found\r\nqtpy:             2.3.0 {PyQt5=5.15.3}\r\nipympl:           Not found\r\npyqtgraph:        Not found\r\npooch:            v1.6.0\r\n\r\nmne_bids:         Not found\r\nmne_nirs:         Not found\r\nmne_features:     Not found\r\nmne_qt_browser:   Not found\r\nmne_connectivity: 0.4.0\r\nmne_icalabel:     Not found\r\n", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/11321/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/11321/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/11320", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/11320/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/11320/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/11320/events", "html_url": "https://github.com/mne-tools/mne-python/issues/11320", "id": 1446485033, "node_id": "I_kwDOABPcUM5WN5wp", "number": 11320, "title": "fontawesome icons not displaying correctly", "user": {"login": "hoechenberger", "id": 2046265, "node_id": "MDQ6VXNlcjIwNDYyNjU=", "avatar_url": "https://avatars.githubusercontent.com/u/2046265?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hoechenberger", "html_url": "https://github.com/hoechenberger", "followers_url": "https://api.github.com/users/hoechenberger/followers", "following_url": "https://api.github.com/users/hoechenberger/following{/other_user}", "gists_url": "https://api.github.com/users/hoechenberger/gists{/gist_id}", "starred_url": "https://api.github.com/users/hoechenberger/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hoechenberger/subscriptions", "organizations_url": "https://api.github.com/users/hoechenberger/orgs", "repos_url": "https://api.github.com/users/hoechenberger/repos", "events_url": "https://api.github.com/users/hoechenberger/events{/privacy}", "received_events_url": "https://api.github.com/users/hoechenberger/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 40091538, "node_id": "MDU6TGFiZWw0MDA5MTUzOA==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/DOC", "name": "DOC", "color": "009800", "default": false, "description": null}, {"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2022-11-12T15:02:18Z", "updated_at": "2022-11-16T01:04:12Z", "closed_at": "2022-11-16T01:04:12Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "\r\nhttps://mne.tools/dev/install/installers.html\r\n\r\n<img width=\"669\" alt=\"Screenshot 2022-11-12 at 16 01 25\" src=\"https://user-images.githubusercontent.com/2046265/201480264-47d32a2a-2f70-4da3-b7de-91c29bec6340.png\">\r\n", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/11320/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/11320/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/11316", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/11316/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/11316/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/11316/events", "html_url": "https://github.com/mne-tools/mne-python/issues/11316", "id": 1444060068, "node_id": "I_kwDOABPcUM5WEpuk", "number": 11316, "title": "Missing frame of head", "user": {"login": "DarthSaddest", "id": 101050380, "node_id": "U_kgDOBgXoDA", "avatar_url": "https://avatars.githubusercontent.com/u/101050380?v=4", "gravatar_id": "", "url": "https://api.github.com/users/DarthSaddest", "html_url": "https://github.com/DarthSaddest", "followers_url": "https://api.github.com/users/DarthSaddest/followers", "following_url": "https://api.github.com/users/DarthSaddest/following{/other_user}", "gists_url": "https://api.github.com/users/DarthSaddest/gists{/gist_id}", "starred_url": "https://api.github.com/users/DarthSaddest/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/DarthSaddest/subscriptions", "organizations_url": "https://api.github.com/users/DarthSaddest/orgs", "repos_url": "https://api.github.com/users/DarthSaddest/repos", "events_url": "https://api.github.com/users/DarthSaddest/events{/privacy}", "received_events_url": "https://api.github.com/users/DarthSaddest/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 9, "created_at": "2022-11-10T14:59:22Z", "updated_at": "2022-11-16T10:00:25Z", "closed_at": "2022-11-10T17:05:28Z", "author_association": "NONE", "active_lock_reason": null, "body": "### Description of the problem\r\nThe spatial legend in the top-right of a PSD plot shall include the frame of a head! Which is not in my case.\r\n\r\n### Steps to reproduce\r\n\r\n* Read in the raw Brainvision files corresponding to the film task from the [**sub-01/ses-iemu/ieeg/** directory](https://openneuro.org/datasets/ds003688/versions/1.0.7) \r\n* Remove bad channels and non-EEG channels with aid of `channels.tsv`.\r\n* Load the montage from `electrodes.tsv` into `raw`. A warning is displayed: `RuntimeWarning: Fiducial point nasion not found, assuming identity unknown to head transformation`.\r\n* On querying `raw.get_montage().get_positions()`, the output is:`{'ch_pos': OrderedDict([('AR1', array([ 22.42,  23.64, -31.74])),\r\n              ('AR2', array([ 25.334,  23.354, -31.654])),\r\n              ('AR3', array([ 31.334,  22.954, -32.054])),\r\n              ('AR4', array([ 37.134,  22.354, -32.454])),\r\n              ('AR5', array([ 42.934,  21.954, -32.854])),\r\n              ('AR6', array([ 48.968,  21.521, -33.121])),\r\n              ('AR7', array([ 54.734,  21.154, -33.454])),\r\n              ('AR9', array([ 66.668,  20.621, -34.788])),\r\n              ('AHR1', array([ 26.134,  15.354, -36.454])),\r\n              ('AHR2', array([ 28.134,  15.354, -36.454])),\r\n              ('AHR3', array([ 34.634,  14.354, -34.954])),\r\n              ('AHR4', array([ 40.356,  13.465, -33.676])),\r\n              ('AHR5', array([ 46.225,  12.627, -32.273])),\r\n              ('AHR6', array([ 51.801,  11.799, -30.899])),\r\n              ('AHR7', array([ 57.468,  10.91 , -30.01 ])),\r\n              ('AHR8', array([ 63.579,  10.243, -28.788])),\r\n              ('AHR9', array([ 69.134,   9.354, -27.454])),\r\n              ('PHR1', array([ 28.706,  -5.646, -24.597])),\r\n              ('PHR2', array([ 31.634,  -6.146, -24.954])),\r\n              ('PHR3', array([ 37.734,  -5.846, -25.454])),\r\n              ('PHR4', array([ 43.468,  -6.146, -26.121])),\r\n              ('PHR5', array([ 49.634,  -5.646, -26.454])),\r\n              ('PHR6', array([ 55.468,  -5.812, -26.621])),\r\n              ('PHR7', array([ 61.634,  -5.646, -26.454])),\r\n              ('PHR8', array([ 67.596,  -6.261, -26.07 ])),\r\n              ('PHR9', array([ 73.075,  -6.587, -25.984])),\r\n              ('ITR1', array([ 40.968,   5.521, -40.454])),\r\n              ('ITR2', array([ 44.134,   5.354, -39.454])),\r\n              ('ITR3', array([ 48.134,   4.354, -37.454])),\r\n              ('ITR4', array([ 51.134,   3.354, -36.454])),\r\n              ('ITR5', array([ 54.134,   3.354, -34.454])),\r\n              ('ITR6', array([ 57.134,   3.354, -33.454])),\r\n              ('ITR7', array([ 60.134,   2.354, -31.454])),\r\n              ('ITR8', array([ 63.134,   2.354, -30.454])),\r\n              ('ITR9', array([ 67.134,   2.354, -28.454])),\r\n              ('ITR10', array([ 70.134,   1.354, -26.454])),\r\n              ('MFR1', array([ 13.134,  70.354, -15.454])),\r\n              ('MFR2', array([ 14.134,  70.354, -11.454])),\r\n              ('MFR3', array([15.134, 70.354, -8.454])),\r\n              ('MFR4', array([16.134, 70.354, -5.454])),\r\n              ('MFR5', array([18.134, 70.354, -2.454])),\r\n              ('MFR6', array([19.134, 70.354,  1.546])),\r\n              ('MFR7', array([20.134, 69.354,  4.546])),\r\n              ('MFR8', array([22.134, 69.354,  8.546])),\r\n              ('MFR9', array([23.134, 69.354, 11.546])),\r\n              ('MFR10', array([24.134, 69.354, 14.546])),\r\n              ('MFR11', array([25.134, 69.354, 17.546])),\r\n              ('MFR12', array([26.134, 69.354, 20.546])),\r\n              ('MFR13', array([27.134, 69.354, 23.546])),\r\n              ('MFR14', array([28.134, 68.354, 27.546])),\r\n              ('MFR15', array([29.134, 68.354, 30.546])),\r\n              ('FOR1', array([ 22.134,  67.354, -20.454])),\r\n              ('FOR2', array([ 22.134,  66.354, -17.454])),\r\n              ('FOR3', array([ 22.134,  65.354, -13.454])),\r\n              ('FOR4', array([23.134, 65.354, -9.454])),\r\n              ('FOR5', array([24.134, 65.354, -6.454])),\r\n              ('FOR6', array([25.134, 65.354, -2.454])),\r\n              ('FOR7', array([25.134, 64.354,  0.546])),\r\n              ('FOR8', array([26.134, 64.354,  4.546])),\r\n              ('FOR9', array([26.134, 64.354,  7.546])),\r\n              ('FOR10', array([27.134, 64.354, 11.546])),\r\n              ('FOR11', array([27.134, 63.354, 14.546])),\r\n              ('FOR12', array([28.134, 63.354, 18.546])),\r\n              ('FOR13', array([28.134, 63.354, 21.546])),\r\n              ('FOR14', array([29.134, 63.354, 24.546])),\r\n              ('FOR15', array([29.134, 62.354, 28.546])),\r\n              ('MFL1', array([  6.134,  75.354, -15.454])),\r\n              ('MFL2', array([  6.134,  75.354, -12.454])),\r\n              ('MFL3', array([ 5.134, 75.354, -8.454])),\r\n              ('MFL4', array([ 4.134, 75.354, -4.454])),\r\n              ('MFL5', array([ 2.134, 74.354,  1.546])),\r\n              ('MFL6', array([ 1.134, 74.354,  4.546])),\r\n              ('MFL7', array([ 1.134, 74.354,  7.546])),\r\n              ('MFL8', array([ 0.134, 73.354, 11.546])),\r\n              ('MFL9', array([-0.866, 73.354, 15.546])),\r\n              ('MFL10', array([-1.866, 73.354, 18.546])),\r\n              ('MFL11', array([-1.866, 72.354, 22.546])),\r\n              ('MFL12', array([-2.866, 72.354, 24.546])),\r\n              ('MFL13', array([-3.866, 72.354, 28.546])),\r\n              ('MFL14', array([-4.866, 71.354, 32.546])),\r\n              ('ACR1', array([16.134, 56.354, -8.454])),\r\n              ('ACR2', array([16.134, 56.354, -5.454])),\r\n              ('ACR3', array([17.134, 56.354, -2.454])),\r\n              ('ACR4', array([18.134, 56.354,  1.546])),\r\n              ('ACR5', array([19.134, 56.354,  5.546])),\r\n              ('ACR6', array([19.134, 56.354,  9.546])),\r\n              ('ACR7', array([20.134, 56.354, 11.546])),\r\n              ('ACR8', array([21.134, 56.354, 15.546])),\r\n              ('ACR9', array([21.134, 56.354, 18.546])),\r\n              ('ACR10', array([22.134, 56.354, 22.546])),\r\n              ('ACR11', array([22.134, 56.354, 25.546])),\r\n              ('ACR12', array([23.134, 56.354, 29.546])),\r\n              ('AHL1', array([-22.066,  14.354, -32.854])),\r\n              ('AHL2', array([-24.866,  15.354, -32.621])),\r\n              ('AHL3', array([-30.58 ,  17.212, -32.883])),\r\n              ('AHL4', array([-36.466,  18.554, -32.454])),\r\n              ('AHL5', array([-42.199,  20.188, -32.621])),\r\n              ('AHL6', array([-47.699,  22.354, -32.454])),\r\n              ('AHL7', array([-53.366,  23.854, -31.954])),\r\n              ('AHL8', array([-59.366,  25.354, -31.954])),\r\n              ('AHL9', array([-65.097,  26.97 , -31.762]))]),\r\n 'coord_frame': 'head',\r\n 'nasion': array([ 0.       , 66.3410594,  0.       ]),\r\n 'lpa': array([-66.3410594,   0.       ,   0.       ]),\r\n 'rpa': array([66.3410594,  0.       ,  0.       ]),\r\n 'hsp': None,\r\n 'hpi': None}`.\r\n* `raw.plot_psd(fmax=100)` generates a multi-color plot corresponding to the electrodes. At the top left is the topo-legend but the frame of the head is missing!\r\n\r\n### Link to data\r\n\r\n[Dataset](https://openneuro.org/datasets/ds003688/versions/1.0.7)\r\n\r\n### Expected results\r\n\r\nThe head-frame ought to be visible!\r\n\r\n### Actual results\r\n\r\n[Screenshot](https://ibb.co/y6Kwmhm)\r\n\r\n### Additional information\r\n\r\nPlatform:         Windows-10-10.0.22000-SP0\r\nPython:           3.9.7 (tags/v3.9.7:1016ef3, Aug 30 2021, 20:19:38) [MSC v.1929 64 bit (AMD64)]\r\nExecutable:       C:\\Users\\DarthSaddest\\AppData\\Local\\Programs\\Python\\Python39\\python.exe\r\nCPU:              Intel64 Family 6 Model 140 Stepping 1, GenuineIntel: 8 cores\r\nMemory:           7.7 GB\r\nmne:              1.2.1\r\nnumpy:            1.22.3 {unknown linalg bindings (threadpoolctl module not found: No module named 'threadpoolctl')}\r\nscipy:            1.9.3\r\nmatplotlib:       3.6.2 {backend=module://matplotlib_inline.backend_inline}\r\nsklearn:          Not found\r\nnumba:            Not found\r\nnibabel:          Not found\r\nnilearn:          Not found\r\ndipy:             Not found\r\nopenmeeg:         Not found\r\ncupy:             Not found\r\npandas:           1.5.1\r\npyvista:          Not found\r\npyvistaqt:        Not found\r\nipyvtklink:       Not found\r\nvtk:              Not found\r\nqtpy:             Not found\r\nipympl:           Not found\r\npyqtgraph:        Not found\r\npooch:            v1.6.0\r\nmne_bids:         0.11.1\r\nmne_nirs:         Not found\r\nmne_features:     Not found\r\nmne_qt_browser:   Not found\r\nmne_connectivity: Not found\r\nmne_icalabel:     Not found", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/11316/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/11316/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/11312", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/11312/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/11312/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/11312/events", "html_url": "https://github.com/mne-tools/mne-python/issues/11312", "id": 1442509820, "node_id": "I_kwDOABPcUM5V-vP8", "number": 11312, "title": "epoch.plot_image()  for emg channels results in error", "user": {"login": "holdf1", "id": 108234183, "node_id": "U_kgDOBnOFxw", "avatar_url": "https://avatars.githubusercontent.com/u/108234183?v=4", "gravatar_id": "", "url": "https://api.github.com/users/holdf1", "html_url": "https://github.com/holdf1", "followers_url": "https://api.github.com/users/holdf1/followers", "following_url": "https://api.github.com/users/holdf1/following{/other_user}", "gists_url": "https://api.github.com/users/holdf1/gists{/gist_id}", "starred_url": "https://api.github.com/users/holdf1/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/holdf1/subscriptions", "organizations_url": "https://api.github.com/users/holdf1/orgs", "repos_url": "https://api.github.com/users/holdf1/repos", "events_url": "https://api.github.com/users/holdf1/events{/privacy}", "received_events_url": "https://api.github.com/users/holdf1/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2022-11-09T17:51:36Z", "updated_at": "2022-11-17T15:52:54Z", "closed_at": "2022-11-17T15:52:54Z", "author_association": "NONE", "active_lock_reason": null, "body": "### Description of the problem\n\nwhen epochs.plot_image() is applied to emg channels with default parameters a somewhat cryptic error message is thrown (see Actual results below)\r\n\n\n### Steps to reproduce\n\n```Python\nepoch.plot_image('some_emg_channel')\n```\n\n\n### Link to data\n\n_No response_\n\n### Expected results\n\nplot with evoked\n\n### Actual results\n\n---------------------------------------------------------------------------\r\nValueError                                Traceback (most recent call last)\r\n\r\n----> 1 epos.plot_image('other1', vmax =100, vmin=0,evoked=True)\r\n\r\n~/site-packages/mne/epochs.py in plot_image(self, picks, sigma, vmin, vmax, colorbar, order, show, units, scalings, cmap, fig, axes, overlay_times, combine, group_by, evoked, ts_args, title, clear)\r\n   1229                    overlay_times=None, combine=None, group_by=None,\r\n   1230                    evoked=True, ts_args=None, title=None, clear=False):\r\n-> 1231         return plot_epochs_image(self, picks=picks, sigma=sigma, vmin=vmin,\r\n   1232                                  vmax=vmax, colorbar=colorbar, order=order,\r\n   1233                                  show=show, units=units, scalings=scalings,\r\n\r\n~/site-packages/mne/viz/epochs.py in plot_epochs_image(epochs, picks, sigma, vmin, vmax, colorbar, order, show, units, scalings, cmap, fig, axes, overlay_times, combine, group_by, evoked, ts_args, title, clear)\r\n    326 \r\n    327         # plot the image\r\n--> 328         this_fig = _plot_epochs_image(\r\n    329             this_group_dict['image'], epochs=this_group_dict['epochs'],\r\n    330             picks=picks, colorbar=colorbar, vmin=vmin, vmax=vmax, cmap=cmap,\r\n\r\n~/site-packages/mne/viz/epochs.py in _plot_epochs_image(image, style_axes, epochs, picks, vmin, vmax, colorbar, show, unit, cmap, ax, overlay_times, title, evoked, ts_args, combine, combine_given, norm)\r\n    536         pass_combine = (combine if combine_given else None)\r\n    537         _picks = [0] if len(picks) == 1 else None  # prevent applying GFP\r\n--> 538         plot_compare_evokeds({'cond': list(epochs.iter_evoked(copy=False))},\r\n    539                              picks=_picks, axes=ax['evoked'],\r\n    540                              combine=pass_combine, **ts_args)\r\n\r\n~/site-packages/mne/viz/evoked.py in plot_compare_evokeds(evokeds, picks, colors, linestyles, styles, cmap, vlines, ci, truncate_yaxis, truncate_xaxis, ylim, invert_y, show_sensors, legend, split_legend, axes, title, show, combine, sphere, time_unit)\r\n   2373         elif isinstance(axes, plt.Axes):\r\n   2374             axes = [axes]\r\n-> 2375             _validate_if_list_of_axes(axes, obligatory_len=len(ch_types))\r\n   2376 \r\n   2377     if len(ch_types) > 1:\r\n\r\n~/site-packages/mne/viz/utils.py in _validate_if_list_of_axes(axes, obligatory_len, name)\r\n    253                                      extra='if not None')\r\n    254         if len(axes) != obligatory_len:\r\n--> 255             raise ValueError(\r\n    256                 f'{name} must be an array-like of length {obligatory_len}, '\r\n    257                 f'but the length is {len(axes)}')\r\n\r\nValueError: axes must be an array-like of length 0, but the length is 1\r\n\n\n### Additional information\n\nPlatform:         Linux-5.4.0-131-generic-x86_64-with-glibc2.31\r\nPython:           3.9.7 (default, Sep 16 2021, 13:09:58)  [GCC 7.5.0]\r\nCPU:              x86_64: 8 cores\r\nmne:              1.2.1\r\nnumpy:            1.21.2 {MKL 2021.4-Product with 4 threads}\r\nscipy:            1.7.1\r\nmatplotlib:       3.4.3 {backend=module://matplotlib_inline.backend_inline}\r\n\r\nsklearn:          1.0.1\r\ncupy:             8.3.0\r\npandas:           1.3.4\r\nqtpy:             1.10.0 {PyQt5=5.9.7}\r\npooch:            v1.6.0", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/11312/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/11312/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/11299", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/11299/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/11299/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/11299/events", "html_url": "https://github.com/mne-tools/mne-python/issues/11299", "id": 1434425133, "node_id": "I_kwDOABPcUM5Vf5ct", "number": 11299, "title": "find_bads_muscle() can't find sensor positions", "user": {"login": "skjerns", "id": 14980558, "node_id": "MDQ6VXNlcjE0OTgwNTU4", "avatar_url": "https://avatars.githubusercontent.com/u/14980558?v=4", "gravatar_id": "", "url": "https://api.github.com/users/skjerns", "html_url": "https://github.com/skjerns", "followers_url": "https://api.github.com/users/skjerns/followers", "following_url": "https://api.github.com/users/skjerns/following{/other_user}", "gists_url": "https://api.github.com/users/skjerns/gists{/gist_id}", "starred_url": "https://api.github.com/users/skjerns/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/skjerns/subscriptions", "organizations_url": "https://api.github.com/users/skjerns/orgs", "repos_url": "https://api.github.com/users/skjerns/repos", "events_url": "https://api.github.com/users/skjerns/events{/privacy}", "received_events_url": "https://api.github.com/users/skjerns/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2022-11-03T10:25:51Z", "updated_at": "2022-11-03T15:27:40Z", "closed_at": "2022-11-03T15:27:40Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "### Description of the problem\r\n\r\nWhen using the newly introduced `ica.find_bads_muscle` it seems like the function cannot find the sensor positions, even though they should be included in the file and/or be accessible to MNE generally by default.\r\n\r\n```Python\r\nValueError: The following electrodes have overlapping positions, which causes problems during visualization: [... list of all 306 channels]\r\n```\r\n\r\n\r\n### Steps to reproduce\r\n\r\n```Python\r\nimport os\r\nimport mne\r\nfrom mne.preprocessing import ICA\r\n\r\nsample_data_folder = mne.datasets.sample.data_path()\r\nsample_data_raw_file = os.path.join(sample_data_folder, 'MEG', 'sample',\r\n                                    'sample_audvis_raw.fif')\r\nraw = mne.io.read_raw_fif(sample_data_raw_file,  preload=True)\r\nraw.resample(100)\r\nica =ICA(40, method='picard')\r\nica.fit(raw)\r\n\r\nica.find_bads_muscle(raw)\r\n```\r\n\r\n### Expected results\r\n\r\nMNE automatically finds the channel montage, as is done when plotting the sensor positions via `raw.plot_sensors(\"3d\")`\r\n\r\nBut may I'm also not applying the function correct. In this case, please let me know.\r\n\r\n### Actual results\r\n\r\n```Python\r\n\r\n  File \"\u00dc:\\analysis\\untitled1.py\", line 19, in <module>\r\n    ica.find_bads_muscle(raw)\r\n\r\n  File \"<decorator-gen-571>\", line 12, in find_bads_muscle\r\n\r\n  File \"\u00dc:\\\\anaconda3\\lib\\site-packages\\mne\\preprocessing\\ica.py\", line 1790, in find_bads_muscle\r\n    pos = _find_topomap_coords(inst.info, picks='data', sphere=sphere)\r\n\r\n  File \"\u00dc:\\anaconda3\\lib\\site-packages\\mne\\channels\\layout.py\", line 677, in _find_topomap_coords\r\n    pos = _auto_topomap_coords(\r\n\r\n  File \"\u00dc:\\anaconda3\\lib\\site-packages\\mne\\channels\\layout.py\", line 776, in _auto_topomap_coords\r\n    raise ValueError('The following electrodes have overlapping positions,'\r\n\r\nValueError: The following electrodes have overlapping positions, which causes problems during visualization: [... list of all 306 channels]\r\n```\r\n\r\n\r\n### Additional information\r\n```\r\nPlatform:         Windows-10-10.0.19043-SP0\r\nPython:           3.9.7 (default, Sep 16 2021, 16:59:28) [MSC v.1916 64 bit (AMD64)]\r\nExecutable:      \u00dc:\\anaconda3\\python.exe\r\nCPU:              AMD64 Family 23 Model 113 Stepping 0, AuthenticAMD: 24 cores\r\nMemory:           31.9 GB\r\n\r\nmne:              1.2.1\r\nnumpy:            1.23.3 {OpenBLAS 0.3.20 with 24 threads}\r\nscipy:            1.9.2\r\nmatplotlib:       3.5.1 {backend=Qt5Agg}\r\n```", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/11299/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/11299/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/11297", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/11297/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/11297/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/11297/events", "html_url": "https://github.com/mne-tools/mne-python/issues/11297", "id": 1433942169, "node_id": "I_kwDOABPcUM5VeDiZ", "number": 11297, "title": "compute_psd: ValueError when n_jobs=-1 and only 1 channel", "user": {"login": "sam-s", "id": 1596894, "node_id": "MDQ6VXNlcjE1OTY4OTQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1596894?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sam-s", "html_url": "https://github.com/sam-s", "followers_url": "https://api.github.com/users/sam-s/followers", "following_url": "https://api.github.com/users/sam-s/following{/other_user}", "gists_url": "https://api.github.com/users/sam-s/gists{/gist_id}", "starred_url": "https://api.github.com/users/sam-s/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sam-s/subscriptions", "organizations_url": "https://api.github.com/users/sam-s/orgs", "repos_url": "https://api.github.com/users/sam-s/repos", "events_url": "https://api.github.com/users/sam-s/events{/privacy}", "received_events_url": "https://api.github.com/users/sam-s/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2022-11-03T00:17:16Z", "updated_at": "2022-11-03T16:36:00Z", "closed_at": "2022-11-03T16:36:00Z", "author_association": "NONE", "active_lock_reason": null, "body": "### Description of the problem\n\nwhen [`compute_psd`](https://mne.tools/stable/generated/mne.io.Raw.html) is passed `n_jobs=-1` and the instance contains only _one_ channel, the method fails.\n\n### Steps to reproduce\n\n```Python\nimport numpy as np\r\nimport mne\r\ndata = np.random.randn(1, 4096) \r\ninfo = mne.create_info(ch_names=[\"EEG 01\"], ch_types=\"eeg\")\r\nraw = mne.io.RawArray(data, info)\r\nspectrum = raw.compute_psd(method=\"welch\", n_jobs=-1)\r\n```\n```\n\n\n### Link to data\n\n_No response_\n\n### Expected results\n\nno error\n\n### Actual results\n\n```\r\nValueError: all the input arrays must have same number of dimensions, but the array at index 0 has 2 dimension(s) and the array at index 1 has 1 dimension(s)\r\n```\n\n### Additional information\n\nPlatform:         Linux-5.19.16-76051916-generic-x86_64-with-glibc2.35\r\nPython:           3.10.6 (main, Aug 10 2022, 11:40:04) [GCC 11.3.0]\r\nExecutable:       /usr/bin/python3\r\nCPU:              x86_64: 8 cores\r\nMemory:           15.3 GB\r\n\r\nmne:              1.2.1\r\nnumpy:            1.23.4 {OpenBLAS 0.3.20 with 8 threads}\r\nscipy:            1.9.3\r\nmatplotlib:       3.6.0 {backend=module://matplotlib_inline.backend_inline}\r\n\r\nsklearn:          1.1.3\r\nnumba:            Not found\r\nnibabel:          Not found\r\nnilearn:          Not found\r\ndipy:             Not found\r\nopenmeeg:         Not found\r\ncupy:             Not found\r\npandas:           1.5.1\r\npyvista:          Not found\r\npyvistaqt:        Not found\r\nipyvtklink:       Not found\r\nvtk:              Not found\r\nqtpy:             2.2.1 {PyQt5=5.15.3}\r\nipympl:           Not found\r\npyqtgraph:        Not found\r\npooch:            v1.6.0\r\n\r\nmne_bids:         Not found\r\nmne_nirs:         Not found\r\nmne_features:     Not found\r\nmne_qt_browser:   Not found\r\nmne_connectivity: Not found\r\nmne_icalabel:     Not found", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/11297/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/11297/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/11295", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/11295/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/11295/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/11295/events", "html_url": "https://github.com/mne-tools/mne-python/issues/11295", "id": 1433748337, "node_id": "I_kwDOABPcUM5VdUNx", "number": 11295, "title": "Error in cross_val_multiscore", "user": {"login": "jiivana", "id": 43410394, "node_id": "MDQ6VXNlcjQzNDEwMzk0", "avatar_url": "https://avatars.githubusercontent.com/u/43410394?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jiivana", "html_url": "https://github.com/jiivana", "followers_url": "https://api.github.com/users/jiivana/followers", "following_url": "https://api.github.com/users/jiivana/following{/other_user}", "gists_url": "https://api.github.com/users/jiivana/gists{/gist_id}", "starred_url": "https://api.github.com/users/jiivana/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jiivana/subscriptions", "organizations_url": "https://api.github.com/users/jiivana/orgs", "repos_url": "https://api.github.com/users/jiivana/repos", "events_url": "https://api.github.com/users/jiivana/events{/privacy}", "received_events_url": "https://api.github.com/users/jiivana/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 10, "created_at": "2022-11-02T20:29:24Z", "updated_at": "2022-11-04T15:55:12Z", "closed_at": "2022-11-04T15:55:11Z", "author_association": "NONE", "active_lock_reason": null, "body": "### Description of the problem\r\n\r\nI am following the example on temporal decoding: https://mne.tools/stable/auto_tutorials/machine-learning/50_decoding.html#temporal-decoding to classify stimuli in three categories. The example runs on my Windows machine fine, but when I add PCA and/or CSP to the pipeline I get errors.\r\n\r\n### Steps to reproduce\r\n\r\n```Python\r\n# We will train the classifier on all left visual vs auditory trials on MEG\r\n\r\ncsp = CSP(n_components=5, norm_trace=False)\r\nclf = make_pipeline(StandardScaler(),\r\n    UnsupervisedSpatialFilter(PCA(16), average=False),\r\n    csp,\r\n    LogisticRegression(solver='liblinear')\r\n)\r\n\r\ntime_decod = SlidingEstimator(\r\n    clf, n_jobs=1, verbose=False)\r\n\r\n\r\n# here we use cv=3 just for speed\r\nscores = cross_val_multiscore(time_decod, X, y, cv=3, n_jobs=1,verbose=False)\r\n\r\n# Mean scores across cross-validation splits\r\nscores = np.mean(scores, axis=0)\r\n```\r\n\r\n\r\n### Link to data\r\n\r\n_No response_\r\n\r\n### Expected results\r\n\r\nI expect the code to work..?\r\n\r\n### Actual results\r\n\r\nTraceback (most recent call last):\r\n\r\n  File \"XX\\Python\\Python39\\site-packages\\mne\\decoding\\search_light.py\", line 80, in fit\r\n    estimators = parallel(\r\n\r\n  File \"XX\\\\Python\\Python39\\site-packages\\mne\\decoding\\search_light.py\", line 81, in <genexpr>\r\n    p_func(self.base_estimator, split, y, pb.subset(pb_idx),\r\n\r\n  File \"XX\\\\Python\\Python39\\site-packages\\mne\\decoding\\search_light.py\", line 318, in _sl_fit\r\n    est.fit(X[..., ii], y, **fit_params)\r\n\r\n  File \"C:\\ProgramData\\Anaconda3\\envs\\mne\\lib\\site-packages\\sklearn\\pipeline.py\", line 390, in fit\r\n    Xt = self._fit(X, y, **fit_params_steps)\r\n\r\n  File \"C:\\ProgramData\\Anaconda3\\envs\\mne\\lib\\site-packages\\sklearn\\pipeline.py\", line 348, in _fit\r\n    X, fitted_transformer = fit_transform_one_cached(\r\n\r\n  File \"C:\\ProgramData\\Anaconda3\\envs\\mne\\lib\\site-packages\\joblib\\memory.py\", line 349, in __call__\r\n    return self.func(*args, **kwargs)\r\n\r\n  File \"C:\\ProgramData\\Anaconda3\\envs\\mne\\lib\\site-packages\\sklearn\\pipeline.py\", line 893, in _fit_transform_one\r\n    res = transformer.fit_transform(X, y, **fit_params)\r\n\r\n  File \"XX\\Python\\Python39\\site-packages\\mne\\decoding\\transformer.py\", line 628, in fit_transform\r\n    return self.fit(X).transform(X)\r\n\r\n  File \"XX\\Python\\Python39\\site-packages\\mne\\decoding\\transformer.py\", line 606, in fit\r\n    n_epochs, n_channels, n_times = X.shape\r\n\r\nValueError: not enough values to unpack (expected 3, got 2)\r\n\r\n\r\nDuring handling of the above exception, another exception occurred:\r\n\r\nTraceback (most recent call last):\r\n\r\n  File \"XX\", line 99, in <module>\r\n    scores = cross_val_multiscore(time_decod, X, y, cv=3, n_jobs=1,verbose=False)\r\n\r\n  File \"<decorator-gen-469>\", line 10, in cross_val_multiscore\r\n\r\n  File \"XX\\Python\\Python39\\site-packages\\mne\\decoding\\base.py\", line 435, in cross_val_multiscore\r\n    scores = parallel(\r\n\r\n  File \"XX\\Python\\Python39\\site-packages\\mne\\decoding\\base.py\", line 436, in <genexpr>\r\n    p_func(\r\n\r\n  File \"XX\\Python\\Python39\\site-packages\\mne\\decoding\\base.py\", line 470, in _fit_and_score\r\n    estimator.fit(X_train, y_train, **fit_params)\r\n\r\n  File \"XX\\Python\\Python39\\site-packages\\mne\\decoding\\search_light.py\", line 80, in fit\r\n    estimators = parallel(\r\n\r\n  File \"X\\Python\\Python39\\site-packages\\mne\\utils\\progressbar.py\", line 157, in __exit__\r\n    os.remove(self._mmap_fname)\r\n\r\nPermissionError: [WinError 32] The process cannot access the file because it is being used by another process: 'XX\\AppData\\\\Local\\\\Temp\\\\tmp_mne_prog6xxe5_fn'\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/11295/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/11295/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/11288", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/11288/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/11288/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/11288/events", "html_url": "https://github.com/mne-tools/mne-python/issues/11288", "id": 1428888682, "node_id": "I_kwDOABPcUM5VKxxq", "number": 11288, "title": "add_volume_labels() method from mne.viz.get_brain_class() doesn't allow receiving a dict as legend", "user": {"login": "mcespedes99", "id": 65789733, "node_id": "MDQ6VXNlcjY1Nzg5NzMz", "avatar_url": "https://avatars.githubusercontent.com/u/65789733?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mcespedes99", "html_url": "https://github.com/mcespedes99", "followers_url": "https://api.github.com/users/mcespedes99/followers", "following_url": "https://api.github.com/users/mcespedes99/following{/other_user}", "gists_url": "https://api.github.com/users/mcespedes99/gists{/gist_id}", "starred_url": "https://api.github.com/users/mcespedes99/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mcespedes99/subscriptions", "organizations_url": "https://api.github.com/users/mcespedes99/orgs", "repos_url": "https://api.github.com/users/mcespedes99/repos", "events_url": "https://api.github.com/users/mcespedes99/events{/privacy}", "received_events_url": "https://api.github.com/users/mcespedes99/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2022-10-30T16:32:01Z", "updated_at": "2022-10-31T22:28:38Z", "closed_at": "2022-10-31T22:28:38Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "### Description of the problem\n\nHi,\r\n\r\nIn the MNE documentation for the add_volume_labels() method  from mne.viz.get_brain_class(), it's stated that you pass a dictionary to the legend option, which is actually implemented on the code. However, line 2475 from the _brain.py file actually does a wrong validation since it is set to `_validate_type(legend, (bool, None), 'legend')`; therefore, it actually doesn't allow using the dict option. It should be set to `validate_type(legend, (bool, None, dict), 'legend')` in order to make it work.\r\n\r\nBest,\r\nMauricio\n\n### Steps to reproduce\n\n```Python\nThis is the code I was using to reproduce:\r\n%matplotlib inline\r\nimport os.path as op\r\nimport mne\r\nimport numpy as np\r\n\r\nsample_data_folder = mne.datasets.sample.data_path()\r\nsubjects_dir = sample_data_folder / 'subjects'\r\n\r\nfname_aseg = op.join(subjects_dir, 'sample', 'mri', 'aseg.mgz')\r\nlabel_names = mne.get_volume_labels_from_aseg(fname_aseg)\r\n\r\nBrain2 = mne.viz.get_brain_class()\r\nbrain2 = Brain2('sample', hemi='both', surf='pial', alpha=0.2,\r\n              cortex='low_contrast', subjects_dir=subjects_dir, \r\n              size=(800, 600))\r\nplotargs = {\r\n    'bcolor':(0.5, 0.5, 0.5), \r\n    'border':False,\r\n    'size':(0.2, 0.6),\r\n    'loc':'upper left'\r\n}\r\nbrain2.add_volume_labels(aseg='aseg', labels=label_names, alpha=1, smooth=0, legend=plotargs)\n```\n\n\n### Link to data\n\n_No response_\n\n### Expected results\n\nThe legend is shown in the qt widget.\n\n### Actual results\n\nLegend is not shown and an error is displayed.\n\n### Additional information\n\nPlatform:         Linux-5.15.0-52-generic-x86_64-with-glibc2.35\r\nPython:           3.10.6 | packaged by conda-forge | (main, Aug 22 2022, 20:35:26) [GCC 10.4.0]\r\nExecutable:       /home/mcespedes/miniconda3/envs/mne/bin/python\r\nCPU:              x86_64: 8 cores\r\nMemory:           15.4 GB\r\n\r\nmne:              1.2.1\r\nnumpy:            1.23.4 {OpenBLAS 0.3.21 with 8 threads}\r\nscipy:            1.9.3\r\nmatplotlib:       3.6.0 {backend=module://matplotlib_inline.backend_inline}\r\n\r\nsklearn:          1.1.3\r\nnumba:            0.56.3\r\nnibabel:          4.0.2\r\nnilearn:          0.9.2\r\ndipy:             1.5.0\r\nopenmeeg:         Not found\r\ncupy:             Not found\r\npandas:           1.5.1\r\npyvista:          0.36.1 {OpenGL 4.6 (Core Profile) Mesa 22.0.5 via Mesa Intel(R) Xe Graphics (TGL GT2)}\r\npyvistaqt:        0.9.0\r\nipyvtklink:       0.2.2\r\nvtk:              9.2.2\r\nqtpy:             2.2.1 {PyQt5=5.15.6}\r\nipympl:           Not found\r\n...\r\nmne_features:     Not found\r\nmne_qt_browser:   0.4.0\r\nmne_connectivity: Not found\r\nmne_icalabel:     Not found", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/11288/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/11288/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/11274", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/11274/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/11274/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/11274/events", "html_url": "https://github.com/mne-tools/mne-python/issues/11274", "id": 1420763888, "node_id": "I_kwDOABPcUM5UryLw", "number": 11274, "title": "Selection of ICA components when plotting properties", "user": {"login": "mscheltienne", "id": 73893616, "node_id": "MDQ6VXNlcjczODkzNjE2", "avatar_url": "https://avatars.githubusercontent.com/u/73893616?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mscheltienne", "html_url": "https://github.com/mscheltienne", "followers_url": "https://api.github.com/users/mscheltienne/followers", "following_url": "https://api.github.com/users/mscheltienne/following{/other_user}", "gists_url": "https://api.github.com/users/mscheltienne/gists{/gist_id}", "starred_url": "https://api.github.com/users/mscheltienne/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mscheltienne/subscriptions", "organizations_url": "https://api.github.com/users/mscheltienne/orgs", "repos_url": "https://api.github.com/users/mscheltienne/repos", "events_url": "https://api.github.com/users/mscheltienne/events{/privacy}", "received_events_url": "https://api.github.com/users/mscheltienne/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2022-10-24T12:37:46Z", "updated_at": "2022-12-15T17:29:13Z", "closed_at": "2022-12-15T17:29:13Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "https://github.com/mne-tools/mne-python/blob/45d87fb0e5c34156c9568e04cd6ceef81140bed4/mne/viz/ica.py#L422-L423\r\n\r\nShouldn't this be `limit=min(5, ica.n_components_) if picks is None else ica.n_components_`?\r\nConsider an ICA fitted with 55 components on 57 EEG channels:\r\n\r\n```\r\nica.plot_properties(raw, picks=55)  # max is 54 since it picks on components\r\n```\r\n\r\nwill currently fail with `IndexError: index 55 is out of bounds for axis 1 with size 55`, a bit after the previous code snippet, here: https://github.com/mne-tools/mne-python/blob/45d87fb0e5c34156c9568e04cd6ceef81140bed4/mne/viz/ica.py#L459\r\n\r\nOverall, I think `limit` should be updated and the validity of the provided `picks` should be asserted at the beginning of this function, with an error message more informative. \r\n\r\nEDIT: Also, the use of `picks = _picks_to_idx(ica.info, picks, 'all')[:limit]` doesn't feel right as `_picks_to_idx` selects on channels and not components.", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/11274/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/11274/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/11264", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/11264/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/11264/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/11264/events", "html_url": "https://github.com/mne-tools/mne-python/issues/11264", "id": 1416565707, "node_id": "I_kwDOABPcUM5UbxPL", "number": 11264, "title": "mne.io.read_raw_fif  Error", "user": {"login": "AdFiFi", "id": 116166221, "node_id": "U_kgDOBuyOTQ", "avatar_url": "https://avatars.githubusercontent.com/u/116166221?v=4", "gravatar_id": "", "url": "https://api.github.com/users/AdFiFi", "html_url": "https://github.com/AdFiFi", "followers_url": "https://api.github.com/users/AdFiFi/followers", "following_url": "https://api.github.com/users/AdFiFi/following{/other_user}", "gists_url": "https://api.github.com/users/AdFiFi/gists{/gist_id}", "starred_url": "https://api.github.com/users/AdFiFi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/AdFiFi/subscriptions", "organizations_url": "https://api.github.com/users/AdFiFi/orgs", "repos_url": "https://api.github.com/users/AdFiFi/repos", "events_url": "https://api.github.com/users/AdFiFi/events{/privacy}", "received_events_url": "https://api.github.com/users/AdFiFi/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 17, "created_at": "2022-10-20T12:48:48Z", "updated_at": "2022-10-20T15:25:54Z", "closed_at": "2022-10-20T15:25:54Z", "author_association": "NONE", "active_lock_reason": null, "body": "### Description of the problem\n\n  File \"C:\\ProgramData\\Anaconda3\\lib\\site-packages\\mne\\io\\base.py\", line 1529, in plot\r\n    return plot_raw(self, events, duration, start, n_channels, bgcolor,\r\n  File \"<decorator-gen-274>\", line 12, in plot_raw\r\n  File \"C:\\ProgramData\\Anaconda3\\lib\\site-packages\\mne\\viz\\raw.py\", line 237, in plot_raw\r\n    duration = min(raw.times[-1], float(duration))\r\n  File \"C:\\ProgramData\\Anaconda3\\lib\\site-packages\\mne\\io\\base.py\", line 1548, in times\r\n    out = _arange_div(self.n_times, float(self.info['sfreq']))\r\nTypeError: expected dtype object, got 'numpy.dtype[float64]'\r\npython-BaseException\r\nBackend QtAgg is interactive backend. Turning interactive mode on.\r\n\n\n### Steps to reproduce\n\n```Python\nimport mne\r\nfrom mne.datasets import sample\r\nimport matplotlib.pyplot as plt\r\ndata_path = sample.data_path()\r\nfname = data_path / 'MEG' / 'sample' / 'sample_audvis_raw.fif'\r\nraw = mne.io.read_raw_fif(fname)\n```\n\n\n### Link to data\n\n_No response_\n\n### Expected results\n\ndata\n\n### Actual results\n\n File \"C:\\ProgramData\\Anaconda3\\lib\\site-packages\\mne\\io\\base.py\", line 1529, in plot\r\n    return plot_raw(self, events, duration, start, n_channels, bgcolor,\r\n  File \"<decorator-gen-274>\", line 12, in plot_raw\r\n  File \"C:\\ProgramData\\Anaconda3\\lib\\site-packages\\mne\\viz\\raw.py\", line 237, in plot_raw\r\n    duration = min(raw.times[-1], float(duration))\r\n  File \"C:\\ProgramData\\Anaconda3\\lib\\site-packages\\mne\\io\\base.py\", line 1548, in times\r\n    out = _arange_div(self.n_times, float(self.info['sfreq']))\r\nTypeError: expected dtype object, got 'numpy.dtype[float64]'\r\npython-BaseException\r\nBackend QtAgg is interactive backend. Turning interactive mode on.\r\n\n\n### Additional information\n\nPlatform:         Windows-10-10.0.19041-SP0\r\nPython:           3.8.3 (default, Jul  2 2020, 17:30:36) [MSC v.1916 64 bit (AMD64)]\r\nExecutable:       C:\\ProgramData\\Anaconda3\\python.exe\r\nCPU:              Intel64 Family 6 Model 165 Stepping 2, GenuineIntel: 12 cores\r\nMemory:           15.8 GB\r\nmne:              1.2.1\r\nnumpy:            1.21.1 {OpenBLAS 0.3.17 with 12 threads}\r\nscipy:            1.5.0\r\nmatplotlib:       3.6.1Backend QtAgg is interactive backend. Turning interactive mode on.\r\n {backend=QtAgg}\r\nsklearn:          0.23.1\r\nnumba:            0.50.1\r\nnibabel:          Not found\r\nnilearn:          Not found\r\ndipy:             Not found\r\nopenmeeg:         Not found\r\ncupy:             Not found\r\npandas:           1.0.5\r\npyvista:          Not found\r\npyvistaqt:        Not found\r\nipyvtklink:       Not found\r\nvtk:              Not found\r\nqtpy:             1.9.0 {PyQt5=5.9.7}\r\nipympl:           Not found\r\npyqtgraph:        Not found\r\npooch:            v1.6.0\r\nmne_bids:         Not found\r\nmne_nirs:         Not found\r\nmne_features:     Not found\r\nmne_qt_browser:   Not found\r\nmne_connectivity: Not found\r\nmne_icalabel:     Not found\r\n", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/11264/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/11264/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/11258", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/11258/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/11258/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/11258/events", "html_url": "https://github.com/mne-tools/mne-python/issues/11258", "id": 1412756360, "node_id": "I_kwDOABPcUM5UNPOI", "number": 11258, "title": "Legend colors misbehave on plot_evoked_topo", "user": {"login": "teekuningas", "id": 5773669, "node_id": "MDQ6VXNlcjU3NzM2Njk=", "avatar_url": "https://avatars.githubusercontent.com/u/5773669?v=4", "gravatar_id": "", "url": "https://api.github.com/users/teekuningas", "html_url": "https://github.com/teekuningas", "followers_url": "https://api.github.com/users/teekuningas/followers", "following_url": "https://api.github.com/users/teekuningas/following{/other_user}", "gists_url": "https://api.github.com/users/teekuningas/gists{/gist_id}", "starred_url": "https://api.github.com/users/teekuningas/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/teekuningas/subscriptions", "organizations_url": "https://api.github.com/users/teekuningas/orgs", "repos_url": "https://api.github.com/users/teekuningas/repos", "events_url": "https://api.github.com/users/teekuningas/events{/privacy}", "received_events_url": "https://api.github.com/users/teekuningas/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 14, "created_at": "2022-10-18T08:02:39Z", "updated_at": "2022-10-25T11:47:00Z", "closed_at": "2022-10-25T11:47:00Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "### Description of the problem\n\nFor some reason the procedure I've been using for years to plot multiple evokeds using plot_evoked_topo produces a misbehaving legend.\n\n### Steps to reproduce\n\n```Python\nimport mne\r\n\r\npath = str(mne.datasets.sample.data_path()) + '/MEG/sample/sample_audvis_raw.fif'\r\nraw = mne.io.read_raw_fif(path)\r\n\r\nevents_1 = mne.find_events(raw)\r\nepochs_1 = mne.Epochs(raw, events_1, event_id={'LH': 1})\r\nevoked_1 = epochs_1.average()\r\n\r\nevents_2 = mne.find_events(raw)\r\nepochs_2 = mne.Epochs(raw, events_2, event_id={'RH': 2})\r\nevoked_2 = epochs_2.average()\r\n\r\nmne.viz.plot_evoked_topo([evoked_1, evoked_2])\n```\n\n\n### Link to data\n\n_No response_\n\n### Expected results\n\nLegend should have two lines that have matching colors to texts.\n\n### Actual results\n\nSee:\r\n\r\n![image](https://user-images.githubusercontent.com/5773669/196369904-00dfa29d-e570-443d-af83-3755da353951.png)\r\n\n\n### Additional information\n\nPlatform:         Linux-4.18.0-305.19.1.el8_4.x86_64-x86_64-with-glibc2.35                              \r\nPython:           3.9.13 (main, May 17 2022, 14:19:07)  [GCC 11.3.0]                                    \r\nExecutable:       /nix/store/32iyr06f5v32zcglrn4d4jwggy0gslg1-python3-3.9.13/bin/python3                \r\nCPU:              : 8 cores\r\nMemory:           Unavailable (requires \"psutil\" package)                                               \r\nmne:              1.2.0\r\nnumpy:            1.23.1 {unknown linalg bindings}\r\nscipy:            1.8.1\r\nmatplotlib:       3.5.2 {backend=QtAgg}\r\n\r\nsklearn:          1.1.1\r\nnumba:            Not found\r\nnibabel:          Not found\r\nnilearn:          Not found\r\ndipy:             Not found\r\nopenmeeg:         Not found\r\ncupy:             Not found\r\npandas:           Not found\r\npyvista:          Not found\r\npyvistaqt:        Not found\r\nipyvtklink:       Not found\r\nvtk:              Not found\r\nqtpy:             Not found\r\nipympl:           Not found\r\npyqtgraph:        Not found\r\npooch:            v1.6.0\r\n\r\nmne_bids:         Not found\r\nmne_nirs:         Not found\r\nmne_features:     Not found\r\nmne_qt_browser:   Not found\r\nmne_connectivity: Not found\r\nmne_icalabel:     Not found\r\n", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/11258/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/11258/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/11254", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/11254/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/11254/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/11254/events", "html_url": "https://github.com/mne-tools/mne-python/issues/11254", "id": 1410429270, "node_id": "I_kwDOABPcUM5UEXFW", "number": 11254, "title": "I got a Complex number matrix when use mne.time_frequency.tfr.cwt", "user": {"login": "MeetXinZhang", "id": 12469551, "node_id": "MDQ6VXNlcjEyNDY5NTUx", "avatar_url": "https://avatars.githubusercontent.com/u/12469551?v=4", "gravatar_id": "", "url": "https://api.github.com/users/MeetXinZhang", "html_url": "https://github.com/MeetXinZhang", "followers_url": "https://api.github.com/users/MeetXinZhang/followers", "following_url": "https://api.github.com/users/MeetXinZhang/following{/other_user}", "gists_url": "https://api.github.com/users/MeetXinZhang/gists{/gist_id}", "starred_url": "https://api.github.com/users/MeetXinZhang/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/MeetXinZhang/subscriptions", "organizations_url": "https://api.github.com/users/MeetXinZhang/orgs", "repos_url": "https://api.github.com/users/MeetXinZhang/repos", "events_url": "https://api.github.com/users/MeetXinZhang/events{/privacy}", "received_events_url": "https://api.github.com/users/MeetXinZhang/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2022-10-16T09:23:59Z", "updated_at": "2022-10-16T09:40:05Z", "closed_at": "2022-10-16T09:39:24Z", "author_association": "NONE", "active_lock_reason": null, "body": "### Description of the problem\n\nI got a Complex number matrix when use mne.time_frequency.tfr.cwt, here are my codes:\r\n\r\n```\r\nprint('in: \\n')\r\nprint(sample)\r\nWs = mne.time_frequency.morlet(sfreq=1024, freqs=np.array([10, 20]), n_cycles=2)\r\ntfr = mne.time_frequency.tfr.cwt(X=sample, Ws=Ws, decim=1)\r\nprint('out: \\n')\r\nprint(tfr)\r\n```\r\n\r\nin: \r\n```\r\n[[-0.0171185  -0.01712345 -0.01712194 ... -0.0171574  -0.01715735\r\n  -0.01715174]\r\n [-0.01471906 -0.0147273  -0.01471956 ... -0.0146988  -0.01469505\r\n  -0.01468607]\r\n [-0.00083631 -0.0008417  -0.0008396  ... -0.00083318 -0.0008345\r\n  -0.00083111]\r\n ...\r\n```\r\n\r\nout: \r\n```\r\n[[[-0.01920775+0.06646499j -0.02238754+0.0662701j\r\n   -0.02554496+0.06588112j ... -0.02560316-0.06597577j\r\n   -0.02244102-0.06636661j -0.01925637-0.06656306j]\r\n  [-0.01470064+0.04695463j -0.01916419+0.04640517j\r\n   -0.02350233+0.04531965j ... -0.02355393-0.04539447j\r\n   -0.01920823-0.04648302j -0.01473679-0.04703457j]]\r\n\r\n [[-0.01651212+0.05711284j -0.01924464+0.05694498j\r\n   -0.02195792+0.05661033j ... -0.02191849-0.0564956j\r\n   -0.01921113-0.05682995j -0.01648451-0.05699789j]\r\n  [-0.01263726+0.04034889j -0.0164729 +0.03987624j\r\n   -0.02020074+0.03894294j ... -0.02017442-0.03886898j\r\n   -0.01645344-0.03980188j -0.01262466-0.04027496j]]\r\n\r\n [[-0.00094912+0.00328381j -0.00110662+0.0032743j\r\n   -0.00126305+0.00325516j ... -0.00124199-0.0032003j\r\n   -0.00108853-0.00321915j -0.000934  -0.00322858j]\r\n  [-0.00071738+0.00231746j -0.00093773+0.0022914j\r\n   -0.00115204+0.00223885j ... -0.0011384 -0.00219662j\r\n   -0.0009286 -0.00224905j -0.0007127 -0.00227563j]]\r\n\r\n ...\r\n```\r\n\r\nWhat i want is an array consisted of numpy.float, like input(sample).\r\nSo anyone can tell me how should I do?\n\n### Steps to reproduce\n\n```Python\nprint('in: \\n')\r\nprint(sample)\r\nWs = mne.time_frequency.morlet(sfreq=1024, freqs=np.array([10, 20]), n_cycles=2)\r\ntfr = mne.time_frequency.tfr.cwt(X=sample, Ws=Ws, decim=1)\r\nprint('out: \\n')\r\nprint(tfr)\n```\n\n\n### Link to data\n\n_No response_\n\n### Expected results\n\nnumpy.array that consisted of Real number\n\n### Actual results\n\nnumpy.array that consisted of Complex number\n\n### Additional information\n\nPlatform:         Windows-10-10.0.19045-SP0\r\nPython:           3.9.13 (main, Aug 25 2022, 23:51:50) [MSC v.1916 64 bit (AMD64)]\r\nExecutable:       D:\\Anaconda\\envs\\torch\\python.exe\r\nCPU:              Intel64 Family 6 Model 158 Stepping 9, GenuineIntel: 8 cores\r\nMemory:           Unavailable (requires \"psutil\" package)\r\nmne:              1.1.1\r\nnumpy:            1.21.5 {blas=mkl_rt, lapack=mkl_rt}\r\nscipy:            1.7.3\r\nmatplotlib:       3.6.0 {backend=TkAgg}\r\n\r\nsklearn:          1.1.1\r\nnumba:            Not found\r\nnibabel:          Not found\r\nnilearn:          Not found\r\ndipy:             Not found\r\ncupy:             Not found\r\npandas:           Not found\r\npyvista:          Not found\r\npyvistaqt:        Not found\r\nipyvtklink:       Not found\r\nvtk:              Not found\r\nqtpy:             Not found\r\nipympl:           Not found\r\npyqtgraph:        Not found\r\npooch:            v1.6.0\r\n\r\nmne_bids:         Not found\r\nmne_nirs:         Not found\r\nmne_features:     Not found\r\nmne_qt_browser:   Not found\r\nmne_connectivity: Not found\r\nmne_icalabel:     Not found\r\n", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/11254/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/11254/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/11252", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/11252/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/11252/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/11252/events", "html_url": "https://github.com/mne-tools/mne-python/issues/11252", "id": 1410418400, "node_id": "I_kwDOABPcUM5UEUbg", "number": 11252, "title": "Missing `verbose` argument in mne.channels.channels.combine_channels", "user": {"login": "dissagaliyeva", "id": 80033932, "node_id": "MDQ6VXNlcjgwMDMzOTMy", "avatar_url": "https://avatars.githubusercontent.com/u/80033932?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dissagaliyeva", "html_url": "https://github.com/dissagaliyeva", "followers_url": "https://api.github.com/users/dissagaliyeva/followers", "following_url": "https://api.github.com/users/dissagaliyeva/following{/other_user}", "gists_url": "https://api.github.com/users/dissagaliyeva/gists{/gist_id}", "starred_url": "https://api.github.com/users/dissagaliyeva/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dissagaliyeva/subscriptions", "organizations_url": "https://api.github.com/users/dissagaliyeva/orgs", "repos_url": "https://api.github.com/users/dissagaliyeva/repos", "events_url": "https://api.github.com/users/dissagaliyeva/events{/privacy}", "received_events_url": "https://api.github.com/users/dissagaliyeva/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2022-10-16T08:40:43Z", "updated_at": "2022-10-17T14:12:11Z", "closed_at": "2022-10-17T14:12:11Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "### Description of the problem\n\nThe `combine_channels` function is missing the verbose argument. By default, it shows all logger information without the option to turn it off. \n\n### Steps to reproduce\n\n```Python\nfrom mne.io import concatenate_raws, read_raw_edf\r\nfrom mne.datasets import eegbci\r\nfrom mne.channels.channels import combine_channels\r\n\r\nraw_fnames = eegbci.load_data(1, 1)\r\nraws = [read_raw_edf(f, preload=True) for f in raw_fnames]\r\nraw = concatenate_raws(raws)\r\n\r\nres = combine_channels(raw, dict(Left=[1, 2, 3, 4], Right=[5, 6, 7, 8]))\r\nres\n```\n\n\n### Link to data\n\n_No response_\n\n### Expected results\n\nExpected to see only the information from a variable of type mne.io.array.array.RawArray.\n\n### Actual results\n\nActual results include the snippet below and the information from a variable of type mne.io.array.array.RawArray\r\n\r\n```\r\nCreating RawArray with float64 data, n_channels=2, n_times=9760\r\n    Range : 0 ... 9759 =      0.000 ...    60.994 secs\r\nReady.\r\n```\n\n### Additional information\n\nPlatform:         Windows-10-10.0.22000-SP0\r\nPython:           3.10.6 | packaged by conda-forge | (main, Oct  7 2022, 20:14:50) [MSC v.1916 64 bit (AMD64)]\r\nExecutable:       C:\\Users\\dinara\\miniconda3\\envs\\X\\python.exe\r\nCPU:              Intel64 Family 6 Model 158 Stepping 10, GenuineIntel: 12 cores\r\nMemory:           7.8 GB\r\n\r\nmne:              1.3.dev0\r\nnumpy:            1.23.4 {OpenBLAS 0.3.20 with 2 threads}\r\nscipy:            1.9.2\r\nmatplotlib:       3.6.1 {backend=module://matplotlib_inline.backend_inline}\r\n\r\nsklearn:          1.1.2\r\nnumba:            0.56.2\r\nnibabel:          4.0.2\r\nnilearn:          0.9.2\r\ndipy:             1.5.0\r\nopenmeeg:         2.5.5\r\ncupy:             Not found\r\npandas:           1.5.0\r\npyvista:          0.36.1 {OpenGL 4.5.0 NVIDIA 516.93 via NVIDIA GeForce GTX 1650 with Max-Q Design/PCIe/SSE2}\r\npyvistaqt:        0.9.0\r\nipyvtklink:       0.2.2\r\nvtk:              9.2.2\r\nqtpy:             2.2.1 {PySide6=6.3.2}\r\nipympl:           Not found\r\npyqtgraph:        0.13.1\r\npooch:            v1.6.0\r\n\r\nmne_bids:         Not found\r\nmne_nirs:         Not found\r\nmne_features:     Not found\r\nmne_qt_browser:   0.4.0\r\nmne_connectivity: Not found\r\nmne_icalabel:     Not found", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/11252/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/11252/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/11243", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/11243/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/11243/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/11243/events", "html_url": "https://github.com/mne-tools/mne-python/issues/11243", "id": 1407243489, "node_id": "I_kwDOABPcUM5T4NTh", "number": 11243, "title": "ENH: mne.set_bipolar_reference should not ignore bad channels", "user": {"login": "moritz-gerster", "id": 45031224, "node_id": "MDQ6VXNlcjQ1MDMxMjI0", "avatar_url": "https://avatars.githubusercontent.com/u/45031224?v=4", "gravatar_id": "", "url": "https://api.github.com/users/moritz-gerster", "html_url": "https://github.com/moritz-gerster", "followers_url": "https://api.github.com/users/moritz-gerster/followers", "following_url": "https://api.github.com/users/moritz-gerster/following{/other_user}", "gists_url": "https://api.github.com/users/moritz-gerster/gists{/gist_id}", "starred_url": "https://api.github.com/users/moritz-gerster/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/moritz-gerster/subscriptions", "organizations_url": "https://api.github.com/users/moritz-gerster/orgs", "repos_url": "https://api.github.com/users/moritz-gerster/repos", "events_url": "https://api.github.com/users/moritz-gerster/events{/privacy}", "received_events_url": "https://api.github.com/users/moritz-gerster/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 8, "created_at": "2022-10-13T06:47:34Z", "updated_at": "2022-10-16T10:30:41Z", "closed_at": "2022-10-16T10:30:41Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "### Description of the problem\n\nWhen setting the bipolar reference between one good and one bad channel, the final bipolar channel is marked as good.\r\n\r\nBad channels are marked as bad because they contain artefacts. The bipolar reference between a bad channel and a good channel can never yield a good channel as a result. Therefore, the resulting bipolar channels should be marked as bad by mne.\r\n\r\n[Jupyter Notebook: Steps to reproduce](https://github.com/mne-tools/mne-python/files/9771538/bipolar_ref.pdf)\r\n\n\n### Steps to reproduce\n\n```Python\nA jupyter notebook to reproduce the problem is uploaded as a pdf.\n```\n\n\n### Link to data\n\n_No response_\n\n### Expected results\n\nBipolar referencing works but the bipolar channel is automatically marked as bad.\n\n### Actual results\n\nBipolar referencing works but the bipolar channel is marked as a good channel even though it is clearly a bad channel.\n\n### Additional information\n\nPlatform:         macOS-12.6-arm64-arm-64bit\r\nPython:           3.10.6 | packaged by conda-forge | (main, Aug 22 2022, 20:41:22) [Clang 13.0.1 ]\r\nExecutable:       /Users/moritzgerster/anaconda3/envs/bids_neu/bin/python\r\nCPU:              arm: 10 cores\r\nMemory:           16.0 GB\r\n\r\nmne:              1.2.dev0\r\nnumpy:            1.23.2 {unknown linalg bindings (threadpoolctl module not found: No module named 'threadpoolctl')}\r\nscipy:            1.9.0\r\nmatplotlib:       3.5.3 {backend=module://matplotlib_inline.backend_inline}\r\n\r\nsklearn:          Not found\r\nnumba:            Not found\r\nnibabel:          4.0.1\r\nnilearn:          Not found\r\ndipy:             Not found\r\nopenmeeg:         Not found\r\ncupy:             Not found\r\npandas:           1.4.3\r\npyvista:          0.36.1 {OpenGL 4.1 Metal - 76.3 via Apple M1 Pro}\r\npyvistaqt:        0.9.0\r\nipyvtklink:       Not found\r\nvtk:              9.1.0\r\nqtpy:             2.2.0 {None=None}\r\nipympl:           Not found\r\npyqtgraph:        Not found\r\npooch:            v1.6.0\r\n\r\nmne_bids:         0.10\r\nmne_nirs:         Not found\r\nmne_features:     Not found\r\nmne_qt_browser:   Not found\r\nmne_connectivity: Not found\r\nmne_icalabel:     Not found", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/11243/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/11243/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/11239", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/11239/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/11239/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/11239/events", "html_url": "https://github.com/mne-tools/mne-python/issues/11239", "id": 1406392307, "node_id": "I_kwDOABPcUM5T09fz", "number": 11239, "title": "Mismatch of coord systems between electrodes and channels/events ", "user": {"login": "laemtl", "id": 32041423, "node_id": "MDQ6VXNlcjMyMDQxNDIz", "avatar_url": "https://avatars.githubusercontent.com/u/32041423?v=4", "gravatar_id": "", "url": "https://api.github.com/users/laemtl", "html_url": "https://github.com/laemtl", "followers_url": "https://api.github.com/users/laemtl/followers", "following_url": "https://api.github.com/users/laemtl/following{/other_user}", "gists_url": "https://api.github.com/users/laemtl/gists{/gist_id}", "starred_url": "https://api.github.com/users/laemtl/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/laemtl/subscriptions", "organizations_url": "https://api.github.com/users/laemtl/orgs", "repos_url": "https://api.github.com/users/laemtl/repos", "events_url": "https://api.github.com/users/laemtl/events{/privacy}", "received_events_url": "https://api.github.com/users/laemtl/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2022-10-12T15:16:59Z", "updated_at": "2022-10-14T19:35:21Z", "closed_at": "2022-10-14T19:35:21Z", "author_association": "NONE", "active_lock_reason": null, "body": "### Description of the problem\r\n\r\nChannel//Epoch data are exported in the ALS/CTF coord system to follow the EEGLAB specs.\r\nOn the other hand, electrode data are exported in the head/captrak coord space.\r\n\r\nIs there any reason to not export the electrode data in the same space?\r\n\r\n### Steps to reproduce\r\n\r\n```Python\r\nExporting an EEGLAB dataset using\r\nwrite_raw_bids(..., allow_preload=False, overwrite=False, verbose=False)\r\n```\r\n\r\n\r\n### Link to data\r\n\r\n_No response_\r\n\r\n### Expected results\r\n\r\nElectrode data in the CTF space\r\n\r\n### Actual results\r\n\r\nElectrode data in the Captrak space\r\n\r\n### Additional information\r\n\r\nPlatform:         Windows-10-10.0.19041-SP0\r\nPython:           3.8.5 (tags/v3.8.5:580fbb0, Jul 20 2020, 15:57:54) [MSC v.1924 64 bit (AMD64)]\r\nExecutable:       C:\\Users\\Lae\\Documents\\hbcd-eeg2bids\\Scripts\\python.exe\r\nCPU:              Intel64 Family 6 Model 142 Stepping 9, GenuineIntel: 4 cores\r\nMemory:           Unavailable (requires \"psutil\" package)\r\nmne:              1.2.0\r\nnumpy:            1.20.3 {OpenBLAS 0.3.13.dev with 4 threads}\r\nscipy:            1.9.2\r\nmatplotlib:       3.6.1 {backend=TkAgg}\r\n\r\nsklearn:          1.1.2\r\nnumba:            0.56.2\r\nnibabel:          Not found\r\nnilearn:          Not found\r\ndipy:             Not found\r\nopenmeeg:         Not found\r\ncupy:             Not found\r\npandas:           1.5.0\r\npyvista:          Not found\r\npyvistaqt:        Not found\r\nipyvtklink:       Not found\r\nvtk:              Not found\r\nqtpy:             Not found\r\nipympl:           Not found\r\npyqtgraph:        Not found\r\npooch:            v1.6.0\r\n\r\nmne_bids:         0.10\r\nmne_nirs:         Not found\r\nmne_features:     0.2.1\r\nmne_qt_browser:   Not found\r\nmne_connectivity: Not found\r\nmne_icalabel:     Not found", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/11239/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/11239/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/11218", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/11218/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/11218/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/11218/events", "html_url": "https://github.com/mne-tools/mne-python/issues/11218", "id": 1393481124, "node_id": "I_kwDOABPcUM5TDtWk", "number": 11218, "title": "mne.utils.run_subprocess() inserts undesired empty lines in stdout", "user": {"login": "hoechenberger", "id": 2046265, "node_id": "MDQ6VXNlcjIwNDYyNjU=", "avatar_url": "https://avatars.githubusercontent.com/u/2046265?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hoechenberger", "html_url": "https://github.com/hoechenberger", "followers_url": "https://api.github.com/users/hoechenberger/followers", "following_url": "https://api.github.com/users/hoechenberger/following{/other_user}", "gists_url": "https://api.github.com/users/hoechenberger/gists{/gist_id}", "starred_url": "https://api.github.com/users/hoechenberger/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hoechenberger/subscriptions", "organizations_url": "https://api.github.com/users/hoechenberger/orgs", "repos_url": "https://api.github.com/users/hoechenberger/repos", "events_url": "https://api.github.com/users/hoechenberger/events{/privacy}", "received_events_url": "https://api.github.com/users/hoechenberger/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "hoechenberger", "id": 2046265, "node_id": "MDQ6VXNlcjIwNDYyNjU=", "avatar_url": "https://avatars.githubusercontent.com/u/2046265?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hoechenberger", "html_url": "https://github.com/hoechenberger", "followers_url": "https://api.github.com/users/hoechenberger/followers", "following_url": "https://api.github.com/users/hoechenberger/following{/other_user}", "gists_url": "https://api.github.com/users/hoechenberger/gists{/gist_id}", "starred_url": "https://api.github.com/users/hoechenberger/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hoechenberger/subscriptions", "organizations_url": "https://api.github.com/users/hoechenberger/orgs", "repos_url": "https://api.github.com/users/hoechenberger/repos", "events_url": "https://api.github.com/users/hoechenberger/events{/privacy}", "received_events_url": "https://api.github.com/users/hoechenberger/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "hoechenberger", "id": 2046265, "node_id": "MDQ6VXNlcjIwNDYyNjU=", "avatar_url": "https://avatars.githubusercontent.com/u/2046265?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hoechenberger", "html_url": "https://github.com/hoechenberger", "followers_url": "https://api.github.com/users/hoechenberger/followers", "following_url": "https://api.github.com/users/hoechenberger/following{/other_user}", "gists_url": "https://api.github.com/users/hoechenberger/gists{/gist_id}", "starred_url": "https://api.github.com/users/hoechenberger/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hoechenberger/subscriptions", "organizations_url": "https://api.github.com/users/hoechenberger/orgs", "repos_url": "https://api.github.com/users/hoechenberger/repos", "events_url": "https://api.github.com/users/hoechenberger/events{/privacy}", "received_events_url": "https://api.github.com/users/hoechenberger/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2022-10-01T17:13:53Z", "updated_at": "2022-10-03T15:17:36Z", "closed_at": "2022-10-03T15:17:36Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "### Description of the problem\r\n\r\nWhen using `mne.utils.run_subprocess()`, each line printed to `stdout` by the subprocess will be printed with an additional empty line immediately after.\r\n\r\n### Steps to reproduce\r\n\r\n```Python\r\n# subp.py\r\nprint('foo')\r\nprint('bar')\r\n```\r\n\r\n```python\r\n# main.py\r\nfrom mne.utils import run_subprocess\r\n\r\nrun_subprocess(command=['python', 'subp.py'])\r\n```\r\n\r\nRun via:\r\n```shell\r\npython main.py\r\n```\r\n\r\n### Expected results\r\n\r\n```\r\nfoo\r\nbar\r\n```\r\n\r\n### Actual results\r\n\r\n```\r\nfoo\r\n\r\nbar\r\n\r\n```\r\n\r\n### Additional information\r\n\r\nThis is with `main`", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/11218/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/11218/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/11202", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/11202/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/11202/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/11202/events", "html_url": "https://github.com/mne-tools/mne-python/issues/11202", "id": 1384852161, "node_id": "I_kwDOABPcUM5SiyrB", "number": 11202, "title": "Incorrect raw duration displayed in HTML repr", "user": {"login": "hoechenberger", "id": 2046265, "node_id": "MDQ6VXNlcjIwNDYyNjU=", "avatar_url": "https://avatars.githubusercontent.com/u/2046265?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hoechenberger", "html_url": "https://github.com/hoechenberger", "followers_url": "https://api.github.com/users/hoechenberger/followers", "following_url": "https://api.github.com/users/hoechenberger/following{/other_user}", "gists_url": "https://api.github.com/users/hoechenberger/gists{/gist_id}", "starred_url": "https://api.github.com/users/hoechenberger/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hoechenberger/subscriptions", "organizations_url": "https://api.github.com/users/hoechenberger/orgs", "repos_url": "https://api.github.com/users/hoechenberger/repos", "events_url": "https://api.github.com/users/hoechenberger/events{/privacy}", "received_events_url": "https://api.github.com/users/hoechenberger/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "hoechenberger", "id": 2046265, "node_id": "MDQ6VXNlcjIwNDYyNjU=", "avatar_url": "https://avatars.githubusercontent.com/u/2046265?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hoechenberger", "html_url": "https://github.com/hoechenberger", "followers_url": "https://api.github.com/users/hoechenberger/followers", "following_url": "https://api.github.com/users/hoechenberger/following{/other_user}", "gists_url": "https://api.github.com/users/hoechenberger/gists{/gist_id}", "starred_url": "https://api.github.com/users/hoechenberger/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hoechenberger/subscriptions", "organizations_url": "https://api.github.com/users/hoechenberger/orgs", "repos_url": "https://api.github.com/users/hoechenberger/repos", "events_url": "https://api.github.com/users/hoechenberger/events{/privacy}", "received_events_url": "https://api.github.com/users/hoechenberger/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "hoechenberger", "id": 2046265, "node_id": "MDQ6VXNlcjIwNDYyNjU=", "avatar_url": "https://avatars.githubusercontent.com/u/2046265?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hoechenberger", "html_url": "https://github.com/hoechenberger", "followers_url": "https://api.github.com/users/hoechenberger/followers", "following_url": "https://api.github.com/users/hoechenberger/following{/other_user}", "gists_url": "https://api.github.com/users/hoechenberger/gists{/gist_id}", "starred_url": "https://api.github.com/users/hoechenberger/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hoechenberger/subscriptions", "organizations_url": "https://api.github.com/users/hoechenberger/orgs", "repos_url": "https://api.github.com/users/hoechenberger/repos", "events_url": "https://api.github.com/users/hoechenberger/events{/privacy}", "received_events_url": "https://api.github.com/users/hoechenberger/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/mne-tools/mne-python/milestones/23", "html_url": "https://github.com/mne-tools/mne-python/milestone/23", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/milestones/23/labels", "id": 8047399, "node_id": "MI_kwDOABPcUM4Aessn", "number": 23, "title": "1.2", "description": "", "creator": {"login": "hoechenberger", "id": 2046265, "node_id": "MDQ6VXNlcjIwNDYyNjU=", "avatar_url": "https://avatars.githubusercontent.com/u/2046265?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hoechenberger", "html_url": "https://github.com/hoechenberger", "followers_url": "https://api.github.com/users/hoechenberger/followers", "following_url": "https://api.github.com/users/hoechenberger/following{/other_user}", "gists_url": "https://api.github.com/users/hoechenberger/gists{/gist_id}", "starred_url": "https://api.github.com/users/hoechenberger/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hoechenberger/subscriptions", "organizations_url": "https://api.github.com/users/hoechenberger/orgs", "repos_url": "https://api.github.com/users/hoechenberger/repos", "events_url": "https://api.github.com/users/hoechenberger/events{/privacy}", "received_events_url": "https://api.github.com/users/hoechenberger/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 71, "state": "closed", "created_at": "2022-06-03T17:43:37Z", "updated_at": "2022-10-11T20:15:01Z", "due_on": "2022-09-01T07:00:00Z", "closed_at": "2022-10-11T20:15:01Z"}, "comments": 5, "created_at": "2022-09-25T00:31:34Z", "updated_at": "2022-09-26T11:55:57Z", "closed_at": "2022-09-26T11:55:56Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "\r\n_Originally posted by @hoechenberger in https://github.com/mne-tools/mne-python/issues/11196#issuecomment-1257090412_\r\n\r\nbtw there's a bug in the HTML repr that is not present in the text repr:\r\n\r\n<img width=\"492\" alt=\"Screen Shot 2022-09-25 at 02 29 36\" src=\"https://user-images.githubusercontent.com/2046265/192123297-c30445cf-061f-4a52-b497-0465ecd136d7.png\">\r\n\r\n```python\r\nimport numpy as np\r\nimport mne\r\n\r\nn_seconds = 1\r\nsfreq = 100\r\nch_names = ['1']\r\ndata = np.ones((len(ch_names), sfreq*n_seconds))\r\ninfo = mne.create_info(ch_names=ch_names, sfreq=sfreq)\r\nraw = mne.io.RawArray(data, info)\r\n```", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/11202/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/11202/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/11196", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/11196/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/11196/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/11196/events", "html_url": "https://github.com/mne-tools/mne-python/issues/11196", "id": 1382597031, "node_id": "I_kwDOABPcUM5SaMGn", "number": 11196, "title": "`include_tmax` not considered in `mne.io.Raw.crop` to check `tmax` in bounds", "user": {"login": "gemeinl", "id": 6839229, "node_id": "MDQ6VXNlcjY4MzkyMjk=", "avatar_url": "https://avatars.githubusercontent.com/u/6839229?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gemeinl", "html_url": "https://github.com/gemeinl", "followers_url": "https://api.github.com/users/gemeinl/followers", "following_url": "https://api.github.com/users/gemeinl/following{/other_user}", "gists_url": "https://api.github.com/users/gemeinl/gists{/gist_id}", "starred_url": "https://api.github.com/users/gemeinl/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gemeinl/subscriptions", "organizations_url": "https://api.github.com/users/gemeinl/orgs", "repos_url": "https://api.github.com/users/gemeinl/repos", "events_url": "https://api.github.com/users/gemeinl/events{/privacy}", "received_events_url": "https://api.github.com/users/gemeinl/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2022-09-22T14:58:58Z", "updated_at": "2022-09-26T14:29:59Z", "closed_at": "2022-09-26T14:29:59Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "### Description of the problem\n\nWhen cropping a `Raw` to its exact duration without including `tmax`, the code crashes.\r\nThis is clearly an edge case, but I would expect this to work.\r\nAm I wrong on this?\n\n### Steps to reproduce\n\n```Python\nimport numpy as np\r\nimport mne\r\n\r\nn_seconds = 1\r\nsfreq = 100\r\nch_names = ['1']\r\ndata = np.ones((len(ch_names), sfreq*n_seconds))\r\ninfo = mne.create_info(ch_names=ch_names, sfreq=sfreq)\r\nraw = mne.io.RawArray(data, info)\r\nraw.crop(tmax=n_seconds, include_tmax=False)\n```\n\n\n### Link to data\n\n_No response_\n\n### Expected results\n\nThe code should run and the raw should not change, since it is cropped for the entire data.\n\n### Actual results\n\nCode crashes.\n\n### Additional information\n\nPlatform:         Linux-5.15.63-flatcar-x86_64-with-glibc2.31\r\nPython:           3.9.7 | packaged by conda-forge | (default, Sep  2 2021, 17:58:34)  [GCC 9.4.0]\r\nExecutable:       /opt/conda/bin/python3\r\nCPU:              x86_64: 64 cores\r\nMemory:           251.8 GB\r\n\r\nmne:              1.1.dev0\r\nnumpy:            1.23.3 {}\r\nscipy:            1.9.1\r\nmatplotlib:       3.6.0 {backend=module://matplotlib_inline.backend_inline}\r\n\r\nsklearn:          1.1.2\r\nnumba:            Not found\r\nnibabel:          Not found\r\nnilearn:          Not found\r\ndipy:             Not found\r\ncupy:             Not found\r\npandas:           1.5.0\r\npyvista:          Not found\r\npyvistaqt:        Not found\r\nipyvtklink:       Not found\r\nvtk:              Not found\r\nqtpy:             Not found\r\nipympl:           Not found\r\npyqtgraph:        Not found\r\npooch:            Not found\r\n\r\nmne_bids:         Not found\r\nmne_nirs:         Not found\r\nmne_features:     Not found\r\nmne_qt_browser:   Not found\r\nmne_connectivity: Not found\r\nmne_icalabel:     Not found", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/11196/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/11196/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/11195", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/11195/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/11195/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/11195/events", "html_url": "https://github.com/mne-tools/mne-python/issues/11195", "id": 1382427792, "node_id": "I_kwDOABPcUM5SZiyQ", "number": 11195, "title": "read .egg file (UnicodeDecodeError)", "user": {"login": "RRaphaell", "id": 74569835, "node_id": "MDQ6VXNlcjc0NTY5ODM1", "avatar_url": "https://avatars.githubusercontent.com/u/74569835?v=4", "gravatar_id": "", "url": "https://api.github.com/users/RRaphaell", "html_url": "https://github.com/RRaphaell", "followers_url": "https://api.github.com/users/RRaphaell/followers", "following_url": "https://api.github.com/users/RRaphaell/following{/other_user}", "gists_url": "https://api.github.com/users/RRaphaell/gists{/gist_id}", "starred_url": "https://api.github.com/users/RRaphaell/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/RRaphaell/subscriptions", "organizations_url": "https://api.github.com/users/RRaphaell/orgs", "repos_url": "https://api.github.com/users/RRaphaell/repos", "events_url": "https://api.github.com/users/RRaphaell/events{/privacy}", "received_events_url": "https://api.github.com/users/RRaphaell/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2022-09-22T13:09:54Z", "updated_at": "2022-09-22T13:41:29Z", "closed_at": "2022-09-22T13:41:29Z", "author_association": "NONE", "active_lock_reason": null, "body": "### Description of the problem\n\nI'm trying to read .eeg file that I've recorded myself using brainvision. I'm using read_raw_nihon method but getting UnicodeDecodeError. I have also loaded header data (\".vhdr\") using  mne.io.read_raw_brainvision and annotation data (\".vmrk\") using mne.read_annotations successfully but was not able to read .eeg data as I have mentioned above.\n\n### Steps to reproduce\n\n```Python\nI'm using kaggle\r\nand here is the code\r\n\r\nimport mne\r\neeg = mne.io.read_raw_nihon(\"test.eeg\")\n```\n\n\n### Link to data\n\nhttps://drive.google.com/file/d/1IKyFTpQOIR06mWOo9wu4ih5sQnpUrld8/view?usp=sharing\n\n### Expected results\n\nread eeg data\n\n### Actual results\n\nUnicodeDecodeError: 'ascii' codec can't decode byte 0x86 in position 1: ordinal not in range(128)\n\n### Additional information\n\nPlatform:         Linux-5.15.65+-x86_64-with-debian-bullseye-sid\r\nPython:           3.7.12 | packaged by conda-forge | (default, Oct 26 2021, 06:08:53)  [GCC 9.4.0]\r\nExecutable:       /opt/conda/bin/python\r\nCPU:              x86_64: 4 cores\r\nMemory:           17.6 GB\r\n\r\nmne:              1.1.1\r\nnumpy:            1.21.6 {blas=openblas, lapack=openblas}\r\nscipy:            1.7.3\r\nmatplotlib:       3.5.3 {backend=module://matplotlib_inline.backend_inline}\r\n\r\nsklearn:          1.0.2\r\nnumba:            0.55.2\r\nnibabel:          4.0.2\r\nnilearn:          0.9.2\r\ndipy:             1.5.0\r\ncupy:             Not found\r\npandas:           1.3.5\r\npyvista:          Not found\r\npyvistaqt:        Not found\r\nipyvtklink:       Not found\r\nvtk:              9.1.0\r\nqtpy:             2.1.0 {None=None}\r\nipympl:           0.7.0\r\npyqtgraph:        Not found\r\npooch:            v1.6.0\r\n\r\nmne_bids:         Not found\r\nmne_nirs:         Not found\r\nmne_features:     Not found\r\nmne_qt_browser:   Not found\r\nmne_connectivity: Not found\r\nmne_icalabel:     Not found", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/11195/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/11195/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/11170", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/11170/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/11170/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/11170/events", "html_url": "https://github.com/mne-tools/mne-python/issues/11170", "id": 1375172882, "node_id": "I_kwDOABPcUM5R93kS", "number": 11170, "title": "mne.source_space.add_source_space_distances not correctly populating some attributes", "user": {"login": "nugenta", "id": 15691360, "node_id": "MDQ6VXNlcjE1NjkxMzYw", "avatar_url": "https://avatars.githubusercontent.com/u/15691360?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nugenta", "html_url": "https://github.com/nugenta", "followers_url": "https://api.github.com/users/nugenta/followers", "following_url": "https://api.github.com/users/nugenta/following{/other_user}", "gists_url": "https://api.github.com/users/nugenta/gists{/gist_id}", "starred_url": "https://api.github.com/users/nugenta/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nugenta/subscriptions", "organizations_url": "https://api.github.com/users/nugenta/orgs", "repos_url": "https://api.github.com/users/nugenta/repos", "events_url": "https://api.github.com/users/nugenta/events{/privacy}", "received_events_url": "https://api.github.com/users/nugenta/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/mne-tools/mne-python/milestones/23", "html_url": "https://github.com/mne-tools/mne-python/milestone/23", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/milestones/23/labels", "id": 8047399, "node_id": "MI_kwDOABPcUM4Aessn", "number": 23, "title": "1.2", "description": "", "creator": {"login": "hoechenberger", "id": 2046265, "node_id": "MDQ6VXNlcjIwNDYyNjU=", "avatar_url": "https://avatars.githubusercontent.com/u/2046265?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hoechenberger", "html_url": "https://github.com/hoechenberger", "followers_url": "https://api.github.com/users/hoechenberger/followers", "following_url": "https://api.github.com/users/hoechenberger/following{/other_user}", "gists_url": "https://api.github.com/users/hoechenberger/gists{/gist_id}", "starred_url": "https://api.github.com/users/hoechenberger/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hoechenberger/subscriptions", "organizations_url": "https://api.github.com/users/hoechenberger/orgs", "repos_url": "https://api.github.com/users/hoechenberger/repos", "events_url": "https://api.github.com/users/hoechenberger/events{/privacy}", "received_events_url": "https://api.github.com/users/hoechenberger/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 71, "state": "closed", "created_at": "2022-06-03T17:43:37Z", "updated_at": "2022-10-11T20:15:01Z", "due_on": "2022-09-01T07:00:00Z", "closed_at": "2022-10-11T20:15:01Z"}, "comments": 1, "created_at": "2022-09-15T22:42:17Z", "updated_at": "2022-09-16T09:19:44Z", "closed_at": "2022-09-16T09:19:43Z", "author_association": "NONE", "active_lock_reason": null, "body": "### Description of the problem\n\nThere is a problem with the values added by mne.source_space.add_source_space_distances.  I've run this on the sample data, using the oct-6 forward model, which contains (for the left hemisphere) 155407 vertices in the dense mesh with 3732 vertices in the subsampled mesh. \r\n\r\nAccording to the documentation, the attribute 'patch_inds' should represent, \"for each vertex in the subsampled surface, the indices of the vertices in the dense surface that it represents.\" It is supposed to be a list of arrays. However, after running mne.source_space.add_source_space_distances, src[0]['patch_inds'] is not a list of arrays, it is a single array with length 3732. The values in the array don't even correspond to the single nearest vertex in the dense space, because the values in the array only range from 13 - 4097.\r\n\r\nSimilarly, the documentation states that 'nearest' represents, \"for each vertex on the dense surface, the vertex index on the subsampled surface that its closest to.\" So 'nearest' should be an array with length 155407, with values between 0 and 3731. While it is an array of length 155407, the values range from 59 to 153933. \n\n### Steps to reproduce\n\n```Python\nimport mne\r\nfrom mne.datasets import sample, fetch_fsaverage\r\nimport numpy as np\r\n# Paths to example data\r\nsample_dir_raw = sample.data_path()\r\nsample_dir = sample_dir_raw / 'MEG' / 'sample'\r\nsubjects_dir = sample_dir_raw / 'subjects'\r\nfname_stc = sample_dir / 'sample_audvis-meg'\r\n\r\n# Read the raw data\r\nraw = mne.io.read_raw_fif(raw_fname)\r\nfwd_fname = meg_path / 'sample_audvis-meg-oct-6-fwd.fif'\r\nforward = mne.read_forward_solution(fwd_fname)\r\nmne.source_space.add_source_space_distances(src,dist_limit=0.01)\r\n\r\n# the contents of patch_inds - a single array\r\nsrc[0]['patch_inds']\r\n# if patch_inds gives the corresponding vertex in the original dense mesh, these \r\n# numbers should go up to the total number of vertices in the dense mesh; 155407. \r\n# But they max out at 4097\r\nnp.max(src[0]['patch_inds'])\r\n\r\n# the contents of nearest. This is supposed to be the nearest vertex on the \r\n# subsurface for every vertex on the dense surface. So these values should only\r\n# go up to the number of vertices on the subsurface - 3732\r\nnp.max(src[0]['nearest']\n```\n\n\n### Link to data\n\n_No response_\n\n### Expected results\n\nThe attribute 'patch_inds' should be a list of arrays (of length nuse), where each array contains the nearest vertices in the dense mesh - thus the range of values should be from 0 to np. \r\n\r\nThe attribute 'nearest' should be an array with shape (np,) with values representing the nearest vertex in the subsampled mesh - thus the values should range from 0 to use\n\n### Actual results\n\nIn [37]: np.shape(src[0]['patch_inds'])\r\nOut [37]: (3732,)\r\nIn [38]: np.max(src[0]['patch_inds'])\r\nOut [38]: 4097\r\nIn [39]: np.max(src[0]['nearest'])\r\nOut [39]: 155330\n\n### Additional information\n\nPlatform:         macOS-10.15.7-x86_64-i386-64bit\r\nPython:           3.10.5 | packaged by conda-forge | (main, Jun 14 2022, 07:03:09) [Clang 13.0.1 ]\r\nExecutable:       /Users/nugenta/opt/anaconda3/envs/mne2022/bin/python\r\nCPU:              i386: 4 cores\r\nMemory:           16.0 GB\r\n\r\nmne:              1.1.0\r\nnumpy:            1.22.4 {blas=NO_ATLAS_INFO, lapack=lapack}\r\nscipy:            1.9.0\r\nmatplotlib:       3.5.3 {backend=module://matplotlib_inline.backend_inline}\r\n\r\nsklearn:          1.1.2\r\nnumba:            0.55.2\r\nnibabel:          4.0.1\r\nnilearn:          0.9.1\r\ndipy:             1.5.0\r\ncupy:             Not found\r\npandas:           1.4.3\r\npyvista:          0.36.1 {OpenGL 4.1 INTEL-14.7.28 via Intel(R) UHD Graphics 617}\r\npyvistaqt:        0.9.0\r\nipyvtklink:       0.2.2\r\nvtk:              ", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/11170/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/11170/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/11167", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/11167/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/11167/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/11167/events", "html_url": "https://github.com/mne-tools/mne-python/issues/11167", "id": 1374689445, "node_id": "I_kwDOABPcUM5R8Bil", "number": 11167, "title": "BaseEstimator.__repr__ implementation in mne/fixes is wrong", "user": {"login": "Schmetzler", "id": 12082018, "node_id": "MDQ6VXNlcjEyMDgyMDE4", "avatar_url": "https://avatars.githubusercontent.com/u/12082018?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Schmetzler", "html_url": "https://github.com/Schmetzler", "followers_url": "https://api.github.com/users/Schmetzler/followers", "following_url": "https://api.github.com/users/Schmetzler/following{/other_user}", "gists_url": "https://api.github.com/users/Schmetzler/gists{/gist_id}", "starred_url": "https://api.github.com/users/Schmetzler/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Schmetzler/subscriptions", "organizations_url": "https://api.github.com/users/Schmetzler/orgs", "repos_url": "https://api.github.com/users/Schmetzler/repos", "events_url": "https://api.github.com/users/Schmetzler/events{/privacy}", "received_events_url": "https://api.github.com/users/Schmetzler/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/mne-tools/mne-python/milestones/23", "html_url": "https://github.com/mne-tools/mne-python/milestone/23", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/milestones/23/labels", "id": 8047399, "node_id": "MI_kwDOABPcUM4Aessn", "number": 23, "title": "1.2", "description": "", "creator": {"login": "hoechenberger", "id": 2046265, "node_id": "MDQ6VXNlcjIwNDYyNjU=", "avatar_url": "https://avatars.githubusercontent.com/u/2046265?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hoechenberger", "html_url": "https://github.com/hoechenberger", "followers_url": "https://api.github.com/users/hoechenberger/followers", "following_url": "https://api.github.com/users/hoechenberger/following{/other_user}", "gists_url": "https://api.github.com/users/hoechenberger/gists{/gist_id}", "starred_url": "https://api.github.com/users/hoechenberger/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hoechenberger/subscriptions", "organizations_url": "https://api.github.com/users/hoechenberger/orgs", "repos_url": "https://api.github.com/users/hoechenberger/repos", "events_url": "https://api.github.com/users/hoechenberger/events{/privacy}", "received_events_url": "https://api.github.com/users/hoechenberger/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 71, "state": "closed", "created_at": "2022-06-03T17:43:37Z", "updated_at": "2022-10-11T20:15:01Z", "due_on": "2022-09-01T07:00:00Z", "closed_at": "2022-10-11T20:15:01Z"}, "comments": 3, "created_at": "2022-09-15T15:12:47Z", "updated_at": "2022-09-20T20:17:24Z", "closed_at": "2022-09-20T20:17:24Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "### Description of the problem\n\nI was wondering why my output is spammed with estimator variables using MNE (in combination with MOABB):\r\nIt always looked like this:\r\n\r\n```\r\n{'component_order': 'mutual_info',\r\n 'cov_est': 'concat',\r\n 'cov_method_params': None,\r\n 'log': None,\r\n 'n_components': 8,\r\n 'norm_trace': False,\r\n 'rank': None,\r\n 'reg': None,\r\n 'transform_into': 'average_power'}\r\n{'component_order': 'mutual_info',\r\n 'cov_est': 'concat',\r\n 'cov_method_params': None,\r\n 'log': None,\r\n 'n_components': 8,\r\n 'norm_trace': False,\r\n 'rank': None,\r\n 'reg': None,\r\n 'transform_into': 'average_power'}\r\n... (and so on)\r\n```\r\n\r\nAs it turned out the `__repr__` function of `BaseEstimator` (in mne/fixes) uses `pprint`. The problem is, that pprint does usually write to `sys.stdout` unless told otherwise and does return None. So the `repr` function does not work correctly and just spams the output.\r\n\r\nOne could solve the problem by using a StringIO object and let pprint write into it.\r\n```python\r\nfrom io import StringIO\r\nfrom pprint import pprint\r\n\r\n...\r\n\r\nclass BaseEstimator(object):\r\n   ...\r\n  def __repr__(self):\r\n    pretty_string = StringIO()\r\n    pprint(self.get_params(deep=False), pretty_string)\r\n    pretty_string.seek(0)\r\n    class_name = self.__class__.__name__\r\n    return '%s(%s)' % (class_name, pretty_string.read().strip()))\r\n```\n\n### Steps to reproduce\n\n```Python\nfrom mne.decoding import CSP\r\n\r\ncsp = CSP()\r\nres = repr(csp)\r\nprint(res)\n```\n\n\n### Link to data\n\n_No response_\n\n### Expected results\n\n```\r\n>>> res = repr(csp)\r\n>>> print(res)\r\nCSP({'component_order': 'mutual_info',\r\n 'cov_est': 'concat',\r\n 'cov_method_params': None,\r\n 'log': None,\r\n 'n_components': 4,\r\n 'norm_trace': False,\r\n 'rank': None,\r\n 'reg': None,\r\n 'transform_into': 'average_power'})\r\n```\n\n### Actual results\n\n```\r\n>>> res = repr(csp)\r\n{'component_order': 'mutual_info',\r\n 'cov_est': 'concat',\r\n 'cov_method_params': None,\r\n 'log': None,\r\n 'n_components': 4,\r\n 'norm_trace': False,\r\n 'rank': None,\r\n 'reg': None,\r\n 'transform_into': 'average_power'}\r\n>>> print(res)\r\nCSP(None)\r\n```\n\n### Additional information\n\nPlatform:         Linux-5.10.136-1-MANJARO-x86_64-with-glibc2.36\r\nPython:           3.10.5 (main, Aug  1 2022, 07:53:20) [GCC 12.1.0]\r\nExecutable:       /usr/bin/python\r\nCPU:              : 4 cores\r\nMemory:           31.1 GB\r\n\r\nmne:              1.1.0\r\nnumpy:            1.23.1 {blas=NO_ATLAS_INFO, lapack=lapack}\r\nscipy:            1.9.0\r\nmatplotlib:       3.5.2 {backend=QtAgg}\r\n\r\nsklearn:          1.1.1\r\nnumba:            Not found\r\nnibabel:          Not found\r\nnilearn:          Not found\r\ndipy:             Not found\r\ncupy:             Not found\r\npandas:           1.4.3\r\npyvista:          Not found\r\npyvistaqt:        Not found\r\nipyvtklink:       Not found\r\nvtk:              Not found\r\nqtpy:             Not found\r\nipympl:           Not found\r\npyqtgraph:        Not found\r\npooch:            v1.6.0\r\n\r\nmne_bids:         Not found\r\nmne_nirs:         Not found\r\nmne_features:     Not found\r\nmne_qt_browser:   Not found\r\nmne_connectivity: Not found\r\nmne_icalabel:     Not found\r\n", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/11167/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/11167/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/11161", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/11161/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/11161/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/11161/events", "html_url": "https://github.com/mne-tools/mne-python/issues/11161", "id": 1371779094, "node_id": "I_kwDOABPcUM5Rw7AW", "number": 11161, "title": "Empty plot_alignment for fsaverage and eegbci sample", "user": {"login": "nikmedoed", "id": 23284564, "node_id": "MDQ6VXNlcjIzMjg0NTY0", "avatar_url": "https://avatars.githubusercontent.com/u/23284564?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nikmedoed", "html_url": "https://github.com/nikmedoed", "followers_url": "https://api.github.com/users/nikmedoed/followers", "following_url": "https://api.github.com/users/nikmedoed/following{/other_user}", "gists_url": "https://api.github.com/users/nikmedoed/gists{/gist_id}", "starred_url": "https://api.github.com/users/nikmedoed/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nikmedoed/subscriptions", "organizations_url": "https://api.github.com/users/nikmedoed/orgs", "repos_url": "https://api.github.com/users/nikmedoed/repos", "events_url": "https://api.github.com/users/nikmedoed/events{/privacy}", "received_events_url": "https://api.github.com/users/nikmedoed/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2022-09-13T17:28:36Z", "updated_at": "2022-09-14T14:58:48Z", "closed_at": "2022-09-14T14:58:25Z", "author_association": "NONE", "active_lock_reason": null, "body": "### Description of the problem\n\nI execute the first 2 blocks of code from [this article](https://mne.tools/stable/auto_tutorials/forward/35_eeg_no_mri.html), and get an empty display in jupyter notebook.\r\n![Screenshot ](https://i.imgur.com/SpCaow0.png)\r\n\r\nWhen running with CLI, the window closes instantly. \r\n\r\nI also got empty plotting with some other commands, but not always. What could this be related to?\n\n### Steps to reproduce\n\n```Python\nimport os.path as op\r\nimport numpy as np\r\n\r\nimport mne\r\nfrom mne.datasets import eegbci\r\nfrom mne.datasets import fetch_fsaverage\r\n\r\nfs_dir = fetch_fsaverage(verbose=True)\r\nsubjects_dir = op.dirname(fs_dir)\r\nsubject = 'fsaverage'\r\ntrans = 'fsaverage'  # MNE has a built-in fsaverage transformation\r\nsrc = op.join(fs_dir, 'bem', 'fsaverage-ico-5-src.fif')\r\nbem = op.join(fs_dir, 'bem', 'fsaverage-5120-5120-5120-bem-sol.fif')\r\n\r\nraw_fname, = eegbci.load_data(subject=1, runs=[6])\r\nraw = mne.io.read_raw_edf(raw_fname, preload=True)\r\n\r\nnew_names = dict(\r\n    (ch_name,\r\n     ch_name.rstrip('.').upper().replace('Z', 'z').replace('FP', 'Fp'))\r\n    for ch_name in raw.ch_names)\r\nraw.rename_channels(new_names)\r\n\r\nmontage = mne.channels.make_standard_montage('standard_1005')\r\nraw.set_montage(montage)\r\nraw.set_eeg_reference(projection=True)  # needed for inverse modeling\r\n\r\nmne.viz.plot_alignment(\r\n    raw.info, src=src, eeg=['original', 'projected'], trans=trans,\r\n    show_axes=True, mri_fiducials=True, dig='fiducials')\n```\n\n\n### Link to data\n\n_No response_\n\n### Expected results\n\nI want to compute forward operator for my only EEG (Brain Vision) data.\r\nAnd then plot LORETA view.\r\n\n\n### Actual results\n\nDisappointment\n\n### Additional information\n\nPlatform:         Windows-10-10.0.19044-SP0\r\nPython:           3.9.12 (main, Apr  4 2022, 05:22:27) [MSC v.1916 64 bit (AMD64)]\r\nExecutable:       C:\\Users\\sirne\\miniconda3\\python.exe\r\nCPU:              Intel64 Family 6 Model 60 Stepping 3, GenuineIntel: 8 cores\r\nMemory:           15.9 GB\r\n\r\nmne:              1.1.1\r\nnumpy:            1.23.1 {}\r\nscipy:            1.9.1\r\nmatplotlib:       3.5.2 {backend=module://matplotlib_inline.backend_inline}\r\n\r\nsklearn:          1.1.2\r\nnumba:            0.56.2\r\nnibabel:          4.0.2\r\nnilearn:          Not found\r\ndipy:             Not found\r\ncupy:             Not found\r\npandas:           1.4.3\r\npyvista:          0.36.1 {OpenGL 4.3.0 - Build 20.19.15.5070 via Intel(R) HD Graphics 4600}\r\npyvistaqt:        0.9.0\r\nipyvtklink:       Not found\r\nvtk:              9.1.0\r\nqtpy:             2.0.1 {PyQt5=5.15.2}\r\nipympl:           Not found\r\npyqtgraph:        Not found\r\npooch:            v1.6.0\r\n\r\nmne_bids:         Not found\r\nmne_nirs:         Not found\r\nmne_features:     Not found\r\nmne_qt_browser:   Not found\r\nmne_connectivity: Not found\r\nmne_icalabel:     Not found", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/11161/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/11161/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/11135", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/11135/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/11135/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/11135/events", "html_url": "https://github.com/mne-tools/mne-python/issues/11135", "id": 1361149393, "node_id": "I_kwDOABPcUM5RIX3R", "number": 11135, "title": "UnicodeDecodeError for new version", "user": {"login": "MrNobodyCali", "id": 38969235, "node_id": "MDQ6VXNlcjM4OTY5MjM1", "avatar_url": "https://avatars.githubusercontent.com/u/38969235?v=4", "gravatar_id": "", "url": "https://api.github.com/users/MrNobodyCali", "html_url": "https://github.com/MrNobodyCali", "followers_url": "https://api.github.com/users/MrNobodyCali/followers", "following_url": "https://api.github.com/users/MrNobodyCali/following{/other_user}", "gists_url": "https://api.github.com/users/MrNobodyCali/gists{/gist_id}", "starred_url": "https://api.github.com/users/MrNobodyCali/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/MrNobodyCali/subscriptions", "organizations_url": "https://api.github.com/users/MrNobodyCali/orgs", "repos_url": "https://api.github.com/users/MrNobodyCali/repos", "events_url": "https://api.github.com/users/MrNobodyCali/events{/privacy}", "received_events_url": "https://api.github.com/users/MrNobodyCali/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 10, "created_at": "2022-09-04T13:21:37Z", "updated_at": "2022-09-13T02:42:12Z", "closed_at": "2022-09-13T02:42:12Z", "author_association": "NONE", "active_lock_reason": null, "body": "### Description of the problem\r\n\r\nWhen I read some .edf files by `read_raw_edf()` function, the codes from Version 0.24.1 succeed to read all the files. However, the codes from Version 1.1.1 succeed to read some files, but report an error while reading one file as:\r\n> UnicodeDecodeError: 'utf-8' codec can't decode byte 0xc8 in position 34915709: invalid continuation byte\r\n\r\n### Steps to reproduce\r\n\r\n```Python\r\nself.raw_data = read_raw_edf(raw_data_path, preload=False)[:][0]\r\nwhere `raw_data_path` includes a .edf file.\r\n```\r\n\r\n\r\n### Link to data\r\n\r\n_No response_\r\n\r\n### Expected results\r\n\r\nSucceed to read all files.\r\n\r\n### Actual results\r\n\r\n  File \"/home/xxx/anaconda3/lib/python3.7/site-packages/mne/io/edf/edf.py\", line 1387, in read_raw_edf\r\n    verbose=verbose)\r\n  File \"<decorator-gen-229>\", line 12, in \\_\\_init\\_\\_\r\n  File \"/home/xxx/anaconda3/lib/python3.7/site-packages/mne/io/edf/edf.py\", line 158, in \\_\\_init\\_\\_\r\n    onset, duration, desc = _read_annotations_edf(tal_data[0])\r\n  File \"/home/xxx/anaconda3/lib/python3.7/site-packages/mne/io/edf/edf.py\", line 1590, in _read_annotations_edf\r\n    triggers = re.findall(pat, tals.decode('utf8'))\r\nUnicodeDecodeError: 'utf-8' codec can't decode byte 0xc8 in position 34915709: invalid continuation byte\r\n\r\n### Additional information\r\n\r\nPlatform:         Linux-4.15.0-188-generic-x86_64-with-debian-buster-sid\r\nPython:           3.7.11 (default, Jul 27 2021, 14:32:16)  [GCC 7.5.0]\r\nExecutable:       /home/xxx/anaconda3/bin/python\r\nCPU:              x86_64: 256 cores\r\nMemory:           755.8 GB\r\n\r\nmne:              1.1.1\r\nnumpy:            1.20.3 {blas=mkl_rt, lapack=mkl_rt}\r\nscipy:            1.7.3\r\nmatplotlib:       3.5.1 {backend=agg}\r\n\r\nsklearn:          0.24.2\r\nnumba:            0.54.1\r\nnibabel:          Not found\r\nnilearn:          Not found\r\ndipy:             Not found\r\ncupy:             Not found\r\npandas:           1.3.5\r\npyvista:          Not found\r\npyvistaqt:        Not found\r\nipyvtklink:       Not found\r\nvtk:              Not found\r\nqtpy:             2.0.1 {PyQt5=5.9.6}\r\nipympl:           Not found\r\npyqtgraph:        Not found\r\npooch:            v1.6.0\r\n\r\nmne_bids:         Not found\r\nmne_nirs:         Not found\r\nmne_features:     Not found\r\nmne_qt_browser:   Not found\r\nmne_connectivity: Not found\r\nmne_icalabel:     Not found", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/11135/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/11135/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/11133", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/11133/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/11133/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/11133/events", "html_url": "https://github.com/mne-tools/mne-python/issues/11133", "id": 1360863603, "node_id": "I_kwDOABPcUM5RHSFz", "number": 11133, "title": "Bug with plot_topomap and coordinate transformations following #11081", "user": {"login": "mscheltienne", "id": 73893616, "node_id": "MDQ6VXNlcjczODkzNjE2", "avatar_url": "https://avatars.githubusercontent.com/u/73893616?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mscheltienne", "html_url": "https://github.com/mscheltienne", "followers_url": "https://api.github.com/users/mscheltienne/followers", "following_url": "https://api.github.com/users/mscheltienne/following{/other_user}", "gists_url": "https://api.github.com/users/mscheltienne/gists{/gist_id}", "starred_url": "https://api.github.com/users/mscheltienne/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mscheltienne/subscriptions", "organizations_url": "https://api.github.com/users/mscheltienne/orgs", "repos_url": "https://api.github.com/users/mscheltienne/repos", "events_url": "https://api.github.com/users/mscheltienne/events{/privacy}", "received_events_url": "https://api.github.com/users/mscheltienne/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 7, "created_at": "2022-09-03T13:54:18Z", "updated_at": "2022-12-15T15:10:16Z", "closed_at": "2022-12-15T13:26:47Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "### Description of the problem\r\n\r\nFollowing #11081, topomaps created with digitization points provided as `Info` don't look the same.\r\nIt has to do with `dev_head_t` (I think). Now that `info` is not None, `sphere` value is replaced from `None` to `'auto'` here https://github.com/mne-tools/mne-python/blob/4310c92b85fa7dcc77ffe322501037e5ad82372d/mne/utils/check.py#L848-L857\r\nwhich means that we now enter this statement https://github.com/mne-tools/mne-python/blob/4310c92b85fa7dcc77ffe322501037e5ad82372d/mne/utils/check.py#L859-L869\r\n\r\n### Steps to reproduce\r\n\r\n```Python\r\nfrom mne.datasets import testing\r\nfrom mne.io import read_raw_fif\r\n\r\nfrom mne.viz import plot_topomap\r\n\r\n\r\ndirectory = testing.data_path() / \"MEG\" / \"sample\"\r\nfname = directory / \"sample_audvis_trunc_raw.fif\"\r\nraw = read_raw_fif(fname, preload=False)\r\nraw = raw.crop(0, 10).pick(\"eeg\").load_data().apply_proj()\r\n\r\nplot_topomap(raw.get_data()[:, 101], raw.info)\r\n```\r\n\r\n### Expected results\r\n\r\nOn `mne-stable 1.1.1`, a nice looking topographic map:\r\n\r\n![image](https://user-images.githubusercontent.com/73893616/188273559-d8d5bb45-e52b-4187-bda1-ccee51a68c76.png)\r\n\r\n### Actual results\r\n\r\nOn `mne-main 1.2`, a weird looking topographic map:\r\n\r\n![image](https://user-images.githubusercontent.com/73893616/188273606-625abbee-a46e-4256-9659-fd04da445223.png)\r\n", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/11133/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/11133/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/11128", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/11128/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/11128/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/11128/events", "html_url": "https://github.com/mne-tools/mne-python/issues/11128", "id": 1360086235, "node_id": "I_kwDOABPcUM5REUTb", "number": 11128, "title": "Plot window not showing up", "user": {"login": "Liam-Noah", "id": 67709116, "node_id": "MDQ6VXNlcjY3NzA5MTE2", "avatar_url": "https://avatars.githubusercontent.com/u/67709116?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Liam-Noah", "html_url": "https://github.com/Liam-Noah", "followers_url": "https://api.github.com/users/Liam-Noah/followers", "following_url": "https://api.github.com/users/Liam-Noah/following{/other_user}", "gists_url": "https://api.github.com/users/Liam-Noah/gists{/gist_id}", "starred_url": "https://api.github.com/users/Liam-Noah/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Liam-Noah/subscriptions", "organizations_url": "https://api.github.com/users/Liam-Noah/orgs", "repos_url": "https://api.github.com/users/Liam-Noah/repos", "events_url": "https://api.github.com/users/Liam-Noah/events{/privacy}", "received_events_url": "https://api.github.com/users/Liam-Noah/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2022-09-02T11:49:49Z", "updated_at": "2022-09-02T13:15:24Z", "closed_at": "2022-09-02T13:15:24Z", "author_association": "NONE", "active_lock_reason": null, "body": "### Description of the problem\n\nHello,\r\n\r\nI'm following the tutorial here https://mne.tools/stable/auto_tutorials/intro/10_overview.html#sphx-glr-auto-tutorials-intro-10-overview-py . At one point I have to plot the raw fif file \r\nraw.plot(duration=5, n_channels=30)\r\nThe window appears a few milliseconds then dissapears. \r\nWith verbose level to debug I get only this in the command prompt:\r\n\r\nUsing matplotlib as 2D backend.\r\nOpening raw browser...\r\nUsing normal I/O\r\nUsing normal I/O\r\n\r\nOn the other hand raw.plot_psd(fmax=50) works correctly. The windows appears and is clickable. \r\nOn pycharm both windows appear but they are images and not clickable. \r\n\n\n### Steps to reproduce\n\n```Python\nimport mne\r\nimport matplotlib\r\nprint(matplotlib.rcParams['backend'])\r\n\r\nsample_data_folder = mne.datasets.sample.data_path()\r\nsample_data_raw_file = (sample_data_folder / 'MEG' / 'sample' /\r\n                        'sample_audvis_filt-0-40_raw.fif')\r\nraw = mne.io.read_raw_fif(sample_data_raw_file)\r\n\r\n\r\nprint(raw)\r\nprint(raw.info)\r\n\r\nraw.plot_psd(fmax=50)\r\nprint('here1')\r\nraw.plot(duration=25.0, n_channels=30, use_opengl=False, verbose='DEBUG')\r\nprint('here2')\n```\n\n\n### Link to data\n\n_No response_\n\n### Expected results\n\nThe plot should show up in a new window.\n\n### Actual results\n\nThe plot appears a few milliseconds then dissapears. \n\n### Additional information\n\nPlatform:         Windows-10-10.0.19041-SP0\r\nPython:           3.9.0 (tags/v3.9.0:9cf6752, Oct  5 2020, 15:34:40) [MSC v.1927 64 bit (AMD64)]\r\nExecutable:       C:\\Users\\vladi\\AppData\\Local\\Programs\\Python\\Python39\\python.exe\r\nCPU:              Intel64 Family 6 Model 94 Stepping 3, GenuineIntel: 4 cores\r\nMemory:           15.9 GB\r\n\r\nmne:              1.1.1\r\nnumpy:            1.23.2 {}\r\nscipy:            1.9.0\r\nmatplotlib:       3.5.3 {backend=QtAgg}\r\n\r\nsklearn:          1.1.2\r\nnumba:            Not found\r\nnibabel:          Not found\r\nnilearn:          Not found\r\ndipy:             Not found\r\ncupy:             Not found\r\npandas:           1.4.3\r\npyvista:          Not found\r\npyvistaqt:        Not found\r\nipyvtklink:       Not found\r\nvtk:              Not found\r\nqtpy:             2.2.0 {PyQt5=5.15.2}\r\nipympl:           Not found\r\npyqtgraph:        Not found\r\npooch:            v1.6.0\r\n\r\nmne_bids:         Not found\r\nmne_nirs:         Not found\r\nmne_features:     Not found\r\nmne_qt_browser:   Not found\r\nmne_connectivity: Not found\r\nmne_icalabel:     Not found\r\n", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/11128/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/11128/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/11112", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/11112/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/11112/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/11112/events", "html_url": "https://github.com/mne-tools/mne-python/issues/11112", "id": 1354475205, "node_id": "I_kwDOABPcUM5Qu6bF", "number": 11112, "title": "GSR and temperature channels do not show up in plot", "user": {"login": "hoechenberger", "id": 2046265, "node_id": "MDQ6VXNlcjIwNDYyNjU=", "avatar_url": "https://avatars.githubusercontent.com/u/2046265?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hoechenberger", "html_url": "https://github.com/hoechenberger", "followers_url": "https://api.github.com/users/hoechenberger/followers", "following_url": "https://api.github.com/users/hoechenberger/following{/other_user}", "gists_url": "https://api.github.com/users/hoechenberger/gists{/gist_id}", "starred_url": "https://api.github.com/users/hoechenberger/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hoechenberger/subscriptions", "organizations_url": "https://api.github.com/users/hoechenberger/orgs", "repos_url": "https://api.github.com/users/hoechenberger/repos", "events_url": "https://api.github.com/users/hoechenberger/events{/privacy}", "received_events_url": "https://api.github.com/users/hoechenberger/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 7, "created_at": "2022-08-29T15:17:17Z", "updated_at": "2022-09-13T21:36:44Z", "closed_at": "2022-09-13T21:36:44Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "MWE:\r\n```python\r\n# %%\r\nfrom pathlib import Path\r\nimport openneuro\r\nimport mne\r\nimport mne_bids\r\n\r\ndataset_name = 'ds003061'\r\nbids_root = Path('/tmp') / dataset_name\r\n\r\n# %%\r\nopenneuro.download(\r\n    dataset=dataset_name,\r\n    include='sub-001',\r\n    target_dir=bids_root,\r\n)\r\n\r\n# %%\r\nbp = mne_bids.BIDSPath(\r\n    subject='001',\r\n    task='P300',\r\n    run='1',\r\n    datatype='eeg',\r\n    suffix='eeg',\r\n    extension='.set',\r\n    root=bids_root,\r\n)\r\nraw = mne_bids.read_raw_bids(bp)\r\n\r\nwith mne.viz.use_browser_backend('matplotlib'):\r\n    raw.copy().pick(['GSR1', 'GSR2' 'Temp']).plot()\r\n```\r\n\r\nproduces:\r\n![image](https://user-images.githubusercontent.com/2046265/187235163-ac101aa4-ef2f-4e98-92b5-9c3b4f8ec015.png)\r\n", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/11112/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/11112/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/11113", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/11113/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/11113/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/11113/events", "html_url": "https://github.com/mne-tools/mne-python/issues/11113", "id": 1354481108, "node_id": "I_kwDOABPcUM5Qu73U", "number": 11113, "title": "Scaling is off for tiny_bids", "user": {"login": "hoechenberger", "id": 2046265, "node_id": "MDQ6VXNlcjIwNDYyNjU=", "avatar_url": "https://avatars.githubusercontent.com/u/2046265?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hoechenberger", "html_url": "https://github.com/hoechenberger", "followers_url": "https://api.github.com/users/hoechenberger/followers", "following_url": "https://api.github.com/users/hoechenberger/following{/other_user}", "gists_url": "https://api.github.com/users/hoechenberger/gists{/gist_id}", "starred_url": "https://api.github.com/users/hoechenberger/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hoechenberger/subscriptions", "organizations_url": "https://api.github.com/users/hoechenberger/orgs", "repos_url": "https://api.github.com/users/hoechenberger/repos", "events_url": "https://api.github.com/users/hoechenberger/events{/privacy}", "received_events_url": "https://api.github.com/users/hoechenberger/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}, {"id": 77061445, "node_id": "MDU6TGFiZWw3NzA2MTQ0NQ==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/EASY", "name": "EASY", "color": "2be2d6", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": {"login": "sappelhoff", "id": 9084751, "node_id": "MDQ6VXNlcjkwODQ3NTE=", "avatar_url": "https://avatars.githubusercontent.com/u/9084751?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sappelhoff", "html_url": "https://github.com/sappelhoff", "followers_url": "https://api.github.com/users/sappelhoff/followers", "following_url": "https://api.github.com/users/sappelhoff/following{/other_user}", "gists_url": "https://api.github.com/users/sappelhoff/gists{/gist_id}", "starred_url": "https://api.github.com/users/sappelhoff/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sappelhoff/subscriptions", "organizations_url": "https://api.github.com/users/sappelhoff/orgs", "repos_url": "https://api.github.com/users/sappelhoff/repos", "events_url": "https://api.github.com/users/sappelhoff/events{/privacy}", "received_events_url": "https://api.github.com/users/sappelhoff/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "sappelhoff", "id": 9084751, "node_id": "MDQ6VXNlcjkwODQ3NTE=", "avatar_url": "https://avatars.githubusercontent.com/u/9084751?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sappelhoff", "html_url": "https://github.com/sappelhoff", "followers_url": "https://api.github.com/users/sappelhoff/followers", "following_url": "https://api.github.com/users/sappelhoff/following{/other_user}", "gists_url": "https://api.github.com/users/sappelhoff/gists{/gist_id}", "starred_url": "https://api.github.com/users/sappelhoff/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sappelhoff/subscriptions", "organizations_url": "https://api.github.com/users/sappelhoff/orgs", "repos_url": "https://api.github.com/users/sappelhoff/repos", "events_url": "https://api.github.com/users/sappelhoff/events{/privacy}", "received_events_url": "https://api.github.com/users/sappelhoff/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 10, "created_at": "2022-08-29T14:23:30Z", "updated_at": "2022-09-13T09:14:51Z", "closed_at": "2022-09-13T09:14:21Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "### Description of the problem\r\n\r\nI think this screenshot demonstrates the issue:\r\n<img width=\"1050\" alt=\"Screen Shot 2022-08-29 at 16 22 03\" src=\"https://user-images.githubusercontent.com/2046265/187223852-852b8fcd-f73f-4ba7-a9fb-35fd8007995d.png\">\r\n\r\n\r\n### Steps to reproduce\r\n\r\n```python\r\n# %%\r\nfrom pathlib import Path\r\nimport mne_bids\r\nfrom mne_bids import BIDSPath, read_raw_bids\r\n\r\nmne_bids_root = Path(mne_bids.__file__).parents[1]\r\ntiny_bids_root = mne_bids_root / \"mne_bids\" / \"tests\" / \"data\" / \"tiny_bids\"\r\n\r\n\r\nbids_path = BIDSPath(\r\n    subject='01', session='eeg', task='rest', datatype='eeg',\r\n    root=tiny_bids_root\r\n)\r\nraw = read_raw_bids(bids_path)\r\nraw.plot(block=True)\r\n```\r\n\r\nThis is with MNE and MNE-BIDS `main`\r\n\r\n### Expected results\r\n\r\nSignal PTP should be in the range of maybe 300 or 500 \u00b5V max?\r\n\r\n### Actual results\r\n\r\nPTP amplitude is much larger (2\u20133 units of magnitude)\r\n\r\n### Additional information\r\n\r\n_No response_", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/11113/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/11113/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/11100", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/11100/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/11100/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/11100/events", "html_url": "https://github.com/mne-tools/mne-python/issues/11100", "id": 1352989704, "node_id": "I_kwDOABPcUM5QpPwI", "number": 11100, "title": "BUG: Example broken on main", "user": {"login": "larsoner", "id": 2365790, "node_id": "MDQ6VXNlcjIzNjU3OTA=", "avatar_url": "https://avatars.githubusercontent.com/u/2365790?v=4", "gravatar_id": "", "url": "https://api.github.com/users/larsoner", "html_url": "https://github.com/larsoner", "followers_url": "https://api.github.com/users/larsoner/followers", "following_url": "https://api.github.com/users/larsoner/following{/other_user}", "gists_url": "https://api.github.com/users/larsoner/gists{/gist_id}", "starred_url": "https://api.github.com/users/larsoner/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/larsoner/subscriptions", "organizations_url": "https://api.github.com/users/larsoner/orgs", "repos_url": "https://api.github.com/users/larsoner/repos", "events_url": "https://api.github.com/users/larsoner/events{/privacy}", "received_events_url": "https://api.github.com/users/larsoner/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2022-08-27T08:58:19Z", "updated_at": "2022-08-29T11:31:29Z", "closed_at": "2022-08-29T11:31:29Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "@wmvanvliet I think #11080 broke `tutorials/clinical/30_ecog.py`:\r\n\r\nhttps://app.circleci.com/pipelines/github/mne-tools/mne-python/16047/workflows/321560de-8d55-44f2-be22-e68382086eff/jobs/48440\r\n\r\nCan you take a look?", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/11100/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/11100/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/11091", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/11091/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/11091/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/11091/events", "html_url": "https://github.com/mne-tools/mne-python/issues/11091", "id": 1351165210, "node_id": "I_kwDOABPcUM5QiSUa", "number": 11091, "title": "Wrong dB normalization for TFR plots", "user": {"login": "Martin2Constant", "id": 25343725, "node_id": "MDQ6VXNlcjI1MzQzNzI1", "avatar_url": "https://avatars.githubusercontent.com/u/25343725?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Martin2Constant", "html_url": "https://github.com/Martin2Constant", "followers_url": "https://api.github.com/users/Martin2Constant/followers", "following_url": "https://api.github.com/users/Martin2Constant/following{/other_user}", "gists_url": "https://api.github.com/users/Martin2Constant/gists{/gist_id}", "starred_url": "https://api.github.com/users/Martin2Constant/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Martin2Constant/subscriptions", "organizations_url": "https://api.github.com/users/Martin2Constant/orgs", "repos_url": "https://api.github.com/users/Martin2Constant/repos", "events_url": "https://api.github.com/users/Martin2Constant/events{/privacy}", "received_events_url": "https://api.github.com/users/Martin2Constant/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "drammock", "id": 1810515, "node_id": "MDQ6VXNlcjE4MTA1MTU=", "avatar_url": "https://avatars.githubusercontent.com/u/1810515?v=4", "gravatar_id": "", "url": "https://api.github.com/users/drammock", "html_url": "https://github.com/drammock", "followers_url": "https://api.github.com/users/drammock/followers", "following_url": "https://api.github.com/users/drammock/following{/other_user}", "gists_url": "https://api.github.com/users/drammock/gists{/gist_id}", "starred_url": "https://api.github.com/users/drammock/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/drammock/subscriptions", "organizations_url": "https://api.github.com/users/drammock/orgs", "repos_url": "https://api.github.com/users/drammock/repos", "events_url": "https://api.github.com/users/drammock/events{/privacy}", "received_events_url": "https://api.github.com/users/drammock/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "drammock", "id": 1810515, "node_id": "MDQ6VXNlcjE4MTA1MTU=", "avatar_url": "https://avatars.githubusercontent.com/u/1810515?v=4", "gravatar_id": "", "url": "https://api.github.com/users/drammock", "html_url": "https://github.com/drammock", "followers_url": "https://api.github.com/users/drammock/followers", "following_url": "https://api.github.com/users/drammock/following{/other_user}", "gists_url": "https://api.github.com/users/drammock/gists{/gist_id}", "starred_url": "https://api.github.com/users/drammock/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/drammock/subscriptions", "organizations_url": "https://api.github.com/users/drammock/orgs", "repos_url": "https://api.github.com/users/drammock/repos", "events_url": "https://api.github.com/users/drammock/events{/privacy}", "received_events_url": "https://api.github.com/users/drammock/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/mne-tools/mne-python/milestones/23", "html_url": "https://github.com/mne-tools/mne-python/milestone/23", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/milestones/23/labels", "id": 8047399, "node_id": "MI_kwDOABPcUM4Aessn", "number": 23, "title": "1.2", "description": "", "creator": {"login": "hoechenberger", "id": 2046265, "node_id": "MDQ6VXNlcjIwNDYyNjU=", "avatar_url": "https://avatars.githubusercontent.com/u/2046265?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hoechenberger", "html_url": "https://github.com/hoechenberger", "followers_url": "https://api.github.com/users/hoechenberger/followers", "following_url": "https://api.github.com/users/hoechenberger/following{/other_user}", "gists_url": "https://api.github.com/users/hoechenberger/gists{/gist_id}", "starred_url": "https://api.github.com/users/hoechenberger/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hoechenberger/subscriptions", "organizations_url": "https://api.github.com/users/hoechenberger/orgs", "repos_url": "https://api.github.com/users/hoechenberger/repos", "events_url": "https://api.github.com/users/hoechenberger/events{/privacy}", "received_events_url": "https://api.github.com/users/hoechenberger/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 71, "state": "closed", "created_at": "2022-06-03T17:43:37Z", "updated_at": "2022-10-11T20:15:01Z", "due_on": "2022-09-01T07:00:00Z", "closed_at": "2022-10-11T20:15:01Z"}, "comments": 2, "created_at": "2022-08-25T16:27:31Z", "updated_at": "2022-10-05T19:00:02Z", "closed_at": "2022-10-05T19:00:01Z", "author_association": "NONE", "active_lock_reason": null, "body": "#### Bug description\r\nWhen using the plot() method on an AverageTFR object with the dB argument set to True, the dB normalization applied is `20*log10(data)` instead of `10*log10(data)` (which is what is specified in the documentation). \r\nIf I'm not mistaken, `20*log10(data)` dB normalization is for amplitude data, not power data. I spotted this problem with this function, but it probably applies to other functions where the dB argument can be specified.\r\n\r\nI suppose the problem lies here: https://github.com/mne-tools/mne-python/blob/fb80e1163ef1f89479ca7f07cb0e09e996b23cd8/mne/time_frequency/tfr.py#L2464-L2465 from the recent commit https://github.com/mne-tools/mne-python/commit/4a1bf6bb7b5b1f384ac3b1bc21fc1a660cf6f3d2\r\n", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/11091/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/11091/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/11088", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/11088/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/11088/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/11088/events", "html_url": "https://github.com/mne-tools/mne-python/issues/11088", "id": 1350649476, "node_id": "I_kwDOABPcUM5QgUaE", "number": 11088, "title": "Bug with transformation from cartesian to sphere to cartesian coordinates", "user": {"login": "mscheltienne", "id": 73893616, "node_id": "MDQ6VXNlcjczODkzNjE2", "avatar_url": "https://avatars.githubusercontent.com/u/73893616?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mscheltienne", "html_url": "https://github.com/mscheltienne", "followers_url": "https://api.github.com/users/mscheltienne/followers", "following_url": "https://api.github.com/users/mscheltienne/following{/other_user}", "gists_url": "https://api.github.com/users/mscheltienne/gists{/gist_id}", "starred_url": "https://api.github.com/users/mscheltienne/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mscheltienne/subscriptions", "organizations_url": "https://api.github.com/users/mscheltienne/orgs", "repos_url": "https://api.github.com/users/mscheltienne/repos", "events_url": "https://api.github.com/users/mscheltienne/events{/privacy}", "received_events_url": "https://api.github.com/users/mscheltienne/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2022-08-25T10:02:03Z", "updated_at": "2022-08-29T22:23:18Z", "closed_at": "2022-08-29T22:23:18Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "I am not sure it's a bug, I feel like I'm missing something obvious.. Following #11079 I've been looking at the code of `interpolate_bridged_electrodes` and I ran into a weird case. I'm testing code to add virtual channels at the average location between N bridged electrodes on this recording:\r\n\r\n![Screenshot 2022-08-25 at 11 48 24](https://user-images.githubusercontent.com/73893616/186633401-8c5c0920-911b-4e43-8c88-5722e47e3c24.png)\r\n\r\nI'm not going to provide that code snippet for now, I'll wait for opinions on #11079, but it creates 3 virtual channels. One at the center of the triangle (AF3, F3, F1), one very close to PO5... and a last one, between T8 and TP8 on the wrong side of the head!!\r\n\r\n-------------\r\n\r\nNow, consider this example, with code very similar to `interpolate_bridged_electrodes`:\r\n\r\n```\r\nimport numpy as np\r\nfrom mne import create_info\r\nfrom mne.transforms import _cart_to_sph, _sph_to_cart\r\n\r\n\r\ninfo = create_info([\"T7\", \"TP7\", \"T8\", \"TP8\"], sfreq=1024, ch_types=\"eeg\")\r\ninfo.set_montage(\"standard_1020\")\r\nmontage = info.get_montage()\r\npos = montage.get_positions()\r\nassert pos[\"coord_frame\"] == \"head\"\r\n\r\nch_pos = pos[\"ch_pos\"]\r\n\r\n# create virtual channel midway between T7 and TP7\r\nch_names = [\"T7\", \"TP7\"]\r\nsphere_positions = np.zeros((len(ch_names), 3))\r\nfor i, ch_name in enumerate(ch_names):\r\n    sphere_positions[i, :] = _cart_to_sph(ch_pos[ch_name])\r\npos_virtual = _sph_to_cart(np.average(sphere_positions, axis=0))\r\n```\r\n\r\n`ch_pos` reads as:\r\n\r\n```\r\nOrderedDict([('T7',  array([-0.08598208,  0.01487164,  0.03117337])),\r\n             ('TP7', array([-0.08675728, -0.01495098,  0.03515866])),\r\n             ('T8',  array([0.08326137, 0.01525819, 0.03097297])),\r\n             ('TP8', array([ 0.08362232, -0.01508567,  0.0350577 ]))])\r\n```\r\n\r\nNote that T7 and TP7, with odd numbers, have a **negative** x coordinate.\r\n\r\n`pos_virtual` reads as `array([[ 8.76692427e-02, -2.68577709e-05,  3.31532296e-02]])`, with a **positive** x coordinate.\r\n\r\n-----------\r\n\r\nAnd to make it more explicit, here is the next couples of lines to get to a plot, using very similar code to `interpolate_bridged_electrodes`:\r\n\r\n```\r\nimport numpy as np\r\nfrom mne import create_info\r\nfrom mne.io import RawArray\r\nfrom mne.transforms import _cart_to_sph, _sph_to_cart\r\n\r\n\r\ninfo = create_info([\"T7\", \"TP7\", \"T8\", \"TP8\"], sfreq=1024, ch_types=\"eeg\")\r\ninfo.set_montage(\"standard_1020\")\r\nmontage = info.get_montage()\r\npos = montage.get_positions()\r\nassert pos['coord_frame'] == \"head\"\r\n\r\nch_pos = pos[\"ch_pos\"]\r\n\r\n# create virtual channel midway between T7 and TP7\r\nch_names = [\"T7\", \"TP7\"]\r\nsphere_positions = np.zeros((len(ch_names), 3))\r\nfor i, ch_name in enumerate(ch_names):\r\n    sphere_positions[i, :] = _cart_to_sph(ch_pos[ch_name])\r\npos_virtual = _sph_to_cart(np.average(sphere_positions, axis=0))\r\n\r\n# create virtual channel info\r\nvirtual_info = create_info(\r\n    ch_names=[\"vT7-TP7\"],\r\n    sfreq=info[\"sfreq\"],\r\n    ch_types=\"eeg\",\r\n)\r\nvirtual_info[\"chs\"][0][\"loc\"][:3] = pos_virtual\r\n\r\n# create a RawArray to concatenate both info\r\nraw = RawArray(np.random.randn(4, 1024), info)\r\nraw_virtual = RawArray(np.random.randn(1, 1024), virtual_info)\r\nraw.add_channels([raw_virtual], force_update_info=True)\r\n\r\n# plot montage\r\nraw.get_montage().plot()\r\n```\r\n\r\n![Screenshot 2022-08-25 at 12 00 53](https://user-images.githubusercontent.com/73893616/186636074-1e9d4ae7-70d5-48ce-8406-496a215f3c12.png)\r\n\r\nInterestingly, changing `ch_names` to `[\"T8\", \"TP8\"]` does create the correct virtual channel between T8 and TP8.", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/11088/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/11088/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/11080", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/11080/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/11080/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/11080/events", "html_url": "https://github.com/mne-tools/mne-python/pull/11080", "id": 1349304022, "node_id": "PR_kwDOABPcUM49tkk0", "number": 11080, "title": "Add error message when conversion of EEG locs to head space fails", "user": {"login": "wmvanvliet", "id": 428273, "node_id": "MDQ6VXNlcjQyODI3Mw==", "avatar_url": "https://avatars.githubusercontent.com/u/428273?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wmvanvliet", "html_url": "https://github.com/wmvanvliet", "followers_url": "https://api.github.com/users/wmvanvliet/followers", "following_url": "https://api.github.com/users/wmvanvliet/following{/other_user}", "gists_url": "https://api.github.com/users/wmvanvliet/gists{/gist_id}", "starred_url": "https://api.github.com/users/wmvanvliet/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wmvanvliet/subscriptions", "organizations_url": "https://api.github.com/users/wmvanvliet/orgs", "repos_url": "https://api.github.com/users/wmvanvliet/repos", "events_url": "https://api.github.com/users/wmvanvliet/events{/privacy}", "received_events_url": "https://api.github.com/users/wmvanvliet/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2022-08-24T11:39:13Z", "updated_at": "2022-08-28T09:50:17Z", "closed_at": "2022-08-26T14:44:47Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/mne-tools/mne-python/pulls/11080", "html_url": "https://github.com/mne-tools/mne-python/pull/11080", "diff_url": "https://github.com/mne-tools/mne-python/pull/11080.diff", "patch_url": "https://github.com/mne-tools/mne-python/pull/11080.patch", "merged_at": "2022-08-26T14:44:47Z"}, "body": "When calling `.set_montage()`, all digitized points are transformed into head coordinate space if possible. This is not possible when there are no fiducials and the original points are not in head space already. MNE-Python is lenient when the coordinate space of the original points is marked as \"unknown\", assuming they are in head space. However, when the points are explicitly marked as being in some other space (e.g. MRI), then they will not get converted without fiducials.\r\n\r\nSince MNE-Python requires all EEG channel positions to be in head space, we should raise an error when `.set_montage()` fails to do this.\r\n\r\nFixes #10946.", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/11080/reactions", "total_count": 1, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/11080/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/11063", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/11063/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/11063/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/11063/events", "html_url": "https://github.com/mne-tools/mne-python/issues/11063", "id": 1345387334, "node_id": "I_kwDOABPcUM5QMPtG", "number": 11063, "title": "matplotlib.cm.get_cmap is deprecated in Matplotlib 3.6", "user": {"login": "QuLogic", "id": 302469, "node_id": "MDQ6VXNlcjMwMjQ2OQ==", "avatar_url": "https://avatars.githubusercontent.com/u/302469?v=4", "gravatar_id": "", "url": "https://api.github.com/users/QuLogic", "html_url": "https://github.com/QuLogic", "followers_url": "https://api.github.com/users/QuLogic/followers", "following_url": "https://api.github.com/users/QuLogic/following{/other_user}", "gists_url": "https://api.github.com/users/QuLogic/gists{/gist_id}", "starred_url": "https://api.github.com/users/QuLogic/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/QuLogic/subscriptions", "organizations_url": "https://api.github.com/users/QuLogic/orgs", "repos_url": "https://api.github.com/users/QuLogic/repos", "events_url": "https://api.github.com/users/QuLogic/events{/privacy}", "received_events_url": "https://api.github.com/users/QuLogic/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "drammock", "id": 1810515, "node_id": "MDQ6VXNlcjE4MTA1MTU=", "avatar_url": "https://avatars.githubusercontent.com/u/1810515?v=4", "gravatar_id": "", "url": "https://api.github.com/users/drammock", "html_url": "https://github.com/drammock", "followers_url": "https://api.github.com/users/drammock/followers", "following_url": "https://api.github.com/users/drammock/following{/other_user}", "gists_url": "https://api.github.com/users/drammock/gists{/gist_id}", "starred_url": "https://api.github.com/users/drammock/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/drammock/subscriptions", "organizations_url": "https://api.github.com/users/drammock/orgs", "repos_url": "https://api.github.com/users/drammock/repos", "events_url": "https://api.github.com/users/drammock/events{/privacy}", "received_events_url": "https://api.github.com/users/drammock/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "drammock", "id": 1810515, "node_id": "MDQ6VXNlcjE4MTA1MTU=", "avatar_url": "https://avatars.githubusercontent.com/u/1810515?v=4", "gravatar_id": "", "url": "https://api.github.com/users/drammock", "html_url": "https://github.com/drammock", "followers_url": "https://api.github.com/users/drammock/followers", "following_url": "https://api.github.com/users/drammock/following{/other_user}", "gists_url": "https://api.github.com/users/drammock/gists{/gist_id}", "starred_url": "https://api.github.com/users/drammock/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/drammock/subscriptions", "organizations_url": "https://api.github.com/users/drammock/orgs", "repos_url": "https://api.github.com/users/drammock/repos", "events_url": "https://api.github.com/users/drammock/events{/privacy}", "received_events_url": "https://api.github.com/users/drammock/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2022-08-21T05:04:03Z", "updated_at": "2022-08-23T02:21:36Z", "closed_at": "2022-08-23T02:21:36Z", "author_association": "NONE", "active_lock_reason": null, "body": "#### Describe the bug\r\n\r\nMatplotlib 3.6 added a [pending deprecated `matplotlib.cm.get_cmap`](https://matplotlib.org/devdocs/api/next_api_changes/deprecations/23668-TC.html). This causes some number of tests that use it to fail, since warnings are turned into errors. If you depend on Matplotlib 3.5+, you can switch to `matplotlib.colormaps[name]`, or you can use `plt.get_cmap` for older versions.\r\n\r\n\r\n#### Steps to reproduce\r\n1. Install `mne` dependencies\r\n2. Update matplotlib to 3.6.0rc1\r\n3. Run `pytest`\r\n\r\n\r\n#### Expected results\r\nTests pass.\r\n\r\n\r\n#### Actual results\r\n[See build log against Matplotlib 3.6](https://download.copr.fedorainfracloud.org/results/qulogic/matplotlib-3.6.0:pr:8/fedora-rawhide-x86_64/04752284-python-mne/builder-live.log.gz)\r\n```\r\n_________________________ test_get_colormap_from_array _________________________\r\nmne/viz/backends/tests/test_utils.py:22: in test_get_colormap_from_array\r\n    cmap = _get_colormap_from_array()\r\nmne/viz/backends/_utils.py:38: in _get_colormap_from_array\r\n    cmap = cm.get_cmap(default_colormap)\r\n/usr/lib64/python3.11/site-packages/matplotlib/_api/deprecation.py:199: in wrapper\r\n    emit_warning()\r\n/usr/lib64/python3.11/site-packages/matplotlib/_api/deprecation.py:193: in emit_warning\r\n    warn_deprecated(\r\n/usr/lib64/python3.11/site-packages/matplotlib/_api/deprecation.py:96: in warn_deprecated\r\n    warn_external(warning, category=MatplotlibDeprecationWarning)\r\n/usr/lib64/python3.11/site-packages/matplotlib/_api/__init__.py:363: in warn_external\r\n    warnings.warn(message, category, stacklevel)\r\nE   PendingDeprecationWarning: The _get_cmap function will be deprecated in a future version. Use ``matplotlib.colormaps[name]`` instead.\r\n```", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/11063/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/11063/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/11062", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/11062/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/11062/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/11062/events", "html_url": "https://github.com/mne-tools/mne-python/issues/11062", "id": 1345386902, "node_id": "I_kwDOABPcUM5QMPmW", "number": 11062, "title": "Event functions are deprecated in Matplotlib 3.6", "user": {"login": "QuLogic", "id": 302469, "node_id": "MDQ6VXNlcjMwMjQ2OQ==", "avatar_url": "https://avatars.githubusercontent.com/u/302469?v=4", "gravatar_id": "", "url": "https://api.github.com/users/QuLogic", "html_url": "https://github.com/QuLogic", "followers_url": "https://api.github.com/users/QuLogic/followers", "following_url": "https://api.github.com/users/QuLogic/following{/other_user}", "gists_url": "https://api.github.com/users/QuLogic/gists{/gist_id}", "starred_url": "https://api.github.com/users/QuLogic/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/QuLogic/subscriptions", "organizations_url": "https://api.github.com/users/QuLogic/orgs", "repos_url": "https://api.github.com/users/QuLogic/repos", "events_url": "https://api.github.com/users/QuLogic/events{/privacy}", "received_events_url": "https://api.github.com/users/QuLogic/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "drammock", "id": 1810515, "node_id": "MDQ6VXNlcjE4MTA1MTU=", "avatar_url": "https://avatars.githubusercontent.com/u/1810515?v=4", "gravatar_id": "", "url": "https://api.github.com/users/drammock", "html_url": "https://github.com/drammock", "followers_url": "https://api.github.com/users/drammock/followers", "following_url": "https://api.github.com/users/drammock/following{/other_user}", "gists_url": "https://api.github.com/users/drammock/gists{/gist_id}", "starred_url": "https://api.github.com/users/drammock/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/drammock/subscriptions", "organizations_url": "https://api.github.com/users/drammock/orgs", "repos_url": "https://api.github.com/users/drammock/repos", "events_url": "https://api.github.com/users/drammock/events{/privacy}", "received_events_url": "https://api.github.com/users/drammock/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "drammock", "id": 1810515, "node_id": "MDQ6VXNlcjE4MTA1MTU=", "avatar_url": "https://avatars.githubusercontent.com/u/1810515?v=4", "gravatar_id": "", "url": "https://api.github.com/users/drammock", "html_url": "https://github.com/drammock", "followers_url": "https://api.github.com/users/drammock/followers", "following_url": "https://api.github.com/users/drammock/following{/other_user}", "gists_url": "https://api.github.com/users/drammock/gists{/gist_id}", "starred_url": "https://api.github.com/users/drammock/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/drammock/subscriptions", "organizations_url": "https://api.github.com/users/drammock/orgs", "repos_url": "https://api.github.com/users/drammock/repos", "events_url": "https://api.github.com/users/drammock/events{/privacy}", "received_events_url": "https://api.github.com/users/drammock/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 2, "created_at": "2022-08-21T05:01:02Z", "updated_at": "2022-08-23T02:21:36Z", "closed_at": "2022-08-23T02:21:36Z", "author_association": "NONE", "active_lock_reason": null, "body": "#### Describe the bug\r\n\r\nMatplotlib 3.6 [deprecated the event functions on the canvas](https://matplotlib.org/devdocs/api/next_api_changes/deprecations/16931-AL.html). This causes some number of tests that use fake events to fail.\r\n\r\n#### Steps to reproduce\r\n1. Install `mne` dependencies\r\n2. Update matplotlib to 3.6.0rc1\r\n3. Run `pytest`\r\n\r\n\r\n#### Expected results\r\nTests pass.\r\n\r\n\r\n#### Actual results\r\n[See build log against Matplotlib 3.6](https://download.copr.fedorainfracloud.org/results/qulogic/matplotlib-3.6.0:pr:8/fedora-rawhide-x86_64/04752284-python-mne/builder-live.log.gz)\r\n```\r\n______________________ test_plot_epochs_basic[matplotlib] ______________________\r\nmne/viz/tests/test_epochs.py:62: in test_plot_epochs_basic\r\n    fig._fake_keypress('escape')\r\nmne/viz/_mpl_figure.py:1964: in _fake_keypress\r\n    fig.canvas.key_press_event(key)\r\n/usr/lib64/python3.11/site-packages/matplotlib/_api/deprecation.py:199: in wrapper\r\n    emit_warning()\r\n/usr/lib64/python3.11/site-packages/matplotlib/_api/deprecation.py:193: in emit_warning\r\n    warn_deprecated(\r\n/usr/lib64/python3.11/site-packages/matplotlib/_api/deprecation.py:96: in warn_deprecated\r\n    warn_external(warning, category=MatplotlibDeprecationWarning)\r\n/usr/lib64/python3.11/site-packages/matplotlib/_api/__init__.py:363: in warn_external\r\n    warnings.warn(message, category, stacklevel)\r\nE   matplotlib._api.deprecation.MatplotlibDeprecationWarning: The key_press_event function was deprecated in Matplotlib 3.6 and will be removed two minor releases later. Use callbacks.process('key_press_event', KeyEvent(...)) instead.\r\n```\r\nand similar for `button_press_event`, `resize_event`\r\n\r\n#### Additional information\r\nSorry, don't have this in a non-interactive package build, but you can check the top of the above-linked file for installed dependencies.", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/11062/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/11062/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/11054", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/11054/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/11054/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/11054/events", "html_url": "https://github.com/mne-tools/mne-python/issues/11054", "id": 1344069501, "node_id": "I_kwDOABPcUM5QHN99", "number": 11054, "title": "Problem with documentation navigation: elements placed outside of visible area", "user": {"login": "hoechenberger", "id": 2046265, "node_id": "MDQ6VXNlcjIwNDYyNjU=", "avatar_url": "https://avatars.githubusercontent.com/u/2046265?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hoechenberger", "html_url": "https://github.com/hoechenberger", "followers_url": "https://api.github.com/users/hoechenberger/followers", "following_url": "https://api.github.com/users/hoechenberger/following{/other_user}", "gists_url": "https://api.github.com/users/hoechenberger/gists{/gist_id}", "starred_url": "https://api.github.com/users/hoechenberger/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hoechenberger/subscriptions", "organizations_url": "https://api.github.com/users/hoechenberger/orgs", "repos_url": "https://api.github.com/users/hoechenberger/repos", "events_url": "https://api.github.com/users/hoechenberger/events{/privacy}", "received_events_url": "https://api.github.com/users/hoechenberger/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 40091538, "node_id": "MDU6TGFiZWw0MDA5MTUzOA==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/DOC", "name": "DOC", "color": "009800", "default": false, "description": null}, {"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2022-08-19T07:41:02Z", "updated_at": "2023-04-21T16:51:12Z", "closed_at": "2023-04-21T16:49:03Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "This occurs on my system e.g. on:\r\n\r\n- https://mne.tools/dev/generated/mne.channels.fix_mag_coil_types.html\r\n- https://mne.tools/dev/generated/mne.channels.read_polhemus_fastscan.html\r\n\r\nBrowser is Safari 15.5, run in fullscreen mode.\r\n\r\n<img width=\"1280\" alt=\"Screen Shot 2022-08-19 at 09 33 00\" src=\"https://user-images.githubusercontent.com/2046265/185568832-a49b1429-f3b2-442f-9683-53c424c821e1.png\">\r\n\r\n<img width=\"1280\" alt=\"Screen Shot 2022-08-19 at 09 33 07\" src=\"https://user-images.githubusercontent.com/2046265/185568852-1b4733b1-3f6e-4816-a720-017f5f5cdfbc.png\">\r\n", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/11054/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/11054/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/11044", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/11044/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/11044/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/11044/events", "html_url": "https://github.com/mne-tools/mne-python/issues/11044", "id": 1342299162, "node_id": "I_kwDOABPcUM5QAdwa", "number": 11044, "title": "Error when importing BIDS file", "user": {"login": "arnodelorme", "id": 1872705, "node_id": "MDQ6VXNlcjE4NzI3MDU=", "avatar_url": "https://avatars.githubusercontent.com/u/1872705?v=4", "gravatar_id": "", "url": "https://api.github.com/users/arnodelorme", "html_url": "https://github.com/arnodelorme", "followers_url": "https://api.github.com/users/arnodelorme/followers", "following_url": "https://api.github.com/users/arnodelorme/following{/other_user}", "gists_url": "https://api.github.com/users/arnodelorme/gists{/gist_id}", "starred_url": "https://api.github.com/users/arnodelorme/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/arnodelorme/subscriptions", "organizations_url": "https://api.github.com/users/arnodelorme/orgs", "repos_url": "https://api.github.com/users/arnodelorme/repos", "events_url": "https://api.github.com/users/arnodelorme/events{/privacy}", "received_events_url": "https://api.github.com/users/arnodelorme/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 7, "created_at": "2022-08-17T21:14:51Z", "updated_at": "2022-10-11T16:53:55Z", "closed_at": "2022-08-17T21:17:53Z", "author_association": "NONE", "active_lock_reason": null, "body": "File is below. It is part of https://openneuro.org/datasets/ds002718\r\n\r\nhttps://drive.google.com/file/d/18SLD5TI0R_25-0rmF0g86YODXp753uze/view?usp=sharing\r\n\r\n```python\r\nimport mne\r\n\r\nfilename = 'ds002718/sub-002/eeg/sub-002_task-FaceRecognition_eeg.set'\r\nraw = mne.io.read_raw_eeglab(filename)\r\n\r\n<ipython-input-22-cf235f128b50>:5: RuntimeWarning: Unknown types found, setting as type EEG:\r\nekg: ['EEG063', 'EEG064']\r\nheog: ['EEG061']\r\nveog: ['EEG062']\r\n  raw = mne.io.read_raw_eeglab(filename)\r\n---------------------------------------------------------------------------\r\nKeyError                                  Traceback (most recent call last)\r\n<ipython-input-22-cf235f128b50> in <module>\r\n      3 filename = '../../data/sub-001_task-P300_run-2_eeg.set'\r\n      4 filename = '../../ds002718/sub-002/eeg/sub-002_task-FaceRecognition_eeg.set'\r\n----> 5 raw = mne.io.read_raw_eeglab(filename)\r\n\r\n~/miniconda3/envs/p38env/lib/python3.8/site-packages/mne/io/eeglab/eeglab.py in read_raw_eeglab(input_fname, eog, preload, uint16_codec, verbose)\r\n    260     .. versionadded:: 0.11.0\r\n    261     \"\"\"\r\n--> 262     return RawEEGLAB(input_fname=input_fname, preload=preload,\r\n    263                      eog=eog, verbose=verbose, uint16_codec=uint16_codec)\r\n    264 \r\n\r\n<decorator-gen-397> in __init__(self, input_fname, eog, preload, uint16_codec, verbose)\r\n\r\n~/miniconda3/envs/p38env/lib/python3.8/site-packages/mne/io/eeglab/eeglab.py in __init__(self, input_fname, eog, preload, uint16_codec, verbose)\r\n    366 \r\n    367         last_samps = [eeg.pnts - 1]\r\n--> 368         info, eeg_montage, _ = _get_info(eeg, eog=eog)\r\n    369 \r\n    370         # read the data\r\n\r\n~/miniconda3/envs/p38env/lib/python3.8/site-packages/mne/io/eeglab/eeglab.py in _get_info(eeg, eog)\r\n    183         has_pos = _eeg_has_montage_information(eeg)\r\n    184         ch_names, ch_types, eeg_montage = \\\r\n--> 185             _get_montage_information(eeg, has_pos)\r\n    186         update_ch_names = False\r\n    187     else:  # if eeg.chanlocs is empty, we still need default chan names\r\n\r\n~/miniconda3/envs/p38env/lib/python3.8/site-packages/mne/io/eeglab/eeglab.py in _get_montage_information(eeg, get_pos)\r\n    152             if d[\"type\"] != 'FID':\r\n    153                 continue\r\n--> 154             elif d['description'] == 'Nasion':\r\n    155                 nasion = np.array([d[\"X\"], d[\"Y\"], d[\"Z\"]])\r\n    156             elif d['description'] == 'Right periauricular point':\r\n\r\nKeyError: 'description'\r\n```\r\n", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/11044/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/11044/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/11039", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/11039/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/11039/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/11039/events", "html_url": "https://github.com/mne-tools/mne-python/issues/11039", "id": 1340676266, "node_id": "I_kwDOABPcUM5P6Riq", "number": 11039, "title": "read_raw_eeglab stopped working in MNE 1.1", "user": {"login": "KirkGraff", "id": 45273517, "node_id": "MDQ6VXNlcjQ1MjczNTE3", "avatar_url": "https://avatars.githubusercontent.com/u/45273517?v=4", "gravatar_id": "", "url": "https://api.github.com/users/KirkGraff", "html_url": "https://github.com/KirkGraff", "followers_url": "https://api.github.com/users/KirkGraff/followers", "following_url": "https://api.github.com/users/KirkGraff/following{/other_user}", "gists_url": "https://api.github.com/users/KirkGraff/gists{/gist_id}", "starred_url": "https://api.github.com/users/KirkGraff/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/KirkGraff/subscriptions", "organizations_url": "https://api.github.com/users/KirkGraff/orgs", "repos_url": "https://api.github.com/users/KirkGraff/repos", "events_url": "https://api.github.com/users/KirkGraff/events{/privacy}", "received_events_url": "https://api.github.com/users/KirkGraff/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2022-08-16T17:38:57Z", "updated_at": "2022-08-24T14:25:10Z", "closed_at": "2022-08-24T14:25:10Z", "author_association": "NONE", "active_lock_reason": null, "body": "I just updated to MNE 1.1 and I found I can no longer run read_raw_eeglab. It spits out an error message, instead of loading my file. Here's what spits out:\r\n\r\n```\r\nraw = mne.io.read_raw_eeglab(rawfile,preload=True)\r\nTraceback (most recent call last):\r\n\r\n  File \"/var/folders/6l/0_b631dn2q7d_wfw636xsp7w0000gq/T/ipykernel_1591/1431119611.py\", line 1, in <module>\r\n    raw = mne.io.read_raw_eeglab(rawfile,preload=True)\r\n\r\n  File \"/Users/ivy/miniconda3/lib/python3.7/site-packages/mne/io/eeglab/eeglab.py\", line 263, in read_raw_eeglab\r\n    eog=eog, verbose=verbose, uint16_codec=uint16_codec)\r\n\r\n  File \"<decorator-gen-399>\", line 12, in __init__\r\n\r\n  File \"/Users/ivy/miniconda3/lib/python3.7/site-packages/mne/io/eeglab/eeglab.py\", line 368, in __init__\r\n    info, eeg_montage, _ = _get_info(eeg, eog=eog)\r\n\r\n  File \"/Users/ivy/miniconda3/lib/python3.7/site-packages/mne/io/eeglab/eeglab.py\", line 185, in _get_info\r\n    _get_montage_information(eeg, has_pos)\r\n\r\n  File \"/Users/ivy/miniconda3/lib/python3.7/site-packages/mne/io/eeglab/eeglab.py\", line 154, in _get_montage_information\r\n    elif d['description'] == 'Nasion':\r\n\r\nKeyError: 'description'\r\n```\r\n\r\nThe problem is with the function _get_montage_information, specifically the set of code:\r\n\r\n```python\r\n    lpa, rpa, nasion = None, None, None\r\n    if (hasattr(eeg, \"chaninfo\") and\r\n            \"nodatchans\" in eeg.chaninfo and\r\n            len(eeg.chaninfo['nodatchans'])):\r\n        for item in list(zip(*eeg.chaninfo['nodatchans'].values())):\r\n            d = dict(zip(eeg.chaninfo['nodatchans'].keys(), item))\r\n            if d[\"type\"] != 'FID':\r\n                continue\r\n            elif d['description'] == 'Nasion':\r\n                nasion = np.array([d[\"X\"], d[\"Y\"], d[\"Z\"]])\r\n            elif d['description'] == 'Right periauricular point':\r\n                rpa = np.array([d[\"X\"], d[\"Y\"], d[\"Z\"]])\r\n            elif d['description'] == 'Left periauricular point':\r\n                lpa = np.array([d[\"X\"], d[\"Y\"], d[\"Z\"]])\r\n```\r\n\r\nTo investigate, I ran this code:\r\n\r\n```python\r\nfor item in list(zip(*eeg.chaninfo['nodatchans'].values())):\r\n    d = dict(zip(eeg.chaninfo['nodatchans'].keys(), item))\r\n    print(d)\r\n    print('')\r\n```\r\n\r\nAnd got:\r\n```\r\n{'labels': 'FidNz', 'Y': -0.0, 'X': 11.331284, 'Z': -1.4538770000000003, 'sph_theta': -0.0, 'sph_phi': -7.311471770814621, 'sph_radius': 11.424174167955643, 'theta': 0, 'radius': 0.5406192876156368, 'type': 'FID', 'ref': array([], dtype='<U1'), 'urchan': 1, 'datachan': 0}\r\n\r\n{'labels': 'FidT9', 'Y': 7.519939000000001, 'X': 1.4731859999999999, 'Z': -2.59104, 'sph_theta': 78.91590242180789, 'sph_phi': -18.68186885137234, 'sph_radius': 8.089082014414059, 'theta': -78.91590242180789, 'radius': 0.6037881602854018, 'type': 'FID', 'ref': array([], dtype='<U1'), 'urchan': 2, 'datachan': 0}\r\n\r\n{'labels': 'FidT10', 'Y': -7.519939000000001, 'X': 1.4731859999999999, 'Z': -2.59104, 'sph_theta': -78.91590242180789, 'sph_phi': -18.68186885137234, 'sph_radius': 8.089082014414059, 'theta': 78.91590242180789, 'radius': 0.6037881602854018, 'type': 'FID', 'ref': array([], dtype='<U1'), 'urchan': 3, 'datachan': 0}\r\n\r\n{'labels': 'Cz', 'Y': 0, 'X': 6.285744013660221e-16, 'Z': 10.265399, 'sph_theta': 0, 'sph_phi': 90, 'sph_radius': 10.265399, 'theta': -0.0, 'radius': 0, 'type': array([], dtype='<U1'), 'ref': array([], dtype='<U1'), 'urchan': 68, 'datachan': 0}\r\n```\r\n\r\nAs you can see, no 'description', so the code fails when you try to run `d['description']`.\r\n\r\nThis might be a problem very specific to me; someone in my lab wrote a matlab script to convert the data we get from the eeg cap into a .set file, and perhaps their code isn't quite right.\r\n", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/11039/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/11039/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/11036", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/11036/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/11036/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/11036/events", "html_url": "https://github.com/mne-tools/mne-python/issues/11036", "id": 1340320781, "node_id": "I_kwDOABPcUM5P46wN", "number": 11036, "title": "Style of 'bool' x-ref is different than the style of other parameter types", "user": {"login": "mscheltienne", "id": 73893616, "node_id": "MDQ6VXNlcjczODkzNjE2", "avatar_url": "https://avatars.githubusercontent.com/u/73893616?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mscheltienne", "html_url": "https://github.com/mscheltienne", "followers_url": "https://api.github.com/users/mscheltienne/followers", "following_url": "https://api.github.com/users/mscheltienne/following{/other_user}", "gists_url": "https://api.github.com/users/mscheltienne/gists{/gist_id}", "starred_url": "https://api.github.com/users/mscheltienne/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mscheltienne/subscriptions", "organizations_url": "https://api.github.com/users/mscheltienne/orgs", "repos_url": "https://api.github.com/users/mscheltienne/repos", "events_url": "https://api.github.com/users/mscheltienne/events{/privacy}", "received_events_url": "https://api.github.com/users/mscheltienne/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2022-08-16T13:00:15Z", "updated_at": "2022-08-16T13:34:01Z", "closed_at": "2022-08-16T13:34:01Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "The style for the `bool` x-ref is different than for other parameter types. See for instance the [`set_montage` method](https://mne.tools/dev/generated/mne.Epochs.html#mne.Epochs.set_montage).\r\n\r\nSo it turns out that `intersphinx` resolves `bool` to https://docs.python.org/3/library/stdtypes.html#boolean-values\r\nand not to https://docs.python.org/3/library/functions.html#bool\r\nwhich results in a different style.\r\n\r\nI see 2 ways to fix it, both over my knowledge in sphinx-related stuff:\r\n- fix the resolution: [`intersphinx_disabled_reftypes`](https://www.sphinx-doc.org/en/master/usage/extensions/intersphinx.html#confval-intersphinx_disabled_reftypes) seems like a good candidate\r\n- overriding the CSS style: c.f. the note for `numpydoc_xref_param_type` on the [`numpydoc` documentation](https://numpydoc.readthedocs.io/en/latest/install.html).", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/11036/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/11036/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/11031", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/11031/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/11031/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/11031/events", "html_url": "https://github.com/mne-tools/mne-python/issues/11031", "id": 1337535479, "node_id": "I_kwDOABPcUM5PuSv3", "number": 11031, "title": "EEGLAB file export data type issue", "user": {"login": "arnodelorme", "id": 1872705, "node_id": "MDQ6VXNlcjE4NzI3MDU=", "avatar_url": "https://avatars.githubusercontent.com/u/1872705?v=4", "gravatar_id": "", "url": "https://api.github.com/users/arnodelorme", "html_url": "https://github.com/arnodelorme", "followers_url": "https://api.github.com/users/arnodelorme/followers", "following_url": "https://api.github.com/users/arnodelorme/following{/other_user}", "gists_url": "https://api.github.com/users/arnodelorme/gists{/gist_id}", "starred_url": "https://api.github.com/users/arnodelorme/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/arnodelorme/subscriptions", "organizations_url": "https://api.github.com/users/arnodelorme/orgs", "repos_url": "https://api.github.com/users/arnodelorme/repos", "events_url": "https://api.github.com/users/arnodelorme/events{/privacy}", "received_events_url": "https://api.github.com/users/arnodelorme/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2022-08-12T17:48:58Z", "updated_at": "2022-10-21T14:23:54Z", "closed_at": "2022-10-21T14:23:54Z", "author_association": "NONE", "active_lock_reason": null, "body": "Reading a file exported by MNE on MATLAB\r\n\r\n```\r\nEEG.trials\r\n\r\nans =\r\n\r\n  int64\r\n\r\n   105\r\n```\r\n\r\nThe type is int64 instead of double. This can cause all kinds of problems (I was trying to use the number of trials to calculate a ratio, and it was always returning the wrong value for example). This might be the case as well for other fields. ", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/11031/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/11031/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/11026", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/11026/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/11026/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/11026/events", "html_url": "https://github.com/mne-tools/mne-python/issues/11026", "id": 1335400506, "node_id": "I_kwDOABPcUM5PmJg6", "number": 11026, "title": "plot function get error? ", "user": {"login": "1358467720", "id": 48643755, "node_id": "MDQ6VXNlcjQ4NjQzNzU1", "avatar_url": "https://avatars.githubusercontent.com/u/48643755?v=4", "gravatar_id": "", "url": "https://api.github.com/users/1358467720", "html_url": "https://github.com/1358467720", "followers_url": "https://api.github.com/users/1358467720/followers", "following_url": "https://api.github.com/users/1358467720/following{/other_user}", "gists_url": "https://api.github.com/users/1358467720/gists{/gist_id}", "starred_url": "https://api.github.com/users/1358467720/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/1358467720/subscriptions", "organizations_url": "https://api.github.com/users/1358467720/orgs", "repos_url": "https://api.github.com/users/1358467720/repos", "events_url": "https://api.github.com/users/1358467720/events{/privacy}", "received_events_url": "https://api.github.com/users/1358467720/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2022-08-11T02:39:04Z", "updated_at": "2022-08-16T10:27:30Z", "closed_at": "2022-08-16T10:27:30Z", "author_association": "NONE", "active_lock_reason": null, "body": "\r\n#### Describe the bug\r\nHi! I just load my data from edf file to plot it! It does not look like normal? Have  my data something wrong or the plot function is wrong \uff1f\r\n```\r\n        \r\nraw = mne.io.read_raw_edf(file_name)\r\n        raw.resample(128)\r\n        print(raw.info)\r\n        raw.load_data()\r\n        raw.filter(l_freq=1, h_freq=30) \r\n        raw.notch_filter(freqs=50)  \r\n\r\n\r\n        raw.plot()\r\n```\r\n![issue](https://user-images.githubusercontent.com/48643755/184055937-a96251a1-e303-4389-b56c-04573780a002.png)\r\n", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/11026/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/11026/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/11025", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/11025/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/11025/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/11025/events", "html_url": "https://github.com/mne-tools/mne-python/issues/11025", "id": 1335331667, "node_id": "I_kwDOABPcUM5Pl4tT", "number": 11025, "title": "Export epoch issue", "user": {"login": "arnodelorme", "id": 1872705, "node_id": "MDQ6VXNlcjE4NzI3MDU=", "avatar_url": "https://avatars.githubusercontent.com/u/1872705?v=4", "gravatar_id": "", "url": "https://api.github.com/users/arnodelorme", "html_url": "https://github.com/arnodelorme", "followers_url": "https://api.github.com/users/arnodelorme/followers", "following_url": "https://api.github.com/users/arnodelorme/following{/other_user}", "gists_url": "https://api.github.com/users/arnodelorme/gists{/gist_id}", "starred_url": "https://api.github.com/users/arnodelorme/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/arnodelorme/subscriptions", "organizations_url": "https://api.github.com/users/arnodelorme/orgs", "repos_url": "https://api.github.com/users/arnodelorme/repos", "events_url": "https://api.github.com/users/arnodelorme/events{/privacy}", "received_events_url": "https://api.github.com/users/arnodelorme/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/mne-tools/mne-python/milestones/23", "html_url": "https://github.com/mne-tools/mne-python/milestone/23", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/milestones/23/labels", "id": 8047399, "node_id": "MI_kwDOABPcUM4Aessn", "number": 23, "title": "1.2", "description": "", "creator": {"login": "hoechenberger", "id": 2046265, "node_id": "MDQ6VXNlcjIwNDYyNjU=", "avatar_url": "https://avatars.githubusercontent.com/u/2046265?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hoechenberger", "html_url": "https://github.com/hoechenberger", "followers_url": "https://api.github.com/users/hoechenberger/followers", "following_url": "https://api.github.com/users/hoechenberger/following{/other_user}", "gists_url": "https://api.github.com/users/hoechenberger/gists{/gist_id}", "starred_url": "https://api.github.com/users/hoechenberger/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hoechenberger/subscriptions", "organizations_url": "https://api.github.com/users/hoechenberger/orgs", "repos_url": "https://api.github.com/users/hoechenberger/repos", "events_url": "https://api.github.com/users/hoechenberger/events{/privacy}", "received_events_url": "https://api.github.com/users/hoechenberger/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 71, "state": "closed", "created_at": "2022-06-03T17:43:37Z", "updated_at": "2022-10-11T20:15:01Z", "due_on": "2022-09-01T07:00:00Z", "closed_at": "2022-10-11T20:15:01Z"}, "comments": 10, "created_at": "2022-08-11T00:11:43Z", "updated_at": "2022-09-15T17:35:04Z", "closed_at": "2022-09-15T17:35:04Z", "author_association": "NONE", "active_lock_reason": null, "body": "File available at https://drive.google.com/file/d/1RY5LEM_mpOdF5Ka0nTe6JGMvo_kDk1M5/view?usp=sharing\r\n\r\n```python\r\nimport mne\r\n\r\nfrom mne.datasets import sample\r\nfilename = 'sub-001_task-P300_run-2_eeg.set';\r\nraw = mne.io.read_raw_eeglab(filename)\r\nevents_from_annot, event_dict = mne.events_from_annotations(raw)\r\nepochs_all = mne.Epochs(raw, events_from_annot, tmin=-0.3, tmax=0.7, event_id=event_dict, preload=True)\r\nepochs_all.export('test.set', overwrite=True)\r\n```\r\n\r\nThe exported file appears corrupted on MATLAB as the number of epoch in the epoch structure does not match the actual number of epochs. In fact EEGLAB generate a corrupted file error. You can simply set EEG.epoch to empty if necessary as EEGLAB can regenerate automatically from the events.\r\n\r\n```matlab\r\nTMP = load('-mat', 'test.set')\r\n\r\nTMP = \r\n\r\n  struct with fields:\r\n\r\n          data: [79\u00d7257\u00d7861 double]\r\n       setname: '/System/Volumes/Data/data/matlab/ds003061_process/MNE/test.set'\r\n        nbchan: 79\r\n          pnts: 257\r\n        trials: 861\r\n         srate: 256\r\n          xmin: -0.3008\r\n          xmax: 0.6992\r\n           ref: 'common'\r\n      chanlocs: [1\u00d779 struct]\r\n         event: [1\u00d7861 struct]\r\n         epoch: [1\u00d7749 struct]\r\n       icawinv: []\r\n     icasphere: []\r\n    icaweights: []\r\n```\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/11025/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/11025/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/11023", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/11023/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/11023/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/11023/events", "html_url": "https://github.com/mne-tools/mne-python/issues/11023", "id": 1335168281, "node_id": "I_kwDOABPcUM5PlQ0Z", "number": 11023, "title": "new CI failure on main: test_make_forward_dipole", "user": {"login": "drammock", "id": 1810515, "node_id": "MDQ6VXNlcjE4MTA1MTU=", "avatar_url": "https://avatars.githubusercontent.com/u/1810515?v=4", "gravatar_id": "", "url": "https://api.github.com/users/drammock", "html_url": "https://github.com/drammock", "followers_url": "https://api.github.com/users/drammock/followers", "following_url": "https://api.github.com/users/drammock/following{/other_user}", "gists_url": "https://api.github.com/users/drammock/gists{/gist_id}", "starred_url": "https://api.github.com/users/drammock/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/drammock/subscriptions", "organizations_url": "https://api.github.com/users/drammock/orgs", "repos_url": "https://api.github.com/users/drammock/repos", "events_url": "https://api.github.com/users/drammock/events{/privacy}", "received_events_url": "https://api.github.com/users/drammock/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2022-08-10T20:31:44Z", "updated_at": "2022-08-15T16:18:46Z", "closed_at": "2022-08-15T16:18:46Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "```\r\n ___________________________ test_make_forward_dipole ___________________________\r\nmne/forward/tests/test_make_forward.py:422: in test_make_forward_dipole\r\n    assert_allclose(dip_fit.pos, dip_test.pos, rtol=0, atol=1e-2,\r\nE   AssertionError: \r\nE   Not equal to tolerance rtol=0, atol=0.01\r\nE   position mismatch\r\nE   Mismatched elements: 1 / 9 (11.1%)\r\nE   Max absolute difference: 0.01529636\r\nE   Max relative difference: 0.59013717\r\nE    x: array([[ 0.041216,  0.018087,  0.09476 ],\r\nE          [ 0.044785,  0.021239,  0.050516],\r\nE          [ 0.037098, -0.004066,  0.060205]])\r\nE    y: array([[ 0.02592,  0.01772,  0.09169],\r\nE          [ 0.04728,  0.02485,  0.05055],\r\nE          [ 0.03734, -0.00548,  0.05957]])\r\n```\r\n\r\nHas shown up in 2 unrelated PRs today.", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/11023/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/11023/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/11021", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/11021/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/11021/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/11021/events", "html_url": "https://github.com/mne-tools/mne-python/issues/11021", "id": 1334598946, "node_id": "I_kwDOABPcUM5PjF0i", "number": 11021, "title": "raw.plot_psd hangs in jupyter notebook", "user": {"login": "hernandezurbina", "id": 12712992, "node_id": "MDQ6VXNlcjEyNzEyOTky", "avatar_url": "https://avatars.githubusercontent.com/u/12712992?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hernandezurbina", "html_url": "https://github.com/hernandezurbina", "followers_url": "https://api.github.com/users/hernandezurbina/followers", "following_url": "https://api.github.com/users/hernandezurbina/following{/other_user}", "gists_url": "https://api.github.com/users/hernandezurbina/gists{/gist_id}", "starred_url": "https://api.github.com/users/hernandezurbina/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hernandezurbina/subscriptions", "organizations_url": "https://api.github.com/users/hernandezurbina/orgs", "repos_url": "https://api.github.com/users/hernandezurbina/repos", "events_url": "https://api.github.com/users/hernandezurbina/events{/privacy}", "received_events_url": "https://api.github.com/users/hernandezurbina/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2022-08-10T13:06:11Z", "updated_at": "2022-10-21T14:26:49Z", "closed_at": "2022-10-21T14:26:48Z", "author_association": "NONE", "active_lock_reason": null, "body": "#### Describe the bug\r\nRunning plot_psd on raw data inside a jupyter notebook shows the plot but the cell hangs as if computing something even after the plot has been closed.\r\n\r\n#### Steps to reproduce\r\nI loaded EEG raw data in .set format. Cropped to 100s. Filtered the data using l_freq=0.1 and h_freq=40. Chose 3 channels using pick+channels, and then ran plot_psd. MNE shows the plot but the cell hangs indefinitely. I am using matplotlib with the Qt5Agg backend.\r\n\r\nThe cell in jupyter returns the following while hanging:\r\n`[Parallel(n_jobs=1)]: Using backend SequentialBackend with 1 concurrent workers.\r\n[Parallel(n_jobs=1)]: Done   1 out of   1 | elapsed:    0.0s remaining:    0.0s\r\n[Parallel(n_jobs=1)]: Done   1 out of   1 | elapsed:    0.0s finished`\r\n\r\n\r\n#### Expected results\r\nCell in jupyter finishes running.\r\n\r\n\r\n#### Actual results\r\nCell hangs.\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/11021/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/11021/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/11013", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/11013/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/11013/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/11013/events", "html_url": "https://github.com/mne-tools/mne-python/issues/11013", "id": 1331108032, "node_id": "I_kwDOABPcUM5PVxjA", "number": 11013, "title": "EEGLAB epoch export, latency error", "user": {"login": "arnodelorme", "id": 1872705, "node_id": "MDQ6VXNlcjE4NzI3MDU=", "avatar_url": "https://avatars.githubusercontent.com/u/1872705?v=4", "gravatar_id": "", "url": "https://api.github.com/users/arnodelorme", "html_url": "https://github.com/arnodelorme", "followers_url": "https://api.github.com/users/arnodelorme/followers", "following_url": "https://api.github.com/users/arnodelorme/following{/other_user}", "gists_url": "https://api.github.com/users/arnodelorme/gists{/gist_id}", "starred_url": "https://api.github.com/users/arnodelorme/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/arnodelorme/subscriptions", "organizations_url": "https://api.github.com/users/arnodelorme/orgs", "repos_url": "https://api.github.com/users/arnodelorme/repos", "events_url": "https://api.github.com/users/arnodelorme/events{/privacy}", "received_events_url": "https://api.github.com/users/arnodelorme/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 10, "created_at": "2022-08-07T19:55:02Z", "updated_at": "2022-10-21T14:29:52Z", "closed_at": "2022-10-21T14:29:52Z", "author_association": "NONE", "active_lock_reason": null, "body": "Using the attached epoch file, trying to export to EEGLAB leads to this warning that events cannot be exported\r\n\r\n```python\r\nepochs_ar2['stimulus/oddball_with_reponse'].export('test.set', fmt='eeglab')\r\n/Users/arno/miniconda3/envs/p38env/lib/python3.8/site-packages/eeglabio/epochs.py:102: UserWarning: Invalid event latencies, ignoring for export.\r\n  warnings.warn(\"Invalid event latencies, ignoring for export.\")\r\n```\r\n\r\nAlso EEGLAB data is exported as double precision while the standard\r\n EEGLAB format (and MNE fif format) is simple precision. Would save half the space.\r\n\r\n[test-epo.fif.zip](https://github.com/mne-tools/mne-python/files/9277398/test-epo.fif.zip)\r\n", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/11013/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/11013/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/11010", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/11010/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/11010/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/11010/events", "html_url": "https://github.com/mne-tools/mne-python/issues/11010", "id": 1330422234, "node_id": "I_kwDOABPcUM5PTKHa", "number": 11010, "title": "test_export_epochs_eeglab failing on main", "user": {"login": "drammock", "id": 1810515, "node_id": "MDQ6VXNlcjE4MTA1MTU=", "avatar_url": "https://avatars.githubusercontent.com/u/1810515?v=4", "gravatar_id": "", "url": "https://api.github.com/users/drammock", "html_url": "https://github.com/drammock", "followers_url": "https://api.github.com/users/drammock/followers", "following_url": "https://api.github.com/users/drammock/following{/other_user}", "gists_url": "https://api.github.com/users/drammock/gists{/gist_id}", "starred_url": "https://api.github.com/users/drammock/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/drammock/subscriptions", "organizations_url": "https://api.github.com/users/drammock/orgs", "repos_url": "https://api.github.com/users/drammock/repos", "events_url": "https://api.github.com/users/drammock/events{/privacy}", "received_events_url": "https://api.github.com/users/drammock/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2022-08-05T21:36:07Z", "updated_at": "2022-10-21T14:30:13Z", "closed_at": "2022-10-21T14:30:13Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "test_export_epochs_eeglab is failing on windows 3.9 pip and windows 3.10 pip pre\r\n\r\nhttps://dev.azure.com/mne-tools/mne-python/_build/results?buildId=21054&view=logs&j=dded70eb-633c-5c42-e995-a7f8d1f99d91&t=6a33d698-56da-505a-4bdd-64e49791e9d1&l=3242\r\n\r\n#11006 may be the culprit?  @cbrnr do you have time to look?", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/11010/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/11010/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/10992", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10992/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10992/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10992/events", "html_url": "https://github.com/mne-tools/mne-python/issues/10992", "id": 1325907622, "node_id": "I_kwDOABPcUM5PB76m", "number": 10992, "title": "mne.gui.coregistration() helmet and surfaces not shown correctly", "user": {"login": "olafhauk", "id": 7878274, "node_id": "MDQ6VXNlcjc4NzgyNzQ=", "avatar_url": "https://avatars.githubusercontent.com/u/7878274?v=4", "gravatar_id": "", "url": "https://api.github.com/users/olafhauk", "html_url": "https://github.com/olafhauk", "followers_url": "https://api.github.com/users/olafhauk/followers", "following_url": "https://api.github.com/users/olafhauk/following{/other_user}", "gists_url": "https://api.github.com/users/olafhauk/gists{/gist_id}", "starred_url": "https://api.github.com/users/olafhauk/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/olafhauk/subscriptions", "organizations_url": "https://api.github.com/users/olafhauk/orgs", "repos_url": "https://api.github.com/users/olafhauk/repos", "events_url": "https://api.github.com/users/olafhauk/events{/privacy}", "received_events_url": "https://api.github.com/users/olafhauk/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/mne-tools/mne-python/milestones/23", "html_url": "https://github.com/mne-tools/mne-python/milestone/23", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/milestones/23/labels", "id": 8047399, "node_id": "MI_kwDOABPcUM4Aessn", "number": 23, "title": "1.2", "description": "", "creator": {"login": "hoechenberger", "id": 2046265, "node_id": "MDQ6VXNlcjIwNDYyNjU=", "avatar_url": "https://avatars.githubusercontent.com/u/2046265?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hoechenberger", "html_url": "https://github.com/hoechenberger", "followers_url": "https://api.github.com/users/hoechenberger/followers", "following_url": "https://api.github.com/users/hoechenberger/following{/other_user}", "gists_url": "https://api.github.com/users/hoechenberger/gists{/gist_id}", "starred_url": "https://api.github.com/users/hoechenberger/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hoechenberger/subscriptions", "organizations_url": "https://api.github.com/users/hoechenberger/orgs", "repos_url": "https://api.github.com/users/hoechenberger/repos", "events_url": "https://api.github.com/users/hoechenberger/events{/privacy}", "received_events_url": "https://api.github.com/users/hoechenberger/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 71, "state": "closed", "created_at": "2022-06-03T17:43:37Z", "updated_at": "2022-10-11T20:15:01Z", "due_on": "2022-09-01T07:00:00Z", "closed_at": "2022-10-11T20:15:01Z"}, "comments": 2, "created_at": "2022-08-02T14:02:05Z", "updated_at": "2022-09-15T17:23:09Z", "closed_at": "2022-09-15T17:23:09Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "#### Describe the bug\r\n\r\nmne.gui.coregistration() shows scalp surface and digitization points, but:\r\n1) not the MEG helmet\r\n2) responds to \"Head opacity\" in \"all-or-none\" manner, i.e. scalp surface is only shown when head opacity slider is at its rightmost position.\r\nVersion 1.0.3 (Linux, Centos 7)\r\n\r\n#### Steps to reproduce\r\nmne.gui.coregistration(subject='sample', subjects_dir='...MNE-sample-data/subjects', inst='.../MEG/sample/sample_audvis_raw.fif')\r\n\r\n#### Expected results\r\n\r\nPlots e.g. in https://mne.tools/stable/auto_tutorials/forward/25_automated_coreg.html.\r\n\r\n#### Actual results\r\nWith scalp surface, no MEG helmet:\r\n![image](https://user-images.githubusercontent.com/7878274/182393227-4fec560e-d7ce-49ce-9fda-3e743f9f3054.png)\r\n\r\nNo scalp surface, no MEG helmet:\r\n\r\n![image](https://user-images.githubusercontent.com/7878274/182393471-70423ee5-d568-4870-88f8-fcbc2c425a01.png)\r\n\r\n\r\n#### Additional information\r\n\r\nPlatform:         Linux-3.10.0-1160.el7.x86_64-x86_64-with-glibc2.17\r\nPython:           3.10.4 | packaged by conda-forge | (main, Mar 24 2022, 17:38:57) [GCC 10.3.0]\r\nExecutable:       /imaging/local/software/mne_python/mne1.0.3_0/bin/python\r\nCPU:              x86_64: 20 cores\r\nMemory:           251.7 GB\r\n\r\nmne:              1.0.3\r\nnumpy:            1.21.6 {blas=NO_ATLAS_INFO, lapack=lapack}\r\nscipy:            1.8.0\r\nmatplotlib:       3.5.2 {backend=QtAgg}\r\n\r\nsklearn:          1.0.2\r\nnumba:            0.55.1\r\nnibabel:          3.2.2\r\nnilearn:          0.9.1\r\ndipy:             1.5.0\r\ncupy:             Not found\r\npandas:           1.4.2\r\npyvista:          0.34.0 {OpenGL 3.3 (Core Profile) Mesa 18.3.4 via llvmpipe (LLVM 7.0, 256 bits)}\r\npyvistaqt:        0.9.0\r\nipyvtklink:       0.2.2\r\nvtk:              9.1.0\r\nPyQt5:            5.12.3\r\nipympl:           0.9.1\r\npooch:            v1.6.0\r\n\r\nmne_bids:         0.10\r\nmne_nirs:         0.2.1\r\nmne_features:     0.2\r\nmne_qt_browser:   0.3.1\r\nmne_connectivity: 0.3\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/10992/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10992/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/10991", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10991/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10991/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10991/events", "html_url": "https://github.com/mne-tools/mne-python/issues/10991", "id": 1325890738, "node_id": "I_kwDOABPcUM5PB3yy", "number": 10991, "title": "Surfaces and sensors not showing in coregistration/alignment visualization", "user": {"login": "olafhauk", "id": 7878274, "node_id": "MDQ6VXNlcjc4NzgyNzQ=", "avatar_url": "https://avatars.githubusercontent.com/u/7878274?v=4", "gravatar_id": "", "url": "https://api.github.com/users/olafhauk", "html_url": "https://github.com/olafhauk", "followers_url": "https://api.github.com/users/olafhauk/followers", "following_url": "https://api.github.com/users/olafhauk/following{/other_user}", "gists_url": "https://api.github.com/users/olafhauk/gists{/gist_id}", "starred_url": "https://api.github.com/users/olafhauk/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/olafhauk/subscriptions", "organizations_url": "https://api.github.com/users/olafhauk/orgs", "repos_url": "https://api.github.com/users/olafhauk/repos", "events_url": "https://api.github.com/users/olafhauk/events{/privacy}", "received_events_url": "https://api.github.com/users/olafhauk/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2022-08-02T13:50:08Z", "updated_at": "2022-10-21T18:23:49Z", "closed_at": "2022-10-21T18:23:49Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "#### Describe the bug\r\n*Replace this text with a description of the bug.*\r\n\r\nUsing mne.viz.plot_alignment() (as e.g. in tutorial 20_source_alignment.html only shows landmarks but not surfaces or sensors.\r\nVersion 1.0.3 under Linux (Centos 7).\r\n\r\n#### Steps to reproduce\r\n\r\ntutorial 20_source_alignment.html\r\n\r\n\r\n#### Expected results\r\n\r\nPlots as in tutorial https://mne.tools/stable/auto_tutorials/forward/20_source_alignment.html.\r\n\r\n\r\n#### Actual results\r\n\r\n![image](https://user-images.githubusercontent.com/7878274/182390697-4360b55b-bc20-469c-9a0a-7dc5a0dfe950.png)\r\n\r\n\r\n#### Additional information\r\n\r\nPlatform:         Linux-3.10.0-1160.el7.x86_64-x86_64-with-glibc2.17\r\nPython:           3.10.4 | packaged by conda-forge | (main, Mar 24 2022, 17:38:57) [GCC 10.3.0]\r\nExecutable:       /imaging/local/software/mne_python/mne1.0.3_0/bin/python\r\nCPU:              x86_64: 20 cores\r\nMemory:           251.7 GB\r\n\r\nmne:              1.0.3\r\nnumpy:            1.21.6 {blas=NO_ATLAS_INFO, lapack=lapack}\r\nscipy:            1.8.0\r\nmatplotlib:       3.5.2 {backend=QtAgg}\r\n\r\nsklearn:          1.0.2\r\nnumba:            0.55.1\r\nnibabel:          3.2.2\r\nnilearn:          0.9.1\r\ndipy:             1.5.0\r\ncupy:             Not found\r\npandas:           1.4.2\r\npyvista:          0.34.0 {OpenGL 3.3 (Core Profile) Mesa 18.3.4 via llvmpipe (LLVM 7.0, 256 bits)}\r\npyvistaqt:        0.9.0\r\nipyvtklink:       0.2.2\r\nvtk:              9.1.0\r\nPyQt5:            5.12.3\r\nipympl:           0.9.1\r\npooch:            v1.6.0\r\n\r\nmne_bids:         0.10\r\nmne_nirs:         0.2.1\r\nmne_features:     0.2\r\nmne_qt_browser:   0.3.1\r\nmne_connectivity: 0.3\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/10991/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10991/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/10988", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10988/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10988/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10988/events", "html_url": "https://github.com/mne-tools/mne-python/issues/10988", "id": 1325607189, "node_id": "I_kwDOABPcUM5PAykV", "number": 10988, "title": "All EEG and EOG channels have type 'ecg' when reading HCP data using read_raw_bti()", "user": {"login": "ckiefer0", "id": 25769508, "node_id": "MDQ6VXNlcjI1NzY5NTA4", "avatar_url": "https://avatars.githubusercontent.com/u/25769508?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ckiefer0", "html_url": "https://github.com/ckiefer0", "followers_url": "https://api.github.com/users/ckiefer0/followers", "following_url": "https://api.github.com/users/ckiefer0/following{/other_user}", "gists_url": "https://api.github.com/users/ckiefer0/gists{/gist_id}", "starred_url": "https://api.github.com/users/ckiefer0/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ckiefer0/subscriptions", "organizations_url": "https://api.github.com/users/ckiefer0/orgs", "repos_url": "https://api.github.com/users/ckiefer0/repos", "events_url": "https://api.github.com/users/ckiefer0/events{/privacy}", "received_events_url": "https://api.github.com/users/ckiefer0/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "larsoner", "id": 2365790, "node_id": "MDQ6VXNlcjIzNjU3OTA=", "avatar_url": "https://avatars.githubusercontent.com/u/2365790?v=4", "gravatar_id": "", "url": "https://api.github.com/users/larsoner", "html_url": "https://github.com/larsoner", "followers_url": "https://api.github.com/users/larsoner/followers", "following_url": "https://api.github.com/users/larsoner/following{/other_user}", "gists_url": "https://api.github.com/users/larsoner/gists{/gist_id}", "starred_url": "https://api.github.com/users/larsoner/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/larsoner/subscriptions", "organizations_url": "https://api.github.com/users/larsoner/orgs", "repos_url": "https://api.github.com/users/larsoner/repos", "events_url": "https://api.github.com/users/larsoner/events{/privacy}", "received_events_url": "https://api.github.com/users/larsoner/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "larsoner", "id": 2365790, "node_id": "MDQ6VXNlcjIzNjU3OTA=", "avatar_url": "https://avatars.githubusercontent.com/u/2365790?v=4", "gravatar_id": "", "url": "https://api.github.com/users/larsoner", "html_url": "https://github.com/larsoner", "followers_url": "https://api.github.com/users/larsoner/followers", "following_url": "https://api.github.com/users/larsoner/following{/other_user}", "gists_url": "https://api.github.com/users/larsoner/gists{/gist_id}", "starred_url": "https://api.github.com/users/larsoner/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/larsoner/subscriptions", "organizations_url": "https://api.github.com/users/larsoner/orgs", "repos_url": "https://api.github.com/users/larsoner/repos", "events_url": "https://api.github.com/users/larsoner/events{/privacy}", "received_events_url": "https://api.github.com/users/larsoner/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/mne-tools/mne-python/milestones/23", "html_url": "https://github.com/mne-tools/mne-python/milestone/23", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/milestones/23/labels", "id": 8047399, "node_id": "MI_kwDOABPcUM4Aessn", "number": 23, "title": "1.2", "description": "", "creator": {"login": "hoechenberger", "id": 2046265, "node_id": "MDQ6VXNlcjIwNDYyNjU=", "avatar_url": "https://avatars.githubusercontent.com/u/2046265?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hoechenberger", "html_url": "https://github.com/hoechenberger", "followers_url": "https://api.github.com/users/hoechenberger/followers", "following_url": "https://api.github.com/users/hoechenberger/following{/other_user}", "gists_url": "https://api.github.com/users/hoechenberger/gists{/gist_id}", "starred_url": "https://api.github.com/users/hoechenberger/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hoechenberger/subscriptions", "organizations_url": "https://api.github.com/users/hoechenberger/orgs", "repos_url": "https://api.github.com/users/hoechenberger/repos", "events_url": "https://api.github.com/users/hoechenberger/events{/privacy}", "received_events_url": "https://api.github.com/users/hoechenberger/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 71, "state": "closed", "created_at": "2022-06-03T17:43:37Z", "updated_at": "2022-10-11T20:15:01Z", "due_on": "2022-09-01T07:00:00Z", "closed_at": "2022-10-11T20:15:01Z"}, "comments": 6, "created_at": "2022-08-02T09:58:06Z", "updated_at": "2022-08-31T12:55:48Z", "closed_at": "2022-08-27T16:28:24Z", "author_association": "NONE", "active_lock_reason": null, "body": "This bug report is based on [this discussion](https://mne.discourse.group/t/why-does-mne-minimum-norm-apply-inverse-raw-call-check-reference-when-using-only-meg-channels/5321) in the MNE group.\r\n\r\nI am using MNE and MNE-HCP to analyze HCP data. When I use the following function to read the HCP data, all ECG, EOG, and EEG channels have type 'ecg':\r\n\r\n```\r\nfiles = hcp.file_mapping.get_file_paths(subject=subj, data_type=datatype,\r\n                                        output='raw', hcp_path=hcp_dir, run_index=run_index)\r\n# read the raw data\r\nraw = mne.io.read_raw_bti(files[0], head_shape_fname=None, convert=False, preload=True)\r\n```\r\n\r\nThe same also happens when I simply use hcp.read_raw(). Here are the info files for the two variants.\r\n\r\nmne.io.read_raw_bti:\r\n\r\n> <Info | 8 non-empty values\r\n>  bads: []\r\n>  ch_names: MEG 001, MEG 002, MEG 003, MEG 004, MEG 005, MEG 006, MEG 007, ...\r\n>  chs: 248 Magnetometers, 2 Stimulus, 23 Reference Magnetometers, 13 ECG, 1 misc\r\n>  custom_ref_applied: False\r\n>  dev_ctf_t: CTF MEG device -> CTF/4D/KIT head transform\r\n>  highpass: 0.0 Hz\r\n>  lowpass: 1017.3 Hz\r\n>  meas_date: 2014-05-21 14:38:37 UTC\r\n>  nchan: 287\r\n>  projs: []\r\n>  sfreq: 2034.5 Hz\r\n> >\r\n\r\nhcp.read_raw:\r\n\r\n> <Info | 8 non-empty values\r\n>  bads: []\r\n>  ch_names: TRIGGER, RESPONSE, MLzA, MLyA, MLzaA, MLyaA, MLxA, A22, MLxaA, ...\r\n>  chs: 2 Stimulus, 23 Reference Magnetometers, 248 Magnetometers, 13 ECG, 1 misc\r\n>  custom_ref_applied: False\r\n>  dev_ctf_t: CTF MEG device -> CTF/4D/KIT head transform\r\n>  highpass: 0.0 Hz\r\n>  lowpass: 1017.3 Hz\r\n>  meas_date: 2014-05-21 14:38:37 UTC\r\n>  nchan: 287\r\n>  projs: []\r\n>  sfreq: 2034.5 Hz\r\n> >\r\n\r\nFurthermore, when using mne.io.read_raw_bti(), the ECG+ and ECG- channels are not named correctly anymore. I am currently using these functions as a workaround:\r\n```\r\n\r\ndef _set_custom_ref_to_off(raw):\r\n\r\n    from mne.io.constants import FIFF\r\n    with raw.info._unlock():\r\n        raw.info['custom_ref_applied'] = FIFF.FIFFV_MNE_CUSTOM_REF_OFF\r\n\r\n\r\ndef set_ecg_eog_channels(raw):\r\n    \"\"\"\r\n    Set correct channel type for EEG/ECG/EOG channels and re-reference\r\n    ECG, VEOG, and HEOG channels using a bipolar referencing scheme.\r\n\r\n    Operates in place.\r\n    \"\"\"\r\n    # somehow all channels have type ECG -> set to EEG first\r\n    ecg_picks = mne.pick_types(raw.info, ecg=True)\r\n    for pick in ecg_picks:\r\n        ch_name = raw.info['ch_names'][pick]\r\n        raw.set_channel_types({ch_name: 'eeg'})\r\n\r\n    # set correct channel names for ECG\r\n    ecg_ch_mapping = {'EEG 001': 'ECG+', 'EEG 004': 'ECG-'}\r\n    mne.channels.rename_channels(raw.info, ecg_ch_mapping)\r\n\r\n    # combine ECG+/-, VEOG+/-, and HEOG+/- into three channels\r\n    # and set appropriate channel types\r\n    hcp.preprocessing.set_eog_ecg_channels(raw)\r\n\r\n    # hcp.preprocessing.set_eog_ecg_channels() results in flag custom_ref_applied\r\n    # being set to True -> set back to False to avoid errors\r\n    # when calling mne.minimum_norm.apply_inverse_raw()\r\n    _set_custom_ref_to_off(raw)\r\n\r\n```\r\n\r\nVersions:\r\nMNE-HCP: 0.1.dev12\r\nMNE: 1.03", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/10988/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10988/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/10987", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10987/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10987/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10987/events", "html_url": "https://github.com/mne-tools/mne-python/issues/10987", "id": 1325565752, "node_id": "I_kwDOABPcUM5PAoc4", "number": 10987, "title": "apply_inverse_raw() calls _check_reference() even though no EEG channels are used", "user": {"login": "ckiefer0", "id": 25769508, "node_id": "MDQ6VXNlcjI1NzY5NTA4", "avatar_url": "https://avatars.githubusercontent.com/u/25769508?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ckiefer0", "html_url": "https://github.com/ckiefer0", "followers_url": "https://api.github.com/users/ckiefer0/followers", "following_url": "https://api.github.com/users/ckiefer0/following{/other_user}", "gists_url": "https://api.github.com/users/ckiefer0/gists{/gist_id}", "starred_url": "https://api.github.com/users/ckiefer0/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ckiefer0/subscriptions", "organizations_url": "https://api.github.com/users/ckiefer0/orgs", "repos_url": "https://api.github.com/users/ckiefer0/repos", "events_url": "https://api.github.com/users/ckiefer0/events{/privacy}", "received_events_url": "https://api.github.com/users/ckiefer0/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "larsoner", "id": 2365790, "node_id": "MDQ6VXNlcjIzNjU3OTA=", "avatar_url": "https://avatars.githubusercontent.com/u/2365790?v=4", "gravatar_id": "", "url": "https://api.github.com/users/larsoner", "html_url": "https://github.com/larsoner", "followers_url": "https://api.github.com/users/larsoner/followers", "following_url": "https://api.github.com/users/larsoner/following{/other_user}", "gists_url": "https://api.github.com/users/larsoner/gists{/gist_id}", "starred_url": "https://api.github.com/users/larsoner/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/larsoner/subscriptions", "organizations_url": "https://api.github.com/users/larsoner/orgs", "repos_url": "https://api.github.com/users/larsoner/repos", "events_url": "https://api.github.com/users/larsoner/events{/privacy}", "received_events_url": "https://api.github.com/users/larsoner/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "larsoner", "id": 2365790, "node_id": "MDQ6VXNlcjIzNjU3OTA=", "avatar_url": "https://avatars.githubusercontent.com/u/2365790?v=4", "gravatar_id": "", "url": "https://api.github.com/users/larsoner", "html_url": "https://github.com/larsoner", "followers_url": "https://api.github.com/users/larsoner/followers", "following_url": "https://api.github.com/users/larsoner/following{/other_user}", "gists_url": "https://api.github.com/users/larsoner/gists{/gist_id}", "starred_url": "https://api.github.com/users/larsoner/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/larsoner/subscriptions", "organizations_url": "https://api.github.com/users/larsoner/orgs", "repos_url": "https://api.github.com/users/larsoner/repos", "events_url": "https://api.github.com/users/larsoner/events{/privacy}", "received_events_url": "https://api.github.com/users/larsoner/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/mne-tools/mne-python/milestones/23", "html_url": "https://github.com/mne-tools/mne-python/milestone/23", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/milestones/23/labels", "id": 8047399, "node_id": "MI_kwDOABPcUM4Aessn", "number": 23, "title": "1.2", "description": "", "creator": {"login": "hoechenberger", "id": 2046265, "node_id": "MDQ6VXNlcjIwNDYyNjU=", "avatar_url": "https://avatars.githubusercontent.com/u/2046265?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hoechenberger", "html_url": "https://github.com/hoechenberger", "followers_url": "https://api.github.com/users/hoechenberger/followers", "following_url": "https://api.github.com/users/hoechenberger/following{/other_user}", "gists_url": "https://api.github.com/users/hoechenberger/gists{/gist_id}", "starred_url": "https://api.github.com/users/hoechenberger/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hoechenberger/subscriptions", "organizations_url": "https://api.github.com/users/hoechenberger/orgs", "repos_url": "https://api.github.com/users/hoechenberger/repos", "events_url": "https://api.github.com/users/hoechenberger/events{/privacy}", "received_events_url": "https://api.github.com/users/hoechenberger/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 71, "state": "closed", "created_at": "2022-06-03T17:43:37Z", "updated_at": "2022-10-11T20:15:01Z", "due_on": "2022-09-01T07:00:00Z", "closed_at": "2022-10-11T20:15:01Z"}, "comments": 4, "created_at": "2022-08-02T09:24:24Z", "updated_at": "2022-10-05T11:41:52Z", "closed_at": "2022-09-17T14:23:31Z", "author_association": "NONE", "active_lock_reason": null, "body": "This bug report is based on [this discussion](https://mne.discourse.group/t/why-does-mne-minimum-norm-apply-inverse-raw-call-check-reference-when-using-only-meg-channels/5321) in the MNE group.\r\n\r\nI am trying to compute the inverse solution for continuous raw data. I am only interested in MEG channels so I set eeg to False during the computation of the inverse operator. However, apply_inverse_raw() still calls _check_reference().\r\n\r\nUnfortunately, the flag custom_ref_applied was set to True for the HCP data (see discussion for details), which caused _check_reference() to raise an error despite me not even using EEG channels.\r\n\r\napply_inverse_raw() should either only call _check_reference() if EEG channels are being used or _check_reference() should check whether EEG channels are being used before raising an error. Personally, I think the second option is better since this seems relevant for other methods calling _check_reference() as well. A solution could look like this:\r\n\r\n```\r\ndef _check_reference(inst, ch_names=None):\r\n    \"\"\"Check for EEG ref.\"\"\"\r\n    info = inst.info\r\n    if ch_names is not None:\r\n        picks = [ci for ci, ch_name in enumerate(info['ch_names'])\r\n                 if ch_name in ch_names]\r\n        info = pick_info(info, sel=picks)\r\n    if 'eeg' not in info.get_channel_types():\r\n        return\r\n    if _needs_eeg_average_ref_proj(info):\r\n        raise ValueError(\r\n            'EEG average reference (using a projector) is mandatory for '\r\n            'modeling, use the method set_eeg_reference(projection=True)')\r\n    if info.get('custom_ref_applied', False):\r\n        raise ValueError('Custom EEG reference is not allowed for inverse '\r\n                         'modeling.')\r\n```\r\n\r\nAlso as a side question, why does apply_inverse_epochs() not call _check_reference()?", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/10987/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10987/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/10985", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10985/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10985/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10985/events", "html_url": "https://github.com/mne-tools/mne-python/issues/10985", "id": 1324706628, "node_id": "I_kwDOABPcUM5O9WtE", "number": 10985, "title": "Two test failures on ppc64le", "user": {"login": "musicinmybrain", "id": 6898909, "node_id": "MDQ6VXNlcjY4OTg5MDk=", "avatar_url": "https://avatars.githubusercontent.com/u/6898909?v=4", "gravatar_id": "", "url": "https://api.github.com/users/musicinmybrain", "html_url": "https://github.com/musicinmybrain", "followers_url": "https://api.github.com/users/musicinmybrain/followers", "following_url": "https://api.github.com/users/musicinmybrain/following{/other_user}", "gists_url": "https://api.github.com/users/musicinmybrain/gists{/gist_id}", "starred_url": "https://api.github.com/users/musicinmybrain/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/musicinmybrain/subscriptions", "organizations_url": "https://api.github.com/users/musicinmybrain/orgs", "repos_url": "https://api.github.com/users/musicinmybrain/repos", "events_url": "https://api.github.com/users/musicinmybrain/events{/privacy}", "received_events_url": "https://api.github.com/users/musicinmybrain/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 13, "created_at": "2022-08-01T16:56:27Z", "updated_at": "2022-10-28T15:53:51Z", "closed_at": "2022-10-28T15:53:51Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "#### Describe the bug\r\n\r\nWhile packaging version 1.0.3 for Fedora linux, we found that the tests `test_csd_morlet` and `test_time_frequency` fail on `ppc64le`.\r\n\r\n#### Steps to reproduce\r\n\r\nRun the unit tests on a `ppc64le` system. There is no reason to believe this error is specific to the Fedora Linux RPM build environment.\r\n\r\n#### Expected results\r\n\r\nAll tests pass.\r\n\r\n#### Actual results\r\n\r\n```\r\n=================================== FAILURES ===================================\r\n_______________________________ test_csd_morlet ________________________________\r\nmne/time_frequency/tests/test_csd.py:529: in test_csd_morlet\r\n    assert_allclose(csd._data[[0, 3, 5]] * sfreq, power)\r\nE   AssertionError: \r\nE   Not equal to tolerance rtol=1e-07, atol=0\r\nE   \r\nE   Mismatched elements: 9 / 9 (100%)\r\nE   Max absolute difference: 13.4892946\r\nE   Max relative difference: 0.99930094\r\nE    x: array([[2.698620e+01+3.629330e-17j, 9.270776e-04+1.165640e-21j,\r\nE           2.699776e+01-1.773874e-17j],\r\nE          [2.698733e+01+3.677728e-17j, 1.591260e-03-2.498003e-21j,...\r\nE    y: array([[1.350002e+01, 2.383404e-03, 1.351705e+01],\r\nE          [1.349949e+01, 2.270551e-03, 1.603048e-04],\r\nE          [1.349873e+01, 6.293613e-03, 1.350833e+01]])\r\n----------------------------- Captured stdout call -----------------------------\r\nNot setting metadata\r\n1 matching events found\r\nApplying baseline correction (mode: mean)\r\n0 projection items activated\r\n0 bad epochs dropped\r\nComputing cross-spectral density from epochs...\r\n[done]\r\nComputing cross-spectral density from epochs...\r\n[done]\r\nComputing cross-spectral density from epochs...\r\n[done]\r\nComputing cross-spectral density from epochs...\r\n[done]\r\nComputing cross-spectral density from epochs...\r\n[done]\r\n----------------------------- Captured stderr call -----------------------------\r\n\r\n  0%|          | CSD epoch blocks : 0/1 [00:00<?,       ?it/s]\r\n100%|\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588| CSD epoch blocks : 1/1 [00:00<00:00,  850.08it/s]\r\n\r\n  0%|          | CSD epoch blocks : 0/1 [00:00<?,       ?it/s]\r\n100%|\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588| CSD epoch blocks : 1/1 [00:00<00:00,  911.01it/s]\r\n\r\n  0%|          | CSD epoch blocks : 0/1 [00:00<?,       ?it/s]\r\n100%|\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588| CSD epoch blocks : 1/1 [00:00<00:00,  745.79it/s]\r\n\r\n  0%|          | CSD epoch blocks : 0/1 [00:00<?,       ?it/s]\r\n100%|\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588| CSD epoch blocks : 1/1 [00:00<00:00,  900.26it/s]\r\n\r\n  0%|          | CSD epoch blocks : 0/1 [00:00<?,       ?it/s]\r\n100%|\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588| CSD epoch blocks : 1/1 [00:00<00:00,  887.12it/s]\r\n_____________________________ test_time_frequency ______________________________\r\nmne/time_frequency/tests/test_tfr.py:132: in test_time_frequency\r\n    assert_allclose(epochs_amplitude_2.data**2, epochs_power_picks.data)\r\nE   AssertionError: \r\nE   Not equal to tolerance rtol=1e-07, atol=0\r\nE   \r\nE   Mismatched elements: 17637 / 17640 (100%)\r\nE   Max absolute difference: 8.4915913e-21\r\nE   Max relative difference: 63.63766583\r\nE    x: array([[[[6.565396e-24, 3.838394e-24, 1.699187e-24, ..., 1.025243e-22,\r\nE             8.846176e-23, 7.457034e-23],\r\nE            [1.024062e-22, 9.587875e-23, 8.570987e-23, ..., 6.220701e-23,...\r\nE    y: array([[[[9.130315e-23, 9.576540e-23, 9.999026e-23, ..., 2.239139e-22,\r\nE             2.292956e-22, 2.341922e-22],\r\nE            [1.239185e-22, 1.324456e-22, 1.410500e-22, ..., 1.732860e-22,...\r\n----------------------------- Captured stdout call -----------------------------\r\nOpening raw data file /builddir/build/BUILD/mne-python-1.0.3/mne/time_frequency/tests/../../io/tests/data/test_raw.fif...\r\n    Read a total of 3 projection items:\r\n        PCA-v1 (1 x 102)  idle\r\n        PCA-v2 (1 x 102)  idle\r\n        PCA-v3 (1 x 102)  idle\r\n    Range : 25800 ... 40199 =     42.956 ...    66.930 secs\r\nReady.\r\nNot setting metadata\r\n7 matching events found\r\nSetting baseline interval to [-0.19979521315838786, 0.0] sec\r\nApplying baseline correction (mode: mean)\r\n3 projection items activated\r\nLoading data for 7 events and 420 original time points ...\r\n0 bad epochs dropped\r\nNot setting metadata\r\n7 matching events found\r\nSetting baseline interval to [-0.19979521315838786, 0.0] sec\r\nApplying baseline correction (mode: mean)\r\nCreated an SSP operator (subspace dimension = 3)\r\n3 projection items activated\r\nLoading data for 1 events and 420 original time points ...\r\nRemoving projector <Projection | PCA-v1, active : True, n_channels : 102>\r\nRemoving projector <Projection | PCA-v2, active : True, n_channels : 102>\r\nRemoving projector <Projection | PCA-v3, active : True, n_channels : 102>\r\nLoading data for 7 events and 420 original time points ...\r\nLoading data for 7 events and 420 original time points ...\r\nLoading data for 7 events and 420 original time points ...\r\nLoading data for 7 events and 420 original time points ...\r\n0 bad epochs dropped\r\nLoading data for 7 events and 420 original time points ...\r\nNot setting metadata\r\nLoading data for 7 events and 420 original time points ...\r\nLoading data for 7 events and 420 original time points ...\r\nLoading data for 7 events and 420 original time points ...\r\nNot setting metadata\r\n```\r\n\r\n#### Additional information\r\n\r\n```\r\nPlatform:         Linux-5.18.10-200.fc36.ppc64le-ppc64le-with-glibc2.35.9000\r\nPython:           3.11.0b5 (main, Jul 26 2022, 00:00:00) [GCC 12.1.1 20220628 (Red Hat 12.1.1-3)]\r\nExecutable:       /usr/bin/python3\r\nCPU:              ppc64le: 8 cores\r\nMemory:           Unavailable (requires \"psutil\" package)\r\nmne:              1.0.3\r\nnumpy:            1.22.0 {blas=flexiblas, lapack=flexiblas}\r\nscipy:            1.8.1\r\nmatplotlib:       3.5.2 {backend=agg}\r\nsklearn:          1.0.2\r\nnumba:            Not found\r\nnibabel:          3.2.2\r\nnilearn:          0.9.1\r\ndipy:             1.5.0\r\ncupy:             Not found\r\npandas:           1.3.5\r\npyvista:          Not found\r\npyvistaqt:        Not found\r\nipyvtklink:       Not found\r\nvtk:              9.1.0\r\nPyQt5:            5.15.6\r\nipympl:           Not found\r\npooch:            v1.5.2\r\nmne_bids:         Not found\r\nmne_nirs:         Not found\r\nmne_features:     Not found\r\nmne_qt_browser:   Not found\r\nmne_connectivity: Not found\r\n```\r\n\r\nI am happy to run any additional tests that may be helpful, or try any candidate fixes, on real or emulated `ppc64le` hardware.", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/10985/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10985/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/10984", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10984/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10984/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10984/events", "html_url": "https://github.com/mne-tools/mne-python/issues/10984", "id": 1324706602, "node_id": "I_kwDOABPcUM5O9Wsq", "number": 10984, "title": "One test failure on aarch64", "user": {"login": "musicinmybrain", "id": 6898909, "node_id": "MDQ6VXNlcjY4OTg5MDk=", "avatar_url": "https://avatars.githubusercontent.com/u/6898909?v=4", "gravatar_id": "", "url": "https://api.github.com/users/musicinmybrain", "html_url": "https://github.com/musicinmybrain", "followers_url": "https://api.github.com/users/musicinmybrain/followers", "following_url": "https://api.github.com/users/musicinmybrain/following{/other_user}", "gists_url": "https://api.github.com/users/musicinmybrain/gists{/gist_id}", "starred_url": "https://api.github.com/users/musicinmybrain/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/musicinmybrain/subscriptions", "organizations_url": "https://api.github.com/users/musicinmybrain/orgs", "repos_url": "https://api.github.com/users/musicinmybrain/repos", "events_url": "https://api.github.com/users/musicinmybrain/events{/privacy}", "received_events_url": "https://api.github.com/users/musicinmybrain/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2022-08-01T16:56:25Z", "updated_at": "2022-10-30T14:50:33Z", "closed_at": "2022-10-28T15:53:51Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "#### Describe the bug\r\n\r\nWhile packaging version 1.0.3 for Fedora linux, we found that the test `test_mxne_inverse_sure_synthetic[3-0.75-4-20-60-20]` fails on `aarch64` due to division by zero.\r\n\r\n#### Steps to reproduce\r\n\r\nRun the unit tests on an `aarch64` system. There is no reason to believe this error is specific to the Fedora Linux RPM build environment.\r\n\r\n#### Expected results\r\n\r\nAll tests pass.\r\n\r\n#### Actual results\r\n\r\n```\r\n=================================== FAILURES ===================================\r\n_____________ test_mxne_inverse_sure_synthetic[3-0.75-4-20-60-20] ______________\r\nmne/inverse_sparse/tests/test_mxne_inverse.py:372: in test_mxne_inverse_sure_synthetic\r\n    _, active_set, _ = _compute_mxne_sure(M, G, alpha_grid, sigma=sigma,\r\n<decorator-gen-507>:10: in _compute_mxne_sure\r\n    ???\r\nmne/inverse_sparse/mxne_inverse.py:881: in _compute_mxne_sure\r\n    coefs_grid_1, coefs_grid_2, active_sets = _fit_on_grid(gain, M, eps, delta)\r\nmne/inverse_sparse/mxne_inverse.py:858: in _fit_on_grid\r\n    X_eps, a_set_eps = _run_solver(alpha, M_eps,\r\nmne/inverse_sparse/mxne_inverse.py:819: in _run_solver\r\n    X, active_set, _ = iterative_mixed_norm_solver(\r\n<decorator-gen-497>:10: in iterative_mixed_norm_solver\r\n    ???\r\nmne/inverse_sparse/mxne_optim.py:584: in iterative_mixed_norm_solver\r\n    X, _active_set, _ = mixed_norm_solver(\r\n<decorator-gen-496>:10: in mixed_norm_solver\r\n    ???\r\nmne/inverse_sparse/mxne_optim.py:485: in mixed_norm_solver\r\n    X, active_set, E = l21_solver(M, G, alpha, lc, maxit=maxit,\r\n<decorator-gen-495>:12: in _mixed_norm_solver_bcd\r\n    ???\r\nmne/inverse_sparse/mxne_optim.py:233: in _mixed_norm_solver_bcd\r\n    c = z / z.sum()\r\nE   RuntimeWarning: divide by zero encountered in true_divide\r\n```\r\n\r\n#### Additional information\r\n\r\n```\r\nPlatform:         Linux-5.18.11-200.fc36.aarch64-aarch64-with-glibc2.35.9000\r\nPython:           3.11.0b5 (main, Jul 26 2022, 00:00:00) [GCC 12.1.1 20220628 (Red Hat 12.1.1-3)]\r\nExecutable:       /usr/bin/python3\r\nCPU:              aarch64: 5 cores\r\nMemory:           Unavailable (requires \"psutil\" package)\r\nmne:              1.0.3\r\nnumpy:            1.22.0 {blas=flexiblas, lapack=flexiblas}\r\nscipy:            1.8.1\r\nmatplotlib:       3.5.2 {backend=agg}\r\nsklearn:          1.0.2\r\nnumba:            Not found\r\nnibabel:          3.2.2\r\nnilearn:          0.9.1\r\ndipy:             1.5.0\r\ncupy:             Not found\r\npandas:           1.3.5\r\npyvista:          Not found\r\npyvistaqt:        Not found\r\nipyvtklink:       Not found\r\nvtk:              9.1.0\r\nPyQt5:            5.15.6\r\nipympl:           Not found\r\npooch:            v1.5.2\r\nmne_bids:         Not found\r\nmne_nirs:         Not found\r\nmne_features:     Not found\r\nmne_qt_browser:   Not found\r\nmne_connectivity: Not found\r\n```\r\n\r\nI am happy to run any additional tests that may be helpful, or try any candidate fixes, on real or emulated `aarch64` hardware.", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/10984/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10984/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/10971", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10971/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10971/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10971/events", "html_url": "https://github.com/mne-tools/mne-python/issues/10971", "id": 1321058758, "node_id": "I_kwDOABPcUM5OvcHG", "number": 10971, "title": "TimeFrequency Estimator modifies parameters in constructor", "user": {"login": "Dod12", "id": 7188700, "node_id": "MDQ6VXNlcjcxODg3MDA=", "avatar_url": "https://avatars.githubusercontent.com/u/7188700?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Dod12", "html_url": "https://github.com/Dod12", "followers_url": "https://api.github.com/users/Dod12/followers", "following_url": "https://api.github.com/users/Dod12/following{/other_user}", "gists_url": "https://api.github.com/users/Dod12/gists{/gist_id}", "starred_url": "https://api.github.com/users/Dod12/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Dod12/subscriptions", "organizations_url": "https://api.github.com/users/Dod12/orgs", "repos_url": "https://api.github.com/users/Dod12/repos", "events_url": "https://api.github.com/users/Dod12/events{/privacy}", "received_events_url": "https://api.github.com/users/Dod12/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/mne-tools/mne-python/milestones/23", "html_url": "https://github.com/mne-tools/mne-python/milestone/23", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/milestones/23/labels", "id": 8047399, "node_id": "MI_kwDOABPcUM4Aessn", "number": 23, "title": "1.2", "description": "", "creator": {"login": "hoechenberger", "id": 2046265, "node_id": "MDQ6VXNlcjIwNDYyNjU=", "avatar_url": "https://avatars.githubusercontent.com/u/2046265?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hoechenberger", "html_url": "https://github.com/hoechenberger", "followers_url": "https://api.github.com/users/hoechenberger/followers", "following_url": "https://api.github.com/users/hoechenberger/following{/other_user}", "gists_url": "https://api.github.com/users/hoechenberger/gists{/gist_id}", "starred_url": "https://api.github.com/users/hoechenberger/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hoechenberger/subscriptions", "organizations_url": "https://api.github.com/users/hoechenberger/orgs", "repos_url": "https://api.github.com/users/hoechenberger/repos", "events_url": "https://api.github.com/users/hoechenberger/events{/privacy}", "received_events_url": "https://api.github.com/users/hoechenberger/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 71, "state": "closed", "created_at": "2022-06-03T17:43:37Z", "updated_at": "2022-10-11T20:15:01Z", "due_on": "2022-09-01T07:00:00Z", "closed_at": "2022-10-11T20:15:01Z"}, "comments": 3, "created_at": "2022-07-28T14:51:45Z", "updated_at": "2022-08-15T14:43:50Z", "closed_at": "2022-08-15T14:43:50Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "#### Describe the bug\r\nThe `mne.decoding.TimeFrequency` transformer modifies constructor arguments, violating [scikit-learn guidance](https://scikit-learn.org/stable/developers/develop.html#instantiation) on estimators. This leads to a cloning error when using the function in a pipeline. I was able to resolve the issue by moving the `_check_tfr_param` call to the transform method, in line with other checks performed at that time. See the changes made to [mne.decoding.time_frequency.py](https://github.com/Lund-Memory-Lab/mne-python/blob/10e8f3b25386c75d608de806d1cd8e8eea4ad9d4/mne/decoding/time_frequency.py)\r\n\r\n#### Steps to reproduce\r\n```\r\nimport mne\r\nimport numpy as np\r\nfrom sklearn import pipeline, linear_model\r\n\r\ntfr_data = np.ones((100, 10, 1000))\r\n\r\nfreqs = np.array([5.])\r\n\r\nestimator = pipeline.make_pipeline(\r\n    mne.decoding.TimeFrequency(freqs, 10, \"morlet\", freqs/5., output=\"power\"),\r\n    mne.decoding.Vectorizer(),\r\n    linear_model.LogisticRegression(),\r\n)\r\n\r\nmne.decoding.cross_val_multiscore(estimator, tfr_data, np.random.binomial(1, 0.5, 100))\r\n```\r\n\r\n\r\n#### Expected results\r\nSuccessful completion of cross validation.\r\n\r\n#### Actual results\r\n```\r\nTraceback (most recent call last):\r\n  File \"/Users/daniel/miniconda3/envs/mne-python/lib/python3.10/site-packages/joblib/parallel.py\", line 822, in dispatch_one_batch\r\n    tasks = self._ready_batches.get(block=False)\r\n  File \"/Users/daniel/miniconda3/envs/mne-python/lib/python3.10/queue.py\", line 168, in get\r\n    raise Empty\r\n_queue.Empty\r\nDuring handling of the above exception, another exception occurred:\r\nTraceback (most recent call last):\r\n  File \"/Users/daniel/miniconda3/envs/mne-python/lib/python3.10/site-packages/IPython/core/interactiveshell.py\", line 3552, in run_code\r\n    exec(code_obj, self.user_global_ns, self.user_ns)\r\n  File \"<ipython-input-2-1fb399c6f0bb>\", line 1, in <cell line: 1>\r\n    runfile('error.py', wdir='/Users/daniel/Documents/Coding_Projects/GitHub/mne-python')\r\n  File \"/Users/daniel/Library/Application Support/JetBrains/Toolbox/apps/PyCharm-P/ch-0/221.6008.17/PyCharm.app/Contents/plugins/python/helpers/pydev/_pydev_bundle/pydev_umd.py\", line 198, in runfile\r\n    pydev_imports.execfile(filename, global_vars, local_vars)  # execute the script\r\n  File \"/Users/daniel/Library/Application Support/JetBrains/Toolbox/apps/PyCharm-P/ch-0/221.6008.17/PyCharm.app/Contents/plugins/python/helpers/pydev/_pydev_imps/_pydev_execfile.py\", line 18, in execfile\r\n    exec(compile(contents+\"\\n\", file, 'exec'), glob, loc)\r\n  File \"error.py\", line 15, in <module>\r\n    mne.decoding.cross_val_multiscore(estimator, tfr_data, np.random.binomial(1, 0.5, 100))\r\n  File \"<decorator-gen-447>\", line 12, in cross_val_multiscore\r\n  File \"/Users/daniel/Documents/Coding_Projects/GitHub/mne-python/mne/decoding/base.py\", line 435, in cross_val_multiscore\r\n    scores = parallel(\r\n  File \"/Users/daniel/miniconda3/envs/mne-python/lib/python3.10/site-packages/joblib/parallel.py\", line 1043, in __call__\r\n    if self.dispatch_one_batch(iterator):\r\n  File \"/Users/daniel/miniconda3/envs/mne-python/lib/python3.10/site-packages/joblib/parallel.py\", line 833, in dispatch_one_batch\r\n    islice = list(itertools.islice(iterator, big_batch_size))\r\n  File \"/Users/daniel/Documents/Coding_Projects/GitHub/mne-python/mne/decoding/base.py\", line 437, in <genexpr>\r\n    estimator=clone(estimator), X=X, y=y, scorer=scorer, train=train,\r\n  File \"/Users/daniel/miniconda3/envs/mne-python/lib/python3.10/site-packages/sklearn/base.py\", line 87, in clone\r\n    new_object_params[name] = clone(param, safe=False)\r\n  File \"/Users/daniel/miniconda3/envs/mne-python/lib/python3.10/site-packages/sklearn/base.py\", line 65, in clone\r\n    return estimator_type([clone(e, safe=safe) for e in estimator])\r\n  File \"/Users/daniel/miniconda3/envs/mne-python/lib/python3.10/site-packages/sklearn/base.py\", line 65, in <listcomp>\r\n    return estimator_type([clone(e, safe=safe) for e in estimator])\r\n  File \"/Users/daniel/miniconda3/envs/mne-python/lib/python3.10/site-packages/sklearn/base.py\", line 65, in clone\r\n    return estimator_type([clone(e, safe=safe) for e in estimator])\r\n  File \"/Users/daniel/miniconda3/envs/mne-python/lib/python3.10/site-packages/sklearn/base.py\", line 65, in <listcomp>\r\n    return estimator_type([clone(e, safe=safe) for e in estimator])\r\n  File \"/Users/daniel/miniconda3/envs/mne-python/lib/python3.10/site-packages/sklearn/base.py\", line 96, in clone\r\n    raise RuntimeError(\r\nRuntimeError: Cannot clone object TimeFrequency(None), as the constructor either does not set or modifies parameter n_cycles\r\n```\r\n\r\n\r\n#### Additional information\r\n```\r\nPlatform:      macOS-11.6.6-x86_64-i386-64bit\r\nPython:        3.10.5 | packaged by conda-forge | (main, Jun 14 2022, 07:09:13) [Clang 13.0.1 ]\r\nExecutable:    /Users/daniel/miniconda3/envs/mne-python/bin/python\r\nCPU:           i386: 4 cores\r\nMemory:        16.0 GB\r\nmne:           0.23.4\r\nnumpy:         1.22.4 {blas=NO_ATLAS_INFO, lapack=lapack}\r\nscipy:         1.8.1\r\nmatplotlib:    3.5.2 {backend=module://backend_interagg}\r\nsklearn:       1.1.1\r\nnumba:         0.55.2\r\nnibabel:       4.0.1\r\nnilearn:       0.6.2\r\ndipy:          1.5.0\r\ncupy:          Not found\r\npandas:        1.4.3\r\nmayavi:        4.8.0\r\npyvista:       0.35.2 {pyvistaqt=0.9.0, OpenGL 4.1 ATI-4.6.21 via AMD Radeon R9 M295X OpenGL Engine}\r\nvtk:           \r\nPyQt5:         5.12.3\r\n```\r\n", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/10971/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10971/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/10960", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10960/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10960/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10960/events", "html_url": "https://github.com/mne-tools/mne-python/issues/10960", "id": 1317977697, "node_id": "I_kwDOABPcUM5Ojr5h", "number": 10960, "title": "my event id dict is garbage characters", "user": {"login": "TTyb", "id": 20573808, "node_id": "MDQ6VXNlcjIwNTczODA4", "avatar_url": "https://avatars.githubusercontent.com/u/20573808?v=4", "gravatar_id": "", "url": "https://api.github.com/users/TTyb", "html_url": "https://github.com/TTyb", "followers_url": "https://api.github.com/users/TTyb/followers", "following_url": "https://api.github.com/users/TTyb/following{/other_user}", "gists_url": "https://api.github.com/users/TTyb/gists{/gist_id}", "starred_url": "https://api.github.com/users/TTyb/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/TTyb/subscriptions", "organizations_url": "https://api.github.com/users/TTyb/orgs", "repos_url": "https://api.github.com/users/TTyb/repos", "events_url": "https://api.github.com/users/TTyb/events{/privacy}", "received_events_url": "https://api.github.com/users/TTyb/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 8, "created_at": "2022-07-26T09:44:19Z", "updated_at": "2022-10-11T06:54:59Z", "closed_at": "2022-07-27T17:34:39Z", "author_association": "NONE", "active_lock_reason": null, "body": "**READ THIS FIRST:** If you are having trouble getting MNE-Python to work with\r\nyour own data, you should ask for help on the\r\n[MNE Forum](https://mne.discourse.group).\r\n\r\nOur GitHub issue tracker is only used to report bugs and suggest improvements\r\nto MNE-Python. For any other questions, please use the forum.\r\nUsage questions that are posted as GitHub issues are usually closed without\r\nbeing answered. See\r\n[the FAQ entry on filing bug reports](https://mne.tools/dev/overview/faq.html#i-think-i-found-a-bug-what-do-i-do)\r\nfor more guidance. If you're pretty sure your problem is a bug in MNE-Python,\r\nplease **delete this section** and fill in the headings below, replacing the\r\nplaceholder text with your own responses. Surround any code samples with triple\r\nbackticks above and below the code block (see\r\n[the GitHub guide to markdown](https://guides.github.com/features/mastering-markdown/#GitHub-flavored-markdown)\r\nfor help with issue formatting). Alternatively, you can put your MWE in a\r\n[public gist](https://gist.github.com) and link to it in this issue.\r\n\r\n\r\n#### Describe the bug\r\n*Replace this text with a description of the bug.*\r\n\r\n\r\n#### Steps to reproduce\r\n*Replace this text with a code snippet or minimal working example [MWE] to\r\nreplicate your problem, using one of the [built-in datasets], preferably the\r\none called [sample]. If you can't replicate on a built-in dataset, provide also\r\na link to a small, anonymized portion of your data that does yield the error.*\r\n\r\n[MWE]: https://en.wikipedia.org/wiki/Minimal_Working_Example\r\n[built-in datasets]: https://mne.tools/dev/overview/datasets_index.html\r\n[sample]: https://mne.tools/dev/overview/datasets_index.html#sample\r\n\r\n\r\n#### Expected results\r\n*Replace this text with a description of what you expected to happen.*\r\n\r\n\r\n#### Actual results\r\n*Replace this text with the actual output, traceback, screenshot, or other\r\ndescription of the results.*\r\n\r\n\r\n#### Additional information\r\n*Replace this text with the output of `mne.sys_info()`.*\r\n", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/10960/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10960/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/10952", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10952/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10952/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10952/events", "html_url": "https://github.com/mne-tools/mne-python/issues/10952", "id": 1315811404, "node_id": "I_kwDOABPcUM5ObbBM", "number": 10952, "title": "ImportError: cannot import name 'tqdm' from 'mne.externals' ", "user": {"login": "xiaohao-lin1", "id": 50940099, "node_id": "MDQ6VXNlcjUwOTQwMDk5", "avatar_url": "https://avatars.githubusercontent.com/u/50940099?v=4", "gravatar_id": "", "url": "https://api.github.com/users/xiaohao-lin1", "html_url": "https://github.com/xiaohao-lin1", "followers_url": "https://api.github.com/users/xiaohao-lin1/followers", "following_url": "https://api.github.com/users/xiaohao-lin1/following{/other_user}", "gists_url": "https://api.github.com/users/xiaohao-lin1/gists{/gist_id}", "starred_url": "https://api.github.com/users/xiaohao-lin1/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/xiaohao-lin1/subscriptions", "organizations_url": "https://api.github.com/users/xiaohao-lin1/orgs", "repos_url": "https://api.github.com/users/xiaohao-lin1/repos", "events_url": "https://api.github.com/users/xiaohao-lin1/events{/privacy}", "received_events_url": "https://api.github.com/users/xiaohao-lin1/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/mne-tools/mne-python/milestones/23", "html_url": "https://github.com/mne-tools/mne-python/milestone/23", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/milestones/23/labels", "id": 8047399, "node_id": "MI_kwDOABPcUM4Aessn", "number": 23, "title": "1.2", "description": "", "creator": {"login": "hoechenberger", "id": 2046265, "node_id": "MDQ6VXNlcjIwNDYyNjU=", "avatar_url": "https://avatars.githubusercontent.com/u/2046265?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hoechenberger", "html_url": "https://github.com/hoechenberger", "followers_url": "https://api.github.com/users/hoechenberger/followers", "following_url": "https://api.github.com/users/hoechenberger/following{/other_user}", "gists_url": "https://api.github.com/users/hoechenberger/gists{/gist_id}", "starred_url": "https://api.github.com/users/hoechenberger/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hoechenberger/subscriptions", "organizations_url": "https://api.github.com/users/hoechenberger/orgs", "repos_url": "https://api.github.com/users/hoechenberger/repos", "events_url": "https://api.github.com/users/hoechenberger/events{/privacy}", "received_events_url": "https://api.github.com/users/hoechenberger/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 71, "state": "closed", "created_at": "2022-06-03T17:43:37Z", "updated_at": "2022-10-11T20:15:01Z", "due_on": "2022-09-01T07:00:00Z", "closed_at": "2022-10-11T20:15:01Z"}, "comments": 7, "created_at": "2022-07-24T05:11:56Z", "updated_at": "2022-09-15T17:20:40Z", "closed_at": "2022-09-15T17:20:40Z", "author_association": "NONE", "active_lock_reason": null, "body": "#### Describe the bug\r\nImportError: cannot import name 'tqdm' from 'mne.externals' (D:\\Users\\SCSE-AI.R-CIL1\\anaconda3\\envs\\MoBI_py3.8\\lib\\site-packages\\mne\\externals\\__init__.py)\r\n\r\n\r\n\r\n#### Steps to reproduce\r\nI was using the autoreject package, which calls upon the MNE package, and encountered this error. \r\nfrom autoreject import AutoReject\r\nar = AutoReject()\r\nepochs_clean = ar.fit_transform(epochs)  \r\n\r\n  File \"D:\\Users\\SCSE-AI.R-CIL1\\anaconda3\\envs\\MoBI_py3.8\\lib\\site-packages\\mne\\utils\\progressbar.py\", line 49, in __init__\r\n    import tqdm\r\nImportError: cannot import name 'tqdm' from 'mne.externals' (D:\\Users\\SCSE-AI.R-CIL1\\anaconda3\\envs\\MoBI_py3.8\\lib\\site-packages\\mne\\externals\\__init__.py)\r\n\r\n\r\n#### Expected results\r\n*Replace this text with a description of what you expected to happen.*\r\n\r\n\r\n#### Actual results\r\n*Replace this text with the actual output, traceback, screenshot, or other\r\ndescription of the results.*\r\n\r\n\r\n#### Additional information\r\n>>> mne.sys_info()\r\nD:\\Users\\SCSE-AI.R-CIL1\\anaconda3\\envs\\MoBI_py3.8\\lib\\site-packages\\cupy\\_environment.py:213: UserWarning: CUDA path could not be detected. Set CUDA_PATH environment variable if CuPy fails to load.\r\n  warnings.warn(\r\n2022-07-24 18:22:58,965 - numexpr.utils - INFO - Note: NumExpr detected 16 cores but \"NUMEXPR_MAX_THREADS\" not set, so enforcing safe limit of 8.\r\n2022-07-24 18:22:58,976 - numexpr.utils - INFO - NumExpr defaulting to 8 threads.\r\nPlatform:       Windows-10-10.0.22000-SP0\r\nPython:         3.8.12 (default, Oct 12 2021, 03:01:40) [MSC v.1916 64 bit (AMD64)]\r\nExecutable:     D:\\Users\\SCSE-AI.R-CIL1\\anaconda3\\envs\\MoBI_py3.8\\python.exe\r\nCPU:            Intel64 Family 6 Model 165 Stepping 5, GenuineIntel: 16 cores\r\nMemory:         31.7 GB\r\n\r\nmne:            0.24.0\r\nnumpy:          1.21.2 {blas=mkl_rt, lapack=mkl_rt}\r\nsklearn:        1.0.1\r\nnumba:          0.55.2\r\nnibabel:        4.0.1\r\nnilearn:        0.9.1\r\ndipy:           1.5.0\r\ncupy:           9.6.0\r\npandas:         1.3.4\r\nmayavi:         Not found\r\npyvista:        Not found\r\npyvistaqt:      Not found\r\nipyvtklink:     0.2.2\r\nvtk:            9.0.3\r\nPyQt5:          5.9.2\r\nipympl:         Not found\r\nmne_qt_browser: 0.3.1\r\n", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/10952/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10952/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/10947", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10947/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10947/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10947/events", "html_url": "https://github.com/mne-tools/mne-python/issues/10947", "id": 1315017576, "node_id": "I_kwDOABPcUM5OYZNo", "number": 10947, "title": "build-docs-main failure", "user": {"login": "drammock", "id": 1810515, "node_id": "MDQ6VXNlcjE4MTA1MTU=", "avatar_url": "https://avatars.githubusercontent.com/u/1810515?v=4", "gravatar_id": "", "url": "https://api.github.com/users/drammock", "html_url": "https://github.com/drammock", "followers_url": "https://api.github.com/users/drammock/followers", "following_url": "https://api.github.com/users/drammock/following{/other_user}", "gists_url": "https://api.github.com/users/drammock/gists{/gist_id}", "starred_url": "https://api.github.com/users/drammock/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/drammock/subscriptions", "organizations_url": "https://api.github.com/users/drammock/orgs", "repos_url": "https://api.github.com/users/drammock/repos", "events_url": "https://api.github.com/users/drammock/events{/privacy}", "received_events_url": "https://api.github.com/users/drammock/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2022-07-22T13:34:00Z", "updated_at": "2022-07-28T23:15:51Z", "closed_at": "2022-07-28T23:15:50Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "@alexrockhill can you take a look at these?  Related to TFR getting the TimeMixin:\r\n\r\nhttps://app.circleci.com/pipelines/github/mne-tools/mne-python/15324/workflows/be7c7e8c-5c29-435a-87f4-10dbd7d92f7f/jobs/46921", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/10947/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10947/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/10941", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10941/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10941/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10941/events", "html_url": "https://github.com/mne-tools/mne-python/issues/10941", "id": 1313313759, "node_id": "I_kwDOABPcUM5OR5Pf", "number": 10941, "title": "Duplicate function check:check_version and _testing:check_version with 2 slightly different behaviors", "user": {"login": "mscheltienne", "id": 73893616, "node_id": "MDQ6VXNlcjczODkzNjE2", "avatar_url": "https://avatars.githubusercontent.com/u/73893616?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mscheltienne", "html_url": "https://github.com/mscheltienne", "followers_url": "https://api.github.com/users/mscheltienne/followers", "following_url": "https://api.github.com/users/mscheltienne/following{/other_user}", "gists_url": "https://api.github.com/users/mscheltienne/gists{/gist_id}", "starred_url": "https://api.github.com/users/mscheltienne/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mscheltienne/subscriptions", "organizations_url": "https://api.github.com/users/mscheltienne/orgs", "repos_url": "https://api.github.com/users/mscheltienne/repos", "events_url": "https://api.github.com/users/mscheltienne/events{/privacy}", "received_events_url": "https://api.github.com/users/mscheltienne/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/mne-tools/mne-python/milestones/23", "html_url": "https://github.com/mne-tools/mne-python/milestone/23", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/milestones/23/labels", "id": 8047399, "node_id": "MI_kwDOABPcUM4Aessn", "number": 23, "title": "1.2", "description": "", "creator": {"login": "hoechenberger", "id": 2046265, "node_id": "MDQ6VXNlcjIwNDYyNjU=", "avatar_url": "https://avatars.githubusercontent.com/u/2046265?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hoechenberger", "html_url": "https://github.com/hoechenberger", "followers_url": "https://api.github.com/users/hoechenberger/followers", "following_url": "https://api.github.com/users/hoechenberger/following{/other_user}", "gists_url": "https://api.github.com/users/hoechenberger/gists{/gist_id}", "starred_url": "https://api.github.com/users/hoechenberger/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hoechenberger/subscriptions", "organizations_url": "https://api.github.com/users/hoechenberger/orgs", "repos_url": "https://api.github.com/users/hoechenberger/repos", "events_url": "https://api.github.com/users/hoechenberger/events{/privacy}", "received_events_url": "https://api.github.com/users/hoechenberger/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 71, "state": "closed", "created_at": "2022-06-03T17:43:37Z", "updated_at": "2022-10-11T20:15:01Z", "due_on": "2022-09-01T07:00:00Z", "closed_at": "2022-10-11T20:15:01Z"}, "comments": 2, "created_at": "2022-07-21T14:03:40Z", "updated_at": "2022-07-26T16:08:05Z", "closed_at": "2022-07-26T16:08:04Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "I was trying to figure out why running with `main` (1.1.0.dev):\r\n\r\n```\r\nfrom mne.utils import check_version, requires_version\r\n\r\ncheck_version(\"mne\", \"1.1\")  # returns True\r\nrequires_version(\"mne\", \"1.1\")  # marks to skip, i.e. check_version returned False\r\n```\r\n\r\nAnd it turns out there is both https://github.com/mne-tools/mne-python/blob/c6a86f15b8ace3758443f392ba8bfe5a9a0c2878/mne/utils/check.py#L69-L120\r\n\r\nand https://github.com/mne-tools/mne-python/blob/c6a86f15b8ace3758443f392ba8bfe5a9a0c2878/mne/utils/_testing.py#L170-L197\r\n\r\nWhich don't exactly do the same thing, but maybe they should?", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/10941/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10941/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/10939", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10939/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10939/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10939/events", "html_url": "https://github.com/mne-tools/mne-python/issues/10939", "id": 1311421258, "node_id": "I_kwDOABPcUM5OKrNK", "number": 10939, "title": "front-page gallery brains are all white", "user": {"login": "drammock", "id": 1810515, "node_id": "MDQ6VXNlcjE4MTA1MTU=", "avatar_url": "https://avatars.githubusercontent.com/u/1810515?v=4", "gravatar_id": "", "url": "https://api.github.com/users/drammock", "html_url": "https://github.com/drammock", "followers_url": "https://api.github.com/users/drammock/followers", "following_url": "https://api.github.com/users/drammock/following{/other_user}", "gists_url": "https://api.github.com/users/drammock/gists{/gist_id}", "starred_url": "https://api.github.com/users/drammock/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/drammock/subscriptions", "organizations_url": "https://api.github.com/users/drammock/orgs", "repos_url": "https://api.github.com/users/drammock/repos", "events_url": "https://api.github.com/users/drammock/events{/privacy}", "received_events_url": "https://api.github.com/users/drammock/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/mne-tools/mne-python/milestones/22", "html_url": "https://github.com/mne-tools/mne-python/milestone/22", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/milestones/22/labels", "id": 7668967, "node_id": "MI_kwDOABPcUM4AdQTn", "number": 22, "title": "1.1", "description": "", "creator": {"login": "larsoner", "id": 2365790, "node_id": "MDQ6VXNlcjIzNjU3OTA=", "avatar_url": "https://avatars.githubusercontent.com/u/2365790?v=4", "gravatar_id": "", "url": "https://api.github.com/users/larsoner", "html_url": "https://github.com/larsoner", "followers_url": "https://api.github.com/users/larsoner/followers", "following_url": "https://api.github.com/users/larsoner/following{/other_user}", "gists_url": "https://api.github.com/users/larsoner/gists{/gist_id}", "starred_url": "https://api.github.com/users/larsoner/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/larsoner/subscriptions", "organizations_url": "https://api.github.com/users/larsoner/orgs", "repos_url": "https://api.github.com/users/larsoner/repos", "events_url": "https://api.github.com/users/larsoner/events{/privacy}", "received_events_url": "https://api.github.com/users/larsoner/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 44, "state": "closed", "created_at": "2022-02-11T18:37:55Z", "updated_at": "2022-08-03T21:38:27Z", "due_on": "2022-06-13T07:00:00Z", "closed_at": "2022-08-03T21:38:27Z"}, "comments": 15, "created_at": "2022-07-20T16:07:20Z", "updated_at": "2022-08-02T13:37:37Z", "closed_at": "2022-08-02T13:37:37Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "will perform a `git bisect` today to find the culprit.", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/10939/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10939/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/10937", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10937/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10937/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10937/events", "html_url": "https://github.com/mne-tools/mne-python/issues/10937", "id": 1310096335, "node_id": "I_kwDOABPcUM5OFnvP", "number": 10937, "title": "[BUG] Hilbert transform returns negative data with `envelope=True`", "user": {"login": "alexrockhill", "id": 13473576, "node_id": "MDQ6VXNlcjEzNDczNTc2", "avatar_url": "https://avatars.githubusercontent.com/u/13473576?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alexrockhill", "html_url": "https://github.com/alexrockhill", "followers_url": "https://api.github.com/users/alexrockhill/followers", "following_url": "https://api.github.com/users/alexrockhill/following{/other_user}", "gists_url": "https://api.github.com/users/alexrockhill/gists{/gist_id}", "starred_url": "https://api.github.com/users/alexrockhill/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alexrockhill/subscriptions", "organizations_url": "https://api.github.com/users/alexrockhill/orgs", "repos_url": "https://api.github.com/users/alexrockhill/repos", "events_url": "https://api.github.com/users/alexrockhill/events{/privacy}", "received_events_url": "https://api.github.com/users/alexrockhill/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2022-07-19T22:10:08Z", "updated_at": "2022-07-20T16:21:16Z", "closed_at": "2022-07-20T16:21:16Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Minimally reproducible example:\r\n\r\n```\r\nimport numpy as np\r\nimport mne\r\nfrom mne.datasets import sample\r\n\r\ndata_path = sample.data_path()\r\nsubjects_dir = data_path / 'subjects'\r\nraw_fname = data_path / 'MEG' / 'sample' / 'sample_audvis_raw.fif'\r\nraw = mne.io.read_raw_fif(raw_fname)\r\nraw.info['bads'] = ['MEG 2443']  # bad MEG channel\r\nevent_id = 1  # those are the trials with left-ear auditory stimuli\r\ntmin, tmax = -0.2, 0.5\r\nevents = mne.find_events(raw)\r\nraw.pick(['meg', 'eeg', 'eog'])\r\nepochs = mne.Epochs(raw, events, event_id, tmin - 0.3, tmax + 0.3,\r\n                    baseline=(None, 0), preload=True, proj=False,\r\n                    reject=dict(grad=4000e-13, mag=4e-12,\r\n                                eeg=1e-4, eog=150e-6))\r\nepochs = epochs[:10]\r\nepochs.set_eeg_reference('average')\r\n\r\nbandwidth = 2\r\nepochs.filter(l_freq=12 - bandwidth / 2, h_freq=12 + bandwidth / 2)\r\nepochs.apply_hilbert(envelope=True)\r\nprint(epochs.get_data().min())\r\n```\r\n\r\nI thought this was not supposed to be negative, I'm not sure what it means that it is negative.", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/10937/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10937/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/10924", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10924/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10924/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10924/events", "html_url": "https://github.com/mne-tools/mne-python/issues/10924", "id": 1303724376, "node_id": "I_kwDOABPcUM5NtUFY", "number": 10924, "title": "TemporalFilter Pipeline transition bandwidth", "user": {"login": "kevincar", "id": 3383537, "node_id": "MDQ6VXNlcjMzODM1Mzc=", "avatar_url": "https://avatars.githubusercontent.com/u/3383537?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kevincar", "html_url": "https://github.com/kevincar", "followers_url": "https://api.github.com/users/kevincar/followers", "following_url": "https://api.github.com/users/kevincar/following{/other_user}", "gists_url": "https://api.github.com/users/kevincar/gists{/gist_id}", "starred_url": "https://api.github.com/users/kevincar/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kevincar/subscriptions", "organizations_url": "https://api.github.com/users/kevincar/orgs", "repos_url": "https://api.github.com/users/kevincar/repos", "events_url": "https://api.github.com/users/kevincar/events{/privacy}", "received_events_url": "https://api.github.com/users/kevincar/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 12, "created_at": "2022-07-13T17:16:29Z", "updated_at": "2022-07-28T15:53:25Z", "closed_at": "2022-07-28T15:53:25Z", "author_association": "NONE", "active_lock_reason": null, "body": "### Describe the bug\r\n\r\n`mne.decoding.TemporalFilter` and `mne.filter.filter_data` behave differently. Specifically, in the `transform` method of `mne.decoding.TemporalFilter`, the [`_triage_filter_params`](https://github.com/mne-tools/mne-python/blob/9e4a0b492299d3638203e2e6d2264ea445b13ac0/mne/decoding/transformer.py#L832) is called immediately preceding the `filter_data`. The default transition bandwidths are calculated and returned from `_traige_filter_params`, but this function seems that it may be called *again* [here](https://github.com/mne-tools/mne-python/blob/9e4a0b492299d3638203e2e6d2264ea445b13ac0/mne/filter.py#L1010) inside `filter_data`'s call to `create_filter`, resulting in applying the transition bandwidth calculations twice.\r\n\r\n\r\n### Steps to reproduce\r\n\r\n[Minimal working example](https://mne.discourse.group/t/temporalfilter-pipeline-transition-bandwidth/5267) provided in the MNE forums.\r\n\r\n### Expected results\r\n\r\nResults from `filter_data` and `TmpeoralFilter.transform` should match\r\n\r\n### Actual results\r\n\r\n**When using TemporalFilter.transform**\r\n\r\n```\r\nFIR filter parameters\r\n---------------------\r\nDesigning a one-pass, zero-phase, non-causal bandpass filter:\r\n- Windowed time-domain design (firwin) method\r\n- Hamming window with 0.0194 passband ripple and 53 dB stopband attenuation\r\n- Lower passband edge: 8.00\r\n- Lower transition bandwidth: 6.00 Hz (-6 dB cutoff frequency: 5.00 Hz)\r\n- Upper passband edge: 60.00 Hz\r\n- Upper transition bandwidth: 75.00 Hz (-6 dB cutoff frequency: 97.50 Hz)\r\n```\r\n\r\n**When using filter_data**\r\n\r\n```\r\nSetting up band-pass filter from 8 - 60 Hz\r\nFIR filter parameters\r\n---------------------\r\nDesigning a one-pass, zero-phase, non-causal bandpass filter:\r\n- Windowed time-domain design (firwin) method\r\n- Hamming window with 0.0194 passband ripple and 53 dB stopband attenuation\r\n- Lower passband edge: 8.00\r\n- Lower transition bandwidth: 2.00 Hz (-6 dB cutoff frequency: 7.00 Hz)\r\n- Upper passband edge: 60.00 Hz\r\n- Upper transition bandwidth: 15.00 Hz (-6 dB cutoff frequency: 67.50 Hz)\r\n- Filter length: 265 samples (1.656 sec)\r\n```\r\n\r\n**Notice the difference in the transition bandwidths**\r\n\r\n### Additional information\r\n\r\n```\r\nPlatform:         macOS-12.4-arm64-arm-64bit\r\nPython:           3.9.12 (main, Jun  1 2022, 06:34:44)  [Clang 12.0.0 ]\r\nExecutable:       /opt/homebrew/Caskroom/miniconda/base/envs/f30/bin/python\r\nCPU:              arm: 8 cores\r\nMemory:           16.0 GB\r\n\r\nmne:              1.0.3\r\nnumpy:            1.23.0 {}\r\nscipy:            1.8.1\r\nmatplotlib:       3.5.2 {backend=MacOSX}\r\n\r\nsklearn:          1.1.1\r\nnumba:            Not found\r\nnibabel:          4.0.1\r\nnilearn:          Not found\r\ndipy:             Not found\r\ncupy:             Not found\r\npandas:           1.4.3\r\npyvista:          Not found\r\npyvistaqt:        Not found\r\nipyvtklink:       Not found\r\nvtk:              Not found\r\nPyQt5:            Not found\r\nipympl:           0.9.1\r\npooch:            v1.6.0\r\n\r\nmne_bids:         Not found\r\nmne_nirs:         Not found\r\nmne_features:     Not found\r\nmne_qt_browser:   Not found\r\nmne_connectivity: Not found\r\n```", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/10924/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10924/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/10921", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10921/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10921/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10921/events", "html_url": "https://github.com/mne-tools/mne-python/issues/10921", "id": 1303191359, "node_id": "I_kwDOABPcUM5NrR8_", "number": 10921, "title": "No filenames Attribute in mne.io.RawArray", "user": {"login": "rznas", "id": 67942779, "node_id": "MDQ6VXNlcjY3OTQyNzc5", "avatar_url": "https://avatars.githubusercontent.com/u/67942779?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rznas", "html_url": "https://github.com/rznas", "followers_url": "https://api.github.com/users/rznas/followers", "following_url": "https://api.github.com/users/rznas/following{/other_user}", "gists_url": "https://api.github.com/users/rznas/gists{/gist_id}", "starred_url": "https://api.github.com/users/rznas/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rznas/subscriptions", "organizations_url": "https://api.github.com/users/rznas/orgs", "repos_url": "https://api.github.com/users/rznas/repos", "events_url": "https://api.github.com/users/rznas/events{/privacy}", "received_events_url": "https://api.github.com/users/rznas/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2022-07-13T09:52:06Z", "updated_at": "2022-07-16T14:40:32Z", "closed_at": "2022-07-16T14:40:32Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "#### Describe the bug\r\nCan't set the `filenames` property inside `mne.io.RawArray` constructor.\r\nAttributeError when trying to export Raw object\r\n\r\n\r\n#### Steps to reproduce\r\nMake a `Raw` object using some numpy array and `mne.io.RawArray` and then try to export with `raw.export(fmt='eeglab')` or `mne.export.export_raw(fmt='eeglab')` ,then an AttributeError appears.\r\n\r\n#### Expected results\r\nExport with no problem\r\n\r\n\r\n#### Actual results\r\n```\r\nFile ~/apps/_bio/mne-python/mne/export/_export.py:57, in export_raw(fname, raw, fmt, physical_range, add_ch_type, overwrite, verbose)\r\n     55 if fmt == 'eeglab':\r\n     56     from ._eeglab import _export_raw\r\n---> 57     _export_raw(fname, raw)\r\n...\r\n---> 20 if not (raw.filenames[0].endswith('.fif')):\r\n     21     drop_chs.append('STI 014')\r\n     23 ch_names = [ch for ch in raw.ch_names if ch not in drop_chs]\r\n\r\nAttributeError: 'NoneType' object has no attribute 'endswith'\r\n```\r\n\r\n#### Additional information\r\n```\r\nPlatform:         Linux-5.15.0-41-generic-x86_64-with-glibc2.35\r\nPython:           3.10.4 (main, Apr  2 2022, 09:04:19) [GCC 11.2.0]\r\nExecutable:       /home/reza/venv/os_mne/bin/python3.10\r\nCPU:              x86_64: 8 cores\r\nMemory:           7.6 GB\r\n\r\nmne:              1.1.dev0\r\nnumpy:            1.23.1 {}\r\nscipy:            1.8.1\r\nmatplotlib:       3.5.2 {backend=module://matplotlib_inline.backend_inline}\r\n\r\nsklearn:          Not found\r\nnumba:            Not found\r\nnibabel:          Not found\r\nnilearn:          Not found\r\ndipy:             Not found\r\ncupy:             Not found\r\npandas:           1.4.3\r\npyvista:          Not found\r\npyvistaqt:        Not found\r\nipyvtklink:       Not found\r\nvtk:              Not found\r\nqtpy:             Not found\r\nipympl:           Not found\r\npyqtgraph:        Not found\r\npooch:            v1.6.0\r\n\r\nmne_bids:         Not found\r\nmne_nirs:         Not found\r\nmne_features:     Not found\r\nmne_qt_browser:   Not found\r\nmne_connectivity: Not found\r\nmne_icalabel:     Not found\r\n```\r\n", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/10921/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10921/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/10908", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10908/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10908/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10908/events", "html_url": "https://github.com/mne-tools/mne-python/issues/10908", "id": 1297011620, "node_id": "I_kwDOABPcUM5NTtOk", "number": 10908, "title": "Loading BESA .elp montage files skips first channel", "user": {"login": "wmvanvliet", "id": 428273, "node_id": "MDQ6VXNlcjQyODI3Mw==", "avatar_url": "https://avatars.githubusercontent.com/u/428273?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wmvanvliet", "html_url": "https://github.com/wmvanvliet", "followers_url": "https://api.github.com/users/wmvanvliet/followers", "following_url": "https://api.github.com/users/wmvanvliet/following{/other_user}", "gists_url": "https://api.github.com/users/wmvanvliet/gists{/gist_id}", "starred_url": "https://api.github.com/users/wmvanvliet/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wmvanvliet/subscriptions", "organizations_url": "https://api.github.com/users/wmvanvliet/orgs", "repos_url": "https://api.github.com/users/wmvanvliet/repos", "events_url": "https://api.github.com/users/wmvanvliet/events{/privacy}", "received_events_url": "https://api.github.com/users/wmvanvliet/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "wmvanvliet", "id": 428273, "node_id": "MDQ6VXNlcjQyODI3Mw==", "avatar_url": "https://avatars.githubusercontent.com/u/428273?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wmvanvliet", "html_url": "https://github.com/wmvanvliet", "followers_url": "https://api.github.com/users/wmvanvliet/followers", "following_url": "https://api.github.com/users/wmvanvliet/following{/other_user}", "gists_url": "https://api.github.com/users/wmvanvliet/gists{/gist_id}", "starred_url": "https://api.github.com/users/wmvanvliet/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wmvanvliet/subscriptions", "organizations_url": "https://api.github.com/users/wmvanvliet/orgs", "repos_url": "https://api.github.com/users/wmvanvliet/repos", "events_url": "https://api.github.com/users/wmvanvliet/events{/privacy}", "received_events_url": "https://api.github.com/users/wmvanvliet/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "wmvanvliet", "id": 428273, "node_id": "MDQ6VXNlcjQyODI3Mw==", "avatar_url": "https://avatars.githubusercontent.com/u/428273?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wmvanvliet", "html_url": "https://github.com/wmvanvliet", "followers_url": "https://api.github.com/users/wmvanvliet/followers", "following_url": "https://api.github.com/users/wmvanvliet/following{/other_user}", "gists_url": "https://api.github.com/users/wmvanvliet/gists{/gist_id}", "starred_url": "https://api.github.com/users/wmvanvliet/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wmvanvliet/subscriptions", "organizations_url": "https://api.github.com/users/wmvanvliet/orgs", "repos_url": "https://api.github.com/users/wmvanvliet/repos", "events_url": "https://api.github.com/users/wmvanvliet/events{/privacy}", "received_events_url": "https://api.github.com/users/wmvanvliet/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 1, "created_at": "2022-07-07T08:19:56Z", "updated_at": "2022-07-17T05:05:22Z", "closed_at": "2022-07-17T05:05:22Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "#### Describe the bug\r\nThe loader for BESA style `.elp` montage files is broken. The current code assumed that these type of text files start with the number of channels on the first line. Looking at [an example `.elp` file](https://github.com/mne-tools/mne-python/blob/2e89fadd9c1863341dd3d9c6645395ec08fd7c89/mne/io/besa/tests/data/simulation.elp) generated with the BESA simulation software, looking at [the official MATLAB reader provided by BESA](https://www.besa.de/downloads/matlab/), this is not the case. Instead, the first line of the `.elp` montage file contains the information of the first channel. Currently, our loader skips this line and hence misses the information of this channel.\r\n\r\n#### Steps to reproduce\r\nFirst, download  [this example file](https://github.com/mne-tools/mne-python/blob/2e89fadd9c1863341dd3d9c6645395ec08fd7c89/mne/io/besa/tests/data/simulation.elp). Then:\r\n```python\r\nimport mne\r\nmne.channels.read_custom_montage('simulation.elp')\r\n```\r\n\r\n#### Expected results\r\nThe `simulation.elp` file contains 33 channels and their positions. The `DigMontage` object should have all of this informaiton.\r\n\r\n#### Actual results\r\nA `DigMontage` with 32 channels is returned. The `Fp1` channel is missing.\r\n", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/10908/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10908/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/10904", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10904/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10904/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10904/events", "html_url": "https://github.com/mne-tools/mne-python/issues/10904", "id": 1296196165, "node_id": "I_kwDOABPcUM5NQmJF", "number": 10904, "title": "Issue with importing EEGLAB .set file", "user": {"login": "moonj94", "id": 53019885, "node_id": "MDQ6VXNlcjUzMDE5ODg1", "avatar_url": "https://avatars.githubusercontent.com/u/53019885?v=4", "gravatar_id": "", "url": "https://api.github.com/users/moonj94", "html_url": "https://github.com/moonj94", "followers_url": "https://api.github.com/users/moonj94/followers", "following_url": "https://api.github.com/users/moonj94/following{/other_user}", "gists_url": "https://api.github.com/users/moonj94/gists{/gist_id}", "starred_url": "https://api.github.com/users/moonj94/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/moonj94/subscriptions", "organizations_url": "https://api.github.com/users/moonj94/orgs", "repos_url": "https://api.github.com/users/moonj94/repos", "events_url": "https://api.github.com/users/moonj94/events{/privacy}", "received_events_url": "https://api.github.com/users/moonj94/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2022-07-06T18:08:04Z", "updated_at": "2022-07-06T18:40:07Z", "closed_at": "2022-07-06T18:40:07Z", "author_association": "NONE", "active_lock_reason": null, "body": "\r\n#### Describe the bug\r\nI'm trying to load some data from a .set file into python and I keep getting an error saying 'index out of range'. This problem exists for both read_raw_eeglab and read_epochs_eeglab. The problem exists regardless of whether or not there is a .fdt file in the folder.\r\n\r\n#### Steps to reproduce\r\nDownload data from https://openneuro.org/datasets/ds003061/versions/1.1.0\r\n\r\nrun mne.io.read_epochs_eeglab(path)\r\n\r\n\r\n#### Expected results\r\nFile should be loaded\r\n\r\n\r\n#### Actual results\r\n```\r\n---------------------------------------------------------------------------\r\nIndexError                                Traceback (most recent call last)\r\nc:\\Users\\jaemoon.LARKGROUP\\OneDrive - Lark Group\\Desktop\\python\\forward_problem\\openneuro.py in <module>\r\n     [95](file:///c%3A/Users/jaemoon.LARKGROUP/OneDrive%20-%20Lark%20Group/Desktop/python/forward_problem/openneuro.py?line=94)         if d.endswith('.set'):\r\n     [96](file:///c%3A/Users/jaemoon.LARKGROUP/OneDrive%20-%20Lark%20Group/Desktop/python/forward_problem/openneuro.py?line=95)           pathd=r'%s\\%s' % (path,d)\r\n---> [97](file:///c%3A/Users/jaemoon.LARKGROUP/OneDrive%20-%20Lark%20Group/Desktop/python/forward_problem/openneuro.py?line=96)           tmp=mne.io.read_epochs_eeglab(pathd)\r\n     [98](file:///c%3A/Users/jaemoon.LARKGROUP/OneDrive%20-%20Lark%20Group/Desktop/python/forward_problem/openneuro.py?line=97) \r\n\r\nc:\\Users\\jaemoon.LARKGROUP\\Anaconda3\\envs\\nc4\\lib\\site-packages\\mne\\io\\eeglab\\eeglab.py in read_epochs_eeglab(input_fname, events, event_id, eog, verbose, uint16_codec)\r\n    275     epochs = EpochsEEGLAB(input_fname=input_fname, events=events, eog=eog,\r\n    276                           event_id=event_id, verbose=verbose,\r\n--> 277                           uint16_codec=uint16_codec)\r\n    278     return epochs\r\n    279 \r\n\r\n<decorator-gen-262> in __init__(self, input_fname, events, event_id, tmin, baseline, reject, flat, reject_tmin, reject_tmax, eog, verbose, uint16_codec)\r\n\r\nc:\\Users\\jaemoon.LARKGROUP\\Anaconda3\\envs\\nc4\\lib\\site-packages\\mne\\io\\eeglab\\eeglab.py in __init__(self, input_fname, events, event_id, tmin, baseline, reject, flat, reject_tmin, reject_tmax, eog, verbose, uint16_codec)\r\n    449         input_fname = _check_fname(fname=input_fname, must_exist=True,\r\n    450                                    overwrite='read')\r\n--> 451         eeg = _check_load_mat(input_fname, uint16_codec)\r\n    452 \r\n    453         if not ((events is None and event_id is None) or\r\n\r\nc:\\Users\\jaemoon.LARKGROUP\\Anaconda3\\envs\\nc4\\lib\\site-packages\\mne\\io\\eeglab\\eeglab.py in _check_load_mat(fname, uint16_codec)\r\n     57     \"\"\"Check if the mat struct contains 'EEG'.\"\"\"\r\n     58     from ...externals.pymatreader import read_mat\r\n---> 59     eeg = read_mat(fname, uint16_codec=uint16_codec)\r\n     60     if 'ALLEEG' in eeg:\r\n     61         raise NotImplementedError(\r\n\r\nc:\\Users\\jaemoon.LARKGROUP\\Anaconda3\\envs\\nc4\\lib\\site-packages\\mne\\externals\\pymatreader\\pymatreader.py in read_mat(filename, variable_names, ignore_fields, uint16_codec)\r\n     82     try:\r\n     83         with open(filename, 'rb') as fid:  # avoid open file warnings on error\r\n---> 84             mjv, _ = get_matfile_version(fid)\r\n     85             extra_kwargs = {}\r\n     86             if mjv == 1:\r\n\r\nc:\\Users\\jaemoon.LARKGROUP\\Anaconda3\\envs\\nc4\\lib\\site-packages\\scipy\\io\\matlab\\miobase.py in get_matfile_version(fileobj)\r\n    223     tst_str = fileobj.read(4)\r\n    224     fileobj.seek(0)\r\n--> 225     maj_ind = int(tst_str[2] == b'I'[0])\r\n    226     maj_val = int(tst_str[maj_ind])\r\n    227     min_val = int(tst_str[1 - maj_ind])\r\n\r\nIndexError: index out of range\r\n```\r\n\r\n#### Additional information\r\nPlatform:       Windows-10-10.0.19041-SP0\r\nPython:         3.7.7 (default, May  6 2020, 11:45:54) [MSC v.1916 64 bit (AMD64)]\r\nExecutable:     c:\\Users\\jaemoon.LARKGROUP\\Anaconda3\\envs\\nc4\\python.exe\r\nCPU:            Intel64 Family 6 Model 165 Stepping 2, GenuineIntel: 16 cores\r\nMemory:         31.7 GB\r\n\r\nmne:            0.24.0\r\nnumpy:          1.21.6 {blas=NO_ATLAS_INFO, lapack=lapack}\r\nscipy:          1.6.2\r\nmatplotlib:     3.3.2 {backend=module://matplotlib_inline.backend_inline}\r\n\r\nsklearn:        0.23.1\r\nnumba:          0.53.1\r\nnibabel:        3.2.2\r\nnilearn:        0.9.0\r\ndipy:           1.3.0\r\ncupy:           Not found\r\npandas:         1.3.4\r\nmayavi:         4.7.2\r\npyvista:        0.33.3 {OpenGL 4.5.0 - Build 27.20.100.9316 via Intel(R) UHD Graphics}\r\npyvistaqt:      0.9.0\r\nipyvtklink:     Not found\r\nvtk:            9.0.1\r\nPyQt5:          unknown\r\nipympl:         Not found\r\nmne_qt_browser: Not found\r\n", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/10904/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10904/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/10883", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10883/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10883/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10883/events", "html_url": "https://github.com/mne-tools/mne-python/issues/10883", "id": 1290215899, "node_id": "I_kwDOABPcUM5M5yHb", "number": 10883, "title": "ValueError: invalid literal for int() with base 10: '09:01:17' when trying to read EDF file", "user": {"login": "soso-maitha", "id": 8146043, "node_id": "MDQ6VXNlcjgxNDYwNDM=", "avatar_url": "https://avatars.githubusercontent.com/u/8146043?v=4", "gravatar_id": "", "url": "https://api.github.com/users/soso-maitha", "html_url": "https://github.com/soso-maitha", "followers_url": "https://api.github.com/users/soso-maitha/followers", "following_url": "https://api.github.com/users/soso-maitha/following{/other_user}", "gists_url": "https://api.github.com/users/soso-maitha/gists{/gist_id}", "starred_url": "https://api.github.com/users/soso-maitha/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/soso-maitha/subscriptions", "organizations_url": "https://api.github.com/users/soso-maitha/orgs", "repos_url": "https://api.github.com/users/soso-maitha/repos", "events_url": "https://api.github.com/users/soso-maitha/events{/privacy}", "received_events_url": "https://api.github.com/users/soso-maitha/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2022-06-30T14:25:30Z", "updated_at": "2022-10-21T14:57:17Z", "closed_at": "2022-10-21T14:57:17Z", "author_association": "NONE", "active_lock_reason": null, "body": "#### Describe the bug\r\nI get the following error when I try to read an EDF file\r\n`ValueError: invalid literal for int() with base 10: '09:01:17'`\r\n\r\n\r\n#### Steps to reproduce\r\n```\r\nimport mne\r\ndata = mne.io.read_raw_edf(\"ucddb009_lifecard.edf\",preload = True )\r\n```\r\nThis is the database https://physionet.org/content/ucddb/1.0.0/\r\n\r\n[MWE]: https://en.wikipedia.org/wiki/Minimal_Working_Example\r\n[built-in datasets]: https://mne.tools/dev/overview/datasets_index.html\r\n[sample]: https://mne.tools/dev/overview/datasets_index.html#sample\r\n\r\n\r\n\r\n#### Additional information\r\n output of `mne.sys_info()`.\r\n \r\n Platform:         Linux-5.4.0-1083-azure-x86_64-with-glibc2.10\r\nPython:           3.8.5 (default, Sep  4 2020, 07:30:14)  [GCC 7.3.0]\r\nExecutable:       /anaconda/envs/azureml_py38/bin/python\r\nCPU:              x86_64: 6 cores\r\nMemory:           54.9 GB\r\n\r\nmne:              1.0.3\r\nnumpy:            1.19.0 {blas=openblas, lapack=openblas}\r\nscipy:            1.5.2\r\nmatplotlib:       3.5.2 {backend=module://matplotlib_inline.backend_inline}\r\n\r\nsklearn:          0.22.1\r\nnumba:            0.53.1\r\nnibabel:          Not found\r\nnilearn:          Not found\r\ndipy:             Not found\r\ncupy:             Not found\r\npandas:           1.1.5\r\npyvista:          Not found\r\npyvistaqt:        Not found\r\nipyvtklink:       Not found\r\nvtk:              Not found\r\nPyQt5:            5.15.7\r\nipympl:           Not found\r\npooch:            v1.6.0\r\n\r\nmne_bids:         Not found\r\nmne_nirs:         Not found\r\nmne_features:     Not found\r\nmne_qt_browser:   Not found\r\nmne_connectivity: Not found\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/10883/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10883/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/10878", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10878/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10878/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10878/events", "html_url": "https://github.com/mne-tools/mne-python/issues/10878", "id": 1289683599, "node_id": "I_kwDOABPcUM5M3wKP", "number": 10878, "title": "Picking after adding a reference channel is broken for Epochs", "user": {"login": "hoechenberger", "id": 2046265, "node_id": "MDQ6VXNlcjIwNDYyNjU=", "avatar_url": "https://avatars.githubusercontent.com/u/2046265?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hoechenberger", "html_url": "https://github.com/hoechenberger", "followers_url": "https://api.github.com/users/hoechenberger/followers", "following_url": "https://api.github.com/users/hoechenberger/following{/other_user}", "gists_url": "https://api.github.com/users/hoechenberger/gists{/gist_id}", "starred_url": "https://api.github.com/users/hoechenberger/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hoechenberger/subscriptions", "organizations_url": "https://api.github.com/users/hoechenberger/orgs", "repos_url": "https://api.github.com/users/hoechenberger/repos", "events_url": "https://api.github.com/users/hoechenberger/events{/privacy}", "received_events_url": "https://api.github.com/users/hoechenberger/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/mne-tools/mne-python/milestones/23", "html_url": "https://github.com/mne-tools/mne-python/milestone/23", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/milestones/23/labels", "id": 8047399, "node_id": "MI_kwDOABPcUM4Aessn", "number": 23, "title": "1.2", "description": "", "creator": {"login": "hoechenberger", "id": 2046265, "node_id": "MDQ6VXNlcjIwNDYyNjU=", "avatar_url": "https://avatars.githubusercontent.com/u/2046265?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hoechenberger", "html_url": "https://github.com/hoechenberger", "followers_url": "https://api.github.com/users/hoechenberger/followers", "following_url": "https://api.github.com/users/hoechenberger/following{/other_user}", "gists_url": "https://api.github.com/users/hoechenberger/gists{/gist_id}", "starred_url": "https://api.github.com/users/hoechenberger/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hoechenberger/subscriptions", "organizations_url": "https://api.github.com/users/hoechenberger/orgs", "repos_url": "https://api.github.com/users/hoechenberger/repos", "events_url": "https://api.github.com/users/hoechenberger/events{/privacy}", "received_events_url": "https://api.github.com/users/hoechenberger/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 71, "state": "closed", "created_at": "2022-06-03T17:43:37Z", "updated_at": "2022-10-11T20:15:01Z", "due_on": "2022-09-01T07:00:00Z", "closed_at": "2022-10-11T20:15:01Z"}, "comments": 2, "created_at": "2022-06-30T06:55:22Z", "updated_at": "2022-07-08T10:08:49Z", "closed_at": "2022-07-08T10:08:49Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "First reported on the forum at https://mne.discourse.group/t/can-not-reorder-channels-after-adding-a-reference-channel/5180\r\n\r\n\r\nWorks:\r\n```python\r\n# %%\r\nimport mne\r\n\r\nsample_dir = mne.datasets.sample.data_path()\r\nsample_fname = sample_dir / 'MEG' / 'sample' / 'sample_audvis_raw.fif'\r\n\r\nraw = mne.io.read_raw_fif(sample_fname).crop(tmax=10).load_data()\r\nraw.add_reference_channels(['REF'])\r\nraw.pick_types(eeg=True)\r\n```\r\n\r\nDoesn't work:\r\n```python\r\n# %%\r\nimport mne\r\n\r\nsample_dir = mne.datasets.sample.data_path()\r\nsample_fname = sample_dir / 'MEG' / 'sample' / 'sample_audvis_raw.fif'\r\n\r\nraw = mne.io.read_raw_fif(sample_fname).crop(tmax=60).load_data()\r\nevents = mne.find_events(raw, stim_channel='STI 014')\r\nepochs = mne.Epochs(raw, events=events, preload=True)\r\n\r\nepochs.add_reference_channels(['REF'])\r\nepochs.pick_types(eeg=True)\r\n```\r\nand yields:\r\n```python\r\nIndexError                                Traceback (most recent call last)\r\nInput In [30], in <cell line: 12>()\r\n     10 epochs = mne.Epochs(raw, events=events, preload=True)\r\n     11 epochs.add_reference_channels(['REF'])\r\n---> 12 epochs.pick_types(eeg=True)\r\n\r\nFile <decorator-gen-43>:12, in pick_types(self, meg, eeg, stim, eog, ecg, emg, ref_meg, misc, resp, chpi, exci, ias, syst, seeg, dipole, gof, bio, ecog, fnirs, csd, dbs, include, exclude, selection, verbose)\r\n\r\nFile ~/Development/mne-python/mne/channels/channels.py:681, in UpdateChannelsMixin.pick_types(self, meg, eeg, stim, eog, ecg, emg, ref_meg, misc, resp, chpi, exci, ias, syst, seeg, dipole, gof, bio, ecog, fnirs, csd, dbs, include, exclude, selection, verbose)\r\n    597 \"\"\"Pick some channels by type and names.\r\n    598 \r\n    599 Parameters\r\n   (...)\r\n    672 .. versionadded:: 0.9.0\r\n    673 \"\"\"\r\n    674 idx = pick_types(\r\n    675     self.info, meg=meg, eeg=eeg, stim=stim, eog=eog, ecg=ecg, emg=emg,\r\n    676     ref_meg=ref_meg, misc=misc, resp=resp, chpi=chpi, exci=exci,\r\n    677     ias=ias, syst=syst, seeg=seeg, dipole=dipole, gof=gof, bio=bio,\r\n    678     ecog=ecog, fnirs=fnirs, csd=csd, dbs=dbs, include=include,\r\n    679     exclude=exclude, selection=selection)\r\n--> 681 self._pick_drop_channels(idx)\r\n    683 # remove dropped channel types from reject and flat\r\n    684 if getattr(self, 'reject', None) is not None:\r\n    685     # use list(self.reject) to avoid RuntimeError for changing\r\n    686     # dictionary size during iteration\r\n\r\nFile <decorator-gen-46>:12, in _pick_drop_channels(self, idx, verbose)\r\n\r\nFile ~/Development/mne-python/mne/channels/channels.py:855, in UpdateChannelsMixin._pick_drop_channels(self, idx, verbose)\r\n    852     _check_preload(self, msg)\r\n    854 if getattr(self, 'picks', None) is not None:\r\n--> 855     self.picks = self.picks[idx]\r\n    857 if getattr(self, '_read_picks', None) is not None:\r\n    858     self._read_picks = [r[idx] for r in self._read_picks]\r\n\r\nIndexError: index 376 is out of bounds for axis 0 with size 376\r\n```\r\n", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/10878/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10878/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/10872", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10872/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10872/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10872/events", "html_url": "https://github.com/mne-tools/mne-python/issues/10872", "id": 1289316728, "node_id": "I_kwDOABPcUM5M2Wl4", "number": 10872, "title": "support path-like in mne.make_forward_solution", "user": {"login": "drammock", "id": 1810515, "node_id": "MDQ6VXNlcjE4MTA1MTU=", "avatar_url": "https://avatars.githubusercontent.com/u/1810515?v=4", "gravatar_id": "", "url": "https://api.github.com/users/drammock", "html_url": "https://github.com/drammock", "followers_url": "https://api.github.com/users/drammock/followers", "following_url": "https://api.github.com/users/drammock/following{/other_user}", "gists_url": "https://api.github.com/users/drammock/gists{/gist_id}", "starred_url": "https://api.github.com/users/drammock/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/drammock/subscriptions", "organizations_url": "https://api.github.com/users/drammock/orgs", "repos_url": "https://api.github.com/users/drammock/repos", "events_url": "https://api.github.com/users/drammock/events{/privacy}", "received_events_url": "https://api.github.com/users/drammock/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2022-06-29T21:22:01Z", "updated_at": "2022-07-01T00:43:21Z", "closed_at": "2022-07-01T00:43:21Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "after converting a tutorial to use `pathlib.Path` objects in #10846, CircleCI fails:\r\n\r\n```\r\nTraceback (most recent call last):\r\n  File \"/home/circleci/project/examples/inverse/mixed_source_space_inverse.py\", line 101, in <module>\r\n    fwd = mne.make_forward_solution(\r\n  File \"<decorator-gen-369>\", line 12, in make_forward_solution\r\n  File \"/home/circleci/project/mne/forward/_make_forward.py\", line 589, in make_forward_solution\r\n    raise TypeError('info should be an instance of Info or string')\r\nTypeError: info should be an instance of Info or string\r\n```\r\n\r\nSo it seems `mne.make_forward_solution` is apparently not fully supporting path-like. Also the error message could be better (it could tell you what kind of instance it received).\r\n\r\ncc @ashdrew ", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/10872/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10872/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/10867", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10867/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10867/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10867/events", "html_url": "https://github.com/mne-tools/mne-python/issues/10867", "id": 1288982610, "node_id": "I_kwDOABPcUM5M1FBS", "number": 10867, "title": "Unexpected behavior when Epoching data on cropped Raw with .set_annotations", "user": {"login": "matthiasdold", "id": 62005770, "node_id": "MDQ6VXNlcjYyMDA1Nzcw", "avatar_url": "https://avatars.githubusercontent.com/u/62005770?v=4", "gravatar_id": "", "url": "https://api.github.com/users/matthiasdold", "html_url": "https://github.com/matthiasdold", "followers_url": "https://api.github.com/users/matthiasdold/followers", "following_url": "https://api.github.com/users/matthiasdold/following{/other_user}", "gists_url": "https://api.github.com/users/matthiasdold/gists{/gist_id}", "starred_url": "https://api.github.com/users/matthiasdold/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/matthiasdold/subscriptions", "organizations_url": "https://api.github.com/users/matthiasdold/orgs", "repos_url": "https://api.github.com/users/matthiasdold/repos", "events_url": "https://api.github.com/users/matthiasdold/events{/privacy}", "received_events_url": "https://api.github.com/users/matthiasdold/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2022-06-29T16:36:02Z", "updated_at": "2022-06-30T20:14:21Z", "closed_at": "2022-06-30T16:15:34Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "#### Describe the bug\r\nI am cropping a `raw` object to exclude the first data (not containing any trials which are relevant for me). Later I need to work on the data as an array (plain `numpy`) and bring everything back to a new raw `nraw` object (type: mne.io.array.array.RawArray), including setting the annotations from the cropped but otherwise not modified `raw`. \r\n\r\nNow the data and the events are as expected, but once I epoch the `nraw`, a few epochs at the end get dropped and the epochs no longer match.\r\n\r\n\r\n#### Steps to reproduce\r\n```python\r\nimport mne\r\nfrom mne.io import concatenate_raws, read_raw_edf\r\nfrom mne.datasets import eegbci\r\n\r\nimport matplotlib.pyplot as plt\r\n\r\nsubject = 1\r\nruns = [6, 10, 14]\r\nraw_fnames = eegbci.load_data(subject, runs)\r\nraws = [read_raw_edf(f, preload=True) for f in raw_fnames]\r\nraw = concatenate_raws(raws)\r\n\r\n# just crop of a bit of time\r\nnot_cropped_raw = raw.copy()\r\nraw.crop(20, None)\r\n\r\n# now create a new raw object and set the annotations\r\nnraw = mne.io.RawArray(raw.get_data(), raw.info)\r\nnraw.set_annotations(raw.annotations)\r\n\r\n# Data and time-stamps perfectly agree\r\nassert (raw.get_data() == nraw.get_data()).all(), \"Data missmatch\"\r\nassert (raw.times == nraw.times).all(), \"Time missmatch\"\r\n\r\nev, evid = mne.events_from_annotations(raw)\r\nnev, nevid = mne.events_from_annotations(nraw)\r\n\r\n# nev does not include the last 4 events, but otherwise the events match up\r\nassert (ev[:len(nev)] == nev).all(), \"Events missmatch\"\r\n\r\n# The problem starts when creating the Epochs\r\nepo = mne.Epochs(raw, ev)\r\nnepo = mne.Epochs(nraw, nev)\r\n\r\nepo.load_data()\r\nnepo.load_data()\r\nepo.drop_bad()\r\nnepo.drop_bad()\r\n\r\n# Although raw data and markers are equal (for the first 82 markers), the first epochs do not agree, see eg. epo[10]\r\nit = 10\r\nchans = ['Cz..']\r\nclr = ['#f00', '#00f', '#0f0']\r\n\r\nepo_data = epo.copy().pick_channels(chans).get_data()[it, 0, :]\r\nnepo_data = nepo.copy().pick_channels(chans).get_data()[it, 0, :]\r\n\r\nfig, axs = plt.subplots(1, 1)\r\naxs.plot(epo_data, color=clr[0], label='Cropped')\r\naxs.plot(nepo_data, color=clr[1], label='CroppedAndAnnotationSet')\r\naxs.legend()\r\nplt.show()\r\n```\r\n![2022-06-29_18-29_epoch_from_two_source](https://user-images.githubusercontent.com/62005770/176488444-0db4e804-ac2f-4d73-a352-2eb99a741031.png)\r\n\r\n#### Expected results\r\nBoth epochs `epo` and `nepo` in the minimal example should agree.\r\n\r\n#### Actual results\r\nEpochs in `nepo` are not matching `epo`\r\n\r\n#### Additional information\r\nI suspect that there is an issue with some time off-set while the epochs are created. I will try to find the root cause for the miss-match, but maybe someone knows were things are going wrong already? \r\n", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/10867/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10867/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/10853", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10853/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10853/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10853/events", "html_url": "https://github.com/mne-tools/mne-python/issues/10853", "id": 1287270607, "node_id": "I_kwDOABPcUM5MujDP", "number": 10853, "title": "path error in setup_volume_source_space", "user": {"login": "drammock", "id": 1810515, "node_id": "MDQ6VXNlcjE4MTA1MTU=", "avatar_url": "https://avatars.githubusercontent.com/u/1810515?v=4", "gravatar_id": "", "url": "https://api.github.com/users/drammock", "html_url": "https://github.com/drammock", "followers_url": "https://api.github.com/users/drammock/followers", "following_url": "https://api.github.com/users/drammock/following{/other_user}", "gists_url": "https://api.github.com/users/drammock/gists{/gist_id}", "starred_url": "https://api.github.com/users/drammock/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/drammock/subscriptions", "organizations_url": "https://api.github.com/users/drammock/orgs", "repos_url": "https://api.github.com/users/drammock/repos", "events_url": "https://api.github.com/users/drammock/events{/privacy}", "received_events_url": "https://api.github.com/users/drammock/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}, {"id": 559859326, "node_id": "MDU6TGFiZWw1NTk4NTkzMjY=", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/MEDIUM", "name": "MEDIUM", "color": "d93f0b", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2022-06-28T12:29:18Z", "updated_at": "2022-06-28T16:43:51Z", "closed_at": "2022-06-28T16:43:51Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "from CircleCI:\r\n```\r\nTraceback (most recent call last):\r\n  File \"/home/circleci/project/examples/inverse/mixed_source_space_inverse.py\", line 70, in <module>\r\n    vol_src = mne.setup_volume_source_space(\r\n  File \"<decorator-gen-148>\", line 10, in setup_volume_source_space\r\n  File \"/home/circleci/project/mne/source_space.py\", line 1545, in setup_volume_source_space\r\n    elif bem is not None and bem.get('is_sphere') is False:\r\nAttributeError: 'MNEPosixPath' object has no attribute 'get'\r\n```\r\nhttps://github.com/mne-tools/mne-python/pull/10846#discussion_r908372846", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/10853/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10853/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/10852", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10852/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10852/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10852/events", "html_url": "https://github.com/mne-tools/mne-python/issues/10852", "id": 1287225728, "node_id": "I_kwDOABPcUM5MuYGA", "number": 10852, "title": "test_search_light fails on CI pre jobs", "user": {"login": "drammock", "id": 1810515, "node_id": "MDQ6VXNlcjE4MTA1MTU=", "avatar_url": "https://avatars.githubusercontent.com/u/1810515?v=4", "gravatar_id": "", "url": "https://api.github.com/users/drammock", "html_url": "https://github.com/drammock", "followers_url": "https://api.github.com/users/drammock/followers", "following_url": "https://api.github.com/users/drammock/following{/other_user}", "gists_url": "https://api.github.com/users/drammock/gists{/gist_id}", "starred_url": "https://api.github.com/users/drammock/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/drammock/subscriptions", "organizations_url": "https://api.github.com/users/drammock/orgs", "repos_url": "https://api.github.com/users/drammock/repos", "events_url": "https://api.github.com/users/drammock/events{/privacy}", "received_events_url": "https://api.github.com/users/drammock/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "agramfort", "id": 161052, "node_id": "MDQ6VXNlcjE2MTA1Mg==", "avatar_url": "https://avatars.githubusercontent.com/u/161052?v=4", "gravatar_id": "", "url": "https://api.github.com/users/agramfort", "html_url": "https://github.com/agramfort", "followers_url": "https://api.github.com/users/agramfort/followers", "following_url": "https://api.github.com/users/agramfort/following{/other_user}", "gists_url": "https://api.github.com/users/agramfort/gists{/gist_id}", "starred_url": "https://api.github.com/users/agramfort/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/agramfort/subscriptions", "organizations_url": "https://api.github.com/users/agramfort/orgs", "repos_url": "https://api.github.com/users/agramfort/repos", "events_url": "https://api.github.com/users/agramfort/events{/privacy}", "received_events_url": "https://api.github.com/users/agramfort/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "agramfort", "id": 161052, "node_id": "MDQ6VXNlcjE2MTA1Mg==", "avatar_url": "https://avatars.githubusercontent.com/u/161052?v=4", "gravatar_id": "", "url": "https://api.github.com/users/agramfort", "html_url": "https://github.com/agramfort", "followers_url": "https://api.github.com/users/agramfort/followers", "following_url": "https://api.github.com/users/agramfort/following{/other_user}", "gists_url": "https://api.github.com/users/agramfort/gists{/gist_id}", "starred_url": "https://api.github.com/users/agramfort/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/agramfort/subscriptions", "organizations_url": "https://api.github.com/users/agramfort/orgs", "repos_url": "https://api.github.com/users/agramfort/repos", "events_url": "https://api.github.com/users/agramfort/events{/privacy}", "received_events_url": "https://api.github.com/users/agramfort/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 2, "created_at": "2022-06-28T11:50:56Z", "updated_at": "2022-07-05T13:14:11Z", "closed_at": "2022-07-05T13:14:11Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "possibly an sklearn behavior change?  Haven't dug any deeper yet.\r\n\r\nFailing on linux [here](https://github.com/mne-tools/mne-python/runs/7088858139?check_suite_focus=true#step:13:3625) and windows [here](https://dev.azure.com/mne-tools/mne-python/_build/results?buildId=20371&view=logs&j=305851a9-a7bb-55db-0042-7e2b6f48aa1c&t=77eb5bf7-3205-5b54-06c6-183c8195d846&l=3199)\r\n\r\n```\r\n______________________________ test_search_light _______________________________\r\nmne/decoding/tests/test_search_light.py:150: in test_search_light\r\n    pipe.fit(X, y)\r\n/opt/hostedtoolcache/Python/3.10.5/x64/lib/python3.10/site-packages/sklearn/pipeline.py:378: in fit\r\n    Xt = self._fit(X, y, **fit_params_steps)\r\n/opt/hostedtoolcache/Python/3.10.5/x64/lib/python3.10/site-packages/sklearn/pipeline.py:336: in _fit\r\n    X, fitted_transformer = fit_transform_one_cached(\r\n/opt/hostedtoolcache/Python/3.10.5/x64/lib/python3.10/site-packages/joblib/memory.py:349: in __call__\r\nreturnself.func(*args, **kwargs)\r\n/opt/hostedtoolcache/Python/3.10.5/x64/lib/python3.10/site-packages/sklearn/pipeline.py:870: in _fit_transform_one\r\n    res = transformer.fit_transform(X, y, **fit_params)\r\nmne/decoding/search_light.py:117: in fit_transform\r\nreturnself.fit(X, y, **fit_params).transform(X)\r\nmne/decoding/search_light.py:80: in fit\r\n    estimators = parallel(\r\n/opt/hostedtoolcache/Python/3.10.5/x64/lib/python3.10/site-packages/joblib/parallel.py:1043: in __call__\r\nifself.dispatch_one_batch(iterator):\r\n/opt/hostedtoolcache/Python/3.10.5/x64/lib/python3.10/site-packages/joblib/parallel.py:861: in dispatch_one_batch\r\nself._dispatch(tasks)\r\n/opt/hostedtoolcache/Python/3.10.5/x64/lib/python3.10/site-packages/joblib/parallel.py:779: in _dispatch\r\n    job = self._backend.apply_async(batch, callback=cb)\r\n/opt/hostedtoolcache/Python/3.10.5/x64/lib/python3.10/site-packages/joblib/_parallel_backends.py:208: in apply_async\r\n    result = ImmediateResult(func)\r\n/opt/hostedtoolcache/Python/3.10.5/x64/lib/python3.10/site-packages/joblib/_parallel_backends.py:572: in __init__\r\nself.results = batch()\r\n/opt/hostedtoolcache/Python/3.10.5/x64/lib/python3.10/site-packages/joblib/parallel.py:262: in __call__\r\nreturn [func(*args, **kwargs)\r\n/opt/hostedtoolcache/Python/3.10.5/x64/lib/python3.10/site-packages/joblib/parallel.py:262: in <listcomp>\r\nreturn [func(*args, **kwargs)\r\nmne/decoding/search_light.py:318: in _sl_fit\r\n    est.fit(X[..., ii], y, **fit_params)\r\n/opt/hostedtoolcache/Python/3.10.5/x64/lib/python3.10/site-packages/sklearn/linear_model/_logistic.py:1098: in fit\r\nself._validate_params()\r\n/opt/hostedtoolcache/Python/3.10.5/x64/lib/python3.10/site-packages/sklearn/base.py:613: in _validate_params\r\n    validate_parameter_constraints(\r\n/opt/hostedtoolcache/Python/3.10.5/x64/lib/python3.10/site-packages/sklearn/utils/_param_validation.py:47: in validate_parameter_constraints\r\nraiseValueError(\r\nE   ValueError: The parameter constraints ['penalty', 'dual', 'tol', 'C', 'fit_intercept', 'intercept_scaling', 'class_weight', 'random_state', 'solver', 'max_iter', 'multi_class', 'verbose', 'warm_start', 'n_jobs', 'l1_ratio'] do not match the parameters to validate [].\r\n```\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/10852/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10852/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/10848", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10848/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10848/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10848/events", "html_url": "https://github.com/mne-tools/mne-python/issues/10848", "id": 1286293769, "node_id": "I_kwDOABPcUM5Mq0kJ", "number": 10848, "title": "Get KeyError: 'float', when trying to plot EEG data from .mff file", "user": {"login": "Kiranraj227", "id": 71511899, "node_id": "MDQ6VXNlcjcxNTExODk5", "avatar_url": "https://avatars.githubusercontent.com/u/71511899?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Kiranraj227", "html_url": "https://github.com/Kiranraj227", "followers_url": "https://api.github.com/users/Kiranraj227/followers", "following_url": "https://api.github.com/users/Kiranraj227/following{/other_user}", "gists_url": "https://api.github.com/users/Kiranraj227/gists{/gist_id}", "starred_url": "https://api.github.com/users/Kiranraj227/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Kiranraj227/subscriptions", "organizations_url": "https://api.github.com/users/Kiranraj227/orgs", "repos_url": "https://api.github.com/users/Kiranraj227/repos", "events_url": "https://api.github.com/users/Kiranraj227/events{/privacy}", "received_events_url": "https://api.github.com/users/Kiranraj227/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2022-06-27T20:10:26Z", "updated_at": "2022-06-30T17:32:03Z", "closed_at": "2022-06-30T17:32:03Z", "author_association": "NONE", "active_lock_reason": null, "body": "#### Describe the bug\r\n*When I try to plot the raw data, I get this error: KeyError: 'float'*\r\n\r\n\r\n#### Steps to reproduce\r\nimport mne\r\nimport matplotlib\r\n\r\nmatplotlib.use('Qt5Agg')\r\nfname = r\"C:\\Users\\HP\\Desktop\\MD.mff\"\r\nraw = mne.io.read_raw_egi(fname)\r\nraw.crop(tmax=60).load_data()\r\n#error occurs when running the line below\r\nraw.plot(duration=20, scalings=20e-6)\r\n\r\n\r\n#### Expected results\r\n*Expect to plot EEG channels*\r\n\r\n\r\n#### Actual results\r\nUsing qt as 2D backend.\r\nOpening raw-browser...\r\n---------------------------------------------------------------------------\r\nKeyError                                  Traceback (most recent call last)\r\nInput In [3], in <cell line: 1>()\r\n----> 1 raw.plot(duration=20, scalings=20e-6)\r\n\r\nFile ~\\anaconda3\\envs\\mne-light\\lib\\site-packages\\mne\\io\\base.py:1556, in BaseRaw.plot(self, events, duration, start, n_channels, bgcolor, color, bad_color, event_color, scalings, remove_dc, order, show_options, title, show, block, highpass, lowpass, filtorder, clipping, show_first_samp, proj, group_by, butterfly, decim, noise_cov, event_id, show_scrollbars, show_scalebars, time_format, precompute, use_opengl, theme, verbose)\r\n   1546 @copy_function_doc_to_method_doc(plot_raw)\r\n   1547 def plot(self, events=None, duration=10.0, start=0.0, n_channels=20,\r\n   1548          bgcolor='w', color=None, bad_color='lightgray',\r\n   (...)\r\n   1554          show_scrollbars=True, show_scalebars=True, time_format='float',\r\n   1555          precompute=None, use_opengl=None, *, theme=None, verbose=None):\r\n-> 1556     return plot_raw(self, events, duration, start, n_channels, bgcolor,\r\n   1557                     color, bad_color, event_color, scalings, remove_dc,\r\n   1558                     order, show_options, title, show, block, highpass,\r\n   1559                     lowpass, filtorder, clipping, show_first_samp,\r\n   1560                     proj, group_by, butterfly, decim, noise_cov=noise_cov,\r\n   1561                     event_id=event_id, show_scrollbars=show_scrollbars,\r\n   1562                     show_scalebars=show_scalebars, time_format=time_format,\r\n   1563                     precompute=precompute, use_opengl=use_opengl,\r\n   1564                     theme=theme, verbose=verbose)\r\n\r\nFile <decorator-gen-182>:12, in plot_raw(raw, events, duration, start, n_channels, bgcolor, color, bad_color, event_color, scalings, remove_dc, order, show_options, title, show, block, highpass, lowpass, filtorder, clipping, show_first_samp, proj, group_by, butterfly, decim, noise_cov, event_id, show_scrollbars, show_scalebars, time_format, precompute, use_opengl, theme, verbose)\r\n\r\nFile ~\\anaconda3\\envs\\mne-light\\lib\\site-packages\\mne\\viz\\raw.py:356, in plot_raw(raw, events, duration, start, n_channels, bgcolor, color, bad_color, event_color, scalings, remove_dc, order, show_options, title, show, block, highpass, lowpass, filtorder, clipping, show_first_samp, proj, group_by, butterfly, decim, noise_cov, event_id, show_scrollbars, show_scalebars, time_format, precompute, use_opengl, theme, verbose)\r\n    305 precompute = _handle_precompute(precompute)\r\n    306 params = dict(inst=raw,\r\n    307               info=info,\r\n    308               # channels and channel order\r\n   (...)\r\n    353               use_opengl=use_opengl,\r\n    354               theme=theme)\r\n--> 356 fig = _get_browser(show=show, block=block, **params)\r\n    358 return fig\r\n\r\nFile ~\\anaconda3\\envs\\mne-light\\lib\\site-packages\\mne\\viz\\_figure.py:654, in _get_browser(show, block, **kwargs)\r\n    651             return fig\r\n    653 # Initialize Browser\r\n--> 654 fig = backend._init_browser(**kwargs)\r\n    655 _show_browser(show=show, block=block, fig=fig)\r\n    657 return fig\r\n\r\nFile ~\\anaconda3\\envs\\mne-light\\lib\\site-packages\\mne_qt_browser\\_pg_figure.py:4702, in _init_browser(**kwargs)\r\n   4700 if 'splash' in app_kwargs:\r\n   4701     kwargs['splash'] = out[1]  # returned as second element\r\n-> 4702 browser = MNEQtBrowser(**kwargs)\r\n   4704 return browser\r\n\r\nFile ~\\anaconda3\\envs\\mne-light\\lib\\site-packages\\mne_qt_browser\\_pg_figure.py:153, in _safe_splash.<locals>.func(self, *args, **kwargs)\r\n    150 @functools.wraps(meth)\r\n    151 def func(self, *args, **kwargs):\r\n    152     try:\r\n--> 153         meth(self, *args, **kwargs)\r\n    154     finally:\r\n    155         try:\r\n\r\nFile ~\\anaconda3\\envs\\mne-light\\lib\\site-packages\\mne_qt_browser\\_pg_figure.py:2805, in MNEQtBrowser.__init__(self, **kwargs)\r\n   2802 self.mne.viewbox = RawViewBox(self)\r\n   2804 # Start precomputing if enabled\r\n-> 2805 self._init_precompute()\r\n   2807 # Parameters for overviewbar\r\n   2808 self.mne.overview_mode = getattr(self.mne, 'overview_mode', 'channels')\r\n\r\nFile ~\\anaconda3\\envs\\mne-light\\lib\\site-packages\\mne_qt_browser\\_pg_figure.py:3816, in MNEQtBrowser._init_precompute(self)\r\n   3813 gc.collect()\r\n   3815 if self.mne.precompute == 'auto':\r\n-> 3816     self.mne.enable_precompute = self._check_space_for_precompute()\r\n   3817 elif isinstance(self.mne.precompute, bool):\r\n   3818     self.mne.enable_precompute = self.mne.precompute\r\n\r\nFile ~\\anaconda3\\envs\\mne-light\\lib\\site-packages\\mne_qt_browser\\_pg_figure.py:3863, in MNEQtBrowser._check_space_for_precompute(self)\r\n   3859     fmt = getattr(self.mne.inst, 'orig_format', 'single')\r\n   3860     # Apply size change to 64-bit float in memory\r\n   3861     # (* 2 because when loading data will be loaded into a copy\r\n   3862     # of self.mne.inst._data to apply processing.\r\n-> 3863     expected_ram = disk_space * fmt_multipliers[fmt] * 2\r\n   3864 else:\r\n   3865     expected_ram = sys.getsizeof(self.mne.inst._data)\r\n\r\nKeyError: 'float'\r\n\r\n\r\n#### Additional information\r\n*Platform:         Windows-10-10.0.19044-SP0\r\nPython:           3.9.12 (main, Apr  4 2022, 05:22:27) [MSC v.1916 64 bit (AMD64)]\r\nExecutable:       C:\\Users\\HP\\anaconda3\\envs\\mne-light\\python.exe\r\nCPU:              Intel64 Family 6 Model 61 Stepping 4, GenuineIntel: 4 cores\r\nMemory:           15.9 GB\r\n\r\nmne:              1.0.3\r\nnumpy:            1.22.3 {blas=NO_ATLAS_INFO, lapack=lapack}\r\nscipy:            1.8.1\r\nmatplotlib:       3.5.2 {backend=Qt5Agg}\r\n\r\nsklearn:          1.1.1\r\nnumba:            0.55.2\r\nnibabel:          4.0.1\r\nnilearn:          0.9.1\r\ndipy:             1.5.0\r\ncupy:             Not found\r\npandas:           1.4.3\r\npyvista:          0.34.1 {OpenGL 4.4.0 - Build 20.19.15.4549 via Intel(R) HD Graphics 5500}\r\npyvistaqt:        0.9.0\r\nipyvtklink:       0.2.2\r\nvtk:              9.1.0\r\nPyQt5:            5.12.3\r\nipympl:           Not found\r\npooch:            v1.6.0\r\n\r\nmne_bids:         Not found\r\nmne_nirs:         Not found\r\nmne_features:     Not found\r\nmne_qt_browser:   0.3.1\r\nmne_connectivity: Not found*\r\n", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/10848/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10848/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/10837", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10837/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10837/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10837/events", "html_url": "https://github.com/mne-tools/mne-python/issues/10837", "id": 1285711754, "node_id": "I_kwDOABPcUM5MomeK", "number": 10837, "title": "Ultraslow tests are failing intermittently", "user": {"login": "drammock", "id": 1810515, "node_id": "MDQ6VXNlcjE4MTA1MTU=", "avatar_url": "https://avatars.githubusercontent.com/u/1810515?v=4", "gravatar_id": "", "url": "https://api.github.com/users/drammock", "html_url": "https://github.com/drammock", "followers_url": "https://api.github.com/users/drammock/followers", "following_url": "https://api.github.com/users/drammock/following{/other_user}", "gists_url": "https://api.github.com/users/drammock/gists{/gist_id}", "starred_url": "https://api.github.com/users/drammock/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/drammock/subscriptions", "organizations_url": "https://api.github.com/users/drammock/orgs", "repos_url": "https://api.github.com/users/drammock/repos", "events_url": "https://api.github.com/users/drammock/events{/privacy}", "received_events_url": "https://api.github.com/users/drammock/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}, {"id": 77061445, "node_id": "MDU6TGFiZWw3NzA2MTQ0NQ==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/EASY", "name": "EASY", "color": "2be2d6", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2022-06-27T12:10:49Z", "updated_at": "2022-06-28T00:46:27Z", "closed_at": "2022-06-28T00:46:27Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "some threads are timing out on the `creating the BEM surfaces` step of `test_flash_bem`.  \r\n\r\n```\r\n=================================== FAILURES ===================================\r\n________________________________ test_flash_bem ________________________________\r\nmne/commands/tests/test_commands.py:323: in test_flash_bem\r\n    mne_flash_bem.run()\r\nmne/commands/mne_flash_bem.py:122: in run\r\n    make_flash_bem(subject=subject, subjects_dir=subjects_dir,\r\n<decorator-gen-77>:10: in make_flash_bem\r\n    ???\r\nmne/bem.py:2041: in make_flash_bem\r\n    run_subprocess_env(cmd)\r\n<decorator-gen-1>:12: in run_subprocess\r\n    ???\r\nmne/utils/misc.py:147: in run_subprocess\r\n    err = err_q.get(timeout=0.01)\r\n/opt/hostedtoolcache/Python/3.9.13/x64/lib/python3.9/queue.py:180: in get\r\n    self.not_empty.wait(remaining)\r\n/opt/hostedtoolcache/Python/3.9.13/x64/lib/python3.9/threading.py:316: in wait\r\n    gotit = waiter.acquire(True, timeout)\r\nE   Failed: Timeout >120.0s\r\n```\r\n\r\nstdout excerpt (from Azure):\r\n```\r\nmri_strip_skull: triangle file /tmp/pytest-of-vsts/pytest-0/test_flash_bem0/sample/bem/inner_skull_tmp.tri written\r\n\r\nnvertices=2562, nfaces=5120\r\n\r\nmri_strip_skull: triangle file /tmp/pytest-of-vsts/pytest-0/test_flash_bem0/sample/bem/inner_skull_tmp.tri read\r\n\r\nmri_strip_skull: images /tmp/pytest-of-vsts/pytest-0/test_flash_bem0/sample/mri/flash5/COR- read\r\n\r\n0: sval=83.00,sinval=83.00,soutval=83.00\r\n\r\n10: sval=110.04,sinval=110.04,soutval=110.04\r\n\r\n20: sval=121.32,sinval=121.32,soutval=121.32\r\n\r\n30: sval=124.16,sinval=124.16,soutval=124.16\r\n\r\n----------------------------- Captured stderr call -----------------------------\r\n\r\n+++++++++++++++++++++++++++++++++++ Timeout ++++++++++++++++++++++++++++++++++++\r\n\r\n~~~~~~~~~~~~~~~~~~~~~ Stack of Thread-34 (139763671361280) ~~~~~~~~~~~~~~~~~~~~~\r\n  File \"/opt/hostedtoolcache/Python/3.9.13/x64/lib/python3.9/threading.py\", line 937, in _bootstrap\r\n    self._bootstrap_inner()\r\n  File \"/opt/hostedtoolcache/Python/3.9.13/x64/lib/python3.9/threading.py\", line 980, in _bootstrap_inner\r\n    self.run()\r\n  File \"/opt/hostedtoolcache/Python/3.9.13/x64/lib/python3.9/threading.py\", line 917, in run\r\n    self._target(*self._args, **self._kwargs)\r\n  File \"/home/vsts/work/1/s/mne/utils/misc.py\", line 86, in _enqueue_output\r\n    for line in iter(out.readline, b''):\r\n\r\n~~~~~~~~~~~~~~~~~~~~~ Stack of Thread-33 (139763649079040) ~~~~~~~~~~~~~~~~~~~~~\r\n  File \"/opt/hostedtoolcache/Python/3.9.13/x64/lib/python3.9/threading.py\", line 937, in _bootstrap\r\n    self._bootstrap_inner()\r\n  File \"/opt/hostedtoolcache/Python/3.9.13/x64/lib/python3.9/threading.py\", line 980, in _bootstrap_inner\r\n    self.run()\r\n  File \"/opt/hostedtoolcache/Python/3.9.13/x64/lib/python3.9/threading.py\", line 917, in run\r\n    self._target(*self._args, **self._kwargs)\r\n  File \"/home/vsts/work/1/s/mne/utils/misc.py\", line 86, in _enqueue_output\r\n    for line in iter(out.readline, b''):\r\n\r\n+++++++++++++++++++++++++++++++++++ Timeout ++++++++++++++++++++++++++++++++++++\r\n```\r\n\r\n\r\ncc @agramfort and @larsoner, I'm guessing this is from #10715 ?", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/10837/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10837/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/10836", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10836/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10836/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10836/events", "html_url": "https://github.com/mne-tools/mne-python/issues/10836", "id": 1285642951, "node_id": "I_kwDOABPcUM5MoVrH", "number": 10836, "title": "split raw file error in examples/decoding/decoding_rsa_sgskip.py", "user": {"login": "CarinaFo", "id": 29330407, "node_id": "MDQ6VXNlcjI5MzMwNDA3", "avatar_url": "https://avatars.githubusercontent.com/u/29330407?v=4", "gravatar_id": "", "url": "https://api.github.com/users/CarinaFo", "html_url": "https://github.com/CarinaFo", "followers_url": "https://api.github.com/users/CarinaFo/followers", "following_url": "https://api.github.com/users/CarinaFo/following{/other_user}", "gists_url": "https://api.github.com/users/CarinaFo/gists{/gist_id}", "starred_url": "https://api.github.com/users/CarinaFo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/CarinaFo/subscriptions", "organizations_url": "https://api.github.com/users/CarinaFo/orgs", "repos_url": "https://api.github.com/users/CarinaFo/repos", "events_url": "https://api.github.com/users/CarinaFo/events{/privacy}", "received_events_url": "https://api.github.com/users/CarinaFo/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2022-06-27T11:12:03Z", "updated_at": "2022-06-30T12:29:41Z", "closed_at": "2022-06-30T12:29:41Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "while executing line 83 - 84: raws = [read_raw_fif(fname, verbose='error') for fname in fnames]  this error pops up:\n\n```\n\n\nTraceback (most recent call last):\n  File \"C:\\Users\\Carina\\Documents\\expecon_EEG_analysis\\venv\\lib\\site-packages\\IPython\\core\\interactiveshell.py\", line 3361, in run_code\n    exec(code_obj, self.user_global_ns, self.user_ns)\n  File \"<ipython-input-28-5f4d8359a1fd>\", line 1, in <cell line: 1>\n    raws = [read_raw_fif(fname, verbose='error')\n  File \"<ipython-input-28-5f4d8359a1fd>\", line 1, in <listcomp>\n    raws = [read_raw_fif(fname, verbose='error')\n  File \"C:\\Users\\Carina\\Documents\\expecon_EEG_analysis\\venv\\lib\\site-packages\\mne\\io\\fiff\\raw.py\", line 482, in read_raw_fif\n    return Raw(fname=fname, allow_maxshield=allow_maxshield,\n  File \"<decorator-gen-240>\", line 10, in __init__\n  File \"C:\\Users\\Carina\\Documents\\expecon_EEG_analysis\\venv\\lib\\site-packages\\mne\\io\\fiff\\raw.py\", line 94, in __init__\n    _on_missing(on_split_missing, msg, name='on_split_missing')\n  File \"C:\\Users\\Carina\\Documents\\expecon_EEG_analysis\\venv\\lib\\site-packages\\mne\\utils\\check.py\", line 872, in _on_missing\n    raise error_klass(msg)\nValueError: Split raw file detected but next file C:\\Users\\Carina\\mne_data\\MNE-visual_92_categories-data\\sample_subject_0_tsss_mc-1.fif does not exist. Ensure all files were transferred properly and that split and original files were not manually renamed on disk (split files should be renamed by loading and re-saving with MNE-Python to preserve proper filename linkage).\n```\n\n\n\n", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/10836/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10836/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/10828", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10828/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10828/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10828/events", "html_url": "https://github.com/mne-tools/mne-python/issues/10828", "id": 1284869224, "node_id": "I_kwDOABPcUM5MlYxo", "number": 10828, "title": "Conda installation hangs forever", "user": {"login": "wvxvw", "id": 3147276, "node_id": "MDQ6VXNlcjMxNDcyNzY=", "avatar_url": "https://avatars.githubusercontent.com/u/3147276?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wvxvw", "html_url": "https://github.com/wvxvw", "followers_url": "https://api.github.com/users/wvxvw/followers", "following_url": "https://api.github.com/users/wvxvw/following{/other_user}", "gists_url": "https://api.github.com/users/wvxvw/gists{/gist_id}", "starred_url": "https://api.github.com/users/wvxvw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wvxvw/subscriptions", "organizations_url": "https://api.github.com/users/wvxvw/orgs", "repos_url": "https://api.github.com/users/wvxvw/repos", "events_url": "https://api.github.com/users/wvxvw/events{/privacy}", "received_events_url": "https://api.github.com/users/wvxvw/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 14, "created_at": "2022-06-26T10:16:58Z", "updated_at": "2022-10-21T14:55:59Z", "closed_at": "2022-10-21T14:55:58Z", "author_association": "NONE", "active_lock_reason": null, "body": "#### Describe the bug\r\nVery similar to https://github.com/mne-tools/mne-python/issues/10014, however, I'm trying to install several other packages as well. If I remove `mne` from the list, I'm able to install them (also, slow, but `conda` is never fast...). With `mne` included, I waited for about a day give or take a few hours, and it was still at 100% CPU \"solving\" something. Obviously, this is also a `conda` bug, but `conda` is beyond repair, so, unfortunately, others need to work around its problems.\r\n\r\nThe way I discovered the problem was by running `conda build` of a project that has a dependency on `mne`. So, unfortunately, I cannot use `mamba`, because `boa` is still in experimental stage. However, further investigation showed that:\r\n\r\n``` sh\r\nconda install -y --strict-channel-priority --override-channels -c conda-forge \\\r\n    \"python==3.8\" \\\r\n    \"conda==4.13.0\" \\\r\n    \"pandas\" \\\r\n    \"matplotlib\" \\\r\n    \"scipy\" \\\r\n    \"scikit-learn\" \\\r\n    \"h5py\" \\\r\n    \"pyxdf\" \\\r\n    \"mne\" \\\r\n    \"textdistance\"\r\n```\r\nexhibits the same behavior.\r\n\r\nThis happens on Linux. I don't think that flavor or kernel version etc. are important, but will provide those if you think they are.\r\n\r\n#### Expected results\r\nThe library installs in reasonable amount of time (at least under one hour!)\r\n\r\n\r\n#### Actual results\r\nNo traceback. Also, `conda` swallows `pdb` errors, so, it's impossible to debug w/o much setup. When interrupted, the install doesn't show traceback.\r\n\r\n#### Additional information\r\nImpossible to run `mne.sys_info()` since it fails to install.\r\n", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/10828/reactions", "total_count": 1, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10828/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/10819", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10819/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10819/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10819/events", "html_url": "https://github.com/mne-tools/mne-python/issues/10819", "id": 1283045758, "node_id": "I_kwDOABPcUM5Mebl-", "number": 10819, "title": "[BUG] Scalp surface is not loaded for `coreg` GUI is fiducials exist (and looks bad/is unreadable in notebook)", "user": {"login": "alexrockhill", "id": 13473576, "node_id": "MDQ6VXNlcjEzNDczNTc2", "avatar_url": "https://avatars.githubusercontent.com/u/13473576?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alexrockhill", "html_url": "https://github.com/alexrockhill", "followers_url": "https://api.github.com/users/alexrockhill/followers", "following_url": "https://api.github.com/users/alexrockhill/following{/other_user}", "gists_url": "https://api.github.com/users/alexrockhill/gists{/gist_id}", "starred_url": "https://api.github.com/users/alexrockhill/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alexrockhill/subscriptions", "organizations_url": "https://api.github.com/users/alexrockhill/orgs", "repos_url": "https://api.github.com/users/alexrockhill/repos", "events_url": "https://api.github.com/users/alexrockhill/events{/privacy}", "received_events_url": "https://api.github.com/users/alexrockhill/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2022-06-23T22:50:00Z", "updated_at": "2022-10-21T14:56:45Z", "closed_at": "2022-10-21T14:56:44Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "When I `rm /Users/alexrockhill/mne_data/MNE-sample-data/subjects/sample/bem/sample-fiducials.fif` and then launch the `coreg` GUI with\r\n\r\n```\r\nimport os.path as op\r\nimport mne\r\n\r\ndata_path = mne.datasets.sample.data_path()\r\nsubjects_dir = op.join(data_path, 'subjects')\r\n\r\ngui = mne.gui.coregistration(subject='sample', subjects_dir=subjects_dir)\r\n```\r\n\r\nit works great. But if the fiducials exist before it's launched I get no scalp surface:\r\n\r\n<img width=\"817\" alt=\"Screen Shot 2022-06-23 at 3 46 15 PM\" src=\"https://user-images.githubusercontent.com/13473576/175427321-9bfbccda-18e9-46a0-a059-88d593cd227c.png\">\r\n\r\nAlso, you can't read anything. I know I can change my Jupyter Notebook zoom settings but I think this is an issue, it should look at least okay so that you can read things with the default settings on a pretty standard machine (below). I think the fontsizes should be way smaller so that the words don't get cut off.\r\n\r\n```\r\nPlatform:         macOS-11.6.6-x86_64-i386-64bit\r\nPython:           3.9.10 | packaged by conda-forge | (main, Feb  1 2022, 21:28:27)  [Clang 11.1.0 ]\r\nExecutable:       /Users/alexrockhill/software/anaconda3/envs/mne/bin/python3.9\r\nCPU:              i386: 4 cores\r\nMemory:           8.0 GB\r\n\r\nmne:              1.1.dev0\r\nnumpy:            1.21.5 {blas=openblas, lapack=openblas}\r\nscipy:            1.8.0\r\nmatplotlib:       3.5.1 {backend=Qt5Agg}\r\n\r\nsklearn:          1.0.2\r\nnumba:            0.55.1\r\nnibabel:          3.2.2\r\nnilearn:          0.9.0\r\ndipy:             1.5.0dev\r\ncupy:             Not found\r\npandas:           1.4.1\r\npyvista:          0.33.2 {OpenGL 4.1 INTEL-16.5.11 via Intel(R) Iris(TM) Graphics 6100}\r\npyvistaqt:        0.7.0\r\nipyvtklink:       0.2.2\r\nvtk:              9.0.3\r\nqtpy:             2.0.1 {PyQt5=5.12.9}\r\nipympl:           Not found\r\npyqtgraph:        0.12.3\r\npooch:            v1.6.0\r\n\r\nmne_bids:         0.11.dev0\r\nmne_nirs:         Not found\r\nmne_features:     Not found\r\nmne_qt_browser:   0.3.0\r\nmne_connectivity: 0.3dev0\r\nmne_icalabel:     0.2dev0\r\n```\r\n", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/10819/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10819/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/10798", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10798/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10798/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10798/events", "html_url": "https://github.com/mne-tools/mne-python/issues/10798", "id": 1278650379, "node_id": "I_kwDOABPcUM5MNqgL", "number": 10798, "title": "Issue reading 4DNI bti MEG file containing EEG channels with labels starting with A", "user": {"login": "bcolombet", "id": 5189643, "node_id": "MDQ6VXNlcjUxODk2NDM=", "avatar_url": "https://avatars.githubusercontent.com/u/5189643?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bcolombet", "html_url": "https://github.com/bcolombet", "followers_url": "https://api.github.com/users/bcolombet/followers", "following_url": "https://api.github.com/users/bcolombet/following{/other_user}", "gists_url": "https://api.github.com/users/bcolombet/gists{/gist_id}", "starred_url": "https://api.github.com/users/bcolombet/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bcolombet/subscriptions", "organizations_url": "https://api.github.com/users/bcolombet/orgs", "repos_url": "https://api.github.com/users/bcolombet/repos", "events_url": "https://api.github.com/users/bcolombet/events{/privacy}", "received_events_url": "https://api.github.com/users/bcolombet/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2022-06-21T15:48:58Z", "updated_at": "2022-06-23T07:51:55Z", "closed_at": "2022-06-23T07:51:54Z", "author_association": "NONE", "active_lock_reason": null, "body": "The MEG data file contains EEG channels labeled AF3, AF4, AF7, AF8 .\r\n\r\nMNE considers this channels as MEG channel not EEG and raises the following error:\r\n\r\n````\r\nReading 4D PDF file e:\\data\\mne\\2\\c,rfDC...\r\nMissing values BTI dev->head transform. Replacing with identity matrix.\r\nCreating Neuromag info structure ...\r\n... Setting channel info structure.\r\n... putting coil transforms in Neuromag coordinates\r\n... Reading digitization points from e:\\data\\mne\\2\\hs_file\r\nCurrently direct inclusion of 4D weight tables is not supported. For critical use cases please take into account the MNE command \"mne_create_comp_data\" to include weights as printed out by the 4D \"print_table\" routine.\r\nTraceback (most recent call last):\r\n  File \"C:\\Users\\bruno\\PycharmProjects\\mne_debug\\main.py\", line 25, in <module>\r\n    raw = mne.io.read_raw_bti(fname, rename_channels=False, preload=False)\r\n  File \"<decorator-gen-222>\", line 12, in read_raw_bti\r\n  File \"C:\\Users\\bruno\\PycharmProjects\\mne_debug\\venv\\lib\\site-packages\\mne\\io\\bti\\bti.py\", line 1287, in read_raw_bti\r\n    return RawBTi(pdf_fname, config_fname=config_fname,\r\n  File \"<decorator-gen-221>\", line 12, in __init__\r\n  File \"C:\\Users\\bruno\\PycharmProjects\\mne_debug\\venv\\lib\\site-packages\\mne\\io\\bti\\bti.py\", line 950, in __init__\r\n    info, bti_info = _get_bti_info(\r\n  File \"C:\\Users\\bruno\\PycharmProjects\\mne_debug\\venv\\lib\\site-packages\\mne\\io\\bti\\bti.py\", line 1223, in _get_bti_info\r\n    info._check_consistency()\r\n  File \"C:\\Users\\bruno\\PycharmProjects\\mne_debug\\venv\\lib\\site-packages\\mne\\io\\meas_info.py\", line 1101, in _check_consistency\r\n    raise TypeError(\r\nTypeError: Bad info: info[\"chs\"][274][\"loc\"] must be ndarray with 12 elements, got None\r\n````\r\n\r\nWhen the channels are renamed  FA3, FA4, FA7, FA8  there is no problem to read the data file.\r\n", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/10798/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10798/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/10786", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10786/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10786/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10786/events", "html_url": "https://github.com/mne-tools/mne-python/issues/10786", "id": 1276151440, "node_id": "I_kwDOABPcUM5MEIaQ", "number": 10786, "title": "Rotation axes are different between plot_alignment() and plot_field() 3D objects", "user": {"login": "hoechenberger", "id": 2046265, "node_id": "MDQ6VXNlcjIwNDYyNjU=", "avatar_url": "https://avatars.githubusercontent.com/u/2046265?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hoechenberger", "html_url": "https://github.com/hoechenberger", "followers_url": "https://api.github.com/users/hoechenberger/followers", "following_url": "https://api.github.com/users/hoechenberger/following{/other_user}", "gists_url": "https://api.github.com/users/hoechenberger/gists{/gist_id}", "starred_url": "https://api.github.com/users/hoechenberger/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hoechenberger/subscriptions", "organizations_url": "https://api.github.com/users/hoechenberger/orgs", "repos_url": "https://api.github.com/users/hoechenberger/repos", "events_url": "https://api.github.com/users/hoechenberger/events{/privacy}", "received_events_url": "https://api.github.com/users/hoechenberger/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}, {"id": 1290799321, "node_id": "MDU6TGFiZWwxMjkwNzk5MzIx", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/VIZ", "name": "VIZ", "color": "22e861", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": {"login": "hoechenberger", "id": 2046265, "node_id": "MDQ6VXNlcjIwNDYyNjU=", "avatar_url": "https://avatars.githubusercontent.com/u/2046265?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hoechenberger", "html_url": "https://github.com/hoechenberger", "followers_url": "https://api.github.com/users/hoechenberger/followers", "following_url": "https://api.github.com/users/hoechenberger/following{/other_user}", "gists_url": "https://api.github.com/users/hoechenberger/gists{/gist_id}", "starred_url": "https://api.github.com/users/hoechenberger/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hoechenberger/subscriptions", "organizations_url": "https://api.github.com/users/hoechenberger/orgs", "repos_url": "https://api.github.com/users/hoechenberger/repos", "events_url": "https://api.github.com/users/hoechenberger/events{/privacy}", "received_events_url": "https://api.github.com/users/hoechenberger/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "hoechenberger", "id": 2046265, "node_id": "MDQ6VXNlcjIwNDYyNjU=", "avatar_url": "https://avatars.githubusercontent.com/u/2046265?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hoechenberger", "html_url": "https://github.com/hoechenberger", "followers_url": "https://api.github.com/users/hoechenberger/followers", "following_url": "https://api.github.com/users/hoechenberger/following{/other_user}", "gists_url": "https://api.github.com/users/hoechenberger/gists{/gist_id}", "starred_url": "https://api.github.com/users/hoechenberger/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hoechenberger/subscriptions", "organizations_url": "https://api.github.com/users/hoechenberger/orgs", "repos_url": "https://api.github.com/users/hoechenberger/repos", "events_url": "https://api.github.com/users/hoechenberger/events{/privacy}", "received_events_url": "https://api.github.com/users/hoechenberger/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 1, "created_at": "2022-06-19T19:50:04Z", "updated_at": "2022-06-20T11:02:35Z", "closed_at": "2022-06-20T11:02:35Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "`plot_alignment()` is IMHO doing the right thing, and `plot_field()` is just bein drunk \ud83e\udd74\r\n\r\n\r\n\r\nhttps://user-images.githubusercontent.com/2046265/174497954-c2f37a82-a9bf-4399-86e5-8eb36fb1d7ee.mov\r\n\r\n\r\n\r\nMWE:\r\n```python\r\n# %%\r\nimport mne\r\n\r\nsample_dir = mne.datasets.sample.data_path()\r\nsample_fname = sample_dir / 'MEG' / 'sample' / 'sample_audvis_raw.fif'\r\ntrans_fname = sample_dir / 'MEG' / 'sample' / 'sample_audvis_raw-trans.fif'\r\nfs_subjects_dir = sample_dir / 'subjects'\r\nfs_subject = 'sample'\r\n\r\nraw = mne.io.read_raw_fif(sample_fname)\r\nraw.crop(tmax=60)\r\n\r\nevents = mne.find_events(raw, stim_channel='STI 014')\r\nevent_id = {'auditory/left': 1, 'auditory/right': 2, 'visual/left': 3,\r\n            'visual/right': 4, 'face': 5, 'buttonpress': 32}\r\n\r\nepochs = mne.Epochs(raw, events=events, event_id=event_id,\r\n                    tmin=-0.2, tmax=0.5, baseline=(None, 0),\r\n                    preload=True)\r\nevoked = epochs.average()\r\nevoked.pick_types(eeg=True)\r\n\r\ntrans = mne.read_trans(trans_fname)\r\n\r\nfield_maps = mne.make_field_map(\r\n    evoked=evoked,\r\n    trans=trans,\r\n    subject=fs_subject,\r\n    subjects_dir=fs_subjects_dir,\r\n)\r\n\r\nevoked.plot_field(\r\n    surf_maps=field_maps\r\n)\r\nmne.viz.plot_alignment(\r\n    info=evoked.info,\r\n    trans=trans,\r\n    subject=fs_subject,\r\n    subjects_dir=fs_subjects_dir,\r\n    surfaces=['head']\r\n)", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/10786/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10786/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/10784", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10784/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10784/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10784/events", "html_url": "https://github.com/mne-tools/mne-python/issues/10784", "id": 1276143707, "node_id": "I_kwDOABPcUM5MEGhb", "number": 10784, "title": "trans parameter in make_field_map() should accept Path; docstring needs fixing", "user": {"login": "hoechenberger", "id": 2046265, "node_id": "MDQ6VXNlcjIwNDYyNjU=", "avatar_url": "https://avatars.githubusercontent.com/u/2046265?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hoechenberger", "html_url": "https://github.com/hoechenberger", "followers_url": "https://api.github.com/users/hoechenberger/followers", "following_url": "https://api.github.com/users/hoechenberger/following{/other_user}", "gists_url": "https://api.github.com/users/hoechenberger/gists{/gist_id}", "starred_url": "https://api.github.com/users/hoechenberger/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hoechenberger/subscriptions", "organizations_url": "https://api.github.com/users/hoechenberger/orgs", "repos_url": "https://api.github.com/users/hoechenberger/repos", "events_url": "https://api.github.com/users/hoechenberger/events{/privacy}", "received_events_url": "https://api.github.com/users/hoechenberger/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 23192531, "node_id": "MDU6TGFiZWwyMzE5MjUzMQ==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/ENH", "name": "ENH", "color": "d7e102", "default": false, "description": null}, {"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}, {"id": 77061445, "node_id": "MDU6TGFiZWw3NzA2MTQ0NQ==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/EASY", "name": "EASY", "color": "2be2d6", "default": false, "description": ""}, {"id": 4145355453, "node_id": "LA_kwDOABPcUM73FRq9", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/sprint-2022", "name": "sprint-2022", "color": "2C7B79", "default": false, "description": "Issues reserved for the 2022 New Developers Code Sprint"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2022-06-19T19:11:05Z", "updated_at": "2022-08-23T11:45:10Z", "closed_at": "2022-08-23T11:45:10Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "Currently only accepts a str, which can be a path or `'auto'`; the behavior of the latter is not documented.\r\n\r\nPath should not be a str either, but `path-like`, so this needs fixing too.", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/10784/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10784/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/10759", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10759/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10759/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10759/events", "html_url": "https://github.com/mne-tools/mne-python/issues/10759", "id": 1270939789, "node_id": "I_kwDOABPcUM5LwQCN", "number": 10759, "title": "BUG: Test failures on M1 with BLAS from conda-forge", "user": {"login": "larsoner", "id": 2365790, "node_id": "MDQ6VXNlcjIzNjU3OTA=", "avatar_url": "https://avatars.githubusercontent.com/u/2365790?v=4", "gravatar_id": "", "url": "https://api.github.com/users/larsoner", "html_url": "https://github.com/larsoner", "followers_url": "https://api.github.com/users/larsoner/followers", "following_url": "https://api.github.com/users/larsoner/following{/other_user}", "gists_url": "https://api.github.com/users/larsoner/gists{/gist_id}", "starred_url": "https://api.github.com/users/larsoner/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/larsoner/subscriptions", "organizations_url": "https://api.github.com/users/larsoner/orgs", "repos_url": "https://api.github.com/users/larsoner/repos", "events_url": "https://api.github.com/users/larsoner/events{/privacy}", "received_events_url": "https://api.github.com/users/larsoner/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/mne-tools/mne-python/milestones/22", "html_url": "https://github.com/mne-tools/mne-python/milestone/22", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/milestones/22/labels", "id": 7668967, "node_id": "MI_kwDOABPcUM4AdQTn", "number": 22, "title": "1.1", "description": "", "creator": {"login": "larsoner", "id": 2365790, "node_id": "MDQ6VXNlcjIzNjU3OTA=", "avatar_url": "https://avatars.githubusercontent.com/u/2365790?v=4", "gravatar_id": "", "url": "https://api.github.com/users/larsoner", "html_url": "https://github.com/larsoner", "followers_url": "https://api.github.com/users/larsoner/followers", "following_url": "https://api.github.com/users/larsoner/following{/other_user}", "gists_url": "https://api.github.com/users/larsoner/gists{/gist_id}", "starred_url": "https://api.github.com/users/larsoner/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/larsoner/subscriptions", "organizations_url": "https://api.github.com/users/larsoner/orgs", "repos_url": "https://api.github.com/users/larsoner/repos", "events_url": "https://api.github.com/users/larsoner/events{/privacy}", "received_events_url": "https://api.github.com/users/larsoner/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 44, "state": "closed", "created_at": "2022-02-11T18:37:55Z", "updated_at": "2022-08-03T21:38:27Z", "due_on": "2022-06-13T07:00:00Z", "closed_at": "2022-08-03T21:38:27Z"}, "comments": 32, "created_at": "2022-06-14T14:57:28Z", "updated_at": "2022-07-27T14:20:42Z", "closed_at": "2022-07-27T14:00:21Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "In working on https://github.com/mne-tools/mne-python/pull/10756 on my M1 I had some test failures related to beamforming. Before we release 1.1 we should fix these. I hopefully will be able to look+fix today.\r\n\r\nI'm a bit worried it might be an upstream OpenBLAS bug, which means ideally we'd wait for them to fix something, then NumPy/SciPy to release, then we use the latest version only on M1 :( But if that turns out to be the case, it's possible we can find some workaround, like using a different/slower lapack driver on M1 than the default or something. We'll see!\r\n\r\nThis is the sad downside of all of these repos not having proper arm64 testing on CIs :(", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/10759/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10759/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/10757", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10757/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10757/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10757/events", "html_url": "https://github.com/mne-tools/mne-python/issues/10757", "id": 1270119290, "node_id": "I_kwDOABPcUM5LtHt6", "number": 10757, "title": "After loading from file, CrossSpectralDensity.projs are a list of dicts rather than a list of Projections", "user": {"login": "jhouck", "id": 857583, "node_id": "MDQ6VXNlcjg1NzU4Mw==", "avatar_url": "https://avatars.githubusercontent.com/u/857583?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jhouck", "html_url": "https://github.com/jhouck", "followers_url": "https://api.github.com/users/jhouck/followers", "following_url": "https://api.github.com/users/jhouck/following{/other_user}", "gists_url": "https://api.github.com/users/jhouck/gists{/gist_id}", "starred_url": "https://api.github.com/users/jhouck/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jhouck/subscriptions", "organizations_url": "https://api.github.com/users/jhouck/orgs", "repos_url": "https://api.github.com/users/jhouck/repos", "events_url": "https://api.github.com/users/jhouck/events{/privacy}", "received_events_url": "https://api.github.com/users/jhouck/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}, {"id": 4145355453, "node_id": "LA_kwDOABPcUM73FRq9", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/sprint-2022", "name": "sprint-2022", "color": "2C7B79", "default": false, "description": "Issues reserved for the 2022 New Developers Code Sprint"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/mne-tools/mne-python/milestones/23", "html_url": "https://github.com/mne-tools/mne-python/milestone/23", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/milestones/23/labels", "id": 8047399, "node_id": "MI_kwDOABPcUM4Aessn", "number": 23, "title": "1.2", "description": "", "creator": {"login": "hoechenberger", "id": 2046265, "node_id": "MDQ6VXNlcjIwNDYyNjU=", "avatar_url": "https://avatars.githubusercontent.com/u/2046265?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hoechenberger", "html_url": "https://github.com/hoechenberger", "followers_url": "https://api.github.com/users/hoechenberger/followers", "following_url": "https://api.github.com/users/hoechenberger/following{/other_user}", "gists_url": "https://api.github.com/users/hoechenberger/gists{/gist_id}", "starred_url": "https://api.github.com/users/hoechenberger/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hoechenberger/subscriptions", "organizations_url": "https://api.github.com/users/hoechenberger/orgs", "repos_url": "https://api.github.com/users/hoechenberger/repos", "events_url": "https://api.github.com/users/hoechenberger/events{/privacy}", "received_events_url": "https://api.github.com/users/hoechenberger/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 71, "state": "closed", "created_at": "2022-06-03T17:43:37Z", "updated_at": "2022-10-11T20:15:01Z", "due_on": "2022-09-01T07:00:00Z", "closed_at": "2022-10-11T20:15:01Z"}, "comments": 3, "created_at": "2022-06-14T00:52:59Z", "updated_at": "2022-08-23T12:22:03Z", "closed_at": "2022-08-23T12:22:03Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "In mne 1.1.dev0 it looks like there's an issue with saving/reloading a CrossSpectralDensity object that has SSP vectors. After reloading from a hdf5 file, csd.projs is a list of dicts rather than a list of Projectors. Using that with e.g. `mne.beamformer.make_dics` would return the TypeError: All entries in projs list must be Projection instances, but projs[0] is type <class 'dict'>\r\n\r\nFor example using the sample data: \r\n\r\n````\r\nimport mne\r\nprint(mne.__version__)\r\nfrom mne.datasets import sample\r\nfrom mne.time_frequency import csd_fourier\r\nfrom mne.preprocessing import compute_proj_ecg\r\ndata_path = sample.data_path()\r\nmeg_path = data_path / 'MEG' / 'sample'\r\nfname_raw = meg_path / 'sample_audvis_raw.fif'\r\nfname_event = meg_path / 'sample_audvis_raw-eve.fif'\r\nfname_csd = '/tmp/csd_test'\r\nn_jobs = 16\r\n\r\nraw = mne.io.read_raw_fif(fname_raw)\r\nevents = mne.find_events(raw)\r\npicks = mne.pick_types(raw.info, meg='grad')\r\nprojs, ecg_events = compute_proj_ecg(raw, n_grad=1, n_mag=1, n_eeg=1, reject=None)\r\nraw.add_proj(projs)\r\nepochs = mne.Epochs(raw, events, event_id=1, tmin=-0.2, tmax=1,\r\n                    picks=picks, baseline=(None, 0),\r\n                    reject=dict(grad=4000e-13), preload=True)\r\ncsd = csd_fourier(epochs, fmin=15, fmax=20, n_jobs=n_jobs)\r\ncsd.save(fname_csd, overwrite=True)\r\ncsd_test = mne.time_frequency.read_csd(fname_csd)\r\nprint(type(csd.projs[0]))\r\nprint(type(csd_test.projs[0]))\r\n````\r\n\r\nAs you can see, the original csd.projs is an mne.io.proj.Projection, while after reloading it is a dict. It's easy enough to convert this dict back to an Projection via\r\n````\r\ntestproj = mne.io.proj.Projection(data=csd_test.projs[0]['data'], desc=csd_test.projs[0]['desc'],\r\n                                  kind=csd_test.projs[0]['kind'], active=csd_test.projs[0]['active'],\r\n                                  explained_var=csd_test.projs[0]['explained_var'])\r\ncsd_test.projs=[testproj]\r\nprint(type(csd_test.projs[0]))\r\n````\r\nbut this introduces more opportunities for things to go wrong.\r\n\r\nAnd maybe an issue for a separate... issue, there is also a problem saving/loading hdf5 files when the filename is a pathlib.Path object.   For example:\r\n````\r\nimport pathlib\r\nfname_csd = pathlib.Path('/tmp/csd_test')\r\ncsd_test = mne.time_frequency.read_csd(fname_csd)\r\n````\r\nWill get you the message 'PosixPath' object has no attribute 'endswith', which is coming from this bit in `_import_h5io_funcs`:\r\n````\r\nif not fname.endswith('.h5'):\r\n    fname += '.h5'\r\n````\r\nThe easy workaround is to load the file using `csd_test = mne.time_frequency.read_csd(str(fname_csd))` but this probably defeats the purpose of Path.\r\n\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/10757/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10757/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/10738", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10738/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10738/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10738/events", "html_url": "https://github.com/mne-tools/mne-python/issues/10738", "id": 1268241287, "node_id": "I_kwDOABPcUM5Ll9OH", "number": 10738, "title": "montage_sgskip.py example doesn't run", "user": {"login": "hoechenberger", "id": 2046265, "node_id": "MDQ6VXNlcjIwNDYyNjU=", "avatar_url": "https://avatars.githubusercontent.com/u/2046265?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hoechenberger", "html_url": "https://github.com/hoechenberger", "followers_url": "https://api.github.com/users/hoechenberger/followers", "following_url": "https://api.github.com/users/hoechenberger/following{/other_user}", "gists_url": "https://api.github.com/users/hoechenberger/gists{/gist_id}", "starred_url": "https://api.github.com/users/hoechenberger/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hoechenberger/subscriptions", "organizations_url": "https://api.github.com/users/hoechenberger/orgs", "repos_url": "https://api.github.com/users/hoechenberger/repos", "events_url": "https://api.github.com/users/hoechenberger/events{/privacy}", "received_events_url": "https://api.github.com/users/hoechenberger/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 40091538, "node_id": "MDU6TGFiZWw0MDA5MTUzOA==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/DOC", "name": "DOC", "color": "009800", "default": false, "description": null}, {"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2022-06-11T11:30:51Z", "updated_at": "2022-06-12T08:13:09Z", "closed_at": "2022-06-12T08:13:09Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "When trying to run the example in `examples/visualization/montage_sgskip.py`, I get an exception:\r\n\r\n```python\r\nValueError: A head<->mri transformation matrix (trans) is required to plot head surfaces in head coordinates, `trans=None` is not allowed\r\n```\r\nIt runs if I pass `trans='fsaverage'` but I'm not sure this is how this example intended to behave (as the BEM is based on a sphere here).\r\n\r\n@agramfort care to take a look?", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/10738/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10738/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/10700", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10700/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10700/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10700/events", "html_url": "https://github.com/mne-tools/mne-python/issues/10700", "id": 1257867553, "node_id": "I_kwDOABPcUM5K-Ykh", "number": 10700, "title": "Missing values in epochs metadata are not handled correctly", "user": {"login": "cbrnr", "id": 4377312, "node_id": "MDQ6VXNlcjQzNzczMTI=", "avatar_url": "https://avatars.githubusercontent.com/u/4377312?v=4", "gravatar_id": "", "url": "https://api.github.com/users/cbrnr", "html_url": "https://github.com/cbrnr", "followers_url": "https://api.github.com/users/cbrnr/followers", "following_url": "https://api.github.com/users/cbrnr/following{/other_user}", "gists_url": "https://api.github.com/users/cbrnr/gists{/gist_id}", "starred_url": "https://api.github.com/users/cbrnr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/cbrnr/subscriptions", "organizations_url": "https://api.github.com/users/cbrnr/orgs", "repos_url": "https://api.github.com/users/cbrnr/repos", "events_url": "https://api.github.com/users/cbrnr/events{/privacy}", "received_events_url": "https://api.github.com/users/cbrnr/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 13, "created_at": "2022-06-02T08:30:06Z", "updated_at": "2022-06-07T14:20:16Z", "closed_at": "2022-06-07T14:20:16Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "I often have a column in my epochs metadata which indicates if a given response was correct or not. I thought that a boolean data type was appropriate, but because I also have missing values (if no response was given) I use the [`\"boolean\"` nullable dtype](https://pandas.pydata.org/docs/user_guide/boolean.html). However, indexing with such a dtype throws an error (even though the corresponding query works):\r\n\r\n```python\r\nimport mne\r\nimport numpy as np\r\nimport pandas as pd\r\nfrom random import choices\r\n\r\nn_epochs, n_chans, n_samples = 100, 32, 1001\r\ncorrect = pd.Series(choices([True, False, None], k=n_epochs), dtype=\"boolean\")\r\nmetadata = pd.DataFrame({\"correct\": correct})\r\nrng = np.random.default_rng()\r\nepochs = mne.EpochsArray(\r\n    data=rng.standard_normal(size=(n_epochs, n_chans, n_samples)),\r\n    info=mne.create_info(n_chans, 500, \"eeg\"),\r\n    metadata=metadata\r\n)\r\n\r\nmetadata.query(\"correct\")  # this works\r\nepochs[\"correct\"]  # this doesn't work\r\n```\r\n\r\nThe error prints a long stack trace:\r\n\r\n<details>\r\n\r\n```\r\n---------------------------------------------------------------------------\r\nKeyError                                  Traceback (most recent call last)\r\nFile ~/Repositories/mne-python/mne/utils/mixin.py:242, in GetEpochsMixin._keys_to_idx(self, keys)\r\n    238 try:\r\n    239     # Assume it's a condition name\r\n    240     return np.where(np.any(\r\n    241         np.array([self.events[:, 2] == self.event_id[k]\r\n--> 242                   for k in match_event_names(self.event_id, keys)]),\r\n    243         axis=0))[0]\r\n    244 except KeyError as err:\r\n    245     # Could we in principle use metadata with these Epochs and keys?\r\n\r\nFile ~/Repositories/mne-python/mne/event.py:1493, in match_event_names(event_names, keys, on_missing)\r\n   1492 if not matches:\r\n-> 1493     _on_missing(\r\n   1494         on_missing=on_missing,\r\n   1495         msg=f'Event name \"{key}\" could not be found. The following events '\r\n   1496             f'are present in the data: {\", \".join(event_names)}',\r\n   1497         error_klass=KeyError\r\n   1498     )\r\n   1500 matches = sorted(set(matches))  # deduplicate if necessary\r\n\r\nFile ~/Repositories/mne-python/mne/utils/check.py:901, in _on_missing(on_missing, msg, name, error_klass)\r\n    900 if on_missing == 'raise':\r\n--> 901     raise error_klass(msg)\r\n    902 elif on_missing == 'warn':\r\n\r\nKeyError: 'Event name \"correct\" could not be found. The following events are present in the data: 1'\r\n\r\nDuring handling of the above exception, another exception occurred:\r\n\r\nTypeError                                 Traceback (most recent call last)\r\nInput In [40], in <cell line: 1>()\r\n----> 1 epochs[\"correct\"]\r\n\r\nFile ~/Repositories/mne-python/mne/utils/mixin.py:144, in GetEpochsMixin.__getitem__(self, item)\r\n     78 def __getitem__(self, item):\r\n     79     \"\"\"Return an Epochs object with a copied subset of epochs.\r\n     80 \r\n     81     Parameters\r\n   (...)\r\n    142        .. versionadded:: 0.16\r\n    143     \"\"\"\r\n--> 144     return self._getitem(item)\r\n\r\nFile ~/Repositories/mne-python/mne/utils/mixin.py:195, in GetEpochsMixin._getitem(***failed resolving arguments***)\r\n    192 self._data = inst._data = data\r\n    193 del self\r\n--> 195 select = inst._item_to_select(item)\r\n    196 has_selection = hasattr(inst, 'selection')\r\n    197 if has_selection:\r\n\r\nFile ~/Repositories/mne-python/mne/utils/mixin.py:153, in GetEpochsMixin._item_to_select(self, item)\r\n    150 # Convert string to indices\r\n    151 if isinstance(item, (list, tuple)) and len(item) > 0 and \\\r\n    152         isinstance(item[0], str):\r\n--> 153     select = self._keys_to_idx(item)\r\n    154 elif isinstance(item, slice):\r\n    155     select = item\r\n\r\nFile ~/Repositories/mne-python/mne/utils/mixin.py:262, in GetEpochsMixin._keys_to_idx(self, keys)\r\n    259         msg += (' The epochs.metadata Pandas query did not '\r\n    260                 'yield any results: %s' % (exp.args[0],))\r\n    261     else:\r\n--> 262         return np.where(mask)[0]\r\n    263 else:\r\n    264     # If not, warn this might be a problem\r\n    265     msg += (' The epochs.metadata Pandas query could not '\r\n    266             'be performed, consider installing Pandas.')\r\n\r\nFile <__array_function__ internals>:180, in where(*args, **kwargs)\r\n\r\nFile pandas/_libs/missing.pyx:382, in pandas._libs.missing.NAType.__bool__()\r\n\r\nTypeError: boolean value of NA is ambiguous\r\n```\r\n\r\n</details>\r\n\r\nIs this something we should support? Or should I just go back to using an `object` dtype column (which would mean more verbose indexing such as `epochs[\"correct == 'True'\"]`)?\r\n", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/10700/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10700/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/10696", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10696/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10696/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10696/events", "html_url": "https://github.com/mne-tools/mne-python/issues/10696", "id": 1256291068, "node_id": "I_kwDOABPcUM5K4Xr8", "number": 10696, "title": "n_jobs=-1 returns a zero array when computing cross spectral density", "user": {"login": "StanSStanman", "id": 26648765, "node_id": "MDQ6VXNlcjI2NjQ4NzY1", "avatar_url": "https://avatars.githubusercontent.com/u/26648765?v=4", "gravatar_id": "", "url": "https://api.github.com/users/StanSStanman", "html_url": "https://github.com/StanSStanman", "followers_url": "https://api.github.com/users/StanSStanman/followers", "following_url": "https://api.github.com/users/StanSStanman/following{/other_user}", "gists_url": "https://api.github.com/users/StanSStanman/gists{/gist_id}", "starred_url": "https://api.github.com/users/StanSStanman/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/StanSStanman/subscriptions", "organizations_url": "https://api.github.com/users/StanSStanman/orgs", "repos_url": "https://api.github.com/users/StanSStanman/repos", "events_url": "https://api.github.com/users/StanSStanman/events{/privacy}", "received_events_url": "https://api.github.com/users/StanSStanman/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2022-06-01T15:29:12Z", "updated_at": "2022-06-02T15:42:54Z", "closed_at": "2022-06-02T15:42:54Z", "author_association": "NONE", "active_lock_reason": null, "body": "#### Describe the bug\r\nHi, I'm using the mne.time_frequency.csd_multitaper() function to compute the CSD on MEG data, and I realized that the resulting array was a type complex128 filled with zeros. Same when I tried the csd_morlet() function. \r\nThen I noticed that the bug was present only if I used as argument n_jobs=-1.\r\n\r\nChecking inside the code, the bug comes from this line:\r\nhttps://github.com/mne-tools/mne-python/blob/9e4a0b492299d3638203e2e6d2264ea445b13ac0/mne/time_frequency/csd.py#L1153\r\nwhere n_jobs should be returned instead of _, in order to set the number of threads according to multiprocessing.cpu_count(), as stated in the control function:\r\nhttps://github.com/mne-tools/mne-python/blob/9e4a0b492299d3638203e2e6d2264ea445b13ac0/mne/parallel.py#L138\r\n\r\n\r\n#### Steps to reproduce\r\nTo reproduce the error you can replicate the [Compute a cross-spectral density (CSD) matrix](https://mne.tools/dev/auto_examples/time_frequency/compute_csd.html#sphx-glr-auto-examples-time-frequency-compute-csd-py) in the documentation, changing the line `n_jobs = 1`\r\nto \r\n`n_jobs = -1`\r\n\r\n\r\n#### Expected results\r\nA [CrossSpectralDensity](https://mne.tools/dev/generated/mne.time_frequency.CrossSpectralDensity.html#mne.time_frequency.CrossSpectralDensity.plot) object containing the CSD array filled with type complex128 values.\r\n\r\n\r\n#### Actual results\r\nA [CrossSpectralDensity](https://mne.tools/dev/generated/mne.time_frequency.CrossSpectralDensity.html#mne.time_frequency.CrossSpectralDensity.plot) object containing an array filled with type complex128 zeros.\r\n\r\n\r\n#### Additional information\r\nNo additional information.\r\nI can make a pull request if needed.\r\n\r\n\r\nThank you in advance!", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/10696/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10696/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/10695", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10695/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10695/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10695/events", "html_url": "https://github.com/mne-tools/mne-python/issues/10695", "id": 1256265036, "node_id": "I_kwDOABPcUM5K4RVM", "number": 10695, "title": "bad indentation in docstring of AverageTFR.plot()", "user": {"login": "drammock", "id": 1810515, "node_id": "MDQ6VXNlcjE4MTA1MTU=", "avatar_url": "https://avatars.githubusercontent.com/u/1810515?v=4", "gravatar_id": "", "url": "https://api.github.com/users/drammock", "html_url": "https://github.com/drammock", "followers_url": "https://api.github.com/users/drammock/followers", "following_url": "https://api.github.com/users/drammock/following{/other_user}", "gists_url": "https://api.github.com/users/drammock/gists{/gist_id}", "starred_url": "https://api.github.com/users/drammock/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/drammock/subscriptions", "organizations_url": "https://api.github.com/users/drammock/orgs", "repos_url": "https://api.github.com/users/drammock/repos", "events_url": "https://api.github.com/users/drammock/events{/privacy}", "received_events_url": "https://api.github.com/users/drammock/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}, {"id": 4145355453, "node_id": "LA_kwDOABPcUM73FRq9", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/sprint-2022", "name": "sprint-2022", "color": "2C7B79", "default": false, "description": "Issues reserved for the 2022 New Developers Code Sprint"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2022-06-01T15:17:53Z", "updated_at": "2022-08-22T22:52:15Z", "closed_at": "2022-08-22T22:52:15Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "Two of the `versionadded` admonitions are indented when they shouldn't be.\r\n\r\n![Screenshot 2022-06-01 at 10-15-47 mne time_frequency AverageTFR \u2014 MNE 1 1 dev0 documentation](https://user-images.githubusercontent.com/1810515/171439459-fae01e08-ad0d-4241-b662-7d20fa4eff6c.png)\r\n", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/10695/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10695/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/10675", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10675/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10675/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10675/events", "html_url": "https://github.com/mne-tools/mne-python/issues/10675", "id": 1248097212, "node_id": "I_kwDOABPcUM5KZHO8", "number": 10675, "title": "How to implement two-tailed permutation_cluster_test", "user": {"login": "guoyongjian111", "id": 82032571, "node_id": "MDQ6VXNlcjgyMDMyNTcx", "avatar_url": "https://avatars.githubusercontent.com/u/82032571?v=4", "gravatar_id": "", "url": "https://api.github.com/users/guoyongjian111", "html_url": "https://github.com/guoyongjian111", "followers_url": "https://api.github.com/users/guoyongjian111/followers", "following_url": "https://api.github.com/users/guoyongjian111/following{/other_user}", "gists_url": "https://api.github.com/users/guoyongjian111/gists{/gist_id}", "starred_url": "https://api.github.com/users/guoyongjian111/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/guoyongjian111/subscriptions", "organizations_url": "https://api.github.com/users/guoyongjian111/orgs", "repos_url": "https://api.github.com/users/guoyongjian111/repos", "events_url": "https://api.github.com/users/guoyongjian111/events{/privacy}", "received_events_url": "https://api.github.com/users/guoyongjian111/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2022-05-25T13:27:05Z", "updated_at": "2022-05-25T14:17:11Z", "closed_at": "2022-05-25T14:16:09Z", "author_association": "NONE", "active_lock_reason": null, "body": "    tail = 0  \r\n    t_obs, clusters, cluster_p_values, h0 = permutation_cluster_test([pac1, pac2],n_permutations=n_perm,tail=tail)\r\nmy data shape \uff1apac1=29 * 21 * 14, pac2=39 * 21 * 14\r\nRuntimeWarning: Ignoring argument \"tail\", performing 1-tailed F-test\r\n  t_obs, clusters, cluster_p_values, h0 = permutation_cluster_test([pac1, pac2],n_permutations=n_perm)\r\nDoes anyone know why, and how to implement a two-tailed permutation_cluster_test\uff0cthanks", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/10675/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10675/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/10657", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10657/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10657/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10657/events", "html_url": "https://github.com/mne-tools/mne-python/issues/10657", "id": 1243355146, "node_id": "I_kwDOABPcUM5KHBgK", "number": 10657, "title": "Inconsistency in ICA matrix shapes between ICA loaded from EEGLAB and fitted in MNE", "user": {"login": "mscheltienne", "id": 73893616, "node_id": "MDQ6VXNlcjczODkzNjE2", "avatar_url": "https://avatars.githubusercontent.com/u/73893616?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mscheltienne", "html_url": "https://github.com/mscheltienne", "followers_url": "https://api.github.com/users/mscheltienne/followers", "following_url": "https://api.github.com/users/mscheltienne/following{/other_user}", "gists_url": "https://api.github.com/users/mscheltienne/gists{/gist_id}", "starred_url": "https://api.github.com/users/mscheltienne/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mscheltienne/subscriptions", "organizations_url": "https://api.github.com/users/mscheltienne/orgs", "repos_url": "https://api.github.com/users/mscheltienne/repos", "events_url": "https://api.github.com/users/mscheltienne/events{/privacy}", "received_events_url": "https://api.github.com/users/mscheltienne/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2022-05-20T16:02:00Z", "updated_at": "2022-05-21T14:11:43Z", "closed_at": "2022-05-21T14:11:43Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "I noticed this issue today, you can reproduce it below with a 32 channels raw and a 25 components ICA.\r\n\r\n```\r\nfrom mne.datasets import sample, testing\r\nfrom mne.io import read_raw_eeglab, read_raw_fif\r\nfrom mne.preprocessing import read_ica_eeglab, ICA\r\n\r\ntest_base_dir = testing.data_path(download=False)\r\n\r\n# Load raw and ICA from EEGLAB\r\nfname = testing.data_path(download=False) / \"EEGLAB\" / \"test_raw.set\"\r\nraw1 = read_raw_eeglab(fname, preload=True)\r\nica1 = read_ica_eeglab(fname)\r\nn_ch = len(raw1.ch_names)  # 32\r\nn_components = ica1.n_components  # 25\r\n\r\n# Fit an ICA with same n_ch and n_components\r\nfname = sample.data_path(download=False) / 'MEG' / 'sample' / 'sample_audvis_raw.fif'\r\nraw2 = read_raw_fif(fname)\r\nraw2.pick_types(eeg=True)\r\nraw2.pick_channels(raw2.ch_names[:n_ch])\r\nraw2.load_data()\r\nraw2.filter(1., 40.)\r\nica2 = ICA(n_components=n_components, method='picard')\r\nica2.fit(raw2)\r\n\r\n# Compare\r\nassert ica1.unmixing_matrix_.shape == ica2.unmixing_matrix_.shape\r\nassert ica1.pre_whitener_.shape == ica2.pre_whitener_.shape\r\nassert ica1.pca_mean_.shape == ica2.pca_mean_.shape\r\n\r\n# fails:\r\nassert ica1.pca_components_.shape == ica2.pca_components_.shape\r\n# ica1: (25, 32) --- ica2: (32, 32)\r\nassert ica1.pca_explained_variance_.shape == ica2.pca_explained_variance_.shape\r\n# ica1: (25,)    --- ica2: (32,)\r\n```\r\n\r\nProbably a problem here: https://github.com/mne-tools/mne-python/blob/965521831b5ca8675becc0cc9716db0cfc8ad946/mne/preprocessing/ica.py#L2830-L2848", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/10657/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10657/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/10644", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10644/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10644/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10644/events", "html_url": "https://github.com/mne-tools/mne-python/issues/10644", "id": 1238982658, "node_id": "I_kwDOABPcUM5J2WAC", "number": 10644, "title": "[BUG] Memory Leak for `read_raw_edf` with TAL data (~20 GB)", "user": {"login": "alexrockhill", "id": 13473576, "node_id": "MDQ6VXNlcjEzNDczNTc2", "avatar_url": "https://avatars.githubusercontent.com/u/13473576?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alexrockhill", "html_url": "https://github.com/alexrockhill", "followers_url": "https://api.github.com/users/alexrockhill/followers", "following_url": "https://api.github.com/users/alexrockhill/following{/other_user}", "gists_url": "https://api.github.com/users/alexrockhill/gists{/gist_id}", "starred_url": "https://api.github.com/users/alexrockhill/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alexrockhill/subscriptions", "organizations_url": "https://api.github.com/users/alexrockhill/orgs", "repos_url": "https://api.github.com/users/alexrockhill/repos", "events_url": "https://api.github.com/users/alexrockhill/events{/privacy}", "received_events_url": "https://api.github.com/users/alexrockhill/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2022-05-17T17:58:49Z", "updated_at": "2022-05-17T18:57:33Z", "closed_at": "2022-05-17T18:57:32Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Unfortunately, I can't share a minimally reproducible example because the problem stems from having a very large file. Interestingly, this was not a problem on a MacOS system, the file loaded with `preload=False` just fine. The issue is that when I go to read the file, I get > 16 GB of RAM usage. Here is the output of mne sys_info on the system:\r\n\r\n```\r\nPlatform:         Linux-5.4.0-110-generic-x86_64-with-glibc2.27\r\nPython:           3.10.4 | packaged by conda-forge | (main, Mar 24 2022, 17:38:57) [GCC 10.3.0]\r\nExecutable:       /home/alex/software/anaconda3/envs/mne/bin/python3.1\r\nCPU:              x86_64: 4 cores\r\nMemory:           15.5 GB\r\nmne:              1.1.dev0\r\nnumpy:            1.21.5 {blas=NO_ATLAS_INFO, lapack=lapack}\r\nscipy:            1.8.0\r\nmatplotlib:       3.5.1 {backend=QtAgg}\r\nsklearn:          1.0.2\r\nnumba:            0.55.1\r\nnibabel:          3.2.2\r\nnilearn:          0.9.0\r\ndipy:             1.5.0\r\ncupy:             Not found\r\npandas:           1.4.1\r\npyvista:          0.33.3 {OpenGL 4.5.0 NVIDIA 515.43.04 via NVIDIA GeForce RTX 2070/PCIe/SSE2}\r\npyvistaqt:        0.7.0\r\nipyvtklink:       0.2.2\r\nvtk:              9.1.0\r\nqtpy:             2.0.1 {PyQt5=5.12.9}\r\nipympl:           Not found\r\npyqtgraph:        0.12.4\r\npooch:            v1.6.0\r\nmne_bids:         0.11.dev0\r\nmne_nirs:         Not found\r\nmne_features:     Not found\r\nmne_qt_browser:   0.2.5\r\nmne_connectivity: Not found\r\nmne_icalabel:     Not found\r\n```\r\n\r\n\r\nOne of the things I'm curious about is what's going on here: https://github.com/mne-tools/mne-python/blob/main/mne/io/edf/edf.py#L310-L337, it looks like the only thing being returned is the `tal_data` but yet there are these other computations with the channel data. These don't seem to get returned and I'm not sure if they are supposed to modify something in place or what. Maybe @sappelhoff or @cbrnr knows?", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/10644/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10644/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/10634", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10634/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10634/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10634/events", "html_url": "https://github.com/mne-tools/mne-python/issues/10634", "id": 1236981277, "node_id": "I_kwDOABPcUM5JutYd", "number": 10634, "title": "Reading large EDF files with preload = False raises memory error", "user": {"login": "arnaumanasanch", "id": 71005460, "node_id": "MDQ6VXNlcjcxMDA1NDYw", "avatar_url": "https://avatars.githubusercontent.com/u/71005460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/arnaumanasanch", "html_url": "https://github.com/arnaumanasanch", "followers_url": "https://api.github.com/users/arnaumanasanch/followers", "following_url": "https://api.github.com/users/arnaumanasanch/following{/other_user}", "gists_url": "https://api.github.com/users/arnaumanasanch/gists{/gist_id}", "starred_url": "https://api.github.com/users/arnaumanasanch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/arnaumanasanch/subscriptions", "organizations_url": "https://api.github.com/users/arnaumanasanch/orgs", "repos_url": "https://api.github.com/users/arnaumanasanch/repos", "events_url": "https://api.github.com/users/arnaumanasanch/events{/privacy}", "received_events_url": "https://api.github.com/users/arnaumanasanch/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 11, "created_at": "2022-05-16T11:01:30Z", "updated_at": "2022-05-17T16:03:24Z", "closed_at": "2022-05-17T16:03:24Z", "author_association": "NONE", "active_lock_reason": null, "body": "#### Issue/Bug\r\nWhen reading in an IPython notebook a large .edf file which is 10Gb size (4 hours/ 150 channels/ 2048Hz sampling frequency) with:\r\n\r\n`raw_edf = mne.io.read_raw_edf('file.edf', preload=False)`\r\n\r\nthe kernel crashes as the RAM memory, which is 12 Gb, gets full.\r\n\r\nI thought the preload argument was loading only metadata (which should not be more than a few hundred Mbs).\r\n\r\nWould there be a way in which I could read the raw_edf (only the metadata) and then with the get_data() method, be able to just load into memory a small piece of data (n channels and x time range) without the system failing because of the RAM being full?\r\n\r\nIf I try the same with a higher RAM (32Gb), there is no problem and once it is loaded, the RAM goes back to normal (e.g: before loading it is 1Gb, when loading it goes up to 15Gb, once loaded back to 1 Gb approx.). We need to make it functional, if possible, with the 12 Gb RAM.\r\n\r\nFor privacy reasons, I can\u2019t share the file that I am using.\r\n\r\nThanks in advance. \r\n\r\n#### Additional information\r\nMNE version: e.g. 1.0.3\r\noperating system: / Windows 10", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/10634/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10634/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/10631", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10631/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10631/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10631/events", "html_url": "https://github.com/mne-tools/mne-python/issues/10631", "id": 1235582125, "node_id": "I_kwDOABPcUM5JpXyt", "number": 10631, "title": "Cropping Brainvision dataset results in incorrect annotations", "user": {"login": "davidhaslacher", "id": 17557712, "node_id": "MDQ6VXNlcjE3NTU3NzEy", "avatar_url": "https://avatars.githubusercontent.com/u/17557712?v=4", "gravatar_id": "", "url": "https://api.github.com/users/davidhaslacher", "html_url": "https://github.com/davidhaslacher", "followers_url": "https://api.github.com/users/davidhaslacher/followers", "following_url": "https://api.github.com/users/davidhaslacher/following{/other_user}", "gists_url": "https://api.github.com/users/davidhaslacher/gists{/gist_id}", "starred_url": "https://api.github.com/users/davidhaslacher/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/davidhaslacher/subscriptions", "organizations_url": "https://api.github.com/users/davidhaslacher/orgs", "repos_url": "https://api.github.com/users/davidhaslacher/repos", "events_url": "https://api.github.com/users/davidhaslacher/events{/privacy}", "received_events_url": "https://api.github.com/users/davidhaslacher/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2022-05-13T18:58:32Z", "updated_at": "2022-05-15T20:18:54Z", "closed_at": "2022-05-15T20:09:29Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Annotations are sometimes not adjusted correctly when cropping a Brainvision dataset. For instance, in the example below, the last event is originally inside the data range. After cropping, the last event is outside of the data range.\r\n\r\nhttps://drive.google.com/file/d/1VhS6kMOSNTz2yFjxMDFLKdX8bWaUtVnT/view?usp=sharing", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/10631/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10631/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/10623", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10623/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10623/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10623/events", "html_url": "https://github.com/mne-tools/mne-python/issues/10623", "id": 1232524007, "node_id": "I_kwDOABPcUM5JdtLn", "number": 10623, "title": "MNE Viz Raw Browser crashes due to NameError: name '_qt_init_icons' is not defined", "user": {"login": "Taremeh", "id": 1512652, "node_id": "MDQ6VXNlcjE1MTI2NTI=", "avatar_url": "https://avatars.githubusercontent.com/u/1512652?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Taremeh", "html_url": "https://github.com/Taremeh", "followers_url": "https://api.github.com/users/Taremeh/followers", "following_url": "https://api.github.com/users/Taremeh/following{/other_user}", "gists_url": "https://api.github.com/users/Taremeh/gists{/gist_id}", "starred_url": "https://api.github.com/users/Taremeh/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Taremeh/subscriptions", "organizations_url": "https://api.github.com/users/Taremeh/orgs", "repos_url": "https://api.github.com/users/Taremeh/repos", "events_url": "https://api.github.com/users/Taremeh/events{/privacy}", "received_events_url": "https://api.github.com/users/Taremeh/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2022-05-11T12:04:51Z", "updated_at": "2022-05-13T14:22:07Z", "closed_at": "2022-05-13T14:22:07Z", "author_association": "NONE", "active_lock_reason": null, "body": "#### Describe the bug\r\nFreshly installed MNE Version 1.0.2 for MacOS M1 / Apple Silicon (using Anaconda) causes the following error when trying to call `raw.plot()` if the MacOS theme option is set to dark mode:\r\n\r\n```sh\r\nTraceback (most recent call last):\r\n  File \"/Users/tarek/Documents/Development/BA/eeg-mne/topomap.py\", line 27, in <module>\r\n    raw.plot(block=True )\r\n  File \"/Users/tarek/opt/anaconda3/envs/mne/lib/python3.10/site-packages/mne/io/base.py\", line 1550, in plot\r\n    return plot_raw(self, events, duration, start, n_channels, bgcolor,\r\n  File \"<decorator-gen-182>\", line 12, in plot_raw\r\n  File \"/Users/tarek/opt/anaconda3/envs/mne/lib/python3.10/site-packages/mne/viz/raw.py\", line 356, in plot_raw\r\n    fig = _get_browser(show=show, block=block, **params)\r\n  File \"/Users/tarek/opt/anaconda3/envs/mne/lib/python3.10/site-packages/mne/viz/_figure.py\", line 654, in _get_browser\r\n    fig = backend._init_browser(**kwargs)\r\n  File \"/Users/tarek/opt/anaconda3/envs/mne/lib/python3.10/site-packages/mne_qt_browser/_pg_figure.py\", line 4748, in _init_browser\r\n    browser = MNEQtBrowser(**kwargs)\r\n  File \"/Users/tarek/opt/anaconda3/envs/mne/lib/python3.10/site-packages/mne_qt_browser/_pg_figure.py\", line 221, in func\r\n    meth(self, *args, **kwargs)\r\n  File \"/Users/tarek/opt/anaconda3/envs/mne/lib/python3.10/site-packages/mne_qt_browser/_pg_figure.py\", line 2713, in __init__\r\n    stylesheet = _qt_get_stylesheet(getattr(self.mne, 'theme', 'auto'))\r\n  File \"/Users/tarek/opt/anaconda3/envs/mne/lib/python3.10/site-packages/mne/viz/backends/_utils.py\", line 235, in _qt_get_stylesheet\r\n    icons_path = _qt_init_icons()\r\nNameError: name '_qt_init_icons' is not defined\r\n```\r\nDue to this error, the raw browser can't open.\r\n\r\n#### Steps to reproduce\r\nIndependent of the data set used, calling the `raw.plot()` method on MacOS with the OS theme set to `dark` will cause the described error, crashing the raw browser.\r\n\r\n#### Expected results\r\nThe raw browser should open itself on method call `raw.plot()` as it is working when the MacOS theme is set to `light`.\r\n\r\n#### Additional information\r\nThis code causes the error (`/mne/viz/backends/_utils.py:235`):\r\n```python\r\ndef _qt_get_stylesheet(theme):\r\n    from ...fixes import _compare_version\r\n    from ...utils import logger, warn, _validate_type\r\n    _validate_type(theme, ('path-like',), 'theme')\r\n    theme = str(theme)\r\n    system_theme = None\r\n    if theme == 'auto':\r\n        theme = system_theme = _qt_detect_theme()\r\n    if theme in ('dark', 'light'):\r\n        if system_theme is None:\r\n            system_theme = _qt_detect_theme()\r\n        if sys.platform == 'darwin' and theme == system_theme:\r\n            from qtpy import QtCore\r\n            try:\r\n                qt_version = QtCore.__version__  # PySide\r\n            except AttributeError:\r\n                qt_version = QtCore.QT_VERSION_STR  # PyQt\r\n            if theme == 'dark' and _compare_version(qt_version, '<', '5.13'):\r\n                # Taken using \"Digital Color Meter\" on macOS 12.2.1 looking at\r\n                # Meld, and also adapting (MIT-licensed)\r\n                # https://github.com/ColinDuquesnoy/QDarkStyleSheet/blob/master/qdarkstyle/dark/style.qss  # noqa: E501\r\n                # Something around rgb(51, 51, 51) worked as the bgcolor here,\r\n                # but it's easy enough just to set it transparent and inherit\r\n                # the bgcolor of the window (which is the same). We also take\r\n                # the separator images from QDarkStyle (MIT).\r\n                icons_path = _qt_init_icons() # <--- NameError: name '_qt_init_icons' is not defined\r\n                stylesheet = \"\"\"\\\r\n...\r\n```\r\n\r\n```\r\nmne.sys_info()\r\nPlatform:         macOS-12.2-x86_64-i386-64bit\r\nPython:           3.10.4 | packaged by conda-forge | (main, Mar 24 2022, 17:45:10) [Clang 12.0.1 ]\r\nExecutable:       /Users/tarek/opt/anaconda3/envs/mne/bin/python\r\nCPU:              i386: 8 cores\r\nMemory:           16.0 GB\r\nmne:              1.0.2\r\nnumpy:            1.21.6 {blas=NO_ATLAS_INFO, lapack=lapack}\r\nscipy:            1.8.0\r\nmatplotlib:       3.5.2 {backend=module://backend_interagg}\r\nsklearn:          1.0.2\r\nnumba:            0.55.1\r\nnibabel:          3.2.2\r\nnilearn:          0.9.1\r\ndipy:             1.5.0\r\ncupy:             Not found\r\npandas:           1.4.2\r\npyvista:          0.34.0 {OpenGL 4.1 Metal - 76.3 via Apple M1 Pro}\r\npyvistaqt:        0.9.0\r\nipyvtklink:       0.2.2\r\n```\r\n\r\n\r\n#### Quick Fix: How To \ud83d\ude09 \r\n1. Set your MacOS theme to `light` to avoid getting into the erroneous `if theme == 'dark'` clause.\r\n2. Done ;)\r\n", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/10623/reactions", "total_count": 2, "+1": 2, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10623/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/10608", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10608/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10608/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10608/events", "html_url": "https://github.com/mne-tools/mne-python/issues/10608", "id": 1227963868, "node_id": "I_kwDOABPcUM5JMT3c", "number": 10608, "title": "Viz: `evoked.plot_image` with the `group_by` parameter produces faulty sub-panel titles.", "user": {"login": "sappelhoff", "id": 9084751, "node_id": "MDQ6VXNlcjkwODQ3NTE=", "avatar_url": "https://avatars.githubusercontent.com/u/9084751?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sappelhoff", "html_url": "https://github.com/sappelhoff", "followers_url": "https://api.github.com/users/sappelhoff/followers", "following_url": "https://api.github.com/users/sappelhoff/following{/other_user}", "gists_url": "https://api.github.com/users/sappelhoff/gists{/gist_id}", "starred_url": "https://api.github.com/users/sappelhoff/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sappelhoff/subscriptions", "organizations_url": "https://api.github.com/users/sappelhoff/orgs", "repos_url": "https://api.github.com/users/sappelhoff/repos", "events_url": "https://api.github.com/users/sappelhoff/events{/privacy}", "received_events_url": "https://api.github.com/users/sappelhoff/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/mne-tools/mne-python/milestones/22", "html_url": "https://github.com/mne-tools/mne-python/milestone/22", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/milestones/22/labels", "id": 7668967, "node_id": "MI_kwDOABPcUM4AdQTn", "number": 22, "title": "1.1", "description": "", "creator": {"login": "larsoner", "id": 2365790, "node_id": "MDQ6VXNlcjIzNjU3OTA=", "avatar_url": "https://avatars.githubusercontent.com/u/2365790?v=4", "gravatar_id": "", "url": "https://api.github.com/users/larsoner", "html_url": "https://github.com/larsoner", "followers_url": "https://api.github.com/users/larsoner/followers", "following_url": "https://api.github.com/users/larsoner/following{/other_user}", "gists_url": "https://api.github.com/users/larsoner/gists{/gist_id}", "starred_url": "https://api.github.com/users/larsoner/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/larsoner/subscriptions", "organizations_url": "https://api.github.com/users/larsoner/orgs", "repos_url": "https://api.github.com/users/larsoner/repos", "events_url": "https://api.github.com/users/larsoner/events{/privacy}", "received_events_url": "https://api.github.com/users/larsoner/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 44, "state": "closed", "created_at": "2022-02-11T18:37:55Z", "updated_at": "2022-08-03T21:38:27Z", "due_on": "2022-06-13T07:00:00Z", "closed_at": "2022-08-03T21:38:27Z"}, "comments": 4, "created_at": "2022-05-06T14:48:19Z", "updated_at": "2022-05-12T13:29:31Z", "closed_at": "2022-05-12T13:29:31Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "#### Describe the bug\r\n\r\n`evoked.plot_image` with the `group_by` parameter produces faulty sub-panel titles.\r\n\r\n\r\n#### Steps to reproduce\r\n\r\n```Python\r\nimport mne\r\n\r\npath = mne.datasets.eegbci.load_data(1, 1)[0]\r\n\r\nraw = mne.io.read_raw_edf(path)\r\nmne.datasets.eegbci.standardize(raw)\r\nraw.set_montage(\"standard_1005\")\r\n\r\nepochs = mne.make_fixed_length_epochs(raw)\r\nevoked = epochs.average()\r\n\r\nsel = mne.channels.make_1020_channel_selections(evoked.info)\r\n\r\nfig, axs = plt.subplots(3, 1)\r\naxes = {sel: ax for sel, ax in zip(sel, axs.ravel())}\r\nevoked.plot_image(group_by=sel, axes=axes, show=False)\r\nfig.tight_layout()\r\n```\r\n\r\n\r\n#### Expected results\r\n\r\nA plot with 3 sub-panels. the titles should be \"Left\", \"Midline\", \"Right\" ... pretty much as here: https://mne.tools/stable/auto_examples/visualization/roi_erpimage_by_rt.html#sphx-glr-auto-examples-visualization-roi-erpimage-by-rt-py\r\n\r\n\r\n#### Actual results\r\n\r\nAll sub-panels have the title \"Left\"\r\n\r\n![image](https://user-images.githubusercontent.com/9084751/167156408-f9b51476-51f8-47a1-9db5-5524a053ebe3.png)\r\n\r\nThis is also the case here: https://mne.tools/stable/auto_tutorials/stats-sensor-space/20_erp_stats.html\r\n\r\n#### Additional information\r\n\r\nhappens on mne CI in `main` branch (2022-05-06)\r\n", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/10608/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10608/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/10598", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10598/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10598/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10598/events", "html_url": "https://github.com/mne-tools/mne-python/issues/10598", "id": 1225804279, "node_id": "I_kwDOABPcUM5JEEn3", "number": 10598, "title": "Version switcher broken when viewing dev docs", "user": {"login": "hoechenberger", "id": 2046265, "node_id": "MDQ6VXNlcjIwNDYyNjU=", "avatar_url": "https://avatars.githubusercontent.com/u/2046265?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hoechenberger", "html_url": "https://github.com/hoechenberger", "followers_url": "https://api.github.com/users/hoechenberger/followers", "following_url": "https://api.github.com/users/hoechenberger/following{/other_user}", "gists_url": "https://api.github.com/users/hoechenberger/gists{/gist_id}", "starred_url": "https://api.github.com/users/hoechenberger/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hoechenberger/subscriptions", "organizations_url": "https://api.github.com/users/hoechenberger/orgs", "repos_url": "https://api.github.com/users/hoechenberger/repos", "events_url": "https://api.github.com/users/hoechenberger/events{/privacy}", "received_events_url": "https://api.github.com/users/hoechenberger/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 40091538, "node_id": "MDU6TGFiZWw0MDA5MTUzOA==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/DOC", "name": "DOC", "color": "009800", "default": false, "description": null}, {"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2022-05-04T19:32:02Z", "updated_at": "2022-05-06T11:44:07Z", "closed_at": "2022-05-06T11:44:07Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "When looking at the devel docs e.g. at:\r\n\r\nhttps://mne.tools/dev/index.html\r\n\r\nand then trying to use the version switcher dropdown to switch to the documentation of an earlier release, one gets a 404.", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/10598/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10598/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/10594", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10594/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10594/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10594/events", "html_url": "https://github.com/mne-tools/mne-python/issues/10594", "id": 1224998883, "node_id": "I_kwDOABPcUM5JA__j", "number": 10594, "title": "CircleCI builds of documentation are once again not getting deployed?", "user": {"login": "hoechenberger", "id": 2046265, "node_id": "MDQ6VXNlcjIwNDYyNjU=", "avatar_url": "https://avatars.githubusercontent.com/u/2046265?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hoechenberger", "html_url": "https://github.com/hoechenberger", "followers_url": "https://api.github.com/users/hoechenberger/followers", "following_url": "https://api.github.com/users/hoechenberger/following{/other_user}", "gists_url": "https://api.github.com/users/hoechenberger/gists{/gist_id}", "starred_url": "https://api.github.com/users/hoechenberger/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hoechenberger/subscriptions", "organizations_url": "https://api.github.com/users/hoechenberger/orgs", "repos_url": "https://api.github.com/users/hoechenberger/repos", "events_url": "https://api.github.com/users/hoechenberger/events{/privacy}", "received_events_url": "https://api.github.com/users/hoechenberger/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 40091538, "node_id": "MDU6TGFiZWw0MDA5MTUzOA==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/DOC", "name": "DOC", "color": "009800", "default": false, "description": null}, {"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 9, "created_at": "2022-05-04T07:10:48Z", "updated_at": "2022-06-02T18:56:57Z", "closed_at": "2022-06-02T18:55:38Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "For example, a change I made to the stable docs yesterday still doesn't show up on the website; the respective Circle build doesn't seem to have \u2026 been building _anything_..?\r\n\r\nhttps://app.circleci.com/pipelines/github/mne-tools/mne-python/14066/workflows/cf92632a-1e47-49be-82fb-ee9496048932\r\n\r\ncc @larsoner ", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/10594/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10594/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/10591", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10591/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10591/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10591/events", "html_url": "https://github.com/mne-tools/mne-python/issues/10591", "id": 1224564178, "node_id": "I_kwDOABPcUM5I_V3S", "number": 10591, "title": "index bug when replacing report elements", "user": {"login": "aseeland", "id": 5227118, "node_id": "MDQ6VXNlcjUyMjcxMTg=", "avatar_url": "https://avatars.githubusercontent.com/u/5227118?v=4", "gravatar_id": "", "url": "https://api.github.com/users/aseeland", "html_url": "https://github.com/aseeland", "followers_url": "https://api.github.com/users/aseeland/followers", "following_url": "https://api.github.com/users/aseeland/following{/other_user}", "gists_url": "https://api.github.com/users/aseeland/gists{/gist_id}", "starred_url": "https://api.github.com/users/aseeland/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/aseeland/subscriptions", "organizations_url": "https://api.github.com/users/aseeland/orgs", "repos_url": "https://api.github.com/users/aseeland/repos", "events_url": "https://api.github.com/users/aseeland/events{/privacy}", "received_events_url": "https://api.github.com/users/aseeland/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/mne-tools/mne-python/milestones/24", "html_url": "https://github.com/mne-tools/mne-python/milestone/24", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/milestones/24/labels", "id": 8418297, "node_id": "MI_kwDOABPcUM4AgHP5", "number": 24, "title": "1.3", "description": "", "creator": {"login": "larsoner", "id": 2365790, "node_id": "MDQ6VXNlcjIzNjU3OTA=", "avatar_url": "https://avatars.githubusercontent.com/u/2365790?v=4", "gravatar_id": "", "url": "https://api.github.com/users/larsoner", "html_url": "https://github.com/larsoner", "followers_url": "https://api.github.com/users/larsoner/followers", "following_url": "https://api.github.com/users/larsoner/following{/other_user}", "gists_url": "https://api.github.com/users/larsoner/gists{/gist_id}", "starred_url": "https://api.github.com/users/larsoner/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/larsoner/subscriptions", "organizations_url": "https://api.github.com/users/larsoner/orgs", "repos_url": "https://api.github.com/users/larsoner/repos", "events_url": "https://api.github.com/users/larsoner/events{/privacy}", "received_events_url": "https://api.github.com/users/larsoner/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 18, "state": "closed", "created_at": "2022-09-13T15:22:25Z", "updated_at": "2022-12-28T21:04:54Z", "due_on": "2022-12-16T08:00:00Z", "closed_at": "2022-12-28T21:04:54Z"}, "comments": 3, "created_at": "2022-05-03T20:00:29Z", "updated_at": "2022-12-08T21:00:13Z", "closed_at": "2022-12-08T21:00:13Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hello MNE-team,\r\n\r\nI found a bug in these lines of code, that are executed when a content element gets replaced:\r\n\r\nhttps://github.com/mne-tools/mne-python/blob/cc44af23232542e5a14d86922e10f6d0ea22bc1e/mne/report/report.py#L1855-L1858\r\n\r\nThe content-element list (self._content) is iterated in reverse order, but the idx from enumerate isn't. This results in the wrong element being replaced.\r\nThere are several possibilities how to fix it, and I'm not sure, what you like:\r\n- do not reverse self._content\r\n- when replacing calculate something like len(self._content)-idx-1\r\n- include enumerate in reversing: for idx, content_element in reversed(list(enumerate(self._content)))\r\n\r\nI use the current stable version (1.0.2), but the bug is also on main.\r\n\r\nWith kind regards,\r\nAnett", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/10591/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10591/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/10585", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10585/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10585/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10585/events", "html_url": "https://github.com/mne-tools/mne-python/issues/10585", "id": 1223114905, "node_id": "I_kwDOABPcUM5I50CZ", "number": 10585, "title": "[BUG] fNIRS nirx montage roundtrip failure", "user": {"login": "alexrockhill", "id": 13473576, "node_id": "MDQ6VXNlcjEzNDczNTc2", "avatar_url": "https://avatars.githubusercontent.com/u/13473576?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alexrockhill", "html_url": "https://github.com/alexrockhill", "followers_url": "https://api.github.com/users/alexrockhill/followers", "following_url": "https://api.github.com/users/alexrockhill/following{/other_user}", "gists_url": "https://api.github.com/users/alexrockhill/gists{/gist_id}", "starred_url": "https://api.github.com/users/alexrockhill/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alexrockhill/subscriptions", "organizations_url": "https://api.github.com/users/alexrockhill/orgs", "repos_url": "https://api.github.com/users/alexrockhill/repos", "events_url": "https://api.github.com/users/alexrockhill/events{/privacy}", "received_events_url": "https://api.github.com/users/alexrockhill/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}, {"id": 3652015020, "node_id": "LA_kwDOABPcUM7ZrVOs", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/fNIRS", "name": "fNIRS", "color": "48053D", "default": false, "description": "functional Near-Infrared Spectroscopy"}], "state": "closed", "locked": false, "assignee": {"login": "rob-luke", "id": 748691, "node_id": "MDQ6VXNlcjc0ODY5MQ==", "avatar_url": "https://avatars.githubusercontent.com/u/748691?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rob-luke", "html_url": "https://github.com/rob-luke", "followers_url": "https://api.github.com/users/rob-luke/followers", "following_url": "https://api.github.com/users/rob-luke/following{/other_user}", "gists_url": "https://api.github.com/users/rob-luke/gists{/gist_id}", "starred_url": "https://api.github.com/users/rob-luke/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rob-luke/subscriptions", "organizations_url": "https://api.github.com/users/rob-luke/orgs", "repos_url": "https://api.github.com/users/rob-luke/repos", "events_url": "https://api.github.com/users/rob-luke/events{/privacy}", "received_events_url": "https://api.github.com/users/rob-luke/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "rob-luke", "id": 748691, "node_id": "MDQ6VXNlcjc0ODY5MQ==", "avatar_url": "https://avatars.githubusercontent.com/u/748691?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rob-luke", "html_url": "https://github.com/rob-luke", "followers_url": "https://api.github.com/users/rob-luke/followers", "following_url": "https://api.github.com/users/rob-luke/following{/other_user}", "gists_url": "https://api.github.com/users/rob-luke/gists{/gist_id}", "starred_url": "https://api.github.com/users/rob-luke/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rob-luke/subscriptions", "organizations_url": "https://api.github.com/users/rob-luke/orgs", "repos_url": "https://api.github.com/users/rob-luke/repos", "events_url": "https://api.github.com/users/rob-luke/events{/privacy}", "received_events_url": "https://api.github.com/users/rob-luke/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 6, "created_at": "2022-05-02T16:57:37Z", "updated_at": "2022-05-10T18:26:59Z", "closed_at": "2022-05-10T18:26:59Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "In running the following minimally reproducible example\r\n\r\n```\r\nimport os.path as op\r\nimport mne\r\nfrom mne.datasets.testing import data_path\r\n\r\ntesting_path = data_path(download=False)\r\nfname_nirx_15_0 = op.join(\r\n    testing_path, 'NIRx', 'nirscout', 'nirx_15_0_recording')\r\n\r\nraw = mne.io.read_raw_nirx(fname_nirx_15_0)\r\nmontage = raw.get_montage()\r\nraw.set_montage(montage)\r\n```\r\n\r\nI get the following stacktrace\r\n\r\n```\r\nValueError                                Traceback (most recent call last)\r\n<ipython-input-3-6ef838ccbf6c> in <module>\r\n      9 raw = mne.io.read_raw_nirx(fname_nirx_15_0)\r\n     10 montage = raw.get_montage()\r\n---> 11 raw.set_montage(montage)\r\n\r\n<decorator-gen-28> in set_montage(self, montage, match_case, match_alias, on_missing, verbose)\r\n\r\n~/projects/mne-python/mne/io/meas_info.py in set_montage(self, montage, match_case, match_alias, on_missing, verbose)\r\n    221         from ..channels.montage import _set_montage\r\n    222         info = self if isinstance(self, Info) else self.info\r\n--> 223         _set_montage(info, montage, match_case, match_alias, on_missing)\r\n    224         return self\r\n    225 \r\n\r\n~/projects/mne-python/mne/channels/montage.py in _set_montage(***failed resolving arguments***)\r\n   1094     fnirs_picks = _picks_to_idx(info, 'fnirs', allow_empty=True)\r\n   1095     if len(fnirs_picks) > 0:\r\n-> 1096         _set_montage_fnirs(info, mnt_head)\r\n   1097 \r\n   1098 \r\n\r\n~/projects/mne-python/mne/channels/montage.py in _set_montage_fnirs(info, montage)\r\n    875         ch = info['chs'][ch_idx]['ch_name']\r\n    876         source, detector = ch.split(' ')[0].split('_')\r\n--> 877         source_pos = montage.dig[montage.ch_names.index(source)\r\n    878                                  + num_ficiduals]['r']\r\n    879         detector_pos = montage.dig[montage.ch_names.index(detector)\r\n\r\nValueError: 'S1' is not in list\r\n```\r\n\r\nI don't know a whole lot about setting montages in fNIRS but this seems like an issue if you wanted to adjust coordinates let's say. If there's a reason fNIRS should not be able to go round-trip with a montage, perhaps a more informative error should be given as well. cc @rob-luke ", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/10585/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10585/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/10579", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10579/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10579/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10579/events", "html_url": "https://github.com/mne-tools/mne-python/issues/10579", "id": 1219179308, "node_id": "I_kwDOABPcUM5IqzMs", "number": 10579, "title": "[BUG/MAINT] Topomap `image_interp='None'` still interpolates", "user": {"login": "alexrockhill", "id": 13473576, "node_id": "MDQ6VXNlcjEzNDczNTc2", "avatar_url": "https://avatars.githubusercontent.com/u/13473576?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alexrockhill", "html_url": "https://github.com/alexrockhill", "followers_url": "https://api.github.com/users/alexrockhill/followers", "following_url": "https://api.github.com/users/alexrockhill/following{/other_user}", "gists_url": "https://api.github.com/users/alexrockhill/gists{/gist_id}", "starred_url": "https://api.github.com/users/alexrockhill/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alexrockhill/subscriptions", "organizations_url": "https://api.github.com/users/alexrockhill/orgs", "repos_url": "https://api.github.com/users/alexrockhill/repos", "events_url": "https://api.github.com/users/alexrockhill/events{/privacy}", "received_events_url": "https://api.github.com/users/alexrockhill/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}, {"id": 4080916781, "node_id": "LA_kwDOABPcUM7zPdkt", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/opinions-wanted", "name": "opinions-wanted", "color": "FE949A", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 29, "created_at": "2022-04-28T19:29:23Z", "updated_at": "2022-05-11T20:02:11Z", "closed_at": "2022-05-11T20:02:11Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "In writing https://github.com/mne-tools/mne-python/pull/10571, having values that are not spatially continuous over a topomap made for real problems with the existing interpolation methods so I added a Voronoi option. The following code uses `image_interp='None'` but in my mind, this is still applying an interpolation. I was planning on adding the Voronoi option to `image_interp` but I thought maybe it should replace `None`. In the `matplotlib` documentation, the interpolations are demonstrated on images, which makes much more sense for `None`, but with points, I think this behavior is unexpected--for me, I just want an option to see the raw data. I added a new `opinions-wanted` tag because I think this is an especially good one to hear what other people think.\r\n\r\n```\r\nimport os.path as op\r\nimport mne\r\nimport matplotlib.pyplot as plt\r\n\r\ndata_path = mne.datasets.sample.data_path()\r\nevoked =mne.read_evokeds(op.join(data_path, 'MEG', 'sample', 'sample_audvis-ave.fif'))[0]\r\nevoked.pick_types(eeg=True)\r\nevoked.apply_proj()\r\nfig, ax = plt.subplots()\r\nmne.viz.plot_topomap(evoked.data.mean(axis=1), evoked.info, image_interp='None', axes=ax)   # still interpolates\r\n```\r\n<img width=\"474\" alt=\"Screen Shot 2022-04-28 at 11 33 00 AM\" src=\"https://user-images.githubusercontent.com/13473576/165822643-7df208bd-8b30-4fab-853d-a53bda57d5f9.png\">\r\n\r\nThe Voronoi plot looks like this:\r\n\r\n<img width=\"427\" alt=\"Screen Shot 2022-04-28 at 12 26 56 PM\" src=\"https://user-images.githubusercontent.com/13473576/165830726-47ec37a4-c1a7-422f-9cab-28154155d84e.png\">\r\n\r\n\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/10579/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10579/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/10570", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10570/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10570/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10570/events", "html_url": "https://github.com/mne-tools/mne-python/issues/10570", "id": 1216537596, "node_id": "I_kwDOABPcUM5IguP8", "number": 10570, "title": "mne.fit_dipole throwing AssertionError: (blank) when n_jobs=-1", "user": {"login": "mjcourte", "id": 26233637, "node_id": "MDQ6VXNlcjI2MjMzNjM3", "avatar_url": "https://avatars.githubusercontent.com/u/26233637?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mjcourte", "html_url": "https://github.com/mjcourte", "followers_url": "https://api.github.com/users/mjcourte/followers", "following_url": "https://api.github.com/users/mjcourte/following{/other_user}", "gists_url": "https://api.github.com/users/mjcourte/gists{/gist_id}", "starred_url": "https://api.github.com/users/mjcourte/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mjcourte/subscriptions", "organizations_url": "https://api.github.com/users/mjcourte/orgs", "repos_url": "https://api.github.com/users/mjcourte/repos", "events_url": "https://api.github.com/users/mjcourte/events{/privacy}", "received_events_url": "https://api.github.com/users/mjcourte/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2022-04-26T22:18:40Z", "updated_at": "2022-04-29T16:23:55Z", "closed_at": "2022-04-29T16:23:55Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "#### Describe the bug\r\nWhen setting `n_jobs=-1`  as an argument of `mne.fit_dipole()`, a blank AssertionError is thrown.\r\nReading up the trace, one can see there is an `assert n_jobs > 0`  within `mne/surface.py`.\r\nElsewhere in MNE-Py, setting `n_jobs=-1` is valid and selects maximum available workers, and the docs for `fit_dipole` state this.\r\nSetting `n_jobs=16` runs successfully, where 16 is the maximum workers on my system, and the number of workers when using -1 in the steps prior to dipole fitting.\r\n\r\n#### Steps to reproduce\r\nRun:\r\n```\r\ndip = mne.fit_dipole(..., n_jobs=-1)\r\n```\r\n\r\n#### Expected results\r\n\r\nThe dipole fit to complete using maximum workers.\r\n\r\n\r\n#### Actual results\r\n```\r\n(snip)\r\n~\\anaconda3\\envs\\mne\\lib\\site-packages\\mne\\surface.py in _points_outside_surface(rr, surf, n_jobs, verbose)\r\n    561     rr = np.atleast_2d(rr)\r\n    562     assert rr.shape[1] == 3\r\n--> 563     assert n_jobs > 0\r\n    564     parallel, p_fun, _ = parallel_func(_get_solids, n_jobs)\r\n    565     tot_angles = parallel(p_fun(surf['rr'][tris], rr)\r\n\r\nAssertionError: \r\n```\r\n\r\n\r\n#### Additional information\r\n<details>\r\n  <summary>Output from `mne.sys_info()`</summary>\r\n  \r\n  Platform:       Windows-10-10.0.22000-SP0\r\n  Python:         3.9.9 | packaged by conda-forge | (main, Dec 20 2021, 02:36:06) [MSC v.1929 64 bit (AMD64)]\r\n  Executable:     C:\\Users\\Matt\\anaconda3\\envs\\mne\\python.exe\r\n  CPU:            Intel64 Family 6 Model 167 Stepping 1, GenuineIntel: 16 cores\r\n  Memory:         63.8 GB\r\n  \r\n  mne:            0.24.1\r\n  numpy:          1.22.0 {blas=NO_ATLAS_INFO, lapack=lapack}\r\n  scipy:          1.7.3\r\n  matplotlib:     3.5.1 {backend=module://matplotlib_inline.backend_inline}\r\n  \r\n  sklearn:        1.0.2\r\n  numba:          0.53.1\r\n  nibabel:        3.2.1\r\n  nilearn:        0.8.1\r\n  dipy:           1.4.1\r\n  cupy:           Not found\r\n  pandas:         1.3.5\r\n  mayavi:         4.7.2\r\n  pyvista:        0.33.2 {OpenGL 4.5.0 NVIDIA 496.49 via NVIDIA GeForce GTX 1070/PCIe/SSE2}\r\n  pyvistaqt:      0.6.0\r\n  ipyvtklink:     Not found\r\n  vtk:            9.0.3\r\n  PyQt5:          5.12.3\r\n  ipympl:         Not found\r\n  mne_qt_browser: 0.1.7\r\n  pooch:          v1.5.2\r\n  C:\\Users\\Matt\\anaconda3\\envs\\mne\\lib\\site-packages\\mne\\utils\\check.py:728: DeprecationWarning: distutils Version classes are deprecated. Use packaging.version instead.\r\n    if LooseVersion(version) >= LooseVersion('5.10'):\r\n  C:\\Users\\Matt\\anaconda3\\envs\\mne\\lib\\site-packages\\mne\\utils\\check.py:728: DeprecationWarning: distutils Version classes are deprecated. Use packaging.version instead.\r\n    if LooseVersion(version) >= LooseVersion('5.10'):\r\n</details>", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/10570/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10570/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/10553", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10553/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10553/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10553/events", "html_url": "https://github.com/mne-tools/mne-python/issues/10553", "id": 1209938873, "node_id": "I_kwDOABPcUM5IHjO5", "number": 10553, "title": "Dropdown menu on website is using the wrong theme", "user": {"login": "hoechenberger", "id": 2046265, "node_id": "MDQ6VXNlcjIwNDYyNjU=", "avatar_url": "https://avatars.githubusercontent.com/u/2046265?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hoechenberger", "html_url": "https://github.com/hoechenberger", "followers_url": "https://api.github.com/users/hoechenberger/followers", "following_url": "https://api.github.com/users/hoechenberger/following{/other_user}", "gists_url": "https://api.github.com/users/hoechenberger/gists{/gist_id}", "starred_url": "https://api.github.com/users/hoechenberger/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hoechenberger/subscriptions", "organizations_url": "https://api.github.com/users/hoechenberger/orgs", "repos_url": "https://api.github.com/users/hoechenberger/repos", "events_url": "https://api.github.com/users/hoechenberger/events{/privacy}", "received_events_url": "https://api.github.com/users/hoechenberger/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 7, "created_at": "2022-04-20T16:40:25Z", "updated_at": "2022-05-06T12:52:45Z", "closed_at": "2022-05-06T12:52:45Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "Light mode:\r\n<img width=\"405\" alt=\"Screen Shot 2022-04-20 at 18 38 01\" src=\"https://user-images.githubusercontent.com/2046265/164280423-597ce778-a593-43b4-9505-fc3c18579c76.png\">\r\n\r\nDark mode:\r\n<img width=\"405\" alt=\"Screen Shot 2022-04-20 at 18 38 20\" src=\"https://user-images.githubusercontent.com/2046265/164280455-290a26fa-2429-496b-8d5b-064c30f0788e.png\">\r\n\r\nThis is with Safari 15.4 on macOS.\r\n\r\ncc @larsoner ", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/10553/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10553/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/10550", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10550/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10550/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10550/events", "html_url": "https://github.com/mne-tools/mne-python/issues/10550", "id": 1209669609, "node_id": "I_kwDOABPcUM5IGhfp", "number": 10550, "title": " mne.datasets.fetch_fsaverage() throws error if directory does not exist", "user": {"login": "cbrnr", "id": 4377312, "node_id": "MDQ6VXNlcjQzNzczMTI=", "avatar_url": "https://avatars.githubusercontent.com/u/4377312?v=4", "gravatar_id": "", "url": "https://api.github.com/users/cbrnr", "html_url": "https://github.com/cbrnr", "followers_url": "https://api.github.com/users/cbrnr/followers", "following_url": "https://api.github.com/users/cbrnr/following{/other_user}", "gists_url": "https://api.github.com/users/cbrnr/gists{/gist_id}", "starred_url": "https://api.github.com/users/cbrnr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/cbrnr/subscriptions", "organizations_url": "https://api.github.com/users/cbrnr/orgs", "repos_url": "https://api.github.com/users/cbrnr/repos", "events_url": "https://api.github.com/users/cbrnr/events{/privacy}", "received_events_url": "https://api.github.com/users/cbrnr/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2022-04-20T13:12:40Z", "updated_at": "2022-04-21T14:26:02Z", "closed_at": "2022-04-21T14:26:02Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "I just tried to download the fsaverage dataset, but running `mne.datasets.fetch_fsaverage()` throws an error:\r\n\r\n    FileNotFoundError: subjects_dir does not exist: /Users/clemens/Documents/mne_data/MNE-fsaverage-data\r\n\r\nI have set `MNE_DATA` to `/Users/clemens/Documents/mne_data` in my config \u2013\u00a0maybe that's why? The `SUBJECTS_DIR` config key is only created after successfully downloading the dataset once.\r\n\r\nI don't think this is intended behavior, or is it?", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/10550/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10550/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/10538", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10538/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10538/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10538/events", "html_url": "https://github.com/mne-tools/mne-python/issues/10538", "id": 1206354347, "node_id": "I_kwDOABPcUM5H54Gr", "number": 10538, "title": "SNIRF import ignores timeUnit field contrary to specification", "user": {"login": "samuelpowell", "id": 6370657, "node_id": "MDQ6VXNlcjYzNzA2NTc=", "avatar_url": "https://avatars.githubusercontent.com/u/6370657?v=4", "gravatar_id": "", "url": "https://api.github.com/users/samuelpowell", "html_url": "https://github.com/samuelpowell", "followers_url": "https://api.github.com/users/samuelpowell/followers", "following_url": "https://api.github.com/users/samuelpowell/following{/other_user}", "gists_url": "https://api.github.com/users/samuelpowell/gists{/gist_id}", "starred_url": "https://api.github.com/users/samuelpowell/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/samuelpowell/subscriptions", "organizations_url": "https://api.github.com/users/samuelpowell/orgs", "repos_url": "https://api.github.com/users/samuelpowell/repos", "events_url": "https://api.github.com/users/samuelpowell/events{/privacy}", "received_events_url": "https://api.github.com/users/samuelpowell/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}, {"id": 3652015020, "node_id": "LA_kwDOABPcUM7ZrVOs", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/fNIRS", "name": "fNIRS", "color": "48053D", "default": false, "description": "functional Near-Infrared Spectroscopy"}], "state": "closed", "locked": false, "assignee": {"login": "rob-luke", "id": 748691, "node_id": "MDQ6VXNlcjc0ODY5MQ==", "avatar_url": "https://avatars.githubusercontent.com/u/748691?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rob-luke", "html_url": "https://github.com/rob-luke", "followers_url": "https://api.github.com/users/rob-luke/followers", "following_url": "https://api.github.com/users/rob-luke/following{/other_user}", "gists_url": "https://api.github.com/users/rob-luke/gists{/gist_id}", "starred_url": "https://api.github.com/users/rob-luke/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rob-luke/subscriptions", "organizations_url": "https://api.github.com/users/rob-luke/orgs", "repos_url": "https://api.github.com/users/rob-luke/repos", "events_url": "https://api.github.com/users/rob-luke/events{/privacy}", "received_events_url": "https://api.github.com/users/rob-luke/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "rob-luke", "id": 748691, "node_id": "MDQ6VXNlcjc0ODY5MQ==", "avatar_url": "https://avatars.githubusercontent.com/u/748691?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rob-luke", "html_url": "https://github.com/rob-luke", "followers_url": "https://api.github.com/users/rob-luke/followers", "following_url": "https://api.github.com/users/rob-luke/following{/other_user}", "gists_url": "https://api.github.com/users/rob-luke/gists{/gist_id}", "starred_url": "https://api.github.com/users/rob-luke/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rob-luke/subscriptions", "organizations_url": "https://api.github.com/users/rob-luke/orgs", "repos_url": "https://api.github.com/users/rob-luke/repos", "events_url": "https://api.github.com/users/rob-luke/events{/privacy}", "received_events_url": "https://api.github.com/users/rob-luke/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 8, "created_at": "2022-04-17T11:48:07Z", "updated_at": "2022-05-05T17:39:27Z", "closed_at": "2022-05-05T17:39:27Z", "author_association": "NONE", "active_lock_reason": null, "body": "#### Describe the bug\r\nWhen importing SNIRF data, the `timeUnit` field is ignored and seconds are *silently assumed* when computing the sampling frequency of the input data. This is contrary to the [specification](https://github.com/fNIRS/snirf/blob/v1.0/snirf_specification.md).\r\n\r\nThe consequence is that the computed sample rate may be incorrect.\r\n\r\n#### Cause\r\nRather than demonstrate reproduction, one can observe the cause of this behaviour in the codebase, which makes no reference to `timeUnit` and computes the sampling rate assuming seconds. [From master](https://github.com/mne-tools/mne-python/blob/a0d1125166029844923d896a76519b6e13a5a8b9/mne/io/snirf/_snirf.py#L112):\r\n\r\n```python\r\n            samplingrate_raw = np.array(dat.get('nirs/data1/time'))\r\n            sampling_rate = 0\r\n            if samplingrate_raw.shape == (2, 1):\r\n                # specified as onset/samplerate\r\n                warn(\"Onset/sample rate SNIRF not yet supported.\")\r\n            else:\r\n                # specified as time points\r\n                fs_diff = np.around(np.diff(samplingrate_raw), decimals=4)\r\n                if len(np.unique(fs_diff)) == 1:\r\n                    # Uniformly sampled data\r\n                    sampling_rate = 1. / np.unique(fs_diff)\r\n                else:\r\n                    # print(np.unique(fs_diff))\r\n                    warn(\"Non uniform sampled data not supported.\")\r\n            if sampling_rate == 0:\r\n                warn(\"Unable to extract sample rate from SNIRF file.\")\r\n```\r\n\r\n#### Expected results\r\n\r\nEither:\r\n - Throw an error if a `timeUnit` is both present and not equal to 's', or,\r\n - Correctly manipulate time vector according to unit specified.\r\n\r\n#### Actual results\r\nThe `timeUnit` is silently ignored and the resulting sampling frequency is incorrect.\r\n\r\n#### Additional information\r\nError present on master.\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/10538/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10538/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/10532", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10532/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10532/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10532/events", "html_url": "https://github.com/mne-tools/mne-python/issues/10532", "id": 1205447606, "node_id": "I_kwDOABPcUM5H2au2", "number": 10532, "title": "SSVEP tutorial plot issue", "user": {"login": "emmaducos", "id": 49890952, "node_id": "MDQ6VXNlcjQ5ODkwOTUy", "avatar_url": "https://avatars.githubusercontent.com/u/49890952?v=4", "gravatar_id": "", "url": "https://api.github.com/users/emmaducos", "html_url": "https://github.com/emmaducos", "followers_url": "https://api.github.com/users/emmaducos/followers", "following_url": "https://api.github.com/users/emmaducos/following{/other_user}", "gists_url": "https://api.github.com/users/emmaducos/gists{/gist_id}", "starred_url": "https://api.github.com/users/emmaducos/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/emmaducos/subscriptions", "organizations_url": "https://api.github.com/users/emmaducos/orgs", "repos_url": "https://api.github.com/users/emmaducos/repos", "events_url": "https://api.github.com/users/emmaducos/events{/privacy}", "received_events_url": "https://api.github.com/users/emmaducos/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2022-04-15T09:55:32Z", "updated_at": "2022-06-15T15:22:00Z", "closed_at": "2022-06-15T15:22:00Z", "author_association": "NONE", "active_lock_reason": null, "body": "#### Describe the bug\r\nWhile trying to plot the PSD vs SNR, the figure would not plot (even if it was opening and no issue reported in the terminal)\r\nnot sure why.\r\n\r\n### steps to reproduce\r\ndoing the tutorial on SSVEP accessible here : https://mne.tools/stable/auto_tutorials/time-freq/50_ssvep.html\r\nwith mne 1.0 on pycharm, with a conda environment using mne-qt, on a windows 11 machine, using the tutorial data.\r\n\r\n\r\n#### Expected results\r\ntutorial script should work with the data provided by the tutorial\r\n\r\n#### Actual results\r\nit worked when I replaced `fig.show()` with `plt.show()` (on l. 281 of the downloaded python script)\r\n\r\n\r\n#### Additional information\r\nCPU:              Intel64 Family 6 Model 142 Stepping 12, GenuineIntel: 8 cores\r\nMemory:           15.7 GB\r\nmne:              1.0.0\r\nnumpy:            1.21.5 {blas=mkl_rt, lapack=mkl_rt}\r\nscipy:            1.7.3\r\nmatplotlib:       3.5.1 {backend=QtAgg}\r\nsklearn:          1.0.2\r\nnumba:            Not found\r\nnibabel:          Not found\r\nnilearn:          Not found\r\ndipy:             Not found\r\ncupy:             Not found\r\npandas:           1.4.1\r\npyvista:          Not found\r\npyvistaqt:        Not found\r\nipyvtklink:       Not found\r\nvtk:              Not found\r\nPyQt5:            5.12.3\r\nipympl:           Not found\r\npooch:            v1.6.0\r\nmne_bids:         Not found\r\nmne_nirs:         Not found\r\nmne_features:     Not found\r\nmne_qt_browser:   0.2.5\r\nmne_connectivity: Not found\r\n", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/10532/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10532/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/10530", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10530/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10530/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10530/events", "html_url": "https://github.com/mne-tools/mne-python/issues/10530", "id": 1204760938, "node_id": "I_kwDOABPcUM5HzzFq", "number": 10530, "title": "MNE browser does not use specified theme when using plot()", "user": {"login": "a-allard", "id": 30708323, "node_id": "MDQ6VXNlcjMwNzA4MzIz", "avatar_url": "https://avatars.githubusercontent.com/u/30708323?v=4", "gravatar_id": "", "url": "https://api.github.com/users/a-allard", "html_url": "https://github.com/a-allard", "followers_url": "https://api.github.com/users/a-allard/followers", "following_url": "https://api.github.com/users/a-allard/following{/other_user}", "gists_url": "https://api.github.com/users/a-allard/gists{/gist_id}", "starred_url": "https://api.github.com/users/a-allard/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/a-allard/subscriptions", "organizations_url": "https://api.github.com/users/a-allard/orgs", "repos_url": "https://api.github.com/users/a-allard/repos", "events_url": "https://api.github.com/users/a-allard/events{/privacy}", "received_events_url": "https://api.github.com/users/a-allard/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2022-04-14T16:48:50Z", "updated_at": "2022-04-15T13:50:23Z", "closed_at": "2022-04-14T19:57:27Z", "author_association": "NONE", "active_lock_reason": null, "body": "#### Describe the bug\r\nWhen using EEG epochs the theme argument to the plot function is ignored.\r\n\r\n\r\n#### Steps to reproduce\r\n1. Load EEG data and break it into epochs.\r\n2. Select epoch and plot specifying a theme other than the default theme\r\n3. ```eps[1800].plot(theme='dark')```\r\n\r\n(For ref:)\r\n![image](https://user-images.githubusercontent.com/30708323/163435444-90bcdddd-8e27-4373-a026-39217ce36ab4.png)\r\n\r\n\r\n#### Expected results\r\nUse the theme specified in the function call\r\n\r\n\r\n#### Actual results\r\nThe theme set in `MNE_BROWSER_THEME` is used and the specified theme is ignored.\r\n\r\n\r\n#### Additional information\r\nPlatform:         Linux-5.13.0-39-generic-x86_64-with-glibc2.31\r\nPython:           3.10.4 (main, Mar 24 2022, 16:12:56) [GCC 9.4.0]\r\nExecutable:       /home/allard/pymain/bin/python3.10\r\nCPU:              x86_64: 24 cores\r\nMemory:           62.5 GB\r\n\r\nmne:              1.0.1\r\nnumpy:            1.21.6 {blas=openblas, lapack=openblas}\r\nscipy:            1.8.0\r\nmatplotlib:       3.5.1 {backend=Qt5Agg}\r\n\r\nsklearn:          1.0.2\r\nnumba:            0.55.1\r\nnibabel:          3.2.2\r\nnilearn:          0.9.1\r\ndipy:             Not found\r\ncupy:             Not found\r\npandas:           1.4.2\r\npyvista:          Not found\r\npyvistaqt:        Not found\r\nipyvtklink:       Not found\r\nvtk:              Not found\r\nPyQt5:            5.15.6\r\nipympl:           Not found\r\npooch:            v1.6.0\r\n\r\nmne_bids:         0.10\r\nmne_nirs:         Not found\r\nmne_features:     0.2\r\nmne_qt_browser:   0.3.0\r\nmne_connectivity: Not found\r\n", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/10530/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10530/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/10529", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10529/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10529/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10529/events", "html_url": "https://github.com/mne-tools/mne-python/issues/10529", "id": 1204617669, "node_id": "I_kwDOABPcUM5HzQHF", "number": 10529, "title": "export.export_raw does not write fids information in SET file", "user": {"login": "cmadjar", "id": 1402456, "node_id": "MDQ6VXNlcjE0MDI0NTY=", "avatar_url": "https://avatars.githubusercontent.com/u/1402456?v=4", "gravatar_id": "", "url": "https://api.github.com/users/cmadjar", "html_url": "https://github.com/cmadjar", "followers_url": "https://api.github.com/users/cmadjar/followers", "following_url": "https://api.github.com/users/cmadjar/following{/other_user}", "gists_url": "https://api.github.com/users/cmadjar/gists{/gist_id}", "starred_url": "https://api.github.com/users/cmadjar/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/cmadjar/subscriptions", "organizations_url": "https://api.github.com/users/cmadjar/orgs", "repos_url": "https://api.github.com/users/cmadjar/repos", "events_url": "https://api.github.com/users/cmadjar/events{/privacy}", "received_events_url": "https://api.github.com/users/cmadjar/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2022-04-14T14:44:18Z", "updated_at": "2022-04-14T20:32:24Z", "closed_at": "2022-04-14T20:03:38Z", "author_association": "NONE", "active_lock_reason": null, "body": "#### Describe the bug\r\n\r\n`export_raw` does not exports fids information of SET files.\r\n\r\n#### Steps to reproduce\r\n\r\n```python\r\n>>> import mne\r\n>>> import os\r\n>>> file = \"/Users/cmadjar/Desktop/eeg_test_data/2022-04-13/003_BaDaNovel_Rutgers_SM.set\"\r\n>>> raw = mne.io.read_raw_eeglab(input_fname=file, preload=False, verbose=True)\r\nReading /Users/cmadjar/Documents/MATLAB/eeglab2022.0/sample_data/eeglab_data.fdt\r\n\r\n>>> raw.get_montage()\r\n<DigMontage | 0 extras (headshape), 0 HPIs, 3 fiducials, 129 channels>\r\n>>> raw.get_montage().get_positions()\r\n... 'coord_frame': 'head', 'nasion': array([ 6.34122109e-16,  1.03559999e+01, -2.69400001e+00]), 'lpa': array([-6.71199989,  0.046     , -3.71199989]), 'rpa': array([ 6.71199989,  0.046     , -3.71199989]), 'hsp': None, 'hpi': None\r\n\r\n>>> out_file = \"/Users/cmadjar/Desktop/eeg_test_data/2022-04-13/test.set\"\r\n>>> mne.export.export_raw(fname=out_file, raw=raw, fmt='eeglab')\r\nReading 0 ... 340244  =      0.000 ...   680.488 secs...\r\n>>> raw_test = mne.io.read_raw_eeglab(input_fname=out_file, preload=False, verbose=True)\r\n>>> raw_test.get_montage()\r\n<DigMontage | 0 extras (headshape), 0 HPIs, 0 fiducials, 129 channels>       # <---------------------\r\n>>> raw_test.get_montage().get_positions()\r\n... 'coord_frame': 'head', 'nasion': None, 'lpa': None, 'rpa': None, 'hsp': None, 'hpi': None       # <---------------------\r\n```\r\n\r\n#### Expected results\r\n\r\nThe fids should be exported to the SET file when creating the file from raw.\r\n\r\n#### Actual results\r\n\r\nSee lines above flagged with `      # <---------------------`\r\n\r\n\r\n#### Additional information\r\n\r\nBuilt `mne` using the following commit: https://github.com/mne-tools/mne-python/commit/706dd3a36096e88a12b3bfb207e348c26fe8625c \r\n\r\n```\r\n>>> mne.sys_info()\r\nPlatform:         macOS-11.3-x86_64-i386-64bit\r\nPython:           3.9.12 (main, Mar 26 2022, 15:52:10)  [Clang 13.0.0 (clang-1300.0.29.30)]\r\nExecutable:       /Users/cmadjar/Development/python_venv/python_intel_3.9.4/eeg2bids_py3.9.12/bin/python\r\nCPU:              i386: 8 cores\r\nMemory:           Unavailable (requires \"psutil\" package)\r\nmne:              1.1.dev0\r\nnumpy:            1.21.5 {blas=openblas, lapack=openblas}\r\nscipy:            1.8.0\r\nmatplotlib:       3.5.1 {backend=MacOSX}\r\n\r\nsklearn:          1.0.2\r\nnumba:            0.55.1\r\nnibabel:          Not found\r\nnilearn:          Not found\r\ndipy:             Not found\r\ncupy:             Not found\r\npandas:           1.4.1\r\npyvista:          Not found\r\npyvistaqt:        Not found\r\nipyvtklink:       Not found\r\nvtk:              Not found\r\nqtpy:             Not found\r\nipympl:           Not found\r\npyqtgraph:        Not found\r\npooch:            v1.6.0\r\n\r\nmne_bids:         0.10\r\nmne_nirs:         Not found\r\nmne_features:     0.2\r\nmne_qt_browser:   Not found\r\nmne_connectivity: Not found\r\n```\r\n\r\nRelated to #10474 ", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/10529/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10529/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/10520", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10520/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10520/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10520/events", "html_url": "https://github.com/mne-tools/mne-python/issues/10520", "id": 1202886562, "node_id": "I_kwDOABPcUM5Hspei", "number": 10520, "title": "Coreg GUI doesn't start if only high-resolution, but no low-resolution skin surface is available", "user": {"login": "hoechenberger", "id": 2046265, "node_id": "MDQ6VXNlcjIwNDYyNjU=", "avatar_url": "https://avatars.githubusercontent.com/u/2046265?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hoechenberger", "html_url": "https://github.com/hoechenberger", "followers_url": "https://api.github.com/users/hoechenberger/followers", "following_url": "https://api.github.com/users/hoechenberger/following{/other_user}", "gists_url": "https://api.github.com/users/hoechenberger/gists{/gist_id}", "starred_url": "https://api.github.com/users/hoechenberger/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hoechenberger/subscriptions", "organizations_url": "https://api.github.com/users/hoechenberger/orgs", "repos_url": "https://api.github.com/users/hoechenberger/repos", "events_url": "https://api.github.com/users/hoechenberger/events{/privacy}", "received_events_url": "https://api.github.com/users/hoechenberger/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}, {"id": 1290799321, "node_id": "MDU6TGFiZWwxMjkwNzk5MzIx", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/VIZ", "name": "VIZ", "color": "22e861", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": {"login": "hoechenberger", "id": 2046265, "node_id": "MDQ6VXNlcjIwNDYyNjU=", "avatar_url": "https://avatars.githubusercontent.com/u/2046265?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hoechenberger", "html_url": "https://github.com/hoechenberger", "followers_url": "https://api.github.com/users/hoechenberger/followers", "following_url": "https://api.github.com/users/hoechenberger/following{/other_user}", "gists_url": "https://api.github.com/users/hoechenberger/gists{/gist_id}", "starred_url": "https://api.github.com/users/hoechenberger/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hoechenberger/subscriptions", "organizations_url": "https://api.github.com/users/hoechenberger/orgs", "repos_url": "https://api.github.com/users/hoechenberger/repos", "events_url": "https://api.github.com/users/hoechenberger/events{/privacy}", "received_events_url": "https://api.github.com/users/hoechenberger/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "hoechenberger", "id": 2046265, "node_id": "MDQ6VXNlcjIwNDYyNjU=", "avatar_url": "https://avatars.githubusercontent.com/u/2046265?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hoechenberger", "html_url": "https://github.com/hoechenberger", "followers_url": "https://api.github.com/users/hoechenberger/followers", "following_url": "https://api.github.com/users/hoechenberger/following{/other_user}", "gists_url": "https://api.github.com/users/hoechenberger/gists{/gist_id}", "starred_url": "https://api.github.com/users/hoechenberger/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hoechenberger/subscriptions", "organizations_url": "https://api.github.com/users/hoechenberger/orgs", "repos_url": "https://api.github.com/users/hoechenberger/repos", "events_url": "https://api.github.com/users/hoechenberger/events{/privacy}", "received_events_url": "https://api.github.com/users/hoechenberger/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2022-04-13T07:42:19Z", "updated_at": "2022-04-21T18:56:30Z", "closed_at": "2022-04-21T18:56:30Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "Reported on the forum: https://mne.discourse.group/t/mne-coreg-issues\r\n\r\n```python\r\nUsing pyvistaqt 3d backend.\r\n\r\n    Triangle neighbors and vertex normals...\r\nUsing high resolution head model in /media/dip_linux/Transcend/Visual_p3_data/3847/surf/lh.seghead\r\nTraceback (most recent call last):\r\n  File \"/home/dip_linux/anaconda3/envs/mne/bin/mne\", line 8, in <module>\r\n    sys.exit(main())\r\n  File \"/home/dip_linux/anaconda3/envs/mne/lib/python3.10/site-packages/mne/commands/utils.py\", line 107, in main\r\n    cmd.run()\r\n  File \"/home/dip_linux/anaconda3/envs/mne/lib/python3.10/site-packages/mne/commands/mne_coreg.py\", line 85, in run\r\n    mne.gui.coregistration(\r\n  File \"<decorator-gen-558>\", line 12, in coregistration\r\n  File \"/home/dip_linux/anaconda3/envs/mne/lib/python3.10/site-packages/mne/gui/__init__.py\", line 193, in coregistration\r\n    return CoregistrationUI(\r\n  File \"<decorator-gen-570>\", line 12, in __init__\r\n  File \"/home/dip_linux/anaconda3/envs/mne/lib/python3.10/site-packages/mne/gui/_coreg.py\", line 238, in __init__\r\n    self.coreg = Coregistration(\r\n  File \"/home/dip_linux/anaconda3/envs/mne/lib/python3.10/site-packages/mne/coreg.py\", line 1371, in __init__\r\n    self._setup_bem()\r\n  File \"/home/dip_linux/anaconda3/envs/mne/lib/python3.10/site-packages/mne/coreg.py\", line 1426, in _setup_bem\r\n    'mesh (%d vertices): %s' % (len(self._bem_high_res.surf.rr),\r\nAttributeError: 'dict' object has no attribute 'surf'\r\n```\r\n\r\nWorkaround was to run `make_scalp_surfaces()` to create a low-res scalp", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/10520/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10520/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/10516", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10516/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10516/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10516/events", "html_url": "https://github.com/mne-tools/mne-python/issues/10516", "id": 1201573542, "node_id": "I_kwDOABPcUM5Hno6m", "number": 10516, "title": "Some BrainVision data contain Lowpass=0", "user": {"login": "Lychfindel", "id": 58313635, "node_id": "MDQ6VXNlcjU4MzEzNjM1", "avatar_url": "https://avatars.githubusercontent.com/u/58313635?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Lychfindel", "html_url": "https://github.com/Lychfindel", "followers_url": "https://api.github.com/users/Lychfindel/followers", "following_url": "https://api.github.com/users/Lychfindel/following{/other_user}", "gists_url": "https://api.github.com/users/Lychfindel/gists{/gist_id}", "starred_url": "https://api.github.com/users/Lychfindel/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Lychfindel/subscriptions", "organizations_url": "https://api.github.com/users/Lychfindel/orgs", "repos_url": "https://api.github.com/users/Lychfindel/repos", "events_url": "https://api.github.com/users/Lychfindel/events{/privacy}", "received_events_url": "https://api.github.com/users/Lychfindel/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2022-04-12T09:55:37Z", "updated_at": "2022-04-14T15:34:49Z", "closed_at": "2022-04-14T15:34:49Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "#### Describe the bug\r\nBrainVision data acquired with V-Amp without any hardware filtering are stored in header file as:\r\n```\r\nChannels\r\n--------\r\n#     Name      Phys. Chn.    Resolution / Unit   Low Cutoff [s]   High Cutoff [Hz]   Notch [Hz]    Gradient         Offset\r\n1     EOGR        1          0.0488281 \u00b5V             DC                0              Off\r\n2     EOGL        2          0.0488281 \u00b5V             DC                0              Off\r\n3     FP3         3          0.0488281 \u00b5V             DC                0              Off\r\n4     Fz          4          0.0488281 \u00b5V             DC                0              Off\r\n```\r\nThe current code in brainvision.py, the filtering section don't set the lowpass filter only in the case the value is NaN or Off\r\n```python\r\nif len(lowpass) == 0:\r\n    pass\r\nelif len(set(lowpass)) == 1:\r\n    if lowpass[0] in ('NaN', 'Off'):\r\n        pass  # Placeholder for future use. Lowpass set in _empty_info\r\n    else:\r\n        info['lowpass'] = float(lowpass[0])\r\n        if lp_s:\r\n            # filter time constant t [secs] to Hz conversion: 1/2*pi*t\r\n            info['lowpass'] = 1. / (2 * np.pi * info['lowpass'])\r\n\r\nelse:\r\n    heterogeneous_lp_filter = True\r\n    if lp_s:\r\n        # We convert channels with disabled filters to having\r\n        # infinitely relaxed / no filters\r\n        lowpass = [float(filt) if filt not in ('NaN', 'Off')\r\n                   else 0.0 for filt in lowpass]\r\n        info['lowpass'] = np.min(np.array(lowpass, dtype=np.float64))\r\n        try:\r\n            # filter time constant t [secs] to Hz conversion: 1/2*pi*t\r\n            info['lowpass'] = 1. / (2 * np.pi * info['lowpass'])\r\n\r\n        except ZeroDivisionError:\r\n            if len(set(lowpass)) == 1:\r\n                # No lowpass actually set for the weakest setting\r\n                # so we set lowpass to the Nyquist frequency\r\n                info['lowpass'] = info['sfreq'] / 2.\r\n                # not actually heterogeneous in effect\r\n                # ... just heterogeneously disabled\r\n                heterogeneous_lp_filter = False\r\n            else:\r\n                # no lowpass filter is the weakest filter,\r\n                # but it wasn't the only filter\r\n                pass\r\n    else:\r\n        # We convert channels with disabled filters to having\r\n        # infinitely relaxed / no filters\r\n        lowpass = [float(filt) if filt not in ('NaN', 'Off')\r\n                   else np.Inf for filt in lowpass]\r\n        info['lowpass'] = np.max(np.array(lowpass, dtype=np.float64))\r\n\r\n        if np.isinf(info['lowpass']):\r\n            # No lowpass actually set for the weakest setting\r\n            # so we set lowpass to the Nyquist frequency\r\n            info['lowpass'] = info['sfreq'] / 2.\r\n            if len(set(lowpass)) == 1:\r\n                # not actually heterogeneous in effect\r\n                # ... just heterogeneously disabled\r\n                heterogeneous_lp_filter = False\r\n\r\n    if heterogeneous_lp_filter:\r\n        # this isn't clean FP, but then again, we only want to provide\r\n        # the Nyquist hint when the lowpass filter was actually\r\n        # calculated from dividing the sampling frequency by 2, so the\r\n        # exact/direct comparison (instead of tolerance) makes sense\r\n        if info['lowpass'] == info['sfreq'] / 2.0:\r\n            nyquist = ', Nyquist limit'\r\n        else:\r\n            nyquist = \"\"\r\n        warn('Channels contain different lowpass filters. '\r\n             'Highest (weakest) filter setting (%0.2f Hz%s) '\r\n             'will be stored.' % (info['lowpass'], nyquist))\r\n```\r\n\r\nThis lead to an error when you try e.g. to plot the data.\r\n```\r\n  File \"<decorator-gen-292>\", line 12, in plot_raw\r\n  File \"c:\\users\\atonin\\pycharmprojects\\mne-fork\\mne-python\\mne\\viz\\raw.py\", line 227, in plot_raw\r\n    decim, picks_data = _handle_decim(info, decim, lowpass)\r\n  File \"c:\\users\\atonin\\pycharmprojects\\mne-fork\\mne-python\\mne\\viz\\utils.py\", line 1754, in _handle_decim\r\n    decim = max(int(info['sfreq'] / (lp * 3) + 1e-6), 1)\r\nZeroDivisionError: float division by zero\r\n```\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/10516/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10516/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/10499", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10499/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10499/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10499/events", "html_url": "https://github.com/mne-tools/mne-python/issues/10499", "id": 1196178468, "node_id": "I_kwDOABPcUM5HTDwk", "number": 10499, "title": "mne.channels.combine_channels(epochs) drops metadata", "user": {"login": "cbrnr", "id": 4377312, "node_id": "MDQ6VXNlcjQzNzczMTI=", "avatar_url": "https://avatars.githubusercontent.com/u/4377312?v=4", "gravatar_id": "", "url": "https://api.github.com/users/cbrnr", "html_url": "https://github.com/cbrnr", "followers_url": "https://api.github.com/users/cbrnr/followers", "following_url": "https://api.github.com/users/cbrnr/following{/other_user}", "gists_url": "https://api.github.com/users/cbrnr/gists{/gist_id}", "starred_url": "https://api.github.com/users/cbrnr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/cbrnr/subscriptions", "organizations_url": "https://api.github.com/users/cbrnr/orgs", "repos_url": "https://api.github.com/users/cbrnr/repos", "events_url": "https://api.github.com/users/cbrnr/events{/privacy}", "received_events_url": "https://api.github.com/users/cbrnr/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2022-04-07T15:01:21Z", "updated_at": "2022-04-08T20:40:56Z", "closed_at": "2022-04-08T20:40:56Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "I think `mne.channels.combine_channels(epochs)` drops metadata (i.e. there is no `epochs.metadata` attribute in the resulting `Epochs` objects). I wanted to make sure that this is not intended \u2013\u00a0if it is a bug I'm happy to submit a PR.", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/10499/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10499/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/10494", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10494/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10494/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10494/events", "html_url": "https://github.com/mne-tools/mne-python/issues/10494", "id": 1193204181, "node_id": "I_kwDOABPcUM5HHtnV", "number": 10494, "title": "mne-report shows \"None\"", "user": {"login": "jasmainak", "id": 15852194, "node_id": "MDQ6VXNlcjE1ODUyMTk0", "avatar_url": "https://avatars.githubusercontent.com/u/15852194?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jasmainak", "html_url": "https://github.com/jasmainak", "followers_url": "https://api.github.com/users/jasmainak/followers", "following_url": "https://api.github.com/users/jasmainak/following{/other_user}", "gists_url": "https://api.github.com/users/jasmainak/gists{/gist_id}", "starred_url": "https://api.github.com/users/jasmainak/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jasmainak/subscriptions", "organizations_url": "https://api.github.com/users/jasmainak/orgs", "repos_url": "https://api.github.com/users/jasmainak/repos", "events_url": "https://api.github.com/users/jasmainak/events{/privacy}", "received_events_url": "https://api.github.com/users/jasmainak/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2022-04-05T14:08:18Z", "updated_at": "2022-04-05T19:21:45Z", "closed_at": "2022-04-05T19:21:45Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "Script to reproduce: https://gist.github.com/jasmainak/483e68a5cb8f42bfe94d4cebe86cef05\r\n\r\nEffect:\r\n\r\n![image](https://user-images.githubusercontent.com/15852194/161772715-b3c86648-7e6f-4fe4-a040-32d7befbb617.png)\r\n\r\n\r\nI'm on latest \"main\" branch", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/10494/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10494/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/10490", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10490/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10490/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10490/events", "html_url": "https://github.com/mne-tools/mne-python/issues/10490", "id": 1191045410, "node_id": "I_kwDOABPcUM5G_eki", "number": 10490, "title": "BUG raw.crop with first_samp != 0 and annotations", "user": {"login": "agramfort", "id": 161052, "node_id": "MDQ6VXNlcjE2MTA1Mg==", "avatar_url": "https://avatars.githubusercontent.com/u/161052?v=4", "gravatar_id": "", "url": "https://api.github.com/users/agramfort", "html_url": "https://github.com/agramfort", "followers_url": "https://api.github.com/users/agramfort/followers", "following_url": "https://api.github.com/users/agramfort/following{/other_user}", "gists_url": "https://api.github.com/users/agramfort/gists{/gist_id}", "starred_url": "https://api.github.com/users/agramfort/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/agramfort/subscriptions", "organizations_url": "https://api.github.com/users/agramfort/orgs", "repos_url": "https://api.github.com/users/agramfort/repos", "events_url": "https://api.github.com/users/agramfort/events{/privacy}", "received_events_url": "https://api.github.com/users/agramfort/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2022-04-03T21:05:33Z", "updated_at": "2022-04-21T13:55:38Z", "closed_at": "2022-04-21T13:55:38Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "if you run:\r\n\r\n```\r\nfrom pathlib import Path\r\nimport mne\r\n\r\nmne.viz.set_browser_backend('matplotlib')\r\n\r\nsample_dir = Path(mne.datasets.sample.data_path())\r\nsample_fname = sample_dir / 'MEG' / 'sample' / 'sample_audvis_raw.fif'\r\n\r\nraw = mne.io.read_raw_fif(sample_fname, preload=True)\r\nraw.crop(tmax=4)\r\nmeas_date = None\r\n\r\nif meas_date is None:\r\n    raw.set_meas_date(None)\r\n\r\nsfreq = raw.info['sfreq']\r\nfirst_samp = 10_000\r\nraw = mne.io.RawArray(raw.get_data(),\r\n                      raw.info,\r\n                      first_samp=first_samp)\r\n\r\nannot = mne.Annotations(\r\n    onset=[0, 1.5],\r\n    duration=[1, 0.5],\r\n    description=[\"a\", \"b\"],\r\n    orig_time=raw.info['meas_date'])\r\n\r\nraw.set_annotations(annot)\r\n\r\nraw.plot()\r\n```\r\n\r\nyou get this\r\n\r\n<img width=\"1903\" alt=\"image\" src=\"https://user-images.githubusercontent.com/161052/161448547-46c660dd-4583-4706-bc71-8868cb9eaac0.png\">\r\n\r\nso far so good. But then if you do\r\n\r\n```\r\nraw.crop(0, 1.5)  # should keep the first annotation\r\n\r\nassert len(raw.annotations) == 1  # FAILS\r\n```\r\n\r\nthe first annotation does not survive although you get the data from the first one.\r\n\r\n@larsoner you agree it's a bug?", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/10490/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10490/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/10486", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10486/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10486/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10486/events", "html_url": "https://github.com/mne-tools/mne-python/issues/10486", "id": 1190591161, "node_id": "I_kwDOABPcUM5G9vq5", "number": 10486, "title": "Argument `theme` of `raw.plot()` or config key does not work on macOS", "user": {"login": "mscheltienne", "id": 73893616, "node_id": "MDQ6VXNlcjczODkzNjE2", "avatar_url": "https://avatars.githubusercontent.com/u/73893616?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mscheltienne", "html_url": "https://github.com/mscheltienne", "followers_url": "https://api.github.com/users/mscheltienne/followers", "following_url": "https://api.github.com/users/mscheltienne/following{/other_user}", "gists_url": "https://api.github.com/users/mscheltienne/gists{/gist_id}", "starred_url": "https://api.github.com/users/mscheltienne/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mscheltienne/subscriptions", "organizations_url": "https://api.github.com/users/mscheltienne/orgs", "repos_url": "https://api.github.com/users/mscheltienne/repos", "events_url": "https://api.github.com/users/mscheltienne/events{/privacy}", "received_events_url": "https://api.github.com/users/mscheltienne/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 7, "created_at": "2022-04-02T10:28:53Z", "updated_at": "2022-04-10T19:47:23Z", "closed_at": "2022-04-10T19:47:23Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "As spotted following the discussion here https://github.com/mne-tools/mne-qt-browser/issues/83 the argument `theme` does not change the theme on either my macOS or Windows computer.\r\n\r\nSample code:\r\n\r\n```\r\nimport mne\r\n\r\n\r\nfolder = mne.datasets.sample.data_path() / 'MEG' / 'sample'\r\nraw = mne.io.read_raw(folder / 'sample_audvis_filt-0-40_raw.fif', preload=True)\r\nraw.plot(theme='dark')\r\n```", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/10486/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10486/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/10474", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10474/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10474/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10474/events", "html_url": "https://github.com/mne-tools/mne-python/issues/10474", "id": 1186757663, "node_id": "I_kwDOABPcUM5GvHwf", "number": 10474, "title": "read_raw_eeglab does not read nasion, lpa and rpa values from .set file", "user": {"login": "cmadjar", "id": 1402456, "node_id": "MDQ6VXNlcjE0MDI0NTY=", "avatar_url": "https://avatars.githubusercontent.com/u/1402456?v=4", "gravatar_id": "", "url": "https://api.github.com/users/cmadjar", "html_url": "https://github.com/cmadjar", "followers_url": "https://api.github.com/users/cmadjar/followers", "following_url": "https://api.github.com/users/cmadjar/following{/other_user}", "gists_url": "https://api.github.com/users/cmadjar/gists{/gist_id}", "starred_url": "https://api.github.com/users/cmadjar/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/cmadjar/subscriptions", "organizations_url": "https://api.github.com/users/cmadjar/orgs", "repos_url": "https://api.github.com/users/cmadjar/repos", "events_url": "https://api.github.com/users/cmadjar/events{/privacy}", "received_events_url": "https://api.github.com/users/cmadjar/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 16, "created_at": "2022-03-30T17:14:31Z", "updated_at": "2022-10-11T09:13:30Z", "closed_at": "2022-04-14T13:15:04Z", "author_association": "NONE", "active_lock_reason": null, "body": "#### Describe the bug\r\n\r\n`read_raw_eeglab` does not read properly the nasion, lpa and rpa coordinates of a `.set` file.\r\n\r\n#### Steps to reproduce\r\n\r\nThis can be reproduced on the sample data `eeglab_data.set` file that comes with EEGLAB.\r\n\r\n```\r\n>>> import mne\r\n>>> import os\r\n>>> from mne_bids import write_raw_bids, BIDSPath\r\n>>> import eeglabio\r\n>>> file = \"/Users/cmadjar/Documents/MATLAB/eeglab2022.0/sample_data/eeglab_data.set\"\r\n>>> raw = mne.io.read_raw_eeglab(input_fname=file, preload=False, verbose=True)\r\nReading /Users/cmadjar/Documents/MATLAB/eeglab2022.0/sample_data/eeglab_data.fdt\r\n>>> \r\n>>> raw.get_montage()\r\n<DigMontage | 0 extras (headshape), 0 HPIs, 0 fiducials, 32 channels>\r\n\r\n>>> raw.get_montage().get_positions()\r\n.... 'coord_frame': 'head', 'nasion': None, 'lpa': None, 'rpa': None, 'hsp': None, 'hpi': None\r\n```\r\n\r\n![Screen Shot 2022-03-30 at 1 11 21 PM](https://user-images.githubusercontent.com/1402456/160892869-430f3b8c-77d3-4f84-9c97-751ce3796024.png)\r\n\r\nHowever, when looking in the Matlab structure, the coordinates for nasion, lpa and rpa are indeed present in the file. So for some reason, this gets lost when loading the `.set` file with `read_raw_eeglab`\r\n\r\n\r\n#### Additional information\r\n\r\nReproduced on several versions of mne and different OS.\r\n\r\nLatest information:\r\n```\r\n>>> mne.sys_info()\r\nPlatform:         macOS-11.3-x86_64-i386-64bit\r\nPython:           3.9.12 (main, Mar 26 2022, 15:52:10)  [Clang 13.0.0 (clang-1300.0.29.30)]\r\nExecutable:       /Users/cmadjar/Development/python_venv/python_intel_3.9.4/eeg2bids_py3.9.12/bin/python\r\nCPU:              i386: 8 cores\r\nMemory:           Unavailable (requires \"psutil\" package)\r\nmne:              1.0.0\r\nnumpy:            1.21.5 {blas=openblas, lapack=openblas}\r\nscipy:            1.8.0\r\nmatplotlib:       3.5.1 {backend=MacOSX}\r\n\r\nsklearn:          1.0.2\r\nnumba:            0.55.1\r\nnibabel:          Not found\r\nnilearn:          Not found\r\ndipy:             Not found\r\ncupy:             Not found\r\npandas:           1.4.1\r\npyvista:          Not found\r\npyvistaqt:        Not found\r\nipyvtklink:       Not found\r\nvtk:              Not found\r\nPyQt5:            Not found\r\nipympl:           Not found\r\npooch:            v1.6.0\r\n\r\nmne_bids:         0.10\r\nmne_nirs:         Not found\r\nmne_features:     0.2\r\nmne_qt_browser:   Not found\r\nmne_connectivity: Not found\r\n```", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/10474/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10474/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/10471", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10471/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10471/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10471/events", "html_url": "https://github.com/mne-tools/mne-python/issues/10471", "id": 1186504770, "node_id": "I_kwDOABPcUM5GuKBC", "number": 10471, "title": "mne.Info._repr_html_() does not show correct sensor locations?", "user": {"login": "cbrnr", "id": 4377312, "node_id": "MDQ6VXNlcjQzNzczMTI=", "avatar_url": "https://avatars.githubusercontent.com/u/4377312?v=4", "gravatar_id": "", "url": "https://api.github.com/users/cbrnr", "html_url": "https://github.com/cbrnr", "followers_url": "https://api.github.com/users/cbrnr/followers", "following_url": "https://api.github.com/users/cbrnr/following{/other_user}", "gists_url": "https://api.github.com/users/cbrnr/gists{/gist_id}", "starred_url": "https://api.github.com/users/cbrnr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/cbrnr/subscriptions", "organizations_url": "https://api.github.com/users/cbrnr/orgs", "repos_url": "https://api.github.com/users/cbrnr/repos", "events_url": "https://api.github.com/users/cbrnr/events{/privacy}", "received_events_url": "https://api.github.com/users/cbrnr/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2022-03-30T13:58:07Z", "updated_at": "2022-06-24T06:40:27Z", "closed_at": "2022-06-24T06:40:27Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "I noticed that `mne.Info._repr_html_()` does not show the correct number of digitized sensor locations. Reproducible example (reprex):\r\n\r\n```python\r\nimport mne\r\n\r\ninfo = mne.create_info([\"C3\", \"Cz\", \"C4\"], 256, \"eeg\")\r\ninfo.set_montage(\"biosemi64\")\r\n\r\nprint(info)  # shows \"dig: 6 items (3 Cardinal, 3 EEG)\"\r\nprint(info._repr_html_())  # shows \"0 points\" for \"Digitized points\"\r\n```", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/10471/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10471/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/10470", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10470/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10470/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10470/events", "html_url": "https://github.com/mne-tools/mne-python/issues/10470", "id": 1186262810, "node_id": "I_kwDOABPcUM5GtO8a", "number": 10470, "title": "pick_types(csd=True) does not return csd type channels but fails with a ValueError", "user": {"login": "matthiasdold", "id": 62005770, "node_id": "MDQ6VXNlcjYyMDA1Nzcw", "avatar_url": "https://avatars.githubusercontent.com/u/62005770?v=4", "gravatar_id": "", "url": "https://api.github.com/users/matthiasdold", "html_url": "https://github.com/matthiasdold", "followers_url": "https://api.github.com/users/matthiasdold/followers", "following_url": "https://api.github.com/users/matthiasdold/following{/other_user}", "gists_url": "https://api.github.com/users/matthiasdold/gists{/gist_id}", "starred_url": "https://api.github.com/users/matthiasdold/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/matthiasdold/subscriptions", "organizations_url": "https://api.github.com/users/matthiasdold/orgs", "repos_url": "https://api.github.com/users/matthiasdold/repos", "events_url": "https://api.github.com/users/matthiasdold/events{/privacy}", "received_events_url": "https://api.github.com/users/matthiasdold/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2022-03-30T10:40:17Z", "updated_at": "2022-04-03T17:37:16Z", "closed_at": "2022-04-03T17:37:16Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Hi all,\r\nI am pretty sure, this is not as it is supposed to be, but would be fixed quite easily.\r\n\r\n#### Describe the bug\r\nWhen working on an instance with [CSD transformed](https://mne.tools/stable/auto_examples/preprocessing/eeg_csd.html?highlight=csd) data, using `.pick_types(csd=True)` returns an error complaining about \"no channels match the selection\".\r\n\r\nThis is due to the `csd=True` kwarg not being passed to `pick_types` in the according method of `mne.channels.channels.UpdateChannelsMixin` - [see here](https://github.com/mne-tools/mne-python/blob/maint/1.0/mne/channels/channels.py#L671-L676)\r\n\r\n#### Steps to reproduce\r\n```python\r\nimport mne\r\nfrom pathlib import Path\r\nfrom mne.datasets import sample\r\n\r\ndata_path = sample.data_path()\r\nmeg_path = Path(data_path) / 'MEG' / 'sample'\r\nraw = mne.io.read_raw_fif(meg_path / 'sample_audvis_raw.fif')\r\nraw = raw.pick_types(meg=False, eeg=True, eog=True, ecg=True, stim=True,\r\n                     exclude=raw.info['bads']).load_data()\r\nraw.set_eeg_reference(projection=True).apply_proj()\r\nraw_csd = mne.preprocessing.compute_current_source_density(raw)\r\n\r\nraw_csd.pick_types(csd=True)\r\n```\r\n\r\n#### Expected results\r\nThe instance object filtered for the 59 CSD transformed channels. See info:\r\n```python\r\nIn [22]: raw_csd.info\r\nOut[22]:\r\n<Info | 21 non-empty values\r\n acq_pars: ACQch001 110113 ACQch002 110112 ACQch003 110111 ACQch004 110122 ...\r\n bads: []\r\n ch_names: STI 001, STI 002, STI 003, STI 004, STI 005, STI 006, STI 014, ...\r\n chs: 9 Stimulus, 59 Current source density, 1 EOG\r\n```\r\n#### Actual results\r\nThe error:\r\n```python\r\nValueError: No channels match the selection.\r\n```\r\n", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/10470/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10470/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/10465", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10465/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10465/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10465/events", "html_url": "https://github.com/mne-tools/mne-python/issues/10465", "id": 1184978424, "node_id": "I_kwDOABPcUM5GoVX4", "number": 10465, "title": "plot_compare_evokeds creates wrong plot (should be average, is GFP?)", "user": {"login": "skjerns", "id": 14980558, "node_id": "MDQ6VXNlcjE0OTgwNTU4", "avatar_url": "https://avatars.githubusercontent.com/u/14980558?v=4", "gravatar_id": "", "url": "https://api.github.com/users/skjerns", "html_url": "https://github.com/skjerns", "followers_url": "https://api.github.com/users/skjerns/followers", "following_url": "https://api.github.com/users/skjerns/following{/other_user}", "gists_url": "https://api.github.com/users/skjerns/gists{/gist_id}", "starred_url": "https://api.github.com/users/skjerns/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/skjerns/subscriptions", "organizations_url": "https://api.github.com/users/skjerns/orgs", "repos_url": "https://api.github.com/users/skjerns/repos", "events_url": "https://api.github.com/users/skjerns/events{/privacy}", "received_events_url": "https://api.github.com/users/skjerns/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2022-03-29T14:40:33Z", "updated_at": "2022-03-29T14:58:50Z", "closed_at": "2022-03-29T14:56:05Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "edit: closing this again. I wasn't quite aware that it was plotting the GFP when supplying several channels, and the ERP if using one channel. I think this design choice is not optimal and potentially confusing. I would expect the same plot type when supplying one or several channels, especially if I called \"average()\" before on my epoch objects.\r\n\r\n---\r\n\r\nI'm currently plotting the ERPs for some conditions using `plot_compare_evokeds `, however I stumbled across some inconsistent behaviour:\r\nIf given ERPs with several channels, the function seems to plot only the first channel of the original data, not the average of all supplied ERP channels or choices. Here is some sample code\r\n\r\n\r\n#### Describe the bug\r\n\r\nIn this example, I simulate 13 participants with 128 trials, where for each trial channels 0-5 have a positive waveform and 5-64 have a negative waveform. This means the grand average is looking like this:\r\n![image](https://user-images.githubusercontent.com/14980558/160638610-e055d4ca-448f-4349-b428-eccfa80b503c.png)\r\nIf I now create ERPs on selected channels I would expect the evoked plot to be either positive or negative in shape. Selecting occipital electrodes should lead to a plot that shows the average of the selected electrodes for the epochs. However, this does not seem the case.\r\n\r\n#### Actual results\r\nNow when I use `plot_compare_evokeds` and limiting the data to occipital channel (i.e. **negative waveforms**) using\r\n```\r\nmne.viz.plot_compare_evokeds({'condition1': erps}, picks=occipitals, show_sensors=True)\r\n```\r\nthe resulting plot looks like this:\r\n![image](https://user-images.githubusercontent.com/14980558/160638714-f221b843-f4f8-492b-abd6-b956c6b87110.png)\r\n\r\nThe plot indicates that occipital eletrodes have been selected and are displayed. However, what is displayed are the GFPs?\r\n\r\nWhen narrowing down the electrode selection to a single electrode (e.g. `O2`), the waveform get's displayed correctly. However, as soon as several electrodes are selected, the first channel of the `raw` is displayed.\r\n```\r\nmne.viz.plot_compare_evokeds({'condition1': erps}, picks='O2', show_sensors=True)\r\n```\r\n\r\n![image](https://user-images.githubusercontent.com/14980558/160637472-c8b8844d-9113-4aac-a619-f5ccbd5322cb.png)\r\n\r\nHere is some code to reproduce\r\n\r\n```Python\r\nimport mne\r\nimport numpy as np\r\nimport matplotlib.pyplot as plt\r\n\r\n# simulate EEG data\r\nn_subj = 13\r\nn_channels = 64\r\nn_trials = 128\r\nsampling_freq = 100  # in Hertz\r\nmontage = mne.channels.make_standard_montage('biosemi64')\r\n\r\n# two different waveforms: positive and negative wave\r\ntimes = np.linspace(0, 1, sampling_freq, endpoint=False)\r\nwave1 = np.sin(np.pi * times)\r\nwave2 = np.sin(np.pi * times)*-1\r\n\r\n\r\nall_epochs = []\r\nfor subj in  range(n_subj):\r\n    trials = []\r\n    \r\n    # construct n_trials\r\n    for _ in range(n_trials):\r\n        # channels 0 to 5 have a positive waveform ('Fp1', 'AF7','AF3', 'F1')\r\n        # channels 5 to 64 have a negative waveform\r\n        trial = np.array([(wave1 if x<5 else wave2)*(x/100+1) for x in range(n_channels)])\r\n        trials.append(trial)\r\n     \r\n    data = np.array(trials)\r\n    info = mne.create_info(montage.ch_names, sfreq=sampling_freq, ch_types='eeg')\r\n    epochs = mne.EpochsArray(data, info)\r\n    epochs.set_montage(montage)\r\n      \r\n    # add to a list with epochs for this simulated participant\r\n    all_epochs.append(epochs)\r\n\r\n#%% plotting\r\n# form ERPs for all epochs\r\noccipitals = [ch for ch in montage.ch_names if 'O' in ch]\r\n\r\nerps = [epoch.average(occipitals) for epoch in all_epochs]\r\n    \r\n# for sanity, plot the ERP individual average ERPs\r\nax = plt.gca()\r\nfor erp in erps:\r\n    # they are all negative\r\n    erp.plot(axes=ax)\r\n\r\n# expectation: this plots a average ERP of the selected electrode, i.e. a negative waveform\r\n# however, it plots a positive waveform, namely the waveform of the first channel\r\nmne.viz.plot_compare_evokeds({'condition1': erps}, picks=occipitals, show_sensors=True)\r\n\r\n# even when manually choosing \"picks=occipitals\", the other channels are plotted\r\nmne.viz.plot_compare_evokeds({'condition1': erps}, picks=occipitals, show_sensors=True)\r\n\r\n# only when a single channel is plotted, the waveform is correctly displayed\r\nmne.viz.plot_compare_evokeds({'condition1': erps}, picks='O2', show_sensors=True)\r\n\r\n```\r\n\r\n\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/10465/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10465/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/10454", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10454/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10454/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10454/events", "html_url": "https://github.com/mne-tools/mne-python/issues/10454", "id": 1177525528, "node_id": "I_kwDOABPcUM5GL50Y", "number": 10454, "title": "annotation window does not close properly", "user": {"login": "jasmainak", "id": 15852194, "node_id": "MDQ6VXNlcjE1ODUyMTk0", "avatar_url": "https://avatars.githubusercontent.com/u/15852194?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jasmainak", "html_url": "https://github.com/jasmainak", "followers_url": "https://api.github.com/users/jasmainak/followers", "following_url": "https://api.github.com/users/jasmainak/following{/other_user}", "gists_url": "https://api.github.com/users/jasmainak/gists{/gist_id}", "starred_url": "https://api.github.com/users/jasmainak/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jasmainak/subscriptions", "organizations_url": "https://api.github.com/users/jasmainak/orgs", "repos_url": "https://api.github.com/users/jasmainak/repos", "events_url": "https://api.github.com/users/jasmainak/events{/privacy}", "received_events_url": "https://api.github.com/users/jasmainak/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 9, "created_at": "2022-03-23T02:46:11Z", "updated_at": "2022-06-23T17:01:42Z", "closed_at": "2022-06-23T17:01:42Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "#### Describe the bug\r\nwhen doing `raw.plot()`, the annotation window does not close even if the main browser is closed. Attempting to close that window throws a spurious error:\r\n\r\n```py\r\nIn [8]: \r\n\r\nTraceback (most recent call last):\r\n  File \"/Users/mainak/anaconda3/envs/mne/lib/python3.9/site-packages/matplotlib/cbook/__init__.py\", line 270, in process\r\n    func(*args, **kwargs)\r\n  File \"/Users/mainak/Documents/github_repos/mne-python/mne/viz/_mpl_figure.py\", line 180, in _close\r\n    super()._close(event)\r\n  File \"/Users/mainak/Documents/github_repos/mne-python/mne/viz/_mpl_figure.py\", line 103, in _close\r\n    self.mne.parent_fig.mne.child_figs.remove(self)\r\nValueError: list.remove(x): x not in list\r\n```\r\n\r\n#### Steps to reproduce\r\n```py\r\nimport os\r\nimport numpy as np\r\nimport mne\r\n\r\nsample_data_folder = mne.datasets.sample.data_path()\r\nsample_data_raw_file = os.path.join(sample_data_folder, 'MEG', 'sample',\r\n                                    'sample_audvis_filt-0-40_raw.fif')\r\nraw = mne.io.read_raw_fif(sample_data_raw_file)\r\nraw.plot()\r\n```\r\n\r\nNow press 'a' to open the annotation window, then draw an annotation, then attempt to close the main window. It does not close the annotation window. Next, try to close the annotation window to get the error.\r\n\r\n#### Expected results\r\nThe annotation window should close when the main window closes and there should not be any error.\r\n\r\n#### Additional information\r\nI am on latest master of MNE-Python", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/10454/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10454/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/10453", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10453/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10453/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10453/events", "html_url": "https://github.com/mne-tools/mne-python/issues/10453", "id": 1177331440, "node_id": "I_kwDOABPcUM5GLKbw", "number": 10453, "title": "ContainsMixin doesn't work properly with Info instances", "user": {"login": "mscheltienne", "id": 73893616, "node_id": "MDQ6VXNlcjczODkzNjE2", "avatar_url": "https://avatars.githubusercontent.com/u/73893616?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mscheltienne", "html_url": "https://github.com/mscheltienne", "followers_url": "https://api.github.com/users/mscheltienne/followers", "following_url": "https://api.github.com/users/mscheltienne/following{/other_user}", "gists_url": "https://api.github.com/users/mscheltienne/gists{/gist_id}", "starred_url": "https://api.github.com/users/mscheltienne/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mscheltienne/subscriptions", "organizations_url": "https://api.github.com/users/mscheltienne/orgs", "repos_url": "https://api.github.com/users/mscheltienne/repos", "events_url": "https://api.github.com/users/mscheltienne/events{/privacy}", "received_events_url": "https://api.github.com/users/mscheltienne/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2022-03-22T21:32:25Z", "updated_at": "2022-03-22T22:14:53Z", "closed_at": "2022-03-22T22:11:39Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "```\r\nIn [1]: from mne import create_info\r\nIn [2]: info = create_info(ch_names=['Fp1', 'Fp2', 'Fpz'], sfreq=1, ch_types='eeg')\r\nIn [3]: 'eeg' in info\r\nOut[3]: False\r\n```\r\n\r\nProbably because `__contains__` gets resolved with the inheritance from `dict` before the inheritance from `ContainsMixin`.\r\n\r\nAlso from the same Mixin, `compensation_grade()` raises this error when there are no MEG channels. I guess it should raise, but something more explicit than this obscure error.\r\n\r\n```\r\nIn [4]: info.compensation_grade()\r\n---------------------------------------------------------------------------\r\nTypeError                                 Traceback (most recent call last)\r\nInput In [4], in <cell line: 1>()\r\n----> 1 info.compensation_grade()\r\n\r\nTypeError: 'NoneType' object is not callable\r\n```\r\n", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/10453/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10453/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/10435", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10435/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10435/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10435/events", "html_url": "https://github.com/mne-tools/mne-python/issues/10435", "id": 1168936758, "node_id": "I_kwDOABPcUM5FrI82", "number": 10435, "title": "Time of acquisition from info['meas_date'] is not always accurate", "user": {"login": "jhouck", "id": 857583, "node_id": "MDQ6VXNlcjg1NzU4Mw==", "avatar_url": "https://avatars.githubusercontent.com/u/857583?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jhouck", "html_url": "https://github.com/jhouck", "followers_url": "https://api.github.com/users/jhouck/followers", "following_url": "https://api.github.com/users/jhouck/following{/other_user}", "gists_url": "https://api.github.com/users/jhouck/gists{/gist_id}", "starred_url": "https://api.github.com/users/jhouck/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jhouck/subscriptions", "organizations_url": "https://api.github.com/users/jhouck/orgs", "repos_url": "https://api.github.com/users/jhouck/repos", "events_url": "https://api.github.com/users/jhouck/events{/privacy}", "received_events_url": "https://api.github.com/users/jhouck/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 8, "created_at": "2022-03-14T21:37:32Z", "updated_at": "2022-03-16T19:08:41Z", "closed_at": "2022-03-16T19:08:40Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "#### Describe the bug\r\nFor some fif files, depending on the settings of the DACQ computer, it is possible for the acquisition time listed in info['meas_date'] to be inaccurate. In our case in data over several years, even though the times reported in both FIFF.FIFF_FILE_ID and FIFF.FIFF_MEAS_DATE are labeled as MDT/MST, FIFF.FIFF_MEAS_DATE is consistently 6-7 hours earlier. We have some MEG calendar data for this time and the time from FIFF.FIFF_FILE_ID is accurate. It seems like FIFF.FIFF_MEAS_DATE was in UTC despite reporting as MDT/MST.\r\n\r\n#### Steps to reproduce\r\n# Download file https://www.dropbox.com/s/jlxkxs95qqlrktv/noise_run_raw.fif?dl=0\r\n# and place it in a convenient directory, like /tmp\r\nimport mne\r\nimport pytz\r\nfname_raw = '/tmp/noise_run_raw.fif'\r\ninfo = mne.io.read_info(fname_raw)\r\n# convert time stamp to datetime using hidden function\r\nnew_meas_date = mne.utils._stamp_to_dt((info['file_id']['secs'], info['file_id']['usecs']))\r\ntime_diff = new_meas_date - info['meas_date']\r\nprint(time_diff)\r\nprint(info['meas_date'].astimezone(pytz.timezone('US/Mountain')).strftime('%X %x'))\r\nprint(new_meas_date.astimezone(pytz.timezone('US/Mountain')).strftime('%X %x'))\r\n\r\n#### Expected results\r\nTimes should be very close together\r\n\r\n#### Actual results\r\nTimes are about 6.5 hours apart\r\n\r\n#### Additional information\r\nIt might be good to return a warning if the timedelta between the times in FIFF.FIFF_MEAS_DATE & FIFF.FIFF_FILE_ID exceeds some minimum threshold (1 hour?). It is not clear how common this is or how often accurate scan time information is needed. I think FIFF.FIFF_MEAS_DATE is the time that either the 'GO!' button is pressed or 'Record raw' is checked, so when possible this would probably be the preferred time.\r\n\r\n\r\nPlatform:       Linux-5.4.0-81-generic-x86_64-with-glibc2.27\r\nPython:         3.9.2 | packaged by conda-forge | (default, Feb 21 2021, 05:02:46)  [GCC 9.3.0]\r\nExecutable:     /export/research/analysis/human/jhouck/shared/tools/anaconda/envs/mne24dev2/bin/python\r\nCPU:            x86_64: 128 cores\r\nMemory:         1007.8 GB\r\n\r\nmne:            1.0.dev0\r\nnumpy:          1.20.2 {blas=NO_ATLAS_INFO, lapack=lapack}\r\nscipy:          1.6.3\r\nmatplotlib:     3.4.2 {backend=Qt5Agg}\r\n\r\nsklearn:        0.24.2\r\nnumba:          0.53.1\r\nnibabel:        3.2.1\r\nnilearn:        0.7.1\r\ndipy:           1.4.1\r\ncupy:           Not found\r\npandas:         1.2.4\r\npyvista:        0.32.1 {OpenGL 3.3 (Core Profile) Mesa 20.0.8 via llvmpipe (LLVM 10.0.0, 128 bits)}\r\npyvistaqt:      0.6.0\r\nipyvtklink:     0.2.1\r\nvtk:            9.0.1\r\nPyQt5:          5.12.3\r\nipympl:         Not found\r\npooch:          v1.5.2\r\n\r\nmne_bids:       Not found\r\nmne_nirs:       Not found\r\nmne_features:   Not found\r\nmne_qt_browser: Not found\r\nmne_connectivity:Not found\r\n\r\n\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/10435/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10435/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/10428", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10428/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10428/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10428/events", "html_url": "https://github.com/mne-tools/mne-python/issues/10428", "id": 1164951827, "node_id": "I_kwDOABPcUM5Fb8ET", "number": 10428, "title": "support latin1 encoding for channels in read_raw_nihon", "user": {"login": "MatthiasEb", "id": 41163089, "node_id": "MDQ6VXNlcjQxMTYzMDg5", "avatar_url": "https://avatars.githubusercontent.com/u/41163089?v=4", "gravatar_id": "", "url": "https://api.github.com/users/MatthiasEb", "html_url": "https://github.com/MatthiasEb", "followers_url": "https://api.github.com/users/MatthiasEb/followers", "following_url": "https://api.github.com/users/MatthiasEb/following{/other_user}", "gists_url": "https://api.github.com/users/MatthiasEb/gists{/gist_id}", "starred_url": "https://api.github.com/users/MatthiasEb/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/MatthiasEb/subscriptions", "organizations_url": "https://api.github.com/users/MatthiasEb/orgs", "repos_url": "https://api.github.com/users/MatthiasEb/repos", "events_url": "https://api.github.com/users/MatthiasEb/events{/privacy}", "received_events_url": "https://api.github.com/users/MatthiasEb/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2022-03-10T09:11:15Z", "updated_at": "2022-03-10T20:40:59Z", "closed_at": "2022-03-10T20:40:59Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "When opening Nihon-Kohden files with `read_raw_nihon` I get the error\r\n\r\n```\r\nUnicodeDecodeError: 'utf-8' codec can't decode byte 0xc4 in position 1070: invalid continuation byte\r\n```\r\nraised in [this line](https://github.com/mne-tools/mne-python/blob/1b14d458cbcd391a6907032b809ec37410b60592/mne/io/nihon/nihon.py#L111).\r\n\r\nI guess it is similar to [this issue](https://github.com/mne-tools/mne-python/issues/9267) which was already solved [here](https://github.com/mne-tools/mne-python/pull/9384), as replacing the above mentioned line with \r\n```\r\nwith open(e_fname, 'r', encoding='latin1') as fid:\r\n```\r\n\r\nfixed the issue.\r\n\r\nMaybe we could add a similar [loop over different encodings](https://github.com/mne-tools/mne-python/pull/9384/files#diff-800fa074fc54d9bab7e81ae7d9f3239321fdf53d127bf6bbea3935a3095586e5R252) in [_read_21e_file](https://github.com/mne-tools/mne-python/blob/1b14d458cbcd391a6907032b809ec37410b60592/mne/io/nihon/nihon.py#L102)?", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/10428/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10428/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/10404", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10404/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10404/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10404/events", "html_url": "https://github.com/mne-tools/mne-python/issues/10404", "id": 1154622155, "node_id": "I_kwDOABPcUM5E0iLL", "number": 10404, "title": "BUG: _compare_version backward incompat", "user": {"login": "larsoner", "id": 2365790, "node_id": "MDQ6VXNlcjIzNjU3OTA=", "avatar_url": "https://avatars.githubusercontent.com/u/2365790?v=4", "gravatar_id": "", "url": "https://api.github.com/users/larsoner", "html_url": "https://github.com/larsoner", "followers_url": "https://api.github.com/users/larsoner/followers", "following_url": "https://api.github.com/users/larsoner/following{/other_user}", "gists_url": "https://api.github.com/users/larsoner/gists{/gist_id}", "starred_url": "https://api.github.com/users/larsoner/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/larsoner/subscriptions", "organizations_url": "https://api.github.com/users/larsoner/orgs", "repos_url": "https://api.github.com/users/larsoner/repos", "events_url": "https://api.github.com/users/larsoner/events{/privacy}", "received_events_url": "https://api.github.com/users/larsoner/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/mne-tools/mne-python/milestones/21", "html_url": "https://github.com/mne-tools/mne-python/milestone/21", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/milestones/21/labels", "id": 7253492, "node_id": "MI_kwDOABPcUM4Abq30", "number": 21, "title": "1.0", "description": "", "creator": {"login": "larsoner", "id": 2365790, "node_id": "MDQ6VXNlcjIzNjU3OTA=", "avatar_url": "https://avatars.githubusercontent.com/u/2365790?v=4", "gravatar_id": "", "url": "https://api.github.com/users/larsoner", "html_url": "https://github.com/larsoner", "followers_url": "https://api.github.com/users/larsoner/followers", "following_url": "https://api.github.com/users/larsoner/following{/other_user}", "gists_url": "https://api.github.com/users/larsoner/gists{/gist_id}", "starred_url": "https://api.github.com/users/larsoner/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/larsoner/subscriptions", "organizations_url": "https://api.github.com/users/larsoner/orgs", "repos_url": "https://api.github.com/users/larsoner/repos", "events_url": "https://api.github.com/users/larsoner/events{/privacy}", "received_events_url": "https://api.github.com/users/larsoner/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 83, "state": "closed", "created_at": "2021-10-14T16:40:49Z", "updated_at": "2022-05-03T11:29:23Z", "due_on": "2022-02-25T08:00:00Z", "closed_at": "2022-05-03T11:29:23Z"}, "comments": 12, "created_at": "2022-02-28T22:34:00Z", "updated_at": "2022-03-01T18:10:52Z", "closed_at": "2022-03-01T18:10:52Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "cc @hoechenberger:\r\n```\r\n>>> import mne\r\n>>> mne.fixes._compare_version('1.0.dev0', '>=', '1.0')\r\nFalse\r\n>>> from distutils.version import LooseVersion\r\n>>> LooseVersion('1.0.dev0') >= LooseVersion('1.0')\r\n<stdin>:1: DeprecationWarning: distutils Version classes are deprecated. Use packaging.version instead.\r\nTrue\r\n```\r\nThis is a problem because we usually want the second result :(\r\n\r\nThe `git grep check_version | wc -l`  count is 67 and `git grep _compare_version | wc -l` is 26, I'd rather not have to change all of these to allow for `.dev0` extensions. Plus other submodules like `mne-nirs` that already use this (where I saw the problem actually!) will not work properly...\r\n\r\nI'm tempted to change this to cut off any `.dev` from the end to make life easy, but then we depart from standard. But it seems a bit like the lesser of two evils here.", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/10404/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10404/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/10398", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10398/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10398/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10398/events", "html_url": "https://github.com/mne-tools/mne-python/issues/10398", "id": 1150371150, "node_id": "I_kwDOABPcUM5EkUVO", "number": 10398, "title": "sys_info doesn't display VTK version number for VTK 9.1", "user": {"login": "hoechenberger", "id": 2046265, "node_id": "MDQ6VXNlcjIwNDYyNjU=", "avatar_url": "https://avatars.githubusercontent.com/u/2046265?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hoechenberger", "html_url": "https://github.com/hoechenberger", "followers_url": "https://api.github.com/users/hoechenberger/followers", "following_url": "https://api.github.com/users/hoechenberger/following{/other_user}", "gists_url": "https://api.github.com/users/hoechenberger/gists{/gist_id}", "starred_url": "https://api.github.com/users/hoechenberger/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hoechenberger/subscriptions", "organizations_url": "https://api.github.com/users/hoechenberger/orgs", "repos_url": "https://api.github.com/users/hoechenberger/repos", "events_url": "https://api.github.com/users/hoechenberger/events{/privacy}", "received_events_url": "https://api.github.com/users/hoechenberger/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/mne-tools/mne-python/milestones/21", "html_url": "https://github.com/mne-tools/mne-python/milestone/21", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/milestones/21/labels", "id": 7253492, "node_id": "MI_kwDOABPcUM4Abq30", "number": 21, "title": "1.0", "description": "", "creator": {"login": "larsoner", "id": 2365790, "node_id": "MDQ6VXNlcjIzNjU3OTA=", "avatar_url": "https://avatars.githubusercontent.com/u/2365790?v=4", "gravatar_id": "", "url": "https://api.github.com/users/larsoner", "html_url": "https://github.com/larsoner", "followers_url": "https://api.github.com/users/larsoner/followers", "following_url": "https://api.github.com/users/larsoner/following{/other_user}", "gists_url": "https://api.github.com/users/larsoner/gists{/gist_id}", "starred_url": "https://api.github.com/users/larsoner/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/larsoner/subscriptions", "organizations_url": "https://api.github.com/users/larsoner/orgs", "repos_url": "https://api.github.com/users/larsoner/repos", "events_url": "https://api.github.com/users/larsoner/events{/privacy}", "received_events_url": "https://api.github.com/users/larsoner/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 83, "state": "closed", "created_at": "2021-10-14T16:40:49Z", "updated_at": "2022-05-03T11:29:23Z", "due_on": "2022-02-25T08:00:00Z", "closed_at": "2022-05-03T11:29:23Z"}, "comments": 0, "created_at": "2022-02-25T12:06:15Z", "updated_at": "2022-03-01T17:51:34Z", "closed_at": "2022-03-01T17:51:34Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "For an environment with VTK 9.1, `mne sys_info` doesn't display the VTK version number:\r\n\r\n```shell\r\nipyvtklink:       0.2.2\r\nvtk:              \r\nPyQt5:            5.12.3\r\n```", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/10398/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10398/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/10391", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10391/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10391/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10391/events", "html_url": "https://github.com/mne-tools/mne-python/issues/10391", "id": 1149555830, "node_id": "I_kwDOABPcUM5EhNR2", "number": 10391, "title": "BUG: Notebook server produces blank images by default", "user": {"login": "larsoner", "id": 2365790, "node_id": "MDQ6VXNlcjIzNjU3OTA=", "avatar_url": "https://avatars.githubusercontent.com/u/2365790?v=4", "gravatar_id": "", "url": "https://api.github.com/users/larsoner", "html_url": "https://github.com/larsoner", "followers_url": "https://api.github.com/users/larsoner/followers", "following_url": "https://api.github.com/users/larsoner/following{/other_user}", "gists_url": "https://api.github.com/users/larsoner/gists{/gist_id}", "starred_url": "https://api.github.com/users/larsoner/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/larsoner/subscriptions", "organizations_url": "https://api.github.com/users/larsoner/orgs", "repos_url": "https://api.github.com/users/larsoner/repos", "events_url": "https://api.github.com/users/larsoner/events{/privacy}", "received_events_url": "https://api.github.com/users/larsoner/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/mne-tools/mne-python/milestones/21", "html_url": "https://github.com/mne-tools/mne-python/milestone/21", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/milestones/21/labels", "id": 7253492, "node_id": "MI_kwDOABPcUM4Abq30", "number": 21, "title": "1.0", "description": "", "creator": {"login": "larsoner", "id": 2365790, "node_id": "MDQ6VXNlcjIzNjU3OTA=", "avatar_url": "https://avatars.githubusercontent.com/u/2365790?v=4", "gravatar_id": "", "url": "https://api.github.com/users/larsoner", "html_url": "https://github.com/larsoner", "followers_url": "https://api.github.com/users/larsoner/followers", "following_url": "https://api.github.com/users/larsoner/following{/other_user}", "gists_url": "https://api.github.com/users/larsoner/gists{/gist_id}", "starred_url": "https://api.github.com/users/larsoner/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/larsoner/subscriptions", "organizations_url": "https://api.github.com/users/larsoner/orgs", "repos_url": "https://api.github.com/users/larsoner/repos", "events_url": "https://api.github.com/users/larsoner/events{/privacy}", "received_events_url": "https://api.github.com/users/larsoner/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 83, "state": "closed", "created_at": "2021-10-14T16:40:49Z", "updated_at": "2022-05-03T11:29:23Z", "due_on": "2022-02-25T08:00:00Z", "closed_at": "2022-05-03T11:29:23Z"}, "comments": 1, "created_at": "2022-02-24T17:28:52Z", "updated_at": "2022-02-25T16:05:47Z", "closed_at": "2022-02-25T16:05:47Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "@GuillaumeFavelier see https://mne.discourse.group/t/support-for-3d-brain-visualization-in-headless-mode/4375/12\r\n\r\nI wonder if we should try to be smart about `ANTIALIAS` and set it to False under some circumstances. Maybe we can detect a MESA renderer? Or maybe we just always set it to False for the notebook backend? WDYT?", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/10391/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10391/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/10382", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10382/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10382/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10382/events", "html_url": "https://github.com/mne-tools/mne-python/issues/10382", "id": 1147243953, "node_id": "I_kwDOABPcUM5EYY2x", "number": 10382, "title": "[BUG] Pyvista backend `quiver3d` behavior inconsistent", "user": {"login": "alexrockhill", "id": 13473576, "node_id": "MDQ6VXNlcjEzNDczNTc2", "avatar_url": "https://avatars.githubusercontent.com/u/13473576?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alexrockhill", "html_url": "https://github.com/alexrockhill", "followers_url": "https://api.github.com/users/alexrockhill/followers", "following_url": "https://api.github.com/users/alexrockhill/following{/other_user}", "gists_url": "https://api.github.com/users/alexrockhill/gists{/gist_id}", "starred_url": "https://api.github.com/users/alexrockhill/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alexrockhill/subscriptions", "organizations_url": "https://api.github.com/users/alexrockhill/orgs", "repos_url": "https://api.github.com/users/alexrockhill/repos", "events_url": "https://api.github.com/users/alexrockhill/events{/privacy}", "received_events_url": "https://api.github.com/users/alexrockhill/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2022-02-22T18:36:20Z", "updated_at": "2022-04-05T06:18:42Z", "closed_at": "2022-04-05T06:18:42Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Here is a minimally reproducible example:\r\n\r\n```\r\nimport mne\r\nimport os.path as op\r\ndata_path = mne.datasets.sample.data_path()  # get the sample data path\r\nsubjects_dir = op.join(data_path, 'subjects')\r\nbrain = mne.viz.Brain(subject_id='sample', hemi='both', surf='pial',\r\n                      subjects_dir=subjects_dir, alpha=0.1)\r\nbrain._renderer.quiver3d(0, 0, 0, 0, 0, 10, 'red', 10, 'arrow')  # does nothing\r\nbrain._renderer.quiver3d(0, 0, 0, 0, 0, 10, 'red', 10, 'arrow',\r\n                         scale_mode='scalar')  # still does nothing\r\nbrain._renderer.quiver3d(0, 0, 0, 0, 0, 10, 'red', 10, 'arrow',\r\n                         scale_mode='scalar', scalars=[1])  # works\r\nbrain._renderer.quiver3d(0, 0, 0, 0, 0, 10, 'blue', 20, 'arrow',\r\n                         scalars=[1])  # broken again\r\n```\r\n\r\nWhat I'm stuck on as far as fixing it is that the call goes to `_glyph` with `scalar=[1]` and the key line is 1101:\r\n\r\n```\r\n    if isinstance(scalars, str):\r\n        dataset.active_scalars_name = scalars\r\n```\r\n\r\nWhich shouldn't be a string so I have no idea how the one call that works does in fact work... Maybe @larsoner might have just a minute to take a peek.", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/10382/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10382/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/10374", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10374/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10374/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10374/events", "html_url": "https://github.com/mne-tools/mne-python/issues/10374", "id": 1146342477, "node_id": "I_kwDOABPcUM5EU8xN", "number": 10374, "title": "[DOC, BUG] Source Estimate argument vertices wrong type", "user": {"login": "alexrockhill", "id": 13473576, "node_id": "MDQ6VXNlcjEzNDczNTc2", "avatar_url": "https://avatars.githubusercontent.com/u/13473576?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alexrockhill", "html_url": "https://github.com/alexrockhill", "followers_url": "https://api.github.com/users/alexrockhill/followers", "following_url": "https://api.github.com/users/alexrockhill/following{/other_user}", "gists_url": "https://api.github.com/users/alexrockhill/gists{/gist_id}", "starred_url": "https://api.github.com/users/alexrockhill/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alexrockhill/subscriptions", "organizations_url": "https://api.github.com/users/alexrockhill/orgs", "repos_url": "https://api.github.com/users/alexrockhill/repos", "events_url": "https://api.github.com/users/alexrockhill/events{/privacy}", "received_events_url": "https://api.github.com/users/alexrockhill/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2022-02-22T00:57:28Z", "updated_at": "2022-02-22T15:16:44Z", "closed_at": "2022-02-22T15:16:44Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "The Volume Source Estimates (vector and plain) both say in the docstring that they should take an array of vertices (https://mne.tools/dev/generated/mne.VolVectorSourceEstimate.html#mne.VolVectorSourceEstimate and https://mne.tools/dev/generated/mne.VolSourceEstimate.html#mne.VolSourceEstimate). When this is followed a cryptic error from `np.diff` is thrown. SourceEstimate (https://mne.tools/dev/generated/mne.SourceEstimate.html#mne.SourceEstimate) has a nice explanation that they are supposed to be lists of length 2 for each hemisphere. Since the volume combines the hemispheres, this could be a list of length 1 but that's a bit unnecessary, it seems that the documentation maybe shouldn't be changed but the vertices should be wrapped in a list when passed out of the volume source estimates.", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/10374/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10374/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/10360", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10360/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10360/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10360/events", "html_url": "https://github.com/mne-tools/mne-python/issues/10360", "id": 1142160820, "node_id": "I_kwDOABPcUM5EE_20", "number": 10360, "title": "Only the exact match ch is detected by eog, misc and stim_channel of read_raw_edf", "user": {"login": "rcmdnk", "id": 1818935, "node_id": "MDQ6VXNlcjE4MTg5MzU=", "avatar_url": "https://avatars.githubusercontent.com/u/1818935?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rcmdnk", "html_url": "https://github.com/rcmdnk", "followers_url": "https://api.github.com/users/rcmdnk/followers", "following_url": "https://api.github.com/users/rcmdnk/following{/other_user}", "gists_url": "https://api.github.com/users/rcmdnk/gists{/gist_id}", "starred_url": "https://api.github.com/users/rcmdnk/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rcmdnk/subscriptions", "organizations_url": "https://api.github.com/users/rcmdnk/orgs", "repos_url": "https://api.github.com/users/rcmdnk/repos", "events_url": "https://api.github.com/users/rcmdnk/events{/privacy}", "received_events_url": "https://api.github.com/users/rcmdnk/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 8, "created_at": "2022-02-18T01:42:12Z", "updated_at": "2022-02-18T11:04:39Z", "closed_at": "2022-02-18T11:04:39Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "#### Describe the bug\r\n`eog`, `misc`, and `stim_channel` of [read_raw_edf](https://github.com/mne-tools/mne-python/blob/ad095ba6e0e5b97ddbbb0def3846fa8551add30d/mne/io/edf/edf.py#L1236) are used to assign the channel type for each channel.\r\n\r\nCurrently, only the exact matched channel can be detected.\r\nNevertheless, some tutorials, such as [Sleep stage classification from polysomnography (PSG) data - MNE 0.24.1 documentation](https://mne.tools/stable/auto_tutorials/clinical/60_sleep.html#tut-sleep-stage-classif), assume partial match and the results may differ from what is expected.\r\n\r\n`stim_channel` is checked by [_check_stim_channel](https://github.com/mne-tools/mne-python/blob/ad095ba6e0e5b97ddbbb0def3846fa8551add30d/mne/io/edf/edf.py#L1156).\r\n\r\n`eog` and `misc` is checked directly in[_get_info](https://github.com/mne-tools/mne-python/blob/ad095ba6e0e5b97ddbbb0def3846fa8551add30d/mne/io/edf/edf.py#L440).\r\n\r\nI'm not sure if this is a bug or intentional behavior.\r\nThe behavior of some programs may change if this is changed to an exact match.\r\n(If the EDF file contains a long name channel whose part matches another stim/misc/eog channel...)\r\n\r\nIf this is intentional behavior, these tutorials should be fixed.\r\nOtherwise, these codes should be updated to allow the partial match.\r\n\r\n#### Steps to reproduce\r\n\r\n```python\r\nimport mne\r\n\r\n\r\nfiles = mne.datasets.sleep_physionet.age.fetch_data(subjects=[0], recording=[1])\r\nraw = mne.io.read_raw_edf(files[0][0], eog=['eog'], stim_channel='marker', misc=['rectal'])\r\nfor c, t in zip(raw.ch_names, raw.get_channel_types()):\r\n    print(f'{c}: {t}')\r\n```\r\n\r\n\r\n\r\n#### Expected results\r\n\r\n```\r\nEEG Fpz-Cz: eeg\r\nEEG Pz-Oz: eeg\r\nEOG horizontal: eog\r\nResp oro-nasal: eeg\r\nEMG submental: eeg\r\nTemp rectal: misc\r\nEvent marker: stim\r\n```\r\n\r\n#### Actual results\r\n```\r\nEEG Fpz-Cz: eeg\r\nEEG Pz-Oz: eeg\r\nEOG horizontal: eeg\r\nResp oro-nasal: eeg\r\nEMG submental: eeg\r\nTemp rectal: eeg\r\nEvent marker: eeg\r\n```\r\n\r\nAll channels show `eeg` (default type).\r\n\r\n#### Additional information\r\nmne.sys_info():\r\n\r\n```\r\nPlatform:       Linux-5.4.144+-x86_64-with-Ubuntu-18.04-bionic\r\nPython:         3.7.12 (default, Jan 15 2022, 18:48:18)  [GCC 7.5.0]\r\nExecutable:     /usr/bin/python3\r\nCPU:            x86_64: 2 cores\r\nMemory:         12.7 GB\r\n\r\nmne:            0.24.1\r\nnumpy:          1.21.5 {blas=openblas, lapack=openblas}\r\nscipy:          1.4.1\r\nmatplotlib:     3.2.2 {backend=module://ipykernel.pylab.backend_inline}\r\n\r\nsklearn:        1.0.2\r\nnumba:          0.51.2\r\nnibabel:        3.0.2\r\nnilearn:        Not found\r\ndipy:           Not found\r\ncupy:           Not found\r\npandas:         1.3.5\r\nmayavi:         Not found\r\npyvista:        Not found\r\npyvistaqt:      Not found\r\nipyvtklink:     Not found\r\nvtk:            Not found\r\nPyQt5:          Not found\r\nipympl:         Not found\r\nmne_qt_browser: Not found\r\npooch:          v1.6.0\r\n```", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/10360/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10360/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/10354", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10354/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10354/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10354/events", "html_url": "https://github.com/mne-tools/mne-python/issues/10354", "id": 1140362178, "node_id": "I_kwDOABPcUM5D-IvC", "number": 10354, "title": "unexpected difference in output for `linear_regression_raw` vs. `epochs.average()`", "user": {"login": "teonbrooks", "id": 1578674, "node_id": "MDQ6VXNlcjE1Nzg2NzQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1578674?v=4", "gravatar_id": "", "url": "https://api.github.com/users/teonbrooks", "html_url": "https://github.com/teonbrooks", "followers_url": "https://api.github.com/users/teonbrooks/followers", "following_url": "https://api.github.com/users/teonbrooks/following{/other_user}", "gists_url": "https://api.github.com/users/teonbrooks/gists{/gist_id}", "starred_url": "https://api.github.com/users/teonbrooks/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/teonbrooks/subscriptions", "organizations_url": "https://api.github.com/users/teonbrooks/orgs", "repos_url": "https://api.github.com/users/teonbrooks/repos", "events_url": "https://api.github.com/users/teonbrooks/events{/privacy}", "received_events_url": "https://api.github.com/users/teonbrooks/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2022-02-16T17:46:20Z", "updated_at": "2022-02-24T17:40:16Z", "closed_at": "2022-02-24T17:40:16Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "#### Describe the bug\r\n\r\nI noticed that when I use `linear_regression_raw`, this returns a dict of evokeds. However, when I perform the method `epochs.average(by_event_type=True)`, this returns a list of evokeds. I know that there's a major release coming soon so I was wondering if we wanted to keep this pattern or if we wanted to standardize it so that they would both output the same type.\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/10354/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10354/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/10343", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10343/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10343/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10343/events", "html_url": "https://github.com/mne-tools/mne-python/issues/10343", "id": 1137757817, "node_id": "I_kwDOABPcUM5D0M55", "number": 10343, "title": "BUG: URL broken", "user": {"login": "larsoner", "id": 2365790, "node_id": "MDQ6VXNlcjIzNjU3OTA=", "avatar_url": "https://avatars.githubusercontent.com/u/2365790?v=4", "gravatar_id": "", "url": "https://api.github.com/users/larsoner", "html_url": "https://github.com/larsoner", "followers_url": "https://api.github.com/users/larsoner/followers", "following_url": "https://api.github.com/users/larsoner/following{/other_user}", "gists_url": "https://api.github.com/users/larsoner/gists{/gist_id}", "starred_url": "https://api.github.com/users/larsoner/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/larsoner/subscriptions", "organizations_url": "https://api.github.com/users/larsoner/orgs", "repos_url": "https://api.github.com/users/larsoner/repos", "events_url": "https://api.github.com/users/larsoner/events{/privacy}", "received_events_url": "https://api.github.com/users/larsoner/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/mne-tools/mne-python/milestones/21", "html_url": "https://github.com/mne-tools/mne-python/milestone/21", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/milestones/21/labels", "id": 7253492, "node_id": "MI_kwDOABPcUM4Abq30", "number": 21, "title": "1.0", "description": "", "creator": {"login": "larsoner", "id": 2365790, "node_id": "MDQ6VXNlcjIzNjU3OTA=", "avatar_url": "https://avatars.githubusercontent.com/u/2365790?v=4", "gravatar_id": "", "url": "https://api.github.com/users/larsoner", "html_url": "https://github.com/larsoner", "followers_url": "https://api.github.com/users/larsoner/followers", "following_url": "https://api.github.com/users/larsoner/following{/other_user}", "gists_url": "https://api.github.com/users/larsoner/gists{/gist_id}", "starred_url": "https://api.github.com/users/larsoner/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/larsoner/subscriptions", "organizations_url": "https://api.github.com/users/larsoner/orgs", "repos_url": "https://api.github.com/users/larsoner/repos", "events_url": "https://api.github.com/users/larsoner/events{/privacy}", "received_events_url": "https://api.github.com/users/larsoner/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 83, "state": "closed", "created_at": "2021-10-14T16:40:49Z", "updated_at": "2022-05-03T11:29:23Z", "due_on": "2022-02-25T08:00:00Z", "closed_at": "2022-05-03T11:29:23Z"}, "comments": 1, "created_at": "2022-02-14T19:43:27Z", "updated_at": "2022-02-15T18:00:40Z", "closed_at": "2022-02-15T18:00:40Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "@teonbrooks what URL do you want? Currently [we get](https://app.circleci.com/pipelines/github/mne-tools/mne-python/12860/workflows/883d7bf1-72a5-4036-a399-343929e59811/jobs/41625):\r\n```\r\ngenerated/_names.rst:11: [broken] https://teonbrooks.github.io: 404 Client Error: Not Found for url: https://teonbrooks.github.io/\r\n```", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/10343/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10343/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/10321", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10321/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10321/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10321/events", "html_url": "https://github.com/mne-tools/mne-python/issues/10321", "id": 1130988856, "node_id": "I_kwDOABPcUM5DaYU4", "number": 10321, "title": "BUG: standard_1020.elc fiducials inconsistent with fsaverage", "user": {"login": "larsoner", "id": 2365790, "node_id": "MDQ6VXNlcjIzNjU3OTA=", "avatar_url": "https://avatars.githubusercontent.com/u/2365790?v=4", "gravatar_id": "", "url": "https://api.github.com/users/larsoner", "html_url": "https://github.com/larsoner", "followers_url": "https://api.github.com/users/larsoner/followers", "following_url": "https://api.github.com/users/larsoner/following{/other_user}", "gists_url": "https://api.github.com/users/larsoner/gists{/gist_id}", "starred_url": "https://api.github.com/users/larsoner/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/larsoner/subscriptions", "organizations_url": "https://api.github.com/users/larsoner/orgs", "repos_url": "https://api.github.com/users/larsoner/repos", "events_url": "https://api.github.com/users/larsoner/events{/privacy}", "received_events_url": "https://api.github.com/users/larsoner/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2022-02-10T21:16:41Z", "updated_at": "2022-02-12T10:18:10Z", "closed_at": "2022-02-12T10:18:10Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "IIUC `standard_1020.elc` is in MNI coordinates, i.e., `fsaverage`'s MRI coordinates:\r\n\r\nhttps://robertoostenveld.nl/electrode/\r\n\r\n# Bug 1\r\n\r\nHowever, the fiducials there do not match ours for `fsaverage`. The first entry in `1005.elc` is LPA and is listed as:\r\n```\r\n-86.0761 -19.9897 -47.9860\r\n```\r\nbut\r\n```\r\n>>> mne.io.read_fiducials(op.join(op.dirname(mne.__file__), 'data', 'fsaverage', 'fsaverage-fiducials.fif'))[0][0]['r'] * 1000\r\narray([-80.61612 , -29.088753, -41.31077 ], dtype=float32)\r\n```\r\nI noticed this because, if I compute the native(MNI/fsaverage-MRI)->head transform for the montage, and the MRI->head transform from the canonical fsaverage fiducial locations, they differ:\r\n```\r\n>>> import mne\r\n>>> montage = mne.channels.make_standard_montage('standard_1020')\r\n>>> mne.channels.compute_native_head_t(montage)  # chosen because this is the linalg.norm of the positions\r\n<Transform | unknown->head>\r\n[[ 0.99999996 -0.00011404 -0.00026183 -0.0000085 ]\r\n [ 0.00013334  0.99718902  0.07492685  0.02256279]\r\n [ 0.00025255 -0.07492688  0.997189    0.04444911]\r\n [ 0.          0.          0.          1.        ]]\r\n>>> \r\n>>> mne.transforms._get_trans('fsaverage', 'mri', 'head')\r\n(<Transform | MRI (surface RAS)->head>\r\n[[ 0.99999354  0.00355187  0.00020202 -0.00176273]\r\n [-0.00355761  0.99838917  0.05662618  0.03109437]\r\n [-0.00000059 -0.0566263   0.99839549  0.03959725]\r\n [ 0.          0.          0.          1.        ]], '/home/larsoner/python/mne-python/mne/data/fsaverage/fsaverage-trans.fif')\r\n```\r\n\r\n# Bug 2\r\n\r\nThe `1005` is also off (by 1-2mm) from `standard_1020`:\r\n```\r\n>>> montage = mne.channels.make_standard_montage('standard_1005')\r\n>>> mne.channels.compute_native_head_t(montage)\r\n<Transform | unknown->head>\r\n[[ 0.99999996 -0.00011404 -0.00026183 -0.00000869]\r\n [ 0.00013334  0.99718902  0.07492685  0.02305295]\r\n [ 0.00025255 -0.07492688  0.997189    0.04541475]\r\n [ 0.          0.          0.          1.        ]]\r\n```\r\nThis is probably due to our `head_size` parameter, because of this:\r\n\r\nhttps://github.com/mne-tools/mne-python/blob/92393e880316d5ba07f67cd62571fbe80d37cc36/mne/channels/_standard_montage_utils.py#L99\r\n\r\n## Proposal\r\n\r\nI think we might want to add support for `head_size=None`, meaning \"don't scale at all\". Then it's possible/likely that the 1005 will match the 1020, fixing bug 2.\r\n\r\nAfter that, the 1020/1005 fiducials still won't match those of `fsaverage`, though, as evidenced by using `head_size=99.1163` (which is the `np.linalg.norm` from `scale` above) and computing the trans:\r\n```\r\n<Transform | unknown->head>\r\n[[ 0.99999996 -0.00011404 -0.00026183 -0.00886868]\r\n [ 0.00013334  0.99718902  0.07492685 23.54041896]\r\n [ 0.00025255 -0.07492688  0.997189   46.37506854]\r\n [ 0.          0.          0.          1.        ]]\r\n```\r\nso I think we should maybe add a new param `make_standard_1020(..., fiducials=None | 'fsaverage')` to replace the fiducials with those of `fsaverage` if requested. Alternatively, we could add a `montage.set_fiducials('fsaverage')` or something to override the fiducials with those of fsaverage for users who know their montage is in MNI/fsaverage space already, and want to make `trans='fsaverage'` work properly.\r\n\r\nFinally, we might as well set the coordinate frame of standard_1020 and standard_1005 as `mri` or `mni` (rather than `unknown`), since that's what they're in.\r\n\r\nTangentially related to #7141", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/10321/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10321/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/10314", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10314/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10314/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10314/events", "html_url": "https://github.com/mne-tools/mne-python/issues/10314", "id": 1128568813, "node_id": "I_kwDOABPcUM5DRJft", "number": 10314, "title": "raw.plot() does not produce specified background color.", "user": {"login": "fishbacp", "id": 40703653, "node_id": "MDQ6VXNlcjQwNzAzNjUz", "avatar_url": "https://avatars.githubusercontent.com/u/40703653?v=4", "gravatar_id": "", "url": "https://api.github.com/users/fishbacp", "html_url": "https://github.com/fishbacp", "followers_url": "https://api.github.com/users/fishbacp/followers", "following_url": "https://api.github.com/users/fishbacp/following{/other_user}", "gists_url": "https://api.github.com/users/fishbacp/gists{/gist_id}", "starred_url": "https://api.github.com/users/fishbacp/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/fishbacp/subscriptions", "organizations_url": "https://api.github.com/users/fishbacp/orgs", "repos_url": "https://api.github.com/users/fishbacp/repos", "events_url": "https://api.github.com/users/fishbacp/events{/privacy}", "received_events_url": "https://api.github.com/users/fishbacp/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "mmagnuski", "id": 8452354, "node_id": "MDQ6VXNlcjg0NTIzNTQ=", "avatar_url": "https://avatars.githubusercontent.com/u/8452354?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mmagnuski", "html_url": "https://github.com/mmagnuski", "followers_url": "https://api.github.com/users/mmagnuski/followers", "following_url": "https://api.github.com/users/mmagnuski/following{/other_user}", "gists_url": "https://api.github.com/users/mmagnuski/gists{/gist_id}", "starred_url": "https://api.github.com/users/mmagnuski/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mmagnuski/subscriptions", "organizations_url": "https://api.github.com/users/mmagnuski/orgs", "repos_url": "https://api.github.com/users/mmagnuski/repos", "events_url": "https://api.github.com/users/mmagnuski/events{/privacy}", "received_events_url": "https://api.github.com/users/mmagnuski/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "mmagnuski", "id": 8452354, "node_id": "MDQ6VXNlcjg0NTIzNTQ=", "avatar_url": "https://avatars.githubusercontent.com/u/8452354?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mmagnuski", "html_url": "https://github.com/mmagnuski", "followers_url": "https://api.github.com/users/mmagnuski/followers", "following_url": "https://api.github.com/users/mmagnuski/following{/other_user}", "gists_url": "https://api.github.com/users/mmagnuski/gists{/gist_id}", "starred_url": "https://api.github.com/users/mmagnuski/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mmagnuski/subscriptions", "organizations_url": "https://api.github.com/users/mmagnuski/orgs", "repos_url": "https://api.github.com/users/mmagnuski/repos", "events_url": "https://api.github.com/users/mmagnuski/events{/privacy}", "received_events_url": "https://api.github.com/users/mmagnuski/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 2, "created_at": "2022-02-09T13:50:38Z", "updated_at": "2022-02-11T13:48:30Z", "closed_at": "2022-02-11T13:48:30Z", "author_association": "NONE", "active_lock_reason": null, "body": "#### Describe the bug\r\n*raw.plot resluts in a graph that does not use specified background color*\r\n\r\nExample:\r\n\r\n```python\r\nraw.plot(bgcolor='y', color='r')\r\n```\r\n\r\n\r\n#### Expected results\r\nBackground of plot should be yellow and traces colored red.\r\n\r\n\r\n#### Actual results\r\nBackground is white and traces are red.\r\n\r\n\r\n#### Additional information\r\nExperimentation with other background color options does not change the outcome. \r\n", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/10314/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10314/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/10311", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10311/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10311/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10311/events", "html_url": "https://github.com/mne-tools/mne-python/issues/10311", "id": 1127758708, "node_id": "I_kwDOABPcUM5DODt0", "number": 10311, "title": "Zero padded channel labels don't seem to read correctly in the electrodes.tsv file", "user": {"login": "Aaronearlerichardson", "id": 35852585, "node_id": "MDQ6VXNlcjM1ODUyNTg1", "avatar_url": "https://avatars.githubusercontent.com/u/35852585?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Aaronearlerichardson", "html_url": "https://github.com/Aaronearlerichardson", "followers_url": "https://api.github.com/users/Aaronearlerichardson/followers", "following_url": "https://api.github.com/users/Aaronearlerichardson/following{/other_user}", "gists_url": "https://api.github.com/users/Aaronearlerichardson/gists{/gist_id}", "starred_url": "https://api.github.com/users/Aaronearlerichardson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Aaronearlerichardson/subscriptions", "organizations_url": "https://api.github.com/users/Aaronearlerichardson/orgs", "repos_url": "https://api.github.com/users/Aaronearlerichardson/repos", "events_url": "https://api.github.com/users/Aaronearlerichardson/events{/privacy}", "received_events_url": "https://api.github.com/users/Aaronearlerichardson/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2022-02-08T21:07:07Z", "updated_at": "2022-02-09T15:39:48Z", "closed_at": "2022-02-09T15:39:48Z", "author_association": "NONE", "active_lock_reason": null, "body": "\r\n#### Describe the bug\r\nI have a BIDS complaint database that I created to use mne's data processing pipelines on. The `read_raw_bids` function executes relatively successfully, but doesn't seem to keep all of my channel locations intact. Upon investigation, it appears that this is because some of the channel labels have zero padding to keep the names consistent (a practice often used in the BIDS specification), and that channels with said padding end up lost.\r\n\r\n\r\n#### Steps to reproduce\r\nHere is the contents of the electrodes.tsv file in question:\r\n```\r\nname\tx\ty\tz\tsize\themisphere\r\nLAMT12\t-49.0\t4.333\t-22.667\t0.2\tLD\r\nLAMT11\t-46.0555\t4.333\t-22.7225\t0.2\tLD\r\nLAMT10\t-43.111\t4.333\t-22.778\t0.2\tLD\r\nLAMT09\t-40.1665\t4.333\t-22.8335\t0.2\tLD\r\nLAMT08\t-37.222\t4.333\t-22.889\t0.2\tLD\r\nLAMT07\t-34.2775\t4.333\t-22.9445\t0.2\tLD\r\nLAMT06\t-31.333\t4.333\t-23.0\t0.2\tLD\r\nLAMT05\t-27.9522\t4.3806\t-23.1428\t0.2\tLD\r\nLAMT04\t-24.5714\t4.4282\t-23.2856\t0.2\tLD\r\nLAMT03\t-21.1906\t4.4758\t-23.4284\t0.2\tLD\r\nLAMT02\t-17.8098\t4.5234\t-23.5712\t0.2\tLD\r\nLAMT01\t-14.429\t4.571\t-23.714\t0.2\tLD\r\nLAST08\t-54.0\t-2.667\t-9.667\t0.2\tLD\r\nLAST07\t-50.333\t-2.667\t-10.0\t0.2\tLD\r\nLAST06\t-46.667\t-2.667\t-10.0\t0.2\tLD\r\nLAST05\t-43.4753\t-2.7003\t-9.975\t0.2\tLD\r\nLAST04\t-40.2835\t-2.7335\t-9.95\t0.2\tLD\r\nLAST03\t-37.0917\t-2.7668\t-9.925\t0.2\tLD\r\nLAST02\t-33.9\t-2.8\t-9.9\t0.2\tLD\r\nLAST01\t-30.55\t-2.8222\t-9.9388\t0.2\tLD\r\nLPO10\t-37.0\t-80.333\t16.333\t0.2\tLD\r\nLPO09\t-34.8\t-78.4\t14.4\t0.2\tLD\r\nLPO08\t-32.72\t-76.4\t12.48\t0.2\tLD\r\nLPO07\t-30.64\t-74.4\t10.56\t0.2\tLD\r\nLPO06\t-28.56\t-72.4\t8.64\t0.2\tLD\r\nLPO05\t-26.48\t-70.4\t6.72\t0.2\tLD\r\nLPO04\t-24.4\t-68.4\t4.8\t0.2\tLD\r\nLPO03\t-22.0\t-66.2\t2.8\t0.2\tLD\r\nLPO02\t-19.8571\t-64.181\t0.8667\t0.2\tLD\r\nLPO01\t-17.7143\t-62.162\t-1.0666\t0.2\tLD\r\nLAO16\t-54.2778\t-68.7778\t14.0\t0.2\tLD\r\nLAO15\t-50.8889\t-67.8889\t14.5\t0.2\tLD\r\nLAO14\t-47.5\t-67.0\t15.0\t0.2\tLD\r\nLAO13\t-44.0\t-66.5\t16.0\t0.2\tLD\r\nLAO12\t-41.0\t-65.5\t16.0\t0.2\tLD\r\nLAO11\t-37.5714\t-64.5714\t16.5\t0.2\tLD\r\nLAO10\t-34.1429\t-63.6429\t17.0\t0.2\tLD\r\nLAO09\t-30.7143\t-62.7143\t17.5\t0.2\tLD\r\nLAO08\t-27.2857\t-61.7857\t18.0\t0.2\tLD\r\nLAO07\t-23.8571\t-60.8571\t18.5\t0.2\tLD\r\nLAO06\t-20.4286\t-59.9286\t19.0\t0.2\tLD\r\nLAO05\t-17.0\t-59.0\t19.5\t0.2\tLD\r\nLAO04\t-13.6111\t-58.1111\t20.0\t0.2\tLD\r\nLAO03\t-10.2222\t-57.2222\t20.5\t0.2\tLD\r\nLAO02\t-6.8333\t-56.3333\t21.0\t0.2\tLD\r\nLAO01\t-3.4444\t-55.4444\t21.5\t0.2\tLD\r\nLPIT16\t-54.5417\t-45.625\t-4.5833\t0.2\tLD\r\nLPIT15\t-52.0\t-45.5\t-4.0\t0.2\tLD\r\nLPIT14\t-48.5\t-46.0\t-3.0\t0.2\tLD\r\nLPIT13\t-46.15\t-45.85\t-2.5\t0.2\tLD\r\nLPIT12\t-43.8\t-45.7\t-2.0\t0.2\tLD\r\nLPIT11\t-41.45\t-45.55\t-1.5\t0.2\tLD\r\nLPIT10\t-39.1\t-45.4\t-1.0\t0.2\tLD\r\nLPIT09\t-36.75\t-45.25\t-0.5\t0.2\tLD\r\nLPIT08\t-34.4\t-45.1\t0.0\t0.2\tLD\r\nLPIT07\t-32.05\t-44.95\t0.5\t0.2\tLD\r\nLPIT06\t-29.7\t-44.8\t1.0\t0.2\tLD\r\nLPIT05\t-27.35\t-44.65\t1.5\t0.2\tLD\r\nLPIT04\t-25.0\t-44.5\t2.0\t0.2\tLD\r\nLPIT03\t-21.5\t-44.0\t3.0\t0.2\tLD\r\nLPIT02\t-18.9583\t-43.875\t3.5833\t0.2\tLD\r\nLPIT01\t-16.4167\t-43.75\t4.1667\t0.2\tLD\r\nLPSP16\t-58.167\t-39.833\t43.0\t0.2\tLD\r\nLPSP15\t-54.75\t-38.75\t42.25\t0.2\tLD\r\nLPSP14\t-51.3819\t-37.9652\t41.7292\t0.2\tLD\r\nLPSP13\t-48.0138\t-37.1805\t41.2083\t0.2\tLD\r\nLPSP12\t-44.6457\t-36.3957\t40.6875\t0.2\tLD\r\nLPSP11\t-41.2777\t-35.611\t40.1667\t0.2\tLD\r\nLPSP10\t-37.9096\t-34.8262\t39.6458\t0.2\tLD\r\nLPSP09\t-34.5415\t-34.0415\t39.125\t0.2\tLD\r\nLPSP08\t-31.1734\t-33.2567\t38.6042\t0.2\tLD\r\nLPSP07\t-27.8053\t-32.472\t38.0833\t0.2\tLD\r\nLPSP06\t-24.4372\t-31.6872\t37.5625\t0.2\tLD\r\nLPSP05\t-21.0692\t-30.9025\t37.0417\t0.2\tLD\r\nLPSP04\t-17.7011\t-30.1177\t36.5208\t0.2\tLD\r\nLPSP03\t-14.333\t-29.333\t36.0\t0.2\tLD\r\nLPSP02\t-10.9611\t-28.5253\t35.4615\t0.2\tLD\r\nLPSP01\t-7.5893\t-27.7176\t34.9231\t0.2\tLD\r\nLPIP16\t-53.4\t-42.4\t31.8\t0.2\tLD\r\nLPIP15\t-49.25\t-41.75\t31.5\t0.2\tLD\r\nLPIP14\t-45.3583\t-40.9083\t31.45\t0.2\tLD\r\nLPIP13\t-41.4666\t-40.0666\t31.4\t0.2\tLD\r\nLPIP12\t-37.5749\t-39.2249\t31.35\t0.2\tLD\r\nLPIP11\t-33.6832\t-38.3832\t31.3\t0.2\tLD\r\nLPIP10\t-29.7915\t-37.5415\t31.25\t0.2\tLD\r\nLPIP09\t-25.8998\t-36.6998\t31.2\t0.2\tLD\r\nLPIP08\t-22.0081\t-35.8581\t31.15\t0.2\tLD\r\nLPIP07\t-18.1164\t-35.0164\t31.1\t0.2\tLD\r\nLPIP06\t-14.2247\t-34.1747\t31.05\t0.2\tLD\r\nLPIP05\t-10.333\t-33.333\t31.0\t0.2\tLD\r\nLPIP04\t-7.0\t-32.5\t31.0\t0.2\tLD\r\nLPIP03\t-3.0\t-31.5\t31.0\t0.2\tLD\r\nLPIP02\t0.8769\t-30.6615\t30.9385\t0.2\tLD\r\nLPIP01\t4.7538\t-29.8231\t30.8769\t0.2\tLD\r\nLPST10\t-59.2428\t-27.4276\t16.44\t0.2\tLD\r\nLPST09\t-55.769\t-26.923\t15.0\t0.2\tLD\r\nLPST08\t-52.2267\t-26.3423\t13.55\t0.2\tLD\r\nLPST07\t-48.6845\t-25.7615\t12.1\t0.2\tLD\r\nLPST06\t-45.1423\t-25.1808\t10.65\t0.2\tLD\r\nLPST05\t-41.6\t-24.6\t9.2\t0.2\tLD\r\nLPST04\t-38.4\t-24.4\t7.8\t0.2\tLD\r\nLPST03\t-34.9262\t-23.8954\t6.36\t0.2\tLD\r\nLPST02\t-31.4524\t-23.3908\t4.92\t0.2\tLD\r\nLPST01\t-27.9786\t-22.8862\t3.48\t0.2\tLD\r\nLMMT14\t-57.5\t-22.5\t-2.0\t0.2\tLD\r\nLMMT13\t-54.0\t-22.25\t-3.0\t0.2\tLD\r\nLMMT12\t-50.5\t-21.5\t-4.0\t0.2\tLD\r\nLMMT11\t-47.1944\t-20.9167\t-4.7222\t0.2\tLD\r\nLMMT10\t-43.8889\t-20.3333\t-5.4444\t0.2\tLD\r\nLMMT09\t-40.5833\t-19.75\t-6.1667\t0.2\tLD\r\nLMMT08\t-37.2778\t-19.1667\t-6.8889\t0.2\tLD\r\nLMMT07\t-33.9722\t-18.5833\t-7.6111\t0.2\tLD\r\nLMMT06\t-30.6667\t-18.0\t-8.3333\t0.2\tLD\r\nLMMT05\t-27.3611\t-17.4167\t-9.0556\t0.2\tLD\r\nLMMT04\t-24.0556\t-16.8333\t-9.7778\t0.2\tLD\r\nLMMT03\t-20.75\t-16.25\t-10.5\t0.2\tLD\r\nLMMT02\t-17.4091\t-15.6818\t-11.2727\t0.2\tLD\r\nLMMT01\t-14.0682\t-15.1136\t-12.0455\t0.2\tLD\r\nLMIT10\t-57.75\t-31.75\t-6.75\t0.2\tLD\r\nLMIT09\t-54.4\t-31.8\t-7.6\t0.2\tLD\r\nLMIT08\t-50.97\t-31.79\t-8.33\t0.2\tLD\r\nLMIT07\t-47.54\t-31.78\t-9.06\t0.2\tLD\r\nLMIT06\t-44.11\t-31.77\t-9.79\t0.2\tLD\r\nLMIT05\t-40.68\t-31.76\t-10.52\t0.2\tLD\r\nLMIT04\t-37.25\t-31.75\t-11.25\t0.2\tLD\r\nLMIT03\t-33.667\t-31.667\t-12.0\t0.2\tLD\r\nLMIT02\t-30.2266\t-31.6552\t-12.75\t0.2\tLD\r\nLMIT01\t-26.7862\t-31.6433\t-13.5\t0.2\tLD\r\n```\r\n\r\n\r\n#### Expected results\r\nExpected code to read channel labels correctly, and assign labels to locations in the digital montage.\r\n\r\n\r\n#### Actual results\r\n```\r\nTypeError: not all arguments converted during string formatting\r\nCall stack:\r\n  File \"c:\\Users\\ae166\\share\\git\\IEEG_toolboxes\\Python\\PreProcess\\preProcess.py\", line 278, in <module>\r\n    filt_main_2(layout)\r\n  File \"c:\\Users\\ae166\\share\\git\\IEEG_toolboxes\\Python\\PreProcess\\preProcess.py\", line 250, in filt_main_2\r\n    raw_data = raw_from_layout(layout, sub_id, run)\r\n  File \"c:\\Users\\ae166\\share\\git\\IEEG_toolboxes\\Python\\PreProcess\\preProcess.py\", line 189, in raw_from_layout\r\n    new_raw = read_raw_bids(bids_path=BIDS_path)\r\n  File \"<decorator-gen-586>\", line 24, in read_raw_bids\r\n  File \"C:\\Users\\ae166\\Anaconda3\\envs\\preprocess\\lib\\site-packages\\mne_bids\\read.py\", line 722, in read_raw_bids\r\n    _read_dig_bids(electrodes_fname, coordsystem_fname,\r\n  File \"C:\\Users\\ae166\\Anaconda3\\envs\\preprocess\\lib\\site-packages\\mne_bids\\dig.py\", line 519, in _read_dig_bids\r\n    montage = _handle_electrodes_reading(electrodes_fpath, coord_frame,\r\n  File \"C:\\Users\\ae166\\Anaconda3\\envs\\preprocess\\lib\\site-packages\\mne_bids\\dig.py\", line 42, in _handle_electrodes_reading\r\n    logger.info(\"The read in electrodes file is: \\n\", summary_str)\r\nMessage: 'The read in electrodes file is: \\n'\r\nArguments: ([('name', ['LAMT12', 'LAMT11', 'LAMT10', 'LAMT09', 'LAMT08', 'LAMT07', 'LAMT06', 'LAMT05', 'LAMT04', 'LAMT03', 'LAMT02', 'LAMT01', 'LAST08', 'LAST07', 'LAST06', 'LAST05', 'LAST04', 'LAST03', 'LAST02', 'LAST01', 'LPO10', 'LPO09', 'LPO08', 'LPO07', 'LPO06', 'LPO05', 'LPO04', 'LPO03', 'LPO02', 'LPO01', 'LAO16', 'LAO15', 'LAO14', 'LAO13', 'LAO12', 'LAO11', 'LAO10', 'LAO09', 'LAO08', 'LAO07', 'LAO06', 'LAO05', 'LAO04', 'LAO03', 'LAO02', 'LAO01', 'LPIT16', 'LPIT15', 'LPIT14', 'LPIT13', 'LPIT12', 'LPIT11', 'LPIT10', 'LPIT09', 'LPIT08', 'LPIT07', 'LPIT06', 'LPIT05', 'LPIT04', 'LPIT03', 'LPIT02', 'LPIT01', 'LPSP16', 'LPSP15', 'LPSP14', 'LPSP13', 'LPSP12', 'LPSP11', 'LPSP10', 'LPSP09', 'LPSP08', 'LPSP07', 'LPSP06', 'LPSP05', 'LPSP04', 'LPSP03', 'LPSP02', 'LPSP01', 'LPIP16', 'LPIP15', 'LPIP14', 'LPIP13', 'LPIP12', 'LPIP11', 'LPIP10', 'LPIP09', 'LPIP08', 'LPIP07', 'LPIP06', 'LPIP05', 'LPIP04', 'LPIP03', 'LPIP02', 'LPIP01', 'LPST10', 'LPST09', 'LPST08', 'LPST07', 'LPST06', 'LPST05', 'LPST04', 'LPST03', 'LPST02', 'LPST01', 'LMMT14', 'LMMT13', 'LMMT12', 'LMMT11', 'LMMT10', 'LMMT09', 'LMMT08', 'LMMT07', 'LMMT06', 'LMMT05', 'LMMT04', 'LMMT03', 'LMMT02', 'LMMT01', 'LMIT10', 'LMIT09', 'LMIT08', 'LMIT07', 'LMIT06', 'LMIT05', 'LMIT04', 'LMIT03', 'LMIT02', 'LMIT01']), ('x', ['-49.0', '-46.0555', '-43.111', '-40.1665', '-37.222', '-34.2775', '-31.333', '-27.9522', '-24.5714', '-21.1906', '-17.8098', '-14.429', '-54.0', '-50.333', '-46.667', '-43.4753', '-40.2835', '-37.0917', '-33.9', '-30.55', '-37.0', '-34.8', '-32.72', '-30.64', '-28.56', '-26.48', '-24.4', '-22.0', '-19.8571', '-17.7143', '-54.2778', '-50.8889', '-47.5', '-44.0', '-41.0', '-37.5714', '-34.1429', '-30.7143', '-27.2857', '-23.8571', '-20.4286', '-17.0', '-13.6111', '-10.2222', '-6.8333', '-3.4444', '-54.5417', '-52.0', '-48.5', '-46.15', '-43.8', '-41.45', '-39.1', '-36.75', '-34.4', '-32.05', '-29.7', '-27.35', '-25.0', '-21.5', '-18.9583', '-16.4167', '-58.167', '-54.75', '-51.3819', '-48.0138', '-44.6457', '-41.2777', '-37.9096', '-34.5415', '-31.1734', '-27.8053', '-24.4372', '-21.0692', '-17.7011', '-14.333', '-10.9611', '-7.5893', '-53.4', '-49.25', '-45.3583', '-41.4666', '-37.5749', '-33.6832', '-29.7915', '-25.8998', '-22.0081', '-18.1164', '-14.2247', '-10.333', '-7.0', '-3.0', '0.8769', '4.7538', '-59.2428', '-55.769', '-52.2267', '-48.6845', '-45.1423', '-41.6', '-38.4', '-34.9262', '-31.4524', '-27.9786', '-57.5', '-54.0', '-50.5', '-47.1944', '-43.8889', '-40.5833', '-37.2778', '-33.9722', '-30.6667', '-27.3611', '-24.0556', '-20.75', '-17.4091', '-14.0682', '-57.75', '-54.4', '-50.97', '-47.54', '-44.11', '-40.68', '-37.25', '-33.667', '-30.2266', '-26.7862']), ('y', ['4.333', '4.333', '4.333', '4.333', '4.333', '4.333', '4.333', '4.3806', '4.4282', '4.4758', '4.5234', '4.571', '-2.667', '-2.667', '-2.667', '-2.7003', '-2.7335', '-2.7668', '-2.8', '-2.8222', '-80.333', '-78.4', '-76.4', \r\n'-74.4', '-72.4', '-70.4', '-68.4', '-66.2', '-64.181', '-62.162', '-68.7778', '-67.8889', '-67.0', '-66.5', '-65.5', '-64.5714', '-63.6429', '-62.7143', '-61.7857', '-60.8571', '-59.9286', '-59.0', '-58.1111', '-57.2222', '-56.3333', '-55.4444', '-45.625', '-45.5', '-46.0', '-45.85', '-45.7', '-45.55', '-45.4', '-45.25', '-45.1', '-44.95', '-44.8', '-44.65', '-44.5', '-44.0', '-43.875', '-43.75', '-39.833', '-38.75', '-37.9652', '-37.1805', '-36.3957', '-35.611', '-34.8262', '-34.0415', '-33.2567', '-32.472', '-31.6872', '-30.9025', '-30.1177', '-29.333', '-28.5253', '-27.7176', '-42.4', '-41.75', '-40.9083', '-40.0666', '-39.2249', '-38.3832', '-37.5415', '-36.6998', '-35.8581', '-35.0164', '-34.1747', '-33.333', '-32.5', '-31.5', '-30.6615', '-29.8231', '-27.4276', '-26.923', '-26.3423', '-25.7615', '-25.1808', '-24.6', '-24.4', '-23.8954', '-23.3908', '-22.8862', '-22.5', '-22.25', '-21.5', '-20.9167', '-20.3333', '-19.75', '-19.1667', '-18.5833', '-18.0', '-17.4167', '-16.8333', '-16.25', '-15.6818', '-15.1136', '-31.75', '-31.8', '-31.79', '-31.78', '-31.77', '-31.76', '-31.75', '-31.667', '-31.6552', '-31.6433']), ('z', ['-22.667', '-22.7225', '-22.778', '-22.8335', '-22.889', '-22.9445', '-23.0', '-23.1428', '-23.2856', \r\n'-23.4284', '-23.5712', '-23.714', '-9.667', '-10.0', '-10.0', '-9.975', '-9.95', '-9.925', '-9.9', '-9.9388', '16.333', '14.4', '12.48', '10.56', '8.64', '6.72', '4.8', '2.8', '0.8667', '-1.0666', '14.0', '14.5', '15.0', '16.0', '16.0', '16.5', '17.0', '17.5', '18.0', '18.5', '19.0', '19.5', '20.0', '20.5', '21.0', '21.5', '-4.5833', '-4.0', '-3.0', '-2.5', '-2.0', '-1.5', '-1.0', '-0.5', '0.0', '0.5', '1.0', '1.5', '2.0', '3.0', '3.5833', '4.1667', '43.0', '42.25', '41.7292', '41.2083', '40.6875', '40.1667', '39.6458', '39.125', '38.6042', '38.0833', '37.5625', '37.0417', '36.5208', '36.0', '35.4615', '34.9231', '31.8', '31.5', '31.45', '31.4', '31.35', '31.3', '31.25', '31.2', '31.15', '31.1', '31.05', '31.0', '31.0', '31.0', '30.9385', '30.8769', '16.44', '15.0', '13.55', '12.1', '10.65', '9.2', '7.8', '6.36', '4.92', '3.48', '-2.0', '-3.0', '-4.0', '-4.7222', '-5.4444', '-6.1667', '-6.8889', '-7.6111', '-8.3333', '-9.0556', '-9.7778', '-10.5', '-11.2727', '-12.0455', '-6.75', '-7.6', '-8.33', '-9.06', '-9.79', '-10.52', '-11.25', '-12.0', '-12.75', '-13.5']), ('size', ['0.2', '0.2', '0.2', '0.2', '0.2', '0.2', '0.2', '0.2', '0.2', '0.2', '0.2', '0.2', '0.2', '0.2', '0.2', '0.2', '0.2', '0.2', '0.2', '0.2', '0.2', '0.2', '0.2', '0.2', '0.2', '0.2', '0.2', '0.2', '0.2', '0.2', '0.2', '0.2', '0.2', '0.2', '0.2', '0.2', '0.2', '0.2', '0.2', '0.2', '0.2', '0.2', '0.2', '0.2', '0.2', '0.2', '0.2', '0.2', '0.2', '0.2', '0.2', '0.2', '0.2', '0.2', '0.2', '0.2', '0.2', '0.2', '0.2', '0.2', '0.2', '0.2', '0.2', '0.2', '0.2', '0.2', '0.2', '0.2', '0.2', '0.2', '0.2', '0.2', '0.2', '0.2', '0.2', '0.2', '0.2', '0.2', '0.2', '0.2', '0.2', '0.2', '0.2', '0.2', '0.2', '0.2', '0.2', '0.2', '0.2', '0.2', '0.2', '0.2', '0.2', '0.2', '0.2', '0.2', '0.2', '0.2', '0.2', '0.2', '0.2', '0.2', '0.2', '0.2', '0.2', '0.2', '0.2', '0.2', '0.2', '0.2', '0.2', '0.2', '0.2', '0.2', '0.2', '0.2', '0.2', '0.2', '0.2', '0.2', '0.2', '0.2', '0.2', '0.2', '0.2', '0.2', '0.2', '0.2'])],)\r\nc:\\Users\\ae166\\share\\git\\IEEG_toolboxes\\Python\\PreProcess\\preProcess.py:189: RuntimeWarning: Fiducial point nasion not found, assuming identity unknown to head transformation\r\n  new_raw = read_raw_bids(bids_path=BIDS_path)\r\nc:\\Users\\ae166\\share\\git\\IEEG_toolboxes\\Python\\PreProcess\\preProcess.py:189: RuntimeWarning: DigMontage is only a subset of info. There are 89 channel positions not present in the DigMontage. The required channels are:\r\n\r\n['LPSP1', 'LPSP2', 'LPSP3', 'LPSP4', 'LPSP5', 'LPSP6', 'LPSP7', 'LPSP8', 'LPSP9', 'LPIP1', 'LPIP2', 'LPIP3', 'LPIP4', 'LPIP5', 'LPIP6', 'LPIP7', 'LPIP8', 'LPIP9', 'LAST1', 'LAST2', 'LAST3', 'LAST4', 'LAST5', \r\n'LAST6', 'LAST7', 'LAST8', 'LPST1', 'LPST2', 'LPST3', 'LPST4', 'LPST5', 'LPST6', 'LPST7', 'LPST8', 'LPST9', 'LAMT1', 'LAMT2', 'LAMT3', 'LAMT4', 'LAMT5', 'LAMT6', 'LAMT7', 'LAMT8', 'LAMT9', 'LMMT1', 'LMMT2', 'LMMT3', 'LMMT4', 'LMMT5', 'LMMT6', 'LMMT7', 'LMMT8', 'LMMT9', 'LMIT1', 'LMIT2', 'LMIT3', 'LMIT4', 'LMIT5', 'LMIT6', 'LMIT7', 'LMIT8', 'LMIT9', 'LPIT1', 'LPIT2', 'LPIT3', 'LPIT4', 'LPIT5', 'LPIT6', 'LPIT7', 'LPIT8', 'LPIT9', 'LAO1', 'LAO2', 'LAO3', 'LAO4', 'LAO5', 'LAO6', 'LAO7', 'LAO8', 'LAO9', 'LPO1', 'LPO2', 'LPO3', 'LPO4', 'LPO5', 'LPO6', 'LPO7', 'LPO8', 'LPO9'].\r\n\r\nConsider using inst.set_channel_types if these are not EEG channels, or use the on_missing parameter if the channel positions are allowed to be unknown in your analyses.\r\n```\r\n\r\n\r\n#### Additional information\r\n```\r\nPlatform:       Windows-10-10.0.18362-SP0\r\nPython:         3.9.7 (default, Sep 16 2021, 16:59:28) [MSC v.1916 64 bit (AMD64)]\r\nExecutable:     C:\\Users\\ae166\\Anaconda3\\envs\\preprocess\\python.exe\r\nCPU:            Intel64 Family 6 Model 158 Stepping 9, GenuineIntel: 8 cores\r\nMemory:         63.9 GB\r\n\r\nmne:            0.24.1\r\nnumpy:          1.22.1 {}\r\nscipy:          1.8.0\r\nmatplotlib:     3.5.1 {backend=QtAgg}\r\n\r\nsklearn:        1.0.2\r\nnumba:          Not found\r\nnibabel:        3.2.1\r\nnilearn:        0.8.1\r\ndipy:           1.4.1\r\ncupy:           Not found\r\npandas:         1.3.5\r\nmayavi:         4.7.4\r\npyvista:        0.33.2 {OpenGL 4.5.0 - Build 27.20.100.8854 via Intel(R) HD Graphics 630}\r\npyvistaqt:      0.7.0\r\nipyvtklink:     0.2.2\r\nvtk:            9.1.0\r\nPyQt5:          5.15.6\r\nipympl:         0.8.7\r\nmne_qt_browser: Not found\r\npooch:          v1.4.0\r\n```\r\n", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/10311/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10311/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/10308", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10308/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10308/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10308/events", "html_url": "https://github.com/mne-tools/mne-python/issues/10308", "id": 1127464283, "node_id": "I_kwDOABPcUM5DM71b", "number": 10308, "title": "misalignment of source space in forward sol", "user": {"login": "dasdiptyajit", "id": 43450258, "node_id": "MDQ6VXNlcjQzNDUwMjU4", "avatar_url": "https://avatars.githubusercontent.com/u/43450258?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dasdiptyajit", "html_url": "https://github.com/dasdiptyajit", "followers_url": "https://api.github.com/users/dasdiptyajit/followers", "following_url": "https://api.github.com/users/dasdiptyajit/following{/other_user}", "gists_url": "https://api.github.com/users/dasdiptyajit/gists{/gist_id}", "starred_url": "https://api.github.com/users/dasdiptyajit/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dasdiptyajit/subscriptions", "organizations_url": "https://api.github.com/users/dasdiptyajit/orgs", "repos_url": "https://api.github.com/users/dasdiptyajit/repos", "events_url": "https://api.github.com/users/dasdiptyajit/events{/privacy}", "received_events_url": "https://api.github.com/users/dasdiptyajit/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/mne-tools/mne-python/milestones/21", "html_url": "https://github.com/mne-tools/mne-python/milestone/21", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/milestones/21/labels", "id": 7253492, "node_id": "MI_kwDOABPcUM4Abq30", "number": 21, "title": "1.0", "description": "", "creator": {"login": "larsoner", "id": 2365790, "node_id": "MDQ6VXNlcjIzNjU3OTA=", "avatar_url": "https://avatars.githubusercontent.com/u/2365790?v=4", "gravatar_id": "", "url": "https://api.github.com/users/larsoner", "html_url": "https://github.com/larsoner", "followers_url": "https://api.github.com/users/larsoner/followers", "following_url": "https://api.github.com/users/larsoner/following{/other_user}", "gists_url": "https://api.github.com/users/larsoner/gists{/gist_id}", "starred_url": "https://api.github.com/users/larsoner/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/larsoner/subscriptions", "organizations_url": "https://api.github.com/users/larsoner/orgs", "repos_url": "https://api.github.com/users/larsoner/repos", "events_url": "https://api.github.com/users/larsoner/events{/privacy}", "received_events_url": "https://api.github.com/users/larsoner/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 83, "state": "closed", "created_at": "2021-10-14T16:40:49Z", "updated_at": "2022-05-03T11:29:23Z", "due_on": "2022-02-25T08:00:00Z", "closed_at": "2022-05-03T11:29:23Z"}, "comments": 2, "created_at": "2022-02-08T16:13:36Z", "updated_at": "2022-02-08T21:15:33Z", "closed_at": "2022-02-08T21:15:33Z", "author_association": "NONE", "active_lock_reason": null, "body": "#### Describe the bug\r\n\r\nSource space alignment in forward solution seems off.   \r\n\r\n#### Steps to reproduce\r\ncode :\r\n```python\r\n# import parameters\r\nfrom os.path import join\r\nimport mne\r\nfrom mne import read_source_spaces, read_forward_solution\r\n\r\n# get the data\r\nroot_dir = join('/', 'media', 'diptyajit', 'Ext_drive', 'MNE-sample-data', '')\r\nsubjects_dir = join(root_dir, 'subjects', '')\r\n\r\n# read source space\r\nsrc_fname = join(subjects_dir, 'sample', 'bem', 'sample-oct-6-src.fif')\r\nsrc = read_source_spaces(src_fname)\r\n\r\n# read forward sol\r\nfwd_fname = join(root_dir, 'MEG', 'sample', 'sample_audvis-meg-eeg-oct-6-fwd.fif')\r\nfwd = read_forward_solution(fwd_fname)\r\n\r\nprint('src output:', src)\r\nprint('forward_out:', fwd)\r\n\r\n# 1st check source space alignment with original src\r\nfig = mne.viz.plot_alignment(subject='sample', subjects_dir=subjects_dir,\r\n                             surfaces='white', coord_frame='mri',\r\n                             src=src)\r\nmne.viz.set_3d_view(fig, azimuth=173.78, elevation=101.75, distance=0.30, focalpoint=(-0.03, -0.01, 0.03))\r\n\r\n# 2nd check source space alignment with src in forward object\r\nfig = mne.viz.plot_alignment(subject='sample', subjects_dir=subjects_dir,\r\n                             surfaces='white', coord_frame='mri',fwd=fwd,\r\n                             src=fwd['src'])\r\nmne.viz.set_3d_view(fig, azimuth=173.78, elevation=101.75, distance=0.30, focalpoint=(-0.03, -0.01, 0.03))\r\n```\r\n#### Expected results\r\nNo difference in alignments \r\n\r\n#### Actual results\r\n![origina_src](https://user-images.githubusercontent.com/43450258/153028054-6a272332-807c-4708-9379-e3819c01a66c.png)\r\n\r\n![forward_src](https://user-images.githubusercontent.com/43450258/153028042-754e5403-3826-43ce-b8bd-b8ef167afa01.png)\r\n\r\n\r\nI know that number of source points can different in original source space vs in forward sol.  But why do I get a different alignment? Not sure if its a visualization issue or am I missing something. ", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/10308/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10308/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/10287", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10287/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10287/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10287/events", "html_url": "https://github.com/mne-tools/mne-python/issues/10287", "id": 1121251167, "node_id": "I_kwDOABPcUM5C1O9f", "number": 10287, "title": "set_eeg_reference with projection=True and make_eeg_average_ref_proj only works with EEG channels", "user": {"login": "chapochn", "id": 23103092, "node_id": "MDQ6VXNlcjIzMTAzMDky", "avatar_url": "https://avatars.githubusercontent.com/u/23103092?v=4", "gravatar_id": "", "url": "https://api.github.com/users/chapochn", "html_url": "https://github.com/chapochn", "followers_url": "https://api.github.com/users/chapochn/followers", "following_url": "https://api.github.com/users/chapochn/following{/other_user}", "gists_url": "https://api.github.com/users/chapochn/gists{/gist_id}", "starred_url": "https://api.github.com/users/chapochn/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/chapochn/subscriptions", "organizations_url": "https://api.github.com/users/chapochn/orgs", "repos_url": "https://api.github.com/users/chapochn/repos", "events_url": "https://api.github.com/users/chapochn/events{/privacy}", "received_events_url": "https://api.github.com/users/chapochn/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/mne-tools/mne-python/milestones/24", "html_url": "https://github.com/mne-tools/mne-python/milestone/24", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/milestones/24/labels", "id": 8418297, "node_id": "MI_kwDOABPcUM4AgHP5", "number": 24, "title": "1.3", "description": "", "creator": {"login": "larsoner", "id": 2365790, "node_id": "MDQ6VXNlcjIzNjU3OTA=", "avatar_url": "https://avatars.githubusercontent.com/u/2365790?v=4", "gravatar_id": "", "url": "https://api.github.com/users/larsoner", "html_url": "https://github.com/larsoner", "followers_url": "https://api.github.com/users/larsoner/followers", "following_url": "https://api.github.com/users/larsoner/following{/other_user}", "gists_url": "https://api.github.com/users/larsoner/gists{/gist_id}", "starred_url": "https://api.github.com/users/larsoner/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/larsoner/subscriptions", "organizations_url": "https://api.github.com/users/larsoner/orgs", "repos_url": "https://api.github.com/users/larsoner/repos", "events_url": "https://api.github.com/users/larsoner/events{/privacy}", "received_events_url": "https://api.github.com/users/larsoner/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 18, "state": "closed", "created_at": "2022-09-13T15:22:25Z", "updated_at": "2022-12-28T21:04:54Z", "due_on": "2022-12-16T08:00:00Z", "closed_at": "2022-12-28T21:04:54Z"}, "comments": 5, "created_at": "2022-02-01T22:09:02Z", "updated_at": "2022-12-08T20:59:23Z", "closed_at": "2022-12-08T20:59:23Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "#### Describe the bug\r\nwhen channels in raw are not eeg, but for example ecog then:\r\n```\r\nraw.set_eeg_reference(ref_channels='average', projection=False,\r\n                                 ch_type='auto')\r\n```\r\nworks, but:\r\n```\r\nraw.set_eeg_reference(ref_channels='average', projection=True,\r\n                                 ch_type='auto')\r\n```\r\ndoes not, see full error below.\r\n\r\n#### Steps to reproduce\r\nExample\r\n```\r\ninfo = mne.create_info(ch_names=['a', 'b'], sfreq=100)\r\nraw = mne.io.RawArray(np.zeros((2, 10)), info)\r\nraw.set_channel_types({'a':'ecog', 'b':'ecog'})\r\n# raw.set_channel_types({'a':'eeg', 'b':'eeg'}) # this works\r\nraw.set_eeg_reference(ref_channels='average', projection=True, ch_type='auto')\r\n# raw.set_eeg_reference(ref_channels='average', projection=False, ch_type='auto') # this works with ecog too\r\n```\r\n\r\n\r\n#### Expected results\r\nthat a new channel that is the average projection is created\r\n\r\n\r\n#### Actual results\r\nfails with the following error:\r\n```\r\n---------------------------------------------------------------------------\r\nValueError                                Traceback (most recent call last)\r\n/var/folders/w9/3c0pg_qj35x4m8cq745x1txxj4dh2s/T/ipykernel_92274/3378246075.py in <module>\r\n      3 raw = mne.io.RawArray(np.zeros((2, 10)), info)\r\n      4 raw.set_channel_types({'a':'ecog', 'b':'ecog'})\r\n----> 5 raw.set_eeg_reference(ref_channels='average', projection=True,\r\n      6                                  ch_type='auto')\r\n\r\n<decorator-gen-34> in set_eeg_reference(self, ref_channels, projection, ch_type, forward, verbose)\r\n\r\n~/opt/anaconda3/envs/mne/lib/python3.9/site-packages/mne/channels/channels.py in set_eeg_reference(self, ref_channels, projection, ch_type, forward, verbose)\r\n    338         \"\"\"\r\n    339         from ..io.reference import set_eeg_reference\r\n--> 340         return set_eeg_reference(self, ref_channels=ref_channels, copy=False,\r\n    341                                  projection=projection, ch_type=ch_type,\r\n    342                                  forward=forward)[0]\r\n\r\n<decorator-gen-272> in set_eeg_reference(inst, ref_channels, copy, projection, ch_type, forward, verbose)\r\n\r\n~/opt/anaconda3/envs/mne/lib/python3.9/site-packages/mne/io/reference.py in set_eeg_reference(inst, ref_channels, copy, projection, ch_type, forward, verbose)\r\n    324                     inst.info['custom_ref_applied'] = \\\r\n    325                         FIFF.FIFFV_MNE_CUSTOM_REF_OFF\r\n--> 326                 inst.add_proj(make_eeg_average_ref_proj(inst.info,\r\n    327                                                         activate=False))\r\n    328             except Exception:\r\n\r\n<decorator-gen-14> in make_eeg_average_ref_proj(info, activate, verbose)\r\n\r\n~/opt/anaconda3/envs/mne/lib/python3.9/site-packages/mne/io/proj.py in make_eeg_average_ref_proj(info, activate, verbose)\r\n    772     n_eeg = len(eeg_sel)\r\n    773     if n_eeg == 0:\r\n--> 774         raise ValueError('Cannot create EEG average reference projector '\r\n    775                          '(no EEG data found)')\r\n    776     vec = np.ones((1, n_eeg))\r\n\r\nValueError: Cannot create EEG average reference projector (no EEG data found)\r\n```\r\n\r\n\r\n#### Additional information\r\nPlatform:       macOS-11.6-x86_64-i386-64bit\r\nPython:         3.9.7 | packaged by conda-forge | (default, Sep 29 2021, 20:33:18)  [Clang 11.1.0 ]\r\nExecutable:     /Users/.../opt/anaconda3/envs/mne/bin/python3\r\nCPU:            i386: 12 cores\r\nMemory:         16.0 GB\r\n\r\nmne:            0.24.1\r\nnumpy:          1.21.4 {blas=NO_ATLAS_INFO, lapack=lapack}\r\nscipy:          1.7.3\r\nmatplotlib:     3.5.1 {backend=module://matplotlib_inline.backend_inline}\r\n\r\nsklearn:        1.0.1\r\nnumba:          0.53.1\r\nnibabel:        3.2.1\r\nnilearn:        0.8.1\r\ndipy:           1.4.1\r\ncupy:           Not found\r\npandas:         1.3.5\r\nmayavi:         4.7.2\r\npyvista:        0.32.1 {OpenGL 4.1 ATI-4.6.20 via AMD Radeon Pro 560X OpenGL Engine}\r\npyvistaqt:      0.6.0\r\nipyvtklink:     Not found\r\nvtk:            9.0.3\r\nPyQt5:          5.12.3\r\nipympl:         Not found\r\nmne_qt_browser: 0.1.7\r\npooch:          v1.5.2\r\n", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/10287/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10287/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/10286", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10286/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10286/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10286/events", "html_url": "https://github.com/mne-tools/mne-python/issues/10286", "id": 1121238484, "node_id": "I_kwDOABPcUM5C1L3U", "number": 10286, "title": "confusing warning with applying projs", "user": {"login": "jasmainak", "id": 15852194, "node_id": "MDQ6VXNlcjE1ODUyMTk0", "avatar_url": "https://avatars.githubusercontent.com/u/15852194?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jasmainak", "html_url": "https://github.com/jasmainak", "followers_url": "https://api.github.com/users/jasmainak/followers", "following_url": "https://api.github.com/users/jasmainak/following{/other_user}", "gists_url": "https://api.github.com/users/jasmainak/gists{/gist_id}", "starred_url": "https://api.github.com/users/jasmainak/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jasmainak/subscriptions", "organizations_url": "https://api.github.com/users/jasmainak/orgs", "repos_url": "https://api.github.com/users/jasmainak/repos", "events_url": "https://api.github.com/users/jasmainak/events{/privacy}", "received_events_url": "https://api.github.com/users/jasmainak/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 22, "created_at": "2022-02-01T21:55:26Z", "updated_at": "2022-02-12T20:45:36Z", "closed_at": "2022-02-12T20:45:36Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "#### Describe the bug\r\nUsing `apply_proj` after marking bad channels should automatically do the right thing instead of raising a confusing warning.\r\n\r\n#### Steps to reproduce\r\n\r\n```py\r\nimport os\r\nimport numpy as np\r\nimport mne\r\n\r\nsample_data_folder = mne.datasets.sample.data_path()\r\nsample_data_raw_file = os.path.join(sample_data_folder, 'MEG', 'sample',\r\n                                    'sample_audvis_filt-0-40_raw.fif')\r\nraw = mne.io.read_raw_fif(sample_data_raw_file)\r\nraw = raw.pick_types(meg='mag', eeg=False)\r\n\r\nprint(raw.info['projs'])\r\n\r\nraw.info['bads'] = raw.info['ch_names'][:16]\r\nraw2 = raw.copy()\r\n\r\nraw.apply_proj()\r\nraw2.info.normalize_proj()\r\nraw2.apply_proj()\r\nnp.testing.assert_allclose(raw.get_data(), raw2.get_data())\r\n```\r\n\r\nAs per the warning, `normalize_proj` should be applied but as you can see, it makes no difference except getting rid of the warning.\r\n\r\n#### Expected results\r\nThere should be no warning\r\n\r\n#### Actual results\r\nWe see a warning:\r\n\r\n```py\r\n/Users/mainak/Desktop/mne_proj_issue.py:16: RuntimeWarning: Projection vector \"PCA-v1\" has magnitude 0.99 (should be unity), applying projector with 86/102 of the original channels available may be dangerous, consider recomputing and adding projection vectors for channels that are eventually used. If this is intentional, consider using info.normalize_proj()\r\n  # raw.apply_proj()\r\n/Users/mainak/Desktop/mne_proj_issue.py:16: RuntimeWarning: Projection vector \"PCA-v2\" has magnitude 0.95 (should be unity), applying projector with 86/102 of the original channels available may be dangerous, consider recomputing and adding projection vectors for channels that are eventually used. If this is intentional, consider using info.normalize_proj()\r\n  # raw.apply_proj()\r\n/Users/mainak/Desktop/mne_proj_issue.py:16: RuntimeWarning: Projection vector \"PCA-v3\" has magnitude 0.85 (should be unity), applying projector with 86/102 of the original channels available may be dangerous, consider recomputing and adding projection vectors for channels that are eventually used. If this is intentional, consider using info.normalize_proj()\r\n```\r\n\r\n#### Additional information\r\nAdditionally, the code path is somewhat confusing to follow. There is an `if inplace` clause:\r\n\r\nhttps://github.com/mne-tools/mne-python/blob/93a3be5d21028331a88c42ef9dfa10566bcd6d1f/mne/io/proj.py#L618-L625\r\n\r\nwhich makes the function return without performing an SVD. I see that `_make_projector` is never called with `inplace=False`. Is this dead code? We discussed this with @mshamalainen and the right thing to do is:\r\n\r\n- combine the projectors into a matrix with bad channels zeroed out\r\n- compute SVD of this matrix and use it to make the new projector\r\n\r\nThere is nothing \"dangerous\" per se in doing this as far as we can see. It only makes the projection operator mathematically correct. That is: [P.P = P](https://en.wikipedia.org/wiki/Projection_(linear_algebra)#Idempotence)", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/10286/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10286/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/10263", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10263/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10263/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10263/events", "html_url": "https://github.com/mne-tools/mne-python/issues/10263", "id": 1117169865, "node_id": "I_kwDOABPcUM5ClqjJ", "number": 10263, "title": "while i was plotting .nc file in python using cartopy the  error ValueError: DataArray must be 2d", "user": {"login": "haritha1022", "id": 97615200, "node_id": "U_kgDOBdF9YA", "avatar_url": "https://avatars.githubusercontent.com/u/97615200?v=4", "gravatar_id": "", "url": "https://api.github.com/users/haritha1022", "html_url": "https://github.com/haritha1022", "followers_url": "https://api.github.com/users/haritha1022/followers", "following_url": "https://api.github.com/users/haritha1022/following{/other_user}", "gists_url": "https://api.github.com/users/haritha1022/gists{/gist_id}", "starred_url": "https://api.github.com/users/haritha1022/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/haritha1022/subscriptions", "organizations_url": "https://api.github.com/users/haritha1022/orgs", "repos_url": "https://api.github.com/users/haritha1022/repos", "events_url": "https://api.github.com/users/haritha1022/events{/privacy}", "received_events_url": "https://api.github.com/users/haritha1022/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2022-01-28T09:14:49Z", "updated_at": "2022-01-28T15:22:17Z", "closed_at": "2022-01-28T15:22:17Z", "author_association": "NONE", "active_lock_reason": null, "body": "###\r\n import xarray as xr\r\nimport cartopy.crs as ccrs\r\nfrom cartopy import feature as cf\r\nimport matplotlib.pyplot as plt\r\nimport numpy as np\r\n\r\n#Opening and reading data\r\ndata=xr.open_dataset(\"rain33.nc\")\r\nprint(data)\r\n\r\n\r\nlon=data.lon[:]\r\nlat=data.lat[:]\r\n#u=data.u[0]; \r\n#v=data.v[0,::5,::5]\r\n#z=data.z[0]\r\n\r\n#lev_2=data.lev_2[:]\r\n\r\nrainnc=data.rainnc[0]\r\n#time=data.time[0]\r\n\r\n\r\n\r\n\r\n\r\n\r\n#Margins for the cartopy extent\r\n\r\neast = 100\r\nwest = 60\r\nnorth = 38\r\nsouth = 0\r\n\r\n\r\nax = plt.axes(projection=ccrs.PlateCarree())\r\nrainnc.plot.contourf(cmap=\"jet\")\r\nax.set_extent([west, east, south, north])\r\nax.coastlines()\r\nax.add_feature(cf.BORDERS)\r\n#ax.colorbar(cb, pad='2%',label='pa',extend='both',location='right')\r\n#plt.colorbar(cb)\r\n\r\n\r\n#ax.quiver(x,y,u,v, angles='xy', scale_units='xy', scale=5)\r\n#plt.clim(28000,30000)\r\n\r\n\r\nplt.savefig(\"rain3.jpg\")\r\nplt.show()\r\n\r\nthe data contains\r\nDimensions:    (time: 2, bnds: 2, lon: 378, lat: 351, lev_2: 1)\r\nCoordinates:\r\n  * time       (time) datetime64[ns] 2021-12-30T10:30:00 2021-12-31\r\n  * lon        (lon) float64 77.43 77.45 77.46 77.47 ... 81.32 81.33 81.34 81.35\r\n  * lat        (lat) float64 11.14 11.15 11.16 11.17 ... 14.65 14.66 14.67 14.68\r\n  * lev_2      (lev_2) float64 1e+03\r\nDimensions without coordinates: bnds\r\nData variables:\r\n    time_bnds  (time, bnds) datetime64[ns] ...\r\n    rainnc     (time, lev_2, lat, lon) float32 ...\r\n\r\n the error i am getting\r\n raise ValueError(\"DataArray must be 2d\")\r\nValueError: DataArray must be 2d\r\n\r\n\r\n\r\n#### ", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/10263/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10263/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/10258", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10258/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10258/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10258/events", "html_url": "https://github.com/mne-tools/mne-python/issues/10258", "id": 1116295438, "node_id": "I_kwDOABPcUM5CiVEO", "number": 10258, "title": "Notch filter: picks < n_channels(67) got 67 -ERROR ", "user": {"login": "fannidkovacs", "id": 98536745, "node_id": "U_kgDOBd-NKQ", "avatar_url": "https://avatars.githubusercontent.com/u/98536745?v=4", "gravatar_id": "", "url": "https://api.github.com/users/fannidkovacs", "html_url": "https://github.com/fannidkovacs", "followers_url": "https://api.github.com/users/fannidkovacs/followers", "following_url": "https://api.github.com/users/fannidkovacs/following{/other_user}", "gists_url": "https://api.github.com/users/fannidkovacs/gists{/gist_id}", "starred_url": "https://api.github.com/users/fannidkovacs/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/fannidkovacs/subscriptions", "organizations_url": "https://api.github.com/users/fannidkovacs/orgs", "repos_url": "https://api.github.com/users/fannidkovacs/repos", "events_url": "https://api.github.com/users/fannidkovacs/events{/privacy}", "received_events_url": "https://api.github.com/users/fannidkovacs/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2022-01-27T14:38:02Z", "updated_at": "2022-01-28T17:57:52Z", "closed_at": "2022-01-28T17:57:52Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi!\r\n\r\n- MNE version: 0.24.1\r\n- operating system: Windows 10 Pro build number: 19041.1415\r\n\r\n\r\nI had an issue using the mne.filter.notch_filter when I used it on my own data. The problem could be replicated.\r\n\r\n```\r\nfrom pathlib import Path\r\n\r\nimport mne\r\n\r\n\r\n\r\nsample_dir = Path(mne.datasets.sample.data_path())\r\n\r\nsample_fname = sample_dir / 'MEG' / 'sample' / 'sample_audvis_raw.fif'\r\n\r\n\r\n\r\nraw = mne.io.read_raw_fif(sample_fname, preload=True)\r\n\r\nraw.crop(tmax=60)\r\n\r\nraw.set_channel_types(mapping={'EEG 001': 'ecg'})\r\n\r\n\r\n\r\nemg_channel_pick = mne.pick_types(raw.info, emg=True) \r\n\r\nsampling_rate = raw.info['sfreq']\r\n\r\nfreqs = 50.0 \r\n\r\nraw_filtered = mne.filter.notch_filter(raw, sampling_rate, freqs, picks=emg_channel_pick)\r\n```\r\n\r\nI tried add picks in several ways, unfortunatelly none of them worked, and always got the same error. \r\n\r\n\r\n```\r\nTraceback (most recent call last):\r\n  File \"smthing.py\", line 99, in <module>\r\n    raw_filtered = mne.filter.notch_filter(raw, sampling_rate, freqs, picks='ecg')\r\n  File \"<decorator-gen-105>\", line 24, in notch_filter\r\n  File \"C:\\Anaconda\\lib\\site-packages\\mne\\filter.py\", line 1190, in notch_filter\r\n    xf = filter_data(x, Fs, highs, lows, picks, filter_length, tb_2, tb_2,\r\n  File \"<decorator-gen-103>\", line 24, in filter_data\r\n  File \"C:\\Anaconda\\lib\\site-packages\\mne\\filter.py\", line 815, in filter_data\r\n    data = _check_filterable(data)\r\n  File \"C:\\Anaconda\\lib\\site-packages\\mne\\filter.py\", line 1374, in _check_filterable\r\n    x = np.asanyarray(x)\r\n  File \"C:\\Anaconda\\lib\\site-packages\\numpy\\core\\_asarray.py\", line 136, in asanyarray\r\n    return array(a, dtype, copy=False, order=order, subok=True)\r\n  File \"C:\\Anaconda\\lib\\site-packages\\mne\\io\\base.py\", line 807, in __getitem__\r\n    return self._getitem(item)\r\n  File \"C:\\Anaconda\\lib\\site-packages\\mne\\io\\base.py\", line 810, in _getitem\r\n    sel, start, stop = self._parse_get_set_params(item)\r\n  File \"C:\\Anaconda\\lib\\site-packages\\mne\\io\\base.py\", line 742, in _parse_get_set_params\r\n    sel = _picks_to_idx(self.info, item[0])\r\n  File \"C:\\Anaconda\\lib\\site-packages\\mne\\io\\pick.py\", line 1069, in _picks_to_idx\r\n    raise ValueError('All picks must be < n_channels (%d), got %r'\r\nValueError: All picks must be < n_channels (67), got 67\r\n```\r\n\r\nThank you for any help! ", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/10258/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10258/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/10256", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10256/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10256/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10256/events", "html_url": "https://github.com/mne-tools/mne-python/issues/10256", "id": 1115256647, "node_id": "I_kwDOABPcUM5CeXdH", "number": 10256, "title": "raw object meas_date is moderated by time zone of the computer reading the EEG file (from an EGI MFF file).", "user": {"login": "scott-huberty", "id": 52462026, "node_id": "MDQ6VXNlcjUyNDYyMDI2", "avatar_url": "https://avatars.githubusercontent.com/u/52462026?v=4", "gravatar_id": "", "url": "https://api.github.com/users/scott-huberty", "html_url": "https://github.com/scott-huberty", "followers_url": "https://api.github.com/users/scott-huberty/followers", "following_url": "https://api.github.com/users/scott-huberty/following{/other_user}", "gists_url": "https://api.github.com/users/scott-huberty/gists{/gist_id}", "starred_url": "https://api.github.com/users/scott-huberty/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/scott-huberty/subscriptions", "organizations_url": "https://api.github.com/users/scott-huberty/orgs", "repos_url": "https://api.github.com/users/scott-huberty/repos", "events_url": "https://api.github.com/users/scott-huberty/events{/privacy}", "received_events_url": "https://api.github.com/users/scott-huberty/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/mne-tools/mne-python/milestones/22", "html_url": "https://github.com/mne-tools/mne-python/milestone/22", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/milestones/22/labels", "id": 7668967, "node_id": "MI_kwDOABPcUM4AdQTn", "number": 22, "title": "1.1", "description": "", "creator": {"login": "larsoner", "id": 2365790, "node_id": "MDQ6VXNlcjIzNjU3OTA=", "avatar_url": "https://avatars.githubusercontent.com/u/2365790?v=4", "gravatar_id": "", "url": "https://api.github.com/users/larsoner", "html_url": "https://github.com/larsoner", "followers_url": "https://api.github.com/users/larsoner/followers", "following_url": "https://api.github.com/users/larsoner/following{/other_user}", "gists_url": "https://api.github.com/users/larsoner/gists{/gist_id}", "starred_url": "https://api.github.com/users/larsoner/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/larsoner/subscriptions", "organizations_url": "https://api.github.com/users/larsoner/orgs", "repos_url": "https://api.github.com/users/larsoner/repos", "events_url": "https://api.github.com/users/larsoner/events{/privacy}", "received_events_url": "https://api.github.com/users/larsoner/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 44, "state": "closed", "created_at": "2022-02-11T18:37:55Z", "updated_at": "2022-08-03T21:38:27Z", "due_on": "2022-06-13T07:00:00Z", "closed_at": "2022-08-03T21:38:27Z"}, "comments": 3, "created_at": "2022-01-26T17:05:50Z", "updated_at": "2022-03-10T16:10:31Z", "closed_at": "2022-03-10T16:10:31Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "#### Describe the bug\r\nthe `Info['meas_date']` `datetime` object derived from a EGI Net station MFF file (continuous recording), appears to be moderated by the time zone of the computer which read in the EGI file. `info['meas_date']` should only be concerned with the timestamp and timezone indicated in the MFF file, and should be completely agnostic to the timezone of the computer reading in the MFF file.\r\n\r\n#### Steps to reproduce\r\n- I have imported the same EGI MFF file using the same code (`mne.io.read_raw_egi()`) on two separate computers, which we'll call **computer 1** and **computer 2**.\r\n-See the two attached PDF's, for the code and output for each of the two computers\r\n- The computers are on the same time zone (EST), but **Computer 1** is expressed in  Universal time (UTC) and **computer 2** is expressed in local time (EST).\r\n- FYI that the MFF file was recorded in San Diego (PST).\r\n- On **computer 1**, raw.info['meas_date'] returns `datetime.datetime(2019, 10, 29, 12, 41, 1, tzinfo=datetime.timezone.utc)`, indicating that the recording start time was **12:41pm**.\r\n- On **computer 2**, `raw.info['meas_date']` returns `datetime.datetime(2019, 10, 29, 16, 41, 1, tzinfo=datetime.timezone.utc)`, indicating that the recording start time was **4:41pm**.\r\n- The `datetime` returned by **computer 1** is the correct recording start time, so it would seem **computer 2** being set to local time caused the issue. Regardless, `info['meas_date']` should be completely agnostic to the timezone of the computer reading in the MFF file. \r\n- As far as I can tell, the same version of mne is used on both computers.\r\n- I can share the MFF file used  for this report, upon request.\r\n\r\n#### Expected results\r\n`datetime.datetime(2019, 10, 29, 12, 41, 1, tzinfo=datetime.timezone.utc)`\r\n\r\nWhich was returned by **Computer 1**, and  I have confirmed that this is the correct start time of the recording (12:41pm)\r\n\r\n![Computer1](https://user-images.githubusercontent.com/52462026/151207194-6408ebd1-f847-4988-b203-88b9f1299f77.png)\r\n\r\n\r\n#### Actual results\r\n`datetime.datetime(2019, 10, 29, 16, 41, 1, tzinfo=datetime.timezone.utc)`\r\n\r\nWhich was returned by **Computer 2**, indicating that the recording start time was at 4:41pm, which is incorrect.\r\n![computer2](https://user-images.githubusercontent.com/52462026/151207265-3f0d5882-9b8e-4ecb-bee0-6b0d1f8fa1f8.png)\r\n\r\n\r\n#### Additional information\r\n**Computer 1**\r\nPlatform:       Linux-3.10.0-1160.36.2.el7.x86_64-x86_64-with-centos-7.9.2009-Core\r\nPython:         3.7.4 (default, Jul 18 2019, 19:34:02)  [GCC 5.4.0]\r\nExecutable:     /cvmfs/soft.computecanada.ca/easybuild/software/2017/Core/python/3.7.4/bin/python\r\nCPU:            : 24 cores\r\nMemory:         Unavailable (requires \"psutil\" package)\r\nmne:            0.24.1\r\nnumpy:          1.20.2 {blas=mkl_rt, lapack=mkl_rt}\r\nscipy:          1.4.1\r\nmatplotlib:     3.2.1 {backend=module://ipykernel.pylab.backend_inline}\r\n\r\n**Computer 2**\r\nPlatform:       Linux-4.18.0-305.25.1.el8_4.x86_64-x86_64-with-glibc2.2.5\r\nPython:         3.8.10 (default, Jun 16 2021, 14:20:20)  [GCC 9.3.0]\r\nExecutable:     /home/shuberty/virtual_envs/pylossless/bin/python\r\nCPU:            : 64 cores\r\nMemory:         Unavailable (requires \"psutil\" package)\r\nmne:            0.24.1\r\nnumpy:          1.21.2 {blas=/cvmfs/soft.computecanada.ca/easybuild/software/2020/Core/flexiblas/3.0.4/include/flexiblas, lapack=/cvmfs/soft.computecanada.ca/easybuild/software/2020/Core/flexiblas/3.0.4/include/flexiblas}\r\nscipy:          1.7.3\r\nmatplotlib:     3.4.2 {backend=module://matplotlib_inline.backend_inline}\r\n\r\n[computer1_bugreport.pdf](https://github.com/mne-tools/mne-python/files/7943326/helios_bugreport.pdf)\r\n[computer2_bugreport.pdf](https://github.com/mne-tools/mne-python/files/7943329/narval_bugreport.pdf)\r\n\r\n\r\n\r\nCheers,\r\n\r\nScott", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/10256/reactions", "total_count": 1, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10256/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/10225", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10225/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10225/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10225/events", "html_url": "https://github.com/mne-tools/mne-python/issues/10225", "id": 1108460978, "node_id": "I_kwDOABPcUM5CEcWy", "number": 10225, "title": "close BakcGroundPlotter when closing IntracranialElectrodeLocator", "user": {"login": "ZhengLiu97", "id": 65115609, "node_id": "MDQ6VXNlcjY1MTE1NjA5", "avatar_url": "https://avatars.githubusercontent.com/u/65115609?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ZhengLiu97", "html_url": "https://github.com/ZhengLiu97", "followers_url": "https://api.github.com/users/ZhengLiu97/followers", "following_url": "https://api.github.com/users/ZhengLiu97/following{/other_user}", "gists_url": "https://api.github.com/users/ZhengLiu97/gists{/gist_id}", "starred_url": "https://api.github.com/users/ZhengLiu97/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ZhengLiu97/subscriptions", "organizations_url": "https://api.github.com/users/ZhengLiu97/orgs", "repos_url": "https://api.github.com/users/ZhengLiu97/repos", "events_url": "https://api.github.com/users/ZhengLiu97/events{/privacy}", "received_events_url": "https://api.github.com/users/ZhengLiu97/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2022-01-19T19:10:56Z", "updated_at": "2022-01-19T19:46:04Z", "closed_at": "2022-01-19T19:46:04Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi, @alexrockhill, I found the type of __IntracranialElectrodeLocator__ is __pyvistaqt.plotting.BackgroundPlotter__, if adding BackgroundPlotter to a GUI, I supposed we need to manually close it by rewriting the closeEvent with \r\n```\r\nself._renderer.plotter.close()\r\nself.close()\r\n``` \r\nOr could directly use __pyvistaqt.QtInteractor__. However, MNE support multiple backends, I thought closing it manually might be easy.", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/10225/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10225/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/10218", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10218/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10218/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10218/events", "html_url": "https://github.com/mne-tools/mne-python/issues/10218", "id": 1106946484, "node_id": "I_kwDOABPcUM5B-qm0", "number": 10218, "title": "Channels' listview not shown right in Windows", "user": {"login": "ZhengLiu97", "id": 65115609, "node_id": "MDQ6VXNlcjY1MTE1NjA5", "avatar_url": "https://avatars.githubusercontent.com/u/65115609?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ZhengLiu97", "html_url": "https://github.com/ZhengLiu97", "followers_url": "https://api.github.com/users/ZhengLiu97/followers", "following_url": "https://api.github.com/users/ZhengLiu97/following{/other_user}", "gists_url": "https://api.github.com/users/ZhengLiu97/gists{/gist_id}", "starred_url": "https://api.github.com/users/ZhengLiu97/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ZhengLiu97/subscriptions", "organizations_url": "https://api.github.com/users/ZhengLiu97/orgs", "repos_url": "https://api.github.com/users/ZhengLiu97/repos", "events_url": "https://api.github.com/users/ZhengLiu97/events{/privacy}", "received_events_url": "https://api.github.com/users/ZhengLiu97/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2022-01-18T14:03:06Z", "updated_at": "2022-01-18T20:48:46Z", "closed_at": "2022-01-18T20:48:46Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi, @alexrockhill, I found in Windows, the listview widget has a wrong view.\r\n![image](https://user-images.githubusercontent.com/65115609/149951788-9b27ab27-3dbc-4277-a001-63699abcac8f.png)\r\n", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/10218/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10218/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/10207", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10207/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10207/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10207/events", "html_url": "https://github.com/mne-tools/mne-python/issues/10207", "id": 1104738943, "node_id": "I_kwDOABPcUM5B2Pp_", "number": 10207, "title": "`__init__()` got an unexpected keyword argument `'extract_dir'`", "user": {"login": "PABannier", "id": 12958149, "node_id": "MDQ6VXNlcjEyOTU4MTQ5", "avatar_url": "https://avatars.githubusercontent.com/u/12958149?v=4", "gravatar_id": "", "url": "https://api.github.com/users/PABannier", "html_url": "https://github.com/PABannier", "followers_url": "https://api.github.com/users/PABannier/followers", "following_url": "https://api.github.com/users/PABannier/following{/other_user}", "gists_url": "https://api.github.com/users/PABannier/gists{/gist_id}", "starred_url": "https://api.github.com/users/PABannier/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/PABannier/subscriptions", "organizations_url": "https://api.github.com/users/PABannier/orgs", "repos_url": "https://api.github.com/users/PABannier/repos", "events_url": "https://api.github.com/users/PABannier/events{/privacy}", "received_events_url": "https://api.github.com/users/PABannier/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2022-01-15T14:41:16Z", "updated_at": "2022-01-15T16:05:52Z", "closed_at": "2022-01-15T16:05:52Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "When trying to get the data path of the `sample` dataset, a `TypeError` is thrown:\r\n`TypeError: __init__() got an unexpected keyword argument 'extract_dir'`.\r\n\r\nI run:\r\n\r\n```\r\nimport mne\r\nfrom mne.datasets import sample\r\ndata_path = sample.data_path()\r\n```\r\n\r\nHere's the full traceback:\r\n\r\n![Screen Shot 2022-01-15 at 3 38 39 PM](https://user-images.githubusercontent.com/12958149/149625704-07ea404b-6666-466c-8b7f-5411b405e5a0.png)\r\n\r\n\r\n#### Additional information\r\nI tried the latest dev and stable versions. Same issue.\r\n", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/10207/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10207/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/10201", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10201/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10201/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10201/events", "html_url": "https://github.com/mne-tools/mne-python/issues/10201", "id": 1102380909, "node_id": "I_kwDOABPcUM5BtP9t", "number": 10201, "title": "Pinch-zooming plot_alignment() figure only updates zoom status after an additional click", "user": {"login": "hoechenberger", "id": 2046265, "node_id": "MDQ6VXNlcjIwNDYyNjU=", "avatar_url": "https://avatars.githubusercontent.com/u/2046265?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hoechenberger", "html_url": "https://github.com/hoechenberger", "followers_url": "https://api.github.com/users/hoechenberger/followers", "following_url": "https://api.github.com/users/hoechenberger/following{/other_user}", "gists_url": "https://api.github.com/users/hoechenberger/gists{/gist_id}", "starred_url": "https://api.github.com/users/hoechenberger/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hoechenberger/subscriptions", "organizations_url": "https://api.github.com/users/hoechenberger/orgs", "repos_url": "https://api.github.com/users/hoechenberger/repos", "events_url": "https://api.github.com/users/hoechenberger/events{/privacy}", "received_events_url": "https://api.github.com/users/hoechenberger/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}, {"id": 1290799321, "node_id": "MDU6TGFiZWwxMjkwNzk5MzIx", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/VIZ", "name": "VIZ", "color": "22e861", "default": false, "description": ""}, {"id": 3727423161, "node_id": "LA_kwDOABPcUM7eK_a5", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/macOS", "name": "macOS", "color": "8FF089", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 8, "created_at": "2022-01-13T21:10:38Z", "updated_at": "2022-01-18T14:05:03Z", "closed_at": "2022-01-18T11:55:06Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "The user is left in the dark as to what the current zoom status is until they start interacting with the 3D head again. @GuillaumeFavelier I can show you this tomorrow maybe? Otherwise I'll extend this report to make it clearer what I mean.\r\n\r\nThis is an issue I've observed on macOS, so I'm not sure whether you'll see it on different operating systems.", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/10201/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10201/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/10198", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10198/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10198/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10198/events", "html_url": "https://github.com/mne-tools/mne-python/issues/10198", "id": 1100573017, "node_id": "I_kwDOABPcUM5BmWlZ", "number": 10198, "title": "MAINT: Vendoring policy", "user": {"login": "larsoner", "id": 2365790, "node_id": "MDQ6VXNlcjIzNjU3OTA=", "avatar_url": "https://avatars.githubusercontent.com/u/2365790?v=4", "gravatar_id": "", "url": "https://api.github.com/users/larsoner", "html_url": "https://github.com/larsoner", "followers_url": "https://api.github.com/users/larsoner/followers", "following_url": "https://api.github.com/users/larsoner/following{/other_user}", "gists_url": "https://api.github.com/users/larsoner/gists{/gist_id}", "starred_url": "https://api.github.com/users/larsoner/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/larsoner/subscriptions", "organizations_url": "https://api.github.com/users/larsoner/orgs", "repos_url": "https://api.github.com/users/larsoner/repos", "events_url": "https://api.github.com/users/larsoner/events{/privacy}", "received_events_url": "https://api.github.com/users/larsoner/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/mne-tools/mne-python/milestones/21", "html_url": "https://github.com/mne-tools/mne-python/milestone/21", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/milestones/21/labels", "id": 7253492, "node_id": "MI_kwDOABPcUM4Abq30", "number": 21, "title": "1.0", "description": "", "creator": {"login": "larsoner", "id": 2365790, "node_id": "MDQ6VXNlcjIzNjU3OTA=", "avatar_url": "https://avatars.githubusercontent.com/u/2365790?v=4", "gravatar_id": "", "url": "https://api.github.com/users/larsoner", "html_url": "https://github.com/larsoner", "followers_url": "https://api.github.com/users/larsoner/followers", "following_url": "https://api.github.com/users/larsoner/following{/other_user}", "gists_url": "https://api.github.com/users/larsoner/gists{/gist_id}", "starred_url": "https://api.github.com/users/larsoner/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/larsoner/subscriptions", "organizations_url": "https://api.github.com/users/larsoner/orgs", "repos_url": "https://api.github.com/users/larsoner/repos", "events_url": "https://api.github.com/users/larsoner/events{/privacy}", "received_events_url": "https://api.github.com/users/larsoner/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 83, "state": "closed", "created_at": "2021-10-14T16:40:49Z", "updated_at": "2022-05-03T11:29:23Z", "due_on": "2022-02-25T08:00:00Z", "closed_at": "2022-05-03T11:29:23Z"}, "comments": 11, "created_at": "2022-01-12T16:56:28Z", "updated_at": "2022-01-19T06:20:07Z", "closed_at": "2022-01-19T06:20:07Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "I think we should perhaps discuss/revisit our policy of vendoring, at least for some dependencies we might want to try using `install_requires` nowadays. Even `matplotlib` nowadays has some dependencies:\r\n\r\nhttps://github.com/matplotlib/matplotlib/blob/806f00aa8faa03c19adb66560272e956bb7ddc09/setup.py#L315-L324\r\n\r\nI know the numpy/scipy/sklearn stack does not require anything (other than `setuptools` maybe?) but I see us as closer to `matplotlib` than these core (very C-based) scientific libraries. Also the packaging ecosystem (pip wheels, conda/mamba) has matured quite a bit I think since we made the conscious decision to vendor (5+ years ago IIRC?).\r\n\r\nI bring this up because it would be nice to vendor fewer libraries (ideally zero?), and in #10197 we're discussing possibly vendoring another library (packaging).\r\n\r\nWe can also discuss this at our next dev meeting if it's easier.", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/10198/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10198/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/10195", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10195/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10195/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10195/events", "html_url": "https://github.com/mne-tools/mne-python/issues/10195", "id": 1100084657, "node_id": "I_kwDOABPcUM5BkfWx", "number": 10195, "title": "Annotation error after mne.io.concatenate_raws() and raw.crop()", "user": {"login": "kolcs", "id": 47258484, "node_id": "MDQ6VXNlcjQ3MjU4NDg0", "avatar_url": "https://avatars.githubusercontent.com/u/47258484?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kolcs", "html_url": "https://github.com/kolcs", "followers_url": "https://api.github.com/users/kolcs/followers", "following_url": "https://api.github.com/users/kolcs/following{/other_user}", "gists_url": "https://api.github.com/users/kolcs/gists{/gist_id}", "starred_url": "https://api.github.com/users/kolcs/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kolcs/subscriptions", "organizations_url": "https://api.github.com/users/kolcs/orgs", "repos_url": "https://api.github.com/users/kolcs/repos", "events_url": "https://api.github.com/users/kolcs/events{/privacy}", "received_events_url": "https://api.github.com/users/kolcs/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/mne-tools/mne-python/milestones/21", "html_url": "https://github.com/mne-tools/mne-python/milestone/21", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/milestones/21/labels", "id": 7253492, "node_id": "MI_kwDOABPcUM4Abq30", "number": 21, "title": "1.0", "description": "", "creator": {"login": "larsoner", "id": 2365790, "node_id": "MDQ6VXNlcjIzNjU3OTA=", "avatar_url": "https://avatars.githubusercontent.com/u/2365790?v=4", "gravatar_id": "", "url": "https://api.github.com/users/larsoner", "html_url": "https://github.com/larsoner", "followers_url": "https://api.github.com/users/larsoner/followers", "following_url": "https://api.github.com/users/larsoner/following{/other_user}", "gists_url": "https://api.github.com/users/larsoner/gists{/gist_id}", "starred_url": "https://api.github.com/users/larsoner/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/larsoner/subscriptions", "organizations_url": "https://api.github.com/users/larsoner/orgs", "repos_url": "https://api.github.com/users/larsoner/repos", "events_url": "https://api.github.com/users/larsoner/events{/privacy}", "received_events_url": "https://api.github.com/users/larsoner/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 83, "state": "closed", "created_at": "2021-10-14T16:40:49Z", "updated_at": "2022-05-03T11:29:23Z", "due_on": "2022-02-25T08:00:00Z", "closed_at": "2022-05-03T11:29:23Z"}, "comments": 4, "created_at": "2022-01-12T09:21:53Z", "updated_at": "2022-02-18T17:24:41Z", "closed_at": "2022-02-18T17:24:41Z", "author_association": "NONE", "active_lock_reason": null, "body": "#### Describe the bug\r\nIf two raw files with measure date are concatenated then after the crop function the annotations are mixed between the two files. \r\n\r\nSee first attached picture:\r\n![bug](https://user-images.githubusercontent.com/47258484/149100825-7b1bfe53-97d9-4d0e-abf1-77a3e871e5a6.jpg)\r\n\r\n- the second crop contains its own EEG values with the annotation of the first file\r\n\r\nIf no measure date are set (None) the annotations are proper:\r\n![expected](https://user-images.githubusercontent.com/47258484/149101000-771f34d4-532f-4e6d-b357-e6835852e618.jpg)\r\n\r\nThis is a problem in case of real EEG files...\r\n\r\n#### Steps to reproduce\r\n```\r\nfrom datetime import datetime, timezone\r\n\r\nimport mne\r\nimport numpy as np\r\n\r\nCH_NUM = 32\r\nFS = 160\r\n\r\nch_names = [f'EEG{i}' for i in range(CH_NUM)]\r\nch_types = ['eeg'] * len(ch_names)\r\n\r\n\r\ndef _create_raw(eeg, ch_names, ch_types, fs, onset, duration, description, rec_date=None):\r\n    info = mne.create_info(ch_names, ch_types=ch_types, sfreq=fs)\r\n    raw = mne.io.RawArray(eeg, info)\r\n    annotation = mne.Annotations(onset, duration, description)\r\n    raw = raw.set_annotations(annotation)\r\n    if rec_date is not None:\r\n        raw.set_meas_date(rec_date)\r\n    return raw\r\n\r\n\r\ndata = np.array([list(range(40)) * 4 * 10] * CH_NUM) * 5 * 1e-7\r\nonset = [2.5, 5, 6, 7, 8]\r\nduration = [.1] * len(onset)\r\ndescription = [12, 'on', 1, 2, 'off']\r\nrec_date = datetime(2022, 1, 12, 10, 12, 5, tzinfo=timezone.utc)\r\nraw1 = _create_raw(data, ch_names, ch_types, FS, onset, duration, description, rec_date)\r\n\r\ndata = np.array([([1] * int(FS / 2) + [0] * int(FS / 2)) * 10] * CH_NUM) * 1e-5\r\nonset = [1.5, 2, 2.7, 5]\r\nduration = [.1] * len(onset)\r\ndescription = ['on', 3, 4, 'off']\r\nrec_date = datetime(2022, 1, 12, 10, 15, 5, tzinfo=timezone.utc)\r\nraw2 = _create_raw(data, ch_names, ch_types, FS, onset, duration, description, rec_date)\r\n\r\nraw = mne.io.concatenate_raws([raw1, raw2])\r\nstart_mask = raw.annotations.description == 'on'\r\nend_mask = raw.annotations.description == 'off'\r\ntmins = raw.annotations.onset[start_mask]\r\ntmaxs = raw.annotations.onset[end_mask]\r\n\r\nfor i, tmin in enumerate(tmins):\r\n    tmax = tmaxs[i]\r\n    sess = raw.copy()\r\n    sess.crop(tmin, tmax)\r\n    sess.plot(block=False)\r\n\r\nraw.plot(block=True)\r\n```\r\n\r\n\r\n[MWE]: https://en.wikipedia.org/wiki/Minimal_Working_Example\r\n[built-in datasets]: https://mne.tools/dev/overview/datasets_index.html\r\n[sample]: https://mne.tools/dev/overview/datasets_index.html#sample\r\n\r\n\r\n#### Expected results\r\nreplace\r\n`rec_date = datetime(...)`\r\nwith\r\n`rec_date = None`\r\n\r\nexpected result: https://imgur.com/a/HqnbGTL\r\n\r\n\r\n#### Additional information\r\nBackend TkAgg is interactive backend. Turning interactive mode on.\r\nPlatform:       Windows-10-10.0.22000-SP0\r\nPython:         3.9.7 (default, Sep 16 2021, 16:59:28) [MSC v.1916 64 bit (AMD64)]\r\nExecutable:     C:\\Programs\\Miniconda3\\envs\\bci\\python.exe\r\nCPU:            Intel64 Family 6 Model 158 Stepping 10, GenuineIntel: 12 cores\r\nMemory:         Unavailable (requires \"psutil\" package)\r\nmne:            1.0.dev0\r\nnumpy:          1.19.5 {blas=D:\\\\a\\\\1\\\\s\\\\numpy\\\\build\\\\openblas_info, lapack=D:\\\\a\\\\1\\\\s\\\\numpy\\\\build\\\\openblas_lapack_info}\r\nscipy:          1.7.1\r\nmatplotlib:     3.4.3 {backend=TkAgg}\r\nsklearn:        1.0.1\r\nnumba:          Not found\r\nnibabel:        Not found\r\nnilearn:        Not found\r\ndipy:           Not found\r\ncupy:           Not found\r\npandas:         1.3.4\r\npyvista:        Not found\r\npyvistaqt:      Not found\r\nipyvtklink:     Not found\r\nvtk:            Not found\r\nPyQt5:          Not found\r\nipympl:         Not found\r\nmne_qt_browser: Not found\r\npooch:          Not found\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/10195/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10195/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/10194", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10194/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10194/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10194/events", "html_url": "https://github.com/mne-tools/mne-python/issues/10194", "id": 1099570129, "node_id": "I_kwDOABPcUM5BihvR", "number": 10194, "title": "adding function to list in viz/topo.py", "user": {"login": "drammock", "id": 1810515, "node_id": "MDQ6VXNlcjE4MTA1MTU=", "avatar_url": "https://avatars.githubusercontent.com/u/1810515?v=4", "gravatar_id": "", "url": "https://api.github.com/users/drammock", "html_url": "https://github.com/drammock", "followers_url": "https://api.github.com/users/drammock/followers", "following_url": "https://api.github.com/users/drammock/following{/other_user}", "gists_url": "https://api.github.com/users/drammock/gists{/gist_id}", "starred_url": "https://api.github.com/users/drammock/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/drammock/subscriptions", "organizations_url": "https://api.github.com/users/drammock/orgs", "repos_url": "https://api.github.com/users/drammock/repos", "events_url": "https://api.github.com/users/drammock/events{/privacy}", "received_events_url": "https://api.github.com/users/drammock/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2022-01-11T20:04:56Z", "updated_at": "2022-04-28T14:40:58Z", "closed_at": "2022-04-28T14:40:58Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "In working on another problem I noticed something is wrong with this line:\r\n\r\nhttps://github.com/mne-tools/mne-python/blob/b7e8c7791b000258b2ba158ddd89eecbbb35af30/mne/viz/topo.py#L670\r\n\r\nit's adding a list `['w']` to a function.  Probably should be\r\n\r\n```py\r\n        colors = ['w'] + _get_color_list()\r\n```\r\n\r\nbut I don't have time to follow up at the moment.  I'm surprised this isn't caught by any of our tests.", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/10194/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10194/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/10193", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10193/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10193/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10193/events", "html_url": "https://github.com/mne-tools/mne-python/issues/10193", "id": 1098321187, "node_id": "I_kwDOABPcUM5Bdw0j", "number": 10193, "title": "Docker-ized MNE not detecting PyVista and Mayavi backends ", "user": {"login": "FuriouslyCurious", "id": 8412277, "node_id": "MDQ6VXNlcjg0MTIyNzc=", "avatar_url": "https://avatars.githubusercontent.com/u/8412277?v=4", "gravatar_id": "", "url": "https://api.github.com/users/FuriouslyCurious", "html_url": "https://github.com/FuriouslyCurious", "followers_url": "https://api.github.com/users/FuriouslyCurious/followers", "following_url": "https://api.github.com/users/FuriouslyCurious/following{/other_user}", "gists_url": "https://api.github.com/users/FuriouslyCurious/gists{/gist_id}", "starred_url": "https://api.github.com/users/FuriouslyCurious/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/FuriouslyCurious/subscriptions", "organizations_url": "https://api.github.com/users/FuriouslyCurious/orgs", "repos_url": "https://api.github.com/users/FuriouslyCurious/repos", "events_url": "https://api.github.com/users/FuriouslyCurious/events{/privacy}", "received_events_url": "https://api.github.com/users/FuriouslyCurious/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2022-01-10T20:08:32Z", "updated_at": "2022-03-09T19:59:58Z", "closed_at": "2022-03-09T19:59:58Z", "author_association": "NONE", "active_lock_reason": null, "body": "**Steps to reproduce:**\r\n\r\nInstall MNE inside a docker image:\r\n\r\n```\r\nmamba install -c conda-forge -vy jupyterlab ipywidgets ipympl nodejs pytorch torchvision mne mne-nirs\r\n\r\nconda list shows tht Mayavi and PyVista both are installed.  Output edited for brevity.\r\nconda list                                                                                   (base)\r\n# packages in environment:\r\n#\r\n# Name                    Version                   Build  Channel\r\n\r\nipycanvas                 0.10.2             pyhd8ed1ab_0    conda-forge\r\nipyevents                 2.0.1              pyhd8ed1ab_0    conda-forge\r\nipykernel                 6.6.1            py39hef51801_0    conda-forge\r\nipympl                    0.8.5              pyhd8ed1ab_0    conda-forge\r\nipython                   7.31.0           py39hf3d152e_0    conda-forge\r\nipython_genutils          0.2.0                      py_1    conda-forge\r\nipyvtklink                0.2.1              pyhd8ed1ab_1    conda-forge\r\nipywidgets                7.6.5              pyhd8ed1ab_0    conda-forge\r\n\r\njupyterlab                3.2.6              pyhd8ed1ab_0    conda-forge\r\njupyterlab_pygments       0.1.2              pyh9f0ad1d_0    conda-forge\r\njupyterlab_server         2.10.3             pyhd8ed1ab_0    conda-forge\r\njupyterlab_widgets        1.0.2              pyhd8ed1ab_0    conda-forge\r\n\r\nmamba                     0.19.1           py39hfa8f2c8_0    conda-forge\r\nmatplotlib                3.5.1            py39hf3d152e_0    conda-forge\r\nmatplotlib-base           3.5.1            py39h2fa2bec_0    conda-forge\r\nmatplotlib-inline         0.1.3              pyhd8ed1ab_0    conda-forge\r\nmayavi                    4.7.2            py39h71d8d94_5    conda-forge\r\n\r\nmne                       0.24.1               hd8ed1ab_1    conda-forge\r\nmne-base                  0.24.1             pyhd8ed1ab_1    conda-forge\r\nmne-nirs                  0.1.2              pyhd8ed1ab_0    conda-forge\r\nmne-qt-browser            0.1.7              pyhd8ed1ab_0    conda-forge\r\n\r\nnibabel                   3.2.1              pyhd8ed1ab_0    conda-forge\r\nnilearn                   0.8.1              pyhd8ed1ab_0    conda-forge\r\nninja                     1.10.2               h4bd325d_1    conda-forge\r\nnodejs                    16.12.0              h92b4a50_0    conda-forge\r\nnotebook                  6.4.6              pyha770c72_0    conda-forge\r\n\r\nnumba                     0.53.1           py39h56b8d98_1    conda-forge\r\nnumexpr                   2.7.3            py39hde0f152_1    conda-forge\r\nnumpy                     1.22.0           py39h91f2184_0    conda-forge\r\n\r\npillow                    8.4.0            py39ha612740_0    conda-forge\r\npip                       21.3.1             pyhd8ed1ab_0    conda-forge\r\npooch                     1.5.2              pyhd8ed1ab_0    conda-forge\r\npyqt                      5.12.3           py39hf3d152e_8    conda-forge\r\npyqt-impl                 5.12.3           py39hde8b62d_8    conda-forge\r\npyqt5-sip                 4.19.18          py39he80948d_8    conda-forge\r\npyqtchart                 5.12             py39h0fcd23e_8    conda-forge\r\npyqtgraph                 0.12.3             pyhd8ed1ab_0    conda-forge\r\npyqtwebengine             5.12.1           py39h0fcd23e_8    conda-forge\r\npython                    3.9.9           h62f1059_0_cpython    conda-forge\r\npytorch                   1.9.0           cpu_py39hfbcbfe4_0    conda-forge\r\npytorch-cpu               1.9.0           cpu_py39h718b53a_0    conda-forge\r\npyvista                   0.33.0             pyhd8ed1ab_0    conda-forge\r\npyvistaqt                 0.6.0              pyhd8ed1ab_1    conda-forge\r\nqt                        5.12.9               hda022c4_4    conda-forge\r\nqtpy                      2.0.0              pyhd8ed1ab_0    conda-forge\r\n\r\n```\r\n\r\n\r\n**Problem:**\r\n\r\nMNE sys info doesn't recognize Mayavi or PyVista.  Provides the same results in REPL as well as Jupyter Lab Notebook.\r\n```\r\n\r\necho -e \"import mne; mne.sys_info()\" | exec python3\r\nPlatform:       Linux-5.10.76-linuxkit-x86_64-with-glibc2.31\r\nPython:         3.9.9 | packaged by conda-forge | (main, Dec 20 2021, 02:41:03)  [GCC 9.4.0]\r\n\r\nmne:            0.24.1\r\nnumpy:          1.22.0 {blas=NO_ATLAS_INFO, lapack=lapack}\r\nscipy:          1.7.3\r\nmatplotlib:     3.5.1 {backend=agg}\r\nsklearn:        1.0.2\r\nnumba:          0.53.1\r\nnibabel:        3.2.1\r\nnilearn:        0.8.1\r\ndipy:           1.4.1\r\ncupy:           Not found\r\npandas:         1.3.5\r\nmayavi:         Not found\r\npyvista:        Not found\r\npyvistaqt:      Not found\r\nipyvtklink:     0.2.1\r\nvtk:            Not found\r\nPyQt5:          5.12.3\r\nipympl:         0.8.5\r\nmne_qt_browser: 0.1.7\r\npooch:          v1.5.2\r\n\r\n```\r\n\r\n\r\n**Trying to set \"Notebook\" (or any other) 3D backend:**\r\nProvides the same results in REPL as well as Jupyter Lab Notebook.\r\n\r\n```\r\necho -e \"import mne; mne.viz.set_3d_backend(\\\"notebook\\\")\" | exec python3\r\nTraceback (most recent call last):\r\n  File \"<stdin>\", line 1, in <module>\r\n  File \"<decorator-gen-182>\", line 24, in set_3d_backend\r\n  File \"/lib/python3.9/site-packages/mne/viz/backends/renderer.py\", line 129, in set_3d_backend\r\n    _reload_backend(backend_name)\r\n  File \"/lib/python3.9/site-packages/mne/viz/backends/renderer.py\", line 34, in _reload_backend\r\n    backend = importlib.import_module(name=_backend_name_map[backend_name],\r\n  File \"/lib/python3.9/importlib/__init__.py\", line 127, in import_module\r\n    return _bootstrap._gcd_import(name[level:], package, level)\r\n  File \"<frozen importlib._bootstrap>\", line 1030, in _gcd_import\r\n  File \"<frozen importlib._bootstrap>\", line 1007, in _find_and_load\r\n  File \"<frozen importlib._bootstrap>\", line 986, in _find_and_load_unlocked\r\n  File \"<frozen importlib._bootstrap>\", line 680, in _load_unlocked\r\n  File \"<frozen importlib._bootstrap_external>\", line 850, in exec_module\r\n  File \"<frozen importlib._bootstrap>\", line 228, in _call_with_frames_removed\r\n  File \"/lib/python3.9/site-packages/mne/viz/backends/_notebook.py\", line 10, in <module>\r\n    import pyvista\r\n  File \"/lib/python3.9/site-packages/pyvista/__init__.py\", line 12, in <module>\r\n    from pyvista.plotting import *\r\n  File \"/lib/python3.9/site-packages/pyvista/plotting/__init__.py\", line 4, in <module>\r\n    from .charts import Chart2D, ChartMPL, ChartBox, ChartPie\r\n  File \"/lib/python3.9/site-packages/pyvista/plotting/charts.py\", line 13, in <module>\r\n    from pyvista import _vtk\r\n  File \"/lib/python3.9/site-packages/pyvista/_vtk.py\", line 369, in <module>\r\n    import vtkmodules.vtkRenderingContextOpenGL2  # Necessary for displaying charts, otherwise crashes on rendering\r\nImportError: libGL.so.1: cannot open shared object file: No such file or directory\r\n\r\n```\r\n\r\n**Installing OpenGL libraries inside Docker:**\r\n\r\nI installed all OpenGL libraries inside Docker (libgl1-mesa-glx, ffmpeg, libsm6, libxext6, python3-opencv), but the result remains the same.  MNE sys info does not detect these backends.\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/10193/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10193/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/10187", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10187/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10187/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10187/events", "html_url": "https://github.com/mne-tools/mne-python/issues/10187", "id": 1096306200, "node_id": "I_kwDOABPcUM5BWE4Y", "number": 10187, "title": "Size of resolution matrix (make_inverse_resolution_matrix) inconsistent with documentation", "user": {"login": "Katharinski", "id": 20595787, "node_id": "MDQ6VXNlcjIwNTk1Nzg3", "avatar_url": "https://avatars.githubusercontent.com/u/20595787?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Katharinski", "html_url": "https://github.com/Katharinski", "followers_url": "https://api.github.com/users/Katharinski/followers", "following_url": "https://api.github.com/users/Katharinski/following{/other_user}", "gists_url": "https://api.github.com/users/Katharinski/gists{/gist_id}", "starred_url": "https://api.github.com/users/Katharinski/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Katharinski/subscriptions", "organizations_url": "https://api.github.com/users/Katharinski/orgs", "repos_url": "https://api.github.com/users/Katharinski/repos", "events_url": "https://api.github.com/users/Katharinski/events{/privacy}", "received_events_url": "https://api.github.com/users/Katharinski/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 15, "created_at": "2022-01-07T13:13:15Z", "updated_at": "2022-08-23T10:58:42Z", "closed_at": "2022-08-23T10:58:42Z", "author_association": "NONE", "active_lock_reason": null, "body": "#### Describe the bug\r\nIt is unclear what the correct way to compute the resolution matrix is when using `mne.minimum_norm.make_inverse_resolution_matrix` with an inverse operator that has loose orientations. The function `_get_matrix_from_inverse_operator` is called (in line 59) to return a matrix that can be multiplied with the leadfield, and the documentation there states:\r\n\r\n> For loose orientation constraint, the CTFs are computed for the normal component (pick_ori=\u2018normal\u2019).\r\n\r\nHowever, it does not seem like `pick_ori='normal'` is actually used. \r\n\r\n#### Steps to reproduce\r\n```\r\nimport mne \r\n\r\ndata_path = mne.datasets.sample.data_path()\r\nfname_inv = data_path + '/MEG/sample/sample_audvis-eeg-oct-6-eeg-inv.fif' # free source orientation\r\ninverse_operator = mne.minimum_norm.read_inverse_operator(fname_inv)\r\n\r\nfname_fwd = data_path + '/MEG/sample/sample_audvis-eeg-oct-6-fwd.fif'\r\nforward = mne.read_forward_solution(fname_fwd)\r\n\r\nmethod = \"sLORETA\" \r\nsnr = 3.\r\nlambda2 = 1. / snr ** 2\r\n\r\nres_matrix = mne.minimum_norm.make_inverse_resolution_matrix(forward,inverse_operator,method=method,lambda2=lambda2)\r\n```\r\n\r\n#### Expected results\r\nI expect the res_matrix to have dimensions nsources x nsources, where nsources is the number of sources in the source space. \r\n\r\n#### Actual results\r\nThe res_matrix has dimensions (3*nsources) x (3*nsources). \r\n\r\n#### Additional information\r\nOutput of `mne.sys_info()`: \r\n```\r\nQt WebEngine seems to be initialized from a plugin. Please set Qt::AA_ShareOpenGLContexts using QCoreApplication::setAttribute before constructing QGuiApplication.\r\nPlatform:      Linux-5.11.0-44-generic-x86_64-with-debian-bullseye-sid\r\nPython:        3.7.9 (default, Aug 31 2020, 12:42:55)  [GCC 7.3.0]\r\nExecutable:    /home/katharina/snap/anaconda3/envs/py37cmp-gui/bin/python\r\nCPU:           x86_64: 16 cores\r\nMemory:        31.3 GB\r\n\r\nmne:           0.20.7\r\nnumpy:         1.18.5 {blas=mkl_rt, lapack=mkl_rt}\r\nscipy:         1.5.2\r\nmatplotlib:    3.2.2 {backend=Qt5Agg}\r\n\r\nsklearn:       1.0.1\r\nnumba:         Not found\r\nnibabel:       3.2.1\r\ncupy:          Not found\r\npandas:        1.3.4\r\ndipy:          1.1.1\r\nmayavi:        Not found\r\npyvista:       Not found\r\nvtk:           Not found\r\n```\r\n", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/10187/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10187/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/10173", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10173/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10173/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10173/events", "html_url": "https://github.com/mne-tools/mne-python/issues/10173", "id": 1092833417, "node_id": "I_kwDOABPcUM5BI1CJ", "number": 10173, "title": "can't plot using Brain class", "user": {"login": "drammock", "id": 1810515, "node_id": "MDQ6VXNlcjE4MTA1MTU=", "avatar_url": "https://avatars.githubusercontent.com/u/1810515?v=4", "gravatar_id": "", "url": "https://api.github.com/users/drammock", "html_url": "https://github.com/drammock", "followers_url": "https://api.github.com/users/drammock/followers", "following_url": "https://api.github.com/users/drammock/following{/other_user}", "gists_url": "https://api.github.com/users/drammock/gists{/gist_id}", "starred_url": "https://api.github.com/users/drammock/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/drammock/subscriptions", "organizations_url": "https://api.github.com/users/drammock/orgs", "repos_url": "https://api.github.com/users/drammock/repos", "events_url": "https://api.github.com/users/drammock/events{/privacy}", "received_events_url": "https://api.github.com/users/drammock/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2022-01-03T21:28:43Z", "updated_at": "2022-01-03T21:37:00Z", "closed_at": "2022-01-03T21:36:59Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "```py\r\nIn [1]: import mne\r\nIn [2]: Brain = mne.viz.get_brain_class()\r\nIn [3]: brain = Brain('sample')\r\n---------------------------------------------------------------------------\r\nAssertionError                            Traceback (most recent call last)\r\n<ipython-input-3-7cf1a9f56a3b> in <module>\r\n----> 1 brain = Brain('sample')\r\n\r\n/opt/mne/python/mne/viz/_brain/_brain.py in __init__(***failed resolving arguments***)\r\n    525         logger.debug(f'Hemi offset: {offset}')\r\n    526 \r\n--> 527         self._renderer = _get_renderer(name=self._title, size=size,\r\n    528                                        bgcolor=self._bg_color,\r\n    529                                        shape=shape,\r\n\r\n/opt/mne/python/mne/viz/backends/renderer.py in _get_renderer(*args, **kwargs)\r\n     37 \r\n     38 def _get_renderer(*args, **kwargs):\r\n---> 39     _get_3d_backend()\r\n     40     return backend._Renderer(*args, **kwargs)\r\n     41 \r\n\r\n/opt/mne/python/mne/viz/backends/renderer.py in _get_3d_backend()\r\n    163             for name in VALID_3D_BACKENDS:\r\n    164                 try:\r\n--> 165                     _reload_backend(name)\r\n    166                 except ImportError as exc:\r\n    167                     errors[name] = str(exc)\r\n\r\n/opt/mne/python/mne/viz/backends/renderer.py in _reload_backend(backend_name)\r\n     31 def _reload_backend(backend_name):\r\n     32     global backend\r\n---> 33     backend = importlib.import_module(name=_backend_name_map[backend_name],\r\n     34                                       package='mne.viz.backends')\r\n     35     logger.info('Using %s 3d backend.\\n' % backend_name)\r\n\r\n/opt/miniforge3/envs/mnedev/lib/python3.9/importlib/__init__.py in import_module(name, package)\r\n    125                 break\r\n    126             level += 1\r\n--> 127     return _bootstrap._gcd_import(name[level:], package, level)\r\n    128 \r\n    129 \r\n\r\n/opt/miniforge3/envs/mnedev/lib/python3.9/importlib/_bootstrap.py in _gcd_import(name, package, level)\r\n\r\n/opt/miniforge3/envs/mnedev/lib/python3.9/importlib/_bootstrap.py in _find_and_load(name, import_)\r\n\r\n/opt/miniforge3/envs/mnedev/lib/python3.9/importlib/_bootstrap.py in _find_and_load_unlocked(name, import_)\r\n\r\n/opt/miniforge3/envs/mnedev/lib/python3.9/importlib/_bootstrap.py in _load_unlocked(spec)\r\n\r\n/opt/miniforge3/envs/mnedev/lib/python3.9/importlib/_bootstrap_external.py in exec_module(self, module)\r\n\r\n/opt/miniforge3/envs/mnedev/lib/python3.9/importlib/_bootstrap.py in _call_with_frames_removed(f, *args, **kwds)\r\n\r\n/opt/mne/python/mne/viz/backends/_qt.py in <module>\r\n      9 \r\n     10 import pyvista\r\n---> 11 from pyvistaqt.plotting import FileDialog\r\n     12 \r\n     13 from PyQt5.QtCore import Qt, pyqtSignal, QLocale\r\n\r\n/opt/miniforge3/envs/mnedev/lib/python3.9/site-packages/pyvistaqt/__init__.py in <module>\r\n      1 \"\"\"PyVista package for 3D plotting and mesh analysis.\"\"\"\r\n      2 from pyvistaqt._version import __version__\r\n----> 3 from pyvistaqt.plotting import BackgroundPlotter, MainWindow, MultiPlotter, QtInteractor\r\n      4 \r\n      5 __all__ = [\r\n\r\n/opt/miniforge3/envs/mnedev/lib/python3.9/site-packages/pyvistaqt/plotting.py in <module>\r\n     54 from pyvista.plotting.plotting import BasePlotter\r\n     55 from pyvista.utilities import conditional_decorator, threaded\r\n---> 56 from qtpy import QtCore\r\n     57 from qtpy.QtCore import QSize, QTimer, Signal\r\n     58 from qtpy.QtWidgets import (\r\n\r\n/opt/miniforge3/envs/mnedev/lib/python3.9/site-packages/qtpy/__init__.py in <module>\r\n    110 API = os.environ[QT_API].lower()\r\n    111 initial_api = API\r\n--> 112 assert API in (PYQT5_API + PYQT4_API + PYSIDE_API + PYSIDE2_API)\r\n    113 \r\n    114 is_old_pyqt = is_pyqt46 = False\r\n\r\nAssertionError: \r\nipdb> p API\r\n'pyqt6'\r\n```\r\n\r\nOddly, `mamba list` shows this (excerpt):\r\n```\r\n# Name                    Version                   Build  Channel\r\nipyvtklink                0.2.1              pyhd8ed1ab_1    conda-forge\r\npyvista                   0.32.1             pyhd8ed1ab_0    conda-forge\r\npyvistaqt                 0.5.0              pyhd8ed1ab_0    conda-forge\r\n```\r\nbut `mne.sys_info()` says pyvistaqt / ipyvtklink is not found:\r\n\r\n```\r\npyvista:        0.32.1 {OpenGL 4.5.0 NVIDIA 460.91.03 via GeForce RTX 2060/PCIe/SSE2}\r\npyvistaqt:      Not found\r\nipyvtklink:     Not found\r\nvtk:            9.0.1\r\nPyQt5:          5.12.3\r\n```\r\n\r\nThings tried so far:\r\n\r\n- upgrading to pyvistaqt 0.6.0\r\n", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/10173/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10173/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/10169", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10169/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10169/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10169/events", "html_url": "https://github.com/mne-tools/mne-python/issues/10169", "id": 1092456927, "node_id": "I_kwDOABPcUM5BHZHf", "number": 10169, "title": "Report.add_figure() should not close the passed figures", "user": {"login": "hoechenberger", "id": 2046265, "node_id": "MDQ6VXNlcjIwNDYyNjU=", "avatar_url": "https://avatars.githubusercontent.com/u/2046265?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hoechenberger", "html_url": "https://github.com/hoechenberger", "followers_url": "https://api.github.com/users/hoechenberger/followers", "following_url": "https://api.github.com/users/hoechenberger/following{/other_user}", "gists_url": "https://api.github.com/users/hoechenberger/gists{/gist_id}", "starred_url": "https://api.github.com/users/hoechenberger/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hoechenberger/subscriptions", "organizations_url": "https://api.github.com/users/hoechenberger/orgs", "repos_url": "https://api.github.com/users/hoechenberger/repos", "events_url": "https://api.github.com/users/hoechenberger/events{/privacy}", "received_events_url": "https://api.github.com/users/hoechenberger/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/mne-tools/mne-python/milestones/21", "html_url": "https://github.com/mne-tools/mne-python/milestone/21", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/milestones/21/labels", "id": 7253492, "node_id": "MI_kwDOABPcUM4Abq30", "number": 21, "title": "1.0", "description": "", "creator": {"login": "larsoner", "id": 2365790, "node_id": "MDQ6VXNlcjIzNjU3OTA=", "avatar_url": "https://avatars.githubusercontent.com/u/2365790?v=4", "gravatar_id": "", "url": "https://api.github.com/users/larsoner", "html_url": "https://github.com/larsoner", "followers_url": "https://api.github.com/users/larsoner/followers", "following_url": "https://api.github.com/users/larsoner/following{/other_user}", "gists_url": "https://api.github.com/users/larsoner/gists{/gist_id}", "starred_url": "https://api.github.com/users/larsoner/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/larsoner/subscriptions", "organizations_url": "https://api.github.com/users/larsoner/orgs", "repos_url": "https://api.github.com/users/larsoner/repos", "events_url": "https://api.github.com/users/larsoner/events{/privacy}", "received_events_url": "https://api.github.com/users/larsoner/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 83, "state": "closed", "created_at": "2021-10-14T16:40:49Z", "updated_at": "2022-05-03T11:29:23Z", "due_on": "2022-02-25T08:00:00Z", "closed_at": "2022-05-03T11:29:23Z"}, "comments": 3, "created_at": "2022-01-03T12:08:52Z", "updated_at": "2022-02-15T14:39:48Z", "closed_at": "2022-02-15T14:39:48Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "I think if MNE-report creates a figure, it should auto-close, but if user created the figure (as in `add_figure`), it should not close, by default.\r\n\r\n_Originally posted by @jasmainak in https://github.com/mne-tools/mne-python/issues/10164#issuecomment-1004045549_", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/10169/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10169/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/10167", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10167/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10167/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10167/events", "html_url": "https://github.com/mne-tools/mne-python/issues/10167", "id": 1092096928, "node_id": "I_kwDOABPcUM5BGBOg", "number": 10167, "title": "Wrong annotation when export eeg to edf after cropping and set_annotation", "user": {"login": "ZhengLiu97", "id": 65115609, "node_id": "MDQ6VXNlcjY1MTE1NjA5", "avatar_url": "https://avatars.githubusercontent.com/u/65115609?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ZhengLiu97", "html_url": "https://github.com/ZhengLiu97", "followers_url": "https://api.github.com/users/ZhengLiu97/followers", "following_url": "https://api.github.com/users/ZhengLiu97/following{/other_user}", "gists_url": "https://api.github.com/users/ZhengLiu97/gists{/gist_id}", "starred_url": "https://api.github.com/users/ZhengLiu97/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ZhengLiu97/subscriptions", "organizations_url": "https://api.github.com/users/ZhengLiu97/orgs", "repos_url": "https://api.github.com/users/ZhengLiu97/repos", "events_url": "https://api.github.com/users/ZhengLiu97/events{/privacy}", "received_events_url": "https://api.github.com/users/ZhengLiu97/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2022-01-02T20:41:59Z", "updated_at": "2022-01-04T17:55:34Z", "closed_at": "2022-01-04T17:55:33Z", "author_association": "NONE", "active_lock_reason": null, "body": "Here is a sample code\r\n```\r\nimport mne\r\nfpath = ...\r\nraw = mne.io.read_raw_fif(fpath, preload=True)\r\nannot = mne.Annotations(...)\r\nraw.set_annotations(onset=[15], duration=[0], description=['start'])\r\n\r\nraw.crop(10, 100)\r\nraw.export('raw.edf')\r\n```\r\nThe bug is:\r\nIf the ```start``` label is at 15th second in the original file, after I cropped the data from 10th to 100th second, the ```start``` label should be at 5th second. It's OK if I saved the file in FIF format, but to EDF format, the ```start``` label is at 10 + 15 = 25th second.", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/10167/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10167/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/10165", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10165/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10165/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10165/events", "html_url": "https://github.com/mne-tools/mne-python/issues/10165", "id": 1090862828, "node_id": "I_kwDOABPcUM5BBT7s", "number": 10165, "title": "Conda solver fails when installed with Pytorch + Sci-kit", "user": {"login": "FuriouslyCurious", "id": 8412277, "node_id": "MDQ6VXNlcjg0MTIyNzc=", "avatar_url": "https://avatars.githubusercontent.com/u/8412277?v=4", "gravatar_id": "", "url": "https://api.github.com/users/FuriouslyCurious", "html_url": "https://github.com/FuriouslyCurious", "followers_url": "https://api.github.com/users/FuriouslyCurious/followers", "following_url": "https://api.github.com/users/FuriouslyCurious/following{/other_user}", "gists_url": "https://api.github.com/users/FuriouslyCurious/gists{/gist_id}", "starred_url": "https://api.github.com/users/FuriouslyCurious/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/FuriouslyCurious/subscriptions", "organizations_url": "https://api.github.com/users/FuriouslyCurious/orgs", "repos_url": "https://api.github.com/users/FuriouslyCurious/repos", "events_url": "https://api.github.com/users/FuriouslyCurious/events{/privacy}", "received_events_url": "https://api.github.com/users/FuriouslyCurious/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 15, "created_at": "2021-12-30T04:10:02Z", "updated_at": "2022-01-04T17:47:03Z", "closed_at": "2022-01-04T17:47:03Z", "author_association": "NONE", "active_lock_reason": null, "body": "### Issue\r\n\r\nWhen I try to install pytorch, sci-kit family of packages, and mne at the same time, conda solver is not able to work through all the dependencies and gets stuck in a recursive solver loop with following error message:\r\n\r\n\r\n```\r\n#8 86.88 Collecting package metadata (repodata.json): ...working... done\r\n#8 154.0 Solving environment: ...working... failed with initial frozen solve. Retrying with flexible solve.\r\nExamining scikit-image:  18%|\u2588\u258a        | 10/56 [00:20<02:03,  2.69s/it]\r\n```\r\n\r\n### Potential Resolution\r\n\r\nPotential resolution would be to revise requirements.txt / .yml to be less restrictive.  This would allow conda solver to find a solution.\r\n\r\n\r\n### Temporary Workaround\r\n\r\nInstall MNE and MNE-NIRS with pip instead of conda ", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/10165/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10165/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/10164", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10164/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10164/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10164/events", "html_url": "https://github.com/mne-tools/mne-python/issues/10164", "id": 1090604052, "node_id": "I_kwDOABPcUM5BAUwU", "number": 10164, "title": "report.add_figure bad tags error not specific enough", "user": {"login": "jasmainak", "id": 15852194, "node_id": "MDQ6VXNlcjE1ODUyMTk0", "avatar_url": "https://avatars.githubusercontent.com/u/15852194?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jasmainak", "html_url": "https://github.com/jasmainak", "followers_url": "https://api.github.com/users/jasmainak/followers", "following_url": "https://api.github.com/users/jasmainak/following{/other_user}", "gists_url": "https://api.github.com/users/jasmainak/gists{/gist_id}", "starred_url": "https://api.github.com/users/jasmainak/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jasmainak/subscriptions", "organizations_url": "https://api.github.com/users/jasmainak/orgs", "repos_url": "https://api.github.com/users/jasmainak/repos", "events_url": "https://api.github.com/users/jasmainak/events{/privacy}", "received_events_url": "https://api.github.com/users/jasmainak/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "hoechenberger", "id": 2046265, "node_id": "MDQ6VXNlcjIwNDYyNjU=", "avatar_url": "https://avatars.githubusercontent.com/u/2046265?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hoechenberger", "html_url": "https://github.com/hoechenberger", "followers_url": "https://api.github.com/users/hoechenberger/followers", "following_url": "https://api.github.com/users/hoechenberger/following{/other_user}", "gists_url": "https://api.github.com/users/hoechenberger/gists{/gist_id}", "starred_url": "https://api.github.com/users/hoechenberger/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hoechenberger/subscriptions", "organizations_url": "https://api.github.com/users/hoechenberger/orgs", "repos_url": "https://api.github.com/users/hoechenberger/repos", "events_url": "https://api.github.com/users/hoechenberger/events{/privacy}", "received_events_url": "https://api.github.com/users/hoechenberger/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "hoechenberger", "id": 2046265, "node_id": "MDQ6VXNlcjIwNDYyNjU=", "avatar_url": "https://avatars.githubusercontent.com/u/2046265?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hoechenberger", "html_url": "https://github.com/hoechenberger", "followers_url": "https://api.github.com/users/hoechenberger/followers", "following_url": "https://api.github.com/users/hoechenberger/following{/other_user}", "gists_url": "https://api.github.com/users/hoechenberger/gists{/gist_id}", "starred_url": "https://api.github.com/users/hoechenberger/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hoechenberger/subscriptions", "organizations_url": "https://api.github.com/users/hoechenberger/orgs", "repos_url": "https://api.github.com/users/hoechenberger/repos", "events_url": "https://api.github.com/users/hoechenberger/events{/privacy}", "received_events_url": "https://api.github.com/users/hoechenberger/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 6, "created_at": "2021-12-29T15:47:18Z", "updated_at": "2022-01-22T11:19:07Z", "closed_at": "2022-01-22T11:19:07Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "#### Describe the bug\r\nThe report class complains about a bad tag but does not say what characters are bad. Furthermore, I think it should allow numeric characters. I get:\r\n\r\n```py\r\nValueError: The following tags contained invalid characters: 'Subject 2002'\r\n```\r\n\r\n#### Steps to reproduce\r\nJust do:\r\n\r\n```py\r\nimport matplotlib.pyplot as plt\r\nfrom mne.report import Report\r\n\r\nrep = Report()\r\nsubject = '2002'\r\nfig = plt.figure()\r\nrep.add_figure(fig, title=f'Figure {i}', tags=(f'Subject {subject}',))\r\n```\r\n\r\n#### Expected results\r\nReport is produced with tag \"subject 2002\"\r\n\r\n#### Actual results\r\nNumeric subjects are quite common and I'd imagine a common usecase would be to use numeric tags. I think they should work ... did work previously in `rep.add_figs_to_section`, so I'd consider this a regression.\r\n\r\n#### Additional information\r\nI'm on latest master branch\r\n", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/10164/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10164/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/10150", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10150/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10150/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10150/events", "html_url": "https://github.com/mne-tools/mne-python/issues/10150", "id": 1083853545, "node_id": "I_kwDOABPcUM5Amkrp", "number": 10150, "title": "epoch annotation breaks tutorial", "user": {"login": "drammock", "id": 1810515, "node_id": "MDQ6VXNlcjE4MTA1MTU=", "avatar_url": "https://avatars.githubusercontent.com/u/1810515?v=4", "gravatar_id": "", "url": "https://api.github.com/users/drammock", "html_url": "https://github.com/drammock", "followers_url": "https://api.github.com/users/drammock/followers", "following_url": "https://api.github.com/users/drammock/following{/other_user}", "gists_url": "https://api.github.com/users/drammock/gists{/gist_id}", "starred_url": "https://api.github.com/users/drammock/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/drammock/subscriptions", "organizations_url": "https://api.github.com/users/drammock/orgs", "repos_url": "https://api.github.com/users/drammock/repos", "events_url": "https://api.github.com/users/drammock/events{/privacy}", "received_events_url": "https://api.github.com/users/drammock/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2021-12-18T15:19:32Z", "updated_at": "2021-12-21T03:09:19Z", "closed_at": "2021-12-21T03:09:19Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "@adam2392 can you check tutorials/io/60_ctf_bst_auditory.py, line 230, the doc build is failing on that line with `RuntimeWarning: Concatenation of Annotations within Epochs is not supported yet. All annotations will be dropped.`\r\n\r\nhttps://app.circleci.com/pipelines/github/mne-tools/mne-python/12087/workflows/59484b30-ecef-4a42-9b6c-9fef1e2e3df1/jobs/39951", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/10150/reactions", "total_count": 1, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10150/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/10139", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10139/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10139/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10139/events", "html_url": "https://github.com/mne-tools/mne-python/issues/10139", "id": 1081033067, "node_id": "I_kwDOABPcUM5Ab0Fr", "number": 10139, "title": "apply_baseline fails with AssertionError", "user": {"login": "sappelhoff", "id": 9084751, "node_id": "MDQ6VXNlcjkwODQ3NTE=", "avatar_url": "https://avatars.githubusercontent.com/u/9084751?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sappelhoff", "html_url": "https://github.com/sappelhoff", "followers_url": "https://api.github.com/users/sappelhoff/followers", "following_url": "https://api.github.com/users/sappelhoff/following{/other_user}", "gists_url": "https://api.github.com/users/sappelhoff/gists{/gist_id}", "starred_url": "https://api.github.com/users/sappelhoff/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sappelhoff/subscriptions", "organizations_url": "https://api.github.com/users/sappelhoff/orgs", "repos_url": "https://api.github.com/users/sappelhoff/repos", "events_url": "https://api.github.com/users/sappelhoff/events{/privacy}", "received_events_url": "https://api.github.com/users/sappelhoff/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2021-12-15T13:20:08Z", "updated_at": "2022-01-04T18:55:54Z", "closed_at": "2022-01-04T18:55:54Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "# Description\r\n\r\nCalling `apply_baseline` after loading `Epochs` with `preload=False` fails with an AssertionError.\r\n\r\n# MWE\r\n\r\n```python\r\nimport os.path as op\r\nfrom pathlib import Path\r\n\r\nimport mne\r\n\r\nsample_dir = Path(mne.datasets.sample.data_path())\r\nsample_fname = sample_dir / \"MEG\" / \"sample\" / \"sample_audvis_raw.fif\"\r\nraw = mne.io.read_raw_fif(sample_fname, preload=True)\r\nevents = mne.find_events(raw)\r\n\r\nepochs = mne.Epochs(raw, events, baseline=None, preload=False)\r\nbasepath = Path(op.expanduser(\"~\")) / \"Desktop\"\r\nfname = basepath / \"test_baseline_epochs.fif\"\r\nepochs.save(fname, overwrite=True)\r\nepochs = mne.read_epochs(fname, preload=False)\r\nepochs.apply_baseline((None, 0))\r\n```\r\n\r\n# Expected output\r\n\r\n- a normally applied baseline that gets active as soon as data is loaded\r\n- ... or at least an error that tells me that applying a baseline is only possible with preloaded data\r\n\r\n# Actual output\r\n\r\n```python\r\n---------------------------------------------------------------------------\r\nAssertionError                            Traceback (most recent call last)\r\n<ipython-input-1-fd06060ead84> in <module>\r\n     14 epochs.save(fname, overwrite=True)\r\n     15 epochs = mne.read_epochs(fname, preload=False)\r\n---> 16 epochs.apply_baseline((None, 0))\r\n\r\n<decorator-gen-234> in apply_baseline(self, baseline, verbose)\r\n\r\n~/Desktop/bids/mne-python/mne/epochs.py in apply_baseline(self, baseline, verbose)\r\n    723         else:  # logging happens in \"rescale\" in \"if\" branch\r\n    724             logger.info(_log_rescale(baseline))\r\n--> 725             assert self._do_baseline is True\r\n    726         self.baseline = baseline\r\n    727         return self\r\n\r\nAssertionError: \r\n```\r\n\r\n# MNE sys info\r\n\r\nClick on details.\r\n\r\n<details>\r\n\r\n```\r\nPlatform:       Linux-5.4.0-91-generic-x86_64-with-glibc2.10\r\nPython:         3.8.8 (default, Feb 24 2021, 21:46:12)  [GCC 7.3.0]\r\nExecutable:     /home/stefanappelhoff/miniconda3/envs/mne_bids/bin/python\r\nCPU:            x86_64: 8 cores\r\nMemory:         Unavailable (requires \"psutil\" package)\r\nmne:            1.0.dev0\r\nnumpy:          1.21.2 {blas=openblas, lapack=openblas}\r\nscipy:          1.6.1\r\nmatplotlib:     3.3.4 {backend=Qt5Agg}\r\n\r\nsklearn:        0.24.1\r\nnumba:          Not found\r\nnibabel:        3.2.1\r\nnilearn:        0.7.1\r\ndipy:           Not found\r\ncupy:           Not found\r\npandas:         1.2.3\r\npyvista:        Not found\r\npyvistaqt:      Not found\r\nipyvtklink:     Not found\r\nvtk:            Not found\r\nPyQt5:          5.9.2\r\nipympl:         Not found\r\nmne_qt_browser: Not found\r\npooch:          v1.5.1\r\n\r\n```\r\n\r\n</details>", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/10139/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10139/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/10118", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10118/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10118/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10118/events", "html_url": "https://github.com/mne-tools/mne-python/pull/10118", "id": 1075693217, "node_id": "PR_kwDOABPcUM4vnrKH", "number": 10118, "title": "BUG: Time alignments between RAW and annotate_* funcs", "user": {"login": "sappelhoff", "id": 9084751, "node_id": "MDQ6VXNlcjkwODQ3NTE=", "avatar_url": "https://avatars.githubusercontent.com/u/9084751?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sappelhoff", "html_url": "https://github.com/sappelhoff", "followers_url": "https://api.github.com/users/sappelhoff/followers", "following_url": "https://api.github.com/users/sappelhoff/following{/other_user}", "gists_url": "https://api.github.com/users/sappelhoff/gists{/gist_id}", "starred_url": "https://api.github.com/users/sappelhoff/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sappelhoff/subscriptions", "organizations_url": "https://api.github.com/users/sappelhoff/orgs", "repos_url": "https://api.github.com/users/sappelhoff/repos", "events_url": "https://api.github.com/users/sappelhoff/events{/privacy}", "received_events_url": "https://api.github.com/users/sappelhoff/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}, {"id": 3544138022, "node_id": "LA_kwDOABPcUM7TP0Em", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/EOSS4", "name": "EOSS4", "color": "0052cc", "default": false, "description": ""}, {"id": 3629591897, "node_id": "LA_kwDOABPcUM7YVy1Z", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/help-needed", "name": "help-needed", "color": "D892D7", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 14, "created_at": "2021-12-09T15:19:37Z", "updated_at": "2022-07-28T16:58:23Z", "closed_at": "2021-12-13T17:03:18Z", "author_association": "MEMBER", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/mne-tools/mne-python/pulls/10118", "html_url": "https://github.com/mne-tools/mne-python/pull/10118", "diff_url": "https://github.com/mne-tools/mne-python/pull/10118.diff", "patch_url": "https://github.com/mne-tools/mne-python/pull/10118.patch", "merged_at": "2021-12-13T17:03:18Z"}, "body": "intended to fix the failures from https://github.com/mne-tools/mne-python/pull/10067#issuecomment-989791374\r\n\r\nThe first commit adds a line to a test, which should run ... but which will make the test fail.\r\n\r\nThe failures most likely have to do with some weird interaction between `raw._first_time` / `raw.first_samp` and the `annotations.orig_time`.\r\n\r\nhttps://dev.azure.com/mne-tools/mne-python/_build/results?buildId=17167&view=logs&j=dded70eb-633c-5c42-e995-a7f8d1f99d91&t=8394206f-a00b-5cb7-44ca-464c9d5f9e25&l=3010\r\n\r\n\r\nI don't know yet how it could be solved, help would be appreciated.", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/10118/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10118/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/10106", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10106/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10106/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10106/events", "html_url": "https://github.com/mne-tools/mne-python/issues/10106", "id": 1073584639, "node_id": "I_kwDOABPcUM4__Zn_", "number": 10106, "title": "`mne.Epochs` sends wrong log messages (1) on metdata, (2) when `decim` is passed", "user": {"login": "sappelhoff", "id": 9084751, "node_id": "MDQ6VXNlcjkwODQ3NTE=", "avatar_url": "https://avatars.githubusercontent.com/u/9084751?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sappelhoff", "html_url": "https://github.com/sappelhoff", "followers_url": "https://api.github.com/users/sappelhoff/followers", "following_url": "https://api.github.com/users/sappelhoff/following{/other_user}", "gists_url": "https://api.github.com/users/sappelhoff/gists{/gist_id}", "starred_url": "https://api.github.com/users/sappelhoff/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sappelhoff/subscriptions", "organizations_url": "https://api.github.com/users/sappelhoff/orgs", "repos_url": "https://api.github.com/users/sappelhoff/repos", "events_url": "https://api.github.com/users/sappelhoff/events{/privacy}", "received_events_url": "https://api.github.com/users/sappelhoff/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 10, "created_at": "2021-12-07T17:10:34Z", "updated_at": "2021-12-13T16:32:07Z", "closed_at": "2021-12-13T16:32:07Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "`mne.Epochs` sends wrong log messages (1) on metdata, (2) when `decim` is passed.\r\n\r\nMWE:\r\n\r\nTry first running this code:\r\n\r\n```Python\r\nimport os\r\nimport mne\r\n\r\nsample_data_folder = mne.datasets.sample.data_path()\r\nsample_data_raw_file = os.path.join(sample_data_folder, 'MEG', 'sample',\r\n                                    'sample_audvis_raw.fif')\r\nraw = mne.io.read_raw_fif(sample_data_raw_file, verbose=False).crop(tmax=120)\r\nraw.load_data()\r\nraw.filter(h_freq=40, l_freq=None)\r\n\r\nevents = mne.find_events(raw, stim_channel='STI 014')\r\nevent_dict = {'auditory/left': 1, 'auditory/right': 2, 'visual/left': 3,\r\n              'visual/right': 4, 'face': 5, 'button': 32}\r\nepochs = mne.Epochs(raw, events, tmin=-0.2, tmax=0.5, event_id=event_dict,\r\n                    decim=1, preload=True)\r\nprint(epochs.times.shape)\r\n\r\n```\r\n\r\nThis is the logged output, where I can see that the `Not setting metadata` log is unnecessarily repeated.\r\nOn the last lines of the log, we see that 421 time points were loaded, and this is indeed the shape of `.times`\r\n\r\n```text\r\n176 events found\r\nEvent IDs: [ 1  2  3  4  5 32]\r\nNot setting metadata\r\nNot setting metadata\r\n176 matching events found\r\nSetting baseline interval to [-0.19979521315838786, 0.0] sec\r\nApplying baseline correction (mode: mean)\r\nCreated an SSP operator (subspace dimension = 3)\r\n3 projection items activated\r\nLoading data for 176 events and 421 original time points ...\r\n1 bad epochs dropped\r\n(421,)\r\n```\r\n\r\nNow change `decim=1` in the `mne.Epochs()` call above to `decim=2`. I would expect the log \r\n\r\n> Loading data for 176 events and 421 original time points ...\r\n\r\nto change in terms of \"original time points\" loaded (should be half as many)\r\n\r\nHowever, this is what we get:\r\n\r\n\r\nThis is the logged output, where the shape of `.times` has indeed halved as expected, yet the log tells us that 421 time points were loaded.\r\n\r\n```text\r\n176 events found\r\nEvent IDs: [ 1  2  3  4  5 32]\r\nNot setting metadata\r\nNot setting metadata\r\n176 matching events found\r\nSetting baseline interval to [-0.19979521315838786, 0.0] sec\r\nApplying baseline correction (mode: mean)\r\nCreated an SSP operator (subspace dimension = 3)\r\n3 projection items activated\r\nLoading data for 176 events and 421 original time points ...\r\n1 bad epochs dropped\r\n(211,)\r\n\r\n```\r\n\r\n# Needed actions\r\n\r\n1. remove duplicate log message on setting metadata. Don't really know where to fix, maybe around here: https://github.com/mne-tools/mne-python/blob/a3066f6eb3730d13d2dce632ff6cb5d4870fbe7f/mne/utils/mixin.py#L412-L418\r\n\r\n\r\n2. adjust logging about loaded time points when creating epochs and decimating. Probably to be fixed somewhere around here: https://github.com/mne-tools/mne-python/blob/a3066f6eb3730d13d2dce632ff6cb5d4870fbe7f/mne/epochs.py#L1388-L1389", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/10106/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10106/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/10099", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10099/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10099/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10099/events", "html_url": "https://github.com/mne-tools/mne-python/issues/10099", "id": 1072412043, "node_id": "I_kwDOABPcUM4_67WL", "number": 10099, "title": "VTK version with python 3.9 and windows", "user": {"login": "mscheltienne", "id": 73893616, "node_id": "MDQ6VXNlcjczODkzNjE2", "avatar_url": "https://avatars.githubusercontent.com/u/73893616?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mscheltienne", "html_url": "https://github.com/mscheltienne", "followers_url": "https://api.github.com/users/mscheltienne/followers", "following_url": "https://api.github.com/users/mscheltienne/following{/other_user}", "gists_url": "https://api.github.com/users/mscheltienne/gists{/gist_id}", "starred_url": "https://api.github.com/users/mscheltienne/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mscheltienne/subscriptions", "organizations_url": "https://api.github.com/users/mscheltienne/orgs", "repos_url": "https://api.github.com/users/mscheltienne/repos", "events_url": "https://api.github.com/users/mscheltienne/events{/privacy}", "received_events_url": "https://api.github.com/users/mscheltienne/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2021-12-06T17:27:47Z", "updated_at": "2021-12-08T00:26:24Z", "closed_at": "2021-12-08T00:26:24Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "I have set up a new venv on a different windows laptop for MNE and I wanted to move from Python 3.8.10 to 3.9.9. \r\nWhen doing `py -m pip install -r requirements.txt`, the installation fails because there are no wheels on Pypi for `vtk<=9.0.1` for windows/Python 3.9.\r\nI installed version 9.1.0 instead; and for now, at least, I didn't notice any issues with MNE. I couldn't run yet the test suite as my battery died.. but if you have some tests in mind to make sure version 9.1.0 works fine; I can run them tomorrow. \r\n\r\nMaybe the requirement `vtk<=9.0.1; platform_system == \"Windows\"` is outdated?\r\n", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/10099/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10099/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/10094", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10094/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10094/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10094/events", "html_url": "https://github.com/mne-tools/mne-python/issues/10094", "id": 1072215227, "node_id": "I_kwDOABPcUM4_6LS7", "number": 10094, "title": "Raw.save logs too many `\"Overwriting existing file.\"` infos", "user": {"login": "sappelhoff", "id": 9084751, "node_id": "MDQ6VXNlcjkwODQ3NTE=", "avatar_url": "https://avatars.githubusercontent.com/u/9084751?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sappelhoff", "html_url": "https://github.com/sappelhoff", "followers_url": "https://api.github.com/users/sappelhoff/followers", "following_url": "https://api.github.com/users/sappelhoff/following{/other_user}", "gists_url": "https://api.github.com/users/sappelhoff/gists{/gist_id}", "starred_url": "https://api.github.com/users/sappelhoff/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sappelhoff/subscriptions", "organizations_url": "https://api.github.com/users/sappelhoff/orgs", "repos_url": "https://api.github.com/users/sappelhoff/repos", "events_url": "https://api.github.com/users/sappelhoff/events{/privacy}", "received_events_url": "https://api.github.com/users/sappelhoff/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "hoechenberger", "id": 2046265, "node_id": "MDQ6VXNlcjIwNDYyNjU=", "avatar_url": "https://avatars.githubusercontent.com/u/2046265?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hoechenberger", "html_url": "https://github.com/hoechenberger", "followers_url": "https://api.github.com/users/hoechenberger/followers", "following_url": "https://api.github.com/users/hoechenberger/following{/other_user}", "gists_url": "https://api.github.com/users/hoechenberger/gists{/gist_id}", "starred_url": "https://api.github.com/users/hoechenberger/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hoechenberger/subscriptions", "organizations_url": "https://api.github.com/users/hoechenberger/orgs", "repos_url": "https://api.github.com/users/hoechenberger/repos", "events_url": "https://api.github.com/users/hoechenberger/events{/privacy}", "received_events_url": "https://api.github.com/users/hoechenberger/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "hoechenberger", "id": 2046265, "node_id": "MDQ6VXNlcjIwNDYyNjU=", "avatar_url": "https://avatars.githubusercontent.com/u/2046265?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hoechenberger", "html_url": "https://github.com/hoechenberger", "followers_url": "https://api.github.com/users/hoechenberger/followers", "following_url": "https://api.github.com/users/hoechenberger/following{/other_user}", "gists_url": "https://api.github.com/users/hoechenberger/gists{/gist_id}", "starred_url": "https://api.github.com/users/hoechenberger/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hoechenberger/subscriptions", "organizations_url": "https://api.github.com/users/hoechenberger/orgs", "repos_url": "https://api.github.com/users/hoechenberger/repos", "events_url": "https://api.github.com/users/hoechenberger/events{/privacy}", "received_events_url": "https://api.github.com/users/hoechenberger/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 1, "created_at": "2021-12-06T14:26:31Z", "updated_at": "2021-12-06T17:54:52Z", "closed_at": "2021-12-06T17:54:52Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "MWE: \r\n\r\n```python\r\n# %%\r\nimport os\r\nfrom pathlib import Path\r\nimport mne\r\nimport numpy as np\r\n\r\n\r\nsample_dir = Path(mne.datasets.sample.data_path())\r\nsample_fname = sample_dir / 'MEG' / 'sample' / 'sample_audvis_raw.fif'\r\nraw = mne.io.read_raw_fif(sample_fname, preload=True)\r\n\r\nfname = Path(os.path.expanduser(\"~\")) / \"Desktop\" / \"try-raw.fif.gz\"\r\nraw.save(fname)\r\nraw.save(fname, overwrite=True)\r\n\r\n```\r\n\r\nOutput after second `.save` call:\r\n\r\n```\r\nOverwriting existing file.\r\nOverwriting existing file.\r\nOverwriting existing file.\r\nWriting /home/stefanappelhoff/Desktop/try-raw.fif.gz\r\nClosing /home/stefanappelhoff/Desktop/try-raw.fif.gz\r\n[done]\r\n```\r\n\r\nThese are two `Overwriting existing file.` too many, aren't they?", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/10094/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10094/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/10092", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10092/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10092/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10092/events", "html_url": "https://github.com/mne-tools/mne-python/issues/10092", "id": 1072067740, "node_id": "I_kwDOABPcUM4_5nSc", "number": 10092, "title": "Unable to manually set EOG channels when reading BTI data", "user": {"login": "adswa", "id": 29738718, "node_id": "MDQ6VXNlcjI5NzM4NzE4", "avatar_url": "https://avatars.githubusercontent.com/u/29738718?v=4", "gravatar_id": "", "url": "https://api.github.com/users/adswa", "html_url": "https://github.com/adswa", "followers_url": "https://api.github.com/users/adswa/followers", "following_url": "https://api.github.com/users/adswa/following{/other_user}", "gists_url": "https://api.github.com/users/adswa/gists{/gist_id}", "starred_url": "https://api.github.com/users/adswa/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/adswa/subscriptions", "organizations_url": "https://api.github.com/users/adswa/orgs", "repos_url": "https://api.github.com/users/adswa/repos", "events_url": "https://api.github.com/users/adswa/events{/privacy}", "received_events_url": "https://api.github.com/users/adswa/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2021-12-06T12:00:07Z", "updated_at": "2021-12-06T18:42:04Z", "closed_at": "2021-12-06T18:42:04Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "#### Describe the bug\r\n\r\n[``mne.io.read_raw_bti.html``](https://mne.tools/stable/generated/mne.io.read_raw_bti.html) has an ``eog_ch`` parameter that can be used to set the 4D names of the EOG channels. I think that this parameter doesn't actually do anything. In my usecase, channels I deliberately wanted to set as ``EOG`` kept being read in as ``ECG`` channels. Likewise, setting the parameter ``ecg_ch`` to ``None`` did not result in no ECG channels being recognized, but that may be more of a documentation misunderstanding and byproduct of the described bug than an actual problem.\r\n\r\n\r\nIn my personal use case, I have some legacy BTI/4D data. I was told that this data does not contain an ECG channel, but four EOG channels named RVEOGo-1, RHEOG-1, RVEOGu-1, and LHEOG-1. ``read_raw_bti`` with various parametrization would consistently label those channels as ``ECG`` instead of ``EOG``:\r\n\r\n```py\r\n>>> raw = mne.io.read_raw_bti(pdf_fname, config, hs_file, convert=False,\r\n                              rename_channels=False, ecg_ch=None, \r\n                              eog_ch=('RVEOGo-1', 'RHEOG-1', 'RVEOGu-1', 'LHEOG-1'))\r\n>>> raw.info\r\n<Info | 9 non-empty values\r\n bads: []\r\n ch_names: A1, A2, A3, A4, A5, A6, A7, A8, A9, A10, A11, A12, A13, A14, ...\r\n chs: 248 Magnetometers, 2 Stimulus, 23 Reference Magnetometers, 1 misc, 4 ECG\r\n custom_ref_applied: False\r\n dev_ctf_t: CTF MEG device -> CTF/4D/KIT head transform\r\n dig: 3 items (3 Cardinal)\r\n highpass: 0.0 Hz\r\n lowpass: 508.6 Hz\r\n meas_date: 2014-04-14 06:40:13 UTC\r\n nchan: 278\r\n projs: []\r\n sfreq: 1017.2 Hz\r\n>>> raw.info['chs'][-4:]\r\n[{'loc': array([0., 0., 0., 1., 0., 0., 0., 1., 0., 0., 0., 1.], dtype=float32),\r\n  'ch_name': 'RVEOGo-1',\r\n  'unit_mul': 0 (FIFF_UNITM_NONE),\r\n  'coord_frame': 0 (FIFFV_COORD_UNKNOWN),\r\n  'coil_type': 0 (FIFFV_COIL_NONE),\r\n  'range': 1.0,\r\n  'unit': 107 (FIFF_UNIT_V),\r\n  'cal': 1.0,\r\n  'scanno': 275,\r\n  'kind': 402 (FIFFV_ECG_CH),\r\n  'logno': 385},\r\n {'loc': array([0., 0., 0., 1., 0., 0., 0., 1., 0., 0., 0., 1.], dtype=float32),\r\n  'ch_name': 'RHEOG-1',\r\n  'unit_mul': 0 (FIFF_UNITM_NONE),\r\n  'coord_frame': 0 (FIFFV_COORD_UNKNOWN),\r\n  'coil_type': 0 (FIFFV_COIL_NONE),\r\n  'range': 1.0,\r\n  'unit': 107 (FIFF_UNIT_V),\r\n  'cal': 1.0,\r\n  'scanno': 276,\r\n  'kind': 402 (FIFFV_ECG_CH),\r\n  'logno': 386},\r\n {'loc': array([0., 0., 0., 1., 0., 0., 0., 1., 0., 0., 0., 1.], dtype=float32),\r\n  'ch_name': 'RVEOGu-1',\r\n  'unit_mul': 0 (FIFF_UNITM_NONE),\r\n  'coord_frame': 0 (FIFFV_COORD_UNKNOWN),\r\n  'coil_type': 0 (FIFFV_COIL_NONE),\r\n  'range': 1.0,\r\n  'unit': 107 (FIFF_UNIT_V),\r\n  'cal': 1.0,\r\n  'scanno': 277,\r\n  'kind': 402 (FIFFV_ECG_CH),\r\n  'logno': 387},\r\n {'loc': array([0., 0., 0., 1., 0., 0., 0., 1., 0., 0., 0., 1.], dtype=float32),\r\n  'ch_name': 'LHEOG-1',\r\n  'unit_mul': 0 (FIFF_UNITM_NONE),\r\n  'coord_frame': 0 (FIFFV_COORD_UNKNOWN),\r\n  'coil_type': 0 (FIFFV_COIL_NONE),\r\n  'range': 1.0,\r\n  'unit': 107 (FIFF_UNIT_V),\r\n  'cal': 1.0,\r\n  'scanno': 278,\r\n  'kind': 402 (FIFFV_ECG_CH),\r\n  'logno': 388}]\r\n```\r\n\r\n#### Steps to reproduce\r\n\r\nIt reproduces on [mne testing data](https://github.com/mne-tools/mne-testing-data), were I to set the ``MISC`` channels starting with an X (``X65``, ``X67``, ``X69``, ``X66``, ``X68``) to be EOG channels:\r\n\r\n```py\r\n>>> raw = mne.io.read_raw_bti('BTi/4Dsim/c,rfDC', 'BTi/4Dsim/config', 'BTi/4Dsim/hs_file', convert=False, \r\n                              rename_channels=False, eog_ch=('X65','X67''X69','X66', 'X68'))\r\nReading 4D PDF file /home/adina/repos/mne-testing-data/BTi/4Dsim/c,rfDC...\r\nCreating Neuromag info structure ...\r\n... Setting channel info structure.\r\n... Reading digitization points from BTi/4Dsim/hs_file\r\nCurrently direct inclusion of 4D weight tables is not supported. For critical use cases please take into account the MNE command \"mne_create_comp_data\" to include weights as printed out by the 4D \"print_table\" routine.\r\n\r\n>>> raw.info\r\n<Info | 9 non-empty values\r\n bads: []\r\n ch_names: A1, A2, A3, A4, A5, A6, A7, A8, A9, A10, A11, A12, A13, A14, ...\r\n chs: 248 Magnetometers, 2 Stimulus, 23 Reference Magnetometers, 6 misc\r\n custom_ref_applied: False\r\n dev_ctf_t: CTF MEG device -> CTF/4D/KIT head transform\r\n dig: 1125 items (3 Cardinal, 1122 Extra)\r\n highpass: 0.0 Hz\r\n lowpass: 508.9 Hz\r\n meas_date: 2019-03-14 13:20:14 UTC\r\n nchan: 279\r\n projs: []\r\n sfreq: 1017.8 Hz\r\n>\r\n```\r\n\r\n#### potential fix\r\n\r\nThe following patch fixes it for me:\r\n\r\n```diff\r\ndiff --git a/mne/io/bti/bti.py b/mne/io/bti/bti.py\r\nindex 6c90a0f72..2a1f261e3 100644\r\n--- a/mne/io/bti/bti.py\r\n+++ b/mne/io/bti/bti.py\r\n@@ -1194,7 +1194,7 @@ def _get_bti_info(pdf_fname, config_fname, head_shape_fname, rotation_x,\r\n             chan_info['kind'] = FIFF.FIFFV_STIM_CH\r\n         elif chan_4d == 'TRIGGER':\r\n             chan_info['kind'] = FIFF.FIFFV_STIM_CH\r\n-        elif chan_4d.startswith('EOG'):\r\n+        elif chan_4d.startswith('EOG') or chan_4d in eog_ch:\r\n             chan_info['kind'] = FIFF.FIFFV_EOG_CH\r\n         elif chan_4d == ecg_ch:\r\n             chan_info['kind'] = FIFF.FIFFV_ECG_CH\r\n```\r\n\r\n<details><summary>output with the patch applied </summary>\r\n\r\n```py\r\n>>> raw = mne.io.read_raw_bti('BTi/4Dsim/c,rfDC', 'BTi/4Dsim/config', 'BTi/4Dsim/hs_file', convert=False,\r\n                               rename_channels=False, eog_ch=('X65','X67','X69','X66', 'X68'))\r\nReading 4D PDF file /home/adina/repos/mne-testing-data/BTi/4Dsim/c,rfDC...\r\nCreating Neuromag info structure ...\r\n... Setting channel info structure.\r\n... Reading digitization points from BTi/4Dsim/hs_file\r\nCurrently direct inclusion of 4D weight tables is not supported. For critical use cases please take into account the MNE command \"mne_create_comp_data\" to include weights as printed out by the 4D \"print_table\" routine.\r\n\r\n>>> raw.info\r\n<Info | 9 non-empty values\r\n bads: []\r\n ch_names: A1, A2, A3, A4, A5, A6, A7, A8, A9, A10, A11, A12, A13, A14, ...\r\n chs: 248 Magnetometers, 2 Stimulus, 23 Reference Magnetometers, 1 misc, 5 EOG\r\n custom_ref_applied: False\r\n dev_ctf_t: CTF MEG device -> CTF/4D/KIT head transform\r\n dig: 1125 items (3 Cardinal, 1122 Extra)\r\n highpass: 0.0 Hz\r\n lowpass: 508.9 Hz\r\n meas_date: 2019-03-14 13:20:14 UTC\r\n nchan: 279\r\n projs: []\r\n sfreq: 1017.8 Hz\r\n>\r\n\r\n```\r\n</details>\r\n\r\nbut I'm not sure if there isn't more to it, for example whether or not ``ecg_ch=None`` should prevent the channels from being labeled as ``ECG``.\r\n\r\nI ran this code with the ``0.24.1`` release and today's ``main``.", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/10092/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10092/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/10083", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10083/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10083/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10083/events", "html_url": "https://github.com/mne-tools/mne-python/issues/10083", "id": 1070528857, "node_id": "I_kwDOABPcUM4_zvlZ", "number": 10083, "title": "Vertical placement of channel traces seems off in raw butterfly plot", "user": {"login": "hoechenberger", "id": 2046265, "node_id": "MDQ6VXNlcjIwNDYyNjU=", "avatar_url": "https://avatars.githubusercontent.com/u/2046265?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hoechenberger", "html_url": "https://github.com/hoechenberger", "followers_url": "https://api.github.com/users/hoechenberger/followers", "following_url": "https://api.github.com/users/hoechenberger/following{/other_user}", "gists_url": "https://api.github.com/users/hoechenberger/gists{/gist_id}", "starred_url": "https://api.github.com/users/hoechenberger/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hoechenberger/subscriptions", "organizations_url": "https://api.github.com/users/hoechenberger/orgs", "repos_url": "https://api.github.com/users/hoechenberger/repos", "events_url": "https://api.github.com/users/hoechenberger/events{/privacy}", "received_events_url": "https://api.github.com/users/hoechenberger/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}, {"id": 1290799321, "node_id": "MDU6TGFiZWwxMjkwNzk5MzIx", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/VIZ", "name": "VIZ", "color": "22e861", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2021-12-03T12:13:05Z", "updated_at": "2021-12-03T22:02:23Z", "closed_at": "2021-12-03T22:02:23Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "MWE:\r\n```python\r\n# %%\r\nfrom pathlib import Path\r\nimport mne\r\nimport numpy as np\r\n\r\n\r\nsample_dir = Path(mne.datasets.sample.data_path())\r\nsample_fname = sample_dir / 'MEG' / 'sample' / 'sample_audvis_raw.fif'\r\nraw = mne.io.read_raw_fif(sample_fname, preload=True)\r\n\r\n# %%\r\n\r\nfig = (\r\n    raw.copy()\r\n       .pick_types(eeg=True, eog=True, stim=True)\r\n       .plot(butterfly=True, show_scrollbars=False, start=0,\r\n             duration=1, show=False)\r\n)\r\n```\r\n![output](https://user-images.githubusercontent.com/2046265/144600353-1897e818-d2a0-430e-b8ed-5b84dd8fa5de.png)\r\n\r\nIt appears as if the stim channel has a lot of signals, and the EOG channel were flat.\r\n\r\nHowever, the following code reveals that this ain't so:\r\n```python\r\n# %%\r\nfig = (\r\n    raw.copy()\r\n       .pick_types(stim=True)\r\n       .plot(butterfly=True, show_scrollbars=False, start=0,\r\n             duration=1, show=False)\r\n)\r\n```\r\n![output](https://user-images.githubusercontent.com/2046265/144600515-3ed5fb7e-329e-498f-99ad-14c0cd0dc0b3.png)\r\n\r\n\r\n\r\n```python\r\n# %%\r\nfig = (\r\n    raw.copy()\r\n       .pick_types(eog=True)\r\n       .plot(butterfly=True, show_scrollbars=False, start=0,\r\n             duration=1, show=False)\r\n)\r\n```\r\n![output](https://user-images.githubusercontent.com/2046265/144600552-aad4aa96-2fe2-46ad-a8cf-11b06d5325bc.png)\r\n\r\n\r\ncc @drammock ", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/10083/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10083/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/10079", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10079/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10079/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10079/events", "html_url": "https://github.com/mne-tools/mne-python/issues/10079", "id": 1070405511, "node_id": "I_kwDOABPcUM4_zReH", "number": 10079, "title": "CSP.fit() requires y to work, however the parameter is optional in fit_transform()", "user": {"login": "hoechenberger", "id": 2046265, "node_id": "MDQ6VXNlcjIwNDYyNjU=", "avatar_url": "https://avatars.githubusercontent.com/u/2046265?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hoechenberger", "html_url": "https://github.com/hoechenberger", "followers_url": "https://api.github.com/users/hoechenberger/followers", "following_url": "https://api.github.com/users/hoechenberger/following{/other_user}", "gists_url": "https://api.github.com/users/hoechenberger/gists{/gist_id}", "starred_url": "https://api.github.com/users/hoechenberger/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hoechenberger/subscriptions", "organizations_url": "https://api.github.com/users/hoechenberger/orgs", "repos_url": "https://api.github.com/users/hoechenberger/repos", "events_url": "https://api.github.com/users/hoechenberger/events{/privacy}", "received_events_url": "https://api.github.com/users/hoechenberger/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "hoechenberger", "id": 2046265, "node_id": "MDQ6VXNlcjIwNDYyNjU=", "avatar_url": "https://avatars.githubusercontent.com/u/2046265?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hoechenberger", "html_url": "https://github.com/hoechenberger", "followers_url": "https://api.github.com/users/hoechenberger/followers", "following_url": "https://api.github.com/users/hoechenberger/following{/other_user}", "gists_url": "https://api.github.com/users/hoechenberger/gists{/gist_id}", "starred_url": "https://api.github.com/users/hoechenberger/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hoechenberger/subscriptions", "organizations_url": "https://api.github.com/users/hoechenberger/orgs", "repos_url": "https://api.github.com/users/hoechenberger/repos", "events_url": "https://api.github.com/users/hoechenberger/events{/privacy}", "received_events_url": "https://api.github.com/users/hoechenberger/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "hoechenberger", "id": 2046265, "node_id": "MDQ6VXNlcjIwNDYyNjU=", "avatar_url": "https://avatars.githubusercontent.com/u/2046265?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hoechenberger", "html_url": "https://github.com/hoechenberger", "followers_url": "https://api.github.com/users/hoechenberger/followers", "following_url": "https://api.github.com/users/hoechenberger/following{/other_user}", "gists_url": "https://api.github.com/users/hoechenberger/gists{/gist_id}", "starred_url": "https://api.github.com/users/hoechenberger/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hoechenberger/subscriptions", "organizations_url": "https://api.github.com/users/hoechenberger/orgs", "repos_url": "https://api.github.com/users/hoechenberger/repos", "events_url": "https://api.github.com/users/hoechenberger/events{/privacy}", "received_events_url": "https://api.github.com/users/hoechenberger/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/mne-tools/mne-python/milestones/21", "html_url": "https://github.com/mne-tools/mne-python/milestone/21", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/milestones/21/labels", "id": 7253492, "node_id": "MI_kwDOABPcUM4Abq30", "number": 21, "title": "1.0", "description": "", "creator": {"login": "larsoner", "id": 2365790, "node_id": "MDQ6VXNlcjIzNjU3OTA=", "avatar_url": "https://avatars.githubusercontent.com/u/2365790?v=4", "gravatar_id": "", "url": "https://api.github.com/users/larsoner", "html_url": "https://github.com/larsoner", "followers_url": "https://api.github.com/users/larsoner/followers", "following_url": "https://api.github.com/users/larsoner/following{/other_user}", "gists_url": "https://api.github.com/users/larsoner/gists{/gist_id}", "starred_url": "https://api.github.com/users/larsoner/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/larsoner/subscriptions", "organizations_url": "https://api.github.com/users/larsoner/orgs", "repos_url": "https://api.github.com/users/larsoner/repos", "events_url": "https://api.github.com/users/larsoner/events{/privacy}", "received_events_url": "https://api.github.com/users/larsoner/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 83, "state": "closed", "created_at": "2021-10-14T16:40:49Z", "updated_at": "2022-05-03T11:29:23Z", "due_on": "2022-02-25T08:00:00Z", "closed_at": "2022-05-03T11:29:23Z"}, "comments": 2, "created_at": "2021-12-03T09:47:28Z", "updated_at": "2021-12-03T17:29:41Z", "closed_at": "2021-12-03T17:29:41Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "Reported on the forum:\r\n\r\nhttps://mne.discourse.group/t/can-not-do-csp-fit-transform-without-label/4072\r\n\r\nCalling `CSP.fit_transform()` without `y` (which is alright according to the API, which defaults `y=None`) yields the following exception:\r\n\r\n```python\r\nTraceback (most recent call last):\r\n  File \"<input>\", line 1, in <module>\r\n  File \"/Users/long/anaconda/envs/3.6/lib/python3.6/site-packages/mne/decoding/mixin.py\", line 30, in fit_transform\r\n    return self.fit(X, **fit_params).transform(X)\r\nTypeError: fit() missing 1 required positional argument: 'y'\r\n```\r\n\r\nThis is because the `fit_transform()` method inherited from `TransformerMixin` is not compatible with the `fit` method implemented in `CSP`.\r\n\r\nSolution is to give `CSP` its very own `fit_transform` method that doesn't make `y` an optional parameter.", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/10079/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10079/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/10073", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10073/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10073/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10073/events", "html_url": "https://github.com/mne-tools/mne-python/pull/10073", "id": 1069447423, "node_id": "PR_kwDOABPcUM4vTXxg", "number": 10073, "title": "MRG: Fix permutation_cluster_1samp_test for 2D data when using TFCE", "user": {"login": "hoechenberger", "id": 2046265, "node_id": "MDQ6VXNlcjIwNDYyNjU=", "avatar_url": "https://avatars.githubusercontent.com/u/2046265?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hoechenberger", "html_url": "https://github.com/hoechenberger", "followers_url": "https://api.github.com/users/hoechenberger/followers", "following_url": "https://api.github.com/users/hoechenberger/following{/other_user}", "gists_url": "https://api.github.com/users/hoechenberger/gists{/gist_id}", "starred_url": "https://api.github.com/users/hoechenberger/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hoechenberger/subscriptions", "organizations_url": "https://api.github.com/users/hoechenberger/orgs", "repos_url": "https://api.github.com/users/hoechenberger/repos", "events_url": "https://api.github.com/users/hoechenberger/events{/privacy}", "received_events_url": "https://api.github.com/users/hoechenberger/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2021-12-02T11:38:34Z", "updated_at": "2021-12-03T06:47:36Z", "closed_at": "2021-12-03T05:13:31Z", "author_association": "MEMBER", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/mne-tools/mne-python/pulls/10073", "html_url": "https://github.com/mne-tools/mne-python/pull/10073", "diff_url": "https://github.com/mne-tools/mne-python/pull/10073.diff", "patch_url": "https://github.com/mne-tools/mne-python/pull/10073.patch", "merged_at": "2021-12-03T05:13:31Z"}, "body": "Please see the added test case for a 2D NumPy array. This fails on `main` with:\n\n```python\n-> 1205     return _permutation_cluster_test(\n   1206         X=[X], threshold=threshold, n_permutations=n_permutations, tail=tail,\n   1207         stat_fun=stat_fun, adjacency=adjacency, n_jobs=n_jobs, seed=seed,\n\n~/Development/mne-python/mne/stats/cluster_level.py in _permutation_cluster_test(X, threshold, n_permutations, tail, stat_fun, adjacency, n_jobs, seed, max_step, exclude, step_down_p, t_power, out_type, check_disjoint, buffer_size)\n    929         # ndimage outputs slices or boolean masks by default\n    930         if out_type == 'indices':\n--> 931             clusters = _cluster_mask_to_indices(clusters, t_obs.shape)\n    932 \n    933     # convert our seed to orders\n\n~/Development/mne-python/mne/stats/cluster_level.py in _cluster_mask_to_indices(components, shape)\n    564             components[ci] = np.where(c.reshape(shape))\n    565         else:\n--> 566             assert isinstance(c, tuple), type(c)\n    567             c = list(c)  # tuple->list\n    568             for ii, cc in enumerate(c):\n\nAssertionError: <class 'slice'>\n```\n\nWas reported by @shirllim", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/10073/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10073/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/10070", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10070/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10070/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10070/events", "html_url": "https://github.com/mne-tools/mne-python/issues/10070", "id": 1069242636, "node_id": "I_kwDOABPcUM4_u1kM", "number": 10070, "title": "BUG?: SURE fails to find any dipoles", "user": {"login": "larsoner", "id": 2365790, "node_id": "MDQ6VXNlcjIzNjU3OTA=", "avatar_url": "https://avatars.githubusercontent.com/u/2365790?v=4", "gravatar_id": "", "url": "https://api.github.com/users/larsoner", "html_url": "https://github.com/larsoner", "followers_url": "https://api.github.com/users/larsoner/followers", "following_url": "https://api.github.com/users/larsoner/following{/other_user}", "gists_url": "https://api.github.com/users/larsoner/gists{/gist_id}", "starred_url": "https://api.github.com/users/larsoner/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/larsoner/subscriptions", "organizations_url": "https://api.github.com/users/larsoner/orgs", "repos_url": "https://api.github.com/users/larsoner/repos", "events_url": "https://api.github.com/users/larsoner/events{/privacy}", "received_events_url": "https://api.github.com/users/larsoner/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 8, "created_at": "2021-12-02T08:04:05Z", "updated_at": "2021-12-03T17:53:06Z", "closed_at": "2021-12-03T17:53:06Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "Take mixed_norm_inverse.py and change `meg-eeg-fwd.fif` to `meg-fwd.fif` so that only MEG channels are used, and SURE does not find any dipoles because it selects an alpha that is too large (100; meg-eeg-fwd.fif selects 84). Not sure if this is by design, but it seems like a bug...?\r\n\r\nSame problem occurs if you leave it as `meg-eeg-fwd.fif` but `evoked.decimate(2)`, which should be fine given that the data are sampled at 600 Hz and low-passed at 40 Hz already.", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/10070/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10070/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/10060", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10060/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10060/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10060/events", "html_url": "https://github.com/mne-tools/mne-python/issues/10060", "id": 1067260278, "node_id": "I_kwDOABPcUM4_nRl2", "number": 10060, "title": "inconsistent behavior: `annotate_*` funcs return annotations with different `orig_time` (`None`, or set)", "user": {"login": "sappelhoff", "id": 9084751, "node_id": "MDQ6VXNlcjkwODQ3NTE=", "avatar_url": "https://avatars.githubusercontent.com/u/9084751?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sappelhoff", "html_url": "https://github.com/sappelhoff", "followers_url": "https://api.github.com/users/sappelhoff/followers", "following_url": "https://api.github.com/users/sappelhoff/following{/other_user}", "gists_url": "https://api.github.com/users/sappelhoff/gists{/gist_id}", "starred_url": "https://api.github.com/users/sappelhoff/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sappelhoff/subscriptions", "organizations_url": "https://api.github.com/users/sappelhoff/orgs", "repos_url": "https://api.github.com/users/sappelhoff/repos", "events_url": "https://api.github.com/users/sappelhoff/events{/privacy}", "received_events_url": "https://api.github.com/users/sappelhoff/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2021-11-30T13:49:42Z", "updated_at": "2021-12-08T22:03:48Z", "closed_at": "2021-12-08T22:03:48Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "`annotate_flat` returns annotations with a proper `orig_time` inherited from `raw`, whereas `annotate_muscle_zscore` returns annotations w ith `orig_time = None`.\r\n\r\nIn my pipeline I run both functions and then want to \"join\" both annotation objects like so `annots_bad = annots_flat + annots_muscle` to then later set `raw.set_annotations(annots_bad)`. However, with the current setup, this makes me run into an error:\r\n\r\n> ValueError: orig_time should be the same to add/concatenate 2 annotations (got None != 1912-06-22 14:01:10.497486+00:00)\r\n\r\nWould the correct fix be to set `annots_flat.orig_time = None` to then enable concatenation? And should we do that in MNE-Python directly, rather than have users do it themselves?\r\n\r\n(EDIT: also, I can't set the orig_time directly. It leads to \"AttributeError: can't set attribute\")\r\n\r\nhttps://github.com/mne-tools/mne-python/blob/6e60792e4f0bffdd66a9fc1fb85c0c45ed802d78/mne/preprocessing/flat.py#L103-L105\r\n\r\nhttps://github.com/mne-tools/mne-python/blob/6e60792e4f0bffdd66a9fc1fb85c0c45ed802d78/mne/preprocessing/artifact_detection.py#L118-L120", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/10060/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10060/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/10059", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10059/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10059/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10059/events", "html_url": "https://github.com/mne-tools/mne-python/issues/10059", "id": 1067131390, "node_id": "I_kwDOABPcUM4_myH-", "number": 10059, "title": "plotting: \"bad_color\": matplotlib vs pyqtgraph --> a doc issue or a bug?", "user": {"login": "sappelhoff", "id": 9084751, "node_id": "MDQ6VXNlcjkwODQ3NTE=", "avatar_url": "https://avatars.githubusercontent.com/u/9084751?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sappelhoff", "html_url": "https://github.com/sappelhoff", "followers_url": "https://api.github.com/users/sappelhoff/followers", "following_url": "https://api.github.com/users/sappelhoff/following{/other_user}", "gists_url": "https://api.github.com/users/sappelhoff/gists{/gist_id}", "starred_url": "https://api.github.com/users/sappelhoff/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sappelhoff/subscriptions", "organizations_url": "https://api.github.com/users/sappelhoff/orgs", "repos_url": "https://api.github.com/users/sappelhoff/repos", "events_url": "https://api.github.com/users/sappelhoff/events{/privacy}", "received_events_url": "https://api.github.com/users/sappelhoff/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 40091538, "node_id": "MDU6TGFiZWw0MDA5MTUzOA==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/DOC", "name": "DOC", "color": "009800", "default": false, "description": null}, {"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2021-11-30T11:38:28Z", "updated_at": "2021-11-30T22:41:59Z", "closed_at": "2021-11-30T22:41:59Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "When plotting raw data with the `matplotlib` backend, I can specify the `bad_color` parameter of `raw.plot()` using a tuple like `(1, 0, 0)` (bads are marked in red) ... specifying a tuple like `(255, 0, 0)` results in a ValueError:\r\n\r\n> ValueError: RGBA values should be within 0-1 range\r\n\r\nHowever, when plotting the same data with the `pyqtgraph` backend, it's (almost) the other way around: `(255, 0 ,0)` works, but `(1, 0, 0)` doesn't, which probably has to do with the fact that mne-qt-browser uses [pyqtgraph.mkColor](https://pyqtgraph.readthedocs.io/en/latest/functions.html#pyqtgraph.mkColor) which interprets `(1, 0, 0)` as an (practically) invisible line (mkColor is expecting vals in the range 0-255, not 0-1).\r\n\r\nI think we could make our lives easy by doing a check of what users pass into `bad_color`, and by documenting that parameter better (i.e., what kinds of \"colors\" are accepted).\r\n\r\nCurrently it says ([raw.plot docs](https://mne.tools/stable/generated/mne.io.Raw.html?highlight=raw%20plot#mne.io.Raw.plot)):\r\n\r\n```python\r\n\"\"\"\r\nbad_color : color object\r\n\r\n    Color to make bad channels.\r\n\"\"\"\r\n```\r\n\r\n\r\n\r\ncc @marsipu ", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/10059/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10059/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/10057", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10057/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10057/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10057/events", "html_url": "https://github.com/mne-tools/mne-python/issues/10057", "id": 1066717194, "node_id": "I_kwDOABPcUM4_lNAK", "number": 10057, "title": "BUG?: HTML files are big", "user": {"login": "larsoner", "id": 2365790, "node_id": "MDQ6VXNlcjIzNjU3OTA=", "avatar_url": "https://avatars.githubusercontent.com/u/2365790?v=4", "gravatar_id": "", "url": "https://api.github.com/users/larsoner", "html_url": "https://github.com/larsoner", "followers_url": "https://api.github.com/users/larsoner/followers", "following_url": "https://api.github.com/users/larsoner/following{/other_user}", "gists_url": "https://api.github.com/users/larsoner/gists{/gist_id}", "starred_url": "https://api.github.com/users/larsoner/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/larsoner/subscriptions", "organizations_url": "https://api.github.com/users/larsoner/orgs", "repos_url": "https://api.github.com/users/larsoner/repos", "events_url": "https://api.github.com/users/larsoner/events{/privacy}", "received_events_url": "https://api.github.com/users/larsoner/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2021-11-30T02:36:28Z", "updated_at": "2022-01-10T17:03:45Z", "closed_at": "2021-11-30T14:26:16Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "Waiting for CircleCI to upload artifacts, I noticed:\r\n```\r\nUploading /home/circleci/project/doc/_build/html/generated/mne.chpi.head_pos_to_trans_rot_t.html (107 kB): \r\n```\r\nlocally, it looks like ~80 kB is in a `<ul>` with ~3k lines of the form:\r\n```\r\n   <li class=\"toctree-l2\">\r\n    <a class=\"reference internal\" href=\"mne.io.anonymize_info.html\">\r\n     mne.io.anonymize_info\r\n    </a>\r\n   </li>\r\n```\r\nLooks like this is really the full left column of collapsible API pages.\r\n\r\n@drammock have you thought about how this could be optimized at the pydata-sphinx-theme end? We have ~500 of these docs so we are talking about something like 50MB of redundancy in content around these pages, all of which is identical except for which are collapsed/shown (which is maybe easy to take care of in JavaScript?). Maybe it's not worth worrying about, in which case feel free to close.", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/10057/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10057/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/10055", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10055/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10055/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10055/events", "html_url": "https://github.com/mne-tools/mne-python/issues/10055", "id": 1066103163, "node_id": "I_kwDOABPcUM4_i3F7", "number": 10055, "title": "Creating epochs is dropping regardless of rejection/flat setting to None", "user": {"login": "mscheltienne", "id": 73893616, "node_id": "MDQ6VXNlcjczODkzNjE2", "avatar_url": "https://avatars.githubusercontent.com/u/73893616?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mscheltienne", "html_url": "https://github.com/mscheltienne", "followers_url": "https://api.github.com/users/mscheltienne/followers", "following_url": "https://api.github.com/users/mscheltienne/following{/other_user}", "gists_url": "https://api.github.com/users/mscheltienne/gists{/gist_id}", "starred_url": "https://api.github.com/users/mscheltienne/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mscheltienne/subscriptions", "organizations_url": "https://api.github.com/users/mscheltienne/orgs", "repos_url": "https://api.github.com/users/mscheltienne/repos", "events_url": "https://api.github.com/users/mscheltienne/events{/privacy}", "received_events_url": "https://api.github.com/users/mscheltienne/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2021-11-29T14:25:25Z", "updated_at": "2021-11-29T15:22:21Z", "closed_at": "2021-11-29T15:22:21Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "A bit of an odd case here, I don't know if it's a bug or intended and badly explained, but when working on a dataset and creating 4 equal epochs manually (should have used make_fix_length_epochs), 3 epochs out of 4 were dropped.\r\nWhen replicating with the sample dataset, all 4 are dropped, and I don't get why.\r\n\r\n```\r\nimport math\r\nfrom pathlib import Path\r\n\r\nimport mne\r\nimport numpy as np\r\n\r\nmne.set_log_level('DEBUG')\r\n\r\n\r\ndirectory = Path(mne.datasets.sample.data_path()) / 'MEG' / 'sample'\r\nfname = directory / 'sample_audvis_filt-0-40_raw.fif'\r\n\r\n# load and crop Raw\r\nraw = mne.io.read_raw_fif(fname, preload=True)\r\nraw.pick_types(eeg=True)\r\nraw.del_proj('all')\r\nraw.crop(10, 25.98)  # shape (59, 2400)\r\n\r\n# create Epochs\r\nevents = np.zeros((4, 3))\r\nfor k in range(4):\r\n    events[k, 0] = math.floor(raw.info['sfreq'] * 4 * k)\r\nevents[:, -1] = 1\r\nevents = events.astype(np.int16)\r\n\r\nepochs = mne.Epochs(raw, events, event_id=1, tmin=0, tmax=3.99, baseline=None, \r\n                    picks='eeg', reject=None, flat=None, preload=True)\r\n```\r\n\r\nI'm getting this logging output:\r\n\r\n```\r\nLoading data for 4 events and 600 original time points ...\r\n    Getting epoch for -7952--7352\r\n    Getting epoch for -7352--6752\r\n    Getting epoch for -6751--6151\r\n    Getting epoch for -6151--5551\r\n4 bad epochs dropped\r\n```\r\n\r\nAny idea on what I overlooked before I start digging?", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/10055/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10055/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/10053", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10053/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10053/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10053/events", "html_url": "https://github.com/mne-tools/mne-python/issues/10053", "id": 1065632008, "node_id": "I_kwDOABPcUM4_hEEI", "number": 10053, "title": "Function \"read_raw_edf\"  have some channels which dosen't apear in version 0.23.0", "user": {"login": "0220220313", "id": 37287556, "node_id": "MDQ6VXNlcjM3Mjg3NTU2", "avatar_url": "https://avatars.githubusercontent.com/u/37287556?v=4", "gravatar_id": "", "url": "https://api.github.com/users/0220220313", "html_url": "https://github.com/0220220313", "followers_url": "https://api.github.com/users/0220220313/followers", "following_url": "https://api.github.com/users/0220220313/following{/other_user}", "gists_url": "https://api.github.com/users/0220220313/gists{/gist_id}", "starred_url": "https://api.github.com/users/0220220313/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/0220220313/subscriptions", "organizations_url": "https://api.github.com/users/0220220313/orgs", "repos_url": "https://api.github.com/users/0220220313/repos", "events_url": "https://api.github.com/users/0220220313/events{/privacy}", "received_events_url": "https://api.github.com/users/0220220313/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 10, "created_at": "2021-11-29T05:38:26Z", "updated_at": "2021-11-30T19:40:05Z", "closed_at": "2021-11-30T19:40:05Z", "author_association": "NONE", "active_lock_reason": null, "body": "I used args \"exclude\"  to get the specific channel data before version 0.23.0.\r\nSince it's much faster than read all data and pick channel data.\r\nBut when I upgrade mne to 0.24.0 , it would have bug .\r\nThere have some channels that dosent apear in version 0.23.0.\r\nIt will appear this warning , and I cannot read them in raw edf data. \r\n\r\nRuntimeWarning: Channel names are not unique, found duplicates for: {'Impedance', 'Rate', 'Sum', 'Pressure', 'Fast', '(Imp)', 'Leg'}. Applying running numbers for duplicates.\r\n\r\n\r\nAnd this is my function  to get specific channel data in 0.23.0.\r\n\r\n\r\n```\r\ndef get_channel_name(edfname): ## Read  edf channel name\r\n    with open(edfname,'r') as f:\r\n        _ = f.read(96+120+36)\r\n        channel_num = int(f.read(4))\r\n        return  [f.read(16).strip() for i in range(channel_num )]\r\n\r\ndef get_channel_data(edfname,need_channels):\r\n    ch_names = get_channel_name(edfname)\r\n    exclude_channels = ['' if the_ch in need_channels else the_ch  for the_ch in ch_names ]\r\n    data = mne.io.read_raw_edf(edfname,exclude=channel_list,verbose=False)\r\n    return data.get_data() , data.info['sfreq'] , data.ch_names\r\n```\r\nFunction \"get_channel_name\" is copy from function \"_read_edf_header\" in version 0.23.0.\r\n", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/10053/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10053/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/10049", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10049/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10049/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10049/events", "html_url": "https://github.com/mne-tools/mne-python/issues/10049", "id": 1065375687, "node_id": "I_kwDOABPcUM4_gFfH", "number": 10049, "title": "ImportError: cannot import name '_check_pylsl_installed' from 'mne.utils'", "user": {"login": "Marou-c", "id": 95153631, "node_id": "U_kgDOBavt3w", "avatar_url": "https://avatars.githubusercontent.com/u/95153631?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Marou-c", "html_url": "https://github.com/Marou-c", "followers_url": "https://api.github.com/users/Marou-c/followers", "following_url": "https://api.github.com/users/Marou-c/following{/other_user}", "gists_url": "https://api.github.com/users/Marou-c/gists{/gist_id}", "starred_url": "https://api.github.com/users/Marou-c/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Marou-c/subscriptions", "organizations_url": "https://api.github.com/users/Marou-c/orgs", "repos_url": "https://api.github.com/users/Marou-c/repos", "events_url": "https://api.github.com/users/Marou-c/events{/privacy}", "received_events_url": "https://api.github.com/users/Marou-c/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2021-11-28T16:27:48Z", "updated_at": "2021-11-28T17:54:39Z", "closed_at": "2021-11-28T17:54:39Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi,\r\n\r\nI am trying to use mne real-rime and I get this error:\r\n_ImportError: cannot import name 'check_pylsl_installed' from 'mne.utils'\r\nIt is used in LSL_Client.py in https://github.com/mne-tools/mne-realtime/tree/main/mne_realtime\r\n\r\nI checked mne/utils repo on github and there is no such a file, so it is not an issue with a missing file in my environment.\r\n\r\nWas _check_pylsl_installed.py removed from mne/utils repo?\r\n\r\nThanks\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/10049/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10049/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/10046", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10046/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10046/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10046/events", "html_url": "https://github.com/mne-tools/mne-python/issues/10046", "id": 1064952136, "node_id": "I_kwDOABPcUM4_eeFI", "number": 10046, "title": "Add scrollbar to report tag dropdown menu", "user": {"login": "hoechenberger", "id": 2046265, "node_id": "MDQ6VXNlcjIwNDYyNjU=", "avatar_url": "https://avatars.githubusercontent.com/u/2046265?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hoechenberger", "html_url": "https://github.com/hoechenberger", "followers_url": "https://api.github.com/users/hoechenberger/followers", "following_url": "https://api.github.com/users/hoechenberger/following{/other_user}", "gists_url": "https://api.github.com/users/hoechenberger/gists{/gist_id}", "starred_url": "https://api.github.com/users/hoechenberger/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hoechenberger/subscriptions", "organizations_url": "https://api.github.com/users/hoechenberger/orgs", "repos_url": "https://api.github.com/users/hoechenberger/repos", "events_url": "https://api.github.com/users/hoechenberger/events{/privacy}", "received_events_url": "https://api.github.com/users/hoechenberger/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "hoechenberger", "id": 2046265, "node_id": "MDQ6VXNlcjIwNDYyNjU=", "avatar_url": "https://avatars.githubusercontent.com/u/2046265?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hoechenberger", "html_url": "https://github.com/hoechenberger", "followers_url": "https://api.github.com/users/hoechenberger/followers", "following_url": "https://api.github.com/users/hoechenberger/following{/other_user}", "gists_url": "https://api.github.com/users/hoechenberger/gists{/gist_id}", "starred_url": "https://api.github.com/users/hoechenberger/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hoechenberger/subscriptions", "organizations_url": "https://api.github.com/users/hoechenberger/orgs", "repos_url": "https://api.github.com/users/hoechenberger/repos", "events_url": "https://api.github.com/users/hoechenberger/events{/privacy}", "received_events_url": "https://api.github.com/users/hoechenberger/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "hoechenberger", "id": 2046265, "node_id": "MDQ6VXNlcjIwNDYyNjU=", "avatar_url": "https://avatars.githubusercontent.com/u/2046265?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hoechenberger", "html_url": "https://github.com/hoechenberger", "followers_url": "https://api.github.com/users/hoechenberger/followers", "following_url": "https://api.github.com/users/hoechenberger/following{/other_user}", "gists_url": "https://api.github.com/users/hoechenberger/gists{/gist_id}", "starred_url": "https://api.github.com/users/hoechenberger/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hoechenberger/subscriptions", "organizations_url": "https://api.github.com/users/hoechenberger/orgs", "repos_url": "https://api.github.com/users/hoechenberger/repos", "events_url": "https://api.github.com/users/hoechenberger/events{/privacy}", "received_events_url": "https://api.github.com/users/hoechenberger/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/mne-tools/mne-python/milestones/21", "html_url": "https://github.com/mne-tools/mne-python/milestone/21", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/milestones/21/labels", "id": 7253492, "node_id": "MI_kwDOABPcUM4Abq30", "number": 21, "title": "1.0", "description": "", "creator": {"login": "larsoner", "id": 2365790, "node_id": "MDQ6VXNlcjIzNjU3OTA=", "avatar_url": "https://avatars.githubusercontent.com/u/2365790?v=4", "gravatar_id": "", "url": "https://api.github.com/users/larsoner", "html_url": "https://github.com/larsoner", "followers_url": "https://api.github.com/users/larsoner/followers", "following_url": "https://api.github.com/users/larsoner/following{/other_user}", "gists_url": "https://api.github.com/users/larsoner/gists{/gist_id}", "starred_url": "https://api.github.com/users/larsoner/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/larsoner/subscriptions", "organizations_url": "https://api.github.com/users/larsoner/orgs", "repos_url": "https://api.github.com/users/larsoner/repos", "events_url": "https://api.github.com/users/larsoner/events{/privacy}", "received_events_url": "https://api.github.com/users/larsoner/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 83, "state": "closed", "created_at": "2021-10-14T16:40:49Z", "updated_at": "2022-05-03T11:29:23Z", "due_on": "2022-02-25T08:00:00Z", "closed_at": "2022-05-03T11:29:23Z"}, "comments": 0, "created_at": "2021-11-27T09:54:09Z", "updated_at": "2021-12-03T17:10:39Z", "closed_at": "2021-12-03T17:10:39Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "Making me unhappy:\r\n\r\n<img width=\"557\" alt=\"Screen Shot 2021-11-27 at 10 53 04\" src=\"https://user-images.githubusercontent.com/2046265/143676486-043d7677-1907-4e0b-80e1-02bd812b383f.png\">\r\n", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/10046/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10046/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/10037", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10037/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10037/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10037/events", "html_url": "https://github.com/mne-tools/mne-python/issues/10037", "id": 1063313992, "node_id": "I_kwDOABPcUM4_YOJI", "number": 10037, "title": "BUG: Annotated BAD_ACQ_SKIP times are skipped/lost when loaded from fif", "user": {"login": "etiennedemontalivet", "id": 7569375, "node_id": "MDQ6VXNlcjc1NjkzNzU=", "avatar_url": "https://avatars.githubusercontent.com/u/7569375?v=4", "gravatar_id": "", "url": "https://api.github.com/users/etiennedemontalivet", "html_url": "https://github.com/etiennedemontalivet", "followers_url": "https://api.github.com/users/etiennedemontalivet/followers", "following_url": "https://api.github.com/users/etiennedemontalivet/following{/other_user}", "gists_url": "https://api.github.com/users/etiennedemontalivet/gists{/gist_id}", "starred_url": "https://api.github.com/users/etiennedemontalivet/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/etiennedemontalivet/subscriptions", "organizations_url": "https://api.github.com/users/etiennedemontalivet/orgs", "repos_url": "https://api.github.com/users/etiennedemontalivet/repos", "events_url": "https://api.github.com/users/etiennedemontalivet/events{/privacy}", "received_events_url": "https://api.github.com/users/etiennedemontalivet/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 9, "created_at": "2021-11-25T08:56:18Z", "updated_at": "2021-11-29T15:18:51Z", "closed_at": "2021-11-29T15:18:51Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Hi guys, I think there is a bug with the behaviour of ``BAD_ACQ_SKIP``.\r\n\r\n#### Describe the bug\r\n``times`` and ``n_times`` parameters of ``mne.io.Raw`` seem to be inconsistent when loading the object that has ``BAD_ACQ_SKIP`` annotation(s) : the part that is annotated ``BAD_ACQ_SKIP`` is not included in ``times``.\r\n\r\n\r\n#### Steps to reproduce\r\n``` python\r\nimport mne\r\nimport numpy as np\r\n\r\n# create a fake raw instance based on 5-sec sin and cos signals\r\ninfo = mne.create_info(ch_names=[\"cos\", \"sin\"], sfreq=10)\r\nx = np.linspace(0, 5, 50)\r\nraw = mne.io.RawArray(\r\n    np.array([np.cos(x), np.sin(x)]),\r\n    info\r\n)\r\n\r\n# add BAD_ACQ_SKIP annotation on the first 2 seconds\r\nraw.annotations.append(onset=0, duration=2, description=\"BAD_ACQ_SKIP\")\r\n# save to fif\r\nraw.save(\"raw_ieeg.fif\")\r\n\r\n# load the fif\r\nraw_loaded = mne.io.read_raw_fif(\"raw_ieeg.fif\")\r\n\r\n# compare\r\nprint(raw.times)\r\nprint(raw_loaded.times)\r\n```\r\ncompare output:\r\n``` python\r\n[0.  0.1 0.2 0.3 0.4 0.5 0.6 0.7 0.8 0.9 1.  1.1 1.2 1.3 1.4 1.5 1.6 1.7\r\n 1.8 1.9 2.  2.1 2.2 2.3 2.4 2.5 2.6 2.7 2.8 2.9 3.  3.1 3.2 3.3 3.4 3.5\r\n 3.6 3.7 3.8 3.9 4.  4.1 4.2 4.3 4.4 4.5 4.6 4.7 4.8 4.9]\r\n[0.  0.1 0.2 0.3 0.4 0.5 0.6 0.7 0.8 0.9 1.  1.1 1.2 1.3 1.4 1.5 1.6 1.7\r\n 1.8 1.9 2.  2.1 2.2 2.3 2.4 2.5 2.6 2.7 2.8 2.9]\r\n```\r\n\r\n#### Expected results\r\nI would except ``times`` to take also the ``BAD_ACQ_SKIP`` into account, so in my example ``raw_loaded.times`` should be the same as ``raw.times``.\r\n\r\nWhat do you think ?\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/10037/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10037/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/10032", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10032/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10032/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10032/events", "html_url": "https://github.com/mne-tools/mne-python/issues/10032", "id": 1061612463, "node_id": "I_kwDOABPcUM4_Ruuv", "number": 10032, "title": "CAR reference as a projector doesn't set custom_ref_applied and remains in projs", "user": {"login": "mscheltienne", "id": 73893616, "node_id": "MDQ6VXNlcjczODkzNjE2", "avatar_url": "https://avatars.githubusercontent.com/u/73893616?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mscheltienne", "html_url": "https://github.com/mscheltienne", "followers_url": "https://api.github.com/users/mscheltienne/followers", "following_url": "https://api.github.com/users/mscheltienne/following{/other_user}", "gists_url": "https://api.github.com/users/mscheltienne/gists{/gist_id}", "starred_url": "https://api.github.com/users/mscheltienne/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mscheltienne/subscriptions", "organizations_url": "https://api.github.com/users/mscheltienne/orgs", "repos_url": "https://api.github.com/users/mscheltienne/repos", "events_url": "https://api.github.com/users/mscheltienne/events{/privacy}", "received_events_url": "https://api.github.com/users/mscheltienne/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 13, "created_at": "2021-11-23T18:56:37Z", "updated_at": "2021-12-10T20:01:54Z", "closed_at": "2021-12-10T20:01:54Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "The `.set_eeg_reference` methods have a `projection` argument that can be set to True to set the CAR reference as a projector. I guess in most cases it should be set to False, and the CAR referencing should be directly applied to the data; but if you set it to True, it creates some issues in later processing.\r\n\r\nSomeone else from my lab encountered two today:\r\n\r\n### The flag `custom_ref_applied` is not set to True when the projector is applied.\r\n```py\r\nfrom pathlib import Path\r\n\r\nimport mne\r\nimport numpy as np\r\n\r\n\r\ndirectory = Path(mne.datasets.sample.data_path())/'MEG'/'sample'\r\nfname = directory/'sample_audvis_filt-0-40_raw.fif'\r\n\r\n#%% CAR\r\nraw = mne.io.read_raw_fif(fname, preload=True)\r\nraw.del_proj()  # 3 PCA, 1 CAR all inactive.\r\nraw.set_eeg_reference('average', projection=False)\r\ndata = raw.get_data(picks='eeg')\r\n\r\nraw.info['custom_ref_applied']\r\n# Out: 1 (FIFFV_MNE_CUSTOM_REF_ON)\r\n\r\n#%% CAR proj\r\nraw = mne.io.read_raw_fif(fname, preload=True)\r\nraw.del_proj()  # 3 PCA, 1 CAR all inactive.\r\nraw.set_eeg_reference('average', projection=True)\r\ndata_unapplied = raw.get_data(picks='eeg')\r\nraw.apply_proj()\r\ndata_applied = raw.get_data(picks='eeg')\r\n\r\nraw.info['custom_ref_applied']\r\n# Out: 0 (FIFFV_MNE_CUSTOM_REF_OFF)\r\n\r\n#%% Test\r\nassert np.isclose(data, data_applied).all()\r\nassert not np.isclose(data, data_unapplied).all()\r\n```\r\n\r\nOnce `.apply_proj` is called, the only way to remove the projector is to delete all channels affected.. i.e. all `eeg` channels in which case neither the projector or the flag `custom_ref_applied` make sense. IMO, it should be set to True when a CAR projector is applied.\r\n\r\n### The CAR projector remains in the list of projectors (and becomes active)\r\n\r\nThis makes probably sense for other types of projectors, but I feel like it's a mistake for the CAR projectors. The changes have been made to the `eeg` data; and the only way to remove it is again to delete all `eeg` channels. \r\nNow, consider this (sorry I didn't make an example for that one yet, I'll add one tomorrow): \r\n- I have 2 different EEG recordings from the same participant, same session -> `raw1` and `raw2`. \r\n- On both, I use `raw.set_eeg_reference('average', projection=True)`. \r\n- Now, I create similar epochs on both (assume same type of recordings, same events) -> `epochs1` and `epochs2`.\r\n- In `epochs.info['projs']`, the CAR projector (active) is displayed. \r\n- Now, if I use `mne.concatenate_epochs` to concatenate both in a single epochs instance; an error is raised because projectors between both differ.\r\n\r\nThis probably makes sense for SSP, PCA projectors; but for a common average reference on EEG channels, it doesn't (at least to me).\r\n\r\nFor now, to quickly solve the problem encountered with data at hand (without changing `.set_eeg_reference` proj to False), I proposed to do `epochs.info['projs'] = []`, but obviously I'd like to avoid this.", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/10032/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10032/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/10023", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10023/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10023/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10023/events", "html_url": "https://github.com/mne-tools/mne-python/issues/10023", "id": 1059219263, "node_id": "I_kwDOABPcUM4_Imc_", "number": 10023, "title": "[BUG] Swiss cheese structures in `mne.viz.Brain.add_volume_labels`", "user": {"login": "alexrockhill", "id": 13473576, "node_id": "MDQ6VXNlcjEzNDczNTc2", "avatar_url": "https://avatars.githubusercontent.com/u/13473576?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alexrockhill", "html_url": "https://github.com/alexrockhill", "followers_url": "https://api.github.com/users/alexrockhill/followers", "following_url": "https://api.github.com/users/alexrockhill/following{/other_user}", "gists_url": "https://api.github.com/users/alexrockhill/gists{/gist_id}", "starred_url": "https://api.github.com/users/alexrockhill/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alexrockhill/subscriptions", "organizations_url": "https://api.github.com/users/alexrockhill/orgs", "repos_url": "https://api.github.com/users/alexrockhill/repos", "events_url": "https://api.github.com/users/alexrockhill/events{/privacy}", "received_events_url": "https://api.github.com/users/alexrockhill/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2021-11-20T20:03:57Z", "updated_at": "2021-11-24T21:37:59Z", "closed_at": "2021-11-24T21:37:59Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "I'm getting structures that have a few holes in them when using the volume labels in `Brain`...\r\n![example](https://user-images.githubusercontent.com/13473576/142739505-04811d66-c32d-43a3-ba21-6c7cac67166c.png)\r\n\r\nI wonder if it wouldn't be too hard to implement a binary closing or something of the type but it's in VTK so I'm not really sure what's available there to close structures but I'd assume they would have something like that.", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/10023/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10023/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/10022", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10022/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10022/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10022/events", "html_url": "https://github.com/mne-tools/mne-python/issues/10022", "id": 1059140934, "node_id": "I_kwDOABPcUM4_ITVG", "number": 10022, "title": "mne.datasets requires tqdm regardless of verbose", "user": {"login": "mscheltienne", "id": 73893616, "node_id": "MDQ6VXNlcjczODkzNjE2", "avatar_url": "https://avatars.githubusercontent.com/u/73893616?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mscheltienne", "html_url": "https://github.com/mscheltienne", "followers_url": "https://api.github.com/users/mscheltienne/followers", "following_url": "https://api.github.com/users/mscheltienne/following{/other_user}", "gists_url": "https://api.github.com/users/mscheltienne/gists{/gist_id}", "starred_url": "https://api.github.com/users/mscheltienne/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mscheltienne/subscriptions", "organizations_url": "https://api.github.com/users/mscheltienne/orgs", "repos_url": "https://api.github.com/users/mscheltienne/repos", "events_url": "https://api.github.com/users/mscheltienne/events{/privacy}", "received_events_url": "https://api.github.com/users/mscheltienne/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/mne-tools/mne-python/milestones/21", "html_url": "https://github.com/mne-tools/mne-python/milestone/21", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/milestones/21/labels", "id": 7253492, "node_id": "MI_kwDOABPcUM4Abq30", "number": 21, "title": "1.0", "description": "", "creator": {"login": "larsoner", "id": 2365790, "node_id": "MDQ6VXNlcjIzNjU3OTA=", "avatar_url": "https://avatars.githubusercontent.com/u/2365790?v=4", "gravatar_id": "", "url": "https://api.github.com/users/larsoner", "html_url": "https://github.com/larsoner", "followers_url": "https://api.github.com/users/larsoner/followers", "following_url": "https://api.github.com/users/larsoner/following{/other_user}", "gists_url": "https://api.github.com/users/larsoner/gists{/gist_id}", "starred_url": "https://api.github.com/users/larsoner/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/larsoner/subscriptions", "organizations_url": "https://api.github.com/users/larsoner/orgs", "repos_url": "https://api.github.com/users/larsoner/repos", "events_url": "https://api.github.com/users/larsoner/events{/privacy}", "received_events_url": "https://api.github.com/users/larsoner/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 83, "state": "closed", "created_at": "2021-10-14T16:40:49Z", "updated_at": "2022-05-03T11:29:23Z", "due_on": "2022-02-25T08:00:00Z", "closed_at": "2022-05-03T11:29:23Z"}, "comments": 2, "created_at": "2021-11-20T13:04:29Z", "updated_at": "2022-01-20T18:54:26Z", "closed_at": "2022-01-20T18:54:26Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "I've been experimenting a bit with GitHub actions on a different repository, and I am using the sample dataset from MNE inside the test. The action is failing because `tqdm` was not installed and is required by `pooch` even if `verbose` is set to None / False. \r\n\r\n```\r\n@verbose\r\ndef data_path(path=None, force_update=False, update_path=True, download=True,\r\n              verbose=None):  # noqa: D103\r\n\r\n    return _download_mne_dataset(\r\n        name='sample', processor='untar', path=path,\r\n        force_update=force_update, update_path=update_path,\r\n        download=download)\r\n```\r\n\r\nShouldn't there be a mode in which we can download without any verbosity?", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/10022/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10022/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/10014", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10014/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10014/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10014/events", "html_url": "https://github.com/mne-tools/mne-python/issues/10014", "id": 1056276836, "node_id": "I_kwDOABPcUM4-9YFk", "number": 10014, "title": "Cannot install MNE with conda (have to interrupt \"Solving environment: \" stage)", "user": {"login": "neurorepro", "id": 79224807, "node_id": "MDQ6VXNlcjc5MjI0ODA3", "avatar_url": "https://avatars.githubusercontent.com/u/79224807?v=4", "gravatar_id": "", "url": "https://api.github.com/users/neurorepro", "html_url": "https://github.com/neurorepro", "followers_url": "https://api.github.com/users/neurorepro/followers", "following_url": "https://api.github.com/users/neurorepro/following{/other_user}", "gists_url": "https://api.github.com/users/neurorepro/gists{/gist_id}", "starred_url": "https://api.github.com/users/neurorepro/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/neurorepro/subscriptions", "organizations_url": "https://api.github.com/users/neurorepro/orgs", "repos_url": "https://api.github.com/users/neurorepro/repos", "events_url": "https://api.github.com/users/neurorepro/events{/privacy}", "received_events_url": "https://api.github.com/users/neurorepro/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2021-11-17T15:39:22Z", "updated_at": "2021-11-17T17:12:54Z", "closed_at": "2021-11-17T17:12:54Z", "author_association": "NONE", "active_lock_reason": null, "body": "#### Describe the bug\r\nWhen installing a fresh version of MNE, conda hangs on `Solving environment:`\r\n\r\n#### Steps to reproduce\r\n```console\r\nconda create -n eeg38 python=3.8\r\nconda activate eeg38\r\nconda install -c conda-forge mne\r\n```\r\n\r\n#### Expected results\r\nConda finishing the installation of MNE and not hanging\r\n\r\n#### Actual results\r\nConda hanging\r\n```console\r\nCollecting package metadata (current_repodata.json): done\r\nSolving environment: failed with initial frozen solve. Retrying with flexible solve.\r\nSolving environment: failed with repodata from current_repodata.json, will retry with next repodata source.\r\nCollecting package metadata (repodata.json): done\r\nSolving environment:\r\n```\r\n", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/10014/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10014/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/10012", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10012/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10012/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10012/events", "html_url": "https://github.com/mne-tools/mne-python/issues/10012", "id": 1055992048, "node_id": "I_kwDOABPcUM4-8Sjw", "number": 10012, "title": "Error reading EEGLAB file (buffer too small)", "user": {"login": "cbrnr", "id": 4377312, "node_id": "MDQ6VXNlcjQzNzczMTI=", "avatar_url": "https://avatars.githubusercontent.com/u/4377312?v=4", "gravatar_id": "", "url": "https://api.github.com/users/cbrnr", "html_url": "https://github.com/cbrnr", "followers_url": "https://api.github.com/users/cbrnr/followers", "following_url": "https://api.github.com/users/cbrnr/following{/other_user}", "gists_url": "https://api.github.com/users/cbrnr/gists{/gist_id}", "starred_url": "https://api.github.com/users/cbrnr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/cbrnr/subscriptions", "organizations_url": "https://api.github.com/users/cbrnr/orgs", "repos_url": "https://api.github.com/users/cbrnr/repos", "events_url": "https://api.github.com/users/cbrnr/events{/privacy}", "received_events_url": "https://api.github.com/users/cbrnr/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 27, "created_at": "2021-11-17T11:02:10Z", "updated_at": "2022-04-05T06:33:11Z", "closed_at": "2021-11-18T09:48:56Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "This issue was reported in [our forum](https://mne.discourse.group/t/unable-read-eeglab-file-buffer-is-too-small-for-requested-array/3968) using [this example file](https://drive.google.com/drive/folders/1o6q5oEXUkkbRm9AcNzrVu6rkFTxTIrcO).\r\n\r\n```\r\nraw = mne.io.read_raw_eeglab(\"EC_CON1.set\")\r\n---------------------------------------------------------------------------\r\nTypeError                                 Traceback (most recent call last)\r\n<ipython-input-6-90625f7fcaf5> in <module>\r\n----> 1 raw = mne.io.read_raw_eeglab(\"EC_CON1.set\")\r\n\r\n/usr/local/lib/python3.9/site-packages/mne/io/eeglab/eeglab.py in read_raw_eeglab(input_fname, eog, preload, uint16_codec, verbose)\r\n    217     .. versionadded:: 0.11.0\r\n    218     \"\"\"\r\n--> 219     return RawEEGLAB(input_fname=input_fname, preload=preload,\r\n    220                      eog=eog, verbose=verbose, uint16_codec=uint16_codec)\r\n    221 \r\n\r\n<decorator-gen-261> in __init__(self, input_fname, eog, preload, uint16_codec, verbose)\r\n\r\n/usr/local/lib/python3.9/site-packages/mne/io/eeglab/eeglab.py in __init__(self, input_fname, eog, preload, uint16_codec, verbose)\r\n    316                  preload=False, uint16_codec=None, verbose=None):  # noqa: D102\r\n    317         input_fname = _check_fname(input_fname, 'read', True, 'input_fname')\r\n--> 318         eeg = _check_load_mat(input_fname, uint16_codec)\r\n    319         if eeg.trials != 1:\r\n    320             raise TypeError('The number of trials is %d. It must be 1 for raw'\r\n\r\n/usr/local/lib/python3.9/site-packages/mne/io/eeglab/eeglab.py in _check_load_mat(fname, uint16_codec)\r\n     57     \"\"\"Check if the mat struct contains 'EEG'.\"\"\"\r\n     58     from ...externals.pymatreader import read_mat\r\n---> 59     eeg = read_mat(fname, uint16_codec=uint16_codec)\r\n     60     if 'ALLEEG' in eeg:\r\n     61         raise NotImplementedError(\r\n\r\n/usr/local/lib/python3.9/site-packages/mne/externals/pymatreader/pymatreader.py in read_mat(filename, variable_names, ignore_fields, uint16_codec)\r\n     87                 extra_kwargs['uint16_codec'] = uint16_codec\r\n     88 \r\n---> 89             raw_data = scipy.io.loadmat(fid, struct_as_record=True,\r\n     90                                         squeeze_me=True, mat_dtype=False,\r\n     91                                         variable_names=variable_names,\r\n\r\n/usr/local/lib/python3.9/site-packages/scipy/io/matlab/mio.py in loadmat(file_name, mdict, appendmat, **kwargs)\r\n    224     with _open_file_context(file_name, appendmat) as f:\r\n    225         MR, _ = mat_reader_factory(f, **kwargs)\r\n--> 226         matfile_dict = MR.get_variables(variable_names)\r\n    227 \r\n    228     if mdict is not None:\r\n\r\n/usr/local/lib/python3.9/site-packages/scipy/io/matlab/mio5.py in get_variables(self, variable_names)\r\n    330                 continue\r\n    331             try:\r\n--> 332                 res = self.read_var_array(hdr, process)\r\n    333             except MatReadError as err:\r\n    334                 warnings.warn(\r\n\r\n/usr/local/lib/python3.9/site-packages/scipy/io/matlab/mio5.py in read_var_array(self, header, process)\r\n    290            `process`.\r\n    291         '''\r\n--> 292         return self._matrix_reader.array_from_header(header, process)\r\n    293 \r\n    294     def get_variables(self, variable_names=None):\r\n\r\nmio5_utils.pyx in scipy.io.matlab.mio5_utils.VarReader5.array_from_header()\r\n\r\nmio5_utils.pyx in scipy.io.matlab.mio5_utils.VarReader5.array_from_header()\r\n\r\nmio5_utils.pyx in scipy.io.matlab.mio5_utils.VarReader5.read_struct()\r\n\r\nmio5_utils.pyx in scipy.io.matlab.mio5_utils.VarReader5.read_mi_matrix()\r\n\r\nmio5_utils.pyx in scipy.io.matlab.mio5_utils.VarReader5.array_from_header()\r\n\r\nmio5_utils.pyx in scipy.io.matlab.mio5_utils.VarReader5.read_char()\r\n\r\nTypeError: buffer is too small for requested array\r\n```\r\n\r\nIt looks like this is related to reading the .mat file.", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/10012/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10012/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/10011", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10011/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10011/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10011/events", "html_url": "https://github.com/mne-tools/mne-python/issues/10011", "id": 1055924819, "node_id": "I_kwDOABPcUM4-8CJT", "number": 10011, "title": "T1 and CT do not fuse well after ACPC alignment", "user": {"login": "leosunpsy", "id": 23652482, "node_id": "MDQ6VXNlcjIzNjUyNDgy", "avatar_url": "https://avatars.githubusercontent.com/u/23652482?v=4", "gravatar_id": "", "url": "https://api.github.com/users/leosunpsy", "html_url": "https://github.com/leosunpsy", "followers_url": "https://api.github.com/users/leosunpsy/followers", "following_url": "https://api.github.com/users/leosunpsy/following{/other_user}", "gists_url": "https://api.github.com/users/leosunpsy/gists{/gist_id}", "starred_url": "https://api.github.com/users/leosunpsy/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/leosunpsy/subscriptions", "organizations_url": "https://api.github.com/users/leosunpsy/orgs", "repos_url": "https://api.github.com/users/leosunpsy/repos", "events_url": "https://api.github.com/users/leosunpsy/events{/privacy}", "received_events_url": "https://api.github.com/users/leosunpsy/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 11, "created_at": "2021-11-17T09:54:36Z", "updated_at": "2022-02-15T19:14:01Z", "closed_at": "2022-02-15T19:14:01Z", "author_association": "NONE", "active_lock_reason": null, "body": "https://mne.tools/stable/auto_tutorials/clinical/10_ieeg_localize.html#sphx-glr-auto-tutorials-clinical-10-ieeg-localize-py\r\nI followed the tutorial above to locate SEEG contacts. I found that the affine registration of the CT with the MRI was working optimally only for the original MRI NIfTI file and CT NIfTI file (created by the MRIcron from DICOMs) or MRI NIfTI file after AC alignment with Freeview (only translation) and CT NIfTI file. But not for MRI NIfTI file after ACPC alignment with Freeview (translation+rotation around the AC point ) and CT NIfTI file.\r\n\r\nObviously, the problem is the rotation around AC. Is it that in affine registration the program treats rotation around AC as rotation around the voxel coordinate axis?\r\n\r\nI used the related program of Dipy to run again and had the same problem.\r\n\r\n![image](https://user-images.githubusercontent.com/23652482/142190623-326704ef-bbe6-4f53-9228-8d8e503970fc.png)\r\nFig.1 Fusion result without ACPC alignment\r\n\r\n![1637142935(1)](https://user-images.githubusercontent.com/23652482/142178413-1f520039-f737-4f84-a156-f310c633c47f.png)\r\nFig.2 Complete ACPC  Alignment \r\n\r\n![image](https://user-images.githubusercontent.com/23652482/142190956-5278ae37-1d99-4300-a9d1-ff3c0fac5a9c.png)\r\nFig.3 Fusion result After ACPC alignment  with FreeView\r\n\r\nPython version: 3.9.2\r\nMNE-Python version: 0.24.0\r\noperating system: Debian 11\r\n\r\n@alexrockhill\r\n", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/10011/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10011/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/10010", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10010/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10010/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10010/events", "html_url": "https://github.com/mne-tools/mne-python/issues/10010", "id": 1055886265, "node_id": "I_kwDOABPcUM4-74u5", "number": 10010, "title": "mne.io.read_raw_curry *Curry 8 Raw Float", "user": {"login": "hannekevandijk", "id": 29751082, "node_id": "MDQ6VXNlcjI5NzUxMDgy", "avatar_url": "https://avatars.githubusercontent.com/u/29751082?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hannekevandijk", "html_url": "https://github.com/hannekevandijk", "followers_url": "https://api.github.com/users/hannekevandijk/followers", "following_url": "https://api.github.com/users/hannekevandijk/following{/other_user}", "gists_url": "https://api.github.com/users/hannekevandijk/gists{/gist_id}", "starred_url": "https://api.github.com/users/hannekevandijk/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hannekevandijk/subscriptions", "organizations_url": "https://api.github.com/users/hannekevandijk/orgs", "repos_url": "https://api.github.com/users/hannekevandijk/repos", "events_url": "https://api.github.com/users/hannekevandijk/events{/privacy}", "received_events_url": "https://api.github.com/users/hannekevandijk/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2021-11-17T09:14:08Z", "updated_at": "2022-04-07T17:18:31Z", "closed_at": "2022-04-07T17:18:31Z", "author_association": "NONE", "active_lock_reason": null, "body": "#### Describe the bug\r\nI have trouble loading data that has been saved with Curry 8 default format (CURRY Raw Float Format *.cdt). Since others have to do the EEG recordings and to make things on that end as fool-proof as possible I'd much prefer the default saving option. Doing this saves a .cdt file and a .cdt.dpa file, but no other files. Reading through the sourcecode of read_raw_curry, i guess mne expects a .cdt.cef  or .cdt.ceo file as well. \r\n\r\n```\r\n\"Curry 8\": {\r\n        \"info\": \".cdt.dpa\",\r\n        \"data\": \".cdt\",\r\n        \"labels\": \".cdt.dpa\",\r\n        \"events_cef\": \".cdt.cef\",\r\n        \"events_ceo\": \".cdt.ceo\",\r\n        \"hpi\": \".cdt.hpi\"\r\n}\r\n```\r\n\r\nI do have a trigger channel with events, but no hpi. When I try to load the data I get this error:\r\n\r\n```\r\nIn [129]: raw = mne.io.read_raw_curry(eeg.files[2], preload=True)\r\nLeaving device<->head transform as None (no landmarks found)\r\nReading 0 ... 5797887  =      0.000 ...  1415.500 secs...\r\n---------------------------------------------------------------------------\r\nRuntimeError                              Traceback (most recent call last)\r\n<ipython-input-129-6f9a2fd61bab> in <module>\r\n----> 1 raw = mne.io.read_raw_curry(eeg.files[2], preload=True)\r\n\r\n<decorator-gen-264> in read_raw_curry(fname, preload, verbose)\r\n\r\n/opt/anaconda/envs/tf20/lib/python3.9/site-packages/mne/io/curry/curry.py in read_raw_curry(fname, preload, verbose)\r\n    475         A Raw object containing Curry data.\r\n    476     \"\"\"\r\n--> 477     return RawCurry(fname, preload, verbose)\r\n    478 \r\n    479 \r\n\r\n<decorator-gen-265> in __init__(self, fname, preload, verbose)\r\n\r\n/opt/anaconda/envs/tf20/lib/python3.9/site-packages/mne/io/curry/curry.py in __init__(self, fname, preload, verbose)\r\n    508         raw_extras = dict(is_ascii=is_ascii)\r\n    509 \r\n--> 510         super(RawCurry, self).__init__(\r\n    511             info, preload, filenames=[data_fname], last_samps=last_samps,\r\n    512             orig_format='int', raw_extras=[raw_extras], verbose=verbose)\r\n\r\n<decorator-gen-197> in __init__(self, info, preload, first_samps, last_samps, filenames, raw_extras, orig_format, dtype, buffer_size_sec, orig_units, verbose)\r\n\r\n/opt/anaconda/envs/tf20/lib/python3.9/site-packages/mne/io/base.py in __init__(self, info, preload, first_samps, last_samps, filenames, raw_extras, orig_format, dtype, buffer_size_sec, orig_units, verbose)\r\n    286         # If we have True or a string, actually do the preloading\r\n    287         if load_from_disk:\r\n--> 288             self._preload_data(preload)\r\n    289         self._init_kwargs = _get_argvalues()\r\n    290 \r\n\r\n/opt/anaconda/envs/tf20/lib/python3.9/site-packages/mne/io/base.py in _preload_data(self, preload)\r\n    566         logger.info('Reading %d ... %d  =  %9.3f ... %9.3f secs...' %\r\n    567                     (0, len(self.times) - 1, 0., self.times[-1]))\r\n--> 568         self._data = self._read_segment(\r\n    569             data_buffer=data_buffer, projector=self._projector)\r\n    570         assert len(self._data) == self.info['nchan']\r\n\r\n<decorator-gen-199> in _read_segment(self, start, stop, sel, data_buffer, projector, verbose)\r\n\r\n/opt/anaconda/envs/tf20/lib/python3.9/site-packages/mne/io/base.py in _read_segment(***failed resolving arguments***)\r\n    451             # reindex back to original file\r\n    452             orig_idx = _convert_slice(self._read_picks[fi][need_idx])\r\n--> 453             _ReadSegmentFileProtector(self)._read_segment_file(\r\n    454                 data[:, this_sl], orig_idx, fi,\r\n    455                 int(start_file), int(stop_file), cals, mult)\r\n\r\n/opt/anaconda/envs/tf20/lib/python3.9/site-packages/mne/io/base.py in _read_segment_file(self, data, idx, fi, start, stop, cals, mult)\r\n   2111 \r\n   2112     def _read_segment_file(self, data, idx, fi, start, stop, cals, mult):\r\n-> 2113         return self.__raw.__class__._read_segment_file(\r\n   2114             self, data, idx, fi, start, stop, cals, mult)\r\n   2115 \r\n\r\n/opt/anaconda/envs/tf20/lib/python3.9/site-packages/mne/io/curry/curry.py in _read_segment_file(self, data, idx, fi, start, stop, cals, mult)\r\n    538 \r\n    539         else:\r\n--> 540             _read_segments_file(\r\n    541                 self, data, idx, fi, start, stop, cals, mult, dtype=\"<f4\")\r\n\r\n/opt/anaconda/envs/tf20/lib/python3.9/site-packages/mne/io/utils.py in _read_segments_file(raw, data, idx, fi, start, stop, cals, mult, dtype, n_channels, offset, trigger_ch)\r\n    220             block = np.fromfile(fid, dtype, count)\r\n    221             if block.size != count:\r\n--> 222                 raise RuntimeError('Incorrect number of samples (%s != %s), '\r\n    223                                    'please report this error to MNE-Python '\r\n    224                                    'developers' % (block.size, count))\r\n\r\nRuntimeError: Incorrect number of samples (39818 != 24999975), please report this error to MNE-Python developers\r\n```\r\nSo here you are :D\r\n\r\nIf I save the file as 'CURRY Raw ASCII Format (*.cdt)' strangly it does work. By the way, Curry then also saves the additional .cef file. \r\n\r\nThis is my version and (conda) environment information:\r\n```\r\nmne.sys_info()\r\nQt WebEngine seems to be initialized from a plugin. Please set Qt::AA_ShareOpenGLContexts using QCoreApplication::setAttribute before constructing QGuiApplication.\r\nPlatform:       Linux-4.15.0-156-generic-x86_64-with-glibc2.27\r\nPython:         3.9.7 (default, Sep 16 2021, 13:09:58)  [GCC 7.5.0]\r\nExecutable:     /opt/anaconda/envs/tf20/bin/python\r\nCPU:            x86_64: 32 cores\r\nMemory:         62.9 GB\r\n\r\nmne:            0.24.0\r\nnumpy:          1.19.5 {blas=openblas, lapack=openblas}\r\nscipy:          1.5.4\r\nmatplotlib:     3.4.2 {backend=Qt5Agg}\r\n\r\nsklearn:        0.24.2\r\nnumba:          0.54.0\r\nnibabel:        Not found\r\nnilearn:        Not found\r\ndipy:           Not found\r\ncupy:           Not found\r\npandas:         1.3.3\r\nmayavi:         Not found\r\npyvista:        Not found\r\npyvistaqt:      Not found\r\nipyvtklink:     Not found\r\nvtk:            Not found\r\nPyQt5:          5.9.2\r\nipympl:         Not found\r\nmne_qt_browser: Not found\r\n```\r\n\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/10010/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10010/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/10006", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10006/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10006/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10006/events", "html_url": "https://github.com/mne-tools/mne-python/issues/10006", "id": 1053989793, "node_id": "I_kwDOABPcUM4-0puh", "number": 10006, "title": "CI: CircleCI now has a 50 minute timeout", "user": {"login": "larsoner", "id": 2365790, "node_id": "MDQ6VXNlcjIzNjU3OTA=", "avatar_url": "https://avatars.githubusercontent.com/u/2365790?v=4", "gravatar_id": "", "url": "https://api.github.com/users/larsoner", "html_url": "https://github.com/larsoner", "followers_url": "https://api.github.com/users/larsoner/followers", "following_url": "https://api.github.com/users/larsoner/following{/other_user}", "gists_url": "https://api.github.com/users/larsoner/gists{/gist_id}", "starred_url": "https://api.github.com/users/larsoner/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/larsoner/subscriptions", "organizations_url": "https://api.github.com/users/larsoner/orgs", "repos_url": "https://api.github.com/users/larsoner/repos", "events_url": "https://api.github.com/users/larsoner/events{/privacy}", "received_events_url": "https://api.github.com/users/larsoner/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2021-11-15T18:45:48Z", "updated_at": "2021-12-01T22:23:29Z", "closed_at": "2021-12-01T22:23:29Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "See https://app.circleci.com/pipelines/github/mne-tools/mne-python/11466/workflows/2cdc35c4-e9cf-4fe6-872a-87a499804609/jobs/38423\r\n\r\nI don't know a good solution since it currently takes 2-3h to build our docs.", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/10006/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/10006/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/9965", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9965/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9965/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9965/events", "html_url": "https://github.com/mne-tools/mne-python/issues/9965", "id": 1045925860, "node_id": "I_kwDOABPcUM4-V4_k", "number": 9965, "title": "BUG: Tags with spaces are broken", "user": {"login": "larsoner", "id": 2365790, "node_id": "MDQ6VXNlcjIzNjU3OTA=", "avatar_url": "https://avatars.githubusercontent.com/u/2365790?v=4", "gravatar_id": "", "url": "https://api.github.com/users/larsoner", "html_url": "https://github.com/larsoner", "followers_url": "https://api.github.com/users/larsoner/followers", "following_url": "https://api.github.com/users/larsoner/following{/other_user}", "gists_url": "https://api.github.com/users/larsoner/gists{/gist_id}", "starred_url": "https://api.github.com/users/larsoner/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/larsoner/subscriptions", "organizations_url": "https://api.github.com/users/larsoner/orgs", "repos_url": "https://api.github.com/users/larsoner/repos", "events_url": "https://api.github.com/users/larsoner/events{/privacy}", "received_events_url": "https://api.github.com/users/larsoner/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "hoechenberger", "id": 2046265, "node_id": "MDQ6VXNlcjIwNDYyNjU=", "avatar_url": "https://avatars.githubusercontent.com/u/2046265?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hoechenberger", "html_url": "https://github.com/hoechenberger", "followers_url": "https://api.github.com/users/hoechenberger/followers", "following_url": "https://api.github.com/users/hoechenberger/following{/other_user}", "gists_url": "https://api.github.com/users/hoechenberger/gists{/gist_id}", "starred_url": "https://api.github.com/users/hoechenberger/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hoechenberger/subscriptions", "organizations_url": "https://api.github.com/users/hoechenberger/orgs", "repos_url": "https://api.github.com/users/hoechenberger/repos", "events_url": "https://api.github.com/users/hoechenberger/events{/privacy}", "received_events_url": "https://api.github.com/users/hoechenberger/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "hoechenberger", "id": 2046265, "node_id": "MDQ6VXNlcjIwNDYyNjU=", "avatar_url": "https://avatars.githubusercontent.com/u/2046265?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hoechenberger", "html_url": "https://github.com/hoechenberger", "followers_url": "https://api.github.com/users/hoechenberger/followers", "following_url": "https://api.github.com/users/hoechenberger/following{/other_user}", "gists_url": "https://api.github.com/users/hoechenberger/gists{/gist_id}", "starred_url": "https://api.github.com/users/hoechenberger/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hoechenberger/subscriptions", "organizations_url": "https://api.github.com/users/hoechenberger/orgs", "repos_url": "https://api.github.com/users/hoechenberger/repos", "events_url": "https://api.github.com/users/hoechenberger/events{/privacy}", "received_events_url": "https://api.github.com/users/hoechenberger/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 2, "created_at": "2021-11-05T14:44:53Z", "updated_at": "2021-11-15T17:19:42Z", "closed_at": "2021-11-15T17:19:42Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "This:\r\n```\r\nimport mne\r\nimport matplotlib.pyplot as plt\r\nreport = mne.Report()\r\nfigs, captions = list(), list()\r\nfor n in range(2):\r\n    fig, ax = plt.subplots()\r\n    ax.text(0, 0, str(n))\r\n    figs.append(fig)\r\n    captions.append(str(n))\r\nreport.add_figure(figs, 'numbers', caption=captions, tags=['My numbers'])\r\nreport.save('rep.html', overwrite=True)\r\n```\r\nis broken -- the top bar covers content, and the sliders do not work:\r\n\r\n![Screenshot from 2021-11-05 10-43-33](https://user-images.githubusercontent.com/2365790/140529033-4b36e284-edf8-4311-a532-63319e39bac8.png)\r\n\r\nIf I change it to `tags['My_numbers']` it works fine:\r\n\r\n![Screenshot from 2021-11-05 10-43-49](https://user-images.githubusercontent.com/2365790/140529045-95106962-eb90-4cbb-b0e8-08c15d517aad.png)\r\n\r\n@hoechenberger can you look?\r\n", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/9965/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9965/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/9961", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9961/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9961/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9961/events", "html_url": "https://github.com/mne-tools/mne-python/issues/9961", "id": 1045124244, "node_id": "I_kwDOABPcUM4-S1SU", "number": 9961, "title": "BUG: 3D functions return non-public members", "user": {"login": "larsoner", "id": 2365790, "node_id": "MDQ6VXNlcjIzNjU3OTA=", "avatar_url": "https://avatars.githubusercontent.com/u/2365790?v=4", "gravatar_id": "", "url": "https://api.github.com/users/larsoner", "html_url": "https://github.com/larsoner", "followers_url": "https://api.github.com/users/larsoner/followers", "following_url": "https://api.github.com/users/larsoner/following{/other_user}", "gists_url": "https://api.github.com/users/larsoner/gists{/gist_id}", "starred_url": "https://api.github.com/users/larsoner/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/larsoner/subscriptions", "organizations_url": "https://api.github.com/users/larsoner/orgs", "repos_url": "https://api.github.com/users/larsoner/repos", "events_url": "https://api.github.com/users/larsoner/events{/privacy}", "received_events_url": "https://api.github.com/users/larsoner/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/mne-tools/mne-python/milestones/21", "html_url": "https://github.com/mne-tools/mne-python/milestone/21", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/milestones/21/labels", "id": 7253492, "node_id": "MI_kwDOABPcUM4Abq30", "number": 21, "title": "1.0", "description": "", "creator": {"login": "larsoner", "id": 2365790, "node_id": "MDQ6VXNlcjIzNjU3OTA=", "avatar_url": "https://avatars.githubusercontent.com/u/2365790?v=4", "gravatar_id": "", "url": "https://api.github.com/users/larsoner", "html_url": "https://github.com/larsoner", "followers_url": "https://api.github.com/users/larsoner/followers", "following_url": "https://api.github.com/users/larsoner/following{/other_user}", "gists_url": "https://api.github.com/users/larsoner/gists{/gist_id}", "starred_url": "https://api.github.com/users/larsoner/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/larsoner/subscriptions", "organizations_url": "https://api.github.com/users/larsoner/orgs", "repos_url": "https://api.github.com/users/larsoner/repos", "events_url": "https://api.github.com/users/larsoner/events{/privacy}", "received_events_url": "https://api.github.com/users/larsoner/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 83, "state": "closed", "created_at": "2021-10-14T16:40:49Z", "updated_at": "2022-05-03T11:29:23Z", "due_on": "2022-02-25T08:00:00Z", "closed_at": "2022-05-03T11:29:23Z"}, "comments": 7, "created_at": "2021-11-04T19:28:07Z", "updated_at": "2022-02-15T18:00:39Z", "closed_at": "2022-02-15T18:00:39Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "@GuillaumeFavelier we need a public equivalent to mayavi.core.api.Scene for whatever we currently return for create_3d_figure that users can pass around to 3D functions as fig=fig etc. Can you work on this separately? Then we can `git grep \"PyVista renderer\"` and know all the places we need to put in a reference that links properly.\r\n\r\n*adapted from https://github.com/mne-tools/mne-python/pull/9945#issue-772527626*", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/9961/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9961/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/9958", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9958/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9958/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9958/events", "html_url": "https://github.com/mne-tools/mne-python/issues/9958", "id": 1044990517, "node_id": "I_kwDOABPcUM4-SUo1", "number": 9958, "title": "[MAINT] Remove connectivity sub-modules", "user": {"login": "adam2392", "id": 3460267, "node_id": "MDQ6VXNlcjM0NjAyNjc=", "avatar_url": "https://avatars.githubusercontent.com/u/3460267?v=4", "gravatar_id": "", "url": "https://api.github.com/users/adam2392", "html_url": "https://github.com/adam2392", "followers_url": "https://api.github.com/users/adam2392/followers", "following_url": "https://api.github.com/users/adam2392/following{/other_user}", "gists_url": "https://api.github.com/users/adam2392/gists{/gist_id}", "starred_url": "https://api.github.com/users/adam2392/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/adam2392/subscriptions", "organizations_url": "https://api.github.com/users/adam2392/orgs", "repos_url": "https://api.github.com/users/adam2392/repos", "events_url": "https://api.github.com/users/adam2392/events{/privacy}", "received_events_url": "https://api.github.com/users/adam2392/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2021-11-04T16:59:35Z", "updated_at": "2021-11-04T17:00:12Z", "closed_at": "2021-11-04T17:00:12Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "#### Describe the bug\r\nRemoves connectivity sub-modules. Follow up to https://github.com/mne-tools/mne-python/issues/9421\r\n\r\nNot sure why BUG label is attached, but couldn't find a blank issue template.", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/9958/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9958/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/9954", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9954/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9954/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9954/events", "html_url": "https://github.com/mne-tools/mne-python/issues/9954", "id": 1044789534, "node_id": "I_kwDOABPcUM4-Rjke", "number": 9954, "title": "Error loading 'somato' data", "user": {"login": "hndgzkn", "id": 2099645, "node_id": "MDQ6VXNlcjIwOTk2NDU=", "avatar_url": "https://avatars.githubusercontent.com/u/2099645?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hndgzkn", "html_url": "https://github.com/hndgzkn", "followers_url": "https://api.github.com/users/hndgzkn/followers", "following_url": "https://api.github.com/users/hndgzkn/following{/other_user}", "gists_url": "https://api.github.com/users/hndgzkn/gists{/gist_id}", "starred_url": "https://api.github.com/users/hndgzkn/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hndgzkn/subscriptions", "organizations_url": "https://api.github.com/users/hndgzkn/orgs", "repos_url": "https://api.github.com/users/hndgzkn/repos", "events_url": "https://api.github.com/users/hndgzkn/events{/privacy}", "received_events_url": "https://api.github.com/users/hndgzkn/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2021-11-04T13:55:59Z", "updated_at": "2021-11-04T14:06:13Z", "closed_at": "2021-11-04T14:06:13Z", "author_association": "NONE", "active_lock_reason": null, "body": "#### Describe the bug\r\n`RuntimeError` while loading `somato data` using `load_data`.\r\n\r\n\r\n#### Steps to reproduce\r\n```\r\nfrom alphacsc.datasets.mne_data import load_data\r\n\r\nX, info = load_data(dataset='somato', epoch= (-2, 4), sfreq= 150.)\r\n```\r\n\r\n#### Expected results\r\nNo errors\r\n\r\n#### Actual results\r\n```\r\nDownloading file 'MNE-somato-data.tar.gz' from 'https://osf.io/tp4sg/download?version=7' to '.../mne_data'.\r\n100%|\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588| 611M/611M [00:00<00:00, 775GB/s]\r\nUntarring contents of '.../mne_data/MNE-somato-data.tar.gz' to '.../mne_data'\r\nOpening raw data file .../mne_data/MNE-somato-data/sub-01/meg/sub-01_task-somato_meg.fif...\r\n    Range : 237600 ... 506999 =    791.189 ...  1688.266 secs\r\nReady.\r\nReading 0 ... 269399  =      0.000 ...   897.077 secs...\r\nSetting up band-stop filter\r\n\r\nFIR filter parameters\r\n---------------------\r\nDesigning a one-pass, zero-phase, non-causal bandstop filter:\r\n- Windowed time-domain design (firwin) method\r\n- Hamming window with 0.0194 passband ripple and 53 dB stopband attenuation\r\n- Lower transition bandwidth: 0.50 Hz\r\n- Upper transition bandwidth: 0.50 Hz\r\n- Filter length: 1983 samples (6.603 sec)\r\n\r\nFiltering raw data in 1 contiguous segment\r\nSetting up high-pass filter at 2 Hz\r\n\r\nFIR filter parameters\r\n---------------------\r\nDesigning a one-pass, zero-phase, non-causal highpass filter:\r\n- Windowed time-domain design (firwin) method\r\n- Hamming window with 0.0194 passband ripple and 53 dB stopband attenuation\r\n- Lower passband edge: 2.00\r\n- Lower transition bandwidth: 2.00 Hz (-6 dB cutoff frequency: 1.00 Hz)\r\n- Filter length: 497 samples (1.655 sec)\r\n\r\n111 events found\r\nEvent IDs: [1]\r\nNot setting metadata\r\nNot setting metadata\r\n111 matching events found\r\nSetting baseline interval to [-3.9992341833870637, 0.0] sec\r\nApplying baseline correction (mode: mean)\r\n0 projection items activated\r\nLoading data for 111 events and 1202 original time points ...\r\n    Rejecting  epoch based on EOG : ['EOG 061']\r\n    Rejecting  epoch based on EOG : ['EOG 061']\r\n    Rejecting  epoch based on EOG : ['EOG 061']\r\n    Rejecting  epoch based on EOG : ['EOG 061']\r\n    Rejecting  epoch based on EOG : ['EOG 061']\r\n5 bad epochs dropped\r\nComputing rank from data with rank=None\r\n    Using tolerance 7.5e-09 (2.2e-16 eps * 204 dim * 1.7e+05  max singular value)\r\n    Estimated rank (grad): 204\r\n    GRAD: rank 204 computed from 204 data channels with 0 projectors\r\n.../alphacsc/alphacsc/datasets/mne_data.py:94: RuntimeWarning: Something went wrong in the data-driven estimation of the data rank as it exceeds the theoretical rank from the info (204 > 64). Consider setting rank to \"auto\" or setting it explicitly as an integer.\r\n  cov = mne.compute_covariance(epochs_cov)\r\nReducing data rank from 204 -> 204\r\nEstimating covariance using EMPIRICAL\r\nDone.\r\nNumber of samples used : 127412\r\n[done]\r\nNot setting metadata\r\nNot setting metadata\r\n111 matching events found\r\nSetting baseline interval to [-2.001282051803185, 0.0] sec\r\nApplying baseline correction (mode: mean)\r\n0 projection items activated\r\nLoading data for 111 events and 1803 original time points ...\r\n    Rejecting  epoch based on EOG : ['EOG 061']\r\n    Rejecting  epoch based on EOG : ['EOG 061']\r\n    Rejecting  epoch based on EOG : ['EOG 061']\r\n    Rejecting  epoch based on EOG : ['EOG 061']\r\n    Rejecting  epoch based on EOG : ['EOG 061']\r\n    Rejecting  epoch based on EOG : ['EOG 061']\r\n    Rejecting  epoch based on EOG : ['EOG 061']\r\n    Rejecting  epoch based on EOG : ['EOG 061']\r\n8 bad epochs dropped\r\nTraceback (most recent call last):\r\n  File \"<stdin>\", line 1, in <module>\r\n  File \".../.local/miniconda3/envs/alphacsc/lib/python3.9/site-packages/joblib/memory.py\", line 594, in __call__\r\n    return self._cached_call(args, kwargs)[0]\r\n  File \".../.local/miniconda3/envs/alphacsc/lib/python3.9/site-packages/joblib/memory.py\", line 537, in _cached_call\r\n    out, metadata = self.call(*args, **kwargs)\r\n  File \".../.local/miniconda3/envs/alphacsc/lib/python3.9/site-packages/joblib/memory.py\", line 779, in call\r\n    output = self.func(*args, **kwargs)\r\n  File \".../alphacsc/alphacsc/datasets/mne_data.py\", line 129, in load_data\r\n    info['events'] = events\r\n  File .../.local/miniconda3/envs/alphacsc/lib/python3.9/site-packages/mne/io/meas_info.py\", line 718, in __setitem__\r\n    raise RuntimeError(self._attributes[key])\r\nRuntimeError: events cannot be set directly.\r\n```\r\n\r\n\r\n#### Additional information\r\nPlatform:       Linux-4.19.0-14-amd64-x86_64-with-glibc2.28\r\nPython:         3.9.7 (default, Sep 16 2021, 13:09:58)  [GCC 7.5.0]\r\nExecutable:   .../.local/miniconda3/envs/alphacsc/bin/python\r\nCPU:            : 4 cores\r\nMemory:         Unavailable (requires \"psutil\" package)\r\nmne:            1.0.dev0\r\nnumpy:          1.20.3 {blas=openblas, lapack=openblas}\r\nscipy:          1.7.1\r\nmatplotlib:     3.4.3 {backend=TkAgg}\r\n\r\nsklearn:        1.0.1\r\nnumba:          0.54.1\r\nnibabel:        3.2.1\r\nnilearn:        Not found\r\ndipy:           Not found\r\ncupy:           Not found\r\npandas:         1.3.4\r\npyvista:        Not found\r\npyvistaqt:      Not found\r\nipyvtklink:     Not found\r\nvtk:            Not found\r\nPyQt5:          Not found\r\nipympl:         Not found\r\nmne_qt_browser: Not found\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/9954/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9954/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/9941", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9941/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9941/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9941/events", "html_url": "https://github.com/mne-tools/mne-python/issues/9941", "id": 1042051053, "node_id": "I_kwDOABPcUM4-HG_t", "number": 9941, "title": "Should channel picking remove unused DigPoint from `info['dig']`", "user": {"login": "mscheltienne", "id": 73893616, "node_id": "MDQ6VXNlcjczODkzNjE2", "avatar_url": "https://avatars.githubusercontent.com/u/73893616?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mscheltienne", "html_url": "https://github.com/mscheltienne", "followers_url": "https://api.github.com/users/mscheltienne/followers", "following_url": "https://api.github.com/users/mscheltienne/following{/other_user}", "gists_url": "https://api.github.com/users/mscheltienne/gists{/gist_id}", "starred_url": "https://api.github.com/users/mscheltienne/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mscheltienne/subscriptions", "organizations_url": "https://api.github.com/users/mscheltienne/orgs", "repos_url": "https://api.github.com/users/mscheltienne/repos", "events_url": "https://api.github.com/users/mscheltienne/events{/privacy}", "received_events_url": "https://api.github.com/users/mscheltienne/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2021-11-02T09:08:48Z", "updated_at": "2021-11-02T11:07:47Z", "closed_at": "2021-11-02T11:06:50Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "I don't know if this might have any negative impact somewhere; but I noticed that when you are picking a subset of channels from an instance, and thus removing the others, the DigPoint are not removed from `info['dig']`.\r\n\r\nExample with info:\r\n\r\n```\r\nch_names = make_standard_montage('standard_1020').ch_names\r\ninfo = create_info(ch_names, 512, 'eeg')\r\ninfo.set_montage('standard_1020')\r\ninfo.pick_channels(info.ch_names[:10])\r\n```\r\n-> `info['dig']` shows 94 DigPoint for EEG instead of 10.\r\n\r\nExample with raw:\r\n\r\n```\r\nch_names = make_standard_montage('standard_1020').ch_names\r\nsfreq = 512\r\ndata = np.zeros((len(ch_names), sfreq * 2))\r\nraw = RawArray(data, create_info(ch_names, sfreq, 'eeg'))\r\nraw.set_montage('standard_1020')\r\nraw.pick_channels(raw.ch_names[:10])\r\n```\r\n-> `info['dig']` shows 94 DigPoint for EEG instead of 10.\r\n\r\nIs this intended or should `info['dig']` be updated?", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/9941/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9941/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/9938", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9938/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9938/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9938/events", "html_url": "https://github.com/mne-tools/mne-python/issues/9938", "id": 1041693224, "node_id": "I_kwDOABPcUM4-Fvoo", "number": 9938, "title": "runtime warning in tutorial \"iEEG localize\" breaking docs build", "user": {"login": "drammock", "id": 1810515, "node_id": "MDQ6VXNlcjE4MTA1MTU=", "avatar_url": "https://avatars.githubusercontent.com/u/1810515?v=4", "gravatar_id": "", "url": "https://api.github.com/users/drammock", "html_url": "https://github.com/drammock", "followers_url": "https://api.github.com/users/drammock/followers", "following_url": "https://api.github.com/users/drammock/following{/other_user}", "gists_url": "https://api.github.com/users/drammock/gists{/gist_id}", "starred_url": "https://api.github.com/users/drammock/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/drammock/subscriptions", "organizations_url": "https://api.github.com/users/drammock/orgs", "repos_url": "https://api.github.com/users/drammock/repos", "events_url": "https://api.github.com/users/drammock/events{/privacy}", "received_events_url": "https://api.github.com/users/drammock/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2021-11-01T22:18:32Z", "updated_at": "2021-11-02T14:41:42Z", "closed_at": "2021-11-02T14:41:42Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "@alexrockhill one for you?\r\n\r\n```\r\nTraceback (most recent call last):\r\n  File \"/home/circleci/project/tutorials/clinical/10_ieeg_localize.py\", line 430, in <module>\r\n    montage_warped, elec_image, warped_elec_image = mne.warp_montage_volume(\r\n  File \"<decorator-gen-56>\", line 24, in warp_montage_volume\r\n  File \"/home/circleci/project/mne/surface.py\", line 1902, in warp_montage_volume\r\n    _warn_missing_chs(montage, image_to, after_warp=True)\r\n  File \"/home/circleci/project/mne/surface.py\", line 1747, in _warn_missing_chs\r\n    warn('Channels ' + ', '.join(missing_ch) + ' were not assigned '\r\n  File \"/home/circleci/project/mne/utils/_logging.py\", line 365, in warn\r\n    warnings.warn_explicit(\r\nRuntimeWarning: Channels LAMY 1, LPM 8 were not assigned voxels after applying SDR warp\r\n```\r\n\r\nhttps://app.circleci.com/pipelines/github/mne-tools/mne-python/11144/workflows/f60acec5-586e-4508-a3a3-72ebbced8ce6/jobs/37417\r\n", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/9938/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9938/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/9932", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9932/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9932/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9932/events", "html_url": "https://github.com/mne-tools/mne-python/issues/9932", "id": 1040280771, "node_id": "I_kwDOABPcUM4-AWzD", "number": 9932, "title": "hide_sensors option does not work in mne.viz.snapshot_brain_montage with pyvista backend", "user": {"login": "chapochn", "id": 23103092, "node_id": "MDQ6VXNlcjIzMTAzMDky", "avatar_url": "https://avatars.githubusercontent.com/u/23103092?v=4", "gravatar_id": "", "url": "https://api.github.com/users/chapochn", "html_url": "https://github.com/chapochn", "followers_url": "https://api.github.com/users/chapochn/followers", "following_url": "https://api.github.com/users/chapochn/following{/other_user}", "gists_url": "https://api.github.com/users/chapochn/gists{/gist_id}", "starred_url": "https://api.github.com/users/chapochn/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/chapochn/subscriptions", "organizations_url": "https://api.github.com/users/chapochn/orgs", "repos_url": "https://api.github.com/users/chapochn/repos", "events_url": "https://api.github.com/users/chapochn/events{/privacy}", "received_events_url": "https://api.github.com/users/chapochn/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2021-10-30T19:38:25Z", "updated_at": "2021-11-02T18:40:21Z", "closed_at": "2021-11-02T14:37:44Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "### Describe the bug\r\nThe option hide_sensors does not have any effect in mne.viz.snapshot_brain_montage with the backend pyvista. The sensors are always shown.\r\n\r\n\r\n#### Steps to reproduce\r\nin the tutorial:\r\nhttps://mne.tools/stable/auto_tutorials/clinical/30_ecog.html\r\nup until:\r\n`xy, im = snapshot_brain_montage(fig, raw.info)`\r\n\r\nThe default value of hide_sensors is True, so there should be no sensors in \"im\", and there should be no sensor in this image in the tutorial:\r\nhttps://mne.tools/stable/auto_tutorials/clinical/30_ecog.html#visualize-the-time-evolution-of-the-gamma-power-on-the-brain\r\n\r\n#### Expected results\r\nwith mayavi backend:\r\n```\r\nxy, im = snapshot_brain_montage(fig, raw.info, hide_sensors=True)\r\nplt.imshow(im)\r\nplt.show()\r\n```\r\n<img width=\"274\" alt=\"Screen Shot 2021-10-30 at 3 30 12 PM\" src=\"https://user-images.githubusercontent.com/23103092/139556219-662929e2-bb2d-4853-8bb0-e6f71fbeea38.png\">\r\n\r\ni.e., no sensors\r\n#### Actual results\r\n\r\nwith pyvista backend:\r\n```\r\nxy, im = snapshot_brain_montage(fig, raw.info, hide_sensors=True)\r\nplt.imshow(im)\r\nplt.show()\r\n```\r\n<img width=\"259\" alt=\"Screen Shot 2021-10-30 at 3 28 22 PM\" src=\"https://user-images.githubusercontent.com/23103092/139556187-1aab020a-7644-4264-ada1-a448a73c1832.png\">\r\n\r\ni.e., however, sensors are still there, when they shouldn't\r\n\r\n#### Additional information\r\nPlatform:      macOS-11.6-x86_64-i386-64bit\r\nPython:        3.9.7 | packaged by conda-forge | (default, Sep 29 2021, 20:33:18)  [Clang 11.1.0 ]\r\nExecutable:    /Users/.../opt/anaconda3/envs/mne/bin/python\r\nCPU:           i386: 12 cores\r\nMemory:        16.0 GB\r\n\r\nmne:           0.23.4\r\nnumpy:         1.21.2 {blas=NO_ATLAS_INFO, lapack=lapack}\r\nscipy:         1.7.1\r\nmatplotlib:    3.4.3 {backend=Qt5Agg}\r\n\r\nsklearn:       1.0\r\nnumba:         0.53.1\r\nnibabel:       3.2.1\r\nnilearn:       0.8.1\r\ndipy:          1.3.0\r\ncupy:          Not found\r\npandas:        1.3.4\r\nmayavi:        4.7.2\r\npyvista:       0.32.1 {pyvistaqt=0.5.0, OpenGL 4.1 ATI-4.6.20 via AMD Radeon Pro 560X OpenGL Engine}\r\nvtk:           9.0.3\r\nPyQt5:         5.12.3\r\n", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/9932/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9932/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/9931", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9931/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9931/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9931/events", "html_url": "https://github.com/mne-tools/mne-python/issues/9931", "id": 1040268633, "node_id": "I_kwDOABPcUM4-AT1Z", "number": 9931, "title": "incorrect position of electrodes in mne.viz.snapshot_brain_montage with Mayavi backend", "user": {"login": "chapochn", "id": 23103092, "node_id": "MDQ6VXNlcjIzMTAzMDky", "avatar_url": "https://avatars.githubusercontent.com/u/23103092?v=4", "gravatar_id": "", "url": "https://api.github.com/users/chapochn", "html_url": "https://github.com/chapochn", "followers_url": "https://api.github.com/users/chapochn/followers", "following_url": "https://api.github.com/users/chapochn/following{/other_user}", "gists_url": "https://api.github.com/users/chapochn/gists{/gist_id}", "starred_url": "https://api.github.com/users/chapochn/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/chapochn/subscriptions", "organizations_url": "https://api.github.com/users/chapochn/orgs", "repos_url": "https://api.github.com/users/chapochn/repos", "events_url": "https://api.github.com/users/chapochn/events{/privacy}", "received_events_url": "https://api.github.com/users/chapochn/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2021-10-30T18:34:00Z", "updated_at": "2021-11-02T18:41:36Z", "closed_at": "2021-11-02T14:37:44Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "#### Describe the bug\r\nthe position of the electrodes returned by mne.viz.snapshot_brain_montage is incorrect with the backend Mayavi.\r\n\r\n\r\n#### Steps to reproduce\r\nRun the tutorial:\r\nhttps://mne.tools/stable/auto_tutorials/clinical/30_ecog.html\r\nwith \r\n`mne.viz.set_3d_backend('mayavi')`\r\nin the beginning\r\n\r\n#### Expected results\r\nThe plot as here:\r\nhttps://mne.tools/stable/auto_tutorials/clinical/30_ecog.html#visualize-the-time-evolution-of-the-gamma-power-on-the-brain\r\n![Screen Shot 2021-10-30 at 2 23 40 PM](https://user-images.githubusercontent.com/23103092/139554149-79dd430f-b068-44c8-9062-ddc69e121562.png)\r\n\r\nwith the pyvista backend:\r\n```\r\nxy, im = snapshot_brain_montage(fig, raw.info)\r\nprint(xy)\r\nprint(im.shape)\r\n```\r\n{'G1': array([196., 532.]), 'G2': array([265., 552.]), ...}\r\n(1600, 1600, 3)\r\n\r\n\r\n#### Actual results\r\n<img width=\"421\" alt=\"Screen Shot 2021-10-30 at 2 21 23 PM\" src=\"https://user-images.githubusercontent.com/23103092/139554133-8b4556ce-d09a-4725-8cfa-c548d5afb12a.png\">\r\ni.e., the position of the electrodes are not correct:\r\n\r\n\r\nwith the mayavi backend:\r\n```\r\nxy, im = snapshot_brain_montage(fig, raw.info)\r\nprint(xy)\r\nprint(im.shape)\r\n```\r\n{'G1': array([169.61404592, 284.57703044]), 'G2': array([197.98876477, 291.21935187]), ...}\r\n(1512, 1600, 3)\r\n\r\n\r\n#### Additional information\r\nPlatform:      macOS-11.6-x86_64-i386-64bit\r\nPython:        3.9.7 | packaged by conda-forge | (default, Sep 29 2021, 20:33:18)  [Clang 11.1.0 ]\r\nExecutable:    /Users/.../opt/anaconda3/envs/mne/bin/python\r\nCPU:           i386: 12 cores\r\nMemory:        16.0 GB\r\n\r\nmne:           0.23.4\r\nnumpy:         1.21.2 {blas=NO_ATLAS_INFO, lapack=lapack}\r\nscipy:         1.7.1\r\nmatplotlib:    3.4.3 {backend=Qt5Agg}\r\n\r\nsklearn:       1.0\r\nnumba:         0.53.1\r\nnibabel:       3.2.1\r\nnilearn:       0.8.1\r\ndipy:          1.3.0\r\ncupy:          Not found\r\npandas:        1.3.4\r\nmayavi:        4.7.2\r\npyvista:       0.32.1 {pyvistaqt=0.5.0, OpenGL 4.1 ATI-4.6.20 via AMD Radeon Pro 560X OpenGL Engine}\r\nvtk:           9.0.3\r\nPyQt5:         5.12.3", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/9931/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9931/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/9923", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9923/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9923/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9923/events", "html_url": "https://github.com/mne-tools/mne-python/issues/9923", "id": 1039416057, "node_id": "I_kwDOABPcUM499Dr5", "number": 9923, "title": "viz.plot_compare_evokeds incorrect axis labels", "user": {"login": "c-torre", "id": 48769508, "node_id": "MDQ6VXNlcjQ4NzY5NTA4", "avatar_url": "https://avatars.githubusercontent.com/u/48769508?v=4", "gravatar_id": "", "url": "https://api.github.com/users/c-torre", "html_url": "https://github.com/c-torre", "followers_url": "https://api.github.com/users/c-torre/followers", "following_url": "https://api.github.com/users/c-torre/following{/other_user}", "gists_url": "https://api.github.com/users/c-torre/gists{/gist_id}", "starred_url": "https://api.github.com/users/c-torre/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/c-torre/subscriptions", "organizations_url": "https://api.github.com/users/c-torre/orgs", "repos_url": "https://api.github.com/users/c-torre/repos", "events_url": "https://api.github.com/users/c-torre/events{/privacy}", "received_events_url": "https://api.github.com/users/c-torre/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2021-10-29T10:22:59Z", "updated_at": "2021-12-03T21:47:05Z", "closed_at": "2021-12-03T21:47:05Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Hi, I've started a discussion in the forum that turned out to be a bug.\r\n\r\nPlease see: https://mne.discourse.group/t/misaligned-viz-plot-compare-evokeds/3834\r\n\r\nIn short, as last answer by @drammock summarizes:  \"`plot_compare_evokeds(..., axes='topo')` tries to create an extra axis that shows only the axis spines, ticklabels, and axis labels. It looks like that \u201clegend axis\u201d is getting plotted on top of the axis for P8\"", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/9923/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9923/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/9910", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9910/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9910/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9910/events", "html_url": "https://github.com/mne-tools/mne-python/issues/9910", "id": 1037822103, "node_id": "I_kwDOABPcUM492-iX", "number": 9910, "title": "[BUG] Add Brain.add_sensors doesn't work inexplicably", "user": {"login": "alexrockhill", "id": 13473576, "node_id": "MDQ6VXNlcjEzNDczNTc2", "avatar_url": "https://avatars.githubusercontent.com/u/13473576?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alexrockhill", "html_url": "https://github.com/alexrockhill", "followers_url": "https://api.github.com/users/alexrockhill/followers", "following_url": "https://api.github.com/users/alexrockhill/following{/other_user}", "gists_url": "https://api.github.com/users/alexrockhill/gists{/gist_id}", "starred_url": "https://api.github.com/users/alexrockhill/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alexrockhill/subscriptions", "organizations_url": "https://api.github.com/users/alexrockhill/orgs", "repos_url": "https://api.github.com/users/alexrockhill/repos", "events_url": "https://api.github.com/users/alexrockhill/events{/privacy}", "received_events_url": "https://api.github.com/users/alexrockhill/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2021-10-27T20:16:14Z", "updated_at": "2021-10-28T12:31:10Z", "closed_at": "2021-10-28T12:31:10Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Minimally reproducible example:\r\n\r\n```\r\nimport os.path as op\r\nimport mne\r\nfrom mne.datasets import testing\r\nfrom mne.transforms import apply_trans\r\n\r\ninfo = mne.io.read_info('test_info.fif')\r\n\r\ndata_path = testing.data_path(download=False)\r\nsubjects_dir = op.join(data_path, 'subjects')\r\n\r\ntrans = mne.coreg.estimate_head_mri_t('sample', subjects_dir)\r\nbrain = mne.viz.Brain('sample', surf='inflated', subjects_dir=subjects_dir,\r\n                      cortex='low_contrast', alpha=0.2, background='white')\r\nbrain.add_sensors(info, trans)\r\n\r\nfor ch in info['chs']:\r\n    brain._renderer.sphere(apply_trans(trans, ch['loc'][:3]) * 1000, 'red', 5)\r\n```\r\n\r\n[test_info.zip](https://github.com/mne-tools/mne-python/files/7429061/test_info.zip)\r\n\r\nNothing shows up, I can't figure out why. It works for what seem to be identical infos just with different channel names and locations (3/8 subjects I'm testing have sensors that don't show up but the other 5 work just fine).", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/9910/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9910/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/9895", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9895/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9895/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9895/events", "html_url": "https://github.com/mne-tools/mne-python/issues/9895", "id": 1034182699, "node_id": "I_kwDOABPcUM49pGAr", "number": 9895, "title": "When I read GDF files, NaN values are inconsistently converted.", "user": {"login": "realblack0", "id": 50395556, "node_id": "MDQ6VXNlcjUwMzk1NTU2", "avatar_url": "https://avatars.githubusercontent.com/u/50395556?v=4", "gravatar_id": "", "url": "https://api.github.com/users/realblack0", "html_url": "https://github.com/realblack0", "followers_url": "https://api.github.com/users/realblack0/followers", "following_url": "https://api.github.com/users/realblack0/following{/other_user}", "gists_url": "https://api.github.com/users/realblack0/gists{/gist_id}", "starred_url": "https://api.github.com/users/realblack0/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/realblack0/subscriptions", "organizations_url": "https://api.github.com/users/realblack0/orgs", "repos_url": "https://api.github.com/users/realblack0/repos", "events_url": "https://api.github.com/users/realblack0/events{/privacy}", "received_events_url": "https://api.github.com/users/realblack0/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2021-10-23T14:44:19Z", "updated_at": "2021-10-27T09:27:14Z", "closed_at": "2021-10-27T09:27:14Z", "author_association": "NONE", "active_lock_reason": null, "body": "#### Describe the bug\r\nWhen reading gdf files, NaN values are inconsistently converted.\r\n\r\n#### Steps to reproduce\r\nDataset is from BCI Competition IV dataset 2a (http://www.bbci.de/competition/iv/#dataset2a)\r\n\r\n\r\n#### Expected results\r\nIn matlab:\r\n```matlab\r\n>> [s, h] = sload('A01T.gdf');\r\n>> s(231:240, 1:4)\r\n\r\nans =\r\n\r\n  -94.8242  -82.3730  -85.4980       NaN\r\n       NaN       NaN       NaN       NaN\r\n       NaN       NaN       NaN       NaN\r\n       NaN       NaN       NaN       NaN\r\n       NaN       NaN       NaN       NaN\r\n   74.4629   83.3984   82.1777   65.5762\r\n  -16.1133  -13.0859  -12.9883  -29.5410\r\n   95.5566       NaN   98.0469   90.8691\r\n       NaN       NaN       NaN       NaN\r\n   84.8145   94.2383   88.2324   84.1309\r\n>> s(29684:29686, 1:4)\r\n\r\nans =\r\n\r\n   NaN   NaN   NaN   NaN\r\n   NaN   NaN   NaN   NaN\r\n   NaN   NaN   NaN   NaN\r\n```\r\nI loaded data using BioSig toolbox according to data description (http://www.bbci.de/competition/iv/desc_2a.pdf)\r\n\r\n\r\n#### Actual results\r\n```python\r\n>>> train = mne.io.read_raw_gdf(\"A01T.gdf\")\r\n>>> train_np = train.get_data().T * 1e06 # convert into microvolt\r\n>>> train_np[230:240, 0:4] \r\narray([[ -94.82421875,  -82.37304688,  -85.49804688, -100.        ],\r\n       [-100.        , -100.        , -100.        , -100.        ],\r\n       [-100.        , -100.        , -100.        , -100.        ],\r\n       [-100.        , -100.        , -100.        , -100.        ],\r\n       [-100.        , -100.        , -100.        , -100.        ],\r\n       [  74.46289062,   83.3984375 ,   82.17773438,   65.57617188],\r\n       [ -16.11328125,  -13.0859375 ,  -12.98828125,  -29.54101562],\r\n       [  95.55664062,   99.95117188,   98.046875  ,   90.86914062],\r\n       [  99.95117188,   99.95117188,   99.95117188,   99.95117188],\r\n       [  84.81445312,   94.23828125,   88.23242188,   84.13085937]])\r\n>>> train_np[29683:29686, 0:4] \r\narray([[-1600., -1600., -1600., -1600.],\r\n       [-1600., -1600., -1600., -1600.],\r\n       [-1600., -1600., -1600., -1600.]])\r\n```\r\nNaN values are converted into -100.,  99.95117188 or -1600. .\r\n\r\n#### Additional information\r\n```python\r\n>>> mne.sys_info()\r\nPlatform:      Linux-5.4.0-86-generic-x86_64-with-glibc2.10\r\nPython:        3.8.5 (default, Sep  4 2020, 07:30:14)  [GCC 7.3.0]\r\nExecutable:    /home/jinhyo/anaconda3/bin/python\r\nCPU:           x86_64: 40 cores\r\nMemory:        251.6 GB\r\n\r\nmne:           0.23.3\r\nnumpy:         1.21.2 {blas=openblas, lapack=openblas}\r\nscipy:         1.5.2\r\nmatplotlib:    3.3.2 {backend=module://ipykernel.pylab.backend_inline}\r\n\r\nsklearn:       0.23.2\r\nnumba:         0.51.2\r\nnibabel:       Not found\r\nnilearn:       Not found\r\ndipy:          Not found\r\ncupy:          Not found\r\npandas:        1.1.3\r\nmayavi:        Not found\r\npyvista:       Not found\r\nvtk:           Not found\r\n```\r\n", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/9895/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9895/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/9879", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9879/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9879/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9879/events", "html_url": "https://github.com/mne-tools/mne-python/issues/9879", "id": 1031175836, "node_id": "I_kwDOABPcUM49dn6c", "number": 9879, "title": "info['hpi_results'] gets set, is not used, and is then replaced with None.", "user": {"login": "mscheltienne", "id": 73893616, "node_id": "MDQ6VXNlcjczODkzNjE2", "avatar_url": "https://avatars.githubusercontent.com/u/73893616?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mscheltienne", "html_url": "https://github.com/mscheltienne", "followers_url": "https://api.github.com/users/mscheltienne/followers", "following_url": "https://api.github.com/users/mscheltienne/following{/other_user}", "gists_url": "https://api.github.com/users/mscheltienne/gists{/gist_id}", "starred_url": "https://api.github.com/users/mscheltienne/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mscheltienne/subscriptions", "organizations_url": "https://api.github.com/users/mscheltienne/orgs", "repos_url": "https://api.github.com/users/mscheltienne/repos", "events_url": "https://api.github.com/users/mscheltienne/events{/privacy}", "received_events_url": "https://api.github.com/users/mscheltienne/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2021-10-20T09:21:32Z", "updated_at": "2021-10-22T16:23:03Z", "closed_at": "2021-10-22T16:23:03Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "While fixing tests for #9867, I found this code snippet:\r\nhttps://github.com/mne-tools/mne-python/blob/main/mne/io/artemis123/artemis123.py#L341-L352\r\n\r\nDoes it looks correct to you? \r\n- `info['hpi_results']` is set line 342. \r\n- `self.info` is used line 351. \r\n- `info['hpi_results']` is replaced with `None` line 352.", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/9879/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9879/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/9870", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9870/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9870/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9870/events", "html_url": "https://github.com/mne-tools/mne-python/issues/9870", "id": 1030167151, "node_id": "I_kwDOABPcUM49Zxpv", "number": 9870, "title": "Epochs.plot_psd_topomap() doesn't apply unit scaling", "user": {"login": "hoechenberger", "id": 2046265, "node_id": "MDQ6VXNlcjIwNDYyNjU=", "avatar_url": "https://avatars.githubusercontent.com/u/2046265?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hoechenberger", "html_url": "https://github.com/hoechenberger", "followers_url": "https://api.github.com/users/hoechenberger/followers", "following_url": "https://api.github.com/users/hoechenberger/following{/other_user}", "gists_url": "https://api.github.com/users/hoechenberger/gists{/gist_id}", "starred_url": "https://api.github.com/users/hoechenberger/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hoechenberger/subscriptions", "organizations_url": "https://api.github.com/users/hoechenberger/orgs", "repos_url": "https://api.github.com/users/hoechenberger/repos", "events_url": "https://api.github.com/users/hoechenberger/events{/privacy}", "received_events_url": "https://api.github.com/users/hoechenberger/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "hoechenberger", "id": 2046265, "node_id": "MDQ6VXNlcjIwNDYyNjU=", "avatar_url": "https://avatars.githubusercontent.com/u/2046265?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hoechenberger", "html_url": "https://github.com/hoechenberger", "followers_url": "https://api.github.com/users/hoechenberger/followers", "following_url": "https://api.github.com/users/hoechenberger/following{/other_user}", "gists_url": "https://api.github.com/users/hoechenberger/gists{/gist_id}", "starred_url": "https://api.github.com/users/hoechenberger/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hoechenberger/subscriptions", "organizations_url": "https://api.github.com/users/hoechenberger/orgs", "repos_url": "https://api.github.com/users/hoechenberger/repos", "events_url": "https://api.github.com/users/hoechenberger/events{/privacy}", "received_events_url": "https://api.github.com/users/hoechenberger/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "hoechenberger", "id": 2046265, "node_id": "MDQ6VXNlcjIwNDYyNjU=", "avatar_url": "https://avatars.githubusercontent.com/u/2046265?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hoechenberger", "html_url": "https://github.com/hoechenberger", "followers_url": "https://api.github.com/users/hoechenberger/followers", "following_url": "https://api.github.com/users/hoechenberger/following{/other_user}", "gists_url": "https://api.github.com/users/hoechenberger/gists{/gist_id}", "starred_url": "https://api.github.com/users/hoechenberger/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hoechenberger/subscriptions", "organizations_url": "https://api.github.com/users/hoechenberger/orgs", "repos_url": "https://api.github.com/users/hoechenberger/repos", "events_url": "https://api.github.com/users/hoechenberger/events{/privacy}", "received_events_url": "https://api.github.com/users/hoechenberger/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/mne-tools/mne-python/milestones/20", "html_url": "https://github.com/mne-tools/mne-python/milestone/20", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/milestones/20/labels", "id": 6675015, "node_id": "MDk6TWlsZXN0b25lNjY3NTAxNQ==", "number": 20, "title": "0.24", "description": "", "creator": {"login": "larsoner", "id": 2365790, "node_id": "MDQ6VXNlcjIzNjU3OTA=", "avatar_url": "https://avatars.githubusercontent.com/u/2365790?v=4", "gravatar_id": "", "url": "https://api.github.com/users/larsoner", "html_url": "https://github.com/larsoner", "followers_url": "https://api.github.com/users/larsoner/followers", "following_url": "https://api.github.com/users/larsoner/following{/other_user}", "gists_url": "https://api.github.com/users/larsoner/gists{/gist_id}", "starred_url": "https://api.github.com/users/larsoner/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/larsoner/subscriptions", "organizations_url": "https://api.github.com/users/larsoner/orgs", "repos_url": "https://api.github.com/users/larsoner/repos", "events_url": "https://api.github.com/users/larsoner/events{/privacy}", "received_events_url": "https://api.github.com/users/larsoner/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 53, "state": "closed", "created_at": "2021-04-19T12:32:46Z", "updated_at": "2021-11-03T16:14:55Z", "due_on": "2021-11-01T07:00:00Z", "closed_at": "2021-11-03T16:14:55Z"}, "comments": 12, "created_at": "2021-10-19T11:05:08Z", "updated_at": "2021-10-20T17:01:27Z", "closed_at": "2021-10-20T06:23:34Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "`Epochs.plot_psd` does scale the measurement units while `Epochs.plot_psd_topomap` doesn't, [causing confusion](https://mne.discourse.group/t/psd-different-units/3809/15)\r\n\r\n```python\r\nimport os.path as op\r\nimport mne\r\nfrom mne.datasets import somato\r\n\r\ndata_path = somato.data_path()\r\nsubject = '01'\r\ntask = 'somato'\r\nraw_fname = op.join(data_path, 'sub-{}'.format(subject), 'meg',\r\n                    'sub-{}_task-{}_meg.fif'.format(subject, task))\r\n\r\nraw = mne.io.read_raw_fif(raw_fname)\r\nevents = mne.find_events(raw, stim_channel='STI 014')\r\n\r\npicks = mne.pick_types(raw.info, meg='grad', eeg=False, eog=True, stim=False)\r\nevent_id, tmin, tmax = 1, -1., 3.\r\nbaseline = (None, 0)\r\nepochs = mne.Epochs(raw, events, event_id, tmin, tmax, picks=picks,\r\n                    baseline=baseline, reject=dict(grad=4000e-13, eog=350e-6),\r\n                    preload=True)\r\n\r\nepochs.resample(200., npad='auto')  # resample to reduce computation time\r\n\r\nfmin = 0.1\r\nfmax = 40\r\n\r\nepochs.plot_psd(fmin=fmin, fmax=fmax, average=True, dB=True, area_mode=None)\r\nepochs.plot_psd_topomap(dB=True)\r\n```\r\n\r\n![a](https://user-images.githubusercontent.com/2046265/137897334-aa71a546-e7b2-4086-9d7c-d516b4b0f4ec.png)\r\n\r\n![b](https://user-images.githubusercontent.com/2046265/137897379-9d64af29-1670-4201-9624-db696d707739.png)\r\n\r\nThe displayed data  have a scale difference of precisely 13 orders of magnitude.\r\n\r\ncc @cbrnr @guiomar", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/9870/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9870/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/9865", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9865/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9865/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9865/events", "html_url": "https://github.com/mne-tools/mne-python/issues/9865", "id": 1028084638, "node_id": "I_kwDOABPcUM49R1Oe", "number": 9865, "title": "Bug in _repr_html_ for raw objects generated with RawArray", "user": {"login": "christian-oreilly", "id": 5932954, "node_id": "MDQ6VXNlcjU5MzI5NTQ=", "avatar_url": "https://avatars.githubusercontent.com/u/5932954?v=4", "gravatar_id": "", "url": "https://api.github.com/users/christian-oreilly", "html_url": "https://github.com/christian-oreilly", "followers_url": "https://api.github.com/users/christian-oreilly/followers", "following_url": "https://api.github.com/users/christian-oreilly/following{/other_user}", "gists_url": "https://api.github.com/users/christian-oreilly/gists{/gist_id}", "starred_url": "https://api.github.com/users/christian-oreilly/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/christian-oreilly/subscriptions", "organizations_url": "https://api.github.com/users/christian-oreilly/orgs", "repos_url": "https://api.github.com/users/christian-oreilly/repos", "events_url": "https://api.github.com/users/christian-oreilly/events{/privacy}", "received_events_url": "https://api.github.com/users/christian-oreilly/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2021-10-16T16:07:13Z", "updated_at": "2021-10-30T00:44:59Z", "closed_at": "2021-10-26T16:10:01Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "\r\n#### Describe the bug\r\n`Raw` objects generated by `RawArray` calls have `raw._filenames` initiated to `[None]` which causes MNE to crash when calling `_repr_html_` on such Raw objects. Using `\"\"` instead of `None` would solve this issue (not sure if that might not create other side effects, but setting `raw._filenames = [\"\"]` explicitly works for me.\r\n\r\n#### Steps to reproduce\r\nIn a notebook:\r\n\r\n```python\r\nimport mne\r\nimport numpy as np\r\n\r\nsamp_freq = 500  # Hz\r\nduration = 10  # s\r\nnb_channels = 128\r\nfake_eeg = np.random.rand(nb_channels, samp_freq*duration)  # fake data\r\nch_channels = [f\"E{no_ch}\" for no_ch in range(128)]\r\ninfo = mne.create_info(ch_channels, samp_freq, ch_types='eeg')\r\nraw = mne.io.RawArray(fake_eeg, info)\r\nprint(raw._filenames)\r\nraw\r\n```\r\n (Can also be reproduced outside of a notebook context by calling explicitly `raw._repr_html_()`)\r\n\r\n\r\n\r\n#### Actual results\r\n```\r\nCreating RawArray with float64 data, n_channels=128, n_times=5000\r\n    Range : 0 ... 4999 =      0.000 ...     9.998 secs\r\nReady.\r\n[None]\r\n---------------------------------------------------------------------------\r\nTypeError                                 Traceback (most recent call last)\r\n~/opt/anaconda3/lib/python3.8/site-packages/IPython/core/formatters.py in __call__(self, obj)\r\n    343             method = get_real_method(obj, self.print_method)\r\n    344             if method is not None:\r\n--> 345                 return method()\r\n    346             return None\r\n    347         else:\r\n\r\n~/opt/anaconda3/lib/python3.8/site-packages/mne/io/base.py in _repr_html_(self, caption)\r\n   1761 \r\n   1762     def _repr_html_(self, caption=None):\r\n-> 1763         basenames = [os.path.basename(f) for f in self._filenames]\r\n   1764         m, s = divmod(self._last_time - self.first_time, 60)\r\n   1765         h, m = divmod(m, 60)\r\n\r\n~/opt/anaconda3/lib/python3.8/site-packages/mne/io/base.py in <listcomp>(.0)\r\n   1761 \r\n   1762     def _repr_html_(self, caption=None):\r\n-> 1763         basenames = [os.path.basename(f) for f in self._filenames]\r\n   1764         m, s = divmod(self._last_time - self.first_time, 60)\r\n   1765         h, m = divmod(m, 60)\r\n\r\n~/opt/anaconda3/lib/python3.8/posixpath.py in basename(p)\r\n    140 def basename(p):\r\n    141     \"\"\"Returns the final component of a pathname\"\"\"\r\n--> 142     p = os.fspath(p)\r\n    143     sep = _get_sep(p)\r\n    144     i = p.rfind(sep) + 1\r\n\r\nTypeError: expected str, bytes or os.PathLike object, not NoneType\r\n```\r\n\r\n\r\n#### Additional information\r\n\r\nPlatform:      macOS-10.16-x86_64-i386-64bit\r\nPython:        3.8.8 (default, Apr 13 2021, 12:59:45)  [Clang 10.0.0 ]\r\nExecutable:    /Users/christianoreilly/opt/anaconda3/bin/python\r\nCPU:           i386: 16 cores\r\nMemory:        64.0 GB\r\n\r\nmne:           0.23.4\r\nnumpy:         1.19.2 {blas=mkl_rt, lapack=mkl_rt}\r\nscipy:         1.6.2\r\nmatplotlib:    3.4.2 {backend=module://matplotlib_inline.backend_inline}\r\n\r\nsklearn:       0.24.2\r\nnumba:         0.53.0\r\nnibabel:       3.2.1\r\nnilearn:       Not found\r\ndipy:          Not found\r\ncupy:          Not found\r\npandas:        1.3.2\r\nmayavi:        Not found\r\npyvista:       Not found\r\nvtk:           Not found\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/9865/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9865/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/9850", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9850/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9850/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9850/events", "html_url": "https://github.com/mne-tools/mne-python/issues/9850", "id": 1026520581, "node_id": "I_kwDOABPcUM49L3YF", "number": 9850, "title": "make_fixed_length_epochs drops existing events inside Raw?", "user": {"login": "adam2392", "id": 3460267, "node_id": "MDQ6VXNlcjM0NjAyNjc=", "avatar_url": "https://avatars.githubusercontent.com/u/3460267?v=4", "gravatar_id": "", "url": "https://api.github.com/users/adam2392", "html_url": "https://github.com/adam2392", "followers_url": "https://api.github.com/users/adam2392/followers", "following_url": "https://api.github.com/users/adam2392/following{/other_user}", "gists_url": "https://api.github.com/users/adam2392/gists{/gist_id}", "starred_url": "https://api.github.com/users/adam2392/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/adam2392/subscriptions", "organizations_url": "https://api.github.com/users/adam2392/orgs", "repos_url": "https://api.github.com/users/adam2392/repos", "events_url": "https://api.github.com/users/adam2392/events{/privacy}", "received_events_url": "https://api.github.com/users/adam2392/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2021-10-14T15:12:39Z", "updated_at": "2021-10-14T19:23:13Z", "closed_at": "2021-10-14T19:23:13Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "#### Describe the bug\r\nI'm trying to build an Epochs array that has events carried over from Raw. However, when I inspect the events, they are dropped?\r\n\r\nSo say I have a recording (3, 100) with sfreq of 5 and events marked across the EEG, say:\r\n- \"test1\" at onset=1\r\n- \"test2\" at onset=1.5\r\n\r\nThen I want to create an Epochs structure with duration of 10, which would go from `(3, 100) -> (2, 3, 50)`. It seems that `make_fixed_length_epochs` will make two additional events to store the epochs. However, shouldn't I be able to view that `test1` and `test2` are within epoch 1, at sample 5 and 7?\r\n\r\n#### Steps to reproduce\r\n```Python\r\n    sfreq = 50.\r\n    n_signals = 3\r\n    n_epochs = 10\r\n    n_times = 500\r\n    rng = np.random.RandomState(42)\r\n    data = rng.randn(n_signals, n_epochs * n_times)\r\n\r\n    # create Epochs\r\n    info = create_info(np.arange(n_signals).astype(str).tolist(), sfreq=sfreq,\r\n                       ch_types='eeg')\r\n    onset = [0, 0.5, 3]\r\n    duration = [0, 0, 0]\r\n    description = ['test1', 'test2', 'test3']\r\n    annots = Annotations(onset=onset, duration=duration, description=description)\r\n    raw = RawArray(data, info)\r\n    raw = raw.set_annotations(annots)\r\n    epochs = make_fixed_length_epochs(raw, duration=10, preload=True)\r\n    assert len(epochs) == n_epochs\r\n    print(epochs)\r\n    print(epochs.events)\r\n```\r\n#### Expected results\r\nInside `make_fixed_length_epochs`, shouldn't it check for existing events too?\r\n\r\n#### Actual results\r\n```\r\n<Epochs |  10 events (all good), 0 - 9.98 sec, baseline off, ~125 kB, data loaded,\r\n '1': 10>\r\n[[   0    0    1]\r\n [ 500    0    1]\r\n [1000    0    1]\r\n [1500    0    1]\r\n [2000    0    1]\r\n [2500    0    1]\r\n [3000    0    1]\r\n [3500    0    1]\r\n [4000    0    1]\r\n [4500    0    1]]\r\n```\r\n\r\n\r\n#### Additional information\r\n```\r\n(mnex64) adam2392@Adams-MBP-2 mne-connectivity % mne sys_info\r\nPlatform:      macOS-10.16-x86_64-i386-64bit\r\nPython:        3.8.10 | packaged by conda-forge | (default, May 10 2021, 22:58:09)  [Clang 11.1.0 ]\r\nExecutable:    /Users/adam2392/miniconda3/envs/mnex64/bin/python3.8\r\nCPU:           i386: 8 cores\r\nMemory:        16.0 GB\r\n\r\nmne:           0.24.dev0\r\nnumpy:         1.21.2 {blas=NO_ATLAS_INFO, lapack=lapack}\r\nscipy:         1.7.1\r\nmatplotlib:    3.4.3 {backend=MacOSX}\r\n\r\nsklearn:       1.0\r\nnumba:         0.53.1\r\nnibabel:       3.2.1\r\nnilearn:       0.8.0\r\ndipy:          1.4.1\r\ncupy:          Not found\r\npandas:        1.3.2\r\nmayavi:        4.7.2\r\npyvista:       0.31.3 {pyvistaqt=0.5.0, OpenGL 4.1 Metal - 71.7.1 via Apple M1}\r\nvtk:           9.0.1\r\nPyQt5:         5.12.3\r\npooch:         v1.5.1\r\n```\r\n", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/9850/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9850/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/9849", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9849/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9849/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9849/events", "html_url": "https://github.com/mne-tools/mne-python/issues/9849", "id": 1026479679, "node_id": "I_kwDOABPcUM49LtY_", "number": 9849, "title": "`mne.time_frequency.psd_welch` does not support negative numbers for `n_jobs` parameter.", "user": {"login": "Riessarius", "id": 20852846, "node_id": "MDQ6VXNlcjIwODUyODQ2", "avatar_url": "https://avatars.githubusercontent.com/u/20852846?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Riessarius", "html_url": "https://github.com/Riessarius", "followers_url": "https://api.github.com/users/Riessarius/followers", "following_url": "https://api.github.com/users/Riessarius/following{/other_user}", "gists_url": "https://api.github.com/users/Riessarius/gists{/gist_id}", "starred_url": "https://api.github.com/users/Riessarius/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Riessarius/subscriptions", "organizations_url": "https://api.github.com/users/Riessarius/orgs", "repos_url": "https://api.github.com/users/Riessarius/repos", "events_url": "https://api.github.com/users/Riessarius/events{/privacy}", "received_events_url": "https://api.github.com/users/Riessarius/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 7, "created_at": "2021-10-14T14:36:52Z", "updated_at": "2021-10-18T15:15:24Z", "closed_at": "2021-10-18T15:15:24Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Since it should be a rather unambiguous phenomenon, so please allow me to describe the bug without your recommended format.\r\n\r\nNegative numbers like -1 cannot be used for `n_jobs` in the function `psd_welch` under the module `mne.time_frequency`, which fails to enable users to adaptively activate all cores when calling this function, unlike those functions (such as `plot_psd`) that allows -1 for `n_jobs` in MNE.", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/9849/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9849/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/9832", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9832/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9832/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9832/events", "html_url": "https://github.com/mne-tools/mne-python/issues/9832", "id": 1023673149, "node_id": "I_kwDOABPcUM49BAM9", "number": 9832, "title": "Figures show up twice in notebooks", "user": {"login": "cbrnr", "id": 4377312, "node_id": "MDQ6VXNlcjQzNzczMTI=", "avatar_url": "https://avatars.githubusercontent.com/u/4377312?v=4", "gravatar_id": "", "url": "https://api.github.com/users/cbrnr", "html_url": "https://github.com/cbrnr", "followers_url": "https://api.github.com/users/cbrnr/followers", "following_url": "https://api.github.com/users/cbrnr/following{/other_user}", "gists_url": "https://api.github.com/users/cbrnr/gists{/gist_id}", "starred_url": "https://api.github.com/users/cbrnr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/cbrnr/subscriptions", "organizations_url": "https://api.github.com/users/cbrnr/orgs", "repos_url": "https://api.github.com/users/cbrnr/repos", "events_url": "https://api.github.com/users/cbrnr/events{/privacy}", "received_events_url": "https://api.github.com/users/cbrnr/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 11, "created_at": "2021-10-12T10:52:43Z", "updated_at": "2021-10-12T14:23:42Z", "closed_at": "2021-10-12T14:23:42Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Figures in a notebook show up twice, for example:\r\n<img width=\"658\" alt=\"Screen Shot 2021-10-12 at 10 22 52\" src=\"https://user-images.githubusercontent.com/4377312/136942665-82385dc5-47d8-4fe4-9417-ad8eb19f504b.png\">\r\n\r\nIt looks like setting `show=False` does not have any effect here. Any ideas why this is the case and how to fix that?", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/9832/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9832/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/9812", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9812/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9812/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9812/events", "html_url": "https://github.com/mne-tools/mne-python/issues/9812", "id": 1019906610, "node_id": "I_kwDOABPcUM48yooy", "number": 9812, "title": "BUG: _plot_mri_contours makes too many figures", "user": {"login": "larsoner", "id": 2365790, "node_id": "MDQ6VXNlcjIzNjU3OTA=", "avatar_url": "https://avatars.githubusercontent.com/u/2365790?v=4", "gravatar_id": "", "url": "https://api.github.com/users/larsoner", "html_url": "https://github.com/larsoner", "followers_url": "https://api.github.com/users/larsoner/followers", "following_url": "https://api.github.com/users/larsoner/following{/other_user}", "gists_url": "https://api.github.com/users/larsoner/gists{/gist_id}", "starred_url": "https://api.github.com/users/larsoner/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/larsoner/subscriptions", "organizations_url": "https://api.github.com/users/larsoner/orgs", "repos_url": "https://api.github.com/users/larsoner/repos", "events_url": "https://api.github.com/users/larsoner/events{/privacy}", "received_events_url": "https://api.github.com/users/larsoner/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "hoechenberger", "id": 2046265, "node_id": "MDQ6VXNlcjIwNDYyNjU=", "avatar_url": "https://avatars.githubusercontent.com/u/2046265?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hoechenberger", "html_url": "https://github.com/hoechenberger", "followers_url": "https://api.github.com/users/hoechenberger/followers", "following_url": "https://api.github.com/users/hoechenberger/following{/other_user}", "gists_url": "https://api.github.com/users/hoechenberger/gists{/gist_id}", "starred_url": "https://api.github.com/users/hoechenberger/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hoechenberger/subscriptions", "organizations_url": "https://api.github.com/users/hoechenberger/orgs", "repos_url": "https://api.github.com/users/hoechenberger/repos", "events_url": "https://api.github.com/users/hoechenberger/events{/privacy}", "received_events_url": "https://api.github.com/users/hoechenberger/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "hoechenberger", "id": 2046265, "node_id": "MDQ6VXNlcjIwNDYyNjU=", "avatar_url": "https://avatars.githubusercontent.com/u/2046265?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hoechenberger", "html_url": "https://github.com/hoechenberger", "followers_url": "https://api.github.com/users/hoechenberger/followers", "following_url": "https://api.github.com/users/hoechenberger/following{/other_user}", "gists_url": "https://api.github.com/users/hoechenberger/gists{/gist_id}", "starred_url": "https://api.github.com/users/hoechenberger/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hoechenberger/subscriptions", "organizations_url": "https://api.github.com/users/hoechenberger/orgs", "repos_url": "https://api.github.com/users/hoechenberger/repos", "events_url": "https://api.github.com/users/hoechenberger/events{/privacy}", "received_events_url": "https://api.github.com/users/hoechenberger/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 2, "created_at": "2021-10-07T11:00:06Z", "updated_at": "2021-10-08T14:44:39Z", "closed_at": "2021-10-08T14:44:39Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "@hoechenberger it looks like https://github.com/mne-tools/mne-python/pull/9754/files#r719376494 was never actually addressed in #9754 unless I'm missing it somehow in the diff?", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/9812/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9812/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/9811", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9811/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9811/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9811/events", "html_url": "https://github.com/mne-tools/mne-python/issues/9811", "id": 1018913569, "node_id": "I_kwDOABPcUM48u2Mh", "number": 9811, "title": "read_raw_edf fails if excluding all the signal channels", "user": {"login": "laemtl", "id": 32041423, "node_id": "MDQ6VXNlcjMyMDQxNDIz", "avatar_url": "https://avatars.githubusercontent.com/u/32041423?v=4", "gravatar_id": "", "url": "https://api.github.com/users/laemtl", "html_url": "https://github.com/laemtl", "followers_url": "https://api.github.com/users/laemtl/followers", "following_url": "https://api.github.com/users/laemtl/following{/other_user}", "gists_url": "https://api.github.com/users/laemtl/gists{/gist_id}", "starred_url": "https://api.github.com/users/laemtl/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/laemtl/subscriptions", "organizations_url": "https://api.github.com/users/laemtl/orgs", "repos_url": "https://api.github.com/users/laemtl/repos", "events_url": "https://api.github.com/users/laemtl/events{/privacy}", "received_events_url": "https://api.github.com/users/laemtl/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 10, "created_at": "2021-10-06T18:17:46Z", "updated_at": "2021-10-12T16:42:18Z", "closed_at": "2021-10-12T16:42:18Z", "author_association": "NONE", "active_lock_reason": null, "body": "#### Describe the bug\r\nWhen calling read_raw_edf(path, exclude=exclude, preload=False), if exclude contains all channels but stim ones, \r\nthe call fails \r\n\r\n```\r\n  File \"/data/loris-mri/bin/mri/python_virtualenvs/loris-mri-python/lib/python3.7/site-packages/mne/io/edf/edf.py\", line 433, in _get_info\r\n    edf_info['record_length'][1] / edf_info['record_length'][0]\r\n  File \"/data/loris-mri/bin/mri/python_virtualenvs/loris-mri-python/lib/python3.7/site-packages/numpy/core/_methods.py\", line 40, in _amax\r\n    return umr_maximum(a, axis, None, out, keepdims, initial, where)\r\nValueError: zero-size array to reduction operation maximum which has no identity\r\n\r\n```\r\nIn mne/io/edf/edf.py::_get_info\r\n```\r\nsfreq = np.take(n_samps, not_stim_ch).max() * \\\r\n        edf_info['record_length'][1] / edf_info['record_length'][0]\r\n\r\n```\r\nnp.take(n_samps, not_stim_ch) returns an empty list and .max() is failing.\r\n\r\n#### Steps to reproduce\r\nCalling read_raw_edf(path, exclude=exclude, preload=False), with exclude set to all channels but stim ones \r\n\r\n#### Expected results\r\nAvoid the ValueError and report the absence of data/signal channels to the user\r\n\r\n#### Actual results\r\nValueError: zero-size array to reduction operation maximum which has no identity\r\n", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/9811/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9811/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/9806", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9806/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9806/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9806/events", "html_url": "https://github.com/mne-tools/mne-python/issues/9806", "id": 1016095724, "node_id": "I_kwDOABPcUM48kGPs", "number": 9806, "title": "mne.datasets.fetch_data returns error when the data is already downloaded ", "user": {"login": "hndgzkn", "id": 2099645, "node_id": "MDQ6VXNlcjIwOTk2NDU=", "avatar_url": "https://avatars.githubusercontent.com/u/2099645?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hndgzkn", "html_url": "https://github.com/hndgzkn", "followers_url": "https://api.github.com/users/hndgzkn/followers", "following_url": "https://api.github.com/users/hndgzkn/following{/other_user}", "gists_url": "https://api.github.com/users/hndgzkn/gists{/gist_id}", "starred_url": "https://api.github.com/users/hndgzkn/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hndgzkn/subscriptions", "organizations_url": "https://api.github.com/users/hndgzkn/orgs", "repos_url": "https://api.github.com/users/hndgzkn/repos", "events_url": "https://api.github.com/users/hndgzkn/events{/privacy}", "received_events_url": "https://api.github.com/users/hndgzkn/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2021-10-05T09:29:04Z", "updated_at": "2021-10-05T17:12:02Z", "closed_at": "2021-10-05T17:12:02Z", "author_association": "NONE", "active_lock_reason": null, "body": "#### Describe the bug\r\nWhen I try to download a file already downloaded with mne.datasets.fetch_dataset, and set `force_update=False`, I get the following error:\r\n\r\n```\r\n  File \".../python3.9/site-packages/mne/datasets/_fetch.py\", line 194, in fetch_dataset\r\n    _do_path_update(path, update_path, config_key, name)\r\n  File \".../python3.9/site-packages/mne/datasets/utils.py\", line 142, in _do_path_update\r\n    set_config(key, path, set_env=False)\r\n  File \".../python3.9/site-packages/mne/utils/config.py\", line 273, in set_config\r\n    _validate_type(key, 'str', \"key\")\r\n  File \".../python3.9/site-packages/mne/utils/check.py\", line 419, in _validate_type\r\n    raise TypeError(f\"{_item_name} must be an instance of {type_name}, \"\r\nTypeError: key must be an instance of str, got <class 'NoneType'> instead.\r\n```\r\nWith `false_update=True`, there is no problem.\r\n\r\n#### Steps to reproduce\r\n```\r\nfrom mne.datasets import fetch_dataset\r\n\r\nfetch_dataset(\r\n    {\"dataset_name\": \"LFP_data\",\r\n     \"url\": \"https://github.com/hitziger/AWL/raw/master/Experiments/data/LFP_data_contiguous_1250_Hz.mat\",\r\n     \"archive_name\": \"LFP_data_contiguous_1250_Hz.mat\",\r\n     \"folder_name\": \"LFP\",\r\n     \"hash\": None\r\n    },\r\n    path=None,\r\n    force_update=False\r\n)\r\n```\r\n\r\n#### Additional information\r\n```\r\nPlatform:      Linux-4.19.0-14-amd64-x86_64-with-glibc2.28\r\nPython:        3.9.7 (default, Sep 16 2021, 13:09:58)  [GCC 7.5.0]\r\nExecutable:    .../bin/python\r\nmne:           0.24.dev0\r\nnumpy:         1.20.3 {blas=openblas, lapack=openblas}\r\nscipy:         1.7.1\r\nmatplotlib:    3.4.3 {backend=TkAgg}\r\n\r\nsklearn:       1.0\r\nnumba:         0.54.0\r\nnibabel:       3.2.1\r\nnilearn:       Not found\r\ndipy:          Not found\r\ncupy:          Not found\r\npandas:        Not found\r\nmayavi:        Not found\r\npyvista:       Not found\r\nvtk:           Not found\r\npooch:         v1.5.1\r\n```\r\n", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/9806/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9806/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/9798", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9798/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9798/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9798/events", "html_url": "https://github.com/mne-tools/mne-python/issues/9798", "id": 1013378229, "node_id": "I_kwDOABPcUM48Zuy1", "number": 9798, "title": "pytest fails to load pooch in developer setup", "user": {"login": "jbteves", "id": 26722533, "node_id": "MDQ6VXNlcjI2NzIyNTMz", "avatar_url": "https://avatars.githubusercontent.com/u/26722533?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jbteves", "html_url": "https://github.com/jbteves", "followers_url": "https://api.github.com/users/jbteves/followers", "following_url": "https://api.github.com/users/jbteves/following{/other_user}", "gists_url": "https://api.github.com/users/jbteves/gists{/gist_id}", "starred_url": "https://api.github.com/users/jbteves/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jbteves/subscriptions", "organizations_url": "https://api.github.com/users/jbteves/orgs", "repos_url": "https://api.github.com/users/jbteves/repos", "events_url": "https://api.github.com/users/jbteves/events{/privacy}", "received_events_url": "https://api.github.com/users/jbteves/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2021-10-01T13:54:50Z", "updated_at": "2021-10-12T21:41:23Z", "closed_at": "2021-10-12T21:41:23Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "#### Describe the bug\r\nThe following Traceback is obtained when attempting to run any form of pytest, such as `pytest mne/tests` from the project root directory, when the current `main` is cloned on my system with the recommended YML-based environment creation and an editable pip install, with all requirements satisfied.\r\n```\r\nImportError while loading conftest '/Users/tevesjb/repositories/mne-python/mne/conftest.py'.\r\nmne/conftest.py:31: in <module>\r\n    test_path = testing.data_path(download=False)\r\nmne/datasets/testing/_testing.py:22: in data_path\r\n    return _data_path(path=path, force_update=force_update,\r\nmne/datasets/utils.py:213: in _data_path\r\n    pooch = _soft_import('pooch', 'dataset downloading', strict=True)\r\nmne/utils/check.py:273: in _soft_import\r\n    raise RuntimeError(f'For {purpose} to work, the {name} module is '\r\nE   RuntimeError: For dataset downloading to work, the pooch module is needed, but it could not be imported.\r\n```\r\n\r\n#### Steps to reproduce\r\n`pooch` is available in the environment that the test is being run from:\r\n```python\r\n>>> import pooch\r\n>>> pooch.__version__\r\n'v1.5.1'\r\n```\r\nJust as bizarrely, if I use the same facility as `check.py`, the load is successful:\r\n```python\r\n>>> import mne\r\n>>> from mne.utils.check import _soft_import\r\n>>> p = _soft_import('pooch', 'dataset downloading', strict=True)\r\n>>> print(p)\r\n<module 'pooch' from '/Users/tevesjb/miniconda3/envs/mne-dev/lib/python3.9/site-packages/pooch/__init__.py'>\r\n```\r\nHowever, running pytest triggers the above RuntimeError and traceback, regardless of which test (presumably because the error occurs in test configuration).\r\n\r\n\r\n#### Expected results\r\nThe tests at least run, even if they fail.\r\n\r\n\r\n#### Actual results\r\nThe test configuration fails, so I can't even use the debugger via `pytest --trace`.\r\n\r\n\r\n#### Additional information\r\n```\r\nPlatform:      macOS-10.15.7-x86_64-i386-64bit\r\nPython:        3.9.7 | packaged by conda-forge | (default, Sep 23 2021, 07:31:23)  [Clang 11.1.0 ]\r\nExecutable:    /Users/tevesjb/miniconda3/envs/mne-dev/bin/python\r\nCPU:           i386: 8 cores\r\nMemory:        16.0 GB\r\n\r\nmne:           0.24.dev0\r\nnumpy:         1.21.2 {blas=NO_ATLAS_INFO, lapack=lapack}\r\nscipy:         1.7.0\r\nmatplotlib:    3.4.2 {backend=MacOSX}\r\n\r\nsklearn:       0.24.2\r\nnumba:         0.53.1\r\nnibabel:       3.2.1\r\nnilearn:       0.8.0\r\ndipy:          1.4.1\r\ncupy:          Not found\r\npandas:        1.3.0\r\nmayavi:        4.7.2\r\npyvista:       0.32.1 {pyvistaqt=0.5.0, OpenGL 4.1 INTEL-14.7.18 via Intel(R) Iris(TM) Plus Graphics OpenGL Engine}\r\nvtk:           9.0.1\r\nPyQt5:         5.12.3\r\n```\r\n", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/9798/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9798/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/9797", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9797/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9797/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9797/events", "html_url": "https://github.com/mne-tools/mne-python/issues/9797", "id": 1012473916, "node_id": "I_kwDOABPcUM48WSA8", "number": 9797, "title": "Problem using mne.decoding.receptivefield", "user": {"login": "moonj94", "id": 53019885, "node_id": "MDQ6VXNlcjUzMDE5ODg1", "avatar_url": "https://avatars.githubusercontent.com/u/53019885?v=4", "gravatar_id": "", "url": "https://api.github.com/users/moonj94", "html_url": "https://github.com/moonj94", "followers_url": "https://api.github.com/users/moonj94/followers", "following_url": "https://api.github.com/users/moonj94/following{/other_user}", "gists_url": "https://api.github.com/users/moonj94/gists{/gist_id}", "starred_url": "https://api.github.com/users/moonj94/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/moonj94/subscriptions", "organizations_url": "https://api.github.com/users/moonj94/orgs", "repos_url": "https://api.github.com/users/moonj94/repos", "events_url": "https://api.github.com/users/moonj94/events{/privacy}", "received_events_url": "https://api.github.com/users/moonj94/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 9, "created_at": "2021-09-30T18:09:06Z", "updated_at": "2021-10-06T18:54:42Z", "closed_at": "2021-10-06T18:54:42Z", "author_association": "NONE", "active_lock_reason": null, "body": "\r\n\r\n\r\n#### Describe the bug\r\nWhen I try to run receptivefield.fit(X,Y), I get the following error in my terminal and spyder restarts the kernel\r\n`ERROR:traitlets:No such comm target registered: jupyter.widget`\r\n\r\nI have also tried:\r\n\r\n```\r\njupyter nbextension install --py widgetsnbextension --user\r\n\r\njupyter nbextension enable --py widgetsnbextension\r\n```\r\n#### Steps to reproduce\r\n\r\nThis is the code that would reproduce the problem. Versions:\r\n```\r\nSpyder                   5.1.5\r\nMNE                        23.4\r\njupyter                   1.0.0           \r\njupyter_client            6.1.12             \r\njupyter_console           6.4.0              \r\njupyter_core              4.7.1            \r\njupyterlab_pygments       0.1.2                      \r\njupyterlab_widgets        1.0.0 \r\n```\r\n```\r\ntmin,tmax=0,Y.shape[0]/256\r\nn_delays=int((tmax-tmin)*sfreq)+2\r\nn_splits=3\r\ncv=KFold(n_splits)\r\nn_channels=64\r\nspeech=np.random.randn(256,1)\r\nY=np.random.randn(256,64)\r\nrf=ReceptiveField(tmin,tmax,sfreq,feature_names=['envelope'],estimator=1,scoring='corrcoef')\r\ncoefs = np.zeros((n_splits, n_channels, n_delays))\r\nscores = np.zeros((n_splits, n_channels))\r\nfor ii, (train, test) in enumerate(cv.split(speech)):\r\n    print('split %s / %s' % (ii + 1, n_splits))\r\n    rf.fit(speech[train], Y[train])\r\n    scores[ii] = rf.score(speech[test], Y[test])\r\n    # coef_ is shape (n_outputs, n_features, n_delays). we only have 1 feature\r\n    coefs[ii] = rf.coef_[:, 0, :]\r\ntimes = rf.delays_ / float(rf.sfreq)\r\n\r\n# Average scores and coefficients across CV splits\r\nmean_coefs = coefs.mean(axis=0)\r\nmean_scores = scores.mean(axis=0)\r\n\r\n# Plot mean prediction scores across all channels\r\nfig, ax = plt.subplots()\r\nix_chs = np.arange(n_channels)\r\nax.plot(ix_chs, mean_scores)\r\nax.axhline(0, ls='--', color='r')\r\nax.set(title=\"Mean prediction score\", xlabel=\"Channel\", ylabel=\"Score ($r$)\")\r\nmne.viz.tight_layout()\r\n```\r\n\r\n\r\n#### Additional information\r\noutput of mne.sys_info():\r\n\r\n```\r\nPlatform:      macOS-10.16-x86_64-i386-64bit\r\nPython:        3.7.10 | packaged by conda-forge | (default, Sep 13 2021, 19:35:18)  [Clang 11.1.0 ]\r\nExecutable:    /Users/jaemoon/opt/anaconda3/envs/phdf/bin/python\r\nCPU:           i386: 12 cores\r\nMemory:        16.0 GB\r\n\r\nmne:           0.23.4\r\nnumpy:         1.19.5 {blas=NO_ATLAS_INFO, lapack=lapack}\r\nscipy:         1.7.1\r\nmatplotlib:    3.4.2 {backend=module://matplotlib_inline.backend_inline}\r\n\r\nsklearn:       0.24.2\r\nnumba:         0.53.1\r\nnibabel:       3.2.1\r\nnilearn:       0.8.1\r\ndipy:          1.3.0\r\ncupy:          Not found\r\npandas:        1.3.3\r\nmayavi:        Not found\r\npyvista:       0.32.1 {pyvistaqt=0.5.0, OpenGL 4.1 ATI-4.6.20 via AMD Radeon Pro 560X OpenGL Engine}\r\nvtk:           9.0.1\r\nPyQt5:         5.12.3\r\n```\r\n", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/9797/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9797/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/9791", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9791/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9791/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9791/events", "html_url": "https://github.com/mne-tools/mne-python/issues/9791", "id": 1010918439, "node_id": "I_kwDOABPcUM48QWQn", "number": 9791, "title": "TypeError raised in the IPython console when representing a RawArray.", "user": {"login": "mscheltienne", "id": 73893616, "node_id": "MDQ6VXNlcjczODkzNjE2", "avatar_url": "https://avatars.githubusercontent.com/u/73893616?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mscheltienne", "html_url": "https://github.com/mscheltienne", "followers_url": "https://api.github.com/users/mscheltienne/followers", "following_url": "https://api.github.com/users/mscheltienne/following{/other_user}", "gists_url": "https://api.github.com/users/mscheltienne/gists{/gist_id}", "starred_url": "https://api.github.com/users/mscheltienne/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mscheltienne/subscriptions", "organizations_url": "https://api.github.com/users/mscheltienne/orgs", "repos_url": "https://api.github.com/users/mscheltienne/repos", "events_url": "https://api.github.com/users/mscheltienne/events{/privacy}", "received_events_url": "https://api.github.com/users/mscheltienne/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2021-09-29T12:51:04Z", "updated_at": "2021-09-29T15:59:44Z", "closed_at": "2021-09-29T12:53:21Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "I had this minor bug a couple of times already, and aside from being annoying, it's harmless.\r\nWhen representing a created `mne.io.RawArray` in the IPython console, it raises a TypeError... before giving the correct representation. \r\n\r\n```\r\nimport mne\r\nimport numpy as np\r\n\r\n\r\ninfo = mne.create_info(['STI'], sfreq=512, ch_types='stim')\r\nstim_ch = mne.io.RawArray(np.zeros(shape=(1, 1000)), info)\r\n```\r\n\r\nCall representation:\r\n\r\n```\r\nIn[2]: stim_ch\r\nTraceback (most recent call last):\r\n\r\n  File \"/Users/scheltie/Documents/pyvenv/neurotin/lib/python3.8/site-packages/IPython/core/formatters.py\", line 345, in __call__\r\n    return method()\r\n\r\n  File \"/Users/scheltie/Documents/pyvenv/neurotin/lib/python3.8/site-packages/mne/io/base.py\", line 1763, in _repr_html_\r\n    basenames = [os.path.basename(f) for f in self._filenames]\r\n\r\n  File \"/Users/scheltie/Documents/pyvenv/neurotin/lib/python3.8/site-packages/mne/io/base.py\", line 1763, in <listcomp>\r\n    basenames = [os.path.basename(f) for f in self._filenames]\r\n\r\n  File \"/Library/Frameworks/Python.framework/Versions/3.8/lib/python3.8/posixpath.py\", line 142, in basename\r\n    p = os.fspath(p)\r\n\r\nTypeError: expected str, bytes or os.PathLike object, not NoneType\r\n\r\nOut[2]: <RawArray | 1 x 1000 (2.0 s), ~14 kB, data loaded>\r\n```\r\n\r\nA normal `Raw` object loaded from disk does not raise any error:\r\n\r\n```\r\nraw\r\nOut[4]: <Raw | 1-online-neurofeedback-eegoSports 000479-raw.fif, 67 x 135497 (264.6 s), ~69.4 MB, data loaded>\r\n```\r\n\r\nJust guessing that since `stim_ch.filenames` is equal to `(None,)`, something breaks in the representation method of `BaseRaw`. ", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/9791/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9791/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/9788", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9788/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9788/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9788/events", "html_url": "https://github.com/mne-tools/mne-python/issues/9788", "id": 1009042793, "node_id": "I_kwDOABPcUM48JMVp", "number": 9788, "title": "Getting RuntimeError:  Render window interactor must be initialized before processing events.", "user": {"login": "balandongiv", "id": 22090092, "node_id": "MDQ6VXNlcjIyMDkwMDky", "avatar_url": "https://avatars.githubusercontent.com/u/22090092?v=4", "gravatar_id": "", "url": "https://api.github.com/users/balandongiv", "html_url": "https://github.com/balandongiv", "followers_url": "https://api.github.com/users/balandongiv/followers", "following_url": "https://api.github.com/users/balandongiv/following{/other_user}", "gists_url": "https://api.github.com/users/balandongiv/gists{/gist_id}", "starred_url": "https://api.github.com/users/balandongiv/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/balandongiv/subscriptions", "organizations_url": "https://api.github.com/users/balandongiv/orgs", "repos_url": "https://api.github.com/users/balandongiv/repos", "events_url": "https://api.github.com/users/balandongiv/events{/privacy}", "received_events_url": "https://api.github.com/users/balandongiv/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 7, "created_at": "2021-09-28T02:34:32Z", "updated_at": "2021-10-01T14:21:41Z", "closed_at": "2021-10-01T14:21:41Z", "author_association": "NONE", "active_lock_reason": null, "body": "\r\n\r\n\r\n#### Describe the bug\r\nWhen running the tutorial [Compute coherence in source space using a MNE inverse solution](https://mne.tools/mne-connectivity/stable/auto_examples/mne_inverse_coherence_epochs.html), the compiler return an error \r\n\r\n> RuntimeError: Render window interactor must be initialized before processing events.\r\n\r\nat line `brain.show_view('lateral')`\r\n\r\n\r\n\r\n\r\n#### Actual results\r\nThe full tracebackl\r\n\r\n\r\n```\r\n---------------------------------------------------------------------------\r\n\r\nRuntimeError                              Traceback (most recent call last)\r\n\r\n/tmp/ipykernel_23683/1897321839.py in <module>\r\n    139 print('t1')\r\n    140 # Now we can visualize the coherence using the plot method.\r\n--> 141 brain = coh_stc.plot('sample', 'inflated', 'both',\r\n    142                      time_label='Coherence %0.1f Hz',\r\n    143                      subjects_dir=subjects_dir,\r\n\r\n~/anaconda3/envs/source_space_mne/lib/python3.9/site-packages/mne/source_estimate.py in plot(self, subject, surface, hemi, colormap, time_label, smoothing_steps, transparent, alpha, time_viewer, subjects_dir, figure, views, colorbar, clim, cortex, size, background, foreground, initial_time, time_unit, backend, spacing, title, show_traces, src, volume_options, view_layout, add_data_kwargs, brain_kwargs, verbose)\r\n    649              src=None, volume_options=1., view_layout='vertical',\r\n    650              add_data_kwargs=None, brain_kwargs=None, verbose=None):\r\n--> 651         brain = plot_source_estimates(\r\n    652             self, subject, surface=surface, hemi=hemi, colormap=colormap,\r\n    653             time_label=time_label, smoothing_steps=smoothing_steps,\r\n\r\n<decorator-gen-153> in plot_source_estimates(stc, subject, surface, hemi, colormap, time_label, smoothing_steps, transparent, alpha, time_viewer, subjects_dir, figure, views, colorbar, clim, cortex, size, background, foreground, initial_time, time_unit, backend, spacing, title, show_traces, src, volume_options, view_layout, add_data_kwargs, brain_kwargs, verbose)\r\n\r\n~/anaconda3/envs/source_space_mne/lib/python3.9/site-packages/mne/viz/_3d.py in plot_source_estimates(stc, subject, surface, hemi, colormap, time_label, smoothing_steps, transparent, alpha, time_viewer, subjects_dir, figure, views, colorbar, clim, cortex, size, background, foreground, initial_time, time_unit, backend, spacing, title, show_traces, src, volume_options, view_layout, add_data_kwargs, brain_kwargs, verbose)\r\n   1779     else:\r\n   1780         with use_3d_backend(backend):\r\n-> 1781             return _plot_stc(\r\n   1782                 stc, overlay_alpha=alpha, brain_alpha=alpha,\r\n   1783                 vector_alpha=alpha, cortex=cortex, foreground=foreground,\r\n\r\n~/anaconda3/envs/source_space_mne/lib/python3.9/site-packages/mne/viz/_3d.py in _plot_stc(stc, subject, surface, hemi, colormap, time_label, smoothing_steps, subjects_dir, views, clim, figure, initial_time, time_unit, background, time_viewer, colorbar, transparent, brain_alpha, overlay_alpha, vector_alpha, cortex, foreground, size, scale_factor, show_traces, src, volume_options, view_layout, add_data_kwargs, brain_kwargs)\r\n   1861                              'mayavi backend')\r\n   1862     with warnings.catch_warnings(record=True):  # traits warnings\r\n-> 1863         brain = Brain(**kwargs)\r\n   1864     del kwargs\r\n   1865 \r\n\r\n~/anaconda3/envs/source_space_mne/lib/python3.9/site-packages/mne/viz/_brain/_brain.py in __init__(self, subject_id, hemi, surf, title, cortex, alpha, size, background, foreground, figure, subjects_dir, views, offset, show_toolbar, offscreen, interaction, units, view_layout, silhouette, theme, show)\r\n    526                         decimate=self._silhouette[\"decimate\"],\r\n    527                     )\r\n--> 528                 self._renderer.set_camera(**views_dicts[h][v])\r\n    529 \r\n    530         self.interaction = interaction\r\n\r\n~/anaconda3/envs/source_space_mne/lib/python3.9/site-packages/mne/viz/backends/_pyvista.py in set_camera(self, azimuth, elevation, distance, focalpoint, roll, reset_camera, rigid)\r\n    597                    focalpoint='auto', roll=None, reset_camera=True,\r\n    598                    rigid=None):\r\n--> 599         _set_3d_view(self.figure, azimuth=azimuth, elevation=elevation,\r\n    600                      distance=distance, focalpoint=focalpoint, roll=roll,\r\n    601                      reset_camera=reset_camera, rigid=rigid)\r\n\r\n~/anaconda3/envs/source_space_mne/lib/python3.9/site-packages/mne/viz/backends/_pyvista.py in _set_3d_view(figure, azimuth, elevation, focalpoint, distance, roll, reset_camera, rigid)\r\n    994         figure.plotter.camera.SetRoll(figure.plotter.camera.GetRoll() + roll)\r\n    995 \r\n--> 996     figure.plotter.update()\r\n    997     _process_events(figure.plotter)\r\n    998 \r\n\r\n~/anaconda3/envs/source_space_mne/lib/python3.9/site-packages/pyvista/plotting/plotting.py in update(self, stime, force_redraw)\r\n   1401             update_rate = self.iren.get_desired_update_rate()\r\n   1402             if (curr_time - Plotter.last_update_time) > (1.0/update_rate):\r\n-> 1403                 self.right_timer_id = self.iren.create_repeating_timer(stime)\r\n   1404                 self.render()\r\n   1405                 Plotter.last_update_time = curr_time\r\n\r\n~/anaconda3/envs/source_space_mne/lib/python3.9/site-packages/pyvista/plotting/render_window_interactor.py in create_repeating_timer(self, stime)\r\n    607         timer_id = self.interactor.CreateRepeatingTimer(stime)\r\n    608         if hasattr(self.interactor, 'ProcessEvents'):\r\n--> 609             self.process_events()\r\n    610         else:\r\n    611             self.interactor.Start()\r\n\r\n~/anaconda3/envs/source_space_mne/lib/python3.9/site-packages/pyvista/plotting/render_window_interactor.py in process_events(self)\r\n    629         # Note: This is only available in VTK 9+\r\n    630         if not self.initialized:\r\n--> 631             raise RuntimeError('Render window interactor must be initialized '\r\n    632                                'before processing events.')\r\n    633         self.interactor.ProcessEvents()\r\n\r\nRuntimeError: Render window interactor must be initialized before processing events.\r\n```\r\n\r\n\r\n#### Additional information:\r\n\r\n\r\n\r\n\r\nUbuntu 18.04\r\nIssue occur for both Python 3.7 and 3.9.\r\n\r\n\r\nPackage             Version\r\n------------------- -----------\r\naiohttp             3.7.4.post0\r\nappdirs             1.4.4\r\nargcomplete         1.12.3\r\nargon2-cffi         20.1.0\r\nasync-generator     1.10\r\nasync-timeout       3.0.1\r\nattrs               21.2.0\r\nautobahn            21.3.1\r\nAutomat             20.2.0\r\nbackcall            0.2.0\r\nbleach              4.0.0\r\ncertifi             2021.5.30\r\ncffi                1.14.6\r\nchardet             4.0.0\r\nconstantly          15.1.0\r\ncryptography        3.4.8\r\ncycler              0.10.0\r\ndebugpy             1.4.1\r\ndecorator           5.0.9\r\ndefusedxml          0.7.1\r\nentrypoints         0.3\r\nhyperlink           21.0.0\r\nidna                3.2\r\nimageio             2.9.0\r\nimportlib-metadata  4.8.1\r\nincremental         21.3.0\r\nipykernel           6.2.0\r\nipython             7.27.0\r\nipython-genutils    0.2.0\r\nipywidgets          7.6.4\r\njedi                0.18.0\r\nJinja2              3.0.1\r\njoblib              1.0.1\r\njsonschema          3.2.0\r\njupyter             1.0.0\r\njupyter-client      7.0.1\r\njupyter-console     6.4.0\r\njupyter-core        4.7.1\r\njupyterlab-pygments 0.1.2\r\njupyterlab-widgets  1.0.0\r\nkiwisolver          1.3.2\r\nMarkupSafe          2.0.1\r\nmatplotlib          3.4.3\r\nmatplotlib-inline   0.1.2\r\nmeshio              4.4.6\r\nmistune             0.8.4\r\nmne                 0.23.4\r\nmultidict           5.1.0\r\nnbclient            0.5.3\r\nnbconvert           6.1.0\r\nnbformat            5.1.3\r\nnest-asyncio        1.5.1\r\nnotebook            6.4.3\r\nnumpy               1.21.2\r\npackaging           21.0\r\npandocfilters       1.4.3\r\nparso               0.8.2\r\npexpect             4.8.0\r\npickleshare         0.7.5\r\nPillow              8.3.2\r\npip                 21.0.1\r\nprometheus-client   0.11.0\r\nprompt-toolkit      3.0.17\r\nptyprocess          0.7.0\r\npycparser           2.20\r\nPygments            2.10.0\r\npyparsing           2.4.7\r\nPyQt5               5.15.4\r\nPyQt5-Qt5           5.15.2\r\nPyQt5-sip           12.9.0\r\npyrsistent          0.17.3\r\npython-dateutil     2.8.2\r\npyvista             0.32.1\r\npyzmq               22.2.1\r\nqtconsole           5.1.1\r\nQtPy                1.10.0\r\nscikit-learn        1.0\r\nscipy               1.7.1\r\nscooby              0.5.7\r\nSend2Trash          1.8.0\r\nsetuptools          58.0.4\r\nsix                 1.16.0\r\nsklearn             0.0\r\nterminado           0.9.4\r\ntestpath            0.5.0\r\nthreadpoolctl       2.2.0\r\ntornado             6.1\r\ntqdm                4.62.3\r\ntraitlets           5.1.0\r\nTwisted             21.7.0\r\ntxaio               21.2.1\r\ntyping-extensions   3.10.0.2\r\nvtk                 9.0.3\r\nwcwidth             0.2.5\r\nwebencodings        0.5.1\r\nwheel               0.37.0\r\nwidgetsnbextension  3.5.1\r\nwslink              1.0.7\r\nyarl                1.6.3\r\nzipp                3.5.0\r\nzope.interface      5.4.0\r\n", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/9788/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9788/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/9787", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9787/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9787/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9787/events", "html_url": "https://github.com/mne-tools/mne-python/issues/9787", "id": 1008962082, "node_id": "I_kwDOABPcUM48I4oi", "number": 9787, "title": "Optional key for `fetch_datasets` seems required", "user": {"login": "rob-luke", "id": 748691, "node_id": "MDQ6VXNlcjc0ODY5MQ==", "avatar_url": "https://avatars.githubusercontent.com/u/748691?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rob-luke", "html_url": "https://github.com/rob-luke", "followers_url": "https://api.github.com/users/rob-luke/followers", "following_url": "https://api.github.com/users/rob-luke/following{/other_user}", "gists_url": "https://api.github.com/users/rob-luke/gists{/gist_id}", "starred_url": "https://api.github.com/users/rob-luke/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rob-luke/subscriptions", "organizations_url": "https://api.github.com/users/rob-luke/orgs", "repos_url": "https://api.github.com/users/rob-luke/repos", "events_url": "https://api.github.com/users/rob-luke/events{/privacy}", "received_events_url": "https://api.github.com/users/rob-luke/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2021-09-28T01:32:50Z", "updated_at": "2021-10-12T21:43:11Z", "closed_at": "2021-10-12T21:43:10Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "#### Describe the bug\r\nOptional key for `fetch_datasets` seems required.\r\n\r\n\r\n#### Steps to reproduce\r\nhttps://github.com/mne-tools/mne-python/blob/9c7e837f59e480fff1b6ea5841630e089aa5a235/mne/datasets/_fetch.py#L109-L112\r\n\r\nbut the variable is addressed a few lines below\r\n\r\nhttps://github.com/mne-tools/mne-python/blob/9c7e837f59e480fff1b6ea5841630e089aa5a235/mne/datasets/_fetch.py#L151\r\n\r\n\r\n#### Additional information\r\nNot sure if this is a documentation mistake or code mistake, so just reporting it @adam2392 \r\n\r\nFound this while trying to implement the new fetcher in MNE-NIRS at https://github.com/mne-tools/mne-nirs/pull/394\r\n", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/9787/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9787/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/9779", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9779/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9779/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9779/events", "html_url": "https://github.com/mne-tools/mne-python/issues/9779", "id": 1007487731, "node_id": "I_kwDOABPcUM48DQrz", "number": 9779, "title": "Adding two annotations does not carry over channel name", "user": {"login": "adam2392", "id": 3460267, "node_id": "MDQ6VXNlcjM0NjAyNjc=", "avatar_url": "https://avatars.githubusercontent.com/u/3460267?v=4", "gravatar_id": "", "url": "https://api.github.com/users/adam2392", "html_url": "https://github.com/adam2392", "followers_url": "https://api.github.com/users/adam2392/followers", "following_url": "https://api.github.com/users/adam2392/following{/other_user}", "gists_url": "https://api.github.com/users/adam2392/gists{/gist_id}", "starred_url": "https://api.github.com/users/adam2392/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/adam2392/subscriptions", "organizations_url": "https://api.github.com/users/adam2392/orgs", "repos_url": "https://api.github.com/users/adam2392/repos", "events_url": "https://api.github.com/users/adam2392/events{/privacy}", "received_events_url": "https://api.github.com/users/adam2392/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2021-09-26T20:01:17Z", "updated_at": "2021-09-27T06:03:10Z", "closed_at": "2021-09-27T06:03:10Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "#### Describe the bug\r\nWhen adding two annotations with channel names defined, they do not persist.\r\n\r\nE.g.\r\n\r\n```\r\nannotations_1 = Annotations(0, 0, 'test', ch_names=[['1']])\r\nannotations_2 = Annotations(1, 0, 'test', ch_names=[['2']])\r\n\r\n# the new annotations object will not have channel name 2\r\nannotations_1 += annotations_2\r\nprint(annotations_1.ch_names)\r\n\r\n>>> [('1',) ()]\r\n```\r\n", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/9779/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9779/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/9774", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9774/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9774/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9774/events", "html_url": "https://github.com/mne-tools/mne-python/issues/9774", "id": 1004554525, "node_id": "I_kwDOABPcUM474Ekd", "number": 9774, "title": "BUG: Pooch fails to download on CircleCI", "user": {"login": "larsoner", "id": 2365790, "node_id": "MDQ6VXNlcjIzNjU3OTA=", "avatar_url": "https://avatars.githubusercontent.com/u/2365790?v=4", "gravatar_id": "", "url": "https://api.github.com/users/larsoner", "html_url": "https://github.com/larsoner", "followers_url": "https://api.github.com/users/larsoner/followers", "following_url": "https://api.github.com/users/larsoner/following{/other_user}", "gists_url": "https://api.github.com/users/larsoner/gists{/gist_id}", "starred_url": "https://api.github.com/users/larsoner/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/larsoner/subscriptions", "organizations_url": "https://api.github.com/users/larsoner/orgs", "repos_url": "https://api.github.com/users/larsoner/repos", "events_url": "https://api.github.com/users/larsoner/events{/privacy}", "received_events_url": "https://api.github.com/users/larsoner/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 10, "created_at": "2021-09-22T17:37:50Z", "updated_at": "2021-09-25T23:40:50Z", "closed_at": "2021-09-25T23:40:50Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "Looks like we have a problem, presumably from #9742:\r\n\r\nhttps://app.circleci.com/pipelines/github/mne-tools/mne-python/10239/workflows/959aeb3e-ddbd-45a8-9b11-d8915f6ae1f6/jobs/34623\r\n```\r\nDownloading file 'hf_sef_evoked.tar.gz' from 'https://zenodo.org/record/3523071/files/hf_sef_evoked.tar.gz' to '/home/circleci/mne_data'.\r\n100%|\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588| 766M/766M [00:00<00:00, 3.35TB/s]\r\nExtracting 'hf_sef/MEG' from '/home/circleci/mne_data/hf_sef_evoked.tar.gz' to '/home/circleci/mne_data'\r\nTraceback (most recent call last):\r\n  File \"/home/circleci/.local/lib/python3.8/site-packages/pooch/processors.py\", line 219, in _extract_file\r\n    output.write(data_file.read())\r\nAttributeError: 'NoneType' object has no attribute 'read'\r\n```\r\n@adam2392 I can replicate locally with:\r\n```\r\n$ python -c \"import mne; mne.datasets.hf_sef.data_path(force_update=True, verbose=True)\"\r\nUsing default location ~/mne_data for HF_SEF...\r\nDownloading file 'hf_sef_evoked.tar.gz' from 'https://zenodo.org/record/3523071/files/hf_sef_evoked.tar.gz' to '/Users/larsoner/mne_data'.\r\n100%|\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588| 766M/766M [00:00<00:00, 1.79TB/s]\r\nExtracting 'hf_sef/MEG' from '/Users/larsoner/mne_data/hf_sef_evoked.tar.gz' to '/Users/larsoner/mne_data'\r\nTraceback (most recent call last):\r\n  File \"/Users/larsoner/opt/miniconda3/lib/python3.8/site-packages/pooch/processors.py\", line 219, in _extract_file\r\n    output.write(data_file.read())\r\nAttributeError: 'NoneType' object has no attribute 'read'\r\n```\r\nCan you look into it?", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/9774/reactions", "total_count": 1, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9774/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/9765", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9765/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9765/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9765/events", "html_url": "https://github.com/mne-tools/mne-python/issues/9765", "id": 1002763064, "node_id": "I_kwDOABPcUM47xPM4", "number": 9765, "title": "Epochs are not concatenated chronologically", "user": {"login": "jsosulski", "id": 2545339, "node_id": "MDQ6VXNlcjI1NDUzMzk=", "avatar_url": "https://avatars.githubusercontent.com/u/2545339?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jsosulski", "html_url": "https://github.com/jsosulski", "followers_url": "https://api.github.com/users/jsosulski/followers", "following_url": "https://api.github.com/users/jsosulski/following{/other_user}", "gists_url": "https://api.github.com/users/jsosulski/gists{/gist_id}", "starred_url": "https://api.github.com/users/jsosulski/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jsosulski/subscriptions", "organizations_url": "https://api.github.com/users/jsosulski/orgs", "repos_url": "https://api.github.com/users/jsosulski/repos", "events_url": "https://api.github.com/users/jsosulski/events{/privacy}", "received_events_url": "https://api.github.com/users/jsosulski/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2021-09-21T15:56:19Z", "updated_at": "2021-09-23T15:15:15Z", "closed_at": "2021-09-23T15:15:15Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "#### Describe the bug\r\nConcatenate Epochs currently does not create chronologically ordered events.\r\n\r\n#### Steps to reproduce\r\n\r\n```python\r\nimport mne\r\nimport numpy as np\r\n\r\nnp.random.seed(10)\r\nn_epochs, n_channels, n_timepoints = 2, 4, 21\r\nch_names = [f\"ch_{i}\" for i in range(n_channels)]\r\nfake_data = 1e-6*np.random.random((n_epochs, n_channels, n_timepoints))\r\nevents = np.array([[1000, 0, 1], [20000, 0, 1]])\r\nevents2 = np.array([[1, 0, 1], [20, 0, 1]])\r\n\r\ninfo = mne.create_info(ch_names=ch_names, sfreq=40)\r\nepo = mne.EpochsArray(fake_data, info, events=events)\r\nepo2 = mne.EpochsArray(np.copy(fake_data), info, events=events2)\r\n\r\nepo_conc = mne.concatenate_epochs([epo, epo2])\r\nassert all(np.diff(epo_conc.events[:, 0]) >= 0), \"Not chronologically sorted events\"\r\n```\r\n\r\n#### Expected results\r\nEvents are ordered.\r\n\r\n#### Actual results\r\nEvents are not ordered.\r\n\r\n#### Additional information\r\nDuring concatenation, the offset is erroneously calculated on the current epoch to concatenate instead of the previous one. See the linked PR.", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/9765/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9765/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/9758", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9758/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9758/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9758/events", "html_url": "https://github.com/mne-tools/mne-python/pull/9758", "id": 999782883, "node_id": "PR_kwDOABPcUM4r6YQB", "number": 9758, "title": "Fix equalize event counts", "user": {"login": "drammock", "id": 1810515, "node_id": "MDQ6VXNlcjE4MTA1MTU=", "avatar_url": "https://avatars.githubusercontent.com/u/1810515?v=4", "gravatar_id": "", "url": "https://api.github.com/users/drammock", "html_url": "https://github.com/drammock", "followers_url": "https://api.github.com/users/drammock/followers", "following_url": "https://api.github.com/users/drammock/following{/other_user}", "gists_url": "https://api.github.com/users/drammock/gists{/gist_id}", "starred_url": "https://api.github.com/users/drammock/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/drammock/subscriptions", "organizations_url": "https://api.github.com/users/drammock/orgs", "repos_url": "https://api.github.com/users/drammock/repos", "events_url": "https://api.github.com/users/drammock/events{/privacy}", "received_events_url": "https://api.github.com/users/drammock/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2021-09-17T23:17:41Z", "updated_at": "2021-09-20T17:02:56Z", "closed_at": "2021-09-19T09:56:40Z", "author_association": "MEMBER", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/mne-tools/mne-python/pulls/9758", "html_url": "https://github.com/mne-tools/mne-python/pull/9758", "diff_url": "https://github.com/mne-tools/mne-python/pull/9758.diff", "patch_url": "https://github.com/mne-tools/mne-python/pull/9758.patch", "merged_at": "2021-09-19T09:56:39Z"}, "body": "I hit a corner case today where `epochs.equalize_event_counts()` was failing because the smallest event_id had only one epoch in it, which caused `interp1d` to error out (we already handle the edge case where it has zero).  This fixes that.", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/9758/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9758/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/9752", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9752/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9752/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9752/events", "html_url": "https://github.com/mne-tools/mne-python/issues/9752", "id": 998487875, "node_id": "I_kwDOABPcUM47g7dD", "number": 9752, "title": "Error checking in Info - setting unsupported keys in  `mne.Info` or `mne.Info` attributes partially works and doesn't show any warnings", "user": {"login": "mscheltienne", "id": 73893616, "node_id": "MDQ6VXNlcjczODkzNjE2", "avatar_url": "https://avatars.githubusercontent.com/u/73893616?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mscheltienne", "html_url": "https://github.com/mscheltienne", "followers_url": "https://api.github.com/users/mscheltienne/followers", "following_url": "https://api.github.com/users/mscheltienne/following{/other_user}", "gists_url": "https://api.github.com/users/mscheltienne/gists{/gist_id}", "starred_url": "https://api.github.com/users/mscheltienne/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mscheltienne/subscriptions", "organizations_url": "https://api.github.com/users/mscheltienne/orgs", "repos_url": "https://api.github.com/users/mscheltienne/repos", "events_url": "https://api.github.com/users/mscheltienne/events{/privacy}", "received_events_url": "https://api.github.com/users/mscheltienne/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 11, "created_at": "2021-09-16T18:05:48Z", "updated_at": "2022-02-21T14:39:32Z", "closed_at": "2022-02-21T14:38:17Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "In my preprocessing pipeline, I'm setting some information about the subjects. One of the interesting features is the age, or the birth year.  But MNE only supports the birthday as a tuple (year, month, day), as per the documentation of[ `mne.Info`](https://mne.tools/stable/generated/mne.Info.html).\r\n\r\nSadly, I do not have the exact birthday, and instead of setting it as (year, month, 1), I figured I could set a different `birthyear` or `age` argument directly. \r\n\r\n```\r\nraw = mne.io.read_raw_fif(...)\r\nraw.info['subject_info']['birthyear'] = 1995\r\n{'id': 65, 'his_id': '065', 'birthyear': 1995, 'sex': 1}\r\nraw.save(...)\r\n```\r\n\r\nAnd it worked really nicely. Until I saved and reloaded the file.\r\n\r\n```\r\nraw = mne.io.read_raw_fif(...)\r\nraw.info['subject_info']\r\n{'id': 65, 'his_id': '065', 'sex': 1}\r\n```\r\n\r\nThe issue is that this emits no warning, no error, and yet the added data is not saved to disk.\r\n\r\nIf the dictionary stored in `'subject_info'` is not used by anything, and is just here for user-defined variables (*is this the case?*) then how about dropping the limitation on what the keys can be?", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/9752/reactions", "total_count": 1, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9752/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/9745", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9745/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9745/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9745/events", "html_url": "https://github.com/mne-tools/mne-python/issues/9745", "id": 997708223, "node_id": "I_kwDOABPcUM47d9G_", "number": 9745, "title": "Persyst reader makes events all lower-case", "user": {"login": "adam2392", "id": 3460267, "node_id": "MDQ6VXNlcjM0NjAyNjc=", "avatar_url": "https://avatars.githubusercontent.com/u/3460267?v=4", "gravatar_id": "", "url": "https://api.github.com/users/adam2392", "html_url": "https://github.com/adam2392", "followers_url": "https://api.github.com/users/adam2392/followers", "following_url": "https://api.github.com/users/adam2392/following{/other_user}", "gists_url": "https://api.github.com/users/adam2392/gists{/gist_id}", "starred_url": "https://api.github.com/users/adam2392/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/adam2392/subscriptions", "organizations_url": "https://api.github.com/users/adam2392/orgs", "repos_url": "https://api.github.com/users/adam2392/repos", "events_url": "https://api.github.com/users/adam2392/events{/privacy}", "received_events_url": "https://api.github.com/users/adam2392/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2021-09-16T03:06:22Z", "updated_at": "2021-09-16T20:53:05Z", "closed_at": "2021-09-16T20:53:05Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "#### Describe the bug\r\nRight now, `read_raw_persyst` will read in events/annotations from the `[comments]` section. These events may have upper-casing free-form text.\r\n\r\nHowever, upon reading them in, you get all lower-case. This is unexpected behavior.\r\n\r\n#### Steps to reproduce\r\nUse this file and run `read_raw_persyst` https://www.dropbox.com/sh/vey1yh30iwo5i3e/AAAKX-EafUU3kMJ5pHmuqkYya?dl=0\r\n\r\n\r\n#### Expected results\r\nThis shouldn't happen.\r\n\r\n#### Additional information\r\nThis is easily fixed, by just checking for one of the expected upper-case events in the lay file.", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/9745/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9745/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/9744", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9744/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9744/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9744/events", "html_url": "https://github.com/mne-tools/mne-python/issues/9744", "id": 997584540, "node_id": "I_kwDOABPcUM47de6c", "number": 9744, "title": "Plot sensors is broken, not showing sensors in rendered docs.", "user": {"login": "rob-luke", "id": 748691, "node_id": "MDQ6VXNlcjc0ODY5MQ==", "avatar_url": "https://avatars.githubusercontent.com/u/748691?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rob-luke", "html_url": "https://github.com/rob-luke", "followers_url": "https://api.github.com/users/rob-luke/followers", "following_url": "https://api.github.com/users/rob-luke/following{/other_user}", "gists_url": "https://api.github.com/users/rob-luke/gists{/gist_id}", "starred_url": "https://api.github.com/users/rob-luke/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rob-luke/subscriptions", "organizations_url": "https://api.github.com/users/rob-luke/orgs", "repos_url": "https://api.github.com/users/rob-luke/repos", "events_url": "https://api.github.com/users/rob-luke/events{/privacy}", "received_events_url": "https://api.github.com/users/rob-luke/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2021-09-15T22:52:37Z", "updated_at": "2021-09-16T20:53:15Z", "closed_at": "2021-09-16T20:53:15Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "#### Describe the bug\r\nThe plot sensors function is not plotting sensors on the fNIRS tutorial (I haven't checked other tutorials, may be general too).\r\n\r\n\r\n#### Steps to reproduce / Actual results\r\n\r\nSee dev docs https://mne.tools/dev/auto_tutorials/preprocessing/70_fnirs_processing.html#view-location-of-sensors-over-brain-surface\r\n\r\n\r\n#### Expected results\r\nSee stable docs https://mne.tools/stable/auto_tutorials/preprocessing/70_fnirs_processing.html#sphx-glr-auto-tutorials-preprocessing-70-fnirs-processing-py\r\n\r\n\r\n#### Additional information\r\nI have seen lots of activity with the 3D brain visualisation lately, so I am not sure who to ping, so everyone related gets a ping! @agramfort @larsoner @GuillaumeFavelier @alexrockhill \r\n", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/9744/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9744/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/9737", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9737/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9737/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9737/events", "html_url": "https://github.com/mne-tools/mne-python/issues/9737", "id": 996685636, "node_id": "I_kwDOABPcUM47aDdE", "number": 9737, "title": "[BUG] ECoG tutorial plot sensors plots are out of scale", "user": {"login": "alexrockhill", "id": 13473576, "node_id": "MDQ6VXNlcjEzNDczNTc2", "avatar_url": "https://avatars.githubusercontent.com/u/13473576?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alexrockhill", "html_url": "https://github.com/alexrockhill", "followers_url": "https://api.github.com/users/alexrockhill/followers", "following_url": "https://api.github.com/users/alexrockhill/following{/other_user}", "gists_url": "https://api.github.com/users/alexrockhill/gists{/gist_id}", "starred_url": "https://api.github.com/users/alexrockhill/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alexrockhill/subscriptions", "organizations_url": "https://api.github.com/users/alexrockhill/orgs", "repos_url": "https://api.github.com/users/alexrockhill/repos", "events_url": "https://api.github.com/users/alexrockhill/events{/privacy}", "received_events_url": "https://api.github.com/users/alexrockhill/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2021-09-15T05:51:30Z", "updated_at": "2021-09-15T18:42:53Z", "closed_at": "2021-09-15T18:14:01Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "https://mne.tools/dev/auto_tutorials/clinical/30_ecog.html\r\n\r\nIn this tutorial, it looks like `brain.plot_sensors` is off. I think this may have to do with the fix @GuillaumeFavelier did?", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/9737/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9737/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/9734", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9734/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9734/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9734/events", "html_url": "https://github.com/mne-tools/mne-python/issues/9734", "id": 996146557, "node_id": "I_kwDOABPcUM47X_19", "number": 9734, "title": "Getting atributeError when plotting sensitivity map", "user": {"login": "balandongiv", "id": 22090092, "node_id": "MDQ6VXNlcjIyMDkwMDky", "avatar_url": "https://avatars.githubusercontent.com/u/22090092?v=4", "gravatar_id": "", "url": "https://api.github.com/users/balandongiv", "html_url": "https://github.com/balandongiv", "followers_url": "https://api.github.com/users/balandongiv/followers", "following_url": "https://api.github.com/users/balandongiv/following{/other_user}", "gists_url": "https://api.github.com/users/balandongiv/gists{/gist_id}", "starred_url": "https://api.github.com/users/balandongiv/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/balandongiv/subscriptions", "organizations_url": "https://api.github.com/users/balandongiv/orgs", "repos_url": "https://api.github.com/users/balandongiv/repos", "events_url": "https://api.github.com/users/balandongiv/events{/privacy}", "received_events_url": "https://api.github.com/users/balandongiv/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2021-09-14T15:21:18Z", "updated_at": "2021-10-01T03:26:59Z", "closed_at": "2021-10-01T03:26:58Z", "author_association": "NONE", "active_lock_reason": null, "body": "  When running the the tutorial:\r\n\r\nhttps://mne.tools/stable/auto_tutorials/forward/35_eeg_no_mri.html\r\n\r\n> The compiler return an error\r\n\r\n\r\nThe full trace is as below\r\n\r\n\r\n```\r\nAttributeError: 'NoneType' object has no attribute '_widget'\r\n  brain = eeg_map.plot(time_label='EEG sensitivity', subjects_dir=subjects_dir,\r\n  File \"/home/host/anaconda3/envs/prj/lib/python3.9/site-packages/mne/source_estimate.py\", line 648, in plot\r\n    brain = plot_source_estimates(\r\n  File \"<decorator-gen-158>\", line 24, in plot_source_estimates\r\n  File \"/home/host/anaconda3/envs/prj/lib/python3.9/site-packages/mne/viz/_3d.py\", line 1730, in plot_source_estimates\r\n    return _plot_stc(\r\n  File \"/home/host/anaconda3/envs/prj/lib/python3.9/site-packages/mne/viz/_3d.py\", line 1908, in _plot_stc\r\n    brain.setup_time_viewer(time_viewer=time_viewer,\r\n  File \"/home/host/anaconda3/envs/prj/lib/python3.9/site-packages/mne/viz/_brain/_brain.py\", line 686, in setup_time_viewer\r\n    self._configure_playback()\r\n  File \"/home/host/anaconda3/envs/prj/lib/python3.9/site-packages/mne/viz/_brain/_brain.py\", line 1154, in _configure_playback\r\n    self._renderer._playback_initialize(\r\n  File \"/home/host/anaconda3/envs/prj/lib/python3.9/site-packages/mne/viz/backends/_notebook.py\", line 243, in _playback_initialize\r\n    slider = time_widget._widget\r\nAttributeError: 'NoneType' object has no attribute '_widget'\r\n```\r\n\r\nProcess finished with exit code 1\r\n\r\nSpecifiically, the error occur at\r\n\r\n```\r\nbrain = eeg_map.plot(time_label='EEG sensitivity', subjects_dir=subjects_dir,\r\n                     clim=dict(lims=[5, 50, 100]))\r\n```\r\n\r\n\r\nSetup\r\nPycharm\r\nUbuntu\r\nmne 0.24.dev0\r\n", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/9734/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9734/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/9730", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9730/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9730/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9730/events", "html_url": "https://github.com/mne-tools/mne-python/issues/9730", "id": 994889955, "node_id": "MDU6SXNzdWU5OTQ4ODk5NTU=", "number": 9730, "title": "Raw annotations incorrectly exported to EDF", "user": {"login": "mehdikuchi", "id": 43707267, "node_id": "MDQ6VXNlcjQzNzA3MjY3", "avatar_url": "https://avatars.githubusercontent.com/u/43707267?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mehdikuchi", "html_url": "https://github.com/mehdikuchi", "followers_url": "https://api.github.com/users/mehdikuchi/followers", "following_url": "https://api.github.com/users/mehdikuchi/following{/other_user}", "gists_url": "https://api.github.com/users/mehdikuchi/gists{/gist_id}", "starred_url": "https://api.github.com/users/mehdikuchi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mehdikuchi/subscriptions", "organizations_url": "https://api.github.com/users/mehdikuchi/orgs", "repos_url": "https://api.github.com/users/mehdikuchi/repos", "events_url": "https://api.github.com/users/mehdikuchi/events{/privacy}", "received_events_url": "https://api.github.com/users/mehdikuchi/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2021-09-13T13:24:42Z", "updated_at": "2021-09-15T08:57:42Z", "closed_at": "2021-09-15T08:57:42Z", "author_association": "NONE", "active_lock_reason": null, "body": "Dear all,\r\n\r\nI have a rawmmf data:\r\nmne.io.egi.egimff.RawMff\r\nwith the following annotations:\r\n![image](https://user-images.githubusercontent.com/43707267/133086346-99b2234c-77cc-4a10-8bfb-e3aa855c12ab.png)\r\nand then export it with:\r\neeg.data.export(\"D:/dd.edf\")\r\nwhen reloading the exported data:\r\n![image](https://user-images.githubusercontent.com/43707267/133091369-c1a84c1b-a9a5-434a-889e-495e65738e5d.png)\r\nas can be seen the annotations are not exported correctly.\r\n\r\nSo it seems to be a bug.", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/9730/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9730/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/9727", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9727/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9727/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9727/events", "html_url": "https://github.com/mne-tools/mne-python/issues/9727", "id": 993139052, "node_id": "MDU6SXNzdWU5OTMxMzkwNTI=", "number": 9727, "title": "`mne.cov.compute_whitener` returns wrong output if bads are passed explicitly.", "user": {"login": "mscheltienne", "id": 73893616, "node_id": "MDQ6VXNlcjczODkzNjE2", "avatar_url": "https://avatars.githubusercontent.com/u/73893616?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mscheltienne", "html_url": "https://github.com/mscheltienne", "followers_url": "https://api.github.com/users/mscheltienne/followers", "following_url": "https://api.github.com/users/mscheltienne/following{/other_user}", "gists_url": "https://api.github.com/users/mscheltienne/gists{/gist_id}", "starred_url": "https://api.github.com/users/mscheltienne/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mscheltienne/subscriptions", "organizations_url": "https://api.github.com/users/mscheltienne/orgs", "repos_url": "https://api.github.com/users/mscheltienne/repos", "events_url": "https://api.github.com/users/mscheltienne/events{/privacy}", "received_events_url": "https://api.github.com/users/mscheltienne/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2021-09-10T11:18:46Z", "updated_at": "2021-09-13T14:56:30Z", "closed_at": "2021-09-13T14:56:30Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "#### Describe the bug\r\n\r\nDescription in `picks` for `mne.cov.compute_whitener`: \r\n\r\n> [...] Note that channels in info['bads'] will be included if their names or indices are explicitly provided.\r\n\r\nHowever, the output differs from the one obtained if the same channels are passed; but with none marked as bads.\r\nThe bug is somewhere in `_smart_eigh`.\r\n\r\n#### Steps to reproduce\r\n\r\n```\r\n#%% Load raw\r\nimport mne\r\nfrom pathlib import Path\r\n\r\ndata_folder = Path(mne.datasets.sample.data_path())\r\nraw_file = data_folder / 'MEG' / 'sample' / 'sample_audvis_filt-0-40_raw.fif'\r\nraw = mne.io.read_raw_fif(raw_file, preload=True)\r\nraw.pick_types(eeg=True)\r\n\r\n#%% Covariance without mark bad channels\r\nraw.info['bads'] = list()\r\n\r\npicks_without_bads = mne.pick_types(raw.info, eeg=True, exclude=[])\r\n\r\nnoise_cov_without_bads = mne.compute_raw_covariance(\r\n    raw, picks=picks_without_bads)\r\n\r\nwhitener_without_bads = mne.cov.compute_whitener(\r\n    noise_cov_without_bads, raw.info, picks=raw.info.ch_names)\r\n\r\n#%% Covariance with marked bad channels including the marked bads\r\nraw.info['bads'] = ['EEG 002', 'EEG 012', 'EEG 015']\r\n\r\npicks_with_bads = mne.pick_types(raw.info, eeg=True, exclude=[])\r\n\r\nnoise_cov_with_bads = mne.compute_raw_covariance(\r\n    raw, picks=picks_with_bads)\r\n\r\nwhitener_with_bads = mne.cov.compute_whitener(\r\n    noise_cov_with_bads, raw.info, picks=raw.info.ch_names)\r\n\r\n#%% Test\r\n\r\nassert (picks_without_bads == picks_with_bads).all()  # OK\r\nassert (noise_cov_without_bads['data'] == noise_cov_with_bads['data']).all()  # OK\r\nassert noise_cov_without_bads['names'] == noise_cov_with_bads['names']  # OK\r\n\r\n#%% Whitener\r\n\r\nassert whitener_without_bads[1] == whitener_with_bads[1]  # OK\r\nassert (whitener_without_bads[0] == whitener_with_bads[0]).all()  # FAIL\r\n", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/9727/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9727/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/9720", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9720/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9720/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9720/events", "html_url": "https://github.com/mne-tools/mne-python/issues/9720", "id": 989902859, "node_id": "MDU6SXNzdWU5ODk5MDI4NTk=", "number": 9720, "title": "Is the stc.plot hemi parameter broken?", "user": {"login": "rob-luke", "id": 748691, "node_id": "MDQ6VXNlcjc0ODY5MQ==", "avatar_url": "https://avatars.githubusercontent.com/u/748691?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rob-luke", "html_url": "https://github.com/rob-luke", "followers_url": "https://api.github.com/users/rob-luke/followers", "following_url": "https://api.github.com/users/rob-luke/following{/other_user}", "gists_url": "https://api.github.com/users/rob-luke/gists{/gist_id}", "starred_url": "https://api.github.com/users/rob-luke/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rob-luke/subscriptions", "organizations_url": "https://api.github.com/users/rob-luke/orgs", "repos_url": "https://api.github.com/users/rob-luke/repos", "events_url": "https://api.github.com/users/rob-luke/events{/privacy}", "received_events_url": "https://api.github.com/users/rob-luke/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2021-09-07T11:53:54Z", "updated_at": "2021-09-07T20:50:06Z", "closed_at": "2021-09-07T20:18:59Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "#### Describe the bug\r\nFor my own code plotting source estimates only the right hemisphere is no showing, even if I set `hemi=\"both`\r\n\r\n\r\n#### Steps to reproduce\r\nI think this may also be evident in the examples like\r\n\r\nhttps://mne.tools/dev/auto_tutorials/inverse/40_mne_fixed_free.html#fixed-orientation\r\n\r\nwhich had code\r\n```python\r\nsnr = 3.0\r\nlambda2 = 1.0 / snr ** 2\r\nkwargs = dict(initial_time=0.08, hemi='both', subjects_dir=subjects_dir,\r\n              size=(600, 600))\r\n\r\nstc = abs(apply_inverse(evoked, inv, lambda2, 'MNE', verbose=True))\r\nbrain = stc.plot(figure=1, **kwargs)\r\nbrain.add_text(0.1, 0.9, 'MNE', 'title', font_size=14)\r\n```\r\n\r\n\r\n#### Expected results (docs from 0.23)\r\n\r\n![](https://mne.tools/stable/_images/sphx_glr_40_mne_fixed_free_001.png)\r\n\r\n\r\n\r\n#### Actual results (docs from 0.24-dev)\r\n\r\n![](https://mne.tools/dev/_images/sphx_glr_40_mne_fixed_free_001.png)\r\n\r\n\r\n#### Additional information\r\n", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/9720/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9720/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/9716", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9716/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9716/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9716/events", "html_url": "https://github.com/mne-tools/mne-python/issues/9716", "id": 987802968, "node_id": "MDU6SXNzdWU5ODc4MDI5Njg=", "number": 9716, "title": "ICA 'ValueError: array must not contain infs or NaNs' when using all channels (included marked bads)", "user": {"login": "mscheltienne", "id": 73893616, "node_id": "MDQ6VXNlcjczODkzNjE2", "avatar_url": "https://avatars.githubusercontent.com/u/73893616?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mscheltienne", "html_url": "https://github.com/mscheltienne", "followers_url": "https://api.github.com/users/mscheltienne/followers", "following_url": "https://api.github.com/users/mscheltienne/following{/other_user}", "gists_url": "https://api.github.com/users/mscheltienne/gists{/gist_id}", "starred_url": "https://api.github.com/users/mscheltienne/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mscheltienne/subscriptions", "organizations_url": "https://api.github.com/users/mscheltienne/orgs", "repos_url": "https://api.github.com/users/mscheltienne/repos", "events_url": "https://api.github.com/users/mscheltienne/events{/privacy}", "received_events_url": "https://api.github.com/users/mscheltienne/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2021-09-03T14:02:35Z", "updated_at": "2021-09-13T14:56:27Z", "closed_at": "2021-09-13T14:56:27Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "#### Describe the bug\r\n\r\nI have a dataset where I mark bad channels and then interpolate them. To keep track of which channel has been interpolated, I do not reset `raw.info['bads']`, and instead I prefer to pass `exclude=[]` to other MNE functions.\r\nHowever, this leads to something that looks like a bug to me.\r\n\r\n#### Steps to reproduce\r\n\r\nLoad sample dataset:\r\n```\r\nimport mne\r\nfrom pathlib import Path\r\n\r\ndata_folder = Path(mne.datasets.sample.data_path())\r\nraw_file = data_folder / 'MEG' / 'sample' / 'sample_audvis_filt-0-40_raw.fif'\r\nraw = mne.io.read_raw_fif(raw_file, preload=True)\r\nraw.pick_types(eeg=True)\r\nraw.info['bads'] = ['EEG 002', 'EEG 012', 'EEG 015']\r\nraw.interpolate_bads(reset_bads=False, mode='accurate')\r\n```\r\n\r\nPick all EEG channels including bads and fit ICA:\r\n\r\n```\r\npicks = mne.pick_types(raw.info, eeg=True, exclude=[])\r\nica = mne.preprocessing.ICA(n_components=0.99, max_iter='auto')\r\nica.fit(raw, picks=picks, reject_by_annotation=True)\r\n```\r\n\r\nThis code above fails with the traceback below.\r\n\r\nHowever, resetting the list of bads and fitting the ICA does work, which in practice should be the same as in both case I'm picking all channels:\r\n\r\n```\r\nraw.info['bads'] = list()\r\nica = mne.preprocessing.ICA(n_components=0.99, max_iter='auto')\r\nica.fit(raw, picks='eeg', reject_by_annotation=True)\r\n```\r\n\r\nTraceback:\r\n\r\n> /Users/scheltie/Documents/pyvenv/neurotin/lib/python3.8/site-packages/mne/preprocessing/ica.py:694: RuntimeWarning: overflow encountered in true_divide\r\n>   data /= self.pre_whitener_\r\n> Traceback (most recent call last):\r\n> \r\n>   File \"/var/folders/b1/kx2x00x95ls80zzkct4647sh0000gn/T/ipykernel_9109/2823392955.py\", line 15, in <module>\r\n>     ica.fit(raw, picks=picks, reject_by_annotation=True)\r\n> \r\n>   File \"<decorator-gen-420>\", line 24, in fit\r\n> \r\n>   File \"/Users/scheltie/Documents/pyvenv/neurotin/lib/python3.8/site-packages/mne/preprocessing/ica.py\", line 570, in fit\r\n>     self._fit_raw(inst, picks, start, stop, decim, reject, flat,\r\n> \r\n>   File \"/Users/scheltie/Documents/pyvenv/neurotin/lib/python3.8/site-packages/mne/preprocessing/ica.py\", line 614, in _fit_raw\r\n>     self._fit(data, 'raw')\r\n> \r\n>   File \"/Users/scheltie/Documents/pyvenv/neurotin/lib/python3.8/site-packages/mne/preprocessing/ica.py\", line 707, in _fit\r\n>     data = pca.fit_transform(data.T)\r\n> \r\n>   File \"/Users/scheltie/Documents/pyvenv/neurotin/lib/python3.8/site-packages/mne/utils/numerics.py\", line 817, in fit_transform\r\n>     U, S, _ = self._fit(X)\r\n> \r\n>   File \"/Users/scheltie/Documents/pyvenv/neurotin/lib/python3.8/site-packages/mne/utils/numerics.py\", line 855, in _fit\r\n>     U, S, V = _safe_svd(X, full_matrices=False)\r\n> \r\n>   File \"/Users/scheltie/Documents/pyvenv/neurotin/lib/python3.8/site-packages/mne/fixes.py\", line 69, in _safe_svd\r\n>     return linalg.svd(A, **kwargs)\r\n> \r\n>   File \"/Users/scheltie/Documents/pyvenv/neurotin/lib/python3.8/site-packages/scipy/linalg/decomp_svd.py\", line 108, in svd\r\n>     a1 = _asarray_validated(a, check_finite=check_finite)\r\n> \r\n>   File \"/Users/scheltie/Documents/pyvenv/neurotin/lib/python3.8/site-packages/scipy/_lib/_util.py\", line 293, in _asarray_validated\r\n>     a = toarray(a)\r\n> \r\n>   File \"/Users/scheltie/Documents/pyvenv/neurotin/lib/python3.8/site-packages/numpy/lib/function_base.py\", line 488, in asarray_chkfinite\r\n>     raise ValueError(\r\n> \r\n> ValueError: array must not contain infs or NaNs\r\n\r\n#### Additional information\r\n\r\nPlatform:      macOS-10.16-x86_64-i386-64bit\r\nPython:        3.8.10 (v3.8.10:3d8993a744, May  3 2021, 08:55:58)  [Clang 6.0 (clang-600.0.57)]\r\nExecutable:    /Users/scheltie/Documents/pyvenv/neurotin/bin/python3\r\nCPU:           i386: 12 cores\r\nMemory:        32.0 GB\r\n\r\nmne:           0.23.0\r\nnumpy:         1.21.2 {blas=openblas, lapack=openblas}\r\nscipy:         1.7.1\r\nmatplotlib:    3.4.3 {backend=Qt5Agg}\r\n\r\nsklearn:       0.24.2\r\nnumba:         0.53.1\r\nnibabel:       3.2.1\r\nnilearn:       0.8.0\r\ndipy:          1.4.1\r\ncupy:          Not found\r\npandas:        1.3.1\r\nmayavi:        4.7.3\r\npyvista:       0.31.3 {pyvistaqt=0.5.0, OpenGL 4.1 ATI-4.6.20 via AMD Radeon Pro 555X OpenGL Engine}\r\nvtk:           9.0.1\r\nPyQt5:         5.15.4\r\n", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/9716/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9716/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/9715", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9715/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9715/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9715/events", "html_url": "https://github.com/mne-tools/mne-python/issues/9715", "id": 986945738, "node_id": "MDU6SXNzdWU5ODY5NDU3Mzg=", "number": 9715, "title": "BUG: plot_alignment EEG projection incorrect", "user": {"login": "larsoner", "id": 2365790, "node_id": "MDQ6VXNlcjIzNjU3OTA=", "avatar_url": "https://avatars.githubusercontent.com/u/2365790?v=4", "gravatar_id": "", "url": "https://api.github.com/users/larsoner", "html_url": "https://github.com/larsoner", "followers_url": "https://api.github.com/users/larsoner/followers", "following_url": "https://api.github.com/users/larsoner/following{/other_user}", "gists_url": "https://api.github.com/users/larsoner/gists{/gist_id}", "starred_url": "https://api.github.com/users/larsoner/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/larsoner/subscriptions", "organizations_url": "https://api.github.com/users/larsoner/orgs", "repos_url": "https://api.github.com/users/larsoner/repos", "events_url": "https://api.github.com/users/larsoner/events{/privacy}", "received_events_url": "https://api.github.com/users/larsoner/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/mne-tools/mne-python/milestones/20", "html_url": "https://github.com/mne-tools/mne-python/milestone/20", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/milestones/20/labels", "id": 6675015, "node_id": "MDk6TWlsZXN0b25lNjY3NTAxNQ==", "number": 20, "title": "0.24", "description": "", "creator": {"login": "larsoner", "id": 2365790, "node_id": "MDQ6VXNlcjIzNjU3OTA=", "avatar_url": "https://avatars.githubusercontent.com/u/2365790?v=4", "gravatar_id": "", "url": "https://api.github.com/users/larsoner", "html_url": "https://github.com/larsoner", "followers_url": "https://api.github.com/users/larsoner/followers", "following_url": "https://api.github.com/users/larsoner/following{/other_user}", "gists_url": "https://api.github.com/users/larsoner/gists{/gist_id}", "starred_url": "https://api.github.com/users/larsoner/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/larsoner/subscriptions", "organizations_url": "https://api.github.com/users/larsoner/orgs", "repos_url": "https://api.github.com/users/larsoner/repos", "events_url": "https://api.github.com/users/larsoner/events{/privacy}", "received_events_url": "https://api.github.com/users/larsoner/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 53, "state": "closed", "created_at": "2021-04-19T12:32:46Z", "updated_at": "2021-11-03T16:14:55Z", "due_on": "2021-11-01T07:00:00Z", "closed_at": "2021-11-03T16:14:55Z"}, "comments": 0, "created_at": "2021-09-02T16:35:41Z", "updated_at": "2021-09-06T16:28:57Z", "closed_at": "2021-09-06T16:28:57Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "See https://github.com/mne-tools/mne-python/pull/9585#issuecomment-910546309", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/9715/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9715/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/9709", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9709/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9709/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9709/events", "html_url": "https://github.com/mne-tools/mne-python/issues/9709", "id": 985457564, "node_id": "MDU6SXNzdWU5ODU0NTc1NjQ=", "number": 9709, "title": "[BUG] `mne.transforms.compute_volume_registration` error for CT-MR registration", "user": {"login": "alexrockhill", "id": 13473576, "node_id": "MDQ6VXNlcjEzNDczNTc2", "avatar_url": "https://avatars.githubusercontent.com/u/13473576?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alexrockhill", "html_url": "https://github.com/alexrockhill", "followers_url": "https://api.github.com/users/alexrockhill/followers", "following_url": "https://api.github.com/users/alexrockhill/following{/other_user}", "gists_url": "https://api.github.com/users/alexrockhill/gists{/gist_id}", "starred_url": "https://api.github.com/users/alexrockhill/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alexrockhill/subscriptions", "organizations_url": "https://api.github.com/users/alexrockhill/orgs", "repos_url": "https://api.github.com/users/alexrockhill/repos", "events_url": "https://api.github.com/users/alexrockhill/events{/privacy}", "received_events_url": "https://api.github.com/users/alexrockhill/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2021-09-01T18:19:56Z", "updated_at": "2021-09-02T13:45:37Z", "closed_at": "2021-09-02T13:45:37Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Hmmm so this version that was the last one I had working before it was abstracted into a function gives the correct affine that is hard coded in the tutorial\r\n\r\n```\r\nimport os.path as op\r\n\r\nimport numpy as np\r\nimport nibabel as nib\r\n\r\nimport mne\r\n\r\nfrom dipy.align import (resample, affine_registration, center_of_mass,\r\n                                translation, rigid)\r\n\r\nmisc_path = mne.datasets.misc.data_path()\r\nT1 = nib.load(op.join(misc_path, 'seeg', 'sample_seeg', 'mri', 'T1.mgz'))\r\nCT = nib.load(op.join(misc_path, 'seeg', 'sample_seeg_CT.mgz'))\r\n\r\nmri_to = T1.get_fdata().copy()\r\nmri_to /= mri_to.max()\r\naffine_to = T1.affine\r\nct_from = CT.get_fdata().copy()\r\nct_from /= ct_from.max()\r\naffine_from = CT.affine\r\n\r\n# first optimize the translation on the zoomed images using\r\n# ``factors`` which looks at the image at different scales\r\ntrans_affine = affine_registration(\r\n    moving=ct_from,\r\n    static=mri_to,\r\n    moving_affine=affine_from,\r\n    static_affine=affine_to,\r\n    nbins=32,\r\n    metric='MI',\r\n    pipeline=[center_of_mass, translation])[1]\r\n\r\nCT_translated = resample(moving=CT.get_fdata(),\r\n                         static=T1.get_fdata(),\r\n                         moving_affine=CT.affine,\r\n                         static_affine=T1.affine,\r\n                         between_affine=trans_affine)\r\n\r\n# Now, fine-tune the registration\r\nreg_affine = affine_registration(\r\n    moving=CT_translated.get_fdata(),\r\n    static=T1.get_fdata(),\r\n    moving_affine=CT_translated.affine,\r\n    static_affine=T1.affine,\r\n    nbins=32,\r\n    metric='MI',\r\n    pipeline=[rigid])[1]\r\n\r\nprint(np.dot(trans_affine, reg_affine))\r\n```\r\n\r\ngives\r\n\r\n```\r\narray([\r\n    [0.99270756, -0.03243313, 0.11610254, -133.094156],\r\n    [0.04374389, 0.99439665, -0.09623816, -97.58320673],\r\n    [-0.11233068, 0.10061512, 0.98856381, -84.45551601],\r\n    [0., 0., 0., 1.]])\r\n```\r\n\r\nBut when I run what I thought was the exact same version with the version of `transforms.py` in `main`:\r\n\r\n```\r\nCT_orig = CT\r\nreg_affine, _ = mne.transforms.compute_volume_registration(\r\n    CT_orig, T1, pipeline='rigids')\r\n```\r\n\r\nI get\r\n\r\n```\r\narray([[   0.92903491,    0.32371046,    0.17918057, -168.69835435],\r\n       [  -0.32354052,    0.94570636,   -0.03100004,  -46.79813635],\r\n       [  -0.17948724,   -0.02917206,    0.98332768,  -57.91772517],\r\n       [   0.        ,    0.        ,    0.        ,    1.        ]])\r\n```\r\n\r\nThis is a bit perplexing as by design they are supposed to do the exact same thing.\r\n", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/9709/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9709/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/9707", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9707/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9707/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9707/events", "html_url": "https://github.com/mne-tools/mne-python/issues/9707", "id": 984960999, "node_id": "MDU6SXNzdWU5ODQ5NjA5OTk=", "number": 9707, "title": "_repr_html_ of Info missing many data channels", "user": {"login": "agramfort", "id": 161052, "node_id": "MDQ6VXNlcjE2MTA1Mg==", "avatar_url": "https://avatars.githubusercontent.com/u/161052?v=4", "gravatar_id": "", "url": "https://api.github.com/users/agramfort", "html_url": "https://github.com/agramfort", "followers_url": "https://api.github.com/users/agramfort/followers", "following_url": "https://api.github.com/users/agramfort/following{/other_user}", "gists_url": "https://api.github.com/users/agramfort/gists{/gist_id}", "starred_url": "https://api.github.com/users/agramfort/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/agramfort/subscriptions", "organizations_url": "https://api.github.com/users/agramfort/orgs", "repos_url": "https://api.github.com/users/agramfort/repos", "events_url": "https://api.github.com/users/agramfort/events{/privacy}", "received_events_url": "https://api.github.com/users/agramfort/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2021-09-01T10:06:03Z", "updated_at": "2021-09-16T14:15:22Z", "closed_at": "2021-09-16T14:15:22Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "the _repr_html_ from Info class only shows a subset of channels eg misses iEEG and ECoG. The logic here https://github.com/mne-tools/mne-python/blob/main/mne/io/meas_info.py#L822 should be changed to get all data channels (even all channels) and show the counts.", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/9707/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9707/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/9703", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9703/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9703/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9703/events", "html_url": "https://github.com/mne-tools/mne-python/issues/9703", "id": 982016972, "node_id": "MDU6SXNzdWU5ODIwMTY5NzI=", "number": 9703, "title": "suspicious behavior  in pick function in channels (UpdateChannelsMixin.pick)", "user": {"login": "evgenygoldstein", "id": 84768107, "node_id": "MDQ6VXNlcjg0NzY4MTA3", "avatar_url": "https://avatars.githubusercontent.com/u/84768107?v=4", "gravatar_id": "", "url": "https://api.github.com/users/evgenygoldstein", "html_url": "https://github.com/evgenygoldstein", "followers_url": "https://api.github.com/users/evgenygoldstein/followers", "following_url": "https://api.github.com/users/evgenygoldstein/following{/other_user}", "gists_url": "https://api.github.com/users/evgenygoldstein/gists{/gist_id}", "starred_url": "https://api.github.com/users/evgenygoldstein/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/evgenygoldstein/subscriptions", "organizations_url": "https://api.github.com/users/evgenygoldstein/orgs", "repos_url": "https://api.github.com/users/evgenygoldstein/repos", "events_url": "https://api.github.com/users/evgenygoldstein/events{/privacy}", "received_events_url": "https://api.github.com/users/evgenygoldstein/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2021-08-29T07:18:03Z", "updated_at": "2021-09-07T12:54:56Z", "closed_at": "2021-09-07T12:54:56Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "#### Describe the bug\r\nwhen working with raw data of eeg and trying to filter the channels of raw data class by using\r\n\"pick\" function the results might be unexpected, the returned raw file could contain less channels then you would expect.\r\n\r\n\r\n#### Steps to reproduce\r\n```py\r\nimport mne\r\nfrom mne.datasets import sample\r\n\r\nprint(__doc__)\r\n\r\ndata_path = sample.data_path()\r\n\r\nraw = mne.io.read_raw_fif(data_path + '/MEG/sample/sample_audvis_raw.fif')\r\nprint(raw.ch_names) # a very long list of channels names 'MEG 0113', 'MEG 0112',  'MEG 0111', 'MEG 0122', 'MEG 0123', 'MEG 0121'.......\r\nraw = raw.pick(['MEG 0113', 'MEG 0112', 'Meg 0111', 'MEG 0111', 'MEG 0122', 'MEG 0123', 'MEG 0121', 'MEG 0132', 'MEG 0133', 'MEG 0131', 'MEG 0143', 'MEG 0142', 'MEG 0141', 'MEG 0213', 'MEG 0212', 'MEG 0211', 'MEG 0222', 'MEG 0223', 'MEG 0221', 'MEG 0232', 'MEG 0233', 'MEG 0231', 'MEG 0243', 'MEG 0242', 'MEG 0241', 'MEG 0313', 'MEG 0312', 'MEG 0311', 'MEG 0322', 'MEG 0323', 'MEG 0321', 'MEG 0333', 'MEG 0332', 'MEG 0331', 'MEG 0343', 'MEG 0342', 'MEG 0341', 'MEG 0413', 'MEG 0412', 'MEG 0411', 'MEG 0422', 'MEG 0423', 'MEG 0421', 'MEG 0432', 'MEG 0433', 'MEG 0431', 'MEG 0443', 'MEG 0442', 'MEG 0441', 'MEG 0513', 'MEG 0512', 'MEG 0511', 'MEG 0523', 'MEG 0522', 'MEG 0521', 'MEG 0532', 'MEG 0533', 'MEG 0531', 'MEG 0542', 'MEG 0543', 'MEG 0541', 'MEG 0613', 'MEG 0612', 'MEG 0611', 'MEG 0622', 'MEG 0623', 'MEG 0621', 'MEG 0633', 'MEG 0632'])\r\nprint(raw.ch_names) # list of only two channels\r\n```\r\n\r\n\r\n#### Expected results\r\n```\r\n['MEG 0113', 'MEG 0112', 'MEG 0111', 'MEG 0122', 'MEG 0123', 'MEG 0121', 'MEG 0132', 'MEG 0133', 'MEG 0131', 'MEG 0143', 'MEG 0142', 'MEG 0141', 'MEG 0213', 'MEG 0212', 'MEG 0211', 'MEG 0222', 'MEG 0223', 'MEG 0221', 'MEG 0232', 'MEG 0233', 'MEG 0231', 'MEG 0243', 'MEG 0242', 'MEG 0241', 'MEG 0313', 'MEG 0312', 'MEG 0311', 'MEG 0322', 'MEG 0323', 'MEG 0321', 'MEG 0333', 'MEG 0332', 'MEG 0331', 'MEG 0343', 'MEG 0342', 'MEG 0341', 'MEG 0413', 'MEG 0412', 'MEG 0411', 'MEG 0422', 'MEG 0423', 'MEG 0421', 'MEG 0432', 'MEG 0433', 'MEG 0431', 'MEG 0443', 'MEG 0442', 'MEG 0441', 'MEG 0513', 'MEG 0512', 'MEG 0511', 'MEG 0523', 'MEG 0522', 'MEG 0521', 'MEG 0532', 'MEG 0533', 'MEG 0531', 'MEG 0542', 'MEG 0543', 'MEG 0541', 'MEG 0613', 'MEG 0612', 'MEG 0611', 'MEG 0622', 'MEG 0623', 'MEG 0621', 'MEG 0633', 'MEG 0632']\r\n```\r\n\r\n#### Actual results\r\n```\r\n['MEG 0113', 'MEG 0112']\r\n```\r\n\r\n#### Additional information\r\nthe reason is that a loop in _picks_str_to_idx, pick.py:1111\r\nstops iteration the moment it encounter name of the channel which is not in the raw instance original list of names\r\n\r\nhttps://github.com/mne-tools/mne-python/blob/2606a9bbf53f038e3c79d2799442ea9edb7fd2dc/mne/io/pick.py#L1109-L1114", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/9703/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9703/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/9700", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9700/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9700/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9700/events", "html_url": "https://github.com/mne-tools/mne-python/issues/9700", "id": 979639097, "node_id": "MDU6SXNzdWU5Nzk2MzkwOTc=", "number": 9700, "title": "Error when importing mne with python3.6", "user": {"login": "ntolley", "id": 55253912, "node_id": "MDQ6VXNlcjU1MjUzOTEy", "avatar_url": "https://avatars.githubusercontent.com/u/55253912?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ntolley", "html_url": "https://github.com/ntolley", "followers_url": "https://api.github.com/users/ntolley/followers", "following_url": "https://api.github.com/users/ntolley/following{/other_user}", "gists_url": "https://api.github.com/users/ntolley/gists{/gist_id}", "starred_url": "https://api.github.com/users/ntolley/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ntolley/subscriptions", "organizations_url": "https://api.github.com/users/ntolley/orgs", "repos_url": "https://api.github.com/users/ntolley/repos", "events_url": "https://api.github.com/users/ntolley/events{/privacy}", "received_events_url": "https://api.github.com/users/ntolley/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2021-08-25T21:35:47Z", "updated_at": "2021-08-26T17:58:19Z", "closed_at": "2021-08-26T17:58:18Z", "author_association": "NONE", "active_lock_reason": null, "body": "#### Describe the bug\r\nRunning `import mne` fails.\r\n\r\n#### Steps to reproduce\r\nI was able to reproduce in a fresh conda environment with python3.6 on Linux Mint 20. We noticed this failing in our CircleCI builds in [hnn-core](https://github.com/jonescompneurolab/hnn-core)\r\n\r\n#### Expected results\r\nSuccessful import.\r\n\r\n#### Actual results\r\n```\r\nimport mne\r\nTraceback (most recent call last):\r\n  File \"<stdin>\", line 1, in <module>\r\n  File \"/home/ntolley/anaconda3/envs/hnn_test/lib/python3.6/site-packages/mne/__init__.py\", line 25, in <module>\r\n    from .io.pick import (pick_types, pick_channels,\r\n  File \"/home/ntolley/anaconda3/envs/hnn_test/lib/python3.6/site-packages/mne/io/__init__.py\", line 15, in <module>\r\n    from .base import BaseRaw\r\n  File \"/home/ntolley/anaconda3/envs/hnn_test/lib/python3.6/site-packages/mne/io/base.py\", line 43, in <module>\r\n    from ..fixes import nullcontext\r\nImportError: cannot import name 'nullcontext'\r\n\r\n```\r\n", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/9700/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9700/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/9683", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9683/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9683/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9683/events", "html_url": "https://github.com/mne-tools/mne-python/issues/9683", "id": 975857488, "node_id": "MDU6SXNzdWU5NzU4NTc0ODg=", "number": 9683, "title": "Colorbar does not plot for viz.topoplot", "user": {"login": "moonj94", "id": 53019885, "node_id": "MDQ6VXNlcjUzMDE5ODg1", "avatar_url": "https://avatars.githubusercontent.com/u/53019885?v=4", "gravatar_id": "", "url": "https://api.github.com/users/moonj94", "html_url": "https://github.com/moonj94", "followers_url": "https://api.github.com/users/moonj94/followers", "following_url": "https://api.github.com/users/moonj94/following{/other_user}", "gists_url": "https://api.github.com/users/moonj94/gists{/gist_id}", "starred_url": "https://api.github.com/users/moonj94/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/moonj94/subscriptions", "organizations_url": "https://api.github.com/users/moonj94/orgs", "repos_url": "https://api.github.com/users/moonj94/repos", "events_url": "https://api.github.com/users/moonj94/events{/privacy}", "received_events_url": "https://api.github.com/users/moonj94/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 16, "created_at": "2021-08-20T19:13:36Z", "updated_at": "2021-08-23T17:16:54Z", "closed_at": "2021-08-23T17:13:35Z", "author_association": "NONE", "active_lock_reason": null, "body": "I am trying to visualize a topography with a colorbar, but I cannot for the life of me get the colorbar to show. I am using MNE 0.23.0.\r\n\r\nHere is my code:\r\n\r\n```\r\nfig,ax=plt.subplots(1,1,figsize=(6,6),dpi=1200)\r\nclim = dict(kind='value', lims=[4, 8, 12])\r\n\r\nim,cm=mne.viz.plot_topomap(dist[0,:],raw_concat.info,contours=5,axes=ax,cmap='viridis',vmin=np.min(dist),vmax=np.max(dist))\r\nax_x_start = 0.95\r\nax_x_width = 0.04\r\nax_y_start = 0.1\r\nax_y_height = 0.9\r\ncbar_ax = fig.add_axes([ax_x_start, ax_y_start, ax_x_width, ax_y_height])\r\n# clb = plt.colorbar(cm, cax=cbar_ax,ax=ax)\r\nunit_label='MDS distance'\r\n# plt.colorbar(cm)\r\nclb = fig.colorbar(cm, cax=cbar_ax,ax=ax)\r\nclb.ax.set_title(unit_label,fontsize=14) # title on top of colorbar\r\nplt.show()\r\n```\r\n\r\nI have also tried (following matplotlib example):\r\n```\r\nfig,ax=plt.subplots(1,1,figsize=(6,6),dpi=1200)\r\nclim = dict(kind='value', lims=[4, 8, 12])\r\n\r\nim,cm=mne.viz.plot_topomap(dist[0,:],raw_concat.info,contours=5,axes=ax,cmap='viridis',vmin=np.min(dist),vmax=np.max(dist))\r\n\r\ndivider = make_axes_locatable(ax)\r\ncax = divider.append_axes(\"right\", size=\"5%\", pad=0.05)\r\nplt.colorbar(im,cax=cax,ax=ax)\r\n```\r\n\r\nYour help is very much appreciated!", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/9683/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9683/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/9675", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9675/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9675/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9675/events", "html_url": "https://github.com/mne-tools/mne-python/issues/9675", "id": 974582412, "node_id": "MDU6SXNzdWU5NzQ1ODI0MTI=", "number": 9675, "title": "Typo in preprocessing example 15 - Handling bad channels", "user": {"login": "mscheltienne", "id": 73893616, "node_id": "MDQ6VXNlcjczODkzNjE2", "avatar_url": "https://avatars.githubusercontent.com/u/73893616?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mscheltienne", "html_url": "https://github.com/mscheltienne", "followers_url": "https://api.github.com/users/mscheltienne/followers", "following_url": "https://api.github.com/users/mscheltienne/following{/other_user}", "gists_url": "https://api.github.com/users/mscheltienne/gists{/gist_id}", "starred_url": "https://api.github.com/users/mscheltienne/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mscheltienne/subscriptions", "organizations_url": "https://api.github.com/users/mscheltienne/orgs", "repos_url": "https://api.github.com/users/mscheltienne/repos", "events_url": "https://api.github.com/users/mscheltienne/events{/privacy}", "received_events_url": "https://api.github.com/users/mscheltienne/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2021-08-19T11:52:58Z", "updated_at": "2021-08-19T13:13:08Z", "closed_at": "2021-08-19T13:13:08Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "Maybe I am mistaken, but this looks like a typo: https://mne.tools/stable/auto_tutorials/preprocessing/15_handling_bad_channels.html#when-to-look-for-bad-channels\r\n\r\n> After the data has been collected, you can do a more thorough check for bad channels by browsing the raw data using \r\n> mne.io.Raw.plot(), with any projectors or ICA applied. Finally, you can compute offline averages (again with projectors, \r\n> ICA, and EEG referencing disabled) to look for channels with unusual properties.\r\n\r\nFirst sentence should be:\r\n\r\n> [...] without any projectors or ICA applied.", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/9675/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9675/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/9673", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9673/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9673/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9673/events", "html_url": "https://github.com/mne-tools/mne-python/issues/9673", "id": 974042585, "node_id": "MDU6SXNzdWU5NzQwNDI1ODU=", "number": 9673, "title": "mismatch between automated coreg and GUI", "user": {"login": "drammock", "id": 1810515, "node_id": "MDQ6VXNlcjE4MTA1MTU=", "avatar_url": "https://avatars.githubusercontent.com/u/1810515?v=4", "gravatar_id": "", "url": "https://api.github.com/users/drammock", "html_url": "https://github.com/drammock", "followers_url": "https://api.github.com/users/drammock/followers", "following_url": "https://api.github.com/users/drammock/following{/other_user}", "gists_url": "https://api.github.com/users/drammock/gists{/gist_id}", "starred_url": "https://api.github.com/users/drammock/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/drammock/subscriptions", "organizations_url": "https://api.github.com/users/drammock/orgs", "repos_url": "https://api.github.com/users/drammock/repos", "events_url": "https://api.github.com/users/drammock/events{/privacy}", "received_events_url": "https://api.github.com/users/drammock/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2021-08-18T20:46:00Z", "updated_at": "2021-08-23T17:57:05Z", "closed_at": "2021-08-23T17:57:05Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "I tested out the new automated coreg today, and got different results from the old GUI:\r\n\r\n#### GUI\r\n![coreg-gui](https://user-images.githubusercontent.com/1810515/129969186-c7f17083-7860-4dc1-9487-97493922fb24.png)\r\n\r\nI got this by setting fiducial point matching to 'mri fiducials' in the fit settings, then clicking \"fit icp\" under trans/rot (no scaling). \r\n\r\n\r\n#### automated + plot_alignment\r\n![plot-alignment](https://user-images.githubusercontent.com/1810515/129969196-80555ef8-0848-48d8-9f58-2a8bbcd63074.png)\r\n\r\ncode that led to the plot_alignment figure:\r\n\r\n```py\r\nraw_fname = os.path.join(data_root, subject, 'raw_fif', f'{subject}_raw.fif')\r\ninfo = mne.io.read_info(raw_fname)\r\ncoreg = mne.coreg.Coregistration(\r\n    info, subject=surrogate, subjects_dir=subjects_dir)\r\ncoreg.set_scale_mode('3-axis')\r\ncoreg._icp_fid_match = 'matched'\r\ncoreg.fit_icp(n_iterations=30)\r\nmne.viz.plot_alignment(\r\n    info, coreg.trans, subject=surrogate, subjects_dir=subjects_dir,\r\n    surfaces=dict(head=0.9), dig=True, mri_fiducials=True, meg=False)\r\n```", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/9673/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9673/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/9660", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9660/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9660/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9660/events", "html_url": "https://github.com/mne-tools/mne-python/issues/9660", "id": 967552323, "node_id": "MDU6SXNzdWU5Njc1NTIzMjM=", "number": 9660, "title": "circle-full build is broken due to upstream bugs", "user": {"login": "drammock", "id": 1810515, "node_id": "MDQ6VXNlcjE4MTA1MTU=", "avatar_url": "https://avatars.githubusercontent.com/u/1810515?v=4", "gravatar_id": "", "url": "https://api.github.com/users/drammock", "html_url": "https://github.com/drammock", "followers_url": "https://api.github.com/users/drammock/followers", "following_url": "https://api.github.com/users/drammock/following{/other_user}", "gists_url": "https://api.github.com/users/drammock/gists{/gist_id}", "starred_url": "https://api.github.com/users/drammock/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/drammock/subscriptions", "organizations_url": "https://api.github.com/users/drammock/orgs", "repos_url": "https://api.github.com/users/drammock/repos", "events_url": "https://api.github.com/users/drammock/events{/privacy}", "received_events_url": "https://api.github.com/users/drammock/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2021-08-11T22:10:46Z", "updated_at": "2021-09-20T17:01:54Z", "closed_at": "2021-09-20T17:01:54Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "Here are the failing tests:\r\n\r\nhttps://app.circleci.com/pipelines/github/mne-tools/mne-python/9551/workflows/19eba59d-484b-4bec-92e3-70c15b58b516/jobs/32524/tests\r\n\r\nhere are the upstream fixes:\r\n\r\n- https://github.com/nilearn/nilearn/pull/2916\r\n- https://github.com/python-quantities/python-quantities/pull/189\r\n\r\nThis issue is just for keeping track of the various pieces.", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/9660/reactions", "total_count": 1, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9660/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/9654", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9654/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9654/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9654/events", "html_url": "https://github.com/mne-tools/mne-python/issues/9654", "id": 963068784, "node_id": "MDU6SXNzdWU5NjMwNjg3ODQ=", "number": 9654, "title": "Inconsistent environment variable name for Sleep Physionet dataset", "user": {"login": "hubertjb", "id": 6500858, "node_id": "MDQ6VXNlcjY1MDA4NTg=", "avatar_url": "https://avatars.githubusercontent.com/u/6500858?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hubertjb", "html_url": "https://github.com/hubertjb", "followers_url": "https://api.github.com/users/hubertjb/followers", "following_url": "https://api.github.com/users/hubertjb/following{/other_user}", "gists_url": "https://api.github.com/users/hubertjb/gists{/gist_id}", "starred_url": "https://api.github.com/users/hubertjb/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hubertjb/subscriptions", "organizations_url": "https://api.github.com/users/hubertjb/orgs", "repos_url": "https://api.github.com/users/hubertjb/repos", "events_url": "https://api.github.com/users/hubertjb/events{/privacy}", "received_events_url": "https://api.github.com/users/hubertjb/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2021-08-06T21:56:14Z", "updated_at": "2021-10-12T21:45:55Z", "closed_at": "2021-10-12T21:45:55Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "The docstring of `mne.datasets.sleep_physionet.age.fetch_data` states the environment variable pointing to the Sleep Physionet dataset should be \"MNE_DATASETS_PHYSIONET_SLEEP_PATH\": https://github.com/mne-tools/mne-python/blob/855edbf48835bcee80e773eb7047d0a4caa14a1c/mne/datasets/sleep_physionet/age.py#L47\r\n\r\nHowever the code looks instead for \"PHYSIONET_SLEEP_PATH\": https://github.com/mne-tools/mne-python/blob/855edbf48835bcee80e773eb7047d0a4caa14a1c/mne/datasets/sleep_physionet/_utils.py#L77\r\n\r\nGiven that other datasets, e.g. `eegbci` use the format \"MNE_DATASETS_..._PATH\": https://github.com/mne-tools/mne-python/blob/855edbf48835bcee80e773eb7047d0a4caa14a1c/mne/datasets/eegbci/eegbci.py#L62 I suppose the code should be changed to what the docstring states?\r\n\r\nI just wanted to double check that is correct before submitting a PR. Thanks!", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/9654/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9654/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/9641", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9641/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9641/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9641/events", "html_url": "https://github.com/mne-tools/mne-python/issues/9641", "id": 960564470, "node_id": "MDU6SXNzdWU5NjA1NjQ0NzA=", "number": 9641, "title": "Regression in \"How to plot topomaps the way EEGLAB does\" example - montage.get_positions() returns different positions than the channel positons in evoked object.", "user": {"login": "mmagnuski", "id": 8452354, "node_id": "MDQ6VXNlcjg0NTIzNTQ=", "avatar_url": "https://avatars.githubusercontent.com/u/8452354?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mmagnuski", "html_url": "https://github.com/mmagnuski", "followers_url": "https://api.github.com/users/mmagnuski/followers", "following_url": "https://api.github.com/users/mmagnuski/following{/other_user}", "gists_url": "https://api.github.com/users/mmagnuski/gists{/gist_id}", "starred_url": "https://api.github.com/users/mmagnuski/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mmagnuski/subscriptions", "organizations_url": "https://api.github.com/users/mmagnuski/orgs", "repos_url": "https://api.github.com/users/mmagnuski/repos", "events_url": "https://api.github.com/users/mmagnuski/events{/privacy}", "received_events_url": "https://api.github.com/users/mmagnuski/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2021-08-04T14:42:55Z", "updated_at": "2021-08-04T21:35:19Z", "closed_at": "2021-08-04T21:35:19Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "Hi, I just noticed that the [How to plot topomaps the way EEGLAB does](https://mne.tools/dev/auto_examples/visualization/eeglab_head_sphere.html) example no longer shows correct EEGLAB-like channel layout:\r\n<img src=https://user-images.githubusercontent.com/8452354/128192641-5ee112c4-621e-4584-b44e-f85330260e73.png width=500pix>\r\nthe two layouts are the same on the current development and stable versions (0.23), which is incorrect. On version 0.22 these layouts are different (and correct):\r\n<img src=https://user-images.githubusercontent.com/8452354/128193303-2cbe9050-314e-475d-aab2-df7106d132ba.png width=500pix>\r\n\r\nThe sphere parameters used in the example are not the same as before and this seems due to a change in how channel positions are obtained. Previously they were dug out from `.info['chs']` dictionary, now `montage.get_positions()` is used. However these two are not exchangable because the applied montage is in head coordinates, while the positions returned by `.get_positions()` show 'unknown' coord_frame.\r\nIn the same example doing:\r\n```python\r\npos_mntg = biosemi_montage.get_positions()['ch_pos']['Oz']\r\nch_idx = fake_evoked.ch_names.index('Oz')\r\npos_evkd = fake_evoked.info['chs'][ch_idx]['loc'][:3]\r\n\r\nprint([f'{v:0.5f}' for v in pos_mntg])\r\nprint([f'{v:0.5f}' for v in pos_evkd])\r\n```\r\ngives different positions:\r\n```\r\n['0.00000', '-0.09494', '-0.00332']\r\n['0.00000', '-0.09494', '0.03683']\r\n```\r\nI'm not sure what the best solution should be - is the intent of `montage.get_positions()` is to give channel positions in unknown coord frame? If so, the example should be reverted to use the old and ugly `.info['chs'][idx]['loc'][:3]` way of obtaining channel positions.", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/9641/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9641/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/9639", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9639/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9639/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9639/events", "html_url": "https://github.com/mne-tools/mne-python/issues/9639", "id": 959395917, "node_id": "MDU6SXNzdWU5NTkzOTU5MTc=", "number": 9639, "title": "BEM changes depending on calling path", "user": {"login": "jstout211", "id": 2371720, "node_id": "MDQ6VXNlcjIzNzE3MjA=", "avatar_url": "https://avatars.githubusercontent.com/u/2371720?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jstout211", "html_url": "https://github.com/jstout211", "followers_url": "https://api.github.com/users/jstout211/followers", "following_url": "https://api.github.com/users/jstout211/following{/other_user}", "gists_url": "https://api.github.com/users/jstout211/gists{/gist_id}", "starred_url": "https://api.github.com/users/jstout211/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jstout211/subscriptions", "organizations_url": "https://api.github.com/users/jstout211/orgs", "repos_url": "https://api.github.com/users/jstout211/repos", "events_url": "https://api.github.com/users/jstout211/events{/privacy}", "received_events_url": "https://api.github.com/users/jstout211/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2021-08-03T18:53:09Z", "updated_at": "2021-08-06T15:00:41Z", "closed_at": "2021-08-06T15:00:41Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "\r\n#### Describe the bug\r\nThe BEM model is different depending on where the the code is called from.  From what I can tell it appears to be missing the CRAS offset.  This is  in the viz.plot_aligment, but I have also seen it in the source localization outputs.\r\n\r\n\r\n#### Steps to reproduce\r\n``` \r\nimport mne\r\nimport os, os.path as op\r\n\r\nsubjects_dir=op.join(os.environ['HOME'], \r\n                 'mne_data/MNE-somato-data/derivatives/freesurfer/subjects')\r\n\r\n#In mne_data directory\r\nos.chdir(subjects_dir)\r\nmne.viz.plot_bem('01', subjects_dir=subjects_dir)\r\n\r\n#In home directory\r\nos.chdir(os.environ['HOME'])\r\nmne.viz.plot_bem('01', subjects_dir=subjects_dir)\r\n```\r\n\r\n\r\n#### Expected results\r\n![image](https://user-images.githubusercontent.com/2371720/128069687-02ef4d32-9acd-4d1e-95b8-fae05676f88e.png)\r\n\r\n\r\n\r\n#### Actual results\r\n![image](https://user-images.githubusercontent.com/2371720/128069608-5cec4853-621b-48ac-92da-e739c4d92606.png)\r\n\r\n\r\n#### Additional information\r\nPlatform:      Linux-5.4.0-80-generic-x86_64-with-glibc2.10\r\nPython:        3.8.8 (default, Feb 24 2021, 21:46:12)  [GCC 7.3.0]\r\nExecutable:    /home/jstout/miniconda3/envs/enigma/bin/python\r\nCPU:           x86_64: 20 cores\r\nMemory:        125.5 GB\r\n\r\nmne:           0.23.0\r\nnumpy:         1.20.1 {blas=openblas, lapack=openblas}\r\nscipy:         1.6.1\r\nmatplotlib:    3.3.4 {backend=module://ipykernel.pylab.backend_inline}\r\n\r\nsklearn:       0.24.1\r\nnumba:         0.53.0\r\nnibabel:       3.2.1\r\nnilearn:       0.7.1\r\ndipy:          1.4.0\r\ncupy:          Not found\r\npandas:        1.2.3\r\nmayavi:        Not found\r\npyvista:       0.29.0 {pyvistaqt=0.3.0, OpenGL 4.5.0 NVIDIA 460.91.03 via Quadro RTX 8000/PCIe/SSE2}\r\nvtk:           9.0.1\r\nPyQt5:         5.15.4\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/9639/reactions", "total_count": 1, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9639/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/9638", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9638/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9638/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9638/events", "html_url": "https://github.com/mne-tools/mne-python/issues/9638", "id": 959346608, "node_id": "MDU6SXNzdWU5NTkzNDY2MDg=", "number": 9638, "title": "[BUG] `trans` estimation from `mne._freesurfer.get_mni_fiducials` differs from sample `trans`", "user": {"login": "alexrockhill", "id": 13473576, "node_id": "MDQ6VXNlcjEzNDczNTc2", "avatar_url": "https://avatars.githubusercontent.com/u/13473576?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alexrockhill", "html_url": "https://github.com/alexrockhill", "followers_url": "https://api.github.com/users/alexrockhill/followers", "following_url": "https://api.github.com/users/alexrockhill/following{/other_user}", "gists_url": "https://api.github.com/users/alexrockhill/gists{/gist_id}", "starred_url": "https://api.github.com/users/alexrockhill/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alexrockhill/subscriptions", "organizations_url": "https://api.github.com/users/alexrockhill/orgs", "repos_url": "https://api.github.com/users/alexrockhill/repos", "events_url": "https://api.github.com/users/alexrockhill/events{/privacy}", "received_events_url": "https://api.github.com/users/alexrockhill/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2021-08-03T17:43:19Z", "updated_at": "2021-08-09T02:50:38Z", "closed_at": "2021-08-09T02:50:38Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "ASAIK these two values should be the same, but they are not:\r\n\r\n```\r\nimport os.path as op\r\nfrom mne.datasets import sample\r\nimport mne\r\n\r\ndata_path = sample.data_path()\r\nsubject = 'sample'\r\nsample_dir = op.join(data_path, 'MEG', subject)\r\nsubjects_dir = op.join(data_path, 'subjects')\r\n\r\ntrans_sample = mne.read_trans(op.join(sample_dir, 'sample_audvis_raw-trans.fif'))\r\nprint(trans_sample)\r\n\r\nlpa, nasion, rpa = mne._freesurfer.get_mni_fiducials(\r\n    subject, subjects_dir, verbose=verbose)\r\nmontage = mne.channels.make_dig_montage(\r\n    lpa=lpa['r'], nasion=nasion['r'], rpa=rpa['r'], coord_frame='mri')\r\ntrans_computed = mne.transforms.invert_transform(mne.channels.compute_native_head_t(montage))\r\nprint(trans_computed)\r\n```", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/9638/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9638/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/9635", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9635/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9635/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9635/events", "html_url": "https://github.com/mne-tools/mne-python/issues/9635", "id": 958305118, "node_id": "MDU6SXNzdWU5NTgzMDUxMTg=", "number": 9635, "title": "[BUG] Coordinate Frame not Saved", "user": {"login": "alexrockhill", "id": 13473576, "node_id": "MDQ6VXNlcjEzNDczNTc2", "avatar_url": "https://avatars.githubusercontent.com/u/13473576?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alexrockhill", "html_url": "https://github.com/alexrockhill", "followers_url": "https://api.github.com/users/alexrockhill/followers", "following_url": "https://api.github.com/users/alexrockhill/following{/other_user}", "gists_url": "https://api.github.com/users/alexrockhill/gists{/gist_id}", "starred_url": "https://api.github.com/users/alexrockhill/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alexrockhill/subscriptions", "organizations_url": "https://api.github.com/users/alexrockhill/orgs", "repos_url": "https://api.github.com/users/alexrockhill/repos", "events_url": "https://api.github.com/users/alexrockhill/events{/privacy}", "received_events_url": "https://api.github.com/users/alexrockhill/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2021-08-02T16:22:40Z", "updated_at": "2021-08-19T21:51:48Z", "closed_at": "2021-08-19T21:51:48Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "I'm not sure if I'm missing something obvious but it looks like the coordinate frame doesn't survive the round trip to and from disk. I'm not sure why that is.\r\n\r\n```\r\nimport numpy as np\r\nimport mne\r\n\r\nfor ch_type in ('eeg', 'seeg', 'ecog', 'dbs'):\r\n    raw = mne.io.RawArray(\r\n        np.random.random((10, 1000)),\r\n        mne.create_info([f'ch{i}' for i in range(1, 11)],  1000, [ch_type] * 10))\r\n    montage = mne.channels.make_dig_montage(\r\n        {ch: np.random.random((3,)) for ch in raw.ch_names}, lpa=[1, 0, 0], nasion=[0, 0.1, 0], rpa=[-1, 0, 0],\r\n        coord_frame='mri')\r\n    raw.set_montage(montage)\r\n    raw.save('tmp-raw.fif', overwrite=True, verbose=False)\r\n    print(ch_type)\r\n    print('Before: ', raw.info['chs'][0]['coord_frame'])\r\n    info = mne.io.read_info('tmp-raw.fif')\r\n    print('After : ', info['chs'][0]['coord_frame'])\r\n```\r\n\r\nNote, it appears this is specific to `seeg`, `ecog` and `dbs`, it works for `eeg`.", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/9635/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9635/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/9627", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9627/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9627/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9627/events", "html_url": "https://github.com/mne-tools/mne-python/issues/9627", "id": 956295151, "node_id": "MDU6SXNzdWU5NTYyOTUxNTE=", "number": 9627, "title": "[BUG] `mne.viz.plot_alignment` silently assumes unknown coordinate frame is in head", "user": {"login": "alexrockhill", "id": 13473576, "node_id": "MDQ6VXNlcjEzNDczNTc2", "avatar_url": "https://avatars.githubusercontent.com/u/13473576?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alexrockhill", "html_url": "https://github.com/alexrockhill", "followers_url": "https://api.github.com/users/alexrockhill/followers", "following_url": "https://api.github.com/users/alexrockhill/following{/other_user}", "gists_url": "https://api.github.com/users/alexrockhill/gists{/gist_id}", "starred_url": "https://api.github.com/users/alexrockhill/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alexrockhill/subscriptions", "organizations_url": "https://api.github.com/users/alexrockhill/orgs", "repos_url": "https://api.github.com/users/alexrockhill/repos", "events_url": "https://api.github.com/users/alexrockhill/events{/privacy}", "received_events_url": "https://api.github.com/users/alexrockhill/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2021-07-30T00:16:31Z", "updated_at": "2021-08-19T21:51:40Z", "closed_at": "2021-08-19T21:51:40Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "@larsoner suggested warning that the coordinate frame is unknown might be the best option but as in this example, an unknown coordinate frame is silently accepted as being in \"head\" coordinates:\r\n\r\n```\r\nimport os.path as op\r\nimport numpy as np\r\nimport mne\r\ndata = np.random.normal(size=(16, 100))\r\nch_names = ['S1_D1 hbo', 'S1_D1 hbr', 'S2_D1 hbo', 'S2_D1 hbr',\r\n            'S3_D1 hbo', 'S3_D1 hbr', 'S4_D1 hbo', 'S4_D1 hbr',\r\n            'S5_D2 hbo', 'S5_D2 hbr', 'S6_D2 hbo', 'S6_D2 hbr',\r\n            'S7_D2 hbo', 'S7_D2 hbr', 'S8_D2 hbo', 'S8_D2 hbr']\r\nch_types = ['hbo', 'hbr', 'hbo', 'hbr',\r\n            'hbo', 'hbr', 'hbo', 'hbr',\r\n            'hbo', 'hbr', 'hbo', 'hbr',\r\n            'hbo', 'hbr', 'hbo', 'hbr']\r\nsfreq = 10.  # in Hz\r\ninfo = mne.create_info(ch_names=ch_names, ch_types=ch_types, sfreq=sfreq)\r\nraw = mne.io.RawArray(data, info, verbose=True)\r\n\r\nsubjects_dir = mne.datasets.sample.data_path() + '/subjects'\r\nmne.datasets.fetch_fsaverage(subjects_dir=subjects_dir)\r\n\r\nmontage = mne.channels.make_standard_montage('artinis-octamon')\r\nraw.set_montage(montage)\r\ntrans = mne.channels.compute_native_head_t(montage)\r\n\r\nfig = mne.viz.create_3d_figure(size=(800, 600), bgcolor='white')\r\nfig = mne.viz.plot_alignment(\r\n    raw.info, trans=trans, subject='fsaverage', subjects_dir=subjects_dir,\r\n    surfaces=['brain', 'head'], coord_frame='mri', dig=True, show_axes=True,\r\n    fnirs=['channels', 'pairs', 'sources', 'detectors'], fig=fig)\r\nprint({ch: raw.info['chs'][i]['coord_frame'] for i, ch in enumerate(raw.ch_names)})\r\n```\r\n\r\nAdapted from https://mne.tools/stable/auto_tutorials/io/30_reading_fnirs_data.html\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/9627/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9627/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/9620", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9620/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9620/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9620/events", "html_url": "https://github.com/mne-tools/mne-python/issues/9620", "id": 954821199, "node_id": "MDU6SXNzdWU5NTQ4MjExOTk=", "number": 9620, "title": "raw browser size gets mess up and becomes too small for working", "user": {"login": "mscheltienne", "id": 73893616, "node_id": "MDQ6VXNlcjczODkzNjE2", "avatar_url": "https://avatars.githubusercontent.com/u/73893616?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mscheltienne", "html_url": "https://github.com/mscheltienne", "followers_url": "https://api.github.com/users/mscheltienne/followers", "following_url": "https://api.github.com/users/mscheltienne/following{/other_user}", "gists_url": "https://api.github.com/users/mscheltienne/gists{/gist_id}", "starred_url": "https://api.github.com/users/mscheltienne/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mscheltienne/subscriptions", "organizations_url": "https://api.github.com/users/mscheltienne/orgs", "repos_url": "https://api.github.com/users/mscheltienne/repos", "events_url": "https://api.github.com/users/mscheltienne/events{/privacy}", "received_events_url": "https://api.github.com/users/mscheltienne/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 12, "created_at": "2021-07-28T12:49:52Z", "updated_at": "2021-07-30T16:57:09Z", "closed_at": "2021-07-30T16:57:09Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "#### Describe the bug\r\n\r\nWhile trying to look into issue #9616, I ran into a problem with the sample dataset which could not be plotted using `raw.plot()`.\r\nThis problem occurs on both the version 0.23 and on the latest commit version using the develop mode.\r\n\r\n#### Steps to reproduce\r\n\r\n```\r\nimport mne\r\nfrom pathlib import Path\r\n\r\ndata_folder = Path(mne.datasets.sample.data_path())\r\nraw_file = data_folder / 'MEG' / 'sample' / 'sample_audvis_filt-0-40_raw.fif'\r\nraw = mne.io.read_raw_fif(raw_file)\r\nraw.plot()\r\n```\r\n\r\n#### Actual results\r\n\r\n```\r\nOpening raw data file C:\\Users\\Mathieu\\mne_data\\MNE-sample-data\\MEG\\sample\\sample_audvis_filt-0-40_raw.fif...\r\n    Read a total of 4 projection items:\r\n        PCA-v1 (1 x 102)  idle\r\n        PCA-v2 (1 x 102)  idle\r\n        PCA-v3 (1 x 102)  idle\r\n        Average EEG reference (1 x 60)  idle\r\n    Range : 6450 ... 48149 =     42.956 ...   320.665 secs\r\nReady.\r\nTraceback (most recent call last):\r\n\r\n  File \"C:\\Users\\Mathieu\\AppData\\Local\\Temp/ipykernel_20280/2983236992.py\", line 9, in <module>\r\n    raw.plot()\r\n\r\n  File \"c:\\users\\mathieu\\documents\\git\\mne-python\\mne\\io\\base.py\", line 1520, in plot\r\n    return plot_raw(self, events, duration, start, n_channels, bgcolor,\r\n\r\n  File \"<decorator-gen-165>\", line 24, in plot_raw\r\n\r\n  File \"c:\\users\\mathieu\\documents\\git\\mne-python\\mne\\viz\\raw.py\", line 350, in plot_raw\r\n    fig = _browse_figure(**params)\r\n\r\n  File \"c:\\users\\mathieu\\documents\\git\\mne-python\\mne\\viz\\_figure.py\", line 2353, in _browse_figure\r\n    fig = _figure(inst=inst, toolbar=False, FigureClass=MNEBrowseFigure,\r\n\r\n  File \"c:\\users\\mathieu\\documents\\git\\mne-python\\mne\\viz\\_figure.py\", line 2341, in _figure\r\n    fig = figure(FigureClass=FigureClass, **kwargs)\r\n\r\n  File \"C:\\Users\\Mathieu\\Documents\\pyvenv\\mne\\lib\\site-packages\\matplotlib\\pyplot.py\", line 797, in figure\r\n    manager = new_figure_manager(\r\n\r\n  File \"C:\\Users\\Mathieu\\Documents\\pyvenv\\mne\\lib\\site-packages\\matplotlib\\pyplot.py\", line 316, in new_figure_manager\r\n    return _backend_mod.new_figure_manager(*args, **kwargs)\r\n\r\n  File \"C:\\Users\\Mathieu\\Documents\\pyvenv\\mne\\lib\\site-packages\\matplotlib\\backend_bases.py\", line 3544, in new_figure_manager\r\n    fig = fig_cls(*args, **kwargs)\r\n\r\n  File \"c:\\users\\mathieu\\documents\\git\\mne-python\\mne\\viz\\_figure.py\", line 410, in __init__\r\n    self.subplotpars.update(left=left, bottom=bottom, top=top, right=right)\r\n\r\n  File \"C:\\Users\\Mathieu\\Documents\\pyvenv\\mne\\lib\\site-packages\\matplotlib\\figure.py\", line 166, in update\r\n    raise ValueError('bottom cannot be >= top')\r\n\r\nValueError: bottom cannot be >= top\r\n```\r\n\r\n#### Additional information\r\n\r\n> \r\n> Platform:      Windows-10-10.0.19042-SP0\r\n> Python:        3.8.10 (tags/v3.8.10:3d8993a, May  3 2021, 11:48:03) [MSC v.1928 64 bit (AMD64)]\r\n> Executable:    C:\\Users\\Mathieu\\Documents\\pyvenv\\mne\\Scripts\\python.exe\r\n> CPU:           AMD64 Family 25 Model 33 Stepping 0, AuthenticAMD: 12 cores\r\n> Memory:        31.9 GB\r\n> \r\n> mne:           0.24.dev0\r\n> numpy:         1.21.0 {blas=D:\\\\a\\\\1\\\\s\\\\numpy\\\\build\\\\openblas_info, lapack=D:\\\\a\\\\1\\\\s\\\\numpy\\\\build\\\\openblas_lapack_info}\r\n> scipy:         1.7.0\r\n> matplotlib:    3.4.2 {backend=Qt5Agg}\r\n> \r\n> sklearn:       0.24.2\r\n> numba:         0.53.1\r\n> nibabel:       3.2.1\r\n> nilearn:       0.8.0\r\n> dipy:          1.4.1\r\n> cupy:          Not found\r\n> pandas:        1.3.0\r\n> mayavi:        4.7.3\r\n> pyvista:       0.31.3 {pyvistaqt=0.5.0, OpenGL 4.5.0 NVIDIA 471.41 via NVIDIA GeForce RTX 3070/PCIe/SSE2}\r\n> vtk:           9.0.1\r\n> PyQt5:         5.15.4\r\n", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/9620/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9620/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/9611", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9611/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9611/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9611/events", "html_url": "https://github.com/mne-tools/mne-python/issues/9611", "id": 952743471, "node_id": "MDU6SXNzdWU5NTI3NDM0NzE=", "number": 9611, "title": "Indexing error in Evoked.plot_topomap() when trying to mask channels", "user": {"login": "hoechenberger", "id": 2046265, "node_id": "MDQ6VXNlcjIwNDYyNjU=", "avatar_url": "https://avatars.githubusercontent.com/u/2046265?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hoechenberger", "html_url": "https://github.com/hoechenberger", "followers_url": "https://api.github.com/users/hoechenberger/followers", "following_url": "https://api.github.com/users/hoechenberger/following{/other_user}", "gists_url": "https://api.github.com/users/hoechenberger/gists{/gist_id}", "starred_url": "https://api.github.com/users/hoechenberger/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hoechenberger/subscriptions", "organizations_url": "https://api.github.com/users/hoechenberger/orgs", "repos_url": "https://api.github.com/users/hoechenberger/repos", "events_url": "https://api.github.com/users/hoechenberger/events{/privacy}", "received_events_url": "https://api.github.com/users/hoechenberger/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}, {"id": 1290799321, "node_id": "MDU6TGFiZWwxMjkwNzk5MzIx", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/VIZ", "name": "VIZ", "color": "22e861", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 25, "created_at": "2021-07-26T10:18:02Z", "updated_at": "2021-08-06T07:52:36Z", "closed_at": "2021-08-06T07:52:35Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "So either this is a documentation problem or a code bug: I supply `times` and `mask` with a shape of `(n_times, n_chans)` to `Evoked.plot_topomap()`, and it crashes with an `IndexError`.\r\n\r\n```python\r\n# %%\r\nfrom pathlib import Path\r\nimport numpy as np\r\n\r\nimport mne\r\n\r\nsample_data_dir = Path(mne.datasets.sample.data_path())\r\nfname = sample_data_dir / 'MEG' / 'sample' / 'sample_audvis-ave.fif'\r\n\r\ncondition = 'Left Auditory'\r\nevoked = mne.read_evokeds(fname=fname, condition=condition)\r\nevoked.pick('mag')\r\nevoked.apply_baseline((None, 0))\r\n\r\ntimes = (0.090, 0.110)\r\nmask = np.empty(\r\n    [len(evoked.ch_names), len(times)]\r\n)\r\nmask.fill(False)\r\nmask[20, :] = True\r\n\r\nfig = evoked.plot_topomap(times=times, time_unit='s', mask=mask)\r\n```\r\n\r\n```python\r\nTraceback (most recent call last):\r\n  File \"/private/tmp/mwe_topo.py\", line 22, in <module>\r\n    fig = evoked.plot_topomap(times=times, time_unit='s', mask=mask)\r\n  File \"/Users/hoechenberger/Development/mne-python/mne/evoked.py\", line 478, in plot_topomap\r\n    return plot_evoked_topomap(\r\n  File \"/Users/hoechenberger/Development/mne-python/mne/viz/topomap.py\", line 1697, in plot_evoked_topomap\r\n    mask_ = mask[np.ix_(picks, time_idx)]\r\nIndexError: index 174 is out of bounds for axis 1 with size 2\r\n```\r\n\r\nI expected a topoplot at the two time points, showing only the first 20 channels.", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/9611/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9611/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/9584", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9584/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9584/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9584/events", "html_url": "https://github.com/mne-tools/mne-python/issues/9584", "id": 947098521, "node_id": "MDU6SXNzdWU5NDcwOTg1MjE=", "number": 9584, "title": "[BUG] `mne.viz.Brain` raises cryptic error when plotting 'seghead', works for `mne.viz.plot_alignment`", "user": {"login": "alexrockhill", "id": 13473576, "node_id": "MDQ6VXNlcjEzNDczNTc2", "avatar_url": "https://avatars.githubusercontent.com/u/13473576?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alexrockhill", "html_url": "https://github.com/alexrockhill", "followers_url": "https://api.github.com/users/alexrockhill/followers", "following_url": "https://api.github.com/users/alexrockhill/following{/other_user}", "gists_url": "https://api.github.com/users/alexrockhill/gists{/gist_id}", "starred_url": "https://api.github.com/users/alexrockhill/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alexrockhill/subscriptions", "organizations_url": "https://api.github.com/users/alexrockhill/orgs", "repos_url": "https://api.github.com/users/alexrockhill/repos", "events_url": "https://api.github.com/users/alexrockhill/events{/privacy}", "received_events_url": "https://api.github.com/users/alexrockhill/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 8, "created_at": "2021-07-18T19:04:25Z", "updated_at": "2021-07-29T23:10:58Z", "closed_at": "2021-07-29T23:10:58Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Here's some minimally reproducible code:\r\n\r\n```\r\nimport os.path as op\r\nfrom mne.datasets import sample\r\nimport mne\r\n\r\ndata_path = sample.data_path()\r\nsample_dir = op.join(data_path, 'MEG', 'sample')\r\nsubjects_dir = op.join(data_path, 'subjects')\r\nevoked = mne.read_evokeds(op.join(sample_dir, 'sample_audvis-ave.fif'))[0]\r\ntrans = mne.read_trans(op.join(sample_dir, 'sample_audvis_raw-trans.fif'))\r\nmne.viz.plot_alignment(evoked.info, trans, subject='sample', subjects_dir=subjects_dir, surfaces=['seghead'])  # works\r\nmne.viz.Brain('sample', 'lh', 'seghead', subjects_dir=subjects_dir)  # raises error\r\n```\r\n\r\nStack trace\r\n```\r\nTraceback (most recent call last):\r\n  File \"<stdin>\", line 1, in <module>\r\n  File \"/Users/alexrockhill/projects/mne-python/mne/viz/_brain/_brain.py\", line 523, in __init__\r\n    mesh.add_overlay(\r\n  File \"/Users/alexrockhill/projects/mne-python/mne/viz/_brain/_brain.py\", line 178, in add_overlay\r\n    self._apply()\r\n  File \"/Users/alexrockhill/projects/mne-python/mne/viz/_brain/_brain.py\", line 194, in _apply\r\n    self._renderer._set_mesh_scalars(\r\n  File \"/Users/alexrockhill/projects/mne-python/mne/viz/backends/_pyvista.py\", line 699, in _set_mesh_scalars\r\n    mesh.point_arrays[name] = scalars\r\n  File \"/Users/alexrockhill/software/anaconda3/envs/mne/lib/python3.9/site-packages/pyvista/core/datasetattributes.py\", line 57, in __setitem__\r\n    self.append(narray=value, name=key)\r\n  File \"/Users/alexrockhill/software/anaconda3/envs/mne/lib/python3.9/site-packages/pyvista/core/datasetattributes.py\", line 211, in append\r\n    raise ValueError(f'narray length of ({narray.shape[0]}) != required length ({array_len})')\r\nValueError: narray length of (155407) != required length (267122)\r\n```", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/9584/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9584/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/9581", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9581/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9581/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9581/events", "html_url": "https://github.com/mne-tools/mne-python/issues/9581", "id": 946743587, "node_id": "MDU6SXNzdWU5NDY3NDM1ODc=", "number": 9581, "title": "Annotations.delete requires Numpy 1.19 or above", "user": {"login": "rob-luke", "id": 748691, "node_id": "MDQ6VXNlcjc0ODY5MQ==", "avatar_url": "https://avatars.githubusercontent.com/u/748691?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rob-luke", "html_url": "https://github.com/rob-luke", "followers_url": "https://api.github.com/users/rob-luke/followers", "following_url": "https://api.github.com/users/rob-luke/following{/other_user}", "gists_url": "https://api.github.com/users/rob-luke/gists{/gist_id}", "starred_url": "https://api.github.com/users/rob-luke/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rob-luke/subscriptions", "organizations_url": "https://api.github.com/users/rob-luke/orgs", "repos_url": "https://api.github.com/users/rob-luke/repos", "events_url": "https://api.github.com/users/rob-luke/events{/privacy}", "received_events_url": "https://api.github.com/users/rob-luke/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/mne-tools/mne-python/milestones/20", "html_url": "https://github.com/mne-tools/mne-python/milestone/20", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/milestones/20/labels", "id": 6675015, "node_id": "MDk6TWlsZXN0b25lNjY3NTAxNQ==", "number": 20, "title": "0.24", "description": "", "creator": {"login": "larsoner", "id": 2365790, "node_id": "MDQ6VXNlcjIzNjU3OTA=", "avatar_url": "https://avatars.githubusercontent.com/u/2365790?v=4", "gravatar_id": "", "url": "https://api.github.com/users/larsoner", "html_url": "https://github.com/larsoner", "followers_url": "https://api.github.com/users/larsoner/followers", "following_url": "https://api.github.com/users/larsoner/following{/other_user}", "gists_url": "https://api.github.com/users/larsoner/gists{/gist_id}", "starred_url": "https://api.github.com/users/larsoner/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/larsoner/subscriptions", "organizations_url": "https://api.github.com/users/larsoner/orgs", "repos_url": "https://api.github.com/users/larsoner/repos", "events_url": "https://api.github.com/users/larsoner/events{/privacy}", "received_events_url": "https://api.github.com/users/larsoner/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 53, "state": "closed", "created_at": "2021-04-19T12:32:46Z", "updated_at": "2021-11-03T16:14:55Z", "due_on": "2021-11-01T07:00:00Z", "closed_at": "2021-11-03T16:14:55Z"}, "comments": 3, "created_at": "2021-07-17T07:25:30Z", "updated_at": "2021-10-13T12:59:50Z", "closed_at": "2021-10-13T12:59:50Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "#### Describe the bug\r\nThis block of code in the tutorials produces the wrong result when used with Numpy 1.18\r\n\r\nhttps://github.com/mne-tools/mne-python/blob/4875e04cdebba132fc637ca65b3cb50584aee8b7/tutorials/preprocessing/70_fnirs_processing.py#L41-L46\r\n\r\n\r\n#### Steps to reproduce\r\nRun the https://github.com/mne-tools/mne-python/blob/main/tutorials/preprocessing/70_fnirs_processing.py tutorial with Numpy 1.18\r\n\r\n#### Expected results\r\nWhat is displayed here https://mne.tools/dev/auto_tutorials/preprocessing/70_fnirs_processing.html#providing-more-meaningful-annotation-information\r\n\r\n\r\n#### Actual results\r\nInstead of removing the two annotations with trigger code 15.0, one 15.0 is remove and one other condition is removed.\r\n\r\n\r\n#### Additional information\r\nI think this is due to a change in how np.delete works that occurred in 1.19. See https://numpy.org/doc/stable/release/1.19.0-notes.html#expired-deprecations\r\n\r\n#### Question\r\n\r\nWhat should I do?\r\n\r\n1. Do we place a minimum version requirement on Numpy? Currently its v1.15 https://github.com/mne-tools/mne-python/blob/4875e04cdebba132fc637ca65b3cb50584aee8b7/requirements.txt#L2\r\n2. Change the internal function of annotations.remove?\r\n3. Other option?\r\n", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/9581/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9581/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/9577", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9577/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9577/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9577/events", "html_url": "https://github.com/mne-tools/mne-python/issues/9577", "id": 946486278, "node_id": "MDU6SXNzdWU5NDY0ODYyNzg=", "number": 9577, "title": "[BUG] `mne.label.find_pos_in_annot` doesn't check `coord_frame`", "user": {"login": "alexrockhill", "id": 13473576, "node_id": "MDQ6VXNlcjEzNDczNTc2", "avatar_url": "https://avatars.githubusercontent.com/u/13473576?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alexrockhill", "html_url": "https://github.com/alexrockhill", "followers_url": "https://api.github.com/users/alexrockhill/followers", "following_url": "https://api.github.com/users/alexrockhill/following{/other_user}", "gists_url": "https://api.github.com/users/alexrockhill/gists{/gist_id}", "starred_url": "https://api.github.com/users/alexrockhill/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alexrockhill/subscriptions", "organizations_url": "https://api.github.com/users/alexrockhill/orgs", "repos_url": "https://api.github.com/users/alexrockhill/repos", "events_url": "https://api.github.com/users/alexrockhill/events{/privacy}", "received_events_url": "https://api.github.com/users/alexrockhill/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2021-07-16T17:48:42Z", "updated_at": "2021-07-19T15:48:32Z", "closed_at": "2021-07-19T15:48:32Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "It doesn't seem like a good idea to allow any position to be passed to `find_pos_in_annot` without checking that it is in the `mri` coordinate frame. If someone has the wrong coordinate frame, the error will be silent and they will get the wrong ROI which to me seems like a pretty good risk for incorrect results that could be avoided by enforcing the coordinate frame or maybe rather making this a class function of `Dipole`.", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/9577/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9577/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/9562", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9562/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9562/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9562/events", "html_url": "https://github.com/mne-tools/mne-python/issues/9562", "id": 942908760, "node_id": "MDU6SXNzdWU5NDI5MDg3NjA=", "number": 9562, "title": "Brain.screenshot() fails if mode='rgba' and time_viewer=True", "user": {"login": "hoechenberger", "id": 2046265, "node_id": "MDQ6VXNlcjIwNDYyNjU=", "avatar_url": "https://avatars.githubusercontent.com/u/2046265?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hoechenberger", "html_url": "https://github.com/hoechenberger", "followers_url": "https://api.github.com/users/hoechenberger/followers", "following_url": "https://api.github.com/users/hoechenberger/following{/other_user}", "gists_url": "https://api.github.com/users/hoechenberger/gists{/gist_id}", "starred_url": "https://api.github.com/users/hoechenberger/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hoechenberger/subscriptions", "organizations_url": "https://api.github.com/users/hoechenberger/orgs", "repos_url": "https://api.github.com/users/hoechenberger/repos", "events_url": "https://api.github.com/users/hoechenberger/events{/privacy}", "received_events_url": "https://api.github.com/users/hoechenberger/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}, {"id": 1290799321, "node_id": "MDU6TGFiZWwxMjkwNzk5MzIx", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/VIZ", "name": "VIZ", "color": "22e861", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2021-07-13T07:35:11Z", "updated_at": "2021-07-13T15:34:52Z", "closed_at": "2021-07-13T15:34:52Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "MWE:\r\n```python\r\n# %%\r\nfrom pathlib import Path\r\nimport mne\r\nfrom mne.datasets import sample\r\n\r\nmne.viz.set_3d_backend('pyvista')\r\n\r\nsubject = 'sample'\r\ndata_path = Path(sample.data_path())\r\nmeg_path = data_path / 'MEG' / subject\r\nsubjects_dir = data_path / 'subjects'\r\nstc_path = meg_path / f'{subject}_audvis-meg'\r\n\r\nstc = mne.read_source_estimate(stc_path)\r\nbrain = stc.plot(subject=subject, subjects_dir=subjects_dir)\r\nscreenshot = brain.screenshot(time_viewer=True, mode='rgba')\r\n```\r\n\r\nOutput:\r\n```\r\nUsing pyvista 3d backend.\r\n\r\nUsing control points [ 5.01632618  6.06303297 21.63565434]\r\nqt.qpa.drawing: Layer-backing can not be explicitly controlled on 10.14 when built against the 10.14 SDK\r\nTraceback (most recent call last):\r\n  File \"/private/tmp/foo.py\", line 17, in <module>\r\n    screenshot = brain.screenshot(time_viewer=True, mode='rgba')\r\n  File \"/Users/hoechenberger/Development/mne-python/mne/viz/_brain/_brain.py\", line 2684, in screenshot\r\n    img = concatenate_images([img, trace_img], bgcolor=bgcolor)\r\n  File \"/Users/hoechenberger/Development/mne-python/mne/viz/utils.py\", line 2347, in concatenate_images\r\n    ret[dec[0]:dec[0] + shape[0], dec[1]:dec[1] + shape[1], :] = image\r\nValueError: could not broadcast input array from shape (1600,1600,4) into shape (1600,1600,3)\r\n```\r\n\r\nAll works fine if I set `time_viewer=False`.\r\n\r\n```\r\nPlatform:      macOS-11.4-x86_64-i386-64bit\r\nPython:        3.9.4 | packaged by conda-forge | (default, May 10 2021, 22:13:15)  [Clang 11.1.0 ]\r\nExecutable:    /Users/hoechenberger/miniforge3/envs/mne/bin/python3.9\r\nCPU:           i386: 8 cores\r\nMemory:        16.0 GB\r\n\r\nmne:           0.24.dev0\r\nnumpy:         1.21.0 {blas=NO_ATLAS_INFO, lapack=lapack}\r\nscipy:         1.7.0\r\nmatplotlib:    3.4.2 {backend=MacOSX}\r\n\r\nsklearn:       0.24.2\r\nnumba:         Not found\r\nnibabel:       3.2.1\r\nnilearn:       0.8.0\r\ndipy:          1.4.1\r\ncupy:          Not found\r\npandas:        1.3.0\r\nmayavi:        4.7.2\r\npyvista:       0.31.3 {pyvistaqt=0.5.0, OpenGL 4.1 INTEL-16.4.5 via Intel(R) Iris(TM) Plus Graphics 655}\r\nvtk:           9.0.1\r\nPyQt5:         5.12.3\r\n```\r\n\r\ncc @GuillaumeFavelier ", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/9562/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9562/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/9542", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9542/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9542/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9542/events", "html_url": "https://github.com/mne-tools/mne-python/issues/9542", "id": 939944800, "node_id": "MDU6SXNzdWU5Mzk5NDQ4MDA=", "number": 9542, "title": "viz.plot_alignment() doesn't seem to respect user-specified alpha values", "user": {"login": "hoechenberger", "id": 2046265, "node_id": "MDQ6VXNlcjIwNDYyNjU=", "avatar_url": "https://avatars.githubusercontent.com/u/2046265?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hoechenberger", "html_url": "https://github.com/hoechenberger", "followers_url": "https://api.github.com/users/hoechenberger/followers", "following_url": "https://api.github.com/users/hoechenberger/following{/other_user}", "gists_url": "https://api.github.com/users/hoechenberger/gists{/gist_id}", "starred_url": "https://api.github.com/users/hoechenberger/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hoechenberger/subscriptions", "organizations_url": "https://api.github.com/users/hoechenberger/orgs", "repos_url": "https://api.github.com/users/hoechenberger/repos", "events_url": "https://api.github.com/users/hoechenberger/events{/privacy}", "received_events_url": "https://api.github.com/users/hoechenberger/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2021-07-08T14:53:35Z", "updated_at": "2021-09-06T16:28:57Z", "closed_at": "2021-09-06T16:28:57Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "MWE:\r\n\r\n```python\r\nimport os.path as op\r\nimport mne\r\n\r\ndata_path = mne.datasets.sample.data_path()\r\nsubjects_dir = op.join(data_path, 'subjects')\r\nraw_fname = op.join(data_path, 'MEG', 'sample', 'sample_audvis_raw.fif')\r\ntrans_fname = op.join(data_path, 'MEG', 'sample',\r\n                      'sample_audvis_raw-trans.fif')\r\nraw = mne.io.read_raw_fif(raw_fname)\r\ntrans = mne.read_trans(trans_fname)\r\n\r\nkwargs = dict(info=raw.info, trans=trans, subject='sample',\r\n              subjects_dir=subjects_dir)\r\n\r\nfig = mne.viz.plot_alignment(surfaces={'head-dense': 0.1},\r\n                             **kwargs)\r\n\r\nfig = mne.viz.plot_alignment(surfaces={'head-dense': 0.9},\r\n                             **kwargs)\r\n```\r\n\r\nOn my and @SophieHerbst's systems, both figures look the same: translucent on Linux, and opaque on macOS. We're using MNE-Python `main`.\r\n\r\n\r\ncc @GuillaumeFavelier \r\n\r\n\r\n```\r\nPlatform:      macOS-11.4-x86_64-i386-64bit\r\nPython:        3.9.4 | packaged by conda-forge | (default, May 10 2021, 22:13:15)  [Clang 11.1.0 ]\r\nExecutable:    /Users/hoechenberger/miniforge3/envs/mne/bin/python\r\nCPU:           i386: 8 cores\r\nMemory:        16.0 GB\r\n\r\nmne:           0.24.dev0\r\nnumpy:         1.20.3 {blas=NO_ATLAS_INFO, lapack=lapack}\r\nscipy:         1.6.3\r\nmatplotlib:    3.4.2 {backend=module://ipykernel.pylab.backend_inline}\r\n\r\nsklearn:       0.24.2\r\nnumba:         Not found\r\nnibabel:       3.2.1\r\nnilearn:       0.8.0\r\ndipy:          1.4.1\r\ncupy:          Not found\r\npandas:        1.2.4\r\nmayavi:        4.7.2\r\npyvista:       0.31.1 {pyvistaqt=0.5.0, OpenGL 4.1 INTEL-16.4.5 via Intel(R) Iris(TM) Plus Graphics 655}\r\nvtk:           9.0.1\r\nPyQt5:         5.12.3\r\n```", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/9542/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9542/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/9533", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9533/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9533/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9533/events", "html_url": "https://github.com/mne-tools/mne-python/issues/9533", "id": 938871141, "node_id": "MDU6SXNzdWU5Mzg4NzExNDE=", "number": 9533, "title": "Concatenation of epochs raises non-intuitive error if one epoch is empty", "user": {"login": "jsosulski", "id": 2545339, "node_id": "MDQ6VXNlcjI1NDUzMzk=", "avatar_url": "https://avatars.githubusercontent.com/u/2545339?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jsosulski", "html_url": "https://github.com/jsosulski", "followers_url": "https://api.github.com/users/jsosulski/followers", "following_url": "https://api.github.com/users/jsosulski/following{/other_user}", "gists_url": "https://api.github.com/users/jsosulski/gists{/gist_id}", "starred_url": "https://api.github.com/users/jsosulski/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jsosulski/subscriptions", "organizations_url": "https://api.github.com/users/jsosulski/orgs", "repos_url": "https://api.github.com/users/jsosulski/repos", "events_url": "https://api.github.com/users/jsosulski/events{/privacy}", "received_events_url": "https://api.github.com/users/jsosulski/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2021-07-07T13:03:35Z", "updated_at": "2021-07-12T13:11:59Z", "closed_at": "2021-07-12T13:11:59Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "#### Describe the bug\r\n\r\nWhen concatenating a list of epochs, when one of the epochs contains zero events, a ValueError with few information is raised.\r\n\r\n#### Steps to reproduce\r\n\r\n```python\r\nimport mne\r\nimport numpy as np\r\n\r\nn_epochs, n_channels, n_timepoints = 10, 4, 21\r\nch_names = [f\"ch_{i}\" for i in range(n_channels)]\r\nfake_data_1 = np.random.random((n_epochs, n_channels, n_timepoints))\r\nfake_data_2 = np.random.random((n_epochs, n_channels, n_timepoints))\r\n\r\ninfo = mne.create_info(ch_names=ch_names, sfreq=40)\r\nepo_1 = mne.EpochsArray(fake_data_1, info)\r\nepo_2 = mne.EpochsArray(fake_data_2, info)\r\n\r\n# works\r\nconc_epos = mne.concatenate_epochs([epo_1, epo_2])\r\n# remove all data from epo_2\r\nepo_2.drop(range(10))\r\n# Get cryptic ValueError: \r\n# zero-size array to reduction operation maximum which has no identity\r\nnot_conc_epos = mne.concatenate_epochs([epo_1, epo_2])\r\n```\r\n\r\n#### Expected results\r\n\r\nEither get a concatenated epoch object that contains all events from `epo_1` with a warning that some epos were empty, or get a ValueError that better explains what's happening.\r\n\r\n\r\n#### Actual results\r\n\r\nMNE raises the following error:\r\n\r\n```\r\nTraceback (most recent call last):\r\n  File \"<input>\", line 4, in <module>\r\n  File \"/home/jan/dev/python/spot/spot_venv/lib/python3.8/site-packages/mne/epochs.py\", line 3493, in concatenate_epochs\r\n    return _finish_concat(*_concatenate_epochs(epochs_list,\r\n  File \"/home/jan/dev/python/spot/spot_venv/lib/python3.8/site-packages/mne/epochs.py\", line 3419, in _concatenate_epochs\r\n    events_offset = _update_offset(events_offset, epochs.events, shift)\r\n  File \"/home/jan/dev/python/spot/spot_venv/lib/python3.8/site-packages/mne/epochs.py\", line 3360, in _update_offset\r\n    offset = np.int64(offset) + np.max(events[:, 0]) + shift\r\n  File \"<__array_function__ internals>\", line 5, in amax\r\n  File \"/home/jan/dev/python/spot/spot_venv/lib/python3.8/site-packages/numpy/core/fromnumeric.py\", line 2705, in amax\r\n    return _wrapreduction(a, np.maximum, 'max', axis, None, out,\r\n  File \"/home/jan/dev/python/spot/spot_venv/lib/python3.8/site-packages/numpy/core/fromnumeric.py\", line 87, in _wrapreduction\r\n    return ufunc.reduce(obj, axis, dtype, out, **passkwargs)\r\nValueError: zero-size array to reduction operation maximum which has no identity\r\n```\r\n\r\nMy current workaround is to manually filter out empty epochs beforehand.\r\n\r\n#### Additional information\r\n\r\nPlatform:      Linux-5.8.0-59-generic-x86_64-with-glibc2.29\r\nPython:        3.8.10 (default, Jun  2 2021, 10:49:15)  [GCC 9.4.0]\r\nExecutable:    /home/jan/dev/python/spot/spot_venv/bin/python\r\nCPU:           x86_64: 8 cores\r\nMemory:        Unavailable (requires \"psutil\" package)\r\nmne:           0.23.0\r\nnumpy:         1.19.5 {blas=openblas, lapack=openblas}\r\nscipy:         1.5.4\r\nmatplotlib:    3.3.4 {backend=module://backend_interagg}\r\nsklearn:       0.23.2\r\nnumba:         Not found\r\nnibabel:       3.2.1\r\nnilearn:       Not found\r\ndipy:          Not found\r\ncupy:          Not found\r\npandas:        1.1.5\r\nmayavi:        Not found\r\npyvista:       Not found\r\nvtk:           Not found\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/9533/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9533/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/9527", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9527/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9527/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9527/events", "html_url": "https://github.com/mne-tools/mne-python/issues/9527", "id": 937153007, "node_id": "MDU6SXNzdWU5MzcxNTMwMDc=", "number": 9527, "title": "Annotation and crop - different onset points after reloading the saved croppend data", "user": {"login": "kolcs", "id": 47258484, "node_id": "MDQ6VXNlcjQ3MjU4NDg0", "avatar_url": "https://avatars.githubusercontent.com/u/47258484?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kolcs", "html_url": "https://github.com/kolcs", "followers_url": "https://api.github.com/users/kolcs/followers", "following_url": "https://api.github.com/users/kolcs/following{/other_user}", "gists_url": "https://api.github.com/users/kolcs/gists{/gist_id}", "starred_url": "https://api.github.com/users/kolcs/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kolcs/subscriptions", "organizations_url": "https://api.github.com/users/kolcs/orgs", "repos_url": "https://api.github.com/users/kolcs/repos", "events_url": "https://api.github.com/users/kolcs/events{/privacy}", "received_events_url": "https://api.github.com/users/kolcs/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/mne-tools/mne-python/milestones/21", "html_url": "https://github.com/mne-tools/mne-python/milestone/21", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/milestones/21/labels", "id": 7253492, "node_id": "MI_kwDOABPcUM4Abq30", "number": 21, "title": "1.0", "description": "", "creator": {"login": "larsoner", "id": 2365790, "node_id": "MDQ6VXNlcjIzNjU3OTA=", "avatar_url": "https://avatars.githubusercontent.com/u/2365790?v=4", "gravatar_id": "", "url": "https://api.github.com/users/larsoner", "html_url": "https://github.com/larsoner", "followers_url": "https://api.github.com/users/larsoner/followers", "following_url": "https://api.github.com/users/larsoner/following{/other_user}", "gists_url": "https://api.github.com/users/larsoner/gists{/gist_id}", "starred_url": "https://api.github.com/users/larsoner/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/larsoner/subscriptions", "organizations_url": "https://api.github.com/users/larsoner/orgs", "repos_url": "https://api.github.com/users/larsoner/repos", "events_url": "https://api.github.com/users/larsoner/events{/privacy}", "received_events_url": "https://api.github.com/users/larsoner/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 83, "state": "closed", "created_at": "2021-10-14T16:40:49Z", "updated_at": "2022-05-03T11:29:23Z", "due_on": "2022-02-25T08:00:00Z", "closed_at": "2022-05-03T11:29:23Z"}, "comments": 11, "created_at": "2021-07-05T14:34:47Z", "updated_at": "2021-12-13T17:10:07Z", "closed_at": "2021-12-13T17:10:07Z", "author_association": "NONE", "active_lock_reason": null, "body": "#### Describe the bug\r\nI suspect that this issue is similar to the #9383.\r\nThe issue only occurs when a raw instance created with Annotation. Originally labeled data as brain vision files are work fine.\r\nCropping the instance, saving and reloading it shows the annotations in the original place before the cropping.\r\n\r\n\r\n#### Steps to reproduce\r\n```\r\nimport numpy as np\r\nimport mne\r\nCH_NUM = 32\r\nFS = 160\r\n\r\ndata = np.zeros((CH_NUM, FS * 20))\r\nch_names = [f'EEG{i}' for i in range(CH_NUM)]\r\nch_types = ['eeg'] * len(ch_names)\r\nonset = [8, 12, 18]\r\nduration = [2] * len(onset)\r\ndescription = list(range(len(onset)))\r\n\r\ninfo = mne.create_info(ch_names, ch_types=ch_types, sfreq=FS)\r\nraw = mne.io.RawArray(data, info)\r\nannotation = mne.Annotations(onset, duration, description)\r\nraw = raw.set_annotations(annotation)\r\n\r\nsess = raw.copy()\r\nsess.crop(5, 18)\r\nfile = 'test_file_raw.fif'\r\nsess.save(file, overwrite=True)\r\nsess.plot(block=False)\r\nr = mne.io.read_raw(str(file))\r\nr.plot(block=False)\r\nraw.plot(block=True)\r\n```\r\n\r\n#### Expected results\r\nI expect that the annotated data should look like the same before and after saving it.\r\n\r\n\r\n#### Actual results\r\nThe annotations are shifted...\r\n\r\n\r\n#### Additional information\r\nPlatform:      Windows-10-10.0.19041-SP0\r\nPython:        3.8.5 (default, Sep  3 2020, 21:29:08) [MSC v.1916 64 bit (AMD64)]\r\nExecutable:    C:\\Programs\\Miniconda3\\envs\\bci2\\python.exe\r\nCPU:           Intel64 Family 6 Model 158 Stepping 10, GenuineIntel: 12 cores\r\nMemory:        Unavailable (requires \"psutil\" package)\r\nmne:           0.23.0\r\nnumpy:         1.19.3 {blas=D:\\\\a\\\\1\\\\s\\\\numpy\\\\build\\\\openblas_info, lapack=D:\\\\a\\\\1\\\\s\\\\numpy\\\\build\\\\openblas_lapack_info}\r\nscipy:         1.6.0\r\nmatplotlib:    3.3.3 {backend=TkAgg}\r\nsklearn:       0.24.0\r\nnumba:         Not found\r\nnibabel:       Not found\r\nnilearn:       Not found\r\ndipy:          Not found\r\ncupy:          Not found\r\npandas:        1.2.0\r\nmayavi:        Not found\r\npyvista:       Not found\r\nvtk:           Not found\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/9527/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9527/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/9526", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9526/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9526/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9526/events", "html_url": "https://github.com/mne-tools/mne-python/issues/9526", "id": 937140555, "node_id": "MDU6SXNzdWU5MzcxNDA1NTU=", "number": 9526, "title": "Crash topomap with only 4 channels from 10-5 system", "user": {"login": "agramfort", "id": 161052, "node_id": "MDQ6VXNlcjE2MTA1Mg==", "avatar_url": "https://avatars.githubusercontent.com/u/161052?v=4", "gravatar_id": "", "url": "https://api.github.com/users/agramfort", "html_url": "https://github.com/agramfort", "followers_url": "https://api.github.com/users/agramfort/followers", "following_url": "https://api.github.com/users/agramfort/following{/other_user}", "gists_url": "https://api.github.com/users/agramfort/gists{/gist_id}", "starred_url": "https://api.github.com/users/agramfort/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/agramfort/subscriptions", "organizations_url": "https://api.github.com/users/agramfort/orgs", "repos_url": "https://api.github.com/users/agramfort/repos", "events_url": "https://api.github.com/users/agramfort/events{/privacy}", "received_events_url": "https://api.github.com/users/agramfort/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2021-07-05T14:19:40Z", "updated_at": "2021-07-06T14:37:49Z", "closed_at": "2021-07-06T14:37:49Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "to replicate the problem:\r\n\r\n```\r\nimport numpy as np\r\nimport mne\r\n\r\nch_names = ['TP9', 'AF7', 'AF8', 'TP10']\r\n\r\ninfo = mne.create_info(ch_names, 100, ch_types='eeg')\r\nevoked = mne.EvokedArray(np.random.randn(4, 10), info)\r\nten_five = mne.channels.make_standard_montage(\"standard_1005\")\r\nevoked.set_montage(ten_five)\r\nevoked.plot_topomap()\r\n```\r\n\r\nnow if I do:\r\n\r\n`evoked.plot_topomap(sphere=0.14)`\r\n\r\nit works.\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/9526/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9526/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/9511", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9511/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9511/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9511/events", "html_url": "https://github.com/mne-tools/mne-python/issues/9511", "id": 931991660, "node_id": "MDU6SXNzdWU5MzE5OTE2NjA=", "number": 9511, "title": "evoked.plot_topomap extrapolation can fail when few electrodes present", "user": {"login": "drammock", "id": 1810515, "node_id": "MDQ6VXNlcjE4MTA1MTU=", "avatar_url": "https://avatars.githubusercontent.com/u/1810515?v=4", "gravatar_id": "", "url": "https://api.github.com/users/drammock", "html_url": "https://github.com/drammock", "followers_url": "https://api.github.com/users/drammock/followers", "following_url": "https://api.github.com/users/drammock/following{/other_user}", "gists_url": "https://api.github.com/users/drammock/gists{/gist_id}", "starred_url": "https://api.github.com/users/drammock/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/drammock/subscriptions", "organizations_url": "https://api.github.com/users/drammock/orgs", "repos_url": "https://api.github.com/users/drammock/repos", "events_url": "https://api.github.com/users/drammock/events{/privacy}", "received_events_url": "https://api.github.com/users/drammock/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2021-06-28T21:04:07Z", "updated_at": "2021-07-06T15:05:22Z", "closed_at": "2021-07-06T14:50:52Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "from the forum: https://mne.discourse.group/t/erp-plot-topomap-nan-to-integer-error/3317\r\n\r\nextrapolate = 'box' or 'local' both work, but the default ('head') fails (at some point in the code we call `np.arcsin` and its argument is out of the domain for that function, thus introducing a NaN).\r\n\r\nLink to example data: https://www.dropbox.com/l/AABzZrKRNcYbG7Z9m0OexH8WeBVSXRunqMc\r\n\r\n```py\r\nimport numpy as np\r\nimport mne\r\n\r\nexp3 = mne.io.read_raw_edf('exp3.edf', preload=True)\r\nexp3.filter(1,30, method='iir')\r\nevents_exp3 = mne.make_fixed_length_events(exp3, duration=1.0)\r\n\r\nten_five = mne.channels.make_standard_montage('standard_1005')\r\nexp3.set_montage(ten_five)\r\n\r\nepochs_exp3 = mne.Epochs(\r\n    exp3, events_exp3, event_id={'resting_state': 1}, tmin=-0.3, tmax=0.7,\r\n    preload=True)\r\n\r\nrest_exp3 = epochs_exp3['resting_state'].average()\r\nfig = rest_exp3.plot_topomap()\r\n```\r\nTraceback:\r\n```\r\n---------------------------------------------------------------------------\r\nValueError                                Traceback (most recent call last)\r\n<ipython-input-4-7729af823da6> in <module>\r\n----> 1 fig = rest_exp3.plot_topomap()\r\n\r\n/opt/mne/python/mne/evoked.py in plot_topomap(self, times, ch_type, vmin, vmax, cmap, sensors, colorbar, scalings, units, res, size, cbar_fmt, time_unit, time_format, proj, show, show_names, title, mask, mask_params, outlines, contours, image_interp, average, axes, extrapolate, sphere, border, nrows, ncols)\r\n    443                      axes=None, extrapolate=_EXTRAPOLATE_DEFAULT, sphere=None,\r\n    444                      border=_BORDER_DEFAULT, nrows=1, ncols='auto'):\r\n--> 445         return plot_evoked_topomap(\r\n    446             self, times=times, ch_type=ch_type, vmin=vmin,\r\n    447             vmax=vmax, cmap=cmap, sensors=sensors, colorbar=colorbar,\r\n\r\n/opt/mne/python/mne/viz/topomap.py in plot_evoked_topomap(***failed resolving arguments***)\r\n   1714         adjust_for_cbar = colorbar and ncols is not None and idx >= ncols - 1\r\n   1715         ax_idx = idx + 1 if adjust_for_cbar else idx\r\n-> 1716         tp, cn, interp = _plot_topomap(\r\n   1717             data[:, idx], pos, axes=axes[ax_idx],\r\n   1718             mask=mask_[:, idx] if mask is not None else None, **kwargs)\r\n\r\n/opt/mne/python/mne/viz/topomap.py in _plot_topomap(data, pos, vmin, vmax, cmap, sensors, res, axes, names, show_names, mask, mask_params, outlines, contours, image_interp, show, onselect, extrapolate, sphere, border, ch_type, cnorm)\r\n    950 \r\n    951     # find mask limits\r\n--> 952     extent, Xi, Yi, interp = _setup_interp(\r\n    953         pos, res, extrapolate, sphere, outlines, border)\r\n    954     interp.set_values(data)\r\n\r\n/opt/mne/python/mne/viz/topomap.py in _setup_interp(pos, res, extrapolate, sphere, outlines, border)\r\n    837     yi = np.linspace(ymin, ymax, res)\r\n    838     Xi, Yi = np.meshgrid(xi, yi)\r\n--> 839     interp = _GridData(pos, extrapolate, clip_origin, clip_radius, border)\r\n    840     extent = (xmin, xmax, ymin, ymax)\r\n    841     return extent, Xi, Yi, interp\r\n\r\n/opt/mne/python/mne/viz/topomap.py in __init__(self, pos, extrapolate, origin, radii, border)\r\n    607 \r\n    608         # Adding points outside the extremes helps the interpolators\r\n--> 609         outer_pts, mask_pts, tri = _get_extra_points(\r\n    610             pos, extrapolate, origin, radii)\r\n    611         self.n_extra = outer_pts.shape[0]\r\n\r\n/opt/mne/python/mne/viz/topomap.py in _get_extra_points(pos, extrapolate, origin, radii)\r\n    576         # return points on the head circle\r\n    577         angle = np.arcsin(distance / np.mean(radii))\r\n--> 578         n_pnts = max(12, int(np.round(2 * np.pi / angle)))\r\n    579         points_l = np.linspace(0, 2 * np.pi, n_pnts, endpoint=False)\r\n    580         use_radii = radii * 1.1 + distance\r\n\r\nValueError: cannot convert float NaN to integer\r\n> /opt/mne/python/mne/viz/topomap.py(578)_get_extra_points()\r\n    576         # return points on the head circle\r\n    577         angle = np.arcsin(distance / np.mean(radii))\r\n--> 578         n_pnts = max(12, int(np.round(2 * np.pi / angle)))\r\n    579         points_l = np.linspace(0, 2 * np.pi, n_pnts, endpoint=False)\r\n    580         use_radii = radii * 1.1 + distance\r\n```\r\ncc @mmagnuski ", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/9511/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9511/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/9506", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9506/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9506/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9506/events", "html_url": "https://github.com/mne-tools/mne-python/issues/9506", "id": 930434652, "node_id": "MDU6SXNzdWU5MzA0MzQ2NTI=", "number": 9506, "title": "RuntimeError: main thread is not in main loop when add_figs_to_section  for figs produce using Parallel module and set the matplotlib.use ( 'TkAgg' )", "user": {"login": "balandongiv", "id": 22090092, "node_id": "MDQ6VXNlcjIyMDkwMDky", "avatar_url": "https://avatars.githubusercontent.com/u/22090092?v=4", "gravatar_id": "", "url": "https://api.github.com/users/balandongiv", "html_url": "https://github.com/balandongiv", "followers_url": "https://api.github.com/users/balandongiv/followers", "following_url": "https://api.github.com/users/balandongiv/following{/other_user}", "gists_url": "https://api.github.com/users/balandongiv/gists{/gist_id}", "starred_url": "https://api.github.com/users/balandongiv/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/balandongiv/subscriptions", "organizations_url": "https://api.github.com/users/balandongiv/orgs", "repos_url": "https://api.github.com/users/balandongiv/repos", "events_url": "https://api.github.com/users/balandongiv/events{/privacy}", "received_events_url": "https://api.github.com/users/balandongiv/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2021-06-25T19:09:41Z", "updated_at": "2021-10-22T17:11:00Z", "closed_at": "2021-10-22T17:11:00Z", "author_association": "NONE", "active_lock_reason": null, "body": "\r\n#### Describe the bug\r\nAdding list of figures to mne-report section produced `RuntimeError: main thread is not in main loop` . This occur when module 'Parallel` was used. But, no syntax error was generated for a list of figures produced using the conventional for-loop or list comprehension.\r\n\r\nFor example,\r\n\r\nThis line work perfectly fine for all the time (`list comprehension`)\r\n\r\n`all_fig=[make_plot () for idx in range (0,3) ]`\r\n\r\nThis line may produce the aforementioned error (`parallel`)\r\n\r\n`all_fig = Parallel ( n_jobs=-1 ) ( delayed ( make_plot ) ( ) for idx in range (0,3) )`\r\n\r\nFeed the `all_fig` from the `parallel` to `rep.add_figs_to_section ( all_fig, captions=captions )` will result in the compiler return the following syntax error\r\n\r\n```\r\n\r\n\r\n> 0 bad epochs dropped\r\n> Embedding : jquery.js\r\n> Embedding : jquery-ui.min.js\r\n> Embedding : bootstrap.min.js\r\n> Embedding : jquery-ui.min.css\r\n> Embedding : bootstrap.min.css\r\n> Traceback (most recent call last):\r\n>   File \"/home/author/anaconda3/envs/pj/lib/python3.7/site-packages/matplotlib/backend_bases.py\", line 3032, in _wait_cursor_for_draw_cm\r\n>     self.set_cursor(cursors.WAIT)\r\n>   File \"/home/author/anaconda3/envs/pj/lib/python3.7/site-packages/matplotlib/backends/_backend_tk.py\", line 585, in set_cursor\r\n>     window.configure(cursor=cursord[cursor])\r\n>   File \"/home/author/anaconda3/envs/pj/lib/python3.7/tkinter/__init__.py\", line 1485, in configure\r\n>     return self._configure('configure', cnf, kw)\r\n>   File \"/home/author/anaconda3/envs/pj/lib/python3.7/tkinter/__init__.py\", line 1476, in _configure\r\n>     self.tk.call(_flatten((self._w, cmd)) + self._options(cnf))\r\n> RuntimeError: main thread is not in main loop\r\n> \r\n> During handling of the above exception, another exception occurred:\r\n> \r\n> Traceback (most recent call last):\r\n>   File \"/home/author/PycharmProjects/driving_eeg_graph_theory/src_code/MNE_BUG.py\", line 30, in <module>\r\n>     rep.add_figs_to_section ( all_fig, captions=captions )\r\n>   File \"/home/author/anaconda3/envs/pj/lib/python3.7/site-packages/mne/report.py\", line 1207, in add_figs_to_section\r\n>     img = _fig_to_img(fig, image_format, scale, auto_close)\r\n>   File \"/home/author/anaconda3/envs/pj/lib/python3.7/site-packages/mne/report.py\", line 110, in _fig_to_img\r\n>     bbox_to_inches='tight')\r\n>   File \"/home/author/anaconda3/envs/pj/lib/python3.7/site-packages/matplotlib/figure.py\", line 3005, in savefig\r\n>     self.canvas.print_figure(fname, **kwargs)\r\n>   File \"/home/author/anaconda3/envs/pj/lib/python3.7/site-packages/matplotlib/backend_bases.py\", line 2261, in print_figure\r\n>     **kwargs)\r\n>   File \"/home/author/anaconda3/envs/pj/lib/python3.7/site-packages/matplotlib/backend_bases.py\", line 1669, in wrapper\r\n>     return func(*args, **kwargs)\r\n>   File \"/home/author/anaconda3/envs/pj/lib/python3.7/site-packages/matplotlib/backends/backend_agg.py\", line 508, in print_png\r\n>     FigureCanvasAgg.draw(self)\r\n>   File \"/home/author/anaconda3/envs/pj/lib/python3.7/site-packages/matplotlib/backends/backend_agg.py\", line 405, in draw\r\n>     else nullcontext()):\r\n>   File \"/home/author/anaconda3/envs/pj/lib/python3.7/contextlib.py\", line 112, in __enter__\r\n>     return next(self.gen)\r\n>   File \"/home/author/anaconda3/envs/pj/lib/python3.7/site-packages/matplotlib/backend_bases.py\", line 3035, in _wait_cursor_for_draw_cm\r\n>     self.set_cursor(self._lastCursor)\r\n>   File \"/home/author/anaconda3/envs/pj/lib/python3.7/site-packages/matplotlib/backends/_backend_tk.py\", line 585, in set_cursor\r\n>     window.configure(cursor=cursord[cursor])\r\n>   File \"/home/author/anaconda3/envs/pj/lib/python3.7/tkinter/__init__.py\", line 1485, in configure\r\n>     return self._configure('configure', cnf, kw)\r\n>   File \"/home/author/anaconda3/envs/pj/lib/python3.7/tkinter/__init__.py\", line 1476, in _configure\r\n>     self.tk.call(_flatten((self._w, cmd)) + self._options(cnf))\r\n> RuntimeError: main thread is not in main loop\r\n> Error in atexit._run_exitfuncs:\r\n> Traceback (most recent call last):\r\n>   File \"/home/author/anaconda3/envs/pj/lib/python3.7/site-packages/matplotlib/_pylab_helpers.py\", line 86, in destroy_all\r\n>     manager.destroy()\r\n>   File \"/home/author/anaconda3/envs/pj/lib/python3.7/site-packages/matplotlib/backends/_backend_tk.py\", line 482, in destroy\r\n>     self.window.after_idle(self.window.after, 0, delayed_destroy)\r\n>   File \"/home/author/anaconda3/envs/pj/lib/python3.7/tkinter/__init__.py\", line 764, in after_idle\r\n>     return self.after('idle', func, *args)\r\n>   File \"/home/author/anaconda3/envs/pj/lib/python3.7/tkinter/__init__.py\", line 756, in after\r\n>     name = self._register(callit)\r\n>   File \"/home/author/anaconda3/envs/pj/lib/python3.7/tkinter/__init__.py\", line 1372, in _register\r\n>     self.tk.createcommand(name, f)\r\n> RuntimeError: main thread is not in main loop\r\n> /home/author/anaconda3/envs/pj/lib/python3.7/site-packages/joblib/externals/loky/backend/resource_tracker.py:304: UserWarning: resource_tracker: /dev/shm/joblib_memmapping_folder_14414_9c2343dff2b44362b1e355b6ae4f0d9b_cd9e1a281d28483a872a02d741bce712/14414-140413560821648-c8d28f22f3d1440b86c79ef2958b67b6.pkl: FileNotFoundError(2, 'No such file or directory')\r\n>   'resource_tracker: %s: %r' % (name, e))\r\n> /home/author/anaconda3/envs/pj/lib/python3.7/site-packages/joblib/externals/loky/backend/resource_tracker.py:304: UserWarning: resource_tracker: /dev/shm/joblib_memmapping_folder_14414_9c2343dff2b44362b1e355b6ae4f0d9b_cd9e1a281d28483a872a02d741bce712/14414-140413560821648-f194fdb9c7854c5e9ea76718d5d75ef8.pkl: FileNotFoundError(2, 'No such file or directory')\r\n>   'resource_tracker: %s: %r' % (name, e))\r\n> \r\n> Process finished with exit code 1\r\n\r\n```\r\n\r\n\r\n#### Steps to reproduce\r\nThe structure of the code that produced the above error is similar to the snippet below. Effort has been made to make the snippet as close as possible to the original code that produced the error. However, it should be note that, the snippet below does not produce the aforementioned error. Hence, I found it very difficult to rule out whether this is really mne related problem or not. But, the runtime error trail indicate that there is function call from mne-report in between the error.\r\n\r\n```\r\nrom autoreject import Ransac, get_rejection_threshold  # noqa\r\nfrom mne.report import Report\r\nfrom joblib import Parallel, delayed\r\nimport matplotlib\r\nfrom autoreject.utils import set_matplotlib_defaults  # noqa\r\nimport matplotlib.pyplot as plt  # noqa\r\nset_matplotlib_defaults ( plt )\r\nmatplotlib.use ( 'TkAgg' )\r\n\r\ndata_path = mne.datasets.sample.data_path()\r\n# Load a dataset that contains events\r\nraw = mne.io.read_raw_fif(\r\n    op.join(data_path, 'MEG', 'sample', 'sample_audvis_raw.fif'))\r\nevent_id = {'Auditory/Left': 1, 'Auditory/Right': 2}\r\nevents = mne.find_events(raw, stim_channel='STI 014')\r\nepochs = mne.Epochs(raw, events, event_id, tmin=-0.1, tmax=1,\r\n                    baseline=(None, 0), preload=True)\r\n\r\ndef make_plot():\r\n    return epochs.plot ( show=False )\r\n\r\n# all_fig=[make_plot () for idx in range (0,3) ]\r\nall_fig = Parallel ( n_jobs=-1 ) ( delayed ( make_plot ) ( ) for idx in range (0,3) )\r\n\r\nrep = Report ()\r\ncaptions = ['IC_' + str ( i ) for i in list ( range ( 0, len ( all_fig ) ) )]\r\nrep.add_figs_to_section ( all_fig, captions=captions )\r\nrep.save ( 'reporta.html', overwrite=True, open_browser=False )\r\n```\r\n\r\n\r\n#### Additional information\r\nmne: '0.24.dev0'\r\n", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/9506/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9506/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/9502", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9502/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9502/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9502/events", "html_url": "https://github.com/mne-tools/mne-python/issues/9502", "id": 929173785, "node_id": "MDU6SXNzdWU5MjkxNzM3ODU=", "number": 9502, "title": "plotting overlapping epochs: Events not properly aligned in plot?", "user": {"login": "sappelhoff", "id": 9084751, "node_id": "MDQ6VXNlcjkwODQ3NTE=", "avatar_url": "https://avatars.githubusercontent.com/u/9084751?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sappelhoff", "html_url": "https://github.com/sappelhoff", "followers_url": "https://api.github.com/users/sappelhoff/followers", "following_url": "https://api.github.com/users/sappelhoff/following{/other_user}", "gists_url": "https://api.github.com/users/sappelhoff/gists{/gist_id}", "starred_url": "https://api.github.com/users/sappelhoff/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sappelhoff/subscriptions", "organizations_url": "https://api.github.com/users/sappelhoff/orgs", "repos_url": "https://api.github.com/users/sappelhoff/repos", "events_url": "https://api.github.com/users/sappelhoff/events{/privacy}", "received_events_url": "https://api.github.com/users/sappelhoff/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "drammock", "id": 1810515, "node_id": "MDQ6VXNlcjE4MTA1MTU=", "avatar_url": "https://avatars.githubusercontent.com/u/1810515?v=4", "gravatar_id": "", "url": "https://api.github.com/users/drammock", "html_url": "https://github.com/drammock", "followers_url": "https://api.github.com/users/drammock/followers", "following_url": "https://api.github.com/users/drammock/following{/other_user}", "gists_url": "https://api.github.com/users/drammock/gists{/gist_id}", "starred_url": "https://api.github.com/users/drammock/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/drammock/subscriptions", "organizations_url": "https://api.github.com/users/drammock/orgs", "repos_url": "https://api.github.com/users/drammock/repos", "events_url": "https://api.github.com/users/drammock/events{/privacy}", "received_events_url": "https://api.github.com/users/drammock/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "drammock", "id": 1810515, "node_id": "MDQ6VXNlcjE4MTA1MTU=", "avatar_url": "https://avatars.githubusercontent.com/u/1810515?v=4", "gravatar_id": "", "url": "https://api.github.com/users/drammock", "html_url": "https://github.com/drammock", "followers_url": "https://api.github.com/users/drammock/followers", "following_url": "https://api.github.com/users/drammock/following{/other_user}", "gists_url": "https://api.github.com/users/drammock/gists{/gist_id}", "starred_url": "https://api.github.com/users/drammock/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/drammock/subscriptions", "organizations_url": "https://api.github.com/users/drammock/orgs", "repos_url": "https://api.github.com/users/drammock/repos", "events_url": "https://api.github.com/users/drammock/events{/privacy}", "received_events_url": "https://api.github.com/users/drammock/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 2, "created_at": "2021-06-24T12:22:53Z", "updated_at": "2021-06-25T17:40:58Z", "closed_at": "2021-06-25T17:40:58Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "I have to create overlapping epochs from scratch using [EpochsArray](https://mne.tools/dev/generated/mne.EpochsArray.html#mne.EpochsArray). I designed my events, tmin, and other parameters so that the main event for each epoch (the t0 event) is exactly in the middle of a 2 second timespan (-1s to 1s). However when plotting via `epochs.plot`, the events are **not** in the middle.\r\n\r\nThis plotting appearance is fixed when I subset my epochs to only contain those epochs that are not overlapping.\r\n\r\nThe following MWE is modified from [the docs](https://mne.tools/dev/auto_tutorials/simulation/10_array_objs.html#creating-mne-python-data-structures-from-scratch).\r\n\r\nThe only change from the docs example is to go from non-overlapping epochs: `np.arange(0, 1000, sampling_freq)` \r\nto overlapping epochs: `np.linspace(0, 200, 5, dtype=int)`.\r\n\r\n```python\r\nimport mne\r\nimport numpy as np\r\n\r\nsampling_freq = 200  # in Hertz\r\n\r\ninfo = mne.create_info(ch_names=['10 Hz sine', '5 Hz cosine'],\r\n                       ch_types=['misc'] * 2,\r\n                       sfreq=sampling_freq)\r\n\r\ntimes = np.linspace(0, 1, sampling_freq, endpoint=False)\r\nsine = np.sin(20 * np.pi * times)\r\ncosine = np.cos(10 * np.pi * times)\r\n\r\ndata = np.array([[0.2 * sine, 1.0 * cosine],\r\n                 [0.4 * sine, 0.8 * cosine],\r\n                 [0.6 * sine, 0.6 * cosine],\r\n                 [0.8 * sine, 0.4 * cosine],\r\n                 [1.0 * sine, 0.2 * cosine]])\r\n\r\n\r\nevents = np.column_stack((np.linspace(0, 200, 5, dtype=int),  # NOTE: used to be np.arange(0, 1000, sampling_freq),\r\n                          np.zeros(5, dtype=int),\r\n                          np.array([1, 2, 1, 2, 1])))\r\nevent_dict = dict(condition_A=1, condition_B=2)\r\nsimulated_epochs = mne.EpochsArray(data, info, tmin=-0.5, events=events,\r\n                                   event_id=event_dict)\r\n\r\nsimulated_epochs.plot(picks='misc', events=events, event_id=event_dict)\r\n\r\n```\r\n\r\nTake a look at the resulting plot. It's hard to see in the following screenshot, but the events are NOT centered in the middle of the epoch -> rather, they are clustered at the end of the plot:\r\n\r\n![image](https://user-images.githubusercontent.com/9084751/123261599-3d933400-d4f7-11eb-9af2-add4db20653c.png)\r\n\r\n\r\nWhen subsetting these epochs to only contain non-overlapping epochs, the issue is solved and the plot shows the expected alignment of events in the middle of epochs.\r\n\r\n```python\r\nsimulated_epochs[np.array((0, 4))].plot(picks='misc', events=events[np.array((0, 4))], event_id=event_dict)\r\n\r\n```\r\n\r\n![image](https://user-images.githubusercontent.com/9084751/123261694-5b609900-d4f7-11eb-8e8c-1940da221c22.png)\r\n\r\n\r\n**Is this somehow expected? Or is it a bug?**", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/9502/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9502/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/9483", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9483/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9483/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9483/events", "html_url": "https://github.com/mne-tools/mne-python/issues/9483", "id": 922879721, "node_id": "MDU6SXNzdWU5MjI4Nzk3MjE=", "number": 9483, "title": "Trying to apply rejection thresholds repeatedly to Epochs crashes if only using a subset of initial reject channels", "user": {"login": "hoechenberger", "id": 2046265, "node_id": "MDQ6VXNlcjIwNDYyNjU=", "avatar_url": "https://avatars.githubusercontent.com/u/2046265?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hoechenberger", "html_url": "https://github.com/hoechenberger", "followers_url": "https://api.github.com/users/hoechenberger/followers", "following_url": "https://api.github.com/users/hoechenberger/following{/other_user}", "gists_url": "https://api.github.com/users/hoechenberger/gists{/gist_id}", "starred_url": "https://api.github.com/users/hoechenberger/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hoechenberger/subscriptions", "organizations_url": "https://api.github.com/users/hoechenberger/orgs", "repos_url": "https://api.github.com/users/hoechenberger/repos", "events_url": "https://api.github.com/users/hoechenberger/events{/privacy}", "received_events_url": "https://api.github.com/users/hoechenberger/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "hoechenberger", "id": 2046265, "node_id": "MDQ6VXNlcjIwNDYyNjU=", "avatar_url": "https://avatars.githubusercontent.com/u/2046265?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hoechenberger", "html_url": "https://github.com/hoechenberger", "followers_url": "https://api.github.com/users/hoechenberger/followers", "following_url": "https://api.github.com/users/hoechenberger/following{/other_user}", "gists_url": "https://api.github.com/users/hoechenberger/gists{/gist_id}", "starred_url": "https://api.github.com/users/hoechenberger/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hoechenberger/subscriptions", "organizations_url": "https://api.github.com/users/hoechenberger/orgs", "repos_url": "https://api.github.com/users/hoechenberger/repos", "events_url": "https://api.github.com/users/hoechenberger/events{/privacy}", "received_events_url": "https://api.github.com/users/hoechenberger/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "hoechenberger", "id": 2046265, "node_id": "MDQ6VXNlcjIwNDYyNjU=", "avatar_url": "https://avatars.githubusercontent.com/u/2046265?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hoechenberger", "html_url": "https://github.com/hoechenberger", "followers_url": "https://api.github.com/users/hoechenberger/followers", "following_url": "https://api.github.com/users/hoechenberger/following{/other_user}", "gists_url": "https://api.github.com/users/hoechenberger/gists{/gist_id}", "starred_url": "https://api.github.com/users/hoechenberger/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hoechenberger/subscriptions", "organizations_url": "https://api.github.com/users/hoechenberger/orgs", "repos_url": "https://api.github.com/users/hoechenberger/repos", "events_url": "https://api.github.com/users/hoechenberger/events{/privacy}", "received_events_url": "https://api.github.com/users/hoechenberger/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 4, "created_at": "2021-06-16T17:19:43Z", "updated_at": "2021-06-17T19:20:49Z", "closed_at": "2021-06-17T19:20:49Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "MWE:\r\n```python\r\nfrom pathlib import Path\r\nimport mne\r\n\r\n\r\nsample_dir = Path(mne.datasets.sample.data_path())\r\nsample_fname = sample_dir / 'MEG' / 'sample' / 'sample_audvis_raw.fif'\r\n\r\nraw = mne.io.read_raw_fif(sample_fname)\r\nraw.crop(tmax=60)\r\n\r\nevents = mne.find_events(raw, stim_channel='STI 014')\r\nevent_id = {'auditory/left': 1, 'auditory/right': 2, 'visual/left': 3,\r\n            'visual/right': 4, 'face': 5, 'buttonpress': 32}\r\n\r\nepochs = mne.Epochs(raw, events=events, event_id=event_id,\r\n                    tmin=-0.2, tmax=0.5, baseline=(None, 0),\r\n                    preload=True)\r\n\r\n# This works as expected\r\nreject_a = dict(grad=8e-10, mag=10e-11)\r\nepochs.drop_bad(reject=reject_a)\r\n\r\n# This raises an exception, but I'd expect it to work:\r\n# ValueError: reject[\"mag\"] == inf > 1e-10 (old value), new\r\n# reject values must be at least as stringent as previous ones\r\nreject_b = dict(grad=1e-10)\r\nepochs.drop_bad(reject=reject_b)\r\n\r\n# This works as expected\r\nreject_c = dict(grad=1e-10, mag=9e-11)\r\nepochs.drop_bad(reject=reject_c)\r\n```", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/9483/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9483/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/9482", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9482/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9482/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9482/events", "html_url": "https://github.com/mne-tools/mne-python/issues/9482", "id": 922558272, "node_id": "MDU6SXNzdWU5MjI1NTgyNzI=", "number": 9482, "title": "BUG: weird CNT reading", "user": {"login": "kingjr", "id": 4881164, "node_id": "MDQ6VXNlcjQ4ODExNjQ=", "avatar_url": "https://avatars.githubusercontent.com/u/4881164?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kingjr", "html_url": "https://github.com/kingjr", "followers_url": "https://api.github.com/users/kingjr/followers", "following_url": "https://api.github.com/users/kingjr/following{/other_user}", "gists_url": "https://api.github.com/users/kingjr/gists{/gist_id}", "starred_url": "https://api.github.com/users/kingjr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kingjr/subscriptions", "organizations_url": "https://api.github.com/users/kingjr/orgs", "repos_url": "https://api.github.com/users/kingjr/repos", "events_url": "https://api.github.com/users/kingjr/events{/privacy}", "received_events_url": "https://api.github.com/users/kingjr/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2021-06-16T12:38:10Z", "updated_at": "2021-07-06T12:51:37Z", "closed_at": "2021-06-28T20:58:12Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "Tried on both stable and dev.\r\n\r\nI'm trying to read a [.cnt  file](https://osf.io/xq5pd/). \r\n\r\nMNE indicates no error or warnings.\r\n\r\nHowever, the raw (or epoched data, based on the annotations) looks very weird: \r\n\r\n* every other channels alternate between a small set of discrete values: ```list(map(lambda x: len(np.unique(x)), raw._data[:, :1000]))``` => ```[[994, 8, 992, 7, 996, 6, 996, 7, 992, 6 ...]]```\r\n* the data within a given raw channels is discontinuous and does not show the classic 1/f dynamics:\r\n![image](https://user-images.githubusercontent.com/4881164/122220107-51fc7e80-ceb0-11eb-9cec-c2e10b544115.png)\r\n* the epoched data based on the annotation does not look any kind of ERP: \r\n![image](https://user-images.githubusercontent.com/4881164/122220200-66407b80-ceb0-11eb-948f-36e8745e6ff4.png)\r\n\r\nI suspect there is something wrong in how the data chunks are read and assembled, but I don't really understand the mne.io.cnt parser to help :/", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/9482/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9482/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/9470", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9470/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9470/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9470/events", "html_url": "https://github.com/mne-tools/mne-python/issues/9470", "id": 919857179, "node_id": "MDU6SXNzdWU5MTk4NTcxNzk=", "number": 9470, "title": "creating epoches without event", "user": {"login": "0anurag0", "id": 30240776, "node_id": "MDQ6VXNlcjMwMjQwNzc2", "avatar_url": "https://avatars.githubusercontent.com/u/30240776?v=4", "gravatar_id": "", "url": "https://api.github.com/users/0anurag0", "html_url": "https://github.com/0anurag0", "followers_url": "https://api.github.com/users/0anurag0/followers", "following_url": "https://api.github.com/users/0anurag0/following{/other_user}", "gists_url": "https://api.github.com/users/0anurag0/gists{/gist_id}", "starred_url": "https://api.github.com/users/0anurag0/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/0anurag0/subscriptions", "organizations_url": "https://api.github.com/users/0anurag0/orgs", "repos_url": "https://api.github.com/users/0anurag0/repos", "events_url": "https://api.github.com/users/0anurag0/events{/privacy}", "received_events_url": "https://api.github.com/users/0anurag0/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2021-06-13T18:37:06Z", "updated_at": "2021-06-13T19:28:03Z", "closed_at": "2021-06-13T19:28:03Z", "author_association": "NONE", "active_lock_reason": null, "body": "#### Describe the bug\r\ntrying to create an epoch with a continuous dataset which doesn't have events so creating events manually but unsuccessful.\r\nusing np array yet it says needs numpy array of int and has numpy.ndarray\r\n\r\n\r\n\r\n\r\n#### Steps to reproduce\r\nevents=np.linspace(0,15*60,600))\r\nepochs = mne.Epochs(edf_h01_r_hf.,events,  tmin=-0.2, tmax=0.5, preload=True)\r\n\r\n#### Expected results\r\nepoch formation\r\n\r\n#### Actual results\r\nTypeError: events should be a NumPy array of integers, got <class 'numpy.ndarray'>\r\n\r\n#### Additional information\r\nPlatform:      Linux-5.4.0-74-generic-x86_64-with-glibc2.29\r\nPython:        3.8.5 (default, May 27 2021, 13:30:53)  [GCC 9.3.0]\r\nExecutable:    /usr/bin/python3\r\nCPU:           x86_64: 4 cores\r\nMemory:        3.7 GB\r\n\r\nmne:           0.23.0\r\nnumpy:         1.19.5 {blas=openblas, lapack=openblas}\r\nscipy:         1.6.3\r\nmatplotlib:    3.4.2 {backend=module://ipykernel.pylab.backend_inline}\r\n\r\nsklearn:       0.24.2\r\nnumba:         Not found\r\nnibabel:       Not found\r\nnilearn:       Not found\r\ndipy:          Not found\r\ncupy:          Not found\r\npandas:        1.2.4\r\nmayavi:        Not found\r\npyvista:       Not found\r\nvtk:           Not found\r\n", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/9470/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9470/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/9469", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9469/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9469/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9469/events", "html_url": "https://github.com/mne-tools/mne-python/issues/9469", "id": 919640019, "node_id": "MDU6SXNzdWU5MTk2NDAwMTk=", "number": 9469, "title": "mne.filter.filter_data : All picks must be < n_channels (19), got 19", "user": {"login": "0anurag0", "id": 30240776, "node_id": "MDQ6VXNlcjMwMjQwNzc2", "avatar_url": "https://avatars.githubusercontent.com/u/30240776?v=4", "gravatar_id": "", "url": "https://api.github.com/users/0anurag0", "html_url": "https://github.com/0anurag0", "followers_url": "https://api.github.com/users/0anurag0/followers", "following_url": "https://api.github.com/users/0anurag0/following{/other_user}", "gists_url": "https://api.github.com/users/0anurag0/gists{/gist_id}", "starred_url": "https://api.github.com/users/0anurag0/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/0anurag0/subscriptions", "organizations_url": "https://api.github.com/users/0anurag0/orgs", "repos_url": "https://api.github.com/users/0anurag0/repos", "events_url": "https://api.github.com/users/0anurag0/events{/privacy}", "received_events_url": "https://api.github.com/users/0anurag0/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2021-06-12T19:02:08Z", "updated_at": "2021-06-13T06:59:29Z", "closed_at": "2021-06-13T06:59:29Z", "author_association": "NONE", "active_lock_reason": null, "body": "\r\n\r\n#### Describe the bug\r\nI get this value while trying to get a high pass filter\r\nValueError: All picks must be < n_channels (19), got 19\r\n\r\n\r\n#### Steps to reproduce\r\nfname = mne.datasets.sample.data_path() + '/MEG/sample/sample_audvis_raw.fif'\r\nraw = mne.io.read_raw_fif(fname)\r\nraw.info\r\nmne.filter.filter_data(raw,h_freq=0.1,l_freq=None,sfreq=600.61)\r\n\r\n[MWE]: https://en.wikipedia.org/wiki/Minimal_Working_Example\r\n[built-in datasets]: https://mne.tools/dev/overview/datasets_index.html\r\n[sample]: https://mne.tools/dev/overview/datasets_index.html#sample\r\n\r\n\r\n#### Expected results\r\na successful execution of high pass filter\r\n\r\n\r\n#### Actual results\r\nValueError: All picks must be < n_channels (376), got 376\r\n\r\n\r\n\r\n#### Additional information\r\nI have tried this with my dataset too, same error\r\nI have tried using picks too like below:\r\npicks=['Fp1',\"Fp2\",\"F3\",\"F4\",\"Fz\",\"T5\",\"T6\",\"T3\",\"T4\",\"C3\",\"C4\",\"Cz\"]\r\nor \r\npicks=[ 0  1  2  3  4  5  6  7  8  9 10 11 12 17]\r\nor picks=[0,1,2,3,4,5,6,7,8,9,10,11,12,17]\r\nbut same error\r\n\r\nPlatform:      Linux-5.4.104+-x86_64-with-Ubuntu-18.04-bionic\r\nPython:        3.7.10 (default, May  3 2021, 02:48:31)  [GCC 7.5.0]\r\nExecutable:    /usr/bin/python3\r\nCPU:           x86_64: 2 cores\r\nMemory:        12.7 GB\r\n\r\nmne:           0.23.0\r\nnumpy:         1.19.5 {blas=openblas, lapack=openblas}\r\nscipy:         1.4.1\r\nmatplotlib:    3.2.2 {backend=module://ipykernel.pylab.backend_inline}\r\n\r\nsklearn:       0.22.2.post1\r\nnumba:         0.51.2\r\nnibabel:       3.0.2\r\nnilearn:       Not found\r\ndipy:          Not found\r\ncupy:          Not found\r\npandas:        1.1.5\r\nmayavi:        Not found\r\npyvista:       Not found\r\nvtk:           Not found\r\n", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/9469/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9469/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/9454", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9454/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9454/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9454/events", "html_url": "https://github.com/mne-tools/mne-python/issues/9454", "id": 915378437, "node_id": "MDU6SXNzdWU5MTUzNzg0Mzc=", "number": 9454, "title": "Dropping epochs with Epochs.plot() not working properly", "user": {"login": "matiaszazzali", "id": 45296438, "node_id": "MDQ6VXNlcjQ1Mjk2NDM4", "avatar_url": "https://avatars.githubusercontent.com/u/45296438?v=4", "gravatar_id": "", "url": "https://api.github.com/users/matiaszazzali", "html_url": "https://github.com/matiaszazzali", "followers_url": "https://api.github.com/users/matiaszazzali/followers", "following_url": "https://api.github.com/users/matiaszazzali/following{/other_user}", "gists_url": "https://api.github.com/users/matiaszazzali/gists{/gist_id}", "starred_url": "https://api.github.com/users/matiaszazzali/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/matiaszazzali/subscriptions", "organizations_url": "https://api.github.com/users/matiaszazzali/orgs", "repos_url": "https://api.github.com/users/matiaszazzali/repos", "events_url": "https://api.github.com/users/matiaszazzali/events{/privacy}", "received_events_url": "https://api.github.com/users/matiaszazzali/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "drammock", "id": 1810515, "node_id": "MDQ6VXNlcjE4MTA1MTU=", "avatar_url": "https://avatars.githubusercontent.com/u/1810515?v=4", "gravatar_id": "", "url": "https://api.github.com/users/drammock", "html_url": "https://github.com/drammock", "followers_url": "https://api.github.com/users/drammock/followers", "following_url": "https://api.github.com/users/drammock/following{/other_user}", "gists_url": "https://api.github.com/users/drammock/gists{/gist_id}", "starred_url": "https://api.github.com/users/drammock/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/drammock/subscriptions", "organizations_url": "https://api.github.com/users/drammock/orgs", "repos_url": "https://api.github.com/users/drammock/repos", "events_url": "https://api.github.com/users/drammock/events{/privacy}", "received_events_url": "https://api.github.com/users/drammock/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "drammock", "id": 1810515, "node_id": "MDQ6VXNlcjE4MTA1MTU=", "avatar_url": "https://avatars.githubusercontent.com/u/1810515?v=4", "gravatar_id": "", "url": "https://api.github.com/users/drammock", "html_url": "https://github.com/drammock", "followers_url": "https://api.github.com/users/drammock/followers", "following_url": "https://api.github.com/users/drammock/following{/other_user}", "gists_url": "https://api.github.com/users/drammock/gists{/gist_id}", "starred_url": "https://api.github.com/users/drammock/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/drammock/subscriptions", "organizations_url": "https://api.github.com/users/drammock/orgs", "repos_url": "https://api.github.com/users/drammock/repos", "events_url": "https://api.github.com/users/drammock/events{/privacy}", "received_events_url": "https://api.github.com/users/drammock/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 4, "created_at": "2021-06-08T19:16:11Z", "updated_at": "2021-06-10T19:04:04Z", "closed_at": "2021-06-10T19:04:04Z", "author_association": "NONE", "active_lock_reason": null, "body": "#### Describe the bug\r\nDuring visual inspection of epoched EEG data I try to remove epochs with artifacts by clicking on them. After selecting all the unwanted epochs and closing the plot, I get a text like \r\n\r\n> Dropped X epochs: x_1, x_2, .... x_n\r\n\r\nHowever, if I plot the same epochs object again, I find that the unwanted epochs are still there and, instead, other epochs adjacent to the unwanted one are missing. \r\n\r\nI also noticed that during the selection of unwanted epochs in the epochs.plot(), the selected epochs (marked in red) change to the epoch adjacent to the ones selected manually as I scroll over the data.\r\n\r\n\r\n#### Steps to reproduce\r\n\r\n```\r\nimport os\r\nimport mne\r\n\r\n%matplotlib qt\r\n\r\nsample_data_folder = mne.datasets.sample.data_path()\r\nsample_data_raw_file = os.path.join(sample_data_folder, 'MEG', 'sample',\r\n                                    'sample_audvis_raw.fif')\r\nraw = mne.io.read_raw_fif(sample_data_raw_file, verbose=False).crop(tmax=60)\r\n\r\nevents = mne.find_events(raw, stim_channel='STI 014')\r\n\r\nepochs = mne.Epochs(raw, events,event_id=3, tmin=-0.3, tmax=0.7)\r\ndel raw \r\n\r\nepochs.plot(n_epochs=5)\r\n\r\n```\r\n\r\nMark some epochs as bad and scroll back and forward. See if the selected epochs are still the same (the epoch number does not change but the epoch is not the same anymore)\r\n\r\nhttps://user-images.githubusercontent.com/45296438/121243779-7f27ac00-c874-11eb-843a-997acc4144d1.mp4\r\n\r\nhttps://user-images.githubusercontent.com/45296438/121242587-1ee43a80-c873-11eb-9f97-81e007fca5d0.mp4\r\n\r\n\r\n#### Expected results\r\n*Drop the manually selected epochs and not others*\r\n\r\n\r\n#### Actual results\r\n*Epochs other than the selected ones are dropped*\r\n\r\n\r\n#### Additional information*`mne.sys_info()`:\r\n\r\n> Platform:      Windows-10-10.0.19041-SP0\r\nPython:        3.9.2 | packaged by conda-forge | (default, Feb 21 2021, 04:59:43) [MSC v.1916 64 bit (AMD64)]\r\nExecutable:    C:\\Users\\mati_\\Anaconda3\\envs\\mne\\python.exe\r\nCPU:           Intel64 Family 6 Model 78 Stepping 3, GenuineIntel: 4 cores\r\nMemory:        7.9 GB\r\n\r\nmne:           0.23.0\r\nnumpy:         1.20.1 {blas=mkl_rt, lapack=mkl_rt}\r\nscipy:         1.6.2\r\nmatplotlib:    3.4.1 {backend=Qt5Agg}\r\n\r\nsklearn:       0.24.1\r\nnumba:         0.53.1\r\nnibabel:       3.2.1\r\nnilearn:       0.7.1\r\ndipy:          1.4.0\r\ncupy:          Not found\r\npandas:        1.2.4\r\nmayavi:        4.7.2\r\npyvista:       0.29.1 {pyvistaqt=0.3.0, OpenGL 4.5.0 - Build 23.20.16.4973 via Intel(R) HD Graphics 520}\r\nvtk:           9.0.1\r\nPyQt5:         5.12.3\r\n\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/9454/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9454/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/9446", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9446/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9446/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9446/events", "html_url": "https://github.com/mne-tools/mne-python/issues/9446", "id": 911606567, "node_id": "MDU6SXNzdWU5MTE2MDY1Njc=", "number": 9446, "title": "raw.set_montage does not convert to the HEAD coordinate frame for montage with LPA/Nasion/RPA set", "user": {"login": "timpx", "id": 5063219, "node_id": "MDQ6VXNlcjUwNjMyMTk=", "avatar_url": "https://avatars.githubusercontent.com/u/5063219?v=4", "gravatar_id": "", "url": "https://api.github.com/users/timpx", "html_url": "https://github.com/timpx", "followers_url": "https://api.github.com/users/timpx/followers", "following_url": "https://api.github.com/users/timpx/following{/other_user}", "gists_url": "https://api.github.com/users/timpx/gists{/gist_id}", "starred_url": "https://api.github.com/users/timpx/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/timpx/subscriptions", "organizations_url": "https://api.github.com/users/timpx/orgs", "repos_url": "https://api.github.com/users/timpx/repos", "events_url": "https://api.github.com/users/timpx/events{/privacy}", "received_events_url": "https://api.github.com/users/timpx/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/mne-tools/mne-python/milestones/20", "html_url": "https://github.com/mne-tools/mne-python/milestone/20", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/milestones/20/labels", "id": 6675015, "node_id": "MDk6TWlsZXN0b25lNjY3NTAxNQ==", "number": 20, "title": "0.24", "description": "", "creator": {"login": "larsoner", "id": 2365790, "node_id": "MDQ6VXNlcjIzNjU3OTA=", "avatar_url": "https://avatars.githubusercontent.com/u/2365790?v=4", "gravatar_id": "", "url": "https://api.github.com/users/larsoner", "html_url": "https://github.com/larsoner", "followers_url": "https://api.github.com/users/larsoner/followers", "following_url": "https://api.github.com/users/larsoner/following{/other_user}", "gists_url": "https://api.github.com/users/larsoner/gists{/gist_id}", "starred_url": "https://api.github.com/users/larsoner/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/larsoner/subscriptions", "organizations_url": "https://api.github.com/users/larsoner/orgs", "repos_url": "https://api.github.com/users/larsoner/repos", "events_url": "https://api.github.com/users/larsoner/events{/privacy}", "received_events_url": "https://api.github.com/users/larsoner/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 53, "state": "closed", "created_at": "2021-04-19T12:32:46Z", "updated_at": "2021-11-03T16:14:55Z", "due_on": "2021-11-01T07:00:00Z", "closed_at": "2021-11-03T16:14:55Z"}, "comments": 1, "created_at": "2021-06-04T15:19:32Z", "updated_at": "2021-06-07T19:34:15Z", "closed_at": "2021-06-07T19:34:15Z", "author_association": "NONE", "active_lock_reason": null, "body": "#### bug\r\n`raw.set_montage` does not convert to the HEAD coordinate frame when using a montage with LPA/Nasion/RPA set.\r\n\r\n#### Steps to reproduce\r\n```python\r\nimport numpy as np\r\nimport mne\r\nfrom mne.datasets import fetch_fsaverage\r\n\r\n# creating fake raws does not set the head coordinate frame\r\ndata = np.random.randn(2, 100)\r\ninfo = mne.create_info(ch_names=['a', 'b'], sfreq=512)\r\nraw = mne.io.RawArray(data, info)\r\nprint(raw.info['chs'][0]['coord_frame'])\r\n\r\n# adding a montage does not help\r\nsample_path = mne.datasets.sample.data_path()\r\nsubject = 'fsaverage'\r\nsubjects_dir = sample_path + '/subjects'\r\nfetch_fsaverage(subjects_dir=subjects_dir) \r\nch_coords = np.array([[-0.00250136,  0.04913788,  0.05047056],\r\n                       [-0.00528394,  0.05066484,  0.05061559]])\r\nch_pos = dict(zip(['a', 'b'], ch_coords))\r\nlpa, nasion, rpa = mne.coreg.get_mni_fiducials(\r\n    subject, subjects_dir=subjects_dir)\r\nlpa, nasion, rpa = lpa['r'], nasion['r'], rpa['r']\r\nmontage = mne.channels.make_dig_montage(\r\n    ch_pos, coord_frame='mri', nasion=nasion, lpa=lpa, rpa=rpa)\r\nraw.set_montage(montage)\r\nprint(raw.info['chs'][0]['coord_frame'])\r\n```\r\n\r\n#### Expected results\r\nAfter setting montage, ```raw``` should be in the HEAD coordinate frame.\r\n\r\n#### Actual output\r\n\r\n`print(raw.info['chs'][0]['coord_frame'])` gives `0 (FIFFV_COORD_UNKNOWN)`\r\n\r\n#### MNE version\r\n 0.24.0 devel", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/9446/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9446/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/9436", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9436/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9436/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9436/events", "html_url": "https://github.com/mne-tools/mne-python/issues/9436", "id": 908040238, "node_id": "MDU6SXNzdWU5MDgwNDAyMzg=", "number": 9436, "title": "mne.concatenate_raws() doesn't check if dev_head_t is the same in all instances", "user": {"login": "hoechenberger", "id": 2046265, "node_id": "MDQ6VXNlcjIwNDYyNjU=", "avatar_url": "https://avatars.githubusercontent.com/u/2046265?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hoechenberger", "html_url": "https://github.com/hoechenberger", "followers_url": "https://api.github.com/users/hoechenberger/followers", "following_url": "https://api.github.com/users/hoechenberger/following{/other_user}", "gists_url": "https://api.github.com/users/hoechenberger/gists{/gist_id}", "starred_url": "https://api.github.com/users/hoechenberger/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hoechenberger/subscriptions", "organizations_url": "https://api.github.com/users/hoechenberger/orgs", "repos_url": "https://api.github.com/users/hoechenberger/repos", "events_url": "https://api.github.com/users/hoechenberger/events{/privacy}", "received_events_url": "https://api.github.com/users/hoechenberger/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "hoechenberger", "id": 2046265, "node_id": "MDQ6VXNlcjIwNDYyNjU=", "avatar_url": "https://avatars.githubusercontent.com/u/2046265?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hoechenberger", "html_url": "https://github.com/hoechenberger", "followers_url": "https://api.github.com/users/hoechenberger/followers", "following_url": "https://api.github.com/users/hoechenberger/following{/other_user}", "gists_url": "https://api.github.com/users/hoechenberger/gists{/gist_id}", "starred_url": "https://api.github.com/users/hoechenberger/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hoechenberger/subscriptions", "organizations_url": "https://api.github.com/users/hoechenberger/orgs", "repos_url": "https://api.github.com/users/hoechenberger/repos", "events_url": "https://api.github.com/users/hoechenberger/events{/privacy}", "received_events_url": "https://api.github.com/users/hoechenberger/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "hoechenberger", "id": 2046265, "node_id": "MDQ6VXNlcjIwNDYyNjU=", "avatar_url": "https://avatars.githubusercontent.com/u/2046265?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hoechenberger", "html_url": "https://github.com/hoechenberger", "followers_url": "https://api.github.com/users/hoechenberger/followers", "following_url": "https://api.github.com/users/hoechenberger/following{/other_user}", "gists_url": "https://api.github.com/users/hoechenberger/gists{/gist_id}", "starred_url": "https://api.github.com/users/hoechenberger/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hoechenberger/subscriptions", "organizations_url": "https://api.github.com/users/hoechenberger/orgs", "repos_url": "https://api.github.com/users/hoechenberger/repos", "events_url": "https://api.github.com/users/hoechenberger/events{/privacy}", "received_events_url": "https://api.github.com/users/hoechenberger/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 2, "created_at": "2021-06-01T08:25:11Z", "updated_at": "2021-06-03T07:09:33Z", "closed_at": "2021-06-03T07:09:33Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "MWE:\r\n```python\r\nfrom pathlib import Path\r\nimport mne\r\n\r\n\r\nsample_dir = Path(mne.datasets.sample.data_path())\r\nsample_fname = sample_dir / 'MEG' / 'sample' / 'sample_audvis_raw.fif'\r\n\r\nraw = mne.io.read_raw_fif(sample_fname, preload=True)\r\nraw.crop(tmax=60)\r\n\r\nraws = [raw.copy(), raw.copy()]\r\n\r\n# Mofidy one raw's dev_head_t\r\nraws[1].info['dev_head_t']['trans'] += 0.1\r\n\r\n# This works, but shouldn't\r\nmne.concatenate_raws(raws)\r\n```\r\n\r\nWith Epochs, it fails, as it should:\r\n```python\r\nepochs = []\r\nfor raw in raws:\r\n    epochs.append(mne.make_fixed_length_epochs(raw=raw, duration=20))\r\n\r\nmne.concatenate_epochs(epochs)\r\n```\r\n\r\n```\r\nValueError: epochs[1].info['dev_head_t'] must match. The instances probably come from different runs,\r\n and are therefore associated with different head positions. Manually change info['dev_head_t'] to avoid \r\nthis message but beware that this means the MEG sensors will not be properly spatially aligned. \r\nSee mne.preprocessing.maxwell_filter to realign the runs to a common head position.\r\n```\r\n\r\ncc @agramfort ", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/9436/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9436/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/9428", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9428/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9428/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9428/events", "html_url": "https://github.com/mne-tools/mne-python/issues/9428", "id": 903773526, "node_id": "MDU6SXNzdWU5MDM3NzM1MjY=", "number": 9428, "title": "Info rank computation fails if picking only 'grad' or 'mag'", "user": {"login": "agramfort", "id": 161052, "node_id": "MDQ6VXNlcjE2MTA1Mg==", "avatar_url": "https://avatars.githubusercontent.com/u/161052?v=4", "gravatar_id": "", "url": "https://api.github.com/users/agramfort", "html_url": "https://github.com/agramfort", "followers_url": "https://api.github.com/users/agramfort/followers", "following_url": "https://api.github.com/users/agramfort/following{/other_user}", "gists_url": "https://api.github.com/users/agramfort/gists{/gist_id}", "starred_url": "https://api.github.com/users/agramfort/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/agramfort/subscriptions", "organizations_url": "https://api.github.com/users/agramfort/orgs", "repos_url": "https://api.github.com/users/agramfort/repos", "events_url": "https://api.github.com/users/agramfort/events{/privacy}", "received_events_url": "https://api.github.com/users/agramfort/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2021-05-27T13:41:59Z", "updated_at": "2021-06-01T08:31:56Z", "closed_at": "2021-06-01T08:31:56Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "try to run this:\r\n\r\n```python\r\nimport os.path as op\r\nimport mne\r\nfrom mne.datasets import somato\r\n\r\ndata_path = somato.data_path()\r\nsubject = '01'\r\ntask = 'somato'\r\nraw_fname = op.join(data_path, 'sub-{}'.format(subject), 'meg',\r\n                    'sub-{}_task-{}_meg.fif'.format(subject, task))\r\n\r\nraw = mne.io.read_raw_fif(raw_fname)\r\nevents = mne.find_events(raw, stim_channel='STI 014')\r\npicks = mne.pick_types(raw.info, meg=True, eeg=False, eog=True, stim=False)\r\nevent_id, tmin, tmax = 1, -1., 3.\r\nbaseline = (None, 0)\r\nepochs = mne.Epochs(raw, events, event_id, tmin, tmax, picks=picks,\r\n                    baseline=baseline, reject=dict(grad=4000e-13, eog=350e-6),\r\n                    preload=True)\r\nevoked = epochs.average()\r\n\r\nprint('Rank with all MEG')\r\nprint(mne.compute_rank(evoked, 'info'))\r\n\r\nprint('Rank with only GRAD')\r\nprint(mne.compute_rank(evoked.copy().pick('grad'), 'info'))\r\n```\r\n\r\nyou will get:\r\n\r\n```\r\nRank with all MEG\r\n{'meg': 64}\r\nRank with only GRAD\r\n{'grad': 204}\r\n```\r\n\r\nit shows you that if you pick the grad it ignores the rank computation derived from maxfilter.\r\n\r\n@larsoner thoughts?\r\n\r\nthx @PABannier for spotting the bug...", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/9428/reactions", "total_count": 1, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9428/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/9425", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9425/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9425/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9425/events", "html_url": "https://github.com/mne-tools/mne-python/issues/9425", "id": 900485021, "node_id": "MDU6SXNzdWU5MDA0ODUwMjE=", "number": 9425, "title": "save_movie does not seem to interpret arguments", "user": {"login": "timpx", "id": 5063219, "node_id": "MDQ6VXNlcjUwNjMyMTk=", "avatar_url": "https://avatars.githubusercontent.com/u/5063219?v=4", "gravatar_id": "", "url": "https://api.github.com/users/timpx", "html_url": "https://github.com/timpx", "followers_url": "https://api.github.com/users/timpx/followers", "following_url": "https://api.github.com/users/timpx/following{/other_user}", "gists_url": "https://api.github.com/users/timpx/gists{/gist_id}", "starred_url": "https://api.github.com/users/timpx/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/timpx/subscriptions", "organizations_url": "https://api.github.com/users/timpx/orgs", "repos_url": "https://api.github.com/users/timpx/repos", "events_url": "https://api.github.com/users/timpx/events{/privacy}", "received_events_url": "https://api.github.com/users/timpx/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2021-05-25T08:22:42Z", "updated_at": "2021-05-27T14:01:32Z", "closed_at": "2021-05-27T14:01:32Z", "author_association": "NONE", "active_lock_reason": null, "body": "#### Describe the bug\r\nsave_movie function does not seem to interpret arguments. For instance, with the time_viewer argument set to True, the saved movie does not have a visible time viewer. The time_dilatation argument does not seem to have any impact either. Etc.\r\n\r\n\r\n#### Steps to reproduce\r\nRun the [sEEG tutorial](https://mne.tools/stable/auto_tutorials/clinical/20_seeg.html) and uncomment the following line:\r\n```python\r\nbrain.save_movie(time_dilation=3, interpolation='linear', framerate=10,\r\n                  time_viewer=True, filename='./mne-test-seeg.m4')\r\n```\r\n\r\n#### Expected results\r\nI would expect the arguments to work. Especially time_dilatation, because right now for me it takes forever to save the movie.\r\n\r\n#### Actual results\r\nResulting movie is 1 min 40 sec without time courses, unlike what is shown on the sEEG tutorial webpage.\r\n\r\n#### Additional information\r\nPlatform:      Linux-5.4.0-72-generic-x86_64-with-glibc2.31\r\nPython:        3.9.2 | packaged by conda-forge | (default, Feb 21 2021, 05:02:46)  [GCC 9.3.0]\r\nExecutable:    ~/anaconda3/envs/neo_mne/bin/python\r\nCPU:           x86_64: 24 cores\r\nMemory:        250.2 GB\r\n\r\nmne:           0.23.0\r\nnumpy:         1.19.2 {blas=openblas, lapack=openblas}\r\nscipy:         1.5.3\r\nmatplotlib:    3.3.4 {backend=Qt5Agg}\r\n\r\nsklearn:       0.23.2\r\nnumba:         0.53.1\r\nnibabel:       3.2.1\r\nnilearn:       0.7.1\r\ndipy:          1.2.0\r\ncupy:          Not found\r\npandas:        1.2.4\r\nmayavi:        4.7.2\r\npyvista:       0.29.1 {pyvistaqt=0.3.0, OpenGL 4.5.0 NVIDIA 390.143 via Quadro P5000/PCIe/SSE2}\r\nvtk:           9.0.1\r\nPyQt5:         5.12.3\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/9425/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9425/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/9413", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9413/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9413/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9413/events", "html_url": "https://github.com/mne-tools/mne-python/issues/9413", "id": 896862087, "node_id": "MDU6SXNzdWU4OTY4NjIwODc=", "number": 9413, "title": "BUG: Raw.plot() error when changing duration while vline visible", "user": {"login": "marsipu", "id": 46245704, "node_id": "MDQ6VXNlcjQ2MjQ1NzA0", "avatar_url": "https://avatars.githubusercontent.com/u/46245704?v=4", "gravatar_id": "", "url": "https://api.github.com/users/marsipu", "html_url": "https://github.com/marsipu", "followers_url": "https://api.github.com/users/marsipu/followers", "following_url": "https://api.github.com/users/marsipu/following{/other_user}", "gists_url": "https://api.github.com/users/marsipu/gists{/gist_id}", "starred_url": "https://api.github.com/users/marsipu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/marsipu/subscriptions", "organizations_url": "https://api.github.com/users/marsipu/orgs", "repos_url": "https://api.github.com/users/marsipu/repos", "events_url": "https://api.github.com/users/marsipu/events{/privacy}", "received_events_url": "https://api.github.com/users/marsipu/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2021-05-20T13:49:36Z", "updated_at": "2021-05-20T19:08:52Z", "closed_at": "2021-05-20T19:08:52Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "#### Describe the bug\r\nWhen the vertical line is visible and the shown duration is reduced by pressing `End`, nothing happens and an error occurs due to l.713-714 in mne.viz._figure.py:\r\n```python\r\nif key == 'end' and self.mne.vline_visible:  # prevent flicker\r\n    self._show_vline(None)\r\n```\r\n```python\r\nTraceback (most recent call last):\r\n  File \"/home/martins/miniconda3/envs/mnedev/lib/python3.9/site-packages/matplotlib/cbook/__init__.py\", line 270, in process\r\n    func(*args, **kwargs)\r\n  File \"/home/martins/PycharmProjects/mne-python/mne/viz/_figure.py\", line 714, in _keypress\r\n    self._show_vline(None)\r\n  File \"/home/martins/PycharmProjects/mne-python/mne/viz/_figure.py\", line 2210, in _show_vline\r\n    self.mne.vline_text.set_text(f'{xdata:0.2f} s ')\r\nTypeError: unsupported format string passed to NoneType.__format__\r\n```\r\n\r\nWhat is the preventing of flicker about?\r\nWould you rather remove the line or handle None as argument?\r\n\r\n#### Steps to reproduce\r\n\r\n1. Plot Raw as in:\r\n```python\r\nsample_data_folder = mne.datasets.sample.data_path()\r\nsample_data_raw_file = os.path.join(sample_data_folder, 'MEG', 'sample', 'sample_audvis_raw.fif')\r\nraw = mne.io.read_raw_fif(sample_data_raw_file)\r\nraw.plot(block=True)\r\n```\r\n2. Make vertical line visible by clicking inside plot\r\n3. Press `End` on keyboard.\r\n\r\n#### Expected results\r\nDuration changes.\r\n\r\n\r\n#### Actual results\r\nDuration doesn't change, error is thrown instead.\r\n", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/9413/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9413/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/9385", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9385/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9385/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9385/events", "html_url": "https://github.com/mne-tools/mne-python/issues/9385", "id": 883758803, "node_id": "MDU6SXNzdWU4ODM3NTg4MDM=", "number": 9385, "title": "filename issue with the new _repr_html_ when creating RawArray directly", "user": {"login": "timpx", "id": 5063219, "node_id": "MDQ6VXNlcjUwNjMyMTk=", "avatar_url": "https://avatars.githubusercontent.com/u/5063219?v=4", "gravatar_id": "", "url": "https://api.github.com/users/timpx", "html_url": "https://github.com/timpx", "followers_url": "https://api.github.com/users/timpx/followers", "following_url": "https://api.github.com/users/timpx/following{/other_user}", "gists_url": "https://api.github.com/users/timpx/gists{/gist_id}", "starred_url": "https://api.github.com/users/timpx/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/timpx/subscriptions", "organizations_url": "https://api.github.com/users/timpx/orgs", "repos_url": "https://api.github.com/users/timpx/repos", "events_url": "https://api.github.com/users/timpx/events{/privacy}", "received_events_url": "https://api.github.com/users/timpx/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2021-05-10T08:53:02Z", "updated_at": "2021-09-10T16:36:40Z", "closed_at": "2021-05-18T17:00:02Z", "author_association": "NONE", "active_lock_reason": null, "body": "#### Describe the bug\r\nAfter creating a RawArray from scratch, for instance after importing data with neo, the representation of the array fails in Jupyter notebook. The bug seems to be related to _repr_html_ introduced in 0.23.0., where the basename is not found for RawArrays created from scratch.\r\n\r\n#### Steps to reproduce\r\nYou can simply reproduce by executing this [MNE example](https://mne.tools/stable/auto_examples/io/read_neo_format.html#sphx-glr-auto-examples-io-read-neo-format-py) in a Jupyter notebook, and then run \r\n```python\r\nraw\r\n```\r\n\r\n#### Expected results\r\nWould expect the actual nice html representation introduced in 0.23.0, with the filenames left empty.\r\n\r\n\r\n#### Actual results\r\n```python\r\n---------------------------------------------------------------------------\r\nTypeError                                 Traceback (most recent call last)\r\n~/anaconda3/envs/neo_mne/lib/python3.9/site-packages/IPython/core/formatters.py in __call__(self, obj)\r\n    343             method = get_real_method(obj, self.print_method)\r\n    344             if method is not None:\r\n--> 345                 return method()\r\n    346             return None\r\n    347         else:\r\n\r\n~/anaconda3/envs/neo_mne/lib/python3.9/site-packages/mne/io/base.py in _repr_html_(self, caption)\r\n   1761 \r\n   1762     def _repr_html_(self, caption=None):\r\n-> 1763         basenames = [os.path.basename(f) for f in self._filenames]\r\n   1764         m, s = divmod(self._last_time - self.first_time, 60)\r\n   1765         h, m = divmod(m, 60)\r\n\r\n~/anaconda3/envs/neo_mne/lib/python3.9/site-packages/mne/io/base.py in <listcomp>(.0)\r\n   1761 \r\n   1762     def _repr_html_(self, caption=None):\r\n-> 1763         basenames = [os.path.basename(f) for f in self._filenames]\r\n   1764         m, s = divmod(self._last_time - self.first_time, 60)\r\n   1765         h, m = divmod(m, 60)\r\n\r\n~/anaconda3/envs/neo_mne/lib/python3.9/posixpath.py in basename(p)\r\n    140 def basename(p):\r\n    141     \"\"\"Returns the final component of a pathname\"\"\"\r\n--> 142     p = os.fspath(p)\r\n    143     sep = _get_sep(p)\r\n    144     i = p.rfind(sep) + 1\r\n\r\nTypeError: expected str, bytes or os.PathLike object, not NoneType\r\n\r\n```\r\n\r\n\r\n#### Additional information\r\n```python\r\nPlatform:      Linux-5.4.0-72-generic-x86_64-with-glibc2.31\r\nPython:        3.9.2 | packaged by conda-forge | (default, Feb 21 2021, 05:02:46)  [GCC 9.3.0]\r\nExecutable:    ~/anaconda3/envs/neo_mne/bin/python\r\nCPU:           x86_64: 24 cores\r\nMemory:        250.2 GB\r\n\r\nmne:           0.23.0\r\nnumpy:         1.19.2 {blas=openblas, lapack=openblas}\r\nscipy:         1.5.3\r\nmatplotlib:    3.3.4 {backend=module://ipykernel.pylab.backend_inline}\r\n\r\nsklearn:       0.23.2\r\nnumba:         0.53.1\r\nnibabel:       3.2.1\r\nnilearn:       0.7.1\r\ndipy:          1.2.0\r\ncupy:          Not found\r\npandas:        1.2.4\r\nmayavi:        4.7.2\r\npyvista:       0.29.1 {pyvistaqt=0.3.0, OpenGL 4.5.0 NVIDIA 390.143 via Quadro P5000/PCIe/SSE2}\r\nvtk:           9.0.1\r\nPyQt5:         5.12.3\r\n```\r\n", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/9385/reactions", "total_count": 1, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9385/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/9380", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9380/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9380/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9380/events", "html_url": "https://github.com/mne-tools/mne-python/issues/9380", "id": 878990509, "node_id": "MDU6SXNzdWU4Nzg5OTA1MDk=", "number": 9380, "title": "mne.io.read_raw_curry() cannot read the event file end with '.cdt.ceo'", "user": {"login": "dddd1007", "id": 13389578, "node_id": "MDQ6VXNlcjEzMzg5NTc4", "avatar_url": "https://avatars.githubusercontent.com/u/13389578?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dddd1007", "html_url": "https://github.com/dddd1007", "followers_url": "https://api.github.com/users/dddd1007/followers", "following_url": "https://api.github.com/users/dddd1007/following{/other_user}", "gists_url": "https://api.github.com/users/dddd1007/gists{/gist_id}", "starred_url": "https://api.github.com/users/dddd1007/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dddd1007/subscriptions", "organizations_url": "https://api.github.com/users/dddd1007/orgs", "repos_url": "https://api.github.com/users/dddd1007/repos", "events_url": "https://api.github.com/users/dddd1007/events{/privacy}", "received_events_url": "https://api.github.com/users/dddd1007/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 7, "created_at": "2021-05-07T13:18:58Z", "updated_at": "2021-05-10T16:45:24Z", "closed_at": "2021-05-10T16:45:24Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "#### Describe the bug\r\nI have tried to use `mne.io.read_raw_curry()` to read my data created by Curry 8, but there were no annotations in the Raw object. But EEGLAB can import the data and show the annotations correctly.\r\n\r\n#### Steps to reproduce\r\nI read the source code of [curry.py](https://github.com/mne-tools/mne-python/blob/maint/0.23/mne/io/curry/curry.py), and I found this function cannot handle the \".cdt.ceo\" file. \r\n\r\nSo I change the file extension of my file from \".cdt.ceo\" to \"cdt.cef\", and the function works smoothly.\r\n\r\n#### Expected results\r\n`mne.io.read_raw_curry()` can read cef file too, or it will make some users confused.\r\n\r\n#### Additional information\r\nI am sorry for my weak program skill. I have tried to fix this bug. \r\n", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/9380/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9380/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/9374", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9374/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9374/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9374/events", "html_url": "https://github.com/mne-tools/mne-python/issues/9374", "id": 877292702, "node_id": "MDU6SXNzdWU4NzcyOTI3MDI=", "number": 9374, "title": "Repeated Epoch/Evoked cropping is not idempotent when include_tmax=False", "user": {"login": "jsosulski", "id": 2545339, "node_id": "MDQ6VXNlcjI1NDUzMzk=", "avatar_url": "https://avatars.githubusercontent.com/u/2545339?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jsosulski", "html_url": "https://github.com/jsosulski", "followers_url": "https://api.github.com/users/jsosulski/followers", "following_url": "https://api.github.com/users/jsosulski/following{/other_user}", "gists_url": "https://api.github.com/users/jsosulski/gists{/gist_id}", "starred_url": "https://api.github.com/users/jsosulski/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jsosulski/subscriptions", "organizations_url": "https://api.github.com/users/jsosulski/orgs", "repos_url": "https://api.github.com/users/jsosulski/repos", "events_url": "https://api.github.com/users/jsosulski/events{/privacy}", "received_events_url": "https://api.github.com/users/jsosulski/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2021-05-06T09:26:18Z", "updated_at": "2021-05-10T12:34:46Z", "closed_at": "2021-05-10T12:34:46Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "#### Describe the bug\r\n\r\nRepeated cropping of `mne.Epoch` when `include_tmax=False` cuts off the last time sample.\r\n\r\n#### Steps to reproduce\r\n\r\n```python\r\nimport mne\r\nimport numpy as np\r\n\r\nn_epochs, n_channels, n_timepoints = 10, 4, 21\r\nch_names = [f\"ch_{i}\" for i in range(n_channels)]\r\nfake_data = np.random.random((n_epochs, n_channels, n_timepoints))\r\n\r\ninfo = mne.create_info(ch_names=ch_names, sfreq=40)\r\nepo = mne.EpochsArray(fake_data, info)\r\n\r\nfor i in range(10):\r\n    epo.crop(tmin=0, tmax=0.4, include_tmax=False)\r\n    print(f\"{epo.tmax=}\")\r\n```\r\n\r\n#### Expected results\r\n\r\nThe `epo.tmax` should be set to 0.375 on the first and all subsequent iterations.\r\n\r\n#### Actual results\r\n\r\nEvery loop iteration cuts off the last time sample of the epoch.\r\n\r\n#### Additional information\r\n\r\n```\r\nPlatform:      Linux-5.4.0-72-generic-x86_64-with-glibc2.29\r\nPython:        3.8.5 (default, Jan 27 2021, 15:41:15)  [GCC 9.3.0]\r\nExecutable:    /home/jan/dev/python/spot/spot_venv/bin/python\r\nCPU:           x86_64: 8 cores\r\nMemory:        Unavailable (requires \"psutil\" package)\r\nmne:           0.24.dev0\r\nnumpy:         1.19.5 {blas=openblas, lapack=openblas}\r\nscipy:         1.5.4\r\nmatplotlib:    3.3.4 {backend=module://backend_interagg}\r\n\r\nsklearn:       0.23.2\r\nnumba:         Not found\r\nnibabel:       3.2.1\r\nnilearn:       Not found\r\ndipy:          Not found\r\ncupy:          Not found\r\npandas:        1.1.5\r\nmayavi:        Not found\r\npyvista:       Not found\r\nvtk:           Not found\r\n```\r\n\r\n\r\nThe cause of the issue is that when the `tmax` argument for `crop` is out of range of the `Epoch`, it is set to `epo.tmax`. However, this behaviour is (at least for me) unintuitive when `include_tmax=False` as I do not want to cut off the last time sample, if my desired interval is larger than the epoch.\r\n\r\nPossible solution would be to set `tmax` to `tmax + 1/sfreq` when `include_tmax=True` and the desired tmax-crop is outside the epoch interval.\r\n", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/9374/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9374/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/9373", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9373/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9373/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9373/events", "html_url": "https://github.com/mne-tools/mne-python/issues/9373", "id": 876830316, "node_id": "MDU6SXNzdWU4NzY4MzAzMTY=", "number": 9373, "title": "Morphing STC is broken/ issue with STC plot", "user": {"login": "dasdiptyajit", "id": 43450258, "node_id": "MDQ6VXNlcjQzNDUwMjU4", "avatar_url": "https://avatars.githubusercontent.com/u/43450258?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dasdiptyajit", "html_url": "https://github.com/dasdiptyajit", "followers_url": "https://api.github.com/users/dasdiptyajit/followers", "following_url": "https://api.github.com/users/dasdiptyajit/following{/other_user}", "gists_url": "https://api.github.com/users/dasdiptyajit/gists{/gist_id}", "starred_url": "https://api.github.com/users/dasdiptyajit/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dasdiptyajit/subscriptions", "organizations_url": "https://api.github.com/users/dasdiptyajit/orgs", "repos_url": "https://api.github.com/users/dasdiptyajit/repos", "events_url": "https://api.github.com/users/dasdiptyajit/events{/privacy}", "received_events_url": "https://api.github.com/users/dasdiptyajit/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 7, "created_at": "2021-05-05T21:00:10Z", "updated_at": "2021-05-06T12:18:03Z", "closed_at": "2021-05-06T12:18:03Z", "author_association": "NONE", "active_lock_reason": null, "body": "#### Describe the bug\r\nIt seems like there is some sort of bug when I try to compute : compute_source_morph to morph individual subject to fsaverage \r\nand STC.plot is also causing some issues.\r\n\r\n\r\n#### Steps to reproduce (code)\r\n# source localization\r\n_**\r\ninv_fname = join(subjects_dir, id, int_name + inv_pattern)\r\ninv = read_inverse_operator(inv_fname)\r\nstc = apply_inverse(evoked, inv, lambda2=lambda2, method=method, pick_ori='normal')\r\nmorph = compute_source_morph(src=inv['src'], subject_from=id, subject_to='fsaverage',\r\n                             subjects_dir=subjects_dir, spacing=5)\r\nstc_fsaverage = morph.apply(stc)\r\nsurfer_kwargs = dict(hemi='both', subjects_dir=subjects_dir, time_unit='s',\r\n                     size=(800, 800), time_viewer=True)\r\nbrain = stc.plot(**surfer_kwargs)**_\r\n\r\n#### Expected results\r\nMorphing to fsaverage atlas \r\n\r\n#### Actual results\r\n\r\n**Error while morphing:**\r\n.\r\n.\r\n.\r\n[done]\r\nApplying inverse operator to \"dev\"...\r\n    Picked 184 channels from the data\r\n    Computing inverse...\r\n    Eigenleads need to be weighted ...\r\n    Computing residual...\r\n    Explained  59.5% variance\r\n    dSPM...\r\n[done]\r\nWriting STC to disk...\r\n[done]\r\n**Traceback (most recent call last):**\r\n\r\n  File \"/media/diptyajit/Ext_drive/Pycharm_Aud_Cog/P3_source_localizytion_script_global_main.py\", line 708, in <module>\r\n    source_localization(subject_ids=subject_ids, subjects_dir=subjects_dir, method=method,\r\n\r\n  File \"/media/diptyajit/Ext_drive/Pycharm_Aud_Cog/P3_source_localizytion_script_global_main.py\", line 183, in source_localization\r\n    morph = compute_source_morph(src=inv['src'], subject_from=id, subject_to='fsaverage',\r\n\r\n  File \"<decorator-gen-327>\", line 22, in compute_source_morph\r\n\r\n  File \"/home/diptyajit/anaconda3/envs/mne/lib/python3.9/site-packages/mne/morph.py\", line 248, in compute_source_morph\r\n    morph_mat = _compute_morph_matrix(\r\n\r\n  File \"/home/diptyajit/anaconda3/envs/mne/lib/python3.9/site-packages/mne/morph.py\", line 1112, in _compute_morph_matrix\r\n    morpher.append(_hemi_morph(\r\n\r\n  File \"/home/diptyajit/anaconda3/envs/mne/lib/python3.9/site-packages/mne/morph.py\", line 1149, in _hemi_morph\r\n    mm = _surf_upsampling_mat(vertices_from, e, smooth, warn=warn)\r\n\r\n  File \"/home/diptyajit/anaconda3/envs/mne/lib/python3.9/site-packages/mne/morph.py\", line 1287, in _surf_upsampling_mat\r\n    use_e = e[:, idx] if len(idx) < n_tot else e\r\n\r\n  File \"/home/diptyajit/anaconda3/envs/mne/lib/python3.9/site-packages/scipy/sparse/_index.py\", line 33, in __getitem__\r\n    row, col = self._validate_indices(key)\r\n\r\n  File \"/home/diptyajit/anaconda3/envs/mne/lib/python3.9/site-packages/scipy/sparse/_index.py\", line 147, in _validate_indices\r\n    col = self._asindices(col, N)\r\n\r\n  File \"/home/diptyajit/anaconda3/envs/mne/lib/python3.9/site-packages/scipy/sparse/_index.py\", line 170, in _asindices\r\n    raise IndexError('index (%d) out of range' % max_indx)\r\n\r\nIndexError: index (146475) out of range\r\n\r\n\r\n**Error while plot only Subject STC:**\r\nUsing pyvista 3d backend.\r\n\r\nUsing control points [ 7.33885576  9.56166922 26.24656785]\r\nTraceback (most recent call last):\r\n\r\n  File \"/media/diptyajit/Ext_drive/Pycharm_Aud_Cog/P3_source_localizytion_script_global_main.py\", line 708, in <module>\r\n    source_localization(subject_ids=subject_ids, subjects_dir=subjects_dir, method=method,\r\n\r\n  File \"/media/diptyajit/Ext_drive/Pycharm_Aud_Cog/P3_source_localizytion_script_global_main.py\", line 188, in source_localization\r\n    brain = stc.plot(**surfer_kwargs)\r\n\r\n  File \"/home/diptyajit/anaconda3/envs/mne/lib/python3.9/site-packages/mne/source_estimate.py\", line 651, in plot\r\n    brain = plot_source_estimates(\r\n\r\n  File \"<decorator-gen-153>\", line 24, in plot_source_estimates\r\n\r\n  File \"/home/diptyajit/anaconda3/envs/mne/lib/python3.9/site-packages/mne/viz/_3d.py\", line 1780, in plot_source_estimates\r\n    return _plot_stc(\r\n\r\n  File \"/home/diptyajit/anaconda3/envs/mne/lib/python3.9/site-packages/mne/viz/_3d.py\", line 1919, in _plot_stc\r\n    brain.add_data(**use_kwargs)\r\n\r\n  File \"<decorator-gen-173>\", line 22, in add_data\r\n\r\n  File \"/home/diptyajit/anaconda3/envs/mne/lib/python3.9/site-packages/mne/viz/_brain/_brain.py\", line 1952, in add_data\r\n    self.set_data_smoothing(self._data['smoothing_steps'])\r\n\r\n  File \"/home/diptyajit/anaconda3/envs/mne/lib/python3.9/site-packages/mne/viz/_brain/_brain.py\", line 2746, in set_data_smoothing\r\n    smooth_mat = _hemi_morph(\r\n\r\n  File \"/home/diptyajit/anaconda3/envs/mne/lib/python3.9/site-packages/mne/morph.py\", line 1149, in _hemi_morph\r\n    mm = _surf_upsampling_mat(vertices_from, e, smooth, warn=warn)\r\n\r\n  File \"/home/diptyajit/anaconda3/envs/mne/lib/python3.9/site-packages/mne/morph.py\", line 1287, in _surf_upsampling_mat\r\n    use_e = e[:, idx] if len(idx) < n_tot else e\r\n\r\n  File \"/home/diptyajit/anaconda3/envs/mne/lib/python3.9/site-packages/scipy/sparse/_index.py\", line 33, in __getitem__\r\n    row, col = self._validate_indices(key)\r\n\r\n  File \"/home/diptyajit/anaconda3/envs/mne/lib/python3.9/site-packages/scipy/sparse/_index.py\", line 147, in _validate_indices\r\n    col = self._asindices(col, N)\r\n\r\n  File \"/home/diptyajit/anaconda3/envs/mne/lib/python3.9/site-packages/scipy/sparse/_index.py\", line 170, in _asindices\r\n    raise IndexError('index (%d) out of range' % max_indx)\r\n\r\nIndexError: index (146475) out of range\r\n\r\n\r\n\r\n#### Additional information\r\n*`mne.sys_info()`.*\r\nPlatform:      Linux-4.15.0-132-generic-x86_64-with-glibc2.27\r\nPython:        3.9.2 | packaged by conda-forge | (default, Feb 21 2021, 05:02:46)  [GCC 9.3.0]\r\nExecutable:    /home/diptyajit/anaconda3/envs/mne/bin/python\r\nCPU:           x86_64: 4 cores\r\nMemory:        15.6 GB\r\n\r\nmne:           0.23.0\r\nnumpy:         1.20.2 {blas=NO_ATLAS_INFO, lapack=lapack}\r\nscipy:         1.6.3\r\nmatplotlib:    3.4.1 {backend=Qt5Agg}\r\n\r\nsklearn:       0.24.2\r\nnumba:         0.53.1\r\nnibabel:       3.2.1\r\nnilearn:       0.7.1\r\ndipy:          1.4.0\r\ncupy:          Not found\r\npandas:        1.2.4\r\nmayavi:        4.7.2\r\npyvista:       0.29.1 {pyvistaqt=0.3.0, OpenGL 3.3 (Core Profile) Mesa 19.2.8 via Mesa DRI Intel(R) HD Graphics 530 (Skylake GT2)}\r\nvtk:           9.0.1\r\nPyQt5:         5.12.3\r\n\r\n\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/9373/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9373/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/9370", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9370/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9370/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9370/events", "html_url": "https://github.com/mne-tools/mne-python/issues/9370", "id": 874391982, "node_id": "MDU6SXNzdWU4NzQzOTE5ODI=", "number": 9370, "title": "maxfiltered split files not handled correctly (mne-0.23)", "user": {"login": "RuKrei", "id": 45886980, "node_id": "MDQ6VXNlcjQ1ODg2OTgw", "avatar_url": "https://avatars.githubusercontent.com/u/45886980?v=4", "gravatar_id": "", "url": "https://api.github.com/users/RuKrei", "html_url": "https://github.com/RuKrei", "followers_url": "https://api.github.com/users/RuKrei/followers", "following_url": "https://api.github.com/users/RuKrei/following{/other_user}", "gists_url": "https://api.github.com/users/RuKrei/gists{/gist_id}", "starred_url": "https://api.github.com/users/RuKrei/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/RuKrei/subscriptions", "organizations_url": "https://api.github.com/users/RuKrei/orgs", "repos_url": "https://api.github.com/users/RuKrei/repos", "events_url": "https://api.github.com/users/RuKrei/events{/privacy}", "received_events_url": "https://api.github.com/users/RuKrei/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2021-05-03T09:16:44Z", "updated_at": "2021-05-11T10:34:59Z", "closed_at": "2021-05-11T10:34:58Z", "author_association": "NONE", "active_lock_reason": null, "body": "#### Describe the bug\r\nDear mne developers,\r\n\r\nas you all know, elekta (megin) fif files are automatically split, if file size exceeds 2GB.\r\nThis results in a second file with tag \"-1\".fif.\r\nMne handles this correctly.\r\n\r\nHowever, if files are processed with maxfilter (in my case tsss + head transposition), by default resulting files are renamed to  \r\n - filename + maxfilter-tags .fif\r\n\r\nIf a split-file is processed, renaming results in:\r\n - filename + \"-1\" + maxfilter-tags .fif\r\n-------------\r\n\r\n#### Now here is the bug:\r\nWhen loading maxfiltered split files, mne expects them to be named \r\n - file + maxfilter-tags + \"-1\".fif\r\n\r\ninstead of \r\n - file + \"-1\" + maxfilter-tags .fif\r\n\r\n#### Here is the error message:\r\nValueError: Split raw file detected but next file .../RS10021988_block2_trans_tsss-1.fif does not exist. Ensure all files were transferred properly and that split and original files were not manually renamed on disk (split files should be renamed by loading and re-saving with MNE-Python to preserve proper filename linkage).\r\n\r\n--> The name of the correct file would be RS10021998_block2-1_trans_tsss.fif\r\n\r\nThank you for fixing this.\r\n\r\nBest\r\nRudi K.\r\n\r\n\r\n#### Additional information\r\nPlatform:      Linux-5.8.0-50-generic-x86_64-with-glibc2.10\r\nPython:        3.8.5 (default, Aug  5 2020, 08:36:46)  [GCC 7.3.0]\r\nExecutable:    /home/idrael/anaconda3/envs/mne_023/bin/python\r\nCPU:           x86_64: 36 cores\r\nMemory:        125.5 GB\r\n\r\nmne:           0.23.0\r\nnumpy:         1.19.1 {blas=mkl_rt, lapack=mkl_rt}\r\nscipy:         1.5.0\r\nmatplotlib:    3.2.2 {backend=Qt5Agg}\r\n\r\nsklearn:       0.23.1\r\nnumba:         0.50.1\r\nnibabel:       3.1.1\r\nnilearn:       0.6.2\r\ndipy:          1.1.1\r\ncupy:          Not found\r\npandas:        1.1.0\r\nmayavi:        4.7.2.dev0\r\npyvista:       0.25.3 {pyvistaqt=0.1.1, OpenGL 3.3 (Core Profile) Mesa 20.0.8 via llvmpipe (LLVM 10.0.0, 256 bits)}\r\nvtk:           9.0.1\r\nPyQt5:         5.15.0", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/9370/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9370/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/9360", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9360/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9360/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9360/events", "html_url": "https://github.com/mne-tools/mne-python/issues/9360", "id": 870240110, "node_id": "MDU6SXNzdWU4NzAyNDAxMTA=", "number": 9360, "title": "Mayavi problems on MAC", "user": {"login": "bloyl", "id": 5585821, "node_id": "MDQ6VXNlcjU1ODU4MjE=", "avatar_url": "https://avatars.githubusercontent.com/u/5585821?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bloyl", "html_url": "https://github.com/bloyl", "followers_url": "https://api.github.com/users/bloyl/followers", "following_url": "https://api.github.com/users/bloyl/following{/other_user}", "gists_url": "https://api.github.com/users/bloyl/gists{/gist_id}", "starred_url": "https://api.github.com/users/bloyl/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bloyl/subscriptions", "organizations_url": "https://api.github.com/users/bloyl/orgs", "repos_url": "https://api.github.com/users/bloyl/repos", "events_url": "https://api.github.com/users/bloyl/events{/privacy}", "received_events_url": "https://api.github.com/users/bloyl/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/mne-tools/mne-python/milestones/20", "html_url": "https://github.com/mne-tools/mne-python/milestone/20", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/milestones/20/labels", "id": 6675015, "node_id": "MDk6TWlsZXN0b25lNjY3NTAxNQ==", "number": 20, "title": "0.24", "description": "", "creator": {"login": "larsoner", "id": 2365790, "node_id": "MDQ6VXNlcjIzNjU3OTA=", "avatar_url": "https://avatars.githubusercontent.com/u/2365790?v=4", "gravatar_id": "", "url": "https://api.github.com/users/larsoner", "html_url": "https://github.com/larsoner", "followers_url": "https://api.github.com/users/larsoner/followers", "following_url": "https://api.github.com/users/larsoner/following{/other_user}", "gists_url": "https://api.github.com/users/larsoner/gists{/gist_id}", "starred_url": "https://api.github.com/users/larsoner/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/larsoner/subscriptions", "organizations_url": "https://api.github.com/users/larsoner/orgs", "repos_url": "https://api.github.com/users/larsoner/repos", "events_url": "https://api.github.com/users/larsoner/events{/privacy}", "received_events_url": "https://api.github.com/users/larsoner/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 53, "state": "closed", "created_at": "2021-04-19T12:32:46Z", "updated_at": "2021-11-03T16:14:55Z", "due_on": "2021-11-01T07:00:00Z", "closed_at": "2021-11-03T16:14:55Z"}, "comments": 7, "created_at": "2021-04-28T18:41:24Z", "updated_at": "2021-04-30T11:38:29Z", "closed_at": "2021-04-30T11:38:29Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "I'm having problems with the macos and mayavi visulaization in mne 0.23 (but probably earlier versions as well).\r\n\r\n<details>\r\n<summary markdown=\"span\">MAC hardware</summary>\r\n\r\n  ``` \r\n  macOS Catalina \r\n  Version 10.15.7\r\n    Model Name:\tMacBook Pro\r\n    Model Identifier:\tMacBookPro15,2\r\n    Processor Name:\tQuad-Core Intel Core i7\r\n    Processor Speed:\t2.8 GHz\r\n\r\n   Intel Iris Plus Graphics 655:\r\n      Chipset Model:\tIntel Iris Plus Graphics 655\r\n      Type:\tGPU\r\n   ```\r\n</details>\r\n\r\nI created a fresh environment for mne 0.23\r\n\r\n<details>\r\n<summary markdown=\"span\">Make env</summary>\r\n\r\n```\r\n conda env remove -n mne-stable\r\n curl --remote-name https://raw.githubusercontent.com/mne-tools/mne-python/master/environment.yml\r\n conda env create -n mne-stable --file environment.yml\r\n conda activate mne-stable\r\n```\r\n</details>\r\n\r\n<details>\r\n<summary markdown=\"span\">mne sys_info</summary>\r\n\r\n```\r\n(mne-stable) bloyl@507b9dedf1fe ~ % mne sys_info\r\nPlatform:      macOS-10.15.7-x86_64-i386-64bit\r\nPython:        3.9.2 | packaged by conda-forge | (default, Feb 21 2021, 05:02:20)  [Clang 11.0.1 ]\r\nExecutable:    /Users/bloyl/anaconda3/envs/mne-stable/bin/python3.9\r\nCPU:           i386: 8 cores\r\nMemory:        16.0 GB\r\n\r\nmne:           0.23.0\r\nnumpy:         1.20.2 {blas=NO_ATLAS_INFO, lapack=lapack}\r\nscipy:         1.6.3\r\nmatplotlib:    3.4.1 {backend=MacOSX}\r\n\r\nsklearn:       0.24.1\r\nnumba:         0.53.1\r\nnibabel:       3.2.1\r\nnilearn:       0.7.1\r\ndipy:          1.4.0\r\ncupy:          Not found\r\npandas:        1.2.4\r\nmayavi:        4.7.2\r\npyvista:       0.29.1 {pyvistaqt=0.3.0, OpenGL 4.1 INTEL-14.7.8 via Intel(R) Iris(TM) Plus Graphics 655}\r\nvtk:           9.0.1\r\nPyQt5:         5.12.3\r\n```\r\n</details>\r\n\r\nThe pyvista backend seems to work, however the mayavi backend just shows grey background plots.\r\n\r\n### To reproduce:\r\n```\r\n(mne-stable) bloyl@507b9dedf1fe ~ % export MNE_3D_BACKEND=mayavi; ipython\r\nPython 3.9.2 | packaged by conda-forge | (default, Feb 21 2021, 05:02:20)\r\nType 'copyright', 'credits' or 'license' for more information\r\nIPython 7.22.0 -- An enhanced Interactive Python. Type '?' for help.\r\n\r\nIn [1]: import mne\r\n   ...: from mne.viz import plot_alignment, set_3d_view\r\n   ...:\r\n   ...: print(__doc__)\r\n   ...:\r\n   ...: data_path = mne.datasets.sample.data_path()\r\n   ...: subjects_dir = data_path + '/subjects'\r\n   ...: trans = mne.read_trans(data_path + '/MEG/sample/sample_audvis_raw-trans.fif')\r\n   ...: raw = mne.io.read_raw_fif(data_path + '/MEG/sample/sample_audvis_raw.fif')\r\n   ...: # Plot electrode locations on scalp\r\n   ...: fig = plot_alignment(raw.info, trans, subject='sample', dig=False,\r\n   ...:                      eeg=['original', 'projected'], meg=[],\r\n   ...:                      coord_frame='head', subjects_dir=subjects_dir)\r\n   ...: # Set viewing angle\r\n   ...: set_3d_view(figure=fig, azimuth=135, elevation=80)\r\nAutomatically created module for IPython interactive environment\r\nOpening raw data file /Users/bloyl/mne_data/MNE-sample-data/MEG/sample/sample_audvis_raw.fif...\r\n    Read a total of 3 projection items:\r\n        PCA-v1 (1 x 102)  idle\r\n        PCA-v2 (1 x 102)  idle\r\n        PCA-v3 (1 x 102)  idle\r\n    Range : 25800 ... 192599 =     42.956 ...   320.670 secs\r\nReady.\r\nUsing outer_skin.surf for head surface.\r\nUsing mayavi 3d backend.\r\n\r\nqt.qpa.drawing: Layer-backing can not be explicitly controlled on 10.14 when built against the 10.14 SDK\r\n\r\nIn [2]:\r\n```\r\n\r\nit will generate a grey window ('TVTK Scene') with no mayavi control bar. I don't think the QT warning is the issue as it also displays with the pyvista backend.\r\n\r\nInterestingly if I press `cntl-d` to quit ipython. the figure shows up while ipython asks `Do you really want to exit ([y]/n)?`\r\nIf I press no, the plot remains but the window is non-responsive.\r\n\r\nI should note that mayavi plotting functions (https://docs.enthought.com/mayavi/mayavi/auto/mlab_helper_functions.html#mayavi.mlab.contour3d) seem to work fine.\r\n\r\nThe reason this is an issue is that `mne coreg` is still mayavi based and displays the same problem.", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/9360/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9360/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/9354", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9354/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9354/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9354/events", "html_url": "https://github.com/mne-tools/mne-python/issues/9354", "id": 868873904, "node_id": "MDU6SXNzdWU4Njg4NzM5MDQ=", "number": 9354, "title": "BUG: Forward code should raise an error if sensors are inside BEM", "user": {"login": "jjnurminen", "id": 8491321, "node_id": "MDQ6VXNlcjg0OTEzMjE=", "avatar_url": "https://avatars.githubusercontent.com/u/8491321?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jjnurminen", "html_url": "https://github.com/jjnurminen", "followers_url": "https://api.github.com/users/jjnurminen/followers", "following_url": "https://api.github.com/users/jjnurminen/following{/other_user}", "gists_url": "https://api.github.com/users/jjnurminen/gists{/gist_id}", "starred_url": "https://api.github.com/users/jjnurminen/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jjnurminen/subscriptions", "organizations_url": "https://api.github.com/users/jjnurminen/orgs", "repos_url": "https://api.github.com/users/jjnurminen/repos", "events_url": "https://api.github.com/users/jjnurminen/events{/privacy}", "received_events_url": "https://api.github.com/users/jjnurminen/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "larsoner", "id": 2365790, "node_id": "MDQ6VXNlcjIzNjU3OTA=", "avatar_url": "https://avatars.githubusercontent.com/u/2365790?v=4", "gravatar_id": "", "url": "https://api.github.com/users/larsoner", "html_url": "https://github.com/larsoner", "followers_url": "https://api.github.com/users/larsoner/followers", "following_url": "https://api.github.com/users/larsoner/following{/other_user}", "gists_url": "https://api.github.com/users/larsoner/gists{/gist_id}", "starred_url": "https://api.github.com/users/larsoner/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/larsoner/subscriptions", "organizations_url": "https://api.github.com/users/larsoner/orgs", "repos_url": "https://api.github.com/users/larsoner/repos", "events_url": "https://api.github.com/users/larsoner/events{/privacy}", "received_events_url": "https://api.github.com/users/larsoner/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "larsoner", "id": 2365790, "node_id": "MDQ6VXNlcjIzNjU3OTA=", "avatar_url": "https://avatars.githubusercontent.com/u/2365790?v=4", "gravatar_id": "", "url": "https://api.github.com/users/larsoner", "html_url": "https://github.com/larsoner", "followers_url": "https://api.github.com/users/larsoner/followers", "following_url": "https://api.github.com/users/larsoner/following{/other_user}", "gists_url": "https://api.github.com/users/larsoner/gists{/gist_id}", "starred_url": "https://api.github.com/users/larsoner/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/larsoner/subscriptions", "organizations_url": "https://api.github.com/users/larsoner/orgs", "repos_url": "https://api.github.com/users/larsoner/repos", "events_url": "https://api.github.com/users/larsoner/events{/privacy}", "received_events_url": "https://api.github.com/users/larsoner/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/mne-tools/mne-python/milestones/20", "html_url": "https://github.com/mne-tools/mne-python/milestone/20", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/milestones/20/labels", "id": 6675015, "node_id": "MDk6TWlsZXN0b25lNjY3NTAxNQ==", "number": 20, "title": "0.24", "description": "", "creator": {"login": "larsoner", "id": 2365790, "node_id": "MDQ6VXNlcjIzNjU3OTA=", "avatar_url": "https://avatars.githubusercontent.com/u/2365790?v=4", "gravatar_id": "", "url": "https://api.github.com/users/larsoner", "html_url": "https://github.com/larsoner", "followers_url": "https://api.github.com/users/larsoner/followers", "following_url": "https://api.github.com/users/larsoner/following{/other_user}", "gists_url": "https://api.github.com/users/larsoner/gists{/gist_id}", "starred_url": "https://api.github.com/users/larsoner/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/larsoner/subscriptions", "organizations_url": "https://api.github.com/users/larsoner/orgs", "repos_url": "https://api.github.com/users/larsoner/repos", "events_url": "https://api.github.com/users/larsoner/events{/privacy}", "received_events_url": "https://api.github.com/users/larsoner/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 53, "state": "closed", "created_at": "2021-04-19T12:32:46Z", "updated_at": "2021-11-03T16:14:55Z", "due_on": "2021-11-01T07:00:00Z", "closed_at": "2021-11-03T16:14:55Z"}, "comments": 11, "created_at": "2021-04-27T13:55:00Z", "updated_at": "2021-10-22T21:10:16Z", "closed_at": "2021-10-22T21:10:16Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Hi,\r\n\r\nI get strange BEM results with `sample` using the precomputed BEM. These manifest as erroneous/unexpected field values, mostly in regions below the brain. The problems seem to go away if I recreate the BEM in mne-python.\r\n\r\nTo demonstrate, I created an array of 1000 pointlike magnetometers uniformly spread around the brain:\r\n\r\n![snapshot](https://user-images.githubusercontent.com/8491321/116250994-e97a0680-a776-11eb-84d5-21ed84dd5c1a.png)\r\n\r\nI then computed the forward fields (for one particular source; doesn't really matter which one) using the precomputed BEM and a freshly created one:\r\n\r\n![Figure_1](https://user-images.githubusercontent.com/8491321/116251785-aa988080-a777-11eb-892a-7cd5c4bc9c1c.png)\r\n\r\nNote that the sensor index increases with decreasing z coordinate. It looks like the precomputed BEM starts to increasingly deviate from the newly created one as we go lower in the coordinate system. In addition to this, the values of precomputed BEM for some sensors are really strange (the spikes in the plot).\r\n\r\nThe results from a spherical model, as well as the mne-python freshly created BEM, look fine.\r\n\r\nTo recreate, please download this sensor description for the spherical array and unzip it:\r\n[pointlike.zip](https://github.com/mne-tools/mne-python/files/6385035/pointlike.zip)\r\n\r\nThen run the code below:\r\n\r\n```\r\nimport mne\r\nimport pathlib\r\nimport matplotlib.pyplot as plt\r\nimport pickle\r\n\r\ndata_path = pathlib.Path(mne.datasets.sample.data_path())\r\nsubjects_dir = data_path / 'subjects'\r\nsubject = 'sample'\r\nhead_mri_trans_file = data_path / 'MEG/sample/sample_audvis_raw-trans.fif'\r\nbem_file = subjects_dir / 'sample/bem/sample-5120-5120-5120-bem-sol.fif'\r\nraw_file = data_path / 'MEG/sample/sample_audvis_raw.fif'\r\ninfo = mne.io.read_info(raw_file)\r\n\r\n# replace 'info' with a custom one to get pointlike sensors\r\nalt_array_name = 'pointlike.dat'\r\nwith open(alt_array_name, 'rb') as f:\r\n    info = pickle.load(f)\r\n\r\n# source space\r\nsrc_cort = mne.setup_source_space(\r\n    subject, spacing='oct6', subjects_dir=subjects_dir, add_dist=False\r\n)\r\n\r\n# precomputed BEM\r\nfwd_bem_precomp = mne.make_forward_solution(\r\n    info,\r\n    head_mri_trans_file,\r\n    src_cort,\r\n    str(bem_file),\r\n    eeg=False,\r\n)\r\nlead_bem_precomp = fwd_bem_precomp['sol']['data']\r\n\r\n# recompute BEM\r\nmodel = mne.make_bem_model(\r\n    subject=subject, ico=4, conductivity=[0.3], subjects_dir=subjects_dir\r\n)\r\nbem = mne.make_bem_solution(model)\r\n\r\nfwd_bem = mne.make_forward_solution(\r\n    info,\r\n    head_mri_trans_file,\r\n    src_cort,\r\n    bem,\r\n    eeg=False,\r\n)\r\nlead_bem = fwd_bem['sol']['data']\r\n\r\nsphere = mne.make_sphere_model(head_radius=None)\r\nfwd_sph = mne.make_forward_solution(\r\n    info,\r\n    head_mri_trans_file,\r\n    src_cort,\r\n    sphere,\r\n    eeg=False,\r\n)\r\nlead_sph = fwd_sph['sol']['data']\r\n\r\n# plot\r\nsrc_ind = 3000  # some random source\r\nplt.figure()\r\n# plt.plot(lead_sph[:, src_ind], label='sphere model forward')\r\nplt.plot(lead_bem[:, src_ind], label='BEM model')\r\n# plt.plot(lead_bem_precomp[:, src_ind], label='BEM model, precomputed')\r\nplt.plot(\r\n    abs(lead_bem[:, src_ind] - lead_bem_precomp[:, src_ind]),\r\n    label='Precomputed vs fresh BEM, absolute difference',\r\n)\r\nplt.ylim([-0.5e-5, 0.5e-5])\r\nplt.legend()\r\nplt.xlabel('Sensor index')\r\nplt.ylabel('Field amplitude')\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/9354/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9354/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/9350", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9350/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9350/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9350/events", "html_url": "https://github.com/mne-tools/mne-python/issues/9350", "id": 867699957, "node_id": "MDU6SXNzdWU4Njc2OTk5NTc=", "number": 9350, "title": "`mne.time_frequency.multitaper` Nyquist adjustment slightly incorrect", "user": {"login": "ericphanson", "id": 5846501, "node_id": "MDQ6VXNlcjU4NDY1MDE=", "avatar_url": "https://avatars.githubusercontent.com/u/5846501?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ericphanson", "html_url": "https://github.com/ericphanson", "followers_url": "https://api.github.com/users/ericphanson/followers", "following_url": "https://api.github.com/users/ericphanson/following{/other_user}", "gists_url": "https://api.github.com/users/ericphanson/gists{/gist_id}", "starred_url": "https://api.github.com/users/ericphanson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ericphanson/subscriptions", "organizations_url": "https://api.github.com/users/ericphanson/orgs", "repos_url": "https://api.github.com/users/ericphanson/repos", "events_url": "https://api.github.com/users/ericphanson/events{/privacy}", "received_events_url": "https://api.github.com/users/ericphanson/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}, {"id": 4145355453, "node_id": "LA_kwDOABPcUM73FRq9", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/sprint-2022", "name": "sprint-2022", "color": "2C7B79", "default": false, "description": "Issues reserved for the 2022 New Developers Code Sprint"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2021-04-26T13:22:57Z", "updated_at": "2022-08-23T09:14:48Z", "closed_at": "2022-08-23T09:14:48Z", "author_association": "NONE", "active_lock_reason": null, "body": "In https://github.com/mne-tools/mne-python/blob/c6b22e82b64da0ed0f52a5f28bd4711e47090f9e/mne/time_frequency/multitaper.py#L322\r\n\r\nthere\u2019s an adjustment of the Nyquist frequency component if the length of the signal input is even. I think the condition should instead be if `n_fft` is even. I think the reasoning is the same as in https://www.mathworks.com/matlabcentral/answers/102727-why-does-the-example-in-fft-divide-the-fft-result-by-the-length-of-the-signal-and-multiply-the-magni#answer_112072.\r\n\r\nOriginally mentioned in https://mne.discourse.group/t/understanding-mne-time-frequency-csd-multitaper-implementation", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/9350/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9350/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/9339", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9339/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9339/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9339/events", "html_url": "https://github.com/mne-tools/mne-python/issues/9339", "id": 865921706, "node_id": "MDU6SXNzdWU4NjU5MjE3MDY=", "number": 9339, "title": "raw.plot raises KeyError with event_colors", "user": {"login": "cbrnr", "id": 4377312, "node_id": "MDQ6VXNlcjQzNzczMTI=", "avatar_url": "https://avatars.githubusercontent.com/u/4377312?v=4", "gravatar_id": "", "url": "https://api.github.com/users/cbrnr", "html_url": "https://github.com/cbrnr", "followers_url": "https://api.github.com/users/cbrnr/followers", "following_url": "https://api.github.com/users/cbrnr/following{/other_user}", "gists_url": "https://api.github.com/users/cbrnr/gists{/gist_id}", "starred_url": "https://api.github.com/users/cbrnr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/cbrnr/subscriptions", "organizations_url": "https://api.github.com/users/cbrnr/orgs", "repos_url": "https://api.github.com/users/cbrnr/repos", "events_url": "https://api.github.com/users/cbrnr/events{/privacy}", "received_events_url": "https://api.github.com/users/cbrnr/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2021-04-23T09:18:28Z", "updated_at": "2021-04-27T05:40:39Z", "closed_at": "2021-04-26T15:47:26Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Some code I wrote a while ago suddenly started to throw a `KeyError`:\r\n\r\n```python\r\nimport numpy as np\r\nimport mne\r\n\r\n\r\nfs = 512\r\nraw = mne.io.RawArray(np.random.randn(10, 10 * fs) * 1e-6, mne.create_info(10, fs, \"eeg\"))\r\nevents = np.array([[1 * fs, 0, 1], [2 * fs, 0, 2], [3 * fs, 0, 3]])\r\n\r\nraw.plot(events=events, event_color={1: \"red\", 2: \"blue\"})\r\n```\r\n\r\n@drammock do you know if this behavior changed? Should we assume a default color for events that are not specified in the `event_color` dict?", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/9339/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9339/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/9336", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9336/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9336/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9336/events", "html_url": "https://github.com/mne-tools/mne-python/issues/9336", "id": 865109434, "node_id": "MDU6SXNzdWU4NjUxMDk0MzQ=", "number": 9336, "title": "brain.screenshot(time_viewer=True) crash", "user": {"login": "crsegerie", "id": 38733898, "node_id": "MDQ6VXNlcjM4NzMzODk4", "avatar_url": "https://avatars.githubusercontent.com/u/38733898?v=4", "gravatar_id": "", "url": "https://api.github.com/users/crsegerie", "html_url": "https://github.com/crsegerie", "followers_url": "https://api.github.com/users/crsegerie/followers", "following_url": "https://api.github.com/users/crsegerie/following{/other_user}", "gists_url": "https://api.github.com/users/crsegerie/gists{/gist_id}", "starred_url": "https://api.github.com/users/crsegerie/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/crsegerie/subscriptions", "organizations_url": "https://api.github.com/users/crsegerie/orgs", "repos_url": "https://api.github.com/users/crsegerie/repos", "events_url": "https://api.github.com/users/crsegerie/events{/privacy}", "received_events_url": "https://api.github.com/users/crsegerie/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}, {"id": 1290799321, "node_id": "MDU6TGFiZWwxMjkwNzk5MzIx", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/VIZ", "name": "VIZ", "color": "22e861", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/mne-tools/mne-python/milestones/19", "html_url": "https://github.com/mne-tools/mne-python/milestone/19", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/milestones/19/labels", "id": 6168664, "node_id": "MDk6TWlsZXN0b25lNjE2ODY2NA==", "number": 19, "title": "0.23", "description": "", "creator": {"login": "larsoner", "id": 2365790, "node_id": "MDQ6VXNlcjIzNjU3OTA=", "avatar_url": "https://avatars.githubusercontent.com/u/2365790?v=4", "gravatar_id": "", "url": "https://api.github.com/users/larsoner", "html_url": "https://github.com/larsoner", "followers_url": "https://api.github.com/users/larsoner/followers", "following_url": "https://api.github.com/users/larsoner/following{/other_user}", "gists_url": "https://api.github.com/users/larsoner/gists{/gist_id}", "starred_url": "https://api.github.com/users/larsoner/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/larsoner/subscriptions", "organizations_url": "https://api.github.com/users/larsoner/orgs", "repos_url": "https://api.github.com/users/larsoner/repos", "events_url": "https://api.github.com/users/larsoner/events{/privacy}", "received_events_url": "https://api.github.com/users/larsoner/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 58, "state": "closed", "created_at": "2020-12-01T18:47:16Z", "updated_at": "2021-04-27T19:32:01Z", "due_on": "2021-05-15T07:00:00Z", "closed_at": "2021-04-27T19:32:01Z"}, "comments": 27, "created_at": "2021-04-22T15:52:55Z", "updated_at": "2021-04-27T13:40:19Z", "closed_at": "2021-04-27T13:40:19Z", "author_association": "NONE", "active_lock_reason": null, "body": "I was running the mne-bids-pipeline (so with mne-23dev cloned from GitHub in backend), but a bug appeared just after the creation of the reports of the first subject. After investigation, it turns out that the bug comes from MNE, from the option time_viewer=True in the screenshot method. By setting it to false, the image plots nicely.\r\n\r\n\r\nI tried to make a reproducible example with sample data, but this does not reproduce the issue (Else). So I've also included here the (IF True) my [stc file](https://drive.google.com/file/d/1rcaBOMTbLnmyWqvUn9dRy4G3V5PEJehY/view?usp=sharing) and my [subjects file](https://drive.google.com/drive/folders/13TeY0L88dsag6AD3VfYj7GTOFqS_He_k?usp=sharing) which isolate the code on my computer.\r\n```python\r\nfrom pathlib import Path\r\nimport matplotlib\r\nimport matplotlib.pyplot as plt\r\nimport mne\r\nfrom mne.datasets import sample\r\nmatplotlib.use('Qt5Agg')\r\n\r\nif True:\r\n    stc_fname = Path(\"mne_data/ds003392/derivatives\",\r\n                     'mne-bids-pipeline/sub-01/meg/',\r\n                     'sub-01_task-localizer_coherent+dSPM+hemi-lh.stc')\r\n\r\n    subjects_dir = Path(\"mne_data/ds003392/derivatives/freesurfer\",\r\n                        'subjects')\r\n    subject = 'sub-01'\r\n    stc = mne.read_source_estimate(stc_fname, subject=subject)\r\nelse:\r\n    data_path = sample.data_path()\r\n    fname = data_path + '/MEG/sample/sample_audvis-meg'\r\n\r\n    stc = mne.read_source_estimate(fname)\r\n    subject = \"sample\"\r\n    subjects_dir = Path(\"C:/Users/charb/mne_data/MNE-sample-data/subjects\")\r\nbrain = stc.plot(subject=subject, subjects_dir=subjects_dir,\r\n                 initial_time=0.13, views=['lat'], hemi='split')\r\nbrain.toggle_interface()\r\nbrain._renderer.plotter.reset_camera()\r\nbrain._renderer.plotter.subplot(0, 0)\r\nbrain._renderer.plotter.reset_camera()\r\nfigs, ax = plt.subplots(figsize=(15, 10))\r\n\r\n# BUG : Set time_viewer to False to remove the Bug\r\nimage = brain.screenshot(time_viewer=True)\r\nax.imshow(image)\r\nax.axis('off')\r\nplt.show()\r\n\r\n```\r\n\r\n#### Expected results\r\nAn interactive plot.\r\n\r\n\r\n#### Actual results\r\nWhen I run the code, the figure appears one second and then crashes\r\n\r\n```\r\n(mne_dev) C:\\Users\\charb\\Desktop\\parietal>C:/Users/charb/anaconda3/envs/mne_dev/python.exe c:/Users/charb/Desktop/parietal/test.py\r\nUsing pyvista 3d backend.\r\n\r\nUsing control points [13.01218636 16.52222281 48.36637508]\r\nTraceback (most recent call last):\r\n  File \"c:\\Users\\charb\\Desktop\\parietal\\test.py\", line 51, in <module>\r\n    image = brain.screenshot(time_viewer=True)\r\n  File \"C:\\Users\\charb\\anaconda3\\envs\\mne_dev\\lib\\site-packages\\mne\\viz\\_brain\\_brain.py\", line 2631, in screenshot\r\n    trace_img = np.reshape(\r\n  File \"<__array_function__ internals>\", line 5, in reshape\r\n  File \"C:\\Users\\charb\\anaconda3\\envs\\mne_dev\\lib\\site-packages\\numpy\\core\\fromnumeric.py\", line 299, in reshape\r\n    return _wrapfunc(a, 'reshape', newshape, order=order)\r\n  File \"C:\\Users\\charb\\anaconda3\\envs\\mne_dev\\lib\\site-packages\\numpy\\core\\fromnumeric.py\", line 58, in _wrapfunc\r\n    return bound(*args, **kwds)\r\nValueError: cannot reshape array of size 1082952 into shape (1015,4)\r\n\r\n(mne_dev) C:\\Users\\charb\\Desktop\\parietal>    \r\n\r\n```\r\n#### Additional information\r\nI'm working on Windows.\r\n\r\n```\r\n(mne_dev) C:\\Users\\charb\\Desktop\\parietal\\mne-bids-pipeline>python\r\nPython 3.9.2 | packaged by conda-forge | (default, Feb 21 2021, 04:59:43) [MSC v.1916 64 bit (AMD64)] on win32\r\nType \"help\", \"copyright\", \"credits\" or \"license\" for more information.\r\n>>> import mne; mne.sys_info()\r\nPlatform:      Windows-10-10.0.19041-SP0\r\nPython:        3.9.2 | packaged by conda-forge | (default, Feb 21 2021, 04:59:43) [MSC v.1916 64 bit (AMD64)]\r\nExecutable:    C:\\Users\\charb\\anaconda3\\envs\\mne_dev\\python.exe\r\nCPU:           Intel64 Family 6 Model 158 Stepping 10, GenuineIntel: 8 cores\r\nMemory:        7.9 GB\r\n\r\nmne:           0.23.dev0\r\nnumpy:         1.20.2 {blas=NO_ATLAS_INFO, lapack=lapack}\r\nscipy:         1.6.2\r\nmatplotlib:    3.4.1 {backend=Qt5Agg}\r\n\r\nsklearn:       0.24.1\r\nnumba:         0.53.1\r\nnibabel:       3.2.1\r\nnilearn:       0.7.1\r\ndipy:          1.4.0\r\ncupy:          Not found\r\npandas:        1.2.4\r\nmayavi:        4.7.2\r\npyvista:       0.29.1 {pyvistaqt=0.3.0, OpenGL 4.5.0 - Build 26.20.100.6911 via Intel(R) UHD Graphics 630}\r\nvtk:           9.0.1\r\nPyQt5:         5.12.3\r\n>>>\r\n```\r\n\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/9336/reactions", "total_count": 1, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 1, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9336/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/9322", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9322/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9322/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9322/events", "html_url": "https://github.com/mne-tools/mne-python/issues/9322", "id": 862552561, "node_id": "MDU6SXNzdWU4NjI1NTI1NjE=", "number": 9322, "title": "TFRaverage.plot() only plots the data from the first channel when 'picks=' is a sensor type or a list of sensors. ", "user": {"login": "AaronAngJW", "id": 16894133, "node_id": "MDQ6VXNlcjE2ODk0MTMz", "avatar_url": "https://avatars.githubusercontent.com/u/16894133?v=4", "gravatar_id": "", "url": "https://api.github.com/users/AaronAngJW", "html_url": "https://github.com/AaronAngJW", "followers_url": "https://api.github.com/users/AaronAngJW/followers", "following_url": "https://api.github.com/users/AaronAngJW/following{/other_user}", "gists_url": "https://api.github.com/users/AaronAngJW/gists{/gist_id}", "starred_url": "https://api.github.com/users/AaronAngJW/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/AaronAngJW/subscriptions", "organizations_url": "https://api.github.com/users/AaronAngJW/orgs", "repos_url": "https://api.github.com/users/AaronAngJW/repos", "events_url": "https://api.github.com/users/AaronAngJW/events{/privacy}", "received_events_url": "https://api.github.com/users/AaronAngJW/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2021-04-20T08:17:33Z", "updated_at": "2021-04-20T14:14:15Z", "closed_at": "2021-04-20T14:14:15Z", "author_association": "NONE", "active_lock_reason": null, "body": "#### Describe the bug\r\nAs with the title, `TFRaverage.plot()` does not plot the averaged activity across all sensors when multiple sensors were selected. Instead, it plots the activity of only the sensor with the smallest ID/number provided in `'picks='`\r\n\r\n\r\n#### Steps to reproduce\r\nPlease refer to the follow discussion on https://mne.discourse.group/t/plotting-of-mne-combine-evoked-output-based-on-averagetfr-input-mutiple-channels-only-shows-tfr-output-of-the-first-channel/3008/8\r\n\r\n#### Expected results\r\nFor my analysis, I was hoping to attain just one plot of the averaged TFR output off a list of selected sensors. (eg. activity across all sensors selected would be averaged into one time-frequency plot.)\r\n\r\n#### Additional information\r\nCurrently, this does not work with mne version 0.22.0. Furthermore, I tested out the 0.23.dev0 version as well and the issue is still present.\r\n\r\nPlatform:      Windows-10-10.0.18362-SP0\r\nPython:        3.8.3 (default, Jul  2 2020, 17:30:36) [MSC v.1916 64 bit (AMD64)]\r\nExecutable:    C:\\Users\\angjw\\anaconda3\\envs\\mne\\python.exe\r\nCPU:           Intel64 Family 6 Model 142 Stepping 12, GenuineIntel: 8 cores\r\nMemory:        7.8 GB\r\n\r\nmne:           0.23.dev0\r\nnumpy:         1.19.1 {blas=mkl_rt, lapack=mkl_rt}\r\nscipy:         1.5.0\r\nmatplotlib:    3.2.2 {backend=Qt5Agg}\r\n\r\nsklearn:       0.23.1\r\nnumba:         0.50.1\r\nnibabel:       3.1.1\r\nnilearn:       0.6.2\r\ndipy:          1.1.1\r\ncupy:          Not found\r\npandas:        1.0.5\r\nmayavi:        4.7.2.dev0\r\npyvista:       0.25.3 {pyvistaqt=0.1.1, OpenGL 4.5.0 NVIDIA 457.63 via GeForce MX250/PCIe/SSE2}\r\nvtk:           9.0.1\r\nPyQt5:         5.11.2\r\n", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/9322/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9322/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/9308", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9308/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9308/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9308/events", "html_url": "https://github.com/mne-tools/mne-python/issues/9308", "id": 859965397, "node_id": "MDU6SXNzdWU4NTk5NjUzOTc=", "number": 9308, "title": "SNIRF loader not working without the optional sourcePos3D", "user": {"login": "HanBnrd", "id": 32393169, "node_id": "MDQ6VXNlcjMyMzkzMTY5", "avatar_url": "https://avatars.githubusercontent.com/u/32393169?v=4", "gravatar_id": "", "url": "https://api.github.com/users/HanBnrd", "html_url": "https://github.com/HanBnrd", "followers_url": "https://api.github.com/users/HanBnrd/followers", "following_url": "https://api.github.com/users/HanBnrd/following{/other_user}", "gists_url": "https://api.github.com/users/HanBnrd/gists{/gist_id}", "starred_url": "https://api.github.com/users/HanBnrd/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/HanBnrd/subscriptions", "organizations_url": "https://api.github.com/users/HanBnrd/orgs", "repos_url": "https://api.github.com/users/HanBnrd/repos", "events_url": "https://api.github.com/users/HanBnrd/events{/privacy}", "received_events_url": "https://api.github.com/users/HanBnrd/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 26, "created_at": "2021-04-16T16:18:41Z", "updated_at": "2021-04-26T19:58:49Z", "closed_at": "2021-04-26T13:56:51Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "#### Describe the bug\r\nThe function [*read_raw_snirf*](https://mne.tools/dev/generated/mne.io.read_raw_snirf.html#mne.io.read_raw_snirf) is not working if the [optional](https://github.com/fNIRS/snirf/issues/41#issuecomment-620159229) field [sourcePos3D](https://github.com/fNIRS/snirf/blob/master/snirf_specification.md#nirsiprobesourcepos3d) does not exist in the SNIRF file.\r\n\r\n\r\n#### Steps to reproduce\r\nGiven a *nback.snirf* SNIRF file with only sourcePos2D and no sourcePos3D:\r\n```python\r\nfrom mne.io import read_raw_snirf\r\n\r\nsnirf_intensity = read_raw_snirf('nback.snirf')\r\n```\r\n\r\n\r\n#### Expected results\r\n```\r\nLoading nback.snirf\r\n```\r\n\r\n\r\n#### Actual results\r\n```\r\nLoading nback.snirf\r\nTraceback (most recent call last):\r\n  File \"...\\snirf.py\", line 3, in <module>\r\n    snirf_intensity = read_raw_snirf('nback.snirf')\r\n  File \"...\\mne-python\\mne\\io\\snirf\\_snirf.py\", line 43, in read_raw_snirf\r\n    return RawSNIRF(fname, preload, verbose)\r\n  File \"<decorator-gen-248>\", line 24, in __init__\r\n  File \"...\\mne-python\\mne\\io\\snirf\\_snirf.py\", line 119, in __init__\r\n    assert len(sources) == srcPos3D.shape[0]\r\nIndexError: tuple index out of range\r\n```\r\n\r\n\r\n#### Additional information\r\nThis may be complex to solve as the [*beer_lambert_law* function](https://github.com/mne-tools/mne-python/blob/main/mne/preprocessing/nirs/_beer_lambert_law.py#L18-L61) requires the 3D positions of optodes.", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/9308/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9308/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/9306", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9306/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9306/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9306/events", "html_url": "https://github.com/mne-tools/mne-python/issues/9306", "id": 859895058, "node_id": "MDU6SXNzdWU4NTk4OTUwNTg=", "number": 9306, "title": "BUG: flat map with \"both\" on top of one another", "user": {"login": "kingjr", "id": 4881164, "node_id": "MDQ6VXNlcjQ4ODExNjQ=", "avatar_url": "https://avatars.githubusercontent.com/u/4881164?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kingjr", "html_url": "https://github.com/kingjr", "followers_url": "https://api.github.com/users/kingjr/followers", "following_url": "https://api.github.com/users/kingjr/following{/other_user}", "gists_url": "https://api.github.com/users/kingjr/gists{/gist_id}", "starred_url": "https://api.github.com/users/kingjr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kingjr/subscriptions", "organizations_url": "https://api.github.com/users/kingjr/orgs", "repos_url": "https://api.github.com/users/kingjr/repos", "events_url": "https://api.github.com/users/kingjr/events{/privacy}", "received_events_url": "https://api.github.com/users/kingjr/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/mne-tools/mne-python/milestones/19", "html_url": "https://github.com/mne-tools/mne-python/milestone/19", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/milestones/19/labels", "id": 6168664, "node_id": "MDk6TWlsZXN0b25lNjE2ODY2NA==", "number": 19, "title": "0.23", "description": "", "creator": {"login": "larsoner", "id": 2365790, "node_id": "MDQ6VXNlcjIzNjU3OTA=", "avatar_url": "https://avatars.githubusercontent.com/u/2365790?v=4", "gravatar_id": "", "url": "https://api.github.com/users/larsoner", "html_url": "https://github.com/larsoner", "followers_url": "https://api.github.com/users/larsoner/followers", "following_url": "https://api.github.com/users/larsoner/following{/other_user}", "gists_url": "https://api.github.com/users/larsoner/gists{/gist_id}", "starred_url": "https://api.github.com/users/larsoner/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/larsoner/subscriptions", "organizations_url": "https://api.github.com/users/larsoner/orgs", "repos_url": "https://api.github.com/users/larsoner/repos", "events_url": "https://api.github.com/users/larsoner/events{/privacy}", "received_events_url": "https://api.github.com/users/larsoner/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 58, "state": "closed", "created_at": "2020-12-01T18:47:16Z", "updated_at": "2021-04-27T19:32:01Z", "due_on": "2021-05-15T07:00:00Z", "closed_at": "2021-04-27T19:32:01Z"}, "comments": 7, "created_at": "2021-04-16T15:01:08Z", "updated_at": "2021-04-19T22:07:03Z", "closed_at": "2021-04-19T22:07:03Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "Using `stc.plot(surface='flat', hemi='both')` leads to a superposition of the two hemispheres:\r\n\r\n<img width=\"844\" alt=\"Screen Shot 2021-04-16 at 4 57 44 PM\" src=\"https://user-images.githubusercontent.com/4881164/115043662-09870b80-9ed5-11eb-9ff2-af83320f24cc.png\">\r\n\r\n\r\n(in addition, the conventional orientation of flat map is rotated 90* compared to what mne plots:\r\n![image](https://user-images.githubusercontent.com/4881164/115043903-45ba6c00-9ed5-11eb-90ba-4b6815b37b06.png)\r\n)", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/9306/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9306/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/9297", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9297/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9297/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9297/events", "html_url": "https://github.com/mne-tools/mne-python/issues/9297", "id": 858064030, "node_id": "MDU6SXNzdWU4NTgwNjQwMzA=", "number": 9297, "title": "find_events() returns times with offset", "user": {"login": "skjerns", "id": 14980558, "node_id": "MDQ6VXNlcjE0OTgwNTU4", "avatar_url": "https://avatars.githubusercontent.com/u/14980558?v=4", "gravatar_id": "", "url": "https://api.github.com/users/skjerns", "html_url": "https://github.com/skjerns", "followers_url": "https://api.github.com/users/skjerns/followers", "following_url": "https://api.github.com/users/skjerns/following{/other_user}", "gists_url": "https://api.github.com/users/skjerns/gists{/gist_id}", "starred_url": "https://api.github.com/users/skjerns/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/skjerns/subscriptions", "organizations_url": "https://api.github.com/users/skjerns/orgs", "repos_url": "https://api.github.com/users/skjerns/repos", "events_url": "https://api.github.com/users/skjerns/events{/privacy}", "received_events_url": "https://api.github.com/users/skjerns/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 8, "created_at": "2021-04-14T16:29:30Z", "updated_at": "2021-04-15T07:05:39Z", "closed_at": "2021-04-14T16:54:04Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "I have a FIF file with a `STI101` trigger channel to which I apply `mne.find_events()` to extract the event markers. It seems to be that there is a mismatch of 5100 samples between the extracted events and the positions of the events when looking at the STI-Channel manually. Am I missing something? Why is there a delay to the raw STIM channel positions?\r\n\r\n\r\nsample file:\r\n\r\n```Python\r\nimport numpy as np\r\nimport mne\r\n\r\nraw = mne.io.read_raw('events_raw.fif', preload=True)\r\n# automatic extraction\r\nevents = mne.find_events(raw,stim_channel='STI101', shortest_event=1, consecutive=False)\r\n# \"manual\" exctraction of events\r\nmanual_events = np.nonzero(raw.get_data('STI101'))[-1]\r\nmanual_events = manual_events[np.diff(np.pad(manual_events, [1, 0]))>1]\r\n\r\n# consistent lag of 5100 samples\r\nprint(events[:,0]-manual_events)\r\n```\r\n\r\nhowever, I cannot reproduce this when I create the the same structure with an `RawArray`, which leads me to conclude that this is something inside of my file that I just can't figure out, but would badly need to fix.\r\n\r\n```Python\r\nraw = mne.io.read_raw('events_raw.fif', preload=True)\r\ndata = raw.get_data()\r\nch_types = ['grad', 'stim', 'syst']\r\nch_names = ['MEG2633', 'STI101', 'SYS201']\r\ninfo = mne.create_info(ch_names=ch_names, sfreq=1000.0, ch_types=ch_types)\r\nraw = mne.io.RawArray(data, info)\r\nevents = mne.find_events(raw,stim_channel='STI101', shortest_event=1, consecutive=False)\r\n\r\n# now it works perfectly fine as expected, 0 lag\r\nprint(events[:,0]-manual_events)\r\n\r\n```\r\n\r\nDo you have any idea why this is happening? \r\n\r\n\r\n#### Additional information\r\n```\r\nPlatform:      Windows-10-10.0.19041-SP0\r\nPython:        3.8.8 (default, Feb 24 2021, 15:54:32) [MSC v.1928 64 bit (AMD64)]\r\nExecutable:    C:\\Users\\skjerns\\anaconda3\\python.exe\r\nCPU:           AMD64 Family 23 Model 113 Stepping 0, AuthenticAMD: 24 cores\r\nMemory:        31.9 GB\r\n\r\nmne:           0.22.1\r\nnumpy:         1.19.2 {blas=mkl_rt, lapack=mkl_rt}\r\nscipy:         1.6.2\r\nmatplotlib:    3.3.4 {backend=Qt5Agg}\r\n\r\nsklearn:       0.24.1\r\nnumba:         0.53.1\r\nnibabel:       Not found\r\nnilearn:       Not found\r\ndipy:          Not found\r\ncupy:          Not found\r\npandas:        1.2.3\r\nmayavi:        Not found\r\npyvista:       Not found\r\nvtk:           Not found\r\n```\r\n", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/9297/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9297/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/9295", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9295/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9295/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9295/events", "html_url": "https://github.com/mne-tools/mne-python/issues/9295", "id": 857270162, "node_id": "MDU6SXNzdWU4NTcyNzAxNjI=", "number": 9295, "title": "BUG: next epochs when data not preloaded throws error", "user": {"login": "kingjr", "id": 4881164, "node_id": "MDQ6VXNlcjQ4ODExNjQ=", "avatar_url": "https://avatars.githubusercontent.com/u/4881164?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kingjr", "html_url": "https://github.com/kingjr", "followers_url": "https://api.github.com/users/kingjr/followers", "following_url": "https://api.github.com/users/kingjr/following{/other_user}", "gists_url": "https://api.github.com/users/kingjr/gists{/gist_id}", "starred_url": "https://api.github.com/users/kingjr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kingjr/subscriptions", "organizations_url": "https://api.github.com/users/kingjr/orgs", "repos_url": "https://api.github.com/users/kingjr/repos", "events_url": "https://api.github.com/users/kingjr/events{/privacy}", "received_events_url": "https://api.github.com/users/kingjr/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/mne-tools/mne-python/milestones/19", "html_url": "https://github.com/mne-tools/mne-python/milestone/19", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/milestones/19/labels", "id": 6168664, "node_id": "MDk6TWlsZXN0b25lNjE2ODY2NA==", "number": 19, "title": "0.23", "description": "", "creator": {"login": "larsoner", "id": 2365790, "node_id": "MDQ6VXNlcjIzNjU3OTA=", "avatar_url": "https://avatars.githubusercontent.com/u/2365790?v=4", "gravatar_id": "", "url": "https://api.github.com/users/larsoner", "html_url": "https://github.com/larsoner", "followers_url": "https://api.github.com/users/larsoner/followers", "following_url": "https://api.github.com/users/larsoner/following{/other_user}", "gists_url": "https://api.github.com/users/larsoner/gists{/gist_id}", "starred_url": "https://api.github.com/users/larsoner/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/larsoner/subscriptions", "organizations_url": "https://api.github.com/users/larsoner/orgs", "repos_url": "https://api.github.com/users/larsoner/repos", "events_url": "https://api.github.com/users/larsoner/events{/privacy}", "received_events_url": "https://api.github.com/users/larsoner/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 58, "state": "closed", "created_at": "2020-12-01T18:47:16Z", "updated_at": "2021-04-27T19:32:01Z", "due_on": "2021-05-15T07:00:00Z", "closed_at": "2021-04-27T19:32:01Z"}, "comments": 2, "created_at": "2021-04-13T19:47:13Z", "updated_at": "2021-04-14T15:50:31Z", "closed_at": "2021-04-14T15:50:31Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "Issue only on dev\r\n\r\n```python\r\nimport mne\r\nfrom mne import io\r\nfrom mne.datasets import sample\r\ndata_path = sample.data_path()\r\nraw_fname = data_path + '/MEG/sample/sample_audvis_filt-0-40_raw.fif'\r\nevent_fname = data_path + '/MEG/sample/sample_audvis_filt-0-40_raw-eve.fif'\r\n\r\nraw = io.read_raw_fif(raw_fname)\r\nevents = mne.read_events(event_fname)\r\nepochs = mne.Epochs(raw, events, preload=False)\r\nnext(epochs)\r\n```\r\n\r\n```python\r\n---------------------------------------------------------------------------\r\nAttributeError                            Traceback (most recent call last)\r\n<ipython-input-1-06328153984c> in <module>\r\n      9 events = mne.read_events(event_fname)\r\n     10 epochs = mne.Epochs(raw, events, preload=False)\r\n---> 11 next(epochs)\r\n\r\n~/.conda/envs/bm/lib/python3.8/site-packages/mne/utils/mixin.py in __next__(self, return_event_id)\r\n    343                 epoch_noproj = self._get_epoch_from_raw(self._current)\r\n    344                 epoch_noproj = self._detrend_offset_decim(\r\n--> 345                     epoch_noproj, self._current_detrend_picks)\r\n    346                 epoch = self._project_epoch(epoch_noproj)\r\n    347                 self._current += 1\r\n\r\nAttributeError: 'Epochs' object has no attribute '_current_detrend_picks'\r\n```", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/9295/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9295/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/9294", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9294/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9294/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9294/events", "html_url": "https://github.com/mne-tools/mne-python/issues/9294", "id": 857189525, "node_id": "MDU6SXNzdWU4NTcxODk1MjU=", "number": 9294, "title": "BUG: pyvista backend on headless machine", "user": {"login": "kingjr", "id": 4881164, "node_id": "MDQ6VXNlcjQ4ODExNjQ=", "avatar_url": "https://avatars.githubusercontent.com/u/4881164?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kingjr", "html_url": "https://github.com/kingjr", "followers_url": "https://api.github.com/users/kingjr/followers", "following_url": "https://api.github.com/users/kingjr/following{/other_user}", "gists_url": "https://api.github.com/users/kingjr/gists{/gist_id}", "starred_url": "https://api.github.com/users/kingjr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kingjr/subscriptions", "organizations_url": "https://api.github.com/users/kingjr/orgs", "repos_url": "https://api.github.com/users/kingjr/repos", "events_url": "https://api.github.com/users/kingjr/events{/privacy}", "received_events_url": "https://api.github.com/users/kingjr/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 11, "created_at": "2021-04-13T17:50:46Z", "updated_at": "2021-04-16T16:46:43Z", "closed_at": "2021-04-16T16:46:43Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "I'm trying to setup the Pyvista backend for plotting on a headless machine with Jupyter port redirection.\r\n\r\nAfter setting up a new [server environment](https://raw.githubusercontent.com/mne-tools/mne-python/main/server_environment.yml), \r\n\r\nand (painfully*) installing pyvista with pyqt5 via\r\n```\r\nconda install -c conda-forge pyqt vtk pyvista \r\n```\r\n(* `pip install pyqt5` or `pyqt` as well as `conda install install pyqt` and `sudo apt-get install python-pyqt5` all lead to pyvista to fail, or miss a python or C dependency one way or another),\r\n\r\nPyvista asked to install `pyvistaqt`, which I did.\r\n\r\nHowever, I now face an `AttributeError`:\r\n\r\n```python\r\nimport mne\r\nmne.viz.set_3d_backend(\"notebook\")\r\n\r\ndata_dir = mne.datasets.sample.data_path()\r\nsubjects_dir = data_dir + '/subjects'\r\nstc_path = data_dir + '/MEG/sample/sample_audvis-meg-eeg'\r\nstc = mne.read_source_estimate(stc_path, 'sample')\r\nstc.plot(hemi='lh', \r\n         subjects_dir=subjects_dir, \r\n         initial_time=0.07,\r\n         size=(800, 600), \r\n         backend='pyvista')\r\n```\r\n\r\n```python\r\n---------------------------------------------------------------------------\r\nAttributeError                            Traceback (most recent call last)\r\n<ipython-input-1-39692bcd540a> in <module>\r\n      6 stc_path = data_dir + '/MEG/sample/sample_audvis-meg-eeg'\r\n      7 stc = mne.read_source_estimate(stc_path, 'sample')\r\n----> 8 stc.plot(hemi='lh', \r\n      9          subjects_dir=subjects_dir,\r\n     10          initial_time=0.07,\r\n\r\n~/.conda/envs/bm/lib/python3.8/site-packages/mne/source_estimate.py in plot(self, subject, surface, hemi, colormap, time_label, smoothing_steps, transparent, alpha, time_viewer, subjects_dir, figure, views, colorbar, clim, cortex, size, background, foreground, initial_time, time_unit, backend, spacing, title, show_traces, src, volume_options, view_layout, add_data_kwargs, brain_kwargs, verbose)\r\n    649              src=None, volume_options=1., view_layout='vertical',\r\n    650              add_data_kwargs=None, brain_kwargs=None, verbose=None):\r\n--> 651         brain = plot_source_estimates(\r\n    652             self, subject, surface=surface, hemi=hemi, colormap=colormap,\r\n    653             time_label=time_label, smoothing_steps=smoothing_steps,\r\n\r\n<decorator-gen-153> in plot_source_estimates(stc, subject, surface, hemi, colormap, time_label, smoothing_steps, transparent, alpha, time_viewer, subjects_dir, figure, views, colorbar, clim, cortex, size, background, foreground, initial_time, time_unit, backend, spacing, title, show_traces, src, volume_options, view_layout, add_data_kwargs, brain_kwargs, verbose)\r\n\r\n~/.conda/envs/bm/lib/python3.8/site-packages/mne/viz/_3d.py in plot_source_estimates(stc, subject, surface, hemi, colormap, time_label, smoothing_steps, transparent, alpha, time_viewer, subjects_dir, figure, views, colorbar, clim, cortex, size, background, foreground, initial_time, time_unit, backend, spacing, title, show_traces, src, volume_options, view_layout, add_data_kwargs, brain_kwargs, verbose)\r\n   1778     else:\r\n   1779         with use_3d_backend(backend):\r\n-> 1780             return _plot_stc(\r\n   1781                 stc, overlay_alpha=alpha, brain_alpha=alpha,\r\n   1782                 vector_alpha=alpha, cortex=cortex, foreground=foreground,\r\n\r\n~/.conda/envs/bm/lib/python3.8/site-packages/mne/viz/_3d.py in _plot_stc(stc, subject, surface, hemi, colormap, time_label, smoothing_steps, subjects_dir, views, clim, figure, initial_time, time_unit, background, time_viewer, colorbar, transparent, brain_alpha, overlay_alpha, vector_alpha, cortex, foreground, size, scale_factor, show_traces, src, volume_options, view_layout, add_data_kwargs, brain_kwargs)\r\n   1956             TimeViewer(brain)\r\n   1957         else:  # PyVista\r\n-> 1958             brain.setup_time_viewer(time_viewer=time_viewer,\r\n   1959                                     show_traces=show_traces)\r\n   1960     else:\r\n\r\n~/.conda/envs/bm/lib/python3.8/site-packages/mne/viz/_brain/_brain.py in setup_time_viewer(***failed resolving arguments***)\r\n    655         self._configure_scalar_bar()\r\n    656         self._configure_shortcuts()\r\n--> 657         self._configure_picking()\r\n    658         self._configure_tool_bar()\r\n    659         self._configure_dock()\r\n\r\n~/.conda/envs/bm/lib/python3.8/site-packages/mne/viz/_brain/_brain.py in _configure_picking(self)\r\n   1219                 self.act_data_smooth[hemi] = (act_data, smooth_mat)\r\n   1220 \r\n-> 1221         self._renderer._update_picking_callback(\r\n   1222             self._on_mouse_move,\r\n   1223             self._on_button_press,\r\n\r\n~/.conda/envs/bm/lib/python3.8/site-packages/mne/viz/backends/_pyvista.py in _update_picking_callback(self, on_mouse_move, on_button_press, on_button_release, on_pick)\r\n    669                                  on_button_release,\r\n    670                                  on_pick):\r\n--> 671         self.plotter.iren.AddObserver(\r\n    672             vtk.vtkCommand.RenderEvent,\r\n    673             on_mouse_move\r\n\r\nAttributeError: 'NoneType' object has no attribute 'AddObserver'\r\n``` \r\n\r\nHere is my `mne.sys_info()`\r\n```\r\nPlatform:      Linux-5.4.0-52-generic-x86_64-with-glibc2.10\r\nPython:        3.8.8 | packaged by conda-forge | (default, Feb 20 2021, 16:22:27)  [GCC 9.3.0]\r\nExecutable:    /private/home/jeanremi/.conda/envs/bm/bin/python\r\nCPU:           x86_64: 80 cores\r\nMemory:        503.8 GB\r\n\r\nmne:           0.23.dev0\r\nnumpy:         1.20.2 {blas=NO_ATLAS_INFO, lapack=lapack}\r\nscipy:         1.6.2\r\nmatplotlib:    3.4.1 {backend=module://ipykernel.pylab.backend_inline}\r\n\r\nsklearn:       0.24.1\r\nnumba:         0.53.1\r\nnibabel:       3.2.1\r\nnilearn:       0.7.1\r\ndipy:          Not found\r\ncupy:          Not found\r\npandas:        1.2.4\r\nmayavi:        Not found\r\npyvista:       0.29.0 {pyvistaqt=0.3.0, OpenGL 3.3 (Core Profile) Mesa 18.3.1 via llvmpipe (LLVM 7.0, 256 bits)}\r\nvtk:           9.0.0\r\nPyQt5:         5.12.3\r\n```\r\n\r\nMay relate to https://github.com/mne-tools/mne-python/issues/8659\r\ncc @GuillaumeFavelier", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/9294/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9294/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/9279", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9279/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9279/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9279/events", "html_url": "https://github.com/mne-tools/mne-python/issues/9279", "id": 855208173, "node_id": "MDU6SXNzdWU4NTUyMDgxNzM=", "number": 9279, "title": "a problem in loading EEG data, nicolat.py format when trying to load data with 4 Byte integer values.", "user": {"login": "miriamguen", "id": 42031781, "node_id": "MDQ6VXNlcjQyMDMxNzgx", "avatar_url": "https://avatars.githubusercontent.com/u/42031781?v=4", "gravatar_id": "", "url": "https://api.github.com/users/miriamguen", "html_url": "https://github.com/miriamguen", "followers_url": "https://api.github.com/users/miriamguen/followers", "following_url": "https://api.github.com/users/miriamguen/following{/other_user}", "gists_url": "https://api.github.com/users/miriamguen/gists{/gist_id}", "starred_url": "https://api.github.com/users/miriamguen/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/miriamguen/subscriptions", "organizations_url": "https://api.github.com/users/miriamguen/orgs", "repos_url": "https://api.github.com/users/miriamguen/repos", "events_url": "https://api.github.com/users/miriamguen/events{/privacy}", "received_events_url": "https://api.github.com/users/miriamguen/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}, {"id": 77061445, "node_id": "MDU6TGFiZWw3NzA2MTQ0NQ==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/EASY", "name": "EASY", "color": "2be2d6", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/mne-tools/mne-python/milestones/19", "html_url": "https://github.com/mne-tools/mne-python/milestone/19", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/milestones/19/labels", "id": 6168664, "node_id": "MDk6TWlsZXN0b25lNjE2ODY2NA==", "number": 19, "title": "0.23", "description": "", "creator": {"login": "larsoner", "id": 2365790, "node_id": "MDQ6VXNlcjIzNjU3OTA=", "avatar_url": "https://avatars.githubusercontent.com/u/2365790?v=4", "gravatar_id": "", "url": "https://api.github.com/users/larsoner", "html_url": "https://github.com/larsoner", "followers_url": "https://api.github.com/users/larsoner/followers", "following_url": "https://api.github.com/users/larsoner/following{/other_user}", "gists_url": "https://api.github.com/users/larsoner/gists{/gist_id}", "starred_url": "https://api.github.com/users/larsoner/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/larsoner/subscriptions", "organizations_url": "https://api.github.com/users/larsoner/orgs", "repos_url": "https://api.github.com/users/larsoner/repos", "events_url": "https://api.github.com/users/larsoner/events{/privacy}", "received_events_url": "https://api.github.com/users/larsoner/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 58, "state": "closed", "created_at": "2020-12-01T18:47:16Z", "updated_at": "2021-04-27T19:32:01Z", "due_on": "2021-05-15T07:00:00Z", "closed_at": "2021-04-27T19:32:01Z"}, "comments": 3, "created_at": "2021-04-11T03:22:45Z", "updated_at": "2021-04-12T22:38:47Z", "closed_at": "2021-04-12T22:38:47Z", "author_association": "NONE", "active_lock_reason": null, "body": "**Trying to read a file containing data with 4 Byte integer values, produces an error:**\r\n\r\nraw = mne.io.read_raw_nicolet(path, ch_type='eeg', preload=True)\r\nor \r\nraw = mne.io.read_raw_nicolet(path, ch_type='eeg', preload=False\r\nraw.load_data()\r\n\r\nsee error logs below - these files were correctly opened in Matlab, so I know ist not a file problem\r\n\r\n**file examples can be downloaded here:** \r\nhttps://www.dropbox.com/sh/gx5mrre4w0izuor/AABeDbycOdQ9G0bv7oMqCRPAa?dl=0\r\n \r\nAlso in some of the files, recording duration is not an integer value so _get_nicolet_info\r\nin nicolat.py needs to be updated to read the duration as a float and not an int, \r\nfor example adding to line 76 the condition: \r\n\r\nelif var == 'conversion_factor' | **var == 'duration_in_sec**':\r\n      value = float(value)\r\n\r\n\r\n\r\n**1st error logging:** \r\nraw = mne.io.read_raw_nicolet(path, ch_type='eeg', preload=True)\r\n\r\nReading header...\r\nReading 0 ... 3142559  =      0.000 ...  6137.811 secs...\r\n---------------------------------------------------------------------------\r\nRuntimeError                              Traceback (most recent call last)\r\n~\\anaconda3\\envs\\pre_ictal_dynamics\\lib\\site-packages\\mne\\io\\nicolet\\nicolet.py in _read_segment_file(self, data, idx, fi, start, stop, cals, mult)\r\n\r\n~\\anaconda3\\envs\\pre_ictal_dynamics\\lib\\site-packages\\mne\\io\\utils.py in _read_segments_file(raw, data, idx, fi, start, stop, cals, mult, dtype, n_channels, offset, trigger_ch)\r\n    222             if block.size != count:\r\n--> 223                 raise RuntimeError('Incorrect number of samples (%s != %s), '\r\n    224                                    'please report this error to MNE-Python '\r\n\r\nRuntimeError: Incorrect number of samples (171 != 49999985), please report this error to MNE-Python developers\r\n\r\nDuring handling of the above exception, another exception occurred:\r\n\r\nRuntimeError                              Traceback (most recent call last)\r\n<ipython-input-10-7397a9929112> in <module>\r\n----> 1 raw = mne.io.read_raw_nicolet(path, ch_type='eeg', preload=True)\r\n\r\n~\\anaconda3\\envs\\pre_ictal_dynamics\\lib\\site-packages\\mne\\io\\nicolet\\nicolet.py in read_raw_nicolet(input_fname, ch_type, eog, ecg, emg, misc, preload, verbose)\r\n     58     mne.io.Raw : Documentation of attribute and methods.\r\n     59     \"\"\"\r\n---> 60     return RawNicolet(input_fname, ch_type, eog=eog, ecg=ecg,\r\n     61                       emg=emg, misc=misc, preload=preload, verbose=verbose)\r\n     62 \r\n\r\n~\\anaconda3\\envs\\pre_ictal_dynamics\\lib\\site-packages\\mne\\io\\nicolet\\nicolet.py in __init__(self, input_fname, ch_type, eog, ecg, emg, misc, preload, verbose)\r\n    157         super(RawNicolet, self).__init__(\r\n    158             info, preload, filenames=[input_fname], raw_extras=[header_info],\r\n--> 159             last_samps=last_samps, orig_format='int',\r\n    160             verbose=verbose)\r\n    161 \r\n\r\n<decorator-gen-165> in __init__(self, info, preload, first_samps, last_samps, filenames, raw_extras, orig_format, dtype, buffer_size_sec, orig_units, verbose)\r\n\r\n~\\anaconda3\\envs\\pre_ictal_dynamics\\lib\\site-packages\\mne\\io\\base.py in __init__(self, info, preload, first_samps, last_samps, filenames, raw_extras, orig_format, dtype, buffer_size_sec, orig_units, verbose)\r\n    247         self._update_times()\r\n    248         if load_from_disk:\r\n--> 249             self._preload_data(preload)\r\n    250         self._init_kwargs = _get_argvalues()\r\n    251 \r\n\r\n<decorator-gen-169> in _preload_data(self, preload, verbose)\r\n\r\n~\\anaconda3\\envs\\pre_ictal_dynamics\\lib\\site-packages\\mne\\io\\base.py in _preload_data(self, preload, verbose)\r\n    528         logger.info('Reading %d ... %d  =  %9.3f ... %9.3f secs...' %\r\n    529                     (0, len(self.times) - 1, 0., self.times[-1]))\r\n--> 530         self._data = self._read_segment(\r\n    531             data_buffer=data_buffer, projector=self._projector)\r\n    532         assert len(self._data) == self.info['nchan']\r\n\r\n<decorator-gen-167> in _read_segment(self, start, stop, sel, data_buffer, projector, verbose)\r\n\r\n~\\anaconda3\\envs\\pre_ictal_dynamics\\lib\\site-packages\\mne\\io\\base.py in _read_segment(***failed resolving arguments***)\r\n    412             # reindex back to original file\r\n    413             orig_idx = _convert_slice(self._read_picks[fi][need_idx])\r\n--> 414             _ReadSegmentFileProtector(self)._read_segment_file(\r\n    415                 data[:, this_sl], orig_idx, fi,\r\n    416                 int(start_file), int(stop_file), cals, mult)\r\n\r\n~\\anaconda3\\envs\\pre_ictal_dynamics\\lib\\site-packages\\mne\\io\\base.py in _read_segment_file(self, data, idx, fi, start, stop, cals, mult)\r\n   1814 \r\n   1815     def _read_segment_file(self, data, idx, fi, start, stop, cals, mult):\r\n-> 1816         return self.__raw.__class__._read_segment_file(\r\n   1817             self, data, idx, fi, start, stop, cals, mult)\r\n   1818 \r\n\r\n~\\anaconda3\\envs\\pre_ictal_dynamics\\lib\\site-packages\\mne\\io\\nicolet\\nicolet.py in _read_segment_file(self, data, idx, fi, start, stop, cals, mult)\r\n\r\n~\\anaconda3\\envs\\pre_ictal_dynamics\\lib\\site-packages\\mne\\io\\utils.py in _read_segments_file(raw, data, idx, fi, start, stop, cals, mult, dtype, n_channels, offset, trigger_ch)\r\n    221             block = np.fromfile(fid, dtype, count)\r\n    222             if block.size != count:\r\n--> 223                 raise RuntimeError('Incorrect number of samples (%s != %s), '\r\n    224                                    'please report this error to MNE-Python '\r\n    225                                    'developers' % (block.size, count))\r\n\r\nRuntimeError: Incorrect number of samples (85 != 24999975), please report this error to MNE-Python developers\r\n\r\n**second error logging:** \r\n\r\nraw = mne.io.read_raw_nicolet(path, ch_type='eeg', preload=False\r\nraw.load_data()\r\n\r\nReading 0 ... 272639  =      0.000 ...   532.498 secs...\r\n---------------------------------------------------------------------------\r\nRuntimeError                              Traceback (most recent call last)\r\n~\\anaconda3\\envs\\pre_ictal_dynamics\\lib\\site-packages\\mne\\io\\nicolet\\nicolet.py in _read_segment_file(self, data, idx, fi, start, stop, cals, mult)\r\n    166         try:\r\n--> 167             _read_segments_file(\r\n    168                 self, data, idx, fi, start, stop, cals, mult, dtype='<i2')\r\n\r\n~\\anaconda3\\envs\\pre_ictal_dynamics\\lib\\site-packages\\mne\\io\\utils.py in _read_segments_file(raw, data, idx, fi, start, stop, cals, mult, dtype, n_channels, offset, trigger_ch)\r\n    222             if block.size != count:\r\n--> 223                 raise RuntimeError('Incorrect number of samples (%s != %s), '\r\n    224                                    'please report this error to MNE-Python '\r\n\r\nRuntimeError: Incorrect number of samples (169 != 9542400), please report this error to MNE-Python developers\r\n\r\nDuring handling of the above exception, another exception occurred:\r\n\r\nRuntimeError                              Traceback (most recent call last)\r\n<ipython-input-7-72a37d28be67> in <module>\r\n----> 1 raw.load_data()\r\n\r\n<decorator-gen-168> in load_data(self, verbose)\r\n\r\n~\\anaconda3\\envs\\pre_ictal_dynamics\\lib\\site-packages\\mne\\io\\base.py in load_data(self, verbose)\r\n    517         \"\"\"\r\n    518         if not self.preload:\r\n--> 519             self._preload_data(True)\r\n    520         return self\r\n    521 \r\n\r\n<decorator-gen-169> in _preload_data(self, preload, verbose)\r\n\r\n~\\anaconda3\\envs\\pre_ictal_dynamics\\lib\\site-packages\\mne\\io\\base.py in _preload_data(self, preload, verbose)\r\n    528         logger.info('Reading %d ... %d  =  %9.3f ... %9.3f secs...' %\r\n    529                     (0, len(self.times) - 1, 0., self.times[-1]))\r\n--> 530         self._data = self._read_segment(\r\n    531             data_buffer=data_buffer, projector=self._projector)\r\n    532         assert len(self._data) == self.info['nchan']\r\n\r\n<decorator-gen-167> in _read_segment(self, start, stop, sel, data_buffer, projector, verbose)\r\n\r\n~\\anaconda3\\envs\\pre_ictal_dynamics\\lib\\site-packages\\mne\\io\\base.py in _read_segment(***failed resolving arguments***)\r\n    412             # reindex back to original file\r\n    413             orig_idx = _convert_slice(self._read_picks[fi][need_idx])\r\n--> 414             _ReadSegmentFileProtector(self)._read_segment_file(\r\n    415                 data[:, this_sl], orig_idx, fi,\r\n    416                 int(start_file), int(stop_file), cals, mult)\r\n\r\n~\\anaconda3\\envs\\pre_ictal_dynamics\\lib\\site-packages\\mne\\io\\base.py in _read_segment_file(self, data, idx, fi, start, stop, cals, mult)\r\n   1814 \r\n   1815     def _read_segment_file(self, data, idx, fi, start, stop, cals, mult):\r\n-> 1816         return self.__raw.__class__._read_segment_file(\r\n   1817             self, data, idx, fi, start, stop, cals, mult)\r\n   1818 \r\n\r\n~\\anaconda3\\envs\\pre_ictal_dynamics\\lib\\site-packages\\mne\\io\\nicolet\\nicolet.py in _read_segment_file(self, data, idx, fi, start, stop, cals, mult)\r\n    168                 self, data, idx, fi, start, stop, cals, mult, dtype='<i2')\r\n    169         except RuntimeError:\r\n--> 170             _read_segments_file(\r\n    171                 self, data, idx, fi, start, stop, cals, mult, dtype='<i4')\r\n\r\n~\\anaconda3\\envs\\pre_ictal_dynamics\\lib\\site-packages\\mne\\io\\utils.py in _read_segments_file(raw, data, idx, fi, start, stop, cals, mult, dtype, n_channels, offset, trigger_ch)\r\n    221             block = np.fromfile(fid, dtype, count)\r\n    222             if block.size != count:\r\n--> 223                 raise RuntimeError('Incorrect number of samples (%s != %s), '\r\n    224                                    'please report this error to MNE-Python '\r\n    225                                    'developers' % (block.size, count))\r\n\r\nRuntimeError: Incorrect number of samples (84 != 9542400), please report this error to MNE-Python developers\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/9279/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9279/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/9272", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9272/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9272/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9272/events", "html_url": "https://github.com/mne-tools/mne-python/issues/9272", "id": 854180706, "node_id": "MDU6SXNzdWU4NTQxODA3MDY=", "number": 9272, "title": "UnicodeDecodeError: 'charmap' codec can't decode byte 0x81 in position 6437: character maps to <undefined>", "user": {"login": "leticiabragas2", "id": 79654396, "node_id": "MDQ6VXNlcjc5NjU0Mzk2", "avatar_url": "https://avatars.githubusercontent.com/u/79654396?v=4", "gravatar_id": "", "url": "https://api.github.com/users/leticiabragas2", "html_url": "https://github.com/leticiabragas2", "followers_url": "https://api.github.com/users/leticiabragas2/followers", "following_url": "https://api.github.com/users/leticiabragas2/following{/other_user}", "gists_url": "https://api.github.com/users/leticiabragas2/gists{/gist_id}", "starred_url": "https://api.github.com/users/leticiabragas2/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/leticiabragas2/subscriptions", "organizations_url": "https://api.github.com/users/leticiabragas2/orgs", "repos_url": "https://api.github.com/users/leticiabragas2/repos", "events_url": "https://api.github.com/users/leticiabragas2/events{/privacy}", "received_events_url": "https://api.github.com/users/leticiabragas2/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2021-04-09T05:40:31Z", "updated_at": "2021-04-09T07:41:32Z", "closed_at": "2021-04-09T07:41:32Z", "author_association": "NONE", "active_lock_reason": null, "body": "Can anyone tell me HOW TO SOLVE? please!\r\n\r\n```python\r\nimport mne\r\nimport os\r\n\r\nsample_data_folder = mne.datasets.testing.data_path()\r\nsample_data_raw_file = os.path.join(sample_data_folder, 'NihonKohden', 'MB0400FU.EEG')\r\nraw = mne.io.read_raw_nihon(sample_data_raw_file, verbose=False)\r\nevents_file = os.path.join(sample_data_folder, 'NihonKohden', 'MB0400FU.EEG')\r\nevents = mne.read_events(events_file)\r\n```\r\n```\r\n  File \"E:\\Usu\u00e1rios\\Let\u00edcia\\Desktop\\test\\ArquivoAlfred.py\", line 60, in <module>\r\n    events = mne.read_events(events_file)\r\n\r\n  File \"<decorator-gen-157>\", line 21, in read_events\r\n\r\n  File \"C:\\ProgramData\\Anaconda3\\lib\\site-packages\\mne\\event.py\", line 265, in read_events\r\n    lines = np.loadtxt(filename, dtype=np.float64).astype(int)\r\n\r\n  File \"C:\\ProgramData\\Anaconda3\\lib\\site-packages\\numpy\\lib\\npyio.py\", line 1112, in loadtxt\r\n    first_line = next(fh)\r\n\r\n  File \"C:\\ProgramData\\Anaconda3\\lib\\encodings\\cp1252.py\", line 23, in decode\r\n    return codecs.charmap_decode(input,self.errors,decoding_table)[0]\r\n\r\nUnicodeDecodeError: 'charmap' codec can't decode byte 0x81 in position 6437: character maps to <undefined>\r\n```", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/9272/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9272/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/9271", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9271/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9271/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9271/events", "html_url": "https://github.com/mne-tools/mne-python/issues/9271", "id": 854118109, "node_id": "MDU6SXNzdWU4NTQxMTgxMDk=", "number": 9271, "title": "TypeError: \u2018float\u2019 object does not support item assignment", "user": {"login": "dreamiter", "id": 9292401, "node_id": "MDQ6VXNlcjkyOTI0MDE=", "avatar_url": "https://avatars.githubusercontent.com/u/9292401?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dreamiter", "html_url": "https://github.com/dreamiter", "followers_url": "https://api.github.com/users/dreamiter/followers", "following_url": "https://api.github.com/users/dreamiter/following{/other_user}", "gists_url": "https://api.github.com/users/dreamiter/gists{/gist_id}", "starred_url": "https://api.github.com/users/dreamiter/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dreamiter/subscriptions", "organizations_url": "https://api.github.com/users/dreamiter/orgs", "repos_url": "https://api.github.com/users/dreamiter/repos", "events_url": "https://api.github.com/users/dreamiter/events{/privacy}", "received_events_url": "https://api.github.com/users/dreamiter/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 9, "created_at": "2021-04-09T03:28:47Z", "updated_at": "2021-04-12T20:24:15Z", "closed_at": "2021-04-12T20:24:15Z", "author_association": "NONE", "active_lock_reason": null, "body": "- MNE-Python version: 0.22.0\r\n- operating system: Windows & Mac\r\n\r\n#### Describe the bug\r\n*TypeError: \u2018float\u2019 object does not support item assignment*\r\n\r\nI was trying to read in a hypnogram edf file using python. The data is directly from [PhysioNet](https://www.physionet.org/content/sleep-edfx/1.0.0/)\r\nFor example, when I tried to process this [file](https://www.physionet.org/content/sleep-edfx/1.0.0/sleep-cassette/SC4001EC-Hypnogram.edf) using my code below, it threw an error.\r\n\r\n#### Steps to reproduce\r\n```python\r\nimport mne\r\n\r\ndata = mne.io.read_raw_edf(\"SC4001EC-Hypnogram.edf\")\r\n```\r\n\r\n#### ERROR results\r\n```\r\nExtracting EDF parameters from C:\\Users\\yxie\\Desktop\\healthcare\\SC4001EC-Hypnogram.edf...\r\nEDF file detected\r\nTraceback (most recent call last):\r\n\r\n  File \"<ipython-input-77-d358ed2921e8>\", line 4, in <module>\r\n    data = mne.io.read_raw_edf(localpath)\r\n\r\n  File \"C:\\Users\\yxie\\Anaconda3\\lib\\site-packages\\mne\\io\\edf\\edf.py\", line 1217, in read_raw_edf\r\n    return RawEDF(input_fname=input_fname, eog=eog, misc=misc,\r\n\r\n  File \"<decorator-gen-182>\", line 24, in __init__\r\n\r\n  File \"C:\\Users\\yxie\\Anaconda3\\lib\\site-packages\\mne\\io\\edf\\edf.py\", line 114, in __init__\r\n    info, edf_info, orig_units = _get_info(input_fname,\r\n\r\n  File \"C:\\Users\\yxie\\Anaconda3\\lib\\site-packages\\mne\\io\\edf\\edf.py\", line 358, in _get_info\r\n    edf_info, orig_units = _read_header(fname, exclude)\r\n\r\n  File \"C:\\Users\\yxie\\Anaconda3\\lib\\site-packages\\mne\\io\\edf\\edf.py\", line 345, in _read_header\r\n    return _read_edf_header(fname, exclude)\r\n\r\n  File \"C:\\Users\\yxie\\Anaconda3\\lib\\site-packages\\mne\\io\\edf\\edf.py\", line 598, in _read_edf_header\r\n    record_length = record_length[0] = 1.\r\n\r\nTypeError: 'float' object does not support item assignment\r\n```\r\n\r\n\r\n#### Additional information\r\nNote: I'm only showing my Windows setup here. But it also failed on my Mac.\r\n\r\nPlatform:      Windows-10-10.0.18362-SP0\r\nPython:        3.8.3 (default, Jul  2 2020, 17:30:36) [MSC v.1916 64 bit (AMD64)]\r\nExecutable:    C:\\Users\\yxie\\Anaconda3\\python.exe\r\nCPU:           Intel64 Family 6 Model 158 Stepping 13, GenuineIntel: 12 cores\r\nMemory:        15.8 GB\r\n\r\nmne:           0.22.0\r\nnumpy:         1.19.5 {blas=D:\\\\a\\\\1\\\\s\\\\numpy\\\\build\\\\openblas_info, lapack=D:\\\\a\\\\1\\\\s\\\\numpy\\\\build\\\\openblas_lapack_info}\r\nscipy:         1.5.0\r\nmatplotlib:    3.2.2 {backend=module://ipykernel.pylab.backend_inline}\r\n\r\nsklearn:       0.23.2\r\nnumba:         0.50.1\r\nnibabel:       Not found\r\nnilearn:       Not found\r\ndipy:          Not found\r\ncupy:          Not found\r\npandas:        1.2.2\r\nmayavi:        Not found\r\npyvista:       Not found\r\nvtk:           Not found\r\n", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/9271/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9271/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/9267", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9267/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9267/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9267/events", "html_url": "https://github.com/mne-tools/mne-python/issues/9267", "id": 853651600, "node_id": "MDU6SXNzdWU4NTM2NTE2MDA=", "number": 9267, "title": "How to fix: \u201cUnicodeDecodeError: \u2018ascii\u2019 codec can\u2019t decode byte\u201d", "user": {"login": "leticiabragas2", "id": 79654396, "node_id": "MDQ6VXNlcjc5NjU0Mzk2", "avatar_url": "https://avatars.githubusercontent.com/u/79654396?v=4", "gravatar_id": "", "url": "https://api.github.com/users/leticiabragas2", "html_url": "https://github.com/leticiabragas2", "followers_url": "https://api.github.com/users/leticiabragas2/followers", "following_url": "https://api.github.com/users/leticiabragas2/following{/other_user}", "gists_url": "https://api.github.com/users/leticiabragas2/gists{/gist_id}", "starred_url": "https://api.github.com/users/leticiabragas2/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/leticiabragas2/subscriptions", "organizations_url": "https://api.github.com/users/leticiabragas2/orgs", "repos_url": "https://api.github.com/users/leticiabragas2/repos", "events_url": "https://api.github.com/users/leticiabragas2/events{/privacy}", "received_events_url": "https://api.github.com/users/leticiabragas2/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 12, "created_at": "2021-04-08T16:35:15Z", "updated_at": "2021-07-02T14:10:16Z", "closed_at": "2021-05-11T11:27:11Z", "author_association": "NONE", "active_lock_reason": null, "body": "how to solve this problem?\r\nlinux operating system 18.01\r\n\r\n```python\r\nsample_data_folder = mne.datasets.testing.data_path()\r\nsample_data_raw_file = os.path.join(sample_data_folder, 'NihonKohden', 'DA0935F5.EEG')\r\n\r\nraw = mne.io.read_raw_nihon(sample_data_raw_file)\r\n```\r\n```\r\nUnicodeDecodeError                        Traceback (most recent call last)\r\n<ipython-input-36-62ba074d16ef> in <module>\r\n      2 sample_data_raw_file = os.path.join(sample_data_folder, 'NihonKohden', 'DA0935F5.EEG')\r\n      3 \r\n----> 4 raw = mne.io.read_raw_nihon(sample_data_raw_file)\r\n\r\n~/anacondalele/envs/mne/lib/python3.8/site-packages/mne/io/nihon/nihon.py in read_raw_nihon(fname, preload, verbose)\r\n     44     mne.io.Raw : Documentation of attribute and methods.\r\n     45     \"\"\"\r\n---> 46     return RawNihon(fname, preload, verbose)\r\n     47 \r\n     48 \r\n\r\n<decorator-gen-224> in __init__(self, fname, preload, verbose)\r\n\r\n~/anacondalele/envs/mne/lib/python3.8/site-packages/mne/io/nihon/nihon.py in __init__(self, fname, preload, verbose)\r\n    352 \r\n    353         # Get annotations from LOG file\r\n--> 354         annots = _read_nihon_annotations(fname, orig_time=info['meas_date'])\r\n    355         self.set_annotations(annots)\r\n    356 \r\n\r\n~/anacondalele/envs/mne/lib/python3.8/site-packages/mne/io/nihon/nihon.py in _read_nihon_annotations(fname, orig_time)\r\n    247             n_logs = np.fromfile(fid, np.uint8, 1)[0]\r\n    248             fid.seek(t_blk_address + 0x14)\r\n--> 249             t_logs = np.fromfile(fid, '|S45', n_logs).astype('U45')\r\n    250 \r\n    251             for t_log in t_logs:\r\n\r\nUnicodeDecodeError: 'ascii' codec can't decode byte 0xe7 in position 7: ordinal not in range(128)\r\n```\r\n", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/9267/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9267/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/9265", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9265/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9265/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9265/events", "html_url": "https://github.com/mne-tools/mne-python/issues/9265", "id": 853617879, "node_id": "MDU6SXNzdWU4NTM2MTc4Nzk=", "number": 9265, "title": "SNIRF loader not working with the official samples", "user": {"login": "HanBnrd", "id": 32393169, "node_id": "MDQ6VXNlcjMyMzkzMTY5", "avatar_url": "https://avatars.githubusercontent.com/u/32393169?v=4", "gravatar_id": "", "url": "https://api.github.com/users/HanBnrd", "html_url": "https://github.com/HanBnrd", "followers_url": "https://api.github.com/users/HanBnrd/followers", "following_url": "https://api.github.com/users/HanBnrd/following{/other_user}", "gists_url": "https://api.github.com/users/HanBnrd/gists{/gist_id}", "starred_url": "https://api.github.com/users/HanBnrd/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/HanBnrd/subscriptions", "organizations_url": "https://api.github.com/users/HanBnrd/orgs", "repos_url": "https://api.github.com/users/HanBnrd/repos", "events_url": "https://api.github.com/users/HanBnrd/events{/privacy}", "received_events_url": "https://api.github.com/users/HanBnrd/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2021-04-08T15:55:58Z", "updated_at": "2021-04-22T04:16:26Z", "closed_at": "2021-04-17T15:43:04Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "#### Describe the bug\r\nThe function [*read_raw_snirf*](https://mne.tools/dev/generated/mne.io.read_raw_snirf.html#mne.io.read_raw_snirf) returns errors with the official samples from https://github.com/fNIRS/snirf-samples/.\r\n\r\n\r\n#### Steps to reproduce\r\nWith [*Simple_Probe.snirf*](https://github.com/fNIRS/snirf-samples/blob/master/basic/Simple_Probe.snirf):\r\n```python\r\nfrom mne.io import read_raw_snirf\r\n\r\nsnirf_intensity = read_raw_snirf('Simple_Probe.snirf')\r\n```\r\n\r\nWith [*minimum_example.snirf*](https://github.com/fNIRS/snirf-samples/blob/master/test/minimum_example.snirf):\r\n```python\r\nfrom mne.io import read_raw_snirf\r\n\r\nsnirf_intensity = read_raw_snirf('minimum_example.snirf')\r\n```\r\n\r\n\r\n#### Expected results\r\n```\r\nLoading Simple_Probe.snirf\r\n```\r\nand\r\n```\r\nLoading minimum_example.snirf\r\n```\r\nrespectively.\r\n\r\n\r\n#### Actual results\r\n```\r\nLoading Simple_Probe.snirf\r\n...\\snirf.py:3: RuntimeWarning: Non uniform sampled data not supported.\r\n  snirf_intensity = read_raw_snirf('Simple_Probe.snirf')\r\n...\\snirf.py:3: RuntimeWarning: Unable to extract sample rate from SNIRF file.\r\n  snirf_intensity = read_raw_snirf('Simple_Probe.snirf')\r\nTraceback (most recent call last):\r\n  File \"...\\snirf.py\", line 3, in <module>\r\n    snirf_intensity = read_raw_snirf('Simple_Probe.snirf')\r\n  File \"...\\mne-python\\mne\\io\\snirf\\_snirf.py\", line 43, in read_raw_snirf\r\n    return RawSNIRF(fname, preload, verbose)\r\n  File \"<decorator-gen-248>\", line 24, in __init__\r\n  File \"...\\mne-python\\mne\\io\\snirf\\_snirf.py\", line 112, in __init__\r\n    sources = [s.decode('UTF-8') for s in sources]\r\n  File \"...\\mne-python\\mne\\io\\snirf\\_snirf.py\", line 112, in <listcomp>\r\n    sources = [s.decode('UTF-8') for s in sources]\r\nAttributeError: 'numpy.ndarray' object has no attribute 'decode'\r\n```\r\nand\r\n```\r\nLoading minimum_example.snirf\r\n...\\snirf.py:3: RuntimeWarning: Non uniform sampled data not supported.\r\n  snirf_intensity = read_raw_snirf('minimum_example.snirf')\r\n...\\snirf.py:3: RuntimeWarning: Unable to extract sample rate from SNIRF file.\r\n  snirf_intensity = read_raw_snirf('minimum_example.snirf')\r\nTraceback (most recent call last):\r\n  File \"...\\snirf.py\", line 3, in <module>\r\n    snirf_intensity = read_raw_snirf('minimum_example.snirf')\r\n  File \"...\\mne-python\\mne\\io\\snirf\\_snirf.py\", line 43, in read_raw_snirf\r\n    return RawSNIRF(fname, preload, verbose)\r\n  File \"<decorator-gen-248>\", line 24, in __init__\r\n  File \"...\\mne-python\\mne\\io\\snirf\\_snirf.py\", line 112, in __init__\r\n    sources = [s.decode('UTF-8') for s in sources]\r\nTypeError: iteration over a 0-d array\r\n```\r\nrespectively.\r\n\r\n#### Additional information\r\nThis [tutorial from MNE-NIRS](https://mne.tools/mne-nirs/auto_examples/plot_90_snirf.html) works fine on my machine.\r\n", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/9265/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9265/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/9263", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9263/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9263/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9263/events", "html_url": "https://github.com/mne-tools/mne-python/issues/9263", "id": 852494777, "node_id": "MDU6SXNzdWU4NTI0OTQ3Nzc=", "number": 9263, "title": "MNE Python stc.plot(),  draws the brain as translucent", "user": {"login": "Mirrabella", "id": 33099309, "node_id": "MDQ6VXNlcjMzMDk5MzA5", "avatar_url": "https://avatars.githubusercontent.com/u/33099309?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Mirrabella", "html_url": "https://github.com/Mirrabella", "followers_url": "https://api.github.com/users/Mirrabella/followers", "following_url": "https://api.github.com/users/Mirrabella/following{/other_user}", "gists_url": "https://api.github.com/users/Mirrabella/gists{/gist_id}", "starred_url": "https://api.github.com/users/Mirrabella/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Mirrabella/subscriptions", "organizations_url": "https://api.github.com/users/Mirrabella/orgs", "repos_url": "https://api.github.com/users/Mirrabella/repos", "events_url": "https://api.github.com/users/Mirrabella/events{/privacy}", "received_events_url": "https://api.github.com/users/Mirrabella/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 8, "created_at": "2021-04-07T14:53:17Z", "updated_at": "2022-02-21T14:43:37Z", "closed_at": "2022-02-21T14:43:37Z", "author_association": "NONE", "active_lock_reason": null, "body": "When I use stc.plot(), this function draws the brain as translucent, and it is seems very stange and the picture is poorly perceived.\r\n\r\nCan you please tell me how to change the transparency parameter?\r\n\r\nMNE version 23.0\r\n\r\nI tried to used View \u2014 Toggle Eye Dome Lighting, but it did not help,  picture still seems strange too. :(\r\n![\u0421\u043d\u0438\u043c\u043e\u043a \u044d\u043a\u0440\u0430\u043d\u0430 \u043e\u0442 2021-04-07 17-33-42](https://user-images.githubusercontent.com/33099309/113887280-08b1f380-97ca-11eb-9252-4296edb36663.jpeg)\r\n![\u0421\u043d\u0438\u043c\u043e\u043a \u044d\u043a\u0440\u0430\u043d\u0430 \u043e\u0442 2021-04-07 17-45-51](https://user-images.githubusercontent.com/33099309/113887312-0f406b00-97ca-11eb-8183-32cbe0b2e2af.jpeg)\r\n\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/9263/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9263/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/9254", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9254/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9254/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9254/events", "html_url": "https://github.com/mne-tools/mne-python/pull/9254", "id": 850775277, "node_id": "MDExOlB1bGxSZXF1ZXN0NjA5Mjk5ODY3", "number": 9254, "title": "Fix html table scrolling again", "user": {"login": "drammock", "id": 1810515, "node_id": "MDQ6VXNlcjE4MTA1MTU=", "avatar_url": "https://avatars.githubusercontent.com/u/1810515?v=4", "gravatar_id": "", "url": "https://api.github.com/users/drammock", "html_url": "https://github.com/drammock", "followers_url": "https://api.github.com/users/drammock/followers", "following_url": "https://api.github.com/users/drammock/following{/other_user}", "gists_url": "https://api.github.com/users/drammock/gists{/gist_id}", "starred_url": "https://api.github.com/users/drammock/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/drammock/subscriptions", "organizations_url": "https://api.github.com/users/drammock/orgs", "repos_url": "https://api.github.com/users/drammock/repos", "events_url": "https://api.github.com/users/drammock/events{/privacy}", "received_events_url": "https://api.github.com/users/drammock/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 40091538, "node_id": "MDU6TGFiZWw0MDA5MTUzOA==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/DOC", "name": "DOC", "color": "009800", "default": false, "description": null}, {"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2021-04-05T22:49:14Z", "updated_at": "2021-04-06T19:05:11Z", "closed_at": "2021-04-06T16:33:51Z", "author_association": "MEMBER", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/mne-tools/mne-python/pulls/9254", "html_url": "https://github.com/mne-tools/mne-python/pull/9254", "diff_url": "https://github.com/mne-tools/mne-python/pull/9254.diff", "patch_url": "https://github.com/mne-tools/mne-python/pull/9254.patch", "merged_at": "2021-04-06T16:33:51Z"}, "body": "The prior fix in #8977 seems to have been short-lived.  Locally for me with latest docutils (0.17) this now works again (pretty-printing dataframes in our tutorials once again creates a horizontal scrollbar).  Let's see if CircleCI behaves the same way.\r\n\r\nAlso removes from website template cruft that is no longer needed due to theme updates.", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/9254/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9254/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/9250", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9250/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9250/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9250/events", "html_url": "https://github.com/mne-tools/mne-python/issues/9250", "id": 850580408, "node_id": "MDU6SXNzdWU4NTA1ODA0MDg=", "number": 9250, "title": "BUG: EGI coords read but not transformed", "user": {"login": "larsoner", "id": 2365790, "node_id": "MDQ6VXNlcjIzNjU3OTA=", "avatar_url": "https://avatars.githubusercontent.com/u/2365790?v=4", "gravatar_id": "", "url": "https://api.github.com/users/larsoner", "html_url": "https://github.com/larsoner", "followers_url": "https://api.github.com/users/larsoner/followers", "following_url": "https://api.github.com/users/larsoner/following{/other_user}", "gists_url": "https://api.github.com/users/larsoner/gists{/gist_id}", "starred_url": "https://api.github.com/users/larsoner/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/larsoner/subscriptions", "organizations_url": "https://api.github.com/users/larsoner/orgs", "repos_url": "https://api.github.com/users/larsoner/repos", "events_url": "https://api.github.com/users/larsoner/events{/privacy}", "received_events_url": "https://api.github.com/users/larsoner/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/mne-tools/mne-python/milestones/19", "html_url": "https://github.com/mne-tools/mne-python/milestone/19", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/milestones/19/labels", "id": 6168664, "node_id": "MDk6TWlsZXN0b25lNjE2ODY2NA==", "number": 19, "title": "0.23", "description": "", "creator": {"login": "larsoner", "id": 2365790, "node_id": "MDQ6VXNlcjIzNjU3OTA=", "avatar_url": "https://avatars.githubusercontent.com/u/2365790?v=4", "gravatar_id": "", "url": "https://api.github.com/users/larsoner", "html_url": "https://github.com/larsoner", "followers_url": "https://api.github.com/users/larsoner/followers", "following_url": "https://api.github.com/users/larsoner/following{/other_user}", "gists_url": "https://api.github.com/users/larsoner/gists{/gist_id}", "starred_url": "https://api.github.com/users/larsoner/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/larsoner/subscriptions", "organizations_url": "https://api.github.com/users/larsoner/orgs", "repos_url": "https://api.github.com/users/larsoner/repos", "events_url": "https://api.github.com/users/larsoner/events{/privacy}", "received_events_url": "https://api.github.com/users/larsoner/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 58, "state": "closed", "created_at": "2020-12-01T18:47:16Z", "updated_at": "2021-04-27T19:32:01Z", "due_on": "2021-05-15T07:00:00Z", "closed_at": "2021-04-27T19:32:01Z"}, "comments": 0, "created_at": "2021-04-05T18:52:51Z", "updated_at": "2021-04-06T18:45:56Z", "closed_at": "2021-04-06T18:45:56Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "Doing:\r\n```\r\nmne.viz.plot_alignment(mne.io.read_raw_egi('test_egi.mff').info, show_axes=True, dig=True, eeg=True, coord_frame='head')\r\n```\r\ngets sensor positions plus LPA/Nasion/RPA (good), but not transformed to the head coordinate frame (bad):\r\n\r\n![Screenshot from 2021-04-05 14-48-36](https://user-images.githubusercontent.com/2365790/113612958-833e1000-961e-11eb-9517-a58e348aa698.png)\r\n\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/9250/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9250/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/9248", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9248/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9248/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9248/events", "html_url": "https://github.com/mne-tools/mne-python/pull/9248", "id": 850492248, "node_id": "MDExOlB1bGxSZXF1ZXN0NjA5MDU2OTUw", "number": 9248, "title": "expose colorbar label parameter in plot_sensors_connectivity", "user": {"login": "drammock", "id": 1810515, "node_id": "MDQ6VXNlcjE4MTA1MTU=", "avatar_url": "https://avatars.githubusercontent.com/u/1810515?v=4", "gravatar_id": "", "url": "https://api.github.com/users/drammock", "html_url": "https://github.com/drammock", "followers_url": "https://api.github.com/users/drammock/followers", "following_url": "https://api.github.com/users/drammock/following{/other_user}", "gists_url": "https://api.github.com/users/drammock/gists{/gist_id}", "starred_url": "https://api.github.com/users/drammock/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/drammock/subscriptions", "organizations_url": "https://api.github.com/users/drammock/orgs", "repos_url": "https://api.github.com/users/drammock/repos", "events_url": "https://api.github.com/users/drammock/events{/privacy}", "received_events_url": "https://api.github.com/users/drammock/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}, {"id": 1290799321, "node_id": "MDU6TGFiZWwxMjkwNzk5MzIx", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/VIZ", "name": "VIZ", "color": "22e861", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2021-04-05T16:35:19Z", "updated_at": "2021-04-05T21:16:37Z", "closed_at": "2021-04-05T21:16:31Z", "author_association": "MEMBER", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/mne-tools/mne-python/pulls/9248", "html_url": "https://github.com/mne-tools/mne-python/pull/9248", "diff_url": "https://github.com/mne-tools/mne-python/pull/9248.diff", "patch_url": "https://github.com/mne-tools/mne-python/pull/9248.patch", "merged_at": "2021-04-05T21:16:31Z"}, "body": "closes #9228 \r\n\r\nNote that I couldn't figure out how to test this when backend is Mayavi.", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/9248/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9248/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/9234", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9234/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9234/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9234/events", "html_url": "https://github.com/mne-tools/mne-python/issues/9234", "id": 848611651, "node_id": "MDU6SXNzdWU4NDg2MTE2NTE=", "number": 9234, "title": "BUG: apply_function arg/kwarg handling", "user": {"login": "drammock", "id": 1810515, "node_id": "MDQ6VXNlcjE4MTA1MTU=", "avatar_url": "https://avatars.githubusercontent.com/u/1810515?v=4", "gravatar_id": "", "url": "https://api.github.com/users/drammock", "html_url": "https://github.com/drammock", "followers_url": "https://api.github.com/users/drammock/followers", "following_url": "https://api.github.com/users/drammock/following{/other_user}", "gists_url": "https://api.github.com/users/drammock/gists{/gist_id}", "starred_url": "https://api.github.com/users/drammock/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/drammock/subscriptions", "organizations_url": "https://api.github.com/users/drammock/orgs", "repos_url": "https://api.github.com/users/drammock/repos", "events_url": "https://api.github.com/users/drammock/events{/privacy}", "received_events_url": "https://api.github.com/users/drammock/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "drammock", "id": 1810515, "node_id": "MDQ6VXNlcjE4MTA1MTU=", "avatar_url": "https://avatars.githubusercontent.com/u/1810515?v=4", "gravatar_id": "", "url": "https://api.github.com/users/drammock", "html_url": "https://github.com/drammock", "followers_url": "https://api.github.com/users/drammock/followers", "following_url": "https://api.github.com/users/drammock/following{/other_user}", "gists_url": "https://api.github.com/users/drammock/gists{/gist_id}", "starred_url": "https://api.github.com/users/drammock/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/drammock/subscriptions", "organizations_url": "https://api.github.com/users/drammock/orgs", "repos_url": "https://api.github.com/users/drammock/repos", "events_url": "https://api.github.com/users/drammock/events{/privacy}", "received_events_url": "https://api.github.com/users/drammock/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "drammock", "id": 1810515, "node_id": "MDQ6VXNlcjE4MTA1MTU=", "avatar_url": "https://avatars.githubusercontent.com/u/1810515?v=4", "gravatar_id": "", "url": "https://api.github.com/users/drammock", "html_url": "https://github.com/drammock", "followers_url": "https://api.github.com/users/drammock/followers", "following_url": "https://api.github.com/users/drammock/following{/other_user}", "gists_url": "https://api.github.com/users/drammock/gists{/gist_id}", "starred_url": "https://api.github.com/users/drammock/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/drammock/subscriptions", "organizations_url": "https://api.github.com/users/drammock/orgs", "repos_url": "https://api.github.com/users/drammock/repos", "events_url": "https://api.github.com/users/drammock/events{/privacy}", "received_events_url": "https://api.github.com/users/drammock/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 5, "created_at": "2021-04-01T16:24:09Z", "updated_at": "2021-04-05T14:43:30Z", "closed_at": "2021-04-05T14:43:30Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "`raw/epochs/evoked.apply_function` all have an `*args, **kwargs` in their signatures. But they don't work the way I think they should / the docs are rather misleading. Preparation:\r\n\r\n```py\r\nimport os\r\nimport mne\r\nfrom scipy.ndimage import gaussian_filter\r\n\r\nsample_data_folder = mne.datasets.sample.data_path()\r\nsample_data_raw_file = os.path.join(sample_data_folder, 'MEG', 'sample',\r\n                                    'sample_audvis_raw.fif')\r\nraw = mne.io.read_raw_fif(sample_data_raw_file, verbose=False, preload=False)\r\nraw.crop(tmax=5).load_data()\r\n```\r\n\r\n`gaussian_filter1d` requires a `sigma` parameter in addition to the data. This works as expected:\r\n```py\r\nraw.apply_function(gaussian_filter1d, sigma=4)\r\n```\r\nThis also works:\r\n```py\r\nkwargs = dict(sigma=4)\r\nraw.apply_function(gaussian_filter1d, **kwargs)\r\n```\r\n\r\nThis next one is expected to fail **if you already know how argument unpacking works**, and does fail (`4.` is passed as `picks` param of `apply_function`, so you get `picks must be a list of int or list of str, got a data type of float64`):\r\n```py\r\nargs = (4.,)\r\nraw.apply_function(gaussian_filter1d, *args)\r\n```\r\nBut note that if `args = (4,)` (int instead of float) you get a different error, that `gaussian_filter1d` is missing required argument `sigma`).  From the perspective of a new user, this is really bad: `*args` is in the docstring, so I pass in `*args` and it fails, in 2 different ways depending on what seems like a trivial difference in input.\r\n\r\nThis also fails (`gaussian_filter1d() got an unexpected keyword argument 'args'`) though might have been expected/tried by a new user:\r\n```py\r\nargs = (4.,)\r\nraw.apply_function(gaussian_filter1d, args=args)\r\n```\r\n\r\nThis also fails due to python syntax restrictions, but might have been expected to work based on the docstring:\r\n```py\r\nraw.apply_function(gaussian_filter1d, verbose=None, *args)\r\n```\r\n\r\nSo in sum we don't actually support passing `args` to the applied function.  Possible solutions:\r\n\r\n1. change function signature from `*args, *kwargs` to `args, kwargs`, and accept only tuples for `args` and only dicts for `kwargs`\r\n2. drop `*args` from the function signature, leave kwarg handling as it is\r\n", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/9234/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9234/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/9228", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9228/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9228/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9228/events", "html_url": "https://github.com/mne-tools/mne-python/issues/9228", "id": 846899347, "node_id": "MDU6SXNzdWU4NDY4OTkzNDc=", "number": 9228, "title": "Image title of spectral connectivity", "user": {"login": "isabelceo-dot", "id": 81702130, "node_id": "MDQ6VXNlcjgxNzAyMTMw", "avatar_url": "https://avatars.githubusercontent.com/u/81702130?v=4", "gravatar_id": "", "url": "https://api.github.com/users/isabelceo-dot", "html_url": "https://github.com/isabelceo-dot", "followers_url": "https://api.github.com/users/isabelceo-dot/followers", "following_url": "https://api.github.com/users/isabelceo-dot/following{/other_user}", "gists_url": "https://api.github.com/users/isabelceo-dot/gists{/gist_id}", "starred_url": "https://api.github.com/users/isabelceo-dot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/isabelceo-dot/subscriptions", "organizations_url": "https://api.github.com/users/isabelceo-dot/orgs", "repos_url": "https://api.github.com/users/isabelceo-dot/repos", "events_url": "https://api.github.com/users/isabelceo-dot/events{/privacy}", "received_events_url": "https://api.github.com/users/isabelceo-dot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}, {"id": 1290799321, "node_id": "MDU6TGFiZWwxMjkwNzk5MzIx", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/VIZ", "name": "VIZ", "color": "22e861", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2021-03-31T15:58:02Z", "updated_at": "2021-04-06T08:35:35Z", "closed_at": "2021-04-05T21:16:31Z", "author_association": "NONE", "active_lock_reason": null, "body": "There is a bug on the title of spectral connectivity the colorbar (always shows PLI method). Probably this is a relic of a time when phase lag index was the only measure you offered. See discussion here: https://mne.discourse.group/t/image-title-of-spectal-connectivity/2905", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/9228/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9228/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/9225", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9225/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9225/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9225/events", "html_url": "https://github.com/mne-tools/mne-python/issues/9225", "id": 845196519, "node_id": "MDU6SXNzdWU4NDUxOTY1MTk=", "number": 9225, "title": "mne.preprocessing.find_ecg_events has a non-descript error when it can't detect ecg events", "user": {"login": "CJ-Wave", "id": 70730289, "node_id": "MDQ6VXNlcjcwNzMwMjg5", "avatar_url": "https://avatars.githubusercontent.com/u/70730289?v=4", "gravatar_id": "", "url": "https://api.github.com/users/CJ-Wave", "html_url": "https://github.com/CJ-Wave", "followers_url": "https://api.github.com/users/CJ-Wave/followers", "following_url": "https://api.github.com/users/CJ-Wave/following{/other_user}", "gists_url": "https://api.github.com/users/CJ-Wave/gists{/gist_id}", "starred_url": "https://api.github.com/users/CJ-Wave/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/CJ-Wave/subscriptions", "organizations_url": "https://api.github.com/users/CJ-Wave/orgs", "repos_url": "https://api.github.com/users/CJ-Wave/repos", "events_url": "https://api.github.com/users/CJ-Wave/events{/privacy}", "received_events_url": "https://api.github.com/users/CJ-Wave/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "hoechenberger", "id": 2046265, "node_id": "MDQ6VXNlcjIwNDYyNjU=", "avatar_url": "https://avatars.githubusercontent.com/u/2046265?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hoechenberger", "html_url": "https://github.com/hoechenberger", "followers_url": "https://api.github.com/users/hoechenberger/followers", "following_url": "https://api.github.com/users/hoechenberger/following{/other_user}", "gists_url": "https://api.github.com/users/hoechenberger/gists{/gist_id}", "starred_url": "https://api.github.com/users/hoechenberger/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hoechenberger/subscriptions", "organizations_url": "https://api.github.com/users/hoechenberger/orgs", "repos_url": "https://api.github.com/users/hoechenberger/repos", "events_url": "https://api.github.com/users/hoechenberger/events{/privacy}", "received_events_url": "https://api.github.com/users/hoechenberger/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "hoechenberger", "id": 2046265, "node_id": "MDQ6VXNlcjIwNDYyNjU=", "avatar_url": "https://avatars.githubusercontent.com/u/2046265?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hoechenberger", "html_url": "https://github.com/hoechenberger", "followers_url": "https://api.github.com/users/hoechenberger/followers", "following_url": "https://api.github.com/users/hoechenberger/following{/other_user}", "gists_url": "https://api.github.com/users/hoechenberger/gists{/gist_id}", "starred_url": "https://api.github.com/users/hoechenberger/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hoechenberger/subscriptions", "organizations_url": "https://api.github.com/users/hoechenberger/orgs", "repos_url": "https://api.github.com/users/hoechenberger/repos", "events_url": "https://api.github.com/users/hoechenberger/events{/privacy}", "received_events_url": "https://api.github.com/users/hoechenberger/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 1, "created_at": "2021-03-30T20:19:51Z", "updated_at": "2021-04-02T17:19:58Z", "closed_at": "2021-04-02T17:19:58Z", "author_association": "NONE", "active_lock_reason": null, "body": "#### Describe the bug\r\nmne.preprocessing.find_ecg_events has a non-descript error when it can't detect ecg events\r\n\r\n\r\n#### Steps to reproduce\r\nShould work with just a straight line or zeros in an ECG channel. \r\n\r\n\r\n#### Expected results\r\nEither return an empty array or generate a more descriptive error message\r\n\r\n\r\n#### Actual results\r\nline 230, in find_ecg_events\r\n    ecg_events = remap[ecg_events]\r\nIndexError: arrays used as indices must be of integer (or boolean) type\r\n\r\n(This is because ecg_events is None)\r\n#### Additional information\r\nPlatform:      Windows-10-10.0.19041-SP0\r\nPython:        3.7.9 (default, Aug 31 2020, 17:10:11) [MSC v.1916 64 bit (AMD64)]\r\nExecutable:   ...python.exe\r\nCPU:           Intel64 Family 6 Model 158 Stepping 13, GenuineIntel: 8 cores\r\nMemory:        Unavailable (requires \"psutil\" package)\r\nmne:           0.22.0\r\nnumpy:         1.19.2 {blas=mkl_rt, lapack=mkl_rt}\r\nscipy:         1.5.2\r\nmatplotlib:    3.3.2 {backend=Qt5Agg}\r\nsklearn:       0.24.1\r\nnumba:         0.52.0\r\nnibabel:       Not found\r\nnilearn:       Not found\r\ndipy:          Not found\r\ncupy:          Not found\r\npandas:        1.1.5\r\nmayavi:        Not found\r\npyvista:       Not found\r\nvtk:           Not found\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/9225/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9225/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/9222", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9222/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9222/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9222/events", "html_url": "https://github.com/mne-tools/mne-python/issues/9222", "id": 844869146, "node_id": "MDU6SXNzdWU4NDQ4NjkxNDY=", "number": 9222, "title": "docstring rendering problem", "user": {"login": "drammock", "id": 1810515, "node_id": "MDQ6VXNlcjE4MTA1MTU=", "avatar_url": "https://avatars.githubusercontent.com/u/1810515?v=4", "gravatar_id": "", "url": "https://api.github.com/users/drammock", "html_url": "https://github.com/drammock", "followers_url": "https://api.github.com/users/drammock/followers", "following_url": "https://api.github.com/users/drammock/following{/other_user}", "gists_url": "https://api.github.com/users/drammock/gists{/gist_id}", "starred_url": "https://api.github.com/users/drammock/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/drammock/subscriptions", "organizations_url": "https://api.github.com/users/drammock/orgs", "repos_url": "https://api.github.com/users/drammock/repos", "events_url": "https://api.github.com/users/drammock/events{/privacy}", "received_events_url": "https://api.github.com/users/drammock/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 40091538, "node_id": "MDU6TGFiZWw0MDA5MTUzOA==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/DOC", "name": "DOC", "color": "009800", "default": false, "description": null}, {"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/mne-tools/mne-python/milestones/19", "html_url": "https://github.com/mne-tools/mne-python/milestone/19", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/milestones/19/labels", "id": 6168664, "node_id": "MDk6TWlsZXN0b25lNjE2ODY2NA==", "number": 19, "title": "0.23", "description": "", "creator": {"login": "larsoner", "id": 2365790, "node_id": "MDQ6VXNlcjIzNjU3OTA=", "avatar_url": "https://avatars.githubusercontent.com/u/2365790?v=4", "gravatar_id": "", "url": "https://api.github.com/users/larsoner", "html_url": "https://github.com/larsoner", "followers_url": "https://api.github.com/users/larsoner/followers", "following_url": "https://api.github.com/users/larsoner/following{/other_user}", "gists_url": "https://api.github.com/users/larsoner/gists{/gist_id}", "starred_url": "https://api.github.com/users/larsoner/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/larsoner/subscriptions", "organizations_url": "https://api.github.com/users/larsoner/orgs", "repos_url": "https://api.github.com/users/larsoner/repos", "events_url": "https://api.github.com/users/larsoner/events{/privacy}", "received_events_url": "https://api.github.com/users/larsoner/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 58, "state": "closed", "created_at": "2020-12-01T18:47:16Z", "updated_at": "2021-04-27T19:32:01Z", "due_on": "2021-05-15T07:00:00Z", "closed_at": "2021-04-27T19:32:01Z"}, "comments": 0, "created_at": "2021-03-30T16:48:01Z", "updated_at": "2021-04-01T21:01:28Z", "closed_at": "2021-04-01T21:01:28Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "I'm seeing a rendering problem related to responsive layout:\r\n\r\nhttps://user-images.githubusercontent.com/2046265/112759858-31c9cb80-8ff5-11eb-8615-c047bf8e8213.mov\r\n\r\n_Originally posted by @hoechenberger in https://github.com/mne-tools/mne-python/issues/8876#issuecomment-808922304_", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/9222/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9222/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/9214", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9214/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9214/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9214/events", "html_url": "https://github.com/mne-tools/mne-python/issues/9214", "id": 843491530, "node_id": "MDU6SXNzdWU4NDM0OTE1MzA=", "number": 9214, "title": "epochs.add_channels does not update picks", "user": {"login": "agramfort", "id": 161052, "node_id": "MDQ6VXNlcjE2MTA1Mg==", "avatar_url": "https://avatars.githubusercontent.com/u/161052?v=4", "gravatar_id": "", "url": "https://api.github.com/users/agramfort", "html_url": "https://github.com/agramfort", "followers_url": "https://api.github.com/users/agramfort/followers", "following_url": "https://api.github.com/users/agramfort/following{/other_user}", "gists_url": "https://api.github.com/users/agramfort/gists{/gist_id}", "starred_url": "https://api.github.com/users/agramfort/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/agramfort/subscriptions", "organizations_url": "https://api.github.com/users/agramfort/orgs", "repos_url": "https://api.github.com/users/agramfort/repos", "events_url": "https://api.github.com/users/agramfort/events{/privacy}", "received_events_url": "https://api.github.com/users/agramfort/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2021-03-29T15:33:40Z", "updated_at": "2021-04-13T07:14:23Z", "closed_at": "2021-04-13T07:14:23Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "running \r\n\r\n\r\n```\r\nimport os\r\nimport mne\r\n\r\ndata_path = mne.datasets.sample.data_path()\r\nsubjects_dir = os.path.join(data_path, \"subjects\")\r\ndata_dir = os.path.join(data_path, 'MEG', 'sample')\r\nraw_fname = os.path.join(data_dir, 'sample_audvis_raw.fif')\r\n\r\nraw = mne.io.read_raw_fif(raw_fname, verbose=False)\r\nraw.pick([2, 3, 310])  # take some MEG and EEG\r\nraw.crop(0, 15)  # take litte data\r\n\r\nevents = mne.make_fixed_length_events(raw, id=3000, start=0)\r\nepochs = mne.Epochs(raw, events, event_id=3000, tmin=0, tmax=3,\r\n                    proj=True, baseline=None, reject=None, preload=True,\r\n                    decim=1)\r\n\r\nepochs_final = epochs.copy()\r\nepochs_bis = epochs.copy().rename_channels(lambda ch : ch + '_bis')\r\nepochs_final.add_channels([epochs_bis], force_update_info=True)\r\nepochs_final.drop_channels(epochs.ch_names)\r\n```\r\n\r\non current main branch crashes. It seems that add_channels forgets to update the picks\r\nattribute.\r\n\r\n@larsoner wdyt?", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/9214/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9214/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/9205", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9205/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9205/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9205/events", "html_url": "https://github.com/mne-tools/mne-python/issues/9205", "id": 842557134, "node_id": "MDU6SXNzdWU4NDI1NTcxMzQ=", "number": 9205, "title": "ENH/BUG: Adding an include/exclude bad channels parameter to plot_evoked_topo", "user": {"login": "ramkpari", "id": 13279036, "node_id": "MDQ6VXNlcjEzMjc5MDM2", "avatar_url": "https://avatars.githubusercontent.com/u/13279036?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ramkpari", "html_url": "https://github.com/ramkpari", "followers_url": "https://api.github.com/users/ramkpari/followers", "following_url": "https://api.github.com/users/ramkpari/following{/other_user}", "gists_url": "https://api.github.com/users/ramkpari/gists{/gist_id}", "starred_url": "https://api.github.com/users/ramkpari/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ramkpari/subscriptions", "organizations_url": "https://api.github.com/users/ramkpari/orgs", "repos_url": "https://api.github.com/users/ramkpari/repos", "events_url": "https://api.github.com/users/ramkpari/events{/privacy}", "received_events_url": "https://api.github.com/users/ramkpari/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2021-03-27T16:59:04Z", "updated_at": "2021-04-15T19:30:47Z", "closed_at": "2021-04-15T19:30:47Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Was working on `plot_evoked_topo` ,about issue #8714 with @jasmainak when I noticed that bad channels were influencing ylim calculations when no ylim parameters were specified during the function call.  Currently , The plots from `plot_evoked_topo` are automatically set to not plot any of the bad channels and also there is no direct way to force `plot_evoked_topo`  to include the bad channels without removing the channels from `info['bads']` or with picks. \r\n\r\nOne thing that we were thinking while fixing the bug was to maybe add a include/exclude parameter to the function to explicitly include or exclude the bad channels in the plot that it produces.  Thoughts? \r\n\r\n@larsoner @agramfort @sappelhoff @drammock \r\n\r\n\r\n#### Steps to reproduce\r\n```python\r\nimport numpy as np\r\n\r\nimport mne\r\n\r\n\r\nfrom mne.datasets import sample\r\n\r\ndata_path = sample.data_path()\r\n\r\nfname = data_path + '/MEG/sample/sample_audvis-ave.fif'\r\n\r\n# Reading evoked data\r\ncondition = 'Left Auditory'\r\nevoked = mne.read_evokeds(fname, condition=condition, baseline=(None, 0),\r\n                          proj=False)\r\n\r\nevoked.plot_topo()\r\n```\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/9205/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9205/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/9198", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9198/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9198/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9198/events", "html_url": "https://github.com/mne-tools/mne-python/issues/9198", "id": 841756283, "node_id": "MDU6SXNzdWU4NDE3NTYyODM=", "number": 9198, "title": "linear regression", "user": {"login": "virvw", "id": 7391778, "node_id": "MDQ6VXNlcjczOTE3Nzg=", "avatar_url": "https://avatars.githubusercontent.com/u/7391778?v=4", "gravatar_id": "", "url": "https://api.github.com/users/virvw", "html_url": "https://github.com/virvw", "followers_url": "https://api.github.com/users/virvw/followers", "following_url": "https://api.github.com/users/virvw/following{/other_user}", "gists_url": "https://api.github.com/users/virvw/gists{/gist_id}", "starred_url": "https://api.github.com/users/virvw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/virvw/subscriptions", "organizations_url": "https://api.github.com/users/virvw/orgs", "repos_url": "https://api.github.com/users/virvw/repos", "events_url": "https://api.github.com/users/virvw/events{/privacy}", "received_events_url": "https://api.github.com/users/virvw/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2021-03-26T09:25:19Z", "updated_at": "2021-10-26T12:37:56Z", "closed_at": "2021-10-26T12:37:56Z", "author_association": "NONE", "active_lock_reason": null, "body": "### Describe the bug\r\nlinear_regressions\r\ndevelopper\r\nworked fine a few days ago\r\nno mne update since\r\nnow bug\r\n#### Steps to reproduce\r\n```python\r\n  pred_vars = ['TOJ - SJ', 'N_1', 'intercept']\r\n  design = epos.metadata[['task', 'N_1']].copy()\r\n  design['TOJ - SJ']  = np.where(design['task'] == 'TOJ', 1, -1)\r\n  design['intercept'] = 1\r\n  design = design[pred_vars]\r\n  reg = linear_regression(epos, design_matrix=design, names=pred_vars)\r\n```\r\n#### Expected results\r\noutcomes of reg\r\n#### Actual results\r\n```python\r\n-----------------------------------------------------------------------------------------------------------\r\nFitting linear model to epochs, (214506 targets, 3 regressors)\r\nTraceback (most recent call last):\r\n  File \"<ipython-input-93-7be722fdd449>\", line 1, in <module>\r\n    reg = linear_regression(epos, design_matrix=design, names=pred_vars)\r\n  File \"C:\\Users\\vv221713\\Anaconda3\\envs\\mne\\lib\\site-packages\\mne\\stats\\regression.py\", line 85, in linear_regression\r\n    lm_params = _fit_lm(data, design_matrix, names)\r\n  File \"C:\\Users\\vv221713\\Anaconda3\\envs\\mne\\lib\\site-packages\\mne\\stats\\regression.py\", line 118, in _fit_lm\r\n    betas, resid_sum_squares, _, _ = linalg.lstsq(a=design_matrix, b=y)\r\n  File \"C:\\Users\\vv221713\\Anaconda3\\envs\\mne\\lib\\site-packages\\scipy\\linalg\\basic.py\", line 1155, in lstsq\r\n    a1 = _asarray_validated(a, check_finite=check_finite)\r\n  File \"C:\\Users\\vv221713\\Anaconda3\\envs\\mne\\lib\\site-packages\\scipy\\_lib\\_util.py\", line 266, in _asarray_validated\r\n    raise ValueError('object arrays are not supported')\r\nValueError: object arrays are not supported\r\n-----------------------------------------------------------------------------------------------------------\r\n```\r\n#### Additional information\r\nwindows and linux\r\nwin\r\n```\r\n(mne) C:\\Users\\vv221713>python -c \"import mne; mne.sys_info()\"\r\nPlatform:      Windows-10-10.0.18362-SP0\r\nPython:        3.8.5 (default, Sep  3 2020, 21:29:08) [MSC v.1916 64 bit (AMD64)]\r\nExecutable:    C:\\Users\\vv221713\\Anaconda3\\envs\\mne\\python.exe\r\nCPU:           Intel64 Family 6 Model 142 Stepping 12, GenuineIntel: 8 cores\r\nMemory:        15.6 GB\r\nmne:           0.22.dev0\r\nnumpy:         1.19.2 {blas=mkl_rt, lapack=mkl_rt}\r\nscipy:         1.5.2\r\nmatplotlib:    3.3.2 {backend=Qt5Agg}\r\nsklearn:       0.23.2\r\nnumba:         0.51.2\r\nnibabel:       3.2.0\r\ncupy:          Not found\r\npandas:        1.1.3\r\ndipy:          1.3.0\r\nmayavi:        4.7.2\r\npyvista:       0.27.2 {pyvistaqt=0.2.0, OpenGL 4.5.0 - Build 26.20.100.7755 via Intel(R) UHD Graphics}\r\nvtk:           9.0.1\r\nPyQt5:         5.15.1\r\n```\r\nlinux\r\n```\r\nPython:        3.8.5 (default, Sep  3 2020, 21:29:08) [MSC v.1916 64 bit (AMD64)]\r\nExecutable:    C:\\Users\\vv221713\\Anaconda3\\envs\\mne\\python.exe\r\nCPU:           Intel64 Family 6 Model 142 Stepping 12, GenuineIntel: 8 cores\r\nMemory:        15.6 GB\r\nmne:           0.22.dev0\r\nnumpy:         1.19.2 {blas=mkl_rt, lapack=mkl_rt}\r\nscipy:         1.5.2\r\nmatplotlib:    3.3.2 {backend=Qt5Agg}\r\nsklearn:       0.23.2\r\nnumba:         0.51.2\r\nnibabel:       3.2.0\r\ncupy:          Not found\r\npandas:        1.1.3\r\ndipy:          1.3.0\r\nmayavi:        4.7.2 (edited) \r\n```", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/9198/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9198/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/9193", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9193/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9193/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9193/events", "html_url": "https://github.com/mne-tools/mne-python/issues/9193", "id": 840631275, "node_id": "MDU6SXNzdWU4NDA2MzEyNzU=", "number": 9193, "title": "Crashes when using read_epochs_eeglab on files with only one trial.", "user": {"login": "jackz314", "id": 18280101, "node_id": "MDQ6VXNlcjE4MjgwMTAx", "avatar_url": "https://avatars.githubusercontent.com/u/18280101?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jackz314", "html_url": "https://github.com/jackz314", "followers_url": "https://api.github.com/users/jackz314/followers", "following_url": "https://api.github.com/users/jackz314/following{/other_user}", "gists_url": "https://api.github.com/users/jackz314/gists{/gist_id}", "starred_url": "https://api.github.com/users/jackz314/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jackz314/subscriptions", "organizations_url": "https://api.github.com/users/jackz314/orgs", "repos_url": "https://api.github.com/users/jackz314/repos", "events_url": "https://api.github.com/users/jackz314/events{/privacy}", "received_events_url": "https://api.github.com/users/jackz314/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2021-03-25T07:07:50Z", "updated_at": "2021-04-05T20:10:47Z", "closed_at": "2021-04-05T20:10:33Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "#### Describe the bug\r\nWhen reading in single trial EEGLAB files as epochs, MNE will crash when initializing `EpochsEEGLAB`. This is because the trial count is 1, so creating the `event_id` dict is skipped, and when [this line](https://github.com/mne-tools/mne-python/blob/13a0de51bd0f13113d866e73522fb60bdde37809/mne/io/eeglab/eeglab.py#L507) references `event_id`, an `AttributeError` will be thrown. Like this one:\r\n\r\n```\r\ntest_epochs.py:3046: in test_save_set\r\n    epochs_read = read_epochs_eeglab(temp_fname)\r\n../io/eeglab/eeglab.py:275: in read_epochs_eeglab\r\n    epochs = EpochsEEGLAB(input_fname=input_fname, events=events, eog=eog,\r\n<decorator-gen-240>:24: in __init__\r\n    ???\r\n../io/eeglab/eeglab.py:507: in __init__\r\n    for key, val in event_id.items():\r\nE   AttributeError: 'NoneType' object has no attribute 'items'\r\n```\r\n\r\n\r\n#### Steps to reproduce\r\nI discovered this when writing tests for my PR #9192, I was following another similar test [`test_save_complex_data` ](https://github.com/mne-tools/mne-python/blob/13a0de51bd0f13113d866e73522fb60bdde37809/mne/tests/test_epochs.py#L3017) that also saves single-trial epochs to a file and reads it back as a test. I simply wrote the same data into an EEGLAB set file and read it back. Alternatively, you can also try `read_epochs_eeglab` on any single-trial set file.\r\n\r\n\r\n#### Expected results\r\nSince single-trial epochs aren't really useful or meaningful (from my understanding so far), I understand if this isn't supported, but some better clarifications on this would probably make more sense to other people, for example, throwing another exception specifically for single-trial data when attempting `read_epochs`. \r\n\r\n\r\n#### Actual results\r\nN/A\r\n\r\n\r\n#### Additional information\r\nPlatform:      Linux-5.8.0-45-generic-x86_64-with-glibc2.32\r\nPython:        3.8.6 (default, Jan 27 2021, 15:42:20)  [GCC 10.2.0]\r\nExecutable:    /usr/bin/python\r\nCPU:           x86_64: 8 cores\r\nMemory:        31.3 GB\r\n\r\nmne:           0.23.dev0\r\nnumpy:         1.19.5 {blas=openblas, lapack=openblas}\r\nscipy:         1.4.1\r\nmatplotlib:    3.3.4 {backend=Qt5Agg}\r\n\r\nsklearn:       0.24.1\r\nnumba:         0.52.0\r\nnibabel:       Not found\r\nnilearn:       Not found\r\ndipy:          Not found\r\ncupy:          8.5.0\r\npandas:        1.1.4\r\nmayavi:        Not found\r\npyvista:       Not found\r\nvtk:           Not found\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/9193/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9193/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/9186", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9186/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9186/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9186/events", "html_url": "https://github.com/mne-tools/mne-python/issues/9186", "id": 838778473, "node_id": "MDU6SXNzdWU4Mzg3Nzg0NzM=", "number": 9186, "title": "Reading EDF file yields incorrect scaling", "user": {"login": "hoechenberger", "id": 2046265, "node_id": "MDQ6VXNlcjIwNDYyNjU=", "avatar_url": "https://avatars.githubusercontent.com/u/2046265?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hoechenberger", "html_url": "https://github.com/hoechenberger", "followers_url": "https://api.github.com/users/hoechenberger/followers", "following_url": "https://api.github.com/users/hoechenberger/following{/other_user}", "gists_url": "https://api.github.com/users/hoechenberger/gists{/gist_id}", "starred_url": "https://api.github.com/users/hoechenberger/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hoechenberger/subscriptions", "organizations_url": "https://api.github.com/users/hoechenberger/orgs", "repos_url": "https://api.github.com/users/hoechenberger/repos", "events_url": "https://api.github.com/users/hoechenberger/events{/privacy}", "received_events_url": "https://api.github.com/users/hoechenberger/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 8, "created_at": "2021-03-23T14:20:30Z", "updated_at": "2021-03-25T15:28:32Z", "closed_at": "2021-03-25T15:28:32Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "Reported on the forum:\r\nhttps://mne.discourse.group/t/eeg-data-in-edf-not-converting-in-volt/\r\n\r\nThe user provided an EDF file which specifies in its header that the data is in \u00b5V. When reading this file with MNE-Python, the data is treated as V.\r\n", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/9186/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9186/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/9125", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9125/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9125/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9125/events", "html_url": "https://github.com/mne-tools/mne-python/issues/9125", "id": 833881484, "node_id": "MDU6SXNzdWU4MzM4ODE0ODQ=", "number": 9125, "title": "AverageTFR.plot() only plots one channel", "user": {"login": "cbrnr", "id": 4377312, "node_id": "MDQ6VXNlcjQzNzczMTI=", "avatar_url": "https://avatars.githubusercontent.com/u/4377312?v=4", "gravatar_id": "", "url": "https://api.github.com/users/cbrnr", "html_url": "https://github.com/cbrnr", "followers_url": "https://api.github.com/users/cbrnr/followers", "following_url": "https://api.github.com/users/cbrnr/following{/other_user}", "gists_url": "https://api.github.com/users/cbrnr/gists{/gist_id}", "starred_url": "https://api.github.com/users/cbrnr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/cbrnr/subscriptions", "organizations_url": "https://api.github.com/users/cbrnr/orgs", "repos_url": "https://api.github.com/users/cbrnr/repos", "events_url": "https://api.github.com/users/cbrnr/events{/privacy}", "received_events_url": "https://api.github.com/users/cbrnr/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/mne-tools/mne-python/milestones/20", "html_url": "https://github.com/mne-tools/mne-python/milestone/20", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/milestones/20/labels", "id": 6675015, "node_id": "MDk6TWlsZXN0b25lNjY3NTAxNQ==", "number": 20, "title": "0.24", "description": "", "creator": {"login": "larsoner", "id": 2365790, "node_id": "MDQ6VXNlcjIzNjU3OTA=", "avatar_url": "https://avatars.githubusercontent.com/u/2365790?v=4", "gravatar_id": "", "url": "https://api.github.com/users/larsoner", "html_url": "https://github.com/larsoner", "followers_url": "https://api.github.com/users/larsoner/followers", "following_url": "https://api.github.com/users/larsoner/following{/other_user}", "gists_url": "https://api.github.com/users/larsoner/gists{/gist_id}", "starred_url": "https://api.github.com/users/larsoner/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/larsoner/subscriptions", "organizations_url": "https://api.github.com/users/larsoner/orgs", "repos_url": "https://api.github.com/users/larsoner/repos", "events_url": "https://api.github.com/users/larsoner/events{/privacy}", "received_events_url": "https://api.github.com/users/larsoner/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 53, "state": "closed", "created_at": "2021-04-19T12:32:46Z", "updated_at": "2021-11-03T16:14:55Z", "due_on": "2021-11-01T07:00:00Z", "closed_at": "2021-11-03T16:14:55Z"}, "comments": 6, "created_at": "2021-03-17T15:03:27Z", "updated_at": "2021-08-02T14:10:32Z", "closed_at": "2021-08-02T14:10:31Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Although [`AverageTFR.plot()`](https://mne.tools/stable/generated/mne.time_frequency.AverageTFR.html?highlight=averagetfr#mne.time_frequency.AverageTFR.plot) has a `picks` argument, only the first channel is plotted. I don't think this is by design - or is it? If so, then at least the docstring is confusing, because it explicitly mentions that `None` selects all good channels and `\"all\"` selects all channels.\r\n\r\n```python\r\nimport numpy as np\r\nimport mne\r\n\r\n\r\nn_chans = 10\r\nn_epochs = 100\r\ntmin, tmax = -2, 5\r\nfs = 256\r\ninfo = mne.create_info(n_chans, fs, \"eeg\")\r\ndata = np.random.rand(n_epochs, n_chans, (abs(tmin) + abs(tmax)) * fs + 1)\r\nepochs = mne.EpochsArray(data, info, tmin=tmin)\r\n\r\nfreqs = np.arange(1, 51)\r\n\r\ntfr = mne.time_frequency.tfr_multitaper(epochs, freqs=freqs, n_cycles=freqs,\r\n                                        average=False, return_itc=False)\r\ntfr.average().plot()\r\n```", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/9125/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9125/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/9101", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9101/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9101/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9101/events", "html_url": "https://github.com/mne-tools/mne-python/issues/9101", "id": 832800517, "node_id": "MDU6SXNzdWU4MzI4MDA1MTc=", "number": 9101, "title": "BUG: parse_folder() with n_jobs>1 for mne.Report causes attribute-error", "user": {"login": "marsipu", "id": 46245704, "node_id": "MDQ6VXNlcjQ2MjQ1NzA0", "avatar_url": "https://avatars.githubusercontent.com/u/46245704?v=4", "gravatar_id": "", "url": "https://api.github.com/users/marsipu", "html_url": "https://github.com/marsipu", "followers_url": "https://api.github.com/users/marsipu/followers", "following_url": "https://api.github.com/users/marsipu/following{/other_user}", "gists_url": "https://api.github.com/users/marsipu/gists{/gist_id}", "starred_url": "https://api.github.com/users/marsipu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/marsipu/subscriptions", "organizations_url": "https://api.github.com/users/marsipu/orgs", "repos_url": "https://api.github.com/users/marsipu/repos", "events_url": "https://api.github.com/users/marsipu/events{/privacy}", "received_events_url": "https://api.github.com/users/marsipu/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2021-03-16T13:28:53Z", "updated_at": "2021-03-17T13:07:56Z", "closed_at": "2021-03-17T13:07:56Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "#### Describe the bug\r\nWhen changing the n_jobs-parameter for the parse_folder-method of mne.Report to a value greater than 1, an error is thrown.\r\n\r\n\r\n#### Steps to reproduce\r\n```python\r\nimport mne\r\n\r\npath = mne.datasets.sample.data_path(verbose=False)\r\nreport = mne.Report(verbose=True)\r\nreport.parse_folder(path, pattern='*raw.fif', render_bem=False, n_jobs=2)\r\nreport.save('test.html', overwrite=True)\r\n```\r\n\r\n#### Expected results\r\nNo error.\r\n\r\n\r\n#### Actual results\r\n```python\r\nTraceback (most recent call last):\r\n  File \"<decorator-gen-368>\", line 22, in parse_folder\r\n  File \"C:\\Users\\marti\\PycharmProjects\\mne-python\\mne\\report.py\", line 1620, in parse_folder\r\n    r = parallel(p_fun(self, fname, info, cov, baseline, sfreq, on_error,\r\n  File \"C:\\Users\\marti\\PycharmProjects\\mne-python\\mne\\parallel.py\", line 128, in run\r\n    return fun(*args, **kwargs)\r\n  File \"C:\\Users\\marti\\anaconda3\\envs\\mnedev\\lib\\site-packages\\joblib\\parallel.py\", line 1054, in __call__\r\n    self.retrieve()\r\n  File \"C:\\Users\\marti\\anaconda3\\envs\\mnedev\\lib\\site-packages\\joblib\\parallel.py\", line 933, in retrieve\r\n    self._output.extend(job.get(timeout=self.timeout))\r\n  File \"C:\\Users\\marti\\anaconda3\\envs\\mnedev\\lib\\site-packages\\joblib\\_parallel_backends.py\", line 542, in wrap_future_result\r\n    return future.result(timeout=timeout)\r\n  File \"C:\\Users\\marti\\anaconda3\\envs\\mnedev\\lib\\concurrent\\futures\\_base.py\", line 440, in result\r\n    return self.__get_result()\r\n  File \"C:\\Users\\marti\\anaconda3\\envs\\mnedev\\lib\\concurrent\\futures\\_base.py\", line 389, in __get_result\r\n    raise self._exception\r\nAttributeError: 'Report' object has no attribute 'projs'\r\n```\r\n\r\n\r\n#### Additional information\r\nThe error seems to be coming from line 362 in report.py. The report-object doesn't have the _projs_-attribute as if somehow lost attributes when being passed to the new process in __iterate_files_ (line 1620). Other attributes as _data_path_ and _title_ seem to survive.", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/9101/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9101/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/9031", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9031/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9031/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9031/events", "html_url": "https://github.com/mne-tools/mne-python/issues/9031", "id": 830025198, "node_id": "MDU6SXNzdWU4MzAwMjUxOTg=", "number": 9031, "title": "sidebar directive in the new doc theme not producing a sidebar", "user": {"login": "hoechenberger", "id": 2046265, "node_id": "MDQ6VXNlcjIwNDYyNjU=", "avatar_url": "https://avatars.githubusercontent.com/u/2046265?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hoechenberger", "html_url": "https://github.com/hoechenberger", "followers_url": "https://api.github.com/users/hoechenberger/followers", "following_url": "https://api.github.com/users/hoechenberger/following{/other_user}", "gists_url": "https://api.github.com/users/hoechenberger/gists{/gist_id}", "starred_url": "https://api.github.com/users/hoechenberger/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hoechenberger/subscriptions", "organizations_url": "https://api.github.com/users/hoechenberger/orgs", "repos_url": "https://api.github.com/users/hoechenberger/repos", "events_url": "https://api.github.com/users/hoechenberger/events{/privacy}", "received_events_url": "https://api.github.com/users/hoechenberger/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 40091538, "node_id": "MDU6TGFiZWw0MDA5MTUzOA==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/DOC", "name": "DOC", "color": "009800", "default": false, "description": null}, {"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "drammock", "id": 1810515, "node_id": "MDQ6VXNlcjE4MTA1MTU=", "avatar_url": "https://avatars.githubusercontent.com/u/1810515?v=4", "gravatar_id": "", "url": "https://api.github.com/users/drammock", "html_url": "https://github.com/drammock", "followers_url": "https://api.github.com/users/drammock/followers", "following_url": "https://api.github.com/users/drammock/following{/other_user}", "gists_url": "https://api.github.com/users/drammock/gists{/gist_id}", "starred_url": "https://api.github.com/users/drammock/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/drammock/subscriptions", "organizations_url": "https://api.github.com/users/drammock/orgs", "repos_url": "https://api.github.com/users/drammock/repos", "events_url": "https://api.github.com/users/drammock/events{/privacy}", "received_events_url": "https://api.github.com/users/drammock/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "drammock", "id": 1810515, "node_id": "MDQ6VXNlcjE4MTA1MTU=", "avatar_url": "https://avatars.githubusercontent.com/u/1810515?v=4", "gravatar_id": "", "url": "https://api.github.com/users/drammock", "html_url": "https://github.com/drammock", "followers_url": "https://api.github.com/users/drammock/followers", "following_url": "https://api.github.com/users/drammock/following{/other_user}", "gists_url": "https://api.github.com/users/drammock/gists{/gist_id}", "starred_url": "https://api.github.com/users/drammock/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/drammock/subscriptions", "organizations_url": "https://api.github.com/users/drammock/orgs", "repos_url": "https://api.github.com/users/drammock/repos", "events_url": "https://api.github.com/users/drammock/events{/privacy}", "received_events_url": "https://api.github.com/users/drammock/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 4, "created_at": "2021-03-12T11:26:32Z", "updated_at": "2021-03-14T17:15:15Z", "closed_at": "2021-03-14T17:15:15Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "It appears `.. sidebar::` will not actually create a sidebar anymore \u2013 which **does** make sense IMHO with the new layout; however maybe we should replace \"sidebars\" with \"info boxes\" now?\r\n\r\nSource:\r\n<img width=\"500\" alt=\"Screen Shot 2021-03-12 at 12 24 06\" src=\"https://user-images.githubusercontent.com/2046265/110934250-0f199080-832e-11eb-9e97-a7a30bd0f4a8.png\">\r\n\r\nRendering:\r\n<img width=\"500\" alt=\"Screen Shot 2021-03-12 at 12 23 42\" src=\"https://user-images.githubusercontent.com/2046265/110934271-15a80800-832e-11eb-8b69-87ded7515050.png\">\r\n", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/9031/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/9031/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/8995", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8995/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8995/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8995/events", "html_url": "https://github.com/mne-tools/mne-python/issues/8995", "id": 822568309, "node_id": "MDU6SXNzdWU4MjI1NjgzMDk=", "number": 8995, "title": "using picks with ica.plot_sources breaks interactive properties plot", "user": {"login": "bloyl", "id": 5585821, "node_id": "MDQ6VXNlcjU1ODU4MjE=", "avatar_url": "https://avatars.githubusercontent.com/u/5585821?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bloyl", "html_url": "https://github.com/bloyl", "followers_url": "https://api.github.com/users/bloyl/followers", "following_url": "https://api.github.com/users/bloyl/following{/other_user}", "gists_url": "https://api.github.com/users/bloyl/gists{/gist_id}", "starred_url": "https://api.github.com/users/bloyl/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bloyl/subscriptions", "organizations_url": "https://api.github.com/users/bloyl/orgs", "repos_url": "https://api.github.com/users/bloyl/repos", "events_url": "https://api.github.com/users/bloyl/events{/privacy}", "received_events_url": "https://api.github.com/users/bloyl/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "drammock", "id": 1810515, "node_id": "MDQ6VXNlcjE4MTA1MTU=", "avatar_url": "https://avatars.githubusercontent.com/u/1810515?v=4", "gravatar_id": "", "url": "https://api.github.com/users/drammock", "html_url": "https://github.com/drammock", "followers_url": "https://api.github.com/users/drammock/followers", "following_url": "https://api.github.com/users/drammock/following{/other_user}", "gists_url": "https://api.github.com/users/drammock/gists{/gist_id}", "starred_url": "https://api.github.com/users/drammock/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/drammock/subscriptions", "organizations_url": "https://api.github.com/users/drammock/orgs", "repos_url": "https://api.github.com/users/drammock/repos", "events_url": "https://api.github.com/users/drammock/events{/privacy}", "received_events_url": "https://api.github.com/users/drammock/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "drammock", "id": 1810515, "node_id": "MDQ6VXNlcjE4MTA1MTU=", "avatar_url": "https://avatars.githubusercontent.com/u/1810515?v=4", "gravatar_id": "", "url": "https://api.github.com/users/drammock", "html_url": "https://github.com/drammock", "followers_url": "https://api.github.com/users/drammock/followers", "following_url": "https://api.github.com/users/drammock/following{/other_user}", "gists_url": "https://api.github.com/users/drammock/gists{/gist_id}", "starred_url": "https://api.github.com/users/drammock/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/drammock/subscriptions", "organizations_url": "https://api.github.com/users/drammock/orgs", "repos_url": "https://api.github.com/users/drammock/repos", "events_url": "https://api.github.com/users/drammock/events{/privacy}", "received_events_url": "https://api.github.com/users/drammock/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 1, "created_at": "2021-03-04T22:43:37Z", "updated_at": "2021-03-06T08:16:24Z", "closed_at": "2021-03-06T08:16:24Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "If i specify `picks` to `ica.plot_sources` If I then click on the ica_name to see the properties the indexing is incorrect and the properties for the wrong IC is plotted\r\n\r\nFor example in the image below I am not plotting **ICA001**, now if I right click on the **ICA004** to plot it's properties I get a window with the correct IC name however the topo and presumably the rest of the the properties plot is for the wrong IC (ICA003) in this case.\r\n\r\n<img width=\"849\" alt=\"image\" src=\"https://user-images.githubusercontent.com/5585821/110039739-b3d51600-7d0f-11eb-9dd8-3a9b93ae7793.png\">\r\n\r\ncc @drammock ", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/8995/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8995/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/8986", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8986/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8986/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8986/events", "html_url": "https://github.com/mne-tools/mne-python/issues/8986", "id": 821317614, "node_id": "MDU6SXNzdWU4MjEzMTc2MTQ=", "number": 8986, "title": "BUG: Possible inefficient updates to Brain", "user": {"login": "larsoner", "id": 2365790, "node_id": "MDQ6VXNlcjIzNjU3OTA=", "avatar_url": "https://avatars.githubusercontent.com/u/2365790?v=4", "gravatar_id": "", "url": "https://api.github.com/users/larsoner", "html_url": "https://github.com/larsoner", "followers_url": "https://api.github.com/users/larsoner/followers", "following_url": "https://api.github.com/users/larsoner/following{/other_user}", "gists_url": "https://api.github.com/users/larsoner/gists{/gist_id}", "starred_url": "https://api.github.com/users/larsoner/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/larsoner/subscriptions", "organizations_url": "https://api.github.com/users/larsoner/orgs", "repos_url": "https://api.github.com/users/larsoner/repos", "events_url": "https://api.github.com/users/larsoner/events{/privacy}", "received_events_url": "https://api.github.com/users/larsoner/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2021-03-03T17:19:16Z", "updated_at": "2021-05-24T11:23:06Z", "closed_at": "2021-05-24T11:23:06Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "One reason `Brain` is (probably) slower on CIs and example builds is that it does at least some unnecessary updates. For example on #8985 + #8975 if I add a `mne.set_log_level('debug')` in some test script, each time I tweak a clim or update a time point I get:\r\n```\r\n>>> brain.set_time_point(0)\r\nColor mapping 'curv' with Greys colormap and range [-1, 2]\r\nColor mapping 'data' with <class 'numpy.ndarray'> colormap and range [4.73, 14.18]\r\nColor mapping 'curv' with Greys colormap and range [-1, 2]\r\nColor mapping 'data' with <class 'numpy.ndarray'> colormap and range [4.73, 14.18]\r\n```\r\nSo it's being mapped twice. And if I modify the `_Brain` code to have this:\r\n```\r\n    def _update(self):\r\n        logger.debug('Update')\r\n```\r\nJust on init I see:\r\n```\r\nUpdate\r\nUpdate\r\nUpdate\r\nUpdate\r\nUpdate\r\nUpdate\r\n```\r\nSo we get 6 renderer updates. This last part might not actually matter since just having `_update` return immediately it's still ~4 seconds to open the window and exit.\r\n\r\nSo this is mostly an issue to remind us to track down and profile to see where time is being taken.", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/8986/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8986/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/8969", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8969/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8969/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8969/events", "html_url": "https://github.com/mne-tools/mne-python/issues/8969", "id": 818724990, "node_id": "MDU6SXNzdWU4MTg3MjQ5OTA=", "number": 8969, "title": "TF_DICS mode 'cwt_morlet' can't take list of cycle numbers for different frequency bins", "user": {"login": "kimcoco", "id": 41998428, "node_id": "MDQ6VXNlcjQxOTk4NDI4", "avatar_url": "https://avatars.githubusercontent.com/u/41998428?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kimcoco", "html_url": "https://github.com/kimcoco", "followers_url": "https://api.github.com/users/kimcoco/followers", "following_url": "https://api.github.com/users/kimcoco/following{/other_user}", "gists_url": "https://api.github.com/users/kimcoco/gists{/gist_id}", "starred_url": "https://api.github.com/users/kimcoco/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kimcoco/subscriptions", "organizations_url": "https://api.github.com/users/kimcoco/orgs", "repos_url": "https://api.github.com/users/kimcoco/repos", "events_url": "https://api.github.com/users/kimcoco/events{/privacy}", "received_events_url": "https://api.github.com/users/kimcoco/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2021-03-01T10:32:40Z", "updated_at": "2021-03-18T15:16:14Z", "closed_at": "2021-03-18T15:16:14Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "\r\n#### Describe the bug\r\n*TF_DICS beamforming with mode 'cwt_morlet' only takes deafault or single value cwt_n_cycles, although it should also accept list of float with different cycle numbers for each frequency bin*\r\n\r\n\r\n#### Steps to reproduce\r\n*\r\n```\r\nimport mne\r\nfrom mne import io\r\nfrom mne.datasets import sample\r\nfrom mne.event import make_fixed_length_events\r\nfrom mne.beamformer import tf_dics\r\nimport numpy as np\r\n\r\nprint(__doc__)\r\n\r\n# LOAD FILES FROM SAMPLE DATASET\r\n\r\ndata_path = sample.data_path()\r\nraw_fname = data_path + '/MEG/sample/sample_audvis_raw.fif'\r\nevent_fname = data_path + '/MEG/sample/sample_audvis_raw-eve.fif'\r\nfname_fwd = data_path + '/MEG/sample/sample_audvis-meg-eeg-oct-6-fwd.fif'\r\nsubjects_dir = data_path + '/subjects'\r\nlabel_name = 'Aud-lh'\r\nfname_label = data_path + '/MEG/sample/labels/%s.label' % label_name\r\n\r\n# PREP EPOCHS LIKE IN TF_DICS EXAMPLE\r\n\r\nraw = mne.io.read_raw_fif(raw_fname, preload=True)\r\nraw.info['bads'] = ['MEG 2443']  # 1 bad MEG channel\r\n# Pick a selection of magnetometer channels. A subset of all channels was used\r\n# to speed up the example. For a solution based on all MEG channels use\r\n# meg=True, selection=None and add mag=4e-12 to the reject dictionary.\r\nleft_temporal_channels = mne.read_selection('Left-temporal')\r\npicks = mne.pick_types(raw.info, meg='mag', eeg=False, eog=False,\r\n                       stim=False, exclude='bads',\r\n                       selection=left_temporal_channels)\r\nraw.pick_channels([raw.ch_names[pick] for pick in picks])\r\nreject = dict(mag=4e-12)\r\n# Re-normalize our empty-room projectors, which should be fine after subselection\r\nraw.info.normalize_proj()\r\n# Setting time windows.\r\ntmin, tmax, tstep = -0.5, 0.75, 0.05\r\n# Read epochs\r\nevent_id = 1\r\nevents = mne.read_events(event_fname)\r\nepochs = mne.Epochs(raw, events, event_id, tmin, tmax,\r\n                    baseline=None, preload=True, proj=True, reject=reject)\r\n# Read forward operator\r\nforward = mne.read_forward_solution(fname_fwd)\r\n# Read label\r\nlabel = mne.read_label(fname_label)\r\n\r\n\r\n# CWT_MORLET exemplary PARAMETERS for TF-DICS beamformer to re-produce BUG/ERROR\r\n\r\nfrequencies = [[4.,5.,6.,7.,8.,9.,10.,11.,12.],[12.,13.,14.,15.,16.,17.,18.,19.,20.,21.,22.,23.,24.,25.,26.,27.,28.,29.,30.]]\r\nwin_lengths = [0.3, 0.2]\r\n# use this line for cwt_cycles as list of float\r\ncwt_n_cycles = [5.,7.]\r\n# use this line to test single value\r\n# cwt_n_cycles = 7\r\n\r\n\r\n# TF_DICS CALCULATION\r\n\r\nstcs = tf_dics(epochs, forward, noise_csds = None, tmin=tmin, tmax=tmax, tstep=tstep, win_lengths=win_lengths, subtract_evoked=False, mode='cwt_morlet', frequencies=frequencies, cwt_n_cycles=cwt_n_cycles,\r\n               reg = 0.05, label=label, pick_ori='max-power', inversion='single', depth=1.0)*\r\n\r\n```\r\n\r\n#### Expected results\r\n*it should work with a list of floats like the API states*\r\n\r\n\r\n#### Actual results\r\n*Traceback (most recent call last):\r\n  File \"bugreport_tf_dics_MWE.py\", line 61, in <module>\r\n    stcs = tf_dics(epochs, forward, noise_csds = None, tmin=tmin, tmax=tmax, tstep=tstep, win_lengths=win_lengths, subtract_evoked=False, mode='cwt_morlet', frequencies=frequencies, cwt_n_cycles=cwt_n_cycles,\r\n  File \"<decorator-gen-381>\", line 24, in tf_dics\r\n  File \"/home/cora/mne-python/mne/beamformer/_dics.py\", line 751, in tf_dics\r\n    csd = csd_morlet(\r\n  File \"<decorator-gen-141>\", line 22, in csd_morlet\r\n  File \"/home/cora/mne-python/mne/time_frequency/csd.py\", line 935, in csd_morlet\r\n    return csd_array_morlet(epochs.get_data(), sfreq=epochs.info['sfreq'],\r\n  File \"<decorator-gen-142>\", line 22, in csd_array_morlet\r\n  File \"/home/cora/mne-python/mne/time_frequency/csd.py\", line 1005, in csd_array_morlet\r\n    wavelets = morlet(sfreq, frequencies, n_cycles)\r\n  File \"/home/cora/mne-python/mne/time_frequency/tfr.py\", line 75, in morlet\r\n    raise ValueError(\"n_cycles should be fixed or defined for \"\r\nValueError: n_cycles should be fixed or defined for each frequency.*\r\n\r\n\r\n#### Additional information\r\n*Platform:      Linux-5.8.0-44-generic-x86_64-with-glibc2.10\r\nPython:        3.8.8 | packaged by conda-forge | (default, Feb 20 2021, 16:22:27)  [GCC 9.3.0]\r\nExecutable:    /home/cora/anaconda3/envs/mnedev/bin/python3.8\r\nCPU:           x86_64: 16 cores\r\nMemory:        31.4 GB\r\n\r\nmne:           0.23.dev0\r\nnumpy:         1.20.1 {blas=NO_ATLAS_INFO, lapack=lapack}\r\nscipy:         1.6.0\r\nmatplotlib:    3.3.4 {backend=Qt5Agg}\r\n\r\nsklearn:       0.24.1\r\nnumba:         0.52.0\r\nnibabel:       3.2.1\r\nnilearn:       0.7.0\r\ndipy:          1.3.0\r\ncupy:          8.5.0\r\npandas:        1.2.2\r\nmayavi:        4.7.2\r\npyvista:       0.28.1 {pyvistaqt=0.3.0, OpenGL 4.5.0 NVIDIA 460.39 via GeForce GTX 1660 SUPER/PCIe/SSE2}\r\nvtk:           9.0.1\r\nPyQt5:         5.12.3*\r\n\r\n#### Solution / Pull Request\r\n*I've already worked out a solution that works right for both single floats and lists of floats cwt_n_cycles, and would like to make a pull request. \r\nThe error is where the cwt_n_cycles parameter is passed to the csd_morlet() function, which can't take a list. \r\nThe solution is to select n_cycles with an index (i.e. cwt_n_cycles[i_freq]) in the same loop that iterates over freq_bins anyways, and pass this to the csd function; and to convert single float cwt_n_cycles parameters to a list of same values with length of n_freq_bins at the beginning.*", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/8969/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8969/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/8966", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8966/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8966/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8966/events", "html_url": "https://github.com/mne-tools/mne-python/issues/8966", "id": 817581446, "node_id": "MDU6SXNzdWU4MTc1ODE0NDY=", "number": 8966, "title": "ica.plot_sources ignores ica_names if picks is used", "user": {"login": "bloyl", "id": 5585821, "node_id": "MDQ6VXNlcjU1ODU4MjE=", "avatar_url": "https://avatars.githubusercontent.com/u/5585821?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bloyl", "html_url": "https://github.com/bloyl", "followers_url": "https://api.github.com/users/bloyl/followers", "following_url": "https://api.github.com/users/bloyl/following{/other_user}", "gists_url": "https://api.github.com/users/bloyl/gists{/gist_id}", "starred_url": "https://api.github.com/users/bloyl/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bloyl/subscriptions", "organizations_url": "https://api.github.com/users/bloyl/orgs", "repos_url": "https://api.github.com/users/bloyl/repos", "events_url": "https://api.github.com/users/bloyl/events{/privacy}", "received_events_url": "https://api.github.com/users/bloyl/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2021-02-26T18:44:45Z", "updated_at": "2021-02-26T22:27:05Z", "closed_at": "2021-02-26T22:27:05Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "\r\n#### Describe the bug\r\nif you specify `picks` to `ica_plot_sources` the labels are in order starting with ICA0000, ICA0001....\r\n\r\nFor instance\r\n`ica.plot_sources(raw, picks=[4, 6])`\r\nwill make a plot whose ch_name labels are ICA0000 ICA0001\r\n\r\n#### Steps to reproduce\r\nthis is reproduced in the final plot of the ica example\r\nhttps://mne.tools/dev/auto_examples/preprocessing/plot_run_ica.html#sphx-glr-auto-examples-preprocessing-plot-run-ica-py\r\n\r\nCC @drammock \r\n", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/8966/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8966/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/8963", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8963/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8963/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8963/events", "html_url": "https://github.com/mne-tools/mne-python/pull/8963", "id": 817426111, "node_id": "MDExOlB1bGxSZXF1ZXN0NTgwOTIwOTUy", "number": 8963, "title": "Fix indexing dipoles read from a bdip file", "user": {"login": "wmvanvliet", "id": 428273, "node_id": "MDQ6VXNlcjQyODI3Mw==", "avatar_url": "https://avatars.githubusercontent.com/u/428273?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wmvanvliet", "html_url": "https://github.com/wmvanvliet", "followers_url": "https://api.github.com/users/wmvanvliet/followers", "following_url": "https://api.github.com/users/wmvanvliet/following{/other_user}", "gists_url": "https://api.github.com/users/wmvanvliet/gists{/gist_id}", "starred_url": "https://api.github.com/users/wmvanvliet/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wmvanvliet/subscriptions", "organizations_url": "https://api.github.com/users/wmvanvliet/orgs", "repos_url": "https://api.github.com/users/wmvanvliet/repos", "events_url": "https://api.github.com/users/wmvanvliet/events{/privacy}", "received_events_url": "https://api.github.com/users/wmvanvliet/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2021-02-26T14:59:32Z", "updated_at": "2021-02-28T08:48:56Z", "closed_at": "2021-02-28T08:48:46Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/mne-tools/mne-python/pulls/8963", "html_url": "https://github.com/mne-tools/mne-python/pull/8963", "diff_url": "https://github.com/mne-tools/mne-python/pull/8963.diff", "patch_url": "https://github.com/mne-tools/mne-python/pull/8963.patch", "merged_at": "2021-02-28T08:48:46Z"}, "body": "When reading dipoles from a `*.bdip` file, not all attributes of the `Dipole` object were proper numpy arrays. This only becomes apparent when you try to index the `Dipole` and get indexing errors. A quick PR that adds a unit test and fix for this.", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/8963/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8963/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/8897", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8897/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8897/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8897/events", "html_url": "https://github.com/mne-tools/mne-python/issues/8897", "id": 813879781, "node_id": "MDU6SXNzdWU4MTM4Nzk3ODE=", "number": 8897, "title": "ValueError reading Epochs .fif file saved using the inbuilt Epochs.save() method with mne.read_epochs()", "user": {"login": "rtybanana", "id": 20663297, "node_id": "MDQ6VXNlcjIwNjYzMjk3", "avatar_url": "https://avatars.githubusercontent.com/u/20663297?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rtybanana", "html_url": "https://github.com/rtybanana", "followers_url": "https://api.github.com/users/rtybanana/followers", "following_url": "https://api.github.com/users/rtybanana/following{/other_user}", "gists_url": "https://api.github.com/users/rtybanana/gists{/gist_id}", "starred_url": "https://api.github.com/users/rtybanana/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rtybanana/subscriptions", "organizations_url": "https://api.github.com/users/rtybanana/orgs", "repos_url": "https://api.github.com/users/rtybanana/repos", "events_url": "https://api.github.com/users/rtybanana/events{/privacy}", "received_events_url": "https://api.github.com/users/rtybanana/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2021-02-22T21:29:46Z", "updated_at": "2021-02-23T15:17:29Z", "closed_at": "2021-02-23T15:17:29Z", "author_association": "NONE", "active_lock_reason": null, "body": "### Describe the bug\r\nI opened raw GDF data and performed a few preprocessing methods on it: ICA, bandpass filtering and resampling. I then Epoched the Raw data and saved it back into a .fif file so that instead of doing the preprocessing again I could just open the file directly into an Epochs object. However, when attempting to load it in a `ValueError` is raised:\r\n\r\n``` Python\r\nValueError: Could not find event data\r\n```\r\n\r\n\r\n### Steps to reproduce\r\nSave Epoch object to file with .save() and attempt to open it again with mne.read_epochs()\r\n\r\n### Expected results\r\nEpochs object successfully created with all of the data inside\r\n\r\n\r\n### Actual results\r\n`ValueError` raised because event data could not be found.", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/8897/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8897/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/8894", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8894/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8894/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8894/events", "html_url": "https://github.com/mne-tools/mne-python/issues/8894", "id": 813598620, "node_id": "MDU6SXNzdWU4MTM1OTg2MjA=", "number": 8894, "title": "Error reading .set files from EEGLAB v2021.0", "user": {"login": "ramkpari", "id": 13279036, "node_id": "MDQ6VXNlcjEzMjc5MDM2", "avatar_url": "https://avatars.githubusercontent.com/u/13279036?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ramkpari", "html_url": "https://github.com/ramkpari", "followers_url": "https://api.github.com/users/ramkpari/followers", "following_url": "https://api.github.com/users/ramkpari/following{/other_user}", "gists_url": "https://api.github.com/users/ramkpari/gists{/gist_id}", "starred_url": "https://api.github.com/users/ramkpari/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ramkpari/subscriptions", "organizations_url": "https://api.github.com/users/ramkpari/orgs", "repos_url": "https://api.github.com/users/ramkpari/repos", "events_url": "https://api.github.com/users/ramkpari/events{/privacy}", "received_events_url": "https://api.github.com/users/ramkpari/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2021-02-22T15:21:18Z", "updated_at": "2021-02-22T15:23:13Z", "closed_at": "2021-02-22T15:23:13Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "#### Describe the bug\r\nThe error occurs when trying to load epoched and raw .set files exported from **EEGLAB v2021**. The exact same file exported from older versions of **EEGLAB (tested with v2019)** seems to just fine.  Not entirely sure if it's a result of EEGLAB changing their file structure with the new version since the **.set** files from the 2021 version seem to still be compatible with older versions of EEGLAB itself. \r\n\r\n\r\nThe error message when loading .set files from EEGLAB v2021 is shown in the following code-block.  The present path also contains the respective .fdt files for both versions. \r\n\r\n```\r\n---------------------------------------------------------------------------\r\nValueError                                Traceback (most recent call last)\r\n<ipython-input-16-187221b07d39> in <module>\r\n      1 filename = \"02/pilot_2_ICA_12_e2021.set\"\r\n----> 2 data_file = mne.read_epochs_eeglab(filename)\r\n\r\n~\\anaconda3\\lib\\site-packages\\mne\\io\\eeglab\\eeglab.py in read_epochs_eeglab(input_fname, events, event_id, eog, verbose, uint16_codec)\r\n    277     epochs = EpochsEEGLAB(input_fname=input_fname, events=events, eog=eog,\r\n    278                           event_id=event_id, verbose=verbose,\r\n--> 279                           uint16_codec=uint16_codec)\r\n    280     return epochs\r\n    281 \r\n\r\n<decorator-gen-223> in __init__(self, input_fname, events, event_id, tmin, baseline, reject, flat, reject_tmin, reject_tmax, eog, verbose, uint16_codec)\r\n\r\n~\\anaconda3\\lib\\site-packages\\mne\\io\\eeglab\\eeglab.py in __init__(self, input_fname, events, event_id, tmin, baseline, reject, flat, reject_tmin, reject_tmax, eog, verbose, uint16_codec)\r\n    448                  reject_tmax=None, eog=(), verbose=None,\r\n    449                  uint16_codec=None):  # noqa: D102\r\n--> 450         eeg = _check_load_mat(input_fname, uint16_codec)\r\n    451 \r\n    452         if not ((events is None and event_id is None) or\r\n\r\n~\\anaconda3\\lib\\site-packages\\mne\\io\\eeglab\\eeglab.py in _check_load_mat(fname, uint16_codec)\r\n     63             'mne-python developers for more information.')\r\n     64     if 'EEG' not in eeg:\r\n---> 65         raise ValueError('Could not find EEG array in the .set file.')\r\n     66     else:\r\n     67         eeg = eeg['EEG']\r\n\r\nValueError: Could not find EEG array in the .set file.\r\n```\r\n\r\n\r\n#### Steps to reproduce\r\n```\r\nimport mne\r\nfilename = \"pilot_2_ICA_12_e2021.set\"\r\ndata_file = mne.read_epochs_eeglab(filename)\r\n\r\n```\r\n\r\nAttached a minimal epoched EEG dataset with *.set and .fdt* files with supposedly the same data as exported by EEGLAB versions v2021 and v2019. \r\n\r\n[https://drive.google.com/drive/folders/1AtylxuZNVx2GOCnLOTIKfIEs7UXmrWUK?usp=sharing](https://drive.google.com/drive/folders/1AtylxuZNVx2GOCnLOTIKfIEs7UXmrWUK?usp=sharing)\r\n\r\n#### Expected results\r\n```\r\nExtracting parameters from pilot_2_ICA_12.set...\r\nNot setting metadata\r\nNot setting metadata\r\n56 matching events found\r\nNo baseline correction applied\r\n0 projection items activated\r\nReady.\r\n\r\n```\r\n\r\n\r\n#### Actual results\r\nDidn't load the file and reported a *Could not find EEG array in the .set file.* error.\r\n\r\n\r\n#### Additional information\r\nTried running with the latest stable version of MNE (0.22) and an older version (19.1) with similar results.\r\n\r\n```\r\nPlatform:      Windows-10-10.0.19041-SP0\r\nPython:        3.7.9 (default, Aug 31 2020, 17:10:11) [MSC v.1916 64 bit (AMD64)]\r\nExecutable:    C:\\Users\\Ram\\anaconda3\\python.exe\r\nCPU:           Intel64 Family 6 Model 158 Stepping 10, GenuineIntel: 12 cores\r\nMemory:        31.9 GB\r\n\r\nmne:           0.22.0\r\nnumpy:         1.19.2 {blas=mkl_rt, lapack=mkl_rt}\r\nscipy:         1.6.0\r\nmatplotlib:    3.3.4 {backend=module://ipykernel.pylab.backend_inline}\r\n\r\nsklearn:       0.23.2\r\nnumba:         0.51.2\r\nnibabel:       3.2.1\r\nnilearn:       0.7.0\r\ndipy:          1.3.0\r\ncupy:          8.3.0\r\npandas:        1.2.2\r\nmayavi:        4.7.2\r\npyvista:       0.28.1 {OpenGL 4.5.0 NVIDIA 461.40 via GeForce GTX 1060 with Max-Q Design/PCIe/SSE2}\r\nvtk:           9.0.1\r\nPyQt5:         5.15.0\r\n```", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/8894/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8894/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/8893", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8893/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8893/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8893/events", "html_url": "https://github.com/mne-tools/mne-python/issues/8893", "id": 813437367, "node_id": "MDU6SXNzdWU4MTM0MzczNjc=", "number": 8893, "title": "Clicking in overview bar does not draw annotations in raw.plot", "user": {"login": "cbrnr", "id": 4377312, "node_id": "MDQ6VXNlcjQzNzczMTI=", "avatar_url": "https://avatars.githubusercontent.com/u/4377312?v=4", "gravatar_id": "", "url": "https://api.github.com/users/cbrnr", "html_url": "https://github.com/cbrnr", "followers_url": "https://api.github.com/users/cbrnr/followers", "following_url": "https://api.github.com/users/cbrnr/following{/other_user}", "gists_url": "https://api.github.com/users/cbrnr/gists{/gist_id}", "starred_url": "https://api.github.com/users/cbrnr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/cbrnr/subscriptions", "organizations_url": "https://api.github.com/users/cbrnr/orgs", "repos_url": "https://api.github.com/users/cbrnr/repos", "events_url": "https://api.github.com/users/cbrnr/events{/privacy}", "received_events_url": "https://api.github.com/users/cbrnr/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}, {"id": 1290799321, "node_id": "MDU6TGFiZWwxMjkwNzk5MzIx", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/VIZ", "name": "VIZ", "color": "22e861", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2021-02-22T12:01:57Z", "updated_at": "2021-02-23T12:16:14Z", "closed_at": "2021-02-23T12:11:14Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "If plotting a `Raw` object with annotations, these are not drawn in the main window when navigating through the data by clicking on the little overview bar. It's probably just an `update()` call that's missing. For a MWE, the example in from #8686 can be used. @drammock do you have time to look?", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/8893/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8893/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/8890", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8890/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8890/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8890/events", "html_url": "https://github.com/mne-tools/mne-python/issues/8890", "id": 812719923, "node_id": "MDU6SXNzdWU4MTI3MTk5MjM=", "number": 8890, "title": "BUG: Channel-Adjacency for Neuromag122", "user": {"login": "marsipu", "id": 46245704, "node_id": "MDQ6VXNlcjQ2MjQ1NzA0", "avatar_url": "https://avatars.githubusercontent.com/u/46245704?v=4", "gravatar_id": "", "url": "https://api.github.com/users/marsipu", "html_url": "https://github.com/marsipu", "followers_url": "https://api.github.com/users/marsipu/followers", "following_url": "https://api.github.com/users/marsipu/following{/other_user}", "gists_url": "https://api.github.com/users/marsipu/gists{/gist_id}", "starred_url": "https://api.github.com/users/marsipu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/marsipu/subscriptions", "organizations_url": "https://api.github.com/users/marsipu/orgs", "repos_url": "https://api.github.com/users/marsipu/repos", "events_url": "https://api.github.com/users/marsipu/events{/privacy}", "received_events_url": "https://api.github.com/users/marsipu/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2021-02-20T22:21:51Z", "updated_at": "2021-03-02T12:12:06Z", "closed_at": "2021-03-02T12:12:06Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "#### Describe the bug\r\nWhen I try to get the channel-adjacency-matrix for Gradiometer from **Neuromag122**-Data with `find_ch_adjacency`\r\n, a matrix with dimensions 306x306 is given (when read from ./mne/channels/data/neighbors/neuromag122_neighb.mat).\r\n\r\nAnd when I try to compute the adjacency with `mne.channels.channels._compute_ch_adjacency`, I get the following result:\r\n\r\n```\r\nFile \"C:\\Users\\marti\\anaconda3\\envs\\mne\\lib\\site-packages\\mne\\channels\\channels.py\", line 1426, in _compute_ch_adjacency\r\nxy = _find_topomap_coords(info, picks, sphere=HEAD_SIZE_DEFAULT)\r\nFile \"C:\\Users\\marti\\anaconda3\\envs\\mne\\lib\\site-packages\\mne\\channels\\layout.py\", line 624, in _find_topomap_coords\r\npos = _auto_topomap_coords(\r\nFile \"C:\\Users\\marti\\anaconda3\\envs\\mne\\lib\\site-packages\\mne\\channels\\layout.py\", line 723, in _auto_topomap_coords\r\nraise ValueError('The following electrodes have overlapping positions,'\r\nValueError: The following electrodes have overlapping positions, which causes problems during visualization:\r\nMEG 001, MEG 002, MEG 003, [...]\r\n```\r\n\r\n\r\n#### Steps to reproduce\r\n```\r\nimport mne\r\ndata_path = \"./neuromag122_test_file-raw.fif\"\r\ninfo = mne.io.read_info(data_path)\r\n# Trying the load the channel-adjacency\r\nch_adjacency = mne.channels.find_ch_adjacency(info, 'grad')\r\nprint(ch_adjacency[0].shape)\r\n# Trying to bypass mne.channels.read_ch_adjacency()\r\nmne.channels.channels._compute_ch_adjacency(info, 'grad')\r\n```\r\n\r\n#### Expected results\r\nA 122x122 Matrix\r\n\r\n\r\n#### Actual results\r\nA 306x306 Matrix and a Value Error\r\n\r\n\r\n#### Additional information\r\nI uploaded an [anonymized raw-file](https://github.com/mne-tools/mne-python/files/6016694/neuromag122_test_file-raw.zip) from our Neuromag122 for reproduction of the issue.\r\n", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/8890/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8890/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/8887", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8887/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8887/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8887/events", "html_url": "https://github.com/mne-tools/mne-python/issues/8887", "id": 811220970, "node_id": "MDU6SXNzdWU4MTEyMjA5NzA=", "number": 8887, "title": "epochs.plot_image(evoked=False) doesn't show time in seconds", "user": {"login": "cbrnr", "id": 4377312, "node_id": "MDQ6VXNlcjQzNzczMTI=", "avatar_url": "https://avatars.githubusercontent.com/u/4377312?v=4", "gravatar_id": "", "url": "https://api.github.com/users/cbrnr", "html_url": "https://github.com/cbrnr", "followers_url": "https://api.github.com/users/cbrnr/followers", "following_url": "https://api.github.com/users/cbrnr/following{/other_user}", "gists_url": "https://api.github.com/users/cbrnr/gists{/gist_id}", "starred_url": "https://api.github.com/users/cbrnr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/cbrnr/subscriptions", "organizations_url": "https://api.github.com/users/cbrnr/orgs", "repos_url": "https://api.github.com/users/cbrnr/repos", "events_url": "https://api.github.com/users/cbrnr/events{/privacy}", "received_events_url": "https://api.github.com/users/cbrnr/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}, {"id": 77061445, "node_id": "MDU6TGFiZWw3NzA2MTQ0NQ==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/EASY", "name": "EASY", "color": "2be2d6", "default": false, "description": ""}, {"id": 1290799321, "node_id": "MDU6TGFiZWwxMjkwNzk5MzIx", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/VIZ", "name": "VIZ", "color": "22e861", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": {"login": "matteoanelli", "id": 32127121, "node_id": "MDQ6VXNlcjMyMTI3MTIx", "avatar_url": "https://avatars.githubusercontent.com/u/32127121?v=4", "gravatar_id": "", "url": "https://api.github.com/users/matteoanelli", "html_url": "https://github.com/matteoanelli", "followers_url": "https://api.github.com/users/matteoanelli/followers", "following_url": "https://api.github.com/users/matteoanelli/following{/other_user}", "gists_url": "https://api.github.com/users/matteoanelli/gists{/gist_id}", "starred_url": "https://api.github.com/users/matteoanelli/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/matteoanelli/subscriptions", "organizations_url": "https://api.github.com/users/matteoanelli/orgs", "repos_url": "https://api.github.com/users/matteoanelli/repos", "events_url": "https://api.github.com/users/matteoanelli/events{/privacy}", "received_events_url": "https://api.github.com/users/matteoanelli/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "matteoanelli", "id": 32127121, "node_id": "MDQ6VXNlcjMyMTI3MTIx", "avatar_url": "https://avatars.githubusercontent.com/u/32127121?v=4", "gravatar_id": "", "url": "https://api.github.com/users/matteoanelli", "html_url": "https://github.com/matteoanelli", "followers_url": "https://api.github.com/users/matteoanelli/followers", "following_url": "https://api.github.com/users/matteoanelli/following{/other_user}", "gists_url": "https://api.github.com/users/matteoanelli/gists{/gist_id}", "starred_url": "https://api.github.com/users/matteoanelli/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/matteoanelli/subscriptions", "organizations_url": "https://api.github.com/users/matteoanelli/orgs", "repos_url": "https://api.github.com/users/matteoanelli/repos", "events_url": "https://api.github.com/users/matteoanelli/events{/privacy}", "received_events_url": "https://api.github.com/users/matteoanelli/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 5, "created_at": "2021-02-18T15:46:29Z", "updated_at": "2021-03-17T13:34:26Z", "closed_at": "2021-03-17T13:34:26Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "`epochs.plot_image(evoked=False)` doesn't show time in seconds on the x-axis but samples. If `evoked=True` (default), the x-axis of the evoked response is used, which is in seconds.", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/8887/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8887/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/8873", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8873/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8873/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8873/events", "html_url": "https://github.com/mne-tools/mne-python/issues/8873", "id": 808805338, "node_id": "MDU6SXNzdWU4MDg4MDUzMzg=", "number": 8873, "title": "CI: pyvista QT error on Azure", "user": {"login": "drammock", "id": 1810515, "node_id": "MDQ6VXNlcjE4MTA1MTU=", "avatar_url": "https://avatars.githubusercontent.com/u/1810515?v=4", "gravatar_id": "", "url": "https://api.github.com/users/drammock", "html_url": "https://github.com/drammock", "followers_url": "https://api.github.com/users/drammock/followers", "following_url": "https://api.github.com/users/drammock/following{/other_user}", "gists_url": "https://api.github.com/users/drammock/gists{/gist_id}", "starred_url": "https://api.github.com/users/drammock/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/drammock/subscriptions", "organizations_url": "https://api.github.com/users/drammock/orgs", "repos_url": "https://api.github.com/users/drammock/repos", "events_url": "https://api.github.com/users/drammock/events{/privacy}", "received_events_url": "https://api.github.com/users/drammock/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2021-02-15T20:38:14Z", "updated_at": "2021-02-16T10:50:42Z", "closed_at": "2021-02-16T10:50:42Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "#### Describe the bug\r\n`test_layered_mesh()` is failing on CI (azure py 3.8 pip pre):\r\n```\r\nTypeError: Expected type for ``window_size`` is (<class 'tuple'>, <class 'NoneType'>) but <class 'list'> was given.\r\n```\r\nhttps://dev.azure.com/mne-tools/mne-python/_build/results?buildId=11625&view=logs&j=a017e066-62ca-5289-ad0b-8f57c84a089f&t=de70cabd-1dad-599c-0751-4f1f50c17e0f&l=2959\r\n\r\ncc @GuillaumeFavelier ", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/8873/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8873/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/8872", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8872/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8872/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8872/events", "html_url": "https://github.com/mne-tools/mne-python/issues/8872", "id": 808750470, "node_id": "MDU6SXNzdWU4MDg3NTA0NzA=", "number": 8872, "title": "Verbose not working with the Epochs.drop_bad method", "user": {"login": "HanBnrd", "id": 32393169, "node_id": "MDQ6VXNlcjMyMzkzMTY5", "avatar_url": "https://avatars.githubusercontent.com/u/32393169?v=4", "gravatar_id": "", "url": "https://api.github.com/users/HanBnrd", "html_url": "https://github.com/HanBnrd", "followers_url": "https://api.github.com/users/HanBnrd/followers", "following_url": "https://api.github.com/users/HanBnrd/following{/other_user}", "gists_url": "https://api.github.com/users/HanBnrd/gists{/gist_id}", "starred_url": "https://api.github.com/users/HanBnrd/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/HanBnrd/subscriptions", "organizations_url": "https://api.github.com/users/HanBnrd/orgs", "repos_url": "https://api.github.com/users/HanBnrd/repos", "events_url": "https://api.github.com/users/HanBnrd/events{/privacy}", "received_events_url": "https://api.github.com/users/HanBnrd/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 7, "created_at": "2021-02-15T18:44:04Z", "updated_at": "2021-02-17T17:59:09Z", "closed_at": "2021-02-17T17:59:09Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "#### Describe the bug\r\nThe `verbose` argument in not working in the [`drop_bad()`](https://mne.tools/dev/generated/mne.Epochs.html?highlight=drop_bad#mne.Epochs.drop_bad) method.\r\n\r\n\r\n#### Steps to reproduce\r\n```python\r\nimport os\r\nimport mne\r\n\r\n\r\nsample_data_folder = mne.datasets.sample.data_path()\r\nsample_data_raw_file = os.path.join(sample_data_folder, 'MEG', 'sample',\r\n                                    'sample_audvis_raw.fif')\r\nraw = mne.io.read_raw_fif(sample_data_raw_file, verbose=False).crop(tmax=60)\r\nevents = mne.find_events(raw, stim_channel='STI 014')\r\nepochs = mne.Epochs(raw, events, tmin=-0.3, tmax=0.7)\r\n\r\nepochs.verbose = False\r\n\r\nepochs.drop_bad(verbose=True)\r\n```\r\n\r\n\r\n#### Expected results\r\nThe `verbose` argument set to `True` overwrites the `Epochs.verbose` attribute and prints the number of bad epochs dropped.\r\n```\r\n86 events found\r\nEvent IDs: [ 1  2  3  4  5 32]\r\nNot setting metadata\r\nNot setting metadata\r\n86 matching events found\r\nApplying baseline correction (mode: mean)\r\nCreated an SSP operator (subspace dimension = 3)\r\n3 projection items activated\r\nLoading data for 86 events and 601 original time points ...\r\n1 bad epochs dropped\r\n```\r\n\r\n#### Actual results\r\nThe number of bad epochs dropped is not printed.\r\n```\r\n86 events found\r\nEvent IDs: [ 1  2  3  4  5 32]\r\nNot setting metadata\r\nNot setting metadata\r\n86 matching events found\r\nApplying baseline correction (mode: mean)\r\nCreated an SSP operator (subspace dimension = 3)\r\n3 projection items activated\r\n```\r\n\r\n\r\n#### Additional information\r\nIt seems that in the source code of [`drop_bad()`](https://github.com/mne-tools/mne-python/blob/main/mne/epochs.py#L1184-L1224) the argument `verbose` which defaults to `None` is not used.\r\n", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/8872/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8872/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/8868", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8868/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8868/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8868/events", "html_url": "https://github.com/mne-tools/mne-python/issues/8868", "id": 807475958, "node_id": "MDU6SXNzdWU4MDc0NzU5NTg=", "number": 8868, "title": "Inaccurate iEEG electrode positions on 3d/2d plots", "user": {"login": "Immiora", "id": 23262551, "node_id": "MDQ6VXNlcjIzMjYyNTUx", "avatar_url": "https://avatars.githubusercontent.com/u/23262551?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Immiora", "html_url": "https://github.com/Immiora", "followers_url": "https://api.github.com/users/Immiora/followers", "following_url": "https://api.github.com/users/Immiora/following{/other_user}", "gists_url": "https://api.github.com/users/Immiora/gists{/gist_id}", "starred_url": "https://api.github.com/users/Immiora/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Immiora/subscriptions", "organizations_url": "https://api.github.com/users/Immiora/orgs", "repos_url": "https://api.github.com/users/Immiora/repos", "events_url": "https://api.github.com/users/Immiora/events{/privacy}", "received_events_url": "https://api.github.com/users/Immiora/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2021-02-12T19:03:38Z", "updated_at": "2021-03-03T19:09:48Z", "closed_at": "2021-03-03T19:09:48Z", "author_association": "NONE", "active_lock_reason": null, "body": "Originally posted here: https://mne.discourse.group/t/ieeg-electrode-positions-on-3d-2d-plots/2687\r\n\r\nThe electrode positions I am getting from the mayavi plot look inaccurate.\r\n\r\nThe issue is well visible in the tutorial as well: [Working with ECoG data](https://mne.tools/dev/auto_tutorials/misc/plot_ecog.html#sphx-glr-auto-tutorials-misc-plot-ecog-py):\r\n![Example1](https://aws1.discourse-cdn.com/free1/uploads/mne/original/1X/ce01e0041af17be9ddfd51a6711e36faf532879c.png)\r\n\r\nThe electrodes plotted with `scatter` (colored blobs) are off compared to the ones made with `plot_alignment` (white spheres underneath). Reducing the radius of the scatter plot reveals how inaccurate it is:\r\n\r\n![Example2](https://aws1.discourse-cdn.com/free1/uploads/mne/original/1X/17ab5e455b0fe5c66e058f19d7665bc7d936fcd9.png)\r\n\r\nI understand that these positions depend on the view, but both plots are made using the same viewpoint:\r\n\r\n```\r\nfig = plot_alignment(raw_car.info, subject=subject, subjects_dir=subjects_dir, surfaces=['pial'], coord_frame='mri')\r\nmne.viz.set_3d_view(fig, 200, 70)\r\nxy, im = snapshot_brain_montage(fig, montage)\r\nxy_pts = np.vstack([xy[ch] for ch in raw_car.info['ch_names']])\r\n\r\nfig, ax = plt.subplots(figsize=(5, 5))\r\nax.imshow(im)\r\nax.set_axis_off()\r\nsc = ax.scatter(*xy_pts.T, c=ts, vmin=10, vmax=100)\r\n```", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/8868/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8868/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/8866", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8866/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8866/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8866/events", "html_url": "https://github.com/mne-tools/mne-python/issues/8866", "id": 807185207, "node_id": "MDU6SXNzdWU4MDcxODUyMDc=", "number": 8866, "title": "wrong scale for patterns with SGDClassifier ", "user": {"login": "giuliagennari", "id": 25058434, "node_id": "MDQ6VXNlcjI1MDU4NDM0", "avatar_url": "https://avatars.githubusercontent.com/u/25058434?v=4", "gravatar_id": "", "url": "https://api.github.com/users/giuliagennari", "html_url": "https://github.com/giuliagennari", "followers_url": "https://api.github.com/users/giuliagennari/followers", "following_url": "https://api.github.com/users/giuliagennari/following{/other_user}", "gists_url": "https://api.github.com/users/giuliagennari/gists{/gist_id}", "starred_url": "https://api.github.com/users/giuliagennari/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/giuliagennari/subscriptions", "organizations_url": "https://api.github.com/users/giuliagennari/orgs", "repos_url": "https://api.github.com/users/giuliagennari/repos", "events_url": "https://api.github.com/users/giuliagennari/events{/privacy}", "received_events_url": "https://api.github.com/users/giuliagennari/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 8, "created_at": "2021-02-12T12:10:20Z", "updated_at": "2021-02-14T22:34:31Z", "closed_at": "2021-02-13T21:20:55Z", "author_association": "NONE", "active_lock_reason": null, "body": "#### Describe the bug\r\nWhen using a SGDClassifier, the patterns computed with LinearModel/get_coef come out with a fanny scale i.e. in the wrong order of magnitude.\r\n\r\n#### Steps to reproduce\r\n```python\r\n# these lines come from the online tutorial, I've just substituted the default logistic regression \r\n# with a logistic regression implemented by means of the SGDClassifier \r\n\r\nimport mne\r\nfrom mne import io, EvokedArray\r\nfrom mne.datasets import sample\r\nfrom mne.decoding import Vectorizer, LinearModel, get_coef\r\n\r\nfrom sklearn.preprocessing import StandardScaler\r\nfrom sklearn.linear_model import SGDClassifier\r\nfrom sklearn.pipeline import make_pipeline\r\n\r\ndata_path = sample.data_path()\r\nsample_path = data_path + '/MEG/sample'\r\n\r\nraw_fname = sample_path + '/sample_audvis_filt-0-40_raw.fif'\r\nevent_fname = sample_path + '/sample_audvis_filt-0-40_raw-eve.fif'\r\ntmin, tmax = -0.1, 0.4\r\nevent_id = dict(aud_l=1, vis_l=3)\r\n\r\n# Setup for reading the raw data\r\nraw = io.read_raw_fif(raw_fname, preload=True)\r\nraw.filter(.5, 25, fir_design='firwin')\r\nevents = mne.read_events(event_fname)\r\n\r\n# Read epochs\r\nepochs = mne.Epochs(raw, events, event_id, tmin, tmax, proj=True,\r\n                    decim=2, baseline=None, preload=True)\r\ndel raw\r\n\r\nlabels = epochs.events[:, -1]\r\n\r\nX = epochs.pick_types(meg=False, eeg=True)\r\ny = epochs.events[:, 2]\r\n\r\nclf = make_pipeline(\r\n    Vectorizer(),                       # 1) vectorize across time and channels\r\n    StandardScaler(),                   # 2) normalize features across trials\r\n    LinearModel(SGDClassifier(loss='log')))  # 3) fits a logistic regression with Stochastic Gradient Descent \r\nclf.fit(X, y)\r\n\r\n# Extract and plot patterns and filters\r\nfor name in ('patterns_', 'filters_'):\r\n    # The `inverse_transform` parameter will call this method on any estimator\r\n    # contained in the pipeline, in reverse order.\r\n    coef = get_coef(clf, name, inverse_transform=True)\r\n    evoked = EvokedArray(coef, epochs.info, tmin=epochs.tmin)\r\n    evoked.plot_topomap(title='EEG %s' % name[:-1], time_unit='s')\r\n```\r\n\r\n#### Additional comments\r\n\r\nPerhaps not a real bug! If so.... would you know how come???", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/8866/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8866/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/8865", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8865/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8865/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8865/events", "html_url": "https://github.com/mne-tools/mne-python/issues/8865", "id": 807139866, "node_id": "MDU6SXNzdWU4MDcxMzk4NjY=", "number": 8865, "title": "mne.read_selection() returning funny channels", "user": {"login": "dnacombo", "id": 4716235, "node_id": "MDQ6VXNlcjQ3MTYyMzU=", "avatar_url": "https://avatars.githubusercontent.com/u/4716235?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dnacombo", "html_url": "https://github.com/dnacombo", "followers_url": "https://api.github.com/users/dnacombo/followers", "following_url": "https://api.github.com/users/dnacombo/following{/other_user}", "gists_url": "https://api.github.com/users/dnacombo/gists{/gist_id}", "starred_url": "https://api.github.com/users/dnacombo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dnacombo/subscriptions", "organizations_url": "https://api.github.com/users/dnacombo/orgs", "repos_url": "https://api.github.com/users/dnacombo/repos", "events_url": "https://api.github.com/users/dnacombo/events{/privacy}", "received_events_url": "https://api.github.com/users/dnacombo/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "hoechenberger", "id": 2046265, "node_id": "MDQ6VXNlcjIwNDYyNjU=", "avatar_url": "https://avatars.githubusercontent.com/u/2046265?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hoechenberger", "html_url": "https://github.com/hoechenberger", "followers_url": "https://api.github.com/users/hoechenberger/followers", "following_url": "https://api.github.com/users/hoechenberger/following{/other_user}", "gists_url": "https://api.github.com/users/hoechenberger/gists{/gist_id}", "starred_url": "https://api.github.com/users/hoechenberger/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hoechenberger/subscriptions", "organizations_url": "https://api.github.com/users/hoechenberger/orgs", "repos_url": "https://api.github.com/users/hoechenberger/repos", "events_url": "https://api.github.com/users/hoechenberger/events{/privacy}", "received_events_url": "https://api.github.com/users/hoechenberger/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "hoechenberger", "id": 2046265, "node_id": "MDQ6VXNlcjIwNDYyNjU=", "avatar_url": "https://avatars.githubusercontent.com/u/2046265?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hoechenberger", "html_url": "https://github.com/hoechenberger", "followers_url": "https://api.github.com/users/hoechenberger/followers", "following_url": "https://api.github.com/users/hoechenberger/following{/other_user}", "gists_url": "https://api.github.com/users/hoechenberger/gists{/gist_id}", "starred_url": "https://api.github.com/users/hoechenberger/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hoechenberger/subscriptions", "organizations_url": "https://api.github.com/users/hoechenberger/orgs", "repos_url": "https://api.github.com/users/hoechenberger/repos", "events_url": "https://api.github.com/users/hoechenberger/events{/privacy}", "received_events_url": "https://api.github.com/users/hoechenberger/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 7, "created_at": "2021-02-12T10:58:12Z", "updated_at": "2021-02-18T15:28:43Z", "closed_at": "2021-02-18T15:28:43Z", "author_association": "NONE", "active_lock_reason": null, "body": "#### Describe the bug\r\n\r\ntrying to select channels from an EEG dataset.\r\n\r\n#### Steps to reproduce\r\n\r\n```\r\nl = ['Vertex', 'temporal', 'parietal', 'occipital', 'frontal']\r\n\r\nll = mne.read_selection(name=l, info=r.info)\r\n```\r\nreturns a list with **Neuromag** channels although there are only EEG channels (EGI) in the dataset.\r\n\r\n@hoechenberger \r\n", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/8865/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8865/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/8864", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8864/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8864/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8864/events", "html_url": "https://github.com/mne-tools/mne-python/issues/8864", "id": 807124437, "node_id": "MDU6SXNzdWU4MDcxMjQ0Mzc=", "number": 8864, "title": "ValueError: Could not find EEG array in the .set file.", "user": {"login": "MSA8D8", "id": 29301606, "node_id": "MDQ6VXNlcjI5MzAxNjA2", "avatar_url": "https://avatars.githubusercontent.com/u/29301606?v=4", "gravatar_id": "", "url": "https://api.github.com/users/MSA8D8", "html_url": "https://github.com/MSA8D8", "followers_url": "https://api.github.com/users/MSA8D8/followers", "following_url": "https://api.github.com/users/MSA8D8/following{/other_user}", "gists_url": "https://api.github.com/users/MSA8D8/gists{/gist_id}", "starred_url": "https://api.github.com/users/MSA8D8/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/MSA8D8/subscriptions", "organizations_url": "https://api.github.com/users/MSA8D8/orgs", "repos_url": "https://api.github.com/users/MSA8D8/repos", "events_url": "https://api.github.com/users/MSA8D8/events{/privacy}", "received_events_url": "https://api.github.com/users/MSA8D8/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 22, "created_at": "2021-02-12T10:34:30Z", "updated_at": "2021-03-30T12:57:41Z", "closed_at": "2021-03-30T12:08:33Z", "author_association": "NONE", "active_lock_reason": null, "body": "#### Describe the bug\r\nDear MNE developers\r\nThank you for developing this wonderful tool. \r\n\r\nI am faced with the error when I tried to use read_raw_eeglab() to load the .set file made by EEGLAB\r\nWhat I did in EEGLAB is just loading the data by Quick 30 and save it in '.set(with '.fdt')' format only. \r\nI think this is very weird, so I guess this is bug.\r\n\r\nThe script I made is below.\r\n```\r\nsubject_name = 'DA'\r\nscript_path = os.path.abspath('./Python/EEG_analysis')\r\ndata_path = os.path.abspath('./output_play/' + subject_name) \r\nos.path.exists(data_path + '/'+ subject_name + '.set') # The print out result is 'True'\r\nraw = mne.io.read_raw_eeglab(input_fname = data_path + '/'+ subject_name + '.set')\r\n```\r\n#### Actual results\r\n```\r\n---------------------------------------------------------------------------\r\nValueError                                Traceback (most recent call last)\r\n<ipython-input-17-1519c0d84577> in <module>\r\n----> 1 raw = mne.io.read_epochs_eeglab(input_fname = data_path + '/'+ subject_name + '_play_merged.set')\r\n\r\n~/.pyenv/versions/anaconda3-5.3.1/lib/python3.7/site-packages/mne/io/eeglab/eeglab.py in read_epochs_eeglab(input_fname, events, event_id, eog, verbose, uint16_codec)\r\n    277     epochs = EpochsEEGLAB(input_fname=input_fname, events=events, eog=eog,\r\n    278                           event_id=event_id, verbose=verbose,\r\n--> 279                           uint16_codec=uint16_codec)\r\n    280     return epochs\r\n    281 \r\n\r\n<decorator-gen-198> in __init__(self, input_fname, events, event_id, tmin, baseline, reject, flat, reject_tmin, reject_tmax, montage, eog, verbose, uint16_codec)\r\n\r\n~/.pyenv/versions/anaconda3-5.3.1/lib/python3.7/site-packages/mne/io/eeglab/eeglab.py in __init__(self, input_fname, events, event_id, tmin, baseline, reject, flat, reject_tmin, reject_tmax, montage, eog, verbose, uint16_codec)\r\n    449                  uint16_codec=None):  # noqa: D102\r\n    450         eeg = _check_load_mat(input_fname, uint16_codec)\r\n--> 451 \r\n    452         if not ((events is None and event_id is None) or\r\n    453                 (events is not None and event_id is not None)):\r\n\r\n~/.pyenv/versions/anaconda3-5.3.1/lib/python3.7/site-packages/mne/io/eeglab/eeglab.py in _check_load_mat(fname, uint16_codec)\r\n     63             'mne-python developers for more information.')\r\n     64     if 'EEG' not in eeg:\r\n---> 65         raise ValueError('Could not find EEG array in the .set file.')\r\n     66     else:\r\n     67         eeg = eeg['EEG']\r\n\r\nValueError: Could not find EEG array in the .set file.\r\n```\r\n\r\n#### Additional information\r\nI am using the latest version of EEGLAB(2021), so there might be some minor change in the .set file. This might be why I am faced with this error.\r\n\r\nThank you in advance.\r\n \r\n", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/8864/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8864/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/8853", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8853/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8853/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8853/events", "html_url": "https://github.com/mne-tools/mne-python/issues/8853", "id": 805551255, "node_id": "MDU6SXNzdWU4MDU1NTEyNTU=", "number": 8853, "title": "Confusion around \"resp\" channel type", "user": {"login": "hoechenberger", "id": 2046265, "node_id": "MDQ6VXNlcjIwNDYyNjU=", "avatar_url": "https://avatars.githubusercontent.com/u/2046265?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hoechenberger", "html_url": "https://github.com/hoechenberger", "followers_url": "https://api.github.com/users/hoechenberger/followers", "following_url": "https://api.github.com/users/hoechenberger/following{/other_user}", "gists_url": "https://api.github.com/users/hoechenberger/gists{/gist_id}", "starred_url": "https://api.github.com/users/hoechenberger/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hoechenberger/subscriptions", "organizations_url": "https://api.github.com/users/hoechenberger/orgs", "repos_url": "https://api.github.com/users/hoechenberger/repos", "events_url": "https://api.github.com/users/hoechenberger/events{/privacy}", "received_events_url": "https://api.github.com/users/hoechenberger/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "hoechenberger", "id": 2046265, "node_id": "MDQ6VXNlcjIwNDYyNjU=", "avatar_url": "https://avatars.githubusercontent.com/u/2046265?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hoechenberger", "html_url": "https://github.com/hoechenberger", "followers_url": "https://api.github.com/users/hoechenberger/followers", "following_url": "https://api.github.com/users/hoechenberger/following{/other_user}", "gists_url": "https://api.github.com/users/hoechenberger/gists{/gist_id}", "starred_url": "https://api.github.com/users/hoechenberger/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hoechenberger/subscriptions", "organizations_url": "https://api.github.com/users/hoechenberger/orgs", "repos_url": "https://api.github.com/users/hoechenberger/repos", "events_url": "https://api.github.com/users/hoechenberger/events{/privacy}", "received_events_url": "https://api.github.com/users/hoechenberger/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "hoechenberger", "id": 2046265, "node_id": "MDQ6VXNlcjIwNDYyNjU=", "avatar_url": "https://avatars.githubusercontent.com/u/2046265?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hoechenberger", "html_url": "https://github.com/hoechenberger", "followers_url": "https://api.github.com/users/hoechenberger/followers", "following_url": "https://api.github.com/users/hoechenberger/following{/other_user}", "gists_url": "https://api.github.com/users/hoechenberger/gists{/gist_id}", "starred_url": "https://api.github.com/users/hoechenberger/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hoechenberger/subscriptions", "organizations_url": "https://api.github.com/users/hoechenberger/orgs", "repos_url": "https://api.github.com/users/hoechenberger/repos", "events_url": "https://api.github.com/users/hoechenberger/events{/privacy}", "received_events_url": "https://api.github.com/users/hoechenberger/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 4, "created_at": "2021-02-10T14:16:09Z", "updated_at": "2021-02-10T18:51:24Z", "closed_at": "2021-02-10T18:51:24Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "In `channels.py`, it is claimed that the `resp` channel type is for certain response triggers:\r\n\r\nhttps://github.com/mne-tools/mne-python/blob/19fb479de44865d5ce79ad5af539a06081fae0c5/mne/channels/channels.py#L704-L706\r\n\r\nThis seems to be supported by code treating BTi data:\r\nhttps://github.com/mne-tools/mne-python/blob/19fb479de44865d5ce79ad5af539a06081fae0c5/mne/io/bti/bti.py#L1188-L1189\r\n\r\nBut the following comment in `constants.py` suggests it's a resp-iratory, not a resp-onse channel:\r\nhttps://github.com/mne-tools/mne-python/blob/19fb479de44865d5ce79ad5af539a06081fae0c5/mne/io/constants.py#L177\r\n\r\nNow \u2026\u00a0what gives?\r\n\r\nx-ref https://github.com/mne-tools/mne-bids/issues/700\r\n\r\ncc @agramfort ", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/8853/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8853/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/8848", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8848/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8848/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8848/events", "html_url": "https://github.com/mne-tools/mne-python/issues/8848", "id": 803886922, "node_id": "MDU6SXNzdWU4MDM4ODY5MjI=", "number": 8848, "title": "BUG grow_labels with overlap=False", "user": {"login": "agramfort", "id": 161052, "node_id": "MDQ6VXNlcjE2MTA1Mg==", "avatar_url": "https://avatars.githubusercontent.com/u/161052?v=4", "gravatar_id": "", "url": "https://api.github.com/users/agramfort", "html_url": "https://github.com/agramfort", "followers_url": "https://api.github.com/users/agramfort/followers", "following_url": "https://api.github.com/users/agramfort/following{/other_user}", "gists_url": "https://api.github.com/users/agramfort/gists{/gist_id}", "starred_url": "https://api.github.com/users/agramfort/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/agramfort/subscriptions", "organizations_url": "https://api.github.com/users/agramfort/orgs", "repos_url": "https://api.github.com/users/agramfort/repos", "events_url": "https://api.github.com/users/agramfort/events{/privacy}", "received_events_url": "https://api.github.com/users/agramfort/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/mne-tools/mne-python/milestones/19", "html_url": "https://github.com/mne-tools/mne-python/milestone/19", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/milestones/19/labels", "id": 6168664, "node_id": "MDk6TWlsZXN0b25lNjE2ODY2NA==", "number": 19, "title": "0.23", "description": "", "creator": {"login": "larsoner", "id": 2365790, "node_id": "MDQ6VXNlcjIzNjU3OTA=", "avatar_url": "https://avatars.githubusercontent.com/u/2365790?v=4", "gravatar_id": "", "url": "https://api.github.com/users/larsoner", "html_url": "https://github.com/larsoner", "followers_url": "https://api.github.com/users/larsoner/followers", "following_url": "https://api.github.com/users/larsoner/following{/other_user}", "gists_url": "https://api.github.com/users/larsoner/gists{/gist_id}", "starred_url": "https://api.github.com/users/larsoner/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/larsoner/subscriptions", "organizations_url": "https://api.github.com/users/larsoner/orgs", "repos_url": "https://api.github.com/users/larsoner/repos", "events_url": "https://api.github.com/users/larsoner/events{/privacy}", "received_events_url": "https://api.github.com/users/larsoner/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 58, "state": "closed", "created_at": "2020-12-01T18:47:16Z", "updated_at": "2021-04-27T19:32:01Z", "due_on": "2021-05-15T07:00:00Z", "closed_at": "2021-04-27T19:32:01Z"}, "comments": 0, "created_at": "2021-02-08T20:02:14Z", "updated_at": "2021-04-19T20:14:24Z", "closed_at": "2021-04-19T20:14:24Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "to replicate\r\n\r\n```\r\nimport mne\r\nfrom mne.datasets import sample\r\n\r\ndata_path = sample.data_path()\r\nfname = data_path + '/MEG/sample/sample_audvis-meg'\r\nstc = mne.read_source_estimate(fname)\r\nlabels = mne.grow_labels('fsaverage', stc.get_peak(hemi='lh')[0], 1, 1, overlap=False)\r\n```\r\n\r\nsee https://mne.discourse.group/t/potential-bug-with-grow-labels/2679/1", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/8848/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8848/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/8836", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8836/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8836/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8836/events", "html_url": "https://github.com/mne-tools/mne-python/issues/8836", "id": 800427660, "node_id": "MDU6SXNzdWU4MDA0Mjc2NjA=", "number": 8836, "title": "output of permutation_cluster_1samp_test seems wrong for out_type='indices'", "user": {"login": "jasmainak", "id": 15852194, "node_id": "MDQ6VXNlcjE1ODUyMTk0", "avatar_url": "https://avatars.githubusercontent.com/u/15852194?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jasmainak", "html_url": "https://github.com/jasmainak", "followers_url": "https://api.github.com/users/jasmainak/followers", "following_url": "https://api.github.com/users/jasmainak/following{/other_user}", "gists_url": "https://api.github.com/users/jasmainak/gists{/gist_id}", "starred_url": "https://api.github.com/users/jasmainak/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jasmainak/subscriptions", "organizations_url": "https://api.github.com/users/jasmainak/orgs", "repos_url": "https://api.github.com/users/jasmainak/repos", "events_url": "https://api.github.com/users/jasmainak/events{/privacy}", "received_events_url": "https://api.github.com/users/jasmainak/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2021-02-03T15:18:07Z", "updated_at": "2021-02-05T21:03:38Z", "closed_at": "2021-02-05T21:03:38Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "Originally reported by @dimitriospantazis. Here is the code to reproduce (based on an MNE example):\r\n\r\n```py\r\nimport numpy as np\r\nimport matplotlib.pyplot as plt\r\n\r\nimport mne\r\nfrom mne.time_frequency import tfr_morlet\r\nfrom mne.stats import permutation_cluster_1samp_test\r\nfrom mne.datasets import sample\r\n\r\ndata_path = sample.data_path()\r\nraw_fname = data_path + '/MEG/sample/sample_audvis_raw.fif'\r\ntmin, tmax, event_id = -0.3, 0.6, 1\r\n\r\n# Setup for reading the raw data\r\nraw = mne.io.read_raw_fif(raw_fname)\r\nevents = mne.find_events(raw, stim_channel='STI 014')\r\n\r\ninclude = []\r\nraw.info['bads'] += ['MEG 2443', 'EEG 053']  # bads + 2 more\r\n\r\n# picks MEG gradiometers\r\npicks = mne.pick_types(raw.info, meg='grad', eeg=False, eog=True,\r\n                       stim=False, include=include, exclude='bads')\r\n\r\n# Load condition 1\r\nevent_id = 1\r\nepochs = mne.Epochs(raw, events, event_id, tmin, tmax, picks=picks,\r\n                    baseline=(None, 0), preload=True,\r\n                    reject=dict(grad=4000e-13, eog=150e-6))\r\n# just use right temporal sensors for speed\r\nepochs.pick_channels(mne.read_selection('Right-temporal'))\r\nevoked = epochs.average()\r\n\r\ndecim = 5\r\nfreqs = np.arange(8, 40, 2)  # define frequencies of interest\r\nsfreq = raw.info['sfreq']  # sampling in Hz\r\ntfr_epochs = tfr_morlet(epochs, freqs, n_cycles=4., decim=decim,\r\n                        average=False, return_itc=False, n_jobs=1)\r\n\r\n# Baseline power\r\ntfr_epochs.apply_baseline(mode='logratio', baseline=(-.100, 0))\r\n\r\n# Crop in time to keep only what is between 0 and 400 ms\r\nevoked.crop(-0.1, 0.4)\r\ntfr_epochs.crop(-0.1, 0.4)\r\n\r\nepochs_power = tfr_epochs.data\r\n\r\nthreshold = 3.\r\nn_permutations = 50  # Warning: 50 is way too small for real-world analysis.\r\ndata = epochs_power[0][0]\r\nfor out_type in ['mask', 'indices']:\r\n    T_obs, clusters, cluster_p_values, H0 = \\\r\n        permutation_cluster_1samp_test(data, n_permutations=n_permutations,\r\n                                    threshold=threshold, tail=1,\r\n                                    adjacency=None,\r\n                                    out_type=out_type, verbose=True)\r\n    print(clusters)\r\n```\r\n\r\nI get:\r\n\r\n```\r\nComputing cluster p-values\r\nDone.\r\n[(slice(2, 4, None),), (slice(46, 49, None),)]\r\nstat_fun(H1): min=-7.417671 max=4.199342\r\nRunning initial clustering\r\nFound 2 clusters\r\nPermuting 49 times...\r\n100%|\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588|  : 49/49 [00:00<00:00, 1025.40it/s]\r\nComputing cluster p-values\r\nDone.\r\n[(array([0]),), (array([0]),)]\r\n```\r\n\r\nIn the mask format, you get two different clusters but in the other format you get the same cluster repeated twice.\r\n\r\nLooking at the [source code](https://github.com/mne-tools/mne-python/blob/4df9ed838f1d56471d071308fb62b9ec749cb10d/mne/stats/cluster_level) the loop does look buggy to me.", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/8836/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8836/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/8830", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8830/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8830/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8830/events", "html_url": "https://github.com/mne-tools/mne-python/issues/8830", "id": 799681698, "node_id": "MDU6SXNzdWU3OTk2ODE2OTg=", "number": 8830, "title": "GSN montage electrode naming", "user": {"login": "sylvchev", "id": 5824988, "node_id": "MDQ6VXNlcjU4MjQ5ODg=", "avatar_url": "https://avatars.githubusercontent.com/u/5824988?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sylvchev", "html_url": "https://github.com/sylvchev", "followers_url": "https://api.github.com/users/sylvchev/followers", "following_url": "https://api.github.com/users/sylvchev/following{/other_user}", "gists_url": "https://api.github.com/users/sylvchev/gists{/gist_id}", "starred_url": "https://api.github.com/users/sylvchev/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sylvchev/subscriptions", "organizations_url": "https://api.github.com/users/sylvchev/orgs", "repos_url": "https://api.github.com/users/sylvchev/repos", "events_url": "https://api.github.com/users/sylvchev/events{/privacy}", "received_events_url": "https://api.github.com/users/sylvchev/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2021-02-02T20:58:26Z", "updated_at": "2023-02-15T20:55:51Z", "closed_at": "2023-02-15T20:55:51Z", "author_association": "NONE", "active_lock_reason": null, "body": "#### Describe the bug\r\nWhen reading file with an HydroCel Geodesic Sensor Net montage, `set_montage()` returns an error if the electrodes are not correctly named. Unfortunately, the indicated error message is incorrect and does not help to fix the naming scheme.\r\n\r\n#### Steps to reproduce\r\nI'm using MAMEM EEG dataset 1 for SSVEP, a publicly available data. The example code below download 60 MB of data and try to apply the expected naming scheme. It generates an error.\r\n```\r\nimport wfdb\r\n\r\nfrom mne import create_info\r\nfrom mne.channels import make_standard_montage\r\nfrom mne.io import RawArray\r\nfrom mne.datasets.utils import _get_path\r\n\r\nimport glob\r\nimport os\r\nimport numpy as np\r\n\r\nsubj = \"dataset1/S001a\"\r\nwfdb.io.dl_database('mssvepdb', './', [subj],\r\n                    annotators='win', overwrite=False)\r\nrecord = wfdb.rdrecord(subj)\r\ndata = record.p_signal.T\r\nn_samples, n_channels, n_trials = record.sig_len, 256, 23\r\nch_types = ['eeg']*256\r\nsfreq = 250\r\nch_names = [\"{}-{}\".format(s, i) if s == \"EEG\" else s\r\n            for i, s in enumerate(record.sig_name)]\r\ninfo = create_info(ch_names, sfreq, ch_types)\r\nraw = RawArray(data, info, verbose=False)\r\nmontage = make_standard_montage('GSN-HydroCel-256')\r\n\r\ntry:\r\n    # Raise an error\r\n    raw.set_montage(montage)\r\nexcept ValueError as err:\r\n    # Point out missing channels: ['EEG-0', 'F8', 'EEG-2', 'EEG-3', ...\r\n    # even if they are correctly defined\r\n    print(\"Channels are: \", ch_names)\r\n    raise(err)\r\n\r\n# in fact, this montage requires channels named ['E1', 'E2', 'E3', ...\r\nch_names = [\"E{}\".format(i+1) for i in range(0, 256)]\r\nraw.set_montage(montage)\r\n```\r\n\r\n#### Expected results\r\nThe montage should work with the following naming scheme: `ch_names = ['EEG-0', 'F8', 'EEG-2', 'EEG-3', 'EEG-4', 'EEG-5', 'EEG-6', ...` \r\n\r\n\r\n#### Actual results\r\nThe montage works with a different naming scheme: `ch_names = ['E1', 'E2', 'E3', 'E4', 'E5', 'E6', 'E7', 'E8', 'E9', ...` that is not easy to find.\r\n\r\n#### Additional information\r\n```\r\nPlatform:      macOS-10.16-x86_64-i386-64bit\r\nPython:        3.6.10 |Anaconda, Inc.| (default, Mar 25 2020, 18:53:43)  [GCC 4.2.1 Compatible Clang 4.0.1 (tags/RELEASE_401/final)]\r\nExecutable:    /Users/sylchev/anaconda3/bin/python\r\nCPU:           i386: 4 cores\r\nMemory:        8.0 GB\r\n\r\nmne:           0.22.0\r\nnumpy:         1.18.1 {blas=mkl_rt, lapack=mkl_rt}\r\nscipy:         1.4.1\r\nmatplotlib:    3.1.3 {backend=Qt5Agg}\r\n\r\nsklearn:       0.22.1\r\nnumba:         0.51.2\r\nnibabel:       Not found\r\nnilearn:       Not found\r\ndipy:          Not found\r\ncupy:          Not found\r\npandas:        1.1.3\r\nmayavi:        Not found\r\npyvista:       Not found\r\nvtk:           Not found\r\n```\r\n", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/8830/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8830/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/8827", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8827/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8827/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8827/events", "html_url": "https://github.com/mne-tools/mne-python/pull/8827", "id": 799214914, "node_id": "MDExOlB1bGxSZXF1ZXN0NTY1ODk1OTA3", "number": 8827, "title": "Ensure times at which chpi are fitted are valid samples", "user": {"login": "wmvanvliet", "id": 428273, "node_id": "MDQ6VXNlcjQyODI3Mw==", "avatar_url": "https://avatars.githubusercontent.com/u/428273?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wmvanvliet", "html_url": "https://github.com/wmvanvliet", "followers_url": "https://api.github.com/users/wmvanvliet/followers", "following_url": "https://api.github.com/users/wmvanvliet/following{/other_user}", "gists_url": "https://api.github.com/users/wmvanvliet/gists{/gist_id}", "starred_url": "https://api.github.com/users/wmvanvliet/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wmvanvliet/subscriptions", "organizations_url": "https://api.github.com/users/wmvanvliet/orgs", "repos_url": "https://api.github.com/users/wmvanvliet/repos", "events_url": "https://api.github.com/users/wmvanvliet/events{/privacy}", "received_events_url": "https://api.github.com/users/wmvanvliet/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 8, "created_at": "2021-02-02T11:56:09Z", "updated_at": "2021-02-26T18:39:54Z", "closed_at": "2021-02-26T18:39:54Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/mne-tools/mne-python/pulls/8827", "html_url": "https://github.com/mne-tools/mne-python/pull/8827", "diff_url": "https://github.com/mne-tools/mne-python/pull/8827.diff", "patch_url": "https://github.com/mne-tools/mne-python/pull/8827.patch", "merged_at": "2021-02-26T18:39:53Z"}, "body": "I encountered this while maxfiltering 40 subjects. Some subjects failed, claiming `Head position time points must be greater than first sample offset, but found 500.0005 < 500`. A bit of a misleading error, as it was not the first time point that caused the problem, but the final time point.\r\n\r\nWhen the continuous head position is fitted through `compute_chpi_amplitudes`, the first column of the result contains the times at which each fit was performed. However, these times were not necessarily aligned on the times of the original raw object, meaning some times fell in between two samples. This caused problems later on in `maxwell_filter` as a check is done whether the times are all valid, as the final timestamp can be slightly larger than the final timestamp of the raw object.\r\n\r\nIn this PR, `compute_chpi_amplitudes` is changed to always produce times that are aligned with those in the original raw object.", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/8827/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8827/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/8824", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8824/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8824/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8824/events", "html_url": "https://github.com/mne-tools/mne-python/issues/8824", "id": 798741602, "node_id": "MDU6SXNzdWU3OTg3NDE2MDI=", "number": 8824, "title": "connectivity.spectral_connectivity drops times when given Epochs object ", "user": {"login": "apadee", "id": 44297909, "node_id": "MDQ6VXNlcjQ0Mjk3OTA5", "avatar_url": "https://avatars.githubusercontent.com/u/44297909?v=4", "gravatar_id": "", "url": "https://api.github.com/users/apadee", "html_url": "https://github.com/apadee", "followers_url": "https://api.github.com/users/apadee/followers", "following_url": "https://api.github.com/users/apadee/following{/other_user}", "gists_url": "https://api.github.com/users/apadee/gists{/gist_id}", "starred_url": "https://api.github.com/users/apadee/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/apadee/subscriptions", "organizations_url": "https://api.github.com/users/apadee/orgs", "repos_url": "https://api.github.com/users/apadee/repos", "events_url": "https://api.github.com/users/apadee/events{/privacy}", "received_events_url": "https://api.github.com/users/apadee/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2021-02-01T21:58:35Z", "updated_at": "2021-02-10T18:51:12Z", "closed_at": "2021-02-10T18:51:12Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "#### Describe the bug\r\nI'm trying to compute EEG functional connectivity in various time intervals relative to the stimulus.   \r\nI run into a problem with the `tmin` and `tmax` arguments in `mne.connectivity.spectral_connectivity`.  \r\n\r\nIf the data object passed to `mne.connectivity.spectral_connectivity` is of type `mne.Epochs`, then `spectral._prepare_connectivity` should use the times from `mne.Epochs.times`:\r\nOtherwise, `times` is generated using `np.linspace()` from the sampling frequency `sfreq` and the number of data samples (`n_times_in`).\r\n\r\nThis is done in `_prepare_connectivity` with a subset of the data, which itself tries to create the `times_in` through `_get_and_verify_data_sizes`.\r\n\r\nHere, I want to get from -0.4 to -0.1 seconds from the event (300 ms span 100 ms before event.)\r\nHere is an evoked plot with the full time axis with the marked interval in which I want to compute connectivity. \r\n\r\n![image](https://user-images.githubusercontent.com/44297909/106517400-b8bc6500-64d8-11eb-8557-864c3f8c9d87.png)\r\n\r\nHowever, the time points from `epochs.times` are lost in the execution of `spectral._prepare_connectivity` and replaced with generated time axis. This makes the time points provided in `tmin` and `tmax` no longer consistent with the time in the data object. \r\n\r\nA possible fix to this issue is to pass `times_in` to both `spectral._prepare_connectivity` and `spectral._get_and_verify_data_sizes`, with which I then get my expected results. Something like:\r\nDefinition of  [`_prepare_connectivity`](https://github.com/mne-tools/mne-python/blob/4f2925b19ed8dc54a237021de2912732348ae65c/mne/connectivity/spectral.py#L933) :\r\n```python\r\ndef _prepare_connectivity(epoch_block, tmin, tmax, fmin, fmax, sfreq, indices,\r\n                          mode, fskip, n_bands,\r\n                          cwt_freqs, faverage, times_in=None):\r\n    \"\"\"Check and precompute dimensions of results data.\"\"\"\r\n    first_epoch = epoch_block[0]\r\n\r\n    # get the data size and time scale\r\n    n_signals, n_times_in, times_in = _get_and_verify_data_sizes(first_epoch, times=times_in)\r\n...\r\n```\r\nCalling [`_prepare_connectivity`](https://github.com/mne-tools/mne-python/blob/4f2925b19ed8dc54a237021de2912732348ae65c/mne/connectivity/spectral.py#L785 ):\r\n```python\r\n...\r\n(n_cons, times, n_times, times_in, n_times_in, tmin_idx,\r\n             tmax_idx, n_freqs, freq_mask, freqs, freqs_bands, freq_idx_bands,\r\n             n_signals, indices_use) = _prepare_connectivity(\r\n                epoch_block=epoch_block, tmin=tmin, tmax=tmax, fmin=fmin,\r\n                fmax=fmax, sfreq=sfreq, indices=indices, mode=mode,\r\n                fskip=fskip, n_bands=n_bands,\r\n                cwt_freqs=cwt_freqs, faverage=faverage, times_in=times_in)\r\n...\r\n```\r\n\r\n#### Steps to reproduce\r\n```python\r\nimport mne\r\nfrom mne import io\r\nfrom mne.connectivity import spectral_connectivity\r\nfrom mne.datasets import sample\r\nfrom mne.viz import plot_connectivity_circle\r\n\r\ndata_path = sample.data_path()\r\nraw_fname = data_path + '/MEG/sample/sample_audvis_filt-0-40_raw.fif'\r\nevent_fname = data_path + '/MEG/sample/sample_audvis_filt-0-40_raw-eve.fif'\r\n\r\nraw = io.read_raw_fif(raw_fname)\r\nevents = mne.read_events(event_fname)\r\nraw.info['bads'] += ['MEG 2443']\r\npicks = mne.pick_types(raw.info, meg='grad', eeg=False, stim=False, eog=True,\r\n                       exclude='bads')\r\n\r\nevent_id, tmin, tmax = 3, -1, 1.5\r\nepochs = mne.Epochs(raw, events, event_id, tmin, tmax, picks=picks,\r\n                    baseline=(None, 0), reject=dict(grad=4000e-13, eog=150e-6))\r\n\r\nfmin, fmax = 10., 12.\r\nsfreq = raw.info['sfreq']\r\n\r\n\r\ntmin = -0.5\r\ntmax = -0.1\r\nepochs.load_data().pick_types(meg='grad')\r\ncon, freqs, times, n_epochs, n_tapers = spectral_connectivity(\r\n    epochs, method='pli', mode='multitaper', sfreq=sfreq, fmin=fmin, fmax=fmax,\r\n    faverage=True, tmin=tmin, tmax=tmax, mt_adaptive=False, n_jobs=1)\r\n\r\nplot_connectivity_circle(con[:,:,0], epochs.ch_names, n_lines=300)\r\n\r\n```\r\n\r\n\r\n#### Expected results\r\nI would expect the `times` from the `epochs` object to be used, rather than time points generated from 0. \r\n\r\n#### Actual results\r\n```python\r\nConnectivity computation...\r\nTraceback (most recent call last):\r\n  File \"/home/ap/PycharmProjects/eeg_processing/conn_example.py\", line 30, in <module>\r\n    faverage=True, tmin=tmin, tmax=tmax, mt_adaptive=False, n_jobs=1)\r\n  File \"<decorator-gen-387>\", line 21, in spectral_connectivity\r\n  File \"/home/ap/miniconda3/envs/MNE/lib/python3.7/site-packages/mne/connectivity/spectral.py\", line 789, in spectral_connectivity\r\n    cwt_freqs=cwt_freqs, faverage=faverage)\r\n  File \"/home/ap/miniconda3/envs/MNE/lib/python3.7/site-packages/mne/connectivity/spectral.py\", line 948, in _prepare_connectivity\r\n    mask = _time_mask(times_in, tmin, tmax, sfreq=sfreq)\r\n  File \"/home/ap/miniconda3/envs/MNE/lib/python3.7/site-packages/mne/utils/numerics.py\", line 499, in _time_mask\r\n    % (orig_tmin, orig_tmax, extra, times[0], times[-1]))\r\nValueError: No samples remain when using tmin=-0.5 and tmax=-0.1 (original time bounds are [0.0, 2.4974401644798485])\r\n```\r\nWith a bit of guidance, I'm happy to make PR to resolve the issue :)\r\n\r\n#### Additional information\r\n```\r\nmne.sys_info()\r\nBackend Qt5Agg is interactive backend. Turning interactive mode on.\r\nPlatform:      Linux-5.0.0-32-generic-x86_64-with-debian-buster-sid\r\nPython:        3.7.9 (default, Aug 31 2020, 12:42:55)  [GCC 7.3.0]\r\nExecutable:    /home/ap/miniconda3/envs/MNE2/bin/python\r\nCPU:           x86_64: 12 cores\r\nMemory:        Unavailable (requires \"psutil\" package)\r\nmne:           0.22.0\r\nnumpy:         1.19.2 {blas=mkl_rt, lapack=mkl_rt}\r\nscipy:         1.5.2\r\nmatplotlib:    3.3.2 {backend=Qt5Agg}\r\nsklearn:       0.23.2\r\nnumba:         Not found\r\nnibabel:       Not found\r\nnilearn:       Not found\r\ndipy:          Not found\r\ncupy:          Not found\r\npandas:        1.2.1\r\nmayavi:        Not found\r\npyvista:       Not found\r\nvtk:           Not found\r\n```", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/8824/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8824/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/8816", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8816/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8816/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8816/events", "html_url": "https://github.com/mne-tools/mne-python/issues/8816", "id": 797691490, "node_id": "MDU6SXNzdWU3OTc2OTE0OTA=", "number": 8816, "title": "Epochs.crop() doesn't adjust Epochs.reject_tmin, reject_tmax", "user": {"login": "hoechenberger", "id": 2046265, "node_id": "MDQ6VXNlcjIwNDYyNjU=", "avatar_url": "https://avatars.githubusercontent.com/u/2046265?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hoechenberger", "html_url": "https://github.com/hoechenberger", "followers_url": "https://api.github.com/users/hoechenberger/followers", "following_url": "https://api.github.com/users/hoechenberger/following{/other_user}", "gists_url": "https://api.github.com/users/hoechenberger/gists{/gist_id}", "starred_url": "https://api.github.com/users/hoechenberger/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hoechenberger/subscriptions", "organizations_url": "https://api.github.com/users/hoechenberger/orgs", "repos_url": "https://api.github.com/users/hoechenberger/repos", "events_url": "https://api.github.com/users/hoechenberger/events{/privacy}", "received_events_url": "https://api.github.com/users/hoechenberger/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "hoechenberger", "id": 2046265, "node_id": "MDQ6VXNlcjIwNDYyNjU=", "avatar_url": "https://avatars.githubusercontent.com/u/2046265?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hoechenberger", "html_url": "https://github.com/hoechenberger", "followers_url": "https://api.github.com/users/hoechenberger/followers", "following_url": "https://api.github.com/users/hoechenberger/following{/other_user}", "gists_url": "https://api.github.com/users/hoechenberger/gists{/gist_id}", "starred_url": "https://api.github.com/users/hoechenberger/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hoechenberger/subscriptions", "organizations_url": "https://api.github.com/users/hoechenberger/orgs", "repos_url": "https://api.github.com/users/hoechenberger/repos", "events_url": "https://api.github.com/users/hoechenberger/events{/privacy}", "received_events_url": "https://api.github.com/users/hoechenberger/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "hoechenberger", "id": 2046265, "node_id": "MDQ6VXNlcjIwNDYyNjU=", "avatar_url": "https://avatars.githubusercontent.com/u/2046265?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hoechenberger", "html_url": "https://github.com/hoechenberger", "followers_url": "https://api.github.com/users/hoechenberger/followers", "following_url": "https://api.github.com/users/hoechenberger/following{/other_user}", "gists_url": "https://api.github.com/users/hoechenberger/gists{/gist_id}", "starred_url": "https://api.github.com/users/hoechenberger/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hoechenberger/subscriptions", "organizations_url": "https://api.github.com/users/hoechenberger/orgs", "repos_url": "https://api.github.com/users/hoechenberger/repos", "events_url": "https://api.github.com/users/hoechenberger/events{/privacy}", "received_events_url": "https://api.github.com/users/hoechenberger/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2021-01-31T11:41:33Z", "updated_at": "2021-02-02T09:00:09Z", "closed_at": "2021-02-02T09:00:09Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "Related to #8814\r\n\r\nMWE:\r\n```python\r\nimport os\r\nimport mne\r\n\r\nsample_data_folder = mne.datasets.sample.data_path()\r\nsample_data_raw_file = os.path.join(sample_data_folder, 'MEG', 'sample',\r\n                                    'sample_audvis_raw.fif')\r\nepochs_fname = '/tmp/epochs-epo.fif'\r\n\r\n\r\nraw = mne.io.read_raw_fif(sample_data_raw_file, verbose=False).crop(tmax=60)\r\nevents = mne.find_events(raw, stim_channel='STI 014')\r\n\r\ntmin, tmax = -0.2, 0.8\r\nepochs = mne.Epochs(raw, events,\r\n                    tmin=tmin, tmax=tmax,\r\n                    reject_tmin=tmin, reject_tmax=tmax)\r\nepochs.load_data()\r\nepochs.crop(-0.1, 0.5)\r\n\r\nprint(epochs.tmin)\r\nprint(epochs.reject_tmin)\r\nprint(epochs.tmax)\r\nprint(epochs.reject_tmax)\r\n```\r\nOutput:\r\n```python\r\n-0.09989760657919393\r\n-0.2\r\n0.49948803289596966\r\n0.8\r\n```\r\n\r\nTrying to save & load:\r\n```python\r\nepochs.save(epochs_fname, overwrite=True)\r\nepochs_read = mne.read_epochs(epochs_fname)\r\n```\r\nOutput:\r\n```python\r\n---------------------------------------------------------------------------\r\nValueError                                Traceback (most recent call last)\r\n/tmp/test.py in \r\n     25 \r\n     26 epochs.save(epochs_fname, overwrite=True)\r\n---> 27 epochs_read = mne.read_epochs(epochs_fname)\r\n\r\n<decorator-gen-212> in read_epochs(fname, proj, preload, verbose)\r\n\r\n~/Development/mne-python/mne/epochs.py in read_epochs(fname, proj, preload, verbose)\r\n   2704         The epochs.\r\n   2705     \"\"\"\r\n-> 2706     return EpochsFIF(fname, proj, preload, verbose)\r\n   2707 \r\n   2708 \r\n\r\n<decorator-gen-213> in __init__(self, fname, proj, preload, verbose)\r\n\r\n~/Development/mne-python/mne/epochs.py in __init__(self, fname, proj, preload, verbose)\r\n   2819         # again, ensure we're retaining the baseline period originally loaded\r\n   2820         # from disk without trying to re-apply baseline correction\r\n-> 2821         super(EpochsFIF, self).__init__(\r\n   2822             info, data, events, event_id, tmin, tmax, baseline=None, raw=raw,\r\n   2823             proj=proj, preload_at_end=False, on_missing='ignore',\r\n\r\n<decorator-gen-198> in __init__(self, info, data, events, event_id, tmin, tmax, baseline, raw, picks, reject, flat, decim, reject_tmin, reject_tmax, detrend, proj, on_missing, preload_at_end, selection, drop_log, filename, metadata, event_repeated, verbose)\r\n\r\n~/Development/mne-python/mne/epochs.py in __init__(***failed resolving arguments***)\r\n    481         # check reject_tmin and reject_tmax\r\n    482         if (reject_tmin is not None) and (reject_tmin < tmin):\r\n--> 483             raise ValueError(\"reject_tmin needs to be None or >= tmin\")\r\n    484         if (reject_tmax is not None) and (reject_tmax > tmax):\r\n    485             raise ValueError(\"reject_tmax needs to be None or <= tmax\")\r\n\r\nValueError: reject_tmin needs to be None or >= tmin\r\n```", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/8816/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8816/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/8815", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8815/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8815/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8815/events", "html_url": "https://github.com/mne-tools/mne-python/issues/8815", "id": 797593479, "node_id": "MDU6SXNzdWU3OTc1OTM0Nzk=", "number": 8815, "title": "color argument is not respected in brain.add_label", "user": {"login": "jasmainak", "id": 15852194, "node_id": "MDQ6VXNlcjE1ODUyMTk0", "avatar_url": "https://avatars.githubusercontent.com/u/15852194?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jasmainak", "html_url": "https://github.com/jasmainak", "followers_url": "https://api.github.com/users/jasmainak/followers", "following_url": "https://api.github.com/users/jasmainak/following{/other_user}", "gists_url": "https://api.github.com/users/jasmainak/gists{/gist_id}", "starred_url": "https://api.github.com/users/jasmainak/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jasmainak/subscriptions", "organizations_url": "https://api.github.com/users/jasmainak/orgs", "repos_url": "https://api.github.com/users/jasmainak/repos", "events_url": "https://api.github.com/users/jasmainak/events{/privacy}", "received_events_url": "https://api.github.com/users/jasmainak/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}, {"id": 1290799321, "node_id": "MDU6TGFiZWwxMjkwNzk5MzIx", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/VIZ", "name": "VIZ", "color": "22e861", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2021-01-31T01:25:33Z", "updated_at": "2021-02-01T17:41:34Z", "closed_at": "2021-02-01T17:41:34Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "I tried the following:\r\n\r\n```py\r\nimport os\r\n\r\nimport mne\r\nfrom mne import read_source_estimate\r\nfrom mne.datasets import sample\r\n\r\n# Paths to example data\r\nsample_dir_raw = sample.data_path()\r\nsample_dir = os.path.join(sample_dir_raw, 'MEG', 'sample')\r\nsubjects_dir = os.path.join(sample_dir_raw, 'subjects')\r\n\r\nfname_stc = os.path.join(sample_dir, 'sample_audvis-meg')\r\n\r\nstc = read_source_estimate(fname_stc, subject='sample')\r\n\r\n# Define plotting parameters\r\nsurfer_kwargs = dict(\r\n    hemi='lh', subjects_dir=subjects_dir,\r\n    clim=dict(kind='value', lims=[8, 12, 15]), views='lateral',\r\n    initial_time=0.09, time_unit='s', size=(800, 800),\r\n    smoothing_steps=5)\r\n\r\n# Plot surface\r\nbrain = stc.plot(**surfer_kwargs)\r\n\r\nvertex_id = 72752\r\nlabel = mne.grow_labels('sample', vertex_id, 20, 0, subjects_dir=subjects_dir)[0]\r\nbrain.add_label(label, color='green')\r\n```\r\n\r\nit gives me an orange label instead of green.\r\n\r\nFurthermore, if I do:\r\n\r\n```py\r\nbrain.remove_labels()\r\n```\r\n\r\nthe label is not removed from the image. Not sharing screenshots because I have some rendering issue with these plots on my mac but you can verify/reproduce easily with the scripts above.", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/8815/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8815/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/8814", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8814/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8814/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8814/events", "html_url": "https://github.com/mne-tools/mne-python/issues/8814", "id": 797498921, "node_id": "MDU6SXNzdWU3OTc0OTg5MjE=", "number": 8814, "title": "Epochs.reject_tmin and reject_tmax aren't being adjusted for deviations due to sampling rate", "user": {"login": "hoechenberger", "id": 2046265, "node_id": "MDQ6VXNlcjIwNDYyNjU=", "avatar_url": "https://avatars.githubusercontent.com/u/2046265?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hoechenberger", "html_url": "https://github.com/hoechenberger", "followers_url": "https://api.github.com/users/hoechenberger/followers", "following_url": "https://api.github.com/users/hoechenberger/following{/other_user}", "gists_url": "https://api.github.com/users/hoechenberger/gists{/gist_id}", "starred_url": "https://api.github.com/users/hoechenberger/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hoechenberger/subscriptions", "organizations_url": "https://api.github.com/users/hoechenberger/orgs", "repos_url": "https://api.github.com/users/hoechenberger/repos", "events_url": "https://api.github.com/users/hoechenberger/events{/privacy}", "received_events_url": "https://api.github.com/users/hoechenberger/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "hoechenberger", "id": 2046265, "node_id": "MDQ6VXNlcjIwNDYyNjU=", "avatar_url": "https://avatars.githubusercontent.com/u/2046265?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hoechenberger", "html_url": "https://github.com/hoechenberger", "followers_url": "https://api.github.com/users/hoechenberger/followers", "following_url": "https://api.github.com/users/hoechenberger/following{/other_user}", "gists_url": "https://api.github.com/users/hoechenberger/gists{/gist_id}", "starred_url": "https://api.github.com/users/hoechenberger/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hoechenberger/subscriptions", "organizations_url": "https://api.github.com/users/hoechenberger/orgs", "repos_url": "https://api.github.com/users/hoechenberger/repos", "events_url": "https://api.github.com/users/hoechenberger/events{/privacy}", "received_events_url": "https://api.github.com/users/hoechenberger/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "hoechenberger", "id": 2046265, "node_id": "MDQ6VXNlcjIwNDYyNjU=", "avatar_url": "https://avatars.githubusercontent.com/u/2046265?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hoechenberger", "html_url": "https://github.com/hoechenberger", "followers_url": "https://api.github.com/users/hoechenberger/followers", "following_url": "https://api.github.com/users/hoechenberger/following{/other_user}", "gists_url": "https://api.github.com/users/hoechenberger/gists{/gist_id}", "starred_url": "https://api.github.com/users/hoechenberger/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hoechenberger/subscriptions", "organizations_url": "https://api.github.com/users/hoechenberger/orgs", "repos_url": "https://api.github.com/users/hoechenberger/repos", "events_url": "https://api.github.com/users/hoechenberger/events{/privacy}", "received_events_url": "https://api.github.com/users/hoechenberger/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 2, "created_at": "2021-01-30T18:25:09Z", "updated_at": "2021-02-02T09:00:09Z", "closed_at": "2021-02-02T09:00:09Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "MWE:\r\n\r\n```python\r\nimport os\r\nimport mne\r\n\r\nsample_data_folder = mne.datasets.sample.data_path()\r\nsample_data_raw_file = os.path.join(sample_data_folder, 'MEG', 'sample',\r\n                                    'sample_audvis_raw.fif')\r\n\r\nraw = mne.io.read_raw_fif(sample_data_raw_file, verbose=False).crop(tmax=60)\r\nevents = mne.find_events(raw, stim_channel='STI 014')\r\n\r\ntmin, tmax = -0.2, 0.8\r\nepochs = mne.Epochs(raw, events,\r\n                    tmin=tmin, tmax=tmax,\r\n                    reject_tmin=tmin, reject_tmax=tmax)\r\n\r\nprint(epochs.tmin)\r\nprint(epochs.reject_tmin)\r\nprint(epochs.tmax)\r\nprint(epochs.reject_tmax)\r\n```\r\n\r\nOutput:\r\n```python\r\n-0.19979521315838786\r\n-0.2\r\n0.7991808526335514\r\n0.8\r\n```\r\n\r\nSaving above Epochs to disk and trying to load them will fail:\r\n```python\r\nepochs_fname = '/tmp/epochs-epo.fif'\r\n\r\nepochs.save(epochs_fname)\r\nepochs_loaded = mne.read_epochs(epochs_fname)\r\n```\r\n\r\nOutput:\r\n```python\r\n---------------------------------------------------------------------------\r\nValueError                                Traceback (most recent call last)\r\nUntitled-1 in \r\n     18 epochs.save(epochs_fname, overwrite=True)\r\n     19 \r\n---> 20 epochs_read = mne.read_epochs(epochs_fname)\r\n     21 \r\n\r\n<decorator-gen-212> in read_epochs(fname, proj, preload, verbose)\r\n\r\n~/Development/mne-python/mne/epochs.py in read_epochs(fname, proj, preload, verbose)\r\n   2704         The epochs.\r\n   2705     \"\"\"\r\n-> 2706     return EpochsFIF(fname, proj, preload, verbose)\r\n   2707 \r\n   2708 \r\n\r\n<decorator-gen-213> in __init__(self, fname, proj, preload, verbose)\r\n\r\n~/Development/mne-python/mne/epochs.py in __init__(self, fname, proj, preload, verbose)\r\n   2819         # again, ensure we're retaining the baseline period originally loaded\r\n   2820         # from disk without trying to re-apply baseline correction\r\n-> 2821         super(EpochsFIF, self).__init__(\r\n   2822             info, data, events, event_id, tmin, tmax, baseline=None, raw=raw,\r\n   2823             proj=proj, preload_at_end=False, on_missing='ignore',\r\n\r\n<decorator-gen-198> in __init__(self, info, data, events, event_id, tmin, tmax, baseline, raw, picks, reject, flat, decim, reject_tmin, reject_tmax, detrend, proj, on_missing, preload_at_end, selection, drop_log, filename, metadata, event_repeated, verbose)\r\n\r\n~/Development/mne-python/mne/epochs.py in __init__(***failed resolving arguments***)\r\n    481         # check reject_tmin and reject_tmax\r\n    482         if (reject_tmin is not None) and (reject_tmin < tmin):\r\n--> 483             raise ValueError(\"reject_tmin needs to be None or >= tmin\")\r\n    484         if (reject_tmax is not None) and (reject_tmax > tmax):\r\n    485             raise ValueError(\"reject_tmax needs to be None or <= tmax\")\r\n\r\nValueError: reject_tmin needs to be None or >= tmin\r\n```\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/8814/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8814/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/8812", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8812/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8812/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8812/events", "html_url": "https://github.com/mne-tools/mne-python/issues/8812", "id": 796964896, "node_id": "MDU6SXNzdWU3OTY5NjQ4OTY=", "number": 8812, "title": "mne.viz.set_3d_view with pyvista backend is not consistent! ", "user": {"login": "dasdiptyajit", "id": 43450258, "node_id": "MDQ6VXNlcjQzNDUwMjU4", "avatar_url": "https://avatars.githubusercontent.com/u/43450258?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dasdiptyajit", "html_url": "https://github.com/dasdiptyajit", "followers_url": "https://api.github.com/users/dasdiptyajit/followers", "following_url": "https://api.github.com/users/dasdiptyajit/following{/other_user}", "gists_url": "https://api.github.com/users/dasdiptyajit/gists{/gist_id}", "starred_url": "https://api.github.com/users/dasdiptyajit/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dasdiptyajit/subscriptions", "organizations_url": "https://api.github.com/users/dasdiptyajit/orgs", "repos_url": "https://api.github.com/users/dasdiptyajit/repos", "events_url": "https://api.github.com/users/dasdiptyajit/events{/privacy}", "received_events_url": "https://api.github.com/users/dasdiptyajit/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2021-01-29T15:19:20Z", "updated_at": "2022-05-24T18:20:02Z", "closed_at": "2022-05-24T18:20:02Z", "author_association": "NONE", "active_lock_reason": null, "body": "I'm trying to do something similar to :\r\nhttps://mne.tools/stable/auto_examples/visualization/plot_mne_helmet.html#sphx-glr-auto-examples-visualization-plot-mne-helmet-py\r\n\r\n#### Describe the bug\r\nHowever, I am seeing an anti-aliasing effect during interactive mode in ipython and Jupyter-notebook\r\n\r\nExpected results:\r\n![test2](https://user-images.githubusercontent.com/43450258/106292828-9531ba00-624d-11eb-9389-830054b20de5.png)\r\n\r\nGetting: \r\n![test1](https://user-images.githubusercontent.com/43450258/106292770-80edbd00-624d-11eb-9dea-8929d8d89e72.png)\r\n\r\n#### Additional information\r\nPlatform:      Linux-4.15.0-132-generic-x86_64-with-debian-buster-sid\r\nPython:        3.7.9 (default, Aug 31 2020, 12:42:55)  [GCC 7.3.0]\r\nExecutable:    /home/diptyajit/anaconda3/bin/python\r\nCPU:           x86_64: 4 cores\r\nMemory:        15.6 GB\r\n\r\nmne:           0.22.0\r\nnumpy:         1.19.2 {blas=mkl_rt, lapack=mkl_rt}\r\nscipy:         1.5.2\r\nmatplotlib:    3.3.2 {backend=Qt5Agg}\r\n\r\nsklearn:       0.23.2\r\nnumba:         0.51.2\r\nnibabel:       3.0.0\r\nnilearn:       0.6.1\r\ndipy:          1.1.0\r\ncupy:          Not found\r\npandas:        1.2.0\r\nmayavi:        4.7.2\r\npyvista:       0.27.4 {pyvistaqt=0.2.0, OpenGL 3.3 (Core Profile) Mesa 19.2.8 via Mesa DRI Intel(R) HD Graphics 530 (Skylake GT2)}\r\nvtk:           9.0.1\r\nPyQt5:         5.14.1\r\n\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/8812/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8812/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/8810", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8810/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8810/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8810/events", "html_url": "https://github.com/mne-tools/mne-python/issues/8810", "id": 796379166, "node_id": "MDU6SXNzdWU3OTYzNzkxNjY=", "number": 8810, "title": "'matplotlib' backend for stc.plot is broken", "user": {"login": "cjayb", "id": 5610076, "node_id": "MDQ6VXNlcjU2MTAwNzY=", "avatar_url": "https://avatars.githubusercontent.com/u/5610076?v=4", "gravatar_id": "", "url": "https://api.github.com/users/cjayb", "html_url": "https://github.com/cjayb", "followers_url": "https://api.github.com/users/cjayb/followers", "following_url": "https://api.github.com/users/cjayb/following{/other_user}", "gists_url": "https://api.github.com/users/cjayb/gists{/gist_id}", "starred_url": "https://api.github.com/users/cjayb/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/cjayb/subscriptions", "organizations_url": "https://api.github.com/users/cjayb/orgs", "repos_url": "https://api.github.com/users/cjayb/repos", "events_url": "https://api.github.com/users/cjayb/events{/privacy}", "received_events_url": "https://api.github.com/users/cjayb/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2021-01-28T21:13:35Z", "updated_at": "2021-01-29T15:53:54Z", "closed_at": "2021-01-29T15:53:54Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "#### Describe the bug\r\n\r\nMissing\r\n\r\n```python\r\nfrom mpl_toolkits.mplot3d import Axes3\r\n```\r\n\r\nin `mne.viz._3d._plot_mpl_stc`\r\n\r\n#### Steps to reproduce\r\n\r\nGeneric to any example\r\n\r\n```python\r\ndata_path = somato.data_path()\r\nsubject = '01'\r\ntask = 'somato'\r\n...\r\nstc_mne = apply_inverse(evoked, inv, lambda2, method='MNE', pick_ori=\"normal\",\r\n                        return_residual=False, verbose=True)\r\n\r\nbrain = stc_mne.plot(subjects_dir=subjects_dir, hemi='rh', surface='inflated',\r\n                     smoothing_steps='nearest', view_layout='vertical',\r\n                     backend='matplotlib')\r\n```\r\n\r\n#### Expected results\r\n\r\nA static plot using the `matplotlib` backend showing a 3D rendering of a surface.\r\n\r\n#### Actual results\r\n\r\n```python\r\nUsing control points [6.56993144e-11 7.80732925e-11 1.82440323e-10]\r\n---------------------------------------------------------------------------\r\nKeyError                                  Traceback (most recent call last)\r\n~/miniconda3/envs/hnn_dev/lib/python3.7/site-packages/matplotlib/projections/__init__.py in get_projection_class(projection)\r\n     57     try:\r\n---> 58         return projection_registry.get_projection_class(projection)\r\n     59     except KeyError:\r\n\r\n~/miniconda3/envs/hnn_dev/lib/python3.7/site-packages/matplotlib/projections/__init__.py in get_projection_class(self, name)\r\n     24         \"\"\"\r\n---> 25         return self._all_projection_types[name]\r\n     26 \r\n\r\nKeyError: '3d'\r\n\r\nDuring handling of the above exception, another exception occurred:\r\n\r\nValueError                                Traceback (most recent call last)\r\n~/src/git/hnn-core/examples/plot_simulate_somato.py in <module>\r\n----> 1 stc_mne.plot(backend='matplotlib')\r\n\r\n~/src/git/mne-python/mne/source_estimate.py in plot(self, subject, surface, hemi, colormap, time_label, smoothing_steps, transparent, alpha, time_viewer, subjects_dir, figure, views, colorbar, clim, cortex, size, background, foreground, initial_time, time_unit, backend, spacing, title, show_traces, src, volume_options, view_layout, add_data_kwargs, brain_kwargs, verbose)\r\n    662             src=src, volume_options=volume_options, view_layout=view_layout,\r\n    663             add_data_kwargs=add_data_kwargs, brain_kwargs=brain_kwargs,\r\n--> 664             verbose=verbose)\r\n    665         return brain\r\n    666 \r\n\r\n<decorator-gen-142> in plot_source_estimates(stc, subject, surface, hemi, colormap, time_label, smoothing_steps, transparent, alpha, time_viewer, subjects_dir, figure, views, colorbar, clim, cortex, size, background, foreground, initial_time, time_unit, backend, spacing, title, show_traces, src, volume_options, view_layout, add_data_kwargs, brain_kwargs, verbose)\r\n\r\n~/src/git/mne-python/mne/viz/_3d.py in plot_source_estimates(stc, subject, surface, hemi, colormap, time_label, smoothing_steps, transparent, alpha, time_viewer, subjects_dir, figure, views, colorbar, clim, cortex, size, background, foreground, initial_time, time_unit, backend, spacing, title, show_traces, src, volume_options, view_layout, add_data_kwargs, brain_kwargs, verbose)\r\n   1826         transparent=transparent)\r\n   1827     if plot_mpl:\r\n-> 1828         return _plot_mpl_stc(stc, spacing=spacing, **kwargs)\r\n   1829     return _plot_stc(\r\n   1830         stc, overlay_alpha=alpha, brain_alpha=alpha, vector_alpha=alpha,\r\n\r\n~/src/git/mne-python/mne/viz/_3d.py in _plot_mpl_stc(***failed resolving arguments***)\r\n   1524     time_label, times = _handle_time(time_label, time_unit, stc.times)\r\n   1525     fig = plt.figure(figsize=(6, 6)) if figure is None else figure\r\n-> 1526     ax = fig.gca(projection='3d')\r\n   1527     hemi_idx = 0 if hemi == 'lh' else 1\r\n   1528     surf = op.join(subjects_dir, subject, 'surf', '%s.%s' % (hemi, surface))\r\n\r\n~/miniconda3/envs/hnn_dev/lib/python3.7/site-packages/matplotlib/figure.py in gca(self, **kwargs)\r\n   1930 \r\n   1931         # no axes found, so create one which spans the figure\r\n-> 1932         return self.add_subplot(1, 1, 1, **kwargs)\r\n   1933 \r\n   1934     def sca(self, a):\r\n\r\n~/miniconda3/envs/hnn_dev/lib/python3.7/site-packages/matplotlib/figure.py in add_subplot(self, *args, **kwargs)\r\n   1394         else:\r\n   1395             projection_class, kwargs, key = \\\r\n-> 1396                 self._process_projection_requirements(*args, **kwargs)\r\n   1397 \r\n   1398             # try to find the axes with this key in the stack\r\n\r\n~/miniconda3/envs/hnn_dev/lib/python3.7/site-packages/matplotlib/figure.py in _process_projection_requirements(self, polar, projection, *args, **kwargs)\r\n   1118 \r\n   1119         if isinstance(projection, str) or projection is None:\r\n-> 1120             projection_class = projections.get_projection_class(projection)\r\n   1121         elif hasattr(projection, '_as_mpl_axes'):\r\n   1122             projection_class, extra_kwargs = projection._as_mpl_axes()\r\n\r\n~/miniconda3/envs/hnn_dev/lib/python3.7/site-packages/matplotlib/projections/__init__.py in get_projection_class(projection)\r\n     58         return projection_registry.get_projection_class(projection)\r\n     59     except KeyError:\r\n---> 60         raise ValueError(\"Unknown projection %r\" % projection)\r\n     61 \r\n     62 \r\n\r\nValueError: Unknown projection '3d'\r\n```\r\n\r\n#### Additional information\r\n\r\nPR will follow...", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/8810/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8810/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/8802", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8802/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8802/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8802/events", "html_url": "https://github.com/mne-tools/mne-python/issues/8802", "id": 796032399, "node_id": "MDU6SXNzdWU3OTYwMzIzOTk=", "number": 8802, "title": "Issue with mne.viz.plot_topomap on sample dataset restricted to MEG channels", "user": {"login": "CedricAllain", "id": 28969397, "node_id": "MDQ6VXNlcjI4OTY5Mzk3", "avatar_url": "https://avatars.githubusercontent.com/u/28969397?v=4", "gravatar_id": "", "url": "https://api.github.com/users/CedricAllain", "html_url": "https://github.com/CedricAllain", "followers_url": "https://api.github.com/users/CedricAllain/followers", "following_url": "https://api.github.com/users/CedricAllain/following{/other_user}", "gists_url": "https://api.github.com/users/CedricAllain/gists{/gist_id}", "starred_url": "https://api.github.com/users/CedricAllain/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/CedricAllain/subscriptions", "organizations_url": "https://api.github.com/users/CedricAllain/orgs", "repos_url": "https://api.github.com/users/CedricAllain/repos", "events_url": "https://api.github.com/users/CedricAllain/events{/privacy}", "received_events_url": "https://api.github.com/users/CedricAllain/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2021-01-28T14:02:47Z", "updated_at": "2021-02-01T13:05:42Z", "closed_at": "2021-02-01T13:05:42Z", "author_association": "NONE", "active_lock_reason": null, "body": "#### Describe the bug\r\nThe `mne.viz.plot_topomap` does not produce the expected result on the sample dataset when limiting to MEG channels. \r\n\r\n#### Steps to reproduce\r\nRun the following script:\r\n```\r\nimport os\r\nimport mne\r\nimport numpy as np\r\n\r\ndata_path = mne.datasets.sample.data_path()\r\nsubjects_dir = os.path.join(data_path, \"subjects\")\r\ndata_dir = os.path.join(data_path, 'MEG', 'sample')\r\nfile_name = os.path.join(data_dir, 'sample_audvis_raw.fif')\r\nraw = mne.io.read_raw_fif(file_name, preload=True, verbose=False)\r\nraw.pick_types(meg='grad', eeg=False, eog=False, stim=True)\r\nprint('done')\r\n\r\n# info of the loaded channels\r\ninfo = raw.copy().pick_types(meg=True).info\r\n\r\nX = raw.get_data(picks=['meg'])\r\nprint(\"Data shape:\", X.shape)\r\n\r\n# simulate random data\r\ndata = np.random.randn(203)\r\n\r\nassert len(info['chs']) == data.size\r\n\r\n# plot\r\nmne.viz.plot_topomap(data, info)\r\n```\r\n\r\n#### Expected results\r\n`plot_topomap` should create a topographic map as image.\r\n\r\n#### Actual results\r\nGot the following error:\r\n```\r\nValueError: cannot reshape array of size 203 into shape (101,2,newaxis)\r\n```\r\nwhich intervenes when the function `_merge_grad_data(data, method)` is called.\r\n\r\n#### Additional information\r\nPlatform:      macOS-10.15.7-x86_64-i386-64bit\r\nPython:        3.7.4 (default, Aug 13 2019, 15:17:50)  [Clang 4.0.1 (tags/RELEASE_401/final)]\r\nExecutable:    /Users/cedricallain/anaconda3/bin/python\r\nCPU:           i386: 8 cores\r\nMemory:        16.0 GB\r\n\r\nmne:           0.21.0\r\nnumpy:         1.17.2 {blas=mkl_rt, lapack=mkl_rt}\r\nscipy:         1.3.1\r\nmatplotlib:    3.1.1 {backend=module://ipykernel.pylab.backend_inline}\r\n\r\nsklearn:       0.21.3\r\nnumba:         0.45.1\r\nnibabel:       Not found\r\ncupy:          Not found\r\npandas:        0.25.1\r\ndipy:          Not found\r\nmayavi:        Not found\r\npyvista:       Not found\r\nvtk:           Not found", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/8802/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8802/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/8798", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8798/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8798/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8798/events", "html_url": "https://github.com/mne-tools/mne-python/issues/8798", "id": 795493653, "node_id": "MDU6SXNzdWU3OTU0OTM2NTM=", "number": 8798, "title": "defining backend in SourceEstimate.plot() sets default backend for subsequent renders", "user": {"login": "rythorpe", "id": 20212206, "node_id": "MDQ6VXNlcjIwMjEyMjA2", "avatar_url": "https://avatars.githubusercontent.com/u/20212206?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rythorpe", "html_url": "https://github.com/rythorpe", "followers_url": "https://api.github.com/users/rythorpe/followers", "following_url": "https://api.github.com/users/rythorpe/following{/other_user}", "gists_url": "https://api.github.com/users/rythorpe/gists{/gist_id}", "starred_url": "https://api.github.com/users/rythorpe/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rythorpe/subscriptions", "organizations_url": "https://api.github.com/users/rythorpe/orgs", "repos_url": "https://api.github.com/users/rythorpe/repos", "events_url": "https://api.github.com/users/rythorpe/events{/privacy}", "received_events_url": "https://api.github.com/users/rythorpe/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "GuillaumeFavelier", "id": 18143289, "node_id": "MDQ6VXNlcjE4MTQzMjg5", "avatar_url": "https://avatars.githubusercontent.com/u/18143289?v=4", "gravatar_id": "", "url": "https://api.github.com/users/GuillaumeFavelier", "html_url": "https://github.com/GuillaumeFavelier", "followers_url": "https://api.github.com/users/GuillaumeFavelier/followers", "following_url": "https://api.github.com/users/GuillaumeFavelier/following{/other_user}", "gists_url": "https://api.github.com/users/GuillaumeFavelier/gists{/gist_id}", "starred_url": "https://api.github.com/users/GuillaumeFavelier/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/GuillaumeFavelier/subscriptions", "organizations_url": "https://api.github.com/users/GuillaumeFavelier/orgs", "repos_url": "https://api.github.com/users/GuillaumeFavelier/repos", "events_url": "https://api.github.com/users/GuillaumeFavelier/events{/privacy}", "received_events_url": "https://api.github.com/users/GuillaumeFavelier/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "GuillaumeFavelier", "id": 18143289, "node_id": "MDQ6VXNlcjE4MTQzMjg5", "avatar_url": "https://avatars.githubusercontent.com/u/18143289?v=4", "gravatar_id": "", "url": "https://api.github.com/users/GuillaumeFavelier", "html_url": "https://github.com/GuillaumeFavelier", "followers_url": "https://api.github.com/users/GuillaumeFavelier/followers", "following_url": "https://api.github.com/users/GuillaumeFavelier/following{/other_user}", "gists_url": "https://api.github.com/users/GuillaumeFavelier/gists{/gist_id}", "starred_url": "https://api.github.com/users/GuillaumeFavelier/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/GuillaumeFavelier/subscriptions", "organizations_url": "https://api.github.com/users/GuillaumeFavelier/orgs", "repos_url": "https://api.github.com/users/GuillaumeFavelier/repos", "events_url": "https://api.github.com/users/GuillaumeFavelier/events{/privacy}", "received_events_url": "https://api.github.com/users/GuillaumeFavelier/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 2, "created_at": "2021-01-27T22:26:39Z", "updated_at": "2021-02-02T13:07:34Z", "closed_at": "2021-02-02T13:07:34Z", "author_association": "NONE", "active_lock_reason": null, "body": "#### Describe the bug\r\nExplicitly defining a 3d rendering backend in `SourceEstimate.plot()` appears to set the backend for subsequent calls to the same method that don't explicitly define the backend.\r\n\r\n\r\n#### Steps to reproduce\r\nRun [this script](https://gist.github.com/rythorpe/0164d059eaab74c155c5246f2679f895) in an ipython shell.\r\n\r\n\r\n#### Expected results\r\nExplicitly defining the `backend` arg in `SourceEstimate.plot()` should open a window using the specified backend, and subsequent calls to `SourceEstimate.plot()` that don't define the `backend` arg should use the default (i.e., pyvista) backend as noted in the [documentation](https://mne.tools/stable/generated/mne.SourceEstimate.html?highlight=plot#mne.SourceEstimate.plot).\r\n\r\n\r\n#### Actual results\r\nIf `backend='mayavi'` is explicitly defined in the beginning, subsequent calls to plot the source estimate will use the mayavi backend by default.\r\n\r\n\r\n#### Additional information\r\nPlatform:      Linux-5.4.0-64-generic-x86_64-with-glibc2.10\r\nPython:        3.8.6 | packaged by conda-forge | (default, Jan 25 2021, 23:21:18)  [GCC 9.3.0]\r\nExecutable:    /home/ryan/anaconda3/envs/hnn_core/bin/python\r\nCPU:           x86_64: 12 cores\r\nMemory:        15.5 GB\r\n\r\nmne:           0.22.0\r\nnumpy:         1.19.5 {blas=NO_ATLAS_INFO, lapack=lapack}\r\nscipy:         1.6.0\r\nmatplotlib:    3.3.3 {backend=Qt5Agg}\r\n\r\nsklearn:       0.24.1\r\nnumba:         0.52.0\r\nnibabel:       3.2.1\r\nnilearn:       0.7.0\r\ndipy:          1.3.0\r\ncupy:          Not found\r\npandas:        1.2.1\r\nmayavi:        4.7.2\r\npyvista:       0.27.4 {pyvistaqt=0.3.0, OpenGL 4.5.0 NVIDIA 450.102.04 via Quadro P1000/PCIe/SSE2}\r\nvtk:           9.0.1\r\nPyQt5:         5.12.3\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/8798/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8798/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/8797", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8797/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8797/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8797/events", "html_url": "https://github.com/mne-tools/mne-python/issues/8797", "id": 795458659, "node_id": "MDU6SXNzdWU3OTU0NTg2NTk=", "number": 8797, "title": "discrepancy when plotting vertex time course with pyvista backend", "user": {"login": "rythorpe", "id": 20212206, "node_id": "MDQ6VXNlcjIwMjEyMjA2", "avatar_url": "https://avatars.githubusercontent.com/u/20212206?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rythorpe", "html_url": "https://github.com/rythorpe", "followers_url": "https://api.github.com/users/rythorpe/followers", "following_url": "https://api.github.com/users/rythorpe/following{/other_user}", "gists_url": "https://api.github.com/users/rythorpe/gists{/gist_id}", "starred_url": "https://api.github.com/users/rythorpe/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rythorpe/subscriptions", "organizations_url": "https://api.github.com/users/rythorpe/orgs", "repos_url": "https://api.github.com/users/rythorpe/repos", "events_url": "https://api.github.com/users/rythorpe/events{/privacy}", "received_events_url": "https://api.github.com/users/rythorpe/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 8, "created_at": "2021-01-27T21:30:40Z", "updated_at": "2021-01-28T04:11:13Z", "closed_at": "2021-01-28T04:08:46Z", "author_association": "NONE", "active_lock_reason": null, "body": "#### Describe the bug\r\nThe MNE time course looks different when plotting a vertex within the brain visualization GUI via the pyvista backend (top figure shown below) compared to manually plotting the vertex using ``SourceEstimate.data`` (bottom figure shown below).\r\n\r\n\r\n#### Steps to reproduce\r\nSee https://gist.github.com/rythorpe/3c57fdb572bc17bb1f3e4bb70b3e1104 using the ``somato`` dataset. Selecting the exact vertex within the brain visualization window can be tricky (unless there is a more controlled way to to this through the API?).\r\n\r\n\r\n#### Expected results\r\nI expected the vertex time courses rendered in the GUI to match those plotted manually with matplotlib. Furthermore, I expected the vertex of maximal activity (blue trace shown below) to reflect the largest peak (compared to the orange trace) in the GUI.\r\n\r\n\r\n#### Actual results\r\nNote that the blue trace represents the time course of the right hemisphere vertex retrieved with `SourceEstimate.get_peak()` and that the vertex IDs are the same in each figure.\r\n\r\n![Screenshot from 2021-01-27 15-00-04](https://user-images.githubusercontent.com/20212206/106055168-0725ca00-60bb-11eb-8b2a-3bfbd71954a4.png)\r\n\r\n![Screenshot from 2021-01-27 14-59-26](https://user-images.githubusercontent.com/20212206/106055161-04c37000-60bb-11eb-922c-ae69aea229b8.png)\r\n", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/8797/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8797/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/8795", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8795/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8795/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8795/events", "html_url": "https://github.com/mne-tools/mne-python/issues/8795", "id": 795304042, "node_id": "MDU6SXNzdWU3OTUzMDQwNDI=", "number": 8795, "title": "EDF Reader memory hungry", "user": {"login": "agramfort", "id": 161052, "node_id": "MDQ6VXNlcjE2MTA1Mg==", "avatar_url": "https://avatars.githubusercontent.com/u/161052?v=4", "gravatar_id": "", "url": "https://api.github.com/users/agramfort", "html_url": "https://github.com/agramfort", "followers_url": "https://api.github.com/users/agramfort/followers", "following_url": "https://api.github.com/users/agramfort/following{/other_user}", "gists_url": "https://api.github.com/users/agramfort/gists{/gist_id}", "starred_url": "https://api.github.com/users/agramfort/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/agramfort/subscriptions", "organizations_url": "https://api.github.com/users/agramfort/orgs", "repos_url": "https://api.github.com/users/agramfort/repos", "events_url": "https://api.github.com/users/agramfort/events{/privacy}", "received_events_url": "https://api.github.com/users/agramfort/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/mne-tools/mne-python/milestones/19", "html_url": "https://github.com/mne-tools/mne-python/milestone/19", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/milestones/19/labels", "id": 6168664, "node_id": "MDk6TWlsZXN0b25lNjE2ODY2NA==", "number": 19, "title": "0.23", "description": "", "creator": {"login": "larsoner", "id": 2365790, "node_id": "MDQ6VXNlcjIzNjU3OTA=", "avatar_url": "https://avatars.githubusercontent.com/u/2365790?v=4", "gravatar_id": "", "url": "https://api.github.com/users/larsoner", "html_url": "https://github.com/larsoner", "followers_url": "https://api.github.com/users/larsoner/followers", "following_url": "https://api.github.com/users/larsoner/following{/other_user}", "gists_url": "https://api.github.com/users/larsoner/gists{/gist_id}", "starred_url": "https://api.github.com/users/larsoner/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/larsoner/subscriptions", "organizations_url": "https://api.github.com/users/larsoner/orgs", "repos_url": "https://api.github.com/users/larsoner/repos", "events_url": "https://api.github.com/users/larsoner/events{/privacy}", "received_events_url": "https://api.github.com/users/larsoner/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 58, "state": "closed", "created_at": "2020-12-01T18:47:16Z", "updated_at": "2021-04-27T19:32:01Z", "due_on": "2021-05-15T07:00:00Z", "closed_at": "2021-04-27T19:32:01Z"}, "comments": 13, "created_at": "2021-01-27T17:34:57Z", "updated_at": "2021-02-05T16:22:41Z", "closed_at": "2021-02-05T16:22:41Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "try `mprof run` on this script:\r\n\r\n```\r\nimport mne\r\nmne.set_log_level(\"WARNING\")\r\n\r\n\r\ndef read_raws(paths, preload):\r\n    return [mne.io.read_raw_edf(path, preload=preload) for path in paths]\r\n\r\n\r\npaths = mne.datasets.sleep_physionet.age.fetch_data(\r\n    subjects=range(1, 10), recording=[1])\r\npaths, _ = zip(*paths)\r\n\r\nraws = read_raws(paths, preload=False)\r\n```\r\n\r\nit produces\r\n\r\n![figure_1](https://user-images.githubusercontent.com/161052/106030218-3db91000-60ce-11eb-9459-556ea3bba52d.png)\r\n\r\nit's very surprising that it requires so much memory even when preload=False.\r\n\r\nsee https://github.com/braindecode/braindecode/pull/188\r\n\r\ncc @gemeinl", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/8795/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8795/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/8791", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8791/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8791/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8791/events", "html_url": "https://github.com/mne-tools/mne-python/issues/8791", "id": 793899856, "node_id": "MDU6SXNzdWU3OTM4OTk4NTY=", "number": 8791, "title": " Inconsistent and probably problematic behaviors in coregistration", "user": {"login": "yh-luo", "id": 29604854, "node_id": "MDQ6VXNlcjI5NjA0ODU0", "avatar_url": "https://avatars.githubusercontent.com/u/29604854?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yh-luo", "html_url": "https://github.com/yh-luo", "followers_url": "https://api.github.com/users/yh-luo/followers", "following_url": "https://api.github.com/users/yh-luo/following{/other_user}", "gists_url": "https://api.github.com/users/yh-luo/gists{/gist_id}", "starred_url": "https://api.github.com/users/yh-luo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yh-luo/subscriptions", "organizations_url": "https://api.github.com/users/yh-luo/orgs", "repos_url": "https://api.github.com/users/yh-luo/repos", "events_url": "https://api.github.com/users/yh-luo/events{/privacy}", "received_events_url": "https://api.github.com/users/yh-luo/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/mne-tools/mne-python/milestones/19", "html_url": "https://github.com/mne-tools/mne-python/milestone/19", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/milestones/19/labels", "id": 6168664, "node_id": "MDk6TWlsZXN0b25lNjE2ODY2NA==", "number": 19, "title": "0.23", "description": "", "creator": {"login": "larsoner", "id": 2365790, "node_id": "MDQ6VXNlcjIzNjU3OTA=", "avatar_url": "https://avatars.githubusercontent.com/u/2365790?v=4", "gravatar_id": "", "url": "https://api.github.com/users/larsoner", "html_url": "https://github.com/larsoner", "followers_url": "https://api.github.com/users/larsoner/followers", "following_url": "https://api.github.com/users/larsoner/following{/other_user}", "gists_url": "https://api.github.com/users/larsoner/gists{/gist_id}", "starred_url": "https://api.github.com/users/larsoner/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/larsoner/subscriptions", "organizations_url": "https://api.github.com/users/larsoner/orgs", "repos_url": "https://api.github.com/users/larsoner/repos", "events_url": "https://api.github.com/users/larsoner/events{/privacy}", "received_events_url": "https://api.github.com/users/larsoner/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 58, "state": "closed", "created_at": "2020-12-01T18:47:16Z", "updated_at": "2021-04-27T19:32:01Z", "due_on": "2021-05-15T07:00:00Z", "closed_at": "2021-04-27T19:32:01Z"}, "comments": 5, "created_at": "2021-01-26T03:32:22Z", "updated_at": "2021-01-28T08:02:12Z", "closed_at": "2021-01-28T08:02:12Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "#### Describe the bug\r\nHi, I've noticed some inconsistent and probably problematic behaviors in ``mne coreg``. The problems are recorded in [the video](https://drive.google.com/file/d/11Ydv1H63JJWnbz6Rc92DLKfi5SMflWNA/view?usp=sharing).\r\n1. The values in **MRI Fiducials** are not always updated when the user clicks on different positions. For example, the coordinates of nasion are *not* updated in ``00:02-00:09`` but that of LPA *are* updated in ``00:12-00:17``. Then, the coordinates of RPA are *not* updated in ``00:17-00:20``. It's really frustrating to understand what's happening...\r\n2. When the values in **MRI Fiducials** are provided by the user, the coordinate system seems to be inverted. The weird behavior can be viewed from ``00:25`` to the end of the video.\r\n\r\nBecause the MRI images were acquired in a fMRI experiment which required the participants to wear goggles and headphones, sometimes I need to use FreeView to find the possible coordinates for better coregistration results. The above problems make it hard to do that.\r\n\r\nNothing was shown on the terminal running ``mne coreg``.\r\n\r\n#### Expected results\r\nReasonable coregistration.\r\n\r\n#### Actual results\r\nConfusing behaviors in ``mne coreg``.\r\n\r\n\r\n#### Additional information\r\nOS: Ubuntu 20.04\r\nmne.sys_info()\r\n```\r\nPlatform:      Linux-5.8.0-40-generic-x86_64-with-glibc2.10\r\nPython:        3.8.5 (default, Sep  4 2020, 07:30:14)  [GCC 7.3.0]\r\nExecutable:    /home/ntubabylab/anaconda3/envs/mne/bin/python\r\nCPU:           x86_64: 12 cores\r\nMemory:        62.8 GB\r\n\r\nmne:           0.22.0\r\nnumpy:         1.19.2 {blas=mkl_rt, lapack=mkl_rt}\r\nscipy:         1.5.2\r\nmatplotlib:    3.3.2 {backend=Qt5Agg}\r\n\r\nsklearn:       0.23.2\r\nnumba:         0.51.2\r\nnibabel:       3.2.0\r\nnilearn:       Not found\r\ndipy:          Not found\r\ncupy:          8.1.0\r\npandas:        1.1.3\r\nmayavi:        4.7.2\r\npyvista:       0.26.1 {pyvistaqt=0.2.0, OpenGL 4.5.0 NVIDIA 450.102.04 via GeForce GTX 1660/PCIe/SSE2}\r\nvtk:           9.0.1\r\nPyQt5:         5.15.1\r\n```\r\n", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/8791/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8791/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/8786", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8786/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8786/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8786/events", "html_url": "https://github.com/mne-tools/mne-python/issues/8786", "id": 793449008, "node_id": "MDU6SXNzdWU3OTM0NDkwMDg=", "number": 8786, "title": "MNE website down?", "user": {"login": "cbrnr", "id": 4377312, "node_id": "MDQ6VXNlcjQzNzczMTI=", "avatar_url": "https://avatars.githubusercontent.com/u/4377312?v=4", "gravatar_id": "", "url": "https://api.github.com/users/cbrnr", "html_url": "https://github.com/cbrnr", "followers_url": "https://api.github.com/users/cbrnr/followers", "following_url": "https://api.github.com/users/cbrnr/following{/other_user}", "gists_url": "https://api.github.com/users/cbrnr/gists{/gist_id}", "starred_url": "https://api.github.com/users/cbrnr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/cbrnr/subscriptions", "organizations_url": "https://api.github.com/users/cbrnr/orgs", "repos_url": "https://api.github.com/users/cbrnr/repos", "events_url": "https://api.github.com/users/cbrnr/events{/privacy}", "received_events_url": "https://api.github.com/users/cbrnr/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2021-01-25T14:53:22Z", "updated_at": "2021-01-25T15:19:10Z", "closed_at": "2021-01-25T15:00:47Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "I hope this isn't related to our recent renaming of master -> main, but our website at https://mne.tools is currently down. Any ideas? @hoechenberger @drammock", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/8786/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8786/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/8780", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8780/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8780/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8780/events", "html_url": "https://github.com/mne-tools/mne-python/pull/8780", "id": 792807028, "node_id": "MDExOlB1bGxSZXF1ZXN0NTYwNjA5Mzc5", "number": 8780, "title": "MRG, BUG: fix IO or read_ica_eeglab", "user": {"login": "agramfort", "id": 161052, "node_id": "MDQ6VXNlcjE2MTA1Mg==", "avatar_url": "https://avatars.githubusercontent.com/u/161052?v=4", "gravatar_id": "", "url": "https://api.github.com/users/agramfort", "html_url": "https://github.com/agramfort", "followers_url": "https://api.github.com/users/agramfort/followers", "following_url": "https://api.github.com/users/agramfort/following{/other_user}", "gists_url": "https://api.github.com/users/agramfort/gists{/gist_id}", "starred_url": "https://api.github.com/users/agramfort/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/agramfort/subscriptions", "organizations_url": "https://api.github.com/users/agramfort/orgs", "repos_url": "https://api.github.com/users/agramfort/repos", "events_url": "https://api.github.com/users/agramfort/events{/privacy}", "received_events_url": "https://api.github.com/users/agramfort/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/mne-tools/mne-python/milestones/19", "html_url": "https://github.com/mne-tools/mne-python/milestone/19", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/milestones/19/labels", "id": 6168664, "node_id": "MDk6TWlsZXN0b25lNjE2ODY2NA==", "number": 19, "title": "0.23", "description": "", "creator": {"login": "larsoner", "id": 2365790, "node_id": "MDQ6VXNlcjIzNjU3OTA=", "avatar_url": "https://avatars.githubusercontent.com/u/2365790?v=4", "gravatar_id": "", "url": "https://api.github.com/users/larsoner", "html_url": "https://github.com/larsoner", "followers_url": "https://api.github.com/users/larsoner/followers", "following_url": "https://api.github.com/users/larsoner/following{/other_user}", "gists_url": "https://api.github.com/users/larsoner/gists{/gist_id}", "starred_url": "https://api.github.com/users/larsoner/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/larsoner/subscriptions", "organizations_url": "https://api.github.com/users/larsoner/orgs", "repos_url": "https://api.github.com/users/larsoner/repos", "events_url": "https://api.github.com/users/larsoner/events{/privacy}", "received_events_url": "https://api.github.com/users/larsoner/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 58, "state": "closed", "created_at": "2020-12-01T18:47:16Z", "updated_at": "2021-04-27T19:32:01Z", "due_on": "2021-05-15T07:00:00Z", "closed_at": "2021-04-27T19:32:01Z"}, "comments": 9, "created_at": "2021-01-24T14:21:42Z", "updated_at": "2021-01-27T16:29:40Z", "closed_at": "2021-01-27T16:29:29Z", "author_association": "MEMBER", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/mne-tools/mne-python/pulls/8780", "html_url": "https://github.com/mne-tools/mne-python/pull/8780", "diff_url": "https://github.com/mne-tools/mne-python/pull/8780.diff", "patch_url": "https://github.com/mne-tools/mne-python/pull/8780.patch", "merged_at": "2021-01-27T16:29:29Z"}, "body": "attempt to close #8755\r\n\r\nmy debug script using this branch.\r\n\r\n```\r\nfrom scipy import linalg\r\nimport matplotlib.pyplot as plt\r\n\r\nimport mne\r\nfrom mne.viz.topomap import _find_topomap_coords\r\n\r\nica = mne.preprocessing.read_ica_eeglab('ICAamica_MNE_test.set')\r\n# ica.info = raw.info\r\n# ica._update_ica_names()\r\n# ica.plot_components()\r\n\r\nunmixing = ica.icaweights @ ica.icasphere\r\nmixing = linalg.pinv(unmixing)\r\n\r\npos = _find_topomap_coords(ica.info, picks=None)\r\nplt.close('all')\r\nmne.viz.plot_topomap(mixing[:, 7], pos=pos)\r\nplt.show()\r\n```\r\n\r\nhere are the ICA topos I get using EEGLAB\r\n\r\n<img width=\"755\" alt=\"Screenshot 2021-01-24 at 15 20 30\" src=\"https://user-images.githubusercontent.com/161052/105633240-bc584800-5e57-11eb-8739-f98be1914eb1.png\">\r\n\r\nIt's quite different from what I get using ica.plot_components() or using mne.viz.plot_topomap manually\r\nas above.\r\n\r\nany idea @cbrnr ?\r\n", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/8780/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8780/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/8779", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8779/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8779/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8779/events", "html_url": "https://github.com/mne-tools/mne-python/issues/8779", "id": 792659457, "node_id": "MDU6SXNzdWU3OTI2NTk0NTc=", "number": 8779, "title": "show parameter doesn't work with evoked.plot_topomap", "user": {"login": "jasmainak", "id": 15852194, "node_id": "MDQ6VXNlcjE1ODUyMTk0", "avatar_url": "https://avatars.githubusercontent.com/u/15852194?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jasmainak", "html_url": "https://github.com/jasmainak", "followers_url": "https://api.github.com/users/jasmainak/followers", "following_url": "https://api.github.com/users/jasmainak/following{/other_user}", "gists_url": "https://api.github.com/users/jasmainak/gists{/gist_id}", "starred_url": "https://api.github.com/users/jasmainak/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jasmainak/subscriptions", "organizations_url": "https://api.github.com/users/jasmainak/orgs", "repos_url": "https://api.github.com/users/jasmainak/repos", "events_url": "https://api.github.com/users/jasmainak/events{/privacy}", "received_events_url": "https://api.github.com/users/jasmainak/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}, {"id": 1290799321, "node_id": "MDU6TGFiZWwxMjkwNzk5MzIx", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/VIZ", "name": "VIZ", "color": "22e861", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2021-01-23T22:07:52Z", "updated_at": "2021-01-24T19:52:50Z", "closed_at": "2021-01-24T19:52:50Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "Here is the script to reproduce:\r\n\r\n```py\r\nimport os\r\nimport mne\r\n\r\nsample_data_folder = mne.datasets.sample.data_path()\r\nsample_data_raw_file = os.path.join(sample_data_folder, 'MEG', 'sample',\r\n                                    'sample_audvis_raw.fif')\r\nraw = mne.io.read_raw_fif(sample_data_raw_file, verbose=False).crop(tmax=120)\r\n\r\nevents = mne.find_events(raw, stim_channel='STI 014')\r\nevent_dict = {'auditory/left': 1, 'auditory/right': 2, 'visual/left': 3,\r\n              'visual/right': 4, 'face': 5, 'button': 32}\r\nepochs = mne.Epochs(raw, events, tmin=-0.2, tmax=0.5, event_id=event_dict,\r\n                    preload=True)\r\nepochs.pick_types(eeg=True, meg=False)\r\nevoked = epochs.average()\r\nevoked.plot_topomap(show=False)\r\n```", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/8779/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8779/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/8775", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8775/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8775/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8775/events", "html_url": "https://github.com/mne-tools/mne-python/pull/8775", "id": 792502964, "node_id": "MDExOlB1bGxSZXF1ZXN0NTYwMzc3OTk0", "number": 8775, "title": "MRG, BUG, DOC: derive GFP from average reference for EEG", "user": {"login": "hoechenberger", "id": 2046265, "node_id": "MDQ6VXNlcjIwNDYyNjU=", "avatar_url": "https://avatars.githubusercontent.com/u/2046265?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hoechenberger", "html_url": "https://github.com/hoechenberger", "followers_url": "https://api.github.com/users/hoechenberger/followers", "following_url": "https://api.github.com/users/hoechenberger/following{/other_user}", "gists_url": "https://api.github.com/users/hoechenberger/gists{/gist_id}", "starred_url": "https://api.github.com/users/hoechenberger/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hoechenberger/subscriptions", "organizations_url": "https://api.github.com/users/hoechenberger/orgs", "repos_url": "https://api.github.com/users/hoechenberger/repos", "events_url": "https://api.github.com/users/hoechenberger/events{/privacy}", "received_events_url": "https://api.github.com/users/hoechenberger/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}, {"id": 1290799321, "node_id": "MDU6TGFiZWwxMjkwNzk5MzIx", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/VIZ", "name": "VIZ", "color": "22e861", "default": false, "description": ""}, {"id": 1946100293, "node_id": "MDU6TGFiZWwxOTQ2MTAwMjkz", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/backported", "name": "backported", "color": "ae55db", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 64, "created_at": "2021-01-23T08:43:22Z", "updated_at": "2021-01-27T15:16:33Z", "closed_at": "2021-01-27T14:56:06Z", "author_association": "MEMBER", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/mne-tools/mne-python/pulls/8775", "html_url": "https://github.com/mne-tools/mne-python/pull/8775", "diff_url": "https://github.com/mne-tools/mne-python/pull/8775.diff", "patch_url": "https://github.com/mne-tools/mne-python/pull/8775.patch", "merged_at": "2021-01-27T14:56:06Z"}, "body": "The reason for #8772 is simply that we always calculated the GFP incorrectly, i.e. without re-referencing sensor signals to average first. When doing that, I now correctly get a flat GFP (0 at all time points) for single-channel recordings:\r\n\r\n<img width=\"439\" alt=\"Screen Shot 2021-01-23 at 09 43 44\" src=\"https://user-images.githubusercontent.com/2046265/105573681-92bbf580-5d5f-11eb-8cee-68bf5ab010d8.png\">\r\n\r\nThis also means that since the introduction of this feature in 0.15 or so, our GFP plots haven't been correct in terms of absolute amplitude (which isn't too bad since it's difficult to judge the absolute amplitudes from the plot anyway)\r\n\r\nCloses #8772, #8774\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/8775/reactions", "total_count": 1, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 1}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8775/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/8772", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8772/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8772/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8772/events", "html_url": "https://github.com/mne-tools/mne-python/issues/8772", "id": 792095228, "node_id": "MDU6SXNzdWU3OTIwOTUyMjg=", "number": 8772, "title": "plot_evoked(gfp=True) with single-channel data behaves incorrectly", "user": {"login": "hoechenberger", "id": 2046265, "node_id": "MDQ6VXNlcjIwNDYyNjU=", "avatar_url": "https://avatars.githubusercontent.com/u/2046265?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hoechenberger", "html_url": "https://github.com/hoechenberger", "followers_url": "https://api.github.com/users/hoechenberger/followers", "following_url": "https://api.github.com/users/hoechenberger/following{/other_user}", "gists_url": "https://api.github.com/users/hoechenberger/gists{/gist_id}", "starred_url": "https://api.github.com/users/hoechenberger/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hoechenberger/subscriptions", "organizations_url": "https://api.github.com/users/hoechenberger/orgs", "repos_url": "https://api.github.com/users/hoechenberger/repos", "events_url": "https://api.github.com/users/hoechenberger/events{/privacy}", "received_events_url": "https://api.github.com/users/hoechenberger/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}, {"id": 1290799321, "node_id": "MDU6TGFiZWwxMjkwNzk5MzIx", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/VIZ", "name": "VIZ", "color": "22e861", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": {"login": "hoechenberger", "id": 2046265, "node_id": "MDQ6VXNlcjIwNDYyNjU=", "avatar_url": "https://avatars.githubusercontent.com/u/2046265?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hoechenberger", "html_url": "https://github.com/hoechenberger", "followers_url": "https://api.github.com/users/hoechenberger/followers", "following_url": "https://api.github.com/users/hoechenberger/following{/other_user}", "gists_url": "https://api.github.com/users/hoechenberger/gists{/gist_id}", "starred_url": "https://api.github.com/users/hoechenberger/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hoechenberger/subscriptions", "organizations_url": "https://api.github.com/users/hoechenberger/orgs", "repos_url": "https://api.github.com/users/hoechenberger/repos", "events_url": "https://api.github.com/users/hoechenberger/events{/privacy}", "received_events_url": "https://api.github.com/users/hoechenberger/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "hoechenberger", "id": 2046265, "node_id": "MDQ6VXNlcjIwNDYyNjU=", "avatar_url": "https://avatars.githubusercontent.com/u/2046265?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hoechenberger", "html_url": "https://github.com/hoechenberger", "followers_url": "https://api.github.com/users/hoechenberger/followers", "following_url": "https://api.github.com/users/hoechenberger/following{/other_user}", "gists_url": "https://api.github.com/users/hoechenberger/gists{/gist_id}", "starred_url": "https://api.github.com/users/hoechenberger/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hoechenberger/subscriptions", "organizations_url": "https://api.github.com/users/hoechenberger/orgs", "repos_url": "https://api.github.com/users/hoechenberger/repos", "events_url": "https://api.github.com/users/hoechenberger/events{/privacy}", "received_events_url": "https://api.github.com/users/hoechenberger/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2021-01-22T15:28:39Z", "updated_at": "2021-01-27T14:56:06Z", "closed_at": "2021-01-27T14:56:06Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "#### Problem\r\nPlotting the GFP of data with only a single sensor via `plot_evoked(gfp=True)` produces a GFP, although the GFP \u2013 describing the spatial standard deviation \u2013 should not exist.\r\n\r\n#### Steps to reproduce\r\n```python\r\nimport os\r\nimport mne\r\nsample_data_folder = mne.datasets.sample.data_path()\r\nsample_data_raw_file = os.path.join(sample_data_folder, 'MEG', 'sample',\r\n                                    'sample_audvis_raw.fif')\r\nraw = mne.io.read_raw_fif(sample_data_raw_file, verbose=False)\r\nevents = mne.find_events(raw, stim_channel='STI 014')\r\nevent_dict = {'auditory/left': 1, 'auditory/right': 2, 'visual/left': 3,\r\n              'visual/right': 4}\r\nepochs = mne.Epochs(raw, events, tmin=-0.3, tmax=0.7, event_id=event_dict,\r\n                    preload=True)\r\nevoked = epochs['auditory/left'].average()\r\n\r\nevoked.pick('EEG 001').plot(gfp=True)\r\n```\r\n\r\n#### Expected results\r\n- either no GFP trace, or\r\n- a GFP constantly at zero, or\r\n- a warning, or\r\n- an error message\r\n\r\n#### Actual results\r\nGFP is displayed as the absolute value of the sensor signal.\r\n<img width=\"440\" alt=\"Screen Shot 2021-01-22 at 16 27 48\" src=\"https://user-images.githubusercontent.com/2046265/105510306-c69b0a80-5cce-11eb-90e5-3c628b4e2f62.png\">\r\n\r\n\r\n#### Additional information\r\nUsing `master`.", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/8772/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8772/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/8766", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8766/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8766/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8766/events", "html_url": "https://github.com/mne-tools/mne-python/issues/8766", "id": 789834454, "node_id": "MDU6SXNzdWU3ODk4MzQ0NTQ=", "number": 8766, "title": "IndexError: list index out of range    in   mne.io.read_epochs_eeglab", "user": {"login": "ZhengLiu97", "id": 65115609, "node_id": "MDQ6VXNlcjY1MTE1NjA5", "avatar_url": "https://avatars.githubusercontent.com/u/65115609?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ZhengLiu97", "html_url": "https://github.com/ZhengLiu97", "followers_url": "https://api.github.com/users/ZhengLiu97/followers", "following_url": "https://api.github.com/users/ZhengLiu97/following{/other_user}", "gists_url": "https://api.github.com/users/ZhengLiu97/gists{/gist_id}", "starred_url": "https://api.github.com/users/ZhengLiu97/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ZhengLiu97/subscriptions", "organizations_url": "https://api.github.com/users/ZhengLiu97/orgs", "repos_url": "https://api.github.com/users/ZhengLiu97/repos", "events_url": "https://api.github.com/users/ZhengLiu97/events{/privacy}", "received_events_url": "https://api.github.com/users/ZhengLiu97/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2021-01-20T10:09:22Z", "updated_at": "2021-11-25T17:45:59Z", "closed_at": "2021-01-20T10:19:39Z", "author_association": "NONE", "active_lock_reason": null, "body": "Here is my coe:\r\n```\r\nimport mne\r\nfpath = 'fear.set'\r\nepoch = mne.io.read_epochs_eeglab(fpath)\r\n```\r\nThen an error occurred:\r\n```\r\n  File \"<input>\", line 1, in <module>\r\n  File \"D:\\SEEG_Cognition\\SEEG\\lib\\site-packages\\mne\\io\\eeglab\\eeglab.py\", line 279, in read_epochs_eeglab\r\n    uint16_codec=uint16_codec)\r\n  File \"<decorator-gen-223>\", line 24, in __init__\r\n  File \"D:\\SEEG_Cognition\\SEEG\\lib\\site-packages\\mne\\io\\eeglab\\eeglab.py\", line 471, in __init__\r\n    event_latencies.append(events[ev_idx].latency)\r\nIndexError: list index out of range\r\n```\r\nHere is my data https://drive.google.com/file/d/1F7NczB4gjqdcX-1wf705Dm7Z8BXYmdV0/view?usp=sharing", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/8766/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8766/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/8764", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8764/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8764/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8764/events", "html_url": "https://github.com/mne-tools/mne-python/issues/8764", "id": 788386190, "node_id": "MDU6SXNzdWU3ODgzODYxOTA=", "number": 8764, "title": "Sample data set cannot be downloaded if data folder does not exist", "user": {"login": "cbrnr", "id": 4377312, "node_id": "MDQ6VXNlcjQzNzczMTI=", "avatar_url": "https://avatars.githubusercontent.com/u/4377312?v=4", "gravatar_id": "", "url": "https://api.github.com/users/cbrnr", "html_url": "https://github.com/cbrnr", "followers_url": "https://api.github.com/users/cbrnr/followers", "following_url": "https://api.github.com/users/cbrnr/following{/other_user}", "gists_url": "https://api.github.com/users/cbrnr/gists{/gist_id}", "starred_url": "https://api.github.com/users/cbrnr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/cbrnr/subscriptions", "organizations_url": "https://api.github.com/users/cbrnr/orgs", "repos_url": "https://api.github.com/users/cbrnr/repos", "events_url": "https://api.github.com/users/cbrnr/events{/privacy}", "received_events_url": "https://api.github.com/users/cbrnr/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 15, "created_at": "2021-01-18T16:05:07Z", "updated_at": "2021-01-29T15:09:25Z", "closed_at": "2021-01-29T15:09:25Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "The default location for MNE sample data is `~/mne_data`. Apparently, if this folder does not exist the data set cannot be downloaded:\r\n\r\n```python\r\n# make sure the folder \"~/mne_data\" does not exist!\r\nimport mne\r\nfrom mne.datasets import sample\r\n\r\n\r\ndata_path = sample.data_path()\r\nraw_fname = data_path + '/MEG/sample/sample_audvis_filt-0-40_raw.fif'\r\n\r\nraw = mne.io.read_raw_fif(raw_fname)\r\n```\r\n\r\nI get the following error:\r\n\r\n```\r\nDownloading archive MNE-sample-data-processed.tar.gz to /Users/clemens/mne_data\r\nDownloading https://files.osf.io/v1/resources/rxvq7/providers/osfstorage/59c0e26f9ad5a1025c4ab159?version=5&action=download&direct (1.54 GB)\r\n  0%|          | Downloading : 0.00/1.54G [00:00<?,        ?B/s]Error while fetching file https://osf.io/86qa2/download?version=5. Dataset fetching aborted.\r\nTraceback (most recent call last):\r\n  File \"/usr/local/lib/python3.9/site-packages/IPython/core/interactiveshell.py\", line 3418, in run_code\r\n    exec(code_obj, self.user_global_ns, self.user_ns)\r\n  File \"<ipython-input-2-9a4a5c6c7639>\", line 1, in <module>\r\n    runfile('/Users/clemens/Library/Application Support/JetBrains/PyCharm2020.3/scratches/scratch.py', wdir='/Users/clemens/Library/Application Support/JetBrains/PyCharm2020.3/scratches')\r\n  File \"/Applications/PyCharm.app/Contents/plugins/python/helpers/pydev/_pydev_bundle/pydev_umd.py\", line 197, in runfile\r\n    pydev_imports.execfile(filename, global_vars, local_vars)  # execute the script\r\n  File \"/Applications/PyCharm.app/Contents/plugins/python/helpers/pydev/_pydev_imps/_pydev_execfile.py\", line 18, in execfile\r\n    exec(compile(contents+\"\\n\", file, 'exec'), glob, loc)\r\n  File \"/Users/clemens/Library/Application Support/JetBrains/PyCharm2020.3/scratches/scratch.py\", line 5, in <module>\r\n    data_path = sample.data_path()\r\n  File \"<decorator-gen-461>\", line 24, in data_path\r\n  File \"/Users/clemens/Repositories/mne-python/mne/datasets/sample/sample.py\", line 19, in data_path\r\n    return _data_path(path=path, force_update=force_update,\r\n  File \"/Users/clemens/Repositories/mne-python/mne/datasets/utils.py\", line 418, in _data_path\r\n    remove_archive, full = _download(path, u, an, h)\r\n  File \"/Users/clemens/Repositories/mne-python/mne/datasets/utils.py\", line 475, in _download\r\n    _fetch_file(url, full_name, print_destination=False,\r\n  File \"<decorator-gen-3>\", line 24, in _fetch_file\r\n  File \"/Users/clemens/Repositories/mne-python/mne/utils/fetching.py\", line 117, in _fetch_file\r\n    _get_http(url, temp_file_name, initial_size, timeout, verbose_bool)\r\n  File \"/Users/clemens/Repositories/mne-python/mne/utils/fetching.py\", line 55, in _get_http\r\n    with open(temp_file_name, mode) as local_file:\r\nFileNotFoundError: [Errno 2] No such file or directory: '/Users/clemens/mne_data/MNE-sample-data-processed.tar.gz.part'\r\n```\r\n\r\nEverything works as expected if the folder `~/mne_data` exists (even if it is just an empty folder). We should automatically create this folder if not present to prevent this error.", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/8764/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8764/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/8761", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8761/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8761/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8761/events", "html_url": "https://github.com/mne-tools/mne-python/issues/8761", "id": 788035228, "node_id": "MDU6SXNzdWU3ODgwMzUyMjg=", "number": 8761, "title": "misc issues with plotting in MNE", "user": {"login": "jasmainak", "id": 15852194, "node_id": "MDQ6VXNlcjE1ODUyMTk0", "avatar_url": "https://avatars.githubusercontent.com/u/15852194?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jasmainak", "html_url": "https://github.com/jasmainak", "followers_url": "https://api.github.com/users/jasmainak/followers", "following_url": "https://api.github.com/users/jasmainak/following{/other_user}", "gists_url": "https://api.github.com/users/jasmainak/gists{/gist_id}", "starred_url": "https://api.github.com/users/jasmainak/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jasmainak/subscriptions", "organizations_url": "https://api.github.com/users/jasmainak/orgs", "repos_url": "https://api.github.com/users/jasmainak/repos", "events_url": "https://api.github.com/users/jasmainak/events{/privacy}", "received_events_url": "https://api.github.com/users/jasmainak/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}, {"id": 1290799321, "node_id": "MDU6TGFiZWwxMjkwNzk5MzIx", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/VIZ", "name": "VIZ", "color": "22e861", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2021-01-18T08:13:07Z", "updated_at": "2021-04-21T23:47:02Z", "closed_at": "2021-04-21T23:47:01Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "Grouping a bunch of misc viz issues that I faced when using MNE:\r\n\r\n1. If you do:\r\n\r\n```py\r\nepochs.info['bads'] = [epochs.ch_names[0]]\r\nepochs.plot()\r\n```\r\n\r\nit does not show the channel name in gray. Instead it doesn't plot it. This is not technically a bug but inconsistent with what `raw.plot()` does. I think it would be useful to see the bad channel also in this plot.\r\n\r\n2. ~~It would be nice to have a scale also in the `epochs.plot` as in `raw.plot()`. It really helps improve the interpretability of the data.~~ this already exists, press `s` to show it.\r\n3. ~~The `scale` shown in `raw.plot()` is incorrect if `scalings='auto'` since the scale is channel-wise. The scalings/ylim issue seems to be common across multiple viz functions~~ disputed; see below (https://github.com/mne-tools/mne-python/issues/8761#issuecomment-824366439).\r\n4. ~~The vertical green line in `epochs.plot()` seems to disappear when you scroll to other epochs.~~ addressed in #9326\r\n4. ~~In `raw.plot_psd` the usual matplotlib controls to zoom in, \"home button\" etc are missing. Not sure if it's only my set up. Happy to share more details if folks can't reproduce easily.~~ addressed in #9331\r\n5. ~~Selecting a channel in `evoked.plot()` should make the line plot bold so we can see that channel more clearly. I think this is how it used be before. Not sure if there were any reasons to change it?~~ not a regression; see below (https://github.com/mne-tools/mne-python/issues/8761#issuecomment-824368727).", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/8761/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8761/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/8755", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8755/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8755/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8755/events", "html_url": "https://github.com/mne-tools/mne-python/issues/8755", "id": 787168500, "node_id": "MDU6SXNzdWU3ODcxNjg1MDA=", "number": 8755, "title": "Read ICA EEGLab: problems with AMICA decomposition ", "user": {"login": "michaelcgold", "id": 4649511, "node_id": "MDQ6VXNlcjQ2NDk1MTE=", "avatar_url": "https://avatars.githubusercontent.com/u/4649511?v=4", "gravatar_id": "", "url": "https://api.github.com/users/michaelcgold", "html_url": "https://github.com/michaelcgold", "followers_url": "https://api.github.com/users/michaelcgold/followers", "following_url": "https://api.github.com/users/michaelcgold/following{/other_user}", "gists_url": "https://api.github.com/users/michaelcgold/gists{/gist_id}", "starred_url": "https://api.github.com/users/michaelcgold/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/michaelcgold/subscriptions", "organizations_url": "https://api.github.com/users/michaelcgold/orgs", "repos_url": "https://api.github.com/users/michaelcgold/repos", "events_url": "https://api.github.com/users/michaelcgold/events{/privacy}", "received_events_url": "https://api.github.com/users/michaelcgold/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 8, "created_at": "2021-01-15T20:18:35Z", "updated_at": "2021-01-28T01:25:39Z", "closed_at": "2021-01-27T16:29:29Z", "author_association": "NONE", "active_lock_reason": null, "body": "\r\n### (possible) Bug\r\n\r\n`read_ica_eeglab()` appears to not be able to read in AMICA (note: *not* `runica`) decompositions from an EEGLab .set file.\r\n\r\nThe error upon trying to instantiate ICA:\r\n\r\n```\r\n  AssertionError                            Traceback (most recent call last)\r\n <ipython-input-10-a6f5a4e0501a> in <module>\r\n       5 from mne import preprocessing\r\n       6 \r\n ----> 7 ica = preprocessing.read_ica_eeglab('full_filepath')\r\n       8 \r\n       9 \r\n \r\n ~/opt/anaconda3/envs/mne/lib/python3.8/site-packages/mne/preprocessing/ica.py in read_ica_eeglab(fname)\r\n    2754 \r\n    2755     n_ch = len(ica.ch_names)\r\n -> 2756     assert eeg.icaweights.shape == (n_components, n_ch)\r\n    2757     # When PCA reduction is used in EEGLAB, runica returns\r\n    2758     # weights= weights*sphere*eigenvectors(:,1:ncomps)';\r\n \r\n AssertionError: \r\n```\r\n\r\n\r\n\r\n### Steps to reproduce\r\n ICA was performed with EEGLab's [AMICA](https://github.com/japalmer29/amica/wiki/AMICA) (not runica) with PCA reduction to rank correct for interpolated channels.\r\n\r\nLooking at the data in EEGLab, `ICAweights = n_components x n_pcs`, and `ICAsphere = n_pcs x n_channels`. I\u2019m guessing `read_ica_eeglab` is assuming the `icaweights` matrix is already multiplied by `icasphere`.\r\n\r\n\r\n### Expected results\r\n`read_ica_eeglab` should correctly read in pca reduced IC decompositions from AMICA (and possibly other algorithms -- this might want to be tested, such as FASTICA).\r\n\r\n### Minimal reproducible example\r\n[61 channel recording (.set/.fdt)](https://github.com/mne-tools/mne-python/files/5822735/MNE_TestData.zip)\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/8755/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8755/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/8750", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8750/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8750/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8750/events", "html_url": "https://github.com/mne-tools/mne-python/issues/8750", "id": 786137633, "node_id": "MDU6SXNzdWU3ODYxMzc2MzM=", "number": 8750, "title": "New CTF acquisition software (v6.2.0) format incompatible with mne.io.read_raw_ctf", "user": {"login": "jstout211", "id": 2371720, "node_id": "MDQ6VXNlcjIzNzE3MjA=", "avatar_url": "https://avatars.githubusercontent.com/u/2371720?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jstout211", "html_url": "https://github.com/jstout211", "followers_url": "https://api.github.com/users/jstout211/followers", "following_url": "https://api.github.com/users/jstout211/following{/other_user}", "gists_url": "https://api.github.com/users/jstout211/gists{/gist_id}", "starred_url": "https://api.github.com/users/jstout211/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jstout211/subscriptions", "organizations_url": "https://api.github.com/users/jstout211/orgs", "repos_url": "https://api.github.com/users/jstout211/repos", "events_url": "https://api.github.com/users/jstout211/events{/privacy}", "received_events_url": "https://api.github.com/users/jstout211/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/mne-tools/mne-python/milestones/20", "html_url": "https://github.com/mne-tools/mne-python/milestone/20", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/milestones/20/labels", "id": 6675015, "node_id": "MDk6TWlsZXN0b25lNjY3NTAxNQ==", "number": 20, "title": "0.24", "description": "", "creator": {"login": "larsoner", "id": 2365790, "node_id": "MDQ6VXNlcjIzNjU3OTA=", "avatar_url": "https://avatars.githubusercontent.com/u/2365790?v=4", "gravatar_id": "", "url": "https://api.github.com/users/larsoner", "html_url": "https://github.com/larsoner", "followers_url": "https://api.github.com/users/larsoner/followers", "following_url": "https://api.github.com/users/larsoner/following{/other_user}", "gists_url": "https://api.github.com/users/larsoner/gists{/gist_id}", "starred_url": "https://api.github.com/users/larsoner/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/larsoner/subscriptions", "organizations_url": "https://api.github.com/users/larsoner/orgs", "repos_url": "https://api.github.com/users/larsoner/repos", "events_url": "https://api.github.com/users/larsoner/events{/privacy}", "received_events_url": "https://api.github.com/users/larsoner/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 53, "state": "closed", "created_at": "2021-04-19T12:32:46Z", "updated_at": "2021-11-03T16:14:55Z", "due_on": "2021-11-01T07:00:00Z", "closed_at": "2021-11-03T16:14:55Z"}, "comments": 8, "created_at": "2021-01-14T16:35:58Z", "updated_at": "2021-04-29T17:01:18Z", "closed_at": "2021-04-29T17:01:18Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "#### Describe the bug\r\nWe recently installed the new CTF acquisition software installed (v6.2.0) and mne.io.read_raw_ctf throws error on newly acquired data.  This is a repeatable error on newly acquired datasets.  Previous datasets acquired before the software update, continue to load properly.  \r\n\r\n#### Steps to reproduce\r\nUnable to attach dataset (too big) - here is a google drive link to the dataset: https://drive.google.com/file/d/1LRN7rmzjg-CkvrBh0Q-0SCnqizZHmT7X/view?usp=sharing\r\n\r\nTo reproduce:  raw = mne.io.read_raw_ctf(dataset)\r\n\r\n#### Expected results\r\nThis still works for older datasets acquired before the acquisition upgrade.\r\n![image](https://user-images.githubusercontent.com/2371720/104616989-edb36580-5658-11eb-8a17-9cce9b221744.png)\r\n\r\n\r\n#### Actual results\r\n![image](https://user-images.githubusercontent.com/2371720/104616735-a927ca00-5658-11eb-8639-11726dadd033.png)\r\n\r\n\r\n#### Additional information\r\nIn [4]: mne.sys_info()\r\n********************************************************************************\r\nWARNING: Imported VTK version (8.1) does not match the one used\r\n         to build the TVTK classes (9.0). This may cause problems.\r\n         Please rebuild TVTK.\r\n********************************************************************************\r\n\r\nPlatform:      Linux-4.18.0-240.10.1.el8_3.x86_64-x86_64-with-redhat-8.3-Ootpa\r\nPython:        3.7.8 | packaged by conda-forge | (default, Jul 31 2020, 02:25:08)  [GCC 7.5.0]\r\nExecutable:    /home/stoutjd/miniconda3/envs/mne/bin/python\r\nCPU:           x86_64: 12 cores\r\nMemory:        15.3 GB\r\n\r\nmne:           0.21.1\r\nnumpy:         1.19.4 {blas=openblas, lapack=openblas}\r\nscipy:         1.4.1\r\nmatplotlib:    3.3.3 {backend=Qt5Agg}\r\n\r\nsklearn:       0.23.2\r\nnumba:         0.51.2\r\nnibabel:       3.2.0\r\ncupy:          Not found\r\npandas:        1.1.4\r\ndipy:          1.3.0\r\nmayavi:        4.7.2\r\npyvista:       0.27.2 {OpenGL 4.6 (Core Profile) Mesa 20.1.4 via Mesa Intel(R) UHD Graphics (CML GT2)}\r\nvtk:           8.1.2\r\nPyQt5:         5.12.3\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/8750/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8750/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/8746", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8746/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8746/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8746/events", "html_url": "https://github.com/mne-tools/mne-python/issues/8746", "id": 785644585, "node_id": "MDU6SXNzdWU3ODU2NDQ1ODU=", "number": 8746, "title": "evoked.plot_image silently \"works\" when clim is not a dict", "user": {"login": "jasmainak", "id": 15852194, "node_id": "MDQ6VXNlcjE1ODUyMTk0", "avatar_url": "https://avatars.githubusercontent.com/u/15852194?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jasmainak", "html_url": "https://github.com/jasmainak", "followers_url": "https://api.github.com/users/jasmainak/followers", "following_url": "https://api.github.com/users/jasmainak/following{/other_user}", "gists_url": "https://api.github.com/users/jasmainak/gists{/gist_id}", "starred_url": "https://api.github.com/users/jasmainak/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jasmainak/subscriptions", "organizations_url": "https://api.github.com/users/jasmainak/orgs", "repos_url": "https://api.github.com/users/jasmainak/repos", "events_url": "https://api.github.com/users/jasmainak/events{/privacy}", "received_events_url": "https://api.github.com/users/jasmainak/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}, {"id": 559859326, "node_id": "MDU6TGFiZWw1NTk4NTkzMjY=", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/MEDIUM", "name": "MEDIUM", "color": "d93f0b", "default": false, "description": null}, {"id": 1290799321, "node_id": "MDU6TGFiZWwxMjkwNzk5MzIx", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/VIZ", "name": "VIZ", "color": "22e861", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": {"login": "matteoanelli", "id": 32127121, "node_id": "MDQ6VXNlcjMyMTI3MTIx", "avatar_url": "https://avatars.githubusercontent.com/u/32127121?v=4", "gravatar_id": "", "url": "https://api.github.com/users/matteoanelli", "html_url": "https://github.com/matteoanelli", "followers_url": "https://api.github.com/users/matteoanelli/followers", "following_url": "https://api.github.com/users/matteoanelli/following{/other_user}", "gists_url": "https://api.github.com/users/matteoanelli/gists{/gist_id}", "starred_url": "https://api.github.com/users/matteoanelli/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/matteoanelli/subscriptions", "organizations_url": "https://api.github.com/users/matteoanelli/orgs", "repos_url": "https://api.github.com/users/matteoanelli/repos", "events_url": "https://api.github.com/users/matteoanelli/events{/privacy}", "received_events_url": "https://api.github.com/users/matteoanelli/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "matteoanelli", "id": 32127121, "node_id": "MDQ6VXNlcjMyMTI3MTIx", "avatar_url": "https://avatars.githubusercontent.com/u/32127121?v=4", "gravatar_id": "", "url": "https://api.github.com/users/matteoanelli", "html_url": "https://github.com/matteoanelli", "followers_url": "https://api.github.com/users/matteoanelli/followers", "following_url": "https://api.github.com/users/matteoanelli/following{/other_user}", "gists_url": "https://api.github.com/users/matteoanelli/gists{/gist_id}", "starred_url": "https://api.github.com/users/matteoanelli/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/matteoanelli/subscriptions", "organizations_url": "https://api.github.com/users/matteoanelli/orgs", "repos_url": "https://api.github.com/users/matteoanelli/repos", "events_url": "https://api.github.com/users/matteoanelli/events{/privacy}", "received_events_url": "https://api.github.com/users/matteoanelli/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 1, "created_at": "2021-01-14T04:39:22Z", "updated_at": "2021-03-17T20:23:28Z", "closed_at": "2021-03-17T20:23:28Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "Here is the script to reproduce:\r\n\r\n```py\r\nimport os\r\nimport mne\r\n\r\nsample_data_folder = mne.datasets.sample.data_path()\r\nsample_data_raw_file = os.path.join(sample_data_folder, 'MEG', 'sample',\r\n                                    'sample_audvis_raw.fif')\r\nraw = mne.io.read_raw_fif(sample_data_raw_file, verbose=False).crop(tmax=120)\r\n\r\nevents = mne.find_events(raw, stim_channel='STI 014')\r\nevent_dict = {'auditory/left': 1, 'auditory/right': 2, 'visual/left': 3,\r\n              'visual/right': 4, 'face': 5, 'button': 32}\r\nepochs = mne.Epochs(raw, events, tmin=-0.2, tmax=0.5, event_id=event_dict,\r\n                    preload=True)\r\nepochs.pick_types(eeg=True, meg=False)\r\nevoked = epochs.average()\r\n\r\nevoked.plot_image(clim =[-4, 4])\r\n```\r\nThis is a bit of a nitpicky bug but note how the `clim` has no effect. I think it should throw an error or use this `clim` ... either of the two. Fixing this can help improve user experience :)", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/8746/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8746/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/8745", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8745/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8745/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8745/events", "html_url": "https://github.com/mne-tools/mne-python/issues/8745", "id": 785641826, "node_id": "MDU6SXNzdWU3ODU2NDE4MjY=", "number": 8745, "title": "ica.get_sources seems to be broken", "user": {"login": "jasmainak", "id": 15852194, "node_id": "MDQ6VXNlcjE1ODUyMTk0", "avatar_url": "https://avatars.githubusercontent.com/u/15852194?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jasmainak", "html_url": "https://github.com/jasmainak", "followers_url": "https://api.github.com/users/jasmainak/followers", "following_url": "https://api.github.com/users/jasmainak/following{/other_user}", "gists_url": "https://api.github.com/users/jasmainak/gists{/gist_id}", "starred_url": "https://api.github.com/users/jasmainak/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jasmainak/subscriptions", "organizations_url": "https://api.github.com/users/jasmainak/orgs", "repos_url": "https://api.github.com/users/jasmainak/repos", "events_url": "https://api.github.com/users/jasmainak/events{/privacy}", "received_events_url": "https://api.github.com/users/jasmainak/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 9, "created_at": "2021-01-14T04:31:49Z", "updated_at": "2021-02-05T16:22:41Z", "closed_at": "2021-02-05T16:22:41Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "here is the script to reproduce:\r\n\r\n```py\r\nimport mne\r\nfrom mne.preprocessing import ICA\r\nfrom mne.datasets import sample\r\n\r\ndata_path = sample.data_path()\r\nraw_fname = data_path + '/MEG/sample/sample_audvis_filt-0-40_raw.fif'\r\n\r\nraw = mne.io.read_raw_fif(raw_fname)\r\nraw.pick_types(meg=False, eeg=True, exclude='bads', stim=True).load_data()\r\n\r\nica = ICA(n_components=0.95, method='fastica').fit(raw)\r\n\r\nica_sources = ica.get_sources(raw, start=20, stop=40)\r\ndata, times = ica_sources[:]\r\n\r\nica_sources.plot()\r\nassert data.shape == times.shape\r\nassert abs(times[0] - 20) < 1\r\n```\r\n\r\nI get:\r\n\r\n```py\r\nValueError: shape mismatch: objects cannot be broadcast to a single shape\r\n```", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/8745/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8745/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/8733", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8733/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8733/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8733/events", "html_url": "https://github.com/mne-tools/mne-python/issues/8733", "id": 784106864, "node_id": "MDU6SXNzdWU3ODQxMDY4NjQ=", "number": 8733, "title": "ValueError in mne.viz.plot_evoked_joint", "user": {"login": "ZhengLiu97", "id": 65115609, "node_id": "MDQ6VXNlcjY1MTE1NjA5", "avatar_url": "https://avatars.githubusercontent.com/u/65115609?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ZhengLiu97", "html_url": "https://github.com/ZhengLiu97", "followers_url": "https://api.github.com/users/ZhengLiu97/followers", "following_url": "https://api.github.com/users/ZhengLiu97/following{/other_user}", "gists_url": "https://api.github.com/users/ZhengLiu97/gists{/gist_id}", "starred_url": "https://api.github.com/users/ZhengLiu97/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ZhengLiu97/subscriptions", "organizations_url": "https://api.github.com/users/ZhengLiu97/orgs", "repos_url": "https://api.github.com/users/ZhengLiu97/repos", "events_url": "https://api.github.com/users/ZhengLiu97/events{/privacy}", "received_events_url": "https://api.github.com/users/ZhengLiu97/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "drammock", "id": 1810515, "node_id": "MDQ6VXNlcjE4MTA1MTU=", "avatar_url": "https://avatars.githubusercontent.com/u/1810515?v=4", "gravatar_id": "", "url": "https://api.github.com/users/drammock", "html_url": "https://github.com/drammock", "followers_url": "https://api.github.com/users/drammock/followers", "following_url": "https://api.github.com/users/drammock/following{/other_user}", "gists_url": "https://api.github.com/users/drammock/gists{/gist_id}", "starred_url": "https://api.github.com/users/drammock/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/drammock/subscriptions", "organizations_url": "https://api.github.com/users/drammock/orgs", "repos_url": "https://api.github.com/users/drammock/repos", "events_url": "https://api.github.com/users/drammock/events{/privacy}", "received_events_url": "https://api.github.com/users/drammock/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "drammock", "id": 1810515, "node_id": "MDQ6VXNlcjE4MTA1MTU=", "avatar_url": "https://avatars.githubusercontent.com/u/1810515?v=4", "gravatar_id": "", "url": "https://api.github.com/users/drammock", "html_url": "https://github.com/drammock", "followers_url": "https://api.github.com/users/drammock/followers", "following_url": "https://api.github.com/users/drammock/following{/other_user}", "gists_url": "https://api.github.com/users/drammock/gists{/gist_id}", "starred_url": "https://api.github.com/users/drammock/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/drammock/subscriptions", "organizations_url": "https://api.github.com/users/drammock/orgs", "repos_url": "https://api.github.com/users/drammock/repos", "events_url": "https://api.github.com/users/drammock/events{/privacy}", "received_events_url": "https://api.github.com/users/drammock/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 4, "created_at": "2021-01-12T10:24:43Z", "updated_at": "2021-01-14T14:48:52Z", "closed_at": "2021-01-14T14:48:52Z", "author_association": "NONE", "active_lock_reason": null, "body": "I am using SEEG data, and I want to plot evoke joint figure, while I've got this problem.\r\n```\r\n    mne.viz.plot_evoked_joint(evoke)\r\n  File \"D:\\SEEG_Cognition\\SEEG\\lib\\site-packages\\mne\\viz\\evoked.py\", line 1458, in plot_evoked_joint\r\n    colorbar=False, **topomap_args_pass)\r\n  File \"D:\\SEEG_Cognition\\SEEG\\lib\\site-packages\\mne\\evoked.py\", line 356, in plot_topomap\r\n    nrows=nrows, ncols=ncols)\r\n  File \"D:\\SEEG_Cognition\\SEEG\\lib\\site-packages\\mne\\viz\\topomap.py\", line 1540, in plot_evoked_topomap\r\n    _prepare_topomap_plot(evoked, ch_type, sphere=sphere)\r\n  File \"D:\\SEEG_Cognition\\SEEG\\lib\\site-packages\\mne\\viz\\topomap.py\", line 103, in _prepare_topomap_plot\r\n    exclude='bads')\r\n  File \"D:\\SEEG_Cognition\\SEEG\\lib\\site-packages\\mne\\io\\pick.py\", line 446, in pick_types\r\n    _check_meg_type(meg)\r\n  File \"D:\\SEEG_Cognition\\SEEG\\lib\\site-packages\\mne\\io\\pick.py\", line 348, in _check_meg_type\r\n    % (allowed_types, meg))\r\nValueError: meg value must be one of ['grad', 'mag', 'planar1', 'planar2'] or bool, not seeg\r\n```\r\nmy code is pretty simpe, just \r\n```\r\nimport mne\r\n\r\nfpath = 'color_epoch.fif'\r\ndata = mne.read_epochs(fpath, preload=True)\r\nevoke = data['red'].average()\r\nmne.viz.plot_evoked_joint(evoke)\r\n```\r\nHere is the data's link.\r\n\r\nhttps://drive.google.com/file/d/1zIinPymoWgHlKav594EHyekU8zjewVS-/view?usp=sharing\r\n", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/8733/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8733/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/8726", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8726/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8726/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8726/events", "html_url": "https://github.com/mne-tools/mne-python/issues/8726", "id": 782497807, "node_id": "MDU6SXNzdWU3ODI0OTc4MDc=", "number": 8726, "title": "set_bipolar_reference does not work for epochs data", "user": {"login": "jasmainak", "id": 15852194, "node_id": "MDQ6VXNlcjE1ODUyMTk0", "avatar_url": "https://avatars.githubusercontent.com/u/15852194?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jasmainak", "html_url": "https://github.com/jasmainak", "followers_url": "https://api.github.com/users/jasmainak/followers", "following_url": "https://api.github.com/users/jasmainak/following{/other_user}", "gists_url": "https://api.github.com/users/jasmainak/gists{/gist_id}", "starred_url": "https://api.github.com/users/jasmainak/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jasmainak/subscriptions", "organizations_url": "https://api.github.com/users/jasmainak/orgs", "repos_url": "https://api.github.com/users/jasmainak/repos", "events_url": "https://api.github.com/users/jasmainak/events{/privacy}", "received_events_url": "https://api.github.com/users/jasmainak/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2021-01-09T02:55:14Z", "updated_at": "2021-01-10T18:50:02Z", "closed_at": "2021-01-10T18:50:02Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "Somewhat related to my struggles with this function in #8718 . Here is a script to reproduce on master:\r\n\r\n```py\r\nimport os\r\nimport mne\r\n\r\nn_picks = 10\r\n\r\nsample_data_folder = mne.datasets.sample.data_path()\r\nsample_data_raw_file = os.path.join(sample_data_folder, 'MEG', 'sample',\r\n                                    'sample_audvis_raw.fif')\r\nraw = mne.io.read_raw_fif(sample_data_raw_file, verbose=False).crop(tmax=60)\r\n\r\nevents = mne.find_events(raw, stim_channel='STI 014')\r\n\r\nepochs = mne.Epochs(raw, events, tmin=-0.3, tmax=0.7, preload=True)\r\n\r\nepochs.pick_types(meg=False, eeg=True)\r\nch_names = epochs.info['ch_names']\r\nepochs.pick_channels(ch_names[:n_picks])\r\nch_names = epochs.ch_names\r\n\r\nanode, cathode = ch_names[1:], ch_names[:-1]\r\n\r\nevoked = epochs.average()\r\nevoked_bipolar1 = mne.set_bipolar_reference(evoked, anode=anode, cathode=cathode)\r\n\r\nepochs_bipolar = mne.set_bipolar_reference(epochs, anode=anode, cathode=cathode)\r\nevoked_bipolar2 = epochs_bipolar.average()\r\n```\r\n\r\nI get:\r\n\r\n```py\r\n---------------------------------------------------------------------------\r\nIndexError                                Traceback (most recent call last)\r\n~/Documents/github_repos/mne-python/tutorials/epochs/plot_10_epochs_overview.py in <module>\r\n     23 evoked_bipolar1 = mne.set_bipolar_reference(evoked, anode=anode, cathode=cathode)\r\n     24 \r\n---> 25 epochs_bipolar = mne.set_bipolar_reference(epochs, anode=anode, cathode=cathode)\r\n     26 evoked_bipolar2 = epochs_bipolar.average()\r\n     27 \r\n\r\n<decorator-gen-232> in set_bipolar_reference(inst, anode, cathode, ch_name, ch_info, drop_refs, copy, verbose)\r\n\r\n~/Documents/github_repos/mne-python/mne/io/reference.py in set_bipolar_reference(inst, anode, cathode, ch_name, ch_info, drop_refs, copy, verbose)\r\n    504     if drop_refs:\r\n    505         drop_channels = list((set(anode) | set(cathode)) & set(inst.ch_names))\r\n--> 506         inst.drop_channels(drop_channels)\r\n    507 \r\n    508     return inst\r\n\r\n~/Documents/github_repos/mne-python/mne/channels/channels.py in drop_channels(self, ch_names)\r\n    894                    if ch in self.ch_names]\r\n    895         idx = np.setdiff1d(np.arange(len(self.ch_names)), bad_idx)\r\n--> 896         return self._pick_drop_channels(idx)\r\n    897 \r\n    898     def _pick_drop_channels(self, idx):\r\n\r\n~/Documents/github_repos/mne-python/mne/channels/channels.py in _pick_drop_channels(self, idx)\r\n    909 \r\n    910         if getattr(self, 'picks', None) is not None:\r\n--> 911             self.picks = self.picks[idx]\r\n    912 \r\n    913         if getattr(self, '_read_picks', None) is not None:\r\n\r\nIndexError: index 10 is out of bounds for axis 0 with size 10\r\n```", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/8726/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8726/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/8724", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8724/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8724/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8724/events", "html_url": "https://github.com/mne-tools/mne-python/issues/8724", "id": 782301843, "node_id": "MDU6SXNzdWU3ODIzMDE4NDM=", "number": 8724, "title": "output of tfr_array_multitaper is incorrect?", "user": {"login": "chapochn", "id": 23103092, "node_id": "MDQ6VXNlcjIzMTAzMDky", "avatar_url": "https://avatars.githubusercontent.com/u/23103092?v=4", "gravatar_id": "", "url": "https://api.github.com/users/chapochn", "html_url": "https://github.com/chapochn", "followers_url": "https://api.github.com/users/chapochn/followers", "following_url": "https://api.github.com/users/chapochn/following{/other_user}", "gists_url": "https://api.github.com/users/chapochn/gists{/gist_id}", "starred_url": "https://api.github.com/users/chapochn/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/chapochn/subscriptions", "organizations_url": "https://api.github.com/users/chapochn/orgs", "repos_url": "https://api.github.com/users/chapochn/repos", "events_url": "https://api.github.com/users/chapochn/events{/privacy}", "received_events_url": "https://api.github.com/users/chapochn/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2021-01-08T18:03:14Z", "updated_at": "2021-11-21T03:59:44Z", "closed_at": "2021-11-21T03:59:44Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "#### Describe the bug\r\nthe output of tfr_array_multitaper seems incorrect\r\n\r\n#### Steps to reproduce\r\n```\r\nimport mne.time_frequency as tfr\r\nimport numpy as np\r\nimport matplotlib.pyplot as plt\r\n\r\nsignal = np.zeros(100)\r\nsignal[50:] = 1\r\n\r\ntfr_out = tfr.tfr_array_multitaper([[signal]], sfreq=100, freqs=[20], time_bandwidth=2, output='power')[0, 0, 0]\r\nplt.figure()\r\nplt.plot(tfr_out)\r\n```\r\n#### Expected results\r\nThere shouldn't be any oscillations, the curve should be smooth, monotonically increasing then decreasing.\r\n\r\n#### Actual results\r\nThere are oscillations, proportional to the number of cycles set as parameter in the function.\r\n\r\n#### Additional information\r\nPlatform:      macOS-10.15.7-x86_64-i386-64bit\r\nPython:        3.8.5 (default, Aug  5 2020, 03:39:04)  [Clang 10.0.0 ]\r\nExecutable:    /Users/.../opt/anaconda3/envs/mne/bin/python\r\nCPU:           i386: 12 cores\r\nMemory:        16.0 GB\r\nmne:           0.22.0\r\nnumpy:         1.19.4 {blas=NO_ATLAS_INFO, lapack=lapack}\r\nscipy:         1.5.3\r\nmatplotlib:    3.3.1 {backend=MacOSX}\r\nsklearn:       0.24.0\r\nnumba:         Not found\r\nnibabel:       3.2.1\r\nnilearn:       0.7.0\r\ndipy:          1.3.0\r\ncupy:          Not found\r\npandas:        1.1.5\r\nmayavi:        4.7.2\r\npyvista:       0.27.4 {pyvistaqt=0.2.0, OpenGL 4.1 ATI-3.10.19 via AMD Radeon Pro 560X OpenGL Engine}\r\nvtk:           9.0.1\r\nPyQt5:         5.12.3\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/8724/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8724/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/8722", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8722/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8722/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8722/events", "html_url": "https://github.com/mne-tools/mne-python/issues/8722", "id": 782159080, "node_id": "MDU6SXNzdWU3ODIxNTkwODA=", "number": 8722, "title": "tfr_array_multitaper with output=\"complex\" is misleading", "user": {"login": "chapochn", "id": 23103092, "node_id": "MDQ6VXNlcjIzMTAzMDky", "avatar_url": "https://avatars.githubusercontent.com/u/23103092?v=4", "gravatar_id": "", "url": "https://api.github.com/users/chapochn", "html_url": "https://github.com/chapochn", "followers_url": "https://api.github.com/users/chapochn/followers", "following_url": "https://api.github.com/users/chapochn/following{/other_user}", "gists_url": "https://api.github.com/users/chapochn/gists{/gist_id}", "starred_url": "https://api.github.com/users/chapochn/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/chapochn/subscriptions", "organizations_url": "https://api.github.com/users/chapochn/orgs", "repos_url": "https://api.github.com/users/chapochn/repos", "events_url": "https://api.github.com/users/chapochn/events{/privacy}", "received_events_url": "https://api.github.com/users/chapochn/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2021-01-08T14:31:51Z", "updated_at": "2022-02-04T16:25:21Z", "closed_at": "2022-02-04T16:25:21Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "#### Describe the bug\r\nthe output of tfr_array_multitaper when output='complex' is misleading. Not sure if one should change something in the design, or just update the documentation.\r\n\r\n\r\n#### Steps to reproduce\r\n```\r\nimport mne.time_frequency as tfr\r\nimport numpy as np\r\n\r\n\r\nsignal = np.zeros(1000)\r\nsignal[500:] = 1\r\n\r\n# morlet wavelets\r\ntfr_out1 = tfr.tfr_array_morlet([[signal]], sfreq=100, freqs=[20], output='complex')\r\ntfr_out2 = tfr.tfr_array_morlet([[signal]], sfreq=100, freqs=[20], output='power')\r\nprint(np.allclose(np.abs(tfr_out1)**2, tfr_out2))\r\nprint(tfr_out1.shape, tfr_out2.shape)\r\n\r\n# using only 1 taper\r\ntfr_out1 = tfr.tfr_array_multitaper([[signal]], sfreq=100, freqs=[20], time_bandwidth=2, output='complex')\r\ntfr_out2 = tfr.tfr_array_multitaper([[signal]], sfreq=100, freqs=[20], time_bandwidth=2, output='power')\r\nprint(np.allclose(np.abs(tfr_out1)**2, tfr_out2))\r\nprint(tfr_out1.shape, tfr_out2.shape)\r\n\r\n# using only 2 tapers\r\ntfr_out1 = tfr.tfr_array_multitaper([[signal]], sfreq=100, freqs=[20], time_bandwidth=3, output='complex')\r\ntfr_out2 = tfr.tfr_array_multitaper([[signal]], sfreq=100, freqs=[20], time_bandwidth=3, output='power')\r\nprint(np.allclose(np.abs(tfr_out1)**2, tfr_out2))\r\nprint(tfr_out1.shape, tfr_out2.shape)\r\n```\r\n\r\n#### Expected vs Actual results\r\nEverything is as expected, apart from the last output: when using multitaper with more than 1 taper, one should get multiple complex time series outputs, one for each taper, so that one can reconstruct the power from the complex time series. With the current design, it is not possible, and it is not clear what is the meaning of the output returned by tfr.tfr_array_multitaper([[signal]], sfreq=100, freqs=[20], time_bandwidth=3, output='complex'). Is it the convolution with one of the tapers? Is it a sum of the complex time series from different tapers?\r\n\r\n\r\n#### Actual results\r\nOne gets:\r\n\r\nMorlet:\r\nTrue\r\n(1, 1, 1, 1000) (1, 1, 1, 1000)\r\n\r\nmultitaper with single taper:\r\nTrue \r\n(1, 1, 1, 1000) (1, 1, 1, 1000)\r\n\r\nmultitaper with 2 tapers:\r\nFalse \r\n(1, 1, 1, 1000) (1, 1, 1, 1000) (we need more information than that to reconstruct the \"power\" from \"complex\")\r\n\r\n\r\n#### Additional information\r\nPlatform:      macOS-10.15.7-x86_64-i386-64bit\r\nPython:        3.8.5 (default, Aug  5 2020, 03:39:04)  [Clang 10.0.0 ]\r\nExecutable:    /Users/.../opt/anaconda3/envs/mne/bin/python\r\nCPU:           i386: 12 cores\r\nMemory:        16.0 GB\r\nmne:           0.22.0\r\nnumpy:         1.19.4 {blas=NO_ATLAS_INFO, lapack=lapack}\r\nscipy:         1.5.3\r\nmatplotlib:    3.3.1 {backend=MacOSX}\r\nsklearn:       0.24.0\r\nnumba:         Not found\r\nnibabel:       3.2.1\r\nnilearn:       0.7.0\r\ndipy:          1.3.0\r\ncupy:          Not found\r\npandas:        1.1.5\r\nmayavi:        4.7.2\r\npyvista:       0.27.4 {pyvistaqt=0.2.0, OpenGL 4.1 ATI-3.10.19 via AMD Radeon Pro 560X OpenGL Engine}\r\nvtk:           9.0.1\r\nPyQt5:         5.12.3\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/8722/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8722/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/8718", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8718/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8718/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8718/events", "html_url": "https://github.com/mne-tools/mne-python/issues/8718", "id": 781827203, "node_id": "MDU6SXNzdWU3ODE4MjcyMDM=", "number": 8718, "title": "set_bipolar_reference is too slow", "user": {"login": "jasmainak", "id": 15852194, "node_id": "MDQ6VXNlcjE1ODUyMTk0", "avatar_url": "https://avatars.githubusercontent.com/u/15852194?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jasmainak", "html_url": "https://github.com/jasmainak", "followers_url": "https://api.github.com/users/jasmainak/followers", "following_url": "https://api.github.com/users/jasmainak/following{/other_user}", "gists_url": "https://api.github.com/users/jasmainak/gists{/gist_id}", "starred_url": "https://api.github.com/users/jasmainak/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jasmainak/subscriptions", "organizations_url": "https://api.github.com/users/jasmainak/orgs", "repos_url": "https://api.github.com/users/jasmainak/repos", "events_url": "https://api.github.com/users/jasmainak/events{/privacy}", "received_events_url": "https://api.github.com/users/jasmainak/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "marsipu", "id": 46245704, "node_id": "MDQ6VXNlcjQ2MjQ1NzA0", "avatar_url": "https://avatars.githubusercontent.com/u/46245704?v=4", "gravatar_id": "", "url": "https://api.github.com/users/marsipu", "html_url": "https://github.com/marsipu", "followers_url": "https://api.github.com/users/marsipu/followers", "following_url": "https://api.github.com/users/marsipu/following{/other_user}", "gists_url": "https://api.github.com/users/marsipu/gists{/gist_id}", "starred_url": "https://api.github.com/users/marsipu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/marsipu/subscriptions", "organizations_url": "https://api.github.com/users/marsipu/orgs", "repos_url": "https://api.github.com/users/marsipu/repos", "events_url": "https://api.github.com/users/marsipu/events{/privacy}", "received_events_url": "https://api.github.com/users/marsipu/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "marsipu", "id": 46245704, "node_id": "MDQ6VXNlcjQ2MjQ1NzA0", "avatar_url": "https://avatars.githubusercontent.com/u/46245704?v=4", "gravatar_id": "", "url": "https://api.github.com/users/marsipu", "html_url": "https://github.com/marsipu", "followers_url": "https://api.github.com/users/marsipu/followers", "following_url": "https://api.github.com/users/marsipu/following{/other_user}", "gists_url": "https://api.github.com/users/marsipu/gists{/gist_id}", "starred_url": "https://api.github.com/users/marsipu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/marsipu/subscriptions", "organizations_url": "https://api.github.com/users/marsipu/orgs", "repos_url": "https://api.github.com/users/marsipu/repos", "events_url": "https://api.github.com/users/marsipu/events{/privacy}", "received_events_url": "https://api.github.com/users/marsipu/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 2, "created_at": "2021-01-08T04:08:07Z", "updated_at": "2021-04-22T14:56:58Z", "closed_at": "2021-04-22T14:56:58Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "If you're doing bipolar reference on sEEG data with 180 contacts, then it is very slow. Here is an alternative script that does the same in a fraction of second:\r\n\r\n```py\r\nimport numpy as np\r\n\r\nimport mne\r\nfrom mne.datasets import sample\r\n\r\ndata_path = sample.data_path()\r\n\r\nfname = data_path + '/MEG/sample/sample_audvis-ave.fif'\r\n\r\nn_picks = 30  # change to bigger number to see difference in speed\r\n\r\n# Reading evoked data\r\ncondition = 'Left Auditory'\r\nevoked = mne.read_evokeds(fname, condition=condition, baseline=(None, 0),\r\n                          proj=False)\r\n\r\ndel evoked.info['projs'][0]\r\nevoked.pick_types(meg=False, eeg=True)\r\nch_names = evoked.info['ch_names']\r\nevoked.pick_channels(ch_names[:n_picks])\r\nch_names = ch_names[:n_picks]\r\n\r\nanode, cathode = ch_names[1:], ch_names[:-1]\r\n\r\nn_channels, n_times = evoked.data.shape\r\nn_virtual_channels = len(anode)\r\nvirtual_ch_names = [f'{a}-{c}' for (a, c) in zip(anode, cathode)]\r\nmultiplier = np.zeros((n_virtual_channels, n_channels))\r\nfor idx, (a, c) in enumerate(zip(anode, cathode)):\r\n    multiplier[idx, ch_names.index(a)] = 1\r\n    multiplier[idx, ch_names.index(c)] = -1\r\n\r\ndata_rereferenced = multiplier.dot(evoked.data)\r\nevoked_rerefenced = mne.set_bipolar_reference(evoked, anode=anode, cathode=cathode)\r\npicks = [evoked_rerefenced.ch_names.index(ch) for ch in virtual_ch_names]\r\n\r\ndata_rereferenced_master = evoked_rerefenced.data[picks]\r\nassert np.allclose(data_rereferenced, data_rereferenced_master)\r\n\r\n```", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/8718/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8718/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/8717", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8717/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8717/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8717/events", "html_url": "https://github.com/mne-tools/mne-python/issues/8717", "id": 781811687, "node_id": "MDU6SXNzdWU3ODE4MTE2ODc=", "number": 8717, "title": "MNE-report integration with 3D viz is broken", "user": {"login": "jasmainak", "id": 15852194, "node_id": "MDQ6VXNlcjE1ODUyMTk0", "avatar_url": "https://avatars.githubusercontent.com/u/15852194?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jasmainak", "html_url": "https://github.com/jasmainak", "followers_url": "https://api.github.com/users/jasmainak/followers", "following_url": "https://api.github.com/users/jasmainak/following{/other_user}", "gists_url": "https://api.github.com/users/jasmainak/gists{/gist_id}", "starred_url": "https://api.github.com/users/jasmainak/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jasmainak/subscriptions", "organizations_url": "https://api.github.com/users/jasmainak/orgs", "repos_url": "https://api.github.com/users/jasmainak/repos", "events_url": "https://api.github.com/users/jasmainak/events{/privacy}", "received_events_url": "https://api.github.com/users/jasmainak/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 13, "created_at": "2021-01-08T03:22:16Z", "updated_at": "2021-10-22T17:11:55Z", "closed_at": "2021-10-22T17:11:55Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "When I do the following:\r\n\r\n```py\r\nimport os\r\nimport os.path as op\r\n\r\nimport numpy as np\r\nimport matplotlib.pyplot as plt\r\n\r\nfrom mayavi import mlab\r\n\r\nimport mne\r\nfrom mne.viz import use_3d_backend\r\nfrom mne.datasets import sample\r\n\r\ndata_path = sample.data_path()\r\nsample_dir = os.path.join(data_path, 'MEG', 'sample')\r\nsubjects_dir = os.path.join(data_path, 'subjects')\r\n\r\nfname_stc = os.path.join(sample_dir, 'sample_audvis-meg')\r\n\r\nstc = mne.read_source_estimate(fname_stc, subject='sample')\r\n\r\ninitial_time = 0.1\r\n\r\nwith use_3d_backend('mayavi'):\r\n    brain = stc.plot(subjects_dir=subjects_dir, initial_time=initial_time,\r\n                     clim=dict(kind='value', lims=[3, 6, 9]))\r\n\r\nreport = mne.Report()\r\nreport.add_figs_to_section(mlab.gcf(), 'caption')\r\n```\r\n\r\nI get:\r\n\r\n```py\r\n---------------------------------------------------------------------------\r\nTypeError                                 Traceback (most recent call last)\r\n~/Documents/github_repos/mne-python/tutorials/source-modeling/plot_visualize_stc.py in <module>\r\n     29 report = mne.Report()\r\n     30 fig = mlab.gcf()\r\n---> 31 report.add_figs_to_section(mlab.gcf(), 'caption')\r\n     32 \r\n     33 sfdfdfd\r\n\r\n~/Documents/github_repos/mne-python/mne/report.py in add_figs_to_section(self, figs, captions, section, scale, image_format, comments, replace)\r\n   1110             img_klass = self._sectionvars[section]\r\n   1111 \r\n-> 1112             img = _fig_to_img(fig, image_format, scale)\r\n   1113             html = image_template.substitute(img=img, id=global_id,\r\n   1114                                              div_klass=div_klass,\r\n\r\n~/Documents/github_repos/mne-python/mne/report.py in _fig_to_img(fig, image_format, scale, **kwargs)\r\n     72     elif not isinstance(fig, Figure):\r\n     73         from .viz.backends.renderer import backend, MNE_3D_BACKEND_TESTING\r\n---> 74         backend._check_3d_figure(figure=fig)\r\n     75         if not MNE_3D_BACKEND_TESTING:\r\n     76             img = backend._take_3d_screenshot(figure=fig)\r\n\r\n~/Documents/github_repos/mne-python/mne/viz/backends/_pyvista.py in _check_3d_figure(figure)\r\n    845 def _check_3d_figure(figure):\r\n    846     if not isinstance(figure, _Figure):\r\n--> 847         raise TypeError('figure must be an instance of _Figure.')\r\n    848 \r\n    849 \r\n\r\nTypeError: figure must be an instance of _Figure.\r\n```\r\n\r\nThe error is very cryptic. If you do `set_3d_backend` at the beginning of the script, it works.\r\n\r\nAlso, having the figure handle easily accessible via `brain.fig` for both backends and then being able to pass that into the report will be a gamechanger.", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/8717/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8717/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/8715", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8715/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8715/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8715/events", "html_url": "https://github.com/mne-tools/mne-python/issues/8715", "id": 781798723, "node_id": "MDU6SXNzdWU3ODE3OTg3MjM=", "number": 8715, "title": "mne make_scalp_surfaces throws unexpected error", "user": {"login": "jasmainak", "id": 15852194, "node_id": "MDQ6VXNlcjE1ODUyMTk0", "avatar_url": "https://avatars.githubusercontent.com/u/15852194?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jasmainak", "html_url": "https://github.com/jasmainak", "followers_url": "https://api.github.com/users/jasmainak/followers", "following_url": "https://api.github.com/users/jasmainak/following{/other_user}", "gists_url": "https://api.github.com/users/jasmainak/gists{/gist_id}", "starred_url": "https://api.github.com/users/jasmainak/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jasmainak/subscriptions", "organizations_url": "https://api.github.com/users/jasmainak/orgs", "repos_url": "https://api.github.com/users/jasmainak/repos", "events_url": "https://api.github.com/users/jasmainak/events{/privacy}", "received_events_url": "https://api.github.com/users/jasmainak/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2021-01-08T02:43:57Z", "updated_at": "2021-01-28T16:27:09Z", "closed_at": "2021-01-28T16:27:09Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "When you run [mne make_scalp_surfaces](https://github.com/mne-tools/mne-python/blob/master/mne/commands/mne_make_scalp_surfaces.py#L134) with `--overwrite` parameter, it throws an unexpected error if the BEM directory already exists.\r\n\r\nThe reason is that the `overwrite` parameter is not passed here:\r\n\r\nhttps://github.com/mne-tools/mne-python/blob/01b8b364698f86630d22fad573058233ab6a58a5/mne/commands/mne_make_scalp_surfaces.py#L134\r\n", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/8715/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8715/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/8714", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8714/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8714/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8714/events", "html_url": "https://github.com/mne-tools/mne-python/issues/8714", "id": 781793841, "node_id": "MDU6SXNzdWU3ODE3OTM4NDE=", "number": 8714, "title": "ylim in plot_evoked_topo", "user": {"login": "jasmainak", "id": 15852194, "node_id": "MDQ6VXNlcjE1ODUyMTk0", "avatar_url": "https://avatars.githubusercontent.com/u/15852194?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jasmainak", "html_url": "https://github.com/jasmainak", "followers_url": "https://api.github.com/users/jasmainak/followers", "following_url": "https://api.github.com/users/jasmainak/following{/other_user}", "gists_url": "https://api.github.com/users/jasmainak/gists{/gist_id}", "starred_url": "https://api.github.com/users/jasmainak/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jasmainak/subscriptions", "organizations_url": "https://api.github.com/users/jasmainak/orgs", "repos_url": "https://api.github.com/users/jasmainak/repos", "events_url": "https://api.github.com/users/jasmainak/events{/privacy}", "received_events_url": "https://api.github.com/users/jasmainak/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}, {"id": 559859326, "node_id": "MDU6TGFiZWw1NTk4NTkzMjY=", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/MEDIUM", "name": "MEDIUM", "color": "d93f0b", "default": false, "description": null}, {"id": 1290799321, "node_id": "MDU6TGFiZWwxMjkwNzk5MzIx", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/VIZ", "name": "VIZ", "color": "22e861", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": {"login": "ramkpari", "id": 13279036, "node_id": "MDQ6VXNlcjEzMjc5MDM2", "avatar_url": "https://avatars.githubusercontent.com/u/13279036?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ramkpari", "html_url": "https://github.com/ramkpari", "followers_url": "https://api.github.com/users/ramkpari/followers", "following_url": "https://api.github.com/users/ramkpari/following{/other_user}", "gists_url": "https://api.github.com/users/ramkpari/gists{/gist_id}", "starred_url": "https://api.github.com/users/ramkpari/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ramkpari/subscriptions", "organizations_url": "https://api.github.com/users/ramkpari/orgs", "repos_url": "https://api.github.com/users/ramkpari/repos", "events_url": "https://api.github.com/users/ramkpari/events{/privacy}", "received_events_url": "https://api.github.com/users/ramkpari/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ramkpari", "id": 13279036, "node_id": "MDQ6VXNlcjEzMjc5MDM2", "avatar_url": "https://avatars.githubusercontent.com/u/13279036?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ramkpari", "html_url": "https://github.com/ramkpari", "followers_url": "https://api.github.com/users/ramkpari/followers", "following_url": "https://api.github.com/users/ramkpari/following{/other_user}", "gists_url": "https://api.github.com/users/ramkpari/gists{/gist_id}", "starred_url": "https://api.github.com/users/ramkpari/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ramkpari/subscriptions", "organizations_url": "https://api.github.com/users/ramkpari/orgs", "repos_url": "https://api.github.com/users/ramkpari/repos", "events_url": "https://api.github.com/users/ramkpari/events{/privacy}", "received_events_url": "https://api.github.com/users/ramkpari/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 14, "created_at": "2021-01-08T02:30:33Z", "updated_at": "2021-04-26T12:28:50Z", "closed_at": "2021-04-26T12:28:50Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "The `ylim` parameter in [plot_evoked_topo](https://mne.tools/stable/generated/mne.viz.plot_evoked_topo.html#mne.viz.plot_evoked_topo) is `None` by default and for this default, the channels have different `ylim`. I think this is a bad default because:\r\n\r\n1) It does not allow comparison across channels (e.g., lateralization effects)\r\n2) It does not allow you to easily spot bad channels\r\n\r\nInstead, the `ylim` should be determined based on all the channels. One option is to copy the defaults from `xplotter` which are based on expected physical values of the quantities for evoked responses. The other option is to use the [MAD](https://en.wikipedia.org/wiki/Median_absolute_deviation) or some such thing so that you get reasonable values even when bad channels are present.\r\n", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/8714/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8714/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/8706", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8706/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8706/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8706/events", "html_url": "https://github.com/mne-tools/mne-python/issues/8706", "id": 781285491, "node_id": "MDU6SXNzdWU3ODEyODU0OTE=", "number": 8706, "title": "in nicolet.py there is a problem reading files with non-round file length in seconds ", "user": {"login": "miriamguen", "id": 42031781, "node_id": "MDQ6VXNlcjQyMDMxNzgx", "avatar_url": "https://avatars.githubusercontent.com/u/42031781?v=4", "gravatar_id": "", "url": "https://api.github.com/users/miriamguen", "html_url": "https://github.com/miriamguen", "followers_url": "https://api.github.com/users/miriamguen/followers", "following_url": "https://api.github.com/users/miriamguen/following{/other_user}", "gists_url": "https://api.github.com/users/miriamguen/gists{/gist_id}", "starred_url": "https://api.github.com/users/miriamguen/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/miriamguen/subscriptions", "organizations_url": "https://api.github.com/users/miriamguen/orgs", "repos_url": "https://api.github.com/users/miriamguen/repos", "events_url": "https://api.github.com/users/miriamguen/events{/privacy}", "received_events_url": "https://api.github.com/users/miriamguen/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2021-01-07T12:41:37Z", "updated_at": "2021-01-08T12:51:50Z", "closed_at": "2021-01-08T12:51:50Z", "author_association": "NONE", "active_lock_reason": null, "body": "using the function mne.io.read_raw_nicolet does not work when the **length in seconds is not an integer** \r\n\r\ninstead of trying to read it as an int, adding:\r\n\r\nelif var == 'duration_in_sec':\r\n            value = float(value)\r\n\r\nin row 79 in nicolat.py will fix this", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/8706/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8706/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/8705", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8705/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8705/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8705/events", "html_url": "https://github.com/mne-tools/mne-python/issues/8705", "id": 781264795, "node_id": "MDU6SXNzdWU3ODEyNjQ3OTU=", "number": 8705, "title": "Doc search on website is broken", "user": {"login": "hoechenberger", "id": 2046265, "node_id": "MDQ6VXNlcjIwNDYyNjU=", "avatar_url": "https://avatars.githubusercontent.com/u/2046265?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hoechenberger", "html_url": "https://github.com/hoechenberger", "followers_url": "https://api.github.com/users/hoechenberger/followers", "following_url": "https://api.github.com/users/hoechenberger/following{/other_user}", "gists_url": "https://api.github.com/users/hoechenberger/gists{/gist_id}", "starred_url": "https://api.github.com/users/hoechenberger/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hoechenberger/subscriptions", "organizations_url": "https://api.github.com/users/hoechenberger/orgs", "repos_url": "https://api.github.com/users/hoechenberger/repos", "events_url": "https://api.github.com/users/hoechenberger/events{/privacy}", "received_events_url": "https://api.github.com/users/hoechenberger/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 40091538, "node_id": "MDU6TGFiZWw0MDA5MTUzOA==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/DOC", "name": "DOC", "color": "009800", "default": false, "description": null}, {"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 7, "created_at": "2021-01-07T12:05:09Z", "updated_at": "2021-01-13T14:35:13Z", "closed_at": "2021-01-13T14:29:53Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "The search doesn't work for me anymore in the dev documentation. Stable is still functional.\r\n\r\nhttps://mne.tools/dev/search.html?q=compute_rank\r\n\r\ndoesn't produce any results and the JS console throws an exception, `ReferenceError: Can't find variable: Stemmer`\r\n\r\nI'm using Safari 14.0.2\r\n\r\ncc @drammock ", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/8705/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8705/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/8694", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8694/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8694/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8694/events", "html_url": "https://github.com/mne-tools/mne-python/issues/8694", "id": 777593271, "node_id": "MDU6SXNzdWU3Nzc1OTMyNzE=", "number": 8694, "title": "Got some problem in raw.plot function ", "user": {"login": "LiFeng-SECUC", "id": 27933069, "node_id": "MDQ6VXNlcjI3OTMzMDY5", "avatar_url": "https://avatars.githubusercontent.com/u/27933069?v=4", "gravatar_id": "", "url": "https://api.github.com/users/LiFeng-SECUC", "html_url": "https://github.com/LiFeng-SECUC", "followers_url": "https://api.github.com/users/LiFeng-SECUC/followers", "following_url": "https://api.github.com/users/LiFeng-SECUC/following{/other_user}", "gists_url": "https://api.github.com/users/LiFeng-SECUC/gists{/gist_id}", "starred_url": "https://api.github.com/users/LiFeng-SECUC/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/LiFeng-SECUC/subscriptions", "organizations_url": "https://api.github.com/users/LiFeng-SECUC/orgs", "repos_url": "https://api.github.com/users/LiFeng-SECUC/repos", "events_url": "https://api.github.com/users/LiFeng-SECUC/events{/privacy}", "received_events_url": "https://api.github.com/users/LiFeng-SECUC/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2021-01-03T08:04:45Z", "updated_at": "2021-01-19T16:10:39Z", "closed_at": "2021-01-03T10:45:13Z", "author_association": "NONE", "active_lock_reason": null, "body": "I have some files in mat format, I converted them to RawArray format, and set the correct ch_type and ch_names. But when the raw.plot function is called, the data is not displayed correctly, instead it becomes the following, it is me Is there something wrong with the code?\r\n\r\nthe code:\r\nsampling_freq = 500  \r\nch_names = ['O2','O1','Oz','Pz','P4','CP4','P8','C4','TP8','T8',\r\n                'P7','P3','CP3','CPz','Cz','FC4','FT8','TP7','C3','FCz',\r\n                'Fz','F4','F8','T7','FT7','FC3','F3','Fp2','F7','Fp1']\r\nch_types = ['eeg']*30 \r\ninfo = mne.create_info(ch_names=ch_names,ch_types=ch_types,sfreq=sampling_freq)\r\nraw = mne.io.RawArray(data, info)\r\nmontage = mne.channels.make_standard_montage(kind = 'standard_1005', head_size=0.095)\r\nraw.set_montage(montage)\r\nraw.plot(events=event,duration=5,proj = False)\r\n\r\n![1](https://user-images.githubusercontent.com/27933069/103474411-8e469180-4dde-11eb-91d4-70121e983df9.png)\r\n![image](https://user-images.githubusercontent.com/27933069/103474444-d2d22d00-4dde-11eb-9e49-cec319acefe1.png)\r\n\r\n****", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/8694/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8694/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/8687", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8687/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8687/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8687/events", "html_url": "https://github.com/mne-tools/mne-python/issues/8687", "id": 776507711, "node_id": "MDU6SXNzdWU3NzY1MDc3MTE=", "number": 8687, "title": "Some keyboard shortcuts are broken in raw.plot", "user": {"login": "cbrnr", "id": 4377312, "node_id": "MDQ6VXNlcjQzNzczMTI=", "avatar_url": "https://avatars.githubusercontent.com/u/4377312?v=4", "gravatar_id": "", "url": "https://api.github.com/users/cbrnr", "html_url": "https://github.com/cbrnr", "followers_url": "https://api.github.com/users/cbrnr/followers", "following_url": "https://api.github.com/users/cbrnr/following{/other_user}", "gists_url": "https://api.github.com/users/cbrnr/gists{/gist_id}", "starred_url": "https://api.github.com/users/cbrnr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/cbrnr/subscriptions", "organizations_url": "https://api.github.com/users/cbrnr/orgs", "repos_url": "https://api.github.com/users/cbrnr/repos", "events_url": "https://api.github.com/users/cbrnr/events{/privacy}", "received_events_url": "https://api.github.com/users/cbrnr/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "drammock", "id": 1810515, "node_id": "MDQ6VXNlcjE4MTA1MTU=", "avatar_url": "https://avatars.githubusercontent.com/u/1810515?v=4", "gravatar_id": "", "url": "https://api.github.com/users/drammock", "html_url": "https://github.com/drammock", "followers_url": "https://api.github.com/users/drammock/followers", "following_url": "https://api.github.com/users/drammock/following{/other_user}", "gists_url": "https://api.github.com/users/drammock/gists{/gist_id}", "starred_url": "https://api.github.com/users/drammock/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/drammock/subscriptions", "organizations_url": "https://api.github.com/users/drammock/orgs", "repos_url": "https://api.github.com/users/drammock/repos", "events_url": "https://api.github.com/users/drammock/events{/privacy}", "received_events_url": "https://api.github.com/users/drammock/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "drammock", "id": 1810515, "node_id": "MDQ6VXNlcjE4MTA1MTU=", "avatar_url": "https://avatars.githubusercontent.com/u/1810515?v=4", "gravatar_id": "", "url": "https://api.github.com/users/drammock", "html_url": "https://github.com/drammock", "followers_url": "https://api.github.com/users/drammock/followers", "following_url": "https://api.github.com/users/drammock/following{/other_user}", "gists_url": "https://api.github.com/users/drammock/gists{/gist_id}", "starred_url": "https://api.github.com/users/drammock/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/drammock/subscriptions", "organizations_url": "https://api.github.com/users/drammock/orgs", "repos_url": "https://api.github.com/users/drammock/repos", "events_url": "https://api.github.com/users/drammock/events{/privacy}", "received_events_url": "https://api.github.com/users/drammock/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 3, "created_at": "2020-12-30T15:23:35Z", "updated_at": "2020-12-30T20:21:28Z", "closed_at": "2020-12-30T20:21:28Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "On macOS, toggling the scale bar (`s`) in an open `raw.plot` window doesn't work immediately. The scale bar is only toggled after e.g. switching to zen mode back and forth.\r\n\r\nThe help window shows incorrect shortcuts to increase/decrease window length and visible channels. For example, the window lists \u2318 + \u2192 as a shortcut to show a longer window, but the correct shortcut is fn + \u2192. The same is true for the other three shortcuts.\r\n\r\nF11 doesn't enter fullscreen mode, probably because this key is mapped to showing the desktop by default. I don't think we need a fullscreen shortcut on macOS because users can click the green button, but if we want to keep a shortcut we should change it to something else (at least on macOS where ^\u2318F seems to be the default for full screen).\r\n\r\n@drammock another one for you? If you don't have time I can also take a look (but not immediately).", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/8687/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8687/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/8686", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8686/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8686/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8686/events", "html_url": "https://github.com/mne-tools/mne-python/issues/8686", "id": 776501830, "node_id": "MDU6SXNzdWU3NzY1MDE4MzA=", "number": 8686, "title": "Enlarging time range in raw.plot doesn't draw new annotations", "user": {"login": "cbrnr", "id": 4377312, "node_id": "MDQ6VXNlcjQzNzczMTI=", "avatar_url": "https://avatars.githubusercontent.com/u/4377312?v=4", "gravatar_id": "", "url": "https://api.github.com/users/cbrnr", "html_url": "https://github.com/cbrnr", "followers_url": "https://api.github.com/users/cbrnr/followers", "following_url": "https://api.github.com/users/cbrnr/following{/other_user}", "gists_url": "https://api.github.com/users/cbrnr/gists{/gist_id}", "starred_url": "https://api.github.com/users/cbrnr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/cbrnr/subscriptions", "organizations_url": "https://api.github.com/users/cbrnr/orgs", "repos_url": "https://api.github.com/users/cbrnr/repos", "events_url": "https://api.github.com/users/cbrnr/events{/privacy}", "received_events_url": "https://api.github.com/users/cbrnr/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "drammock", "id": 1810515, "node_id": "MDQ6VXNlcjE4MTA1MTU=", "avatar_url": "https://avatars.githubusercontent.com/u/1810515?v=4", "gravatar_id": "", "url": "https://api.github.com/users/drammock", "html_url": "https://github.com/drammock", "followers_url": "https://api.github.com/users/drammock/followers", "following_url": "https://api.github.com/users/drammock/following{/other_user}", "gists_url": "https://api.github.com/users/drammock/gists{/gist_id}", "starred_url": "https://api.github.com/users/drammock/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/drammock/subscriptions", "organizations_url": "https://api.github.com/users/drammock/orgs", "repos_url": "https://api.github.com/users/drammock/repos", "events_url": "https://api.github.com/users/drammock/events{/privacy}", "received_events_url": "https://api.github.com/users/drammock/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "drammock", "id": 1810515, "node_id": "MDQ6VXNlcjE4MTA1MTU=", "avatar_url": "https://avatars.githubusercontent.com/u/1810515?v=4", "gravatar_id": "", "url": "https://api.github.com/users/drammock", "html_url": "https://github.com/drammock", "followers_url": "https://api.github.com/users/drammock/followers", "following_url": "https://api.github.com/users/drammock/following{/other_user}", "gists_url": "https://api.github.com/users/drammock/gists{/gist_id}", "starred_url": "https://api.github.com/users/drammock/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/drammock/subscriptions", "organizations_url": "https://api.github.com/users/drammock/orgs", "repos_url": "https://api.github.com/users/drammock/repos", "events_url": "https://api.github.com/users/drammock/events{/privacy}", "received_events_url": "https://api.github.com/users/drammock/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 1, "created_at": "2020-12-30T15:11:11Z", "updated_at": "2020-12-30T20:20:48Z", "closed_at": "2020-12-30T20:20:48Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Here's a simple example to reproduce:\r\n\r\n```python\r\nimport numpy as np\r\nimport mne\r\n\r\nfs = 500\r\nn_chans = 10\r\ndata = np.random.randn(n_chans, fs * 100) * 5e-6\r\ninfo = mne.create_info(n_chans, fs, \"eeg\")\r\nraw = mne.io.RawArray(data, info)\r\nraw.annotations.append(onset=[1, 5, 9, 12, 15, 19],\r\n                       duration=[2, 5, 3, 3, 5, 3],\r\n                       description=[\"A1\", \"A1\", \"B2\", \"C3\", \"A1\", \"B2\"])\r\nraw.plot(n_channels=n_chans)\r\n```\r\n\r\nOnce the plot window is open, increase the time window and notice that annotations outside the initial time window are not drawn. Here's what the plot looks like after increasing the window 13 times (notice that annotations from 10s are not drawn, but the overview bar still shows them):\r\n\r\n<img width=\"1027\" alt=\"Screen Shot 2020-12-30 at 16 08 50\" src=\"https://user-images.githubusercontent.com/4377312/103361694-8ffc1680-4ab9-11eb-9e2c-a86f750c58fd.png\">\r\n\r\n@drammock do you have time to take a look?", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/8686/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8686/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/8680", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8680/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8680/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8680/events", "html_url": "https://github.com/mne-tools/mne-python/issues/8680", "id": 774564611, "node_id": "MDU6SXNzdWU3NzQ1NjQ2MTE=", "number": 8680, "title": "Error of Incorrect Sample number when loading .set with preloading=True", "user": {"login": "Aceticia", "id": 36082433, "node_id": "MDQ6VXNlcjM2MDgyNDMz", "avatar_url": "https://avatars.githubusercontent.com/u/36082433?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Aceticia", "html_url": "https://github.com/Aceticia", "followers_url": "https://api.github.com/users/Aceticia/followers", "following_url": "https://api.github.com/users/Aceticia/following{/other_user}", "gists_url": "https://api.github.com/users/Aceticia/gists{/gist_id}", "starred_url": "https://api.github.com/users/Aceticia/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Aceticia/subscriptions", "organizations_url": "https://api.github.com/users/Aceticia/orgs", "repos_url": "https://api.github.com/users/Aceticia/repos", "events_url": "https://api.github.com/users/Aceticia/events{/privacy}", "received_events_url": "https://api.github.com/users/Aceticia/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2020-12-24T21:36:29Z", "updated_at": "2021-01-04T12:33:39Z", "closed_at": "2021-01-04T12:33:38Z", "author_association": "NONE", "active_lock_reason": null, "body": "#### Describe the bug\r\nWhen using `mne.io.read_raw_eeglab` on a public dataset's '.set' files, I get this error:\r\n`RuntimeError: Incorrect number of samples (5505024 != 23104512), please report this error to MNE-Python developers`\r\n\r\n#### Steps to reproduce\r\nI downloaded the data from this dataset: https://openneuro.org/datasets/ds002893/versions/1.0.0, and the '.set' files give this error.\r\n\r\n[MWE]: https://en.wikipedia.org/wiki/Minimal_Working_Example\r\n[built-in datasets]: https://mne.tools/dev/overview/datasets_index.html\r\n[sample]: https://mne.tools/dev/overview/datasets_index.html#sample\r\n\r\n\r\n#### Expected results\r\nExpected behavior is that files are loaded without error.\r\n\r\n\r\n#### Actual results\r\n```Traceback (most recent call last):\r\n  File \"dataset.py\", line 669, in <module>\r\n    data = AffectiveMusicListening(64, '../data/', verbose=True)\r\n  File \"dataset.py\", line 630, in __init__\r\n    super().__init__(electrode_lst, xyz_steps, directory, verbose=verbose)\r\n  File \"dataset.py\", line 360, in __init__\r\n    electrode_loc_temp.append(locs.loc[elec_name].to_numpy())\r\n  File \"/afs/ece.cmu.edu/usr/xujinl/anaconda3/envs/FNO/lib/python3.7/site-packages/pandas/core/indexing.py\", line 879, in __getitem__\r\n    return self._getitem_axis(maybe_callable, axis=axis)\r\n  File \"/afs/ece.cmu.edu/usr/xujinl/anaconda3/envs/FNO/lib/python3.7/site-packages/pandas/core/indexing.py\", line 1110, in _getitem_axis\r\n    return self._get_label(key, axis=axis)\r\n  File \"/afs/ece.cmu.edu/usr/xujinl/anaconda3/envs/FNO/lib/python3.7/site-packages/pandas/core/indexing.py\", line 1059, in _get_label\r\n    return self.obj.xs(label, axis=axis)\r\n  File \"/afs/ece.cmu.edu/usr/xujinl/anaconda3/envs/FNO/lib/python3.7/site-packages/pandas/core/generic.py\", line 3493, in xs\r\n    loc = self.index.get_loc(key)\r\n  File \"/afs/ece.cmu.edu/usr/xujinl/anaconda3/envs/FNO/lib/python3.7/site-packages/pandas/core/indexes/base.py\", line 2900, in get_loc\r\n    raise KeyError(key) from err\r\n```\r\n\r\n#### Additional information\r\n```Platform:      Linux-3.10.0-1062.18.1.el7.x86_64-x86_64-with-redhat-7.7-Maipo\r\nPython:        3.7.9 (default, Aug 31 2020, 12:42:55)  [GCC 7.3.0]\r\nExecutable:    /afs/ece.cmu.edu/usr/xujinl/anaconda3/envs/FNO/bin/python\r\nCPU:           x86_64: 20 cores\r\nMemory:        19.4 GB\r\n\r\nmne:           0.21.2\r\nnumpy:         1.19.2 {blas=mkl_rt, lapack=mkl_rt}\r\nscipy:         1.5.2\r\nmatplotlib:    3.3.2 {backend=agg}\r\n\r\nsklearn:       Not found\r\nnumba:         Not found\r\nnibabel:       Not found\r\ncupy:          Not found\r\npandas:        1.1.5\r\ndipy:          Not found\r\nmayavi:        Not found\r\npyvista:       Not found\r\nvtk:           Not found```\r\n", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/8680/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8680/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/8661", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8661/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8661/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8661/events", "html_url": "https://github.com/mne-tools/mne-python/issues/8661", "id": 767358951, "node_id": "MDU6SXNzdWU3NjczNTg5NTE=", "number": 8661, "title": "save changes file_id, causes anonymize to fail", "user": {"login": "kalenkovich", "id": 9257050, "node_id": "MDQ6VXNlcjkyNTcwNTA=", "avatar_url": "https://avatars.githubusercontent.com/u/9257050?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kalenkovich", "html_url": "https://github.com/kalenkovich", "followers_url": "https://api.github.com/users/kalenkovich/followers", "following_url": "https://api.github.com/users/kalenkovich/following{/other_user}", "gists_url": "https://api.github.com/users/kalenkovich/gists{/gist_id}", "starred_url": "https://api.github.com/users/kalenkovich/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kalenkovich/subscriptions", "organizations_url": "https://api.github.com/users/kalenkovich/orgs", "repos_url": "https://api.github.com/users/kalenkovich/repos", "events_url": "https://api.github.com/users/kalenkovich/events{/privacy}", "received_events_url": "https://api.github.com/users/kalenkovich/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 11, "created_at": "2020-12-15T09:13:14Z", "updated_at": "2021-01-12T14:26:35Z", "closed_at": "2021-01-12T12:32:10Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "#### Describe the bug\r\nSaving an instance of raw results in a file in which `info['file_id']['secs'] == 0`.\r\nIf you then load from this file and try to anonymize the result, an exception is raised because 'secs' becomes too small a number.\r\n\r\n\r\n#### Steps to reproduce\r\n```python\r\nfrom pathlib import Path\r\nimport tempfile\r\nfrom datetime import date\r\n\r\nimport mne\r\n\r\n# Load\r\nsample_dir = Path(mne.datasets.sample.data_path())\r\nraw_path = sample_dir / 'MEG' / 'sample' / 'sample_audvis_raw.fif'\r\nraw = mne.io.read_raw_fif(raw_path, verbose=False)\r\nprint('Original file_id\\n', raw.info['file_id'])\r\n\r\n# Save\r\ntemp_path = Path(tempfile.TemporaryDirectory().name) / 'sample_audvis_raw.fif'\r\ntemp_path.parent.mkdir()\r\nraw.save(temp_path)\r\n\r\n# Load\r\nraw2 = mne.io.read_raw_fif(temp_path, verbose=False)\r\nprint('Updated file_id\\n', raw2.info['file_id'])\r\n\r\n# Anonymize\r\ndaysback = (raw2.info['meas_date'].date() - date(1924, 1, 1)).days\r\nraw2.anonymize(daysback=daysback)\r\n```\r\n\r\n\r\n#### Expected results\r\nNo exceptions raised.\r\n\r\n\r\n#### Actual results\r\n\r\n```pytb\r\nOriginal file_id\r\n {'version': 65537, 'machid': array([   1082367, 1060765696]), 'secs': 1038942072, 'usecs': 190548}\r\nUpdated file_id\r\n {'version': 65540, 'machid': array([808661043, 808661043]), 'secs': 0, 'usecs': 2147483647}\r\n---------------------------------------------------------------------------\r\nRuntimeError                              Traceback (most recent call last)\r\n<ipython-input-127-0f07c80ed58b> in <module>\r\n     22 # Anonymize\r\n     23 daysback = (raw2.info['meas_date'].date() - date(1924, 1, 1)).days\r\n---> 24 raw2.anonymize(daysback=daysback)\r\n\r\n<decorator-gen-35> in anonymize(self, daysback, keep_his, verbose)\r\n\r\nE:\\Evgenii_Kalenkovich\\programs\\miniminiconda3\\envs\\syntax_tagging\\lib\\site-packages\\mne\\channels\\channels.py in anonymize(self, daysback, keep_his, verbose)\r\n    617         \"\"\"\r\n    618         anonymize_info(self.info, daysback=daysback, keep_his=keep_his,\r\n--> 619                        verbose=verbose)\r\n    620         self.set_meas_date(self.info['meas_date'])  # unify annot update\r\n    621         return self\r\n\r\n<decorator-gen-30> in anonymize_info(info, daysback, keep_his, verbose)\r\n\r\nE:\\Evgenii_Kalenkovich\\programs\\miniminiconda3\\envs\\syntax_tagging\\lib\\site-packages\\mne\\io\\meas_info.py in anonymize_info(info, daysback, keep_his, verbose)\r\n   2264                 'daysback parameter was too large.'\r\n   2265                 'Underlying Error:\\n')\r\n-> 2266     _check_dates(info, prepend_error=err_mesg)\r\n   2267 \r\n   2268     return info\r\n\r\nE:\\Evgenii_Kalenkovich\\programs\\miniminiconda3\\envs\\syntax_tagging\\lib\\site-packages\\mne\\io\\meas_info.py in _check_dates(info, prepend_error)\r\n   1478                                           np.iinfo('>i4').min,\r\n   1479                                           np.iinfo('>i4').max,\r\n-> 1480                                           value[key_2]),)\r\n   1481 \r\n   1482     meas_date = info.get('meas_date')\r\n\r\nRuntimeError: anonymize_info generated an inconsistent info object. daysback parameter was too large.Underlying Error:\r\ninfo[file_id][secs] must be between \"-2147483648\" and \"2147483647\", got \"-2490564253\"\r\n```\r\n\r\n\r\n#### Additional information\r\n\r\n```yaml\r\nPlatform:      Windows-2012ServerR2-6.3.9600-SP0\r\nPython:        3.7.4 (default, Aug  9 2019, 18:34:13) [MSC v.1915 64 bit (AMD64)]\r\nExecutable:    E:\\Evgenii_Kalenkovich\\programs\\miniminiconda3\\envs\\syntax_tagging\\python.exe\r\nCPU:           Intel64 Family 6 Model 85 Stepping 7, GenuineIntel: 64 cores\r\nMemory:        Unavailable (requires \"psutil\" package)\r\nmne:           0.21.2\r\nnumpy:         1.16.3 {blas=mkl_rt, lapack=mkl_rt}\r\nscipy:         1.2.1\r\nmatplotlib:    2.2.3 {backend=module://ipykernel.pylab.backend_inline}\r\n\r\nsklearn:       0.21.3\r\nnumba:         Not found\r\nnibabel:       3.2.1\r\ncupy:          Not found\r\npandas:        0.25.1\r\ndipy:          Not found\r\nmayavi:        Not found\r\npyvista:       Not found\r\nvtk:           Not found\r\n```\r\n", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/8661/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8661/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/8660", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8660/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8660/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8660/events", "html_url": "https://github.com/mne-tools/mne-python/issues/8660", "id": 767207931, "node_id": "MDU6SXNzdWU3NjcyMDc5MzE=", "number": 8660, "title": "PSDs computed with psd_welch look different between 0.20 and 0.21", "user": {"login": "nschawor", "id": 1282430, "node_id": "MDQ6VXNlcjEyODI0MzA=", "avatar_url": "https://avatars.githubusercontent.com/u/1282430?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nschawor", "html_url": "https://github.com/nschawor", "followers_url": "https://api.github.com/users/nschawor/followers", "following_url": "https://api.github.com/users/nschawor/following{/other_user}", "gists_url": "https://api.github.com/users/nschawor/gists{/gist_id}", "starred_url": "https://api.github.com/users/nschawor/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nschawor/subscriptions", "organizations_url": "https://api.github.com/users/nschawor/orgs", "repos_url": "https://api.github.com/users/nschawor/repos", "events_url": "https://api.github.com/users/nschawor/events{/privacy}", "received_events_url": "https://api.github.com/users/nschawor/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/mne-tools/mne-python/milestones/18", "html_url": "https://github.com/mne-tools/mne-python/milestone/18", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/milestones/18/labels", "id": 5802238, "node_id": "MDk6TWlsZXN0b25lNTgwMjIzOA==", "number": 18, "title": "0.22", "description": "", "creator": {"login": "larsoner", "id": 2365790, "node_id": "MDQ6VXNlcjIzNjU3OTA=", "avatar_url": "https://avatars.githubusercontent.com/u/2365790?v=4", "gravatar_id": "", "url": "https://api.github.com/users/larsoner", "html_url": "https://github.com/larsoner", "followers_url": "https://api.github.com/users/larsoner/followers", "following_url": "https://api.github.com/users/larsoner/following{/other_user}", "gists_url": "https://api.github.com/users/larsoner/gists{/gist_id}", "starred_url": "https://api.github.com/users/larsoner/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/larsoner/subscriptions", "organizations_url": "https://api.github.com/users/larsoner/orgs", "repos_url": "https://api.github.com/users/larsoner/repos", "events_url": "https://api.github.com/users/larsoner/events{/privacy}", "received_events_url": "https://api.github.com/users/larsoner/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 53, "state": "closed", "created_at": "2020-08-24T06:23:40Z", "updated_at": "2020-12-17T15:39:07Z", "due_on": "2020-12-15T08:00:00Z", "closed_at": "2020-12-17T15:39:07Z"}, "comments": 2, "created_at": "2020-12-15T05:55:40Z", "updated_at": "2020-12-15T18:50:35Z", "closed_at": "2020-12-15T18:50:35Z", "author_association": "NONE", "active_lock_reason": null, "body": "#### Describe the bug\r\n\r\nI noticed that the output of ``` mne.time_frequency.psd_welch``` looks slightly different between versions, example for a sine wave:\r\n\r\n<img width=\"957\" alt=\"Screen Shot 2020-12-14 at 21 39 50\" src=\"https://user-images.githubusercontent.com/1282430/102175755-ed0a9200-3e54-11eb-99af-bd6d77e2084d.png\">\r\n\r\n\r\n\r\n#### Steps to reproduce\r\nHere is a minimum working example with simulated data: \r\n\r\n```python\r\nimport mne\r\nimport numpy as np\r\nimport matplotlib.pyplot as plt\r\n\r\n# some simulated signal\r\nfrequency = 10\r\ndt = 0.001\r\nfs = 1 / dt\r\nn_seconds = 10\r\ntime = np.arange(0, n_seconds, dt)\r\nsignal = np.cos(2 * np.pi * frequency * time)\r\n\r\ninfo = mne.create_info([\"signal1\"], fs, ch_types=\"eeg\")\r\nraw = mne.io.RawArray(signal[np.newaxis], info)\r\n\r\n# compute PSD\r\npsd, freq = mne.time_frequency.psd_welch(raw, fmin=1, fmax=30, n_fft=4000)\r\n\r\n# plot\r\nfig, ax = plt.subplots()\r\nax.semilogy(freq, psd.T)\r\nfig.show()\r\n```\r\n\r\n#### Expected results\r\nI expected it to look the same between versions. Is this a desired change? I liked the old behavior. :-) Can it be achieved with the new version somehow? I checked the change log for 0.21 where optimization of ```psd_welch``` for long data segments is reported, which may have led to this?\r\n\r\n\r\n#### Additional information\r\nI tested various MNE versions and the change appears between 0.20.8 and 0.21.0 and persists to 0.21.2.\r\n", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/8660/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8660/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/8659", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8659/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8659/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8659/events", "html_url": "https://github.com/mne-tools/mne-python/issues/8659", "id": 766805371, "node_id": "MDU6SXNzdWU3NjY4MDUzNzE=", "number": 8659, "title": "Headless container with mne pyvista backend", "user": {"login": "christianhacker", "id": 61640673, "node_id": "MDQ6VXNlcjYxNjQwNjcz", "avatar_url": "https://avatars.githubusercontent.com/u/61640673?v=4", "gravatar_id": "", "url": "https://api.github.com/users/christianhacker", "html_url": "https://github.com/christianhacker", "followers_url": "https://api.github.com/users/christianhacker/followers", "following_url": "https://api.github.com/users/christianhacker/following{/other_user}", "gists_url": "https://api.github.com/users/christianhacker/gists{/gist_id}", "starred_url": "https://api.github.com/users/christianhacker/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/christianhacker/subscriptions", "organizations_url": "https://api.github.com/users/christianhacker/orgs", "repos_url": "https://api.github.com/users/christianhacker/repos", "events_url": "https://api.github.com/users/christianhacker/events{/privacy}", "received_events_url": "https://api.github.com/users/christianhacker/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 11, "created_at": "2020-12-14T18:34:43Z", "updated_at": "2020-12-15T17:51:05Z", "closed_at": "2020-12-15T17:51:05Z", "author_association": "NONE", "active_lock_reason": null, "body": "#### Describe the bug\r\nAttempt to follow instructions for [headless install](https://mne.tools/dev/install/mne_python.html#collapse_server-if-you-are-installing-on-a-headless-server) of MNE-Tools. See [this gist](https://gist.github.com/christianhacker/36cf2bc1a9861051af4217663314b695) for config.\r\n\r\n\r\n#### Steps to reproduce\r\n```\r\ndocker build ./Dockerfile -t mne\r\ndocker run -it -e GRANT_SUDO=yes --user root --name mne -p 888:8888 -p 6006:6006 mne\r\n```\r\nNow open `http://localhost:8888/tree?` in a browser. Download and try running the [Plotting EEG sensors on the scalp](https://mne.tools/dev/auto_examples/visualization/plot_eeg_on_scalp.html#sphx-glr-auto-examples-visualization-plot-eeg-on-scalp-py) example in this jupyter server.\r\n\r\n#### Expected results\r\nJupyter notebook properly renders the scalp electrode example by returning the widget.\r\n\r\n\r\n#### Actual results\r\nCode cell 2 of the above example does not render scalp plot. Kernel crashes, get error message:\r\n`qt.qpa.xcb: could not connect to display`\r\n\r\nIf I launch an Xvfb virtual display via:\r\n`xvfb-run -s '-screen 0 1920x1080x24'`\r\nas part of the docker entrypoint script (uncomment line 9 in docker-entrypoint.sh) and install libraries required by pyvista, the plotting cell executes without error, but nothing is returned. If I explicitly return `fig` in a separate cell, I get:\r\n`<mne.viz.backends._pyvista._Figure at 0x7fde97989c70>`\r\n\r\n\r\n#### Additional information\r\n>Platform:      Linux-5.4.39-linuxkit-x86_64-with-glibc2.10\r\n>Python:        3.8.6 | packaged by conda-forge | (default, Oct  7 2020, 19:08:05)  [GCC 7.5.0]\r\n>Executable:    /opt/conda/bin/python\r\n>CPU:           x86_64: 24 cores\r\n>Memory:        Unavailable (requires \"psutil\" package)\r\n>mne:           0.21.2\r\n>numpy:         1.19.4 {blas=NO_ATLAS_INFO, lapack=lapack}\r\n>scipy:         1.5.3\r\n>matplotlib:    3.3.3 {backend=module://ipykernel.pylab.backend_inline}\r\n\r\n>sklearn:       0.23.2\r\n>numba:         Not found\r\n>nibabel:       3.2.1\r\n>cupy:          Not found\r\n>pandas:        1.1.5\r\n>dipy:          Not found\r\n>mayavi:        Not found\r\n>pyvista:       0.27.4 {pyvistaqt=0.2.0, OpenGL 3.3 (Core Profile) Mesa 18.3.1 via llvmpipe (LLVM 7.0, 256 bits)}\r\n>vtk:           9.0.0\r\n>PyQt5:         5.12.3\r\n", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/8659/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8659/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/8650", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8650/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8650/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8650/events", "html_url": "https://github.com/mne-tools/mne-python/issues/8650", "id": 762647131, "node_id": "MDU6SXNzdWU3NjI2NDcxMzE=", "number": 8650, "title": "IndexError when calling more then one epochs.plot_psd() (Windows 10)", "user": {"login": "LMBooth", "id": 31129153, "node_id": "MDQ6VXNlcjMxMTI5MTUz", "avatar_url": "https://avatars.githubusercontent.com/u/31129153?v=4", "gravatar_id": "", "url": "https://api.github.com/users/LMBooth", "html_url": "https://github.com/LMBooth", "followers_url": "https://api.github.com/users/LMBooth/followers", "following_url": "https://api.github.com/users/LMBooth/following{/other_user}", "gists_url": "https://api.github.com/users/LMBooth/gists{/gist_id}", "starred_url": "https://api.github.com/users/LMBooth/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/LMBooth/subscriptions", "organizations_url": "https://api.github.com/users/LMBooth/orgs", "repos_url": "https://api.github.com/users/LMBooth/repos", "events_url": "https://api.github.com/users/LMBooth/events{/privacy}", "received_events_url": "https://api.github.com/users/LMBooth/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 12, "created_at": "2020-12-11T17:16:56Z", "updated_at": "2020-12-17T21:43:56Z", "closed_at": "2020-12-17T21:42:32Z", "author_association": "NONE", "active_lock_reason": null, "body": "#### Describe the bug\r\nWhen calling a second plot_psd() in the same script on my epochs object i get an error from scipy.signal.windows.windows.py,\r\n\r\n```\r\n  File \"C:\\python37\\lib\\site-packages\\scipy\\signal\\windows\\windows.py\", line 1938, in dpss\r\n    if w[w * w > thresh][0] < 0:\r\nIndexError: index 0 is out of bounds for axis 0 with size 0\r\n```\r\n\r\nI suspect it may be something to do with my current dependencies, so you're aware:\r\nWindows 10,\r\nPython 3.7.3\r\nMNE: 0.21.2\r\nnumpy: 1.19.3\r\nscipy: 1.5.0\r\n\r\n\r\n#### Steps to reproduce\r\n(If you'd like my raw.fif file ask for me to upload)\r\n```python\r\nimport mne\r\nimport matplotlib.pyplot as plt\r\nfrom mne.preprocessing import (ICA, create_eog_epochs, create_ecg_epochs,corrmap)\r\n\r\nraw = mne.io.read_raw_fif('raw.fif')\r\nevents = mne.find_events(raw, stim_channel='Status')\r\n\r\nmapping = {'Visual/easy':1,'Visual/hard':2,'Audiotry/easy':3,\r\n           'Auditory/hard':4,'V/E':5,'V/H':6,'A/E':7,'A/H':8,\r\n           'Start':9,'Stop':10}\r\n\r\nepochs = mne.Epochs(raw, events, tmin=-0.2, tmax=0.5, event_id=mapping, preload=True)\r\n\r\nepochs['Visual/easy'].plot_psd() \r\nepochs['Visual/hard'].plot_psd()\r\n```\r\n\r\n\r\n#### Expected results\r\nI expect a second plot to open with the psd for my epochs of Visual/hard, i successfully get my psd plot for Visual/easy on my first call, this error is only thrown on my second call.\r\n\r\n\r\n#### Actual results\r\n```\r\nC:\\Users\\Liam\\Documents\\python\\EEG_process>math2.py\r\nOpening raw data file raw.fif...\r\n    Range : 0 ... 699629 =      0.000 ...  2798.516 secs\r\nReady.\r\n486 events found\r\nEvent IDs: [ 1  2  3  4  5  6  7  8  9 10]\r\nNot setting metadata\r\nNot setting metadata\r\n486 matching events found\r\nApplying baseline correction (mode: mean)\r\n0 projection items activated\r\nLoading data for 486 events and 176 original time points ...\r\n0 bad epochs dropped\r\n    Using multitaper spectrum estimation with 7 DPSS windows\r\nTraceback (most recent call last):\r\n  File \"C:\\Users\\Liam\\Documents\\python\\EEG_process\\math2.py\", line 15, in <module>\r\n    epochs['Visual/hard'].plot_psd()\r\n  File \"C:\\python37\\lib\\site-packages\\mne\\epochs.py\", line 1096, in plot_psd\r\n    verbose=verbose)\r\n  File \"<decorator-gen-147>\", line 24, in plot_epochs_psd\r\n  File \"C:\\python37\\lib\\site-packages\\mne\\viz\\epochs.py\", line 955, in plot_epochs_psd\r\n    n_jobs=n_jobs)\r\n  File \"<decorator-gen-65>\", line 24, in psd_multitaper\r\n  File \"C:\\python37\\lib\\site-packages\\mne\\time_frequency\\psd.py\", line 330, in psd_multitaper\r\n    n_jobs=n_jobs, verbose=verbose)\r\n  File \"<decorator-gen-50>\", line 24, in psd_array_multitaper\r\n  File \"C:\\python37\\lib\\site-packages\\mne\\time_frequency\\multitaper.py\", line 422, in psd_array_multitaper\r\n    n_times, sfreq, bandwidth, low_bias, adaptive)\r\n  File \"<decorator-gen-49>\", line 24, in _compute_mt_params\r\n  File \"C:\\python37\\lib\\site-packages\\mne\\time_frequency\\multitaper.py\", line 350, in _compute_mt_params\r\n    interp_from=interp_from)\r\n  File \"C:\\python37\\lib\\site-packages\\mne\\time_frequency\\multitaper.py\", line 95, in dpss_windows\r\n    dpss = _get_dpss()(N, half_nbw, Kmax)\r\n  File \"C:\\python37\\lib\\site-packages\\scipy\\signal\\windows\\windows.py\", line 1938, in dpss\r\n    if w[w * w > thresh][0] < 0:\r\nIndexError: index 0 is out of bounds for axis 0 with size 0\r\n```\r\n\r\nC:\\Users\\Liam\\Documents\\python\\EEG_process>\r\n\r\n\r\n#### Additional information\r\n```\r\nPlatform:      Windows-10-10.0.19041-SP0\r\nPython:        3.7.3 (v3.7.3:ef4ec6ed12, Mar 25 2019, 22:22:05) [MSC v.1916 64 bit (AMD64)]\r\nExecutable:    C:\\python37\\python.exe\r\nCPU:           Intel64 Family 6 Model 60 Stepping 3, GenuineIntel: 4 cores\r\nMemory:        31.9 GB\r\n\r\nmne:           0.21.2\r\nnumpy:         1.19.3 {blas=D:\\\\a\\\\1\\\\s\\\\numpy\\\\build\\\\openblas_info, lapack=D:\\\\a\\\\1\\\\s\\\\numpy\\\\build\\\\openblas_lapack_info}\r\nscipy:         1.5.0\r\nmatplotlib:    3.2.1 {backend=TkAgg}\r\n\r\nsklearn:       0.21.2\r\nnumba:         Not found\r\nnibabel:       Not found\r\ncupy:          Not found\r\npandas:        0.25.3\r\ndipy:          Not found\r\nmayavi:        Not found\r\npyvista:       Not found\r\nvtk:           Not found\r\n```\r\n", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/8650/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8650/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/8649", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8649/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8649/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8649/events", "html_url": "https://github.com/mne-tools/mne-python/issues/8649", "id": 762513173, "node_id": "MDU6SXNzdWU3NjI1MTMxNzM=", "number": 8649, "title": "Bug in envelope_correlation", "user": {"login": "Avoide", "id": 32302272, "node_id": "MDQ6VXNlcjMyMzAyMjcy", "avatar_url": "https://avatars.githubusercontent.com/u/32302272?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Avoide", "html_url": "https://github.com/Avoide", "followers_url": "https://api.github.com/users/Avoide/followers", "following_url": "https://api.github.com/users/Avoide/following{/other_user}", "gists_url": "https://api.github.com/users/Avoide/gists{/gist_id}", "starred_url": "https://api.github.com/users/Avoide/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Avoide/subscriptions", "organizations_url": "https://api.github.com/users/Avoide/orgs", "repos_url": "https://api.github.com/users/Avoide/repos", "events_url": "https://api.github.com/users/Avoide/events{/privacy}", "received_events_url": "https://api.github.com/users/Avoide/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/mne-tools/mne-python/milestones/18", "html_url": "https://github.com/mne-tools/mne-python/milestone/18", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/milestones/18/labels", "id": 5802238, "node_id": "MDk6TWlsZXN0b25lNTgwMjIzOA==", "number": 18, "title": "0.22", "description": "", "creator": {"login": "larsoner", "id": 2365790, "node_id": "MDQ6VXNlcjIzNjU3OTA=", "avatar_url": "https://avatars.githubusercontent.com/u/2365790?v=4", "gravatar_id": "", "url": "https://api.github.com/users/larsoner", "html_url": "https://github.com/larsoner", "followers_url": "https://api.github.com/users/larsoner/followers", "following_url": "https://api.github.com/users/larsoner/following{/other_user}", "gists_url": "https://api.github.com/users/larsoner/gists{/gist_id}", "starred_url": "https://api.github.com/users/larsoner/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/larsoner/subscriptions", "organizations_url": "https://api.github.com/users/larsoner/orgs", "repos_url": "https://api.github.com/users/larsoner/repos", "events_url": "https://api.github.com/users/larsoner/events{/privacy}", "received_events_url": "https://api.github.com/users/larsoner/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 53, "state": "closed", "created_at": "2020-08-24T06:23:40Z", "updated_at": "2020-12-17T15:39:07Z", "due_on": "2020-12-15T08:00:00Z", "closed_at": "2020-12-17T15:39:07Z"}, "comments": 5, "created_at": "2020-12-11T15:51:26Z", "updated_at": "2020-12-15T17:54:21Z", "closed_at": "2020-12-15T17:54:21Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi everyone,\r\n\r\nI think there is a bug in the function `envelope_correlation()` in the case of `orthogonalize=\"pairwise\"`.\r\nIn the original article Hipp et al, 2012 they describe the correlation as between the orthogonalized Y on X with X.\r\nSo cor(y_ort, x)\r\nBut in the code in line 119:\r\n`corr[li] = np.dot(label_data_orth, data_mag_nomean[li])`\r\nThe code seems to calculate the orthogonalized Y on all possible X with Y.\r\nSay we have 5 channels\r\nThen it should be:\r\n- C1_ort on C2 with C2\r\n- C1_ort on C3 with C3\r\n- C1_orth on C4 with C4\r\n- etc\r\nBut what is being calculated in envelope_correlation() is C1_ort on C2 with C1.\r\n\r\nI hope this is not too confusing, but I tried implementing a simple example using for loops and some of the source code to make sure I knew what timeseries are being orthogonalized to which one.\r\n\r\nThe code:\r\n```\r\nfrom mne.connectivity import envelope_correlation\r\nfrom mne.filter import next_fast_len\r\nimport numpy as np\r\nfrom scipy.stats import pearsonr\r\nfrom scipy.signal import hilbert\r\n\r\nn_epochs = 1\r\nn_channels = 5\r\nn_times = 100\r\ndata = np.random.rand(n_epochs, n_channels, n_times)\r\nn_fft = next_fast_len(n_times)\r\n\r\ndata_hil = hilbert(data, N=n_fft, axis=-1)[..., :n_times]\r\n\r\ncorr = np.ones((n_epochs, n_channels, n_channels))\r\n\r\nfor epo_idx in range(data_hil.shape[0]):\r\n    epoch_data = data_hil[epo_idx]\r\n    data_mag = np.abs(epoch_data)\r\n    data_conj_scaled = epoch_data.conj()\r\n    data_conj_scaled /= data_mag\r\n    for idx1 in range(data_hil.shape[1]):\r\n        for idx2 in range(data_hil.shape[1]):\r\n            # Get timeseries for each pair\r\n            x = epoch_data[idx1]\r\n            y = epoch_data[idx1]\r\n            x_mag = np.abs(x)\r\n            x_conj_scaled = epoch_data.conj()\r\n            x_conj_scaled /= data_mag\r\n            # Calculate orthogonalization\r\n            y_orth_x = (y*x_conj_scaled[idx1]).imag\r\n            # Estimate correlation\r\n            cor = pearsonr(x_mag,y_orth_x)[0]\r\n            corr[epo_idx,idx1,idx2] = cor\r\n\r\n# Make it symmetric (it isn't at this point)\r\ncorr = np.abs(corr)\r\ncorr = (corr.T + corr) / 2.\r\n\r\nec = envelope_correlation(data_hil, combine=None, orthogonalize=\"pairwise\")\r\n\r\nprint(np.allclose(corr, ec))\r\n```\r\n\r\nIn addition to this I was also very confused with line 113 and 114:\r\n```\r\n# compute variances using linalg.norm (square, sum, sqrt) since mean=0\r\ndata_mag_std = np.linalg.norm(data_mag_nomean, axis=-1)\r\n```\r\nI tried using data_mag_std = np.std(data_mag, axis=-1) and got different results.\r\nAccording to the documentation in numpy for np.std the operations should be (square, mean, sqrt) when mean = 0 and not sum. Using the sum you have to divide with N (and also sqrt afterwards)\r\n```\r\nstd1 = np.std(data_mag, axis=-1)\r\nstd2 = np.linalg.norm(data_mag-np.mean(data_mag,axis=-1, keepdims=True),axis=-1)\r\nprint(np.allclose(std1,std2/np.sqrt(n_times)))\r\n```\r\n\r\nFixing the std calculation and changing lines 119 and 120 to:\r\n```\r\ncorr[li] = np.mean(label_data_orth*data_mag_nomean, axis=-1)\r\ncorr[li] /= data_mag_std\r\n```\r\n\r\nSeemed to fix the problem for me, but I didn't use the exact same implementation for my own data so it should probably be double-checked.", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/8649/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8649/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/8642", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8642/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8642/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8642/events", "html_url": "https://github.com/mne-tools/mne-python/issues/8642", "id": 761244977, "node_id": "MDU6SXNzdWU3NjEyNDQ5Nzc=", "number": 8642, "title": "BUG: stc plot color limits", "user": {"login": "kingjr", "id": 4881164, "node_id": "MDQ6VXNlcjQ4ODExNjQ=", "avatar_url": "https://avatars.githubusercontent.com/u/4881164?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kingjr", "html_url": "https://github.com/kingjr", "followers_url": "https://api.github.com/users/kingjr/followers", "following_url": "https://api.github.com/users/kingjr/following{/other_user}", "gists_url": "https://api.github.com/users/kingjr/gists{/gist_id}", "starred_url": "https://api.github.com/users/kingjr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kingjr/subscriptions", "organizations_url": "https://api.github.com/users/kingjr/orgs", "repos_url": "https://api.github.com/users/kingjr/repos", "events_url": "https://api.github.com/users/kingjr/events{/privacy}", "received_events_url": "https://api.github.com/users/kingjr/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/mne-tools/mne-python/milestones/18", "html_url": "https://github.com/mne-tools/mne-python/milestone/18", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/milestones/18/labels", "id": 5802238, "node_id": "MDk6TWlsZXN0b25lNTgwMjIzOA==", "number": 18, "title": "0.22", "description": "", "creator": {"login": "larsoner", "id": 2365790, "node_id": "MDQ6VXNlcjIzNjU3OTA=", "avatar_url": "https://avatars.githubusercontent.com/u/2365790?v=4", "gravatar_id": "", "url": "https://api.github.com/users/larsoner", "html_url": "https://github.com/larsoner", "followers_url": "https://api.github.com/users/larsoner/followers", "following_url": "https://api.github.com/users/larsoner/following{/other_user}", "gists_url": "https://api.github.com/users/larsoner/gists{/gist_id}", "starred_url": "https://api.github.com/users/larsoner/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/larsoner/subscriptions", "organizations_url": "https://api.github.com/users/larsoner/orgs", "repos_url": "https://api.github.com/users/larsoner/repos", "events_url": "https://api.github.com/users/larsoner/events{/privacy}", "received_events_url": "https://api.github.com/users/larsoner/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 53, "state": "closed", "created_at": "2020-08-24T06:23:40Z", "updated_at": "2020-12-17T15:39:07Z", "due_on": "2020-12-15T08:00:00Z", "closed_at": "2020-12-17T15:39:07Z"}, "comments": 3, "created_at": "2020-12-10T13:32:54Z", "updated_at": "2020-12-14T19:52:19Z", "closed_at": "2020-12-14T13:09:28Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "@larsoner 000dac95c0f7a4439ee60fb92f1007fd288f9611 introduced a color limit bug in the stc plot\r\n\r\n```python\r\nimport numpy as np\r\nfrom pathlib import Path\r\nfrom mayavi import mlab\r\nimport matplotlib.pyplot as plt\r\n\r\nimport mne\r\n\r\ndata_path = Path(mne.datasets.sample.data_path())\r\nfname = data_path / 'MEG' / 'sample' / 'sample_audvis-meg'\r\n\r\n# Read stc from file\r\nstc = mne.read_source_estimate(fname, subject='sample')\r\nstc.data[:, :] = np.random.rand(*stc.data.shape) # some positive data\r\n\r\n\r\nfig_size = (300, 300)\r\nfig = mlab.figure(size=fig_size)\r\n\r\nbrain = stc.plot(\r\n    hemi='lh',\r\n    views='lat',\r\n    colormap='coolwarm',\r\n    subjects_dir=data_path / 'subjects',\r\n    clim=dict(kind='value', pos_lims=[0, .2, .5]),  # <-------------------- this what breaks\r\n    backend='mayavi',\r\n    figure=fig,\r\n)\r\n\r\nimg = mlab.screenshot(figure=fig, mode='rgba', antialiased=True)\r\nplt.imshow(img)\r\n```\r\n\r\nbefore:\r\n![image](https://user-images.githubusercontent.com/4881164/101778595-5a848e80-3af4-11eb-84d6-dcbc7de8ed75.png)\r\n\r\n\r\nafter:\r\n![image](https://user-images.githubusercontent.com/4881164/101778610-5fe1d900-3af4-11eb-9ee7-9d6ce46600e2.png)\r\n", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/8642/reactions", "total_count": 1, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 1}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8642/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/8641", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8641/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8641/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8641/events", "html_url": "https://github.com/mne-tools/mne-python/issues/8641", "id": 761140139, "node_id": "MDU6SXNzdWU3NjExNDAxMzk=", "number": 8641, "title": "EEGLAB I/O roundtrip fails", "user": {"login": "hoechenberger", "id": 2046265, "node_id": "MDQ6VXNlcjIwNDYyNjU=", "avatar_url": "https://avatars.githubusercontent.com/u/2046265?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hoechenberger", "html_url": "https://github.com/hoechenberger", "followers_url": "https://api.github.com/users/hoechenberger/followers", "following_url": "https://api.github.com/users/hoechenberger/following{/other_user}", "gists_url": "https://api.github.com/users/hoechenberger/gists{/gist_id}", "starred_url": "https://api.github.com/users/hoechenberger/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hoechenberger/subscriptions", "organizations_url": "https://api.github.com/users/hoechenberger/orgs", "repos_url": "https://api.github.com/users/hoechenberger/repos", "events_url": "https://api.github.com/users/hoechenberger/events{/privacy}", "received_events_url": "https://api.github.com/users/hoechenberger/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2020-12-10T11:04:29Z", "updated_at": "2020-12-10T17:33:18Z", "closed_at": "2020-12-10T11:07:51Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "Working on https://github.com/mne-tools/mne-bids/pull/653 I came across a bug when doing an EEGLAB I/O roundtrip.\r\n\r\nMWE:\r\n```python\r\nimport os.path as op\r\nimport mne\r\nfrom mne.datasets import testing\r\n\r\ndata_path = op.join(testing.data_path(), 'EEGLAB')\r\ninfile = op.join(data_path, 'test_raw.set')\r\noutfile = '/tmp/foo.set'\r\n\r\nraw = mne.io.read_raw_eeglab(infile)\r\nraw.save(outfile, overwrite=True)\r\nmne.io.read_epochs_eeglab(outfile)\r\n```\r\nProduces:\r\n```python\r\n---------------------------------------------------------------------------\r\nValueError                                Traceback (most recent call last)\r\n<ipython-input-1-7ef794074f19> in <module>\r\n     12 raw = mne.io.read_raw_eeglab(infile)\r\n     13 raw.save(outfile, overwrite=True)\r\n---> 14 mne.io.read_epochs_eeglab(outfile)\r\n\r\n~/Development/mne-python/mne/io/eeglab/eeglab.py in read_epochs_eeglab(input_fname, events, event_id, eog, verbose, uint16_codec)\r\n    275     .. versionadded:: 0.11.0\r\n    276     \"\"\"\r\n--> 277     epochs = EpochsEEGLAB(input_fname=input_fname, events=events, eog=eog,\r\n    278                           event_id=event_id, verbose=verbose,\r\n    279                           uint16_codec=uint16_codec)\r\n\r\n<decorator-gen-223> in __init__(self, input_fname, events, event_id, tmin, baseline, reject, flat, reject_tmin, reject_tmax, eog, verbose, uint16_codec)\r\n\r\n~/Development/mne-python/mne/io/eeglab/eeglab.py in __init__(self, input_fname, events, event_id, tmin, baseline, reject, flat, reject_tmin, reject_tmax, eog, verbose, uint16_codec)\r\n    448                  reject_tmax=None, eog=(), verbose=None,\r\n    449                  uint16_codec=None):  # noqa: D102\r\n--> 450         eeg = _check_load_mat(input_fname, uint16_codec)\r\n    451 \r\n    452         if not ((events is None and event_id is None) or\r\n\r\n~/Development/mne-python/mne/io/eeglab/eeglab.py in _check_load_mat(fname, uint16_codec)\r\n     57     \"\"\"Check if the mat struct contains 'EEG'.\"\"\"\r\n     58     from ...externals.pymatreader import read_mat\r\n---> 59     eeg = read_mat(fname, uint16_codec=uint16_codec)\r\n     60     if 'ALLEEG' in eeg:\r\n     61         raise NotImplementedError(\r\n\r\n~/Development/mne-python/mne/externals/pymatreader/pymatreader.py in read_mat(filename, variable_names, ignore_fields, uint16_codec)\r\n     87                 extra_kwargs['uint16_codec'] = uint16_codec\r\n     88 \r\n---> 89             raw_data = scipy.io.loadmat(fid, struct_as_record=True,\r\n     90                                         squeeze_me=True, mat_dtype=False,\r\n     91                                         variable_names=variable_names,\r\n\r\n~/miniforge3/envs/mne/lib/python3.8/site-packages/scipy/io/matlab/mio.py in loadmat(file_name, mdict, appendmat, **kwargs)\r\n    222     with _open_file_context(file_name, appendmat) as f:\r\n    223         MR, _ = mat_reader_factory(f, **kwargs)\r\n--> 224         matfile_dict = MR.get_variables(variable_names)\r\n    225 \r\n    226     if mdict is not None:\r\n\r\n~/miniforge3/envs/mne/lib/python3.8/site-packages/scipy/io/matlab/mio4.py in get_variables(self, variable_names)\r\n    389         mdict = {}\r\n    390         while not self.end_of_stream():\r\n--> 391             hdr, next_position = self.read_var_header()\r\n    392             name = asstr(hdr.name)\r\n    393             if variable_names is not None and name not in variable_names:\r\n\r\n~/miniforge3/envs/mne/lib/python3.8/site-packages/scipy/io/matlab/mio4.py in read_var_header(self)\r\n    345            position in stream of next variable\r\n    346         '''\r\n--> 347         hdr = self._matrix_reader.read_header()\r\n    348         n = reduce(lambda x, y: x*y, hdr.dims, 1)  # fast product\r\n    349         remaining_bytes = hdr.dtype.itemsize * n\r\n\r\n~/miniforge3/envs/mne/lib/python3.8/site-packages/scipy/io/matlab/mio4.py in read_header(self)\r\n    115         O, rest = divmod(rest, 100)  # unused, should be 0\r\n    116         if O != 0:\r\n--> 117             raise ValueError('O in MOPT integer should be 0, wrong format?')\r\n    118         P, rest = divmod(rest, 10)  # data type code e.g miDOUBLE (see above)\r\n    119         T = rest  # matrix type code e.g., mxFULL_CLASS (see above)\r\n\r\nValueError: O in MOPT integer should be 0, wrong format?\r\n```\r\n\r\n```\r\n(mne) \u279c  mne-python git:(master) mne sys_info\r\nPlatform:      macOS-10.16-x86_64-i386-64bit\r\nPython:        3.8.6 | packaged by conda-forge | (default, Nov 27 2020, 19:17:44)  [Clang 11.0.0 ]\r\nExecutable:    /Users/hoechenberger/miniforge3/envs/mne/bin/python3.8\r\nCPU:           i386: 8 cores\r\nMemory:        16.0 GB\r\n\r\nmne:           0.22.dev0\r\nnumpy:         1.19.4 {blas=NO_ATLAS_INFO, lapack=lapack}\r\nscipy:         1.5.3\r\nmatplotlib:    3.3.3 {backend=MacOSX}\r\n\r\nsklearn:       0.23.2\r\nnumba:         0.51.2\r\nnibabel:       3.2.1\r\ncupy:          Not found\r\npandas:        1.1.4\r\ndipy:          1.3.0\r\nmayavi:        4.7.2\r\npyvista:       0.27.3 {pyvistaqt=0.2.0, OpenGL 4.1 INTEL-16.0.49 via Intel(R) Iris(TM) Plus Graphics 655}\r\nvtk:           9.0.1\r\nPyQt5:         5.12.3\r\n```\r\n", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/8641/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8641/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/8637", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8637/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8637/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8637/events", "html_url": "https://github.com/mne-tools/mne-python/issues/8637", "id": 760398658, "node_id": "MDU6SXNzdWU3NjAzOTg2NTg=", "number": 8637, "title": "Electrode position coming out of head for topoplot of fNIRS data", "user": {"login": "Prasenjit1989", "id": 24448379, "node_id": "MDQ6VXNlcjI0NDQ4Mzc5", "avatar_url": "https://avatars.githubusercontent.com/u/24448379?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Prasenjit1989", "html_url": "https://github.com/Prasenjit1989", "followers_url": "https://api.github.com/users/Prasenjit1989/followers", "following_url": "https://api.github.com/users/Prasenjit1989/following{/other_user}", "gists_url": "https://api.github.com/users/Prasenjit1989/gists{/gist_id}", "starred_url": "https://api.github.com/users/Prasenjit1989/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Prasenjit1989/subscriptions", "organizations_url": "https://api.github.com/users/Prasenjit1989/orgs", "repos_url": "https://api.github.com/users/Prasenjit1989/repos", "events_url": "https://api.github.com/users/Prasenjit1989/events{/privacy}", "received_events_url": "https://api.github.com/users/Prasenjit1989/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 7, "created_at": "2020-12-09T14:54:08Z", "updated_at": "2021-01-08T16:31:05Z", "closed_at": "2021-01-08T16:31:05Z", "author_association": "NONE", "active_lock_reason": null, "body": "#### Describe the bug\r\nElectrode position in topomap for fNIRS data are coming out of head. I have added one image of that. Kindly look into this.\r\n![topo_pos_neg_hbo_hbr_diff](https://user-images.githubusercontent.com/24448379/101645511-c1437280-3a36-11eb-8265-97d435894285.png)\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/8637/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8637/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/8635", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8635/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8635/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8635/events", "html_url": "https://github.com/mne-tools/mne-python/issues/8635", "id": 760252380, "node_id": "MDU6SXNzdWU3NjAyNTIzODA=", "number": 8635, "title": "'norm' in test_resolution_matrix()", "user": {"login": "olafhauk", "id": 7878274, "node_id": "MDQ6VXNlcjc4NzgyNzQ=", "avatar_url": "https://avatars.githubusercontent.com/u/7878274?v=4", "gravatar_id": "", "url": "https://api.github.com/users/olafhauk", "html_url": "https://github.com/olafhauk", "followers_url": "https://api.github.com/users/olafhauk/followers", "following_url": "https://api.github.com/users/olafhauk/following{/other_user}", "gists_url": "https://api.github.com/users/olafhauk/gists{/gist_id}", "starred_url": "https://api.github.com/users/olafhauk/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/olafhauk/subscriptions", "organizations_url": "https://api.github.com/users/olafhauk/orgs", "repos_url": "https://api.github.com/users/olafhauk/repos", "events_url": "https://api.github.com/users/olafhauk/events{/privacy}", "received_events_url": "https://api.github.com/users/olafhauk/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2020-12-09T11:35:32Z", "updated_at": "2020-12-09T13:41:06Z", "closed_at": "2020-12-09T13:41:06Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "#### Describe the bug\r\nIn lines 119 and 122 of test_resolution_matrix option norm is set to string 'norm' rather than to variable norm, i.e. it does not loop through different options for norm. \r\n\r\n\r\n#### Steps to reproduce\r\nJust run the test.\r\n\r\n\r\n#### Expected results\r\nShould test different norm options.\r\n\r\n\r\n#### Actual results\r\nOnly tests option 'norm'.\r\n\r\n#### Additional information\r\nI'll need to rewrite the corresponding section of the test.\r\n", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/8635/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8635/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/8634", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8634/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8634/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8634/events", "html_url": "https://github.com/mne-tools/mne-python/issues/8634", "id": 760143969, "node_id": "MDU6SXNzdWU3NjAxNDM5Njk=", "number": 8634, "title": "still some circular topos for MEG data", "user": {"login": "agramfort", "id": 161052, "node_id": "MDQ6VXNlcjE2MTA1Mg==", "avatar_url": "https://avatars.githubusercontent.com/u/161052?v=4", "gravatar_id": "", "url": "https://api.github.com/users/agramfort", "html_url": "https://github.com/agramfort", "followers_url": "https://api.github.com/users/agramfort/followers", "following_url": "https://api.github.com/users/agramfort/following{/other_user}", "gists_url": "https://api.github.com/users/agramfort/gists{/gist_id}", "starred_url": "https://api.github.com/users/agramfort/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/agramfort/subscriptions", "organizations_url": "https://api.github.com/users/agramfort/orgs", "repos_url": "https://api.github.com/users/agramfort/repos", "events_url": "https://api.github.com/users/agramfort/events{/privacy}", "received_events_url": "https://api.github.com/users/agramfort/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/mne-tools/mne-python/milestones/18", "html_url": "https://github.com/mne-tools/mne-python/milestone/18", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/milestones/18/labels", "id": 5802238, "node_id": "MDk6TWlsZXN0b25lNTgwMjIzOA==", "number": 18, "title": "0.22", "description": "", "creator": {"login": "larsoner", "id": 2365790, "node_id": "MDQ6VXNlcjIzNjU3OTA=", "avatar_url": "https://avatars.githubusercontent.com/u/2365790?v=4", "gravatar_id": "", "url": "https://api.github.com/users/larsoner", "html_url": "https://github.com/larsoner", "followers_url": "https://api.github.com/users/larsoner/followers", "following_url": "https://api.github.com/users/larsoner/following{/other_user}", "gists_url": "https://api.github.com/users/larsoner/gists{/gist_id}", "starred_url": "https://api.github.com/users/larsoner/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/larsoner/subscriptions", "organizations_url": "https://api.github.com/users/larsoner/orgs", "repos_url": "https://api.github.com/users/larsoner/repos", "events_url": "https://api.github.com/users/larsoner/events{/privacy}", "received_events_url": "https://api.github.com/users/larsoner/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 53, "state": "closed", "created_at": "2020-08-24T06:23:40Z", "updated_at": "2020-12-17T15:39:07Z", "due_on": "2020-12-15T08:00:00Z", "closed_at": "2020-12-17T15:39:07Z"}, "comments": 1, "created_at": "2020-12-09T09:05:12Z", "updated_at": "2020-12-09T16:58:56Z", "closed_at": "2020-12-09T16:58:56Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "see:\r\n\r\nhttps://24010-1301584-gh.circle-artifacts.com/0/dev/auto_examples/visualization/plot_evoked_topomap.html#animating-the-topomap\r\n\r\nhttps://24010-1301584-gh.circle-artifacts.com/0/dev/auto_examples/preprocessing/plot_run_ica.html#compute-ica-components-on-epochs\r\n\r\nwe should not use circular topos for MEG \r\n\r\n", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/8634/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8634/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/8632", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8632/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8632/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8632/events", "html_url": "https://github.com/mne-tools/mne-python/issues/8632", "id": 759702145, "node_id": "MDU6SXNzdWU3NTk3MDIxNDU=", "number": 8632, "title": "Simulation code (add_ecg, add_eog, ...) overwrites vs sums raw._data structure", "user": {"login": "jstout211", "id": 2371720, "node_id": "MDQ6VXNlcjIzNzE3MjA=", "avatar_url": "https://avatars.githubusercontent.com/u/2371720?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jstout211", "html_url": "https://github.com/jstout211", "followers_url": "https://api.github.com/users/jstout211/followers", "following_url": "https://api.github.com/users/jstout211/following{/other_user}", "gists_url": "https://api.github.com/users/jstout211/gists{/gist_id}", "starred_url": "https://api.github.com/users/jstout211/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jstout211/subscriptions", "organizations_url": "https://api.github.com/users/jstout211/orgs", "repos_url": "https://api.github.com/users/jstout211/repos", "events_url": "https://api.github.com/users/jstout211/events{/privacy}", "received_events_url": "https://api.github.com/users/jstout211/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2020-12-08T19:04:26Z", "updated_at": "2020-12-08T19:54:36Z", "closed_at": "2020-12-08T19:22:19Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "#### Describe the bug\r\nmne/simulation/raw.py  (add_exg, and add_chpi) overwrite the raw._data matrix.  The final simulated data is the last one performed (because the previous steps have been overwritten).\r\n\r\nIn mne/simulation/raw.py  (lines 527 and 583 and (possibly 317)) - \r\nThe equals should be replaced with +=\r\ndata[picks, start:stop] = einsum('svt,vt->st', fwd, exg_data[:, start:stop])\r\nto\r\ndata[picks, start:stop] += einsum('svt,vt->st', fwd, exg_data[:, start:stop])\r\n\r\n\r\n\r\n#### Steps to reproduce\r\nThe error can be seen in the example:\r\nhttps://mne.tools/stable/auto_examples/simulation/plot_simulated_raw_data_using_subject_anatomy.html#sphx-glr-auto-examples-simulation-plot-simulated-raw-data-using-subject-anatomy-py\r\n\r\n#### Expected results\r\n![image](https://user-images.githubusercontent.com/2371720/101528856-d00a2680-395d-11eb-9e7e-599ac8001f63.png)\r\n\r\n![image](https://user-images.githubusercontent.com/2371720/101528961-e87a4100-395d-11eb-8b80-d88b4c44370d.png)\r\n\r\n\r\n#### Actual results\r\n![image](https://user-images.githubusercontent.com/2371720/101528910-dac4bb80-395d-11eb-857c-c270e41fa12f.png)\r\n\r\n![image](https://user-images.githubusercontent.com/2371720/101529005-f760f380-395d-11eb-8d81-21ac6006f212.png)\r\n\r\n\r\n#### Additional information\r\nPlatform:      Linux-4.18.0-240.1.1.el8_3.x86_64-x86_64-with-redhat-8.3-Ootpa\r\nPython:        3.7.9 (default, Aug 31 2020, 12:42:55)  [GCC 7.3.0]\r\nExecutable:    /home/stoutjd/miniconda3/envs/MNE_new/bin/python\r\nCPU:           x86_64: 12 cores\r\nMemory:        15.3 GB\r\n\r\nmne:           0.21.0\r\nnumpy:         1.19.1 {blas=mkl_rt, lapack=mkl_rt}\r\nscipy:         1.4.1\r\nmatplotlib:    3.3.1 {backend=module://ipykernel.pylab.backend_inline}\r\n\r\nsklearn:       0.23.2\r\nnumba:         0.51.2\r\nnibabel:       3.1.1\r\ncupy:          Not found\r\npandas:        1.1.2\r\ndipy:          1.2.0\r\nmayavi:        4.7.3.dev0\r\npyvista:       0.24.0 {OpenGL 4.6 (Core Profile) Mesa 20.1.4 via Mesa Intel(R) UHD Graphics (CML GT2)}\r\nvtk:           8.2.0\r\nPyQt5:         5.9.2\r\n", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/8632/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8632/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/8628", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8628/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8628/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8628/events", "html_url": "https://github.com/mne-tools/mne-python/issues/8628", "id": 759526559, "node_id": "MDU6SXNzdWU3NTk1MjY1NTk=", "number": 8628, "title": "BUG: plot_psd_topomap", "user": {"login": "SuperX-666", "id": 8426861, "node_id": "MDQ6VXNlcjg0MjY4NjE=", "avatar_url": "https://avatars.githubusercontent.com/u/8426861?v=4", "gravatar_id": "", "url": "https://api.github.com/users/SuperX-666", "html_url": "https://github.com/SuperX-666", "followers_url": "https://api.github.com/users/SuperX-666/followers", "following_url": "https://api.github.com/users/SuperX-666/following{/other_user}", "gists_url": "https://api.github.com/users/SuperX-666/gists{/gist_id}", "starred_url": "https://api.github.com/users/SuperX-666/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/SuperX-666/subscriptions", "organizations_url": "https://api.github.com/users/SuperX-666/orgs", "repos_url": "https://api.github.com/users/SuperX-666/repos", "events_url": "https://api.github.com/users/SuperX-666/events{/privacy}", "received_events_url": "https://api.github.com/users/SuperX-666/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-12-08T15:11:38Z", "updated_at": "2021-10-19T11:02:48Z", "closed_at": "2021-10-19T11:02:48Z", "author_association": "NONE", "active_lock_reason": null, "body": "#### Describe the bug\r\n`epochs.plot_psd_topomap(\r\n    bands=None,\r\n    vmin=None,\r\n    vmax=None,\r\n    tmin=None,\r\n    tmax=None,\r\n    proj=False,\r\n    bandwidth=None,\r\n    adaptive=False,\r\n    low_bias=True,\r\n    normalization='length',\r\n    ch_type=None,\r\n    cmap=None,\r\n    agg_fun=None,\r\n    dB=True,\r\n    n_jobs=1,\r\n    normalize=False,\r\n    cbar_fmt='auto',\r\n    outlines='head',\r\n    axes=None,\r\n    show=True,\r\n    sphere=None,\r\n    vlim=(None, None),\r\n    verbose=None,\r\n)`\r\n\r\nIn the Docstring, it says:\r\n```\r\ndB : bool\r\n    If ``True``, transform data to decibels (with ``10 * np.log10(data)``)\r\n    following the application of ``agg_fun``. Ignored if ``normalize=True``.\r\n```\r\nthe ignored dB it's likely a bug.", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/8628/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8628/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/8625", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8625/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8625/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8625/events", "html_url": "https://github.com/mne-tools/mne-python/issues/8625", "id": 759245660, "node_id": "MDU6SXNzdWU3NTkyNDU2NjA=", "number": 8625, "title": "plot_sensor_connectivity", "user": {"login": "ZhengLiu97", "id": 65115609, "node_id": "MDQ6VXNlcjY1MTE1NjA5", "avatar_url": "https://avatars.githubusercontent.com/u/65115609?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ZhengLiu97", "html_url": "https://github.com/ZhengLiu97", "followers_url": "https://api.github.com/users/ZhengLiu97/followers", "following_url": "https://api.github.com/users/ZhengLiu97/following{/other_user}", "gists_url": "https://api.github.com/users/ZhengLiu97/gists{/gist_id}", "starred_url": "https://api.github.com/users/ZhengLiu97/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ZhengLiu97/subscriptions", "organizations_url": "https://api.github.com/users/ZhengLiu97/orgs", "repos_url": "https://api.github.com/users/ZhengLiu97/repos", "events_url": "https://api.github.com/users/ZhengLiu97/events{/privacy}", "received_events_url": "https://api.github.com/users/ZhengLiu97/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 14, "created_at": "2020-12-08T08:44:27Z", "updated_at": "2020-12-08T12:35:27Z", "closed_at": "2020-12-08T08:57:35Z", "author_association": "NONE", "active_lock_reason": null, "body": "When I ran plot_sensor_connectivity.py in cmd, the figure just appeared less than 1 sec, then it was gone.", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/8625/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8625/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/8623", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8623/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8623/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8623/events", "html_url": "https://github.com/mne-tools/mne-python/issues/8623", "id": 758864085, "node_id": "MDU6SXNzdWU3NTg4NjQwODU=", "number": 8623, "title": "BUG: Volume-only plotting broken", "user": {"login": "larsoner", "id": 2365790, "node_id": "MDQ6VXNlcjIzNjU3OTA=", "avatar_url": "https://avatars.githubusercontent.com/u/2365790?v=4", "gravatar_id": "", "url": "https://api.github.com/users/larsoner", "html_url": "https://github.com/larsoner", "followers_url": "https://api.github.com/users/larsoner/followers", "following_url": "https://api.github.com/users/larsoner/following{/other_user}", "gists_url": "https://api.github.com/users/larsoner/gists{/gist_id}", "starred_url": "https://api.github.com/users/larsoner/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/larsoner/subscriptions", "organizations_url": "https://api.github.com/users/larsoner/orgs", "repos_url": "https://api.github.com/users/larsoner/repos", "events_url": "https://api.github.com/users/larsoner/events{/privacy}", "received_events_url": "https://api.github.com/users/larsoner/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/mne-tools/mne-python/milestones/18", "html_url": "https://github.com/mne-tools/mne-python/milestone/18", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/milestones/18/labels", "id": 5802238, "node_id": "MDk6TWlsZXN0b25lNTgwMjIzOA==", "number": 18, "title": "0.22", "description": "", "creator": {"login": "larsoner", "id": 2365790, "node_id": "MDQ6VXNlcjIzNjU3OTA=", "avatar_url": "https://avatars.githubusercontent.com/u/2365790?v=4", "gravatar_id": "", "url": "https://api.github.com/users/larsoner", "html_url": "https://github.com/larsoner", "followers_url": "https://api.github.com/users/larsoner/followers", "following_url": "https://api.github.com/users/larsoner/following{/other_user}", "gists_url": "https://api.github.com/users/larsoner/gists{/gist_id}", "starred_url": "https://api.github.com/users/larsoner/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/larsoner/subscriptions", "organizations_url": "https://api.github.com/users/larsoner/orgs", "repos_url": "https://api.github.com/users/larsoner/repos", "events_url": "https://api.github.com/users/larsoner/events{/privacy}", "received_events_url": "https://api.github.com/users/larsoner/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 53, "state": "closed", "created_at": "2020-08-24T06:23:40Z", "updated_at": "2020-12-17T15:39:07Z", "due_on": "2020-12-15T08:00:00Z", "closed_at": "2020-12-17T15:39:07Z"}, "comments": 1, "created_at": "2020-12-07T21:28:55Z", "updated_at": "2020-12-08T15:03:16Z", "closed_at": "2020-12-08T15:03:16Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "For example:\r\n\r\n<details>\r\n\r\n```\r\nimport os.path as op\r\nimport mne\r\nimport time\r\ndata_path = mne.datasets.sample.data_path()\r\nsample_dir = op.join(data_path, 'MEG', 'sample')\r\nsubjects_dir = op.join(data_path, 'subjects')\r\ninv = mne.minimum_norm.read_inverse_operator(op.join(\r\n    sample_dir, 'sample_audvis-meg-vol-7-meg-inv.fif'))\r\n    # sample_dir, 'sample_audvis-meg-oct-6-meg-inv.fif'))\r\nevoked = mne.read_evokeds(op.join(sample_dir, 'sample_audvis-ave.fif'))[0]\r\nevoked.apply_baseline((None, 0)).pick_types(meg=True)\r\nstc, res = mne.minimum_norm.apply_inverse(\r\n    evoked, inv, return_residual=True, pick_ori=None)\r\n\r\ninitial_time = 0.1\r\n# stc, kwargs = stc, dict(overlay_alpha=0.5, brain_alpha=0.5, vector_alpha=0.)\r\n# stc, kwargs = stc.magnitude(), dict(alpha=0.5, surface='white')\r\nstc, kwargs = stc, dict()\r\nkwargs['src'] = inv['src']\r\nmeth = stc.plot_3d if isinstance(stc, mne.VolSourceEstimate) else stc.plot\r\nbrain = meth(\r\n    subjects_dir=subjects_dir, initial_time=initial_time,\r\n    # clim='auto',\r\n    clim=dict(kind='value', lims=[4.9999999, 4.99999999, 5]),\r\n    # backend='matplotlib',\r\n    # hemi='both', views=['sag', 'axi', 'cor'], size=(800, 300),\r\n    hemi='lh', views='lat', smoothing_steps='nearest',\r\n    view_layout='horizontal', verbose=True,\r\n    time_viewer=False, **kwargs)\r\n```\r\n\r\n</details>\r\n\r\nProduces a blank plot on my system. Clicking somewhere on one of the sliders fixes it.\r\n\r\n@GuillaumeFavelier could it be the `_first_time` stuff in your last PR is not working properly? We also see for example a problem here:\r\n\r\nhttps://mne.tools/dev/auto_tutorials/misc/plot_seeg.html#sphx-glr-auto-tutorials-misc-plot-seeg-py\r\n\r\nThe last box is empty...", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/8623/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8623/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/8617", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8617/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8617/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8617/events", "html_url": "https://github.com/mne-tools/mne-python/issues/8617", "id": 758520442, "node_id": "MDU6SXNzdWU3NTg1MjA0NDI=", "number": 8617, "title": "MemoryError when apply inverse", "user": {"login": "1101AlexZab1011", "id": 66251087, "node_id": "MDQ6VXNlcjY2MjUxMDg3", "avatar_url": "https://avatars.githubusercontent.com/u/66251087?v=4", "gravatar_id": "", "url": "https://api.github.com/users/1101AlexZab1011", "html_url": "https://github.com/1101AlexZab1011", "followers_url": "https://api.github.com/users/1101AlexZab1011/followers", "following_url": "https://api.github.com/users/1101AlexZab1011/following{/other_user}", "gists_url": "https://api.github.com/users/1101AlexZab1011/gists{/gist_id}", "starred_url": "https://api.github.com/users/1101AlexZab1011/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/1101AlexZab1011/subscriptions", "organizations_url": "https://api.github.com/users/1101AlexZab1011/orgs", "repos_url": "https://api.github.com/users/1101AlexZab1011/repos", "events_url": "https://api.github.com/users/1101AlexZab1011/events{/privacy}", "received_events_url": "https://api.github.com/users/1101AlexZab1011/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2020-12-07T13:46:00Z", "updated_at": "2020-12-07T15:52:05Z", "closed_at": "2020-12-07T15:52:05Z", "author_association": "NONE", "active_lock_reason": null, "body": "#### Description\r\nI created single 60-seconds epoch and tried to apply inverse, but MemoryError rose.\r\n\r\n\r\n#### Minimal working example\r\ninv_file = './path/to/raw-inv.fif'\r\nsnr = 0.5\r\nlambda2 = 1.0 / snr ** 2\r\nsample_data_folder = mne.datasets.sample.data_path()\r\nsample_data_raw_file = os.path.join(sample_data_folder, 'MEG', 'sample',\r\n                                    'sample_audvis_raw.fif')\r\nraw = mne.io.read_raw_fif(sample_data_raw_file)\r\nraw = rawcrop(tmax=120)\r\nevents = np.array([[\r\n        raw.first_samp + raw.time_as_index(120/2)[0],\r\n        0,\r\n        1\r\n    ]]) # one event at the middle of the data\r\nepochs = mne.Epochs(raw, events, tmin=-30, tmax=30,\r\n                        preload=True)\r\nevoked = epochs.average()\r\ninv = mne.minimum_norm.read_inverse_operator(inv_file) # reading of the inverse solution from its file\r\nstc = mne.minimum_norm.apply_inverse(evoked, inv, lambda2, 'sLORETA')\r\n\r\n\r\n#### Expected results\r\nComputing sLORETA for 1 minute of data\r\n\r\n\r\n#### Actual results\r\n\r\n---------------------------------------------------------------------------\r\n\r\nMemoryError                               Traceback (most recent call last)\r\n\r\n<ipython-input-20-edc93a083f21> in <module>\r\n      5 else:\r\n      6    \r\n----> 7     stc = mne.minimum_norm.apply_inverse(evoked, inv, lambda2, 'sLORETA')\r\n      8     path = res_sLORETA_folder\r\n      9 \r\n\r\n<decorator-gen-324> in apply_inverse(evoked, inverse_operator, lambda2, method, pick_ori, prepared, label, method_params, return_residual, use_cps, verbose)\r\n\r\n~/anaconda3/envs/NodesEstimation/lib/python3.8/site-packages/mne/minimum_norm/inverse.py in apply_inverse(evoked, inverse_operator, lambda2, method, pick_ori, prepared, label, method_params, return_residual, use_cps, verbose)\r\n    894     .. footbibliography::\r\n    895     \"\"\"\r\n--> 896     out = _apply_inverse(\r\n    897         evoked, inverse_operator, lambda2, method, pick_ori, prepared, label,\r\n    898         method_params, return_residual, use_cps)\r\n\r\n~/anaconda3/envs/NodesEstimation/lib/python3.8/site-packages/mne/minimum_norm/inverse.py in _apply_inverse(***failed resolving arguments***)\r\n    937     K, noise_norm, vertno, source_nn = _assemble_kernel(\r\n    938         inv, label, method, pick_ori, use_cps=use_cps)\r\n--> 939     sol = np.dot(K, evoked.data[sel])  # apply imaging kernel\r\n    940     logger.info('    Computing residual...')\r\n    941     # x\u0302(t) = G j\u0302(t) = C ** 1/2 U \u03a0 w(t)\r\n\r\n<__array_function__ internals> in dot(*args, **kwargs)\r\n\r\nMemoryError: Unable to allocate 27.4 GiB for an array with shape (61374, 60001) and data type float64\r\n\r\n\r\n#### Additional information\r\n\r\nPlatform:      Linux-5.4.0-56-generic-x86_64-with-glibc2.10\r\nPython:        3.8.5 (default, Sep  4 2020, 07:30:14)  [GCC 7.3.0]\r\nExecutable:    /home/user/anaconda3/envs/NodesEstimation/bin/python\r\nCPU:           x86_64: 8 cores\r\nMemory:        11.7 GB\r\n\r\nmne:           0.21.2\r\nnumpy:         1.19.4 {blas=openblas, lapack=openblas}\r\nscipy:         1.5.4\r\nmatplotlib:    3.3.3 {backend=module://ipykernel.pylab.backend_inline}\r\n\r\nsklearn:       0.23.2\r\nnumba:         0.52.0\r\nnibabel:       3.2.0\r\ncupy:          Not found\r\npandas:        1.1.4\r\ndipy:          1.3.0\r\nmayavi:        Not found\r\npyvista:       0.27.3 {OpenGL 4.5.0 NVIDIA 450.80.02 via GeForce GTX 1050 Ti/PCIe/SSE2}\r\nvtk:           9.0.1\r\nPyQt5:         5.9.2\r\nNone\r\n", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/8617/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8617/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/8616", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8616/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8616/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8616/events", "html_url": "https://github.com/mne-tools/mne-python/issues/8616", "id": 758516350, "node_id": "MDU6SXNzdWU3NTg1MTYzNTA=", "number": 8616, "title": "Tests fail on s390x architecture", "user": {"login": "Aniket-Pradhan", "id": 31067398, "node_id": "MDQ6VXNlcjMxMDY3Mzk4", "avatar_url": "https://avatars.githubusercontent.com/u/31067398?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Aniket-Pradhan", "html_url": "https://github.com/Aniket-Pradhan", "followers_url": "https://api.github.com/users/Aniket-Pradhan/followers", "following_url": "https://api.github.com/users/Aniket-Pradhan/following{/other_user}", "gists_url": "https://api.github.com/users/Aniket-Pradhan/gists{/gist_id}", "starred_url": "https://api.github.com/users/Aniket-Pradhan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Aniket-Pradhan/subscriptions", "organizations_url": "https://api.github.com/users/Aniket-Pradhan/orgs", "repos_url": "https://api.github.com/users/Aniket-Pradhan/repos", "events_url": "https://api.github.com/users/Aniket-Pradhan/events{/privacy}", "received_events_url": "https://api.github.com/users/Aniket-Pradhan/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2020-12-07T13:40:25Z", "updated_at": "2020-12-08T08:27:30Z", "closed_at": "2020-12-08T08:27:30Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "#### Describe the bug\r\nSome tests fail on the s390x architecture. Since s390x is a big-endian arch, it parses the floats/integers in an opposite way as the little-endian arch does.\r\n\r\n#### Steps to reproduce\r\nSimply run the tests on a big-endian architecture machine.\r\nList of tests failing: \r\n\r\n```\r\nFAILED mne/channels/tests/test_layout.py::test_find_layout\r\nFAILED mne/io/edf/tests/test_edf.py::test_edf_data_broken\r\nFAILED mne/io/edf/tests/test_edf.py::test_parse_annotation\r\nFAILED mne/io/edf/tests/test_edf.py::test_find_events_backward_compatibility\r\nFAILED mne/io/edf/tests/test_edf.py::test_read_annot\r\nFAILED mne/io/egi/tests/test_egi.py::test_io_egi\r\nFAILED mne/io/kit/tests/test_coreg.py::test_io_mrk\r\nFAILED mne/io/kit/tests/test_kit.py::test_epochs\r\nFAILED mne/io/kit/tests/test_kit.py::test_raw_events\r\nFAILED mne/io/kit/tests/test_kit.py::test_ch_loc\r\nFAILED mne/io/kit/tests/test_kit.py::test_hsp_elp\r\nFAILED mne/io/kit/tests/test_kit.py::test_decimate\r\nFAILED mne/io/tests/test_pick.py::test_pick_refs\r\nFAILED mne/io/tests/test_read_raw.py::test_read_raw_supported[fname3]\r\nFAILED mne/preprocessing/tests/test_maxwell.py::test_other_systems\r\n```\r\n\r\n#### Expected results\r\nTests should pass\r\n\r\n\r\n#### Additional information\r\nInside the tests, we could do a quick check to find if the machine is of little-endian arch or big-endian, using the sys library.\r\n\r\n```python\r\n>>> import sys\r\n>>> sys.byteorder\r\n'little'\r\n```\r\n\r\nAnd then, simply change the way how we parse an integer when reading from a testfile. For example, one of the errors occur because of the below line.\r\n\r\n```python\r\nsize=np.fromfile(fid, np.int32, 1)[0]\r\n```\r\n\r\nso, we can replace this with:\r\n\r\n```python\r\nimport sys\r\n\r\nlittle_end = False\r\nif sys.byteorder == \"little\":\r\n    little_end = True\r\n\r\n...\r\n\r\nif little_end:\r\n    size=np.fromfile(fid, np.dtype('i4'), 1)[0]\r\n    # or explicitly mention little-endian byte order\r\n    # i4 means the int32 dtype, and appending a \"<\" or a \">\" means a little-endian or a big-endian dtype\r\n    size=np.fromfile(fid, np.dtype('<i4'), 1)[0]\r\nelse:\r\n    size=np.fromfile(fid, np.dtype('>i4'), 1)[0]\r\n...\r\n```\r\n\r\n#### Actual results\r\nThe whole build log file can be found (big-endian) [here](https://kojipkgs.fedoraproject.org//work/tasks/629/56760629/build.log)\r\n\r\n[Here](https://kojipkgs.fedoraproject.org//work/tasks/5769/56755769/build.log) is a build from a little-endian machine.\r\n\r\nI can probably get access to an s390x arch machine if needed for debugging or testing purposes.\r\n\r\nSome links about the big-endian architecture and numpy:\r\n\r\n1. https://github.com/numpy/numpy/issues/13638\r\n2. https://stackoverflow.com/questions/9056373/what-is-the-difference-between-big-and-little-endian-floats#9056399\r\n3. https://numpy.org/doc/stable/reference/arrays.dtypes.html\r\n\r\nInfo about failing tests, copy-pasted below:\r\n\r\n```\r\n=================================== FAILURES ===================================\r\n_______________________________ test_find_layout _______________________________\r\nmne/channels/tests/test_layout.py:255: in test_find_layout\r\n    raw_kit = read_raw_kit(fname_kit_157)\r\nmne/io/kit/kit.py:903: in read_raw_kit\r\n    return RawKIT(input_fname=input_fname, mrk=mrk, elp=elp, hsp=hsp,\r\n<decorator-gen-211>:24: in __init__\r\n    ???\r\nmne/io/kit/kit.py:134: in __init__\r\n    info, kit_info = get_kit_info(\r\n<decorator-gen-213>:24: in get_kit_info\r\n    ???\r\nmne/io/kit/kit.py:495: in get_kit_info\r\n    dirs.extend(_read_dir(fid) for _ in range(dirs[0]['count'] - 1))\r\nmne/io/kit/kit.py:495: in <genexpr>\r\n    dirs.extend(_read_dir(fid) for _ in range(dirs[0]['count'] - 1))\r\nmne/io/kit/kit.py:459: in _read_dir\r\n    size=np.fromfile(fid, np.int32, 1)[0],\r\nE   IndexError: index 0 is out of bounds for axis 0 with size 0\r\n----------------------------- Captured stdout call -----------------------------\r\n    Read a total of 3 projection items:\r\n        PCA-v1 (1 x 102)  idle\r\n        PCA-v2 (1 x 102)  idle\r\n        PCA-v3 (1 x 102)  idle\r\n    Read 5 compensation matrices\r\nExtracting SQD Parameters from /builddir/build/BUILD/mne-python-0.21.2/mne/channels/tests/../../io/kit/tests/data/test.sqd...\r\nCreating Raw.info structure...\r\n_____________________________ test_edf_data_broken _____________________________\r\nmne/io/edf/tests/test_edf.py:130: in test_edf_data_broken\r\n    raw = _test_raw_reader(read_raw_edf, input_fname=edf_path,\r\nmne/io/tests/test_raw.py:189: in _test_raw_reader\r\n    assert_array_less(data, maxval)\r\nE   AssertionError: \r\nE   Arrays are not less-ordered\r\nE   \r\nE   Mismatched elements: 12283 / 417792 (2.94%)\r\nE   Max absolute difference: 0.05090099\r\nE   Max relative difference: 5.09009855\r\nE    x: array([[0.001702, 0.000423, 0.000769, ..., 0.002524, 0.001299, 0.000917],\r\nE          [0.002138, 0.000244, 0.000334, ..., 0.001169, 0.000199, 0.000183],\r\nE          [0.004641, 0.000301, 0.000377, ..., 0.002903, 0.001678, 0.001296],...\r\nE    y: array(0.01)\r\n____________________________ test_parse_annotation _____________________________\r\nmne/io/edf/tests/test_edf.py:197: in test_parse_annotation\r\n    assert_equal(np.column_stack((onset, duration, description)),\r\nE   AssertionError: \r\nE   Arrays are not equal\r\nE   \r\nE   (shapes (3, 3), (6, 3) mismatch)\r\nE    x: array([['1.0', '4402.0', '0onhtni'],\r\nE          ['1.0', '4402.0', 'g\\x00\\x00\\x00\\x001+08.0\\x152525.A'],\r\nE          ['1.0', '4402.0', 'npae']], dtype='>U32')\r\nE    y: array([['180.0', '0.0', 'Lights off'],\r\nE          ['180.0', '0.0', 'Close door'],\r\nE          ['180.0', '0.0', 'Lights off'],...\r\n___________________ test_find_events_backward_compatibility ____________________\r\nmne/io/edf/tests/test_edf.py:212: in test_find_events_backward_compatibility\r\n    event_id.pop('start')\r\nE   KeyError: 'start'\r\n----------------------------- Captured stdout call -----------------------------\r\nExtracting EDF parameters from /builddir/build/BUILD/mne-python-0.21.2/mne/io/edf/tests/data/test.edf...\r\nEDF file detected\r\nSetting channel info structure...\r\nCreating raw.info structure...\r\nReading 0 ... 3071  =      0.000 ...     5.998 secs...\r\n_______________________________ test_read_annot ________________________________\r\nmne/io/edf/tests/test_edf.py:292: in test_read_annot\r\n    _assert_annotations_equal(annotation, EXPECTED_ANNOTATIONS)\r\nmne/io/edf/tests/test_edf.py:251: in _assert_annotations_equal\r\n    assert_array_equal(a.onset, b.onset)\r\nE   AssertionError: \r\nE   Arrays are not equal\r\nE   \r\nE   (shapes (3,), (6,) mismatch)\r\nE    x: array([1., 1., 1.])\r\nE    y: array([   3.14,  180.  ,  180.  ,  180.  ,  180.  , 1800.2 ])\r\n_________________________________ test_io_egi __________________________________\r\nmne/io/egi/tests/test_egi.py:143: in test_io_egi\r\n    raw = read_raw_egi(egi_fname, include=None)\r\n<decorator-gen-182>:24: in read_raw_egi\r\n    ???\r\nmne/io/egi/egi.py:153: in read_raw_egi\r\n    return RawEGI(input_fname, eog, misc, include, exclude, preload,\r\n<decorator-gen-183>:24: in __init__\r\n    ???\r\nmne/io/egi/egi.py:170: in __init__\r\n    egi_info = _read_header(fid)\r\nmne/io/egi/egi.py:52: in _read_header\r\n    raise RuntimeError('Floating point precision is undefined.')\r\nE   RuntimeError: Floating point precision is undefined.\r\n----------------------------- Captured stdout call -----------------------------\r\nReading EGI header from /builddir/build/BUILD/mne-python-0.21.2/mne/io/egi/tests/data/test_egi.raw...\r\n_________________________________ test_io_mrk __________________________________\r\nmne/io/kit/tests/test_coreg.py:26: in test_io_mrk\r\n    pts = read_mrk(mrk_fname)\r\nmne/io/kit/coreg.py:40: in read_mrk\r\n    mrk_count = unpack('i', fid.read(KIT.INT))[0]\r\nE   struct.error: unpack requires a buffer of 4 bytes\r\n_________________________________ test_epochs __________________________________\r\nmne/io/kit/tests/test_kit.py:205: in test_epochs\r\n    raw = read_raw_kit(sqd_path, stim=None)\r\nmne/io/kit/kit.py:903: in read_raw_kit\r\n    return RawKIT(input_fname=input_fname, mrk=mrk, elp=elp, hsp=hsp,\r\n<decorator-gen-211>:24: in __init__\r\n    ???\r\nmne/io/kit/kit.py:134: in __init__\r\n    info, kit_info = get_kit_info(\r\n<decorator-gen-213>:24: in get_kit_info\r\n    ???\r\nmne/io/kit/kit.py:495: in get_kit_info\r\n    dirs.extend(_read_dir(fid) for _ in range(dirs[0]['count'] - 1))\r\nmne/io/kit/kit.py:495: in <genexpr>\r\n    dirs.extend(_read_dir(fid) for _ in range(dirs[0]['count'] - 1))\r\nmne/io/kit/kit.py:459: in _read_dir\r\n    size=np.fromfile(fid, np.int32, 1)[0],\r\nE   IndexError: index 0 is out of bounds for axis 0 with size 0\r\n----------------------------- Captured stdout call -----------------------------\r\nExtracting SQD Parameters from /builddir/build/BUILD/mne-python-0.21.2/mne/io/kit/tests/data/test.sqd...\r\nCreating Raw.info structure...\r\n_______________________________ test_raw_events ________________________________\r\nmne/io/kit/tests/test_kit.py:222: in test_raw_events\r\n    raw = read_raw_kit(sqd_path)\r\nmne/io/kit/kit.py:903: in read_raw_kit\r\n    return RawKIT(input_fname=input_fname, mrk=mrk, elp=elp, hsp=hsp,\r\n<decorator-gen-211>:24: in __init__\r\n    ???\r\nmne/io/kit/kit.py:134: in __init__\r\n    info, kit_info = get_kit_info(\r\n<decorator-gen-213>:24: in get_kit_info\r\n    ???\r\nmne/io/kit/kit.py:495: in get_kit_info\r\n    dirs.extend(_read_dir(fid) for _ in range(dirs[0]['count'] - 1))\r\nmne/io/kit/kit.py:495: in <genexpr>\r\n    dirs.extend(_read_dir(fid) for _ in range(dirs[0]['count'] - 1))\r\nmne/io/kit/kit.py:459: in _read_dir\r\n    size=np.fromfile(fid, np.int32, 1)[0],\r\nE   IndexError: index 0 is out of bounds for axis 0 with size 0\r\n----------------------------- Captured stdout call -----------------------------\r\nExtracting SQD Parameters from /builddir/build/BUILD/mne-python-0.21.2/mne/io/kit/tests/data/test.sqd...\r\nCreating Raw.info structure...\r\n_________________________________ test_ch_loc __________________________________\r\nmne/io/kit/tests/test_kit.py:246: in test_ch_loc\r\n    raw_py = read_raw_kit(sqd_path, mrk_path, elp_txt_path, hsp_txt_path,\r\nmne/io/kit/kit.py:903: in read_raw_kit\r\n    return RawKIT(input_fname=input_fname, mrk=mrk, elp=elp, hsp=hsp,\r\n<decorator-gen-211>:24: in __init__\r\n    ???\r\nmne/io/kit/kit.py:134: in __init__\r\n    info, kit_info = get_kit_info(\r\n<decorator-gen-213>:24: in get_kit_info\r\n    ???\r\nmne/io/kit/kit.py:495: in get_kit_info\r\n    dirs.extend(_read_dir(fid) for _ in range(dirs[0]['count'] - 1))\r\nmne/io/kit/kit.py:495: in <genexpr>\r\n    dirs.extend(_read_dir(fid) for _ in range(dirs[0]['count'] - 1))\r\nmne/io/kit/kit.py:459: in _read_dir\r\n    size=np.fromfile(fid, np.int32, 1)[0],\r\nE   IndexError: index 0 is out of bounds for axis 0 with size 0\r\n----------------------------- Captured stdout call -----------------------------\r\nExtracting SQD Parameters from /builddir/build/BUILD/mne-python-0.21.2/mne/io/kit/tests/data/test.sqd...\r\nCreating Raw.info structure...\r\n_________________________________ test_hsp_elp _________________________________\r\nmne/io/kit/tests/test_kit.py:275: in test_hsp_elp\r\n    raw_txt = read_raw_kit(sqd_path, mrk_path, elp_txt_path, hsp_txt_path)\r\nmne/io/kit/kit.py:903: in read_raw_kit\r\n    return RawKIT(input_fname=input_fname, mrk=mrk, elp=elp, hsp=hsp,\r\n<decorator-gen-211>:24: in __init__\r\n    ???\r\nmne/io/kit/kit.py:134: in __init__\r\n    info, kit_info = get_kit_info(\r\n<decorator-gen-213>:24: in get_kit_info\r\n    ???\r\nmne/io/kit/kit.py:495: in get_kit_info\r\n    dirs.extend(_read_dir(fid) for _ in range(dirs[0]['count'] - 1))\r\nmne/io/kit/kit.py:495: in <genexpr>\r\n    dirs.extend(_read_dir(fid) for _ in range(dirs[0]['count'] - 1))\r\nmne/io/kit/kit.py:459: in _read_dir\r\n    size=np.fromfile(fid, np.int32, 1)[0],\r\nE   IndexError: index 0 is out of bounds for axis 0 with size 0\r\n----------------------------- Captured stdout call -----------------------------\r\nExtracting SQD Parameters from /builddir/build/BUILD/mne-python-0.21.2/mne/io/kit/tests/data/test.sqd...\r\nCreating Raw.info structure...\r\n________________________________ test_decimate _________________________________\r\nmne/io/kit/tests/test_kit.py:308: in test_decimate\r\n    raw = read_raw_kit(sqd_path, mrk_path, elp_txt_path, sphere_hsp_path)\r\nmne/io/kit/kit.py:903: in read_raw_kit\r\n    return RawKIT(input_fname=input_fname, mrk=mrk, elp=elp, hsp=hsp,\r\n<decorator-gen-211>:24: in __init__\r\n    ???\r\nmne/io/kit/kit.py:134: in __init__\r\n    info, kit_info = get_kit_info(\r\n<decorator-gen-213>:24: in get_kit_info\r\n    ???\r\nmne/io/kit/kit.py:495: in get_kit_info\r\n    dirs.extend(_read_dir(fid) for _ in range(dirs[0]['count'] - 1))\r\nmne/io/kit/kit.py:495: in <genexpr>\r\n    dirs.extend(_read_dir(fid) for _ in range(dirs[0]['count'] - 1))\r\nmne/io/kit/kit.py:459: in _read_dir\r\n    size=np.fromfile(fid, np.int32, 1)[0],\r\nE   IndexError: index 0 is out of bounds for axis 0 with size 0\r\n----------------------------- Captured stdout call -----------------------------\r\nExtracting SQD Parameters from /builddir/build/BUILD/mne-python-0.21.2/mne/io/kit/tests/data/test.sqd...\r\nCreating Raw.info structure...\r\n________________________________ test_pick_refs ________________________________\r\nmne/io/tests/test_pick.py:99: in test_pick_refs\r\n    raw_kit = read_raw_kit(sqd_path, mrk_path, elp_path, hsp_path)\r\nmne/io/kit/kit.py:903: in read_raw_kit\r\n    return RawKIT(input_fname=input_fname, mrk=mrk, elp=elp, hsp=hsp,\r\n<decorator-gen-211>:24: in __init__\r\n    ???\r\nmne/io/kit/kit.py:134: in __init__\r\n    info, kit_info = get_kit_info(\r\n<decorator-gen-213>:24: in get_kit_info\r\n    ???\r\nmne/io/kit/kit.py:495: in get_kit_info\r\n    dirs.extend(_read_dir(fid) for _ in range(dirs[0]['count'] - 1))\r\nmne/io/kit/kit.py:495: in <genexpr>\r\n    dirs.extend(_read_dir(fid) for _ in range(dirs[0]['count'] - 1))\r\nmne/io/kit/kit.py:459: in _read_dir\r\n    size=np.fromfile(fid, np.int32, 1)[0],\r\nE   IndexError: index 0 is out of bounds for axis 0 with size 0\r\n----------------------------- Captured stdout call -----------------------------\r\nExtracting SQD Parameters from /builddir/build/BUILD/mne-python-0.21.2/mne/io/tests/../kit/tests/data/test.sqd...\r\nCreating Raw.info structure...\r\n_______________________ test_read_raw_supported[fname3] ________________________\r\nmne/io/tests/test_read_raw.py:35: in test_read_raw_supported\r\n    read_raw(fname)\r\nmne/io/_read_raw.py:82: in read_raw\r\n    return readers[ext](fname, preload=preload, verbose=verbose, **kwargs)\r\nmne/io/kit/kit.py:903: in read_raw_kit\r\n    return RawKIT(input_fname=input_fname, mrk=mrk, elp=elp, hsp=hsp,\r\n<decorator-gen-211>:24: in __init__\r\n    ???\r\nmne/io/kit/kit.py:134: in __init__\r\n    info, kit_info = get_kit_info(\r\n<decorator-gen-213>:24: in get_kit_info\r\n    ???\r\nmne/io/kit/kit.py:495: in get_kit_info\r\n    dirs.extend(_read_dir(fid) for _ in range(dirs[0]['count'] - 1))\r\nmne/io/kit/kit.py:495: in <genexpr>\r\n    dirs.extend(_read_dir(fid) for _ in range(dirs[0]['count'] - 1))\r\nmne/io/kit/kit.py:459: in _read_dir\r\n    size=np.fromfile(fid, np.int32, 1)[0],\r\nE   IndexError: index 0 is out of bounds for axis 0 with size 0\r\n----------------------------- Captured stdout call -----------------------------\r\nExtracting SQD Parameters from /builddir/build/BUILD/mne-python-0.21.2/mne/io/kit/tests/data/test.sqd...\r\nCreating Raw.info structure...\r\n______________________________ test_other_systems ______________________________\r\nmne/preprocessing/tests/test_maxwell.py:235: in test_other_systems\r\n    raw_kit = read_raw_kit(sqd_path, mrk_path, elp_path, hsp_path)\r\nmne/io/kit/kit.py:903: in read_raw_kit\r\n    return RawKIT(input_fname=input_fname, mrk=mrk, elp=elp, hsp=hsp,\r\n<decorator-gen-211>:24: in __init__\r\n    ???\r\nmne/io/kit/kit.py:134: in __init__\r\n    info, kit_info = get_kit_info(\r\n<decorator-gen-213>:24: in get_kit_info\r\n    ???\r\nmne/io/kit/kit.py:495: in get_kit_info\r\n    dirs.extend(_read_dir(fid) for _ in range(dirs[0]['count'] - 1))\r\nmne/io/kit/kit.py:495: in <genexpr>\r\n    dirs.extend(_read_dir(fid) for _ in range(dirs[0]['count'] - 1))\r\nmne/io/kit/kit.py:459: in _read_dir\r\n    size=np.fromfile(fid, np.int32, 1)[0],\r\nE   IndexError: index 0 is out of bounds for axis 0 with size 0\r\n----------------------------- Captured stdout call -----------------------------\r\nExtracting SQD Parameters from /builddir/build/BUILD/mne-python-0.21.2/mne/preprocessing/tests/../../io/kit/tests/data/test.sqd...\r\nCreating Raw.info structure...\r\n=============================== warnings summary ===============================\r\nmne/utils/docs.py:1776\r\n  /builddir/build/BUILD/mne-python-0.21.2/mne/utils/docs.py:1776: DeprecationWarning: `unindent_dict` is deprecated!\r\n  scipy.misc.unindent_dict is deprecated in SciPy 1.3.0\r\n    docdict = unindent_dict(docdict)\r\nmne/utils/docs.py:1777\r\n  /builddir/build/BUILD/mne-python-0.21.2/mne/utils/docs.py:1777: DeprecationWarning: `filldoc` is deprecated!\r\n  scipy.misc.filldoc is deprecated in SciPy 1.3.0\r\n    fill_doc = filldoc(docdict, unindent_params=False)\r\nmne/datasets/utils.py:62\r\n  /builddir/build/BUILD/mne-python-0.21.2/mne/datasets/utils.py:62: DeprecationWarning: `docformat` is deprecated!\r\n  scipy.misc.docformat is deprecated in Scipy 1.3.0\r\n    _data_path_doc = docformat(_data_path_doc, docdict)\r\nmne/datasets/utils.py:63\r\n  /builddir/build/BUILD/mne-python-0.21.2/mne/datasets/utils.py:63: DeprecationWarning: `docformat` is deprecated!\r\n  scipy.misc.docformat is deprecated in Scipy 1.3.0\r\n    _data_path_doc_accept = docformat(_data_path_doc_accept, docdict)\r\nmne/conftest.py:449\r\n  /builddir/build/BUILD/mne-python-0.21.2/mne/conftest.py:449: PytestUnknownMarkWarning: Unknown pytest.mark.slowtest - is this a typo?  You can register custom marks to avoid this warning - for details, see https://docs.pytest.org/en/stable/mark.html\r\n    @pytest.mark.slowtest\r\n-- Docs: https://docs.pytest.org/en/stable/warnings.html\r\n- generated xml file: /builddir/build/BUILD/mne-python-0.21.2/junit-results.xml -\r\n```\r\n", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/8616/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8616/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/8609", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8609/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8609/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8609/events", "html_url": "https://github.com/mne-tools/mne-python/issues/8609", "id": 757234833, "node_id": "MDU6SXNzdWU3NTcyMzQ4MzM=", "number": 8609, "title": "CI, MAINT: circle failing again", "user": {"login": "drammock", "id": 1810515, "node_id": "MDQ6VXNlcjE4MTA1MTU=", "avatar_url": "https://avatars.githubusercontent.com/u/1810515?v=4", "gravatar_id": "", "url": "https://api.github.com/users/drammock", "html_url": "https://github.com/drammock", "followers_url": "https://api.github.com/users/drammock/followers", "following_url": "https://api.github.com/users/drammock/following{/other_user}", "gists_url": "https://api.github.com/users/drammock/gists{/gist_id}", "starred_url": "https://api.github.com/users/drammock/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/drammock/subscriptions", "organizations_url": "https://api.github.com/users/drammock/orgs", "repos_url": "https://api.github.com/users/drammock/repos", "events_url": "https://api.github.com/users/drammock/events{/privacy}", "received_events_url": "https://api.github.com/users/drammock/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2020-12-04T16:33:16Z", "updated_at": "2020-12-07T13:38:48Z", "closed_at": "2020-12-07T13:38:48Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "Circle builds are failing on the MxNE example with this:\r\n\r\n```\r\nTraceback (most recent call last):\r\n  File \"/home/circleci/project/examples/inverse/plot_time_frequency_mixed_norm_inverse.py\", line 126, in <module>\r\n    brain = stc.plot('sample', 'inflated', 'rh', views='medial',\r\n  File \"/home/circleci/project/mne/source_estimate.py\", line 653, in plot\r\n    brain = plot_source_estimates(\r\n  File \"<decorator-gen-139>\", line 24, in plot_source_estimates\r\n  File \"/home/circleci/project/mne/viz/_3d.py\", line 1794, in plot_source_estimates\r\n    return _plot_stc(\r\n  File \"/home/circleci/project/mne/viz/_3d.py\", line 1984, in _plot_stc\r\n    brain.setup_time_viewer(time_viewer=time_viewer,\r\n  File \"/home/circleci/project/mne/viz/_brain/_brain.py\", line 416, in setup_time_viewer\r\n    self._configure_sliders()\r\n  File \"/home/circleci/project/mne/viz/_brain/_brain.py\", line 719, in _configure_sliders\r\n    value=self._data['smoothing_steps'],\r\nKeyError: 'smoothing_steps'\r\n```\r\n\r\n(see here: https://app.circleci.com/pipelines/github/mne-tools/mne-python/5139/workflows/937701e3-a227-414d-a747-7c65e415acbe/jobs/23925)\r\n\r\n@GuillaumeFavelier knows what went wrong perhaps?", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/8609/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8609/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/8599", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8599/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8599/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8599/events", "html_url": "https://github.com/mne-tools/mne-python/issues/8599", "id": 755728725, "node_id": "MDU6SXNzdWU3NTU3Mjg3MjU=", "number": 8599, "title": "BUG: Bug with `pip pre` / sklearn", "user": {"login": "larsoner", "id": 2365790, "node_id": "MDQ6VXNlcjIzNjU3OTA=", "avatar_url": "https://avatars.githubusercontent.com/u/2365790?v=4", "gravatar_id": "", "url": "https://api.github.com/users/larsoner", "html_url": "https://github.com/larsoner", "followers_url": "https://api.github.com/users/larsoner/followers", "following_url": "https://api.github.com/users/larsoner/following{/other_user}", "gists_url": "https://api.github.com/users/larsoner/gists{/gist_id}", "starred_url": "https://api.github.com/users/larsoner/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/larsoner/subscriptions", "organizations_url": "https://api.github.com/users/larsoner/orgs", "repos_url": "https://api.github.com/users/larsoner/repos", "events_url": "https://api.github.com/users/larsoner/events{/privacy}", "received_events_url": "https://api.github.com/users/larsoner/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/mne-tools/mne-python/milestones/18", "html_url": "https://github.com/mne-tools/mne-python/milestone/18", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/milestones/18/labels", "id": 5802238, "node_id": "MDk6TWlsZXN0b25lNTgwMjIzOA==", "number": 18, "title": "0.22", "description": "", "creator": {"login": "larsoner", "id": 2365790, "node_id": "MDQ6VXNlcjIzNjU3OTA=", "avatar_url": "https://avatars.githubusercontent.com/u/2365790?v=4", "gravatar_id": "", "url": "https://api.github.com/users/larsoner", "html_url": "https://github.com/larsoner", "followers_url": "https://api.github.com/users/larsoner/followers", "following_url": "https://api.github.com/users/larsoner/following{/other_user}", "gists_url": "https://api.github.com/users/larsoner/gists{/gist_id}", "starred_url": "https://api.github.com/users/larsoner/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/larsoner/subscriptions", "organizations_url": "https://api.github.com/users/larsoner/orgs", "repos_url": "https://api.github.com/users/larsoner/repos", "events_url": "https://api.github.com/users/larsoner/events{/privacy}", "received_events_url": "https://api.github.com/users/larsoner/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 53, "state": "closed", "created_at": "2020-08-24T06:23:40Z", "updated_at": "2020-12-17T15:39:07Z", "due_on": "2020-12-15T08:00:00Z", "closed_at": "2020-12-17T15:39:07Z"}, "comments": 3, "created_at": "2020-12-03T01:06:30Z", "updated_at": "2021-03-08T18:03:47Z", "closed_at": "2020-12-03T09:47:14Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "@agramfort maybe a quick one for you:\r\n```\r\n____________________ test_get_coef_multiclass_full[4-10-2] ____________________\r\nmne\\decoding\\tests\\test_base.py:302: in test_get_coef_multiclass_full\r\n    scores = cross_val_multiscore(time_gen, X, y, cv=cv, verbose=True)\r\nmne\\decoding\\base.py:441: in cross_val_multiscore\r\n    scores = parallel(p_func(clone(estimator), X, y, scorer, train, test,\r\nmne\\decoding\\base.py:441: in <genexpr>\r\n    scores = parallel(p_func(clone(estimator), X, y, scorer, train, test,\r\nmne\\decoding\\base.py:474: in _fit_and_score\r\n    X_train, y_train = _safe_split(estimator, X, y, train)\r\nc:\\hostedtoolcache\\windows\\python\\3.8.6\\x64\\lib\\site-packages\\sklearn\\utils\\metaestimators.py:198: in _safe_split\r\n    if _is_pairwise(estimator):\r\nc:\\hostedtoolcache\\windows\\python\\3.8.6\\x64\\lib\\site-packages\\sklearn\\base.py:844: in _is_pairwise\r\n    pairwise_tag = _safe_tags(estimator, key=\"pairwise\")\r\nc:\\hostedtoolcache\\windows\\python\\3.8.6\\x64\\lib\\site-packages\\sklearn\\utils\\_tags.py:62: in _safe_tags\r\n    raise ValueError(\r\nE   ValueError: The key pairwise is not defined in _get_tags() for the class GeneralizingEstimator.\r\n```", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/8599/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8599/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/8591", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8591/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8591/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8591/events", "html_url": "https://github.com/mne-tools/mne-python/issues/8591", "id": 754827533, "node_id": "MDU6SXNzdWU3NTQ4Mjc1MzM=", "number": 8591, "title": "CI, MAINT: pip install failures", "user": {"login": "drammock", "id": 1810515, "node_id": "MDQ6VXNlcjE4MTA1MTU=", "avatar_url": "https://avatars.githubusercontent.com/u/1810515?v=4", "gravatar_id": "", "url": "https://api.github.com/users/drammock", "html_url": "https://github.com/drammock", "followers_url": "https://api.github.com/users/drammock/followers", "following_url": "https://api.github.com/users/drammock/following{/other_user}", "gists_url": "https://api.github.com/users/drammock/gists{/gist_id}", "starred_url": "https://api.github.com/users/drammock/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/drammock/subscriptions", "organizations_url": "https://api.github.com/users/drammock/orgs", "repos_url": "https://api.github.com/users/drammock/repos", "events_url": "https://api.github.com/users/drammock/events{/privacy}", "received_events_url": "https://api.github.com/users/drammock/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-12-02T00:24:20Z", "updated_at": "2020-12-02T16:40:43Z", "closed_at": "2020-12-02T16:40:43Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "pip is trying and failing to compile `llvmlite` from source on the Azure windows tests ([see here](https://dev.azure.com/mne-tools/mne-python/_build/results?buildId=10488&view=logs&j=8d04c17d-3f6b-5313-febd-debdd8b57f4c&t=3680e94e-d3c2-55c5-2f66-41608de01c92&l=423)).  It is also complaining about \"falling back to setup.py because of missing wheels package\" [see here](https://dev.azure.com/mne-tools/mne-python/_build/results?buildId=10488&view=logs&j=8d04c17d-3f6b-5313-febd-debdd8b57f4c&t=3680e94e-d3c2-55c5-2f66-41608de01c92&l=395).  Maybe adding \"wheels\" will fix it?  This may be related to the new pip dependency resolver, which just became default in pip 20.3 yesterday... we could also try rolling back to use the old resolver.", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/8591/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8591/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/8588", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8588/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8588/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8588/events", "html_url": "https://github.com/mne-tools/mne-python/issues/8588", "id": 754767940, "node_id": "MDU6SXNzdWU3NTQ3Njc5NDA=", "number": 8588, "title": "plot_compare_evokeds only plots one waveform, given list of inputs and identical comments", "user": {"login": "aaronjnewman", "id": 63217782, "node_id": "MDQ6VXNlcjYzMjE3Nzgy", "avatar_url": "https://avatars.githubusercontent.com/u/63217782?v=4", "gravatar_id": "", "url": "https://api.github.com/users/aaronjnewman", "html_url": "https://github.com/aaronjnewman", "followers_url": "https://api.github.com/users/aaronjnewman/followers", "following_url": "https://api.github.com/users/aaronjnewman/following{/other_user}", "gists_url": "https://api.github.com/users/aaronjnewman/gists{/gist_id}", "starred_url": "https://api.github.com/users/aaronjnewman/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/aaronjnewman/subscriptions", "organizations_url": "https://api.github.com/users/aaronjnewman/orgs", "repos_url": "https://api.github.com/users/aaronjnewman/repos", "events_url": "https://api.github.com/users/aaronjnewman/events{/privacy}", "received_events_url": "https://api.github.com/users/aaronjnewman/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "drammock", "id": 1810515, "node_id": "MDQ6VXNlcjE4MTA1MTU=", "avatar_url": "https://avatars.githubusercontent.com/u/1810515?v=4", "gravatar_id": "", "url": "https://api.github.com/users/drammock", "html_url": "https://github.com/drammock", "followers_url": "https://api.github.com/users/drammock/followers", "following_url": "https://api.github.com/users/drammock/following{/other_user}", "gists_url": "https://api.github.com/users/drammock/gists{/gist_id}", "starred_url": "https://api.github.com/users/drammock/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/drammock/subscriptions", "organizations_url": "https://api.github.com/users/drammock/orgs", "repos_url": "https://api.github.com/users/drammock/repos", "events_url": "https://api.github.com/users/drammock/events{/privacy}", "received_events_url": "https://api.github.com/users/drammock/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "drammock", "id": 1810515, "node_id": "MDQ6VXNlcjE4MTA1MTU=", "avatar_url": "https://avatars.githubusercontent.com/u/1810515?v=4", "gravatar_id": "", "url": "https://api.github.com/users/drammock", "html_url": "https://github.com/drammock", "followers_url": "https://api.github.com/users/drammock/followers", "following_url": "https://api.github.com/users/drammock/following{/other_user}", "gists_url": "https://api.github.com/users/drammock/gists{/gist_id}", "starred_url": "https://api.github.com/users/drammock/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/drammock/subscriptions", "organizations_url": "https://api.github.com/users/drammock/orgs", "repos_url": "https://api.github.com/users/drammock/repos", "events_url": "https://api.github.com/users/drammock/events{/privacy}", "received_events_url": "https://api.github.com/users/drammock/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2020-12-01T22:17:09Z", "updated_at": "2020-12-02T18:21:54Z", "closed_at": "2020-12-02T18:21:54Z", "author_association": "NONE", "active_lock_reason": null, "body": "Between v 0.20.7 and 0.21.2, the way mnw.viz.plot_compare_evokeds() deals with a list of inputs haschanged. \r\n\r\n#### Steps to reproduce\r\nGiven a dict of Evokeds such as this:\r\n\r\n```\r\ngavg = {'Condition A': <Evoked | 'Grand average (n = 20)' (average, N=20), [-0.19922, 1] sec, 64 ch, ~479 kB>,\r\n        'Condition B': <Evoked | 'Grand average (n = 20)' (average, N=20), [-0.19922, 1] sec, 64 ch, ~479 kB>,\r\n        'Condition C': <Evoked | 'Grand average (n = 20)' (average, N=20), [-0.19922, 1] sec, 64 ch, ~479 kB>,\r\n        'Condition D': <Evoked | 'Grand average (n = 20)' (average, N=20), [-0.19922, 1] sec, 64 ch, ~479 kB>}\r\n```\r\n\r\nand the command:\r\n\r\n`mne.viz.plot_compare_evokeds([gavg['Condition A'], gavg['Condition B']]`\r\n\r\n...the previous (0.20.7) behavior was to plot a line for each input in the list.\r\n\r\nThe new (0.21.2) behavior plots a single line. \r\n\r\nThe documentation for each version is below, with the change in bold:\r\n\r\n### 0.20.7\r\n> If a single Evoked instance, it is plotted as a time series. If a dict whose values are Evoked objects, the contents are plotted as single time series each and the keys are used as condition labels. If a list of Evokeds, the contents are plotted with indices as labels. If a [dict/list] of lists, the unweighted mean is plotted as a time series and the parametric confidence interval is plotted as a shaded area. All instances must have the same shape - channel numbers, time points etc. If dict, keys must be of type str.\r\n\r\n### 0.21.2\r\n> If a single Evoked instance, it is plotted as a time series. **If a list of Evokeds, the contents are plotted with their .comment attributes used as condition labels. If no comment is set, the index of the respectiv Evoked the list will be used instead, starting with 1 for the first Evoked.** If a dict whose values are Evoked objects, the contents are plotted as single time series each and the keys are used as labels. If a [dict/list] of lists, the unweighted mean is plotted as a time series and the parametric confidence interval is plotted as a shaded area. All instances must have the same shape - channel numbers, time points etc. If dict, keys must be of type str.\r\n\r\nWhat does not seem to be documented (and, IMHO, is a bug), is that if multiple inputs have the same comment, only the last input is plotted. Perhaps in this case all inputs could be plotted, but a warning could be issued about the identical comments?\r\n\r\nNote as well the typo 'respectiv' in the newer version of the documentation.\r\n", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/8588/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8588/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/8587", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8587/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8587/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8587/events", "html_url": "https://github.com/mne-tools/mne-python/issues/8587", "id": 753717470, "node_id": "MDU6SXNzdWU3NTM3MTc0NzA=", "number": 8587, "title": "BUG, ENH:  Overwriting of raw with certain tools in simulation/raw.py", "user": {"login": "NeuroLaunch", "id": 40672003, "node_id": "MDQ6VXNlcjQwNjcyMDAz", "avatar_url": "https://avatars.githubusercontent.com/u/40672003?v=4", "gravatar_id": "", "url": "https://api.github.com/users/NeuroLaunch", "html_url": "https://github.com/NeuroLaunch", "followers_url": "https://api.github.com/users/NeuroLaunch/followers", "following_url": "https://api.github.com/users/NeuroLaunch/following{/other_user}", "gists_url": "https://api.github.com/users/NeuroLaunch/gists{/gist_id}", "starred_url": "https://api.github.com/users/NeuroLaunch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/NeuroLaunch/subscriptions", "organizations_url": "https://api.github.com/users/NeuroLaunch/orgs", "repos_url": "https://api.github.com/users/NeuroLaunch/repos", "events_url": "https://api.github.com/users/NeuroLaunch/events{/privacy}", "received_events_url": "https://api.github.com/users/NeuroLaunch/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/mne-tools/mne-python/milestones/18", "html_url": "https://github.com/mne-tools/mne-python/milestone/18", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/milestones/18/labels", "id": 5802238, "node_id": "MDk6TWlsZXN0b25lNTgwMjIzOA==", "number": 18, "title": "0.22", "description": "", "creator": {"login": "larsoner", "id": 2365790, "node_id": "MDQ6VXNlcjIzNjU3OTA=", "avatar_url": "https://avatars.githubusercontent.com/u/2365790?v=4", "gravatar_id": "", "url": "https://api.github.com/users/larsoner", "html_url": "https://github.com/larsoner", "followers_url": "https://api.github.com/users/larsoner/followers", "following_url": "https://api.github.com/users/larsoner/following{/other_user}", "gists_url": "https://api.github.com/users/larsoner/gists{/gist_id}", "starred_url": "https://api.github.com/users/larsoner/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/larsoner/subscriptions", "organizations_url": "https://api.github.com/users/larsoner/orgs", "repos_url": "https://api.github.com/users/larsoner/repos", "events_url": "https://api.github.com/users/larsoner/events{/privacy}", "received_events_url": "https://api.github.com/users/larsoner/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 53, "state": "closed", "created_at": "2020-08-24T06:23:40Z", "updated_at": "2020-12-17T15:39:07Z", "due_on": "2020-12-15T08:00:00Z", "closed_at": "2020-12-17T15:39:07Z"}, "comments": 3, "created_at": "2020-11-30T18:50:16Z", "updated_at": "2020-12-16T14:29:14Z", "closed_at": "2020-12-16T14:29:14Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "#### Describe the bug\r\nIn `add_ecg()`, `add_eog()`, and `add_chpi()` functions in mne/simulation/raw.py, the newly added waveforms overwrite the existing raw data (e.g. as created with `simulate_raw()` and `add_noise()`). \r\n\r\nAside from this bug, I would suggest enhancements related to dealing with the _raw.first_samp_ parameter and its behavior with event and head position information when creating simulated data.\r\n\r\n#### Steps to reproduce\r\nThe following is an edited snippet from my own code:\r\n```\r\nraw_sim = simulate_raw(raw.info, source_simulator, src=src, bem=bem, head_pos=head_pos)\r\nadd_noise(raw_sim, cov=cov)    # this part is ok\r\n\r\nadd_chpi(raw_sim, head_pos=head_pos)    # this part erases the above data in 'raw_sim'\r\nadd_ecg(raw_sim)    # so does this\r\n```\r\n\r\nAdditionally, the bug is evident in the simulation example at https://mne.tools/stable/auto_examples/simulation/plot_simulated_raw_data_using_subject_anatomy.html, and at least one other.\r\n\r\n#### Expected and actual results\r\nIn the MNE documentation example linked above, the source activity and structured noise created in _raw_sim_ are missing after the EOG and ECG steps.  As a result, the brain map source estimations reflect only the ECG transients rather than a __summation__ of source waveforms, spatially structured noise, EOG, and ECG.\r\n\r\n#### Additional information\r\nI have identified the source of the bug described and plan to make my own PR with a simple fix.  However, I thought it would be a good opportunity to also make documentation revisions and code enhancements related to simulations, such as a fuller description of the output in the examples and inclusion of the _raw.first_samp_ information when adding events to the SourceSimulator object used in `simulate_raw()`.\r\n", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/8587/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8587/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/8582", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8582/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8582/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8582/events", "html_url": "https://github.com/mne-tools/mne-python/issues/8582", "id": 753424716, "node_id": "MDU6SXNzdWU3NTM0MjQ3MTY=", "number": 8582, "title": "Bug in mne.io.read_raw_gdf()", "user": {"login": "apospraf", "id": 9465194, "node_id": "MDQ6VXNlcjk0NjUxOTQ=", "avatar_url": "https://avatars.githubusercontent.com/u/9465194?v=4", "gravatar_id": "", "url": "https://api.github.com/users/apospraf", "html_url": "https://github.com/apospraf", "followers_url": "https://api.github.com/users/apospraf/followers", "following_url": "https://api.github.com/users/apospraf/following{/other_user}", "gists_url": "https://api.github.com/users/apospraf/gists{/gist_id}", "starred_url": "https://api.github.com/users/apospraf/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/apospraf/subscriptions", "organizations_url": "https://api.github.com/users/apospraf/orgs", "repos_url": "https://api.github.com/users/apospraf/repos", "events_url": "https://api.github.com/users/apospraf/events{/privacy}", "received_events_url": "https://api.github.com/users/apospraf/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2020-11-30T12:09:46Z", "updated_at": "2020-11-30T15:32:22Z", "closed_at": "2020-11-30T15:31:55Z", "author_association": "NONE", "active_lock_reason": null, "body": "#### Describe the bug\r\nLowpass and highpass cut off frequencies are swapped when using `mne.io.read_raw_gdf()` to load a gdf file from the BCI IV 2b dataset.\r\n\r\n\r\n#### Steps to reproduce\r\n\r\n1. Download BCI IV 2b dataset from [here](http://www.bbci.de/competition/iv/) (it requires a name and an email)\r\n2. Load one of the gdf files using `mne.io.read_raw_gdf()`\r\n\r\n#### Expected results\r\n`raw_gdf.info` should return:\r\n```\r\n<Info | 7 non-empty values\r\n bads: []\r\n ch_names: EEG:C3, EEG:Cz, EEG:C4, EOG:ch01, EOG:ch02, EOG:ch03\r\n chs: 6 EEG\r\n custom_ref_applied: False\r\n highpass: 0.5 Hz\r\n lowpass: 100 Hz\r\n meas_date: 2006-03-07 09:23:36 UTC\r\n nchan: 6\r\n projs: []\r\n sfreq: 250.0 Hz\r\n>\r\n```\r\n\r\nAlso `raw_gdf.plot()` should look like the figure below\r\n![figure1](https://user-images.githubusercontent.com/9465194/100607553-c6584180-3313-11eb-9b65-07dd44971779.png)\r\n\r\n\r\n#### Actual results\r\n> `raw_gdf.info`\r\n```\r\n<Info | 7 non-empty values\r\n bads: []\r\n ch_names: EEG:C3, EEG:Cz, EEG:C4, EOG:ch01, EOG:ch02, EOG:ch03\r\n chs: 6 EEG\r\n custom_ref_applied: False\r\n highpass: 100.0 Hz\r\n lowpass: 0.5 Hz\r\n meas_date: 2006-03-07 09:23:36 UTC\r\n nchan: 6\r\n projs: []\r\n sfreq: 250.0 Hz\r\n>\r\n```\r\n> `raw_gdf.plot()`\r\n![figure2](https://user-images.githubusercontent.com/9465194/100607692-facbfd80-3313-11eb-8bb0-b74151c9628b.png)\r\n\r\n#### Additional information\r\nI'm using the 0.22.dev0 version of mne on Ubuntu 18.04\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/8582/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8582/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/8579", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8579/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8579/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8579/events", "html_url": "https://github.com/mne-tools/mne-python/issues/8579", "id": 752950833, "node_id": "MDU6SXNzdWU3NTI5NTA4MzM=", "number": 8579, "title": "CSP.plot_filters() is actually plotting the transpose of filters", "user": {"login": "rubyyhj", "id": 21952030, "node_id": "MDQ6VXNlcjIxOTUyMDMw", "avatar_url": "https://avatars.githubusercontent.com/u/21952030?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rubyyhj", "html_url": "https://github.com/rubyyhj", "followers_url": "https://api.github.com/users/rubyyhj/followers", "following_url": "https://api.github.com/users/rubyyhj/following{/other_user}", "gists_url": "https://api.github.com/users/rubyyhj/gists{/gist_id}", "starred_url": "https://api.github.com/users/rubyyhj/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rubyyhj/subscriptions", "organizations_url": "https://api.github.com/users/rubyyhj/orgs", "repos_url": "https://api.github.com/users/rubyyhj/repos", "events_url": "https://api.github.com/users/rubyyhj/events{/privacy}", "received_events_url": "https://api.github.com/users/rubyyhj/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2020-11-29T16:17:51Z", "updated_at": "2020-11-29T18:35:51Z", "closed_at": "2020-11-29T18:35:51Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "#### Describe the bug\r\nThe `plot_filters()` method of `mne.decoding.CSP` is not plotting filters, but actually plotting the transpose of filters.\r\nUsing version `0.21.2`.\r\n\r\n\r\n#### Steps to reproduce\r\nUse the code from [Motor imagery decoding from EEG data using the Common Spatial Pattern (CSP)](https://mne.tools/stable/auto_examples/decoding/plot_decoding_csp_eeg.html?highlight=csp) and change the last line of the second code block `csp.plot_patterns` to `csp.plot_filters`, and the result is:\r\n\r\n![Current plot_filters result](https://i.loli.net/2020/11/29/8jalSeG9WxDhrfo.png)\r\n\r\nAnd in `mne.decoding.CSP`, the each row of `filters_` attribute is one CSP filter, see: https://github.com/mne-tools/mne-python/blob/maint/0.21/mne/decoding/csp.py#L184. But if we set the second row of `filters_` to be all zeros, the figure almost has no change:\r\n```python\r\ncsp.filters_[1, :] = 0  # the coeffs in the second filter(row) are all 0 \r\ncsp.plot_filters(epochs.info, ch_type='eeg', units='Patterns (AU)', size=1.5)\r\n```\r\n![Not expected result](https://i.loli.net/2020/11/29/PEf6X8imKL37blv.png)\r\n\r\nInstead, if we set the second column of `filters_` to be all zeros, then the \"second filter\" CSP1 becomes empty:\r\n```python\r\ncsp.filters_[:, 1] = 0  # the second column of filters_\r\ncsp.plot_filters(epochs.info, ch_type='eeg', units='Patterns (AU)', size=1.5)\r\n```\r\n![empty](https://i.loli.net/2020/11/30/5KxoQnrIR6q7ubw.png)\r\n\r\nSo `plot_filters` is actually plotting the transpose of filters (the columns of `filters_`), not the csp filters (the rows of `filters_`).\r\n\r\n#### To fix it\r\nI think just change this line of code https://github.com/mne-tools/mne-python/blob/maint/0.21/mne/decoding/csp.py#L479 to \r\n`filters = EvokedArray(self.filters_.T, info, tmin=0)` could fix this issue. I tried the following code and the figure looks more reasonable to be CSP filters:\r\n```\r\ncsp.filters_ = csp.filters_.T\r\ncsp.plot_filters(epochs.info, ch_type='eeg', units='Patterns (AU)', size=1.5)\r\n```\r\n![result](https://i.loli.net/2020/11/30/a3h1xUiJyQ4PGLE.png)\r\n\r\nBTW, the figure from `plot_patterns` method is correct.", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/8579/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8579/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/8568", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8568/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8568/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8568/events", "html_url": "https://github.com/mne-tools/mne-python/issues/8568", "id": 749911205, "node_id": "MDU6SXNzdWU3NDk5MTEyMDU=", "number": 8568, "title": "Circle PyQt5 failure", "user": {"login": "drammock", "id": 1810515, "node_id": "MDQ6VXNlcjE4MTA1MTU=", "avatar_url": "https://avatars.githubusercontent.com/u/1810515?v=4", "gravatar_id": "", "url": "https://api.github.com/users/drammock", "html_url": "https://github.com/drammock", "followers_url": "https://api.github.com/users/drammock/followers", "following_url": "https://api.github.com/users/drammock/following{/other_user}", "gists_url": "https://api.github.com/users/drammock/gists{/gist_id}", "starred_url": "https://api.github.com/users/drammock/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/drammock/subscriptions", "organizations_url": "https://api.github.com/users/drammock/orgs", "repos_url": "https://api.github.com/users/drammock/repos", "events_url": "https://api.github.com/users/drammock/events{/privacy}", "received_events_url": "https://api.github.com/users/drammock/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-11-24T17:39:17Z", "updated_at": "2020-11-24T19:44:42Z", "closed_at": "2020-11-24T19:44:42Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "circle CI is failing at the \"CheckPyQt5\" stage with this:\r\n\r\n```\r\nqt.qpa.plugin: Could not load the Qt platform plugin \"xcb\" in \"\" even though it was found.\r\nThis application failed to start because no Qt platform plugin could be initialized. Reinstalling the application may fix this problem.\r\n\r\nAvailable platform plugins are: eglfs, linuxfb, minimal, minimalegl, offscreen, vnc, wayland-egl, wayland, wayland-xcomposite-egl, wayland-xcomposite-glx, webgl, xcb.\r\n```\r\n\r\nversion used (from the \"get python running\" stage):\r\n```\r\nCollecting PyQt5>=5.11.3imageio>=2.5.0\r\n  Downloading PyQt5-5.15.2-5.15.2-cp35.cp36.cp37.cp38.cp39-abi3-manylinux2014_x86_64.whl (68.3 MB)\r\n```", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/8568/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8568/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/8565", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8565/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8565/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8565/events", "html_url": "https://github.com/mne-tools/mne-python/issues/8565", "id": 749521159, "node_id": "MDU6SXNzdWU3NDk1MjExNTk=", "number": 8565, "title": "Website doesn't allow you to view v0.20 docs", "user": {"login": "rob-luke", "id": 748691, "node_id": "MDQ6VXNlcjc0ODY5MQ==", "avatar_url": "https://avatars.githubusercontent.com/u/748691?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rob-luke", "html_url": "https://github.com/rob-luke", "followers_url": "https://api.github.com/users/rob-luke/followers", "following_url": "https://api.github.com/users/rob-luke/following{/other_user}", "gists_url": "https://api.github.com/users/rob-luke/gists{/gist_id}", "starred_url": "https://api.github.com/users/rob-luke/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rob-luke/subscriptions", "organizations_url": "https://api.github.com/users/rob-luke/orgs", "repos_url": "https://api.github.com/users/rob-luke/repos", "events_url": "https://api.github.com/users/rob-luke/events{/privacy}", "received_events_url": "https://api.github.com/users/rob-luke/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-11-24T09:11:09Z", "updated_at": "2020-11-24T20:06:50Z", "closed_at": "2020-11-24T20:06:49Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "\r\n\r\n#### Describe the bug\r\nWhen I try and view v0.20 docs on the website it takes me to 0.21\r\n\r\n\r\n#### Steps to reproduce\r\nClick the button on top right of MNE website\r\n\r\n\r\n#### Expected results\r\nSee docs for v20\r\n\r\n\r\n#### Actual results\r\nSee docs for v21\r\n\r\n\r\n#### Additional information\r\nTrying to view earlier docs such as v19 works", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/8565/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8565/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/8563", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8563/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8563/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8563/events", "html_url": "https://github.com/mne-tools/mne-python/issues/8563", "id": 749491080, "node_id": "MDU6SXNzdWU3NDk0OTEwODA=", "number": 8563, "title": "TOPOs appear circular for MEG ", "user": {"login": "agramfort", "id": 161052, "node_id": "MDQ6VXNlcjE2MTA1Mg==", "avatar_url": "https://avatars.githubusercontent.com/u/161052?v=4", "gravatar_id": "", "url": "https://api.github.com/users/agramfort", "html_url": "https://github.com/agramfort", "followers_url": "https://api.github.com/users/agramfort/followers", "following_url": "https://api.github.com/users/agramfort/following{/other_user}", "gists_url": "https://api.github.com/users/agramfort/gists{/gist_id}", "starred_url": "https://api.github.com/users/agramfort/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/agramfort/subscriptions", "organizations_url": "https://api.github.com/users/agramfort/orgs", "repos_url": "https://api.github.com/users/agramfort/repos", "events_url": "https://api.github.com/users/agramfort/events{/privacy}", "received_events_url": "https://api.github.com/users/agramfort/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}, {"id": 1290799321, "node_id": "MDU6TGFiZWwxMjkwNzk5MzIx", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/VIZ", "name": "VIZ", "color": "22e861", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/mne-tools/mne-python/milestones/18", "html_url": "https://github.com/mne-tools/mne-python/milestone/18", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/milestones/18/labels", "id": 5802238, "node_id": "MDk6TWlsZXN0b25lNTgwMjIzOA==", "number": 18, "title": "0.22", "description": "", "creator": {"login": "larsoner", "id": 2365790, "node_id": "MDQ6VXNlcjIzNjU3OTA=", "avatar_url": "https://avatars.githubusercontent.com/u/2365790?v=4", "gravatar_id": "", "url": "https://api.github.com/users/larsoner", "html_url": "https://github.com/larsoner", "followers_url": "https://api.github.com/users/larsoner/followers", "following_url": "https://api.github.com/users/larsoner/following{/other_user}", "gists_url": "https://api.github.com/users/larsoner/gists{/gist_id}", "starred_url": "https://api.github.com/users/larsoner/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/larsoner/subscriptions", "organizations_url": "https://api.github.com/users/larsoner/orgs", "repos_url": "https://api.github.com/users/larsoner/repos", "events_url": "https://api.github.com/users/larsoner/events{/privacy}", "received_events_url": "https://api.github.com/users/larsoner/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 53, "state": "closed", "created_at": "2020-08-24T06:23:40Z", "updated_at": "2020-12-17T15:39:07Z", "due_on": "2020-12-15T08:00:00Z", "closed_at": "2020-12-17T15:39:07Z"}, "comments": 3, "created_at": "2020-11-24T08:28:05Z", "updated_at": "2020-12-01T23:53:38Z", "closed_at": "2020-12-01T23:53:37Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "now in a number of plots we have MEG topos that appear circular instead of following the helmet shape.\r\n\r\nSee for example:\r\n\r\nhttps://mne.tools/dev/_images/sphx_glr_plot_20_visualize_epochs_008.png\r\n\r\nin\r\n\r\nhttps://mne.tools/dev/auto_tutorials/epochs/plot_20_visualize_epochs.html#sphx-glr-auto-tutorials-epochs-plot-20-visualize-epochs-py\r\n\r\nI don't know if it's a problem of defaults but I also see around me a lot of people showing me MEG topos with circular shapes and I feel it should not happen.", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/8563/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8563/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/8562", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8562/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8562/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8562/events", "html_url": "https://github.com/mne-tools/mne-python/issues/8562", "id": 749455377, "node_id": "MDU6SXNzdWU3NDk0NTUzNzc=", "number": 8562, "title": "set_3d_view doesn't set view in docs", "user": {"login": "rob-luke", "id": 748691, "node_id": "MDQ6VXNlcjc0ODY5MQ==", "avatar_url": "https://avatars.githubusercontent.com/u/748691?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rob-luke", "html_url": "https://github.com/rob-luke", "followers_url": "https://api.github.com/users/rob-luke/followers", "following_url": "https://api.github.com/users/rob-luke/following{/other_user}", "gists_url": "https://api.github.com/users/rob-luke/gists{/gist_id}", "starred_url": "https://api.github.com/users/rob-luke/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rob-luke/subscriptions", "organizations_url": "https://api.github.com/users/rob-luke/orgs", "repos_url": "https://api.github.com/users/rob-luke/repos", "events_url": "https://api.github.com/users/rob-luke/events{/privacy}", "received_events_url": "https://api.github.com/users/rob-luke/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}, {"id": 1290799321, "node_id": "MDU6TGFiZWwxMjkwNzk5MzIx", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/VIZ", "name": "VIZ", "color": "22e861", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2020-11-24T07:49:02Z", "updated_at": "2020-11-24T11:00:57Z", "closed_at": "2020-11-24T11:00:57Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "#### Describe the bug\r\nI think that `set_3d_view` does not work any more, all the examples in https://mne.tools/stable/generated/mne.viz.set_3d_view.html#mne.viz.set_3d_view look incorrect to me. I don't know what some looked like before but the fNIRS one is definitely now not correct. \r\n\r\n\r\n#### Steps to reproduce\r\nhttps://mne.tools/stable/auto_examples/visualization/plot_3d_to_2d.html#sphx-glr-auto-examples-visualization-plot-3d-to-2d-py\r\n\r\nhttps://mne.tools/stable/auto_tutorials/preprocessing/plot_70_fnirs_processing.html#id1\r\n\r\n#### Expected results\r\nI expect the function to set the 3d view, but it docent seem to\r\n\r\n\r\n#### Actual results\r\nSee doc links\r\n\r\n\r\n#### Additional information\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/8562/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8562/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/8550", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8550/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8550/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8550/events", "html_url": "https://github.com/mne-tools/mne-python/issues/8550", "id": 747726246, "node_id": "MDU6SXNzdWU3NDc3MjYyNDY=", "number": 8550, "title": "Unnecessary FileNotFoundError in Persyst Reader ", "user": {"login": "pmyers16", "id": 22532891, "node_id": "MDQ6VXNlcjIyNTMyODkx", "avatar_url": "https://avatars.githubusercontent.com/u/22532891?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pmyers16", "html_url": "https://github.com/pmyers16", "followers_url": "https://api.github.com/users/pmyers16/followers", "following_url": "https://api.github.com/users/pmyers16/following{/other_user}", "gists_url": "https://api.github.com/users/pmyers16/gists{/gist_id}", "starred_url": "https://api.github.com/users/pmyers16/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pmyers16/subscriptions", "organizations_url": "https://api.github.com/users/pmyers16/orgs", "repos_url": "https://api.github.com/users/pmyers16/repos", "events_url": "https://api.github.com/users/pmyers16/events{/privacy}", "received_events_url": "https://api.github.com/users/pmyers16/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2020-11-20T19:00:53Z", "updated_at": "2021-02-01T13:42:42Z", "closed_at": "2021-02-01T13:42:42Z", "author_association": "NONE", "active_lock_reason": null, "body": "#### Describe the bug\r\nThe Persyst reader unnecessarily throws a FileNotFound error when both the .lay and .dat\r\nfiles have been moved to a new directory. The reader attempts to account for this by replacing\r\nthe dirname of the .dat file's path with the dirname of the .lay file, but still throws the error if \r\nthe path to the .dat file as listed in the .lay file's \"file\" field does not exist. \r\n\r\nThis issue does not occur if the File field is a relative path. I am not sure under what circumstances\r\nthe File field is an absolute path.\r\n\r\n#### Steps to reproduce\r\n\r\n1. Download the Persyst files from [mne testing data](https://github.com/mne-tools/mne-testing-data) and save both files to the same folder, say \"C:/Users/<username>/persyst_data\"\r\n\r\n2. Change line 2 of the .lay file to an absolute path that does not actually exist, say \"C:/Users/<username>/persyst_data/other_folder/sub-pt1_ses-02_task-monitor_acq-ecog_run-01_clip2.dat\"\r\n\r\n3. Run the following code:\r\n`lay_fname = \"C:/Users/<username>/persyst_data/sub-pt1_ses-02_task-monitor_acq-ecog_run-01_clip2.lay\"`\r\n`rawPersyst = mne.io.read_raw_persyst(lay_fname)`\r\n\r\n\r\n#### Expected results\r\nThe code snippet should not fail since `read_raw_persyst` correctly identifies that the .dat file has moved directories along with the .lay file. The reader should succeed for **either** of the two following scenarios:\r\n\r\n1. The path listed in the 'File' field in the .lay file exists\r\nOR\r\n2.  Both the .lay and .dat files have been moved to the same directory (i.e. the dirname in the 'File' field is ignored)\r\n\r\nIf neither of these two scenarios occurs, the error message should say this, listing both paths checked, not the path to the .lay file that does exist.\r\n \r\n#### Actual results\r\nThe following FileNotFoundError: \r\n\r\n>   File \"D:\\ProgramFiles\\Anaconda\\envs\\ezscalp\\lib\\site-packages\\mne\\io\\persyst\\persyst.py\", line 39, in read_raw_persyst\r\n>     return RawPersyst(fname, preload, verbose)\r\n>   File \"<decorator-gen-215>\", line 24, in __init__\r\n>   File \"D:\\ProgramFiles\\Anaconda\\envs\\ezscalp\\lib\\site-packages\\mne\\io\\persyst\\persyst.py\", line 101, in __init__\r\n>     raise FileNotFoundError(error_msg)\r\n> FileNotFoundError: The data path you specified does not exist for the lay path,\r\n\r\n\r\n#### Additional information\r\nOutput of mne.sys_info(): \r\n\r\n> D:\\ProgramFiles\\Anaconda\\envs\\ezscalp\\python.exe D:/Desktop/convert_persyst_bids/ezpreprocess/convert_testing_data.py\r\n> Platform:      Windows-10-10.0.19041-SP0\r\n> Python:        3.8.5 (default, Sep  3 2020, 21:29:08) [MSC v.1916 64 bit (AMD64)]\r\n> Executable:    D:\\ProgramFiles\\Anaconda\\envs\\ezscalp\\python.exe\r\n> CPU:           AMD64 Family 23 Model 113 Stepping 0, AuthenticAMD: 24 cores\r\n> Memory:        31.9 GB\r\n> \r\n> mne:           0.21.2\r\n> numpy:         1.19.2 {blas=mkl_rt, lapack=mkl_rt}\r\n> scipy:         1.5.0\r\n> matplotlib:    3.3.2 {backend=Qt5Agg}\r\n> \r\n> sklearn:       0.23.2\r\n> numba:         0.51.2\r\n> nibabel:       3.2.0\r\n> cupy:          Not found\r\n> pandas:        1.1.3\r\n> dipy:          1.2.0\r\n> mayavi:        4.7.2\r\n> pyvista:       0.26.1 {OpenGL 4.5.0 NVIDIA 432.00 via GeForce RTX 2070 SUPER/PCIe/SSE2}\r\n> vtk:           9.0.1\r\n> PyQt5:         5.9.2\r\n> None\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/8550/reactions", "total_count": 1, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8550/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/8535", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8535/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8535/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8535/events", "html_url": "https://github.com/mne-tools/mne-python/issues/8535", "id": 744949339, "node_id": "MDU6SXNzdWU3NDQ5NDkzMzk=", "number": 8535, "title": "Problem reading EEG channels of an old yokogawa KIT MEG system with the newest MNE version.", "user": {"login": "UrbanM", "id": 22200427, "node_id": "MDQ6VXNlcjIyMjAwNDI3", "avatar_url": "https://avatars.githubusercontent.com/u/22200427?v=4", "gravatar_id": "", "url": "https://api.github.com/users/UrbanM", "html_url": "https://github.com/UrbanM", "followers_url": "https://api.github.com/users/UrbanM/followers", "following_url": "https://api.github.com/users/UrbanM/following{/other_user}", "gists_url": "https://api.github.com/users/UrbanM/gists{/gist_id}", "starred_url": "https://api.github.com/users/UrbanM/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/UrbanM/subscriptions", "organizations_url": "https://api.github.com/users/UrbanM/orgs", "repos_url": "https://api.github.com/users/UrbanM/repos", "events_url": "https://api.github.com/users/UrbanM/events{/privacy}", "received_events_url": "https://api.github.com/users/UrbanM/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2020-11-17T17:45:26Z", "updated_at": "2020-11-22T13:37:13Z", "closed_at": "2020-11-22T13:37:13Z", "author_association": "NONE", "active_lock_reason": null, "body": "#### Describe the bug\r\nI'm working with data obtained by a 160 channel yokogawa/KIT MEG system, which has 125 axial gradiometers, the others are EEG and trigger channels. This system is located at the PTB institute in Berlin. To import the \".con\" file I use the  function: mne.io.read_raw_kit(\"filename.con\"). Until recently, everything worked well, values of both EEG and MEG channels were imported as they should (I was using the MNE-Python version 0.20.0). Then I updated the MNE-Python to the latest 0.21.2, the MEG channels were correct, but all the EEG channels have at each time values of 0.. Then I tried again with the version 0.20.0 and everything worked fine. \r\n\r\n#### Steps to reproduce\r\nThis issue can be reproduced by running the \"example.py\" with different versions of MNE, which imports \"data.con\" and plots raw data. Both files can be downloaded on the following link: https://imfm2815001.fmf.uni-lj.si/nextcloud/index.php/s/bHK4weHmKBTrS4P \r\n\r\n#### Actual results\r\nI attach two images of the function raw.plot(), each with its own version of MNE-Python on the same dataset. When i used the  MNE-Python version 0.20.0 the matplotlib version 3.1.1 (latest version gives errors) and when using MNE-Python version 0.21.2 the matplotlib version 3.3.2.\r\n\r\n![MNE=0 20 0](https://user-images.githubusercontent.com/22200427/99424908-83a16d00-2902-11eb-9201-e95d3ee2823c.png)\r\n![MNE=0 21 2](https://user-images.githubusercontent.com/22200427/99424913-84d29a00-2902-11eb-9042-4fa3de90f7ff.png)\r\n\r\n#### Additional information\r\nPlatform:      Linux-5.8.18-100.fc31.x86_64-x86_64-with-glibc2.10\r\nPython:        3.8.5 (default, Sep  4 2020, 07:30:14)  [GCC 7.3.0]\r\nExecutable:    /home/marhl/Applications/anaconda3/envs/mne/bin/python\r\nCPU:           x86_64: 4 cores\r\nMemory:        15.5 GB\r\n\r\nmne:           0.21.2\r\nnumpy:         1.19.2 {blas=mkl_rt, lapack=mkl_rt}\r\nscipy:         1.5.2\r\nmatplotlib:    3.3.2 {backend=Qt5Agg}\r\n\r\nsklearn:       0.23.2\r\nnumba:         0.51.2\r\nnibabel:       3.2.0\r\ncupy:          Not found\r\npandas:        1.1.3\r\ndipy:          1.3.0\r\nmayavi:        4.7.2\r\npyvista:       0.27.2 {pyvistaqt=0.2.0, OpenGL 4.5 (Core Profile) Mesa 19.2.8 via Mesa DRI Intel(R) HD Graphics 620 (Kaby Lake GT2)}\r\nvtk:           9.0.1\r\nPyQt5:         5.15.1\r\n\r\nI hope it is OK that I reported this issue here. Since this is my first Bug report, I hope I have written everything correct. Can I help you somehow with any additional informations, please let me know.", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/8535/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8535/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/8530", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8530/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8530/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8530/events", "html_url": "https://github.com/mne-tools/mne-python/issues/8530", "id": 743967680, "node_id": "MDU6SXNzdWU3NDM5Njc2ODA=", "number": 8530, "title": "3D example does not work on Windows 7", "user": {"login": "jasminetan6032", "id": 41640321, "node_id": "MDQ6VXNlcjQxNjQwMzIx", "avatar_url": "https://avatars.githubusercontent.com/u/41640321?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jasminetan6032", "html_url": "https://github.com/jasminetan6032", "followers_url": "https://api.github.com/users/jasminetan6032/followers", "following_url": "https://api.github.com/users/jasminetan6032/following{/other_user}", "gists_url": "https://api.github.com/users/jasminetan6032/gists{/gist_id}", "starred_url": "https://api.github.com/users/jasminetan6032/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jasminetan6032/subscriptions", "organizations_url": "https://api.github.com/users/jasminetan6032/orgs", "repos_url": "https://api.github.com/users/jasminetan6032/repos", "events_url": "https://api.github.com/users/jasminetan6032/events{/privacy}", "received_events_url": "https://api.github.com/users/jasminetan6032/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}, {"id": 1290799321, "node_id": "MDU6TGFiZWwxMjkwNzk5MzIx", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/VIZ", "name": "VIZ", "color": "22e861", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 13, "created_at": "2020-11-16T16:17:36Z", "updated_at": "2020-11-19T19:31:44Z", "closed_at": "2020-11-19T18:22:58Z", "author_association": "NONE", "active_lock_reason": null, "body": "#### Describe the bug\r\n```\r\n---------------------------------------------------------------------------\r\nOSError                                   Traceback (most recent call last)\r\n<ipython-input-6-5903cabfd600> in <module>\r\n----> 1 mne.viz.set_3d_backend('pyvista')\r\n      2 for method, stc in zip(['DICS', 'LCMV', 'dSPM'],\r\n      3                        [stc_dics, stc_lcmv, stc_dspm]):\r\n      4     title = '%s source power in the 12-30 Hz frequency band' % method\r\n      5     brain = stc.plot(hemi='rh', subjects_dir=subjects_dir,\r\n\r\n<decorator-gen-152> in set_3d_backend(backend_name, verbose)\r\n\r\n~\\Anaconda3\\envs\\mne-new\\lib\\site-packages\\mne\\viz\\backends\\renderer.py in set_3d_backend(backend_name, verbose)\r\n    114     _check_option('backend_name', backend_name, VALID_3D_BACKENDS)\r\n    115     if MNE_3D_BACKEND != backend_name:\r\n--> 116         _reload_backend(backend_name)\r\n    117         MNE_3D_BACKEND = backend_name\r\n    118 \r\n\r\n~\\Anaconda3\\envs\\mne-new\\lib\\site-packages\\mne\\viz\\backends\\renderer.py in _reload_backend(backend_name)\r\n     29 def _reload_backend(backend_name):\r\n     30     global backend\r\n---> 31     backend = importlib.import_module(name=_backend_name_map[backend_name],\r\n     32                                       package='mne.viz.backends')\r\n     33     logger.info('Using %s 3d backend.\\n' % backend_name)\r\n\r\n~\\Anaconda3\\envs\\mne-new\\lib\\importlib\\__init__.py in import_module(name, package)\r\n    125                 break\r\n    126             level += 1\r\n--> 127     return _bootstrap._gcd_import(name[level:], package, level)\r\n    128 \r\n    129 \r\n\r\n~\\Anaconda3\\envs\\mne-new\\lib\\importlib\\_bootstrap.py in _gcd_import(name, package, level)\r\n\r\n~\\Anaconda3\\envs\\mne-new\\lib\\importlib\\_bootstrap.py in _find_and_load(name, import_)\r\n\r\n~\\Anaconda3\\envs\\mne-new\\lib\\importlib\\_bootstrap.py in _find_and_load_unlocked(name, import_)\r\n\r\n~\\Anaconda3\\envs\\mne-new\\lib\\importlib\\_bootstrap.py in _load_unlocked(spec)\r\n\r\n~\\Anaconda3\\envs\\mne-new\\lib\\importlib\\_bootstrap_external.py in exec_module(self, module)\r\n\r\n~\\Anaconda3\\envs\\mne-new\\lib\\importlib\\_bootstrap.py in _call_with_frames_removed(f, *args, **kwds)\r\n\r\n~\\Anaconda3\\envs\\mne-new\\lib\\site-packages\\mne\\viz\\backends\\_pyvista.py in <module>\r\n     33     from pyvista import Plotter, PolyData, Line, close_all, UnstructuredGrid\r\n     34     try:\r\n---> 35         from pyvistaqt import BackgroundPlotter  # noqa\r\n     36     except ImportError:\r\n     37         from pyvista import BackgroundPlotter\r\n\r\n~\\Anaconda3\\envs\\mne-new\\lib\\site-packages\\pyvistaqt\\__init__.py in <module>\r\n      1 \"\"\"PyVista package for 3D plotting and mesh analysis.\"\"\"\r\n      2 from pyvistaqt._version import __version__\r\n----> 3 from pyvistaqt.plotting import BackgroundPlotter, MainWindow, QtInteractor\r\n      4 \r\n      5 __all__ = [\"__version__\", \"BackgroundPlotter\", \"MainWindow\", \"QtInteractor\"]\r\n\r\n~\\Anaconda3\\envs\\mne-new\\lib\\site-packages\\pyvistaqt\\plotting.py in <module>\r\n     49 import scooby\r\n     50 import vtk\r\n---> 51 from PyQt5 import QtCore, QtGui\r\n     52 from PyQt5.QtCore import QTimer, pyqtSignal\r\n     53 from PyQt5.QtWidgets import QAction, QFrame, QMenuBar, QVBoxLayout\r\n\r\n~\\Anaconda3\\envs\\mne-new\\lib\\site-packages\\PyQt5\\__init__.py in <module>\r\n     47 \r\n     48 \r\n---> 49 find_qt()\r\n     50 del find_qt\r\n\r\n~\\Anaconda3\\envs\\mne-new\\lib\\site-packages\\PyQt5\\__init__.py in find_qt()\r\n     42 \r\n     43     try:\r\n---> 44         os.add_dll_directory(dll_dir)\r\n     45     except AttributeError:\r\n     46         pass\r\n\r\n~\\Anaconda3\\envs\\mne-new\\lib\\os.py in add_dll_directory(path)\r\n   1107         \"\"\"\r\n   1108         import nt\r\n-> 1109         cookie = nt._add_dll_directory(path)\r\n   1110         return _AddedDllDirectory(\r\n   1111             path,\r\n\r\nOSError: [WinError 127] The specified procedure could not be found: 'C:\\\\Users\\\\jasmine\\\\Anaconda3\\\\envs\\\\mne-new\\\\lib\\\\site-packages\\\\PyQt5\\\\Qt\\\\bin'\r\n```\r\n\u200b\r\n\r\n#### Steps to reproduce\r\n\r\nFollowed the installation instructions for Windows and ran the plot_evoked_ers_source_power.ipynb. \r\n\r\n\r\nThank you!", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/8530/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8530/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/8525", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8525/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8525/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8525/events", "html_url": "https://github.com/mne-tools/mne-python/issues/8525", "id": 743072598, "node_id": "MDU6SXNzdWU3NDMwNzI1OTg=", "number": 8525, "title": "BUG: Big Sur compat", "user": {"login": "larsoner", "id": 2365790, "node_id": "MDQ6VXNlcjIzNjU3OTA=", "avatar_url": "https://avatars.githubusercontent.com/u/2365790?v=4", "gravatar_id": "", "url": "https://api.github.com/users/larsoner", "html_url": "https://github.com/larsoner", "followers_url": "https://api.github.com/users/larsoner/followers", "following_url": "https://api.github.com/users/larsoner/following{/other_user}", "gists_url": "https://api.github.com/users/larsoner/gists{/gist_id}", "starred_url": "https://api.github.com/users/larsoner/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/larsoner/subscriptions", "organizations_url": "https://api.github.com/users/larsoner/orgs", "repos_url": "https://api.github.com/users/larsoner/repos", "events_url": "https://api.github.com/users/larsoner/events{/privacy}", "received_events_url": "https://api.github.com/users/larsoner/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 12, "created_at": "2020-11-14T20:19:46Z", "updated_at": "2021-01-25T13:08:23Z", "closed_at": "2020-12-04T09:12:56Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "More of an FYI than anything else -- PyQt5 appears not to work on Big Sur. I've tried 5.12 and 5.15.1, and both basically hang as soon as you make a mayavi, PyVista, or matplotlib Qt5Agg window.\r\n\r\nSo those thinking about upgrading, don't do so if you want to be able to use Python. For matplotlib at least we can use the MacOSX backend in the meantime, but 3D plotting is now (hopefully temporarily) totally broken for people who have upgraded. :(\r\n\r\nOr maybe I'm the only one with this issue. If someone else upgrades, feel free to try it out and let me know!", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/8525/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8525/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/8523", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8523/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8523/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8523/events", "html_url": "https://github.com/mne-tools/mne-python/issues/8523", "id": 742982491, "node_id": "MDU6SXNzdWU3NDI5ODI0OTE=", "number": 8523, "title": "Debug console in PyCharm broken with pytest", "user": {"login": "cbrnr", "id": 4377312, "node_id": "MDQ6VXNlcjQzNzczMTI=", "avatar_url": "https://avatars.githubusercontent.com/u/4377312?v=4", "gravatar_id": "", "url": "https://api.github.com/users/cbrnr", "html_url": "https://github.com/cbrnr", "followers_url": "https://api.github.com/users/cbrnr/followers", "following_url": "https://api.github.com/users/cbrnr/following{/other_user}", "gists_url": "https://api.github.com/users/cbrnr/gists{/gist_id}", "starred_url": "https://api.github.com/users/cbrnr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/cbrnr/subscriptions", "organizations_url": "https://api.github.com/users/cbrnr/orgs", "repos_url": "https://api.github.com/users/cbrnr/repos", "events_url": "https://api.github.com/users/cbrnr/events{/privacy}", "received_events_url": "https://api.github.com/users/cbrnr/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2020-11-14T11:02:29Z", "updated_at": "2020-11-14T21:36:31Z", "closed_at": "2020-11-14T21:36:31Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "OK, so I decided to report this issue I'm having here, because it might be something we're doing to the test setup.\r\n\r\nI want to debug a pytest run and enter the debug console. When I do that and type any command/name, I get the following error (here I want to debug the function `test_one_channel_gdf` in line 111 of `mne/io/edf/tests/test_gdf.py`:\r\n\r\n```\r\n/usr/local/bin/python3.9 /Applications/PyCharm.app/Contents/plugins/python/helpers/pydev/pydevd.py --multiproc --qt-support=auto --client 127.0.0.1 --port 59837 --file /Applications/PyCharm.app/Contents/plugins/python/helpers/pycharm/_jb_pytest_runner.py --target test_gdf.py::test_one_channel_gdf\r\npydev debugger: process 23317 is connecting\r\nConnected to pydev debugger (build 202.7660.27)\r\nLaunching pytest with arguments test_gdf.py::test_one_channel_gdf in /Users/clemens/Repositories/mne-python/mne/io/edf/tests\r\n============================= test session starts ==============================\r\nplatform darwin -- Python 3.9.0, pytest-6.1.2, py-1.9.0, pluggy-0.13.1 -- /usr/local/opt/python@3.9/bin/python3.9\r\ncachedir: .pytest_cache\r\nrootdir: /Users/clemens/Repositories/mne-python, configfile: setup.cfg\r\nplugins: cov-2.10.1\r\ncollecting ... collected 1 item\r\ntest_gdf.py::test_one_channel_gdf >>> ecg\r\nTraceback (most recent call last):\r\n  File \"/Applications/PyCharm.app/Contents/plugins/python/helpers/pydev/_pydevd_bundle/pydevd_console_integration.py\", line 84, in get_code_executor\r\n    code_executor = getattr(__builtin__, 'interpreter')\r\nAttributeError: module 'builtins' has no attribute 'interpreter'\r\nDuring handling of the above exception, another exception occurred:\r\nTraceback (most recent call last):\r\n  File \"/Applications/PyCharm.app/Contents/plugins/python/helpers/pydev/_pydevd_bundle/pydevd_comm.py\", line 1721, in do_it\r\n    result = pydevd_console_integration.console_exec(self.thread_id, self.frame_id, self.expression, dbg)\r\n  File \"/Applications/PyCharm.app/Contents/plugins/python/helpers/pydev/_pydevd_bundle/pydevd_console_integration.py\", line 195, in console_exec\r\n    need_more = exec_code(CodeFragment(expression), updated_globals, updated_globals, dbg)\r\n  File \"/Applications/PyCharm.app/Contents/plugins/python/helpers/pydev/_pydevd_bundle/pydevd_console_integration.py\", line 98, in exec_code\r\n    code_executor = get_code_executor()\r\n  File \"/Applications/PyCharm.app/Contents/plugins/python/helpers/pydev/_pydevd_bundle/pydevd_console_integration.py\", line 86, in get_code_executor\r\n    code_executor = CodeExecutor()\r\n  File \"/Applications/PyCharm.app/Contents/plugins/python/helpers/pydev/_pydev_bundle/pydev_ipython_code_executor.py\", line 24, in __init__\r\n    self.interpreter = get_pydev_frontend(rpc_client)\r\n  File \"/Applications/PyCharm.app/Contents/plugins/python/helpers/pydev/_pydev_bundle/pydev_ipython_console_011.py\", line 504, in get_pydev_frontend\r\n    _PyDevFrontEndContainer._instance = _PyDevFrontEnd()\r\n  File \"/Applications/PyCharm.app/Contents/plugins/python/helpers/pydev/_pydev_bundle/pydev_ipython_console_011.py\", line 349, in __init__\r\n    self.ipython = PyDevTerminalInteractiveShell.instance(config=load_default_config())\r\n  File \"/usr/local/lib/python3.9/site-packages/traitlets/config/configurable.py\", line 537, in instance\r\n    inst = cls(*args, **kwargs)\r\n  File \"/usr/local/lib/python3.9/site-packages/IPython/terminal/interactiveshell.py\", line 525, in __init__\r\n    super(TerminalInteractiveShell, self).__init__(*args, **kwargs)\r\n  File \"/usr/local/lib/python3.9/site-packages/IPython/core/interactiveshell.py\", line 676, in __init__\r\n    self.init_completer()\r\n  File \"/Applications/PyCharm.app/Contents/plugins/python/helpers/pydev/_pydev_bundle/pydev_ipython_console_011.py\", line 271, in init_completer\r\n    self.Completer = self._new_completer_600()\r\n  File \"/Applications/PyCharm.app/Contents/plugins/python/helpers/pydev/_pydev_bundle/pydev_ipython_console_011.py\", line 229, in _new_completer_600\r\n    completer = PyDevIPCompleter6(shell=self,\r\n  File \"/Applications/PyCharm.app/Contents/plugins/python/helpers/pydev/_pydev_bundle/pydev_ipython_console_011.py\", line 96, in __init__\r\n    IPCompleter.__init__(self, *args, **kwargs)\r\n  File \"/usr/local/lib/python3.9/site-packages/IPython/core/completer.py\", line 1079, in __init__\r\n    warnings.warn('The `use_readline` parameter is deprecated and ignored since IPython 6.0.',\r\nDeprecationWarning: The `use_readline` parameter is deprecated and ignored since IPython 6.0.\r\n```\r\n\r\nHere's how it looks like in PyCharm (click on the \"Play\" icon and select \"Debug 'pytest for test_gdf.py...'\", you might have to select `pytest` as the default test runner in Preferences - Tools - Python Integrated Tools - Testing):\r\n\r\n<img width=\"983\" alt=\"Screen Shot 2020-11-14 at 11 56 11\" src=\"https://user-images.githubusercontent.com/4377312/99145638-c8ae7080-2670-11eb-8a5c-076fd29855c4.png\">\r\n\r\nWhen I create a new file (e.g. `test.py` in the project root) with the following test, everything works just fine (meaning that I can start the debugging console and use it without any errors) - that's why I'm assuming that something with the way MNE creates tests or some relevant objects might be the problem.\r\n\r\n<img width=\"256\" alt=\"Screen Shot 2020-11-14 at 12 00 50\" src=\"https://user-images.githubusercontent.com/4377312/99145679-0f9c6600-2671-11eb-9ece-b5510a3b9809.png\">\r\n\r\nAny ideas? I'd be super happy to solve this issue because it keeps haunting me (see e.g. https://youtrack.jetbrains.com/issue/PY-40703, which was never resolved because a MWE doesn't trigger the issue).", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/8523/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8523/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/8518", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8518/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8518/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8518/events", "html_url": "https://github.com/mne-tools/mne-python/issues/8518", "id": 742578522, "node_id": "MDU6SXNzdWU3NDI1Nzg1MjI=", "number": 8518, "title": "MAINT: CI", "user": {"login": "larsoner", "id": 2365790, "node_id": "MDQ6VXNlcjIzNjU3OTA=", "avatar_url": "https://avatars.githubusercontent.com/u/2365790?v=4", "gravatar_id": "", "url": "https://api.github.com/users/larsoner", "html_url": "https://github.com/larsoner", "followers_url": "https://api.github.com/users/larsoner/followers", "following_url": "https://api.github.com/users/larsoner/following{/other_user}", "gists_url": "https://api.github.com/users/larsoner/gists{/gist_id}", "starred_url": "https://api.github.com/users/larsoner/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/larsoner/subscriptions", "organizations_url": "https://api.github.com/users/larsoner/orgs", "repos_url": "https://api.github.com/users/larsoner/repos", "events_url": "https://api.github.com/users/larsoner/events{/privacy}", "received_events_url": "https://api.github.com/users/larsoner/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2020-11-13T16:21:48Z", "updated_at": "2020-11-18T13:13:26Z", "closed_at": "2020-11-18T10:07:46Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "A few things we should do for CIs:\r\n\r\n1. Migrate away from Travis (#8514)\r\n2. Add `[skip azp]` [support](https://github.com/mne-tools/mne-python/pull/8514#issuecomment-726797122)\r\n3. Add [inline annotations](https://github.com/mne-tools/mne-python/pull/8514#issuecomment-726797122) for codespell and flake\r\n4. Add 3.9 CI. For this I have no idea when VTK will ship a wheel, so I might just build a Linux one locally and upload it somewhere for us to use, assuming tests actually pass when using it.", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/8518/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8518/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/8513", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8513/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8513/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8513/events", "html_url": "https://github.com/mne-tools/mne-python/issues/8513", "id": 742475710, "node_id": "MDU6SXNzdWU3NDI0NzU3MTA=", "number": 8513, "title": "Option to disable tqdm (crashes on Matlab/Windows10)", "user": {"login": "ftadel", "id": 6920058, "node_id": "MDQ6VXNlcjY5MjAwNTg=", "avatar_url": "https://avatars.githubusercontent.com/u/6920058?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ftadel", "html_url": "https://github.com/ftadel", "followers_url": "https://api.github.com/users/ftadel/followers", "following_url": "https://api.github.com/users/ftadel/following{/other_user}", "gists_url": "https://api.github.com/users/ftadel/gists{/gist_id}", "starred_url": "https://api.github.com/users/ftadel/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ftadel/subscriptions", "organizations_url": "https://api.github.com/users/ftadel/orgs", "repos_url": "https://api.github.com/users/ftadel/repos", "events_url": "https://api.github.com/users/ftadel/events{/privacy}", "received_events_url": "https://api.github.com/users/ftadel/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2020-11-13T14:09:39Z", "updated_at": "2020-11-14T18:32:36Z", "closed_at": "2020-11-14T18:32:36Z", "author_association": "NONE", "active_lock_reason": null, "body": "The Matlab-Python integration works beautifully for most applications now, however there are some glitches left, especially in the way the standard streams are handled on Windows. As known unsupported features, Mathworks lists `py.input` and `py.raw_input`: https://fr.mathworks.com/help/matlab/matlab_external/limitations-to-python-support.html\r\nBut I just found out that there are also other things that do not work correctly, like the tqdm progress bars.\r\n\r\nMinimal example to reproduce the bug, suggested by @larsoner : \r\n```\r\nclear all; close all; home\r\ntqdm = py.importlib.import_module('tqdm');\r\ncell(py.list(tqdm.tqdm(py.str('10 11 12').split())))\r\n```\r\n\r\nIt works on WSL(Win10)/Ubuntu18 + Matlab 2018b + Python 3.6 + tqdm 4.51.0:\r\n```\r\nans =\r\n  1\u00d73 cell array\r\n    {1\u00d72 py.str}    {1\u00d72 py.str}    {1\u00d72 py.str}\r\n```\r\n\r\nIt fails on Windows10 + Matlab 2019a/2020a/2020b + Python 3.8 + tqdm 4.51.0:\r\n```\r\n>> cell(py.list(tqdm.tqdm(py.str('10 11 12').split())))\r\nError using utils>__getattr__ (line 169)\r\nPython Error: AttributeError: 'NoneType' object has no attribute 'write'\r\nError in std>fp_write (line 329)\r\nError in std>print_status (line 336)\r\nError in std>display (line 1520)\r\nError in std>refresh (line 1386)\r\nError in std>__init__ (line 1092)\r\n```\r\n\r\nThis is most likely due to a bug in MATLAB on Windows, therefore you could decide that it is 2x not your problem :)\r\nBut since there are tons of forum posts about broken tqdm progress bars in various non-tty contexts, I think it might be a relevant question even for non-matlab/non-windows users.\r\nHow complicated for you would it be to add a global flag to disable tqdm in MNE-Python? \r\n@larsoner suggested something like `MNE_TQDM='off'` on gitter. \r\n\r\nNote that I'm using CPython instead of Anaconda because the integration with Matlab is much smoother. Matlab+CPython really works out-of-the-box now. FYI: the notes I'm preparing as I move forward:\r\nhttps://neuroimage.usc.edu/brainstorm/MnePython\r\n\r\nAs a side request: it would be great to add an option to skip the validation of the licenses when downloading, and not via `argv`. I see that there is an option to accept the license with a flag `--accept-brainstorm-license` on the command line, but this means calling python via a system call, which is not exactly what we want here (the python environment configured in Matlab is not necessarily the one available from the system path of the process)\r\nAnd same goes for anything that uses `input()`, actually.\r\n\r\nThanks!\r\nFrancois", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/8513/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8513/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/8511", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8511/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8511/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8511/events", "html_url": "https://github.com/mne-tools/mne-python/issues/8511", "id": 742353883, "node_id": "MDU6SXNzdWU3NDIzNTM4ODM=", "number": 8511, "title": "Excluding channels fails in GDF files", "user": {"login": "Teteros", "id": 5067989, "node_id": "MDQ6VXNlcjUwNjc5ODk=", "avatar_url": "https://avatars.githubusercontent.com/u/5067989?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Teteros", "html_url": "https://github.com/Teteros", "followers_url": "https://api.github.com/users/Teteros/followers", "following_url": "https://api.github.com/users/Teteros/following{/other_user}", "gists_url": "https://api.github.com/users/Teteros/gists{/gist_id}", "starred_url": "https://api.github.com/users/Teteros/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Teteros/subscriptions", "organizations_url": "https://api.github.com/users/Teteros/orgs", "repos_url": "https://api.github.com/users/Teteros/repos", "events_url": "https://api.github.com/users/Teteros/events{/privacy}", "received_events_url": "https://api.github.com/users/Teteros/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2020-11-13T10:43:13Z", "updated_at": "2020-11-14T16:54:46Z", "closed_at": "2020-11-14T16:54:46Z", "author_association": "NONE", "active_lock_reason": null, "body": "#### Describe the bug\r\n`exclude()` doesn't seem to exclude the specified channels when reading GDF files (`mne.io.read_raw_gdf`)\r\n\r\n\r\n#### Steps to reproduce\r\n```python\r\n>>> from mne import io\r\n>>> io.read_raw_gdf(\"test.gdf\", exclude=['Switches']).ch_names\r\nExtracting EDF parameters from /tmp/test.gdf...\r\nGDF file detected\r\nSetting channel info structure...\r\nCreating raw.info structure...\r\n['Switches', 'ModEeg1', 'ModEeg2']\r\n```\r\n\r\n#### Expected results\r\n```python\r\n['ModEeg1', 'ModEeg2']\r\n```\r\n\r\n#### Additional information\r\nPython 3.8.6 [GCC 10.2.0] on linux x64\r\nmne 0.21.1\r\n\r\nTest file used (created with [modeeg2ft_2chn](https://www.fieldtriptoolbox.org/development/realtime/modulareeg/)):\r\n[test.gdf.zip](https://github.com/mne-tools/mne-python/files/5536270/test.gdf.zip)", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/8511/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8511/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/8510", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8510/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8510/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8510/events", "html_url": "https://github.com/mne-tools/mne-python/issues/8510", "id": 741896818, "node_id": "MDU6SXNzdWU3NDE4OTY4MTg=", "number": 8510, "title": "fif file extension not required when writing FIFF files", "user": {"login": "bloyl", "id": 5585821, "node_id": "MDQ6VXNlcjU1ODU4MjE=", "avatar_url": "https://avatars.githubusercontent.com/u/5585821?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bloyl", "html_url": "https://github.com/bloyl", "followers_url": "https://api.github.com/users/bloyl/followers", "following_url": "https://api.github.com/users/bloyl/following{/other_user}", "gists_url": "https://api.github.com/users/bloyl/gists{/gist_id}", "starred_url": "https://api.github.com/users/bloyl/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bloyl/subscriptions", "organizations_url": "https://api.github.com/users/bloyl/orgs", "repos_url": "https://api.github.com/users/bloyl/repos", "events_url": "https://api.github.com/users/bloyl/events{/privacy}", "received_events_url": "https://api.github.com/users/bloyl/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}, {"id": 77061445, "node_id": "MDU6TGFiZWw3NzA2MTQ0NQ==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/EASY", "name": "EASY", "color": "2be2d6", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": {"login": "vagechirkov", "id": 42982039, "node_id": "MDQ6VXNlcjQyOTgyMDM5", "avatar_url": "https://avatars.githubusercontent.com/u/42982039?v=4", "gravatar_id": "", "url": "https://api.github.com/users/vagechirkov", "html_url": "https://github.com/vagechirkov", "followers_url": "https://api.github.com/users/vagechirkov/followers", "following_url": "https://api.github.com/users/vagechirkov/following{/other_user}", "gists_url": "https://api.github.com/users/vagechirkov/gists{/gist_id}", "starred_url": "https://api.github.com/users/vagechirkov/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/vagechirkov/subscriptions", "organizations_url": "https://api.github.com/users/vagechirkov/orgs", "repos_url": "https://api.github.com/users/vagechirkov/repos", "events_url": "https://api.github.com/users/vagechirkov/events{/privacy}", "received_events_url": "https://api.github.com/users/vagechirkov/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "vagechirkov", "id": 42982039, "node_id": "MDQ6VXNlcjQyOTgyMDM5", "avatar_url": "https://avatars.githubusercontent.com/u/42982039?v=4", "gravatar_id": "", "url": "https://api.github.com/users/vagechirkov", "html_url": "https://github.com/vagechirkov", "followers_url": "https://api.github.com/users/vagechirkov/followers", "following_url": "https://api.github.com/users/vagechirkov/following{/other_user}", "gists_url": "https://api.github.com/users/vagechirkov/gists{/gist_id}", "starred_url": "https://api.github.com/users/vagechirkov/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/vagechirkov/subscriptions", "organizations_url": "https://api.github.com/users/vagechirkov/orgs", "repos_url": "https://api.github.com/users/vagechirkov/repos", "events_url": "https://api.github.com/users/vagechirkov/events{/privacy}", "received_events_url": "https://api.github.com/users/vagechirkov/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 6, "created_at": "2020-11-12T20:14:04Z", "updated_at": "2021-03-16T11:40:22Z", "closed_at": "2021-03-16T11:40:22Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "I tried a `raw.save('test.h5')` sort of by accident and while it complained that I wasn't using standard `_raw.fif` conventions it happily saved a fif file with an h5 extension. It took me awhile to realize that this wasn't actually an h5 file (I had hoped the h5 support had been extended).\r\n\r\nI'm not sure this is a _bug_, as there isn't really the expectation that it should have written an h5 file but it was a bit confusing.\r\n\r\nIs there a reason we don't require a `.fif` ending for files that are always written as fiff?\r\n\r\nseems like it would be simple to use the `endings_err` parameter to `check_fname` \r\nhttps://github.com/mne-tools/mne-python/blob/1fa17ddf895b42c08aea3120d127572834ac5c96/mne/utils/check.py#L35\r\n\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/8510/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8510/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/8501", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8501/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8501/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8501/events", "html_url": "https://github.com/mne-tools/mne-python/issues/8501", "id": 739881702, "node_id": "MDU6SXNzdWU3Mzk4ODE3MDI=", "number": 8501, "title": "building docs on Windows: a few remaining problems", "user": {"login": "kalenkovich", "id": 9257050, "node_id": "MDQ6VXNlcjkyNTcwNTA=", "avatar_url": "https://avatars.githubusercontent.com/u/9257050?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kalenkovich", "html_url": "https://github.com/kalenkovich", "followers_url": "https://api.github.com/users/kalenkovich/followers", "following_url": "https://api.github.com/users/kalenkovich/following{/other_user}", "gists_url": "https://api.github.com/users/kalenkovich/gists{/gist_id}", "starred_url": "https://api.github.com/users/kalenkovich/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kalenkovich/subscriptions", "organizations_url": "https://api.github.com/users/kalenkovich/orgs", "repos_url": "https://api.github.com/users/kalenkovich/repos", "events_url": "https://api.github.com/users/kalenkovich/events{/privacy}", "received_events_url": "https://api.github.com/users/kalenkovich/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2020-11-10T12:48:51Z", "updated_at": "2020-11-12T12:22:18Z", "closed_at": "2020-11-12T12:22:18Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "#### Describe the bug\r\nDocs build with errors on Windows.\r\n\r\n\r\n#### Steps to reproduce\r\nTry building docs on Windows.\r\n\r\n#### Expected results\r\nDocs build without errors.\r\n\r\n\r\n#### Actual results\r\nDocs build with errors:\r\n\r\n- `limo.py` concatenates URL parts using `os.path.join` which, on Windows, uses `\\` as separators resulting in invalid URLs. I suggest hardcoding the concatenation.\r\n- `plot_eeg_erp.py` writes a file to the `/tmp` folder which does not exist on Windows. I suggest writing to `tempfile.gettempdir()`.\r\n- \r\n\t```\r\n\tWARNING: dot command 'dot' cannot be run (needed for graphviz output), check the graphviz_dot setting\r\n\t```\r\n\r\n\tThere is a problem with conda-installed graphviz on Windows: `dot.bat` is added to path, not `dot.exe` and some shells (git-bash in my case) don't know that running `dot` means running `dot.bat`. I suggest adding to the docs a note that Windows users which get a dot-related error might have to install graphviz manually (and check \"add to path\" options while at it) even if they have already installed it using conda.\r\n- \r\n\t```\r\n\tC:\\Users\\evgenii\\OneDrive\\projects\\ssvep_tutorial\\repo\\doc\\auto_examples\\inverse\\plot_vector_mne_solution.rst:: WARNING: image file not readable: C:UsersevgeniiOneDriveprojectsssvep_tutorialrepodocauto_examplesinverseimagessphx_glr_plot_vector_mne_solution_001.gif\r\n\tC:\\Users\\evgenii\\OneDrive\\projects\\ssvep_tutorial\\repo\\doc\\auto_tutorials\\misc\\plot_ecog.rst:: WARNING: image file not readable: C:UsersevgeniiOneDriveprojectsssvep_tutorialrepodocauto_tutorialsmiscimagessphx_glr_plot_ecog_004.gif\r\n\tC:\\Users\\evgenii\\OneDrive\\projects\\ssvep_tutorial\\repo\\doc\\auto_tutorials\\misc\\plot_seeg.rst:: WARNING: image file not readable: C:UsersevgeniiOneDriveprojectsssvep_tutorialrepodocauto_tutorialsmiscimagessphx_glr_plot_seeg_003.gif\r\n\tC:\\Users\\evgenii\\OneDrive\\projects\\ssvep_tutorial\\repo\\doc\\auto_tutorials\\source-modeling\\plot_mne_dspm_source_localization.rst:: WARNING: image file not readable: C:UsersevgeniiOneDriveprojectsssvep_tutorialrepodocauto_tutorialssource-modelingimagessphx_glr_plot_mne_dspm_source_localization_008.gif\r\n\tC:\\Users\\evgenii\\OneDrive\\projects\\ssvep_tutorial\\repo\\doc\\auto_tutorials\\source-modeling\\plot_visualize_stc.rst:: WARNING: image file not readable: C:UsersevgeniiOneDriveprojectsssvep_tutorialrepodocauto_tutorialssource-modelingimagessphx_glr_plot_visualize_stc_002.gif\r\n\t```\r\n\t\r\n\tHere is a string  from `plot_vector_mne_solution.rst` that leads to one of these problems:\r\n\t\r\n\t```\r\n\t.. image:: /C:\\Users\\evgenii\\OneDrive\\projects\\ssvep_tutorial\\repo\\doc\\auto_examples\\inverse\\images\\sphx_glr_plot_vector_mne_solution_001.gif\r\n\t```\r\n\t\r\n\tThis image (and all the other error-causing ones) is specified using an absolute path that starts with `/` which does not work on Windows. I don't know where these paths come from so I could not figure out how to solve this.\r\n\r\n\r\n#### Additional information\r\n```\r\nPlatform:      Windows-10-10.0.18362-SP0\r\nPython:        3.8.5 (default, Sep  3 2020, 21:29:08) [MSC v.1916 64 bit (AMD64)]\r\nExecutable:    C:\\Users\\evgenii\\miniconda3\\envs\\mnedev\\python.exe\r\nCPU:           AMD64 Family 23 Model 96 Stepping 1, AuthenticAMD: 8 cores\r\nMemory:        15.4 GB\r\n\r\nmne:           0.22.dev0\r\nnumpy:         1.19.2 {blas=mkl_rt, lapack=mkl_rt}\r\nscipy:         1.5.2\r\nmatplotlib:    3.3.2 {backend=Qt5Agg}\r\n\r\nsklearn:       0.23.2\r\nnumba:         0.51.2\r\nnibabel:       3.2.0\r\ncupy:          Not found\r\npandas:        1.1.3\r\ndipy:          1.2.0\r\nmayavi:        4.7.2\r\npyvista:       0.26.1 {pyvistaqt=0.2.0, OpenGL 4.5.13587 Core Profile Context 19.40.44.03 26.20.14044.3001 via AMD Radeon(TM) Graphics}\r\nvtk:           9.0.1\r\nPyQt5:         5.15.1\r\n```", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/8501/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8501/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/8493", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8493/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8493/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8493/events", "html_url": "https://github.com/mne-tools/mne-python/issues/8493", "id": 738216656, "node_id": "MDU6SXNzdWU3MzgyMTY2NTY=", "number": 8493, "title": "test_xdawn_regularization fails on Fedora 34 (rawhide)", "user": {"login": "Aniket-Pradhan", "id": 31067398, "node_id": "MDQ6VXNlcjMxMDY3Mzk4", "avatar_url": "https://avatars.githubusercontent.com/u/31067398?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Aniket-Pradhan", "html_url": "https://github.com/Aniket-Pradhan", "followers_url": "https://api.github.com/users/Aniket-Pradhan/followers", "following_url": "https://api.github.com/users/Aniket-Pradhan/following{/other_user}", "gists_url": "https://api.github.com/users/Aniket-Pradhan/gists{/gist_id}", "starred_url": "https://api.github.com/users/Aniket-Pradhan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Aniket-Pradhan/subscriptions", "organizations_url": "https://api.github.com/users/Aniket-Pradhan/orgs", "repos_url": "https://api.github.com/users/Aniket-Pradhan/repos", "events_url": "https://api.github.com/users/Aniket-Pradhan/events{/privacy}", "received_events_url": "https://api.github.com/users/Aniket-Pradhan/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-11-07T10:35:21Z", "updated_at": "2020-11-16T06:06:47Z", "closed_at": "2020-11-16T06:06:47Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Hey all!\r\n\r\nthe test: `test_dawn::test_xdawn_regularization` is currently failing in Fedora 34, with no reason per se. The test works fine on Fedora 33.\r\n\r\n#### Describe the bug\r\n\r\nThe build logs are below:\r\n\r\n1. [Fedora 33](https://major.fedorapeople.org/python-mne/f33_build.log)\r\n2. [Fedora 34 (failing)](https://major.fedorapeople.org/python-mne/f34_build.log)\r\n \r\nFailure:\r\n\r\n```\r\nmne/preprocessing/tests/test_xdawn.py:203: in test_xdawn_regularization\r\n    xd.fit(epochs)\r\nE   Failed: DID NOT RAISE <class 'ValueError'>\r\n```\r\nThere's a bunch of log statements as well:\r\n\r\n```\r\n----------------------------- Captured stdout call -----------------------------\r\nComputing rank from data with rank='full'\r\n    MEG: rank 39 from info\r\n    Created an SSP operator (subspace dimension = 3)\r\nReducing data rank from 39 -> 39\r\nEstimating covariance using OAS\r\nDone.\r\nComputing rank from data with rank='full'\r\n    MEG: rank 39 from info\r\n    Created an SSP operator (subspace dimension = 3)\r\nReducing data rank from 39 -> 39\r\nEstimating covariance using OAS\r\nDone.\r\nComputing rank from data with rank='full'\r\n    MEG: rank 39 from info\r\n    Created an SSP operator (subspace dimension = 3)\r\nReducing data rank from 39 -> 39\r\nEstimating covariance using OAS\r\nDone.\r\nComputing rank from data with rank='full'\r\n    MEG: rank 39 from info\r\n    Created an SSP operator (subspace dimension = 3)\r\nReducing data rank from 39 -> 39\r\nEstimating covariance using SHRINKAGE\r\nDone.\r\nComputing rank from data with rank='full'\r\n    MEG: rank 39 from info\r\n    Created an SSP operator (subspace dimension = 3)\r\nReducing data rank from 39 -> 39\r\nEstimating covariance using SHRINKAGE\r\nDone.\r\nComputing rank from data with rank='full'\r\n    MEG: rank 39 from info\r\n    Created an SSP operator (subspace dimension = 3)\r\nReducing data rank from 39 -> 39\r\nEstimating covariance using SHRINKAGE\r\nDone.\r\nComputing rank from data with rank='full'\r\n    MEG: rank 39 from info\r\n    Created an SSP operator (subspace dimension = 3)\r\nReducing data rank from 39 -> 39\r\nEstimating covariance using SHRINKAGE\r\nDone.\r\nComputing rank from data with rank='full'\r\n    MEG: rank 39 from info\r\n    Created an SSP operator (subspace dimension = 3)\r\nReducing data rank from 39 -> 39\r\nEstimating covariance using LEDOIT_WOLF\r\nDone.\r\nComputing rank from data with rank='full'\r\n    MEG: rank 39 from info\r\n    Created an SSP operator (subspace dimension = 3)\r\nReducing data rank from 39 -> 39\r\nEstimating covariance using LEDOIT_WOLF\r\nDone.\r\nComputing rank from data with rank='full'\r\n    MEG: rank 39 from info\r\n    Created an SSP operator (subspace dimension = 3)\r\nReducing data rank from 39 -> 39\r\nEstimating covariance using OAS\r\nDone.\r\nComputing rank from data with rank='full'\r\n    MEG: rank 39 from info\r\n    Created an SSP operator (subspace dimension = 3)\r\nReducing data rank from 39 -> 39\r\nEstimating covariance using OAS\r\nDone.\r\nComputing rank from data with rank='full'\r\n    MEG: rank 39 from info\r\n    Created an SSP operator (subspace dimension = 3)\r\nReducing data rank from 39 -> 39\r\nEstimating covariance using SHRINKAGE\r\nDone.\r\nComputing rank from data with rank='full'\r\n    MEG: rank 39 from info\r\n    Created an SSP operator (subspace dimension = 3)\r\nReducing data rank from 39 -> 39\r\nEstimating covariance using SHRINKAGE\r\nDone.\r\nComputing rank from data with rank='full'\r\n    MEG: rank 39 from info\r\n    Created an SSP operator (subspace dimension = 3)\r\nReducing data rank from 39 -> 39\r\nEstimating covariance using SHRINKAGE\r\nDone.\r\nComputing rank from data with rank='full'\r\n    MEG: rank 39 from info\r\n    Created an SSP operator (subspace dimension = 3)\r\nReducing data rank from 39 -> 39\r\nEstimating covariance using DIAGONAL_FIXED\r\n    MAG regularization : 0.1\r\n    GRAD regularization : 0.1\r\nDone.\r\nComputing rank from data with rank='full'\r\n    MEG: rank 39 from info\r\n    Created an SSP operator (subspace dimension = 3)\r\nReducing data rank from 39 -> 39\r\nEstimating covariance using DIAGONAL_FIXED\r\n    MAG regularization : 0.1\r\n    GRAD regularization : 0.1\r\nDone.\r\nComputing rank from data with rank='full'\r\n    MEG: rank 39 from info\r\n    Created an SSP operator (subspace dimension = 3)\r\nReducing data rank from 39 -> 39\r\nEstimating covariance using DIAGONAL_FIXED\r\n    MAG regularization : 0.1\r\n    GRAD regularization : 0.1\r\nDone.\r\nComputing rank from data with rank='full'\r\n    MEG: rank 39 from info\r\n    Created an SSP operator (subspace dimension = 3)\r\nReducing data rank from 39 -> 39\r\nEstimating covariance using EMPIRICAL\r\nDone.\r\nComputing rank from data with rank='full'\r\n    MEG: rank 39 from info\r\n    Created an SSP operator (subspace dimension = 3)\r\nReducing data rank from 39 -> 39\r\nEstimating covariance using EMPIRICAL\r\nDone.\r\nComputing rank from data with rank='full'\r\n    MEG: rank 39 from info\r\n    Created an SSP operator (subspace dimension = 3)\r\nReducing data rank from 39 -> 39\r\nEstimating covariance using EMPIRICAL\r\nDone.\r\n```\r\n\r\n\r\n#### Steps to reproduce\r\n\r\nRun the test in a Fedora 34 environment\r\n\r\n#### Expected results\r\n\r\nThe test should not fail. It should throw a ValueError\r\n\r\n#### Additional information\r\n\r\nSince Fedora 34 is the bleeding edge, and is not stable, it is likely that it might get fixed in a later release. It is also possible it is due to some internal library (probably sklearn) and their compatibility with F34. I will be using this tracker to keep an eye on it, and will update this ticket regularly.\r\n", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/8493/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8493/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/8472", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8472/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8472/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8472/events", "html_url": "https://github.com/mne-tools/mne-python/issues/8472", "id": 735118092, "node_id": "MDU6SXNzdWU3MzUxMTgwOTI=", "number": 8472, "title": "mne.viz.plot_raw issue", "user": {"login": "ZhengLiu97", "id": 65115609, "node_id": "MDQ6VXNlcjY1MTE1NjA5", "avatar_url": "https://avatars.githubusercontent.com/u/65115609?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ZhengLiu97", "html_url": "https://github.com/ZhengLiu97", "followers_url": "https://api.github.com/users/ZhengLiu97/followers", "following_url": "https://api.github.com/users/ZhengLiu97/following{/other_user}", "gists_url": "https://api.github.com/users/ZhengLiu97/gists{/gist_id}", "starred_url": "https://api.github.com/users/ZhengLiu97/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ZhengLiu97/subscriptions", "organizations_url": "https://api.github.com/users/ZhengLiu97/orgs", "repos_url": "https://api.github.com/users/ZhengLiu97/repos", "events_url": "https://api.github.com/users/ZhengLiu97/events{/privacy}", "received_events_url": "https://api.github.com/users/ZhengLiu97/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 7, "created_at": "2020-11-03T08:25:16Z", "updated_at": "2020-12-31T10:42:07Z", "closed_at": "2020-11-03T16:56:02Z", "author_association": "NONE", "active_lock_reason": null, "body": "Here is my  first code:\r\n```\r\nimport matplotlib\r\nmatplotlib.use('Qt5Agg')\r\nfrom matplotlib.backends.backend_qt5agg import FigureCanvasQTAgg as FigureCanvas\r\nimport matplotlib.pyplot as plt\r\nfrom mne.datasets import sample\r\nimport mne\r\n\r\ndata_path = sample.data_path()\r\nfname = data_path + '/MEG/sample/sample_audvis_raw.fif'\r\nraw = mne.io.read_raw_fif(fname)\r\nraw.plot()\r\nplt.show()\r\nfig = mne.viz.plot_raw(raw, show=False)\r\ncanvas = FigureCanvas(fig)\r\n```\r\nAnd the result is this:\r\n![image](https://user-images.githubusercontent.com/65115609/97962946-24ffcd80-1df1-11eb-9078-00c23aa8e7f1.png)\r\n", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/8472/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8472/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/8461", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8461/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8461/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8461/events", "html_url": "https://github.com/mne-tools/mne-python/issues/8461", "id": 733459453, "node_id": "MDU6SXNzdWU3MzM0NTk0NTM=", "number": 8461, "title": "VIZ, BUG: plot_sensors shouldn't call subplots_adjust if axes provided", "user": {"login": "drammock", "id": 1810515, "node_id": "MDQ6VXNlcjE4MTA1MTU=", "avatar_url": "https://avatars.githubusercontent.com/u/1810515?v=4", "gravatar_id": "", "url": "https://api.github.com/users/drammock", "html_url": "https://github.com/drammock", "followers_url": "https://api.github.com/users/drammock/followers", "following_url": "https://api.github.com/users/drammock/following{/other_user}", "gists_url": "https://api.github.com/users/drammock/gists{/gist_id}", "starred_url": "https://api.github.com/users/drammock/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/drammock/subscriptions", "organizations_url": "https://api.github.com/users/drammock/orgs", "repos_url": "https://api.github.com/users/drammock/repos", "events_url": "https://api.github.com/users/drammock/events{/privacy}", "received_events_url": "https://api.github.com/users/drammock/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "drammock", "id": 1810515, "node_id": "MDQ6VXNlcjE4MTA1MTU=", "avatar_url": "https://avatars.githubusercontent.com/u/1810515?v=4", "gravatar_id": "", "url": "https://api.github.com/users/drammock", "html_url": "https://github.com/drammock", "followers_url": "https://api.github.com/users/drammock/followers", "following_url": "https://api.github.com/users/drammock/following{/other_user}", "gists_url": "https://api.github.com/users/drammock/gists{/gist_id}", "starred_url": "https://api.github.com/users/drammock/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/drammock/subscriptions", "organizations_url": "https://api.github.com/users/drammock/orgs", "repos_url": "https://api.github.com/users/drammock/repos", "events_url": "https://api.github.com/users/drammock/events{/privacy}", "received_events_url": "https://api.github.com/users/drammock/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "drammock", "id": 1810515, "node_id": "MDQ6VXNlcjE4MTA1MTU=", "avatar_url": "https://avatars.githubusercontent.com/u/1810515?v=4", "gravatar_id": "", "url": "https://api.github.com/users/drammock", "html_url": "https://github.com/drammock", "followers_url": "https://api.github.com/users/drammock/followers", "following_url": "https://api.github.com/users/drammock/following{/other_user}", "gists_url": "https://api.github.com/users/drammock/gists{/gist_id}", "starred_url": "https://api.github.com/users/drammock/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/drammock/subscriptions", "organizations_url": "https://api.github.com/users/drammock/orgs", "repos_url": "https://api.github.com/users/drammock/repos", "events_url": "https://api.github.com/users/drammock/events{/privacy}", "received_events_url": "https://api.github.com/users/drammock/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2020-10-30T19:29:03Z", "updated_at": "2020-11-02T18:54:28Z", "closed_at": "2020-11-02T18:54:28Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "as discovered in https://github.com/mne-tools/mne-python/pull/8420#issuecomment-719709027, `raw.plot_sensors` has a bad side-effect when existing `axes` are provided.  It should not call `subplots_adjust` [here](https://github.com/mne-tools/mne-python/blob/8d6905d35dbae5cc16769989bc666e01c4e289ef/mne/viz/utils.py#L1765-L1766) when plotting into user-supplied axes.", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/8461/reactions", "total_count": 1, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8461/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/8455", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8455/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8455/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8455/events", "html_url": "https://github.com/mne-tools/mne-python/issues/8455", "id": 733155088, "node_id": "MDU6SXNzdWU3MzMxNTUwODg=", "number": 8455, "title": "Unable to set standard montage for file recording using EEGOSPORTS", "user": {"login": "balandongiv", "id": 22090092, "node_id": "MDQ6VXNlcjIyMDkwMDky", "avatar_url": "https://avatars.githubusercontent.com/u/22090092?v=4", "gravatar_id": "", "url": "https://api.github.com/users/balandongiv", "html_url": "https://github.com/balandongiv", "followers_url": "https://api.github.com/users/balandongiv/followers", "following_url": "https://api.github.com/users/balandongiv/following{/other_user}", "gists_url": "https://api.github.com/users/balandongiv/gists{/gist_id}", "starred_url": "https://api.github.com/users/balandongiv/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/balandongiv/subscriptions", "organizations_url": "https://api.github.com/users/balandongiv/orgs", "repos_url": "https://api.github.com/users/balandongiv/repos", "events_url": "https://api.github.com/users/balandongiv/events{/privacy}", "received_events_url": "https://api.github.com/users/balandongiv/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2020-10-30T13:05:11Z", "updated_at": "2020-10-31T14:51:19Z", "closed_at": "2020-10-31T14:51:19Z", "author_association": "NONE", "active_lock_reason": null, "body": "I have an EEG recording recorded using EEGOSPORTS (ANT Neuro, Hengelo,Netherlands) machine. The recording was conducted using a 64-channels cap. However only 17 channels were active `Fp1, Fp2, Fpz, F3, Fz, F4, C3, Cz, C4, FCz, P3, Pz, P4, T7, T8, O1 and O2`, with reference at `CPz`. \r\n\r\nIn mne, I would like to set the montage, as below\r\n\r\n\r\nraw = mne.io.read_raw_edf ( path_name, preload=True ) # link to file : https://drive.google.com/file/d/1YPwd0uDt2EesSWz7BB5kQl7NDh22bdPL/view?usp=sharing\r\nmontage = mne.channels.make_standard_montage ( 'standard_1020' )\r\nraw.set_montage ( montage, match_case=False )\r\n\r\nHowever, the compiler return an error\r\n\r\n> `ValueError: DigMontage is only a subset of info. There are 64 channel positions not present in the DigMontage. The required channels are: ['EEG Fp1-CPz', 'EEG Fpz-CPz', 'EEG Fp2-CPz', 'EEG F7-CPz', 'EEG F3-CPz', 'EEG Fz-CPz', 'EEG F4-CPz', 'EEG F8-CPz', 'EEG FC5-CPz', 'EEG FC1-CPz', 'EEG FC2-CPz', 'EEG FC6-CPz', 'EEG M1-CPz', 'EEG T7-CPz', 'EEG C3-CPz', 'EEG Cz-CPz', 'EEG C4-CPz', 'EEG T8-CPz', 'EEG M2-CPz', 'EEG CP5-CPz', 'EEG CP1-CPz', 'EEG CP2-CPz', 'EEG CP6-CPz', 'EEG P7-CPz', 'EEG P3-CPz', 'EEG Pz-CPz', 'EEG P4-CPz', 'EEG P8-CPz', 'EEG POz-CPz', 'EEG O1-CPz', 'EEG O2-CPz', 'EEG EOG-CPz', 'EEG AF7-CPz', 'EEG AF3-CPz', 'EEG AF4-CPz', 'EEG AF8-CPz', 'EEG F5-CPz', 'EEG F1-CPz', 'EEG F2-CPz', 'EEG F6-CPz', 'EEG FC3-CPz', 'EEG FCz-CPz', 'EEG FC4-CPz', 'EEG C5-CPz', 'EEG C1-CPz', 'EEG C2-CPz', 'EEG C6-CPz', 'EEG CP3-CPz', 'EEG CP4-CPz', 'EEG P5-CPz', 'EEG P1-CPz', 'EEG P2-CPz', 'EEG P6-CPz', 'EEG PO5-CPz', 'EEG PO3-CPz', 'EEG PO4-CPz', 'EEG PO6-CPz', 'EEG FT7-CPz', 'EEG FT8-CPz', 'EEG TP7-CPz', 'EEG TP8-CPz', 'EEG PO7-CPz', 'EEG PO8-CPz', 'EEG Oz-CPz']`\r\n\r\n\r\nI have also tried different kind including `standard_alphabetic` and `biosemi64`\r\n\r\nMay I know how to properly set the montage.\r\n\r\nRemark:\r\nThe `edf `file is accessible via the link: https://drive.google.com/file/d/1YPwd0uDt2EesSWz7BB5kQl7NDh22bdPL/view?usp=sharing", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/8455/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8455/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/8453", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8453/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8453/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8453/events", "html_url": "https://github.com/mne-tools/mne-python/issues/8453", "id": 732632004, "node_id": "MDU6SXNzdWU3MzI2MzIwMDQ=", "number": 8453, "title": "BUG: compute_source_morph does not work well with a rescaling", "user": {"login": "larsoner", "id": 2365790, "node_id": "MDQ6VXNlcjIzNjU3OTA=", "avatar_url": "https://avatars.githubusercontent.com/u/2365790?v=4", "gravatar_id": "", "url": "https://api.github.com/users/larsoner", "html_url": "https://github.com/larsoner", "followers_url": "https://api.github.com/users/larsoner/followers", "following_url": "https://api.github.com/users/larsoner/following{/other_user}", "gists_url": "https://api.github.com/users/larsoner/gists{/gist_id}", "starred_url": "https://api.github.com/users/larsoner/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/larsoner/subscriptions", "organizations_url": "https://api.github.com/users/larsoner/orgs", "repos_url": "https://api.github.com/users/larsoner/repos", "events_url": "https://api.github.com/users/larsoner/events{/privacy}", "received_events_url": "https://api.github.com/users/larsoner/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2020-10-29T20:21:13Z", "updated_at": "2020-11-03T15:58:59Z", "closed_at": "2020-11-03T15:58:59Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "The tests added in #8447 exposed some bug with our `compute_source_morph` when dealing with the output of `scale_mri`. In principle the `compute_source_morph` should just detect and undo the scaling but it doesn't. This is true both of uniform and non-uniform scalings in `scale_mri`.\r\n\r\nThe thing to do is probably to first add a test that `compute_source_morph` for a volume to itself is nearly an identity transform, then test locally where things go wrong. Perhaps something about the order translation->rigid body->full affine is wrong, or we need to allow a greater exploration of the space (somehow) because for a scaled MRI the only one of these that should happen is the full affine (including the scale factors is only possible there), but the intermediate outputs in `verbose=True` mode suggests that there are translations and rotations being imposed...", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/8453/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8453/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/8441", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8441/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8441/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8441/events", "html_url": "https://github.com/mne-tools/mne-python/issues/8441", "id": 731015037, "node_id": "MDU6SXNzdWU3MzEwMTUwMzc=", "number": 8441, "title": "Raw.plot() issue", "user": {"login": "ZhengLiu97", "id": 65115609, "node_id": "MDQ6VXNlcjY1MTE1NjA5", "avatar_url": "https://avatars.githubusercontent.com/u/65115609?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ZhengLiu97", "html_url": "https://github.com/ZhengLiu97", "followers_url": "https://api.github.com/users/ZhengLiu97/followers", "following_url": "https://api.github.com/users/ZhengLiu97/following{/other_user}", "gists_url": "https://api.github.com/users/ZhengLiu97/gists{/gist_id}", "starred_url": "https://api.github.com/users/ZhengLiu97/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ZhengLiu97/subscriptions", "organizations_url": "https://api.github.com/users/ZhengLiu97/orgs", "repos_url": "https://api.github.com/users/ZhengLiu97/repos", "events_url": "https://api.github.com/users/ZhengLiu97/events{/privacy}", "received_events_url": "https://api.github.com/users/ZhengLiu97/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}, {"id": 1290799321, "node_id": "MDU6TGFiZWwxMjkwNzk5MzIx", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/VIZ", "name": "VIZ", "color": "22e861", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": {"login": "drammock", "id": 1810515, "node_id": "MDQ6VXNlcjE4MTA1MTU=", "avatar_url": "https://avatars.githubusercontent.com/u/1810515?v=4", "gravatar_id": "", "url": "https://api.github.com/users/drammock", "html_url": "https://github.com/drammock", "followers_url": "https://api.github.com/users/drammock/followers", "following_url": "https://api.github.com/users/drammock/following{/other_user}", "gists_url": "https://api.github.com/users/drammock/gists{/gist_id}", "starred_url": "https://api.github.com/users/drammock/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/drammock/subscriptions", "organizations_url": "https://api.github.com/users/drammock/orgs", "repos_url": "https://api.github.com/users/drammock/repos", "events_url": "https://api.github.com/users/drammock/events{/privacy}", "received_events_url": "https://api.github.com/users/drammock/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "drammock", "id": 1810515, "node_id": "MDQ6VXNlcjE4MTA1MTU=", "avatar_url": "https://avatars.githubusercontent.com/u/1810515?v=4", "gravatar_id": "", "url": "https://api.github.com/users/drammock", "html_url": "https://github.com/drammock", "followers_url": "https://api.github.com/users/drammock/followers", "following_url": "https://api.github.com/users/drammock/following{/other_user}", "gists_url": "https://api.github.com/users/drammock/gists{/gist_id}", "starred_url": "https://api.github.com/users/drammock/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/drammock/subscriptions", "organizations_url": "https://api.github.com/users/drammock/orgs", "repos_url": "https://api.github.com/users/drammock/repos", "events_url": "https://api.github.com/users/drammock/events{/privacy}", "received_events_url": "https://api.github.com/users/drammock/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 16, "created_at": "2020-10-28T02:02:27Z", "updated_at": "2020-10-29T14:36:36Z", "closed_at": "2020-10-29T14:36:36Z", "author_association": "NONE", "active_lock_reason": null, "body": "I found something maybe a bug.\r\nNow I used the master branch in GitHub.  I use Pycharm and terminal to run codes. One of my examples uses **raw.plot()** to plot raw data.  While I ran codes in Pycharm's console, **raw.plot()** went well, a figure showed up. While I ran .py in terminal like **python test.py**, no figure showed up. And if I type **python** in the terminal and type the codes in this way, also no figures showed up. But if I used the stable mne, everything was OK.", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/8441/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8441/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/8435", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8435/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8435/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8435/events", "html_url": "https://github.com/mne-tools/mne-python/pull/8435", "id": 730522616, "node_id": "MDExOlB1bGxSZXF1ZXN0NTEwODEyODAw", "number": 8435, "title": "[MRG] BUG: Do not allow baseline removal after preload", "user": {"login": "hoechenberger", "id": 2046265, "node_id": "MDQ6VXNlcjIwNDYyNjU=", "avatar_url": "https://avatars.githubusercontent.com/u/2046265?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hoechenberger", "html_url": "https://github.com/hoechenberger", "followers_url": "https://api.github.com/users/hoechenberger/followers", "following_url": "https://api.github.com/users/hoechenberger/following{/other_user}", "gists_url": "https://api.github.com/users/hoechenberger/gists{/gist_id}", "starred_url": "https://api.github.com/users/hoechenberger/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hoechenberger/subscriptions", "organizations_url": "https://api.github.com/users/hoechenberger/orgs", "repos_url": "https://api.github.com/users/hoechenberger/repos", "events_url": "https://api.github.com/users/hoechenberger/events{/privacy}", "received_events_url": "https://api.github.com/users/hoechenberger/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}, {"id": 1946100293, "node_id": "MDU6TGFiZWwxOTQ2MTAwMjkz", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/backported", "name": "backported", "color": "ae55db", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2020-10-27T14:49:29Z", "updated_at": "2020-10-27T20:46:03Z", "closed_at": "2020-10-27T20:39:33Z", "author_association": "MEMBER", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/mne-tools/mne-python/pulls/8435", "html_url": "https://github.com/mne-tools/mne-python/pull/8435", "diff_url": "https://github.com/mne-tools/mne-python/pull/8435.diff", "patch_url": "https://github.com/mne-tools/mne-python/pull/8435.patch", "merged_at": "2020-10-27T20:39:33Z"}, "body": "#### What does this implement/fix?\r\n\r\nIn `master` and 0.21 it's possible to preload `Epochs`, apply baseline correction, and (seemingly) remove it again via `apply_baseline(None)`. This should not be allowed: removing BL correction can only happen as long as the data has not been loaded.", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/8435/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8435/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/8434", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8434/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8434/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8434/events", "html_url": "https://github.com/mne-tools/mne-python/pull/8434", "id": 730321608, "node_id": "MDExOlB1bGxSZXF1ZXN0NTEwNjQ0NDk0", "number": 8434, "title": "[MRG] BUG: Fix BrainVision reading for certain vhdr files", "user": {"login": "hoechenberger", "id": 2046265, "node_id": "MDQ6VXNlcjIwNDYyNjU=", "avatar_url": "https://avatars.githubusercontent.com/u/2046265?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hoechenberger", "html_url": "https://github.com/hoechenberger", "followers_url": "https://api.github.com/users/hoechenberger/followers", "following_url": "https://api.github.com/users/hoechenberger/following{/other_user}", "gists_url": "https://api.github.com/users/hoechenberger/gists{/gist_id}", "starred_url": "https://api.github.com/users/hoechenberger/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hoechenberger/subscriptions", "organizations_url": "https://api.github.com/users/hoechenberger/orgs", "repos_url": "https://api.github.com/users/hoechenberger/repos", "events_url": "https://api.github.com/users/hoechenberger/events{/privacy}", "received_events_url": "https://api.github.com/users/hoechenberger/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}, {"id": 1946100293, "node_id": "MDU6TGFiZWwxOTQ2MTAwMjkz", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/backported", "name": "backported", "color": "ae55db", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 11, "created_at": "2020-10-27T10:33:02Z", "updated_at": "2020-11-05T14:09:16Z", "closed_at": "2020-10-27T15:35:52Z", "author_association": "MEMBER", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/mne-tools/mne-python/pulls/8434", "html_url": "https://github.com/mne-tools/mne-python/pull/8434", "diff_url": "https://github.com/mne-tools/mne-python/pull/8434.diff", "patch_url": "https://github.com/mne-tools/mne-python/pull/8434.patch", "merged_at": "2020-10-27T15:35:52Z"}, "body": "Fixes #8432\r\n\r\nI need advice on how to best add a test (specifically, where to add new testing data. Essentially, I can re-use an existing data set and simply drop the \"\u00b5V\" units from the VHDR file)", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/8434/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8434/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/8432", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8432/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8432/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8432/events", "html_url": "https://github.com/mne-tools/mne-python/issues/8432", "id": 729798042, "node_id": "MDU6SXNzdWU3Mjk3OTgwNDI=", "number": 8432, "title": "How to apply ica on brainvision raw data", "user": {"login": "arthurlgk", "id": 43018142, "node_id": "MDQ6VXNlcjQzMDE4MTQy", "avatar_url": "https://avatars.githubusercontent.com/u/43018142?v=4", "gravatar_id": "", "url": "https://api.github.com/users/arthurlgk", "html_url": "https://github.com/arthurlgk", "followers_url": "https://api.github.com/users/arthurlgk/followers", "following_url": "https://api.github.com/users/arthurlgk/following{/other_user}", "gists_url": "https://api.github.com/users/arthurlgk/gists{/gist_id}", "starred_url": "https://api.github.com/users/arthurlgk/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/arthurlgk/subscriptions", "organizations_url": "https://api.github.com/users/arthurlgk/orgs", "repos_url": "https://api.github.com/users/arthurlgk/repos", "events_url": "https://api.github.com/users/arthurlgk/events{/privacy}", "received_events_url": "https://api.github.com/users/arthurlgk/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "hoechenberger", "id": 2046265, "node_id": "MDQ6VXNlcjIwNDYyNjU=", "avatar_url": "https://avatars.githubusercontent.com/u/2046265?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hoechenberger", "html_url": "https://github.com/hoechenberger", "followers_url": "https://api.github.com/users/hoechenberger/followers", "following_url": "https://api.github.com/users/hoechenberger/following{/other_user}", "gists_url": "https://api.github.com/users/hoechenberger/gists{/gist_id}", "starred_url": "https://api.github.com/users/hoechenberger/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hoechenberger/subscriptions", "organizations_url": "https://api.github.com/users/hoechenberger/orgs", "repos_url": "https://api.github.com/users/hoechenberger/repos", "events_url": "https://api.github.com/users/hoechenberger/events{/privacy}", "received_events_url": "https://api.github.com/users/hoechenberger/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "hoechenberger", "id": 2046265, "node_id": "MDQ6VXNlcjIwNDYyNjU=", "avatar_url": "https://avatars.githubusercontent.com/u/2046265?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hoechenberger", "html_url": "https://github.com/hoechenberger", "followers_url": "https://api.github.com/users/hoechenberger/followers", "following_url": "https://api.github.com/users/hoechenberger/following{/other_user}", "gists_url": "https://api.github.com/users/hoechenberger/gists{/gist_id}", "starred_url": "https://api.github.com/users/hoechenberger/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hoechenberger/subscriptions", "organizations_url": "https://api.github.com/users/hoechenberger/orgs", "repos_url": "https://api.github.com/users/hoechenberger/repos", "events_url": "https://api.github.com/users/hoechenberger/events{/privacy}", "received_events_url": "https://api.github.com/users/hoechenberger/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 33, "created_at": "2020-10-26T18:17:05Z", "updated_at": "2020-11-03T18:01:30Z", "closed_at": "2020-10-27T15:35:52Z", "author_association": "NONE", "active_lock_reason": null, "body": "I am getting this error when trying to fit the data:\r\n\r\nValueError: picks (NoneNone, treated as \"data\") yielded no channels, consider passing picks explicitly\r\n\r\nHow to resolve this issue?", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/8432/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8432/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/8425", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8425/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8425/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8425/events", "html_url": "https://github.com/mne-tools/mne-python/issues/8425", "id": 729135304, "node_id": "MDU6SXNzdWU3MjkxMzUzMDQ=", "number": 8425, "title": "Default topomap interpolation a bit uglier than some time before", "user": {"login": "mmagnuski", "id": 8452354, "node_id": "MDQ6VXNlcjg0NTIzNTQ=", "avatar_url": "https://avatars.githubusercontent.com/u/8452354?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mmagnuski", "html_url": "https://github.com/mmagnuski", "followers_url": "https://api.github.com/users/mmagnuski/followers", "following_url": "https://api.github.com/users/mmagnuski/following{/other_user}", "gists_url": "https://api.github.com/users/mmagnuski/gists{/gist_id}", "starred_url": "https://api.github.com/users/mmagnuski/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mmagnuski/subscriptions", "organizations_url": "https://api.github.com/users/mmagnuski/orgs", "repos_url": "https://api.github.com/users/mmagnuski/repos", "events_url": "https://api.github.com/users/mmagnuski/events{/privacy}", "received_events_url": "https://api.github.com/users/mmagnuski/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/mne-tools/mne-python/milestones/18", "html_url": "https://github.com/mne-tools/mne-python/milestone/18", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/milestones/18/labels", "id": 5802238, "node_id": "MDk6TWlsZXN0b25lNTgwMjIzOA==", "number": 18, "title": "0.22", "description": "", "creator": {"login": "larsoner", "id": 2365790, "node_id": "MDQ6VXNlcjIzNjU3OTA=", "avatar_url": "https://avatars.githubusercontent.com/u/2365790?v=4", "gravatar_id": "", "url": "https://api.github.com/users/larsoner", "html_url": "https://github.com/larsoner", "followers_url": "https://api.github.com/users/larsoner/followers", "following_url": "https://api.github.com/users/larsoner/following{/other_user}", "gists_url": "https://api.github.com/users/larsoner/gists{/gist_id}", "starred_url": "https://api.github.com/users/larsoner/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/larsoner/subscriptions", "organizations_url": "https://api.github.com/users/larsoner/orgs", "repos_url": "https://api.github.com/users/larsoner/repos", "events_url": "https://api.github.com/users/larsoner/events{/privacy}", "received_events_url": "https://api.github.com/users/larsoner/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 53, "state": "closed", "created_at": "2020-08-24T06:23:40Z", "updated_at": "2020-12-17T15:39:07Z", "due_on": "2020-12-15T08:00:00Z", "closed_at": "2020-12-17T15:39:07Z"}, "comments": 6, "created_at": "2020-10-25T23:01:02Z", "updated_at": "2020-12-16T16:40:41Z", "closed_at": "2020-12-16T16:40:41Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "I noticed that current topomap interpolation with `extrapolate='head'` produces more artifacts at the edges than in the previous version. Take a look at this:\r\n### before\r\n![image](https://user-images.githubusercontent.com/8452354/97121321-b7cba880-171d-11eb-9030-45863668659e.png)\r\n\r\n### now\r\n![image](https://user-images.githubusercontent.com/8452354/97121378-0711d900-171e-11eb-9e1c-d88ed2d6b53c.png)\r\n\r\nNow the topos look ok only in `extrapolate='local'` mode (so I've learnt to like the non-circular convex hull mask).\r\nI think I may be partly responsible for this. I have a vague memory of adding more extrapolation points some time ago to `extrapolate='head'`, but I can't find the PR now.\r\nI'll try to take a look at this in the upcoming week.", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/8425/reactions", "total_count": 1, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8425/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/8424", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8424/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8424/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8424/events", "html_url": "https://github.com/mne-tools/mne-python/issues/8424", "id": 729132098, "node_id": "MDU6SXNzdWU3MjkxMzIwOTg=", "number": 8424, "title": "raw.plot(show=False) not respected in notebooks with `%matplotlib inline`", "user": {"login": "mmagnuski", "id": 8452354, "node_id": "MDQ6VXNlcjg0NTIzNTQ=", "avatar_url": "https://avatars.githubusercontent.com/u/8452354?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mmagnuski", "html_url": "https://github.com/mmagnuski", "followers_url": "https://api.github.com/users/mmagnuski/followers", "following_url": "https://api.github.com/users/mmagnuski/following{/other_user}", "gists_url": "https://api.github.com/users/mmagnuski/gists{/gist_id}", "starred_url": "https://api.github.com/users/mmagnuski/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mmagnuski/subscriptions", "organizations_url": "https://api.github.com/users/mmagnuski/orgs", "repos_url": "https://api.github.com/users/mmagnuski/repos", "events_url": "https://api.github.com/users/mmagnuski/events{/privacy}", "received_events_url": "https://api.github.com/users/mmagnuski/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 12, "created_at": "2020-10-25T22:42:12Z", "updated_at": "2020-11-11T17:35:12Z", "closed_at": "2020-11-11T17:35:11Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "I'm pretty sure some time ago plotting in a notebook with inline matplotlib turned on gave two figures only with `show=False`.\r\nFor example: `raw.plot()` would give you two identical figures, but `raw.plot(show=False)` would give just one.\r\nCurrently both `show=True` and `show=False` lead to two figures in the notebook. Its not a problem given that it can be suppressed with `;` but still may be worth fixing. ", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/8424/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8424/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/8421", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8421/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8421/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8421/events", "html_url": "https://github.com/mne-tools/mne-python/issues/8421", "id": 729084444, "node_id": "MDU6SXNzdWU3MjkwODQ0NDQ=", "number": 8421, "title": "No Annotations descriptions displayed in introductory tutorial figure", "user": {"login": "hoechenberger", "id": 2046265, "node_id": "MDQ6VXNlcjIwNDYyNjU=", "avatar_url": "https://avatars.githubusercontent.com/u/2046265?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hoechenberger", "html_url": "https://github.com/hoechenberger", "followers_url": "https://api.github.com/users/hoechenberger/followers", "following_url": "https://api.github.com/users/hoechenberger/following{/other_user}", "gists_url": "https://api.github.com/users/hoechenberger/gists{/gist_id}", "starred_url": "https://api.github.com/users/hoechenberger/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hoechenberger/subscriptions", "organizations_url": "https://api.github.com/users/hoechenberger/orgs", "repos_url": "https://api.github.com/users/hoechenberger/repos", "events_url": "https://api.github.com/users/hoechenberger/events{/privacy}", "received_events_url": "https://api.github.com/users/hoechenberger/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}, {"id": 1290799321, "node_id": "MDU6TGFiZWwxMjkwNzk5MzIx", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/VIZ", "name": "VIZ", "color": "22e861", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": {"login": "drammock", "id": 1810515, "node_id": "MDQ6VXNlcjE4MTA1MTU=", "avatar_url": "https://avatars.githubusercontent.com/u/1810515?v=4", "gravatar_id": "", "url": "https://api.github.com/users/drammock", "html_url": "https://github.com/drammock", "followers_url": "https://api.github.com/users/drammock/followers", "following_url": "https://api.github.com/users/drammock/following{/other_user}", "gists_url": "https://api.github.com/users/drammock/gists{/gist_id}", "starred_url": "https://api.github.com/users/drammock/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/drammock/subscriptions", "organizations_url": "https://api.github.com/users/drammock/orgs", "repos_url": "https://api.github.com/users/drammock/repos", "events_url": "https://api.github.com/users/drammock/events{/privacy}", "received_events_url": "https://api.github.com/users/drammock/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "drammock", "id": 1810515, "node_id": "MDQ6VXNlcjE4MTA1MTU=", "avatar_url": "https://avatars.githubusercontent.com/u/1810515?v=4", "gravatar_id": "", "url": "https://api.github.com/users/drammock", "html_url": "https://github.com/drammock", "followers_url": "https://api.github.com/users/drammock/followers", "following_url": "https://api.github.com/users/drammock/following{/other_user}", "gists_url": "https://api.github.com/users/drammock/gists{/gist_id}", "starred_url": "https://api.github.com/users/drammock/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/drammock/subscriptions", "organizations_url": "https://api.github.com/users/drammock/orgs", "repos_url": "https://api.github.com/users/drammock/repos", "events_url": "https://api.github.com/users/drammock/events{/privacy}", "received_events_url": "https://api.github.com/users/drammock/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2020-10-25T18:39:06Z", "updated_at": "2020-10-26T20:15:23Z", "closed_at": "2020-10-26T20:15:23Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "The Annotations in the `plot_20_events_from_raw` tutorial don't have a description (or vertical line) in the raw plot in[ `master`](https://mne.tools/dev/auto_tutorials/intro/plot_20_events_from_raw.html#converting-between-events-arrays-and-annotations-objects), but displayed correctly in [0.21](https://mne.tools/dev/auto_tutorials/intro/plot_20_events_from_raw.html#converting-between-events-arrays-and-annotations-objects)\r\n\r\n`master`:\r\n\r\n![](https://mne.tools/dev/_images/sphx_glr_plot_20_events_from_raw_002.png)\r\n\r\n\r\n0.21:\r\n\r\n![](https://mne.tools/stable/_images/sphx_glr_plot_20_events_from_raw_002.png)\r\n\r\n\r\ncc @drammock \r\n", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/8421/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8421/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/8401", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8401/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8401/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8401/events", "html_url": "https://github.com/mne-tools/mne-python/issues/8401", "id": 726916013, "node_id": "MDU6SXNzdWU3MjY5MTYwMTM=", "number": 8401, "title": "API: _Brain methods inconsistent between backends", "user": {"login": "drammock", "id": 1810515, "node_id": "MDQ6VXNlcjE4MTA1MTU=", "avatar_url": "https://avatars.githubusercontent.com/u/1810515?v=4", "gravatar_id": "", "url": "https://api.github.com/users/drammock", "html_url": "https://github.com/drammock", "followers_url": "https://api.github.com/users/drammock/followers", "following_url": "https://api.github.com/users/drammock/following{/other_user}", "gists_url": "https://api.github.com/users/drammock/gists{/gist_id}", "starred_url": "https://api.github.com/users/drammock/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/drammock/subscriptions", "organizations_url": "https://api.github.com/users/drammock/orgs", "repos_url": "https://api.github.com/users/drammock/repos", "events_url": "https://api.github.com/users/drammock/events{/privacy}", "received_events_url": "https://api.github.com/users/drammock/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2020-10-21T22:51:42Z", "updated_at": "2020-10-24T08:32:09Z", "closed_at": "2020-10-24T08:32:09Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "#### Describe the bug\r\n3D viz with pyvista has a `set_time_point` method but not a `set_time` method.  The opposite is true for 3D viz with mayavi backend.\r\n\r\n#### Steps to reproduce\r\n```python\r\nimport os\r\nimport mne\r\n\r\nmne.viz.set_3d_backend('pyvista')  # or mayavi\r\nsample_data_folder = mne.datasets.sample.data_path()\r\nsample_data_raw_file = os.path.join(sample_data_folder, 'MEG', 'sample',\r\n                                    'sample_audvis_raw.fif')\r\nraw = mne.io.read_raw_fif(sample_data_raw_file, verbose=False).crop(tmax=10)\r\nraw.set_eeg_reference(projection=True)\r\nevents = mne.find_events(raw, stim_channel='STI 014')\r\nevent_dict = {'auditory/left': 1, 'auditory/right': 2}\r\nepochs = mne.Epochs(raw, events, event_id=event_dict, preload=True)\r\nevoked = epochs.average()\r\ninverse_operator_file = os.path.join(sample_data_folder, 'MEG', 'sample',\r\n                                     'sample_audvis-meg-oct-6-meg-inv.fif')\r\ninv_operator = mne.minimum_norm.read_inverse_operator(inverse_operator_file)\r\nstc = mne.minimum_norm.apply_inverse(evoked, inv_operator)\r\nbrain = stc.plot(subject='sample')\r\nbrain.set_time(0.5)  # or brain.set_time_point(0.5)\r\n```\r\n\r\n#### Expected results\r\nthe figure would update to show activity at time = 0.5 seconds\r\n\r\n#### Actual results\r\n`AttributeError: 'Brain' object has no attribute 'set_time'` (with pyvista)\r\n`AttributeError: 'Brain' object has no attribute 'set_time_point'` (with mayavi)\r\n", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/8401/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8401/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/8394", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8394/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8394/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8394/events", "html_url": "https://github.com/mne-tools/mne-python/issues/8394", "id": 726273709, "node_id": "MDU6SXNzdWU3MjYyNzM3MDk=", "number": 8394, "title": "backend parameter of viz._3d.plot_source_estimates needs some love", "user": {"login": "hoechenberger", "id": 2046265, "node_id": "MDQ6VXNlcjIwNDYyNjU=", "avatar_url": "https://avatars.githubusercontent.com/u/2046265?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hoechenberger", "html_url": "https://github.com/hoechenberger", "followers_url": "https://api.github.com/users/hoechenberger/followers", "following_url": "https://api.github.com/users/hoechenberger/following{/other_user}", "gists_url": "https://api.github.com/users/hoechenberger/gists{/gist_id}", "starred_url": "https://api.github.com/users/hoechenberger/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hoechenberger/subscriptions", "organizations_url": "https://api.github.com/users/hoechenberger/orgs", "repos_url": "https://api.github.com/users/hoechenberger/repos", "events_url": "https://api.github.com/users/hoechenberger/events{/privacy}", "received_events_url": "https://api.github.com/users/hoechenberger/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}, {"id": 586377763, "node_id": "MDU6TGFiZWw1ODYzNzc3NjM=", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/API", "name": "API", "color": "d93f0b", "default": false, "description": null}, {"id": 1290799321, "node_id": "MDU6TGFiZWwxMjkwNzk5MzIx", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/VIZ", "name": "VIZ", "color": "22e861", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 16, "created_at": "2020-10-21T08:48:30Z", "updated_at": "2021-02-03T15:41:24Z", "closed_at": "2020-10-22T06:45:35Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "#### Describe the bug\r\nPassing `backend='pyvista'` to `plot_source_estimates()` currently is not supported, although we **do** support PyVista:\r\nhttps://github.com/mne-tools/mne-python/blob/6f16c3771d79dda19b5ff0a058396f468a3e57f6/mne/viz/_3d.py#L1750\r\n\r\nAlso, the `backend` parameter is not used for anything except for checking whether we should use Matplotlib or not; if `backend != 'matplotlib'`, we simply use `_get_3d_backend()` to retrieve the backend to use. This means that e.g.if you have PyVista installed, passing `backend='mayavi'` will still use the `pyvista` backend.\r\n\r\nhttps://github.com/mne-tools/mne-python/blob/6f16c3771d79dda19b5ff0a058396f468a3e57f6/mne/viz/_3d.py#L1751-L1762\r\n\r\n\r\n#### Expected results\r\n- `backend` should be allowed to be `'pyvista'` as well\r\n- the value of `backend` should be honored\r\n\r\n\r\n#### Additional information\r\nAlso wondering if the `backend` param should be deprecated or changed. Maybe it could only support `matplotlib` and `3d` or so, and `3d` would select the default 3D backend?\r\n\r\nOr we deprecate it and if we cannot detect a valid 3D backend, we fall back to Matplotlib. (We already kind of do that, if I'm reading the code correctly)\r\n\r\ncc @GuillaumeFavelier ", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/8394/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8394/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/8391", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8391/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8391/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8391/events", "html_url": "https://github.com/mne-tools/mne-python/issues/8391", "id": 725161753, "node_id": "MDU6SXNzdWU3MjUxNjE3NTM=", "number": 8391, "title": "read_raw_curry() with preload=True  produces error ", "user": {"login": "todflak", "id": 45362686, "node_id": "MDQ6VXNlcjQ1MzYyNjg2", "avatar_url": "https://avatars.githubusercontent.com/u/45362686?v=4", "gravatar_id": "", "url": "https://api.github.com/users/todflak", "html_url": "https://github.com/todflak", "followers_url": "https://api.github.com/users/todflak/followers", "following_url": "https://api.github.com/users/todflak/following{/other_user}", "gists_url": "https://api.github.com/users/todflak/gists{/gist_id}", "starred_url": "https://api.github.com/users/todflak/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/todflak/subscriptions", "organizations_url": "https://api.github.com/users/todflak/orgs", "repos_url": "https://api.github.com/users/todflak/repos", "events_url": "https://api.github.com/users/todflak/events{/privacy}", "received_events_url": "https://api.github.com/users/todflak/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2020-10-20T03:35:17Z", "updated_at": "2020-10-23T14:50:10Z", "closed_at": "2020-10-23T14:50:10Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "#### Describe the bug\r\n**read_raw_curry()** with **preload=True**  produces error (for some DAT files)\r\n\r\nI am working with Curry version 7 data files, using **read_raw_curry()** to load data.  Out of 16 datasets that I am processing, 7 of them produce an error similar to this:\r\n\r\n> RuntimeError: Incorrect number of samples (5302650 != 5379500), please report this error to MNE-Python developers\r\n\r\n\r\nI also determined that the error **_only_** occurs using the method option  **preload=True**.  If I use **preload=False**, the data loads fine for all 16 datasets!\r\n\r\nNote that the same problem was reported in [this comment](https://github.com/mne-tools/mne-python/issues/7300#issuecomment-584300596) to issue 7300 .  At that time, there was no clear cause for this error.\r\n\r\n\r\n#### Steps to reproduce\r\nThis is a link to Curry data files (.dat, .rs3, .dap)  for reproducing the error:\r\nhttps://drive.google.com/file/d/1842rPYAf_LkYF9hQxkKjsMz4MY240m3r/view?usp=sharing\r\n\r\ntest code:\r\n```\r\nimport mne\r\ndata_path = 'C:\\\\read_curry example data\\\\PH005_baseline.dat'\r\n\r\nraw = mne.io.read_raw_curry(data_path,preload=False,verbose=True)\r\nprint('Data loaded, with preload=False: ' + data_path +  ', ' + str(raw.info[\"nchan\"]) + ' channels X ' + str(raw.n_times) + ' points')\r\n\r\nraw = mne.io.read_raw_curry(data_path,preload=True,verbose=True)\r\nprint('Data loaded, with preload=True: ' + data_path +  ', ' + str(raw.info[\"nchan\"]) + ' channels X ' + str(raw.n_times) + ' points')\r\n\r\n```\r\n\r\n#### Expected results\r\nWould expect to load correctly with either \"preload=False\" or \"preload=True\", which would produce this output:\r\n\r\n```\r\nLeaving device<->head transform as None (no landmarks found)\r\nEvent file not found. No Annotations set.\r\nData loaded, with preload=False: C:\\read_curry example data\\PH005_baseline.dat, 70 channels X 76850 points\r\nLeaving device<->head transform as None (no landmarks found)\r\nReading 0 ... 76849  =      0.000 ...   307.396 secs...\r\nEvent file not found. No Annotations set.\r\nData loaded, with preload=True: C:\\read_curry example data\\PH005_baseline.dat, 70 channels X 76850 points\r\n```\r\n\r\n\r\n#### Actual results\r\nFirst load (with  preload=False) works fine; second load (with  preload=True) throws error:\r\n```\r\nData loaded, with preload=False: C:\\read_curry example data\\PH005_baseline.dat, 70 channels X 76850 points\r\nLeaving device<->head transform as None (no landmarks found)\r\nReading 0 ... 76849  =      0.000 ...   307.396 secs...\r\nTraceback (most recent call last):\r\n  File \"c:\\Users\\todfl\\.vscode\\extensions\\ms-python.python-2020.2.64397\\pythonFiles\\ptvsd_launcher.py\", line 48, in <module>\r\n    main(ptvsdArgs)\r\n  File \"c:\\Users\\todfl\\.vscode\\extensions\\ms-python.python-2020.2.64397\\pythonFiles\\lib\\python\\old_ptvsd\\ptvsd\\__main__.py\", line 432, in main    \r\n    run()\r\n  File \"c:\\Users\\todfl\\.vscode\\extensions\\ms-python.python-2020.2.64397\\pythonFiles\\lib\\python\\old_ptvsd\\ptvsd\\__main__.py\", line 316, in run_file\r\n    runpy.run_path(target, run_name='__main__')\r\n  File \"C:\\ProgramData\\Anaconda3\\lib\\runpy.py\", line 265, in run_path\r\n    return _run_module_code(code, init_globals, run_name,\r\n  File \"C:\\ProgramData\\Anaconda3\\lib\\runpy.py\", line 97, in _run_module_code\r\n    _run_code(code, mod_globals, init_globals,\r\n  File \"C:\\ProgramData\\Anaconda3\\lib\\runpy.py\", line 87, in _run_code\r\n  File \"c:\\Users\\todfl\\Documents\\Decker\\EEG Processing\\EEG Processing Code\\read_raw_curry error MWE.py\", line 7, in <module>\r\n    raw = mne.io.read_raw_curry(data_path,preload=True,verbose=True)\r\n  File \"<decorator-gen-218>\", line 20, in read_raw_curry\r\n  File \"C:\\ProgramData\\Anaconda3\\lib\\site-packages\\mne\\io\\curry\\curry.py\", line 406, in read_raw_curry\r\n    return RawCurry(fname, preload, verbose)\r\n  File \"<decorator-gen-219>\", line 20, in __init__\r\n  File \"C:\\ProgramData\\Anaconda3\\lib\\site-packages\\mne\\io\\curry\\curry.py\", line 439, in __init__\r\n    super(RawCurry, self).__init__(\r\n  File \"<decorator-gen-160>\", line 20, in __init__\r\n  File \"C:\\ProgramData\\Anaconda3\\lib\\site-packages\\mne\\io\\base.py\", line 247, in __init__\r\n    self._preload_data(preload)\r\n  File \"<decorator-gen-164>\", line 20, in _preload_data\r\n  File \"C:\\ProgramData\\Anaconda3\\lib\\site-packages\\mne\\io\\base.py\", line 528, in _preload_data\r\n    self._data = self._read_segment(\r\n  File \"<decorator-gen-162>\", line 20, in _read_segment\r\n  File \"C:\\ProgramData\\Anaconda3\\lib\\site-packages\\mne\\io\\base.py\", line 412, in _read_segment\r\n    _ReadSegmentFileProtector(self)._read_segment_file(\r\n  File \"C:\\ProgramData\\Anaconda3\\lib\\site-packages\\mne\\io\\base.py\", line 1816, in _read_segment_file\r\n    return self.__raw.__class__._read_segment_file(\r\n  File \"C:\\ProgramData\\Anaconda3\\lib\\site-packages\\mne\\io\\curry\\curry.py\", line 469, in _read_segment_file\r\n    _read_segments_file(\r\n  File \"C:\\ProgramData\\Anaconda3\\lib\\site-packages\\mne\\io\\utils.py\", line 221, in _read_segments_file\r\n    raise RuntimeError('Incorrect number of samples (%s != %s), '\r\n  RuntimeError: Incorrect number of samples (5302650 != 5379500), please report this error to MNE-Python developers\r\n```\r\n\r\n\r\n#### Additional information\r\nPlatform:      Windows-10-10.0.18362-SP0\r\nPython:        3.8.3 (default, Jul  2 2020, 17:30:36) [MSC v.1916 64 bit (AMD64)]\r\nExecutable:    C:\\ProgramData\\Anaconda3\\python.exe\r\nCPU:           AMD64 Family 23 Model 113 Stepping 0, AuthenticAMD: 16 cores\r\nMemory:        16.0 GB\r\n\r\nmne:           0.21.0\r\nnumpy:         1.18.5 {blas=mkl_rt, lapack=mkl_rt}\r\nscipy:         1.5.0\r\nmatplotlib:    3.3.2 {backend=Qt5Agg}\r\n\r\nsklearn:       0.23.1\r\nnumba:         0.50.1\r\nnibabel:       Not found\r\ncupy:          Not found\r\npandas:        1.0.5\r\ndipy:          Not found\r\nmayavi:        Not found\r\npyvista:       Not found\r\nvtk:           Not found\r\n", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/8391/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8391/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/8387", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8387/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8387/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8387/events", "html_url": "https://github.com/mne-tools/mne-python/issues/8387", "id": 724714497, "node_id": "MDU6SXNzdWU3MjQ3MTQ0OTc=", "number": 8387, "title": "A question about \"-trans.fif\"", "user": {"login": "zhchsh19", "id": 51749581, "node_id": "MDQ6VXNlcjUxNzQ5NTgx", "avatar_url": "https://avatars.githubusercontent.com/u/51749581?v=4", "gravatar_id": "", "url": "https://api.github.com/users/zhchsh19", "html_url": "https://github.com/zhchsh19", "followers_url": "https://api.github.com/users/zhchsh19/followers", "following_url": "https://api.github.com/users/zhchsh19/following{/other_user}", "gists_url": "https://api.github.com/users/zhchsh19/gists{/gist_id}", "starred_url": "https://api.github.com/users/zhchsh19/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/zhchsh19/subscriptions", "organizations_url": "https://api.github.com/users/zhchsh19/orgs", "repos_url": "https://api.github.com/users/zhchsh19/repos", "events_url": "https://api.github.com/users/zhchsh19/events{/privacy}", "received_events_url": "https://api.github.com/users/zhchsh19/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2020-10-19T15:06:01Z", "updated_at": "2020-10-19T15:29:28Z", "closed_at": "2020-10-19T15:29:28Z", "author_association": "NONE", "active_lock_reason": null, "body": "Sorry to bother all of you , but I have a big question.\r\n\r\n\r\n![2020-10-19 22-46-03\u5c4f\u5e55\u622a\u56fe](https://user-images.githubusercontent.com/51749581/96467550-9bcb9100-125d-11eb-874e-840414d0aa37.png)\r\n\r\nbut I can't find the file in 'bem' file. and I also get this error:\r\n![2020-10-19 22-54-56\u5c4f\u5e55\u622a\u56fe](https://user-images.githubusercontent.com/51749581/96467990-244a3180-125e-11eb-8546-ba55bacf294d.png)\r\n\r\nThis is my code to get 'bem'\r\n\r\nexport FREESURFER_HOME=/home/zhanglingxi/freesurfer\r\nsource $FREESURFER_HOME/SetUpFreeSurfer.sh\r\n export SUBJECTS_DIR=/home/zhanglingxi/freesurfer2/subjects\r\nmy_subject=subdw\r\nmy_NifTI=/media/zhanglingxi/zlx-1/SMRI/NIF/s20180417_T09_LongZYL_ZHN_DaiWei-0002-00001-000144-01.nii.gz\r\nrecon-all -i $my_NIfTI -s $my_subject -all\r\nsubjects_dir=/home/zhanglingxi/freesurfer2/subjects\r\n mne watershed_bem -s subdw\r\n\r\nAnd I used to get a ' fsaverage' in '/freesurfer2/subjects/sub' ,then I don't have the question above, but now I can't get it \r\n![2020-10-19 22-59-58\u5c4f\u5e55\u622a\u56fe](https://user-images.githubusercontent.com/51749581/96468562-d681f900-125e-11eb-8a46-2025b41db9a0.png)\r\n\r\n![2020-10-19 23-01-04\u5c4f\u5e55\u622a\u56fe](https://user-images.githubusercontent.com/51749581/96468705-faddd580-125e-11eb-98b8-1825653650a5.png)\r\n\r\n\r\n![2020-10-19 23-03-29\u5c4f\u5e55\u622a\u56fe](https://user-images.githubusercontent.com/51749581/96469014-51e3aa80-125f-11eb-84fe-8531ff9ba2d6.png)\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/8387/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8387/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/8383", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8383/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8383/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8383/events", "html_url": "https://github.com/mne-tools/mne-python/issues/8383", "id": 724450520, "node_id": "MDU6SXNzdWU3MjQ0NTA1MjA=", "number": 8383, "title": "Problem with load eeglab file", "user": {"login": "ociepkam", "id": 15743317, "node_id": "MDQ6VXNlcjE1NzQzMzE3", "avatar_url": "https://avatars.githubusercontent.com/u/15743317?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ociepkam", "html_url": "https://github.com/ociepkam", "followers_url": "https://api.github.com/users/ociepkam/followers", "following_url": "https://api.github.com/users/ociepkam/following{/other_user}", "gists_url": "https://api.github.com/users/ociepkam/gists{/gist_id}", "starred_url": "https://api.github.com/users/ociepkam/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ociepkam/subscriptions", "organizations_url": "https://api.github.com/users/ociepkam/orgs", "repos_url": "https://api.github.com/users/ociepkam/repos", "events_url": "https://api.github.com/users/ociepkam/events{/privacy}", "received_events_url": "https://api.github.com/users/ociepkam/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2020-10-19T09:41:20Z", "updated_at": "2020-11-10T16:38:00Z", "closed_at": "2020-11-10T16:38:00Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi everyone!\r\nI have problem with loading data. I have eeglab files (example: https://ufile.io/f/js83q) and after using mne.io.read_raw_eeglab\r\nI get:\r\nReading rest1_1_trigg.fdt\r\n```python-traceback\r\nTypeError Traceback (most recent call last)\r\nTypeError: only size-1 arrays can be converted to Python scalars\r\n\r\nThe above exception was the direct cause of the following exception:\r\n\r\nValueError Traceback (most recent call last)\r\n\r\n<ipython-input-20-49d5d8853521> in <module>\r\n----> 1 mne.io.read_raw_eeglab(os.path.join(folder_with_data, files_all[0]))\r\n\r\n~.conda\\envs\\mne\\lib\\site-packages\\mne\\io\\eeglab\\eeglab.py in read_raw_eeglab(input_fname, eog, preload, uint16_codec, verbose)\r\n219 .. versionadded:: 0.11.0\r\n220 \"\"\"\r\n--> 221 return RawEEGLAB(input_fname=input_fname, preload=preload,\r\n222 eog=eog, verbose=verbose, uint16_codec=uint16_codec)\r\n223\r\n\r\n<decorator-gen-197> in init(self, input_fname, eog, preload, uint16_codec, verbose)\r\n\r\n~.conda\\envs\\mne\\lib\\site-packages\\mne\\io\\eeglab\\eeglab.py in init(self, input_fname, eog, preload, uint16_codec, verbose)\r\n353\r\n354 # create event_ch from annotations\r\n--> 355 annot = read_annotations(input_fname)\r\n356 self.set_annotations(annot)\r\n357 _check_boundary(annot, None)\r\n\r\n~.conda\\envs\\mne\\lib\\site-packages\\mne\\annotations.py in read_annotations(fname, sfreq, uint16_codec)\r\n665\r\n666 elif name.endswith('set'):\r\n--> 667 annotations = _read_annotations_eeglab(fname,\r\n668 uint16_codec=uint16_codec)\r\n669\r\n\r\n~.conda\\envs\\mne\\lib\\site-packages\\mne\\io\\eeglab\\eeglab.py in _read_annotations_eeglab(eeg, uint16_codec)\r\n611 duration = np.zeros(len(onset))\r\n612 if len(events) > 0 and hasattr(events[0], 'duration'):\r\n--> 613 duration[:] = [event.duration for event in events]\r\n614\r\n615 return Annotations(onset=np.array(onset) / eeg.srate,\r\n\r\nValueError: setting an array element with a sequence.\r\n```\r\nI am using version 0.20.8 of mne and Python 3.8.5.\r\nCan you help me with this problem?", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/8383/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8383/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/8378", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8378/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8378/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8378/events", "html_url": "https://github.com/mne-tools/mne-python/issues/8378", "id": 722658086, "node_id": "MDU6SXNzdWU3MjI2NTgwODY=", "number": 8378, "title": "Setting standard montage with match_case=False failes", "user": {"login": "adam2392", "id": 3460267, "node_id": "MDQ6VXNlcjM0NjAyNjc=", "avatar_url": "https://avatars.githubusercontent.com/u/3460267?v=4", "gravatar_id": "", "url": "https://api.github.com/users/adam2392", "html_url": "https://github.com/adam2392", "followers_url": "https://api.github.com/users/adam2392/followers", "following_url": "https://api.github.com/users/adam2392/following{/other_user}", "gists_url": "https://api.github.com/users/adam2392/gists{/gist_id}", "starred_url": "https://api.github.com/users/adam2392/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/adam2392/subscriptions", "organizations_url": "https://api.github.com/users/adam2392/orgs", "repos_url": "https://api.github.com/users/adam2392/repos", "events_url": "https://api.github.com/users/adam2392/events{/privacy}", "received_events_url": "https://api.github.com/users/adam2392/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2020-10-15T20:34:03Z", "updated_at": "2020-10-18T18:24:02Z", "closed_at": "2020-10-18T18:24:02Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "#### Describe the bug\r\nWhen I have a dataset loaded in where all the channel names are in upper-cased, I want to set a standard montage, but I just realized that the casing matters by default. So I tried turning off `match_case`, but then I realized it doesn't work on the standard montages because it does not reach that part of the code in `set_montage`. \r\n\r\nThen the corresponding channels that don't match by case are dropped.\r\n\r\n#### Steps to reproduce\r\n\r\n```\r\nmontage =  = mne.channels.make_standard_montage('standard_1020')\r\n\r\n# map channel names to upper-case\r\n\r\n# try to set the montage\r\n    raw.set_montage(montage, on_missing='warn',\r\n                    match_case=False)\r\n```\r\n\r\n#### Expected results\r\n*Replace this text with a description of what you expected to happen.*\r\n\r\n\r\n#### Actual results\r\n\r\nstandard 1020 montage\r\n```\r\n<DigMontage | 0 extras (headshape), 0 HPIs, 3 fiducials, 343 channels> channel names: ['Fp1', 'Fpz', 'Fp2', 'AF9', 'AF7', 'AF5', 'AF3', 'AF1', 'AFz', 'AF2', 'AF4', 'AF6', 'AF8', 'AF10', 'F9', 'F7', 'F5', 'F3', 'F1', 'Fz', 'F2', 'F4', 'F6', 'F8', 'F10', 'FT9', 'FT7', 'FC5', 'FC3', 'FC1', 'FCz', 'FC2', 'FC4', 'FC6', 'FT8', 'FT10', 'T9', 'T7', 'C5', 'C3', 'C1', 'Cz', 'C2', 'C4', 'C6', 'T8', 'T10', 'TP9', 'TP7', 'CP5', 'CP3', 'CP1', 'CPz', 'CP2', 'CP4', 'CP6', 'TP8', 'TP10', 'P9', 'P7', 'P5', 'P3', 'P1', 'Pz', 'P2', 'P4', 'P6', 'P8', 'P10', 'PO9', 'PO7', 'PO5', 'PO3', 'PO1', 'POz', 'PO2', 'PO4', 'PO6', 'PO8', 'PO10', 'O1', 'Oz', 'O2', 'I1', 'Iz', 'I2', 'AFp9h', 'AFp7h', 'AFp5h', 'AFp3h', 'AFp1h', 'AFp2h', 'AFp4h', 'AFp6h', 'AFp8h', 'AFp10h', 'AFF9h', 'AFF7h', 'AFF5h', 'AFF3h', 'AFF1h', 'AFF2h', 'AFF4h', 'AFF6h', 'AFF8h', 'AFF10h', 'FFT9h', 'FFT7h', 'FFC5h', 'FFC3h', 'FFC1h', 'FFC2h', 'FFC4h', 'FFC6h', 'FFT8h', 'FFT10h', 'FTT9h', 'FTT7h', 'FCC5h', 'FCC3h', 'FCC1h', 'FCC2h', 'FCC4h', 'FCC6h', 'FTT8h', 'FTT10h', 'TTP9h', 'TTP7h', 'CCP5h', 'CCP3h', 'CCP1h', 'CCP2h', 'CCP4h', 'CCP6h', 'TTP8h', 'TTP10h', 'TPP9h', 'TPP7h', 'CPP5h', 'CPP3h', 'CPP1h', 'CPP2h', 'CPP4h', 'CPP6h', 'TPP8h', 'TPP10h', 'PPO9h', 'PPO7h', 'PPO5h', 'PPO3h', 'PPO1h', 'PPO2h', 'PPO4h', 'PPO6h', 'PPO8h', 'PPO10h', 'POO9h', 'POO7h', 'POO5h', 'POO3h', 'POO1h', 'POO2h', 'POO4h', 'POO6h', 'POO8h', 'POO10h', 'OI1h', 'OI2h', 'Fp1h', 'Fp2h', 'AF9h', 'AF7h', 'AF5h', 'AF3h', 'AF1h', 'AF2h', 'AF4h', 'AF6h', 'AF8h', 'AF10h', 'F9h', 'F7h', 'F5h', 'F3h', 'F1h', 'F2h', 'F4h', 'F6h', 'F8h', 'F10h', 'FT9h', 'FT7h', 'FC5h', 'FC3h', 'FC1h', 'FC2h', 'FC4h', 'FC6h', 'FT8h', 'FT10h', 'T9h', 'T7h', 'C5h', 'C3h', 'C1h', 'C2h', 'C4h', 'C6h', 'T8h', 'T10h', 'TP9h', 'TP7h', 'CP5h', 'CP3h', 'CP1h', 'CP2h', 'CP4h', 'CP6h', 'TP8h', 'TP10h', 'P9h', 'P7h', 'P5h', 'P3h', 'P1h', 'P2h', 'P4h', 'P6h', 'P8h', 'P10h', 'PO9h', 'PO7h', 'PO5h', 'PO3h', 'PO1h', 'PO2h', 'PO4h', 'PO6h', 'PO8h', 'PO10h', 'O1h', 'O2h', 'I1h', 'I2h', 'AFp9', 'AFp7', 'AFp5', 'AFp3', 'AFp1', 'AFpz', 'AFp2', 'AFp4', 'AFp6', 'AFp8', 'AFp10', 'AFF9', 'AFF7', 'AFF5', 'AFF3', 'AFF1', 'AFFz', 'AFF2', 'AFF4', 'AFF6', 'AFF8', 'AFF10', 'FFT9', 'FFT7', 'FFC5', 'FFC3', 'FFC1', 'FFCz', 'FFC2', 'FFC4', 'FFC6', 'FFT8', 'FFT10', 'FTT9', 'FTT7', 'FCC5', 'FCC3', 'FCC1', 'FCCz', 'FCC2', 'FCC4', 'FCC6', 'FTT8', 'FTT10', 'TTP9', 'TTP7', 'CCP5', 'CCP3', 'CCP1', 'CCPz', 'CCP2', 'CCP4', 'CCP6', 'TTP8', 'TTP10', 'TPP9', 'TPP7', 'CPP5', 'CPP3', 'CPP1', 'CPPz', 'CPP2', 'CPP4', 'CPP6', 'TPP8', 'TPP10', 'PPO9', 'PPO7', 'PPO5', 'PPO3', 'PPO1', 'PPOz', 'PPO2', 'PPO4', 'PPO6', 'PPO8', 'PPO10', 'POO9', 'POO7', 'POO5', 'POO3', 'POO1', 'POOz', 'POO2', 'POO4', 'POO6', 'POO8', 'POO10', 'OI1', 'OIz', 'OI2', 'T3', 'T5', 'T4', 'T6', 'M1', 'M2', 'A1', 'A2']\r\n\r\nDropping 20 channels from original dataset of 42 to set <DigMontage | 0 extras (headshape), 0 HPIs, 3 fiducials, 343 channels> montage...\r\n['FP1', 'FP2', 'FZ', 'CZ', 'PZ', 'E', 'PG1', 'PG2', 'T1', 'T2', 'ECG1', 'ECG2', 'X9', 'X10', 'DC01', 'DC02', 'DC03', 'DC04', '$A1', '$A2']\r\n```\r\n\r\n\r\n#### Additional information\r\n```\r\nPlatform:      macOS-10.15.7-x86_64-i386-64bit\r\nPython:        3.8.5 (default, Jul 21 2020, 10:48:26)  [Clang 11.0.3 (clang-1103.0.32.62)]\r\nExecutable:    /Users/adam2392/Documents/ezscalp/.venv/bin/python\r\nCPU:           i386: 8 cores\r\nMemory:        16.0 GB\r\n\r\nmne:           0.21.0\r\nnumpy:         1.19.2 {blas=openblas, lapack=openblas}\r\nscipy:         1.5.2\r\nmatplotlib:    3.3.2 {backend=TkAgg}\r\n\r\nsklearn:       0.23.2\r\nnumba:         Not found\r\nnibabel:       3.1.1\r\ncupy:          Not found\r\npandas:        1.1.3\r\ndipy:          Not found\r\nmayavi:        Not found\r\npyvista:       0.26.1 {OpenGL 4.1 ATI-3.10.18 via AMD Radeon Pro 560 OpenGL Engine}\r\nvtk:           9.0.1\r\nPyQt5:         5.15.1\r\n```\r\n", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/8378/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8378/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/8375", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8375/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8375/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8375/events", "html_url": "https://github.com/mne-tools/mne-python/issues/8375", "id": 722333806, "node_id": "MDU6SXNzdWU3MjIzMzM4MDY=", "number": 8375, "title": "BUG: CircleCI crashes on full build", "user": {"login": "larsoner", "id": 2365790, "node_id": "MDQ6VXNlcjIzNjU3OTA=", "avatar_url": "https://avatars.githubusercontent.com/u/2365790?v=4", "gravatar_id": "", "url": "https://api.github.com/users/larsoner", "html_url": "https://github.com/larsoner", "followers_url": "https://api.github.com/users/larsoner/followers", "following_url": "https://api.github.com/users/larsoner/following{/other_user}", "gists_url": "https://api.github.com/users/larsoner/gists{/gist_id}", "starred_url": "https://api.github.com/users/larsoner/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/larsoner/subscriptions", "organizations_url": "https://api.github.com/users/larsoner/orgs", "repos_url": "https://api.github.com/users/larsoner/repos", "events_url": "https://api.github.com/users/larsoner/events{/privacy}", "received_events_url": "https://api.github.com/users/larsoner/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2020-10-15T13:24:25Z", "updated_at": "2020-10-22T14:59:47Z", "closed_at": "2020-10-22T14:59:47Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "I guess our source space morphing example uses too much memory (?) because for example:\r\n\r\nhttps://app.circleci.com/pipelines/github/mne-tools/mne-python/4060/workflows/c908299a-3a9e-4e92-9f6b-e09f9ce33fc4/jobs/22741\r\n\r\nIt doesn't look too bad here:\r\n\r\nhttps://mne.tools/dev/auto_examples/forward/sg_execution_times.html\r\n\r\nSo it's also possible it's whatever example immediately follows that one.", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/8375/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8375/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/8370", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8370/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8370/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8370/events", "html_url": "https://github.com/mne-tools/mne-python/issues/8370", "id": 722122131, "node_id": "MDU6SXNzdWU3MjIxMjIxMzE=", "number": 8370, "title": "\"Sorted by RT\" erpimage in examples clearly isn't sorted by RT", "user": {"login": "jona-sassenhagen", "id": 4321826, "node_id": "MDQ6VXNlcjQzMjE4MjY=", "avatar_url": "https://avatars.githubusercontent.com/u/4321826?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jona-sassenhagen", "html_url": "https://github.com/jona-sassenhagen", "followers_url": "https://api.github.com/users/jona-sassenhagen/followers", "following_url": "https://api.github.com/users/jona-sassenhagen/following{/other_user}", "gists_url": "https://api.github.com/users/jona-sassenhagen/gists{/gist_id}", "starred_url": "https://api.github.com/users/jona-sassenhagen/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jona-sassenhagen/subscriptions", "organizations_url": "https://api.github.com/users/jona-sassenhagen/orgs", "repos_url": "https://api.github.com/users/jona-sassenhagen/repos", "events_url": "https://api.github.com/users/jona-sassenhagen/events{/privacy}", "received_events_url": "https://api.github.com/users/jona-sassenhagen/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2020-10-15T08:35:10Z", "updated_at": "2020-10-15T19:36:24Z", "closed_at": "2020-10-15T19:36:24Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "<img width=\"1010\" alt=\"Screenshot 2020-10-15 at 10 34 04\" src=\"https://user-images.githubusercontent.com/4321826/96098149-14cf8f00-0ed2-11eb-96e0-85a1db0f9d99.png\">\r\n\r\nThis has been broken since 0.18: https://mne.tools/0.18/auto_examples/visualization/plot_roi_erpimage_by_rt.html#sphx-glr-auto-examples-visualization-plot-roi-erpimage-by-rt-py", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/8370/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8370/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/8341", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8341/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8341/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8341/events", "html_url": "https://github.com/mne-tools/mne-python/pull/8341", "id": 714662276, "node_id": "MDExOlB1bGxSZXF1ZXN0NDk3NzA3MjYy", "number": 8341, "title": "MRG, BUG: Fix line color in ICA.plot_overlay", "user": {"login": "hoechenberger", "id": 2046265, "node_id": "MDQ6VXNlcjIwNDYyNjU=", "avatar_url": "https://avatars.githubusercontent.com/u/2046265?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hoechenberger", "html_url": "https://github.com/hoechenberger", "followers_url": "https://api.github.com/users/hoechenberger/followers", "following_url": "https://api.github.com/users/hoechenberger/following{/other_user}", "gists_url": "https://api.github.com/users/hoechenberger/gists{/gist_id}", "starred_url": "https://api.github.com/users/hoechenberger/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hoechenberger/subscriptions", "organizations_url": "https://api.github.com/users/hoechenberger/orgs", "repos_url": "https://api.github.com/users/hoechenberger/repos", "events_url": "https://api.github.com/users/hoechenberger/events{/privacy}", "received_events_url": "https://api.github.com/users/hoechenberger/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}, {"id": 1290799321, "node_id": "MDU6TGFiZWwxMjkwNzk5MzIx", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/VIZ", "name": "VIZ", "color": "22e861", "default": false, "description": ""}, {"id": 1946100293, "node_id": "MDU6TGFiZWwxOTQ2MTAwMjkz", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/backported", "name": "backported", "color": "ae55db", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-10-05T09:07:55Z", "updated_at": "2020-10-05T12:17:59Z", "closed_at": "2020-10-05T12:09:09Z", "author_association": "MEMBER", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/mne-tools/mne-python/pulls/8341", "html_url": "https://github.com/mne-tools/mne-python/pull/8341", "diff_url": "https://github.com/mne-tools/mne-python/pull/8341.diff", "patch_url": "https://github.com/mne-tools/mne-python/pull/8341.patch", "merged_at": "2020-10-05T12:09:09Z"}, "body": "`ICA.plot_overlay()` didn't seem to work on my system with latest Matplotlib anymore (macOS, both the default and Qt5Agg backends). I would only see black traces, instead of red and black. Debugging showed that changig the colors of lines in a figure (in this case, from black to read) that has\r\nbeen `show()`n was somehow part of the problem. Now we only `show()` once all plotting operations are done (We call `plt_show(show)` at the end of the plotting function), and this now works with the default macOS and the Qt5Agg backends for me.\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/8341/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8341/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/8327", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8327/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8327/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8327/events", "html_url": "https://github.com/mne-tools/mne-python/issues/8327", "id": 712621548, "node_id": "MDU6SXNzdWU3MTI2MjE1NDg=", "number": 8327, "title": "ICA should not touch init parameter n_pca_components during fit", "user": {"login": "hoechenberger", "id": 2046265, "node_id": "MDQ6VXNlcjIwNDYyNjU=", "avatar_url": "https://avatars.githubusercontent.com/u/2046265?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hoechenberger", "html_url": "https://github.com/hoechenberger", "followers_url": "https://api.github.com/users/hoechenberger/followers", "following_url": "https://api.github.com/users/hoechenberger/following{/other_user}", "gists_url": "https://api.github.com/users/hoechenberger/gists{/gist_id}", "starred_url": "https://api.github.com/users/hoechenberger/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hoechenberger/subscriptions", "organizations_url": "https://api.github.com/users/hoechenberger/orgs", "repos_url": "https://api.github.com/users/hoechenberger/repos", "events_url": "https://api.github.com/users/hoechenberger/events{/privacy}", "received_events_url": "https://api.github.com/users/hoechenberger/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}, {"id": 586377763, "node_id": "MDU6TGFiZWw1ODYzNzc3NjM=", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/API", "name": "API", "color": "d93f0b", "default": false, "description": null}, {"id": 2394158844, "node_id": "MDU6TGFiZWwyMzk0MTU4ODQ0", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/ICA", "name": "ICA", "color": "7d40f7", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-10-01T08:29:52Z", "updated_at": "2020-10-12T13:45:58Z", "closed_at": "2020-10-12T13:45:58Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "This is what currently happens in `ICA._fit()`, which is invoked by `ICA.fit()`:\r\nhttps://github.com/mne-tools/mne-python/blob/4270859dc3ba2208bb3eed4f73403b5de26125b8/mne/preprocessing/ica.py#L737-L739\r\n\r\nWe should have `ICA.n_pca_components_` instead (currently doesn't exist).", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/8327/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8327/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/8168", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8168/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8168/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8168/events", "html_url": "https://github.com/mne-tools/mne-python/issues/8168", "id": 687356242, "node_id": "MDU6SXNzdWU2ODczNTYyNDI=", "number": 8168, "title": "Report.parse_folder() does not support Path", "user": {"login": "hoechenberger", "id": 2046265, "node_id": "MDQ6VXNlcjIwNDYyNjU=", "avatar_url": "https://avatars.githubusercontent.com/u/2046265?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hoechenberger", "html_url": "https://github.com/hoechenberger", "followers_url": "https://api.github.com/users/hoechenberger/followers", "following_url": "https://api.github.com/users/hoechenberger/following{/other_user}", "gists_url": "https://api.github.com/users/hoechenberger/gists{/gist_id}", "starred_url": "https://api.github.com/users/hoechenberger/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hoechenberger/subscriptions", "organizations_url": "https://api.github.com/users/hoechenberger/orgs", "repos_url": "https://api.github.com/users/hoechenberger/repos", "events_url": "https://api.github.com/users/hoechenberger/events{/privacy}", "received_events_url": "https://api.github.com/users/hoechenberger/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}, {"id": 77061445, "node_id": "MDU6TGFiZWw3NzA2MTQ0NQ==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/EASY", "name": "EASY", "color": "2be2d6", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2020-08-27T15:54:25Z", "updated_at": "2020-08-27T20:08:12Z", "closed_at": "2020-08-27T20:08:12Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "\r\n#### Describe the bug\r\n`Report.parse_folder()` does doesn't handle `pathlib.Path` input correctly, while other MNE functions do.\r\n\r\n#### Steps to reproduce\r\n```python\r\nimport pathlib\r\nimport mne\r\n\r\np = pathlib.Path('foo')\r\nreport = mne.Report()\r\nreport.parse_folder(p)\r\n```\r\n\r\n#### Expected results\r\n```\r\nEmbedding : jquery.js\r\nEmbedding : jquery-ui.min.js\r\nEmbedding : bootstrap.min.js\r\nEmbedding : jquery-ui.min.css\r\nEmbedding : bootstrap.min.css\r\nIterating over 0 potential files (this may take some time)\r\n```\r\n\r\n#### Actual results\r\n```python\r\nEmbedding : jquery.js\r\nEmbedding : jquery-ui.min.js\r\nEmbedding : bootstrap.min.js\r\nEmbedding : jquery-ui.min.css\r\nEmbedding : bootstrap.min.css\r\n---------------------------------------------------------------------------\r\nTypeError                                 Traceback (most recent call last)\r\nUntitled-1 in \r\n      5 p = pathlib.Path('foo')\r\n      6 report = mne.Report()\r\n----> 7 report.parse_folder(p)\r\n\r\n in parse_folder(self, data_path, pattern, n_jobs, mri_decim, sort_sections, on_error, image_format, render_bem, verbose)\r\n\r\n~/Development/mne-python/mne/report.py in parse_folder(self, data_path, pattern, n_jobs, mri_decim, sort_sections, on_error, image_format, render_bem, verbose)\r\n   1445 \r\n   1446         if self.title is None:\r\n-> 1447             self.title = 'MNE Report for ...%s' % self.data_path[-20:]\r\n   1448 \r\n   1449         if not isinstance(pattern, (list, tuple)):\r\n\r\nTypeError: 'PosixPath' object is not subscriptable\r\n```", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/8168/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8168/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/8130", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8130/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8130/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8130/events", "html_url": "https://github.com/mne-tools/mne-python/issues/8130", "id": 681761658, "node_id": "MDU6SXNzdWU2ODE3NjE2NTg=", "number": 8130, "title": "anonymize also sex and hand", "user": {"login": "agramfort", "id": 161052, "node_id": "MDQ6VXNlcjE2MTA1Mg==", "avatar_url": "https://avatars.githubusercontent.com/u/161052?v=4", "gravatar_id": "", "url": "https://api.github.com/users/agramfort", "html_url": "https://github.com/agramfort", "followers_url": "https://api.github.com/users/agramfort/followers", "following_url": "https://api.github.com/users/agramfort/following{/other_user}", "gists_url": "https://api.github.com/users/agramfort/gists{/gist_id}", "starred_url": "https://api.github.com/users/agramfort/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/agramfort/subscriptions", "organizations_url": "https://api.github.com/users/agramfort/orgs", "repos_url": "https://api.github.com/users/agramfort/repos", "events_url": "https://api.github.com/users/agramfort/events{/privacy}", "received_events_url": "https://api.github.com/users/agramfort/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}, {"id": 77061445, "node_id": "MDU6TGFiZWw3NzA2MTQ0NQ==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/EASY", "name": "EASY", "color": "2be2d6", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": {"login": "Falach", "id": 15079001, "node_id": "MDQ6VXNlcjE1MDc5MDAx", "avatar_url": "https://avatars.githubusercontent.com/u/15079001?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Falach", "html_url": "https://github.com/Falach", "followers_url": "https://api.github.com/users/Falach/followers", "following_url": "https://api.github.com/users/Falach/following{/other_user}", "gists_url": "https://api.github.com/users/Falach/gists{/gist_id}", "starred_url": "https://api.github.com/users/Falach/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Falach/subscriptions", "organizations_url": "https://api.github.com/users/Falach/orgs", "repos_url": "https://api.github.com/users/Falach/repos", "events_url": "https://api.github.com/users/Falach/events{/privacy}", "received_events_url": "https://api.github.com/users/Falach/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "Falach", "id": 15079001, "node_id": "MDQ6VXNlcjE1MDc5MDAx", "avatar_url": "https://avatars.githubusercontent.com/u/15079001?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Falach", "html_url": "https://github.com/Falach", "followers_url": "https://api.github.com/users/Falach/followers", "following_url": "https://api.github.com/users/Falach/following{/other_user}", "gists_url": "https://api.github.com/users/Falach/gists{/gist_id}", "starred_url": "https://api.github.com/users/Falach/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Falach/subscriptions", "organizations_url": "https://api.github.com/users/Falach/orgs", "repos_url": "https://api.github.com/users/Falach/repos", "events_url": "https://api.github.com/users/Falach/events{/privacy}", "received_events_url": "https://api.github.com/users/Falach/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/mne-tools/mne-python/milestones/19", "html_url": "https://github.com/mne-tools/mne-python/milestone/19", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/milestones/19/labels", "id": 6168664, "node_id": "MDk6TWlsZXN0b25lNjE2ODY2NA==", "number": 19, "title": "0.23", "description": "", "creator": {"login": "larsoner", "id": 2365790, "node_id": "MDQ6VXNlcjIzNjU3OTA=", "avatar_url": "https://avatars.githubusercontent.com/u/2365790?v=4", "gravatar_id": "", "url": "https://api.github.com/users/larsoner", "html_url": "https://github.com/larsoner", "followers_url": "https://api.github.com/users/larsoner/followers", "following_url": "https://api.github.com/users/larsoner/following{/other_user}", "gists_url": "https://api.github.com/users/larsoner/gists{/gist_id}", "starred_url": "https://api.github.com/users/larsoner/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/larsoner/subscriptions", "organizations_url": "https://api.github.com/users/larsoner/orgs", "repos_url": "https://api.github.com/users/larsoner/repos", "events_url": "https://api.github.com/users/larsoner/events{/privacy}", "received_events_url": "https://api.github.com/users/larsoner/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 58, "state": "closed", "created_at": "2020-12-01T18:47:16Z", "updated_at": "2021-04-27T19:32:01Z", "due_on": "2021-05-15T07:00:00Z", "closed_at": "2021-04-27T19:32:01Z"}, "comments": 10, "created_at": "2020-08-19T11:21:33Z", "updated_at": "2021-03-18T13:37:13Z", "closed_at": "2021-03-18T13:37:13Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "anonymize with keep_his False keeps what's in: `raw.info['subject_info']`\r\nwhich contains hand and sex for example.\r\n\r\nShould we remove these info with keep_his=False or should we introduce another parameter?", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/8130/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8130/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/8115", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8115/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8115/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8115/events", "html_url": "https://github.com/mne-tools/mne-python/issues/8115", "id": 676975469, "node_id": "MDU6SXNzdWU2NzY5NzU0Njk=", "number": 8115, "title": "BUG: PyVista backend doesn't properly show axes in plot_alignment", "user": {"login": "larsoner", "id": 2365790, "node_id": "MDQ6VXNlcjIzNjU3OTA=", "avatar_url": "https://avatars.githubusercontent.com/u/2365790?v=4", "gravatar_id": "", "url": "https://api.github.com/users/larsoner", "html_url": "https://github.com/larsoner", "followers_url": "https://api.github.com/users/larsoner/followers", "following_url": "https://api.github.com/users/larsoner/following{/other_user}", "gists_url": "https://api.github.com/users/larsoner/gists{/gist_id}", "starred_url": "https://api.github.com/users/larsoner/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/larsoner/subscriptions", "organizations_url": "https://api.github.com/users/larsoner/orgs", "repos_url": "https://api.github.com/users/larsoner/repos", "events_url": "https://api.github.com/users/larsoner/events{/privacy}", "received_events_url": "https://api.github.com/users/larsoner/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/mne-tools/mne-python/milestones/17", "html_url": "https://github.com/mne-tools/mne-python/milestone/17", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/milestones/17/labels", "id": 5167981, "node_id": "MDk6TWlsZXN0b25lNTE2Nzk4MQ==", "number": 17, "title": "0.21", "description": "", "creator": {"login": "larsoner", "id": 2365790, "node_id": "MDQ6VXNlcjIzNjU3OTA=", "avatar_url": "https://avatars.githubusercontent.com/u/2365790?v=4", "gravatar_id": "", "url": "https://api.github.com/users/larsoner", "html_url": "https://github.com/larsoner", "followers_url": "https://api.github.com/users/larsoner/followers", "following_url": "https://api.github.com/users/larsoner/following{/other_user}", "gists_url": "https://api.github.com/users/larsoner/gists{/gist_id}", "starred_url": "https://api.github.com/users/larsoner/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/larsoner/subscriptions", "organizations_url": "https://api.github.com/users/larsoner/orgs", "repos_url": "https://api.github.com/users/larsoner/repos", "events_url": "https://api.github.com/users/larsoner/events{/privacy}", "received_events_url": "https://api.github.com/users/larsoner/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 133, "state": "closed", "created_at": "2020-03-04T15:04:16Z", "updated_at": "2020-09-24T15:54:34Z", "due_on": "2020-09-15T07:00:00Z", "closed_at": "2020-09-24T15:54:34Z"}, "comments": 1, "created_at": "2020-08-11T15:30:40Z", "updated_at": "2020-08-17T11:15:14Z", "closed_at": "2020-08-17T11:15:14Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "```\r\nimport mne\r\nfname = mne.datasets.sample.data_path() + '/MEG/sample/sample_audvis_raw.fif'\r\nraw = mne.io.read_raw_fif(fname)\r\nwith mne.viz.use_3d_backend('pyvista'):\r\n    mne.viz.plot_alignment(raw.info, show_axes=True, eeg=False, surfaces=[])\r\n```\r\nProduces:\r\n\r\n![Screenshot from 2020-08-11 11-28-25](https://user-images.githubusercontent.com/2365790/89916733-f8f3f800-dbc5-11ea-9b72-d5ece4e58fa2.png)\r\n\r\nThe axes arrows are wrong, it should look like they do for the `mayavi` backend:\r\n\r\n![Screenshot from 2020-08-11 11-28-37](https://user-images.githubusercontent.com/2365790/89916782-08734100-dbc6-11ea-9a3d-72bc06e4eef1.png)\r\n\r\n@GuillaumeFavelier can you look?\r\n", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/8115/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8115/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/8048", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8048/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8048/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8048/events", "html_url": "https://github.com/mne-tools/mne-python/issues/8048", "id": 664151155, "node_id": "MDU6SXNzdWU2NjQxNTExNTU=", "number": 8048, "title": "BUG: pyvista error when ploting stc without hemi data", "user": {"login": "bloyl", "id": 5585821, "node_id": "MDQ6VXNlcjU1ODU4MjE=", "avatar_url": "https://avatars.githubusercontent.com/u/5585821?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bloyl", "html_url": "https://github.com/bloyl", "followers_url": "https://api.github.com/users/bloyl/followers", "following_url": "https://api.github.com/users/bloyl/following{/other_user}", "gists_url": "https://api.github.com/users/bloyl/gists{/gist_id}", "starred_url": "https://api.github.com/users/bloyl/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bloyl/subscriptions", "organizations_url": "https://api.github.com/users/bloyl/orgs", "repos_url": "https://api.github.com/users/bloyl/repos", "events_url": "https://api.github.com/users/bloyl/events{/privacy}", "received_events_url": "https://api.github.com/users/bloyl/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}, {"id": 1290799321, "node_id": "MDU6TGFiZWwxMjkwNzk5MzIx", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/VIZ", "name": "VIZ", "color": "22e861", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-07-23T01:48:19Z", "updated_at": "2020-07-23T12:25:39Z", "closed_at": "2020-07-23T12:25:39Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "I have a pipeline where i compute some scalars on a set of labels which I map back to an `stc` for visualization using `stc = mne.labels_to_stc(labels, vals)`.\r\n\r\n`stc.plot(...)` works with mayavi but will now fail with pyvista with the following error \r\n\r\n> ~/Projects/mne-python/mne-python-devel/mne/viz/_brain/_brain.py in set_time_point(self, time_idx)\r\n>    1138 \r\n>    1139                 # interpolate in space\r\n> -> 1140                 smooth_mat = hemi_data['smooth_mat']\r\n>    1141                 if smooth_mat is not None:\r\n>    1142                     act_data = smooth_mat.dot(act_data)\r\n> \r\n> KeyError: 'smooth_mat'\r\n\r\nI think this is caused by some hemisphere checks where `hemi_data['smooth_mat']` is generated.\r\n\r\nTo replicate the issue just run `/examples/connectivity/plot_mne_inverse_envelope_correlation.py` using the pyvista backend and commenting out the following lines.\r\nhttps://github.com/mne-tools/mne-python/blob/607fb4613fb5a80dd225132a4a53fe43b8fde0fb/examples/connectivity/plot_mne_inverse_envelope_correlation.py#L95-L96\r\n\r\nI'm not sure if this is a bug in `mne.labels_to_stc` not setting something it should or a `_brain` bug or both.", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/8048/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8048/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/8025", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8025/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8025/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8025/events", "html_url": "https://github.com/mne-tools/mne-python/issues/8025", "id": 659593982, "node_id": "MDU6SXNzdWU2NTk1OTM5ODI=", "number": 8025, "title": "BUG: montage.plot mismatch error when no data object is involved", "user": {"login": "sappelhoff", "id": 9084751, "node_id": "MDQ6VXNlcjkwODQ3NTE=", "avatar_url": "https://avatars.githubusercontent.com/u/9084751?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sappelhoff", "html_url": "https://github.com/sappelhoff", "followers_url": "https://api.github.com/users/sappelhoff/followers", "following_url": "https://api.github.com/users/sappelhoff/following{/other_user}", "gists_url": "https://api.github.com/users/sappelhoff/gists{/gist_id}", "starred_url": "https://api.github.com/users/sappelhoff/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sappelhoff/subscriptions", "organizations_url": "https://api.github.com/users/sappelhoff/orgs", "repos_url": "https://api.github.com/users/sappelhoff/repos", "events_url": "https://api.github.com/users/sappelhoff/events{/privacy}", "received_events_url": "https://api.github.com/users/sappelhoff/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/mne-tools/mne-python/milestones/17", "html_url": "https://github.com/mne-tools/mne-python/milestone/17", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/milestones/17/labels", "id": 5167981, "node_id": "MDk6TWlsZXN0b25lNTE2Nzk4MQ==", "number": 17, "title": "0.21", "description": "", "creator": {"login": "larsoner", "id": 2365790, "node_id": "MDQ6VXNlcjIzNjU3OTA=", "avatar_url": "https://avatars.githubusercontent.com/u/2365790?v=4", "gravatar_id": "", "url": "https://api.github.com/users/larsoner", "html_url": "https://github.com/larsoner", "followers_url": "https://api.github.com/users/larsoner/followers", "following_url": "https://api.github.com/users/larsoner/following{/other_user}", "gists_url": "https://api.github.com/users/larsoner/gists{/gist_id}", "starred_url": "https://api.github.com/users/larsoner/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/larsoner/subscriptions", "organizations_url": "https://api.github.com/users/larsoner/orgs", "repos_url": "https://api.github.com/users/larsoner/repos", "events_url": "https://api.github.com/users/larsoner/events{/privacy}", "received_events_url": "https://api.github.com/users/larsoner/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 133, "state": "closed", "created_at": "2020-03-04T15:04:16Z", "updated_at": "2020-09-24T15:54:34Z", "due_on": "2020-09-15T07:00:00Z", "closed_at": "2020-09-24T15:54:34Z"}, "comments": 2, "created_at": "2020-07-17T20:07:37Z", "updated_at": "2020-09-01T13:28:13Z", "closed_at": "2020-09-01T13:28:13Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "First discussed in this [gitter thread](https://gitter.im/mne-tools/mne-python?at=5f115f6aa874ff08d27f229d).\r\n\r\n**Show the bug (MNE master):**\r\n\r\n```Python\r\nimport os.path as op                                                    \r\nimport mne                                                              \r\n\r\ndatapath = mne.datasets.testing.data_path()                             \r\nmontage_fname = op.join(datapath, 'montage', 'captrak_coords.bvct')      \r\nmontage = mne.channels.read_dig_captrak(montage_fname)                  \r\nmontage.plot()                                                          \r\n```\r\n\r\n**Expected behavior**\r\n\r\n... it should plot the montage\r\n\r\n\r\n\r\n**Actual behavior**\r\n\r\nclick details.\r\n\r\n<details>\r\n\r\n```\r\nValueError                                Traceback (most recent call last)\r\n<ipython-input-7-b9409427730c> in <module>\r\n----> 1 montage.plot()\r\n\r\n~/miniconda3/envs/sp/lib/python3.6/site-packages/mne/channels/montage.py in plot(self, scale_factor, show_names, kind, show, sphere)\r\n    192         return plot_montage(self, scale_factor=scale_factor,\r\n    193                             show_names=show_names, kind=kind, show=show,\r\n--> 194                             sphere=sphere)\r\n    195 \r\n    196     def save(self, fname):\r\n\r\n<decorator-gen-141> in plot_montage(montage, scale_factor, show_names, kind, show, sphere, verbose)\r\n\r\n~/miniconda3/envs/sp/lib/python3.6/site-packages/mne/viz/montage.py in plot_montage(montage, scale_factor, show_names, kind, show, sphere, verbose)\r\n     69     info = create_info(ch_names, sfreq=256, ch_types=\"eeg\")\r\n     70     RawArray(np.zeros((len(ch_names), 1)), info,\r\n---> 71              copy=None).set_montage(montage)\r\n     72     fig = plot_sensors(info, kind=kind, show_names=show_names, show=show,\r\n     73                        title=title, sphere=sphere)\r\n\r\n<decorator-gen-20> in set_montage(self, montage, raise_if_subset, match_case, verbose)\r\n\r\n~/miniconda3/envs/sp/lib/python3.6/site-packages/mne/io/meas_info.py in set_montage(self, montage, raise_if_subset, match_case, verbose)\r\n    188         from ..channels.montage import _set_montage\r\n    189         info = self if isinstance(self, Info) else self.info\r\n--> 190         _set_montage(info, montage, raise_if_subset, match_case)\r\n    191         return self\r\n    192 \r\n\r\n~/miniconda3/envs/sp/lib/python3.6/site-packages/mne/channels/montage.py in _set_montage(info, montage, raise_if_subset, match_case)\r\n    736                    (len(not_in_montage), _pl(not_in_montage), not_in_montage))\r\n    737             if raise_if_subset:\r\n--> 738                 raise ValueError(msg)\r\n    739             else:\r\n    740                 warn(msg)\r\n\r\nValueError: DigMontage is a only a subset of info. There are 1 channel position not present in the DigMontage. The required channels are: ['REF']\r\n```\r\n\r\n</details>\r\n\r\n**Solution**\r\n\r\nDo not remove `REF` until a `X.set_montage(montage)` call.\r\n\r\nAlso: Consider removing `GND`/`Gnd`/`Ground` at that stage.\r\n\r\nsee: https://github.com/mne-tools/mne-python/blob/bd6f426aa564522b21470ab7510b74a226cc507b/mne/channels/montage.py#L690-L693", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/8025/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8025/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/8013", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8013/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8013/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8013/events", "html_url": "https://github.com/mne-tools/mne-python/issues/8013", "id": 657391629, "node_id": "MDU6SXNzdWU2NTczOTE2Mjk=", "number": 8013, "title": "BUG: TFR.plot misc issues", "user": {"login": "sappelhoff", "id": 9084751, "node_id": "MDQ6VXNlcjkwODQ3NTE=", "avatar_url": "https://avatars.githubusercontent.com/u/9084751?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sappelhoff", "html_url": "https://github.com/sappelhoff", "followers_url": "https://api.github.com/users/sappelhoff/followers", "following_url": "https://api.github.com/users/sappelhoff/following{/other_user}", "gists_url": "https://api.github.com/users/sappelhoff/gists{/gist_id}", "starred_url": "https://api.github.com/users/sappelhoff/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sappelhoff/subscriptions", "organizations_url": "https://api.github.com/users/sappelhoff/orgs", "repos_url": "https://api.github.com/users/sappelhoff/repos", "events_url": "https://api.github.com/users/sappelhoff/events{/privacy}", "received_events_url": "https://api.github.com/users/sappelhoff/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}, {"id": 559859326, "node_id": "MDU6TGFiZWw1NTk4NTkzMjY=", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/MEDIUM", "name": "MEDIUM", "color": "d93f0b", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "eort", "id": 8819465, "node_id": "MDQ6VXNlcjg4MTk0NjU=", "avatar_url": "https://avatars.githubusercontent.com/u/8819465?v=4", "gravatar_id": "", "url": "https://api.github.com/users/eort", "html_url": "https://github.com/eort", "followers_url": "https://api.github.com/users/eort/followers", "following_url": "https://api.github.com/users/eort/following{/other_user}", "gists_url": "https://api.github.com/users/eort/gists{/gist_id}", "starred_url": "https://api.github.com/users/eort/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/eort/subscriptions", "organizations_url": "https://api.github.com/users/eort/orgs", "repos_url": "https://api.github.com/users/eort/repos", "events_url": "https://api.github.com/users/eort/events{/privacy}", "received_events_url": "https://api.github.com/users/eort/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "eort", "id": 8819465, "node_id": "MDQ6VXNlcjg4MTk0NjU=", "avatar_url": "https://avatars.githubusercontent.com/u/8819465?v=4", "gravatar_id": "", "url": "https://api.github.com/users/eort", "html_url": "https://github.com/eort", "followers_url": "https://api.github.com/users/eort/followers", "following_url": "https://api.github.com/users/eort/following{/other_user}", "gists_url": "https://api.github.com/users/eort/gists{/gist_id}", "starred_url": "https://api.github.com/users/eort/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/eort/subscriptions", "organizations_url": "https://api.github.com/users/eort/orgs", "repos_url": "https://api.github.com/users/eort/repos", "events_url": "https://api.github.com/users/eort/events{/privacy}", "received_events_url": "https://api.github.com/users/eort/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 10, "created_at": "2020-07-15T14:23:27Z", "updated_at": "2021-04-26T16:37:49Z", "closed_at": "2021-04-26T16:37:49Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "I am experiencing several issues with the `.plot` method of TFR objects. I suspect that there are several things off, but for now I found this obvious bug:\r\n\r\nThese are valid inputs for the `title` parameter:\r\n\r\nhttps://github.com/mne-tools/mne-python/blob/638847ea5539be32919b6ac4dd85ef8c4c3b79aa/mne/time_frequency/tfr.py#L1136-L1139\r\n\r\nYet in the code, we have this logic:\r\n\r\nhttps://github.com/mne-tools/mne-python/blob/638847ea5539be32919b6ac4dd85ef8c4c3b79aa/mne/time_frequency/tfr.py#L1269-L1278\r\n\r\nHence, when I pass `title='auto'`, my figure will have the title `auto`\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/8013/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/8013/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/7993", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/7993/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/7993/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/7993/events", "html_url": "https://github.com/mne-tools/mne-python/issues/7993", "id": 654906806, "node_id": "MDU6SXNzdWU2NTQ5MDY4MDY=", "number": 7993, "title": "plot_projs_topomap() of data with EEG projection creates \"EEG-style\" topoplots even for MEG data", "user": {"login": "hoechenberger", "id": 2046265, "node_id": "MDQ6VXNlcjIwNDYyNjU=", "avatar_url": "https://avatars.githubusercontent.com/u/2046265?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hoechenberger", "html_url": "https://github.com/hoechenberger", "followers_url": "https://api.github.com/users/hoechenberger/followers", "following_url": "https://api.github.com/users/hoechenberger/following{/other_user}", "gists_url": "https://api.github.com/users/hoechenberger/gists{/gist_id}", "starred_url": "https://api.github.com/users/hoechenberger/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hoechenberger/subscriptions", "organizations_url": "https://api.github.com/users/hoechenberger/orgs", "repos_url": "https://api.github.com/users/hoechenberger/repos", "events_url": "https://api.github.com/users/hoechenberger/events{/privacy}", "received_events_url": "https://api.github.com/users/hoechenberger/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}, {"id": 1290799321, "node_id": "MDU6TGFiZWwxMjkwNzk5MzIx", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/VIZ", "name": "VIZ", "color": "22e861", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/mne-tools/mne-python/milestones/17", "html_url": "https://github.com/mne-tools/mne-python/milestone/17", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/milestones/17/labels", "id": 5167981, "node_id": "MDk6TWlsZXN0b25lNTE2Nzk4MQ==", "number": 17, "title": "0.21", "description": "", "creator": {"login": "larsoner", "id": 2365790, "node_id": "MDQ6VXNlcjIzNjU3OTA=", "avatar_url": "https://avatars.githubusercontent.com/u/2365790?v=4", "gravatar_id": "", "url": "https://api.github.com/users/larsoner", "html_url": "https://github.com/larsoner", "followers_url": "https://api.github.com/users/larsoner/followers", "following_url": "https://api.github.com/users/larsoner/following{/other_user}", "gists_url": "https://api.github.com/users/larsoner/gists{/gist_id}", "starred_url": "https://api.github.com/users/larsoner/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/larsoner/subscriptions", "organizations_url": "https://api.github.com/users/larsoner/orgs", "repos_url": "https://api.github.com/users/larsoner/repos", "events_url": "https://api.github.com/users/larsoner/events{/privacy}", "received_events_url": "https://api.github.com/users/larsoner/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 133, "state": "closed", "created_at": "2020-03-04T15:04:16Z", "updated_at": "2020-09-24T15:54:34Z", "due_on": "2020-09-15T07:00:00Z", "closed_at": "2020-09-24T15:54:34Z"}, "comments": 2, "created_at": "2020-07-10T16:47:49Z", "updated_at": "2020-09-02T20:13:26Z", "closed_at": "2020-09-02T20:13:26Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "#### Describe the bug\r\nPlotting SSP projectors via `Raw.plot_projs_topomap()`, we noticed that -- in some situations -- the visualized MEG fields didn't look quite right, i.e., looked like circular EEG topomaps instead like the expected \"helmet-shaped\" topomaps. Turns out, this only happened when among `info['projs']` was also an EEG average reference projector.\r\n\r\n#### Steps to reproduce\r\n```python\r\nimport os.path as op\r\nimport mne\r\nfrom mne.datasets import sample\r\n\r\ndata_path = sample.data_path()\r\nraw_fname = data_path + '/MEG/sample/sample_audvis_filt-0-40_raw.fif'\r\nraw = mne.io.read_raw_fif(raw_fname, preload=True)\r\n\r\nraw.copy().set_eeg_reference(projection=True).plot_projs_topomap()  # Add EEG avg ref projector\r\nraw.copy().set_eeg_reference(projection=False).plot_projs_topomap()  # No EEG avg ref projector\r\n```\r\n\r\n#### Expected results\r\nMEG topomap fields should follow the MEG helmet, and EEG fields should be circular.\r\n\r\n#### Actual results\r\n**With EEG avg ref projector:**\r\n<img width=\"502\" alt=\"Screenshot 2020-07-10 at 18 31 14\" src=\"https://user-images.githubusercontent.com/2046265/87178570-a204b580-c2dd-11ea-95ed-63534e333475.png\">\r\n\r\n**Without EEG avg ref projector:**\r\n<img width=\"697\" alt=\"Screenshot 2020-07-10 at 18 31 21\" src=\"https://user-images.githubusercontent.com/2046265/87178625-b943a300-c2dd-11ea-9c3c-7810ff4c076e.png\">\r\n\r\n\r\ncc @agramfort ", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/7993/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/7993/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/7958", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/7958/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/7958/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/7958/events", "html_url": "https://github.com/mne-tools/mne-python/issues/7958", "id": 650602098, "node_id": "MDU6SXNzdWU2NTA2MDIwOTg=", "number": 7958, "title": "\"reject_tmin\" and \"reject_tmax\" params in Epochs are not applied for \"reject_by_annotation\"", "user": {"login": "sappelhoff", "id": 9084751, "node_id": "MDQ6VXNlcjkwODQ3NTE=", "avatar_url": "https://avatars.githubusercontent.com/u/9084751?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sappelhoff", "html_url": "https://github.com/sappelhoff", "followers_url": "https://api.github.com/users/sappelhoff/followers", "following_url": "https://api.github.com/users/sappelhoff/following{/other_user}", "gists_url": "https://api.github.com/users/sappelhoff/gists{/gist_id}", "starred_url": "https://api.github.com/users/sappelhoff/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sappelhoff/subscriptions", "organizations_url": "https://api.github.com/users/sappelhoff/orgs", "repos_url": "https://api.github.com/users/sappelhoff/repos", "events_url": "https://api.github.com/users/sappelhoff/events{/privacy}", "received_events_url": "https://api.github.com/users/sappelhoff/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}, {"id": 1292410844, "node_id": "MDU6TGFiZWwxMjkyNDEwODQ0", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/Core", "name": "Core", "color": "0052cc", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2020-07-03T13:35:18Z", "updated_at": "2020-07-07T12:54:31Z", "closed_at": "2020-07-07T12:54:31Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "first reported [on gitter](https://gitter.im/mne-tools/mne-python?at=5efdb0046c06cd1bf469ce70)\r\n\r\n#### Describe the bug\r\nThe `reject_tmin` and `reject_tmax` parameters from [`Epochs`](https://mne.tools/dev/generated/mne.Epochs.html?highlight=epochs#mne.Epochs) are not used for the `reject_by_annotation` parameter. But instead only for the `reject` and `flat` parameters.\r\n\r\nLook at [this part in the code](https://github.com/mne-tools/mne-python/blob/517c49612da33491fe4f147588deb00072526874/mne/epochs.py#L2130-L2135).\r\n\r\n#### Steps to reproduce\r\n\r\nMWE:\r\n\r\n```Python\r\n# Create raw data\r\nsfreq = 1000\r\ntimes = np.arange(0, 10, 0.001)\r\nsin = np.sin(times * 10)\r\ncos = np.cos(times * 10)\r\ndata = np.array([sin, cos])\r\nch_types = ['mag', 'grad']\r\nch_names = ['sin', 'cos']\r\ninfo = mne.create_info(ch_names=ch_names, sfreq=sfreq, ch_types=ch_types)\r\nraw = mne.io.RawArray(data, info)\r\n\r\n# We have an event at 2 seconds\r\nevents = np.array([[2000, 0, 1]])\r\n\r\n# There is a bad segment from 1 to 1.5 seconds\r\nonset=[1]\r\nduration=[0.5]\r\ndescription=['BAD']\r\nannots = mne.Annotations(onset, duration, description)\r\n\r\nraw.set_annotations(annots)\r\n\r\n# Create epochs from 1s to 3s, centered on the event at 2s.\r\n# this epoch will be rejected_by_annotation,  because there is an overlap\r\n# with a bad segment (1s to 1.5s)\r\nepochs = mne.Epochs(raw, events, tmin=-1, tmax=1, preload=True, reject_by_annotation=True)\r\nassert len(epochs) == 0\r\n\r\n# Now setting `reject_tmin` so that there is NO overlap ... should not reject\r\n# any epochs ... because bad segment is from 1s to 1.5s ... but epochs \"reject\" window\r\n# is from 1.8s to 3s\r\nepochs = mne.Epochs(raw, events, tmin=-1, tmax=1, reject_tmin=-0.2, preload=True, reject_by_annotation=True)\r\n\r\n# This errors\r\nassert len(epochs) == 1, \"oups!\"\r\n```\r\n\r\n\r\n#### Expected results\r\n`reject_tmin` and `reject_tmax` should have an effect on how `reject_by_annotation` is applied.\r\n\r\nExample: When an epoch from -2s to 3s relative to 0 was formed with `reject_tmin=-0.2`, then that epoch MUST NOT be rejected if there is an overlap with a `BAD` annotation from, say -2s to -1.5s\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/7958/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/7958/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/7939", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/7939/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/7939/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/7939/events", "html_url": "https://github.com/mne-tools/mne-python/issues/7939", "id": 647282171, "node_id": "MDU6SXNzdWU2NDcyODIxNzE=", "number": 7939, "title": "Following the installation instructions for macOS yields an error message", "user": {"login": "hoechenberger", "id": 2046265, "node_id": "MDQ6VXNlcjIwNDYyNjU=", "avatar_url": "https://avatars.githubusercontent.com/u/2046265?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hoechenberger", "html_url": "https://github.com/hoechenberger", "followers_url": "https://api.github.com/users/hoechenberger/followers", "following_url": "https://api.github.com/users/hoechenberger/following{/other_user}", "gists_url": "https://api.github.com/users/hoechenberger/gists{/gist_id}", "starred_url": "https://api.github.com/users/hoechenberger/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hoechenberger/subscriptions", "organizations_url": "https://api.github.com/users/hoechenberger/orgs", "repos_url": "https://api.github.com/users/hoechenberger/repos", "events_url": "https://api.github.com/users/hoechenberger/events{/privacy}", "received_events_url": "https://api.github.com/users/hoechenberger/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 40091538, "node_id": "MDU6TGFiZWw0MDA5MTUzOA==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/DOC", "name": "DOC", "color": "009800", "default": false, "description": null}, {"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "hoechenberger", "id": 2046265, "node_id": "MDQ6VXNlcjIwNDYyNjU=", "avatar_url": "https://avatars.githubusercontent.com/u/2046265?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hoechenberger", "html_url": "https://github.com/hoechenberger", "followers_url": "https://api.github.com/users/hoechenberger/followers", "following_url": "https://api.github.com/users/hoechenberger/following{/other_user}", "gists_url": "https://api.github.com/users/hoechenberger/gists{/gist_id}", "starred_url": "https://api.github.com/users/hoechenberger/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hoechenberger/subscriptions", "organizations_url": "https://api.github.com/users/hoechenberger/orgs", "repos_url": "https://api.github.com/users/hoechenberger/repos", "events_url": "https://api.github.com/users/hoechenberger/events{/privacy}", "received_events_url": "https://api.github.com/users/hoechenberger/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "hoechenberger", "id": 2046265, "node_id": "MDQ6VXNlcjIwNDYyNjU=", "avatar_url": "https://avatars.githubusercontent.com/u/2046265?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hoechenberger", "html_url": "https://github.com/hoechenberger", "followers_url": "https://api.github.com/users/hoechenberger/followers", "following_url": "https://api.github.com/users/hoechenberger/following{/other_user}", "gists_url": "https://api.github.com/users/hoechenberger/gists{/gist_id}", "starred_url": "https://api.github.com/users/hoechenberger/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hoechenberger/subscriptions", "organizations_url": "https://api.github.com/users/hoechenberger/orgs", "repos_url": "https://api.github.com/users/hoechenberger/repos", "events_url": "https://api.github.com/users/hoechenberger/events{/privacy}", "received_events_url": "https://api.github.com/users/hoechenberger/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 22, "created_at": "2020-06-29T11:23:10Z", "updated_at": "2020-06-30T19:59:46Z", "closed_at": "2020-06-30T19:59:46Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "#### Describe the bug\r\nFollowing the installation instructions for macOS  in the development version of the docs produces an error message, not a working MNE-Python installation\r\n\r\n#### Steps to reproduce\r\nDownload the conda environment file from https://raw.githubusercontent.com/mne-tools/mne-python/master/environment.yml\r\n\r\nRun\r\n```bash\r\nconda env create -f environment.yml -n mne-test\r\n```\r\n\r\n#### Expected results\r\nA working environment should be created.\r\n\r\n#### Actual results\r\nInstallation fails due to an unsatisfiable dependency:\r\n```bash\r\nPip subprocess error:\r\nERROR: Could not find a version that satisfies the requirement vtk<8.2 (from -r /private/tmp/condaenv.fkd0fvyw.requirements.txt (line 4)) (from versions: 9.0.0, 9.0.1)\r\nERROR: No matching distribution found for vtk<8.2 (from -r /private/tmp/condaenv.fkd0fvyw.requirements.txt (line 4))\r\n\r\n\r\nCondaEnvException: Pip failed\r\n```\r\n\r\n#### Additional information\r\nThis is due to the fact that `python` is pinned to `>= 3.5` and `vtk` is pinned to `< 8.2` on macOS. This will first install Python 3.8 (via `conda`) and bomb during `pip` install of `vtk`, because the only wheels available for Python 3.8 are for VTK 9.\r\n\r\nVTK was pinned to version 8 on macOS because of some [issues](https://github.com/pyvista/pyvistaqt/pull/16) with version 9.\r\n\r\nSince conda environment files do not support selectors, there are currently only 3 solutions to this problem:\r\n- fix the bugs that keep us from using VTK 9 on macOS\r\n- provide a separate environment file for macOS, which pins Python to < 3.8\r\n- suggest that users install the `conda-forge` package of MNE-Python, as the \"clean\" way to declare system-dependent requirements in conda land is by producing separate packages\r\n\r\ncc @GuillaumeFavelier ", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/7939/reactions", "total_count": 1, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/7939/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/7850", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/7850/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/7850/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/7850/events", "html_url": "https://github.com/mne-tools/mne-python/issues/7850", "id": 627214427, "node_id": "MDU6SXNzdWU2MjcyMTQ0Mjc=", "number": 7850, "title": "viz.plot_sensors() only partially honors axes parameter", "user": {"login": "hoechenberger", "id": 2046265, "node_id": "MDQ6VXNlcjIwNDYyNjU=", "avatar_url": "https://avatars.githubusercontent.com/u/2046265?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hoechenberger", "html_url": "https://github.com/hoechenberger", "followers_url": "https://api.github.com/users/hoechenberger/followers", "following_url": "https://api.github.com/users/hoechenberger/following{/other_user}", "gists_url": "https://api.github.com/users/hoechenberger/gists{/gist_id}", "starred_url": "https://api.github.com/users/hoechenberger/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hoechenberger/subscriptions", "organizations_url": "https://api.github.com/users/hoechenberger/orgs", "repos_url": "https://api.github.com/users/hoechenberger/repos", "events_url": "https://api.github.com/users/hoechenberger/events{/privacy}", "received_events_url": "https://api.github.com/users/hoechenberger/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}, {"id": 1290799321, "node_id": "MDU6TGFiZWwxMjkwNzk5MzIx", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/VIZ", "name": "VIZ", "color": "22e861", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2020-05-29T11:55:35Z", "updated_at": "2020-11-18T14:19:45Z", "closed_at": "2020-11-18T14:19:45Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "#### Describe the bug\r\nI wanted to add sensor alignment plots via `Raw.plot_sensors()` to some subplots of a larger figure. While the sensors **are** getting plotted, I observe some very annoying side effects that imho qualify as bugs.\r\n\r\n#### Steps to reproduce\r\n```python\r\nimport matplotlib.pyplot as plt\r\nimport mne\r\nfrom mne.datasets import sample\r\n\r\ndata_path = sample.data_path()\r\nfname = data_path + '/MEG/sample/sample_audvis_raw.fif'\r\nraw = mne.io.read_raw_fif(fname)\r\n\r\nfig, ax = plt.subplots(2, 2)\r\n\r\nax[0, 0].plot(range(10))\r\nax[0, 0].set_title('Title A')\r\n\r\nax[1, 0].plot(range(10))\r\nax[1, 0].set_title('Title B')\r\n\r\nraw.plot_sensors(ch_type='mag', axes=ax[0, 1])\r\nraw.plot_sensors(ch_type='grad', axes=ax[1, 1])\r\n```\r\n\r\n#### Expected results\r\nAll subplots should appear in their designated axes.\r\n\r\n#### Actual results\r\n![Figure_1](https://user-images.githubusercontent.com/2046265/83256519-d94a5780-a1b2-11ea-9cd2-06f8027d6d8a.png)\r\n\r\n- First sensor plot doesn't have a title\r\n- Second sensor plot's title appears as `suptitle` while it should be an axes title\r\n- The entire figure appears to be truncated at the top, left, and bottom\r\n\r\n\r\n#### Additional information\r\nThe behavior reminds me somewhat of #7595, which has been fixed by @drammock in #7706.\r\n\r\nI'm using Matplotlibs Qt backend on macOS.", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/7850/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/7850/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/7842", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/7842/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/7842/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/7842/events", "html_url": "https://github.com/mne-tools/mne-python/issues/7842", "id": 626271633, "node_id": "MDU6SXNzdWU2MjYyNzE2MzM=", "number": 7842, "title": "Pyvista foreground bug", "user": {"login": "ualsbombe", "id": 17312936, "node_id": "MDQ6VXNlcjE3MzEyOTM2", "avatar_url": "https://avatars.githubusercontent.com/u/17312936?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ualsbombe", "html_url": "https://github.com/ualsbombe", "followers_url": "https://api.github.com/users/ualsbombe/followers", "following_url": "https://api.github.com/users/ualsbombe/following{/other_user}", "gists_url": "https://api.github.com/users/ualsbombe/gists{/gist_id}", "starred_url": "https://api.github.com/users/ualsbombe/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ualsbombe/subscriptions", "organizations_url": "https://api.github.com/users/ualsbombe/orgs", "repos_url": "https://api.github.com/users/ualsbombe/repos", "events_url": "https://api.github.com/users/ualsbombe/events{/privacy}", "received_events_url": "https://api.github.com/users/ualsbombe/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}, {"id": 1290799321, "node_id": "MDU6TGFiZWwxMjkwNzk5MzIx", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/VIZ", "name": "VIZ", "color": "22e861", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2020-05-28T07:09:04Z", "updated_at": "2020-05-28T17:39:18Z", "closed_at": "2020-05-28T17:39:18Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "#### Describe the bug\r\n\u2329Replace this text with a clear and concise description of the bug.\u232a\r\n\r\nWhen changing the background to 'white' and foreground to 'black', text is not formatted accordingly (works as intended in mayavi) when using mne.viz.plot_source_estimates with pyvista\r\n\r\n#### Steps to reproduce\r\n```\r\nimport mne\r\nfrom os.path import join\r\n\r\ndata_path = mne.datasets.sample.data_path()\r\nsubjects_dir = join(data_path, 'subjects')\r\nfilename = 'sample_audvis-meg'\r\nstc = mne.read_source_estimate(join(data_path, 'MEG', 'sample', filename))\r\n\r\n## works as intended\r\n\r\nmne.viz.set_3d_backend('mayavi')\r\nstc.plot('sample', subjects_dir=subjects_dir, background='white',\r\n         foreground='black', figure=1)\r\n\r\n## does not\r\n\r\nmne.viz.set_3d_backend('pyvista')\r\nstc.plot('sample', subjects_dir=subjects_dir, background='white',\r\n         foreground='black', figure=2)\r\n```\r\n\r\n\r\n#### Expected results\r\nThat the numbers for the scale would be written in black, now they are (presumably) written in white\r\n\r\n\r\n#### Actual results\r\nMayavi\r\n![image](https://user-images.githubusercontent.com/17312936/83109776-45995e00-a0c2-11ea-9890-426b48e0a7a2.png)\r\nPyvista\r\n![image](https://user-images.githubusercontent.com/17312936/83109802-4e8a2f80-a0c2-11ea-94e6-c9e5bebf2526.png)\r\n\r\n\r\n\r\n\r\n#### Additional information\r\nmne.sys_info()\r\nPlatform:      Linux-5.3.0-53-generic-x86_64-with-debian-buster-sid\r\nPython:        3.7.6 (default, Jan  8 2020, 19:59:22)  [GCC 7.3.0]\r\nExecutable:    /home/lau/miniconda3/envs/mnedev/bin/python\r\nCPU:           x86_64: 8 cores\r\nMemory:        31.2 GB\r\n\r\nmne:           0.21.dev0\r\nnumpy:         1.18.1 {blas=mkl_rt, lapack=mkl_rt}\r\nscipy:         1.4.1\r\nmatplotlib:    3.1.3 {backend=Qt5Agg}\r\n\r\nsklearn:       0.22.1\r\nnumba:         0.48.0\r\nnibabel:       3.0.2\r\ncupy:          Not found\r\npandas:        1.0.2\r\ndipy:          1.1.1\r\nmayavi:        4.7.1\r\npyvista:       0.24.0\r\nvtk:           8.2.0\r\nPyQt5:         5.9.2\r\n", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/7842/reactions", "total_count": 1, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/7842/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/7837", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/7837/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/7837/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/7837/events", "html_url": "https://github.com/mne-tools/mne-python/issues/7837", "id": 625877870, "node_id": "MDU6SXNzdWU2MjU4Nzc4NzA=", "number": 7837, "title": "Magnetometer positions look odd in PSD plot", "user": {"login": "hoechenberger", "id": 2046265, "node_id": "MDQ6VXNlcjIwNDYyNjU=", "avatar_url": "https://avatars.githubusercontent.com/u/2046265?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hoechenberger", "html_url": "https://github.com/hoechenberger", "followers_url": "https://api.github.com/users/hoechenberger/followers", "following_url": "https://api.github.com/users/hoechenberger/following{/other_user}", "gists_url": "https://api.github.com/users/hoechenberger/gists{/gist_id}", "starred_url": "https://api.github.com/users/hoechenberger/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hoechenberger/subscriptions", "organizations_url": "https://api.github.com/users/hoechenberger/orgs", "repos_url": "https://api.github.com/users/hoechenberger/repos", "events_url": "https://api.github.com/users/hoechenberger/events{/privacy}", "received_events_url": "https://api.github.com/users/hoechenberger/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}, {"id": 1290799321, "node_id": "MDU6TGFiZWwxMjkwNzk5MzIx", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/VIZ", "name": "VIZ", "color": "22e861", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 7, "created_at": "2020-05-27T17:16:19Z", "updated_at": "2020-06-08T17:25:36Z", "closed_at": "2020-06-08T17:25:36Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "#### Steps to reproduce\r\nLet's first visualize the magnetometer channel positions via `Raw.plot_sensors()`:\r\n```python\r\nimport mne\r\nfrom mne.datasets import sample\r\n\r\n\r\ndata_path = sample.data_path()\r\nfname = data_path + '/MEG/sample/sample_audvis_raw.fif'\r\nraw = mne.io.read_raw_fif(fname)\r\nraw.plot_sensors(ch_type='mag')\r\n```\r\nThis produces:\r\n![sensors](https://user-images.githubusercontent.com/2046265/83051600-85bef900-a04e-11ea-9fe5-fbc2be43c365.png)\r\n\r\nLooking good. Now let's plot PSDs of the data.\r\n\r\n```python\r\nraw.plot_psd()\r\n```\r\nResult cropped so it only shows the sensor positions (top to bottom: mag, grad, eeg):\r\n![Figure_1 copy](https://user-images.githubusercontent.com/2046265/83051304-1ea14480-a04e-11ea-8017-51b1b17aa1e8.png)\r\n\r\nThe magnetometer sensor layout looks incorrect, and doesn't match the one produced by `plot_sensors()`. Am I missing something here?\r\n\r\ncc @agramfort ", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/7837/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/7837/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/7715", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/7715/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/7715/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/7715/events", "html_url": "https://github.com/mne-tools/mne-python/issues/7715", "id": 611427190, "node_id": "MDU6SXNzdWU2MTE0MjcxOTA=", "number": 7715, "title": "BUG: VectorSourceEstimate.plot() in v20 does not show the surfaces", "user": {"login": "yh-luo", "id": 29604854, "node_id": "MDQ6VXNlcjI5NjA0ODU0", "avatar_url": "https://avatars.githubusercontent.com/u/29604854?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yh-luo", "html_url": "https://github.com/yh-luo", "followers_url": "https://api.github.com/users/yh-luo/followers", "following_url": "https://api.github.com/users/yh-luo/following{/other_user}", "gists_url": "https://api.github.com/users/yh-luo/gists{/gist_id}", "starred_url": "https://api.github.com/users/yh-luo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yh-luo/subscriptions", "organizations_url": "https://api.github.com/users/yh-luo/orgs", "repos_url": "https://api.github.com/users/yh-luo/repos", "events_url": "https://api.github.com/users/yh-luo/events{/privacy}", "received_events_url": "https://api.github.com/users/yh-luo/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}, {"id": 1290799321, "node_id": "MDU6TGFiZWwxMjkwNzk5MzIx", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/VIZ", "name": "VIZ", "color": "22e861", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 7, "created_at": "2020-05-03T14:33:41Z", "updated_at": "2020-05-04T12:18:41Z", "closed_at": "2020-05-04T12:08:58Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "#### Describe the bug\r\n`VectorSourceEstimate.plot()` is not working properly in v20.\r\n\r\n#### Steps to reproduce\r\nI used the `sample` dataset to compute some `VectorSourceEstimate` files to play around. Trouble shootings in [Advanced setup of MNE-Python](https://mne.tools/stable/install/advanced.html#advanced-setup-of-mne-python) did not fix the problem.\r\n```python\r\nimport os.path as op\r\nimport mne\r\nfrom scripts.config import baseline, meg_dir, subjects_dir\r\n\r\nos.environ[\"SUBJECTS_DIR\"] = subjects_dir\r\nstc_aud = mne.read_source_estimate(\r\n    op.join(meg_dir, 'aud_left_minus_right-grand_average-ave-stc'))\r\nstc_aud.plot(hemi='both', initial_time=0.1)\r\n```\r\n\r\n#### Expected results\r\nIn MNE v19, it works without problems\r\n![mne-19](https://user-images.githubusercontent.com/29604854/80916611-5c32ea80-8d8c-11ea-94d3-b8d36748d327.gif)\r\n\r\n#### Actual results\r\nIn MNE v20, the surfaces disappear after plotting.\r\n![mne-20](https://user-images.githubusercontent.com/29604854/80916637-92706a00-8d8c-11ea-8167-a94a8c2c3bd0.gif)\r\n\r\nThe problem persists in `master`.\r\n\r\n#### Additional information\r\nIf required, I can upload the source estimate file.\r\n\r\n`mne.sys_info`\r\n```\r\nPlatform:      Linux-5.6.8-200.fc31.x86_64-x86_64-with-fedora-31-Thirty_One\r\nPython:        3.7.7 (default, Mar 13 2020, 10:23:39)  [GCC 9.2.1 20190827 (Red Hat 9.2.1-1)]\r\nExecutable:    /home/yuhan/env/mne/bin/python\r\nCPU:           x86_64: 4 cores\r\nMemory:        15.5 GB\r\n\r\nmne:           0.20.3\r\nnumpy:         1.17.3 {blas=openblas, lapack=openblas}\r\nscipy:         1.3.2\r\nmatplotlib:    3.1.1 {backend=Qt5Agg}\r\n\r\nsklearn:       0.21.3\r\nnumba:         0.46.0\r\nnibabel:       2.5.1\r\ncupy:          Not found\r\npandas:        0.25.3\r\ndipy:          1.0.0\r\nmayavi:        4.7.1 {qt_api=pyqt5, PyQt5=5.13.2}\r\npyvista:       0.24.1\r\nvtk:           8.1.2\r\n```", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/7715/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/7715/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/7642", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/7642/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/7642/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/7642/events", "html_url": "https://github.com/mne-tools/mne-python/pull/7642", "id": 603474900, "node_id": "MDExOlB1bGxSZXF1ZXN0NDA2MjUzMTUz", "number": 7642, "title": "[FIX][WIP] Fix handling of complex matrices in DICS beamformer", "user": {"login": "britta-wstnr", "id": 20129119, "node_id": "MDQ6VXNlcjIwMTI5MTE5", "avatar_url": "https://avatars.githubusercontent.com/u/20129119?v=4", "gravatar_id": "", "url": "https://api.github.com/users/britta-wstnr", "html_url": "https://github.com/britta-wstnr", "followers_url": "https://api.github.com/users/britta-wstnr/followers", "following_url": "https://api.github.com/users/britta-wstnr/following{/other_user}", "gists_url": "https://api.github.com/users/britta-wstnr/gists{/gist_id}", "starred_url": "https://api.github.com/users/britta-wstnr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/britta-wstnr/subscriptions", "organizations_url": "https://api.github.com/users/britta-wstnr/orgs", "repos_url": "https://api.github.com/users/britta-wstnr/repos", "events_url": "https://api.github.com/users/britta-wstnr/events{/privacy}", "received_events_url": "https://api.github.com/users/britta-wstnr/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}, {"id": 1251548786, "node_id": "MDU6TGFiZWwxMjUxNTQ4Nzg2", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/Beamformer", "name": "Beamformer", "color": "a7ef88", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 34, "created_at": "2020-04-20T19:22:24Z", "updated_at": "2020-04-23T20:01:08Z", "closed_at": "2020-04-22T13:11:55Z", "author_association": "MEMBER", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/mne-tools/mne-python/pulls/7642", "html_url": "https://github.com/mne-tools/mne-python/pull/7642", "diff_url": "https://github.com/mne-tools/mne-python/pull/7642.diff", "patch_url": "https://github.com/mne-tools/mne-python/pull/7642.patch", "merged_at": "2020-04-22T13:11:55Z"}, "body": "This PR does the following things:\r\n\r\n1. Rename, move, and test the inversion function for positive semidefinite matrices, formerly `_sym_inv`, now `_pos_semidef_inv`. _Background:_ make the name and documentation clear as this function only handles pos. semidefinite matrices. Move to `utils.linalg.py` and add testing.\r\n\r\n2. Fix the transpose of non-Hermitian matrices that can be complex in the case of DICS.\r\n\r\n3. Adjust a testing value in `test_dics.py`.\r\n\r\nPlease double check the use of `conjugate()` to see whether it is really necessary everywhere. I checked everything with an example of the `sample` data set as well and had a quick check against FieldTrip for the non-weightnorm version.\r\n\r\n@wmvanvliet once @larsoner is happy, it would be great to have the simulations run on this. Hopefully things will improve!", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/7642/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/7642/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/7626", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/7626/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/7626/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/7626/events", "html_url": "https://github.com/mne-tools/mne-python/pull/7626", "id": 602225819, "node_id": "MDExOlB1bGxSZXF1ZXN0NDA1MzM0MzA0", "number": 7626, "title": "Make sure leadfield rank reduction happens before filter calculation", "user": {"login": "britta-wstnr", "id": 20129119, "node_id": "MDQ6VXNlcjIwMTI5MTE5", "avatar_url": "https://avatars.githubusercontent.com/u/20129119?v=4", "gravatar_id": "", "url": "https://api.github.com/users/britta-wstnr", "html_url": "https://github.com/britta-wstnr", "followers_url": "https://api.github.com/users/britta-wstnr/followers", "following_url": "https://api.github.com/users/britta-wstnr/following{/other_user}", "gists_url": "https://api.github.com/users/britta-wstnr/gists{/gist_id}", "starred_url": "https://api.github.com/users/britta-wstnr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/britta-wstnr/subscriptions", "organizations_url": "https://api.github.com/users/britta-wstnr/orgs", "repos_url": "https://api.github.com/users/britta-wstnr/repos", "events_url": "https://api.github.com/users/britta-wstnr/events{/privacy}", "received_events_url": "https://api.github.com/users/britta-wstnr/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}, {"id": 1251548786, "node_id": "MDU6TGFiZWwxMjUxNTQ4Nzg2", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/Beamformer", "name": "Beamformer", "color": "a7ef88", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-04-17T20:50:21Z", "updated_at": "2020-04-23T20:01:07Z", "closed_at": "2020-04-18T00:44:50Z", "author_association": "MEMBER", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/mne-tools/mne-python/pulls/7626", "html_url": "https://github.com/mne-tools/mne-python/pull/7626", "diff_url": "https://github.com/mne-tools/mne-python/pull/7626.diff", "patch_url": "https://github.com/mne-tools/mne-python/pull/7626.patch", "merged_at": "2020-04-18T00:44:50Z"}, "body": "Previously, the numerator of the beamformer filter calculation (which doubles as part of the denominator as well) got computed before the lead field rank was reduced, resulting in two lead fields being present in the final filter computation.\r\nThis PR fixes this.\r\n\r\nCC @larsoner, @wmvanvliet ", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/7626/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/7626/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/7611", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/7611/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/7611/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/7611/events", "html_url": "https://github.com/mne-tools/mne-python/issues/7611", "id": 600956543, "node_id": "MDU6SXNzdWU2MDA5NTY1NDM=", "number": 7611, "title": "TimeViewer Play/Pause button should toggle state when tmax is reached", "user": {"login": "hoechenberger", "id": 2046265, "node_id": "MDQ6VXNlcjIwNDYyNjU=", "avatar_url": "https://avatars.githubusercontent.com/u/2046265?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hoechenberger", "html_url": "https://github.com/hoechenberger", "followers_url": "https://api.github.com/users/hoechenberger/followers", "following_url": "https://api.github.com/users/hoechenberger/following{/other_user}", "gists_url": "https://api.github.com/users/hoechenberger/gists{/gist_id}", "starred_url": "https://api.github.com/users/hoechenberger/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hoechenberger/subscriptions", "organizations_url": "https://api.github.com/users/hoechenberger/orgs", "repos_url": "https://api.github.com/users/hoechenberger/repos", "events_url": "https://api.github.com/users/hoechenberger/events{/privacy}", "received_events_url": "https://api.github.com/users/hoechenberger/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}, {"id": 1290799321, "node_id": "MDU6TGFiZWwxMjkwNzk5MzIx", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/VIZ", "name": "VIZ", "color": "22e861", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": {"login": "GuillaumeFavelier", "id": 18143289, "node_id": "MDQ6VXNlcjE4MTQzMjg5", "avatar_url": "https://avatars.githubusercontent.com/u/18143289?v=4", "gravatar_id": "", "url": "https://api.github.com/users/GuillaumeFavelier", "html_url": "https://github.com/GuillaumeFavelier", "followers_url": "https://api.github.com/users/GuillaumeFavelier/followers", "following_url": "https://api.github.com/users/GuillaumeFavelier/following{/other_user}", "gists_url": "https://api.github.com/users/GuillaumeFavelier/gists{/gist_id}", "starred_url": "https://api.github.com/users/GuillaumeFavelier/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/GuillaumeFavelier/subscriptions", "organizations_url": "https://api.github.com/users/GuillaumeFavelier/orgs", "repos_url": "https://api.github.com/users/GuillaumeFavelier/repos", "events_url": "https://api.github.com/users/GuillaumeFavelier/events{/privacy}", "received_events_url": "https://api.github.com/users/GuillaumeFavelier/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "GuillaumeFavelier", "id": 18143289, "node_id": "MDQ6VXNlcjE4MTQzMjg5", "avatar_url": "https://avatars.githubusercontent.com/u/18143289?v=4", "gravatar_id": "", "url": "https://api.github.com/users/GuillaumeFavelier", "html_url": "https://github.com/GuillaumeFavelier", "followers_url": "https://api.github.com/users/GuillaumeFavelier/followers", "following_url": "https://api.github.com/users/GuillaumeFavelier/following{/other_user}", "gists_url": "https://api.github.com/users/GuillaumeFavelier/gists{/gist_id}", "starred_url": "https://api.github.com/users/GuillaumeFavelier/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/GuillaumeFavelier/subscriptions", "organizations_url": "https://api.github.com/users/GuillaumeFavelier/orgs", "repos_url": "https://api.github.com/users/GuillaumeFavelier/repos", "events_url": "https://api.github.com/users/GuillaumeFavelier/events{/privacy}", "received_events_url": "https://api.github.com/users/GuillaumeFavelier/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 7, "created_at": "2020-04-16T11:12:35Z", "updated_at": "2020-04-16T16:37:50Z", "closed_at": "2020-04-16T16:37:50Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "#### Describe the bug\r\nCurrently the Play/Pause button doesn't switch from Pause to Play when the the last time point has been reached.\r\n\r\n#### Steps to reproduce\r\nOpen TimeViewer with an STC with multiple time points, press the play button, wait until the last time point is reached.\r\n\r\n#### Expected results\r\nPlay/Pause button state should toggle.\r\n\r\n#### Actual results\r\nPlay/Pause button does not toggle:\r\nhttps://youtu.be/xnFgfJ1-s-M\r\n\r\n#### Additional information\r\nInstead of toggling automatically once tmax is reached, we could also simply loop until the user explicitly requests to pause playback?", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/7611/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/7611/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/7534", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/7534/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/7534/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/7534/events", "html_url": "https://github.com/mne-tools/mne-python/issues/7534", "id": 589582832, "node_id": "MDU6SXNzdWU1ODk1ODI4MzI=", "number": 7534, "title": "If first interaction with PyVista plot is a zoom action, a sphere is placed on the brain", "user": {"login": "hoechenberger", "id": 2046265, "node_id": "MDQ6VXNlcjIwNDYyNjU=", "avatar_url": "https://avatars.githubusercontent.com/u/2046265?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hoechenberger", "html_url": "https://github.com/hoechenberger", "followers_url": "https://api.github.com/users/hoechenberger/followers", "following_url": "https://api.github.com/users/hoechenberger/following{/other_user}", "gists_url": "https://api.github.com/users/hoechenberger/gists{/gist_id}", "starred_url": "https://api.github.com/users/hoechenberger/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hoechenberger/subscriptions", "organizations_url": "https://api.github.com/users/hoechenberger/orgs", "repos_url": "https://api.github.com/users/hoechenberger/repos", "events_url": "https://api.github.com/users/hoechenberger/events{/privacy}", "received_events_url": "https://api.github.com/users/hoechenberger/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}, {"id": 1290799321, "node_id": "MDU6TGFiZWwxMjkwNzk5MzIx", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/VIZ", "name": "VIZ", "color": "22e861", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-03-28T14:01:06Z", "updated_at": "2020-04-07T13:25:12Z", "closed_at": "2020-04-07T13:25:12Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "#### Describe the bug\r\nIn the new PyVista-based viewer in 0.20, if the first interaction with the brain is \"swipe up or down\" on my trackpack (to zoom), a sphere is placed on the brain as if I had clicked on it. If I first click somewhere else and _then_ start zooming, the problem does not occur. \r\n\r\n#### Steps to reproduce\r\nPlot an STC with the PyVista backend. After the window has opened, place the mouse pointer above the brain and scroll up or down.\r\n\r\n#### Expected results\r\nZoom level should change.\r\n\r\n#### Actual results\r\nZoom level changes and a sphere is placed on the brain.\r\n\r\n#### Additional information\r\nScreencast: https://drive.google.com/open?id=1NjRbsh1G4a8x-g9PscAqpEm3eIXkwp_P\r\n\r\n```\r\nPlatform:      macOS-10.15.4-x86_64-i386-64bit\r\nPython:        3.8.2 | packaged by conda-forge | (default, Mar 23 2020, 17:55:48)  [Clang 9.0.1 ]\r\nExecutable:    /Users/hoechenberger/miniconda3/envs/mne-dev-new/bin/python\r\nCPU:           i386: 8 cores\r\nMemory:        16.0 GB\r\n\r\nmne:           0.21.dev0\r\nnumpy:         1.18.1 {blas=blas, lapack=blas}\r\nscipy:         1.4.1\r\nmatplotlib:    3.2.1 {backend=Qt5Agg}\r\n\r\nsklearn:       0.22.2.post1\r\nnumba:         Not found\r\nnibabel:       3.0.2\r\ncupy:          Not found\r\npandas:        Not found\r\ndipy:          1.1.0\r\nmayavi:        4.7.1 {qt_api=pyqt5, PyQt5=5.12.3}\r\npyvista:       0.24.0\r\nvtk:           8.2.0\r\n```", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/7534/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/7534/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/7526", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/7526/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/7526/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/7526/events", "html_url": "https://github.com/mne-tools/mne-python/issues/7526", "id": 589154014, "node_id": "MDU6SXNzdWU1ODkxNTQwMTQ=", "number": 7526, "title": "Website examples after #7520", "user": {"login": "GuillaumeFavelier", "id": 18143289, "node_id": "MDQ6VXNlcjE4MTQzMjg5", "avatar_url": "https://avatars.githubusercontent.com/u/18143289?v=4", "gravatar_id": "", "url": "https://api.github.com/users/GuillaumeFavelier", "html_url": "https://github.com/GuillaumeFavelier", "followers_url": "https://api.github.com/users/GuillaumeFavelier/followers", "following_url": "https://api.github.com/users/GuillaumeFavelier/following{/other_user}", "gists_url": "https://api.github.com/users/GuillaumeFavelier/gists{/gist_id}", "starred_url": "https://api.github.com/users/GuillaumeFavelier/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/GuillaumeFavelier/subscriptions", "organizations_url": "https://api.github.com/users/GuillaumeFavelier/orgs", "repos_url": "https://api.github.com/users/GuillaumeFavelier/repos", "events_url": "https://api.github.com/users/GuillaumeFavelier/events{/privacy}", "received_events_url": "https://api.github.com/users/GuillaumeFavelier/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}, {"id": 1290799321, "node_id": "MDU6TGFiZWwxMjkwNzk5MzIx", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/VIZ", "name": "VIZ", "color": "22e861", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/mne-tools/mne-python/milestones/17", "html_url": "https://github.com/mne-tools/mne-python/milestone/17", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/milestones/17/labels", "id": 5167981, "node_id": "MDk6TWlsZXN0b25lNTE2Nzk4MQ==", "number": 17, "title": "0.21", "description": "", "creator": {"login": "larsoner", "id": 2365790, "node_id": "MDQ6VXNlcjIzNjU3OTA=", "avatar_url": "https://avatars.githubusercontent.com/u/2365790?v=4", "gravatar_id": "", "url": "https://api.github.com/users/larsoner", "html_url": "https://github.com/larsoner", "followers_url": "https://api.github.com/users/larsoner/followers", "following_url": "https://api.github.com/users/larsoner/following{/other_user}", "gists_url": "https://api.github.com/users/larsoner/gists{/gist_id}", "starred_url": "https://api.github.com/users/larsoner/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/larsoner/subscriptions", "organizations_url": "https://api.github.com/users/larsoner/orgs", "repos_url": "https://api.github.com/users/larsoner/repos", "events_url": "https://api.github.com/users/larsoner/events{/privacy}", "received_events_url": "https://api.github.com/users/larsoner/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 133, "state": "closed", "created_at": "2020-03-04T15:04:16Z", "updated_at": "2020-09-24T15:54:34Z", "due_on": "2020-09-15T07:00:00Z", "closed_at": "2020-09-24T15:54:34Z"}, "comments": 2, "created_at": "2020-03-27T14:00:27Z", "updated_at": "2020-04-07T17:29:47Z", "closed_at": "2020-04-07T17:29:47Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "I inspected the website frontpage after #7520 and I noticed 3 issues:\r\n\r\n1) Taking screenshot with time viewer is not consistent with what we had previously\r\nhttps://18971-1301584-gh.circle-artifacts.com/0/dev/auto_examples/visualization/plot_publication_figure.html#sphx-glr-auto-examples-visualization-plot-publication-figure-py\r\n\r\n![image](https://user-images.githubusercontent.com/18143289/77763381-428ade80-703b-11ea-9643-0eee85cb49ee.png)\r\n\r\n2) The titles overlap\r\nhttps://18971-1301584-gh.circle-artifacts.com/0/dev/auto_examples/inverse/plot_psf_ctf_vertices_lcmv.html#sphx-glr-auto-examples-inverse-plot-psf-ctf-vertices-lcmv-py\r\n\r\n![image](https://user-images.githubusercontent.com/18143289/77763395-4b7bb000-703b-11ea-9407-60d7cd66bcaa.png)\r\n\r\n3) The figure is still registered after `close()`\r\nhttps://18971-1301584-gh.circle-artifacts.com/0/dev/auto_examples/visualization/plot_publication_figure.html#sphx-glr-auto-examples-visualization-plot-publication-figure-py\r\n\r\n![image](https://user-images.githubusercontent.com/18143289/77763591-9c8ba400-703b-11ea-8e58-d03bd43414fe.png)\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/7526/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/7526/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/7466", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/7466/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/7466/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/7466/events", "html_url": "https://github.com/mne-tools/mne-python/issues/7466", "id": 582988642, "node_id": "MDU6SXNzdWU1ODI5ODg2NDI=", "number": 7466, "title": "mne.preprocessing.find_bad_channels_maxwell()'s crosstalk_file kwarg cannot be pathlib.Path", "user": {"login": "hoechenberger", "id": 2046265, "node_id": "MDQ6VXNlcjIwNDYyNjU=", "avatar_url": "https://avatars.githubusercontent.com/u/2046265?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hoechenberger", "html_url": "https://github.com/hoechenberger", "followers_url": "https://api.github.com/users/hoechenberger/followers", "following_url": "https://api.github.com/users/hoechenberger/following{/other_user}", "gists_url": "https://api.github.com/users/hoechenberger/gists{/gist_id}", "starred_url": "https://api.github.com/users/hoechenberger/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hoechenberger/subscriptions", "organizations_url": "https://api.github.com/users/hoechenberger/orgs", "repos_url": "https://api.github.com/users/hoechenberger/repos", "events_url": "https://api.github.com/users/hoechenberger/events{/privacy}", "received_events_url": "https://api.github.com/users/hoechenberger/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}, {"id": 1292409654, "node_id": "MDU6TGFiZWwxMjkyNDA5NjU0", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/Preprocessing", "name": "Preprocessing", "color": "90a3dd", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/mne-tools/mne-python/milestones/16", "html_url": "https://github.com/mne-tools/mne-python/milestone/16", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/milestones/16/labels", "id": 4651780, "node_id": "MDk6TWlsZXN0b25lNDY1MTc4MA==", "number": 16, "title": "0.20", "description": "", "creator": {"login": "larsoner", "id": 2365790, "node_id": "MDQ6VXNlcjIzNjU3OTA=", "avatar_url": "https://avatars.githubusercontent.com/u/2365790?v=4", "gravatar_id": "", "url": "https://api.github.com/users/larsoner", "html_url": "https://github.com/larsoner", "followers_url": "https://api.github.com/users/larsoner/followers", "following_url": "https://api.github.com/users/larsoner/following{/other_user}", "gists_url": "https://api.github.com/users/larsoner/gists{/gist_id}", "starred_url": "https://api.github.com/users/larsoner/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/larsoner/subscriptions", "organizations_url": "https://api.github.com/users/larsoner/orgs", "repos_url": "https://api.github.com/users/larsoner/repos", "events_url": "https://api.github.com/users/larsoner/events{/privacy}", "received_events_url": "https://api.github.com/users/larsoner/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 122, "state": "closed", "created_at": "2019-09-11T18:34:03Z", "updated_at": "2020-03-27T18:47:50Z", "due_on": "2020-03-18T07:00:00Z", "closed_at": "2020-03-27T18:47:50Z"}, "comments": 2, "created_at": "2020-03-17T12:48:56Z", "updated_at": "2020-03-17T18:13:07Z", "closed_at": "2020-03-17T18:13:07Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "#### Describe the bug\r\n`mne.preprocessing.find_bad_channels_maxwell()` features a `crosstalk_file` kwarg. Unlike in many (all?) other places in MNE, this argument cannot be a `pathlib.Path` object, and is required to be a string.\r\n\r\n\r\n#### Steps to reproduce\r\n```python\r\nimport pathlib\r\nimport mne\r\n\r\nsample_data_folder = pathlib.Path(mne.datasets.sample.data_path())\r\nsample_data_raw_file = (sample_data_folder / 'MEG' / 'sample' / \r\n                        'sample_audvis_raw.fif')\r\nfine_cal_file = sample_data_folder / 'SSS' / 'sss_cal_mgh.dat'\r\ncrosstalk_file = sample_data_folder / 'SSS' / 'ct_sparse_mgh.fif'\r\n\r\nraw = mne.io.read_raw_fif(sample_data_raw_file, verbose=False)\r\nraw.crop(tmax=60).load_data()\r\n\r\nmne.preprocessing.find_bad_channels_maxwell(raw, cross_talk=crosstalk_file,\r\n                                            calibration=fine_cal_file) \r\n```\r\n\r\n#### Expected results\r\n```\r\nScanning for bad channels in 12 intervals (5.0 sec) ...\r\n    Bad MEG channels being reconstructed: ['MEG 2443']\r\n    Processing 204 gradiometers and 102 magnetometers\r\n    Low-pass filtering data at 40.0 Hz\r\n    Static bad channels: []\r\n[done]\r\n[]\r\n```\r\n\r\n#### Actual results\r\n```python\r\n~/Development/mne-python/mne/preprocessing/maxwell.py in _maxwell_filter(***failed resolving arguments***)\r\n    316     #\r\n    317     if cross_talk is not None:\r\n--> 318         sss_ctc = _read_ctc(cross_talk)\r\n    319         ctc_chs = sss_ctc['proj_items_chs']\r\n    320         meg_ch_names = [info['ch_names'][p] for p in meg_picks]\r\n\r\n~/Development/mne-python/mne/io/proc_history.py in _read_ctc(fname)\r\n    167     \"\"\"Read cross-talk correction matrix.\"\"\"\r\n    168     if not isinstance(fname, str) or not op.isfile(fname):\r\n--> 169         raise ValueError('fname must be a file that exists, not %s' % fname)\r\n    170     f, tree, _ = fiff_open(fname)\r\n    171     with f as fid:\r\n\r\nValueError: fname must be a file that exists, not /Users/hoechenberger/mne_data/MNE-sample-data/SSS/ct_sparse_mgh.fif\r\n```\r\n\r\n\r\n#### Additional information\r\nIt works as expected when converting `crosstalk_file` to a string before passing it to  `find_bad_channels_maxwell()`.", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/7466/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/7466/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/7426", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/7426/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/7426/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/7426/events", "html_url": "https://github.com/mne-tools/mne-python/issues/7426", "id": 579609474, "node_id": "MDU6SXNzdWU1Nzk2MDk0NzQ=", "number": 7426, "title": "pyvista _Brain init too stringent about size parameter", "user": {"login": "drammock", "id": 1810515, "node_id": "MDQ6VXNlcjE4MTA1MTU=", "avatar_url": "https://avatars.githubusercontent.com/u/1810515?v=4", "gravatar_id": "", "url": "https://api.github.com/users/drammock", "html_url": "https://github.com/drammock", "followers_url": "https://api.github.com/users/drammock/followers", "following_url": "https://api.github.com/users/drammock/following{/other_user}", "gists_url": "https://api.github.com/users/drammock/gists{/gist_id}", "starred_url": "https://api.github.com/users/drammock/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/drammock/subscriptions", "organizations_url": "https://api.github.com/users/drammock/orgs", "repos_url": "https://api.github.com/users/drammock/repos", "events_url": "https://api.github.com/users/drammock/events{/privacy}", "received_events_url": "https://api.github.com/users/drammock/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}, {"id": 1290799321, "node_id": "MDU6TGFiZWwxMjkwNzk5MzIx", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/VIZ", "name": "VIZ", "color": "22e861", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-03-11T23:55:01Z", "updated_at": "2020-03-13T09:27:59Z", "closed_at": "2020-03-13T09:27:59Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "I'm hitting the error `'\"size\" parameter must be int or tuple.'` I'm generating lots of similar figures, so I store several project-level parameters (including brain plotting kwargs like figure size) in an external YAML file, and pyYAML's \"safe loader\" doesn't support tuples, only lists.  Instead of checking `isinstance(size, tuple)` maybe we could check if it is length-2, and then convert it to tuple?  Or do it however the mayavi code did it; it works to pass `size=[1200, 1200]` with the mayavi backend.\r\n\r\n@GuillaumeFavelier since you're the PyVista master I wanted to run this by you before just making the change... but I'm happy to do it myself if you're OK with it and you're too busy.", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/7426/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/7426/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/7424", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/7424/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/7424/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/7424/events", "html_url": "https://github.com/mne-tools/mne-python/pull/7424", "id": 579327153, "node_id": "MDExOlB1bGxSZXF1ZXN0Mzg2NzQxMDAy", "number": 7424, "title": "Fix EDF lowpass filter value of 0Hz", "user": {"login": "cbrnr", "id": 4377312, "node_id": "MDQ6VXNlcjQzNzczMTI=", "avatar_url": "https://avatars.githubusercontent.com/u/4377312?v=4", "gravatar_id": "", "url": "https://api.github.com/users/cbrnr", "html_url": "https://github.com/cbrnr", "followers_url": "https://api.github.com/users/cbrnr/followers", "following_url": "https://api.github.com/users/cbrnr/following{/other_user}", "gists_url": "https://api.github.com/users/cbrnr/gists{/gist_id}", "starred_url": "https://api.github.com/users/cbrnr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/cbrnr/subscriptions", "organizations_url": "https://api.github.com/users/cbrnr/orgs", "repos_url": "https://api.github.com/users/cbrnr/repos", "events_url": "https://api.github.com/users/cbrnr/events{/privacy}", "received_events_url": "https://api.github.com/users/cbrnr/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/mne-tools/mne-python/milestones/16", "html_url": "https://github.com/mne-tools/mne-python/milestone/16", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/milestones/16/labels", "id": 4651780, "node_id": "MDk6TWlsZXN0b25lNDY1MTc4MA==", "number": 16, "title": "0.20", "description": "", "creator": {"login": "larsoner", "id": 2365790, "node_id": "MDQ6VXNlcjIzNjU3OTA=", "avatar_url": "https://avatars.githubusercontent.com/u/2365790?v=4", "gravatar_id": "", "url": "https://api.github.com/users/larsoner", "html_url": "https://github.com/larsoner", "followers_url": "https://api.github.com/users/larsoner/followers", "following_url": "https://api.github.com/users/larsoner/following{/other_user}", "gists_url": "https://api.github.com/users/larsoner/gists{/gist_id}", "starred_url": "https://api.github.com/users/larsoner/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/larsoner/subscriptions", "organizations_url": "https://api.github.com/users/larsoner/orgs", "repos_url": "https://api.github.com/users/larsoner/repos", "events_url": "https://api.github.com/users/larsoner/events{/privacy}", "received_events_url": "https://api.github.com/users/larsoner/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 122, "state": "closed", "created_at": "2019-09-11T18:34:03Z", "updated_at": "2020-03-27T18:47:50Z", "due_on": "2020-03-18T07:00:00Z", "closed_at": "2020-03-27T18:47:50Z"}, "comments": 4, "created_at": "2020-03-11T14:57:39Z", "updated_at": "2020-03-11T19:05:32Z", "closed_at": "2020-03-11T19:03:19Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/mne-tools/mne-python/pulls/7424", "html_url": "https://github.com/mne-tools/mne-python/pull/7424", "diff_url": "https://github.com/mne-tools/mne-python/pull/7424.diff", "patch_url": "https://github.com/mne-tools/mne-python/pull/7424.patch", "merged_at": "2020-03-11T19:03:19Z"}, "body": "Fixes #7421.\r\n\r\nI wanted to include a test, so I checked if an existing EDF file has a `LP: 0Hz` entry in its header. Indeed, it seems like `test_edf_stim_resamp.edf` does have this entry, but I get\r\n\r\n```\r\nRuntimeWarning: 24 channel names are too long, have been truncated to 15 characters:\r\n['EEG LDAMT_01-REF', 'EEG LDAMT_02-REF', 'EEG LDAMT_03-REF', 'EEG LDAMT_04-REF', 'EEG LDAMT_05-REF', 'EEG LDAMT_06-REF', 'EEG LDAMT_07-REF', 'EEG LDAMT_08-REF', 'EEG LDPMT_01-REF', 'EEG LDPMT_02-REF', 'EEG LDPMT_03-REF', 'EEG LDPMT_04-REF', 'EEG LDPMT_05-REF', 'EEG LDPMT_06-REF', 'EEG LDPMT_07-REF', 'EEG LDPMT_08-REF', 'EEG RDAMT_01-REF', 'EEG RDAMT_02-REF', 'EEG RDAMT_03-REF', 'EEG RDAMT_04-REF', 'EEG RDAMT_05-REF', 'EEG RDAMT_06-REF', 'EEG RDAMT_07-REF', 'EEG RDAMT_08-REF']\r\n```\r\n\r\nWhich means that I get a Pytest error for something else I don't even want to test. Any ideas how to prevent Pytest from converting the warning to an error?\r\n\r\nOther than that, this fixes the bug and the test also covers this corner case.", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/7424/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/7424/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/7379", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/7379/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/7379/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/7379/events", "html_url": "https://github.com/mne-tools/mne-python/issues/7379", "id": 575283032, "node_id": "MDU6SXNzdWU1NzUyODMwMzI=", "number": 7379, "title": "stc.plot setting initial_time not working with time_viewer=True (PyVista)", "user": {"login": "SophieHerbst", "id": 6408073, "node_id": "MDQ6VXNlcjY0MDgwNzM=", "avatar_url": "https://avatars.githubusercontent.com/u/6408073?v=4", "gravatar_id": "", "url": "https://api.github.com/users/SophieHerbst", "html_url": "https://github.com/SophieHerbst", "followers_url": "https://api.github.com/users/SophieHerbst/followers", "following_url": "https://api.github.com/users/SophieHerbst/following{/other_user}", "gists_url": "https://api.github.com/users/SophieHerbst/gists{/gist_id}", "starred_url": "https://api.github.com/users/SophieHerbst/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/SophieHerbst/subscriptions", "organizations_url": "https://api.github.com/users/SophieHerbst/orgs", "repos_url": "https://api.github.com/users/SophieHerbst/repos", "events_url": "https://api.github.com/users/SophieHerbst/events{/privacy}", "received_events_url": "https://api.github.com/users/SophieHerbst/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}, {"id": 1290799321, "node_id": "MDU6TGFiZWwxMjkwNzk5MzIx", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/VIZ", "name": "VIZ", "color": "22e861", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": {"login": "GuillaumeFavelier", "id": 18143289, "node_id": "MDQ6VXNlcjE4MTQzMjg5", "avatar_url": "https://avatars.githubusercontent.com/u/18143289?v=4", "gravatar_id": "", "url": "https://api.github.com/users/GuillaumeFavelier", "html_url": "https://github.com/GuillaumeFavelier", "followers_url": "https://api.github.com/users/GuillaumeFavelier/followers", "following_url": "https://api.github.com/users/GuillaumeFavelier/following{/other_user}", "gists_url": "https://api.github.com/users/GuillaumeFavelier/gists{/gist_id}", "starred_url": "https://api.github.com/users/GuillaumeFavelier/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/GuillaumeFavelier/subscriptions", "organizations_url": "https://api.github.com/users/GuillaumeFavelier/orgs", "repos_url": "https://api.github.com/users/GuillaumeFavelier/repos", "events_url": "https://api.github.com/users/GuillaumeFavelier/events{/privacy}", "received_events_url": "https://api.github.com/users/GuillaumeFavelier/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "GuillaumeFavelier", "id": 18143289, "node_id": "MDQ6VXNlcjE4MTQzMjg5", "avatar_url": "https://avatars.githubusercontent.com/u/18143289?v=4", "gravatar_id": "", "url": "https://api.github.com/users/GuillaumeFavelier", "html_url": "https://github.com/GuillaumeFavelier", "followers_url": "https://api.github.com/users/GuillaumeFavelier/followers", "following_url": "https://api.github.com/users/GuillaumeFavelier/following{/other_user}", "gists_url": "https://api.github.com/users/GuillaumeFavelier/gists{/gist_id}", "starred_url": "https://api.github.com/users/GuillaumeFavelier/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/GuillaumeFavelier/subscriptions", "organizations_url": "https://api.github.com/users/GuillaumeFavelier/orgs", "repos_url": "https://api.github.com/users/GuillaumeFavelier/repos", "events_url": "https://api.github.com/users/GuillaumeFavelier/events{/privacy}", "received_events_url": "https://api.github.com/users/GuillaumeFavelier/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 1, "created_at": "2020-03-04T10:14:32Z", "updated_at": "2020-03-04T15:00:44Z", "closed_at": "2020-03-04T15:00:44Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "There is something wrong with setting the initial time for an stc.plot with time_viewer=True (PyVista), it always defaults to the same value. I updated to the latest developers version, but the problem persists. @GuillaumeFavelier, maybe you know why?\r\n\r\n\r\n```\r\nimport mne\r\n\r\nmne.viz.set_3d_backend('pyvista')\r\n\r\ndata_dir = mne.datasets.sample.data_path('/volatile')\r\nsubjects_dir = data_dir + '/subjects'\r\nstc_path = data_dir + '/MEG/sample/sample_audvis-meg-eeg'\r\n\r\nstc = mne.read_source_estimate(stc_path, 'sample')\r\n\r\n# First, morph the data to fsaverage_sym, for which we have left_right\r\n# registrations:\r\nstc = mne.compute_source_morph(stc, 'sample', 'fsaverage_sym', smooth=5,\r\n                               warn=False,\r\n                               subjects_dir=subjects_dir).apply(stc)\r\n\r\nstc.plot(hemi='split', subjects_dir=subjects_dir, initial_time=0.,\r\n          size=(800, 600),time_viewer=True)\r\n```\r\n\r\n![pyvista_initial_time](https://user-images.githubusercontent.com/6408073/75868869-02a05500-5e09-11ea-903c-e7358be8e8fd.png)\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/7379/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/7379/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/7354", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/7354/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/7354/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/7354/events", "html_url": "https://github.com/mne-tools/mne-python/issues/7354", "id": 570575320, "node_id": "MDU6SXNzdWU1NzA1NzUzMjA=", "number": 7354, "title": "BUG: bonferroni correction output p-values > 1.", "user": {"login": "kingjr", "id": 4881164, "node_id": "MDQ6VXNlcjQ4ODExNjQ=", "avatar_url": "https://avatars.githubusercontent.com/u/4881164?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kingjr", "html_url": "https://github.com/kingjr", "followers_url": "https://api.github.com/users/kingjr/followers", "following_url": "https://api.github.com/users/kingjr/following{/other_user}", "gists_url": "https://api.github.com/users/kingjr/gists{/gist_id}", "starred_url": "https://api.github.com/users/kingjr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kingjr/subscriptions", "organizations_url": "https://api.github.com/users/kingjr/orgs", "repos_url": "https://api.github.com/users/kingjr/repos", "events_url": "https://api.github.com/users/kingjr/events{/privacy}", "received_events_url": "https://api.github.com/users/kingjr/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}, {"id": 77061445, "node_id": "MDU6TGFiZWw3NzA2MTQ0NQ==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/EASY", "name": "EASY", "color": "2be2d6", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": {"login": "hoechenberger", "id": 2046265, "node_id": "MDQ6VXNlcjIwNDYyNjU=", "avatar_url": "https://avatars.githubusercontent.com/u/2046265?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hoechenberger", "html_url": "https://github.com/hoechenberger", "followers_url": "https://api.github.com/users/hoechenberger/followers", "following_url": "https://api.github.com/users/hoechenberger/following{/other_user}", "gists_url": "https://api.github.com/users/hoechenberger/gists{/gist_id}", "starred_url": "https://api.github.com/users/hoechenberger/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hoechenberger/subscriptions", "organizations_url": "https://api.github.com/users/hoechenberger/orgs", "repos_url": "https://api.github.com/users/hoechenberger/repos", "events_url": "https://api.github.com/users/hoechenberger/events{/privacy}", "received_events_url": "https://api.github.com/users/hoechenberger/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "hoechenberger", "id": 2046265, "node_id": "MDQ6VXNlcjIwNDYyNjU=", "avatar_url": "https://avatars.githubusercontent.com/u/2046265?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hoechenberger", "html_url": "https://github.com/hoechenberger", "followers_url": "https://api.github.com/users/hoechenberger/followers", "following_url": "https://api.github.com/users/hoechenberger/following{/other_user}", "gists_url": "https://api.github.com/users/hoechenberger/gists{/gist_id}", "starred_url": "https://api.github.com/users/hoechenberger/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hoechenberger/subscriptions", "organizations_url": "https://api.github.com/users/hoechenberger/orgs", "repos_url": "https://api.github.com/users/hoechenberger/repos", "events_url": "https://api.github.com/users/hoechenberger/events{/privacy}", "received_events_url": "https://api.github.com/users/hoechenberger/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/mne-tools/mne-python/milestones/17", "html_url": "https://github.com/mne-tools/mne-python/milestone/17", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/milestones/17/labels", "id": 5167981, "node_id": "MDk6TWlsZXN0b25lNTE2Nzk4MQ==", "number": 17, "title": "0.21", "description": "", "creator": {"login": "larsoner", "id": 2365790, "node_id": "MDQ6VXNlcjIzNjU3OTA=", "avatar_url": "https://avatars.githubusercontent.com/u/2365790?v=4", "gravatar_id": "", "url": "https://api.github.com/users/larsoner", "html_url": "https://github.com/larsoner", "followers_url": "https://api.github.com/users/larsoner/followers", "following_url": "https://api.github.com/users/larsoner/following{/other_user}", "gists_url": "https://api.github.com/users/larsoner/gists{/gist_id}", "starred_url": "https://api.github.com/users/larsoner/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/larsoner/subscriptions", "organizations_url": "https://api.github.com/users/larsoner/orgs", "repos_url": "https://api.github.com/users/larsoner/repos", "events_url": "https://api.github.com/users/larsoner/events{/privacy}", "received_events_url": "https://api.github.com/users/larsoner/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 133, "state": "closed", "created_at": "2020-03-04T15:04:16Z", "updated_at": "2020-09-24T15:54:34Z", "due_on": "2020-09-15T07:00:00Z", "closed_at": "2020-09-24T15:54:34Z"}, "comments": 1, "created_at": "2020-02-25T13:35:39Z", "updated_at": "2020-03-09T15:04:35Z", "closed_at": "2020-03-09T15:04:35Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "```python\r\nfrom mne.stats import bonferroni_correction\r\n_, p_corrected = bonferroni_correction([.2, .9])\r\n```\r\np_corrected:\r\n```\r\n[0.4, 1.8]\r\n```\r\n\r\nFormally, I'm not sure what should be done, but I think clipping below 1 could be reasonable?", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/7354/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/7354/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/7351", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/7351/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/7351/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/7351/events", "html_url": "https://github.com/mne-tools/mne-python/pull/7351", "id": 569569410, "node_id": "MDExOlB1bGxSZXF1ZXN0Mzc4NzU4Mjky", "number": 7351, "title": "MRG, BUG: _Renderer not found", "user": {"login": "larsoner", "id": 2365790, "node_id": "MDQ6VXNlcjIzNjU3OTA=", "avatar_url": "https://avatars.githubusercontent.com/u/2365790?v=4", "gravatar_id": "", "url": "https://api.github.com/users/larsoner", "html_url": "https://github.com/larsoner", "followers_url": "https://api.github.com/users/larsoner/followers", "following_url": "https://api.github.com/users/larsoner/following{/other_user}", "gists_url": "https://api.github.com/users/larsoner/gists{/gist_id}", "starred_url": "https://api.github.com/users/larsoner/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/larsoner/subscriptions", "organizations_url": "https://api.github.com/users/larsoner/orgs", "repos_url": "https://api.github.com/users/larsoner/repos", "events_url": "https://api.github.com/users/larsoner/events{/privacy}", "received_events_url": "https://api.github.com/users/larsoner/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}, {"id": 1290799321, "node_id": "MDU6TGFiZWwxMjkwNzk5MzIx", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/VIZ", "name": "VIZ", "color": "22e861", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": {"login": "GuillaumeFavelier", "id": 18143289, "node_id": "MDQ6VXNlcjE4MTQzMjg5", "avatar_url": "https://avatars.githubusercontent.com/u/18143289?v=4", "gravatar_id": "", "url": "https://api.github.com/users/GuillaumeFavelier", "html_url": "https://github.com/GuillaumeFavelier", "followers_url": "https://api.github.com/users/GuillaumeFavelier/followers", "following_url": "https://api.github.com/users/GuillaumeFavelier/following{/other_user}", "gists_url": "https://api.github.com/users/GuillaumeFavelier/gists{/gist_id}", "starred_url": "https://api.github.com/users/GuillaumeFavelier/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/GuillaumeFavelier/subscriptions", "organizations_url": "https://api.github.com/users/GuillaumeFavelier/orgs", "repos_url": "https://api.github.com/users/GuillaumeFavelier/repos", "events_url": "https://api.github.com/users/GuillaumeFavelier/events{/privacy}", "received_events_url": "https://api.github.com/users/GuillaumeFavelier/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "GuillaumeFavelier", "id": 18143289, "node_id": "MDQ6VXNlcjE4MTQzMjg5", "avatar_url": "https://avatars.githubusercontent.com/u/18143289?v=4", "gravatar_id": "", "url": "https://api.github.com/users/GuillaumeFavelier", "html_url": "https://github.com/GuillaumeFavelier", "followers_url": "https://api.github.com/users/GuillaumeFavelier/followers", "following_url": "https://api.github.com/users/GuillaumeFavelier/following{/other_user}", "gists_url": "https://api.github.com/users/GuillaumeFavelier/gists{/gist_id}", "starred_url": "https://api.github.com/users/GuillaumeFavelier/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/GuillaumeFavelier/subscriptions", "organizations_url": "https://api.github.com/users/GuillaumeFavelier/orgs", "repos_url": "https://api.github.com/users/GuillaumeFavelier/repos", "events_url": "https://api.github.com/users/GuillaumeFavelier/events{/privacy}", "received_events_url": "https://api.github.com/users/GuillaumeFavelier/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 9, "created_at": "2020-02-23T22:24:42Z", "updated_at": "2020-02-26T03:51:54Z", "closed_at": "2020-02-26T03:51:51Z", "author_association": "MEMBER", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/mne-tools/mne-python/pulls/7351", "html_url": "https://github.com/mne-tools/mne-python/pull/7351", "diff_url": "https://github.com/mne-tools/mne-python/pull/7351.diff", "patch_url": "https://github.com/mne-tools/mne-python/pull/7351.patch", "merged_at": "2020-02-26T03:51:51Z"}, "body": "Okay I remember why I went with `_get_renderer` (which was removed in #7292). @GuillaumeFavelier this code snippet:\r\n```\r\nimport mne\r\nmne.viz.create_3d_figure((800, 600))\r\n```\r\ngives:\r\n```\r\nTraceback (most recent call last):\r\n  File \"/Users/larsoner/Desktop/bug.py\", line 2, in <module>\r\n    mne.viz.create_3d_figure((800, 600))\r\n  File \"/Users/larsoner/python/mne-python/mne/viz/backends/renderer.py\", line 245, in create_3d_figure\r\n    renderer = _Renderer(fig=handle, size=size, bgcolor=bgcolor)  # noqa: F821\r\nNameError: name '_Renderer' is not defined\r\n```\r\nWe don't hit this in tests (and CircleCI) probably because by the time we call a `create_3d_figure` we have already done a `stc.plot` or something else that would have loaded a backend (or tried to load the given backend in a `pytest` way).\r\n\r\nThe simplest fix is probably to restore `_get_renderer`, but I leave it up to you to figure out @GuillaumeFavelier. In the meantime I've added a test to replicate the problem. Feel free to push directly to my branch to fix.", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/7351/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/7351/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/7341", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/7341/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/7341/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/7341/events", "html_url": "https://github.com/mne-tools/mne-python/issues/7341", "id": 567227265, "node_id": "MDU6SXNzdWU1NjcyMjcyNjU=", "number": 7341, "title": "sphere argument in plot_topomap does nothing", "user": {"login": "jasmainak", "id": 15852194, "node_id": "MDQ6VXNlcjE1ODUyMTk0", "avatar_url": "https://avatars.githubusercontent.com/u/15852194?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jasmainak", "html_url": "https://github.com/jasmainak", "followers_url": "https://api.github.com/users/jasmainak/followers", "following_url": "https://api.github.com/users/jasmainak/following{/other_user}", "gists_url": "https://api.github.com/users/jasmainak/gists{/gist_id}", "starred_url": "https://api.github.com/users/jasmainak/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jasmainak/subscriptions", "organizations_url": "https://api.github.com/users/jasmainak/orgs", "repos_url": "https://api.github.com/users/jasmainak/repos", "events_url": "https://api.github.com/users/jasmainak/events{/privacy}", "received_events_url": "https://api.github.com/users/jasmainak/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/mne-tools/mne-python/milestones/17", "html_url": "https://github.com/mne-tools/mne-python/milestone/17", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/milestones/17/labels", "id": 5167981, "node_id": "MDk6TWlsZXN0b25lNTE2Nzk4MQ==", "number": 17, "title": "0.21", "description": "", "creator": {"login": "larsoner", "id": 2365790, "node_id": "MDQ6VXNlcjIzNjU3OTA=", "avatar_url": "https://avatars.githubusercontent.com/u/2365790?v=4", "gravatar_id": "", "url": "https://api.github.com/users/larsoner", "html_url": "https://github.com/larsoner", "followers_url": "https://api.github.com/users/larsoner/followers", "following_url": "https://api.github.com/users/larsoner/following{/other_user}", "gists_url": "https://api.github.com/users/larsoner/gists{/gist_id}", "starred_url": "https://api.github.com/users/larsoner/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/larsoner/subscriptions", "organizations_url": "https://api.github.com/users/larsoner/orgs", "repos_url": "https://api.github.com/users/larsoner/repos", "events_url": "https://api.github.com/users/larsoner/events{/privacy}", "received_events_url": "https://api.github.com/users/larsoner/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 133, "state": "closed", "created_at": "2020-03-04T15:04:16Z", "updated_at": "2020-09-24T15:54:34Z", "due_on": "2020-09-15T07:00:00Z", "closed_at": "2020-09-24T15:54:34Z"}, "comments": 1, "created_at": "2020-02-18T23:44:58Z", "updated_at": "2020-09-03T22:29:45Z", "closed_at": "2020-09-03T22:29:45Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "I'm on the latest master and I am using the `sphere` argument in `plot_topomap` and it seems to do nothing for a range of values. See:\r\n\r\n```py\r\nimport mne\r\nfrom mne.datasets import sample\r\n\r\ndata_path = sample.data_path()\r\nfname = data_path + '/MEG/sample/sample_audvis-ave.fif'\r\nevoked = mne.read_evokeds(fname, condition='Left Auditory', baseline=(None, 0))\r\n\r\nevoked.plot_topomap(ch_type='mag', title='mag (original)', time_unit='s', sphere=(0., 0., 0., 0.8))\r\nevoked.plot_topomap(ch_type='mag', title='mag (original)', time_unit='s', sphere=(0., 0., 0., 0.5))\r\nevoked.plot_topomap(ch_type='mag', title='mag (original)', time_unit='s', sphere=(0., 0., 0., 0.1))\r\nevoked.plot_topomap(ch_type='mag', title='mag (original)', time_unit='s', sphere=(0., 0., 0., 0.01))\r\n```\r\n\r\nOnly the last line did something. This seems a bit unintuitive to me. What values is MNE expecting? Perhaps that should be documented and an error raised if it gets a value that is too large?", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/7341/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/7341/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/7316", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/7316/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/7316/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/7316/events", "html_url": "https://github.com/mne-tools/mne-python/issues/7316", "id": 564835012, "node_id": "MDU6SXNzdWU1NjQ4MzUwMTI=", "number": 7316, "title": "Remove window title decoration from new _TimeViewer", "user": {"login": "hoechenberger", "id": 2046265, "node_id": "MDQ6VXNlcjIwNDYyNjU=", "avatar_url": "https://avatars.githubusercontent.com/u/2046265?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hoechenberger", "html_url": "https://github.com/hoechenberger", "followers_url": "https://api.github.com/users/hoechenberger/followers", "following_url": "https://api.github.com/users/hoechenberger/following{/other_user}", "gists_url": "https://api.github.com/users/hoechenberger/gists{/gist_id}", "starred_url": "https://api.github.com/users/hoechenberger/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hoechenberger/subscriptions", "organizations_url": "https://api.github.com/users/hoechenberger/orgs", "repos_url": "https://api.github.com/users/hoechenberger/repos", "events_url": "https://api.github.com/users/hoechenberger/events{/privacy}", "received_events_url": "https://api.github.com/users/hoechenberger/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}, {"id": 1290799321, "node_id": "MDU6TGFiZWwxMjkwNzk5MzIx", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/VIZ", "name": "VIZ", "color": "22e861", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/mne-tools/mne-python/milestones/16", "html_url": "https://github.com/mne-tools/mne-python/milestone/16", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/milestones/16/labels", "id": 4651780, "node_id": "MDk6TWlsZXN0b25lNDY1MTc4MA==", "number": 16, "title": "0.20", "description": "", "creator": {"login": "larsoner", "id": 2365790, "node_id": "MDQ6VXNlcjIzNjU3OTA=", "avatar_url": "https://avatars.githubusercontent.com/u/2365790?v=4", "gravatar_id": "", "url": "https://api.github.com/users/larsoner", "html_url": "https://github.com/larsoner", "followers_url": "https://api.github.com/users/larsoner/followers", "following_url": "https://api.github.com/users/larsoner/following{/other_user}", "gists_url": "https://api.github.com/users/larsoner/gists{/gist_id}", "starred_url": "https://api.github.com/users/larsoner/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/larsoner/subscriptions", "organizations_url": "https://api.github.com/users/larsoner/orgs", "repos_url": "https://api.github.com/users/larsoner/repos", "events_url": "https://api.github.com/users/larsoner/events{/privacy}", "received_events_url": "https://api.github.com/users/larsoner/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 122, "state": "closed", "created_at": "2019-09-11T18:34:03Z", "updated_at": "2020-03-27T18:47:50Z", "due_on": "2020-03-18T07:00:00Z", "closed_at": "2020-03-27T18:47:50Z"}, "comments": 6, "created_at": "2020-02-13T17:20:22Z", "updated_at": "2020-03-12T13:07:23Z", "closed_at": "2020-03-12T13:07:23Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "### Describe the problem\r\nThe new `_TimeViewer` by @GuillaumeFavelier  adds its own window title row, which is odd at least on macOS when not running in full screen mode, as the titlebar added by the operating system has the exact same name, so there's now redundant information:\r\n\r\n<img width=\"841\" alt=\"Screen Shot 2020-02-13 at 18 15 28\" src=\"https://user-images.githubusercontent.com/2046265/74460486-400a6600-4e8d-11ea-98cc-ed43f179b62b.png\">\r\n<img width=\"512\" alt=\"Screen Shot 2020-02-13 at 17 58 02\" src=\"https://user-images.githubusercontent.com/2046265/74460497-44368380-4e8d-11ea-963d-5f66d599148f.png\">\r\n\r\n\r\n#### Describe your solution\r\nThe title should be switched off by default, at least on macOS.", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/7316/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/7316/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/7250", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/7250/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/7250/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/7250/events", "html_url": "https://github.com/mne-tools/mne-python/issues/7250", "id": 554664017, "node_id": "MDU6SXNzdWU1NTQ2NjQwMTc=", "number": 7250, "title": "stc.plot with pyvista: error with hemi='both'", "user": {"login": "SophieHerbst", "id": 6408073, "node_id": "MDQ6VXNlcjY0MDgwNzM=", "avatar_url": "https://avatars.githubusercontent.com/u/6408073?v=4", "gravatar_id": "", "url": "https://api.github.com/users/SophieHerbst", "html_url": "https://github.com/SophieHerbst", "followers_url": "https://api.github.com/users/SophieHerbst/followers", "following_url": "https://api.github.com/users/SophieHerbst/following{/other_user}", "gists_url": "https://api.github.com/users/SophieHerbst/gists{/gist_id}", "starred_url": "https://api.github.com/users/SophieHerbst/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/SophieHerbst/subscriptions", "organizations_url": "https://api.github.com/users/SophieHerbst/orgs", "repos_url": "https://api.github.com/users/SophieHerbst/repos", "events_url": "https://api.github.com/users/SophieHerbst/events{/privacy}", "received_events_url": "https://api.github.com/users/SophieHerbst/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}, {"id": 1290799321, "node_id": "MDU6TGFiZWwxMjkwNzk5MzIx", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/VIZ", "name": "VIZ", "color": "22e861", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2020-01-24T10:45:11Z", "updated_at": "2020-01-24T13:14:17Z", "closed_at": "2020-01-24T13:14:17Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "I am not able to plot the two hemispheres of an stc at the same time with `time_viewer=True` , for instance when using [this](https://mne.tools/stable/auto_examples/visualization/plot_xhemi.html#sphx-glr-auto-examples-visualization-plot-xhemi-py) example:  \r\n\r\n```\r\nstc.plot(hemi='both', subjects_dir=subjects_dir, initial_time=0.07,\r\n          size=(800, 600),time_viewer=True)\r\n```\r\n\r\nError: \r\n> \r\n>   File \"/home/sh254795/pyvista/pyvista/plotting/plotting.py\", line 2215, in subplot\r\n>     raise IndexError('Column index is out of range ({})'.format(self.shape[1]))\r\n> \r\n> IndexError: Column index is out of range (1)\r\n\r\nWith `hemi='split'` the panels overlap, and the time-slider is not usable (I can send a screenshot).\r\nAlso, from the documentation it is not clear to me what the difference between 'both' and 'split' would do. \r\n\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/7250/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/7250/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/7239", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/7239/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/7239/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/7239/events", "html_url": "https://github.com/mne-tools/mne-python/issues/7239", "id": 553621959, "node_id": "MDU6SXNzdWU1NTM2MjE5NTk=", "number": 7239, "title": "error when trying to use pyvista to plot stc", "user": {"login": "SophieHerbst", "id": 6408073, "node_id": "MDQ6VXNlcjY0MDgwNzM=", "avatar_url": "https://avatars.githubusercontent.com/u/6408073?v=4", "gravatar_id": "", "url": "https://api.github.com/users/SophieHerbst", "html_url": "https://github.com/SophieHerbst", "followers_url": "https://api.github.com/users/SophieHerbst/followers", "following_url": "https://api.github.com/users/SophieHerbst/following{/other_user}", "gists_url": "https://api.github.com/users/SophieHerbst/gists{/gist_id}", "starred_url": "https://api.github.com/users/SophieHerbst/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/SophieHerbst/subscriptions", "organizations_url": "https://api.github.com/users/SophieHerbst/orgs", "repos_url": "https://api.github.com/users/SophieHerbst/repos", "events_url": "https://api.github.com/users/SophieHerbst/events{/privacy}", "received_events_url": "https://api.github.com/users/SophieHerbst/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}, {"id": 1290799321, "node_id": "MDU6TGFiZWwxMjkwNzk5MzIx", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/VIZ", "name": "VIZ", "color": "22e861", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 7, "created_at": "2020-01-22T15:37:30Z", "updated_at": "2020-01-30T19:57:53Z", "closed_at": "2020-01-30T19:57:53Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "I am trying to use the new pyvista-plotting for stc (through spyder), \r\non my own data, and this [mne-example](https://mne.tools/stable/auto_examples/visualization/plot_xhemi.html#sphx-glr-auto-examples-visualization-plot-xhemi-py)\r\n\r\nWhen I do not specify a backend, it uses majavi. \r\nI tried: `mne.viz.set_3d_backend('pyvista')`\r\n\r\nOutput of `stc.plot`:\r\n>   File \"/home/sh254795/anaconda3/lib/python3.7/site-packages/mne/viz/_brain/_brain.py\", line 201, in __init__\r\n>     shape=(n_row, n_col), fig=figure)\r\n> \r\n>   File \"/home/sh254795/anaconda3/lib/python3.7/site-packages/mne/viz/backends/_pyvista.py\", line 141, in __init__\r\n>     self.plotter.disable_depth_peeling()\r\n> \r\n> AttributeError: 'Plotter' object has no attribute 'disable_depth_peeling'\r\n\r\nOutput of ` python -c \"import mne; mne.sys_info()\"`:\r\n> mne:           0.20.dev0\r\n> numpy:         1.17.2 {blas=mkl_rt, lapack=mkl_rt}\r\n> scipy:         1.3.1\r\n> matplotlib:    3.1.1 {backend=Qt5Agg}\r\n> \r\n> sklearn:       0.21.3\r\n> numba:         0.45.1\r\n> nibabel:       2.5.1\r\n> cupy:          Not found\r\n> pandas:        0.25.1\r\n> dipy:          1.0.0\r\n> mayavi:        4.7.1 {qt_api=pyqt5, PyQt5=5.9.2}\r\n> pyvista:       0.22.4\r\n> vtk:           8.1.2\r\n", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/7239/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/7239/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/7228", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/7228/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/7228/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/7228/events", "html_url": "https://github.com/mne-tools/mne-python/issues/7228", "id": 551634912, "node_id": "MDU6SXNzdWU1NTE2MzQ5MTI=", "number": 7228, "title": "BUG: Bug with multi-view screen capture", "user": {"login": "larsoner", "id": 2365790, "node_id": "MDQ6VXNlcjIzNjU3OTA=", "avatar_url": "https://avatars.githubusercontent.com/u/2365790?v=4", "gravatar_id": "", "url": "https://api.github.com/users/larsoner", "html_url": "https://github.com/larsoner", "followers_url": "https://api.github.com/users/larsoner/followers", "following_url": "https://api.github.com/users/larsoner/following{/other_user}", "gists_url": "https://api.github.com/users/larsoner/gists{/gist_id}", "starred_url": "https://api.github.com/users/larsoner/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/larsoner/subscriptions", "organizations_url": "https://api.github.com/users/larsoner/orgs", "repos_url": "https://api.github.com/users/larsoner/repos", "events_url": "https://api.github.com/users/larsoner/events{/privacy}", "received_events_url": "https://api.github.com/users/larsoner/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}, {"id": 1290799321, "node_id": "MDU6TGFiZWwxMjkwNzk5MzIx", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/VIZ", "name": "VIZ", "color": "22e861", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/mne-tools/mne-python/milestones/16", "html_url": "https://github.com/mne-tools/mne-python/milestone/16", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/milestones/16/labels", "id": 4651780, "node_id": "MDk6TWlsZXN0b25lNDY1MTc4MA==", "number": 16, "title": "0.20", "description": "", "creator": {"login": "larsoner", "id": 2365790, "node_id": "MDQ6VXNlcjIzNjU3OTA=", "avatar_url": "https://avatars.githubusercontent.com/u/2365790?v=4", "gravatar_id": "", "url": "https://api.github.com/users/larsoner", "html_url": "https://github.com/larsoner", "followers_url": "https://api.github.com/users/larsoner/followers", "following_url": "https://api.github.com/users/larsoner/following{/other_user}", "gists_url": "https://api.github.com/users/larsoner/gists{/gist_id}", "starred_url": "https://api.github.com/users/larsoner/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/larsoner/subscriptions", "organizations_url": "https://api.github.com/users/larsoner/orgs", "repos_url": "https://api.github.com/users/larsoner/repos", "events_url": "https://api.github.com/users/larsoner/events{/privacy}", "received_events_url": "https://api.github.com/users/larsoner/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 122, "state": "closed", "created_at": "2019-09-11T18:34:03Z", "updated_at": "2020-03-27T18:47:50Z", "due_on": "2020-03-18T07:00:00Z", "closed_at": "2020-03-27T18:47:50Z"}, "comments": 6, "created_at": "2020-01-17T21:14:58Z", "updated_at": "2020-03-10T21:31:00Z", "closed_at": "2020-03-10T21:31:00Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "See this example that uses `hemi='split'`, all captured PyVista images are duplicated:\r\n\r\nhttps://mne.tools/dev/auto_examples/visualization/plot_publication_figure.html#sphx-glr-auto-examples-visualization-plot-publication-figure-py\r\n\r\nMoreover, once `brain.close()` is called, it should make sure no figures are generated (as they have been closed for that snippet). Compare the above to what used to be produced with `mayavi` produced (one pair of images rather than four pairs):\r\n\r\nhttps://mne.tools/stable/auto_examples/visualization/plot_publication_figure.html#sphx-glr-auto-examples-visualization-plot-publication-figure-py\r\n\r\ncc @GuillaumeFavelier can you look into it?", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/7228/reactions", "total_count": 1, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/7228/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/7224", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/7224/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/7224/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/7224/events", "html_url": "https://github.com/mne-tools/mne-python/pull/7224", "id": 551181394, "node_id": "MDExOlB1bGxSZXF1ZXN0MzYzOTQ5NTYw", "number": 7224, "title": "[MRG] FIX: read easycap-M10 montage", "user": {"login": "christianbrodbeck", "id": 145771, "node_id": "MDQ6VXNlcjE0NTc3MQ==", "avatar_url": "https://avatars.githubusercontent.com/u/145771?v=4", "gravatar_id": "", "url": "https://api.github.com/users/christianbrodbeck", "html_url": "https://github.com/christianbrodbeck", "followers_url": "https://api.github.com/users/christianbrodbeck/followers", "following_url": "https://api.github.com/users/christianbrodbeck/following{/other_user}", "gists_url": "https://api.github.com/users/christianbrodbeck/gists{/gist_id}", "starred_url": "https://api.github.com/users/christianbrodbeck/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/christianbrodbeck/subscriptions", "organizations_url": "https://api.github.com/users/christianbrodbeck/orgs", "repos_url": "https://api.github.com/users/christianbrodbeck/repos", "events_url": "https://api.github.com/users/christianbrodbeck/events{/privacy}", "received_events_url": "https://api.github.com/users/christianbrodbeck/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 20, "created_at": "2020-01-17T03:43:58Z", "updated_at": "2020-01-21T13:13:52Z", "closed_at": "2020-01-21T13:13:52Z", "author_association": "MEMBER", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/mne-tools/mne-python/pulls/7224", "html_url": "https://github.com/mne-tools/mne-python/pull/7224", "diff_url": "https://github.com/mne-tools/mne-python/pull/7224.diff", "patch_url": "https://github.com/mne-tools/mne-python/pull/7224.patch", "merged_at": "2020-01-21T13:13:52Z"}, "body": "There was a bug in the standard montage reader that read easycap-M1 even when `easycap-M10` was specified.\r\n\r\nWhile investigating I also noticed that the `DigMontage.plot` default parameters don't agree with the documentation, below I changed the default parameters to match the docs (since the docs do agree with the default parameters of `plot_montage()`). ", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/7224/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/7224/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/7154", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/7154/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/7154/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/7154/events", "html_url": "https://github.com/mne-tools/mne-python/issues/7154", "id": 540442496, "node_id": "MDU6SXNzdWU1NDA0NDI0OTY=", "number": 7154, "title": "Issue with pick_types(emg=True)", "user": {"login": "TariqCannonier", "id": 15863695, "node_id": "MDQ6VXNlcjE1ODYzNjk1", "avatar_url": "https://avatars.githubusercontent.com/u/15863695?v=4", "gravatar_id": "", "url": "https://api.github.com/users/TariqCannonier", "html_url": "https://github.com/TariqCannonier", "followers_url": "https://api.github.com/users/TariqCannonier/followers", "following_url": "https://api.github.com/users/TariqCannonier/following{/other_user}", "gists_url": "https://api.github.com/users/TariqCannonier/gists{/gist_id}", "starred_url": "https://api.github.com/users/TariqCannonier/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/TariqCannonier/subscriptions", "organizations_url": "https://api.github.com/users/TariqCannonier/orgs", "repos_url": "https://api.github.com/users/TariqCannonier/repos", "events_url": "https://api.github.com/users/TariqCannonier/events{/privacy}", "received_events_url": "https://api.github.com/users/TariqCannonier/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/mne-tools/mne-python/milestones/17", "html_url": "https://github.com/mne-tools/mne-python/milestone/17", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/milestones/17/labels", "id": 5167981, "node_id": "MDk6TWlsZXN0b25lNTE2Nzk4MQ==", "number": 17, "title": "0.21", "description": "", "creator": {"login": "larsoner", "id": 2365790, "node_id": "MDQ6VXNlcjIzNjU3OTA=", "avatar_url": "https://avatars.githubusercontent.com/u/2365790?v=4", "gravatar_id": "", "url": "https://api.github.com/users/larsoner", "html_url": "https://github.com/larsoner", "followers_url": "https://api.github.com/users/larsoner/followers", "following_url": "https://api.github.com/users/larsoner/following{/other_user}", "gists_url": "https://api.github.com/users/larsoner/gists{/gist_id}", "starred_url": "https://api.github.com/users/larsoner/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/larsoner/subscriptions", "organizations_url": "https://api.github.com/users/larsoner/orgs", "repos_url": "https://api.github.com/users/larsoner/repos", "events_url": "https://api.github.com/users/larsoner/events{/privacy}", "received_events_url": "https://api.github.com/users/larsoner/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 133, "state": "closed", "created_at": "2020-03-04T15:04:16Z", "updated_at": "2020-09-24T15:54:34Z", "due_on": "2020-09-15T07:00:00Z", "closed_at": "2020-09-24T15:54:34Z"}, "comments": 9, "created_at": "2019-12-19T17:08:04Z", "updated_at": "2020-04-27T17:46:17Z", "closed_at": "2020-04-27T17:46:16Z", "author_association": "NONE", "active_lock_reason": null, "body": "#### Describe the bug\r\nWe get an error of \"No Data channels found\"  when selecting emg channels with `picks=['emg']` in a dataset which contains only emg channels. \r\n\r\n#### Steps to reproduce\r\n\r\ntogether with @jasmainak and @simonatemereanca we wrote this script:\r\nhttps://gist.github.com/TariqCannonier/0c708ae01268bfbb766bd320eac45035\r\nto reproduce the bug.\r\n\r\n#### Expected results\r\nShould plot PSD for EMG channels only\r\n\r\n\r\n#### Actual results\r\n```py\r\n\r\n  File \"<ipython-input-7-ad302adea22f>\", line 1, in <module>\r\n    runfile('/Users/tariqcannonier/.spyder-py3/temp.py', wdir='/Users/tariqcannonier/.spyder-py3')\r\n\r\n  File \"/Users/tariqcannonier/anaconda3/lib/python3.7/site-packages/spyder_kernels/customize/spydercustomize.py\", line 827, in runfile\r\n    execfile(filename, namespace)\r\n\r\n  File \"/Users/tariqcannonier/anaconda3/lib/python3.7/site-packages/spyder_kernels/customize/spydercustomize.py\", line 110, in execfile\r\n    exec(compile(f.read(), filename, 'exec'), namespace)\r\n\r\n  File \"/Users/tariqcannonier/.spyder-py3/temp.py\", line 20, in <module>\r\n    raw.plot_psd(picks=['emg'])\r\n\r\n  File \"</Users/tariqcannonier/anaconda3/lib/python3.7/site-packages/mne/externals/decorator.py:decorator-gen-147>\", line 2, in plot_psd\r\n\r\n  File \"/Users/tariqcannonier/anaconda3/lib/python3.7/site-packages/mne/utils/_logging.py\", line 90, in wrapper\r\n    return function(*args, **kwargs)\r\n\r\n  File \"/Users/tariqcannonier/anaconda3/lib/python3.7/site-packages/mne/io/base.py\", line 1585, in plot_psd\r\n    spatial_colors=spatial_colors, verbose=verbose)\r\n\r\n  File \"</Users/tariqcannonier/anaconda3/lib/python3.7/site-packages/mne/externals/decorator.py:decorator-gen-133>\", line 2, in plot_raw_psd\r\n\r\n  File \"/Users/tariqcannonier/anaconda3/lib/python3.7/site-packages/mne/utils/_logging.py\", line 90, in wrapper\r\n    return function(*args, **kwargs)\r\n\r\n  File \"/Users/tariqcannonier/anaconda3/lib/python3.7/site-packages/mne/viz/raw.py\", line 621, in plot_raw_psd\r\n    raw.info, proj, picks, ax, area_mode)\r\n\r\n  File \"/Users/tariqcannonier/anaconda3/lib/python3.7/site-packages/mne/viz/utils.py\", line 3005, in _set_psd_plot_params\r\n    raise RuntimeError('No data channels found')\r\n\r\nRuntimeError: No data channels found\r\n```\r\n\r\n#### Additional information\r\nMy system information is here:\r\n```py\r\nPlatform:      Darwin-15.6.0-x86_64-i386-64bit\r\nPython:        3.7.4 (default, Aug 13 2019, 15:17:50)  [Clang 4.0.1 (tags/RELEASE_401/final)]\r\nExecutable:    /Users/tariqcannonier/anaconda3/bin/python\r\nCPU:           i386: 4 cores\r\nMemory:        8.0 GB\r\n\r\nmne:           0.20.dev0\r\nnumpy:         1.17.2 {blas=mkl_rt, lapack=mkl_rt}\r\nscipy:         1.3.1\r\nmatplotlib:    3.1.1 {backend=MacOSX}\r\n\r\nsklearn:       0.21.3\r\nnumba:         0.45.1\r\nnibabel:       2.5.1\r\ncupy:          Not found\r\npandas:        0.25.2\r\ndipy:          1.0.0\r\nmayavi:        4.7.1 {qt_api=pyqt5, PyQt5=5.10.1}\r\npyvista:       0.22.4\r\nvtk:           8.1.2\r\nNone\r\n\r\n```\r\n", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/7154/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/7154/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/7143", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/7143/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/7143/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/7143/events", "html_url": "https://github.com/mne-tools/mne-python/issues/7143", "id": 537837926, "node_id": "MDU6SXNzdWU1Mzc4Mzc5MjY=", "number": 7143, "title": "BUG view param in brain plot with pyvista", "user": {"login": "agramfort", "id": 161052, "node_id": "MDQ6VXNlcjE2MTA1Mg==", "avatar_url": "https://avatars.githubusercontent.com/u/161052?v=4", "gravatar_id": "", "url": "https://api.github.com/users/agramfort", "html_url": "https://github.com/agramfort", "followers_url": "https://api.github.com/users/agramfort/followers", "following_url": "https://api.github.com/users/agramfort/following{/other_user}", "gists_url": "https://api.github.com/users/agramfort/gists{/gist_id}", "starred_url": "https://api.github.com/users/agramfort/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/agramfort/subscriptions", "organizations_url": "https://api.github.com/users/agramfort/orgs", "repos_url": "https://api.github.com/users/agramfort/repos", "events_url": "https://api.github.com/users/agramfort/events{/privacy}", "received_events_url": "https://api.github.com/users/agramfort/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}, {"id": 1290799321, "node_id": "MDU6TGFiZWwxMjkwNzk5MzIx", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/VIZ", "name": "VIZ", "color": "22e861", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": {"login": "GuillaumeFavelier", "id": 18143289, "node_id": "MDQ6VXNlcjE4MTQzMjg5", "avatar_url": "https://avatars.githubusercontent.com/u/18143289?v=4", "gravatar_id": "", "url": "https://api.github.com/users/GuillaumeFavelier", "html_url": "https://github.com/GuillaumeFavelier", "followers_url": "https://api.github.com/users/GuillaumeFavelier/followers", "following_url": "https://api.github.com/users/GuillaumeFavelier/following{/other_user}", "gists_url": "https://api.github.com/users/GuillaumeFavelier/gists{/gist_id}", "starred_url": "https://api.github.com/users/GuillaumeFavelier/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/GuillaumeFavelier/subscriptions", "organizations_url": "https://api.github.com/users/GuillaumeFavelier/orgs", "repos_url": "https://api.github.com/users/GuillaumeFavelier/repos", "events_url": "https://api.github.com/users/GuillaumeFavelier/events{/privacy}", "received_events_url": "https://api.github.com/users/GuillaumeFavelier/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "GuillaumeFavelier", "id": 18143289, "node_id": "MDQ6VXNlcjE4MTQzMjg5", "avatar_url": "https://avatars.githubusercontent.com/u/18143289?v=4", "gravatar_id": "", "url": "https://api.github.com/users/GuillaumeFavelier", "html_url": "https://github.com/GuillaumeFavelier", "followers_url": "https://api.github.com/users/GuillaumeFavelier/followers", "following_url": "https://api.github.com/users/GuillaumeFavelier/following{/other_user}", "gists_url": "https://api.github.com/users/GuillaumeFavelier/gists{/gist_id}", "starred_url": "https://api.github.com/users/GuillaumeFavelier/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/GuillaumeFavelier/subscriptions", "organizations_url": "https://api.github.com/users/GuillaumeFavelier/orgs", "repos_url": "https://api.github.com/users/GuillaumeFavelier/repos", "events_url": "https://api.github.com/users/GuillaumeFavelier/events{/privacy}", "received_events_url": "https://api.github.com/users/GuillaumeFavelier/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 1, "created_at": "2019-12-14T00:39:43Z", "updated_at": "2019-12-19T13:06:31Z", "closed_at": "2019-12-19T13:06:31Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "see\r\nhttps://mne.tools/dev/auto_examples/inverse/plot_time_frequency_mixed_norm_inverse.html\r\nvs\r\nhttps://mne.tools/0.18/auto_examples/inverse/plot_time_frequency_mixed_norm_inverse.html\r\n\r\nview medial parameter is ignored with pyvista backend.\r\n\r\ncc @GuillaumeFavelier \r\n", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/7143/reactions", "total_count": 1, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/7143/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/7083", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/7083/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/7083/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/7083/events", "html_url": "https://github.com/mne-tools/mne-python/issues/7083", "id": 524896407, "node_id": "MDU6SXNzdWU1MjQ4OTY0MDc=", "number": 7083, "title": "BUG, VIZ: plot_vector_source_estimates", "user": {"login": "GuillaumeFavelier", "id": 18143289, "node_id": "MDQ6VXNlcjE4MTQzMjg5", "avatar_url": "https://avatars.githubusercontent.com/u/18143289?v=4", "gravatar_id": "", "url": "https://api.github.com/users/GuillaumeFavelier", "html_url": "https://github.com/GuillaumeFavelier", "followers_url": "https://api.github.com/users/GuillaumeFavelier/followers", "following_url": "https://api.github.com/users/GuillaumeFavelier/following{/other_user}", "gists_url": "https://api.github.com/users/GuillaumeFavelier/gists{/gist_id}", "starred_url": "https://api.github.com/users/GuillaumeFavelier/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/GuillaumeFavelier/subscriptions", "organizations_url": "https://api.github.com/users/GuillaumeFavelier/orgs", "repos_url": "https://api.github.com/users/GuillaumeFavelier/repos", "events_url": "https://api.github.com/users/GuillaumeFavelier/events{/privacy}", "received_events_url": "https://api.github.com/users/GuillaumeFavelier/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}, {"id": 1290799321, "node_id": "MDU6TGFiZWwxMjkwNzk5MzIx", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/VIZ", "name": "VIZ", "color": "22e861", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2019-11-19T09:54:16Z", "updated_at": "2019-11-20T15:46:03Z", "closed_at": "2019-11-20T15:46:03Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Bug most likely introduced in #7030 where `plot_vector_source_estimates` raises a `ValueError` when `hemi=both`. To reproduce, you can execute this [gist](https://gist.github.com/rythorpe/c51a5b66b492b67437843283c67050af).\r\n\r\nMore details in https://github.com/mne-tools/mne-python/pull/7030#issuecomment-555175886", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/7083/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/7083/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/7020", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/7020/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/7020/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/7020/events", "html_url": "https://github.com/mne-tools/mne-python/issues/7020", "id": 517400092, "node_id": "MDU6SXNzdWU1MTc0MDAwOTI=", "number": 7020, "title": "Bug in vector source estimate plotting", "user": {"login": "jasmainak", "id": 15852194, "node_id": "MDQ6VXNlcjE1ODUyMTk0", "avatar_url": "https://avatars.githubusercontent.com/u/15852194?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jasmainak", "html_url": "https://github.com/jasmainak", "followers_url": "https://api.github.com/users/jasmainak/followers", "following_url": "https://api.github.com/users/jasmainak/following{/other_user}", "gists_url": "https://api.github.com/users/jasmainak/gists{/gist_id}", "starred_url": "https://api.github.com/users/jasmainak/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jasmainak/subscriptions", "organizations_url": "https://api.github.com/users/jasmainak/orgs", "repos_url": "https://api.github.com/users/jasmainak/repos", "events_url": "https://api.github.com/users/jasmainak/events{/privacy}", "received_events_url": "https://api.github.com/users/jasmainak/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}, {"id": 1290799321, "node_id": "MDU6TGFiZWwxMjkwNzk5MzIx", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/VIZ", "name": "VIZ", "color": "22e861", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": {"login": "GuillaumeFavelier", "id": 18143289, "node_id": "MDQ6VXNlcjE4MTQzMjg5", "avatar_url": "https://avatars.githubusercontent.com/u/18143289?v=4", "gravatar_id": "", "url": "https://api.github.com/users/GuillaumeFavelier", "html_url": "https://github.com/GuillaumeFavelier", "followers_url": "https://api.github.com/users/GuillaumeFavelier/followers", "following_url": "https://api.github.com/users/GuillaumeFavelier/following{/other_user}", "gists_url": "https://api.github.com/users/GuillaumeFavelier/gists{/gist_id}", "starred_url": "https://api.github.com/users/GuillaumeFavelier/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/GuillaumeFavelier/subscriptions", "organizations_url": "https://api.github.com/users/GuillaumeFavelier/orgs", "repos_url": "https://api.github.com/users/GuillaumeFavelier/repos", "events_url": "https://api.github.com/users/GuillaumeFavelier/events{/privacy}", "received_events_url": "https://api.github.com/users/GuillaumeFavelier/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "GuillaumeFavelier", "id": 18143289, "node_id": "MDQ6VXNlcjE4MTQzMjg5", "avatar_url": "https://avatars.githubusercontent.com/u/18143289?v=4", "gravatar_id": "", "url": "https://api.github.com/users/GuillaumeFavelier", "html_url": "https://github.com/GuillaumeFavelier", "followers_url": "https://api.github.com/users/GuillaumeFavelier/followers", "following_url": "https://api.github.com/users/GuillaumeFavelier/following{/other_user}", "gists_url": "https://api.github.com/users/GuillaumeFavelier/gists{/gist_id}", "starred_url": "https://api.github.com/users/GuillaumeFavelier/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/GuillaumeFavelier/subscriptions", "organizations_url": "https://api.github.com/users/GuillaumeFavelier/orgs", "repos_url": "https://api.github.com/users/GuillaumeFavelier/repos", "events_url": "https://api.github.com/users/GuillaumeFavelier/events{/privacy}", "received_events_url": "https://api.github.com/users/GuillaumeFavelier/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 18, "created_at": "2019-11-04T21:02:55Z", "updated_at": "2019-11-09T14:42:09Z", "closed_at": "2019-11-09T14:42:09Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "#### Describe the bug\r\nThis was reported to me by @rythorpe. The vector source estimate does not plot arrows for the somato data.\r\n\r\n#### Steps and/or code to reproduce\r\nHere is a [gist](https://gist.github.com/rythorpe/c51a5b66b492b67437843283c67050af) to reproduce the problem. I don't see any issue with the script. Indeed, if you do:\r\n\r\n```py\r\nprint(stc)\r\n```\r\n\r\nyou get:\r\n\r\n```sh\r\n<VectorSourceEstimate  |  8155 vertices, subject : 01, tmin : -199.79521315838787 (ms), tmax : 199.79521315838792 (ms), tstep : 3.3299202193064645 (ms), data shape : (8155, 3, 121)>\r\n```\r\n\r\nand if you do:\r\n\r\n```py\r\nprint(stc.data.shape)\r\n```\r\n\r\nyou get:\r\n\r\n```py\r\n(8155, 3, 121)\r\n```\r\n\r\nindicating that the stc is vector.\r\n\r\n#### Expected results\r\nThere should be an arrow plot\r\n\r\n#### Actual results\r\n\r\nbut the plot shows:\r\n\r\n![noarrows_stc](https://user-images.githubusercontent.com/15852194/68157579-f0c2aa00-ff1b-11e9-8231-b3f113a44c11.png)\r\n\r\n#### Additional information\r\nI'm on the latest master, commit 42948689e.\r\n\r\nand `mne.sys_info()` gives:\r\n\r\n```sh\r\nPlatform:      Linux-3.10.0-957.1.3.el7.x86_64-x86_64-with-centos-7.6.1810-Core\r\nPython:        3.6.7 | packaged by conda-forge | (default, Feb 28 2019, 09:07:38)  [GCC 7.3.0]\r\nExecutable:    /autofs/space/meghnn_001/users/mjas/anaconda3/envs/mne/bin/python\r\nCPU:           x86_64: 64 cores\r\nMemory:        125.3 GB\r\n\r\nmne:           0.20.dev0\r\nnumpy:         1.15.4 {blas=mkl_rt, lapack=mkl_rt}\r\nscipy:         1.2.1\r\nmatplotlib:    3.0.2 {backend=Qt5Agg}\r\n\r\nsklearn:       0.20.2\r\nnumba:         Not found\r\nnibabel:       2.3.3\r\ncupy:          Not found\r\npandas:        0.24.1\r\ndipy:          0.15.0\r\nmayavi:        4.7.0.dev0 {qt_api=pyqt5, PyQt5=5.9.2}\r\npyvista:       Not found\r\nvtk:           8.1.2\r\n```\r\n", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/7020/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/7020/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/6976", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/6976/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/6976/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/6976/events", "html_url": "https://github.com/mne-tools/mne-python/pull/6976", "id": 511205139, "node_id": "MDExOlB1bGxSZXF1ZXN0MzMxNDQ1NDMw", "number": 6976, "title": "Fix ica.plot_properties with bad data", "user": {"login": "wmvanvliet", "id": 428273, "node_id": "MDQ6VXNlcjQyODI3Mw==", "avatar_url": "https://avatars.githubusercontent.com/u/428273?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wmvanvliet", "html_url": "https://github.com/wmvanvliet", "followers_url": "https://api.github.com/users/wmvanvliet/followers", "following_url": "https://api.github.com/users/wmvanvliet/following{/other_user}", "gists_url": "https://api.github.com/users/wmvanvliet/gists{/gist_id}", "starred_url": "https://api.github.com/users/wmvanvliet/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wmvanvliet/subscriptions", "organizations_url": "https://api.github.com/users/wmvanvliet/orgs", "repos_url": "https://api.github.com/users/wmvanvliet/repos", "events_url": "https://api.github.com/users/wmvanvliet/events{/privacy}", "received_events_url": "https://api.github.com/users/wmvanvliet/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2019-10-23T09:45:55Z", "updated_at": "2021-10-18T06:06:22Z", "closed_at": "2019-10-25T13:38:20Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/mne-tools/mne-python/pulls/6976", "html_url": "https://github.com/mne-tools/mne-python/pull/6976", "diff_url": "https://github.com/mne-tools/mne-python/pull/6976.diff", "patch_url": "https://github.com/mne-tools/mne-python/pull/6976.patch", "merged_at": "2019-10-25T13:38:19Z"}, "body": "When plotting ICA component properties, one of the things that gets plotted is the component PSD. This uses the helper function `_convert_psds` that performs a check on the presense of zeros in the\r\nPSD. When zeros are detected, a warning is printed. To construct the warning message string, it is assumed that the first dimension of the `psds` array contains channels. However, in the case of `ica.plot_properties`, the first dimensions contains epochs. Hence, the construction of the warning message string fails with an index out of bounds error.\r\n\r\nThis PR adds a flag to the `_convert_psds` helper function to inform it that the first dimension of the `psds` array contains epochs rather than channels.", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/6976/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/6976/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/6972", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/6972/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/6972/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/6972/events", "html_url": "https://github.com/mne-tools/mne-python/pull/6972", "id": 510749470, "node_id": "MDExOlB1bGxSZXF1ZXN0MzMxMDY5NDE0", "number": 6972, "title": "[MRG] Fix borders on pyvista backend", "user": {"login": "GuillaumeFavelier", "id": 18143289, "node_id": "MDQ6VXNlcjE4MTQzMjg5", "avatar_url": "https://avatars.githubusercontent.com/u/18143289?v=4", "gravatar_id": "", "url": "https://api.github.com/users/GuillaumeFavelier", "html_url": "https://github.com/GuillaumeFavelier", "followers_url": "https://api.github.com/users/GuillaumeFavelier/followers", "following_url": "https://api.github.com/users/GuillaumeFavelier/following{/other_user}", "gists_url": "https://api.github.com/users/GuillaumeFavelier/gists{/gist_id}", "starred_url": "https://api.github.com/users/GuillaumeFavelier/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/GuillaumeFavelier/subscriptions", "organizations_url": "https://api.github.com/users/GuillaumeFavelier/orgs", "repos_url": "https://api.github.com/users/GuillaumeFavelier/repos", "events_url": "https://api.github.com/users/GuillaumeFavelier/events{/privacy}", "received_events_url": "https://api.github.com/users/GuillaumeFavelier/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}, {"id": 1290799321, "node_id": "MDU6TGFiZWwxMjkwNzk5MzIx", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/VIZ", "name": "VIZ", "color": "22e861", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": {"login": "GuillaumeFavelier", "id": 18143289, "node_id": "MDQ6VXNlcjE4MTQzMjg5", "avatar_url": "https://avatars.githubusercontent.com/u/18143289?v=4", "gravatar_id": "", "url": "https://api.github.com/users/GuillaumeFavelier", "html_url": "https://github.com/GuillaumeFavelier", "followers_url": "https://api.github.com/users/GuillaumeFavelier/followers", "following_url": "https://api.github.com/users/GuillaumeFavelier/following{/other_user}", "gists_url": "https://api.github.com/users/GuillaumeFavelier/gists{/gist_id}", "starred_url": "https://api.github.com/users/GuillaumeFavelier/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/GuillaumeFavelier/subscriptions", "organizations_url": "https://api.github.com/users/GuillaumeFavelier/orgs", "repos_url": "https://api.github.com/users/GuillaumeFavelier/repos", "events_url": "https://api.github.com/users/GuillaumeFavelier/events{/privacy}", "received_events_url": "https://api.github.com/users/GuillaumeFavelier/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "GuillaumeFavelier", "id": 18143289, "node_id": "MDQ6VXNlcjE4MTQzMjg5", "avatar_url": "https://avatars.githubusercontent.com/u/18143289?v=4", "gravatar_id": "", "url": "https://api.github.com/users/GuillaumeFavelier", "html_url": "https://github.com/GuillaumeFavelier", "followers_url": "https://api.github.com/users/GuillaumeFavelier/followers", "following_url": "https://api.github.com/users/GuillaumeFavelier/following{/other_user}", "gists_url": "https://api.github.com/users/GuillaumeFavelier/gists{/gist_id}", "starred_url": "https://api.github.com/users/GuillaumeFavelier/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/GuillaumeFavelier/subscriptions", "organizations_url": "https://api.github.com/users/GuillaumeFavelier/orgs", "repos_url": "https://api.github.com/users/GuillaumeFavelier/repos", "events_url": "https://api.github.com/users/GuillaumeFavelier/events{/privacy}", "received_events_url": "https://api.github.com/users/GuillaumeFavelier/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 5, "created_at": "2019-10-22T15:50:52Z", "updated_at": "2019-10-24T09:42:38Z", "closed_at": "2019-10-23T16:27:00Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/mne-tools/mne-python/pulls/6972", "html_url": "https://github.com/mne-tools/mne-python/pull/6972", "diff_url": "https://github.com/mne-tools/mne-python/pull/6972.diff", "patch_url": "https://github.com/mne-tools/mne-python/pull/6972.patch", "merged_at": "2019-10-23T16:27:00Z"}, "body": "This is a fastfix for the broken cropping in `examples/visualization/plot_publication_figure`.\r\n\r\n![image](https://user-images.githubusercontent.com/18143289/67304654-72661100-f4f4-11e9-8a6c-de36050faff3.png)\r\n", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/6972/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/6972/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/6968", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/6968/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/6968/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/6968/events", "html_url": "https://github.com/mne-tools/mne-python/issues/6968", "id": 509369585, "node_id": "MDU6SXNzdWU1MDkzNjk1ODU=", "number": 6968, "title": "plot_psd(xscale='log') does not work in jupyter notebook", "user": {"login": "jasmainak", "id": 15852194, "node_id": "MDQ6VXNlcjE1ODUyMTk0", "avatar_url": "https://avatars.githubusercontent.com/u/15852194?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jasmainak", "html_url": "https://github.com/jasmainak", "followers_url": "https://api.github.com/users/jasmainak/followers", "following_url": "https://api.github.com/users/jasmainak/following{/other_user}", "gists_url": "https://api.github.com/users/jasmainak/gists{/gist_id}", "starred_url": "https://api.github.com/users/jasmainak/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jasmainak/subscriptions", "organizations_url": "https://api.github.com/users/jasmainak/orgs", "repos_url": "https://api.github.com/users/jasmainak/repos", "events_url": "https://api.github.com/users/jasmainak/events{/privacy}", "received_events_url": "https://api.github.com/users/jasmainak/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2019-10-19T01:11:22Z", "updated_at": "2019-12-29T07:28:31Z", "closed_at": "2019-12-29T07:28:31Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "Steps to reproduce:\r\n\r\n```py\r\n%matplotlib inline\r\nimport mne\r\nfrom mne.datasets import sample\r\n\r\ndata_path = sample.data_path()\r\nfname = data_path + '/MEG/sample/sample_audvis_raw.fif'\r\n\r\nraw = mne.io.read_raw_fif(fname)\r\nraw.plot_psd(xscale='log')\r\n```\r\n\r\nyou'll get an error like this:\r\n\r\n```py\r\n---------------------------------------------------------------------------\r\nValueError                                Traceback (most recent call last)\r\n~/anaconda3/lib/python3.7/site-packages/IPython/core/formatters.py in __call__(self, obj)\r\n    339                 pass\r\n    340             else:\r\n--> 341                 return printer(obj)\r\n    342             # Finally look for special method names\r\n    343             method = get_real_method(obj, self.print_method)\r\n\r\n~/anaconda3/lib/python3.7/site-packages/IPython/core/pylabtools.py in <lambda>(fig)\r\n    242 \r\n    243     if 'png' in formats:\r\n--> 244         png_formatter.for_type(Figure, lambda fig: print_figure(fig, 'png', **kwargs))\r\n    245     if 'retina' in formats or 'png2x' in formats:\r\n    246         png_formatter.for_type(Figure, lambda fig: retina_figure(fig, **kwargs))\r\n\r\n~/anaconda3/lib/python3.7/site-packages/IPython/core/pylabtools.py in print_figure(fig, fmt, bbox_inches, **kwargs)\r\n    126 \r\n    127     bytes_io = BytesIO()\r\n--> 128     fig.canvas.print_figure(bytes_io, **kw)\r\n    129     data = bytes_io.getvalue()\r\n    130     if fmt == 'svg':\r\n\r\n~/anaconda3/lib/python3.7/site-packages/matplotlib/backend_bases.py in print_figure(self, filename, dpi, facecolor, edgecolor, orientation, format, bbox_inches, **kwargs)\r\n   2080                     orientation=orientation,\r\n   2081                     bbox_inches_restore=_bbox_inches_restore,\r\n-> 2082                     **kwargs)\r\n   2083             finally:\r\n   2084                 if bbox_inches and restore_bbox:\r\n\r\n~/anaconda3/lib/python3.7/site-packages/matplotlib/backends/backend_agg.py in print_png(self, filename_or_obj, metadata, pil_kwargs, *args, **kwargs)\r\n    525 \r\n    526         else:\r\n--> 527             FigureCanvasAgg.draw(self)\r\n    528             renderer = self.get_renderer()\r\n    529             with cbook._setattr_cm(renderer, dpi=self.figure.dpi), \\\r\n\r\n~/anaconda3/lib/python3.7/site-packages/matplotlib/backends/backend_agg.py in draw(self)\r\n    384         Draw the figure using the renderer.\r\n    385         \"\"\"\r\n--> 386         self.renderer = self.get_renderer(cleared=True)\r\n    387         with RendererAgg.lock:\r\n    388             self.figure.draw(self.renderer)\r\n\r\n~/anaconda3/lib/python3.7/site-packages/matplotlib/backends/backend_agg.py in get_renderer(self, cleared)\r\n    397                           and getattr(self, \"_lastKey\", None) == key)\r\n    398         if not reuse_renderer:\r\n--> 399             self.renderer = RendererAgg(w, h, self.figure.dpi)\r\n    400             self._lastKey = key\r\n    401         elif cleared:\r\n\r\n~/anaconda3/lib/python3.7/site-packages/matplotlib/backends/backend_agg.py in __init__(self, width, height, dpi)\r\n     84         self.width = width\r\n     85         self.height = height\r\n---> 86         self._renderer = _RendererAgg(int(width), int(height), dpi)\r\n     87         self._filter_renderers = []\r\n     88 \r\n\r\nValueError: Image size of 115104x291 pixels is too large. It must be less than 2^16 in each direction.\r\n\r\n<Figure size 432x288 with 6 Axes>\r\n\r\n---------------------------------------------------------------------------\r\nValueError                                Traceback (most recent call last)\r\n~/anaconda3/lib/python3.7/site-packages/IPython/core/formatters.py in __call__(self, obj)\r\n    339                 pass\r\n    340             else:\r\n--> 341                 return printer(obj)\r\n    342             # Finally look for special method names\r\n    343             method = get_real_method(obj, self.print_method)\r\n\r\n~/anaconda3/lib/python3.7/site-packages/IPython/core/pylabtools.py in <lambda>(fig)\r\n    242 \r\n    243     if 'png' in formats:\r\n--> 244         png_formatter.for_type(Figure, lambda fig: print_figure(fig, 'png', **kwargs))\r\n    245     if 'retina' in formats or 'png2x' in formats:\r\n    246         png_formatter.for_type(Figure, lambda fig: retina_figure(fig, **kwargs))\r\n\r\n~/anaconda3/lib/python3.7/site-packages/IPython/core/pylabtools.py in print_figure(fig, fmt, bbox_inches, **kwargs)\r\n    126 \r\n    127     bytes_io = BytesIO()\r\n--> 128     fig.canvas.print_figure(bytes_io, **kw)\r\n    129     data = bytes_io.getvalue()\r\n    130     if fmt == 'svg':\r\n\r\n~/anaconda3/lib/python3.7/site-packages/matplotlib/backend_bases.py in print_figure(self, filename, dpi, facecolor, edgecolor, orientation, format, bbox_inches, **kwargs)\r\n   2080                     orientation=orientation,\r\n   2081                     bbox_inches_restore=_bbox_inches_restore,\r\n-> 2082                     **kwargs)\r\n   2083             finally:\r\n   2084                 if bbox_inches and restore_bbox:\r\n\r\n~/anaconda3/lib/python3.7/site-packages/matplotlib/backends/backend_agg.py in print_png(self, filename_or_obj, metadata, pil_kwargs, *args, **kwargs)\r\n    525 \r\n    526         else:\r\n--> 527             FigureCanvasAgg.draw(self)\r\n    528             renderer = self.get_renderer()\r\n    529             with cbook._setattr_cm(renderer, dpi=self.figure.dpi), \\\r\n\r\n~/anaconda3/lib/python3.7/site-packages/matplotlib/backends/backend_agg.py in draw(self)\r\n    384         Draw the figure using the renderer.\r\n    385         \"\"\"\r\n--> 386         self.renderer = self.get_renderer(cleared=True)\r\n    387         with RendererAgg.lock:\r\n    388             self.figure.draw(self.renderer)\r\n\r\n~/anaconda3/lib/python3.7/site-packages/matplotlib/backends/backend_agg.py in get_renderer(self, cleared)\r\n    397                           and getattr(self, \"_lastKey\", None) == key)\r\n    398         if not reuse_renderer:\r\n--> 399             self.renderer = RendererAgg(w, h, self.figure.dpi)\r\n    400             self._lastKey = key\r\n    401         elif cleared:\r\n\r\n~/anaconda3/lib/python3.7/site-packages/matplotlib/backends/backend_agg.py in __init__(self, width, height, dpi)\r\n     84         self.width = width\r\n     85         self.height = height\r\n---> 86         self._renderer = _RendererAgg(int(width), int(height), dpi)\r\n     87         self._filter_renderers = []\r\n     88 \r\n\r\nValueError: Image size of 115104x291 pixels is too large. It must be less than 2^16 in each direction.\r\n```\r\n\r\nalso the validation of inputs is not proper. If I use `xscale='blah'`, it does not crash", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/6968/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/6968/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/6927", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/6927/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/6927/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/6927/events", "html_url": "https://github.com/mne-tools/mne-python/pull/6927", "id": 503588342, "node_id": "MDExOlB1bGxSZXF1ZXN0MzI1NDExNjEy", "number": 6927, "title": "FIX: Fix nave regression", "user": {"login": "larsoner", "id": 2365790, "node_id": "MDQ6VXNlcjIzNjU3OTA=", "avatar_url": "https://avatars.githubusercontent.com/u/2365790?v=4", "gravatar_id": "", "url": "https://api.github.com/users/larsoner", "html_url": "https://github.com/larsoner", "followers_url": "https://api.github.com/users/larsoner/followers", "following_url": "https://api.github.com/users/larsoner/following{/other_user}", "gists_url": "https://api.github.com/users/larsoner/gists{/gist_id}", "starred_url": "https://api.github.com/users/larsoner/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/larsoner/subscriptions", "organizations_url": "https://api.github.com/users/larsoner/orgs", "repos_url": "https://api.github.com/users/larsoner/repos", "events_url": "https://api.github.com/users/larsoner/events{/privacy}", "received_events_url": "https://api.github.com/users/larsoner/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2019-10-07T17:29:09Z", "updated_at": "2020-04-23T19:59:51Z", "closed_at": "2019-10-07T18:41:36Z", "author_association": "MEMBER", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/mne-tools/mne-python/pulls/6927", "html_url": "https://github.com/mne-tools/mne-python/pull/6927", "diff_url": "https://github.com/mne-tools/mne-python/pull/6927.diff", "patch_url": "https://github.com/mne-tools/mne-python/pull/6927.patch", "merged_at": "2019-10-07T18:41:35Z"}, "body": "Fixes a `nave` regression introduced by #6492", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/6927/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/6927/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/6836", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/6836/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/6836/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/6836/events", "html_url": "https://github.com/mne-tools/mne-python/issues/6836", "id": 499551467, "node_id": "MDU6SXNzdWU0OTk1NTE0Njc=", "number": 6836, "title": "mne.preprocessing.corrmap auto threshold error handling", "user": {"login": "nugenta", "id": 15691360, "node_id": "MDQ6VXNlcjE1NjkxMzYw", "avatar_url": "https://avatars.githubusercontent.com/u/15691360?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nugenta", "html_url": "https://github.com/nugenta", "followers_url": "https://api.github.com/users/nugenta/followers", "following_url": "https://api.github.com/users/nugenta/following{/other_user}", "gists_url": "https://api.github.com/users/nugenta/gists{/gist_id}", "starred_url": "https://api.github.com/users/nugenta/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nugenta/subscriptions", "organizations_url": "https://api.github.com/users/nugenta/orgs", "repos_url": "https://api.github.com/users/nugenta/repos", "events_url": "https://api.github.com/users/nugenta/events{/privacy}", "received_events_url": "https://api.github.com/users/nugenta/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/mne-tools/mne-python/milestones/16", "html_url": "https://github.com/mne-tools/mne-python/milestone/16", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/milestones/16/labels", "id": 4651780, "node_id": "MDk6TWlsZXN0b25lNDY1MTc4MA==", "number": 16, "title": "0.20", "description": "", "creator": {"login": "larsoner", "id": 2365790, "node_id": "MDQ6VXNlcjIzNjU3OTA=", "avatar_url": "https://avatars.githubusercontent.com/u/2365790?v=4", "gravatar_id": "", "url": "https://api.github.com/users/larsoner", "html_url": "https://github.com/larsoner", "followers_url": "https://api.github.com/users/larsoner/followers", "following_url": "https://api.github.com/users/larsoner/following{/other_user}", "gists_url": "https://api.github.com/users/larsoner/gists{/gist_id}", "starred_url": "https://api.github.com/users/larsoner/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/larsoner/subscriptions", "organizations_url": "https://api.github.com/users/larsoner/orgs", "repos_url": "https://api.github.com/users/larsoner/repos", "events_url": "https://api.github.com/users/larsoner/events{/privacy}", "received_events_url": "https://api.github.com/users/larsoner/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 122, "state": "closed", "created_at": "2019-09-11T18:34:03Z", "updated_at": "2020-03-27T18:47:50Z", "due_on": "2020-03-18T07:00:00Z", "closed_at": "2020-03-27T18:47:50Z"}, "comments": 11, "created_at": "2019-09-27T17:01:27Z", "updated_at": "2019-10-11T15:15:44Z", "closed_at": "2019-10-11T15:15:44Z", "author_association": "NONE", "active_lock_reason": null, "body": "using the threshold=\"auto\" option in corrmap sets the lower threshold for correlation at 0.6 - if there is no correlation above that threshold, the routine dies with the not terribly informative \"ValueError: x or y has zero length\". Could either have a lower min threshold that's checked, or just provide feedback that there are no maps correlating above threshold. \r\n", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/6836/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/6836/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/6566", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/6566/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/6566/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/6566/events", "html_url": "https://github.com/mne-tools/mne-python/issues/6566", "id": 467621910, "node_id": "MDU6SXNzdWU0Njc2MjE5MTA=", "number": 6566, "title": "VIZ, BUG: test_plot_alignment timeout", "user": {"login": "GuillaumeFavelier", "id": 18143289, "node_id": "MDQ6VXNlcjE4MTQzMjg5", "avatar_url": "https://avatars.githubusercontent.com/u/18143289?v=4", "gravatar_id": "", "url": "https://api.github.com/users/GuillaumeFavelier", "html_url": "https://github.com/GuillaumeFavelier", "followers_url": "https://api.github.com/users/GuillaumeFavelier/followers", "following_url": "https://api.github.com/users/GuillaumeFavelier/following{/other_user}", "gists_url": "https://api.github.com/users/GuillaumeFavelier/gists{/gist_id}", "starred_url": "https://api.github.com/users/GuillaumeFavelier/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/GuillaumeFavelier/subscriptions", "organizations_url": "https://api.github.com/users/GuillaumeFavelier/orgs", "repos_url": "https://api.github.com/users/GuillaumeFavelier/repos", "events_url": "https://api.github.com/users/GuillaumeFavelier/events{/privacy}", "received_events_url": "https://api.github.com/users/GuillaumeFavelier/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}, {"id": 1290799321, "node_id": "MDU6TGFiZWwxMjkwNzk5MzIx", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/VIZ", "name": "VIZ", "color": "22e861", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2019-07-12T22:22:08Z", "updated_at": "2019-07-14T14:40:24Z", "closed_at": "2019-07-14T14:40:24Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "As noticed by @drammock , the `test_plot_alignment()` in `mne/viz/tests/test_3d.py` seems to [timout after 120 seconds](https://travis-ci.org/mne-tools/mne-python/jobs/558019119#L3570) (limit fixed currently) on Mac. Without confirmation if it's spurious or not, I [experienced it myself](https://github.com/mne-tools/mne-python/pull/6551) and it would be annoying to break Travis systematically. So for now, we see several ways to fix this:\r\n* increase timeout\r\n* refactor the test either in less calls with the same coverage\r\n* split in multiple tests\r\n* use the `slow_test` decorator\r\n\r\nWhat do you think @massich , @larsoner ?", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/6566/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/6566/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/6528", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/6528/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/6528/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/6528/events", "html_url": "https://github.com/mne-tools/mne-python/issues/6528", "id": 464282273, "node_id": "MDU6SXNzdWU0NjQyODIyNzM=", "number": 6528, "title": "raw.plot(block=True) freezes the jupyter kernel forever", "user": {"login": "wmvanvliet", "id": 428273, "node_id": "MDQ6VXNlcjQyODI3Mw==", "avatar_url": "https://avatars.githubusercontent.com/u/428273?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wmvanvliet", "html_url": "https://github.com/wmvanvliet", "followers_url": "https://api.github.com/users/wmvanvliet/followers", "following_url": "https://api.github.com/users/wmvanvliet/following{/other_user}", "gists_url": "https://api.github.com/users/wmvanvliet/gists{/gist_id}", "starred_url": "https://api.github.com/users/wmvanvliet/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wmvanvliet/subscriptions", "organizations_url": "https://api.github.com/users/wmvanvliet/orgs", "repos_url": "https://api.github.com/users/wmvanvliet/repos", "events_url": "https://api.github.com/users/wmvanvliet/events{/privacy}", "received_events_url": "https://api.github.com/users/wmvanvliet/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 10, "created_at": "2019-07-04T13:59:54Z", "updated_at": "2022-10-12T06:45:25Z", "closed_at": "2019-07-09T12:11:19Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "#### Describe the bug\r\n\r\nWhen plotting continuous \"raw\" data and specify `block=True`, everything works well until you try to close the figure. Control is never handed back to the command line. This does not occur when using command line ipython, but does occur when using Spyder or a Jupyter notebook.\r\n\r\n#### Steps and/or code to reproduce\r\n\r\nIn Spyder or a notebook:\r\n\r\n```Python\r\nimport mne\r\ndata_path = mne.datasets.sample.data_path()\r\nraw = mne.io.read_raw_fif(data_path +'/MEG/sample/sample_audvis_raw.fif')\r\nraw.plot(block=True)\r\n```\r\n\r\nClose the plotting window. The Jupyer kernel now hangs.\r\n\r\n#### Expected results\r\nAfter closing the window, the Jupyter kernel should become responsive again.\r\n\r\n#### Actual results\r\nJupyter kernel never becomes responsive.\r\n\r\n#### Additional information\r\n\r\n```\r\nPlatform:      Linux-4.4.0-148-generic-x86_64-with-debian-stretch-sid\r\nPython:        3.6.8 |Anaconda, Inc.| (default, Dec 30 2018, 01:22:34)  [GCC 7.3.0]\r\nExecutable:    /work/modules/Ubuntu/14.04/amd64/common/anaconda3/latest/envs/neuroimaging/bin/python\r\nCPU:           x86_64: 8 cores\r\nMemory:        15.6 GB\r\n\r\nmne:           0.18.1 (also tested this on current master)\r\nnumpy:         1.16.4 {blas=mkl_rt, lapack=mkl_rt}\r\nscipy:         1.2.1\r\nmatplotlib:    3.1.0 {backend=Qt5Agg}\r\n\r\nsklearn:       0.21.2\r\nnibabel:       2.4.1\r\nmayavi:        4.6.2 {qt_api=pyqt5, PyQt5=5.9.2}\r\ncupy:          Not found\r\npandas:        0.24.2\r\ndipy:          Not found\r\n```\r\n", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/6528/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/6528/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/6510", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/6510/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/6510/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/6510/events", "html_url": "https://github.com/mne-tools/mne-python/pull/6510", "id": 462045115, "node_id": "MDExOlB1bGxSZXF1ZXN0MjkyODM5NDg2", "number": 6510, "title": "WIP,FIX: Fixes arrow rendering [circle full]", "user": {"login": "GuillaumeFavelier", "id": 18143289, "node_id": "MDQ6VXNlcjE4MTQzMjg5", "avatar_url": "https://avatars.githubusercontent.com/u/18143289?v=4", "gravatar_id": "", "url": "https://api.github.com/users/GuillaumeFavelier", "html_url": "https://github.com/GuillaumeFavelier", "followers_url": "https://api.github.com/users/GuillaumeFavelier/followers", "following_url": "https://api.github.com/users/GuillaumeFavelier/following{/other_user}", "gists_url": "https://api.github.com/users/GuillaumeFavelier/gists{/gist_id}", "starred_url": "https://api.github.com/users/GuillaumeFavelier/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/GuillaumeFavelier/subscriptions", "organizations_url": "https://api.github.com/users/GuillaumeFavelier/orgs", "repos_url": "https://api.github.com/users/GuillaumeFavelier/repos", "events_url": "https://api.github.com/users/GuillaumeFavelier/events{/privacy}", "received_events_url": "https://api.github.com/users/GuillaumeFavelier/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}, {"id": 1290799321, "node_id": "MDU6TGFiZWwxMjkwNzk5MzIx", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/VIZ", "name": "VIZ", "color": "22e861", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": {"login": "GuillaumeFavelier", "id": 18143289, "node_id": "MDQ6VXNlcjE4MTQzMjg5", "avatar_url": "https://avatars.githubusercontent.com/u/18143289?v=4", "gravatar_id": "", "url": "https://api.github.com/users/GuillaumeFavelier", "html_url": "https://github.com/GuillaumeFavelier", "followers_url": "https://api.github.com/users/GuillaumeFavelier/followers", "following_url": "https://api.github.com/users/GuillaumeFavelier/following{/other_user}", "gists_url": "https://api.github.com/users/GuillaumeFavelier/gists{/gist_id}", "starred_url": "https://api.github.com/users/GuillaumeFavelier/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/GuillaumeFavelier/subscriptions", "organizations_url": "https://api.github.com/users/GuillaumeFavelier/orgs", "repos_url": "https://api.github.com/users/GuillaumeFavelier/repos", "events_url": "https://api.github.com/users/GuillaumeFavelier/events{/privacy}", "received_events_url": "https://api.github.com/users/GuillaumeFavelier/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "GuillaumeFavelier", "id": 18143289, "node_id": "MDQ6VXNlcjE4MTQzMjg5", "avatar_url": "https://avatars.githubusercontent.com/u/18143289?v=4", "gravatar_id": "", "url": "https://api.github.com/users/GuillaumeFavelier", "html_url": "https://github.com/GuillaumeFavelier", "followers_url": "https://api.github.com/users/GuillaumeFavelier/followers", "following_url": "https://api.github.com/users/GuillaumeFavelier/following{/other_user}", "gists_url": "https://api.github.com/users/GuillaumeFavelier/gists{/gist_id}", "starred_url": "https://api.github.com/users/GuillaumeFavelier/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/GuillaumeFavelier/subscriptions", "organizations_url": "https://api.github.com/users/GuillaumeFavelier/orgs", "repos_url": "https://api.github.com/users/GuillaumeFavelier/repos", "events_url": "https://api.github.com/users/GuillaumeFavelier/events{/privacy}", "received_events_url": "https://api.github.com/users/GuillaumeFavelier/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 7, "created_at": "2019-06-28T13:50:53Z", "updated_at": "2019-07-02T13:36:48Z", "closed_at": "2019-07-01T18:01:37Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/mne-tools/mne-python/pulls/6510", "html_url": "https://github.com/mne-tools/mne-python/pull/6510", "diff_url": "https://github.com/mne-tools/mne-python/pull/6510.diff", "patch_url": "https://github.com/mne-tools/mne-python/pull/6510.patch", "merged_at": "2019-07-01T18:01:37Z"}, "body": "Fixes #6498 \r\n\r\nSo far, what I found is in this [comment](https://github.com/mne-tools/mne-python/issues/6498#issuecomment-506734099). First attempt is by enabling `scale_data_colormap()`.", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/6510/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/6510/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/6498", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/6498/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/6498/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/6498/events", "html_url": "https://github.com/mne-tools/mne-python/issues/6498", "id": 461096169, "node_id": "MDU6SXNzdWU0NjEwOTYxNjk=", "number": 6498, "title": "BUG: Arrow rendering no longer correct (scale issue?)", "user": {"login": "larsoner", "id": 2365790, "node_id": "MDQ6VXNlcjIzNjU3OTA=", "avatar_url": "https://avatars.githubusercontent.com/u/2365790?v=4", "gravatar_id": "", "url": "https://api.github.com/users/larsoner", "html_url": "https://github.com/larsoner", "followers_url": "https://api.github.com/users/larsoner/followers", "following_url": "https://api.github.com/users/larsoner/following{/other_user}", "gists_url": "https://api.github.com/users/larsoner/gists{/gist_id}", "starred_url": "https://api.github.com/users/larsoner/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/larsoner/subscriptions", "organizations_url": "https://api.github.com/users/larsoner/orgs", "repos_url": "https://api.github.com/users/larsoner/repos", "events_url": "https://api.github.com/users/larsoner/events{/privacy}", "received_events_url": "https://api.github.com/users/larsoner/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}, {"id": 1290799321, "node_id": "MDU6TGFiZWwxMjkwNzk5MzIx", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/VIZ", "name": "VIZ", "color": "22e861", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": {"login": "GuillaumeFavelier", "id": 18143289, "node_id": "MDQ6VXNlcjE4MTQzMjg5", "avatar_url": "https://avatars.githubusercontent.com/u/18143289?v=4", "gravatar_id": "", "url": "https://api.github.com/users/GuillaumeFavelier", "html_url": "https://github.com/GuillaumeFavelier", "followers_url": "https://api.github.com/users/GuillaumeFavelier/followers", "following_url": "https://api.github.com/users/GuillaumeFavelier/following{/other_user}", "gists_url": "https://api.github.com/users/GuillaumeFavelier/gists{/gist_id}", "starred_url": "https://api.github.com/users/GuillaumeFavelier/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/GuillaumeFavelier/subscriptions", "organizations_url": "https://api.github.com/users/GuillaumeFavelier/orgs", "repos_url": "https://api.github.com/users/GuillaumeFavelier/repos", "events_url": "https://api.github.com/users/GuillaumeFavelier/events{/privacy}", "received_events_url": "https://api.github.com/users/GuillaumeFavelier/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "GuillaumeFavelier", "id": 18143289, "node_id": "MDQ6VXNlcjE4MTQzMjg5", "avatar_url": "https://avatars.githubusercontent.com/u/18143289?v=4", "gravatar_id": "", "url": "https://api.github.com/users/GuillaumeFavelier", "html_url": "https://github.com/GuillaumeFavelier", "followers_url": "https://api.github.com/users/GuillaumeFavelier/followers", "following_url": "https://api.github.com/users/GuillaumeFavelier/following{/other_user}", "gists_url": "https://api.github.com/users/GuillaumeFavelier/gists{/gist_id}", "starred_url": "https://api.github.com/users/GuillaumeFavelier/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/GuillaumeFavelier/subscriptions", "organizations_url": "https://api.github.com/users/GuillaumeFavelier/orgs", "repos_url": "https://api.github.com/users/GuillaumeFavelier/repos", "events_url": "https://api.github.com/users/GuillaumeFavelier/events{/privacy}", "received_events_url": "https://api.github.com/users/GuillaumeFavelier/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/mne-tools/mne-python/milestones/15", "html_url": "https://github.com/mne-tools/mne-python/milestone/15", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/milestones/15/labels", "id": 4288389, "node_id": "MDk6TWlsZXN0b25lNDI4ODM4OQ==", "number": 15, "title": "0.19", "description": "", "creator": {"login": "larsoner", "id": 2365790, "node_id": "MDQ6VXNlcjIzNjU3OTA=", "avatar_url": "https://avatars.githubusercontent.com/u/2365790?v=4", "gravatar_id": "", "url": "https://api.github.com/users/larsoner", "html_url": "https://github.com/larsoner", "followers_url": "https://api.github.com/users/larsoner/followers", "following_url": "https://api.github.com/users/larsoner/following{/other_user}", "gists_url": "https://api.github.com/users/larsoner/gists{/gist_id}", "starred_url": "https://api.github.com/users/larsoner/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/larsoner/subscriptions", "organizations_url": "https://api.github.com/users/larsoner/orgs", "repos_url": "https://api.github.com/users/larsoner/repos", "events_url": "https://api.github.com/users/larsoner/events{/privacy}", "received_events_url": "https://api.github.com/users/larsoner/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 82, "state": "closed", "created_at": "2019-05-06T15:43:39Z", "updated_at": "2019-09-24T15:27:34Z", "due_on": "2019-09-20T07:00:00Z", "closed_at": "2019-09-24T15:27:34Z"}, "comments": 5, "created_at": "2019-06-26T17:33:39Z", "updated_at": "2019-07-01T18:01:37Z", "closed_at": "2019-07-01T18:01:37Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "In 0.16 it looks good\r\n\r\nhttps://mne-tools.github.io/0.16/auto_tutorials/plot_dipole_orientations.html#limiting-orientations-but-not-fixing-them\r\n\r\nIn 0.17+ the activity disappears for some reason (maybe meters vs mm in the arrow scales?)\r\n\r\nhttps://13931-1301584-gh.circle-artifacts.com/0/dev/auto_tutorials/source-modeling/plot_dipole_orientations.html#limiting-orientations-but-not-fixing-them", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/6498/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/6498/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/6344", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/6344/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/6344/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/6344/events", "html_url": "https://github.com/mne-tools/mne-python/issues/6344", "id": 445868694, "node_id": "MDU6SXNzdWU0NDU4Njg2OTQ=", "number": 6344, "title": "Bug: plot_compare_evokeds, issue with Neuromag-122-data (rename_channels)", "user": {"login": "marsipu", "id": 46245704, "node_id": "MDQ6VXNlcjQ2MjQ1NzA0", "avatar_url": "https://avatars.githubusercontent.com/u/46245704?v=4", "gravatar_id": "", "url": "https://api.github.com/users/marsipu", "html_url": "https://github.com/marsipu", "followers_url": "https://api.github.com/users/marsipu/followers", "following_url": "https://api.github.com/users/marsipu/following{/other_user}", "gists_url": "https://api.github.com/users/marsipu/gists{/gist_id}", "starred_url": "https://api.github.com/users/marsipu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/marsipu/subscriptions", "organizations_url": "https://api.github.com/users/marsipu/orgs", "repos_url": "https://api.github.com/users/marsipu/repos", "events_url": "https://api.github.com/users/marsipu/events{/privacy}", "received_events_url": "https://api.github.com/users/marsipu/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "larsoner", "id": 2365790, "node_id": "MDQ6VXNlcjIzNjU3OTA=", "avatar_url": "https://avatars.githubusercontent.com/u/2365790?v=4", "gravatar_id": "", "url": "https://api.github.com/users/larsoner", "html_url": "https://github.com/larsoner", "followers_url": "https://api.github.com/users/larsoner/followers", "following_url": "https://api.github.com/users/larsoner/following{/other_user}", "gists_url": "https://api.github.com/users/larsoner/gists{/gist_id}", "starred_url": "https://api.github.com/users/larsoner/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/larsoner/subscriptions", "organizations_url": "https://api.github.com/users/larsoner/orgs", "repos_url": "https://api.github.com/users/larsoner/repos", "events_url": "https://api.github.com/users/larsoner/events{/privacy}", "received_events_url": "https://api.github.com/users/larsoner/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "larsoner", "id": 2365790, "node_id": "MDQ6VXNlcjIzNjU3OTA=", "avatar_url": "https://avatars.githubusercontent.com/u/2365790?v=4", "gravatar_id": "", "url": "https://api.github.com/users/larsoner", "html_url": "https://github.com/larsoner", "followers_url": "https://api.github.com/users/larsoner/followers", "following_url": "https://api.github.com/users/larsoner/following{/other_user}", "gists_url": "https://api.github.com/users/larsoner/gists{/gist_id}", "starred_url": "https://api.github.com/users/larsoner/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/larsoner/subscriptions", "organizations_url": "https://api.github.com/users/larsoner/orgs", "repos_url": "https://api.github.com/users/larsoner/repos", "events_url": "https://api.github.com/users/larsoner/events{/privacy}", "received_events_url": "https://api.github.com/users/larsoner/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/mne-tools/mne-python/milestones/15", "html_url": "https://github.com/mne-tools/mne-python/milestone/15", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/milestones/15/labels", "id": 4288389, "node_id": "MDk6TWlsZXN0b25lNDI4ODM4OQ==", "number": 15, "title": "0.19", "description": "", "creator": {"login": "larsoner", "id": 2365790, "node_id": "MDQ6VXNlcjIzNjU3OTA=", "avatar_url": "https://avatars.githubusercontent.com/u/2365790?v=4", "gravatar_id": "", "url": "https://api.github.com/users/larsoner", "html_url": "https://github.com/larsoner", "followers_url": "https://api.github.com/users/larsoner/followers", "following_url": "https://api.github.com/users/larsoner/following{/other_user}", "gists_url": "https://api.github.com/users/larsoner/gists{/gist_id}", "starred_url": "https://api.github.com/users/larsoner/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/larsoner/subscriptions", "organizations_url": "https://api.github.com/users/larsoner/orgs", "repos_url": "https://api.github.com/users/larsoner/repos", "events_url": "https://api.github.com/users/larsoner/events{/privacy}", "received_events_url": "https://api.github.com/users/larsoner/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 82, "state": "closed", "created_at": "2019-05-06T15:43:39Z", "updated_at": "2019-09-24T15:27:34Z", "due_on": "2019-09-20T07:00:00Z", "closed_at": "2019-09-24T15:27:34Z"}, "comments": 7, "created_at": "2019-05-19T21:57:21Z", "updated_at": "2019-06-10T06:31:41Z", "closed_at": "2019-06-10T06:31:41Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "#### Describe the bug\r\nWhen I try to do the mne.viz.plot_compare_evokeds() with data from our Neuromag122-MEG (only planar-gradiometers), the following Error-Message occurs:\r\nValueError: New channel names are not unique, renaming failed\r\n\r\nThe traceback goes to rename_channels which is called within combine_grads.\r\nI assume, the problem is, that the naming of the channels is here very simple:\r\nMEG 001, MEG 002, MEG 003, [...] MEG 122\r\n\r\nIn _combine_grad(1545), the last letter of the ch_name ist changed to 'X', which leads for this data to the same ch_names.\r\n\r\nI didn't understand the purpose of the 'X', so I hope, you can help me with fixing this.\r\nBelow is a code snippet with some Neuromag-122-data.\r\nThank you!\r\n\r\n#### Steps and/or code to reproduce\r\n[Neuromag122_test.zip](https://github.com/mne-tools/mne-python/files/3195652/Neuromag122_test.zip)\r\n\r\nimport mne\r\nfrom os.path import join\r\n\r\npath_to_file = '<your_path_to_test_file>'\r\ndata_path = join(path_to_file, 'Neuromag122_test-ave.fif')\r\n\r\nevokeds = mne.read_evokeds(data_path)\r\nmne.viz.plot_compare_evokeds(evokeds)", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/6344/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/6344/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/6236", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/6236/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/6236/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/6236/events", "html_url": "https://github.com/mne-tools/mne-python/pull/6236", "id": 437662016, "node_id": "MDExOlB1bGxSZXF1ZXN0MjczODg4ODMw", "number": 6236, "title": "MRG+1: Fix weight_norm='nai' on DICS", "user": {"login": "wmvanvliet", "id": 428273, "node_id": "MDQ6VXNlcjQyODI3Mw==", "avatar_url": "https://avatars.githubusercontent.com/u/428273?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wmvanvliet", "html_url": "https://github.com/wmvanvliet", "followers_url": "https://api.github.com/users/wmvanvliet/followers", "following_url": "https://api.github.com/users/wmvanvliet/following{/other_user}", "gists_url": "https://api.github.com/users/wmvanvliet/gists{/gist_id}", "starred_url": "https://api.github.com/users/wmvanvliet/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wmvanvliet/subscriptions", "organizations_url": "https://api.github.com/users/wmvanvliet/orgs", "repos_url": "https://api.github.com/users/wmvanvliet/repos", "events_url": "https://api.github.com/users/wmvanvliet/events{/privacy}", "received_events_url": "https://api.github.com/users/wmvanvliet/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}, {"id": 1251548786, "node_id": "MDU6TGFiZWwxMjUxNTQ4Nzg2", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/Beamformer", "name": "Beamformer", "color": "a7ef88", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": {"login": "britta-wstnr", "id": 20129119, "node_id": "MDQ6VXNlcjIwMTI5MTE5", "avatar_url": "https://avatars.githubusercontent.com/u/20129119?v=4", "gravatar_id": "", "url": "https://api.github.com/users/britta-wstnr", "html_url": "https://github.com/britta-wstnr", "followers_url": "https://api.github.com/users/britta-wstnr/followers", "following_url": "https://api.github.com/users/britta-wstnr/following{/other_user}", "gists_url": "https://api.github.com/users/britta-wstnr/gists{/gist_id}", "starred_url": "https://api.github.com/users/britta-wstnr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/britta-wstnr/subscriptions", "organizations_url": "https://api.github.com/users/britta-wstnr/orgs", "repos_url": "https://api.github.com/users/britta-wstnr/repos", "events_url": "https://api.github.com/users/britta-wstnr/events{/privacy}", "received_events_url": "https://api.github.com/users/britta-wstnr/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "britta-wstnr", "id": 20129119, "node_id": "MDQ6VXNlcjIwMTI5MTE5", "avatar_url": "https://avatars.githubusercontent.com/u/20129119?v=4", "gravatar_id": "", "url": "https://api.github.com/users/britta-wstnr", "html_url": "https://github.com/britta-wstnr", "followers_url": "https://api.github.com/users/britta-wstnr/followers", "following_url": "https://api.github.com/users/britta-wstnr/following{/other_user}", "gists_url": "https://api.github.com/users/britta-wstnr/gists{/gist_id}", "starred_url": "https://api.github.com/users/britta-wstnr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/britta-wstnr/subscriptions", "organizations_url": "https://api.github.com/users/britta-wstnr/orgs", "repos_url": "https://api.github.com/users/britta-wstnr/repos", "events_url": "https://api.github.com/users/britta-wstnr/events{/privacy}", "received_events_url": "https://api.github.com/users/britta-wstnr/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 5, "created_at": "2019-04-26T13:00:42Z", "updated_at": "2021-10-18T06:06:20Z", "closed_at": "2019-04-27T08:06:53Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/mne-tools/mne-python/pulls/6236", "html_url": "https://github.com/mne-tools/mne-python/pull/6236", "diff_url": "https://github.com/mne-tools/mne-python/pull/6236.diff", "patch_url": "https://github.com/mne-tools/mne-python/pull/6236.patch", "merged_at": "2019-04-27T08:06:53Z"}, "body": "The case when `inversion='single', pick_ori='max-power', weight_norm='ai'` was not caught by the if-statements in `_compute_beamformer`.", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/6236/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/6236/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/6202", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/6202/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/6202/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/6202/events", "html_url": "https://github.com/mne-tools/mne-python/pull/6202", "id": 436385617, "node_id": "MDExOlB1bGxSZXF1ZXN0MjcyODg5Mjg3", "number": 6202, "title": "MRG + 1: Lazy figures for plot_compare_evokeds", "user": {"login": "jona-sassenhagen", "id": 4321826, "node_id": "MDQ6VXNlcjQzMjE4MjY=", "avatar_url": "https://avatars.githubusercontent.com/u/4321826?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jona-sassenhagen", "html_url": "https://github.com/jona-sassenhagen", "followers_url": "https://api.github.com/users/jona-sassenhagen/followers", "following_url": "https://api.github.com/users/jona-sassenhagen/following{/other_user}", "gists_url": "https://api.github.com/users/jona-sassenhagen/gists{/gist_id}", "starred_url": "https://api.github.com/users/jona-sassenhagen/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jona-sassenhagen/subscriptions", "organizations_url": "https://api.github.com/users/jona-sassenhagen/orgs", "repos_url": "https://api.github.com/users/jona-sassenhagen/repos", "events_url": "https://api.github.com/users/jona-sassenhagen/events{/privacy}", "received_events_url": "https://api.github.com/users/jona-sassenhagen/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}, {"id": 77061445, "node_id": "MDU6TGFiZWw3NzA2MTQ0NQ==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/EASY", "name": "EASY", "color": "2be2d6", "default": false, "description": ""}, {"id": 1290799321, "node_id": "MDU6TGFiZWwxMjkwNzk5MzIx", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/VIZ", "name": "VIZ", "color": "22e861", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2019-04-23T20:54:31Z", "updated_at": "2019-04-24T08:41:40Z", "closed_at": "2019-04-24T06:57:59Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/mne-tools/mne-python/pulls/6202", "html_url": "https://github.com/mne-tools/mne-python/pull/6202", "diff_url": "https://github.com/mne-tools/mne-python/pull/6202.diff", "patch_url": "https://github.com/mne-tools/mne-python/pull/6202.patch", "merged_at": "2019-04-24T06:57:58Z"}, "body": "Closes #6199\r\n\r\nThis code works for me with this PR:\r\n\r\n```\r\nimport os\r\nimport mne\r\n\r\nsample_data_folder = mne.datasets.sample.data_path()\r\nsample_data_ave_file = os.path.join(sample_data_folder, 'MEG', 'sample',\r\n                                    'sample_audvis-ave.fif')\r\nevokeds = mne.read_evokeds(sample_data_ave_file, baseline=[None, 0])\r\nmne.viz.plot_compare_evokeds(evokeds)\r\n```\r\n\r\n@drammock ", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/6202/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/6202/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/6197", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/6197/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/6197/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/6197/events", "html_url": "https://github.com/mne-tools/mne-python/pull/6197", "id": 436211740, "node_id": "MDExOlB1bGxSZXF1ZXN0MjcyNzUwMTAz", "number": 6197, "title": "MRG: Beamformer: compute ad-hoc noise cov with right dimensions", "user": {"login": "britta-wstnr", "id": 20129119, "node_id": "MDQ6VXNlcjIwMTI5MTE5", "avatar_url": "https://avatars.githubusercontent.com/u/20129119?v=4", "gravatar_id": "", "url": "https://api.github.com/users/britta-wstnr", "html_url": "https://github.com/britta-wstnr", "followers_url": "https://api.github.com/users/britta-wstnr/followers", "following_url": "https://api.github.com/users/britta-wstnr/following{/other_user}", "gists_url": "https://api.github.com/users/britta-wstnr/gists{/gist_id}", "starred_url": "https://api.github.com/users/britta-wstnr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/britta-wstnr/subscriptions", "organizations_url": "https://api.github.com/users/britta-wstnr/orgs", "repos_url": "https://api.github.com/users/britta-wstnr/repos", "events_url": "https://api.github.com/users/britta-wstnr/events{/privacy}", "received_events_url": "https://api.github.com/users/britta-wstnr/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}, {"id": 1251548786, "node_id": "MDU6TGFiZWwxMjUxNTQ4Nzg2", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/Beamformer", "name": "Beamformer", "color": "a7ef88", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2019-04-23T14:13:44Z", "updated_at": "2019-04-24T09:23:58Z", "closed_at": "2019-04-24T09:23:55Z", "author_association": "MEMBER", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/mne-tools/mne-python/pulls/6197", "html_url": "https://github.com/mne-tools/mne-python/pull/6197", "diff_url": "https://github.com/mne-tools/mne-python/pull/6197.diff", "patch_url": "https://github.com/mne-tools/mne-python/pull/6197.patch", "merged_at": "2019-04-24T09:23:55Z"}, "body": "This makes sure the right ``picks`` are used when creating an ad-hoc noise covariance matrix in the beamformer computation. \r\n\r\nIf no noise covariance matrix is supplied to ``make_lcmv``, an ad-hoc noise covariance matrix is computed. This computation did not take channel selections into account, i.e., the output noise covariance matrix had the wrong dimensions.\r\n\r\n@larsoner", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/6197/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/6197/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/6149", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/6149/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/6149/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/6149/events", "html_url": "https://github.com/mne-tools/mne-python/pull/6149", "id": 432939461, "node_id": "MDExOlB1bGxSZXF1ZXN0MjcwMjc2MTQy", "number": 6149, "title": "Use title of slider in HTML report menu", "user": {"login": "wmvanvliet", "id": 428273, "node_id": "MDQ6VXNlcjQyODI3Mw==", "avatar_url": "https://avatars.githubusercontent.com/u/428273?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wmvanvliet", "html_url": "https://github.com/wmvanvliet", "followers_url": "https://api.github.com/users/wmvanvliet/followers", "following_url": "https://api.github.com/users/wmvanvliet/following{/other_user}", "gists_url": "https://api.github.com/users/wmvanvliet/gists{/gist_id}", "starred_url": "https://api.github.com/users/wmvanvliet/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wmvanvliet/subscriptions", "organizations_url": "https://api.github.com/users/wmvanvliet/orgs", "repos_url": "https://api.github.com/users/wmvanvliet/repos", "events_url": "https://api.github.com/users/wmvanvliet/events{/privacy}", "received_events_url": "https://api.github.com/users/wmvanvliet/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2019-04-14T06:52:25Z", "updated_at": "2021-10-18T06:06:17Z", "closed_at": "2019-04-14T06:59:28Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/mne-tools/mne-python/pulls/6149", "html_url": "https://github.com/mne-tools/mne-python/pull/6149", "diff_url": "https://github.com/mne-tools/mne-python/pull/6149.diff", "patch_url": "https://github.com/mne-tools/mne-python/pull/6149.patch", "merged_at": "2019-04-14T06:59:28Z"}, "body": "When adding sliders to an HTML `Report`, the entry made in the menu on the left took the section name, instead of the title of the figure:\r\n\r\n![Screen Shot 2019-04-14 at 09 45 16](https://user-images.githubusercontent.com/428273/56089352-452c0c80-5e9a-11e9-81ac-5a99e7fafb7c.png)\r\n\r\nThis PR fixes this.", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/6149/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/6149/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/6128", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/6128/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/6128/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/6128/events", "html_url": "https://github.com/mne-tools/mne-python/issues/6128", "id": 430075989, "node_id": "MDU6SXNzdWU0MzAwNzU5ODk=", "number": 6128, "title": "report does not work for toy example", "user": {"login": "jasmainak", "id": 15852194, "node_id": "MDQ6VXNlcjE1ODUyMTk0", "avatar_url": "https://avatars.githubusercontent.com/u/15852194?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jasmainak", "html_url": "https://github.com/jasmainak", "followers_url": "https://api.github.com/users/jasmainak/followers", "following_url": "https://api.github.com/users/jasmainak/following{/other_user}", "gists_url": "https://api.github.com/users/jasmainak/gists{/gist_id}", "starred_url": "https://api.github.com/users/jasmainak/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jasmainak/subscriptions", "organizations_url": "https://api.github.com/users/jasmainak/orgs", "repos_url": "https://api.github.com/users/jasmainak/repos", "events_url": "https://api.github.com/users/jasmainak/events{/privacy}", "received_events_url": "https://api.github.com/users/jasmainak/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}, {"id": 77061445, "node_id": "MDU6TGFiZWw3NzA2MTQ0NQ==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/EASY", "name": "EASY", "color": "2be2d6", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2019-04-06T20:57:19Z", "updated_at": "2019-04-11T19:01:17Z", "closed_at": "2019-04-11T19:01:17Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "If I do this on master:\r\n\r\n```py\r\nfrom mne import Report\r\nimport matplotlib.pyplot as plt\r\nrep = Report()\r\nfig = plt.plot([1, 2], [1, 2])\r\nrep.add_figs_to_section(fig, 'my caption')\r\n```\r\nit fails with the following message:\r\n\r\n```py\r\n---------------------------------------------------------------------------\r\nAttributeError                            Traceback (most recent call last)\r\n<ipython-input-5-a4d487ddeb86> in <module>()\r\n      3 rep = Report()\r\n      4 fig = plt.plot([1, 2], [1, 2])\r\n----> 5 rep.add_figs_to_section(fig, 'my caption')\r\n\r\n~/Desktop/projects/github_repos/mne-python/mne/report.py in add_figs_to_section(self, figs, captions, section, scale, image_format, comments, replace)\r\n   1078             img_klass = self._sectionvars[section]\r\n   1079 \r\n-> 1080             img = _fig_to_img(fig, image_format, scale)\r\n   1081             html = image_template.substitute(img=img, id=global_id,\r\n   1082                                              div_klass=div_klass,\r\n\r\n~/Desktop/projects/github_repos/mne-python/mne/report.py in _fig_to_img(fig, image_format, scale, **kwargs)\r\n     74                  '`mayavi.core.api.Scene` figure instances'\r\n     75                  ' will throw an error.' % (e,))\r\n---> 76         if fig.scene is not None:\r\n     77             img = mlab.screenshot(figure=fig)\r\n     78         else:  # Testing mode\r\n\r\nAttributeError: 'Line2D' object has no attribute 'scene'\r\n```", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/6128/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/6128/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/6109", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/6109/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/6109/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/6109/events", "html_url": "https://github.com/mne-tools/mne-python/issues/6109", "id": 427436219, "node_id": "MDU6SXNzdWU0Mjc0MzYyMTk=", "number": 6109, "title": "Volume source space: apply_inverse without altering spectra?", "user": {"login": "jhouck", "id": 857583, "node_id": "MDQ6VXNlcjg1NzU4Mw==", "avatar_url": "https://avatars.githubusercontent.com/u/857583?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jhouck", "html_url": "https://github.com/jhouck", "followers_url": "https://api.github.com/users/jhouck/followers", "following_url": "https://api.github.com/users/jhouck/following{/other_user}", "gists_url": "https://api.github.com/users/jhouck/gists{/gist_id}", "starred_url": "https://api.github.com/users/jhouck/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jhouck/subscriptions", "organizations_url": "https://api.github.com/users/jhouck/orgs", "repos_url": "https://api.github.com/users/jhouck/repos", "events_url": "https://api.github.com/users/jhouck/events{/privacy}", "received_events_url": "https://api.github.com/users/jhouck/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}, {"id": 1292404946, "node_id": "MDU6TGFiZWwxMjkyNDA0OTQ2", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/Inverse", "name": "Inverse", "color": "c18c20", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2019-03-31T19:48:48Z", "updated_at": "2020-03-04T15:50:02Z", "closed_at": "2020-03-04T15:50:02Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "In volume source space, using `apply_inverse` with `pick_ori='normal'` doesn't really seem like a great option (per @larsoner this is probably +Z).  But using `pick_ori=None` will take the norm across the 3 orientations, which changes the spectra (see e.g. https://gist.github.com/jhouck/8e20484fad3a8e1a1d08addc96204aff).  Using `pick_ori='vector'` preserves the spectra and also provides 3x as much data, which should then probably be combined somehow.\r\n\r\nWhat would be the best way to combine the information from the 3 orientations that is returned by 'vector'?  Would it make sense to borrow from the label_funcs in ``source_estimate`` (e.g., mean, mean_flip, max, pca_flip) for this? ", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/6109/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/6109/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/6090", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/6090/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/6090/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/6090/events", "html_url": "https://github.com/mne-tools/mne-python/issues/6090", "id": 425943250, "node_id": "MDU6SXNzdWU0MjU5NDMyNTA=", "number": 6090, "title": "Channel names from .locs file truncated to 4 characters", "user": {"login": "achilleas-k", "id": 2369197, "node_id": "MDQ6VXNlcjIzNjkxOTc=", "avatar_url": "https://avatars.githubusercontent.com/u/2369197?v=4", "gravatar_id": "", "url": "https://api.github.com/users/achilleas-k", "html_url": "https://github.com/achilleas-k", "followers_url": "https://api.github.com/users/achilleas-k/followers", "following_url": "https://api.github.com/users/achilleas-k/following{/other_user}", "gists_url": "https://api.github.com/users/achilleas-k/gists{/gist_id}", "starred_url": "https://api.github.com/users/achilleas-k/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/achilleas-k/subscriptions", "organizations_url": "https://api.github.com/users/achilleas-k/orgs", "repos_url": "https://api.github.com/users/achilleas-k/repos", "events_url": "https://api.github.com/users/achilleas-k/events{/privacy}", "received_events_url": "https://api.github.com/users/achilleas-k/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}, {"id": 77061445, "node_id": "MDU6TGFiZWw3NzA2MTQ0NQ==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/EASY", "name": "EASY", "color": "2be2d6", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": {"login": "massich", "id": 7044835, "node_id": "MDQ6VXNlcjcwNDQ4MzU=", "avatar_url": "https://avatars.githubusercontent.com/u/7044835?v=4", "gravatar_id": "", "url": "https://api.github.com/users/massich", "html_url": "https://github.com/massich", "followers_url": "https://api.github.com/users/massich/followers", "following_url": "https://api.github.com/users/massich/following{/other_user}", "gists_url": "https://api.github.com/users/massich/gists{/gist_id}", "starred_url": "https://api.github.com/users/massich/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/massich/subscriptions", "organizations_url": "https://api.github.com/users/massich/orgs", "repos_url": "https://api.github.com/users/massich/repos", "events_url": "https://api.github.com/users/massich/events{/privacy}", "received_events_url": "https://api.github.com/users/massich/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "massich", "id": 7044835, "node_id": "MDQ6VXNlcjcwNDQ4MzU=", "avatar_url": "https://avatars.githubusercontent.com/u/7044835?v=4", "gravatar_id": "", "url": "https://api.github.com/users/massich", "html_url": "https://github.com/massich", "followers_url": "https://api.github.com/users/massich/followers", "following_url": "https://api.github.com/users/massich/following{/other_user}", "gists_url": "https://api.github.com/users/massich/gists{/gist_id}", "starred_url": "https://api.github.com/users/massich/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/massich/subscriptions", "organizations_url": "https://api.github.com/users/massich/orgs", "repos_url": "https://api.github.com/users/massich/repos", "events_url": "https://api.github.com/users/massich/events{/privacy}", "received_events_url": "https://api.github.com/users/massich/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 2, "created_at": "2019-03-27T12:54:39Z", "updated_at": "2019-03-30T17:19:39Z", "closed_at": "2019-03-30T17:19:39Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "I'm reading a locs montage file with an EDF file and I noticed that my channel names weren't matching.  I dug through the `read_montage()` function and found the following:\r\n\r\nhttps://github.com/mne-tools/mne-python/blob/b74bb10d779dfd8144a4b6fd8fc5444f441f2141/mne/channels/montage.py#L316\r\n\r\nIs it part of the specification of the locs format that channel names are restricted to 4 characters?  I have some examples here with longer names and I was wondering if this is valid.", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/6090/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/6090/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/6054", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/6054/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/6054/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/6054/events", "html_url": "https://github.com/mne-tools/mne-python/issues/6054", "id": 420215468, "node_id": "MDU6SXNzdWU0MjAyMTU0Njg=", "number": 6054, "title": "brainvision _str_to_meas_date breaks with incorrect date", "user": {"login": "petergrey75", "id": 48392403, "node_id": "MDQ6VXNlcjQ4MzkyNDAz", "avatar_url": "https://avatars.githubusercontent.com/u/48392403?v=4", "gravatar_id": "", "url": "https://api.github.com/users/petergrey75", "html_url": "https://github.com/petergrey75", "followers_url": "https://api.github.com/users/petergrey75/followers", "following_url": "https://api.github.com/users/petergrey75/following{/other_user}", "gists_url": "https://api.github.com/users/petergrey75/gists{/gist_id}", "starred_url": "https://api.github.com/users/petergrey75/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/petergrey75/subscriptions", "organizations_url": "https://api.github.com/users/petergrey75/orgs", "repos_url": "https://api.github.com/users/petergrey75/repos", "events_url": "https://api.github.com/users/petergrey75/events{/privacy}", "received_events_url": "https://api.github.com/users/petergrey75/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}, {"id": 1292410844, "node_id": "MDU6TGFiZWwxMjkyNDEwODQ0", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/Core", "name": "Core", "color": "0052cc", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": {"login": "sappelhoff", "id": 9084751, "node_id": "MDQ6VXNlcjkwODQ3NTE=", "avatar_url": "https://avatars.githubusercontent.com/u/9084751?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sappelhoff", "html_url": "https://github.com/sappelhoff", "followers_url": "https://api.github.com/users/sappelhoff/followers", "following_url": "https://api.github.com/users/sappelhoff/following{/other_user}", "gists_url": "https://api.github.com/users/sappelhoff/gists{/gist_id}", "starred_url": "https://api.github.com/users/sappelhoff/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sappelhoff/subscriptions", "organizations_url": "https://api.github.com/users/sappelhoff/orgs", "repos_url": "https://api.github.com/users/sappelhoff/repos", "events_url": "https://api.github.com/users/sappelhoff/events{/privacy}", "received_events_url": "https://api.github.com/users/sappelhoff/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "sappelhoff", "id": 9084751, "node_id": "MDQ6VXNlcjkwODQ3NTE=", "avatar_url": "https://avatars.githubusercontent.com/u/9084751?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sappelhoff", "html_url": "https://github.com/sappelhoff", "followers_url": "https://api.github.com/users/sappelhoff/followers", "following_url": "https://api.github.com/users/sappelhoff/following{/other_user}", "gists_url": "https://api.github.com/users/sappelhoff/gists{/gist_id}", "starred_url": "https://api.github.com/users/sappelhoff/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sappelhoff/subscriptions", "organizations_url": "https://api.github.com/users/sappelhoff/orgs", "repos_url": "https://api.github.com/users/sappelhoff/repos", "events_url": "https://api.github.com/users/sappelhoff/events{/privacy}", "received_events_url": "https://api.github.com/users/sappelhoff/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 5, "created_at": "2019-03-12T21:32:15Z", "updated_at": "2019-04-23T16:45:08Z", "closed_at": "2019-04-23T16:45:08Z", "author_association": "NONE", "active_lock_reason": null, "body": "if the original brainvision file lacks date information and we do segmentation on it, the offset of \"New Segment\" is added to \"000000000000000000\" so we end with something like '00000000000304125000' which passes sanity check in _str_to_meas_date, but it is stil invalid:\r\n\r\n`def _str_to_meas_date(date_str):\r\n    date_str = date_str.strip()\r\n\r\n    if date_str in ['0', '00000000000000000000']:\r\n        return None`\r\n\r\nthe solution is to add additional check:\r\n\r\n```\r\n    try:\r\n        meas_date = datetime.strptime(date_str, '%Y%m%d%H%M%S%f')\r\n    except ValueError:\r\n        return None\r\n```", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/6054/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/6054/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/5624", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/5624/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/5624/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/5624/events", "html_url": "https://github.com/mne-tools/mne-python/issues/5624", "id": 371102493, "node_id": "MDU6SXNzdWUzNzExMDI0OTM=", "number": 5624, "title": "`has_dataset` in mne.datasets.uitls crashes ", "user": {"login": "massich", "id": 7044835, "node_id": "MDQ6VXNlcjcwNDQ4MzU=", "avatar_url": "https://avatars.githubusercontent.com/u/7044835?v=4", "gravatar_id": "", "url": "https://api.github.com/users/massich", "html_url": "https://github.com/massich", "followers_url": "https://api.github.com/users/massich/followers", "following_url": "https://api.github.com/users/massich/following{/other_user}", "gists_url": "https://api.github.com/users/massich/gists{/gist_id}", "starred_url": "https://api.github.com/users/massich/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/massich/subscriptions", "organizations_url": "https://api.github.com/users/massich/orgs", "repos_url": "https://api.github.com/users/massich/repos", "events_url": "https://api.github.com/users/massich/events{/privacy}", "received_events_url": "https://api.github.com/users/massich/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}, {"id": 77061445, "node_id": "MDU6TGFiZWw3NzA2MTQ0NQ==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/EASY", "name": "EASY", "color": "2be2d6", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2018-10-17T14:20:56Z", "updated_at": "2018-11-08T15:49:35Z", "closed_at": "2018-11-08T15:49:35Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "#### Describe the bug\r\nThis is not working:\r\n\r\nhttps://github.com/mne-tools/mne-python/blob/9df12aa57dce2a75ba619c90abc6a6547dde9997/tutorials/plot_brainstorm_phantom_ctf.py#L45\r\n\r\n\r\n#### Steps and/or code to reproduce\r\nPlease provide a code snippet or [minimal working example (MWE)](https://en.wikipedia.org/wiki/Minimal_Working_Example)\r\nto replicate your problem.\r\n\r\nThis MWE should be self-contained, which means that other MNE-Python contributors\r\nshould be able to copy and paste the provided snippet and replicate the bug.\r\nIf possible, use MNE-Python testing examples to reproduce the error. Otherwise,\r\nprovide a small and anonymized portion of your data required to reproduce the bug.\r\n\r\nIf the code is too long, feel free to put it in a [public gist](https://gist.github.com) and link\r\nit in the issue.\r\n\r\nExample:\r\n\r\n```Python\r\nfrom mne.datasets.utils import has_dataset\r\nhas_dataset('brainstorm')\r\n```\r\n\r\n#### Expected results\r\nA boolean describing if the dataset is either present or not.\r\n\r\n#### Actual results\r\n```sh\r\nAttributeError: 'dict' object has no attribute 'split'\r\n```\r\n\r\n#### Additional information\r\n```py\r\nIn [5]: mne.sys_info()\r\nQt WebEngine seems to be initialized from a plugin. Please set Qt::AA_ShareOpenGLContexts using QCoreApplication::setAttribute before constructing QGuiApplication.\r\nPlatform:      Linux-4.15.0-34-generic-x86_64-with-debian-buster-sid\r\nPython:        3.6.6 |Anaconda, Inc.| (default, Jun 28 2018, 17:14:51)  [GCC 7.2.0]\r\nExecutable:    /home/sik/miniconda3/envs/mne/bin/python\r\nCPU:           x86_64: 4 cores\r\nMemory:        31.3 GB\r\n\r\nmne:           0.17.dev0\r\nnumpy:         1.15.0 {blas=mkl_rt, lapack=mkl_rt}\r\nscipy:         1.1.0\r\nmatplotlib:    2.2.2 {backend=Qt5Agg}\r\n\r\nsklearn:       0.19.2\r\nnibabel:       2.3.0\r\nmayavi:        4.6.2.dev0 {qt_api=pyqt5}\r\ncupy:          Not found\r\npandas:        0.23.3\r\ndipy:          Not found\r\n```", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/5624/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/5624/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/5511", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/5511/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/5511/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/5511/events", "html_url": "https://github.com/mne-tools/mne-python/pull/5511", "id": 359346478, "node_id": "MDExOlB1bGxSZXF1ZXN0MjE0ODU4NjE5", "number": 5511, "title": "[MRG+1] Fix weight normalization for LCMV beamformer", "user": {"login": "wmvanvliet", "id": 428273, "node_id": "MDQ6VXNlcjQyODI3Mw==", "avatar_url": "https://avatars.githubusercontent.com/u/428273?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wmvanvliet", "html_url": "https://github.com/wmvanvliet", "followers_url": "https://api.github.com/users/wmvanvliet/followers", "following_url": "https://api.github.com/users/wmvanvliet/following{/other_user}", "gists_url": "https://api.github.com/users/wmvanvliet/gists{/gist_id}", "starred_url": "https://api.github.com/users/wmvanvliet/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wmvanvliet/subscriptions", "organizations_url": "https://api.github.com/users/wmvanvliet/orgs", "repos_url": "https://api.github.com/users/wmvanvliet/repos", "events_url": "https://api.github.com/users/wmvanvliet/events{/privacy}", "received_events_url": "https://api.github.com/users/wmvanvliet/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 10, "created_at": "2018-09-12T07:19:31Z", "updated_at": "2018-09-28T14:43:53Z", "closed_at": "2018-09-28T12:04:28Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/mne-tools/mne-python/pulls/5511", "html_url": "https://github.com/mne-tools/mne-python/pull/5511", "diff_url": "https://github.com/mne-tools/mne-python/pull/5511.diff", "patch_url": "https://github.com/mne-tools/mne-python/pull/5511.patch", "merged_at": "2018-09-28T12:04:28Z"}, "body": "This fixes a bug in the LCMV beamformer code:\r\n\r\nFix weight normalization when `pick_ori='normal', weight_norm='unit_noise_gain'`. The existing implementation has a bug where the weights were first normalized to have unit length *before* picking the normal direction. Instead, the weights should be normalized to unit length *after* picking the orientation.", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/5511/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/5511/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/5502", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/5502/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/5502/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/5502/events", "html_url": "https://github.com/mne-tools/mne-python/pull/5502", "id": 358629543, "node_id": "MDExOlB1bGxSZXF1ZXN0MjE0MzE5MjYy", "number": 5502, "title": "Fix title of sliders added to Report", "user": {"login": "wmvanvliet", "id": 428273, "node_id": "MDQ6VXNlcjQyODI3Mw==", "avatar_url": "https://avatars.githubusercontent.com/u/428273?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wmvanvliet", "html_url": "https://github.com/wmvanvliet", "followers_url": "https://api.github.com/users/wmvanvliet/followers", "following_url": "https://api.github.com/users/wmvanvliet/following{/other_user}", "gists_url": "https://api.github.com/users/wmvanvliet/gists{/gist_id}", "starred_url": "https://api.github.com/users/wmvanvliet/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wmvanvliet/subscriptions", "organizations_url": "https://api.github.com/users/wmvanvliet/orgs", "repos_url": "https://api.github.com/users/wmvanvliet/repos", "events_url": "https://api.github.com/users/wmvanvliet/events{/privacy}", "received_events_url": "https://api.github.com/users/wmvanvliet/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2018-09-10T13:44:15Z", "updated_at": "2021-10-18T06:05:58Z", "closed_at": "2018-09-11T19:59:16Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/mne-tools/mne-python/pulls/5502", "html_url": "https://github.com/mne-tools/mne-python/pull/5502", "diff_url": "https://github.com/mne-tools/mne-python/pull/5502.diff", "patch_url": "https://github.com/mne-tools/mne-python/pull/5502.patch", "merged_at": "2018-09-11T19:59:16Z"}, "body": "When adding custom figures with `mne.Report.add_slider_to_section`, the `section` parameter is erroneously used in the sidebar to refer to the image. This should be the `title` parameter.\r\n\r\n![fig](https://user-images.githubusercontent.com/428273/45301034-b082ba00-b518-11e8-8659-4a16a7fb6a39.png)\r\n", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/5502/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/5502/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/5200", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/5200/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/5200/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/5200/events", "html_url": "https://github.com/mne-tools/mne-python/issues/5200", "id": 322300234, "node_id": "MDU6SXNzdWUzMjIzMDAyMzQ=", "number": 5200, "title": "add_channels causes duplication in info['hpi_results'] and info['hpi_meas']", "user": {"login": "sarasommariva", "id": 22649371, "node_id": "MDQ6VXNlcjIyNjQ5Mzcx", "avatar_url": "https://avatars.githubusercontent.com/u/22649371?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sarasommariva", "html_url": "https://github.com/sarasommariva", "followers_url": "https://api.github.com/users/sarasommariva/followers", "following_url": "https://api.github.com/users/sarasommariva/following{/other_user}", "gists_url": "https://api.github.com/users/sarasommariva/gists{/gist_id}", "starred_url": "https://api.github.com/users/sarasommariva/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sarasommariva/subscriptions", "organizations_url": "https://api.github.com/users/sarasommariva/orgs", "repos_url": "https://api.github.com/users/sarasommariva/repos", "events_url": "https://api.github.com/users/sarasommariva/events{/privacy}", "received_events_url": "https://api.github.com/users/sarasommariva/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2018-05-11T13:38:07Z", "updated_at": "2021-02-19T18:48:24Z", "closed_at": "2021-02-19T18:48:24Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Hi, \r\n\r\nI think I found a small bug in the function `add_channels`.\r\nWhen modifying an  existing data some of the fields (at least, `\u2018hpi_results\u2019` and `\u2018hpi_meas\u2019`) are duplicated causing some compatibility problems with e.g. neuromag.\r\nLooking into the code, I think the problem is in the function `_merge_dict_values` . Both `\u2018hpi_results\u2019` and `'hpi_meas\u2019` consist of a list of dictionaries that seem to be concatenated by the function.\r\n\r\nHere is a minimum example that demonstrates the issue:\r\n\r\nhttps://gist.github.com/sarasommariva/d1c4b1a3015bf3ae33fefc4ffef2cbc9", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/5200/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/5200/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/5187", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/5187/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/5187/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/5187/events", "html_url": "https://github.com/mne-tools/mne-python/pull/5187", "id": 320193726, "node_id": "MDExOlB1bGxSZXF1ZXN0MTg1OTIxNjA1", "number": 5187, "title": "Fix default colormap for VectorSourceEstimate.plot()", "user": {"login": "wmvanvliet", "id": 428273, "node_id": "MDQ6VXNlcjQyODI3Mw==", "avatar_url": "https://avatars.githubusercontent.com/u/428273?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wmvanvliet", "html_url": "https://github.com/wmvanvliet", "followers_url": "https://api.github.com/users/wmvanvliet/followers", "following_url": "https://api.github.com/users/wmvanvliet/following{/other_user}", "gists_url": "https://api.github.com/users/wmvanvliet/gists{/gist_id}", "starred_url": "https://api.github.com/users/wmvanvliet/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wmvanvliet/subscriptions", "organizations_url": "https://api.github.com/users/wmvanvliet/orgs", "repos_url": "https://api.github.com/users/wmvanvliet/repos", "events_url": "https://api.github.com/users/wmvanvliet/events{/privacy}", "received_events_url": "https://api.github.com/users/wmvanvliet/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2018-05-04T08:38:30Z", "updated_at": "2021-10-18T06:05:57Z", "closed_at": "2018-08-07T21:33:48Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/mne-tools/mne-python/pulls/5187", "html_url": "https://github.com/mne-tools/mne-python/pull/5187", "diff_url": "https://github.com/mne-tools/mne-python/pull/5187.diff", "patch_url": "https://github.com/mne-tools/mne-python/pull/5187.patch", "merged_at": null}, "body": "For some reason, the `'mne'` colormap is chosen during vector source estimate plotting, resulting in this:\r\n\r\nhttps://www.martinos.org/mne/stable/auto_examples/inverse/plot_vector_mne_solution.html#sphx-glr-auto-examples-inverse-plot-vector-mne-solution-py\r\n\r\nThe default colormap for `VectorSourceEstimate.plot()` should always be `'hot'`, since the colormap codes vector magnitudes, which are always positive, even if some data in `vec_stc.data` is negative.", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/5187/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/5187/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/5184", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/5184/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/5184/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/5184/events", "html_url": "https://github.com/mne-tools/mne-python/pull/5184", "id": 319865985, "node_id": "MDExOlB1bGxSZXF1ZXN0MTg1Njc0NjI0", "number": 5184, "title": "Fix setting csd.tmin/csd.tmax for csd_morlet", "user": {"login": "wmvanvliet", "id": 428273, "node_id": "MDQ6VXNlcjQyODI3Mw==", "avatar_url": "https://avatars.githubusercontent.com/u/428273?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wmvanvliet", "html_url": "https://github.com/wmvanvliet", "followers_url": "https://api.github.com/users/wmvanvliet/followers", "following_url": "https://api.github.com/users/wmvanvliet/following{/other_user}", "gists_url": "https://api.github.com/users/wmvanvliet/gists{/gist_id}", "starred_url": "https://api.github.com/users/wmvanvliet/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wmvanvliet/subscriptions", "organizations_url": "https://api.github.com/users/wmvanvliet/orgs", "repos_url": "https://api.github.com/users/wmvanvliet/repos", "events_url": "https://api.github.com/users/wmvanvliet/events{/privacy}", "received_events_url": "https://api.github.com/users/wmvanvliet/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2018-05-03T10:30:37Z", "updated_at": "2018-05-03T19:04:18Z", "closed_at": "2018-05-03T18:14:25Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/mne-tools/mne-python/pulls/5184", "html_url": "https://github.com/mne-tools/mne-python/pull/5184", "diff_url": "https://github.com/mne-tools/mne-python/pull/5184.diff", "patch_url": "https://github.com/mne-tools/mne-python/pull/5184.patch", "merged_at": "2018-05-03T18:14:25Z"}, "body": "Found a small bug in my CSD code.", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/5184/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/5184/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/5147", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/5147/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/5147/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/5147/events", "html_url": "https://github.com/mne-tools/mne-python/pull/5147", "id": 315749276, "node_id": "MDExOlB1bGxSZXF1ZXN0MTgyNjgxOTcx", "number": 5147, "title": "[MRG] Fix SourceEstimate.get_peak() method", "user": {"login": "wmvanvliet", "id": 428273, "node_id": "MDQ6VXNlcjQyODI3Mw==", "avatar_url": "https://avatars.githubusercontent.com/u/428273?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wmvanvliet", "html_url": "https://github.com/wmvanvliet", "followers_url": "https://api.github.com/users/wmvanvliet/followers", "following_url": "https://api.github.com/users/wmvanvliet/following{/other_user}", "gists_url": "https://api.github.com/users/wmvanvliet/gists{/gist_id}", "starred_url": "https://api.github.com/users/wmvanvliet/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wmvanvliet/subscriptions", "organizations_url": "https://api.github.com/users/wmvanvliet/orgs", "repos_url": "https://api.github.com/users/wmvanvliet/repos", "events_url": "https://api.github.com/users/wmvanvliet/events{/privacy}", "received_events_url": "https://api.github.com/users/wmvanvliet/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2018-04-19T06:55:34Z", "updated_at": "2018-05-03T10:28:27Z", "closed_at": "2018-04-20T10:19:06Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/mne-tools/mne-python/pulls/5147", "html_url": "https://github.com/mne-tools/mne-python/pull/5147", "diff_url": "https://github.com/mne-tools/mne-python/pull/5147.diff", "patch_url": "https://github.com/mne-tools/mne-python/pull/5147.patch", "merged_at": "2018-04-20T10:19:06Z"}, "body": "The `.get_peak()` method of `SourceEstimate` and `VolumeSourceEstimate` objects failed if there is only a single time point. This is for example common when computing DICS power maps.", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/5147/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/5147/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/5143", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/5143/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/5143/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/5143/events", "html_url": "https://github.com/mne-tools/mne-python/pull/5143", "id": 315492636, "node_id": "MDExOlB1bGxSZXF1ZXN0MTgyNDg4OTI1", "number": 5143, "title": "MRG+1: The frequencies parameter of csd_morlet is not optional", "user": {"login": "wmvanvliet", "id": 428273, "node_id": "MDQ6VXNlcjQyODI3Mw==", "avatar_url": "https://avatars.githubusercontent.com/u/428273?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wmvanvliet", "html_url": "https://github.com/wmvanvliet", "followers_url": "https://api.github.com/users/wmvanvliet/followers", "following_url": "https://api.github.com/users/wmvanvliet/following{/other_user}", "gists_url": "https://api.github.com/users/wmvanvliet/gists{/gist_id}", "starred_url": "https://api.github.com/users/wmvanvliet/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wmvanvliet/subscriptions", "organizations_url": "https://api.github.com/users/wmvanvliet/orgs", "repos_url": "https://api.github.com/users/wmvanvliet/repos", "events_url": "https://api.github.com/users/wmvanvliet/events{/privacy}", "received_events_url": "https://api.github.com/users/wmvanvliet/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/mne-tools/mne-python/milestones/12", "html_url": "https://github.com/mne-tools/mne-python/milestone/12", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/milestones/12/labels", "id": 2716744, "node_id": "MDk6TWlsZXN0b25lMjcxNjc0NA==", "number": 12, "title": "0.16", "description": "", "creator": {"login": "larsoner", "id": 2365790, "node_id": "MDQ6VXNlcjIzNjU3OTA=", "avatar_url": "https://avatars.githubusercontent.com/u/2365790?v=4", "gravatar_id": "", "url": "https://api.github.com/users/larsoner", "html_url": "https://github.com/larsoner", "followers_url": "https://api.github.com/users/larsoner/followers", "following_url": "https://api.github.com/users/larsoner/following{/other_user}", "gists_url": "https://api.github.com/users/larsoner/gists{/gist_id}", "starred_url": "https://api.github.com/users/larsoner/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/larsoner/subscriptions", "organizations_url": "https://api.github.com/users/larsoner/orgs", "repos_url": "https://api.github.com/users/larsoner/repos", "events_url": "https://api.github.com/users/larsoner/events{/privacy}", "received_events_url": "https://api.github.com/users/larsoner/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 95, "state": "closed", "created_at": "2017-08-22T19:08:45Z", "updated_at": "2018-07-11T19:23:28Z", "due_on": "2018-02-01T08:00:00Z", "closed_at": "2018-07-11T19:23:28Z"}, "comments": 3, "created_at": "2018-04-18T13:59:58Z", "updated_at": "2018-05-03T10:28:32Z", "closed_at": "2018-04-18T17:03:59Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/mne-tools/mne-python/pulls/5143", "html_url": "https://github.com/mne-tools/mne-python/pull/5143", "diff_url": "https://github.com/mne-tools/mne-python/pull/5143.diff", "patch_url": "https://github.com/mne-tools/mne-python/pull/5143.patch", "merged_at": "2018-04-18T17:03:59Z"}, "body": "The `csd_morlet` and `csd_array_morlet` functions mistakingly have `None` as a default value for the `frequencies` parameter. This parameter is not optional, leaving it at `None` will raise an error.", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/5143/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/5143/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/5062", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/5062/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/5062/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/5062/events", "html_url": "https://github.com/mne-tools/mne-python/pull/5062", "id": 309998840, "node_id": "MDExOlB1bGxSZXF1ZXN0MTc4NTEwNjU5", "number": 5062, "title": "[MRG] Fix setting CSD ch_names", "user": {"login": "wmvanvliet", "id": 428273, "node_id": "MDQ6VXNlcjQyODI3Mw==", "avatar_url": "https://avatars.githubusercontent.com/u/428273?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wmvanvliet", "html_url": "https://github.com/wmvanvliet", "followers_url": "https://api.github.com/users/wmvanvliet/followers", "following_url": "https://api.github.com/users/wmvanvliet/following{/other_user}", "gists_url": "https://api.github.com/users/wmvanvliet/gists{/gist_id}", "starred_url": "https://api.github.com/users/wmvanvliet/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wmvanvliet/subscriptions", "organizations_url": "https://api.github.com/users/wmvanvliet/orgs", "repos_url": "https://api.github.com/users/wmvanvliet/repos", "events_url": "https://api.github.com/users/wmvanvliet/events{/privacy}", "received_events_url": "https://api.github.com/users/wmvanvliet/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2018-03-30T07:38:23Z", "updated_at": "2018-05-03T10:28:34Z", "closed_at": "2018-03-30T13:08:45Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/mne-tools/mne-python/pulls/5062", "html_url": "https://github.com/mne-tools/mne-python/pull/5062", "diff_url": "https://github.com/mne-tools/mne-python/pull/5062.diff", "patch_url": "https://github.com/mne-tools/mne-python/pull/5062.patch", "merged_at": "2018-03-30T13:08:45Z"}, "body": "Small bug that was introduced by the refactoring of the CSD code. When calling `csd_fourier`, `csd_multitaper` or `csd_morlet` the `ch_names` field of the resulting `CrossSpectralDensity` object was not properly set. It slipped through the unit tests at the time.", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/5062/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/5062/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/5046", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/5046/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/5046/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/5046/events", "html_url": "https://github.com/mne-tools/mne-python/issues/5046", "id": 308861127, "node_id": "MDU6SXNzdWUzMDg4NjExMjc=", "number": 5046, "title": "raw.plot_psd cannot set picks if average is False", "user": {"login": "moppymopperson", "id": 22581112, "node_id": "MDQ6VXNlcjIyNTgxMTEy", "avatar_url": "https://avatars.githubusercontent.com/u/22581112?v=4", "gravatar_id": "", "url": "https://api.github.com/users/moppymopperson", "html_url": "https://github.com/moppymopperson", "followers_url": "https://api.github.com/users/moppymopperson/followers", "following_url": "https://api.github.com/users/moppymopperson/following{/other_user}", "gists_url": "https://api.github.com/users/moppymopperson/gists{/gist_id}", "starred_url": "https://api.github.com/users/moppymopperson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/moppymopperson/subscriptions", "organizations_url": "https://api.github.com/users/moppymopperson/orgs", "repos_url": "https://api.github.com/users/moppymopperson/repos", "events_url": "https://api.github.com/users/moppymopperson/events{/privacy}", "received_events_url": "https://api.github.com/users/moppymopperson/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}, {"id": 77061445, "node_id": "MDU6TGFiZWw3NzA2MTQ0NQ==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/EASY", "name": "EASY", "color": "2be2d6", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/mne-tools/mne-python/milestones/12", "html_url": "https://github.com/mne-tools/mne-python/milestone/12", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/milestones/12/labels", "id": 2716744, "node_id": "MDk6TWlsZXN0b25lMjcxNjc0NA==", "number": 12, "title": "0.16", "description": "", "creator": {"login": "larsoner", "id": 2365790, "node_id": "MDQ6VXNlcjIzNjU3OTA=", "avatar_url": "https://avatars.githubusercontent.com/u/2365790?v=4", "gravatar_id": "", "url": "https://api.github.com/users/larsoner", "html_url": "https://github.com/larsoner", "followers_url": "https://api.github.com/users/larsoner/followers", "following_url": "https://api.github.com/users/larsoner/following{/other_user}", "gists_url": "https://api.github.com/users/larsoner/gists{/gist_id}", "starred_url": "https://api.github.com/users/larsoner/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/larsoner/subscriptions", "organizations_url": "https://api.github.com/users/larsoner/orgs", "repos_url": "https://api.github.com/users/larsoner/repos", "events_url": "https://api.github.com/users/larsoner/events{/privacy}", "received_events_url": "https://api.github.com/users/larsoner/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 95, "state": "closed", "created_at": "2017-08-22T19:08:45Z", "updated_at": "2018-07-11T19:23:28Z", "due_on": "2018-02-01T08:00:00Z", "closed_at": "2018-07-11T19:23:28Z"}, "comments": 2, "created_at": "2018-03-27T08:01:18Z", "updated_at": "2018-04-05T07:04:20Z", "closed_at": "2018-04-05T07:04:20Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "The following throws an exception if `average` is False, but not when it is True. \r\nThe [documentation](https://martinos.org/mne/stable/generated/mne.io.Raw.html#mne.io.Raw.plot_psd) isn't super clear about what the expected behavior in this case is, so I'm not sure if I'm doing something unintended or not.\r\n\r\nIf `picks` can be specified when `average` is False, then this is definitely a bug. If not, then maybe updating the documentation for clarity or adding a warning message would be appropriate. I'm happy to help with either.\r\n\r\n```python\r\nimport mne\r\nfrom mne.datasets import sample\r\n\r\ndata_path = sample.data_path()\r\nfname = data_path + \"/MEG/sample/sample_audvis_raw.fif\"\r\nraw = mne.io.read_raw_fif(fname)\r\npicks = mne.pick_types(raw.info, meg=True, eeg=False, stim=False)\r\n\r\n# Changing average to True makes it work\r\nraw.plot_psd(picks=picks, dB=False, show=True, average=False)\r\n```\r\n\r\nResults in stack trace\r\n```\r\n/miniconda3/envs/mne/lib/python2.7/site-packages/mne/viz/evoked.py:433: VisibleDeprecationWarning: boolean index did not match indexed array along dimension 0; dimension is 1 but corresponding boolean dimension is 2\r\n  for ax in np.array(axes)[selectables]:\r\nTraceback (most recent call last):\r\n  File \"psd_bug.py\", line 10, in <module>\r\n    ax = raw.plot_psd(picks=picks, dB=False, show=True, average=False)\r\n  File \"<string>\", line 2, in plot_psd\r\n  File \"/home/erik/miniconda3/envs/mne/lib/python2.7/site-packages/mne/utils.py\", line 728, in verbose\r\n    return function(*args, **kwargs)\r\n  File \"/home/erik/miniconda3/envs/mne/lib/python2.7/site-packages/mne/io/base.py\", line 1779, in plot_psd\r\n    xscale=xscale, reject_by_annotation=reject_by_annotation)\r\n  File \"<string>\", line 2, in plot_raw_psd\r\n  File \"/home/erik/miniconda3/envs/mne/lib/python2.7/site-packages/mne/utils.py\", line 728, in verbose\r\n    return function(*args, **kwargs)\r\n  File \"/home/erik/miniconda3/envs/mne/lib/python2.7/site-packages/mne/viz/raw.py\", line 812, in plot_raw_psd\r\n    line_alpha=line_alpha)\r\n  File \"/home/erik/miniconda3/envs/mne/lib/python2.7/site-packages/mne/viz/evoked.py\", line 433, in _plot_lines\r\n    for ax in np.array(axes)[selectables]:\r\nIndexError: index 1 is out of bounds for axis 1 with size 1\r\n\r\n```", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/5046/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/5046/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/4958", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/4958/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/4958/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/4958/events", "html_url": "https://github.com/mne-tools/mne-python/issues/4958", "id": 299110184, "node_id": "MDU6SXNzdWUyOTkxMTAxODQ=", "number": 4958, "title": "BUG: mne save info with CTF data", "user": {"login": "kingjr", "id": 4881164, "node_id": "MDQ6VXNlcjQ4ODExNjQ=", "avatar_url": "https://avatars.githubusercontent.com/u/4881164?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kingjr", "html_url": "https://github.com/kingjr", "followers_url": "https://api.github.com/users/kingjr/followers", "following_url": "https://api.github.com/users/kingjr/following{/other_user}", "gists_url": "https://api.github.com/users/kingjr/gists{/gist_id}", "starred_url": "https://api.github.com/users/kingjr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kingjr/subscriptions", "organizations_url": "https://api.github.com/users/kingjr/orgs", "repos_url": "https://api.github.com/users/kingjr/repos", "events_url": "https://api.github.com/users/kingjr/events{/privacy}", "received_events_url": "https://api.github.com/users/kingjr/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2018-02-21T20:07:23Z", "updated_at": "2018-02-21T20:14:23Z", "closed_at": "2018-02-21T20:14:23Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "We we pick ctf data to remove ref_channels and save the info, we can't read it anymore\r\nfile: http://www.fast-files.com/getfile.aspx?file=155480\r\n\r\nreproduce:\r\n```python\r\ninfo = mne.io.read_info('ctf-info.fif')\r\nepochs = mne.EpochsArray(np.zeros((10, 299, 20)), info)\r\nepochs.pick_types(meg=True, ref_meg=False)\r\nmne.io.write_info('ctf-pick-info.fif', epochs.info)\r\ninfo = mne.io.read_info('ctf-pick-info.fif')\r\n```", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/4958/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/4958/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/4957", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/4957/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/4957/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/4957/events", "html_url": "https://github.com/mne-tools/mne-python/issues/4957", "id": 299097241, "node_id": "MDU6SXNzdWUyOTkwOTcyNDE=", "number": 4957, "title": "BUG: save beamformer filter", "user": {"login": "kingjr", "id": 4881164, "node_id": "MDQ6VXNlcjQ4ODExNjQ=", "avatar_url": "https://avatars.githubusercontent.com/u/4881164?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kingjr", "html_url": "https://github.com/kingjr", "followers_url": "https://api.github.com/users/kingjr/followers", "following_url": "https://api.github.com/users/kingjr/following{/other_user}", "gists_url": "https://api.github.com/users/kingjr/gists{/gist_id}", "starred_url": "https://api.github.com/users/kingjr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kingjr/subscriptions", "organizations_url": "https://api.github.com/users/kingjr/orgs", "repos_url": "https://api.github.com/users/kingjr/repos", "events_url": "https://api.github.com/users/kingjr/events{/privacy}", "received_events_url": "https://api.github.com/users/kingjr/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "larsoner", "id": 2365790, "node_id": "MDQ6VXNlcjIzNjU3OTA=", "avatar_url": "https://avatars.githubusercontent.com/u/2365790?v=4", "gravatar_id": "", "url": "https://api.github.com/users/larsoner", "html_url": "https://github.com/larsoner", "followers_url": "https://api.github.com/users/larsoner/followers", "following_url": "https://api.github.com/users/larsoner/following{/other_user}", "gists_url": "https://api.github.com/users/larsoner/gists{/gist_id}", "starred_url": "https://api.github.com/users/larsoner/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/larsoner/subscriptions", "organizations_url": "https://api.github.com/users/larsoner/orgs", "repos_url": "https://api.github.com/users/larsoner/repos", "events_url": "https://api.github.com/users/larsoner/events{/privacy}", "received_events_url": "https://api.github.com/users/larsoner/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "larsoner", "id": 2365790, "node_id": "MDQ6VXNlcjIzNjU3OTA=", "avatar_url": "https://avatars.githubusercontent.com/u/2365790?v=4", "gravatar_id": "", "url": "https://api.github.com/users/larsoner", "html_url": "https://github.com/larsoner", "followers_url": "https://api.github.com/users/larsoner/followers", "following_url": "https://api.github.com/users/larsoner/following{/other_user}", "gists_url": "https://api.github.com/users/larsoner/gists{/gist_id}", "starred_url": "https://api.github.com/users/larsoner/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/larsoner/subscriptions", "organizations_url": "https://api.github.com/users/larsoner/orgs", "repos_url": "https://api.github.com/users/larsoner/repos", "events_url": "https://api.github.com/users/larsoner/events{/privacy}", "received_events_url": "https://api.github.com/users/larsoner/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/mne-tools/mne-python/milestones/13", "html_url": "https://github.com/mne-tools/mne-python/milestone/13", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/milestones/13/labels", "id": 3134180, "node_id": "MDk6TWlsZXN0b25lMzEzNDE4MA==", "number": 13, "title": "0.17", "description": "", "creator": {"login": "larsoner", "id": 2365790, "node_id": "MDQ6VXNlcjIzNjU3OTA=", "avatar_url": "https://avatars.githubusercontent.com/u/2365790?v=4", "gravatar_id": "", "url": "https://api.github.com/users/larsoner", "html_url": "https://github.com/larsoner", "followers_url": "https://api.github.com/users/larsoner/followers", "following_url": "https://api.github.com/users/larsoner/following{/other_user}", "gists_url": "https://api.github.com/users/larsoner/gists{/gist_id}", "starred_url": "https://api.github.com/users/larsoner/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/larsoner/subscriptions", "organizations_url": "https://api.github.com/users/larsoner/orgs", "repos_url": "https://api.github.com/users/larsoner/repos", "events_url": "https://api.github.com/users/larsoner/events{/privacy}", "received_events_url": "https://api.github.com/users/larsoner/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 107, "state": "closed", "created_at": "2018-02-21T18:43:16Z", "updated_at": "2019-05-06T15:42:44Z", "due_on": "2018-10-25T07:00:00Z", "closed_at": "2018-11-19T21:36:36Z"}, "comments": 10, "created_at": "2018-02-21T19:27:35Z", "updated_at": "2018-10-13T16:37:25Z", "closed_at": "2018-10-13T16:37:25Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "Once we have done \r\n```python\r\nfilters = mne.beamformer.make_lcmv()\r\n```\r\nh5io isnt applicable because of the EmpiricalCovariance object", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/4957/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/4957/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/4822", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/4822/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/4822/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/4822/events", "html_url": "https://github.com/mne-tools/mne-python/issues/4822", "id": 280621375, "node_id": "MDU6SXNzdWUyODA2MjEzNzU=", "number": 4822, "title": "BUG: default epochs events does not work with list", "user": {"login": "kingjr", "id": 4881164, "node_id": "MDQ6VXNlcjQ4ODExNjQ=", "avatar_url": "https://avatars.githubusercontent.com/u/4881164?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kingjr", "html_url": "https://github.com/kingjr", "followers_url": "https://api.github.com/users/kingjr/followers", "following_url": "https://api.github.com/users/kingjr/following{/other_user}", "gists_url": "https://api.github.com/users/kingjr/gists{/gist_id}", "starred_url": "https://api.github.com/users/kingjr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kingjr/subscriptions", "organizations_url": "https://api.github.com/users/kingjr/orgs", "repos_url": "https://api.github.com/users/kingjr/repos", "events_url": "https://api.github.com/users/kingjr/events{/privacy}", "received_events_url": "https://api.github.com/users/kingjr/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}, {"id": 77061445, "node_id": "MDU6TGFiZWw3NzA2MTQ0NQ==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/EASY", "name": "EASY", "color": "2be2d6", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2017-12-08T21:24:49Z", "updated_at": "2017-12-10T22:38:16Z", "closed_at": "2017-12-10T22:38:16Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "works:\r\n\r\n```python\r\nimport numpy as np\r\nepo = mne.Epochs(mne.io.RawArray(np.random.randn(10, 1000),\r\n                                 mne.create_info(10, 1000.)),\r\n                 events=np.array([[100, 0, 1], [200, 0, 1], [300, 0, 1]]))\r\n```\r\n\r\n\r\ndoes not work:\r\n```python\r\nimport numpy as np\r\nepo = mne.Epochs(mne.io.RawArray(np.random.randn(10, 1000),\r\n                                 mne.create_info(10, 1000.)),\r\n                 events=[[100, 0, 1], [200, 0, 1], [300, 0, 1]])\r\n```\r\n\r\ncc @larsoner ", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/4822/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/4822/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/4758", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/4758/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/4758/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/4758/events", "html_url": "https://github.com/mne-tools/mne-python/pull/4758", "id": 274157460, "node_id": "MDExOlB1bGxSZXF1ZXN0MTUyNzc1MDk4", "number": 4758, "title": "FIX psd_array_welch:  1d input arrays", "user": {"login": "christianbrodbeck", "id": 145771, "node_id": "MDQ6VXNlcjE0NTc3MQ==", "avatar_url": "https://avatars.githubusercontent.com/u/145771?v=4", "gravatar_id": "", "url": "https://api.github.com/users/christianbrodbeck", "html_url": "https://github.com/christianbrodbeck", "followers_url": "https://api.github.com/users/christianbrodbeck/followers", "following_url": "https://api.github.com/users/christianbrodbeck/following{/other_user}", "gists_url": "https://api.github.com/users/christianbrodbeck/gists{/gist_id}", "starred_url": "https://api.github.com/users/christianbrodbeck/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/christianbrodbeck/subscriptions", "organizations_url": "https://api.github.com/users/christianbrodbeck/orgs", "repos_url": "https://api.github.com/users/christianbrodbeck/repos", "events_url": "https://api.github.com/users/christianbrodbeck/events{/privacy}", "received_events_url": "https://api.github.com/users/christianbrodbeck/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2017-11-15T13:32:49Z", "updated_at": "2020-04-23T19:59:46Z", "closed_at": "2017-11-15T14:39:52Z", "author_association": "MEMBER", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/mne-tools/mne-python/pulls/4758", "html_url": "https://github.com/mne-tools/mne-python/pull/4758", "diff_url": "https://github.com/mne-tools/mne-python/pull/4758.diff", "patch_url": "https://github.com/mne-tools/mne-python/pull/4758.patch", "merged_at": "2017-11-15T14:39:51Z"}, "body": "For 1d-arrays, `dshape` is `()`, leading to `hstack` inferring `dtype` `float`", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/4758/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/4758/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/4549", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/4549/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/4549/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/4549/events", "html_url": "https://github.com/mne-tools/mne-python/pull/4549", "id": 256969227, "node_id": "MDExOlB1bGxSZXF1ZXN0MTQwNTI0MDQ2", "number": 4549, "title": "Fix morphing to original subject when two vertices map to the same target vertex", "user": {"login": "wmvanvliet", "id": 428273, "node_id": "MDQ6VXNlcjQyODI3Mw==", "avatar_url": "https://avatars.githubusercontent.com/u/428273?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wmvanvliet", "html_url": "https://github.com/wmvanvliet", "followers_url": "https://api.github.com/users/wmvanvliet/followers", "following_url": "https://api.github.com/users/wmvanvliet/following{/other_user}", "gists_url": "https://api.github.com/users/wmvanvliet/gists{/gist_id}", "starred_url": "https://api.github.com/users/wmvanvliet/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wmvanvliet/subscriptions", "organizations_url": "https://api.github.com/users/wmvanvliet/orgs", "repos_url": "https://api.github.com/users/wmvanvliet/repos", "events_url": "https://api.github.com/users/wmvanvliet/events{/privacy}", "received_events_url": "https://api.github.com/users/wmvanvliet/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2017-09-12T09:02:27Z", "updated_at": "2017-09-13T06:48:54Z", "closed_at": "2017-09-13T06:48:52Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/mne-tools/mne-python/pulls/4549", "html_url": "https://github.com/mne-tools/mne-python/pull/4549", "diff_url": "https://github.com/mne-tools/mne-python/pull/4549.diff", "patch_url": "https://github.com/mne-tools/mne-python/pull/4549.patch", "merged_at": "2017-09-13T06:48:52Z"}, "body": "This doesn't happen often. In fact, it happens so rarely we hadn't noticed yet some of the logic was broken. This PR adds a test and fixes the logic.", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/4549/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/4549/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/4514", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/4514/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/4514/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/4514/events", "html_url": "https://github.com/mne-tools/mne-python/issues/4514", "id": 252391054, "node_id": "MDU6SXNzdWUyNTIzOTEwNTQ=", "number": 4514, "title": "Issue w/ fill_mean in `ReceptiveField`", "user": {"login": "choldgraf", "id": 1839645, "node_id": "MDQ6VXNlcjE4Mzk2NDU=", "avatar_url": "https://avatars.githubusercontent.com/u/1839645?v=4", "gravatar_id": "", "url": "https://api.github.com/users/choldgraf", "html_url": "https://github.com/choldgraf", "followers_url": "https://api.github.com/users/choldgraf/followers", "following_url": "https://api.github.com/users/choldgraf/following{/other_user}", "gists_url": "https://api.github.com/users/choldgraf/gists{/gist_id}", "starred_url": "https://api.github.com/users/choldgraf/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/choldgraf/subscriptions", "organizations_url": "https://api.github.com/users/choldgraf/orgs", "repos_url": "https://api.github.com/users/choldgraf/repos", "events_url": "https://api.github.com/users/choldgraf/events{/privacy}", "received_events_url": "https://api.github.com/users/choldgraf/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/mne-tools/mne-python/milestones/11", "html_url": "https://github.com/mne-tools/mne-python/milestone/11", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/milestones/11/labels", "id": 2233512, "node_id": "MDk6TWlsZXN0b25lMjIzMzUxMg==", "number": 11, "title": "0.15", "description": "Release by the end of August.", "creator": {"login": "larsoner", "id": 2365790, "node_id": "MDQ6VXNlcjIzNjU3OTA=", "avatar_url": "https://avatars.githubusercontent.com/u/2365790?v=4", "gravatar_id": "", "url": "https://api.github.com/users/larsoner", "html_url": "https://github.com/larsoner", "followers_url": "https://api.github.com/users/larsoner/followers", "following_url": "https://api.github.com/users/larsoner/following{/other_user}", "gists_url": "https://api.github.com/users/larsoner/gists{/gist_id}", "starred_url": "https://api.github.com/users/larsoner/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/larsoner/subscriptions", "organizations_url": "https://api.github.com/users/larsoner/orgs", "repos_url": "https://api.github.com/users/larsoner/repos", "events_url": "https://api.github.com/users/larsoner/events{/privacy}", "received_events_url": "https://api.github.com/users/larsoner/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 135, "state": "closed", "created_at": "2017-01-06T17:12:14Z", "updated_at": "2017-11-15T22:29:46Z", "due_on": "2017-08-25T07:00:00Z", "closed_at": "2017-11-15T22:29:46Z"}, "comments": 2, "created_at": "2017-08-23T19:29:46Z", "updated_at": "2017-09-12T16:01:26Z", "closed_at": "2017-09-12T15:42:18Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "From @nbara \r\n\r\n> Isn't there a small bug Line 414 of receptive_field.py ? delayed[...] = fill_value is over-indented isn't it? Meaning the fill_value is effectively only applied when epoch_axis is not None?\r\n\r\nI took a look and think this is true...we should fix this!\r\n", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/4514/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/4514/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/4501", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/4501/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/4501/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/4501/events", "html_url": "https://github.com/mne-tools/mne-python/pull/4501", "id": 251160521, "node_id": "MDExOlB1bGxSZXF1ZXN0MTM2NDE2NTY4", "number": 4501, "title": "Workaround for MNE-C byte swapping bug in RCS matrices", "user": {"login": "wmvanvliet", "id": 428273, "node_id": "MDQ6VXNlcjQyODI3Mw==", "avatar_url": "https://avatars.githubusercontent.com/u/428273?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wmvanvliet", "html_url": "https://github.com/wmvanvliet", "followers_url": "https://api.github.com/users/wmvanvliet/followers", "following_url": "https://api.github.com/users/wmvanvliet/following{/other_user}", "gists_url": "https://api.github.com/users/wmvanvliet/gists{/gist_id}", "starred_url": "https://api.github.com/users/wmvanvliet/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wmvanvliet/subscriptions", "organizations_url": "https://api.github.com/users/wmvanvliet/orgs", "repos_url": "https://api.github.com/users/wmvanvliet/repos", "events_url": "https://api.github.com/users/wmvanvliet/events{/privacy}", "received_events_url": "https://api.github.com/users/wmvanvliet/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 8, "created_at": "2017-08-18T07:19:26Z", "updated_at": "2018-05-03T10:28:57Z", "closed_at": "2017-12-04T20:05:06Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/mne-tools/mne-python/pulls/4501", "html_url": "https://github.com/mne-tools/mne-python/pull/4501", "diff_url": "https://github.com/mne-tools/mne-python/pull/4501.diff", "patch_url": "https://github.com/mne-tools/mne-python/pull/4501.patch", "merged_at": null}, "body": "The is a bug in MNE-C where sometimes data is stored without proper byte-swapping. A workaround was implemented in MNE-Python to still be able to read these files. However, the workaround was only implemented for CCS sparse matrices. I now have a file with a broken RCS sparse matrix. This PR applies the same workaround. This seems to work fine on my data.\r\n\r\n@larsoner Git blame tells me you wrote the original workaround. Right now, I've copy-pasted the code and changed `nrow` to `ncol`. However, since my matrices are symmetric, I don't have a good way of testing whether this is necessary or not. Could you take a good look at lines 326-327?\r\n\r\nIf the code is correct I can do another pass to DRY the code. I'm leaving it copy-pasted for now so it is more straightforward to follow the logic.", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/4501/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/4501/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/4459", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/4459/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/4459/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/4459/events", "html_url": "https://github.com/mne-tools/mne-python/issues/4459", "id": 247930707, "node_id": "MDU6SXNzdWUyNDc5MzA3MDc=", "number": 4459, "title": "Cannot save forward solution after calling restrict_forward_to_*", "user": {"login": "wmvanvliet", "id": 428273, "node_id": "MDQ6VXNlcjQyODI3Mw==", "avatar_url": "https://avatars.githubusercontent.com/u/428273?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wmvanvliet", "html_url": "https://github.com/wmvanvliet", "followers_url": "https://api.github.com/users/wmvanvliet/followers", "following_url": "https://api.github.com/users/wmvanvliet/following{/other_user}", "gists_url": "https://api.github.com/users/wmvanvliet/gists{/gist_id}", "starred_url": "https://api.github.com/users/wmvanvliet/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wmvanvliet/subscriptions", "organizations_url": "https://api.github.com/users/wmvanvliet/orgs", "repos_url": "https://api.github.com/users/wmvanvliet/repos", "events_url": "https://api.github.com/users/wmvanvliet/events{/privacy}", "received_events_url": "https://api.github.com/users/wmvanvliet/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2017-08-04T07:56:50Z", "updated_at": "2017-08-04T12:53:40Z", "closed_at": "2017-08-04T12:53:40Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Steps to reproduce:\r\n\r\n```python\r\nimport mne\r\npath = mne.datasets.sample.data_path()\r\nfwd = mne.read_forward_solution(path + '/MEG/sample/sample_audvis-meg-oct-6-fwd.fif')\r\nstc = mne.read_source_estimate(path + '/MEG/sample/sample_audvis-meg')\r\nfwd_restricted = mne.forward.restrict_forward_to_stc(fwd, stc)\r\nmne.write_forward_solution('restricted-fwd.fif', fwd_restricted, overwrite=True)\r\n```\r\n\r\nGives the following error:\r\n\r\n```\r\n---------------------------------------------------------------------------\r\nIndexError                                Traceback (most recent call last)\r\n<ipython-input-300-d1587ecf7da4> in <module>()\r\n      4 stc = mne.read_source_estimate(path + '/MEG/sample/sample_audvis-meg')\r\n      5 fwd_restricted = mne.forward.restrict_forward_to_stc(fwd, stc)\r\n----> 6 mne.write_forward_solution('restricted-fwd.fif', fwd_r, overwrite=True)\r\n\r\n/data/marijn/mne-python/mne/forward/forward.pyc in write_forward_solution(fname, fwd, overwrite, verbose)\r\n\r\n/data/marijn/mne-python/mne/utils.pyc in verbose(function, *args, **kwargs)\r\n    724         with use_log_level(verbose_level):\r\n    725             return function(*args, **kwargs)\r\n--> 726     return function(*args, **kwargs)\r\n    727 \r\n    728 \r\n\r\n/data/marijn/mne-python/mne/forward/forward.pyc in write_forward_solution(fname, fwd, overwrite, verbose)\r\n    732     # Write the source spaces (again)\r\n    733     #\r\n--> 734     _write_source_spaces_to_fid(fid, src)\r\n    735     n_vert = sum([ss['nuse'] for ss in src])\r\n    736     n_col = fwd['sol']['data'].shape[1]\r\n\r\n/data/marijn/mne-python/mne/source_space.pyc in _write_source_spaces_to_fid(fid, src, verbose)\r\n\r\n/data/marijn/mne-python/mne/utils.pyc in verbose(function, *args, **kwargs)\r\n    724         with use_log_level(verbose_level):\r\n    725             return function(*args, **kwargs)\r\n--> 726     return function(*args, **kwargs)\r\n    727 \r\n    728 \r\n\r\n/data/marijn/mne-python/mne/source_space.pyc in _write_source_spaces_to_fid(fid, src, verbose)\r\n    926         logger.info('    Write a source space...')\r\n    927         start_block(fid, FIFF.FIFFB_MNE_SOURCE_SPACE)\r\n--> 928         _write_one_source_space(fid, s, verbose)\r\n    929         end_block(fid, FIFF.FIFFB_MNE_SOURCE_SPACE)\r\n    930         logger.info('    [done]')\r\n\r\n/data/marijn/mne-python/mne/source_space.pyc in _write_one_source_space(fid, this, verbose)\r\n   1016         write_int(fid, FIFF.FIFF_MNE_SOURCE_SPACE_NUSE_TRI, this['nuse_tri'])\r\n   1017         write_int_matrix(fid, FIFF.FIFF_MNE_SOURCE_SPACE_USE_TRIANGLES,\r\n-> 1018                          this['use_tris'] + 1)\r\n   1019 \r\n   1020     if this['type'] == 'vol':\r\n\r\n/data/marijn/mne-python/mne/io/write.pyc in write_int_matrix(fid, kind, mat)\r\n    172 \r\n    173     dims = np.empty(3, dtype=np.int32)\r\n--> 174     dims[0] = mat.shape[1]\r\n    175     dims[1] = mat.shape[0]\r\n    176     dims[2] = 2\r\n\r\nIndexError: tuple index out of range\r\n```", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/4459/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/4459/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/4458", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/4458/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/4458/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/4458/events", "html_url": "https://github.com/mne-tools/mne-python/pull/4458", "id": 247891429, "node_id": "MDExOlB1bGxSZXF1ZXN0MTM0MDgyODI5", "number": 4458, "title": "FIX: Fix MNE-C", "user": {"login": "larsoner", "id": 2365790, "node_id": "MDQ6VXNlcjIzNjU3OTA=", "avatar_url": "https://avatars.githubusercontent.com/u/2365790?v=4", "gravatar_id": "", "url": "https://api.github.com/users/larsoner", "html_url": "https://github.com/larsoner", "followers_url": "https://api.github.com/users/larsoner/followers", "following_url": "https://api.github.com/users/larsoner/following{/other_user}", "gists_url": "https://api.github.com/users/larsoner/gists{/gist_id}", "starred_url": "https://api.github.com/users/larsoner/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/larsoner/subscriptions", "organizations_url": "https://api.github.com/users/larsoner/orgs", "repos_url": "https://api.github.com/users/larsoner/repos", "events_url": "https://api.github.com/users/larsoner/events{/privacy}", "received_events_url": "https://api.github.com/users/larsoner/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "larsoner", "id": 2365790, "node_id": "MDQ6VXNlcjIzNjU3OTA=", "avatar_url": "https://avatars.githubusercontent.com/u/2365790?v=4", "gravatar_id": "", "url": "https://api.github.com/users/larsoner", "html_url": "https://github.com/larsoner", "followers_url": "https://api.github.com/users/larsoner/followers", "following_url": "https://api.github.com/users/larsoner/following{/other_user}", "gists_url": "https://api.github.com/users/larsoner/gists{/gist_id}", "starred_url": "https://api.github.com/users/larsoner/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/larsoner/subscriptions", "organizations_url": "https://api.github.com/users/larsoner/orgs", "repos_url": "https://api.github.com/users/larsoner/repos", "events_url": "https://api.github.com/users/larsoner/events{/privacy}", "received_events_url": "https://api.github.com/users/larsoner/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "larsoner", "id": 2365790, "node_id": "MDQ6VXNlcjIzNjU3OTA=", "avatar_url": "https://avatars.githubusercontent.com/u/2365790?v=4", "gravatar_id": "", "url": "https://api.github.com/users/larsoner", "html_url": "https://github.com/larsoner", "followers_url": "https://api.github.com/users/larsoner/followers", "following_url": "https://api.github.com/users/larsoner/following{/other_user}", "gists_url": "https://api.github.com/users/larsoner/gists{/gist_id}", "starred_url": "https://api.github.com/users/larsoner/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/larsoner/subscriptions", "organizations_url": "https://api.github.com/users/larsoner/orgs", "repos_url": "https://api.github.com/users/larsoner/repos", "events_url": "https://api.github.com/users/larsoner/events{/privacy}", "received_events_url": "https://api.github.com/users/larsoner/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/mne-tools/mne-python/milestones/11", "html_url": "https://github.com/mne-tools/mne-python/milestone/11", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/milestones/11/labels", "id": 2233512, "node_id": "MDk6TWlsZXN0b25lMjIzMzUxMg==", "number": 11, "title": "0.15", "description": "Release by the end of August.", "creator": {"login": "larsoner", "id": 2365790, "node_id": "MDQ6VXNlcjIzNjU3OTA=", "avatar_url": "https://avatars.githubusercontent.com/u/2365790?v=4", "gravatar_id": "", "url": "https://api.github.com/users/larsoner", "html_url": "https://github.com/larsoner", "followers_url": "https://api.github.com/users/larsoner/followers", "following_url": "https://api.github.com/users/larsoner/following{/other_user}", "gists_url": "https://api.github.com/users/larsoner/gists{/gist_id}", "starred_url": "https://api.github.com/users/larsoner/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/larsoner/subscriptions", "organizations_url": "https://api.github.com/users/larsoner/orgs", "repos_url": "https://api.github.com/users/larsoner/repos", "events_url": "https://api.github.com/users/larsoner/events{/privacy}", "received_events_url": "https://api.github.com/users/larsoner/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 135, "state": "closed", "created_at": "2017-01-06T17:12:14Z", "updated_at": "2017-11-15T22:29:46Z", "due_on": "2017-08-25T07:00:00Z", "closed_at": "2017-11-15T22:29:46Z"}, "comments": 4, "created_at": "2017-08-04T03:11:53Z", "updated_at": "2017-08-04T23:50:21Z", "closed_at": "2017-08-04T23:18:16Z", "author_association": "MEMBER", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/mne-tools/mne-python/pulls/4458", "html_url": "https://github.com/mne-tools/mne-python/pull/4458", "diff_url": "https://github.com/mne-tools/mne-python/pull/4458.diff", "patch_url": "https://github.com/mne-tools/mne-python/pull/4458.patch", "merged_at": "2017-08-04T23:18:15Z"}, "body": "This should first expose the error in #4452. Will add a fix once we decide how best to fix it.\r\n\r\nCloses #4452.", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/4458/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/4458/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/4438", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/4438/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/4438/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/4438/events", "html_url": "https://github.com/mne-tools/mne-python/issues/4438", "id": 246507066, "node_id": "MDU6SXNzdWUyNDY1MDcwNjY=", "number": 4438, "title": "problem computing nave in contrast", "user": {"login": "jasmainak", "id": 15852194, "node_id": "MDQ6VXNlcjE1ODUyMTk0", "avatar_url": "https://avatars.githubusercontent.com/u/15852194?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jasmainak", "html_url": "https://github.com/jasmainak", "followers_url": "https://api.github.com/users/jasmainak/followers", "following_url": "https://api.github.com/users/jasmainak/following{/other_user}", "gists_url": "https://api.github.com/users/jasmainak/gists{/gist_id}", "starred_url": "https://api.github.com/users/jasmainak/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jasmainak/subscriptions", "organizations_url": "https://api.github.com/users/jasmainak/orgs", "repos_url": "https://api.github.com/users/jasmainak/repos", "events_url": "https://api.github.com/users/jasmainak/events{/privacy}", "received_events_url": "https://api.github.com/users/jasmainak/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 9, "created_at": "2017-07-29T07:56:22Z", "updated_at": "2017-08-15T16:06:47Z", "closed_at": "2017-08-15T15:56:41Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "@jaeilepp my parting gift for you ;)\r\n\r\nHere is the script to reproduce\r\n\r\n```py\r\nimport mne\r\nfrom mne.datasets import sample\r\nfrom mne import read_evokeds\r\n\r\npath = sample.data_path()\r\nfname = path + '/MEG/sample/sample_audvis-ave.fif'\r\n\r\ncondition = 'Left Auditory'\r\nevoked = read_evokeds(fname, condition=condition, baseline=(None, 0))\r\ncontrast = mne.combine_evoked(\r\n    [evoked, evoked, evoked], weights=[0.5, 0.5, -1.])\r\nprint('Nave in contrast: %d' % contrast.nave)\r\nprint('Total number of epochs: %d' % (evoked.nave * 3))\r\n```\r\nNote that I didn't find any documentation for what `nave` should actually be, but I assumed it should be the addition of number of epochs in each evoked?\r\n\r\ncc @dengemann @agramfort ", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/4438/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/4438/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/4426", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/4426/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/4426/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/4426/events", "html_url": "https://github.com/mne-tools/mne-python/pull/4426", "id": 245670235, "node_id": "MDExOlB1bGxSZXF1ZXN0MTMyNDc2NjQy", "number": 4426, "title": "[MRG+1] Make stc.times read-only", "user": {"login": "wmvanvliet", "id": 428273, "node_id": "MDQ6VXNlcjQyODI3Mw==", "avatar_url": "https://avatars.githubusercontent.com/u/428273?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wmvanvliet", "html_url": "https://github.com/wmvanvliet", "followers_url": "https://api.github.com/users/wmvanvliet/followers", "following_url": "https://api.github.com/users/wmvanvliet/following{/other_user}", "gists_url": "https://api.github.com/users/wmvanvliet/gists{/gist_id}", "starred_url": "https://api.github.com/users/wmvanvliet/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wmvanvliet/subscriptions", "organizations_url": "https://api.github.com/users/wmvanvliet/orgs", "repos_url": "https://api.github.com/users/wmvanvliet/repos", "events_url": "https://api.github.com/users/wmvanvliet/events{/privacy}", "received_events_url": "https://api.github.com/users/wmvanvliet/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 23, "created_at": "2017-07-26T10:03:48Z", "updated_at": "2017-08-01T08:22:42Z", "closed_at": "2017-08-01T07:26:46Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/mne-tools/mne-python/pulls/4426", "html_url": "https://github.com/mne-tools/mne-python/pull/4426", "diff_url": "https://github.com/mne-tools/mne-python/pull/4426.diff", "patch_url": "https://github.com/mne-tools/mne-python/pull/4426.patch", "merged_at": "2017-08-01T07:26:46Z"}, "body": "The `.times` attribute of `_BaseSourceEstimate` is a function of the number of time samples, `tmin` and `tstep`. It should therefore be a read-only property. Because otherwise, we make mistakes and forget to call `_update_times()` and this happens:\r\n\r\n```python\r\nimport numpy as np\r\nfrom nose.tools import assert_equal\r\nimport mne\r\n\r\n# Generate an STC with random data\r\nrng = np.random.RandomState(0)\r\nn_verts_lh, n_verts_rh, n_times = 10, 10, 10\r\nvertices = [np.arange(n_verts_lh), n_verts_lh + np.arange(n_verts_rh)]\r\ndata = rng.randn(n_verts_lh + n_verts_rh, n_times)\r\nstc = mne.SourceEstimate(data, vertices=vertices, tmin=-0.1, tstep=0.1)\r\n\r\n# Perform a simple transform on part of the data\r\nstc.transform(np.abs, tmin=-50, tmax=500, copy=False)\r\n\r\n# Oops... this fails on current master!\r\nassert_equal(len(stc.times), stc.data.shape[1])\r\n```\r\n\r\nThis PR makes `.times` a property and fixes `_BaseSourceEstimate.transform()`. From reading the tests and the code, I assume the desired behavior is for the `tmax` parameter of `transform()` to be inclusive (just like with `crop()`).", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/4426/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/4426/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/4066", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/4066/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/4066/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/4066/events", "html_url": "https://github.com/mne-tools/mne-python/issues/4066", "id": 213861734, "node_id": "MDU6SXNzdWUyMTM4NjE3MzQ=", "number": 4066, "title": "BUG: RSA example is skipped", "user": {"login": "kingjr", "id": 4881164, "node_id": "MDQ6VXNlcjQ4ODExNjQ=", "avatar_url": "https://avatars.githubusercontent.com/u/4881164?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kingjr", "html_url": "https://github.com/kingjr", "followers_url": "https://api.github.com/users/kingjr/followers", "following_url": "https://api.github.com/users/kingjr/following{/other_user}", "gists_url": "https://api.github.com/users/kingjr/gists{/gist_id}", "starred_url": "https://api.github.com/users/kingjr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kingjr/subscriptions", "organizations_url": "https://api.github.com/users/kingjr/orgs", "repos_url": "https://api.github.com/users/kingjr/repos", "events_url": "https://api.github.com/users/kingjr/events{/privacy}", "received_events_url": "https://api.github.com/users/kingjr/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}, {"id": 77061445, "node_id": "MDU6TGFiZWw3NzA2MTQ0NQ==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/EASY", "name": "EASY", "color": "2be2d6", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": {"login": "kingjr", "id": 4881164, "node_id": "MDQ6VXNlcjQ4ODExNjQ=", "avatar_url": "https://avatars.githubusercontent.com/u/4881164?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kingjr", "html_url": "https://github.com/kingjr", "followers_url": "https://api.github.com/users/kingjr/followers", "following_url": "https://api.github.com/users/kingjr/following{/other_user}", "gists_url": "https://api.github.com/users/kingjr/gists{/gist_id}", "starred_url": "https://api.github.com/users/kingjr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kingjr/subscriptions", "organizations_url": "https://api.github.com/users/kingjr/orgs", "repos_url": "https://api.github.com/users/kingjr/repos", "events_url": "https://api.github.com/users/kingjr/events{/privacy}", "received_events_url": "https://api.github.com/users/kingjr/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "kingjr", "id": 4881164, "node_id": "MDQ6VXNlcjQ4ODExNjQ=", "avatar_url": "https://avatars.githubusercontent.com/u/4881164?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kingjr", "html_url": "https://github.com/kingjr", "followers_url": "https://api.github.com/users/kingjr/followers", "following_url": "https://api.github.com/users/kingjr/following{/other_user}", "gists_url": "https://api.github.com/users/kingjr/gists{/gist_id}", "starred_url": "https://api.github.com/users/kingjr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kingjr/subscriptions", "organizations_url": "https://api.github.com/users/kingjr/orgs", "repos_url": "https://api.github.com/users/kingjr/repos", "events_url": "https://api.github.com/users/kingjr/events{/privacy}", "received_events_url": "https://api.github.com/users/kingjr/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 5, "created_at": "2017-03-13T18:46:20Z", "updated_at": "2017-03-14T22:42:13Z", "closed_at": "2017-03-14T21:55:02Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "http://mne-tools.github.io/dev/auto_examples/decoding/decoding_rsa.html?highlight=rsa \r\n\r\ndoesn't create the image, we probably need to just change the name of the example.", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/4066/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/4066/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/4065", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/4065/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/4065/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/4065/events", "html_url": "https://github.com/mne-tools/mne-python/pull/4065", "id": 213840344, "node_id": "MDExOlB1bGxSZXF1ZXN0MTEwNDU2NzAy", "number": 4065, "title": "[MRG+1] FIX kit2fiff GIU for Ubuntu", "user": {"login": "christianbrodbeck", "id": 145771, "node_id": "MDQ6VXNlcjE0NTc3MQ==", "avatar_url": "https://avatars.githubusercontent.com/u/145771?v=4", "gravatar_id": "", "url": "https://api.github.com/users/christianbrodbeck", "html_url": "https://github.com/christianbrodbeck", "followers_url": "https://api.github.com/users/christianbrodbeck/followers", "following_url": "https://api.github.com/users/christianbrodbeck/following{/other_user}", "gists_url": "https://api.github.com/users/christianbrodbeck/gists{/gist_id}", "starred_url": "https://api.github.com/users/christianbrodbeck/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/christianbrodbeck/subscriptions", "organizations_url": "https://api.github.com/users/christianbrodbeck/orgs", "repos_url": "https://api.github.com/users/christianbrodbeck/repos", "events_url": "https://api.github.com/users/christianbrodbeck/events{/privacy}", "received_events_url": "https://api.github.com/users/christianbrodbeck/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}, {"id": 77061445, "node_id": "MDU6TGFiZWw3NzA2MTQ0NQ==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/EASY", "name": "EASY", "color": "2be2d6", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2017-03-13T17:28:18Z", "updated_at": "2017-03-19T11:12:17Z", "closed_at": "2017-03-19T11:12:17Z", "author_association": "MEMBER", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/mne-tools/mne-python/pulls/4065", "html_url": "https://github.com/mne-tools/mne-python/pull/4065", "diff_url": "https://github.com/mne-tools/mne-python/pull/4065.diff", "patch_url": "https://github.com/mne-tools/mne-python/pull/4065.patch", "merged_at": "2017-03-19T11:12:17Z"}, "body": "Turns out Ubuntu has the same problem with wildcards as Windows (cf. https://github.com/mne-tools/mne-python/pull/4013)\r\n\r\nCC @ellenlau ", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/4065/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/4065/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/4054", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/4054/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/4054/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/4054/events", "html_url": "https://github.com/mne-tools/mne-python/issues/4054", "id": 213569636, "node_id": "MDU6SXNzdWUyMTM1Njk2MzY=", "number": 4054, "title": "interactive ssp example broken", "user": {"login": "jasmainak", "id": 15852194, "node_id": "MDQ6VXNlcjE1ODUyMTk0", "avatar_url": "https://avatars.githubusercontent.com/u/15852194?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jasmainak", "html_url": "https://github.com/jasmainak", "followers_url": "https://api.github.com/users/jasmainak/followers", "following_url": "https://api.github.com/users/jasmainak/following{/other_user}", "gists_url": "https://api.github.com/users/jasmainak/gists{/gist_id}", "starred_url": "https://api.github.com/users/jasmainak/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jasmainak/subscriptions", "organizations_url": "https://api.github.com/users/jasmainak/orgs", "repos_url": "https://api.github.com/users/jasmainak/repos", "events_url": "https://api.github.com/users/jasmainak/events{/privacy}", "received_events_url": "https://api.github.com/users/jasmainak/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2017-03-12T00:09:15Z", "updated_at": "2017-03-16T15:02:29Z", "closed_at": "2017-03-16T15:02:29Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "I get this error on the latest master:\r\n\r\n```py\r\nTraceback (most recent call last):\r\n  File \"/home/mainak/anaconda2/lib/python2.7/site-packages/matplotlib/backends/t\r\n    guiEvent=event)\r\n  File \"/home/mainak/anaconda2/lib/python2.7/site-packages/matplotlib/backend_bt\r\n    self.callbacks.process(s, mouseevent)\r\n  File \"/home/mainak/anaconda2/lib/python2.7/site-packages/matplotlib/cbook.py\"s\r\n    proxy(*args, **kwargs)\r\n  File \"/home/mainak/anaconda2/lib/python2.7/site-packages/matplotlib/cbook.py\"_\r\n    return mtd(*args, **kwargs)\r\n  File \"/home/mainak/anaconda2/lib/python2.7/site-packages/matplotlib/widgets.pd\r\n    self.set_active(i)\r\n  File \"/home/mainak/anaconda2/lib/python2.7/site-packages/matplotlib/widgets.pe\r\n    func(self.labels[index].get_text())\r\n  File \"mne/viz/utils.py\", line 257, in _toggle_proj\r\n    params['plot_update_proj_callback'](params, bools)\r\n  File \"mne/viz/topomap.py\", line 103, in _plot_update_evoked_topomap\r\n    params['time_idx'])] * params['scale']\r\nIndexError: index 104 is out of bounds for axis 0 with size 102\r\n```\r\nfor this example: http://www.martinos.org/mne/stable/auto_tutorials/plot_artifacts_correction_ssp.html\r\ncc @jaeilepp ", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/4054/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/4054/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/4051", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/4051/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/4051/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/4051/events", "html_url": "https://github.com/mne-tools/mne-python/issues/4051", "id": 213443068, "node_id": "MDU6SXNzdWUyMTM0NDMwNjg=", "number": 4051, "title": "Q?: how to add layout to info", "user": {"login": "kingjr", "id": 4881164, "node_id": "MDQ6VXNlcjQ4ODExNjQ=", "avatar_url": "https://avatars.githubusercontent.com/u/4881164?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kingjr", "html_url": "https://github.com/kingjr", "followers_url": "https://api.github.com/users/kingjr/followers", "following_url": "https://api.github.com/users/kingjr/following{/other_user}", "gists_url": "https://api.github.com/users/kingjr/gists{/gist_id}", "starred_url": "https://api.github.com/users/kingjr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kingjr/subscriptions", "organizations_url": "https://api.github.com/users/kingjr/orgs", "repos_url": "https://api.github.com/users/kingjr/repos", "events_url": "https://api.github.com/users/kingjr/events{/privacy}", "received_events_url": "https://api.github.com/users/kingjr/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}, {"id": 541224499, "node_id": "MDU6TGFiZWw1NDEyMjQ0OTk=", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/Digitization", "name": "Digitization", "color": "f9d0c4", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 7, "created_at": "2017-03-10T20:24:00Z", "updated_at": "2018-04-04T13:43:40Z", "closed_at": "2018-04-04T13:43:40Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "I'm trying to plot an home-made EEG dataset (e.g. `evoked = mne.EvokedArray([[0, 0], [0, 0]], info=mne.create_info(2, sfreq=1))`)\r\n\r\nI made a layout and I can do `evoked.plot_joint(topomap_arg=dict(layout=layout))`. However the plot doesn't show Jona's spatial colors because `plot_joint()` looks for the layout in the evoked instance.\r\n\r\nIs there a way to add a `layout` to an evoked/info?", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/4051/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/4051/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/4024", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/4024/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/4024/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/4024/events", "html_url": "https://github.com/mne-tools/mne-python/pull/4024", "id": 210852148, "node_id": "MDExOlB1bGxSZXF1ZXN0MTA4Mzc3MzI4", "number": 4024, "title": "[MRG] FIX coreg-gui scale increment/decrement", "user": {"login": "christianbrodbeck", "id": 145771, "node_id": "MDQ6VXNlcjE0NTc3MQ==", "avatar_url": "https://avatars.githubusercontent.com/u/145771?v=4", "gravatar_id": "", "url": "https://api.github.com/users/christianbrodbeck", "html_url": "https://github.com/christianbrodbeck", "followers_url": "https://api.github.com/users/christianbrodbeck/followers", "following_url": "https://api.github.com/users/christianbrodbeck/following{/other_user}", "gists_url": "https://api.github.com/users/christianbrodbeck/gists{/gist_id}", "starred_url": "https://api.github.com/users/christianbrodbeck/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/christianbrodbeck/subscriptions", "organizations_url": "https://api.github.com/users/christianbrodbeck/orgs", "repos_url": "https://api.github.com/users/christianbrodbeck/repos", "events_url": "https://api.github.com/users/christianbrodbeck/events{/privacy}", "received_events_url": "https://api.github.com/users/christianbrodbeck/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}, {"id": 77061445, "node_id": "MDU6TGFiZWw3NzA2MTQ0NQ==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/EASY", "name": "EASY", "color": "2be2d6", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2017-02-28T17:16:29Z", "updated_at": "2017-03-15T06:49:32Z", "closed_at": "2017-03-15T06:49:13Z", "author_association": "MEMBER", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/mne-tools/mne-python/pulls/4024", "html_url": "https://github.com/mne-tools/mne-python/pull/4024", "diff_url": "https://github.com/mne-tools/mne-python/pull/4024.diff", "patch_url": "https://github.com/mne-tools/mne-python/pull/4024.patch", "merged_at": "2017-03-15T06:49:13Z"}, "body": "", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/4024/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/4024/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/3518", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/3518/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/3518/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/3518/events", "html_url": "https://github.com/mne-tools/mne-python/issues/3518", "id": 171167031, "node_id": "MDU6SXNzdWUxNzExNjcwMzE=", "number": 3518, "title": "BUG: non unique events in read_epochs", "user": {"login": "kingjr", "id": 4881164, "node_id": "MDQ6VXNlcjQ4ODExNjQ=", "avatar_url": "https://avatars.githubusercontent.com/u/4881164?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kingjr", "html_url": "https://github.com/kingjr", "followers_url": "https://api.github.com/users/kingjr/followers", "following_url": "https://api.github.com/users/kingjr/following{/other_user}", "gists_url": "https://api.github.com/users/kingjr/gists{/gist_id}", "starred_url": "https://api.github.com/users/kingjr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kingjr/subscriptions", "organizations_url": "https://api.github.com/users/kingjr/orgs", "repos_url": "https://api.github.com/users/kingjr/repos", "events_url": "https://api.github.com/users/kingjr/events{/privacy}", "received_events_url": "https://api.github.com/users/kingjr/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2016-08-15T13:11:38Z", "updated_at": "2016-09-08T11:16:56Z", "closed_at": "2016-09-08T11:16:56Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "When saving epochs with non unique events, we can't read them.\n\n```\nimport numpy as np\nfrom mne import EpochsArray, create_info, read_epochs\nepochs = EpochsArray(np.zeros((10, 11, 12)), create_info(11, 100., 'mag'), events=np.zeros((10, 3), int))\nepochs.save('test-epo.fif')\nepochs = read_epochs('test-epo.fif')\n```\n", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/3518/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/3518/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/3515", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/3515/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/3515/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/3515/events", "html_url": "https://github.com/mne-tools/mne-python/issues/3515", "id": 170986202, "node_id": "MDU6SXNzdWUxNzA5ODYyMDI=", "number": 3515, "title": "issues with animate_topomap in interactive mode", "user": {"login": "mmagnuski", "id": 8452354, "node_id": "MDQ6VXNlcjg0NTIzNTQ=", "avatar_url": "https://avatars.githubusercontent.com/u/8452354?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mmagnuski", "html_url": "https://github.com/mmagnuski", "followers_url": "https://api.github.com/users/mmagnuski/followers", "following_url": "https://api.github.com/users/mmagnuski/following{/other_user}", "gists_url": "https://api.github.com/users/mmagnuski/gists{/gist_id}", "starred_url": "https://api.github.com/users/mmagnuski/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mmagnuski/subscriptions", "organizations_url": "https://api.github.com/users/mmagnuski/orgs", "repos_url": "https://api.github.com/users/mmagnuski/repos", "events_url": "https://api.github.com/users/mmagnuski/events{/privacy}", "received_events_url": "https://api.github.com/users/mmagnuski/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2016-08-13T01:26:38Z", "updated_at": "2021-02-19T18:59:42Z", "closed_at": "2021-02-19T18:59:42Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "using `animate_topomap matplotlib` when in interactive mode (`%matplotlib`) does not work very well (at least on windows):\n- \"Initializing animation...\" is printed every time the animation goes back to the beginning - and the whole animation seems to be recomputed from scratch (I need to wait for a few seconds before it restarts)\n- clicking the topo does not stop the progression of time - only turns off redrawing. If I click the topo, and wait a few seconds, and then click again - the animation is a number of frames ahead (proportional to the time being paused)\n", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/3515/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/3515/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/3513", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/3513/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/3513/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/3513/events", "html_url": "https://github.com/mne-tools/mne-python/issues/3513", "id": 170902192, "node_id": "MDU6SXNzdWUxNzA5MDIxOTI=", "number": 3513, "title": "FieldTripClient.get_data_as_epoch() could not handle picks = None", "user": {"login": "YingYang", "id": 2836436, "node_id": "MDQ6VXNlcjI4MzY0MzY=", "avatar_url": "https://avatars.githubusercontent.com/u/2836436?v=4", "gravatar_id": "", "url": "https://api.github.com/users/YingYang", "html_url": "https://github.com/YingYang", "followers_url": "https://api.github.com/users/YingYang/followers", "following_url": "https://api.github.com/users/YingYang/following{/other_user}", "gists_url": "https://api.github.com/users/YingYang/gists{/gist_id}", "starred_url": "https://api.github.com/users/YingYang/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/YingYang/subscriptions", "organizations_url": "https://api.github.com/users/YingYang/orgs", "repos_url": "https://api.github.com/users/YingYang/repos", "events_url": "https://api.github.com/users/YingYang/events{/privacy}", "received_events_url": "https://api.github.com/users/YingYang/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2016-08-12T15:51:35Z", "updated_at": "2016-08-12T23:08:35Z", "closed_at": "2016-08-12T23:08:35Z", "author_association": "NONE", "active_lock_reason": null, "body": "When using the \"FieldTripClient\" object with a Biosemi EEG acquisition system and \"biosemi2ft\" in FieldTrip,  I found \"FieldTripClient.get_data_as_epoch()\" raises an error saying the dimension of data for EpochArray was wrong. Here is how I called the function. (I was using mne 0.12, and numpy 1.11.1)\n\n``` python\nfrom mne.realtime import FieldTripClient\nwith FieldTripClient(host='localhost', port=1972, tmax=150, wait_max=10) as rt_client:\n    a = rt_client.get_data_as_epoch()\n```\n\nAfter a closer look at the code,  I think here is what went wrong. When calling rt_client.get_data_as_epochs(n_samples=1024, picks=None),  I used picks = None, which changed the data from a 2D array to a 4D array. \n\nIn \"mne-python/mne/realtime/fieldtrip_client.py\", Line 262\n\n``` python\nepoch = EpochsArray(data[picks][np.newaxis], info, events)\n```\n\nIf \"picks\" is None as default,  \"data[picks].shape\"  is (1, n_channel, n_samples), then \"data[picks][np.newaxis]\" will be a 4D array (1, 1, n_channel, n_samples), which \"EpochArray\" could not initialize from.  \n\nI tried setting \"picks\" to a list of integers, and it worked well. So it is only an issue when \"picks\" is None. I am not sure whether this is a Numpy version issue or not.  It might be better to change the code to something like\n\n``` python\nif picks is None:\n    epoch = EpochsArray(data[np.newaxis], info, events)\nelse:\n    epoch = EpochsArray(data[picks][np.newaxis], info, events)\n```\n\nBest,\nYing\n", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/3513/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/3513/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/3512", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/3512/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/3512/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/3512/events", "html_url": "https://github.com/mne-tools/mne-python/issues/3512", "id": 170815936, "node_id": "MDU6SXNzdWUxNzA4MTU5MzY=", "number": 3512, "title": "BUG: Need two key presses in raw plot", "user": {"login": "cbrnr", "id": 4377312, "node_id": "MDQ6VXNlcjQzNzczMTI=", "avatar_url": "https://avatars.githubusercontent.com/u/4377312?v=4", "gravatar_id": "", "url": "https://api.github.com/users/cbrnr", "html_url": "https://github.com/cbrnr", "followers_url": "https://api.github.com/users/cbrnr/followers", "following_url": "https://api.github.com/users/cbrnr/following{/other_user}", "gists_url": "https://api.github.com/users/cbrnr/gists{/gist_id}", "starred_url": "https://api.github.com/users/cbrnr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/cbrnr/subscriptions", "organizations_url": "https://api.github.com/users/cbrnr/orgs", "repos_url": "https://api.github.com/users/cbrnr/repos", "events_url": "https://api.github.com/users/cbrnr/events{/privacy}", "received_events_url": "https://api.github.com/users/cbrnr/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 10, "created_at": "2016-08-12T07:42:57Z", "updated_at": "2017-03-21T15:27:49Z", "closed_at": "2017-03-21T15:00:44Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "When I plot my raw EEG with `raw.plot()`, the keyboard controls do not work as expected. For example, to scroll one page to the right I press the right arrow key. Nothing happens - I need to press another key until the plot gets updated and shows the next page. I've tested this on Mac OS X with the latest Anaconda distribution in IPython (with and without `%matplotlib`).\n\nUpdate: I actually have to press Shift in order to confirm the left/right key presses. Other keys don't seem to work.\n", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/3512/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/3512/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/3424", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/3424/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/3424/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/3424/events", "html_url": "https://github.com/mne-tools/mne-python/issues/3424", "id": 165851165, "node_id": "MDU6SXNzdWUxNjU4NTExNjU=", "number": 3424, "title": "BUG: time domain of the plot_pattern exceed range", "user": {"login": "teonbrooks", "id": 1578674, "node_id": "MDQ6VXNlcjE1Nzg2NzQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1578674?v=4", "gravatar_id": "", "url": "https://api.github.com/users/teonbrooks", "html_url": "https://github.com/teonbrooks", "followers_url": "https://api.github.com/users/teonbrooks/followers", "following_url": "https://api.github.com/users/teonbrooks/following{/other_user}", "gists_url": "https://api.github.com/users/teonbrooks/gists{/gist_id}", "starred_url": "https://api.github.com/users/teonbrooks/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/teonbrooks/subscriptions", "organizations_url": "https://api.github.com/users/teonbrooks/orgs", "repos_url": "https://api.github.com/users/teonbrooks/repos", "events_url": "https://api.github.com/users/teonbrooks/events{/privacy}", "received_events_url": "https://api.github.com/users/teonbrooks/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 14, "created_at": "2016-07-15T18:36:52Z", "updated_at": "2017-02-21T14:36:50Z", "closed_at": "2017-02-21T14:36:50Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "Using the linear_model.plot_patterns, there is an error in the plot where the time points do not correspond to the epochs time range. We can also see this in the [example](http://martinos.org/mne/dev/auto_examples/decoding/plot_linear_model_patterns.html#sphx-glr-auto-examples-decoding-plot-linear-model-patterns-py) where the plot pattern should be from -200 to 500 ms but it exceeds it in the plot. this is similar to #3180.\n\ncc: @jaeilepp, @Eric89GXL, @EstiBlancoElorrieta\n", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/3424/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/3424/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/3420", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/3420/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/3420/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/3420/events", "html_url": "https://github.com/mne-tools/mne-python/issues/3420", "id": 165307824, "node_id": "MDU6SXNzdWUxNjUzMDc4MjQ=", "number": 3420, "title": "BUG: import of EDF files with accentuated annotations", "user": {"login": "deep-introspection", "id": 208779, "node_id": "MDQ6VXNlcjIwODc3OQ==", "avatar_url": "https://avatars.githubusercontent.com/u/208779?v=4", "gravatar_id": "", "url": "https://api.github.com/users/deep-introspection", "html_url": "https://github.com/deep-introspection", "followers_url": "https://api.github.com/users/deep-introspection/followers", "following_url": "https://api.github.com/users/deep-introspection/following{/other_user}", "gists_url": "https://api.github.com/users/deep-introspection/gists{/gist_id}", "starred_url": "https://api.github.com/users/deep-introspection/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/deep-introspection/subscriptions", "organizations_url": "https://api.github.com/users/deep-introspection/orgs", "repos_url": "https://api.github.com/users/deep-introspection/repos", "events_url": "https://api.github.com/users/deep-introspection/events{/privacy}", "received_events_url": "https://api.github.com/users/deep-introspection/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 20, "created_at": "2016-07-13T12:25:14Z", "updated_at": "2016-08-29T12:26:46Z", "closed_at": "2016-08-29T12:26:45Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Hey!\nSo importing an EDF file, I have a crash\n\n> ValueError: byte must be in range(0, 256)\n\noccuring at this level: https://github.com/mne-tools/mne-python/blob/f04d1460d10ebe3b9466ccad9c077040d42a6d5f/mne/io/edf/edf.py#L258\n\nDigging into the code, I realize that the (French) people who have recorded the EEG may have put characters with accents.\n\nBy changing the above part of the code to :\n\n```\ntry:\n    tals.extend([i % 256, i // 256])\nexcept:\n    print i, tals[10:].decode('ascii', 'ignore')\n    raise('DEBUG')\n```\n\nI obtained this:\n\n> -5779 0000+44+1166PHOTO 0.5Hz+45+1172+1172.200000+46+1172Yeux ouverts+47+1178+1178.840000+48+1178Yeux fer\n\nIt's indeed French, and the error occurs exactly at the level of the annotation **Yeux fer** **_m\u00e9_** (if you take i = -5779, the i % 256 gives '**m**', so I assume the original second character causing the bug was '**\u00e9**'...\n\nSo, what should be the best way to handle this?\n\nThanks!\nGuillaume\n", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/3420/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/3420/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/3416", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/3416/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/3416/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/3416/events", "html_url": "https://github.com/mne-tools/mne-python/issues/3416", "id": 164895473, "node_id": "MDU6SXNzdWUxNjQ4OTU0NzM=", "number": 3416, "title": "[BUG] joint_plot does not take exclude param", "user": {"login": "jasmainak", "id": 15852194, "node_id": "MDQ6VXNlcjE1ODUyMTk0", "avatar_url": "https://avatars.githubusercontent.com/u/15852194?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jasmainak", "html_url": "https://github.com/jasmainak", "followers_url": "https://api.github.com/users/jasmainak/followers", "following_url": "https://api.github.com/users/jasmainak/following{/other_user}", "gists_url": "https://api.github.com/users/jasmainak/gists{/gist_id}", "starred_url": "https://api.github.com/users/jasmainak/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jasmainak/subscriptions", "organizations_url": "https://api.github.com/users/jasmainak/orgs", "repos_url": "https://api.github.com/users/jasmainak/repos", "events_url": "https://api.github.com/users/jasmainak/events{/privacy}", "received_events_url": "https://api.github.com/users/jasmainak/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2016-07-11T17:51:16Z", "updated_at": "2016-07-12T07:02:46Z", "closed_at": "2016-07-12T07:02:46Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "I tried the following:\n\n``` py\nfrom mne.datasets import sample\nfrom mne import read_evokeds\n\npath = sample.data_path()\nfname = path + '/MEG/sample/sample_audvis-ave.fif'\n\ncondition = 'Left Auditory'\nevoked = read_evokeds(fname, condition=condition, baseline=(None, 0))\n\ntimes = 0.1\nevoked.plot_joint(times, ts_args=dict(exclude=[]))\n```\n\nand it didn't work ...\n", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/3416/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/3416/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/3411", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/3411/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/3411/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/3411/events", "html_url": "https://github.com/mne-tools/mne-python/issues/3411", "id": 164667618, "node_id": "MDU6SXNzdWUxNjQ2Njc2MTg=", "number": 3411, "title": "legend missing with evoked.plot_joint() and evoked.plot()", "user": {"login": "jasmainak", "id": 15852194, "node_id": "MDQ6VXNlcjE1ODUyMTk0", "avatar_url": "https://avatars.githubusercontent.com/u/15852194?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jasmainak", "html_url": "https://github.com/jasmainak", "followers_url": "https://api.github.com/users/jasmainak/followers", "following_url": "https://api.github.com/users/jasmainak/following{/other_user}", "gists_url": "https://api.github.com/users/jasmainak/gists{/gist_id}", "starred_url": "https://api.github.com/users/jasmainak/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jasmainak/subscriptions", "organizations_url": "https://api.github.com/users/jasmainak/orgs", "repos_url": "https://api.github.com/users/jasmainak/repos", "events_url": "https://api.github.com/users/jasmainak/events{/privacy}", "received_events_url": "https://api.github.com/users/jasmainak/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 9, "created_at": "2016-07-09T13:43:26Z", "updated_at": "2016-07-11T14:14:21Z", "closed_at": "2016-07-11T14:14:21Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "I am trying to plot evokeds using the super-cool spatial colors that Jona added. However, when the colors are not inferred from the layout, there is no legend. I think there should be a legend whenever there are colors. To reproduce, look at evoked from HCP / 4D systems ...\ncc @jona-sassenhagen \n![error](https://cloud.githubusercontent.com/assets/15852194/16708228/79bd696e-45eb-11e6-85e1-68b55ce05c1f.png)\n", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/3411/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/3411/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/3282", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/3282/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/3282/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/3282/events", "html_url": "https://github.com/mne-tools/mne-python/issues/3282", "id": 158513298, "node_id": "MDU6SXNzdWUxNTg1MTMyOTg=", "number": 3282, "title": "BUG: save coregistration with MRI scaling", "user": {"login": "kingjr", "id": 4881164, "node_id": "MDQ6VXNlcjQ4ODExNjQ=", "avatar_url": "https://avatars.githubusercontent.com/u/4881164?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kingjr", "html_url": "https://github.com/kingjr", "followers_url": "https://api.github.com/users/kingjr/followers", "following_url": "https://api.github.com/users/kingjr/following{/other_user}", "gists_url": "https://api.github.com/users/kingjr/gists{/gist_id}", "starred_url": "https://api.github.com/users/kingjr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kingjr/subscriptions", "organizations_url": "https://api.github.com/users/kingjr/orgs", "repos_url": "https://api.github.com/users/kingjr/repos", "events_url": "https://api.github.com/users/kingjr/events{/privacy}", "received_events_url": "https://api.github.com/users/kingjr/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "christianbrodbeck", "id": 145771, "node_id": "MDQ6VXNlcjE0NTc3MQ==", "avatar_url": "https://avatars.githubusercontent.com/u/145771?v=4", "gravatar_id": "", "url": "https://api.github.com/users/christianbrodbeck", "html_url": "https://github.com/christianbrodbeck", "followers_url": "https://api.github.com/users/christianbrodbeck/followers", "following_url": "https://api.github.com/users/christianbrodbeck/following{/other_user}", "gists_url": "https://api.github.com/users/christianbrodbeck/gists{/gist_id}", "starred_url": "https://api.github.com/users/christianbrodbeck/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/christianbrodbeck/subscriptions", "organizations_url": "https://api.github.com/users/christianbrodbeck/orgs", "repos_url": "https://api.github.com/users/christianbrodbeck/repos", "events_url": "https://api.github.com/users/christianbrodbeck/events{/privacy}", "received_events_url": "https://api.github.com/users/christianbrodbeck/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "christianbrodbeck", "id": 145771, "node_id": "MDQ6VXNlcjE0NTc3MQ==", "avatar_url": "https://avatars.githubusercontent.com/u/145771?v=4", "gravatar_id": "", "url": "https://api.github.com/users/christianbrodbeck", "html_url": "https://github.com/christianbrodbeck", "followers_url": "https://api.github.com/users/christianbrodbeck/followers", "following_url": "https://api.github.com/users/christianbrodbeck/following{/other_user}", "gists_url": "https://api.github.com/users/christianbrodbeck/gists{/gist_id}", "starred_url": "https://api.github.com/users/christianbrodbeck/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/christianbrodbeck/subscriptions", "organizations_url": "https://api.github.com/users/christianbrodbeck/orgs", "repos_url": "https://api.github.com/users/christianbrodbeck/repos", "events_url": "https://api.github.com/users/christianbrodbeck/events{/privacy}", "received_events_url": "https://api.github.com/users/christianbrodbeck/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 3, "created_at": "2016-06-04T16:54:35Z", "updated_at": "2016-07-13T13:29:20Z", "closed_at": "2016-07-13T13:29:20Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "When applying an MRI scaling during the coregistration, we only have the option to save as a different subject name, which creates a `OSError` in the background (not a python crash) when saving because the corresponding directory doesn't exists. I guess this is a partly intended feature, but it still needs a fix.\n\nTo reproduce the issue:\n\n```\nfrom mne.gui import coregistration\nfrom mne.datasets import sample\ndata_path = sample.data_path()\nsubjects_dir = data_path + '/subjects'\nsubject = 'sample'\nraw_fname = data_path + '/MEG/sample/sample_audvis_filt-0-40_raw.fif'\ncoregistration(subject=subject, subjects_dir=subjects_dir, inst=raw_fname)\n```\n\n=> apply `mri scaling`\n=> save as `sample_foo`\n=> `No such file or directory: '/home/jrking/mne_data/MNE-sample-data/subjects/sample_foo/bem'`\n", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/3282/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/3282/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/3249", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/3249/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/3249/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/3249/events", "html_url": "https://github.com/mne-tools/mne-python/issues/3249", "id": 156883621, "node_id": "MDU6SXNzdWUxNTY4ODM2MjE=", "number": 3249, "title": "bug with multitaper DICS", "user": {"login": "agramfort", "id": 161052, "node_id": "MDQ6VXNlcjE2MTA1Mg==", "avatar_url": "https://avatars.githubusercontent.com/u/161052?v=4", "gravatar_id": "", "url": "https://api.github.com/users/agramfort", "html_url": "https://github.com/agramfort", "followers_url": "https://api.github.com/users/agramfort/followers", "following_url": "https://api.github.com/users/agramfort/following{/other_user}", "gists_url": "https://api.github.com/users/agramfort/gists{/gist_id}", "starred_url": "https://api.github.com/users/agramfort/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/agramfort/subscriptions", "organizations_url": "https://api.github.com/users/agramfort/orgs", "repos_url": "https://api.github.com/users/agramfort/repos", "events_url": "https://api.github.com/users/agramfort/events{/privacy}", "received_events_url": "https://api.github.com/users/agramfort/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/mne-tools/mne-python/milestones/12", "html_url": "https://github.com/mne-tools/mne-python/milestone/12", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/milestones/12/labels", "id": 2716744, "node_id": "MDk6TWlsZXN0b25lMjcxNjc0NA==", "number": 12, "title": "0.16", "description": "", "creator": {"login": "larsoner", "id": 2365790, "node_id": "MDQ6VXNlcjIzNjU3OTA=", "avatar_url": "https://avatars.githubusercontent.com/u/2365790?v=4", "gravatar_id": "", "url": "https://api.github.com/users/larsoner", "html_url": "https://github.com/larsoner", "followers_url": "https://api.github.com/users/larsoner/followers", "following_url": "https://api.github.com/users/larsoner/following{/other_user}", "gists_url": "https://api.github.com/users/larsoner/gists{/gist_id}", "starred_url": "https://api.github.com/users/larsoner/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/larsoner/subscriptions", "organizations_url": "https://api.github.com/users/larsoner/orgs", "repos_url": "https://api.github.com/users/larsoner/repos", "events_url": "https://api.github.com/users/larsoner/events{/privacy}", "received_events_url": "https://api.github.com/users/larsoner/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 95, "state": "closed", "created_at": "2017-08-22T19:08:45Z", "updated_at": "2018-07-11T19:23:28Z", "due_on": "2018-02-01T08:00:00Z", "closed_at": "2018-07-11T19:23:28Z"}, "comments": 10, "created_at": "2016-05-26T01:13:41Z", "updated_at": "2018-04-12T16:21:40Z", "closed_at": "2018-04-12T16:21:40Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "see mailing list message:\n\n```\nIn order to compute the single-trial power at the source level at a single frequency, the steps I normally use (in Fieldtrip) are:\n1) Multitaper at the sensor level: compute complex-valued estimates of spectral measures Xsensor(n, t, k) , for each trial n, time t, and taper k. The cross-spectral density matrices, however, is computed across trials (average csd).\n2) DICS: compute complex-value spectral measures at the source level, Xsource(s, t, k) =  A * Xsensor(n, t, k) , where A(t) is the real-valued spatial filter that transforms the data from the sensor to source level, which is computed from the real part of the csd in (1). The Xsource(s, t, k) is calculated for each source s, time t, and taper k\n3) The single-trial power at each source location is computed by multiplying the complex spectral estimates with their complex conjugate, and averaged over tapers k. Psource(s, t) = <   Xsource dot Xsource(s, t, k) * > over k\n4) Finally, I log-transform the power values to make the data approximate Gaussian and lowpass filtered at 50 Hz to reduce noise. Then, the single-trial mean power and SD in the baseline period (i.e., multiple estimates of noise) are computed for each source and trial, and used to z-transform single-trial event-related power time courses.\n\nI hope this is clear. If you want a detailed description you can read the paragraph \"Single-trial HGA at BAs\" in the Methods in this paper:\nhttp://www.jneurosci.org/content/35/37/12643.short\n\nHowever, I am not familiar with MNE yet, I am slowly learning. So, I don't know exactly how I could contribute to implement this. But I can help ! Just let me know.\n```\n", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/3249/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/3249/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/3248", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/3248/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/3248/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/3248/events", "html_url": "https://github.com/mne-tools/mne-python/issues/3248", "id": 156870929, "node_id": "MDU6SXNzdWUxNTY4NzA5Mjk=", "number": 3248, "title": "BUG: incorrect freq bandwidth in FilterEstimator", "user": {"login": "kingjr", "id": 4881164, "node_id": "MDQ6VXNlcjQ4ODExNjQ=", "avatar_url": "https://avatars.githubusercontent.com/u/4881164?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kingjr", "html_url": "https://github.com/kingjr", "followers_url": "https://api.github.com/users/kingjr/followers", "following_url": "https://api.github.com/users/kingjr/following{/other_user}", "gists_url": "https://api.github.com/users/kingjr/gists{/gist_id}", "starred_url": "https://api.github.com/users/kingjr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kingjr/subscriptions", "organizations_url": "https://api.github.com/users/kingjr/orgs", "repos_url": "https://api.github.com/users/kingjr/repos", "events_url": "https://api.github.com/users/kingjr/events{/privacy}", "received_events_url": "https://api.github.com/users/kingjr/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 11, "created_at": "2016-05-25T23:15:19Z", "updated_at": "2017-02-14T15:17:33Z", "closed_at": "2017-02-14T15:17:33Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "@trachelr I'm not entirely sure but I think there is a problem with the transition bandwidths in your [`FilterEstimator`](https://github.com/mne-tools/mne-python/pull/2292).\n\nCan you confirm or infirm that the low and high bandwidth are adequate?\nhttps://github.com/mne-tools/mne-python/blob/master/mne/decoding/transformer.py#L484\n\nIf not, I'll mark the issue as a bug, but don't worry about submitting a PR soon (although you may), we're about to refactor all decoding transformers and estimators.\n\nIf it's working as intended, well, my bad..\n", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/3248/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/3248/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/3220", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/3220/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/3220/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/3220/events", "html_url": "https://github.com/mne-tools/mne-python/issues/3220", "id": 154242260, "node_id": "MDU6SXNzdWUxNTQyNDIyNjA=", "number": 3220, "title": "Sklearn warnings for RandomizedPCA", "user": {"login": "larsoner", "id": 2365790, "node_id": "MDQ6VXNlcjIzNjU3OTA=", "avatar_url": "https://avatars.githubusercontent.com/u/2365790?v=4", "gravatar_id": "", "url": "https://api.github.com/users/larsoner", "html_url": "https://github.com/larsoner", "followers_url": "https://api.github.com/users/larsoner/followers", "following_url": "https://api.github.com/users/larsoner/following{/other_user}", "gists_url": "https://api.github.com/users/larsoner/gists{/gist_id}", "starred_url": "https://api.github.com/users/larsoner/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/larsoner/subscriptions", "organizations_url": "https://api.github.com/users/larsoner/orgs", "repos_url": "https://api.github.com/users/larsoner/repos", "events_url": "https://api.github.com/users/larsoner/events{/privacy}", "received_events_url": "https://api.github.com/users/larsoner/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/mne-tools/mne-python/milestones/9", "html_url": "https://github.com/mne-tools/mne-python/milestone/9", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/milestones/9/labels", "id": 1648503, "node_id": "MDk6TWlsZXN0b25lMTY0ODUwMw==", "number": 9, "title": "0.13", "description": "", "creator": {"login": "larsoner", "id": 2365790, "node_id": "MDQ6VXNlcjIzNjU3OTA=", "avatar_url": "https://avatars.githubusercontent.com/u/2365790?v=4", "gravatar_id": "", "url": "https://api.github.com/users/larsoner", "html_url": "https://github.com/larsoner", "followers_url": "https://api.github.com/users/larsoner/followers", "following_url": "https://api.github.com/users/larsoner/following{/other_user}", "gists_url": "https://api.github.com/users/larsoner/gists{/gist_id}", "starred_url": "https://api.github.com/users/larsoner/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/larsoner/subscriptions", "organizations_url": "https://api.github.com/users/larsoner/orgs", "repos_url": "https://api.github.com/users/larsoner/repos", "events_url": "https://api.github.com/users/larsoner/events{/privacy}", "received_events_url": "https://api.github.com/users/larsoner/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 121, "state": "closed", "created_at": "2016-03-16T17:14:08Z", "updated_at": "2017-01-06T17:11:23Z", "due_on": "2016-09-23T07:00:00Z", "closed_at": "2017-01-06T17:11:23Z"}, "comments": 2, "created_at": "2016-05-11T13:22:21Z", "updated_at": "2016-07-24T18:33:26Z", "closed_at": "2016-07-24T18:33:26Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "In running the `plot_artifacts_correction_ica.py` tutorial with latest `sklearn`:\n\n```\nDeprecationWarning: Class RandomizedPCA is deprecated; RandomizedPCA will\nbe removed in 0.20. Use PCA(svd_solver='randomized') instead. The new implementation\nDOES NOT store whiten components_. Apply transform to get them.\n```\n\nAny volunteer to fix it?\n", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/3220/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/3220/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/3180", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/3180/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/3180/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/3180/events", "html_url": "https://github.com/mne-tools/mne-python/issues/3180", "id": 151221122, "node_id": "MDU6SXNzdWUxNTEyMjExMjI=", "number": 3180, "title": "plot_topomap times for CSP example", "user": {"login": "teonbrooks", "id": 1578674, "node_id": "MDQ6VXNlcjE1Nzg2NzQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1578674?v=4", "gravatar_id": "", "url": "https://api.github.com/users/teonbrooks", "html_url": "https://github.com/teonbrooks", "followers_url": "https://api.github.com/users/teonbrooks/followers", "following_url": "https://api.github.com/users/teonbrooks/following{/other_user}", "gists_url": "https://api.github.com/users/teonbrooks/gists{/gist_id}", "starred_url": "https://api.github.com/users/teonbrooks/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/teonbrooks/subscriptions", "organizations_url": "https://api.github.com/users/teonbrooks/orgs", "repos_url": "https://api.github.com/users/teonbrooks/repos", "events_url": "https://api.github.com/users/teonbrooks/events{/privacy}", "received_events_url": "https://api.github.com/users/teonbrooks/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/mne-tools/mne-python/milestones/8", "html_url": "https://github.com/mne-tools/mne-python/milestone/8", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/milestones/8/labels", "id": 1429321, "node_id": "MDk6TWlsZXN0b25lMTQyOTMyMQ==", "number": 8, "title": "0.12", "description": "", "creator": {"login": "larsoner", "id": 2365790, "node_id": "MDQ6VXNlcjIzNjU3OTA=", "avatar_url": "https://avatars.githubusercontent.com/u/2365790?v=4", "gravatar_id": "", "url": "https://api.github.com/users/larsoner", "html_url": "https://github.com/larsoner", "followers_url": "https://api.github.com/users/larsoner/followers", "following_url": "https://api.github.com/users/larsoner/following{/other_user}", "gists_url": "https://api.github.com/users/larsoner/gists{/gist_id}", "starred_url": "https://api.github.com/users/larsoner/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/larsoner/subscriptions", "organizations_url": "https://api.github.com/users/larsoner/orgs", "repos_url": "https://api.github.com/users/larsoner/repos", "events_url": "https://api.github.com/users/larsoner/events{/privacy}", "received_events_url": "https://api.github.com/users/larsoner/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 168, "state": "closed", "created_at": "2015-11-25T13:36:18Z", "updated_at": "2016-05-27T10:59:37Z", "due_on": "2016-04-29T07:00:00Z", "closed_at": "2016-05-27T10:59:37Z"}, "comments": 4, "created_at": "2016-04-26T19:38:32Z", "updated_at": "2016-04-28T13:50:45Z", "closed_at": "2016-04-28T13:50:45Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "with the plot_decoding_sp_space example, the plot_topomap goes behind the time range of the data. seems like a bug with how times is defined in the example.\n\nhttp://martinos.org/mne/stable/auto_examples/decoding/plot_decoding_csp_space.html\n", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/3180/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/3180/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/3118", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/3118/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/3118/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/3118/events", "html_url": "https://github.com/mne-tools/mne-python/issues/3118", "id": 147868977, "node_id": "MDU6SXNzdWUxNDc4Njg5Nzc=", "number": 3118, "title": "Error in ica.plot_component", "user": {"login": "teonbrooks", "id": 1578674, "node_id": "MDQ6VXNlcjE1Nzg2NzQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1578674?v=4", "gravatar_id": "", "url": "https://api.github.com/users/teonbrooks", "html_url": "https://github.com/teonbrooks", "followers_url": "https://api.github.com/users/teonbrooks/followers", "following_url": "https://api.github.com/users/teonbrooks/following{/other_user}", "gists_url": "https://api.github.com/users/teonbrooks/gists{/gist_id}", "starred_url": "https://api.github.com/users/teonbrooks/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/teonbrooks/subscriptions", "organizations_url": "https://api.github.com/users/teonbrooks/orgs", "repos_url": "https://api.github.com/users/teonbrooks/repos", "events_url": "https://api.github.com/users/teonbrooks/events{/privacy}", "received_events_url": "https://api.github.com/users/teonbrooks/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/mne-tools/mne-python/milestones/8", "html_url": "https://github.com/mne-tools/mne-python/milestone/8", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/milestones/8/labels", "id": 1429321, "node_id": "MDk6TWlsZXN0b25lMTQyOTMyMQ==", "number": 8, "title": "0.12", "description": "", "creator": {"login": "larsoner", "id": 2365790, "node_id": "MDQ6VXNlcjIzNjU3OTA=", "avatar_url": "https://avatars.githubusercontent.com/u/2365790?v=4", "gravatar_id": "", "url": "https://api.github.com/users/larsoner", "html_url": "https://github.com/larsoner", "followers_url": "https://api.github.com/users/larsoner/followers", "following_url": "https://api.github.com/users/larsoner/following{/other_user}", "gists_url": "https://api.github.com/users/larsoner/gists{/gist_id}", "starred_url": "https://api.github.com/users/larsoner/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/larsoner/subscriptions", "organizations_url": "https://api.github.com/users/larsoner/orgs", "repos_url": "https://api.github.com/users/larsoner/repos", "events_url": "https://api.github.com/users/larsoner/events{/privacy}", "received_events_url": "https://api.github.com/users/larsoner/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 168, "state": "closed", "created_at": "2015-11-25T13:36:18Z", "updated_at": "2016-05-27T10:59:37Z", "due_on": "2016-04-29T07:00:00Z", "closed_at": "2016-05-27T10:59:37Z"}, "comments": 8, "created_at": "2016-04-12T20:49:55Z", "updated_at": "2016-04-25T13:36:34Z", "closed_at": "2016-04-25T13:36:34Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "Is there a particular reason or has anyone had problems with `ica.plot_components()`. I'm getting an error with the `is_bbox`. I am guessing that the bounding box is not being constructed for my channel array. This also happens when I specify the layout for the system.\n\n```\nIn [51]: ica.plot_components()\n---------------------------------------------------------------------------\nAttributeError                            Traceback (most recent call last)\n<ipython-input-51-31baf63ee5ff> in <module>()\n----> 1 ica.plot_components()\n\n/Applications/packages/mne-python/mne/preprocessing/ica.py in plot_components(self, picks, ch_type, res, layout, vmin, vmax, cmap, sensors, colorbar, title, show, outlines, contours, image_interp, head_pos)\n   1384                                    outlines=outlines, contours=contours,\n   1385                                    image_interp=image_interp,\n-> 1386                                    head_pos=head_pos)\n   1387 \n   1388     def plot_sources(self, inst, picks=None, exclude=None, start=None,\n\n/Applications/packages/mne-python/mne/viz/topomap.py in plot_ica_components(ica, picks, ch_type, res, layout, vmin, vmax, cmap, sensors, colorbar, title, show, outlines, contours, image_interp, head_pos)\n    748                                       show=show, outlines=outlines,\n    749                                       contours=contours,\n--> 750                                       image_interp=image_interp)\n    751             figs.append(fig)\n    752         return figs\n\n/Applications/packages/mne-python/mne/viz/topomap.py in plot_ica_components(ica, picks, ch_type, res, layout, vmin, vmax, cmap, sensors, colorbar, title, show, outlines, contours, image_interp, head_pos)\n    799     tight_layout(fig=fig)\n    800     fig.subplots_adjust(top=0.95)\n--> 801     fig.canvas.draw()\n    802     plt_show(show)\n    803     return fig\n\n/Users/teon/anaconda/lib/python2.7/site-packages/matplotlib/backends/backend_qt5agg.pyc in draw(self)\n    146         # causes problems with code that uses the result of the\n    147         # draw() to update plot elements.\n--> 148         FigureCanvasAgg.draw(self)\n    149         self._priv_update()\n    150 \n\n/Users/teon/anaconda/lib/python2.7/site-packages/matplotlib/backends/backend_agg.pyc in draw(self)\n    467 \n    468         try:\n--> 469             self.figure.draw(self.renderer)\n    470         finally:\n    471             RendererAgg.lock.release()\n\n/Users/teon/anaconda/lib/python2.7/site-packages/matplotlib/artist.pyc in draw_wrapper(artist, renderer, *args, **kwargs)\n     57     def draw_wrapper(artist, renderer, *args, **kwargs):\n     58         before(artist, renderer)\n---> 59         draw(artist, renderer, *args, **kwargs)\n     60         after(artist, renderer)\n     61 \n\n/Users/teon/anaconda/lib/python2.7/site-packages/matplotlib/figure.pyc in draw(self, renderer)\n   1015         if self.get_tight_layout() and self.axes:\n   1016             try:\n-> 1017                 self.tight_layout(renderer, **self._tight_parameters)\n   1018             except ValueError:\n   1019                 pass\n\n/Users/teon/anaconda/lib/python2.7/site-packages/matplotlib/figure.pyc in tight_layout(self, renderer, pad, h_pad, w_pad, rect)\n   1661                                          renderer,\n   1662                                          pad=pad, h_pad=h_pad, w_pad=w_pad,\n-> 1663                                          rect=rect)\n   1664 \n   1665         self.subplots_adjust(**kwargs)\n\n/Users/teon/anaconda/lib/python2.7/site-packages/matplotlib/tight_layout.pyc in get_tight_layout_figure(fig, axes_list, subplotspec_list, renderer, pad, h_pad, w_pad, rect)\n    350                                      subplot_list=subplot_list,\n    351                                      ax_bbox_list=ax_bbox_list,\n--> 352                                      pad=pad, h_pad=h_pad, w_pad=w_pad)\n    353 \n    354     if rect is not None:\n\n/Users/teon/anaconda/lib/python2.7/site-packages/matplotlib/tight_layout.pyc in auto_adjust_subplotpars(fig, renderer, nrows_ncols, num1num2_list, subplot_list, ax_bbox_list, pad, h_pad, w_pad, rect)\n    129         tight_bbox_raw = union([ax.get_tightbbox(renderer) for ax in subplots])\n    130         tight_bbox = TransformedBbox(tight_bbox_raw,\n--> 131                                      fig.transFigure.inverted())\n    132 \n    133         row1, col1 = divmod(num1, cols)\n\n/Users/teon/anaconda/lib/python2.7/site-packages/matplotlib/transforms.pyc in __init__(self, bbox, transform, **kwargs)\n   1055         *transform*: a 2D :class:`Transform`\n   1056         \"\"\"\n-> 1057         assert bbox.is_bbox\n   1058         assert isinstance(transform, Transform)\n   1059         assert transform.input_dims == 2\n\nIn [52]: ica.plot_components()\nAttributeError: 'NoneType' object has no attribute 'is_bbox'\n\nIn [52]: Traceback (most recent call last):\n  File \"/Users/teon/anaconda/lib/python2.7/site-packages/matplotlib/backends/backend_qt5.py\", line 427, in idle_draw\n    self.draw()\n  File \"/Users/teon/anaconda/lib/python2.7/site-packages/matplotlib/backends/backend_qt5agg.py\", line 148, in draw\n    FigureCanvasAgg.draw(self)\n  File \"/Users/teon/anaconda/lib/python2.7/site-packages/matplotlib/backends/backend_agg.py\", line 469, in draw\n    self.figure.draw(self.renderer)\n  File \"/Users/teon/anaconda/lib/python2.7/site-packages/matplotlib/artist.py\", line 59, in draw_wrapper\n    draw(artist, renderer, *args, **kwargs)\n  File \"/Users/teon/anaconda/lib/python2.7/site-packages/matplotlib/figure.py\", line 1017, in draw\n    self.tight_layout(renderer, **self._tight_parameters)\n  File \"/Users/teon/anaconda/lib/python2.7/site-packages/matplotlib/figure.py\", line 1663, in tight_layout\n    rect=rect)\n  File \"/Users/teon/anaconda/lib/python2.7/site-packages/matplotlib/tight_layout.py\", line 352, in get_tight_layout_figure\n    pad=pad, h_pad=h_pad, w_pad=w_pad)\n  File \"/Users/teon/anaconda/lib/python2.7/site-packages/matplotlib/tight_layout.py\", line 131, in auto_adjust_subplotpars\n    fig.transFigure.inverted())\n  File \"/Users/teon/anaconda/lib/python2.7/site-packages/matplotlib/transforms.py\", line 1057, in __init__\n    assert bbox.is_bbox\nAttributeError: 'NoneType' object has no attribute 'is_bbox'\n\nIf you suspect this is an IPython bug, please report it at:\n    https://github.com/ipython/ipython/issues\nor send an email to the mailing list at ipython-dev@scipy.org\n\nYou can print a more detailed traceback right now with \"%tb\", or use \"%debug\"\nto interactively debug it.\n\nExtra-detailed tracebacks for bug-reporting purposes can be enabled via:\n    %config Application.verbose_crash=True\n```\n", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/3118/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/3118/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/3084", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/3084/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/3084/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/3084/events", "html_url": "https://github.com/mne-tools/mne-python/issues/3084", "id": 144444262, "node_id": "MDU6SXNzdWUxNDQ0NDQyNjI=", "number": 3084, "title": "Kind mismatch with Evoked", "user": {"login": "teonbrooks", "id": 1578674, "node_id": "MDQ6VXNlcjE1Nzg2NzQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1578674?v=4", "gravatar_id": "", "url": "https://api.github.com/users/teonbrooks", "html_url": "https://github.com/teonbrooks", "followers_url": "https://api.github.com/users/teonbrooks/followers", "following_url": "https://api.github.com/users/teonbrooks/following{/other_user}", "gists_url": "https://api.github.com/users/teonbrooks/gists{/gist_id}", "starred_url": "https://api.github.com/users/teonbrooks/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/teonbrooks/subscriptions", "organizations_url": "https://api.github.com/users/teonbrooks/orgs", "repos_url": "https://api.github.com/users/teonbrooks/repos", "events_url": "https://api.github.com/users/teonbrooks/events{/privacy}", "received_events_url": "https://api.github.com/users/teonbrooks/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/mne-tools/mne-python/milestones/8", "html_url": "https://github.com/mne-tools/mne-python/milestone/8", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/milestones/8/labels", "id": 1429321, "node_id": "MDk6TWlsZXN0b25lMTQyOTMyMQ==", "number": 8, "title": "0.12", "description": "", "creator": {"login": "larsoner", "id": 2365790, "node_id": "MDQ6VXNlcjIzNjU3OTA=", "avatar_url": "https://avatars.githubusercontent.com/u/2365790?v=4", "gravatar_id": "", "url": "https://api.github.com/users/larsoner", "html_url": "https://github.com/larsoner", "followers_url": "https://api.github.com/users/larsoner/followers", "following_url": "https://api.github.com/users/larsoner/following{/other_user}", "gists_url": "https://api.github.com/users/larsoner/gists{/gist_id}", "starred_url": "https://api.github.com/users/larsoner/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/larsoner/subscriptions", "organizations_url": "https://api.github.com/users/larsoner/orgs", "repos_url": "https://api.github.com/users/larsoner/repos", "events_url": "https://api.github.com/users/larsoner/events{/privacy}", "received_events_url": "https://api.github.com/users/larsoner/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 168, "state": "closed", "created_at": "2015-11-25T13:36:18Z", "updated_at": "2016-05-27T10:59:37Z", "due_on": "2016-04-29T07:00:00Z", "closed_at": "2016-05-27T10:59:37Z"}, "comments": 1, "created_at": "2016-03-30T02:35:55Z", "updated_at": "2016-03-30T19:09:50Z", "closed_at": "2016-03-30T19:09:50Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "I think the wrong flag is being written for evokeds. It is saving evokeds with the`standard_error` for kind instead of `average`. Also there is a mismatch in the name, `evoked.kind` should be `average`, not `mean` according to `_aspect_rev`.\n\n``` python\nIn [36]: evs = [rerf['word/prime/primed'], rerf['word/prime/unprimed']]\n\nIn [37]: evs[0]\nOut[37]: <Evoked  |  comment : 'word/prime/primed', kind : mean, time : [-0.200000, 1.000000], n_epochs : 44, n_channels x n_times : 208 x 601>\n\nIn [38]: evs[0].kind\nOut[38]: 'mean'\n\nIn [39]: mne.write_evokeds('/Users/teon/Desktop/test-ave.fif', evs)\n\nIn [40]: evs = mne.read_evokeds('/Users/teon/Desktop/test-ave.fif')\nReading /Users/teon/Desktop/test-ave.fif ...\n    Read a total of 1 projection items:\n        axial--0.100-0.030-PCA-01 (1 x 208) active\n    Found the data of interest:\n        t =    -200.00 ...    1000.00 ms (word/prime/primed)\n        0 CTF compensation matrices available\n        nave = 44 - aspect type = 101\nProjections have already been applied. Setting proj attribute to True.\nNo baseline correction applied\n    Read a total of 1 projection items:\n        axial--0.100-0.030-PCA-01 (1 x 208) active\n    Found the data of interest:\n        t =    -200.00 ...    1000.00 ms (word/prime/unprimed)\n        0 CTF compensation matrices available\n        nave = 44 - aspect type = 101\nProjections have already been applied. Setting proj attribute to True.\nNo baseline correction applied\n\nIn [41]: evs[0]\nOut[41]: <Evoked  |  comment : 'word/prime/primed', kind : standard_error, time : [-0.200000, 1.000000], n_epochs : 44, n_channels x n_times : 208 x 601>\n\nIn [42]: evs[0].kind\nOut[42]: 'standard_error'\n```\n", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/3084/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/3084/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/3071", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/3071/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/3071/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/3071/events", "html_url": "https://github.com/mne-tools/mne-python/issues/3071", "id": 143453074, "node_id": "MDU6SXNzdWUxNDM0NTMwNzQ=", "number": 3071, "title": "Bug in ctf readers", "user": {"login": "jaeilepp", "id": 3456414, "node_id": "MDQ6VXNlcjM0NTY0MTQ=", "avatar_url": "https://avatars.githubusercontent.com/u/3456414?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jaeilepp", "html_url": "https://github.com/jaeilepp", "followers_url": "https://api.github.com/users/jaeilepp/followers", "following_url": "https://api.github.com/users/jaeilepp/following{/other_user}", "gists_url": "https://api.github.com/users/jaeilepp/gists{/gist_id}", "starred_url": "https://api.github.com/users/jaeilepp/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jaeilepp/subscriptions", "organizations_url": "https://api.github.com/users/jaeilepp/orgs", "repos_url": "https://api.github.com/users/jaeilepp/repos", "events_url": "https://api.github.com/users/jaeilepp/events{/privacy}", "received_events_url": "https://api.github.com/users/jaeilepp/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/mne-tools/mne-python/milestones/9", "html_url": "https://github.com/mne-tools/mne-python/milestone/9", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/milestones/9/labels", "id": 1648503, "node_id": "MDk6TWlsZXN0b25lMTY0ODUwMw==", "number": 9, "title": "0.13", "description": "", "creator": {"login": "larsoner", "id": 2365790, "node_id": "MDQ6VXNlcjIzNjU3OTA=", "avatar_url": "https://avatars.githubusercontent.com/u/2365790?v=4", "gravatar_id": "", "url": "https://api.github.com/users/larsoner", "html_url": "https://github.com/larsoner", "followers_url": "https://api.github.com/users/larsoner/followers", "following_url": "https://api.github.com/users/larsoner/following{/other_user}", "gists_url": "https://api.github.com/users/larsoner/gists{/gist_id}", "starred_url": "https://api.github.com/users/larsoner/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/larsoner/subscriptions", "organizations_url": "https://api.github.com/users/larsoner/orgs", "repos_url": "https://api.github.com/users/larsoner/repos", "events_url": "https://api.github.com/users/larsoner/events{/privacy}", "received_events_url": "https://api.github.com/users/larsoner/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 121, "state": "closed", "created_at": "2016-03-16T17:14:08Z", "updated_at": "2017-01-06T17:11:23Z", "due_on": "2016-09-23T07:00:00Z", "closed_at": "2017-01-06T17:11:23Z"}, "comments": 8, "created_at": "2016-03-25T08:25:10Z", "updated_at": "2016-07-20T10:09:01Z", "closed_at": "2016-07-20T10:09:01Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Ref mailing list.\n\nReading CTF data seems to have a bug in defining some of the coil types. I've isolated the issue to https://github.com/mne-tools/mne-python/blob/master/mne/io/ctf/info.py#L209.\nFor some reason some extra bits are added to the `coil_type` if `'grad_order_no'` is non-zero. This causes the coil types to become something outrageous (our spm faces dataset has coil_types of 201609). This seems to happen with both, the c conversion tool and python. What is this `grad_order_no`?\ncc @mshamalainen @Eric89GXL \n", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/3071/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/3071/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/3069", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/3069/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/3069/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/3069/events", "html_url": "https://github.com/mne-tools/mne-python/issues/3069", "id": 143421586, "node_id": "MDU6SXNzdWUxNDM0MjE1ODY=", "number": 3069, "title": "Website", "user": {"login": "teonbrooks", "id": 1578674, "node_id": "MDQ6VXNlcjE1Nzg2NzQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1578674?v=4", "gravatar_id": "", "url": "https://api.github.com/users/teonbrooks", "html_url": "https://github.com/teonbrooks", "followers_url": "https://api.github.com/users/teonbrooks/followers", "following_url": "https://api.github.com/users/teonbrooks/following{/other_user}", "gists_url": "https://api.github.com/users/teonbrooks/gists{/gist_id}", "starred_url": "https://api.github.com/users/teonbrooks/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/teonbrooks/subscriptions", "organizations_url": "https://api.github.com/users/teonbrooks/orgs", "repos_url": "https://api.github.com/users/teonbrooks/repos", "events_url": "https://api.github.com/users/teonbrooks/events{/privacy}", "received_events_url": "https://api.github.com/users/teonbrooks/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2016-03-25T04:34:09Z", "updated_at": "2016-03-25T16:08:13Z", "closed_at": "2016-03-25T16:08:09Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "- [x] the development links says this is v0.11 but we are in dev0.12\n- [x] when hovering over header links, it displays the paragraph symbol, this doesn't seem like the correct behavior.\n- [x] the example figures look funky here:\n  http://martinos.org/mne/dev/auto_examples/visualization/plot_meg_eeg_fields_3d.html#sphx-glr-auto-examples-visualization-plot-meg-eeg-fields-3d-py\n", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/3069/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/3069/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/3063", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/3063/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/3063/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/3063/events", "html_url": "https://github.com/mne-tools/mne-python/issues/3063", "id": 143076418, "node_id": "MDU6SXNzdWUxNDMwNzY0MTg=", "number": 3063, "title": "topo interactivity broken on evoked.plot()", "user": {"login": "jasmainak", "id": 15852194, "node_id": "MDQ6VXNlcjE1ODUyMTk0", "avatar_url": "https://avatars.githubusercontent.com/u/15852194?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jasmainak", "html_url": "https://github.com/jasmainak", "followers_url": "https://api.github.com/users/jasmainak/followers", "following_url": "https://api.github.com/users/jasmainak/following{/other_user}", "gists_url": "https://api.github.com/users/jasmainak/gists{/gist_id}", "starred_url": "https://api.github.com/users/jasmainak/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jasmainak/subscriptions", "organizations_url": "https://api.github.com/users/jasmainak/orgs", "repos_url": "https://api.github.com/users/jasmainak/repos", "events_url": "https://api.github.com/users/jasmainak/events{/privacy}", "received_events_url": "https://api.github.com/users/jasmainak/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 8, "created_at": "2016-03-23T20:49:41Z", "updated_at": "2016-06-29T14:28:48Z", "closed_at": "2016-06-29T14:28:48Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "If I do this:\n![plot_evoked](https://cloud.githubusercontent.com/assets/15852194/14000275/e04dd1c8-f140-11e5-9dcc-ab22704724d5.png)\n\ni.e.,\n\n``` py\nepochs.average().pick_channels(['MEG 1143']).plot()\n```\n\nI get this:\n\n``` py\nn [15]: Traceback (most recent call last):\n  File \"/tsi/doctorants/mainak/anaconda/lib/python2.7/site-packages/matplotlib/backends/backend_qt5.py\", line 291, in mouseReleaseEvent\n    FigureCanvasBase.button_release_event(self, x, y, button)\n  File \"/tsi/doctorants/mainak/anaconda/lib/python2.7/site-packages/matplotlib/backend_bases.py\", line 1891, in button_release_event\n    self.callbacks.process(s, event)\n  File \"/tsi/doctorants/mainak/anaconda/lib/python2.7/site-packages/matplotlib/cbook.py\", line 533, in process\n    proxy(*args, **kwargs)\n  File \"/tsi/doctorants/mainak/anaconda/lib/python2.7/site-packages/matplotlib/cbook.py\", line 408, in __call__\n    return mtd(*args, **kwargs)\n  File \"/tsi/doctorants/mainak/anaconda/lib/python2.7/site-packages/matplotlib/widgets.py\", line 1250, in release\n    self.onselect(vmin, vmax)\n  File \"/tsi/doctorants/mainak/mne-python/mne/viz/evoked.py\", line 90, in _butterfly_onselect\n    layout=None)\n  File \"/tsi/doctorants/mainak/mne-python/mne/viz/topomap.py\", line 49, in _prepare_topo_plot\n    picks, pos = _pair_grad_sensors(info, layout)\n  File \"/tsi/doctorants/mainak/mne-python/mne/channels/layout.py\", line 689, in _pair_grad_sensors\n    raise ValueError(\"No 'grad' channel pairs found.\")\nValueError: No 'grad' channel pairs found.\n```\n\nalso I find the key mappings a bit weird because it interferes with magnifying the plot ...\n", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/3063/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/3063/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/3025", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/3025/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/3025/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/3025/events", "html_url": "https://github.com/mne-tools/mne-python/issues/3025", "id": 141488570, "node_id": "MDU6SXNzdWUxNDE0ODg1NzA=", "number": 3025, "title": "BUG broken ref on the stable website", "user": {"login": "teonbrooks", "id": 1578674, "node_id": "MDQ6VXNlcjE1Nzg2NzQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1578674?v=4", "gravatar_id": "", "url": "https://api.github.com/users/teonbrooks", "html_url": "https://github.com/teonbrooks", "followers_url": "https://api.github.com/users/teonbrooks/followers", "following_url": "https://api.github.com/users/teonbrooks/following{/other_user}", "gists_url": "https://api.github.com/users/teonbrooks/gists{/gist_id}", "starred_url": "https://api.github.com/users/teonbrooks/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/teonbrooks/subscriptions", "organizations_url": "https://api.github.com/users/teonbrooks/orgs", "repos_url": "https://api.github.com/users/teonbrooks/repos", "events_url": "https://api.github.com/users/teonbrooks/events{/privacy}", "received_events_url": "https://api.github.com/users/teonbrooks/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2016-03-17T05:46:12Z", "updated_at": "2016-03-18T13:54:59Z", "closed_at": "2016-03-18T13:54:59Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "On the stable website:\n\nMNE includes a comprehensive Python package supplemented by tools compiled from C code for the LINUX and Mac OSX operating systems, as well as a MATLAB toolbox.\n\nFrom raw data to source estimates in about 30 lines of code (:ref:`try it yourself! <getting_started>`_):\n\nThe ref link is broken\n", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/3025/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/3025/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/3022", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/3022/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/3022/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/3022/events", "html_url": "https://github.com/mne-tools/mne-python/issues/3022", "id": 141364963, "node_id": "MDU6SXNzdWUxNDEzNjQ5NjM=", "number": 3022, "title": "Missing .json file in mne package", "user": {"login": "teonbrooks", "id": 1578674, "node_id": "MDQ6VXNlcjE1Nzg2NzQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1578674?v=4", "gravatar_id": "", "url": "https://api.github.com/users/teonbrooks", "html_url": "https://github.com/teonbrooks", "followers_url": "https://api.github.com/users/teonbrooks/followers", "following_url": "https://api.github.com/users/teonbrooks/following{/other_user}", "gists_url": "https://api.github.com/users/teonbrooks/gists{/gist_id}", "starred_url": "https://api.github.com/users/teonbrooks/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/teonbrooks/subscriptions", "organizations_url": "https://api.github.com/users/teonbrooks/orgs", "repos_url": "https://api.github.com/users/teonbrooks/repos", "events_url": "https://api.github.com/users/teonbrooks/events{/privacy}", "received_events_url": "https://api.github.com/users/teonbrooks/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2016-03-16T18:41:49Z", "updated_at": "2016-03-17T16:05:39Z", "closed_at": "2016-03-17T12:57:44Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "The kit2fiff gui now relies on `.json` but this file is not currently included in the `MANIFEST.in`. I am not sure when this change occurred but its inclusion needs to backported to at least v0.11.\n\ncc: @Eric89GXL @christianbrodbeck \n", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/3022/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/3022/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/2979", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/2979/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/2979/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/2979/events", "html_url": "https://github.com/mne-tools/mne-python/issues/2979", "id": 138059197, "node_id": "MDU6SXNzdWUxMzgwNTkxOTc=", "number": 2979, "title": "BUG in raw.save", "user": {"login": "teonbrooks", "id": 1578674, "node_id": "MDQ6VXNlcjE1Nzg2NzQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1578674?v=4", "gravatar_id": "", "url": "https://api.github.com/users/teonbrooks", "html_url": "https://github.com/teonbrooks", "followers_url": "https://api.github.com/users/teonbrooks/followers", "following_url": "https://api.github.com/users/teonbrooks/following{/other_user}", "gists_url": "https://api.github.com/users/teonbrooks/gists{/gist_id}", "starred_url": "https://api.github.com/users/teonbrooks/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/teonbrooks/subscriptions", "organizations_url": "https://api.github.com/users/teonbrooks/orgs", "repos_url": "https://api.github.com/users/teonbrooks/repos", "events_url": "https://api.github.com/users/teonbrooks/events{/privacy}", "received_events_url": "https://api.github.com/users/teonbrooks/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2016-03-03T02:52:04Z", "updated_at": "2016-03-03T08:03:57Z", "closed_at": "2016-03-03T08:03:57Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "If you are saving a file that gets split into two, and if you have a period in the name of your file before the extension, then there will be an incorrect filename parsing.\ne.g. `A0106_OLDT_calm_iir_hp0.51_lp40_filt-raw.fif` and its extension `A0106_OLDT_calm_iir_hp0-1.51_lp40_filt-raw.fif`. I will see if I can find the corresponding line of code to be addressed\n", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/2979/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/2979/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/2841", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/2841/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/2841/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/2841/events", "html_url": "https://github.com/mne-tools/mne-python/issues/2841", "id": 131194255, "node_id": "MDU6SXNzdWUxMzExOTQyNTU=", "number": 2841, "title": "BUG: read_selection does not deal with old/new neuromag ch_name formatting", "user": {"login": "dengemann", "id": 1908618, "node_id": "MDQ6VXNlcjE5MDg2MTg=", "avatar_url": "https://avatars.githubusercontent.com/u/1908618?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dengemann", "html_url": "https://github.com/dengemann", "followers_url": "https://api.github.com/users/dengemann/followers", "following_url": "https://api.github.com/users/dengemann/following{/other_user}", "gists_url": "https://api.github.com/users/dengemann/gists{/gist_id}", "starred_url": "https://api.github.com/users/dengemann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dengemann/subscriptions", "organizations_url": "https://api.github.com/users/dengemann/orgs", "repos_url": "https://api.github.com/users/dengemann/repos", "events_url": "https://api.github.com/users/dengemann/events{/privacy}", "received_events_url": "https://api.github.com/users/dengemann/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/mne-tools/mne-python/milestones/8", "html_url": "https://github.com/mne-tools/mne-python/milestone/8", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/milestones/8/labels", "id": 1429321, "node_id": "MDk6TWlsZXN0b25lMTQyOTMyMQ==", "number": 8, "title": "0.12", "description": "", "creator": {"login": "larsoner", "id": 2365790, "node_id": "MDQ6VXNlcjIzNjU3OTA=", "avatar_url": "https://avatars.githubusercontent.com/u/2365790?v=4", "gravatar_id": "", "url": "https://api.github.com/users/larsoner", "html_url": "https://github.com/larsoner", "followers_url": "https://api.github.com/users/larsoner/followers", "following_url": "https://api.github.com/users/larsoner/following{/other_user}", "gists_url": "https://api.github.com/users/larsoner/gists{/gist_id}", "starred_url": "https://api.github.com/users/larsoner/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/larsoner/subscriptions", "organizations_url": "https://api.github.com/users/larsoner/orgs", "repos_url": "https://api.github.com/users/larsoner/repos", "events_url": "https://api.github.com/users/larsoner/events{/privacy}", "received_events_url": "https://api.github.com/users/larsoner/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 168, "state": "closed", "created_at": "2015-11-25T13:36:18Z", "updated_at": "2016-05-27T10:59:37Z", "due_on": "2016-04-29T07:00:00Z", "closed_at": "2016-05-27T10:59:37Z"}, "comments": 2, "created_at": "2016-02-03T23:57:32Z", "updated_at": "2016-04-21T14:12:35Z", "closed_at": "2016-04-21T14:12:35Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "channels won't be recognized if the whitespaces are mismatching between channels and layout.\n", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/2841/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/2841/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/2834", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/2834/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/2834/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/2834/events", "html_url": "https://github.com/mne-tools/mne-python/issues/2834", "id": 130854590, "node_id": "MDU6SXNzdWUxMzA4NTQ1OTA=", "number": 2834, "title": "CSP Test Fail", "user": {"login": "clamus", "id": 5489720, "node_id": "MDQ6VXNlcjU0ODk3MjA=", "avatar_url": "https://avatars.githubusercontent.com/u/5489720?v=4", "gravatar_id": "", "url": "https://api.github.com/users/clamus", "html_url": "https://github.com/clamus", "followers_url": "https://api.github.com/users/clamus/followers", "following_url": "https://api.github.com/users/clamus/following{/other_user}", "gists_url": "https://api.github.com/users/clamus/gists{/gist_id}", "starred_url": "https://api.github.com/users/clamus/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/clamus/subscriptions", "organizations_url": "https://api.github.com/users/clamus/orgs", "repos_url": "https://api.github.com/users/clamus/repos", "events_url": "https://api.github.com/users/clamus/events{/privacy}", "received_events_url": "https://api.github.com/users/clamus/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/mne-tools/mne-python/milestones/8", "html_url": "https://github.com/mne-tools/mne-python/milestone/8", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/milestones/8/labels", "id": 1429321, "node_id": "MDk6TWlsZXN0b25lMTQyOTMyMQ==", "number": 8, "title": "0.12", "description": "", "creator": {"login": "larsoner", "id": 2365790, "node_id": "MDQ6VXNlcjIzNjU3OTA=", "avatar_url": "https://avatars.githubusercontent.com/u/2365790?v=4", "gravatar_id": "", "url": "https://api.github.com/users/larsoner", "html_url": "https://github.com/larsoner", "followers_url": "https://api.github.com/users/larsoner/followers", "following_url": "https://api.github.com/users/larsoner/following{/other_user}", "gists_url": "https://api.github.com/users/larsoner/gists{/gist_id}", "starred_url": "https://api.github.com/users/larsoner/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/larsoner/subscriptions", "organizations_url": "https://api.github.com/users/larsoner/orgs", "repos_url": "https://api.github.com/users/larsoner/repos", "events_url": "https://api.github.com/users/larsoner/events{/privacy}", "received_events_url": "https://api.github.com/users/larsoner/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 168, "state": "closed", "created_at": "2015-11-25T13:36:18Z", "updated_at": "2016-05-27T10:59:37Z", "due_on": "2016-04-29T07:00:00Z", "closed_at": "2016-05-27T10:59:37Z"}, "comments": 51, "created_at": "2016-02-02T23:38:16Z", "updated_at": "2016-02-03T19:51:04Z", "closed_at": "2016-02-03T19:51:04Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Hi Guys, The CSP test is failing on my machine. I am using the dev version of mne-python, and have not modified anything for this test. I am running OS X with anaconda with mkl. Any suggestions/ideas as to why this is happening? Below is the message I get.\n# Thanks!\n## FAIL: Test Common Spatial Patterns algorithm on epochs\n\nTraceback (most recent call last):\n  File \"/Users/lamexicana/anaconda/lib/python2.7/site-packages/nose/case.py\", line 197, in runTest\n    self.test(*self.arg)\n  File \"/Users/lamexicana/repos/mne-python/mne/decoding/tests/test_csp.py\", line 76, in test_csp\n    assert_array_almost_equal(csp.filters_, csp_epochs.filters_, -1)\n  File \"/Users/lamexicana/anaconda/lib/python2.7/site-packages/numpy/testing/utils.py\", line 842, in assert_array_almost_equal\n    precision=decimal)\n  File \"/Users/lamexicana/anaconda/lib/python2.7/site-packages/numpy/testing/utils.py\", line 665, in assert_array_compare\n    raise AssertionError(msg)\nAssertionError: \nArrays are not almost equal to -1 decimals\n\n(mismatch 11.1111111111%)\n x: [repr failed]\n y: [repr failed]\n-------------------- >> begin captured stdout << ---------------------\nOpening raw data file /Users/lamexicana/repos/mne-python/mne/io/tests/data/test_raw.fif...\n    Read a total of 3 projection items:\n        PCA-v1 (1 x 102)  idle\n        PCA-v2 (1 x 102)  idle\n        PCA-v3 (1 x 102)  idle\nCurrent compensation grade : 0\n    Range : 25800 ... 40199 =     42.956 ...    66.930 secs\nReady.\nAdding average EEG reference projection.\n1 projection items deactivated\n15 matching events found\nCreated an SSP operator (subspace dimension = 3)\n4 projection items activated\nReading 2425 ... 2845  =      4.038 ...     4.737 secs...\n[done]\nApplying baseline correction ... (mode: mean)\nReading 2851 ... 3271  =      4.747 ...     5.446 secs...\n[done]\nApplying baseline correction ... (mode: mean)\nReading 4105 ... 4525  =      6.835 ...     7.534 secs...\n[done]\nApplying baseline correction ... (mode: mean)\nReading 4530 ... 4950  =      7.542 ...     8.242 secs...\n[done]\nApplying baseline correction ... (mode: mean)\nReading 5745 ... 6165  =      9.565 ...    10.264 secs...\n[done]\nApplying baseline correction ... (mode: mean)\nReading 6181 ... 6601  =     10.291 ...    10.990 secs...\n[done]\nApplying baseline correction ... (mode: mean)\nReading 7405 ... 7825  =     12.329 ...    13.028 secs...\n[done]\nApplying baseline correction ... (mode: mean)\nReading 7792 ... 8212  =     12.973 ...    13.673 secs...\n[done]\nApplying baseline correction ... (mode: mean)\nReading 9036 ... 9456  =     15.045 ...    15.744 secs...\n[done]\nApplying baseline correction ... (mode: mean)\nReading 9508 ... 9928  =     15.830 ...    16.530 secs...\n[done]\nApplying baseline correction ... (mode: mean)\nReading 10656 ... 11076  =     17.742 ...    18.441 secs...\n[done]\nApplying baseline correction ... (mode: mean)\nReading 11087 ... 11507  =     18.459 ...    19.159 secs...\n[done]\nApplying baseline correction ... (mode: mean)\nReading 12406 ... 12826  =     20.655 ...    21.355 secs...\n[done]\nApplying baseline correction ... (mode: mean)\nReading 12791 ... 13211  =     21.297 ...    21.996 secs...\n[done]\nApplying baseline correction ... (mode: mean)\nReading 14006 ... 14399  =     23.319 ...    23.974 secs...\n[done]\nApplying baseline correction ... (mode: mean)\n1 bad epochs dropped\n\n--------------------- >> end captured stdout << ----------------------\n\n> >  raise AssertionError('\\nArrays are not almost equal to -1 decimals\\n\\n(mismatch 11.1111111111%)\\n x: [repr failed]\\n y: [repr failed]')\n\n---\n\nRan 50 tests in 49.692s\n\nFAILED (SKIP=4, failures=1)\n", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/2834/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/2834/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/2801", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/2801/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/2801/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/2801/events", "html_url": "https://github.com/mne-tools/mne-python/issues/2801", "id": 127675606, "node_id": "MDU6SXNzdWUxMjc2NzU2MDY=", "number": 2801, "title": "mne.epochs.equalize_epoch_counts do not return self", "user": {"login": "teonbrooks", "id": 1578674, "node_id": "MDQ6VXNlcjE1Nzg2NzQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1578674?v=4", "gravatar_id": "", "url": "https://api.github.com/users/teonbrooks", "html_url": "https://github.com/teonbrooks", "followers_url": "https://api.github.com/users/teonbrooks/followers", "following_url": "https://api.github.com/users/teonbrooks/following{/other_user}", "gists_url": "https://api.github.com/users/teonbrooks/gists{/gist_id}", "starred_url": "https://api.github.com/users/teonbrooks/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/teonbrooks/subscriptions", "organizations_url": "https://api.github.com/users/teonbrooks/orgs", "repos_url": "https://api.github.com/users/teonbrooks/repos", "events_url": "https://api.github.com/users/teonbrooks/events{/privacy}", "received_events_url": "https://api.github.com/users/teonbrooks/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}, {"id": 77061445, "node_id": "MDU6TGFiZWw3NzA2MTQ0NQ==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/EASY", "name": "EASY", "color": "2be2d6", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/mne-tools/mne-python/milestones/8", "html_url": "https://github.com/mne-tools/mne-python/milestone/8", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/milestones/8/labels", "id": 1429321, "node_id": "MDk6TWlsZXN0b25lMTQyOTMyMQ==", "number": 8, "title": "0.12", "description": "", "creator": {"login": "larsoner", "id": 2365790, "node_id": "MDQ6VXNlcjIzNjU3OTA=", "avatar_url": "https://avatars.githubusercontent.com/u/2365790?v=4", "gravatar_id": "", "url": "https://api.github.com/users/larsoner", "html_url": "https://github.com/larsoner", "followers_url": "https://api.github.com/users/larsoner/followers", "following_url": "https://api.github.com/users/larsoner/following{/other_user}", "gists_url": "https://api.github.com/users/larsoner/gists{/gist_id}", "starred_url": "https://api.github.com/users/larsoner/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/larsoner/subscriptions", "organizations_url": "https://api.github.com/users/larsoner/orgs", "repos_url": "https://api.github.com/users/larsoner/repos", "events_url": "https://api.github.com/users/larsoner/events{/privacy}", "received_events_url": "https://api.github.com/users/larsoner/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 168, "state": "closed", "created_at": "2015-11-25T13:36:18Z", "updated_at": "2016-05-27T10:59:37Z", "due_on": "2016-04-29T07:00:00Z", "closed_at": "2016-05-27T10:59:37Z"}, "comments": 7, "created_at": "2016-01-20T12:49:54Z", "updated_at": "2016-02-21T05:14:12Z", "closed_at": "2016-02-21T05:13:42Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "This works in-place, which is fine but it should also return `self`.\n", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/2801/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/2801/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/2773", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/2773/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/2773/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/2773/events", "html_url": "https://github.com/mne-tools/mne-python/issues/2773", "id": 125412526, "node_id": "MDU6SXNzdWUxMjU0MTI1MjY=", "number": 2773, "title": "BUG: Info object not correctly read from HDF5", "user": {"login": "wmvanvliet", "id": 428273, "node_id": "MDQ6VXNlcjQyODI3Mw==", "avatar_url": "https://avatars.githubusercontent.com/u/428273?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wmvanvliet", "html_url": "https://github.com/wmvanvliet", "followers_url": "https://api.github.com/users/wmvanvliet/followers", "following_url": "https://api.github.com/users/wmvanvliet/following{/other_user}", "gists_url": "https://api.github.com/users/wmvanvliet/gists{/gist_id}", "starred_url": "https://api.github.com/users/wmvanvliet/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wmvanvliet/subscriptions", "organizations_url": "https://api.github.com/users/wmvanvliet/orgs", "repos_url": "https://api.github.com/users/wmvanvliet/repos", "events_url": "https://api.github.com/users/wmvanvliet/events{/privacy}", "received_events_url": "https://api.github.com/users/wmvanvliet/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2016-01-07T15:15:09Z", "updated_at": "2016-01-08T07:08:37Z", "closed_at": "2016-01-08T07:08:37Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "When reading from HDF5, the `Info` object is not properly reconstructed:\n\n```\nimport mne\nimport tempfile\ntmp = tempfile.NamedTemporaryFile(delete=False)\ninfo_a = mne.create_info(ch_names=['a', 'b', 'c'], sfreq=1000., ch_types=None)\nmne.externals.h5io.write_hdf5(tmp.name, info_a, overwrite=True)\ninfo_b = mne.externals.h5io.read_hdf5(tmp.name)\ninfo_b._check_consistency()  # Error\nassert type(info_a) == type(info_b)  # Fail\n```\n\nThe `Info` object gets reconstructed as a regular `dict`, which means any code relying on the `_check_consistency` function to work will fail.\n", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/2773/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/2773/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/2770", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/2770/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/2770/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/2770/events", "html_url": "https://github.com/mne-tools/mne-python/issues/2770", "id": 124991782, "node_id": "MDU6SXNzdWUxMjQ5OTE3ODI=", "number": 2770, "title": "problem in check for set_channel_type", "user": {"login": "jasmainak", "id": 15852194, "node_id": "MDQ6VXNlcjE1ODUyMTk0", "avatar_url": "https://avatars.githubusercontent.com/u/15852194?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jasmainak", "html_url": "https://github.com/jasmainak", "followers_url": "https://api.github.com/users/jasmainak/followers", "following_url": "https://api.github.com/users/jasmainak/following{/other_user}", "gists_url": "https://api.github.com/users/jasmainak/gists{/gist_id}", "starred_url": "https://api.github.com/users/jasmainak/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jasmainak/subscriptions", "organizations_url": "https://api.github.com/users/jasmainak/orgs", "repos_url": "https://api.github.com/users/jasmainak/repos", "events_url": "https://api.github.com/users/jasmainak/events{/privacy}", "received_events_url": "https://api.github.com/users/jasmainak/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}, {"id": 77061445, "node_id": "MDU6TGFiZWw3NzA2MTQ0NQ==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/EASY", "name": "EASY", "color": "2be2d6", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/mne-tools/mne-python/milestones/8", "html_url": "https://github.com/mne-tools/mne-python/milestone/8", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/milestones/8/labels", "id": 1429321, "node_id": "MDk6TWlsZXN0b25lMTQyOTMyMQ==", "number": 8, "title": "0.12", "description": "", "creator": {"login": "larsoner", "id": 2365790, "node_id": "MDQ6VXNlcjIzNjU3OTA=", "avatar_url": "https://avatars.githubusercontent.com/u/2365790?v=4", "gravatar_id": "", "url": "https://api.github.com/users/larsoner", "html_url": "https://github.com/larsoner", "followers_url": "https://api.github.com/users/larsoner/followers", "following_url": "https://api.github.com/users/larsoner/following{/other_user}", "gists_url": "https://api.github.com/users/larsoner/gists{/gist_id}", "starred_url": "https://api.github.com/users/larsoner/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/larsoner/subscriptions", "organizations_url": "https://api.github.com/users/larsoner/orgs", "repos_url": "https://api.github.com/users/larsoner/repos", "events_url": "https://api.github.com/users/larsoner/events{/privacy}", "received_events_url": "https://api.github.com/users/larsoner/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 168, "state": "closed", "created_at": "2015-11-25T13:36:18Z", "updated_at": "2016-05-27T10:59:37Z", "due_on": "2016-04-29T07:00:00Z", "closed_at": "2016-05-27T10:59:37Z"}, "comments": 1, "created_at": "2016-01-05T15:44:38Z", "updated_at": "2016-02-04T08:51:42Z", "closed_at": "2016-02-04T08:51:42Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "I get a weird error when trying to set channel type. cc @Eric89GXL \n\nscript to reproduce:\n\n``` py\nimport mne\nimport os.path as op\n\nraw = mne.io.RawFIF(\n    op.join(mne.datasets.sample.data_path(), 'MEG', 'sample',\n            'sample_audvis_raw.fif'))\n\nevents = mne.find_events(raw, stim_channel='STI 014')\nevent_id = dict(left=1, right=2)\n\nepochs = mne.Epochs(raw, events, event_id, tmin=-0.1, tmax=1,\n                    baseline=(None, 0), preload=True)\nepochs.set_channel_types({'MEG 2443': 'stim'})\n```\n", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/2770/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/2770/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/2749", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/2749/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/2749/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/2749/events", "html_url": "https://github.com/mne-tools/mne-python/issues/2749", "id": 123918135, "node_id": "MDU6SXNzdWUxMjM5MTgxMzU=", "number": 2749, "title": "fields line plotting broken", "user": {"login": "agramfort", "id": 161052, "node_id": "MDQ6VXNlcjE2MTA1Mg==", "avatar_url": "https://avatars.githubusercontent.com/u/161052?v=4", "gravatar_id": "", "url": "https://api.github.com/users/agramfort", "html_url": "https://github.com/agramfort", "followers_url": "https://api.github.com/users/agramfort/followers", "following_url": "https://api.github.com/users/agramfort/following{/other_user}", "gists_url": "https://api.github.com/users/agramfort/gists{/gist_id}", "starred_url": "https://api.github.com/users/agramfort/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/agramfort/subscriptions", "organizations_url": "https://api.github.com/users/agramfort/orgs", "repos_url": "https://api.github.com/users/agramfort/repos", "events_url": "https://api.github.com/users/agramfort/events{/privacy}", "received_events_url": "https://api.github.com/users/agramfort/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "larsoner", "id": 2365790, "node_id": "MDQ6VXNlcjIzNjU3OTA=", "avatar_url": "https://avatars.githubusercontent.com/u/2365790?v=4", "gravatar_id": "", "url": "https://api.github.com/users/larsoner", "html_url": "https://github.com/larsoner", "followers_url": "https://api.github.com/users/larsoner/followers", "following_url": "https://api.github.com/users/larsoner/following{/other_user}", "gists_url": "https://api.github.com/users/larsoner/gists{/gist_id}", "starred_url": "https://api.github.com/users/larsoner/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/larsoner/subscriptions", "organizations_url": "https://api.github.com/users/larsoner/orgs", "repos_url": "https://api.github.com/users/larsoner/repos", "events_url": "https://api.github.com/users/larsoner/events{/privacy}", "received_events_url": "https://api.github.com/users/larsoner/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "larsoner", "id": 2365790, "node_id": "MDQ6VXNlcjIzNjU3OTA=", "avatar_url": "https://avatars.githubusercontent.com/u/2365790?v=4", "gravatar_id": "", "url": "https://api.github.com/users/larsoner", "html_url": "https://github.com/larsoner", "followers_url": "https://api.github.com/users/larsoner/followers", "following_url": "https://api.github.com/users/larsoner/following{/other_user}", "gists_url": "https://api.github.com/users/larsoner/gists{/gist_id}", "starred_url": "https://api.github.com/users/larsoner/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/larsoner/subscriptions", "organizations_url": "https://api.github.com/users/larsoner/orgs", "repos_url": "https://api.github.com/users/larsoner/repos", "events_url": "https://api.github.com/users/larsoner/events{/privacy}", "received_events_url": "https://api.github.com/users/larsoner/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/mne-tools/mne-python/milestones/8", "html_url": "https://github.com/mne-tools/mne-python/milestone/8", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/milestones/8/labels", "id": 1429321, "node_id": "MDk6TWlsZXN0b25lMTQyOTMyMQ==", "number": 8, "title": "0.12", "description": "", "creator": {"login": "larsoner", "id": 2365790, "node_id": "MDQ6VXNlcjIzNjU3OTA=", "avatar_url": "https://avatars.githubusercontent.com/u/2365790?v=4", "gravatar_id": "", "url": "https://api.github.com/users/larsoner", "html_url": "https://github.com/larsoner", "followers_url": "https://api.github.com/users/larsoner/followers", "following_url": "https://api.github.com/users/larsoner/following{/other_user}", "gists_url": "https://api.github.com/users/larsoner/gists{/gist_id}", "starred_url": "https://api.github.com/users/larsoner/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/larsoner/subscriptions", "organizations_url": "https://api.github.com/users/larsoner/orgs", "repos_url": "https://api.github.com/users/larsoner/repos", "events_url": "https://api.github.com/users/larsoner/events{/privacy}", "received_events_url": "https://api.github.com/users/larsoner/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 168, "state": "closed", "created_at": "2015-11-25T13:36:18Z", "updated_at": "2016-05-27T10:59:37Z", "due_on": "2016-04-29T07:00:00Z", "closed_at": "2016-05-27T10:59:37Z"}, "comments": 0, "created_at": "2015-12-26T09:08:57Z", "updated_at": "2015-12-27T10:20:57Z", "closed_at": "2015-12-27T10:20:57Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "see\n\nhttp://martinos.org/mne/stable/auto_examples/visualization/plot_meg_eeg_fields_3d.html#sphx-glr-auto-examples-visualization-plot-meg-eeg-fields-3d-py\n\nconfirmed on my machine.\n\n@Eric89GXL help needed :)\n", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/2749/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/2749/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/2742", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/2742/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/2742/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/2742/events", "html_url": "https://github.com/mne-tools/mne-python/issues/2742", "id": 123684096, "node_id": "MDU6SXNzdWUxMjM2ODQwOTY=", "number": 2742, "title": "GFP in evoked.plot does not play along with ylim kwarg", "user": {"login": "jona-sassenhagen", "id": 4321826, "node_id": "MDQ6VXNlcjQzMjE4MjY=", "avatar_url": "https://avatars.githubusercontent.com/u/4321826?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jona-sassenhagen", "html_url": "https://github.com/jona-sassenhagen", "followers_url": "https://api.github.com/users/jona-sassenhagen/followers", "following_url": "https://api.github.com/users/jona-sassenhagen/following{/other_user}", "gists_url": "https://api.github.com/users/jona-sassenhagen/gists{/gist_id}", "starred_url": "https://api.github.com/users/jona-sassenhagen/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jona-sassenhagen/subscriptions", "organizations_url": "https://api.github.com/users/jona-sassenhagen/orgs", "repos_url": "https://api.github.com/users/jona-sassenhagen/repos", "events_url": "https://api.github.com/users/jona-sassenhagen/events{/privacy}", "received_events_url": "https://api.github.com/users/jona-sassenhagen/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}, {"id": 77061445, "node_id": "MDU6TGFiZWw3NzA2MTQ0NQ==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/EASY", "name": "EASY", "color": "2be2d6", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2015-12-23T16:09:30Z", "updated_at": "2015-12-23T18:44:26Z", "closed_at": "2015-12-23T18:44:26Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "The GFP yaxis is set based on the auto limits, but if a user defines y lims themselves with the ylim kwarg, the GFP can float or disappear.\n\n@jaeilepp \n\n![unknown-60](https://cloud.githubusercontent.com/assets/4321826/11979975/c888834e-a997-11e5-902f-191b94bd5124.png)\n![unknown-61](https://cloud.githubusercontent.com/assets/4321826/11979976/ca55d7da-a997-11e5-85ea-8b206b9159e5.png)\n", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/2742/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/2742/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/2724", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/2724/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/2724/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/2724/events", "html_url": "https://github.com/mne-tools/mne-python/issues/2724", "id": 123039617, "node_id": "MDU6SXNzdWUxMjMwMzk2MTc=", "number": 2724, "title": "Evoked.get_peak", "user": {"login": "jean-didier", "id": 16356484, "node_id": "MDQ6VXNlcjE2MzU2NDg0", "avatar_url": "https://avatars.githubusercontent.com/u/16356484?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jean-didier", "html_url": "https://github.com/jean-didier", "followers_url": "https://api.github.com/users/jean-didier/followers", "following_url": "https://api.github.com/users/jean-didier/following{/other_user}", "gists_url": "https://api.github.com/users/jean-didier/gists{/gist_id}", "starred_url": "https://api.github.com/users/jean-didier/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jean-didier/subscriptions", "organizations_url": "https://api.github.com/users/jean-didier/orgs", "repos_url": "https://api.github.com/users/jean-didier/repos", "events_url": "https://api.github.com/users/jean-didier/events{/privacy}", "received_events_url": "https://api.github.com/users/jean-didier/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2015-12-18T22:53:02Z", "updated_at": "2015-12-19T13:51:12Z", "closed_at": "2015-12-19T13:51:12Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi\nI think there is a bug in Evoked.get_peak() function, when using ch_type :\nIn    : ev.get_peak('mag',tmin=tmin,tmax=tmax)\nOut : ('MEG0122',0.178999)\nch_idx is related to data[picks] instead of self.data and the function should return \nself.ch_names[picks[ch_idx]] instead of self.ch_names[ch_idx]\n", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/2724/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/2724/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/2700", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/2700/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/2700/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/2700/events", "html_url": "https://github.com/mne-tools/mne-python/issues/2700", "id": 122063798, "node_id": "MDU6SXNzdWUxMjIwNjM3OTg=", "number": 2700, "title": "Incorrect EEG lead field matrices due to missing reference electrode location", "user": {"login": "emilyps14", "id": 4949989, "node_id": "MDQ6VXNlcjQ5NDk5ODk=", "avatar_url": "https://avatars.githubusercontent.com/u/4949989?v=4", "gravatar_id": "", "url": "https://api.github.com/users/emilyps14", "html_url": "https://github.com/emilyps14", "followers_url": "https://api.github.com/users/emilyps14/followers", "following_url": "https://api.github.com/users/emilyps14/following{/other_user}", "gists_url": "https://api.github.com/users/emilyps14/gists{/gist_id}", "starred_url": "https://api.github.com/users/emilyps14/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/emilyps14/subscriptions", "organizations_url": "https://api.github.com/users/emilyps14/orgs", "repos_url": "https://api.github.com/users/emilyps14/repos", "events_url": "https://api.github.com/users/emilyps14/events{/privacy}", "received_events_url": "https://api.github.com/users/emilyps14/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/mne-tools/mne-python/milestones/8", "html_url": "https://github.com/mne-tools/mne-python/milestone/8", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/milestones/8/labels", "id": 1429321, "node_id": "MDk6TWlsZXN0b25lMTQyOTMyMQ==", "number": 8, "title": "0.12", "description": "", "creator": {"login": "larsoner", "id": 2365790, "node_id": "MDQ6VXNlcjIzNjU3OTA=", "avatar_url": "https://avatars.githubusercontent.com/u/2365790?v=4", "gravatar_id": "", "url": "https://api.github.com/users/larsoner", "html_url": "https://github.com/larsoner", "followers_url": "https://api.github.com/users/larsoner/followers", "following_url": "https://api.github.com/users/larsoner/following{/other_user}", "gists_url": "https://api.github.com/users/larsoner/gists{/gist_id}", "starred_url": "https://api.github.com/users/larsoner/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/larsoner/subscriptions", "organizations_url": "https://api.github.com/users/larsoner/orgs", "repos_url": "https://api.github.com/users/larsoner/repos", "events_url": "https://api.github.com/users/larsoner/events{/privacy}", "received_events_url": "https://api.github.com/users/larsoner/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 168, "state": "closed", "created_at": "2015-11-25T13:36:18Z", "updated_at": "2016-05-27T10:59:37Z", "due_on": "2016-04-29T07:00:00Z", "closed_at": "2016-05-27T10:59:37Z"}, "comments": 26, "created_at": "2015-12-14T15:21:24Z", "updated_at": "2016-01-27T16:25:09Z", "closed_at": "2016-01-27T16:25:09Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "The location of the EEG reference electrode is not stored in the raw data, leading to incorrect lead field matrices.\n\nThe EEG reference location is used by the forward solution in the BEM calculation, accounting for the fact that the reference is effectively subtracted out from the signal during acquisition. \n\nThe forward solution code in both MNE C and MNE Python expects the reference electrode location to be stored in the second column of the position matrix (in python: info[chs][<#>][eeg_loc]). In the Python distribution, there is no way to populate this column.\n\nFor my data at least, the information is stored in the hpts montage file, so it would make sense to load the reference electrode location when the montage is loaded.\n\nFrom the mne_analysis mailing list:\nhttps://mail.nmr.mgh.harvard.edu/pipermail//mne_analysis/2015-December/003012.html\n\nCode to replicate the mismatch:\nhttps://drive.google.com/file/d/0B8PjVL8SDL7IdDVHWE40YTJSZnM/view?usp=drive_web\n", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/2700/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/2700/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/2694", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/2694/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/2694/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/2694/events", "html_url": "https://github.com/mne-tools/mne-python/issues/2694", "id": 121703484, "node_id": "MDU6SXNzdWUxMjE3MDM0ODQ=", "number": 2694, "title": "BUG: something wrong with spatial_colors legend", "user": {"login": "jona-sassenhagen", "id": 4321826, "node_id": "MDQ6VXNlcjQzMjE4MjY=", "avatar_url": "https://avatars.githubusercontent.com/u/4321826?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jona-sassenhagen", "html_url": "https://github.com/jona-sassenhagen", "followers_url": "https://api.github.com/users/jona-sassenhagen/followers", "following_url": "https://api.github.com/users/jona-sassenhagen/following{/other_user}", "gists_url": "https://api.github.com/users/jona-sassenhagen/gists{/gist_id}", "starred_url": "https://api.github.com/users/jona-sassenhagen/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jona-sassenhagen/subscriptions", "organizations_url": "https://api.github.com/users/jona-sassenhagen/orgs", "repos_url": "https://api.github.com/users/jona-sassenhagen/repos", "events_url": "https://api.github.com/users/jona-sassenhagen/events{/privacy}", "received_events_url": "https://api.github.com/users/jona-sassenhagen/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2015-12-11T12:56:48Z", "updated_at": "2015-12-11T16:57:57Z", "closed_at": "2015-12-11T16:57:57Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Something wrong with the legend in files that should be fairly regular - no bad channels, all EEG ... but the legend colors seem completely random. (The line colors are fine!)\n\nThe tests look fine and another experiment of mine looks fine, it's only for some layouts.\n\n![unknown-34](https://cloud.githubusercontent.com/assets/4321826/11744173/53a4a37e-a00e-11e5-8067-96259449c623.png)\n\nI'll see if I can find what it's about, but I'm also attaching an evoked file that has the issue: [bad_example-ave.fif.gz](https://github.com/mne-tools/mne-python/files/59396/bad_example-ave.fif.gz)\n@jaeilepp \n", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/2694/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/2694/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/2507", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/2507/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/2507/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/2507/events", "html_url": "https://github.com/mne-tools/mne-python/issues/2507", "id": 109639758, "node_id": "MDU6SXNzdWUxMDk2Mzk3NTg=", "number": 2507, "title": "load_data problem with BrainVision", "user": {"login": "teonbrooks", "id": 1578674, "node_id": "MDQ6VXNlcjE1Nzg2NzQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1578674?v=4", "gravatar_id": "", "url": "https://api.github.com/users/teonbrooks", "html_url": "https://github.com/teonbrooks", "followers_url": "https://api.github.com/users/teonbrooks/followers", "following_url": "https://api.github.com/users/teonbrooks/following{/other_user}", "gists_url": "https://api.github.com/users/teonbrooks/gists{/gist_id}", "starred_url": "https://api.github.com/users/teonbrooks/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/teonbrooks/subscriptions", "organizations_url": "https://api.github.com/users/teonbrooks/orgs", "repos_url": "https://api.github.com/users/teonbrooks/repos", "events_url": "https://api.github.com/users/teonbrooks/events{/privacy}", "received_events_url": "https://api.github.com/users/teonbrooks/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/mne-tools/mne-python/milestones/6", "html_url": "https://github.com/mne-tools/mne-python/milestone/6", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/milestones/6/labels", "id": 1074222, "node_id": "MDk6TWlsZXN0b25lMTA3NDIyMg==", "number": 6, "title": "0.10", "description": "", "creator": {"login": "larsoner", "id": 2365790, "node_id": "MDQ6VXNlcjIzNjU3OTA=", "avatar_url": "https://avatars.githubusercontent.com/u/2365790?v=4", "gravatar_id": "", "url": "https://api.github.com/users/larsoner", "html_url": "https://github.com/larsoner", "followers_url": "https://api.github.com/users/larsoner/followers", "following_url": "https://api.github.com/users/larsoner/following{/other_user}", "gists_url": "https://api.github.com/users/larsoner/gists{/gist_id}", "starred_url": "https://api.github.com/users/larsoner/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/larsoner/subscriptions", "organizations_url": "https://api.github.com/users/larsoner/orgs", "repos_url": "https://api.github.com/users/larsoner/repos", "events_url": "https://api.github.com/users/larsoner/events{/privacy}", "received_events_url": "https://api.github.com/users/larsoner/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 86, "state": "closed", "created_at": "2015-04-19T22:04:00Z", "updated_at": "2015-12-11T19:15:32Z", "due_on": "2015-09-30T07:00:00Z", "closed_at": "2015-12-11T19:15:32Z"}, "comments": 6, "created_at": "2015-10-03T19:02:12Z", "updated_at": "2015-10-15T18:14:06Z", "closed_at": "2015-10-15T18:14:06Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "Because the brainvision module wasn't modified for the new  `_read_segment`, and `_read_segment_file` methods, it errors with withe `raw.load_data` method.\n\nTo reproduce the error:\n\n``` python\nfrom mne.io.brainvision.tests import test_brainvision\nfrom mne.io import read_raw_brainvision\n\n\nraw = read_raw_brainvision(test_brainvision.vhdr_path, preload=False)\nraw.load_data()\n```\n", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/2507/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/2507/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/2489", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/2489/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/2489/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/2489/events", "html_url": "https://github.com/mne-tools/mne-python/issues/2489", "id": 108295251, "node_id": "MDU6SXNzdWUxMDgyOTUyNTE=", "number": 2489, "title": "bug in epochs.plot() with single channel", "user": {"login": "mainakjas", "id": 3817535, "node_id": "MDQ6VXNlcjM4MTc1MzU=", "avatar_url": "https://avatars.githubusercontent.com/u/3817535?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mainakjas", "html_url": "https://github.com/mainakjas", "followers_url": "https://api.github.com/users/mainakjas/followers", "following_url": "https://api.github.com/users/mainakjas/following{/other_user}", "gists_url": "https://api.github.com/users/mainakjas/gists{/gist_id}", "starred_url": "https://api.github.com/users/mainakjas/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mainakjas/subscriptions", "organizations_url": "https://api.github.com/users/mainakjas/orgs", "repos_url": "https://api.github.com/users/mainakjas/repos", "events_url": "https://api.github.com/users/mainakjas/events{/privacy}", "received_events_url": "https://api.github.com/users/mainakjas/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2015-09-25T09:49:21Z", "updated_at": "2015-10-03T06:59:58Z", "closed_at": "2015-10-03T06:59:58Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "@jaeilepp I discovered this bug:\n\n``` py\nimport mne\nfrom mne import io\nfrom mne.datasets import sample\ndata_path = sample.data_path()\n\nraw_fname = data_path + '/MEG/sample/sample_audvis_filt-0-40_raw.fif'\nevent_fname = data_path + '/MEG/sample/sample_audvis_filt-0-40_raw-eve.fif'\nevent_id, tmin, tmax = 1, -0.2, 0.5\n\n#   Setup for reading the raw data\nraw = io.Raw(raw_fname)\nevents = mne.read_events(event_fname)\n\n# pick EEG channels\npicks = mne.pick_types(raw.info, meg=True, eeg=True, stim=False, eog=True,\n                       exclude='bads')\n# Read epochs\nepochs = mne.Epochs(raw, events, event_id, tmin, tmax, picks=picks,\n                    baseline=(None, 0), reject=dict(eeg=80e-6, eog=150e-6),\n                    preload=True)\nepochs.pick_channels(['EEG 005'])\nepochs.plot()\n```\n\nI see a flat channel basically\n\n![single_ch_plotter](https://cloud.githubusercontent.com/assets/3817535/10097723/6e0eff4a-637b-11e5-945b-5a434c0b94b1.png)\n", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/2489/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/2489/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/2472", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/2472/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/2472/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/2472/events", "html_url": "https://github.com/mne-tools/mne-python/issues/2472", "id": 106652206, "node_id": "MDU6SXNzdWUxMDY2NTIyMDY=", "number": 2472, "title": "Bug in toggling the slider", "user": {"login": "teonbrooks", "id": 1578674, "node_id": "MDQ6VXNlcjE1Nzg2NzQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1578674?v=4", "gravatar_id": "", "url": "https://api.github.com/users/teonbrooks", "html_url": "https://github.com/teonbrooks", "followers_url": "https://api.github.com/users/teonbrooks/followers", "following_url": "https://api.github.com/users/teonbrooks/following{/other_user}", "gists_url": "https://api.github.com/users/teonbrooks/gists{/gist_id}", "starred_url": "https://api.github.com/users/teonbrooks/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/teonbrooks/subscriptions", "organizations_url": "https://api.github.com/users/teonbrooks/orgs", "repos_url": "https://api.github.com/users/teonbrooks/repos", "events_url": "https://api.github.com/users/teonbrooks/events{/privacy}", "received_events_url": "https://api.github.com/users/teonbrooks/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/mne-tools/mne-python/milestones/6", "html_url": "https://github.com/mne-tools/mne-python/milestone/6", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/milestones/6/labels", "id": 1074222, "node_id": "MDk6TWlsZXN0b25lMTA3NDIyMg==", "number": 6, "title": "0.10", "description": "", "creator": {"login": "larsoner", "id": 2365790, "node_id": "MDQ6VXNlcjIzNjU3OTA=", "avatar_url": "https://avatars.githubusercontent.com/u/2365790?v=4", "gravatar_id": "", "url": "https://api.github.com/users/larsoner", "html_url": "https://github.com/larsoner", "followers_url": "https://api.github.com/users/larsoner/followers", "following_url": "https://api.github.com/users/larsoner/following{/other_user}", "gists_url": "https://api.github.com/users/larsoner/gists{/gist_id}", "starred_url": "https://api.github.com/users/larsoner/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/larsoner/subscriptions", "organizations_url": "https://api.github.com/users/larsoner/orgs", "repos_url": "https://api.github.com/users/larsoner/repos", "events_url": "https://api.github.com/users/larsoner/events{/privacy}", "received_events_url": "https://api.github.com/users/larsoner/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 86, "state": "closed", "created_at": "2015-04-19T22:04:00Z", "updated_at": "2015-12-11T19:15:32Z", "due_on": "2015-09-30T07:00:00Z", "closed_at": "2015-12-11T19:15:32Z"}, "comments": 6, "created_at": "2015-09-15T21:29:52Z", "updated_at": "2015-09-15T22:57:15Z", "closed_at": "2015-09-15T22:35:35Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "I just noticed that the toggling does not work for bem sliders properly. There are two toggle buttons that appear instead of one and they are doing slightly different things: the `bem` label toggles the table of contents reference but the `MRI` one toggles the sliders. shouldn't this be just one button? \ncc: @mainakjas \n\ncode snippet below:\n\n``` python\nimport mne\nfrom mne import report\nrep = report.Report()\npath = op.join(mne.datasets.sample.data_path(), 'subjects')\nrep.add_bem_to_section('fsaverage', decim=100, subjects_dir=path)\nrep.save('~/Desktop/test.html', overwrite=True)\n```\n", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/2472/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/2472/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/2385", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/2385/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/2385/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/2385/events", "html_url": "https://github.com/mne-tools/mne-python/issues/2385", "id": 99294028, "node_id": "MDU6SXNzdWU5OTI5NDAyOA==", "number": 2385, "title": "bug with fix_stim_artifact for raw data", "user": {"login": "mainakjas", "id": 3817535, "node_id": "MDQ6VXNlcjM4MTc1MzU=", "avatar_url": "https://avatars.githubusercontent.com/u/3817535?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mainakjas", "html_url": "https://github.com/mainakjas", "followers_url": "https://api.github.com/users/mainakjas/followers", "following_url": "https://api.github.com/users/mainakjas/following{/other_user}", "gists_url": "https://api.github.com/users/mainakjas/gists{/gist_id}", "starred_url": "https://api.github.com/users/mainakjas/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mainakjas/subscriptions", "organizations_url": "https://api.github.com/users/mainakjas/orgs", "repos_url": "https://api.github.com/users/mainakjas/repos", "events_url": "https://api.github.com/users/mainakjas/events{/privacy}", "received_events_url": "https://api.github.com/users/mainakjas/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2015-08-05T20:39:59Z", "updated_at": "2015-08-10T16:40:38Z", "closed_at": "2015-08-10T16:40:38Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "To reproduce first fetch my branch from the mne-python dev folder:\n\n``` sh\n$ git fetch upstream pull/2358/head:brainstorm_downloader\n$ git checkout brainstorm_downloader\n```\n\nNext, run this script:\n\n``` py\nimport mne\nfrom mne.datasets.brainstorm import bst_raw\nfrom mne.io import Raw\n\ntmin, tmax, event_id = -0.2, 0.5, 1\nreject = dict(mag=4e-12)\n\ndata_path = bst_raw.data_path()\n\nraw_fname = data_path + '/MEG/bst_raw/' + \\\n                        'subj001_somatosensory_20111109_01_AUX-f_raw.fif'\n\n# first fix stim artifacts at evoked stage\nraw = Raw(raw_fname, preload=False)\nevents = mne.find_events(raw, stim_channel='UPPT001')\npicks = mne.pick_types(raw.info, meg=True, eeg=False, stim=False, eog=True,\n                       exclude='bads')\nepochs = mne.Epochs(raw, events, event_id, tmin, tmax, picks=picks,\n                    baseline=(None, 0), reject=reject, preload=False)\nevoked = epochs.average()\nmne.preprocessing.fix_stim_artifact(evoked)\nevoked.plot()\n\n# now fix stim artifacts at raw stage\nraw = Raw(raw_fname, preload=True)\nevents = mne.find_events(raw, stim_channel='UPPT001')\nmne.preprocessing.fix_stim_artifact(raw, events, stim_channel='UPPT001')\npicks = mne.pick_types(raw.info, meg=True, eeg=False, stim=False, eog=True,\n                       exclude='bads')\nepochs = mne.Epochs(raw, events, event_id, tmin, tmax, picks=picks,\n                    baseline=(None, 0), reject=reject, preload=False)\nevoked2 = epochs.average()\nevoked2.plot()\n```\n\nYou'll see that the stim artifact is still visible around 4 ms in the second plot.\n\nI won't be able to look into this in the next 5 to 7 days, so if anyone is bored and wants to take a shot at it -- feel free :)\n", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/2385/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/2385/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/2344", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/2344/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/2344/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/2344/events", "html_url": "https://github.com/mne-tools/mne-python/issues/2344", "id": 96929844, "node_id": "MDU6SXNzdWU5NjkyOTg0NA==", "number": 2344, "title": "Make ylim and scalings play nicely in Evoked.plot", "user": {"login": "teonbrooks", "id": 1578674, "node_id": "MDQ6VXNlcjE1Nzg2NzQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1578674?v=4", "gravatar_id": "", "url": "https://api.github.com/users/teonbrooks", "html_url": "https://github.com/teonbrooks", "followers_url": "https://api.github.com/users/teonbrooks/followers", "following_url": "https://api.github.com/users/teonbrooks/following{/other_user}", "gists_url": "https://api.github.com/users/teonbrooks/gists{/gist_id}", "starred_url": "https://api.github.com/users/teonbrooks/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/teonbrooks/subscriptions", "organizations_url": "https://api.github.com/users/teonbrooks/orgs", "repos_url": "https://api.github.com/users/teonbrooks/repos", "events_url": "https://api.github.com/users/teonbrooks/events{/privacy}", "received_events_url": "https://api.github.com/users/teonbrooks/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2015-07-23T23:59:20Z", "updated_at": "2015-09-08T23:10:18Z", "closed_at": "2015-09-08T23:10:18Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "Currently, ylim and scaling are not playing nicely with each other. If you set \n`ylim = dict(mag=[-300e-15, 300e-15])` and scalings=None, the ylim is not adjusted for the default scaling `mag=1e15`. we should fix it so that `ylim` is in regular units but is scaled internally with the `scalings` param. other option is to explain the behavior, but I feel like no one would expect this behavior.\n", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/2344/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/2344/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/2308", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/2308/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/2308/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/2308/events", "html_url": "https://github.com/mne-tools/mne-python/issues/2308", "id": 95504008, "node_id": "MDU6SXNzdWU5NTUwNDAwOA==", "number": 2308, "title": "Scale MRI is broken", "user": {"login": "teonbrooks", "id": 1578674, "node_id": "MDQ6VXNlcjE1Nzg2NzQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1578674?v=4", "gravatar_id": "", "url": "https://api.github.com/users/teonbrooks", "html_url": "https://github.com/teonbrooks", "followers_url": "https://api.github.com/users/teonbrooks/followers", "following_url": "https://api.github.com/users/teonbrooks/following{/other_user}", "gists_url": "https://api.github.com/users/teonbrooks/gists{/gist_id}", "starred_url": "https://api.github.com/users/teonbrooks/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/teonbrooks/subscriptions", "organizations_url": "https://api.github.com/users/teonbrooks/orgs", "repos_url": "https://api.github.com/users/teonbrooks/repos", "events_url": "https://api.github.com/users/teonbrooks/events{/privacy}", "received_events_url": "https://api.github.com/users/teonbrooks/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/mne-tools/mne-python/milestones/9", "html_url": "https://github.com/mne-tools/mne-python/milestone/9", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/milestones/9/labels", "id": 1648503, "node_id": "MDk6TWlsZXN0b25lMTY0ODUwMw==", "number": 9, "title": "0.13", "description": "", "creator": {"login": "larsoner", "id": 2365790, "node_id": "MDQ6VXNlcjIzNjU3OTA=", "avatar_url": "https://avatars.githubusercontent.com/u/2365790?v=4", "gravatar_id": "", "url": "https://api.github.com/users/larsoner", "html_url": "https://github.com/larsoner", "followers_url": "https://api.github.com/users/larsoner/followers", "following_url": "https://api.github.com/users/larsoner/following{/other_user}", "gists_url": "https://api.github.com/users/larsoner/gists{/gist_id}", "starred_url": "https://api.github.com/users/larsoner/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/larsoner/subscriptions", "organizations_url": "https://api.github.com/users/larsoner/orgs", "repos_url": "https://api.github.com/users/larsoner/repos", "events_url": "https://api.github.com/users/larsoner/events{/privacy}", "received_events_url": "https://api.github.com/users/larsoner/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 121, "state": "closed", "created_at": "2016-03-16T17:14:08Z", "updated_at": "2017-01-06T17:11:23Z", "due_on": "2016-09-23T07:00:00Z", "closed_at": "2017-01-06T17:11:23Z"}, "comments": 4, "created_at": "2015-07-16T19:08:34Z", "updated_at": "2016-09-08T18:43:58Z", "closed_at": "2016-09-08T18:43:58Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "Scaling subject is currently not working. At first, I thought it was related to my pr #2239 but it isn't working on master either. This may be a problem with the gui interaction with qt (at least this error message shows up on qt listservs).\n\n```\n2015-07-16 15:03:43.080 python[21563:3737877] modalSession has been exited prematurely - check for a reentrant call to endModalSession:\n```\n\nPseudo-way to make it happen:\nmne.gui.coregistration()\nscale a subject without MRI to template using their headshape info\ntry to save\n\ncc: @christianbrodbeck \n", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/2308/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/2308/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/2225", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/2225/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/2225/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/2225/events", "html_url": "https://github.com/mne-tools/mne-python/issues/2225", "id": 89883443, "node_id": "MDU6SXNzdWU4OTg4MzQ0Mw==", "number": 2225, "title": "BUG make_fwd_solution is broken", "user": {"login": "teonbrooks", "id": 1578674, "node_id": "MDQ6VXNlcjE1Nzg2NzQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1578674?v=4", "gravatar_id": "", "url": "https://api.github.com/users/teonbrooks", "html_url": "https://github.com/teonbrooks", "followers_url": "https://api.github.com/users/teonbrooks/followers", "following_url": "https://api.github.com/users/teonbrooks/following{/other_user}", "gists_url": "https://api.github.com/users/teonbrooks/gists{/gist_id}", "starred_url": "https://api.github.com/users/teonbrooks/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/teonbrooks/subscriptions", "organizations_url": "https://api.github.com/users/teonbrooks/orgs", "repos_url": "https://api.github.com/users/teonbrooks/repos", "events_url": "https://api.github.com/users/teonbrooks/events{/privacy}", "received_events_url": "https://api.github.com/users/teonbrooks/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/mne-tools/mne-python/milestones/6", "html_url": "https://github.com/mne-tools/mne-python/milestone/6", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/milestones/6/labels", "id": 1074222, "node_id": "MDk6TWlsZXN0b25lMTA3NDIyMg==", "number": 6, "title": "0.10", "description": "", "creator": {"login": "larsoner", "id": 2365790, "node_id": "MDQ6VXNlcjIzNjU3OTA=", "avatar_url": "https://avatars.githubusercontent.com/u/2365790?v=4", "gravatar_id": "", "url": "https://api.github.com/users/larsoner", "html_url": "https://github.com/larsoner", "followers_url": "https://api.github.com/users/larsoner/followers", "following_url": "https://api.github.com/users/larsoner/following{/other_user}", "gists_url": "https://api.github.com/users/larsoner/gists{/gist_id}", "starred_url": "https://api.github.com/users/larsoner/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/larsoner/subscriptions", "organizations_url": "https://api.github.com/users/larsoner/orgs", "repos_url": "https://api.github.com/users/larsoner/repos", "events_url": "https://api.github.com/users/larsoner/events{/privacy}", "received_events_url": "https://api.github.com/users/larsoner/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 86, "state": "closed", "created_at": "2015-04-19T22:04:00Z", "updated_at": "2015-12-11T19:15:32Z", "due_on": "2015-09-30T07:00:00Z", "closed_at": "2015-12-11T19:15:32Z"}, "comments": 3, "created_at": "2015-06-21T08:29:33Z", "updated_at": "2015-06-21T22:57:17Z", "closed_at": "2015-06-21T22:56:53Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "I was trying to make a fwd solution and I got an error.\n\n``` python\n/Applications/packages/mne-python/mne/io/pick.pyc in pick_types(info, meg, eeg, stim, eog, ecg, emg, ref_meg, misc, resp, chpi, exci, ias, syst, seeg, include, exclude, selection)\n    191     from .meas_info import Info\n    192     if not isinstance(info, Info):\n--> 193         raise TypeError('info must be an instance of Info, not %s' % info)\n    194     nchan = info['nchan']\n    195     pick = np.zeros(nchan, dtype=np.bool)\n\nTypeError: info must be an instance of Info, not {'dev_head_t':...\n```\n\nit's because the internal dict that is being generated is not an instance of Info, just a regular dict. this is a problem when you do pick_types on it.\n\ncc: @agramfort, @Eric89GXL \n", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/2225/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/2225/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/2200", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/2200/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/2200/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/2200/events", "html_url": "https://github.com/mne-tools/mne-python/issues/2200", "id": 88408330, "node_id": "MDU6SXNzdWU4ODQwODMzMA==", "number": 2200, "title": "Applying projs to Epochs made from read_epochs", "user": {"login": "teonbrooks", "id": 1578674, "node_id": "MDQ6VXNlcjE1Nzg2NzQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1578674?v=4", "gravatar_id": "", "url": "https://api.github.com/users/teonbrooks", "html_url": "https://github.com/teonbrooks", "followers_url": "https://api.github.com/users/teonbrooks/followers", "following_url": "https://api.github.com/users/teonbrooks/following{/other_user}", "gists_url": "https://api.github.com/users/teonbrooks/gists{/gist_id}", "starred_url": "https://api.github.com/users/teonbrooks/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/teonbrooks/subscriptions", "organizations_url": "https://api.github.com/users/teonbrooks/orgs", "repos_url": "https://api.github.com/users/teonbrooks/repos", "events_url": "https://api.github.com/users/teonbrooks/events{/privacy}", "received_events_url": "https://api.github.com/users/teonbrooks/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/mne-tools/mne-python/milestones/6", "html_url": "https://github.com/mne-tools/mne-python/milestone/6", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/milestones/6/labels", "id": 1074222, "node_id": "MDk6TWlsZXN0b25lMTA3NDIyMg==", "number": 6, "title": "0.10", "description": "", "creator": {"login": "larsoner", "id": 2365790, "node_id": "MDQ6VXNlcjIzNjU3OTA=", "avatar_url": "https://avatars.githubusercontent.com/u/2365790?v=4", "gravatar_id": "", "url": "https://api.github.com/users/larsoner", "html_url": "https://github.com/larsoner", "followers_url": "https://api.github.com/users/larsoner/followers", "following_url": "https://api.github.com/users/larsoner/following{/other_user}", "gists_url": "https://api.github.com/users/larsoner/gists{/gist_id}", "starred_url": "https://api.github.com/users/larsoner/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/larsoner/subscriptions", "organizations_url": "https://api.github.com/users/larsoner/orgs", "repos_url": "https://api.github.com/users/larsoner/repos", "events_url": "https://api.github.com/users/larsoner/events{/privacy}", "received_events_url": "https://api.github.com/users/larsoner/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 86, "state": "closed", "created_at": "2015-04-19T22:04:00Z", "updated_at": "2015-12-11T19:15:32Z", "due_on": "2015-09-30T07:00:00Z", "closed_at": "2015-12-11T19:15:32Z"}, "comments": 8, "created_at": "2015-06-15T12:21:28Z", "updated_at": "2015-06-27T20:23:28Z", "closed_at": "2015-06-27T20:23:28Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "currently I am getting an error when I try to apply a projection to an Epochs that was created from `mne.read_epochs`. Here's how you can recreate the error with the sample data:\n\n``` python\nimport mne\nfrom mne.datasets import sample\nfrom mne.utils import _TempDir\n\n\ndata_path = sample.data_path()\ntemp_path = _TempDir()\nfname_event = data_path + '/MEG/sample/sample_audvis_filt-0-40_raw-eve.fif'\nfname_raw = data_path + '/MEG/sample/sample_audvis_filt-0-40_raw.fif'\nfname_epo = temp_path + 'sample_audvis_filt-0-40_raw.fif'\nfname_proj = data_path + '/MEG/sample/sample_audvis_eog_proj.fif'\n\n\nevent_id, tmin, tmax = 1, -0.2, 0.5\n\n# Load data\nraw = mne.io.read_raw_fif(fname_raw)\nevents = mne.read_events(fname_event)\nproj = mne.read_proj(fname_proj)\n\n# Add a bad channel\nraw.info['bads'] += ['EEG 053']  # bads + 1 more\n\n# pick MEG channels\npicks = mne.pick_types(raw.info, meg=True, eeg=False, stim=False, eog=True,\n                       exclude='bads')\n# Read epochs\nepochs = mne.Epochs(raw, events, event_id, tmin, tmax, picks=picks,\n                    baseline=(None, 0), reject=dict(mag=4e-12, grad=4000e-13,\n                                                    eog=150e-6))\n# This has no problem\nepochs.copy().add_proj(proj).apply_proj()\n# Save without proj added\nepochs.save(fname_epo)\n\n\nepochs_s = mne.read_epochs(fname_epo)\nepochs_s.add_proj(proj)\n# This raises an error\nepochs_s.apply_proj()\n```\n", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/2200/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/2200/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/2143", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/2143/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/2143/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/2143/events", "html_url": "https://github.com/mne-tools/mne-python/issues/2143", "id": 80529844, "node_id": "MDU6SXNzdWU4MDUyOTg0NA==", "number": 2143, "title": "ica.plot_sources is problematic if inst.info['bads'] != []", "user": {"login": "teonbrooks", "id": 1578674, "node_id": "MDQ6VXNlcjE1Nzg2NzQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1578674?v=4", "gravatar_id": "", "url": "https://api.github.com/users/teonbrooks", "html_url": "https://github.com/teonbrooks", "followers_url": "https://api.github.com/users/teonbrooks/followers", "following_url": "https://api.github.com/users/teonbrooks/following{/other_user}", "gists_url": "https://api.github.com/users/teonbrooks/gists{/gist_id}", "starred_url": "https://api.github.com/users/teonbrooks/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/teonbrooks/subscriptions", "organizations_url": "https://api.github.com/users/teonbrooks/orgs", "repos_url": "https://api.github.com/users/teonbrooks/repos", "events_url": "https://api.github.com/users/teonbrooks/events{/privacy}", "received_events_url": "https://api.github.com/users/teonbrooks/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2015-05-25T12:59:28Z", "updated_at": "2015-05-28T17:03:09Z", "closed_at": "2015-05-28T17:03:09Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "When trying to plot ica sources, I run into an error:\n\n``` python\nRuntimeError: Epochs don't match fitted data: 207 channels fitted but 208 channels supplied. \nPlease provide Epochs compatible with ica.ch_names\n```\n\nbut that's because my `epochs.info['bads'] = ['MEG 130']`. this channel is dropped properly when computing the ICA but it's not being handled properly with the underlying `_transform_epochs`. The function should take a `picks` and if `picks=None`, remove the bads.\n\nThoughts @dengemann?\n", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/2143/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/2143/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/2121", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/2121/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/2121/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/2121/events", "html_url": "https://github.com/mne-tools/mne-python/issues/2121", "id": 78210398, "node_id": "MDU6SXNzdWU3ODIxMDM5OA==", "number": 2121, "title": "Potential bug with concatenate_raws", "user": {"login": "teonbrooks", "id": 1578674, "node_id": "MDQ6VXNlcjE1Nzg2NzQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1578674?v=4", "gravatar_id": "", "url": "https://api.github.com/users/teonbrooks", "html_url": "https://github.com/teonbrooks", "followers_url": "https://api.github.com/users/teonbrooks/followers", "following_url": "https://api.github.com/users/teonbrooks/following{/other_user}", "gists_url": "https://api.github.com/users/teonbrooks/gists{/gist_id}", "starred_url": "https://api.github.com/users/teonbrooks/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/teonbrooks/subscriptions", "organizations_url": "https://api.github.com/users/teonbrooks/orgs", "repos_url": "https://api.github.com/users/teonbrooks/repos", "events_url": "https://api.github.com/users/teonbrooks/events{/privacy}", "received_events_url": "https://api.github.com/users/teonbrooks/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/mne-tools/mne-python/milestones/6", "html_url": "https://github.com/mne-tools/mne-python/milestone/6", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/milestones/6/labels", "id": 1074222, "node_id": "MDk6TWlsZXN0b25lMTA3NDIyMg==", "number": 6, "title": "0.10", "description": "", "creator": {"login": "larsoner", "id": 2365790, "node_id": "MDQ6VXNlcjIzNjU3OTA=", "avatar_url": "https://avatars.githubusercontent.com/u/2365790?v=4", "gravatar_id": "", "url": "https://api.github.com/users/larsoner", "html_url": "https://github.com/larsoner", "followers_url": "https://api.github.com/users/larsoner/followers", "following_url": "https://api.github.com/users/larsoner/following{/other_user}", "gists_url": "https://api.github.com/users/larsoner/gists{/gist_id}", "starred_url": "https://api.github.com/users/larsoner/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/larsoner/subscriptions", "organizations_url": "https://api.github.com/users/larsoner/orgs", "repos_url": "https://api.github.com/users/larsoner/repos", "events_url": "https://api.github.com/users/larsoner/events{/privacy}", "received_events_url": "https://api.github.com/users/larsoner/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 86, "state": "closed", "created_at": "2015-04-19T22:04:00Z", "updated_at": "2015-12-11T19:15:32Z", "due_on": "2015-09-30T07:00:00Z", "closed_at": "2015-12-11T19:15:32Z"}, "comments": 9, "created_at": "2015-05-19T18:58:10Z", "updated_at": "2015-05-27T07:58:05Z", "closed_at": "2015-05-27T07:58:05Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "I tried to concatenate two `RawKIT` objects with `preload=True` for each and this worked fine. Then I tried `preload=False` and this gave an error when I tried `raw.preload_data()`. I get a \n`ValueError: total size of new array must be unchanged` so I delved down in the code and found in `_read_segment`, the code isn't being told where file1 is stopping and file2 is beginning, it tries to read it all from file1.\n\nAre we supposed to be able to do `preload_data` for concatenated unpreloaded files. Also, for naming purposes, should it be called `load_data()` instead of `preload_data()` since it's not being preloaded\n", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/2121/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/2121/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/2084", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/2084/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/2084/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/2084/events", "html_url": "https://github.com/mne-tools/mne-python/issues/2084", "id": 75372565, "node_id": "MDU6SXNzdWU3NTM3MjU2NQ==", "number": 2084, "title": "random_state with infomax", "user": {"login": "teonbrooks", "id": 1578674, "node_id": "MDQ6VXNlcjE1Nzg2NzQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1578674?v=4", "gravatar_id": "", "url": "https://api.github.com/users/teonbrooks", "html_url": "https://github.com/teonbrooks", "followers_url": "https://api.github.com/users/teonbrooks/followers", "following_url": "https://api.github.com/users/teonbrooks/following{/other_user}", "gists_url": "https://api.github.com/users/teonbrooks/gists{/gist_id}", "starred_url": "https://api.github.com/users/teonbrooks/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/teonbrooks/subscriptions", "organizations_url": "https://api.github.com/users/teonbrooks/orgs", "repos_url": "https://api.github.com/users/teonbrooks/repos", "events_url": "https://api.github.com/users/teonbrooks/events{/privacy}", "received_events_url": "https://api.github.com/users/teonbrooks/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/mne-tools/mne-python/milestones/5", "html_url": "https://github.com/mne-tools/mne-python/milestone/5", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/milestones/5/labels", "id": 1011721, "node_id": "MDk6TWlsZXN0b25lMTAxMTcyMQ==", "number": 5, "title": "0.9", "description": null, "creator": {"login": "larsoner", "id": 2365790, "node_id": "MDQ6VXNlcjIzNjU3OTA=", "avatar_url": "https://avatars.githubusercontent.com/u/2365790?v=4", "gravatar_id": "", "url": "https://api.github.com/users/larsoner", "html_url": "https://github.com/larsoner", "followers_url": "https://api.github.com/users/larsoner/followers", "following_url": "https://api.github.com/users/larsoner/following{/other_user}", "gists_url": "https://api.github.com/users/larsoner/gists{/gist_id}", "starred_url": "https://api.github.com/users/larsoner/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/larsoner/subscriptions", "organizations_url": "https://api.github.com/users/larsoner/orgs", "repos_url": "https://api.github.com/users/larsoner/repos", "events_url": "https://api.github.com/users/larsoner/events{/privacy}", "received_events_url": "https://api.github.com/users/larsoner/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 144, "state": "closed", "created_at": "2015-03-09T03:10:39Z", "updated_at": "2015-09-08T21:36:08Z", "due_on": null, "closed_at": "2015-05-22T07:38:01Z"}, "comments": 5, "created_at": "2015-05-11T21:59:05Z", "updated_at": "2015-05-15T11:57:39Z", "closed_at": "2015-05-15T11:57:39Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "Currently when I run ica with infomax with a random state set, my results are different.\n\n``` python\nica = mne.preprocessing.ICA(.9, random_state=42, method='infomax')\nica.fit(raw, decim=4)\n```\n\ntwo separate runs of this code (pay attention to IC 11 and 13):\n# **first:**\n## ![unknown-4](https://cloud.githubusercontent.com/assets/1578674/7575903/14d41c10-f839-11e4-9182-6416c5f9f8d6.png)\n# **second:**\n## ![unknown-5](https://cloud.githubusercontent.com/assets/1578674/7575910/2980b218-f839-11e4-96b5-1921839eb787.png)\n", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/2084/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/2084/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/2042", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/2042/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/2042/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/2042/events", "html_url": "https://github.com/mne-tools/mne-python/issues/2042", "id": 71956983, "node_id": "MDU6SXNzdWU3MTk1Njk4Mw==", "number": 2042, "title": "Montage __repr__", "user": {"login": "teonbrooks", "id": 1578674, "node_id": "MDQ6VXNlcjE1Nzg2NzQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1578674?v=4", "gravatar_id": "", "url": "https://api.github.com/users/teonbrooks", "html_url": "https://github.com/teonbrooks", "followers_url": "https://api.github.com/users/teonbrooks/followers", "following_url": "https://api.github.com/users/teonbrooks/following{/other_user}", "gists_url": "https://api.github.com/users/teonbrooks/gists{/gist_id}", "starred_url": "https://api.github.com/users/teonbrooks/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/teonbrooks/subscriptions", "organizations_url": "https://api.github.com/users/teonbrooks/orgs", "repos_url": "https://api.github.com/users/teonbrooks/repos", "events_url": "https://api.github.com/users/teonbrooks/events{/privacy}", "received_events_url": "https://api.github.com/users/teonbrooks/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/mne-tools/mne-python/milestones/7", "html_url": "https://github.com/mne-tools/mne-python/milestone/7", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/milestones/7/labels", "id": 1288558, "node_id": "MDk6TWlsZXN0b25lMTI4ODU1OA==", "number": 7, "title": "0.11", "description": "", "creator": {"login": "dengemann", "id": 1908618, "node_id": "MDQ6VXNlcjE5MDg2MTg=", "avatar_url": "https://avatars.githubusercontent.com/u/1908618?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dengemann", "html_url": "https://github.com/dengemann", "followers_url": "https://api.github.com/users/dengemann/followers", "following_url": "https://api.github.com/users/dengemann/following{/other_user}", "gists_url": "https://api.github.com/users/dengemann/gists{/gist_id}", "starred_url": "https://api.github.com/users/dengemann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dengemann/subscriptions", "organizations_url": "https://api.github.com/users/dengemann/orgs", "repos_url": "https://api.github.com/users/dengemann/repos", "events_url": "https://api.github.com/users/dengemann/events{/privacy}", "received_events_url": "https://api.github.com/users/dengemann/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 57, "state": "closed", "created_at": "2015-09-03T15:20:08Z", "updated_at": "2015-12-24T03:27:56Z", "due_on": "2015-12-18T08:00:00Z", "closed_at": "2015-12-24T03:27:56Z"}, "comments": 4, "created_at": "2015-04-29T18:54:16Z", "updated_at": "2015-12-13T08:11:01Z", "closed_at": "2015-12-13T08:11:01Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "Since some montages have the fiducials in the file, the `__repr__` is incorrect.\n\nfor instance `biosemi-64` displays the following:\n\n`<Montage | biosemi-64 - 67 Channels: Fp1, AF7, AF3 ...>`\n", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/2042/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/2042/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/2026", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/2026/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/2026/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/2026/events", "html_url": "https://github.com/mne-tools/mne-python/issues/2026", "id": 71124715, "node_id": "MDU6SXNzdWU3MTEyNDcxNQ==", "number": 2026, "title": "plotting bug with `plot_components` with EEG montage", "user": {"login": "teonbrooks", "id": 1578674, "node_id": "MDQ6VXNlcjE1Nzg2NzQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1578674?v=4", "gravatar_id": "", "url": "https://api.github.com/users/teonbrooks", "html_url": "https://github.com/teonbrooks", "followers_url": "https://api.github.com/users/teonbrooks/followers", "following_url": "https://api.github.com/users/teonbrooks/following{/other_user}", "gists_url": "https://api.github.com/users/teonbrooks/gists{/gist_id}", "starred_url": "https://api.github.com/users/teonbrooks/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/teonbrooks/subscriptions", "organizations_url": "https://api.github.com/users/teonbrooks/orgs", "repos_url": "https://api.github.com/users/teonbrooks/repos", "events_url": "https://api.github.com/users/teonbrooks/events{/privacy}", "received_events_url": "https://api.github.com/users/teonbrooks/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/mne-tools/mne-python/milestones/5", "html_url": "https://github.com/mne-tools/mne-python/milestone/5", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/milestones/5/labels", "id": 1011721, "node_id": "MDk6TWlsZXN0b25lMTAxMTcyMQ==", "number": 5, "title": "0.9", "description": null, "creator": {"login": "larsoner", "id": 2365790, "node_id": "MDQ6VXNlcjIzNjU3OTA=", "avatar_url": "https://avatars.githubusercontent.com/u/2365790?v=4", "gravatar_id": "", "url": "https://api.github.com/users/larsoner", "html_url": "https://github.com/larsoner", "followers_url": "https://api.github.com/users/larsoner/followers", "following_url": "https://api.github.com/users/larsoner/following{/other_user}", "gists_url": "https://api.github.com/users/larsoner/gists{/gist_id}", "starred_url": "https://api.github.com/users/larsoner/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/larsoner/subscriptions", "organizations_url": "https://api.github.com/users/larsoner/orgs", "repos_url": "https://api.github.com/users/larsoner/repos", "events_url": "https://api.github.com/users/larsoner/events{/privacy}", "received_events_url": "https://api.github.com/users/larsoner/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 144, "state": "closed", "created_at": "2015-03-09T03:10:39Z", "updated_at": "2015-09-08T21:36:08Z", "due_on": null, "closed_at": "2015-05-22T07:38:01Z"}, "comments": 12, "created_at": "2015-04-26T21:46:34Z", "updated_at": "2015-04-29T19:23:30Z", "closed_at": "2015-04-29T19:23:30Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "I am currently working with some biosemi data and I noticed one bug and one enhancement that should be addressed before the release.\n\nthe first is the bug: when plotting the IC for the EEG data, only one topo plot is currently being plotted while the rest are left empty.\n\n![figure_1](https://cloud.githubusercontent.com/assets/1578674/7339415/bc648712-ec3b-11e4-8c5a-f645092ad2c5.png)\n\nthe second is a feature enhancement: when using `ica.plot_components`, the plotting function should not default to `meg` especially when there are no meg channels present in the data. the default ch_type should be None. we should inspect the channel types, and if there are no meg channels, we should plot the EEG, if we have meg only, then plot meg, then if we have both, probably the default should be meg but that can be discussed.\n", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/2026/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/2026/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/1995", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/1995/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/1995/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/1995/events", "html_url": "https://github.com/mne-tools/mne-python/issues/1995", "id": 69899077, "node_id": "MDU6SXNzdWU2OTg5OTA3Nw==", "number": 1995, "title": "plot_lcmv_beamformer.py isn't working", "user": {"login": "teonbrooks", "id": 1578674, "node_id": "MDQ6VXNlcjE1Nzg2NzQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1578674?v=4", "gravatar_id": "", "url": "https://api.github.com/users/teonbrooks", "html_url": "https://github.com/teonbrooks", "followers_url": "https://api.github.com/users/teonbrooks/followers", "following_url": "https://api.github.com/users/teonbrooks/following{/other_user}", "gists_url": "https://api.github.com/users/teonbrooks/gists{/gist_id}", "starred_url": "https://api.github.com/users/teonbrooks/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/teonbrooks/subscriptions", "organizations_url": "https://api.github.com/users/teonbrooks/orgs", "repos_url": "https://api.github.com/users/teonbrooks/repos", "events_url": "https://api.github.com/users/teonbrooks/events{/privacy}", "received_events_url": "https://api.github.com/users/teonbrooks/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/mne-tools/mne-python/milestones/5", "html_url": "https://github.com/mne-tools/mne-python/milestone/5", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/milestones/5/labels", "id": 1011721, "node_id": "MDk6TWlsZXN0b25lMTAxMTcyMQ==", "number": 5, "title": "0.9", "description": null, "creator": {"login": "larsoner", "id": 2365790, "node_id": "MDQ6VXNlcjIzNjU3OTA=", "avatar_url": "https://avatars.githubusercontent.com/u/2365790?v=4", "gravatar_id": "", "url": "https://api.github.com/users/larsoner", "html_url": "https://github.com/larsoner", "followers_url": "https://api.github.com/users/larsoner/followers", "following_url": "https://api.github.com/users/larsoner/following{/other_user}", "gists_url": "https://api.github.com/users/larsoner/gists{/gist_id}", "starred_url": "https://api.github.com/users/larsoner/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/larsoner/subscriptions", "organizations_url": "https://api.github.com/users/larsoner/orgs", "repos_url": "https://api.github.com/users/larsoner/repos", "events_url": "https://api.github.com/users/larsoner/events{/privacy}", "received_events_url": "https://api.github.com/users/larsoner/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 144, "state": "closed", "created_at": "2015-03-09T03:10:39Z", "updated_at": "2015-09-08T21:36:08Z", "due_on": null, "closed_at": "2015-05-22T07:38:01Z"}, "comments": 2, "created_at": "2015-04-21T16:59:26Z", "updated_at": "2015-04-21T18:53:16Z", "closed_at": "2015-04-21T18:53:16Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "I ran the examples `plot_lcmv_beamformer.py` but it fails with this error:\n\n``` python\nRuntimeError: label and stc must have same subject names, currently \"lcmv-free-lh.stc\" and \"sample\"\n```\n\n@yousrabk also got the same error.\n", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/1995/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/1995/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/1906", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/1906/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/1906/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/1906/events", "html_url": "https://github.com/mne-tools/mne-python/issues/1906", "id": 64633254, "node_id": "MDU6SXNzdWU2NDYzMzI1NA==", "number": 1906, "title": "bug IO with evoked.", "user": {"login": "agramfort", "id": 161052, "node_id": "MDQ6VXNlcjE2MTA1Mg==", "avatar_url": "https://avatars.githubusercontent.com/u/161052?v=4", "gravatar_id": "", "url": "https://api.github.com/users/agramfort", "html_url": "https://github.com/agramfort", "followers_url": "https://api.github.com/users/agramfort/followers", "following_url": "https://api.github.com/users/agramfort/following{/other_user}", "gists_url": "https://api.github.com/users/agramfort/gists{/gist_id}", "starred_url": "https://api.github.com/users/agramfort/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/agramfort/subscriptions", "organizations_url": "https://api.github.com/users/agramfort/orgs", "repos_url": "https://api.github.com/users/agramfort/repos", "events_url": "https://api.github.com/users/agramfort/events{/privacy}", "received_events_url": "https://api.github.com/users/agramfort/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 12, "created_at": "2015-03-26T21:03:49Z", "updated_at": "2015-04-01T08:00:02Z", "closed_at": "2015-03-31T14:02:28Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "use this file\n\nhttps://dl.dropboxusercontent.com/u/2140486/toto-ave.pkl\n\nand run\n\n```\nimport cPickle as p\na = p.load(open('toto-ave.pkl', 'r'))\na.save('pouet-ave.fif')\nmne.read_evokeds('pouet-ave.fif')\n```\n\ncan somebody have look?\n\n@Eric89GXL maybe?\n", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/1906/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/1906/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/1867", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/1867/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/1867/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/1867/events", "html_url": "https://github.com/mne-tools/mne-python/issues/1867", "id": 62022455, "node_id": "MDU6SXNzdWU2MjAyMjQ1NQ==", "number": 1867, "title": "BUG: MNE-C ", "user": {"login": "dengemann", "id": 1908618, "node_id": "MDQ6VXNlcjE5MDg2MTg=", "avatar_url": "https://avatars.githubusercontent.com/u/1908618?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dengemann", "html_url": "https://github.com/dengemann", "followers_url": "https://api.github.com/users/dengemann/followers", "following_url": "https://api.github.com/users/dengemann/following{/other_user}", "gists_url": "https://api.github.com/users/dengemann/gists{/gist_id}", "starred_url": "https://api.github.com/users/dengemann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dengemann/subscriptions", "organizations_url": "https://api.github.com/users/dengemann/orgs", "repos_url": "https://api.github.com/users/dengemann/repos", "events_url": "https://api.github.com/users/dengemann/events{/privacy}", "received_events_url": "https://api.github.com/users/dengemann/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}, {"id": 539371148, "node_id": "MDU6TGFiZWw1MzkzNzExNDg=", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/WONTFIX", "name": "WONTFIX", "color": "e99695", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2015-03-16T09:26:03Z", "updated_at": "2017-02-16T19:47:11Z", "closed_at": "2017-02-16T19:47:08Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "mne_process_raw does not seem to be very strict about what is a data channel.\nData labeled as FIFFV_RESP_CH or FIFF_EVENT_CHANNEL should not be included in filtering.\nThis is what mne_process_raw seems to do however.\n\ncc @mshamalainen \n", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/1867/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/1867/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/1803", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/1803/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/1803/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/1803/events", "html_url": "https://github.com/mne-tools/mne-python/issues/1803", "id": 57830920, "node_id": "MDU6SXNzdWU1NzgzMDkyMA==", "number": 1803, "title": "\"picks\" and \"scalings\" params are ignored by plot_epochs", "user": {"login": "agramfort", "id": 161052, "node_id": "MDQ6VXNlcjE2MTA1Mg==", "avatar_url": "https://avatars.githubusercontent.com/u/161052?v=4", "gravatar_id": "", "url": "https://api.github.com/users/agramfort", "html_url": "https://github.com/agramfort", "followers_url": "https://api.github.com/users/agramfort/followers", "following_url": "https://api.github.com/users/agramfort/following{/other_user}", "gists_url": "https://api.github.com/users/agramfort/gists{/gist_id}", "starred_url": "https://api.github.com/users/agramfort/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/agramfort/subscriptions", "organizations_url": "https://api.github.com/users/agramfort/orgs", "repos_url": "https://api.github.com/users/agramfort/repos", "events_url": "https://api.github.com/users/agramfort/events{/privacy}", "received_events_url": "https://api.github.com/users/agramfort/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2015-02-16T17:24:33Z", "updated_at": "2015-02-21T17:36:58Z", "closed_at": "2015-02-21T17:36:58Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/1803/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/1803/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/1784", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/1784/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/1784/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/1784/events", "html_url": "https://github.com/mne-tools/mne-python/issues/1784", "id": 56947337, "node_id": "MDU6SXNzdWU1Njk0NzMzNw==", "number": 1784, "title": "plot events label is incorrect", "user": {"login": "mainakjas", "id": 3817535, "node_id": "MDQ6VXNlcjM4MTc1MzU=", "avatar_url": "https://avatars.githubusercontent.com/u/3817535?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mainakjas", "html_url": "https://github.com/mainakjas", "followers_url": "https://api.github.com/users/mainakjas/followers", "following_url": "https://api.github.com/users/mainakjas/following{/other_user}", "gists_url": "https://api.github.com/users/mainakjas/gists{/gist_id}", "starred_url": "https://api.github.com/users/mainakjas/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mainakjas/subscriptions", "organizations_url": "https://api.github.com/users/mainakjas/orgs", "repos_url": "https://api.github.com/users/mainakjas/repos", "events_url": "https://api.github.com/users/mainakjas/events{/privacy}", "received_events_url": "https://api.github.com/users/mainakjas/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}, {"id": 77061445, "node_id": "MDU6TGFiZWw3NzA2MTQ0NQ==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/EASY", "name": "EASY", "color": "2be2d6", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2015-02-08T10:49:19Z", "updated_at": "2015-02-08T11:13:01Z", "closed_at": "2015-02-08T11:13:01Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Try running `examples/plot_extract_events_from_raw.py`\n\n![plotev_legend](https://cloud.githubusercontent.com/assets/3817535/6096265/d17aed22-af90-11e4-93dd-8fec8fc14e4b.png)\n", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/1784/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/1784/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/1703", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/1703/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/1703/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/1703/events", "html_url": "https://github.com/mne-tools/mne-python/issues/1703", "id": 52252844, "node_id": "MDU6SXNzdWU1MjI1Mjg0NA==", "number": 1703, "title": "Creating Montage from Polhemus points", "user": {"login": "christianbrodbeck", "id": 145771, "node_id": "MDQ6VXNlcjE0NTc3MQ==", "avatar_url": "https://avatars.githubusercontent.com/u/145771?v=4", "gravatar_id": "", "url": "https://api.github.com/users/christianbrodbeck", "html_url": "https://github.com/christianbrodbeck", "followers_url": "https://api.github.com/users/christianbrodbeck/followers", "following_url": "https://api.github.com/users/christianbrodbeck/following{/other_user}", "gists_url": "https://api.github.com/users/christianbrodbeck/gists{/gist_id}", "starred_url": "https://api.github.com/users/christianbrodbeck/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/christianbrodbeck/subscriptions", "organizations_url": "https://api.github.com/users/christianbrodbeck/orgs", "repos_url": "https://api.github.com/users/christianbrodbeck/repos", "events_url": "https://api.github.com/users/christianbrodbeck/events{/privacy}", "received_events_url": "https://api.github.com/users/christianbrodbeck/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}, {"id": 85110689, "node_id": "MDU6TGFiZWw4NTExMDY4OQ==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/QUESTION", "name": "QUESTION", "color": "bfe5bf", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "christianbrodbeck", "id": 145771, "node_id": "MDQ6VXNlcjE0NTc3MQ==", "avatar_url": "https://avatars.githubusercontent.com/u/145771?v=4", "gravatar_id": "", "url": "https://api.github.com/users/christianbrodbeck", "html_url": "https://github.com/christianbrodbeck", "followers_url": "https://api.github.com/users/christianbrodbeck/followers", "following_url": "https://api.github.com/users/christianbrodbeck/following{/other_user}", "gists_url": "https://api.github.com/users/christianbrodbeck/gists{/gist_id}", "starred_url": "https://api.github.com/users/christianbrodbeck/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/christianbrodbeck/subscriptions", "organizations_url": "https://api.github.com/users/christianbrodbeck/orgs", "repos_url": "https://api.github.com/users/christianbrodbeck/repos", "events_url": "https://api.github.com/users/christianbrodbeck/events{/privacy}", "received_events_url": "https://api.github.com/users/christianbrodbeck/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "christianbrodbeck", "id": 145771, "node_id": "MDQ6VXNlcjE0NTc3MQ==", "avatar_url": "https://avatars.githubusercontent.com/u/145771?v=4", "gravatar_id": "", "url": "https://api.github.com/users/christianbrodbeck", "html_url": "https://github.com/christianbrodbeck", "followers_url": "https://api.github.com/users/christianbrodbeck/followers", "following_url": "https://api.github.com/users/christianbrodbeck/following{/other_user}", "gists_url": "https://api.github.com/users/christianbrodbeck/gists{/gist_id}", "starred_url": "https://api.github.com/users/christianbrodbeck/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/christianbrodbeck/subscriptions", "organizations_url": "https://api.github.com/users/christianbrodbeck/orgs", "repos_url": "https://api.github.com/users/christianbrodbeck/repos", "events_url": "https://api.github.com/users/christianbrodbeck/events{/privacy}", "received_events_url": "https://api.github.com/users/christianbrodbeck/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/mne-tools/mne-python/milestones/6", "html_url": "https://github.com/mne-tools/mne-python/milestone/6", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/milestones/6/labels", "id": 1074222, "node_id": "MDk6TWlsZXN0b25lMTA3NDIyMg==", "number": 6, "title": "0.10", "description": "", "creator": {"login": "larsoner", "id": 2365790, "node_id": "MDQ6VXNlcjIzNjU3OTA=", "avatar_url": "https://avatars.githubusercontent.com/u/2365790?v=4", "gravatar_id": "", "url": "https://api.github.com/users/larsoner", "html_url": "https://github.com/larsoner", "followers_url": "https://api.github.com/users/larsoner/followers", "following_url": "https://api.github.com/users/larsoner/following{/other_user}", "gists_url": "https://api.github.com/users/larsoner/gists{/gist_id}", "starred_url": "https://api.github.com/users/larsoner/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/larsoner/subscriptions", "organizations_url": "https://api.github.com/users/larsoner/orgs", "repos_url": "https://api.github.com/users/larsoner/repos", "events_url": "https://api.github.com/users/larsoner/events{/privacy}", "received_events_url": "https://api.github.com/users/larsoner/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 86, "state": "closed", "created_at": "2015-04-19T22:04:00Z", "updated_at": "2015-12-11T19:15:32Z", "due_on": "2015-09-30T07:00:00Z", "closed_at": "2015-12-11T19:15:32Z"}, "comments": 38, "created_at": "2014-12-17T15:29:51Z", "updated_at": "2015-09-03T15:52:31Z", "closed_at": "2015-09-03T15:52:31Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "I have brain vision data and digitized electrode positions. This now means I have to create a Montage file with my digitized points in order to convert my data, right? Is there a tool for creating a montage from a Polhemus Points file? If not should I add one?\n\nAlso there seems to be something wrong at https://github.com/mne-tools/mne-python/blob/master/mne/channels/layout.py#L764, the scale parameter in the function signature is never used in the function...\n", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/1703/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/1703/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/1555", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/1555/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/1555/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/1555/events", "html_url": "https://github.com/mne-tools/mne-python/pull/1555", "id": 42202326, "node_id": "MDExOlB1bGxSZXF1ZXN0MjA4OTMwNzA=", "number": 1555, "title": "FIX _write_raw():  don\u2019t set meas_id to invalid value", "user": {"login": "christianbrodbeck", "id": 145771, "node_id": "MDQ6VXNlcjE0NTc3MQ==", "avatar_url": "https://avatars.githubusercontent.com/u/145771?v=4", "gravatar_id": "", "url": "https://api.github.com/users/christianbrodbeck", "html_url": "https://github.com/christianbrodbeck", "followers_url": "https://api.github.com/users/christianbrodbeck/followers", "following_url": "https://api.github.com/users/christianbrodbeck/following{/other_user}", "gists_url": "https://api.github.com/users/christianbrodbeck/gists{/gist_id}", "starred_url": "https://api.github.com/users/christianbrodbeck/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/christianbrodbeck/subscriptions", "organizations_url": "https://api.github.com/users/christianbrodbeck/orgs", "repos_url": "https://api.github.com/users/christianbrodbeck/repos", "events_url": "https://api.github.com/users/christianbrodbeck/events{/privacy}", "received_events_url": "https://api.github.com/users/christianbrodbeck/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 23192538, "node_id": "MDU6TGFiZWwyMzE5MjUzOA==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/FIX", "name": "FIX", "color": "eb6420", "default": false, "description": null}, {"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 19, "created_at": "2014-09-08T14:32:43Z", "updated_at": "2014-09-17T16:37:12Z", "closed_at": "2014-09-17T16:17:44Z", "author_association": "MEMBER", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/mne-tools/mne-python/pulls/1555", "html_url": "https://github.com/mne-tools/mne-python/pull/1555", "diff_url": "https://github.com/mne-tools/mne-python/pull/1555.diff", "patch_url": "https://github.com/mne-tools/mne-python/pull/1555.patch", "merged_at": "2014-09-17T16:17:44Z"}, "body": "I've encountered a bug with kit2fiff, but I think it's a bug in the general write raw code:\n- if `raw.info['meas_id']` is `None` (as it was for my kit-raw file), `_write_raw()` sets `meas_id = 0` before calling `write_id(fid, FIFF.FIFF_REF_FILE_ID, meas_id)` (https://github.com/mne-tools/mne-python/blob/master/mne/io/base.py#L1449)\n- `write_id()` however expects `meas_id` to be a dictionary (https://github.com/mne-tools/mne-python/blob/master/mne/io/write.py#L181)\n\nSince `write_id()` seems to be able to handle `meas_id == None` I think this PR should solve it, currently running the tests...\n", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/1555/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/1555/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/1464", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/1464/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/1464/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/1464/events", "html_url": "https://github.com/mne-tools/mne-python/issues/1464", "id": 38671425, "node_id": "MDU6SXNzdWUzODY3MTQyNQ==", "number": 1464, "title": "doc does not build with py3k", "user": {"login": "agramfort", "id": 161052, "node_id": "MDQ6VXNlcjE2MTA1Mg==", "avatar_url": "https://avatars.githubusercontent.com/u/161052?v=4", "gravatar_id": "", "url": "https://api.github.com/users/agramfort", "html_url": "https://github.com/agramfort", "followers_url": "https://api.github.com/users/agramfort/followers", "following_url": "https://api.github.com/users/agramfort/following{/other_user}", "gists_url": "https://api.github.com/users/agramfort/gists{/gist_id}", "starred_url": "https://api.github.com/users/agramfort/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/agramfort/subscriptions", "organizations_url": "https://api.github.com/users/agramfort/orgs", "repos_url": "https://api.github.com/users/agramfort/repos", "events_url": "https://api.github.com/users/agramfort/events{/privacy}", "received_events_url": "https://api.github.com/users/agramfort/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2014-07-24T20:37:31Z", "updated_at": "2015-03-09T16:57:41Z", "closed_at": "2015-03-09T16:57:41Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/1464/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/1464/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/1351", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/1351/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/1351/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/1351/events", "html_url": "https://github.com/mne-tools/mne-python/issues/1351", "id": 35746204, "node_id": "MDU6SXNzdWUzNTc0NjIwNA==", "number": 1351, "title": "BUG: bring Pizza to Biomag", "user": {"login": "dengemann", "id": 1908618, "node_id": "MDQ6VXNlcjE5MDg2MTg=", "avatar_url": "https://avatars.githubusercontent.com/u/1908618?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dengemann", "html_url": "https://github.com/dengemann", "followers_url": "https://api.github.com/users/dengemann/followers", "following_url": "https://api.github.com/users/dengemann/following{/other_user}", "gists_url": "https://api.github.com/users/dengemann/gists{/gist_id}", "starred_url": "https://api.github.com/users/dengemann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dengemann/subscriptions", "organizations_url": "https://api.github.com/users/dengemann/orgs", "repos_url": "https://api.github.com/users/dengemann/repos", "events_url": "https://api.github.com/users/dengemann/events{/privacy}", "received_events_url": "https://api.github.com/users/dengemann/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 23192531, "node_id": "MDU6TGFiZWwyMzE5MjUzMQ==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/ENH", "name": "ENH", "color": "d7e102", "default": false, "description": null}, {"id": 23192538, "node_id": "MDU6TGFiZWwyMzE5MjUzOA==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/FIX", "name": "FIX", "color": "eb6420", "default": false, "description": null}, {"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}, {"id": 77061445, "node_id": "MDU6TGFiZWw3NzA2MTQ0NQ==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/EASY", "name": "EASY", "color": "2be2d6", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": {"login": "agramfort", "id": 161052, "node_id": "MDQ6VXNlcjE2MTA1Mg==", "avatar_url": "https://avatars.githubusercontent.com/u/161052?v=4", "gravatar_id": "", "url": "https://api.github.com/users/agramfort", "html_url": "https://github.com/agramfort", "followers_url": "https://api.github.com/users/agramfort/followers", "following_url": "https://api.github.com/users/agramfort/following{/other_user}", "gists_url": "https://api.github.com/users/agramfort/gists{/gist_id}", "starred_url": "https://api.github.com/users/agramfort/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/agramfort/subscriptions", "organizations_url": "https://api.github.com/users/agramfort/orgs", "repos_url": "https://api.github.com/users/agramfort/repos", "events_url": "https://api.github.com/users/agramfort/events{/privacy}", "received_events_url": "https://api.github.com/users/agramfort/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "agramfort", "id": 161052, "node_id": "MDQ6VXNlcjE2MTA1Mg==", "avatar_url": "https://avatars.githubusercontent.com/u/161052?v=4", "gravatar_id": "", "url": "https://api.github.com/users/agramfort", "html_url": "https://github.com/agramfort", "followers_url": "https://api.github.com/users/agramfort/followers", "following_url": "https://api.github.com/users/agramfort/following{/other_user}", "gists_url": "https://api.github.com/users/agramfort/gists{/gist_id}", "starred_url": "https://api.github.com/users/agramfort/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/agramfort/subscriptions", "organizations_url": "https://api.github.com/users/agramfort/orgs", "repos_url": "https://api.github.com/users/agramfort/repos", "events_url": "https://api.github.com/users/agramfort/events{/privacy}", "received_events_url": "https://api.github.com/users/agramfort/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/mne-tools/mne-python/milestones/4", "html_url": "https://github.com/mne-tools/mne-python/milestone/4", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/milestones/4/labels", "id": 453708, "node_id": "MDk6TWlsZXN0b25lNDUzNzA4", "number": 4, "title": "0.8", "description": null, "creator": {"login": "dengemann", "id": 1908618, "node_id": "MDQ6VXNlcjE5MDg2MTg=", "avatar_url": "https://avatars.githubusercontent.com/u/1908618?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dengemann", "html_url": "https://github.com/dengemann", "followers_url": "https://api.github.com/users/dengemann/followers", "following_url": "https://api.github.com/users/dengemann/following{/other_user}", "gists_url": "https://api.github.com/users/dengemann/gists{/gist_id}", "starred_url": "https://api.github.com/users/dengemann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dengemann/subscriptions", "organizations_url": "https://api.github.com/users/dengemann/orgs", "repos_url": "https://api.github.com/users/dengemann/repos", "events_url": "https://api.github.com/users/dengemann/events{/privacy}", "received_events_url": "https://api.github.com/users/dengemann/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 8, "state": "closed", "created_at": "2013-10-13T15:01:18Z", "updated_at": "2015-04-20T17:41:00Z", "due_on": null, "closed_at": "2015-03-09T19:00:35Z"}, "comments": 25, "created_at": "2014-06-15T09:59:52Z", "updated_at": "2014-09-28T23:28:36Z", "closed_at": "2014-09-28T23:28:36Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "What do people think?\n", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/1351/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/1351/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/1256", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/1256/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/1256/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/1256/events", "html_url": "https://github.com/mne-tools/mne-python/issues/1256", "id": 32743847, "node_id": "MDU6SXNzdWUzMjc0Mzg0Nw==", "number": 1256, "title": "FAIL: Test importing EGI simple binary files", "user": {"login": "mluessi", "id": 647005, "node_id": "MDQ6VXNlcjY0NzAwNQ==", "avatar_url": "https://avatars.githubusercontent.com/u/647005?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mluessi", "html_url": "https://github.com/mluessi", "followers_url": "https://api.github.com/users/mluessi/followers", "following_url": "https://api.github.com/users/mluessi/following{/other_user}", "gists_url": "https://api.github.com/users/mluessi/gists{/gist_id}", "starred_url": "https://api.github.com/users/mluessi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mluessi/subscriptions", "organizations_url": "https://api.github.com/users/mluessi/orgs", "repos_url": "https://api.github.com/users/mluessi/repos", "events_url": "https://api.github.com/users/mluessi/events{/privacy}", "received_events_url": "https://api.github.com/users/mluessi/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2014-05-03T09:47:33Z", "updated_at": "2014-05-03T09:58:24Z", "closed_at": "2014-05-03T09:55:03Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "cc @dengemann I get this failure on both EPD-7.3.1 and Anaconda.\n\n```\n======================================================================\nFAIL: Test importing EGI simple binary files\n----------------------------------------------------------------------\nTraceback (most recent call last):\nFile \"/usr/pubsw/packages/python/anaconda/lib/python2.7/site-packages/nose/case.py\", line 197, in runTest\n    self.test(*self.arg)\nFile \"/autofs/space/megmix_002/users/mluessi/data/code/mne-python/mgh/mne-python/mne/fiff/egi/tests/test_egi.py\", line 33, in test_io_egi\n    assert_equal(msg, '%s' % w[0].message)\nAssertionError: 'Did not find any event code with more than one event.' != 'Did not find any event code with more  than one event.'\n-------------------- >> begin captured stdout << ---------------------\nReading EGI header from /autofs/space/megmix_002/users/mluessi/data/code/mne-python/mgh/mne-python/mne/fiff/egi/tests/data/test_egi.raw...\n    Reading events ...\n    Reading data ...\n    Assembling measurement info ...\n    Synthesizing trigger channel \"STI 014\" ...\n    Excluding events {} ...\n    Range : 0 ... 76 =      0.000 ...     0.304 secs\nReady.\n\n\n\n--------------------- >> end captured stdout << ----------------------\n    \"'Did not find any event code with more than one event.' != 'Did not find any event code with more  than one event.'\" = '%s != %s' % (safe_repr('Did not find any event code with more than one event.'), safe_repr('Did not find any event code with more  than one event.'))\n    \"'Did not find any event code with more than one event.' != 'Did not find any event code with more  than one event.'\" = self._formatMessage(\"'Did not find any event code with more than one event.' != 'Did not find any event code with more  than one event.'\", \"'Did not find any event code with more than one event.' != 'Did not find any event code with more  than one event.'\")\n>>  raise self.failureException(\"'Did not find any event code with more than one event.' != 'Did not find any event code with more  than one event.'\")\n```\n", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/1256/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/1256/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/1245", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/1245/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/1245/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/1245/events", "html_url": "https://github.com/mne-tools/mne-python/issues/1245", "id": 32445440, "node_id": "MDU6SXNzdWUzMjQ0NTQ0MA==", "number": 1245, "title": "DOC: Show documentation for inherited methods in derived classes", "user": {"login": "mluessi", "id": 647005, "node_id": "MDQ6VXNlcjY0NzAwNQ==", "avatar_url": "https://avatars.githubusercontent.com/u/647005?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mluessi", "html_url": "https://github.com/mluessi", "followers_url": "https://api.github.com/users/mluessi/followers", "following_url": "https://api.github.com/users/mluessi/following{/other_user}", "gists_url": "https://api.github.com/users/mluessi/gists{/gist_id}", "starred_url": "https://api.github.com/users/mluessi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mluessi/subscriptions", "organizations_url": "https://api.github.com/users/mluessi/orgs", "repos_url": "https://api.github.com/users/mluessi/repos", "events_url": "https://api.github.com/users/mluessi/events{/privacy}", "received_events_url": "https://api.github.com/users/mluessi/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 40091538, "node_id": "MDU6TGFiZWw0MDA5MTUzOA==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/DOC", "name": "DOC", "color": "009800", "default": false, "description": null}, {"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "mluessi", "id": 647005, "node_id": "MDQ6VXNlcjY0NzAwNQ==", "avatar_url": "https://avatars.githubusercontent.com/u/647005?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mluessi", "html_url": "https://github.com/mluessi", "followers_url": "https://api.github.com/users/mluessi/followers", "following_url": "https://api.github.com/users/mluessi/following{/other_user}", "gists_url": "https://api.github.com/users/mluessi/gists{/gist_id}", "starred_url": "https://api.github.com/users/mluessi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mluessi/subscriptions", "organizations_url": "https://api.github.com/users/mluessi/orgs", "repos_url": "https://api.github.com/users/mluessi/repos", "events_url": "https://api.github.com/users/mluessi/events{/privacy}", "received_events_url": "https://api.github.com/users/mluessi/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "mluessi", "id": 647005, "node_id": "MDQ6VXNlcjY0NzAwNQ==", "avatar_url": "https://avatars.githubusercontent.com/u/647005?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mluessi", "html_url": "https://github.com/mluessi", "followers_url": "https://api.github.com/users/mluessi/followers", "following_url": "https://api.github.com/users/mluessi/following{/other_user}", "gists_url": "https://api.github.com/users/mluessi/gists{/gist_id}", "starred_url": "https://api.github.com/users/mluessi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mluessi/subscriptions", "organizations_url": "https://api.github.com/users/mluessi/orgs", "repos_url": "https://api.github.com/users/mluessi/repos", "events_url": "https://api.github.com/users/mluessi/events{/privacy}", "received_events_url": "https://api.github.com/users/mluessi/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 2, "created_at": "2014-04-29T13:36:22Z", "updated_at": "2015-04-12T14:35:13Z", "closed_at": "2015-04-12T14:35:13Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "When using derived classes, only the methods of the child class, not the parent class are documented. An example is `Epochs`, which is derived from `_BaseEpochs` :\n\nhttp://martinos.org/mne/dev/generated/mne.Epochs.html#mne.Epochs\n\nThe sphinx doc should show all the inherited methods.\n", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/1245/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/1245/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/1235", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/1235/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/1235/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/1235/events", "html_url": "https://github.com/mne-tools/mne-python/issues/1235", "id": 32043534, "node_id": "MDU6SXNzdWUzMjA0MzUzNA==", "number": 1235, "title": "bug plot proj", "user": {"login": "agramfort", "id": 161052, "node_id": "MDQ6VXNlcjE2MTA1Mg==", "avatar_url": "https://avatars.githubusercontent.com/u/161052?v=4", "gravatar_id": "", "url": "https://api.github.com/users/agramfort", "html_url": "https://github.com/agramfort", "followers_url": "https://api.github.com/users/agramfort/followers", "following_url": "https://api.github.com/users/agramfort/following{/other_user}", "gists_url": "https://api.github.com/users/agramfort/gists{/gist_id}", "starred_url": "https://api.github.com/users/agramfort/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/agramfort/subscriptions", "organizations_url": "https://api.github.com/users/agramfort/orgs", "repos_url": "https://api.github.com/users/agramfort/repos", "events_url": "https://api.github.com/users/agramfort/events{/privacy}", "received_events_url": "https://api.github.com/users/agramfort/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2014-04-23T09:00:57Z", "updated_at": "2014-06-11T16:11:45Z", "closed_at": "2014-06-11T16:11:45Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "```\nimport mne\n\nEOGprojs = mne.read_proj('T110_012413_face_loc_autobad9_tsss_mc_EOG_auto-proj.fif')\n\nlayout = mne.layouts.read_layout('Vectorview-all')\nmne.viz.plot_projs_topomap(EOGprojs, layout=layout)\n```\n\nfile at:\n\nhttps://dl.dropboxusercontent.com/u/2140486/T110_012413_face_loc_autobad9_tsss_mc_EOG_auto-proj.fif\n\nthe scripts fails to find a proper layout\n", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/1235/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/1235/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/1198", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/1198/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/1198/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/1198/events", "html_url": "https://github.com/mne-tools/mne-python/issues/1198", "id": 29927535, "node_id": "MDU6SXNzdWUyOTkyNzUzNQ==", "number": 1198, "title": "Raw meas info saved incorrectly", "user": {"login": "mluessi", "id": 647005, "node_id": "MDQ6VXNlcjY0NzAwNQ==", "avatar_url": "https://avatars.githubusercontent.com/u/647005?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mluessi", "html_url": "https://github.com/mluessi", "followers_url": "https://api.github.com/users/mluessi/followers", "following_url": "https://api.github.com/users/mluessi/following{/other_user}", "gists_url": "https://api.github.com/users/mluessi/gists{/gist_id}", "starred_url": "https://api.github.com/users/mluessi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mluessi/subscriptions", "organizations_url": "https://api.github.com/users/mluessi/orgs", "repos_url": "https://api.github.com/users/mluessi/repos", "events_url": "https://api.github.com/users/mluessi/events{/privacy}", "received_events_url": "https://api.github.com/users/mluessi/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 10, "created_at": "2014-03-21T19:15:09Z", "updated_at": "2014-03-22T13:54:42Z", "closed_at": "2014-03-22T11:57:42Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "There is something very wrong, when I modify the measurement info and save the raw file, it keeps the old value for some reason: \n\n```\nimport sys\nimport os\nimport numpy as np\nimport mne\nfrom mne.datasets import sample\nmne.set_log_level('WARNING')\n\ndata_path = sample.data_path()\nraw = mne.fiff.Raw(data_path + '/MEG/sample/sample_audvis_raw.fif')\nraw.info['dev_head_t']['trans'] = np.eye(4)\nt1 =  raw.info['dev_head_t']['trans']\nprint t1\nfname = '/tmp/raw.fif'\nif os.path.exists(fname):\n    os.remove(fname)\nraw.save(fname, tmax=1.0)\nraw2 = mne.fiff.Raw(fname)\nt2 =  raw2.info['dev_head_t']['trans']\nprint t2\n```\n\nOutput:\n\n```\n[[ 1.  0.  0.  0.]\n[ 0.  1.  0.  0.]\n[ 0.  0.  1.  0.]\n[ 0.  0.  0.  1.]]\n[[  9.91419971e-01  -3.99363637e-02  -1.24467291e-01  -6.12930907e-03]\n[  6.06611520e-02   9.84011710e-01   1.67456239e-01   6.36056066e-05]\n[  1.15789659e-01  -1.73569739e-01   9.77991164e-01   6.47415221e-02]\n[  0.00000000e+00   0.00000000e+00   0.00000000e+00   1.00000000e+00]]\n```\n\nI used `git bisect` to track the first occurrence of this bug to bc28c1822f5beeaf19219dadf345fc1e21373380. However, I can't figure out what's wrong. The script I used to track down the bug is here: https://gist.github.com/mluessi/9693766. Then used\n\n```\ngit checkout master\ngit bisect start\ngit bisect bad\ngit bisect good d474ff321ff87aed578cbbd8a922c61ff6286a68\ngit bisect run ./bisect_raw.py\n```\n\nAny ideas? Can anyone else reproduce this?\n", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/1198/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/1198/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/1117", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/1117/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/1117/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/1117/events", "html_url": "https://github.com/mne-tools/mne-python/issues/1117", "id": 26844212, "node_id": "MDU6SXNzdWUyNjg0NDIxMg==", "number": 1117, "title": "Label names in parc_from_labels()", "user": {"login": "christianbrodbeck", "id": 145771, "node_id": "MDQ6VXNlcjE0NTc3MQ==", "avatar_url": "https://avatars.githubusercontent.com/u/145771?v=4", "gravatar_id": "", "url": "https://api.github.com/users/christianbrodbeck", "html_url": "https://github.com/christianbrodbeck", "followers_url": "https://api.github.com/users/christianbrodbeck/followers", "following_url": "https://api.github.com/users/christianbrodbeck/following{/other_user}", "gists_url": "https://api.github.com/users/christianbrodbeck/gists{/gist_id}", "starred_url": "https://api.github.com/users/christianbrodbeck/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/christianbrodbeck/subscriptions", "organizations_url": "https://api.github.com/users/christianbrodbeck/orgs", "repos_url": "https://api.github.com/users/christianbrodbeck/repos", "events_url": "https://api.github.com/users/christianbrodbeck/events{/privacy}", "received_events_url": "https://api.github.com/users/christianbrodbeck/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2014-02-03T22:41:37Z", "updated_at": "2015-04-10T08:37:48Z", "closed_at": "2015-04-10T08:37:48Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "@mluessi When I save a parc file (using `parc_from_labels()`) containing a label whose name contains an underline, then run `mri_surf2surf`, and then try to load the resulting annot file with `labels_from_parc()` I get a decode error (see below). Is this a known limitation in freesurfer? If so, should we check label names in  `parc_from_labels()` and raise an exception for invalid names? Let me know if you would want a script to reproduce the error\n\n``` python\n>>> labels_dst = mne.labels_from_parc('R0026', parc='aparc_rn', hemi='lh', surf_name='white', subjects_dir=mri_sdir, return_colors=False)\nTraceback (most recent call last):\n  File \"<input>\", line 1, in <module>\n  File \"<string>\", line 2, in labels_from_parc\n  File \"/Users/christian/Documents/Eclipse/projects/mne-python/mne/utils.py\", line 392, in verbose\n    ret = function(*args, **kwargs)\n  File \"/Users/christian/Documents/Eclipse/projects/mne-python/mne/label.py\", line 1119, in labels_from_parc\n    name = label_name.decode() + '-' + hemi\nUnicodeDecodeError: 'ascii' codec can't decode byte 0xd1 in position 9: ordinal not in range(128)\n>>> pdb.pm()\n> /Users/christian/Documents/Eclipse/projects/mne-python/mne/label.py(1119)labels_from_parc()\n-> name = label_name.decode() + '-' + hemi\n(Pdb) !label_name\n'banks_sts\\x10 \\x15\\xec\\x10 \\x15=|\\x9dB=|\\x9dB=|\\x9dB=|\\x9dB=|\\x9dB=|\\x9dB=|\\x9dB=|\\x9dB=|\\x9dB=|\\x9dB=|\\x9dB=|\\x9dB=|\\x9dB=|\\x9dB=|\\x9dB=|\\x9dB=|\\x9dB=|\\x9dB=|\\x9dB=|\\x9dB=|\\x9dB=|\\x9dB=|\\x9dB=|\\x9dB=|\\x9dB=|\\x9dB=|\\x9dB=|\\x9dB=|\\x9dB=|\\x9dB=|\\x9dB=|\\x9dB=|\\x9dB=|\\x9dB=|\\x9dB=|\\x9dB\\xa0'\n```\n\n(The name was `u'banks_sts-lh'`)\n", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/1117/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/1117/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/974", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/974/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/974/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/974/events", "html_url": "https://github.com/mne-tools/mne-python/issues/974", "id": 24040140, "node_id": "MDU6SXNzdWUyNDA0MDE0MA==", "number": 974, "title": "Failing GUI tests", "user": {"login": "mluessi", "id": 647005, "node_id": "MDQ6VXNlcjY0NzAwNQ==", "avatar_url": "https://avatars.githubusercontent.com/u/647005?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mluessi", "html_url": "https://github.com/mluessi", "followers_url": "https://api.github.com/users/mluessi/followers", "following_url": "https://api.github.com/users/mluessi/following{/other_user}", "gists_url": "https://api.github.com/users/mluessi/gists{/gist_id}", "starred_url": "https://api.github.com/users/mluessi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mluessi/subscriptions", "organizations_url": "https://api.github.com/users/mluessi/orgs", "repos_url": "https://api.github.com/users/mluessi/repos", "events_url": "https://api.github.com/users/mluessi/events{/privacy}", "received_events_url": "https://api.github.com/users/mluessi/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 13, "created_at": "2013-12-10T14:59:09Z", "updated_at": "2013-12-12T16:08:07Z", "closed_at": "2013-12-12T16:08:07Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "@christianmbrodbeck I get some failing tests with EPD 7.3:\n\nERROR: Test CoregModel\n\nTraceback (most recent call last):\n  File \"/usr/pubsw/packages/python/epd-7.3-1-rh5-x86_64/lib/python2.7/site-packages/nose/case.py\", line 197, in runTest\n    self.test(_self.arg)\n  File \"/homes/9/mluessi/.local/lib/python2.7/site-packages/numpy/testing/decorators.py\", line 146, in skipper_func\n    return f(_args, *_kwargs)\n  File \"/homes/9/mluessi/.local/lib/python2.7/site-packages/numpy/testing/decorators.py\", line 146, in skipper_func\n    return f(_args, **kwargs)\n  File \"/autofs/space/megmix_002/users/mluessi/data/code/mne-python/mgh/mne-python/mne/gui/tests/test_coreg_gui.py\", line 40, in test_coreg_model\n    model.mri.subject = 'sample'\n  File \"/usr/pubsw/packages/python/epd-7.3-1-rh5-x86_64/lib/python2.7/site-packages/traits/trait_types.py\", line 1969, in _set\n    self.error( object, name, value )\n  File \"/usr/pubsw/packages/python/epd-7.3-1-rh5-x86_64/lib/python2.7/site-packages/traits/trait_handlers.py\", line 170, in error\n    value )\nTraitError: The 'subject' trait of a MRISubjectSource instance must be '', but a value of 'sample' <type 'str'> was specified.\n\nERROR: Test MRIHeadWithFiducialsModel Traits Model\n\nTraceback (most recent call last):\n  File \"/usr/pubsw/packages/python/epd-7.3-1-rh5-x86_64/lib/python2.7/site-packages/nose/case.py\", line 197, in runTest\n    self.test(_self.arg)\n  File \"/homes/9/mluessi/.local/lib/python2.7/site-packages/numpy/testing/decorators.py\", line 146, in skipper_func\n    return f(_args, *_kwargs)\n  File \"/homes/9/mluessi/.local/lib/python2.7/site-packages/numpy/testing/decorators.py\", line 146, in skipper_func\n    return f(_args, **kwargs)\n  File \"/autofs/space/megmix_002/users/mluessi/data/code/mne-python/mgh/mne-python/mne/gui/tests/test_fiducials_gui.py\", line 27, in test_mri_model\n    model.subject = 'sample'\n  File \"/usr/pubsw/packages/python/epd-7.3-1-rh5-x86_64/lib/python2.7/site-packages/traits/trait_types.py\", line 1969, in _set\n    self.error( object, name, value )\n  File \"/usr/pubsw/packages/python/epd-7.3-1-rh5-x86_64/lib/python2.7/site-packages/traits/trait_handlers.py\", line 170, in error\n    value )\nTraitError: The 'subject' trait of a MRISubjectSource instance must be '', but a value of 'sample' <type 'str'> was specified.\n\nFAIL: Test SubjectSelector\n\nTraceback (most recent call last):\n  File \"/usr/pubsw/packages/python/epd-7.3-1-rh5-x86_64/lib/python2.7/site-packages/nose/case.py\", line 197, in runTest\n    self.test(_self.arg)\n  File \"/homes/9/mluessi/.local/lib/python2.7/site-packages/numpy/testing/decorators.py\", line 146, in skipper_func\n    return f(_args, *_kwargs)\n  File \"/homes/9/mluessi/.local/lib/python2.7/site-packages/numpy/testing/decorators.py\", line 146, in skipper_func\n    return f(_args, **kwargs)\n  File \"/autofs/space/megmix_002/users/mluessi/data/code/mne-python/mgh/mne-python/mne/gui/tests/test_file_traits.py\", line 93, in test_subject_source\n    assert_true('sample' in mri.subjects)\nAssertionError: False is not true\n    'False is not true' = self._formatMessage('False is not true', \"%s is not true\" % safe_repr(False))\n\n> >  raise self.failureException('False is not true')\n", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/974/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/974/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/956", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/956/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/956/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/956/events", "html_url": "https://github.com/mne-tools/mne-python/issues/956", "id": 23727237, "node_id": "MDU6SXNzdWUyMzcyNzIzNw==", "number": 956, "title": "BTI reader does not recognize EEG channels", "user": {"login": "agramfort", "id": 161052, "node_id": "MDQ6VXNlcjE2MTA1Mg==", "avatar_url": "https://avatars.githubusercontent.com/u/161052?v=4", "gravatar_id": "", "url": "https://api.github.com/users/agramfort", "html_url": "https://github.com/agramfort", "followers_url": "https://api.github.com/users/agramfort/followers", "following_url": "https://api.github.com/users/agramfort/following{/other_user}", "gists_url": "https://api.github.com/users/agramfort/gists{/gist_id}", "starred_url": "https://api.github.com/users/agramfort/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/agramfort/subscriptions", "organizations_url": "https://api.github.com/users/agramfort/orgs", "repos_url": "https://api.github.com/users/agramfort/repos", "events_url": "https://api.github.com/users/agramfort/events{/privacy}", "received_events_url": "https://api.github.com/users/agramfort/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "dengemann", "id": 1908618, "node_id": "MDQ6VXNlcjE5MDg2MTg=", "avatar_url": "https://avatars.githubusercontent.com/u/1908618?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dengemann", "html_url": "https://github.com/dengemann", "followers_url": "https://api.github.com/users/dengemann/followers", "following_url": "https://api.github.com/users/dengemann/following{/other_user}", "gists_url": "https://api.github.com/users/dengemann/gists{/gist_id}", "starred_url": "https://api.github.com/users/dengemann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dengemann/subscriptions", "organizations_url": "https://api.github.com/users/dengemann/orgs", "repos_url": "https://api.github.com/users/dengemann/repos", "events_url": "https://api.github.com/users/dengemann/events{/privacy}", "received_events_url": "https://api.github.com/users/dengemann/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "dengemann", "id": 1908618, "node_id": "MDQ6VXNlcjE5MDg2MTg=", "avatar_url": "https://avatars.githubusercontent.com/u/1908618?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dengemann", "html_url": "https://github.com/dengemann", "followers_url": "https://api.github.com/users/dengemann/followers", "following_url": "https://api.github.com/users/dengemann/following{/other_user}", "gists_url": "https://api.github.com/users/dengemann/gists{/gist_id}", "starred_url": "https://api.github.com/users/dengemann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dengemann/subscriptions", "organizations_url": "https://api.github.com/users/dengemann/orgs", "repos_url": "https://api.github.com/users/dengemann/repos", "events_url": "https://api.github.com/users/dengemann/events{/privacy}", "received_events_url": "https://api.github.com/users/dengemann/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 5, "created_at": "2013-12-04T16:28:02Z", "updated_at": "2015-12-12T14:51:45Z", "closed_at": "2015-12-12T14:51:45Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "thanks anne-so !\n", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/956/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/956/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/936", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/936/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/936/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/936/events", "html_url": "https://github.com/mne-tools/mne-python/issues/936", "id": 23388122, "node_id": "MDU6SXNzdWUyMzM4ODEyMg==", "number": 936, "title": "data/coil_def.dat missing in pip install", "user": {"login": "christianbrodbeck", "id": 145771, "node_id": "MDQ6VXNlcjE0NTc3MQ==", "avatar_url": "https://avatars.githubusercontent.com/u/145771?v=4", "gravatar_id": "", "url": "https://api.github.com/users/christianbrodbeck", "html_url": "https://github.com/christianbrodbeck", "followers_url": "https://api.github.com/users/christianbrodbeck/followers", "following_url": "https://api.github.com/users/christianbrodbeck/following{/other_user}", "gists_url": "https://api.github.com/users/christianbrodbeck/gists{/gist_id}", "starred_url": "https://api.github.com/users/christianbrodbeck/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/christianbrodbeck/subscriptions", "organizations_url": "https://api.github.com/users/christianbrodbeck/orgs", "repos_url": "https://api.github.com/users/christianbrodbeck/repos", "events_url": "https://api.github.com/users/christianbrodbeck/events{/privacy}", "received_events_url": "https://api.github.com/users/christianbrodbeck/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 18, "created_at": "2013-11-27T13:57:19Z", "updated_at": "2013-11-29T07:59:19Z", "closed_at": "2013-11-29T07:59:19Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "When I install mne with pip on OS X 10.9, `data/coil_def.dat` is missing. It's in `setup.py`'s `package_data`, so I am not sure why it does not get installed.\n", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/936/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/936/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/890", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/890/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/890/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/890/events", "html_url": "https://github.com/mne-tools/mne-python/issues/890", "id": 22645192, "node_id": "MDU6SXNzdWUyMjY0NTE5Mg==", "number": 890, "title": "Error using setup_volume_source_space", "user": {"login": "christianbrodbeck", "id": 145771, "node_id": "MDQ6VXNlcjE0NTc3MQ==", "avatar_url": "https://avatars.githubusercontent.com/u/145771?v=4", "gravatar_id": "", "url": "https://api.github.com/users/christianbrodbeck", "html_url": "https://github.com/christianbrodbeck", "followers_url": "https://api.github.com/users/christianbrodbeck/followers", "following_url": "https://api.github.com/users/christianbrodbeck/following{/other_user}", "gists_url": "https://api.github.com/users/christianbrodbeck/gists{/gist_id}", "starred_url": "https://api.github.com/users/christianbrodbeck/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/christianbrodbeck/subscriptions", "organizations_url": "https://api.github.com/users/christianbrodbeck/orgs", "repos_url": "https://api.github.com/users/christianbrodbeck/repos", "events_url": "https://api.github.com/users/christianbrodbeck/events{/privacy}", "received_events_url": "https://api.github.com/users/christianbrodbeck/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/mne-tools/mne-python/milestones/3", "html_url": "https://github.com/mne-tools/mne-python/milestone/3", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/milestones/3/labels", "id": 405542, "node_id": "MDk6TWlsZXN0b25lNDA1NTQy", "number": 3, "title": "0.7", "description": "", "creator": {"login": "dengemann", "id": 1908618, "node_id": "MDQ6VXNlcjE5MDg2MTg=", "avatar_url": "https://avatars.githubusercontent.com/u/1908618?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dengemann", "html_url": "https://github.com/dengemann", "followers_url": "https://api.github.com/users/dengemann/followers", "following_url": "https://api.github.com/users/dengemann/following{/other_user}", "gists_url": "https://api.github.com/users/dengemann/gists{/gist_id}", "starred_url": "https://api.github.com/users/dengemann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dengemann/subscriptions", "organizations_url": "https://api.github.com/users/dengemann/orgs", "repos_url": "https://api.github.com/users/dengemann/repos", "events_url": "https://api.github.com/users/dengemann/events{/privacy}", "received_events_url": "https://api.github.com/users/dengemann/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 55, "state": "closed", "created_at": "2013-08-19T20:54:40Z", "updated_at": "2015-03-09T16:39:36Z", "due_on": "2013-11-16T08:00:00Z", "closed_at": "2013-11-26T15:34:49Z"}, "comments": 6, "created_at": "2013-11-14T06:21:40Z", "updated_at": "2013-11-14T16:01:36Z", "closed_at": "2013-11-14T16:01:36Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "I get the following error when trying to use `mne.setup_volume_source_space()`:\n\n```\n>>> fname = '/Volumes/MyBook/araref/test-vol-10-fwd'\n>>> bem = '/Volumes/MyBook/araref/mri/AD001/bem/AD001-inner_skull-bem.fif'\n>>> subjects_dir = '/Volumes/MyBook/araref/mri'\n>>> src = mne.setup_volume_source_space('AD001', fname, pos=10.0, bem=bem, subjects_dir=subjects_dir)\nTraceback (most recent call last):\n  File \"<input>\", line 1, in <module>\n  File \"/Users/christian/Documents/Eclipse/projects/mne-python/mne/utils.py\", line 384, in dec\n    return function(*args, **kwargs)\n  File \"/Users/christian/Documents/Eclipse/projects/mne-python/mne/source_space.py\", line 1117, in setup_volume_source_space\n    write_source_spaces(fname, sp, verbose=False)\n  File \"/Users/christian/Documents/Eclipse/projects/mne-python/mne/utils.py\", line 377, in dec\n    ret = function(*args, **kwargs)\n  File \"/Users/christian/Documents/Eclipse/projects/mne-python/mne/source_space.py\", line 577, in write_source_spaces\n    _write_source_spaces_to_fid(fid, src, verbose)\n  File \"/Users/christian/Documents/Eclipse/projects/mne-python/mne/utils.py\", line 384, in dec\n    return function(*args, **kwargs)\n  File \"/Users/christian/Documents/Eclipse/projects/mne-python/mne/source_space.py\", line 541, in _write_source_spaces_to_fid\n    _write_one_source_space(fid, s, verbose)\n  File \"/Users/christian/Documents/Eclipse/projects/mne-python/mne/source_space.py\", line 634, in _write_one_source_space\n    write_coord_trans(fid, this['mri_ras_t'])\nKeyError: 'mri_ras_t'\n```\n\nIt seems that `'mri_ras_t'` is set in `_add_interpolator()` which is only called `if mri is not None`. Is mri not actually an optional parameter? The documentation says it's optional \"If pos is supplied\".\n", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/890/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/890/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/877", "repository_url": "https://api.github.com/repos/mne-tools/mne-python", "labels_url": "https://api.github.com/repos/mne-tools/mne-python/issues/877/labels{/name}", "comments_url": "https://api.github.com/repos/mne-tools/mne-python/issues/877/comments", "events_url": "https://api.github.com/repos/mne-tools/mne-python/issues/877/events", "html_url": "https://github.com/mne-tools/mne-python/issues/877", "id": 22391883, "node_id": "MDU6SXNzdWUyMjM5MTg4Mw==", "number": 877, "title": "Python based `make_forward_solution()` fails with KIT files", "user": {"login": "christianbrodbeck", "id": 145771, "node_id": "MDQ6VXNlcjE0NTc3MQ==", "avatar_url": "https://avatars.githubusercontent.com/u/145771?v=4", "gravatar_id": "", "url": "https://api.github.com/users/christianbrodbeck", "html_url": "https://github.com/christianbrodbeck", "followers_url": "https://api.github.com/users/christianbrodbeck/followers", "following_url": "https://api.github.com/users/christianbrodbeck/following{/other_user}", "gists_url": "https://api.github.com/users/christianbrodbeck/gists{/gist_id}", "starred_url": "https://api.github.com/users/christianbrodbeck/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/christianbrodbeck/subscriptions", "organizations_url": "https://api.github.com/users/christianbrodbeck/orgs", "repos_url": "https://api.github.com/users/christianbrodbeck/repos", "events_url": "https://api.github.com/users/christianbrodbeck/events{/privacy}", "received_events_url": "https://api.github.com/users/christianbrodbeck/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 65053426, "node_id": "MDU6TGFiZWw2NTA1MzQyNg==", "url": "https://api.github.com/repos/mne-tools/mne-python/labels/BUG", "name": "BUG", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 55, "created_at": "2013-11-09T19:11:30Z", "updated_at": "2013-11-13T20:06:44Z", "closed_at": "2013-11-13T01:19:35Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "@Eric89GXL @t3on\nWhen trying to run  `make_forward_solution()` with a raw file converted from KIT data I get the error below.\n\nKIT files contain channels for measuring environment noise which we use during pre-processing, and those channels are selected by `mne.fiff.pick_types(..., ref_meg=True)`. However it seems those channels then don't satisfy some criterion downstream. I don't assume they should be used by the forward solution.\n\n``` Python\n>>> info = '/Volumes/MyBook/araref/meg/AD001/raw/AD001_araref_0-40-raw.fif'\n>>> mri = '/Volumes/MyBook/araref/meg/AD001/raw/AD001-trans.fif'\n>>> src = '/Volumes/MyBook/araref/mri/AD001/bem/AD001-ico-4-src.fif'\n>>> bem = '/Volumes/MyBook/araref/mri/AD001/bem/AD001-inner_skull-bem-sol.fif'\n>>> fwd = mne.make_forward_solution(info, mri, src, bem)\nTraceback (most recent call last):\n  File \"<input>\", line 1, in <module>\n  File \"/Users/christian/Dropbox/scripts/test mne/make_forward_solution.py\", line 6, in <module>\n    fwd = mne.make_forward_solution(info, mri, src, bem)\n  File \"/Users/christian/Documents/Eclipse/projects/mne-python/mne/utils.py\", line 384, in dec\n    return function(*args, **kwargs)\n  File \"/Users/christian/Documents/Eclipse/projects/mne-python/mne/forward/_make_forward.py\", line 369, in make_forward_solution\n    meg_xform, coil_type='meg')\n  File \"/Users/christian/Documents/Eclipse/projects/mne-python/mne/forward/_make_forward.py\", line 149, in _create_coils\n    coils.append(_create_meg_coil(coilset, ch, acc, t))\n  File \"/Users/christian/Documents/Eclipse/projects/mne-python/mne/forward/_make_forward.py\", line 88, in _create_meg_coil\n    '(type = %d acc = %d)' % (ch['coil_type'], acc))\nRuntimeError: Desired coil definition not found (type = 0 acc = 1)\n```\n", "reactions": {"url": "https://api.github.com/repos/mne-tools/mne-python/issues/877/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mne-tools/mne-python/issues/877/timeline", "performed_via_github_app": null, "state_reason": "completed"}]