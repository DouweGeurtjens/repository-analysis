[{"url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/3232", "repository_url": "https://api.github.com/repos/LonamiWebs/Telethon", "labels_url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/3232/labels{/name}", "comments_url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/3232/comments", "events_url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/3232/events", "html_url": "https://github.com/LonamiWebs/Telethon/issues/3232", "id": 1071252758, "node_id": "I_kwDOA_jcjc4_2gUW", "number": 3232, "title": "MediaEmptyError when trying to upload an album of videos", "user": {"login": "the-blank-x", "id": 45762106, "node_id": "MDQ6VXNlcjQ1NzYyMTA2", "avatar_url": "https://avatars.githubusercontent.com/u/45762106?v=4", "gravatar_id": "", "url": "https://api.github.com/users/the-blank-x", "html_url": "https://github.com/the-blank-x", "followers_url": "https://api.github.com/users/the-blank-x/followers", "following_url": "https://api.github.com/users/the-blank-x/following{/other_user}", "gists_url": "https://api.github.com/users/the-blank-x/gists{/gist_id}", "starred_url": "https://api.github.com/users/the-blank-x/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/the-blank-x/subscriptions", "organizations_url": "https://api.github.com/users/the-blank-x/orgs", "repos_url": "https://api.github.com/users/the-blank-x/repos", "events_url": "https://api.github.com/users/the-blank-x/events{/privacy}", "received_events_url": "https://api.github.com/users/the-blank-x/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 3761009918, "node_id": "LA_kwDOA_jcjc7gLHT-", "url": "https://api.github.com/repos/LonamiWebs/Telethon/labels/bug", "name": "bug", "color": "D93F0B", "default": true, "description": "This bug affects actual users and should be fixed (medium priority)"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2021-12-04T17:08:39Z", "updated_at": "2023-04-06T12:45:50Z", "closed_at": "2023-04-06T12:45:49Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "\n**Checklist**\n* [X] The error is in the library's code, and not in my own.\n* [X] I have searched for this issue before posting it and there isn't a duplicate.\n* [X] I ran `pip install -U https://github.com/LonamiWebs/Telethon/archive/master.zip` and triggered the bug in the latest version.\n\n**Code that causes the issue**\n```python\nimport asyncio\nfrom telethon import TelegramClient\n\nasync def main():\n    client = TelegramClient('Download/general-sync/keys/knees', 1, '!')\n    await client.start()\n    await client.send_file('me', ['bargin-day.mp4', 'Oyasumi-r8ppxy_000.mp4'])\n\nasyncio.run(main())\n```\n\n**Traceback**\n```\nTraceback (most recent call last):\n  File \"/storage/emulated/0/t.py\", line 9, in <module>\n    asyncio.run(main())\n  File \"/data/data/com.termux/files/usr/lib/python3.10/asyncio/runners.py\", line 44, in run\n    return loop.run_until_complete(main)\n  File \"/data/data/com.termux/files/usr/lib/python3.10/asyncio/base_events.py\", line 641, in run_until_complete\n    return future.result()\n  File \"/storage/emulated/0/t.py\", line 7, in main\n    await client.send_file('me', ['bargin-day.mp4', 'Oyasumi-r8ppxy_000.mp4'])\n  File \"/data/data/com.termux/files/usr/lib/python3.10/site-packages/telethon/client/uploads.py\", line 362, in send_file\n    result += await self._send_album(\n  File \"/data/data/com.termux/files/usr/lib/python3.10/site-packages/telethon/client/uploads.py\", line 480, in _send_album\n    result = await self(request)\n  File \"/data/data/com.termux/files/usr/lib/python3.10/site-packages/telethon/client/users.py\", line 30, in __call__\n    return await self._call(self._sender, request, ordered=ordered)\n  File \"/data/data/com.termux/files/usr/lib/python3.10/site-packages/telethon/client/users.py\", line 84, in _call\n    result = await future\ntelethon.errors.rpcerrorlist.MediaEmptyError: The provided media object is invalid or the current account may not be able to send it (such as games as users) (caused by SendMultiMediaRequest)\n```\n", "reactions": {"url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/3232/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/3232/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/3231", "repository_url": "https://api.github.com/repos/LonamiWebs/Telethon", "labels_url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/3231/labels{/name}", "comments_url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/3231/comments", "events_url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/3231/events", "html_url": "https://github.com/LonamiWebs/Telethon/issues/3231", "id": 1071024397, "node_id": "I_kwDOA_jcjc4_1okN", "number": 3231, "title": "TelegramClient.iter_participants errors when encounters a ChannelParticipantLeft", "user": {"login": "Manuel1510", "id": 46545785, "node_id": "MDQ6VXNlcjQ2NTQ1Nzg1", "avatar_url": "https://avatars.githubusercontent.com/u/46545785?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Manuel1510", "html_url": "https://github.com/Manuel1510", "followers_url": "https://api.github.com/users/Manuel1510/followers", "following_url": "https://api.github.com/users/Manuel1510/following{/other_user}", "gists_url": "https://api.github.com/users/Manuel1510/gists{/gist_id}", "starred_url": "https://api.github.com/users/Manuel1510/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Manuel1510/subscriptions", "organizations_url": "https://api.github.com/users/Manuel1510/orgs", "repos_url": "https://api.github.com/users/Manuel1510/repos", "events_url": "https://api.github.com/users/Manuel1510/events{/privacy}", "received_events_url": "https://api.github.com/users/Manuel1510/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 3761009918, "node_id": "LA_kwDOA_jcjc7gLHT-", "url": "https://api.github.com/repos/LonamiWebs/Telethon/labels/bug", "name": "bug", "color": "D93F0B", "default": true, "description": "This bug affects actual users and should be fixed (medium priority)"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2021-12-03T22:39:12Z", "updated_at": "2022-09-20T16:12:54Z", "closed_at": "2022-09-20T16:12:40Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "**Checklist**\r\n* [x] The error is in the library's code, and not in my own.\r\n* [x] I have searched for this issue before posting it and there isn't a duplicate.\r\n* [x] I ran `pip install -U https://github.com/LonamiWebs/Telethon/archive/master.zip` and triggered the bug in the latest version.\r\n\r\n**Code that causes the issue**\r\n```python\r\nfor user in client.iter_participants(some_channel, filter=ChannelParticipantsBanned(\"\")):\r\n    pass\r\n```\r\n\r\n**Traceback**\r\n```\r\n    for user in client.iter_participants(some_channel, filter=ChannelParticipantsBanned(\"\")):\r\n  File \"/home/manuel/.local/lib/python3.7/site-packages/telethon/requestiter.py\", line 74, in __anext__\r\n    if await self._load_next_chunk():\r\n  File \"/home/manuel/.local/lib/python3.7/site-packages/telethon/client/chats.py\", line 242, in _load_next_chunk\r\n    user_id = participant.user_id\r\nAttributeError: 'ChannelParticipantLeft' object has no attribute 'user_id'\r\n\r\n```\r\n", "reactions": {"url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/3231/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/3231/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/3224", "repository_url": "https://api.github.com/repos/LonamiWebs/Telethon", "labels_url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/3224/labels{/name}", "comments_url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/3224/comments", "events_url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/3224/events", "html_url": "https://github.com/LonamiWebs/Telethon/issues/3224", "id": 1069465633, "node_id": "I_kwDOA_jcjc4_vsAh", "number": 3224, "title": "\"TypeError: expected string or bytes-like object!\" while handling CallbackQuery", "user": {"login": "New-dev0", "id": 69723581, "node_id": "MDQ6VXNlcjY5NzIzNTgx", "avatar_url": "https://avatars.githubusercontent.com/u/69723581?v=4", "gravatar_id": "", "url": "https://api.github.com/users/New-dev0", "html_url": "https://github.com/New-dev0", "followers_url": "https://api.github.com/users/New-dev0/followers", "following_url": "https://api.github.com/users/New-dev0/following{/other_user}", "gists_url": "https://api.github.com/users/New-dev0/gists{/gist_id}", "starred_url": "https://api.github.com/users/New-dev0/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/New-dev0/subscriptions", "organizations_url": "https://api.github.com/users/New-dev0/orgs", "repos_url": "https://api.github.com/users/New-dev0/repos", "events_url": "https://api.github.com/users/New-dev0/events{/privacy}", "received_events_url": "https://api.github.com/users/New-dev0/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 3761009918, "node_id": "LA_kwDOA_jcjc7gLHT-", "url": "https://api.github.com/repos/LonamiWebs/Telethon/labels/bug", "name": "bug", "color": "D93F0B", "default": true, "description": "This bug affects actual users and should be fixed (medium priority)"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2021-12-02T11:59:43Z", "updated_at": "2023-04-06T12:44:38Z", "closed_at": "2023-04-06T12:44:38Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "**Checklist**\r\n* [x] The error is in the library's code, and not in my own.\r\n* [x] I have searched for this issue before posting it and there isn't a duplicate.\r\n* [x] I ran `pip install -U https://github.com/LonamiWebs/Telethon/archive/master.zip` and triggered the bug in the latest version.\r\n\r\n**Steps to Reproduce**\r\n1. Handle Any callback event with `events.CallbackQuery`.\r\n2. Send any Game via same bot.\r\n3. Press Callback Button and *Error*\r\n\r\n**Traceback**\r\n```\r\nFile \"/home/name/.local/lib/python3.9/site-packages/telethon/client/updates.py\", line 460, in _dispatch_update\r\n    filter = builder.filter(event)\r\n  File \"/home/name/.local/lib/python3.9/site-packages/telethon/events/callbackquery.py\", line 115, in filter\r\n    event.data_match = event.pattern_match = self.match(event.query.data)\r\nTypeError: expected string or bytes-like object\r\n```\r\n\r\n**Misc**\r\n- Telegram send Callback Query same as Game's ShortName if it's Game.\r\n- I believe, events.CallbackQuery should allow using Game ShortName in pattern/data.\r\n- And When Game Callback button is pressed, `data` of that query turns `None` and `game_short_name` is Present.\r\n- I tried doing that [this way](https://github.com/New-dev0/Telethon/commit/71212a37847402a31306422208f7b36d29b5039e#diff-aee3e69c5219d46f1efacd7f80be4d0b3f04c458521a6647bdb4bbfb2f68f994)\r\n", "reactions": {"url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/3224/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/3224/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/3194", "repository_url": "https://api.github.com/repos/LonamiWebs/Telethon", "labels_url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/3194/labels{/name}", "comments_url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/3194/comments", "events_url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/3194/events", "html_url": "https://github.com/LonamiWebs/Telethon/issues/3194", "id": 1034504843, "node_id": "I_kwDOA_jcjc49qUqL", "number": 3194, "title": "Device name causes logging out", "user": {"login": "gittethis", "id": 20640651, "node_id": "MDQ6VXNlcjIwNjQwNjUx", "avatar_url": "https://avatars.githubusercontent.com/u/20640651?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gittethis", "html_url": "https://github.com/gittethis", "followers_url": "https://api.github.com/users/gittethis/followers", "following_url": "https://api.github.com/users/gittethis/following{/other_user}", "gists_url": "https://api.github.com/users/gittethis/gists{/gist_id}", "starred_url": "https://api.github.com/users/gittethis/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gittethis/subscriptions", "organizations_url": "https://api.github.com/users/gittethis/orgs", "repos_url": "https://api.github.com/users/gittethis/repos", "events_url": "https://api.github.com/users/gittethis/events{/privacy}", "received_events_url": "https://api.github.com/users/gittethis/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 3761009918, "node_id": "LA_kwDOA_jcjc7gLHT-", "url": "https://api.github.com/repos/LonamiWebs/Telethon/labels/bug", "name": "bug", "color": "D93F0B", "default": true, "description": "This bug affects actual users and should be fixed (medium priority)"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2021-10-24T20:16:11Z", "updated_at": "2023-04-06T14:23:46Z", "closed_at": "2023-04-06T12:34:01Z", "author_association": "NONE", "active_lock_reason": null, "body": "As mentioned on `https://stackoverflow.com/questions/69538477/telethon-gets-disauthenticated-on-armv6-but-not-armv7/69692138#69692138`, if the kernel uname of the device does not have a dash between the version and the custom string (when re-compiled), the full kernel name is sent upon connection and after initial successful login all the account's already connected devices are getting logged out after about 120 seconds (plus/minus 60 seconds).\r\n\r\nto confirm, after altering the following `telegrambaseclient.py` line (on an affected system with kernelname in form of **5.6.14CUSTOMNAME,** without a dash between **version** and **CUSTOMNAME):**\r\n\r\n`default_system_version = re.sub(r'-.+','',system.release)`\r\nwith\r\n`default_system_version = '5.6.14'`\r\n\r\nthe clients are not disconnected/deauthenticated anymore.\r\n", "reactions": {"url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/3194/reactions", "total_count": 1, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/3194/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/3190", "repository_url": "https://api.github.com/repos/LonamiWebs/Telethon", "labels_url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/3190/labels{/name}", "comments_url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/3190/comments", "events_url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/3190/events", "html_url": "https://github.com/LonamiWebs/Telethon/issues/3190", "id": 1032867819, "node_id": "I_kwDOA_jcjc49kE_r", "number": 3190, "title": "Progress callback or whole send_file method is broken", "user": {"login": "ruslanzelinskyy", "id": 35612895, "node_id": "MDQ6VXNlcjM1NjEyODk1", "avatar_url": "https://avatars.githubusercontent.com/u/35612895?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ruslanzelinskyy", "html_url": "https://github.com/ruslanzelinskyy", "followers_url": "https://api.github.com/users/ruslanzelinskyy/followers", "following_url": "https://api.github.com/users/ruslanzelinskyy/following{/other_user}", "gists_url": "https://api.github.com/users/ruslanzelinskyy/gists{/gist_id}", "starred_url": "https://api.github.com/users/ruslanzelinskyy/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ruslanzelinskyy/subscriptions", "organizations_url": "https://api.github.com/users/ruslanzelinskyy/orgs", "repos_url": "https://api.github.com/users/ruslanzelinskyy/repos", "events_url": "https://api.github.com/users/ruslanzelinskyy/events{/privacy}", "received_events_url": "https://api.github.com/users/ruslanzelinskyy/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 3761009918, "node_id": "LA_kwDOA_jcjc7gLHT-", "url": "https://api.github.com/repos/LonamiWebs/Telethon/labels/bug", "name": "bug", "color": "D93F0B", "default": true, "description": "This bug affects actual users and should be fixed (medium priority)"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/LonamiWebs/Telethon/milestones/1", "html_url": "https://github.com/LonamiWebs/Telethon/milestone/1", "labels_url": "https://api.github.com/repos/LonamiWebs/Telethon/milestones/1/labels", "id": 4410764, "node_id": "MDk6TWlsZXN0b25lNDQxMDc2NA==", "number": 1, "title": "v2", "description": "", "creator": {"login": "Lonami", "id": 6297805, "node_id": "MDQ6VXNlcjYyOTc4MDU=", "avatar_url": "https://avatars.githubusercontent.com/u/6297805?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Lonami", "html_url": "https://github.com/Lonami", "followers_url": "https://api.github.com/users/Lonami/followers", "following_url": "https://api.github.com/users/Lonami/following{/other_user}", "gists_url": "https://api.github.com/users/Lonami/gists{/gist_id}", "starred_url": "https://api.github.com/users/Lonami/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Lonami/subscriptions", "organizations_url": "https://api.github.com/users/Lonami/orgs", "repos_url": "https://api.github.com/users/Lonami/repos", "events_url": "https://api.github.com/users/Lonami/events{/privacy}", "received_events_url": "https://api.github.com/users/Lonami/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 10, "state": "open", "created_at": "2019-06-15T19:05:24Z", "updated_at": "2023-04-06T12:49:29Z", "due_on": null, "closed_at": null}, "comments": 6, "created_at": "2021-10-21T19:29:47Z", "updated_at": "2023-03-28T16:17:24Z", "closed_at": "2023-03-28T16:17:23Z", "author_association": "NONE", "active_lock_reason": null, "body": "**Checklist**\r\n* [x] The error is in the library's code, and not in my own.\r\n* [x] I have searched for this issue before posting it and there isn't a duplicate.\r\n* [x] I ran `pip install -U https://github.com/LonamiWebs/Telethon/archive/master.zip` and triggered the bug in the latest version.\r\n\r\n**Code that causes the issue**\r\n```python\r\nbar = progressbar.ProgressBar(maxval=0).start()\r\ndef prog(current, total):\r\n    bar = progressbar.ProgressBar(maxval=total).start()\r\n    bar.update(current)\r\n   \r\n#broken:\r\nclient.send_file(channel, file=inputFileName, caption=remoteFileName, progress_callback=prog)\r\n#fine:\r\nclient.download_media(message, file=outputFileName, progress_callback=prog)\r\n```\r\n\r\n**Traceback**\r\n```\r\nfreezes, no output\r\n\r\n```\r\n", "reactions": {"url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/3190/reactions", "total_count": 3, "+1": 3, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/3190/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/3185", "repository_url": "https://api.github.com/repos/LonamiWebs/Telethon", "labels_url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/3185/labels{/name}", "comments_url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/3185/comments", "events_url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/3185/events", "html_url": "https://github.com/LonamiWebs/Telethon/issues/3185", "id": 1028916776, "node_id": "I_kwDOA_jcjc49VAYo", "number": 3185, "title": "PhoneCodeExpiredError when trying to re-request code after first one expired", "user": {"login": "tulir", "id": 4224639, "node_id": "MDQ6VXNlcjQyMjQ2Mzk=", "avatar_url": "https://avatars.githubusercontent.com/u/4224639?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tulir", "html_url": "https://github.com/tulir", "followers_url": "https://api.github.com/users/tulir/followers", "following_url": "https://api.github.com/users/tulir/following{/other_user}", "gists_url": "https://api.github.com/users/tulir/gists{/gist_id}", "starred_url": "https://api.github.com/users/tulir/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tulir/subscriptions", "organizations_url": "https://api.github.com/users/tulir/orgs", "repos_url": "https://api.github.com/users/tulir/repos", "events_url": "https://api.github.com/users/tulir/events{/privacy}", "received_events_url": "https://api.github.com/users/tulir/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 3761009918, "node_id": "LA_kwDOA_jcjc7gLHT-", "url": "https://api.github.com/repos/LonamiWebs/Telethon/labels/bug", "name": "bug", "color": "D93F0B", "default": true, "description": "This bug affects actual users and should be fixed (medium priority)"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/LonamiWebs/Telethon/milestones/1", "html_url": "https://github.com/LonamiWebs/Telethon/milestone/1", "labels_url": "https://api.github.com/repos/LonamiWebs/Telethon/milestones/1/labels", "id": 4410764, "node_id": "MDk6TWlsZXN0b25lNDQxMDc2NA==", "number": 1, "title": "v2", "description": "", "creator": {"login": "Lonami", "id": 6297805, "node_id": "MDQ6VXNlcjYyOTc4MDU=", "avatar_url": "https://avatars.githubusercontent.com/u/6297805?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Lonami", "html_url": "https://github.com/Lonami", "followers_url": "https://api.github.com/users/Lonami/followers", "following_url": "https://api.github.com/users/Lonami/following{/other_user}", "gists_url": "https://api.github.com/users/Lonami/gists{/gist_id}", "starred_url": "https://api.github.com/users/Lonami/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Lonami/subscriptions", "organizations_url": "https://api.github.com/users/Lonami/orgs", "repos_url": "https://api.github.com/users/Lonami/repos", "events_url": "https://api.github.com/users/Lonami/events{/privacy}", "received_events_url": "https://api.github.com/users/Lonami/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 10, "state": "open", "created_at": "2019-06-15T19:05:24Z", "updated_at": "2023-04-06T12:49:29Z", "due_on": null, "closed_at": null}, "comments": 1, "created_at": "2021-10-18T10:14:06Z", "updated_at": "2023-04-06T13:16:16Z", "closed_at": "2023-04-06T12:49:29Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "If you request a code, forget about it for some time, then try to request a new code with the same `TelegramClient`, it fails with `PhoneCodeExpiredError`:\r\n\r\n```\r\nTraceback (most recent call last):\r\n  File \"/usr/lib/python3.9/site-packages/mautrix_telegram/web/common/auth_api.py\", line 81, in post_login_phone\r\n    await user.client.sign_in(phone.strip())\r\n  File \"/usr/lib/python3.9/site-packages/telethon/client/auth.py\", line 342, in sign_in\r\n    return await self.send_code_request(phone)\r\n  File \"/usr/lib/python3.9/site-packages/telethon/client/auth.py\", line 532, in send_code_request\r\n    result = await self(\r\n  File \"/usr/lib/python3.9/site-packages/telethon/client/users.py\", line 30, in __call__\r\n    return await self._call(self._sender, request, ordered=ordered)\r\n  File \"/usr/lib/python3.9/site-packages/telethon/client/users.py\", line 79, in _call\r\n    result = await future\r\ntelethon.errors.rpcerrorlist.PhoneCodeExpiredError: The confirmation code has expired (caused by ResendCodeRequest)\r\n```\r\n\r\n(note the \"caused by ResendCodeRequest\"). This should probably be caught and handled internally because the `_phone_code_hash` cache is also internal.", "reactions": {"url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/3185/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/3185/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1717", "repository_url": "https://api.github.com/repos/LonamiWebs/Telethon", "labels_url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1717/labels{/name}", "comments_url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1717/comments", "events_url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1717/events", "html_url": "https://github.com/LonamiWebs/Telethon/issues/1717", "id": 821003743, "node_id": "MDU6SXNzdWU4MjEwMDM3NDM=", "number": 1717, "title": "How do I send a set of videos?", "user": {"login": "hwmbing11", "id": 63941939, "node_id": "MDQ6VXNlcjYzOTQxOTM5", "avatar_url": "https://avatars.githubusercontent.com/u/63941939?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hwmbing11", "html_url": "https://github.com/hwmbing11", "followers_url": "https://api.github.com/users/hwmbing11/followers", "following_url": "https://api.github.com/users/hwmbing11/following{/other_user}", "gists_url": "https://api.github.com/users/hwmbing11/gists{/gist_id}", "starred_url": "https://api.github.com/users/hwmbing11/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hwmbing11/subscriptions", "organizations_url": "https://api.github.com/users/hwmbing11/orgs", "repos_url": "https://api.github.com/users/hwmbing11/repos", "events_url": "https://api.github.com/users/hwmbing11/events{/privacy}", "received_events_url": "https://api.github.com/users/hwmbing11/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 3761009918, "node_id": "LA_kwDOA_jcjc7gLHT-", "url": "https://api.github.com/repos/LonamiWebs/Telethon/labels/bug", "name": "bug", "color": "D93F0B", "default": true, "description": "This bug affects actual users and should be fixed (medium priority)"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2021-03-03T11:05:44Z", "updated_at": "2023-04-06T12:43:13Z", "closed_at": "2023-04-06T12:43:13Z", "author_association": "NONE", "active_lock_reason": null, "body": "Sending a group of pictures can use a list, so how to send a group of videos? We also need to deal with video thumbnails and other issues", "reactions": {"url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1717/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1717/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1540", "repository_url": "https://api.github.com/repos/LonamiWebs/Telethon", "labels_url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1540/labels{/name}", "comments_url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1540/comments", "events_url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1540/events", "html_url": "https://github.com/LonamiWebs/Telethon/issues/1540", "id": 688192645, "node_id": "MDU6SXNzdWU2ODgxOTI2NDU=", "number": 1540, "title": "LoadAsyncGraphRequest error - RPCError 400: GRAPH_INVALID_RELOAD", "user": {"login": "z0ng33", "id": 47711838, "node_id": "MDQ6VXNlcjQ3NzExODM4", "avatar_url": "https://avatars.githubusercontent.com/u/47711838?v=4", "gravatar_id": "", "url": "https://api.github.com/users/z0ng33", "html_url": "https://github.com/z0ng33", "followers_url": "https://api.github.com/users/z0ng33/followers", "following_url": "https://api.github.com/users/z0ng33/following{/other_user}", "gists_url": "https://api.github.com/users/z0ng33/gists{/gist_id}", "starred_url": "https://api.github.com/users/z0ng33/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/z0ng33/subscriptions", "organizations_url": "https://api.github.com/users/z0ng33/orgs", "repos_url": "https://api.github.com/users/z0ng33/repos", "events_url": "https://api.github.com/users/z0ng33/events{/privacy}", "received_events_url": "https://api.github.com/users/z0ng33/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 3761009918, "node_id": "LA_kwDOA_jcjc7gLHT-", "url": "https://api.github.com/repos/LonamiWebs/Telethon/labels/bug", "name": "bug", "color": "D93F0B", "default": true, "description": "This bug affects actual users and should be fixed (medium priority)"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 10, "created_at": "2020-08-28T16:22:19Z", "updated_at": "2023-04-06T12:42:50Z", "closed_at": "2023-04-06T12:42:50Z", "author_association": "NONE", "active_lock_reason": null, "body": "I've upgraded telethon from 1.14.0 to 1.16.4 and got this error. In previous version everything was fine.\r\n\r\n**Code that causes the issue**\r\n```python\r\nimport asyncio\r\n\r\nfrom .utils import get_tg_client_using_redis\r\nfrom telethon.tl.functions.stats import LoadAsyncGraphRequest\r\n\r\n\r\nasync def main():\r\n    client = await get_tg_client_using_redis(here_some_internal_user_id)\r\n    stats = await client.get_stats('@neo_dandy')\r\n    # stats is fine\r\n    languages_graph = await client(LoadAsyncGraphRequest(stats.languages_graph.token))\r\n    print(languages_graph)\r\n\r\n\r\nasyncio.run(main())\r\n```\r\n\r\n**Traceback**\r\n```\r\nTraceback (most recent call last):\r\n  File \"test.py\", line 16, in <module>\r\n    asyncio.run(main())\r\n  File \"/usr/lib/python3.8/asyncio/runners.py\", line 43, in run\r\n    return loop.run_until_complete(main)\r\n  File \"/usr/lib/python3.8/asyncio/base_events.py\", line 616, in run_until_complete\r\n    return future.result()\r\n  File \"test.py\", line 12, in main\r\n    languages_graph = await client(LoadAsyncGraphRequest(token))\r\n  File \"/home/user/git/project/.venv/lib/python3.8/site-packages/telethon/client/users.py\", line 30, in __call__\r\n    return await self._call(self._sender, request, ordered=ordered)\r\n  File \"/home/user/git/project/.venv/lib/python3.8/site-packages/telethon/client/users.py\", line 77, in _call\r\n    result = await future\r\ntelethon.errors.rpcbaseerrors.BadRequestError: RPCError 400: GRAPH_INVALID_RELOAD (caused by LoadAsyncGraphRequest)\r\n```\r\n", "reactions": {"url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1540/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1540/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1408", "repository_url": "https://api.github.com/repos/LonamiWebs/Telethon", "labels_url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1408/labels{/name}", "comments_url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1408/comments", "events_url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1408/events", "html_url": "https://github.com/LonamiWebs/Telethon/issues/1408", "id": 583494925, "node_id": "MDU6SXNzdWU1ODM0OTQ5MjU=", "number": 1408, "title": "error when tring to use client.send_file for multiple photos", "user": {"login": "ram-sh", "id": 5938042, "node_id": "MDQ6VXNlcjU5MzgwNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/5938042?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ram-sh", "html_url": "https://github.com/ram-sh", "followers_url": "https://api.github.com/users/ram-sh/followers", "following_url": "https://api.github.com/users/ram-sh/following{/other_user}", "gists_url": "https://api.github.com/users/ram-sh/gists{/gist_id}", "starred_url": "https://api.github.com/users/ram-sh/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ram-sh/subscriptions", "organizations_url": "https://api.github.com/users/ram-sh/orgs", "repos_url": "https://api.github.com/users/ram-sh/repos", "events_url": "https://api.github.com/users/ram-sh/events{/privacy}", "received_events_url": "https://api.github.com/users/ram-sh/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 3761009918, "node_id": "LA_kwDOA_jcjc7gLHT-", "url": "https://api.github.com/repos/LonamiWebs/Telethon/labels/bug", "name": "bug", "color": "D93F0B", "default": true, "description": "This bug affects actual users and should be fixed (medium priority)"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 7, "created_at": "2020-03-18T06:19:38Z", "updated_at": "2023-04-06T12:39:25Z", "closed_at": "2023-04-06T12:39:24Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hello,\r\n\r\nUsing Python 3.7.5 and Telethon 1.11.3.\r\n\r\nfollowing the example from [Telethon documentation](https://docs.telethon.dev/en/latest/modules/client.html) \r\n\r\n```\r\n# Albums\r\nawait client.send_file(chat, [\r\n    '/my/photos/holiday1.jpg',\r\n    '/my/photos/holiday2.jpg',\r\n    '/my/drawings/portrait.png'\r\n])\r\n```\r\n\r\nwhen trying to send more than one photo using client.send_file i get \"Media invalid (caused by SendMultiMediaRequest)\" error.\r\n\r\nwhen sending a single photo there is no error:\r\n`await client.send_file(contact, 'http://s3.amazonaws.com/tn1.app/0.png')`\r\n\r\nthe error occurs when trying to send more than one photo:\r\n`await client.send_file(contact, ['http://s3.amazonaws.com/tn1.app/0.png', 'http://s3.amazonaws.com/tn1.app/2.png'])`\r\n\r\nthanks much in advance!\r\nRS", "reactions": {"url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1408/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1408/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1398", "repository_url": "https://api.github.com/repos/LonamiWebs/Telethon", "labels_url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1398/labels{/name}", "comments_url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1398/comments", "events_url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1398/events", "html_url": "https://github.com/LonamiWebs/Telethon/issues/1398", "id": 576325288, "node_id": "MDU6SXNzdWU1NzYzMjUyODg=", "number": 1398, "title": "Editing of messages shared via bot inline queries, breaks for some users", "user": {"login": "Nukesor", "id": 3322822, "node_id": "MDQ6VXNlcjMzMjI4MjI=", "avatar_url": "https://avatars.githubusercontent.com/u/3322822?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Nukesor", "html_url": "https://github.com/Nukesor", "followers_url": "https://api.github.com/users/Nukesor/followers", "following_url": "https://api.github.com/users/Nukesor/following{/other_user}", "gists_url": "https://api.github.com/users/Nukesor/gists{/gist_id}", "starred_url": "https://api.github.com/users/Nukesor/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Nukesor/subscriptions", "organizations_url": "https://api.github.com/users/Nukesor/orgs", "repos_url": "https://api.github.com/users/Nukesor/repos", "events_url": "https://api.github.com/users/Nukesor/events{/privacy}", "received_events_url": "https://api.github.com/users/Nukesor/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 3761009918, "node_id": "LA_kwDOA_jcjc7gLHT-", "url": "https://api.github.com/repos/LonamiWebs/Telethon/labels/bug", "name": "bug", "color": "D93F0B", "default": true, "description": "This bug affects actual users and should be fixed (medium priority)"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 14, "created_at": "2020-03-05T15:13:30Z", "updated_at": "2023-04-06T12:41:56Z", "closed_at": "2023-04-06T12:41:56Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Hey @Lonami\r\nI reported the issue yesterday in your chat, and created a minimal example and steps on how to reproduce the issue.\r\n\r\n**Checklist**\r\n* [x] The error is in the library's code, and not in my own.\r\n* [x] I have searched for this issue before posting it and there isn't a duplicate.\r\n* [x] I ran `pip install -U https://github.com/LonamiWebs/Telethon/archive/master.zip` and triggered the bug in the latest version.\r\n\r\n**Code that causes the issue**\r\nI wrote a minimal example that can be found over here:\r\nhttps://github.com/nukesor/debug\r\n\r\n1. Clone\r\n2. `poetry install`\r\n3. `poetry run python main.py`\r\n4. Insert your bot credentials api_id/api_hash into `debug.toml`\r\n5. `poetry run python main.py`\r\n6. Send a inline query. Be aware, it doesn't fail for every user.\r\n7. Feel free to request a message from @dasMerlon (that's also her telegram handle). She agreed on being contacted by you and it fails consistently for her.\r\n\r\n**Traceback**\r\n```\r\nTraceback (most recent call last):\r\n  File \"/home/nuke/repos/ultimate_pollbot/pollbot/helper/update.py\", line 139, in update_reference\r\n    await client.edit_message(\r\n  File \"/home/nuke/.cache/pypoetry/virtualenvs/ultimate-pollbot-Jkq_D4LD-py3.8/lib/python3.8/site-packages/telethon/client/messages.py\", line 1028, in edit_message\r\n    return await self(functions.messages.EditInlineBotMessageRequest(\r\n  File \"/home/nuke/.cache/pypoetry/virtualenvs/ultimate-pollbot-Jkq_D4LD-py3.8/lib/python3.8/site-packages/telethon/client/users.py\", line 74, in __call__\r\n    result = await future\r\ntelethon.errors.rpcerrorlist.MessageIdInvalidError: The specified message ID is invalid or you can't do that operation on such message (caused by EditInlineBotMessageRequest)\r\nThe specified message ID is invalid or you can't do that operation on such message (caused by EditInlineBotMessageRequest)\r\n```\r\n\r\nThe original message from your support chat:\r\n\r\nOver the course of the last two weeks, I migrated @ultimate_pollbot from PTB to Telethon and I'm happy to announce that the rewrite went live today.\r\n\r\nHowever, I'm getting some very weird Telegram exceptions in production.\r\nThe bot is running as a Telegram Bot. Telethon version is 1.11.3, Python 3.8\r\n\r\nFor some users (there's no apparent pattern), editing of messages shared via inline query fail with this error:\r\n```\r\nThe specified message ID is invalid or you can't do that operation on such message (caused by EditInlineBotMessageRequest)\r\n```\r\nAfter some trial and error, I also found that directly editing via Inline Button CallbackEvents from such messages via event.edit('some text') fail with the exact same error.\r\n\r\nI investigated events from those messages in all affected event handlers, and id/dc_id/access_hash are the same in every handler/event.\r\n\r\nThe error occurs in chats, private chats and supergroups. But there is absolutely no pattern.\r\nFor some people it doesn't work at all (deterministically), for some it only works in certain chats, for some it works all the time (for instance me).\r\n\r\nThe inline query message is an article.", "reactions": {"url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1398/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/LonamiWebs/Telethon/issues/1398/timeline", "performed_via_github_app": null, "state_reason": "completed"}]