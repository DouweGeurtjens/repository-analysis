[{"url": "https://api.github.com/repos/Yelp/elastalert/issues/2098", "repository_url": "https://api.github.com/repos/Yelp/elastalert", "labels_url": "https://api.github.com/repos/Yelp/elastalert/issues/2098/labels{/name}", "comments_url": "https://api.github.com/repos/Yelp/elastalert/issues/2098/comments", "events_url": "https://api.github.com/repos/Yelp/elastalert/issues/2098/events", "html_url": "https://github.com/Yelp/elastalert/issues/2098", "id": 404206823, "node_id": "MDU6SXNzdWU0MDQyMDY4MjM=", "number": 2098, "title": "Use realert error!!!", "user": {"login": "Hello-Linux", "id": 17851645, "node_id": "MDQ6VXNlcjE3ODUxNjQ1", "avatar_url": "https://avatars.githubusercontent.com/u/17851645?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Hello-Linux", "html_url": "https://github.com/Hello-Linux", "followers_url": "https://api.github.com/users/Hello-Linux/followers", "following_url": "https://api.github.com/users/Hello-Linux/following{/other_user}", "gists_url": "https://api.github.com/users/Hello-Linux/gists{/gist_id}", "starred_url": "https://api.github.com/users/Hello-Linux/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Hello-Linux/subscriptions", "organizations_url": "https://api.github.com/users/Hello-Linux/orgs", "repos_url": "https://api.github.com/users/Hello-Linux/repos", "events_url": "https://api.github.com/users/Hello-Linux/events{/privacy}", "received_events_url": "https://api.github.com/users/Hello-Linux/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 151009109, "node_id": "MDU6TGFiZWwxNTEwMDkxMDk=", "url": "https://api.github.com/repos/Yelp/elastalert/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2019-01-29T09:54:06Z", "updated_at": "2019-02-20T23:59:35Z", "closed_at": "2019-02-20T23:59:35Z", "author_association": "NONE", "active_lock_reason": null, "body": "To Reduce the frequency of repeated alarms,I set config in config.yaml\r\n```\r\nquery_key:\r\n  - name\r\n\r\nrealert:\r\n  minutes: 10\r\n\r\nexponential_realert:\r\n  hours: 1\r\n```\r\nbut when I send alert message the error show:\r\n\"ERROR:root:Traceback (most recent call last):\r\n  File \"/scripts/elastalert/elastalert/elastalert.py\", line 1169, in run_all_rules\r\n    num_matches = self.run_rule(rule, endtime, self.starttime)\r\n  File \"/scripts/elastalert/elastalert/elastalert.py\", line 895, in run_rule\r\n    next_alert, exponent = self.next_alert_time(rule, silence_cache_key, ts_now())\r\n  File \"/scripts/elastalert/elastalert/elastalert.py\", line 1904, in next_alert_time\r\n    if wait >= rule['exponential_realert']:\r\nTypeError: can't compare datetime.timedelta to dict\"        why??????????????When I remove these configurations, the alarm is successful", "reactions": {"url": "https://api.github.com/repos/Yelp/elastalert/issues/2098/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/Yelp/elastalert/issues/2098/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/Yelp/elastalert/issues/1797", "repository_url": "https://api.github.com/repos/Yelp/elastalert", "labels_url": "https://api.github.com/repos/Yelp/elastalert/issues/1797/labels{/name}", "comments_url": "https://api.github.com/repos/Yelp/elastalert/issues/1797/comments", "events_url": "https://api.github.com/repos/Yelp/elastalert/issues/1797/events", "html_url": "https://github.com/Yelp/elastalert/issues/1797", "id": 340681868, "node_id": "MDU6SXNzdWUzNDA2ODE4Njg=", "number": 1797, "title": "Failed to parse date field when using test_rule.py (but test seems to run successfully)", "user": {"login": "of13tch", "id": 9503696, "node_id": "MDQ6VXNlcjk1MDM2OTY=", "avatar_url": "https://avatars.githubusercontent.com/u/9503696?v=4", "gravatar_id": "", "url": "https://api.github.com/users/of13tch", "html_url": "https://github.com/of13tch", "followers_url": "https://api.github.com/users/of13tch/followers", "following_url": "https://api.github.com/users/of13tch/following{/other_user}", "gists_url": "https://api.github.com/users/of13tch/gists{/gist_id}", "starred_url": "https://api.github.com/users/of13tch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/of13tch/subscriptions", "organizations_url": "https://api.github.com/users/of13tch/orgs", "repos_url": "https://api.github.com/users/of13tch/repos", "events_url": "https://api.github.com/users/of13tch/events{/privacy}", "received_events_url": "https://api.github.com/users/of13tch/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 151009109, "node_id": "MDU6TGFiZWwxNTEwMDkxMDk=", "url": "https://api.github.com/repos/Yelp/elastalert/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2018-07-12T15:12:56Z", "updated_at": "2018-07-31T23:53:27Z", "closed_at": "2018-07-31T23:53:27Z", "author_association": "NONE", "active_lock_reason": null, "body": "I have a simple test rule running:\r\n\r\n$ python -m \"elastalert.test_rule\" --config config.yaml example_rules/example_new_term.yaml\r\nSuccessfully loaded Example new term rule                                                                                                                      \r\n                                                                                                                                                               \r\nWARNING:elasticsearch:GET https://master1:9200/myindex*/_search?ignore_unavailable=true&size=1 [status:400 request:0.122s]             \r\nError running your filter:                                                                                                                                     \r\nRequestError(400, u'search_phase_execution_exception', {u'status': 400, u'error': {u'failed_shards': [{u'node': u'4_DR3SjuQEisL9HQ7K1Rpw', u'index': u'myindex_index_2018.07.11', u'reason': {u'caused_by': {u'reason': u'Parse failure at index [0] of [2018-07-11T15:01:04.886403Z]', u'type': u'illegal_argument_exce\r\nption'}, u'reason': u'failed to parse date field [2018-07-11T15:01:04.886403Z] with format [epoch_millis]', u'type': u'parse_exception'}, u'shard': 0}], u'root\r\n_cause': [{u'reason': u'failed to parse date field [2018-07-11T15:01:04.886403Z] with format [epoch_millis]', u'type': u'parse_exception'}], u'grouped': True, \r\nu'reason': u'all shards failed', u'phase': u'query', u'type': u'search_phase_execution_exception'}})                                                           \r\nINFO:elastalert:Found no values for host                                                                                                                       \r\nINFO:elastalert:Note: In debug mode, alerts will be logged to console but NOT actually sent.                                                                   \r\n                To send them but remain verbose, use --verbose instead.                                                                                        \r\nINFO:elastalert:Queried rule Example new term rule from 2018-07-11 15:01 GMT to 2018-07-11 16:01 GMT: 0 / 0 hits                                               \r\nINFO:elastalert:Queried rule Example new term rule from 2018-07-11 16:01 GMT to 2018-07-11 17:01 GMT: 1648 / 1648 hits                                         \r\nINFO:elastalert:Queried rule Example new term rule from 2018-07-11 17:01 GMT to 2018-07-11 18:01 GMT: 7997 / 7997 hits                                         \r\nINFO:elastalert:Queried rule Example new term rule from 2018-07-11 18:01 GMT to 2018-07-11 19:01 GMT: 2078 / 2078 hits                                         \r\nINFO:elastalert:Queried rule Example new term rule from 2018-07-11 19:01 GMT to 2018-07-11 20:01 GMT: 1168 / 1168 hits                                         \r\nINFO:elastalert:Queried rule Example new term rule from 2018-07-11 20:01 GMT to 2018-07-11 21:01 GMT: 866 / 866 hits                                           \r\nINFO:elastalert:Queried rule Example new term rule from 2018-07-11 21:01 GMT to 2018-07-11 22:01 GMT: 1102 / 1102 hits                                         \r\nINFO:elastalert:Queried rule Example new term rule from 2018-07-11 22:01 GMT to 2018-07-11 23:01 GMT: 2203 / 2203 hits                                         \r\nINFO:elastalert:Queried rule Example new term rule from 2018-07-11 23:01 GMT to 2018-07-12 00:01 GMT: 2131 / 2131 hits                                         \r\nINFO:elastalert:Queried rule Example new term rule from 2018-07-12 00:01 GMT to 2018-07-12 01:01 GMT: 1675 / 1675 hits                     \r\n....\r\nelastalert_status - {'hits': 341922, 'matches': 1067, '@timestamp': datetime.datetime(2018, 7, 12, 15, 8, 31, 970500, tzinfo=tzutc()), 'rule_name': 'Example ne\r\nw term rule', 'starttime': datetime.datetime(2018, 7, 11, 15, 1, 56, 409366, tzinfo=tzutc()), 'endtime': datetime.datetime(2018, 7, 12, 15, 1, 56, 409366, tzin\r\nfo=tzutc()), 'time_taken': 395.5170259475708}                                                                                                                  \r\n\r\nIt does seem that the test rule runs successfully, and triggers the alerts as expected. However, every time I run it (and I've tried a few variants), they all trigger an ERROR to start with parsing a timestamp.\r\n\r\nThe timestamp field in the data is 'timestamp' and the format is unix_ms.\r\n\r\nI'm not sure where/why it's finding a timestamp of [2018-07-11T15:01:04.886403Z] - this doesn't make much sense to me.\r\n\r\nCould somebody offer me a bit of guidance in troubleshooting steps? Or if anybody knows offhand what may be triggering this - even better.\r\n\r\nThanks,\r\nOllie", "reactions": {"url": "https://api.github.com/repos/Yelp/elastalert/issues/1797/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/Yelp/elastalert/issues/1797/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/Yelp/elastalert/issues/1431", "repository_url": "https://api.github.com/repos/Yelp/elastalert", "labels_url": "https://api.github.com/repos/Yelp/elastalert/issues/1431/labels{/name}", "comments_url": "https://api.github.com/repos/Yelp/elastalert/issues/1431/comments", "events_url": "https://api.github.com/repos/Yelp/elastalert/issues/1431/events", "html_url": "https://github.com/Yelp/elastalert/issues/1431", "id": 276094776, "node_id": "MDU6SXNzdWUyNzYwOTQ3NzY=", "number": 1431, "title": "Error on Testing New aggregation Rule", "user": {"login": "Chadders13", "id": 1788635, "node_id": "MDQ6VXNlcjE3ODg2MzU=", "avatar_url": "https://avatars.githubusercontent.com/u/1788635?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Chadders13", "html_url": "https://github.com/Chadders13", "followers_url": "https://api.github.com/users/Chadders13/followers", "following_url": "https://api.github.com/users/Chadders13/following{/other_user}", "gists_url": "https://api.github.com/users/Chadders13/gists{/gist_id}", "starred_url": "https://api.github.com/users/Chadders13/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Chadders13/subscriptions", "organizations_url": "https://api.github.com/users/Chadders13/orgs", "repos_url": "https://api.github.com/users/Chadders13/repos", "events_url": "https://api.github.com/users/Chadders13/events{/privacy}", "received_events_url": "https://api.github.com/users/Chadders13/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 151009109, "node_id": "MDU6TGFiZWwxNTEwMDkxMDk=", "url": "https://api.github.com/repos/Yelp/elastalert/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "Qmando", "id": 3246990, "node_id": "MDQ6VXNlcjMyNDY5OTA=", "avatar_url": "https://avatars.githubusercontent.com/u/3246990?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Qmando", "html_url": "https://github.com/Qmando", "followers_url": "https://api.github.com/users/Qmando/followers", "following_url": "https://api.github.com/users/Qmando/following{/other_user}", "gists_url": "https://api.github.com/users/Qmando/gists{/gist_id}", "starred_url": "https://api.github.com/users/Qmando/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Qmando/subscriptions", "organizations_url": "https://api.github.com/users/Qmando/orgs", "repos_url": "https://api.github.com/users/Qmando/repos", "events_url": "https://api.github.com/users/Qmando/events{/privacy}", "received_events_url": "https://api.github.com/users/Qmando/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "Qmando", "id": 3246990, "node_id": "MDQ6VXNlcjMyNDY5OTA=", "avatar_url": "https://avatars.githubusercontent.com/u/3246990?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Qmando", "html_url": "https://github.com/Qmando", "followers_url": "https://api.github.com/users/Qmando/followers", "following_url": "https://api.github.com/users/Qmando/following{/other_user}", "gists_url": "https://api.github.com/users/Qmando/gists{/gist_id}", "starred_url": "https://api.github.com/users/Qmando/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Qmando/subscriptions", "organizations_url": "https://api.github.com/users/Qmando/orgs", "repos_url": "https://api.github.com/users/Qmando/repos", "events_url": "https://api.github.com/users/Qmando/events{/privacy}", "received_events_url": "https://api.github.com/users/Qmando/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 6, "created_at": "2017-11-22T14:50:36Z", "updated_at": "2018-04-23T18:21:22Z", "closed_at": "2018-03-27T20:19:42Z", "author_association": "NONE", "active_lock_reason": null, "body": "Try to create an aggregation rule to show a heartbeat and keep getting an error on testing the rule. I'm hoping its something simple that I have missed.\r\n\r\nBelow is the error i'm getting:\r\n\r\n```Traceback (most recent call last):\r\n  File \"/usr/local/bin/elastalert-test-rule\", line 11, in <module>\r\n    load_entry_point('elastalert==0.1.21', 'console_scripts', 'elastalert-test-rule')()\r\n  File \"/usr/local/lib/python2.7/dist-packages/elastalert-0.1.21-py2.7.egg/elastalert/test_rule.py\", line 378, in main\r\n    test_instance.run_rule_test()\r\n  File \"/usr/local/lib/python2.7/dist-packages/elastalert-0.1.21-py2.7.egg/elastalert/test_rule.py\", line 373, in run_rule_test\r\n    self.run_elastalert(rule_yaml, conf, args)\r\n  File \"/usr/local/lib/python2.7/dist-packages/elastalert-0.1.21-py2.7.egg/elastalert/test_rule.py\", line 269, in run_elastalert\r\n    client.run_rule(rule, endtime, starttime)\r\n  File \"/usr/local/lib/python2.7/dist-packages/elastalert-0.1.21-py2.7.egg/elastalert/elastalert.py\", line 839, in run_rule\r\n    self.add_aggregated_alert(match, rule)\r\n  File \"/usr/local/lib/python2.7/dist-packages/elastalert-0.1.21-py2.7.egg/elastalert/elastalert.py\", line 1595, in add_aggregated_alert\r\n    alert_body = self.get_alert_body(match, rule, False, alert_time)\r\n  File \"/usr/local/lib/python2.7/dist-packages/elastalert-0.1.21-py2.7.egg/elastalert/elastalert.py\", line 1351, in get_alert_body\r\n    'alert_info': rule['alert'][0].get_info(),\r\nAttributeError: 'str' object has no attribute 'get_info'\r\n```\r\nI am running this command \r\n\r\n` elastalert-test-rule /home/*******/elastalert/elastalert/my-rule-set/heartbeat.yaml`\r\n\r\n\r\nThis is my rules code (Currently i'm just doing a count of selected users over an hour to test it):\r\n\r\n``` \r\nimport dateutil.parser\r\n\r\nfrom elastalert.ruletypes import RuleType\r\n\r\nfrom elastalert.util import ts_to_dt\r\n\r\nclass HeartBeatRule(RuleType):\r\n\r\n    required_options = set(['usernames'])\r\n\r\n    def add_data(self, data):\r\n        count = 0\r\n        matchItem = {}\r\n\r\n        for username in self.rules['usernames']:\r\n            matchItem[username] = 0\r\n\r\n        for document in data:\r\n            matchUsername = document['username']\r\n            if matchUsername in self.rules['usernames']:\r\n                loginTime = document['errorTime'].time()\r\n                matchItem[matchUsername] = matchItem[matchUsername] + 1\r\n\r\n        for key in matchItem.keys():\r\n            item = {\"username\":key,\"count\":matchItem[key]}\r\n            self.add_match(item)\r\n\r\n    def get_match_str(self,match):\r\n        #return \"%s they are very trying(%s) back again \" % (match['username'],match['count'])\r\n        return \"Yo it's here\"\r\n\r\n    def garbage_collect(self, timestamp):\r\n        pass\r\n\r\n```\r\n\r\nand finally this is my config :\r\n\r\n```\r\nname: \"Heart beat\"\r\n\r\ntype: \"elastalert_modules.heartbeatRules.HeartBeatRule\"\r\n\r\nindex: error-*\r\n\r\ntimestamp_field : errorTime\r\n\r\nusernames:\r\n- hacker101\r\n- cat1997\r\n- dog1665\r\n\r\ninculde:\r\n- username\r\n\r\naggregation:\r\n  schedule: '00 0/1 * * MON-FRI'\r\n\r\naggregate_by_match_time: True\r\n\r\naggregation_key: 'username'\r\n\r\nsummary_table_fields:\r\n- count\r\n- username\r\n\r\nalert:\r\n- \"slack\"\r\n\r\nslack_webhook_url : \"**************************\"\r\nslack_msg_color : good\r\n\r\n```\r\n#### not induced the sensitive web hook information for obvious reasons \ud83d\ude48 ", "reactions": {"url": "https://api.github.com/repos/Yelp/elastalert/issues/1431/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/Yelp/elastalert/issues/1431/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/Yelp/elastalert/issues/1404", "repository_url": "https://api.github.com/repos/Yelp/elastalert", "labels_url": "https://api.github.com/repos/Yelp/elastalert/issues/1404/labels{/name}", "comments_url": "https://api.github.com/repos/Yelp/elastalert/issues/1404/comments", "events_url": "https://api.github.com/repos/Yelp/elastalert/issues/1404/events", "html_url": "https://github.com/Yelp/elastalert/issues/1404", "id": 269006840, "node_id": "MDU6SXNzdWUyNjkwMDY4NDA=", "number": 1404, "title": "send notify_email without auth", "user": {"login": "Cas-pian", "id": 5690854, "node_id": "MDQ6VXNlcjU2OTA4NTQ=", "avatar_url": "https://avatars.githubusercontent.com/u/5690854?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Cas-pian", "html_url": "https://github.com/Cas-pian", "followers_url": "https://api.github.com/users/Cas-pian/followers", "following_url": "https://api.github.com/users/Cas-pian/following{/other_user}", "gists_url": "https://api.github.com/users/Cas-pian/gists{/gist_id}", "starred_url": "https://api.github.com/users/Cas-pian/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Cas-pian/subscriptions", "organizations_url": "https://api.github.com/users/Cas-pian/orgs", "repos_url": "https://api.github.com/users/Cas-pian/repos", "events_url": "https://api.github.com/users/Cas-pian/events{/privacy}", "received_events_url": "https://api.github.com/users/Cas-pian/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 151009109, "node_id": "MDU6TGFiZWwxNTEwMDkxMDk=", "url": "https://api.github.com/repos/Yelp/elastalert/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}, {"id": 151009111, "node_id": "MDU6TGFiZWwxNTEwMDkxMTE=", "url": "https://api.github.com/repos/Yelp/elastalert/labels/enhancement", "name": "enhancement", "color": "84b6eb", "default": true, "description": null}, {"id": 207568205, "node_id": "MDU6TGFiZWwyMDc1NjgyMDU=", "url": "https://api.github.com/repos/Yelp/elastalert/labels/in%20progress", "name": "in progress", "color": "ededed", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2017-10-27T07:00:23Z", "updated_at": "2020-03-09T12:28:42Z", "closed_at": "2018-08-20T03:30:04Z", "author_association": "NONE", "active_lock_reason": null, "body": "The notify_email is used to send notification to the admin when there's some error occured in programme runnning, but I found there's no auth config, `smtp_auth_file` seems to be loaded only in rule. How to set login info for this notify_email?", "reactions": {"url": "https://api.github.com/repos/Yelp/elastalert/issues/1404/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/Yelp/elastalert/issues/1404/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/Yelp/elastalert/issues/1374", "repository_url": "https://api.github.com/repos/Yelp/elastalert", "labels_url": "https://api.github.com/repos/Yelp/elastalert/issues/1374/labels{/name}", "comments_url": "https://api.github.com/repos/Yelp/elastalert/issues/1374/comments", "events_url": "https://api.github.com/repos/Yelp/elastalert/issues/1374/events", "html_url": "https://github.com/Yelp/elastalert/issues/1374", "id": 263373410, "node_id": "MDU6SXNzdWUyNjMzNzM0MTA=", "number": 1374, "title": "Cardinality rule type and top_count_keys ", "user": {"login": "Trustys", "id": 27950345, "node_id": "MDQ6VXNlcjI3OTUwMzQ1", "avatar_url": "https://avatars.githubusercontent.com/u/27950345?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Trustys", "html_url": "https://github.com/Trustys", "followers_url": "https://api.github.com/users/Trustys/followers", "following_url": "https://api.github.com/users/Trustys/following{/other_user}", "gists_url": "https://api.github.com/users/Trustys/gists{/gist_id}", "starred_url": "https://api.github.com/users/Trustys/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Trustys/subscriptions", "organizations_url": "https://api.github.com/users/Trustys/orgs", "repos_url": "https://api.github.com/users/Trustys/repos", "events_url": "https://api.github.com/users/Trustys/events{/privacy}", "received_events_url": "https://api.github.com/users/Trustys/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 151009109, "node_id": "MDU6TGFiZWwxNTEwMDkxMDk=", "url": "https://api.github.com/repos/Yelp/elastalert/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2017-10-06T08:39:39Z", "updated_at": "2018-07-11T21:06:03Z", "closed_at": "2018-07-11T21:06:03Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hello everybody,\r\n\r\nI try to use top_count_keys in a cardinality rule type but I can't succeed to make it works : \r\n\r\n```\r\nname: \"##PortScan\"\r\n\r\nindex: firewall_*\r\ntype: cardinality\r\n\r\nquery_key: [event_ip,src_ip,dst_port]\r\ncardinality_field: dst_ip\r\nmax_cardinality: 25\r\n\r\nbuffer_time:\r\n    minutes: 5\r\n\r\ntimeframe:\r\n    minutes: 5\r\n\r\nfilter:\r\n- query:\r\n    query_string:\r\n        query: 'event_device:Firewall AND dst_port:(1 OR 5 OR 7 OR 18 OR 20 OR 21 OR 22 OR 23)\r\n\r\ntop_count_number: 10\r\n\r\nraw_count_keys: false\r\n\r\ninclude:\r\n  - src_ip\r\n  - source\r\n  - dst_ip\r\n  - dst_port\r\n  - event_ip\r\n\r\ntop_count_keys: [\"dst_ip\"]\r\n\r\nalert_text_type: exclude_fields\r\n```\r\nAlerts is working but no top_count_keys in alert output:\r\n`dst_ip: No events found.`\r\n\r\nI tried with raw_count_keys: false disabled but same issue : \r\n`dst_ip.raw: No events found.`\r\n\r\nDoes anybody else has the same issue ?\r\n\r\n ", "reactions": {"url": "https://api.github.com/repos/Yelp/elastalert/issues/1374/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/Yelp/elastalert/issues/1374/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/Yelp/elastalert/issues/1312", "repository_url": "https://api.github.com/repos/Yelp/elastalert", "labels_url": "https://api.github.com/repos/Yelp/elastalert/issues/1312/labels{/name}", "comments_url": "https://api.github.com/repos/Yelp/elastalert/issues/1312/comments", "events_url": "https://api.github.com/repos/Yelp/elastalert/issues/1312/events", "html_url": "https://github.com/Yelp/elastalert/issues/1312", "id": 254548160, "node_id": "MDU6SXNzdWUyNTQ1NDgxNjA=", "number": 1312, "title": "help for command parameter", "user": {"login": "val31", "id": 27497553, "node_id": "MDQ6VXNlcjI3NDk3NTUz", "avatar_url": "https://avatars.githubusercontent.com/u/27497553?v=4", "gravatar_id": "", "url": "https://api.github.com/users/val31", "html_url": "https://github.com/val31", "followers_url": "https://api.github.com/users/val31/followers", "following_url": "https://api.github.com/users/val31/following{/other_user}", "gists_url": "https://api.github.com/users/val31/gists{/gist_id}", "starred_url": "https://api.github.com/users/val31/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/val31/subscriptions", "organizations_url": "https://api.github.com/users/val31/orgs", "repos_url": "https://api.github.com/users/val31/repos", "events_url": "https://api.github.com/users/val31/events{/privacy}", "received_events_url": "https://api.github.com/users/val31/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 151009109, "node_id": "MDU6TGFiZWwxNTEwMDkxMDk=", "url": "https://api.github.com/repos/Yelp/elastalert/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 7, "created_at": "2017-09-01T06:29:20Z", "updated_at": "2017-09-13T11:57:02Z", "closed_at": "2017-09-13T11:57:02Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi\r\n\r\nI can pass parameter using _include: [\"src.ip\", \"equipment.name\"]_ in an email alert but I didn't succeed with a command alert.\r\nthis works : \r\n_command: [\"alerte\", \"%(src)s\"]_\r\nbut this not : \r\n_command: [\"alerte\", \"%(src.ip)s\"]_\r\nI try several format with { or [ ...\r\n\r\nAn idea ?\r\nThanks\r\n", "reactions": {"url": "https://api.github.com/repos/Yelp/elastalert/issues/1312/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/Yelp/elastalert/issues/1312/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/Yelp/elastalert/issues/1256", "repository_url": "https://api.github.com/repos/Yelp/elastalert", "labels_url": "https://api.github.com/repos/Yelp/elastalert/issues/1256/labels{/name}", "comments_url": "https://api.github.com/repos/Yelp/elastalert/issues/1256/comments", "events_url": "https://api.github.com/repos/Yelp/elastalert/issues/1256/events", "html_url": "https://github.com/Yelp/elastalert/issues/1256", "id": 247178425, "node_id": "MDU6SXNzdWUyNDcxNzg0MjU=", "number": 1256, "title": "Elastalert starts up and then sleeps ", "user": {"login": "zorro1992", "id": 18573424, "node_id": "MDQ6VXNlcjE4NTczNDI0", "avatar_url": "https://avatars.githubusercontent.com/u/18573424?v=4", "gravatar_id": "", "url": "https://api.github.com/users/zorro1992", "html_url": "https://github.com/zorro1992", "followers_url": "https://api.github.com/users/zorro1992/followers", "following_url": "https://api.github.com/users/zorro1992/following{/other_user}", "gists_url": "https://api.github.com/users/zorro1992/gists{/gist_id}", "starred_url": "https://api.github.com/users/zorro1992/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/zorro1992/subscriptions", "organizations_url": "https://api.github.com/users/zorro1992/orgs", "repos_url": "https://api.github.com/users/zorro1992/repos", "events_url": "https://api.github.com/users/zorro1992/events{/privacy}", "received_events_url": "https://api.github.com/users/zorro1992/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 151009109, "node_id": "MDU6TGFiZWwxNTEwMDkxMDk=", "url": "https://api.github.com/repos/Yelp/elastalert/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}, {"id": 151009112, "node_id": "MDU6TGFiZWwxNTEwMDkxMTI=", "url": "https://api.github.com/repos/Yelp/elastalert/labels/help%20wanted", "name": "help wanted", "color": "159818", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 9, "created_at": "2017-08-01T19:39:19Z", "updated_at": "2017-08-07T17:01:28Z", "closed_at": "2017-08-07T17:01:27Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hey I am new to elastalert. I have my error.yaml which when testes rules well and gives me the error list but when I run the command `elastalert --verbose --rule /root/elastalert/rules/error.yaml` I keep on getting the below output.\r\n\r\n```\r\nINFO:elastalert:Starting up\r\nINFO:elastalert:Sleeping for 59.991074 seconds\r\nINFO:elastalert:Sleeping for 59.985646 seconds\r\n```\r\nMy error.yml file.\r\n```\r\nCould anyone please help me . \r\n\r\n# Alert when the rate of events exceeds a threshold\r\n \r\n# (Required)\r\n# Rule name, must be unique\r\nname: ERROR Log\r\n \r\n# (Required)\r\n# Type of alert.\r\n# the frequency rule type alerts when num_events events occur with timeframe time\r\n# type: frequency\r\ntype: any\r\nrealert: \r\n  minutes: 0 \r\n# (Required)\r\n# Index to search, wildcard supported\r\nindex: logstash-*\r\n#timestamp_field: \"#timestamp\" \r\nuse_local_time: true\r\n# use_strftime_index: true\r\n \r\n# (Required, frequency specific)\r\n# Alert when this many documents matching the query occur within a timeframe\r\nnum_events: 1\r\n \r\n# (Required, frequency specific)\r\n# num_events must occur within this amount of time to trigger an alert\r\ntimeframe:\r\n    minutes: 15\r\n \r\n# (Required)\r\n# A list of Elasticsearch filters used for find events\r\n# These filters are joined with AND and nested in a filtered query\r\n# For more info: http://www.elasticsearch.org/guide/en/elasticsearch/reference/current/query-dsl.html\r\nfilter:\r\n#- term:\r\n     #message: \"thrown\"\r\n- query:\r\n    query_string:\r\n        query: \"thrown\"\r\n\r\nalert:\r\n- \"slack\"\r\nslack:\r\nslack_webhook_url: \"xxxxx\"\r\n#slack_channel_override: '#dsmonitoring'\r\n\r\n#realert:\r\n  #minutes: 0\r\n\r\n\r\n```\r\n\r\nDebug has only the below informations \r\n```\r\n\r\ncurl -H 'Content-Type: application/json' -XGET 'http://localhost:9200/elastalert_status/elastalert/_search?pretty&size=1000' -d '{\r\n  \"query\": {\r\n    \"bool\": {\r\n      \"filter\": {\r\n        \"range\": {\r\n          \"alert_time\": {\r\n            \"from\": \"2017-07-30T19:24:57.768771Z\",\r\n            \"to\": \"2017-08-01T19:24:57.768857Z\"\r\n          }\r\n        }\r\n      },\r\n      \"must\": {\r\n        \"query_string\": {\r\n          \"query\": \"!_exists_:aggregate_id AND alert_sent:false\"\r\n        }\r\n      }\r\n    }\r\n  },\r\n  \"sort\": {\r\n    \"alert_time\": {\r\n      \"order\": \"asc\"\r\n    }\r\n  }\r\n}'\r\n```\r\n\r\nNot sure why this error is . Thanks in advance ", "reactions": {"url": "https://api.github.com/repos/Yelp/elastalert/issues/1256/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/Yelp/elastalert/issues/1256/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/Yelp/elastalert/issues/1232", "repository_url": "https://api.github.com/repos/Yelp/elastalert", "labels_url": "https://api.github.com/repos/Yelp/elastalert/issues/1232/labels{/name}", "comments_url": "https://api.github.com/repos/Yelp/elastalert/issues/1232/comments", "events_url": "https://api.github.com/repos/Yelp/elastalert/issues/1232/events", "html_url": "https://github.com/Yelp/elastalert/issues/1232", "id": 243703971, "node_id": "MDU6SXNzdWUyNDM3MDM5NzE=", "number": 1232, "title": "datetime parse error", "user": {"login": "hongjn", "id": 1472877, "node_id": "MDQ6VXNlcjE0NzI4Nzc=", "avatar_url": "https://avatars.githubusercontent.com/u/1472877?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hongjn", "html_url": "https://github.com/hongjn", "followers_url": "https://api.github.com/users/hongjn/followers", "following_url": "https://api.github.com/users/hongjn/following{/other_user}", "gists_url": "https://api.github.com/users/hongjn/gists{/gist_id}", "starred_url": "https://api.github.com/users/hongjn/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hongjn/subscriptions", "organizations_url": "https://api.github.com/users/hongjn/orgs", "repos_url": "https://api.github.com/users/hongjn/repos", "events_url": "https://api.github.com/users/hongjn/events{/privacy}", "received_events_url": "https://api.github.com/users/hongjn/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 151009109, "node_id": "MDU6TGFiZWwxNTEwMDkxMDk=", "url": "https://api.github.com/repos/Yelp/elastalert/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2017-07-18T12:48:03Z", "updated_at": "2018-10-11T20:43:10Z", "closed_at": "2018-10-11T20:43:10Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "rule:\r\n```\r\nes_host: eshost\r\nes_port: esport\r\nname: Example new term rule\r\ntype: new_term\r\nindex: myindex\r\ntimestamp_field: postDate\r\nfields:\r\n - \"name\"\r\nterms_window_size:\r\n  days: 7\r\nfilter:\r\n- term:\r\n    _type: \"mytype\"\r\nalert:\r\n- \"command\"\r\ncommand: [\"/bin/echo find sth.\"]\r\n```\r\npostDate: datetype, its format: epoch_millis.\r\nrun in docker, build from [elastalert-docker](https://github.com/krizsan/elastalert-docker)\r\n\r\nerror msg:\r\n```\r\nFile \"/usr/lib/python2.7/site-packages/elasticsearch-2.4.1-py2.7.egg/elasticsearch/connection/base.py\", line 114, in _raise_error\r\nelastalert.util.EAException: Error initializing rule Example new term rule: Error searching for existing terms: RequestError(400, u'search_phase_execution_exception', {u'status': 400, u'error': {u'failed_shards': [{u'node': u'KbQ8A-QIQ2CoBuBQS1YtuQ', u'index': u'citic3', u'reason': {u'caused_by': {u'reason': u'Invalid format: \"2017-07-11T12:35:42.225162Z\"', u'type': u'illegal_argument_exception'}, u'reason': u'failed to parse date field [2017-07-11T12:35:42.225162Z] with format [epoch_millis]', u'type': u'parse_exception'}, u'shard': 0}], u'root_cause': [{u'reason': u'failed to parse date field [2017-07-11T12:35:42.225162Z] with format [epoch_millis]', u'type': u'parse_exception'}], u'grouped': True, u'reason': u'all shards failed', u'phase': u'query', u'type': u'search_phase_execution_exception'}})\r\n\r\n```\r\n", "reactions": {"url": "https://api.github.com/repos/Yelp/elastalert/issues/1232/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/Yelp/elastalert/issues/1232/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/Yelp/elastalert/issues/1158", "repository_url": "https://api.github.com/repos/Yelp/elastalert", "labels_url": "https://api.github.com/repos/Yelp/elastalert/issues/1158/labels{/name}", "comments_url": "https://api.github.com/repos/Yelp/elastalert/issues/1158/comments", "events_url": "https://api.github.com/repos/Yelp/elastalert/issues/1158/events", "html_url": "https://github.com/Yelp/elastalert/issues/1158", "id": 234650744, "node_id": "MDU6SXNzdWUyMzQ2NTA3NDQ=", "number": 1158, "title": "Stuck in recursive run_query when using scroll", "user": {"login": "skiptomyliu", "id": 3451399, "node_id": "MDQ6VXNlcjM0NTEzOTk=", "avatar_url": "https://avatars.githubusercontent.com/u/3451399?v=4", "gravatar_id": "", "url": "https://api.github.com/users/skiptomyliu", "html_url": "https://github.com/skiptomyliu", "followers_url": "https://api.github.com/users/skiptomyliu/followers", "following_url": "https://api.github.com/users/skiptomyliu/following{/other_user}", "gists_url": "https://api.github.com/users/skiptomyliu/gists{/gist_id}", "starred_url": "https://api.github.com/users/skiptomyliu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/skiptomyliu/subscriptions", "organizations_url": "https://api.github.com/users/skiptomyliu/orgs", "repos_url": "https://api.github.com/users/skiptomyliu/repos", "events_url": "https://api.github.com/users/skiptomyliu/events{/privacy}", "received_events_url": "https://api.github.com/users/skiptomyliu/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 151009109, "node_id": "MDU6TGFiZWwxNTEwMDkxMDk=", "url": "https://api.github.com/repos/Yelp/elastalert/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}, {"id": 151009112, "node_id": "MDU6TGFiZWwxNTEwMDkxMTI=", "url": "https://api.github.com/repos/Yelp/elastalert/labels/help%20wanted", "name": "help wanted", "color": "159818", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2017-06-08T20:44:30Z", "updated_at": "2022-01-03T01:33:06Z", "closed_at": "2022-01-03T01:33:06Z", "author_association": "NONE", "active_lock_reason": null, "body": "Attempting to troubleshoot an issue that I'm seeing.  I'm using a frequency rule that will alert where it appears that self.num_hits never reaches self.total_hits  so it continues to call itself (def run_query).  It keeps running even after reaching the end timeframe because it expected to eventually gather all of self.total_hits.\r\n\r\n`INFO:elastalert:Queried rule Bruteforce Login Detected from 2017-06-08 11:53 PDT to 2017-06-08 12:18 PDT: 31453 / 0 hits (scrolling..)`\r\n\r\nI can of course modify the check to break out if it reaches the end of the timeframe, but I'm curious if there's any suggestions to troubleshoot as to why my self.num_hits never reaches and equals self.total_hits making it recurse forever.  ", "reactions": {"url": "https://api.github.com/repos/Yelp/elastalert/issues/1158/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/Yelp/elastalert/issues/1158/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/Yelp/elastalert/issues/152", "repository_url": "https://api.github.com/repos/Yelp/elastalert", "labels_url": "https://api.github.com/repos/Yelp/elastalert/issues/152/labels{/name}", "comments_url": "https://api.github.com/repos/Yelp/elastalert/issues/152/comments", "events_url": "https://api.github.com/repos/Yelp/elastalert/issues/152/events", "html_url": "https://github.com/Yelp/elastalert/issues/152", "id": 91000740, "node_id": "MDU6SXNzdWU5MTAwMDc0MA==", "number": 152, "title": "elastalert-test-rule doesn't execute", "user": {"login": "ivanlei", "id": 1002798, "node_id": "MDQ6VXNlcjEwMDI3OTg=", "avatar_url": "https://avatars.githubusercontent.com/u/1002798?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ivanlei", "html_url": "https://github.com/ivanlei", "followers_url": "https://api.github.com/users/ivanlei/followers", "following_url": "https://api.github.com/users/ivanlei/following{/other_user}", "gists_url": "https://api.github.com/users/ivanlei/gists{/gist_id}", "starred_url": "https://api.github.com/users/ivanlei/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ivanlei/subscriptions", "organizations_url": "https://api.github.com/users/ivanlei/orgs", "repos_url": "https://api.github.com/users/ivanlei/repos", "events_url": "https://api.github.com/users/ivanlei/events{/privacy}", "received_events_url": "https://api.github.com/users/ivanlei/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 151009109, "node_id": "MDU6TGFiZWwxNTEwMDkxMDk=", "url": "https://api.github.com/repos/Yelp/elastalert/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "Qmando", "id": 3246990, "node_id": "MDQ6VXNlcjMyNDY5OTA=", "avatar_url": "https://avatars.githubusercontent.com/u/3246990?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Qmando", "html_url": "https://github.com/Qmando", "followers_url": "https://api.github.com/users/Qmando/followers", "following_url": "https://api.github.com/users/Qmando/following{/other_user}", "gists_url": "https://api.github.com/users/Qmando/gists{/gist_id}", "starred_url": "https://api.github.com/users/Qmando/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Qmando/subscriptions", "organizations_url": "https://api.github.com/users/Qmando/orgs", "repos_url": "https://api.github.com/users/Qmando/repos", "events_url": "https://api.github.com/users/Qmando/events{/privacy}", "received_events_url": "https://api.github.com/users/Qmando/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "Qmando", "id": 3246990, "node_id": "MDQ6VXNlcjMyNDY5OTA=", "avatar_url": "https://avatars.githubusercontent.com/u/3246990?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Qmando", "html_url": "https://github.com/Qmando", "followers_url": "https://api.github.com/users/Qmando/followers", "following_url": "https://api.github.com/users/Qmando/following{/other_user}", "gists_url": "https://api.github.com/users/Qmando/gists{/gist_id}", "starred_url": "https://api.github.com/users/Qmando/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Qmando/subscriptions", "organizations_url": "https://api.github.com/users/Qmando/orgs", "repos_url": "https://api.github.com/users/Qmando/repos", "events_url": "https://api.github.com/users/Qmando/events{/privacy}", "received_events_url": "https://api.github.com/users/Qmando/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2015-06-25T15:45:14Z", "updated_at": "2015-06-25T18:27:19Z", "closed_at": "2015-06-25T18:27:18Z", "author_association": "NONE", "active_lock_reason": null, "body": "In https://github.com/Yelp/elastalert/commit/cb6ec7e0102a277ec174cbc5eca3ee1f1df9565f#diff-9f784a7a1fce57242bcc18a56c91b89b `elastalert.test_rule.run_rule_test` turned into `elastalert.test_rule. MockElastAlerter.run_rule_test` but the console script in `setup.py` was not updated. \n\nSo now it doesn't work :cry: \n", "reactions": {"url": "https://api.github.com/repos/Yelp/elastalert/issues/152/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/Yelp/elastalert/issues/152/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/Yelp/elastalert/issues/73", "repository_url": "https://api.github.com/repos/Yelp/elastalert", "labels_url": "https://api.github.com/repos/Yelp/elastalert/issues/73/labels{/name}", "comments_url": "https://api.github.com/repos/Yelp/elastalert/issues/73/comments", "events_url": "https://api.github.com/repos/Yelp/elastalert/issues/73/events", "html_url": "https://github.com/Yelp/elastalert/issues/73", "id": 70182913, "node_id": "MDU6SXNzdWU3MDE4MjkxMw==", "number": 73, "title": "top_count_number sometimes doesn't work", "user": {"login": "Qmando", "id": 3246990, "node_id": "MDQ6VXNlcjMyNDY5OTA=", "avatar_url": "https://avatars.githubusercontent.com/u/3246990?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Qmando", "html_url": "https://github.com/Qmando", "followers_url": "https://api.github.com/users/Qmando/followers", "following_url": "https://api.github.com/users/Qmando/following{/other_user}", "gists_url": "https://api.github.com/users/Qmando/gists{/gist_id}", "starred_url": "https://api.github.com/users/Qmando/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Qmando/subscriptions", "organizations_url": "https://api.github.com/users/Qmando/orgs", "repos_url": "https://api.github.com/users/Qmando/repos", "events_url": "https://api.github.com/users/Qmando/events{/privacy}", "received_events_url": "https://api.github.com/users/Qmando/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 151009109, "node_id": "MDU6TGFiZWwxNTEwMDkxMDk=", "url": "https://api.github.com/repos/Yelp/elastalert/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "Qmando", "id": 3246990, "node_id": "MDQ6VXNlcjMyNDY5OTA=", "avatar_url": "https://avatars.githubusercontent.com/u/3246990?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Qmando", "html_url": "https://github.com/Qmando", "followers_url": "https://api.github.com/users/Qmando/followers", "following_url": "https://api.github.com/users/Qmando/following{/other_user}", "gists_url": "https://api.github.com/users/Qmando/gists{/gist_id}", "starred_url": "https://api.github.com/users/Qmando/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Qmando/subscriptions", "organizations_url": "https://api.github.com/users/Qmando/orgs", "repos_url": "https://api.github.com/users/Qmando/repos", "events_url": "https://api.github.com/users/Qmando/events{/privacy}", "received_events_url": "https://api.github.com/users/Qmando/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "Qmando", "id": 3246990, "node_id": "MDQ6VXNlcjMyNDY5OTA=", "avatar_url": "https://avatars.githubusercontent.com/u/3246990?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Qmando", "html_url": "https://github.com/Qmando", "followers_url": "https://api.github.com/users/Qmando/followers", "following_url": "https://api.github.com/users/Qmando/following{/other_user}", "gists_url": "https://api.github.com/users/Qmando/gists{/gist_id}", "starred_url": "https://api.github.com/users/Qmando/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Qmando/subscriptions", "organizations_url": "https://api.github.com/users/Qmando/orgs", "repos_url": "https://api.github.com/users/Qmando/repos", "events_url": "https://api.github.com/users/Qmando/events{/privacy}", "received_events_url": "https://api.github.com/users/Qmando/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2015-04-22T17:12:18Z", "updated_at": "2015-05-11T19:09:06Z", "closed_at": "2015-05-11T19:09:06Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "get_top_counts will call get_terms_hits without passing a size limit, and so get_terms_hits will use \"terms_size\" or it's default of 5\n", "reactions": {"url": "https://api.github.com/repos/Yelp/elastalert/issues/73/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/Yelp/elastalert/issues/73/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/Yelp/elastalert/issues/66", "repository_url": "https://api.github.com/repos/Yelp/elastalert", "labels_url": "https://api.github.com/repos/Yelp/elastalert/issues/66/labels{/name}", "comments_url": "https://api.github.com/repos/Yelp/elastalert/issues/66/comments", "events_url": "https://api.github.com/repos/Yelp/elastalert/issues/66/events", "html_url": "https://github.com/Yelp/elastalert/issues/66", "id": 68980753, "node_id": "MDU6SXNzdWU2ODk4MDc1Mw==", "number": 66, "title": "Don't comment on closed JIRA tickets", "user": {"login": "Qmando", "id": 3246990, "node_id": "MDQ6VXNlcjMyNDY5OTA=", "avatar_url": "https://avatars.githubusercontent.com/u/3246990?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Qmando", "html_url": "https://github.com/Qmando", "followers_url": "https://api.github.com/users/Qmando/followers", "following_url": "https://api.github.com/users/Qmando/following{/other_user}", "gists_url": "https://api.github.com/users/Qmando/gists{/gist_id}", "starred_url": "https://api.github.com/users/Qmando/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Qmando/subscriptions", "organizations_url": "https://api.github.com/users/Qmando/orgs", "repos_url": "https://api.github.com/users/Qmando/repos", "events_url": "https://api.github.com/users/Qmando/events{/privacy}", "received_events_url": "https://api.github.com/users/Qmando/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 151009109, "node_id": "MDU6TGFiZWwxNTEwMDkxMDk=", "url": "https://api.github.com/repos/Yelp/elastalert/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2015-04-16T18:17:45Z", "updated_at": "2015-07-21T02:03:15Z", "closed_at": "2015-07-21T02:03:14Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "ElastAlert should open a new ticket instead of commenting on a ticket that has already been closed.\n", "reactions": {"url": "https://api.github.com/repos/Yelp/elastalert/issues/66/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/Yelp/elastalert/issues/66/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/Yelp/elastalert/issues/37", "repository_url": "https://api.github.com/repos/Yelp/elastalert", "labels_url": "https://api.github.com/repos/Yelp/elastalert/issues/37/labels{/name}", "comments_url": "https://api.github.com/repos/Yelp/elastalert/issues/37/comments", "events_url": "https://api.github.com/repos/Yelp/elastalert/issues/37/events", "html_url": "https://github.com/Yelp/elastalert/issues/37", "id": 64397638, "node_id": "MDU6SXNzdWU2NDM5NzYzOA==", "number": 37, "title": "ElastAlert crashes if value of query_key is not a string", "user": {"login": "Qmando", "id": 3246990, "node_id": "MDQ6VXNlcjMyNDY5OTA=", "avatar_url": "https://avatars.githubusercontent.com/u/3246990?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Qmando", "html_url": "https://github.com/Qmando", "followers_url": "https://api.github.com/users/Qmando/followers", "following_url": "https://api.github.com/users/Qmando/following{/other_user}", "gists_url": "https://api.github.com/users/Qmando/gists{/gist_id}", "starred_url": "https://api.github.com/users/Qmando/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Qmando/subscriptions", "organizations_url": "https://api.github.com/users/Qmando/orgs", "repos_url": "https://api.github.com/users/Qmando/repos", "events_url": "https://api.github.com/users/Qmando/events{/privacy}", "received_events_url": "https://api.github.com/users/Qmando/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 151009109, "node_id": "MDU6TGFiZWwxNTEwMDkxMDk=", "url": "https://api.github.com/repos/Yelp/elastalert/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "Qmando", "id": 3246990, "node_id": "MDQ6VXNlcjMyNDY5OTA=", "avatar_url": "https://avatars.githubusercontent.com/u/3246990?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Qmando", "html_url": "https://github.com/Qmando", "followers_url": "https://api.github.com/users/Qmando/followers", "following_url": "https://api.github.com/users/Qmando/following{/other_user}", "gists_url": "https://api.github.com/users/Qmando/gists{/gist_id}", "starred_url": "https://api.github.com/users/Qmando/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Qmando/subscriptions", "organizations_url": "https://api.github.com/users/Qmando/orgs", "repos_url": "https://api.github.com/users/Qmando/repos", "events_url": "https://api.github.com/users/Qmando/events{/privacy}", "received_events_url": "https://api.github.com/users/Qmando/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "Qmando", "id": 3246990, "node_id": "MDQ6VXNlcjMyNDY5OTA=", "avatar_url": "https://avatars.githubusercontent.com/u/3246990?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Qmando", "html_url": "https://github.com/Qmando", "followers_url": "https://api.github.com/users/Qmando/followers", "following_url": "https://api.github.com/users/Qmando/following{/other_user}", "gists_url": "https://api.github.com/users/Qmando/gists{/gist_id}", "starred_url": "https://api.github.com/users/Qmando/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Qmando/subscriptions", "organizations_url": "https://api.github.com/users/Qmando/orgs", "repos_url": "https://api.github.com/users/Qmando/repos", "events_url": "https://api.github.com/users/Qmando/events{/privacy}", "received_events_url": "https://api.github.com/users/Qmando/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 1, "created_at": "2015-03-25T23:44:20Z", "updated_at": "2015-04-14T22:43:36Z", "closed_at": "2015-04-14T22:43:36Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "ElastAlert attempts to create the 'key' for silenced alerts by concatenated the value of match[query_key] with the rule name. This causes an error if the value is non-str, for example, a list.\n\n```\nkey = '.' + match[rule['query_key']]\n```\n\nTypeError: cannot concatenate 'str' and 'list' objects\n", "reactions": {"url": "https://api.github.com/repos/Yelp/elastalert/issues/37/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/Yelp/elastalert/issues/37/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/Yelp/elastalert/issues/28", "repository_url": "https://api.github.com/repos/Yelp/elastalert", "labels_url": "https://api.github.com/repos/Yelp/elastalert/issues/28/labels{/name}", "comments_url": "https://api.github.com/repos/Yelp/elastalert/issues/28/comments", "events_url": "https://api.github.com/repos/Yelp/elastalert/issues/28/events", "html_url": "https://github.com/Yelp/elastalert/issues/28", "id": 62774606, "node_id": "MDU6SXNzdWU2Mjc3NDYwNg==", "number": 28, "title": "AttributeError in top_count_keys", "user": {"login": "Qmando", "id": 3246990, "node_id": "MDQ6VXNlcjMyNDY5OTA=", "avatar_url": "https://avatars.githubusercontent.com/u/3246990?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Qmando", "html_url": "https://github.com/Qmando", "followers_url": "https://api.github.com/users/Qmando/followers", "following_url": "https://api.github.com/users/Qmando/following{/other_user}", "gists_url": "https://api.github.com/users/Qmando/gists{/gist_id}", "starred_url": "https://api.github.com/users/Qmando/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Qmando/subscriptions", "organizations_url": "https://api.github.com/users/Qmando/orgs", "repos_url": "https://api.github.com/users/Qmando/repos", "events_url": "https://api.github.com/users/Qmando/events{/privacy}", "received_events_url": "https://api.github.com/users/Qmando/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 151009109, "node_id": "MDU6TGFiZWwxNTEwMDkxMDk=", "url": "https://api.github.com/repos/Yelp/elastalert/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "Qmando", "id": 3246990, "node_id": "MDQ6VXNlcjMyNDY5OTA=", "avatar_url": "https://avatars.githubusercontent.com/u/3246990?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Qmando", "html_url": "https://github.com/Qmando", "followers_url": "https://api.github.com/users/Qmando/followers", "following_url": "https://api.github.com/users/Qmando/following{/other_user}", "gists_url": "https://api.github.com/users/Qmando/gists{/gist_id}", "starred_url": "https://api.github.com/users/Qmando/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Qmando/subscriptions", "organizations_url": "https://api.github.com/users/Qmando/orgs", "repos_url": "https://api.github.com/users/Qmando/repos", "events_url": "https://api.github.com/users/Qmando/events{/privacy}", "received_events_url": "https://api.github.com/users/Qmando/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "Qmando", "id": 3246990, "node_id": "MDQ6VXNlcjMyNDY5OTA=", "avatar_url": "https://avatars.githubusercontent.com/u/3246990?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Qmando", "html_url": "https://github.com/Qmando", "followers_url": "https://api.github.com/users/Qmando/followers", "following_url": "https://api.github.com/users/Qmando/following{/other_user}", "gists_url": "https://api.github.com/users/Qmando/gists{/gist_id}", "starred_url": "https://api.github.com/users/Qmando/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Qmando/subscriptions", "organizations_url": "https://api.github.com/users/Qmando/orgs", "repos_url": "https://api.github.com/users/Qmando/repos", "events_url": "https://api.github.com/users/Qmando/events{/privacy}", "received_events_url": "https://api.github.com/users/Qmando/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2015-03-18T19:07:38Z", "updated_at": "2015-03-18T21:01:40Z", "closed_at": "2015-03-18T21:01:40Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "top_count_keys passed timestamp strings to get_top_counts, which expects datetime objects. The exception is thrown in format_index.\n\nTraceback (most recent call last):\n File \"run_elastalert.py\", line 6, in <module>\n    client.start()\n  File \"/nail/srv/_versions/elastalert-201503151132-324bf6daa4-master/virtualenv_run/lib/python2.6/site-packages/elastalert/elastalert.py\", line 535, in start\n   num_matches = self.run_rule(rule, endtime, starttime)\n  File \"/nail/srv/_versions/elastalert-201503151132-324bf6daa4-master/virtualenv_run/lib/python2.6/site-packages/elastalert/elastalert.py\", line 415, in run_rule\n   self.alert([match], rule)\n  File \"/nail/srv/_versions/elastalert-201503151132-324bf6daa4-master/virtualenv_run/lib/python2.6/site-packages/elastalert/elastalert.py\", line 681, in alert\n    counts = self.get_top_counts(rule, start, end, keys, rule.get('top_count_number'), qk)\n File \"/nail/srv/_versions/elastalert-201503151132-324bf6daa4-master/virtualenv_run/lib/python2.6/site-packages/elastalert/elastalert.py\", line 960, in get_top_counts\n   index = self.get_index(rule, starttime, endtime)\n File \"/nail/srv/_versions/elastalert-201503151132-324bf6daa4-master/virtualenv_run/lib/python2.6/site-packages/elastalert/elastalert.py\", line 97, in get_index\n   return format_index(index, starttime, endtime)\n File \"/nail/srv/_versions/elastalert-201503151132-324bf6daa4-master/virtualenv_run/lib/python2.6/site-packages/elastalert/util.py\", line 129, in format_index\n    start -= start.utcoffset()\nAttributeError: 'str' object has no attribute 'utcoffset'\n", "reactions": {"url": "https://api.github.com/repos/Yelp/elastalert/issues/28/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/Yelp/elastalert/issues/28/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/Yelp/elastalert/issues/13", "repository_url": "https://api.github.com/repos/Yelp/elastalert", "labels_url": "https://api.github.com/repos/Yelp/elastalert/issues/13/labels{/name}", "comments_url": "https://api.github.com/repos/Yelp/elastalert/issues/13/comments", "events_url": "https://api.github.com/repos/Yelp/elastalert/issues/13/events", "html_url": "https://github.com/Yelp/elastalert/issues/13", "id": 59558941, "node_id": "MDU6SXNzdWU1OTU1ODk0MQ==", "number": 13, "title": "Flatline rule doesn't respect realert", "user": {"login": "Qmando", "id": 3246990, "node_id": "MDQ6VXNlcjMyNDY5OTA=", "avatar_url": "https://avatars.githubusercontent.com/u/3246990?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Qmando", "html_url": "https://github.com/Qmando", "followers_url": "https://api.github.com/users/Qmando/followers", "following_url": "https://api.github.com/users/Qmando/following{/other_user}", "gists_url": "https://api.github.com/users/Qmando/gists{/gist_id}", "starred_url": "https://api.github.com/users/Qmando/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Qmando/subscriptions", "organizations_url": "https://api.github.com/users/Qmando/orgs", "repos_url": "https://api.github.com/users/Qmando/repos", "events_url": "https://api.github.com/users/Qmando/events{/privacy}", "received_events_url": "https://api.github.com/users/Qmando/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 151009109, "node_id": "MDU6TGFiZWwxNTEwMDkxMDk=", "url": "https://api.github.com/repos/Yelp/elastalert/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2015-03-02T22:03:34Z", "updated_at": "2016-10-03T17:09:30Z", "closed_at": "2016-10-03T17:09:30Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "Flatline rule will wait until timeframe has elapsed after every alert. It is expected that it would continue alerting at realert intervals.\n", "reactions": {"url": "https://api.github.com/repos/Yelp/elastalert/issues/13/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/Yelp/elastalert/issues/13/timeline", "performed_via_github_app": null, "state_reason": "completed"}]