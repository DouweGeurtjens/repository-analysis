[{"url": "https://api.github.com/repos/tskit-dev/tskit/issues/2745", "repository_url": "https://api.github.com/repos/tskit-dev/tskit", "labels_url": "https://api.github.com/repos/tskit-dev/tskit/issues/2745/labels{/name}", "comments_url": "https://api.github.com/repos/tskit-dev/tskit/issues/2745/comments", "events_url": "https://api.github.com/repos/tskit-dev/tskit/issues/2745/events", "html_url": "https://github.com/tskit-dev/tskit/issues/2745", "id": 1679754981, "node_id": "I_kwDOBzNZms5kHwbl", "number": 2745, "title": "Error in handling final empty tree in stats API", "user": {"login": "jeromekelleher", "id": 2664569, "node_id": "MDQ6VXNlcjI2NjQ1Njk=", "avatar_url": "https://avatars.githubusercontent.com/u/2664569?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jeromekelleher", "html_url": "https://github.com/jeromekelleher", "followers_url": "https://api.github.com/users/jeromekelleher/followers", "following_url": "https://api.github.com/users/jeromekelleher/following{/other_user}", "gists_url": "https://api.github.com/users/jeromekelleher/gists{/gist_id}", "starred_url": "https://api.github.com/users/jeromekelleher/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jeromekelleher/subscriptions", "organizations_url": "https://api.github.com/users/jeromekelleher/orgs", "repos_url": "https://api.github.com/users/jeromekelleher/repos", "events_url": "https://api.github.com/users/jeromekelleher/events{/privacy}", "received_events_url": "https://api.github.com/users/jeromekelleher/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 831518500, "node_id": "MDU6TGFiZWw4MzE1MTg1MDA=", "url": "https://api.github.com/repos/tskit-dev/tskit/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2023-04-22T22:25:19Z", "updated_at": "2023-04-23T21:15:23Z", "closed_at": "2023-04-23T21:15:22Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "We seem to be returning a nonzero value in the final window when there is no topology in branch stats:\n\n```python\nimport tskit\n\nts = tskit.Tree.generate_comb(4).tree_sequence\ntables = ts.dump_tables()\ntables.sequence_length = 3\ntables.edges.left += 1\ntables.edges.right += 1\nts = tables.tree_sequence()\n\nX = ts.diversity(windows=\"trees\", mode=\"branch\")\nprint(X)\n```\nGives\n```\n3.00\u250a         \u250a   6     \u250a         \u250a\n    \u250a         \u250a \u250f\u2501\u253b\u2501\u2513   \u250a         \u250a\n2.00\u250a         \u250a \u2503   5   \u250a         \u250a\n    \u250a         \u250a \u2503 \u250f\u2501\u253b\u2513  \u250a         \u250a\n1.00\u250a         \u250a \u2503 \u2503  4  \u250a         \u250a\n    \u250a         \u250a \u2503 \u2503 \u250f\u253b\u2513 \u250a         \u250a\n0.00\u250a 0 1 2 3 \u250a 0 1 2 3 \u250a 0 1 2 3 \u250a\n    0         1         2         3\n\n[ 0.00000000e+00  4.66666667e+00 -4.44089210e-16]\n```\n\n\nThe value for the last window should be 0 like the first window. I thought initially that this was a staightforward uninitialised memory issue, but it's not that simple. The value we compute seems to depend deterministically on the middle tree topology (many topologies don't lead to this error at all). The value is close to zero, but not *that* close, and larger trees seem to lead to larger errors in the final value.\n\nI made a start on writing some tests, but I'm not sure what I'm looking for now.\n\nThis cropped up in the windowed divmat implementation in #2736, where these errors are causing tests to fail when I compare the branch stat version of the divergence matrix with the new implementations.\n\n\n", "reactions": {"url": "https://api.github.com/repos/tskit-dev/tskit/issues/2745/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/tskit-dev/tskit/issues/2745/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/tskit-dev/tskit/issues/2724", "repository_url": "https://api.github.com/repos/tskit-dev/tskit", "labels_url": "https://api.github.com/repos/tskit-dev/tskit/issues/2724/labels{/name}", "comments_url": "https://api.github.com/repos/tskit-dev/tskit/issues/2724/comments", "events_url": "https://api.github.com/repos/tskit-dev/tskit/issues/2724/events", "html_url": "https://github.com/tskit-dev/tskit/issues/2724", "id": 1617422847, "node_id": "I_kwDOBzNZms5gZ-n_", "number": 2724, "title": "tskit vcf CLI not handling ploidy correctly?", "user": {"login": "andrewkern", "id": 7674197, "node_id": "MDQ6VXNlcjc2NzQxOTc=", "avatar_url": "https://avatars.githubusercontent.com/u/7674197?v=4", "gravatar_id": "", "url": "https://api.github.com/users/andrewkern", "html_url": "https://github.com/andrewkern", "followers_url": "https://api.github.com/users/andrewkern/followers", "following_url": "https://api.github.com/users/andrewkern/following{/other_user}", "gists_url": "https://api.github.com/users/andrewkern/gists{/gist_id}", "starred_url": "https://api.github.com/users/andrewkern/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/andrewkern/subscriptions", "organizations_url": "https://api.github.com/users/andrewkern/orgs", "repos_url": "https://api.github.com/users/andrewkern/repos", "events_url": "https://api.github.com/users/andrewkern/events{/privacy}", "received_events_url": "https://api.github.com/users/andrewkern/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 831518500, "node_id": "MDU6TGFiZWw4MzE1MTg1MDA=", "url": "https://api.github.com/repos/tskit-dev/tskit/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2023-03-09T15:00:08Z", "updated_at": "2023-03-09T15:05:48Z", "closed_at": "2023-03-09T15:05:47Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "While leading a stdpopsim workshop I think I stumbled across a bug \ud83d\udc1e  . I noticed a mismatch in output between the API and the CLI in converting ts -> vcf. In particular the CLI doesn't appear to be dealing with ploidy correctly. Here's an example. \r\n\r\n1. Simulate some data using stdpopsim:\r\n```bash\r\n$ stdpopsim HomSap 10 10 10 \\\r\n         --demographic-model OutOfAfrica_3G09 \\\r\n         --chromosome chr22 \\\r\n         --length-multiplier 0.1 \\\r\n         --output OutOfAfrica_3G09_CLI.ts\r\n```\r\n2. Convert using API with a call like\r\n```bash\r\nwith open(\"OutOfAfrica_3G09_API.vcf\", \"w\") as vcf_file:\r\n    ts.write_vcf(vcf_file, contig_id='22')\r\n```\r\nif we look at the first few lines of that file\r\n```bash\r\n$ head OutOfAfrica_3G09_API.vcf\r\n##fileformat=VCFv4.2\r\n##source=tskit 0.5.4\r\n##FILTER=<ID=PASS,Description=\"All filters passed\">\r\n##contig=<ID=22,length=5081847>\r\n##FORMAT=<ID=GT,Number=1,Type=String,Description=\"Genotype\">\r\n#CHROM\tPOS\tID\tREF\tALT\tQUAL\tFILTER\tINFO\tFORMAT\ttsk_0\ttsk_1\ttsk_2\ttsk_3\ttsk_4\ttsk_5\ttsk_6\ttsk_7\ttsk_8\ttsk_9\r\n22\t329\t0\tC\tG\t.\tPASS\t.\tGT\t0|0\t0|0\t0|0\t0|0\t0|1\t0|0\t0|0\t0|0\t0|0\t0|0\r\n22\t591\t1\tC\tG\t.\tPASS\t.\tGT\t0|1\t0|0\t0|0\t0|0\t1|1\t1|1\t1|1\t1|1\t1|1\t1|1\r\n22\t892\t2\tT\tC\t.\tPASS\t.\tGT\t0|0\t0|0\t1|0\t0|0\t0|0\t0|0\t0|0\t0|0\t0|0\t0|0\r\n22\t1322\t3\tC\tG\t.\tPASS\t.\tGT\t1|0\t1|0\t0|0\t0|0\t0|0\t0|0\t0|0\t0|0\t0|0\t0|0\r\n```\r\nlooks good!\r\n\r\n3. Compare to CLI\r\n```bash\r\ntskit vcf OutOfAfrica_3G09_CLI.ts > OutOfAfrica_3G09_CLI.vcf\r\n```\r\nfirst few lines from that file\r\n```bash\r\n$ head OutOfAfrica_3G09_CLI.vcf\r\n##fileformat=VCFv4.2\r\n##source=tskit 0.5.4\r\n##FILTER=<ID=PASS,Description=\"All filters passed\">\r\n##contig=<ID=1,length=5081847>\r\n##FORMAT=<ID=GT,Number=1,Type=String,Description=\"Genotype\">\r\n#CHROM\tPOS\tID\tREF\tALT\tQUAL\tFILTER\tINFO\tFORMAT\ttsk_0\ttsk_1\ttsk_2\ttsk_3\ttsk_4\ttsk_5\ttsk_6\ttsk_7\ttsk_8\ttsk_9\ttsk_10\ttsk_11\ttsk_12\ttsk_13\ttsk_14\ttsk_15\ttsk_16\ttsk_17\ttsk_18\ttsk_19\ttsk_20\ttsk_21\ttsk_22\ttsk_23\ttsk_24\ttsk_25\ttsk_26\ttsk_27\ttsk_28\ttsk_29\r\n1\t351\t0\tA\tG\t.\tPASS\t.\tGT\t0\t0\t0\t0\t0\t1\t0\t0\t0\t0\t0\t0\t0\t0\t0\t0\t0\t0\t0\t0\t0\t0\t0\t0\t0\t0\t0\t0\t0\t0\r\n1\t3186\t1\tC\tT\t.\tPASS\t.\tGT\t0\t0\t0\t0\t0\t0\t0\t0\t0\t0\t0\t0\t0\t0\t0\t0\t0\t0\t0\t0\t0\t0\t0\t0\t0\t0\t0\t0\t0\t1\r\n1\t3654\t2\tG\tC\t.\tPASS\t.\tGT\t1\t0\t1\t1\t1\t1\t1\t1\t1\t1\t1\t1\t1\t1\t1\t1\t1\t1\t1\t1\t1\t1\t1\t1\t1\t1\t1\t1\t1\t1\r\n1\t3709\t3\tG\tA\t.\tPASS\t.\tGT\t0\t1\t0\t0\t0\t0\t0\t0\t0\t0\t0\t0\t0\t0\t0\t0\t0\t0\t0\t0\t0\t0\t0\t0\t0\t0\t0\t0\t0\t0\r\n```\r\n\r\nso it looks like the ploidy of the ts isn't being properly propagated through to the CLI? ", "reactions": {"url": "https://api.github.com/repos/tskit-dev/tskit/issues/2724/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/tskit-dev/tskit/issues/2724/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/tskit-dev/tskit/issues/2521", "repository_url": "https://api.github.com/repos/tskit-dev/tskit", "labels_url": "https://api.github.com/repos/tskit-dev/tskit/issues/2521/labels{/name}", "comments_url": "https://api.github.com/repos/tskit-dev/tskit/issues/2521/comments", "events_url": "https://api.github.com/repos/tskit-dev/tskit/issues/2521/events", "html_url": "https://github.com/tskit-dev/tskit/issues/2521", "id": 1388942368, "node_id": "I_kwDOBzNZms5SyZQg", "number": 2521, "title": "Clarifying MRCA for multiple roots", "user": {"login": "hyanwong", "id": 4699014, "node_id": "MDQ6VXNlcjQ2OTkwMTQ=", "avatar_url": "https://avatars.githubusercontent.com/u/4699014?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hyanwong", "html_url": "https://github.com/hyanwong", "followers_url": "https://api.github.com/users/hyanwong/followers", "following_url": "https://api.github.com/users/hyanwong/following{/other_user}", "gists_url": "https://api.github.com/users/hyanwong/gists{/gist_id}", "starred_url": "https://api.github.com/users/hyanwong/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hyanwong/subscriptions", "organizations_url": "https://api.github.com/users/hyanwong/orgs", "repos_url": "https://api.github.com/users/hyanwong/repos", "events_url": "https://api.github.com/users/hyanwong/events{/privacy}", "received_events_url": "https://api.github.com/users/hyanwong/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 831518500, "node_id": "MDU6TGFiZWw4MzE1MTg1MDA=", "url": "https://api.github.com/repos/tskit-dev/tskit/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": {"login": "benjeffery", "id": 8552, "node_id": "MDQ6VXNlcjg1NTI=", "avatar_url": "https://avatars.githubusercontent.com/u/8552?v=4", "gravatar_id": "", "url": "https://api.github.com/users/benjeffery", "html_url": "https://github.com/benjeffery", "followers_url": "https://api.github.com/users/benjeffery/followers", "following_url": "https://api.github.com/users/benjeffery/following{/other_user}", "gists_url": "https://api.github.com/users/benjeffery/gists{/gist_id}", "starred_url": "https://api.github.com/users/benjeffery/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/benjeffery/subscriptions", "organizations_url": "https://api.github.com/users/benjeffery/orgs", "repos_url": "https://api.github.com/users/benjeffery/repos", "events_url": "https://api.github.com/users/benjeffery/events{/privacy}", "received_events_url": "https://api.github.com/users/benjeffery/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "benjeffery", "id": 8552, "node_id": "MDQ6VXNlcjg1NTI=", "avatar_url": "https://avatars.githubusercontent.com/u/8552?v=4", "gravatar_id": "", "url": "https://api.github.com/users/benjeffery", "html_url": "https://github.com/benjeffery", "followers_url": "https://api.github.com/users/benjeffery/followers", "following_url": "https://api.github.com/users/benjeffery/following{/other_user}", "gists_url": "https://api.github.com/users/benjeffery/gists{/gist_id}", "starred_url": "https://api.github.com/users/benjeffery/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/benjeffery/subscriptions", "organizations_url": "https://api.github.com/users/benjeffery/orgs", "repos_url": "https://api.github.com/users/benjeffery/repos", "events_url": "https://api.github.com/users/benjeffery/events{/privacy}", "received_events_url": "https://api.github.com/users/benjeffery/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/tskit-dev/tskit/milestones/36", "html_url": "https://github.com/tskit-dev/tskit/milestone/36", "labels_url": "https://api.github.com/repos/tskit-dev/tskit/milestones/36/labels", "id": 8197577, "node_id": "MI_kwDOBzNZms4AfRXJ", "number": 36, "title": "Python 0.5.3", "description": "Priority issues for the next release", "creator": {"login": "benjeffery", "id": 8552, "node_id": "MDQ6VXNlcjg1NTI=", "avatar_url": "https://avatars.githubusercontent.com/u/8552?v=4", "gravatar_id": "", "url": "https://api.github.com/users/benjeffery", "html_url": "https://github.com/benjeffery", "followers_url": "https://api.github.com/users/benjeffery/followers", "following_url": "https://api.github.com/users/benjeffery/following{/other_user}", "gists_url": "https://api.github.com/users/benjeffery/gists{/gist_id}", "starred_url": "https://api.github.com/users/benjeffery/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/benjeffery/subscriptions", "organizations_url": "https://api.github.com/users/benjeffery/orgs", "repos_url": "https://api.github.com/users/benjeffery/repos", "events_url": "https://api.github.com/users/benjeffery/events{/privacy}", "received_events_url": "https://api.github.com/users/benjeffery/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 20, "state": "closed", "created_at": "2022-07-15T08:54:29Z", "updated_at": "2022-10-04T11:35:26Z", "due_on": null, "closed_at": "2022-10-04T11:35:26Z"}, "comments": 1, "created_at": "2022-09-28T08:25:00Z", "updated_at": "2022-09-29T16:13:19Z", "closed_at": "2022-09-29T16:13:19Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "If a tree sequence has multiple roots, and we call `ts.mrca(ts.samples())`, we could either return a list of MRCAs or error out. We should specify in the docs which we do. At the moment it seems to return \"Out of bounds\":\r\n\r\n```python\r\nimport tskit\r\nts = tskit.Tree.generate_balanced(10).tree_sequence\r\nts = ts.delete_intervals([ts.first().interval])\r\nts.first().mrca(*ts.samples())\r\n```\r\n\r\n```\r\n-> 1007         return functools.reduce(self._ll_tree.get_mrca, args)\r\n   1008 \r\n   1009     def get_tmrca(self, u, v):\r\n\r\nValueError: Node index out of bounds\r\n```", "reactions": {"url": "https://api.github.com/repos/tskit-dev/tskit/issues/2521/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/tskit-dev/tskit/issues/2521/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/tskit-dev/tskit/issues/2514", "repository_url": "https://api.github.com/repos/tskit-dev/tskit", "labels_url": "https://api.github.com/repos/tskit-dev/tskit/issues/2514/labels{/name}", "comments_url": "https://api.github.com/repos/tskit-dev/tskit/issues/2514/comments", "events_url": "https://api.github.com/repos/tskit-dev/tskit/issues/2514/events", "html_url": "https://github.com/tskit-dev/tskit/issues/2514", "id": 1382145667, "node_id": "I_kwDOBzNZms5SYd6D", "number": 2514, "title": "Cannot pass result of np.where as samples to ``variants``.", "user": {"login": "jeromekelleher", "id": 2664569, "node_id": "MDQ6VXNlcjI2NjQ1Njk=", "avatar_url": "https://avatars.githubusercontent.com/u/2664569?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jeromekelleher", "html_url": "https://github.com/jeromekelleher", "followers_url": "https://api.github.com/users/jeromekelleher/followers", "following_url": "https://api.github.com/users/jeromekelleher/following{/other_user}", "gists_url": "https://api.github.com/users/jeromekelleher/gists{/gist_id}", "starred_url": "https://api.github.com/users/jeromekelleher/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jeromekelleher/subscriptions", "organizations_url": "https://api.github.com/users/jeromekelleher/orgs", "repos_url": "https://api.github.com/users/jeromekelleher/repos", "events_url": "https://api.github.com/users/jeromekelleher/events{/privacy}", "received_events_url": "https://api.github.com/users/jeromekelleher/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 831518500, "node_id": "MDU6TGFiZWw4MzE1MTg1MDA=", "url": "https://api.github.com/repos/tskit-dev/tskit/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/tskit-dev/tskit/milestones/36", "html_url": "https://github.com/tskit-dev/tskit/milestone/36", "labels_url": "https://api.github.com/repos/tskit-dev/tskit/milestones/36/labels", "id": 8197577, "node_id": "MI_kwDOBzNZms4AfRXJ", "number": 36, "title": "Python 0.5.3", "description": "Priority issues for the next release", "creator": {"login": "benjeffery", "id": 8552, "node_id": "MDQ6VXNlcjg1NTI=", "avatar_url": "https://avatars.githubusercontent.com/u/8552?v=4", "gravatar_id": "", "url": "https://api.github.com/users/benjeffery", "html_url": "https://github.com/benjeffery", "followers_url": "https://api.github.com/users/benjeffery/followers", "following_url": "https://api.github.com/users/benjeffery/following{/other_user}", "gists_url": "https://api.github.com/users/benjeffery/gists{/gist_id}", "starred_url": "https://api.github.com/users/benjeffery/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/benjeffery/subscriptions", "organizations_url": "https://api.github.com/users/benjeffery/orgs", "repos_url": "https://api.github.com/users/benjeffery/repos", "events_url": "https://api.github.com/users/benjeffery/events{/privacy}", "received_events_url": "https://api.github.com/users/benjeffery/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 20, "state": "closed", "created_at": "2022-07-15T08:54:29Z", "updated_at": "2022-10-04T11:35:26Z", "due_on": null, "closed_at": "2022-10-04T11:35:26Z"}, "comments": 1, "created_at": "2022-09-22T09:38:43Z", "updated_at": "2022-09-27T10:18:39Z", "closed_at": "2022-09-27T10:18:39Z", "author_association": "MEMBER", "active_lock_reason": null, "body": " A common pattern is:\r\n```python\r\nsamples = np.where(ts.nodes_time == t)[0]\r\nfor var in variants(samples=samples):\r\n...\r\n```\r\ncurrently this gives:\r\n```\r\nFile \"/home/jk/.local/lib/python3.8/site-packages/tskit/genotypes.py\", line 119, in __init__\r\n    self._ll_variant = _tskit.Variant(\r\nTypeError: Cannot cast array data from dtype('int64') to dtype('int32') according to the rule 'safe'\r\n```\r\n\r\nI think we have some code for safe downcasting which we use for other cases?", "reactions": {"url": "https://api.github.com/repos/tskit-dev/tskit/issues/2514/reactions", "total_count": 1, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/tskit-dev/tskit/issues/2514/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/tskit-dev/tskit/issues/2502", "repository_url": "https://api.github.com/repos/tskit-dev/tskit", "labels_url": "https://api.github.com/repos/tskit-dev/tskit/issues/2502/labels{/name}", "comments_url": "https://api.github.com/repos/tskit-dev/tskit/issues/2502/comments", "events_url": "https://api.github.com/repos/tskit-dev/tskit/issues/2502/events", "html_url": "https://github.com/tskit-dev/tskit/issues/2502", "id": 1371352769, "node_id": "I_kwDOBzNZms5RvS7B", "number": 2502, "title": "32bit CI fails with GSL error", "user": {"login": "benjeffery", "id": 8552, "node_id": "MDQ6VXNlcjg1NTI=", "avatar_url": "https://avatars.githubusercontent.com/u/8552?v=4", "gravatar_id": "", "url": "https://api.github.com/users/benjeffery", "html_url": "https://github.com/benjeffery", "followers_url": "https://api.github.com/users/benjeffery/followers", "following_url": "https://api.github.com/users/benjeffery/following{/other_user}", "gists_url": "https://api.github.com/users/benjeffery/gists{/gist_id}", "starred_url": "https://api.github.com/users/benjeffery/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/benjeffery/subscriptions", "organizations_url": "https://api.github.com/users/benjeffery/orgs", "repos_url": "https://api.github.com/users/benjeffery/repos", "events_url": "https://api.github.com/users/benjeffery/events{/privacy}", "received_events_url": "https://api.github.com/users/benjeffery/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 831518500, "node_id": "MDU6TGFiZWw4MzE1MTg1MDA=", "url": "https://api.github.com/repos/tskit-dev/tskit/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}, {"id": 2385564880, "node_id": "MDU6TGFiZWwyMzg1NTY0ODgw", "url": "https://api.github.com/repos/tskit-dev/tskit/labels/Infrastructure%20and%20tools", "name": "Infrastructure and tools", "color": "b27f00", "default": false, "description": "Development infrastructure and tools"}], "state": "closed", "locked": false, "assignee": {"login": "benjeffery", "id": 8552, "node_id": "MDQ6VXNlcjg1NTI=", "avatar_url": "https://avatars.githubusercontent.com/u/8552?v=4", "gravatar_id": "", "url": "https://api.github.com/users/benjeffery", "html_url": "https://github.com/benjeffery", "followers_url": "https://api.github.com/users/benjeffery/followers", "following_url": "https://api.github.com/users/benjeffery/following{/other_user}", "gists_url": "https://api.github.com/users/benjeffery/gists{/gist_id}", "starred_url": "https://api.github.com/users/benjeffery/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/benjeffery/subscriptions", "organizations_url": "https://api.github.com/users/benjeffery/orgs", "repos_url": "https://api.github.com/users/benjeffery/repos", "events_url": "https://api.github.com/users/benjeffery/events{/privacy}", "received_events_url": "https://api.github.com/users/benjeffery/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "benjeffery", "id": 8552, "node_id": "MDQ6VXNlcjg1NTI=", "avatar_url": "https://avatars.githubusercontent.com/u/8552?v=4", "gravatar_id": "", "url": "https://api.github.com/users/benjeffery", "html_url": "https://github.com/benjeffery", "followers_url": "https://api.github.com/users/benjeffery/followers", "following_url": "https://api.github.com/users/benjeffery/following{/other_user}", "gists_url": "https://api.github.com/users/benjeffery/gists{/gist_id}", "starred_url": "https://api.github.com/users/benjeffery/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/benjeffery/subscriptions", "organizations_url": "https://api.github.com/users/benjeffery/orgs", "repos_url": "https://api.github.com/users/benjeffery/repos", "events_url": "https://api.github.com/users/benjeffery/events{/privacy}", "received_events_url": "https://api.github.com/users/benjeffery/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 1, "created_at": "2022-09-13T12:11:45Z", "updated_at": "2022-09-14T10:14:47Z", "closed_at": "2022-09-14T10:14:47Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "See https://app.circleci.com/pipelines/github/tskit-dev/tskit/7448/workflows/4c8538ec-396a-4870-9e5d-063ed7494c20/jobs/9829\r\n\r\nI think this just needs some extra packages for apt-get, although I'm not sure why this CI passed yesterday if it is broken now. ", "reactions": {"url": "https://api.github.com/repos/tskit-dev/tskit/issues/2502/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/tskit-dev/tskit/issues/2502/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/tskit-dev/tskit/issues/2482", "repository_url": "https://api.github.com/repos/tskit-dev/tskit", "labels_url": "https://api.github.com/repos/tskit-dev/tskit/issues/2482/labels{/name}", "comments_url": "https://api.github.com/repos/tskit-dev/tskit/issues/2482/comments", "events_url": "https://api.github.com/repos/tskit-dev/tskit/issues/2482/events", "html_url": "https://github.com/tskit-dev/tskit/issues/2482", "id": 1357440675, "node_id": "I_kwDOBzNZms5Q6Oaj", "number": 2482, "title": "fam parsing is broken with `numpy>=1.23.0`", "user": {"login": "benjeffery", "id": 8552, "node_id": "MDQ6VXNlcjg1NTI=", "avatar_url": "https://avatars.githubusercontent.com/u/8552?v=4", "gravatar_id": "", "url": "https://api.github.com/users/benjeffery", "html_url": "https://github.com/benjeffery", "followers_url": "https://api.github.com/users/benjeffery/followers", "following_url": "https://api.github.com/users/benjeffery/following{/other_user}", "gists_url": "https://api.github.com/users/benjeffery/gists{/gist_id}", "starred_url": "https://api.github.com/users/benjeffery/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/benjeffery/subscriptions", "organizations_url": "https://api.github.com/users/benjeffery/orgs", "repos_url": "https://api.github.com/users/benjeffery/repos", "events_url": "https://api.github.com/users/benjeffery/events{/privacy}", "received_events_url": "https://api.github.com/users/benjeffery/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 831518500, "node_id": "MDU6TGFiZWw4MzE1MTg1MDA=", "url": "https://api.github.com/repos/tskit-dev/tskit/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}, {"id": 2385559214, "node_id": "MDU6TGFiZWwyMzg1NTU5MjE0", "url": "https://api.github.com/repos/tskit-dev/tskit/labels/Python%20API", "name": "Python API", "color": "d12add", "default": false, "description": "Issue is about the Python API"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/tskit-dev/tskit/milestones/36", "html_url": "https://github.com/tskit-dev/tskit/milestone/36", "labels_url": "https://api.github.com/repos/tskit-dev/tskit/milestones/36/labels", "id": 8197577, "node_id": "MI_kwDOBzNZms4AfRXJ", "number": 36, "title": "Python 0.5.3", "description": "Priority issues for the next release", "creator": {"login": "benjeffery", "id": 8552, "node_id": "MDQ6VXNlcjg1NTI=", "avatar_url": "https://avatars.githubusercontent.com/u/8552?v=4", "gravatar_id": "", "url": "https://api.github.com/users/benjeffery", "html_url": "https://github.com/benjeffery", "followers_url": "https://api.github.com/users/benjeffery/followers", "following_url": "https://api.github.com/users/benjeffery/following{/other_user}", "gists_url": "https://api.github.com/users/benjeffery/gists{/gist_id}", "starred_url": "https://api.github.com/users/benjeffery/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/benjeffery/subscriptions", "organizations_url": "https://api.github.com/users/benjeffery/orgs", "repos_url": "https://api.github.com/users/benjeffery/repos", "events_url": "https://api.github.com/users/benjeffery/events{/privacy}", "received_events_url": "https://api.github.com/users/benjeffery/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 20, "state": "closed", "created_at": "2022-07-15T08:54:29Z", "updated_at": "2022-10-04T11:35:26Z", "due_on": null, "closed_at": "2022-10-04T11:35:26Z"}, "comments": 0, "created_at": "2022-08-31T14:40:54Z", "updated_at": "2022-09-29T11:23:15Z", "closed_at": "2022-09-29T11:23:15Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "tests/test_text_formats.py::TestParseFam::test_insufficient_cols[1] - ValueError: invalid column index 1 at row 1 with 1 columns", "reactions": {"url": "https://api.github.com/repos/tskit-dev/tskit/issues/2482/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/tskit-dev/tskit/issues/2482/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/tskit-dev/tskit/issues/2481", "repository_url": "https://api.github.com/repos/tskit-dev/tskit", "labels_url": "https://api.github.com/repos/tskit-dev/tskit/issues/2481/labels{/name}", "comments_url": "https://api.github.com/repos/tskit-dev/tskit/issues/2481/comments", "events_url": "https://api.github.com/repos/tskit-dev/tskit/issues/2481/events", "html_url": "https://github.com/tskit-dev/tskit/issues/2481", "id": 1357423946, "node_id": "I_kwDOBzNZms5Q6KVK", "number": 2481, "title": "tskit breaks with `jsonschema>=4.0.0`", "user": {"login": "benjeffery", "id": 8552, "node_id": "MDQ6VXNlcjg1NTI=", "avatar_url": "https://avatars.githubusercontent.com/u/8552?v=4", "gravatar_id": "", "url": "https://api.github.com/users/benjeffery", "html_url": "https://github.com/benjeffery", "followers_url": "https://api.github.com/users/benjeffery/followers", "following_url": "https://api.github.com/users/benjeffery/following{/other_user}", "gists_url": "https://api.github.com/users/benjeffery/gists{/gist_id}", "starred_url": "https://api.github.com/users/benjeffery/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/benjeffery/subscriptions", "organizations_url": "https://api.github.com/users/benjeffery/orgs", "repos_url": "https://api.github.com/users/benjeffery/repos", "events_url": "https://api.github.com/users/benjeffery/events{/privacy}", "received_events_url": "https://api.github.com/users/benjeffery/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 831518500, "node_id": "MDU6TGFiZWw4MzE1MTg1MDA=", "url": "https://api.github.com/repos/tskit-dev/tskit/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}, {"id": 2385559214, "node_id": "MDU6TGFiZWwyMzg1NTU5MjE0", "url": "https://api.github.com/repos/tskit-dev/tskit/labels/Python%20API", "name": "Python API", "color": "d12add", "default": false, "description": "Issue is about the Python API"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/tskit-dev/tskit/milestones/36", "html_url": "https://github.com/tskit-dev/tskit/milestone/36", "labels_url": "https://api.github.com/repos/tskit-dev/tskit/milestones/36/labels", "id": 8197577, "node_id": "MI_kwDOBzNZms4AfRXJ", "number": 36, "title": "Python 0.5.3", "description": "Priority issues for the next release", "creator": {"login": "benjeffery", "id": 8552, "node_id": "MDQ6VXNlcjg1NTI=", "avatar_url": "https://avatars.githubusercontent.com/u/8552?v=4", "gravatar_id": "", "url": "https://api.github.com/users/benjeffery", "html_url": "https://github.com/benjeffery", "followers_url": "https://api.github.com/users/benjeffery/followers", "following_url": "https://api.github.com/users/benjeffery/following{/other_user}", "gists_url": "https://api.github.com/users/benjeffery/gists{/gist_id}", "starred_url": "https://api.github.com/users/benjeffery/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/benjeffery/subscriptions", "organizations_url": "https://api.github.com/users/benjeffery/orgs", "repos_url": "https://api.github.com/users/benjeffery/repos", "events_url": "https://api.github.com/users/benjeffery/events{/privacy}", "received_events_url": "https://api.github.com/users/benjeffery/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 20, "state": "closed", "created_at": "2022-07-15T08:54:29Z", "updated_at": "2022-10-04T11:35:26Z", "due_on": null, "closed_at": "2022-10-04T11:35:26Z"}, "comments": 0, "created_at": "2022-08-31T14:28:57Z", "updated_at": "2022-09-16T15:56:21Z", "closed_at": "2022-09-16T15:56:21Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "We currently specify `jsonschema>=3.0.0` in `setup.cfg`. When run with `4.9.0` the schema validation test fail as they don't raise errors when schemas are invalid (for specific errors).\r\n\r\nTwo options to fix:\r\n- Pin `jsonschema` in `setup.cfg`. Not ideal.\r\n- Fix the code for version 4.10\r\n\r\nI'm not sure how hard the later option is - will look into it.", "reactions": {"url": "https://api.github.com/repos/tskit-dev/tskit/issues/2481/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/tskit-dev/tskit/issues/2481/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/tskit-dev/tskit/issues/2473", "repository_url": "https://api.github.com/repos/tskit-dev/tskit", "labels_url": "https://api.github.com/repos/tskit-dev/tskit/issues/2473/labels{/name}", "comments_url": "https://api.github.com/repos/tskit-dev/tskit/issues/2473/comments", "events_url": "https://api.github.com/repos/tskit-dev/tskit/issues/2473/events", "html_url": "https://github.com/tskit-dev/tskit/issues/2473", "id": 1349216853, "node_id": "I_kwDOBzNZms5Qa2pV", "number": 2473, "title": "ts.subset() does not reorder edges as required for a valid tree sequence", "user": {"login": "hyanwong", "id": 4699014, "node_id": "MDQ6VXNlcjQ2OTkwMTQ=", "avatar_url": "https://avatars.githubusercontent.com/u/4699014?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hyanwong", "html_url": "https://github.com/hyanwong", "followers_url": "https://api.github.com/users/hyanwong/followers", "following_url": "https://api.github.com/users/hyanwong/following{/other_user}", "gists_url": "https://api.github.com/users/hyanwong/gists{/gist_id}", "starred_url": "https://api.github.com/users/hyanwong/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hyanwong/subscriptions", "organizations_url": "https://api.github.com/users/hyanwong/orgs", "repos_url": "https://api.github.com/users/hyanwong/repos", "events_url": "https://api.github.com/users/hyanwong/events{/privacy}", "received_events_url": "https://api.github.com/users/hyanwong/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 831518500, "node_id": "MDU6TGFiZWw4MzE1MTg1MDA=", "url": "https://api.github.com/repos/tskit-dev/tskit/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2022-08-24T10:28:53Z", "updated_at": "2022-08-30T13:12:54Z", "closed_at": "2022-08-30T13:12:54Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "E.g. if we use `subset` to reverse the node order, we get an error:\r\n\r\n```\r\nimport msprime\r\nts = msprime.simulate(10)\r\nts.subset(np.arange(ts.num_nodes - 1, -1, -1))\r\n```\r\n\r\nWe need to sort the edge table before returning the tree sequence. I guess we are happy to call `tables.sort()`, although it conceivably might have the side effect of changing the order of migrations.\r\n\r\nPerhaps cleaner would be if we had a simple `tables.sort_edges()` function, but we don't.", "reactions": {"url": "https://api.github.com/repos/tskit-dev/tskit/issues/2473/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/tskit-dev/tskit/issues/2473/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/tskit-dev/tskit/issues/2448", "repository_url": "https://api.github.com/repos/tskit-dev/tskit", "labels_url": "https://api.github.com/repos/tskit-dev/tskit/issues/2448/labels{/name}", "comments_url": "https://api.github.com/repos/tskit-dev/tskit/issues/2448/comments", "events_url": "https://api.github.com/repos/tskit-dev/tskit/issues/2448/events", "html_url": "https://github.com/tskit-dev/tskit/issues/2448", "id": 1321219140, "node_id": "I_kwDOBzNZms5OwDRE", "number": 2448, "title": "Individuals not associated with nodes can lead to incorrect VCF", "user": {"login": "jeromekelleher", "id": 2664569, "node_id": "MDQ6VXNlcjI2NjQ1Njk=", "avatar_url": "https://avatars.githubusercontent.com/u/2664569?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jeromekelleher", "html_url": "https://github.com/jeromekelleher", "followers_url": "https://api.github.com/users/jeromekelleher/followers", "following_url": "https://api.github.com/users/jeromekelleher/following{/other_user}", "gists_url": "https://api.github.com/users/jeromekelleher/gists{/gist_id}", "starred_url": "https://api.github.com/users/jeromekelleher/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jeromekelleher/subscriptions", "organizations_url": "https://api.github.com/users/jeromekelleher/orgs", "repos_url": "https://api.github.com/users/jeromekelleher/repos", "events_url": "https://api.github.com/users/jeromekelleher/events{/privacy}", "received_events_url": "https://api.github.com/users/jeromekelleher/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 831518500, "node_id": "MDU6TGFiZWw4MzE1MTg1MDA=", "url": "https://api.github.com/repos/tskit-dev/tskit/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2022-07-28T16:52:04Z", "updated_at": "2022-07-29T17:30:11Z", "closed_at": "2022-07-29T17:30:11Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "Related to #2446 and #2257\r\n\r\n```python\r\nts = msprime.sim_ancestry(3, sequence_length=1e2, random_seed=1234)\r\nts = msprime.sim_mutations(ts, rate=0.01, random_seed=1234)\r\ntables = ts.dump_tables()\r\ntables.individuals.add_row()\r\nts = tables.tree_sequence()\r\nprint(ts.as_vcf())\r\n```\r\ngives\r\n```\r\n##fileformat=VCFv4.2\r\n##source=tskit 0.5.2.dev0\r\n##FILTER=<ID=PASS,Description=\"All filters passed\">\r\n##contig=<ID=1,length=100>\r\n##FORMAT=<ID=GT,Number=1,Type=String,Description=\"Genotype\">\r\n#CHROM  POS     ID      REF     ALT     QUAL    FILTER  INFO    FORMAT  tsk_0   tsk_1   tsk_2tsk_3\r\n1       2       0       C       T       .       PASS    .       GT      1|0     1|0     1|0\r\n1       15      1       G       T       .       PASS    .       GT      1|0     0|0     0|0\r\n1       19      2       A       T       .       PASS    .       GT      1|0     0|0     0|0\r\n1       29      3       C       A       .       PASS    .       GT      1|0     1|0     1|0\r\n1       35      4       T       C       .       PASS    .       GT      0|0     0|0     0|1\r\n1       37      5       G       C       .       PASS    .       GT      0|1     0|1     0|0\r\n1       56      6       C       G       .       PASS    .       GT      0|1     0|1     0|0\r\n1       61      7       T       G       .       PASS    .       GT      0|0     0|0     1|0\r\n1       71      8       C       G       .       PASS    .       GT      0|1     0|1     0|0\r\n1       81      9       G       C       .       PASS    .       GT      1|0     0|0     0|0\r\n```\r\n\r\nNote the extra sample ``tsk_3`` in the header.\r\n\r\nThe current code essentially assumes that all individuals are associated with sample nodes, and it is possible to come up with other examples where incorrect data is output without raising an error.", "reactions": {"url": "https://api.github.com/repos/tskit-dev/tskit/issues/2448/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/tskit-dev/tskit/issues/2448/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/tskit-dev/tskit/issues/2446", "repository_url": "https://api.github.com/repos/tskit-dev/tskit", "labels_url": "https://api.github.com/repos/tskit-dev/tskit/issues/2446/labels{/name}", "comments_url": "https://api.github.com/repos/tskit-dev/tskit/issues/2446/comments", "events_url": "https://api.github.com/repos/tskit-dev/tskit/issues/2446/events", "html_url": "https://github.com/tskit-dev/tskit/issues/2446", "id": 1320885047, "node_id": "I_kwDOBzNZms5Ouxs3", "number": 2446, "title": "Passing individuals=[] to ``ts.write_vcf`` gives malformed haploid output", "user": {"login": "jeromekelleher", "id": 2664569, "node_id": "MDQ6VXNlcjI2NjQ1Njk=", "avatar_url": "https://avatars.githubusercontent.com/u/2664569?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jeromekelleher", "html_url": "https://github.com/jeromekelleher", "followers_url": "https://api.github.com/users/jeromekelleher/followers", "following_url": "https://api.github.com/users/jeromekelleher/following{/other_user}", "gists_url": "https://api.github.com/users/jeromekelleher/gists{/gist_id}", "starred_url": "https://api.github.com/users/jeromekelleher/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jeromekelleher/subscriptions", "organizations_url": "https://api.github.com/users/jeromekelleher/orgs", "repos_url": "https://api.github.com/users/jeromekelleher/repos", "events_url": "https://api.github.com/users/jeromekelleher/events{/privacy}", "received_events_url": "https://api.github.com/users/jeromekelleher/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 831518500, "node_id": "MDU6TGFiZWw4MzE1MTg1MDA=", "url": "https://api.github.com/repos/tskit-dev/tskit/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/tskit-dev/tskit/milestones/36", "html_url": "https://github.com/tskit-dev/tskit/milestone/36", "labels_url": "https://api.github.com/repos/tskit-dev/tskit/milestones/36/labels", "id": 8197577, "node_id": "MI_kwDOBzNZms4AfRXJ", "number": 36, "title": "Python 0.5.3", "description": "Priority issues for the next release", "creator": {"login": "benjeffery", "id": 8552, "node_id": "MDQ6VXNlcjg1NTI=", "avatar_url": "https://avatars.githubusercontent.com/u/8552?v=4", "gravatar_id": "", "url": "https://api.github.com/users/benjeffery", "html_url": "https://github.com/benjeffery", "followers_url": "https://api.github.com/users/benjeffery/followers", "following_url": "https://api.github.com/users/benjeffery/following{/other_user}", "gists_url": "https://api.github.com/users/benjeffery/gists{/gist_id}", "starred_url": "https://api.github.com/users/benjeffery/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/benjeffery/subscriptions", "organizations_url": "https://api.github.com/users/benjeffery/orgs", "repos_url": "https://api.github.com/users/benjeffery/repos", "events_url": "https://api.github.com/users/benjeffery/events{/privacy}", "received_events_url": "https://api.github.com/users/benjeffery/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 20, "state": "closed", "created_at": "2022-07-15T08:54:29Z", "updated_at": "2022-10-04T11:35:26Z", "due_on": null, "closed_at": "2022-10-04T11:35:26Z"}, "comments": 0, "created_at": "2022-07-28T12:50:55Z", "updated_at": "2022-07-29T17:30:11Z", "closed_at": "2022-07-29T17:30:10Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "```python\r\nts = msprime.sim_ancestry(3, sequence_length=1e2, random_seed=1234)\r\nts = msprime.sim_mutations(ts, rate=0.01, random_seed=1234)\r\nprint(ts.as_vcf())\r\n```\r\n\r\ngives\r\n```\r\n##fileformat=VCFv4.2\r\n##source=tskit 0.5.2.dev0\r\n##FILTER=<ID=PASS,Description=\"All filters passed\">\r\n##contig=<ID=1,length=100>\r\n##FORMAT=<ID=GT,Number=1,Type=String,Description=\"Genotype\">\r\n#CHROM  POS     ID      REF     ALT     QUAL    FILTER  INFO    FORMAT  tsk_0   tsk_1   tsk_2\r\n1       2       0       C       T       .       PASS    .       GT      1|0     1|0     1|0\r\n1       15      1       G       T       .       PASS    .       GT      1|0     0|0     0|0\r\n1       19      2       A       T       .       PASS    .       GT      1|0     0|0     0|0\r\n1       29      3       C       A       .       PASS    .       GT      1|0     1|0     1|0\r\n1       35      4       T       C       .       PASS    .       GT      0|0     0|0     0|1\r\n1       37      5       G       C       .       PASS    .       GT      0|1     0|1     0|0\r\n1       56      6       C       G       .       PASS    .       GT      0|1     0|1     0|0\r\n1       61      7       T       G       .       PASS    .       GT      0|0     0|0     1|0\r\n1       71      8       C       G       .       PASS    .       GT      0|1     0|1     0|0\r\n1       81      9       G       C       .       PASS    .       GT      1|0     0|0     0|0\r\n```\r\n\r\nBut, \r\n\r\n```python\r\nts = msprime.sim_ancestry(3, sequence_length=1e2, random_seed=1234)\r\nts = msprime.sim_mutations(ts, rate=0.01, random_seed=1234)\r\nprint(ts.as_vcf(individuals=[]))\r\n```\r\ngives\r\n```\r\n##fileformat=VCFv4.2\r\n##source=tskit 0.5.2.dev0\r\n##FILTER=<ID=PASS,Description=\"All filters passed\">\r\n##contig=<ID=1,length=100>\r\n##FORMAT=<ID=GT,Number=1,Type=String,Description=\"Genotype\">\r\n#CHROM  POS     ID      REF     ALT     QUAL    FILTER  INFO    FORMAT  tsk_0   tsk_1   tsk_2tsk_3    tsk_4   tsk_5\r\n1       2       0       C       T       .       PASS    .       GT      1       0       1    01       0\r\n1       15      1       G       T       .       PASS    .       GT      1       0       0    00       0\r\n1       19      2       A       T       .       PASS    .       GT      1       0       0    00       0\r\n1       29      3       C       A       .       PASS    .       GT      1       0       1    01       0\r\n1       35      4       T       C       .       PASS    .       GT      0       0       0    00       1\r\n1       37      5       G       C       .       PASS    .       GT      0       1       0    10       0\r\n1       56      6       C       G       .       PASS    .       GT      0       1       0    10       0\r\n1       61      7       T       G       .       PASS    .       GT      0       0       0    01       0\r\n1       71      8       C       G       .       PASS    .       GT      0       1       0    10       0\r\n1       81      9       G       C       .       PASS    .       GT      1       0       0    00       0\r\n```\r\n\r\nNotes tsk_2 and tsk_3 are joined here without a space.\r\n\r\nIdeally we'd probably output a \"sites only\" VCF here, but we can just throw an error here for now for simplicity.\r\n", "reactions": {"url": "https://api.github.com/repos/tskit-dev/tskit/issues/2446/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/tskit-dev/tskit/issues/2446/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/tskit-dev/tskit/issues/2429", "repository_url": "https://api.github.com/repos/tskit-dev/tskit", "labels_url": "https://api.github.com/repos/tskit-dev/tskit/issues/2429/labels{/name}", "comments_url": "https://api.github.com/repos/tskit-dev/tskit/issues/2429/comments", "events_url": "https://api.github.com/repos/tskit-dev/tskit/issues/2429/events", "html_url": "https://github.com/tskit-dev/tskit/issues/2429", "id": 1313841580, "node_id": "I_kwDOBzNZms5OT6Gs", "number": 2429, "title": "crash inside tskit in SLiM's CI tests", "user": {"login": "bhaller", "id": 10171101, "node_id": "MDQ6VXNlcjEwMTcxMTAx", "avatar_url": "https://avatars.githubusercontent.com/u/10171101?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bhaller", "html_url": "https://github.com/bhaller", "followers_url": "https://api.github.com/users/bhaller/followers", "following_url": "https://api.github.com/users/bhaller/following{/other_user}", "gists_url": "https://api.github.com/users/bhaller/gists{/gist_id}", "starred_url": "https://api.github.com/users/bhaller/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bhaller/subscriptions", "organizations_url": "https://api.github.com/users/bhaller/orgs", "repos_url": "https://api.github.com/users/bhaller/repos", "events_url": "https://api.github.com/users/bhaller/events{/privacy}", "received_events_url": "https://api.github.com/users/bhaller/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 831518500, "node_id": "MDU6TGFiZWw4MzE1MTg1MDA=", "url": "https://api.github.com/repos/tskit-dev/tskit/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/tskit-dev/tskit/milestones/36", "html_url": "https://github.com/tskit-dev/tskit/milestone/36", "labels_url": "https://api.github.com/repos/tskit-dev/tskit/milestones/36/labels", "id": 8197577, "node_id": "MI_kwDOBzNZms4AfRXJ", "number": 36, "title": "Python 0.5.3", "description": "Priority issues for the next release", "creator": {"login": "benjeffery", "id": 8552, "node_id": "MDQ6VXNlcjg1NTI=", "avatar_url": "https://avatars.githubusercontent.com/u/8552?v=4", "gravatar_id": "", "url": "https://api.github.com/users/benjeffery", "html_url": "https://github.com/benjeffery", "followers_url": "https://api.github.com/users/benjeffery/followers", "following_url": "https://api.github.com/users/benjeffery/following{/other_user}", "gists_url": "https://api.github.com/users/benjeffery/gists{/gist_id}", "starred_url": "https://api.github.com/users/benjeffery/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/benjeffery/subscriptions", "organizations_url": "https://api.github.com/users/benjeffery/orgs", "repos_url": "https://api.github.com/users/benjeffery/repos", "events_url": "https://api.github.com/users/benjeffery/events{/privacy}", "received_events_url": "https://api.github.com/users/benjeffery/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 20, "state": "closed", "created_at": "2022-07-15T08:54:29Z", "updated_at": "2022-10-04T11:35:26Z", "due_on": null, "closed_at": "2022-10-04T11:35:26Z"}, "comments": 45, "created_at": "2022-07-21T21:49:00Z", "updated_at": "2022-07-27T14:26:37Z", "closed_at": "2022-07-27T14:26:36Z", "author_association": "NONE", "active_lock_reason": null, "body": "The original issue is here:\r\n\r\nhttps://github.com/MesserLab/SLiM/issues/334\r\n\r\nSo see that issue for details.  The important bit is the crash log on GitHub Actions here:\r\n\r\nhttps://github.com/MesserLab/SLiM/runs/7205270523?check_suite_focus=true\r\n\r\nAfter it dawned on me (with illumination provided by @petrelharp) that the log in GitHub Actions actually provided a full backtrace already (I'm not used to Python-style backtraces :->), it became clear that the crash appears to be in variant stuff inside `genotypes.py` in tskit.  It looks like it is triggered by `for var in ts.variants(isolated_as_missing=False):` at line 23 in SLiM's `test_consistency.py` test script.  Line numbers have shifted slightly, but the crash is somewhere vaguely around here: https://github.com/tskit-dev/tskit/blob/c12c1608aac8e2e826e53172c94c398d1972333b/python/tskit/genotypes.py#L237.\r\n\r\nI believe @petrelharp is currently looking into this, but since it's probably an issue with the new variant stuff, probably @benjeffery  would be interested?", "reactions": {"url": "https://api.github.com/repos/tskit-dev/tskit/issues/2429/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/tskit-dev/tskit/issues/2429/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/tskit-dev/tskit/issues/2428", "repository_url": "https://api.github.com/repos/tskit-dev/tskit", "labels_url": "https://api.github.com/repos/tskit-dev/tskit/issues/2428/labels{/name}", "comments_url": "https://api.github.com/repos/tskit-dev/tskit/issues/2428/comments", "events_url": "https://api.github.com/repos/tskit-dev/tskit/issues/2428/events", "html_url": "https://github.com/tskit-dev/tskit/issues/2428", "id": 1313270239, "node_id": "I_kwDOBzNZms5ORunf", "number": 2428, "title": "Referring to tables in TableCollection leaks memory", "user": {"login": "jeromekelleher", "id": 2664569, "node_id": "MDQ6VXNlcjI2NjQ1Njk=", "avatar_url": "https://avatars.githubusercontent.com/u/2664569?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jeromekelleher", "html_url": "https://github.com/jeromekelleher", "followers_url": "https://api.github.com/users/jeromekelleher/followers", "following_url": "https://api.github.com/users/jeromekelleher/following{/other_user}", "gists_url": "https://api.github.com/users/jeromekelleher/gists{/gist_id}", "starred_url": "https://api.github.com/users/jeromekelleher/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jeromekelleher/subscriptions", "organizations_url": "https://api.github.com/users/jeromekelleher/orgs", "repos_url": "https://api.github.com/users/jeromekelleher/repos", "events_url": "https://api.github.com/users/jeromekelleher/events{/privacy}", "received_events_url": "https://api.github.com/users/jeromekelleher/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 831518500, "node_id": "MDU6TGFiZWw4MzE1MTg1MDA=", "url": "https://api.github.com/repos/tskit-dev/tskit/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}, {"id": 2385559214, "node_id": "MDU6TGFiZWwyMzg1NTU5MjE0", "url": "https://api.github.com/repos/tskit-dev/tskit/labels/Python%20API", "name": "Python API", "color": "d12add", "default": false, "description": "Issue is about the Python API"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/tskit-dev/tskit/milestones/33", "html_url": "https://github.com/tskit-dev/tskit/milestone/33", "labels_url": "https://api.github.com/repos/tskit-dev/tskit/milestones/33/labels", "id": 7846835, "node_id": "MI_kwDOBzNZms4Ad7uz", "number": 33, "title": "Python 0.5.5 (paper)", "description": "Feature release for features needed for the tskit paper.", "creator": {"login": "benjeffery", "id": 8552, "node_id": "MDQ6VXNlcjg1NTI=", "avatar_url": "https://avatars.githubusercontent.com/u/8552?v=4", "gravatar_id": "", "url": "https://api.github.com/users/benjeffery", "html_url": "https://github.com/benjeffery", "followers_url": "https://api.github.com/users/benjeffery/followers", "following_url": "https://api.github.com/users/benjeffery/following{/other_user}", "gists_url": "https://api.github.com/users/benjeffery/gists{/gist_id}", "starred_url": "https://api.github.com/users/benjeffery/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/benjeffery/subscriptions", "organizations_url": "https://api.github.com/users/benjeffery/orgs", "repos_url": "https://api.github.com/users/benjeffery/repos", "events_url": "https://api.github.com/users/benjeffery/events{/privacy}", "received_events_url": "https://api.github.com/users/benjeffery/received_events", "type": "User", "site_admin": false}, "open_issues": 14, "closed_issues": 15, "state": "open", "created_at": "2022-04-06T19:48:34Z", "updated_at": "2023-04-21T09:10:22Z", "due_on": null, "closed_at": null}, "comments": 9, "created_at": "2022-07-21T13:33:23Z", "updated_at": "2022-07-27T13:55:18Z", "closed_at": "2022-07-27T13:55:18Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "See analysis in #2424 for details, and e.g., #2427.\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/tskit-dev/tskit/issues/2428/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/tskit-dev/tskit/issues/2428/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/tskit-dev/tskit/issues/2427", "repository_url": "https://api.github.com/repos/tskit-dev/tskit", "labels_url": "https://api.github.com/repos/tskit-dev/tskit/issues/2427/labels{/name}", "comments_url": "https://api.github.com/repos/tskit-dev/tskit/issues/2427/comments", "events_url": "https://api.github.com/repos/tskit-dev/tskit/issues/2427/events", "html_url": "https://github.com/tskit-dev/tskit/issues/2427", "id": 1313262761, "node_id": "I_kwDOBzNZms5ORsyp", "number": 2427, "title": "Memory leak in ts.variants()", "user": {"login": "jeromekelleher", "id": 2664569, "node_id": "MDQ6VXNlcjI2NjQ1Njk=", "avatar_url": "https://avatars.githubusercontent.com/u/2664569?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jeromekelleher", "html_url": "https://github.com/jeromekelleher", "followers_url": "https://api.github.com/users/jeromekelleher/followers", "following_url": "https://api.github.com/users/jeromekelleher/following{/other_user}", "gists_url": "https://api.github.com/users/jeromekelleher/gists{/gist_id}", "starred_url": "https://api.github.com/users/jeromekelleher/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jeromekelleher/subscriptions", "organizations_url": "https://api.github.com/users/jeromekelleher/orgs", "repos_url": "https://api.github.com/users/jeromekelleher/repos", "events_url": "https://api.github.com/users/jeromekelleher/events{/privacy}", "received_events_url": "https://api.github.com/users/jeromekelleher/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 831518500, "node_id": "MDU6TGFiZWw4MzE1MTg1MDA=", "url": "https://api.github.com/repos/tskit-dev/tskit/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}, {"id": 2385559214, "node_id": "MDU6TGFiZWwyMzg1NTU5MjE0", "url": "https://api.github.com/repos/tskit-dev/tskit/labels/Python%20API", "name": "Python API", "color": "d12add", "default": false, "description": "Issue is about the Python API"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/tskit-dev/tskit/milestones/36", "html_url": "https://github.com/tskit-dev/tskit/milestone/36", "labels_url": "https://api.github.com/repos/tskit-dev/tskit/milestones/36/labels", "id": 8197577, "node_id": "MI_kwDOBzNZms4AfRXJ", "number": 36, "title": "Python 0.5.3", "description": "Priority issues for the next release", "creator": {"login": "benjeffery", "id": 8552, "node_id": "MDQ6VXNlcjg1NTI=", "avatar_url": "https://avatars.githubusercontent.com/u/8552?v=4", "gravatar_id": "", "url": "https://api.github.com/users/benjeffery", "html_url": "https://github.com/benjeffery", "followers_url": "https://api.github.com/users/benjeffery/followers", "following_url": "https://api.github.com/users/benjeffery/following{/other_user}", "gists_url": "https://api.github.com/users/benjeffery/gists{/gist_id}", "starred_url": "https://api.github.com/users/benjeffery/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/benjeffery/subscriptions", "organizations_url": "https://api.github.com/users/benjeffery/orgs", "repos_url": "https://api.github.com/users/benjeffery/repos", "events_url": "https://api.github.com/users/benjeffery/events{/privacy}", "received_events_url": "https://api.github.com/users/benjeffery/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 20, "state": "closed", "created_at": "2022-07-15T08:54:29Z", "updated_at": "2022-10-04T11:35:26Z", "due_on": null, "closed_at": "2022-10-04T11:35:26Z"}, "comments": 0, "created_at": "2022-07-21T13:28:18Z", "updated_at": "2022-07-26T10:59:57Z", "closed_at": "2022-07-26T10:59:57Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "Benchmark:\r\n```python\r\nimport msprime\r\nimport time\r\n\r\n\r\nbefore = time.perf_counter()\r\nts = msprime.sim_ancestry(\r\n    10000,\r\n    sequence_length=1000000,\r\n    population_size=10_000,\r\n    recombination_rate=1e-8,\r\n    random_seed=1234,\r\n)\r\nts = msprime.sim_mutations(ts, rate=1e-7, random_seed=1)\r\nduration = time.perf_counter() - before\r\nprint(f\"Simulation of {ts.num_trees} trees done after {duration:.2f} seconds\")\r\n\r\nfor _ in range(10):\r\n    for var in ts.variants():\r\n        pass\r\n```\r\nResult:\r\n![vars-before](https://user-images.githubusercontent.com/2664569/180224867-e733f2ea-afe4-49da-969a-8d908b603b71.png)\r\n\r\n\r\nThis is because the version of variants introduced in #2397 always looks at ``ts.tables.sites.position``. This was released in  0.5.1.\r\n", "reactions": {"url": "https://api.github.com/repos/tskit-dev/tskit/issues/2427/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/tskit-dev/tskit/issues/2427/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/tskit-dev/tskit/issues/2423", "repository_url": "https://api.github.com/repos/tskit-dev/tskit", "labels_url": "https://api.github.com/repos/tskit-dev/tskit/issues/2423/labels{/name}", "comments_url": "https://api.github.com/repos/tskit-dev/tskit/issues/2423/comments", "events_url": "https://api.github.com/repos/tskit-dev/tskit/issues/2423/events", "html_url": "https://github.com/tskit-dev/tskit/issues/2423", "id": 1311255707, "node_id": "I_kwDOBzNZms5OKCyb", "number": 2423, "title": "Memory leak in ``timedesc`` node order.", "user": {"login": "Bai-fengting", "id": 108392115, "node_id": "U_kgDOBnXusw", "avatar_url": "https://avatars.githubusercontent.com/u/108392115?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Bai-fengting", "html_url": "https://github.com/Bai-fengting", "followers_url": "https://api.github.com/users/Bai-fengting/followers", "following_url": "https://api.github.com/users/Bai-fengting/following{/other_user}", "gists_url": "https://api.github.com/users/Bai-fengting/gists{/gist_id}", "starred_url": "https://api.github.com/users/Bai-fengting/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Bai-fengting/subscriptions", "organizations_url": "https://api.github.com/users/Bai-fengting/orgs", "repos_url": "https://api.github.com/users/Bai-fengting/repos", "events_url": "https://api.github.com/users/Bai-fengting/events{/privacy}", "received_events_url": "https://api.github.com/users/Bai-fengting/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 831518500, "node_id": "MDU6TGFiZWw4MzE1MTg1MDA=", "url": "https://api.github.com/repos/tskit-dev/tskit/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/tskit-dev/tskit/milestones/36", "html_url": "https://github.com/tskit-dev/tskit/milestone/36", "labels_url": "https://api.github.com/repos/tskit-dev/tskit/milestones/36/labels", "id": 8197577, "node_id": "MI_kwDOBzNZms4AfRXJ", "number": 36, "title": "Python 0.5.3", "description": "Priority issues for the next release", "creator": {"login": "benjeffery", "id": 8552, "node_id": "MDQ6VXNlcjg1NTI=", "avatar_url": "https://avatars.githubusercontent.com/u/8552?v=4", "gravatar_id": "", "url": "https://api.github.com/users/benjeffery", "html_url": "https://github.com/benjeffery", "followers_url": "https://api.github.com/users/benjeffery/followers", "following_url": "https://api.github.com/users/benjeffery/following{/other_user}", "gists_url": "https://api.github.com/users/benjeffery/gists{/gist_id}", "starred_url": "https://api.github.com/users/benjeffery/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/benjeffery/subscriptions", "organizations_url": "https://api.github.com/users/benjeffery/orgs", "repos_url": "https://api.github.com/users/benjeffery/repos", "events_url": "https://api.github.com/users/benjeffery/events{/privacy}", "received_events_url": "https://api.github.com/users/benjeffery/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 20, "state": "closed", "created_at": "2022-07-15T08:54:29Z", "updated_at": "2022-10-04T11:35:26Z", "due_on": null, "closed_at": "2022-10-04T11:35:26Z"}, "comments": 5, "created_at": "2022-07-20T14:42:29Z", "updated_at": "2022-07-26T10:59:57Z", "closed_at": "2022-07-26T10:59:57Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hello,\r\nWhen I running the flowing code, I found the memroy increased very quickly (until more that 100G and I killed it).\r\nIt is wired, because in each iteration there are only one tree in process. Why the memory inceased along with the iteration.\r\nFurthermor, when I add ts.nbytes, the memory  no icreased so quickly. But the speed became slower obviously.\r\nHow I can fix that?\r\n```python\r\nfor i in range(0, 10000):\r\n#    ts.nbytes\r\n    tree_i = ts.at_index(i)\r\n    num_lineages = {}\r\n    count = 1\r\n    for node in tree_i.nodes(order=\"timedesc\"):\r\n        if tree_i.is_sample(node):\r\n            num_lineages[node] = tree_i.num_samples()\r\n        else:\r\n            num_lineages[node] = count\r\n            count += tree_i.num_children(node) - 1\r\n```\r\n", "reactions": {"url": "https://api.github.com/repos/tskit-dev/tskit/issues/2423/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/tskit-dev/tskit/issues/2423/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/tskit-dev/tskit/issues/2400", "repository_url": "https://api.github.com/repos/tskit-dev/tskit", "labels_url": "https://api.github.com/repos/tskit-dev/tskit/issues/2400/labels{/name}", "comments_url": "https://api.github.com/repos/tskit-dev/tskit/issues/2400/comments", "events_url": "https://api.github.com/repos/tskit-dev/tskit/issues/2400/events", "html_url": "https://github.com/tskit-dev/tskit/issues/2400", "id": 1302639558, "node_id": "I_kwDOBzNZms5NpLPG", "number": 2400, "title": "Segfault on accessing variant.samples", "user": {"login": "hyanwong", "id": 4699014, "node_id": "MDQ6VXNlcjQ2OTkwMTQ=", "avatar_url": "https://avatars.githubusercontent.com/u/4699014?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hyanwong", "html_url": "https://github.com/hyanwong", "followers_url": "https://api.github.com/users/hyanwong/followers", "following_url": "https://api.github.com/users/hyanwong/following{/other_user}", "gists_url": "https://api.github.com/users/hyanwong/gists{/gist_id}", "starred_url": "https://api.github.com/users/hyanwong/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hyanwong/subscriptions", "organizations_url": "https://api.github.com/users/hyanwong/orgs", "repos_url": "https://api.github.com/users/hyanwong/repos", "events_url": "https://api.github.com/users/hyanwong/events{/privacy}", "received_events_url": "https://api.github.com/users/hyanwong/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 831518500, "node_id": "MDU6TGFiZWw4MzE1MTg1MDA=", "url": "https://api.github.com/repos/tskit-dev/tskit/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/tskit-dev/tskit/milestones/35", "html_url": "https://github.com/tskit-dev/tskit/milestone/35", "labels_url": "https://api.github.com/repos/tskit-dev/tskit/milestones/35/labels", "id": 8132926, "node_id": "MI_kwDOBzNZms4AfBk-", "number": 35, "title": "Python 0.5.1", "description": "Priority issues for the next release", "creator": {"login": "benjeffery", "id": 8552, "node_id": "MDQ6VXNlcjg1NTI=", "avatar_url": "https://avatars.githubusercontent.com/u/8552?v=4", "gravatar_id": "", "url": "https://api.github.com/users/benjeffery", "html_url": "https://github.com/benjeffery", "followers_url": "https://api.github.com/users/benjeffery/followers", "following_url": "https://api.github.com/users/benjeffery/following{/other_user}", "gists_url": "https://api.github.com/users/benjeffery/gists{/gist_id}", "starred_url": "https://api.github.com/users/benjeffery/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/benjeffery/subscriptions", "organizations_url": "https://api.github.com/users/benjeffery/orgs", "repos_url": "https://api.github.com/users/benjeffery/repos", "events_url": "https://api.github.com/users/benjeffery/events{/privacy}", "received_events_url": "https://api.github.com/users/benjeffery/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 1, "state": "closed", "created_at": "2022-06-27T14:14:43Z", "updated_at": "2022-07-15T08:55:28Z", "due_on": null, "closed_at": "2022-07-15T08:55:28Z"}, "comments": 2, "created_at": "2022-07-12T21:27:06Z", "updated_at": "2022-07-14T11:03:05Z", "closed_at": "2022-07-14T11:03:05Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "This segfaults for me, and I think it does on CI too.\r\n\r\n```python\r\nimport msprime\r\nts = msprime.simulate(10, mutation_rate=1)\r\nnext(ts.variants()).samples\r\n```", "reactions": {"url": "https://api.github.com/repos/tskit-dev/tskit/issues/2400/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/tskit-dev/tskit/issues/2400/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/tskit-dev/tskit/issues/2379", "repository_url": "https://api.github.com/repos/tskit-dev/tskit", "labels_url": "https://api.github.com/repos/tskit-dev/tskit/issues/2379/labels{/name}", "comments_url": "https://api.github.com/repos/tskit-dev/tskit/issues/2379/comments", "events_url": "https://api.github.com/repos/tskit-dev/tskit/issues/2379/events", "html_url": "https://github.com/tskit-dev/tskit/pull/2379", "id": 1293295250, "node_id": "PR_kwDOBzNZms46zg1n", "number": 2379, "title": "Fix bugs in test_empty_files and test_empty_files_sequence_length", "user": {"login": "szhan", "id": 5580375, "node_id": "MDQ6VXNlcjU1ODAzNzU=", "avatar_url": "https://avatars.githubusercontent.com/u/5580375?v=4", "gravatar_id": "", "url": "https://api.github.com/users/szhan", "html_url": "https://github.com/szhan", "followers_url": "https://api.github.com/users/szhan/followers", "following_url": "https://api.github.com/users/szhan/following{/other_user}", "gists_url": "https://api.github.com/users/szhan/gists{/gist_id}", "starred_url": "https://api.github.com/users/szhan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/szhan/subscriptions", "organizations_url": "https://api.github.com/users/szhan/orgs", "repos_url": "https://api.github.com/users/szhan/repos", "events_url": "https://api.github.com/users/szhan/events{/privacy}", "received_events_url": "https://api.github.com/users/szhan/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 831518500, "node_id": "MDU6TGFiZWw4MzE1MTg1MDA=", "url": "https://api.github.com/repos/tskit-dev/tskit/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}, {"id": 2385559214, "node_id": "MDU6TGFiZWwyMzg1NTU5MjE0", "url": "https://api.github.com/repos/tskit-dev/tskit/labels/Python%20API", "name": "Python API", "color": "d12add", "default": false, "description": "Issue is about the Python API"}], "state": "closed", "locked": false, "assignee": {"login": "szhan", "id": 5580375, "node_id": "MDQ6VXNlcjU1ODAzNzU=", "avatar_url": "https://avatars.githubusercontent.com/u/5580375?v=4", "gravatar_id": "", "url": "https://api.github.com/users/szhan", "html_url": "https://github.com/szhan", "followers_url": "https://api.github.com/users/szhan/followers", "following_url": "https://api.github.com/users/szhan/following{/other_user}", "gists_url": "https://api.github.com/users/szhan/gists{/gist_id}", "starred_url": "https://api.github.com/users/szhan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/szhan/subscriptions", "organizations_url": "https://api.github.com/users/szhan/orgs", "repos_url": "https://api.github.com/users/szhan/repos", "events_url": "https://api.github.com/users/szhan/events{/privacy}", "received_events_url": "https://api.github.com/users/szhan/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "szhan", "id": 5580375, "node_id": "MDQ6VXNlcjU1ODAzNzU=", "avatar_url": "https://avatars.githubusercontent.com/u/5580375?v=4", "gravatar_id": "", "url": "https://api.github.com/users/szhan", "html_url": "https://github.com/szhan", "followers_url": "https://api.github.com/users/szhan/followers", "following_url": "https://api.github.com/users/szhan/following{/other_user}", "gists_url": "https://api.github.com/users/szhan/gists{/gist_id}", "starred_url": "https://api.github.com/users/szhan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/szhan/subscriptions", "organizations_url": "https://api.github.com/users/szhan/orgs", "repos_url": "https://api.github.com/users/szhan/repos", "events_url": "https://api.github.com/users/szhan/events{/privacy}", "received_events_url": "https://api.github.com/users/szhan/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 2, "created_at": "2022-07-04T15:08:55Z", "updated_at": "2022-07-04T16:37:01Z", "closed_at": "2022-07-04T16:23:49Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/tskit-dev/tskit/pulls/2379", "html_url": "https://github.com/tskit-dev/tskit/pull/2379", "diff_url": "https://github.com/tskit-dev/tskit/pull/2379.diff", "patch_url": "https://github.com/tskit-dev/tskit/pull/2379.patch", "merged_at": "2022-07-04T16:23:49Z"}, "body": "Fixes #2373 ", "reactions": {"url": "https://api.github.com/repos/tskit-dev/tskit/issues/2379/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/tskit-dev/tskit/issues/2379/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/tskit-dev/tskit/issues/2378", "repository_url": "https://api.github.com/repos/tskit-dev/tskit", "labels_url": "https://api.github.com/repos/tskit-dev/tskit/issues/2378/labels{/name}", "comments_url": "https://api.github.com/repos/tskit-dev/tskit/issues/2378/comments", "events_url": "https://api.github.com/repos/tskit-dev/tskit/issues/2378/events", "html_url": "https://github.com/tskit-dev/tskit/pull/2378", "id": 1293224587, "node_id": "PR_kwDOBzNZms46zRcf", "number": 2378, "title": "Fix bugs in test_empty_files and test_empty_files_sequence_length", "user": {"login": "szhan", "id": 5580375, "node_id": "MDQ6VXNlcjU1ODAzNzU=", "avatar_url": "https://avatars.githubusercontent.com/u/5580375?v=4", "gravatar_id": "", "url": "https://api.github.com/users/szhan", "html_url": "https://github.com/szhan", "followers_url": "https://api.github.com/users/szhan/followers", "following_url": "https://api.github.com/users/szhan/following{/other_user}", "gists_url": "https://api.github.com/users/szhan/gists{/gist_id}", "starred_url": "https://api.github.com/users/szhan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/szhan/subscriptions", "organizations_url": "https://api.github.com/users/szhan/orgs", "repos_url": "https://api.github.com/users/szhan/repos", "events_url": "https://api.github.com/users/szhan/events{/privacy}", "received_events_url": "https://api.github.com/users/szhan/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 831518500, "node_id": "MDU6TGFiZWw4MzE1MTg1MDA=", "url": "https://api.github.com/repos/tskit-dev/tskit/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}, {"id": 2385559214, "node_id": "MDU6TGFiZWwyMzg1NTU5MjE0", "url": "https://api.github.com/repos/tskit-dev/tskit/labels/Python%20API", "name": "Python API", "color": "d12add", "default": false, "description": "Issue is about the Python API"}], "state": "closed", "locked": false, "assignee": {"login": "szhan", "id": 5580375, "node_id": "MDQ6VXNlcjU1ODAzNzU=", "avatar_url": "https://avatars.githubusercontent.com/u/5580375?v=4", "gravatar_id": "", "url": "https://api.github.com/users/szhan", "html_url": "https://github.com/szhan", "followers_url": "https://api.github.com/users/szhan/followers", "following_url": "https://api.github.com/users/szhan/following{/other_user}", "gists_url": "https://api.github.com/users/szhan/gists{/gist_id}", "starred_url": "https://api.github.com/users/szhan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/szhan/subscriptions", "organizations_url": "https://api.github.com/users/szhan/orgs", "repos_url": "https://api.github.com/users/szhan/repos", "events_url": "https://api.github.com/users/szhan/events{/privacy}", "received_events_url": "https://api.github.com/users/szhan/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "szhan", "id": 5580375, "node_id": "MDQ6VXNlcjU1ODAzNzU=", "avatar_url": "https://avatars.githubusercontent.com/u/5580375?v=4", "gravatar_id": "", "url": "https://api.github.com/users/szhan", "html_url": "https://github.com/szhan", "followers_url": "https://api.github.com/users/szhan/followers", "following_url": "https://api.github.com/users/szhan/following{/other_user}", "gists_url": "https://api.github.com/users/szhan/gists{/gist_id}", "starred_url": "https://api.github.com/users/szhan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/szhan/subscriptions", "organizations_url": "https://api.github.com/users/szhan/orgs", "repos_url": "https://api.github.com/users/szhan/repos", "events_url": "https://api.github.com/users/szhan/events{/privacy}", "received_events_url": "https://api.github.com/users/szhan/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 2, "created_at": "2022-07-04T14:05:55Z", "updated_at": "2022-07-04T14:12:31Z", "closed_at": "2022-07-04T14:11:56Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/tskit-dev/tskit/pulls/2378", "html_url": "https://github.com/tskit-dev/tskit/pull/2378", "diff_url": "https://github.com/tskit-dev/tskit/pull/2378.diff", "patch_url": "https://github.com/tskit-dev/tskit/pull/2378.patch", "merged_at": null}, "body": "Fixes #2373 ", "reactions": {"url": "https://api.github.com/repos/tskit-dev/tskit/issues/2378/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/tskit-dev/tskit/issues/2378/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/tskit-dev/tskit/issues/2373", "repository_url": "https://api.github.com/repos/tskit-dev/tskit", "labels_url": "https://api.github.com/repos/tskit-dev/tskit/issues/2373/labels{/name}", "comments_url": "https://api.github.com/repos/tskit-dev/tskit/issues/2373/comments", "events_url": "https://api.github.com/repos/tskit-dev/tskit/issues/2373/events", "html_url": "https://github.com/tskit-dev/tskit/issues/2373", "id": 1290098157, "node_id": "I_kwDOBzNZms5M5VXt", "number": 2373, "title": "Bug in test_empty_files and test_empty_files_sequence_length?", "user": {"login": "szhan", "id": 5580375, "node_id": "MDQ6VXNlcjU1ODAzNzU=", "avatar_url": "https://avatars.githubusercontent.com/u/5580375?v=4", "gravatar_id": "", "url": "https://api.github.com/users/szhan", "html_url": "https://github.com/szhan", "followers_url": "https://api.github.com/users/szhan/followers", "following_url": "https://api.github.com/users/szhan/following{/other_user}", "gists_url": "https://api.github.com/users/szhan/gists{/gist_id}", "starred_url": "https://api.github.com/users/szhan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/szhan/subscriptions", "organizations_url": "https://api.github.com/users/szhan/orgs", "repos_url": "https://api.github.com/users/szhan/repos", "events_url": "https://api.github.com/users/szhan/events{/privacy}", "received_events_url": "https://api.github.com/users/szhan/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 831518500, "node_id": "MDU6TGFiZWw4MzE1MTg1MDA=", "url": "https://api.github.com/repos/tskit-dev/tskit/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}, {"id": 2385559214, "node_id": "MDU6TGFiZWwyMzg1NTU5MjE0", "url": "https://api.github.com/repos/tskit-dev/tskit/labels/Python%20API", "name": "Python API", "color": "d12add", "default": false, "description": "Issue is about the Python API"}], "state": "closed", "locked": false, "assignee": {"login": "szhan", "id": 5580375, "node_id": "MDQ6VXNlcjU1ODAzNzU=", "avatar_url": "https://avatars.githubusercontent.com/u/5580375?v=4", "gravatar_id": "", "url": "https://api.github.com/users/szhan", "html_url": "https://github.com/szhan", "followers_url": "https://api.github.com/users/szhan/followers", "following_url": "https://api.github.com/users/szhan/following{/other_user}", "gists_url": "https://api.github.com/users/szhan/gists{/gist_id}", "starred_url": "https://api.github.com/users/szhan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/szhan/subscriptions", "organizations_url": "https://api.github.com/users/szhan/orgs", "repos_url": "https://api.github.com/users/szhan/repos", "events_url": "https://api.github.com/users/szhan/events{/privacy}", "received_events_url": "https://api.github.com/users/szhan/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "szhan", "id": 5580375, "node_id": "MDQ6VXNlcjU1ODAzNzU=", "avatar_url": "https://avatars.githubusercontent.com/u/5580375?v=4", "gravatar_id": "", "url": "https://api.github.com/users/szhan", "html_url": "https://github.com/szhan", "followers_url": "https://api.github.com/users/szhan/followers", "following_url": "https://api.github.com/users/szhan/following{/other_user}", "gists_url": "https://api.github.com/users/szhan/gists{/gist_id}", "starred_url": "https://api.github.com/users/szhan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/szhan/subscriptions", "organizations_url": "https://api.github.com/users/szhan/orgs", "repos_url": "https://api.github.com/users/szhan/repos", "events_url": "https://api.github.com/users/szhan/events{/privacy}", "received_events_url": "https://api.github.com/users/szhan/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 3, "created_at": "2022-06-30T12:54:51Z", "updated_at": "2022-07-04T16:23:49Z", "closed_at": "2022-07-04T16:23:49Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Are `test_empty_files` and `test_empty_files_sequence_length` in `test_highlevel.py` supposed to cover instances when an individuals file is empty? If so, then it may be a bug.\r\n\r\nRight now, the code is:\r\n```\r\ndef test_empty_files(self):\r\n    nodes_file = io.StringIO(\"is_sample\\ttime\\n\")\r\n    edges_file = io.StringIO(\"left\\tright\\tparent\\tchild\\n\")\r\n    sites_file = io.StringIO(\"position\\tancestral_state\\n\")\r\n    mutations_file = io.StringIO(\"site\\tnode\\tderived_state\\n\")\r\n    migrations_file = io.StringIO(\"left\\tright\\tnode\\tsource\\tdest\\ttime\\n\")\r\n    with pytest.raises(_tskit.LibraryError):\r\n        tskit.load_text(\r\n            nodes=nodes_file,\r\n            edges=edges_file,\r\n            sites=sites_file,\r\n            mutations=mutations_file,\r\n            migrations=migrations_file,\r\n        )\r\n\r\ndef test_empty_files_sequence_length(self):\r\n    nodes_file = io.StringIO(\"is_sample\\ttime\\n\")\r\n    edges_file = io.StringIO(\"left\\tright\\tparent\\tchild\\n\")\r\n    sites_file = io.StringIO(\"position\\tancestral_state\\n\")\r\n    mutations_file = io.StringIO(\"site\\tnode\\tderived_state\\n\")\r\n    migrations_file = io.StringIO(\"left\\tright\\tnode\\tsource\\tdest\\ttime\\n\")\r\n    ts = tskit.load_text(\r\n                nodes=nodes_file,\r\n                edges=edges_file,\r\n                sites=sites_file,\r\n                mutations=mutations_file,\r\n                migrations=migrations_file,\r\n                sequence_length=100,\r\n    )\r\n    assert ts.sequence_length == 100\r\n    assert ts.num_nodes == 0\r\n    assert ts.num_edges == 0\r\n    assert ts.num_sites == 0\r\n    assert ts.num_edges == 0\r\n    assert ts.num_migrations == 0\r\n```\r\n\r\nI think that it should be:\r\n```\r\ndef test_empty_files(self):\r\n    individuals_files = io.StringIO(\"flags\\n\") # FIX\r\n    nodes_file = io.StringIO(\"is_sample\\ttime\\n\")\r\n    edges_file = io.StringIO(\"left\\tright\\tparent\\tchild\\n\")\r\n    sites_file = io.StringIO(\"position\\tancestral_state\\n\")\r\n    mutations_file = io.StringIO(\"site\\tnode\\tderived_state\\n\")\r\n    migrations_file = io.StringIO(\"left\\tright\\tnode\\tsource\\tdest\\ttime\\n\")\r\n    with pytest.raises(_tskit.LibraryError):\r\n        tskit.load_text(\r\n            individuals=individuals_file, # FIX\r\n            nodes=nodes_file,\r\n            edges=edges_file,\r\n            sites=sites_file,\r\n            mutations=mutations_file,\r\n            migrations=migrations_file,\r\n        )\r\n\r\ndef test_empty_files_sequence_length(self):\r\n    individuals_files = io.StringIO(\"flags\\n\") # FIX\r\n    nodes_file = io.StringIO(\"is_sample\\ttime\\n\")\r\n    edges_file = io.StringIO(\"left\\tright\\tparent\\tchild\\n\")\r\n    sites_file = io.StringIO(\"position\\tancestral_state\\n\")\r\n    mutations_file = io.StringIO(\"site\\tnode\\tderived_state\\n\")\r\n    migrations_file = io.StringIO(\"left\\tright\\tnode\\tsource\\tdest\\ttime\\n\")\r\n    ts = tskit.load_text(\r\n                individuals=individuals_file, # FIX\r\n                nodes=nodes_file,\r\n                edges=edges_file,\r\n                sites=sites_file,\r\n                mutations=mutations_file,\r\n                migrations=migrations_file,\r\n                sequence_length=100,\r\n    )\r\n    assert ts.sequence_length == 100\r\n    assert ts.num_individuals == 0 # FIX\r\n    assert ts.num_nodes == 0\r\n    assert ts.num_edges == 0\r\n    assert ts.num_sites == 0\r\n    assert ts.num_mutations == 0\r\n    assert ts.num_migrations == 0\r\n```", "reactions": {"url": "https://api.github.com/repos/tskit-dev/tskit/issues/2373/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/tskit-dev/tskit/issues/2373/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/tskit-dev/tskit/issues/2309", "repository_url": "https://api.github.com/repos/tskit-dev/tskit", "labels_url": "https://api.github.com/repos/tskit-dev/tskit/issues/2309/labels{/name}", "comments_url": "https://api.github.com/repos/tskit-dev/tskit/issues/2309/comments", "events_url": "https://api.github.com/repos/tskit-dev/tskit/issues/2309/events", "html_url": "https://github.com/tskit-dev/tskit/issues/2309", "id": 1253409600, "node_id": "I_kwDOBzNZms5KtYNA", "number": 2309, "title": "kc_distance() returns an error \"sample_lists option must be enabled to perform this operation\"", "user": {"login": "gtsambos", "id": 17755074, "node_id": "MDQ6VXNlcjE3NzU1MDc0", "avatar_url": "https://avatars.githubusercontent.com/u/17755074?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gtsambos", "html_url": "https://github.com/gtsambos", "followers_url": "https://api.github.com/users/gtsambos/followers", "following_url": "https://api.github.com/users/gtsambos/following{/other_user}", "gists_url": "https://api.github.com/users/gtsambos/gists{/gist_id}", "starred_url": "https://api.github.com/users/gtsambos/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gtsambos/subscriptions", "organizations_url": "https://api.github.com/users/gtsambos/orgs", "repos_url": "https://api.github.com/users/gtsambos/repos", "events_url": "https://api.github.com/users/gtsambos/events{/privacy}", "received_events_url": "https://api.github.com/users/gtsambos/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 831518500, "node_id": "MDU6TGFiZWw4MzE1MTg1MDA=", "url": "https://api.github.com/repos/tskit-dev/tskit/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}, {"id": 2385559214, "node_id": "MDU6TGFiZWwyMzg1NTU5MjE0", "url": "https://api.github.com/repos/tskit-dev/tskit/labels/Python%20API", "name": "Python API", "color": "d12add", "default": false, "description": "Issue is about the Python API"}], "state": "closed", "locked": false, "assignee": {"login": "benjeffery", "id": 8552, "node_id": "MDQ6VXNlcjg1NTI=", "avatar_url": "https://avatars.githubusercontent.com/u/8552?v=4", "gravatar_id": "", "url": "https://api.github.com/users/benjeffery", "html_url": "https://github.com/benjeffery", "followers_url": "https://api.github.com/users/benjeffery/followers", "following_url": "https://api.github.com/users/benjeffery/following{/other_user}", "gists_url": "https://api.github.com/users/benjeffery/gists{/gist_id}", "starred_url": "https://api.github.com/users/benjeffery/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/benjeffery/subscriptions", "organizations_url": "https://api.github.com/users/benjeffery/orgs", "repos_url": "https://api.github.com/users/benjeffery/repos", "events_url": "https://api.github.com/users/benjeffery/events{/privacy}", "received_events_url": "https://api.github.com/users/benjeffery/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "benjeffery", "id": 8552, "node_id": "MDQ6VXNlcjg1NTI=", "avatar_url": "https://avatars.githubusercontent.com/u/8552?v=4", "gravatar_id": "", "url": "https://api.github.com/users/benjeffery", "html_url": "https://github.com/benjeffery", "followers_url": "https://api.github.com/users/benjeffery/followers", "following_url": "https://api.github.com/users/benjeffery/following{/other_user}", "gists_url": "https://api.github.com/users/benjeffery/gists{/gist_id}", "starred_url": "https://api.github.com/users/benjeffery/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/benjeffery/subscriptions", "organizations_url": "https://api.github.com/users/benjeffery/orgs", "repos_url": "https://api.github.com/users/benjeffery/repos", "events_url": "https://api.github.com/users/benjeffery/events{/privacy}", "received_events_url": "https://api.github.com/users/benjeffery/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/tskit-dev/tskit/milestones/32", "html_url": "https://github.com/tskit-dev/tskit/milestone/32", "labels_url": "https://api.github.com/repos/tskit-dev/tskit/milestones/32/labels", "id": 7846316, "node_id": "MI_kwDOBzNZms4Ad7ms", "number": 32, "title": "Python 0.5.0", "description": "C API 1.0 Partner release.", "creator": {"login": "benjeffery", "id": 8552, "node_id": "MDQ6VXNlcjg1NTI=", "avatar_url": "https://avatars.githubusercontent.com/u/8552?v=4", "gravatar_id": "", "url": "https://api.github.com/users/benjeffery", "html_url": "https://github.com/benjeffery", "followers_url": "https://api.github.com/users/benjeffery/followers", "following_url": "https://api.github.com/users/benjeffery/following{/other_user}", "gists_url": "https://api.github.com/users/benjeffery/gists{/gist_id}", "starred_url": "https://api.github.com/users/benjeffery/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/benjeffery/subscriptions", "organizations_url": "https://api.github.com/users/benjeffery/orgs", "repos_url": "https://api.github.com/users/benjeffery/repos", "events_url": "https://api.github.com/users/benjeffery/events{/privacy}", "received_events_url": "https://api.github.com/users/benjeffery/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 29, "state": "closed", "created_at": "2022-04-06T16:37:05Z", "updated_at": "2022-06-27T10:12:19Z", "due_on": "2022-06-22T07:00:00Z", "closed_at": "2022-06-27T10:12:19Z"}, "comments": 2, "created_at": "2022-05-31T06:50:54Z", "updated_at": "2022-06-16T10:56:50Z", "closed_at": "2022-06-16T10:56:50Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "Applying `kc_distance()` in standard ways like this\r\n\r\n```\r\ntree = ts.first()\r\ntree.kc_distance(other=tsi.first())\r\n```\r\ngives me a library error:\r\n```\r\nLibraryError: The sample_lists option must be enabled to perform this operation.\r\n```", "reactions": {"url": "https://api.github.com/repos/tskit-dev/tskit/issues/2309/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/tskit-dev/tskit/issues/2309/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/tskit-dev/tskit/issues/2301", "repository_url": "https://api.github.com/repos/tskit-dev/tskit", "labels_url": "https://api.github.com/repos/tskit-dev/tskit/issues/2301/labels{/name}", "comments_url": "https://api.github.com/repos/tskit-dev/tskit/issues/2301/comments", "events_url": "https://api.github.com/repos/tskit-dev/tskit/issues/2301/events", "html_url": "https://github.com/tskit-dev/tskit/issues/2301", "id": 1248512853, "node_id": "I_kwDOBzNZms5KastV", "number": 2301, "title": "tab separator missing in tsk_individual_table_dump_text() output", "user": {"login": "bhaller", "id": 10171101, "node_id": "MDQ6VXNlcjEwMTcxMTAx", "avatar_url": "https://avatars.githubusercontent.com/u/10171101?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bhaller", "html_url": "https://github.com/bhaller", "followers_url": "https://api.github.com/users/bhaller/followers", "following_url": "https://api.github.com/users/bhaller/following{/other_user}", "gists_url": "https://api.github.com/users/bhaller/gists{/gist_id}", "starred_url": "https://api.github.com/users/bhaller/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bhaller/subscriptions", "organizations_url": "https://api.github.com/users/bhaller/orgs", "repos_url": "https://api.github.com/users/bhaller/repos", "events_url": "https://api.github.com/users/bhaller/events{/privacy}", "received_events_url": "https://api.github.com/users/bhaller/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 831518500, "node_id": "MDU6TGFiZWw4MzE1MTg1MDA=", "url": "https://api.github.com/repos/tskit-dev/tskit/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}, {"id": 1184840738, "node_id": "MDU6TGFiZWwxMTg0ODQwNzM4", "url": "https://api.github.com/repos/tskit-dev/tskit/labels/C%20API", "name": "C API", "color": "1d76db", "default": false, "description": "Issue is about the C API"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/tskit-dev/tskit/milestones/34", "html_url": "https://github.com/tskit-dev/tskit/milestone/34", "labels_url": "https://api.github.com/repos/tskit-dev/tskit/milestones/34/labels", "id": 8019757, "node_id": "MI_kwDOBzNZms4Ael8t", "number": 34, "title": "C 1.0.1", "description": "", "creator": {"login": "jeromekelleher", "id": 2664569, "node_id": "MDQ6VXNlcjI2NjQ1Njk=", "avatar_url": "https://avatars.githubusercontent.com/u/2664569?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jeromekelleher", "html_url": "https://github.com/jeromekelleher", "followers_url": "https://api.github.com/users/jeromekelleher/followers", "following_url": "https://api.github.com/users/jeromekelleher/following{/other_user}", "gists_url": "https://api.github.com/users/jeromekelleher/gists{/gist_id}", "starred_url": "https://api.github.com/users/jeromekelleher/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jeromekelleher/subscriptions", "organizations_url": "https://api.github.com/users/jeromekelleher/orgs", "repos_url": "https://api.github.com/users/jeromekelleher/repos", "events_url": "https://api.github.com/users/jeromekelleher/events{/privacy}", "received_events_url": "https://api.github.com/users/jeromekelleher/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 2, "state": "closed", "created_at": "2022-05-25T19:26:04Z", "updated_at": "2022-07-25T13:29:28Z", "due_on": null, "closed_at": "2022-07-25T13:29:28Z"}, "comments": 2, "created_at": "2022-05-25T18:27:53Z", "updated_at": "2022-06-01T17:16:56Z", "closed_at": "2022-06-01T17:16:56Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi folks.  This commit:\r\n\r\nhttps://github.com/MesserLab/SLiM/commit/ee464af967c25e660f211f87bc8113807c10c9cc\r\n\r\nfixes what appears to be a bug in the tskit C API 1.0 beta code that got merged into SLiM.  It looks like the bug is still there in the current skit code.\r\n\r\nBasically, a little snippet in `tsk_individual_table_dump_text()` got removed for no obvious reason, and that little snippet is important \u2013 it emits the tab separator between the location field and the parents field in the individuals table.  That breaks SLiM, albeit in a way that is not visible to end users; it just breaks my internal tests, which parse the text output from tables.  In any case, that tab separator needs to be there, of course.  :->  My guess is that somebody was looking at output that did not involve location data, and saw two tabs in a row and thought it was a bug; but there are two tabs in a row simply because the location field is empty in that case.\r\n\r\n@petrelharp as you can see I've fixed this bug in SLiM's tskit copy for now.  If you merge in the final tskit C API 1.0, it would be nice if you preserved this fix until such time as it's fixed in tskit.  :->", "reactions": {"url": "https://api.github.com/repos/tskit-dev/tskit/issues/2301/reactions", "total_count": 1, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/tskit-dev/tskit/issues/2301/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/tskit-dev/tskit/issues/2197", "repository_url": "https://api.github.com/repos/tskit-dev/tskit", "labels_url": "https://api.github.com/repos/tskit-dev/tskit/issues/2197/labels{/name}", "comments_url": "https://api.github.com/repos/tskit-dev/tskit/issues/2197/comments", "events_url": "https://api.github.com/repos/tskit-dev/tskit/issues/2197/events", "html_url": "https://github.com/tskit-dev/tskit/issues/2197", "id": 1209600211, "node_id": "I_kwDOBzNZms5IGQjT", "number": 2197, "title": "Draw SVG broken for trees with negative node times", "user": {"login": "jeromekelleher", "id": 2664569, "node_id": "MDQ6VXNlcjI2NjQ1Njk=", "avatar_url": "https://avatars.githubusercontent.com/u/2664569?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jeromekelleher", "html_url": "https://github.com/jeromekelleher", "followers_url": "https://api.github.com/users/jeromekelleher/followers", "following_url": "https://api.github.com/users/jeromekelleher/following{/other_user}", "gists_url": "https://api.github.com/users/jeromekelleher/gists{/gist_id}", "starred_url": "https://api.github.com/users/jeromekelleher/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jeromekelleher/subscriptions", "organizations_url": "https://api.github.com/users/jeromekelleher/orgs", "repos_url": "https://api.github.com/users/jeromekelleher/repos", "events_url": "https://api.github.com/users/jeromekelleher/events{/privacy}", "received_events_url": "https://api.github.com/users/jeromekelleher/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 831518500, "node_id": "MDU6TGFiZWw4MzE1MTg1MDA=", "url": "https://api.github.com/repos/tskit-dev/tskit/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}, {"id": 2385559214, "node_id": "MDU6TGFiZWwyMzg1NTU5MjE0", "url": "https://api.github.com/repos/tskit-dev/tskit/labels/Python%20API", "name": "Python API", "color": "d12add", "default": false, "description": "Issue is about the Python API"}, {"id": 2385618485, "node_id": "MDU6TGFiZWwyMzg1NjE4NDg1", "url": "https://api.github.com/repos/tskit-dev/tskit/labels/Visualisation", "name": "Visualisation", "color": "cc5500", "default": false, "description": "This issue addresses visualisation"}], "state": "closed", "locked": false, "assignee": {"login": "hyanwong", "id": 4699014, "node_id": "MDQ6VXNlcjQ2OTkwMTQ=", "avatar_url": "https://avatars.githubusercontent.com/u/4699014?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hyanwong", "html_url": "https://github.com/hyanwong", "followers_url": "https://api.github.com/users/hyanwong/followers", "following_url": "https://api.github.com/users/hyanwong/following{/other_user}", "gists_url": "https://api.github.com/users/hyanwong/gists{/gist_id}", "starred_url": "https://api.github.com/users/hyanwong/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hyanwong/subscriptions", "organizations_url": "https://api.github.com/users/hyanwong/orgs", "repos_url": "https://api.github.com/users/hyanwong/repos", "events_url": "https://api.github.com/users/hyanwong/events{/privacy}", "received_events_url": "https://api.github.com/users/hyanwong/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "hyanwong", "id": 4699014, "node_id": "MDQ6VXNlcjQ2OTkwMTQ=", "avatar_url": "https://avatars.githubusercontent.com/u/4699014?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hyanwong", "html_url": "https://github.com/hyanwong", "followers_url": "https://api.github.com/users/hyanwong/followers", "following_url": "https://api.github.com/users/hyanwong/following{/other_user}", "gists_url": "https://api.github.com/users/hyanwong/gists{/gist_id}", "starred_url": "https://api.github.com/users/hyanwong/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hyanwong/subscriptions", "organizations_url": "https://api.github.com/users/hyanwong/orgs", "repos_url": "https://api.github.com/users/hyanwong/repos", "events_url": "https://api.github.com/users/hyanwong/events{/privacy}", "received_events_url": "https://api.github.com/users/hyanwong/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/tskit-dev/tskit/milestones/32", "html_url": "https://github.com/tskit-dev/tskit/milestone/32", "labels_url": "https://api.github.com/repos/tskit-dev/tskit/milestones/32/labels", "id": 7846316, "node_id": "MI_kwDOBzNZms4Ad7ms", "number": 32, "title": "Python 0.5.0", "description": "C API 1.0 Partner release.", "creator": {"login": "benjeffery", "id": 8552, "node_id": "MDQ6VXNlcjg1NTI=", "avatar_url": "https://avatars.githubusercontent.com/u/8552?v=4", "gravatar_id": "", "url": "https://api.github.com/users/benjeffery", "html_url": "https://github.com/benjeffery", "followers_url": "https://api.github.com/users/benjeffery/followers", "following_url": "https://api.github.com/users/benjeffery/following{/other_user}", "gists_url": "https://api.github.com/users/benjeffery/gists{/gist_id}", "starred_url": "https://api.github.com/users/benjeffery/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/benjeffery/subscriptions", "organizations_url": "https://api.github.com/users/benjeffery/orgs", "repos_url": "https://api.github.com/users/benjeffery/repos", "events_url": "https://api.github.com/users/benjeffery/events{/privacy}", "received_events_url": "https://api.github.com/users/benjeffery/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 29, "state": "closed", "created_at": "2022-04-06T16:37:05Z", "updated_at": "2022-06-27T10:12:19Z", "due_on": "2022-06-22T07:00:00Z", "closed_at": "2022-06-27T10:12:19Z"}, "comments": 5, "created_at": "2022-04-20T12:13:19Z", "updated_at": "2022-06-07T14:24:37Z", "closed_at": "2022-06-07T14:24:37Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "Negative node times are allowed, and can be quite useful at times. Trying to draw a tree with negative times using ``draw_svg`` gives an empty tree, like this example:\r\n![negative-viz-bug](https://user-images.githubusercontent.com/2664569/164227699-7d768780-6983-453d-bd1b-e8e369b250f2.png)\r\n\r\nShould be an easy enough one to fix; any chance you can take a look please @hyanwong?", "reactions": {"url": "https://api.github.com/repos/tskit-dev/tskit/issues/2197/reactions", "total_count": 1, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/tskit-dev/tskit/issues/2197/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/tskit-dev/tskit/issues/2125", "repository_url": "https://api.github.com/repos/tskit-dev/tskit", "labels_url": "https://api.github.com/repos/tskit-dev/tskit/issues/2125/labels{/name}", "comments_url": "https://api.github.com/repos/tskit-dev/tskit/issues/2125/comments", "events_url": "https://api.github.com/repos/tskit-dev/tskit/issues/2125/events", "html_url": "https://github.com/tskit-dev/tskit/issues/2125", "id": 1127273046, "node_id": "I_kwDOBzNZms5DMNJW", "number": 2125, "title": "TableCollection.nbytes assumes indexes are present", "user": {"login": "benjeffery", "id": 8552, "node_id": "MDQ6VXNlcjg1NTI=", "avatar_url": "https://avatars.githubusercontent.com/u/8552?v=4", "gravatar_id": "", "url": "https://api.github.com/users/benjeffery", "html_url": "https://github.com/benjeffery", "followers_url": "https://api.github.com/users/benjeffery/followers", "following_url": "https://api.github.com/users/benjeffery/following{/other_user}", "gists_url": "https://api.github.com/users/benjeffery/gists{/gist_id}", "starred_url": "https://api.github.com/users/benjeffery/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/benjeffery/subscriptions", "organizations_url": "https://api.github.com/users/benjeffery/orgs", "repos_url": "https://api.github.com/users/benjeffery/repos", "events_url": "https://api.github.com/users/benjeffery/events{/privacy}", "received_events_url": "https://api.github.com/users/benjeffery/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 831518500, "node_id": "MDU6TGFiZWw4MzE1MTg1MDA=", "url": "https://api.github.com/repos/tskit-dev/tskit/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2022-02-08T13:40:34Z", "updated_at": "2022-02-10T14:23:15Z", "closed_at": "2022-02-10T14:23:15Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "```\r\ntables = tskit.TableCollection(1)\r\nprint(tables.nbytes)\r\n```\r\ngives:\r\n```\r\nTraceback (most recent call last):\r\n  File \"/home/benj/projects/tskit/python/memtest2.py\", line 6, in <module>\r\n    print(tables.nbytes)\r\n  File \"/home/benj/projects/tskit/python/tskit/tables.py\", line 3010, in nbytes\r\n    self.indexes.nbytes,\r\n  File \"/home/benj/projects/tskit/python/tskit/tables.py\", line 312, in nbytes\r\n    return self.edge_insertion_order.nbytes + self.edge_removal_order.nbytes\r\nAttributeError: 'NoneType' object has no attribute 'nbytes'\r\n```", "reactions": {"url": "https://api.github.com/repos/tskit-dev/tskit/issues/2125/reactions", "total_count": 1, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/tskit-dev/tskit/issues/2125/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/tskit-dev/tskit/issues/2109", "repository_url": "https://api.github.com/repos/tskit-dev/tskit", "labels_url": "https://api.github.com/repos/tskit-dev/tskit/issues/2109/labels{/name}", "comments_url": "https://api.github.com/repos/tskit-dev/tskit/issues/2109/comments", "events_url": "https://api.github.com/repos/tskit-dev/tskit/issues/2109/events", "html_url": "https://github.com/tskit-dev/tskit/issues/2109", "id": 1117323143, "node_id": "I_kwDOBzNZms5CmP-H", "number": 2109, "title": "tests/test_tables.py::TestUnionTables::test_union_empty fails with msprime 1.1.0", "user": {"login": "benjeffery", "id": 8552, "node_id": "MDQ6VXNlcjg1NTI=", "avatar_url": "https://avatars.githubusercontent.com/u/8552?v=4", "gravatar_id": "", "url": "https://api.github.com/users/benjeffery", "html_url": "https://github.com/benjeffery", "followers_url": "https://api.github.com/users/benjeffery/followers", "following_url": "https://api.github.com/users/benjeffery/following{/other_user}", "gists_url": "https://api.github.com/users/benjeffery/gists{/gist_id}", "starred_url": "https://api.github.com/users/benjeffery/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/benjeffery/subscriptions", "organizations_url": "https://api.github.com/users/benjeffery/orgs", "repos_url": "https://api.github.com/users/benjeffery/repos", "events_url": "https://api.github.com/users/benjeffery/events{/privacy}", "received_events_url": "https://api.github.com/users/benjeffery/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 831518500, "node_id": "MDU6TGFiZWw4MzE1MTg1MDA=", "url": "https://api.github.com/repos/tskit-dev/tskit/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2022-01-28T11:59:12Z", "updated_at": "2022-02-02T17:34:09Z", "closed_at": "2022-02-02T17:34:09Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "As we added time units to msprime this test is now failing with ` _tskit.LibraryError: Shared portions of the tree sequences are not equal.` This is because the `tsk_table_collection_equals` call at tables.c:11858 doesn't have a way to skip time units.\r\n\r\nThe cleanest way to fix this is add a flag to skip checking of top-level attributes on tables.", "reactions": {"url": "https://api.github.com/repos/tskit-dev/tskit/issues/2109/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/tskit-dev/tskit/issues/2109/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/tskit-dev/tskit/issues/2066", "repository_url": "https://api.github.com/repos/tskit-dev/tskit", "labels_url": "https://api.github.com/repos/tskit-dev/tskit/issues/2066/labels{/name}", "comments_url": "https://api.github.com/repos/tskit-dev/tskit/issues/2066/comments", "events_url": "https://api.github.com/repos/tskit-dev/tskit/issues/2066/events", "html_url": "https://github.com/tskit-dev/tskit/issues/2066", "id": 1078436292, "node_id": "I_kwDOBzNZms5AR6HE", "number": 2066, "title": "Tree._repr_html_ uses incorrect num_nodes", "user": {"login": "benjeffery", "id": 8552, "node_id": "MDQ6VXNlcjg1NTI=", "avatar_url": "https://avatars.githubusercontent.com/u/8552?v=4", "gravatar_id": "", "url": "https://api.github.com/users/benjeffery", "html_url": "https://github.com/benjeffery", "followers_url": "https://api.github.com/users/benjeffery/followers", "following_url": "https://api.github.com/users/benjeffery/following{/other_user}", "gists_url": "https://api.github.com/users/benjeffery/gists{/gist_id}", "starred_url": "https://api.github.com/users/benjeffery/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/benjeffery/subscriptions", "organizations_url": "https://api.github.com/users/benjeffery/orgs", "repos_url": "https://api.github.com/users/benjeffery/repos", "events_url": "https://api.github.com/users/benjeffery/events{/privacy}", "received_events_url": "https://api.github.com/users/benjeffery/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 831518500, "node_id": "MDU6TGFiZWw4MzE1MTg1MDA=", "url": "https://api.github.com/repos/tskit-dev/tskit/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/tskit-dev/tskit/milestones/27", "html_url": "https://github.com/tskit-dev/tskit/milestone/27", "labels_url": "https://api.github.com/repos/tskit-dev/tskit/milestones/27/labels", "id": 6932167, "node_id": "MDk6TWlsZXN0b25lNjkzMjE2Nw==", "number": 27, "title": "Python 0.6", "description": "Post-paper feature release.", "creator": {"login": "benjeffery", "id": 8552, "node_id": "MDQ6VXNlcjg1NTI=", "avatar_url": "https://avatars.githubusercontent.com/u/8552?v=4", "gravatar_id": "", "url": "https://api.github.com/users/benjeffery", "html_url": "https://github.com/benjeffery", "followers_url": "https://api.github.com/users/benjeffery/followers", "following_url": "https://api.github.com/users/benjeffery/following{/other_user}", "gists_url": "https://api.github.com/users/benjeffery/gists{/gist_id}", "starred_url": "https://api.github.com/users/benjeffery/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/benjeffery/subscriptions", "organizations_url": "https://api.github.com/users/benjeffery/orgs", "repos_url": "https://api.github.com/users/benjeffery/repos", "events_url": "https://api.github.com/users/benjeffery/events{/privacy}", "received_events_url": "https://api.github.com/users/benjeffery/received_events", "type": "User", "site_admin": false}, "open_issues": 15, "closed_issues": 7, "state": "open", "created_at": "2021-07-09T11:38:19Z", "updated_at": "2022-10-03T11:08:08Z", "due_on": null, "closed_at": null}, "comments": 1, "created_at": "2021-12-13T11:52:57Z", "updated_at": "2022-01-07T13:47:03Z", "closed_at": "2022-01-07T13:47:03Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "Should use nodes in tree, not tree sequence!", "reactions": {"url": "https://api.github.com/repos/tskit-dev/tskit/issues/2066/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/tskit-dev/tskit/issues/2066/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/tskit-dev/tskit/issues/2063", "repository_url": "https://api.github.com/repos/tskit-dev/tskit", "labels_url": "https://api.github.com/repos/tskit-dev/tskit/issues/2063/labels{/name}", "comments_url": "https://api.github.com/repos/tskit-dev/tskit/issues/2063/comments", "events_url": "https://api.github.com/repos/tskit-dev/tskit/issues/2063/events", "html_url": "https://github.com/tskit-dev/tskit/issues/2063", "id": 1077743783, "node_id": "I_kwDOBzNZms5APRCn", "number": 2063, "title": "Implement __eq__ for ReferenceSequence", "user": {"login": "petrelharp", "id": 1046249, "node_id": "MDQ6VXNlcjEwNDYyNDk=", "avatar_url": "https://avatars.githubusercontent.com/u/1046249?v=4", "gravatar_id": "", "url": "https://api.github.com/users/petrelharp", "html_url": "https://github.com/petrelharp", "followers_url": "https://api.github.com/users/petrelharp/followers", "following_url": "https://api.github.com/users/petrelharp/following{/other_user}", "gists_url": "https://api.github.com/users/petrelharp/gists{/gist_id}", "starred_url": "https://api.github.com/users/petrelharp/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/petrelharp/subscriptions", "organizations_url": "https://api.github.com/users/petrelharp/orgs", "repos_url": "https://api.github.com/users/petrelharp/repos", "events_url": "https://api.github.com/users/petrelharp/events{/privacy}", "received_events_url": "https://api.github.com/users/petrelharp/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 831518500, "node_id": "MDU6TGFiZWw4MzE1MTg1MDA=", "url": "https://api.github.com/repos/tskit-dev/tskit/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/tskit-dev/tskit/milestones/30", "html_url": "https://github.com/tskit-dev/tskit/milestone/30", "labels_url": "https://api.github.com/repos/tskit-dev/tskit/milestones/30/labels", "id": 7551523, "node_id": "MI_kwDOBzNZms4Aczoj", "number": 30, "title": "Python 0.4.1", "description": null, "creator": {"login": "jeromekelleher", "id": 2664569, "node_id": "MDQ6VXNlcjI2NjQ1Njk=", "avatar_url": "https://avatars.githubusercontent.com/u/2664569?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jeromekelleher", "html_url": "https://github.com/jeromekelleher", "followers_url": "https://api.github.com/users/jeromekelleher/followers", "following_url": "https://api.github.com/users/jeromekelleher/following{/other_user}", "gists_url": "https://api.github.com/users/jeromekelleher/gists{/gist_id}", "starred_url": "https://api.github.com/users/jeromekelleher/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jeromekelleher/subscriptions", "organizations_url": "https://api.github.com/users/jeromekelleher/orgs", "repos_url": "https://api.github.com/users/jeromekelleher/repos", "events_url": "https://api.github.com/users/jeromekelleher/events{/privacy}", "received_events_url": "https://api.github.com/users/jeromekelleher/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 3, "state": "closed", "created_at": "2022-01-07T14:23:03Z", "updated_at": "2022-01-12T14:31:16Z", "due_on": null, "closed_at": "2022-01-12T14:31:16Z"}, "comments": 2, "created_at": "2021-12-12T08:05:25Z", "updated_at": "2022-01-11T11:35:27Z", "closed_at": "2022-01-11T11:35:27Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "We've no equality operator for reference sequences, so identical ones aren't equal in python:\r\n```\r\n>>> rs2 = rts.tables.reference_sequence\r\n>>> rs1 = rts.tables.reference_sequence\r\n>>> rs1 == rs2\r\nFalse\r\n```\r\n... should they be?", "reactions": {"url": "https://api.github.com/repos/tskit-dev/tskit/issues/2063/reactions", "total_count": 1, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/tskit-dev/tskit/issues/2063/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/tskit-dev/tskit/issues/2059", "repository_url": "https://api.github.com/repos/tskit-dev/tskit", "labels_url": "https://api.github.com/repos/tskit-dev/tskit/issues/2059/labels{/name}", "comments_url": "https://api.github.com/repos/tskit-dev/tskit/issues/2059/comments", "events_url": "https://api.github.com/repos/tskit-dev/tskit/issues/2059/events", "html_url": "https://github.com/tskit-dev/tskit/issues/2059", "id": 1077539975, "node_id": "I_kwDOBzNZms5AOfSH", "number": 2059, "title": "setuptools_scm incorrectly required in setup.cfg", "user": {"login": "jeromekelleher", "id": 2664569, "node_id": "MDQ6VXNlcjI2NjQ1Njk=", "avatar_url": "https://avatars.githubusercontent.com/u/2664569?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jeromekelleher", "html_url": "https://github.com/jeromekelleher", "followers_url": "https://api.github.com/users/jeromekelleher/followers", "following_url": "https://api.github.com/users/jeromekelleher/following{/other_user}", "gists_url": "https://api.github.com/users/jeromekelleher/gists{/gist_id}", "starred_url": "https://api.github.com/users/jeromekelleher/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jeromekelleher/subscriptions", "organizations_url": "https://api.github.com/users/jeromekelleher/orgs", "repos_url": "https://api.github.com/users/jeromekelleher/repos", "events_url": "https://api.github.com/users/jeromekelleher/events{/privacy}", "received_events_url": "https://api.github.com/users/jeromekelleher/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 831518500, "node_id": "MDU6TGFiZWw4MzE1MTg1MDA=", "url": "https://api.github.com/repos/tskit-dev/tskit/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/tskit-dev/tskit/milestones/27", "html_url": "https://github.com/tskit-dev/tskit/milestone/27", "labels_url": "https://api.github.com/repos/tskit-dev/tskit/milestones/27/labels", "id": 6932167, "node_id": "MDk6TWlsZXN0b25lNjkzMjE2Nw==", "number": 27, "title": "Python 0.6", "description": "Post-paper feature release.", "creator": {"login": "benjeffery", "id": 8552, "node_id": "MDQ6VXNlcjg1NTI=", "avatar_url": "https://avatars.githubusercontent.com/u/8552?v=4", "gravatar_id": "", "url": "https://api.github.com/users/benjeffery", "html_url": "https://github.com/benjeffery", "followers_url": "https://api.github.com/users/benjeffery/followers", "following_url": "https://api.github.com/users/benjeffery/following{/other_user}", "gists_url": "https://api.github.com/users/benjeffery/gists{/gist_id}", "starred_url": "https://api.github.com/users/benjeffery/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/benjeffery/subscriptions", "organizations_url": "https://api.github.com/users/benjeffery/orgs", "repos_url": "https://api.github.com/users/benjeffery/repos", "events_url": "https://api.github.com/users/benjeffery/events{/privacy}", "received_events_url": "https://api.github.com/users/benjeffery/received_events", "type": "User", "site_admin": false}, "open_issues": 15, "closed_issues": 7, "state": "open", "created_at": "2021-07-09T11:38:19Z", "updated_at": "2022-10-03T11:08:08Z", "due_on": null, "closed_at": null}, "comments": 0, "created_at": "2021-12-11T13:37:11Z", "updated_at": "2021-12-16T13:00:32Z", "closed_at": "2021-12-16T13:00:32Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "We have setuptools_scm required in setup.cfg, but we're not actually using it (it gets confused by our repo structure).\r\n\r\nThis broke the conda build: https://github.com/conda-forge/tskit-feedstock/pull/28/\r\n\r\nSeems simplest to add setuptools_scm to the conda-build for now and just remove it later once the next version of tskit is released.", "reactions": {"url": "https://api.github.com/repos/tskit-dev/tskit/issues/2059/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/tskit-dev/tskit/issues/2059/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/tskit-dev/tskit/issues/2050", "repository_url": "https://api.github.com/repos/tskit-dev/tskit", "labels_url": "https://api.github.com/repos/tskit-dev/tskit/issues/2050/labels{/name}", "comments_url": "https://api.github.com/repos/tskit-dev/tskit/issues/2050/comments", "events_url": "https://api.github.com/repos/tskit-dev/tskit/issues/2050/events", "html_url": "https://github.com/tskit-dev/tskit/issues/2050", "id": 1076066202, "node_id": "I_kwDOBzNZms5AI3ea", "number": 2050, "title": "cli: `tskit populations blah.ts` fails", "user": {"login": "grahamgower", "id": 8665077, "node_id": "MDQ6VXNlcjg2NjUwNzc=", "avatar_url": "https://avatars.githubusercontent.com/u/8665077?v=4", "gravatar_id": "", "url": "https://api.github.com/users/grahamgower", "html_url": "https://github.com/grahamgower", "followers_url": "https://api.github.com/users/grahamgower/followers", "following_url": "https://api.github.com/users/grahamgower/following{/other_user}", "gists_url": "https://api.github.com/users/grahamgower/gists{/gist_id}", "starred_url": "https://api.github.com/users/grahamgower/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/grahamgower/subscriptions", "organizations_url": "https://api.github.com/users/grahamgower/orgs", "repos_url": "https://api.github.com/users/grahamgower/repos", "events_url": "https://api.github.com/users/grahamgower/events{/privacy}", "received_events_url": "https://api.github.com/users/grahamgower/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 831518500, "node_id": "MDU6TGFiZWw4MzE1MTg1MDA=", "url": "https://api.github.com/repos/tskit-dev/tskit/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/tskit-dev/tskit/milestones/30", "html_url": "https://github.com/tskit-dev/tskit/milestone/30", "labels_url": "https://api.github.com/repos/tskit-dev/tskit/milestones/30/labels", "id": 7551523, "node_id": "MI_kwDOBzNZms4Aczoj", "number": 30, "title": "Python 0.4.1", "description": null, "creator": {"login": "jeromekelleher", "id": 2664569, "node_id": "MDQ6VXNlcjI2NjQ1Njk=", "avatar_url": "https://avatars.githubusercontent.com/u/2664569?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jeromekelleher", "html_url": "https://github.com/jeromekelleher", "followers_url": "https://api.github.com/users/jeromekelleher/followers", "following_url": "https://api.github.com/users/jeromekelleher/following{/other_user}", "gists_url": "https://api.github.com/users/jeromekelleher/gists{/gist_id}", "starred_url": "https://api.github.com/users/jeromekelleher/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jeromekelleher/subscriptions", "organizations_url": "https://api.github.com/users/jeromekelleher/orgs", "repos_url": "https://api.github.com/users/jeromekelleher/repos", "events_url": "https://api.github.com/users/jeromekelleher/events{/privacy}", "received_events_url": "https://api.github.com/users/jeromekelleher/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 3, "state": "closed", "created_at": "2022-01-07T14:23:03Z", "updated_at": "2022-01-12T14:31:16Z", "due_on": null, "closed_at": "2022-01-12T14:31:16Z"}, "comments": 14, "created_at": "2021-12-09T21:41:09Z", "updated_at": "2022-01-11T10:59:31Z", "closed_at": "2022-01-11T10:59:30Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "I'm not sure what `tskit populations` cli subcommand is supposed to do. I expected it to show the populations or something. Instead I get:\r\n\r\nFor a SLiM (bleeding edge version) tree sequence\r\n```\r\nt490:tmp $ tskit populations slim.ts\r\nid      metadata\r\nTraceback (most recent call last):\r\n  File \"/home/grg/.local/bin/tskit\", line 8, in <module>\r\n    sys.exit(tskit_main())\r\n  File \"/home/grg/.local/lib/python3.9/site-packages/tskit/cli.py\", line 274, in tskit_main\r\n    args.runner(args)\r\n  File \"/home/grg/.local/lib/python3.9/site-packages/tskit/cli.py\", line 111, in run_populations\r\n    tree_sequence.dump_text(populations=sys.stdout)\r\n  File \"/home/grg/.local/lib/python3.9/site-packages/tskit/trees.py\", line 3955, in dump_text\r\n    metadata = population.metadata\r\n  File \"/home/grg/.local/lib/python3.9/site-packages/tskit/metadata.py\", line 743, in __get__\r\n    row, \"_metadata\", row._metadata_decoder(row._metadata)\r\n  File \"/home/grg/.local/lib/python3.9/site-packages/tskit/metadata.py\", line 166, in decode\r\n    result = json.loads(encoded.decode())\r\n  File \"/usr/lib/python3.9/json/__init__.py\", line 346, in loads\r\n    return _default_decoder.decode(s)\r\n  File \"/usr/lib/python3.9/json/decoder.py\", line 337, in decode\r\n    obj, end = self.raw_decode(s, idx=_w(s, 0).end())\r\n  File \"/usr/lib/python3.9/json/decoder.py\", line 355, in raw_decode\r\n    raise JSONDecodeError(\"Expecting value\", s, err.value) from None\r\njson.decoder.JSONDecodeError: Expecting value: line 1 column 1 (char 0)\r\n```\r\n\r\nFor an msprime tree sequence:\r\n```\r\nt490:tmp $ tskit populations msprime.ts\r\nid      metadata\r\nTraceback (most recent call last):\r\n  File \"/home/grg/.local/bin/tskit\", line 8, in <module>\r\n    sys.exit(tskit_main())\r\n  File \"/home/grg/.local/lib/python3.9/site-packages/tskit/cli.py\", line 274, in tskit_main\r\n    args.runner(args)\r\n  File \"/home/grg/.local/lib/python3.9/site-packages/tskit/cli.py\", line 111, in run_populations\r\n    tree_sequence.dump_text(populations=sys.stdout)\r\n  File \"/home/grg/.local/lib/python3.9/site-packages/tskit/trees.py\", line 3957, in dump_text\r\n    metadata = base64.b64encode(metadata).decode(encoding)\r\n  File \"/usr/lib/python3.9/base64.py\", line 58, in b64encode\r\n    encoded = binascii.b2a_base64(s, newline=False)\r\nTypeError: a bytes-like object is required, not 'dict'\r\n```\r\n\r\nThis was from:\r\n```\r\nt490:tmp $ tskit --version\r\npython3 -m tskit 0.4.0b1\r\n```\r\n\r\nBut the output is the same with tskit 0.3.7", "reactions": {"url": "https://api.github.com/repos/tskit-dev/tskit/issues/2050/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/tskit-dev/tskit/issues/2050/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/tskit-dev/tskit/issues/2037", "repository_url": "https://api.github.com/repos/tskit-dev/tskit", "labels_url": "https://api.github.com/repos/tskit-dev/tskit/issues/2037/labels{/name}", "comments_url": "https://api.github.com/repos/tskit-dev/tskit/issues/2037/comments", "events_url": "https://api.github.com/repos/tskit-dev/tskit/issues/2037/events", "html_url": "https://github.com/tskit-dev/tskit/issues/2037", "id": 1074659400, "node_id": "I_kwDOBzNZms5ADgBI", "number": 2037, "title": "Weird behaviour of ts.diversity with a single sample", "user": {"login": "hyanwong", "id": 4699014, "node_id": "MDQ6VXNlcjQ2OTkwMTQ=", "avatar_url": "https://avatars.githubusercontent.com/u/4699014?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hyanwong", "html_url": "https://github.com/hyanwong", "followers_url": "https://api.github.com/users/hyanwong/followers", "following_url": "https://api.github.com/users/hyanwong/following{/other_user}", "gists_url": "https://api.github.com/users/hyanwong/gists{/gist_id}", "starred_url": "https://api.github.com/users/hyanwong/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hyanwong/subscriptions", "organizations_url": "https://api.github.com/users/hyanwong/orgs", "repos_url": "https://api.github.com/users/hyanwong/repos", "events_url": "https://api.github.com/users/hyanwong/events{/privacy}", "received_events_url": "https://api.github.com/users/hyanwong/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 831518500, "node_id": "MDU6TGFiZWw4MzE1MTg1MDA=", "url": "https://api.github.com/repos/tskit-dev/tskit/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2021-12-08T17:39:37Z", "updated_at": "2021-12-08T23:17:25Z", "closed_at": "2021-12-08T23:15:22Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "It should be impossible to calculate the diversity of a single sample, because we need to pick at least one pair of distinct samples to calculate it. So this is expected:\r\n\r\n```\r\nts = msprime.sim_ancestry(10, ploidy=1)\r\nts = msprime.sim_mutations(ts, rate=0.1)\r\nprint(ts.diversity([0], mode=\"branch\"))  # prints \"array(nan)\"\r\n```\r\n\r\nBut looks what happens if there's only one sample in the ts:\r\n\r\n```\r\nts = msprime.sim_ancestry(1, ploidy=1)\r\nts = msprime.sim_mutations(ts, rate=0.1)\r\nprint(ts.diversity([0], mode=\"branch\"))  # prints \"array(0.)\"  <- er, what?\r\n```\r\n", "reactions": {"url": "https://api.github.com/repos/tskit-dev/tskit/issues/2037/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/tskit-dev/tskit/issues/2037/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/tskit-dev/tskit/issues/1938", "repository_url": "https://api.github.com/repos/tskit-dev/tskit", "labels_url": "https://api.github.com/repos/tskit-dev/tskit/issues/1938/labels{/name}", "comments_url": "https://api.github.com/repos/tskit-dev/tskit/issues/1938/comments", "events_url": "https://api.github.com/repos/tskit-dev/tskit/issues/1938/events", "html_url": "https://github.com/tskit-dev/tskit/issues/1938", "id": 1062240968, "node_id": "I_kwDOBzNZms4_UILI", "number": 1938, "title": "raise_hdf5_format_error doesn't work for streams", "user": {"login": "jeromekelleher", "id": 2664569, "node_id": "MDQ6VXNlcjI2NjQ1Njk=", "avatar_url": "https://avatars.githubusercontent.com/u/2664569?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jeromekelleher", "html_url": "https://github.com/jeromekelleher", "followers_url": "https://api.github.com/users/jeromekelleher/followers", "following_url": "https://api.github.com/users/jeromekelleher/following{/other_user}", "gists_url": "https://api.github.com/users/jeromekelleher/gists{/gist_id}", "starred_url": "https://api.github.com/users/jeromekelleher/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jeromekelleher/subscriptions", "organizations_url": "https://api.github.com/users/jeromekelleher/orgs", "repos_url": "https://api.github.com/users/jeromekelleher/repos", "events_url": "https://api.github.com/users/jeromekelleher/events{/privacy}", "received_events_url": "https://api.github.com/users/jeromekelleher/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 831518500, "node_id": "MDU6TGFiZWw4MzE1MTg1MDA=", "url": "https://api.github.com/repos/tskit-dev/tskit/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/tskit-dev/tskit/milestones/26", "html_url": "https://github.com/tskit-dev/tskit/milestone/26", "labels_url": "https://api.github.com/repos/tskit-dev/tskit/milestones/26/labels", "id": 6835373, "node_id": "MDk6TWlsZXN0b25lNjgzNTM3Mw==", "number": 26, "title": "Python 0.4.0", "description": "", "creator": {"login": "benjeffery", "id": 8552, "node_id": "MDQ6VXNlcjg1NTI=", "avatar_url": "https://avatars.githubusercontent.com/u/8552?v=4", "gravatar_id": "", "url": "https://api.github.com/users/benjeffery", "html_url": "https://github.com/benjeffery", "followers_url": "https://api.github.com/users/benjeffery/followers", "following_url": "https://api.github.com/users/benjeffery/following{/other_user}", "gists_url": "https://api.github.com/users/benjeffery/gists{/gist_id}", "starred_url": "https://api.github.com/users/benjeffery/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/benjeffery/subscriptions", "organizations_url": "https://api.github.com/users/benjeffery/orgs", "repos_url": "https://api.github.com/users/benjeffery/repos", "events_url": "https://api.github.com/users/benjeffery/events{/privacy}", "received_events_url": "https://api.github.com/users/benjeffery/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 56, "state": "closed", "created_at": "2021-06-08T13:19:39Z", "updated_at": "2021-12-11T13:37:31Z", "due_on": "2021-12-10T08:00:00Z", "closed_at": "2021-12-11T13:37:31Z"}, "comments": 2, "created_at": "2021-11-24T10:18:41Z", "updated_at": "2021-11-25T14:56:41Z", "closed_at": "2021-11-25T14:56:41Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "The recently introduced  [raise_hdf5_format_error](https://github.com/tskit-dev/tskit/blob/315e47a6c063098c72533c10d575464edcabc747/python/tskit/formats.py#L266) can be called on either a path or a file object, but assumes the input is a path.\r\n\r\nSince we can't sniff the first few bytes of a file object (it might be an unseekable stream, like a socket) it's pretty questionable whether this functionality is worth it", "reactions": {"url": "https://api.github.com/repos/tskit-dev/tskit/issues/1938/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/tskit-dev/tskit/issues/1938/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/tskit-dev/tskit/issues/1909", "repository_url": "https://api.github.com/repos/tskit-dev/tskit", "labels_url": "https://api.github.com/repos/tskit-dev/tskit/issues/1909/labels{/name}", "comments_url": "https://api.github.com/repos/tskit-dev/tskit/issues/1909/comments", "events_url": "https://api.github.com/repos/tskit-dev/tskit/issues/1909/events", "html_url": "https://github.com/tskit-dev/tskit/issues/1909", "id": 1051878344, "node_id": "I_kwDOBzNZms4-smPI", "number": 1909, "title": "tskit.load_text creates an extra population", "user": {"login": "hyanwong", "id": 4699014, "node_id": "MDQ6VXNlcjQ2OTkwMTQ=", "avatar_url": "https://avatars.githubusercontent.com/u/4699014?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hyanwong", "html_url": "https://github.com/hyanwong", "followers_url": "https://api.github.com/users/hyanwong/followers", "following_url": "https://api.github.com/users/hyanwong/following{/other_user}", "gists_url": "https://api.github.com/users/hyanwong/gists{/gist_id}", "starred_url": "https://api.github.com/users/hyanwong/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hyanwong/subscriptions", "organizations_url": "https://api.github.com/users/hyanwong/orgs", "repos_url": "https://api.github.com/users/hyanwong/repos", "events_url": "https://api.github.com/users/hyanwong/events{/privacy}", "received_events_url": "https://api.github.com/users/hyanwong/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 831518500, "node_id": "MDU6TGFiZWw4MzE1MTg1MDA=", "url": "https://api.github.com/repos/tskit-dev/tskit/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": {"login": "hyanwong", "id": 4699014, "node_id": "MDQ6VXNlcjQ2OTkwMTQ=", "avatar_url": "https://avatars.githubusercontent.com/u/4699014?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hyanwong", "html_url": "https://github.com/hyanwong", "followers_url": "https://api.github.com/users/hyanwong/followers", "following_url": "https://api.github.com/users/hyanwong/following{/other_user}", "gists_url": "https://api.github.com/users/hyanwong/gists{/gist_id}", "starred_url": "https://api.github.com/users/hyanwong/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hyanwong/subscriptions", "organizations_url": "https://api.github.com/users/hyanwong/orgs", "repos_url": "https://api.github.com/users/hyanwong/repos", "events_url": "https://api.github.com/users/hyanwong/events{/privacy}", "received_events_url": "https://api.github.com/users/hyanwong/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "hyanwong", "id": 4699014, "node_id": "MDQ6VXNlcjQ2OTkwMTQ=", "avatar_url": "https://avatars.githubusercontent.com/u/4699014?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hyanwong", "html_url": "https://github.com/hyanwong", "followers_url": "https://api.github.com/users/hyanwong/followers", "following_url": "https://api.github.com/users/hyanwong/following{/other_user}", "gists_url": "https://api.github.com/users/hyanwong/gists{/gist_id}", "starred_url": "https://api.github.com/users/hyanwong/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hyanwong/subscriptions", "organizations_url": "https://api.github.com/users/hyanwong/orgs", "repos_url": "https://api.github.com/users/hyanwong/repos", "events_url": "https://api.github.com/users/hyanwong/events{/privacy}", "received_events_url": "https://api.github.com/users/hyanwong/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/tskit-dev/tskit/milestones/26", "html_url": "https://github.com/tskit-dev/tskit/milestone/26", "labels_url": "https://api.github.com/repos/tskit-dev/tskit/milestones/26/labels", "id": 6835373, "node_id": "MDk6TWlsZXN0b25lNjgzNTM3Mw==", "number": 26, "title": "Python 0.4.0", "description": "", "creator": {"login": "benjeffery", "id": 8552, "node_id": "MDQ6VXNlcjg1NTI=", "avatar_url": "https://avatars.githubusercontent.com/u/8552?v=4", "gravatar_id": "", "url": "https://api.github.com/users/benjeffery", "html_url": "https://github.com/benjeffery", "followers_url": "https://api.github.com/users/benjeffery/followers", "following_url": "https://api.github.com/users/benjeffery/following{/other_user}", "gists_url": "https://api.github.com/users/benjeffery/gists{/gist_id}", "starred_url": "https://api.github.com/users/benjeffery/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/benjeffery/subscriptions", "organizations_url": "https://api.github.com/users/benjeffery/orgs", "repos_url": "https://api.github.com/users/benjeffery/repos", "events_url": "https://api.github.com/users/benjeffery/events{/privacy}", "received_events_url": "https://api.github.com/users/benjeffery/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 56, "state": "closed", "created_at": "2021-06-08T13:19:39Z", "updated_at": "2021-12-11T13:37:31Z", "due_on": "2021-12-10T08:00:00Z", "closed_at": "2021-12-11T13:37:31Z"}, "comments": 1, "created_at": "2021-11-12T11:43:27Z", "updated_at": "2021-11-12T17:51:36Z", "closed_at": "2021-11-12T17:51:36Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "When I provide metadata for a single population in text format to `tskit.load_text`, it creates an additional population id 0 with no metadata:\r\n\r\n```\r\nimport io\r\nimport tskit\r\n\r\nnodes = \"\"\"\\\r\nis_sample   time    population\r\n1           0       0\r\n1           0       0\r\n0           1.0     -1\r\n\"\"\"\r\nedges = \"\"\"\\\r\nleft    right   parent  child\r\n0       10      2       0\r\n0       10      2       1\r\n\"\"\"\r\npopulations = \"\"\"\\\r\nmetadata\r\nsome_metadata\r\n\"\"\"\r\nts = tskit.load_text(\r\n    nodes=io.StringIO(nodes),\r\n    edges=io.StringIO(edges),\r\n    populations=io.StringIO(populations),\r\n    strict=False,\r\n    base64_metadata=False,\r\n)\r\n\r\nprint(ts.num_populations)\r\nprint(ts.tables.populations)\r\n```\r\n\r\ngives\r\n\r\n```\r\n2\r\n\u2554\u2550\u2550\u2564\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2557\r\n\u2551id\u2502metadata        \u2551\r\n\u2560\u2550\u2550\u256a\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2563\r\n\u25510 \u2502             b''\u2551\r\n\u25511 \u2502b'some_metadata'\u2551\r\n\u255a\u2550\u2550\u2567\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u255d\r\n```", "reactions": {"url": "https://api.github.com/repos/tskit-dev/tskit/issues/1909/reactions", "total_count": 1, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/tskit-dev/tskit/issues/1909/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/tskit-dev/tskit/issues/1893", "repository_url": "https://api.github.com/repos/tskit-dev/tskit", "labels_url": "https://api.github.com/repos/tskit-dev/tskit/issues/1893/labels{/name}", "comments_url": "https://api.github.com/repos/tskit-dev/tskit/issues/1893/comments", "events_url": "https://api.github.com/repos/tskit-dev/tskit/issues/1893/events", "html_url": "https://github.com/tskit-dev/tskit/issues/1893", "id": 1046495323, "node_id": "I_kwDOBzNZms4-YEBb", "number": 1893, "title": "Default missing data character should not be \"-\"", "user": {"login": "jeromekelleher", "id": 2664569, "node_id": "MDQ6VXNlcjI2NjQ1Njk=", "avatar_url": "https://avatars.githubusercontent.com/u/2664569?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jeromekelleher", "html_url": "https://github.com/jeromekelleher", "followers_url": "https://api.github.com/users/jeromekelleher/followers", "following_url": "https://api.github.com/users/jeromekelleher/following{/other_user}", "gists_url": "https://api.github.com/users/jeromekelleher/gists{/gist_id}", "starred_url": "https://api.github.com/users/jeromekelleher/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jeromekelleher/subscriptions", "organizations_url": "https://api.github.com/users/jeromekelleher/orgs", "repos_url": "https://api.github.com/users/jeromekelleher/repos", "events_url": "https://api.github.com/users/jeromekelleher/events{/privacy}", "received_events_url": "https://api.github.com/users/jeromekelleher/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 831518500, "node_id": "MDU6TGFiZWw4MzE1MTg1MDA=", "url": "https://api.github.com/repos/tskit-dev/tskit/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/tskit-dev/tskit/milestones/26", "html_url": "https://github.com/tskit-dev/tskit/milestone/26", "labels_url": "https://api.github.com/repos/tskit-dev/tskit/milestones/26/labels", "id": 6835373, "node_id": "MDk6TWlsZXN0b25lNjgzNTM3Mw==", "number": 26, "title": "Python 0.4.0", "description": "", "creator": {"login": "benjeffery", "id": 8552, "node_id": "MDQ6VXNlcjg1NTI=", "avatar_url": "https://avatars.githubusercontent.com/u/8552?v=4", "gravatar_id": "", "url": "https://api.github.com/users/benjeffery", "html_url": "https://github.com/benjeffery", "followers_url": "https://api.github.com/users/benjeffery/followers", "following_url": "https://api.github.com/users/benjeffery/following{/other_user}", "gists_url": "https://api.github.com/users/benjeffery/gists{/gist_id}", "starred_url": "https://api.github.com/users/benjeffery/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/benjeffery/subscriptions", "organizations_url": "https://api.github.com/users/benjeffery/orgs", "repos_url": "https://api.github.com/users/benjeffery/repos", "events_url": "https://api.github.com/users/benjeffery/events{/privacy}", "received_events_url": "https://api.github.com/users/benjeffery/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 56, "state": "closed", "created_at": "2021-06-08T13:19:39Z", "updated_at": "2021-12-11T13:37:31Z", "due_on": "2021-12-10T08:00:00Z", "closed_at": "2021-12-11T13:37:31Z"}, "comments": 6, "created_at": "2021-11-06T12:05:35Z", "updated_at": "2021-11-11T16:55:01Z", "closed_at": "2021-11-11T16:55:01Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "In #436 we update the ``haplotypes`` method to include support for missing data, and added the ``missing_data_char`` parameter. This defaults to a '\"-\"'. In retrospect I think this is an error and we should change it for 0.4.0.\r\n\r\nThe \"-\" character in an alignment is nearly always interpreted as a **gap** (see these [FASTA format page](https://en.wikipedia.org/wiki/FASTA_format) or these [nexus examples](http://wiki.christophchamp.com/index.php?title=NEXUS_file_format), i.e., indicating that there are some indels. This is not what we are indicating in the haplotypes. We are indicating the presence of missing data, i.e., that we don't know what the state of a particular site for a particular sample is. The most common convention for this seems to be using the \"N\" character.\r\n\r\nThe DNA alphabet in [dendropy](https://github.com/jeetsukumaran/DendroPy/blob/29fd294bf05d890ebf6a8d576c501e471db27ca1/src/dendropy/datamodel/charstatemodel.py) follows this convention, so unless there's a compelling reason not to I think we should change the default missing data character to \"N\".\r\n\r\n@hyanwong, do you remember the original thinking for using \"-\" here rather than \"N\"? Any objections to us changing this?", "reactions": {"url": "https://api.github.com/repos/tskit-dev/tskit/issues/1893/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/tskit-dev/tskit/issues/1893/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/tskit-dev/tskit/issues/1860", "repository_url": "https://api.github.com/repos/tskit-dev/tskit", "labels_url": "https://api.github.com/repos/tskit-dev/tskit/issues/1860/labels{/name}", "comments_url": "https://api.github.com/repos/tskit-dev/tskit/issues/1860/comments", "events_url": "https://api.github.com/repos/tskit-dev/tskit/issues/1860/events", "html_url": "https://github.com/tskit-dev/tskit/issues/1860", "id": 1037451286, "node_id": "I_kwDOBzNZms491kAW", "number": 1860, "title": "TreeSequence.dump_text fails if metadata schema is present", "user": {"login": "jeromekelleher", "id": 2664569, "node_id": "MDQ6VXNlcjI2NjQ1Njk=", "avatar_url": "https://avatars.githubusercontent.com/u/2664569?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jeromekelleher", "html_url": "https://github.com/jeromekelleher", "followers_url": "https://api.github.com/users/jeromekelleher/followers", "following_url": "https://api.github.com/users/jeromekelleher/following{/other_user}", "gists_url": "https://api.github.com/users/jeromekelleher/gists{/gist_id}", "starred_url": "https://api.github.com/users/jeromekelleher/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jeromekelleher/subscriptions", "organizations_url": "https://api.github.com/users/jeromekelleher/orgs", "repos_url": "https://api.github.com/users/jeromekelleher/repos", "events_url": "https://api.github.com/users/jeromekelleher/events{/privacy}", "received_events_url": "https://api.github.com/users/jeromekelleher/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 831518500, "node_id": "MDU6TGFiZWw4MzE1MTg1MDA=", "url": "https://api.github.com/repos/tskit-dev/tskit/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}, {"id": 2385559214, "node_id": "MDU6TGFiZWwyMzg1NTU5MjE0", "url": "https://api.github.com/repos/tskit-dev/tskit/labels/Python%20API", "name": "Python API", "color": "d12add", "default": false, "description": "Issue is about the Python API"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/tskit-dev/tskit/milestones/27", "html_url": "https://github.com/tskit-dev/tskit/milestone/27", "labels_url": "https://api.github.com/repos/tskit-dev/tskit/milestones/27/labels", "id": 6932167, "node_id": "MDk6TWlsZXN0b25lNjkzMjE2Nw==", "number": 27, "title": "Python 0.6", "description": "Post-paper feature release.", "creator": {"login": "benjeffery", "id": 8552, "node_id": "MDQ6VXNlcjg1NTI=", "avatar_url": "https://avatars.githubusercontent.com/u/8552?v=4", "gravatar_id": "", "url": "https://api.github.com/users/benjeffery", "html_url": "https://github.com/benjeffery", "followers_url": "https://api.github.com/users/benjeffery/followers", "following_url": "https://api.github.com/users/benjeffery/following{/other_user}", "gists_url": "https://api.github.com/users/benjeffery/gists{/gist_id}", "starred_url": "https://api.github.com/users/benjeffery/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/benjeffery/subscriptions", "organizations_url": "https://api.github.com/users/benjeffery/orgs", "repos_url": "https://api.github.com/users/benjeffery/repos", "events_url": "https://api.github.com/users/benjeffery/events{/privacy}", "received_events_url": "https://api.github.com/users/benjeffery/received_events", "type": "User", "site_admin": false}, "open_issues": 15, "closed_issues": 7, "state": "open", "created_at": "2021-07-09T11:38:19Z", "updated_at": "2022-10-03T11:08:08Z", "due_on": null, "closed_at": null}, "comments": 2, "created_at": "2021-10-27T13:51:15Z", "updated_at": "2022-01-06T16:05:55Z", "closed_at": "2022-01-06T16:05:55Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "```python\r\nimport sys\r\nts = msprime.sim_ancestry(4, sequence_length=45, random_seed=234)\r\nts.dump_text(populations=sys.stdout)\r\n```\r\n\r\ngives\r\n```\r\nid      metadata\r\nTraceback (most recent call last):\r\n  File \"tmp.py\", line 14, in <module>\r\n    ts.dump_text(populations=sys.stdout)\r\n  File \"/home/jk/work/github/tskit/python/tskit/trees.py\", line 3759, in dump_text\r\n    metadata = base64.b64encode(metadata).decode(encoding)\r\n  File \"/usr/lib/python3.8/base64.py\", line 58, in b64encode\r\n    encoded = binascii.b2a_base64(s, newline=False)\r\nTypeError: a bytes-like object is required, not 'dict'\r\n```\r\n\r\nI guess the right behaviour here is to make the ``base64_metadata`` option default to None, and to output decoded metadata as JSON if a schema is present (by default) and base64 encode it otherwise. If base64_metadata is True, then we output the raw bytes always.\r\n\r\nWe should move the implementation of this function to ``text_formats.py`` while we're fixing it up too, to try and downsize trees.py a bit and keep all the text processing stuff in one place.", "reactions": {"url": "https://api.github.com/repos/tskit-dev/tskit/issues/1860/reactions", "total_count": 1, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/tskit-dev/tskit/issues/1860/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/tskit-dev/tskit/issues/1858", "repository_url": "https://api.github.com/repos/tskit-dev/tskit", "labels_url": "https://api.github.com/repos/tskit-dev/tskit/issues/1858/labels{/name}", "comments_url": "https://api.github.com/repos/tskit-dev/tskit/issues/1858/comments", "events_url": "https://api.github.com/repos/tskit-dev/tskit/issues/1858/events", "html_url": "https://github.com/tskit-dev/tskit/issues/1858", "id": 1037274167, "node_id": "I_kwDOBzNZms4904w3", "number": 1858, "title": "File load error path imports h5py", "user": {"login": "jeromekelleher", "id": 2664569, "node_id": "MDQ6VXNlcjI2NjQ1Njk=", "avatar_url": "https://avatars.githubusercontent.com/u/2664569?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jeromekelleher", "html_url": "https://github.com/jeromekelleher", "followers_url": "https://api.github.com/users/jeromekelleher/followers", "following_url": "https://api.github.com/users/jeromekelleher/following{/other_user}", "gists_url": "https://api.github.com/users/jeromekelleher/gists{/gist_id}", "starred_url": "https://api.github.com/users/jeromekelleher/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jeromekelleher/subscriptions", "organizations_url": "https://api.github.com/users/jeromekelleher/orgs", "repos_url": "https://api.github.com/users/jeromekelleher/repos", "events_url": "https://api.github.com/users/jeromekelleher/events{/privacy}", "received_events_url": "https://api.github.com/users/jeromekelleher/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 831518500, "node_id": "MDU6TGFiZWw4MzE1MTg1MDA=", "url": "https://api.github.com/repos/tskit-dev/tskit/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/tskit-dev/tskit/milestones/26", "html_url": "https://github.com/tskit-dev/tskit/milestone/26", "labels_url": "https://api.github.com/repos/tskit-dev/tskit/milestones/26/labels", "id": 6835373, "node_id": "MDk6TWlsZXN0b25lNjgzNTM3Mw==", "number": 26, "title": "Python 0.4.0", "description": "", "creator": {"login": "benjeffery", "id": 8552, "node_id": "MDQ6VXNlcjg1NTI=", "avatar_url": "https://avatars.githubusercontent.com/u/8552?v=4", "gravatar_id": "", "url": "https://api.github.com/users/benjeffery", "html_url": "https://github.com/benjeffery", "followers_url": "https://api.github.com/users/benjeffery/followers", "following_url": "https://api.github.com/users/benjeffery/following{/other_user}", "gists_url": "https://api.github.com/users/benjeffery/gists{/gist_id}", "starred_url": "https://api.github.com/users/benjeffery/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/benjeffery/subscriptions", "organizations_url": "https://api.github.com/users/benjeffery/orgs", "repos_url": "https://api.github.com/users/benjeffery/repos", "events_url": "https://api.github.com/users/benjeffery/events{/privacy}", "received_events_url": "https://api.github.com/users/benjeffery/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 56, "state": "closed", "created_at": "2021-06-08T13:19:39Z", "updated_at": "2021-12-11T13:37:31Z", "due_on": "2021-12-10T08:00:00Z", "closed_at": "2021-12-11T13:37:31Z"}, "comments": 2, "created_at": "2021-10-27T10:57:10Z", "updated_at": "2021-11-03T12:42:45Z", "closed_at": "2021-11-03T12:42:45Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "The error path for loading tskit files ends up loading h5py [here](https://github.com/tskit-dev/tskit/blob/c9f3dbe08b25196daacb718eb60290523543bf2c/python/tskit/trees.py#L3520) which is leads to obscure downstream problems. It's definitely a bug that our error path involves importing such a complex and problematic third party dependency that isn't one of our registered dependencies, so we should do something different here.", "reactions": {"url": "https://api.github.com/repos/tskit-dev/tskit/issues/1858/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/tskit-dev/tskit/issues/1858/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/tskit-dev/tskit/issues/1828", "repository_url": "https://api.github.com/repos/tskit-dev/tskit", "labels_url": "https://api.github.com/repos/tskit-dev/tskit/issues/1828/labels{/name}", "comments_url": "https://api.github.com/repos/tskit-dev/tskit/issues/1828/comments", "events_url": "https://api.github.com/repos/tskit-dev/tskit/issues/1828/events", "html_url": "https://github.com/tskit-dev/tskit/issues/1828", "id": 1031836917, "node_id": "I_kwDOBzNZms49gJT1", "number": 1828, "title": "Text dump of individuals table does not include parents column", "user": {"login": "hyanwong", "id": 4699014, "node_id": "MDQ6VXNlcjQ2OTkwMTQ=", "avatar_url": "https://avatars.githubusercontent.com/u/4699014?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hyanwong", "html_url": "https://github.com/hyanwong", "followers_url": "https://api.github.com/users/hyanwong/followers", "following_url": "https://api.github.com/users/hyanwong/following{/other_user}", "gists_url": "https://api.github.com/users/hyanwong/gists{/gist_id}", "starred_url": "https://api.github.com/users/hyanwong/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hyanwong/subscriptions", "organizations_url": "https://api.github.com/users/hyanwong/orgs", "repos_url": "https://api.github.com/users/hyanwong/repos", "events_url": "https://api.github.com/users/hyanwong/events{/privacy}", "received_events_url": "https://api.github.com/users/hyanwong/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 831518500, "node_id": "MDU6TGFiZWw4MzE1MTg1MDA=", "url": "https://api.github.com/repos/tskit-dev/tskit/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}, {"id": 2385559214, "node_id": "MDU6TGFiZWwyMzg1NTU5MjE0", "url": "https://api.github.com/repos/tskit-dev/tskit/labels/Python%20API", "name": "Python API", "color": "d12add", "default": false, "description": "Issue is about the Python API"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/tskit-dev/tskit/milestones/26", "html_url": "https://github.com/tskit-dev/tskit/milestone/26", "labels_url": "https://api.github.com/repos/tskit-dev/tskit/milestones/26/labels", "id": 6835373, "node_id": "MDk6TWlsZXN0b25lNjgzNTM3Mw==", "number": 26, "title": "Python 0.4.0", "description": "", "creator": {"login": "benjeffery", "id": 8552, "node_id": "MDQ6VXNlcjg1NTI=", "avatar_url": "https://avatars.githubusercontent.com/u/8552?v=4", "gravatar_id": "", "url": "https://api.github.com/users/benjeffery", "html_url": "https://github.com/benjeffery", "followers_url": "https://api.github.com/users/benjeffery/followers", "following_url": "https://api.github.com/users/benjeffery/following{/other_user}", "gists_url": "https://api.github.com/users/benjeffery/gists{/gist_id}", "starred_url": "https://api.github.com/users/benjeffery/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/benjeffery/subscriptions", "organizations_url": "https://api.github.com/users/benjeffery/orgs", "repos_url": "https://api.github.com/users/benjeffery/repos", "events_url": "https://api.github.com/users/benjeffery/events{/privacy}", "received_events_url": "https://api.github.com/users/benjeffery/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 56, "state": "closed", "created_at": "2021-06-08T13:19:39Z", "updated_at": "2021-12-11T13:37:31Z", "due_on": "2021-12-10T08:00:00Z", "closed_at": "2021-12-11T13:37:31Z"}, "comments": 1, "created_at": "2021-10-20T21:15:34Z", "updated_at": "2021-11-03T15:56:16Z", "closed_at": "2021-11-03T15:56:16Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "The text output of the individuals table does not include the new parent column, i.e. `ts.dump_text(individuals=XXX)` does not dump parents:\r\n\r\n```python\r\nimport io\r\nimport tskit\r\nimport sys\r\n\r\nindividuals = \"\"\"\\\r\nflags       location     parents\r\n0           0.5,1.2      -1,-1\r\n0           1.0,3.4      0,-1\r\n0           3.5,6.3      0,1\r\n0           0.5          -1,-1\r\n0           0.5,0.5      2,3\r\n\"\"\"\r\n\r\nnodes = \"\"\"\\\r\nis_sample   individual   time\r\n1           0            0.0\r\n1           0            0.0\r\n0           -1           2.0\r\n0           -1           3.0\r\n\"\"\"\r\nedges = \"\"\"\\\r\nleft   right   parent  child\r\n0.0    7.0     2       0\r\n0.0    7.0     2       1\r\n7.0    10.0    3       0\r\n7.0    10.0    3       1\r\n\"\"\"\r\n\r\nts = tskit.load_text(\r\n    individuals=io.StringIO(individuals),\r\n    nodes=io.StringIO(nodes),\r\n    edges=io.StringIO(edges),\r\n    strict=False\r\n)\r\n\r\nts.dump_text(individuals=sys.stdout)  # no parent column\r\n\r\n\r\n```", "reactions": {"url": "https://api.github.com/repos/tskit-dev/tskit/issues/1828/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/tskit-dev/tskit/issues/1828/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/tskit-dev/tskit/issues/1824", "repository_url": "https://api.github.com/repos/tskit-dev/tskit", "labels_url": "https://api.github.com/repos/tskit-dev/tskit/issues/1824/labels{/name}", "comments_url": "https://api.github.com/repos/tskit-dev/tskit/issues/1824/comments", "events_url": "https://api.github.com/repos/tskit-dev/tskit/issues/1824/events", "html_url": "https://github.com/tskit-dev/tskit/issues/1824", "id": 1031128332, "node_id": "I_kwDOBzNZms49dcUM", "number": 1824, "title": "Can't parse text version of individuals table with blank columns", "user": {"login": "hyanwong", "id": 4699014, "node_id": "MDQ6VXNlcjQ2OTkwMTQ=", "avatar_url": "https://avatars.githubusercontent.com/u/4699014?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hyanwong", "html_url": "https://github.com/hyanwong", "followers_url": "https://api.github.com/users/hyanwong/followers", "following_url": "https://api.github.com/users/hyanwong/following{/other_user}", "gists_url": "https://api.github.com/users/hyanwong/gists{/gist_id}", "starred_url": "https://api.github.com/users/hyanwong/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hyanwong/subscriptions", "organizations_url": "https://api.github.com/users/hyanwong/orgs", "repos_url": "https://api.github.com/users/hyanwong/repos", "events_url": "https://api.github.com/users/hyanwong/events{/privacy}", "received_events_url": "https://api.github.com/users/hyanwong/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 831518500, "node_id": "MDU6TGFiZWw4MzE1MTg1MDA=", "url": "https://api.github.com/repos/tskit-dev/tskit/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}, {"id": 2385559214, "node_id": "MDU6TGFiZWwyMzg1NTU5MjE0", "url": "https://api.github.com/repos/tskit-dev/tskit/labels/Python%20API", "name": "Python API", "color": "d12add", "default": false, "description": "Issue is about the Python API"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/tskit-dev/tskit/milestones/16", "html_url": "https://github.com/tskit-dev/tskit/milestone/16", "labels_url": "https://api.github.com/repos/tskit-dev/tskit/milestones/16/labels", "id": 5930253, "node_id": "MDk6TWlsZXN0b25lNTkzMDI1Mw==", "number": 16, "title": "Python upcoming", "description": "Issues not associated with immediate next release but are considered a priority for development in the Python API.", "creator": {"login": "jeromekelleher", "id": 2664569, "node_id": "MDQ6VXNlcjI2NjQ1Njk=", "avatar_url": "https://avatars.githubusercontent.com/u/2664569?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jeromekelleher", "html_url": "https://github.com/jeromekelleher", "followers_url": "https://api.github.com/users/jeromekelleher/followers", "following_url": "https://api.github.com/users/jeromekelleher/following{/other_user}", "gists_url": "https://api.github.com/users/jeromekelleher/gists{/gist_id}", "starred_url": "https://api.github.com/users/jeromekelleher/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jeromekelleher/subscriptions", "organizations_url": "https://api.github.com/users/jeromekelleher/orgs", "repos_url": "https://api.github.com/users/jeromekelleher/repos", "events_url": "https://api.github.com/users/jeromekelleher/events{/privacy}", "received_events_url": "https://api.github.com/users/jeromekelleher/received_events", "type": "User", "site_admin": false}, "open_issues": 55, "closed_issues": 24, "state": "open", "created_at": "2020-09-29T13:48:00Z", "updated_at": "2022-09-09T13:08:58Z", "due_on": null, "closed_at": null}, "comments": 2, "created_at": "2021-10-20T08:32:35Z", "updated_at": "2021-11-26T15:37:37Z", "closed_at": "2021-11-26T15:37:23Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "The example from the [data-model api docs](https://github.com/tskit-dev/tskit/blob/main/docs/data-model.rst#individual-text-format) can't be read in, either in strict mode:\r\n\r\n```python\r\nimport io\r\nimport tskit\r\n\r\nindividuals = \"\"\"\\\r\nflags\\tlocation\\tparents\r\n0\\t0.5,1.2\\t-1,-1\r\n0\\t1.0,3.4\\t0,-1\r\n0\\t1.2\\t\r\n\"\"\"\r\n\r\ntskit.parse_individuals(io.StringIO(individuals))\r\n```\r\n\r\nwhich gives\r\n\r\n```\r\nTraceback (most recent call last):\r\n  File \"<stdin>\", line 1, in <module>\r\n  File \"/Users/yan/Documents/Research/BDI/tskit/python/tskit/trees.py\", line 2928, in parse_individuals\r\n    parents = tuple(map(int, parents_string.split(\",\")))\r\nValueError: invalid literal for int() with base 10: '\\n'\r\n``` \r\n\r\nOr not in strict mode\r\n\r\n```python\r\nindividuals = \"\"\"\\\r\nflags       location     parents\r\n0           0.5,1.2      -1,-1\r\n0           1.0,3.4      0,-1\r\n0           1.2  \r\n\"\"\"\r\n\r\ntskit.parse_individuals(io.StringIO(individuals), strict=False)\r\n```\r\n\r\ngives\r\n\r\n```\r\nTraceback (most recent call last):\r\n  File \"<stdin>\", line 1, in <module>\r\n  File \"/Users/yan/Documents/Research/BDI/tskit/python/tskit/trees.py\", line 2926, in parse_individuals\r\n    parents_string = tokens[parents_index]\r\nIndexError: list index out of range\r\n```", "reactions": {"url": "https://api.github.com/repos/tskit-dev/tskit/issues/1824/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/tskit-dev/tskit/issues/1824/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/tskit-dev/tskit/issues/1808", "repository_url": "https://api.github.com/repos/tskit-dev/tskit", "labels_url": "https://api.github.com/repos/tskit-dev/tskit/issues/1808/labels{/name}", "comments_url": "https://api.github.com/repos/tskit-dev/tskit/issues/1808/comments", "events_url": "https://api.github.com/repos/tskit-dev/tskit/issues/1808/events", "html_url": "https://github.com/tskit-dev/tskit/issues/1808", "id": 1028991519, "node_id": "I_kwDOBzNZms49VSof", "number": 1808, "title": "Missing IBD segments", "user": {"login": "jeromekelleher", "id": 2664569, "node_id": "MDQ6VXNlcjI2NjQ1Njk=", "avatar_url": "https://avatars.githubusercontent.com/u/2664569?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jeromekelleher", "html_url": "https://github.com/jeromekelleher", "followers_url": "https://api.github.com/users/jeromekelleher/followers", "following_url": "https://api.github.com/users/jeromekelleher/following{/other_user}", "gists_url": "https://api.github.com/users/jeromekelleher/gists{/gist_id}", "starred_url": "https://api.github.com/users/jeromekelleher/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jeromekelleher/subscriptions", "organizations_url": "https://api.github.com/users/jeromekelleher/orgs", "repos_url": "https://api.github.com/users/jeromekelleher/repos", "events_url": "https://api.github.com/users/jeromekelleher/events{/privacy}", "received_events_url": "https://api.github.com/users/jeromekelleher/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 831518500, "node_id": "MDU6TGFiZWw4MzE1MTg1MDA=", "url": "https://api.github.com/repos/tskit-dev/tskit/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/tskit-dev/tskit/milestones/26", "html_url": "https://github.com/tskit-dev/tskit/milestone/26", "labels_url": "https://api.github.com/repos/tskit-dev/tskit/milestones/26/labels", "id": 6835373, "node_id": "MDk6TWlsZXN0b25lNjgzNTM3Mw==", "number": 26, "title": "Python 0.4.0", "description": "", "creator": {"login": "benjeffery", "id": 8552, "node_id": "MDQ6VXNlcjg1NTI=", "avatar_url": "https://avatars.githubusercontent.com/u/8552?v=4", "gravatar_id": "", "url": "https://api.github.com/users/benjeffery", "html_url": "https://github.com/benjeffery", "followers_url": "https://api.github.com/users/benjeffery/followers", "following_url": "https://api.github.com/users/benjeffery/following{/other_user}", "gists_url": "https://api.github.com/users/benjeffery/gists{/gist_id}", "starred_url": "https://api.github.com/users/benjeffery/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/benjeffery/subscriptions", "organizations_url": "https://api.github.com/users/benjeffery/orgs", "repos_url": "https://api.github.com/users/benjeffery/repos", "events_url": "https://api.github.com/users/benjeffery/events{/privacy}", "received_events_url": "https://api.github.com/users/benjeffery/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 56, "state": "closed", "created_at": "2021-06-08T13:19:39Z", "updated_at": "2021-12-11T13:37:31Z", "due_on": "2021-12-10T08:00:00Z", "closed_at": "2021-12-11T13:37:31Z"}, "comments": 0, "created_at": "2021-10-18T11:29:24Z", "updated_at": "2021-10-21T14:37:53Z", "closed_at": "2021-10-21T14:37:52Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "Adding some new tests based on a simplified IBD definition in #1809 has raised some issues. There are definitely some problems with the IBD segments implementation. Here's one example:\r\n\r\n```\r\ntests/test_ibd.py::TestIbdDefinition::test_all_pairs[ts8]                                     \r\n3.19\u250a     8     \u250a                              \r\n    \u250a   \u250f\u2501\u253b\u2501\u2501\u2513  \u250a                              \r\n1.44\u250a   7    \u2503  \u250a                              \r\n    \u250a \u250f\u2501\u253b\u2513   \u2503  \u250a\r\n0.52\u250a \u2503  \u2503   6  \u250a      \r\n    \u250a \u2503  \u2503  \u250f\u253b\u2513 \u250a                                                                             \r\n0.30\u250a \u2503  5  \u2503 \u2503 \u250a                                                                             \r\n    \u250a \u2503 \u250f\u253b\u2513 \u2503 \u2503 \u250a                                                                             \r\n0.00\u250a 0 3 4 1 2 \u250a                                                                             \r\n    0           1                                                                             \r\n                                                                                              \r\nLIB: defaultdict(<class 'list'>, {(5, 7): [IbdSegment(left=0, right=1.0, node=7)], (6, 8): [IbdSegment(left=0.0, right=1.0, node=8)], (6, 7): [IbdSegment(left=0.0, right=1.0, node=8)], (7, 8\r\n): [IbdSegment(left=0, right=1.0, node=8)]})   \r\nDEF: {(5, 6): [IbdSegment(left=0, right=1.0, node=8)], (5, 7): [IbdSegment(left=0, right=1.0, node=7)], (5, 8): [IbdSegment(left=0, right=1.0, node=8)], (6, 7): [IbdSegment(left=0, right=1.0\r\n, node=8)], (6, 8): [IbdSegment(left=0, right=1.0, node=8)], (7, 8): [IbdSegment(left=0, right=1.0, node=8)]}\r\nFAILED                                                                       \r\n```\r\n\r\nHere we have no IBD segment reported for ``(5, 6)`` in the lib version (this is an example with internal samples). I'm not sure if all problems are to do with internal samples, though.\r\n\r\nProbably related, #1677 and #1678", "reactions": {"url": "https://api.github.com/repos/tskit-dev/tskit/issues/1808/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/tskit-dev/tskit/issues/1808/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/tskit-dev/tskit/issues/1803", "repository_url": "https://api.github.com/repos/tskit-dev/tskit", "labels_url": "https://api.github.com/repos/tskit-dev/tskit/issues/1803/labels{/name}", "comments_url": "https://api.github.com/repos/tskit-dev/tskit/issues/1803/comments", "events_url": "https://api.github.com/repos/tskit-dev/tskit/issues/1803/events", "html_url": "https://github.com/tskit-dev/tskit/issues/1803", "id": 1028270006, "node_id": "I_kwDOBzNZms49Sie2", "number": 1803, "title": "Node labels in to_nexus are ambiguous", "user": {"login": "jeromekelleher", "id": 2664569, "node_id": "MDQ6VXNlcjI2NjQ1Njk=", "avatar_url": "https://avatars.githubusercontent.com/u/2664569?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jeromekelleher", "html_url": "https://github.com/jeromekelleher", "followers_url": "https://api.github.com/users/jeromekelleher/followers", "following_url": "https://api.github.com/users/jeromekelleher/following{/other_user}", "gists_url": "https://api.github.com/users/jeromekelleher/gists{/gist_id}", "starred_url": "https://api.github.com/users/jeromekelleher/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jeromekelleher/subscriptions", "organizations_url": "https://api.github.com/users/jeromekelleher/orgs", "repos_url": "https://api.github.com/users/jeromekelleher/repos", "events_url": "https://api.github.com/users/jeromekelleher/events{/privacy}", "received_events_url": "https://api.github.com/users/jeromekelleher/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 831518500, "node_id": "MDU6TGFiZWw4MzE1MTg1MDA=", "url": "https://api.github.com/repos/tskit-dev/tskit/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}, {"id": 2385559214, "node_id": "MDU6TGFiZWwyMzg1NTU5MjE0", "url": "https://api.github.com/repos/tskit-dev/tskit/labels/Python%20API", "name": "Python API", "color": "d12add", "default": false, "description": "Issue is about the Python API"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2021-10-17T09:35:08Z", "updated_at": "2021-11-04T12:52:20Z", "closed_at": "2021-11-04T12:52:20Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "As @jeetsukumaran points out our default node labels in ``to_nexus`` are ambiguous as they are in the form ``\"tsk_{node.id}_{node.flags}\"``, and these would be interpreted as ``\"tsk {node.id} {node.flags}\"`` by conformant nexus parsers.\r\n\r\nSince it's unlikely many people are using the to_nexus functionality at the moment (given that it's broken! #1785 ) I think we're free to change things around a bit. \r\n\r\nThe idea of including the ID and flags in the label is so that samples can be identified, but maybe the flags are extraneous for most applications (the samples are nearly always be the leaf nodes), and we would be better off keeping things simple and just including the ID. The idea of the ``tsk`` prefix is that some things get confused by integer names, but maybe that's extraneous as well. So, perhaps the best default behaviour would be to simply use the bare ID values?\r\n\r\nAs we're updating the method, I think it's worthwhile adding (or at least planning for) custom node labels as well, via a mapping like we use in the current \"newick\" method. (Which we're planning on deprecating, #1671 )\r\n\r\nAny thoughts here @jeetsukumaran? Great to get your input here so that we can at least lay the foundations for getting good interoperability with the classical phylo formats. ", "reactions": {"url": "https://api.github.com/repos/tskit-dev/tskit/issues/1803/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/tskit-dev/tskit/issues/1803/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/tskit-dev/tskit/issues/1785", "repository_url": "https://api.github.com/repos/tskit-dev/tskit", "labels_url": "https://api.github.com/repos/tskit-dev/tskit/issues/1785/labels{/name}", "comments_url": "https://api.github.com/repos/tskit-dev/tskit/issues/1785/comments", "events_url": "https://api.github.com/repos/tskit-dev/tskit/issues/1785/events", "html_url": "https://github.com/tskit-dev/tskit/issues/1785", "id": 1024635977, "node_id": "I_kwDOBzNZms49ErRJ", "number": 1785, "title": "``to_nexus()`` does not emit compliant Nexus", "user": {"login": "jeetsukumaran", "id": 26183, "node_id": "MDQ6VXNlcjI2MTgz", "avatar_url": "https://avatars.githubusercontent.com/u/26183?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jeetsukumaran", "html_url": "https://github.com/jeetsukumaran", "followers_url": "https://api.github.com/users/jeetsukumaran/followers", "following_url": "https://api.github.com/users/jeetsukumaran/following{/other_user}", "gists_url": "https://api.github.com/users/jeetsukumaran/gists{/gist_id}", "starred_url": "https://api.github.com/users/jeetsukumaran/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jeetsukumaran/subscriptions", "organizations_url": "https://api.github.com/users/jeetsukumaran/orgs", "repos_url": "https://api.github.com/users/jeetsukumaran/repos", "events_url": "https://api.github.com/users/jeetsukumaran/events{/privacy}", "received_events_url": "https://api.github.com/users/jeetsukumaran/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 831518500, "node_id": "MDU6TGFiZWw4MzE1MTg1MDA=", "url": "https://api.github.com/repos/tskit-dev/tskit/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}, {"id": 2385559214, "node_id": "MDU6TGFiZWwyMzg1NTU5MjE0", "url": "https://api.github.com/repos/tskit-dev/tskit/labels/Python%20API", "name": "Python API", "color": "d12add", "default": false, "description": "Issue is about the Python API"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/tskit-dev/tskit/milestones/16", "html_url": "https://github.com/tskit-dev/tskit/milestone/16", "labels_url": "https://api.github.com/repos/tskit-dev/tskit/milestones/16/labels", "id": 5930253, "node_id": "MDk6TWlsZXN0b25lNTkzMDI1Mw==", "number": 16, "title": "Python upcoming", "description": "Issues not associated with immediate next release but are considered a priority for development in the Python API.", "creator": {"login": "jeromekelleher", "id": 2664569, "node_id": "MDQ6VXNlcjI2NjQ1Njk=", "avatar_url": "https://avatars.githubusercontent.com/u/2664569?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jeromekelleher", "html_url": "https://github.com/jeromekelleher", "followers_url": "https://api.github.com/users/jeromekelleher/followers", "following_url": "https://api.github.com/users/jeromekelleher/following{/other_user}", "gists_url": "https://api.github.com/users/jeromekelleher/gists{/gist_id}", "starred_url": "https://api.github.com/users/jeromekelleher/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jeromekelleher/subscriptions", "organizations_url": "https://api.github.com/users/jeromekelleher/orgs", "repos_url": "https://api.github.com/users/jeromekelleher/repos", "events_url": "https://api.github.com/users/jeromekelleher/events{/privacy}", "received_events_url": "https://api.github.com/users/jeromekelleher/received_events", "type": "User", "site_admin": false}, "open_issues": 55, "closed_issues": 24, "state": "open", "created_at": "2020-09-29T13:48:00Z", "updated_at": "2022-09-09T13:08:58Z", "due_on": null, "closed_at": null}, "comments": 4, "created_at": "2021-10-13T00:27:07Z", "updated_at": "2021-10-22T18:18:28Z", "closed_at": "2021-10-22T18:18:28Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "As per the above, the Nexus string emitted by tskit is not standard Nexus and cannot be parsed by most software.\r\n\r\nThere are a two different problems.\r\n\r\n(1) The TAXA block requires a ``DIMENSIONS NTAX=##`` statement.\r\n\r\n(2) The list of taxon labels should be separated by SPACES, *NOT* by commas.\r\n\r\nThe ``TreeSequence.to_nexus()`` statement currently emits:\r\n\r\n~~~\r\n#NEXUS\r\nBEGIN TAXA;\r\nTAXLABELS tsk_0_1,tsk_1_1,tsk_2_1,tsk_3_1,tsk_4_0,tsk_5_0,tsk_6_0;\r\nEND;\r\nBEGIN TREES;\r\n\tTREE tree0.00000000000000_100.00000000000000 = ((tsk_1_1:0.07086621911734,tsk_2_1:0.07086621911734)tsk_4_0:4.21281381972469,(tsk_0_1:1.20610709140453,tsk_3_1:1.20610709140453)tsk_5_0:3.07757294743750)tsk_6_0;\r\nEND;\r\n~~~\r\n\r\nMultiple program fail to parse this, including PAUP, BEAST, and, in fact, most phylogenetic programs and processing libraries.\r\n\r\nAdding a DIMENSIONS statement and separating the taxon labels using spaces makes this not only compliant with standard Nexus, but also readable by most Nexus-supporting phylogenetic programs (whatever else their idiosyncracies! :) ) \r\n\r\n~~~\r\n#NEXUS\r\nBEGIN TAXA;\r\nDIMENSIONS NTAX=7;\r\nTAXLABELS tsk_0_1 tsk_1_1 tsk_2_1 tsk_3_1 tsk_4_0 tsk_5_0 tsk_6_0;\r\nEND;\r\nBEGIN TREES;\r\n\tTREE tree0.00000000000000_100.00000000000000 = ((tsk_1_1:0.07086621911734,tsk_2_1:0.07086621911734)tsk_4_0:4.21281381972469,(tsk_0_1:1.20610709140453,tsk_3_1:1.20610709140453)tsk_5_0:3.07757294743750)tsk_6_0;\r\nEND;\r\n~~~\r\n ", "reactions": {"url": "https://api.github.com/repos/tskit-dev/tskit/issues/1785/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/tskit-dev/tskit/issues/1785/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/tskit-dev/tskit/issues/1776", "repository_url": "https://api.github.com/repos/tskit-dev/tskit", "labels_url": "https://api.github.com/repos/tskit-dev/tskit/issues/1776/labels{/name}", "comments_url": "https://api.github.com/repos/tskit-dev/tskit/issues/1776/comments", "events_url": "https://api.github.com/repos/tskit-dev/tskit/issues/1776/events", "html_url": "https://github.com/tskit-dev/tskit/issues/1776", "id": 1021702165, "node_id": "I_kwDOBzNZms485fAV", "number": 1776, "title": "timeasc/timedesc node orderings only hold *within* a particular root", "user": {"login": "jeromekelleher", "id": 2664569, "node_id": "MDQ6VXNlcjI2NjQ1Njk=", "avatar_url": "https://avatars.githubusercontent.com/u/2664569?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jeromekelleher", "html_url": "https://github.com/jeromekelleher", "followers_url": "https://api.github.com/users/jeromekelleher/followers", "following_url": "https://api.github.com/users/jeromekelleher/following{/other_user}", "gists_url": "https://api.github.com/users/jeromekelleher/gists{/gist_id}", "starred_url": "https://api.github.com/users/jeromekelleher/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jeromekelleher/subscriptions", "organizations_url": "https://api.github.com/users/jeromekelleher/orgs", "repos_url": "https://api.github.com/users/jeromekelleher/repos", "events_url": "https://api.github.com/users/jeromekelleher/events{/privacy}", "received_events_url": "https://api.github.com/users/jeromekelleher/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 831518500, "node_id": "MDU6TGFiZWw4MzE1MTg1MDA=", "url": "https://api.github.com/repos/tskit-dev/tskit/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": {"login": "jeromekelleher", "id": 2664569, "node_id": "MDQ6VXNlcjI2NjQ1Njk=", "avatar_url": "https://avatars.githubusercontent.com/u/2664569?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jeromekelleher", "html_url": "https://github.com/jeromekelleher", "followers_url": "https://api.github.com/users/jeromekelleher/followers", "following_url": "https://api.github.com/users/jeromekelleher/following{/other_user}", "gists_url": "https://api.github.com/users/jeromekelleher/gists{/gist_id}", "starred_url": "https://api.github.com/users/jeromekelleher/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jeromekelleher/subscriptions", "organizations_url": "https://api.github.com/users/jeromekelleher/orgs", "repos_url": "https://api.github.com/users/jeromekelleher/repos", "events_url": "https://api.github.com/users/jeromekelleher/events{/privacy}", "received_events_url": "https://api.github.com/users/jeromekelleher/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "jeromekelleher", "id": 2664569, "node_id": "MDQ6VXNlcjI2NjQ1Njk=", "avatar_url": "https://avatars.githubusercontent.com/u/2664569?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jeromekelleher", "html_url": "https://github.com/jeromekelleher", "followers_url": "https://api.github.com/users/jeromekelleher/followers", "following_url": "https://api.github.com/users/jeromekelleher/following{/other_user}", "gists_url": "https://api.github.com/users/jeromekelleher/gists{/gist_id}", "starred_url": "https://api.github.com/users/jeromekelleher/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jeromekelleher/subscriptions", "organizations_url": "https://api.github.com/users/jeromekelleher/orgs", "repos_url": "https://api.github.com/users/jeromekelleher/repos", "events_url": "https://api.github.com/users/jeromekelleher/events{/privacy}", "received_events_url": "https://api.github.com/users/jeromekelleher/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/tskit-dev/tskit/milestones/26", "html_url": "https://github.com/tskit-dev/tskit/milestone/26", "labels_url": "https://api.github.com/repos/tskit-dev/tskit/milestones/26/labels", "id": 6835373, "node_id": "MDk6TWlsZXN0b25lNjgzNTM3Mw==", "number": 26, "title": "Python 0.4.0", "description": "", "creator": {"login": "benjeffery", "id": 8552, "node_id": "MDQ6VXNlcjg1NTI=", "avatar_url": "https://avatars.githubusercontent.com/u/8552?v=4", "gravatar_id": "", "url": "https://api.github.com/users/benjeffery", "html_url": "https://github.com/benjeffery", "followers_url": "https://api.github.com/users/benjeffery/followers", "following_url": "https://api.github.com/users/benjeffery/following{/other_user}", "gists_url": "https://api.github.com/users/benjeffery/gists{/gist_id}", "starred_url": "https://api.github.com/users/benjeffery/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/benjeffery/subscriptions", "organizations_url": "https://api.github.com/users/benjeffery/orgs", "repos_url": "https://api.github.com/users/benjeffery/repos", "events_url": "https://api.github.com/users/benjeffery/events{/privacy}", "received_events_url": "https://api.github.com/users/benjeffery/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 56, "state": "closed", "created_at": "2021-06-08T13:19:39Z", "updated_at": "2021-12-11T13:37:31Z", "due_on": "2021-12-10T08:00:00Z", "closed_at": "2021-12-11T13:37:31Z"}, "comments": 4, "created_at": "2021-10-09T12:54:04Z", "updated_at": "2021-10-18T12:43:34Z", "closed_at": "2021-10-18T12:43:34Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "If we have two disconnected subtrees in a tree, the ``tree.nodes(order=\"timeasc\")`` function currently visits nodes in one subtree first in time order, then the other.\r\n\r\nIt would be more consistent and logical if all nodes in the tree were visited in time order.", "reactions": {"url": "https://api.github.com/repos/tskit-dev/tskit/issues/1776/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/tskit-dev/tskit/issues/1776/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/tskit-dev/tskit/issues/1739", "repository_url": "https://api.github.com/repos/tskit-dev/tskit", "labels_url": "https://api.github.com/repos/tskit-dev/tskit/issues/1739/labels{/name}", "comments_url": "https://api.github.com/repos/tskit-dev/tskit/issues/1739/comments", "events_url": "https://api.github.com/repos/tskit-dev/tskit/issues/1739/events", "html_url": "https://github.com/tskit-dev/tskit/issues/1739", "id": 1009053081, "node_id": "I_kwDOBzNZms48JO2Z", "number": 1739, "title": "ibd_segments crashes sometimes", "user": {"login": "gtsambos", "id": 17755074, "node_id": "MDQ6VXNlcjE3NzU1MDc0", "avatar_url": "https://avatars.githubusercontent.com/u/17755074?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gtsambos", "html_url": "https://github.com/gtsambos", "followers_url": "https://api.github.com/users/gtsambos/followers", "following_url": "https://api.github.com/users/gtsambos/following{/other_user}", "gists_url": "https://api.github.com/users/gtsambos/gists{/gist_id}", "starred_url": "https://api.github.com/users/gtsambos/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gtsambos/subscriptions", "organizations_url": "https://api.github.com/users/gtsambos/orgs", "repos_url": "https://api.github.com/users/gtsambos/repos", "events_url": "https://api.github.com/users/gtsambos/events{/privacy}", "received_events_url": "https://api.github.com/users/gtsambos/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 831518500, "node_id": "MDU6TGFiZWw4MzE1MTg1MDA=", "url": "https://api.github.com/repos/tskit-dev/tskit/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": {"login": "jeromekelleher", "id": 2664569, "node_id": "MDQ6VXNlcjI2NjQ1Njk=", "avatar_url": "https://avatars.githubusercontent.com/u/2664569?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jeromekelleher", "html_url": "https://github.com/jeromekelleher", "followers_url": "https://api.github.com/users/jeromekelleher/followers", "following_url": "https://api.github.com/users/jeromekelleher/following{/other_user}", "gists_url": "https://api.github.com/users/jeromekelleher/gists{/gist_id}", "starred_url": "https://api.github.com/users/jeromekelleher/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jeromekelleher/subscriptions", "organizations_url": "https://api.github.com/users/jeromekelleher/orgs", "repos_url": "https://api.github.com/users/jeromekelleher/repos", "events_url": "https://api.github.com/users/jeromekelleher/events{/privacy}", "received_events_url": "https://api.github.com/users/jeromekelleher/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "jeromekelleher", "id": 2664569, "node_id": "MDQ6VXNlcjI2NjQ1Njk=", "avatar_url": "https://avatars.githubusercontent.com/u/2664569?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jeromekelleher", "html_url": "https://github.com/jeromekelleher", "followers_url": "https://api.github.com/users/jeromekelleher/followers", "following_url": "https://api.github.com/users/jeromekelleher/following{/other_user}", "gists_url": "https://api.github.com/users/jeromekelleher/gists{/gist_id}", "starred_url": "https://api.github.com/users/jeromekelleher/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jeromekelleher/subscriptions", "organizations_url": "https://api.github.com/users/jeromekelleher/orgs", "repos_url": "https://api.github.com/users/jeromekelleher/repos", "events_url": "https://api.github.com/users/jeromekelleher/events{/privacy}", "received_events_url": "https://api.github.com/users/jeromekelleher/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 10, "created_at": "2021-09-28T02:42:15Z", "updated_at": "2021-09-30T12:35:03Z", "closed_at": "2021-09-30T12:35:03Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "I got this error message\r\n```\r\nPython(86357,0x1171a15c0) malloc: Incorrect checksum for freed object 0x7fa5a028a800: probably modified after being freed.\r\nCorrupt value: 0x41117b6000000000\r\nPython(86357,0x1171a15c0) malloc: *** set a breakpoint in malloc_error_break to debug\r\nAbort trap: 6\r\n```\r\nwhen I ran the following code:\r\n```python\r\nts = msprime.sim_mutations(ts, rate=1.65e-8)\r\nibd = ts.find_ibd(min_length=min_length, max_time=max_time)\r\n```\r\nThis code used to work fine, so I assume it's happened because of the recent changes. I'm using the development version of tskit at [this commit](https://github.com/tskit-dev/tskit/tree/9cd44736be9fbc0092ad26628531bccf69e1255c).", "reactions": {"url": "https://api.github.com/repos/tskit-dev/tskit/issues/1739/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/tskit-dev/tskit/issues/1739/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/tskit-dev/tskit/issues/1725", "repository_url": "https://api.github.com/repos/tskit-dev/tskit", "labels_url": "https://api.github.com/repos/tskit-dev/tskit/issues/1725/labels{/name}", "comments_url": "https://api.github.com/repos/tskit-dev/tskit/issues/1725/comments", "events_url": "https://api.github.com/repos/tskit-dev/tskit/issues/1725/events", "html_url": "https://github.com/tskit-dev/tskit/issues/1725", "id": 1000041012, "node_id": "I_kwDOBzNZms47m2o0", "number": 1725, "title": "Fix node traversal orderings to work with virtual_root", "user": {"login": "jeromekelleher", "id": 2664569, "node_id": "MDQ6VXNlcjI2NjQ1Njk=", "avatar_url": "https://avatars.githubusercontent.com/u/2664569?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jeromekelleher", "html_url": "https://github.com/jeromekelleher", "followers_url": "https://api.github.com/users/jeromekelleher/followers", "following_url": "https://api.github.com/users/jeromekelleher/following{/other_user}", "gists_url": "https://api.github.com/users/jeromekelleher/gists{/gist_id}", "starred_url": "https://api.github.com/users/jeromekelleher/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jeromekelleher/subscriptions", "organizations_url": "https://api.github.com/users/jeromekelleher/orgs", "repos_url": "https://api.github.com/users/jeromekelleher/repos", "events_url": "https://api.github.com/users/jeromekelleher/events{/privacy}", "received_events_url": "https://api.github.com/users/jeromekelleher/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 831518500, "node_id": "MDU6TGFiZWw4MzE1MTg1MDA=", "url": "https://api.github.com/repos/tskit-dev/tskit/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}, {"id": 2385559214, "node_id": "MDU6TGFiZWwyMzg1NTU5MjE0", "url": "https://api.github.com/repos/tskit-dev/tskit/labels/Python%20API", "name": "Python API", "color": "d12add", "default": false, "description": "Issue is about the Python API"}], "state": "closed", "locked": false, "assignee": {"login": "jeromekelleher", "id": 2664569, "node_id": "MDQ6VXNlcjI2NjQ1Njk=", "avatar_url": "https://avatars.githubusercontent.com/u/2664569?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jeromekelleher", "html_url": "https://github.com/jeromekelleher", "followers_url": "https://api.github.com/users/jeromekelleher/followers", "following_url": "https://api.github.com/users/jeromekelleher/following{/other_user}", "gists_url": "https://api.github.com/users/jeromekelleher/gists{/gist_id}", "starred_url": "https://api.github.com/users/jeromekelleher/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jeromekelleher/subscriptions", "organizations_url": "https://api.github.com/users/jeromekelleher/orgs", "repos_url": "https://api.github.com/users/jeromekelleher/repos", "events_url": "https://api.github.com/users/jeromekelleher/events{/privacy}", "received_events_url": "https://api.github.com/users/jeromekelleher/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "jeromekelleher", "id": 2664569, "node_id": "MDQ6VXNlcjI2NjQ1Njk=", "avatar_url": "https://avatars.githubusercontent.com/u/2664569?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jeromekelleher", "html_url": "https://github.com/jeromekelleher", "followers_url": "https://api.github.com/users/jeromekelleher/followers", "following_url": "https://api.github.com/users/jeromekelleher/following{/other_user}", "gists_url": "https://api.github.com/users/jeromekelleher/gists{/gist_id}", "starred_url": "https://api.github.com/users/jeromekelleher/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jeromekelleher/subscriptions", "organizations_url": "https://api.github.com/users/jeromekelleher/orgs", "repos_url": "https://api.github.com/users/jeromekelleher/repos", "events_url": "https://api.github.com/users/jeromekelleher/events{/privacy}", "received_events_url": "https://api.github.com/users/jeromekelleher/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/tskit-dev/tskit/milestones/26", "html_url": "https://github.com/tskit-dev/tskit/milestone/26", "labels_url": "https://api.github.com/repos/tskit-dev/tskit/milestones/26/labels", "id": 6835373, "node_id": "MDk6TWlsZXN0b25lNjgzNTM3Mw==", "number": 26, "title": "Python 0.4.0", "description": "", "creator": {"login": "benjeffery", "id": 8552, "node_id": "MDQ6VXNlcjg1NTI=", "avatar_url": "https://avatars.githubusercontent.com/u/8552?v=4", "gravatar_id": "", "url": "https://api.github.com/users/benjeffery", "html_url": "https://github.com/benjeffery", "followers_url": "https://api.github.com/users/benjeffery/followers", "following_url": "https://api.github.com/users/benjeffery/following{/other_user}", "gists_url": "https://api.github.com/users/benjeffery/gists{/gist_id}", "starred_url": "https://api.github.com/users/benjeffery/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/benjeffery/subscriptions", "organizations_url": "https://api.github.com/users/benjeffery/orgs", "repos_url": "https://api.github.com/users/benjeffery/repos", "events_url": "https://api.github.com/users/benjeffery/events{/privacy}", "received_events_url": "https://api.github.com/users/benjeffery/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 56, "state": "closed", "created_at": "2021-06-08T13:19:39Z", "updated_at": "2021-12-11T13:37:31Z", "due_on": "2021-12-10T08:00:00Z", "closed_at": "2021-12-11T13:37:31Z"}, "comments": 0, "created_at": "2021-09-18T13:55:51Z", "updated_at": "2021-10-18T12:43:35Z", "closed_at": "2021-10-18T12:43:34Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "Currently the orders\r\n```\r\n               # \"postorder\",\r\n                # \"timeasc\",\r\n                # \"timedesc\",\r\n                # \"minlex_postorder\",\r\n```\r\ndon't work properly if we supply virtual_root as the ``root`` argument to the Tree.nodes method.", "reactions": {"url": "https://api.github.com/repos/tskit-dev/tskit/issues/1725/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/tskit-dev/tskit/issues/1725/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/tskit-dev/tskit/issues/1724", "repository_url": "https://api.github.com/repos/tskit-dev/tskit", "labels_url": "https://api.github.com/repos/tskit-dev/tskit/issues/1724/labels{/name}", "comments_url": "https://api.github.com/repos/tskit-dev/tskit/issues/1724/comments", "events_url": "https://api.github.com/repos/tskit-dev/tskit/issues/1724/events", "html_url": "https://github.com/tskit-dev/tskit/issues/1724", "id": 1000039182, "node_id": "I_kwDOBzNZms47m2MO", "number": 1724, "title": "Fixup tracked_samples to work properly with virtual_root", "user": {"login": "jeromekelleher", "id": 2664569, "node_id": "MDQ6VXNlcjI2NjQ1Njk=", "avatar_url": "https://avatars.githubusercontent.com/u/2664569?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jeromekelleher", "html_url": "https://github.com/jeromekelleher", "followers_url": "https://api.github.com/users/jeromekelleher/followers", "following_url": "https://api.github.com/users/jeromekelleher/following{/other_user}", "gists_url": "https://api.github.com/users/jeromekelleher/gists{/gist_id}", "starred_url": "https://api.github.com/users/jeromekelleher/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jeromekelleher/subscriptions", "organizations_url": "https://api.github.com/users/jeromekelleher/orgs", "repos_url": "https://api.github.com/users/jeromekelleher/repos", "events_url": "https://api.github.com/users/jeromekelleher/events{/privacy}", "received_events_url": "https://api.github.com/users/jeromekelleher/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 831518500, "node_id": "MDU6TGFiZWw4MzE1MTg1MDA=", "url": "https://api.github.com/repos/tskit-dev/tskit/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}, {"id": 1184840738, "node_id": "MDU6TGFiZWwxMTg0ODQwNzM4", "url": "https://api.github.com/repos/tskit-dev/tskit/labels/C%20API", "name": "C API", "color": "1d76db", "default": false, "description": "Issue is about the C API"}, {"id": 2385559214, "node_id": "MDU6TGFiZWwyMzg1NTU5MjE0", "url": "https://api.github.com/repos/tskit-dev/tskit/labels/Python%20API", "name": "Python API", "color": "d12add", "default": false, "description": "Issue is about the Python API"}], "state": "closed", "locked": false, "assignee": {"login": "jeromekelleher", "id": 2664569, "node_id": "MDQ6VXNlcjI2NjQ1Njk=", "avatar_url": "https://avatars.githubusercontent.com/u/2664569?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jeromekelleher", "html_url": "https://github.com/jeromekelleher", "followers_url": "https://api.github.com/users/jeromekelleher/followers", "following_url": "https://api.github.com/users/jeromekelleher/following{/other_user}", "gists_url": "https://api.github.com/users/jeromekelleher/gists{/gist_id}", "starred_url": "https://api.github.com/users/jeromekelleher/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jeromekelleher/subscriptions", "organizations_url": "https://api.github.com/users/jeromekelleher/orgs", "repos_url": "https://api.github.com/users/jeromekelleher/repos", "events_url": "https://api.github.com/users/jeromekelleher/events{/privacy}", "received_events_url": "https://api.github.com/users/jeromekelleher/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "jeromekelleher", "id": 2664569, "node_id": "MDQ6VXNlcjI2NjQ1Njk=", "avatar_url": "https://avatars.githubusercontent.com/u/2664569?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jeromekelleher", "html_url": "https://github.com/jeromekelleher", "followers_url": "https://api.github.com/users/jeromekelleher/followers", "following_url": "https://api.github.com/users/jeromekelleher/following{/other_user}", "gists_url": "https://api.github.com/users/jeromekelleher/gists{/gist_id}", "starred_url": "https://api.github.com/users/jeromekelleher/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jeromekelleher/subscriptions", "organizations_url": "https://api.github.com/users/jeromekelleher/orgs", "repos_url": "https://api.github.com/users/jeromekelleher/repos", "events_url": "https://api.github.com/users/jeromekelleher/events{/privacy}", "received_events_url": "https://api.github.com/users/jeromekelleher/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/tskit-dev/tskit/milestones/26", "html_url": "https://github.com/tskit-dev/tskit/milestone/26", "labels_url": "https://api.github.com/repos/tskit-dev/tskit/milestones/26/labels", "id": 6835373, "node_id": "MDk6TWlsZXN0b25lNjgzNTM3Mw==", "number": 26, "title": "Python 0.4.0", "description": "", "creator": {"login": "benjeffery", "id": 8552, "node_id": "MDQ6VXNlcjg1NTI=", "avatar_url": "https://avatars.githubusercontent.com/u/8552?v=4", "gravatar_id": "", "url": "https://api.github.com/users/benjeffery", "html_url": "https://github.com/benjeffery", "followers_url": "https://api.github.com/users/benjeffery/followers", "following_url": "https://api.github.com/users/benjeffery/following{/other_user}", "gists_url": "https://api.github.com/users/benjeffery/gists{/gist_id}", "starred_url": "https://api.github.com/users/benjeffery/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/benjeffery/subscriptions", "organizations_url": "https://api.github.com/users/benjeffery/orgs", "repos_url": "https://api.github.com/users/benjeffery/repos", "events_url": "https://api.github.com/users/benjeffery/events{/privacy}", "received_events_url": "https://api.github.com/users/benjeffery/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 56, "state": "closed", "created_at": "2021-06-08T13:19:39Z", "updated_at": "2021-12-11T13:37:31Z", "due_on": "2021-12-10T08:00:00Z", "closed_at": "2021-12-11T13:37:31Z"}, "comments": 0, "created_at": "2021-09-18T13:47:09Z", "updated_at": "2021-11-02T11:57:38Z", "closed_at": "2021-11-02T11:57:38Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "We should always have ``tree.num_tracked_samples(tree.virtual_root) == len(tracked_samples)``, but this isn't currently working in #1704\r\n\r\nThe tracked samples code all looks a bit dodgy to me, it needs a good looking at before we ship C 1.0.", "reactions": {"url": "https://api.github.com/repos/tskit-dev/tskit/issues/1724/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/tskit-dev/tskit/issues/1724/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/tskit-dev/tskit/issues/1706", "repository_url": "https://api.github.com/repos/tskit-dev/tskit", "labels_url": "https://api.github.com/repos/tskit-dev/tskit/issues/1706/labels{/name}", "comments_url": "https://api.github.com/repos/tskit-dev/tskit/issues/1706/comments", "events_url": "https://api.github.com/repos/tskit-dev/tskit/issues/1706/events", "html_url": "https://github.com/tskit-dev/tskit/issues/1706", "id": 998000420, "node_id": "I_kwDOBzNZms47fEck", "number": 1706, "title": "Tree.root_threshold not working correctly on empty tree sequence", "user": {"login": "jeromekelleher", "id": 2664569, "node_id": "MDQ6VXNlcjI2NjQ1Njk=", "avatar_url": "https://avatars.githubusercontent.com/u/2664569?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jeromekelleher", "html_url": "https://github.com/jeromekelleher", "followers_url": "https://api.github.com/users/jeromekelleher/followers", "following_url": "https://api.github.com/users/jeromekelleher/following{/other_user}", "gists_url": "https://api.github.com/users/jeromekelleher/gists{/gist_id}", "starred_url": "https://api.github.com/users/jeromekelleher/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jeromekelleher/subscriptions", "organizations_url": "https://api.github.com/users/jeromekelleher/orgs", "repos_url": "https://api.github.com/users/jeromekelleher/repos", "events_url": "https://api.github.com/users/jeromekelleher/events{/privacy}", "received_events_url": "https://api.github.com/users/jeromekelleher/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 831518500, "node_id": "MDU6TGFiZWw4MzE1MTg1MDA=", "url": "https://api.github.com/repos/tskit-dev/tskit/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": {"login": "jeromekelleher", "id": 2664569, "node_id": "MDQ6VXNlcjI2NjQ1Njk=", "avatar_url": "https://avatars.githubusercontent.com/u/2664569?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jeromekelleher", "html_url": "https://github.com/jeromekelleher", "followers_url": "https://api.github.com/users/jeromekelleher/followers", "following_url": "https://api.github.com/users/jeromekelleher/following{/other_user}", "gists_url": "https://api.github.com/users/jeromekelleher/gists{/gist_id}", "starred_url": "https://api.github.com/users/jeromekelleher/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jeromekelleher/subscriptions", "organizations_url": "https://api.github.com/users/jeromekelleher/orgs", "repos_url": "https://api.github.com/users/jeromekelleher/repos", "events_url": "https://api.github.com/users/jeromekelleher/events{/privacy}", "received_events_url": "https://api.github.com/users/jeromekelleher/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "jeromekelleher", "id": 2664569, "node_id": "MDQ6VXNlcjI2NjQ1Njk=", "avatar_url": "https://avatars.githubusercontent.com/u/2664569?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jeromekelleher", "html_url": "https://github.com/jeromekelleher", "followers_url": "https://api.github.com/users/jeromekelleher/followers", "following_url": "https://api.github.com/users/jeromekelleher/following{/other_user}", "gists_url": "https://api.github.com/users/jeromekelleher/gists{/gist_id}", "starred_url": "https://api.github.com/users/jeromekelleher/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jeromekelleher/subscriptions", "organizations_url": "https://api.github.com/users/jeromekelleher/orgs", "repos_url": "https://api.github.com/users/jeromekelleher/repos", "events_url": "https://api.github.com/users/jeromekelleher/events{/privacy}", "received_events_url": "https://api.github.com/users/jeromekelleher/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2021-09-16T09:40:14Z", "updated_at": "2021-10-18T12:43:35Z", "closed_at": "2021-10-18T12:43:35Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "```python\r\ntables = tskit.TableCollection(1)\r\nfor _ in range(10):\r\n    tables.nodes.add_row(flags=tskit.NODE_IS_SAMPLE, time=0)\r\nts = tables.tree_sequence()\r\nprint(ts)\r\n\r\ntree = tskit.Tree(ts)\r\ntree.first()\r\nprint(tree.roots)\r\n# Gives [0, 1, 2, 3, 4, 5, 6, 7, 8, 9]\r\ntree = tskit.Tree(ts, root_threshold=2)\r\ntree.first()\r\nprint(tree.roots)\r\n# Gives [0, 1, 2, 3, 4, 5, 6, 7, 8, 9]\r\n```\r\nThe list of roots should be empty in the second case.\r\n", "reactions": {"url": "https://api.github.com/repos/tskit-dev/tskit/issues/1706/reactions", "total_count": 1, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/tskit-dev/tskit/issues/1706/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/tskit-dev/tskit/issues/1603", "repository_url": "https://api.github.com/repos/tskit-dev/tskit", "labels_url": "https://api.github.com/repos/tskit-dev/tskit/issues/1603/labels{/name}", "comments_url": "https://api.github.com/repos/tskit-dev/tskit/issues/1603/comments", "events_url": "https://api.github.com/repos/tskit-dev/tskit/issues/1603/events", "html_url": "https://github.com/tskit-dev/tskit/issues/1603", "id": 957760068, "node_id": "MDU6SXNzdWU5NTc3NjAwNjg=", "number": 1603, "title": "Cannot print Tables with added metadata", "user": {"login": "jeromekelleher", "id": 2664569, "node_id": "MDQ6VXNlcjI2NjQ1Njk=", "avatar_url": "https://avatars.githubusercontent.com/u/2664569?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jeromekelleher", "html_url": "https://github.com/jeromekelleher", "followers_url": "https://api.github.com/users/jeromekelleher/followers", "following_url": "https://api.github.com/users/jeromekelleher/following{/other_user}", "gists_url": "https://api.github.com/users/jeromekelleher/gists{/gist_id}", "starred_url": "https://api.github.com/users/jeromekelleher/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jeromekelleher/subscriptions", "organizations_url": "https://api.github.com/users/jeromekelleher/orgs", "repos_url": "https://api.github.com/users/jeromekelleher/repos", "events_url": "https://api.github.com/users/jeromekelleher/events{/privacy}", "received_events_url": "https://api.github.com/users/jeromekelleher/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 831518500, "node_id": "MDU6TGFiZWw4MzE1MTg1MDA=", "url": "https://api.github.com/repos/tskit-dev/tskit/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}, {"id": 2385559214, "node_id": "MDU6TGFiZWwyMzg1NTU5MjE0", "url": "https://api.github.com/repos/tskit-dev/tskit/labels/Python%20API", "name": "Python API", "color": "d12add", "default": false, "description": "Issue is about the Python API"}], "state": "closed", "locked": false, "assignee": {"login": "benjeffery", "id": 8552, "node_id": "MDQ6VXNlcjg1NTI=", "avatar_url": "https://avatars.githubusercontent.com/u/8552?v=4", "gravatar_id": "", "url": "https://api.github.com/users/benjeffery", "html_url": "https://github.com/benjeffery", "followers_url": "https://api.github.com/users/benjeffery/followers", "following_url": "https://api.github.com/users/benjeffery/following{/other_user}", "gists_url": "https://api.github.com/users/benjeffery/gists{/gist_id}", "starred_url": "https://api.github.com/users/benjeffery/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/benjeffery/subscriptions", "organizations_url": "https://api.github.com/users/benjeffery/orgs", "repos_url": "https://api.github.com/users/benjeffery/repos", "events_url": "https://api.github.com/users/benjeffery/events{/privacy}", "received_events_url": "https://api.github.com/users/benjeffery/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "benjeffery", "id": 8552, "node_id": "MDQ6VXNlcjg1NTI=", "avatar_url": "https://avatars.githubusercontent.com/u/8552?v=4", "gravatar_id": "", "url": "https://api.github.com/users/benjeffery", "html_url": "https://github.com/benjeffery", "followers_url": "https://api.github.com/users/benjeffery/followers", "following_url": "https://api.github.com/users/benjeffery/following{/other_user}", "gists_url": "https://api.github.com/users/benjeffery/gists{/gist_id}", "starred_url": "https://api.github.com/users/benjeffery/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/benjeffery/subscriptions", "organizations_url": "https://api.github.com/users/benjeffery/orgs", "repos_url": "https://api.github.com/users/benjeffery/repos", "events_url": "https://api.github.com/users/benjeffery/events{/privacy}", "received_events_url": "https://api.github.com/users/benjeffery/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 2, "created_at": "2021-08-02T05:24:28Z", "updated_at": "2021-08-02T13:26:42Z", "closed_at": "2021-08-02T13:26:42Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "In the TestTableCollectionPickle we call ``self.add_metadata`` to all the input tables before testing. However, if we try to ``print()`` those tables we get an error. Inserting a ``print(tables)`` at line 3887 gives\n\n```\ntests/test_tables.py:3887: in verify\n    print(tables)\ntskit/tables.py:2482: in __str__\n    str(self.nodes),\ntskit/tables.py:455: in __str__\n    headers, rows = self._text_header_and_rows(\ntskit/tables.py:882: in _text_header_and_rows\n    util.truncate_string_end(str(row.metadata)),\ntskit/metadata.py:714: in __get__\n    row, \"_metadata\", row._metadata_decoder(row._metadata)\ntskit/metadata.py:566: in <lambda>\n    self.decode = lambda buffer: decoder(iter(buffer))\ntskit/metadata.py:357: in <lambda>\n    return lambda buffer: {\ntskit/metadata.py:358: in <dictcomp>\n    key: sub_decoder(buffer) for key, sub_decoder in sub_decoders.items()\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\n\nbuffer = <bytes_iterator object at 0x7fed522fa4f0>\n\n>   return lambda buffer: struct.unpack(f, bytes(islice(buffer, size)))[\n        0\n    ].decode(encoding)\nE   struct.error: unpack requires a buffer of 50 bytes\n\ntskit/metadata.py:390: error\n```\n\n\n(As an aside, while I was looking through the metadata code trying to figure out what was going on, I was confused by the use of ``buffer`` as a variable name, as it's a Python built-in, which could easily be called in this context. ``buff`` or something would probably be a better choice)\n", "reactions": {"url": "https://api.github.com/repos/tskit-dev/tskit/issues/1603/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/tskit-dev/tskit/issues/1603/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/tskit-dev/tskit/issues/1591", "repository_url": "https://api.github.com/repos/tskit-dev/tskit", "labels_url": "https://api.github.com/repos/tskit-dev/tskit/issues/1591/labels{/name}", "comments_url": "https://api.github.com/repos/tskit-dev/tskit/issues/1591/comments", "events_url": "https://api.github.com/repos/tskit-dev/tskit/issues/1591/events", "html_url": "https://github.com/tskit-dev/tskit/issues/1591", "id": 953894378, "node_id": "MDU6SXNzdWU5NTM4OTQzNzg=", "number": 1591, "title": "Bug in LD calculations for 32 bit", "user": {"login": "jeromekelleher", "id": 2664569, "node_id": "MDQ6VXNlcjI2NjQ1Njk=", "avatar_url": "https://avatars.githubusercontent.com/u/2664569?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jeromekelleher", "html_url": "https://github.com/jeromekelleher", "followers_url": "https://api.github.com/users/jeromekelleher/followers", "following_url": "https://api.github.com/users/jeromekelleher/following{/other_user}", "gists_url": "https://api.github.com/users/jeromekelleher/gists{/gist_id}", "starred_url": "https://api.github.com/users/jeromekelleher/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jeromekelleher/subscriptions", "organizations_url": "https://api.github.com/users/jeromekelleher/orgs", "repos_url": "https://api.github.com/users/jeromekelleher/repos", "events_url": "https://api.github.com/users/jeromekelleher/events{/privacy}", "received_events_url": "https://api.github.com/users/jeromekelleher/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 831518500, "node_id": "MDU6TGFiZWw4MzE1MTg1MDA=", "url": "https://api.github.com/repos/tskit-dev/tskit/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2021-07-27T13:37:41Z", "updated_at": "2021-11-10T19:17:38Z", "closed_at": "2021-11-10T19:17:37Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "Introducing CI for 32 bit in #1584 showed up a bug of some sort in the LD calculator. Since it wasn't obvious what the problem was I skipped it (test_tree_sequence_simulated_mutations) on 32 bit machines.\r\n\r\nWe should probably try to get to the bottom of this at some point. However, there is a good deal of cruft in the LDCalculator interface, and it might be simplest to replace some stuff rather than try to debug it. For example, we should probably remove the stuff using the Python buffer interface and just create numpy arrays like the rest of the code does now (this is old code, from before we started using the numpy C API).", "reactions": {"url": "https://api.github.com/repos/tskit-dev/tskit/issues/1591/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/tskit-dev/tskit/issues/1591/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/tskit-dev/tskit/issues/1509", "repository_url": "https://api.github.com/repos/tskit-dev/tskit", "labels_url": "https://api.github.com/repos/tskit-dev/tskit/issues/1509/labels{/name}", "comments_url": "https://api.github.com/repos/tskit-dev/tskit/issues/1509/comments", "events_url": "https://api.github.com/repos/tskit-dev/tskit/issues/1509/events", "html_url": "https://github.com/tskit-dev/tskit/issues/1509", "id": 926582803, "node_id": "MDU6SXNzdWU5MjY1ODI4MDM=", "number": 1509, "title": "metadata overflow causes crash", "user": {"login": "petrelharp", "id": 1046249, "node_id": "MDQ6VXNlcjEwNDYyNDk=", "avatar_url": "https://avatars.githubusercontent.com/u/1046249?v=4", "gravatar_id": "", "url": "https://api.github.com/users/petrelharp", "html_url": "https://github.com/petrelharp", "followers_url": "https://api.github.com/users/petrelharp/followers", "following_url": "https://api.github.com/users/petrelharp/following{/other_user}", "gists_url": "https://api.github.com/users/petrelharp/gists{/gist_id}", "starred_url": "https://api.github.com/users/petrelharp/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/petrelharp/subscriptions", "organizations_url": "https://api.github.com/users/petrelharp/orgs", "repos_url": "https://api.github.com/users/petrelharp/repos", "events_url": "https://api.github.com/users/petrelharp/events{/privacy}", "received_events_url": "https://api.github.com/users/petrelharp/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 831518500, "node_id": "MDU6TGFiZWw4MzE1MTg1MDA=", "url": "https://api.github.com/repos/tskit-dev/tskit/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/tskit-dev/tskit/milestones/23", "html_url": "https://github.com/tskit-dev/tskit/milestone/23", "labels_url": "https://api.github.com/repos/tskit-dev/tskit/milestones/23/labels", "id": 6556136, "node_id": "MDk6TWlsZXN0b25lNjU1NjEzNg==", "number": 23, "title": "Python 0.3.7", "description": "", "creator": {"login": "benjeffery", "id": 8552, "node_id": "MDQ6VXNlcjg1NTI=", "avatar_url": "https://avatars.githubusercontent.com/u/8552?v=4", "gravatar_id": "", "url": "https://api.github.com/users/benjeffery", "html_url": "https://github.com/benjeffery", "followers_url": "https://api.github.com/users/benjeffery/followers", "following_url": "https://api.github.com/users/benjeffery/following{/other_user}", "gists_url": "https://api.github.com/users/benjeffery/gists{/gist_id}", "starred_url": "https://api.github.com/users/benjeffery/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/benjeffery/subscriptions", "organizations_url": "https://api.github.com/users/benjeffery/orgs", "repos_url": "https://api.github.com/users/benjeffery/repos", "events_url": "https://api.github.com/users/benjeffery/events{/privacy}", "received_events_url": "https://api.github.com/users/benjeffery/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 4, "state": "closed", "created_at": "2021-03-17T10:37:29Z", "updated_at": "2021-07-09T11:37:38Z", "due_on": null, "closed_at": "2021-07-09T11:37:38Z"}, "comments": 2, "created_at": "2021-06-21T20:47:52Z", "updated_at": "2021-07-05T10:26:53Z", "closed_at": "2021-07-05T10:26:53Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Over in https://github.com/MesserLab/SLiM/issues/198 @bhaller has tracked down a bug in how `max_metadata_length` is resized - see [this comment](https://github.com/MesserLab/SLiM/issues/198#issuecomment-864493497) for the details.", "reactions": {"url": "https://api.github.com/repos/tskit-dev/tskit/issues/1509/reactions", "total_count": 1, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/tskit-dev/tskit/issues/1509/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/tskit-dev/tskit/issues/1495", "repository_url": "https://api.github.com/repos/tskit-dev/tskit", "labels_url": "https://api.github.com/repos/tskit-dev/tskit/issues/1495/labels{/name}", "comments_url": "https://api.github.com/repos/tskit-dev/tskit/issues/1495/comments", "events_url": "https://api.github.com/repos/tskit-dev/tskit/issues/1495/events", "html_url": "https://github.com/tskit-dev/tskit/issues/1495", "id": 921308173, "node_id": "MDU6SXNzdWU5MjEzMDgxNzM=", "number": 1495, "title": "Metadata schemas causing slow replication", "user": {"login": "hyanwong", "id": 4699014, "node_id": "MDQ6VXNlcjQ2OTkwMTQ=", "avatar_url": "https://avatars.githubusercontent.com/u/4699014?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hyanwong", "html_url": "https://github.com/hyanwong", "followers_url": "https://api.github.com/users/hyanwong/followers", "following_url": "https://api.github.com/users/hyanwong/following{/other_user}", "gists_url": "https://api.github.com/users/hyanwong/gists{/gist_id}", "starred_url": "https://api.github.com/users/hyanwong/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hyanwong/subscriptions", "organizations_url": "https://api.github.com/users/hyanwong/orgs", "repos_url": "https://api.github.com/users/hyanwong/repos", "events_url": "https://api.github.com/users/hyanwong/events{/privacy}", "received_events_url": "https://api.github.com/users/hyanwong/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 831518500, "node_id": "MDU6TGFiZWw4MzE1MTg1MDA=", "url": "https://api.github.com/repos/tskit-dev/tskit/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 10, "created_at": "2021-06-15T11:44:43Z", "updated_at": "2021-06-24T09:31:23Z", "closed_at": "2021-06-24T09:31:23Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "When I run `ts.allele_frequency_spectrum` on a one-tree TS produced by `sim_ancestry`, it's almost an order of magnitude slower than when I run it on the tree sequence produced by the old `simulate` command:\r\n\r\n```python\r\nfrom time import time\r\n\r\nimport msprime\r\nimport numpy as np\r\n\r\nT = 0.4\r\nB=4\r\nnumrep=50000\r\nnsamp=4\r\nt = time()\r\ndemographic_events=[msprime.InstantaneousBottleneck(time=T, strength=B, population=0)]\r\nreps1 = msprime.simulate(sample_size=nsamp, Ne=1/2, num_replicates=numrep, demographic_events=demographic_events, random_seed=1234)\r\nprint(f\"msprime.simulate: {time()-t}s\")\r\n\r\nt = time()\r\ndemography = msprime.Demography()\r\ndemography.add_population(initial_size=1/2)\r\ndemography.add_instantaneous_bottleneck(time=T, strength=B, population=0)\r\nreps2 = msprime.sim_ancestry(\r\n    samples=nsamp, ploidy=1, num_replicates=numrep, demography=demography, random_seed=1234)\r\nprint(f\"msprime.sim_ancestry: {time()-t}s\")\r\n\r\nt = time()\r\nBlist1=np.zeros((numrep, nsamp+1))\r\nfor rep_index, ts in enumerate(reps1):\r\n    afs=ts.allele_frequency_spectrum(mode=\"branch\", polarised=True, span_normalise=False)\r\n    Blist1[rep_index]+= afs\r\nprint(f\"msprime.simulate afs calc: {time()-t}s\")\r\n\r\nt = time()\r\nBlist2=np.zeros((numrep, nsamp+1))\r\nfor rep_index, ts in enumerate(reps2):\r\n    afs=ts.allele_frequency_spectrum(mode=\"branch\", polarised=True, span_normalise=False)\r\n    Blist2[rep_index]+= afs\r\nprint(f\"msprime.sim_ancestry afs calc: {time()-t}s\")\r\n``` \r\n\r\ngives:\r\n\r\n```\r\nmsprime.simulate: 0.00606989860534668s\r\nmsprime.sim_ancestry: 0.012331008911132812s\r\nmsprime.simulate afs calc: 19.11087679862976s\r\nmsprime.sim_ancestry afs calc: 130.13320803642273s\r\n```\r\n\r\nThis is causing problems with timeouts when running the new bottlenecks tutorial from Konrad. Am I misunderstanding the initial_size argument or something?", "reactions": {"url": "https://api.github.com/repos/tskit-dev/tskit/issues/1495/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/tskit-dev/tskit/issues/1495/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/tskit-dev/tskit/issues/1477", "repository_url": "https://api.github.com/repos/tskit-dev/tskit", "labels_url": "https://api.github.com/repos/tskit-dev/tskit/issues/1477/labels{/name}", "comments_url": "https://api.github.com/repos/tskit-dev/tskit/issues/1477/comments", "events_url": "https://api.github.com/repos/tskit-dev/tskit/issues/1477/events", "html_url": "https://github.com/tskit-dev/tskit/issues/1477", "id": 909249094, "node_id": "MDU6SXNzdWU5MDkyNDkwOTQ=", "number": 1477, "title": "Bug in labelling during svg_draw with x_lim", "user": {"login": "hyanwong", "id": 4699014, "node_id": "MDQ6VXNlcjQ2OTkwMTQ=", "avatar_url": "https://avatars.githubusercontent.com/u/4699014?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hyanwong", "html_url": "https://github.com/hyanwong", "followers_url": "https://api.github.com/users/hyanwong/followers", "following_url": "https://api.github.com/users/hyanwong/following{/other_user}", "gists_url": "https://api.github.com/users/hyanwong/gists{/gist_id}", "starred_url": "https://api.github.com/users/hyanwong/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hyanwong/subscriptions", "organizations_url": "https://api.github.com/users/hyanwong/orgs", "repos_url": "https://api.github.com/users/hyanwong/repos", "events_url": "https://api.github.com/users/hyanwong/events{/privacy}", "received_events_url": "https://api.github.com/users/hyanwong/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 831518500, "node_id": "MDU6TGFiZWw4MzE1MTg1MDA=", "url": "https://api.github.com/repos/tskit-dev/tskit/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}, {"id": 2385559214, "node_id": "MDU6TGFiZWwyMzg1NTU5MjE0", "url": "https://api.github.com/repos/tskit-dev/tskit/labels/Python%20API", "name": "Python API", "color": "d12add", "default": false, "description": "Issue is about the Python API"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/tskit-dev/tskit/milestones/23", "html_url": "https://github.com/tskit-dev/tskit/milestone/23", "labels_url": "https://api.github.com/repos/tskit-dev/tskit/milestones/23/labels", "id": 6556136, "node_id": "MDk6TWlsZXN0b25lNjU1NjEzNg==", "number": 23, "title": "Python 0.3.7", "description": "", "creator": {"login": "benjeffery", "id": 8552, "node_id": "MDQ6VXNlcjg1NTI=", "avatar_url": "https://avatars.githubusercontent.com/u/8552?v=4", "gravatar_id": "", "url": "https://api.github.com/users/benjeffery", "html_url": "https://github.com/benjeffery", "followers_url": "https://api.github.com/users/benjeffery/followers", "following_url": "https://api.github.com/users/benjeffery/following{/other_user}", "gists_url": "https://api.github.com/users/benjeffery/gists{/gist_id}", "starred_url": "https://api.github.com/users/benjeffery/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/benjeffery/subscriptions", "organizations_url": "https://api.github.com/users/benjeffery/orgs", "repos_url": "https://api.github.com/users/benjeffery/repos", "events_url": "https://api.github.com/users/benjeffery/events{/privacy}", "received_events_url": "https://api.github.com/users/benjeffery/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 4, "state": "closed", "created_at": "2021-03-17T10:37:29Z", "updated_at": "2021-07-09T11:37:38Z", "due_on": null, "closed_at": "2021-07-09T11:37:38Z"}, "comments": 0, "created_at": "2021-06-02T08:21:00Z", "updated_at": "2021-06-09T14:48:11Z", "closed_at": "2021-06-09T14:48:11Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "The `x_lim` parameter to `draw_svg` uses `keep_intervals(..., simplify=False)` under the hood to reduce the TS to only the trees that are needed to plot. But even with simplify=False, this deletes sites (and mutations) outside the selected regions, and changes the number of trees. As a result, the plotted mutation labels are wrong, and the classes for trees (e.g. `t0`), sites (e.g. `s3`) and mutations(e.g. `m7`) are wrong.\r\n\r\nAfter some to-and-fro-ing, it seems like the simplest option is to take account of the offsets from new to old sites, mutations, and trees.", "reactions": {"url": "https://api.github.com/repos/tskit-dev/tskit/issues/1477/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/tskit-dev/tskit/issues/1477/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/tskit-dev/tskit/issues/1334", "repository_url": "https://api.github.com/repos/tskit-dev/tskit", "labels_url": "https://api.github.com/repos/tskit-dev/tskit/issues/1334/labels{/name}", "comments_url": "https://api.github.com/repos/tskit-dev/tskit/issues/1334/comments", "events_url": "https://api.github.com/repos/tskit-dev/tskit/issues/1334/events", "html_url": "https://github.com/tskit-dev/tskit/issues/1334", "id": 870923778, "node_id": "MDU6SXNzdWU4NzA5MjM3Nzg=", "number": 1334, "title": "Metadata schema cache is not updated after `set_columns`", "user": {"login": "benjeffery", "id": 8552, "node_id": "MDQ6VXNlcjg1NTI=", "avatar_url": "https://avatars.githubusercontent.com/u/8552?v=4", "gravatar_id": "", "url": "https://api.github.com/users/benjeffery", "html_url": "https://github.com/benjeffery", "followers_url": "https://api.github.com/users/benjeffery/followers", "following_url": "https://api.github.com/users/benjeffery/following{/other_user}", "gists_url": "https://api.github.com/users/benjeffery/gists{/gist_id}", "starred_url": "https://api.github.com/users/benjeffery/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/benjeffery/subscriptions", "organizations_url": "https://api.github.com/users/benjeffery/orgs", "repos_url": "https://api.github.com/users/benjeffery/repos", "events_url": "https://api.github.com/users/benjeffery/events{/privacy}", "received_events_url": "https://api.github.com/users/benjeffery/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 831518500, "node_id": "MDU6TGFiZWw4MzE1MTg1MDA=", "url": "https://api.github.com/repos/tskit-dev/tskit/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}, {"id": 2385559214, "node_id": "MDU6TGFiZWwyMzg1NTU5MjE0", "url": "https://api.github.com/repos/tskit-dev/tskit/labels/Python%20API", "name": "Python API", "color": "d12add", "default": false, "description": "Issue is about the Python API"}], "state": "closed", "locked": false, "assignee": {"login": "benjeffery", "id": 8552, "node_id": "MDQ6VXNlcjg1NTI=", "avatar_url": "https://avatars.githubusercontent.com/u/8552?v=4", "gravatar_id": "", "url": "https://api.github.com/users/benjeffery", "html_url": "https://github.com/benjeffery", "followers_url": "https://api.github.com/users/benjeffery/followers", "following_url": "https://api.github.com/users/benjeffery/following{/other_user}", "gists_url": "https://api.github.com/users/benjeffery/gists{/gist_id}", "starred_url": "https://api.github.com/users/benjeffery/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/benjeffery/subscriptions", "organizations_url": "https://api.github.com/users/benjeffery/orgs", "repos_url": "https://api.github.com/users/benjeffery/repos", "events_url": "https://api.github.com/users/benjeffery/events{/privacy}", "received_events_url": "https://api.github.com/users/benjeffery/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "benjeffery", "id": 8552, "node_id": "MDQ6VXNlcjg1NTI=", "avatar_url": "https://avatars.githubusercontent.com/u/8552?v=4", "gravatar_id": "", "url": "https://api.github.com/users/benjeffery", "html_url": "https://github.com/benjeffery", "followers_url": "https://api.github.com/users/benjeffery/followers", "following_url": "https://api.github.com/users/benjeffery/following{/other_user}", "gists_url": "https://api.github.com/users/benjeffery/gists{/gist_id}", "starred_url": "https://api.github.com/users/benjeffery/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/benjeffery/subscriptions", "organizations_url": "https://api.github.com/users/benjeffery/orgs", "repos_url": "https://api.github.com/users/benjeffery/repos", "events_url": "https://api.github.com/users/benjeffery/events{/privacy}", "received_events_url": "https://api.github.com/users/benjeffery/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/tskit-dev/tskit/milestones/21", "html_url": "https://github.com/tskit-dev/tskit/milestone/21", "labels_url": "https://api.github.com/repos/tskit-dev/tskit/milestones/21/labels", "id": 6398116, "node_id": "MDk6TWlsZXN0b25lNjM5ODExNg==", "number": 21, "title": "Python 0.3.6", "description": "", "creator": {"login": "benjeffery", "id": 8552, "node_id": "MDQ6VXNlcjg1NTI=", "avatar_url": "https://avatars.githubusercontent.com/u/8552?v=4", "gravatar_id": "", "url": "https://api.github.com/users/benjeffery", "html_url": "https://github.com/benjeffery", "followers_url": "https://api.github.com/users/benjeffery/followers", "following_url": "https://api.github.com/users/benjeffery/following{/other_user}", "gists_url": "https://api.github.com/users/benjeffery/gists{/gist_id}", "starred_url": "https://api.github.com/users/benjeffery/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/benjeffery/subscriptions", "organizations_url": "https://api.github.com/users/benjeffery/orgs", "repos_url": "https://api.github.com/users/benjeffery/repos", "events_url": "https://api.github.com/users/benjeffery/events{/privacy}", "received_events_url": "https://api.github.com/users/benjeffery/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 18, "state": "closed", "created_at": "2021-02-05T14:22:42Z", "updated_at": "2021-06-08T13:18:30Z", "due_on": null, "closed_at": "2021-06-08T13:18:30Z"}, "comments": 0, "created_at": "2021-04-29T11:41:42Z", "updated_at": "2021-04-29T13:07:32Z", "closed_at": "2021-04-29T13:07:32Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "This bug has been in the last couple of releases.\r\n\r\nNasty oversight (my fault) I just found is that when setting a `metadata_schema` using `set_columns` the metadata schema cache doesn't get updated. Found this as `copy` uses `set_columns`, and copies had differing schemas. Tests were passing as the copy passed equality as equality uses the low-level methods that use encoded schemas.\r\n\r\nFix is to update the cache in `set_columns`.", "reactions": {"url": "https://api.github.com/repos/tskit-dev/tskit/issues/1334/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/tskit-dev/tskit/issues/1334/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/tskit-dev/tskit/issues/1323", "repository_url": "https://api.github.com/repos/tskit-dev/tskit", "labels_url": "https://api.github.com/repos/tskit-dev/tskit/issues/1323/labels{/name}", "comments_url": "https://api.github.com/repos/tskit-dev/tskit/issues/1323/comments", "events_url": "https://api.github.com/repos/tskit-dev/tskit/issues/1323/events", "html_url": "https://github.com/tskit-dev/tskit/issues/1323", "id": 863663796, "node_id": "MDU6SXNzdWU4NjM2NjM3OTY=", "number": 1323, "title": "Make the \"skips\" html display row span columns", "user": {"login": "jeromekelleher", "id": 2664569, "node_id": "MDQ6VXNlcjI2NjQ1Njk=", "avatar_url": "https://avatars.githubusercontent.com/u/2664569?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jeromekelleher", "html_url": "https://github.com/jeromekelleher", "followers_url": "https://api.github.com/users/jeromekelleher/followers", "following_url": "https://api.github.com/users/jeromekelleher/following{/other_user}", "gists_url": "https://api.github.com/users/jeromekelleher/gists{/gist_id}", "starred_url": "https://api.github.com/users/jeromekelleher/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jeromekelleher/subscriptions", "organizations_url": "https://api.github.com/users/jeromekelleher/orgs", "repos_url": "https://api.github.com/users/jeromekelleher/repos", "events_url": "https://api.github.com/users/jeromekelleher/events{/privacy}", "received_events_url": "https://api.github.com/users/jeromekelleher/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 831518500, "node_id": "MDU6TGFiZWw4MzE1MTg1MDA=", "url": "https://api.github.com/repos/tskit-dev/tskit/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}, {"id": 2385559214, "node_id": "MDU6TGFiZWwyMzg1NTU5MjE0", "url": "https://api.github.com/repos/tskit-dev/tskit/labels/Python%20API", "name": "Python API", "color": "d12add", "default": false, "description": "Issue is about the Python API"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/tskit-dev/tskit/milestones/21", "html_url": "https://github.com/tskit-dev/tskit/milestone/21", "labels_url": "https://api.github.com/repos/tskit-dev/tskit/milestones/21/labels", "id": 6398116, "node_id": "MDk6TWlsZXN0b25lNjM5ODExNg==", "number": 21, "title": "Python 0.3.6", "description": "", "creator": {"login": "benjeffery", "id": 8552, "node_id": "MDQ6VXNlcjg1NTI=", "avatar_url": "https://avatars.githubusercontent.com/u/8552?v=4", "gravatar_id": "", "url": "https://api.github.com/users/benjeffery", "html_url": "https://github.com/benjeffery", "followers_url": "https://api.github.com/users/benjeffery/followers", "following_url": "https://api.github.com/users/benjeffery/following{/other_user}", "gists_url": "https://api.github.com/users/benjeffery/gists{/gist_id}", "starred_url": "https://api.github.com/users/benjeffery/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/benjeffery/subscriptions", "organizations_url": "https://api.github.com/users/benjeffery/orgs", "repos_url": "https://api.github.com/users/benjeffery/repos", "events_url": "https://api.github.com/users/benjeffery/events{/privacy}", "received_events_url": "https://api.github.com/users/benjeffery/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 18, "state": "closed", "created_at": "2021-02-05T14:22:42Z", "updated_at": "2021-06-08T13:18:30Z", "due_on": null, "closed_at": "2021-06-08T13:18:30Z"}, "comments": 1, "created_at": "2021-04-21T09:26:59Z", "updated_at": "2021-04-21T17:10:04Z", "closed_at": "2021-04-21T17:10:04Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "Currently this is making the ID row very wide, messing up the rendering. ", "reactions": {"url": "https://api.github.com/repos/tskit-dev/tskit/issues/1323/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/tskit-dev/tskit/issues/1323/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/tskit-dev/tskit/issues/1297", "repository_url": "https://api.github.com/repos/tskit-dev/tskit", "labels_url": "https://api.github.com/repos/tskit-dev/tskit/issues/1297/labels{/name}", "comments_url": "https://api.github.com/repos/tskit-dev/tskit/issues/1297/comments", "events_url": "https://api.github.com/repos/tskit-dev/tskit/issues/1297/events", "html_url": "https://github.com/tskit-dev/tskit/issues/1297", "id": 850366682, "node_id": "MDU6SXNzdWU4NTAzNjY2ODI=", "number": 1297, "title": "Can't pickle then unpickle a tree sequence: \"no attribute '_table_metadata_schemas'\"", "user": {"login": "hyanwong", "id": 4699014, "node_id": "MDQ6VXNlcjQ2OTkwMTQ=", "avatar_url": "https://avatars.githubusercontent.com/u/4699014?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hyanwong", "html_url": "https://github.com/hyanwong", "followers_url": "https://api.github.com/users/hyanwong/followers", "following_url": "https://api.github.com/users/hyanwong/following{/other_user}", "gists_url": "https://api.github.com/users/hyanwong/gists{/gist_id}", "starred_url": "https://api.github.com/users/hyanwong/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hyanwong/subscriptions", "organizations_url": "https://api.github.com/users/hyanwong/orgs", "repos_url": "https://api.github.com/users/hyanwong/repos", "events_url": "https://api.github.com/users/hyanwong/events{/privacy}", "received_events_url": "https://api.github.com/users/hyanwong/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 831518500, "node_id": "MDU6TGFiZWw4MzE1MTg1MDA=", "url": "https://api.github.com/repos/tskit-dev/tskit/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}, {"id": 2385559214, "node_id": "MDU6TGFiZWwyMzg1NTU5MjE0", "url": "https://api.github.com/repos/tskit-dev/tskit/labels/Python%20API", "name": "Python API", "color": "d12add", "default": false, "description": "Issue is about the Python API"}], "state": "closed", "locked": false, "assignee": {"login": "benjeffery", "id": 8552, "node_id": "MDQ6VXNlcjg1NTI=", "avatar_url": "https://avatars.githubusercontent.com/u/8552?v=4", "gravatar_id": "", "url": "https://api.github.com/users/benjeffery", "html_url": "https://github.com/benjeffery", "followers_url": "https://api.github.com/users/benjeffery/followers", "following_url": "https://api.github.com/users/benjeffery/following{/other_user}", "gists_url": "https://api.github.com/users/benjeffery/gists{/gist_id}", "starred_url": "https://api.github.com/users/benjeffery/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/benjeffery/subscriptions", "organizations_url": "https://api.github.com/users/benjeffery/orgs", "repos_url": "https://api.github.com/users/benjeffery/repos", "events_url": "https://api.github.com/users/benjeffery/events{/privacy}", "received_events_url": "https://api.github.com/users/benjeffery/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "benjeffery", "id": 8552, "node_id": "MDQ6VXNlcjg1NTI=", "avatar_url": "https://avatars.githubusercontent.com/u/8552?v=4", "gravatar_id": "", "url": "https://api.github.com/users/benjeffery", "html_url": "https://github.com/benjeffery", "followers_url": "https://api.github.com/users/benjeffery/followers", "following_url": "https://api.github.com/users/benjeffery/following{/other_user}", "gists_url": "https://api.github.com/users/benjeffery/gists{/gist_id}", "starred_url": "https://api.github.com/users/benjeffery/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/benjeffery/subscriptions", "organizations_url": "https://api.github.com/users/benjeffery/orgs", "repos_url": "https://api.github.com/users/benjeffery/repos", "events_url": "https://api.github.com/users/benjeffery/events{/privacy}", "received_events_url": "https://api.github.com/users/benjeffery/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/tskit-dev/tskit/milestones/21", "html_url": "https://github.com/tskit-dev/tskit/milestone/21", "labels_url": "https://api.github.com/repos/tskit-dev/tskit/milestones/21/labels", "id": 6398116, "node_id": "MDk6TWlsZXN0b25lNjM5ODExNg==", "number": 21, "title": "Python 0.3.6", "description": "", "creator": {"login": "benjeffery", "id": 8552, "node_id": "MDQ6VXNlcjg1NTI=", "avatar_url": "https://avatars.githubusercontent.com/u/8552?v=4", "gravatar_id": "", "url": "https://api.github.com/users/benjeffery", "html_url": "https://github.com/benjeffery", "followers_url": "https://api.github.com/users/benjeffery/followers", "following_url": "https://api.github.com/users/benjeffery/following{/other_user}", "gists_url": "https://api.github.com/users/benjeffery/gists{/gist_id}", "starred_url": "https://api.github.com/users/benjeffery/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/benjeffery/subscriptions", "organizations_url": "https://api.github.com/users/benjeffery/orgs", "repos_url": "https://api.github.com/users/benjeffery/repos", "events_url": "https://api.github.com/users/benjeffery/events{/privacy}", "received_events_url": "https://api.github.com/users/benjeffery/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 18, "state": "closed", "created_at": "2021-02-05T14:22:42Z", "updated_at": "2021-06-08T13:18:30Z", "due_on": null, "closed_at": "2021-06-08T13:18:30Z"}, "comments": 3, "created_at": "2021-04-05T13:27:48Z", "updated_at": "2021-04-07T07:29:58Z", "closed_at": "2021-04-07T07:29:58Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "```\r\nts = msprime.simulate(10)\r\nwith open('ts.pickle', 'wb') as handle:\r\n    pickle.dump(ts, handle, protocol=pickle.HIGHEST_PROTOCOL)\r\nprint(ts.draw_text())\r\nwith open('ts.pickle', 'rb') as handle:\r\n    ts = pickle.load(handle)\r\nprint(ts.draw_text())\r\n```\r\n\r\nGives \r\n\r\n```\r\nAttributeError                            Traceback (most recent call last)\r\n<ipython-input-52-2b8d7332ec21> in <module>\r\n      7 with open('ts.pickle', 'rb') as handle:\r\n      8     ts = pickle.load(handle)\r\n----> 9 print(ts.draw_text())\r\n     10 \r\n     11 \r\n\r\n~/anaconda3/lib/python3.9/site-packages/tskit/trees.py in draw_text(self, **kwargs)\r\n   5427     def draw_text(self, **kwargs):\r\n   5428         # TODO document this method.\r\n-> 5429         return str(drawing.TextTreeSequence(self, **kwargs))\r\n   5430 \r\n   5431     ############################################\r\n\r\n~/anaconda3/lib/python3.9/site-packages/tskit/drawing.py in __init__(self, ts, node_labels, use_ascii, time_label_format, position_label_format, order)\r\n   1250             position_label_format.format(x) for x in ts.breakpoints()\r\n   1251         ]\r\n-> 1252         trees = [\r\n   1253             VerticalTextTree(\r\n   1254                 tree,\r\n\r\n~/anaconda3/lib/python3.9/site-packages/tskit/drawing.py in <listcomp>(.0)\r\n   1251         ]\r\n   1252         trees = [\r\n-> 1253             VerticalTextTree(\r\n   1254                 tree,\r\n   1255                 max_tree_height=\"ts\",\r\n\r\n~/anaconda3/lib/python3.9/site-packages/tskit/drawing.py in __init__(self, tree, node_labels, max_tree_height, use_ascii, orientation, order)\r\n   1455                 self.node_labels[node] = label\r\n   1456 \r\n-> 1457         self._assign_time_positions()\r\n   1458         self._assign_traversal_positions()\r\n   1459         self.canvas = np.zeros((self.height, self.width), dtype=str)\r\n\r\n~/anaconda3/lib/python3.9/site-packages/tskit/drawing.py in _assign_time_positions(self)\r\n   1481         # account here. Presumably we need to get the maximum number of mutations\r\n   1482         # per branch.\r\n-> 1483         self.time_position, total_depth = node_time_depth(\r\n   1484             tree, max_tree_height=self.max_tree_height\r\n   1485         )\r\n\r\n~/anaconda3/lib/python3.9/site-packages/tskit/drawing.py in node_time_depth(tree, min_branch_length, max_tree_height)\r\n   1385         assert max_tree_height == \"ts\"\r\n   1386         ts = tree.tree_sequence\r\n-> 1387         for node in ts.nodes():\r\n   1388             time_node_map[node.time].append(node.id)\r\n   1389         node_edges = collections.defaultdict(list)\r\n\r\n~/anaconda3/lib/python3.9/site-packages/tskit/trees.py in __getitem__(self, index)\r\n   3234         if index < 0 or index >= len(self):\r\n   3235             raise IndexError(\"Index out of bounds\")\r\n-> 3236         return self.getter(index)\r\n   3237 \r\n   3238 \r\n\r\n~/anaconda3/lib/python3.9/site-packages/tskit/trees.py in node(self, id_)\r\n   4516             individual=individual,\r\n   4517             encoded_metadata=metadata,\r\n-> 4518             metadata_decoder=self.table_metadata_schemas.node.decode_row,\r\n   4519         )\r\n   4520 \r\n\r\n~/anaconda3/lib/python3.9/site-packages/tskit/trees.py in table_metadata_schemas(self)\r\n   3654         The set of metadata schemas for the tables in this tree sequence.\r\n   3655         \"\"\"\r\n-> 3656         return self._table_metadata_schemas\r\n   3657 \r\n   3658     @property\r\n\r\nAttributeError: 'TreeSequence' object has no attribute '_table_metadata_schemas'\r\n```", "reactions": {"url": "https://api.github.com/repos/tskit-dev/tskit/issues/1297/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/tskit-dev/tskit/issues/1297/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/tskit-dev/tskit/issues/1291", "repository_url": "https://api.github.com/repos/tskit-dev/tskit", "labels_url": "https://api.github.com/repos/tskit-dev/tskit/issues/1291/labels{/name}", "comments_url": "https://api.github.com/repos/tskit-dev/tskit/issues/1291/comments", "events_url": "https://api.github.com/repos/tskit-dev/tskit/issues/1291/events", "html_url": "https://github.com/tskit-dev/tskit/issues/1291", "id": 848605458, "node_id": "MDU6SXNzdWU4NDg2MDU0NTg=", "number": 1291, "title": "RankTree.newick() is missing the terminating semicolon", "user": {"login": "hyanwong", "id": 4699014, "node_id": "MDQ6VXNlcjQ2OTkwMTQ=", "avatar_url": "https://avatars.githubusercontent.com/u/4699014?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hyanwong", "html_url": "https://github.com/hyanwong", "followers_url": "https://api.github.com/users/hyanwong/followers", "following_url": "https://api.github.com/users/hyanwong/following{/other_user}", "gists_url": "https://api.github.com/users/hyanwong/gists{/gist_id}", "starred_url": "https://api.github.com/users/hyanwong/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hyanwong/subscriptions", "organizations_url": "https://api.github.com/users/hyanwong/orgs", "repos_url": "https://api.github.com/users/hyanwong/repos", "events_url": "https://api.github.com/users/hyanwong/events{/privacy}", "received_events_url": "https://api.github.com/users/hyanwong/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 831518500, "node_id": "MDU6TGFiZWw4MzE1MTg1MDA=", "url": "https://api.github.com/repos/tskit-dev/tskit/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}, {"id": 2385559214, "node_id": "MDU6TGFiZWwyMzg1NTU5MjE0", "url": "https://api.github.com/repos/tskit-dev/tskit/labels/Python%20API", "name": "Python API", "color": "d12add", "default": false, "description": "Issue is about the Python API"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/tskit-dev/tskit/milestones/21", "html_url": "https://github.com/tskit-dev/tskit/milestone/21", "labels_url": "https://api.github.com/repos/tskit-dev/tskit/milestones/21/labels", "id": 6398116, "node_id": "MDk6TWlsZXN0b25lNjM5ODExNg==", "number": 21, "title": "Python 0.3.6", "description": "", "creator": {"login": "benjeffery", "id": 8552, "node_id": "MDQ6VXNlcjg1NTI=", "avatar_url": "https://avatars.githubusercontent.com/u/8552?v=4", "gravatar_id": "", "url": "https://api.github.com/users/benjeffery", "html_url": "https://github.com/benjeffery", "followers_url": "https://api.github.com/users/benjeffery/followers", "following_url": "https://api.github.com/users/benjeffery/following{/other_user}", "gists_url": "https://api.github.com/users/benjeffery/gists{/gist_id}", "starred_url": "https://api.github.com/users/benjeffery/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/benjeffery/subscriptions", "organizations_url": "https://api.github.com/users/benjeffery/orgs", "repos_url": "https://api.github.com/users/benjeffery/repos", "events_url": "https://api.github.com/users/benjeffery/events{/privacy}", "received_events_url": "https://api.github.com/users/benjeffery/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 18, "state": "closed", "created_at": "2021-02-05T14:22:42Z", "updated_at": "2021-06-08T13:18:30Z", "due_on": null, "closed_at": "2021-06-08T13:18:30Z"}, "comments": 0, "created_at": "2021-04-01T16:15:33Z", "updated_at": "2021-04-08T15:47:10Z", "closed_at": "2021-04-08T15:47:10Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "This isn't a documented interface, so it's not at all urgent, but I guess we should correct it.", "reactions": {"url": "https://api.github.com/repos/tskit-dev/tskit/issues/1291/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/tskit-dev/tskit/issues/1291/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/tskit-dev/tskit/issues/1263", "repository_url": "https://api.github.com/repos/tskit-dev/tskit", "labels_url": "https://api.github.com/repos/tskit-dev/tskit/issues/1263/labels{/name}", "comments_url": "https://api.github.com/repos/tskit-dev/tskit/issues/1263/comments", "events_url": "https://api.github.com/repos/tskit-dev/tskit/issues/1263/events", "html_url": "https://github.com/tskit-dev/tskit/issues/1263", "id": 837680299, "node_id": "MDU6SXNzdWU4Mzc2ODAyOTk=", "number": 1263, "title": "tree_height_scale=\"rank\"  Y axis should show time values, not rank", "user": {"login": "jeromekelleher", "id": 2664569, "node_id": "MDQ6VXNlcjI2NjQ1Njk=", "avatar_url": "https://avatars.githubusercontent.com/u/2664569?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jeromekelleher", "html_url": "https://github.com/jeromekelleher", "followers_url": "https://api.github.com/users/jeromekelleher/followers", "following_url": "https://api.github.com/users/jeromekelleher/following{/other_user}", "gists_url": "https://api.github.com/users/jeromekelleher/gists{/gist_id}", "starred_url": "https://api.github.com/users/jeromekelleher/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jeromekelleher/subscriptions", "organizations_url": "https://api.github.com/users/jeromekelleher/orgs", "repos_url": "https://api.github.com/users/jeromekelleher/repos", "events_url": "https://api.github.com/users/jeromekelleher/events{/privacy}", "received_events_url": "https://api.github.com/users/jeromekelleher/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 831518500, "node_id": "MDU6TGFiZWw4MzE1MTg1MDA=", "url": "https://api.github.com/repos/tskit-dev/tskit/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}, {"id": 2385559214, "node_id": "MDU6TGFiZWwyMzg1NTU5MjE0", "url": "https://api.github.com/repos/tskit-dev/tskit/labels/Python%20API", "name": "Python API", "color": "d12add", "default": false, "description": "Issue is about the Python API"}, {"id": 2385618485, "node_id": "MDU6TGFiZWwyMzg1NjE4NDg1", "url": "https://api.github.com/repos/tskit-dev/tskit/labels/Visualisation", "name": "Visualisation", "color": "cc5500", "default": false, "description": "This issue addresses visualisation"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/tskit-dev/tskit/milestones/21", "html_url": "https://github.com/tskit-dev/tskit/milestone/21", "labels_url": "https://api.github.com/repos/tskit-dev/tskit/milestones/21/labels", "id": 6398116, "node_id": "MDk6TWlsZXN0b25lNjM5ODExNg==", "number": 21, "title": "Python 0.3.6", "description": "", "creator": {"login": "benjeffery", "id": 8552, "node_id": "MDQ6VXNlcjg1NTI=", "avatar_url": "https://avatars.githubusercontent.com/u/8552?v=4", "gravatar_id": "", "url": "https://api.github.com/users/benjeffery", "html_url": "https://github.com/benjeffery", "followers_url": "https://api.github.com/users/benjeffery/followers", "following_url": "https://api.github.com/users/benjeffery/following{/other_user}", "gists_url": "https://api.github.com/users/benjeffery/gists{/gist_id}", "starred_url": "https://api.github.com/users/benjeffery/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/benjeffery/subscriptions", "organizations_url": "https://api.github.com/users/benjeffery/orgs", "repos_url": "https://api.github.com/users/benjeffery/repos", "events_url": "https://api.github.com/users/benjeffery/events{/privacy}", "received_events_url": "https://api.github.com/users/benjeffery/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 18, "state": "closed", "created_at": "2021-02-05T14:22:42Z", "updated_at": "2021-06-08T13:18:30Z", "due_on": null, "closed_at": "2021-06-08T13:18:30Z"}, "comments": 0, "created_at": "2021-03-22T12:43:59Z", "updated_at": "2021-03-26T11:13:20Z", "closed_at": "2021-03-26T11:13:20Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "The current behaviour of tree_height_scale=\"rank\" isn't terribly useful, as we just show [0, 1, 2,...] in the Y axis.\r\n\r\nWe should show the actual time values, like we do in the text view:\r\n```\r\n37.00\u250a        13       \u250a  \r\n     \u250a     \u250f\u2501\u2501\u2501\u253b\u2501\u2501\u2501\u2513   \u250a  \r\n10.00\u250a     \u2503      12   \u250a  \r\n     \u250a     \u2503     \u250f\u2501\u253b\u2501\u2513 \u250a  \r\n8.00 \u250a     \u2503    11   \u2503 \u250a  \r\n     \u250a     \u2503    \u250f\u253b\u2501\u2513 \u2503 \u250a  \r\n5.00 \u250a    10    \u2503  \u2503 \u2503 \u250a  \r\n     \u250a  \u250f\u2501\u2501\u254b\u2501\u2513  \u2503  \u2503 \u2503 \u250a  \r\n1.00 \u250a  9  \u2503 \u2503  8  \u2503 \u2503 \u250a  \r\n     \u250a \u250f\u253b\u2513 \u2503 \u2503 \u250f\u253b\u2513 \u2503 \u2503 \u250a  \r\n0.00 \u250a 0 3 1 7 2 6 5 4 \u250a  \r\n   0.00              1.00 \r\n```\r\nThis might be slightly confusing, but it's very useful when you want to see a compact representation of the tree and want to know what the times are. There's basically no information in [0, 1, 2..]\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/tskit-dev/tskit/issues/1263/reactions", "total_count": 2, "+1": 2, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/tskit-dev/tskit/issues/1263/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/tskit-dev/tskit/issues/1225", "repository_url": "https://api.github.com/repos/tskit-dev/tskit", "labels_url": "https://api.github.com/repos/tskit-dev/tskit/issues/1225/labels{/name}", "comments_url": "https://api.github.com/repos/tskit-dev/tskit/issues/1225/comments", "events_url": "https://api.github.com/repos/tskit-dev/tskit/issues/1225/events", "html_url": "https://github.com/tskit-dev/tskit/issues/1225", "id": 818217830, "node_id": "MDU6SXNzdWU4MTgyMTc4MzA=", "number": 1225, "title": "union needs to remap individual parent IDs", "user": {"login": "petrelharp", "id": 1046249, "node_id": "MDQ6VXNlcjEwNDYyNDk=", "avatar_url": "https://avatars.githubusercontent.com/u/1046249?v=4", "gravatar_id": "", "url": "https://api.github.com/users/petrelharp", "html_url": "https://github.com/petrelharp", "followers_url": "https://api.github.com/users/petrelharp/followers", "following_url": "https://api.github.com/users/petrelharp/following{/other_user}", "gists_url": "https://api.github.com/users/petrelharp/gists{/gist_id}", "starred_url": "https://api.github.com/users/petrelharp/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/petrelharp/subscriptions", "organizations_url": "https://api.github.com/users/petrelharp/orgs", "repos_url": "https://api.github.com/users/petrelharp/repos", "events_url": "https://api.github.com/users/petrelharp/events{/privacy}", "received_events_url": "https://api.github.com/users/petrelharp/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 831518500, "node_id": "MDU6TGFiZWw4MzE1MTg1MDA=", "url": "https://api.github.com/repos/tskit-dev/tskit/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/tskit-dev/tskit/milestones/19", "html_url": "https://github.com/tskit-dev/tskit/milestone/19", "labels_url": "https://api.github.com/repos/tskit-dev/tskit/milestones/19/labels", "id": 6155932, "node_id": "MDk6TWlsZXN0b25lNjE1NTkzMg==", "number": 19, "title": "C API 0.99.11", "description": "", "creator": {"login": "benjeffery", "id": 8552, "node_id": "MDQ6VXNlcjg1NTI=", "avatar_url": "https://avatars.githubusercontent.com/u/8552?v=4", "gravatar_id": "", "url": "https://api.github.com/users/benjeffery", "html_url": "https://github.com/benjeffery", "followers_url": "https://api.github.com/users/benjeffery/followers", "following_url": "https://api.github.com/users/benjeffery/following{/other_user}", "gists_url": "https://api.github.com/users/benjeffery/gists{/gist_id}", "starred_url": "https://api.github.com/users/benjeffery/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/benjeffery/subscriptions", "organizations_url": "https://api.github.com/users/benjeffery/orgs", "repos_url": "https://api.github.com/users/benjeffery/repos", "events_url": "https://api.github.com/users/benjeffery/events{/privacy}", "received_events_url": "https://api.github.com/users/benjeffery/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 13, "state": "closed", "created_at": "2020-11-27T13:53:11Z", "updated_at": "2021-03-17T10:36:35Z", "due_on": null, "closed_at": "2021-03-17T10:36:35Z"}, "comments": 11, "created_at": "2021-02-28T14:21:33Z", "updated_at": "2021-03-15T11:34:56Z", "closed_at": "2021-03-15T11:34:56Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "To do this, we need to first build the map of which individual IDs are shared between `self` and `other`, by looping over the shared nodes, [here](https://github.com/tskit-dev/tskit/blob/20c423f055f03b84c98980e6e99febba9a6217d9/c/tskit/tables.c#L9887).  (And, we don't have tests with individual parents to test this.)\r\n\r\n(See also #1223.)", "reactions": {"url": "https://api.github.com/repos/tskit-dev/tskit/issues/1225/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/tskit-dev/tskit/issues/1225/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/tskit-dev/tskit/issues/1223", "repository_url": "https://api.github.com/repos/tskit-dev/tskit", "labels_url": "https://api.github.com/repos/tskit-dev/tskit/issues/1223/labels{/name}", "comments_url": "https://api.github.com/repos/tskit-dev/tskit/issues/1223/comments", "events_url": "https://api.github.com/repos/tskit-dev/tskit/issues/1223/events", "html_url": "https://github.com/tskit-dev/tskit/issues/1223", "id": 817496644, "node_id": "MDU6SXNzdWU4MTc0OTY2NDQ=", "number": 1223, "title": "subset (and maybe other methods?) need to remap individual.parent", "user": {"login": "petrelharp", "id": 1046249, "node_id": "MDQ6VXNlcjEwNDYyNDk=", "avatar_url": "https://avatars.githubusercontent.com/u/1046249?v=4", "gravatar_id": "", "url": "https://api.github.com/users/petrelharp", "html_url": "https://github.com/petrelharp", "followers_url": "https://api.github.com/users/petrelharp/followers", "following_url": "https://api.github.com/users/petrelharp/following{/other_user}", "gists_url": "https://api.github.com/users/petrelharp/gists{/gist_id}", "starred_url": "https://api.github.com/users/petrelharp/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/petrelharp/subscriptions", "organizations_url": "https://api.github.com/users/petrelharp/orgs", "repos_url": "https://api.github.com/users/petrelharp/repos", "events_url": "https://api.github.com/users/petrelharp/events{/privacy}", "received_events_url": "https://api.github.com/users/petrelharp/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 831518500, "node_id": "MDU6TGFiZWw4MzE1MTg1MDA=", "url": "https://api.github.com/repos/tskit-dev/tskit/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/tskit-dev/tskit/milestones/19", "html_url": "https://github.com/tskit-dev/tskit/milestone/19", "labels_url": "https://api.github.com/repos/tskit-dev/tskit/milestones/19/labels", "id": 6155932, "node_id": "MDk6TWlsZXN0b25lNjE1NTkzMg==", "number": 19, "title": "C API 0.99.11", "description": "", "creator": {"login": "benjeffery", "id": 8552, "node_id": "MDQ6VXNlcjg1NTI=", "avatar_url": "https://avatars.githubusercontent.com/u/8552?v=4", "gravatar_id": "", "url": "https://api.github.com/users/benjeffery", "html_url": "https://github.com/benjeffery", "followers_url": "https://api.github.com/users/benjeffery/followers", "following_url": "https://api.github.com/users/benjeffery/following{/other_user}", "gists_url": "https://api.github.com/users/benjeffery/gists{/gist_id}", "starred_url": "https://api.github.com/users/benjeffery/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/benjeffery/subscriptions", "organizations_url": "https://api.github.com/users/benjeffery/orgs", "repos_url": "https://api.github.com/users/benjeffery/repos", "events_url": "https://api.github.com/users/benjeffery/events{/privacy}", "received_events_url": "https://api.github.com/users/benjeffery/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 13, "state": "closed", "created_at": "2020-11-27T13:53:11Z", "updated_at": "2021-03-17T10:36:35Z", "due_on": null, "closed_at": "2021-03-17T10:36:35Z"}, "comments": 6, "created_at": "2021-02-26T16:32:28Z", "updated_at": "2021-03-16T10:13:48Z", "closed_at": "2021-03-16T10:13:48Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "... as noticed by @benjeffery in #1199.", "reactions": {"url": "https://api.github.com/repos/tskit-dev/tskit/issues/1223/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/tskit-dev/tskit/issues/1223/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/tskit-dev/tskit/issues/1212", "repository_url": "https://api.github.com/repos/tskit-dev/tskit", "labels_url": "https://api.github.com/repos/tskit-dev/tskit/issues/1212/labels{/name}", "comments_url": "https://api.github.com/repos/tskit-dev/tskit/issues/1212/comments", "events_url": "https://api.github.com/repos/tskit-dev/tskit/issues/1212/events", "html_url": "https://github.com/tskit-dev/tskit/issues/1212", "id": 813124612, "node_id": "MDU6SXNzdWU4MTMxMjQ2MTI=", "number": 1212, "title": "make individual parent column optional and add previous flie format to tests", "user": {"login": "petrelharp", "id": 1046249, "node_id": "MDQ6VXNlcjEwNDYyNDk=", "avatar_url": "https://avatars.githubusercontent.com/u/1046249?v=4", "gravatar_id": "", "url": "https://api.github.com/users/petrelharp", "html_url": "https://github.com/petrelharp", "followers_url": "https://api.github.com/users/petrelharp/followers", "following_url": "https://api.github.com/users/petrelharp/following{/other_user}", "gists_url": "https://api.github.com/users/petrelharp/gists{/gist_id}", "starred_url": "https://api.github.com/users/petrelharp/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/petrelharp/subscriptions", "organizations_url": "https://api.github.com/users/petrelharp/orgs", "repos_url": "https://api.github.com/users/petrelharp/repos", "events_url": "https://api.github.com/users/petrelharp/events{/privacy}", "received_events_url": "https://api.github.com/users/petrelharp/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 831518500, "node_id": "MDU6TGFiZWw4MzE1MTg1MDA=", "url": "https://api.github.com/repos/tskit-dev/tskit/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/tskit-dev/tskit/milestones/19", "html_url": "https://github.com/tskit-dev/tskit/milestone/19", "labels_url": "https://api.github.com/repos/tskit-dev/tskit/milestones/19/labels", "id": 6155932, "node_id": "MDk6TWlsZXN0b25lNjE1NTkzMg==", "number": 19, "title": "C API 0.99.11", "description": "", "creator": {"login": "benjeffery", "id": 8552, "node_id": "MDQ6VXNlcjg1NTI=", "avatar_url": "https://avatars.githubusercontent.com/u/8552?v=4", "gravatar_id": "", "url": "https://api.github.com/users/benjeffery", "html_url": "https://github.com/benjeffery", "followers_url": "https://api.github.com/users/benjeffery/followers", "following_url": "https://api.github.com/users/benjeffery/following{/other_user}", "gists_url": "https://api.github.com/users/benjeffery/gists{/gist_id}", "starred_url": "https://api.github.com/users/benjeffery/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/benjeffery/subscriptions", "organizations_url": "https://api.github.com/users/benjeffery/orgs", "repos_url": "https://api.github.com/users/benjeffery/repos", "events_url": "https://api.github.com/users/benjeffery/events{/privacy}", "received_events_url": "https://api.github.com/users/benjeffery/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 13, "state": "closed", "created_at": "2020-11-27T13:53:11Z", "updated_at": "2021-03-17T10:36:35Z", "due_on": null, "closed_at": "2021-03-17T10:36:35Z"}, "comments": 1, "created_at": "2021-02-22T05:13:58Z", "updated_at": "2021-03-04T13:31:49Z", "closed_at": "2021-03-04T13:31:49Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "In testing pyslim, I noticed that current tskit `main` doesn't read older files, I think because of the missing individual parent column. I couldn't find fixing this backwards-compatibility thing on a list to do anywhere, so I'm posting it here, although I have probably just missed it.\r\n\r\nMore generally, I notice that in `tests/test_file_format.py` there's tests that load example files with the old hdf5 file format, but no saved examples of post-hdf5 trees files, although we've been through a few file versions. Perhaps we should add an example .trees file to `tests/data/old_formats` and a verification test each time we bump the file format?", "reactions": {"url": "https://api.github.com/repos/tskit-dev/tskit/issues/1212/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/tskit-dev/tskit/issues/1212/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/tskit-dev/tskit/issues/1154", "repository_url": "https://api.github.com/repos/tskit-dev/tskit", "labels_url": "https://api.github.com/repos/tskit-dev/tskit/issues/1154/labels{/name}", "comments_url": "https://api.github.com/repos/tskit-dev/tskit/issues/1154/comments", "events_url": "https://api.github.com/repos/tskit-dev/tskit/issues/1154/events", "html_url": "https://github.com/tskit-dev/tskit/issues/1154", "id": 797124372, "node_id": "MDU6SXNzdWU3OTcxMjQzNzI=", "number": 1154, "title": "Bug in simplify with KEEP_UNARY_IN_INDIVIDUALS", "user": {"login": "hyanwong", "id": 4699014, "node_id": "MDQ6VXNlcjQ2OTkwMTQ=", "avatar_url": "https://avatars.githubusercontent.com/u/4699014?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hyanwong", "html_url": "https://github.com/hyanwong", "followers_url": "https://api.github.com/users/hyanwong/followers", "following_url": "https://api.github.com/users/hyanwong/following{/other_user}", "gists_url": "https://api.github.com/users/hyanwong/gists{/gist_id}", "starred_url": "https://api.github.com/users/hyanwong/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hyanwong/subscriptions", "organizations_url": "https://api.github.com/users/hyanwong/orgs", "repos_url": "https://api.github.com/users/hyanwong/repos", "events_url": "https://api.github.com/users/hyanwong/events{/privacy}", "received_events_url": "https://api.github.com/users/hyanwong/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 831518500, "node_id": "MDU6TGFiZWw4MzE1MTg1MDA=", "url": "https://api.github.com/repos/tskit-dev/tskit/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/tskit-dev/tskit/milestones/19", "html_url": "https://github.com/tskit-dev/tskit/milestone/19", "labels_url": "https://api.github.com/repos/tskit-dev/tskit/milestones/19/labels", "id": 6155932, "node_id": "MDk6TWlsZXN0b25lNjE1NTkzMg==", "number": 19, "title": "C API 0.99.11", "description": "", "creator": {"login": "benjeffery", "id": 8552, "node_id": "MDQ6VXNlcjg1NTI=", "avatar_url": "https://avatars.githubusercontent.com/u/8552?v=4", "gravatar_id": "", "url": "https://api.github.com/users/benjeffery", "html_url": "https://github.com/benjeffery", "followers_url": "https://api.github.com/users/benjeffery/followers", "following_url": "https://api.github.com/users/benjeffery/following{/other_user}", "gists_url": "https://api.github.com/users/benjeffery/gists{/gist_id}", "starred_url": "https://api.github.com/users/benjeffery/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/benjeffery/subscriptions", "organizations_url": "https://api.github.com/users/benjeffery/orgs", "repos_url": "https://api.github.com/users/benjeffery/repos", "events_url": "https://api.github.com/users/benjeffery/events{/privacy}", "received_events_url": "https://api.github.com/users/benjeffery/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 13, "state": "closed", "created_at": "2020-11-27T13:53:11Z", "updated_at": "2021-03-17T10:36:35Z", "due_on": null, "closed_at": "2021-03-17T10:36:35Z"}, "comments": 10, "created_at": "2021-01-29T19:21:50Z", "updated_at": "2021-02-22T07:55:35Z", "closed_at": "2021-02-22T07:55:35Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "Yes, this really is a simplify bug, which is my own fault. In f2d906d21fee3b8fa8991f4666c76a016a623ffe I inserted a check to see if the node being simplified has an individual:\r\n\r\nhttps://github.com/tskit-dev/tskit/blob/6c3fdc48ccbfb53e66898dbc1d1b689580d66464/c/tskit/tables.c#L6783\r\n\r\n~~But it seems that `input_id` here does not correspond to the node number in the current `self->tables->nodes` - I'm assuming it's been changed already by some previous node jiggling in the simplification algorithm, but the tables haven't been updated.~~ (see below: I'm not sure this is the problem, actually)\r\n\r\nThis is hard to test in python, because `keep_unary_in_individuals` is not an option to the simplify command yet: it's only in the C interface. But hopefully someone who knows about simplify can verify that my triaging is correct. Otherwise I can post a tree sequence where this causes a problem, and link to my branch where I've implemented `keep_unary_in_individuals` in python.", "reactions": {"url": "https://api.github.com/repos/tskit-dev/tskit/issues/1154/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/tskit-dev/tskit/issues/1154/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/tskit-dev/tskit/issues/1136", "repository_url": "https://api.github.com/repos/tskit-dev/tskit", "labels_url": "https://api.github.com/repos/tskit-dev/tskit/issues/1136/labels{/name}", "comments_url": "https://api.github.com/repos/tskit-dev/tskit/issues/1136/comments", "events_url": "https://api.github.com/repos/tskit-dev/tskit/issues/1136/events", "html_url": "https://github.com/tskit-dev/tskit/issues/1136", "id": 793269538, "node_id": "MDU6SXNzdWU3OTMyNjk1Mzg=", "number": 1136, "title": "Simplify should update ids in `Individual.parents`", "user": {"login": "benjeffery", "id": 8552, "node_id": "MDQ6VXNlcjg1NTI=", "avatar_url": "https://avatars.githubusercontent.com/u/8552?v=4", "gravatar_id": "", "url": "https://api.github.com/users/benjeffery", "html_url": "https://github.com/benjeffery", "followers_url": "https://api.github.com/users/benjeffery/followers", "following_url": "https://api.github.com/users/benjeffery/following{/other_user}", "gists_url": "https://api.github.com/users/benjeffery/gists{/gist_id}", "starred_url": "https://api.github.com/users/benjeffery/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/benjeffery/subscriptions", "organizations_url": "https://api.github.com/users/benjeffery/orgs", "repos_url": "https://api.github.com/users/benjeffery/repos", "events_url": "https://api.github.com/users/benjeffery/events{/privacy}", "received_events_url": "https://api.github.com/users/benjeffery/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 831518500, "node_id": "MDU6TGFiZWw4MzE1MTg1MDA=", "url": "https://api.github.com/repos/tskit-dev/tskit/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/tskit-dev/tskit/milestones/19", "html_url": "https://github.com/tskit-dev/tskit/milestone/19", "labels_url": "https://api.github.com/repos/tskit-dev/tskit/milestones/19/labels", "id": 6155932, "node_id": "MDk6TWlsZXN0b25lNjE1NTkzMg==", "number": 19, "title": "C API 0.99.11", "description": "", "creator": {"login": "benjeffery", "id": 8552, "node_id": "MDQ6VXNlcjg1NTI=", "avatar_url": "https://avatars.githubusercontent.com/u/8552?v=4", "gravatar_id": "", "url": "https://api.github.com/users/benjeffery", "html_url": "https://github.com/benjeffery", "followers_url": "https://api.github.com/users/benjeffery/followers", "following_url": "https://api.github.com/users/benjeffery/following{/other_user}", "gists_url": "https://api.github.com/users/benjeffery/gists{/gist_id}", "starred_url": "https://api.github.com/users/benjeffery/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/benjeffery/subscriptions", "organizations_url": "https://api.github.com/users/benjeffery/orgs", "repos_url": "https://api.github.com/users/benjeffery/repos", "events_url": "https://api.github.com/users/benjeffery/events{/privacy}", "received_events_url": "https://api.github.com/users/benjeffery/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 13, "state": "closed", "created_at": "2020-11-27T13:53:11Z", "updated_at": "2021-03-17T10:36:35Z", "due_on": null, "closed_at": "2021-03-17T10:36:35Z"}, "comments": 2, "created_at": "2021-01-25T10:48:01Z", "updated_at": "2021-03-12T13:16:42Z", "closed_at": "2021-03-12T13:16:42Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "After simplification the individual.parent ids need to be remapped.\r\nI'm assuming here that any reference to a parent individual that has been removed is removed from the parent array?", "reactions": {"url": "https://api.github.com/repos/tskit-dev/tskit/issues/1136/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/tskit-dev/tskit/issues/1136/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/tskit-dev/tskit/issues/1085", "repository_url": "https://api.github.com/repos/tskit-dev/tskit", "labels_url": "https://api.github.com/repos/tskit-dev/tskit/issues/1085/labels{/name}", "comments_url": "https://api.github.com/repos/tskit-dev/tskit/issues/1085/comments", "events_url": "https://api.github.com/repos/tskit-dev/tskit/issues/1085/events", "html_url": "https://github.com/tskit-dev/tskit/issues/1085", "id": 761367533, "node_id": "MDU6SXNzdWU3NjEzNjc1MzM=", "number": 1085, "title": "additionalProperties=True ignored in struct codec", "user": {"login": "jeromekelleher", "id": 2664569, "node_id": "MDQ6VXNlcjI2NjQ1Njk=", "avatar_url": "https://avatars.githubusercontent.com/u/2664569?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jeromekelleher", "html_url": "https://github.com/jeromekelleher", "followers_url": "https://api.github.com/users/jeromekelleher/followers", "following_url": "https://api.github.com/users/jeromekelleher/following{/other_user}", "gists_url": "https://api.github.com/users/jeromekelleher/gists{/gist_id}", "starred_url": "https://api.github.com/users/jeromekelleher/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jeromekelleher/subscriptions", "organizations_url": "https://api.github.com/users/jeromekelleher/orgs", "repos_url": "https://api.github.com/users/jeromekelleher/repos", "events_url": "https://api.github.com/users/jeromekelleher/events{/privacy}", "received_events_url": "https://api.github.com/users/jeromekelleher/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 831518500, "node_id": "MDU6TGFiZWw4MzE1MTg1MDA=", "url": "https://api.github.com/repos/tskit-dev/tskit/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}, {"id": 2385559214, "node_id": "MDU6TGFiZWwyMzg1NTU5MjE0", "url": "https://api.github.com/repos/tskit-dev/tskit/labels/Python%20API", "name": "Python API", "color": "d12add", "default": false, "description": "Issue is about the Python API"}], "state": "closed", "locked": false, "assignee": {"login": "benjeffery", "id": 8552, "node_id": "MDQ6VXNlcjg1NTI=", "avatar_url": "https://avatars.githubusercontent.com/u/8552?v=4", "gravatar_id": "", "url": "https://api.github.com/users/benjeffery", "html_url": "https://github.com/benjeffery", "followers_url": "https://api.github.com/users/benjeffery/followers", "following_url": "https://api.github.com/users/benjeffery/following{/other_user}", "gists_url": "https://api.github.com/users/benjeffery/gists{/gist_id}", "starred_url": "https://api.github.com/users/benjeffery/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/benjeffery/subscriptions", "organizations_url": "https://api.github.com/users/benjeffery/orgs", "repos_url": "https://api.github.com/users/benjeffery/repos", "events_url": "https://api.github.com/users/benjeffery/events{/privacy}", "received_events_url": "https://api.github.com/users/benjeffery/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "benjeffery", "id": 8552, "node_id": "MDQ6VXNlcjg1NTI=", "avatar_url": "https://avatars.githubusercontent.com/u/8552?v=4", "gravatar_id": "", "url": "https://api.github.com/users/benjeffery", "html_url": "https://github.com/benjeffery", "followers_url": "https://api.github.com/users/benjeffery/followers", "following_url": "https://api.github.com/users/benjeffery/following{/other_user}", "gists_url": "https://api.github.com/users/benjeffery/gists{/gist_id}", "starred_url": "https://api.github.com/users/benjeffery/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/benjeffery/subscriptions", "organizations_url": "https://api.github.com/users/benjeffery/orgs", "repos_url": "https://api.github.com/users/benjeffery/repos", "events_url": "https://api.github.com/users/benjeffery/events{/privacy}", "received_events_url": "https://api.github.com/users/benjeffery/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/tskit-dev/tskit/milestones/20", "html_url": "https://github.com/tskit-dev/tskit/milestone/20", "labels_url": "https://api.github.com/repos/tskit-dev/tskit/milestones/20/labels", "id": 6171449, "node_id": "MDk6TWlsZXN0b25lNjE3MTQ0OQ==", "number": 20, "title": "Python 0.3.5", "description": "", "creator": {"login": "benjeffery", "id": 8552, "node_id": "MDQ6VXNlcjg1NTI=", "avatar_url": "https://avatars.githubusercontent.com/u/8552?v=4", "gravatar_id": "", "url": "https://api.github.com/users/benjeffery", "html_url": "https://github.com/benjeffery", "followers_url": "https://api.github.com/users/benjeffery/followers", "following_url": "https://api.github.com/users/benjeffery/following{/other_user}", "gists_url": "https://api.github.com/users/benjeffery/gists{/gist_id}", "starred_url": "https://api.github.com/users/benjeffery/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/benjeffery/subscriptions", "organizations_url": "https://api.github.com/users/benjeffery/orgs", "repos_url": "https://api.github.com/users/benjeffery/repos", "events_url": "https://api.github.com/users/benjeffery/events{/privacy}", "received_events_url": "https://api.github.com/users/benjeffery/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 11, "state": "closed", "created_at": "2020-12-02T10:20:00Z", "updated_at": "2021-03-17T10:37:01Z", "due_on": null, "closed_at": "2021-03-17T10:37:01Z"}, "comments": 0, "created_at": "2020-12-10T16:03:37Z", "updated_at": "2021-01-06T16:22:52Z", "closed_at": "2021-01-06T16:22:52Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "Setting ``\"additionalProperties\": True`` in a struct metadata schema does not raise an error and is ignored.\r\n\r\nWe should probably raise an error if someone tries to set this. ", "reactions": {"url": "https://api.github.com/repos/tskit-dev/tskit/issues/1085/reactions", "total_count": 1, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/tskit-dev/tskit/issues/1085/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/tskit-dev/tskit/issues/1067", "repository_url": "https://api.github.com/repos/tskit-dev/tskit", "labels_url": "https://api.github.com/repos/tskit-dev/tskit/issues/1067/labels{/name}", "comments_url": "https://api.github.com/repos/tskit-dev/tskit/issues/1067/comments", "events_url": "https://api.github.com/repos/tskit-dev/tskit/issues/1067/events", "html_url": "https://github.com/tskit-dev/tskit/issues/1067", "id": 754510442, "node_id": "MDU6SXNzdWU3NTQ1MTA0NDI=", "number": 1067, "title": "Reinstate zlib_compression option", "user": {"login": "jeromekelleher", "id": 2664569, "node_id": "MDQ6VXNlcjI2NjQ1Njk=", "avatar_url": "https://avatars.githubusercontent.com/u/2664569?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jeromekelleher", "html_url": "https://github.com/jeromekelleher", "followers_url": "https://api.github.com/users/jeromekelleher/followers", "following_url": "https://api.github.com/users/jeromekelleher/following{/other_user}", "gists_url": "https://api.github.com/users/jeromekelleher/gists{/gist_id}", "starred_url": "https://api.github.com/users/jeromekelleher/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jeromekelleher/subscriptions", "organizations_url": "https://api.github.com/users/jeromekelleher/orgs", "repos_url": "https://api.github.com/users/jeromekelleher/repos", "events_url": "https://api.github.com/users/jeromekelleher/events{/privacy}", "received_events_url": "https://api.github.com/users/jeromekelleher/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 831518500, "node_id": "MDU6TGFiZWw4MzE1MTg1MDA=", "url": "https://api.github.com/repos/tskit-dev/tskit/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/tskit-dev/tskit/milestones/18", "html_url": "https://github.com/tskit-dev/tskit/milestone/18", "labels_url": "https://api.github.com/repos/tskit-dev/tskit/milestones/18/labels", "id": 6104165, "node_id": "MDk6TWlsZXN0b25lNjEwNDE2NQ==", "number": 18, "title": "Python 0.3.4", "description": "", "creator": {"login": "benjeffery", "id": 8552, "node_id": "MDQ6VXNlcjg1NTI=", "avatar_url": "https://avatars.githubusercontent.com/u/8552?v=4", "gravatar_id": "", "url": "https://api.github.com/users/benjeffery", "html_url": "https://github.com/benjeffery", "followers_url": "https://api.github.com/users/benjeffery/followers", "following_url": "https://api.github.com/users/benjeffery/following{/other_user}", "gists_url": "https://api.github.com/users/benjeffery/gists{/gist_id}", "starred_url": "https://api.github.com/users/benjeffery/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/benjeffery/subscriptions", "organizations_url": "https://api.github.com/users/benjeffery/orgs", "repos_url": "https://api.github.com/users/benjeffery/repos", "events_url": "https://api.github.com/users/benjeffery/events{/privacy}", "received_events_url": "https://api.github.com/users/benjeffery/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 1, "state": "closed", "created_at": "2020-11-13T14:11:44Z", "updated_at": "2020-12-02T10:19:50Z", "due_on": null, "closed_at": "2020-12-02T10:19:50Z"}, "comments": 2, "created_at": "2020-12-01T15:48:25Z", "updated_at": "2020-12-01T23:53:44Z", "closed_at": "2020-12-01T23:53:44Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "There's been a number of reports of breakage from new latest tskit release in which the removal of the ``zlib_compression`` option has broken people's code. (.e.g. https://github.com/tskit-dev/msprime/issues/1327)\r\n\r\nWe should revert the change, and push out a bugfix release ASAP.", "reactions": {"url": "https://api.github.com/repos/tskit-dev/tskit/issues/1067/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/tskit-dev/tskit/issues/1067/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/tskit-dev/tskit/issues/1028", "repository_url": "https://api.github.com/repos/tskit-dev/tskit", "labels_url": "https://api.github.com/repos/tskit-dev/tskit/issues/1028/labels{/name}", "comments_url": "https://api.github.com/repos/tskit-dev/tskit/issues/1028/comments", "events_url": "https://api.github.com/repos/tskit-dev/tskit/issues/1028/events", "html_url": "https://github.com/tskit-dev/tskit/issues/1028", "id": 748289108, "node_id": "MDU6SXNzdWU3NDgyODkxMDg=", "number": 1028, "title": "Test failure on 32bit", "user": {"login": "jeromekelleher", "id": 2664569, "node_id": "MDQ6VXNlcjI2NjQ1Njk=", "avatar_url": "https://avatars.githubusercontent.com/u/2664569?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jeromekelleher", "html_url": "https://github.com/jeromekelleher", "followers_url": "https://api.github.com/users/jeromekelleher/followers", "following_url": "https://api.github.com/users/jeromekelleher/following{/other_user}", "gists_url": "https://api.github.com/users/jeromekelleher/gists{/gist_id}", "starred_url": "https://api.github.com/users/jeromekelleher/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jeromekelleher/subscriptions", "organizations_url": "https://api.github.com/users/jeromekelleher/orgs", "repos_url": "https://api.github.com/users/jeromekelleher/repos", "events_url": "https://api.github.com/users/jeromekelleher/events{/privacy}", "received_events_url": "https://api.github.com/users/jeromekelleher/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 831518500, "node_id": "MDU6TGFiZWw4MzE1MTg1MDA=", "url": "https://api.github.com/repos/tskit-dev/tskit/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": {"login": "jeromekelleher", "id": 2664569, "node_id": "MDQ6VXNlcjI2NjQ1Njk=", "avatar_url": "https://avatars.githubusercontent.com/u/2664569?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jeromekelleher", "html_url": "https://github.com/jeromekelleher", "followers_url": "https://api.github.com/users/jeromekelleher/followers", "following_url": "https://api.github.com/users/jeromekelleher/following{/other_user}", "gists_url": "https://api.github.com/users/jeromekelleher/gists{/gist_id}", "starred_url": "https://api.github.com/users/jeromekelleher/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jeromekelleher/subscriptions", "organizations_url": "https://api.github.com/users/jeromekelleher/orgs", "repos_url": "https://api.github.com/users/jeromekelleher/repos", "events_url": "https://api.github.com/users/jeromekelleher/events{/privacy}", "received_events_url": "https://api.github.com/users/jeromekelleher/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "jeromekelleher", "id": 2664569, "node_id": "MDQ6VXNlcjI2NjQ1Njk=", "avatar_url": "https://avatars.githubusercontent.com/u/2664569?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jeromekelleher", "html_url": "https://github.com/jeromekelleher", "followers_url": "https://api.github.com/users/jeromekelleher/followers", "following_url": "https://api.github.com/users/jeromekelleher/following{/other_user}", "gists_url": "https://api.github.com/users/jeromekelleher/gists{/gist_id}", "starred_url": "https://api.github.com/users/jeromekelleher/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jeromekelleher/subscriptions", "organizations_url": "https://api.github.com/users/jeromekelleher/orgs", "repos_url": "https://api.github.com/users/jeromekelleher/repos", "events_url": "https://api.github.com/users/jeromekelleher/events{/privacy}", "received_events_url": "https://api.github.com/users/jeromekelleher/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/tskit-dev/tskit/milestones/16", "html_url": "https://github.com/tskit-dev/tskit/milestone/16", "labels_url": "https://api.github.com/repos/tskit-dev/tskit/milestones/16/labels", "id": 5930253, "node_id": "MDk6TWlsZXN0b25lNTkzMDI1Mw==", "number": 16, "title": "Python upcoming", "description": "Issues not associated with immediate next release but are considered a priority for development in the Python API.", "creator": {"login": "jeromekelleher", "id": 2664569, "node_id": "MDQ6VXNlcjI2NjQ1Njk=", "avatar_url": "https://avatars.githubusercontent.com/u/2664569?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jeromekelleher", "html_url": "https://github.com/jeromekelleher", "followers_url": "https://api.github.com/users/jeromekelleher/followers", "following_url": "https://api.github.com/users/jeromekelleher/following{/other_user}", "gists_url": "https://api.github.com/users/jeromekelleher/gists{/gist_id}", "starred_url": "https://api.github.com/users/jeromekelleher/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jeromekelleher/subscriptions", "organizations_url": "https://api.github.com/users/jeromekelleher/orgs", "repos_url": "https://api.github.com/users/jeromekelleher/repos", "events_url": "https://api.github.com/users/jeromekelleher/events{/privacy}", "received_events_url": "https://api.github.com/users/jeromekelleher/received_events", "type": "User", "site_admin": false}, "open_issues": 55, "closed_issues": 24, "state": "open", "created_at": "2020-09-29T13:48:00Z", "updated_at": "2022-09-09T13:08:58Z", "due_on": null, "closed_at": null}, "comments": 0, "created_at": "2020-11-22T17:16:10Z", "updated_at": "2020-11-26T12:03:59Z", "closed_at": "2020-11-26T12:03:59Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "```\r\n___________________________________ TestLdCalculator.test_get_r2_array ___________________________________\r\nself = <tests.test_lowlevel.TestLdCalculator object at 0xaeae5ef0>\r\n    def test_get_r2_array(self):\r\n        ts = self.get_example_tree_sequence()\r\n        calc = _tskit.LdCalculator(ts)\r\n        with pytest.raises(TypeError):\r\n            calc.get_r2_array()\r\n        with pytest.raises(TypeError):\r\n            calc.get_r2_array(None)\r\n        # Doesn't support buffer protocol, so raises typeerror\r\n        with pytest.raises(TypeError):\r\n            calc.get_r2_array(None, 0)\r\n        n = ts.get_num_sites()\r\n        assert n > 2\r\n        with pytest.raises(BufferError):\r\n            calc.get_r2_array(bytes(100), 0)\r\n        buff = bytearray(1024)\r\n        with pytest.raises(ValueError):\r\n            calc.get_r2_array(buff, 0, max_distance=-1)\r\n        with pytest.raises(ValueError):\r\n            calc.get_r2_array(buff, 0, direction=1000)\r\n        # TODO this API is poor, we should explicitly catch these negative\r\n        # size errors.\r\n        for bad_max_mutations in [-2, -3, -(2 ** 32)]:\r\n            with pytest.raises(BufferError):\r\n>               calc.get_r2_array(buff, 0, max_mutations=bad_max_mutations)\r\nE               OverflowError: Python int too large to convert to C ssize_t\r\ntests/test_lowlevel.py:1759: OverflowError\r\n======================================== short test summary info =========================================\r\nFAILED tests/test_lowlevel.py::TestLdCalculator::test_get_r2_array - OverflowError: Python int too larg...\r\n================== 1 failed, 2624 passed, 10 skipped, 1 xfailed in 55735.74s (15:28:55) \r\n```\r\n\r\nThis is really just a bad test case, but I'll fix and verify on my laptop.", "reactions": {"url": "https://api.github.com/repos/tskit-dev/tskit/issues/1028/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/tskit-dev/tskit/issues/1028/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/tskit-dev/tskit/issues/1027", "repository_url": "https://api.github.com/repos/tskit-dev/tskit", "labels_url": "https://api.github.com/repos/tskit-dev/tskit/issues/1027/labels{/name}", "comments_url": "https://api.github.com/repos/tskit-dev/tskit/issues/1027/comments", "events_url": "https://api.github.com/repos/tskit-dev/tskit/issues/1027/events", "html_url": "https://github.com/tskit-dev/tskit/issues/1027", "id": 748233176, "node_id": "MDU6SXNzdWU3NDgyMzMxNzY=", "number": 1027, "title": "Flags are parsed as signed in the C Python extension.", "user": {"login": "hyanwong", "id": 4699014, "node_id": "MDQ6VXNlcjQ2OTkwMTQ=", "avatar_url": "https://avatars.githubusercontent.com/u/4699014?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hyanwong", "html_url": "https://github.com/hyanwong", "followers_url": "https://api.github.com/users/hyanwong/followers", "following_url": "https://api.github.com/users/hyanwong/following{/other_user}", "gists_url": "https://api.github.com/users/hyanwong/gists{/gist_id}", "starred_url": "https://api.github.com/users/hyanwong/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hyanwong/subscriptions", "organizations_url": "https://api.github.com/users/hyanwong/orgs", "repos_url": "https://api.github.com/users/hyanwong/repos", "events_url": "https://api.github.com/users/hyanwong/events{/privacy}", "received_events_url": "https://api.github.com/users/hyanwong/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 831518500, "node_id": "MDU6TGFiZWw4MzE1MTg1MDA=", "url": "https://api.github.com/repos/tskit-dev/tskit/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/tskit-dev/tskit/milestones/9", "html_url": "https://github.com/tskit-dev/tskit/milestone/9", "labels_url": "https://api.github.com/repos/tskit-dev/tskit/milestones/9/labels", "id": 5390912, "node_id": "MDk6TWlsZXN0b25lNTM5MDkxMg==", "number": 9, "title": "Python 0.3.3", "description": "", "creator": {"login": "jeromekelleher", "id": 2664569, "node_id": "MDQ6VXNlcjI2NjQ1Njk=", "avatar_url": "https://avatars.githubusercontent.com/u/2664569?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jeromekelleher", "html_url": "https://github.com/jeromekelleher", "followers_url": "https://api.github.com/users/jeromekelleher/followers", "following_url": "https://api.github.com/users/jeromekelleher/following{/other_user}", "gists_url": "https://api.github.com/users/jeromekelleher/gists{/gist_id}", "starred_url": "https://api.github.com/users/jeromekelleher/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jeromekelleher/subscriptions", "organizations_url": "https://api.github.com/users/jeromekelleher/orgs", "repos_url": "https://api.github.com/users/jeromekelleher/repos", "events_url": "https://api.github.com/users/jeromekelleher/events{/privacy}", "received_events_url": "https://api.github.com/users/jeromekelleher/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 39, "state": "closed", "created_at": "2020-05-06T16:35:44Z", "updated_at": "2020-11-27T13:52:50Z", "due_on": null, "closed_at": "2020-11-27T13:52:50Z"}, "comments": 5, "created_at": "2020-11-22T12:33:51Z", "updated_at": "2020-11-26T16:37:41Z", "closed_at": "2020-11-26T16:37:41Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "`tables.nodes.flags` and `tables.individuals.flags` are listed as dtype `np.uint32`. But it looks like the C library is expecting them to be set as signed 32 bit ints instead:\r\n\r\n```\r\nts = msprime.simulate(4, mutation_rate=10)\r\ntables = ts.dump_tables()\r\ntables.nodes.add_row(flags = np.iinfo(np.int32).max)  # works\r\ntables.nodes.add_row(flags = np.iinfo(np.uint32).max)  # fails with \"OverflowError: signed integer is greater than maximum\"\r\ntables.individuals.add_row(flags = np.iinfo(np.int32).max)  # works\r\ntables.individuals.add_row(flags = np.iinfo(np.uint32).max)  # fails with \"OverflowError: signed integer is greater than maximum\"\r\n```", "reactions": {"url": "https://api.github.com/repos/tskit-dev/tskit/issues/1027/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/tskit-dev/tskit/issues/1027/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/tskit-dev/tskit/issues/1025", "repository_url": "https://api.github.com/repos/tskit-dev/tskit", "labels_url": "https://api.github.com/repos/tskit-dev/tskit/issues/1025/labels{/name}", "comments_url": "https://api.github.com/repos/tskit-dev/tskit/issues/1025/comments", "events_url": "https://api.github.com/repos/tskit-dev/tskit/issues/1025/events", "html_url": "https://github.com/tskit-dev/tskit/issues/1025", "id": 747878292, "node_id": "MDU6SXNzdWU3NDc4NzgyOTI=", "number": 1025, "title": "LWT dict has bad data if LWT object is deleted.", "user": {"login": "benjeffery", "id": 8552, "node_id": "MDQ6VXNlcjg1NTI=", "avatar_url": "https://avatars.githubusercontent.com/u/8552?v=4", "gravatar_id": "", "url": "https://api.github.com/users/benjeffery", "html_url": "https://github.com/benjeffery", "followers_url": "https://api.github.com/users/benjeffery/followers", "following_url": "https://api.github.com/users/benjeffery/following{/other_user}", "gists_url": "https://api.github.com/users/benjeffery/gists{/gist_id}", "starred_url": "https://api.github.com/users/benjeffery/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/benjeffery/subscriptions", "organizations_url": "https://api.github.com/users/benjeffery/orgs", "repos_url": "https://api.github.com/users/benjeffery/repos", "events_url": "https://api.github.com/users/benjeffery/events{/privacy}", "received_events_url": "https://api.github.com/users/benjeffery/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 831518500, "node_id": "MDU6TGFiZWw4MzE1MTg1MDA=", "url": "https://api.github.com/repos/tskit-dev/tskit/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}, {"id": 2385559214, "node_id": "MDU6TGFiZWwyMzg1NTU5MjE0", "url": "https://api.github.com/repos/tskit-dev/tskit/labels/Python%20API", "name": "Python API", "color": "d12add", "default": false, "description": "Issue is about the Python API"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/tskit-dev/tskit/milestones/9", "html_url": "https://github.com/tskit-dev/tskit/milestone/9", "labels_url": "https://api.github.com/repos/tskit-dev/tskit/milestones/9/labels", "id": 5390912, "node_id": "MDk6TWlsZXN0b25lNTM5MDkxMg==", "number": 9, "title": "Python 0.3.3", "description": "", "creator": {"login": "jeromekelleher", "id": 2664569, "node_id": "MDQ6VXNlcjI2NjQ1Njk=", "avatar_url": "https://avatars.githubusercontent.com/u/2664569?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jeromekelleher", "html_url": "https://github.com/jeromekelleher", "followers_url": "https://api.github.com/users/jeromekelleher/followers", "following_url": "https://api.github.com/users/jeromekelleher/following{/other_user}", "gists_url": "https://api.github.com/users/jeromekelleher/gists{/gist_id}", "starred_url": "https://api.github.com/users/jeromekelleher/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jeromekelleher/subscriptions", "organizations_url": "https://api.github.com/users/jeromekelleher/orgs", "repos_url": "https://api.github.com/users/jeromekelleher/repos", "events_url": "https://api.github.com/users/jeromekelleher/events{/privacy}", "received_events_url": "https://api.github.com/users/jeromekelleher/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 39, "state": "closed", "created_at": "2020-05-06T16:35:44Z", "updated_at": "2020-11-27T13:52:50Z", "due_on": null, "closed_at": "2020-11-27T13:52:50Z"}, "comments": 1, "created_at": "2020-11-21T00:25:00Z", "updated_at": "2020-11-23T14:56:19Z", "closed_at": "2020-11-23T14:56:19Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "This works:\r\n```python\r\n>>> lwt = _tskit.LightweightTableCollection()\r\n>>> tskit.TableCollection.fromdict(lwt.asdict())\r\n<tskit.tables.TableCollection object at 0x7f116f75fb50>\r\n```\r\nHow ever this doesn't:\r\n```python\r\n>>> lwt_dict = _tskit.LightweightTableCollection().asdict()\r\n>>> tskit.TableCollection.fromdict(lwt_dict)\r\nTraceback (most recent call last):\r\n  File \"<stdin>\", line 1, in <module>\r\n  File \"/home/benj/projects/tskit/python/tskit/tables.py\", line 2353, in fromdict\r\n    tables.individuals.set_columns(**tables_dict[\"individuals\"])\r\n  File \"/home/benj/projects/tskit/python/tskit/tables.py\", line 558, in set_columns\r\n    self.ll_table.set_columns(\r\nValueError: Bad offset column encoding\r\n```\r\nthis is basically the same as:\r\n```python\r\n>>> lwt = _tskit.LightweightTableCollection()\r\n>>> lwt_dict = lwt.asdict()\r\n>>> del lwt\r\n>>> tskit.TableCollection.fromdict(lwt_dict)\r\nTraceback (most recent call last):\r\n  File \"<stdin>\", line 1, in <module>\r\n  File \"/home/benj/projects/tskit/python/tskit/tables.py\", line 2353, in fromdict\r\n    tables.individuals.set_columns(**tables_dict[\"individuals\"])\r\n  File \"/home/benj/projects/tskit/python/tskit/tables.py\", line 558, in set_columns\r\n    self.ll_table.set_columns(\r\nValueError: Bad offset column encoding\r\n```\r\n\r\nI think this is because the dict encoding uses `PyArray_SimpleNewFromData` whose documentation says \"Create an array wrapper around data pointed to by the given pointer. \" Which to me sounds like no copy is taken and it is up to us to make sure the data has the same lifetime as any array object we've made. I guess the right thing to do here is to make a copy - although I find this unsatisfying and do wonder if we should grasp the nettle of dealing with this and `.tables` without a copy. I guess it only matters for very large tree sequences though, unless I've misunderstood?\r\n\r\nIn summary - everything has worked thus far as the lifetime of our LWTs has always been longer than the dicts they produce.", "reactions": {"url": "https://api.github.com/repos/tskit-dev/tskit/issues/1025/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/tskit-dev/tskit/issues/1025/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/tskit-dev/tskit/issues/988", "repository_url": "https://api.github.com/repos/tskit-dev/tskit", "labels_url": "https://api.github.com/repos/tskit-dev/tskit/issues/988/labels{/name}", "comments_url": "https://api.github.com/repos/tskit-dev/tskit/issues/988/comments", "events_url": "https://api.github.com/repos/tskit-dev/tskit/issues/988/events", "html_url": "https://github.com/tskit-dev/tskit/issues/988", "id": 741638198, "node_id": "MDU6SXNzdWU3NDE2MzgxOTg=", "number": 988, "title": "Flakey test \"TestNodeTraitRegression.test_wright_fisher_unsimplified\"", "user": {"login": "benjeffery", "id": 8552, "node_id": "MDQ6VXNlcjg1NTI=", "avatar_url": "https://avatars.githubusercontent.com/u/8552?v=4", "gravatar_id": "", "url": "https://api.github.com/users/benjeffery", "html_url": "https://github.com/benjeffery", "followers_url": "https://api.github.com/users/benjeffery/followers", "following_url": "https://api.github.com/users/benjeffery/following{/other_user}", "gists_url": "https://api.github.com/users/benjeffery/gists{/gist_id}", "starred_url": "https://api.github.com/users/benjeffery/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/benjeffery/subscriptions", "organizations_url": "https://api.github.com/users/benjeffery/orgs", "repos_url": "https://api.github.com/users/benjeffery/repos", "events_url": "https://api.github.com/users/benjeffery/events{/privacy}", "received_events_url": "https://api.github.com/users/benjeffery/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 831518500, "node_id": "MDU6TGFiZWw4MzE1MTg1MDA=", "url": "https://api.github.com/repos/tskit-dev/tskit/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": {"login": "petrelharp", "id": 1046249, "node_id": "MDQ6VXNlcjEwNDYyNDk=", "avatar_url": "https://avatars.githubusercontent.com/u/1046249?v=4", "gravatar_id": "", "url": "https://api.github.com/users/petrelharp", "html_url": "https://github.com/petrelharp", "followers_url": "https://api.github.com/users/petrelharp/followers", "following_url": "https://api.github.com/users/petrelharp/following{/other_user}", "gists_url": "https://api.github.com/users/petrelharp/gists{/gist_id}", "starred_url": "https://api.github.com/users/petrelharp/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/petrelharp/subscriptions", "organizations_url": "https://api.github.com/users/petrelharp/orgs", "repos_url": "https://api.github.com/users/petrelharp/repos", "events_url": "https://api.github.com/users/petrelharp/events{/privacy}", "received_events_url": "https://api.github.com/users/petrelharp/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "petrelharp", "id": 1046249, "node_id": "MDQ6VXNlcjEwNDYyNDk=", "avatar_url": "https://avatars.githubusercontent.com/u/1046249?v=4", "gravatar_id": "", "url": "https://api.github.com/users/petrelharp", "html_url": "https://github.com/petrelharp", "followers_url": "https://api.github.com/users/petrelharp/followers", "following_url": "https://api.github.com/users/petrelharp/following{/other_user}", "gists_url": "https://api.github.com/users/petrelharp/gists{/gist_id}", "starred_url": "https://api.github.com/users/petrelharp/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/petrelharp/subscriptions", "organizations_url": "https://api.github.com/users/petrelharp/orgs", "repos_url": "https://api.github.com/users/petrelharp/repos", "events_url": "https://api.github.com/users/petrelharp/events{/privacy}", "received_events_url": "https://api.github.com/users/petrelharp/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 9, "created_at": "2020-11-12T14:18:03Z", "updated_at": "2020-11-13T13:51:23Z", "closed_at": "2020-11-13T13:51:23Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "I've seen this test fail on CI at a rate of a couple a week.\r\n```\r\n =================================== FAILURES ===================================\r\n ___________ TestNodeTraitRegression.test_wright_fisher_unsimplified ____________\r\n [gw1] darwin -- Python 3.6.11 /usr/local/miniconda/envs/anaconda-client-env/bin/python3.6\r\n \r\n self = <tests.test_tree_stats.TestNodeTraitRegression object at 0x7fe6c4bda048>\r\n \r\n     def test_wright_fisher_unsimplified(self):\r\n         tables = wf.wf_sim(\r\n             4,\r\n             5,\r\n             seed=1,\r\n             deep_history=True,\r\n             initial_generation_samples=False,\r\n             num_loci=5,\r\n         )\r\n         tables.sort()\r\n         ts = tables.tree_sequence()\r\n >       self.verify(ts)\r\n \r\n tests/test_tree_stats.py:594: \r\n _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \r\n tests/test_tree_stats.py:4488: in verify\r\n     self.verify_trait_regression(ts, W, Z, windows=windows)\r\n tests/test_tree_stats.py:4546: in verify_trait_regression\r\n     self.assertArrayAlmostEqual(sigma1, sigma3)\r\n _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \r\n \r\n self = <tests.test_tree_stats.TestNodeTraitRegression object at 0x7fe6c4bda048>\r\n x = array([[[0.        ],\r\n         [0.        ],\r\n         [0.        ],\r\n         [0.        ],\r\n         [0.        ],\r\n         ...65014],\r\n         [0.        ],\r\n         [0.2617744 ],\r\n         [0.        ],\r\n         [0.        ],\r\n         [0.19294995]]])\r\n y = array([[[0.],\r\n         [0.],\r\n         [0.],\r\n         [0.],\r\n         [0.],\r\n         [0.],\r\n         [0.],\r\n         [0.],\r\n       ...[0.],\r\n         [0.],\r\n         [0.],\r\n         [0.],\r\n         [0.],\r\n         [0.],\r\n         [0.],\r\n         [0.],\r\n         [0.]]])\r\n atol = 1e-06, rtol = 1e-07\r\n \r\n     def assertArrayAlmostEqual(self, x, y, atol=1e-6, rtol=1e-7):\r\n >       nt.assert_allclose(x, y, atol=atol, rtol=rtol)\r\n E       AssertionError: \r\n E       Not equal to tolerance rtol=1e-07, atol=1e-06\r\n E       \r\n E       Mismatched elements: 103 / 315 (32.7%)\r\n E       Max absolute difference: 0.26177442\r\n E       Max relative difference: inf\r\n E        x: array([[[0.      ],\r\n E               [0.      ],\r\n E               [0.      ],...\r\n E        y: array([[[0.],\r\n E               [0.],\r\n E               [0.],...\r\n \r\n tests/test_tree_stats.py:541: AssertionError\r\n```", "reactions": {"url": "https://api.github.com/repos/tskit-dev/tskit/issues/988/reactions", "total_count": 1, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/tskit-dev/tskit/issues/988/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/tskit-dev/tskit/issues/987", "repository_url": "https://api.github.com/repos/tskit-dev/tskit", "labels_url": "https://api.github.com/repos/tskit-dev/tskit/issues/987/labels{/name}", "comments_url": "https://api.github.com/repos/tskit-dev/tskit/issues/987/comments", "events_url": "https://api.github.com/repos/tskit-dev/tskit/issues/987/events", "html_url": "https://github.com/tskit-dev/tskit/issues/987", "id": 740967169, "node_id": "MDU6SXNzdWU3NDA5NjcxNjk=", "number": 987, "title": "Bug in map_mutations() for polytomy", "user": {"login": "awohns", "id": 10664424, "node_id": "MDQ6VXNlcjEwNjY0NDI0", "avatar_url": "https://avatars.githubusercontent.com/u/10664424?v=4", "gravatar_id": "", "url": "https://api.github.com/users/awohns", "html_url": "https://github.com/awohns", "followers_url": "https://api.github.com/users/awohns/followers", "following_url": "https://api.github.com/users/awohns/following{/other_user}", "gists_url": "https://api.github.com/users/awohns/gists{/gist_id}", "starred_url": "https://api.github.com/users/awohns/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/awohns/subscriptions", "organizations_url": "https://api.github.com/users/awohns/orgs", "repos_url": "https://api.github.com/users/awohns/repos", "events_url": "https://api.github.com/users/awohns/events{/privacy}", "received_events_url": "https://api.github.com/users/awohns/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 831518500, "node_id": "MDU6TGFiZWw4MzE1MTg1MDA=", "url": "https://api.github.com/repos/tskit-dev/tskit/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/tskit-dev/tskit/milestones/9", "html_url": "https://github.com/tskit-dev/tskit/milestone/9", "labels_url": "https://api.github.com/repos/tskit-dev/tskit/milestones/9/labels", "id": 5390912, "node_id": "MDk6TWlsZXN0b25lNTM5MDkxMg==", "number": 9, "title": "Python 0.3.3", "description": "", "creator": {"login": "jeromekelleher", "id": 2664569, "node_id": "MDQ6VXNlcjI2NjQ1Njk=", "avatar_url": "https://avatars.githubusercontent.com/u/2664569?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jeromekelleher", "html_url": "https://github.com/jeromekelleher", "followers_url": "https://api.github.com/users/jeromekelleher/followers", "following_url": "https://api.github.com/users/jeromekelleher/following{/other_user}", "gists_url": "https://api.github.com/users/jeromekelleher/gists{/gist_id}", "starred_url": "https://api.github.com/users/jeromekelleher/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jeromekelleher/subscriptions", "organizations_url": "https://api.github.com/users/jeromekelleher/orgs", "repos_url": "https://api.github.com/users/jeromekelleher/repos", "events_url": "https://api.github.com/users/jeromekelleher/events{/privacy}", "received_events_url": "https://api.github.com/users/jeromekelleher/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 39, "state": "closed", "created_at": "2020-05-06T16:35:44Z", "updated_at": "2020-11-27T13:52:50Z", "due_on": null, "closed_at": "2020-11-27T13:52:50Z"}, "comments": 7, "created_at": "2020-11-11T18:08:41Z", "updated_at": "2020-11-26T14:48:24Z", "closed_at": "2020-11-26T14:48:24Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "@jeromekelleher \r\n\r\nI used map_mutations to remap genotypes onto my inferred tree sequence and got unexpected results. The total number of mutations was _higher_ than that inferred by `tsinfer`. I whittled it down to a reproducible, minimal example:\r\n\r\n<img width=\"284\" alt=\"Screenshot 2020-11-11 at 12 57 56 PM\" src=\"https://user-images.githubusercontent.com/10664424/98846850-70e0f100-2447-11eb-8a96-a084c8f4abc5.png\">\r\n\r\nHere is a tree in the (simplified down) tree sequence. The genotype array is:\r\n`[1, 0, 0, 0, 0, 1]` and alleles are `('C', 'T')`.\r\n\r\nNow we run: \r\n`tree.map_mutations(np.array([1, 0, 0, 0, 0, 1]), (\"C\", \"T\"))`\r\nAnd we get _three_ mutations:\r\n`('C', [{'id': -1, 'site': -1, 'node': 6251, 'time': nan, 'derived_state': 'T', 'parent': -1, 'metadata': b''}, {'id': -1, 'site': -1, 'node': 2, 'time': nan, 'derived_state': 'C', 'parent': 0, 'metadata': b''}, {'id': -1, 'site': -1, 'node': 4, 'time': nan, 'derived_state': 'C', 'parent': 0, 'metadata': b''}])`\r\n\r\nAm I correct in thinking this is a bug? Doc of `map_mutations()` states:\r\n\r\n> The current implementation uses the Fitch parsimony algorithm to determine the minimum number of state transitions required to explain the data. In this model, transitions between any of the non-missing states is equally likely.\r\n\r\nBut map_mutations infers an extra mutation. Perhaps could be an issue with polytomies?\r\n\r\nHere's code to reproduce:\r\n```\r\nimport tskit\r\nimport io\r\n\r\ndef polytomy_tree_ts():\r\n    nodes = io.StringIO(\"\"\"\\\r\n    id      is_sample   time\r\n    0       1           0\r\n    1       1           0\r\n    2       1           0\r\n    3       1           0\r\n    4       1           0\r\n    5       1           0\r\n    6       0           1\r\n    7       0           2\r\n    8       0           2\r\n    9       0           3\r\n    \"\"\")\r\n    edges = io.StringIO(\"\"\"\\\r\n    left    right   parent  child\r\n    0       1       6       0,2,4\r\n    0       1       7       6,5\r\n    0       1       8       1,3\r\n    0       1       9       7,8\r\n    \"\"\")\r\n    sites = io.StringIO(\"\"\"\\\r\n    position    ancestral_state\r\n    0.5         0\r\n    \"\"\")\r\n    mutations = io.StringIO(\"\"\"\\\r\n    site    node    derived_state\r\n    0       0       1\r\n    0       5       1\r\n    \"\"\")\r\n    return tskit.load_text(nodes=nodes, edges=edges,sites=sites, mutations=mutations, strict=False)\r\n\r\nex = polytomy_tree_ts()\r\nex.first().map_mutations(var.genotypes, (\"G\", \"C\"))\r\n```", "reactions": {"url": "https://api.github.com/repos/tskit-dev/tskit/issues/987/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/tskit-dev/tskit/issues/987/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/tskit-dev/tskit/issues/933", "repository_url": "https://api.github.com/repos/tskit-dev/tskit", "labels_url": "https://api.github.com/repos/tskit-dev/tskit/issues/933/labels{/name}", "comments_url": "https://api.github.com/repos/tskit-dev/tskit/issues/933/comments", "events_url": "https://api.github.com/repos/tskit-dev/tskit/issues/933/events", "html_url": "https://github.com/tskit-dev/tskit/issues/933", "id": 728819747, "node_id": "MDU6SXNzdWU3Mjg4MTk3NDc=", "number": 933, "title": "Add tests for uninitialised Python objects", "user": {"login": "jeromekelleher", "id": 2664569, "node_id": "MDQ6VXNlcjI2NjQ1Njk=", "avatar_url": "https://avatars.githubusercontent.com/u/2664569?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jeromekelleher", "html_url": "https://github.com/jeromekelleher", "followers_url": "https://api.github.com/users/jeromekelleher/followers", "following_url": "https://api.github.com/users/jeromekelleher/following{/other_user}", "gists_url": "https://api.github.com/users/jeromekelleher/gists{/gist_id}", "starred_url": "https://api.github.com/users/jeromekelleher/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jeromekelleher/subscriptions", "organizations_url": "https://api.github.com/users/jeromekelleher/orgs", "repos_url": "https://api.github.com/users/jeromekelleher/repos", "events_url": "https://api.github.com/users/jeromekelleher/events{/privacy}", "received_events_url": "https://api.github.com/users/jeromekelleher/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 831518500, "node_id": "MDU6TGFiZWw4MzE1MTg1MDA=", "url": "https://api.github.com/repos/tskit-dev/tskit/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}, {"id": 1184840738, "node_id": "MDU6TGFiZWwxMTg0ODQwNzM4", "url": "https://api.github.com/repos/tskit-dev/tskit/labels/C%20API", "name": "C API", "color": "1d76db", "default": false, "description": "Issue is about the C API"}, {"id": 2385559214, "node_id": "MDU6TGFiZWwyMzg1NTU5MjE0", "url": "https://api.github.com/repos/tskit-dev/tskit/labels/Python%20API", "name": "Python API", "color": "d12add", "default": false, "description": "Issue is about the Python API"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/tskit-dev/tskit/milestones/9", "html_url": "https://github.com/tskit-dev/tskit/milestone/9", "labels_url": "https://api.github.com/repos/tskit-dev/tskit/milestones/9/labels", "id": 5390912, "node_id": "MDk6TWlsZXN0b25lNTM5MDkxMg==", "number": 9, "title": "Python 0.3.3", "description": "", "creator": {"login": "jeromekelleher", "id": 2664569, "node_id": "MDQ6VXNlcjI2NjQ1Njk=", "avatar_url": "https://avatars.githubusercontent.com/u/2664569?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jeromekelleher", "html_url": "https://github.com/jeromekelleher", "followers_url": "https://api.github.com/users/jeromekelleher/followers", "following_url": "https://api.github.com/users/jeromekelleher/following{/other_user}", "gists_url": "https://api.github.com/users/jeromekelleher/gists{/gist_id}", "starred_url": "https://api.github.com/users/jeromekelleher/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jeromekelleher/subscriptions", "organizations_url": "https://api.github.com/users/jeromekelleher/orgs", "repos_url": "https://api.github.com/users/jeromekelleher/repos", "events_url": "https://api.github.com/users/jeromekelleher/events{/privacy}", "received_events_url": "https://api.github.com/users/jeromekelleher/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 39, "state": "closed", "created_at": "2020-05-06T16:35:44Z", "updated_at": "2020-11-27T13:52:50Z", "due_on": null, "closed_at": "2020-11-27T13:52:50Z"}, "comments": 3, "created_at": "2020-10-24T16:05:20Z", "updated_at": "2020-11-10T22:18:40Z", "closed_at": "2020-11-10T22:18:40Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "The Python C API can current segfault in quite a few places if a user deliberately creates an instance without calling ``__init__`` using ``__new__``. While this is a remote corner case, we should tie up this loose-end and avoid the segault. The way to do it is to make sure ``ClassName_check_state`` is called before accessing any of the memory of the embedded C object.\r\n\r\nThe test for doing this on the various objects can be adopted from [test_uninitialised](https://github.com/tskit-dev/msprime/blob/main/tests/test_lowlevel.py#L930) in msprime.", "reactions": {"url": "https://api.github.com/repos/tskit-dev/tskit/issues/933/reactions", "total_count": 1, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/tskit-dev/tskit/issues/933/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/tskit-dev/tskit/issues/835", "repository_url": "https://api.github.com/repos/tskit-dev/tskit", "labels_url": "https://api.github.com/repos/tskit-dev/tskit/issues/835/labels{/name}", "comments_url": "https://api.github.com/repos/tskit-dev/tskit/issues/835/comments", "events_url": "https://api.github.com/repos/tskit-dev/tskit/issues/835/events", "html_url": "https://github.com/tskit-dev/tskit/issues/835", "id": 691549040, "node_id": "MDU6SXNzdWU2OTE1NDkwNDA=", "number": 835, "title": "TableCollection.ll_tables is missing the underscore we usually give internals that are not for public consumption.", "user": {"login": "benjeffery", "id": 8552, "node_id": "MDQ6VXNlcjg1NTI=", "avatar_url": "https://avatars.githubusercontent.com/u/8552?v=4", "gravatar_id": "", "url": "https://api.github.com/users/benjeffery", "html_url": "https://github.com/benjeffery", "followers_url": "https://api.github.com/users/benjeffery/followers", "following_url": "https://api.github.com/users/benjeffery/following{/other_user}", "gists_url": "https://api.github.com/users/benjeffery/gists{/gist_id}", "starred_url": "https://api.github.com/users/benjeffery/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/benjeffery/subscriptions", "organizations_url": "https://api.github.com/users/benjeffery/orgs", "repos_url": "https://api.github.com/users/benjeffery/repos", "events_url": "https://api.github.com/users/benjeffery/events{/privacy}", "received_events_url": "https://api.github.com/users/benjeffery/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 831518500, "node_id": "MDU6TGFiZWw4MzE1MTg1MDA=", "url": "https://api.github.com/repos/tskit-dev/tskit/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/tskit-dev/tskit/milestones/13", "html_url": "https://github.com/tskit-dev/tskit/milestone/13", "labels_url": "https://api.github.com/repos/tskit-dev/tskit/milestones/13/labels", "id": 5831258, "node_id": "MDk6TWlsZXN0b25lNTgzMTI1OA==", "number": 13, "title": "Python 0.3.1", "description": "Bugfix release.", "creator": {"login": "jeromekelleher", "id": 2664569, "node_id": "MDQ6VXNlcjI2NjQ1Njk=", "avatar_url": "https://avatars.githubusercontent.com/u/2664569?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jeromekelleher", "html_url": "https://github.com/jeromekelleher", "followers_url": "https://api.github.com/users/jeromekelleher/followers", "following_url": "https://api.github.com/users/jeromekelleher/following{/other_user}", "gists_url": "https://api.github.com/users/jeromekelleher/gists{/gist_id}", "starred_url": "https://api.github.com/users/jeromekelleher/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jeromekelleher/subscriptions", "organizations_url": "https://api.github.com/users/jeromekelleher/orgs", "repos_url": "https://api.github.com/users/jeromekelleher/repos", "events_url": "https://api.github.com/users/jeromekelleher/events{/privacy}", "received_events_url": "https://api.github.com/users/jeromekelleher/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 4, "state": "closed", "created_at": "2020-09-01T08:41:12Z", "updated_at": "2020-09-15T15:34:04Z", "due_on": null, "closed_at": "2020-09-15T15:34:04Z"}, "comments": 3, "created_at": "2020-09-03T01:18:51Z", "updated_at": "2020-09-03T11:32:53Z", "closed_at": "2020-09-03T11:32:53Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "Unless I'm missing something I think it should? Came up in #832 ", "reactions": {"url": "https://api.github.com/repos/tskit-dev/tskit/issues/835/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/tskit-dev/tskit/issues/835/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/tskit-dev/tskit/issues/824", "repository_url": "https://api.github.com/repos/tskit-dev/tskit", "labels_url": "https://api.github.com/repos/tskit-dev/tskit/issues/824/labels{/name}", "comments_url": "https://api.github.com/repos/tskit-dev/tskit/issues/824/comments", "events_url": "https://api.github.com/repos/tskit-dev/tskit/issues/824/events", "html_url": "https://github.com/tskit-dev/tskit/issues/824", "id": 689824909, "node_id": "MDU6SXNzdWU2ODk4MjQ5MDk=", "number": 824, "title": "mutation node sometimes incorrect in simplify(keep_input_roots=True)", "user": {"login": "petrelharp", "id": 1046249, "node_id": "MDQ6VXNlcjEwNDYyNDk=", "avatar_url": "https://avatars.githubusercontent.com/u/1046249?v=4", "gravatar_id": "", "url": "https://api.github.com/users/petrelharp", "html_url": "https://github.com/petrelharp", "followers_url": "https://api.github.com/users/petrelharp/followers", "following_url": "https://api.github.com/users/petrelharp/following{/other_user}", "gists_url": "https://api.github.com/users/petrelharp/gists{/gist_id}", "starred_url": "https://api.github.com/users/petrelharp/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/petrelharp/subscriptions", "organizations_url": "https://api.github.com/users/petrelharp/orgs", "repos_url": "https://api.github.com/users/petrelharp/repos", "events_url": "https://api.github.com/users/petrelharp/events{/privacy}", "received_events_url": "https://api.github.com/users/petrelharp/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 831518500, "node_id": "MDU6TGFiZWw4MzE1MTg1MDA=", "url": "https://api.github.com/repos/tskit-dev/tskit/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/tskit-dev/tskit/milestones/14", "html_url": "https://github.com/tskit-dev/tskit/milestone/14", "labels_url": "https://api.github.com/repos/tskit-dev/tskit/milestones/14/labels", "id": 5831278, "node_id": "MDk6TWlsZXN0b25lNTgzMTI3OA==", "number": 14, "title": "C API 0.99.6", "description": "Bugfix release", "creator": {"login": "jeromekelleher", "id": 2664569, "node_id": "MDQ6VXNlcjI2NjQ1Njk=", "avatar_url": "https://avatars.githubusercontent.com/u/2664569?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jeromekelleher", "html_url": "https://github.com/jeromekelleher", "followers_url": "https://api.github.com/users/jeromekelleher/followers", "following_url": "https://api.github.com/users/jeromekelleher/following{/other_user}", "gists_url": "https://api.github.com/users/jeromekelleher/gists{/gist_id}", "starred_url": "https://api.github.com/users/jeromekelleher/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jeromekelleher/subscriptions", "organizations_url": "https://api.github.com/users/jeromekelleher/orgs", "repos_url": "https://api.github.com/users/jeromekelleher/repos", "events_url": "https://api.github.com/users/jeromekelleher/events{/privacy}", "received_events_url": "https://api.github.com/users/jeromekelleher/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 4, "state": "closed", "created_at": "2020-09-01T08:47:11Z", "updated_at": "2020-09-15T15:33:57Z", "due_on": null, "closed_at": "2020-09-15T15:33:57Z"}, "comments": 2, "created_at": "2020-09-01T05:29:39Z", "updated_at": "2020-09-01T17:59:03Z", "closed_at": "2020-09-01T17:59:03Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "See #823.", "reactions": {"url": "https://api.github.com/repos/tskit-dev/tskit/issues/824/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/tskit-dev/tskit/issues/824/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/tskit-dev/tskit/issues/821", "repository_url": "https://api.github.com/repos/tskit-dev/tskit", "labels_url": "https://api.github.com/repos/tskit-dev/tskit/issues/821/labels{/name}", "comments_url": "https://api.github.com/repos/tskit-dev/tskit/issues/821/comments", "events_url": "https://api.github.com/repos/tskit-dev/tskit/issues/821/events", "html_url": "https://github.com/tskit-dev/tskit/issues/821", "id": 689379179, "node_id": "MDU6SXNzdWU2ODkzNzkxNzk=", "number": 821, "title": "mutation row with missing time not equal to itself", "user": {"login": "petrelharp", "id": 1046249, "node_id": "MDQ6VXNlcjEwNDYyNDk=", "avatar_url": "https://avatars.githubusercontent.com/u/1046249?v=4", "gravatar_id": "", "url": "https://api.github.com/users/petrelharp", "html_url": "https://github.com/petrelharp", "followers_url": "https://api.github.com/users/petrelharp/followers", "following_url": "https://api.github.com/users/petrelharp/following{/other_user}", "gists_url": "https://api.github.com/users/petrelharp/gists{/gist_id}", "starred_url": "https://api.github.com/users/petrelharp/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/petrelharp/subscriptions", "organizations_url": "https://api.github.com/users/petrelharp/orgs", "repos_url": "https://api.github.com/users/petrelharp/repos", "events_url": "https://api.github.com/users/petrelharp/events{/privacy}", "received_events_url": "https://api.github.com/users/petrelharp/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 831518500, "node_id": "MDU6TGFiZWw4MzE1MTg1MDA=", "url": "https://api.github.com/repos/tskit-dev/tskit/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/tskit-dev/tskit/milestones/13", "html_url": "https://github.com/tskit-dev/tskit/milestone/13", "labels_url": "https://api.github.com/repos/tskit-dev/tskit/milestones/13/labels", "id": 5831258, "node_id": "MDk6TWlsZXN0b25lNTgzMTI1OA==", "number": 13, "title": "Python 0.3.1", "description": "Bugfix release.", "creator": {"login": "jeromekelleher", "id": 2664569, "node_id": "MDQ6VXNlcjI2NjQ1Njk=", "avatar_url": "https://avatars.githubusercontent.com/u/2664569?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jeromekelleher", "html_url": "https://github.com/jeromekelleher", "followers_url": "https://api.github.com/users/jeromekelleher/followers", "following_url": "https://api.github.com/users/jeromekelleher/following{/other_user}", "gists_url": "https://api.github.com/users/jeromekelleher/gists{/gist_id}", "starred_url": "https://api.github.com/users/jeromekelleher/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jeromekelleher/subscriptions", "organizations_url": "https://api.github.com/users/jeromekelleher/orgs", "repos_url": "https://api.github.com/users/jeromekelleher/repos", "events_url": "https://api.github.com/users/jeromekelleher/events{/privacy}", "received_events_url": "https://api.github.com/users/jeromekelleher/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 4, "state": "closed", "created_at": "2020-09-01T08:41:12Z", "updated_at": "2020-09-15T15:34:04Z", "due_on": null, "closed_at": "2020-09-15T15:34:04Z"}, "comments": 2, "created_at": "2020-08-31T17:43:19Z", "updated_at": "2020-09-01T16:46:34Z", "closed_at": "2020-09-01T16:46:34Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "For instance:\r\n```\r\nt = tskit.TableCollection(sequence_length=10)\r\nt.sites.add_row(position=1, ancestral_state='0')\r\nt.mutations.add_row(site=0, node=0, derived_state='1', time=tskit.UNKNOWN_TIME)\r\nassert(t.mutations[0] == t.mutations[0])\r\n```\r\n\r\nArguably, this is correct, because NAN != NAN, but I think this isn't what we want.", "reactions": {"url": "https://api.github.com/repos/tskit-dev/tskit/issues/821/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/tskit-dev/tskit/issues/821/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/tskit-dev/tskit/issues/777", "repository_url": "https://api.github.com/repos/tskit-dev/tskit", "labels_url": "https://api.github.com/repos/tskit-dev/tskit/issues/777/labels{/name}", "comments_url": "https://api.github.com/repos/tskit-dev/tskit/issues/777/comments", "events_url": "https://api.github.com/repos/tskit-dev/tskit/issues/777/events", "html_url": "https://github.com/tskit-dev/tskit/issues/777", "id": 681761101, "node_id": "MDU6SXNzdWU2ODE3NjExMDE=", "number": 777, "title": "Mutations over isolated samples should not be missing data", "user": {"login": "jeromekelleher", "id": 2664569, "node_id": "MDQ6VXNlcjI2NjQ1Njk=", "avatar_url": "https://avatars.githubusercontent.com/u/2664569?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jeromekelleher", "html_url": "https://github.com/jeromekelleher", "followers_url": "https://api.github.com/users/jeromekelleher/followers", "following_url": "https://api.github.com/users/jeromekelleher/following{/other_user}", "gists_url": "https://api.github.com/users/jeromekelleher/gists{/gist_id}", "starred_url": "https://api.github.com/users/jeromekelleher/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jeromekelleher/subscriptions", "organizations_url": "https://api.github.com/users/jeromekelleher/orgs", "repos_url": "https://api.github.com/users/jeromekelleher/repos", "events_url": "https://api.github.com/users/jeromekelleher/events{/privacy}", "received_events_url": "https://api.github.com/users/jeromekelleher/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 831518500, "node_id": "MDU6TGFiZWw4MzE1MTg1MDA=", "url": "https://api.github.com/repos/tskit-dev/tskit/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/tskit-dev/tskit/milestones/7", "html_url": "https://github.com/tskit-dev/tskit/milestone/7", "labels_url": "https://api.github.com/repos/tskit-dev/tskit/milestones/7/labels", "id": 4607628, "node_id": "MDk6TWlsZXN0b25lNDYwNzYyOA==", "number": 7, "title": "Python 0.3.0", "description": "", "creator": {"login": "jeromekelleher", "id": 2664569, "node_id": "MDQ6VXNlcjI2NjQ1Njk=", "avatar_url": "https://avatars.githubusercontent.com/u/2664569?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jeromekelleher", "html_url": "https://github.com/jeromekelleher", "followers_url": "https://api.github.com/users/jeromekelleher/followers", "following_url": "https://api.github.com/users/jeromekelleher/following{/other_user}", "gists_url": "https://api.github.com/users/jeromekelleher/gists{/gist_id}", "starred_url": "https://api.github.com/users/jeromekelleher/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jeromekelleher/subscriptions", "organizations_url": "https://api.github.com/users/jeromekelleher/orgs", "repos_url": "https://api.github.com/users/jeromekelleher/repos", "events_url": "https://api.github.com/users/jeromekelleher/events{/privacy}", "received_events_url": "https://api.github.com/users/jeromekelleher/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 42, "state": "closed", "created_at": "2019-08-27T17:06:46Z", "updated_at": "2020-08-27T12:55:43Z", "due_on": "2020-08-27T07:00:00Z", "closed_at": "2020-08-27T12:55:43Z"}, "comments": 0, "created_at": "2020-08-19T11:20:35Z", "updated_at": "2020-08-27T11:38:13Z", "closed_at": "2020-08-27T11:38:13Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "Currently if a mutation exists over an isolated sample, it's incorrectly decoded as having missing data when it should have the corresponding allele.\r\n\r\nSee #716 for more discussion.", "reactions": {"url": "https://api.github.com/repos/tskit-dev/tskit/issues/777/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/tskit-dev/tskit/issues/777/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/tskit-dev/tskit/issues/776", "repository_url": "https://api.github.com/repos/tskit-dev/tskit", "labels_url": "https://api.github.com/repos/tskit-dev/tskit/issues/776/labels{/name}", "comments_url": "https://api.github.com/repos/tskit-dev/tskit/issues/776/comments", "events_url": "https://api.github.com/repos/tskit-dev/tskit/issues/776/events", "html_url": "https://github.com/tskit-dev/tskit/issues/776", "id": 681746034, "node_id": "MDU6SXNzdWU2ODE3NDYwMzQ=", "number": 776, "title": "Segfault in ``samples`` argument to TreeSequence.variants with missing data", "user": {"login": "jeromekelleher", "id": 2664569, "node_id": "MDQ6VXNlcjI2NjQ1Njk=", "avatar_url": "https://avatars.githubusercontent.com/u/2664569?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jeromekelleher", "html_url": "https://github.com/jeromekelleher", "followers_url": "https://api.github.com/users/jeromekelleher/followers", "following_url": "https://api.github.com/users/jeromekelleher/following{/other_user}", "gists_url": "https://api.github.com/users/jeromekelleher/gists{/gist_id}", "starred_url": "https://api.github.com/users/jeromekelleher/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jeromekelleher/subscriptions", "organizations_url": "https://api.github.com/users/jeromekelleher/orgs", "repos_url": "https://api.github.com/users/jeromekelleher/repos", "events_url": "https://api.github.com/users/jeromekelleher/events{/privacy}", "received_events_url": "https://api.github.com/users/jeromekelleher/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 831518500, "node_id": "MDU6TGFiZWw4MzE1MTg1MDA=", "url": "https://api.github.com/repos/tskit-dev/tskit/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": {"login": "jeromekelleher", "id": 2664569, "node_id": "MDQ6VXNlcjI2NjQ1Njk=", "avatar_url": "https://avatars.githubusercontent.com/u/2664569?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jeromekelleher", "html_url": "https://github.com/jeromekelleher", "followers_url": "https://api.github.com/users/jeromekelleher/followers", "following_url": "https://api.github.com/users/jeromekelleher/following{/other_user}", "gists_url": "https://api.github.com/users/jeromekelleher/gists{/gist_id}", "starred_url": "https://api.github.com/users/jeromekelleher/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jeromekelleher/subscriptions", "organizations_url": "https://api.github.com/users/jeromekelleher/orgs", "repos_url": "https://api.github.com/users/jeromekelleher/repos", "events_url": "https://api.github.com/users/jeromekelleher/events{/privacy}", "received_events_url": "https://api.github.com/users/jeromekelleher/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "jeromekelleher", "id": 2664569, "node_id": "MDQ6VXNlcjI2NjQ1Njk=", "avatar_url": "https://avatars.githubusercontent.com/u/2664569?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jeromekelleher", "html_url": "https://github.com/jeromekelleher", "followers_url": "https://api.github.com/users/jeromekelleher/followers", "following_url": "https://api.github.com/users/jeromekelleher/following{/other_user}", "gists_url": "https://api.github.com/users/jeromekelleher/gists{/gist_id}", "starred_url": "https://api.github.com/users/jeromekelleher/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jeromekelleher/subscriptions", "organizations_url": "https://api.github.com/users/jeromekelleher/orgs", "repos_url": "https://api.github.com/users/jeromekelleher/repos", "events_url": "https://api.github.com/users/jeromekelleher/events{/privacy}", "received_events_url": "https://api.github.com/users/jeromekelleher/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/tskit-dev/tskit/milestones/7", "html_url": "https://github.com/tskit-dev/tskit/milestone/7", "labels_url": "https://api.github.com/repos/tskit-dev/tskit/milestones/7/labels", "id": 4607628, "node_id": "MDk6TWlsZXN0b25lNDYwNzYyOA==", "number": 7, "title": "Python 0.3.0", "description": "", "creator": {"login": "jeromekelleher", "id": 2664569, "node_id": "MDQ6VXNlcjI2NjQ1Njk=", "avatar_url": "https://avatars.githubusercontent.com/u/2664569?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jeromekelleher", "html_url": "https://github.com/jeromekelleher", "followers_url": "https://api.github.com/users/jeromekelleher/followers", "following_url": "https://api.github.com/users/jeromekelleher/following{/other_user}", "gists_url": "https://api.github.com/users/jeromekelleher/gists{/gist_id}", "starred_url": "https://api.github.com/users/jeromekelleher/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jeromekelleher/subscriptions", "organizations_url": "https://api.github.com/users/jeromekelleher/orgs", "repos_url": "https://api.github.com/users/jeromekelleher/repos", "events_url": "https://api.github.com/users/jeromekelleher/events{/privacy}", "received_events_url": "https://api.github.com/users/jeromekelleher/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 42, "state": "closed", "created_at": "2019-08-27T17:06:46Z", "updated_at": "2020-08-27T12:55:43Z", "due_on": "2020-08-27T07:00:00Z", "closed_at": "2020-08-27T12:55:43Z"}, "comments": 0, "created_at": "2020-08-19T10:53:46Z", "updated_at": "2020-08-27T11:38:13Z", "closed_at": "2020-08-27T11:38:13Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "Reproduce:\r\n```python\r\n   def test_empty_ts_incomplete_samples(self):\r\n        tables = tskit.TableCollection(1.0)\r\n        tables.nodes.add_row(tskit.NODE_IS_SAMPLE, 0)\r\n        tables.nodes.add_row(tskit.NODE_IS_SAMPLE, 0)\r\n        tables.sites.add_row(0.5, \"A\")\r\n        ts = tables.tree_sequence()\r\n        variants = list(ts.variants(samples=[0])) # segfault\r\n```\r\nThis is because the sample_index_map isn't checked when we mark missing data.\r\n\r\nThis will only get triggered when there's missing data and someone asks for genotypes for a subset of the samples.\r\n", "reactions": {"url": "https://api.github.com/repos/tskit-dev/tskit/issues/776/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/tskit-dev/tskit/issues/776/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/tskit-dev/tskit/issues/765", "repository_url": "https://api.github.com/repos/tskit-dev/tskit", "labels_url": "https://api.github.com/repos/tskit-dev/tskit/issues/765/labels{/name}", "comments_url": "https://api.github.com/repos/tskit-dev/tskit/issues/765/comments", "events_url": "https://api.github.com/repos/tskit-dev/tskit/issues/765/events", "html_url": "https://github.com/tskit-dev/tskit/issues/765", "id": 676984435, "node_id": "MDU6SXNzdWU2NzY5ODQ0MzU=", "number": 765, "title": "draw_svg(): converting svg to pdf loses text positioning and node circle size", "user": {"login": "grahamgower", "id": 8665077, "node_id": "MDQ6VXNlcjg2NjUwNzc=", "avatar_url": "https://avatars.githubusercontent.com/u/8665077?v=4", "gravatar_id": "", "url": "https://api.github.com/users/grahamgower", "html_url": "https://github.com/grahamgower", "followers_url": "https://api.github.com/users/grahamgower/followers", "following_url": "https://api.github.com/users/grahamgower/following{/other_user}", "gists_url": "https://api.github.com/users/grahamgower/gists{/gist_id}", "starred_url": "https://api.github.com/users/grahamgower/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/grahamgower/subscriptions", "organizations_url": "https://api.github.com/users/grahamgower/orgs", "repos_url": "https://api.github.com/users/grahamgower/repos", "events_url": "https://api.github.com/users/grahamgower/events{/privacy}", "received_events_url": "https://api.github.com/users/grahamgower/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 831518500, "node_id": "MDU6TGFiZWw4MzE1MTg1MDA=", "url": "https://api.github.com/repos/tskit-dev/tskit/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/tskit-dev/tskit/milestones/7", "html_url": "https://github.com/tskit-dev/tskit/milestone/7", "labels_url": "https://api.github.com/repos/tskit-dev/tskit/milestones/7/labels", "id": 4607628, "node_id": "MDk6TWlsZXN0b25lNDYwNzYyOA==", "number": 7, "title": "Python 0.3.0", "description": "", "creator": {"login": "jeromekelleher", "id": 2664569, "node_id": "MDQ6VXNlcjI2NjQ1Njk=", "avatar_url": "https://avatars.githubusercontent.com/u/2664569?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jeromekelleher", "html_url": "https://github.com/jeromekelleher", "followers_url": "https://api.github.com/users/jeromekelleher/followers", "following_url": "https://api.github.com/users/jeromekelleher/following{/other_user}", "gists_url": "https://api.github.com/users/jeromekelleher/gists{/gist_id}", "starred_url": "https://api.github.com/users/jeromekelleher/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jeromekelleher/subscriptions", "organizations_url": "https://api.github.com/users/jeromekelleher/orgs", "repos_url": "https://api.github.com/users/jeromekelleher/repos", "events_url": "https://api.github.com/users/jeromekelleher/events{/privacy}", "received_events_url": "https://api.github.com/users/jeromekelleher/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 42, "state": "closed", "created_at": "2019-08-27T17:06:46Z", "updated_at": "2020-08-27T12:55:43Z", "due_on": "2020-08-27T07:00:00Z", "closed_at": "2020-08-27T12:55:43Z"}, "comments": 45, "created_at": "2020-08-11T15:42:06Z", "updated_at": "2020-08-25T16:40:40Z", "closed_at": "2020-08-25T16:40:40Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "Between tskit 0.2.3 and 0.3.0.b1, the svg output format has changed to use more advanced css styling. Unfortunately, it seems many svg readers/converters such as `inkscape` and `rsvg-convert` don't understand everything. In particular the text positioning is off and the node circles seem too small. I was unable to obtain an svg->pdf conversion that did the right thing for an svg created with 0.3.0.b1.\r\n\r\n```\r\nimport os, tskit, msprime\r\nts = msprime.simulate(sample_size=5, random_seed=12345)\r\npath = f\"/tmp/tree-{tskit.__version__}\"\r\nts.first().draw_svg(f\"{path}.svg\")\r\nos.system(f\"inkscape -o {path}.pdf {path}.svg\")\r\n```\r\n\r\n[tree-0.2.3.pdf](https://github.com/tskit-dev/tskit/files/5057838/tree-0.2.3.pdf)\r\n[tree-0.3.0.b1.pdf](https://github.com/tskit-dev/tskit/files/5057839/tree-0.3.0.b1.pdf)\r\n\r\nFor the 0.3.0.b1 version, inkscape 1.0 (4035a4fb49, 2020-05-01) complains thusly:\r\n```\r\n** (org.inkscape.Inkscape:303264): WARNING **: 17:31:11.784: Unimplemented style property 121\r\n** (org.inkscape.Inkscape:303264): WARNING **: 17:31:11.784: Unimplemented style property 13\r\n```\r\n\r\ntree-0.2.3.svg\r\n```xml\r\n<?xml version=\"1.0\" encoding=\"utf-8\" ?>\r\n<svg xmlns=\"http://www.w3.org/2000/svg\" xmlns:ev=\"http://www.w3.org/2001/xml-events\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" baseProfile=\"full\" height=\"200\" version=\"1.1\" width=\"200\">\r\n  <defs/>\r\n  <g id=\"tree_0\">\r\n    <g fill=\"none\" id=\"edges\" stroke=\"black\">\r\n      <path d=\"M 62.5 134.05269443459176 V 30.0 H 103.75\" id=\"edge_0_6\"/>\r\n      <path d=\"M 40.0 170.0 V 134.05269443459176 H 62.5\" id=\"edge_0_4\"/>\r\n      <path d=\"M 85.0 136.95934339331913 V 134.05269443459176 H 62.5\" id=\"edge_0_5\"/>\r\n      <path d=\"M 70.0 170.0 V 136.95934339331913 H 85.0\" id=\"edge_0_0\"/>\r\n      <path d=\"M 100.0 170.0 V 136.95934339331913 H 85.0\" id=\"edge_0_3\"/>\r\n      <path d=\"M 145.0 124.55471853350159 V 30.0 H 103.75\" id=\"edge_0_7\"/>\r\n      <path d=\"M 130.0 170.0 V 124.55471853350159 H 145.0\" id=\"edge_0_1\"/>\r\n      <path d=\"M 160.0 170.0 V 124.55471853350159 H 145.0\" id=\"edge_0_2\"/>\r\n    </g>\r\n    <g id=\"symbols\">\r\n      <g class=\"nodes\">\r\n        <circle cx=\"103.75\" cy=\"30.0\" id=\"node_0_8\" r=\"3\"/>\r\n        <circle cx=\"62.5\" cy=\"134.05269443459176\" id=\"node_0_6\" r=\"3\"/>\r\n        <circle cx=\"40.0\" cy=\"170.0\" id=\"node_0_4\" r=\"3\"/>\r\n        <circle cx=\"85.0\" cy=\"136.95934339331913\" id=\"node_0_5\" r=\"3\"/>\r\n        <circle cx=\"70.0\" cy=\"170.0\" id=\"node_0_0\" r=\"3\"/>\r\n        <circle cx=\"100.0\" cy=\"170.0\" id=\"node_0_3\" r=\"3\"/>\r\n        <circle cx=\"145.0\" cy=\"124.55471853350159\" id=\"node_0_7\" r=\"3\"/>\r\n        <circle cx=\"130.0\" cy=\"170.0\" id=\"node_0_1\" r=\"3\"/>\r\n        <circle cx=\"160.0\" cy=\"170.0\" id=\"node_0_2\" r=\"3\"/>\r\n      </g>\r\n      <g class=\"mutations\" fill=\"red\"/>\r\n    </g>\r\n    <g font-size=\"14\" id=\"labels\">\r\n      <g class=\"nodes\">\r\n        <g text-anchor=\"start\">\r\n          <text x=\"90.0\" y=\"131.95934339331913\">5</text>\r\n          <text x=\"150.0\" y=\"119.55471853350159\">7</text>\r\n        </g>\r\n        <g text-anchor=\"middle\">\r\n          <text x=\"103.75\" y=\"25.0\">8</text>\r\n          <text x=\"40.0\" y=\"190.0\">4</text>\r\n          <text x=\"70.0\" y=\"190.0\">0</text>\r\n          <text x=\"100.0\" y=\"190.0\">3</text>\r\n          <text x=\"130.0\" y=\"190.0\">1</text>\r\n          <text x=\"160.0\" y=\"190.0\">2</text>\r\n        </g>\r\n        <g text-anchor=\"end\">\r\n          <text x=\"57.5\" y=\"129.05269443459176\">6</text>\r\n        </g>\r\n      </g>\r\n      <g class=\"mutations\" font-style=\"italic\">\r\n        <g text-anchor=\"start\"/>\r\n        <g text-anchor=\"end\"/>\r\n      </g>\r\n    </g>\r\n  </g>\r\n</svg>\r\n```\r\n\r\ntree-0.3.0.b1.svg\r\n```xml\r\n<?xml version=\"1.0\" encoding=\"utf-8\" ?>\r\n<svg xmlns=\"http://www.w3.org/2000/svg\" xmlns:ev=\"http://www.w3.org/2001/xml-events\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" baseProfile=\"full\" height=\"200\" version=\"1.1\" width=\"200\">\r\n  <defs>\r\n    <style type=\"text/css\"><![CDATA[.axis {font-weight: bold}.tree, .axis {font-size: 14px; text-anchor:middle;}.edge {stroke: black; fill: none}.node > circle {r: 3px; fill: black; stroke: none}.tree text {dominant-baseline: middle}.mut > text.lft {transform: translateX(0.5em); text-anchor: start}.mut > text.rgt {transform: translateX(-0.5em); text-anchor: end}.root > text {transform: translateY(-0.8em)}.leaf > text {transform: translateY(1em)}.node > text.lft {transform: translate(0.5em, -0.5em); text-anchor: start}.node > text.rgt {transform: translate(-0.5em, -0.5em); text-anchor: end}.mut {fill: red; font-style: italic}]]></style>\r\n  </defs>\r\n  <g class=\"tree t0\">\r\n    <g class=\"node n8 root\" transform=\"translate(111.25 30.0)\">\r\n      <g class=\"node n6 p8\" transform=\"translate(-33.75 104.053)\">\r\n        <g class=\"leaf node n4 p6 sample\" transform=\"translate(22.5 35.9473)\">\r\n          <path class=\"edge\" d=\"M 0 0 V -35.9473 H -22.5\"/>\r\n          <circle cx=\"0\" cy=\"0\" r=\"1\"/>\r\n          <text>4</text>\r\n        </g>\r\n        <g class=\"node n5 p6\" transform=\"translate(-22.5 2.90665)\">\r\n          <g class=\"leaf node n0 p5 sample\" transform=\"translate(-15.0 33.0407)\">\r\n            <path class=\"edge\" d=\"M 0 0 V -33.0407 H 15.0\"/>\r\n            <circle cx=\"0\" cy=\"0\" r=\"1\"/>\r\n            <text>0</text>\r\n          </g>\r\n          <g class=\"leaf node n3 p5 sample\" transform=\"translate(15.0 33.0407)\">\r\n            <path class=\"edge\" d=\"M 0 0 V -33.0407 H -15.0\"/>\r\n            <circle cx=\"0\" cy=\"0\" r=\"1\"/>\r\n            <text>3</text>\r\n          </g>\r\n          <path class=\"edge\" d=\"M 0 0 V -2.90665 H 22.5\"/>\r\n          <circle cx=\"0\" cy=\"0\" r=\"1\"/>\r\n          <text class=\"rgt\">5</text>\r\n        </g>\r\n        <path class=\"edge\" d=\"M 0 0 V -104.053 H 33.75\"/>\r\n        <circle cx=\"0\" cy=\"0\" r=\"1\"/>\r\n        <text class=\"rgt\">6</text>\r\n      </g>\r\n      <g class=\"node n7 p8\" transform=\"translate(33.75 94.5547)\">\r\n        <g class=\"leaf node n1 p7 sample\" transform=\"translate(-15.0 45.4453)\">\r\n          <path class=\"edge\" d=\"M 0 0 V -45.4453 H 15.0\"/>\r\n          <circle cx=\"0\" cy=\"0\" r=\"1\"/>\r\n          <text>1</text>\r\n        </g>\r\n        <g class=\"leaf node n2 p7 sample\" transform=\"translate(15.0 45.4453)\">\r\n          <path class=\"edge\" d=\"M 0 0 V -45.4453 H -15.0\"/>\r\n          <circle cx=\"0\" cy=\"0\" r=\"1\"/>\r\n          <text>2</text>\r\n        </g>\r\n        <path class=\"edge\" d=\"M 0 0 V -94.5547 H -33.75\"/>\r\n        <circle cx=\"0\" cy=\"0\" r=\"1\"/>\r\n        <text class=\"lft\">7</text>\r\n      </g>\r\n      <circle cx=\"0\" cy=\"0\" r=\"1\"/>\r\n      <text>8</text>\r\n    </g>\r\n  </g>\r\n</svg>\r\n\r\n```", "reactions": {"url": "https://api.github.com/repos/tskit-dev/tskit/issues/765/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/tskit-dev/tskit/issues/765/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/tskit-dev/tskit/issues/753", "repository_url": "https://api.github.com/repos/tskit-dev/tskit", "labels_url": "https://api.github.com/repos/tskit-dev/tskit/issues/753/labels{/name}", "comments_url": "https://api.github.com/repos/tskit-dev/tskit/issues/753/comments", "events_url": "https://api.github.com/repos/tskit-dev/tskit/issues/753/events", "html_url": "https://github.com/tskit-dev/tskit/issues/753", "id": 674896427, "node_id": "MDU6SXNzdWU2NzQ4OTY0Mjc=", "number": 753, "title": "Buffer too small error on newick output", "user": {"login": "jeromekelleher", "id": 2664569, "node_id": "MDQ6VXNlcjI2NjQ1Njk=", "avatar_url": "https://avatars.githubusercontent.com/u/2664569?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jeromekelleher", "html_url": "https://github.com/jeromekelleher", "followers_url": "https://api.github.com/users/jeromekelleher/followers", "following_url": "https://api.github.com/users/jeromekelleher/following{/other_user}", "gists_url": "https://api.github.com/users/jeromekelleher/gists{/gist_id}", "starred_url": "https://api.github.com/users/jeromekelleher/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jeromekelleher/subscriptions", "organizations_url": "https://api.github.com/users/jeromekelleher/orgs", "repos_url": "https://api.github.com/users/jeromekelleher/repos", "events_url": "https://api.github.com/users/jeromekelleher/events{/privacy}", "received_events_url": "https://api.github.com/users/jeromekelleher/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 831518500, "node_id": "MDU6TGFiZWw4MzE1MTg1MDA=", "url": "https://api.github.com/repos/tskit-dev/tskit/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/tskit-dev/tskit/milestones/7", "html_url": "https://github.com/tskit-dev/tskit/milestone/7", "labels_url": "https://api.github.com/repos/tskit-dev/tskit/milestones/7/labels", "id": 4607628, "node_id": "MDk6TWlsZXN0b25lNDYwNzYyOA==", "number": 7, "title": "Python 0.3.0", "description": "", "creator": {"login": "jeromekelleher", "id": 2664569, "node_id": "MDQ6VXNlcjI2NjQ1Njk=", "avatar_url": "https://avatars.githubusercontent.com/u/2664569?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jeromekelleher", "html_url": "https://github.com/jeromekelleher", "followers_url": "https://api.github.com/users/jeromekelleher/followers", "following_url": "https://api.github.com/users/jeromekelleher/following{/other_user}", "gists_url": "https://api.github.com/users/jeromekelleher/gists{/gist_id}", "starred_url": "https://api.github.com/users/jeromekelleher/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jeromekelleher/subscriptions", "organizations_url": "https://api.github.com/users/jeromekelleher/orgs", "repos_url": "https://api.github.com/users/jeromekelleher/repos", "events_url": "https://api.github.com/users/jeromekelleher/events{/privacy}", "received_events_url": "https://api.github.com/users/jeromekelleher/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 42, "state": "closed", "created_at": "2019-08-27T17:06:46Z", "updated_at": "2020-08-27T12:55:43Z", "due_on": "2020-08-27T07:00:00Z", "closed_at": "2020-08-27T12:55:43Z"}, "comments": 0, "created_at": "2020-08-07T09:41:23Z", "updated_at": "2020-08-07T12:03:28Z", "closed_at": "2020-08-07T12:03:28Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "If we run this command in msprime:\r\n```\r\n$ python3 mspms_dev.py 15 1 -r 0 1.0 -eG 1.0 5.25 -eG 2.0 10 -G 4 -eN 3.0 1.0 -T\r\n```\r\nwe currently get a \r\n```\r\n_tskit.LibraryError: Supplied buffer is too small\r\n```\r\nSo, our calculation of a good buffer size is out somehow. Should be fixed before 0.3.0 is shipped.", "reactions": {"url": "https://api.github.com/repos/tskit-dev/tskit/issues/753/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/tskit-dev/tskit/issues/753/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/tskit-dev/tskit/issues/724", "repository_url": "https://api.github.com/repos/tskit-dev/tskit", "labels_url": "https://api.github.com/repos/tskit-dev/tskit/issues/724/labels{/name}", "comments_url": "https://api.github.com/repos/tskit-dev/tskit/issues/724/comments", "events_url": "https://api.github.com/repos/tskit-dev/tskit/issues/724/events", "html_url": "https://github.com/tskit-dev/tskit/issues/724", "id": 661166699, "node_id": "MDU6SXNzdWU2NjExNjY2OTk=", "number": 724, "title": "[CI] Windows wheel building failing", "user": {"login": "benjeffery", "id": 8552, "node_id": "MDQ6VXNlcjg1NTI=", "avatar_url": "https://avatars.githubusercontent.com/u/8552?v=4", "gravatar_id": "", "url": "https://api.github.com/users/benjeffery", "html_url": "https://github.com/benjeffery", "followers_url": "https://api.github.com/users/benjeffery/followers", "following_url": "https://api.github.com/users/benjeffery/following{/other_user}", "gists_url": "https://api.github.com/users/benjeffery/gists{/gist_id}", "starred_url": "https://api.github.com/users/benjeffery/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/benjeffery/subscriptions", "organizations_url": "https://api.github.com/users/benjeffery/orgs", "repos_url": "https://api.github.com/users/benjeffery/repos", "events_url": "https://api.github.com/users/benjeffery/events{/privacy}", "received_events_url": "https://api.github.com/users/benjeffery/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 831518500, "node_id": "MDU6TGFiZWw4MzE1MTg1MDA=", "url": "https://api.github.com/repos/tskit-dev/tskit/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": {"login": "benjeffery", "id": 8552, "node_id": "MDQ6VXNlcjg1NTI=", "avatar_url": "https://avatars.githubusercontent.com/u/8552?v=4", "gravatar_id": "", "url": "https://api.github.com/users/benjeffery", "html_url": "https://github.com/benjeffery", "followers_url": "https://api.github.com/users/benjeffery/followers", "following_url": "https://api.github.com/users/benjeffery/following{/other_user}", "gists_url": "https://api.github.com/users/benjeffery/gists{/gist_id}", "starred_url": "https://api.github.com/users/benjeffery/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/benjeffery/subscriptions", "organizations_url": "https://api.github.com/users/benjeffery/orgs", "repos_url": "https://api.github.com/users/benjeffery/repos", "events_url": "https://api.github.com/users/benjeffery/events{/privacy}", "received_events_url": "https://api.github.com/users/benjeffery/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "benjeffery", "id": 8552, "node_id": "MDQ6VXNlcjg1NTI=", "avatar_url": "https://avatars.githubusercontent.com/u/8552?v=4", "gravatar_id": "", "url": "https://api.github.com/users/benjeffery", "html_url": "https://github.com/benjeffery", "followers_url": "https://api.github.com/users/benjeffery/followers", "following_url": "https://api.github.com/users/benjeffery/following{/other_user}", "gists_url": "https://api.github.com/users/benjeffery/gists{/gist_id}", "starred_url": "https://api.github.com/users/benjeffery/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/benjeffery/subscriptions", "organizations_url": "https://api.github.com/users/benjeffery/orgs", "repos_url": "https://api.github.com/users/benjeffery/repos", "events_url": "https://api.github.com/users/benjeffery/events{/privacy}", "received_events_url": "https://api.github.com/users/benjeffery/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/tskit-dev/tskit/milestones/7", "html_url": "https://github.com/tskit-dev/tskit/milestone/7", "labels_url": "https://api.github.com/repos/tskit-dev/tskit/milestones/7/labels", "id": 4607628, "node_id": "MDk6TWlsZXN0b25lNDYwNzYyOA==", "number": 7, "title": "Python 0.3.0", "description": "", "creator": {"login": "jeromekelleher", "id": 2664569, "node_id": "MDQ6VXNlcjI2NjQ1Njk=", "avatar_url": "https://avatars.githubusercontent.com/u/2664569?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jeromekelleher", "html_url": "https://github.com/jeromekelleher", "followers_url": "https://api.github.com/users/jeromekelleher/followers", "following_url": "https://api.github.com/users/jeromekelleher/following{/other_user}", "gists_url": "https://api.github.com/users/jeromekelleher/gists{/gist_id}", "starred_url": "https://api.github.com/users/jeromekelleher/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jeromekelleher/subscriptions", "organizations_url": "https://api.github.com/users/jeromekelleher/orgs", "repos_url": "https://api.github.com/users/jeromekelleher/repos", "events_url": "https://api.github.com/users/jeromekelleher/events{/privacy}", "received_events_url": "https://api.github.com/users/jeromekelleher/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 42, "state": "closed", "created_at": "2019-08-27T17:06:46Z", "updated_at": "2020-08-27T12:55:43Z", "due_on": "2020-08-27T07:00:00Z", "closed_at": "2020-08-27T12:55:43Z"}, "comments": 3, "created_at": "2020-07-19T23:39:14Z", "updated_at": "2020-07-21T09:32:40Z", "closed_at": "2020-07-21T09:32:40Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "Since July 15th windows compilation when wheel building has been failing with a missing `kastore.h`. I'll pick this up later, here are my notes for now:\r\n\r\n- Re-running old commits that did build successfully now fail, so it isn't due to tskit changes.\r\n-  `kastore` hasn't changed since July 6th.\r\n-   A diff of the logs for a passing and failing run on the same commit shows the only difference to be the windows image changing from `20200706.1` to `20200714.1`.\r\n-  The changes to software between these versions is [here](https://github.com/actions/virtual-environments/commit/95222e07e94ec86d400c670bdc2f92f5a2b20fd0) I can't see anything that would cause our problem. \r\n- The detailed changes at https://github.com/actions/virtual-environments/compare/releases/win19/20200706...releases/win19/20200714 show changes to git install options to do with symlinks - could be the culprit.", "reactions": {"url": "https://api.github.com/repos/tskit-dev/tskit/issues/724/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/tskit-dev/tskit/issues/724/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/tskit-dev/tskit/issues/708", "repository_url": "https://api.github.com/repos/tskit-dev/tskit", "labels_url": "https://api.github.com/repos/tskit-dev/tskit/issues/708/labels{/name}", "comments_url": "https://api.github.com/repos/tskit-dev/tskit/issues/708/comments", "events_url": "https://api.github.com/repos/tskit-dev/tskit/issues/708/events", "html_url": "https://github.com/tskit-dev/tskit/issues/708", "id": 653307603, "node_id": "MDU6SXNzdWU2NTMzMDc2MDM=", "number": 708, "title": "Edge metadata is not sorted when edges are.", "user": {"login": "benjeffery", "id": 8552, "node_id": "MDQ6VXNlcjg1NTI=", "avatar_url": "https://avatars.githubusercontent.com/u/8552?v=4", "gravatar_id": "", "url": "https://api.github.com/users/benjeffery", "html_url": "https://github.com/benjeffery", "followers_url": "https://api.github.com/users/benjeffery/followers", "following_url": "https://api.github.com/users/benjeffery/following{/other_user}", "gists_url": "https://api.github.com/users/benjeffery/gists{/gist_id}", "starred_url": "https://api.github.com/users/benjeffery/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/benjeffery/subscriptions", "organizations_url": "https://api.github.com/users/benjeffery/orgs", "repos_url": "https://api.github.com/users/benjeffery/repos", "events_url": "https://api.github.com/users/benjeffery/events{/privacy}", "received_events_url": "https://api.github.com/users/benjeffery/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 831518500, "node_id": "MDU6TGFiZWw4MzE1MTg1MDA=", "url": "https://api.github.com/repos/tskit-dev/tskit/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": {"login": "benjeffery", "id": 8552, "node_id": "MDQ6VXNlcjg1NTI=", "avatar_url": "https://avatars.githubusercontent.com/u/8552?v=4", "gravatar_id": "", "url": "https://api.github.com/users/benjeffery", "html_url": "https://github.com/benjeffery", "followers_url": "https://api.github.com/users/benjeffery/followers", "following_url": "https://api.github.com/users/benjeffery/following{/other_user}", "gists_url": "https://api.github.com/users/benjeffery/gists{/gist_id}", "starred_url": "https://api.github.com/users/benjeffery/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/benjeffery/subscriptions", "organizations_url": "https://api.github.com/users/benjeffery/orgs", "repos_url": "https://api.github.com/users/benjeffery/repos", "events_url": "https://api.github.com/users/benjeffery/events{/privacy}", "received_events_url": "https://api.github.com/users/benjeffery/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "benjeffery", "id": 8552, "node_id": "MDQ6VXNlcjg1NTI=", "avatar_url": "https://avatars.githubusercontent.com/u/8552?v=4", "gravatar_id": "", "url": "https://api.github.com/users/benjeffery", "html_url": "https://github.com/benjeffery", "followers_url": "https://api.github.com/users/benjeffery/followers", "following_url": "https://api.github.com/users/benjeffery/following{/other_user}", "gists_url": "https://api.github.com/users/benjeffery/gists{/gist_id}", "starred_url": "https://api.github.com/users/benjeffery/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/benjeffery/subscriptions", "organizations_url": "https://api.github.com/users/benjeffery/orgs", "repos_url": "https://api.github.com/users/benjeffery/repos", "events_url": "https://api.github.com/users/benjeffery/events{/privacy}", "received_events_url": "https://api.github.com/users/benjeffery/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/tskit-dev/tskit/milestones/8", "html_url": "https://github.com/tskit-dev/tskit/milestone/8", "labels_url": "https://api.github.com/repos/tskit-dev/tskit/milestones/8/labels", "id": 5098947, "node_id": "MDk6TWlsZXN0b25lNTA5ODk0Nw==", "number": 8, "title": "C API 0.99.3", "description": "", "creator": {"login": "jeromekelleher", "id": 2664569, "node_id": "MDQ6VXNlcjI2NjQ1Njk=", "avatar_url": "https://avatars.githubusercontent.com/u/2664569?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jeromekelleher", "html_url": "https://github.com/jeromekelleher", "followers_url": "https://api.github.com/users/jeromekelleher/followers", "following_url": "https://api.github.com/users/jeromekelleher/following{/other_user}", "gists_url": "https://api.github.com/users/jeromekelleher/gists{/gist_id}", "starred_url": "https://api.github.com/users/jeromekelleher/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jeromekelleher/subscriptions", "organizations_url": "https://api.github.com/users/jeromekelleher/orgs", "repos_url": "https://api.github.com/users/jeromekelleher/repos", "events_url": "https://api.github.com/users/jeromekelleher/events{/privacy}", "received_events_url": "https://api.github.com/users/jeromekelleher/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 17, "state": "closed", "created_at": "2020-02-12T17:28:19Z", "updated_at": "2020-07-29T12:58:11Z", "due_on": "2020-07-23T07:00:00Z", "closed_at": "2020-07-29T12:58:11Z"}, "comments": 2, "created_at": "2020-07-08T13:40:54Z", "updated_at": "2020-07-15T16:16:20Z", "closed_at": "2020-07-15T16:16:19Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "#496 added metadata to edges, however `table_sorter_sort_edges` doesn't sort the metadata, leading to edges' metadata being mixed.", "reactions": {"url": "https://api.github.com/repos/tskit-dev/tskit/issues/708/reactions", "total_count": 1, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/tskit-dev/tskit/issues/708/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/tskit-dev/tskit/issues/703", "repository_url": "https://api.github.com/repos/tskit-dev/tskit", "labels_url": "https://api.github.com/repos/tskit-dev/tskit/issues/703/labels{/name}", "comments_url": "https://api.github.com/repos/tskit-dev/tskit/issues/703/comments", "events_url": "https://api.github.com/repos/tskit-dev/tskit/issues/703/events", "html_url": "https://github.com/tskit-dev/tskit/issues/703", "id": 649716870, "node_id": "MDU6SXNzdWU2NDk3MTY4NzA=", "number": 703, "title": "RTD build broken by autosum", "user": {"login": "jeromekelleher", "id": 2664569, "node_id": "MDQ6VXNlcjI2NjQ1Njk=", "avatar_url": "https://avatars.githubusercontent.com/u/2664569?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jeromekelleher", "html_url": "https://github.com/jeromekelleher", "followers_url": "https://api.github.com/users/jeromekelleher/followers", "following_url": "https://api.github.com/users/jeromekelleher/following{/other_user}", "gists_url": "https://api.github.com/users/jeromekelleher/gists{/gist_id}", "starred_url": "https://api.github.com/users/jeromekelleher/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jeromekelleher/subscriptions", "organizations_url": "https://api.github.com/users/jeromekelleher/orgs", "repos_url": "https://api.github.com/users/jeromekelleher/repos", "events_url": "https://api.github.com/users/jeromekelleher/events{/privacy}", "received_events_url": "https://api.github.com/users/jeromekelleher/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 831518500, "node_id": "MDU6TGFiZWw4MzE1MTg1MDA=", "url": "https://api.github.com/repos/tskit-dev/tskit/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": {"login": "jeromekelleher", "id": 2664569, "node_id": "MDQ6VXNlcjI2NjQ1Njk=", "avatar_url": "https://avatars.githubusercontent.com/u/2664569?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jeromekelleher", "html_url": "https://github.com/jeromekelleher", "followers_url": "https://api.github.com/users/jeromekelleher/followers", "following_url": "https://api.github.com/users/jeromekelleher/following{/other_user}", "gists_url": "https://api.github.com/users/jeromekelleher/gists{/gist_id}", "starred_url": "https://api.github.com/users/jeromekelleher/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jeromekelleher/subscriptions", "organizations_url": "https://api.github.com/users/jeromekelleher/orgs", "repos_url": "https://api.github.com/users/jeromekelleher/repos", "events_url": "https://api.github.com/users/jeromekelleher/events{/privacy}", "received_events_url": "https://api.github.com/users/jeromekelleher/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "jeromekelleher", "id": 2664569, "node_id": "MDQ6VXNlcjI2NjQ1Njk=", "avatar_url": "https://avatars.githubusercontent.com/u/2664569?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jeromekelleher", "html_url": "https://github.com/jeromekelleher", "followers_url": "https://api.github.com/users/jeromekelleher/followers", "following_url": "https://api.github.com/users/jeromekelleher/following{/other_user}", "gists_url": "https://api.github.com/users/jeromekelleher/gists{/gist_id}", "starred_url": "https://api.github.com/users/jeromekelleher/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jeromekelleher/subscriptions", "organizations_url": "https://api.github.com/users/jeromekelleher/orgs", "repos_url": "https://api.github.com/users/jeromekelleher/repos", "events_url": "https://api.github.com/users/jeromekelleher/events{/privacy}", "received_events_url": "https://api.github.com/users/jeromekelleher/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/tskit-dev/tskit/milestones/7", "html_url": "https://github.com/tskit-dev/tskit/milestone/7", "labels_url": "https://api.github.com/repos/tskit-dev/tskit/milestones/7/labels", "id": 4607628, "node_id": "MDk6TWlsZXN0b25lNDYwNzYyOA==", "number": 7, "title": "Python 0.3.0", "description": "", "creator": {"login": "jeromekelleher", "id": 2664569, "node_id": "MDQ6VXNlcjI2NjQ1Njk=", "avatar_url": "https://avatars.githubusercontent.com/u/2664569?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jeromekelleher", "html_url": "https://github.com/jeromekelleher", "followers_url": "https://api.github.com/users/jeromekelleher/followers", "following_url": "https://api.github.com/users/jeromekelleher/following{/other_user}", "gists_url": "https://api.github.com/users/jeromekelleher/gists{/gist_id}", "starred_url": "https://api.github.com/users/jeromekelleher/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jeromekelleher/subscriptions", "organizations_url": "https://api.github.com/users/jeromekelleher/orgs", "repos_url": "https://api.github.com/users/jeromekelleher/repos", "events_url": "https://api.github.com/users/jeromekelleher/events{/privacy}", "received_events_url": "https://api.github.com/users/jeromekelleher/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 42, "state": "closed", "created_at": "2019-08-27T17:06:46Z", "updated_at": "2020-08-27T12:55:43Z", "due_on": "2020-08-27T07:00:00Z", "closed_at": "2020-08-27T12:55:43Z"}, "comments": 4, "created_at": "2020-07-02T07:51:50Z", "updated_at": "2020-07-02T23:42:12Z", "closed_at": "2020-07-02T23:42:12Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "#702 add a great feature to the docs, but we didn't add ``autodocsumm`` to the ``docs/rtd_requirements.txt`` file so the build is broken.\r\n\r\n(It's annoying this requirements file is separate from the other Python ones, but ``docs`` directory is separate so it seemed best to put its requirements there.)", "reactions": {"url": "https://api.github.com/repos/tskit-dev/tskit/issues/703/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/tskit-dev/tskit/issues/703/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/tskit-dev/tskit/issues/686", "repository_url": "https://api.github.com/repos/tskit-dev/tskit", "labels_url": "https://api.github.com/repos/tskit-dev/tskit/issues/686/labels{/name}", "comments_url": "https://api.github.com/repos/tskit-dev/tskit/issues/686/comments", "events_url": "https://api.github.com/repos/tskit-dev/tskit/issues/686/events", "html_url": "https://github.com/tskit-dev/tskit/issues/686", "id": 641069569, "node_id": "MDU6SXNzdWU2NDEwNjk1Njk=", "number": 686, "title": "Metadata schemas and top-level metadata not included in `asdict` and `fromdict`", "user": {"login": "benjeffery", "id": 8552, "node_id": "MDQ6VXNlcjg1NTI=", "avatar_url": "https://avatars.githubusercontent.com/u/8552?v=4", "gravatar_id": "", "url": "https://api.github.com/users/benjeffery", "html_url": "https://github.com/benjeffery", "followers_url": "https://api.github.com/users/benjeffery/followers", "following_url": "https://api.github.com/users/benjeffery/following{/other_user}", "gists_url": "https://api.github.com/users/benjeffery/gists{/gist_id}", "starred_url": "https://api.github.com/users/benjeffery/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/benjeffery/subscriptions", "organizations_url": "https://api.github.com/users/benjeffery/orgs", "repos_url": "https://api.github.com/users/benjeffery/repos", "events_url": "https://api.github.com/users/benjeffery/events{/privacy}", "received_events_url": "https://api.github.com/users/benjeffery/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 831518500, "node_id": "MDU6TGFiZWw4MzE1MTg1MDA=", "url": "https://api.github.com/repos/tskit-dev/tskit/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": {"login": "benjeffery", "id": 8552, "node_id": "MDQ6VXNlcjg1NTI=", "avatar_url": "https://avatars.githubusercontent.com/u/8552?v=4", "gravatar_id": "", "url": "https://api.github.com/users/benjeffery", "html_url": "https://github.com/benjeffery", "followers_url": "https://api.github.com/users/benjeffery/followers", "following_url": "https://api.github.com/users/benjeffery/following{/other_user}", "gists_url": "https://api.github.com/users/benjeffery/gists{/gist_id}", "starred_url": "https://api.github.com/users/benjeffery/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/benjeffery/subscriptions", "organizations_url": "https://api.github.com/users/benjeffery/orgs", "repos_url": "https://api.github.com/users/benjeffery/repos", "events_url": "https://api.github.com/users/benjeffery/events{/privacy}", "received_events_url": "https://api.github.com/users/benjeffery/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "benjeffery", "id": 8552, "node_id": "MDQ6VXNlcjg1NTI=", "avatar_url": "https://avatars.githubusercontent.com/u/8552?v=4", "gravatar_id": "", "url": "https://api.github.com/users/benjeffery", "html_url": "https://github.com/benjeffery", "followers_url": "https://api.github.com/users/benjeffery/followers", "following_url": "https://api.github.com/users/benjeffery/following{/other_user}", "gists_url": "https://api.github.com/users/benjeffery/gists{/gist_id}", "starred_url": "https://api.github.com/users/benjeffery/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/benjeffery/subscriptions", "organizations_url": "https://api.github.com/users/benjeffery/orgs", "repos_url": "https://api.github.com/users/benjeffery/repos", "events_url": "https://api.github.com/users/benjeffery/events{/privacy}", "received_events_url": "https://api.github.com/users/benjeffery/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/tskit-dev/tskit/milestones/7", "html_url": "https://github.com/tskit-dev/tskit/milestone/7", "labels_url": "https://api.github.com/repos/tskit-dev/tskit/milestones/7/labels", "id": 4607628, "node_id": "MDk6TWlsZXN0b25lNDYwNzYyOA==", "number": 7, "title": "Python 0.3.0", "description": "", "creator": {"login": "jeromekelleher", "id": 2664569, "node_id": "MDQ6VXNlcjI2NjQ1Njk=", "avatar_url": "https://avatars.githubusercontent.com/u/2664569?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jeromekelleher", "html_url": "https://github.com/jeromekelleher", "followers_url": "https://api.github.com/users/jeromekelleher/followers", "following_url": "https://api.github.com/users/jeromekelleher/following{/other_user}", "gists_url": "https://api.github.com/users/jeromekelleher/gists{/gist_id}", "starred_url": "https://api.github.com/users/jeromekelleher/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jeromekelleher/subscriptions", "organizations_url": "https://api.github.com/users/jeromekelleher/orgs", "repos_url": "https://api.github.com/users/jeromekelleher/repos", "events_url": "https://api.github.com/users/jeromekelleher/events{/privacy}", "received_events_url": "https://api.github.com/users/jeromekelleher/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 42, "state": "closed", "created_at": "2019-08-27T17:06:46Z", "updated_at": "2020-08-27T12:55:43Z", "due_on": "2020-08-27T07:00:00Z", "closed_at": "2020-08-27T12:55:43Z"}, "comments": 1, "created_at": "2020-06-18T09:50:07Z", "updated_at": "2020-06-30T00:18:39Z", "closed_at": "2020-06-30T00:18:39Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "I'm pretty sure they should be as other wise they will silently disappear in some workflows.", "reactions": {"url": "https://api.github.com/repos/tskit-dev/tskit/issues/686/reactions", "total_count": 1, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/tskit-dev/tskit/issues/686/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/tskit-dev/tskit/issues/673", "repository_url": "https://api.github.com/repos/tskit-dev/tskit", "labels_url": "https://api.github.com/repos/tskit-dev/tskit/issues/673/labels{/name}", "comments_url": "https://api.github.com/repos/tskit-dev/tskit/issues/673/comments", "events_url": "https://api.github.com/repos/tskit-dev/tskit/issues/673/events", "html_url": "https://github.com/tskit-dev/tskit/issues/673", "id": 634320369, "node_id": "MDU6SXNzdWU2MzQzMjAzNjk=", "number": 673, "title": "Pysam builds on Travis Linux broken", "user": {"login": "jeromekelleher", "id": 2664569, "node_id": "MDQ6VXNlcjI2NjQ1Njk=", "avatar_url": "https://avatars.githubusercontent.com/u/2664569?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jeromekelleher", "html_url": "https://github.com/jeromekelleher", "followers_url": "https://api.github.com/users/jeromekelleher/followers", "following_url": "https://api.github.com/users/jeromekelleher/following{/other_user}", "gists_url": "https://api.github.com/users/jeromekelleher/gists{/gist_id}", "starred_url": "https://api.github.com/users/jeromekelleher/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jeromekelleher/subscriptions", "organizations_url": "https://api.github.com/users/jeromekelleher/orgs", "repos_url": "https://api.github.com/users/jeromekelleher/repos", "events_url": "https://api.github.com/users/jeromekelleher/events{/privacy}", "received_events_url": "https://api.github.com/users/jeromekelleher/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 831518500, "node_id": "MDU6TGFiZWw4MzE1MTg1MDA=", "url": "https://api.github.com/repos/tskit-dev/tskit/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": {"login": "benjeffery", "id": 8552, "node_id": "MDQ6VXNlcjg1NTI=", "avatar_url": "https://avatars.githubusercontent.com/u/8552?v=4", "gravatar_id": "", "url": "https://api.github.com/users/benjeffery", "html_url": "https://github.com/benjeffery", "followers_url": "https://api.github.com/users/benjeffery/followers", "following_url": "https://api.github.com/users/benjeffery/following{/other_user}", "gists_url": "https://api.github.com/users/benjeffery/gists{/gist_id}", "starred_url": "https://api.github.com/users/benjeffery/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/benjeffery/subscriptions", "organizations_url": "https://api.github.com/users/benjeffery/orgs", "repos_url": "https://api.github.com/users/benjeffery/repos", "events_url": "https://api.github.com/users/benjeffery/events{/privacy}", "received_events_url": "https://api.github.com/users/benjeffery/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "benjeffery", "id": 8552, "node_id": "MDQ6VXNlcjg1NTI=", "avatar_url": "https://avatars.githubusercontent.com/u/8552?v=4", "gravatar_id": "", "url": "https://api.github.com/users/benjeffery", "html_url": "https://github.com/benjeffery", "followers_url": "https://api.github.com/users/benjeffery/followers", "following_url": "https://api.github.com/users/benjeffery/following{/other_user}", "gists_url": "https://api.github.com/users/benjeffery/gists{/gist_id}", "starred_url": "https://api.github.com/users/benjeffery/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/benjeffery/subscriptions", "organizations_url": "https://api.github.com/users/benjeffery/orgs", "repos_url": "https://api.github.com/users/benjeffery/repos", "events_url": "https://api.github.com/users/benjeffery/events{/privacy}", "received_events_url": "https://api.github.com/users/benjeffery/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 2, "created_at": "2020-06-08T07:55:07Z", "updated_at": "2020-06-08T13:48:58Z", "closed_at": "2020-06-08T13:48:58Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "Pysam 0.16 was just [released](https://github.com/pysam-developers/pysam/releases/tag/v0.16.0) and our builds on Travis/Linux are now [breaking](https://travis-ci.org/github/tskit-dev/tskit/jobs/695900915).\r\n\r\nA quick fix would be to pin at version 0.15, but it might be better to pull pysam from bioconda instead? I'm sure there was a lot of to-ing and fro-ing to get this working in the first place, so obvious solutions may already have bee tried.", "reactions": {"url": "https://api.github.com/repos/tskit-dev/tskit/issues/673/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/tskit-dev/tskit/issues/673/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/tskit-dev/tskit/issues/625", "repository_url": "https://api.github.com/repos/tskit-dev/tskit", "labels_url": "https://api.github.com/repos/tskit-dev/tskit/issues/625/labels{/name}", "comments_url": "https://api.github.com/repos/tskit-dev/tskit/issues/625/comments", "events_url": "https://api.github.com/repos/tskit-dev/tskit/issues/625/events", "html_url": "https://github.com/tskit-dev/tskit/issues/625", "id": 621054878, "node_id": "MDU6SXNzdWU2MjEwNTQ4Nzg=", "number": 625, "title": "Node colours not appearing Tree.draw SVG", "user": {"login": "daniel-goldstein", "id": 24440116, "node_id": "MDQ6VXNlcjI0NDQwMTE2", "avatar_url": "https://avatars.githubusercontent.com/u/24440116?v=4", "gravatar_id": "", "url": "https://api.github.com/users/daniel-goldstein", "html_url": "https://github.com/daniel-goldstein", "followers_url": "https://api.github.com/users/daniel-goldstein/followers", "following_url": "https://api.github.com/users/daniel-goldstein/following{/other_user}", "gists_url": "https://api.github.com/users/daniel-goldstein/gists{/gist_id}", "starred_url": "https://api.github.com/users/daniel-goldstein/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/daniel-goldstein/subscriptions", "organizations_url": "https://api.github.com/users/daniel-goldstein/orgs", "repos_url": "https://api.github.com/users/daniel-goldstein/repos", "events_url": "https://api.github.com/users/daniel-goldstein/events{/privacy}", "received_events_url": "https://api.github.com/users/daniel-goldstein/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 831518500, "node_id": "MDU6TGFiZWw4MzE1MTg1MDA=", "url": "https://api.github.com/repos/tskit-dev/tskit/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 8, "created_at": "2020-05-19T15:06:36Z", "updated_at": "2020-05-21T23:50:03Z", "closed_at": "2020-05-21T23:50:03Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "When I use the `node_colours` option on `Tree.draw`, the resulting SVG contains the the appropriate `fill=\"blue\"` or `fill=\"red\"` but are not being drawn correctly, seen below.\r\n\r\n![Screen Shot 2020-05-19 at 11 00 19 AM](https://user-images.githubusercontent.com/24440116/82343070-6118b080-99c0-11ea-9eb7-56bd9f834dfa.png)\r\n\r\n@hyanwong Do you have an idea of what's happening here?", "reactions": {"url": "https://api.github.com/repos/tskit-dev/tskit/issues/625/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/tskit-dev/tskit/issues/625/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/tskit-dev/tskit/issues/598", "repository_url": "https://api.github.com/repos/tskit-dev/tskit", "labels_url": "https://api.github.com/repos/tskit-dev/tskit/issues/598/labels{/name}", "comments_url": "https://api.github.com/repos/tskit-dev/tskit/issues/598/comments", "events_url": "https://api.github.com/repos/tskit-dev/tskit/issues/598/events", "html_url": "https://github.com/tskit-dev/tskit/issues/598", "id": 614957127, "node_id": "MDU6SXNzdWU2MTQ5NTcxMjc=", "number": 598, "title": "KC Distance seg faults on non-sample leaves", "user": {"login": "daniel-goldstein", "id": 24440116, "node_id": "MDQ6VXNlcjI0NDQwMTE2", "avatar_url": "https://avatars.githubusercontent.com/u/24440116?v=4", "gravatar_id": "", "url": "https://api.github.com/users/daniel-goldstein", "html_url": "https://github.com/daniel-goldstein", "followers_url": "https://api.github.com/users/daniel-goldstein/followers", "following_url": "https://api.github.com/users/daniel-goldstein/following{/other_user}", "gists_url": "https://api.github.com/users/daniel-goldstein/gists{/gist_id}", "starred_url": "https://api.github.com/users/daniel-goldstein/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/daniel-goldstein/subscriptions", "organizations_url": "https://api.github.com/users/daniel-goldstein/orgs", "repos_url": "https://api.github.com/users/daniel-goldstein/repos", "events_url": "https://api.github.com/users/daniel-goldstein/events{/privacy}", "received_events_url": "https://api.github.com/users/daniel-goldstein/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 831518500, "node_id": "MDU6TGFiZWw4MzE1MTg1MDA=", "url": "https://api.github.com/repos/tskit-dev/tskit/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": {"login": "daniel-goldstein", "id": 24440116, "node_id": "MDQ6VXNlcjI0NDQwMTE2", "avatar_url": "https://avatars.githubusercontent.com/u/24440116?v=4", "gravatar_id": "", "url": "https://api.github.com/users/daniel-goldstein", "html_url": "https://github.com/daniel-goldstein", "followers_url": "https://api.github.com/users/daniel-goldstein/followers", "following_url": "https://api.github.com/users/daniel-goldstein/following{/other_user}", "gists_url": "https://api.github.com/users/daniel-goldstein/gists{/gist_id}", "starred_url": "https://api.github.com/users/daniel-goldstein/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/daniel-goldstein/subscriptions", "organizations_url": "https://api.github.com/users/daniel-goldstein/orgs", "repos_url": "https://api.github.com/users/daniel-goldstein/repos", "events_url": "https://api.github.com/users/daniel-goldstein/events{/privacy}", "received_events_url": "https://api.github.com/users/daniel-goldstein/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "daniel-goldstein", "id": 24440116, "node_id": "MDQ6VXNlcjI0NDQwMTE2", "avatar_url": "https://avatars.githubusercontent.com/u/24440116?v=4", "gravatar_id": "", "url": "https://api.github.com/users/daniel-goldstein", "html_url": "https://github.com/daniel-goldstein", "followers_url": "https://api.github.com/users/daniel-goldstein/followers", "following_url": "https://api.github.com/users/daniel-goldstein/following{/other_user}", "gists_url": "https://api.github.com/users/daniel-goldstein/gists{/gist_id}", "starred_url": "https://api.github.com/users/daniel-goldstein/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/daniel-goldstein/subscriptions", "organizations_url": "https://api.github.com/users/daniel-goldstein/orgs", "repos_url": "https://api.github.com/users/daniel-goldstein/repos", "events_url": "https://api.github.com/users/daniel-goldstein/events{/privacy}", "received_events_url": "https://api.github.com/users/daniel-goldstein/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/tskit-dev/tskit/milestones/7", "html_url": "https://github.com/tskit-dev/tskit/milestone/7", "labels_url": "https://api.github.com/repos/tskit-dev/tskit/milestones/7/labels", "id": 4607628, "node_id": "MDk6TWlsZXN0b25lNDYwNzYyOA==", "number": 7, "title": "Python 0.3.0", "description": "", "creator": {"login": "jeromekelleher", "id": 2664569, "node_id": "MDQ6VXNlcjI2NjQ1Njk=", "avatar_url": "https://avatars.githubusercontent.com/u/2664569?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jeromekelleher", "html_url": "https://github.com/jeromekelleher", "followers_url": "https://api.github.com/users/jeromekelleher/followers", "following_url": "https://api.github.com/users/jeromekelleher/following{/other_user}", "gists_url": "https://api.github.com/users/jeromekelleher/gists{/gist_id}", "starred_url": "https://api.github.com/users/jeromekelleher/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jeromekelleher/subscriptions", "organizations_url": "https://api.github.com/users/jeromekelleher/orgs", "repos_url": "https://api.github.com/users/jeromekelleher/repos", "events_url": "https://api.github.com/users/jeromekelleher/events{/privacy}", "received_events_url": "https://api.github.com/users/jeromekelleher/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 42, "state": "closed", "created_at": "2019-08-27T17:06:46Z", "updated_at": "2020-08-27T12:55:43Z", "due_on": "2020-08-27T07:00:00Z", "closed_at": "2020-08-27T12:55:43Z"}, "comments": 2, "created_at": "2020-05-08T20:03:46Z", "updated_at": "2020-05-14T14:21:31Z", "closed_at": "2020-05-14T14:21:30Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "Likely stems from the synonymous use of leaf and sample everywhere, which is not very consistent or correct. Related to #575", "reactions": {"url": "https://api.github.com/repos/tskit-dev/tskit/issues/598/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/tskit-dev/tskit/issues/598/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/tskit-dev/tskit/issues/571", "repository_url": "https://api.github.com/repos/tskit-dev/tskit", "labels_url": "https://api.github.com/repos/tskit-dev/tskit/issues/571/labels{/name}", "comments_url": "https://api.github.com/repos/tskit-dev/tskit/issues/571/comments", "events_url": "https://api.github.com/repos/tskit-dev/tskit/issues/571/events", "html_url": "https://github.com/tskit-dev/tskit/issues/571", "id": 611268671, "node_id": "MDU6SXNzdWU2MTEyNjg2NzE=", "number": 571, "title": "draw_svg assert failure for medium-sizes tree sequences", "user": {"login": "hyanwong", "id": 4699014, "node_id": "MDQ6VXNlcjQ2OTkwMTQ=", "avatar_url": "https://avatars.githubusercontent.com/u/4699014?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hyanwong", "html_url": "https://github.com/hyanwong", "followers_url": "https://api.github.com/users/hyanwong/followers", "following_url": "https://api.github.com/users/hyanwong/following{/other_user}", "gists_url": "https://api.github.com/users/hyanwong/gists{/gist_id}", "starred_url": "https://api.github.com/users/hyanwong/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hyanwong/subscriptions", "organizations_url": "https://api.github.com/users/hyanwong/orgs", "repos_url": "https://api.github.com/users/hyanwong/repos", "events_url": "https://api.github.com/users/hyanwong/events{/privacy}", "received_events_url": "https://api.github.com/users/hyanwong/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 831518500, "node_id": "MDU6TGFiZWw4MzE1MTg1MDA=", "url": "https://api.github.com/repos/tskit-dev/tskit/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": {"login": "jeromekelleher", "id": 2664569, "node_id": "MDQ6VXNlcjI2NjQ1Njk=", "avatar_url": "https://avatars.githubusercontent.com/u/2664569?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jeromekelleher", "html_url": "https://github.com/jeromekelleher", "followers_url": "https://api.github.com/users/jeromekelleher/followers", "following_url": "https://api.github.com/users/jeromekelleher/following{/other_user}", "gists_url": "https://api.github.com/users/jeromekelleher/gists{/gist_id}", "starred_url": "https://api.github.com/users/jeromekelleher/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jeromekelleher/subscriptions", "organizations_url": "https://api.github.com/users/jeromekelleher/orgs", "repos_url": "https://api.github.com/users/jeromekelleher/repos", "events_url": "https://api.github.com/users/jeromekelleher/events{/privacy}", "received_events_url": "https://api.github.com/users/jeromekelleher/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "jeromekelleher", "id": 2664569, "node_id": "MDQ6VXNlcjI2NjQ1Njk=", "avatar_url": "https://avatars.githubusercontent.com/u/2664569?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jeromekelleher", "html_url": "https://github.com/jeromekelleher", "followers_url": "https://api.github.com/users/jeromekelleher/followers", "following_url": "https://api.github.com/users/jeromekelleher/following{/other_user}", "gists_url": "https://api.github.com/users/jeromekelleher/gists{/gist_id}", "starred_url": "https://api.github.com/users/jeromekelleher/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jeromekelleher/subscriptions", "organizations_url": "https://api.github.com/users/jeromekelleher/orgs", "repos_url": "https://api.github.com/users/jeromekelleher/repos", "events_url": "https://api.github.com/users/jeromekelleher/events{/privacy}", "received_events_url": "https://api.github.com/users/jeromekelleher/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 1, "created_at": "2020-05-02T20:33:49Z", "updated_at": "2020-05-03T23:03:19Z", "closed_at": "2020-05-03T23:03:19Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "On the current master branch\r\n\r\n```\r\nimport msprime\r\nts = msprime.simulate(200, recombination_rate=10, random_seed=1)\r\nts.draw_svg()\r\n```\r\n\r\nGives\r\n\r\n```\r\n File \"tskit/python/tskit/drawing.py\", line 439, in assign_x_coordinates\r\n    assert b - a > 1\r\n```\r\n\r\nThis is not a huge TS really: we should be able to plot something like this. The `assign_x_coordinates` stuff was written by @jeromekelleher I think, so he might know immediately why it fails.", "reactions": {"url": "https://api.github.com/repos/tskit-dev/tskit/issues/571/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/tskit-dev/tskit/issues/571/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/tskit-dev/tskit/issues/528", "repository_url": "https://api.github.com/repos/tskit-dev/tskit", "labels_url": "https://api.github.com/repos/tskit-dev/tskit/issues/528/labels{/name}", "comments_url": "https://api.github.com/repos/tskit-dev/tskit/issues/528/comments", "events_url": "https://api.github.com/repos/tskit-dev/tskit/issues/528/events", "html_url": "https://github.com/tskit-dev/tskit/issues/528", "id": 598280857, "node_id": "MDU6SXNzdWU1OTgyODA4NTc=", "number": 528, "title": "[C API] Missing error check on table_x_copy", "user": {"login": "jeromekelleher", "id": 2664569, "node_id": "MDQ6VXNlcjI2NjQ1Njk=", "avatar_url": "https://avatars.githubusercontent.com/u/2664569?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jeromekelleher", "html_url": "https://github.com/jeromekelleher", "followers_url": "https://api.github.com/users/jeromekelleher/followers", "following_url": "https://api.github.com/users/jeromekelleher/following{/other_user}", "gists_url": "https://api.github.com/users/jeromekelleher/gists{/gist_id}", "starred_url": "https://api.github.com/users/jeromekelleher/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jeromekelleher/subscriptions", "organizations_url": "https://api.github.com/users/jeromekelleher/orgs", "repos_url": "https://api.github.com/users/jeromekelleher/repos", "events_url": "https://api.github.com/users/jeromekelleher/events{/privacy}", "received_events_url": "https://api.github.com/users/jeromekelleher/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 831518500, "node_id": "MDU6TGFiZWw4MzE1MTg1MDA=", "url": "https://api.github.com/repos/tskit-dev/tskit/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}, {"id": 1184840738, "node_id": "MDU6TGFiZWwxMTg0ODQwNzM4", "url": "https://api.github.com/repos/tskit-dev/tskit/labels/C%20API", "name": "C API", "color": "1d76db", "default": false, "description": "Issue is about the C API"}], "state": "closed", "locked": false, "assignee": {"login": "jeromekelleher", "id": 2664569, "node_id": "MDQ6VXNlcjI2NjQ1Njk=", "avatar_url": "https://avatars.githubusercontent.com/u/2664569?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jeromekelleher", "html_url": "https://github.com/jeromekelleher", "followers_url": "https://api.github.com/users/jeromekelleher/followers", "following_url": "https://api.github.com/users/jeromekelleher/following{/other_user}", "gists_url": "https://api.github.com/users/jeromekelleher/gists{/gist_id}", "starred_url": "https://api.github.com/users/jeromekelleher/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jeromekelleher/subscriptions", "organizations_url": "https://api.github.com/users/jeromekelleher/orgs", "repos_url": "https://api.github.com/users/jeromekelleher/repos", "events_url": "https://api.github.com/users/jeromekelleher/events{/privacy}", "received_events_url": "https://api.github.com/users/jeromekelleher/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "jeromekelleher", "id": 2664569, "node_id": "MDQ6VXNlcjI2NjQ1Njk=", "avatar_url": "https://avatars.githubusercontent.com/u/2664569?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jeromekelleher", "html_url": "https://github.com/jeromekelleher", "followers_url": "https://api.github.com/users/jeromekelleher/followers", "following_url": "https://api.github.com/users/jeromekelleher/following{/other_user}", "gists_url": "https://api.github.com/users/jeromekelleher/gists{/gist_id}", "starred_url": "https://api.github.com/users/jeromekelleher/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jeromekelleher/subscriptions", "organizations_url": "https://api.github.com/users/jeromekelleher/orgs", "repos_url": "https://api.github.com/users/jeromekelleher/repos", "events_url": "https://api.github.com/users/jeromekelleher/events{/privacy}", "received_events_url": "https://api.github.com/users/jeromekelleher/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2020-04-11T14:48:37Z", "updated_at": "2020-04-16T08:52:59Z", "closed_at": "2020-04-16T08:52:59Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "e.g. https://github.com/tskit-dev/tskit/blob/5f58b6186993cc5e635c621ee6e7c7a62aab8649/c/tskit/tables.c#L1410-L1413", "reactions": {"url": "https://api.github.com/repos/tskit-dev/tskit/issues/528/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/tskit-dev/tskit/issues/528/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/tskit-dev/tskit/issues/527", "repository_url": "https://api.github.com/repos/tskit-dev/tskit", "labels_url": "https://api.github.com/repos/tskit-dev/tskit/issues/527/labels{/name}", "comments_url": "https://api.github.com/repos/tskit-dev/tskit/issues/527/comments", "events_url": "https://api.github.com/repos/tskit-dev/tskit/issues/527/events", "html_url": "https://github.com/tskit-dev/tskit/issues/527", "id": 598062768, "node_id": "MDU6SXNzdWU1OTgwNjI3Njg=", "number": 527, "title": "tree sequence with edges has no edges on load", "user": {"login": "petrelharp", "id": 1046249, "node_id": "MDQ6VXNlcjEwNDYyNDk=", "avatar_url": "https://avatars.githubusercontent.com/u/1046249?v=4", "gravatar_id": "", "url": "https://api.github.com/users/petrelharp", "html_url": "https://github.com/petrelharp", "followers_url": "https://api.github.com/users/petrelharp/followers", "following_url": "https://api.github.com/users/petrelharp/following{/other_user}", "gists_url": "https://api.github.com/users/petrelharp/gists{/gist_id}", "starred_url": "https://api.github.com/users/petrelharp/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/petrelharp/subscriptions", "organizations_url": "https://api.github.com/users/petrelharp/orgs", "repos_url": "https://api.github.com/users/petrelharp/repos", "events_url": "https://api.github.com/users/petrelharp/events{/privacy}", "received_events_url": "https://api.github.com/users/petrelharp/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 831518500, "node_id": "MDU6TGFiZWw4MzE1MTg1MDA=", "url": "https://api.github.com/repos/tskit-dev/tskit/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": {"login": "benjeffery", "id": 8552, "node_id": "MDQ6VXNlcjg1NTI=", "avatar_url": "https://avatars.githubusercontent.com/u/8552?v=4", "gravatar_id": "", "url": "https://api.github.com/users/benjeffery", "html_url": "https://github.com/benjeffery", "followers_url": "https://api.github.com/users/benjeffery/followers", "following_url": "https://api.github.com/users/benjeffery/following{/other_user}", "gists_url": "https://api.github.com/users/benjeffery/gists{/gist_id}", "starred_url": "https://api.github.com/users/benjeffery/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/benjeffery/subscriptions", "organizations_url": "https://api.github.com/users/benjeffery/orgs", "repos_url": "https://api.github.com/users/benjeffery/repos", "events_url": "https://api.github.com/users/benjeffery/events{/privacy}", "received_events_url": "https://api.github.com/users/benjeffery/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "benjeffery", "id": 8552, "node_id": "MDQ6VXNlcjg1NTI=", "avatar_url": "https://avatars.githubusercontent.com/u/8552?v=4", "gravatar_id": "", "url": "https://api.github.com/users/benjeffery", "html_url": "https://github.com/benjeffery", "followers_url": "https://api.github.com/users/benjeffery/followers", "following_url": "https://api.github.com/users/benjeffery/following{/other_user}", "gists_url": "https://api.github.com/users/benjeffery/gists{/gist_id}", "starred_url": "https://api.github.com/users/benjeffery/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/benjeffery/subscriptions", "organizations_url": "https://api.github.com/users/benjeffery/orgs", "repos_url": "https://api.github.com/users/benjeffery/repos", "events_url": "https://api.github.com/users/benjeffery/events{/privacy}", "received_events_url": "https://api.github.com/users/benjeffery/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/tskit-dev/tskit/milestones/8", "html_url": "https://github.com/tskit-dev/tskit/milestone/8", "labels_url": "https://api.github.com/repos/tskit-dev/tskit/milestones/8/labels", "id": 5098947, "node_id": "MDk6TWlsZXN0b25lNTA5ODk0Nw==", "number": 8, "title": "C API 0.99.3", "description": "", "creator": {"login": "jeromekelleher", "id": 2664569, "node_id": "MDQ6VXNlcjI2NjQ1Njk=", "avatar_url": "https://avatars.githubusercontent.com/u/2664569?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jeromekelleher", "html_url": "https://github.com/jeromekelleher", "followers_url": "https://api.github.com/users/jeromekelleher/followers", "following_url": "https://api.github.com/users/jeromekelleher/following{/other_user}", "gists_url": "https://api.github.com/users/jeromekelleher/gists{/gist_id}", "starred_url": "https://api.github.com/users/jeromekelleher/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jeromekelleher/subscriptions", "organizations_url": "https://api.github.com/users/jeromekelleher/orgs", "repos_url": "https://api.github.com/users/jeromekelleher/repos", "events_url": "https://api.github.com/users/jeromekelleher/events{/privacy}", "received_events_url": "https://api.github.com/users/jeromekelleher/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 17, "state": "closed", "created_at": "2020-02-12T17:28:19Z", "updated_at": "2020-07-29T12:58:11Z", "due_on": "2020-07-23T07:00:00Z", "closed_at": "2020-07-29T12:58:11Z"}, "comments": 2, "created_at": "2020-04-10T19:48:57Z", "updated_at": "2020-04-16T08:52:58Z", "closed_at": "2020-04-16T08:52:58Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "With the current HEAD, it seems that SLiM-produced tree sequences - which have edges - are not loaded with edges. For instance, running [this SLiM script](https://raw.githubusercontent.com/tskit-dev/pyslim/master/tests/examples/recipe_nonWF.slim):\r\n```\r\nwget https://raw.githubusercontent.com/tskit-dev/pyslim/master/tests/examples/recipe_nonWF.slim\r\nslim recipe_nonWF.slim\r\ntskit info recipe_nonWF.trees\r\n```\r\ntells me there are no edges:\r\n```\r\nsequence_length:  100.0\r\ntrees:            1\r\nsamples:          28\r\nindividuals:      24\r\nnodes:            58\r\nedges:            0\r\nsites:            33\r\nmutations:        40\r\nmigrations:       0\r\npopulations:      2\r\nprovenances:      1\r\n```\r\nbut there **should** be, and kastore confirms it:\r\n```\r\nkastore dump recipe_nonWF.trees edges/parent | wc -l\r\n# 93\r\n```\r\n\r\nI bisected this, and found that this got introduced somewhere in these commits:\r\n```\r\nf53ff61344dbe15184a065daf43600623c286dea\r\nd73d85a3c1d8c5c2bc4f4a0174dd5b85fb8834a9\r\nfa35ef554aa43290f1d021ef6792c0ad85be8baf\r\n0161fb30ffb4f4a65a8240da004a374a2fb743fe\r\n4b285a5a70b71ff1fa63c9c12f3044ab0d3abafb\r\ncbeb1297962400a1004b519da78ed4aa5785d163\r\n```\r\n\r\nI can't tell *which* of these commits, though, because trying to load the tree sequence at any of these commits results in this error:\r\n```\r\n$ tskit info recipe_nonWF.trees \r\nTraceback (most recent call last):\r\n  File \"/home/peter/.local/bin/tskit\", line 11, in <module>\r\n    load_entry_point('tskit==0.2.4.dev0', 'console_scripts', 'tskit')()\r\n  File \"/home/peter/.local/lib/python3.7/site-packages/tskit-0.2.4.dev0-py3.7-linux-x86_64.egg/tskit/cli.py\", line 281, in tskit_main\r\n    args.runner(args)\r\n  File \"/home/peter/.local/lib/python3.7/site-packages/tskit-0.2.4.dev0-py3.7-linux-x86_64.egg/tskit/cli.py\", line 54, in run_info\r\n    ts = load_tree_sequence(args.tree_sequence)\r\n  File \"/home/peter/.local/lib/python3.7/site-packages/tskit-0.2.4.dev0-py3.7-linux-x86_64.egg/tskit/cli.py\", line 48, in load_tree_sequence\r\n    return tskit.load(path)\r\n  File \"/home/peter/.local/lib/python3.7/site-packages/tskit-0.2.4.dev0-py3.7-linux-x86_64.egg/tskit/trees.py\", line 1805, in load\r\n    return TreeSequence.load(path)\r\n  File \"/home/peter/.local/lib/python3.7/site-packages/tskit-0.2.4.dev0-py3.7-linux-x86_64.egg/tskit/trees.py\", line 2385, in load\r\n    ts.load(str(path))\r\n_tskit.LibraryError: Bad offset provided in input array\r\n```\r\nSo, my guess is that f53ff61344dbe15184a065daf43600623c286dea introduced this \"bad offset\" bug, and cbeb1297962400a1004b519da78ed4aa5785d163 fixed it but introduced a different bug.\r\n\r\nI've inserted some `fprintf()`s into `tsk_edge_table_load` and `read_table_cols`, and verified that at [this point](https://github.com/tskit-dev/tskit/blob/master/c/tskit/tables.c#L107) there are in fact edges being read in. I haven't gone further down the path to figure out where things are going wrong, though.\r\n\r\nI know this is HEAD, but it's still not good to be silently getting bad tree sequences.", "reactions": {"url": "https://api.github.com/repos/tskit-dev/tskit/issues/527/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/tskit-dev/tskit/issues/527/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/tskit-dev/tskit/issues/467", "repository_url": "https://api.github.com/repos/tskit-dev/tskit", "labels_url": "https://api.github.com/repos/tskit-dev/tskit/issues/467/labels{/name}", "comments_url": "https://api.github.com/repos/tskit-dev/tskit/issues/467/comments", "events_url": "https://api.github.com/repos/tskit-dev/tskit/issues/467/events", "html_url": "https://github.com/tskit-dev/tskit/issues/467", "id": 577681426, "node_id": "MDU6SXNzdWU1Nzc2ODE0MjY=", "number": 467, "title": "SVG IDs not unique and being cached by Jupyter", "user": {"login": "gtsambos", "id": 17755074, "node_id": "MDQ6VXNlcjE3NzU1MDc0", "avatar_url": "https://avatars.githubusercontent.com/u/17755074?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gtsambos", "html_url": "https://github.com/gtsambos", "followers_url": "https://api.github.com/users/gtsambos/followers", "following_url": "https://api.github.com/users/gtsambos/following{/other_user}", "gists_url": "https://api.github.com/users/gtsambos/gists{/gist_id}", "starred_url": "https://api.github.com/users/gtsambos/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gtsambos/subscriptions", "organizations_url": "https://api.github.com/users/gtsambos/orgs", "repos_url": "https://api.github.com/users/gtsambos/repos", "events_url": "https://api.github.com/users/gtsambos/events{/privacy}", "received_events_url": "https://api.github.com/users/gtsambos/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 831518500, "node_id": "MDU6TGFiZWw4MzE1MTg1MDA=", "url": "https://api.github.com/repos/tskit-dev/tskit/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/tskit-dev/tskit/milestones/7", "html_url": "https://github.com/tskit-dev/tskit/milestone/7", "labels_url": "https://api.github.com/repos/tskit-dev/tskit/milestones/7/labels", "id": 4607628, "node_id": "MDk6TWlsZXN0b25lNDYwNzYyOA==", "number": 7, "title": "Python 0.3.0", "description": "", "creator": {"login": "jeromekelleher", "id": 2664569, "node_id": "MDQ6VXNlcjI2NjQ1Njk=", "avatar_url": "https://avatars.githubusercontent.com/u/2664569?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jeromekelleher", "html_url": "https://github.com/jeromekelleher", "followers_url": "https://api.github.com/users/jeromekelleher/followers", "following_url": "https://api.github.com/users/jeromekelleher/following{/other_user}", "gists_url": "https://api.github.com/users/jeromekelleher/gists{/gist_id}", "starred_url": "https://api.github.com/users/jeromekelleher/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jeromekelleher/subscriptions", "organizations_url": "https://api.github.com/users/jeromekelleher/orgs", "repos_url": "https://api.github.com/users/jeromekelleher/repos", "events_url": "https://api.github.com/users/jeromekelleher/events{/privacy}", "received_events_url": "https://api.github.com/users/jeromekelleher/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 42, "state": "closed", "created_at": "2019-08-27T17:06:46Z", "updated_at": "2020-08-27T12:55:43Z", "due_on": "2020-08-27T07:00:00Z", "closed_at": "2020-08-27T12:55:43Z"}, "comments": 14, "created_at": "2020-03-09T06:10:53Z", "updated_at": "2020-05-05T23:03:54Z", "closed_at": "2020-05-05T23:03:54Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "Hi everyone! I keep finding that when I use `draw_svg` several times in the same Jupyter notebook, I get odd (wrong) drawings that are always wrong in the same way. An example is below:\r\n\r\n![Screen Shot 2020-03-09 at 5 04 00 pm](https://user-images.githubusercontent.com/17755074/76186947-0c222680-6228-11ea-8919-607cb217bf96.png)\r\n\r\nIn the notebook shown above, I have two difference tree sequence objects, `ts0` and `ts1`, that I wish to draw. Using `draw_svg` with `ts0` first produces the correct output, but when I try to draw `ts1` in the following cell, you can see that the first few trees are just copied over from `ts0`. \r\n\r\nWithout digging into it further I'm not totally sure what's going on, but I'm wondering whether `draw_svg` is inadvertently adding something to some global object each time it is called, without checking to see if it already exists beforehand and clearing it?", "reactions": {"url": "https://api.github.com/repos/tskit-dev/tskit/issues/467/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/tskit-dev/tskit/issues/467/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/tskit-dev/tskit/issues/453", "repository_url": "https://api.github.com/repos/tskit-dev/tskit", "labels_url": "https://api.github.com/repos/tskit-dev/tskit/issues/453/labels{/name}", "comments_url": "https://api.github.com/repos/tskit-dev/tskit/issues/453/comments", "events_url": "https://api.github.com/repos/tskit-dev/tskit/issues/453/events", "html_url": "https://github.com/tskit-dev/tskit/issues/453", "id": 548797148, "node_id": "MDU6SXNzdWU1NDg3OTcxNDg=", "number": 453, "title": ".newick() raises: LibraryError: Supplied buffer if too small", "user": {"login": "eaton-lab", "id": 25778715, "node_id": "MDQ6VXNlcjI1Nzc4NzE1", "avatar_url": "https://avatars.githubusercontent.com/u/25778715?v=4", "gravatar_id": "", "url": "https://api.github.com/users/eaton-lab", "html_url": "https://github.com/eaton-lab", "followers_url": "https://api.github.com/users/eaton-lab/followers", "following_url": "https://api.github.com/users/eaton-lab/following{/other_user}", "gists_url": "https://api.github.com/users/eaton-lab/gists{/gist_id}", "starred_url": "https://api.github.com/users/eaton-lab/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/eaton-lab/subscriptions", "organizations_url": "https://api.github.com/users/eaton-lab/orgs", "repos_url": "https://api.github.com/users/eaton-lab/repos", "events_url": "https://api.github.com/users/eaton-lab/events{/privacy}", "received_events_url": "https://api.github.com/users/eaton-lab/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 831518500, "node_id": "MDU6TGFiZWw4MzE1MTg1MDA=", "url": "https://api.github.com/repos/tskit-dev/tskit/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/tskit-dev/tskit/milestones/7", "html_url": "https://github.com/tskit-dev/tskit/milestone/7", "labels_url": "https://api.github.com/repos/tskit-dev/tskit/milestones/7/labels", "id": 4607628, "node_id": "MDk6TWlsZXN0b25lNDYwNzYyOA==", "number": 7, "title": "Python 0.3.0", "description": "", "creator": {"login": "jeromekelleher", "id": 2664569, "node_id": "MDQ6VXNlcjI2NjQ1Njk=", "avatar_url": "https://avatars.githubusercontent.com/u/2664569?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jeromekelleher", "html_url": "https://github.com/jeromekelleher", "followers_url": "https://api.github.com/users/jeromekelleher/followers", "following_url": "https://api.github.com/users/jeromekelleher/following{/other_user}", "gists_url": "https://api.github.com/users/jeromekelleher/gists{/gist_id}", "starred_url": "https://api.github.com/users/jeromekelleher/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jeromekelleher/subscriptions", "organizations_url": "https://api.github.com/users/jeromekelleher/orgs", "repos_url": "https://api.github.com/users/jeromekelleher/repos", "events_url": "https://api.github.com/users/jeromekelleher/events{/privacy}", "received_events_url": "https://api.github.com/users/jeromekelleher/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 42, "state": "closed", "created_at": "2019-08-27T17:06:46Z", "updated_at": "2020-08-27T12:55:43Z", "due_on": "2020-08-27T07:00:00Z", "closed_at": "2020-08-27T12:55:43Z"}, "comments": 4, "created_at": "2020-01-12T21:07:34Z", "updated_at": "2020-05-23T15:14:53Z", "closed_at": "2020-05-23T15:14:53Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi all, \r\n\r\nI'm getting a buffer size error when calling `.newick()` on a tree with large Ne. The problem seems to be derived from C code in `._ll_sparse_tree.get_newick()`. I see in the trees.py code that if you provide a `node_labels` argument to `.newick()` it skips the compiled `get_newick()` function and instead uses the Python function `__build_newick()` in trees.py. The latter function works fine, but the C code raises the error. \r\n\r\nYou should be able to recreate the error with the following code which will print the first newick string successfully but raise the `LibraryError` on the second one:\r\n\r\n```python\r\nimport msprime\r\n\r\n# get a tree sequence\r\nts = msprime.simulate(10, Ne=100e6, length=10, random_seed=123)\r\n\r\n# iterate over trees\r\nfor i in ts.trees():\r\n    \r\n    # this works. It calls Py code under the hood.\r\n    nwk1 = i.newick(node_labels={})\r\n    print(nwk1)\r\n    \r\n    # this doesn't work. It call C code under the hood.\r\n    nwk2 = i.newick()\r\n```\r\n\r\noutput:\r\n```python\r\n(:288429157.63675111532211,(:172974721.34986978769302,((:73244998.80208450555801,((:8406986.89599480479956,:8406986.89599480479956):12158249.56021711230278,(:14131513.13161224499345,:14131513.13161224499345):6433723.32459967210889):52679762.34587258845568):33927916.07371711730957,(:90580458.18467475473881,(:5298987.32885717041790,:5298987.32885717041790):85281470.85581758618355):16592456.69112686812878):65801806.47406816482544):115454436.28688132762909);\r\n\r\n---------------------------------------------------------------------------\r\nLibraryError                              Traceback (most recent call last)\r\n<ipython-input-138-354e8c4c4dae> in <module>\r\n     10 \r\n     11     # c code\r\n---> 12     nwk2 = i.newick()\r\n\r\n~/miniconda3/envs/py36/lib/python3.6/site-packages/msprime/trees.py in newick(self, precision, root, node_labels)\r\n   1153             root = self.root\r\n   1154         if node_labels is None:\r\n-> 1155             s = self._ll_sparse_tree.get_newick(precision=precision, root=root)\r\n   1156             if not IS_PY2:\r\n   1157                 s = s.decode()\r\n\r\nLibraryError: Supplied buffer if too small\r\n```\r\n\r\nI'll use the `node_labels` arg for now as a workaround, but I figured this looks like it is probably a bug. If it helps, I'm using msprime v.0.6.1 in Python 3.6 on Ubuntu. ", "reactions": {"url": "https://api.github.com/repos/tskit-dev/tskit/issues/453/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/tskit-dev/tskit/issues/453/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/tskit-dev/tskit/issues/438", "repository_url": "https://api.github.com/repos/tskit-dev/tskit", "labels_url": "https://api.github.com/repos/tskit-dev/tskit/issues/438/labels{/name}", "comments_url": "https://api.github.com/repos/tskit-dev/tskit/issues/438/comments", "events_url": "https://api.github.com/repos/tskit-dev/tskit/issues/438/events", "html_url": "https://github.com/tskit-dev/tskit/issues/438", "id": 532833647, "node_id": "MDU6SXNzdWU1MzI4MzM2NDc=", "number": 438, "title": "tsk_blkalloc_get should return NULL when size >= self->chunk_size", "user": {"login": "jeromekelleher", "id": 2664569, "node_id": "MDQ6VXNlcjI2NjQ1Njk=", "avatar_url": "https://avatars.githubusercontent.com/u/2664569?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jeromekelleher", "html_url": "https://github.com/jeromekelleher", "followers_url": "https://api.github.com/users/jeromekelleher/followers", "following_url": "https://api.github.com/users/jeromekelleher/following{/other_user}", "gists_url": "https://api.github.com/users/jeromekelleher/gists{/gist_id}", "starred_url": "https://api.github.com/users/jeromekelleher/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jeromekelleher/subscriptions", "organizations_url": "https://api.github.com/users/jeromekelleher/orgs", "repos_url": "https://api.github.com/users/jeromekelleher/repos", "events_url": "https://api.github.com/users/jeromekelleher/events{/privacy}", "received_events_url": "https://api.github.com/users/jeromekelleher/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 831518500, "node_id": "MDU6TGFiZWw4MzE1MTg1MDA=", "url": "https://api.github.com/repos/tskit-dev/tskit/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}, {"id": 1184840738, "node_id": "MDU6TGFiZWwxMTg0ODQwNzM4", "url": "https://api.github.com/repos/tskit-dev/tskit/labels/C%20API", "name": "C API", "color": "1d76db", "default": false, "description": "Issue is about the C API"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2019-12-04T17:35:35Z", "updated_at": "2020-01-31T17:42:43Z", "closed_at": "2020-01-31T17:42:43Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "``tsk_blkalloc_get`` currently triggers an assert when we ask for a memory chunk that's bigger than the chunk size. We should return NULL instead.\r\n\r\nRelated to: https://github.com/tskit-dev/msprime/issues/806", "reactions": {"url": "https://api.github.com/repos/tskit-dev/tskit/issues/438/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/tskit-dev/tskit/issues/438/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/tskit-dev/tskit/issues/423", "repository_url": "https://api.github.com/repos/tskit-dev/tskit", "labels_url": "https://api.github.com/repos/tskit-dev/tskit/issues/423/labels{/name}", "comments_url": "https://api.github.com/repos/tskit-dev/tskit/issues/423/comments", "events_url": "https://api.github.com/repos/tskit-dev/tskit/issues/423/events", "html_url": "https://github.com/tskit-dev/tskit/issues/423", "id": 527937763, "node_id": "MDU6SXNzdWU1Mjc5Mzc3NjM=", "number": 423, "title": "Empty kastore file written on error in tsk_table_collection_dump", "user": {"login": "jeromekelleher", "id": 2664569, "node_id": "MDQ6VXNlcjI2NjQ1Njk=", "avatar_url": "https://avatars.githubusercontent.com/u/2664569?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jeromekelleher", "html_url": "https://github.com/jeromekelleher", "followers_url": "https://api.github.com/users/jeromekelleher/followers", "following_url": "https://api.github.com/users/jeromekelleher/following{/other_user}", "gists_url": "https://api.github.com/users/jeromekelleher/gists{/gist_id}", "starred_url": "https://api.github.com/users/jeromekelleher/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jeromekelleher/subscriptions", "organizations_url": "https://api.github.com/users/jeromekelleher/orgs", "repos_url": "https://api.github.com/users/jeromekelleher/repos", "events_url": "https://api.github.com/users/jeromekelleher/events{/privacy}", "received_events_url": "https://api.github.com/users/jeromekelleher/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 831518500, "node_id": "MDU6TGFiZWw4MzE1MTg1MDA=", "url": "https://api.github.com/repos/tskit-dev/tskit/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}, {"id": 1184840738, "node_id": "MDU6TGFiZWwxMTg0ODQwNzM4", "url": "https://api.github.com/repos/tskit-dev/tskit/labels/C%20API", "name": "C API", "color": "1d76db", "default": false, "description": "Issue is about the C API"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2019-11-25T08:52:15Z", "updated_at": "2019-11-25T10:53:31Z", "closed_at": "2019-11-25T10:53:31Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "When an error occurs early in table_collection_dump, we should not write to the kastore_file. Possibly we should unlink the partially written file on exit?\r\n\r\nSee #403 for an example where this happened.", "reactions": {"url": "https://api.github.com/repos/tskit-dev/tskit/issues/423/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/tskit-dev/tskit/issues/423/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/tskit-dev/tskit/issues/383", "repository_url": "https://api.github.com/repos/tskit-dev/tskit", "labels_url": "https://api.github.com/repos/tskit-dev/tskit/issues/383/labels{/name}", "comments_url": "https://api.github.com/repos/tskit-dev/tskit/issues/383/comments", "events_url": "https://api.github.com/repos/tskit-dev/tskit/issues/383/events", "html_url": "https://github.com/tskit-dev/tskit/issues/383", "id": 507131160, "node_id": "MDU6SXNzdWU1MDcxMzExNjA=", "number": 383, "title": "Drawing: tree_height_scale=\"rank\" not interacting correctly with max_tree_height", "user": {"login": "jeromekelleher", "id": 2664569, "node_id": "MDQ6VXNlcjI2NjQ1Njk=", "avatar_url": "https://avatars.githubusercontent.com/u/2664569?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jeromekelleher", "html_url": "https://github.com/jeromekelleher", "followers_url": "https://api.github.com/users/jeromekelleher/followers", "following_url": "https://api.github.com/users/jeromekelleher/following{/other_user}", "gists_url": "https://api.github.com/users/jeromekelleher/gists{/gist_id}", "starred_url": "https://api.github.com/users/jeromekelleher/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jeromekelleher/subscriptions", "organizations_url": "https://api.github.com/users/jeromekelleher/orgs", "repos_url": "https://api.github.com/users/jeromekelleher/repos", "events_url": "https://api.github.com/users/jeromekelleher/events{/privacy}", "received_events_url": "https://api.github.com/users/jeromekelleher/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 831518500, "node_id": "MDU6TGFiZWw4MzE1MTg1MDA=", "url": "https://api.github.com/repos/tskit-dev/tskit/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": {"login": "jeromekelleher", "id": 2664569, "node_id": "MDQ6VXNlcjI2NjQ1Njk=", "avatar_url": "https://avatars.githubusercontent.com/u/2664569?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jeromekelleher", "html_url": "https://github.com/jeromekelleher", "followers_url": "https://api.github.com/users/jeromekelleher/followers", "following_url": "https://api.github.com/users/jeromekelleher/following{/other_user}", "gists_url": "https://api.github.com/users/jeromekelleher/gists{/gist_id}", "starred_url": "https://api.github.com/users/jeromekelleher/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jeromekelleher/subscriptions", "organizations_url": "https://api.github.com/users/jeromekelleher/orgs", "repos_url": "https://api.github.com/users/jeromekelleher/repos", "events_url": "https://api.github.com/users/jeromekelleher/events{/privacy}", "received_events_url": "https://api.github.com/users/jeromekelleher/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "jeromekelleher", "id": 2664569, "node_id": "MDQ6VXNlcjI2NjQ1Njk=", "avatar_url": "https://avatars.githubusercontent.com/u/2664569?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jeromekelleher", "html_url": "https://github.com/jeromekelleher", "followers_url": "https://api.github.com/users/jeromekelleher/followers", "following_url": "https://api.github.com/users/jeromekelleher/following{/other_user}", "gists_url": "https://api.github.com/users/jeromekelleher/gists{/gist_id}", "starred_url": "https://api.github.com/users/jeromekelleher/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jeromekelleher/subscriptions", "organizations_url": "https://api.github.com/users/jeromekelleher/orgs", "repos_url": "https://api.github.com/users/jeromekelleher/repos", "events_url": "https://api.github.com/users/jeromekelleher/events{/privacy}", "received_events_url": "https://api.github.com/users/jeromekelleher/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/tskit-dev/tskit/milestones/6", "html_url": "https://github.com/tskit-dev/tskit/milestone/6", "labels_url": "https://api.github.com/repos/tskit-dev/tskit/milestones/6/labels", "id": 4397633, "node_id": "MDk6TWlsZXN0b25lNDM5NzYzMw==", "number": 6, "title": "Python 0.2.3", "description": "", "creator": {"login": "jeromekelleher", "id": 2664569, "node_id": "MDQ6VXNlcjI2NjQ1Njk=", "avatar_url": "https://avatars.githubusercontent.com/u/2664569?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jeromekelleher", "html_url": "https://github.com/jeromekelleher", "followers_url": "https://api.github.com/users/jeromekelleher/followers", "following_url": "https://api.github.com/users/jeromekelleher/following{/other_user}", "gists_url": "https://api.github.com/users/jeromekelleher/gists{/gist_id}", "starred_url": "https://api.github.com/users/jeromekelleher/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jeromekelleher/subscriptions", "organizations_url": "https://api.github.com/users/jeromekelleher/orgs", "repos_url": "https://api.github.com/users/jeromekelleher/repos", "events_url": "https://api.github.com/users/jeromekelleher/events{/privacy}", "received_events_url": "https://api.github.com/users/jeromekelleher/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 13, "state": "closed", "created_at": "2019-06-11T11:58:23Z", "updated_at": "2019-12-16T10:18:34Z", "due_on": null, "closed_at": "2019-12-16T10:18:34Z"}, "comments": 1, "created_at": "2019-10-15T09:46:19Z", "updated_at": "2019-11-20T19:40:39Z", "closed_at": "2019-11-20T19:40:39Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "The [assign_y_coordinates](https://github.com/tskit-dev/tskit/blob/master/python/tskit/drawing.py#L266) function for SVG tree drawing contains some logic errors around how ``tree_height_scale=\"rank\"`` is handled. Currently, if we do:\r\n\r\n```python\r\nts = msprime.simulate(10, random_seed=2)\r\ntree = ts.first()\r\ntree.draw_svg(tree_height_scale=\"rank\", max_tree_height=\"ts\")\r\n```\r\n\r\nwe get an error. The logic for this needs to be untangled and tested so that we get sensible results (or a meaningful error) when this is called.\r\n\r\n@brianzhang01 --- would you like to get involved in this tree drawing code?", "reactions": {"url": "https://api.github.com/repos/tskit-dev/tskit/issues/383/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/tskit-dev/tskit/issues/383/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/tskit-dev/tskit/issues/319", "repository_url": "https://api.github.com/repos/tskit-dev/tskit", "labels_url": "https://api.github.com/repos/tskit-dev/tskit/issues/319/labels{/name}", "comments_url": "https://api.github.com/repos/tskit-dev/tskit/issues/319/comments", "events_url": "https://api.github.com/repos/tskit-dev/tskit/issues/319/events", "html_url": "https://github.com/tskit-dev/tskit/issues/319", "id": 483370612, "node_id": "MDU6SXNzdWU0ODMzNzA2MTI=", "number": 319, "title": "draw_svg() doesn't scale tree heights by time correctly", "user": {"login": "gtsambos", "id": 17755074, "node_id": "MDQ6VXNlcjE3NzU1MDc0", "avatar_url": "https://avatars.githubusercontent.com/u/17755074?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gtsambos", "html_url": "https://github.com/gtsambos", "followers_url": "https://api.github.com/users/gtsambos/followers", "following_url": "https://api.github.com/users/gtsambos/following{/other_user}", "gists_url": "https://api.github.com/users/gtsambos/gists{/gist_id}", "starred_url": "https://api.github.com/users/gtsambos/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gtsambos/subscriptions", "organizations_url": "https://api.github.com/users/gtsambos/orgs", "repos_url": "https://api.github.com/users/gtsambos/repos", "events_url": "https://api.github.com/users/gtsambos/events{/privacy}", "received_events_url": "https://api.github.com/users/gtsambos/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 831518500, "node_id": "MDU6TGFiZWw4MzE1MTg1MDA=", "url": "https://api.github.com/repos/tskit-dev/tskit/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": {"login": "jeromekelleher", "id": 2664569, "node_id": "MDQ6VXNlcjI2NjQ1Njk=", "avatar_url": "https://avatars.githubusercontent.com/u/2664569?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jeromekelleher", "html_url": "https://github.com/jeromekelleher", "followers_url": "https://api.github.com/users/jeromekelleher/followers", "following_url": "https://api.github.com/users/jeromekelleher/following{/other_user}", "gists_url": "https://api.github.com/users/jeromekelleher/gists{/gist_id}", "starred_url": "https://api.github.com/users/jeromekelleher/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jeromekelleher/subscriptions", "organizations_url": "https://api.github.com/users/jeromekelleher/orgs", "repos_url": "https://api.github.com/users/jeromekelleher/repos", "events_url": "https://api.github.com/users/jeromekelleher/events{/privacy}", "received_events_url": "https://api.github.com/users/jeromekelleher/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "jeromekelleher", "id": 2664569, "node_id": "MDQ6VXNlcjI2NjQ1Njk=", "avatar_url": "https://avatars.githubusercontent.com/u/2664569?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jeromekelleher", "html_url": "https://github.com/jeromekelleher", "followers_url": "https://api.github.com/users/jeromekelleher/followers", "following_url": "https://api.github.com/users/jeromekelleher/following{/other_user}", "gists_url": "https://api.github.com/users/jeromekelleher/gists{/gist_id}", "starred_url": "https://api.github.com/users/jeromekelleher/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jeromekelleher/subscriptions", "organizations_url": "https://api.github.com/users/jeromekelleher/orgs", "repos_url": "https://api.github.com/users/jeromekelleher/repos", "events_url": "https://api.github.com/users/jeromekelleher/events{/privacy}", "received_events_url": "https://api.github.com/users/jeromekelleher/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/tskit-dev/tskit/milestones/6", "html_url": "https://github.com/tskit-dev/tskit/milestone/6", "labels_url": "https://api.github.com/repos/tskit-dev/tskit/milestones/6/labels", "id": 4397633, "node_id": "MDk6TWlsZXN0b25lNDM5NzYzMw==", "number": 6, "title": "Python 0.2.3", "description": "", "creator": {"login": "jeromekelleher", "id": 2664569, "node_id": "MDQ6VXNlcjI2NjQ1Njk=", "avatar_url": "https://avatars.githubusercontent.com/u/2664569?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jeromekelleher", "html_url": "https://github.com/jeromekelleher", "followers_url": "https://api.github.com/users/jeromekelleher/followers", "following_url": "https://api.github.com/users/jeromekelleher/following{/other_user}", "gists_url": "https://api.github.com/users/jeromekelleher/gists{/gist_id}", "starred_url": "https://api.github.com/users/jeromekelleher/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jeromekelleher/subscriptions", "organizations_url": "https://api.github.com/users/jeromekelleher/orgs", "repos_url": "https://api.github.com/users/jeromekelleher/repos", "events_url": "https://api.github.com/users/jeromekelleher/events{/privacy}", "received_events_url": "https://api.github.com/users/jeromekelleher/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 13, "state": "closed", "created_at": "2019-06-11T11:58:23Z", "updated_at": "2019-12-16T10:18:34Z", "due_on": null, "closed_at": "2019-12-16T10:18:34Z"}, "comments": 0, "created_at": "2019-08-21T11:44:51Z", "updated_at": "2019-11-20T20:13:44Z", "closed_at": "2019-11-20T20:13:44Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "`draw_svg()` scales all trees to the same height, even when the `tree_height_scale='time'` option is provided. \r\nSee the example below -- note that nodes 9 and 11 appear at different heights on different trees.\r\n\r\n![Screen Shot 2019-08-21 at 12 43 28 pm](https://user-images.githubusercontent.com/17755074/63429236-689b3100-c411-11e9-9599-3533e72cc877.png)\r\n", "reactions": {"url": "https://api.github.com/repos/tskit-dev/tskit/issues/319/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/tskit-dev/tskit/issues/319/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/tskit-dev/tskit/issues/293", "repository_url": "https://api.github.com/repos/tskit-dev/tskit", "labels_url": "https://api.github.com/repos/tskit-dev/tskit/issues/293/labels{/name}", "comments_url": "https://api.github.com/repos/tskit-dev/tskit/issues/293/comments", "events_url": "https://api.github.com/repos/tskit-dev/tskit/issues/293/events", "html_url": "https://github.com/tskit-dev/tskit/issues/293", "id": 479015132, "node_id": "MDU6SXNzdWU0NzkwMTUxMzI=", "number": 293, "title": "Stupid values in tables cause tables.tree_sequence() to hit an infinite loop", "user": {"login": "hyanwong", "id": 4699014, "node_id": "MDQ6VXNlcjQ2OTkwMTQ=", "avatar_url": "https://avatars.githubusercontent.com/u/4699014?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hyanwong", "html_url": "https://github.com/hyanwong", "followers_url": "https://api.github.com/users/hyanwong/followers", "following_url": "https://api.github.com/users/hyanwong/following{/other_user}", "gists_url": "https://api.github.com/users/hyanwong/gists{/gist_id}", "starred_url": "https://api.github.com/users/hyanwong/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hyanwong/subscriptions", "organizations_url": "https://api.github.com/users/hyanwong/orgs", "repos_url": "https://api.github.com/users/hyanwong/repos", "events_url": "https://api.github.com/users/hyanwong/events{/privacy}", "received_events_url": "https://api.github.com/users/hyanwong/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 831518500, "node_id": "MDU6TGFiZWw4MzE1MTg1MDA=", "url": "https://api.github.com/repos/tskit-dev/tskit/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 10, "created_at": "2019-08-09T14:26:05Z", "updated_at": "2019-08-12T18:46:36Z", "closed_at": "2019-08-12T18:46:36Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "I inadvertently created a table collection containing an edge table with left=nan and right=nan. When I then tried to do `tables.tree_sequence()`, tskit seemed to enter an infinite loop from which I couldn't escape (I had to kill the process by hand).\r\n\r\nAdmittedly it's a stupid thing to have done. But should we try to exit more gracefully than this, or is it such a silly edge case that we shouldn't bother?\r\n\r\nI'm happy to put in some assertions, but am not sure where they belong (in the C code, or in the python wrapper?)", "reactions": {"url": "https://api.github.com/repos/tskit-dev/tskit/issues/293/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/tskit-dev/tskit/issues/293/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/tskit-dev/tskit/issues/258", "repository_url": "https://api.github.com/repos/tskit-dev/tskit", "labels_url": "https://api.github.com/repos/tskit-dev/tskit/issues/258/labels{/name}", "comments_url": "https://api.github.com/repos/tskit-dev/tskit/issues/258/comments", "events_url": "https://api.github.com/repos/tskit-dev/tskit/issues/258/events", "html_url": "https://github.com/tskit-dev/tskit/issues/258", "id": 464397406, "node_id": "MDU6SXNzdWU0NjQzOTc0MDY=", "number": 258, "title": "sample_count_stat doesn't pass on span_normalise", "user": {"login": "petrelharp", "id": 1046249, "node_id": "MDQ6VXNlcjEwNDYyNDk=", "avatar_url": "https://avatars.githubusercontent.com/u/1046249?v=4", "gravatar_id": "", "url": "https://api.github.com/users/petrelharp", "html_url": "https://github.com/petrelharp", "followers_url": "https://api.github.com/users/petrelharp/followers", "following_url": "https://api.github.com/users/petrelharp/following{/other_user}", "gists_url": "https://api.github.com/users/petrelharp/gists{/gist_id}", "starred_url": "https://api.github.com/users/petrelharp/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/petrelharp/subscriptions", "organizations_url": "https://api.github.com/users/petrelharp/orgs", "repos_url": "https://api.github.com/users/petrelharp/repos", "events_url": "https://api.github.com/users/petrelharp/events{/privacy}", "received_events_url": "https://api.github.com/users/petrelharp/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 831518500, "node_id": "MDU6TGFiZWw4MzE1MTg1MDA=", "url": "https://api.github.com/repos/tskit-dev/tskit/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/tskit-dev/tskit/milestones/5", "html_url": "https://github.com/tskit-dev/tskit/milestone/5", "labels_url": "https://api.github.com/repos/tskit-dev/tskit/milestones/5/labels", "id": 4177028, "node_id": "MDk6TWlsZXN0b25lNDE3NzAyOA==", "number": 5, "title": "Python 0.2.0", "description": "", "creator": {"login": "jeromekelleher", "id": 2664569, "node_id": "MDQ6VXNlcjI2NjQ1Njk=", "avatar_url": "https://avatars.githubusercontent.com/u/2664569?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jeromekelleher", "html_url": "https://github.com/jeromekelleher", "followers_url": "https://api.github.com/users/jeromekelleher/followers", "following_url": "https://api.github.com/users/jeromekelleher/following{/other_user}", "gists_url": "https://api.github.com/users/jeromekelleher/gists{/gist_id}", "starred_url": "https://api.github.com/users/jeromekelleher/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jeromekelleher/subscriptions", "organizations_url": "https://api.github.com/users/jeromekelleher/orgs", "repos_url": "https://api.github.com/users/jeromekelleher/repos", "events_url": "https://api.github.com/users/jeromekelleher/events{/privacy}", "received_events_url": "https://api.github.com/users/jeromekelleher/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 41, "state": "closed", "created_at": "2019-03-27T14:51:10Z", "updated_at": "2019-08-26T15:17:30Z", "due_on": "2019-08-23T07:00:00Z", "closed_at": "2019-08-26T15:17:30Z"}, "comments": 2, "created_at": "2019-07-04T21:23:17Z", "updated_at": "2019-07-08T07:53:12Z", "closed_at": "2019-07-08T07:53:12Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "see, [here](https://github.com/tskit-dev/tskit/blob/5cfa90d73581ae3e321450645f947dad2c344800/python/tskit/trees.py#L3228)", "reactions": {"url": "https://api.github.com/repos/tskit-dev/tskit/issues/258/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/tskit-dev/tskit/issues/258/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/tskit-dev/tskit/issues/250", "repository_url": "https://api.github.com/repos/tskit-dev/tskit", "labels_url": "https://api.github.com/repos/tskit-dev/tskit/issues/250/labels{/name}", "comments_url": "https://api.github.com/repos/tskit-dev/tskit/issues/250/comments", "events_url": "https://api.github.com/repos/tskit-dev/tskit/issues/250/events", "html_url": "https://github.com/tskit-dev/tskit/issues/250", "id": 462331722, "node_id": "MDU6SXNzdWU0NjIzMzE3MjI=", "number": 250, "title": "Fst gives a NoneType error when no indices are given (the default)", "user": {"login": "gtsambos", "id": 17755074, "node_id": "MDQ6VXNlcjE3NzU1MDc0", "avatar_url": "https://avatars.githubusercontent.com/u/17755074?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gtsambos", "html_url": "https://github.com/gtsambos", "followers_url": "https://api.github.com/users/gtsambos/followers", "following_url": "https://api.github.com/users/gtsambos/following{/other_user}", "gists_url": "https://api.github.com/users/gtsambos/gists{/gist_id}", "starred_url": "https://api.github.com/users/gtsambos/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gtsambos/subscriptions", "organizations_url": "https://api.github.com/users/gtsambos/orgs", "repos_url": "https://api.github.com/users/gtsambos/repos", "events_url": "https://api.github.com/users/gtsambos/events{/privacy}", "received_events_url": "https://api.github.com/users/gtsambos/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 831518500, "node_id": "MDU6TGFiZWw4MzE1MTg1MDA=", "url": "https://api.github.com/repos/tskit-dev/tskit/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/tskit-dev/tskit/milestones/5", "html_url": "https://github.com/tskit-dev/tskit/milestone/5", "labels_url": "https://api.github.com/repos/tskit-dev/tskit/milestones/5/labels", "id": 4177028, "node_id": "MDk6TWlsZXN0b25lNDE3NzAyOA==", "number": 5, "title": "Python 0.2.0", "description": "", "creator": {"login": "jeromekelleher", "id": 2664569, "node_id": "MDQ6VXNlcjI2NjQ1Njk=", "avatar_url": "https://avatars.githubusercontent.com/u/2664569?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jeromekelleher", "html_url": "https://github.com/jeromekelleher", "followers_url": "https://api.github.com/users/jeromekelleher/followers", "following_url": "https://api.github.com/users/jeromekelleher/following{/other_user}", "gists_url": "https://api.github.com/users/jeromekelleher/gists{/gist_id}", "starred_url": "https://api.github.com/users/jeromekelleher/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jeromekelleher/subscriptions", "organizations_url": "https://api.github.com/users/jeromekelleher/orgs", "repos_url": "https://api.github.com/users/jeromekelleher/repos", "events_url": "https://api.github.com/users/jeromekelleher/events{/privacy}", "received_events_url": "https://api.github.com/users/jeromekelleher/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 41, "state": "closed", "created_at": "2019-03-27T14:51:10Z", "updated_at": "2019-08-26T15:17:30Z", "due_on": "2019-08-23T07:00:00Z", "closed_at": "2019-08-26T15:17:30Z"}, "comments": 9, "created_at": "2019-06-29T19:04:26Z", "updated_at": "2019-08-20T19:34:33Z", "closed_at": "2019-08-20T19:20:02Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "I have a simulation that does the right thing when I explicitly specify pairs of indices:\r\n\r\n```\r\nts.Fst(sample_sets = samples_list,\r\n      indexes = [(0,2), (0,1)])\r\n```\r\noutputs\r\n```\r\narray([[0.12508121, 0.12780193]])\r\n```\r\n\r\nbut that gives the following error if I remove the `indexes` input (and so use the default value of `None`)\r\n\r\n```\r\n---------------------------------------------------------------------------\r\nTypeError                                 Traceback (most recent call last)\r\n<ipython-input-6-fbfb01290311> in <module>\r\n----> 1 ts.Fst(sample_sets = samples_list)\r\n\r\n/usr/local/lib/python3.7/site-packages/tskit/trees.py in Fst(self, sample_sets, indexes, windows, mode, span_normalise)\r\n   3332         fst = np.repeat(1.0, np.product(divergences.shape))\r\n   3333         fst.shape = divergences.shape\r\n-> 3334         for i, (u, v) in enumerate(indexes):\r\n   3335             denom = (diversities[:, :, u] + diversities[:, :, v]\r\n   3336                      + 2 * divergences[:, :, i])\r\n\r\nTypeError: 'NoneType' object is not iterable\r\n```", "reactions": {"url": "https://api.github.com/repos/tskit-dev/tskit/issues/250/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/tskit-dev/tskit/issues/250/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/tskit-dev/tskit/issues/234", "repository_url": "https://api.github.com/repos/tskit-dev/tskit", "labels_url": "https://api.github.com/repos/tskit-dev/tskit/issues/234/labels{/name}", "comments_url": "https://api.github.com/repos/tskit-dev/tskit/issues/234/comments", "events_url": "https://api.github.com/repos/tskit-dev/tskit/issues/234/events", "html_url": "https://github.com/tskit-dev/tskit/issues/234", "id": 456230578, "node_id": "MDU6SXNzdWU0NTYyMzA1Nzg=", "number": 234, "title": "Default draw() method broken in SVG", "user": {"login": "jeromekelleher", "id": 2664569, "node_id": "MDQ6VXNlcjI2NjQ1Njk=", "avatar_url": "https://avatars.githubusercontent.com/u/2664569?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jeromekelleher", "html_url": "https://github.com/jeromekelleher", "followers_url": "https://api.github.com/users/jeromekelleher/followers", "following_url": "https://api.github.com/users/jeromekelleher/following{/other_user}", "gists_url": "https://api.github.com/users/jeromekelleher/gists{/gist_id}", "starred_url": "https://api.github.com/users/jeromekelleher/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jeromekelleher/subscriptions", "organizations_url": "https://api.github.com/users/jeromekelleher/orgs", "repos_url": "https://api.github.com/users/jeromekelleher/repos", "events_url": "https://api.github.com/users/jeromekelleher/events{/privacy}", "received_events_url": "https://api.github.com/users/jeromekelleher/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 831518500, "node_id": "MDU6TGFiZWw4MzE1MTg1MDA=", "url": "https://api.github.com/repos/tskit-dev/tskit/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/tskit-dev/tskit/milestones/5", "html_url": "https://github.com/tskit-dev/tskit/milestone/5", "labels_url": "https://api.github.com/repos/tskit-dev/tskit/milestones/5/labels", "id": 4177028, "node_id": "MDk6TWlsZXN0b25lNDE3NzAyOA==", "number": 5, "title": "Python 0.2.0", "description": "", "creator": {"login": "jeromekelleher", "id": 2664569, "node_id": "MDQ6VXNlcjI2NjQ1Njk=", "avatar_url": "https://avatars.githubusercontent.com/u/2664569?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jeromekelleher", "html_url": "https://github.com/jeromekelleher", "followers_url": "https://api.github.com/users/jeromekelleher/followers", "following_url": "https://api.github.com/users/jeromekelleher/following{/other_user}", "gists_url": "https://api.github.com/users/jeromekelleher/gists{/gist_id}", "starred_url": "https://api.github.com/users/jeromekelleher/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jeromekelleher/subscriptions", "organizations_url": "https://api.github.com/users/jeromekelleher/orgs", "repos_url": "https://api.github.com/users/jeromekelleher/repos", "events_url": "https://api.github.com/users/jeromekelleher/events{/privacy}", "received_events_url": "https://api.github.com/users/jeromekelleher/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 41, "state": "closed", "created_at": "2019-03-27T14:51:10Z", "updated_at": "2019-08-26T15:17:30Z", "due_on": "2019-08-23T07:00:00Z", "closed_at": "2019-08-26T15:17:30Z"}, "comments": 0, "created_at": "2019-06-14T12:46:10Z", "updated_at": "2019-06-14T13:41:40Z", "closed_at": "2019-06-14T13:41:39Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "Lines being drawn to all sorts of mad places now. Not sure how it happened.", "reactions": {"url": "https://api.github.com/repos/tskit-dev/tskit/issues/234/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/tskit-dev/tskit/issues/234/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/tskit-dev/tskit/issues/179", "repository_url": "https://api.github.com/repos/tskit-dev/tskit", "labels_url": "https://api.github.com/repos/tskit-dev/tskit/issues/179/labels{/name}", "comments_url": "https://api.github.com/repos/tskit-dev/tskit/issues/179/comments", "events_url": "https://api.github.com/repos/tskit-dev/tskit/issues/179/events", "html_url": "https://github.com/tskit-dev/tskit/issues/179", "id": 437431163, "node_id": "MDU6SXNzdWU0Mzc0MzExNjM=", "number": 179, "title": "table_collection_copy() heap buffer overflow", "user": {"login": "bhaller", "id": 10171101, "node_id": "MDQ6VXNlcjEwMTcxMTAx", "avatar_url": "https://avatars.githubusercontent.com/u/10171101?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bhaller", "html_url": "https://github.com/bhaller", "followers_url": "https://api.github.com/users/bhaller/followers", "following_url": "https://api.github.com/users/bhaller/following{/other_user}", "gists_url": "https://api.github.com/users/bhaller/gists{/gist_id}", "starred_url": "https://api.github.com/users/bhaller/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bhaller/subscriptions", "organizations_url": "https://api.github.com/users/bhaller/orgs", "repos_url": "https://api.github.com/users/bhaller/repos", "events_url": "https://api.github.com/users/bhaller/events{/privacy}", "received_events_url": "https://api.github.com/users/bhaller/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 831518500, "node_id": "MDU6TGFiZWw4MzE1MTg1MDA=", "url": "https://api.github.com/repos/tskit-dev/tskit/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": {"login": "jeromekelleher", "id": 2664569, "node_id": "MDQ6VXNlcjI2NjQ1Njk=", "avatar_url": "https://avatars.githubusercontent.com/u/2664569?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jeromekelleher", "html_url": "https://github.com/jeromekelleher", "followers_url": "https://api.github.com/users/jeromekelleher/followers", "following_url": "https://api.github.com/users/jeromekelleher/following{/other_user}", "gists_url": "https://api.github.com/users/jeromekelleher/gists{/gist_id}", "starred_url": "https://api.github.com/users/jeromekelleher/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jeromekelleher/subscriptions", "organizations_url": "https://api.github.com/users/jeromekelleher/orgs", "repos_url": "https://api.github.com/users/jeromekelleher/repos", "events_url": "https://api.github.com/users/jeromekelleher/events{/privacy}", "received_events_url": "https://api.github.com/users/jeromekelleher/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "jeromekelleher", "id": 2664569, "node_id": "MDQ6VXNlcjI2NjQ1Njk=", "avatar_url": "https://avatars.githubusercontent.com/u/2664569?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jeromekelleher", "html_url": "https://github.com/jeromekelleher", "followers_url": "https://api.github.com/users/jeromekelleher/followers", "following_url": "https://api.github.com/users/jeromekelleher/following{/other_user}", "gists_url": "https://api.github.com/users/jeromekelleher/gists{/gist_id}", "starred_url": "https://api.github.com/users/jeromekelleher/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jeromekelleher/subscriptions", "organizations_url": "https://api.github.com/users/jeromekelleher/orgs", "repos_url": "https://api.github.com/users/jeromekelleher/repos", "events_url": "https://api.github.com/users/jeromekelleher/events{/privacy}", "received_events_url": "https://api.github.com/users/jeromekelleher/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/tskit-dev/tskit/milestones/8", "html_url": "https://github.com/tskit-dev/tskit/milestone/8", "labels_url": "https://api.github.com/repos/tskit-dev/tskit/milestones/8/labels", "id": 5098947, "node_id": "MDk6TWlsZXN0b25lNTA5ODk0Nw==", "number": 8, "title": "C API 0.99.3", "description": "", "creator": {"login": "jeromekelleher", "id": 2664569, "node_id": "MDQ6VXNlcjI2NjQ1Njk=", "avatar_url": "https://avatars.githubusercontent.com/u/2664569?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jeromekelleher", "html_url": "https://github.com/jeromekelleher", "followers_url": "https://api.github.com/users/jeromekelleher/followers", "following_url": "https://api.github.com/users/jeromekelleher/following{/other_user}", "gists_url": "https://api.github.com/users/jeromekelleher/gists{/gist_id}", "starred_url": "https://api.github.com/users/jeromekelleher/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jeromekelleher/subscriptions", "organizations_url": "https://api.github.com/users/jeromekelleher/orgs", "repos_url": "https://api.github.com/users/jeromekelleher/repos", "events_url": "https://api.github.com/users/jeromekelleher/events{/privacy}", "received_events_url": "https://api.github.com/users/jeromekelleher/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 17, "state": "closed", "created_at": "2020-02-12T17:28:19Z", "updated_at": "2020-07-29T12:58:11Z", "due_on": "2020-07-23T07:00:00Z", "closed_at": "2020-07-29T12:58:11Z"}, "comments": 4, "created_at": "2019-04-25T22:58:07Z", "updated_at": "2020-07-15T19:07:49Z", "closed_at": "2020-07-15T19:07:48Z", "author_association": "NONE", "active_lock_reason": null, "body": "I am not sure this is a bug, but I think it might be.  Either that, or I'm using the tskit APIs wrong.  Or both.\r\n\r\nThe end result is that in `table_collection_copy()` it goes into the `if (table_collection_is_indexed(self))` case, and the first `malloc()` call crashes.  It is trying to copy 48588 bytes from `self->indexes.edge_insertion_order`, which is a malloced buffer that is only 47100 bytes long.  This causes a segfault.\r\n\r\nThe 47100-byte buffer is allocated by an earlier call to `table_collection_copy()` when executing this code:\r\n\r\n```\r\n\ttable_collection_t immutable_tables;\r\n\t\r\n\tint ret = table_collection_alloc(&immutable_tables, 0);\r\n\tif (ret != 0) handle_error(\"table_collection_alloc\", ret);\r\n\t\r\n\tret = table_collection_load(&immutable_tables, p_file, 0);\r\n\tif (ret != 0) handle_error(\"table_collection_load\", ret);\r\n\t\r\n\t// copy the immutable table collection to make a mutable collection\r\n\tret = table_collection_alloc(&tables_, MSP_ALLOC_TABLES);\r\n\tif (ret != 0) handle_error(\"table_collection_alloc\", ret);\r\n\tRecordTablePosition();\r\n\t\r\n\tret = table_collection_copy(&immutable_tables, &tables_);\r\n\tif (ret < 0) handle_error(\"table_collection_copy\", ret);\r\n```\r\n\r\nI guess `immutable_tables` has these indexes set up on it; I'm not sure why.  Then we try to make a mutable copy of the table collection, as the comment says.  (The point of this shuffle is that I guess `immutable_tables` has buffers that are straight from kastore and are not malloced, so the table collection can't be modified, so we need to copy it).  That call appears to copy the indexes, which allocates the 47100-byte buffer.  Then we go on to use the table collection to run the simulation forward, and we add some edges, but the index buffers don't get resized and they don't get discarded, so they end up being smaller than the edge table (and presumably invalid, too).  Then eventually we try to copy that table collection, and it sees the index buffers, assumes they are of the expected size, and tries to copy out of them; but they are smaller than expected, so boom.\r\n\r\nThis is the first time I've encountered these index buffers, and I'm not sure what they're used for.  As far as I know we're not using them in SLiM and don't need/want them.  I see that there's a `table_collection_drop_indexes()` function I could call, and I'm thinking I probably ought to call it on `immutable_tables` before I copy it.  So if that diagnosis is correct, maybe this is entirely our bug in SLiM.  (Is there a way to just not even create the indexes in the first place, rather than dropping them later?  Does this matter?)\r\n\r\nHowever, it seems weird to me that SLiM can add edges to the indexed table collection without getting any kind of pushback.  It seems like that should either (a) silently drop the indexes since they are no longer valid, or (b) raise an error condition like \"tried to modify an indexed table collection\".  Letting itself get into a state where it is invalid, with such a common/obvious usage pattern, seems bad.\r\n\r\nIf checking for indexes every time an edge gets added would be too much of a speed hit, maybe it ought to (a) save the malloced size of the indexes when it sets them up, and then (b) check that that size still makes sense when it intends to use/copy them; if it no longer makes sense compared to the size of the edge table, raise an error or drop the indexes at that point...?\r\n\r\n@petrelharp, you might be interested in this; remarkably, we appear to have had this crashing bug since SLiM 3.0, and it is not hard to trigger, but nobody has ever seen it (or reported it, at least) in the wild!  I just stumbled on it while trying to debug an (apparently) unrelated issue \u2013 the test case I wrote for that other issue was segfaulting before it hit the issue I was trying to debug!", "reactions": {"url": "https://api.github.com/repos/tskit-dev/tskit/issues/179/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/tskit-dev/tskit/issues/179/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/tskit-dev/tskit/issues/178", "repository_url": "https://api.github.com/repos/tskit-dev/tskit", "labels_url": "https://api.github.com/repos/tskit-dev/tskit/issues/178/labels{/name}", "comments_url": "https://api.github.com/repos/tskit-dev/tskit/issues/178/comments", "events_url": "https://api.github.com/repos/tskit-dev/tskit/issues/178/events", "html_url": "https://github.com/tskit-dev/tskit/issues/178", "id": 437404284, "node_id": "MDU6SXNzdWU0Mzc0MDQyODQ=", "number": 178, "title": "table_collection_deduplicate_sites() heap buffer overflow", "user": {"login": "bhaller", "id": 10171101, "node_id": "MDQ6VXNlcjEwMTcxMTAx", "avatar_url": "https://avatars.githubusercontent.com/u/10171101?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bhaller", "html_url": "https://github.com/bhaller", "followers_url": "https://api.github.com/users/bhaller/followers", "following_url": "https://api.github.com/users/bhaller/following{/other_user}", "gists_url": "https://api.github.com/users/bhaller/gists{/gist_id}", "starred_url": "https://api.github.com/users/bhaller/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bhaller/subscriptions", "organizations_url": "https://api.github.com/users/bhaller/orgs", "repos_url": "https://api.github.com/users/bhaller/repos", "events_url": "https://api.github.com/users/bhaller/events{/privacy}", "received_events_url": "https://api.github.com/users/bhaller/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 831518500, "node_id": "MDU6TGFiZWw4MzE1MTg1MDA=", "url": "https://api.github.com/repos/tskit-dev/tskit/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2019-04-25T21:24:57Z", "updated_at": "2019-04-26T13:13:28Z", "closed_at": "2019-04-26T13:13:28Z", "author_association": "NONE", "active_lock_reason": null, "body": "There is a heap buffer overflow in table_collection_deduplicate_sites().  It occurs when copy.num_rows is 0; then the site_id_map malloc() is for zero bytes, and yet the code then does site_id_map[0] = 0, accesing a memory location that it has no right to access.  Found with some spiffy malloc debugging tools in Xcode that I am rather impressed by.  :->  In SLiM I've put in a temporary fix of site_id_map = malloc((copy.num_rows + 1) * sizeof(*site_id_map)), which is almost certainly not the right fix but it gets the job done.  :->", "reactions": {"url": "https://api.github.com/repos/tskit-dev/tskit/issues/178/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/tskit-dev/tskit/issues/178/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/tskit-dev/tskit/issues/164", "repository_url": "https://api.github.com/repos/tskit-dev/tskit", "labels_url": "https://api.github.com/repos/tskit-dev/tskit/issues/164/labels{/name}", "comments_url": "https://api.github.com/repos/tskit-dev/tskit/issues/164/comments", "events_url": "https://api.github.com/repos/tskit-dev/tskit/issues/164/events", "html_url": "https://github.com/tskit-dev/tskit/issues/164", "id": 426167338, "node_id": "MDU6SXNzdWU0MjYxNjczMzg=", "number": 164, "title": "tskit CLI not working", "user": {"login": "jeromekelleher", "id": 2664569, "node_id": "MDQ6VXNlcjI2NjQ1Njk=", "avatar_url": "https://avatars.githubusercontent.com/u/2664569?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jeromekelleher", "html_url": "https://github.com/jeromekelleher", "followers_url": "https://api.github.com/users/jeromekelleher/followers", "following_url": "https://api.github.com/users/jeromekelleher/following{/other_user}", "gists_url": "https://api.github.com/users/jeromekelleher/gists{/gist_id}", "starred_url": "https://api.github.com/users/jeromekelleher/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jeromekelleher/subscriptions", "organizations_url": "https://api.github.com/users/jeromekelleher/orgs", "repos_url": "https://api.github.com/users/jeromekelleher/repos", "events_url": "https://api.github.com/users/jeromekelleher/events{/privacy}", "received_events_url": "https://api.github.com/users/jeromekelleher/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 831518500, "node_id": "MDU6TGFiZWw4MzE1MTg1MDA=", "url": "https://api.github.com/repos/tskit-dev/tskit/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/tskit-dev/tskit/milestones/5", "html_url": "https://github.com/tskit-dev/tskit/milestone/5", "labels_url": "https://api.github.com/repos/tskit-dev/tskit/milestones/5/labels", "id": 4177028, "node_id": "MDk6TWlsZXN0b25lNDE3NzAyOA==", "number": 5, "title": "Python 0.2.0", "description": "", "creator": {"login": "jeromekelleher", "id": 2664569, "node_id": "MDQ6VXNlcjI2NjQ1Njk=", "avatar_url": "https://avatars.githubusercontent.com/u/2664569?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jeromekelleher", "html_url": "https://github.com/jeromekelleher", "followers_url": "https://api.github.com/users/jeromekelleher/followers", "following_url": "https://api.github.com/users/jeromekelleher/following{/other_user}", "gists_url": "https://api.github.com/users/jeromekelleher/gists{/gist_id}", "starred_url": "https://api.github.com/users/jeromekelleher/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jeromekelleher/subscriptions", "organizations_url": "https://api.github.com/users/jeromekelleher/orgs", "repos_url": "https://api.github.com/users/jeromekelleher/repos", "events_url": "https://api.github.com/users/jeromekelleher/events{/privacy}", "received_events_url": "https://api.github.com/users/jeromekelleher/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 41, "state": "closed", "created_at": "2019-03-27T14:51:10Z", "updated_at": "2019-08-26T15:17:30Z", "due_on": "2019-08-23T07:00:00Z", "closed_at": "2019-08-26T15:17:30Z"}, "comments": 0, "created_at": "2019-03-27T20:25:06Z", "updated_at": "2019-03-28T19:40:28Z", "closed_at": "2019-03-28T19:40:28Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "```\r\n$ tskit\r\nTraceback (most recent call last):\r\n  File \"/home/jk/.local/bin/tskit\", line 8, in <module>\r\n    from tskit.__main__ import main\r\nImportError: cannot import name 'main'\r\n```\r\n\r\nCalling python3 -m tskit works fine though.", "reactions": {"url": "https://api.github.com/repos/tskit-dev/tskit/issues/164/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/tskit-dev/tskit/issues/164/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/tskit-dev/tskit/issues/157", "repository_url": "https://api.github.com/repos/tskit-dev/tskit", "labels_url": "https://api.github.com/repos/tskit-dev/tskit/issues/157/labels{/name}", "comments_url": "https://api.github.com/repos/tskit-dev/tskit/issues/157/comments", "events_url": "https://api.github.com/repos/tskit-dev/tskit/issues/157/events", "html_url": "https://github.com/tskit-dev/tskit/issues/157", "id": 425514690, "node_id": "MDU6SXNzdWU0MjU1MTQ2OTA=", "number": 157, "title": "edge table overflows without being detected, I think?", "user": {"login": "bhaller", "id": 10171101, "node_id": "MDQ6VXNlcjEwMTcxMTAx", "avatar_url": "https://avatars.githubusercontent.com/u/10171101?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bhaller", "html_url": "https://github.com/bhaller", "followers_url": "https://api.github.com/users/bhaller/followers", "following_url": "https://api.github.com/users/bhaller/following{/other_user}", "gists_url": "https://api.github.com/users/bhaller/gists{/gist_id}", "starred_url": "https://api.github.com/users/bhaller/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bhaller/subscriptions", "organizations_url": "https://api.github.com/users/bhaller/orgs", "repos_url": "https://api.github.com/users/bhaller/repos", "events_url": "https://api.github.com/users/bhaller/events{/privacy}", "received_events_url": "https://api.github.com/users/bhaller/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 831518500, "node_id": "MDU6TGFiZWw4MzE1MTg1MDA=", "url": "https://api.github.com/repos/tskit-dev/tskit/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}, {"id": 1184840738, "node_id": "MDU6TGFiZWwxMTg0ODQwNzM4", "url": "https://api.github.com/repos/tskit-dev/tskit/labels/C%20API", "name": "C API", "color": "1d76db", "default": false, "description": "Issue is about the C API"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/tskit-dev/tskit/milestones/4", "html_url": "https://github.com/tskit-dev/tskit/milestone/4", "labels_url": "https://api.github.com/repos/tskit-dev/tskit/milestones/4/labels", "id": 4174928, "node_id": "MDk6TWlsZXN0b25lNDE3NDkyOA==", "number": 4, "title": "C 0.99.2", "description": "", "creator": {"login": "jeromekelleher", "id": 2664569, "node_id": "MDQ6VXNlcjI2NjQ1Njk=", "avatar_url": "https://avatars.githubusercontent.com/u/2664569?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jeromekelleher", "html_url": "https://github.com/jeromekelleher", "followers_url": "https://api.github.com/users/jeromekelleher/followers", "following_url": "https://api.github.com/users/jeromekelleher/following{/other_user}", "gists_url": "https://api.github.com/users/jeromekelleher/gists{/gist_id}", "starred_url": "https://api.github.com/users/jeromekelleher/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jeromekelleher/subscriptions", "organizations_url": "https://api.github.com/users/jeromekelleher/orgs", "repos_url": "https://api.github.com/users/jeromekelleher/repos", "events_url": "https://api.github.com/users/jeromekelleher/events{/privacy}", "received_events_url": "https://api.github.com/users/jeromekelleher/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 1, "state": "closed", "created_at": "2019-03-26T20:41:55Z", "updated_at": "2019-03-27T16:11:46Z", "due_on": null, "closed_at": "2019-03-27T16:11:46Z"}, "comments": 2, "created_at": "2019-03-26T16:14:06Z", "updated_at": "2019-03-27T16:11:38Z", "closed_at": "2019-03-27T16:08:15Z", "author_association": "NONE", "active_lock_reason": null, "body": "A SLiM user is running a model that involves 2000 individuals, with a genome consisting of 2000 unlinked \"chunks\" with a recombination rate of 0.5 between them (to make them unlinked).  This means that each new offspring genome generated involves recording ~1000 crossovers (half the 0.5 points generate a crossover on average), so for 2000 diploid individuals there are ~4,000,000 edges recorded in the edge table in each generation.  They're playing with the simplification interval, and found that if they don't simplify for 1000 generations they get an error.  This seems to me to make sense, because 4,000,000 x 1000 is pushing 2^32; they're probably just overflowing the maximum size of the edge table.  So fine, they should simplify more often, I have no problem with that.\r\n\r\nThe bug here, at first blush, is that the error message is poor: \"add_edge: Unknown error\".  Looking at the code involved, however, I think something more problematic is occurring under the hood.  First of all, I'm not immediately seeing a check for overflowing the maximum size of the table, as dictated by the 32-bit range of table_size_t; perhaps I'm missing that check somewhere.  But second, I think it is not even getting that far.  Once it expands past 2^31, it looks like the code in edge_table_add_row() does \"ret = (edge_id_t)self->num_rows\" and then returns ret.  This casts num_rows, which is a table_size_t and thus a uint32_t, to an edge_id_t which is an int_32_t.  When the table size is > 2^31, it therefore returns a negative number, which is interpreted as an error code, but of course it is essentially a random number and often does not correspond to any defined error code \u2013 thus \"unknown error\".\r\n\r\nSo I guess there are a couple of things going on here; the table needs to detect that it has been asked to resize beyond its limit, and throw an error about that right up front.  And two, the limit needs to be 2^31, not 2^32, if you're going to return the number of rows as a signed int and use negative numbers as error codes.  Obviously it's unfortunate to impose a 2^31 limit just for that reason; but if edge_id_t is int_32_t then perhaps that limit is necessary for other reasons as well.\r\n\r\nThis issue is of no particular urgency to me.  It's an unusual model that is clearly pushing the limits, and I don't expect other people to hit this problem often.  I've told them that they need to simplify more often, and explained to them that they're just overflowing the edge table; they are fine.  But eventually this does seem like a problem that ought to be fixed, since SLiM users like to do crazy things and overflow the tables.  :->", "reactions": {"url": "https://api.github.com/repos/tskit-dev/tskit/issues/157/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/tskit-dev/tskit/issues/157/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/tskit-dev/tskit/issues/150", "repository_url": "https://api.github.com/repos/tskit-dev/tskit", "labels_url": "https://api.github.com/repos/tskit-dev/tskit/issues/150/labels{/name}", "comments_url": "https://api.github.com/repos/tskit-dev/tskit/issues/150/comments", "events_url": "https://api.github.com/repos/tskit-dev/tskit/issues/150/events", "html_url": "https://github.com/tskit-dev/tskit/issues/150", "id": 422208655, "node_id": "MDU6SXNzdWU0MjIyMDg2NTU=", "number": 150, "title": "Math symbols missing from documentation", "user": {"login": "hyanwong", "id": 4699014, "node_id": "MDQ6VXNlcjQ2OTkwMTQ=", "avatar_url": "https://avatars.githubusercontent.com/u/4699014?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hyanwong", "html_url": "https://github.com/hyanwong", "followers_url": "https://api.github.com/users/hyanwong/followers", "following_url": "https://api.github.com/users/hyanwong/following{/other_user}", "gists_url": "https://api.github.com/users/hyanwong/gists{/gist_id}", "starred_url": "https://api.github.com/users/hyanwong/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hyanwong/subscriptions", "organizations_url": "https://api.github.com/users/hyanwong/orgs", "repos_url": "https://api.github.com/users/hyanwong/repos", "events_url": "https://api.github.com/users/hyanwong/events{/privacy}", "received_events_url": "https://api.github.com/users/hyanwong/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 831518500, "node_id": "MDU6TGFiZWw4MzE1MTg1MDA=", "url": "https://api.github.com/repos/tskit-dev/tskit/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 10, "created_at": "2019-03-18T13:09:24Z", "updated_at": "2019-12-10T08:16:12Z", "closed_at": "2019-12-10T08:16:12Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "For example, https://tskit.readthedocs.io/en/latest/python-api.html#tskit.LdCalculator.r2_array has the nonsensical phrase \" If the returned array is and direction is tskit.FORWARD then is the value of the statistic for and , the value for and , etc.\"\r\n\r\nThe python documentation uses e.g. \r\n\r\n```\r\n:math:`a` and :math:`a - 2`\r\n```\r\n\r\nhere, but there's obviously some error in converting this into the online docs", "reactions": {"url": "https://api.github.com/repos/tskit-dev/tskit/issues/150/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/tskit-dev/tskit/issues/150/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/tskit-dev/tskit/issues/132", "repository_url": "https://api.github.com/repos/tskit-dev/tskit", "labels_url": "https://api.github.com/repos/tskit-dev/tskit/issues/132/labels{/name}", "comments_url": "https://api.github.com/repos/tskit-dev/tskit/issues/132/comments", "events_url": "https://api.github.com/repos/tskit-dev/tskit/issues/132/events", "html_url": "https://github.com/tskit-dev/tskit/issues/132", "id": 414199062, "node_id": "MDU6SXNzdWU0MTQxOTkwNjI=", "number": 132, "title": "IO errors on table_collection_dump miscalled as OUT_OF_MEMORY", "user": {"login": "jeromekelleher", "id": 2664569, "node_id": "MDQ6VXNlcjI2NjQ1Njk=", "avatar_url": "https://avatars.githubusercontent.com/u/2664569?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jeromekelleher", "html_url": "https://github.com/jeromekelleher", "followers_url": "https://api.github.com/users/jeromekelleher/followers", "following_url": "https://api.github.com/users/jeromekelleher/following{/other_user}", "gists_url": "https://api.github.com/users/jeromekelleher/gists{/gist_id}", "starred_url": "https://api.github.com/users/jeromekelleher/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jeromekelleher/subscriptions", "organizations_url": "https://api.github.com/users/jeromekelleher/orgs", "repos_url": "https://api.github.com/users/jeromekelleher/repos", "events_url": "https://api.github.com/users/jeromekelleher/events{/privacy}", "received_events_url": "https://api.github.com/users/jeromekelleher/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 831518500, "node_id": "MDU6TGFiZWw4MzE1MTg1MDA=", "url": "https://api.github.com/repos/tskit-dev/tskit/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": {"login": "jeromekelleher", "id": 2664569, "node_id": "MDQ6VXNlcjI2NjQ1Njk=", "avatar_url": "https://avatars.githubusercontent.com/u/2664569?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jeromekelleher", "html_url": "https://github.com/jeromekelleher", "followers_url": "https://api.github.com/users/jeromekelleher/followers", "following_url": "https://api.github.com/users/jeromekelleher/following{/other_user}", "gists_url": "https://api.github.com/users/jeromekelleher/gists{/gist_id}", "starred_url": "https://api.github.com/users/jeromekelleher/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jeromekelleher/subscriptions", "organizations_url": "https://api.github.com/users/jeromekelleher/orgs", "repos_url": "https://api.github.com/users/jeromekelleher/repos", "events_url": "https://api.github.com/users/jeromekelleher/events{/privacy}", "received_events_url": "https://api.github.com/users/jeromekelleher/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "jeromekelleher", "id": 2664569, "node_id": "MDQ6VXNlcjI2NjQ1Njk=", "avatar_url": "https://avatars.githubusercontent.com/u/2664569?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jeromekelleher", "html_url": "https://github.com/jeromekelleher", "followers_url": "https://api.github.com/users/jeromekelleher/followers", "following_url": "https://api.github.com/users/jeromekelleher/following{/other_user}", "gists_url": "https://api.github.com/users/jeromekelleher/gists{/gist_id}", "starred_url": "https://api.github.com/users/jeromekelleher/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jeromekelleher/subscriptions", "organizations_url": "https://api.github.com/users/jeromekelleher/orgs", "repos_url": "https://api.github.com/users/jeromekelleher/repos", "events_url": "https://api.github.com/users/jeromekelleher/events{/privacy}", "received_events_url": "https://api.github.com/users/jeromekelleher/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2019-02-25T16:44:07Z", "updated_at": "2019-03-27T16:08:15Z", "closed_at": "2019-03-27T16:08:15Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "In ``tsk_table_collection_dump`` we're not using tsk_set_kas_error, and so the type of error is being interpreted incorrectly.", "reactions": {"url": "https://api.github.com/repos/tskit-dev/tskit/issues/132/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/tskit-dev/tskit/issues/132/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/tskit-dev/tskit/issues/81", "repository_url": "https://api.github.com/repos/tskit-dev/tskit", "labels_url": "https://api.github.com/repos/tskit-dev/tskit/issues/81/labels{/name}", "comments_url": "https://api.github.com/repos/tskit-dev/tskit/issues/81/comments", "events_url": "https://api.github.com/repos/tskit-dev/tskit/issues/81/events", "html_url": "https://github.com/tskit-dev/tskit/issues/81", "id": 398892914, "node_id": "MDU6SXNzdWUzOTg4OTI5MTQ=", "number": 81, "title": "Provenance schema not included in distribution.", "user": {"login": "jeromekelleher", "id": 2664569, "node_id": "MDQ6VXNlcjI2NjQ1Njk=", "avatar_url": "https://avatars.githubusercontent.com/u/2664569?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jeromekelleher", "html_url": "https://github.com/jeromekelleher", "followers_url": "https://api.github.com/users/jeromekelleher/followers", "following_url": "https://api.github.com/users/jeromekelleher/following{/other_user}", "gists_url": "https://api.github.com/users/jeromekelleher/gists{/gist_id}", "starred_url": "https://api.github.com/users/jeromekelleher/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jeromekelleher/subscriptions", "organizations_url": "https://api.github.com/users/jeromekelleher/orgs", "repos_url": "https://api.github.com/users/jeromekelleher/repos", "events_url": "https://api.github.com/users/jeromekelleher/events{/privacy}", "received_events_url": "https://api.github.com/users/jeromekelleher/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 831518500, "node_id": "MDU6TGFiZWw4MzE1MTg1MDA=", "url": "https://api.github.com/repos/tskit-dev/tskit/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2019-01-14T13:40:50Z", "updated_at": "2019-01-14T14:12:13Z", "closed_at": "2019-01-14T14:12:13Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "Results in get_schema failing.\r\n```\r\n  File \"/home/jk/.local/lib/python3.6/site-packages/tskit/provenance.py\", line 94, in get_schema\r\n    with open(schema_file) as f:\r\nFileNotFoundError: [Errno 2] No such file or directory: '/home/jk/.local/lib/python3.6/site-packages/tskit/provenance.schema.json'\r\n```", "reactions": {"url": "https://api.github.com/repos/tskit-dev/tskit/issues/81/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/tskit-dev/tskit/issues/81/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/tskit-dev/tskit/issues/76", "repository_url": "https://api.github.com/repos/tskit-dev/tskit", "labels_url": "https://api.github.com/repos/tskit-dev/tskit/issues/76/labels{/name}", "comments_url": "https://api.github.com/repos/tskit-dev/tskit/issues/76/comments", "events_url": "https://api.github.com/repos/tskit-dev/tskit/issues/76/events", "html_url": "https://github.com/tskit-dev/tskit/issues/76", "id": 398570369, "node_id": "MDU6SXNzdWUzOTg1NzAzNjk=", "number": 76, "title": "Memory leak in tsk_tbl_collection_alloc", "user": {"login": "jeromekelleher", "id": 2664569, "node_id": "MDQ6VXNlcjI2NjQ1Njk=", "avatar_url": "https://avatars.githubusercontent.com/u/2664569?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jeromekelleher", "html_url": "https://github.com/jeromekelleher", "followers_url": "https://api.github.com/users/jeromekelleher/followers", "following_url": "https://api.github.com/users/jeromekelleher/following{/other_user}", "gists_url": "https://api.github.com/users/jeromekelleher/gists{/gist_id}", "starred_url": "https://api.github.com/users/jeromekelleher/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jeromekelleher/subscriptions", "organizations_url": "https://api.github.com/users/jeromekelleher/orgs", "repos_url": "https://api.github.com/users/jeromekelleher/repos", "events_url": "https://api.github.com/users/jeromekelleher/events{/privacy}", "received_events_url": "https://api.github.com/users/jeromekelleher/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 831518500, "node_id": "MDU6TGFiZWw4MzE1MTg1MDA=", "url": "https://api.github.com/repos/tskit-dev/tskit/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}, {"id": 1184840738, "node_id": "MDU6TGFiZWwxMTg0ODQwNzM4", "url": "https://api.github.com/repos/tskit-dev/tskit/labels/C%20API", "name": "C API", "color": "1d76db", "default": false, "description": "Issue is about the C API"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2019-01-12T16:49:43Z", "updated_at": "2019-01-13T16:28:36Z", "closed_at": "2019-01-13T16:28:36Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "The mutation table is being allocated twice. This results in 96 bytes being leaked each time tbl_collection_alloc is called.\r\n\r\nIt's not clear when then this leak was introduced, but it's certainly in the 0.1.1 release so we should update.", "reactions": {"url": "https://api.github.com/repos/tskit-dev/tskit/issues/76/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/tskit-dev/tskit/issues/76/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/tskit-dev/tskit/issues/51", "repository_url": "https://api.github.com/repos/tskit-dev/tskit", "labels_url": "https://api.github.com/repos/tskit-dev/tskit/issues/51/labels{/name}", "comments_url": "https://api.github.com/repos/tskit-dev/tskit/issues/51/comments", "events_url": "https://api.github.com/repos/tskit-dev/tskit/issues/51/events", "html_url": "https://github.com/tskit-dev/tskit/issues/51", "id": 398364924, "node_id": "MDU6SXNzdWUzOTgzNjQ5MjQ=", "number": 51, "title": "Version 0.1.0 not installing from tarball", "user": {"login": "jeromekelleher", "id": 2664569, "node_id": "MDQ6VXNlcjI2NjQ1Njk=", "avatar_url": "https://avatars.githubusercontent.com/u/2664569?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jeromekelleher", "html_url": "https://github.com/jeromekelleher", "followers_url": "https://api.github.com/users/jeromekelleher/followers", "following_url": "https://api.github.com/users/jeromekelleher/following{/other_user}", "gists_url": "https://api.github.com/users/jeromekelleher/gists{/gist_id}", "starred_url": "https://api.github.com/users/jeromekelleher/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jeromekelleher/subscriptions", "organizations_url": "https://api.github.com/users/jeromekelleher/orgs", "repos_url": "https://api.github.com/users/jeromekelleher/repos", "events_url": "https://api.github.com/users/jeromekelleher/events{/privacy}", "received_events_url": "https://api.github.com/users/jeromekelleher/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 831518500, "node_id": "MDU6TGFiZWw4MzE1MTg1MDA=", "url": "https://api.github.com/repos/tskit-dev/tskit/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2019-01-11T16:38:57Z", "updated_at": "2019-01-11T17:00:33Z", "closed_at": "2019-01-11T17:00:33Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "```\r\n  ----------------------------------------\r\n  Failed building wheel for tskit\r\n  Running setup.py clean for tskit\r\nFailed to build tskit\r\nInstalling collected packages: tskit\r\n  Running setup.py install for tskit ... error\r\n    Complete output from command /usr/bin/python3 -u -c \"import setuptools, tokenize;__file__='/tmp/pip-install-ked0202h/tskit/setup.py';f=getattr(tokenize, 'open', open)(__file__);code=f.read().replace('\\r\\n', '\\n');f.close();exec(compile(code, __file__, 'exec'))\" install --record /tmp/pip-record-zoniuy0o/install-record.txt --single-version-externally-managed --compile --user --prefix=:\r\n    running install\r\n    running build\r\n    running build_py\r\n    creating build\r\n    creating build/lib.linux-x86_64-3.6\r\n    creating build/lib.linux-x86_64-3.6/tskit\r\n    copying tskit/drawing.py -> build/lib.linux-x86_64-3.6/tskit\r\n    copying tskit/exceptions.py -> build/lib.linux-x86_64-3.6/tskit\r\n    copying tskit/tables.py -> build/lib.linux-x86_64-3.6/tskit\r\n    copying tskit/formats.py -> build/lib.linux-x86_64-3.6/tskit\r\n    copying tskit/provenance.py -> build/lib.linux-x86_64-3.6/tskit\r\n    copying tskit/_version.py -> build/lib.linux-x86_64-3.6/tskit\r\n    copying tskit/trees.py -> build/lib.linux-x86_64-3.6/tskit\r\n    copying tskit/stats.py -> build/lib.linux-x86_64-3.6/tskit\r\n    copying tskit/__init__.py -> build/lib.linux-x86_64-3.6/tskit\r\n    running egg_info\r\n    writing tskit.egg-info/PKG-INFO\r\n    writing dependency_links to tskit.egg-info/dependency_links.txt\r\n    writing entry points to tskit.egg-info/entry_points.txt\r\n    writing requirements to tskit.egg-info/requires.txt\r\n    writing top-level names to tskit.egg-info/top_level.txt\r\n    reading manifest file 'tskit.egg-info/SOURCES.txt'\r\n    reading manifest template 'MANIFEST.in'\r\n    writing manifest file 'tskit.egg-info/SOURCES.txt'\r\n    running build_ext\r\n    building '_tskit' extension\r\n    creating build/temp.linux-x86_64-3.6\r\n    creating build/temp.linux-x86_64-3.6/lib\r\n    creating build/temp.linux-x86_64-3.6/lib/kastore\r\n    creating build/temp.linux-x86_64-3.6/lib/kastore/c\r\n    x86_64-linux-gnu-gcc -pthread -DNDEBUG -g -fwrapv -O2 -Wall -g -fstack-protector-strong -Wformat -Werror=format-security -Wdate-time -D_FORTIFY_SOURCE=2 -fPIC -UNDEBUG -Ilib -Ilib/kastore/c -I/usr/include/python3.6m -I/home/jk/.local/lib/python3.6/site-packages/numpy/core/include -c _tskitmodule.c -o build/temp.linux-x86_64-3.6/_tskitmodule.o -std=c99\r\n    _tskitmodule.c:29:10: fatal error: tskit.h: No such file or directory\r\n     #include \"tskit.h\"\r\n              ^~~~~~~~~\r\n    compilation terminated.\r\n    error: command 'x86_64-linux-gnu-gcc' failed with exit status 1\r\n```", "reactions": {"url": "https://api.github.com/repos/tskit-dev/tskit/issues/51/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/tskit-dev/tskit/issues/51/timeline", "performed_via_github_app": null, "state_reason": "completed"}]