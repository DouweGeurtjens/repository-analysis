[{"url": "https://api.github.com/repos/fizyr/keras-retinanet/issues/345", "repository_url": "https://api.github.com/repos/fizyr/keras-retinanet", "labels_url": "https://api.github.com/repos/fizyr/keras-retinanet/issues/345/labels{/name}", "comments_url": "https://api.github.com/repos/fizyr/keras-retinanet/issues/345/comments", "events_url": "https://api.github.com/repos/fizyr/keras-retinanet/issues/345/events", "html_url": "https://github.com/fizyr/keras-retinanet/issues/345", "id": 307153098, "node_id": "MDU6SXNzdWUzMDcxNTMwOTg=", "number": 345, "title": "create_callbacks() crash under Python 2.7 if snapshots", "user": {"login": "pderian", "id": 24920397, "node_id": "MDQ6VXNlcjI0OTIwMzk3", "avatar_url": "https://avatars.githubusercontent.com/u/24920397?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pderian", "html_url": "https://github.com/pderian", "followers_url": "https://api.github.com/users/pderian/followers", "following_url": "https://api.github.com/users/pderian/following{/other_user}", "gists_url": "https://api.github.com/users/pderian/gists{/gist_id}", "starred_url": "https://api.github.com/users/pderian/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pderian/subscriptions", "organizations_url": "https://api.github.com/users/pderian/orgs", "repos_url": "https://api.github.com/users/pderian/repos", "events_url": "https://api.github.com/users/pderian/events{/privacy}", "received_events_url": "https://api.github.com/users/pderian/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 668289652, "node_id": "MDU6TGFiZWw2NjgyODk2NTI=", "url": "https://api.github.com/repos/fizyr/keras-retinanet/labels/bug", "name": "bug", "color": "b60205", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 7, "created_at": "2018-03-21T08:24:15Z", "updated_at": "2018-03-23T19:27:55Z", "closed_at": "2018-03-23T19:27:55Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "In `train.py:create_calbacks()` l. 99: `exist_ok` is valid option of `os.makedirs()` under Python 3, not Python 2.7. Tests pass as they have the` --no-snapshot` option.\r\n\r\nhttps://github.com/fizyr/keras-retinanet/blob/7ba5ec2bf3497c9fd4c8dd2534d0d1d15e717a9b/keras_retinanet/bin/train.py#L99", "reactions": {"url": "https://api.github.com/repos/fizyr/keras-retinanet/issues/345/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/fizyr/keras-retinanet/issues/345/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/fizyr/keras-retinanet/issues/342", "repository_url": "https://api.github.com/repos/fizyr/keras-retinanet", "labels_url": "https://api.github.com/repos/fizyr/keras-retinanet/issues/342/labels{/name}", "comments_url": "https://api.github.com/repos/fizyr/keras-retinanet/issues/342/comments", "events_url": "https://api.github.com/repos/fizyr/keras-retinanet/issues/342/events", "html_url": "https://github.com/fizyr/keras-retinanet/issues/342", "id": 306395760, "node_id": "MDU6SXNzdWUzMDYzOTU3NjA=", "number": 342, "title": "Anchor strides with MobileNet", "user": {"login": "jola6897", "id": 13314142, "node_id": "MDQ6VXNlcjEzMzE0MTQy", "avatar_url": "https://avatars.githubusercontent.com/u/13314142?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jola6897", "html_url": "https://github.com/jola6897", "followers_url": "https://api.github.com/users/jola6897/followers", "following_url": "https://api.github.com/users/jola6897/following{/other_user}", "gists_url": "https://api.github.com/users/jola6897/gists{/gist_id}", "starred_url": "https://api.github.com/users/jola6897/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jola6897/subscriptions", "organizations_url": "https://api.github.com/users/jola6897/orgs", "repos_url": "https://api.github.com/users/jola6897/repos", "events_url": "https://api.github.com/users/jola6897/events{/privacy}", "received_events_url": "https://api.github.com/users/jola6897/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 668289652, "node_id": "MDU6TGFiZWw2NjgyODk2NTI=", "url": "https://api.github.com/repos/fizyr/keras-retinanet/labels/bug", "name": "bug", "color": "b60205", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 9, "created_at": "2018-03-19T09:56:58Z", "updated_at": "2018-03-31T19:17:23Z", "closed_at": "2018-03-31T19:17:23Z", "author_association": "NONE", "active_lock_reason": null, "body": "I observed that the separable convolutions with stride 2 in MobileNet round up not down (like ResNet) if the image dimension is not divisible by 2. Therefore a 240x**135** score map is transformed to 120x**68**. How do the pixels of the new score maps correspond to the coordinates in the original image? Does this in any way affect the placement of the anchors?", "reactions": {"url": "https://api.github.com/repos/fizyr/keras-retinanet/issues/342/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/fizyr/keras-retinanet/issues/342/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/fizyr/keras-retinanet/issues/340", "repository_url": "https://api.github.com/repos/fizyr/keras-retinanet", "labels_url": "https://api.github.com/repos/fizyr/keras-retinanet/issues/340/labels{/name}", "comments_url": "https://api.github.com/repos/fizyr/keras-retinanet/issues/340/comments", "events_url": "https://api.github.com/repos/fizyr/keras-retinanet/issues/340/events", "html_url": "https://github.com/fizyr/keras-retinanet/issues/340", "id": 306135177, "node_id": "MDU6SXNzdWUzMDYxMzUxNzc=", "number": 340, "title": "MobileNet and ResNet need different preprocessing", "user": {"login": "jola6897", "id": 13314142, "node_id": "MDQ6VXNlcjEzMzE0MTQy", "avatar_url": "https://avatars.githubusercontent.com/u/13314142?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jola6897", "html_url": "https://github.com/jola6897", "followers_url": "https://api.github.com/users/jola6897/followers", "following_url": "https://api.github.com/users/jola6897/following{/other_user}", "gists_url": "https://api.github.com/users/jola6897/gists{/gist_id}", "starred_url": "https://api.github.com/users/jola6897/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jola6897/subscriptions", "organizations_url": "https://api.github.com/users/jola6897/orgs", "repos_url": "https://api.github.com/users/jola6897/repos", "events_url": "https://api.github.com/users/jola6897/events{/privacy}", "received_events_url": "https://api.github.com/users/jola6897/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 668289652, "node_id": "MDU6TGFiZWw2NjgyODk2NTI=", "url": "https://api.github.com/repos/fizyr/keras-retinanet/labels/bug", "name": "bug", "color": "b60205", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2018-03-17T07:14:58Z", "updated_at": "2018-06-29T07:56:16Z", "closed_at": "2018-06-29T07:56:16Z", "author_association": "NONE", "active_lock_reason": null, "body": "The models from keras.applications are using different preprocessing stategies. ResNet50 uses BGR and zero centered data. Whereas MobileNet uses RGB and scaled pixel values from -1 to 1. See keras.applications.mobilenet.preprocess_input. Both use keras.applications.imagenet.preprocess_input but different modes: Mobilenet uses 'tf' and Resnet 'caffee'.\r\n\r\nI recommend replacing the custom load image and zero centering with the keras functions to avoid confusions.", "reactions": {"url": "https://api.github.com/repos/fizyr/keras-retinanet/issues/340/reactions", "total_count": 4, "+1": 4, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/fizyr/keras-retinanet/issues/340/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/fizyr/keras-retinanet/issues/325", "repository_url": "https://api.github.com/repos/fizyr/keras-retinanet", "labels_url": "https://api.github.com/repos/fizyr/keras-retinanet/issues/325/labels{/name}", "comments_url": "https://api.github.com/repos/fizyr/keras-retinanet/issues/325/comments", "events_url": "https://api.github.com/repos/fizyr/keras-retinanet/issues/325/events", "html_url": "https://github.com/fizyr/keras-retinanet/issues/325", "id": 304056561, "node_id": "MDU6SXNzdWUzMDQwNTY1NjE=", "number": 325, "title": "Performance of batch_size > 1", "user": {"login": "hgaiser", "id": 716138, "node_id": "MDQ6VXNlcjcxNjEzOA==", "avatar_url": "https://avatars.githubusercontent.com/u/716138?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hgaiser", "html_url": "https://github.com/hgaiser", "followers_url": "https://api.github.com/users/hgaiser/followers", "following_url": "https://api.github.com/users/hgaiser/following{/other_user}", "gists_url": "https://api.github.com/users/hgaiser/gists{/gist_id}", "starred_url": "https://api.github.com/users/hgaiser/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hgaiser/subscriptions", "organizations_url": "https://api.github.com/users/hgaiser/orgs", "repos_url": "https://api.github.com/users/hgaiser/repos", "events_url": "https://api.github.com/users/hgaiser/events{/privacy}", "received_events_url": "https://api.github.com/users/hgaiser/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 668289652, "node_id": "MDU6TGFiZWw2NjgyODk2NTI=", "url": "https://api.github.com/repos/fizyr/keras-retinanet/labels/bug", "name": "bug", "color": "b60205", "default": true, "description": null}, {"id": 668289655, "node_id": "MDU6TGFiZWw2NjgyODk2NTU=", "url": "https://api.github.com/repos/fizyr/keras-retinanet/labels/help%20wanted", "name": "help wanted", "color": "128A0C", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 25, "created_at": "2018-03-10T09:25:27Z", "updated_at": "2021-06-04T07:23:32Z", "closed_at": "2018-04-21T05:36:08Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Theoretically `batch_size > 1` should be working, practically however performance appears to degrade. I've looked at the data generator and loss functions but everything appears to be fine.\r\n\r\nI'm not sure where the degradation of performance comes from, perhaps a fresh set of eyes can help uncover the issue? My intuition expects the problem to be in the loss function, or a deeper issue in Keras / Tensorflow perhaps.\r\n\r\nIn extension, this also breaks multi GPU support since that requires `batch_size > 1`.\r\n\r\n@awilliamson I think you ran some tests on this right? Do you still have them stored somewhere? Can you share them?", "reactions": {"url": "https://api.github.com/repos/fizyr/keras-retinanet/issues/325/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/fizyr/keras-retinanet/issues/325/timeline", "performed_via_github_app": null, "state_reason": "completed"}]