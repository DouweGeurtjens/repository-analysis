[{"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/6648", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/6648/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/6648/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/6648/events", "html_url": "https://github.com/freedomofpress/securedrop/issues/6648", "id": 1412423254, "node_id": "I_kwDOADArVM5UL95W", "number": 6648, "title": "`i18n_tool.py update-from-weblate` no longer detects translators for attribution", "user": {"login": "cfm", "id": 357435, "node_id": "MDQ6VXNlcjM1NzQzNQ==", "avatar_url": "https://avatars.githubusercontent.com/u/357435?v=4", "gravatar_id": "", "url": "https://api.github.com/users/cfm", "html_url": "https://github.com/cfm", "followers_url": "https://api.github.com/users/cfm/followers", "following_url": "https://api.github.com/users/cfm/following{/other_user}", "gists_url": "https://api.github.com/users/cfm/gists{/gist_id}", "starred_url": "https://api.github.com/users/cfm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/cfm/subscriptions", "organizations_url": "https://api.github.com/users/cfm/orgs", "repos_url": "https://api.github.com/users/cfm/repos", "events_url": "https://api.github.com/users/cfm/events{/privacy}", "received_events_url": "https://api.github.com/users/cfm/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}, {"id": 652906953, "node_id": "MDU6TGFiZWw2NTI5MDY5NTM=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/i18n", "name": "i18n", "color": "d4c5f9", "default": false, "description": "Anything related to translation or internationalization of SecureDrop"}], "state": "closed", "locked": false, "assignee": {"login": "cfm", "id": 357435, "node_id": "MDQ6VXNlcjM1NzQzNQ==", "avatar_url": "https://avatars.githubusercontent.com/u/357435?v=4", "gravatar_id": "", "url": "https://api.github.com/users/cfm", "html_url": "https://github.com/cfm", "followers_url": "https://api.github.com/users/cfm/followers", "following_url": "https://api.github.com/users/cfm/following{/other_user}", "gists_url": "https://api.github.com/users/cfm/gists{/gist_id}", "starred_url": "https://api.github.com/users/cfm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/cfm/subscriptions", "organizations_url": "https://api.github.com/users/cfm/orgs", "repos_url": "https://api.github.com/users/cfm/repos", "events_url": "https://api.github.com/users/cfm/events{/privacy}", "received_events_url": "https://api.github.com/users/cfm/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "cfm", "id": 357435, "node_id": "MDQ6VXNlcjM1NzQzNQ==", "avatar_url": "https://avatars.githubusercontent.com/u/357435?v=4", "gravatar_id": "", "url": "https://api.github.com/users/cfm", "html_url": "https://github.com/cfm", "followers_url": "https://api.github.com/users/cfm/followers", "following_url": "https://api.github.com/users/cfm/following{/other_user}", "gists_url": "https://api.github.com/users/cfm/gists{/gist_id}", "starred_url": "https://api.github.com/users/cfm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/cfm/subscriptions", "organizations_url": "https://api.github.com/users/cfm/orgs", "repos_url": "https://api.github.com/users/cfm/repos", "events_url": "https://api.github.com/users/cfm/events{/privacy}", "received_events_url": "https://api.github.com/users/cfm/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/freedomofpress/securedrop/milestones/80", "html_url": "https://github.com/freedomofpress/securedrop/milestone/80", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/milestones/80/labels", "id": 8188771, "node_id": "MI_kwDOADArVM4AfPNj", "number": 80, "title": "2.6.0", "description": "", "creator": {"login": "eloquence", "id": 213636, "node_id": "MDQ6VXNlcjIxMzYzNg==", "avatar_url": "https://avatars.githubusercontent.com/u/213636?v=4", "gravatar_id": "", "url": "https://api.github.com/users/eloquence", "html_url": "https://github.com/eloquence", "followers_url": "https://api.github.com/users/eloquence/followers", "following_url": "https://api.github.com/users/eloquence/following{/other_user}", "gists_url": "https://api.github.com/users/eloquence/gists{/gist_id}", "starred_url": "https://api.github.com/users/eloquence/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/eloquence/subscriptions", "organizations_url": "https://api.github.com/users/eloquence/orgs", "repos_url": "https://api.github.com/users/eloquence/repos", "events_url": "https://api.github.com/users/eloquence/events{/privacy}", "received_events_url": "https://api.github.com/users/eloquence/received_events", "type": "User", "site_admin": false}, "open_issues": 11, "closed_issues": 18, "state": "open", "created_at": "2022-07-12T18:24:25Z", "updated_at": "2023-04-14T21:23:15Z", "due_on": null, "closed_at": null}, "comments": 2, "created_at": "2022-10-18T01:03:06Z", "updated_at": "2022-10-20T18:28:50Z", "closed_at": "2022-10-20T18:28:49Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "## Description\r\n\r\nAfter #6580, including with the fix proposed in #6629, `i18n_tool.py update-from-weblate` fails to detect the translators to credit for each per-language commit.\r\n\r\n## Steps to Reproduce\r\n\r\n```sh-session\r\nuser@sd-dev:~/securedrop$ securedrop/bin/dev-shell ./i18n_tool.py update-from-weblate\r\n```\r\n\r\n## Expected Behavior\r\n\r\n```sh-session\r\nuser@sd-dev:~/securedrop$ git log -n 1 --no-show-signature i18n-merge\r\ncommit eb99e5c2f98ee3b901294251399280e0abf0c043 (origin/i18n-merge, i18n-merge)\r\nAuthor: Cory Francis Myers <cory@freedom.press>\r\nDate:   Mon Oct 17 23:58:21 2022 +0000\r\n\r\n    l10n: updated bn (bn)\r\n    \r\n    contributors:\r\n      Oymate\r\n      diyaf\r\n    \r\n    updated from:\r\n      repo: https://github.com/freedomofpress/securedrop-i18n\r\n      commit: 95b4cc8f2cdf2bb7f338b4c2cc996704a1f1909\r\n```\r\n\r\n## Actual Behavior\r\n\r\n```sh-session\r\nuser@sd-dev:~/securedrop$ git log -n 1 --no-show-signature\r\ncommit e7642f527c09172304dafe578aec4cd182d9cd0d (HEAD -> develop)\r\nAuthor: Cory Francis Myers <cory@freedom.press>\r\nDate:   Tue Oct 18 00:57:00 2022 +0000\r\n\r\n    l10n: updated bn (bn)\r\n    \r\n    contributors:\r\n    \r\n    updated from:\r\n      repo: https://github.com/freedomofpress/securedrop-i18n\r\n      commit: 95b4cc8f2cdf2bb7f338b4c2cc996704a1f1909d\r\n```\r\n\r\n## Comments\r\n\r\nI haven't had time to debug this as part of the v2.5.0 localization merge, so for #6646 I've worked around it locally with:\r\n\r\n```sh-session\r\nuser@sd-dev:~/securedrop$ git revert -m1 -n 94c6bbb\r\n```", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/6648/reactions", "total_count": 1, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 1, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/6648/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/6628", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/6628/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/6628/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/6628/events", "html_url": "https://github.com/freedomofpress/securedrop/issues/6628", "id": 1408464523, "node_id": "I_kwDOADArVM5T83aL", "number": 6628, "title": "Translation-related errors in output when running `make dev`", "user": {"login": "eloquence", "id": 213636, "node_id": "MDQ6VXNlcjIxMzYzNg==", "avatar_url": "https://avatars.githubusercontent.com/u/213636?v=4", "gravatar_id": "", "url": "https://api.github.com/users/eloquence", "html_url": "https://github.com/eloquence", "followers_url": "https://api.github.com/users/eloquence/followers", "following_url": "https://api.github.com/users/eloquence/following{/other_user}", "gists_url": "https://api.github.com/users/eloquence/gists{/gist_id}", "starred_url": "https://api.github.com/users/eloquence/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/eloquence/subscriptions", "organizations_url": "https://api.github.com/users/eloquence/orgs", "repos_url": "https://api.github.com/users/eloquence/repos", "events_url": "https://api.github.com/users/eloquence/events{/privacy}", "received_events_url": "https://api.github.com/users/eloquence/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}, {"id": 616447641, "node_id": "MDU6TGFiZWw2MTY0NDc2NDE=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/development%20env", "name": "development env", "color": "bfd4f2", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "legoktm", "id": 81392, "node_id": "MDQ6VXNlcjgxMzky", "avatar_url": "https://avatars.githubusercontent.com/u/81392?v=4", "gravatar_id": "", "url": "https://api.github.com/users/legoktm", "html_url": "https://github.com/legoktm", "followers_url": "https://api.github.com/users/legoktm/followers", "following_url": "https://api.github.com/users/legoktm/following{/other_user}", "gists_url": "https://api.github.com/users/legoktm/gists{/gist_id}", "starred_url": "https://api.github.com/users/legoktm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/legoktm/subscriptions", "organizations_url": "https://api.github.com/users/legoktm/orgs", "repos_url": "https://api.github.com/users/legoktm/repos", "events_url": "https://api.github.com/users/legoktm/events{/privacy}", "received_events_url": "https://api.github.com/users/legoktm/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "legoktm", "id": 81392, "node_id": "MDQ6VXNlcjgxMzky", "avatar_url": "https://avatars.githubusercontent.com/u/81392?v=4", "gravatar_id": "", "url": "https://api.github.com/users/legoktm", "html_url": "https://github.com/legoktm", "followers_url": "https://api.github.com/users/legoktm/followers", "following_url": "https://api.github.com/users/legoktm/following{/other_user}", "gists_url": "https://api.github.com/users/legoktm/gists{/gist_id}", "starred_url": "https://api.github.com/users/legoktm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/legoktm/subscriptions", "organizations_url": "https://api.github.com/users/legoktm/orgs", "repos_url": "https://api.github.com/users/legoktm/repos", "events_url": "https://api.github.com/users/legoktm/events{/privacy}", "received_events_url": "https://api.github.com/users/legoktm/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 4, "created_at": "2022-10-13T21:48:18Z", "updated_at": "2022-10-20T00:22:14Z", "closed_at": "2022-10-20T00:22:14Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "Haven't tried to prune Docker files yet, so might be specific to my env (this is on latest `develop`). Seeing errors like this:\r\n\r\n```\r\nWARNING: Start of line didn't match any expected keyword.\r\nWARNING: Problem on line 1258: '| msgid \"Must be at least {num} character long.\"'\r\nWARNING: Start of line didn't match any expected keyword.\r\nWARNING: Problem on line 1259: '| msgid_plural \"Must be at least {num} characters long.\"'\r\ncompiling catalog /home/erik/Code/securedrop/securedrop/translations/fr_FR/LC_MESSAGES/messages.po to /home/erik/Code/securedrop/securedrop/translations/fr_FR/LC_MESSAGES/messages.mo\r\n```", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/6628/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/6628/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/6566", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/6566/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/6566/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/6566/events", "html_url": "https://github.com/freedomofpress/securedrop/issues/6566", "id": 1388105992, "node_id": "I_kwDOADArVM5SvNEI", "number": 6566, "title": "`make build-debs` failing on develop during a translation step", "user": {"login": "zenmonkeykstop", "id": 2782952, "node_id": "MDQ6VXNlcjI3ODI5NTI=", "avatar_url": "https://avatars.githubusercontent.com/u/2782952?v=4", "gravatar_id": "", "url": "https://api.github.com/users/zenmonkeykstop", "html_url": "https://github.com/zenmonkeykstop", "followers_url": "https://api.github.com/users/zenmonkeykstop/followers", "following_url": "https://api.github.com/users/zenmonkeykstop/following{/other_user}", "gists_url": "https://api.github.com/users/zenmonkeykstop/gists{/gist_id}", "starred_url": "https://api.github.com/users/zenmonkeykstop/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/zenmonkeykstop/subscriptions", "organizations_url": "https://api.github.com/users/zenmonkeykstop/orgs", "repos_url": "https://api.github.com/users/zenmonkeykstop/repos", "events_url": "https://api.github.com/users/zenmonkeykstop/events{/privacy}", "received_events_url": "https://api.github.com/users/zenmonkeykstop/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}, {"id": 616447722, "node_id": "MDU6TGFiZWw2MTY0NDc3MjI=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/build%20process", "name": "build process", "color": "bfd4f2", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2022-09-27T17:20:31Z", "updated_at": "2022-09-27T19:01:46Z", "closed_at": "2022-09-27T19:01:46Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "## Description\r\n\r\n\r\n## Steps to Reproduce\r\n\r\n- Check out current develop branch\r\n- run `make build-debs`\r\n\r\n## Expected Behavior\r\nDebs get built.\r\n\r\n\r\n## Actual Behavior\r\nbuild fails with:\r\n```\r\n    TASK [build-securedrop-app-code-deb-pkg : Compile PO to MO.] *******************\r\nfatal: [focal-sd-app]: FAILED! => {\"changed\": true, \"cmd\": \"cp config.py.example config.py ; trap 'rm config.py' EXIT ; . /tmp/securedrop-app-code-i18n-ve/bin/activate ; /tmp/securedrop-app-code-i18n-ve/bin/python3 ./i18n_tool.py --verbose translate-messages --compile\", \"delta\": \"0:00:00.134601\", \"end\": \"2022-09-27 17:17:33.927583\", \"msg\": \"non-zero return code\", \"rc\": 1, \"start\": \"2022-09-27 17:17:33.792982\", \"stderr\": \"Traceback (most recent call last):\\n  File \\\"./i18n_tool.py\\\", line 36, in <module>\\n    class I18NTool:\\n  File \\\"./i18n_tool.py\\\", line 47, in I18NTool\\n    with open(I18N_CONF) as i18n_conf:\\nFileNotFoundError: [Errno 2] No such file or directory: './i18n.json'\", \"stderr_lines\": [\"Traceback (most recent call last):\", \"  File \\\"./i18n_tool.py\\\", line 36, in <module>\", \"    class I18NTool:\", \"  File \\\"./i18n_tool.py\\\", line 47, in I18NTool\", \"    with open(I18N_CONF) as i18n_conf:\", \"FileNotFoundError: [Errno 2] No such file or directory: './i18n.json'\"], \"stdout\": \"\", \"stdout_lines\": []}\r\n```    \r\n\r\n\r\n\r\n## Comments\r\n\r\nSuggestions to fix, any other relevant information.\r\n", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/6566/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/6566/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/6491", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/6491/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/6491/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/6491/events", "html_url": "https://github.com/freedomofpress/securedrop/issues/6491", "id": 1308339803, "node_id": "I_kwDOADArVM5N-65b", "number": 6491, "title": "Initial messages containing non-ascii characters fail if codename filtering is enabled.", "user": {"login": "zenmonkeykstop", "id": 2782952, "node_id": "MDQ6VXNlcjI3ODI5NTI=", "avatar_url": "https://avatars.githubusercontent.com/u/2782952?v=4", "gravatar_id": "", "url": "https://api.github.com/users/zenmonkeykstop", "html_url": "https://github.com/zenmonkeykstop", "followers_url": "https://api.github.com/users/zenmonkeykstop/followers", "following_url": "https://api.github.com/users/zenmonkeykstop/following{/other_user}", "gists_url": "https://api.github.com/users/zenmonkeykstop/gists{/gist_id}", "starred_url": "https://api.github.com/users/zenmonkeykstop/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/zenmonkeykstop/subscriptions", "organizations_url": "https://api.github.com/users/zenmonkeykstop/orgs", "repos_url": "https://api.github.com/users/zenmonkeykstop/repos", "events_url": "https://api.github.com/users/zenmonkeykstop/events{/privacy}", "received_events_url": "https://api.github.com/users/zenmonkeykstop/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}, {"id": 157793311, "node_id": "MDU6TGFiZWwxNTc3OTMzMTE=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/priority/high", "name": "priority/high", "color": "e64ef4", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2022-07-18T18:12:52Z", "updated_at": "2022-07-18T19:25:28Z", "closed_at": "2022-07-18T19:25:28Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "## Description\r\n\r\nCodename filtering was introduced in 2.3.0, allowing admins to block initial submissions containing only the user's codename, as they should not be shared with journalists. The filter uses the `compare_digest()` function to ensure constant-time comparison, but this fn will throw a `TypeError` if any of the strings being compared  contain Unicode.\r\n\r\n## Steps to Reproduce\r\n\r\n- start up `make dev` on 2.4.0\r\n- visit the JI and enable codename filtering under Admin > Instance Config\r\n- visit the SI, create a new source, and submit an initial message containing unicode, ie `Hallo! \u00f6, \u00fc, \u00e4, or \u00df`\r\n\r\n## Expected Behavior\r\n- Message is submitted\r\n\r\n## Actual Behavior\r\n- 500 error, and (in dev) stack trace due to TypeError\r\n\r\n## Comments\r\n\r\nSuggestions to fix, any other relevant information.\r\n", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/6491/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/6491/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/6475", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/6475/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/6475/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/6475/events", "html_url": "https://github.com/freedomofpress/securedrop/issues/6475", "id": 1259393281, "node_id": "I_kwDOADArVM5LENEB", "number": 6475, "title": "`map_locale_display_names()` does not set `use_display_name` for the first of multiple locales for a language", "user": {"login": "cfm", "id": 357435, "node_id": "MDQ6VXNlcjM1NzQzNQ==", "avatar_url": "https://avatars.githubusercontent.com/u/357435?v=4", "gravatar_id": "", "url": "https://api.github.com/users/cfm", "html_url": "https://github.com/cfm", "followers_url": "https://api.github.com/users/cfm/followers", "following_url": "https://api.github.com/users/cfm/following{/other_user}", "gists_url": "https://api.github.com/users/cfm/gists{/gist_id}", "starred_url": "https://api.github.com/users/cfm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/cfm/subscriptions", "organizations_url": "https://api.github.com/users/cfm/orgs", "repos_url": "https://api.github.com/users/cfm/repos", "events_url": "https://api.github.com/users/cfm/events{/privacy}", "received_events_url": "https://api.github.com/users/cfm/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}, {"id": 652906953, "node_id": "MDU6TGFiZWw2NTI5MDY5NTM=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/i18n", "name": "i18n", "color": "d4c5f9", "default": false, "description": "Anything related to translation or internationalization of SecureDrop"}], "state": "closed", "locked": false, "assignee": {"login": "zenmonkeykstop", "id": 2782952, "node_id": "MDQ6VXNlcjI3ODI5NTI=", "avatar_url": "https://avatars.githubusercontent.com/u/2782952?v=4", "gravatar_id": "", "url": "https://api.github.com/users/zenmonkeykstop", "html_url": "https://github.com/zenmonkeykstop", "followers_url": "https://api.github.com/users/zenmonkeykstop/followers", "following_url": "https://api.github.com/users/zenmonkeykstop/following{/other_user}", "gists_url": "https://api.github.com/users/zenmonkeykstop/gists{/gist_id}", "starred_url": "https://api.github.com/users/zenmonkeykstop/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/zenmonkeykstop/subscriptions", "organizations_url": "https://api.github.com/users/zenmonkeykstop/orgs", "repos_url": "https://api.github.com/users/zenmonkeykstop/repos", "events_url": "https://api.github.com/users/zenmonkeykstop/events{/privacy}", "received_events_url": "https://api.github.com/users/zenmonkeykstop/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "zenmonkeykstop", "id": 2782952, "node_id": "MDQ6VXNlcjI3ODI5NTI=", "avatar_url": "https://avatars.githubusercontent.com/u/2782952?v=4", "gravatar_id": "", "url": "https://api.github.com/users/zenmonkeykstop", "html_url": "https://github.com/zenmonkeykstop", "followers_url": "https://api.github.com/users/zenmonkeykstop/followers", "following_url": "https://api.github.com/users/zenmonkeykstop/following{/other_user}", "gists_url": "https://api.github.com/users/zenmonkeykstop/gists{/gist_id}", "starred_url": "https://api.github.com/users/zenmonkeykstop/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/zenmonkeykstop/subscriptions", "organizations_url": "https://api.github.com/users/zenmonkeykstop/orgs", "repos_url": "https://api.github.com/users/zenmonkeykstop/repos", "events_url": "https://api.github.com/users/zenmonkeykstop/events{/privacy}", "received_events_url": "https://api.github.com/users/zenmonkeykstop/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/freedomofpress/securedrop/milestones/79", "html_url": "https://github.com/freedomofpress/securedrop/milestone/79", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/milestones/79/labels", "id": 7943747, "node_id": "MI_kwDOADArVM4AeTZD", "number": 79, "title": "2.5.0", "description": "", "creator": {"login": "legoktm", "id": 81392, "node_id": "MDQ6VXNlcjgxMzky", "avatar_url": "https://avatars.githubusercontent.com/u/81392?v=4", "gravatar_id": "", "url": "https://api.github.com/users/legoktm", "html_url": "https://github.com/legoktm", "followers_url": "https://api.github.com/users/legoktm/followers", "following_url": "https://api.github.com/users/legoktm/following{/other_user}", "gists_url": "https://api.github.com/users/legoktm/gists{/gist_id}", "starred_url": "https://api.github.com/users/legoktm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/legoktm/subscriptions", "organizations_url": "https://api.github.com/users/legoktm/orgs", "repos_url": "https://api.github.com/users/legoktm/repos", "events_url": "https://api.github.com/users/legoktm/events{/privacy}", "received_events_url": "https://api.github.com/users/legoktm/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 28, "state": "closed", "created_at": "2022-05-04T16:35:10Z", "updated_at": "2022-10-20T15:20:44Z", "due_on": "2022-10-18T07:00:00Z", "closed_at": "2022-10-20T15:20:44Z"}, "comments": 0, "created_at": "2022-06-03T04:21:12Z", "updated_at": "2022-07-14T19:06:41Z", "closed_at": "2022-07-14T19:06:41Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "## Description\r\n\r\nFor languages like `pt` and `zh` for which we now have multiple translated locales, `map_locale_display_names()` sets `use_display_name` for only the second and following locales.  Prior to an overzealous refactoring in #6406, it would be set for all locales for a multi-locale language.\r\n\r\n## Steps to Reproduce\r\n\r\nReported by @deeplow in <https://forum.securedrop.org/t/can-pt-br-become-portugues-brasil-instead-of-just-portugues/1455>.  *Test cases TK.*\r\n\r\n## Expected Behavior\r\n\r\n* `pt_BR` = `Portugu\u00eas (Brasil)`\r\n* `pt_PT` = `Portugu\u00eas (Portugal)`\r\n\r\n## Actual Behavior\r\n\r\n* `pt_BR` = `Portugu\u00eas`\r\n* `pt_PT` = `Portugu\u00eas (Portugal)`\r\n", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/6475/reactions", "total_count": 1, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 1, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/6475/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/6419", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/6419/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/6419/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/6419/events", "html_url": "https://github.com/freedomofpress/securedrop/issues/6419", "id": 1223438426, "node_id": "I_kwDOADArVM5I7DBa", "number": 6419, "title": "[develop] Viewport is scrollable without scrollable content", "user": {"login": "eloquence", "id": 213636, "node_id": "MDQ6VXNlcjIxMzYzNg==", "avatar_url": "https://avatars.githubusercontent.com/u/213636?v=4", "gravatar_id": "", "url": "https://api.github.com/users/eloquence", "html_url": "https://github.com/eloquence", "followers_url": "https://api.github.com/users/eloquence/followers", "following_url": "https://api.github.com/users/eloquence/following{/other_user}", "gists_url": "https://api.github.com/users/eloquence/gists{/gist_id}", "starred_url": "https://api.github.com/users/eloquence/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/eloquence/subscriptions", "organizations_url": "https://api.github.com/users/eloquence/orgs", "repos_url": "https://api.github.com/users/eloquence/repos", "events_url": "https://api.github.com/users/eloquence/events{/privacy}", "received_events_url": "https://api.github.com/users/eloquence/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "eaon", "id": 201369, "node_id": "MDQ6VXNlcjIwMTM2OQ==", "avatar_url": "https://avatars.githubusercontent.com/u/201369?v=4", "gravatar_id": "", "url": "https://api.github.com/users/eaon", "html_url": "https://github.com/eaon", "followers_url": "https://api.github.com/users/eaon/followers", "following_url": "https://api.github.com/users/eaon/following{/other_user}", "gists_url": "https://api.github.com/users/eaon/gists{/gist_id}", "starred_url": "https://api.github.com/users/eaon/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/eaon/subscriptions", "organizations_url": "https://api.github.com/users/eaon/orgs", "repos_url": "https://api.github.com/users/eaon/repos", "events_url": "https://api.github.com/users/eaon/events{/privacy}", "received_events_url": "https://api.github.com/users/eaon/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "eaon", "id": 201369, "node_id": "MDQ6VXNlcjIwMTM2OQ==", "avatar_url": "https://avatars.githubusercontent.com/u/201369?v=4", "gravatar_id": "", "url": "https://api.github.com/users/eaon", "html_url": "https://github.com/eaon", "followers_url": "https://api.github.com/users/eaon/followers", "following_url": "https://api.github.com/users/eaon/following{/other_user}", "gists_url": "https://api.github.com/users/eaon/gists{/gist_id}", "starred_url": "https://api.github.com/users/eaon/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/eaon/subscriptions", "organizations_url": "https://api.github.com/users/eaon/orgs", "repos_url": "https://api.github.com/users/eaon/repos", "events_url": "https://api.github.com/users/eaon/events{/privacy}", "received_events_url": "https://api.github.com/users/eaon/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2022-05-02T22:49:50Z", "updated_at": "2022-05-03T14:54:25Z", "closed_at": "2022-05-03T14:54:25Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "## Steps to Reproduce\r\n1. Load https://demo-source.securedrop.org/ (built from latest `develop`) at a resolution where the entire page fits in the viewport\r\n\r\n## Expected Behavior\r\nNo vertical scrollbar is displayed and there is no scrollable content\r\n## Actual Behavior\r\n\r\nVertical scrollbar displayed and I can scroll down about a third of the page. This is repeatable to different degrees on other parts of the Source Interface\r\n\r\n## Screenshot\r\nScrollable \"Get Codename\" page:\r\n\r\n![Screenshot from 2022-05-02 15-20-47](https://user-images.githubusercontent.com/213636/166338925-e6c42667-b0c5-4aab-83c5-deafb48cf22b.png)\r\n\r\n\r\n## Comments\r\n\r\n- Behavior does not appear to be present on 2.3.1\r\n- Behavior does not appear to be the result of the length of the language list\r\n- I've not tested Journalist Interface behavior", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/6419/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/6419/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/6373", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/6373/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/6373/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/6373/events", "html_url": "https://github.com/freedomofpress/securedrop/issues/6373", "id": 1185673520, "node_id": "I_kwDOADArVM5Gq_Ew", "number": 6373, "title": "Changing language on `/generate` results in \"Method Not Allowed\" error", "user": {"login": "eloquence", "id": 213636, "node_id": "MDQ6VXNlcjIxMzYzNg==", "avatar_url": "https://avatars.githubusercontent.com/u/213636?v=4", "gravatar_id": "", "url": "https://api.github.com/users/eloquence", "html_url": "https://github.com/eloquence", "followers_url": "https://api.github.com/users/eloquence/followers", "following_url": "https://api.github.com/users/eloquence/following{/other_user}", "gists_url": "https://api.github.com/users/eloquence/gists{/gist_id}", "starred_url": "https://api.github.com/users/eloquence/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/eloquence/subscriptions", "organizations_url": "https://api.github.com/users/eloquence/orgs", "repos_url": "https://api.github.com/users/eloquence/repos", "events_url": "https://api.github.com/users/eloquence/events{/privacy}", "received_events_url": "https://api.github.com/users/eloquence/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}, {"id": 385585080, "node_id": "MDU6TGFiZWwzODU1ODUwODA=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/QA:%20Release", "name": "QA: Release", "color": "fbca04", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "legoktm", "id": 81392, "node_id": "MDQ6VXNlcjgxMzky", "avatar_url": "https://avatars.githubusercontent.com/u/81392?v=4", "gravatar_id": "", "url": "https://api.github.com/users/legoktm", "html_url": "https://github.com/legoktm", "followers_url": "https://api.github.com/users/legoktm/followers", "following_url": "https://api.github.com/users/legoktm/following{/other_user}", "gists_url": "https://api.github.com/users/legoktm/gists{/gist_id}", "starred_url": "https://api.github.com/users/legoktm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/legoktm/subscriptions", "organizations_url": "https://api.github.com/users/legoktm/orgs", "repos_url": "https://api.github.com/users/legoktm/repos", "events_url": "https://api.github.com/users/legoktm/events{/privacy}", "received_events_url": "https://api.github.com/users/legoktm/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "legoktm", "id": 81392, "node_id": "MDQ6VXNlcjgxMzky", "avatar_url": "https://avatars.githubusercontent.com/u/81392?v=4", "gravatar_id": "", "url": "https://api.github.com/users/legoktm", "html_url": "https://github.com/legoktm", "followers_url": "https://api.github.com/users/legoktm/followers", "following_url": "https://api.github.com/users/legoktm/following{/other_user}", "gists_url": "https://api.github.com/users/legoktm/gists{/gist_id}", "starred_url": "https://api.github.com/users/legoktm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/legoktm/subscriptions", "organizations_url": "https://api.github.com/users/legoktm/orgs", "repos_url": "https://api.github.com/users/legoktm/repos", "events_url": "https://api.github.com/users/legoktm/events{/privacy}", "received_events_url": "https://api.github.com/users/legoktm/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2022-03-30T01:05:43Z", "updated_at": "2022-03-30T16:47:07Z", "closed_at": "2022-03-30T16:47:07Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "# Steps to Reproduce\r\n\r\n(On `develop` / `release/2.3.0` branch as of this writing. Bug is visible in both staging and dev environments.)\r\n\r\n1. Visit the `/generate` page in the Source Interface\r\n2. Change the language using the dropdown selector under the logo\r\n\r\n# Expected behavior\r\n\r\n`/generate` page is-rendered in the selected language.\r\n\r\n# Actual behavior\r\n\r\nHTTP 405 error page:\r\n\r\n> Method Not Allowed\r\n> \r\n> The method is not allowed for the requested URL.\r\n\r\nThe language change still takes effect for subsequent page views.", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/6373/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/6373/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/6367", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/6367/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/6367/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/6367/events", "html_url": "https://github.com/freedomofpress/securedrop/issues/6367", "id": 1185370863, "node_id": "I_kwDOADArVM5Gp1Lv", "number": 6367, "title": "anonymous string-formatting fields break translation", "user": {"login": "cfm", "id": 357435, "node_id": "MDQ6VXNlcjM1NzQzNQ==", "avatar_url": "https://avatars.githubusercontent.com/u/357435?v=4", "gravatar_id": "", "url": "https://api.github.com/users/cfm", "html_url": "https://github.com/cfm", "followers_url": "https://api.github.com/users/cfm/followers", "following_url": "https://api.github.com/users/cfm/following{/other_user}", "gists_url": "https://api.github.com/users/cfm/gists{/gist_id}", "starred_url": "https://api.github.com/users/cfm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/cfm/subscriptions", "organizations_url": "https://api.github.com/users/cfm/orgs", "repos_url": "https://api.github.com/users/cfm/repos", "events_url": "https://api.github.com/users/cfm/events{/privacy}", "received_events_url": "https://api.github.com/users/cfm/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}, {"id": 652906953, "node_id": "MDU6TGFiZWw2NTI5MDY5NTM=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/i18n", "name": "i18n", "color": "d4c5f9", "default": false, "description": "Anything related to translation or internationalization of SecureDrop"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2022-03-29T20:23:10Z", "updated_at": "2022-03-29T21:48:58Z", "closed_at": "2022-03-29T21:48:58Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "**This description is superseded by <https://github.com/freedomofpress/securedrop/issues/6367#issuecomment-1082391316>!**\r\n\r\n## Description\r\n\r\nWhen a `gettext()`-wrapped string uses anonymous string-formatting fields `{}`, rather than positional fields `{n}` and named fields `{foo}`, translation of that string breaks silently:\r\n\r\n1. in Jinja templates, entirely, falling back to the English source string; and\r\n2. in Flask views, by omitting the field(s).\r\n\r\n## Steps to Reproduce\r\n\r\nTK, reproduction branch not yet pushed\r\n\r\n1. From the admin interface, enable a 20-character minimum a source's first message.\r\n2. Start a new Source Interface session.\r\n3. Switch to any translated locale (e.g. `de_DE`).\r\n\r\n## Expected Behavior\r\n\r\nTK, reproduction branch not yet pushed\r\n\r\n### Source string\r\n`Your first message must be at least {} characters long.`\r\n\r\n### Translation template\r\n[`Ihre erste Nachricht muss mindestens {} Zeichen lang sein.`](https://weblate.securedrop.org/translate/securedrop/securedrop/de/?checksum=461cee53e88af00c)\r\n\r\n### Translated string\r\n`Ihre erste Nachricht muss mindestens 20 Zeichen lang sein.`\r\n\r\n## Actual Behavior\r\n\r\n<img width=\"1114\" alt=\"Screen Shot 2022-03-29 at 13 11 56\" src=\"https://user-images.githubusercontent.com/357435/160699870-2a690bfe-5b7f-4025-b116-45d270736ff0.png\">\r\n\r\n## Comments\r\n\r\nFor the two source strings that display this behavior, the code-level fix is as simple as `s/{}/{foo}`.  This will propagate downstream to Weblate as a source-string change requiring translation changes.  We could make the latter on our own, without involving translators, but not without further delaying the current v2.3.0 release.", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/6367/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/6367/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/6357", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/6357/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/6357/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/6357/events", "html_url": "https://github.com/freedomofpress/securedrop/issues/6357", "id": 1178233457, "node_id": "I_kwDOADArVM5GOmpx", "number": 6357, "title": "Organization name gets escaped twice", "user": {"login": "eaon", "id": 201369, "node_id": "MDQ6VXNlcjIwMTM2OQ==", "avatar_url": "https://avatars.githubusercontent.com/u/201369?v=4", "gravatar_id": "", "url": "https://api.github.com/users/eaon", "html_url": "https://github.com/eaon", "followers_url": "https://api.github.com/users/eaon/followers", "following_url": "https://api.github.com/users/eaon/following{/other_user}", "gists_url": "https://api.github.com/users/eaon/gists{/gist_id}", "starred_url": "https://api.github.com/users/eaon/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/eaon/subscriptions", "organizations_url": "https://api.github.com/users/eaon/orgs", "repos_url": "https://api.github.com/users/eaon/repos", "events_url": "https://api.github.com/users/eaon/events{/privacy}", "received_events_url": "https://api.github.com/users/eaon/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2022-03-23T14:52:48Z", "updated_at": "2022-09-21T15:18:40Z", "closed_at": "2022-09-21T15:18:40Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "## Description\r\n\r\nWhen configuring an instance's name as (for example) \"Hello & World\", the `&` shows up as `&amp;` wherever the organization name is used, because it is escaped when it is being set and again when it is being displayed. \r\n\r\n## Comments\r\n\r\nAs far as I can tell, the organization name is the only user provided input that is escaped before it is set - oversight or intentional?", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/6357/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/6357/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/6339", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/6339/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/6339/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/6339/events", "html_url": "https://github.com/freedomofpress/securedrop/issues/6339", "id": 1168745147, "node_id": "I_kwDOADArVM5FqaK7", "number": 6339, "title": "Codename check triggers KeyError after subsequent login", "user": {"login": "eloquence", "id": 213636, "node_id": "MDQ6VXNlcjIxMzYzNg==", "avatar_url": "https://avatars.githubusercontent.com/u/213636?v=4", "gravatar_id": "", "url": "https://api.github.com/users/eloquence", "html_url": "https://github.com/eloquence", "followers_url": "https://api.github.com/users/eloquence/followers", "following_url": "https://api.github.com/users/eloquence/following{/other_user}", "gists_url": "https://api.github.com/users/eloquence/gists{/gist_id}", "starred_url": "https://api.github.com/users/eloquence/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/eloquence/subscriptions", "organizations_url": "https://api.github.com/users/eloquence/orgs", "repos_url": "https://api.github.com/users/eloquence/repos", "events_url": "https://api.github.com/users/eloquence/events{/privacy}", "received_events_url": "https://api.github.com/users/eloquence/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}, {"id": 385585080, "node_id": "MDU6TGFiZWwzODU1ODUwODA=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/QA:%20Release", "name": "QA: Release", "color": "fbca04", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2022-03-14T18:18:14Z", "updated_at": "2022-03-14T22:15:45Z", "closed_at": "2022-03-14T22:15:45Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "# Steps to reproduce\r\n\r\n1. Enable the new \"Prevent sources from submitting their codename as an initial message\" setting\r\n2. Create a new source and submit message, note down the codename\r\n3. Log out and log back in as that source\r\n4. Submit another message\r\n\r\n# Expected behavior\r\n\r\nMessage submitted\r\n\r\n# Actual behavior\r\n\r\nKeyError: 'new_user_codename'\r\n", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/6339/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/6339/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/6248", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/6248/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/6248/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/6248/events", "html_url": "https://github.com/freedomofpress/securedrop/issues/6248", "id": 1123651644, "node_id": "I_kwDOADArVM5C-ZA8", "number": 6248, "title": "Delete confirmation screenshots are garbled", "user": {"login": "legoktm", "id": 81392, "node_id": "MDQ6VXNlcjgxMzky", "avatar_url": "https://avatars.githubusercontent.com/u/81392?v=4", "gravatar_id": "", "url": "https://api.github.com/users/legoktm", "html_url": "https://github.com/legoktm", "followers_url": "https://api.github.com/users/legoktm/followers", "following_url": "https://api.github.com/users/legoktm/following{/other_user}", "gists_url": "https://api.github.com/users/legoktm/gists{/gist_id}", "starred_url": "https://api.github.com/users/legoktm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/legoktm/subscriptions", "organizations_url": "https://api.github.com/users/legoktm/orgs", "repos_url": "https://api.github.com/users/legoktm/repos", "events_url": "https://api.github.com/users/legoktm/events{/privacy}", "received_events_url": "https://api.github.com/users/legoktm/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}, {"id": 385585080, "node_id": "MDU6TGFiZWwzODU1ODUwODA=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/QA:%20Release", "name": "QA: Release", "color": "fbca04", "default": false, "description": null}, {"id": 652906953, "node_id": "MDU6TGFiZWw2NTI5MDY5NTM=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/i18n", "name": "i18n", "color": "d4c5f9", "default": false, "description": "Anything related to translation or internationalization of SecureDrop"}], "state": "closed", "locked": false, "assignee": {"login": "legoktm", "id": 81392, "node_id": "MDQ6VXNlcjgxMzky", "avatar_url": "https://avatars.githubusercontent.com/u/81392?v=4", "gravatar_id": "", "url": "https://api.github.com/users/legoktm", "html_url": "https://github.com/legoktm", "followers_url": "https://api.github.com/users/legoktm/followers", "following_url": "https://api.github.com/users/legoktm/following{/other_user}", "gists_url": "https://api.github.com/users/legoktm/gists{/gist_id}", "starred_url": "https://api.github.com/users/legoktm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/legoktm/subscriptions", "organizations_url": "https://api.github.com/users/legoktm/orgs", "repos_url": "https://api.github.com/users/legoktm/repos", "events_url": "https://api.github.com/users/legoktm/events{/privacy}", "received_events_url": "https://api.github.com/users/legoktm/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "legoktm", "id": 81392, "node_id": "MDQ6VXNlcjgxMzky", "avatar_url": "https://avatars.githubusercontent.com/u/81392?v=4", "gravatar_id": "", "url": "https://api.github.com/users/legoktm", "html_url": "https://github.com/legoktm", "followers_url": "https://api.github.com/users/legoktm/followers", "following_url": "https://api.github.com/users/legoktm/following{/other_user}", "gists_url": "https://api.github.com/users/legoktm/gists{/gist_id}", "starred_url": "https://api.github.com/users/legoktm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/legoktm/subscriptions", "organizations_url": "https://api.github.com/users/legoktm/orgs", "repos_url": "https://api.github.com/users/legoktm/repos", "events_url": "https://api.github.com/users/legoktm/events{/privacy}", "received_events_url": "https://api.github.com/users/legoktm/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/freedomofpress/securedrop/milestones/76", "html_url": "https://github.com/freedomofpress/securedrop/milestone/76", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/milestones/76/labels", "id": 7325829, "node_id": "MI_kwDOADArVM4Ab8iF", "number": 76, "title": "2.2.0", "description": "", "creator": {"login": "zenmonkeykstop", "id": 2782952, "node_id": "MDQ6VXNlcjI3ODI5NTI=", "avatar_url": "https://avatars.githubusercontent.com/u/2782952?v=4", "gravatar_id": "", "url": "https://api.github.com/users/zenmonkeykstop", "html_url": "https://github.com/zenmonkeykstop", "followers_url": "https://api.github.com/users/zenmonkeykstop/followers", "following_url": "https://api.github.com/users/zenmonkeykstop/following{/other_user}", "gists_url": "https://api.github.com/users/zenmonkeykstop/gists{/gist_id}", "starred_url": "https://api.github.com/users/zenmonkeykstop/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/zenmonkeykstop/subscriptions", "organizations_url": "https://api.github.com/users/zenmonkeykstop/orgs", "repos_url": "https://api.github.com/users/zenmonkeykstop/repos", "events_url": "https://api.github.com/users/zenmonkeykstop/events{/privacy}", "received_events_url": "https://api.github.com/users/zenmonkeykstop/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 11, "state": "closed", "created_at": "2021-11-04T15:48:33Z", "updated_at": "2022-02-18T17:36:21Z", "due_on": "2022-02-17T08:00:00Z", "closed_at": "2022-02-18T17:36:21Z"}, "comments": 7, "created_at": "2022-02-03T23:19:14Z", "updated_at": "2022-02-08T15:44:22Z", "closed_at": "2022-02-08T15:44:22Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "## Description\r\n\r\nAll the journalist-delete* variant screenshots have a garbled confirmation screen.\r\n\r\n## Steps to Reproduce\r\n\r\nRun `LOCALES=en_US make translation-test`\r\n\r\n## Expected Behavior\r\n\r\nPulled from weblate (2.1.0):\r\n![journalist-delete_all_confirmation_vTw1MQ5](https://user-images.githubusercontent.com/81392/152445463-4454b2f9-84f7-4362-b064-0a8096b9271c.png)\r\n\r\n## Actual Behavior\r\n\r\n![journalist-delete_all](https://user-images.githubusercontent.com/81392/152445314-0718c2c9-594d-4c92-ae19-ec7ae2ec9f48.png)\r\n![journalist-delete_all_confirmation](https://user-images.githubusercontent.com/81392/152445317-88f80925-2e3a-4f30-9e8f-5598827e7794.png)\r\n![journalist-delete_none](https://user-images.githubusercontent.com/81392/152445318-e35fc6e0-045e-4b39-ba70-1dcd3d58d0f6.png)\r\n![journalist-delete_one](https://user-images.githubusercontent.com/81392/152445319-db675b8a-7795-482c-9094-7090724b102d.png)\r\n![journalist-delete_one_confirmation](https://user-images.githubusercontent.com/81392/152445321-84960487-0756-4ffd-8642-c48d0a6f2b22.png)\r\n", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/6248/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/6248/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/6230", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/6230/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/6230/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/6230/events", "html_url": "https://github.com/freedomofpress/securedrop/issues/6230", "id": 1108523047, "node_id": "I_kwDOADArVM5CErgn", "number": 6230, "title": "postinst error in `securedrop-app-code` package install", "user": {"login": "eloquence", "id": 213636, "node_id": "MDQ6VXNlcjIxMzYzNg==", "avatar_url": "https://avatars.githubusercontent.com/u/213636?v=4", "gravatar_id": "", "url": "https://api.github.com/users/eloquence", "html_url": "https://github.com/eloquence", "followers_url": "https://api.github.com/users/eloquence/followers", "following_url": "https://api.github.com/users/eloquence/following{/other_user}", "gists_url": "https://api.github.com/users/eloquence/gists{/gist_id}", "starred_url": "https://api.github.com/users/eloquence/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/eloquence/subscriptions", "organizations_url": "https://api.github.com/users/eloquence/orgs", "repos_url": "https://api.github.com/users/eloquence/repos", "events_url": "https://api.github.com/users/eloquence/events{/privacy}", "received_events_url": "https://api.github.com/users/eloquence/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "legoktm", "id": 81392, "node_id": "MDQ6VXNlcjgxMzky", "avatar_url": "https://avatars.githubusercontent.com/u/81392?v=4", "gravatar_id": "", "url": "https://api.github.com/users/legoktm", "html_url": "https://github.com/legoktm", "followers_url": "https://api.github.com/users/legoktm/followers", "following_url": "https://api.github.com/users/legoktm/following{/other_user}", "gists_url": "https://api.github.com/users/legoktm/gists{/gist_id}", "starred_url": "https://api.github.com/users/legoktm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/legoktm/subscriptions", "organizations_url": "https://api.github.com/users/legoktm/orgs", "repos_url": "https://api.github.com/users/legoktm/repos", "events_url": "https://api.github.com/users/legoktm/events{/privacy}", "received_events_url": "https://api.github.com/users/legoktm/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "legoktm", "id": 81392, "node_id": "MDQ6VXNlcjgxMzky", "avatar_url": "https://avatars.githubusercontent.com/u/81392?v=4", "gravatar_id": "", "url": "https://api.github.com/users/legoktm", "html_url": "https://github.com/legoktm", "followers_url": "https://api.github.com/users/legoktm/followers", "following_url": "https://api.github.com/users/legoktm/following{/other_user}", "gists_url": "https://api.github.com/users/legoktm/gists{/gist_id}", "starred_url": "https://api.github.com/users/legoktm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/legoktm/subscriptions", "organizations_url": "https://api.github.com/users/legoktm/orgs", "repos_url": "https://api.github.com/users/legoktm/repos", "events_url": "https://api.github.com/users/legoktm/events{/privacy}", "received_events_url": "https://api.github.com/users/legoktm/received_events", "type": "User", "site_admin": false}, {"login": "conorsch", "id": 657862, "node_id": "MDQ6VXNlcjY1Nzg2Mg==", "avatar_url": "https://avatars.githubusercontent.com/u/657862?v=4", "gravatar_id": "", "url": "https://api.github.com/users/conorsch", "html_url": "https://github.com/conorsch", "followers_url": "https://api.github.com/users/conorsch/followers", "following_url": "https://api.github.com/users/conorsch/following{/other_user}", "gists_url": "https://api.github.com/users/conorsch/gists{/gist_id}", "starred_url": "https://api.github.com/users/conorsch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/conorsch/subscriptions", "organizations_url": "https://api.github.com/users/conorsch/orgs", "repos_url": "https://api.github.com/users/conorsch/repos", "events_url": "https://api.github.com/users/conorsch/events{/privacy}", "received_events_url": "https://api.github.com/users/conorsch/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 7, "created_at": "2022-01-19T20:25:21Z", "updated_at": "2022-01-25T00:29:12Z", "closed_at": "2022-01-25T00:29:12Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "Seen on my test instance and one other:\r\n\r\n```\r\nProcessing triggers for securedrop-app-code (2.1.0+focal) ...\r\n+ set -o pipefail\r\n+ SDVE=/opt/venvs/securedrop-app-code\r\n+ SDBIN=/opt/venvs/securedrop-app-code/bin\r\n+ case \"$1\" in\r\n+ echo 'postinst called with unknown argument `triggered'\\'''\r\npostinst called with unknown argument `triggered'\r\n+ exit 1\r\ndpkg: error processing package securedrop-app-code (--configure):\r\n installed securedrop-app-code package post-installation script subprocess returned error exit status 1\r\n```\r\n\r\nI see this for upgrades going back to SecureDrop 2.0.0, so it does not appear to interfere with successful upgrades.", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/6230/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/6230/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/6145", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/6145/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/6145/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/6145/events", "html_url": "https://github.com/freedomofpress/securedrop/issues/6145", "id": 1029498495, "node_id": "I_kwDOADArVM49XOZ_", "number": 6145, "title": "spurious testinfra failures when servers have non-default hostnames", "user": {"login": "cfm", "id": 357435, "node_id": "MDQ6VXNlcjM1NzQzNQ==", "avatar_url": "https://avatars.githubusercontent.com/u/357435?v=4", "gravatar_id": "", "url": "https://api.github.com/users/cfm", "html_url": "https://github.com/cfm", "followers_url": "https://api.github.com/users/cfm/followers", "following_url": "https://api.github.com/users/cfm/following{/other_user}", "gists_url": "https://api.github.com/users/cfm/gists{/gist_id}", "starred_url": "https://api.github.com/users/cfm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/cfm/subscriptions", "organizations_url": "https://api.github.com/users/cfm/orgs", "repos_url": "https://api.github.com/users/cfm/repos", "events_url": "https://api.github.com/users/cfm/events{/privacy}", "received_events_url": "https://api.github.com/users/cfm/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}, {"id": 475996619, "node_id": "MDU6TGFiZWw0NzU5OTY2MTk=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/config_tests", "name": "config_tests", "color": "f9d0c4", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2021-10-18T19:15:59Z", "updated_at": "2021-10-25T19:27:11Z", "closed_at": "2021-10-25T19:27:11Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "## Description\r\n\r\nIf a production instance is configured with hostnames other than the recommended `app` and `mon`, `securedrop-admin verify` will report spurious testinfra failures.\r\n\r\nFirst noticed in <https://github.com/freedomofpress/securedrop/issues/6127#issuecomment-938342242>.\r\n\r\n## Steps to Reproduce\r\n\r\n1. `securedrop-admin sdconfig` with non-default hostnames, e.g. those provisioned by `molecule create -s libvirt-prod-focal`:\r\n    ```yaml\r\n    app_hostname: app-prod\r\n    monitor_hostname: mon-prod\r\n    ```\r\n2. `securedrop-admin install`\r\n3. `securedrop-admin setup -t`\r\n4. `securedrop-admin verify`\r\n\r\n## Expected Behavior\r\n\r\nAll testinfra tests pass.\r\n\r\n## Actual Behavior\r\n\r\nHostname-dependent testinfra tests fail, including:\r\n\r\n* `app/test_ossec_agent.py::test_hosts_files`\r\n* `mon/test_ossec_server.py::test_ossec_connectivity`\r\n* `mon/test_ossec_server.py::test_hosts_files`\r\n* `mon/test_postfix.py::test_postfix_generic_maps`\r\n\r\n## Comments\r\n\r\n_Originally posted by @zenmonkeykstop in <https://github.com/freedomofpress/securedrop/issues/6103#issuecomment-946018659>:_\r\n\r\n> testinfra tests take their expected values from a bunch of variables in a yaml file, with some of said values (like server IPs) in prod runs being overridden from the `install_files/ansible-base/group_vars/all/site-specific` file created by `./securedrop-admin sdconfig`. Looks like the server hostnames are *not* being overridden. So if they're not named according to the reccos in the docs I'd expect to see this error. Would be an easy fix to override them too methinks - check `molecule/testinfra/conftest.py`.\r\n\r\nhttps://github.com/freedomofpress/securedrop/blob/2882d1ea39175bd98c302000bb506e9b88a18a1f/molecule/testinfra/conftest.py#L49-L50", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/6145/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/6145/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/6097", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/6097/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/6097/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/6097/events", "html_url": "https://github.com/freedomofpress/securedrop/issues/6097", "id": 1000727097, "node_id": "I_kwDOADArVM47peI5", "number": 6097, "title": "fwupd generates OSSEC alerts from syslog", "user": {"login": "elfranne", "id": 861038, "node_id": "MDQ6VXNlcjg2MTAzOA==", "avatar_url": "https://avatars.githubusercontent.com/u/861038?v=4", "gravatar_id": "", "url": "https://api.github.com/users/elfranne", "html_url": "https://github.com/elfranne", "followers_url": "https://api.github.com/users/elfranne/followers", "following_url": "https://api.github.com/users/elfranne/following{/other_user}", "gists_url": "https://api.github.com/users/elfranne/gists{/gist_id}", "starred_url": "https://api.github.com/users/elfranne/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/elfranne/subscriptions", "organizations_url": "https://api.github.com/users/elfranne/orgs", "repos_url": "https://api.github.com/users/elfranne/repos", "events_url": "https://api.github.com/users/elfranne/events{/privacy}", "received_events_url": "https://api.github.com/users/elfranne/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "cfm", "id": 357435, "node_id": "MDQ6VXNlcjM1NzQzNQ==", "avatar_url": "https://avatars.githubusercontent.com/u/357435?v=4", "gravatar_id": "", "url": "https://api.github.com/users/cfm", "html_url": "https://github.com/cfm", "followers_url": "https://api.github.com/users/cfm/followers", "following_url": "https://api.github.com/users/cfm/following{/other_user}", "gists_url": "https://api.github.com/users/cfm/gists{/gist_id}", "starred_url": "https://api.github.com/users/cfm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/cfm/subscriptions", "organizations_url": "https://api.github.com/users/cfm/orgs", "repos_url": "https://api.github.com/users/cfm/repos", "events_url": "https://api.github.com/users/cfm/events{/privacy}", "received_events_url": "https://api.github.com/users/cfm/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "cfm", "id": 357435, "node_id": "MDQ6VXNlcjM1NzQzNQ==", "avatar_url": "https://avatars.githubusercontent.com/u/357435?v=4", "gravatar_id": "", "url": "https://api.github.com/users/cfm", "html_url": "https://github.com/cfm", "followers_url": "https://api.github.com/users/cfm/followers", "following_url": "https://api.github.com/users/cfm/following{/other_user}", "gists_url": "https://api.github.com/users/cfm/gists{/gist_id}", "starred_url": "https://api.github.com/users/cfm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/cfm/subscriptions", "organizations_url": "https://api.github.com/users/cfm/orgs", "repos_url": "https://api.github.com/users/cfm/repos", "events_url": "https://api.github.com/users/cfm/events{/privacy}", "received_events_url": "https://api.github.com/users/cfm/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/freedomofpress/securedrop/milestones/72", "html_url": "https://github.com/freedomofpress/securedrop/milestone/72", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/milestones/72/labels", "id": 6700531, "node_id": "MDk6TWlsZXN0b25lNjcwMDUzMQ==", "number": 72, "title": "2.1.0", "description": "", "creator": {"login": "eloquence", "id": 213636, "node_id": "MDQ6VXNlcjIxMzYzNg==", "avatar_url": "https://avatars.githubusercontent.com/u/213636?v=4", "gravatar_id": "", "url": "https://api.github.com/users/eloquence", "html_url": "https://github.com/eloquence", "followers_url": "https://api.github.com/users/eloquence/followers", "following_url": "https://api.github.com/users/eloquence/following{/other_user}", "gists_url": "https://api.github.com/users/eloquence/gists{/gist_id}", "starred_url": "https://api.github.com/users/eloquence/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/eloquence/subscriptions", "organizations_url": "https://api.github.com/users/eloquence/orgs", "repos_url": "https://api.github.com/users/eloquence/repos", "events_url": "https://api.github.com/users/eloquence/events{/privacy}", "received_events_url": "https://api.github.com/users/eloquence/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 26, "state": "closed", "created_at": "2021-04-26T17:21:23Z", "updated_at": "2021-11-26T22:07:49Z", "due_on": "2021-10-12T07:00:00Z", "closed_at": "2021-11-26T22:07:49Z"}, "comments": 2, "created_at": "2021-09-20T09:00:00Z", "updated_at": "2021-09-24T08:38:11Z", "closed_at": "2021-09-24T08:38:11Z", "author_association": "NONE", "active_lock_reason": null, "body": "## Description\r\n\r\nfwupd is creating a log entry:\r\n```\r\nfwupd[135244]: 19:33:15:0929 FuPluginLinuxSwap    could not parse /proc/swaps: failed to call org.freedesktop.UDisks2.Manager.GetBlockDevices(): The name org.freedesktop.UDisks2 was not provided by any .service files\r\n```\r\nThat is being captured by OSSEC and generating an alert level 2. \r\nIt seems that udisk2 package was either not included or removed by Ansible.\r\n\r\n## Steps to Reproduce\r\nI installed Secure Drop according to the manual.\r\n\r\n## Expected Behavior\r\nReduce notifications\r\n\r\n## Comments\r\nIs fwupd even required ? ", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/6097/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/6097/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/6043", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/6043/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/6043/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/6043/events", "html_url": "https://github.com/freedomofpress/securedrop/issues/6043", "id": 945758826, "node_id": "MDU6SXNzdWU5NDU3NTg4MjY=", "number": 6043, "title": "`/create` fails after `/generate` has set per-`tab_id` codenames exceeding maximum cookie size", "user": {"login": "cfm", "id": 357435, "node_id": "MDQ6VXNlcjM1NzQzNQ==", "avatar_url": "https://avatars.githubusercontent.com/u/357435?v=4", "gravatar_id": "", "url": "https://api.github.com/users/cfm", "html_url": "https://github.com/cfm", "followers_url": "https://api.github.com/users/cfm/followers", "following_url": "https://api.github.com/users/cfm/following{/other_user}", "gists_url": "https://api.github.com/users/cfm/gists{/gist_id}", "starred_url": "https://api.github.com/users/cfm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/cfm/subscriptions", "organizations_url": "https://api.github.com/users/cfm/orgs", "repos_url": "https://api.github.com/users/cfm/repos", "events_url": "https://api.github.com/users/cfm/events{/privacy}", "received_events_url": "https://api.github.com/users/cfm/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}, {"id": 475977399, "node_id": "MDU6TGFiZWw0NzU5NzczOTk=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/source%20interface%20(SI)", "name": "source interface (SI)", "color": "f9d0c4", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2021-07-15T21:17:03Z", "updated_at": "2021-08-19T12:09:06Z", "closed_at": "2021-08-19T12:09:06Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "## Description\r\n\r\nRFC 6265 [states](https://www.rfc-editor.org/rfc/rfc6265.html#section-6.1) that \"user agents SHOULD provide [support for] at least 4096 bytes per cookie\".  In practice, browsers [including Firefox](https://searchfox.org/mozilla-central/source/netwerk/cookie/CookieCommons.h#58) reject cookies larger than this size.\r\n\r\nIf loaded repeatedly, `/generate` will accumulate per-`tab_id` codenames that are sent in a cookie larger than 4096 bytes, with this warning:\r\n\r\n    /opt/venvs/securedrop-app-code/lib/python3.8/site-packages/werkzeug/wrappers/base_response.py:470: UserWarning: The \"b'ss'\" cookie is too large: the value was 4179 bytes but the header required 21 extra bytes. The final size was 4200 bytes but the limit is 4093 bytes. Browsers may silently ignore cookies larger than this.\r\n\r\nIf the browser has indeed rejected this cookie, `/create` may subsequently fail, because the browser will return an older cookie that does not include the latest `tab_id` value, producing this error:\r\n\r\n      File \"/Users/cfm/work/securedrop/securedrop/source_app/main.py\", line 66, in create\r\n        codename = session['codenames'][tab_id]\r\n    KeyError: 'xXOU8ChEZfCzeCN4cboAze9zMkJpPFfNpJ1ym54Jyc73b1leelikcdB-wI5U033QdTRrXELjNc_SqfQX2an7zg=='\r\n\r\n## Steps to Reproduce\r\n\r\n1. Load `/generate`.\r\n\r\n2. In the same browser session, refresh repeatedly, via either the browser or the **Generate Codename** button, 30 or more times.\r\n\r\n3. Click **Submit Documents**.\r\n\r\nOr run test:\r\n\r\n```diff\r\n--- a/securedrop/tests/functional/test_source.py\r\n+++ b/securedrop/tests/functional/test_source.py\r\n@@ -157,3 +157,9 @@ class TestDuplicateSourceInterface(\r\n         codename_lookup_b = self.get_codename_lookup()\r\n         assert codename_lookup_b == codename_a2\r\n         self._source_submits_a_message()\r\n+\r\n+    def test_too_many_codenames(self):\r\n+        for i in range(50):  # limit will be approximately n = 4096 bytes / length of average {tab_id: codename} pair\r\n+            self._source_visits_source_homepage()\r\n+            self._source_chooses_to_submit_documents()\r\n+        self._source_continues_to_submit_page()\r\n```\r\n\r\n## Expected Behavior\r\n\r\n`/create` and `/lookup` load properly.\r\n\r\n## Actual Behavior\r\n\r\nAn HTTP `500` error is returned (in debug mode, a `KeyError`).\r\n\r\n## Comments\r\n\r\nThis is unlikely to occur in real-world use, but getting out of this state requires either deleting the `ss` cookie or resetting your (Tor) browser session.\r\n\r\nIn `generate()`, the simplest solution will be to truncate `codenames` at `n = 4096 bytes / length of average {tab_id: codename} pair` entries, on the assumption that someone is unlikely to wind up calling `/create` with their 29th-newest (or older) codename.\r\n\r\nhttps://github.com/freedomofpress/securedrop/blob/1a2494d2b27129708e0da6b4278a7e888746daaf/securedrop/source_app/main.py#L49-L51\r\n\r\nNow that [dictionary order is guaranteed to be insertion order](https://docs.python.org/3/library/stdtypes.html#dict), it may be possible to make this change in place, without refactoring the `codenames` session key as a list of `(tab_id, codename)` tuples (serialized to JSON as an array of arrays) for list operations.\r\n", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/6043/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/6043/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/5994", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/5994/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/5994/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/5994/events", "html_url": "https://github.com/freedomofpress/securedrop/issues/5994", "id": 923128615, "node_id": "MDU6SXNzdWU5MjMxMjg2MTU=", "number": 5994, "title": "`securedrop-admin` does not include new UID in signature check", "user": {"login": "eloquence", "id": 213636, "node_id": "MDQ6VXNlcjIxMzYzNg==", "avatar_url": "https://avatars.githubusercontent.com/u/213636?v=4", "gravatar_id": "", "url": "https://api.github.com/users/eloquence", "html_url": "https://github.com/eloquence", "followers_url": "https://api.github.com/users/eloquence/followers", "following_url": "https://api.github.com/users/eloquence/following{/other_user}", "gists_url": "https://api.github.com/users/eloquence/gists{/gist_id}", "starred_url": "https://api.github.com/users/eloquence/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/eloquence/subscriptions", "organizations_url": "https://api.github.com/users/eloquence/orgs", "repos_url": "https://api.github.com/users/eloquence/repos", "events_url": "https://api.github.com/users/eloquence/events{/privacy}", "received_events_url": "https://api.github.com/users/eloquence/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}, {"id": 750666477, "node_id": "MDU6TGFiZWw3NTA2NjY0Nzc=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/release%20blocker", "name": "release blocker", "color": "000000", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/freedomofpress/securedrop/milestones/69", "html_url": "https://github.com/freedomofpress/securedrop/milestone/69", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/milestones/69/labels", "id": 6350788, "node_id": "MDk6TWlsZXN0b25lNjM1MDc4OA==", "number": 69, "title": "2.0.0", "description": "This is the first release of SecureDrop that will no longer support Ubuntu 16.04 or v2 onion services. ", "creator": {"login": "eloquence", "id": 213636, "node_id": "MDQ6VXNlcjIxMzYzNg==", "avatar_url": "https://avatars.githubusercontent.com/u/213636?v=4", "gravatar_id": "", "url": "https://api.github.com/users/eloquence", "html_url": "https://github.com/eloquence", "followers_url": "https://api.github.com/users/eloquence/followers", "following_url": "https://api.github.com/users/eloquence/following{/other_user}", "gists_url": "https://api.github.com/users/eloquence/gists{/gist_id}", "starred_url": "https://api.github.com/users/eloquence/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/eloquence/subscriptions", "organizations_url": "https://api.github.com/users/eloquence/orgs", "repos_url": "https://api.github.com/users/eloquence/repos", "events_url": "https://api.github.com/users/eloquence/events{/privacy}", "received_events_url": "https://api.github.com/users/eloquence/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 24, "state": "closed", "created_at": "2021-01-25T18:39:26Z", "updated_at": "2021-08-25T14:34:57Z", "due_on": "2021-06-23T07:00:00Z", "closed_at": "2021-07-15T21:23:08Z"}, "comments": 0, "created_at": "2021-06-16T21:34:12Z", "updated_at": "2021-06-17T12:25:41Z", "closed_at": "2021-06-17T12:25:41Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "## Description\r\n\r\n`securedrop-admin` (which is used by the graphical updater) does not check for our new release key UID, here:\r\n\r\nhttps://github.com/freedomofpress/securedrop/blob/develop/admin/securedrop_admin/__init__.py#L946-L949\r\n\r\nThe new UID is `securedrop-release-key-2021@freedom.press`. This omission means that the tag verification will fail. (Note the closing quotation mark on the first line, which is not present when the key has a UID associated with it.)\r\n\r\n## Steps to Reproduce\r\n\r\nA bit difficult as we currently don't have a tag signed with the new key up. I've so far only tested this by manually attempting to match signature output in the same manner as the updater does.", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/5994/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/5994/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/5942", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/5942/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/5942/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/5942/events", "html_url": "https://github.com/freedomofpress/securedrop/issues/5942", "id": 892325023, "node_id": "MDU6SXNzdWU4OTIzMjUwMjM=", "number": 5942, "title": "(develop) `securedrop-admin tailsconfig` forces presence of `tor_v3_keys.json` for Journalist Workstations", "user": {"login": "eloquence", "id": 213636, "node_id": "MDQ6VXNlcjIxMzYzNg==", "avatar_url": "https://avatars.githubusercontent.com/u/213636?v=4", "gravatar_id": "", "url": "https://api.github.com/users/eloquence", "html_url": "https://github.com/eloquence", "followers_url": "https://api.github.com/users/eloquence/followers", "following_url": "https://api.github.com/users/eloquence/following{/other_user}", "gists_url": "https://api.github.com/users/eloquence/gists{/gist_id}", "starred_url": "https://api.github.com/users/eloquence/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/eloquence/subscriptions", "organizations_url": "https://api.github.com/users/eloquence/orgs", "repos_url": "https://api.github.com/users/eloquence/repos", "events_url": "https://api.github.com/users/eloquence/events{/privacy}", "received_events_url": "https://api.github.com/users/eloquence/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}, {"id": 192545295, "node_id": "MDU6TGFiZWwxOTI1NDUyOTU=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/security", "name": "security", "color": "bfdadc", "default": false, "description": null}, {"id": 750666477, "node_id": "MDU6TGFiZWw3NTA2NjY0Nzc=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/release%20blocker", "name": "release blocker", "color": "000000", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "eloquence", "id": 213636, "node_id": "MDQ6VXNlcjIxMzYzNg==", "avatar_url": "https://avatars.githubusercontent.com/u/213636?v=4", "gravatar_id": "", "url": "https://api.github.com/users/eloquence", "html_url": "https://github.com/eloquence", "followers_url": "https://api.github.com/users/eloquence/followers", "following_url": "https://api.github.com/users/eloquence/following{/other_user}", "gists_url": "https://api.github.com/users/eloquence/gists{/gist_id}", "starred_url": "https://api.github.com/users/eloquence/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/eloquence/subscriptions", "organizations_url": "https://api.github.com/users/eloquence/orgs", "repos_url": "https://api.github.com/users/eloquence/repos", "events_url": "https://api.github.com/users/eloquence/events{/privacy}", "received_events_url": "https://api.github.com/users/eloquence/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "eloquence", "id": 213636, "node_id": "MDQ6VXNlcjIxMzYzNg==", "avatar_url": "https://avatars.githubusercontent.com/u/213636?v=4", "gravatar_id": "", "url": "https://api.github.com/users/eloquence", "html_url": "https://github.com/eloquence", "followers_url": "https://api.github.com/users/eloquence/followers", "following_url": "https://api.github.com/users/eloquence/following{/other_user}", "gists_url": "https://api.github.com/users/eloquence/gists{/gist_id}", "starred_url": "https://api.github.com/users/eloquence/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/eloquence/subscriptions", "organizations_url": "https://api.github.com/users/eloquence/orgs", "repos_url": "https://api.github.com/users/eloquence/repos", "events_url": "https://api.github.com/users/eloquence/events{/privacy}", "received_events_url": "https://api.github.com/users/eloquence/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/freedomofpress/securedrop/milestones/69", "html_url": "https://github.com/freedomofpress/securedrop/milestone/69", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/milestones/69/labels", "id": 6350788, "node_id": "MDk6TWlsZXN0b25lNjM1MDc4OA==", "number": 69, "title": "2.0.0", "description": "This is the first release of SecureDrop that will no longer support Ubuntu 16.04 or v2 onion services. ", "creator": {"login": "eloquence", "id": 213636, "node_id": "MDQ6VXNlcjIxMzYzNg==", "avatar_url": "https://avatars.githubusercontent.com/u/213636?v=4", "gravatar_id": "", "url": "https://api.github.com/users/eloquence", "html_url": "https://github.com/eloquence", "followers_url": "https://api.github.com/users/eloquence/followers", "following_url": "https://api.github.com/users/eloquence/following{/other_user}", "gists_url": "https://api.github.com/users/eloquence/gists{/gist_id}", "starred_url": "https://api.github.com/users/eloquence/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/eloquence/subscriptions", "organizations_url": "https://api.github.com/users/eloquence/orgs", "repos_url": "https://api.github.com/users/eloquence/repos", "events_url": "https://api.github.com/users/eloquence/events{/privacy}", "received_events_url": "https://api.github.com/users/eloquence/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 24, "state": "closed", "created_at": "2021-01-25T18:39:26Z", "updated_at": "2021-08-25T14:34:57Z", "due_on": "2021-06-23T07:00:00Z", "closed_at": "2021-07-15T21:23:08Z"}, "comments": 0, "created_at": "2021-05-15T01:10:27Z", "updated_at": "2021-06-01T21:10:01Z", "closed_at": "2021-06-01T21:10:01Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "## Description\r\n\r\nJournalist Workstations should not hold a copy of `tor_v3_keys.json`, which contains sensitive SSH onion service client authentication keys. However, running `securedrop-admin --force tailsconfig` on current `develop` fails with an error complaining that `tor_v3_keys.json` is missing.\r\n\r\n## Steps to reproduce\r\n\r\n1. On a fresh Tails USB w/ persistence set up, check out https://github.com/freedomofpress/securedrop/ and copy valid `app-sourcev3-ths` and `app-journalist.auth_private` files into `~/Persistent/securedrop/install_files/ansible-base` (per instructions in https://docs.securedrop.org/en/stable/onboarding.html)\r\n2. Run `./securedrop-admin setup`\r\n3. Run `./securedrop-admin --force tailsconfig`\r\n\r\n## Expected behavior\r\n\r\nCommand completes without error\r\n\r\n## Actual behavior\r\n\r\nCommand fails with error:\r\n\r\n>  Authentication files for v3 onion services were found, but the corresponding `tor_v3_keys.json` file is missing. To enable updates  to an existing SecureDrop instance, please add this file under `~/Persistent/securedrop/install_files/ansible-base`.\r\n\r\nThis only happens on the `develop` branch, not on the last signed release tag.\r\n\r\n## Analysis\r\n\r\nMy read is that this is fallout from #5915, which removed the `v3_onion_services` condition here:\r\n\r\nhttps://github.com/freedomofpress/securedrop/blob/0e74ac2ecd28c47dfbc302a1fb8044263bf110ba/install_files/ansible-base/roles/validate/tasks/validate_tails_environment.yml#L80-L90\r\n\r\n`v3_onion_services` previously defaulted to `False`, ensuring that the check did not run on Journalist Workstations. ", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/5942/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/5942/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/5920", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/5920/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/5920/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/5920/events", "html_url": "https://github.com/freedomofpress/securedrop/issues/5920", "id": 873542084, "node_id": "MDU6SXNzdWU4NzM1NDIwODQ=", "number": 5920, "title": "xenial app tests are failing", "user": {"login": "eloquence", "id": 213636, "node_id": "MDQ6VXNlcjIxMzYzNg==", "avatar_url": "https://avatars.githubusercontent.com/u/213636?v=4", "gravatar_id": "", "url": "https://api.github.com/users/eloquence", "html_url": "https://github.com/eloquence", "followers_url": "https://api.github.com/users/eloquence/followers", "following_url": "https://api.github.com/users/eloquence/following{/other_user}", "gists_url": "https://api.github.com/users/eloquence/gists{/gist_id}", "starred_url": "https://api.github.com/users/eloquence/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/eloquence/subscriptions", "organizations_url": "https://api.github.com/users/eloquence/orgs", "repos_url": "https://api.github.com/users/eloquence/repos", "events_url": "https://api.github.com/users/eloquence/events{/privacy}", "received_events_url": "https://api.github.com/users/eloquence/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2021-05-01T05:15:46Z", "updated_at": "2021-05-03T23:18:28Z", "closed_at": "2021-05-03T23:18:28Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "Many xenial app tests are failing on new PRs, presumably because the Source Interface is disabled after April 30, so none of the expected behavior is found. See example output here: https://circleci.com/api/v1.1/project/github/freedomofpress/securedrop/53822/output/109/0?file=true&allocation-id=608cb3d9cdd8e709525e7fdf-0-build%2F30D5FC47", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/5920/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/5920/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/5918", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/5918/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/5918/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/5918/events", "html_url": "https://github.com/freedomofpress/securedrop/issues/5918", "id": 873478124, "node_id": "MDU6SXNzdWU4NzM0NzgxMjQ=", "number": 5918, "title": "Backup script copies entire backup file into memory", "user": {"login": "eloquence", "id": 213636, "node_id": "MDQ6VXNlcjIxMzYzNg==", "avatar_url": "https://avatars.githubusercontent.com/u/213636?v=4", "gravatar_id": "", "url": "https://api.github.com/users/eloquence", "html_url": "https://github.com/eloquence", "followers_url": "https://api.github.com/users/eloquence/followers", "following_url": "https://api.github.com/users/eloquence/following{/other_user}", "gists_url": "https://api.github.com/users/eloquence/gists{/gist_id}", "starred_url": "https://api.github.com/users/eloquence/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/eloquence/subscriptions", "organizations_url": "https://api.github.com/users/eloquence/orgs", "repos_url": "https://api.github.com/users/eloquence/repos", "events_url": "https://api.github.com/users/eloquence/events{/privacy}", "received_events_url": "https://api.github.com/users/eloquence/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "eloquence", "id": 213636, "node_id": "MDQ6VXNlcjIxMzYzNg==", "avatar_url": "https://avatars.githubusercontent.com/u/213636?v=4", "gravatar_id": "", "url": "https://api.github.com/users/eloquence", "html_url": "https://github.com/eloquence", "followers_url": "https://api.github.com/users/eloquence/followers", "following_url": "https://api.github.com/users/eloquence/following{/other_user}", "gists_url": "https://api.github.com/users/eloquence/gists{/gist_id}", "starred_url": "https://api.github.com/users/eloquence/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/eloquence/subscriptions", "organizations_url": "https://api.github.com/users/eloquence/orgs", "repos_url": "https://api.github.com/users/eloquence/repos", "events_url": "https://api.github.com/users/eloquence/events{/privacy}", "received_events_url": "https://api.github.com/users/eloquence/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "eloquence", "id": 213636, "node_id": "MDQ6VXNlcjIxMzYzNg==", "avatar_url": "https://avatars.githubusercontent.com/u/213636?v=4", "gravatar_id": "", "url": "https://api.github.com/users/eloquence", "html_url": "https://github.com/eloquence", "followers_url": "https://api.github.com/users/eloquence/followers", "following_url": "https://api.github.com/users/eloquence/following{/other_user}", "gists_url": "https://api.github.com/users/eloquence/gists{/gist_id}", "starred_url": "https://api.github.com/users/eloquence/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/eloquence/subscriptions", "organizations_url": "https://api.github.com/users/eloquence/orgs", "repos_url": "https://api.github.com/users/eloquence/repos", "events_url": "https://api.github.com/users/eloquence/events{/privacy}", "received_events_url": "https://api.github.com/users/eloquence/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2021-05-01T00:24:32Z", "updated_at": "2021-05-07T14:25:17Z", "closed_at": "2021-05-07T14:25:17Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "## STR\r\n1. Create a backup with `./securedrop-admin backup`\r\n2. Create a large random file, e.g., using `head -c 1500M < /dev/urandom > bigfile1`\r\n3. Add the file to the backup tarball you just created, e.g., if the timestamp is  `2021-04-30--23-22-08`\r\n   1. `gzip -d  sd-backup-2021-04-30--23-22-08.tar.gz`\r\n   2. `tar -u -f sd-backup-2021-04-30--23-22-08.tar bigfile1` \r\n   3. `rm bigfile1`\r\n   4. `gzip -c sd-backup-2021-04-30--23-22-08.tar > sd-backup-2021-04-30--23-22-08.tar.gz`\r\n   5. `rm sd-backup-2021-04-30--23-22-08.tar`\r\n4. Open a terminal in which you monitor disk space usage with `watch -n 1 df -h`\r\n5. Attempt to restore the backup using `./securedrop-admin restore` followed by the filename\r\n6. Monitor diskspace usage while the operation is running\r\n\r\n## Expected behavior\r\n\r\nDuring the \"Extract Tor configuration from backup\", the diskspace should increase by a tiny amount as only a single file is extracted\r\n\r\n## Actual behavior\r\n\r\nDiskspace usage on `tmpfs` balloons by the size of the backup file (`tmpfs` size depends on the system memory)\r\n\r\n## Explanation\r\nAnsible's `unarchive` module creates a copy of the file by default, unless `remote_src` is set to `yes`. See: https://docs.ansible.com/ansible/latest/collections/ansible/builtin/unarchive_module.html\r\n\r\n> By default, it will copy the source file from the local system to the target before unpacking.\r\n\r\nDuring this operation, source and target are the same computer, which means we're performing one unnecessary copy operation.\r\n", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/5918/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/5918/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/5892", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/5892/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/5892/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/5892/events", "html_url": "https://github.com/freedomofpress/securedrop/issues/5892", "id": 852953347, "node_id": "MDU6SXNzdWU4NTI5NTMzNDc=", "number": 5892, "title": "v2 removal on restore does not cover HTTPS services", "user": {"login": "eloquence", "id": 213636, "node_id": "MDQ6VXNlcjIxMzYzNg==", "avatar_url": "https://avatars.githubusercontent.com/u/213636?v=4", "gravatar_id": "", "url": "https://api.github.com/users/eloquence", "html_url": "https://github.com/eloquence", "followers_url": "https://api.github.com/users/eloquence/followers", "following_url": "https://api.github.com/users/eloquence/following{/other_user}", "gists_url": "https://api.github.com/users/eloquence/gists{/gist_id}", "starred_url": "https://api.github.com/users/eloquence/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/eloquence/subscriptions", "organizations_url": "https://api.github.com/users/eloquence/orgs", "repos_url": "https://api.github.com/users/eloquence/repos", "events_url": "https://api.github.com/users/eloquence/events{/privacy}", "received_events_url": "https://api.github.com/users/eloquence/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "zenmonkeykstop", "id": 2782952, "node_id": "MDQ6VXNlcjI3ODI5NTI=", "avatar_url": "https://avatars.githubusercontent.com/u/2782952?v=4", "gravatar_id": "", "url": "https://api.github.com/users/zenmonkeykstop", "html_url": "https://github.com/zenmonkeykstop", "followers_url": "https://api.github.com/users/zenmonkeykstop/followers", "following_url": "https://api.github.com/users/zenmonkeykstop/following{/other_user}", "gists_url": "https://api.github.com/users/zenmonkeykstop/gists{/gist_id}", "starred_url": "https://api.github.com/users/zenmonkeykstop/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/zenmonkeykstop/subscriptions", "organizations_url": "https://api.github.com/users/zenmonkeykstop/orgs", "repos_url": "https://api.github.com/users/zenmonkeykstop/repos", "events_url": "https://api.github.com/users/zenmonkeykstop/events{/privacy}", "received_events_url": "https://api.github.com/users/zenmonkeykstop/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "zenmonkeykstop", "id": 2782952, "node_id": "MDQ6VXNlcjI3ODI5NTI=", "avatar_url": "https://avatars.githubusercontent.com/u/2782952?v=4", "gravatar_id": "", "url": "https://api.github.com/users/zenmonkeykstop", "html_url": "https://github.com/zenmonkeykstop", "followers_url": "https://api.github.com/users/zenmonkeykstop/followers", "following_url": "https://api.github.com/users/zenmonkeykstop/following{/other_user}", "gists_url": "https://api.github.com/users/zenmonkeykstop/gists{/gist_id}", "starred_url": "https://api.github.com/users/zenmonkeykstop/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/zenmonkeykstop/subscriptions", "organizations_url": "https://api.github.com/users/zenmonkeykstop/orgs", "repos_url": "https://api.github.com/users/zenmonkeykstop/repos", "events_url": "https://api.github.com/users/zenmonkeykstop/events{/privacy}", "received_events_url": "https://api.github.com/users/zenmonkeykstop/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/freedomofpress/securedrop/milestones/71", "html_url": "https://github.com/freedomofpress/securedrop/milestone/71", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/milestones/71/labels", "id": 6587750, "node_id": "MDk6TWlsZXN0b25lNjU4Nzc1MA==", "number": 71, "title": "1.8.1", "description": "A scheduled point release of fixes and improvements that will provide a smoother migration experience to Ubuntu 20.04.\r\nRM: @kushaldas;  Deputy RM: @emkll", "creator": {"login": "eloquence", "id": 213636, "node_id": "MDQ6VXNlcjIxMzYzNg==", "avatar_url": "https://avatars.githubusercontent.com/u/213636?v=4", "gravatar_id": "", "url": "https://api.github.com/users/eloquence", "html_url": "https://github.com/eloquence", "followers_url": "https://api.github.com/users/eloquence/followers", "following_url": "https://api.github.com/users/eloquence/following{/other_user}", "gists_url": "https://api.github.com/users/eloquence/gists{/gist_id}", "starred_url": "https://api.github.com/users/eloquence/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/eloquence/subscriptions", "organizations_url": "https://api.github.com/users/eloquence/orgs", "repos_url": "https://api.github.com/users/eloquence/repos", "events_url": "https://api.github.com/users/eloquence/events{/privacy}", "received_events_url": "https://api.github.com/users/eloquence/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 12, "state": "closed", "created_at": "2021-03-24T19:44:53Z", "updated_at": "2021-04-23T05:14:14Z", "due_on": "2021-04-14T07:00:00Z", "closed_at": "2021-04-23T05:14:14Z"}, "comments": 2, "created_at": "2021-04-08T00:50:58Z", "updated_at": "2021-04-23T05:14:06Z", "closed_at": "2021-04-23T05:14:06Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "The logic added in https://github.com/freedomofpress/securedrop/pull/5677 to disable v2 onion services when a backup is restored to a Focal server does not remove config lines for HTTPS services (port 443), potentially resulting in a broken configuration.", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/5892/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/5892/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/5868", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/5868/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/5868/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/5868/events", "html_url": "https://github.com/freedomofpress/securedrop/issues/5868", "id": 831003653, "node_id": "MDU6SXNzdWU4MzEwMDM2NTM=", "number": 5868, "title": "Backup script does not include custom logo", "user": {"login": "eloquence", "id": 213636, "node_id": "MDQ6VXNlcjIxMzYzNg==", "avatar_url": "https://avatars.githubusercontent.com/u/213636?v=4", "gravatar_id": "", "url": "https://api.github.com/users/eloquence", "html_url": "https://github.com/eloquence", "followers_url": "https://api.github.com/users/eloquence/followers", "following_url": "https://api.github.com/users/eloquence/following{/other_user}", "gists_url": "https://api.github.com/users/eloquence/gists{/gist_id}", "starred_url": "https://api.github.com/users/eloquence/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/eloquence/subscriptions", "organizations_url": "https://api.github.com/users/eloquence/orgs", "repos_url": "https://api.github.com/users/eloquence/repos", "events_url": "https://api.github.com/users/eloquence/events{/privacy}", "received_events_url": "https://api.github.com/users/eloquence/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "eloquence", "id": 213636, "node_id": "MDQ6VXNlcjIxMzYzNg==", "avatar_url": "https://avatars.githubusercontent.com/u/213636?v=4", "gravatar_id": "", "url": "https://api.github.com/users/eloquence", "html_url": "https://github.com/eloquence", "followers_url": "https://api.github.com/users/eloquence/followers", "following_url": "https://api.github.com/users/eloquence/following{/other_user}", "gists_url": "https://api.github.com/users/eloquence/gists{/gist_id}", "starred_url": "https://api.github.com/users/eloquence/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/eloquence/subscriptions", "organizations_url": "https://api.github.com/users/eloquence/orgs", "repos_url": "https://api.github.com/users/eloquence/repos", "events_url": "https://api.github.com/users/eloquence/events{/privacy}", "received_events_url": "https://api.github.com/users/eloquence/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "eloquence", "id": 213636, "node_id": "MDQ6VXNlcjIxMzYzNg==", "avatar_url": "https://avatars.githubusercontent.com/u/213636?v=4", "gravatar_id": "", "url": "https://api.github.com/users/eloquence", "html_url": "https://github.com/eloquence", "followers_url": "https://api.github.com/users/eloquence/followers", "following_url": "https://api.github.com/users/eloquence/following{/other_user}", "gists_url": "https://api.github.com/users/eloquence/gists{/gist_id}", "starred_url": "https://api.github.com/users/eloquence/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/eloquence/subscriptions", "organizations_url": "https://api.github.com/users/eloquence/orgs", "repos_url": "https://api.github.com/users/eloquence/repos", "events_url": "https://api.github.com/users/eloquence/events{/privacy}", "received_events_url": "https://api.github.com/users/eloquence/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/freedomofpress/securedrop/milestones/71", "html_url": "https://github.com/freedomofpress/securedrop/milestone/71", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/milestones/71/labels", "id": 6587750, "node_id": "MDk6TWlsZXN0b25lNjU4Nzc1MA==", "number": 71, "title": "1.8.1", "description": "A scheduled point release of fixes and improvements that will provide a smoother migration experience to Ubuntu 20.04.\r\nRM: @kushaldas;  Deputy RM: @emkll", "creator": {"login": "eloquence", "id": 213636, "node_id": "MDQ6VXNlcjIxMzYzNg==", "avatar_url": "https://avatars.githubusercontent.com/u/213636?v=4", "gravatar_id": "", "url": "https://api.github.com/users/eloquence", "html_url": "https://github.com/eloquence", "followers_url": "https://api.github.com/users/eloquence/followers", "following_url": "https://api.github.com/users/eloquence/following{/other_user}", "gists_url": "https://api.github.com/users/eloquence/gists{/gist_id}", "starred_url": "https://api.github.com/users/eloquence/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/eloquence/subscriptions", "organizations_url": "https://api.github.com/users/eloquence/orgs", "repos_url": "https://api.github.com/users/eloquence/repos", "events_url": "https://api.github.com/users/eloquence/events{/privacy}", "received_events_url": "https://api.github.com/users/eloquence/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 12, "state": "closed", "created_at": "2021-03-24T19:44:53Z", "updated_at": "2021-04-23T05:14:14Z", "due_on": "2021-04-14T07:00:00Z", "closed_at": "2021-04-23T05:14:14Z"}, "comments": 1, "created_at": "2021-03-13T21:46:04Z", "updated_at": "2021-03-31T18:11:54Z", "closed_at": "2021-03-31T18:11:54Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "## Description\r\n\r\nThe backup script at https://github.com/freedomofpress/securedrop/blob/develop/install_files/ansible-base/roles/backup/files/backup.py currently does not add the custom logo, because it was not updated after #3057 changed the behavior to stop overwriting `logo.png` with the custom logo.\r\n\r\n## Steps to Reproduce\r\n\r\n(Requires prod or staging instance.)\r\n\r\n1. Customize your logo\r\n2. Run `./securedrop-admin backup`\r\n3. Inspect backup contents\r\n\r\n## Expected Behavior\r\n\r\nBackup contains custom logo image.\r\n\r\n## Actual Behavior\r\n\r\nBackup only contains original default logo.", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/5868/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/5868/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/5757", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/5757/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/5757/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/5757/events", "html_url": "https://github.com/freedomofpress/securedrop/issues/5757", "id": 795157277, "node_id": "MDU6SXNzdWU3OTUxNTcyNzc=", "number": 5757, "title": "Error 500 on source interface and journalist interface after 1.7.0 upgrade", "user": {"login": "emkll", "id": 15223328, "node_id": "MDQ6VXNlcjE1MjIzMzI4", "avatar_url": "https://avatars.githubusercontent.com/u/15223328?v=4", "gravatar_id": "", "url": "https://api.github.com/users/emkll", "html_url": "https://github.com/emkll", "followers_url": "https://api.github.com/users/emkll/followers", "following_url": "https://api.github.com/users/emkll/following{/other_user}", "gists_url": "https://api.github.com/users/emkll/gists{/gist_id}", "starred_url": "https://api.github.com/users/emkll/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/emkll/subscriptions", "organizations_url": "https://api.github.com/users/emkll/orgs", "repos_url": "https://api.github.com/users/emkll/repos", "events_url": "https://api.github.com/users/emkll/events{/privacy}", "received_events_url": "https://api.github.com/users/emkll/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}, {"id": 157793311, "node_id": "MDU6TGFiZWwxNTc3OTMzMTE=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/priority/high", "name": "priority/high", "color": "e64ef4", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/freedomofpress/securedrop/milestones/70", "html_url": "https://github.com/freedomofpress/securedrop/milestone/70", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/milestones/70/labels", "id": 6359048, "node_id": "MDk6TWlsZXN0b25lNjM1OTA0OA==", "number": 70, "title": "1.7.1", "description": "", "creator": {"login": "emkll", "id": 15223328, "node_id": "MDQ6VXNlcjE1MjIzMzI4", "avatar_url": "https://avatars.githubusercontent.com/u/15223328?v=4", "gravatar_id": "", "url": "https://api.github.com/users/emkll", "html_url": "https://github.com/emkll", "followers_url": "https://api.github.com/users/emkll/followers", "following_url": "https://api.github.com/users/emkll/following{/other_user}", "gists_url": "https://api.github.com/users/emkll/gists{/gist_id}", "starred_url": "https://api.github.com/users/emkll/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/emkll/subscriptions", "organizations_url": "https://api.github.com/users/emkll/orgs", "repos_url": "https://api.github.com/users/emkll/repos", "events_url": "https://api.github.com/users/emkll/events{/privacy}", "received_events_url": "https://api.github.com/users/emkll/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 2, "state": "closed", "created_at": "2021-01-27T15:47:24Z", "updated_at": "2021-02-02T07:01:47Z", "due_on": null, "closed_at": "2021-02-02T07:01:47Z"}, "comments": 2, "created_at": "2021-01-27T14:37:39Z", "updated_at": "2021-01-27T19:05:26Z", "closed_at": "2021-01-27T19:05:25Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "## Description\r\n\r\nInitially reported by forum user jonas.franzen in https://forum.securedrop.org/t/issues-after-update-to-1-7-0/1391\r\n\r\nSome due to a missing variable in config.py\r\n```\r\nJan 27 12:48:07 applicationserver python[1136]: AttributeError: module \u2018config\u2019 has no attribute \u2018SESSION_EXPIRATION_MINUTES\u2019\r\n```\r\n\r\n\r\n## Steps to reproduce\r\n\r\nTBD\r\n\r\n\r\n## Comments\r\nForum user dachary reports that simply adding the value to config.py resolves", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/5757/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/5757/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/5693", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/5693/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/5693/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/5693/events", "html_url": "https://github.com/freedomofpress/securedrop/issues/5693", "id": 782383480, "node_id": "MDU6SXNzdWU3ODIzODM0ODA=", "number": 5693, "title": "Some automated screenshots are cropped incorrectly", "user": {"login": "eloquence", "id": 213636, "node_id": "MDQ6VXNlcjIxMzYzNg==", "avatar_url": "https://avatars.githubusercontent.com/u/213636?v=4", "gravatar_id": "", "url": "https://api.github.com/users/eloquence", "html_url": "https://github.com/eloquence", "followers_url": "https://api.github.com/users/eloquence/followers", "following_url": "https://api.github.com/users/eloquence/following{/other_user}", "gists_url": "https://api.github.com/users/eloquence/gists{/gist_id}", "starred_url": "https://api.github.com/users/eloquence/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/eloquence/subscriptions", "organizations_url": "https://api.github.com/users/eloquence/orgs", "repos_url": "https://api.github.com/users/eloquence/repos", "events_url": "https://api.github.com/users/eloquence/events{/privacy}", "received_events_url": "https://api.github.com/users/eloquence/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}, {"id": 118465787, "node_id": "MDU6TGFiZWwxMTg0NjU3ODc=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/docs", "name": "docs", "color": "d4c5f9", "default": false, "description": null}, {"id": 616447641, "node_id": "MDU6TGFiZWw2MTY0NDc2NDE=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/development%20env", "name": "development env", "color": "bfd4f2", "default": false, "description": null}, {"id": 652906953, "node_id": "MDU6TGFiZWw2NTI5MDY5NTM=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/i18n", "name": "i18n", "color": "d4c5f9", "default": false, "description": "Anything related to translation or internationalization of SecureDrop"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2021-01-08T20:40:46Z", "updated_at": "2021-05-17T20:21:14Z", "closed_at": "2021-05-17T20:21:14Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "The automated screenshots generated using the functional tests are generally cropped well now, but there are a couple of screenshots that are now cropped incorrectly, possibly due to the page layout change resulting from the organization name feature added in #5629.\r\n\r\n<details>\r\n<summary>\r\nClick to expand\r\n</summary>\r\n\r\nThe OSSEC alert screenshot:\r\n![journalist-admin_ossec_alert_button](https://user-images.githubusercontent.com/213636/104061963-6a07fd80-51ae-11eb-8400-feb46b761b5d.png)\r\n\r\nThe logo change screenshot:\r\n![journalist-admin_changes_logo_image](https://user-images.githubusercontent.com/213636/104061988-72f8cf00-51ae-11eb-807c-5f0e8f4363ec.png)\r\n</details>", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/5693/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/5693/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/5659", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/5659/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/5659/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/5659/events", "html_url": "https://github.com/freedomofpress/securedrop/issues/5659", "id": 753773000, "node_id": "MDU6SXNzdWU3NTM3NzMwMDA=", "number": 5659, "title": "Dual distro support broke \"securedrop-admin verify\"", "user": {"login": "rmol", "id": 47430598, "node_id": "MDQ6VXNlcjQ3NDMwNTk4", "avatar_url": "https://avatars.githubusercontent.com/u/47430598?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rmol", "html_url": "https://github.com/rmol", "followers_url": "https://api.github.com/users/rmol/followers", "following_url": "https://api.github.com/users/rmol/following{/other_user}", "gists_url": "https://api.github.com/users/rmol/gists{/gist_id}", "starred_url": "https://api.github.com/users/rmol/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rmol/subscriptions", "organizations_url": "https://api.github.com/users/rmol/orgs", "repos_url": "https://api.github.com/users/rmol/repos", "events_url": "https://api.github.com/users/rmol/events{/privacy}", "received_events_url": "https://api.github.com/users/rmol/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "zenmonkeykstop", "id": 2782952, "node_id": "MDQ6VXNlcjI3ODI5NTI=", "avatar_url": "https://avatars.githubusercontent.com/u/2782952?v=4", "gravatar_id": "", "url": "https://api.github.com/users/zenmonkeykstop", "html_url": "https://github.com/zenmonkeykstop", "followers_url": "https://api.github.com/users/zenmonkeykstop/followers", "following_url": "https://api.github.com/users/zenmonkeykstop/following{/other_user}", "gists_url": "https://api.github.com/users/zenmonkeykstop/gists{/gist_id}", "starred_url": "https://api.github.com/users/zenmonkeykstop/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/zenmonkeykstop/subscriptions", "organizations_url": "https://api.github.com/users/zenmonkeykstop/orgs", "repos_url": "https://api.github.com/users/zenmonkeykstop/repos", "events_url": "https://api.github.com/users/zenmonkeykstop/events{/privacy}", "received_events_url": "https://api.github.com/users/zenmonkeykstop/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "zenmonkeykstop", "id": 2782952, "node_id": "MDQ6VXNlcjI3ODI5NTI=", "avatar_url": "https://avatars.githubusercontent.com/u/2782952?v=4", "gravatar_id": "", "url": "https://api.github.com/users/zenmonkeykstop", "html_url": "https://github.com/zenmonkeykstop", "followers_url": "https://api.github.com/users/zenmonkeykstop/followers", "following_url": "https://api.github.com/users/zenmonkeykstop/following{/other_user}", "gists_url": "https://api.github.com/users/zenmonkeykstop/gists{/gist_id}", "starred_url": "https://api.github.com/users/zenmonkeykstop/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/zenmonkeykstop/subscriptions", "organizations_url": "https://api.github.com/users/zenmonkeykstop/orgs", "repos_url": "https://api.github.com/users/zenmonkeykstop/repos", "events_url": "https://api.github.com/users/zenmonkeykstop/events{/privacy}", "received_events_url": "https://api.github.com/users/zenmonkeykstop/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/freedomofpress/securedrop/milestones/66", "html_url": "https://github.com/freedomofpress/securedrop/milestone/66", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/milestones/66/labels", "id": 5970071, "node_id": "MDk6TWlsZXN0b25lNTk3MDA3MQ==", "number": 66, "title": "1.7.0", "description": "Release manager: @creviera\r\nDeputy release manager: @emkll\r\nLocalization manager: @rmol\r\nDeputy localization manager: @kushaldas\r\nCommunications manager:: @eloquence", "creator": {"login": "eloquence", "id": 213636, "node_id": "MDQ6VXNlcjIxMzYzNg==", "avatar_url": "https://avatars.githubusercontent.com/u/213636?v=4", "gravatar_id": "", "url": "https://api.github.com/users/eloquence", "html_url": "https://github.com/eloquence", "followers_url": "https://api.github.com/users/eloquence/followers", "following_url": "https://api.github.com/users/eloquence/following{/other_user}", "gists_url": "https://api.github.com/users/eloquence/gists{/gist_id}", "starred_url": "https://api.github.com/users/eloquence/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/eloquence/subscriptions", "organizations_url": "https://api.github.com/users/eloquence/orgs", "repos_url": "https://api.github.com/users/eloquence/repos", "events_url": "https://api.github.com/users/eloquence/events{/privacy}", "received_events_url": "https://api.github.com/users/eloquence/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 36, "state": "closed", "created_at": "2020-10-08T16:30:20Z", "updated_at": "2021-02-02T07:01:51Z", "due_on": "2021-01-26T08:00:00Z", "closed_at": "2021-02-02T07:01:51Z"}, "comments": 1, "created_at": "2020-11-30T20:19:07Z", "updated_at": "2020-12-18T14:52:03Z", "closed_at": "2020-12-18T14:52:03Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "## Description\r\n\r\nWhen adding support for Focal to the configuration tests in #5529, a check of the `MOLECULE_SCENARIO_NAME` environment variable broke `securedrop-admin verify`, where it's not set.\r\n\r\n## Steps to Reproduce\r\n\r\nOn an admin workstation:\r\n- Run `securedrop-admin setup -t`\r\n- Run `securedrop-admin verify`\r\n\r\n## Expected Behavior\r\n\r\nThat the configuration tests would run.\r\n\r\n## Actual Behavior\r\n\r\nYou get an error [here](https://github.com/freedomofpress/securedrop/blob/76d133a7e5962f8d904e507d93e6a61575358eeb/molecule/testinfra/conftest.py#L31) saying `'NoneType' object has no attribute 'endswith'`. \r\n\r\n## Comments\r\n\r\nShould probably check if it's `None` or just add `\"\"` as the default in the `os.environ.get` call.", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/5659/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/5659/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/5655", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/5655/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/5655/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/5655/events", "html_url": "https://github.com/freedomofpress/securedrop/issues/5655", "id": 751461960, "node_id": "MDU6SXNzdWU3NTE0NjE5NjA=", "number": 5655, "title": "DNS is broken on Focal staging server.", "user": {"login": "kushaldas", "id": 272303, "node_id": "MDQ6VXNlcjI3MjMwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/272303?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kushaldas", "html_url": "https://github.com/kushaldas", "followers_url": "https://api.github.com/users/kushaldas/followers", "following_url": "https://api.github.com/users/kushaldas/following{/other_user}", "gists_url": "https://api.github.com/users/kushaldas/gists{/gist_id}", "starred_url": "https://api.github.com/users/kushaldas/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kushaldas/subscriptions", "organizations_url": "https://api.github.com/users/kushaldas/orgs", "repos_url": "https://api.github.com/users/kushaldas/repos", "events_url": "https://api.github.com/users/kushaldas/events{/privacy}", "received_events_url": "https://api.github.com/users/kushaldas/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "kushaldas", "id": 272303, "node_id": "MDQ6VXNlcjI3MjMwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/272303?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kushaldas", "html_url": "https://github.com/kushaldas", "followers_url": "https://api.github.com/users/kushaldas/followers", "following_url": "https://api.github.com/users/kushaldas/following{/other_user}", "gists_url": "https://api.github.com/users/kushaldas/gists{/gist_id}", "starred_url": "https://api.github.com/users/kushaldas/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kushaldas/subscriptions", "organizations_url": "https://api.github.com/users/kushaldas/orgs", "repos_url": "https://api.github.com/users/kushaldas/repos", "events_url": "https://api.github.com/users/kushaldas/events{/privacy}", "received_events_url": "https://api.github.com/users/kushaldas/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "kushaldas", "id": 272303, "node_id": "MDQ6VXNlcjI3MjMwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/272303?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kushaldas", "html_url": "https://github.com/kushaldas", "followers_url": "https://api.github.com/users/kushaldas/followers", "following_url": "https://api.github.com/users/kushaldas/following{/other_user}", "gists_url": "https://api.github.com/users/kushaldas/gists{/gist_id}", "starred_url": "https://api.github.com/users/kushaldas/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kushaldas/subscriptions", "organizations_url": "https://api.github.com/users/kushaldas/orgs", "repos_url": "https://api.github.com/users/kushaldas/repos", "events_url": "https://api.github.com/users/kushaldas/events{/privacy}", "received_events_url": "https://api.github.com/users/kushaldas/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 3, "created_at": "2020-11-26T10:10:59Z", "updated_at": "2020-12-09T16:45:47Z", "closed_at": "2020-12-09T16:45:47Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "## Description\r\n\r\n\r\n`/etc/resolv.conf` contains;\r\n\r\n```\r\nnameserver 127.0.0.53\r\n```\r\n\r\n\r\n## Steps to Reproduce\r\n\r\n- [ ] `apt install nmap`\r\n\r\n## Expected Behavior\r\n\r\n- [ ] `apt` should be able to reach to the servers\r\n\r\n## Actual Behavior\r\n\r\n- [ ] it is stuck as it can not do any name resolution. \r\n\r\n## Comments\r\n\r\nSuggestions to fix, any other relevant information.\r\n", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/5655/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/5655/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/5622", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/5622/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/5622/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/5622/events", "html_url": "https://github.com/freedomofpress/securedrop/issues/5622", "id": 740226936, "node_id": "MDU6SXNzdWU3NDAyMjY5MzY=", "number": 5622, "title": "cryptography 3.2.1 no longer works with OpenSSL 1.0.2 on Xenial", "user": {"login": "rmol", "id": 47430598, "node_id": "MDQ6VXNlcjQ3NDMwNTk4", "avatar_url": "https://avatars.githubusercontent.com/u/47430598?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rmol", "html_url": "https://github.com/rmol", "followers_url": "https://api.github.com/users/rmol/followers", "following_url": "https://api.github.com/users/rmol/following{/other_user}", "gists_url": "https://api.github.com/users/rmol/gists{/gist_id}", "starred_url": "https://api.github.com/users/rmol/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rmol/subscriptions", "organizations_url": "https://api.github.com/users/rmol/orgs", "repos_url": "https://api.github.com/users/rmol/repos", "events_url": "https://api.github.com/users/rmol/events{/privacy}", "received_events_url": "https://api.github.com/users/rmol/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}, {"id": 750666477, "node_id": "MDU6TGFiZWw3NTA2NjY0Nzc=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/release%20blocker", "name": "release blocker", "color": "000000", "default": false, "description": null}, {"id": 1292824193, "node_id": "MDU6TGFiZWwxMjkyODI0MTkz", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/urgent%20off-sprint%20issue", "name": "urgent off-sprint issue", "color": "d86e80", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2020-11-10T20:39:01Z", "updated_at": "2020-11-11T18:21:40Z", "closed_at": "2020-11-11T18:21:40Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "## Description\r\n\r\nThe `cryptography` project [stopped supporting OpenSSL 1.0.2 in version 3.2](https://cryptography.io/en/latest/changelog.html#v3-2). The `RuntimeError` [raised now](https://github.com/pyca/cryptography/blob/0c7592c34fd58f0634f493d6ce542ab35d940b26/src/cryptography/hazmat/bindings/openssl/binding.py#L169), after our recent [update to 3.2.1](https://github.com/freedomofpress/securedrop/pull/5612), will prevent file submissions in any environment using the `securedrop-app-code` Debian package, i.e. staging or production.\r\n\r\nThis wasn't noticed because `cryptography` is installed via binary wheels in the dev container, and [the manylinux wheels are statically linked with newer, supported OpenSSL libraries](https://cryptography.io/en/latest/installation.html#static-wheels) so manual testing and CI never encountered the error.\r\n\r\nFor now, we can still use the version of OpenSSL maintained on Xenial by setting the `CRYPTOGRAPHY_ALLOW_OPENSSL_102` environment variable, but support for 1.0.2 has now [really been removed](https://github.com/pyca/cryptography/pull/5511), so this will only work until the next time we need to upgrade `cryptography`. With luck, that will be after we migrate to Focal, but if it has to happen sooner, we may have to consider adding `--only-binary=cryptography` to the `dh-virtualenv` [options](https://github.com/freedomofpress/securedrop/blob/ce2282712e0760dadc63caead8c468e22b3a3d58/install_files/securedrop-app-code/debian/rules#L33) to package a wheel linked against a usable OpenSSL version.\r\n\r\nSeparately, we should probably think about using the same pip options in development containers as we do for the production packages, to prevent this sort of difference going undetected through manual testing, local test runs, and CI. :roll_eyes: \r\n\r\n## Steps to Reproduce\r\n\r\nSet up a staging environment on `develop` and try to submit a file through the source interface. You will get a server error, with the `RuntimeError` about the old OpenSSL library in `/var/log/apache2/source-errors.log`. \r\n", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/5622/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/5622/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/5617", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/5617/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/5617/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/5617/events", "html_url": "https://github.com/freedomofpress/securedrop/issues/5617", "id": 737188278, "node_id": "MDU6SXNzdWU3MzcxODgyNzg=", "number": 5617, "title": "Resetting journalist password more than once can raise IntegrityError", "user": {"login": "rmol", "id": 47430598, "node_id": "MDQ6VXNlcjQ3NDMwNTk4", "avatar_url": "https://avatars.githubusercontent.com/u/47430598?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rmol", "html_url": "https://github.com/rmol", "followers_url": "https://api.github.com/users/rmol/followers", "following_url": "https://api.github.com/users/rmol/following{/other_user}", "gists_url": "https://api.github.com/users/rmol/gists{/gist_id}", "starred_url": "https://api.github.com/users/rmol/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rmol/subscriptions", "organizations_url": "https://api.github.com/users/rmol/orgs", "repos_url": "https://api.github.com/users/rmol/repos", "events_url": "https://api.github.com/users/rmol/events{/privacy}", "received_events_url": "https://api.github.com/users/rmol/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}, {"id": 475977470, "node_id": "MDU6TGFiZWw0NzU5Nzc0NzA=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/journalist%20interface%20(JI)", "name": "journalist interface (JI)", "color": "f9d0c4", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-11-05T19:01:35Z", "updated_at": "2020-11-11T12:06:42Z", "closed_at": "2020-11-11T12:06:42Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "## Description\r\n\r\nIf a journalist's password is reset twice in quick succession, the second attempt to revoke the two-factor token will trigger an exception:\r\n```\r\nsqlalchemy.exc.IntegrityError: (sqlite3.IntegrityError) UNIQUE constraint failed: revoked_tokens.token\r\n[SQL: INSERT INTO revoked_tokens (journalist_id, token) VALUES (?, ?)]\r\n```\r\n\r\n## Steps to Reproduce\r\n\r\n- Run `make dev`\r\n- Log in as `dellsberg`.\r\n- Log in as `journalist`, visit http://localhost:8081/admin/ and edit the `dellsberg` account. \r\n- Reset the password once, then again. You should see the `IntegrityError`.\r\n\r\n## Expected Behavior\r\n\r\nThat you could reset the password as many times as you like.\r\n\r\n## Actual Behavior\r\n\r\nYou cannot reset the password as many times as you like.\r\n", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/5617/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/5617/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/5607", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/5607/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/5607/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/5607/events", "html_url": "https://github.com/freedomofpress/securedrop/issues/5607", "id": 734084280, "node_id": "MDU6SXNzdWU3MzQwODQyODA=", "number": 5607, "title": "Assertions are not evaluated in some functional tests", "user": {"login": "DrGFreeman", "id": 22901938, "node_id": "MDQ6VXNlcjIyOTAxOTM4", "avatar_url": "https://avatars.githubusercontent.com/u/22901938?v=4", "gravatar_id": "", "url": "https://api.github.com/users/DrGFreeman", "html_url": "https://github.com/DrGFreeman", "followers_url": "https://api.github.com/users/DrGFreeman/followers", "following_url": "https://api.github.com/users/DrGFreeman/following{/other_user}", "gists_url": "https://api.github.com/users/DrGFreeman/gists{/gist_id}", "starred_url": "https://api.github.com/users/DrGFreeman/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/DrGFreeman/subscriptions", "organizations_url": "https://api.github.com/users/DrGFreeman/orgs", "repos_url": "https://api.github.com/users/DrGFreeman/repos", "events_url": "https://api.github.com/users/DrGFreeman/events{/privacy}", "received_events_url": "https://api.github.com/users/DrGFreeman/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}, {"id": 625966031, "node_id": "MDU6TGFiZWw2MjU5NjYwMzE=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/able%20to%20reproduce", "name": "able to reproduce", "color": "fbca04", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2020-11-01T23:09:21Z", "updated_at": "2020-11-12T07:30:15Z", "closed_at": "2020-11-12T07:30:15Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "## Description\r\n\r\nFunctional tests using navigation steps in which the `assert` statement is behind the `if not hasattr(self, \"accept_languages\"):` guard clause always pass regardless of the assertion result.\r\n\r\n## Steps to Reproduce\r\n\r\nReplace the `assert` statement on line 168 below with `assert False`.\r\nhttps://github.com/freedomofpress/securedrop/blob/8c86e8ee717c4971a34e8555b41f6e9d82e4870e/securedrop/tests/functional/journalist_navigation_steps.py#L162-L170\r\n\r\nRun the test in the dev container with `make test` or `securedrop/bin/dev-shell bin/run-test -v -x tests/functional/test_journalist.py::TestJournalist`\r\n\r\n\r\n## Expected Behavior\r\n\r\n`tests/functional/test_journalist.py::TestJournalist::test_journalist_verifies_deletion_of_one_submission_modal` is expected to fail.\r\n\r\n## Actual Behavior\r\n\r\n`tests/functional/test_journalist.py::TestJournalist::test_journalist_verifies_deletion_of_one_submission_modal` passes.\r\n\r\n## Comments\r\n\r\nThe `FunctionalTest` class from which all functional test classes inherit has `accept_languages = None` as default and this attribute is not modified except for the tests in `tests/pageslayout`. The `if not hasattr(self, \"accept_languages\"):` guard clause therefore always evaluates to `False` and the assertion is not executed.\r\n\r\nI believe the guard clause could be changed to `if self.accept_languages is None:` so the assertions are evaluated during the functional tests and skipped in the page layout tests.\r\n", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/5607/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/5607/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/5594", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/5594/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/5594/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/5594/events", "html_url": "https://github.com/freedomofpress/securedrop/issues/5594", "id": 725973313, "node_id": "MDU6SXNzdWU3MjU5NzMzMTM=", "number": 5594, "title": "dev server hot reload has stopped working", "user": {"login": "rmol", "id": 47430598, "node_id": "MDQ6VXNlcjQ3NDMwNTk4", "avatar_url": "https://avatars.githubusercontent.com/u/47430598?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rmol", "html_url": "https://github.com/rmol", "followers_url": "https://api.github.com/users/rmol/followers", "following_url": "https://api.github.com/users/rmol/following{/other_user}", "gists_url": "https://api.github.com/users/rmol/gists{/gist_id}", "starred_url": "https://api.github.com/users/rmol/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rmol/subscriptions", "organizations_url": "https://api.github.com/users/rmol/orgs", "repos_url": "https://api.github.com/users/rmol/repos", "events_url": "https://api.github.com/users/rmol/events{/privacy}", "received_events_url": "https://api.github.com/users/rmol/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}, {"id": 616447641, "node_id": "MDU6TGFiZWw2MTY0NDc2NDE=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/development%20env", "name": "development env", "color": "bfd4f2", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2020-10-20T21:58:47Z", "updated_at": "2020-10-21T16:01:12Z", "closed_at": "2020-10-21T16:01:12Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "## Description\r\n\r\nIn #5532 the `env` attribute was dropped from `SDConfig` in `sdconfig.py`. That value is checked in [`source.py`](https://github.com/freedomofpress/securedrop/blob/6246482157e31d0655a91c5e7284cc8550f2c289/securedrop/source.py#L11) and [`journalist.py`](https://github.com/freedomofpress/securedrop/blob/6246482157e31d0655a91c5e7284cc8550f2c289/securedrop/journalist.py#L26) to determine whether the Flask app will run in [debug](https://flask.palletsprojects.com/en/1.1.x/config/#DEBUG) mode. By default it will not, so the dev server has stopped responding to code changes.\r\n\r\nGiven the Flask documentation warnings about setting debug mode via code and not the `FLASK_DEBUG` environment variable, we may want to reevaluate all of this, but right now let's just get back to a properly functioning dev server.\r\n\r\n## Steps to Reproduce\r\n\r\n- Check out `develop` at a commit before the `sdconfig.py` change (eff931fa8a0e74d5c3be87e46c5d0f004f02e289).\r\n- Run `make dev`.\r\n- Change `securedrop/journalist_app/main.py` to trigger a reload, and confirm that the change is detected.\r\n- Stop the dev server.\r\n- Check out `develop` and run `make dev`.\r\n- Change `securedrop/journalist_app/main.py` again, and observe that the change is not detected.\r\n\r\n## Expected Behavior\r\n\r\nThat the dev server would notice code changes and reload to pick them up.\r\n\r\n## Actual Behavior\r\n\r\nIt does not care one whit about your useless flailings. We are all `prod` now.\r\n\r\n## Comments\r\n\r\nJust need to restore `SDConfig.env`.\r\n", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/5594/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/5594/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/5592", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/5592/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/5592/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/5592/events", "html_url": "https://github.com/freedomofpress/securedrop/issues/5592", "id": 724560235, "node_id": "MDU6SXNzdWU3MjQ1NjAyMzU=", "number": 5592, "title": "test_submit_message and test_submit_file failure on Focal container", "user": {"login": "kushaldas", "id": 272303, "node_id": "MDQ6VXNlcjI3MjMwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/272303?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kushaldas", "html_url": "https://github.com/kushaldas", "followers_url": "https://api.github.com/users/kushaldas/followers", "following_url": "https://api.github.com/users/kushaldas/following{/other_user}", "gists_url": "https://api.github.com/users/kushaldas/gists{/gist_id}", "starred_url": "https://api.github.com/users/kushaldas/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kushaldas/subscriptions", "organizations_url": "https://api.github.com/users/kushaldas/orgs", "repos_url": "https://api.github.com/users/kushaldas/repos", "events_url": "https://api.github.com/users/kushaldas/events{/privacy}", "received_events_url": "https://api.github.com/users/kushaldas/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2020-10-19T12:21:59Z", "updated_at": "2020-11-05T09:46:35Z", "closed_at": "2020-11-05T09:46:35Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "## Description\r\n\r\nOn `dev_focal` branch, if we run tests, we will see errors related to gpg decryption operation.\r\n\r\n## Steps to Reproduce\r\n\r\n- [ ] `make test-focal`\r\n\r\n\r\n## Expected Behavior\r\n\r\n- [ ] all tests should pass\r\n\r\n## Actual Behavior\r\n\r\n`test_submit_message` and `test_submit_file` are failing with the following error.\r\n\r\n```\r\nsource_app = <Flask 'source_app'>, journalist_app = <Flask 'journalist_app'>                                                                                                                       \r\ntest_journo = {'first_name': None, 'id': 1, 'journalist': <Journalist untrained henna pastime borough olympics cathouse tinfoil okay>, 'last_name': None, ...}                                     \r\n                                                                                                                                                                                                   \r\n    def test_submit_message(source_app, journalist_app, test_journo):                                                                                                                              \r\n        \"\"\"When a source creates an account, test that a new entry appears                                                                                                                         \r\n        in the journalist interface\"\"\"                                                                                                                                                             \r\n        test_msg = \"This is a test message.\"                                                                                                                                                       \r\n                                                                                                                                                                                                   \r\n        with source_app.test_client() as app:                                                                                                                                                      \r\n            app.get('/generate')                                                                                                                                                                   \r\n            tab_id = next(iter(session['codenames'].keys()))                                                                                                                                       \r\n            app.post('/create', data={'tab_id': tab_id}, follow_redirects=True)                                                                                                                    \r\n            filesystem_id = g.filesystem_id                                                                                                                                                        \r\n            # redirected to submission form                                                                                                                                                        \r\n            resp = app.post('/submit', data=dict(                                                                                                                                                  \r\n                msg=test_msg,                                                                                                                                                                      \r\n                fh=(BytesIO(b''), ''),                                                                                                                                                             \r\n            ), follow_redirects=True)                                                                                                                                                              \r\n            assert resp.status_code == 200                                                                                                                                                         \r\n            app.get('/logout')                                                                                                                                                                     \r\n                                                                                                                                                                                                   \r\n        # Request the Journalist Interface index                                                                                                                                                   \r\n        with journalist_app.test_client() as app:                                                                                                                                                  \r\n            _login_user(app, test_journo)                                                                                                                                                          \r\n            resp = app.get('/')                                                                                                                                                                    \r\n            assert resp.status_code == 200                                                                                                                                                         \r\n            text = resp.data.decode('utf-8')                                                                                                                                                       \r\n            assert \"Sources\" in text                                                                                                                                                               \r\n            soup = BeautifulSoup(text, 'html.parser')\r\n\r\n            # The source should have a \"download unread\" link that\r\n            # says \"1 unread\"\r\n            col = soup.select('ul#cols > li')[0]\r\n            unread_span = col.select('span.unread a')[0]\r\n            assert \"1 unread\" in unread_span.get_text()\r\n\r\n            col_url = soup.select('ul#cols > li a')[0]['href']\r\n            resp = app.get(col_url)\r\n            assert resp.status_code == 200\r\n            text = resp.data.decode('utf-8')\r\n            soup = BeautifulSoup(text, 'html.parser')\r\n            submission_url = soup.select('ul#submissions li a')[0]['href']\r\n            assert \"-msg\" in submission_url\r\n            span = soup.select('ul#submissions li span.info span')[0]\r\n            assert re.compile(r'\\d+ bytes').match(span['title'])\r\n\r\n            resp = app.get(submission_url)\r\n            assert resp.status_code == 200\r\n            decrypted_data = journalist_app.crypto_util.gpg.decrypt(resp.data)\r\n>           assert decrypted_data.ok\r\nE           assert False\r\nE            +  where False = <pretty_bad_protocol._parsers.Crypt object at 0x7f4728da3490>.ok\r\n\r\ntests/test_integration.py:98: AssertionError\r\n-------------------------------------------------------------------------------------- Captured stdout setup --------------------------------------------------------------------------------------\r\nmain: /tmp/pytest-of-www-data/pytest-0/test_submit_message0/data/db.sqlite\r\n-------------------------------------------------------------------------------------- Captured stderr call ---------------------------------------------------------------------------------------\r\nException in thread Thread-2245:\r\nTraceback (most recent call last):\r\n  File \"/usr/lib/python3.8/threading.py\", line 932, in _bootstrap_inner\r\n    self.run()\r\n  File \"/usr/lib/python3.8/threading.py\", line 870, in run\r\n    self._target(*self._args, **self._kwargs)\r\n  File \"/opt/venvs/securedrop-app-code/lib/python3.8/site-packages/pretty_bad_protocol/_meta.py\", line 670, in _read_response\r\n    result._handle_status(keyword, value)\r\n  File \"/opt/venvs/securedrop-app-code/lib/python3.8/site-packages/pretty_bad_protocol/_parsers.py\", line 1772, in _handle_status\r\n    super(Crypt, self)._handle_status(key, value)\r\n  File \"/opt/venvs/securedrop-app-code/lib/python3.8/site-packages/pretty_bad_protocol/_parsers.py\", line 1671, in _handle_status\r\n    raise ValueError(\"Unknown status message: %r %r\" % (key, value))\r\nValueError: Unknown status message: 'DECRYPTION_COMPLIANCE_MODE' '23'\r\n\r\n```\r\n\r\n## Comments\r\n\r\nSuggestions to fix, any other relevant information.\r\n", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/5592/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/5592/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/5557", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/5557/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/5557/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/5557/events", "html_url": "https://github.com/freedomofpress/securedrop/issues/5557", "id": 715550060, "node_id": "MDU6SXNzdWU3MTU1NTAwNjA=", "number": 5557, "title": "make dev failing on develop for redis can not get port 6739", "user": {"login": "kushaldas", "id": 272303, "node_id": "MDQ6VXNlcjI3MjMwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/272303?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kushaldas", "html_url": "https://github.com/kushaldas", "followers_url": "https://api.github.com/users/kushaldas/followers", "following_url": "https://api.github.com/users/kushaldas/following{/other_user}", "gists_url": "https://api.github.com/users/kushaldas/gists{/gist_id}", "starred_url": "https://api.github.com/users/kushaldas/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kushaldas/subscriptions", "organizations_url": "https://api.github.com/users/kushaldas/orgs", "repos_url": "https://api.github.com/users/kushaldas/repos", "events_url": "https://api.github.com/users/kushaldas/events{/privacy}", "received_events_url": "https://api.github.com/users/kushaldas/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}, {"id": 616447641, "node_id": "MDU6TGFiZWw2MTY0NDc2NDE=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/development%20env", "name": "development env", "color": "bfd4f2", "default": false, "description": null}, {"id": 625966031, "node_id": "MDU6TGFiZWw2MjU5NjYwMzE=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/able%20to%20reproduce", "name": "able to reproduce", "color": "fbca04", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2020-10-06T10:36:21Z", "updated_at": "2020-10-07T12:40:07Z", "closed_at": "2020-10-07T12:40:07Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "## Description\r\n\r\n`make dev` is failing only on my local laptop with error related to `Redis` connection.\r\n\r\n## Steps to Reproduce\r\n\r\n- [ ] `make dev`\r\n\r\n## Expected Behavior\r\n\r\n- [ ] A dev container will start.\r\n\r\n## Actual Behavior\r\n\r\n```\r\nSuccessfully tagged securedrop-test-xenial-py3:latest\r\n************************************************************\r\nExposed Docker ports will be available on localhost with\r\nPort offset: 0\r\nSource interface: 8080\r\nJournalist interface: 8081\r\nVNC: 5909\r\n************************************************************\r\n9:C 06 Oct 10:13:26.547 # Warning: no config file specified, using the default config. In order to specify a config file use redis-server /path/to/redis.conf\r\n                _._                                                  \r\n           _.-``__ ''-._                                             \r\n      _.-``    `.  `_.  ''-._           Redis 3.0.6 (00000000/0) 64 bit\r\n  .-`` .-```.  ```\\/    _.,_ ''-._                                   \r\n (    '      ,       .-`  | `,    )     Running in standalone mode\r\n |`-._`-...-` __...-.``-._|'` _.-'|     Port: 6379\r\n |    `-._   `._    /     _.-'    |     PID: 9\r\n  `-._    `-._  `-./  _.-'    _.-'                                   \r\n |`-._`-._    `-.__.-'    _.-'_.-'|                                  \r\n |    `-._`-._        _.-'_.-'    |           http://redis.io        \r\n  `-._    `-._`-.__.-'_.-'    _.-'                                   \r\n |`-._`-._    `-.__.-'    _.-'_.-'|                                  \r\n |    `-._`-._        _.-'_.-'    |                                  \r\n  `-._    `-._`-.__.-'_.-'    _.-'                                   \r\n      `-._    `-.__.-'    _.-'                                       \r\n          `-._        _.-'                                           \r\n              `-.__.-'                                               \r\n\r\n9:M 06 Oct 10:13:26.549 # Server started, Redis version 3.0.6\r\n9:M 06 Oct 10:13:26.549 # WARNING overcommit_memory is set to 0! Background save may fail under low memory condition. To fix this issue add 'vm.overcommit_memory = 1' to /etc/sysctl.conf and then reboot or run the command 'sysctl vm.overcommit_memory=1' for this to take effect.\r\n9:M 06 Oct 10:13:26.549 # WARNING you have Transparent Huge Pages (THP) support enabled in your kernel. This will create latency and memory usage issues with Redis. To fix this issue run the command 'echo never > /sys/kernel/mm/transparent_hugepage/enabled' as root, and add it to your /etc/rc.local in order to retain the setting after a reboot. Redis must be restarted after THP is disabled.\r\n9:M 06 Oct 10:13:26.549 # Can't handle RDB format version 9\r\n9:M 06 Oct 10:13:26.549 # Fatal error loading the DB: Invalid argument. Exiting.\r\n\u2588\u2588\u2588 Generating securedrop/config.py...\r\n>>> Sass is watching for changes. Press Ctrl-C to stop.\r\n\r\n[Listen warning]:\r\n  Listen will be polling for changes. Learn more at https://github.com/guard/listen#polling-fallback.\r\nseq  name             file                                                      \r\n---  ---------------  ----------------------------------------------------------\r\n0    main             /var/lib/securedrop/db.sqlite                             \r\ngpg: key 28271441: public key \"SecureDrop Test/Development (DO NOT USE IN PRODUCTION)\" imported\r\ngpg: Total number processed: 1\r\ngpg:               imported: 1\r\nTest user successfully added: username=journalist, password=correct horse battery staple profanity oil chewy, otp_secret=JHCOGO7VCER3EJ4L, is_admin=True\r\nTest user successfully added: username=dellsberg, password=correct horse battery staple profanity oil chewy, otp_secret=JHCOGO7VCER3EJ4L, is_admin=False\r\nTest user successfully added: username=clarkkent, password=correct horse battery staple profanity oil chewy, otp_secret=JHCOGO7VCER3EJ4L, is_admin=False\r\nTraceback (most recent call last):\r\n  File \"/opt/venvs/securedrop-app-code/lib/python3.5/site-packages/redis/connection.py\", line 526, in connect\r\n    sock = self._connect()\r\n  File \"/opt/venvs/securedrop-app-code/lib/python3.5/site-packages/redis/connection.py\", line 583, in _connect\r\n    raise err\r\n  File \"/opt/venvs/securedrop-app-code/lib/python3.5/site-packages/redis/connection.py\", line 571, in _connect\r\n    sock.connect(socket_address)\r\nOSError: [Errno 99] Cannot assign requested address\r\n\r\nDuring handling of the above exception, another exception occurred:\r\n\r\nTraceback (most recent call last):\r\n  File \"./create-dev-data.py\", line 162, in <module>\r\n    main(args.staging)\r\n  File \"./create-dev-data.py\", line 64, in main\r\n    i, num_sources, journalist_who_replied=journalist_tobe_deleted\r\n  File \"./create-dev-data.py\", line 131, in create_source_and_submissions\r\n    [current_app.crypto_util.get_fingerprint(source.filesystem_id),\r\n  File \"/home/kdas/code/focal/securedrop/securedrop/crypto_util.py\", line 283, in get_fingerprint\r\n    fingerprint = self.redis.hget(self.REDIS_FINGERPRINT_HASH, name)\r\n  File \"/opt/venvs/securedrop-app-code/lib/python3.5/site-packages/redis/client.py\", line 2713, in hget\r\n    return self.execute_command('HGET', name, key)\r\n  File \"/opt/venvs/securedrop-app-code/lib/python3.5/site-packages/redis/client.py\", line 836, in execute_command\r\n    conn = self.connection or pool.get_connection(command_name, **options)\r\n  File \"/opt/venvs/securedrop-app-code/lib/python3.5/site-packages/redis/connection.py\", line 1059, in get_connection\r\n    connection.connect()\r\n  File \"/opt/venvs/securedrop-app-code/lib/python3.5/site-packages/redis/connection.py\", line 531, in connect\r\n    raise ConnectionError(self._error_message(e))\r\nredis.exceptions.ConnectionError: Error 99 connecting to localhost:6379. Cannot assign requested address.\r\nmake: *** [Makefile:176: dev] Error 1\r\n\r\n```\r\n\r\n## Comments\r\n\r\nSuggestions to fix, any other relevant information.\r\n", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/5557/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/5557/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/5543", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/5543/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/5543/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/5543/events", "html_url": "https://github.com/freedomofpress/securedrop/issues/5543", "id": 712025687, "node_id": "MDU6SXNzdWU3MTIwMjU2ODc=", "number": 5543, "title": "Attempting to delete a reply whose corresponding GPG file is missing generates a 500 in the JI", "user": {"login": "zenmonkeykstop", "id": 2782952, "node_id": "MDQ6VXNlcjI3ODI5NTI=", "avatar_url": "https://avatars.githubusercontent.com/u/2782952?v=4", "gravatar_id": "", "url": "https://api.github.com/users/zenmonkeykstop", "html_url": "https://github.com/zenmonkeykstop", "followers_url": "https://api.github.com/users/zenmonkeykstop/followers", "following_url": "https://api.github.com/users/zenmonkeykstop/following{/other_user}", "gists_url": "https://api.github.com/users/zenmonkeykstop/gists{/gist_id}", "starred_url": "https://api.github.com/users/zenmonkeykstop/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/zenmonkeykstop/subscriptions", "organizations_url": "https://api.github.com/users/zenmonkeykstop/orgs", "repos_url": "https://api.github.com/users/zenmonkeykstop/repos", "events_url": "https://api.github.com/users/zenmonkeykstop/events{/privacy}", "received_events_url": "https://api.github.com/users/zenmonkeykstop/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}, {"id": 385585080, "node_id": "MDU6TGFiZWwzODU1ODUwODA=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/QA:%20Release", "name": "QA: Release", "color": "fbca04", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2020-09-30T15:00:33Z", "updated_at": "2020-10-05T10:16:43Z", "closed_at": "2020-10-05T10:16:43Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "## Description\r\n\r\nAttempting to delete a reply whose corresponding GPG file is missing generates a 500 in the JI\r\n\r\n## Steps to Reproduce\r\n\r\nIn the JI:\r\n- reply to a source\r\nOn the app server:\r\n- delete the corresponding reply file in `/var/lib/securedrop/store`\r\nIn the JI:\r\n- delete the reply\r\n\r\n## Expected Behavior\r\nGood question! I would err on the side of deleting the db entry and calling it done. But it could flag the issue to the user in more detail than that provided by the 500 error page text.\r\n\r\nThis also has issues for deleting multiple files - if multiples are selected, deletion stops at the missing reply file. Expected behaviour in that case would be to continue with the operation.\r\n\r\n## Actual Behavior\r\n500 error thrown. If multiple files selected for deletion, all files listed after the buster reply file remain in place.\r\n", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/5543/reactions", "total_count": 1, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/5543/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/5402", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/5402/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/5402/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/5402/events", "html_url": "https://github.com/freedomofpress/securedrop/issues/5402", "id": 664161921, "node_id": "MDU6SXNzdWU2NjQxNjE5MjE=", "number": 5402, "title": "Source cannot log in with codename if reply files are missing", "user": {"login": "zenmonkeykstop", "id": 2782952, "node_id": "MDQ6VXNlcjI3ODI5NTI=", "avatar_url": "https://avatars.githubusercontent.com/u/2782952?v=4", "gravatar_id": "", "url": "https://api.github.com/users/zenmonkeykstop", "html_url": "https://github.com/zenmonkeykstop", "followers_url": "https://api.github.com/users/zenmonkeykstop/followers", "following_url": "https://api.github.com/users/zenmonkeykstop/following{/other_user}", "gists_url": "https://api.github.com/users/zenmonkeykstop/gists{/gist_id}", "starred_url": "https://api.github.com/users/zenmonkeykstop/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/zenmonkeykstop/subscriptions", "organizations_url": "https://api.github.com/users/zenmonkeykstop/orgs", "repos_url": "https://api.github.com/users/zenmonkeykstop/repos", "events_url": "https://api.github.com/users/zenmonkeykstop/events{/privacy}", "received_events_url": "https://api.github.com/users/zenmonkeykstop/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/freedomofpress/securedrop/milestones/65", "html_url": "https://github.com/freedomofpress/securedrop/milestone/65", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/milestones/65/labels", "id": 5694550, "node_id": "MDk6TWlsZXN0b25lNTY5NDU1MA==", "number": 65, "title": "1.6.0", "description": "Release manager: @emkll. Deputy release manager: @zenmonkeykstop. Localization manager: @kushaldas. Deputy localization manager: @conorsch. Communications manager: @rocodes", "creator": {"login": "eloquence", "id": 213636, "node_id": "MDQ6VXNlcjIxMzYzNg==", "avatar_url": "https://avatars.githubusercontent.com/u/213636?v=4", "gravatar_id": "", "url": "https://api.github.com/users/eloquence", "html_url": "https://github.com/eloquence", "followers_url": "https://api.github.com/users/eloquence/followers", "following_url": "https://api.github.com/users/eloquence/following{/other_user}", "gists_url": "https://api.github.com/users/eloquence/gists{/gist_id}", "starred_url": "https://api.github.com/users/eloquence/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/eloquence/subscriptions", "organizations_url": "https://api.github.com/users/eloquence/orgs", "repos_url": "https://api.github.com/users/eloquence/repos", "events_url": "https://api.github.com/users/eloquence/events{/privacy}", "received_events_url": "https://api.github.com/users/eloquence/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 11, "state": "closed", "created_at": "2020-07-23T22:44:08Z", "updated_at": "2020-12-01T07:00:57Z", "due_on": "2020-10-07T07:00:00Z", "closed_at": "2020-12-01T07:00:57Z"}, "comments": 5, "created_at": "2020-07-23T02:29:13Z", "updated_at": "2020-09-16T12:17:22Z", "closed_at": "2020-09-16T12:17:22Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "## Description\r\n\r\nIf a source has received a reply, and the reply file is removed from (or never written to) `/var/lib/securedrop/store`, then the source cannot successfully log in and reach the `/lookup` page. Instead a 500 error is generated, and the only option available is to log in via  another codename or log out. On the JI, the source page is listed as normal, but the reply file cannot be downloaded.\r\n\r\n## Steps to Reproduce\r\n\r\n- create a new source on the SI, submit a message, and note their codename\r\n- reply to the new source in the JI\r\n- verify that the reply is visible on the SI for the new source\r\n- on the app server, identify and delete the corresponding `reply.gpg`\r\n- log out from the SI and attempt to log in using the new source's codename\r\n\r\n## Expected Behavior\r\nSource can log in and submit documents or read other replies\r\n\r\n## Actual Behavior\r\nSource cannot log in, and a stack trace similar to the following is recorded in the source error logs (if enabled):\r\n```\r\n[Wed Jul 22 22:10:08.442888 2020] [wsgi:error] [pid 11154:tid 115647289255680] [remote 127.0.0.1:40108] [2020-07-22 22:10:08,442] ERROR in app: Exception on /lookup [GET]\r\n[Wed Jul 22 22:10:08.442937 2020] [wsgi:error] [pid 11154:tid 115647289255680] [remote 127.0.0.1:40108] Traceback (most recent call last):\r\n[Wed Jul 22 22:10:08.442946 2020] [wsgi:error] [pid 11154:tid 115647289255680] [remote 127.0.0.1:40108]   File \"/opt/venvs/securedrop-app-code/lib/python3.5/site-packages/flask/app.py\", line 2292, in wsgi_app\r\n[Wed Jul 22 22:10:08.442953 2020] [wsgi:error] [pid 11154:tid 115647289255680] [remote 127.0.0.1:40108]     response = self.full_dispatch_request()\r\n[Wed Jul 22 22:10:08.442959 2020] [wsgi:error] [pid 11154:tid 115647289255680] [remote 127.0.0.1:40108]   File \"/opt/venvs/securedrop-app-code/lib/python3.5/site-packages/flask/app.py\", line 1815, in full_dispatch_request\r\n[Wed Jul 22 22:10:08.442966 2020] [wsgi:error] [pid 11154:tid 115647289255680] [remote 127.0.0.1:40108]     rv = self.handle_user_exception(e)\r\n[Wed Jul 22 22:10:08.442972 2020] [wsgi:error] [pid 11154:tid 115647289255680] [remote 127.0.0.1:40108]   File \"/opt/venvs/securedrop-app-code/lib/python3.5/site-packages/flask/app.py\", line 1718, in handle_user_exception\r\n[Wed Jul 22 22:10:08.442979 2020] [wsgi:error] [pid 11154:tid 115647289255680] [remote 127.0.0.1:40108]     reraise(exc_type, exc_value, tb)\r\n[Wed Jul 22 22:10:08.442985 2020] [wsgi:error] [pid 11154:tid 115647289255680] [remote 127.0.0.1:40108]   File \"/opt/venvs/securedrop-app-code/lib/python3.5/site-packages/flask/_compat.py\", line 35, in reraise\r\n[Wed Jul 22 22:10:08.442992 2020] [wsgi:error] [pid 11154:tid 115647289255680] [remote 127.0.0.1:40108]     raise value\r\n[Wed Jul 22 22:10:08.442998 2020] [wsgi:error] [pid 11154:tid 115647289255680] [remote 127.0.0.1:40108]   File \"/opt/venvs/securedrop-app-code/lib/python3.5/site-packages/flask/app.py\", line 1813, in full_dispatch_request\r\n[Wed Jul 22 22:10:08.443005 2020] [wsgi:error] [pid 11154:tid 115647289255680] [remote 127.0.0.1:40108]     rv = self.dispatch_request()\r\n[Wed Jul 22 22:10:08.443011 2020] [wsgi:error] [pid 11154:tid 115647289255680] [remote 127.0.0.1:40108]   File \"/opt/venvs/securedrop-app-code/lib/python3.5/site-packages/flask/app.py\", line 1799, in dispatch_request\r\n[Wed Jul 22 22:10:08.443017 2020] [wsgi:error] [pid 11154:tid 115647289255680] [remote 127.0.0.1:40108]     return self.view_functions[rule.endpoint](**req.view_args)\r\n[Wed Jul 22 22:10:08.443023 2020] [wsgi:error] [pid 11154:tid 115647289255680] [remote 127.0.0.1:40108]   File \"/var/www/securedrop/source_app/decorators.py\", line 12, in decorated_function\r\n[Wed Jul 22 22:10:08.443029 2020] [wsgi:error] [pid 11154:tid 115647289255680] [remote 127.0.0.1:40108]     return f(*args, **kwargs)\r\n[Wed Jul 22 22:10:08.443060 2020] [wsgi:error] [pid 11154:tid 115647289255680] [remote 127.0.0.1:40108]   File \"/var/www/securedrop/source_app/main.py\", line 115, in lookup\r\n[Wed Jul 22 22:10:08.443067 2020] [wsgi:error] [pid 11154:tid 115647289255680] [remote 127.0.0.1:40108]     with io.open(reply_path, \"rb\") as f:\r\n[Wed Jul 22 22:10:08.443076 2020] [wsgi:error] [pid 11154:tid 115647289255680] [remote 127.0.0.1:40108] FileNotFoundError: [Errno 2] No such file or directory: '/var/lib/securedrop/store/YJSI6RQBP5JTHYYMZ4L4MUTQWAI7MNTK5ZUU4K2OXSD34PALIFT7DK6LTAYT43VLGAEOPWBBNV6JWDTHQPFITD6UFPLNYN25RHMJJOY=/2-damp_burner-reply.gpg'\r\n[Wed Jul 22 22:10:08.443111 2020] [wsgi:error] [pid 11154:tid 115647289255680] [remote 127.0.0.1:40108] \r\n```\r\n\r\n## Comments\r\n\r\nThis is a pernicious bug, as it prevents a source from logging in with an existing codename but doesn't present any obvious problems on the JI side (unless the journalist tries to download one of their old replies). It's offset by the recent changes to add nightly checks for orphaned db entries and submission/reply files. However, if an admin isn't paying attention to OSSEC alerts, it may seem to a journalist that a source just stopped responding, while the source may want to keep the conversation going but is blocked from doing so. \r\n\r\nFix is probably simple enough, if the try/catch loop in source_app/main.py caught ` FileNotFoundError`s that might be enough for a basic effort. A more complex fix could also flag the fact that the file was missing in the JI more obviously, possibly prompting journalists to get their admin to run the cleanup scripts.", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/5402/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/5402/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/5400", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/5400/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/5400/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/5400/events", "html_url": "https://github.com/freedomofpress/securedrop/issues/5400", "id": 664105038, "node_id": "MDU6SXNzdWU2NjQxMDUwMzg=", "number": 5400, "title": "[1.5.0] [QA] v2 onion services files are not removed during v3 migration, so deprecation warning still shows ", "user": {"login": "rocodes", "id": 22777700, "node_id": "MDQ6VXNlcjIyNzc3NzAw", "avatar_url": "https://avatars.githubusercontent.com/u/22777700?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rocodes", "html_url": "https://github.com/rocodes", "followers_url": "https://api.github.com/users/rocodes/followers", "following_url": "https://api.github.com/users/rocodes/following{/other_user}", "gists_url": "https://api.github.com/users/rocodes/gists{/gist_id}", "starred_url": "https://api.github.com/users/rocodes/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rocodes/subscriptions", "organizations_url": "https://api.github.com/users/rocodes/orgs", "repos_url": "https://api.github.com/users/rocodes/repos", "events_url": "https://api.github.com/users/rocodes/events{/privacy}", "received_events_url": "https://api.github.com/users/rocodes/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}, {"id": 385585080, "node_id": "MDU6TGFiZWwzODU1ODUwODA=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/QA:%20Release", "name": "QA: Release", "color": "fbca04", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "rmol", "id": 47430598, "node_id": "MDQ6VXNlcjQ3NDMwNTk4", "avatar_url": "https://avatars.githubusercontent.com/u/47430598?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rmol", "html_url": "https://github.com/rmol", "followers_url": "https://api.github.com/users/rmol/followers", "following_url": "https://api.github.com/users/rmol/following{/other_user}", "gists_url": "https://api.github.com/users/rmol/gists{/gist_id}", "starred_url": "https://api.github.com/users/rmol/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rmol/subscriptions", "organizations_url": "https://api.github.com/users/rmol/orgs", "repos_url": "https://api.github.com/users/rmol/repos", "events_url": "https://api.github.com/users/rmol/events{/privacy}", "received_events_url": "https://api.github.com/users/rmol/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "rmol", "id": 47430598, "node_id": "MDQ6VXNlcjQ3NDMwNTk4", "avatar_url": "https://avatars.githubusercontent.com/u/47430598?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rmol", "html_url": "https://github.com/rmol", "followers_url": "https://api.github.com/users/rmol/followers", "following_url": "https://api.github.com/users/rmol/following{/other_user}", "gists_url": "https://api.github.com/users/rmol/gists{/gist_id}", "starred_url": "https://api.github.com/users/rmol/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rmol/subscriptions", "organizations_url": "https://api.github.com/users/rmol/orgs", "repos_url": "https://api.github.com/users/rmol/repos", "events_url": "https://api.github.com/users/rmol/events{/privacy}", "received_events_url": "https://api.github.com/users/rmol/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 3, "created_at": "2020-07-22T23:14:49Z", "updated_at": "2020-07-23T21:22:15Z", "closed_at": "2020-07-23T21:22:15Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "## Description\r\n\r\nDuring QA, I experienced the following: When migrating to v3 onion services, v2 onion services (`ths`) files were not removed from `install_files/ansible_base` on the Admin workstation, and the `/var/lib/securedrop/source_v2_url` file was still present on the app server (though the v2 url was no longer working).  This means that the v2 deprecation warning, which checks for the presence of the latter file, will still be shown despite v2 onion services being disabled.\r\n\r\nSee https://github.com/freedomofpress/securedrop/pull/5366/files#diff-4c2318c651fa1f217d6b6ed48e77e201R176 \r\n\r\n## Steps to Reproduce\r\n\r\n1. Clean install 1.5.0-rc2 with v2+v3 onion services enabled. Confirm presence of deprecation warning. \r\n2. `sdconfig` to disable v2.\r\n3. `install`, `tailsconfig`\r\n4. Observe deprecation warning and aforementioned files.\r\n\r\n## Expected Behavior\r\n\r\nNo warning is shown\r\n\r\n## Actual Behavior\r\n\r\nDeprecation warning still present \r\n\r\n## Comments\r\n", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/5400/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/5400/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/5334", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/5334/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/5334/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/5334/events", "html_url": "https://github.com/freedomofpress/securedrop/issues/5334", "id": 644062146, "node_id": "MDU6SXNzdWU2NDQwNjIxNDY=", "number": 5334, "title": "Install command fails on admin workstation if v2 services enabled, v3 services disabled.", "user": {"login": "zenmonkeykstop", "id": 2782952, "node_id": "MDQ6VXNlcjI3ODI5NTI=", "avatar_url": "https://avatars.githubusercontent.com/u/2782952?v=4", "gravatar_id": "", "url": "https://api.github.com/users/zenmonkeykstop", "html_url": "https://github.com/zenmonkeykstop", "followers_url": "https://api.github.com/users/zenmonkeykstop/followers", "following_url": "https://api.github.com/users/zenmonkeykstop/following{/other_user}", "gists_url": "https://api.github.com/users/zenmonkeykstop/gists{/gist_id}", "starred_url": "https://api.github.com/users/zenmonkeykstop/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/zenmonkeykstop/subscriptions", "organizations_url": "https://api.github.com/users/zenmonkeykstop/orgs", "repos_url": "https://api.github.com/users/zenmonkeykstop/repos", "events_url": "https://api.github.com/users/zenmonkeykstop/events{/privacy}", "received_events_url": "https://api.github.com/users/zenmonkeykstop/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}, {"id": 157793311, "node_id": "MDU6TGFiZWwxNTc3OTMzMTE=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/priority/high", "name": "priority/high", "color": "e64ef4", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": {"login": "rmol", "id": 47430598, "node_id": "MDQ6VXNlcjQ3NDMwNTk4", "avatar_url": "https://avatars.githubusercontent.com/u/47430598?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rmol", "html_url": "https://github.com/rmol", "followers_url": "https://api.github.com/users/rmol/followers", "following_url": "https://api.github.com/users/rmol/following{/other_user}", "gists_url": "https://api.github.com/users/rmol/gists{/gist_id}", "starred_url": "https://api.github.com/users/rmol/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rmol/subscriptions", "organizations_url": "https://api.github.com/users/rmol/orgs", "repos_url": "https://api.github.com/users/rmol/repos", "events_url": "https://api.github.com/users/rmol/events{/privacy}", "received_events_url": "https://api.github.com/users/rmol/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "rmol", "id": 47430598, "node_id": "MDQ6VXNlcjQ3NDMwNTk4", "avatar_url": "https://avatars.githubusercontent.com/u/47430598?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rmol", "html_url": "https://github.com/rmol", "followers_url": "https://api.github.com/users/rmol/followers", "following_url": "https://api.github.com/users/rmol/following{/other_user}", "gists_url": "https://api.github.com/users/rmol/gists{/gist_id}", "starred_url": "https://api.github.com/users/rmol/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rmol/subscriptions", "organizations_url": "https://api.github.com/users/rmol/orgs", "repos_url": "https://api.github.com/users/rmol/repos", "events_url": "https://api.github.com/users/rmol/events{/privacy}", "received_events_url": "https://api.github.com/users/rmol/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/freedomofpress/securedrop/milestones/64", "html_url": "https://github.com/freedomofpress/securedrop/milestone/64", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/milestones/64/labels", "id": 5579495, "node_id": "MDk6TWlsZXN0b25lNTU3OTQ5NQ==", "number": 64, "title": "1.4.1", "description": "Point release to fix https://github.com/freedomofpress/securedrop/issues/5334\r\n\r\nRM: @zenmonkeykstop DM: @emkll", "creator": {"login": "eloquence", "id": 213636, "node_id": "MDQ6VXNlcjIxMzYzNg==", "avatar_url": "https://avatars.githubusercontent.com/u/213636?v=4", "gravatar_id": "", "url": "https://api.github.com/users/eloquence", "html_url": "https://github.com/eloquence", "followers_url": "https://api.github.com/users/eloquence/followers", "following_url": "https://api.github.com/users/eloquence/following{/other_user}", "gists_url": "https://api.github.com/users/eloquence/gists{/gist_id}", "starred_url": "https://api.github.com/users/eloquence/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/eloquence/subscriptions", "organizations_url": "https://api.github.com/users/eloquence/orgs", "repos_url": "https://api.github.com/users/eloquence/repos", "events_url": "https://api.github.com/users/eloquence/events{/privacy}", "received_events_url": "https://api.github.com/users/eloquence/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 1, "state": "closed", "created_at": "2020-06-24T19:05:51Z", "updated_at": "2020-07-01T23:40:09Z", "due_on": "2020-06-25T07:00:00Z", "closed_at": "2020-07-01T23:40:09Z"}, "comments": 1, "created_at": "2020-06-23T18:42:07Z", "updated_at": "2020-06-24T22:14:15Z", "closed_at": "2020-06-24T22:14:15Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "## Description\r\n\r\nIf the `site-specific` file on an Admin Workstation has `v2_onion_services: true` and `v3_onion_services: false\r\n\r\n## Steps to Reproduce\r\n\r\nusing an admin workstation USB:\r\n- ensure that the workstation code has been upgraded to 1.4.0\r\n- run `./securedrop-admin sdconfig` and set v2 services on, v3 services off\r\n- run `./securedrop-admin install`\r\n\r\n## Expected Behavior\r\n\r\n- Install playbook is run, prompting user for server-side admin password\r\n\r\n## Actual Behavior\r\n\r\n- command fails with error `ERROR: Since you disabled v2 onion services, you must enable v3 onion services`\r\n\r\n## Comments\r\n\r\nThis issue is 1.4.0-specific, 1.3.0-tagged version works correctly. ", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/5334/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/5334/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/5315", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/5315/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/5315/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/5315/events", "html_url": "https://github.com/freedomofpress/securedrop/issues/5315", "id": 639179664, "node_id": "MDU6SXNzdWU2MzkxNzk2NjQ=", "number": 5315, "title": "api: GET /api/v1/submissions produces 500 when there are disconnected submissions", "user": {"login": "redshiftzero", "id": 7832803, "node_id": "MDQ6VXNlcjc4MzI4MDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7832803?v=4", "gravatar_id": "", "url": "https://api.github.com/users/redshiftzero", "html_url": "https://github.com/redshiftzero", "followers_url": "https://api.github.com/users/redshiftzero/followers", "following_url": "https://api.github.com/users/redshiftzero/following{/other_user}", "gists_url": "https://api.github.com/users/redshiftzero/gists{/gist_id}", "starred_url": "https://api.github.com/users/redshiftzero/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/redshiftzero/subscriptions", "organizations_url": "https://api.github.com/users/redshiftzero/orgs", "repos_url": "https://api.github.com/users/redshiftzero/repos", "events_url": "https://api.github.com/users/redshiftzero/events{/privacy}", "received_events_url": "https://api.github.com/users/redshiftzero/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}, {"id": 1189880309, "node_id": "MDU6TGFiZWwxMTg5ODgwMzA5", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/api", "name": "api", "color": "62efc2", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2020-06-15T21:29:15Z", "updated_at": "2020-07-01T12:25:44Z", "closed_at": "2020-07-01T12:25:44Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "## Description\r\n\r\nThe API's submission endpoint should gracefully handle the case where there is a \"disconnected\" submission.\r\n\r\n## Steps to Reproduce\r\n\r\n0. `make dev`\r\n1. docker exec into the container\r\n2. `cd /var/lib/securedrop/`\r\n3. `sqlite3 db.sqlite`\r\n4. `delete from sources where id=1;`\r\n5. While authenticated to the journalist API, `GET /api/v1/submissions`\r\n\r\n## Expected Behavior\r\n\r\nOSSEC alert starts appearing indicating that there are disconnected submissions, encouraging the admin to clean up.\r\n\r\n## Actual Behavior\r\n\r\n500 occurs: \r\n```\r\nTraceback (most recent call last):\r\n  File \"/opt/venvs/securedrop-app-code/lib/python3.5/site-packages/flask/app.py\", line 2309, in __call__\r\n    return self.wsgi_app(environ, start_response)\r\n  File \"/opt/venvs/securedrop-app-code/lib/python3.5/site-packages/flask/app.py\", line 2295, in wsgi_app\r\n    response = self.handle_exception(e)\r\n  File \"/opt/venvs/securedrop-app-code/lib/python3.5/site-packages/flask/app.py\", line 1741, in handle_exception\r\n    reraise(exc_type, exc_value, tb)\r\n  File \"/opt/venvs/securedrop-app-code/lib/python3.5/site-packages/flask/_compat.py\", line 35, in reraise\r\n    raise value\r\n  File \"/opt/venvs/securedrop-app-code/lib/python3.5/site-packages/flask/app.py\", line 2292, in wsgi_app\r\n    response = self.full_dispatch_request()\r\n  File \"/opt/venvs/securedrop-app-code/lib/python3.5/site-packages/flask/app.py\", line 1815, in full_dispatch_request\r\n    rv = self.handle_user_exception(e)\r\n  File \"/opt/venvs/securedrop-app-code/lib/python3.5/site-packages/flask/app.py\", line 1718, in handle_user_exception\r\n    reraise(exc_type, exc_value, tb)\r\n  File \"/opt/venvs/securedrop-app-code/lib/python3.5/site-packages/flask/_compat.py\", line 35, in reraise\r\n    raise value\r\n  File \"/opt/venvs/securedrop-app-code/lib/python3.5/site-packages/flask/app.py\", line 1813, in full_dispatch_request\r\n    rv = self.dispatch_request()\r\n  File \"/opt/venvs/securedrop-app-code/lib/python3.5/site-packages/flask/app.py\", line 1799, in dispatch_request\r\n    return self.view_functions[rule.endpoint](**req.view_args)\r\n  File \"/Users/redshiftzero/Documents/Github/securedrop-1.2.0-rc1/securedrop/securedrop/journalist_app/api.py\", line 48, in decorated_function\r\n    return f(*args, **kwargs)\r\n  File \"/Users/redshiftzero/Documents/Github/securedrop-1.2.0-rc1/securedrop/securedrop/journalist_app/api.py\", line 303, in get_all_submissions\r\n    submission in submissions]}), 200\r\n  File \"/Users/redshiftzero/Documents/Github/securedrop-1.2.0-rc1/securedrop/securedrop/journalist_app/api.py\", line 303, in <listcomp>\r\n    submission in submissions]}), 200\r\n  File \"/Users/redshiftzero/Documents/Github/securedrop-1.2.0-rc1/securedrop/securedrop/models.py\", line 218, in to_json\r\n    source_uuid=self.source.uuid),\r\nAttributeError: 'NoneType' object has no attribute 'uuid'\r\n```\r\n\r\n## Comments\r\n\r\nBit of a weird STR, but the submissions endpoint producing a 500 is unfortunate.", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/5315/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/5315/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/5265", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/5265/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/5265/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/5265/events", "html_url": "https://github.com/freedomofpress/securedrop/issues/5265", "id": 617894763, "node_id": "MDU6SXNzdWU2MTc4OTQ3NjM=", "number": 5265, "title": "OSSEC test alert does not send, gpg \"Permission denied\" error in procmail log", "user": {"login": "eloquence", "id": 213636, "node_id": "MDQ6VXNlcjIxMzYzNg==", "avatar_url": "https://avatars.githubusercontent.com/u/213636?v=4", "gravatar_id": "", "url": "https://api.github.com/users/eloquence", "html_url": "https://github.com/eloquence", "followers_url": "https://api.github.com/users/eloquence/followers", "following_url": "https://api.github.com/users/eloquence/following{/other_user}", "gists_url": "https://api.github.com/users/eloquence/gists{/gist_id}", "starred_url": "https://api.github.com/users/eloquence/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/eloquence/subscriptions", "organizations_url": "https://api.github.com/users/eloquence/orgs", "repos_url": "https://api.github.com/users/eloquence/repos", "events_url": "https://api.github.com/users/eloquence/events{/privacy}", "received_events_url": "https://api.github.com/users/eloquence/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}, {"id": 1106060106, "node_id": "MDU6TGFiZWwxMTA2MDYwMTA2", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/needs/reproducing", "name": "needs/reproducing", "color": "3dce6b", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": {"login": "rocodes", "id": 22777700, "node_id": "MDQ6VXNlcjIyNzc3NzAw", "avatar_url": "https://avatars.githubusercontent.com/u/22777700?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rocodes", "html_url": "https://github.com/rocodes", "followers_url": "https://api.github.com/users/rocodes/followers", "following_url": "https://api.github.com/users/rocodes/following{/other_user}", "gists_url": "https://api.github.com/users/rocodes/gists{/gist_id}", "starred_url": "https://api.github.com/users/rocodes/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rocodes/subscriptions", "organizations_url": "https://api.github.com/users/rocodes/orgs", "repos_url": "https://api.github.com/users/rocodes/repos", "events_url": "https://api.github.com/users/rocodes/events{/privacy}", "received_events_url": "https://api.github.com/users/rocodes/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "rocodes", "id": 22777700, "node_id": "MDQ6VXNlcjIyNzc3NzAw", "avatar_url": "https://avatars.githubusercontent.com/u/22777700?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rocodes", "html_url": "https://github.com/rocodes", "followers_url": "https://api.github.com/users/rocodes/followers", "following_url": "https://api.github.com/users/rocodes/following{/other_user}", "gists_url": "https://api.github.com/users/rocodes/gists{/gist_id}", "starred_url": "https://api.github.com/users/rocodes/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rocodes/subscriptions", "organizations_url": "https://api.github.com/users/rocodes/orgs", "repos_url": "https://api.github.com/users/rocodes/repos", "events_url": "https://api.github.com/users/rocodes/events{/privacy}", "received_events_url": "https://api.github.com/users/rocodes/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 8, "created_at": "2020-05-14T03:24:26Z", "updated_at": "2020-12-23T19:05:22Z", "closed_at": "2020-12-23T19:05:22Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "Environment: long-running production instance just updated to 1.3.0 (not manually rebooted yet)\r\n\r\nI see OSSEC alerts flowing, but sending a test alert via the Journalist Interface (\"Instance Config\" section) does not work for me. I see the following error in `/var/log/procmail.log` on the monitor server:\r\n\r\n```\r\nprocmail: Assigning \"LASTFOLDER=/var/ossec/send_encrypted_alarm.sh ossec\"\r\nprocmail: Notified comsat: \"ossec@:/var/ossec/send_encrypted_alarm.sh ossec\"\r\nFrom ossec@freedom.press  Wed May 13 19:34:21 2020\r\n Subject: OSSEC Notification - mon - Alert level 7\r\n  Folder: /var/ossec/send_encrypted_alarm.sh ossec                          817\r\nprocmail: Executing \"/var/ossec/send_encrypted_alarm.sh,ossec\"\r\ngpg: gpg: NOTE: trustdb not writable\r\nNOTE: trustdb not writable\r\ngpg: can't create `/var/ossec/.gnupg/random_seed': Permission denied\r\ngpg: NOTE: trustdb not writable\r\n```\r\n\r\nNote: I don't know if this is a recent regression or a longstanding issue with my instance. ", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/5265/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/5265/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/5254", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/5254/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/5254/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/5254/events", "html_url": "https://github.com/freedomofpress/securedrop/issues/5254", "id": 617046988, "node_id": "MDU6SXNzdWU2MTcwNDY5ODg=", "number": 5254, "title": "Graphical updater fails repeatedly with \"Administrator password incorrect\"", "user": {"login": "eloquence", "id": 213636, "node_id": "MDQ6VXNlcjIxMzYzNg==", "avatar_url": "https://avatars.githubusercontent.com/u/213636?v=4", "gravatar_id": "", "url": "https://api.github.com/users/eloquence", "html_url": "https://github.com/eloquence", "followers_url": "https://api.github.com/users/eloquence/followers", "following_url": "https://api.github.com/users/eloquence/following{/other_user}", "gists_url": "https://api.github.com/users/eloquence/gists{/gist_id}", "starred_url": "https://api.github.com/users/eloquence/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/eloquence/subscriptions", "organizations_url": "https://api.github.com/users/eloquence/orgs", "repos_url": "https://api.github.com/users/eloquence/repos", "events_url": "https://api.github.com/users/eloquence/events{/privacy}", "received_events_url": "https://api.github.com/users/eloquence/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}, {"id": 385585080, "node_id": "MDU6TGFiZWwzODU1ODUwODA=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/QA:%20Release", "name": "QA: Release", "color": "fbca04", "default": false, "description": null}, {"id": 750666477, "node_id": "MDU6TGFiZWw3NTA2NjY0Nzc=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/release%20blocker", "name": "release blocker", "color": "000000", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/freedomofpress/securedrop/milestones/59", "html_url": "https://github.com/freedomofpress/securedrop/milestone/59", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/milestones/59/labels", "id": 4861473, "node_id": "MDk6TWlsZXN0b25lNDg2MTQ3Mw==", "number": 59, "title": "1.3.0 ", "description": "RM: @zenmonkeykstop, deputy RM: @creviera, LM: @kushaldas, deputy LM: @rmol", "creator": {"login": "redshiftzero", "id": 7832803, "node_id": "MDQ6VXNlcjc4MzI4MDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7832803?v=4", "gravatar_id": "", "url": "https://api.github.com/users/redshiftzero", "html_url": "https://github.com/redshiftzero", "followers_url": "https://api.github.com/users/redshiftzero/followers", "following_url": "https://api.github.com/users/redshiftzero/following{/other_user}", "gists_url": "https://api.github.com/users/redshiftzero/gists{/gist_id}", "starred_url": "https://api.github.com/users/redshiftzero/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/redshiftzero/subscriptions", "organizations_url": "https://api.github.com/users/redshiftzero/orgs", "repos_url": "https://api.github.com/users/redshiftzero/repos", "events_url": "https://api.github.com/users/redshiftzero/events{/privacy}", "received_events_url": "https://api.github.com/users/redshiftzero/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 18, "state": "closed", "created_at": "2019-11-19T22:22:03Z", "updated_at": "2020-11-13T01:07:42Z", "due_on": "2020-05-12T07:00:00Z", "closed_at": "2020-06-03T17:06:16Z"}, "comments": 0, "created_at": "2020-05-13T00:16:49Z", "updated_at": "2020-05-13T15:15:58Z", "closed_at": "2020-05-13T15:15:58Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "During release QA for SecureDrop 1.3.0, we discovered a regression in the graphical SecureDrop updater for Tails workstations. Regardless of the user input, the updater fails with \"Administrator password incorrect\".\r\n\r\nThis appears to be the result of a change in Ansible output introduced as part of #5199. It does not appear to be related to #5169.", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/5254/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/5254/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/5233", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/5233/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/5233/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/5233/events", "html_url": "https://github.com/freedomofpress/securedrop/issues/5233", "id": 613404471, "node_id": "MDU6SXNzdWU2MTM0MDQ0NzE=", "number": 5233, "title": "Deleting large numbers of sources can fail such that is it thereafter impossible to delete the sources", "user": {"login": "rmol", "id": 47430598, "node_id": "MDQ6VXNlcjQ3NDMwNTk4", "avatar_url": "https://avatars.githubusercontent.com/u/47430598?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rmol", "html_url": "https://github.com/rmol", "followers_url": "https://api.github.com/users/rmol/followers", "following_url": "https://api.github.com/users/rmol/following{/other_user}", "gists_url": "https://api.github.com/users/rmol/gists{/gist_id}", "starred_url": "https://api.github.com/users/rmol/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rmol/subscriptions", "organizations_url": "https://api.github.com/users/rmol/orgs", "repos_url": "https://api.github.com/users/rmol/repos", "events_url": "https://api.github.com/users/rmol/events{/privacy}", "received_events_url": "https://api.github.com/users/rmol/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}, {"id": 385585080, "node_id": "MDU6TGFiZWwzODU1ODUwODA=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/QA:%20Release", "name": "QA: Release", "color": "fbca04", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "rmol", "id": 47430598, "node_id": "MDQ6VXNlcjQ3NDMwNTk4", "avatar_url": "https://avatars.githubusercontent.com/u/47430598?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rmol", "html_url": "https://github.com/rmol", "followers_url": "https://api.github.com/users/rmol/followers", "following_url": "https://api.github.com/users/rmol/following{/other_user}", "gists_url": "https://api.github.com/users/rmol/gists{/gist_id}", "starred_url": "https://api.github.com/users/rmol/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rmol/subscriptions", "organizations_url": "https://api.github.com/users/rmol/orgs", "repos_url": "https://api.github.com/users/rmol/repos", "events_url": "https://api.github.com/users/rmol/events{/privacy}", "received_events_url": "https://api.github.com/users/rmol/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "rmol", "id": 47430598, "node_id": "MDQ6VXNlcjQ3NDMwNTk4", "avatar_url": "https://avatars.githubusercontent.com/u/47430598?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rmol", "html_url": "https://github.com/rmol", "followers_url": "https://api.github.com/users/rmol/followers", "following_url": "https://api.github.com/users/rmol/following{/other_user}", "gists_url": "https://api.github.com/users/rmol/gists{/gist_id}", "starred_url": "https://api.github.com/users/rmol/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rmol/subscriptions", "organizations_url": "https://api.github.com/users/rmol/orgs", "repos_url": "https://api.github.com/users/rmol/repos", "events_url": "https://api.github.com/users/rmol/events{/privacy}", "received_events_url": "https://api.github.com/users/rmol/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/freedomofpress/securedrop/milestones/62", "html_url": "https://github.com/freedomofpress/securedrop/milestone/62", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/milestones/62/labels", "id": 5241642, "node_id": "MDk6TWlsZXN0b25lNTI0MTY0Mg==", "number": 62, "title": "1.4.0", "description": "Release Manager: @conorsch, Deputy RM: @creviera, Comms: @eloquence - i18n: N/A, no string changes", "creator": {"login": "redshiftzero", "id": 7832803, "node_id": "MDQ6VXNlcjc4MzI4MDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7832803?v=4", "gravatar_id": "", "url": "https://api.github.com/users/redshiftzero", "html_url": "https://github.com/redshiftzero", "followers_url": "https://api.github.com/users/redshiftzero/followers", "following_url": "https://api.github.com/users/redshiftzero/following{/other_user}", "gists_url": "https://api.github.com/users/redshiftzero/gists{/gist_id}", "starred_url": "https://api.github.com/users/redshiftzero/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/redshiftzero/subscriptions", "organizations_url": "https://api.github.com/users/redshiftzero/orgs", "repos_url": "https://api.github.com/users/redshiftzero/repos", "events_url": "https://api.github.com/users/redshiftzero/events{/privacy}", "received_events_url": "https://api.github.com/users/redshiftzero/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 5, "state": "closed", "created_at": "2020-03-26T20:12:14Z", "updated_at": "2020-06-23T15:58:42Z", "due_on": "2020-06-17T07:00:00Z", "closed_at": "2020-06-23T15:58:42Z"}, "comments": 3, "created_at": "2020-05-06T15:20:55Z", "updated_at": "2020-05-26T17:09:59Z", "closed_at": "2020-05-26T17:09:59Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "## Description\r\n\r\nIn the journalist interface, if you select a large number of sources and delete them, the operation can take longer than the Apache timeout. Some sources' store directories will have been moved to the shredder before the failure. Thereafter, if you try to delete them, a `ValueError` will be thrown at line 246 of `store.py`, in `move_to_shredder`. The unhandled exception prevents the deletion of the source record, and this is how we get the zombie apocalypse.\r\n\r\n## Steps to Reproduce\r\n\r\nIn an environment using Apache (staging, prod VMs, QA hardware):\r\n\r\n- Add 500 sources with `qa_loader.py --source-count 500`.\r\n- Log in as a journalist.\r\n- Select all sources and click delete.\r\n\r\n## Expected Behavior\r\n\r\nThat the sources would be deleted without error.\r\n\r\n## Actual Behavior\r\n\r\nYou get a gateway timeout. Navigating back to the source list and trying again results in an internal server error, with a stacktrace in `/var/log/apache2/journalist-error.log`.\r\n\r\n## Comments\r\n\r\nThe fix might be as simple as checking for the existence of the source's store directory in `journalist_app.utils.delete_collection` and only calling `move_to_shredder` if it still exists. While there, the key pair deletion should be checked as well, so that if it's already gone, the source database record is still deleted.", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/5233/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/5233/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/5213", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/5213/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/5213/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/5213/events", "html_url": "https://github.com/freedomofpress/securedrop/issues/5213", "id": 609244355, "node_id": "MDU6SXNzdWU2MDkyNDQzNTU=", "number": 5213, "title": "securedrop-ossec-{client, server} not upgrading via cron-apt due to dependencies not being in security channel", "user": {"login": "emkll", "id": 15223328, "node_id": "MDQ6VXNlcjE1MjIzMzI4", "avatar_url": "https://avatars.githubusercontent.com/u/15223328?v=4", "gravatar_id": "", "url": "https://api.github.com/users/emkll", "html_url": "https://github.com/emkll", "followers_url": "https://api.github.com/users/emkll/followers", "following_url": "https://api.github.com/users/emkll/following{/other_user}", "gists_url": "https://api.github.com/users/emkll/gists{/gist_id}", "starred_url": "https://api.github.com/users/emkll/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/emkll/subscriptions", "organizations_url": "https://api.github.com/users/emkll/orgs", "repos_url": "https://api.github.com/users/emkll/repos", "events_url": "https://api.github.com/users/emkll/events{/privacy}", "received_events_url": "https://api.github.com/users/emkll/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}, {"id": 385585080, "node_id": "MDU6TGFiZWwzODU1ODUwODA=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/QA:%20Release", "name": "QA: Release", "color": "fbca04", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 12, "created_at": "2020-04-29T17:53:26Z", "updated_at": "2020-06-15T18:10:04Z", "closed_at": "2020-06-15T18:10:04Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "## Description\r\n\r\nChanges introduced in the packaging logic of https://github.com/freedomofpress/securedrop/pull/5196 require two new dependencies for these packages to support ossec 3.6.0 and new pcre-based matching . This was not caught during review,  and can only be reproduced in production scenarios: upgrade testing does a full apt-upgrade and does not use cron-apt (see https://github.com/freedomofpress/securedrop/issues/4659#issuecomment-519147471)\r\n\r\n## Steps to Reproduce\r\n\r\n- Install 1.2.0\r\n- Update to 1.3.0-rc1\r\n- Observe securedrop-ossec-client and securedrop-ossec server held back due to dependencies not existing in the `security` channel\r\n\r\n## Expected Behavior\r\n\r\nsecuredrop-ossec-client and securedrop-ossec-server packages should be updated\r\n\r\n## Actual Behavior\r\nThe securedrop-ossec-client and securedrop-ossec-server packages are held back\r\n## Comments\r\n\r\n- For libevent, we can consider/ try using https://packages.ubuntu.com/xenial/libevent-2.0-5 instead of the version specified\r\n- For libpcre, I can't find a library in xenial that is also in the security list\r\n", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/5213/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/5213/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/5198", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/5198/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/5198/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/5198/events", "html_url": "https://github.com/freedomofpress/securedrop/issues/5198", "id": 601496609, "node_id": "MDU6SXNzdWU2MDE0OTY2MDk=", "number": 5198, "title": "`NoResultFound` error from sqlalchemy on `make dev` run", "user": {"login": "eloquence", "id": 213636, "node_id": "MDQ6VXNlcjIxMzYzNg==", "avatar_url": "https://avatars.githubusercontent.com/u/213636?v=4", "gravatar_id": "", "url": "https://api.github.com/users/eloquence", "html_url": "https://github.com/eloquence", "followers_url": "https://api.github.com/users/eloquence/followers", "following_url": "https://api.github.com/users/eloquence/following{/other_user}", "gists_url": "https://api.github.com/users/eloquence/gists{/gist_id}", "starred_url": "https://api.github.com/users/eloquence/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/eloquence/subscriptions", "organizations_url": "https://api.github.com/users/eloquence/orgs", "repos_url": "https://api.github.com/users/eloquence/repos", "events_url": "https://api.github.com/users/eloquence/events{/privacy}", "received_events_url": "https://api.github.com/users/eloquence/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}, {"id": 616447641, "node_id": "MDU6TGFiZWw2MTY0NDc2NDE=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/development%20env", "name": "development env", "color": "bfd4f2", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-04-16T21:28:30Z", "updated_at": "2020-04-16T21:31:40Z", "closed_at": "2020-04-16T21:31:40Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "Currently seeing the following on all `make dev` runs in `develop` (it starts fine regardless):\r\n\r\n```\r\n21:26:22 default: store.queued_add_checksum_for_file(<class 'models.Submission'>, 13, '/var/lib/securedrop/store/W7XCM6C4AFQDM7WJ2OQQ6AEULT3PFIMHZZDY6TCHCWKLSIOZGVCHLKJXMW42AHSWTJ3NUKRUHIS4TB4QN23OYVJMIKB4D2BFEF4R4AY=/1-tracheal_terminal-msg.gpg', 'sqlite:////var/lib/securedrop/db.sqlite') (a97d559b-13c2-4fa7-9953-c1abdbe1285f)\r\n21:26:22 sqlalchemy.orm.exc.NoResultFound: No row was found for one()\r\nTraceback (most recent call last):\r\n  File \"/opt/venvs/securedrop-app-code/lib/python3.5/site-packages/rq/worker.py\", line 822, in perform_job\r\n    rv = job.perform()\r\n  File \"/opt/venvs/securedrop-app-code/lib/python3.5/site-packages/rq/job.py\", line 605, in perform\r\n    self._result = self._execute()\r\n  File \"/opt/venvs/securedrop-app-code/lib/python3.5/site-packages/rq/job.py\", line 611, in _execute\r\n    return self.func(*self.args, **self.kwargs)\r\n  File \"./store.py\", line 375, in queued_add_checksum_for_file\r\n    db_obj = session.query(db_model).filter_by(id=model_id).one()\r\n  File \"/opt/venvs/securedrop-app-code/lib/python3.5/site-packages/sqlalchemy/orm/query.py\", line 3282, in one\r\n    raise orm_exc.NoResultFound(\"No row was found for one()\")\r\nsqlalchemy.orm.exc.NoResultFound: No row was found for one()\r\nTraceback (most recent call last):\r\n  File \"/opt/venvs/securedrop-app-code/lib/python3.5/site-packages/rq/worker.py\", line 822, in perform_job\r\n    rv = job.perform()\r\n  File \"/opt/venvs/securedrop-app-code/lib/python3.5/site-packages/rq/job.py\", line 605, in perform\r\n    self._result = self._execute()\r\n  File \"/opt/venvs/securedrop-app-code/lib/python3.5/site-packages/rq/job.py\", line 611, in _execute\r\n    return self.func(*self.args, **self.kwargs)\r\n  File \"./store.py\", line 375, in queued_add_checksum_for_file\r\n    db_obj = session.query(db_model).filter_by(id=model_id).one()\r\n  File \"/opt/venvs/securedrop-app-code/lib/python3.5/site-packages/sqlalchemy/orm/query.py\", line 3282, in one\r\n    raise orm_exc.NoResultFound(\"No row was found for one()\")\r\nsqlalchemy.orm.exc.NoResultFound: No row was found for one()\r\n2020-04-16 21:26:23,132 INFO Running every 60 seconds.\r\n```", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/5198/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/5198/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/5176", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/5176/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/5176/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/5176/events", "html_url": "https://github.com/freedomofpress/securedrop/issues/5176", "id": 591427392, "node_id": "MDU6SXNzdWU1OTE0MjczOTI=", "number": 5176, "title": "deleted journalist causes 500 on GET /replies API endpoint ", "user": {"login": "redshiftzero", "id": 7832803, "node_id": "MDQ6VXNlcjc4MzI4MDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7832803?v=4", "gravatar_id": "", "url": "https://api.github.com/users/redshiftzero", "html_url": "https://github.com/redshiftzero", "followers_url": "https://api.github.com/users/redshiftzero/followers", "following_url": "https://api.github.com/users/redshiftzero/following{/other_user}", "gists_url": "https://api.github.com/users/redshiftzero/gists{/gist_id}", "starred_url": "https://api.github.com/users/redshiftzero/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/redshiftzero/subscriptions", "organizations_url": "https://api.github.com/users/redshiftzero/orgs", "repos_url": "https://api.github.com/users/redshiftzero/repos", "events_url": "https://api.github.com/users/redshiftzero/events{/privacy}", "received_events_url": "https://api.github.com/users/redshiftzero/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}, {"id": 157793311, "node_id": "MDU6TGFiZWwxNTc3OTMzMTE=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/priority/high", "name": "priority/high", "color": "e64ef4", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-03-31T21:06:03Z", "updated_at": "2020-04-01T20:47:14Z", "closed_at": "2020-04-01T20:47:14Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "## Description\r\n\r\nDeleted journalist causes GET /replies endpoint to 500 if there are any replies from that deleted journalist. \r\n\r\n## Steps to Reproduce\r\n\r\n0. Submit a document or message as a source.\r\n1. Reply to the source from journalist account A.\r\n2. Delete the account of journalist account A (from another admin account). \r\n3. `GET /api/v1/replies`\r\n\r\n## Expected Behavior\r\n\r\n200 OK \r\n\r\n## Actual Behavior\r\n\r\n```\r\n172.17.0.1 - - [31/Mar/2020 20:57:10] \"GET /api/v1/replies HTTP/1.1\" 500 -\r\nTraceback (most recent call last):\r\n  File \"/opt/venvs/securedrop-app-code/lib/python3.5/site-packages/flask/app.py\", line 2309, in __call__\r\n    return self.wsgi_app(environ, start_response)\r\n  File \"/opt/venvs/securedrop-app-code/lib/python3.5/site-packages/flask/app.py\", line 2295, in wsgi_app\r\n    response = self.handle_exception(e)\r\n  File \"/opt/venvs/securedrop-app-code/lib/python3.5/site-packages/flask/app.py\", line 1741, in handle_exception\r\n    reraise(exc_type, exc_value, tb)\r\n  File \"/opt/venvs/securedrop-app-code/lib/python3.5/site-packages/flask/_compat.py\", line 35, in reraise\r\n    raise value\r\n  File \"/opt/venvs/securedrop-app-code/lib/python3.5/site-packages/flask/app.py\", line 2292, in wsgi_app\r\n    response = self.full_dispatch_request()\r\n  File \"/opt/venvs/securedrop-app-code/lib/python3.5/site-packages/flask/app.py\", line 1815, in full_dispatch_request\r\n    rv = self.handle_user_exception(e)\r\n  File \"/opt/venvs/securedrop-app-code/lib/python3.5/site-packages/flask/app.py\", line 1718, in handle_user_exception\r\n    reraise(exc_type, exc_value, tb)\r\n  File \"/opt/venvs/securedrop-app-code/lib/python3.5/site-packages/flask/_compat.py\", line 35, in reraise\r\n    raise value\r\n  File \"/opt/venvs/securedrop-app-code/lib/python3.5/site-packages/flask/app.py\", line 1813, in full_dispatch_request\r\n    rv = self.dispatch_request()\r\n  File \"/opt/venvs/securedrop-app-code/lib/python3.5/site-packages/flask/app.py\", line 1799, in dispatch_request\r\n    return self.view_functions[rule.endpoint](**req.view_args)\r\n  File \"/Users/redshiftzero/Documents/Github/securedrop-1.2.0-rc2/securedrop/securedrop/journalist_app/api.py\", line 48, in decorated_function\r\n    return f(*args, **kwargs)\r\n  File \"/Users/redshiftzero/Documents/Github/securedrop-1.2.0-rc2/securedrop/securedrop/journalist_app/api.py\", line 310, in get_all_replies\r\n    {'replies': [reply.to_json() for reply in replies]}), 200\r\n  File \"/Users/redshiftzero/Documents/Github/securedrop-1.2.0-rc2/securedrop/securedrop/journalist_app/api.py\", line 310, in <listcomp>\r\n    {'replies': [reply.to_json() for reply in replies]}), 200\r\n  File \"/Users/redshiftzero/Documents/Github/securedrop-1.2.0-rc2/securedrop/securedrop/models.py\", line 289, in to_json\r\n    'journalist_username': self.journalist.username,\r\nAttributeError: 'NoneType' object has no attribute 'username'\r\n```\r\n\r\n## Comments\r\n\r\nWe should handle where the `journalist` is `None` [here](https://github.com/freedomofpress/securedrop/blob/develop/securedrop/models.py#L289-L292)\r\n\r\nIt would be wise to also add test data to `create-dev-data.py` for the deleted journalist scenario (since that is used for development of securedrop-client). ", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/5176/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/5176/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/5155", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/5155/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/5155/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/5155/events", "html_url": "https://github.com/freedomofpress/securedrop/issues/5155", "id": 580370118, "node_id": "MDU6SXNzdWU1ODAzNzAxMTg=", "number": 5155, "title": "`securedrop-admin setup` fails on Tails 4.4 (ImportError: cannot import name 'Feature')", "user": {"login": "eloquence", "id": 213636, "node_id": "MDQ6VXNlcjIxMzYzNg==", "avatar_url": "https://avatars.githubusercontent.com/u/213636?v=4", "gravatar_id": "", "url": "https://api.github.com/users/eloquence", "html_url": "https://github.com/eloquence", "followers_url": "https://api.github.com/users/eloquence/followers", "following_url": "https://api.github.com/users/eloquence/following{/other_user}", "gists_url": "https://api.github.com/users/eloquence/gists{/gist_id}", "starred_url": "https://api.github.com/users/eloquence/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/eloquence/subscriptions", "organizations_url": "https://api.github.com/users/eloquence/orgs", "repos_url": "https://api.github.com/users/eloquence/repos", "events_url": "https://api.github.com/users/eloquence/events{/privacy}", "received_events_url": "https://api.github.com/users/eloquence/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}, {"id": 157793311, "node_id": "MDU6TGFiZWwxNTc3OTMzMTE=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/priority/high", "name": "priority/high", "color": "e64ef4", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/freedomofpress/securedrop/milestones/61", "html_url": "https://github.com/freedomofpress/securedrop/milestone/61", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/milestones/61/labels", "id": 5199071, "node_id": "MDk6TWlsZXN0b25lNTE5OTA3MQ==", "number": 61, "title": "1.2.2", "description": "", "creator": {"login": "redshiftzero", "id": 7832803, "node_id": "MDQ6VXNlcjc4MzI4MDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7832803?v=4", "gravatar_id": "", "url": "https://api.github.com/users/redshiftzero", "html_url": "https://github.com/redshiftzero", "followers_url": "https://api.github.com/users/redshiftzero/followers", "following_url": "https://api.github.com/users/redshiftzero/following{/other_user}", "gists_url": "https://api.github.com/users/redshiftzero/gists{/gist_id}", "starred_url": "https://api.github.com/users/redshiftzero/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/redshiftzero/subscriptions", "organizations_url": "https://api.github.com/users/redshiftzero/orgs", "repos_url": "https://api.github.com/users/redshiftzero/repos", "events_url": "https://api.github.com/users/redshiftzero/events{/privacy}", "received_events_url": "https://api.github.com/users/redshiftzero/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 6, "state": "closed", "created_at": "2020-03-13T14:45:27Z", "updated_at": "2020-03-24T16:33:36Z", "due_on": null, "closed_at": "2020-03-24T16:33:36Z"}, "comments": 2, "created_at": "2020-03-13T04:52:53Z", "updated_at": "2020-03-13T18:37:22Z", "closed_at": "2020-03-13T18:37:22Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "## Description\r\n\r\nAttempting to run `./securedrop-admin setup` fails in Tails 4.4\r\n\r\n## Steps to Reproduce\r\n\r\n(Thanks to @conorsch for the write-up)\r\n1. On an Admin Workstation running Tails 4.4, `cd ~/Persistent`\r\n2. If you already have \"securedrop\" repo, move it aside, e.g. `mv securedrop{,.bak}`\r\n3. Clone repo: `git clone https://github.com/freedomofpress/securedrop`\r\n4. Hop into repo and check those tags: `cd securedrop && git tag -v 1.2.1 && git checkout 1.2.1`\r\n5. Run setup (include -v flag for more verbose output): `./securedrop-admin setup -v`\r\n\r\n## Expected Behavior\r\n\r\nSetup completes successfully.\r\n\r\n## Actual Behavior\r\n\r\nSetup fails as follows:\r\n\r\n```\r\n[INFO] Examining package changes\r\n[INFO] New packages manually installed: {'python3-virtualenv', 'python3-pip', 'libffi-dev', 'ccontrol', 'libpython3-dev', 'libssl-dev', 'virtualenv'}\r\nINFO: Setting up virtualenv\r\nDEBUG: b\"Already using interpreter /usr/bin/python3\\nUsing base prefix '/usr'\\nNew python executable in /home/amnesia/Persistent/securedrop/admin/.venv3/bin/python3\\nAlso creating executable in /home/amnesia/Persistent/securedrop/admin/.venv3/bin/python\\nInstalling setuptools, pkg_resources, pip, wheel...done.\\n\"\r\nINFO: Checking Python dependencies for securedrop-admin\r\nDEBUG: b'Collecting ansible==2.7.13\\n  Downloading ansible-2.7.13.tar.gz (11.9 MB)\\nCollecting asn1crypto==0.24.0\\n  Downloading asn1crypto-0.24.0-py2.py3-none-any.whl (101 kB)\\nCollecting bcrypt==3.1.4\\n  Downloading bcrypt-3.1.4.tar.gz (42 kB)\\nCollecting cffi==1.11.4\\n  Downloading cffi-1.11.4.tar.gz (436 kB)\\nCollecting cryptography==2.7\\n  Downloading cryptography-2.7-cp34-abi3-manylinux1_x86_64.whl (2.3 MB)\\nCollecting jinja2==2.10.1\\n  Downloading Jinja2-2.10.1-py2.py3-none-any.whl (124 kB)\\nCollecting markupsafe==1.0\\n  Downloading MarkupSafe-1.0.tar.gz (14 kB)\\n    ERROR: Command errored out with exit status 1:\\n     command: /home/amnesia/Persistent/securedrop/admin/.venv3/bin/python3 -c \\'import sys, setuptools, tokenize; sys.argv[0] = \\'\"\\'\"\\'/tmp/pip-install-p3i4gd76/markupsafe/setup.py\\'\"\\'\"\\'; __file__=\\'\"\\'\"\\'/tmp/pip-install-p3i4gd76/markupsafe/setup.py\\'\"\\'\"\\';f=getattr(tokenize, \\'\"\\'\"\\'open\\'\"\\'\"\\', open)(__file__);code=f.read().replace(\\'\"\\'\"\\'\\\\r\\\\n\\'\"\\'\"\\', \\'\"\\'\"\\'\\\\n\\'\"\\'\"\\');f.close();exec(compile(code, __file__, \\'\"\\'\"\\'exec\\'\"\\'\"\\'))\\' egg_info --egg-base /tmp/pip-install-p3i4gd76/markupsafe/pip-egg-info\\n         cwd: /tmp/pip-install-p3i4gd76/markupsafe/\\n    Complete output (5 lines):\\n    Traceback (most recent call last):\\n      File \"<string>\", line 1, in <module>\\n      File \"/tmp/pip-install-p3i4gd76/markupsafe/setup.py\", line 6, in <module>\\n        from setuptools import setup, Extension, Feature\\n    ImportError: cannot import name \\'Feature\\' from \\'setuptools\\' (/home/amnesia/Persistent/securedrop/admin/.venv3/lib/python3.7/site-packages/setuptools/__init__.py)\\n    ----------------------------------------\\nERROR: Command errored out with exit status 1: python setup.py egg_info Check the logs for full command output.\\n'\r\nERROR: Failed to install pip dependencies. Check network connection and try again.\r\n```", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/5155/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/5155/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/5109", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/5109/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/5109/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/5109/events", "html_url": "https://github.com/freedomofpress/securedrop/issues/5109", "id": 556538054, "node_id": "MDU6SXNzdWU1NTY1MzgwNTQ=", "number": 5109, "title": "versions of pip, setuptools, wheel used by dh_virtualenv during securedrop-app-code build are not pinned.", "user": {"login": "zenmonkeykstop", "id": 2782952, "node_id": "MDQ6VXNlcjI3ODI5NTI=", "avatar_url": "https://avatars.githubusercontent.com/u/2782952?v=4", "gravatar_id": "", "url": "https://api.github.com/users/zenmonkeykstop", "html_url": "https://github.com/zenmonkeykstop", "followers_url": "https://api.github.com/users/zenmonkeykstop/followers", "following_url": "https://api.github.com/users/zenmonkeykstop/following{/other_user}", "gists_url": "https://api.github.com/users/zenmonkeykstop/gists{/gist_id}", "starred_url": "https://api.github.com/users/zenmonkeykstop/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/zenmonkeykstop/subscriptions", "organizations_url": "https://api.github.com/users/zenmonkeykstop/orgs", "repos_url": "https://api.github.com/users/zenmonkeykstop/repos", "events_url": "https://api.github.com/users/zenmonkeykstop/events{/privacy}", "received_events_url": "https://api.github.com/users/zenmonkeykstop/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}, {"id": 157793311, "node_id": "MDU6TGFiZWwxNTc3OTMzMTE=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/priority/high", "name": "priority/high", "color": "e64ef4", "default": false, "description": ""}, {"id": 616447722, "node_id": "MDU6TGFiZWw2MTY0NDc3MjI=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/build%20process", "name": "build process", "color": "bfd4f2", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 10, "created_at": "2020-01-28T23:03:41Z", "updated_at": "2020-09-28T16:50:36Z", "closed_at": "2020-09-28T16:50:36Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "## Description\r\n\r\nWhile investigating #5108, it was noticed that `setuptools` and associated packages are installed by `dh_virtualenv` using the following command:\r\n\r\n```\r\n Running command '/tmp/securedrop-app-code_1.3.0~rc1+xenial_amd64/debian/securedrop-app-code/opt/venvs/securedrop-app-code/bin/python' '/tmp/securedrop-app-code_1.3.0~rc1+xenial_amd64/debian/securedrop-app-code/opt/venvs/securedrop-app-code/lib/python3.5/site-packages/pip' install --ignore-installed --no-user --prefix /tmp/pip-build-env-tzw3qhas/overlay --no-warn-script-location -v --no-binary :all: --only-binary :none: -i https://pypi.org/simple -- 'setuptools>=18.5' wheel 'cffi>=1.8,!=1.11.3; python_implementation != '\\\"'\\\"'PyPy'\\\"'\\\"''\r\n```\r\nPackage versions are not pinned and hashes are not required. (`wheel` in particular is currently at version 0.34.1, which has a downstream issue that's breaking `make build-debs`.)\r\n\r\n## Steps to Reproduce\r\n\r\n- run `make build-debs` against current develop\r\n\r\n## Expected Behavior\r\n- build process uses pinned and reviewed packages\r\n\r\n## Actual Behavior\r\n- build process uses latest versions without checking hashes\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/5109/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/5109/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/5101", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/5101/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/5101/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/5101/events", "html_url": "https://github.com/freedomofpress/securedrop/issues/5101", "id": 553253181, "node_id": "MDU6SXNzdWU1NTMyNTMxODE=", "number": 5101, "title": "Codename hint link visible in flash message but codename hint not displayed", "user": {"login": "DrGFreeman", "id": 22901938, "node_id": "MDQ6VXNlcjIyOTAxOTM4", "avatar_url": "https://avatars.githubusercontent.com/u/22901938?v=4", "gravatar_id": "", "url": "https://api.github.com/users/DrGFreeman", "html_url": "https://github.com/DrGFreeman", "followers_url": "https://api.github.com/users/DrGFreeman/followers", "following_url": "https://api.github.com/users/DrGFreeman/following{/other_user}", "gists_url": "https://api.github.com/users/DrGFreeman/gists{/gist_id}", "starred_url": "https://api.github.com/users/DrGFreeman/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/DrGFreeman/subscriptions", "organizations_url": "https://api.github.com/users/DrGFreeman/orgs", "repos_url": "https://api.github.com/users/DrGFreeman/repos", "events_url": "https://api.github.com/users/DrGFreeman/events{/privacy}", "received_events_url": "https://api.github.com/users/DrGFreeman/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2020-01-22T01:27:07Z", "updated_at": "2021-10-27T06:55:46Z", "closed_at": "2021-10-27T06:55:46Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "## Description\r\n\r\nIn the Source Interface, if a source generates a codename and proceeds to `/lookup` but elects not to submit anything at this time, the next time the source logs in and submits a message or document, the flash message includes the \"Forgot your codename?\" link but the `codename-hint` element of the page is missing so the link does not work.\r\n\r\n## Steps to Reproduce\r\n\r\n1. Run `make dev`.\r\n1. Access the Source Interface and click \"GET STARTED\".\r\n1. Take note of the codename on `/generate` and click \"SUBMIT DOCUMENTS\".\r\n1. On `/lookup`, click \"LOGOUT\".\r\n1. On `/index` click \"LOG IN\".\r\n1. Enter the codename noted in 3 and click \"CONTINUE\".\r\n1. On `/lookup` enter a message and click \"SUBMIT\".\r\n\r\n## Expected Behavior\r\n\r\nThe \"Success!\" flash message for a first submission is displayed, **without the \"Forgot your codename\" link**.\r\n\r\n## Actual Behavior\r\n\r\nThe \"Success!\" flash message for a first submission is displayed, **with the \"Forgot your codename?\" link** but the `codename-hint` element of the page is missing and therefore the link does not trigger anything.\r\n\r\n![image](https://user-images.githubusercontent.com/22901938/72857503-cd420c80-3c8b-11ea-87ea-c1ed39b47e61.png)\r\n\r\n## Comments\r\n\r\nSuggestions to fix: Use the `'new_user'` session key with an `if` statement in the template to determine whether the \"Forgot your codename?\" link should be displayed.\r\n\r\nThis could be combined with the solution to #4401 which already involves some refactoring of the submission confirmation flash messages.\r\n", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/5101/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/5101/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/5052", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/5052/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/5052/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/5052/events", "html_url": "https://github.com/freedomofpress/securedrop/issues/5052", "id": 531749199, "node_id": "MDU6SXNzdWU1MzE3NDkxOTk=", "number": 5052, "title": "Purple Tor bar still showing in Tor", "user": {"login": "ninavizz", "id": 8262612, "node_id": "MDQ6VXNlcjgyNjI2MTI=", "avatar_url": "https://avatars.githubusercontent.com/u/8262612?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ninavizz", "html_url": "https://github.com/ninavizz", "followers_url": "https://api.github.com/users/ninavizz/followers", "following_url": "https://api.github.com/users/ninavizz/following{/other_user}", "gists_url": "https://api.github.com/users/ninavizz/gists{/gist_id}", "starred_url": "https://api.github.com/users/ninavizz/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ninavizz/subscriptions", "organizations_url": "https://api.github.com/users/ninavizz/orgs", "repos_url": "https://api.github.com/users/ninavizz/repos", "events_url": "https://api.github.com/users/ninavizz/events{/privacy}", "received_events_url": "https://api.github.com/users/ninavizz/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}, {"id": 1106060106, "node_id": "MDU6TGFiZWwxMTA2MDYwMTA2", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/needs/reproducing", "name": "needs/reproducing", "color": "3dce6b", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/freedomofpress/securedrop/milestones/60", "html_url": "https://github.com/freedomofpress/securedrop/milestone/60", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/milestones/60/labels", "id": 5047637, "node_id": "MDk6TWlsZXN0b25lNTA0NzYzNw==", "number": 60, "title": "1.2.1", "description": "SecureDrop 1.2.1 is a planned point release intended to deliver performance updates needed for the SecureDrop Workstation, and any high priority bugfixes or security updates available by the time of the release.\r\n\r\nRM: @rmol\r\nDeputy RM: @zenmonkeykstop", "creator": {"login": "eloquence", "id": 213636, "node_id": "MDQ6VXNlcjIxMzYzNg==", "avatar_url": "https://avatars.githubusercontent.com/u/213636?v=4", "gravatar_id": "", "url": "https://api.github.com/users/eloquence", "html_url": "https://github.com/eloquence", "followers_url": "https://api.github.com/users/eloquence/followers", "following_url": "https://api.github.com/users/eloquence/following{/other_user}", "gists_url": "https://api.github.com/users/eloquence/gists{/gist_id}", "starred_url": "https://api.github.com/users/eloquence/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/eloquence/subscriptions", "organizations_url": "https://api.github.com/users/eloquence/orgs", "repos_url": "https://api.github.com/users/eloquence/repos", "events_url": "https://api.github.com/users/eloquence/events{/privacy}", "received_events_url": "https://api.github.com/users/eloquence/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 7, "state": "closed", "created_at": "2020-01-28T00:17:40Z", "updated_at": "2020-03-13T14:46:00Z", "due_on": "2020-02-19T08:00:00Z", "closed_at": "2020-03-13T14:46:00Z"}, "comments": 14, "created_at": "2019-12-03T06:13:46Z", "updated_at": "2020-03-10T09:10:24Z", "closed_at": "2020-01-07T16:41:23Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "## Description\r\n\r\nI am being told to use Tor when I am using Tor.\r\n\r\n![image](https://user-images.githubusercontent.com/8262612/70025023-aa7b5d80-1550-11ea-952b-16521806d8e6.png)\r\n\r\n\r\n## Steps to Reproduce\r\n\r\nLookup instance using Tor, on a Mac.\r\n\r\n![image](https://user-images.githubusercontent.com/8262612/70025064-c848c280-1550-11ea-8ef3-87f4637cebd4.png)\r\n\r\n\r\n## Expected Behavior\r\n\r\nNo purple bar.\r\n\r\n## Actual Behavior\r\n\r\nPurple bar.\r\n\r\n## Comments\r\n\r\nNot sure if an issue already exists for this, but I do recall chatting w/ @rmol and @zenmonkeykstop about it.\r\n\r\n## Suggestions to fix, any other relevant information\r\n\r\nThis will really suck for sources. I'd rather not do the purple bar or any \"You are not using Tor\" kind of dictatorial intercept, if we cannot get it right. A lighter \"Hey, are you using Tor?\" y/n binary question or an interstitial, could be a better option.\r\n", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/5052/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/5052/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/5029", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/5029/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/5029/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/5029/events", "html_url": "https://github.com/freedomofpress/securedrop/issues/5029", "id": 528348217, "node_id": "MDU6SXNzdWU1MjgzNDgyMTc=", "number": 5029, "title": "Python errors in output from  ./securedrop-admin restore", "user": {"login": "zenmonkeykstop", "id": 2782952, "node_id": "MDQ6VXNlcjI3ODI5NTI=", "avatar_url": "https://avatars.githubusercontent.com/u/2782952?v=4", "gravatar_id": "", "url": "https://api.github.com/users/zenmonkeykstop", "html_url": "https://github.com/zenmonkeykstop", "followers_url": "https://api.github.com/users/zenmonkeykstop/followers", "following_url": "https://api.github.com/users/zenmonkeykstop/following{/other_user}", "gists_url": "https://api.github.com/users/zenmonkeykstop/gists{/gist_id}", "starred_url": "https://api.github.com/users/zenmonkeykstop/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/zenmonkeykstop/subscriptions", "organizations_url": "https://api.github.com/users/zenmonkeykstop/orgs", "repos_url": "https://api.github.com/users/zenmonkeykstop/repos", "events_url": "https://api.github.com/users/zenmonkeykstop/events{/privacy}", "received_events_url": "https://api.github.com/users/zenmonkeykstop/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}, {"id": 157793376, "node_id": "MDU6TGFiZWwxNTc3OTMzNzY=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/priority/low", "name": "priority/low", "color": "fef2c0", "default": false, "description": ""}, {"id": 385585080, "node_id": "MDU6TGFiZWwzODU1ODUwODA=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/QA:%20Release", "name": "QA: Release", "color": "fbca04", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2019-11-25T21:30:34Z", "updated_at": "2019-12-03T20:42:42Z", "closed_at": "2019-12-03T20:42:42Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "## Description\r\n\r\nRunning in Tails 3.16, when the `./securedrop-admin restore` command is run for the first time, the output  includes the error messages below.\r\n\r\n## Steps to Reproduce\r\n\r\n(Tails 3.16, fresh Prod VM or HW instance)\r\n- on the Admin Workstation back up the instance using `./securedrop-admin backup`\r\n- restore the instance using `./securedrop-admin restore <backupFileName>`\r\n\r\n## Expected Behavior\r\nCommand output includes no errors.\r\n\r\n## Actual Behavior\r\nCommand output looks like:\r\n<details><summary>click to open</summary>\r\n\r\n```\r\namnesia@amnesia:~/Persistent/securedrop$ ./securedrop-admin restore sd-backup-2019-11-25--20-14-51.tar.gz \r\nINFO: Restoring the SecureDrop Application Server from backup\r\n\r\nPLAY [Restore SecureDrop Application Server from previous config.] *************************\r\n\r\nTASK [Gathering Facts] *********************************************************************\r\nok: [app]\r\n\r\nTASK [restore : Create temporary directory for Tor configuration check] ********************\r\nchanged: [app]\r\n\r\nTASK [restore : Fetch current Tor configuration from app server] ***************************\r\nchanged: [app]\r\n\r\nTASK [restore : Create directory to hold the Tor configuration from the backup] ************\r\nchanged: [app]\r\n\r\nTASK [restore : Extract Tor configuration from backup] *************************************\r\nchanged: [app]\r\n\r\nTASK [restore : Check for Tor configuration differences between the backup and server] *****\r\nchanged: [app]\r\n\r\nTASK [restore : Remove temporary directory for Tor configuration check] ********************\r\nchanged: [app]\r\n\r\nTASK [restore : Copy backup to application server] *****************************************\r\nchanged: [app]\r\n\r\nTASK [restore : Extract backup] ************************************************************\r\nchanged: [app]\r\n\r\nTASK [restore : Reconfigure securedrop-app-code] *******************************************\r\nchanged: [app]\r\n\r\nTASK [restore : Reconfigure securedrop-config] *********************************************\r\nchanged: [app]\r\n\r\nTASK [restore : Reload Apache service] *****************************************************\r\nchanged: [app]\r\n\r\nTASK [restore : Reload Tor service] ********************************************************\r\nchanged: [app]\r\n\r\nTASK [restore : Wait for Tor reload] *******************************************************\r\nchanged: [app]\r\n\r\nPLAY RECAP *********************************************************************************\r\napp                        : ok=14   changed=13   unreachable=0    failed=0   \r\n\r\nException ignored in: <function WeakValueDictionary.__init__.<locals>.remove at 0x7fa7ea4c7a60>\r\nTraceback (most recent call last):\r\n  File \"/home/amnesia/Persistent/securedrop/admin/.venv3/lib/python3.5/weakref.py\", line 117, in remove\r\nTypeError: 'NoneType' object is not callable\r\nException ignored in: <function WeakValueDictionary.__init__.<locals>.remove at 0x7fa7ea4c7a60>\r\nTraceback (most recent call last):\r\n  File \"/home/amnesia/Persistent/securedrop/admin/.venv3/lib/python3.5/weakref.py\", line 117, in remove\r\nTypeError: 'NoneType' object is not callable\r\nException ignored in: <function WeakValueDictionary.__init__.<locals>.remove at 0x7fa7ea4c7a60>\r\nTraceback (most recent call last):\r\n  File \"/home/amnesia/Persistent/securedrop/admin/.venv3/lib/python3.5/weakref.py\", line 117, in remove\r\nTypeError: 'NoneType' object is not callable\r\nException ignored in: <function WeakValueDictionary.__init__.<locals>.remove at 0x7fa7ea4c7a60>\r\nTraceback (most recent call last):\r\n  File \"/home/amnesia/Persistent/securedrop/admin/.venv3/lib/python3.5/weakref.py\", line 117, in remove\r\nTypeError: 'NoneType' object is not callable\r\nException ignored in: <function WeakValueDictionary.__init__.<locals>.remove at 0x7fa7ea4c7a60>\r\nTraceback (most recent call last):\r\n  File \"/home/amnesia/Persistent/securedrop/admin/.venv3/lib/python3.5/weakref.py\", line 117, in remove\r\nTypeError: 'NoneType' object is not callable\r\nException ignored in: <function WeakValueDictionary.__init__.<locals>.remove at 0x7fa7ea4c7a60>\r\nTraceback (most recent call last):\r\n  File \"/home/amnesia/Persistent/securedrop/admin/.venv3/lib/python3.5/weakref.py\", line 117, in remove\r\nTypeError: 'NoneType' object is not callable\r\nException ignored in: <function WeakValueDictionary.__init__.<locals>.remove at 0x7fa7ea4c7a60>\r\nTraceback (most recent call last):\r\n  File \"/home/amnesia/Persistent/securedrop/admin/.venv3/lib/python3.5/weakref.py\", line 117, in remove\r\nTypeError: 'NoneType' object is not callable\r\nException ignored in: <function WeakValueDictionary.__init__.<locals>.remove at 0x7fa7ea4c7a60>\r\nTraceback (most recent call last):\r\n  File \"/home/amnesia/Persistent/securedrop/admin/.venv3/lib/python3.5/weakref.py\", line 117, in remove\r\nTypeError: 'NoneType' object is not callable\r\nException ignored in: <function WeakValueDictionary.__init__.<locals>.remove at 0x7fa7ea4c7a60>\r\nTraceback (most recent call last):\r\n  File \"/home/amnesia/Persistent/securedrop/admin/.venv3/lib/python3.5/weakref.py\", line 117, in remove\r\nTypeError: 'NoneType' object is not callable\r\nException ignored in: <function WeakValueDictionary.__init__.<locals>.remove at 0x7fa7ea4c7a60>\r\nTraceback (most recent call last):\r\n  File \"/home/amnesia/Persistent/securedrop/admin/.venv3/lib/python3.5/weakref.py\", line 117, in remove\r\nTypeError: 'NoneType' object is not callable\r\nException ignored in: <function WeakValueDictionary.__init__.<locals>.remove at 0x7fa7ea4c7a60>\r\nTraceback (most recent call last):\r\n  File \"/home/amnesia/Persistent/securedrop/admin/.venv3/lib/python3.5/weakref.py\", line 117, in remove\r\nTypeError: 'NoneType' object is not callable\r\nException ignored in: <function WeakValueDictionary.__init__.<locals>.remove at 0x7fa7ea4c7a60>\r\nTraceback (most recent call last):\r\n  File \"/home/amnesia/Persistent/securedrop/admin/.venv3/lib/python3.5/weakref.py\", line 117, in remove\r\nTypeError: 'NoneType' object is not callable\r\nException ignored in: <function WeakValueDictionary.__init__.<locals>.remove at 0x7fa7ea4c7a60>\r\nTraceback (most recent call last):\r\n  File \"/home/amnesia/Persistent/securedrop/admin/.venv3/lib/python3.5/weakref.py\", line 117, in remove\r\nTypeError: 'NoneType' object is not callable\r\nException ignored in: <function WeakValueDictionary.__init__.<locals>.remove at 0x7fa7ea4c7a60>\r\nTraceback (most recent call last):\r\n  File \"/home/amnesia/Persistent/securedrop/admin/.venv3/lib/python3.5/weakref.py\", line 117, in remove\r\nTypeError: 'NoneType' object is not callable\r\nException ignored in: <function WeakValueDictionary.__init__.<locals>.remove at 0x7fa7ea4c7a60>\r\nTraceback (most recent call last):\r\n  File \"/home/amnesia/Persistent/securedrop/admin/.venv3/lib/python3.5/weakref.py\", line 117, in remove\r\nTypeError: 'NoneType' object is not callable\r\nException ignored in: <function WeakValueDictionary.__init__.<locals>.remove at 0x7fa7ea4c7a60>\r\nTraceback (most recent call last):\r\n  File \"/home/amnesia/Persistent/securedrop/admin/.venv3/lib/python3.5/weakref.py\", line 117, in remove\r\nTypeError: 'NoneType' object is not callable\r\nException ignored in: <function WeakValueDictionary.__init__.<locals>.remove at 0x7fa7ea4c7a60>\r\nTraceback (most recent call last):\r\n  File \"/home/amnesia/Persistent/securedrop/admin/.venv3/lib/python3.5/weakref.py\", line 117, in remove\r\nTypeError: 'NoneType' object is not callable\r\nException ignored in: <function WeakValueDictionary.__init__.<locals>.remove at 0x7fa7ea4c7a60>\r\nTraceback (most recent call last):\r\n  File \"/home/amnesia/Persistent/securedrop/admin/.venv3/lib/python3.5/weakref.py\", line 117, in remove\r\nTypeError: 'NoneType' object is not callable\r\nException ignored in: <function WeakValueDictionary.__init__.<locals>.remove at 0x7fa7ea4c7a60>\r\nTraceback (most recent call last):\r\n  File \"/home/amnesia/Persistent/securedrop/admin/.venv3/lib/python3.5/weakref.py\", line 117, in remove\r\nTypeError: 'NoneType' object is not callable\r\nException ignored in: <function WeakValueDictionary.__init__.<locals>.remove at 0x7fa7ea4c7a60>\r\nTraceback (most recent call last):\r\n  File \"/home/amnesia/Persistent/securedrop/admin/.venv3/lib/python3.5/weakref.py\", line 117, in remove\r\nTypeError: 'NoneType' object is not callable\r\nException ignored in: <function WeakValueDictionary.__init__.<locals>.remove at 0x7fa7ea4c7a60>\r\nTraceback (most recent call last):\r\n  File \"/home/amnesia/Persistent/securedrop/admin/.venv3/lib/python3.5/weakref.py\", line 117, in remove\r\nTypeError: 'NoneType' object is not callable\r\nException ignored in: <function WeakValueDictionary.__init__.<locals>.remove at 0x7fa7ea4c7a60>\r\nTraceback (most recent call last):\r\n  File \"/home/amnesia/Persistent/securedrop/admin/.venv3/lib/python3.5/weakref.py\", line 117, in remove\r\nTypeError: 'NoneType' object is not callable\r\nException ignored in: <function WeakValueDictionary.__init__.<locals>.remove at 0x7fa7ea4c7a60>\r\nTraceback (most recent call last):\r\n  File \"/home/amnesia/Persistent/securedrop/admin/.venv3/lib/python3.5/weakref.py\", line 117, in remove\r\nTypeError: 'NoneType' object is not callable\r\nException ignored in: <function WeakValueDictionary.__init__.<locals>.remove at 0x7fa7ea4c7a60>\r\nTraceback (most recent call last):\r\n  File \"/home/amnesia/Persistent/securedrop/admin/.venv3/lib/python3.5/weakref.py\", line 117, in remove\r\nTypeError: 'NoneType' object is not callable\r\nException ignored in: <function WeakValueDictionary.__init__.<locals>.remove at 0x7fa7ea4c7a60>\r\nTraceback (most recent call last):\r\n  File \"/home/amnesia/Persistent/securedrop/admin/.venv3/lib/python3.5/weakref.py\", line 117, in remove\r\nTypeError: 'NoneType' object is not callable\r\nException ignored in: <function WeakValueDictionary.__init__.<locals>.remove at 0x7fa7ea4c7a60>\r\nTraceback (most recent call last):\r\n  File \"/home/amnesia/Persistent/securedrop/admin/.venv3/lib/python3.5/weakref.py\", line 117, in remove\r\nTypeError: 'NoneType' object is not callable\r\nException ignored in: <function WeakValueDictionary.__init__.<locals>.remove at 0x7fa7ea4c7a60>\r\nTraceback (most recent call last):\r\n  File \"/home/amnesia/Persistent/securedrop/admin/.venv3/lib/python3.5/weakref.py\", line 117, in remove\r\nTypeError: 'NoneType' object is not callable\r\nException ignored in: <function WeakValueDictionary.__init__.<locals>.remove at 0x7fa7ea4c7a60>\r\nTraceback (most recent call last):\r\n  File \"/home/amnesia/Persistent/securedrop/admin/.venv3/lib/python3.5/weakref.py\", line 117, in remove\r\nTypeError: 'NoneType' object is not callable\r\nException ignored in: <function WeakValueDictionary.__init__.<locals>.remove at 0x7fa7ea4c7a60>\r\nTraceback (most recent call last):\r\n  File \"/home/amnesia/Persistent/securedrop/admin/.venv3/lib/python3.5/weakref.py\", line 117, in remove\r\nTypeError: 'NoneType' object is not callable\r\nException ignored in: <function WeakValueDictionary.__init__.<locals>.remove at 0x7fa7ea4c7a60>\r\nTraceback (most recent call last):\r\n  File \"/home/amnesia/Persistent/securedrop/admin/.venv3/lib/python3.5/weakref.py\", line 117, in remove\r\nTypeError: 'NoneType' object is not callable\r\nException ignored in: <function WeakValueDictionary.__init__.<locals>.remove at 0x7fa7ea4c7a60>\r\nTraceback (most recent call last):\r\n  File \"/home/amnesia/Persistent/securedrop/admin/.venv3/lib/python3.5/weakref.py\", line 117, in remove\r\nTypeError: 'NoneType' object is not callable\r\nException ignored in: <function WeakValueDictionary.__init__.<locals>.remove at 0x7fa7ea4c7a60>\r\nTraceback (most recent call last):\r\n  File \"/home/amnesia/Persistent/securedrop/admin/.venv3/lib/python3.5/weakref.py\", line 117, in remove\r\nTypeError: 'NoneType' object is not callable\r\nException ignored in: <function WeakValueDictionary.__init__.<locals>.remove at 0x7fa7ea4c7a60>\r\nTraceback (most recent call last):\r\n  File \"/home/amnesia/Persistent/securedrop/admin/.venv3/lib/python3.5/weakref.py\", line 117, in remove\r\nTypeError: 'NoneType' object is not callable\r\n```\r\n</details>\r\n\r\nPlease provide screenshots where appropriate.\r\n\r\n## Comments\r\nThese errors don't appear to affect the restore script itself -  the restore succeeds as far as I can tell. Subsequent restore commands do not display the errors. ", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/5029/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/5029/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/5013", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/5013/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/5013/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/5013/events", "html_url": "https://github.com/freedomofpress/securedrop/issues/5013", "id": 526292720, "node_id": "MDU6SXNzdWU1MjYyOTI3MjA=", "number": 5013, "title": "Incorrect label IDs in admin UI", "user": {"login": "eloquence", "id": 213636, "node_id": "MDQ6VXNlcjIxMzYzNg==", "avatar_url": "https://avatars.githubusercontent.com/u/213636?v=4", "gravatar_id": "", "url": "https://api.github.com/users/eloquence", "html_url": "https://github.com/eloquence", "followers_url": "https://api.github.com/users/eloquence/followers", "following_url": "https://api.github.com/users/eloquence/following{/other_user}", "gists_url": "https://api.github.com/users/eloquence/gists{/gist_id}", "starred_url": "https://api.github.com/users/eloquence/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/eloquence/subscriptions", "organizations_url": "https://api.github.com/users/eloquence/orgs", "repos_url": "https://api.github.com/users/eloquence/repos", "events_url": "https://api.github.com/users/eloquence/events{/privacy}", "received_events_url": "https://api.github.com/users/eloquence/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}, {"id": 671921004, "node_id": "MDU6TGFiZWw2NzE5MjEwMDQ=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/help%20wanted", "name": "help wanted", "color": "5319e7", "default": true, "description": "Issues we would definitely appreciate volunteer help with"}, {"id": 1320823996, "node_id": "MDU6TGFiZWwxMzIwODIzOTk2", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/good%20first%20issue", "name": "good first issue", "color": "ff479a", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2019-11-21T00:26:58Z", "updated_at": "2019-11-25T20:06:24Z", "closed_at": "2019-11-25T20:06:24Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "On the `/admin/add` user screen, labels are defined for the checkboxes \"Is Admin\" and \"Is using a YubiKey [HOTP] \". However, the [`for` attribute](https://developer.mozilla.org/en-US/docs/Web/HTML/Element/label#Attributes) is named incorrectly (using underscores instead of hyphens as in the input IDs). This results in especially annoying behavior: the mouse pointer changes over the label, but clicking it has no effect.   This should be a two-line fix + testing.", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/5013/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/5013/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/4910", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/4910/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/4910/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/4910/events", "html_url": "https://github.com/freedomofpress/securedrop/issues/4910", "id": 507466672, "node_id": "MDU6SXNzdWU1MDc0NjY2NzI=", "number": 4910, "title": "securedrop-admin (setup) fails in Tails 4.0-rc1", "user": {"login": "emkll", "id": 15223328, "node_id": "MDQ6VXNlcjE1MjIzMzI4", "avatar_url": "https://avatars.githubusercontent.com/u/15223328?v=4", "gravatar_id": "", "url": "https://api.github.com/users/emkll", "html_url": "https://github.com/emkll", "followers_url": "https://api.github.com/users/emkll/followers", "following_url": "https://api.github.com/users/emkll/following{/other_user}", "gists_url": "https://api.github.com/users/emkll/gists{/gist_id}", "starred_url": "https://api.github.com/users/emkll/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/emkll/subscriptions", "organizations_url": "https://api.github.com/users/emkll/orgs", "repos_url": "https://api.github.com/users/emkll/repos", "events_url": "https://api.github.com/users/emkll/events{/privacy}", "received_events_url": "https://api.github.com/users/emkll/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}, {"id": 385585080, "node_id": "MDU6TGFiZWwzODU1ODUwODA=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/QA:%20Release", "name": "QA: Release", "color": "fbca04", "default": false, "description": null}, {"id": 1106060106, "node_id": "MDU6TGFiZWwxMTA2MDYwMTA2", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/needs/reproducing", "name": "needs/reproducing", "color": "3dce6b", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/freedomofpress/securedrop/milestones/57", "html_url": "https://github.com/freedomofpress/securedrop/milestone/57", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/milestones/57/labels", "id": 4598454, "node_id": "MDk6TWlsZXN0b25lNDU5ODQ1NA==", "number": 57, "title": "1.1.0", "description": "String freeze and feature freeze: 2019-10-08 (EOD PDT). \r\nRelease Manager: @kushaldas , Deputy RM: @emkll, Localization Manager: @rmol, deputy LM: @redshiftzero", "creator": {"login": "redshiftzero", "id": 7832803, "node_id": "MDQ6VXNlcjc4MzI4MDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7832803?v=4", "gravatar_id": "", "url": "https://api.github.com/users/redshiftzero", "html_url": "https://github.com/redshiftzero", "followers_url": "https://api.github.com/users/redshiftzero/followers", "following_url": "https://api.github.com/users/redshiftzero/following{/other_user}", "gists_url": "https://api.github.com/users/redshiftzero/gists{/gist_id}", "starred_url": "https://api.github.com/users/redshiftzero/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/redshiftzero/subscriptions", "organizations_url": "https://api.github.com/users/redshiftzero/orgs", "repos_url": "https://api.github.com/users/redshiftzero/repos", "events_url": "https://api.github.com/users/redshiftzero/events{/privacy}", "received_events_url": "https://api.github.com/users/redshiftzero/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 24, "state": "closed", "created_at": "2019-08-23T14:52:50Z", "updated_at": "2019-11-01T03:18:47Z", "due_on": "2019-10-21T07:00:00Z", "closed_at": "2019-11-01T03:18:47Z"}, "comments": 3, "created_at": "2019-10-15T20:31:33Z", "updated_at": "2019-10-17T09:38:42Z", "closed_at": "2019-10-17T09:38:42Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "## Description\r\n\r\nRunning `./securedrop-admin setup` in tails 4.0-rc1 (upgraded from 3.16) returns the following error:\r\n\r\n```\r\nINFO: Virtualenv already exists, not creating\r\nINFO: Checking Python dependencies for securedrop-admin\r\nERROR: Failed to install pip dependencies. Check network connection and try again.\r\n```\r\nThis was done in VMs, will try to reproduce on hardware.\r\n\r\n## Steps to Reproduce\r\n\r\n1. Upgrade Tails device from 3.16 to 4.0 (Boot into 4.0-rc1 drive and clone to upgrade 3.16 drive)\r\n2. Boot into newly-upgraded tails drive\r\n3. Verify that the internet is working (tor is bootstrapped, you can reach an external website over tor)\r\n4. check out `1.1.0~rc2` tag\r\n5. Run `./securedrop-admin setup` in ~/Persistent/securedrop\r\n6. Observe error\r\n\r\n## Expected Behavior\r\n\r\nSecuredrop-admin should run and the dependencies should be installed.\r\n\r\n## Actual Behavior\r\n\r\nSecuredrop-admin fails and returns an error, the dependencies are not installed\r\n\r\n## Comments\r\n\r\nPer https://github.com/freedomofpress/securedrop/pull/4852/files#diff-b5e536cc161fcc0d62e661b4d6eae381R70-R73\r\n\r\nWhen running the commands locally, I get\r\n* `lsb_release --id --short` returns `Debian`\r\n* `uname -a` returns `Linux amnesia 5.3.0-trunk-amd64 #1 SMF Debian 5.3.2-1~exp1 (2019-10-02) x86_64 GNU/Linux`\r\n\r\nWhen i run ./securedrop-admin with no parameter, I get:\r\n```\r\namnesia@amnesia:~/Persistent/securedrop$ ./securedrop-admin help\r\nCould not find platform independent libraries <prefix>\r\nCould not find platform dependent libraries <exec_prefix>\r\nConsider setting $PYTHONHOME to <prefix>[:<exec_prefix>]\r\nFatal Python error: Py_Initialize: Unable to get the locale encoding\r\nImportError: No module named 'encodings'\r\n\r\nCurrent thread 0x00007cf687450740 (most recent call first):\r\nAborted\r\n```", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/4910/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/4910/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/4878", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/4878/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/4878/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/4878/events", "html_url": "https://github.com/freedomofpress/securedrop/issues/4878", "id": 499710585, "node_id": "MDU6SXNzdWU0OTk3MTA1ODU=", "number": 4878, "title": "Graphical updater \"is already running\" dialog during late stages of the update process", "user": {"login": "eloquence", "id": 213636, "node_id": "MDQ6VXNlcjIxMzYzNg==", "avatar_url": "https://avatars.githubusercontent.com/u/213636?v=4", "gravatar_id": "", "url": "https://api.github.com/users/eloquence", "html_url": "https://github.com/eloquence", "followers_url": "https://api.github.com/users/eloquence/followers", "following_url": "https://api.github.com/users/eloquence/following{/other_user}", "gists_url": "https://api.github.com/users/eloquence/gists{/gist_id}", "starred_url": "https://api.github.com/users/eloquence/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/eloquence/subscriptions", "organizations_url": "https://api.github.com/users/eloquence/orgs", "repos_url": "https://api.github.com/users/eloquence/repos", "events_url": "https://api.github.com/users/eloquence/events{/privacy}", "received_events_url": "https://api.github.com/users/eloquence/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2019-09-28T01:36:47Z", "updated_at": "2019-12-10T19:32:19Z", "closed_at": "2019-12-10T19:32:19Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "## Description\r\n\r\nThe graphical updater briefly shows an \"is already running\" dialog during the last stages of the process. The dialog can be dismissed and has no negative consequences.\r\n\r\nTested on Tails 3.16.\r\n\r\n## Steps to Reproduce\r\n\r\nPerform a full graphical update using the graphical updater, with the Tails admin password set.\r\n\r\n## Expected Behavior\r\n\r\nThe graphical update completes without any unusual messages.\r\n\r\n## Actual Behavior\r\n\r\nAn \"already running\" dialog briefly appears towards the end of the process.", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/4878/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/4878/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/4771", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/4771/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/4771/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/4771/events", "html_url": "https://github.com/freedomofpress/securedrop/issues/4771", "id": 491219412, "node_id": "MDU6SXNzdWU0OTEyMTk0MTI=", "number": 4771, "title": "Tails 4 desktop shortcuts not showing up", "user": {"login": "redshiftzero", "id": 7832803, "node_id": "MDQ6VXNlcjc4MzI4MDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7832803?v=4", "gravatar_id": "", "url": "https://api.github.com/users/redshiftzero", "html_url": "https://github.com/redshiftzero", "followers_url": "https://api.github.com/users/redshiftzero/followers", "following_url": "https://api.github.com/users/redshiftzero/following{/other_user}", "gists_url": "https://api.github.com/users/redshiftzero/gists{/gist_id}", "starred_url": "https://api.github.com/users/redshiftzero/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/redshiftzero/subscriptions", "organizations_url": "https://api.github.com/users/redshiftzero/orgs", "repos_url": "https://api.github.com/users/redshiftzero/repos", "events_url": "https://api.github.com/users/redshiftzero/events{/privacy}", "received_events_url": "https://api.github.com/users/redshiftzero/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "zenmonkeykstop", "id": 2782952, "node_id": "MDQ6VXNlcjI3ODI5NTI=", "avatar_url": "https://avatars.githubusercontent.com/u/2782952?v=4", "gravatar_id": "", "url": "https://api.github.com/users/zenmonkeykstop", "html_url": "https://github.com/zenmonkeykstop", "followers_url": "https://api.github.com/users/zenmonkeykstop/followers", "following_url": "https://api.github.com/users/zenmonkeykstop/following{/other_user}", "gists_url": "https://api.github.com/users/zenmonkeykstop/gists{/gist_id}", "starred_url": "https://api.github.com/users/zenmonkeykstop/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/zenmonkeykstop/subscriptions", "organizations_url": "https://api.github.com/users/zenmonkeykstop/orgs", "repos_url": "https://api.github.com/users/zenmonkeykstop/repos", "events_url": "https://api.github.com/users/zenmonkeykstop/events{/privacy}", "received_events_url": "https://api.github.com/users/zenmonkeykstop/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "zenmonkeykstop", "id": 2782952, "node_id": "MDQ6VXNlcjI3ODI5NTI=", "avatar_url": "https://avatars.githubusercontent.com/u/2782952?v=4", "gravatar_id": "", "url": "https://api.github.com/users/zenmonkeykstop", "html_url": "https://github.com/zenmonkeykstop", "followers_url": "https://api.github.com/users/zenmonkeykstop/followers", "following_url": "https://api.github.com/users/zenmonkeykstop/following{/other_user}", "gists_url": "https://api.github.com/users/zenmonkeykstop/gists{/gist_id}", "starred_url": "https://api.github.com/users/zenmonkeykstop/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/zenmonkeykstop/subscriptions", "organizations_url": "https://api.github.com/users/zenmonkeykstop/orgs", "repos_url": "https://api.github.com/users/zenmonkeykstop/repos", "events_url": "https://api.github.com/users/zenmonkeykstop/events{/privacy}", "received_events_url": "https://api.github.com/users/zenmonkeykstop/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/freedomofpress/securedrop/milestones/57", "html_url": "https://github.com/freedomofpress/securedrop/milestone/57", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/milestones/57/labels", "id": 4598454, "node_id": "MDk6TWlsZXN0b25lNDU5ODQ1NA==", "number": 57, "title": "1.1.0", "description": "String freeze and feature freeze: 2019-10-08 (EOD PDT). \r\nRelease Manager: @kushaldas , Deputy RM: @emkll, Localization Manager: @rmol, deputy LM: @redshiftzero", "creator": {"login": "redshiftzero", "id": 7832803, "node_id": "MDQ6VXNlcjc4MzI4MDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7832803?v=4", "gravatar_id": "", "url": "https://api.github.com/users/redshiftzero", "html_url": "https://github.com/redshiftzero", "followers_url": "https://api.github.com/users/redshiftzero/followers", "following_url": "https://api.github.com/users/redshiftzero/following{/other_user}", "gists_url": "https://api.github.com/users/redshiftzero/gists{/gist_id}", "starred_url": "https://api.github.com/users/redshiftzero/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/redshiftzero/subscriptions", "organizations_url": "https://api.github.com/users/redshiftzero/orgs", "repos_url": "https://api.github.com/users/redshiftzero/repos", "events_url": "https://api.github.com/users/redshiftzero/events{/privacy}", "received_events_url": "https://api.github.com/users/redshiftzero/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 24, "state": "closed", "created_at": "2019-08-23T14:52:50Z", "updated_at": "2019-11-01T03:18:47Z", "due_on": "2019-10-21T07:00:00Z", "closed_at": "2019-11-01T03:18:47Z"}, "comments": 1, "created_at": "2019-09-09T17:11:32Z", "updated_at": "2019-10-07T17:25:45Z", "closed_at": "2019-10-07T17:25:44Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "## Description\r\n\r\nAfter tailsconfig on Tails 4 beta, .desktop files are not working on the Desktop\r\n\r\n## Steps to Reproduce\r\n\r\n1. Install the Tails 4 beta: https://tails.boum.org/news/test_4.0-beta2/\r\n2. Set up persistence\r\n3. Clone the SecureDrop repo, install SD (or copy over your keys/creds/`site-specific`)\r\n4. From `~/Persistent/securedrop`, run `./securedrop-admin tailsconfig`\r\n\r\n## Expected Behavior\r\n\r\nDesktop shortcuts appear on desktop to the source and journalist interfaces, when clicked they open Tor Browser\r\n\r\n## Actual Behavior\r\n\r\nDesktop shortcuts appear, but they open in Text Editor when clicked\r\n\r\n## Comments\r\n\r\nNeeds investigation, note we had a similar issue back when we updated to Tails 3.3: #2586\r\n\r\nRelated to #4669", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/4771/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/4771/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/4767", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/4767/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/4767/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/4767/events", "html_url": "https://github.com/freedomofpress/securedrop/issues/4767", "id": 491097810, "node_id": "MDU6SXNzdWU0OTEwOTc4MTA=", "number": 4767, "title": "validate role fails on Tails 4", "user": {"login": "redshiftzero", "id": 7832803, "node_id": "MDQ6VXNlcjc4MzI4MDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7832803?v=4", "gravatar_id": "", "url": "https://api.github.com/users/redshiftzero", "html_url": "https://github.com/redshiftzero", "followers_url": "https://api.github.com/users/redshiftzero/followers", "following_url": "https://api.github.com/users/redshiftzero/following{/other_user}", "gists_url": "https://api.github.com/users/redshiftzero/gists{/gist_id}", "starred_url": "https://api.github.com/users/redshiftzero/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/redshiftzero/subscriptions", "organizations_url": "https://api.github.com/users/redshiftzero/orgs", "repos_url": "https://api.github.com/users/redshiftzero/repos", "events_url": "https://api.github.com/users/redshiftzero/events{/privacy}", "received_events_url": "https://api.github.com/users/redshiftzero/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}, {"id": 1343628691, "node_id": "MDU6TGFiZWwxMzQzNjI4Njkx", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/Ansible", "name": "Ansible", "color": "006b75", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": {"login": "zenmonkeykstop", "id": 2782952, "node_id": "MDQ6VXNlcjI3ODI5NTI=", "avatar_url": "https://avatars.githubusercontent.com/u/2782952?v=4", "gravatar_id": "", "url": "https://api.github.com/users/zenmonkeykstop", "html_url": "https://github.com/zenmonkeykstop", "followers_url": "https://api.github.com/users/zenmonkeykstop/followers", "following_url": "https://api.github.com/users/zenmonkeykstop/following{/other_user}", "gists_url": "https://api.github.com/users/zenmonkeykstop/gists{/gist_id}", "starred_url": "https://api.github.com/users/zenmonkeykstop/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/zenmonkeykstop/subscriptions", "organizations_url": "https://api.github.com/users/zenmonkeykstop/orgs", "repos_url": "https://api.github.com/users/zenmonkeykstop/repos", "events_url": "https://api.github.com/users/zenmonkeykstop/events{/privacy}", "received_events_url": "https://api.github.com/users/zenmonkeykstop/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "zenmonkeykstop", "id": 2782952, "node_id": "MDQ6VXNlcjI3ODI5NTI=", "avatar_url": "https://avatars.githubusercontent.com/u/2782952?v=4", "gravatar_id": "", "url": "https://api.github.com/users/zenmonkeykstop", "html_url": "https://github.com/zenmonkeykstop", "followers_url": "https://api.github.com/users/zenmonkeykstop/followers", "following_url": "https://api.github.com/users/zenmonkeykstop/following{/other_user}", "gists_url": "https://api.github.com/users/zenmonkeykstop/gists{/gist_id}", "starred_url": "https://api.github.com/users/zenmonkeykstop/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/zenmonkeykstop/subscriptions", "organizations_url": "https://api.github.com/users/zenmonkeykstop/orgs", "repos_url": "https://api.github.com/users/zenmonkeykstop/repos", "events_url": "https://api.github.com/users/zenmonkeykstop/events{/privacy}", "received_events_url": "https://api.github.com/users/zenmonkeykstop/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/freedomofpress/securedrop/milestones/57", "html_url": "https://github.com/freedomofpress/securedrop/milestone/57", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/milestones/57/labels", "id": 4598454, "node_id": "MDk6TWlsZXN0b25lNDU5ODQ1NA==", "number": 57, "title": "1.1.0", "description": "String freeze and feature freeze: 2019-10-08 (EOD PDT). \r\nRelease Manager: @kushaldas , Deputy RM: @emkll, Localization Manager: @rmol, deputy LM: @redshiftzero", "creator": {"login": "redshiftzero", "id": 7832803, "node_id": "MDQ6VXNlcjc4MzI4MDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7832803?v=4", "gravatar_id": "", "url": "https://api.github.com/users/redshiftzero", "html_url": "https://github.com/redshiftzero", "followers_url": "https://api.github.com/users/redshiftzero/followers", "following_url": "https://api.github.com/users/redshiftzero/following{/other_user}", "gists_url": "https://api.github.com/users/redshiftzero/gists{/gist_id}", "starred_url": "https://api.github.com/users/redshiftzero/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/redshiftzero/subscriptions", "organizations_url": "https://api.github.com/users/redshiftzero/orgs", "repos_url": "https://api.github.com/users/redshiftzero/repos", "events_url": "https://api.github.com/users/redshiftzero/events{/privacy}", "received_events_url": "https://api.github.com/users/redshiftzero/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 24, "state": "closed", "created_at": "2019-08-23T14:52:50Z", "updated_at": "2019-11-01T03:18:47Z", "due_on": "2019-10-21T07:00:00Z", "closed_at": "2019-11-01T03:18:47Z"}, "comments": 4, "created_at": "2019-09-09T13:30:49Z", "updated_at": "2019-09-25T15:44:57Z", "closed_at": "2019-09-25T15:44:57Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "## Description\r\n\r\nvalidate role fails on Tails 4\r\n\r\n## Steps to Reproduce\r\n\r\n1. Install the Tails 4 beta: https://tails.boum.org/news/test_4.0-beta2/\r\n2. Set up persistence\r\n3. Clone the SecureDrop repo\r\n4. From ~/Persistent/securedrop, run `./securedrop-admin tailsconfig` (after the workaround for `securedrop-admin setup` documented in #4751)\r\n\r\n## Expected Behavior\r\n\r\ntasks in validate role should pass\r\n\r\n## Actual Behavior\r\n\r\n```\r\nTASK [tails-config : Confirm host OS is Tails.] ******************************************************************************************************\r\nfatal: [localhost]: FAILED! => {\r\n    \"assertion\": \"ansible_lsb.id == \\\"Tails\\\"\", \r\n    \"changed\": false, \r\n    \"evaluated_to\": false, \r\n    \"msg\": \"SecureDrop requires Tails 3 or greater for workstation environments.\"\r\n}\r\n```\r\n\r\n## Comments\r\n\r\nAdding a debug step reveals:\r\n\r\n```\r\nTASK [tails-config : print ansible_lsb] ***************************************************************************************************************************\r\nok: [localhost] => {\r\n    \"ansible_lsb\": {\r\n        \"codename\": \"buster\", \r\n        \"description\": \"Debian GNU/Linux 10 (buster)\", \r\n        \"id\": \"Debian\", \r\n        \"major_release\": \"10\", \r\n        \"release\": \"10\"\r\n    }\r\n}\r\n```\r\n\r\nRelated to #4669", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/4767/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/4767/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/4733", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/4733/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/4733/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/4733/events", "html_url": "https://github.com/freedomofpress/securedrop/issues/4733", "id": 488818747, "node_id": "MDU6SXNzdWU0ODg4MTg3NDc=", "number": 4733, "title": "rq jobs (deletion, checksums) not processed in dev env", "user": {"login": "eloquence", "id": 213636, "node_id": "MDQ6VXNlcjIxMzYzNg==", "avatar_url": "https://avatars.githubusercontent.com/u/213636?v=4", "gravatar_id": "", "url": "https://api.github.com/users/eloquence", "html_url": "https://github.com/eloquence", "followers_url": "https://api.github.com/users/eloquence/followers", "following_url": "https://api.github.com/users/eloquence/following{/other_user}", "gists_url": "https://api.github.com/users/eloquence/gists{/gist_id}", "starred_url": "https://api.github.com/users/eloquence/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/eloquence/subscriptions", "organizations_url": "https://api.github.com/users/eloquence/orgs", "repos_url": "https://api.github.com/users/eloquence/repos", "events_url": "https://api.github.com/users/eloquence/events{/privacy}", "received_events_url": "https://api.github.com/users/eloquence/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}, {"id": 385585080, "node_id": "MDU6TGFiZWwzODU1ODUwODA=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/QA:%20Release", "name": "QA: Release", "color": "fbca04", "default": false, "description": null}, {"id": 616447641, "node_id": "MDU6TGFiZWw2MTY0NDc2NDE=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/development%20env", "name": "development env", "color": "bfd4f2", "default": false, "description": null}, {"id": 1106060106, "node_id": "MDU6TGFiZWwxMTA2MDYwMTA2", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/needs/reproducing", "name": "needs/reproducing", "color": "3dce6b", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2019-09-03T20:55:41Z", "updated_at": "2019-09-04T13:47:55Z", "closed_at": "2019-09-04T13:47:55Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "## Description\r\n\r\nJobs enqueued using `rq` never complete in the development environment.\r\n\r\n## Steps to Reproduce\r\n\r\n1. Build a Docker dev env using `make dev`\r\n2. Open a shell in the running container (` docker exec -it <container ID> \"/bin/bash\"`)\r\n3. Submit a file as a source\r\n4. Inspect the `submissions` table in sqlite (`sqlite3 /var/lib/securedrop/db.sqlite`, `select * from submissions`) and verify whether a checksum is added\r\n5. Delete the new submission using the Journalist Interface and verify whether the file is deleted\r\n\r\n## Expected Behavior\r\n\r\n- Checksum is generated\r\n- File is deleted\r\n\r\n## Actual Behavior\r\n\r\n- Checksum is not generated\r\n- File is not deleted", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/4733/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/4733/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/4656", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/4656/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/4656/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/4656/events", "html_url": "https://github.com/freedomofpress/securedrop/issues/4656", "id": 475771562, "node_id": "MDU6SXNzdWU0NzU3NzE1NjI=", "number": 4656, "title": "virtualenv needs to be activated before adding users via manage.py ", "user": {"login": "redshiftzero", "id": 7832803, "node_id": "MDQ6VXNlcjc4MzI4MDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7832803?v=4", "gravatar_id": "", "url": "https://api.github.com/users/redshiftzero", "html_url": "https://github.com/redshiftzero", "followers_url": "https://api.github.com/users/redshiftzero/followers", "following_url": "https://api.github.com/users/redshiftzero/following{/other_user}", "gists_url": "https://api.github.com/users/redshiftzero/gists{/gist_id}", "starred_url": "https://api.github.com/users/redshiftzero/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/redshiftzero/subscriptions", "organizations_url": "https://api.github.com/users/redshiftzero/orgs", "repos_url": "https://api.github.com/users/redshiftzero/repos", "events_url": "https://api.github.com/users/redshiftzero/events{/privacy}", "received_events_url": "https://api.github.com/users/redshiftzero/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/freedomofpress/securedrop/milestones/55", "html_url": "https://github.com/freedomofpress/securedrop/milestone/55", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/milestones/55/labels", "id": 4395960, "node_id": "MDk6TWlsZXN0b25lNDM5NTk2MA==", "number": 55, "title": "1.0.0", "description": "String freeze and feature freeze: 2019-08-29 (1700 PDT).\r\n\r\nString comment period: 2019-08-29 (1700 PDT) to 2019-09-02 (2000 PDT)\r\n\r\nTranslation period: 2019-09-03 (1700 PDT) to 2019-09-15 (1700 PDT).\r\n\r\nTranslation freeze: 2019-09-15 (1700 PDT).\r\n\r\nRelease Manager: @kushaldas , deputy RM: @emkll, Localization Manager: @rmol, deputy LM: @redshiftzero", "creator": {"login": "eloquence", "id": 213636, "node_id": "MDQ6VXNlcjIxMzYzNg==", "avatar_url": "https://avatars.githubusercontent.com/u/213636?v=4", "gravatar_id": "", "url": "https://api.github.com/users/eloquence", "html_url": "https://github.com/eloquence", "followers_url": "https://api.github.com/users/eloquence/followers", "following_url": "https://api.github.com/users/eloquence/following{/other_user}", "gists_url": "https://api.github.com/users/eloquence/gists{/gist_id}", "starred_url": "https://api.github.com/users/eloquence/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/eloquence/subscriptions", "organizations_url": "https://api.github.com/users/eloquence/orgs", "repos_url": "https://api.github.com/users/eloquence/repos", "events_url": "https://api.github.com/users/eloquence/events{/privacy}", "received_events_url": "https://api.github.com/users/eloquence/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 47, "state": "closed", "created_at": "2019-06-10T23:30:14Z", "updated_at": "2019-09-26T11:34:59Z", "due_on": "2019-09-17T07:00:00Z", "closed_at": "2019-09-26T11:34:59Z"}, "comments": 8, "created_at": "2019-08-01T16:14:24Z", "updated_at": "2019-08-30T18:15:16Z", "closed_at": "2019-08-30T18:15:16Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "## Description\r\n\r\nThe documentation to add users needs to be updated after the recent change to use a virtualenv\r\n\r\n## Steps to Reproduce\r\n\r\nFollow instructions in https://docs.securedrop.org/en/latest/create_admin_account.html to create an account\r\n\r\n## Expected Behavior\r\n\r\nUser account is made\r\n\r\n## Actual Behavior\r\n\r\nPython dependencies cannot be found\r\n\r\n## Comments\r\n\r\nWe can instruct the user to activate the virtualenv first (`source /opt/venvs/securedrop-app-code/bin/activate`)", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/4656/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/4656/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/4653", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/4653/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/4653/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/4653/events", "html_url": "https://github.com/freedomofpress/securedrop/issues/4653", "id": 474849694, "node_id": "MDU6SXNzdWU0NzQ4NDk2OTQ=", "number": 4653, "title": "\"Select unread\" in Journalist Interface selects all source submissions, not just unread", "user": {"login": "eloquence", "id": 213636, "node_id": "MDQ6VXNlcjIxMzYzNg==", "avatar_url": "https://avatars.githubusercontent.com/u/213636?v=4", "gravatar_id": "", "url": "https://api.github.com/users/eloquence", "html_url": "https://github.com/eloquence", "followers_url": "https://api.github.com/users/eloquence/followers", "following_url": "https://api.github.com/users/eloquence/following{/other_user}", "gists_url": "https://api.github.com/users/eloquence/gists{/gist_id}", "starred_url": "https://api.github.com/users/eloquence/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/eloquence/subscriptions", "organizations_url": "https://api.github.com/users/eloquence/orgs", "repos_url": "https://api.github.com/users/eloquence/repos", "events_url": "https://api.github.com/users/eloquence/events{/privacy}", "received_events_url": "https://api.github.com/users/eloquence/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2019-07-30T22:26:20Z", "updated_at": "2019-08-01T21:30:25Z", "closed_at": "2019-08-01T21:30:25Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "The \"Select unread\" button in the Journalist Interface selects all submissions from a source, not just unread ones.\r\n\r\n## Steps to reproduce\r\n\r\n1. Spin up dev env\r\n2. Submit a message as a new source from the SI\r\n3. Download its submission from the JI\r\n4. Submit another message\r\n5. Click \"Select unread\" for the source in the JI\r\n\r\n## Expected behavior\r\n\r\nThe new submission is selected in the JI\r\n\r\n## Actual behavior\r\n\r\nBoth submissions are selected in the JI", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/4653/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/4653/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/4637", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/4637/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/4637/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/4637/events", "html_url": "https://github.com/freedomofpress/securedrop/issues/4637", "id": 471885850, "node_id": "MDU6SXNzdWU0NzE4ODU4NTA=", "number": 4637, "title": "Latest Xenial vagrant boxes fail on staging", "user": {"login": "conorsch", "id": 657862, "node_id": "MDQ6VXNlcjY1Nzg2Mg==", "avatar_url": "https://avatars.githubusercontent.com/u/657862?v=4", "gravatar_id": "", "url": "https://api.github.com/users/conorsch", "html_url": "https://github.com/conorsch", "followers_url": "https://api.github.com/users/conorsch/followers", "following_url": "https://api.github.com/users/conorsch/following{/other_user}", "gists_url": "https://api.github.com/users/conorsch/gists{/gist_id}", "starred_url": "https://api.github.com/users/conorsch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/conorsch/subscriptions", "organizations_url": "https://api.github.com/users/conorsch/orgs", "repos_url": "https://api.github.com/users/conorsch/repos", "events_url": "https://api.github.com/users/conorsch/events{/privacy}", "received_events_url": "https://api.github.com/users/conorsch/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}, {"id": 616447641, "node_id": "MDU6TGFiZWw2MTY0NDc2NDE=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/development%20env", "name": "development env", "color": "bfd4f2", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 9, "created_at": "2019-07-23T19:22:29Z", "updated_at": "2019-07-25T18:09:16Z", "closed_at": "2019-07-25T18:09:16Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "## Description\r\n\r\nThe `bento/ubuntu-16.04` Vagrant box at version `201906.18.0` fails to complete a staging run. At a prior version `201812.27.0`, staging runs complete successfully.\r\n\r\n## Steps to Reproduce\r\n\r\nUsing Debian 9 libvirt. \r\n\r\n1. `vagrant box update --box bento/ubuntu-16.04 --provider virtualbox` to fetch latest\r\n2. `vagrant mutate bento/ubuntu-16.04 libvirt` to convert to libvirt format\r\n3. `vagrant box list` confirm the bento/16.04 libvirt box is version `201906.18.0`\r\n4. Create staging env\r\n5. Observe failure on removing old kernel tasks\r\n\r\n## Expected Behavior\r\nStaging run completes without error.\r\n\r\n## Actual Behavior\r\nStaging run fails on task ` TASK [grsecurity : Remove generic kernel packages.]`. Running the command-line task in an interactive shell shows clear error output:\r\n\r\n<details>\r\n<summary>\r\nError output from apt-get remove kernels\r\n</summary>\r\n\r\n```\r\nvagrant@app-staging:~$ sudo apt-get remove -y 'linux-image-.*generic'\r\nReading package lists... Done\r\nBuilding dependency tree       \r\nReading state information... Done\r\nNote, selecting 'linux-image-extra-4.4.0-127-generic' for regex 'linux-image-.*generic'\r\nNote, selecting 'linux-image-4.4.0-119-generic' for regex 'linux-image-.*generic'\r\nNote, selecting 'linux-image-4.10.0-19-generic' for regex 'linux-image-.*generic'\r\nNote, selecting 'linux-image-unsigned-4.15.0-34-generic' for regex 'linux-image-.*generic'\r\nNote, selecting 'linux-image-extra-4.4.0-34-generic' for regex 'linux-image-.*generic'\r\nNote, selecting 'linux-image-unsigned-4.15.0-55-generic' for regex 'linux-image-.*generic'\r\nNote, selecting 'linux-image-4.4.0-92-generic' for regex 'linux-image-.*generic'\r\nNote, selecting 'linux-image-4.8.0-49-generic' for regex 'linux-image-.*generic'\r\nNote, selecting 'linux-image-4.4.0-135-generic' for regex 'linux-image-.*generic'\r\nNote, selecting 'linux-image-4.4.0-38-generic' for regex 'linux-image-.*generic'\r\nNote, selecting 'linux-image-unsigned-4.4.0-146-generic' for regex 'linux-image-.*generic'\r\nNote, selecting 'linux-image-extra-4.4.0-71-generic' for regex 'linux-image-.*generic'\r\nNote, selecting 'linux-image-extra-4.4.0-92-generic' for regex 'linux-image-.*generic'\r\nNote, selecting 'linux-image-extra-4.8.0-49-generic' for regex 'linux-image-.*generic'\r\nNote, selecting 'linux-image-4.4.0-75-generic' for regex 'linux-image-.*generic'\r\nNote, selecting 'linux-image-4.4.0-139-generic' for regex 'linux-image-.*generic'\r\nNote, selecting 'linux-image-extra-4.13.0-31-generic' for regex 'linux-image-.*generic'\r\nNote, selecting 'linux-image-extra-4.10.0-30-generic' for regex 'linux-image-.*generic'\r\nNote, selecting 'linux-image-unsigned-4.15.0-54-generic' for regex 'linux-image-.*generic'\r\nNote, selecting 'linux-image-extra-4.4.0-75-generic' for regex 'linux-image-.*generic'\r\nNote, selecting 'linux-image-extra-4.4.0-109-generic' for regex 'linux-image-.*generic'\r\nNote, selecting 'linux-image-unsigned-4.4.0-145-generic' for regex 'linux-image-.*generic'\r\nNote, selecting 'linux-image-4.15.0-47-generic' for regex 'linux-image-.*generic'\r\nNote, selecting 'linux-image-extra-4.4.0-91-generic' for regex 'linux-image-.*generic'\r\nNote, selecting 'linux-image-4.4.0-138-generic' for regex 'linux-image-.*generic'\r\nNote, selecting 'linux-image-4.10.0-21-generic' for regex 'linux-image-.*generic'\r\nNote, selecting 'linux-image-4.13.0-39-generic' for regex 'linux-image-.*generic'\r\nNote, selecting 'linux-image-4.8.0-51-generic' for regex 'linux-image-.*generic'\r\nNote, selecting 'linux-image-extra-4.4.0-112-generic' for regex 'linux-image-.*generic'\r\nNote, selecting 'linux-image-4.4.0-36-generic' for regex 'linux-image-.*generic'\r\nNote, selecting 'linux-image-4.4.0-57-generic' for regex 'linux-image-.*generic'\r\nNote, selecting 'linux-image-4.4.0-78-generic' for regex 'linux-image-.*generic'\r\nNote, selecting 'linux-image-generic-lts-wily' for regex 'linux-image-.*generic'\r\nNote, selecting 'linux-image-4.15.0-46-generic' for regex 'linux-image-.*generic'\r\nNote, selecting 'linux-image-extra-4.10.0-33-generic' for regex 'linux-image-.*generic'\r\nNote, selecting 'linux-image-4.11.0-14-generic' for regex 'linux-image-.*generic'\r\nNote, selecting 'linux-image-extra-4.8.0-51-generic' for regex 'linux-image-.*generic'\r\nNote, selecting 'linux-image-unsigned-4.15.0-36-generic' for regex 'linux-image-.*generic'\r\nNote, selecting 'linux-image-extra-4.4.0-36-generic' for regex 'linux-image-.*generic'\r\nNote, selecting 'linux-image-extra-4.4.0-57-generic' for regex 'linux-image-.*generic'\r\nNote, selecting 'linux-image-4.13.0-21-generic' for regex 'linux-image-.*generic'\r\nNote, selecting 'linux-image-4.10.0-20-generic' for regex 'linux-image-.*generic'\r\nNote, selecting 'linux-image-4.15.0-29-generic' for regex 'linux-image-.*generic'\r\nNote, selecting 'linux-image-unsigned-4.4.0-148-generic' for regex 'linux-image-.*generic'\r\nNote, selecting 'linux-image-4.4.0-77-generic' for regex 'linux-image-.*generic'\r\nNote, selecting 'linux-image-extra-4.10.0-32-generic' for regex 'linux-image-.*generic'\r\nNote, selecting 'linux-image-4.4.0-140-generic' for regex 'linux-image-.*generic'\r\nNote, selecting 'linux-image-extra-4.4.0-77-generic' for regex 'linux-image-.*generic'\r\nNote, selecting 'linux-image-4.13.0-41-generic' for regex 'linux-image-.*generic'\r\nNote, selecting 'linux-image-4.10.0-40-generic' for regex 'linux-image-.*generic'\r\nNote, selecting 'linux-image-extra-4.13.0-16-generic' for regex 'linux-image-.*generic'\r\nNote, selecting 'linux-image-generic-hwe-16.04' for regex 'linux-image-.*generic'\r\nNote, selecting 'linux-image-generic' for regex 'linux-image-.*generic'\r\nNote, selecting 'linux-image-extra-4.4.0-93-generic' for regex 'linux-image-.*generic'\r\nNote, selecting 'linux-image-extra-4.4.0-131-generic' for regex 'linux-image-.*generic'\r\nNote, selecting 'linux-image-unsigned-4.15.0-39-generic' for regex 'linux-image-.*generic'\r\nNote, selecting 'linux-image-4.4.0-97-generic' for regex 'linux-image-.*generic'\r\nNote, selecting 'linux-image-extra-4.13.0-32-generic' for regex 'linux-image-.*generic'\r\nNote, selecting 'linux-image-4.8.0-53-generic' for regex 'linux-image-.*generic'\r\nNote, selecting 'linux-image-4.4.0-21-generic' for regex 'linux-image-.*generic'\r\nNote, selecting 'linux-image-extra-4.4.0-97-generic' for regex 'linux-image-.*generic'\r\nNote, selecting 'linux-image-4.4.0-59-generic' for regex 'linux-image-.*generic'\r\nNote, selecting 'linux-image-unsigned-4.4.0-150-generic' for regex 'linux-image-.*generic'\r\nNote, selecting 'linux-image-extra-4.10.0-14-generic' for regex 'linux-image-.*generic'\r\nNote, selecting 'linux-image-extra-4.13.0-36-generic' for regex 'linux-image-.*generic'\r\nNote, selecting 'linux-image-4.15.0-48-generic' for regex 'linux-image-.*generic'\r\nNote, selecting 'linux-image-extra-4.10.0-35-generic' for regex 'linux-image-.*generic'\r\nNote, selecting 'linux-image-extra-4.8.0-53-generic' for regex 'linux-image-.*generic'\r\nNote, selecting 'linux-image-extra-4.4.0-130-generic' for regex 'linux-image-.*generic'\r\nNote, selecting 'linux-image-4.4.0-101-generic' for regex 'linux-image-.*generic'\r\nNote, selecting 'linux-image-4.8.0-36-generic' for regex 'linux-image-.*generic'\r\nNote, selecting 'linux-image-unsigned-4.15.0-38-generic' for regex 'linux-image-.*generic'\r\nNote, selecting 'linux-image-extra-4.4.0-38-generic' for regex 'linux-image-.*generic'\r\nNote, selecting 'linux-image-4.4.0-122-generic' for regex 'linux-image-.*generic'\r\nNote, selecting 'linux-image-extra-4.4.0-59-generic' for regex 'linux-image-.*generic'\r\nNote, selecting 'linux-image-4.4.0-96-generic' for regex 'linux-image-.*generic'\r\nNote, selecting 'linux-image-4.10.0-22-generic' for regex 'linux-image-.*generic'\r\nNote, selecting 'linux-image-4.8.0-52-generic' for regex 'linux-image-.*generic'\r\nNote, selecting 'linux-image-extra-4.4.0-96-generic' for regex 'linux-image-.*generic'\r\nNote, selecting 'linux-image-extra-4.4.0-134-generic' for regex 'linux-image-.*generic'\r\nNote, selecting 'linux-image-4.4.0-79-generic' for regex 'linux-image-.*generic'\r\nNote, selecting 'linux-image-4.15.0-30-generic' for regex 'linux-image-.*generic'\r\nNote, selecting 'linux-image-4.15.0-51-generic' for regex 'linux-image-.*generic'\r\nNote, selecting 'linux-image-4.10.0-26-generic' for regex 'linux-image-.*generic'\r\nNote, selecting 'linux-image-extra-4.8.0-52-generic' for regex 'linux-image-.*generic'\r\nNote, selecting 'linux-image-unsigned-4.15.0-20-generic' for regex 'linux-image-.*generic'\r\nNote, selecting 'linux-image-4.4.0-121-generic' for regex 'linux-image-.*generic'\r\nNote, selecting 'linux-image-4.8.0-56-generic' for regex 'linux-image-.*generic'\r\nNote, selecting 'linux-image-4.4.0-142-generic' for regex 'linux-image-.*generic'\r\nNote, selecting 'linux-image-extra-4.4.0-79-generic' for regex 'linux-image-.*generic'\r\nNote, selecting 'linux-image-4.15.0-13-generic' for regex 'linux-image-.*generic'\r\nNote, selecting 'linux-image-generic-lts-xenial' for regex 'linux-image-.*generic'\r\nNote, selecting 'linux-image-4.13.0-43-generic' for regex 'linux-image-.*generic'\r\nNote, selecting 'linux-image-4.10.0-42-generic' for regex 'linux-image-.*generic'\r\nNote, selecting 'linux-image-extra-4.4.0-133-generic' for regex 'linux-image-.*generic'\r\nNote, selecting 'linux-image-4.4.0-104-generic' for regex 'linux-image-.*generic'\r\nNote, selecting 'linux-image-4.15.0-50-generic' for regex 'linux-image-.*generic'\r\nNote, selecting 'linux-image-4.13.0-26-generic' for regex 'linux-image-.*generic'\r\nNote, selecting 'linux-image-4.8.0-34-generic' for regex 'linux-image-.*generic'\r\nNote, selecting 'linux-image-4.4.0-141-generic' for regex 'linux-image-.*generic'\r\nNote, selecting 'linux-image-extra-4.4.0-78-generic' for regex 'linux-image-.*generic'\r\nNote, selecting 'linux-image-extra-4.4.0-116-generic' for regex 'linux-image-.*generic'\r\nNote, selecting 'linux-image-4.15.0-33-generic' for regex 'linux-image-.*generic'\r\nNote, selecting 'linux-image-extra-4.13.0-17-generic' for regex 'linux-image-.*generic'\r\nNote, selecting 'linux-image-extra-4.13.0-38-generic' for regex 'linux-image-.*generic'\r\nNote, selecting 'linux-image-extra-4.10.0-37-generic' for regex 'linux-image-.*generic'\r\nNote, selecting 'linux-image-extra-4.8.0-34-generic' for regex 'linux-image-.*generic'\r\nNote, selecting 'linux-image-unsigned-4.15.0-23-generic' for regex 'linux-image-.*generic'\r\nNote, selecting 'linux-image-4.4.0-81-generic' for regex 'linux-image-.*generic'\r\nNote, selecting 'linux-image-4.4.0-103-generic' for regex 'linux-image-.*generic'\r\nNote, selecting 'linux-image-4.4.0-124-generic' for regex 'linux-image-.*generic'\r\nNote, selecting 'linux-image-4.4.0-98-generic' for regex 'linux-image-.*generic'\r\nNote, selecting 'linux-image-4.13.0-25-generic' for regex 'linux-image-.*generic'\r\nNote, selecting 'linux-image-4.10.0-24-generic' for regex 'linux-image-.*generic'\r\nNote, selecting 'linux-image-4.8.0-54-generic' for regex 'linux-image-.*generic'\r\nNote, selecting 'linux-image-4.4.0-22-generic' for regex 'linux-image-.*generic'\r\nNote, selecting 'linux-image-4.4.0-43-generic' for regex 'linux-image-.*generic'\r\nNote, selecting 'linux-image-extra-4.4.0-98-generic' for regex 'linux-image-.*generic'\r\nNote, selecting 'linux-image-4.15.0-32-generic' for regex 'linux-image-.*generic'\r\nNote, selecting 'linux-image-unsigned-4.4.0-151-generic' for regex 'linux-image-.*generic'\r\nNote, selecting 'linux-image-extra-4.13.0-37-generic' for regex 'linux-image-.*generic'\r\nNote, selecting 'linux-image-4.10.0-28-generic' for regex 'linux-image-.*generic'\r\nNote, selecting 'linux-image-extra-4.8.0-54-generic' for regex 'linux-image-.*generic'\r\nNote, selecting 'linux-image-unsigned-4.15.0-22-generic' for regex 'linux-image-.*generic'\r\nNote, selecting 'linux-image-extra-4.4.0-22-generic' for regex 'linux-image-.*generic'\r\nNote, selecting 'linux-image-unsigned-4.15.0-43-generic' for regex 'linux-image-.*generic'\r\nNote, selecting 'linux-image-extra-4.4.0-43-generic' for regex 'linux-image-.*generic'\r\nNote, selecting 'linux-image-4.8.0-58-generic' for regex 'linux-image-.*generic'\r\nNote, selecting 'linux-image-4.15.0-15-generic' for regex 'linux-image-.*generic'\r\nNote, selecting 'linux-image-4.13.0-45-generic' for regex 'linux-image-.*generic'\r\nNote, selecting 'linux-image-extra-4.10.0-19-generic' for regex 'linux-image-.*generic'\r\nNote, selecting 'linux-image-4.4.0-42-generic' for regex 'linux-image-.*generic'\r\nNote, selecting 'linux-image-4.4.0-63-generic' for regex 'linux-image-.*generic'\r\nNote, selecting 'linux-image-extra-4.4.0-135-generic' for regex 'linux-image-.*generic'\r\nNote, selecting 'linux-image-4.4.0-127-generic' for regex 'linux-image-.*generic'\r\nNote, selecting 'linux-image-4.15.0-52-generic' for regex 'linux-image-.*generic'\r\nNote, selecting 'linux-image-4.10.0-27-generic' for regex 'linux-image-.*generic'\r\nNote, selecting 'linux-image-extra-4.4.0-21-generic' for regex 'linux-image-.*generic'\r\nNote, selecting 'linux-image-unsigned-4.15.0-42-generic' for regex 'linux-image-.*generic'\r\nNote, selecting 'linux-image-extra-4.4.0-42-generic' for regex 'linux-image-.*generic'\r\nNote, selecting 'linux-image-extra-4.4.0-63-generic' for regex 'linux-image-.*generic'\r\nNote, selecting 'linux-image-4.4.0-143-generic' for regex 'linux-image-.*generic'\r\nNote, selecting 'linux-image-unsigned-4.4.0-154-generic' for regex 'linux-image-.*generic'\r\nNote, selecting 'linux-image-extra-4.13.0-19-generic' for regex 'linux-image-.*generic'\r\nNote, selecting 'linux-image-extra-4.8.0-36-generic' for regex 'linux-image-.*generic'\r\nNote, selecting 'linux-image-4.4.0-62-generic' for regex 'linux-image-.*generic'\r\nNote, selecting 'linux-image-4.4.0-83-generic' for regex 'linux-image-.*generic'\r\nNote, selecting 'linux-image-extra-4.4.0-62-generic' for regex 'linux-image-.*generic'\r\nNote, selecting 'linux-image-4.4.0-24-generic' for regex 'linux-image-.*generic'\r\nNote, selecting 'linux-image-4.4.0-45-generic' for regex 'linux-image-.*generic'\r\nNote, selecting 'linux-image-extra-4.4.0-138-generic' for regex 'linux-image-.*generic'\r\nNote, selecting 'linux-image-4.4.0-109-generic' for regex 'linux-image-.*generic'\r\nNote, selecting 'linux-image-4.15.0-34-generic' for regex 'linux-image-.*generic'\r\nNote, selecting 'linux-image-extra-4.10.0-21-generic' for regex 'linux-image-.*generic'\r\nNote, selecting 'linux-image-4.15.0-55-generic' for regex 'linux-image-.*generic'\r\nNote, selecting 'linux-image-extra-4.13.0-39-generic' for regex 'linux-image-.*generic'\r\nNote, selecting 'linux-image-extra-4.10.0-38-generic' for regex 'linux-image-.*generic'\r\nNote, selecting 'linux-image-extra-4.8.0-56-generic' for regex 'linux-image-.*generic'\r\nNote, selecting 'linux-image-unsigned-4.15.0-24-generic' for regex 'linux-image-.*generic'\r\nNote, selecting 'linux-image-extra-4.4.0-24-generic' for regex 'linux-image-.*generic'\r\nNote, selecting 'linux-image-unsigned-4.15.0-45-generic' for regex 'linux-image-.*generic'\r\nNote, selecting 'linux-image-extra-4.4.0-45-generic' for regex 'linux-image-.*generic'\r\nNote, selecting 'linux-image-4.8.0-39-generic' for regex 'linux-image-.*generic'\r\nNote, selecting 'linux-image-4.4.0-146-generic' for regex 'linux-image-.*generic'\r\nNote, selecting 'linux-image-4.4.0-28-generic' for regex 'linux-image-.*generic'\r\nNote, selecting 'linux-image-extra-4.11.0-14-generic' for regex 'linux-image-.*generic'\r\nNote, selecting 'linux-image-extra-4.8.0-39-generic' for regex 'linux-image-.*generic'\r\nNote, selecting 'linux-image-extra-4.4.0-137-generic' for regex 'linux-image-.*generic'\r\nNote, selecting 'linux-image-4.4.0-108-generic' for regex 'linux-image-.*generic'\r\nNote, selecting 'linux-image-extra-4.13.0-21-generic' for regex 'linux-image-.*generic'\r\nNote, selecting 'linux-image-extra-4.10.0-20-generic' for regex 'linux-image-.*generic'\r\nNote, selecting 'linux-image-4.15.0-54-generic' for regex 'linux-image-.*generic'\r\nNote, selecting 'linux-image-4.4.0-145-generic' for regex 'linux-image-.*generic'\r\nNote, selecting 'linux-image-extra-4.11.0-13-generic' for regex 'linux-image-.*generic'\r\nNote, selecting 'linux-image-extra-4.4.0-81-generic' for regex 'linux-image-.*generic'\r\nNote, selecting 'linux-image-4.4.0-64-generic' for regex 'linux-image-.*generic'\r\nNote, selecting 'linux-image-4.4.0-128-generic' for regex 'linux-image-.*generic'\r\nNote, selecting 'linux-image-extra-4.13.0-41-generic' for regex 'linux-image-.*generic'\r\nNote, selecting 'linux-image-extra-4.10.0-40-generic' for regex 'linux-image-.*generic'\r\nNote, selecting 'linux-image-4.8.0-41-generic' for regex 'linux-image-.*generic'\r\nNote, selecting 'linux-image-extra-4.4.0-64-generic' for regex 'linux-image-.*generic'\r\nNote, selecting 'linux-image-4.4.0-47-generic' for regex 'linux-image-.*generic'\r\nNote, selecting 'linux-image-extra-4.4.0-119-generic' for regex 'linux-image-.*generic'\r\nNote, selecting 'linux-image-4.15.0-36-generic' for regex 'linux-image-.*generic'\r\nNote, selecting 'linux-image-extra-4.8.0-41-generic' for regex 'linux-image-.*generic'\r\nNote, selecting 'linux-image-extra-4.8.0-58-generic' for regex 'linux-image-.*generic'\r\nNote, selecting 'linux-image-unsigned-4.15.0-47-generic' for regex 'linux-image-.*generic'\r\nNote, selecting 'linux-image-extra-4.4.0-47-generic' for regex 'linux-image-.*generic'\r\nNote, selecting 'linux-image-hwe-generic-trusty' for regex 'linux-image-.*generic'\r\nNote, selecting 'linux-image-4.4.0-148-generic' for regex 'linux-image-.*generic'\r\nNote, selecting 'linux-image-4.13.0-32-generic' for regex 'linux-image-.*generic'\r\nNote, selecting 'linux-image-extra-4.4.0-101-generic' for regex 'linux-image-.*generic'\r\nNote, selecting 'linux-image-extra-4.4.0-122-generic' for regex 'linux-image-.*generic'\r\nNote, selecting 'linux-image-4.4.0-67-generic' for regex 'linux-image-.*generic'\r\nNote, selecting 'linux-image-extra-4.4.0-139-generic' for regex 'linux-image-.*generic'\r\nNote, selecting 'linux-image-extra-4.10.0-22-generic' for regex 'linux-image-.*generic'\r\nNote, selecting 'linux-image-unsigned-4.15.0-46-generic' for regex 'linux-image-.*generic'\r\nNote, selecting 'linux-image-4.4.0-130-generic' for regex 'linux-image-.*generic'\r\nNote, selecting 'linux-image-extra-4.4.0-67-generic' for regex 'linux-image-.*generic'\r\nNote, selecting 'linux-image-generic-lts-utopic' for regex 'linux-image-.*generic'\r\nNote, selecting 'linux-image-4.13.0-31-generic' for regex 'linux-image-.*generic'\r\nNote, selecting 'linux-image-4.10.0-30-generic' for regex 'linux-image-.*generic'\r\nNote, selecting 'linux-image-4.15.0-39-generic' for regex 'linux-image-.*generic'\r\nNote, selecting 'linux-image-extra-4.4.0-83-generic' for regex 'linux-image-.*generic'\r\nNote, selecting 'linux-image-extra-4.4.0-121-generic' for regex 'linux-image-.*generic'\r\nNote, selecting 'linux-image-extra-4.4.0-142-generic' for regex 'linux-image-.*generic'\r\nNote, selecting 'linux-image-unsigned-4.15.0-29-generic' for regex 'linux-image-.*generic'\r\nNote, selecting 'linux-image-4.4.0-66-generic' for regex 'linux-image-.*generic'\r\nNote, selecting 'linux-image-4.4.0-87-generic' for regex 'linux-image-.*generic'\r\nNote, selecting 'linux-image-extra-4.15.0-13-generic' for regex 'linux-image-.*generic'\r\nNote, selecting 'linux-image-extra-4.13.0-43-generic' for regex 'linux-image-.*generic'\r\nNote, selecting 'linux-image-extra-4.10.0-42-generic' for regex 'linux-image-.*generic'\r\nNote, selecting 'linux-image-extra-4.4.0-66-generic' for regex 'linux-image-.*generic'\r\nNote, selecting 'linux-image-4.4.0-150-generic' for regex 'linux-image-.*generic'\r\nNote, selecting 'linux-image-extra-4.4.0-87-generic' for regex 'linux-image-.*generic'\r\nNote, selecting 'linux-image-extra-4.4.0-104-generic' for regex 'linux-image-.*generic'\r\nNote, selecting 'linux-image-extra-4.13.0-26-generic' for regex 'linux-image-.*generic'\r\nNote, selecting 'linux-image-4.15.0-38-generic' for regex 'linux-image-.*generic'\r\nNote, selecting 'linux-image-extra-4.4.0-141-generic' for regex 'linux-image-.*generic'\r\nNote, selecting 'linux-image-extra-4.4.0-28-generic' for regex 'linux-image-.*generic'\r\nNote, selecting 'linux-image-4.4.0-112-generic' for regex 'linux-image-.*generic'\r\nNote, selecting 'linux-image-4.10.0-33-generic' for regex 'linux-image-.*generic'\r\nNote, selecting 'linux-image-4.8.0-42-generic' for regex 'linux-image-.*generic'\r\nNote, selecting 'linux-image-4.4.0-31-generic' for regex 'linux-image-.*generic'\r\nNote, selecting 'linux-image-extra-4.4.0-103-generic' for regex 'linux-image-.*generic'\r\nNote, selecting 'linux-image-extra-4.4.0-124-generic' for regex 'linux-image-.*generic'\r\nNote, selecting 'linux-image-4.15.0-20-generic' for regex 'linux-image-.*generic'\r\nNote, selecting 'linux-image-extra-4.13.0-25-generic' for regex 'linux-image-.*generic'\r\nNote, selecting 'linux-image-extra-4.10.0-24-generic' for regex 'linux-image-.*generic'\r\nNote, selecting 'linux-image-extra-4.8.0-42-generic' for regex 'linux-image-.*generic'\r\nNote, selecting 'linux-image-extra-4.4.0-140-generic' for regex 'linux-image-.*generic'\r\nNote, selecting 'linux-image-4.8.0-46-generic' for regex 'linux-image-.*generic'\r\nNote, selecting 'linux-image-unsigned-4.15.0-48-generic' for regex 'linux-image-.*generic'\r\nNote, selecting 'linux-image-4.10.0-32-generic' for regex 'linux-image-.*generic'\r\nNote, selecting 'linux-image-4.4.0-51-generic' for regex 'linux-image-.*generic'\r\nNote, selecting 'linux-image-4.4.0-89-generic' for regex 'linux-image-.*generic'\r\nNote, selecting 'linux-image-extra-4.15.0-15-generic' for regex 'linux-image-.*generic'\r\nNote, selecting 'linux-image-extra-4.13.0-45-generic' for regex 'linux-image-.*generic'\r\nNote, selecting 'linux-image-4.13.0-16-generic' for regex 'linux-image-.*generic'\r\nNote, selecting 'linux-image-unsigned-4.15.0-30-generic' for regex 'linux-image-.*generic'\r\nNote, selecting 'linux-image-unsigned-4.15.0-51-generic' for regex 'linux-image-.*generic'\r\nNote, selecting 'linux-image-4.8.0-45-generic' for regex 'linux-image-.*generic'\r\nNote, selecting 'linux-image-4.4.0-131-generic' for regex 'linux-image-.*generic'\r\nNote, selecting 'linux-image-extra-4.4.0-89-generic' for regex 'linux-image-.*generic'\r\nNote, selecting 'linux-image-4.15.0-23-generic' for regex 'linux-image-.*generic'\r\nNote, selecting 'linux-image-extra-4.10.0-27-generic' for regex 'linux-image-.*generic'\r\nNote, selecting 'linux-image-extra-4.8.0-45-generic' for regex 'linux-image-.*generic'\r\nNote, selecting 'linux-image-4.4.0-71-generic' for regex 'linux-image-.*generic'\r\nNote, selecting 'linux-image-4.10.0-14-generic' for regex 'linux-image-.*generic'\r\nNote, selecting 'linux-image-4.13.0-36-generic' for regex 'linux-image-.*generic'\r\nNote, selecting 'linux-image-4.10.0-35-generic' for regex 'linux-image-.*generic'\r\nNote, selecting 'linux-image-unsigned-4.15.0-50-generic' for regex 'linux-image-.*generic'\r\nNote, selecting 'linux-image-4.8.0-44-generic' for regex 'linux-image-.*generic'\r\nNote, selecting 'linux-image-4.4.0-151-generic' for regex 'linux-image-.*generic'\r\nNote, selecting 'linux-image-generic-lts-vivid' for regex 'linux-image-.*generic'\r\nNote, selecting 'linux-image-4.15.0-22-generic' for regex 'linux-image-.*generic'\r\nNote, selecting 'linux-image-4.15.0-43-generic' for regex 'linux-image-.*generic'\r\nNote, selecting 'linux-image-extra-4.10.0-26-generic' for regex 'linux-image-.*generic'\r\nNote, selecting 'linux-image-4.13.0-19-generic' for regex 'linux-image-.*generic'\r\nNote, selecting 'linux-image-extra-4.8.0-44-generic' for regex 'linux-image-.*generic'\r\nNote, selecting 'linux-image-unsigned-4.15.0-33-generic' for regex 'linux-image-.*generic'\r\nNote, selecting 'linux-image-4.4.0-70-generic' for regex 'linux-image-.*generic'\r\nNote, selecting 'linux-image-4.4.0-91-generic' for regex 'linux-image-.*generic'\r\nNote, selecting 'linux-image-4.4.0-134-generic' for regex 'linux-image-.*generic'\r\nNote, selecting 'linux-image-extra-4.4.0-70-generic' for regex 'linux-image-.*generic'\r\nNote, selecting 'linux-image-4.4.0-53-generic' for regex 'linux-image-.*generic'\r\nNote, selecting 'linux-image-4.15.0-42-generic' for regex 'linux-image-.*generic'\r\nNote, selecting 'linux-image-4.10.0-38-generic' for regex 'linux-image-.*generic'\r\nNote, selecting 'linux-image-unsigned-4.15.0-32-generic' for regex 'linux-image-.*generic'\r\nNote, selecting 'linux-image-extra-4.4.0-53-generic' for regex 'linux-image-.*generic'\r\nNote, selecting 'linux-image-4.4.0-133-generic' for regex 'linux-image-.*generic'\r\nNote, selecting 'linux-image-4.4.0-154-generic' for regex 'linux-image-.*generic'\r\nNote, selecting 'linux-image-extra-4.4.0-108-generic' for regex 'linux-image-.*generic'\r\nNote, selecting 'linux-image-4.4.0-116-generic' for regex 'linux-image-.*generic'\r\nNote, selecting 'linux-image-4.4.0-137-generic' for regex 'linux-image-.*generic'\r\nNote, selecting 'linux-image-4.13.0-17-generic' for regex 'linux-image-.*generic'\r\nNote, selecting 'linux-image-4.13.0-38-generic' for regex 'linux-image-.*generic'\r\nNote, selecting 'linux-image-4.10.0-37-generic' for regex 'linux-image-.*generic'\r\nNote, selecting 'linux-image-extra-4.4.0-31-generic' for regex 'linux-image-.*generic'\r\nNote, selecting 'linux-image-unsigned-4.15.0-52-generic' for regex 'linux-image-.*generic'\r\nNote, selecting 'linux-image-extra-4.4.0-128-generic' for regex 'linux-image-.*generic'\r\nNote, selecting 'linux-image-4.15.0-24-generic' for regex 'linux-image-.*generic'\r\nNote, selecting 'linux-image-unsigned-4.4.0-143-generic' for regex 'linux-image-.*generic'\r\nNote, selecting 'linux-image-4.15.0-45-generic' for regex 'linux-image-.*generic'\r\nNote, selecting 'linux-image-4.11.0-13-generic' for regex 'linux-image-.*generic'\r\nNote, selecting 'linux-image-extra-4.10.0-28-generic' for regex 'linux-image-.*generic'\r\nNote, selecting 'linux-image-extra-4.8.0-46-generic' for regex 'linux-image-.*generic'\r\nNote, selecting 'linux-image-4.4.0-72-generic' for regex 'linux-image-.*generic'\r\nNote, selecting 'linux-image-4.4.0-93-generic' for regex 'linux-image-.*generic'\r\nNote, selecting 'linux-image-generic-hwe-16.04-edge' for regex 'linux-image-.*generic'\r\nNote, selecting 'linux-image-4.13.0-37-generic' for regex 'linux-image-.*generic'\r\nNote, selecting 'linux-image-extra-4.4.0-51-generic' for regex 'linux-image-.*generic'\r\nNote, selecting 'linux-image-extra-4.4.0-72-generic' for regex 'linux-image-.*generic'\r\nNote, selecting 'linux-image-4.4.0-34-generic' for regex 'linux-image-.*generic'\r\nPackage 'linux-image-4.4.0-21-generic' is not installed, so not removed\r\nPackage 'linux-image-extra-4.4.0-21-generic' is not installed, so not removed\r\nPackage 'linux-image-4.10.0-14-generic' is not installed, so not removed\r\nPackage 'linux-image-4.10.0-19-generic' is not installed, so not removed\r\nPackage 'linux-image-4.10.0-20-generic' is not installed, so not removed\r\nPackage 'linux-image-4.10.0-21-generic' is not installed, so not removed\r\nPackage 'linux-image-4.10.0-22-generic' is not installed, so not removed\r\nPackage 'linux-image-4.10.0-24-generic' is not installed, so not removed\r\nPackage 'linux-image-4.10.0-26-generic' is not installed, so not removed\r\nPackage 'linux-image-4.10.0-27-generic' is not installed, so not removed\r\nPackage 'linux-image-4.10.0-28-generic' is not installed, so not removed\r\nPackage 'linux-image-4.10.0-30-generic' is not installed, so not removed\r\nPackage 'linux-image-4.10.0-32-generic' is not installed, so not removed\r\nPackage 'linux-image-4.10.0-33-generic' is not installed, so not removed\r\nPackage 'linux-image-4.10.0-35-generic' is not installed, so not removed\r\nPackage 'linux-image-4.10.0-37-generic' is not installed, so not removed\r\nPackage 'linux-image-4.10.0-38-generic' is not installed, so not removed\r\nPackage 'linux-image-4.10.0-40-generic' is not installed, so not removed\r\nPackage 'linux-image-4.10.0-42-generic' is not installed, so not removed\r\nPackage 'linux-image-4.11.0-13-generic' is not installed, so not removed\r\nPackage 'linux-image-4.11.0-14-generic' is not installed, so not removed\r\nPackage 'linux-image-4.13.0-16-generic' is not installed, so not removed\r\nPackage 'linux-image-4.13.0-17-generic' is not installed, so not removed\r\nPackage 'linux-image-4.13.0-19-generic' is not installed, so not removed\r\nPackage 'linux-image-4.13.0-21-generic' is not installed, so not removed\r\nPackage 'linux-image-4.13.0-25-generic' is not installed, so not removed\r\nPackage 'linux-image-4.13.0-26-generic' is not installed, so not removed\r\nPackage 'linux-image-4.13.0-31-generic' is not installed, so not removed\r\nPackage 'linux-image-4.13.0-32-generic' is not installed, so not removed\r\nPackage 'linux-image-4.13.0-36-generic' is not installed, so not removed\r\nPackage 'linux-image-4.13.0-37-generic' is not installed, so not removed\r\nPackage 'linux-image-4.13.0-38-generic' is not installed, so not removed\r\nPackage 'linux-image-4.13.0-39-generic' is not installed, so not removed\r\nPackage 'linux-image-4.13.0-41-generic' is not installed, so not removed\r\nPackage 'linux-image-4.13.0-43-generic' is not installed, so not removed\r\nPackage 'linux-image-4.13.0-45-generic' is not installed, so not removed\r\nPackage 'linux-image-4.15.0-13-generic' is not installed, so not removed\r\nPackage 'linux-image-4.15.0-15-generic' is not installed, so not removed\r\nPackage 'linux-image-4.15.0-20-generic' is not installed, so not removed\r\nPackage 'linux-image-4.15.0-22-generic' is not installed, so not removed\r\nPackage 'linux-image-4.15.0-23-generic' is not installed, so not removed\r\nPackage 'linux-image-4.15.0-24-generic' is not installed, so not removed\r\nPackage 'linux-image-4.15.0-29-generic' is not installed, so not removed\r\nPackage 'linux-image-4.15.0-30-generic' is not installed, so not removed\r\nPackage 'linux-image-4.15.0-32-generic' is not installed, so not removed\r\nPackage 'linux-image-4.15.0-33-generic' is not installed, so not removed\r\nPackage 'linux-image-4.15.0-34-generic' is not installed, so not removed\r\nPackage 'linux-image-4.15.0-36-generic' is not installed, so not removed\r\nPackage 'linux-image-4.15.0-38-generic' is not installed, so not removed\r\nPackage 'linux-image-4.15.0-39-generic' is not installed, so not removed\r\nPackage 'linux-image-4.15.0-42-generic' is not installed, so not removed\r\nPackage 'linux-image-4.15.0-43-generic' is not installed, so not removed\r\nPackage 'linux-image-4.15.0-45-generic' is not installed, so not removed\r\nPackage 'linux-image-4.15.0-46-generic' is not installed, so not removed\r\nPackage 'linux-image-4.15.0-47-generic' is not installed, so not removed\r\nPackage 'linux-image-4.15.0-48-generic' is not installed, so not removed\r\nPackage 'linux-image-4.15.0-50-generic' is not installed, so not removed\r\nPackage 'linux-image-4.15.0-51-generic' is not installed, so not removed\r\nPackage 'linux-image-4.15.0-52-generic' is not installed, so not removed\r\nPackage 'linux-image-4.15.0-54-generic' is not installed, so not removed\r\nPackage 'linux-image-4.15.0-55-generic' is not installed, so not removed\r\nPackage 'linux-image-4.4.0-101-generic' is not installed, so not removed\r\nPackage 'linux-image-4.4.0-103-generic' is not installed, so not removed\r\nPackage 'linux-image-4.4.0-104-generic' is not installed, so not removed\r\nPackage 'linux-image-4.4.0-108-generic' is not installed, so not removed\r\nPackage 'linux-image-4.4.0-109-generic' is not installed, so not removed\r\nPackage 'linux-image-4.4.0-112-generic' is not installed, so not removed\r\nPackage 'linux-image-4.4.0-116-generic' is not installed, so not removed\r\nPackage 'linux-image-4.4.0-119-generic' is not installed, so not removed\r\nPackage 'linux-image-4.4.0-121-generic' is not installed, so not removed\r\nPackage 'linux-image-4.4.0-122-generic' is not installed, so not removed\r\nPackage 'linux-image-4.4.0-124-generic' is not installed, so not removed\r\nPackage 'linux-image-4.4.0-127-generic' is not installed, so not removed\r\nPackage 'linux-image-4.4.0-128-generic' is not installed, so not removed\r\nPackage 'linux-image-4.4.0-130-generic' is not installed, so not removed\r\nPackage 'linux-image-4.4.0-131-generic' is not installed, so not removed\r\nPackage 'linux-image-4.4.0-133-generic' is not installed, so not removed\r\nPackage 'linux-image-4.4.0-134-generic' is not installed, so not removed\r\nPackage 'linux-image-4.4.0-135-generic' is not installed, so not removed\r\nPackage 'linux-image-4.4.0-137-generic' is not installed, so not removed\r\nPackage 'linux-image-4.4.0-138-generic' is not installed, so not removed\r\nPackage 'linux-image-4.4.0-139-generic' is not installed, so not removed\r\nPackage 'linux-image-4.4.0-140-generic' is not installed, so not removed\r\nPackage 'linux-image-4.4.0-141-generic' is not installed, so not removed\r\nPackage 'linux-image-4.4.0-142-generic' is not installed, so not removed\r\nPackage 'linux-image-4.4.0-143-generic' is not installed, so not removed\r\nPackage 'linux-image-4.4.0-145-generic' is not installed, so not removed\r\nPackage 'linux-image-4.4.0-146-generic' is not installed, so not removed\r\nPackage 'linux-image-4.4.0-148-generic' is not installed, so not removed\r\nPackage 'linux-image-4.4.0-151-generic' is not installed, so not removed\r\nPackage 'linux-image-4.4.0-154-generic' is not installed, so not removed\r\nPackage 'linux-image-4.4.0-22-generic' is not installed, so not removed\r\nPackage 'linux-image-4.4.0-24-generic' is not installed, so not removed\r\nPackage 'linux-image-4.4.0-28-generic' is not installed, so not removed\r\nPackage 'linux-image-4.4.0-31-generic' is not installed, so not removed\r\nPackage 'linux-image-4.4.0-34-generic' is not installed, so not removed\r\nPackage 'linux-image-4.4.0-36-generic' is not installed, so not removed\r\nPackage 'linux-image-4.4.0-38-generic' is not installed, so not removed\r\nPackage 'linux-image-4.4.0-42-generic' is not installed, so not removed\r\nPackage 'linux-image-4.4.0-43-generic' is not installed, so not removed\r\nPackage 'linux-image-4.4.0-45-generic' is not installed, so not removed\r\nPackage 'linux-image-4.4.0-47-generic' is not installed, so not removed\r\nPackage 'linux-image-4.4.0-51-generic' is not installed, so not removed\r\nPackage 'linux-image-4.4.0-53-generic' is not installed, so not removed\r\nPackage 'linux-image-4.4.0-57-generic' is not installed, so not removed\r\nPackage 'linux-image-4.4.0-59-generic' is not installed, so not removed\r\nPackage 'linux-image-4.4.0-62-generic' is not installed, so not removed\r\nPackage 'linux-image-4.4.0-63-generic' is not installed, so not removed\r\nPackage 'linux-image-4.4.0-64-generic' is not installed, so not removed\r\nPackage 'linux-image-4.4.0-66-generic' is not installed, so not removed\r\nPackage 'linux-image-4.4.0-67-generic' is not installed, so not removed\r\nPackage 'linux-image-4.4.0-70-generic' is not installed, so not removed\r\nPackage 'linux-image-4.4.0-71-generic' is not installed, so not removed\r\nPackage 'linux-image-4.4.0-72-generic' is not installed, so not removed\r\nPackage 'linux-image-4.4.0-75-generic' is not installed, so not removed\r\nPackage 'linux-image-4.4.0-77-generic' is not installed, so not removed\r\nPackage 'linux-image-4.4.0-78-generic' is not installed, so not removed\r\nPackage 'linux-image-4.4.0-79-generic' is not installed, so not removed\r\nPackage 'linux-image-4.4.0-81-generic' is not installed, so not removed\r\nPackage 'linux-image-4.4.0-83-generic' is not installed, so not removed\r\nPackage 'linux-image-4.4.0-87-generic' is not installed, so not removed\r\nPackage 'linux-image-4.4.0-89-generic' is not installed, so not removed\r\nPackage 'linux-image-4.4.0-91-generic' is not installed, so not removed\r\nPackage 'linux-image-4.4.0-92-generic' is not installed, so not removed\r\nPackage 'linux-image-4.4.0-93-generic' is not installed, so not removed\r\nPackage 'linux-image-4.4.0-96-generic' is not installed, so not removed\r\nPackage 'linux-image-4.4.0-97-generic' is not installed, so not removed\r\nPackage 'linux-image-4.4.0-98-generic' is not installed, so not removed\r\nPackage 'linux-image-4.8.0-34-generic' is not installed, so not removed\r\nPackage 'linux-image-4.8.0-36-generic' is not installed, so not removed\r\nPackage 'linux-image-4.8.0-39-generic' is not installed, so not removed\r\nPackage 'linux-image-4.8.0-41-generic' is not installed, so not removed\r\nPackage 'linux-image-4.8.0-42-generic' is not installed, so not removed\r\nPackage 'linux-image-4.8.0-44-generic' is not installed, so not removed\r\nPackage 'linux-image-4.8.0-45-generic' is not installed, so not removed\r\nPackage 'linux-image-4.8.0-46-generic' is not installed, so not removed\r\nPackage 'linux-image-4.8.0-49-generic' is not installed, so not removed\r\nPackage 'linux-image-4.8.0-51-generic' is not installed, so not removed\r\nPackage 'linux-image-4.8.0-52-generic' is not installed, so not removed\r\nPackage 'linux-image-4.8.0-53-generic' is not installed, so not removed\r\nPackage 'linux-image-4.8.0-54-generic' is not installed, so not removed\r\nPackage 'linux-image-4.8.0-56-generic' is not installed, so not removed\r\nPackage 'linux-image-4.8.0-58-generic' is not installed, so not removed\r\nPackage 'linux-image-extra-4.10.0-14-generic' is not installed, so not removed\r\nPackage 'linux-image-extra-4.10.0-19-generic' is not installed, so not removed\r\nPackage 'linux-image-extra-4.10.0-20-generic' is not installed, so not removed\r\nPackage 'linux-image-extra-4.10.0-21-generic' is not installed, so not removed\r\nPackage 'linux-image-extra-4.10.0-22-generic' is not installed, so not removed\r\nPackage 'linux-image-extra-4.10.0-24-generic' is not installed, so not removed\r\nPackage 'linux-image-extra-4.10.0-26-generic' is not installed, so not removed\r\nPackage 'linux-image-extra-4.10.0-27-generic' is not installed, so not removed\r\nPackage 'linux-image-extra-4.10.0-28-generic' is not installed, so not removed\r\nPackage 'linux-image-extra-4.10.0-30-generic' is not installed, so not removed\r\nPackage 'linux-image-extra-4.10.0-32-generic' is not installed, so not removed\r\nPackage 'linux-image-extra-4.10.0-33-generic' is not installed, so not removed\r\nPackage 'linux-image-extra-4.10.0-35-generic' is not installed, so not removed\r\nPackage 'linux-image-extra-4.10.0-37-generic' is not installed, so not removed\r\nPackage 'linux-image-extra-4.10.0-38-generic' is not installed, so not removed\r\nPackage 'linux-image-extra-4.10.0-40-generic' is not installed, so not removed\r\nPackage 'linux-image-extra-4.10.0-42-generic' is not installed, so not removed\r\nPackage 'linux-image-extra-4.11.0-13-generic' is not installed, so not removed\r\nPackage 'linux-image-extra-4.11.0-14-generic' is not installed, so not removed\r\nPackage 'linux-image-extra-4.13.0-16-generic' is not installed, so not removed\r\nPackage 'linux-image-extra-4.13.0-17-generic' is not installed, so not removed\r\nPackage 'linux-image-extra-4.13.0-19-generic' is not installed, so not removed\r\nPackage 'linux-image-extra-4.13.0-21-generic' is not installed, so not removed\r\nPackage 'linux-image-extra-4.13.0-25-generic' is not installed, so not removed\r\nPackage 'linux-image-extra-4.13.0-26-generic' is not installed, so not removed\r\nPackage 'linux-image-extra-4.13.0-31-generic' is not installed, so not removed\r\nPackage 'linux-image-extra-4.13.0-32-generic' is not installed, so not removed\r\nPackage 'linux-image-extra-4.13.0-36-generic' is not installed, so not removed\r\nPackage 'linux-image-extra-4.13.0-37-generic' is not installed, so not removed\r\nPackage 'linux-image-extra-4.13.0-38-generic' is not installed, so not removed\r\nPackage 'linux-image-extra-4.13.0-39-generic' is not installed, so not removed\r\nPackage 'linux-image-extra-4.13.0-41-generic' is not installed, so not removed\r\nPackage 'linux-image-extra-4.13.0-43-generic' is not installed, so not removed\r\nPackage 'linux-image-extra-4.13.0-45-generic' is not installed, so not removed\r\nPackage 'linux-image-extra-4.15.0-13-generic' is not installed, so not removed\r\nPackage 'linux-image-extra-4.15.0-15-generic' is not installed, so not removed\r\nPackage 'linux-image-extra-4.4.0-101-generic' is not installed, so not removed\r\nPackage 'linux-image-extra-4.4.0-103-generic' is not installed, so not removed\r\nPackage 'linux-image-extra-4.4.0-104-generic' is not installed, so not removed\r\nPackage 'linux-image-extra-4.4.0-108-generic' is not installed, so not removed\r\nPackage 'linux-image-extra-4.4.0-109-generic' is not installed, so not removed\r\nPackage 'linux-image-extra-4.4.0-112-generic' is not installed, so not removed\r\nPackage 'linux-image-extra-4.4.0-116-generic' is not installed, so not removed\r\nPackage 'linux-image-extra-4.4.0-119-generic' is not installed, so not removed\r\nPackage 'linux-image-extra-4.4.0-121-generic' is not installed, so not removed\r\nPackage 'linux-image-extra-4.4.0-122-generic' is not installed, so not removed\r\nPackage 'linux-image-extra-4.4.0-124-generic' is not installed, so not removed\r\nPackage 'linux-image-extra-4.4.0-127-generic' is not installed, so not removed\r\nPackage 'linux-image-extra-4.4.0-128-generic' is not installed, so not removed\r\nPackage 'linux-image-extra-4.4.0-130-generic' is not installed, so not removed\r\nPackage 'linux-image-extra-4.4.0-131-generic' is not installed, so not removed\r\nPackage 'linux-image-extra-4.4.0-133-generic' is not installed, so not removed\r\nPackage 'linux-image-extra-4.4.0-134-generic' is not installed, so not removed\r\nPackage 'linux-image-extra-4.4.0-135-generic' is not installed, so not removed\r\nPackage 'linux-image-extra-4.4.0-137-generic' is not installed, so not removed\r\nPackage 'linux-image-extra-4.4.0-138-generic' is not installed, so not removed\r\nPackage 'linux-image-extra-4.4.0-139-generic' is not installed, so not removed\r\nPackage 'linux-image-extra-4.4.0-140-generic' is not installed, so not removed\r\nPackage 'linux-image-extra-4.4.0-141-generic' is not installed, so not removed\r\nPackage 'linux-image-extra-4.4.0-142-generic' is not installed, so not removed\r\nPackage 'linux-image-extra-4.4.0-22-generic' is not installed, so not removed\r\nPackage 'linux-image-extra-4.4.0-24-generic' is not installed, so not removed\r\nPackage 'linux-image-extra-4.4.0-28-generic' is not installed, so not removed\r\nPackage 'linux-image-extra-4.4.0-31-generic' is not installed, so not removed\r\nPackage 'linux-image-extra-4.4.0-34-generic' is not installed, so not removed\r\nPackage 'linux-image-extra-4.4.0-36-generic' is not installed, so not removed\r\nPackage 'linux-image-extra-4.4.0-38-generic' is not installed, so not removed\r\nPackage 'linux-image-extra-4.4.0-42-generic' is not installed, so not removed\r\nPackage 'linux-image-extra-4.4.0-43-generic' is not installed, so not removed\r\nPackage 'linux-image-extra-4.4.0-45-generic' is not installed, so not removed\r\nPackage 'linux-image-extra-4.4.0-47-generic' is not installed, so not removed\r\nPackage 'linux-image-extra-4.4.0-51-generic' is not installed, so not removed\r\nPackage 'linux-image-extra-4.4.0-53-generic' is not installed, so not removed\r\nPackage 'linux-image-extra-4.4.0-57-generic' is not installed, so not removed\r\nPackage 'linux-image-extra-4.4.0-59-generic' is not installed, so not removed\r\nPackage 'linux-image-extra-4.4.0-62-generic' is not installed, so not removed\r\nPackage 'linux-image-extra-4.4.0-63-generic' is not installed, so not removed\r\nPackage 'linux-image-extra-4.4.0-64-generic' is not installed, so not removed\r\nPackage 'linux-image-extra-4.4.0-66-generic' is not installed, so not removed\r\nPackage 'linux-image-extra-4.4.0-67-generic' is not installed, so not removed\r\nPackage 'linux-image-extra-4.4.0-70-generic' is not installed, so not removed\r\nPackage 'linux-image-extra-4.4.0-71-generic' is not installed, so not removed\r\nPackage 'linux-image-extra-4.4.0-72-generic' is not installed, so not removed\r\nPackage 'linux-image-extra-4.4.0-75-generic' is not installed, so not removed\r\nPackage 'linux-image-extra-4.4.0-77-generic' is not installed, so not removed\r\nPackage 'linux-image-extra-4.4.0-78-generic' is not installed, so not removed\r\nPackage 'linux-image-extra-4.4.0-79-generic' is not installed, so not removed\r\nPackage 'linux-image-extra-4.4.0-81-generic' is not installed, so not removed\r\nPackage 'linux-image-extra-4.4.0-83-generic' is not installed, so not removed\r\nPackage 'linux-image-extra-4.4.0-87-generic' is not installed, so not removed\r\nPackage 'linux-image-extra-4.4.0-89-generic' is not installed, so not removed\r\nPackage 'linux-image-extra-4.4.0-91-generic' is not installed, so not removed\r\nPackage 'linux-image-extra-4.4.0-92-generic' is not installed, so not removed\r\nPackage 'linux-image-extra-4.4.0-93-generic' is not installed, so not removed\r\nPackage 'linux-image-extra-4.4.0-96-generic' is not installed, so not removed\r\nPackage 'linux-image-extra-4.4.0-97-generic' is not installed, so not removed\r\nPackage 'linux-image-extra-4.4.0-98-generic' is not installed, so not removed\r\nPackage 'linux-image-extra-4.8.0-34-generic' is not installed, so not removed\r\nPackage 'linux-image-extra-4.8.0-36-generic' is not installed, so not removed\r\nPackage 'linux-image-extra-4.8.0-39-generic' is not installed, so not removed\r\nPackage 'linux-image-extra-4.8.0-41-generic' is not installed, so not removed\r\nPackage 'linux-image-extra-4.8.0-42-generic' is not installed, so not removed\r\nPackage 'linux-image-extra-4.8.0-44-generic' is not installed, so not removed\r\nPackage 'linux-image-extra-4.8.0-45-generic' is not installed, so not removed\r\nPackage 'linux-image-extra-4.8.0-46-generic' is not installed, so not removed\r\nPackage 'linux-image-extra-4.8.0-49-generic' is not installed, so not removed\r\nPackage 'linux-image-extra-4.8.0-51-generic' is not installed, so not removed\r\nPackage 'linux-image-extra-4.8.0-52-generic' is not installed, so not removed\r\nPackage 'linux-image-extra-4.8.0-53-generic' is not installed, so not removed\r\nPackage 'linux-image-extra-4.8.0-54-generic' is not installed, so not removed\r\nPackage 'linux-image-extra-4.8.0-56-generic' is not installed, so not removed\r\nPackage 'linux-image-extra-4.8.0-58-generic' is not installed, so not removed\r\nPackage 'linux-image-generic' is not installed, so not removed\r\nPackage 'linux-image-generic-hwe-16.04' is not installed, so not removed\r\nPackage 'linux-image-generic-hwe-16.04-edge' is not installed, so not removed\r\nPackage 'linux-image-generic-lts-utopic' is not installed, so not removed\r\nPackage 'linux-image-generic-lts-vivid' is not installed, so not removed\r\nPackage 'linux-image-generic-lts-wily' is not installed, so not removed\r\nPackage 'linux-image-generic-lts-xenial' is not installed, so not removed\r\nPackage 'linux-image-hwe-generic-trusty' is not installed, so not removed\r\nPackage 'linux-image-unsigned-4.15.0-20-generic' is not installed, so not removed\r\nPackage 'linux-image-unsigned-4.15.0-22-generic' is not installed, so not removed\r\nPackage 'linux-image-unsigned-4.15.0-23-generic' is not installed, so not removed\r\nPackage 'linux-image-unsigned-4.15.0-24-generic' is not installed, so not removed\r\nPackage 'linux-image-unsigned-4.15.0-29-generic' is not installed, so not removed\r\nPackage 'linux-image-unsigned-4.15.0-30-generic' is not installed, so not removed\r\nPackage 'linux-image-unsigned-4.15.0-32-generic' is not installed, so not removed\r\nPackage 'linux-image-unsigned-4.15.0-33-generic' is not installed, so not removed\r\nPackage 'linux-image-unsigned-4.15.0-34-generic' is not installed, so not removed\r\nPackage 'linux-image-unsigned-4.15.0-36-generic' is not installed, so not removed\r\nPackage 'linux-image-unsigned-4.15.0-38-generic' is not installed, so not removed\r\nPackage 'linux-image-unsigned-4.15.0-39-generic' is not installed, so not removed\r\nPackage 'linux-image-unsigned-4.15.0-42-generic' is not installed, so not removed\r\nPackage 'linux-image-unsigned-4.15.0-43-generic' is not installed, so not removed\r\nPackage 'linux-image-unsigned-4.15.0-45-generic' is not installed, so not removed\r\nPackage 'linux-image-unsigned-4.15.0-46-generic' is not installed, so not removed\r\nPackage 'linux-image-unsigned-4.15.0-47-generic' is not installed, so not removed\r\nPackage 'linux-image-unsigned-4.15.0-48-generic' is not installed, so not removed\r\nPackage 'linux-image-unsigned-4.15.0-50-generic' is not installed, so not removed\r\nPackage 'linux-image-unsigned-4.15.0-51-generic' is not installed, so not removed\r\nPackage 'linux-image-unsigned-4.15.0-52-generic' is not installed, so not removed\r\nPackage 'linux-image-unsigned-4.15.0-54-generic' is not installed, so not removed\r\nPackage 'linux-image-unsigned-4.15.0-55-generic' is not installed, so not removed\r\nPackage 'linux-image-unsigned-4.4.0-143-generic' is not installed, so not removed\r\nPackage 'linux-image-unsigned-4.4.0-145-generic' is not installed, so not removed\r\nPackage 'linux-image-unsigned-4.4.0-146-generic' is not installed, so not removed\r\nPackage 'linux-image-unsigned-4.4.0-148-generic' is not installed, so not removed\r\nPackage 'linux-image-unsigned-4.4.0-150-generic' is not installed, so not removed\r\nPackage 'linux-image-unsigned-4.4.0-151-generic' is not installed, so not removed\r\nPackage 'linux-image-unsigned-4.4.0-154-generic' is not installed, so not removed\r\nThe following packages were automatically installed and are no longer required:\r\n  amd64-microcode crda iw libnl-3-200 libnl-genl-3-200 wireless-regdb\r\nUse 'sudo apt autoremove' to remove them.\r\nThe following packages will be REMOVED:\r\n  linux-image-4.4.0-150-generic\r\n0 upgraded, 0 newly installed, 1 to remove and 23 not upgraded.\r\nAfter this operation, 7,226 kB disk space will be freed.\r\n(Reading database ... 42901 files and directories currently installed.)\r\nRemoving linux-image-4.4.0-150-generic (4.4.0-150.176) ...\r\nFailed to substitute package name in title: 10 at /usr/bin/linux-check-removal line 102, <STDIN> line 1.\r\ndpkg: error processing package linux-image-4.4.0-150-generic (--remove):\r\n subprocess installed pre-removal script returned error exit status 255\r\nErrors were encountered while processing:\r\n linux-image-4.4.0-150-generic\r\nE: Sub-process /usr/bin/dpkg returned an error code (1)\r\nvagrant@app-staging:~$ echo $?\r\n100\r\nvagrant@app-staging:~$ uname -r\r\n4.4.0-150-generic\r\n```\r\n\r\n</details>\r\n\r\n## Comments\r\n\r\nThe package being removed is the currently running kernel. So far, we've observed this problem in Vagrant. Does it also occur on hardware? Worth checking. ", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/4637/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/4637/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/4618", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/4618/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/4618/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/4618/events", "html_url": "https://github.com/freedomofpress/securedrop/issues/4618", "id": 467545479, "node_id": "MDU6SXNzdWU0Njc1NDU0Nzk=", "number": 4618, "title": "Unhandled exception in Journalist interface when source no longer exists", "user": {"login": "emkll", "id": 15223328, "node_id": "MDQ6VXNlcjE1MjIzMzI4", "avatar_url": "https://avatars.githubusercontent.com/u/15223328?v=4", "gravatar_id": "", "url": "https://api.github.com/users/emkll", "html_url": "https://github.com/emkll", "followers_url": "https://api.github.com/users/emkll/followers", "following_url": "https://api.github.com/users/emkll/following{/other_user}", "gists_url": "https://api.github.com/users/emkll/gists{/gist_id}", "starred_url": "https://api.github.com/users/emkll/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/emkll/subscriptions", "organizations_url": "https://api.github.com/users/emkll/orgs", "repos_url": "https://api.github.com/users/emkll/repos", "events_url": "https://api.github.com/users/emkll/events{/privacy}", "received_events_url": "https://api.github.com/users/emkll/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}, {"id": 1106060106, "node_id": "MDU6TGFiZWwxMTA2MDYwMTA2", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/needs/reproducing", "name": "needs/reproducing", "color": "3dce6b", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2019-07-12T18:29:48Z", "updated_at": "2020-07-21T13:45:46Z", "closed_at": "2020-07-21T13:45:46Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "## Description\r\n\r\nThere appear to be unhandled exceptions when likely introduced when error handlers wher\r\n\r\n## Steps to Reproduce\r\n\r\n- In journalist interface, navigate to a source page in browser tab 1\r\n- In browser tab 2, navigate to same source, and delete same source\r\n- Refresh the page in browser tab 1\r\n- Observe error 500\r\n\r\n\r\n## Expected Behavior\r\n\r\n- Server should return `404`\r\n\r\n## Actual Behavior\r\n\r\n- server returns `500`\r\n\r\n## Comments\r\n\r\nIt seems related to an apparmor issue, the application is trying to redirect to error.html:\r\n\r\njournalist-error.log:\r\n```\r\n[Fri Jul 12 11:32:13.705153 2019] [wsgi:error] [pid 961:tid 4014428063488] ERROR:flask.app:Exception on /favicon.ico [GET]\r\n[Fri Jul 12 11:32:13.705183 2019] [wsgi:error] [pid 961:tid 4014428063488] Traceback (most recent call last):\r\n[Fri Jul 12 11:32:13.705200 2019] [wsgi:error] [pid 961:tid 4014428063488]   File \"/usr/local/lib/python2.7/dist-packages/flask/app.py\", line 2292, in wsgi_app\r\n[Fri Jul 12 11:32:13.705206 2019] [wsgi:error] [pid 961:tid 4014428063488]     response = self.full_dispatch_request()\r\n[Fri Jul 12 11:32:13.705211 2019] [wsgi:error] [pid 961:tid 4014428063488]   File \"/usr/local/lib/python2.7/dist-packages/flask/app.py\", line 1815, in full_dispatch_request\r\n[Fri Jul 12 11:32:13.705215 2019] [wsgi:error] [pid 961:tid 4014428063488]     rv = self.handle_user_exception(e)\r\n[Fri Jul 12 11:32:13.705220 2019] [wsgi:error] [pid 961:tid 4014428063488]   File \"/usr/local/lib/python2.7/dist-packages/flask/app.py\", line 1713, in handle_user_exception\r\n[Fri Jul 12 11:32:13.705225 2019] [wsgi:error] [pid 961:tid 4014428063488]     return self.handle_http_exception(e)\r\n[Fri Jul 12 11:32:13.705229 2019] [wsgi:error] [pid 961:tid 4014428063488]   File \"/usr/local/lib/python2.7/dist-packages/flask/app.py\", line 1644, in handle_http_exception\r\n[Fri Jul 12 11:32:13.706406 2019] [wsgi:error] [pid 961:tid 4014428063488]     return handler(e)\r\n[Fri Jul 12 11:32:13.706415 2019] [wsgi:error] [pid 961:tid 4014428063488]   File \"/var/www/securedrop/journalist_app/__init__.py\", line 104, in _handle_http_exception\r\n[Fri Jul 12 11:32:13.706421 2019] [wsgi:error] [pid 961:tid 4014428063488]     return render_template('error.html', error=error), error.code\r\n[Fri Jul 12 11:32:13.706426 2019] [wsgi:error] [pid 961:tid 4014428063488]   File \"/usr/local/lib/python2.7/dist-packages/flask/templating.py\", line 134, in render_template\r\n[Fri Jul 12 11:32:13.706431 2019] [wsgi:error] [pid 961:tid 4014428063488]     return _render(ctx.app.jinja_env.get_or_select_template(template_name_or_list),\r\n[Fri Jul 12 11:32:13.706436 2019] [wsgi:error] [pid 961:tid 4014428063488]   File \"/usr/local/lib/python2.7/dist-packages/jinja2/environment.py\", line 869, in get_or_select_template\r\n[Fri Jul 12 11:32:13.706441 2019] [wsgi:error] [pid 961:tid 4014428063488]     return self.get_template(template_name_or_list, parent, globals)\r\n[Fri Jul 12 11:32:13.706446 2019] [wsgi:error] [pid 961:tid 4014428063488]   File \"/usr/local/lib/python2.7/dist-packages/jinja2/environment.py\", line 830, in get_template\r\n[Fri Jul 12 11:32:13.706451 2019] [wsgi:error] [pid 961:tid 4014428063488]     return self._load_template(name, self.make_globals(globals))\r\n[Fri Jul 12 11:32:13.706456 2019] [wsgi:error] [pid 961:tid 4014428063488]   File \"/usr/local/lib/python2.7/dist-packages/jinja2/environment.py\", line 804, in _load_template\r\n[Fri Jul 12 11:32:13.706461 2019] [wsgi:error] [pid 961:tid 4014428063488]     template = self.loader.load(self, name, globals)\r\n[Fri Jul 12 11:32:13.706466 2019] [wsgi:error] [pid 961:tid 4014428063488]   File \"/usr/local/lib/python2.7/dist-packages/jinja2/loaders.py\", line 113, in load\r\n[Fri Jul 12 11:32:13.706471 2019] [wsgi:error] [pid 961:tid 4014428063488]     source, filename, uptodate = self.get_source(environment, name)\r\n[Fri Jul 12 11:32:13.706476 2019] [wsgi:error] [pid 961:tid 4014428063488]   File \"/usr/local/lib/python2.7/dist-packages/flask/templating.py\", line 58, in get_source\r\n[Fri Jul 12 11:32:13.706482 2019] [wsgi:error] [pid 961:tid 4014428063488]     return self._get_source_fast(environment, template)\r\n[Fri Jul 12 11:32:13.706486 2019] [wsgi:error] [pid 961:tid 4014428063488]   File \"/usr/local/lib/python2.7/dist-packages/flask/templating.py\", line 83, in _get_source_fast\r\n[Fri Jul 12 11:32:13.706492 2019] [wsgi:error] [pid 961:tid 4014428063488]     return loader.get_source(environment, template)\r\n[Fri Jul 12 11:32:13.706496 2019] [wsgi:error] [pid 961:tid 4014428063488]   File \"/usr/local/lib/python2.7/dist-packages/jinja2/loaders.py\", line 171, in get_source\r\n[Fri Jul 12 11:32:13.706501 2019] [wsgi:error] [pid 961:tid 4014428063488]     f = open_if_exists(filename)\r\n[Fri Jul 12 11:32:13.706506 2019] [wsgi:error] [pid 961:tid 4014428063488]   File \"/usr/local/lib/python2.7/dist-packages/jinja2/utils.py\", line 154, in open_if_exists\r\n[Fri Jul 12 11:32:13.706511 2019] [wsgi:error] [pid 961:tid 4014428063488]     return open(filename, mode)\r\n[Fri Jul 12 11:32:13.706523 2019] [wsgi:error] [pid 961:tid 4014428063488] IOError: [Errno 13] Permission denied: '/var/www/securedrop/journalist_templates/error.html'\r\n[Fri Jul 12 11:32:13.706852 2019] [wsgi:error] [pid 961:tid 4014428063488] [remote 127.0.0.1:17852] mod_wsgi (pid=961): Exception occurred processing WSGI script '/var/www/journalist.wsgi'.\r\n[Fri Jul 12 11:32:13.706894 2019] [wsgi:error] [pid 961:tid 4014428063488] [remote 127.0.0.1:17852] Traceback (most recent call last):\r\n[Fri Jul 12 11:32:13.706913 2019] [wsgi:error] [pid 961:tid 4014428063488] [remote 127.0.0.1:17852]   File \"/usr/local/lib/python2.7/dist-packages/flask/app.py\", line 2309, in __call__\r\n[Fri Jul 12 11:32:13.706941 2019] [wsgi:error] [pid 961:tid 4014428063488] [remote 127.0.0.1:17852]     return self.wsgi_app(environ, start_response)\r\n[Fri Jul 12 11:32:13.706952 2019] [wsgi:error] [pid 961:tid 4014428063488] [remote 127.0.0.1:17852]   File \"/usr/local/lib/python2.7/dist-packages/flask/app.py\", line 2295, in wsgi_app\r\n[Fri Jul 12 11:32:13.706968 2019] [wsgi:error] [pid 961:tid 4014428063488] [remote 127.0.0.1:17852]     response = self.handle_exception(e)\r\n[Fri Jul 12 11:32:13.706977 2019] [wsgi:error] [pid 961:tid 4014428063488] [remote 127.0.0.1:17852]   File \"/usr/local/lib/python2.7/dist-packages/flask/app.py\", line 1748, in handle_exception\r\n[Fri Jul 12 11:32:13.706993 2019] [wsgi:error] [pid 961:tid 4014428063488] [remote 127.0.0.1:17852]     return self.finalize_request(handler(e), from_error_handler=True)\r\n[Fri Jul 12 11:32:13.707002 2019] [wsgi:error] [pid 961:tid 4014428063488] [remote 127.0.0.1:17852]   File \"/var/www/securedrop/journalist_app/__init__.py\", line 100, in _handle_http_exception\r\n[Fri Jul 12 11:32:13.707018 2019] [wsgi:error] [pid 961:tid 4014428063488] [remote 127.0.0.1:17852]     handler = list(app.error_handler_spec['api'][error.code].values())[0]\r\n[Fri Jul 12 11:32:13.707035 2019] [wsgi:error] [pid 961:tid 4014428063488] [remote 127.0.0.1:17852] AttributeError: 'exceptions.IOError' object has no attribute 'code'\r\n```\r\nkern.log:\r\n```\r\nJul 12 11:32:13 app kernel: [ 1855.913553] audit: type=1400 audit(1562945533.700:15): apparmor=\"DENIED\" operation=\"open\" profile=\"/usr/sbin/apache2\" name=\"/var/www/securedrop/journalist_templates/error.html\" pid=1115 comm=\"apache2\" requested_mask=\"r\" denied_mask=\"r\" fsuid=33 ouid=33\r\n```", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/4618/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/4618/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/4562", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/4562/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/4562/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/4562/events", "html_url": "https://github.com/freedomofpress/securedrop/issues/4562", "id": 462136902, "node_id": "MDU6SXNzdWU0NjIxMzY5MDI=", "number": 4562, "title": "Weblate source string links are broken", "user": {"login": "redshiftzero", "id": 7832803, "node_id": "MDQ6VXNlcjc4MzI4MDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7832803?v=4", "gravatar_id": "", "url": "https://api.github.com/users/redshiftzero", "html_url": "https://github.com/redshiftzero", "followers_url": "https://api.github.com/users/redshiftzero/followers", "following_url": "https://api.github.com/users/redshiftzero/following{/other_user}", "gists_url": "https://api.github.com/users/redshiftzero/gists{/gist_id}", "starred_url": "https://api.github.com/users/redshiftzero/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/redshiftzero/subscriptions", "organizations_url": "https://api.github.com/users/redshiftzero/orgs", "repos_url": "https://api.github.com/users/redshiftzero/repos", "events_url": "https://api.github.com/users/redshiftzero/events{/privacy}", "received_events_url": "https://api.github.com/users/redshiftzero/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}, {"id": 652906953, "node_id": "MDU6TGFiZWw2NTI5MDY5NTM=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/i18n", "name": "i18n", "color": "d4c5f9", "default": false, "description": "Anything related to translation or internationalization of SecureDrop"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2019-06-28T17:30:15Z", "updated_at": "2019-06-28T19:35:10Z", "closed_at": "2019-06-28T19:35:10Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "## Description\r\n\r\n@comradekingu [noticed](https://github.com/freedomofpress/securedrop-i18n/pull/1) that the links to our source strings are 404ing. This is useful for translators who might want to make PRs with source string changes, or who might want to see the context in the template for that string. \r\n\r\nThe links are missing a `securedrop/` folder, we should investigate why this is broken and resolve. ", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/4562/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/4562/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/4558", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/4558/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/4558/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/4558/events", "html_url": "https://github.com/freedomofpress/securedrop/issues/4558", "id": 461322522, "node_id": "MDU6SXNzdWU0NjEzMjI1MjI=", "number": 4558, "title": "Fonts in screenshots generated by functional tests are broken", "user": {"login": "eloquence", "id": 213636, "node_id": "MDQ6VXNlcjIxMzYzNg==", "avatar_url": "https://avatars.githubusercontent.com/u/213636?v=4", "gravatar_id": "", "url": "https://api.github.com/users/eloquence", "html_url": "https://github.com/eloquence", "followers_url": "https://api.github.com/users/eloquence/followers", "following_url": "https://api.github.com/users/eloquence/following{/other_user}", "gists_url": "https://api.github.com/users/eloquence/gists{/gist_id}", "starred_url": "https://api.github.com/users/eloquence/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/eloquence/subscriptions", "organizations_url": "https://api.github.com/users/eloquence/orgs", "repos_url": "https://api.github.com/users/eloquence/repos", "events_url": "https://api.github.com/users/eloquence/events{/privacy}", "received_events_url": "https://api.github.com/users/eloquence/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}, {"id": 616447641, "node_id": "MDU6TGFiZWw2MTY0NDc2NDE=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/development%20env", "name": "development env", "color": "bfd4f2", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2019-06-27T05:32:32Z", "updated_at": "2019-06-28T16:56:04Z", "closed_at": "2019-06-28T16:56:04Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "The functional test run produces screenshot artifacts in `tests/pageslayout/screenshots` that can be used for the documentation. However, the fonts in those screenshots are currently broken (see below).\r\n\r\nA fix currently exists in this remote branch:\r\nhttps://github.com/rmol/securedrop/commit/6f493c745a8e0532c7c112f2a5949627875ec0fd\r\n\r\n![source-login](https://user-images.githubusercontent.com/213636/60239308-09320200-9862-11e9-9de7-a62804973900.png)\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/4558/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/4558/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/4521", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/4521/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/4521/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/4521/events", "html_url": "https://github.com/freedomofpress/securedrop/issues/4521", "id": 455963195, "node_id": "MDU6SXNzdWU0NTU5NjMxOTU=", "number": 4521, "title": "The Source Interface's /journalist-key endpoint returns a 404 instead of the Submission Key", "user": {"login": "zenmonkeykstop", "id": 2782952, "node_id": "MDQ6VXNlcjI3ODI5NTI=", "avatar_url": "https://avatars.githubusercontent.com/u/2782952?v=4", "gravatar_id": "", "url": "https://api.github.com/users/zenmonkeykstop", "html_url": "https://github.com/zenmonkeykstop", "followers_url": "https://api.github.com/users/zenmonkeykstop/followers", "following_url": "https://api.github.com/users/zenmonkeykstop/following{/other_user}", "gists_url": "https://api.github.com/users/zenmonkeykstop/gists{/gist_id}", "starred_url": "https://api.github.com/users/zenmonkeykstop/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/zenmonkeykstop/subscriptions", "organizations_url": "https://api.github.com/users/zenmonkeykstop/orgs", "repos_url": "https://api.github.com/users/zenmonkeykstop/repos", "events_url": "https://api.github.com/users/zenmonkeykstop/events{/privacy}", "received_events_url": "https://api.github.com/users/zenmonkeykstop/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}, {"id": 1292824193, "node_id": "MDU6TGFiZWwxMjkyODI0MTkz", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/urgent%20off-sprint%20issue", "name": "urgent off-sprint issue", "color": "d86e80", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": {"login": "kushaldas", "id": 272303, "node_id": "MDQ6VXNlcjI3MjMwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/272303?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kushaldas", "html_url": "https://github.com/kushaldas", "followers_url": "https://api.github.com/users/kushaldas/followers", "following_url": "https://api.github.com/users/kushaldas/following{/other_user}", "gists_url": "https://api.github.com/users/kushaldas/gists{/gist_id}", "starred_url": "https://api.github.com/users/kushaldas/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kushaldas/subscriptions", "organizations_url": "https://api.github.com/users/kushaldas/orgs", "repos_url": "https://api.github.com/users/kushaldas/repos", "events_url": "https://api.github.com/users/kushaldas/events{/privacy}", "received_events_url": "https://api.github.com/users/kushaldas/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "kushaldas", "id": 272303, "node_id": "MDQ6VXNlcjI3MjMwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/272303?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kushaldas", "html_url": "https://github.com/kushaldas", "followers_url": "https://api.github.com/users/kushaldas/followers", "following_url": "https://api.github.com/users/kushaldas/following{/other_user}", "gists_url": "https://api.github.com/users/kushaldas/gists{/gist_id}", "starred_url": "https://api.github.com/users/kushaldas/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kushaldas/subscriptions", "organizations_url": "https://api.github.com/users/kushaldas/orgs", "repos_url": "https://api.github.com/users/kushaldas/repos", "events_url": "https://api.github.com/users/kushaldas/events{/privacy}", "received_events_url": "https://api.github.com/users/kushaldas/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/freedomofpress/securedrop/milestones/56", "html_url": "https://github.com/freedomofpress/securedrop/milestone/56", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/milestones/56/labels", "id": 4407346, "node_id": "MDk6TWlsZXN0b25lNDQwNzM0Ng==", "number": 56, "title": "0.13.1", "description": "RM: @emkll Deputy RM: @redshiftzero - Point release to address regression that causes submission public key to no longer be served in the Source Interface:\r\n\r\nhttps://github.com/freedomofpress/securedrop/issues/4521\r\n\r\n", "creator": {"login": "eloquence", "id": 213636, "node_id": "MDQ6VXNlcjIxMzYzNg==", "avatar_url": "https://avatars.githubusercontent.com/u/213636?v=4", "gravatar_id": "", "url": "https://api.github.com/users/eloquence", "html_url": "https://github.com/eloquence", "followers_url": "https://api.github.com/users/eloquence/followers", "following_url": "https://api.github.com/users/eloquence/following{/other_user}", "gists_url": "https://api.github.com/users/eloquence/gists{/gist_id}", "starred_url": "https://api.github.com/users/eloquence/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/eloquence/subscriptions", "organizations_url": "https://api.github.com/users/eloquence/orgs", "repos_url": "https://api.github.com/users/eloquence/repos", "events_url": "https://api.github.com/users/eloquence/events{/privacy}", "received_events_url": "https://api.github.com/users/eloquence/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 2, "state": "closed", "created_at": "2019-06-13T21:39:38Z", "updated_at": "2019-06-24T16:42:21Z", "due_on": "2019-06-18T07:00:00Z", "closed_at": "2019-06-24T16:42:21Z"}, "comments": 0, "created_at": "2019-06-13T21:35:06Z", "updated_at": "2019-06-14T17:55:05Z", "closed_at": "2019-06-14T17:55:05Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "## Description\r\n\r\nThe submission key should be available via the Source Interface at the URL http://[Onion address]/journalist-key, but said URL returns a 404 instead.\r\n\r\n## Steps to Reproduce\r\n\r\n- set up a production SecureDrop instance on HW or VMs\r\n- visit the source interface, click through to the submission page, and click the ``public key`` link.\r\n\r\n## Expected Behavior\r\nThe Source Interface responds with the Submission Key\r\n\r\n## Actual Behavior\r\nThe Source Interface responds with a 404, and the following errors are recorded if logging is enabled:\r\n```\r\n[Thu Jun 13 17:22:12.285962 2019] [authz_core:debug] [pid 7030:tid 3881911650048] mod_authz_core.c(835): [client 127.0.0.1:45900] AH01628: authorization result: granted (no directives), referer: http://fehpa6pmg6ke4i3u.onion/lookup\r\n[Thu Jun 13 17:22:12.286129 2019] [authz_core:debug] [pid 7030:tid 3881911650048] mod_authz_core.c(835): [client 127.0.0.1:45900] AH01628: authorization result: granted (no directives), referer: http://fehpa6pmg6ke4i3u.onion/lookup\r\n[Thu Jun 13 17:22:12.415949 2019] [wsgi:error] [pid 7028:tid 3882000488192] [remote 127.0.0.1:20954] mod_wsgi (pid=7028): Exception occurred processing WSGI script '/var/www/source.wsgi'.\r\n[Thu Jun 13 17:22:12.416036 2019] [wsgi:error] [pid 7028:tid 3882000488192] [remote 127.0.0.1:20954] TypeError: file like object yielded non string type\r\n[Thu Jun 13 17:22:12.416281 2019] [authz_core:debug] [pid 7030:tid 3881911650048] mod_authz_core.c(835): [client 127.0.0.1:45900] AH01628: authorization result: granted (no directives), referer: http://fehpa6pmg6ke4i3u.onion/lookup\r\n[Thu Jun 13 17:22:12.416360 2019] [authz_core:debug] [pid 7030:tid 3881911650048] mod_authz_core.c(835): [client 127.0.0.1:45900] AH01628: authorization result: granted (no directives), referer: http://fehpa6pmg6ke4i3u.onion/lookup\r\n[Thu Jun 13 17:22:13.812032 2019] [authz_core:debug] [pid 7031:tid 3882000144128] mod_authz_core.c(835): [client 127.0.0.1:45902] AH01628: authorization result: granted (no directives), referer: http://fehpa6pmg6ke4i3u.onion/journalist-key\r\n[Thu Jun 13 17:22:14.587228 2019] [authz_core:debug] [pid 7031:tid 3881991599872] mod_authz_core.c(835): [client 127.0.0.1:45902] AH01628: authorization result: granted (no directives), referer: http://fehpa6pmg6ke4i3u.onion/journalist-key\r\n[Thu Jun 13 17:22:14.587409 2019] [authz_core:debug] [pid 7031:tid 3881991599872] mod_authz_core.c(835): [client 127.0.0.1:45902] AH01628: authorization result: granted (no directives), referer: http://fehpa6pmg6ke4i3u.onion/journalist-key\r\n[Thu Jun 13 17:22:15.296269 2019] [authz_core:debug] [pid 7031:tid 3881911961344] mod_authz_core.c(835): [client 127.0.0.1:45902] AH01628: authorization result: granted (no directives), referer: http://fehpa6pmg6ke4i3u.onion/journalist-key\r\n```\r\n\r\n\r\nPlease provide screenshots where appropriate.\r\n\r\n## Comments\r\n\r\nSuggestions to fix, any other relevant information.\r\n", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/4521/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/4521/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/4490", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/4490/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/4490/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/4490/events", "html_url": "https://github.com/freedomofpress/securedrop/issues/4490", "id": 450558724, "node_id": "MDU6SXNzdWU0NTA1NTg3MjQ=", "number": 4490, "title": "Expired Source Interface session causes server error on new session", "user": {"login": "eloquence", "id": 213636, "node_id": "MDQ6VXNlcjIxMzYzNg==", "avatar_url": "https://avatars.githubusercontent.com/u/213636?v=4", "gravatar_id": "", "url": "https://api.github.com/users/eloquence", "html_url": "https://github.com/eloquence", "followers_url": "https://api.github.com/users/eloquence/followers", "following_url": "https://api.github.com/users/eloquence/following{/other_user}", "gists_url": "https://api.github.com/users/eloquence/gists{/gist_id}", "starred_url": "https://api.github.com/users/eloquence/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/eloquence/subscriptions", "organizations_url": "https://api.github.com/users/eloquence/orgs", "repos_url": "https://api.github.com/users/eloquence/repos", "events_url": "https://api.github.com/users/eloquence/events{/privacy}", "received_events_url": "https://api.github.com/users/eloquence/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}, {"id": 625966031, "node_id": "MDU6TGFiZWw2MjU5NjYwMzE=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/able%20to%20reproduce", "name": "able to reproduce", "color": "fbca04", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2019-05-31T00:09:36Z", "updated_at": "2019-06-04T19:23:23Z", "closed_at": "2019-06-04T19:23:23Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "## Description\r\n\r\nCreating a new codename after a session has expired causes a server error.\r\n\r\n## Steps to Reproduce\r\n\r\n1. Visit the codename generation page (`/generate`) but do not press 'Submit Documents'\r\n2. Wait for the session to expire\r\n3. Press 'Submit Documents'\r\n\r\nDiff to force session expiry at 1 minute:\r\n\r\n```diff\r\ndiff --git a/securedrop/source_app/__init__.py b/securedrop/source_app/__init__.py\r\nindex d2679b737..60df38ece 100644\r\n--- a/securedrop/source_app/__init__.py\r\n+++ b/securedrop/source_app/__init__.py\r\n@@ -148,9 +148,7 @@ def create_app(config):\r\n             flash(Markup(msg), \"important\")\r\n \r\n         session['expires'] = datetime.utcnow() + \\\r\n-            timedelta(minutes=getattr(config,\r\n-                                      'SESSION_EXPIRATION_MINUTES',\r\n-                                      120))\r\n+            timedelta(minutes=1)\r\n \r\n         # ignore_static here because `crypto_util.hash_codename` is scrypt\r\n         # (very time consuming), and we don't need to waste time running if\r\n```\r\n\r\n## Expected Behavior\r\n\r\nA new codename is generated or an appropriate error message is shown.\r\n\r\n## Actual Behavior\r\n\r\nThe Source Interface displays:\r\n\r\n> Server error\r\n> Sorry, the website encountered an error and was unable to complete your request.", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/4490/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/4490/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/4463", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/4463/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/4463/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/4463/events", "html_url": "https://github.com/freedomofpress/securedrop/issues/4463", "id": 448386365, "node_id": "MDU6SXNzdWU0NDgzODYzNjU=", "number": 4463, "title": "Password reset does not work due to CSRFError", "user": {"login": "redshiftzero", "id": 7832803, "node_id": "MDQ6VXNlcjc4MzI4MDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7832803?v=4", "gravatar_id": "", "url": "https://api.github.com/users/redshiftzero", "html_url": "https://github.com/redshiftzero", "followers_url": "https://api.github.com/users/redshiftzero/followers", "following_url": "https://api.github.com/users/redshiftzero/following{/other_user}", "gists_url": "https://api.github.com/users/redshiftzero/gists{/gist_id}", "starred_url": "https://api.github.com/users/redshiftzero/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/redshiftzero/subscriptions", "organizations_url": "https://api.github.com/users/redshiftzero/orgs", "repos_url": "https://api.github.com/users/redshiftzero/repos", "events_url": "https://api.github.com/users/redshiftzero/events{/privacy}", "received_events_url": "https://api.github.com/users/redshiftzero/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2019-05-24T23:37:36Z", "updated_at": "2019-06-03T20:16:51Z", "closed_at": "2019-06-03T20:16:51Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "## Description\r\n\r\nBug discovered by @lev-csouffrant.\r\n\r\n## Steps to Reproduce\r\n\r\n0. Login to journalist interface\r\n1. Try to reset password\r\n\r\n## Expected Behavior\r\n\r\n2. Password is reset\r\n\r\n## Actual Behavior\r\n\r\n2. You are logged out\r\n\r\n## Comments\r\n\r\nThis was introduced in #4425 (only in develop, not in production or any release branches) and is due to a missing CSRF token in the password reset form (a CSRFError exception will be thrown - these are handled in `journalist_app/__init__py` so no traceback occurs, but the form still won't validate):\r\n\r\n```diff\r\ndiff --git a/securedrop/journalist_templates/edit_account.html b/securedrop/journalist_templates/edit_account.html\r\nindex fc54f2ebc..11f55cef3 100644\r\n--- a/securedrop/journalist_templates/edit_account.html\r\n+++ b/securedrop/journalist_templates/edit_account.html\r\n@@ -58,6 +58,7 @@\r\n\r\n <form action=\"{{ password_reset_url }}\" method=\"post\" id=\"new-password\" class=\"login-form\">\r\n    {% if not user or g.user == user %}\r\n+  <input name=\"csrf_token\" type=\"hidden\" value=\"{{ csrf_token() }}\">\r\n   <p><input type=\"password\" name=\"current_password\" placeholder=\"{{ gettext('Current Password') }}\"></p>\r\n   <p><input name=\"token\" id=\"token\" type=\"text\" placeholder=\"{{ gettext('Two-factor Code') }}\"></p>\r\n   {% endif %}\r\n```\r\n\r\nA fix needs a regression unit or functional test\r\n", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/4463/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/4463/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/4458", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/4458/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/4458/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/4458/events", "html_url": "https://github.com/freedomofpress/securedrop/issues/4458", "id": 447798476, "node_id": "MDU6SXNzdWU0NDc3OTg0NzY=", "number": 4458, "title": "Duplicate Source Interface session triggers server error", "user": {"login": "eloquence", "id": 213636, "node_id": "MDQ6VXNlcjIxMzYzNg==", "avatar_url": "https://avatars.githubusercontent.com/u/213636?v=4", "gravatar_id": "", "url": "https://api.github.com/users/eloquence", "html_url": "https://github.com/eloquence", "followers_url": "https://api.github.com/users/eloquence/followers", "following_url": "https://api.github.com/users/eloquence/following{/other_user}", "gists_url": "https://api.github.com/users/eloquence/gists{/gist_id}", "starred_url": "https://api.github.com/users/eloquence/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/eloquence/subscriptions", "organizations_url": "https://api.github.com/users/eloquence/orgs", "repos_url": "https://api.github.com/users/eloquence/repos", "events_url": "https://api.github.com/users/eloquence/events{/privacy}", "received_events_url": "https://api.github.com/users/eloquence/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}, {"id": 157793376, "node_id": "MDU6TGFiZWwxNTc3OTMzNzY=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/priority/low", "name": "priority/low", "color": "fef2c0", "default": false, "description": ""}, {"id": 520554056, "node_id": "MDU6TGFiZWw1MjA1NTQwNTY=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/UX", "name": "UX", "color": "5319e7", "default": false, "description": null}, {"id": 671921004, "node_id": "MDU6TGFiZWw2NzE5MjEwMDQ=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/help%20wanted", "name": "help wanted", "color": "5319e7", "default": true, "description": "Issues we would definitely appreciate volunteer help with"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2019-05-23T17:59:53Z", "updated_at": "2019-12-30T17:38:59Z", "closed_at": "2019-12-30T17:38:59Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "## Description\r\n\r\nInitiating more than one SecureDrop session in the Source Interface at a time causes a Server Error for the second session, and causes the first session to be invalidated.\r\n\r\n## Steps to Reproduce\r\n\r\n1. Launch the Docker-based SecureDrop development environment;\r\n2. Visit http://localhost:8080/generate twice, in two separate private browser tabs.\r\n3. Click \"Submit\" in the first tab\r\n4. Click \"Submit\" in the second tab\r\n\r\n## Expected Behavior\r\nI can submit messages or documents.\r\n\r\n## Actual Behavior\r\n\r\nIn the second tab, the following error message appears:\r\n\r\n> Server error\r\n> Sorry, the website encountered an error and was unable to complete your request.\r\n\r\nIn the first tab, subsequent page loads take me to the login screen: http://localhost:8080/login", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/4458/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/4458/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/4423", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/4423/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/4423/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/4423/events", "html_url": "https://github.com/freedomofpress/securedrop/issues/4423", "id": 442269433, "node_id": "MDU6SXNzdWU0NDIyNjk0MzM=", "number": 4423, "title": "make lint target fails locally", "user": {"login": "redshiftzero", "id": 7832803, "node_id": "MDQ6VXNlcjc4MzI4MDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7832803?v=4", "gravatar_id": "", "url": "https://api.github.com/users/redshiftzero", "html_url": "https://github.com/redshiftzero", "followers_url": "https://api.github.com/users/redshiftzero/followers", "following_url": "https://api.github.com/users/redshiftzero/following{/other_user}", "gists_url": "https://api.github.com/users/redshiftzero/gists{/gist_id}", "starred_url": "https://api.github.com/users/redshiftzero/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/redshiftzero/subscriptions", "organizations_url": "https://api.github.com/users/redshiftzero/orgs", "repos_url": "https://api.github.com/users/redshiftzero/repos", "events_url": "https://api.github.com/users/redshiftzero/events{/privacy}", "received_events_url": "https://api.github.com/users/redshiftzero/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "redshiftzero", "id": 7832803, "node_id": "MDQ6VXNlcjc4MzI4MDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7832803?v=4", "gravatar_id": "", "url": "https://api.github.com/users/redshiftzero", "html_url": "https://github.com/redshiftzero", "followers_url": "https://api.github.com/users/redshiftzero/followers", "following_url": "https://api.github.com/users/redshiftzero/following{/other_user}", "gists_url": "https://api.github.com/users/redshiftzero/gists{/gist_id}", "starred_url": "https://api.github.com/users/redshiftzero/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/redshiftzero/subscriptions", "organizations_url": "https://api.github.com/users/redshiftzero/orgs", "repos_url": "https://api.github.com/users/redshiftzero/repos", "events_url": "https://api.github.com/users/redshiftzero/events{/privacy}", "received_events_url": "https://api.github.com/users/redshiftzero/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "redshiftzero", "id": 7832803, "node_id": "MDQ6VXNlcjc4MzI4MDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7832803?v=4", "gravatar_id": "", "url": "https://api.github.com/users/redshiftzero", "html_url": "https://github.com/redshiftzero", "followers_url": "https://api.github.com/users/redshiftzero/followers", "following_url": "https://api.github.com/users/redshiftzero/following{/other_user}", "gists_url": "https://api.github.com/users/redshiftzero/gists{/gist_id}", "starred_url": "https://api.github.com/users/redshiftzero/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/redshiftzero/subscriptions", "organizations_url": "https://api.github.com/users/redshiftzero/orgs", "repos_url": "https://api.github.com/users/redshiftzero/repos", "events_url": "https://api.github.com/users/redshiftzero/events{/privacy}", "received_events_url": "https://api.github.com/users/redshiftzero/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 1, "created_at": "2019-05-09T14:33:40Z", "updated_at": "2019-05-16T14:02:45Z", "closed_at": "2019-05-16T14:02:45Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "## Description\r\n\r\nThe linting target fails locally\r\n\r\n## Steps to Reproduce\r\n\r\n`make lint`\r\n\r\n## Expected Behavior\r\n\r\nlint target passes\r\n\r\n## Actual Behavior\r\n\r\n```\r\n[...]\r\nfind . -name '*.py' | xargs pylint --reports=no --errors-only \\\r\n\t   --disable=import-error \\\r\n\t   --disable=no-name-in-module \\\r\n\t   --disable=unexpected-keyword-arg \\\r\n\t   --disable=too-many-function-args \\\r\n\t   --disable=import-error \\\r\n\t   --max-line-length=100\r\nUsing config file /Users/redshiftzero/Documents/Github/securedrop-functional-test/securedrop/securedrop/pylintrc\r\nTraceback (most recent call last):\r\n  File \"/Users/redshiftzero/.virtualenvs/securedrop/bin/pylint\", line 11, in <module>\r\n    sys.exit(run_pylint())\r\n  File \"/Users/redshiftzero/.virtualenvs/securedrop/lib/python2.7/site-packages/pylint/__init__.py\", line 16, in run_pylint\r\n    Run(sys.argv[1:])\r\n  File \"/Users/redshiftzero/.virtualenvs/securedrop/lib/python2.7/site-packages/pylint/lint.py\", line 1315, in __init__\r\n    linter.load_config_file()\r\n  File \"/Users/redshiftzero/.virtualenvs/securedrop/lib/python2.7/site-packages/pylint/config.py\", line 678, in load_config_file\r\n    self.global_set_option(option, value)\r\n  File \"/Users/redshiftzero/.virtualenvs/securedrop/lib/python2.7/site-packages/pylint/config.py\", line 576, in global_set_option\r\n    self._all_options[opt].set_option(opt, value)\r\n  File \"/Users/redshiftzero/.virtualenvs/securedrop/lib/python2.7/site-packages/pylint/config.py\", line 768, in set_option\r\n    value = _validate(value, optdict, optname)\r\n  File \"/Users/redshiftzero/.virtualenvs/securedrop/lib/python2.7/site-packages/pylint/config.py\", line 233, in _validate\r\n    return _call_validator(_type, optdict, name, value)\r\n  File \"/Users/redshiftzero/.virtualenvs/securedrop/lib/python2.7/site-packages/pylint/config.py\", line 214, in _call_validator\r\n    return VALIDATORS[opttype](optdict, option, value)\r\n  File \"/Users/redshiftzero/.virtualenvs/securedrop/lib/python2.7/site-packages/pylint/config.py\", line 204, in <lambda>\r\n    'choice': lambda opt, name, value: _choice_validator(opt['choices'], name, value),\r\n  File \"/Users/redshiftzero/.virtualenvs/securedrop/lib/python2.7/site-packages/pylint/config.py\", line 161, in _choice_validator\r\n    raise optparse.OptionValueError(msg % (name, value, choices))\r\noptparse.OptionValueError: option spelling-dict: invalid value: u'en_US', should be in ['']\r\nmake[1]: *** [lint] Error 1\r\nmake: *** [app-lint] Error 2\r\n```\r\n", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/4423/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/4423/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/4387", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/4387/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/4387/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/4387/events", "html_url": "https://github.com/freedomofpress/securedrop/issues/4387", "id": 437456261, "node_id": "MDU6SXNzdWU0Mzc0NTYyNjE=", "number": 4387, "title": "Graphical updater re-appears, fails after initial run without admin password", "user": {"login": "eloquence", "id": 213636, "node_id": "MDQ6VXNlcjIxMzYzNg==", "avatar_url": "https://avatars.githubusercontent.com/u/213636?v=4", "gravatar_id": "", "url": "https://api.github.com/users/eloquence", "html_url": "https://github.com/eloquence", "followers_url": "https://api.github.com/users/eloquence/followers", "following_url": "https://api.github.com/users/eloquence/following{/other_user}", "gists_url": "https://api.github.com/users/eloquence/gists{/gist_id}", "starred_url": "https://api.github.com/users/eloquence/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/eloquence/subscriptions", "organizations_url": "https://api.github.com/users/eloquence/orgs", "repos_url": "https://api.github.com/users/eloquence/repos", "events_url": "https://api.github.com/users/eloquence/events{/privacy}", "received_events_url": "https://api.github.com/users/eloquence/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "zenmonkeykstop", "id": 2782952, "node_id": "MDQ6VXNlcjI3ODI5NTI=", "avatar_url": "https://avatars.githubusercontent.com/u/2782952?v=4", "gravatar_id": "", "url": "https://api.github.com/users/zenmonkeykstop", "html_url": "https://github.com/zenmonkeykstop", "followers_url": "https://api.github.com/users/zenmonkeykstop/followers", "following_url": "https://api.github.com/users/zenmonkeykstop/following{/other_user}", "gists_url": "https://api.github.com/users/zenmonkeykstop/gists{/gist_id}", "starred_url": "https://api.github.com/users/zenmonkeykstop/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/zenmonkeykstop/subscriptions", "organizations_url": "https://api.github.com/users/zenmonkeykstop/orgs", "repos_url": "https://api.github.com/users/zenmonkeykstop/repos", "events_url": "https://api.github.com/users/zenmonkeykstop/events{/privacy}", "received_events_url": "https://api.github.com/users/zenmonkeykstop/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "zenmonkeykstop", "id": 2782952, "node_id": "MDQ6VXNlcjI3ODI5NTI=", "avatar_url": "https://avatars.githubusercontent.com/u/2782952?v=4", "gravatar_id": "", "url": "https://api.github.com/users/zenmonkeykstop", "html_url": "https://github.com/zenmonkeykstop", "followers_url": "https://api.github.com/users/zenmonkeykstop/followers", "following_url": "https://api.github.com/users/zenmonkeykstop/following{/other_user}", "gists_url": "https://api.github.com/users/zenmonkeykstop/gists{/gist_id}", "starred_url": "https://api.github.com/users/zenmonkeykstop/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/zenmonkeykstop/subscriptions", "organizations_url": "https://api.github.com/users/zenmonkeykstop/orgs", "repos_url": "https://api.github.com/users/zenmonkeykstop/repos", "events_url": "https://api.github.com/users/zenmonkeykstop/events{/privacy}", "received_events_url": "https://api.github.com/users/zenmonkeykstop/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 2, "created_at": "2019-04-26T01:04:33Z", "updated_at": "2019-10-08T14:38:25Z", "closed_at": "2019-10-08T14:38:25Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "## Description\r\n\r\nThe graphical updater fails to successfully complete an update, if it is re-run after an update that failed due to a Tails admin password not being set.\r\n\r\n## Steps to Reproduce\r\n\r\n1. Boot up the Admin Workstation with an update pending;\r\n2. Do _not_ set a Tails admin password;\r\n3. Proceed with the update when prompted by the graphical updater.\r\n4. Cancel the update and reboot the workstation at the step that requires a Tails admin password.\r\n5. Proceed with the update when prompted by the graphical updater.\r\n\r\n## Expected Behavior\r\n\r\nI can successfully complete the update.\r\n\r\n## Actual Behavior\r\n\r\nThe update fails (\"Update failed\").", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/4387/reactions", "total_count": 1, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/4387/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/4363", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/4363/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/4363/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/4363/events", "html_url": "https://github.com/freedomofpress/securedrop/issues/4363", "id": 436425865, "node_id": "MDU6SXNzdWU0MzY0MjU4NjU=", "number": 4363, "title": "Upgrade to Xenial produces ossec false posive for /usr/bin/mail", "user": {"login": "emkll", "id": 15223328, "node_id": "MDQ6VXNlcjE1MjIzMzI4", "avatar_url": "https://avatars.githubusercontent.com/u/15223328?v=4", "gravatar_id": "", "url": "https://api.github.com/users/emkll", "html_url": "https://github.com/emkll", "followers_url": "https://api.github.com/users/emkll/followers", "following_url": "https://api.github.com/users/emkll/following{/other_user}", "gists_url": "https://api.github.com/users/emkll/gists{/gist_id}", "starred_url": "https://api.github.com/users/emkll/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/emkll/subscriptions", "organizations_url": "https://api.github.com/users/emkll/orgs", "repos_url": "https://api.github.com/users/emkll/repos", "events_url": "https://api.github.com/users/emkll/events{/privacy}", "received_events_url": "https://api.github.com/users/emkll/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}, {"id": 385585080, "node_id": "MDU6TGFiZWwzODU1ODUwODA=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/QA:%20Release", "name": "QA: Release", "color": "fbca04", "default": false, "description": null}, {"id": 741396371, "node_id": "MDU6TGFiZWw3NDEzOTYzNzE=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/OSSEC", "name": "OSSEC", "color": "006b75", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2019-04-23T23:02:13Z", "updated_at": "2020-04-24T17:25:21Z", "closed_at": "2020-04-24T17:25:21Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "## Description\r\n\r\nUpgrade to Xenial produces a scary ossec syscheck alert:\r\n\r\n```\r\nOSSEC HIDS Notification.\r\n2019 Apr 23 21:57:36\r\n\r\nReceived From: (app) 10.0.1.4->rootcheck\r\nRule: 510 fired (level 7) -> \"Host-based anomaly detection event (rootcheck).\"\r\nPortion of the log(s):\r\n\r\nTrojaned version of file '/usr/bin/mail' detected. Signature used: 'bash|file\\.h|proc\\.h|/dev/[^nu]' (Generic).\r\n\r\n --END OF NOTIFICATION\r\n```\r\nIn this particular case, it seems due to the ruleset alerting on these changes https://askubuntu.com/a/605006\r\n\r\n## Steps to Reproduce\r\nUsing prod vms:\r\n* install 0.12.1 under trusty\r\n* Upgrade the base OS to Xenial\r\n* Observe the ossec alert above\r\n## Expected Behavior\r\n* ossec/syscheck alerts should not be triggered on system-provided binaries\r\n## Actual behavior\r\n* false-positive ossec/syscheck alert\r\n## Comments\r\n\r\n1. We should confirm if this is a one-time alert, or if it happens every `syscheck` run\r\n2. We should see if updating ossec (and thus the ruleset) resolves the issue (there's an older WIP branch here: https://github.com/freedomofpress/securedrop/tree/ossec-3.2)\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/4363/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/4363/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/4362", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/4362/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/4362/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/4362/events", "html_url": "https://github.com/freedomofpress/securedrop/issues/4362", "id": 436423540, "node_id": "MDU6SXNzdWU0MzY0MjM1NDA=", "number": 4362, "title": "AppArmor denial for `/usr/bin/pinentry-gtk-2` triggers OSSEC alert", "user": {"login": "eloquence", "id": 213636, "node_id": "MDQ6VXNlcjIxMzYzNg==", "avatar_url": "https://avatars.githubusercontent.com/u/213636?v=4", "gravatar_id": "", "url": "https://api.github.com/users/eloquence", "html_url": "https://github.com/eloquence", "followers_url": "https://api.github.com/users/eloquence/followers", "following_url": "https://api.github.com/users/eloquence/following{/other_user}", "gists_url": "https://api.github.com/users/eloquence/gists{/gist_id}", "starred_url": "https://api.github.com/users/eloquence/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/eloquence/subscriptions", "organizations_url": "https://api.github.com/users/eloquence/orgs", "repos_url": "https://api.github.com/users/eloquence/repos", "events_url": "https://api.github.com/users/eloquence/events{/privacy}", "received_events_url": "https://api.github.com/users/eloquence/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2019-04-23T22:53:37Z", "updated_at": "2019-04-24T19:51:12Z", "closed_at": "2019-04-24T19:51:12Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "On my long-running production instance, which is on 0.12.1 and which I upgraded from Trusty to Xenial shortly after 0.12.0 was released, I see the following alerts in my OSSEC logs:\r\n\r\n```\r\nOSSEC HIDS Notification.\r\n2019 Apr 18 16:53:37\r\n\r\nReceived From: (app) 10.20.2.2->/var/log/syslog\r\nRule: 100012 fired (level 7) -> \"Apparmor denied event\"\r\nPortion of the log(s):\r\n\r\nApr 18 16:53:36 app kernel: [ 4710.740829] audit: type=1400 audit(1555631616.202:14):\r\n apparmor=\"DENIED\" operation=\"exec\" profile=\"/usr/sbin/apache2\" \r\n name=\"/usr/bin/pinentry-gtk-2\" pid=3872 comm=\"gpg-agent\" requested_mask=\"x\"\r\n denied_mask=\"x\" fsuid=33 ouid=0\r\n```\r\n\r\nI see the first one on April 7, and then a batch around the time that I did a lot of testing of deletion via the Journalist Interface. I will attempt to get a clean repro through a submit->delete cycle.\r\n\r\n@emkll has reported also seeing this error during 0.12.2 testing.", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/4362/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/4362/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/4361", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/4361/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/4361/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/4361/events", "html_url": "https://github.com/freedomofpress/securedrop/issues/4361", "id": 436399412, "node_id": "MDU6SXNzdWU0MzYzOTk0MTI=", "number": 4361, "title": "Source Interface requests fail with 500 error, due to session issue", "user": {"login": "zenmonkeykstop", "id": 2782952, "node_id": "MDQ6VXNlcjI3ODI5NTI=", "avatar_url": "https://avatars.githubusercontent.com/u/2782952?v=4", "gravatar_id": "", "url": "https://api.github.com/users/zenmonkeykstop", "html_url": "https://github.com/zenmonkeykstop", "followers_url": "https://api.github.com/users/zenmonkeykstop/followers", "following_url": "https://api.github.com/users/zenmonkeykstop/following{/other_user}", "gists_url": "https://api.github.com/users/zenmonkeykstop/gists{/gist_id}", "starred_url": "https://api.github.com/users/zenmonkeykstop/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/zenmonkeykstop/subscriptions", "organizations_url": "https://api.github.com/users/zenmonkeykstop/orgs", "repos_url": "https://api.github.com/users/zenmonkeykstop/repos", "events_url": "https://api.github.com/users/zenmonkeykstop/events{/privacy}", "received_events_url": "https://api.github.com/users/zenmonkeykstop/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "redshiftzero", "id": 7832803, "node_id": "MDQ6VXNlcjc4MzI4MDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7832803?v=4", "gravatar_id": "", "url": "https://api.github.com/users/redshiftzero", "html_url": "https://github.com/redshiftzero", "followers_url": "https://api.github.com/users/redshiftzero/followers", "following_url": "https://api.github.com/users/redshiftzero/following{/other_user}", "gists_url": "https://api.github.com/users/redshiftzero/gists{/gist_id}", "starred_url": "https://api.github.com/users/redshiftzero/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/redshiftzero/subscriptions", "organizations_url": "https://api.github.com/users/redshiftzero/orgs", "repos_url": "https://api.github.com/users/redshiftzero/repos", "events_url": "https://api.github.com/users/redshiftzero/events{/privacy}", "received_events_url": "https://api.github.com/users/redshiftzero/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "redshiftzero", "id": 7832803, "node_id": "MDQ6VXNlcjc4MzI4MDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7832803?v=4", "gravatar_id": "", "url": "https://api.github.com/users/redshiftzero", "html_url": "https://github.com/redshiftzero", "followers_url": "https://api.github.com/users/redshiftzero/followers", "following_url": "https://api.github.com/users/redshiftzero/following{/other_user}", "gists_url": "https://api.github.com/users/redshiftzero/gists{/gist_id}", "starred_url": "https://api.github.com/users/redshiftzero/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/redshiftzero/subscriptions", "organizations_url": "https://api.github.com/users/redshiftzero/orgs", "repos_url": "https://api.github.com/users/redshiftzero/repos", "events_url": "https://api.github.com/users/redshiftzero/events{/privacy}", "received_events_url": "https://api.github.com/users/redshiftzero/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 5, "created_at": "2019-04-23T21:31:04Z", "updated_at": "2019-04-28T13:04:36Z", "closed_at": "2019-04-28T13:04:36Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "## Description\r\n\r\nIn some situations, requests to the source interface may start to fail, returning the 500 error page. Once the 500 errors start, they continue until the Tor Browser cache is cleared, either explicitly or by starting a new browser session. With source error logging enabled, the following errors are seen on failing requests:\r\n\r\n```\r\n[Thu Apr 18 09:46:09.516056 2019] [wsgi:error] [pid 7324:tid 3457186817792] [remote 127.0.0.1:29169] [2019-04-18 09:46:09,510] ERROR in app: Exception on / [GET]\r\n[Thu Apr 18 09:46:09.516238 2019] [wsgi:error] [pid 7324:tid 3457186817792] [remote 127.0.0.1:29169] Traceback (most recent call last):\r\n[Thu Apr 18 09:46:09.516279 2019] [wsgi:error] [pid 7324:tid 3457186817792] [remote 127.0.0.1:29169]   File \"/usr/local/lib/python2.7/dist-packages/flask/app.py\", line 2292, in wsgi_app\r\n[Thu Apr 18 09:46:09.516317 2019] [wsgi:error] [pid 7324:tid 3457186817792] [remote 127.0.0.1:29169]     response = self.full_dispatch_request()\r\n[Thu Apr 18 09:46:09.516363 2019] [wsgi:error] [pid 7324:tid 3457186817792] [remote 127.0.0.1:29169]   File \"/usr/local/lib/python2.7/dist-packages/flask/app.py\", line 1815, in full_dispatch_request\r\n[Thu Apr 18 09:46:09.516442 2019] [wsgi:error] [pid 7324:tid 3457186817792] [remote 127.0.0.1:29169]     rv = self.handle_user_exception(e)\r\n[Thu Apr 18 09:46:09.516479 2019] [wsgi:error] [pid 7324:tid 3457186817792] [remote 127.0.0.1:29169]   File \"/usr/local/lib/python2.7/dist-packages/flask/app.py\", line 1718, in handle_user_exception\r\n[Thu Apr 18 09:46:09.516514 2019] [wsgi:error] [pid 7324:tid 3457186817792] [remote 127.0.0.1:29169]     reraise(exc_type, exc_value, tb)\r\n[Thu Apr 18 09:46:09.516549 2019] [wsgi:error] [pid 7324:tid 3457186817792] [remote 127.0.0.1:29169]   File \"/usr/local/lib/python2.7/dist-packages/flask/app.py\", line 1811, in full_dispatch_request\r\n[Thu Apr 18 09:46:09.516584 2019] [wsgi:error] [pid 7324:tid 3457186817792] [remote 127.0.0.1:29169]     rv = self.preprocess_request()\r\n[Thu Apr 18 09:46:09.516619 2019] [wsgi:error] [pid 7324:tid 3457186817792] [remote 127.0.0.1:29169]   File \"/usr/local/lib/python2.7/dist-packages/flask/app.py\", line 2087, in preprocess_request\r\n[Thu Apr 18 09:46:09.516654 2019] [wsgi:error] [pid 7324:tid 3457186817792] [remote 127.0.0.1:29169]     rv = func()\r\n[Thu Apr 18 09:46:09.516688 2019] [wsgi:error] [pid 7324:tid 3457186817792] [remote 127.0.0.1:29169]   File \"/var/www/securedrop/source_app/decorators.py\", line 23, in decorated_function\r\n[Thu Apr 18 09:46:09.516724 2019] [wsgi:error] [pid 7324:tid 3457186817792] [remote 127.0.0.1:29169]     return f(*args, **kwargs)\r\n[Thu Apr 18 09:46:09.516758 2019] [wsgi:error] [pid 7324:tid 3457186817792] [remote 127.0.0.1:29169]   File \"/var/www/securedrop/source_app/__init__.py\", line 159, in setup_g\r\n[Thu Apr 18 09:46:09.516793 2019] [wsgi:error] [pid 7324:tid 3457186817792] [remote 127.0.0.1:29169]     g.codename = session['codename']\r\n[Thu Apr 18 09:46:09.516828 2019] [wsgi:error] [pid 7324:tid 3457186817792] [remote 127.0.0.1:29169]   File \"/usr/local/lib/python2.7/dist-packages/werkzeug/local.py\", line 377, in <lambda>\r\n[Thu Apr 18 09:46:09.516864 2019] [wsgi:error] [pid 7324:tid 3457186817792] [remote 127.0.0.1:29169]     __getitem__ = lambda x, i: x._get_current_object()[i]\r\n[Thu Apr 18 09:46:09.516899 2019] [wsgi:error] [pid 7324:tid 3457186817792] [remote 127.0.0.1:29169]   File \"/usr/local/lib/python2.7/dist-packages/flask/sessions.py\", line 83, in __getitem__\r\n[Thu Apr 18 09:46:09.516933 2019] [wsgi:error] [pid 7324:tid 3457186817792] [remote 127.0.0.1:29169]     return super(SecureCookieSession, self).__getitem__(key)\r\n[Thu Apr 18 09:46:09.516968 2019] [wsgi:error] [pid 7324:tid 3457186817792] [remote 127.0.0.1:29169] KeyError: 'codename'\r\n```\r\n\r\n## Steps to Reproduce\r\nThis error was initially hit by:\r\n1) starting a source interface session on a 0.12.1 Xenial install\r\n2) updating the 0.12.1 Xenial install to 0.12.2~rc1 via cron-apt\r\n3) running a 0.12.1 db restore against the 0.12.2 database\r\n4) attempting to continue the source session.\r\n\r\nIt's also been reproduced during a test session by creating multiple sources and logging in and out repeatedly (h/t @eloquence ), but is not reliably reproducible.\r\n\r\n## Expected Behavior\r\nSource Interface requests for valid URLs return the correct results.\r\n\r\n## Actual Behavior\r\nSI requests all return 500 errors.\r\n\r\n## Comments\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/4361/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/4361/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/4711", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/4711/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/4711/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/4711/events", "html_url": "https://github.com/freedomofpress/securedrop/issues/4711", "id": 485991199, "node_id": "MDU6SXNzdWU0ODU5OTExOTk=", "number": 4711, "title": "Interrupted deletion jobs are not resumed on reboot", "user": {"login": "eloquence", "id": 213636, "node_id": "MDQ6VXNlcjIxMzYzNg==", "avatar_url": "https://avatars.githubusercontent.com/u/213636?v=4", "gravatar_id": "", "url": "https://api.github.com/users/eloquence", "html_url": "https://github.com/eloquence", "followers_url": "https://api.github.com/users/eloquence/followers", "following_url": "https://api.github.com/users/eloquence/following{/other_user}", "gists_url": "https://api.github.com/users/eloquence/gists{/gist_id}", "starred_url": "https://api.github.com/users/eloquence/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/eloquence/subscriptions", "organizations_url": "https://api.github.com/users/eloquence/orgs", "repos_url": "https://api.github.com/users/eloquence/repos", "events_url": "https://api.github.com/users/eloquence/events{/privacy}", "received_events_url": "https://api.github.com/users/eloquence/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/freedomofpress/securedrop/milestones/55", "html_url": "https://github.com/freedomofpress/securedrop/milestone/55", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/milestones/55/labels", "id": 4395960, "node_id": "MDk6TWlsZXN0b25lNDM5NTk2MA==", "number": 55, "title": "1.0.0", "description": "String freeze and feature freeze: 2019-08-29 (1700 PDT).\r\n\r\nString comment period: 2019-08-29 (1700 PDT) to 2019-09-02 (2000 PDT)\r\n\r\nTranslation period: 2019-09-03 (1700 PDT) to 2019-09-15 (1700 PDT).\r\n\r\nTranslation freeze: 2019-09-15 (1700 PDT).\r\n\r\nRelease Manager: @kushaldas , deputy RM: @emkll, Localization Manager: @rmol, deputy LM: @redshiftzero", "creator": {"login": "eloquence", "id": 213636, "node_id": "MDQ6VXNlcjIxMzYzNg==", "avatar_url": "https://avatars.githubusercontent.com/u/213636?v=4", "gravatar_id": "", "url": "https://api.github.com/users/eloquence", "html_url": "https://github.com/eloquence", "followers_url": "https://api.github.com/users/eloquence/followers", "following_url": "https://api.github.com/users/eloquence/following{/other_user}", "gists_url": "https://api.github.com/users/eloquence/gists{/gist_id}", "starred_url": "https://api.github.com/users/eloquence/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/eloquence/subscriptions", "organizations_url": "https://api.github.com/users/eloquence/orgs", "repos_url": "https://api.github.com/users/eloquence/repos", "events_url": "https://api.github.com/users/eloquence/events{/privacy}", "received_events_url": "https://api.github.com/users/eloquence/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 47, "state": "closed", "created_at": "2019-06-10T23:30:14Z", "updated_at": "2019-09-26T11:34:59Z", "due_on": "2019-09-17T07:00:00Z", "closed_at": "2019-09-26T11:34:59Z"}, "comments": 12, "created_at": "2019-04-18T23:25:51Z", "updated_at": "2019-08-29T14:04:48Z", "closed_at": "2019-08-29T14:04:48Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "For context, it's important to know that `srm` with default parameters is extremely slow; on the 2014 Mac Mini, a 50 MB file takes more than 2 hours to delete manually using `srm`, which exceeds the [1 hour timeout](https://github.com/freedomofpress/securedrop/blob/develop/securedrop/worker.py#L10) specified in `worker.py`. When an organization with a lot of sources performs a batch deletion, it is therefore not unlikely that an `srm` job is in progress at the time of the nightly reboot.\r\n\r\n## Steps to reproduce (tested on production, 0.12.1, 2014 Mac Mini hardware)\r\n\r\n1. Empty your `/var/lib/securedrop/store` directory\r\n2. Submit a file of about 1MB 10 times as 10 distinct sources\r\n3. Delete all 10 source collections through the Journalist Interface as a single batch operation\r\n4. Monitor `/var/lib/securedrop/store` until at least one of those sources has been successfully deleted. \r\n5. Note in `ps aux | grep srm` output which source is currently being operated on.\r\n6. Reboot server via `shutdown -r now`\r\n\r\nExpected results:\r\n- All files in `/var/lib/securedrop/store` are eventually deleted. \r\n\r\nActual results:\r\n- All files except for the one that was most recently operated on are eventually deleted.\r\n\r\n**Note:** If you click through to the \"Submit files\" screen (the one with the actual upload control) but never submit, a per-source folder is initialized, but never registers as a source from the journalist's point of view. During testing, this can lead to discrepancies between the number of sources the journalist sees vs. the number of folders on the filesystem.", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/4711/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/4711/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/4329", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/4329/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/4329/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/4329/events", "html_url": "https://github.com/freedomofpress/securedrop/issues/4329", "id": 431191208, "node_id": "MDU6SXNzdWU0MzExOTEyMDg=", "number": 4329, "title": "Upgrade scenario fails on develop", "user": {"login": "emkll", "id": 15223328, "node_id": "MDQ6VXNlcjE1MjIzMzI4", "avatar_url": "https://avatars.githubusercontent.com/u/15223328?v=4", "gravatar_id": "", "url": "https://api.github.com/users/emkll", "html_url": "https://github.com/emkll", "followers_url": "https://api.github.com/users/emkll/followers", "following_url": "https://api.github.com/users/emkll/following{/other_user}", "gists_url": "https://api.github.com/users/emkll/gists{/gist_id}", "starred_url": "https://api.github.com/users/emkll/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/emkll/subscriptions", "organizations_url": "https://api.github.com/users/emkll/orgs", "repos_url": "https://api.github.com/users/emkll/repos", "events_url": "https://api.github.com/users/emkll/events{/privacy}", "received_events_url": "https://api.github.com/users/emkll/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}, {"id": 616447641, "node_id": "MDU6TGFiZWw2MTY0NDc2NDE=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/development%20env", "name": "development env", "color": "bfd4f2", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2019-04-09T20:52:40Z", "updated_at": "2019-05-02T16:03:56Z", "closed_at": "2019-05-02T16:03:56Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "## Description\r\n\r\nRunning upgrade scenario on `develop` returns the following error:\r\n```\r\n    TASK [app-test : Install pip dependencies for running the unit and functional tests.] ***\r\n    fatal: [app-staging]: FAILED! => {\"msg\": \"The task includes an option with an undefined variable. The error was: 'securedrop_code' is undefined\\n\\nThe error appears to have been in '/tmp/molecule/securedrop/upgrade/sd-orig/install_files/ansible-base/roles/app-test/tasks/dev_setup_xvfb_for_functional_tests.yml': line 2, column 3, but may\\nbe elsewhere in the file depending on the exact syntax problem.\\n\\nThe offending line appears to be:\\n\\n---\\n- name: Install pip dependencies for running the unit and functional tests.\\n  ^ here\\n\"}\r\n    \r\n    NO MORE HOSTS LEFT *************************************************************\r\n    \r\n    NO MORE HOSTS LEFT *************************************************************\r\n    \r\n    PLAY RECAP *********************************************************************\r\n    app-staging                : ok=4    changed=2    unreachable=0    failed=1   \r\n    mon-staging                : ok=2    changed=1    unreachable=0    failed=0\r\n    \r\n    \r\nERROR: \r\nMakefile:175: recipe for target 'upgrade-test-local' failed\r\n```\r\n\r\n## Steps to Reproduce\r\n\r\n1. git checkout develop\r\n2. make build-debs\r\n3. make upgrade-start\r\n4. make upgrade-test-local\r\n\r\n## Expected Behavior\r\n\r\nUpgrade scenario should complete without error.\r\n\r\n## Actual Behavior\r\n\r\nUpgrade scenario returns error (see above)\r\n\r\n## Comments\r\n\r\nIt appears that reverting 102afb57bcf4798cd466001b9aaeec1bf1a58577 resolves the issue for me locally.\r\n", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/4329/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/4329/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/4328", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/4328/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/4328/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/4328/events", "html_url": "https://github.com/freedomofpress/securedrop/issues/4328", "id": 431170504, "node_id": "MDU6SXNzdWU0MzExNzA1MDQ=", "number": 4328, "title": "Files associated with deleted sources not deleted in dev env", "user": {"login": "eloquence", "id": 213636, "node_id": "MDQ6VXNlcjIxMzYzNg==", "avatar_url": "https://avatars.githubusercontent.com/u/213636?v=4", "gravatar_id": "", "url": "https://api.github.com/users/eloquence", "html_url": "https://github.com/eloquence", "followers_url": "https://api.github.com/users/eloquence/followers", "following_url": "https://api.github.com/users/eloquence/following{/other_user}", "gists_url": "https://api.github.com/users/eloquence/gists{/gist_id}", "starred_url": "https://api.github.com/users/eloquence/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/eloquence/subscriptions", "organizations_url": "https://api.github.com/users/eloquence/orgs", "repos_url": "https://api.github.com/users/eloquence/repos", "events_url": "https://api.github.com/users/eloquence/events{/privacy}", "received_events_url": "https://api.github.com/users/eloquence/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}, {"id": 616447641, "node_id": "MDU6TGFiZWw2MTY0NDc2NDE=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/development%20env", "name": "development env", "color": "bfd4f2", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2019-04-09T20:16:16Z", "updated_at": "2019-04-30T21:00:53Z", "closed_at": "2019-04-30T21:00:53Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "## Description\r\n\r\nIn the development environment, if you delete a source (as a collection, or individual submissions), the associated files are never deleted from `/var/lib/securedrop/store`.\r\n\r\n## Steps to Reproduce\r\n\r\n1. Run Docker dev env with `make dev` in `securedrop` directory;\r\n2. Submit a document or message via the Source Interface at localhost:8080\r\n3. Delete the source via the Journalist Interface at localhost:8081\r\n\r\n## Expected Behavior\r\n\r\nSource metadata and all associated files in `/var/lib/securedrop/store` are deleted.\r\n\r\n## Actual Behavior\r\n\r\nSource metadata appears to be deleted; files in `/var/lib/securedrop/store` are not. `redis-cli monitor` shows the job being enqueued, but it is never picked up.\r\n\r\nLogs also show a GPG-related exception when deleting a source, which is tracked as #4294.\r\n\r\n## Comments\r\n\r\n@kushaldas and I have been unable to replicate this bug in a staging environment (Kushal tested with the `pyy3` branch, I tested with `develop`); it appears to be dev env only.\r\n", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/4328/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/4328/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/4310", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/4310/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/4310/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/4310/events", "html_url": "https://github.com/freedomofpress/securedrop/issues/4310", "id": 427836264, "node_id": "MDU6SXNzdWU0Mjc4MzYyNjQ=", "number": 4310, "title": "Update default staging target to Xenial", "user": {"login": "eloquence", "id": 213636, "node_id": "MDQ6VXNlcjIxMzYzNg==", "avatar_url": "https://avatars.githubusercontent.com/u/213636?v=4", "gravatar_id": "", "url": "https://api.github.com/users/eloquence", "html_url": "https://github.com/eloquence", "followers_url": "https://api.github.com/users/eloquence/followers", "following_url": "https://api.github.com/users/eloquence/following{/other_user}", "gists_url": "https://api.github.com/users/eloquence/gists{/gist_id}", "starred_url": "https://api.github.com/users/eloquence/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/eloquence/subscriptions", "organizations_url": "https://api.github.com/users/eloquence/orgs", "repos_url": "https://api.github.com/users/eloquence/repos", "events_url": "https://api.github.com/users/eloquence/events{/privacy}", "received_events_url": "https://api.github.com/users/eloquence/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2019-04-01T17:57:25Z", "updated_at": "2019-04-03T19:50:24Z", "closed_at": "2019-04-03T19:50:24Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "The `securedrop_staging_install_target_distro` is currently set to `trusty` in \r\nhttps://github.com/freedomofpress/securedrop/blob/develop/install_files/ansible-base/group_vars/all/securedrop . This needs to be changed to `xenial` as part of #4155. ", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/4310/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/4310/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/4294", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/4294/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/4294/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/4294/events", "html_url": "https://github.com/freedomofpress/securedrop/issues/4294", "id": 424848314, "node_id": "MDU6SXNzdWU0MjQ4NDgzMTQ=", "number": 4294, "title": "GPG PINENTRY_LAUNCHED error when sources are deleted", "user": {"login": "heartsucker", "id": 3998464, "node_id": "MDQ6VXNlcjM5OTg0NjQ=", "avatar_url": "https://avatars.githubusercontent.com/u/3998464?v=4", "gravatar_id": "", "url": "https://api.github.com/users/heartsucker", "html_url": "https://github.com/heartsucker", "followers_url": "https://api.github.com/users/heartsucker/followers", "following_url": "https://api.github.com/users/heartsucker/following{/other_user}", "gists_url": "https://api.github.com/users/heartsucker/gists{/gist_id}", "starred_url": "https://api.github.com/users/heartsucker/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/heartsucker/subscriptions", "organizations_url": "https://api.github.com/users/heartsucker/orgs", "repos_url": "https://api.github.com/users/heartsucker/repos", "events_url": "https://api.github.com/users/heartsucker/events{/privacy}", "received_events_url": "https://api.github.com/users/heartsucker/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}, {"id": 385585080, "node_id": "MDU6TGFiZWwzODU1ODUwODA=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/QA:%20Release", "name": "QA: Release", "color": "fbca04", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "redshiftzero", "id": 7832803, "node_id": "MDQ6VXNlcjc4MzI4MDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7832803?v=4", "gravatar_id": "", "url": "https://api.github.com/users/redshiftzero", "html_url": "https://github.com/redshiftzero", "followers_url": "https://api.github.com/users/redshiftzero/followers", "following_url": "https://api.github.com/users/redshiftzero/following{/other_user}", "gists_url": "https://api.github.com/users/redshiftzero/gists{/gist_id}", "starred_url": "https://api.github.com/users/redshiftzero/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/redshiftzero/subscriptions", "organizations_url": "https://api.github.com/users/redshiftzero/orgs", "repos_url": "https://api.github.com/users/redshiftzero/repos", "events_url": "https://api.github.com/users/redshiftzero/events{/privacy}", "received_events_url": "https://api.github.com/users/redshiftzero/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "redshiftzero", "id": 7832803, "node_id": "MDQ6VXNlcjc4MzI4MDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7832803?v=4", "gravatar_id": "", "url": "https://api.github.com/users/redshiftzero", "html_url": "https://github.com/redshiftzero", "followers_url": "https://api.github.com/users/redshiftzero/followers", "following_url": "https://api.github.com/users/redshiftzero/following{/other_user}", "gists_url": "https://api.github.com/users/redshiftzero/gists{/gist_id}", "starred_url": "https://api.github.com/users/redshiftzero/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/redshiftzero/subscriptions", "organizations_url": "https://api.github.com/users/redshiftzero/orgs", "repos_url": "https://api.github.com/users/redshiftzero/repos", "events_url": "https://api.github.com/users/redshiftzero/events{/privacy}", "received_events_url": "https://api.github.com/users/redshiftzero/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/freedomofpress/securedrop/milestones/53", "html_url": "https://github.com/freedomofpress/securedrop/milestone/53", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/milestones/53/labels", "id": 4178776, "node_id": "MDk6TWlsZXN0b25lNDE3ODc3Ng==", "number": 53, "title": "0.12.2", "description": "This is a point release issued to both Trusty and Xenial. It will, at minimum, include a kernel with support for the 7th generation NUCs, and a change to disable the source interface on instances running Trusty after April 30 (due to EOL for security updates).\r\n\r\nRelease manager: @emkll\r\nDeputy release manager: @rmol", "creator": {"login": "eloquence", "id": 213636, "node_id": "MDQ6VXNlcjIxMzYzNg==", "avatar_url": "https://avatars.githubusercontent.com/u/213636?v=4", "gravatar_id": "", "url": "https://api.github.com/users/eloquence", "html_url": "https://github.com/eloquence", "followers_url": "https://api.github.com/users/eloquence/followers", "following_url": "https://api.github.com/users/eloquence/following{/other_user}", "gists_url": "https://api.github.com/users/eloquence/gists{/gist_id}", "starred_url": "https://api.github.com/users/eloquence/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/eloquence/subscriptions", "organizations_url": "https://api.github.com/users/eloquence/orgs", "repos_url": "https://api.github.com/users/eloquence/repos", "events_url": "https://api.github.com/users/eloquence/events{/privacy}", "received_events_url": "https://api.github.com/users/eloquence/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 14, "state": "closed", "created_at": "2019-03-28T00:55:25Z", "updated_at": "2019-09-19T23:12:58Z", "due_on": "2019-04-25T07:00:00Z", "closed_at": "2019-04-26T18:37:16Z"}, "comments": 7, "created_at": "2019-03-25T11:20:00Z", "updated_at": "2019-04-24T19:36:24Z", "closed_at": "2019-04-24T19:36:24Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "## Description\r\n\r\nDeleting a source raises this error.\r\n\r\n```pytb\r\nException in thread Thread-39:\r\nTraceback (most recent call last):\r\n  File \"/usr/lib/python2.7/threading.py\", line 801, in __bootstrap_inner\r\n    self.run()\r\n  File \"/usr/lib/python2.7/threading.py\", line 754, in run\r\n    self.__target(*self.__args, **self.__kwargs)\r\n  File \"/usr/local/lib/python2.7/dist-packages/pretty_bad_protocol/_meta.py\", line 670, in _read_response\r\n    result._handle_status(keyword, value)\r\n  File \"/usr/local/lib/python2.7/dist-packages/pretty_bad_protocol/_parsers.py\", line 1024, in _handle_status\r\n    raise ValueError(\"Unknown status message: %r\" % key)\r\nValueError: Unknown status message: u'PINENTRY_LAUNCHED'\r\n```\r\n\r\n## Steps to Reproduce\r\n\r\n- Start container\r\n- Start client\r\n- Delete source\r\n\r\n## Expected Behavior\r\n\r\nNo errors.\r\n\r\n## Actual Behavior\r\n\r\nThere are errors but the HTTP code is still 200, and the key is still deleted on the server side.", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/4294/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/4294/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/4206", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/4206/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/4206/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/4206/events", "html_url": "https://github.com/freedomofpress/securedrop/issues/4206", "id": 414890744, "node_id": "MDU6SXNzdWU0MTQ4OTA3NDQ=", "number": 4206, "title": "Tor packages not upgraded immediately during Xenial upgrade", "user": {"login": "eloquence", "id": 213636, "node_id": "MDQ6VXNlcjIxMzYzNg==", "avatar_url": "https://avatars.githubusercontent.com/u/213636?v=4", "gravatar_id": "", "url": "https://api.github.com/users/eloquence", "html_url": "https://github.com/eloquence", "followers_url": "https://api.github.com/users/eloquence/followers", "following_url": "https://api.github.com/users/eloquence/following{/other_user}", "gists_url": "https://api.github.com/users/eloquence/gists{/gist_id}", "starred_url": "https://api.github.com/users/eloquence/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/eloquence/subscriptions", "organizations_url": "https://api.github.com/users/eloquence/orgs", "repos_url": "https://api.github.com/users/eloquence/repos", "events_url": "https://api.github.com/users/eloquence/events{/privacy}", "received_events_url": "https://api.github.com/users/eloquence/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2019-02-27T00:46:43Z", "updated_at": "2019-05-20T20:21:18Z", "closed_at": "2019-05-20T20:21:17Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "During QA of 0.12.0, @zenmonkeykstop observed that Tor was not updated immediately after upgrading (following the upgrade-in-place procedure) from Trusty to Xenial. Instead of the Xenial 0.3.5.x series (#4031), the Trusty 0.3.4.x series package was used until the next `cron-apt` run.\r\n\r\nAs a precaution and to ensure the upgrade logic behaves fully as we expect it to, we should ensure that the Tor package is updated immediately after an in-place upgrade.", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/4206/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/4206/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/4202", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/4202/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/4202/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/4202/events", "html_url": "https://github.com/freedomofpress/securedrop/issues/4202", "id": 414813490, "node_id": "MDU6SXNzdWU0MTQ4MTM0OTA=", "number": 4202, "title": "gnupg IMPORT_OK error on first submission after Xenial upgrade", "user": {"login": "zenmonkeykstop", "id": 2782952, "node_id": "MDQ6VXNlcjI3ODI5NTI=", "avatar_url": "https://avatars.githubusercontent.com/u/2782952?v=4", "gravatar_id": "", "url": "https://api.github.com/users/zenmonkeykstop", "html_url": "https://github.com/zenmonkeykstop", "followers_url": "https://api.github.com/users/zenmonkeykstop/followers", "following_url": "https://api.github.com/users/zenmonkeykstop/following{/other_user}", "gists_url": "https://api.github.com/users/zenmonkeykstop/gists{/gist_id}", "starred_url": "https://api.github.com/users/zenmonkeykstop/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/zenmonkeykstop/subscriptions", "organizations_url": "https://api.github.com/users/zenmonkeykstop/orgs", "repos_url": "https://api.github.com/users/zenmonkeykstop/repos", "events_url": "https://api.github.com/users/zenmonkeykstop/events{/privacy}", "received_events_url": "https://api.github.com/users/zenmonkeykstop/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}, {"id": 1106060106, "node_id": "MDU6TGFiZWwxMTA2MDYwMTA2", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/needs/reproducing", "name": "needs/reproducing", "color": "3dce6b", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 8, "created_at": "2019-02-26T20:52:43Z", "updated_at": "2019-03-14T18:48:02Z", "closed_at": "2019-03-14T18:47:38Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "## Description\r\n\r\nWith source interface logging turned on, the following error is recorded on the first submission after a Xenial upgrade-in-place:\r\n```\r\n[Tue Feb 26 14:25:54.508513 2019] [wsgi:error] [pid 6541:tid 4015837193984] Exception in thread Thread-11:\r\n[Tue Feb 26 14:25:54.508548 2019] [wsgi:error] [pid 6541:tid 4015837193984] Traceback (most recent call last):\r\n[Tue Feb 26 14:25:54.508557 2019] [wsgi:error] [pid 6541:tid 4015837193984]   File \"/usr/lib/python2.7/threading.py\", line 801, in __bootstrap_inner\r\n[Tue Feb 26 14:25:54.508565 2019] [wsgi:error] [pid 6541:tid 4015837193984]     self.run()\r\n[Tue Feb 26 14:25:54.508572 2019] [wsgi:error] [pid 6541:tid 4015837193984]   File \"/usr/lib/python2.7/threading.py\", line 754, in run\r\n[Tue Feb 26 14:25:54.508580 2019] [wsgi:error] [pid 6541:tid 4015837193984]     self.__target(*self.__args, **self.__kwargs)\r\n[Tue Feb 26 14:25:54.508588 2019] [wsgi:error] [pid 6541:tid 4015837193984]   File \"/usr/local/lib/python2.7/dist-packages/pretty_bad_protocol/_meta.py\", line 670, in _read_response\r\n[Tue Feb 26 14:25:54.508596 2019] [wsgi:error] [pid 6541:tid 4015837193984]     result._handle_status(keyword, value)\r\n[Tue Feb 26 14:25:54.508604 2019] [wsgi:error] [pid 6541:tid 4015837193984]   File \"/usr/local/lib/python2.7/dist-packages/pretty_bad_protocol/_parsers.py\", line 995, in _handle_status\r\n[Tue Feb 26 14:25:54.508612 2019] [wsgi:error] [pid 6541:tid 4015837193984]     raise ValueError(\"Unknown status message: %r\" % key)\r\n[Tue Feb 26 14:25:54.508619 2019] [wsgi:error] [pid 6541:tid 4015837193984] ValueError: Unknown status message: u'IMPORT_OK'\r\n[Tue Feb 26 14:25:54.508630 2019] [wsgi:error] [pid 6541:tid 4015837193984] \r\n```\r\n(This was seen on NUCs, but there's nothing obviously HW-specific about it)\r\n\r\nIt doesn't seem to have any functional impact, messages are decryptable.\r\n\r\n## Steps to Reproduce\r\n\r\n- Create a 0.12.0 Trusty instance, submit a document via the Source Interface, and verify that a GPG key has been created for the source (either by checking directly or replying to the source via the Journalist Interface)\r\n- Follow the upgrade-in-place procedure to upgrade the instance to Xenial 0.12.0\r\n- enable logging for the source interface (replace log config in /etc/apache2/sites-enabled/source.conf)\r\n- submit a test message while tailing the source interface apache2 error log\r\n\r\n\r\n## Expected Behavior\r\nNo errors recorded in log\r\n\r\n## Actual Behavior\r\nAbove errors recorded in log\r\n\r\nPlease provide screenshots where appropriate.\r\n", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/4202/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/4202/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/4192", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/4192/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/4192/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/4192/events", "html_url": "https://github.com/freedomofpress/securedrop/issues/4192", "id": 414350537, "node_id": "MDU6SXNzdWU0MTQzNTA1Mzc=", "number": 4192, "title": "error when compiling ro translations", "user": {"login": "redshiftzero", "id": 7832803, "node_id": "MDQ6VXNlcjc4MzI4MDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7832803?v=4", "gravatar_id": "", "url": "https://api.github.com/users/redshiftzero", "html_url": "https://github.com/redshiftzero", "followers_url": "https://api.github.com/users/redshiftzero/followers", "following_url": "https://api.github.com/users/redshiftzero/following{/other_user}", "gists_url": "https://api.github.com/users/redshiftzero/gists{/gist_id}", "starred_url": "https://api.github.com/users/redshiftzero/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/redshiftzero/subscriptions", "organizations_url": "https://api.github.com/users/redshiftzero/orgs", "repos_url": "https://api.github.com/users/redshiftzero/repos", "events_url": "https://api.github.com/users/redshiftzero/events{/privacy}", "received_events_url": "https://api.github.com/users/redshiftzero/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}, {"id": 652906953, "node_id": "MDU6TGFiZWw2NTI5MDY5NTM=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/i18n", "name": "i18n", "color": "d4c5f9", "default": false, "description": "Anything related to translation or internationalization of SecureDrop"}], "state": "closed", "locked": false, "assignee": {"login": "redshiftzero", "id": 7832803, "node_id": "MDQ6VXNlcjc4MzI4MDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7832803?v=4", "gravatar_id": "", "url": "https://api.github.com/users/redshiftzero", "html_url": "https://github.com/redshiftzero", "followers_url": "https://api.github.com/users/redshiftzero/followers", "following_url": "https://api.github.com/users/redshiftzero/following{/other_user}", "gists_url": "https://api.github.com/users/redshiftzero/gists{/gist_id}", "starred_url": "https://api.github.com/users/redshiftzero/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/redshiftzero/subscriptions", "organizations_url": "https://api.github.com/users/redshiftzero/orgs", "repos_url": "https://api.github.com/users/redshiftzero/repos", "events_url": "https://api.github.com/users/redshiftzero/events{/privacy}", "received_events_url": "https://api.github.com/users/redshiftzero/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "redshiftzero", "id": 7832803, "node_id": "MDQ6VXNlcjc4MzI4MDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7832803?v=4", "gravatar_id": "", "url": "https://api.github.com/users/redshiftzero", "html_url": "https://github.com/redshiftzero", "followers_url": "https://api.github.com/users/redshiftzero/followers", "following_url": "https://api.github.com/users/redshiftzero/following{/other_user}", "gists_url": "https://api.github.com/users/redshiftzero/gists{/gist_id}", "starred_url": "https://api.github.com/users/redshiftzero/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/redshiftzero/subscriptions", "organizations_url": "https://api.github.com/users/redshiftzero/orgs", "repos_url": "https://api.github.com/users/redshiftzero/repos", "events_url": "https://api.github.com/users/redshiftzero/events{/privacy}", "received_events_url": "https://api.github.com/users/redshiftzero/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2019-02-25T23:06:30Z", "updated_at": "2019-02-26T00:45:33Z", "closed_at": "2019-02-26T00:45:33Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "## Description\r\n\r\nDiscovered and fixed by @kushaldas in d63f61458cfdf41e95df673e2fba92b1c704d159, just filing this as an issue so there is a clear change history\r\n\r\n## Steps to Reproduce\r\n\r\n1. Add `ro` (Romanian) to SecureDrop's supported languages (ref: 862860f80b9435cf5df2549f97dabe6f41182386)\r\n\r\n2. Compile translations:\r\n\r\n```\r\n$ securedrop/bin/dev-shell ./i18n_tool.py --verbose translate-desktop --compile\r\n```\r\n\r\n## Expected Behavior\r\n\r\n`.mo` files are created\r\n\r\n## Actual Behavior\r\n\r\n```\r\n$ securedrop/bin/dev-shell ./i18n_tool.py --verbose translate-desktop --compile\r\nRun with DOCKER_BUILD_VERBOSE=true for more information\r\nDocker image build in progress  done !\r\n2019-02-25 17:28:43,373 INFO <Command u'/usr/bin/msgfmt --desktop --template desktop-journalist-icon.j2.in -o desktop-journalist-icon.j2 -d .'>: starting process\r\n2019-02-25 17:28:43,380 INFO <Command u'/usr/bin/msgfmt --desktop --template desktop-journalist-icon.j2.in -o desktop-journalist-icon.j2 -d .', pid 9>: process started\r\nTraceback (most recent call last):\r\n  File \"./i18n_tool.py\", line 372, in <module>\r\n    sys.exit(I18NTool().main(sys.argv[1:]))\r\n  File \"./i18n_tool.py\", line 366, in main\r\n    return args.func(args)\r\n  File \"./i18n_tool.py\", line 139, in translate_desktop\r\n    _cwd=args.translations_dir)\r\n  File \"/usr/local/lib/python2.7/dist-packages/sh.py\", line 1427, in __call__\r\n    return RunningCommand(cmd, call_args, stdin, stdout, stderr)\r\n  File \"/usr/local/lib/python2.7/dist-packages/sh.py\", line 774, in __init__\r\n    self.wait()\r\n  File \"/usr/local/lib/python2.7/dist-packages/sh.py\", line 792, in wait\r\n    self.handle_command_exit_code(exit_code)\r\n  File \"/usr/local/lib/python2.7/dist-packages/sh.py\", line 815, in handle_command_exit_code\r\n    raise exc\r\nsh.ErrorReturnCode_1: \r\n\r\n  RAN: /usr/bin/msgfmt --desktop --template desktop-journalist-icon.j2.in -o desktop-journalist-icon.j2 -d .\r\n\r\n  STDOUT:\r\n\r\n\r\n  STDERR:\r\n/usr/bin/msgfmt: error while opening \"r.po\" for reading: No such file or directory\r\n```\r\n\r\n## Comments\r\n\r\nThis is due to rstrip stripping an additional character", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/4192/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/4192/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/4191", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/4191/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/4191/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/4191/events", "html_url": "https://github.com/freedomofpress/securedrop/issues/4191", "id": 414334855, "node_id": "MDU6SXNzdWU0MTQzMzQ4NTU=", "number": 4191, "title": "test_deb_package_contains_expected_conffiles fails on macOS", "user": {"login": "redshiftzero", "id": 7832803, "node_id": "MDQ6VXNlcjc4MzI4MDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7832803?v=4", "gravatar_id": "", "url": "https://api.github.com/users/redshiftzero", "html_url": "https://github.com/redshiftzero", "followers_url": "https://api.github.com/users/redshiftzero/followers", "following_url": "https://api.github.com/users/redshiftzero/following{/other_user}", "gists_url": "https://api.github.com/users/redshiftzero/gists{/gist_id}", "starred_url": "https://api.github.com/users/redshiftzero/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/redshiftzero/subscriptions", "organizations_url": "https://api.github.com/users/redshiftzero/orgs", "repos_url": "https://api.github.com/users/redshiftzero/repos", "events_url": "https://api.github.com/users/redshiftzero/events{/privacy}", "received_events_url": "https://api.github.com/users/redshiftzero/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}, {"id": 768806890, "node_id": "MDU6TGFiZWw3Njg4MDY4OTA=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/goals:%20packaging", "name": "goals: packaging", "color": "0e8a16", "default": false, "description": null}, {"id": 905325692, "node_id": "MDU6TGFiZWw5MDUzMjU2OTI=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/needs/discussion", "name": "needs/discussion", "color": "bfd4f2", "default": false, "description": "queued up for discussion at future team meeting. Use judiciously."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2019-02-25T22:19:49Z", "updated_at": "2022-10-04T19:13:58Z", "closed_at": "2022-10-04T19:13:58Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "## Description\r\n\r\nUnexpected test failure when building debs on mac \r\n\r\n## Steps to Reproduce\r\n\r\n`make build-debs`\r\n\r\n## Expected Behavior\r\n\r\nAll tests pass\r\n\r\n## Actual Behavior\r\n\r\n```\r\n     test_deb_package_contains_expected_conffiles[docker://xenial-sd-dpkg-verification-/tmp/build/securedrop-app-code_0.12.0~rc1+xenial_amd64.deb]\r\n    [gw2] darwin -- Python 2.7.14 /Users/redshiftzero/.virtualenvs/securedrop/bin/python\r\n\r\n    host = <testinfra.host.Host object at 0x110c6ea90>\r\n    deb = '/tmp/build/securedrop-app-code_0.12.0~rc1+xenial_amd64.deb'\r\n\r\n        @pytest.mark.parametrize(\"deb\", deb_packages)\r\n        def test_deb_package_contains_expected_conffiles(host, deb):\r\n            \"\"\"\r\n            Ensures the `securedrop-app-code` package declares only whitelisted\r\n            `conffiles`. Several files in `/etc/` would automatically be marked\r\n            conffiles, which would break unattended updates to critical package\r\n            functionality such as AppArmor profiles. This test validates overrides\r\n            in the build logic to unset those conffiles.\r\n            \"\"\"\r\n            deb_package = host.file(deb.format(\r\n                securedrop_test_vars.securedrop_version))\r\n\r\n            # Only relevant for the securedrop-app-code package:\r\n            if \"securedrop-app-code\" in deb_package.path:\r\n                tmpdir = tempfile.mkdtemp()\r\n                # The `--raw-extract` flag includes `DEBIAN/` dir with control files\r\n                host.run(\"dpkg-deb --raw-extract {} {}\".format(deb, tmpdir))\r\n                conffiles_path = os.path.join(tmpdir, \"DEBIAN\", \"conffiles\")\r\n                f = host.file(conffiles_path)\r\n\r\n    >           assert f.is_file\r\n    E           assert False\r\n    E            +  where False = <file /var/folders/gv/2r10zvfj303fyd5_6yn_p0b80000gn/T/tmp2wh6VC/DEBIAN/conffiles>.is_file\r\n```\r\n\r\n## Comments\r\n\r\nIntroduced after merge of #4167, needs investigation", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/4191/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/4191/timeline", "performed_via_github_app": null, "state_reason": "not_planned"}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/4164", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/4164/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/4164/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/4164/events", "html_url": "https://github.com/freedomofpress/securedrop/issues/4164", "id": 412663755, "node_id": "MDU6SXNzdWU0MTI2NjM3NTU=", "number": 4164, "title": "[0.12.0] Prevent garbled terminal output during do-release-upgrade", "user": {"login": "eloquence", "id": 213636, "node_id": "MDQ6VXNlcjIxMzYzNg==", "avatar_url": "https://avatars.githubusercontent.com/u/213636?v=4", "gravatar_id": "", "url": "https://api.github.com/users/eloquence", "html_url": "https://github.com/eloquence", "followers_url": "https://api.github.com/users/eloquence/followers", "following_url": "https://api.github.com/users/eloquence/following{/other_user}", "gists_url": "https://api.github.com/users/eloquence/gists{/gist_id}", "starred_url": "https://api.github.com/users/eloquence/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/eloquence/subscriptions", "organizations_url": "https://api.github.com/users/eloquence/orgs", "repos_url": "https://api.github.com/users/eloquence/repos", "events_url": "https://api.github.com/users/eloquence/events{/privacy}", "received_events_url": "https://api.github.com/users/eloquence/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}, {"id": 385585080, "node_id": "MDU6TGFiZWwzODU1ODUwODA=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/QA:%20Release", "name": "QA: Release", "color": "fbca04", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2019-02-20T22:42:58Z", "updated_at": "2019-02-27T18:00:51Z", "closed_at": "2019-02-27T18:00:50Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "As noted in #3965,  performing an upgrade to Xenial from the Admin Workstation can result in garbled terminal output as follows:\r\n\r\n![terminal](https://user-images.githubusercontent.com/213636/53129859-90224700-351d-11e9-8e8b-813dd1940726.png)\r\n\r\nIn the draft documentation, we recommend resizing the terminal window until the dialogs are correctly aligned. If we can do more to ensure the user never encounters this issue, we should do so.", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/4164/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/4164/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/4161", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/4161/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/4161/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/4161/events", "html_url": "https://github.com/freedomofpress/securedrop/issues/4161", "id": 412529532, "node_id": "MDU6SXNzdWU0MTI1Mjk1MzI=", "number": 4161, "title": "[0.12.0] AppArmor deny messages for lsb-release on upgrade", "user": {"login": "emkll", "id": 15223328, "node_id": "MDQ6VXNlcjE1MjIzMzI4", "avatar_url": "https://avatars.githubusercontent.com/u/15223328?v=4", "gravatar_id": "", "url": "https://api.github.com/users/emkll", "html_url": "https://github.com/emkll", "followers_url": "https://api.github.com/users/emkll/followers", "following_url": "https://api.github.com/users/emkll/following{/other_user}", "gists_url": "https://api.github.com/users/emkll/gists{/gist_id}", "starred_url": "https://api.github.com/users/emkll/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/emkll/subscriptions", "organizations_url": "https://api.github.com/users/emkll/orgs", "repos_url": "https://api.github.com/users/emkll/repos", "events_url": "https://api.github.com/users/emkll/events{/privacy}", "received_events_url": "https://api.github.com/users/emkll/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}, {"id": 385585080, "node_id": "MDU6TGFiZWwzODU1ODUwODA=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/QA:%20Release", "name": "QA: Release", "color": "fbca04", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/freedomofpress/securedrop/milestones/49", "html_url": "https://github.com/freedomofpress/securedrop/milestone/49", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/milestones/49/labels", "id": 3894378, "node_id": "MDk6TWlsZXN0b25lMzg5NDM3OA==", "number": 49, "title": "0.12.0", "description": "Decoupled from Tails release cycle.\r\n\r\nQA and feature freeze begins: 2019-02-12 (EOD PDT). String freeze: 2019-02-19 (EOD PDT).\r\n\r\nRelease manager: @heartsucker", "creator": {"login": "eloquence", "id": 213636, "node_id": "MDQ6VXNlcjIxMzYzNg==", "avatar_url": "https://avatars.githubusercontent.com/u/213636?v=4", "gravatar_id": "", "url": "https://api.github.com/users/eloquence", "html_url": "https://github.com/eloquence", "followers_url": "https://api.github.com/users/eloquence/followers", "following_url": "https://api.github.com/users/eloquence/following{/other_user}", "gists_url": "https://api.github.com/users/eloquence/gists{/gist_id}", "starred_url": "https://api.github.com/users/eloquence/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/eloquence/subscriptions", "organizations_url": "https://api.github.com/users/eloquence/orgs", "repos_url": "https://api.github.com/users/eloquence/repos", "events_url": "https://api.github.com/users/eloquence/events{/privacy}", "received_events_url": "https://api.github.com/users/eloquence/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 27, "state": "closed", "created_at": "2018-12-12T23:02:26Z", "updated_at": "2019-03-07T17:41:16Z", "due_on": "2019-02-26T08:00:00Z", "closed_at": "2019-03-07T17:41:16Z"}, "comments": 6, "created_at": "2019-02-20T16:57:30Z", "updated_at": "2019-02-22T16:30:42Z", "closed_at": "2019-02-22T16:30:42Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "## Description\r\n\r\nThere are AppArmor deny messages when a user navigates to the journalist interface when upgrading to 0.12.0-rc2. from 0.11.1\r\n\r\n## Steps to Reproduce\r\n\r\n1. Upgrade to 0.12.0-rc2 from 0.11.1\r\n2. Navigate to the journalist interface\r\n3. Observe AppArmor denies in /var/log/kern.log:\r\n```\r\nFeb 20 16:50:31 app-prod kernel: [ 7236.252571] audit: type=1400 audit(1550681431.003:49): apparmor=\"DENIED\" operation=\"open\" profile=\"/usr/sbin/apache2\" name=\"/etc/\" pid=5359 comm=\"apache2\" requested_mask=\"r\" denied_mask=\"r\" fsuid=33 ouid=0\r\n```\r\n\r\n## Expected Behavior\r\nAppArmor profile should allow Apache to read the current release\r\n\r\n## Actual Behavior\r\n\r\nAppArmor profile denies read access to the file\r\n\r\n## Comments\r\n\r\nIt appears that securedrop-app-code package does not overwrite the existing apache2 configuration, as there are two configs in `/etc/apparmor.d/`: \r\n```\r\nvagrant@app-prod:~$ ls -lah /etc/apparmor.d/usr.sbin.apache2*\r\n-rw-r--r-- 1 root root 14K Feb 20 14:48 /etc/apparmor.d/usr.sbin.apache2\r\n-rw-r--r-- 1 root root 15K Feb 18 19:35 /etc/apparmor.d/usr.sbin.apache2.dpkg-dist\r\n```\r\nThis is likely due to `Dpkg::Options::=--force-confold` in `/etc/cron-apt/action.d/5-security`\r\n", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/4161/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/4161/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/4110", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/4110/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/4110/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/4110/events", "html_url": "https://github.com/freedomofpress/securedrop/issues/4110", "id": 408019752, "node_id": "MDU6SXNzdWU0MDgwMTk3NTI=", "number": 4110, "title": "[xenial] File uploads fail on source interface on Xenial, with SecureTemporaryFile-related error", "user": {"login": "zenmonkeykstop", "id": 2782952, "node_id": "MDQ6VXNlcjI3ODI5NTI=", "avatar_url": "https://avatars.githubusercontent.com/u/2782952?v=4", "gravatar_id": "", "url": "https://api.github.com/users/zenmonkeykstop", "html_url": "https://github.com/zenmonkeykstop", "followers_url": "https://api.github.com/users/zenmonkeykstop/followers", "following_url": "https://api.github.com/users/zenmonkeykstop/following{/other_user}", "gists_url": "https://api.github.com/users/zenmonkeykstop/gists{/gist_id}", "starred_url": "https://api.github.com/users/zenmonkeykstop/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/zenmonkeykstop/subscriptions", "organizations_url": "https://api.github.com/users/zenmonkeykstop/orgs", "repos_url": "https://api.github.com/users/zenmonkeykstop/repos", "events_url": "https://api.github.com/users/zenmonkeykstop/events{/privacy}", "received_events_url": "https://api.github.com/users/zenmonkeykstop/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}, {"id": 157793311, "node_id": "MDU6TGFiZWwxNTc3OTMzMTE=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/priority/high", "name": "priority/high", "color": "e64ef4", "default": false, "description": ""}, {"id": 616447592, "node_id": "MDU6TGFiZWw2MTY0NDc1OTI=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/staging%20VMs", "name": "staging VMs", "color": "bfd4f2", "default": false, "description": null}, {"id": 625966031, "node_id": "MDU6TGFiZWw2MjU5NjYwMzE=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/able%20to%20reproduce", "name": "able to reproduce", "color": "fbca04", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2019-02-08T06:10:25Z", "updated_at": "2019-02-12T18:26:35Z", "closed_at": "2019-02-12T18:26:35Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "## Description\r\n\r\nFile uploads of any size fail in the Source Interface on a Xenial-based system, with the error message \r\n\r\n```\r\nServer error\r\n\r\nSorry, the website encountered an error and was unable to complete your request.\r\n```\r\n\r\nTurning on logging for the source interface, the following error log is recorded on file submissions:\r\n\r\n```\r\n[Fri Feb 08 00:55:32.641676 2019] [wsgi:error] [pid 2798:tid 3926105958144] [remote 127.0.0.1:10793] [2019-02-08 00:55:32,641] ERROR in app: Exception on /submit [POST]\r\n[Fri Feb 08 00:55:32.641722 2019] [wsgi:error] [pid 2798:tid 3926105958144] [remote 127.0.0.1:10793] Traceback (most recent call last):\r\n[Fri Feb 08 00:55:32.641731 2019] [wsgi:error] [pid 2798:tid 3926105958144] [remote 127.0.0.1:10793]   File \"/usr/local/lib/python2.7/dist-packages/flask/app.py\", line 2292, in wsgi_app\r\n[Fri Feb 08 00:55:32.641738 2019] [wsgi:error] [pid 2798:tid 3926105958144] [remote 127.0.0.1:10793]     response = self.full_dispatch_request()\r\n[Fri Feb 08 00:55:32.641744 2019] [wsgi:error] [pid 2798:tid 3926105958144] [remote 127.0.0.1:10793]   File \"/usr/local/lib/python2.7/dist-packages/flask/app.py\", line 1815, in full_dispatch_request\r\n[Fri Feb 08 00:55:32.641764 2019] [wsgi:error] [pid 2798:tid 3926105958144] [remote 127.0.0.1:10793]     rv = self.handle_user_exception(e)\r\n[Fri Feb 08 00:55:32.641771 2019] [wsgi:error] [pid 2798:tid 3926105958144] [remote 127.0.0.1:10793]   File \"/usr/local/lib/python2.7/dist-packages/flask/app.py\", line 1718, in handle_user_exception\r\n[Fri Feb 08 00:55:32.641777 2019] [wsgi:error] [pid 2798:tid 3926105958144] [remote 127.0.0.1:10793]     reraise(exc_type, exc_value, tb)\r\n[Fri Feb 08 00:55:32.641783 2019] [wsgi:error] [pid 2798:tid 3926105958144] [remote 127.0.0.1:10793]   File \"/usr/local/lib/python2.7/dist-packages/flask/app.py\", line 1813, in full_dispatch_request\r\n[Fri Feb 08 00:55:32.641789 2019] [wsgi:error] [pid 2798:tid 3926105958144] [remote 127.0.0.1:10793]     rv = self.dispatch_request()\r\n[Fri Feb 08 00:55:32.641795 2019] [wsgi:error] [pid 2798:tid 3926105958144] [remote 127.0.0.1:10793]   File \"/usr/local/lib/python2.7/dist-packages/flask/app.py\", line 1799, in dispatch_request\r\n[Fri Feb 08 00:55:32.641801 2019] [wsgi:error] [pid 2798:tid 3926105958144] [remote 127.0.0.1:10793]     return self.view_functions[rule.endpoint](**req.view_args)\r\n[Fri Feb 08 00:55:32.641807 2019] [wsgi:error] [pid 2798:tid 3926105958144] [remote 127.0.0.1:10793]   File \"/var/www/securedrop/source_app/decorators.py\", line 12, in decorated_function\r\n[Fri Feb 08 00:55:32.641813 2019] [wsgi:error] [pid 2798:tid 3926105958144] [remote 127.0.0.1:10793]     return f(*args, **kwargs)\r\n[Fri Feb 08 00:55:32.641819 2019] [wsgi:error] [pid 2798:tid 3926105958144] [remote 127.0.0.1:10793]   File \"/var/www/securedrop/source_app/main.py\", line 158, in submit\r\n[Fri Feb 08 00:55:32.641825 2019] [wsgi:error] [pid 2798:tid 3926105958144] [remote 127.0.0.1:10793]     fh.stream))\r\n[Fri Feb 08 00:55:32.641831 2019] [wsgi:error] [pid 2798:tid 3926105958144] [remote 127.0.0.1:10793]   File \"/var/www/securedrop/store.py\", line 139, in save_file_submission\r\n[Fri Feb 08 00:55:32.641837 2019] [wsgi:error] [pid 2798:tid 3926105958144] [remote 127.0.0.1:10793]     with SecureTemporaryFile(\"/tmp\") as stf:  # nosec\r\n[Fri Feb 08 00:55:32.641843 2019] [wsgi:error] [pid 2798:tid 3926105958144] [remote 127.0.0.1:10793]   File \"/var/www/securedrop/secure_tempfile.py\", line 49, in __init__\r\n[Fri Feb 08 00:55:32.641849 2019] [wsgi:error] [pid 2798:tid 3926105958144] [remote 127.0.0.1:10793]     self.create_key()\r\n[Fri Feb 08 00:55:32.641855 2019] [wsgi:error] [pid 2798:tid 3926105958144] [remote 127.0.0.1:10793]   File \"/var/www/securedrop/secure_tempfile.py\", line 66, in create_key\r\n[Fri Feb 08 00:55:32.641861 2019] [wsgi:error] [pid 2798:tid 3926105958144] [remote 127.0.0.1:10793]     self.initialize_cipher()\r\n[Fri Feb 08 00:55:32.641867 2019] [wsgi:error] [pid 2798:tid 3926105958144] [remote 127.0.0.1:10793]   File \"/var/www/securedrop/secure_tempfile.py\", line 72, in initialize_cipher\r\n[Fri Feb 08 00:55:32.641873 2019] [wsgi:error] [pid 2798:tid 3926105958144] [remote 127.0.0.1:10793]     self.cipher = Cipher(AES(self.key), CTR(self.iv), default_backend())\r\n[Fri Feb 08 00:55:32.641880 2019] [wsgi:error] [pid 2798:tid 3926105958144] [remote 127.0.0.1:10793]   File \"/usr/local/lib/python2.7/dist-packages/cryptography/hazmat/backends/__init__.py\", line 15, in default_backend\r\n[Fri Feb 08 00:55:32.641886 2019] [wsgi:error] [pid 2798:tid 3926105958144] [remote 127.0.0.1:10793]     from cryptography.hazmat.backends.openssl.backend import backend\r\n[Fri Feb 08 00:55:32.641892 2019] [wsgi:error] [pid 2798:tid 3926105958144] [remote 127.0.0.1:10793]   File \"/usr/local/lib/python2.7/dist-packages/cryptography/hazmat/backends/openssl/__init__.py\", line 7, in <module>\r\n[Fri Feb 08 00:55:32.641899 2019] [wsgi:error] [pid 2798:tid 3926105958144] [remote 127.0.0.1:10793]     from cryptography.hazmat.backends.openssl.backend import backend\r\n[Fri Feb 08 00:55:32.641905 2019] [wsgi:error] [pid 2798:tid 3926105958144] [remote 127.0.0.1:10793]   File \"/usr/local/lib/python2.7/dist-packages/cryptography/hazmat/backends/openssl/backend.py\", line 23, in <module>\r\n[Fri Feb 08 00:55:32.641911 2019] [wsgi:error] [pid 2798:tid 3926105958144] [remote 127.0.0.1:10793]     from cryptography.hazmat.backends.openssl import aead\r\n[Fri Feb 08 00:55:32.641931 2019] [wsgi:error] [pid 2798:tid 3926105958144] [remote 127.0.0.1:10793] ImportError: cannot import name aead\r\n[Fri Feb 08 00:55:32.645154 2019] [wsgi:error] [pid 2798:tid 3926105958144] Exception KeyError: KeyError('file',) in <bound method SecureTemporaryFile.__del__ of <secure_tempfile.SecureTemporaryFile object at 0x3920ae41890>> ignored\r\n```\r\n## Steps to Reproduce\r\nEnvironment: 5-Series NUCs running Ubuntu 16.04.5 as base OS (note that system  was installed using playbook described at bottom of #4109 to get around missing package issues)\r\n\r\n- Open the Source Interface  and browse to submissions page\r\n- Submit a file\r\n\r\n## Expected Behavior\r\nIf file is <500MB, submission completes without error\r\n\r\n## Actual Behavior\r\nRegardless of size, file submission fails as described above.\r\n\r\n## Comments\r\nI also saw a slightly different traceback a couple of times, failing with an openssl.so memory protection error, but I haven't been able to reproduce it since.\r\n\r\nIt's entirely possible that this is a result of the installation procedure for this test instance, see #4109 for details. But it doesn't look like there are missing packages that could account for the error.", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/4110/reactions", "total_count": 1, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/4110/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/4108", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/4108/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/4108/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/4108/events", "html_url": "https://github.com/freedomofpress/securedrop/issues/4108", "id": 407523941, "node_id": "MDU6SXNzdWU0MDc1MjM5NDE=", "number": 4108, "title": "[xenial] Handle import_ok exception during upgrade", "user": {"login": "redshiftzero", "id": 7832803, "node_id": "MDQ6VXNlcjc4MzI4MDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7832803?v=4", "gravatar_id": "", "url": "https://api.github.com/users/redshiftzero", "html_url": "https://github.com/redshiftzero", "followers_url": "https://api.github.com/users/redshiftzero/followers", "following_url": "https://api.github.com/users/redshiftzero/following{/other_user}", "gists_url": "https://api.github.com/users/redshiftzero/gists{/gist_id}", "starred_url": "https://api.github.com/users/redshiftzero/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/redshiftzero/subscriptions", "organizations_url": "https://api.github.com/users/redshiftzero/orgs", "repos_url": "https://api.github.com/users/redshiftzero/repos", "events_url": "https://api.github.com/users/redshiftzero/events{/privacy}", "received_events_url": "https://api.github.com/users/redshiftzero/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/freedomofpress/securedrop/milestones/49", "html_url": "https://github.com/freedomofpress/securedrop/milestone/49", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/milestones/49/labels", "id": 3894378, "node_id": "MDk6TWlsZXN0b25lMzg5NDM3OA==", "number": 49, "title": "0.12.0", "description": "Decoupled from Tails release cycle.\r\n\r\nQA and feature freeze begins: 2019-02-12 (EOD PDT). String freeze: 2019-02-19 (EOD PDT).\r\n\r\nRelease manager: @heartsucker", "creator": {"login": "eloquence", "id": 213636, "node_id": "MDQ6VXNlcjIxMzYzNg==", "avatar_url": "https://avatars.githubusercontent.com/u/213636?v=4", "gravatar_id": "", "url": "https://api.github.com/users/eloquence", "html_url": "https://github.com/eloquence", "followers_url": "https://api.github.com/users/eloquence/followers", "following_url": "https://api.github.com/users/eloquence/following{/other_user}", "gists_url": "https://api.github.com/users/eloquence/gists{/gist_id}", "starred_url": "https://api.github.com/users/eloquence/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/eloquence/subscriptions", "organizations_url": "https://api.github.com/users/eloquence/orgs", "repos_url": "https://api.github.com/users/eloquence/repos", "events_url": "https://api.github.com/users/eloquence/events{/privacy}", "received_events_url": "https://api.github.com/users/eloquence/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 27, "state": "closed", "created_at": "2018-12-12T23:02:26Z", "updated_at": "2019-03-07T17:41:16Z", "due_on": "2019-02-26T08:00:00Z", "closed_at": "2019-03-07T17:41:16Z"}, "comments": 0, "created_at": "2019-02-07T03:05:21Z", "updated_at": "2019-02-18T15:30:58Z", "closed_at": "2019-02-18T15:30:58Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "## Description\r\n\r\nAfter upgrade to xenial, a one-time unhandled exception (about a successful gpg key import) occurs in a thread the first time gpg decryption occurs on the application server. This was found by @emkll during review of #4094. It does not cause an OSSEC alert or a regression in functionality, but we should see if we can handle it regardless. \r\n\r\nPart of #3204.\r\n\r\n## Steps to Reproduce\r\n\r\n0. Provision staging VMs\r\n1. Submit a document as a source\r\n2. Upgrade to xenial via `sudo do-release-upgrade` (some nice steps thanks to @zenmonkeykstop [here](https://github.com/freedomofpress/securedrop/issues/4057#issuecomment-460884539))\r\n3. `make build-debs-xenial`\r\n4. scp the securedrop-app-code deb into `app-staging` and install it\r\n5. Submit another document as a source\r\n\r\n## Expected Behavior\r\n\r\nNo tracebacks appear in `/var/log/apache2/source-error.log`\r\n\r\n## Actual Behavior\r\n\r\n```\r\n[Tue Feb 05 21:18:53.367308 2019] [wsgi:error] [pid 4478:tid 3513516791552] Exception in thread Thread-10:\r\n[Tue Feb 05 21:18:53.367335 2019] [wsgi:error] [pid 4478:tid 3513516791552] Traceback (most recent call last):\r\n[Tue Feb 05 21:18:53.367340 2019] [wsgi:error] [pid 4478:tid 3513516791552]   File \"/usr/lib/python2.7/threading.py\", line 801, in __bootstrap_inner\r\n[Tue Feb 05 21:18:53.367351 2019] [wsgi:error] [pid 4478:tid 3513516791552]     self.run()\r\n[Tue Feb 05 21:18:53.367355 2019] [wsgi:error] [pid 4478:tid 3513516791552]   File \"/usr/lib/python2.7/threading.py\", line 754, in run\r\n[Tue Feb 05 21:18:53.367358 2019] [wsgi:error] [pid 4478:tid 3513516791552]     self.__target(*self.__args, **self.__kwargs)\r\n[Tue Feb 05 21:18:53.367361 2019] [wsgi:error] [pid 4478:tid 3513516791552]   File \"/usr/local/lib/python2.7/dist-packages/pretty_bad_protocol/_meta.py\", line 670, in _read_response\r\n[Tue Feb 05 21:18:53.367365 2019] [wsgi:error] [pid 4478:tid 3513516791552]     result._handle_status(keyword, value)\r\n[Tue Feb 05 21:18:53.367368 2019] [wsgi:error] [pid 4478:tid 3513516791552]   File \"/usr/local/lib/python2.7/dist-packages/pretty_bad_protocol/_parsers.py\", line 995, in _handle_status\r\n[Tue Feb 05 21:18:53.367371 2019] [wsgi:error] [pid 4478:tid 3513516791552]     raise ValueError(\"Unknown status message: %r\" % key)\r\n[Tue Feb 05 21:18:53.367374 2019] [wsgi:error] [pid 4478:tid 3513516791552] ValueError: Unknown status message: u'IMPORT_OK'\r\n[Tue Feb 05 21:18:53.367379 2019] [wsgi:error] [pid 4478:tid 3513516791552] \r\n```\r\n\r\n## Comments\r\n\r\nSee my comments [here](https://github.com/freedomofpress/securedrop/pull/4094#issuecomment-461244030).", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/4108/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/4108/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/4078", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/4078/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/4078/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/4078/events", "html_url": "https://github.com/freedomofpress/securedrop/issues/4078", "id": 403981633, "node_id": "MDU6SXNzdWU0MDM5ODE2MzM=", "number": 4078, "title": "Some Source Interface uploads fail with Internal Server Error", "user": {"login": "zenmonkeykstop", "id": 2782952, "node_id": "MDQ6VXNlcjI3ODI5NTI=", "avatar_url": "https://avatars.githubusercontent.com/u/2782952?v=4", "gravatar_id": "", "url": "https://api.github.com/users/zenmonkeykstop", "html_url": "https://github.com/zenmonkeykstop", "followers_url": "https://api.github.com/users/zenmonkeykstop/followers", "following_url": "https://api.github.com/users/zenmonkeykstop/following{/other_user}", "gists_url": "https://api.github.com/users/zenmonkeykstop/gists{/gist_id}", "starred_url": "https://api.github.com/users/zenmonkeykstop/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/zenmonkeykstop/subscriptions", "organizations_url": "https://api.github.com/users/zenmonkeykstop/orgs", "repos_url": "https://api.github.com/users/zenmonkeykstop/repos", "events_url": "https://api.github.com/users/zenmonkeykstop/events{/privacy}", "received_events_url": "https://api.github.com/users/zenmonkeykstop/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}, {"id": 157793311, "node_id": "MDU6TGFiZWwxNTc3OTMzMTE=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/priority/high", "name": "priority/high", "color": "e64ef4", "default": false, "description": ""}, {"id": 625966031, "node_id": "MDU6TGFiZWw2MjU5NjYwMzE=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/able%20to%20reproduce", "name": "able to reproduce", "color": "fbca04", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/freedomofpress/securedrop/milestones/49", "html_url": "https://github.com/freedomofpress/securedrop/milestone/49", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/milestones/49/labels", "id": 3894378, "node_id": "MDk6TWlsZXN0b25lMzg5NDM3OA==", "number": 49, "title": "0.12.0", "description": "Decoupled from Tails release cycle.\r\n\r\nQA and feature freeze begins: 2019-02-12 (EOD PDT). String freeze: 2019-02-19 (EOD PDT).\r\n\r\nRelease manager: @heartsucker", "creator": {"login": "eloquence", "id": 213636, "node_id": "MDQ6VXNlcjIxMzYzNg==", "avatar_url": "https://avatars.githubusercontent.com/u/213636?v=4", "gravatar_id": "", "url": "https://api.github.com/users/eloquence", "html_url": "https://github.com/eloquence", "followers_url": "https://api.github.com/users/eloquence/followers", "following_url": "https://api.github.com/users/eloquence/following{/other_user}", "gists_url": "https://api.github.com/users/eloquence/gists{/gist_id}", "starred_url": "https://api.github.com/users/eloquence/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/eloquence/subscriptions", "organizations_url": "https://api.github.com/users/eloquence/orgs", "repos_url": "https://api.github.com/users/eloquence/repos", "events_url": "https://api.github.com/users/eloquence/events{/privacy}", "received_events_url": "https://api.github.com/users/eloquence/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 27, "state": "closed", "created_at": "2018-12-12T23:02:26Z", "updated_at": "2019-03-07T17:41:16Z", "due_on": "2019-02-26T08:00:00Z", "closed_at": "2019-03-07T17:41:16Z"}, "comments": 29, "created_at": "2019-01-28T19:57:24Z", "updated_at": "2019-02-20T01:35:50Z", "closed_at": "2019-02-20T01:35:50Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "## Description\r\n\r\nThe SD Source Interface should support file uploads of up to 500MB, with larger uploads failing immediately. Instead, large file uploads <500MB are frequently failing after a long timeout.\r\n\r\n(This was initially reported as happening with files of 50MB or more, but it isn't consistently reproducible at that size.)\r\n\r\n## Steps to Reproduce\r\nUsing VMs or a hardware instance:\r\n\r\n 1. Visit the Source Interface using the Tor Browser\r\n 2. Click through to the /lookup page\r\n 3. Upload a large file (50MB+)\r\n\r\n## Expected Behavior\r\nFile upload completes with success message on page.\r\n\r\n## Actual Behavior\r\nUpload has a pretty good chance of failing with message below:\r\n\r\n<img width=\"987\" alt=\"screen-shot-2019-01-28-at-11 52 40-am\" src=\"https://user-images.githubusercontent.com/2782952/51862492-9bee6500-22f3-11e9-978c-654fd159e7ef.png\">\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/4078/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/4078/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/4064", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/4064/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/4064/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/4064/events", "html_url": "https://github.com/freedomofpress/securedrop/issues/4064", "id": 402737052, "node_id": "MDU6SXNzdWU0MDI3MzcwNTI=", "number": 4064, "title": "Documentation about the API may have been incorrect leading to incorrect code", "user": {"login": "heartsucker", "id": 3998464, "node_id": "MDQ6VXNlcjM5OTg0NjQ=", "avatar_url": "https://avatars.githubusercontent.com/u/3998464?v=4", "gravatar_id": "", "url": "https://api.github.com/users/heartsucker", "html_url": "https://github.com/heartsucker", "followers_url": "https://api.github.com/users/heartsucker/followers", "following_url": "https://api.github.com/users/heartsucker/following{/other_user}", "gists_url": "https://api.github.com/users/heartsucker/gists{/gist_id}", "starred_url": "https://api.github.com/users/heartsucker/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/heartsucker/subscriptions", "organizations_url": "https://api.github.com/users/heartsucker/orgs", "repos_url": "https://api.github.com/users/heartsucker/repos", "events_url": "https://api.github.com/users/heartsucker/events{/privacy}", "received_events_url": "https://api.github.com/users/heartsucker/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}, {"id": 118465787, "node_id": "MDU6TGFiZWwxMTg0NjU3ODc=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/docs", "name": "docs", "color": "d4c5f9", "default": false, "description": null}, {"id": 625966031, "node_id": "MDU6TGFiZWw2MjU5NjYwMzE=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/able%20to%20reproduce", "name": "able to reproduce", "color": "fbca04", "default": false, "description": null}, {"id": 1189880309, "node_id": "MDU6TGFiZWwxMTg5ODgwMzA5", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/api", "name": "api", "color": "62efc2", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2019-01-24T14:39:07Z", "updated_at": "2019-01-24T22:04:46Z", "closed_at": "2019-01-24T22:04:45Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "## Description\r\n\r\nThe initial implementation of the API expected a header of the form:\r\n\r\n```http\r\nAuthorization: $token $value\r\n```\r\n\r\nThis was listed in the docs as\r\n\r\n```http\r\nAuthorization: Token $value\r\n```\r\n\r\nAnd in the code it was initially checked by this bit of code:\r\n\r\nhttps://github.com/freedomofpress/securedrop/blob/b725c81ab6755b02c90c698d35f4427bf1b30788/securedrop/journalist_app/api.py#L39-L40\r\n\r\nWhen we merged PR https://github.com/freedomofpress/securedrop/pull/4054, the code was updated to include an explicit check for the presence of the token `Token` in the header's value. The code is now this:\r\n\r\nhttps://github.com/freedomofpress/securedrop/blob/b662cd136ee6c497dd0ebc044411bcea33e29cc8/securedrop/journalist_app/api.py#L39-L43\r\n\r\nBecause of this explicit check, we have an issue in the client where we cannot authenticated with the server because the client uses the token `token` (note the lowercase `t`) in the auth header. See https://github.com/freedomofpress/securedrop-client/issues/232\r\n\r\n## Steps to Reproduce\r\n\r\n- Checkout `develop` in this repo (5bbd3fa4a)\r\n- Checkout `master` in the client repo (`0154d77`)\r\n- Authenticate to the server\r\n- Attempt another action that requires an API call\r\n\r\n## Expected Behavior\r\n\r\nThe API call succeeds.\r\n\r\n## Actual Behavior\r\n\r\nThe server returns 403 Forbidden.\r\n\r\n## Comments\r\n\r\nThe fix is decide on either the use of the token `Token` *or* `token` in the auth header and standardize it between the server (including docs) and SDK.", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/4064/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/4064/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/4053", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/4053/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/4053/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/4053/events", "html_url": "https://github.com/freedomofpress/securedrop/issues/4053", "id": 401431638, "node_id": "MDU6SXNzdWU0MDE0MzE2Mzg=", "number": 4053, "title": "Malformed tokens throw exceptions", "user": {"login": "heartsucker", "id": 3998464, "node_id": "MDQ6VXNlcjM5OTg0NjQ=", "avatar_url": "https://avatars.githubusercontent.com/u/3998464?v=4", "gravatar_id": "", "url": "https://api.github.com/users/heartsucker", "html_url": "https://github.com/heartsucker", "followers_url": "https://api.github.com/users/heartsucker/followers", "following_url": "https://api.github.com/users/heartsucker/following{/other_user}", "gists_url": "https://api.github.com/users/heartsucker/gists{/gist_id}", "starred_url": "https://api.github.com/users/heartsucker/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/heartsucker/subscriptions", "organizations_url": "https://api.github.com/users/heartsucker/orgs", "repos_url": "https://api.github.com/users/heartsucker/repos", "events_url": "https://api.github.com/users/heartsucker/events{/privacy}", "received_events_url": "https://api.github.com/users/heartsucker/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}, {"id": 625966031, "node_id": "MDU6TGFiZWw2MjU5NjYwMzE=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/able%20to%20reproduce", "name": "able to reproduce", "color": "fbca04", "default": false, "description": null}, {"id": 1189880309, "node_id": "MDU6TGFiZWwxMTg5ODgwMzA5", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/api", "name": "api", "color": "62efc2", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2019-01-21T16:37:52Z", "updated_at": "2019-01-22T10:05:06Z", "closed_at": "2019-01-22T10:05:06Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "## Description\r\n\r\nA header of the form `Authorization: some-token-value-here` will cause an exception.\r\n\r\n## Steps to Reproduce\r\n\r\n```bash\r\nhttp --json GET localhost:8081/api/v1/sources 'Authorization: eyJhbGciOiJIUzI1NiIsImV4cCI6MTU0ODExNzEzNSwiaWF0IjoxNTQ4MDg4MzM1fQ.eyJpZCI6MX0.VjCdcVOPjsHWGl79wZAz4vjHVRANmCs_g-G6uyiFSl8'\r\n# -----------------------------------------------------------^\r\n# note the missing token \"token\"\r\n```\r\n\r\n## Expected Behavior\r\n\r\nHTTP 403\r\n\r\n## Actual Behavior\r\n\r\n```pytb\r\nTraceback (most recent call last):\r\n  File \"/usr/local/lib/python2.7/dist-packages/flask/app.py\", line 2309, in __call__\r\n    return self.wsgi_app(environ, start_response)\r\n  File \"/usr/local/lib/python2.7/dist-packages/flask/app.py\", line 2295, in wsgi_app\r\n    response = self.handle_exception(e)\r\n  File \"/usr/local/lib/python2.7/dist-packages/flask/app.py\", line 1741, in handle_exception\r\n    reraise(exc_type, exc_value, tb)\r\n  File \"/usr/local/lib/python2.7/dist-packages/flask/app.py\", line 2292, in wsgi_app\r\n    response = self.full_dispatch_request()\r\n  File \"/usr/local/lib/python2.7/dist-packages/flask/app.py\", line 1815, in full_dispatch_request\r\n    rv = self.handle_user_exception(e)\r\n  File \"/usr/local/lib/python2.7/dist-packages/flask/app.py\", line 1718, in handle_user_exception\r\n    reraise(exc_type, exc_value, tb)\r\n  File \"/usr/local/lib/python2.7/dist-packages/flask/app.py\", line 1813, in full_dispatch_request\r\n    rv = self.dispatch_request()\r\n  File \"/usr/local/lib/python2.7/dist-packages/flask/app.py\", line 1799, in dispatch_request\r\n    return self.view_functions[rule.endpoint](**req.view_args)\r\n  File \"/home/heartsucker/code/freedomofpress/securedrop/securedrop/journalist_app/api.py\", line 40, in decorated_function\r\n    auth_token = auth_header.split(\" \")[1]\r\nIndexError: list index out of range\r\n```\r\n\r\n## Comments\r\n\r\nDetupling / indexing should be wrapped in a `try`/`except`.", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/4053/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/4053/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/4032", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/4032/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/4032/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/4032/events", "html_url": "https://github.com/freedomofpress/securedrop/issues/4032", "id": 399052998, "node_id": "MDU6SXNzdWUzOTkwNTI5OTg=", "number": 4032, "title": "Etag header set by Journalist API is not sha256sum of file", "user": {"login": "emkll", "id": 15223328, "node_id": "MDQ6VXNlcjE1MjIzMzI4", "avatar_url": "https://avatars.githubusercontent.com/u/15223328?v=4", "gravatar_id": "", "url": "https://api.github.com/users/emkll", "html_url": "https://github.com/emkll", "followers_url": "https://api.github.com/users/emkll/followers", "following_url": "https://api.github.com/users/emkll/following{/other_user}", "gists_url": "https://api.github.com/users/emkll/gists{/gist_id}", "starred_url": "https://api.github.com/users/emkll/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/emkll/subscriptions", "organizations_url": "https://api.github.com/users/emkll/orgs", "repos_url": "https://api.github.com/users/emkll/repos", "events_url": "https://api.github.com/users/emkll/events{/privacy}", "received_events_url": "https://api.github.com/users/emkll/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}, {"id": 1189880309, "node_id": "MDU6TGFiZWwxMTg5ODgwMzA5", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/api", "name": "api", "color": "62efc2", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": {"login": "heartsucker", "id": 3998464, "node_id": "MDQ6VXNlcjM5OTg0NjQ=", "avatar_url": "https://avatars.githubusercontent.com/u/3998464?v=4", "gravatar_id": "", "url": "https://api.github.com/users/heartsucker", "html_url": "https://github.com/heartsucker", "followers_url": "https://api.github.com/users/heartsucker/followers", "following_url": "https://api.github.com/users/heartsucker/following{/other_user}", "gists_url": "https://api.github.com/users/heartsucker/gists{/gist_id}", "starred_url": "https://api.github.com/users/heartsucker/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/heartsucker/subscriptions", "organizations_url": "https://api.github.com/users/heartsucker/orgs", "repos_url": "https://api.github.com/users/heartsucker/repos", "events_url": "https://api.github.com/users/heartsucker/events{/privacy}", "received_events_url": "https://api.github.com/users/heartsucker/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "heartsucker", "id": 3998464, "node_id": "MDQ6VXNlcjM5OTg0NjQ=", "avatar_url": "https://avatars.githubusercontent.com/u/3998464?v=4", "gravatar_id": "", "url": "https://api.github.com/users/heartsucker", "html_url": "https://github.com/heartsucker", "followers_url": "https://api.github.com/users/heartsucker/followers", "following_url": "https://api.github.com/users/heartsucker/following{/other_user}", "gists_url": "https://api.github.com/users/heartsucker/gists{/gist_id}", "starred_url": "https://api.github.com/users/heartsucker/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/heartsucker/subscriptions", "organizations_url": "https://api.github.com/users/heartsucker/orgs", "repos_url": "https://api.github.com/users/heartsucker/repos", "events_url": "https://api.github.com/users/heartsucker/events{/privacy}", "received_events_url": "https://api.github.com/users/heartsucker/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 1, "created_at": "2019-01-14T20:07:13Z", "updated_at": "2019-04-22T18:54:35Z", "closed_at": "2019-04-22T18:54:35Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "## Description\r\n\r\nEtag header of file download files for Journalist API (https://github.com/freedomofpress/securedrop/blob/develop/securedrop/journalist_app/utils.py#L337) always returns `sha256sum:e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855`. This the sha256sum of an empty string. This is due `response.get_data()` returning an empty object.\r\n\r\n## Steps to Reproduce\r\n\r\n1. Upload a file or send a message to the source interface\r\n2. Set up admin account and use the Journalist API to retrieve files:\r\n\r\na. Ensure you aren't using a staging environment or remove `Header unset etag` directive from `/etc/apache2/sites-available/journalist.conf` and restart Apache2\r\nb. `curl -I <download_url_of_file>` and retain the value of header `Etag: sha256sum:<SHA256sum goes here>`\r\nc. `curl -O <download_url_of_file>` and `sha256sum download`. Observe the hash is different from the previous step\r\nd. `echo -ne \"\" | sha256sum` and observe the hash is identical to the etags above\r\n\r\n## Expected Behavior\r\n\r\n1. Etag value should be sha256 sum of file\r\n\r\n## Actual Behavior\r\n\r\n1. Etag value is sha256sum of an empty string\r\n\r\n## Comments\r\nIt makes sense that the response is empty because the file is sent as attachment: https://github.com/freedomofpress/securedrop/blob/develop/securedrop/journalist_app/utils.py#L333\r\n\r\nSince the hash is computed every time a file is downloaded, it might use significant amount of resources server-side if there are large files that are downloaded at the time time. We should consider hashing the files at creation time, and storing the hash values in the database. This will also allow us to verify file integrity (e.g. when restoring backups)", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/4032/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/4032/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/4005", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/4005/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/4005/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/4005/events", "html_url": "https://github.com/freedomofpress/securedrop/issues/4005", "id": 393673408, "node_id": "MDU6SXNzdWUzOTM2NzM0MDg=", "number": 4005, "title": "using the API to retrieve a source immediately after source creation returns *all* source keys", "user": {"login": "heartsucker", "id": 3998464, "node_id": "MDQ6VXNlcjM5OTg0NjQ=", "avatar_url": "https://avatars.githubusercontent.com/u/3998464?v=4", "gravatar_id": "", "url": "https://api.github.com/users/heartsucker", "html_url": "https://github.com/heartsucker", "followers_url": "https://api.github.com/users/heartsucker/followers", "following_url": "https://api.github.com/users/heartsucker/following{/other_user}", "gists_url": "https://api.github.com/users/heartsucker/gists{/gist_id}", "starred_url": "https://api.github.com/users/heartsucker/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/heartsucker/subscriptions", "organizations_url": "https://api.github.com/users/heartsucker/orgs", "repos_url": "https://api.github.com/users/heartsucker/repos", "events_url": "https://api.github.com/users/heartsucker/events{/privacy}", "received_events_url": "https://api.github.com/users/heartsucker/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}, {"id": 625966031, "node_id": "MDU6TGFiZWw2MjU5NjYwMzE=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/able%20to%20reproduce", "name": "able to reproduce", "color": "fbca04", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2018-12-22T13:26:24Z", "updated_at": "2019-01-07T20:38:27Z", "closed_at": "2019-01-07T20:38:27Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "## Description\r\n\r\n\r\n\r\n## Steps to Reproduce\r\n\r\n### Steps to reproduce\r\n- boot SecureDrop dev env (server)\r\n- retrieve API token as journalist\r\n- login to web as source\r\n- as source, submit message to web\r\n- as journalist, immediately (important! as in < 2 seconds) go `GET /api/v1/sources`\r\n\r\n## Expected Behavior\r\n\r\nExactly one or zero keys are returned for the new source.\r\n\r\n## Actual Behavior\r\n\r\nAll keys are returned for the new source.\r\n\r\nExample:\r\n\r\n```json\r\n{\r\n    \"sources\": [\r\n        {\r\n            \"add_star_url\": \"/api/v1/sources/d55335b0-5d7a-4151-bc3c-212f344e584a/add_star\", \r\n            \"interaction_count\": 4, \r\n            \"is_flagged\": false, \r\n            \"is_starred\": false, \r\n            \"journalist_designation\": \"rallying zoologist\", \r\n            \"key\": {\r\n                \"public\": \"-----BEGIN PGP PUBLIC KEY BLOCK-----\\n\\nmQINBFGRfoABEADJ56nCxMuQeyp/LMhzEyRCQZ6UrYS3KVHtOPz7Q+N/4rWsS+Wu\\nMO8X606xVA43JFVJgqeD+a4pcknmw9k0O7WzD+peswLCKulQ0s+yaZjP0G08CQH8\\nS3nwG/zoCBxX+FXNnThtN+2u+XhGcKNACzWaiH8KiO9YUSUmiexCP3REBgMLucFF\\nTnQK6RUcuVmYYS+VS87hYrEN4F6ANw5EeuENj++a36AJNFrzPO+QAfqZfe8UY64w\\niyoXaELKCPKUMq3vka8oR6wUwPGw+053Epmd8BEy/7Ol6BdNbthB0bSrgMtnfEjX\\nlU1LuusSPXOTAIXHr63+45oxAJ3MO8qoNXznWbPwElQAR/2xrsy2z20TDuvHCS2f\\nrbITmB6oN76505YDFPjc19dXKWUurapQHsTkG1Bv/P/31/g46LA9TrULu+ZN7Dxz\\nvvxDEvpPnrjKMjeew21v2w1P29DBhpoZwaxUhpMC7SF4yiEotaUXiZkaxCNkxT/l\\n1UPQkS6XhuuGhsEv81BOuibPsI388nRNx5OUaCnXH9FxaFbyJyfmDek9IaymEXjV\\nfD9gr1fePG0Wsa94D29nQ/GCegw4UhbDCZD6WX/Fi4kK8SBOOg0fU/5cW0eSZ8bp\\nfTEXM++T0mKpbD+pz0QQMJHJuo46hZ7nWGslt7taCmqIPHI0KNNCKYPAfwARAQAB\\ntHxBdXRvZ2VuZXJhdGVkIEtleSA8RkdWTUJPWFc2UVBSTDRJMlpBWjZUWktEV0Iy\\nUEFNNjY3UE5HQ0tTRVROSEdBR1RVS1NHT1FNT0xJTFVTSk5YR0RZNUZPUjRJQUxP\\nQ01TUjJXWE5GWlFKVFU2R01HVkpQR09SR0RQST0+iQI5BBMBCgAjBQJRkX6AAhsv\\nBwsJCAcDAgEGFQgCCQoLBBYCAwECHgECF4AACgkQPaif/ttqPFxozg/+LgcbcStF\\nBRxSzui0gZI2OEIdhL2ELZRSflhjOx650AfJO1hFZw3gHKrCv2AYwOXRqWhZHpwZ\\n67qtkOTbwP2ENs2JNJodzk3CLRXm4YgoCABbH0QFd85osareTKA8qt1dIfzFwHup\\nrJRCoc0cOI0vtzyK1fyWxAriRkn+Df2ue4FWJRI3LfvvCccr0+xkfac9RkgAUVIl\\n46NyplnfRCwiHH0UkAzXYxOCSZ7NbT63HImZ8pkQifReFgANwljjtMpuNKw33otp\\n7FMBK/VyeBcsHj/KhotMLbdmJvQ3Jwur5zT9/jR1F6Bh+JTHk8+sQZtefA9DTpFI\\n6mBQl56toCqWMWfXB58tlv/YYb7GPhJI3dhc6UBJ8AHYA3Sgv698hITmAM4Yy+RB\\nrGfAVKPpCwKr4wNh58BtHQ4J0oT4cLEgOr03QbnLIfg8EFBkIEfA+GP4/kwVrdAQ\\nxqoRaksbWHXRUbXfaoraglYszAB9n004J5B0g0JwSgRRK0RpSrFLgW50bfCX6Nqe\\nYTrxVL2tUXlZD8nKKu/tbmVymEgZameAVpR4sSU++9uBU3tsvqqqSR7SAKZDDz2k\\nX8ofyvvqPeFXPQA4wyVcP9STgPUfYrn7tlSz6oq/fJHJcSw4TgY/zt7UZZxm0fJQ\\ngN8384mxsBfcHYyblx4kMPnjwQ/B5067IuA=\\n=3F/H\\n-----END PGP PUBLIC KEY BLOCK-----\\n\", \r\n                \"type\": \"PGP\"\r\n            }, \r\n            \"last_updated\": \"2018-12-22T13:00:54.524845Z\", \r\n            \"number_of_documents\": 0, \r\n            \"number_of_messages\": 2, \r\n            \"remove_star_url\": \"/api/v1/sources/d55335b0-5d7a-4151-bc3c-212f344e584a/remove_star\", \r\n            \"replies_url\": \"/api/v1/sources/d55335b0-5d7a-4151-bc3c-212f344e584a/replies\", \r\n            \"submissions_url\": \"/api/v1/sources/d55335b0-5d7a-4151-bc3c-212f344e584a/submissions\", \r\n            \"url\": \"/api/v1/sources/d55335b0-5d7a-4151-bc3c-212f344e584a\", \r\n            \"uuid\": \"d55335b0-5d7a-4151-bc3c-212f344e584a\"\r\n        }, \r\n        {\r\n            \"add_star_url\": \"/api/v1/sources/dc17df20-6459-4317-8b3c-67b51997d3ce/add_star\", \r\n            \"interaction_count\": 1, \r\n            \"is_flagged\": false, \r\n            \"is_starred\": false, \r\n            \"journalist_designation\": \"atomistic leviathan\", \r\n            \"key\": {\r\n                \"public\": \"-----BEGIN PGP PUBLIC KEY BLOCK-----\\n\\nmQINBFJZi2ABEACZJJA53+pEAdkZyD99nxB995ZVTBw60SQ/6E/gws4kInv+YS7t\\nwSMXGa5bR4SD9voWxzLgyulqbM93jUFKn5GcsSh2O/lxAvEDKsPmXCRP1eBg3pjU\\n+8DRLm0TEFiywC+w6HF4PsOh+JlBWafUfL3vwrGKTXvrlKBsosvDmoogLjkMWomM\\nKBF/97OKyQiMQf1BDJqZ88nScJEqwo0xz0PfcB04GAtfR7N6Qa8HpFc0VDQcILFB\\n0aJx5+p7nw1LyR37LLoK8JbEY6QZd277Y0/U+O4v6WfH/2H5kQ8sC+P8hPwr3rSg\\nu3SVbNRasB4ZHFpJZR9Kv21zmQb9U3rrCk2yg3Wm0qtZ0S5CECAAwG2LQkKouRw2\\nak+Y8aolHDt6a785eF0AaAtgbPX4THMum/CNMksHO0PBBqxR+C9z7WSHXFHvv+8B\\n5nRccS4m4klyYTbZOOJ45DuC3xDjTRwzzpkYhqf4pLAhwF3spKZsAczAFPmDyxFf\\nCyIBiMZSK/j8PMJT1X5tgpL1NXImNdVIPV2Fy+W7PkNfG2FL/FQIUnK6ntukLW/7\\nhV6VHcx52mMn1pVUc6v80LEb4BMDz41vlj9R8YVv8hycPtnN0QL5gIME1n7jbKJf\\nyfWxkvBXMINDgHK/RysRMP6FXA6Mw65BGNIuO0Il0FTy12HuKI/coEsG2QARAQAB\\ntDZTZWN1cmVEcm9wIFRlc3QvRGV2ZWxvcG1lbnQgKERPIE5PVCBVU0UgSU4gUFJP\\nRFVDVElPTimJAjsEEwECACUCGwMGCwkIBwMCBhUIAgkKCwQWAgMBAh4BAheABQJS\\nm8UzAhkBAAoJEMxA7xIoJxRB1hAP/jVoFRi1R3i4P3EhmaYg9VQUo5SRyfMDoE6r\\nFyzOv2x3vRqPM1Bm4ihLQePfwKsJLDo7UVgjmTNEY4bpSYmKus/uo6Kx6yrxm6d/\\nJzY0BER+LJi0iA0iyLTqYk3eXyxQmHmy6my8zVyag5k/f/DejSUQgckJZ9pAhr7r\\nq4aTCWYapo/6fDM0XAo1T5Upt/iSqHet6NZR15JCDHIvGJYGAxVemccSNKFb1tsn\\n5aIMuGDbNivCUIFav+eo2JIEy60BokcZCy68qWwtlO5nIao79MoNMNz2EFSOomOg\\nb1sNadEj2vAkLfU4+dOVbYsFGUzOaV0mUHcaTNPYwnK+PgyOi5M05BX55a9FSBgi\\nAsEwEnDK1lvzLfWEQxVQvsw9A9vnCbSX8PwC4/uUtokkKxVN9ICl8AfaT38+OUHW\\niNl4NCgd26iRgTLhfMXpTjRyOb2RvFdzLByDEWIbvu5kCh247UFYSL0llk+suNh3\\ncm0mOUdL1nZuEo4EyEF1dq+1opMfDMF98q0660wZdwvwUQIXBt/yK3FH0BGA66ai\\nR78Z4pH1JqtYvzfDJx+XP8O2N9GYGd7kpak/5C2BTJzLVyzagB1yi8SmiYna5yQj\\nEqW5Txeq0GGd2H4KtUETUevU4x0Rw3luHToaDd9d5sioF48o87PlGwk+OCofPfLj\\nLnwFPNZcuQINBFJZi2ABEADzfv+9Ogb4KEWFom9zMF+xg8bcd/Ct72/sWLQW6Pz6\\n+SkmLEHuklTO+k7xiQ6jdzXzj1rTfy317L7G51naBSb6Ekfv8mu2ogOwrvtgYnGC\\nvfCpooUSxcfi+aEJzIJL29TAi1RCLZm15KRbkvEl8wS93BSLiag5w4/8eP1vXebq\\n95GrCZwiNZdhdQs3qn4j3VRvTW/SZHIAdJY+mMfUMPjq4c4sA82os6kVrEnWeLGf\\nT9d+knfm9J/2Rumy90bLAY6SFmRZ9/DxwKwbIsVy8CRvU3RVFSX8HCBQepRCQkls\\n9r7KVBqYE2Wh+0a+9wHHHNI7VBxKGXPflrirxY1AB5vjLcX1hmXbCoyf4ytgdHyC\\nKDz9Oc+xkgJeyVW6XwSqc5EhuNFXp3+C7BF7eQZ1REJLbL6CtEkeF0jHBaTeKM/p\\nN4fVhjPiU/FsNmZGKxxLyxDnnDI5pY8bhphVxwBRZ5GtVNqiVNDw+rRACQalpT21\\nOcAgLP+Rz+qf3TPyEZN6WPEx8/76ILuSHb8mpOH7W/514f5NuFaAlgmUnO3cT10h\\nh4IwOQ+kvj0qMww8fASI9DJExXUYb3xDSCmOkJPhu1/Drr3gdFBha4/jAz7jBWls\\nVr2RLJzilf8Mi9j8WpHIfP+WXtwWz3+iYPS0SPoB7g9DA0+Ei760pJJf73AEjD+f\\nFwARAQABiQIfBBgBAgAJBQJSWYtgAhsMAAoJEMxA7xIoJxRBp/cP/3lJx9z5yzZA\\n6UvLQR6pK+V1iy2hvZ+S+EwYRCiTgYTXekHzLXWwjWGfUYDTHMeaS9O9BMRMGOU3\\ninyb47GZSoQ0N0bRVTzrY6/0ifhUSJ00MemOodI1bz4pAMk3uR8iWyhlaGn7JAIA\\nKmCm+K0qkeJd61S9iyrx7s9QmaNPnupm5pc+bpOAkbKyq7sEFpWM5Qx82n1tVMtn\\nIW2OoRPbz80JkkQB2pl6SjskXqZ89jcFWGI6IChYENKc65xafDt4uFuHU+5j4j2f\\n4ySYSwfoWC97MOgJLqA/WimxeeNCYFhykUDWrL5mKBTgMXgH/sYk3GDo7fssaYbK\\nn1xbbX4GXQl3+ru4zT6/F7CxZErjLb+evShyf4itM+5AdbKRiRzoraqKblBa4TfJ\\nBSqHisdcxdZeBe19+jyY6a8ZMcGhrQeksiKxTRh7ylAk7CLVgLEIHLxXzHoZ0oAF\\nz2ulG+zH9KS9Pe8MQxHCrlyfoQElQuJoYbrYBOu28itvGPgz6+5xgvZROvPoqIkI\\nk8DYt9lJqUFBeZuFJd5W1TuHKLxueVYvSKeG+e3TjOYdJFvDZInM4cNWr8N92mYS\\niphljiHAKVTQeIf1ma07QUH/ul3YC+g07F+BLonIIXA6uQVebv5iLxTgOzIQwHTJ\\nVu4MPiQNn1h4dk1RonfV/aJ+de1+qjA8mQINBFGRfoABEADJ56nCxMuQeyp/LMhz\\nEyRCQZ6UrYS3KVHtOPz7Q+N/4rWsS+WuMO8X606xVA43JFVJgqeD+a4pcknmw9k0\\nO7WzD+peswLCKulQ0s+yaZjP0G08CQH8S3nwG/zoCBxX+FXNnThtN+2u+XhGcKNA\\nCzWaiH8KiO9YUSUmiexCP3REBgMLucFFTnQK6RUcuVmYYS+VS87hYrEN4F6ANw5E\\neuENj++a36AJNFrzPO+QAfqZfe8UY64wiyoXaELKCPKUMq3vka8oR6wUwPGw+053\\nEpmd8BEy/7Ol6BdNbthB0bSrgMtnfEjXlU1LuusSPXOTAIXHr63+45oxAJ3MO8qo\\nNXznWbPwElQAR/2xrsy2z20TDuvHCS2frbITmB6oN76505YDFPjc19dXKWUurapQ\\nHsTkG1Bv/P/31/g46LA9TrULu+ZN7DxzvvxDEvpPnrjKMjeew21v2w1P29DBhpoZ\\nwaxUhpMC7SF4yiEotaUXiZkaxCNkxT/l1UPQkS6XhuuGhsEv81BOuibPsI388nRN\\nx5OUaCnXH9FxaFbyJyfmDek9IaymEXjVfD9gr1fePG0Wsa94D29nQ/GCegw4UhbD\\nCZD6WX/Fi4kK8SBOOg0fU/5cW0eSZ8bpfTEXM++T0mKpbD+pz0QQMJHJuo46hZ7n\\nWGslt7taCmqIPHI0KNNCKYPAfwARAQABtHxBdXRvZ2VuZXJhdGVkIEtleSA8RkdW\\nTUJPWFc2UVBSTDRJMlpBWjZUWktEV0IyUEFNNjY3UE5HQ0tTRVROSEdBR1RVS1NH\\nT1FNT0xJTFVTSk5YR0RZNUZPUjRJQUxPQ01TUjJXWE5GWlFKVFU2R01HVkpQR09S\\nR0RQST0+iQI5BBMBCgAjBQJRkX6AAhsvBwsJCAcDAgEGFQgCCQoLBBYCAwECHgEC\\nF4AACgkQPaif/ttqPFxozg/+LgcbcStFBRxSzui0gZI2OEIdhL2ELZRSflhjOx65\\n0AfJO1hFZw3gHKrCv2AYwOXRqWhZHpwZ67qtkOTbwP2ENs2JNJodzk3CLRXm4Ygo\\nCABbH0QFd85osareTKA8qt1dIfzFwHuprJRCoc0cOI0vtzyK1fyWxAriRkn+Df2u\\ne4FWJRI3LfvvCccr0+xkfac9RkgAUVIl46NyplnfRCwiHH0UkAzXYxOCSZ7NbT63\\nHImZ8pkQifReFgANwljjtMpuNKw33otp7FMBK/VyeBcsHj/KhotMLbdmJvQ3Jwur\\n5zT9/jR1F6Bh+JTHk8+sQZtefA9DTpFI6mBQl56toCqWMWfXB58tlv/YYb7GPhJI\\n3dhc6UBJ8AHYA3Sgv698hITmAM4Yy+RBrGfAVKPpCwKr4wNh58BtHQ4J0oT4cLEg\\nOr03QbnLIfg8EFBkIEfA+GP4/kwVrdAQxqoRaksbWHXRUbXfaoraglYszAB9n004\\nJ5B0g0JwSgRRK0RpSrFLgW50bfCX6NqeYTrxVL2tUXlZD8nKKu/tbmVymEgZameA\\nVpR4sSU++9uBU3tsvqqqSR7SAKZDDz2kX8ofyvvqPeFXPQA4wyVcP9STgPUfYrn7\\ntlSz6oq/fJHJcSw4TgY/zt7UZZxm0fJQgN8384mxsBfcHYyblx4kMPnjwQ/B5067\\nIuA=\\n=5Nq3\\n-----END PGP PUBLIC KEY BLOCK-----\\n\", \r\n                \"type\": \"PGP\"\r\n            }, \r\n            \"last_updated\": \"2018-12-22T13:14:02.588646Z\", \r\n            \"number_of_documents\": 0, \r\n            \"number_of_messages\": 1, \r\n            \"remove_star_url\": \"/api/v1/sources/dc17df20-6459-4317-8b3c-67b51997d3ce/remove_star\", \r\n            \"replies_url\": \"/api/v1/sources/dc17df20-6459-4317-8b3c-67b51997d3ce/replies\", \r\n            \"submissions_url\": \"/api/v1/sources/dc17df20-6459-4317-8b3c-67b51997d3ce/submissions\", \r\n            \"url\": \"/api/v1/sources/dc17df20-6459-4317-8b3c-67b51997d3ce\", \r\n            \"uuid\": \"dc17df20-6459-4317-8b3c-67b51997d3ce\"\r\n        }\r\n    ]\r\n}\r\n```\r\n\r\nIf you import the above key into GPG, you will see that it contains:\r\n- Journalist's pub key\r\n- First source's pub key\r\n- **Not** the second source's pub key\r\n\r\n## Comments\r\n\r\nThe root cause is here:\r\n\r\n```python\r\n    def export_pubkey(self, name):\r\n        fingerprint = self.getkey(name)\r\n        return self.gpg.export_keys(fingerprint)\r\n```\r\n\r\nif `None` is passed to `export_keys`, then it will return *all* pub keys.\r\n\r\nThis bug will cause the following fatal error in the Qt client.\r\n\r\n```\r\nTraceback (most recent call last):\r\n  File \"/home/heartsucker/code/freedomofpress/securedrop-client/securedrop_client/logic.py\", line 189, in <lambda>\r\n    lambda: self.completed_api_call(new_thread_id, callback))\r\n  File \"/home/heartsucker/code/freedomofpress/securedrop-client/securedrop_client/logic.py\", line 242, in completed_api_call\r\n    user_callback(result_data)\r\n  File \"/home/heartsucker/code/freedomofpress/securedrop-client/securedrop_client/logic.py\", line 419, in on_synced\r\n    self.gpg.import_key(source.uuid, pub_key)\r\n  File \"/home/heartsucker/code/freedomofpress/securedrop-client/securedrop_client/crypto.py\", line 116, in import_key\r\n    raise RuntimeError('Expected exactly one fingerprint. Found: {}'\r\nRuntimeError: Expected exactly one fingerprint.\r\n```\r\n\r\nIn additional to the error in Qt, it seems likely this will cause errors in the web UI too (both interfaces), but I haven't tested that yet.", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/4005/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/4005/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3999", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3999/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3999/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3999/events", "html_url": "https://github.com/freedomofpress/securedrop/issues/3999", "id": 392644564, "node_id": "MDU6SXNzdWUzOTI2NDQ1NjQ=", "number": 3999, "title": "On the Admin Workstation,  N SecureDrop updater processes are started if N network interfaces are enabled in Tails", "user": {"login": "zenmonkeykstop", "id": 2782952, "node_id": "MDQ6VXNlcjI3ODI5NTI=", "avatar_url": "https://avatars.githubusercontent.com/u/2782952?v=4", "gravatar_id": "", "url": "https://api.github.com/users/zenmonkeykstop", "html_url": "https://github.com/zenmonkeykstop", "followers_url": "https://api.github.com/users/zenmonkeykstop/followers", "following_url": "https://api.github.com/users/zenmonkeykstop/following{/other_user}", "gists_url": "https://api.github.com/users/zenmonkeykstop/gists{/gist_id}", "starred_url": "https://api.github.com/users/zenmonkeykstop/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/zenmonkeykstop/subscriptions", "organizations_url": "https://api.github.com/users/zenmonkeykstop/orgs", "repos_url": "https://api.github.com/users/zenmonkeykstop/repos", "events_url": "https://api.github.com/users/zenmonkeykstop/events{/privacy}", "received_events_url": "https://api.github.com/users/zenmonkeykstop/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/freedomofpress/securedrop/milestones/53", "html_url": "https://github.com/freedomofpress/securedrop/milestone/53", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/milestones/53/labels", "id": 4178776, "node_id": "MDk6TWlsZXN0b25lNDE3ODc3Ng==", "number": 53, "title": "0.12.2", "description": "This is a point release issued to both Trusty and Xenial. It will, at minimum, include a kernel with support for the 7th generation NUCs, and a change to disable the source interface on instances running Trusty after April 30 (due to EOL for security updates).\r\n\r\nRelease manager: @emkll\r\nDeputy release manager: @rmol", "creator": {"login": "eloquence", "id": 213636, "node_id": "MDQ6VXNlcjIxMzYzNg==", "avatar_url": "https://avatars.githubusercontent.com/u/213636?v=4", "gravatar_id": "", "url": "https://api.github.com/users/eloquence", "html_url": "https://github.com/eloquence", "followers_url": "https://api.github.com/users/eloquence/followers", "following_url": "https://api.github.com/users/eloquence/following{/other_user}", "gists_url": "https://api.github.com/users/eloquence/gists{/gist_id}", "starred_url": "https://api.github.com/users/eloquence/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/eloquence/subscriptions", "organizations_url": "https://api.github.com/users/eloquence/orgs", "repos_url": "https://api.github.com/users/eloquence/repos", "events_url": "https://api.github.com/users/eloquence/events{/privacy}", "received_events_url": "https://api.github.com/users/eloquence/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 14, "state": "closed", "created_at": "2019-03-28T00:55:25Z", "updated_at": "2019-09-19T23:12:58Z", "due_on": "2019-04-25T07:00:00Z", "closed_at": "2019-04-26T18:37:16Z"}, "comments": 4, "created_at": "2018-12-19T15:10:14Z", "updated_at": "2019-04-10T00:41:22Z", "closed_at": "2019-04-03T17:33:33Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "## Description\r\n\r\nIf a Tails Admin Workstation has more than one network interface, the SecureDrop network manager hook that checks for updates will run for each active NIC. (For example, if a workstation has both Ethernet and Wifi enabled.)\r\n\r\nThis is confusing to end users and may result in multiple update processes clobbering each other's changes.\r\n\r\n## Steps to Reproduce\r\n\r\nOn an Admin Workstation:\r\n- revert to an earlier SecureDrop version:\r\n```\r\ncd ~/Persistent/securedrop\r\ngit checkout 0.10.0\r\n```\r\n- enable multiple network connections (eg Ethernet and Wifi) and wait for their Tor connections to come up\r\n\r\n## Expected Behavior\r\nA single instance of the Securedrop Updater is started.\r\n\r\n## Actual Behavior\r\nMultiple instances of the SecureDrop Updater are started.\r\n", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3999/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3999/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3977", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3977/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3977/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3977/events", "html_url": "https://github.com/freedomofpress/securedrop/issues/3977", "id": 388030170, "node_id": "MDU6SXNzdWUzODgwMzAxNzA=", "number": 3977, "title": "DELETE methods not allowed by apache journalist interface config", "user": {"login": "redshiftzero", "id": 7832803, "node_id": "MDQ6VXNlcjc4MzI4MDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7832803?v=4", "gravatar_id": "", "url": "https://api.github.com/users/redshiftzero", "html_url": "https://github.com/redshiftzero", "followers_url": "https://api.github.com/users/redshiftzero/followers", "following_url": "https://api.github.com/users/redshiftzero/following{/other_user}", "gists_url": "https://api.github.com/users/redshiftzero/gists{/gist_id}", "starred_url": "https://api.github.com/users/redshiftzero/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/redshiftzero/subscriptions", "organizations_url": "https://api.github.com/users/redshiftzero/orgs", "repos_url": "https://api.github.com/users/redshiftzero/repos", "events_url": "https://api.github.com/users/redshiftzero/events{/privacy}", "received_events_url": "https://api.github.com/users/redshiftzero/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2018-12-06T02:30:27Z", "updated_at": "2019-03-29T23:55:49Z", "closed_at": "2019-03-29T23:55:49Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "## Description\r\n\r\nThis is the issue causing https://github.com/freedomofpress/securedrop-client/issues/173\r\n\r\n## Steps to Reproduce\r\n\r\n1. Provision staging VMs\r\n2. Get a valid API token [[ref]](https://gist.github.com/redshiftzero/934093c4f8e0f47c53e1add475345e34) \r\n3. Add a source via the source interface\r\n4. Attempt to remove a star from a source (this is an idempotent operation so one should not need to first add the star to hit the endpoint):\r\n\r\n```\r\ncurl -X DELETE -H \"Content-Type: application/json\" -H \"Authorization: Token mytokenhere\" --proxy socks5h://127.0.0.1:9150 mystagingserver.onion/api/v1/sources/my-source-uuid-here/remove_star\r\n```\r\n\r\n## Expected Behavior\r\n\r\n`{\"message\":\"Star removed\"}`\r\n\r\n## Actual Behavior\r\n\r\nA 403 occurs, and we get redirected to the login page. \r\n\r\nThis redirect-for-403 behavior only happens for the API in staging because Apache is [sending 403s to `/notfound`](https://github.com/freedomofpress/securedrop/blame/eaa2d45d371b64d5bb82317209d686c63063fec8/install_files/ansible-base/roles/app/templates/sites-available/journalist.conf#L42), causing the [`request.path`](https://github.com/freedomofpress/securedrop/blob/develop/securedrop/journalist_app/__init__.py#L136) to be `/notfound` (instead of something that begins with `thisismeonion.onion/api/blahhh`), meaning that code execution will continue until [the redirect here](https://github.com/freedomofpress/securedrop/blob/develop/securedrop/journalist_app/__init__.py#L140).\r\n\r\n## Comments\r\n\r\nThe cause is the 403, and this is happening because of the [LimitExcept](https://httpd.apache.org/docs/current/mod/core.html#limitexcept) directive we are using in the Apache configs. These allow only GET POST and HEAD requests.\r\n\r\nTo prove this to oneself, you can edit `/etc/apache2/sites-enabled/journalist.conf` and add DELETE as an allowed request method.\r\n\r\nThis is similar to bugs #3772 and #3877. In light of this we should:\r\n\r\n1. Revisit #1775 and,\r\n2. Incorporate some API endpoint testing which would have detected all three bugs into at least the pre-release QA process (these could eventually be in CI as part of the external test client described in #3661)", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3977/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3977/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3938", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3938/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3938/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3938/events", "html_url": "https://github.com/freedomofpress/securedrop/issues/3938", "id": 383336822, "node_id": "MDU6SXNzdWUzODMzMzY4MjI=", "number": 3938, "title": "molecule converge -s virtualbox-staging fails on macOS", "user": {"login": "redshiftzero", "id": 7832803, "node_id": "MDQ6VXNlcjc4MzI4MDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7832803?v=4", "gravatar_id": "", "url": "https://api.github.com/users/redshiftzero", "html_url": "https://github.com/redshiftzero", "followers_url": "https://api.github.com/users/redshiftzero/followers", "following_url": "https://api.github.com/users/redshiftzero/following{/other_user}", "gists_url": "https://api.github.com/users/redshiftzero/gists{/gist_id}", "starred_url": "https://api.github.com/users/redshiftzero/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/redshiftzero/subscriptions", "organizations_url": "https://api.github.com/users/redshiftzero/orgs", "repos_url": "https://api.github.com/users/redshiftzero/repos", "events_url": "https://api.github.com/users/redshiftzero/events{/privacy}", "received_events_url": "https://api.github.com/users/redshiftzero/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}, {"id": 616447592, "node_id": "MDU6TGFiZWw2MTY0NDc1OTI=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/staging%20VMs", "name": "staging VMs", "color": "bfd4f2", "default": false, "description": null}, {"id": 1106060106, "node_id": "MDU6TGFiZWwxMTA2MDYwMTA2", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/needs/reproducing", "name": "needs/reproducing", "color": "3dce6b", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2018-11-22T00:22:59Z", "updated_at": "2019-05-09T02:23:38Z", "closed_at": "2019-05-09T02:23:37Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "## Description\r\n\r\nI'm curious if any other macOS users (or VirtualBox users) can reproduce this\r\n\r\n## Steps to Reproduce\r\n\r\n`make staging` (or `molecule converge -s virtualbox-staging`)\r\n\r\n## Expected Behavior\r\n\r\nStaging VMs are provisioned and all is merry and well\r\n\r\n## Actual Behavior\r\n\r\nProvisioning consistently fails at this step:\r\n\r\n```\r\n    TASK [reboot-if-first-install : Wait for server to come back.] *****************\r\n    fatal: [mon-staging -> localhost]: FAILED! => {\"changed\": false, \"elapsed\": 301, \"msg\": \"Timeout when waiting for search string OpenSSH in 127.0.0.1:2200\"}\r\n    fatal: [app-staging -> localhost]: FAILED! => {\"changed\": false, \"elapsed\": 301, \"msg\": \"Timeout when waiting for search string OpenSSH in 127.0.0.1:2222\"}\r\n```\r\n\r\n## Comments\r\n\r\nNote that `vagrant up /staging/` still works fine for me", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3938/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3938/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3928", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3928/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3928/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3928/events", "html_url": "https://github.com/freedomofpress/securedrop/issues/3928", "id": 378552945, "node_id": "MDU6SXNzdWUzNzg1NTI5NDU=", "number": 3928, "title": "Rotating ossec key fails due to directory permissions on /var/ossec on mon server", "user": {"login": "zenmonkeykstop", "id": 2782952, "node_id": "MDQ6VXNlcjI3ODI5NTI=", "avatar_url": "https://avatars.githubusercontent.com/u/2782952?v=4", "gravatar_id": "", "url": "https://api.github.com/users/zenmonkeykstop", "html_url": "https://github.com/zenmonkeykstop", "followers_url": "https://api.github.com/users/zenmonkeykstop/followers", "following_url": "https://api.github.com/users/zenmonkeykstop/following{/other_user}", "gists_url": "https://api.github.com/users/zenmonkeykstop/gists{/gist_id}", "starred_url": "https://api.github.com/users/zenmonkeykstop/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/zenmonkeykstop/subscriptions", "organizations_url": "https://api.github.com/users/zenmonkeykstop/orgs", "repos_url": "https://api.github.com/users/zenmonkeykstop/repos", "events_url": "https://api.github.com/users/zenmonkeykstop/events{/privacy}", "received_events_url": "https://api.github.com/users/zenmonkeykstop/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "redshiftzero", "id": 7832803, "node_id": "MDQ6VXNlcjc4MzI4MDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7832803?v=4", "gravatar_id": "", "url": "https://api.github.com/users/redshiftzero", "html_url": "https://github.com/redshiftzero", "followers_url": "https://api.github.com/users/redshiftzero/followers", "following_url": "https://api.github.com/users/redshiftzero/following{/other_user}", "gists_url": "https://api.github.com/users/redshiftzero/gists{/gist_id}", "starred_url": "https://api.github.com/users/redshiftzero/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/redshiftzero/subscriptions", "organizations_url": "https://api.github.com/users/redshiftzero/orgs", "repos_url": "https://api.github.com/users/redshiftzero/repos", "events_url": "https://api.github.com/users/redshiftzero/events{/privacy}", "received_events_url": "https://api.github.com/users/redshiftzero/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "redshiftzero", "id": 7832803, "node_id": "MDQ6VXNlcjc4MzI4MDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7832803?v=4", "gravatar_id": "", "url": "https://api.github.com/users/redshiftzero", "html_url": "https://github.com/redshiftzero", "followers_url": "https://api.github.com/users/redshiftzero/followers", "following_url": "https://api.github.com/users/redshiftzero/following{/other_user}", "gists_url": "https://api.github.com/users/redshiftzero/gists{/gist_id}", "starred_url": "https://api.github.com/users/redshiftzero/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/redshiftzero/subscriptions", "organizations_url": "https://api.github.com/users/redshiftzero/orgs", "repos_url": "https://api.github.com/users/redshiftzero/repos", "events_url": "https://api.github.com/users/redshiftzero/events{/privacy}", "received_events_url": "https://api.github.com/users/redshiftzero/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/freedomofpress/securedrop/milestones/48", "html_url": "https://github.com/freedomofpress/securedrop/milestone/48", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/milestones/48/labels", "id": 3713402, "node_id": "MDk6TWlsZXN0b25lMzcxMzQwMg==", "number": 48, "title": "0.11.0", "description": "QA and feature freeze begins: 2018-11-27 (EOD PDT). String freeze and pre-release announcement: 2018-12-04 (EOD PDT).\r\n\r\nRelease manager: @kushaldas", "creator": {"login": "eloquence", "id": 213636, "node_id": "MDQ6VXNlcjIxMzYzNg==", "avatar_url": "https://avatars.githubusercontent.com/u/213636?v=4", "gravatar_id": "", "url": "https://api.github.com/users/eloquence", "html_url": "https://github.com/eloquence", "followers_url": "https://api.github.com/users/eloquence/followers", "following_url": "https://api.github.com/users/eloquence/following{/other_user}", "gists_url": "https://api.github.com/users/eloquence/gists{/gist_id}", "starred_url": "https://api.github.com/users/eloquence/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/eloquence/subscriptions", "organizations_url": "https://api.github.com/users/eloquence/orgs", "repos_url": "https://api.github.com/users/eloquence/repos", "events_url": "https://api.github.com/users/eloquence/events{/privacy}", "received_events_url": "https://api.github.com/users/eloquence/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 13, "state": "closed", "created_at": "2018-10-04T21:50:50Z", "updated_at": "2020-02-19T23:15:29Z", "due_on": "2018-12-11T08:00:00Z", "closed_at": "2018-12-20T20:53:23Z"}, "comments": 3, "created_at": "2018-11-08T02:33:10Z", "updated_at": "2018-11-27T20:54:08Z", "closed_at": "2018-11-27T20:54:08Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "## Description\r\n\r\nIf the ossec alert public key is changed on the admin workstation after an initial install, and `./securedrop-admin install` is run again, the install/update will fail with an Ansible error related to  directory permissions on `/var/ossec/.gnupg`\r\n\r\n## Steps to Reproduce\r\nwith SD release 0.10.0:\r\n- install 0.10.0 on app and mon servers via usual flow, including ossec setup\r\n- change the file `~/Persistent/securedrop/install-files/ansible_base/ossec.pub` to a new pubkey\r\n- run `./securedrop-admin install` again\r\n\r\n\r\n## Expected Behavior\r\nInstallation completes without error\r\n\r\n## Actual Behavior\r\nInstallation fails, as ossec user on the mon server doesn't have permission to write to `/var/ossec/.gnupg`", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3928/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3928/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3918", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3918/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3918/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3918/events", "html_url": "https://github.com/freedomofpress/securedrop/issues/3918", "id": 376822259, "node_id": "MDU6SXNzdWUzNzY4MjIyNTk=", "number": 3918, "title": "API repsonse for a `Reply` has full system path for `filename`", "user": {"login": "heartsucker", "id": 3998464, "node_id": "MDQ6VXNlcjM5OTg0NjQ=", "avatar_url": "https://avatars.githubusercontent.com/u/3998464?v=4", "gravatar_id": "", "url": "https://api.github.com/users/heartsucker", "html_url": "https://github.com/heartsucker", "followers_url": "https://api.github.com/users/heartsucker/followers", "following_url": "https://api.github.com/users/heartsucker/following{/other_user}", "gists_url": "https://api.github.com/users/heartsucker/gists{/gist_id}", "starred_url": "https://api.github.com/users/heartsucker/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/heartsucker/subscriptions", "organizations_url": "https://api.github.com/users/heartsucker/orgs", "repos_url": "https://api.github.com/users/heartsucker/repos", "events_url": "https://api.github.com/users/heartsucker/events{/privacy}", "received_events_url": "https://api.github.com/users/heartsucker/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2018-11-02T14:02:03Z", "updated_at": "2018-11-02T23:37:54Z", "closed_at": "2018-11-02T23:37:54Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "## Description\r\n\r\nThe filename of a reply to a source should only be the `$(basename $path)` and not just `$path`.\r\n\r\n## Steps to Reproduce\r\n\r\nBoot the dev env, reply via the API, fetch all replies from the API.\r\n\r\n## Expected Behavior\r\n\r\nThe response does not contain `/var/lib/securedrop/store/$filesystem_id`.\r\n\r\n## Actual Behavior\r\n\r\n```json\r\n$ http localhost:8081/api/v1/replies\r\nHTTP/1.0 200 OK\r\nContent-Length: 4438\r\nContent-Type: application/json\r\nDate: Fri, 02 Nov 2018 13:58:11 GMT\r\nServer: Werkzeug/0.14.1 Python/2.7.6\r\nSet-Cookie: js=eyJleHBpcmVzIjp7IiBkIjoiRnJpLCAwMiBOb3YgMjAxOCAxNTo1ODoxMSBHTVQifX0.Dr3pcw.p_VpbLQcvnnVzg_jf6MTp9gZ8VI; HttpOnly; Path=/\r\nVary: Cookie\r\n\r\n{\r\n    \"replies\": [\r\n        ...\r\n        {\r\n            \"filename\": \"/var/lib/securedrop/store/V7ND6HFB3ZDSWS647VA2HPTTTOKD6M433M6ZSZOKTQTQAU7RWTWS5YU62F4WIASHUYTDAYW3HZVNORQAN3QKZVBZRELYCV3NUVARL6Y=/5-fourteen_recitative-reply.gpg\", \r\n            \"is_deleted_by_source\": false, \r\n            \"journalist_username\": \"journalist\", \r\n            \"journalist_uuid\": \"3328e4e8-4037-437b-88d9-a0aa270090cb\", \r\n            \"reply_url\": \"/api/v1/sources/c81a50ea-4eeb-4422-ba51-9bc11e598b14/replies/8b97e43d-e84d-412b-b7e2-1fccfa0fda17\", \r\n            \"size\": 906, \r\n            \"source_url\": \"/api/v1/sources/c81a50ea-4eeb-4422-ba51-9bc11e598b14\", \r\n            \"uuid\": \"8b97e43d-e84d-412b-b7e2-1fccfa0fda17\"\r\n        }, \r\n        ...\r\n    ]\r\n}\r\n```", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3918/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3918/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3892", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3892/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3892/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3892/events", "html_url": "https://github.com/freedomofpress/securedrop/issues/3892", "id": 372617847, "node_id": "MDU6SXNzdWUzNzI2MTc4NDc=", "number": 3892, "title": "Source \"X\" can delete replies to source \"Y\" via the source interface", "user": {"login": "heartsucker", "id": 3998464, "node_id": "MDQ6VXNlcjM5OTg0NjQ=", "avatar_url": "https://avatars.githubusercontent.com/u/3998464?v=4", "gravatar_id": "", "url": "https://api.github.com/users/heartsucker", "html_url": "https://github.com/heartsucker", "followers_url": "https://api.github.com/users/heartsucker/followers", "following_url": "https://api.github.com/users/heartsucker/following{/other_user}", "gists_url": "https://api.github.com/users/heartsucker/gists{/gist_id}", "starred_url": "https://api.github.com/users/heartsucker/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/heartsucker/subscriptions", "organizations_url": "https://api.github.com/users/heartsucker/orgs", "repos_url": "https://api.github.com/users/heartsucker/repos", "events_url": "https://api.github.com/users/heartsucker/events{/privacy}", "received_events_url": "https://api.github.com/users/heartsucker/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}, {"id": 192539755, "node_id": "MDU6TGFiZWwxOTI1Mzk3NTU=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/app", "name": "app", "color": "bfe5bf", "default": false, "description": null}, {"id": 192545295, "node_id": "MDU6TGFiZWwxOTI1NDUyOTU=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/security", "name": "security", "color": "bfdadc", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2018-10-22T17:29:38Z", "updated_at": "2018-10-22T21:37:46Z", "closed_at": "2018-10-22T21:37:46Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "# Steps to reproduce\r\n\r\n1. Boot dev env\r\n1. Create source X, submit\r\n1. Open private tab, create source Y, submit\r\n1. Login as a journalist, reply to both\r\n1. In the `/lookup` page for source X, inspect the reply form and copy the hidden input `reply_filename`\r\n1. In the `/lookup` page for source Y, alter the reply form to have the copied value, submit/confirm\r\n1. Reload X's `/lookup` page and see that the reply is missing\r\n\r\n## Expected Behavior\r\n\r\nX cannot delete Y's reply\r\n\r\n## Actual Behavior\r\n\r\nX **can** delete Y's reply\r\n\r\n# Relevant code\r\n\r\n`securedrop/source_app/main.py`\r\n\r\n```python\r\n    @view.route('/delete', methods=('POST',))\r\n    @login_required\r\n    def delete():\r\n        \"\"\"This deletes the reply from the source's inbox, but preserves\r\n        the history for journalists such that they can view conversation\r\n        history.\r\n        \"\"\"\r\n\r\n        query = Reply.query.filter(\r\n            Reply.filename == request.form['reply_filename'])\r\n        reply = get_one_or_else(query, current_app.logger, abort)\r\n        reply.deleted_by_source = True\r\n        db.session.add(reply)\r\n        db.session.commit()\r\n\r\n        flash(gettext(\"Reply deleted\"), \"notification\")\r\n        return redirect(url_for('.lookup'))\r\n```\r\n\r\nLooking at the `Reply.query.filter`, you can see that we do not check that a given response belongs to a source.\r\n\r\n# `git blame`\r\n\r\nNot blaming, but listing it here for the eventual report to save y'all some time.\r\n\r\nThis was introduced in commit `83d2329b77` on 2015-02-15.\r\n\r\n# Analysis\r\n\r\nAny authenticated source can delete replies belonging to any other source. However, they must know the filename, but we don't throttle anything on the source interface so a determined attacker could in theory disrupt source/journalist communication.\r\n\r\nEstimated entropy of the filename:\r\n\r\n```\r\n>>> # num * nouns * adjectives * {doc,msg}\r\n>>> math.log(100 *17949 * 8222 * 2, 2)\r\n34.780745694714774\r\n```\r\n\r\nIt seems feasible that a determined attacker could disrupt communications with some frequency on a high traffic instance.", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3892/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3892/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3878", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3878/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3878/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3878/events", "html_url": "https://github.com/freedomofpress/securedrop/issues/3878", "id": 370427697, "node_id": "MDU6SXNzdWUzNzA0Mjc2OTc=", "number": 3878, "title": "Restore from backup fails", "user": {"login": "zenmonkeykstop", "id": 2782952, "node_id": "MDQ6VXNlcjI3ODI5NTI=", "avatar_url": "https://avatars.githubusercontent.com/u/2782952?v=4", "gravatar_id": "", "url": "https://api.github.com/users/zenmonkeykstop", "html_url": "https://github.com/zenmonkeykstop", "followers_url": "https://api.github.com/users/zenmonkeykstop/followers", "following_url": "https://api.github.com/users/zenmonkeykstop/following{/other_user}", "gists_url": "https://api.github.com/users/zenmonkeykstop/gists{/gist_id}", "starred_url": "https://api.github.com/users/zenmonkeykstop/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/zenmonkeykstop/subscriptions", "organizations_url": "https://api.github.com/users/zenmonkeykstop/orgs", "repos_url": "https://api.github.com/users/zenmonkeykstop/repos", "events_url": "https://api.github.com/users/zenmonkeykstop/events{/privacy}", "received_events_url": "https://api.github.com/users/zenmonkeykstop/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}, {"id": 385585080, "node_id": "MDU6TGFiZWwzODU1ODUwODA=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/QA:%20Release", "name": "QA: Release", "color": "fbca04", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "heartsucker", "id": 3998464, "node_id": "MDQ6VXNlcjM5OTg0NjQ=", "avatar_url": "https://avatars.githubusercontent.com/u/3998464?v=4", "gravatar_id": "", "url": "https://api.github.com/users/heartsucker", "html_url": "https://github.com/heartsucker", "followers_url": "https://api.github.com/users/heartsucker/followers", "following_url": "https://api.github.com/users/heartsucker/following{/other_user}", "gists_url": "https://api.github.com/users/heartsucker/gists{/gist_id}", "starred_url": "https://api.github.com/users/heartsucker/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/heartsucker/subscriptions", "organizations_url": "https://api.github.com/users/heartsucker/orgs", "repos_url": "https://api.github.com/users/heartsucker/repos", "events_url": "https://api.github.com/users/heartsucker/events{/privacy}", "received_events_url": "https://api.github.com/users/heartsucker/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "heartsucker", "id": 3998464, "node_id": "MDQ6VXNlcjM5OTg0NjQ=", "avatar_url": "https://avatars.githubusercontent.com/u/3998464?v=4", "gravatar_id": "", "url": "https://api.github.com/users/heartsucker", "html_url": "https://github.com/heartsucker", "followers_url": "https://api.github.com/users/heartsucker/followers", "following_url": "https://api.github.com/users/heartsucker/following{/other_user}", "gists_url": "https://api.github.com/users/heartsucker/gists{/gist_id}", "starred_url": "https://api.github.com/users/heartsucker/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/heartsucker/subscriptions", "organizations_url": "https://api.github.com/users/heartsucker/orgs", "repos_url": "https://api.github.com/users/heartsucker/repos", "events_url": "https://api.github.com/users/heartsucker/events{/privacy}", "received_events_url": "https://api.github.com/users/heartsucker/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 10, "created_at": "2018-10-16T03:44:55Z", "updated_at": "2018-10-18T15:14:10Z", "closed_at": "2018-10-18T15:14:10Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "## Description\r\n\r\nDuring testing of 0.10.0~rc2 on prod VMs, I created a server backup, ran `./manage.py reset` on the app server to nuke the database, and tried to restore from the backup. This failed with the error text below:\r\n\r\n```\r\nfatal: [app]: FAILED! => {\"ansible_job_id\": \"863470588110.4013\", \"changed\": true, \"cmd\": [\"/tmp/restore.py\", \"/tmp/sd-backup-2018-10-16--03-18-02.tar.gz\"], \"delta\": \"0:00:08.723426\", \"end\": \"2018-10-16 03:20:49.675663\", \"finished\": 1, \"msg\": \"non-zero return code\", \"rc\": 1, \"start\": \"2018-10-16 03:20:40.952237\", \"stderr\": \"+ set -o pipefail\\n+ case \\\"$1\\\" in\\n+ for dir in '/var/lib/securedrop/{,tmp,store,keys,backups}' /var/www/securedrop\\n+ mkdir -p /var/lib/securedrop/\\n+ chmod 0700 /var/lib/securedrop/\\n+ for dir in '/var/lib/securedrop/{,tmp,store,keys,backups}' /var/www/securedrop\\n+ mkdir -p /var/lib/securedrop/tmp\\n+ chmod 0700 /var/lib/securedrop/tmp\\n+ for dir in '/var/lib/securedrop/{,tmp,store,keys,backups}' /var/www/securedrop\\n+ mkdir -p /var/lib/securedrop/store\\n+ chmod 0700 /var/lib/securedrop/store\\n+ for dir in '/var/lib/securedrop/{,tmp,store,keys,backups}' /var/www/securedrop\\n+ mkdir -p /var/lib/securedrop/keys\\n+ chmod 0700 /var/lib/securedrop/keys\\n+ for dir in '/var/lib/securedrop/{,tmp,store,keys,backups}' /var/www/securedrop\\n+ mkdir -p /var/lib/securedrop/backups\\n+ chmod 0700 /var/lib/securedrop/backups\\n+ for dir in '/var/lib/securedrop/{,tmp,store,keys,backups}' /var/www/securedrop\\n+ mkdir -p /var/www/securedrop\\n+ chmod 0700 /var/www/securedrop\\n+ chown -R www-data:www-data /var/lib/securedrop /var/www/securedrop\\n+ pip install --no-index --find-links=/var/securedrop/wheelhouse --upgrade -r /var/www/securedrop/requirements/securedrop-app-code-requirements.txt\\n+ chown -R www-data:www-data /var/www/securedrop\\n+ chown www-data:www-data /var/www/journalist.wsgi\\n+ chown www-data:www-data /var/www/source.wsgi\\n+ a2dissite 000-default\\n+ a2dissite default-ssl\\n+ service apache2 stop\\n+ '[' -e /etc/apparmor.d/disable/usr.sbin.apache2 ']'\\n+ aa-enforce /etc/apparmor.d/usr.sbin.tor\\n+ aa-enforce /etc/apparmor.d/usr.sbin.apache2\\n+ permit_wsgi_authorization\\n+ journalist_conf=/etc/apache2/sites-available/journalist.conf\\n+ grep -qP '^WSGIPass\r\nAuthorization' /etc/apache2/sites-available/journalist.conf\\n+ service apache2 restart\\n+ rm -fr /var/www/securedrop/static/gen/journalist.js /var/www/securedrop/static/gen/source.js\\n+ '[' -n 0.10.0~rc2 ']'\\n+ '[' 0.10.0~rc2 = 0.3 ']'\\n+ chmod u+w /var/www/securedrop/static/i/logo.png\\n+ grep -qE 'MACs\\\\s.*hmac-sha1' /etc/ssh/sshd_config\\n+ database_migration\\n+ database_dir=/var/lib/securedrop\\n+ database_file=/var/lib/securedrop/db.sqlite\\n+ '[' '!' -e /var/lib/securedrop/db.sqlite ']'\\n+ cd /var/www/securedrop/\\n++ alembic current\\nINFO  [alembic.runtime.migration] Context impl SQLiteImpl.\\nINFO  [alembic.runtime.migration] Will assume non-transactional DDL.\\n+ '[' -z '' ']'\\n++ sqlite3 /var/lib/securedrop/db.sqlite .tables\\n+ sqlite_tables='alembic_version           replies                   submissions             \\njournalist_login_attempt  source_stars            \\njournalists               sources                 '\\n+ grep -q journalists\\n+ echo 'alembic_version           replies                   submissions             \\njournalist_login_attempt  source_stars            \\njournalists               sources                 '\\n+ alembic stamp 15ac9509fc68\\nINFO  [alembic.runtime.migration] Context impl SQLiteImpl.\\nINFO  [alembic.runtime.migration] Will assume non-transactional DDL.\\nINFO  [alembic.runtime.migration] Running stamp_revision  -> 15ac9509fc68\\n++ date +%Y-%m-%d-%H-%M-%S\\n+ db_backup=/var/lib/securedrop/backups/2018-10-16-03-20-48-db.sqlite\\n+ grep -q '(head)'\\n+ alembic current\\nINFO  [alembic.runtime.migration] Context impl SQLiteImpl.\\nINFO  [alembic.runtime.migration] Will assume non-transactional DDL.\\n+ cp /var/lib/securedrop/db.sqlite /var/lib/securedrop/backups/2018-10-16-03-20-48-db.sqlite\\n+ alembic upgrade head\\nINFO  [alembic.runtime.migration] Context impl SQLiteImpl.\\nINFO  [alembic.runtime.migration] Will assume non-transactional DDL.\\nINFO  [alembic.runtime.migration] Running upgrade 15ac9509fc68 -> faac8092c123, enable security \r\npragmas\\nINFO  [alembic.runtime.migration] Running upgrade faac8092c123 -> 3d91d6948753, Create source UUID column\\nTraceback (most recent call last):\\n  File \\\"/usr/local/bin/alembic\\\", line 11, in <module>\\n    sys.exit(main())\\n  File \\\"/usr/local/lib/python2.7/dist-packages/alembic/config.py\\\", line 486, in main\\n    CommandLine(prog=prog).main(argv=argv)\\n  File \\\"/usr/local/lib/python2.7/dist-packages/alembic/config.py\\\", line 480, in main\\n    self.run_cmd(cfg, options)\\n  File \\\"/usr/local/lib/python2.7/dist-packages/alembic/config.py\\\", line 463, in run_cmd\\n    **dict((k, getattr(options, k, None)) for k in kwarg)\\n  File \\\"/usr/local/lib/python2.7/dist-packages/alembic/command.py\\\", line 254, in upgrade\\n    script.run_env()\\n  File \\\"/usr/local/lib/python2.7/dist-packages/alembic/script/base.py\\\", line 427, in run_env\\n    util.load_python_file(self.dir, 'env.py')\\n  File \\\"/usr/local/lib/python2.7/dist-packages/alembic/util/pyfiles.py\\\", line 81, in load_python_file\\n    module = load_module_py(module_id, path)\\n  File \\\"/usr/local/lib/python2.7/dist-packages/alembic/util/compat.py\\\", line 141, in load_module_py\\n    mod = imp.load_source(module_id, path, fp)\\n  File \\\"alembic/env.py\\\", line 82, in <module>\\n    run_migrations_online()\\n  File \\\"alembic/env.py\\\", line 76, in run_migrations_online\\n    context.run_migrations()\\n  File \\\"<string>\\\", line 8, in run_migrations\\n  File \\\"/usr/local/lib/python2.7/dist-packages/alembic/runtime/environment.py\\\", line 836, in run_migrations\\n    self.get_context().run_migrations(**kw)\\n  File \\\"/usr/local/lib/python2.7/dist-packages/alembic/runtime/migration.py\\\", line 330, in run_migrations\\n    step.migration_fn(**kw)\\n  File \\\"/var/www/securedrop/alembic/versions/3d91d6948753_create_source_uuid_column.py\\\", line 26, in upgrade\\n    op.add_column('sources_tmp', sa.Column('uuid', sa.String(length=36)))\\n  File \\\"<string>\\\", line 8, in add_column\\n  File \\\"<string>\\\", line 3, in add_column\\n  File \\\"/usr/local/l\r\nib/python2.7/dist-packages/alembic/operations/ops.py\\\", line 1565, in add_column\\n    return operations.invoke(op)\\n  File \\\"/usr/local/lib/python2.7/dist-packages/alembic/operations/base.py\\\", line 319, in invoke\\n    return fn(self, operation)\\n  File \\\"/usr/local/lib/python2.7/dist-packages/alembic/operations/toimpl.py\\\", line 123, in add_column\\n    schema=schema\\n  File \\\"/usr/local/lib/python2.7/dist-packages/alembic/ddl/impl.py\\\", line 172, in add_column\\n    self._exec(base.AddColumn(table_name, column, schema=schema))\\n  File \\\"/usr/local/lib/python2.7/dist-packages/alembic/ddl/impl.py\\\", line 118, in _exec\\n    return conn.execute(construct, *multiparams, **params)\\n  File \\\"/usr/local/lib/python2.7/dist-packages/sqlalchemy/engine/base.py\\\", line 948, in execute\\n    return meth(self, multiparams, params)\\n  File \\\"/usr/local/lib/python2.7/dist-packages/sqlalchemy/sql/ddl.py\\\", line 68, in _execute_on_connection\\n    return connection._execute_ddl(self, multiparams, params)\\n  File \\\"/usr/local/lib/python2.7/dist-packages/sqlalchemy/engine/base.py\\\", line 1009, in _execute_ddl\\n    compiled\\n  File \\\"/usr/local/lib/python2.7/dist-packages/sqlalchemy/engine/base.py\\\", line 1200, in _execute_context\\n    context)\\n  File \\\"/usr/local/lib/python2.7/dist-packages/sqlalchemy/engine/base.py\\\", line 1413, in _handle_dbapi_exception\\n    exc_info\\n  File \\\"/usr/local/lib/python2.7/dist-packages/sqlalchemy/util/compat.py\\\", line 203, in raise_from_cause\\n    reraise(type(exception), exception, tb=exc_tb, cause=cause)\\n  File \\\"/usr/local/lib/python2.7/dist-packages/sqlalchemy/engine/base.py\\\", line 1193, in _execute_context\\n    context)\\n  File \\\"/usr/local/lib/python2.7/dist-packages/sqlalchemy/engine/default.py\\\", line 507, in do_execute\\n    cursor.execute(statement, parameters)\\nsqlalchemy.exc.OperationalError: (sqlite3.OperationalError) duplicate column name: uuid [SQL: u'ALTER TABLE sources_tmp ADD COLUMN uuid VARCHAR(36)'] (Background on this error at: http\r\n://sqlalche.me/e/e3q8)\\n+ echo 'Error migrating database: Backup saved to /var/lib/securedrop/backups/2018-10-16-03-20-48-db.sqlite'\\nError migrating database: Backup saved to /var/lib/securedrop/backups/2018-10-16-03-20-48-db.sqlite\\n+ return 1\\nTraceback (most recent call last):\\n  File \\\"/tmp/restore.py\\\", line 53, in <module>\\n    main()\\n  File \\\"/tmp/restore.py\\\", line 49, in main\\n    subprocess.check_call(['dpkg-reconfigure', 'securedrop-app-code'])\\n  File \\\"/usr/lib/python2.7/subprocess.py\\\", line 540, in check_call\\n    raise CalledProcessError(retcode, cmd)\\nsubprocess.CalledProcessError: Command '['dpkg-reconfigure', 'securedrop-app-code']' returned non-zero exit status 1\", \"stderr_lines\": [\"+ set -o pipefail\", \"+ case \\\"$1\\\" in\", \"+ for dir in '/var/lib/securedrop/{,tmp,store,keys,backups}' /var/www/securedrop\", \"+ mkdir -p /var/lib/securedrop/\", \"+ chmod 0700 /var/lib/securedrop/\", \"+ for dir in '/var/lib/securedrop/{,tmp,store,keys,backups}' /var/www/securedrop\", \"+ mkdir -p /var/lib/securedrop/tmp\", \"+ chmod 0700 /var/lib/securedrop/tmp\", \"+ for dir in '/var/lib/securedrop/{,tmp,store,keys,backups}' /var/www/securedrop\", \"+ mkdir -p /var/lib/securedrop/store\", \"+ chmod 0700 /var/lib/securedrop/store\", \"+ for dir in '/var/lib/securedrop/{,tmp,store,keys,backups}' /var/www/securedrop\", \"+ mkdir -p /var/lib/securedrop/keys\", \"+ chmod 0700 /var/lib/securedrop/keys\", \"+ for dir in '/var/lib/securedrop/{,tmp,store,keys,backups}' /var/www/securedrop\", \"+ mkdir -p /var/lib/securedrop/backups\", \"+ chmod 0700 /var/lib/securedrop/backups\", \"+ for dir in '/var/lib/securedrop/{,tmp,store,keys,backups}' /var/www/securedrop\", \"+ mkdir -p /var/www/securedrop\", \"+ chmod 0700 /var/www/securedrop\", \"+ chown -R www-data:www-data /var/lib/securedrop /var/www/securedrop\", \"+ pip install --no-index --find-links=/var/securedrop/wheelhouse --upgrade -r /var/www/securedrop/requirements/securedrop-app-code-requirements.txt\", \"+ chown -R www-data:www-data /var/www/securedrop\",\r\n \"+ chown www-data:www-data /var/www/journalist.wsgi\", \"+ chown www-data:www-data /var/www/source.wsgi\", \"+ a2dissite 000-default\", \"+ a2dissite default-ssl\", \"+ service apache2 stop\", \"+ '[' -e /etc/apparmor.d/disable/usr.sbin.apache2 ']'\", \"+ aa-enforce /etc/apparmor.d/usr.sbin.tor\", \"+ aa-enforce /etc/apparmor.d/usr.sbin.apache2\", \"+ permit_wsgi_authorization\", \"+ journalist_conf=/etc/apache2/sites-available/journalist.conf\", \"+ grep -qP '^WSGIPassAuthorization' /etc/apache2/sites-available/journalist.conf\", \"+ service apache2 restart\", \"+ rm -fr /var/www/securedrop/static/gen/journalist.js /var/www/securedrop/static/gen/source.js\", \"+ '[' -n 0.10.0~rc2 ']'\", \"+ '[' 0.10.0~rc2 = 0.3 ']'\", \"+ chmod u+w /var/www/securedrop/static/i/logo.png\", \"+ grep -qE 'MACs\\\\s.*hmac-sha1' /etc/ssh/sshd_config\", \"+ database_migration\", \"+ database_dir=/var/lib/securedrop\", \"+ database_file=/var/lib/securedrop/db.sqlite\", \"+ '[' '!' -e /var/lib/securedrop/db.sqlite ']'\", \"+ cd /var/www/securedrop/\", \"++ alembic current\", \"INFO  [alembic.runtime.migration] Context impl SQLiteImpl.\", \"INFO  [alembic.runtime.migration] Will assume non-transactional DDL.\", \"+ '[' -z '' ']'\", \"++ sqlite3 /var/lib/securedrop/db.sqlite .tables\", \"+ sqlite_tables='alembic_version           replies                   submissions             \", \"journalist_login_attempt  source_stars            \", \"journalists               sources                 '\", \"+ grep -q journalists\", \"+ echo 'alembic_version           replies                   submissions             \", \"journalist_login_attempt  source_stars            \", \"journalists               sources                 '\", \"+ alembic stamp 15ac9509fc68\", \"INFO  [alembic.runtime.migration] Context impl SQLiteImpl.\", \"INFO  [alembic.runtime.migration] Will assume non-transactional DDL.\", \"INFO  [alembic.runtime.migration] Running stamp_revision  -> 15ac9509fc68\", \"++ date +%Y-%m-%d-%H-%M-%S\", \"+ db_backup=/var/lib/securedrop/backups/2018-10-16-03-20-48-db.sqlite\",\r\n \"+ grep -q '(head)'\", \"+ alembic current\", \"INFO  [alembic.runtime.migration] Context impl SQLiteImpl.\", \"INFO  [alembic.runtime.migration] Will assume non-transactional DDL.\", \"+ cp /var/lib/securedrop/db.sqlite /var/lib/securedrop/backups/2018-10-16-03-20-48-db.sqlite\", \"+ alembic upgrade head\", \"INFO  [alembic.runtime.migration] Context impl SQLiteImpl.\", \"INFO  [alembic.runtime.migration] Will assume non-transactional DDL.\", \"INFO  [alembic.runtime.migration] Running upgrade 15ac9509fc68 -> faac8092c123, enable security pragmas\", \"INFO  [alembic.runtime.migration] Running upgrade faac8092c123 -> 3d91d6948753, Create source UUID column\", \"Traceback (most recent call last):\", \"  File \\\"/usr/local/bin/alembic\\\", line 11, in <module>\", \"    sys.exit(main())\", \"  File \\\"/usr/local/lib/python2.7/dist-packages/alembic/config.py\\\", line 486, in main\", \"    CommandLine(prog=prog).main(argv=argv)\", \"  File \\\"/usr/local/lib/python2.7/dist-packages/alembic/config.py\\\", line 480, in main\", \"    self.run_cmd(cfg, options)\", \"  File \\\"/usr/local/lib/python2.7/dist-packages/alembic/config.py\\\", line 463, in run_cmd\", \"    **dict((k, getattr(options, k, None)) for k in kwarg)\", \"  File \\\"/usr/local/lib/python2.7/dist-packages/alembic/command.py\\\", line 254, in upgrade\", \"    script.run_env()\", \"  File \\\"/usr/local/lib/python2.7/dist-packages/alembic/script/base.py\\\", line 427, in run_env\", \"    util.load_python_file(self.dir, 'env.py')\", \"  File \\\"/usr/local/lib/python2.7/dist-packages/alembic/util/pyfiles.py\\\", line 81, in load_python_file\", \"    module = load_module_py(module_id, path)\", \"  File \\\"/usr/local/lib/python2.7/dist-packages/alembic/util/compat.py\\\", line 141, in load_module_py\", \"    mod = imp.load_source(module_id, path, fp)\", \"  File \\\"alembic/env.py\\\", line 82, in <module>\", \"    run_migrations_online()\", \"  File \\\"alembic/env.py\\\", line 76, in run_migrations_online\", \"    context.run_migrations()\", \"  File \\\"<string>\\\", line 8, in run_migrations\", \"  File \\\"/u\r\nsr/local/lib/python2.7/dist-packages/alembic/runtime/environment.py\\\", line 836, in run_migrations\", \"    self.get_context().run_migrations(**kw)\", \"  File \\\"/usr/local/lib/python2.7/dist-packages/alembic/runtime/migration.py\\\", line 330, in run_migrations\", \"    step.migration_fn(**kw)\", \"  File \\\"/var/www/securedrop/alembic/versions/3d91d6948753_create_source_uuid_column.py\\\", line 26, in upgrade\", \"    op.add_column('sources_tmp', sa.Column('uuid', sa.String(length=36)))\", \"  File \\\"<string>\\\", line 8, in add_column\", \"  File \\\"<string>\\\", line 3, in add_column\", \"  File \\\"/usr/local/lib/python2.7/dist-packages/alembic/operations/ops.py\\\", line 1565, in add_column\", \"    return operations.invoke(op)\", \"  File \\\"/usr/local/lib/python2.7/dist-packages/alembic/operations/base.py\\\", line 319, in invoke\", \"    return fn(self, operation)\", \"  File \\\"/usr/local/lib/python2.7/dist-packages/alembic/operations/toimpl.py\\\", line 123, in add_column\", \"    schema=schema\", \"  File \\\"/usr/local/lib/python2.7/dist-packages/alembic/ddl/impl.py\\\", line 172, in add_column\", \"    self._exec(base.AddColumn(table_name, column, schema=schema))\", \"  File \\\"/usr/local/lib/python2.7/dist-packages/alembic/ddl/impl.py\\\", line 118, in _exec\", \"    return conn.execute(construct, *multiparams, **params)\", \"  File \\\"/usr/local/lib/python2.7/dist-packages/sqlalchemy/engine/base.py\\\", line 948, in execute\", \"    return meth(self, multiparams, params)\", \"  File \\\"/usr/local/lib/python2.7/dist-packages/sqlalchemy/sql/ddl.py\\\", line 68, in _execute_on_connection\", \"    return connection._execute_ddl(self, multiparams, params)\", \"  File \\\"/usr/local/lib/python2.7/dist-packages/sqlalchemy/engine/base.py\\\", line 1009, in _execute_ddl\", \"    compiled\", \"  File \\\"/usr/local/lib/python2.7/dist-packages/sqlalchemy/engine/base.py\\\", line 1200, in _execute_context\", \"    context)\", \"  File \\\"/usr/local/lib/python2.7/dist-packages/sqlalchemy/engine/base.py\\\", line 1413, in _handle_dbapi_exception\", \"    exc_i\r\nnfo\", \"  File \\\"/usr/local/lib/python2.7/dist-packages/sqlalchemy/util/compat.py\\\", line 203, in raise_from_cause\", \"    reraise(type(exception), exception, tb=exc_tb, cause=cause)\", \"  File \\\"/usr/local/lib/python2.7/dist-packages/sqlalchemy/engine/base.py\\\", line 1193, in _execute_context\", \"    context)\", \"  File \\\"/usr/local/lib/python2.7/dist-packages/sqlalchemy/engine/default.py\\\", line 507, in do_execute\", \"    cursor.execute(statement, parameters)\", \"sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) duplicate column name: uuid [SQL: u'ALTER TABLE sources_tmp ADD COLUMN uuid VARCHAR(36)'] (Background on this error at: http://sqlalche.me/e/e3q8)\", \"+ echo 'Error migrating database: Backup saved to /var/lib/securedrop/backups/2018-10-16-03-20-48-db.sqlite'\", \"Error migrating database: Backup saved to /var/lib/securedrop/backups/2018-10-16-03-20-48-db.sqlite\", \"+ return 1\", \"Traceback (most recent call last):\", \"  File \\\"/tmp/restore.py\\\", line 53, in <module>\", \"    main()\", \"  File \\\"/tmp/restore.py\\\", line 49, in main\", \"    subprocess.check_call(['dpkg-reconfigure', 'securedrop-app-code'])\", \"  File \\\"/usr/lib/python2.7/subprocess.py\\\", line 540, in check_call\", \"    raise CalledProcessError(retcode, cmd)\", \"subprocess.CalledProcessError: Command '['dpkg-reconfigure', 'securedrop-app-code']' returned non-zero exit status 1\"], \"stdout\": \" * Restarting web server apache2\\n   ...done.\\n * Reloading tor daemon configuration...\\n   ...done.\\nIgnoring indexes: https://pypi.python.org/simple/\\nRequirement already up-to-date: alembic==0.9.9 in /usr/local/lib/python2.7/dist-packages (from -r /var/www/securedrop/requirements/securedrop-app-code-requirements.txt (line 7))\\nRequirement already up-to-date: argon2-cffi==18.1.0 in /usr/local/lib/python2.7/dist-packages (from -r /var/www/securedrop/requirements/securedrop-app-code-requirements.txt (line 8))\\nRequirement already up-to-date: asn1crypto==0.24.0 in /usr/local/lib/python2.7/dist-packages (from -r /var/\r\nwww/securedrop/requirements/securedrop-app-code-requirements.txt (line 9))\\nRequirement already up-to-date: babel==2.5.1 in /usr/local/lib/python2.7/dist-packages (from -r /var/www/securedrop/requirements/securedrop-app-code-requirements.txt (line 10))\\nRequirement already up-to-date: cffi==1.11.5 in /usr/local/lib/python2.7/dist-packages (from -r /var/www/securedrop/requirements/securedrop-app-code-requirements.txt (line 11))\\nRequirement already up-to-date: click==6.7 in /usr/local/lib/python2.7/dist-packages (from -r /var/www/securedrop/requirements/securedrop-app-code-requirements.txt (line 12))\\nRequirement already up-to-date: cryptography==2.0.3 in /usr/local/lib/python2.7/dist-packages (from -r /var/www/securedrop/requirements/securedrop-app-code-requirements.txt (line 13))\\nRequirement already up-to-date: cssmin==0.2.0 in /usr/local/lib/python2.7/dist-packages (from -r /var/www/securedrop/requirements/securedrop-app-code-requirements.txt (line 14))\\nRequirement already up-to-date: enum34==1.1.6 in /usr/local/lib/python2.7/dist-packages (from -r /var/www/securedrop/requirements/securedrop-app-code-requirements.txt (line 15))\\nRequirement already up-to-date: flask-assets==0.12 in /usr/local/lib/python2.7/dist-packages (from -r /var/www/securedrop/requirements/securedrop-app-code-requirements.txt (line 16))\\nRequirement already up-to-date: flask-babel==0.11.2 in /usr/local/lib/python2.7/dist-packages (from -r /var/www/securedrop/requirements/securedrop-app-code-requirements.txt (line 17))\\nRequirement already up-to-date: flask-sqlalchemy==2.3.2 in /usr/local/lib/python2.7/dist-packages (from -r /var/www/securedrop/requirements/securedrop-app-code-requirements.txt (line 18))\\nRequirement already up-to-date: flask-wtf==0.14.2 in /usr/local/lib/python2.7/dist-packages (from -r /var/www/securedrop/requirements/securedrop-app-code-requirements.txt (line 19))\\nRequirement already up-to-date: flask==1.0.2 in /usr/local/lib/python2.7/dist-packages (from -r /var/www/sec\r\nuredrop/requirements/securedrop-app-code-requirements.txt (line 20))\\nRequirement already up-to-date: gnupg==2.3.1 in /usr/local/lib/python2.7/dist-packages (from -r /var/www/securedrop/requirements/securedrop-app-code-requirements.txt (line 21))\\nRequirement already up-to-date: idna==2.6 in /usr/local/lib/python2.7/dist-packages (from -r /var/www/securedrop/requirements/securedrop-app-code-requirements.txt (line 22))\\nRequirement already up-to-date: ipaddress==1.0.22 in /usr/local/lib/python2.7/dist-packages (from -r /var/www/securedrop/requirements/securedrop-app-code-requirements.txt (line 23))\\nRequirement already up-to-date: itsdangerous==0.24 in /usr/local/lib/python2.7/dist-packages (from -r /var/www/securedrop/requirements/securedrop-app-code-requirements.txt (line 24))\\nRequirement already up-to-date: jinja2==2.10 in /usr/local/lib/python2.7/dist-packages (from -r /var/www/securedrop/requirements/securedrop-app-code-requirements.txt (line 25))\\nRequirement already up-to-date: jsmin==2.2.2 in /usr/local/lib/python2.7/dist-packages (from -r /var/www/securedrop/requirements/securedrop-app-code-requirements.txt (line 26))\\nRequirement already up-to-date: mako==1.0.7 in /usr/local/lib/python2.7/dist-packages (from -r /var/www/securedrop/requirements/securedrop-app-code-requirements.txt (line 27))\\nRequirement already up-to-date: markupsafe==1.0 in /usr/local/lib/python2.7/dist-packages (from -r /var/www/securedrop/requirements/securedrop-app-code-requirements.txt (line 28))\\nRequirement already up-to-date: passlib==1.7.1 in /usr/local/lib/python2.7/dist-packages (from -r /var/www/securedrop/requirements/securedrop-app-code-requirements.txt (line 29))\\nRequirement already up-to-date: psutil==5.4.3 in /usr/local/lib/python2.7/dist-packages (from -r /var/www/securedrop/requirements/securedrop-app-code-requirements.txt (line 30))\\nRequirement already up-to-date: pycparser==2.18 in /usr/local/lib/python2.7/dist-packages (from -r /var/www/securedrop/requirements/secur\r\nedrop-app-code-requirements.txt (line 31))\\nRequirement already up-to-date: pyotp==2.2.6 in /usr/local/lib/python2.7/dist-packages (from -r /var/www/securedrop/requirements/securedrop-app-code-requirements.txt (line 32))\\nRequirement already up-to-date: python-dateutil==2.7.2 in /usr/local/lib/python2.7/dist-packages (from -r /var/www/securedrop/requirements/securedrop-app-code-requirements.txt (line 33))\\nRequirement already up-to-date: python-editor==1.0.3 in /usr/local/lib/python2.7/dist-packages (from -r /var/www/securedrop/requirements/securedrop-app-code-requirements.txt (line 34))\\nRequirement already up-to-date: pytz==2017.3 in /usr/local/lib/python2.7/dist-packages (from -r /var/www/securedrop/requirements/securedrop-app-code-requirements.txt (line 35))\\nRequirement already up-to-date: qrcode==5.3 in /usr/local/lib/python2.7/dist-packages (from -r /var/www/securedrop/requirements/securedrop-app-code-requirements.txt (line 36))\\nRequirement already up-to-date: redis==2.10.6 in /usr/local/lib/python2.7/dist-packages (from -r /var/www/securedrop/requirements/securedrop-app-code-requirements.txt (line 37))\\nRequirement already up-to-date: rq==0.10.0 in /usr/local/lib/python2.7/dist-packages (from -r /var/www/securedrop/requirements/securedrop-app-code-requirements.txt (line 38))\\nRequirement already up-to-date: scrypt==0.8.0 in /usr/local/lib/python2.7/dist-packages (from -r /var/www/securedrop/requirements/securedrop-app-code-requirements.txt (line 39))\\nRequirement already up-to-date: sh==1.12.14 in /usr/local/lib/python2.7/dist-packages (from -r /var/www/securedrop/requirements/securedrop-app-code-requirements.txt (line 40))\\nRequirement already up-to-date: six==1.11.0 in /usr/local/lib/python2.7/dist-packages (from -r /var/www/securedrop/requirements/securedrop-app-code-requirements.txt (line 41))\\nRequirement already up-to-date: sqlalchemy==1.2.0 in /usr/local/lib/python2.7/dist-packages (from -r /var/www/securedrop/requirements/securedrop-app-code-require\r\nments.txt (line 42))\\nRequirement already up-to-date: typing==3.6.4 in /usr/local/lib/python2.7/dist-packages (from -r /var/www/securedrop/requirements/securedrop-app-code-requirements.txt (line 43))\\nRequirement already up-to-date: webassets==0.12.1 in /usr/local/lib/python2.7/dist-packages (from -r /var/www/securedrop/requirements/securedrop-app-code-requirements.txt (line 44))\\nRequirement already up-to-date: werkzeug==0.14.1 in /usr/local/lib/python2.7/dist-packages (from -r /var/www/securedrop/requirements/securedrop-app-code-requirements.txt (line 45))\\nRequirement already up-to-date: wtforms==2.1 in /usr/local/lib/python2.7/dist-packages (from -r /var/www/securedrop/requirements/securedrop-app-code-requirements.txt (line 46))\\nCleaning up...\\nSite 000-default already disabled\\nSite default-ssl already disabled\\n * Stopping web server apache2\\n * \\nSetting /etc/apparmor.d/usr.sbin.tor to enforce mode.\\nSetting /etc/apparmor.d/usr.sbin.apache2 to enforce mode.\\n * Restarting web server apache2\\n   ...done.\", \"stdout_lines\": [\" * Restarting web server apache2\", \"   ...done.\", \" * Reloading tor daemon configuration...\", \"   ...done.\", \"Ignoring indexes: https://pypi.python.org/simple/\", \"Requirement already up-to-date: alembic==0.9.9 in /usr/local/lib/python2.7/dist-packages (from -r /var/www/securedrop/requirements/securedrop-app-code-requirements.txt (line 7))\", \"Requirement already up-to-date: argon2-cffi==18.1.0 in /usr/local/lib/python2.7/dist-packages (from -r /var/www/securedrop/requirements/securedrop-app-code-requirements.txt (line 8))\", \"Requirement already up-to-date: asn1crypto==0.24.0 in /usr/local/lib/python2.7/dist-packages (from -r /var/www/securedrop/requirements/securedrop-app-code-requirements.txt (line 9))\", \"Requirement already up-to-date: babel==2.5.1 in /usr/local/lib/python2.7/dist-packages (from -r /var/www/securedrop/requirements/securedrop-app-code-requirements.txt (line 10))\", \"Requirement already up-to-date: cffi==1.11.5 in /usr/local\r\n/lib/python2.7/dist-packages (from -r /var/www/securedrop/requirements/securedrop-app-code-requirements.txt (line 11))\", \"Requirement already up-to-date: click==6.7 in /usr/local/lib/python2.7/dist-packages (from -r /var/www/securedrop/requirements/securedrop-app-code-requirements.txt (line 12))\", \"Requirement already up-to-date: cryptography==2.0.3 in /usr/local/lib/python2.7/dist-packages (from -r /var/www/securedrop/requirements/securedrop-app-code-requirements.txt (line 13))\", \"Requirement already up-to-date: cssmin==0.2.0 in /usr/local/lib/python2.7/dist-packages (from -r /var/www/securedrop/requirements/securedrop-app-code-requirements.txt (line 14))\", \"Requirement already up-to-date: enum34==1.1.6 in /usr/local/lib/python2.7/dist-packages (from -r /var/www/securedrop/requirements/securedrop-app-code-requirements.txt (line 15))\", \"Requirement already up-to-date: flask-assets==0.12 in /usr/local/lib/python2.7/dist-packages (from -r /var/www/securedrop/requirements/securedrop-app-code-requirements.txt (line 16))\", \"Requirement already up-to-date: flask-babel==0.11.2 in /usr/local/lib/python2.7/dist-packages (from -r /var/www/securedrop/requirements/securedrop-app-code-requirements.txt (line 17))\", \"Requirement already up-to-date: flask-sqlalchemy==2.3.2 in /usr/local/lib/python2.7/dist-packages (from -r /var/www/securedrop/requirements/securedrop-app-code-requirements.txt (line 18))\", \"Requirement already up-to-date: flask-wtf==0.14.2 in /usr/local/lib/python2.7/dist-packages (from -r /var/www/securedrop/requirements/securedrop-app-code-requirements.txt (line 19))\", \"Requirement already up-to-date: flask==1.0.2 in /usr/local/lib/python2.7/dist-packages (from -r /var/www/securedrop/requirements/securedrop-app-code-requirements.txt (line 20))\", \"Requirement already up-to-date: gnupg==2.3.1 in /usr/local/lib/python2.7/dist-packages (from -r /var/www/securedrop/requirements/securedrop-app-code-requirements.txt (line 21))\", \"Requirement already up-to-date: idna==2.6 \r\nin /usr/local/lib/python2.7/dist-packages (from -r /var/www/securedrop/requirements/securedrop-app-code-requirements.txt (line 22))\", \"Requirement already up-to-date: ipaddress==1.0.22 in /usr/local/lib/python2.7/dist-packages (from -r /var/www/securedrop/requirements/securedrop-app-code-requirements.txt (line 23))\", \"Requirement already up-to-date: itsdangerous==0.24 in /usr/local/lib/python2.7/dist-packages (from -r /var/www/securedrop/requirements/securedrop-app-code-requirements.txt (line 24))\", \"Requirement already up-to-date: jinja2==2.10 in /usr/local/lib/python2.7/dist-packages (from -r /var/www/securedrop/requirements/securedrop-app-code-requirements.txt (line 25))\", \"Requirement already up-to-date: jsmin==2.2.2 in /usr/local/lib/python2.7/dist-packages (from -r /var/www/securedrop/requirements/securedrop-app-code-requirements.txt (line 26))\", \"Requirement already up-to-date: mako==1.0.7 in /usr/local/lib/python2.7/dist-packages (from -r /var/www/securedrop/requirements/securedrop-app-code-requirements.txt (line 27))\", \"Requirement already up-to-date: markupsafe==1.0 in /usr/local/lib/python2.7/dist-packages (from -r /var/www/securedrop/requirements/securedrop-app-code-requirements.txt (line 28))\", \"Requirement already up-to-date: passlib==1.7.1 in /usr/local/lib/python2.7/dist-packages (from -r /var/www/securedrop/requirements/securedrop-app-code-requirements.txt (line 29))\", \"Requirement already up-to-date: psutil==5.4.3 in /usr/local/lib/python2.7/dist-packages (from -r /var/www/securedrop/requirements/securedrop-app-code-requirements.txt (line 30))\", \"Requirement already up-to-date: pycparser==2.18 in /usr/local/lib/python2.7/dist-packages (from -r /var/www/securedrop/requirements/securedrop-app-code-requirements.txt (line 31))\", \"Requirement already up-to-date: pyotp==2.2.6 in /usr/local/lib/python2.7/dist-packages (from -r /var/www/securedrop/requirements/securedrop-app-code-requirements.txt (line 32))\", \"Requirement already up-to-date: python-dateuti\r\nl==2.7.2 in /usr/local/lib/python2.7/dist-packages (from -r /var/www/securedrop/requirements/securedrop-app-code-requirements.txt (line 33))\", \"Requirement already up-to-date: python-editor==1.0.3 in /usr/local/lib/python2.7/dist-packages (from -r /var/www/securedrop/requirements/securedrop-app-code-requirements.txt (line 34))\", \"Requirement already up-to-date: pytz==2017.3 in /usr/local/lib/python2.7/dist-packages (from -r /var/www/securedrop/requirements/securedrop-app-code-requirements.txt (line 35))\", \"Requirement already up-to-date: qrcode==5.3 in /usr/local/lib/python2.7/dist-packages (from -r /var/www/securedrop/requirements/securedrop-app-code-requirements.txt (line 36))\", \"Requirement already up-to-date: redis==2.10.6 in /usr/local/lib/python2.7/dist-packages (from -r /var/www/securedrop/requirements/securedrop-app-code-requirements.txt (line 37))\", \"Requirement already up-to-date: rq==0.10.0 in /usr/local/lib/python2.7/dist-packages (from -r /var/www/securedrop/requirements/securedrop-app-code-requirements.txt (line 38))\", \"Requirement already up-to-date: scrypt==0.8.0 in /usr/local/lib/python2.7/dist-packages (from -r /var/www/securedrop/requirements/securedrop-app-code-requirements.txt (line 39))\", \"Requirement already up-to-date: sh==1.12.14 in /usr/local/lib/python2.7/dist-packages (from -r /var/www/securedrop/requirements/securedrop-app-code-requirements.txt (line 40))\", \"Requirement already up-to-date: six==1.11.0 in /usr/local/lib/python2.7/dist-packages (from -r /var/www/securedrop/requirements/securedrop-app-code-requirements.txt (line 41))\", \"Requirement already up-to-date: sqlalchemy==1.2.0 in /usr/local/lib/python2.7/dist-packages (from -r /var/www/securedrop/requirements/securedrop-app-code-requirements.txt (line 42))\", \"Requirement already up-to-date: typing==3.6.4 in /usr/local/lib/python2.7/dist-packages (from -r /var/www/securedrop/requirements/securedrop-app-code-requirements.txt (line 43))\", \"Requirement already up-to-date: webassets==0.\r\n12.1 in /usr/local/lib/python2.7/dist-packages (from -r /var/www/securedrop/requirements/securedrop-app-code-requirements.txt (line 44))\", \"Requirement already up-to-date: werkzeug==0.14.1 in /usr/local/lib/python2.7/dist-packages (from -r /var/www/securedrop/requirements/securedrop-app-code-requirements.txt (line 45))\", \"Requirement already up-to-date: wtforms==2.1 in /usr/local/lib/python2.7/dist-packages (from -r /var/www/securedrop/requirements/securedrop-app-code-requirements.txt (line 46))\", \"Cleaning up...\", \"Site 000-default already disabled\", \"Site default-ssl already disabled\", \" * Stopping web server apache2\", \" * \", \"Setting /etc/apparmor.d/usr.sbin.tor to enforce mode.\", \"Setting /etc/apparmor.d/usr.sbin.apache2 to enforce mode.\", \" * Restarting web server apache2\", \"   ...done.\"]}\r\n```\r\n\r\n## Steps to Reproduce\r\n\r\n- Install SecureDrop 0.10.0~rc2 on prod VMs\r\n- run the backup procedure as documented\r\n- run `./manage.py reset` on the app server\r\n- run the restore procedure as documented\r\n\r\n### Environment\r\nCandidate version: 0.10.0~rc2\r\nTails version: 3.9.1\r\nInstance hardware: prod VMs\r\n\r\n## Expected Behavior\r\nServer config and DB are restored without error\r\n\r\n## Actual Behavior\r\nRestore fails with the errors above\r\n\r\n## Comments\r\nAttached copy of sqlite db backup referenced in the first error message.\r\n\r\n[2018-10-16-03-20-48-db.sqlite.zip](https://github.com/freedomofpress/securedrop/files/2481337/2018-10-16-03-20-48-db.sqlite.zip)\r\n\r\nIt looks like it's related to the uuid column:\r\n```\r\nsqlalchemy.exc.OperationalError: (sqlite3.OperationalError) duplicate column name: uuid [SQL: u'ALTER TABLE sources_tmp ADD COLUMN uuid VARCHAR(36)'] (Background on this error at: http://sqlalche.me/e/e3q8)\r\n+ echo 'Error migrating database: Backup saved to /var/lib/securedrop/backups/2018-10-16-03-20-48-db.sqlite'\r\nError migrating database: Backup saved to /var/lib/securedrop/backups/2018-10-16-03-20-48-db.sqlite\r\n+ return 1\r\n```\r\n", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3878/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3878/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3877", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3877/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3877/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3877/events", "html_url": "https://github.com/freedomofpress/securedrop/issues/3877", "id": 370375075, "node_id": "MDU6SXNzdWUzNzAzNzUwNzU=", "number": 3877, "title": "Apache is removing ETag headers", "user": {"login": "redshiftzero", "id": 7832803, "node_id": "MDQ6VXNlcjc4MzI4MDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7832803?v=4", "gravatar_id": "", "url": "https://api.github.com/users/redshiftzero", "html_url": "https://github.com/redshiftzero", "followers_url": "https://api.github.com/users/redshiftzero/followers", "following_url": "https://api.github.com/users/redshiftzero/following{/other_user}", "gists_url": "https://api.github.com/users/redshiftzero/gists{/gist_id}", "starred_url": "https://api.github.com/users/redshiftzero/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/redshiftzero/subscriptions", "organizations_url": "https://api.github.com/users/redshiftzero/orgs", "repos_url": "https://api.github.com/users/redshiftzero/repos", "events_url": "https://api.github.com/users/redshiftzero/events{/privacy}", "received_events_url": "https://api.github.com/users/redshiftzero/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/freedomofpress/securedrop/milestones/22", "html_url": "https://github.com/freedomofpress/securedrop/milestone/22", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/milestones/22/labels", "id": 2513781, "node_id": "MDk6TWlsZXN0b25lMjUxMzc4MQ==", "number": 22, "title": "Long Term Product Backlog", "description": "Issues we think are worthwhile and should be implemented some day. Issues selected for near term development are also added to the \"near term\" backlog on the SecureDrop team's project work board, from which they can move into a sprint.", "creator": {"login": "redshiftzero", "id": 7832803, "node_id": "MDQ6VXNlcjc4MzI4MDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7832803?v=4", "gravatar_id": "", "url": "https://api.github.com/users/redshiftzero", "html_url": "https://github.com/redshiftzero", "followers_url": "https://api.github.com/users/redshiftzero/followers", "following_url": "https://api.github.com/users/redshiftzero/following{/other_user}", "gists_url": "https://api.github.com/users/redshiftzero/gists{/gist_id}", "starred_url": "https://api.github.com/users/redshiftzero/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/redshiftzero/subscriptions", "organizations_url": "https://api.github.com/users/redshiftzero/orgs", "repos_url": "https://api.github.com/users/redshiftzero/repos", "events_url": "https://api.github.com/users/redshiftzero/events{/privacy}", "received_events_url": "https://api.github.com/users/redshiftzero/received_events", "type": "User", "site_admin": false}, "open_issues": 42, "closed_issues": 32, "state": "open", "created_at": "2017-05-10T22:07:00Z", "updated_at": "2022-10-20T15:20:20Z", "due_on": null, "closed_at": null}, "comments": 6, "created_at": "2018-10-15T22:56:52Z", "updated_at": "2019-06-06T21:37:04Z", "closed_at": "2019-06-06T21:37:03Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "## Description\r\n\r\nWe send ETags in responses from a couple of journalist API endpoints ([reference](https://docs.securedrop.org/en/release-0.9/development/journalist_api.html#download-a-submission-get)), but Apache is stripping them off via `Header unset Etag`\r\n\r\n## Steps to Reproduce\r\n\r\n0. Provision staging servers\r\n1. Add a test source, a test submission, and a test journalist user\r\n2. Authenticate to the API via submitting your credentials to `/api/v1/token` as described [here](https://docs.securedrop.org/en/release-0.9/development/journalist_api.html#authentication)\r\n3. Try to download a response via a GET request to `/api/v1/sources/<source_uuid>/submissions/<submission_uuid>/download` where `source_uuid` and `submission_uuid` are valid\r\n\r\n## Expected Behavior\r\n\r\nresponse has `ETag` header \r\n\r\n## Actual Behavior\r\n\r\nresponse does not have `ETag` header \r\n\r\n## Comments\r\n\r\nThis is similar to #3772 so a similar fix will do here (modifying Apache configs in `postinst` of `securedrop-app-code` package). In terms of priority, this is not a showstopping bug (users can still download files via the API without issue), so 0.11.0 or a bugfix release after 0.10.0 is fine. ", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3877/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3877/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3876", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3876/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3876/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3876/events", "html_url": "https://github.com/freedomofpress/securedrop/issues/3876", "id": 370156829, "node_id": "MDU6SXNzdWUzNzAxNTY4Mjk=", "number": 3876, "title": "Journalist API responses include Set-Cookie/Vary headers", "user": {"login": "heartsucker", "id": 3998464, "node_id": "MDQ6VXNlcjM5OTg0NjQ=", "avatar_url": "https://avatars.githubusercontent.com/u/3998464?v=4", "gravatar_id": "", "url": "https://api.github.com/users/heartsucker", "html_url": "https://github.com/heartsucker", "followers_url": "https://api.github.com/users/heartsucker/followers", "following_url": "https://api.github.com/users/heartsucker/following{/other_user}", "gists_url": "https://api.github.com/users/heartsucker/gists{/gist_id}", "starred_url": "https://api.github.com/users/heartsucker/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/heartsucker/subscriptions", "organizations_url": "https://api.github.com/users/heartsucker/orgs", "repos_url": "https://api.github.com/users/heartsucker/repos", "events_url": "https://api.github.com/users/heartsucker/events{/privacy}", "received_events_url": "https://api.github.com/users/heartsucker/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}, {"id": 192539755, "node_id": "MDU6TGFiZWwxOTI1Mzk3NTU=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/app", "name": "app", "color": "bfe5bf", "default": false, "description": null}, {"id": 625966031, "node_id": "MDU6TGFiZWw2MjU5NjYwMzE=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/able%20to%20reproduce", "name": "able to reproduce", "color": "fbca04", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2018-10-15T13:12:43Z", "updated_at": "2018-12-09T16:15:28Z", "closed_at": "2018-12-09T16:15:28Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "## Description\r\n\r\nThe API includes the `Set-Cookie` header and `Vary: Cookie` when they should not as they are not relevant to accessing the API.\r\n\r\n## Steps to Reproduce\r\n\r\nIn one terminal: `make dev`.\r\nIn another: `http HEAD localhost:8081/api/v1`\r\n\r\n## Expected Behavior\r\n\r\n```http\r\nHTTP/1.0 200 OK\r\nContent-Length: 198\r\nContent-Type: application/json\r\nDate: Mon, 15 Oct 2018 13:06:32 GMT\r\nServer: Werkzeug/0.14.1 Python/2.7.6\r\n```\r\n\r\n## Actual Behavior\r\n\r\n```http\r\nHTTP/1.0 200 OK\r\nContent-Length: 198\r\nContent-Type: application/json\r\nDate: Mon, 15 Oct 2018 13:06:32 GMT\r\nServer: Werkzeug/0.14.1 Python/2.7.6\r\nSet-Cookie: js=eyJleHBpcmVzIjp7IiBkIjoiTW9uLCAxNSBPY3QgMjAxOCAxNTowNjozMiBHTVQifX0.DqYiWA.-hH2qepnrLDYF8HV79vsn29TfhY; HttpOnly; Path=/\r\nVary: Cookie\r\n```\r\n\r\n## Comments\r\n\r\nI have tried implementing and override to `SecureSessionInterface` that doesn't set a cookie if the endpoint matches the API endpoint, but... no dice so far.", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3876/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3876/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3862", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3862/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3862/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3862/events", "html_url": "https://github.com/freedomofpress/securedrop/issues/3862", "id": 368807237, "node_id": "MDU6SXNzdWUzNjg4MDcyMzc=", "number": 3862, "title": "Sources with a null value for last_updated will break the web UI", "user": {"login": "heartsucker", "id": 3998464, "node_id": "MDQ6VXNlcjM5OTg0NjQ=", "avatar_url": "https://avatars.githubusercontent.com/u/3998464?v=4", "gravatar_id": "", "url": "https://api.github.com/users/heartsucker", "html_url": "https://github.com/heartsucker", "followers_url": "https://api.github.com/users/heartsucker/followers", "following_url": "https://api.github.com/users/heartsucker/following{/other_user}", "gists_url": "https://api.github.com/users/heartsucker/gists{/gist_id}", "starred_url": "https://api.github.com/users/heartsucker/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/heartsucker/subscriptions", "organizations_url": "https://api.github.com/users/heartsucker/orgs", "repos_url": "https://api.github.com/users/heartsucker/repos", "events_url": "https://api.github.com/users/heartsucker/events{/privacy}", "received_events_url": "https://api.github.com/users/heartsucker/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}, {"id": 192539755, "node_id": "MDU6TGFiZWwxOTI1Mzk3NTU=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/app", "name": "app", "color": "bfe5bf", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2018-10-10T19:01:17Z", "updated_at": "2018-10-15T19:31:15Z", "closed_at": "2018-10-15T19:31:15Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "## Description\r\n\r\nIf a source is created without a `last_updated` filed, it will cause the following error on the journalist index page.\r\n\r\n```\r\n172.17.0.1 - - [10/Oct/2018 18:49:40] \"GET / HTTP/1.1\" 500 -\r\nTraceback (most recent call last):\r\n  File \"/usr/local/lib/python2.7/dist-packages/flask/app.py\", line 2309, in __call__\r\n    return self.wsgi_app(environ, start_response)\r\n  File \"/usr/local/lib/python2.7/dist-packages/flask/app.py\", line 2295, in wsgi_app\r\n    response = self.handle_exception(e)\r\n  File \"/usr/local/lib/python2.7/dist-packages/flask/app.py\", line 1741, in handle_exception\r\n    reraise(exc_type, exc_value, tb)\r\n  File \"/usr/local/lib/python2.7/dist-packages/flask/app.py\", line 2292, in wsgi_app\r\n    response = self.full_dispatch_request()\r\n  File \"/usr/local/lib/python2.7/dist-packages/flask/app.py\", line 1815, in full_dispatch_request\r\n    rv = self.handle_user_exception(e)\r\n  File \"/usr/local/lib/python2.7/dist-packages/flask/app.py\", line 1718, in handle_user_exception\r\n    reraise(exc_type, exc_value, tb)\r\n  File \"/usr/local/lib/python2.7/dist-packages/flask/app.py\", line 1813, in full_dispatch_request\r\n    rv = self.dispatch_request()\r\n  File \"/usr/local/lib/python2.7/dist-packages/flask/app.py\", line 1799, in dispatch_request\r\n    return self.view_functions[rule.endpoint](**req.view_args)\r\n  File \"/home/heartsucker/code/freedomofpress/securedrop/securedrop/journalist_app/main.py\", line 79, in index\r\n    starred=starred)\r\n  File \"/usr/local/lib/python2.7/dist-packages/flask/templating.py\", line 135, in render_template\r\n    context, ctx.app)\r\n  File \"/usr/local/lib/python2.7/dist-packages/flask/templating.py\", line 117, in _render\r\n    rv = template.render(context)\r\n  File \"/usr/local/lib/python2.7/dist-packages/jinja2/environment.py\", line 1008, in render\r\n    return self.environment.handle_exception(exc_info, True)\r\n  File \"/usr/local/lib/python2.7/dist-packages/jinja2/environment.py\", line 780, in handle_exception\r\n    reraise(exc_type, exc_value, tb)\r\n  File \"/home/heartsucker/code/freedomofpress/securedrop/securedrop/journalist_templates/index.html\", line 1, in top-level template code\r\n    {% extends \"base.html\" %}\r\n  File \"/home/heartsucker/code/freedomofpress/securedrop/securedrop/journalist_templates/base.html\", line 50, in top-level template code\r\n    {% block body %}{% endblock %}\r\n  File \"/home/heartsucker/code/freedomofpress/securedrop/securedrop/journalist_templates/index.html\", line 25, in block \"body\"\r\n    {% include '_source_row.html' %}\r\n  File \"/home/heartsucker/code/freedomofpress/securedrop/securedrop/journalist_templates/_source_row.html\", line 4, in top-level template code\r\n    <time class=\"date\" title=\"{{ source.last_updated|rel_datetime_format }}\" datetime=\"{{ source.last_updated|rel_datetime_format(fmt=\"%Y-%m-%d %H:%M:%S%Z\") }}\">{{ source.last_updated|rel_datetime_format(relative=True) }}</time>\r\n  File \"/home/heartsucker/code/freedomofpress/securedrop/securedrop/template_filters.py\", line 12, in rel_datetime_format\r\n    time = dates.format_timedelta(datetime.utcnow() - dt,\r\nTypeError: unsupported operand type(s) for -: 'datetime.datetime' and 'NoneType'\r\n```\r\n\r\nThe root cause of this is the schema in `sqlite` permits null values in the `last_updated` columns.\r\n\r\n```sql\r\nCREATE TABLE sources (\r\n\tid INTEGER NOT NULL, \r\n\tuuid VARCHAR(36) NOT NULL, \r\n\tfilesystem_id VARCHAR(96), \r\n\tjournalist_designation VARCHAR(255) NOT NULL, \r\n\tflagged BOOLEAN, \r\n\tlast_updated DATETIME,\r\n        -- ^ allows null :(\r\n\tpending BOOLEAN, \r\n\tinteraction_count INTEGER NOT NULL, \r\n\tPRIMARY KEY (id), \r\n\tUNIQUE (uuid), \r\n\tUNIQUE (filesystem_id), \r\n\tCHECK (flagged IN (0, 1)), \r\n\tCHECK (pending IN (0, 1))\r\n);\r\n```\r\n\r\n## Steps to Reproduce\r\n\r\nManually create a source with `last_updated = null`.\r\n\r\n## Expected Behavior\r\n\r\nThe app should recover gracefully or (better) disallow this entirely.\r\n\r\n## Actual Behavior\r\n\r\nThe app blows up.", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3862/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3862/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3847", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3847/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3847/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3847/events", "html_url": "https://github.com/freedomofpress/securedrop/issues/3847", "id": 366988399, "node_id": "MDU6SXNzdWUzNjY5ODgzOTk=", "number": 3847, "title": "`make staging` not working on macOS", "user": {"login": "redshiftzero", "id": 7832803, "node_id": "MDQ6VXNlcjc4MzI4MDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7832803?v=4", "gravatar_id": "", "url": "https://api.github.com/users/redshiftzero", "html_url": "https://github.com/redshiftzero", "followers_url": "https://api.github.com/users/redshiftzero/followers", "following_url": "https://api.github.com/users/redshiftzero/following{/other_user}", "gists_url": "https://api.github.com/users/redshiftzero/gists{/gist_id}", "starred_url": "https://api.github.com/users/redshiftzero/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/redshiftzero/subscriptions", "organizations_url": "https://api.github.com/users/redshiftzero/orgs", "repos_url": "https://api.github.com/users/redshiftzero/repos", "events_url": "https://api.github.com/users/redshiftzero/events{/privacy}", "received_events_url": "https://api.github.com/users/redshiftzero/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}, {"id": 616447592, "node_id": "MDU6TGFiZWw2MTY0NDc1OTI=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/staging%20VMs", "name": "staging VMs", "color": "bfd4f2", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "msheiny", "id": 1727935, "node_id": "MDQ6VXNlcjE3Mjc5MzU=", "avatar_url": "https://avatars.githubusercontent.com/u/1727935?v=4", "gravatar_id": "", "url": "https://api.github.com/users/msheiny", "html_url": "https://github.com/msheiny", "followers_url": "https://api.github.com/users/msheiny/followers", "following_url": "https://api.github.com/users/msheiny/following{/other_user}", "gists_url": "https://api.github.com/users/msheiny/gists{/gist_id}", "starred_url": "https://api.github.com/users/msheiny/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/msheiny/subscriptions", "organizations_url": "https://api.github.com/users/msheiny/orgs", "repos_url": "https://api.github.com/users/msheiny/repos", "events_url": "https://api.github.com/users/msheiny/events{/privacy}", "received_events_url": "https://api.github.com/users/msheiny/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "msheiny", "id": 1727935, "node_id": "MDQ6VXNlcjE3Mjc5MzU=", "avatar_url": "https://avatars.githubusercontent.com/u/1727935?v=4", "gravatar_id": "", "url": "https://api.github.com/users/msheiny", "html_url": "https://github.com/msheiny", "followers_url": "https://api.github.com/users/msheiny/followers", "following_url": "https://api.github.com/users/msheiny/following{/other_user}", "gists_url": "https://api.github.com/users/msheiny/gists{/gist_id}", "starred_url": "https://api.github.com/users/msheiny/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/msheiny/subscriptions", "organizations_url": "https://api.github.com/users/msheiny/orgs", "repos_url": "https://api.github.com/users/msheiny/repos", "events_url": "https://api.github.com/users/msheiny/events{/privacy}", "received_events_url": "https://api.github.com/users/msheiny/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2018-10-04T22:04:44Z", "updated_at": "2018-10-05T21:51:37Z", "closed_at": "2018-10-05T21:51:37Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "## Description\r\n\r\nI was running through the docs added in #3835, and discovered that the `make staging` target doesn't currently work as intended on macOS. \r\n\r\nBtw we shouldn't remove the Vagrantfile in #3208 until we've tested the new makefile targets on both macOS and Linux (generally people are testing on the latter but not the former). \r\n\r\n## Steps to Reproduce\r\n\r\n1. Check out latest `develop`\r\n2. `make build-debs`\r\n3. `make staging`\r\n\r\n## Expected Behavior\r\n\r\nStaging machines are provisioned without issue\r\n\r\n## Actual Behavior\r\n\r\n```\r\n    TASK [ossec : Add firewall exemption for OSSEC agent registration (both servers)] ***\r\n    ok: [mon-staging] => (item={u'chain': u'INPUT', u'proto': u'tcp', u'cstate': u'NEW,ESTABLISHED,RELATED', u'jump': u'ACCEPT', u'source': u'app-staging', u'match': u'state', u'dest_port': 1515})\r\n    ok: [app-staging] => (item={u'chain': u'OUTPUT', u'proto': u'tcp', u'cstate': u'NEW,ESTABLISHED,RELATED', u'jump': u'ACCEPT', u'dest': u'10.0.1.3', u'match': u'state', u'dest_port': 1515})\r\n    ok: [mon-staging] => (item={u'chain': u'OUTPUT', u'proto': u'tcp', u'cstate': u'ESTABLISHED,RELATED', u'jump': u'ACCEPT', u'dest': u'app-staging', u'source_port': 1515, u'match': u'state'})\r\n    ok: [app-staging] => (item={u'chain': u'INPUT', u'proto': u'tcp', u'cstate': u'ESTABLISHED,RELATED', u'jump': u'ACCEPT', u'source': u'10.0.1.3', u'source_port': 1515, u'match': u'state'})\r\n    \r\n    TASK [ossec : Register OSSEC agent.] *******************************************\r\n    fatal: [app-staging]: FAILED! => {\"changed\": true, \"cmd\": [\"/var/ossec/bin/agent-auth\", \"-m\", \"10.0.1.3\", \"-p\", \"1515\", \"-A\", \"app-staging\", \"-P\", \"/var/ossec/etc/authd.pass\"], \"delta\": \"0:00:00.063895\", \"end\": \"2018-10-04 22:02:11.911442\", \"failed_when_result\": true, \"rc\": 0, \"start\": \"2018-10-04 22:02:11.847547\", \"stderr\": \"2018/10/04 22:02:11 ossec-authd: INFO: Started (pid: 9378).\\n2018/10/04 22:02:11 INFO: Connected to 10.0.1.3 at address 10.0.1.3, port 1515\", \"stderr_lines\": [\"2018/10/04 22:02:11 ossec-authd: INFO: Started (pid: 9378).\", \"2018/10/04 22:02:11 INFO: Connected to 10.0.1.3 at address 10.0.1.3, port 1515\"], \"stdout\": \"INFO: Using specified password.\\nINFO: Connected to 10.0.1.3:1515\\nINFO: Using agent name as: app-staging\\nINFO: Send request to manager. Waiting for reply.\\nERROR: Unable to create key. Either wrong password or connection not accepted by the manager.\\nINFO: Connection closed.\", \"stdout_lines\": [\"INFO: Using specified password.\", \"INFO: Connected to 10.0.1.3:1515\", \"INFO: Using agent name as: app-staging\", \"INFO: Send request to manager. Waiting for reply.\", \"ERROR: Unable to create key. Either wrong password or connection not accepted by the manager.\", \"INFO: Connection closed.\"]}\r\n```\r\n\r\n## Comments\r\n\r\nNote that the provider is correct (`virtualbox-staging`) here", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3847/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3847/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3812", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3812/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3812/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3812/events", "html_url": "https://github.com/freedomofpress/securedrop/issues/3812", "id": 358392277, "node_id": "MDU6SXNzdWUzNTgzOTIyNzc=", "number": 3812, "title": "flaky TOTP tests because of actual time comparisons", "user": {"login": "heartsucker", "id": 3998464, "node_id": "MDQ6VXNlcjM5OTg0NjQ=", "avatar_url": "https://avatars.githubusercontent.com/u/3998464?v=4", "gravatar_id": "", "url": "https://api.github.com/users/heartsucker", "html_url": "https://github.com/heartsucker", "followers_url": "https://api.github.com/users/heartsucker/followers", "following_url": "https://api.github.com/users/heartsucker/following{/other_user}", "gists_url": "https://api.github.com/users/heartsucker/gists{/gist_id}", "starred_url": "https://api.github.com/users/heartsucker/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/heartsucker/subscriptions", "organizations_url": "https://api.github.com/users/heartsucker/orgs", "repos_url": "https://api.github.com/users/heartsucker/repos", "events_url": "https://api.github.com/users/heartsucker/events{/privacy}", "received_events_url": "https://api.github.com/users/heartsucker/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}, {"id": 475997849, "node_id": "MDU6TGFiZWw0NzU5OTc4NDk=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/tests", "name": "tests", "color": "f9d0c4", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2018-09-09T16:40:39Z", "updated_at": "2018-09-27T22:26:33Z", "closed_at": "2018-09-27T22:26:33Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "## Description\r\n\r\nSome tests uses a `totp_window` context manager to ensure some action happens during the same TOTP token (e.g., login hardening that checks token non-reuse). This context manger will raise an error if the 30 second window was exceeded during the test. Because this is time sensitive, tests that run for too long may pass in reality but fail on `__exit__`.\r\n\r\nAdditionally, as we can see from the `datetime` comparison in the below errors, the test has a minor bug that allows for the window to be exceeded by < 1 second because the microseconds aren't zeroed before the comparison is made.\r\n\r\n## Steps to Reproduce\r\n\r\nIt's flaky, so reproducing is hard.\r\n\r\n## Expected Behavior\r\n\r\nTests pass when they should.\r\n\r\n## Actual Behavior\r\n\r\n```\r\n__________ test_bad_token_fails_to_verify_on_new_user_two_factor_page __________\r\n\r\njournalist_app = <Flask 'journalist_app'>\r\ntest_journo = {'id': 1, 'journalist': <Journalist arrogance that jazz implode immodest graveness luminance edition>, 'otp_secret': 'MU76OTWMJT2ZK3RE', 'password': 'entwine carving flyover pastime oaf snugness curling sleek', ...}\r\n\r\n    def test_bad_token_fails_to_verify_on_new_user_two_factor_page(\r\n            journalist_app, test_journo):\r\n        '''Regression test for\r\n           https://github.com/freedomofpress/securedrop/pull/1692\r\n        '''\r\n        original_hardening = models.LOGIN_HARDENING\r\n        try:\r\n            models.LOGIN_HARDENING = True\r\n            invalid_token = u'000000'\r\n    \r\n            with totp_window():\r\n                with journalist_app.test_client() as app:\r\n                    login_user(app, test_journo)\r\n                    # Submit the token once\r\n                    with InstrumentedApp(journalist_app) as ins:\r\n                        resp = app.post(url_for('account.new_two_factor'),\r\n                                        data=dict(token=invalid_token))\r\n    \r\n                        assert resp.status_code == 200\r\n                        ins.assert_message_flashed(\r\n                            'Could not verify token in two-factor authentication.',\r\n                            'error')\r\n    \r\n                # last_token should be set to the token we just tried to use\r\n                with journalist_app.app_context():\r\n                    journo = Journalist.query.get(test_journo['id'])\r\n                    assert journo.last_token == invalid_token\r\n    \r\n                with journalist_app.test_client() as app:\r\n                    login_user(app, test_journo)\r\n    \r\n                    # Submit the same invalid token again\r\n                    with InstrumentedApp(journalist_app) as ins:\r\n                        resp = app.post(url_for('account.new_two_factor'),\r\n                                        data=dict(token=invalid_token))\r\n                        ins.assert_message_flashed(\r\n                            'Could not verify token in two-factor authentication.',\r\n>                           'error')\r\n\r\ntests/test_2fa.py:167: \r\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \r\n/usr/lib/python2.7/contextlib.py:24: in __exit__\r\n    self.gen.next()\r\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \r\n\r\n    @contextmanager\r\n    def totp_window():\r\n        # To ensure we have enough time during a single TOTP window to do the\r\n        # whole test, optionally sleep.\r\n        now = datetime.now()\r\n        mod = now.second % 30\r\n        if mod < 3:\r\n            time.sleep(mod % 30)\r\n            now = datetime.now()\r\n    \r\n        yield\r\n    \r\n        # This check ensures that the token was used during the same window\r\n        # in the event that the app's logic only checks for token reuse if the\r\n        # token was valid.\r\n        then = datetime.now()\r\n>       assert then < now + timedelta(seconds=(30 - mod))\r\nE       assert datetime.datetime(2018, 9, 9, 16, 21, 30, 594985) < (datetime.datetime(2018, 9, 9, 16, 21, 29, 497821) + datetime.timedelta(0, 1))\r\nE        +  where datetime.timedelta(0, 1) = timedelta(seconds=(30 - 29))\r\n\r\ntests/test_2fa.py:35: AssertionError\r\n---------------------------- Captured stdout setup -----------------------------\r\nseq  name             file                                                      \r\n---  ---------------  ----------------------------------------------------------\r\n0    main             /tmp/pytest-of-www-data/pytest-0/test_bad_token_fails_to_v\r\n----------------------------- Captured stderr call -----------------------------\r\n2018-09-09 16:21:29,719 INFO 'arrogance that jazz implode immodest graveness luminance edition' logged in with the token 767460\r\n2018-09-09 16:21:30,287 INFO 'arrogance that jazz implode immodest graveness luminance edition' logged in with the token 185828\r\n------------------------------ Captured log call -------------------------------\r\nmain.py                     30 INFO     'arrogance that jazz implode immodest graveness luminance edition' logged in with the token 767460\r\nmain.py                     30 INFO     'arrogance that jazz implode immodest graveness luminance edition' logged in with the token 185828\r\n=============================== warnings summary ===============================\r\ntest_2fa.py::test_totp_reuse_protections\r\n  /usr/local/lib/python2.7/dist-packages/flask/sessions.py:208: UserWarning: \"localhost\" is not a valid cookie domain, it must contain a \".\". Add an entry to your hosts file, for example \"localhost.localdomain\", and use that instead.\r\n    ' \"{rv}.localdomain\", and use that instead.'.format(rv=rv)\r\n\r\n-- Docs: http://doc.pytest.org/en/latest/warnings.html\r\n============== 1 failed, 239 passed, 1 warnings in 412.27 seconds ==============\r\n```\r\n\r\n## Comments\r\n\r\nThe fix could be to preemptively `sleep` for a long time to give tests more time to run (downside is this means slower tests). We could consider mocking `datetime.now`, but I prefer not to mock too often as I find it brittle.\r\n", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3812/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3812/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3795", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3795/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3795/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3795/events", "html_url": "https://github.com/freedomofpress/securedrop/issues/3795", "id": 357655583, "node_id": "MDU6SXNzdWUzNTc2NTU1ODM=", "number": 3795, "title": "Updater GUI returns error when updating to 0.9.0", "user": {"login": "emkll", "id": 15223328, "node_id": "MDQ6VXNlcjE1MjIzMzI4", "avatar_url": "https://avatars.githubusercontent.com/u/15223328?v=4", "gravatar_id": "", "url": "https://api.github.com/users/emkll", "html_url": "https://github.com/emkll", "followers_url": "https://api.github.com/users/emkll/followers", "following_url": "https://api.github.com/users/emkll/following{/other_user}", "gists_url": "https://api.github.com/users/emkll/gists{/gist_id}", "starred_url": "https://api.github.com/users/emkll/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/emkll/subscriptions", "organizations_url": "https://api.github.com/users/emkll/orgs", "repos_url": "https://api.github.com/users/emkll/repos", "events_url": "https://api.github.com/users/emkll/events{/privacy}", "received_events_url": "https://api.github.com/users/emkll/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}, {"id": 157793311, "node_id": "MDU6TGFiZWwxNTc3OTMzMTE=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/priority/high", "name": "priority/high", "color": "e64ef4", "default": false, "description": ""}, {"id": 625966031, "node_id": "MDU6TGFiZWw2MjU5NjYwMzE=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/able%20to%20reproduce", "name": "able to reproduce", "color": "fbca04", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/freedomofpress/securedrop/milestones/47", "html_url": "https://github.com/freedomofpress/securedrop/milestone/47", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/milestones/47/labels", "id": 3629633, "node_id": "MDk6TWlsZXN0b25lMzYyOTYzMw==", "number": 47, "title": "0.9.1", "description": "", "creator": {"login": "redshiftzero", "id": 7832803, "node_id": "MDQ6VXNlcjc4MzI4MDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7832803?v=4", "gravatar_id": "", "url": "https://api.github.com/users/redshiftzero", "html_url": "https://github.com/redshiftzero", "followers_url": "https://api.github.com/users/redshiftzero/followers", "following_url": "https://api.github.com/users/redshiftzero/following{/other_user}", "gists_url": "https://api.github.com/users/redshiftzero/gists{/gist_id}", "starred_url": "https://api.github.com/users/redshiftzero/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/redshiftzero/subscriptions", "organizations_url": "https://api.github.com/users/redshiftzero/orgs", "repos_url": "https://api.github.com/users/redshiftzero/repos", "events_url": "https://api.github.com/users/redshiftzero/events{/privacy}", "received_events_url": "https://api.github.com/users/redshiftzero/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 1, "state": "closed", "created_at": "2018-09-06T15:43:36Z", "updated_at": "2018-09-06T22:00:57Z", "due_on": null, "closed_at": "2018-09-06T22:00:57Z"}, "comments": 0, "created_at": "2018-09-06T13:29:22Z", "updated_at": "2018-09-06T16:07:39Z", "closed_at": "2018-09-06T16:07:39Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "## Description\r\n\r\nWhen updating a Tails workstation with the SecureDrop Admin Updater, an error box appears:\r\n```\r\nError Updating SecureDrop Workstation\r\n\r\nWARNING: Signature verification failed. Contact your SecureDrop administrator or securedrop@freedom.press immediately.\r\n```\r\n\r\nNote that invoking the functionality by the command line: `./securedrop-admin update` works as expected.\r\n\r\n## Steps to Reproduce\r\nOn a Tails machine:\r\n- git checkout 0.8.0\r\n- click on update via updater gui (disable/re-enable network to get it to appear again)\r\n- observe error\r\n\r\n## Expected Behavior\r\nUpdater GUI should update without error.\r\n\r\n## Actual Behavior\r\n\r\nA signature verification error appears on screen when attempting to update.\r\n\r\n## Comments\r\n", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3795/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3795/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3793", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3793/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3793/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3793/events", "html_url": "https://github.com/freedomofpress/securedrop/issues/3793", "id": 357423600, "node_id": "MDU6SXNzdWUzNTc0MjM2MDA=", "number": 3793, "title": "Firefox (Quantum) incorrectly detected as Tor in source interface", "user": {"login": "eloquence", "id": 213636, "node_id": "MDQ6VXNlcjIxMzYzNg==", "avatar_url": "https://avatars.githubusercontent.com/u/213636?v=4", "gravatar_id": "", "url": "https://api.github.com/users/eloquence", "html_url": "https://github.com/eloquence", "followers_url": "https://api.github.com/users/eloquence/followers", "following_url": "https://api.github.com/users/eloquence/following{/other_user}", "gists_url": "https://api.github.com/users/eloquence/gists{/gist_id}", "starred_url": "https://api.github.com/users/eloquence/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/eloquence/subscriptions", "organizations_url": "https://api.github.com/users/eloquence/orgs", "repos_url": "https://api.github.com/users/eloquence/repos", "events_url": "https://api.github.com/users/eloquence/events{/privacy}", "received_events_url": "https://api.github.com/users/eloquence/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}, {"id": 678359760, "node_id": "MDU6TGFiZWw2NzgzNTk3NjA=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/js", "name": "js", "color": "006b75", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/freedomofpress/securedrop/milestones/22", "html_url": "https://github.com/freedomofpress/securedrop/milestone/22", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/milestones/22/labels", "id": 2513781, "node_id": "MDk6TWlsZXN0b25lMjUxMzc4MQ==", "number": 22, "title": "Long Term Product Backlog", "description": "Issues we think are worthwhile and should be implemented some day. Issues selected for near term development are also added to the \"near term\" backlog on the SecureDrop team's project work board, from which they can move into a sprint.", "creator": {"login": "redshiftzero", "id": 7832803, "node_id": "MDQ6VXNlcjc4MzI4MDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7832803?v=4", "gravatar_id": "", "url": "https://api.github.com/users/redshiftzero", "html_url": "https://github.com/redshiftzero", "followers_url": "https://api.github.com/users/redshiftzero/followers", "following_url": "https://api.github.com/users/redshiftzero/following{/other_user}", "gists_url": "https://api.github.com/users/redshiftzero/gists{/gist_id}", "starred_url": "https://api.github.com/users/redshiftzero/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/redshiftzero/subscriptions", "organizations_url": "https://api.github.com/users/redshiftzero/orgs", "repos_url": "https://api.github.com/users/redshiftzero/repos", "events_url": "https://api.github.com/users/redshiftzero/events{/privacy}", "received_events_url": "https://api.github.com/users/redshiftzero/received_events", "type": "User", "site_admin": false}, "open_issues": 42, "closed_issues": 32, "state": "open", "created_at": "2017-05-10T22:07:00Z", "updated_at": "2022-10-20T15:20:20Z", "due_on": null, "closed_at": null}, "comments": 4, "created_at": "2018-09-05T22:13:18Z", "updated_at": "2022-09-30T23:57:17Z", "closed_at": "2022-09-30T23:57:17Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "## Description\r\n\r\nBy means of a small JavaScript check, the source interface shows a warning when accessing it over an insecure browser, or when using Tor with JavaScript enabled. The user agent detection for this warning was [recently updated](https://github.com/freedomofpress/securedrop/pull/3789) given the UA change in Tor Browser 8.0.0.\r\n\r\nUnfortunately per a report from @harrislapiroff we are now incorrectly classifying Firefox Quantum as Tor, suppressing the warning. This is unlikely to impact production users as they would commonly not be able to load .onion URLs; however, we should still attempt to correct the detection, or, if this proves difficult, perhaps re-consider whether we want to limit the warning to cases that can be unambiguously detected (e.g., JavaScript use, mobile UA that can't possibly be TBB).", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3793/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3793/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3788", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3788/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3788/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3788/events", "html_url": "https://github.com/freedomofpress/securedrop/issues/3788", "id": 357030699, "node_id": "MDU6SXNzdWUzNTcwMzA2OTk=", "number": 3788, "title": "Incorrect security message displayed on source interface index page in Tails 3.9~rc1", "user": {"login": "zenmonkeykstop", "id": 2782952, "node_id": "MDQ6VXNlcjI3ODI5NTI=", "avatar_url": "https://avatars.githubusercontent.com/u/2782952?v=4", "gravatar_id": "", "url": "https://api.github.com/users/zenmonkeykstop", "html_url": "https://github.com/zenmonkeykstop", "followers_url": "https://api.github.com/users/zenmonkeykstop/followers", "following_url": "https://api.github.com/users/zenmonkeykstop/following{/other_user}", "gists_url": "https://api.github.com/users/zenmonkeykstop/gists{/gist_id}", "starred_url": "https://api.github.com/users/zenmonkeykstop/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/zenmonkeykstop/subscriptions", "organizations_url": "https://api.github.com/users/zenmonkeykstop/orgs", "repos_url": "https://api.github.com/users/zenmonkeykstop/repos", "events_url": "https://api.github.com/users/zenmonkeykstop/events{/privacy}", "received_events_url": "https://api.github.com/users/zenmonkeykstop/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}, {"id": 385585080, "node_id": "MDU6TGFiZWwzODU1ODUwODA=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/QA:%20Release", "name": "QA: Release", "color": "fbca04", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2018-09-05T01:20:52Z", "updated_at": "2018-09-05T19:11:29Z", "closed_at": "2018-09-05T17:36:31Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "## Description\r\n\r\nIn Tails 3.9~rc1 (with Tor Browser 8.0a9) and with the Tor Browser security slider set to \"standard,\" a ribbon message is displayed saying \"it is recommended to install the Tor Browser...\" - it should say \"it is  recommended to move the security slider...\" .\r\n\r\n## Steps to Reproduce\r\n\r\n  - Install 0.9.0~rc4 or upgrade from 0.8.0 to 0.9.0~rc4\r\n  - In Tails 3.9rc1, visit the source interface index page with the Tor Browser security slider set to \"standard\"\r\n\r\n## Expected Behavior\r\nA ribbon message is displayed recommending that the security slider be set to \"safest\"\r\n\r\n## Actual Behavior\r\nA ribbon message is displayed recommending that Tor Browser be used to visit the site instead.\r\n", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3788/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3788/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3758", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3758/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3758/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3758/events", "html_url": "https://github.com/freedomofpress/securedrop/issues/3758", "id": 355790659, "node_id": "MDU6SXNzdWUzNTU3OTA2NTk=", "number": 3758, "title": "0.9.0-rc2 does not allow text only submissions", "user": {"login": "b-meson", "id": 3100220, "node_id": "MDQ6VXNlcjMxMDAyMjA=", "avatar_url": "https://avatars.githubusercontent.com/u/3100220?v=4", "gravatar_id": "", "url": "https://api.github.com/users/b-meson", "html_url": "https://github.com/b-meson", "followers_url": "https://api.github.com/users/b-meson/followers", "following_url": "https://api.github.com/users/b-meson/following{/other_user}", "gists_url": "https://api.github.com/users/b-meson/gists{/gist_id}", "starred_url": "https://api.github.com/users/b-meson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/b-meson/subscriptions", "organizations_url": "https://api.github.com/users/b-meson/orgs", "repos_url": "https://api.github.com/users/b-meson/repos", "events_url": "https://api.github.com/users/b-meson/events{/privacy}", "received_events_url": "https://api.github.com/users/b-meson/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}, {"id": 385585080, "node_id": "MDU6TGFiZWwzODU1ODUwODA=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/QA:%20Release", "name": "QA: Release", "color": "fbca04", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 8, "created_at": "2018-08-30T23:36:06Z", "updated_at": "2018-09-04T15:38:31Z", "closed_at": "2018-09-04T15:38:31Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "## Description\r\n\r\nI believe I found a bug in upgrading from `0.8` to `0.9rc2` in that sources can only submit documents or documents and messages. If I try to send _only_ text or a blank form field I get a \"Bad Request, the browser or proxy sent a request that this server could not understand\" error.\r\n\r\n\r\n## Steps to Reproduce\r\n\r\nFirst I installed 0.8.0 on hardware and create a journalist. I then ran ./qa-loader.py -m 25. I logged in and and see submissions. I then added the apt-test key and updated sources.list to `apt.freedom.press` to `apt-test.freedom.press`. Finally I ran `sudo cron-apt -i -s` to update to `0.9rc2`\r\n\r\n## Expected Behavior\r\n\r\nA source can send text to journalists.\r\n\r\n## Actual Behavior\r\n\r\nError in the webapp.\r\n\r\n## Comments\r\n\r\nI also enabled apache debug logging and attempted to patch the source_app/ code to log anything related to CSRF violations and I was was not able to trigger a debug log. \r\n", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3758/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3758/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3749", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3749/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3749/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3749/events", "html_url": "https://github.com/freedomofpress/securedrop/issues/3749", "id": 354758363, "node_id": "MDU6SXNzdWUzNTQ3NTgzNjM=", "number": 3749, "title": "SecureDrop updater does not automatically appear in Tails 3.9~rc1", "user": {"login": "emkll", "id": 15223328, "node_id": "MDQ6VXNlcjE1MjIzMzI4", "avatar_url": "https://avatars.githubusercontent.com/u/15223328?v=4", "gravatar_id": "", "url": "https://api.github.com/users/emkll", "html_url": "https://github.com/emkll", "followers_url": "https://api.github.com/users/emkll/followers", "following_url": "https://api.github.com/users/emkll/following{/other_user}", "gists_url": "https://api.github.com/users/emkll/gists{/gist_id}", "starred_url": "https://api.github.com/users/emkll/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/emkll/subscriptions", "organizations_url": "https://api.github.com/users/emkll/orgs", "repos_url": "https://api.github.com/users/emkll/repos", "events_url": "https://api.github.com/users/emkll/events{/privacy}", "received_events_url": "https://api.github.com/users/emkll/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}, {"id": 385585080, "node_id": "MDU6TGFiZWwzODU1ODUwODA=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/QA:%20Release", "name": "QA: Release", "color": "fbca04", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/freedomofpress/securedrop/milestones/44", "html_url": "https://github.com/freedomofpress/securedrop/milestone/44", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/milestones/44/labels", "id": 3309935, "node_id": "MDk6TWlsZXN0b25lMzMwOTkzNQ==", "number": 44, "title": "0.9", "description": "2018-08-22: QA begins. Feature freeze. 2018-08-29: String freeze. Pre-release announcement. Release manager: @emkll", "creator": {"login": "redshiftzero", "id": 7832803, "node_id": "MDQ6VXNlcjc4MzI4MDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7832803?v=4", "gravatar_id": "", "url": "https://api.github.com/users/redshiftzero", "html_url": "https://github.com/redshiftzero", "followers_url": "https://api.github.com/users/redshiftzero/followers", "following_url": "https://api.github.com/users/redshiftzero/following{/other_user}", "gists_url": "https://api.github.com/users/redshiftzero/gists{/gist_id}", "starred_url": "https://api.github.com/users/redshiftzero/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/redshiftzero/subscriptions", "organizations_url": "https://api.github.com/users/redshiftzero/orgs", "repos_url": "https://api.github.com/users/redshiftzero/repos", "events_url": "https://api.github.com/users/redshiftzero/events{/privacy}", "received_events_url": "https://api.github.com/users/redshiftzero/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 25, "state": "closed", "created_at": "2018-04-30T18:31:34Z", "updated_at": "2018-09-06T18:55:35Z", "due_on": "2018-09-05T07:00:00Z", "closed_at": "2018-09-06T18:55:35Z"}, "comments": 6, "created_at": "2018-08-28T14:30:21Z", "updated_at": "2018-08-31T15:50:08Z", "closed_at": "2018-08-31T15:50:08Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "## Description\r\n\r\nAfter an upgrade to tails 3.9~rc1, the SecureDrop updater GUI does not appear on screen after a reboot when an update is required.\r\n## Steps to Reproduce\r\n\r\nUpdate Tails device or vm to 3.9~rc1\r\ngit checkout `0.7.0` any other non-release branch/tag that is not 0.8.0\r\n\r\n## Expected Behavior\r\n\r\nThe SecureDrop Updater GUI should appear on screen\r\n## Actual Behavior\r\n\r\nThe SecureDrop Updater GUI does not appear on screen\r\n\r\n## Comments\r\n\r\nI've tried both clean install and update", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3749/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3749/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3734", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3734/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3734/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3734/events", "html_url": "https://github.com/freedomofpress/securedrop/issues/3734", "id": 353896891, "node_id": "MDU6SXNzdWUzNTM4OTY4OTE=", "number": 3734, "title": "Tooltip missing on read replies icon in single source page on journalist interface", "user": {"login": "zenmonkeykstop", "id": 2782952, "node_id": "MDQ6VXNlcjI3ODI5NTI=", "avatar_url": "https://avatars.githubusercontent.com/u/2782952?v=4", "gravatar_id": "", "url": "https://api.github.com/users/zenmonkeykstop", "html_url": "https://github.com/zenmonkeykstop", "followers_url": "https://api.github.com/users/zenmonkeykstop/followers", "following_url": "https://api.github.com/users/zenmonkeykstop/following{/other_user}", "gists_url": "https://api.github.com/users/zenmonkeykstop/gists{/gist_id}", "starred_url": "https://api.github.com/users/zenmonkeykstop/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/zenmonkeykstop/subscriptions", "organizations_url": "https://api.github.com/users/zenmonkeykstop/orgs", "repos_url": "https://api.github.com/users/zenmonkeykstop/repos", "events_url": "https://api.github.com/users/zenmonkeykstop/events{/privacy}", "received_events_url": "https://api.github.com/users/zenmonkeykstop/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}, {"id": 385585080, "node_id": "MDU6TGFiZWwzODU1ODUwODA=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/QA:%20Release", "name": "QA: Release", "color": "fbca04", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/freedomofpress/securedrop/milestones/44", "html_url": "https://github.com/freedomofpress/securedrop/milestone/44", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/milestones/44/labels", "id": 3309935, "node_id": "MDk6TWlsZXN0b25lMzMwOTkzNQ==", "number": 44, "title": "0.9", "description": "2018-08-22: QA begins. Feature freeze. 2018-08-29: String freeze. Pre-release announcement. Release manager: @emkll", "creator": {"login": "redshiftzero", "id": 7832803, "node_id": "MDQ6VXNlcjc4MzI4MDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7832803?v=4", "gravatar_id": "", "url": "https://api.github.com/users/redshiftzero", "html_url": "https://github.com/redshiftzero", "followers_url": "https://api.github.com/users/redshiftzero/followers", "following_url": "https://api.github.com/users/redshiftzero/following{/other_user}", "gists_url": "https://api.github.com/users/redshiftzero/gists{/gist_id}", "starred_url": "https://api.github.com/users/redshiftzero/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/redshiftzero/subscriptions", "organizations_url": "https://api.github.com/users/redshiftzero/orgs", "repos_url": "https://api.github.com/users/redshiftzero/repos", "events_url": "https://api.github.com/users/redshiftzero/events{/privacy}", "received_events_url": "https://api.github.com/users/redshiftzero/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 25, "state": "closed", "created_at": "2018-04-30T18:31:34Z", "updated_at": "2018-09-06T18:55:35Z", "due_on": "2018-09-05T07:00:00Z", "closed_at": "2018-09-06T18:55:35Z"}, "comments": 2, "created_at": "2018-08-24T19:11:36Z", "updated_at": "2018-08-24T21:38:48Z", "closed_at": "2018-08-24T21:38:48Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "## Description\r\n\r\nRead replies are downloadable in 0.9.0 from the single source page as another document type with a checkmark icon. The other document type icons have a tooltip on mouseover that describes their type, but the checkmark icon doesn't.\r\n\r\n\r\n## Steps to Reproduce\r\nIn a 0.9.0 install:\r\n\r\n- As a source, submit a message and remember your code phrase\r\n- As a journalist, reply to the message\r\n- As a source, delete the reply\r\n- As a journalist, view the single source page and mouse over the checkmark icon for the reply document\r\n\r\n## Expected Behavior\r\nA tooltip is displayed indicating what the icon means\r\n\r\n\r\n## Actual Behavior\r\nUnlike the other icons in the document listing, nothing is displayed.\r\n", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3734/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3734/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3733", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3733/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3733/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3733/events", "html_url": "https://github.com/freedomofpress/securedrop/issues/3733", "id": 353893924, "node_id": "MDU6SXNzdWUzNTM4OTM5MjQ=", "number": 3733, "title": "0.9.0 data migration is excessively slow with large databases", "user": {"login": "zenmonkeykstop", "id": 2782952, "node_id": "MDQ6VXNlcjI3ODI5NTI=", "avatar_url": "https://avatars.githubusercontent.com/u/2782952?v=4", "gravatar_id": "", "url": "https://api.github.com/users/zenmonkeykstop", "html_url": "https://github.com/zenmonkeykstop", "followers_url": "https://api.github.com/users/zenmonkeykstop/followers", "following_url": "https://api.github.com/users/zenmonkeykstop/following{/other_user}", "gists_url": "https://api.github.com/users/zenmonkeykstop/gists{/gist_id}", "starred_url": "https://api.github.com/users/zenmonkeykstop/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/zenmonkeykstop/subscriptions", "organizations_url": "https://api.github.com/users/zenmonkeykstop/orgs", "repos_url": "https://api.github.com/users/zenmonkeykstop/repos", "events_url": "https://api.github.com/users/zenmonkeykstop/events{/privacy}", "received_events_url": "https://api.github.com/users/zenmonkeykstop/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}, {"id": 385585080, "node_id": "MDU6TGFiZWwzODU1ODUwODA=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/QA:%20Release", "name": "QA: Release", "color": "fbca04", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/freedomofpress/securedrop/milestones/44", "html_url": "https://github.com/freedomofpress/securedrop/milestone/44", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/milestones/44/labels", "id": 3309935, "node_id": "MDk6TWlsZXN0b25lMzMwOTkzNQ==", "number": 44, "title": "0.9", "description": "2018-08-22: QA begins. Feature freeze. 2018-08-29: String freeze. Pre-release announcement. Release manager: @emkll", "creator": {"login": "redshiftzero", "id": 7832803, "node_id": "MDQ6VXNlcjc4MzI4MDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7832803?v=4", "gravatar_id": "", "url": "https://api.github.com/users/redshiftzero", "html_url": "https://github.com/redshiftzero", "followers_url": "https://api.github.com/users/redshiftzero/followers", "following_url": "https://api.github.com/users/redshiftzero/following{/other_user}", "gists_url": "https://api.github.com/users/redshiftzero/gists{/gist_id}", "starred_url": "https://api.github.com/users/redshiftzero/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/redshiftzero/subscriptions", "organizations_url": "https://api.github.com/users/redshiftzero/orgs", "repos_url": "https://api.github.com/users/redshiftzero/repos", "events_url": "https://api.github.com/users/redshiftzero/events{/privacy}", "received_events_url": "https://api.github.com/users/redshiftzero/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 25, "state": "closed", "created_at": "2018-04-30T18:31:34Z", "updated_at": "2018-09-06T18:55:35Z", "due_on": "2018-09-05T07:00:00Z", "closed_at": "2018-09-06T18:55:35Z"}, "comments": 2, "created_at": "2018-08-24T19:01:08Z", "updated_at": "2018-08-28T21:54:39Z", "closed_at": "2018-08-28T21:54:39Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "## Description\r\nAfter using the `qa_loader.py` script to populate the securedrop app db, database migrations from 0.8.0 schema to 0.9.0 take an excessive amount of time (2hrs+) on a 2014 Mac Mini.\r\n\r\n## Steps to Reproduce\r\n \r\n- Install 0.8.0\r\n- ssh to app server and run\r\n\r\n```sudo su\r\n   cd /var/www/securedrop\r\n   ./qa_loader.py\r\n```\r\n- Upgrade to 0.9.0~rc1 by switching servers to use apt-test repo using playbook [here](https://gist.github.com/conorsch/e7556624df59b2a0f8b81f7c0c4f9b7d)\r\n- ssh to app server and run:\r\n```\r\nsudo cron-apt -i -s\r\n```\r\n\r\n## Expected Behavior\r\nDatabase migration completes within a short time.\r\n\r\n\r\n## Actual Behavior\r\nDatabase migration takes over 2 hours.\r\n\r\n## Comments\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3733/reactions", "total_count": 1, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3733/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3732", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3732/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3732/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3732/events", "html_url": "https://github.com/freedomofpress/securedrop/issues/3732", "id": 353832910, "node_id": "MDU6SXNzdWUzNTM4MzI5MTA=", "number": 3732, "title": "SecureDrop backups from previous versions don't work if database migration has occurred", "user": {"login": "emkll", "id": 15223328, "node_id": "MDQ6VXNlcjE1MjIzMzI4", "avatar_url": "https://avatars.githubusercontent.com/u/15223328?v=4", "gravatar_id": "", "url": "https://api.github.com/users/emkll", "html_url": "https://github.com/emkll", "followers_url": "https://api.github.com/users/emkll/followers", "following_url": "https://api.github.com/users/emkll/following{/other_user}", "gists_url": "https://api.github.com/users/emkll/gists{/gist_id}", "starred_url": "https://api.github.com/users/emkll/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/emkll/subscriptions", "organizations_url": "https://api.github.com/users/emkll/orgs", "repos_url": "https://api.github.com/users/emkll/repos", "events_url": "https://api.github.com/users/emkll/events{/privacy}", "received_events_url": "https://api.github.com/users/emkll/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}, {"id": 385585080, "node_id": "MDU6TGFiZWwzODU1ODUwODA=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/QA:%20Release", "name": "QA: Release", "color": "fbca04", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/freedomofpress/securedrop/milestones/44", "html_url": "https://github.com/freedomofpress/securedrop/milestone/44", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/milestones/44/labels", "id": 3309935, "node_id": "MDk6TWlsZXN0b25lMzMwOTkzNQ==", "number": 44, "title": "0.9", "description": "2018-08-22: QA begins. Feature freeze. 2018-08-29: String freeze. Pre-release announcement. Release manager: @emkll", "creator": {"login": "redshiftzero", "id": 7832803, "node_id": "MDQ6VXNlcjc4MzI4MDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7832803?v=4", "gravatar_id": "", "url": "https://api.github.com/users/redshiftzero", "html_url": "https://github.com/redshiftzero", "followers_url": "https://api.github.com/users/redshiftzero/followers", "following_url": "https://api.github.com/users/redshiftzero/following{/other_user}", "gists_url": "https://api.github.com/users/redshiftzero/gists{/gist_id}", "starred_url": "https://api.github.com/users/redshiftzero/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/redshiftzero/subscriptions", "organizations_url": "https://api.github.com/users/redshiftzero/orgs", "repos_url": "https://api.github.com/users/redshiftzero/repos", "events_url": "https://api.github.com/users/redshiftzero/events{/privacy}", "received_events_url": "https://api.github.com/users/redshiftzero/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 25, "state": "closed", "created_at": "2018-04-30T18:31:34Z", "updated_at": "2018-09-06T18:55:35Z", "due_on": "2018-09-05T07:00:00Z", "closed_at": "2018-09-06T18:55:35Z"}, "comments": 1, "created_at": "2018-08-24T15:37:39Z", "updated_at": "2018-08-27T23:07:43Z", "closed_at": "2018-08-27T23:07:43Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "## Description\r\n\r\nBackup restore (https://github.com/freedomofpress/securedrop/blob/develop/install_files/ansible-base/roles/restore/files/restore.py) script does not apply database migrations, and as such breaks the application upon backup restore. Manual workaround that appears to have no side-effects is to run `sudo dpkg-reconfigure securedrop-app-code` on the app server.\r\n\r\n## Steps to Reproduce\r\n\r\n1. Install SecureDrop 0.8.0\r\n2. `securedrop-admin backup`\r\n3. Upgrade to 0.9.0 (or higher)\r\n4. `securedrop-admin restore`\r\n5. Observe source and journalist interface return error 500\r\n\r\n## Expected Behavior\r\n\r\nThe application should be operational.\r\n\r\n## Actual Behavior\r\n\r\nThe source and journalist interfaces return error 500s.\r\n\r\n## Comments\r\n\r\nRunning `sudo dpkg-reconfigure securedrop-app-code` calls the postinst script which will apply migration. Based on my testing, this seems to work reliably.", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3732/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3732/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3680", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3680/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3680/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3680/events", "html_url": "https://github.com/freedomofpress/securedrop/issues/3680", "id": 346713979, "node_id": "MDU6SXNzdWUzNDY3MTM5Nzk=", "number": 3680, "title": "Error 500 when accessing journalist interface in dev container", "user": {"login": "emkll", "id": 15223328, "node_id": "MDQ6VXNlcjE1MjIzMzI4", "avatar_url": "https://avatars.githubusercontent.com/u/15223328?v=4", "gravatar_id": "", "url": "https://api.github.com/users/emkll", "html_url": "https://github.com/emkll", "followers_url": "https://api.github.com/users/emkll/followers", "following_url": "https://api.github.com/users/emkll/following{/other_user}", "gists_url": "https://api.github.com/users/emkll/gists{/gist_id}", "starred_url": "https://api.github.com/users/emkll/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/emkll/subscriptions", "organizations_url": "https://api.github.com/users/emkll/orgs", "repos_url": "https://api.github.com/users/emkll/repos", "events_url": "https://api.github.com/users/emkll/events{/privacy}", "received_events_url": "https://api.github.com/users/emkll/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "emkll", "id": 15223328, "node_id": "MDQ6VXNlcjE1MjIzMzI4", "avatar_url": "https://avatars.githubusercontent.com/u/15223328?v=4", "gravatar_id": "", "url": "https://api.github.com/users/emkll", "html_url": "https://github.com/emkll", "followers_url": "https://api.github.com/users/emkll/followers", "following_url": "https://api.github.com/users/emkll/following{/other_user}", "gists_url": "https://api.github.com/users/emkll/gists{/gist_id}", "starred_url": "https://api.github.com/users/emkll/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/emkll/subscriptions", "organizations_url": "https://api.github.com/users/emkll/orgs", "repos_url": "https://api.github.com/users/emkll/repos", "events_url": "https://api.github.com/users/emkll/events{/privacy}", "received_events_url": "https://api.github.com/users/emkll/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "emkll", "id": 15223328, "node_id": "MDQ6VXNlcjE1MjIzMzI4", "avatar_url": "https://avatars.githubusercontent.com/u/15223328?v=4", "gravatar_id": "", "url": "https://api.github.com/users/emkll", "html_url": "https://github.com/emkll", "followers_url": "https://api.github.com/users/emkll/followers", "following_url": "https://api.github.com/users/emkll/following{/other_user}", "gists_url": "https://api.github.com/users/emkll/gists{/gist_id}", "starred_url": "https://api.github.com/users/emkll/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/emkll/subscriptions", "organizations_url": "https://api.github.com/users/emkll/orgs", "repos_url": "https://api.github.com/users/emkll/repos", "events_url": "https://api.github.com/users/emkll/events{/privacy}", "received_events_url": "https://api.github.com/users/emkll/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2018-08-01T18:23:00Z", "updated_at": "2018-08-01T22:32:33Z", "closed_at": "2018-08-01T22:32:33Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "## Description\r\n\r\n## Steps to Reproduce\r\n\r\n1. checkout develop\r\n2. make dev\r\n3. log into the journalist interface\r\n4. observe error 500\r\n\r\n## Expected Behavior\r\n\r\nUpon successful login, the list of sources in the Journalist interface should be displayed.\r\n\r\n## Actual Behavior\r\n\r\nAn error 500 occurs: \r\n```\r\n  File \"/home/user/src/securedrop/securedrop/journalist_templates/_source_row.html\", line 4, in top-level template code\r\n    <time class=\"date\" title=\"{{ source.last_updated|rel_datetime_format }}\" datetime=\"{{ source.last_updated|rel_datetime_format(fmt=\"%Y-%m-%d %H:%M:%S%Z\") }}\">{{ source.last_updated|rel_datetime_format(relative=True) }}</time>\r\nTypeError: unsupported operand type(s) for -: 'datetime.datetime' and 'NoneType'\r\n```\r\n## Comments\r\nsource.last_updated must be manually set in `create-dev-data.py` to avoid this exception, due to changes in the model where the `last_updated` is not populated upon source creation.\r\n", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3680/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3680/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3678", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3678/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3678/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3678/events", "html_url": "https://github.com/freedomofpress/securedrop/issues/3678", "id": 346394303, "node_id": "MDU6SXNzdWUzNDYzOTQzMDM=", "number": 3678, "title": "[functional testing] Remove TBB install logic from app-test role", "user": {"login": "redshiftzero", "id": 7832803, "node_id": "MDQ6VXNlcjc4MzI4MDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7832803?v=4", "gravatar_id": "", "url": "https://api.github.com/users/redshiftzero", "html_url": "https://github.com/redshiftzero", "followers_url": "https://api.github.com/users/redshiftzero/followers", "following_url": "https://api.github.com/users/redshiftzero/following{/other_user}", "gists_url": "https://api.github.com/users/redshiftzero/gists{/gist_id}", "starred_url": "https://api.github.com/users/redshiftzero/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/redshiftzero/subscriptions", "organizations_url": "https://api.github.com/users/redshiftzero/orgs", "repos_url": "https://api.github.com/users/redshiftzero/repos", "events_url": "https://api.github.com/users/redshiftzero/events{/privacy}", "received_events_url": "https://api.github.com/users/redshiftzero/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}, {"id": 475996783, "node_id": "MDU6TGFiZWw0NzU5OTY3ODM=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/functional_tests", "name": "functional_tests", "color": "f9d0c4", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2018-07-31T23:27:20Z", "updated_at": "2018-08-09T18:56:12Z", "closed_at": "2018-08-09T18:56:12Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "## Description\r\n\r\nA task in the app-test role is referencing an undefined variable `tbb_dir`\r\n\r\n## Steps to Reproduce\r\n\r\n1. check out `tbb-0.9.0` or a branch based on it\r\n2. `make build-debs`\r\n3. `vagrant up /staging/`\r\n\r\n## Expected Behavior\r\n\r\nstaging VMs are provisioned without issue\r\n\r\n## Actual Behavior\r\n\r\n```\r\nTASK [app-test : disable mprotect on firefox and the firefox plugin container] ***\r\nfatal: [app-staging]: FAILED! => {\"msg\": \"The task includes an option with an undefined variable. The error was: 'tbb_dir' is undefined\\n\\nThe error appears to have been in '/Users/redshiftzero/Documents/Github/securedrop/install_files/ansible-base/roles/app-test/tasks/disable_mprotect_ff_plugin_container.yml': line 2, column 3, but may\\nbe elsewhere in the file depending on the exact syntax problem.\\n\\nThe offending line appears to be:\\n\\n---\\n- name: disable mprotect on firefox and the firefox plugin container\\n  ^ here\\n\\nexception type: <class 'ansible.errors.AnsibleUndefinedVariable'>\\nexception: 'tbb_dir' is undefined\"}\r\n```\r\n\r\n## Comments\r\n\r\nNote that bugs like this aren't getting caught due to the fact that the CI jobs that the staging CI job is reliant on are failing\r\n\r\nEpic: #3659", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3678/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3678/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3666", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3666/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3666/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3666/events", "html_url": "https://github.com/freedomofpress/securedrop/issues/3666", "id": 345333504, "node_id": "MDU6SXNzdWUzNDUzMzM1MDQ=", "number": 3666, "title": "journalist API: incorrect `is_starred` reported when starring and unstarring a source", "user": {"login": "redshiftzero", "id": 7832803, "node_id": "MDQ6VXNlcjc4MzI4MDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7832803?v=4", "gravatar_id": "", "url": "https://api.github.com/users/redshiftzero", "html_url": "https://github.com/redshiftzero", "followers_url": "https://api.github.com/users/redshiftzero/followers", "following_url": "https://api.github.com/users/redshiftzero/following{/other_user}", "gists_url": "https://api.github.com/users/redshiftzero/gists{/gist_id}", "starred_url": "https://api.github.com/users/redshiftzero/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/redshiftzero/subscriptions", "organizations_url": "https://api.github.com/users/redshiftzero/orgs", "repos_url": "https://api.github.com/users/redshiftzero/repos", "events_url": "https://api.github.com/users/redshiftzero/events{/privacy}", "received_events_url": "https://api.github.com/users/redshiftzero/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "redshiftzero", "id": 7832803, "node_id": "MDQ6VXNlcjc4MzI4MDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7832803?v=4", "gravatar_id": "", "url": "https://api.github.com/users/redshiftzero", "html_url": "https://github.com/redshiftzero", "followers_url": "https://api.github.com/users/redshiftzero/followers", "following_url": "https://api.github.com/users/redshiftzero/following{/other_user}", "gists_url": "https://api.github.com/users/redshiftzero/gists{/gist_id}", "starred_url": "https://api.github.com/users/redshiftzero/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/redshiftzero/subscriptions", "organizations_url": "https://api.github.com/users/redshiftzero/orgs", "repos_url": "https://api.github.com/users/redshiftzero/repos", "events_url": "https://api.github.com/users/redshiftzero/events{/privacy}", "received_events_url": "https://api.github.com/users/redshiftzero/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "redshiftzero", "id": 7832803, "node_id": "MDQ6VXNlcjc4MzI4MDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7832803?v=4", "gravatar_id": "", "url": "https://api.github.com/users/redshiftzero", "html_url": "https://github.com/redshiftzero", "followers_url": "https://api.github.com/users/redshiftzero/followers", "following_url": "https://api.github.com/users/redshiftzero/following{/other_user}", "gists_url": "https://api.github.com/users/redshiftzero/gists{/gist_id}", "starred_url": "https://api.github.com/users/redshiftzero/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/redshiftzero/subscriptions", "organizations_url": "https://api.github.com/users/redshiftzero/orgs", "repos_url": "https://api.github.com/users/redshiftzero/repos", "events_url": "https://api.github.com/users/redshiftzero/events{/privacy}", "received_events_url": "https://api.github.com/users/redshiftzero/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2018-07-27T19:01:23Z", "updated_at": "2018-07-31T12:19:21Z", "closed_at": "2018-07-31T12:19:21Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "## Description\r\n\r\nBug found by @kushaldas over in #3619:\r\n\r\n> In my test, I removed a start from a source, I got back this reply: {'message': 'Star removed'}. After this when I am trying to get all the sources or that particular source again, I can still see 'is_starred': True for that source.\r\n\r\n## Steps to Reproduce\r\n\r\nNote: you'll need to put in the UUID of a source in your dev env in place of the one shown here\r\n\r\n1. Get a source via the API: GET `127.0.0.1:8081/api/v1/sources/917c3b91-29f9-46a0-8e3b-0ba6af5fc9f5`\r\n2. Star the source: POST `127.0.0.1:8081/api/v1/sources/917c3b91-29f9-46a0-8e3b-0ba6af5fc9f5/add_star`\r\n3. Unstar the source: DELETE `127.0.0.1:8081/api/v1/sources/917c3b91-29f9-46a0-8e3b-0ba6af5fc9f5/remove_star`\r\n4. Get the source once more: GET `127.0.0.1:8081/api/v1/sources/917c3b91-29f9-46a0-8e3b-0ba6af5fc9f5`\r\n\r\n## Expected Behavior\r\n\r\n`is_starred: False`\r\n\r\n## Actual Behavior\r\n\r\n`is_starred: True`\r\n\r\n## Comments\r\n\r\nsimple fix, needs at minimum an additional assert in tests to cover this case", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3666/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3666/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3653", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3653/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3653/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3653/events", "html_url": "https://github.com/freedomofpress/securedrop/issues/3653", "id": 344177260, "node_id": "MDU6SXNzdWUzNDQxNzcyNjA=", "number": 3653, "title": "CI / test failures on develop branch", "user": {"login": "emkll", "id": 15223328, "node_id": "MDQ6VXNlcjE1MjIzMzI4", "avatar_url": "https://avatars.githubusercontent.com/u/15223328?v=4", "gravatar_id": "", "url": "https://api.github.com/users/emkll", "html_url": "https://github.com/emkll", "followers_url": "https://api.github.com/users/emkll/followers", "following_url": "https://api.github.com/users/emkll/following{/other_user}", "gists_url": "https://api.github.com/users/emkll/gists{/gist_id}", "starred_url": "https://api.github.com/users/emkll/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/emkll/subscriptions", "organizations_url": "https://api.github.com/users/emkll/orgs", "repos_url": "https://api.github.com/users/emkll/repos", "events_url": "https://api.github.com/users/emkll/events{/privacy}", "received_events_url": "https://api.github.com/users/emkll/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2018-07-24T19:44:29Z", "updated_at": "2018-07-25T18:31:12Z", "closed_at": "2018-07-25T18:31:12Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "## Description\r\n\r\nAfter merging #3619 to develop, CI is failing on the following test:\r\n```\r\n=================================== FAILURES ===================================\r\n___________________ test_authorized_user_gets_single_source ____________________\r\n\r\njournalist_app = <Flask 'journalist_app'>\r\ntest_source = {'codename': '<snip>', 'filesystem_id': 'I5DGWCSOFACCI6H5NDJ3QNZ7XYY...ITGCCFDWNJCWAZLA2QOGA=', 'source': <Source u'diachronic incineration'>, 'uuid': '1ee09d73-1164-424a-8f35-21fb37daf5bd'}\r\njournalist_api_token = '<snip>'\r\n\r\n    def test_authorized_user_gets_single_source(journalist_app, test_source,\r\n                                                journalist_api_token):\r\n        with journalist_app.test_client() as app:\r\n            uuid = test_source['source'].uuid\r\n            response = app.get(url_for('api.single_source', source_uuid=uuid),\r\n>                              headers=get_api_headers(journalist_api_token))\r\n\r\ntests/test_journalist_api.py:263: \r\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \r\n/usr/local/lib/python2.7/dist-packages/werkzeug/test.py:791: in get\r\n    return self.open(*args, **kw)\r\n/usr/local/lib/python2.7/dist-packages/flask/testing.py:127: in open\r\n    follow_redirects=follow_redirects)\r\n/usr/local/lib/python2.7/dist-packages/werkzeug/test.py:764: in open\r\n    response = self.run_wsgi_app(environ, buffered=buffered)\r\n/usr/local/lib/python2.7/dist-packages/werkzeug/test.py:677: in run_wsgi_app\r\n    rv = run_wsgi_app(self.application, environ, buffered=buffered)\r\n/usr/local/lib/python2.7/dist-packages/werkzeug/test.py:884: in run_wsgi_app\r\n    app_rv = app(environ, start_response)\r\n/usr/local/lib/python2.7/dist-packages/flask/app.py:1997: in __call__\r\n    return self.wsgi_app(environ, start_response)\r\n/usr/local/lib/python2.7/dist-packages/flask/app.py:1985: in wsgi_app\r\n    response = self.handle_exception(e)\r\n/usr/local/lib/python2.7/dist-packages/flask/app.py:1540: in handle_exception\r\n    reraise(exc_type, exc_value, tb)\r\n/usr/local/lib/python2.7/dist-packages/flask/app.py:1982: in wsgi_app\r\n    response = self.full_dispatch_request()\r\n/usr/local/lib/python2.7/dist-packages/flask/app.py:1614: in full_dispatch_request\r\n    rv = self.handle_user_exception(e)\r\n/usr/local/lib/python2.7/dist-packages/flask/app.py:1517: in handle_user_exception\r\n    reraise(exc_type, exc_value, tb)\r\n/usr/local/lib/python2.7/dist-packages/flask/app.py:1612: in full_dispatch_request\r\n    rv = self.dispatch_request()\r\n/usr/local/lib/python2.7/dist-packages/flask/app.py:1598: in dispatch_request\r\n    return self.view_functions[rule.endpoint](**req.view_args)\r\njournalist_app/api.py:43: in decorated_function\r\n    return f(*args, **kwargs)\r\njournalist_app/api.py:113: in single_source\r\n    return jsonify(source.to_json()), 200\r\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \r\n\r\nself = <Source u'diachronic incineration'>\r\n\r\n    def to_json(self):\r\n        docs_msg_count = self.documents_messages_count()\r\n    \r\n        json_source = {\r\n            'uuid': self.uuid,\r\n            'url': url_for('api.single_source', source_uuid=self.uuid),\r\n            'journalist_designation': self.journalist_designation,\r\n            'is_flagged': self.flagged,\r\n            'is_starred': True if self.star else False,\r\n>           'last_updated': self.last_updated.isoformat() + 'Z',\r\n            'interaction_count': self.interaction_count,\r\n            'key': {\r\n              'type': 'PGP',\r\n              'public': self.public_key\r\n            },\r\n            'number_of_documents': docs_msg_count['documents'],\r\n            'number_of_messages': docs_msg_count['messages'],\r\n            'submissions_url': url_for('api.all_source_submissions',\r\n                                       source_uuid=self.uuid),\r\n            'add_star_url': url_for('api.add_star', source_uuid=self.uuid),\r\n            'remove_star_url': url_for('api.remove_star',\r\n                                       source_uuid=self.uuid),\r\n            'reply_url': url_for('api.post_reply', source_uuid=self.uuid)\r\n            }\r\nE       AttributeError: 'NoneType' object has no attribute 'isoformat'\r\n\r\nmodels.py:127: AttributeError\r\n---------------------------- Captured stdout setup -----------------------------\r\nseq  name             file                                                      \r\n---  ---------------  ----------------------------------------------------------\r\n0    main             /tmp/pytest-of-www-data/pytest-0/test_authorized_user_gets\r\n============== 1 failed, 261 passed, 2 xfailed in 1058.03 seconds ==============\r\n``` \r\n\r\nRe-running the build triggers the same failure.\r\n\r\n## Steps to Reproduce\r\n`make test`\r\n## Expected Behavior\r\n\r\nAll tests\r\n## Actual Behavior\r\n\r\n`test_authorized_user_gets_single_source` fails\r\n\r\n## Comments\r\n\r\nI can reproduce the test failure in a local dev environment on the `develop` branch. \r\nThe test does *not* fail locally on `journalist-api-0.9.0` branch.", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3653/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3653/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3651", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3651/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3651/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3651/events", "html_url": "https://github.com/freedomofpress/securedrop/issues/3651", "id": 344134931, "node_id": "MDU6SXNzdWUzNDQxMzQ5MzE=", "number": 3651, "title": "Journalist API returns error 500 when JSON in malformed or absent", "user": {"login": "emkll", "id": 15223328, "node_id": "MDQ6VXNlcjE1MjIzMzI4", "avatar_url": "https://avatars.githubusercontent.com/u/15223328?v=4", "gravatar_id": "", "url": "https://api.github.com/users/emkll", "html_url": "https://github.com/emkll", "followers_url": "https://api.github.com/users/emkll/followers", "following_url": "https://api.github.com/users/emkll/following{/other_user}", "gists_url": "https://api.github.com/users/emkll/gists{/gist_id}", "starred_url": "https://api.github.com/users/emkll/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/emkll/subscriptions", "organizations_url": "https://api.github.com/users/emkll/orgs", "repos_url": "https://api.github.com/users/emkll/repos", "events_url": "https://api.github.com/users/emkll/events{/privacy}", "received_events_url": "https://api.github.com/users/emkll/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "emkll", "id": 15223328, "node_id": "MDQ6VXNlcjE1MjIzMzI4", "avatar_url": "https://avatars.githubusercontent.com/u/15223328?v=4", "gravatar_id": "", "url": "https://api.github.com/users/emkll", "html_url": "https://github.com/emkll", "followers_url": "https://api.github.com/users/emkll/followers", "following_url": "https://api.github.com/users/emkll/following{/other_user}", "gists_url": "https://api.github.com/users/emkll/gists{/gist_id}", "starred_url": "https://api.github.com/users/emkll/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/emkll/subscriptions", "organizations_url": "https://api.github.com/users/emkll/orgs", "repos_url": "https://api.github.com/users/emkll/repos", "events_url": "https://api.github.com/users/emkll/events{/privacy}", "received_events_url": "https://api.github.com/users/emkll/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "emkll", "id": 15223328, "node_id": "MDQ6VXNlcjE1MjIzMzI4", "avatar_url": "https://avatars.githubusercontent.com/u/15223328?v=4", "gravatar_id": "", "url": "https://api.github.com/users/emkll", "html_url": "https://github.com/emkll", "followers_url": "https://api.github.com/users/emkll/followers", "following_url": "https://api.github.com/users/emkll/following{/other_user}", "gists_url": "https://api.github.com/users/emkll/gists{/gist_id}", "starred_url": "https://api.github.com/users/emkll/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/emkll/subscriptions", "organizations_url": "https://api.github.com/users/emkll/orgs", "repos_url": "https://api.github.com/users/emkll/repos", "events_url": "https://api.github.com/users/emkll/events{/privacy}", "received_events_url": "https://api.github.com/users/emkll/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2018-07-24T17:36:09Z", "updated_at": "2018-07-27T15:11:25Z", "closed_at": "2018-07-27T15:11:25Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "## Description\r\n\r\n## Steps to Reproduce\r\n\r\n1. `make dev`\r\n2. `curl -X POST 127.0.0.1:8081/api/v1/token`\r\n\r\n## Expected Behavior\r\n\r\nThe server should return an error 400 stating that the request is invalid.\r\n\r\n## Actual Behavior\r\n\r\nThe server returns an error 500 stating that there is a server error.\r\n", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3651/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3651/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3648", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3648/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3648/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3648/events", "html_url": "https://github.com/freedomofpress/securedrop/pull/3648", "id": 343181468, "node_id": "MDExOlB1bGxSZXF1ZXN0MjAyOTA2MDgy", "number": 3648, "title": "source: do not set last_updated default to now", "user": {"login": "ghost", "id": 10137, "node_id": "MDQ6VXNlcjEwMTM3", "avatar_url": "https://avatars.githubusercontent.com/u/10137?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ghost", "html_url": "https://github.com/ghost", "followers_url": "https://api.github.com/users/ghost/followers", "following_url": "https://api.github.com/users/ghost/following{/other_user}", "gists_url": "https://api.github.com/users/ghost/gists{/gist_id}", "starred_url": "https://api.github.com/users/ghost/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ghost/subscriptions", "organizations_url": "https://api.github.com/users/ghost/orgs", "repos_url": "https://api.github.com/users/ghost/repos", "events_url": "https://api.github.com/users/ghost/events{/privacy}", "received_events_url": "https://api.github.com/users/ghost/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}, {"id": 652909251, "node_id": "MDU6TGFiZWw2NTI5MDkyNTE=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/goals:%20journalist%20experience", "name": "goals: journalist experience", "color": "0e8a16", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2018-07-20T17:04:58Z", "updated_at": "2018-07-21T13:02:56Z", "closed_at": "2018-07-21T13:02:56Z", "author_association": "NONE", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/freedomofpress/securedrop/pulls/3648", "html_url": "https://github.com/freedomofpress/securedrop/pull/3648", "diff_url": "https://github.com/freedomofpress/securedrop/pull/3648.diff", "patch_url": "https://github.com/freedomofpress/securedrop/pull/3648.patch", "merged_at": "2018-07-21T13:02:56Z"}, "body": "## Status\r\n\r\nReady for review / Work in progress\r\n\r\n## Description of Changes\r\n\r\nFixes #3635\r\n\r\nThe last_updated field is used to reflect:\r\n\r\n* When a new submission is sent\r\n* When the key of a flagged source is created (when the source is not flagged, the key is created at the same time the document is submitted)\r\n\r\nIt should not be set when the source record is created otherwise it\r\nwill be reported a an activity worthy of the journalist attention. But\r\nwhen a new source is created (and before any submission is sent), the\r\nsource does not even show (it is pending) and the journalist cannot\r\nnotice any difference.\r\n\r\n\r\n## Testing\r\n\r\nShould be covered by the existing tests.\r\n\r\n## Deployment\r\n\r\nIt will only change the `last_updated` field of new sources, not existing ones.\r\n\r\n## Checklist\r\n\r\n### If you made changes to the server application code:\r\n\r\n- [x] Linting (`make ci-lint`) and tests (`make -C securedrop test`) pass in the development container\r\n", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3648/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3648/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3642", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3642/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3642/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3642/events", "html_url": "https://github.com/freedomofpress/securedrop/issues/3642", "id": 341195497, "node_id": "MDU6SXNzdWUzNDExOTU0OTc=", "number": 3642, "title": "SecureDrop Updater Tails Admin Password Prompt Appears to Fail When Clicking OK", "user": {"login": "huertanix", "id": 72914, "node_id": "MDQ6VXNlcjcyOTE0", "avatar_url": "https://avatars.githubusercontent.com/u/72914?v=4", "gravatar_id": "", "url": "https://api.github.com/users/huertanix", "html_url": "https://github.com/huertanix", "followers_url": "https://api.github.com/users/huertanix/followers", "following_url": "https://api.github.com/users/huertanix/following{/other_user}", "gists_url": "https://api.github.com/users/huertanix/gists{/gist_id}", "starred_url": "https://api.github.com/users/huertanix/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/huertanix/subscriptions", "organizations_url": "https://api.github.com/users/huertanix/orgs", "repos_url": "https://api.github.com/users/huertanix/repos", "events_url": "https://api.github.com/users/huertanix/events{/privacy}", "received_events_url": "https://api.github.com/users/huertanix/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}, {"id": 157793311, "node_id": "MDU6TGFiZWwxNTc3OTMzMTE=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/priority/high", "name": "priority/high", "color": "e64ef4", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": {"login": "rmol", "id": 47430598, "node_id": "MDQ6VXNlcjQ3NDMwNTk4", "avatar_url": "https://avatars.githubusercontent.com/u/47430598?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rmol", "html_url": "https://github.com/rmol", "followers_url": "https://api.github.com/users/rmol/followers", "following_url": "https://api.github.com/users/rmol/following{/other_user}", "gists_url": "https://api.github.com/users/rmol/gists{/gist_id}", "starred_url": "https://api.github.com/users/rmol/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rmol/subscriptions", "organizations_url": "https://api.github.com/users/rmol/orgs", "repos_url": "https://api.github.com/users/rmol/repos", "events_url": "https://api.github.com/users/rmol/events{/privacy}", "received_events_url": "https://api.github.com/users/rmol/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "rmol", "id": 47430598, "node_id": "MDQ6VXNlcjQ3NDMwNTk4", "avatar_url": "https://avatars.githubusercontent.com/u/47430598?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rmol", "html_url": "https://github.com/rmol", "followers_url": "https://api.github.com/users/rmol/followers", "following_url": "https://api.github.com/users/rmol/following{/other_user}", "gists_url": "https://api.github.com/users/rmol/gists{/gist_id}", "starred_url": "https://api.github.com/users/rmol/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rmol/subscriptions", "organizations_url": "https://api.github.com/users/rmol/orgs", "repos_url": "https://api.github.com/users/rmol/repos", "events_url": "https://api.github.com/users/rmol/events{/privacy}", "received_events_url": "https://api.github.com/users/rmol/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 13, "created_at": "2018-07-14T00:55:42Z", "updated_at": "2020-03-31T21:25:16Z", "closed_at": "2020-03-31T21:25:16Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "## Description\r\n\r\nWhen using the SecureDrop updater GUI tool to update SecureDrop, correctly entering the Tails admin password and clicking OK with a trackpad fails and invokes a \"Administrator password is incorrect\" error, while hitting the Enter key instead of clicking OK works.\r\n\r\n## Steps to Reproduce\r\n\r\nAfter a successful upgrade to SecureDrop 0.7.0, the SecureDrop Updater appeared to inform me I can upgrade to 0.8.0. Once I began that upgrade, I was prompted for the Tails admin password, which I entered and used the journalist workstation's built-in trackpad to click the OK button on the prompt, after which it failed and I had to click Update Now again to restart the upgrade process, only to have it fail the same way a few times. On the final try, I used the Enter key instead of clicking OK and it accepted the admin password and completed the upgrade.\r\n\r\n## Expected Behavior\r\n\r\nClicking OK after entering a correct Tails admin password should accept the password and continue the upgrade.\r\n\r\n## Actual Behavior\r\n\r\nClicking OK after entering a correct Tails admin password fails and tells me the password is wrong.\r\n\r\n## Comments\r\n\r\nThis was on a Tails laptop that had only just been upgraded from 0.6.0 to 0.7.0 via the command line. Once the 0.7.0 upgrade was complete, the more modern SecureDrop updater prompted me to go to the shiny chrome future that is 0.8.0 and I very much wanted to.\r\n", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3642/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3642/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3637", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3637/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3637/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3637/events", "html_url": "https://github.com/freedomofpress/securedrop/pull/3637", "id": 341048812, "node_id": "MDExOlB1bGxSZXF1ZXN0MjAxMzE0MzQ0", "number": 3637, "title": "source: do not set last_updated on key generation", "user": {"login": "ghost", "id": 10137, "node_id": "MDQ6VXNlcjEwMTM3", "avatar_url": "https://avatars.githubusercontent.com/u/10137?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ghost", "html_url": "https://github.com/ghost", "followers_url": "https://api.github.com/users/ghost/followers", "following_url": "https://api.github.com/users/ghost/following{/other_user}", "gists_url": "https://api.github.com/users/ghost/gists{/gist_id}", "starred_url": "https://api.github.com/users/ghost/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ghost/subscriptions", "organizations_url": "https://api.github.com/users/ghost/orgs", "repos_url": "https://api.github.com/users/ghost/repos", "events_url": "https://api.github.com/users/ghost/events{/privacy}", "received_events_url": "https://api.github.com/users/ghost/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}, {"id": 652909251, "node_id": "MDU6TGFiZWw2NTI5MDkyNTE=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/goals:%20journalist%20experience", "name": "goals: journalist experience", "color": "0e8a16", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2018-07-13T14:51:13Z", "updated_at": "2018-07-13T15:51:52Z", "closed_at": "2018-07-13T15:51:52Z", "author_association": "NONE", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/freedomofpress/securedrop/pulls/3637", "html_url": "https://github.com/freedomofpress/securedrop/pull/3637", "diff_url": "https://github.com/freedomofpress/securedrop/pull/3637.diff", "patch_url": "https://github.com/freedomofpress/securedrop/pull/3637.patch", "merged_at": null}, "body": "## Status\r\n\r\nReady for review\r\n\r\n## Description of Changes\r\n\r\nFixes #3635 \r\n\r\nThe last_updated field is updated every time a submission is\r\nsent. Also updating it when the source key is generated has a\r\ndifferent meaning and creates a problem.\r\n\r\nA: there is enough entropy and the key is created when a message or\r\n   document is submitted. The last_updated field is set twice, with\r\n   the same value, give or take a few seconds.\r\n\r\nB: there is not enough entropy and the key is created long after the\r\n   initial document or message was submitted, when the source\r\n   reconnects using the same passphrase. The last_updated is set and\r\n   that confuses the manage.py::were_there_submissions_today which\r\n   assumes the field is only set when a submission is received.\r\n\r\nSince no code logic relies on the last_updated field being set when\r\nthe key is generated, the async_genkey is modified to no longer set\r\nthe last_updated field.\r\n\r\n## Testing\r\n\r\nTBD\r\n\r\n## Deployment\r\n\r\nExisting deployments will no longer set the `last_updated` field when a key is created. This has no consequence as this field is not exposed to admins and users.\r\n\r\n## Checklist\r\n\r\n### If you made changes to the server application code:\r\n\r\n- [x] Linting (`make ci-lint`) and tests (`make -C securedrop test`) pass in the development container\r\n", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3637/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3637/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3636", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3636/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3636/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3636/events", "html_url": "https://github.com/freedomofpress/securedrop/issues/3636", "id": 341041590, "node_id": "MDU6SXNzdWUzNDEwNDE1OTA=", "number": 3636, "title": "Installing `gettext` from Xenial repos is dangerous and can break the sytem", "user": {"login": "heartsucker", "id": 3998464, "node_id": "MDQ6VXNlcjM5OTg0NjQ=", "avatar_url": "https://avatars.githubusercontent.com/u/3998464?v=4", "gravatar_id": "", "url": "https://api.github.com/users/heartsucker", "html_url": "https://github.com/heartsucker", "followers_url": "https://api.github.com/users/heartsucker/followers", "following_url": "https://api.github.com/users/heartsucker/following{/other_user}", "gists_url": "https://api.github.com/users/heartsucker/gists{/gist_id}", "starred_url": "https://api.github.com/users/heartsucker/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/heartsucker/subscriptions", "organizations_url": "https://api.github.com/users/heartsucker/orgs", "repos_url": "https://api.github.com/users/heartsucker/repos", "events_url": "https://api.github.com/users/heartsucker/events{/privacy}", "received_events_url": "https://api.github.com/users/heartsucker/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}, {"id": 192539287, "node_id": "MDU6TGFiZWwxOTI1MzkyODc=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/ops/deployment", "name": "ops/deployment", "color": "c7def8", "default": false, "description": null}, {"id": 616447641, "node_id": "MDU6TGFiZWw2MTY0NDc2NDE=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/development%20env", "name": "development env", "color": "bfd4f2", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "redshiftzero", "id": 7832803, "node_id": "MDQ6VXNlcjc4MzI4MDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7832803?v=4", "gravatar_id": "", "url": "https://api.github.com/users/redshiftzero", "html_url": "https://github.com/redshiftzero", "followers_url": "https://api.github.com/users/redshiftzero/followers", "following_url": "https://api.github.com/users/redshiftzero/following{/other_user}", "gists_url": "https://api.github.com/users/redshiftzero/gists{/gist_id}", "starred_url": "https://api.github.com/users/redshiftzero/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/redshiftzero/subscriptions", "organizations_url": "https://api.github.com/users/redshiftzero/orgs", "repos_url": "https://api.github.com/users/redshiftzero/repos", "events_url": "https://api.github.com/users/redshiftzero/events{/privacy}", "received_events_url": "https://api.github.com/users/redshiftzero/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "redshiftzero", "id": 7832803, "node_id": "MDQ6VXNlcjc4MzI4MDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7832803?v=4", "gravatar_id": "", "url": "https://api.github.com/users/redshiftzero", "html_url": "https://github.com/redshiftzero", "followers_url": "https://api.github.com/users/redshiftzero/followers", "following_url": "https://api.github.com/users/redshiftzero/following{/other_user}", "gists_url": "https://api.github.com/users/redshiftzero/gists{/gist_id}", "starred_url": "https://api.github.com/users/redshiftzero/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/redshiftzero/subscriptions", "organizations_url": "https://api.github.com/users/redshiftzero/orgs", "repos_url": "https://api.github.com/users/redshiftzero/repos", "events_url": "https://api.github.com/users/redshiftzero/events{/privacy}", "received_events_url": "https://api.github.com/users/redshiftzero/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 4, "created_at": "2018-07-13T14:31:24Z", "updated_at": "2019-04-16T08:40:37Z", "closed_at": "2019-04-16T08:40:37Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "## Description\r\n\r\nIf the playbook breaks during `install_files/ansible-base/roles/app-test/tasks/modern_gettext.yml` and has not yet removed the xenial apt repo, the next run of the playbook will get things horribly out of sync, possibly destroy a system.\r\n\r\n## Steps to Reproduce\r\n\r\nChange `install_files/ansible-base/roles/app-test/tasks/modern_gettext.yml` to this:\r\n\r\n```yaml\r\n---\r\n#\r\n# This can be removed when VM against which this is run are more\r\n# recent than trusty\r\n#\r\n- name: Add gettext xenial apt repository\r\n  apt_repository:\r\n    repo: deb http://archive.ubuntu.com/ubuntu/ xenial main\r\n    state: present\r\n    update_cache: yes \r\n  tags:\r\n    - apt\r\n\r\n- name: Install modern gettext\r\n  apt:\r\n    name: gettext\r\n    state: latest\r\n  tags:\r\n    - apt\r\n\r\n- fail:\r\n    msg: \"I am dead\"\r\n\r\n- name: Remove gettext xenial apt repository\r\n  apt_repository:\r\n    repo: deb http://archive.ubuntu.com/ubuntu/ xenial main\r\n    state: absent\r\n    update_cache: yes \r\n  tags:\r\n    - apt\r\n```\r\n\r\nThen re-run the playbook. Watch the sadness.\r\n\r\n## Expected Behavior\r\n\r\nThe playbook failing midway through should not ruin the system.\r\n\r\n## Actual Behavior\r\n\r\nIt does.\r\n\r\n## Comments\r\n\r\nAdd a conditional to prevent this from erroring out until after the the apt repo has been removed. But really this is dangerous and we shouldn't be doing it because a `ctrl-C` in the middle wouldn't let the clean up task run and that's Very Bad.", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3636/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3636/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3635", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3635/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3635/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3635/events", "html_url": "https://github.com/freedomofpress/securedrop/issues/3635", "id": 341024596, "node_id": "MDU6SXNzdWUzNDEwMjQ1OTY=", "number": 3635, "title": "journalist notification incorrectly claims submissions were received", "user": {"login": "ghost", "id": 10137, "node_id": "MDQ6VXNlcjEwMTM3", "avatar_url": "https://avatars.githubusercontent.com/u/10137?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ghost", "html_url": "https://github.com/ghost", "followers_url": "https://api.github.com/users/ghost/followers", "following_url": "https://api.github.com/users/ghost/following{/other_user}", "gists_url": "https://api.github.com/users/ghost/gists{/gist_id}", "starred_url": "https://api.github.com/users/ghost/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ghost/subscriptions", "organizations_url": "https://api.github.com/users/ghost/orgs", "repos_url": "https://api.github.com/users/ghost/repos", "events_url": "https://api.github.com/users/ghost/events{/privacy}", "received_events_url": "https://api.github.com/users/ghost/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}, {"id": 652909251, "node_id": "MDU6TGFiZWw2NTI5MDkyNTE=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/goals:%20journalist%20experience", "name": "goals: journalist experience", "color": "0e8a16", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2018-07-13T13:44:08Z", "updated_at": "2018-07-21T13:02:56Z", "closed_at": "2018-07-21T13:02:56Z", "author_association": "NONE", "active_lock_reason": null, "body": "## Description\r\n\r\nA journalist notification mail is sent claiming a submission was received in the past 24h. But after checking the journalist interface, there is nothing. \r\n\r\n## Steps to Reproduce\r\n\r\n* drain the source of entropy\r\n* as a new source submit a document and check that the source is flagged because no new key was created\r\n* wait 24h and see a journalist notification is mailed because there is a new submission\r\n* login back as the source using the same passphrase and check that the source is no longer flagged\r\n* wait 24h and see a journalist notification is mailed although there is no new submission\r\n\r\n## Expected Behavior\r\n\r\n* no journalist notification is sent when a source key generation is delayed\r\n\r\n## Actual Behavior\r\n\r\n* a journalist notification is sent when a source key generation is delayed", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3635/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3635/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3634", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3634/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3634/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3634/events", "html_url": "https://github.com/freedomofpress/securedrop/issues/3634", "id": 340975749, "node_id": "MDU6SXNzdWUzNDA5NzU3NDk=", "number": 3634, "title": "make update-pip-requirements fails on develop", "user": {"login": "heartsucker", "id": 3998464, "node_id": "MDQ6VXNlcjM5OTg0NjQ=", "avatar_url": "https://avatars.githubusercontent.com/u/3998464?v=4", "gravatar_id": "", "url": "https://api.github.com/users/heartsucker", "html_url": "https://github.com/heartsucker", "followers_url": "https://api.github.com/users/heartsucker/followers", "following_url": "https://api.github.com/users/heartsucker/following{/other_user}", "gists_url": "https://api.github.com/users/heartsucker/gists{/gist_id}", "starred_url": "https://api.github.com/users/heartsucker/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/heartsucker/subscriptions", "organizations_url": "https://api.github.com/users/heartsucker/orgs", "repos_url": "https://api.github.com/users/heartsucker/repos", "events_url": "https://api.github.com/users/heartsucker/events{/privacy}", "received_events_url": "https://api.github.com/users/heartsucker/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2018-07-13T10:59:14Z", "updated_at": "2018-07-13T11:02:37Z", "closed_at": "2018-07-13T11:02:37Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "## Description\r\n\r\nLike the title says. We can't run the `make` script.\r\n\r\n## Steps to Reproduce\r\n\r\n```\r\nmake update-pip-requirements\r\n```\r\n\r\n## Expected Behavior\r\n\r\nScript exists 0\r\n\r\n## Actual Behavior\r\n\r\n```\r\n...\r\nmake[1]: Leaving directory '/home/heartsucker/code/freedomofpress/securedrop/admin'\r\npip-compile --output-file securedrop/requirements/develop-requirements.txt \\\r\n\tadmin/requirements-ansible.in \\\r\n\tsecuredrop/requirements/develop-requirements.in\r\nTraceback (most recent call last):\r\n  File \"/home/heartsucker/.local/bin/pip-compile\", line 7, in <module>\r\n    from piptools.scripts.compile import cli\r\n  File \"/home/heartsucker/.local/lib/python2.7/site-packages/piptools/scripts/compile.py\", line 11, in <module>\r\n    from pip.req import InstallRequirement, parse_requirements\r\nImportError: No module named req\r\nMakefile:127: recipe for target 'update-pip-requirements' failed\r\nmake: *** [update-pip-requirements] Error 1\r\n```", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3634/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3634/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3629", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3629/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3629/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3629/events", "html_url": "https://github.com/freedomofpress/securedrop/issues/3629", "id": 340704400, "node_id": "MDU6SXNzdWUzNDA3MDQ0MDA=", "number": 3629, "title": "Refactor reboot task for qubes-staging molecule scenario", "user": {"login": "emkll", "id": 15223328, "node_id": "MDQ6VXNlcjE1MjIzMzI4", "avatar_url": "https://avatars.githubusercontent.com/u/15223328?v=4", "gravatar_id": "", "url": "https://api.github.com/users/emkll", "html_url": "https://github.com/emkll", "followers_url": "https://api.github.com/users/emkll/followers", "following_url": "https://api.github.com/users/emkll/following{/other_user}", "gists_url": "https://api.github.com/users/emkll/gists{/gist_id}", "starred_url": "https://api.github.com/users/emkll/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/emkll/subscriptions", "organizations_url": "https://api.github.com/users/emkll/orgs", "repos_url": "https://api.github.com/users/emkll/repos", "events_url": "https://api.github.com/users/emkll/events{/privacy}", "received_events_url": "https://api.github.com/users/emkll/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2018-07-12T16:10:00Z", "updated_at": "2020-04-14T18:00:57Z", "closed_at": "2020-04-14T18:00:57Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "## Description\r\n\r\nThe reboot task used by the qubes-staging molecule scenario (and all other playbooks) requires some custom logic to exit cleanly. See https://github.com/freedomofpress/securedrop/pull/3624 for further details.\r\nNote that since the error is at the very end (final reboot), the converge action produces working SecureDrop staging instances.\r\n\r\n## Steps to Reproduce\r\nIn a Qubes dev environment, run \r\n```\r\nmolecule create -s qubes-staging\r\nmolecule converge -s qubes-staging\r\n```\r\n## Expected Behavior\r\n\r\nThe action should complete without error.\r\n## Actual Behavior\r\n\r\nThe playbook fails at the very end with the following error:\r\n```\r\nUnable to retrieve file contents from /home/user/securedrop/molecule/qubes-staging/tasks/reboot_if_first_install.yml\r\n```\r\n## Comments\r\n\r\nSee this comment https://github.com/freedomofpress/securedrop/pull/3624#issuecomment-404353362 for more information as well as a possible fix for this issue.", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3629/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3629/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3605", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3605/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3605/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3605/events", "html_url": "https://github.com/freedomofpress/securedrop/issues/3605", "id": 337012479, "node_id": "MDU6SXNzdWUzMzcwMTI0Nzk=", "number": 3605, "title": "\"Admin only\" warning may get flashed twice", "user": {"login": "heartsucker", "id": 3998464, "node_id": "MDQ6VXNlcjM5OTg0NjQ=", "avatar_url": "https://avatars.githubusercontent.com/u/3998464?v=4", "gravatar_id": "", "url": "https://api.github.com/users/heartsucker", "html_url": "https://github.com/heartsucker", "followers_url": "https://api.github.com/users/heartsucker/followers", "following_url": "https://api.github.com/users/heartsucker/following{/other_user}", "gists_url": "https://api.github.com/users/heartsucker/gists{/gist_id}", "starred_url": "https://api.github.com/users/heartsucker/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/heartsucker/subscriptions", "organizations_url": "https://api.github.com/users/heartsucker/orgs", "repos_url": "https://api.github.com/users/heartsucker/repos", "events_url": "https://api.github.com/users/heartsucker/events{/privacy}", "received_events_url": "https://api.github.com/users/heartsucker/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2018-06-29T14:06:30Z", "updated_at": "2018-06-29T21:46:58Z", "closed_at": "2018-06-29T21:46:45Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "## Description\r\n\r\nReporting this here while documenting TODOs (#724).\r\n\r\nFrom `securedrop/journalist_app/decorators.py`:\r\n\r\n```python\r\ndef admin_required(func):\r\n    @wraps(func)\r\n    def wrapper(*args, **kwargs):\r\n        if logged_in() and g.user.is_admin:\r\n            return func(*args, **kwargs)\r\n        # TODO: sometimes this gets flashed 2x (Chrome only?)\r\n        flash(gettext(\"Only administrators can access this page.\"),\r\n              \"notification\")\r\n        return redirect(url_for('main.index'))\r\n    return wrapper\r\n```\r\n\r\n## Steps to Reproduce\r\n\r\nUnsure.\r\n\r\n## Expected Behavior\r\n\r\nFlashed messages appear once.\r\n\r\n## Actual Behavior\r\n\r\nFlashed messages may appear twice.", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3605/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3605/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3579", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3579/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3579/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3579/events", "html_url": "https://github.com/freedomofpress/securedrop/issues/3579", "id": 335951572, "node_id": "MDU6SXNzdWUzMzU5NTE1NzI=", "number": 3579, "title": "securedrop-admin check_for_updates is showing update needed when it should not", "user": {"login": "kushaldas", "id": 272303, "node_id": "MDQ6VXNlcjI3MjMwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/272303?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kushaldas", "html_url": "https://github.com/kushaldas", "followers_url": "https://api.github.com/users/kushaldas/followers", "following_url": "https://api.github.com/users/kushaldas/following{/other_user}", "gists_url": "https://api.github.com/users/kushaldas/gists{/gist_id}", "starred_url": "https://api.github.com/users/kushaldas/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kushaldas/subscriptions", "organizations_url": "https://api.github.com/users/kushaldas/orgs", "repos_url": "https://api.github.com/users/kushaldas/repos", "events_url": "https://api.github.com/users/kushaldas/events{/privacy}", "received_events_url": "https://api.github.com/users/kushaldas/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/freedomofpress/securedrop/milestones/44", "html_url": "https://github.com/freedomofpress/securedrop/milestone/44", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/milestones/44/labels", "id": 3309935, "node_id": "MDk6TWlsZXN0b25lMzMwOTkzNQ==", "number": 44, "title": "0.9", "description": "2018-08-22: QA begins. Feature freeze. 2018-08-29: String freeze. Pre-release announcement. Release manager: @emkll", "creator": {"login": "redshiftzero", "id": 7832803, "node_id": "MDQ6VXNlcjc4MzI4MDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7832803?v=4", "gravatar_id": "", "url": "https://api.github.com/users/redshiftzero", "html_url": "https://github.com/redshiftzero", "followers_url": "https://api.github.com/users/redshiftzero/followers", "following_url": "https://api.github.com/users/redshiftzero/following{/other_user}", "gists_url": "https://api.github.com/users/redshiftzero/gists{/gist_id}", "starred_url": "https://api.github.com/users/redshiftzero/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/redshiftzero/subscriptions", "organizations_url": "https://api.github.com/users/redshiftzero/orgs", "repos_url": "https://api.github.com/users/redshiftzero/repos", "events_url": "https://api.github.com/users/redshiftzero/events{/privacy}", "received_events_url": "https://api.github.com/users/redshiftzero/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 25, "state": "closed", "created_at": "2018-04-30T18:31:34Z", "updated_at": "2018-09-06T18:55:35Z", "due_on": "2018-09-05T07:00:00Z", "closed_at": "2018-09-06T18:55:35Z"}, "comments": 3, "created_at": "2018-06-26T19:02:06Z", "updated_at": "2018-08-28T19:42:14Z", "closed_at": "2018-08-28T19:42:14Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "## Description\r\n\r\n./securedrop-admin check_for_updates is showing update needed when it should not\r\n\r\n\r\n## Steps to Reproduce\r\n\r\n```\r\namnesia@amnesia:~/Persistent/securedrop$ git checkout develop\r\nSwitched to branch 'develop'\r\nYour branch is up-to-date with 'origin/develop'.\r\namnesia@amnesia:~/Persistent/securedrop$ git tag -a 0.10.0\r\namnesia@amnesia:~/Persistent/securedrop$ git checkout 0.8.0-rc3\r\nNote: checking out '0.8.0-rc3'.\r\n\r\nYou are in 'detached HEAD' state. You can look around, make experimental\r\nchanges and commit them, and you can discard any commits you make in this\r\nstate without impacting any branches by performing another checkout.\r\n\r\nIf you want to create a new branch to retain commits you create, you may\r\ndo so (now or later) by using -b with the checkout command again. Example:\r\n\r\n  git checkout -b <new-branch-name>\r\n\r\nHEAD is now at 20289641... SecureDrop 0.8.0~rc3\r\namnesia@amnesia:~/Persistent/securedrop$ ./securedrop-admin check_for_updates\r\nINFO: Checking for SecureDrop updates...\r\nFetching origin\r\nINFO: Update needed\r\namnesia@amnesia:~/Persistent/securedrop$ git describe\r\n0.8.0-rc3\r\namnesia@amnesia:~/Persistent/securedrop$ git checkout 0.10.0 \r\nPrevious HEAD position was 20289641... SecureDrop 0.8.0~rc3\r\nHEAD is now at 4720be05... Merge pull request #3570 from dachary/wip-i18n\r\namnesia@amnesia:~/Persistent/securedrop$ ./securedrop-admin check_for_updates\r\nINFO: Checking for SecureDrop updates...\r\nFetching origin\r\nINFO: Update needed\r\namnesia@amnesia:~/Persistent/securedrop$ git describe\r\n0.10.0\r\namnesia@amnesia:~/Persistent/securedrop$ \r\n\r\n```\r\n\r\n## Expected Behavior\r\n\r\nShould not say updated required.\r\n\r\n## Actual Behavior\r\n\r\nSaying update needed.\r\n\r\n## Comments\r\n\r\nSuggestions to fix, any other relevant information.\r\n", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3579/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3579/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3567", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3567/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3567/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3567/events", "html_url": "https://github.com/freedomofpress/securedrop/issues/3567", "id": 335547011, "node_id": "MDU6SXNzdWUzMzU1NDcwMTE=", "number": 3567, "title": "Implement logic to guard against checkout of branch in the case of a duplicate branch and tag", "user": {"login": "redshiftzero", "id": 7832803, "node_id": "MDQ6VXNlcjc4MzI4MDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7832803?v=4", "gravatar_id": "", "url": "https://api.github.com/users/redshiftzero", "html_url": "https://github.com/redshiftzero", "followers_url": "https://api.github.com/users/redshiftzero/followers", "following_url": "https://api.github.com/users/redshiftzero/following{/other_user}", "gists_url": "https://api.github.com/users/redshiftzero/gists{/gist_id}", "starred_url": "https://api.github.com/users/redshiftzero/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/redshiftzero/subscriptions", "organizations_url": "https://api.github.com/users/redshiftzero/orgs", "repos_url": "https://api.github.com/users/redshiftzero/repos", "events_url": "https://api.github.com/users/redshiftzero/events{/privacy}", "received_events_url": "https://api.github.com/users/redshiftzero/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}, {"id": 192545295, "node_id": "MDU6TGFiZWwxOTI1NDUyOTU=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/security", "name": "security", "color": "bfdadc", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "redshiftzero", "id": 7832803, "node_id": "MDQ6VXNlcjc4MzI4MDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7832803?v=4", "gravatar_id": "", "url": "https://api.github.com/users/redshiftzero", "html_url": "https://github.com/redshiftzero", "followers_url": "https://api.github.com/users/redshiftzero/followers", "following_url": "https://api.github.com/users/redshiftzero/following{/other_user}", "gists_url": "https://api.github.com/users/redshiftzero/gists{/gist_id}", "starred_url": "https://api.github.com/users/redshiftzero/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/redshiftzero/subscriptions", "organizations_url": "https://api.github.com/users/redshiftzero/orgs", "repos_url": "https://api.github.com/users/redshiftzero/repos", "events_url": "https://api.github.com/users/redshiftzero/events{/privacy}", "received_events_url": "https://api.github.com/users/redshiftzero/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "redshiftzero", "id": 7832803, "node_id": "MDQ6VXNlcjc4MzI4MDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7832803?v=4", "gravatar_id": "", "url": "https://api.github.com/users/redshiftzero", "html_url": "https://github.com/redshiftzero", "followers_url": "https://api.github.com/users/redshiftzero/followers", "following_url": "https://api.github.com/users/redshiftzero/following{/other_user}", "gists_url": "https://api.github.com/users/redshiftzero/gists{/gist_id}", "starred_url": "https://api.github.com/users/redshiftzero/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/redshiftzero/subscriptions", "organizations_url": "https://api.github.com/users/redshiftzero/orgs", "repos_url": "https://api.github.com/users/redshiftzero/repos", "events_url": "https://api.github.com/users/redshiftzero/events{/privacy}", "received_events_url": "https://api.github.com/users/redshiftzero/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/freedomofpress/securedrop/milestones/43", "html_url": "https://github.com/freedomofpress/securedrop/milestone/43", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/milestones/43/labels", "id": 3249122, "node_id": "MDk6TWlsZXN0b25lMzI0OTEyMg==", "number": 43, "title": "0.8", "description": "Release date to match Tails 3.8 release date in https://tails.boum.org/contribute/calendar/.\r\n\r\nSee also the [detailed i18n timeline](https://forum.securedrop.club/t/about-the-translations-category/16)\r\n\r\nFeature freeze: 2018-06-12 (EOD PDT)\r\n\r\nString freeze: 2018-06-19 (EOD PDT)", "creator": {"login": "eloquence", "id": 213636, "node_id": "MDQ6VXNlcjIxMzYzNg==", "avatar_url": "https://avatars.githubusercontent.com/u/213636?v=4", "gravatar_id": "", "url": "https://api.github.com/users/eloquence", "html_url": "https://github.com/eloquence", "followers_url": "https://api.github.com/users/eloquence/followers", "following_url": "https://api.github.com/users/eloquence/following{/other_user}", "gists_url": "https://api.github.com/users/eloquence/gists{/gist_id}", "starred_url": "https://api.github.com/users/eloquence/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/eloquence/subscriptions", "organizations_url": "https://api.github.com/users/eloquence/orgs", "repos_url": "https://api.github.com/users/eloquence/repos", "events_url": "https://api.github.com/users/eloquence/events{/privacy}", "received_events_url": "https://api.github.com/users/eloquence/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 27, "state": "closed", "created_at": "2018-04-06T22:32:59Z", "updated_at": "2018-06-27T01:19:11Z", "due_on": "2018-06-26T07:00:00Z", "closed_at": "2018-06-27T01:19:11Z"}, "comments": 1, "created_at": "2018-06-25T20:00:52Z", "updated_at": "2018-06-26T01:16:24Z", "closed_at": "2018-06-26T01:06:55Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "## Description\r\n\r\nWe distribute code to workstations via checkout of a signed git tag. If there is a branch with the same as the tag, then the tag will verify, but when we actually `git checkout <tag name>` then the branch, not the tag, will be checked out. \r\n\r\n### Short term\r\n\r\nAs a guard, implement logic to verify there is no duplicate tag and branch prior to checkout. \r\n\r\n### Long term\r\n\r\nWe should stop distributing code in this way and implement https://github.com/freedomofpress/securedrop/issues/3502\r\n", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3567/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3567/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3564", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3564/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3564/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3564/events", "html_url": "https://github.com/freedomofpress/securedrop/pull/3564", "id": 335509186, "node_id": "MDExOlB1bGxSZXF1ZXN0MTk3MTkxMzE3", "number": 3564, "title": "Login throttling should be per-user", "user": {"login": "redshiftzero", "id": 7832803, "node_id": "MDQ6VXNlcjc4MzI4MDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7832803?v=4", "gravatar_id": "", "url": "https://api.github.com/users/redshiftzero", "html_url": "https://github.com/redshiftzero", "followers_url": "https://api.github.com/users/redshiftzero/followers", "following_url": "https://api.github.com/users/redshiftzero/following{/other_user}", "gists_url": "https://api.github.com/users/redshiftzero/gists{/gist_id}", "starred_url": "https://api.github.com/users/redshiftzero/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/redshiftzero/subscriptions", "organizations_url": "https://api.github.com/users/redshiftzero/orgs", "repos_url": "https://api.github.com/users/redshiftzero/repos", "events_url": "https://api.github.com/users/redshiftzero/events{/privacy}", "received_events_url": "https://api.github.com/users/redshiftzero/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}, {"id": 192545295, "node_id": "MDU6TGFiZWwxOTI1NDUyOTU=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/security", "name": "security", "color": "bfdadc", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/freedomofpress/securedrop/milestones/43", "html_url": "https://github.com/freedomofpress/securedrop/milestone/43", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/milestones/43/labels", "id": 3249122, "node_id": "MDk6TWlsZXN0b25lMzI0OTEyMg==", "number": 43, "title": "0.8", "description": "Release date to match Tails 3.8 release date in https://tails.boum.org/contribute/calendar/.\r\n\r\nSee also the [detailed i18n timeline](https://forum.securedrop.club/t/about-the-translations-category/16)\r\n\r\nFeature freeze: 2018-06-12 (EOD PDT)\r\n\r\nString freeze: 2018-06-19 (EOD PDT)", "creator": {"login": "eloquence", "id": 213636, "node_id": "MDQ6VXNlcjIxMzYzNg==", "avatar_url": "https://avatars.githubusercontent.com/u/213636?v=4", "gravatar_id": "", "url": "https://api.github.com/users/eloquence", "html_url": "https://github.com/eloquence", "followers_url": "https://api.github.com/users/eloquence/followers", "following_url": "https://api.github.com/users/eloquence/following{/other_user}", "gists_url": "https://api.github.com/users/eloquence/gists{/gist_id}", "starred_url": "https://api.github.com/users/eloquence/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/eloquence/subscriptions", "organizations_url": "https://api.github.com/users/eloquence/orgs", "repos_url": "https://api.github.com/users/eloquence/repos", "events_url": "https://api.github.com/users/eloquence/events{/privacy}", "received_events_url": "https://api.github.com/users/eloquence/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 27, "state": "closed", "created_at": "2018-04-06T22:32:59Z", "updated_at": "2018-06-27T01:19:11Z", "due_on": "2018-06-26T07:00:00Z", "closed_at": "2018-06-27T01:19:11Z"}, "comments": 6, "created_at": "2018-06-25T18:00:39Z", "updated_at": "2018-06-25T19:41:51Z", "closed_at": "2018-06-25T19:40:17Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/freedomofpress/securedrop/pulls/3564", "html_url": "https://github.com/freedomofpress/securedrop/pull/3564", "diff_url": "https://github.com/freedomofpress/securedrop/pull/3564.diff", "patch_url": "https://github.com/freedomofpress/securedrop/pull/3564.patch", "merged_at": "2018-06-25T19:40:16Z"}, "body": "## Status\r\n\r\nReady for review\r\n\r\n## Description of Changes\r\n\r\nFixes #3563.\r\n\r\nChanges proposed in this pull request:\r\n * Adds a regression test for bug in #3563 \r\n * Resolve #3563 bug by making the login throttling per-user\r\n\r\n## Testing\r\n\r\n- [ ] Reproduce original bug following STR in #3563\r\n- [ ] Checkout the regression test without the fix (i.e. check out e128b04) and verify it fails\r\n- [ ] Apply the fix in 369b472, the regression test should now pass and logging in as the second user in the STR should now result in success\r\n\r\n## Deployment\r\n\r\nTo be deployed in `securedrop-app-code` deb package tomorrow\r\n\r\n## Checklist\r\n\r\n### If you made changes to the server application code:\r\n\r\n- [ ] Linting (`make ci-lint`) and tests (`make -C securedrop test`) pass in the development container\r\n\r\n### If you made non-trivial code changes:\r\n\r\n- [ ] I have written a test plan and validated it for this PR\r\n", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3564/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3564/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3563", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3563/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3563/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3563/events", "html_url": "https://github.com/freedomofpress/securedrop/issues/3563", "id": 335505933, "node_id": "MDU6SXNzdWUzMzU1MDU5MzM=", "number": 3563, "title": "Login throttling should be per-user", "user": {"login": "redshiftzero", "id": 7832803, "node_id": "MDQ6VXNlcjc4MzI4MDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7832803?v=4", "gravatar_id": "", "url": "https://api.github.com/users/redshiftzero", "html_url": "https://github.com/redshiftzero", "followers_url": "https://api.github.com/users/redshiftzero/followers", "following_url": "https://api.github.com/users/redshiftzero/following{/other_user}", "gists_url": "https://api.github.com/users/redshiftzero/gists{/gist_id}", "starred_url": "https://api.github.com/users/redshiftzero/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/redshiftzero/subscriptions", "organizations_url": "https://api.github.com/users/redshiftzero/orgs", "repos_url": "https://api.github.com/users/redshiftzero/repos", "events_url": "https://api.github.com/users/redshiftzero/events{/privacy}", "received_events_url": "https://api.github.com/users/redshiftzero/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}, {"id": 192545295, "node_id": "MDU6TGFiZWwxOTI1NDUyOTU=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/security", "name": "security", "color": "bfdadc", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "redshiftzero", "id": 7832803, "node_id": "MDQ6VXNlcjc4MzI4MDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7832803?v=4", "gravatar_id": "", "url": "https://api.github.com/users/redshiftzero", "html_url": "https://github.com/redshiftzero", "followers_url": "https://api.github.com/users/redshiftzero/followers", "following_url": "https://api.github.com/users/redshiftzero/following{/other_user}", "gists_url": "https://api.github.com/users/redshiftzero/gists{/gist_id}", "starred_url": "https://api.github.com/users/redshiftzero/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/redshiftzero/subscriptions", "organizations_url": "https://api.github.com/users/redshiftzero/orgs", "repos_url": "https://api.github.com/users/redshiftzero/repos", "events_url": "https://api.github.com/users/redshiftzero/events{/privacy}", "received_events_url": "https://api.github.com/users/redshiftzero/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "redshiftzero", "id": 7832803, "node_id": "MDQ6VXNlcjc4MzI4MDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7832803?v=4", "gravatar_id": "", "url": "https://api.github.com/users/redshiftzero", "html_url": "https://github.com/redshiftzero", "followers_url": "https://api.github.com/users/redshiftzero/followers", "following_url": "https://api.github.com/users/redshiftzero/following{/other_user}", "gists_url": "https://api.github.com/users/redshiftzero/gists{/gist_id}", "starred_url": "https://api.github.com/users/redshiftzero/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/redshiftzero/subscriptions", "organizations_url": "https://api.github.com/users/redshiftzero/orgs", "repos_url": "https://api.github.com/users/redshiftzero/repos", "events_url": "https://api.github.com/users/redshiftzero/events{/privacy}", "received_events_url": "https://api.github.com/users/redshiftzero/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/freedomofpress/securedrop/milestones/43", "html_url": "https://github.com/freedomofpress/securedrop/milestone/43", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/milestones/43/labels", "id": 3249122, "node_id": "MDk6TWlsZXN0b25lMzI0OTEyMg==", "number": 43, "title": "0.8", "description": "Release date to match Tails 3.8 release date in https://tails.boum.org/contribute/calendar/.\r\n\r\nSee also the [detailed i18n timeline](https://forum.securedrop.club/t/about-the-translations-category/16)\r\n\r\nFeature freeze: 2018-06-12 (EOD PDT)\r\n\r\nString freeze: 2018-06-19 (EOD PDT)", "creator": {"login": "eloquence", "id": 213636, "node_id": "MDQ6VXNlcjIxMzYzNg==", "avatar_url": "https://avatars.githubusercontent.com/u/213636?v=4", "gravatar_id": "", "url": "https://api.github.com/users/eloquence", "html_url": "https://github.com/eloquence", "followers_url": "https://api.github.com/users/eloquence/followers", "following_url": "https://api.github.com/users/eloquence/following{/other_user}", "gists_url": "https://api.github.com/users/eloquence/gists{/gist_id}", "starred_url": "https://api.github.com/users/eloquence/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/eloquence/subscriptions", "organizations_url": "https://api.github.com/users/eloquence/orgs", "repos_url": "https://api.github.com/users/eloquence/repos", "events_url": "https://api.github.com/users/eloquence/events{/privacy}", "received_events_url": "https://api.github.com/users/eloquence/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 27, "state": "closed", "created_at": "2018-04-06T22:32:59Z", "updated_at": "2018-06-27T01:19:11Z", "due_on": "2018-06-26T07:00:00Z", "closed_at": "2018-06-27T01:19:11Z"}, "comments": 0, "created_at": "2018-06-25T17:50:39Z", "updated_at": "2018-06-25T19:40:17Z", "closed_at": "2018-06-25T19:40:17Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "# Description\r\n\r\nThis is a denial of service bug that is fortunately behind the journalist interface ATHS. Login throttling is currently not per-user, it's global, i.e. if a single user is blocked from logging in due to login throttling, then all users are. We should fix this in 0.8.0.\r\n\r\n# Steps to reproduce\r\n\r\n1. Provision dev env\r\n2. Try to login 6 times with incorrect credentials as journalist user. You will start seeing the following in the log output:\r\n\r\n```\r\n--------------------------------------------------------------------------------\r\nERROR in utils [/Users/redshiftzero/Documents/Github/securedrop/securedrop/journalist_app/utils.py:83]:\r\nLogin for 'journalist' failed: throttled (6 attempts in last 60 seconds)\r\n--------------------------------------------------------------------------------\r\n```\r\n\r\n3. Try to login for the first time as dellsberg\r\n\r\n# Expected behavior\r\n\r\nDellsberg can login and is not impacted by the tricksy behavior of the journalist user\r\n\r\n# Actual behavior\r\n\r\nDellsberg is denied access to the journalist interface:\r\n\r\n```\r\n172.17.0.1 - - [23/May/2018 23:00:13] \"POST /login HTTP/1.1\" 200 -\r\n172.17.0.1 - - [23/May/2018 23:00:13] \"GET /org-logo HTTP/1.1\" 302 -\r\n--------------------------------------------------------------------------------\r\nERROR in utils [/Users/redshiftzero/Documents/Github/securedrop/securedrop/journalist_app/utils.py:83]:\r\nLogin for 'dellsberg' failed: throttled (7 attempts in last 60 seconds)\r\n\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\r\n```\r\n\r\n# Resolution\r\n\r\nThe fix here is the addition of an additional filter in the ORM query we use to filter by user when computing `attempts_within_period` in `Journalist.throttle_login`. A fix _must_ include a regression test.", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3563/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3563/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3559", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3559/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3559/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3559/events", "html_url": "https://github.com/freedomofpress/securedrop/pull/3559", "id": 335020953, "node_id": "MDExOlB1bGxSZXF1ZXN0MTk2ODQ2OTE0", "number": 3559, "title": "ossec: fix journalist notification border case", "user": {"login": "ghost", "id": 10137, "node_id": "MDQ6VXNlcjEwMTM3", "avatar_url": "https://avatars.githubusercontent.com/u/10137?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ghost", "html_url": "https://github.com/ghost", "followers_url": "https://api.github.com/users/ghost/followers", "following_url": "https://api.github.com/users/ghost/following{/other_user}", "gists_url": "https://api.github.com/users/ghost/gists{/gist_id}", "starred_url": "https://api.github.com/users/ghost/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ghost/subscriptions", "organizations_url": "https://api.github.com/users/ghost/orgs", "repos_url": "https://api.github.com/users/ghost/repos", "events_url": "https://api.github.com/users/ghost/events{/privacy}", "received_events_url": "https://api.github.com/users/ghost/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}, {"id": 652909251, "node_id": "MDU6TGFiZWw2NTI5MDkyNTE=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/goals:%20journalist%20experience", "name": "goals: journalist experience", "color": "0e8a16", "default": false, "description": null}, {"id": 741396371, "node_id": "MDU6TGFiZWw3NDEzOTYzNzE=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/OSSEC", "name": "OSSEC", "color": "006b75", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2018-06-22T21:13:43Z", "updated_at": "2018-06-26T00:25:27Z", "closed_at": "2018-06-26T00:23:06Z", "author_association": "NONE", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/freedomofpress/securedrop/pulls/3559", "html_url": "https://github.com/freedomofpress/securedrop/pull/3559", "diff_url": "https://github.com/freedomofpress/securedrop/pull/3559.diff", "patch_url": "https://github.com/freedomofpress/securedrop/pull/3559.patch", "merged_at": "2018-06-26T00:23:06Z"}, "body": "## Status\r\n\r\nReady for review\r\n\r\n## Description of Changes\r\n\r\nFixes #3557\r\n\r\nWhen .procmailrc changes, the pattern triggering this script will match\r\nitself. Just return and ignore the match.\r\n\r\nIn install_files/ansible-base/roles/postfix/files/procmailrc the following:\r\n\r\n    :0 B\r\n    * /var/lib/securedrop/submissions_today.txt\r\n    |/var/ossec/process_submissions_today.sh\r\n\r\nwas introduced in 0.7.0. It is only installed when running\r\nsecuredrop-admin install. Since this file is monitored by OSSEC, it\r\nwill trigger an alert with the following:\r\n\r\n    Integrity checksum changed for: '/var/ossec/.procmailrc'\r\n    Size changed from '162' to '261'\r\n    What changed:\r\n    6,8c6,13\r\n    < :0 c\r\n    < *^To:.*root.*\r\n    < |/var/ossec/send_encrypted_alarm.sh\r\n    ---\r\n    >\r\n    > :0 B\r\n    > * /var/lib/securedrop/submissions_today.txt\r\n    > |/var/ossec/process_submissions_today.sh\r\n    >\r\n\r\nWhich matches the rule and therefore triggers the script which fails\r\nto find the expected submissions count.\r\n\r\n## Testing\r\n\r\n* Install 0.7.0\r\n* Do **not** run `./securedrop-admin install`\r\n* Install  0.8.0\r\n* Run `./securedrop-admin install` with journalist notification setup\r\n* Verify the mail received does not contain any mail titled `SecureDrop Submissions Error`\r\n\r\nThe `testinfra/ossec/test_journalist_mail.py` test runs the added test and covers this exception.\r\n\r\n    def test_process_submissions_today(self, host):\r\n        assert self.run(host,\r\n                        \"/var/ossec/process_submissions_today.sh \"\r\n                        \"test_handle_notification\")\r\n        assert self.run(host,\r\n                        \"/var/ossec/process_submissions_today.sh \"\r\n                        \"test_modified_in_the_past_24h\")\r\n\r\n\r\n## Deployment\r\n\r\nIt will fix a one time incorrect journalist notification error and not require any action from the admin.\r\n\r\n## Checklist\r\n\r\n-", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3559/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3559/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3557", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3557/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3557/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3557/events", "html_url": "https://github.com/freedomofpress/securedrop/issues/3557", "id": 335004823, "node_id": "MDU6SXNzdWUzMzUwMDQ4MjM=", "number": 3557, "title": "journalist notification error", "user": {"login": "msheiny", "id": 1727935, "node_id": "MDQ6VXNlcjE3Mjc5MzU=", "avatar_url": "https://avatars.githubusercontent.com/u/1727935?v=4", "gravatar_id": "", "url": "https://api.github.com/users/msheiny", "html_url": "https://github.com/msheiny", "followers_url": "https://api.github.com/users/msheiny/followers", "following_url": "https://api.github.com/users/msheiny/following{/other_user}", "gists_url": "https://api.github.com/users/msheiny/gists{/gist_id}", "starred_url": "https://api.github.com/users/msheiny/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/msheiny/subscriptions", "organizations_url": "https://api.github.com/users/msheiny/orgs", "repos_url": "https://api.github.com/users/msheiny/repos", "events_url": "https://api.github.com/users/msheiny/events{/privacy}", "received_events_url": "https://api.github.com/users/msheiny/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}, {"id": 652909251, "node_id": "MDU6TGFiZWw2NTI5MDkyNTE=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/goals:%20journalist%20experience", "name": "goals: journalist experience", "color": "0e8a16", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 8, "created_at": "2018-06-22T20:12:09Z", "updated_at": "2018-07-29T09:54:23Z", "closed_at": "2018-06-26T00:23:06Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "## Description\r\n\r\nDuring QA for 0.8 release I bumped an instance from 0.7 -> 0.8 and re-ran the ansible install logic to configure journalist notifications. I see the following error email post run:\r\n\r\n<details>\r\n  <summary>Email error</summary>\r\n  \r\n<pre>\r\n/var/ossec/process_submissions_today.sh failed to find 0/1 submissions boolean in the following OSSEC alert\r\n\r\n>From ossec@freedom.press  Fri Jun 22 15:58:17 2018\r\nReturn-Path: <ossec@freedom.press>\r\nX-Original-To: root@localhost\r\nDelivered-To: root@localhost\r\nReceived: from notify.ossec.net (localhost [127.0.0.1])\r\n\tby ossec.server (Postfix) with SMTP id 6A92110063A;\r\n\tFri, 22 Jun 2018 15:58:17 -0400 (EDT)\r\nTo: <root@localhost>\r\nFrom: OSSEC HIDS <ossec@freedom.press>\r\nTo: <root@localhost>\r\nDate: Fri, 22 Jun 2018 15:58:17 -0400\r\nSubject: OSSEC Notification - mon - Alert level 7\r\nMessage-Id: <20180622195817.6A92110063A@ossec.server>\r\n\r\n\r\nOSSEC HIDS Notification.\r\n2018 Jun 22 15:58:13\r\n\r\nReceived From: mon->syscheck\r\nRule: 551 fired (level 7) -> \"Integrity checksum changed again (2nd time).\"\r\nPortion of the log(s):\r\n\r\nIntegrity checksum changed for: '/var/ossec/.procmailrc'\r\nSize changed from '162' to '261'\r\nWhat changed:\r\n6,8c6,13\r\n< :0 c\r\n< *^To:.*root.*\r\n< |/var/ossec/send_encrypted_alarm.sh\r\n---\r\n>\r\n> :0 B\r\n> * /var/lib/securedrop/submissions_today.txt\r\n> |/var/ossec/process_submissions_today.sh\r\n>\r\n> :0 E\r\n> * ^To:.*root.*\r\n> |/var/ossec/send_encrypted_alarm.sh ossec\r\nOld md5sum was: 'eda43ea4b971eb6f72515d7c9074fd47'\r\nNew md5sum is : 'ce08da1ce22f43f6193ce2af3bc256e6'\r\nOld sha1sum was: '24a72cb93d5530121006f87e654380c2adac015c'\r\nNew sha1sum is : 'bd52122a00fc7548609492b52ccc2f43c002b8fb'\r\n\r\n\r\n\r\n --END OF NOTIFICATION\r\n</pre>\r\n</details>\r\n\r\n## Steps to Reproduce\r\n\r\n* Upgrade from 0.7 -> 0.8rc2+\r\n* Re-run ansible playbook from 0.8 source with journalist notification settings enabled\r\n* Check your inbox :)\r\n\r\n\r\n## Expected Behavior\r\n\r\nA beautiful inbox full of wonderful OSSEC messages. Each one more actionable than the last :rainbow: \r\n\r\n\r\n## Actual Behavior\r\n\r\nA garbage fire of an email with mixed content of journalist notification and ossec output\r\n\r\n\r\n## Comments\r\n\r\nI like burritos", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3557/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3557/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3533", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3533/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3533/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3533/events", "html_url": "https://github.com/freedomofpress/securedrop/issues/3533", "id": 332930374, "node_id": "MDU6SXNzdWUzMzI5MzAzNzQ=", "number": 3533, "title": "admin CLI: return 1 should eventually exit with a non-zero return code", "user": {"login": "redshiftzero", "id": 7832803, "node_id": "MDQ6VXNlcjc4MzI4MDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7832803?v=4", "gravatar_id": "", "url": "https://api.github.com/users/redshiftzero", "html_url": "https://github.com/redshiftzero", "followers_url": "https://api.github.com/users/redshiftzero/followers", "following_url": "https://api.github.com/users/redshiftzero/following{/other_user}", "gists_url": "https://api.github.com/users/redshiftzero/gists{/gist_id}", "starred_url": "https://api.github.com/users/redshiftzero/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/redshiftzero/subscriptions", "organizations_url": "https://api.github.com/users/redshiftzero/orgs", "repos_url": "https://api.github.com/users/redshiftzero/repos", "events_url": "https://api.github.com/users/redshiftzero/events{/privacy}", "received_events_url": "https://api.github.com/users/redshiftzero/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}, {"id": 385585080, "node_id": "MDU6TGFiZWwzODU1ODUwODA=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/QA:%20Release", "name": "QA: Release", "color": "fbca04", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "kushaldas", "id": 272303, "node_id": "MDQ6VXNlcjI3MjMwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/272303?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kushaldas", "html_url": "https://github.com/kushaldas", "followers_url": "https://api.github.com/users/kushaldas/followers", "following_url": "https://api.github.com/users/kushaldas/following{/other_user}", "gists_url": "https://api.github.com/users/kushaldas/gists{/gist_id}", "starred_url": "https://api.github.com/users/kushaldas/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kushaldas/subscriptions", "organizations_url": "https://api.github.com/users/kushaldas/orgs", "repos_url": "https://api.github.com/users/kushaldas/repos", "events_url": "https://api.github.com/users/kushaldas/events{/privacy}", "received_events_url": "https://api.github.com/users/kushaldas/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "kushaldas", "id": 272303, "node_id": "MDQ6VXNlcjI3MjMwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/272303?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kushaldas", "html_url": "https://github.com/kushaldas", "followers_url": "https://api.github.com/users/kushaldas/followers", "following_url": "https://api.github.com/users/kushaldas/following{/other_user}", "gists_url": "https://api.github.com/users/kushaldas/gists{/gist_id}", "starred_url": "https://api.github.com/users/kushaldas/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kushaldas/subscriptions", "organizations_url": "https://api.github.com/users/kushaldas/orgs", "repos_url": "https://api.github.com/users/kushaldas/repos", "events_url": "https://api.github.com/users/kushaldas/events{/privacy}", "received_events_url": "https://api.github.com/users/kushaldas/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 5, "created_at": "2018-06-15T22:25:24Z", "updated_at": "2018-06-21T21:20:04Z", "closed_at": "2018-06-21T21:20:04Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "# Description\r\n\r\nOn develop and in the 0.8.0 release branch a `return 1` does not cause the securedrop-admin CLI to eventually exit with a non-zero return code. \r\n\r\n# Steps to reproduce\r\n\r\n1. It's a little difficult to trigger a `return 1` but one method is to just modify the happy path of `securedrop-admin update` to `return 1` and commit this change in a test branch\r\n2. `securedrop-admin update`\r\n3. `echo $?`\r\n\r\n# Expected Behavior\r\n\r\nnon-zero exit code :)\r\n\r\n# Actual Behavior\r\n\r\nzero exit code :(\r\n\r\n# Comments\r\n\r\nThis is important to fix during release QA as in 0.7.0 we released the SecureDrop workstation updater, which behind the scenes is calling out to the `securedrop-admin` CLI to do updates, and the logic relies on sensible return codes being returned by the CLI. On the 0.7.0 tag a `return 1` does make `securedrop-admin` eventually exit non-zero. ", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3533/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3533/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3528", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3528/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3528/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3528/events", "html_url": "https://github.com/freedomofpress/securedrop/issues/3528", "id": 332465374, "node_id": "MDU6SXNzdWUzMzI0NjUzNzQ=", "number": 3528, "title": "[0.8.0] Custom Logo does not persist with upgrade", "user": {"login": "emkll", "id": 15223328, "node_id": "MDQ6VXNlcjE1MjIzMzI4", "avatar_url": "https://avatars.githubusercontent.com/u/15223328?v=4", "gravatar_id": "", "url": "https://api.github.com/users/emkll", "html_url": "https://github.com/emkll", "followers_url": "https://api.github.com/users/emkll/followers", "following_url": "https://api.github.com/users/emkll/following{/other_user}", "gists_url": "https://api.github.com/users/emkll/gists{/gist_id}", "starred_url": "https://api.github.com/users/emkll/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/emkll/subscriptions", "organizations_url": "https://api.github.com/users/emkll/orgs", "repos_url": "https://api.github.com/users/emkll/repos", "events_url": "https://api.github.com/users/emkll/events{/privacy}", "received_events_url": "https://api.github.com/users/emkll/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}, {"id": 385585080, "node_id": "MDU6TGFiZWwzODU1ODUwODA=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/QA:%20Release", "name": "QA: Release", "color": "fbca04", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/freedomofpress/securedrop/milestones/43", "html_url": "https://github.com/freedomofpress/securedrop/milestone/43", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/milestones/43/labels", "id": 3249122, "node_id": "MDk6TWlsZXN0b25lMzI0OTEyMg==", "number": 43, "title": "0.8", "description": "Release date to match Tails 3.8 release date in https://tails.boum.org/contribute/calendar/.\r\n\r\nSee also the [detailed i18n timeline](https://forum.securedrop.club/t/about-the-translations-category/16)\r\n\r\nFeature freeze: 2018-06-12 (EOD PDT)\r\n\r\nString freeze: 2018-06-19 (EOD PDT)", "creator": {"login": "eloquence", "id": 213636, "node_id": "MDQ6VXNlcjIxMzYzNg==", "avatar_url": "https://avatars.githubusercontent.com/u/213636?v=4", "gravatar_id": "", "url": "https://api.github.com/users/eloquence", "html_url": "https://github.com/eloquence", "followers_url": "https://api.github.com/users/eloquence/followers", "following_url": "https://api.github.com/users/eloquence/following{/other_user}", "gists_url": "https://api.github.com/users/eloquence/gists{/gist_id}", "starred_url": "https://api.github.com/users/eloquence/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/eloquence/subscriptions", "organizations_url": "https://api.github.com/users/eloquence/orgs", "repos_url": "https://api.github.com/users/eloquence/repos", "events_url": "https://api.github.com/users/eloquence/events{/privacy}", "received_events_url": "https://api.github.com/users/eloquence/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 27, "state": "closed", "created_at": "2018-04-06T22:32:59Z", "updated_at": "2018-06-27T01:19:11Z", "due_on": "2018-06-26T07:00:00Z", "closed_at": "2018-06-27T01:19:11Z"}, "comments": 2, "created_at": "2018-06-14T15:59:29Z", "updated_at": "2018-06-15T16:05:00Z", "closed_at": "2018-06-15T16:04:59Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "## Description\r\n\r\n\r\nThe optional custom logo that is on source and journalist interfaces is not preserved when the instance is upgraded from0.7.0 to 0.8.0. It is replaced with the default SecureDrop logo.\r\n\r\n## Steps to Reproduce\r\n\r\n1. Install SecureDrop 0.7.0 in prod vms\r\n2. Upload a custom Instance Logo \r\n3. Upgrade to SecureDrop 0.8.0~rc1\r\n4. Navigate to the Source interface and observe the default logo.\r\n\r\n## Expected Behavior\r\nUpgrading to 0.8.0 should preserve the custom instance logo.\r\n\r\n## Actual Behavior\r\n\r\nThe custom logo is replaced by the default SecureDrop logo.\r\n## Comments\r\nThere are no apparmor/grsecurity errors, it seems like app code packaging/upgrade logic.\r\nThe custom logo is no longer found in `/var/www/securedrop/static/i/`\r\n## Workaround\r\nAdmin can run the install playbook to re-upload the image.", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3528/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3528/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3521", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3521/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3521/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3521/events", "html_url": "https://github.com/freedomofpress/securedrop/issues/3521", "id": 332075598, "node_id": "MDU6SXNzdWUzMzIwNzU1OTg=", "number": 3521, "title": "Install fails in prod VMs or physical installs on develop branch", "user": {"login": "emkll", "id": 15223328, "node_id": "MDQ6VXNlcjE1MjIzMzI4", "avatar_url": "https://avatars.githubusercontent.com/u/15223328?v=4", "gravatar_id": "", "url": "https://api.github.com/users/emkll", "html_url": "https://github.com/emkll", "followers_url": "https://api.github.com/users/emkll/followers", "following_url": "https://api.github.com/users/emkll/following{/other_user}", "gists_url": "https://api.github.com/users/emkll/gists{/gist_id}", "starred_url": "https://api.github.com/users/emkll/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/emkll/subscriptions", "organizations_url": "https://api.github.com/users/emkll/orgs", "repos_url": "https://api.github.com/users/emkll/repos", "events_url": "https://api.github.com/users/emkll/events{/privacy}", "received_events_url": "https://api.github.com/users/emkll/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/freedomofpress/securedrop/milestones/43", "html_url": "https://github.com/freedomofpress/securedrop/milestone/43", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/milestones/43/labels", "id": 3249122, "node_id": "MDk6TWlsZXN0b25lMzI0OTEyMg==", "number": 43, "title": "0.8", "description": "Release date to match Tails 3.8 release date in https://tails.boum.org/contribute/calendar/.\r\n\r\nSee also the [detailed i18n timeline](https://forum.securedrop.club/t/about-the-translations-category/16)\r\n\r\nFeature freeze: 2018-06-12 (EOD PDT)\r\n\r\nString freeze: 2018-06-19 (EOD PDT)", "creator": {"login": "eloquence", "id": 213636, "node_id": "MDQ6VXNlcjIxMzYzNg==", "avatar_url": "https://avatars.githubusercontent.com/u/213636?v=4", "gravatar_id": "", "url": "https://api.github.com/users/eloquence", "html_url": "https://github.com/eloquence", "followers_url": "https://api.github.com/users/eloquence/followers", "following_url": "https://api.github.com/users/eloquence/following{/other_user}", "gists_url": "https://api.github.com/users/eloquence/gists{/gist_id}", "starred_url": "https://api.github.com/users/eloquence/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/eloquence/subscriptions", "organizations_url": "https://api.github.com/users/eloquence/orgs", "repos_url": "https://api.github.com/users/eloquence/repos", "events_url": "https://api.github.com/users/eloquence/events{/privacy}", "received_events_url": "https://api.github.com/users/eloquence/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 27, "state": "closed", "created_at": "2018-04-06T22:32:59Z", "updated_at": "2018-06-27T01:19:11Z", "due_on": "2018-06-26T07:00:00Z", "closed_at": "2018-06-27T01:19:11Z"}, "comments": 3, "created_at": "2018-06-13T16:40:03Z", "updated_at": "2018-06-13T18:21:17Z", "closed_at": "2018-06-13T18:20:21Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "# Bug\r\n\r\n## Description\r\n\r\nCuriously, this does not apply to staging VMs, or when using the 0.7.0 release tag.\r\n\r\n## Steps to Reproduce\r\n\r\n- Provision prod VMs\r\n- Checkout develop\r\n- Configure/install SecureDrop\r\n\r\n## Expected Behavior\r\n\r\nInstall should complete successfully.\r\n\r\n## Actual Behavior\r\n\r\nInstall fails at the Application GPG key import phase:\r\n\r\n```\r\nTASK [app : Import the SecureDrop Application GPG public key to the Application Server keyring.] ***************\r\n [WARNING]: Consider using 'become', 'become_method', and 'become_user' rather than running su\r\n\r\nfatal: [app]: FAILED! => {\"changed\": false, \"cmd\": [\"su\", \"-s\", \"/bin/bash\", \"-c\", \"gpg --homedir /var/lib/securedrop/keys --import /var/lib/securedrop/sd.key\", \"www-data\"], \"delta\": \"0:00:00.019037\", \"end\": \"2018-06-13 16:15:56.868172\", \"msg\": \"non-zero return code\", \"rc\": 2, \"start\": \"2018-06-13 16:15:56.849135\", \"stderr\": \"gpg: keyblock resource `/var/lib/securedrop/keys/secring.gpg': file open error\\ngpg: keyblock resource `/var/lib/securedrop/keys/pubring.gpg': file open error\\ngpg: no writable keyring found: eof\\ngpg: error reading `/var/lib/securedrop/sd.key': general error\\ngpg: import from `/var/lib/securedrop/sd.key' failed: general error\\ngpg: Total number processed: 0\", \"stderr_lines\": [\"gpg: keyblock resource `/var/lib/securedrop/keys/secring.gpg': file open error\", \"gpg: keyblock resource `/var/lib/securedrop/keys/pubring.gpg': file open error\", \"gpg: no writable keyring found: eof\", \"gpg: error reading `/var/lib/securedrop/sd.key': general error\", \"gpg: import from `/var/lib/securedrop/sd.key' failed: general error\", \"gpg: Total number processed: 0\"], \"stdout\": \"\", \"stdout_lines\": []}\r\n```\r\n\r\n## Comments\r\n\r\nThis might have something to do with recent updates to gpg.", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3521/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3521/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3503", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3503/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3503/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3503/events", "html_url": "https://github.com/freedomofpress/securedrop/issues/3503", "id": 330185687, "node_id": "MDU6SXNzdWUzMzAxODU2ODc=", "number": 3503, "title": "Test `test_ensure_no_updates_avail` is flaky", "user": {"login": "heartsucker", "id": 3998464, "node_id": "MDQ6VXNlcjM5OTg0NjQ=", "avatar_url": "https://avatars.githubusercontent.com/u/3998464?v=4", "gravatar_id": "", "url": "https://api.github.com/users/heartsucker", "html_url": "https://github.com/heartsucker", "followers_url": "https://api.github.com/users/heartsucker/followers", "following_url": "https://api.github.com/users/heartsucker/following{/other_user}", "gists_url": "https://api.github.com/users/heartsucker/gists{/gist_id}", "starred_url": "https://api.github.com/users/heartsucker/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/heartsucker/subscriptions", "organizations_url": "https://api.github.com/users/heartsucker/orgs", "repos_url": "https://api.github.com/users/heartsucker/repos", "events_url": "https://api.github.com/users/heartsucker/events{/privacy}", "received_events_url": "https://api.github.com/users/heartsucker/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}, {"id": 475997849, "node_id": "MDU6TGFiZWw0NzU5OTc4NDk=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/tests", "name": "tests", "color": "f9d0c4", "default": false, "description": null}, {"id": 652907032, "node_id": "MDU6TGFiZWw2NTI5MDcwMzI=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/goals:%20sick%20CI", "name": "goals: sick CI", "color": "0e8a16", "default": false, "description": null}, {"id": 807692602, "node_id": "MDU6TGFiZWw4MDc2OTI2MDI=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/CI-specific%20bug", "name": "CI-specific bug", "color": "b60205", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2018-06-07T09:17:26Z", "updated_at": "2018-06-14T19:41:27Z", "closed_at": "2018-06-14T19:41:27Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "# Bug\r\n\r\n## Description\r\n\r\nThe test `test_ensure_no_updates_avail` is flaky.\r\n\r\n## Steps to Reproduce\r\n\r\nI have seen this error on CI (but I'm not positive this is a CI-specific bug), for example [here](https://circleci.com/gh/freedomofpress/securedrop/14318?utm_campaign=vcs-integration-link&utm_medium=referral&utm_source=github-build-link).\r\n\r\n## Expected Behavior\r\n\r\nThe test passes.\r\n\r\n## Actual Behavior\r\n\r\n```\r\n    _________ test_ensure_no_updates_avail[docker://trusty-sd-sec-update] __________\r\n    [gw25] linux2 -- Python 2.7.13 /usr/bin/python\r\n    \r\n    host = <testinfra.host.Host object at 0x7ff71c0e6fd0>\r\n    \r\n        def test_ensure_no_updates_avail(host):\r\n            \"\"\"\r\n                Test to make sure that there are no security-updates in the\r\n                base builder container.\r\n            \"\"\"\r\n        \r\n            # Filter out all the security repos to their own file\r\n            # without this change all the package updates appeared as if they were\r\n            # coming from normal ubuntu update channel (since they get posted to both)\r\n            host.run('egrep \"^deb.*security\" /etc/apt/sources.list > /tmp/sec.list')\r\n        \r\n            dist_upgrade_simulate = host.run('apt-get -s dist-upgrade '\r\n                                             '-oDir::Etc::Sourcelist=/tmp/sec.list '\r\n                                             '|grep \"^Inst\" |grep -i security')\r\n        \r\n            # If the grep was successful that means security package updates found\r\n            # otherwise we get a non-zero exit code so no updates needed.\r\n    >       assert dist_upgrade_simulate.rc != 0\r\n    E       AssertionError: assert 0 != 0\r\n    E        +  where 0 = CommandResult(command='apt-get -s dist-upgrade -oDir::Etc::Sourcelist=/tmp/sec...0.7] (1:1.9.1-1ubuntu0.8 Ubuntu:14.04/trusty-security [amd64])\\n', stderr=None).rc\r\n    \r\n    tests/test_security_updates.py:21: AssertionError\r\n    ============== 1 failed, 175 passed, 1 xpassed in 101.77 seconds ===============\r\n```\r\n## Comments\r\n\r\nNo suggestion at the moment. At the very least we could make this assertion have verbose output, such as the stdout of `apt-get -s dist-upgrade -oDir::Etc::Sourcelist=/tmp/sec.list`.", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3503/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3503/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3479", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3479/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3479/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3479/events", "html_url": "https://github.com/freedomofpress/securedrop/pull/3479", "id": 327256792, "node_id": "MDExOlB1bGxSZXF1ZXN0MTkxMDk3NDQ0", "number": 3479, "title": "journalist notifications: allow 30 minutes variance in reboot times", "user": {"login": "ghost", "id": 10137, "node_id": "MDQ6VXNlcjEwMTM3", "avatar_url": "https://avatars.githubusercontent.com/u/10137?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ghost", "html_url": "https://github.com/ghost", "followers_url": "https://api.github.com/users/ghost/followers", "following_url": "https://api.github.com/users/ghost/following{/other_user}", "gists_url": "https://api.github.com/users/ghost/gists{/gist_id}", "starred_url": "https://api.github.com/users/ghost/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ghost/subscriptions", "organizations_url": "https://api.github.com/users/ghost/orgs", "repos_url": "https://api.github.com/users/ghost/repos", "events_url": "https://api.github.com/users/ghost/events{/privacy}", "received_events_url": "https://api.github.com/users/ghost/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}, {"id": 652909251, "node_id": "MDU6TGFiZWw2NTI5MDkyNTE=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/goals:%20journalist%20experience", "name": "goals: journalist experience", "color": "0e8a16", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 10, "created_at": "2018-05-29T10:17:59Z", "updated_at": "2018-06-06T07:16:22Z", "closed_at": "2018-06-05T22:09:13Z", "author_association": "NONE", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/freedomofpress/securedrop/pulls/3479", "html_url": "https://github.com/freedomofpress/securedrop/pull/3479", "diff_url": "https://github.com/freedomofpress/securedrop/pull/3479.diff", "patch_url": "https://github.com/freedomofpress/securedrop/pull/3479.patch", "merged_at": "2018-06-05T22:09:13Z"}, "body": "## Status\r\n\r\nReady for review\r\n\r\n## Description of Changes\r\n\r\nFixes: #3478\r\n\r\nThe race condition goes as follows:\r\n\r\n  - machine reboots\r\n  - notification sent\r\n  - machine reboots 24h later but reboots 1 minute faster than the previous day\r\n  - notification is sent 23h59 minutes after the last one and suppressed\r\n\r\nThe notification will be sent the next day but the information it\r\ncontains will not reflect what happened in the past 24h because the cron job\r\n\r\n   manage.py were-there-submissions-today\r\n\r\nupdates it daily, one hour before the machine reboots.\r\n\r\nTo resolve this race condition (or make it extremely unlikely) we\r\nallow for notifications to be sent at most every 23h30.\r\n\r\nCase 1: machine is slower to reboot the next day:\r\n\r\n  - machine reboots\r\n  - notification sent\r\n  - machine reboots 24h later but reboots 5 minutes slower than the previous day\r\n  - notification is processed 24h05 minutes after the last one, it is\r\n    more tha 23h30 and therefore the notification is sent\r\n\r\nCase 2: machine is faster to reboot the next day:\r\n\r\n  - machine reboots\r\n  - notification sent\r\n  - machine reboots 24h later but reboots 8 minutes faster than the previous day\r\n  - notification is processed 23h52 minutes after the last one, it is\r\n    more tha 23h30 and therefore the notification is sent\r\n\r\n## Testing\r\n\r\nTestinfra tests changing the time of the app server are implemented. I do not think manual testing is possible for this race condition but I'm open to ideas.\r\n\r\n## Deployment\r\n\r\n* `./securedrop-admin install` must be run to fix the bug\r\n* The cron job `ansible-base/roles/app/tasks/setup_cron.yml` updating the number of submissions in the past 24h will change to happen one hour before the reboot instead of midnight\r\n* As a result it is possible that the journalist notification does not reflect the \r\n\r\n## Checklist\r\n\r\n### If you made changes to the server application code:\r\n\r\n- [x] Linting (`make ci-lint`) and tests (`make -C securedrop test`) pass in the development container\r\n\r\n### If you made changes to documentation:\r\n\r\n- [x] Doc linting (`make docs-lint`) passed locally\r\n", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3479/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3479/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3478", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3478/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3478/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3478/events", "html_url": "https://github.com/freedomofpress/securedrop/issues/3478", "id": 327256322, "node_id": "MDU6SXNzdWUzMjcyNTYzMjI=", "number": 3478, "title": "journalist notifications: races against reboot time", "user": {"login": "ghost", "id": 10137, "node_id": "MDQ6VXNlcjEwMTM3", "avatar_url": "https://avatars.githubusercontent.com/u/10137?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ghost", "html_url": "https://github.com/ghost", "followers_url": "https://api.github.com/users/ghost/followers", "following_url": "https://api.github.com/users/ghost/following{/other_user}", "gists_url": "https://api.github.com/users/ghost/gists{/gist_id}", "starred_url": "https://api.github.com/users/ghost/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ghost/subscriptions", "organizations_url": "https://api.github.com/users/ghost/orgs", "repos_url": "https://api.github.com/users/ghost/repos", "events_url": "https://api.github.com/users/ghost/events{/privacy}", "received_events_url": "https://api.github.com/users/ghost/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}, {"id": 652909251, "node_id": "MDU6TGFiZWw2NTI5MDkyNTE=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/goals:%20journalist%20experience", "name": "goals: journalist experience", "color": "0e8a16", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2018-05-29T10:16:41Z", "updated_at": "2018-06-05T22:09:13Z", "closed_at": "2018-06-05T22:09:13Z", "author_association": "NONE", "active_lock_reason": null, "body": "# Bug\r\n\r\n## Description\r\n\r\nThe race condition goes as follows:\r\n\r\n  - machine reboots\r\n  - notification sent\r\n  - machine reboots 24h later but reboots 1 minute faster than the previous day\r\n  - notification is sent 23h59 minutes after the last one and suppressed\r\n\r\nThe notification will be sent the next day but the information it\r\ncontains will not reflect what happened in the past 24h because the cron job\r\n\r\n   manage.py were-there-submissions-today\r\n\r\nupdates it daily, one hour before the machine reboots.\r\n\r\n\r\n## Steps to Reproduce\r\n\r\n* manually reboot the app server\r\n* verify the journalist notification is sent\r\n* manually reboot the app server before 24h00 passed, effectively simulating what happens when the machine reboots faster the next day\r\n* verify the journalist notification is supprssed by looking for **suppressed** in /var/log/syslog in the mon server\r\n\r\n## Expected Behavior\r\n\r\n* The journalist notification is sent every day, give or take 30 minutes\r\n\r\n## Actual Behavior\r\n\r\n* The journalist notification is suppressed if 23h59 passed instead of 24h00\r\n", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3478/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3478/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3466", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3466/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3466/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3466/events", "html_url": "https://github.com/freedomofpress/securedrop/pull/3466", "id": 324703684, "node_id": "MDExOlB1bGxSZXF1ZXN0MTg5MjMwNjk5", "number": 3466, "title": " ansible: rules_v4 does not need to inspect unused ipv4 details", "user": {"login": "ghost", "id": 10137, "node_id": "MDQ6VXNlcjEwMTM3", "avatar_url": "https://avatars.githubusercontent.com/u/10137?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ghost", "html_url": "https://github.com/ghost", "followers_url": "https://api.github.com/users/ghost/followers", "following_url": "https://api.github.com/users/ghost/following{/other_user}", "gists_url": "https://api.github.com/users/ghost/gists{/gist_id}", "starred_url": "https://api.github.com/users/ghost/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ghost/subscriptions", "organizations_url": "https://api.github.com/users/ghost/orgs", "repos_url": "https://api.github.com/users/ghost/repos", "events_url": "https://api.github.com/users/ghost/events{/privacy}", "received_events_url": "https://api.github.com/users/ghost/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}, {"id": 192539287, "node_id": "MDU6TGFiZWwxOTI1MzkyODc=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/ops/deployment", "name": "ops/deployment", "color": "c7def8", "default": false, "description": null}, {"id": 652909222, "node_id": "MDU6TGFiZWw2NTI5MDkyMjI=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/goals:%20Improve%20Ansible%20logic%20/%20smoother%20install", "name": "goals: Improve Ansible logic / smoother install", "color": "0e8a16", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2018-05-20T11:55:10Z", "updated_at": "2018-05-22T14:21:51Z", "closed_at": "2018-05-22T14:21:51Z", "author_association": "NONE", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/freedomofpress/securedrop/pulls/3466", "html_url": "https://github.com/freedomofpress/securedrop/pull/3466", "diff_url": "https://github.com/freedomofpress/securedrop/pull/3466.diff", "patch_url": "https://github.com/freedomofpress/securedrop/pull/3466.patch", "merged_at": "2018-05-22T14:21:51Z"}, "body": "## Status\r\n\r\nReady for review\r\n\r\n## Description of Changes\r\n\r\nFixes #3465 \r\n\r\nThe iptables rules are only used when enable_ssh_over_tor is not\r\nset. Save ansible the trouble of examining the details of the ipv4\r\naddress and interface when the result is not going to be used.\r\n\r\nThe main benefit is also to workaround a border case which is not\r\nproperly handled by ipaddr:\r\n\r\n   ipaddr('184.20.18.54/255.255.255.255')\r\n\r\nalthough valid fails with\r\n\r\n   AnsibleFilterError: ipaddr: unknown filter type\r\n\r\nThis border case may be found in colocations where IP addresses are\r\ndistributed individually as /32 instead of being part of an allocated\r\nsubnet. It is however unlikely to be found in test environments or in\r\nsetups where the machines are allocated IPs in a private subnet.\r\n\r\n## Comment\r\n\r\nThe [first commit](https://github.com/freedomofpress/securedrop/pull/3466/commits/8279b85ec97a3ab847bd04dcc81e50d275cd3f42) contains the change and the [second commit](https://github.com/freedomofpress/securedrop/pull/3466/commits/c2910305ea76b556da30f4986531be288a48a2e1) is whitespace only changes to facilitate review.\r\n\r\n## Testing\r\n\r\n[Install SecureDrop](https://docs.securedrop.org/en/latest/install.html) with and without **enable_ssh_over_tor** to verify it works as it did before the change. This seems really overkill and I wonder if there is a simpler way of checking the same?\r\n\r\n## Deployment\r\n\r\nN/A\r\n", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3466/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3466/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3465", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3465/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3465/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3465/events", "html_url": "https://github.com/freedomofpress/securedrop/issues/3465", "id": 324702810, "node_id": "MDU6SXNzdWUzMjQ3MDI4MTA=", "number": 3465, "title": "rules_v4 fails when mon/app is /32", "user": {"login": "ghost", "id": 10137, "node_id": "MDQ6VXNlcjEwMTM3", "avatar_url": "https://avatars.githubusercontent.com/u/10137?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ghost", "html_url": "https://github.com/ghost", "followers_url": "https://api.github.com/users/ghost/followers", "following_url": "https://api.github.com/users/ghost/following{/other_user}", "gists_url": "https://api.github.com/users/ghost/gists{/gist_id}", "starred_url": "https://api.github.com/users/ghost/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ghost/subscriptions", "organizations_url": "https://api.github.com/users/ghost/orgs", "repos_url": "https://api.github.com/users/ghost/repos", "events_url": "https://api.github.com/users/ghost/events{/privacy}", "received_events_url": "https://api.github.com/users/ghost/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}, {"id": 192539287, "node_id": "MDU6TGFiZWwxOTI1MzkyODc=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/ops/deployment", "name": "ops/deployment", "color": "c7def8", "default": false, "description": null}, {"id": 652909222, "node_id": "MDU6TGFiZWw2NTI5MDkyMjI=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/goals:%20Improve%20Ansible%20logic%20/%20smoother%20install", "name": "goals: Improve Ansible logic / smoother install", "color": "0e8a16", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/freedomofpress/securedrop/milestones/43", "html_url": "https://github.com/freedomofpress/securedrop/milestone/43", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/milestones/43/labels", "id": 3249122, "node_id": "MDk6TWlsZXN0b25lMzI0OTEyMg==", "number": 43, "title": "0.8", "description": "Release date to match Tails 3.8 release date in https://tails.boum.org/contribute/calendar/.\r\n\r\nSee also the [detailed i18n timeline](https://forum.securedrop.club/t/about-the-translations-category/16)\r\n\r\nFeature freeze: 2018-06-12 (EOD PDT)\r\n\r\nString freeze: 2018-06-19 (EOD PDT)", "creator": {"login": "eloquence", "id": 213636, "node_id": "MDQ6VXNlcjIxMzYzNg==", "avatar_url": "https://avatars.githubusercontent.com/u/213636?v=4", "gravatar_id": "", "url": "https://api.github.com/users/eloquence", "html_url": "https://github.com/eloquence", "followers_url": "https://api.github.com/users/eloquence/followers", "following_url": "https://api.github.com/users/eloquence/following{/other_user}", "gists_url": "https://api.github.com/users/eloquence/gists{/gist_id}", "starred_url": "https://api.github.com/users/eloquence/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/eloquence/subscriptions", "organizations_url": "https://api.github.com/users/eloquence/orgs", "repos_url": "https://api.github.com/users/eloquence/repos", "events_url": "https://api.github.com/users/eloquence/events{/privacy}", "received_events_url": "https://api.github.com/users/eloquence/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 27, "state": "closed", "created_at": "2018-04-06T22:32:59Z", "updated_at": "2018-06-27T01:19:11Z", "due_on": "2018-06-26T07:00:00Z", "closed_at": "2018-06-27T01:19:11Z"}, "comments": 0, "created_at": "2018-05-20T11:39:30Z", "updated_at": "2018-06-13T19:18:03Z", "closed_at": "2018-05-22T14:21:51Z", "author_association": "NONE", "active_lock_reason": null, "body": "# Bug\r\n\r\n## Description\r\n\r\nIf the man/app addresses are /32, the rules_v4 template fails during `securedrop-admin install` with **AnsibleFilterError: ipaddr: unknown filter type: XX.XX.XX.XX/255.255.255.255**\r\n\r\n## Steps to Reproduce\r\n\r\nSetup a SecureDrop with mon/app and a /32 instead of the usual /24 or something.\r\n\r\n## Expected Behavior\r\n\r\nThe `securedrop-admin install` command completes.\r\n\r\n## Actual Behavior\r\n\r\nThe `securedrop-admin install` command fails with **AnsibleFilterError: ipaddr: unknown filter type: XX.XX.XX.XX/255.255.255.255**.\r\n", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3465/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3465/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3455", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3455/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3455/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3455/events", "html_url": "https://github.com/freedomofpress/securedrop/pull/3455", "id": 324234374, "node_id": "MDExOlB1bGxSZXF1ZXN0MTg4ODk2OTE1", "number": 3455, "title": "Apache AppArmor: Whitelist new source template screensaver.html", "user": {"login": "redshiftzero", "id": 7832803, "node_id": "MDQ6VXNlcjc4MzI4MDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7832803?v=4", "gravatar_id": "", "url": "https://api.github.com/users/redshiftzero", "html_url": "https://github.com/redshiftzero", "followers_url": "https://api.github.com/users/redshiftzero/followers", "following_url": "https://api.github.com/users/redshiftzero/following{/other_user}", "gists_url": "https://api.github.com/users/redshiftzero/gists{/gist_id}", "starred_url": "https://api.github.com/users/redshiftzero/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/redshiftzero/subscriptions", "organizations_url": "https://api.github.com/users/redshiftzero/orgs", "repos_url": "https://api.github.com/users/redshiftzero/repos", "events_url": "https://api.github.com/users/redshiftzero/events{/privacy}", "received_events_url": "https://api.github.com/users/redshiftzero/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}, {"id": 475977470, "node_id": "MDU6TGFiZWw0NzU5Nzc0NzA=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/journalist%20interface%20(JI)", "name": "journalist interface (JI)", "color": "f9d0c4", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2018-05-18T00:54:39Z", "updated_at": "2019-02-27T10:44:41Z", "closed_at": "2018-05-18T06:41:59Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/freedomofpress/securedrop/pulls/3455", "html_url": "https://github.com/freedomofpress/securedrop/pull/3455", "diff_url": "https://github.com/freedomofpress/securedrop/pull/3455.diff", "patch_url": "https://github.com/freedomofpress/securedrop/pull/3455.patch", "merged_at": "2018-05-18T06:41:59Z"}, "body": "## Status\r\n\r\nReady for review\r\n\r\n## Description of Changes\r\n\r\nFixes #3454.\r\n\r\nChanges proposed in this pull request:\r\n* Whitelist new source template screensaver.html\r\n\r\n## Testing\r\n\r\n1. Provision staging.\r\n2. Verify you can navigate to the source interface in Tor Browser and you do not get a 500\r\n\r\n## Deployment\r\n\r\nDeployed in `securedrop-app-code` package\r\n\r\n## Checklist\r\n\r\n### If you made changes to the server application code:\r\n\r\n- [ ] Linting (`make ci-lint`) and tests (`make -C securedrop test`) pass in the development container\r\n\r\n### If you made changes to `securedrop-admin`:\r\n\r\n- [ ] Linting and tests (`make -C admin test`) pass in the admin development container\r\n\r\n### If you made changes to the system configuration:\r\n\r\n- [ ] [Configuration tests](https://docs.securedrop.org/en/latest/development/testing_configuration_tests.html) pass\r\n\r\n### If you made changes to documentation:\r\n\r\n- [ ] Doc linting (`make docs-lint`) passed locally\r\n", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3455/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3455/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3454", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3454/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3454/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3454/events", "html_url": "https://github.com/freedomofpress/securedrop/issues/3454", "id": 324233717, "node_id": "MDU6SXNzdWUzMjQyMzM3MTc=", "number": 3454, "title": "500 on source interface in staging/prod VMs", "user": {"login": "redshiftzero", "id": 7832803, "node_id": "MDQ6VXNlcjc4MzI4MDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7832803?v=4", "gravatar_id": "", "url": "https://api.github.com/users/redshiftzero", "html_url": "https://github.com/redshiftzero", "followers_url": "https://api.github.com/users/redshiftzero/followers", "following_url": "https://api.github.com/users/redshiftzero/following{/other_user}", "gists_url": "https://api.github.com/users/redshiftzero/gists{/gist_id}", "starred_url": "https://api.github.com/users/redshiftzero/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/redshiftzero/subscriptions", "organizations_url": "https://api.github.com/users/redshiftzero/orgs", "repos_url": "https://api.github.com/users/redshiftzero/repos", "events_url": "https://api.github.com/users/redshiftzero/events{/privacy}", "received_events_url": "https://api.github.com/users/redshiftzero/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}, {"id": 157793311, "node_id": "MDU6TGFiZWwxNTc3OTMzMTE=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/priority/high", "name": "priority/high", "color": "e64ef4", "default": false, "description": ""}, {"id": 475977399, "node_id": "MDU6TGFiZWw0NzU5NzczOTk=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/source%20interface%20(SI)", "name": "source interface (SI)", "color": "f9d0c4", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": {"login": "redshiftzero", "id": 7832803, "node_id": "MDQ6VXNlcjc4MzI4MDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7832803?v=4", "gravatar_id": "", "url": "https://api.github.com/users/redshiftzero", "html_url": "https://github.com/redshiftzero", "followers_url": "https://api.github.com/users/redshiftzero/followers", "following_url": "https://api.github.com/users/redshiftzero/following{/other_user}", "gists_url": "https://api.github.com/users/redshiftzero/gists{/gist_id}", "starred_url": "https://api.github.com/users/redshiftzero/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/redshiftzero/subscriptions", "organizations_url": "https://api.github.com/users/redshiftzero/orgs", "repos_url": "https://api.github.com/users/redshiftzero/repos", "events_url": "https://api.github.com/users/redshiftzero/events{/privacy}", "received_events_url": "https://api.github.com/users/redshiftzero/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "redshiftzero", "id": 7832803, "node_id": "MDQ6VXNlcjc4MzI4MDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7832803?v=4", "gravatar_id": "", "url": "https://api.github.com/users/redshiftzero", "html_url": "https://github.com/redshiftzero", "followers_url": "https://api.github.com/users/redshiftzero/followers", "following_url": "https://api.github.com/users/redshiftzero/following{/other_user}", "gists_url": "https://api.github.com/users/redshiftzero/gists{/gist_id}", "starred_url": "https://api.github.com/users/redshiftzero/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/redshiftzero/subscriptions", "organizations_url": "https://api.github.com/users/redshiftzero/orgs", "repos_url": "https://api.github.com/users/redshiftzero/repos", "events_url": "https://api.github.com/users/redshiftzero/events{/privacy}", "received_events_url": "https://api.github.com/users/redshiftzero/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2018-05-18T00:50:25Z", "updated_at": "2018-05-18T06:41:59Z", "closed_at": "2018-05-18T06:41:59Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "## Description\r\n\r\nAppArmor rules in staging env on the source interface need updating\r\n\r\n## Steps to Reproduce\r\n\r\n1. Provision staging on develop\r\n2. Navigate to source interface\r\n\r\n## Expected Behavior\r\n\r\nYou see the source interface and all is merry\r\n\r\n## Actual Behavior\r\n\r\n500 server error\r\n\r\n## Comments\r\n\r\nThis is due to a missing Apache AppArmor rule in #3439:\r\n\r\n```\r\n[Fri May 18 00:43:27.139819 2018] [:error] [pid 1384:tid 3651424700160] [remote 127.0.0.1:48442] IOError: [Errno 13] Permission denied: '/var/www/securedrop/source_templates/screensaver.html'\r\n```", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3454/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3454/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3453", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3453/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3453/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3453/events", "html_url": "https://github.com/freedomofpress/securedrop/pull/3453", "id": 324202048, "node_id": "MDExOlB1bGxSZXF1ZXN0MTg4ODczMzgx", "number": 3453, "title": "Fix make update-pip-requirements", "user": {"login": "redshiftzero", "id": 7832803, "node_id": "MDQ6VXNlcjc4MzI4MDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7832803?v=4", "gravatar_id": "", "url": "https://api.github.com/users/redshiftzero", "html_url": "https://github.com/redshiftzero", "followers_url": "https://api.github.com/users/redshiftzero/followers", "following_url": "https://api.github.com/users/redshiftzero/following{/other_user}", "gists_url": "https://api.github.com/users/redshiftzero/gists{/gist_id}", "starred_url": "https://api.github.com/users/redshiftzero/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/redshiftzero/subscriptions", "organizations_url": "https://api.github.com/users/redshiftzero/orgs", "repos_url": "https://api.github.com/users/redshiftzero/repos", "events_url": "https://api.github.com/users/redshiftzero/events{/privacy}", "received_events_url": "https://api.github.com/users/redshiftzero/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}, {"id": 660721238, "node_id": "MDU6TGFiZWw2NjA3MjEyMzg=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/goals:%20improve%20developer%20workflow", "name": "goals: improve developer workflow", "color": "0e8a16", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2018-05-17T22:02:46Z", "updated_at": "2019-02-27T10:46:18Z", "closed_at": "2018-05-18T06:59:49Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/freedomofpress/securedrop/pulls/3453", "html_url": "https://github.com/freedomofpress/securedrop/pull/3453", "diff_url": "https://github.com/freedomofpress/securedrop/pull/3453.diff", "patch_url": "https://github.com/freedomofpress/securedrop/pull/3453.patch", "merged_at": "2018-05-18T06:59:49Z"}, "body": "## Status\r\n\r\nReady for review\r\n\r\n## Description of Changes\r\n\r\nFixes #3292 \r\n\r\nChanges proposed in this pull request:\r\n* In pip 10, `pip.req` (used by pip-compile) was moved to\r\n`pip._internal.req`. We need to move to a more recent version of\r\n`pip-tools`, or we will get an `ImportError` when pip-compile tries to\r\n`import pip.req`.\r\n\r\n## Testing\r\n\r\nCheck out this PR, and verify that `make update-pip-requirements` completes successfully\r\n\r\n## Deployment\r\n\r\nDevelopment environment only\r\n\r\n## Checklist\r\n\r\n### If you made changes to the server application code:\r\n\r\n- [ ] Linting (`make ci-lint`) and tests (`make -C securedrop test`) pass in the development container\r\n\r\n### If you made changes to `securedrop-admin`:\r\n\r\n- [ ] Linting and tests (`make -C admin test`) pass in the admin development container\r\n\r\n### If you made changes to the system configuration:\r\n\r\n- [ ] [Configuration tests](https://docs.securedrop.org/en/latest/development/testing_configuration_tests.html) pass\r\n\r\n### If you made changes to documentation:\r\n\r\n- [ ] Doc linting (`make docs-lint`) passed locally\r\n", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3453/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3453/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3448", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3448/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3448/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3448/events", "html_url": "https://github.com/freedomofpress/securedrop/pull/3448", "id": 323827468, "node_id": "MDExOlB1bGxSZXF1ZXN0MTg4NTkxNTE3", "number": 3448, "title": "Return correct exit code from securedrop-admin", "user": {"login": "antsar", "id": 2976310, "node_id": "MDQ6VXNlcjI5NzYzMTA=", "avatar_url": "https://avatars.githubusercontent.com/u/2976310?v=4", "gravatar_id": "", "url": "https://api.github.com/users/antsar", "html_url": "https://github.com/antsar", "followers_url": "https://api.github.com/users/antsar/followers", "following_url": "https://api.github.com/users/antsar/following{/other_user}", "gists_url": "https://api.github.com/users/antsar/gists{/gist_id}", "starred_url": "https://api.github.com/users/antsar/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/antsar/subscriptions", "organizations_url": "https://api.github.com/users/antsar/orgs", "repos_url": "https://api.github.com/users/antsar/repos", "events_url": "https://api.github.com/users/antsar/events{/privacy}", "received_events_url": "https://api.github.com/users/antsar/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}, {"id": 192539287, "node_id": "MDU6TGFiZWwxOTI1MzkyODc=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/ops/deployment", "name": "ops/deployment", "color": "c7def8", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2018-05-16T23:58:55Z", "updated_at": "2018-06-07T13:00:50Z", "closed_at": "2018-06-07T02:22:15Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/freedomofpress/securedrop/pulls/3448", "html_url": "https://github.com/freedomofpress/securedrop/pull/3448", "diff_url": "https://github.com/freedomofpress/securedrop/pull/3448.diff", "patch_url": "https://github.com/freedomofpress/securedrop/pull/3448.patch", "merged_at": "2018-06-07T02:22:15Z"}, "body": "## Status\r\n\r\nReady for review\r\n\r\n## Description of Changes\r\n\r\nFixes #3303.\r\n\r\nThis PR updates `securedrop_admin.main()` to <s>pass through any non-zero</s> <sup>**see update**</sup> exit codes returned by a `subprocess` call.\r\n\r\nPR #3327 *partially* solved this problem by making `securedrop-admin` `exit 1` whenever a subprocess has a non-zero exit code. With this PR, it will return the specific code instead of `1`.\r\n\r\n**Update**: Per the discussion on this PR, rather than passing through exit codes from subprocess, we will return one of a few specially-defined (as module-level constants) exit codes.\r\n\r\n## Testing\r\n\r\nA unit test is included. For manual testing, cause any subprocess to produce a non-zero exit code.\r\n\r\n## Deployment\r\n\r\nThis should not impact new or existing deployments, unless there are shell scripts out there which rely on the old behavior.\r\n\r\n## Checklist\r\n\r\n### If you made changes to `securedrop-admin`:\r\n\r\n- [x] Linting and tests (`make -C admin test`) pass in the admin development container\r\n", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3448/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3448/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3437", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3437/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3437/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3437/events", "html_url": "https://github.com/freedomofpress/securedrop/pull/3437", "id": 323771118, "node_id": "MDExOlB1bGxSZXF1ZXN0MTg4NTQ4MDM5", "number": 3437, "title": "Fix improper reference link in logging.rst", "user": {"login": "pierwill", "id": 19642016, "node_id": "MDQ6VXNlcjE5NjQyMDE2", "avatar_url": "https://avatars.githubusercontent.com/u/19642016?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pierwill", "html_url": "https://github.com/pierwill", "followers_url": "https://api.github.com/users/pierwill/followers", "following_url": "https://api.github.com/users/pierwill/following{/other_user}", "gists_url": "https://api.github.com/users/pierwill/gists{/gist_id}", "starred_url": "https://api.github.com/users/pierwill/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pierwill/subscriptions", "organizations_url": "https://api.github.com/users/pierwill/orgs", "repos_url": "https://api.github.com/users/pierwill/repos", "events_url": "https://api.github.com/users/pierwill/events{/privacy}", "received_events_url": "https://api.github.com/users/pierwill/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}, {"id": 118465787, "node_id": "MDU6TGFiZWwxMTg0NjU3ODc=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/docs", "name": "docs", "color": "d4c5f9", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2018-05-16T20:18:21Z", "updated_at": "2018-05-16T22:49:13Z", "closed_at": "2018-05-16T22:49:13Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/freedomofpress/securedrop/pulls/3437", "html_url": "https://github.com/freedomofpress/securedrop/pull/3437", "diff_url": "https://github.com/freedomofpress/securedrop/pull/3437.diff", "patch_url": "https://github.com/freedomofpress/securedrop/pull/3437.patch", "merged_at": "2018-05-16T22:49:13Z"}, "body": "Ready for review\r\n\r\n- [x] Doc linting (`make docs-lint`) passed locally\r\n", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3437/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3437/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3436", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3436/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3436/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3436/events", "html_url": "https://github.com/freedomofpress/securedrop/pull/3436", "id": 323722766, "node_id": "MDExOlB1bGxSZXF1ZXN0MTg4NTExMDY5", "number": 3436, "title": "compile translations when setting up the docker development environment", "user": {"login": "ghost", "id": 10137, "node_id": "MDQ6VXNlcjEwMTM3", "avatar_url": "https://avatars.githubusercontent.com/u/10137?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ghost", "html_url": "https://github.com/ghost", "followers_url": "https://api.github.com/users/ghost/followers", "following_url": "https://api.github.com/users/ghost/following{/other_user}", "gists_url": "https://api.github.com/users/ghost/gists{/gist_id}", "starred_url": "https://api.github.com/users/ghost/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ghost/subscriptions", "organizations_url": "https://api.github.com/users/ghost/orgs", "repos_url": "https://api.github.com/users/ghost/repos", "events_url": "https://api.github.com/users/ghost/events{/privacy}", "received_events_url": "https://api.github.com/users/ghost/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}, {"id": 660721238, "node_id": "MDU6TGFiZWw2NjA3MjEyMzg=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/goals:%20improve%20developer%20workflow", "name": "goals: improve developer workflow", "color": "0e8a16", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2018-05-16T17:49:11Z", "updated_at": "2018-05-16T18:47:27Z", "closed_at": "2018-05-16T18:47:27Z", "author_association": "NONE", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/freedomofpress/securedrop/pulls/3436", "html_url": "https://github.com/freedomofpress/securedrop/pull/3436", "diff_url": "https://github.com/freedomofpress/securedrop/pull/3436.diff", "patch_url": "https://github.com/freedomofpress/securedrop/pull/3436.patch", "merged_at": "2018-05-16T18:47:27Z"}, "body": "## Status\r\n\r\nReady for review\r\n\r\n## Description of Changes\r\n\r\nFixes #3433\r\n\r\n## Testing\r\n\r\n* git clone https://github.com/freedomofpress/securedrop/\r\n* cd securedrop\r\n* make -C securedrop dev\r\n* firefox http://localhost:8080/?l=fr_FR\r\n* check the display is french\r\n\r\n## Deployment\r\n\r\nN/A\r\n\r\n## Checklist\r\n\r\n### If you made changes to the server application code:\r\n\r\n- [x] Linting (`make ci-lint`) and tests (`make -C securedrop test`) pass in the development container\r\n", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3436/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3436/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3433", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3433/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3433/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3433/events", "html_url": "https://github.com/freedomofpress/securedrop/issues/3433", "id": 323686427, "node_id": "MDU6SXNzdWUzMjM2ODY0Mjc=", "number": 3433, "title": "Add translations info to developer setup doc", "user": {"login": "antsar", "id": 2976310, "node_id": "MDQ6VXNlcjI5NzYzMTA=", "avatar_url": "https://avatars.githubusercontent.com/u/2976310?v=4", "gravatar_id": "", "url": "https://api.github.com/users/antsar", "html_url": "https://github.com/antsar", "followers_url": "https://api.github.com/users/antsar/followers", "following_url": "https://api.github.com/users/antsar/following{/other_user}", "gists_url": "https://api.github.com/users/antsar/gists{/gist_id}", "starred_url": "https://api.github.com/users/antsar/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/antsar/subscriptions", "organizations_url": "https://api.github.com/users/antsar/orgs", "repos_url": "https://api.github.com/users/antsar/repos", "events_url": "https://api.github.com/users/antsar/events{/privacy}", "received_events_url": "https://api.github.com/users/antsar/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}, {"id": 616447641, "node_id": "MDU6TGFiZWw2MTY0NDc2NDE=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/development%20env", "name": "development env", "color": "bfd4f2", "default": false, "description": null}, {"id": 660721238, "node_id": "MDU6TGFiZWw2NjA3MjEyMzg=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/goals:%20improve%20developer%20workflow", "name": "goals: improve developer workflow", "color": "0e8a16", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2018-05-16T16:02:29Z", "updated_at": "2018-05-16T18:47:27Z", "closed_at": "2018-05-16T18:47:27Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Following the [Setting up the development environment](https://docs.securedrop.org/en/release-0.7/development/setup_development.html) doc produces a SecureDrop instance with nonfunctional translations. Selecting a language has no effect - the UI is still rendered in English. [Compiling the translations](https://docs.securedrop.org/en/release-0.7/development/i18n.html#compiling-translations) fixes this issue.\r\n\r\nExtend the Setting up the [Setting up the development environment](https://docs.securedrop.org/en/release-0.7/development/setup_development.html) doc to indicate that translations must be compiled in order for i18n to work.\r\n\r\n## User Stories\r\n\r\nAs a new SecureDrop contributor, I expected that translations would be functional in the developer environment.", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3433/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3433/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3430", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3430/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3430/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3430/events", "html_url": "https://github.com/freedomofpress/securedrop/pull/3430", "id": 323414178, "node_id": "MDExOlB1bGxSZXF1ZXN0MTg4Mjc5MzQy", "number": 3430, "title": "[0.7.0] Backport fix #3429", "user": {"login": "redshiftzero", "id": 7832803, "node_id": "MDQ6VXNlcjc4MzI4MDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7832803?v=4", "gravatar_id": "", "url": "https://api.github.com/users/redshiftzero", "html_url": "https://github.com/redshiftzero", "followers_url": "https://api.github.com/users/redshiftzero/followers", "following_url": "https://api.github.com/users/redshiftzero/following{/other_user}", "gists_url": "https://api.github.com/users/redshiftzero/gists{/gist_id}", "starred_url": "https://api.github.com/users/redshiftzero/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/redshiftzero/subscriptions", "organizations_url": "https://api.github.com/users/redshiftzero/orgs", "repos_url": "https://api.github.com/users/redshiftzero/repos", "events_url": "https://api.github.com/users/redshiftzero/events{/privacy}", "received_events_url": "https://api.github.com/users/redshiftzero/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}, {"id": 192539287, "node_id": "MDU6TGFiZWwxOTI1MzkyODc=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/ops/deployment", "name": "ops/deployment", "color": "c7def8", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2018-05-15T23:06:25Z", "updated_at": "2018-05-15T23:57:50Z", "closed_at": "2018-05-15T23:57:40Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/freedomofpress/securedrop/pulls/3430", "html_url": "https://github.com/freedomofpress/securedrop/pull/3430", "diff_url": "https://github.com/freedomofpress/securedrop/pull/3430.diff", "patch_url": "https://github.com/freedomofpress/securedrop/pull/3430.patch", "merged_at": "2018-05-15T23:57:40Z"}, "body": "## Status\r\n\r\nReady for review\r\n\r\n## Description of Changes\r\n\r\nChanges proposed in this pull request:\r\n * Backport fix in #3429\r\n\r\n## Testing\r\n\r\nIf you're bored, run through test instructions in #3429 again ;-) \r\n\r\n## Deployment\r\n\r\nPart of workstation code release in 0.7.0\r\n\r\n## Checklist\r\n\r\n### If you made changes to `securedrop-admin`:\r\n\r\n- [ ] Linting and tests (`make -C admin test`) pass in the admin development container\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3430/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3430/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3429", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3429/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3429/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3429/events", "html_url": "https://github.com/freedomofpress/securedrop/pull/3429", "id": 323400732, "node_id": "MDExOlB1bGxSZXF1ZXN0MTg4MjY5MzQ1", "number": 3429, "title": "Fix check_for_updates", "user": {"login": "redshiftzero", "id": 7832803, "node_id": "MDQ6VXNlcjc4MzI4MDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7832803?v=4", "gravatar_id": "", "url": "https://api.github.com/users/redshiftzero", "html_url": "https://github.com/redshiftzero", "followers_url": "https://api.github.com/users/redshiftzero/followers", "following_url": "https://api.github.com/users/redshiftzero/following{/other_user}", "gists_url": "https://api.github.com/users/redshiftzero/gists{/gist_id}", "starred_url": "https://api.github.com/users/redshiftzero/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/redshiftzero/subscriptions", "organizations_url": "https://api.github.com/users/redshiftzero/orgs", "repos_url": "https://api.github.com/users/redshiftzero/repos", "events_url": "https://api.github.com/users/redshiftzero/events{/privacy}", "received_events_url": "https://api.github.com/users/redshiftzero/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}, {"id": 192539287, "node_id": "MDU6TGFiZWwxOTI1MzkyODc=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/ops/deployment", "name": "ops/deployment", "color": "c7def8", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2018-05-15T22:07:28Z", "updated_at": "2018-05-15T22:59:42Z", "closed_at": "2018-05-15T22:59:38Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/freedomofpress/securedrop/pulls/3429", "html_url": "https://github.com/freedomofpress/securedrop/pull/3429", "diff_url": "https://github.com/freedomofpress/securedrop/pull/3429.diff", "patch_url": "https://github.com/freedomofpress/securedrop/pull/3429.patch", "merged_at": "2018-05-15T22:59:38Z"}, "body": "## Status\r\n\r\nReady for review\r\n\r\n## Description of Changes\r\n\r\nFixes #3426.\r\n\r\nChanges proposed in this pull request:\r\n * Strips newline from `current_tag` in `securedrop-admin check_for_updates` \r\n\r\n## Test plan\r\n\r\nAll of the following should be done in Tails.\r\n\r\n### No updates needed case\r\n\r\n0. Check out 0.6\r\n1. Apply the diff in `admin/securedrop_admin/__init__.py` to 0.6\r\n2. Run `./securedrop-admin check_for_updates`\r\n\r\nYou should see that updates are not needed: `INFO: All updates applied`\r\n\r\n### Updates needed case\r\n\r\n0. Check out a random branch that is not this one\r\n1. Add a new tag locally that has a higher version number than the current prod version of SecureDrop, e.g. 0.7.0\r\n2. Switch back to this branch\r\n3. Run `./securedrop-admin check_for_updates`\r\n\r\nYou should see that updates are needed: `INFO: Update needed`\r\n\r\n## Deployment\r\n\r\nWill go out in workstation update\r\n\r\n## Checklist\r\n\r\n### If you made changes to `securedrop-admin`:\r\n\r\n- [x] Linting and tests (`make -C admin test`) pass in the admin development container\r\n", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3429/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3429/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3426", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3426/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3426/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3426/events", "html_url": "https://github.com/freedomofpress/securedrop/issues/3426", "id": 323388547, "node_id": "MDU6SXNzdWUzMjMzODg1NDc=", "number": 3426, "title": "[QA] Tails GUI updater reporting new versions", "user": {"login": "conorsch", "id": 657862, "node_id": "MDQ6VXNlcjY1Nzg2Mg==", "avatar_url": "https://avatars.githubusercontent.com/u/657862?v=4", "gravatar_id": "", "url": "https://api.github.com/users/conorsch", "html_url": "https://github.com/conorsch", "followers_url": "https://api.github.com/users/conorsch/followers", "following_url": "https://api.github.com/users/conorsch/following{/other_user}", "gists_url": "https://api.github.com/users/conorsch/gists{/gist_id}", "starred_url": "https://api.github.com/users/conorsch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/conorsch/subscriptions", "organizations_url": "https://api.github.com/users/conorsch/orgs", "repos_url": "https://api.github.com/users/conorsch/repos", "events_url": "https://api.github.com/users/conorsch/events{/privacy}", "received_events_url": "https://api.github.com/users/conorsch/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}, {"id": 192539287, "node_id": "MDU6TGFiZWwxOTI1MzkyODc=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/ops/deployment", "name": "ops/deployment", "color": "c7def8", "default": false, "description": null}, {"id": 750666477, "node_id": "MDU6TGFiZWw3NTA2NjY0Nzc=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/release%20blocker", "name": "release blocker", "color": "000000", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/freedomofpress/securedrop/milestones/42", "html_url": "https://github.com/freedomofpress/securedrop/milestone/42", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/milestones/42/labels", "id": 3037554, "node_id": "MDk6TWlsZXN0b25lMzAzNzU1NA==", "number": 42, "title": "0.7", "description": "(Release date to match Tails 3.7 release date in https://tails.boum.org/contribute/calendar/). See also the [detailed i18n timeline](https://forum.securedrop.club/t/about-the-translations-category/16). Feature freeze is April 24 EOD. String freeze is May 1 EOD.\r\n\r\nUpdate May 7, 2018: Release was deferred by one week (to May 15) to allow for more time to QA some late stage fixes.", "creator": {"login": "redshiftzero", "id": 7832803, "node_id": "MDQ6VXNlcjc4MzI4MDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7832803?v=4", "gravatar_id": "", "url": "https://api.github.com/users/redshiftzero", "html_url": "https://github.com/redshiftzero", "followers_url": "https://api.github.com/users/redshiftzero/followers", "following_url": "https://api.github.com/users/redshiftzero/following{/other_user}", "gists_url": "https://api.github.com/users/redshiftzero/gists{/gist_id}", "starred_url": "https://api.github.com/users/redshiftzero/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/redshiftzero/subscriptions", "organizations_url": "https://api.github.com/users/redshiftzero/orgs", "repos_url": "https://api.github.com/users/redshiftzero/repos", "events_url": "https://api.github.com/users/redshiftzero/events{/privacy}", "received_events_url": "https://api.github.com/users/redshiftzero/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 75, "state": "closed", "created_at": "2018-01-15T23:46:19Z", "updated_at": "2018-05-16T05:33:37Z", "due_on": "2018-05-15T07:00:00Z", "closed_at": "2018-05-16T05:33:37Z"}, "comments": 3, "created_at": "2018-05-15T21:23:33Z", "updated_at": "2018-05-15T22:59:38Z", "closed_at": "2018-05-15T22:59:38Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "# Bug\r\n\r\n## Description\r\n\r\nThe 0.7.0 GUI updater reports new versions even when it's running the latest. Just ran a pre-flight check with the 0.7.0 tag, checked out inside a Tails VM. The install portion completed fine. So did `./securedrop-admin tailsconfig`. However, after finishing, it popped up the GUI declaring there were new updates. Which there definitely should not be, given that 0.7.0 is the latest release.\r\n\r\nAfter a reboot of the Tails VM, the GUI updater displayed again, prompting to install updates. I accepted. Here's the detailed output: https://gist.github.com/conorsch/2e2da8fb909df067b693949474ef945c\r\n\r\n\r\n\r\n## Steps to Reproduce\r\n\r\nSee above.\r\n\r\n## Expected Behavior\r\n\r\n0.7.0 is determined to be latest release; no further prompting. \r\n\r\n## Actual Behavior\r\n\r\nPrompts for updates even though 0.7.0 is latest release.\r\n\r\n## Comments\r\n", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3426/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3426/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3405", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3405/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3405/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3405/events", "html_url": "https://github.com/freedomofpress/securedrop/issues/3405", "id": 322975033, "node_id": "MDU6SXNzdWUzMjI5NzUwMzM=", "number": 3405, "title": "Securedrop-admin update should verify tag signature prior to checking out the tag", "user": {"login": "emkll", "id": 15223328, "node_id": "MDQ6VXNlcjE1MjIzMzI4", "avatar_url": "https://avatars.githubusercontent.com/u/15223328?v=4", "gravatar_id": "", "url": "https://api.github.com/users/emkll", "html_url": "https://github.com/emkll", "followers_url": "https://api.github.com/users/emkll/followers", "following_url": "https://api.github.com/users/emkll/following{/other_user}", "gists_url": "https://api.github.com/users/emkll/gists{/gist_id}", "starred_url": "https://api.github.com/users/emkll/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/emkll/subscriptions", "organizations_url": "https://api.github.com/users/emkll/orgs", "repos_url": "https://api.github.com/users/emkll/repos", "events_url": "https://api.github.com/users/emkll/events{/privacy}", "received_events_url": "https://api.github.com/users/emkll/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}, {"id": 192545295, "node_id": "MDU6TGFiZWwxOTI1NDUyOTU=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/security", "name": "security", "color": "bfdadc", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "redshiftzero", "id": 7832803, "node_id": "MDQ6VXNlcjc4MzI4MDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7832803?v=4", "gravatar_id": "", "url": "https://api.github.com/users/redshiftzero", "html_url": "https://github.com/redshiftzero", "followers_url": "https://api.github.com/users/redshiftzero/followers", "following_url": "https://api.github.com/users/redshiftzero/following{/other_user}", "gists_url": "https://api.github.com/users/redshiftzero/gists{/gist_id}", "starred_url": "https://api.github.com/users/redshiftzero/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/redshiftzero/subscriptions", "organizations_url": "https://api.github.com/users/redshiftzero/orgs", "repos_url": "https://api.github.com/users/redshiftzero/repos", "events_url": "https://api.github.com/users/redshiftzero/events{/privacy}", "received_events_url": "https://api.github.com/users/redshiftzero/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "redshiftzero", "id": 7832803, "node_id": "MDQ6VXNlcjc4MzI4MDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7832803?v=4", "gravatar_id": "", "url": "https://api.github.com/users/redshiftzero", "html_url": "https://github.com/redshiftzero", "followers_url": "https://api.github.com/users/redshiftzero/followers", "following_url": "https://api.github.com/users/redshiftzero/following{/other_user}", "gists_url": "https://api.github.com/users/redshiftzero/gists{/gist_id}", "starred_url": "https://api.github.com/users/redshiftzero/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/redshiftzero/subscriptions", "organizations_url": "https://api.github.com/users/redshiftzero/orgs", "repos_url": "https://api.github.com/users/redshiftzero/repos", "events_url": "https://api.github.com/users/redshiftzero/events{/privacy}", "received_events_url": "https://api.github.com/users/redshiftzero/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/freedomofpress/securedrop/milestones/42", "html_url": "https://github.com/freedomofpress/securedrop/milestone/42", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/milestones/42/labels", "id": 3037554, "node_id": "MDk6TWlsZXN0b25lMzAzNzU1NA==", "number": 42, "title": "0.7", "description": "(Release date to match Tails 3.7 release date in https://tails.boum.org/contribute/calendar/). See also the [detailed i18n timeline](https://forum.securedrop.club/t/about-the-translations-category/16). Feature freeze is April 24 EOD. String freeze is May 1 EOD.\r\n\r\nUpdate May 7, 2018: Release was deferred by one week (to May 15) to allow for more time to QA some late stage fixes.", "creator": {"login": "redshiftzero", "id": 7832803, "node_id": "MDQ6VXNlcjc4MzI4MDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7832803?v=4", "gravatar_id": "", "url": "https://api.github.com/users/redshiftzero", "html_url": "https://github.com/redshiftzero", "followers_url": "https://api.github.com/users/redshiftzero/followers", "following_url": "https://api.github.com/users/redshiftzero/following{/other_user}", "gists_url": "https://api.github.com/users/redshiftzero/gists{/gist_id}", "starred_url": "https://api.github.com/users/redshiftzero/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/redshiftzero/subscriptions", "organizations_url": "https://api.github.com/users/redshiftzero/orgs", "repos_url": "https://api.github.com/users/redshiftzero/repos", "events_url": "https://api.github.com/users/redshiftzero/events{/privacy}", "received_events_url": "https://api.github.com/users/redshiftzero/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 75, "state": "closed", "created_at": "2018-01-15T23:46:19Z", "updated_at": "2018-05-16T05:33:37Z", "due_on": "2018-05-15T07:00:00Z", "closed_at": "2018-05-16T05:33:37Z"}, "comments": 1, "created_at": "2018-05-14T20:46:28Z", "updated_at": "2018-05-14T22:35:10Z", "closed_at": "2018-05-14T22:35:10Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "# Bug\r\n## Description\r\nSecureDrop admin update logic introduced in 0.6 checks out a tag before verifying that it was properly signed with the SecureDrop release signing key. Should an incorrect (non-production-ready) or malicious tag be selected, the error will appear to an administrator once. Should the admin ignore this error, the SecureDrop repository may no longer update to production-ready code.\r\n\r\nAs a SecureDrop administrator, I would like to check out and run only code that has been certified by the SecureDrop team as production ready.\r\n\r\n## Expected Behavior\r\nupdater should only checkout code if the signature is valid. The order should be as follows:\r\n1- fetch\r\n2- tag -v\r\n3- checkout\r\n\r\n## Actual Behavior\r\n\r\nThe order is:\r\n1- fetch\r\n2- checkout\r\n3- tag -v\r\n\r\n\r\n## Comments\r\n\r\nAll upgrades to 0.7 should use the manual method of validating tags in the order described as above in the blog post, and can safely use the GUI updater in subsequent SecureDrop releases.\r\n", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3405/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3405/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3404", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3404/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3404/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3404/events", "html_url": "https://github.com/freedomofpress/securedrop/pull/3404", "id": 322974240, "node_id": "MDExOlB1bGxSZXF1ZXN0MTg3OTQ1NDY2", "number": 3404, "title": "docs: add missing directory in developper instructions", "user": {"login": "ghost", "id": 10137, "node_id": "MDQ6VXNlcjEwMTM3", "avatar_url": "https://avatars.githubusercontent.com/u/10137?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ghost", "html_url": "https://github.com/ghost", "followers_url": "https://api.github.com/users/ghost/followers", "following_url": "https://api.github.com/users/ghost/following{/other_user}", "gists_url": "https://api.github.com/users/ghost/gists{/gist_id}", "starred_url": "https://api.github.com/users/ghost/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ghost/subscriptions", "organizations_url": "https://api.github.com/users/ghost/orgs", "repos_url": "https://api.github.com/users/ghost/repos", "events_url": "https://api.github.com/users/ghost/events{/privacy}", "received_events_url": "https://api.github.com/users/ghost/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}, {"id": 118465787, "node_id": "MDU6TGFiZWwxMTg0NjU3ODc=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/docs", "name": "docs", "color": "d4c5f9", "default": false, "description": null}, {"id": 660721238, "node_id": "MDU6TGFiZWw2NjA3MjEyMzg=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/goals:%20improve%20developer%20workflow", "name": "goals: improve developer workflow", "color": "0e8a16", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2018-05-14T20:44:11Z", "updated_at": "2018-05-14T22:37:47Z", "closed_at": "2018-05-14T22:37:47Z", "author_association": "NONE", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/freedomofpress/securedrop/pulls/3404", "html_url": "https://github.com/freedomofpress/securedrop/pull/3404", "diff_url": "https://github.com/freedomofpress/securedrop/pull/3404.diff", "patch_url": "https://github.com/freedomofpress/securedrop/pull/3404.patch", "merged_at": "2018-05-14T22:37:47Z"}, "body": "## Status\r\n\r\nReady for review\r\n\r\n## Description of Changes\r\n\r\nContributes to #3403\r\n\r\nThe instructions in the previous chapter recommend to clone, meaning\r\nthe user is not at the root of the securedrop directory. If they\r\njust cd securedrop as recommended, they won't be in the directory\r\nwhich is valid to run the following commands.\r\n\r\n## Testing\r\n\r\nFollow the instructions in the docs/development/setup_development.rst to the letter\r\n\r\n## Deployment\r\n\r\nN/A\r\n\r\n## Checklist\r\n\r\n### If you made changes to documentation:\r\n\r\n- [x] Doc linting (`make docs-lint`) passed locally\r\n", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3404/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3404/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3403", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3403/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3403/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3403/events", "html_url": "https://github.com/freedomofpress/securedrop/issues/3403", "id": 322968272, "node_id": "MDU6SXNzdWUzMjI5NjgyNzI=", "number": 3403, "title": "clarify setup docs for developers", "user": {"login": "kstohr", "id": 8218231, "node_id": "MDQ6VXNlcjgyMTgyMzE=", "avatar_url": "https://avatars.githubusercontent.com/u/8218231?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kstohr", "html_url": "https://github.com/kstohr", "followers_url": "https://api.github.com/users/kstohr/followers", "following_url": "https://api.github.com/users/kstohr/following{/other_user}", "gists_url": "https://api.github.com/users/kstohr/gists{/gist_id}", "starred_url": "https://api.github.com/users/kstohr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kstohr/subscriptions", "organizations_url": "https://api.github.com/users/kstohr/orgs", "repos_url": "https://api.github.com/users/kstohr/repos", "events_url": "https://api.github.com/users/kstohr/events{/privacy}", "received_events_url": "https://api.github.com/users/kstohr/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}, {"id": 660721238, "node_id": "MDU6TGFiZWw2NjA3MjEyMzg=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/goals:%20improve%20developer%20workflow", "name": "goals: improve developer workflow", "color": "0e8a16", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 8, "created_at": "2018-05-14T20:26:48Z", "updated_at": "2018-07-31T04:22:22Z", "closed_at": "2018-07-31T04:22:22Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Update the  [Setting up the development environment](https://docs.securedrop.org/en/release-0.6/development/setup_development.html) doc to clarify a few setup issues: \r\n\r\n- highlight that the parent/project directory and a sub-directory are both named 'securedrop';  contributors need to cd into the sub_directory before running `make dev`  after installing the docker image. ([resolved](https://docs.securedrop.org/en/latest/development/setup_development.html#using-the-docker-environment))\r\n\r\n- clarify that securedrop is built with Python 2.7.6. We are migrating to 3.0. (For example, the journalist app uses Python 3). \r\n\r\n- include links for options to install dependencies using homebrew.  \r\n\r\n## User Research Evidence\r\n\r\nThese three issues were common stumbling blocks for contributors at the Pycon developer sprint. \r\n\r\n## User Stories\r\n", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3403/reactions", "total_count": 2, "+1": 1, "-1": 0, "laugh": 0, "hooray": 1, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3403/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3398", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3398/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3398/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3398/events", "html_url": "https://github.com/freedomofpress/securedrop/pull/3398", "id": 322849759, "node_id": "MDExOlB1bGxSZXF1ZXN0MTg3ODUyMDk4", "number": 3398, "title": "add /var/lib/securedrop/tmp to the docker development environment", "user": {"login": "ghost", "id": 10137, "node_id": "MDQ6VXNlcjEwMTM3", "avatar_url": "https://avatars.githubusercontent.com/u/10137?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ghost", "html_url": "https://github.com/ghost", "followers_url": "https://api.github.com/users/ghost/followers", "following_url": "https://api.github.com/users/ghost/following{/other_user}", "gists_url": "https://api.github.com/users/ghost/gists{/gist_id}", "starred_url": "https://api.github.com/users/ghost/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ghost/subscriptions", "organizations_url": "https://api.github.com/users/ghost/orgs", "repos_url": "https://api.github.com/users/ghost/repos", "events_url": "https://api.github.com/users/ghost/events{/privacy}", "received_events_url": "https://api.github.com/users/ghost/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}, {"id": 616447641, "node_id": "MDU6TGFiZWw2MTY0NDc2NDE=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/development%20env", "name": "development env", "color": "bfd4f2", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2018-05-14T14:47:16Z", "updated_at": "2018-05-14T18:33:36Z", "closed_at": "2018-05-14T18:33:26Z", "author_association": "NONE", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/freedomofpress/securedrop/pulls/3398", "html_url": "https://github.com/freedomofpress/securedrop/pull/3398", "diff_url": "https://github.com/freedomofpress/securedrop/pull/3398.diff", "patch_url": "https://github.com/freedomofpress/securedrop/pull/3398.patch", "merged_at": "2018-05-14T18:33:26Z"}, "body": "## Status\r\n\r\nReady for review\r\n\r\n## Description of Changes\r\n\r\nOtherwise functions such as Download all will fail because it does not\r\nexist\r\n\r\n## Testing\r\n\r\nTry to **Download all** from the journalist interface in `make dev`\r\n\r\n## Deployment\r\n\r\nN/A\r\n\r\n## Checklist\r\n\r\n### If you made changes to the server application code:\r\n\r\n- [x] Linting (`make ci-lint`) and tests (`make -C securedrop test`) pass in the development container\r\n", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3398/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3398/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3393", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3393/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3393/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3393/events", "html_url": "https://github.com/freedomofpress/securedrop/issues/3393", "id": 322311866, "node_id": "MDU6SXNzdWUzMjIzMTE4NjY=", "number": 3393, "title": "[0.7.0] Journalist Notification error when there is a 2nd install run prior to initial reboot", "user": {"login": "emkll", "id": 15223328, "node_id": "MDQ6VXNlcjE1MjIzMzI4", "avatar_url": "https://avatars.githubusercontent.com/u/15223328?v=4", "gravatar_id": "", "url": "https://api.github.com/users/emkll", "html_url": "https://github.com/emkll", "followers_url": "https://api.github.com/users/emkll/followers", "following_url": "https://api.github.com/users/emkll/following{/other_user}", "gists_url": "https://api.github.com/users/emkll/gists{/gist_id}", "starred_url": "https://api.github.com/users/emkll/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/emkll/subscriptions", "organizations_url": "https://api.github.com/users/emkll/orgs", "repos_url": "https://api.github.com/users/emkll/repos", "events_url": "https://api.github.com/users/emkll/events{/privacy}", "received_events_url": "https://api.github.com/users/emkll/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}, {"id": 385585080, "node_id": "MDU6TGFiZWwzODU1ODUwODA=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/QA:%20Release", "name": "QA: Release", "color": "fbca04", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/freedomofpress/securedrop/milestones/42", "html_url": "https://github.com/freedomofpress/securedrop/milestone/42", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/milestones/42/labels", "id": 3037554, "node_id": "MDk6TWlsZXN0b25lMzAzNzU1NA==", "number": 42, "title": "0.7", "description": "(Release date to match Tails 3.7 release date in https://tails.boum.org/contribute/calendar/). See also the [detailed i18n timeline](https://forum.securedrop.club/t/about-the-translations-category/16). Feature freeze is April 24 EOD. String freeze is May 1 EOD.\r\n\r\nUpdate May 7, 2018: Release was deferred by one week (to May 15) to allow for more time to QA some late stage fixes.", "creator": {"login": "redshiftzero", "id": 7832803, "node_id": "MDQ6VXNlcjc4MzI4MDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7832803?v=4", "gravatar_id": "", "url": "https://api.github.com/users/redshiftzero", "html_url": "https://github.com/redshiftzero", "followers_url": "https://api.github.com/users/redshiftzero/followers", "following_url": "https://api.github.com/users/redshiftzero/following{/other_user}", "gists_url": "https://api.github.com/users/redshiftzero/gists{/gist_id}", "starred_url": "https://api.github.com/users/redshiftzero/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/redshiftzero/subscriptions", "organizations_url": "https://api.github.com/users/redshiftzero/orgs", "repos_url": "https://api.github.com/users/redshiftzero/repos", "events_url": "https://api.github.com/users/redshiftzero/events{/privacy}", "received_events_url": "https://api.github.com/users/redshiftzero/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 75, "state": "closed", "created_at": "2018-01-15T23:46:19Z", "updated_at": "2018-05-16T05:33:37Z", "due_on": "2018-05-15T07:00:00Z", "closed_at": "2018-05-16T05:33:37Z"}, "comments": 3, "created_at": "2018-05-11T14:12:05Z", "updated_at": "2018-05-12T11:25:39Z", "closed_at": "2018-05-12T11:25:39Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "# Bug\r\nUpon activating journalist notifications, running `./securedrop-admin install` before the first daily reboot time  produces a SecureDrop Submissions Error that may confuse administrators. Note that daily journalist notification emails are correctly sent and received (if configuration is correct), and that the error message is potentially misleading.\r\n\r\n## Description\r\n\r\n* Install/upgrade to 0.7\r\n* run `./securedrop-admin install` to enable journalist notifications\r\n* run `./securedrop-admin install` again to enable ssh over local host\r\n\r\nThis will trigger a reboot with a absent `submissions_today.txt` file (it is created once the next cron runs `manage.py were-there-submissions-today`) which will in turn throw a `SecureDrop Submission Error` :\r\n\r\n```\r\n/var/ossec/process_submissions_today.sh failed to find 0/1 submissions boolean in the following OSSEC alert\r\n\r\n>From ossec@freedom.press  Thu May 10 19:53:08 2018\r\nReturn-Path: <ossec@freedom.press>\r\nX-Original-To: root@localhost\r\nDelivered-To: root@localhost\r\nReceived: from notify.ossec.net (localhost [127.0.0.1])\r\n\tby ossec.server (Postfix) with SMTP id 1E5BF180452;\r\n\tThu, 10 May 2018 19:53:08 -0400 (EDT)\r\nTo: <root@localhost>\r\nFrom: OSSEC HIDS <ossec@freedom.press>\r\nTo: <root@localhost>\r\nDate: Thu, 10 May 2018 19:53:08 -0400\r\nSubject: OSSEC Notification - mon - Alert level 7\r\nMessage-Id: <20180510235308.1E5BF180452@ossec.server>\r\n\r\n\r\nOSSEC HIDS Notification.\r\n2018 May 10 19:53:03\r\n\r\nReceived From: mon->syscheck\r\nRule: 550 fired (level 7) -> \"Integrity checksum changed.\"\r\nPortion of the log(s):\r\n\r\nIntegrity checksum changed for: '/var/ossec/.procmailrc'\r\nSize changed from '162' to '261'\r\nWhat changed:\r\n6,8c6,13\r\n< :0 c\r\n< *^To:.*root.*\r\n< |/var/ossec/send_encrypted_alarm.sh\r\n---\r\n>\r\n> :0 B\r\n> * /var/lib/securedrop/submissions_today.txt\r\n> |/var/ossec/process_submissions_today.sh\r\n>\r\n> :0 E\r\n> * ^To:.*root.*\r\n> |/var/ossec/send_encrypted_alarm.sh ossec\r\nOld md5sum was: '<oldmd5>'\r\nNew md5sum is : '<newmd5>'\r\nOld sha1sum was: '<oldsha1>'\r\nNew sha1sum is : '<newsha1>'\r\n\r\n\r\n\r\n --END OF NOTIFICATION\r\n\r\n```\r\n## Expected Behavior\r\n\r\nSecureDrop Submissions Error email should not be sent, as the instance is properly configured.\r\n## Actual Behavior\r\nSecureDrop Submissions Error is sent.\r\n## Comments\r\n\r\nGiven how unlikely this is to occur in real-world scenarios and complex this would be to fix at this stage, perhaps a small docs change (or no change at all) for 0.7.0. I can see this happening more frequently for new installs than for existing installs.", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3393/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3393/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3385", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3385/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3385/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3385/events", "html_url": "https://github.com/freedomofpress/securedrop/pull/3385", "id": 321722955, "node_id": "MDExOlB1bGxSZXF1ZXN0MTg3MDM3NDM0", "number": 3385, "title": "Docs various fixes", "user": {"login": "ghost", "id": 10137, "node_id": "MDQ6VXNlcjEwMTM3", "avatar_url": "https://avatars.githubusercontent.com/u/10137?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ghost", "html_url": "https://github.com/ghost", "followers_url": "https://api.github.com/users/ghost/followers", "following_url": "https://api.github.com/users/ghost/following{/other_user}", "gists_url": "https://api.github.com/users/ghost/gists{/gist_id}", "starred_url": "https://api.github.com/users/ghost/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ghost/subscriptions", "organizations_url": "https://api.github.com/users/ghost/orgs", "repos_url": "https://api.github.com/users/ghost/repos", "events_url": "https://api.github.com/users/ghost/events{/privacy}", "received_events_url": "https://api.github.com/users/ghost/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}, {"id": 118465787, "node_id": "MDU6TGFiZWwxMTg0NjU3ODc=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/docs", "name": "docs", "color": "d4c5f9", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2018-05-09T20:54:19Z", "updated_at": "2018-05-10T09:40:18Z", "closed_at": "2018-05-10T09:40:18Z", "author_association": "NONE", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/freedomofpress/securedrop/pulls/3385", "html_url": "https://github.com/freedomofpress/securedrop/pull/3385", "diff_url": "https://github.com/freedomofpress/securedrop/pull/3385.diff", "patch_url": "https://github.com/freedomofpress/securedrop/pull/3385.patch", "merged_at": "2018-05-10T09:40:18Z"}, "body": "## Status\r\n\r\nReady for review\r\n\r\n## Description of Changes\r\n\r\nAn assorted set of small documentation fixes\r\n\r\n## Testing\r\n\r\nN/A\r\n\r\n## Deployment\r\n\r\nN/A\r\n\r\n## Checklist\r\n\r\n### If you made changes to documentation:\r\n\r\n- [x] Doc linting (`make docs-lint`) passed locally\r\n", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3385/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3385/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3384", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3384/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3384/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3384/events", "html_url": "https://github.com/freedomofpress/securedrop/pull/3384", "id": 321702619, "node_id": "MDExOlB1bGxSZXF1ZXN0MTg3MDIxNzY4", "number": 3384, "title": "[0.7.0] ossec: resolve journalist notification racing with reboots", "user": {"login": "ghost", "id": 10137, "node_id": "MDQ6VXNlcjEwMTM3", "avatar_url": "https://avatars.githubusercontent.com/u/10137?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ghost", "html_url": "https://github.com/ghost", "followers_url": "https://api.github.com/users/ghost/followers", "following_url": "https://api.github.com/users/ghost/following{/other_user}", "gists_url": "https://api.github.com/users/ghost/gists{/gist_id}", "starred_url": "https://api.github.com/users/ghost/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ghost/subscriptions", "organizations_url": "https://api.github.com/users/ghost/orgs", "repos_url": "https://api.github.com/users/ghost/repos", "events_url": "https://api.github.com/users/ghost/events{/privacy}", "received_events_url": "https://api.github.com/users/ghost/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}, {"id": 192539287, "node_id": "MDU6TGFiZWwxOTI1MzkyODc=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/ops/deployment", "name": "ops/deployment", "color": "c7def8", "default": false, "description": null}, {"id": 652909251, "node_id": "MDU6TGFiZWw2NTI5MDkyNTE=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/goals:%20journalist%20experience", "name": "goals: journalist experience", "color": "0e8a16", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/freedomofpress/securedrop/milestones/42", "html_url": "https://github.com/freedomofpress/securedrop/milestone/42", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/milestones/42/labels", "id": 3037554, "node_id": "MDk6TWlsZXN0b25lMzAzNzU1NA==", "number": 42, "title": "0.7", "description": "(Release date to match Tails 3.7 release date in https://tails.boum.org/contribute/calendar/). See also the [detailed i18n timeline](https://forum.securedrop.club/t/about-the-translations-category/16). Feature freeze is April 24 EOD. String freeze is May 1 EOD.\r\n\r\nUpdate May 7, 2018: Release was deferred by one week (to May 15) to allow for more time to QA some late stage fixes.", "creator": {"login": "redshiftzero", "id": 7832803, "node_id": "MDQ6VXNlcjc4MzI4MDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7832803?v=4", "gravatar_id": "", "url": "https://api.github.com/users/redshiftzero", "html_url": "https://github.com/redshiftzero", "followers_url": "https://api.github.com/users/redshiftzero/followers", "following_url": "https://api.github.com/users/redshiftzero/following{/other_user}", "gists_url": "https://api.github.com/users/redshiftzero/gists{/gist_id}", "starred_url": "https://api.github.com/users/redshiftzero/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/redshiftzero/subscriptions", "organizations_url": "https://api.github.com/users/redshiftzero/orgs", "repos_url": "https://api.github.com/users/redshiftzero/repos", "events_url": "https://api.github.com/users/redshiftzero/events{/privacy}", "received_events_url": "https://api.github.com/users/redshiftzero/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 75, "state": "closed", "created_at": "2018-01-15T23:46:19Z", "updated_at": "2018-05-16T05:33:37Z", "due_on": "2018-05-15T07:00:00Z", "closed_at": "2018-05-16T05:33:37Z"}, "comments": 2, "created_at": "2018-05-09T19:48:42Z", "updated_at": "2018-05-09T20:34:49Z", "closed_at": "2018-05-09T20:34:48Z", "author_association": "NONE", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/freedomofpress/securedrop/pulls/3384", "html_url": "https://github.com/freedomofpress/securedrop/pull/3384", "diff_url": "https://github.com/freedomofpress/securedrop/pull/3384.diff", "patch_url": "https://github.com/freedomofpress/securedrop/pull/3384.patch", "merged_at": "2018-05-09T20:34:48Z"}, "body": "## Status\r\n\r\nReady for review\r\n\r\n## Description of Changes\r\n\r\nBackport #3374\r\n\r\nMitigates: #3368 \r\n\r\nThe app server is rebooted every 24h and will send a notification at\r\nboot time. The ossec server is also rebooted and will immediately send\r\nthe email to the journalist, regardless of when the previous mail was\r\nsent (mail frequency is not a feature of ossec-maild). Always running\r\nthe localfile command at boot time is an undocumented OSSEC behavior\r\nhttps://github.com/ossec/ossec-hids/issues/1415 in 2.8.2 as well as\r\n2.9.3.\r\n\r\nThis guarantees exactly one mail will be sent daily.\r\n\r\nSetting the 25 hours frequency element is a safeguard:\r\n\r\n* against the following race a) command runs because the 24h period\r\n  expires, b) the server reboots shortly after because it reboots\r\n  every 24h, c) command runs again after the server is rebooted,\r\n  causing two notifications to be sent in a row\r\n\r\n* in case the server does not reboot for some reason, the notification\r\n  will still be sent every 25h\r\n\r\nFixes: https://github.com/freedomofpress/securedrop/issues/3367\r\n\r\n## Testing\r\n\r\n* Reboot the app server and verify the notification is sent\r\n\r\n## Deployment\r\n\r\nN/A\r\n\r\n## Checklist\r\n\r\n### If you made changes to documentation:\r\n\r\n- [x] Doc linting (`make docs-lint`) passed locally\r\n", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3384/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3384/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3374", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3374/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3374/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3374/events", "html_url": "https://github.com/freedomofpress/securedrop/pull/3374", "id": 320513774, "node_id": "MDExOlB1bGxSZXF1ZXN0MTg2MTU5MTk4", "number": 3374, "title": "ossec: resolve journalist notification racing with reboots", "user": {"login": "ghost", "id": 10137, "node_id": "MDQ6VXNlcjEwMTM3", "avatar_url": "https://avatars.githubusercontent.com/u/10137?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ghost", "html_url": "https://github.com/ghost", "followers_url": "https://api.github.com/users/ghost/followers", "following_url": "https://api.github.com/users/ghost/following{/other_user}", "gists_url": "https://api.github.com/users/ghost/gists{/gist_id}", "starred_url": "https://api.github.com/users/ghost/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ghost/subscriptions", "organizations_url": "https://api.github.com/users/ghost/orgs", "repos_url": "https://api.github.com/users/ghost/repos", "events_url": "https://api.github.com/users/ghost/events{/privacy}", "received_events_url": "https://api.github.com/users/ghost/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}, {"id": 192539287, "node_id": "MDU6TGFiZWwxOTI1MzkyODc=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/ops/deployment", "name": "ops/deployment", "color": "c7def8", "default": false, "description": null}, {"id": 652909251, "node_id": "MDU6TGFiZWw2NTI5MDkyNTE=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/goals:%20journalist%20experience", "name": "goals: journalist experience", "color": "0e8a16", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/freedomofpress/securedrop/milestones/42", "html_url": "https://github.com/freedomofpress/securedrop/milestone/42", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/milestones/42/labels", "id": 3037554, "node_id": "MDk6TWlsZXN0b25lMzAzNzU1NA==", "number": 42, "title": "0.7", "description": "(Release date to match Tails 3.7 release date in https://tails.boum.org/contribute/calendar/). See also the [detailed i18n timeline](https://forum.securedrop.club/t/about-the-translations-category/16). Feature freeze is April 24 EOD. String freeze is May 1 EOD.\r\n\r\nUpdate May 7, 2018: Release was deferred by one week (to May 15) to allow for more time to QA some late stage fixes.", "creator": {"login": "redshiftzero", "id": 7832803, "node_id": "MDQ6VXNlcjc4MzI4MDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7832803?v=4", "gravatar_id": "", "url": "https://api.github.com/users/redshiftzero", "html_url": "https://github.com/redshiftzero", "followers_url": "https://api.github.com/users/redshiftzero/followers", "following_url": "https://api.github.com/users/redshiftzero/following{/other_user}", "gists_url": "https://api.github.com/users/redshiftzero/gists{/gist_id}", "starred_url": "https://api.github.com/users/redshiftzero/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/redshiftzero/subscriptions", "organizations_url": "https://api.github.com/users/redshiftzero/orgs", "repos_url": "https://api.github.com/users/redshiftzero/repos", "events_url": "https://api.github.com/users/redshiftzero/events{/privacy}", "received_events_url": "https://api.github.com/users/redshiftzero/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 75, "state": "closed", "created_at": "2018-01-15T23:46:19Z", "updated_at": "2018-05-16T05:33:37Z", "due_on": "2018-05-15T07:00:00Z", "closed_at": "2018-05-16T05:33:37Z"}, "comments": 15, "created_at": "2018-05-05T14:31:04Z", "updated_at": "2018-05-09T19:56:59Z", "closed_at": "2018-05-09T17:58:43Z", "author_association": "NONE", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/freedomofpress/securedrop/pulls/3374", "html_url": "https://github.com/freedomofpress/securedrop/pull/3374", "diff_url": "https://github.com/freedomofpress/securedrop/pull/3374.diff", "patch_url": "https://github.com/freedomofpress/securedrop/pull/3374.patch", "merged_at": "2018-05-09T17:58:43Z"}, "body": "## Status\r\n\r\nReady for review\r\n\r\n## Description of Changes\r\n\r\nMitigates: #3368 \r\n\r\nThe app server is rebooted every 24h and will send a notification at\r\nboot time. The ossec server is also rebooted and will immediately send\r\nthe email to the journalist, regardless of when the previous mail was\r\nsent (mail frequency is not a feature of ossec-maild). Always running\r\nthe localfile command at boot time is an undocumented OSSEC behavior\r\nhttps://github.com/ossec/ossec-hids/issues/1415 in 2.8.2 as well as\r\n2.9.3.\r\n\r\nThis guarantees exactly one mail will be sent daily.\r\n\r\nSetting the 25 hours frequency element is a safeguard:\r\n\r\n* against the following race a) command runs because the 24h period\r\n  expires, b) the server reboots shortly after because it reboots\r\n  every 24h, c) command runs again after the server is rebooted,\r\n  causing two notifications to be sent in a row\r\n\r\n* in case the server does not reboot for some reason, the notification\r\n  will still be sent every 25h\r\n\r\nFixes: https://github.com/freedomofpress/securedrop/issues/3367\r\n\r\n## Testing\r\n\r\n* Reboot the app server and verify the notification is sent\r\n\r\n## Deployment\r\n\r\nN/A\r\n\r\n## Checklist\r\n\r\n### If you made changes to documentation:\r\n\r\n- [x] Doc linting (`make docs-lint`) passed locally\r\n", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3374/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3374/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3372", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3372/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3372/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3372/events", "html_url": "https://github.com/freedomofpress/securedrop/pull/3372", "id": 320443168, "node_id": "MDExOlB1bGxSZXF1ZXN0MTg2MTEzODA2", "number": 3372, "title": "journalist_notifications: only send alerts every 24h", "user": {"login": "ghost", "id": 10137, "node_id": "MDQ6VXNlcjEwMTM3", "avatar_url": "https://avatars.githubusercontent.com/u/10137?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ghost", "html_url": "https://github.com/ghost", "followers_url": "https://api.github.com/users/ghost/followers", "following_url": "https://api.github.com/users/ghost/following{/other_user}", "gists_url": "https://api.github.com/users/ghost/gists{/gist_id}", "starred_url": "https://api.github.com/users/ghost/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ghost/subscriptions", "organizations_url": "https://api.github.com/users/ghost/orgs", "repos_url": "https://api.github.com/users/ghost/repos", "events_url": "https://api.github.com/users/ghost/events{/privacy}", "received_events_url": "https://api.github.com/users/ghost/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}, {"id": 652909251, "node_id": "MDU6TGFiZWw2NTI5MDkyNTE=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/goals:%20journalist%20experience", "name": "goals: journalist experience", "color": "0e8a16", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/freedomofpress/securedrop/milestones/42", "html_url": "https://github.com/freedomofpress/securedrop/milestone/42", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/milestones/42/labels", "id": 3037554, "node_id": "MDk6TWlsZXN0b25lMzAzNzU1NA==", "number": 42, "title": "0.7", "description": "(Release date to match Tails 3.7 release date in https://tails.boum.org/contribute/calendar/). See also the [detailed i18n timeline](https://forum.securedrop.club/t/about-the-translations-category/16). Feature freeze is April 24 EOD. String freeze is May 1 EOD.\r\n\r\nUpdate May 7, 2018: Release was deferred by one week (to May 15) to allow for more time to QA some late stage fixes.", "creator": {"login": "redshiftzero", "id": 7832803, "node_id": "MDQ6VXNlcjc4MzI4MDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7832803?v=4", "gravatar_id": "", "url": "https://api.github.com/users/redshiftzero", "html_url": "https://github.com/redshiftzero", "followers_url": "https://api.github.com/users/redshiftzero/followers", "following_url": "https://api.github.com/users/redshiftzero/following{/other_user}", "gists_url": "https://api.github.com/users/redshiftzero/gists{/gist_id}", "starred_url": "https://api.github.com/users/redshiftzero/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/redshiftzero/subscriptions", "organizations_url": "https://api.github.com/users/redshiftzero/orgs", "repos_url": "https://api.github.com/users/redshiftzero/repos", "events_url": "https://api.github.com/users/redshiftzero/events{/privacy}", "received_events_url": "https://api.github.com/users/redshiftzero/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 75, "state": "closed", "created_at": "2018-01-15T23:46:19Z", "updated_at": "2018-05-16T05:33:37Z", "due_on": "2018-05-15T07:00:00Z", "closed_at": "2018-05-16T05:33:37Z"}, "comments": 1, "created_at": "2018-05-04T22:01:27Z", "updated_at": "2018-05-05T14:09:34Z", "closed_at": "2018-05-05T14:09:34Z", "author_association": "NONE", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/freedomofpress/securedrop/pulls/3372", "html_url": "https://github.com/freedomofpress/securedrop/pull/3372", "diff_url": "https://github.com/freedomofpress/securedrop/pull/3372.diff", "patch_url": "https://github.com/freedomofpress/securedrop/pull/3372.patch", "merged_at": null}, "body": "## Status\r\n\r\n:red_circle: WIP :red_circle: \r\n\r\n## Description of Changes\r\n\r\nFixes #.\r\n\r\nDo nothing if an alert was received and sent less than 24h ago.\r\n\r\n\r\n## Testing\r\n\r\nHow should the reviewer test this PR?\r\nWrite out any special testing steps here.\r\n\r\n## Deployment\r\n\r\nAny special considerations for deployment? Consider both:\r\n\r\n1. Upgrading existing production instances.\r\n2. New installs.\r\n\r\n## Checklist\r\n\r\n### If you made changes to the server application code:\r\n\r\n- [ ] Linting (`make ci-lint`) and tests (`make -C securedrop test`) pass in the development container\r\n\r\n### If you made changes to `securedrop-admin`:\r\n\r\n- [ ] Linting and tests (`make -C admin test`) pass in the admin development container\r\n\r\n### If you made changes to the system configuration:\r\n\r\n- [ ] [Configuration tests](https://docs.securedrop.org/en/latest/development/testing_configuration_tests.html) pass\r\n\r\n### If you made changes to documentation:\r\n\r\n- [ ] Doc linting (`make docs-lint`) passed locally\r\n", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3372/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3372/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3368", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3368/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3368/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3368/events", "html_url": "https://github.com/freedomofpress/securedrop/issues/3368", "id": 320404043, "node_id": "MDU6SXNzdWUzMjA0MDQwNDM=", "number": 3368, "title": "[0.7.0] Journalist and admin notifications can group and cause \"SecureDrop Submissions Error\"", "user": {"login": "redshiftzero", "id": 7832803, "node_id": "MDQ6VXNlcjc4MzI4MDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7832803?v=4", "gravatar_id": "", "url": "https://api.github.com/users/redshiftzero", "html_url": "https://github.com/redshiftzero", "followers_url": "https://api.github.com/users/redshiftzero/followers", "following_url": "https://api.github.com/users/redshiftzero/following{/other_user}", "gists_url": "https://api.github.com/users/redshiftzero/gists{/gist_id}", "starred_url": "https://api.github.com/users/redshiftzero/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/redshiftzero/subscriptions", "organizations_url": "https://api.github.com/users/redshiftzero/orgs", "repos_url": "https://api.github.com/users/redshiftzero/repos", "events_url": "https://api.github.com/users/redshiftzero/events{/privacy}", "received_events_url": "https://api.github.com/users/redshiftzero/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}, {"id": 385585080, "node_id": "MDU6TGFiZWwzODU1ODUwODA=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/QA:%20Release", "name": "QA: Release", "color": "fbca04", "default": false, "description": null}, {"id": 495896968, "node_id": "MDU6TGFiZWw0OTU4OTY5Njg=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/unable%20to%20reproduce", "name": "unable to reproduce", "color": "fbca04", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/freedomofpress/securedrop/milestones/42", "html_url": "https://github.com/freedomofpress/securedrop/milestone/42", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/milestones/42/labels", "id": 3037554, "node_id": "MDk6TWlsZXN0b25lMzAzNzU1NA==", "number": 42, "title": "0.7", "description": "(Release date to match Tails 3.7 release date in https://tails.boum.org/contribute/calendar/). See also the [detailed i18n timeline](https://forum.securedrop.club/t/about-the-translations-category/16). Feature freeze is April 24 EOD. String freeze is May 1 EOD.\r\n\r\nUpdate May 7, 2018: Release was deferred by one week (to May 15) to allow for more time to QA some late stage fixes.", "creator": {"login": "redshiftzero", "id": 7832803, "node_id": "MDQ6VXNlcjc4MzI4MDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7832803?v=4", "gravatar_id": "", "url": "https://api.github.com/users/redshiftzero", "html_url": "https://github.com/redshiftzero", "followers_url": "https://api.github.com/users/redshiftzero/followers", "following_url": "https://api.github.com/users/redshiftzero/following{/other_user}", "gists_url": "https://api.github.com/users/redshiftzero/gists{/gist_id}", "starred_url": "https://api.github.com/users/redshiftzero/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/redshiftzero/subscriptions", "organizations_url": "https://api.github.com/users/redshiftzero/orgs", "repos_url": "https://api.github.com/users/redshiftzero/repos", "events_url": "https://api.github.com/users/redshiftzero/events{/privacy}", "received_events_url": "https://api.github.com/users/redshiftzero/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 75, "state": "closed", "created_at": "2018-01-15T23:46:19Z", "updated_at": "2018-05-16T05:33:37Z", "due_on": "2018-05-15T07:00:00Z", "closed_at": "2018-05-16T05:33:37Z"}, "comments": 23, "created_at": "2018-05-04T19:45:51Z", "updated_at": "2018-07-29T09:54:23Z", "closed_at": "2018-05-10T16:31:46Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "## Description\r\n\r\nWhile trying to reproduce #3367, I discovered a related issue, where a \"SecureDrop Submissions Error\" is sent to the administrator.\r\n\r\n## Steps to Reproduce\r\n\r\n1. Enable journalist notifications.\r\n2. Reboot the app server (I just powered off the VM)\r\n\r\n## Expected Behavior\r\n\r\nNo journalist notification is sent\r\n\r\n## Actual Behavior\r\n\r\nA notification entitled \"SecureDrop Submissions Error\" is sent to the administrator, clipped:\r\n\r\n```\r\nOSSEC HIDS Notification.\r\n2018 May 04 06:35:13\r\n\r\nReceived From: (app) 10.0.1.4->netstat -tan |grep LISTEN |grep -v 127.0.0.1 | sort\r\nRule: 533 fired (level 7) -> \"Listened ports status (netstat) changed (new port opened or closed).\"\r\nPortion of the log(s):\r\n\r\nossec: output: 'netstat -tan |grep LISTEN |grep -v 127.0.0.1 | sort':\r\ntcp        0      0 0.0.0.0:111             0.0.0.0:*               LISTEN     \r\ntcp        0      0 0.0.0.0:54579           0.0.0.0:*               LISTEN     \r\ntcp6       0      0 :::111                  :::*                    LISTEN     \r\ntcp6       0      0 :::34144                :::*                    LISTEN     \r\nPrevious output:\r\nossec: output: 'netstat -tan |grep LISTEN |grep -v 127.0.0.1 | sort':\r\ntcp        0      0 0.0.0.0:111             0.0.0.0:*               LISTEN     \r\ntcp        0      0 0.0.0.0:35431           0.0.0.0:*               LISTEN     \r\ntcp6       0      0 :::111                  :::*                    LISTEN     \r\ntcp6       0      0 :::34203                :::*                    LISTEN     \r\n\r\n\r\n\r\n --END OF NOTIFICATION\r\n\r\n\r\n\r\nOSSEC HIDS Notification.\r\n2018 May 04 06:35:13\r\n\r\nReceived From: (app) 10.0.1.4->head -1 /var/lib/securedrop/submissions_today.txt | grep '^[0-9]*$'\r\nRule: 400600 fired (level 1) -> \"Boolean value indicating if there were submissions in the past 24h.\"\r\nPortion of the log(s):\r\n\r\nossec: output: 'head -1 /var/lib/securedrop/submissions_today.txt | grep '^[0-9]*$'':\r\n1\r\n```\r\n\r\n## Comments\r\n\r\nI found a similar issue during [review](https://github.com/freedomofpress/securedrop/pull/2803#discussion_r170430840), that should be the first thing to investigate", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3368/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3368/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3367", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3367/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3367/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3367/events", "html_url": "https://github.com/freedomofpress/securedrop/issues/3367", "id": 320379149, "node_id": "MDU6SXNzdWUzMjAzNzkxNDk=", "number": 3367, "title": "[0.7.0] Journalist notification sends email every time the app server is manually restarted", "user": {"login": "emkll", "id": 15223328, "node_id": "MDQ6VXNlcjE1MjIzMzI4", "avatar_url": "https://avatars.githubusercontent.com/u/15223328?v=4", "gravatar_id": "", "url": "https://api.github.com/users/emkll", "html_url": "https://github.com/emkll", "followers_url": "https://api.github.com/users/emkll/followers", "following_url": "https://api.github.com/users/emkll/following{/other_user}", "gists_url": "https://api.github.com/users/emkll/gists{/gist_id}", "starred_url": "https://api.github.com/users/emkll/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/emkll/subscriptions", "organizations_url": "https://api.github.com/users/emkll/orgs", "repos_url": "https://api.github.com/users/emkll/repos", "events_url": "https://api.github.com/users/emkll/events{/privacy}", "received_events_url": "https://api.github.com/users/emkll/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}, {"id": 385585080, "node_id": "MDU6TGFiZWwzODU1ODUwODA=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/QA:%20Release", "name": "QA: Release", "color": "fbca04", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/freedomofpress/securedrop/milestones/42", "html_url": "https://github.com/freedomofpress/securedrop/milestone/42", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/milestones/42/labels", "id": 3037554, "node_id": "MDk6TWlsZXN0b25lMzAzNzU1NA==", "number": 42, "title": "0.7", "description": "(Release date to match Tails 3.7 release date in https://tails.boum.org/contribute/calendar/). See also the [detailed i18n timeline](https://forum.securedrop.club/t/about-the-translations-category/16). Feature freeze is April 24 EOD. String freeze is May 1 EOD.\r\n\r\nUpdate May 7, 2018: Release was deferred by one week (to May 15) to allow for more time to QA some late stage fixes.", "creator": {"login": "redshiftzero", "id": 7832803, "node_id": "MDQ6VXNlcjc4MzI4MDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7832803?v=4", "gravatar_id": "", "url": "https://api.github.com/users/redshiftzero", "html_url": "https://github.com/redshiftzero", "followers_url": "https://api.github.com/users/redshiftzero/followers", "following_url": "https://api.github.com/users/redshiftzero/following{/other_user}", "gists_url": "https://api.github.com/users/redshiftzero/gists{/gist_id}", "starred_url": "https://api.github.com/users/redshiftzero/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/redshiftzero/subscriptions", "organizations_url": "https://api.github.com/users/redshiftzero/orgs", "repos_url": "https://api.github.com/users/redshiftzero/repos", "events_url": "https://api.github.com/users/redshiftzero/events{/privacy}", "received_events_url": "https://api.github.com/users/redshiftzero/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 75, "state": "closed", "created_at": "2018-01-15T23:46:19Z", "updated_at": "2018-05-16T05:33:37Z", "due_on": "2018-05-15T07:00:00Z", "closed_at": "2018-05-16T05:33:37Z"}, "comments": 2, "created_at": "2018-05-04T18:19:22Z", "updated_at": "2018-07-29T09:54:23Z", "closed_at": "2018-05-09T17:58:43Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "# Bug\r\n\r\n## Description\r\n\r\nEvery time a SecureDrop instance running 0.7.0~rc2 is rebooted, a journalist notification indicating that there's a new submission is sent, despite there not being any new submissions. Note that this particular instance was upgraded from 0.6.\r\n\r\n## Steps to Reproduce\r\n\r\n* Install 0.7.0~rc2 and enable journalist notifications\r\n* Press the power button on the instance to initiate shutdown of the app server\r\n* Press the power button again to start the app server\r\n* Observe an email in the journalist inbox stating that `There has been submission activity in the past 24 hours.`\r\n\r\n## Expected Behavior\r\n\r\nThe email should only be sent at a regular interval to minimize information leakage and the information sent to journalists should be accurate.\r\n\r\n## Actual Behavior\r\n\r\nThe email is sent at every instance reboot and the information sent to the journalist is not accurate.\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3367/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3367/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3363", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3363/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3363/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3363/events", "html_url": "https://github.com/freedomofpress/securedrop/issues/3363", "id": 320226916, "node_id": "MDU6SXNzdWUzMjAyMjY5MTY=", "number": 3363, "title": "use-tor-browser.html has a non-absolute URL to Tor Project", "user": {"login": "heartsucker", "id": 3998464, "node_id": "MDQ6VXNlcjM5OTg0NjQ=", "avatar_url": "https://avatars.githubusercontent.com/u/3998464?v=4", "gravatar_id": "", "url": "https://api.github.com/users/heartsucker", "html_url": "https://github.com/heartsucker", "followers_url": "https://api.github.com/users/heartsucker/followers", "following_url": "https://api.github.com/users/heartsucker/following{/other_user}", "gists_url": "https://api.github.com/users/heartsucker/gists{/gist_id}", "starred_url": "https://api.github.com/users/heartsucker/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/heartsucker/subscriptions", "organizations_url": "https://api.github.com/users/heartsucker/orgs", "repos_url": "https://api.github.com/users/heartsucker/repos", "events_url": "https://api.github.com/users/heartsucker/events{/privacy}", "received_events_url": "https://api.github.com/users/heartsucker/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}, {"id": 475977399, "node_id": "MDU6TGFiZWw0NzU5NzczOTk=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/source%20interface%20(SI)", "name": "source interface (SI)", "color": "f9d0c4", "default": false, "description": ""}, {"id": 520554056, "node_id": "MDU6TGFiZWw1MjA1NTQwNTY=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/UX", "name": "UX", "color": "5319e7", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2018-05-04T10:34:50Z", "updated_at": "2018-05-09T08:46:53Z", "closed_at": "2018-05-09T08:46:53Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "# Bug\r\n\r\n## Description\r\n\r\nIn `use-tor-browser.html` the anchor to Tor Project is this:\r\n\r\n```html\r\n<p>{{ gettext('We <strong>strongly advise</strong> you to use the <a href=\"www.torproject.org/projects/torbrowser.html\">Tor browser</a> instead.') }}</p>\r\n```\r\n\r\nThis still points to SecureDrop because it doesn't have the protocol prepended to the URL.", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3363/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3363/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3354", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3354/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3354/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3354/events", "html_url": "https://github.com/freedomofpress/securedrop/issues/3354", "id": 319934640, "node_id": "MDU6SXNzdWUzMTk5MzQ2NDA=", "number": 3354, "title": "[0.7.0] Enable ssh over tor config is automatically populated with invalid response", "user": {"login": "emkll", "id": 15223328, "node_id": "MDQ6VXNlcjE1MjIzMzI4", "avatar_url": "https://avatars.githubusercontent.com/u/15223328?v=4", "gravatar_id": "", "url": "https://api.github.com/users/emkll", "html_url": "https://github.com/emkll", "followers_url": "https://api.github.com/users/emkll/followers", "following_url": "https://api.github.com/users/emkll/following{/other_user}", "gists_url": "https://api.github.com/users/emkll/gists{/gist_id}", "starred_url": "https://api.github.com/users/emkll/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/emkll/subscriptions", "organizations_url": "https://api.github.com/users/emkll/orgs", "repos_url": "https://api.github.com/users/emkll/repos", "events_url": "https://api.github.com/users/emkll/events{/privacy}", "received_events_url": "https://api.github.com/users/emkll/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}, {"id": 385585080, "node_id": "MDU6TGFiZWwzODU1ODUwODA=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/QA:%20Release", "name": "QA: Release", "color": "fbca04", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "redshiftzero", "id": 7832803, "node_id": "MDQ6VXNlcjc4MzI4MDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7832803?v=4", "gravatar_id": "", "url": "https://api.github.com/users/redshiftzero", "html_url": "https://github.com/redshiftzero", "followers_url": "https://api.github.com/users/redshiftzero/followers", "following_url": "https://api.github.com/users/redshiftzero/following{/other_user}", "gists_url": "https://api.github.com/users/redshiftzero/gists{/gist_id}", "starred_url": "https://api.github.com/users/redshiftzero/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/redshiftzero/subscriptions", "organizations_url": "https://api.github.com/users/redshiftzero/orgs", "repos_url": "https://api.github.com/users/redshiftzero/repos", "events_url": "https://api.github.com/users/redshiftzero/events{/privacy}", "received_events_url": "https://api.github.com/users/redshiftzero/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "redshiftzero", "id": 7832803, "node_id": "MDQ6VXNlcjc4MzI4MDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7832803?v=4", "gravatar_id": "", "url": "https://api.github.com/users/redshiftzero", "html_url": "https://github.com/redshiftzero", "followers_url": "https://api.github.com/users/redshiftzero/followers", "following_url": "https://api.github.com/users/redshiftzero/following{/other_user}", "gists_url": "https://api.github.com/users/redshiftzero/gists{/gist_id}", "starred_url": "https://api.github.com/users/redshiftzero/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/redshiftzero/subscriptions", "organizations_url": "https://api.github.com/users/redshiftzero/orgs", "repos_url": "https://api.github.com/users/redshiftzero/repos", "events_url": "https://api.github.com/users/redshiftzero/events{/privacy}", "received_events_url": "https://api.github.com/users/redshiftzero/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/freedomofpress/securedrop/milestones/42", "html_url": "https://github.com/freedomofpress/securedrop/milestone/42", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/milestones/42/labels", "id": 3037554, "node_id": "MDk6TWlsZXN0b25lMzAzNzU1NA==", "number": 42, "title": "0.7", "description": "(Release date to match Tails 3.7 release date in https://tails.boum.org/contribute/calendar/). See also the [detailed i18n timeline](https://forum.securedrop.club/t/about-the-translations-category/16). Feature freeze is April 24 EOD. String freeze is May 1 EOD.\r\n\r\nUpdate May 7, 2018: Release was deferred by one week (to May 15) to allow for more time to QA some late stage fixes.", "creator": {"login": "redshiftzero", "id": 7832803, "node_id": "MDQ6VXNlcjc4MzI4MDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7832803?v=4", "gravatar_id": "", "url": "https://api.github.com/users/redshiftzero", "html_url": "https://github.com/redshiftzero", "followers_url": "https://api.github.com/users/redshiftzero/followers", "following_url": "https://api.github.com/users/redshiftzero/following{/other_user}", "gists_url": "https://api.github.com/users/redshiftzero/gists{/gist_id}", "starred_url": "https://api.github.com/users/redshiftzero/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/redshiftzero/subscriptions", "organizations_url": "https://api.github.com/users/redshiftzero/orgs", "repos_url": "https://api.github.com/users/redshiftzero/repos", "events_url": "https://api.github.com/users/redshiftzero/events{/privacy}", "received_events_url": "https://api.github.com/users/redshiftzero/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 75, "state": "closed", "created_at": "2018-01-15T23:46:19Z", "updated_at": "2018-05-16T05:33:37Z", "due_on": "2018-05-15T07:00:00Z", "closed_at": "2018-05-16T05:33:37Z"}, "comments": 5, "created_at": "2018-05-03T14:03:30Z", "updated_at": "2018-05-03T20:33:49Z", "closed_at": "2018-05-03T20:33:49Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "# Bug\r\n\r\n## Description\r\n'LAN' setting is not persisted to `site-specific` and must be re-entered at every `./securedrop-admin sdconfig` run\r\n## Steps to Reproduce\r\n\r\n* run `./securedrop-admin sdconfig`\r\n* when prompted for `Enable SSH over Tor (recommended) or LAN`, set `LAN`\r\n* inspect `install_files/ansible-base/group_vars/all/site-specific` and observe `enable_ssh_over_tor: false`\r\n* run `./securedrop-admin sdconfig` and observe that the default response for the `Enable SSH over Tor (recommended) or LAN` is no, and requires user input to change back to `LAN`\r\n\r\n## Expected Behavior\r\n`./securedrop-admin sdconfig` should populate default responses based on current SecureDrop instance configuration.\r\n\r\n## Actual Behavior\r\nThe `Enable SSH over Tor (recommended) or LAN` field is automatically populated with an invalid response.\r\n", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3354/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3354/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3333", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3333/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3333/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3333/events", "html_url": "https://github.com/freedomofpress/securedrop/issues/3333", "id": 319298032, "node_id": "MDU6SXNzdWUzMTkyOTgwMzI=", "number": 3333, "title": "CSRFError on source interface with HTTPS", "user": {"login": "redshiftzero", "id": 7832803, "node_id": "MDQ6VXNlcjc4MzI4MDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7832803?v=4", "gravatar_id": "", "url": "https://api.github.com/users/redshiftzero", "html_url": "https://github.com/redshiftzero", "followers_url": "https://api.github.com/users/redshiftzero/followers", "following_url": "https://api.github.com/users/redshiftzero/following{/other_user}", "gists_url": "https://api.github.com/users/redshiftzero/gists{/gist_id}", "starred_url": "https://api.github.com/users/redshiftzero/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/redshiftzero/subscriptions", "organizations_url": "https://api.github.com/users/redshiftzero/orgs", "repos_url": "https://api.github.com/users/redshiftzero/repos", "events_url": "https://api.github.com/users/redshiftzero/events{/privacy}", "received_events_url": "https://api.github.com/users/redshiftzero/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}, {"id": 157793311, "node_id": "MDU6TGFiZWwxNTc3OTMzMTE=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/priority/high", "name": "priority/high", "color": "e64ef4", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": {"login": "redshiftzero", "id": 7832803, "node_id": "MDQ6VXNlcjc4MzI4MDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7832803?v=4", "gravatar_id": "", "url": "https://api.github.com/users/redshiftzero", "html_url": "https://github.com/redshiftzero", "followers_url": "https://api.github.com/users/redshiftzero/followers", "following_url": "https://api.github.com/users/redshiftzero/following{/other_user}", "gists_url": "https://api.github.com/users/redshiftzero/gists{/gist_id}", "starred_url": "https://api.github.com/users/redshiftzero/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/redshiftzero/subscriptions", "organizations_url": "https://api.github.com/users/redshiftzero/orgs", "repos_url": "https://api.github.com/users/redshiftzero/repos", "events_url": "https://api.github.com/users/redshiftzero/events{/privacy}", "received_events_url": "https://api.github.com/users/redshiftzero/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "redshiftzero", "id": 7832803, "node_id": "MDQ6VXNlcjc4MzI4MDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7832803?v=4", "gravatar_id": "", "url": "https://api.github.com/users/redshiftzero", "html_url": "https://github.com/redshiftzero", "followers_url": "https://api.github.com/users/redshiftzero/followers", "following_url": "https://api.github.com/users/redshiftzero/following{/other_user}", "gists_url": "https://api.github.com/users/redshiftzero/gists{/gist_id}", "starred_url": "https://api.github.com/users/redshiftzero/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/redshiftzero/subscriptions", "organizations_url": "https://api.github.com/users/redshiftzero/orgs", "repos_url": "https://api.github.com/users/redshiftzero/repos", "events_url": "https://api.github.com/users/redshiftzero/events{/privacy}", "received_events_url": "https://api.github.com/users/redshiftzero/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/freedomofpress/securedrop/milestones/42", "html_url": "https://github.com/freedomofpress/securedrop/milestone/42", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/milestones/42/labels", "id": 3037554, "node_id": "MDk6TWlsZXN0b25lMzAzNzU1NA==", "number": 42, "title": "0.7", "description": "(Release date to match Tails 3.7 release date in https://tails.boum.org/contribute/calendar/). See also the [detailed i18n timeline](https://forum.securedrop.club/t/about-the-translations-category/16). Feature freeze is April 24 EOD. String freeze is May 1 EOD.\r\n\r\nUpdate May 7, 2018: Release was deferred by one week (to May 15) to allow for more time to QA some late stage fixes.", "creator": {"login": "redshiftzero", "id": 7832803, "node_id": "MDQ6VXNlcjc4MzI4MDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7832803?v=4", "gravatar_id": "", "url": "https://api.github.com/users/redshiftzero", "html_url": "https://github.com/redshiftzero", "followers_url": "https://api.github.com/users/redshiftzero/followers", "following_url": "https://api.github.com/users/redshiftzero/following{/other_user}", "gists_url": "https://api.github.com/users/redshiftzero/gists{/gist_id}", "starred_url": "https://api.github.com/users/redshiftzero/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/redshiftzero/subscriptions", "organizations_url": "https://api.github.com/users/redshiftzero/orgs", "repos_url": "https://api.github.com/users/redshiftzero/repos", "events_url": "https://api.github.com/users/redshiftzero/events{/privacy}", "received_events_url": "https://api.github.com/users/redshiftzero/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 75, "state": "closed", "created_at": "2018-01-15T23:46:19Z", "updated_at": "2018-05-16T05:33:37Z", "due_on": "2018-05-15T07:00:00Z", "closed_at": "2018-05-16T05:33:37Z"}, "comments": 2, "created_at": "2018-05-01T19:23:01Z", "updated_at": "2018-05-03T18:16:28Z", "closed_at": "2018-05-03T18:16:28Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "## Description\r\n\r\nThe source interface is not functional for _some_ instances using HTTPS (though not all, as there are some sites that are using HTTPS without issue). \r\n\r\nI'm writing out what I know so far based on talking to impacted sites directly and https://forum.securedrop.club/t/incorrect-docs-for-https-on-the-source-interface-issues-after-configuration/657/3 \r\n\r\n## Steps to Reproduce\r\n\r\nI do not have full steps to reproduce. This needs further investigation. There is a ticket for end-to-end testing of the HTTPS flow at #3297.\r\n\r\nSo far:\r\n\r\n1. Apply HTTPS on source interface \r\n2. Try to submit a document\r\n\r\n## Expected Behavior\r\n\r\nA source is able to submit a document and all is well.\r\n\r\n## Actual Behavior\r\n\r\nYou are logged out: \r\n\r\n![image](https://user-images.githubusercontent.com/7832803/39488472-49ccc286-4d37-11e8-9fee-6df9940efc18.png)\r\n\r\n## Comments\r\n\r\nI can report from my debugging with a site that experienced this issue that the issue producing the logout was a `CSRFError`. The `errorhandler` in `securedrop/source_app/__init__.py` produced the observed behavior:\r\n\r\n```\r\n    @app.errorhandler(CSRFError)\r\n    def handle_csrf_error(e):\r\n        msg = render_template('session_timeout.html')\r\n        session.clear()\r\n        flash(Markup(msg), \"important\")\r\n        return redirect(url_for('main.index'))\r\n```\r\n\r\nThe specific exception causing the CSRF validation failure was `400 Bad Request: The referrer header is missing`. This Referrer checking is due to [`WTF_CSRF_SSL_STRICT` which is by default on](https://flask-wtf.readthedocs.io/en/stable/config.html). \r\n\r\nIndeed, in `/etc/apache2/sites-available/source.conf`, replacing:\r\n\r\n```\r\nHeader set Referrer-Policy \"no-referrer\"\r\n```\r\n\r\nwith \r\n\r\n```\r\nHeader set Referrer-Policy \"same-origin\"\r\n```\r\n\r\nresolves the issue as reported by a public SecureDrop user [here](https://forum.securedrop.club/t/incorrect-docs-for-https-on-the-source-interface-issues-after-configuration/657/4). ", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3333/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3333/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3318", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3318/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3318/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3318/events", "html_url": "https://github.com/freedomofpress/securedrop/issues/3318", "id": 318565702, "node_id": "MDU6SXNzdWUzMTg1NjU3MDI=", "number": 3318, "title": "Staging environment broken", "user": {"login": "redshiftzero", "id": 7832803, "node_id": "MDQ6VXNlcjc4MzI4MDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7832803?v=4", "gravatar_id": "", "url": "https://api.github.com/users/redshiftzero", "html_url": "https://github.com/redshiftzero", "followers_url": "https://api.github.com/users/redshiftzero/followers", "following_url": "https://api.github.com/users/redshiftzero/following{/other_user}", "gists_url": "https://api.github.com/users/redshiftzero/gists{/gist_id}", "starred_url": "https://api.github.com/users/redshiftzero/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/redshiftzero/subscriptions", "organizations_url": "https://api.github.com/users/redshiftzero/orgs", "repos_url": "https://api.github.com/users/redshiftzero/repos", "events_url": "https://api.github.com/users/redshiftzero/events{/privacy}", "received_events_url": "https://api.github.com/users/redshiftzero/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}, {"id": 157793311, "node_id": "MDU6TGFiZWwxNTc3OTMzMTE=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/priority/high", "name": "priority/high", "color": "e64ef4", "default": false, "description": ""}, {"id": 616447592, "node_id": "MDU6TGFiZWw2MTY0NDc1OTI=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/staging%20VMs", "name": "staging VMs", "color": "bfd4f2", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "msheiny", "id": 1727935, "node_id": "MDQ6VXNlcjE3Mjc5MzU=", "avatar_url": "https://avatars.githubusercontent.com/u/1727935?v=4", "gravatar_id": "", "url": "https://api.github.com/users/msheiny", "html_url": "https://github.com/msheiny", "followers_url": "https://api.github.com/users/msheiny/followers", "following_url": "https://api.github.com/users/msheiny/following{/other_user}", "gists_url": "https://api.github.com/users/msheiny/gists{/gist_id}", "starred_url": "https://api.github.com/users/msheiny/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/msheiny/subscriptions", "organizations_url": "https://api.github.com/users/msheiny/orgs", "repos_url": "https://api.github.com/users/msheiny/repos", "events_url": "https://api.github.com/users/msheiny/events{/privacy}", "received_events_url": "https://api.github.com/users/msheiny/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "msheiny", "id": 1727935, "node_id": "MDQ6VXNlcjE3Mjc5MzU=", "avatar_url": "https://avatars.githubusercontent.com/u/1727935?v=4", "gravatar_id": "", "url": "https://api.github.com/users/msheiny", "html_url": "https://github.com/msheiny", "followers_url": "https://api.github.com/users/msheiny/followers", "following_url": "https://api.github.com/users/msheiny/following{/other_user}", "gists_url": "https://api.github.com/users/msheiny/gists{/gist_id}", "starred_url": "https://api.github.com/users/msheiny/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/msheiny/subscriptions", "organizations_url": "https://api.github.com/users/msheiny/orgs", "repos_url": "https://api.github.com/users/msheiny/repos", "events_url": "https://api.github.com/users/msheiny/events{/privacy}", "received_events_url": "https://api.github.com/users/msheiny/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/freedomofpress/securedrop/milestones/43", "html_url": "https://github.com/freedomofpress/securedrop/milestone/43", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/milestones/43/labels", "id": 3249122, "node_id": "MDk6TWlsZXN0b25lMzI0OTEyMg==", "number": 43, "title": "0.8", "description": "Release date to match Tails 3.8 release date in https://tails.boum.org/contribute/calendar/.\r\n\r\nSee also the [detailed i18n timeline](https://forum.securedrop.club/t/about-the-translations-category/16)\r\n\r\nFeature freeze: 2018-06-12 (EOD PDT)\r\n\r\nString freeze: 2018-06-19 (EOD PDT)", "creator": {"login": "eloquence", "id": 213636, "node_id": "MDQ6VXNlcjIxMzYzNg==", "avatar_url": "https://avatars.githubusercontent.com/u/213636?v=4", "gravatar_id": "", "url": "https://api.github.com/users/eloquence", "html_url": "https://github.com/eloquence", "followers_url": "https://api.github.com/users/eloquence/followers", "following_url": "https://api.github.com/users/eloquence/following{/other_user}", "gists_url": "https://api.github.com/users/eloquence/gists{/gist_id}", "starred_url": "https://api.github.com/users/eloquence/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/eloquence/subscriptions", "organizations_url": "https://api.github.com/users/eloquence/orgs", "repos_url": "https://api.github.com/users/eloquence/repos", "events_url": "https://api.github.com/users/eloquence/events{/privacy}", "received_events_url": "https://api.github.com/users/eloquence/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 27, "state": "closed", "created_at": "2018-04-06T22:32:59Z", "updated_at": "2018-06-27T01:19:11Z", "due_on": "2018-06-26T07:00:00Z", "closed_at": "2018-06-27T01:19:11Z"}, "comments": 7, "created_at": "2018-04-27T22:18:08Z", "updated_at": "2018-05-23T16:03:24Z", "closed_at": "2018-05-23T16:03:24Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "## Description\r\n\r\nStaging VMs are broken on macOS due to the lack of `/bin/ip`\r\n\r\n## Steps to Reproduce\r\n\r\n1. Have a Mac\r\n2. `make build-debs`\r\n3.`vagrant up /staging`\r\n\r\n## Expected Behavior\r\n\r\nAll is merry and well\r\n\r\n## Actual Behavior\r\n\r\n```\r\nTASK [restrict-direct-access : Determine admin network - first find admin net dev] ***\r\n/bin/sh: /bin/ip: No such file or directory\r\nfatal: [app-staging]: FAILED! => {\"msg\": \"An unhandled exception occurred while running the lookup plugin 'pipe'. Error was a <class 'ansible.errors.AnsibleError'>, original message: lookup_plugin.pipe(/bin/ip r get 10.0.1.2) returned 127\"}\r\n/bin/sh: /bin/ip: No such file or directory\r\nfatal: [mon-staging]: FAILED! => {\"msg\": \"An unhandled exception occurred while running the lookup plugin 'pipe'. Error was a <class 'ansible.errors.AnsibleError'>, original message: lookup_plugin.pipe(/bin/ip r get 10.0.1.3) returned 127\"}\r\n```\r\n\r\n## Comments\r\n\r\nThis is because `/bin/ip` is not present on mac", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3318/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3318/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3314", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3314/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3314/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3314/events", "html_url": "https://github.com/freedomofpress/securedrop/issues/3314", "id": 318127067, "node_id": "MDU6SXNzdWUzMTgxMjcwNjc=", "number": 3314, "title": "Docs Update Admin Workstation backup docs to remove gksu reference", "user": {"login": "redshiftzero", "id": 7832803, "node_id": "MDQ6VXNlcjc4MzI4MDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7832803?v=4", "gravatar_id": "", "url": "https://api.github.com/users/redshiftzero", "html_url": "https://github.com/redshiftzero", "followers_url": "https://api.github.com/users/redshiftzero/followers", "following_url": "https://api.github.com/users/redshiftzero/following{/other_user}", "gists_url": "https://api.github.com/users/redshiftzero/gists{/gist_id}", "starred_url": "https://api.github.com/users/redshiftzero/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/redshiftzero/subscriptions", "organizations_url": "https://api.github.com/users/redshiftzero/orgs", "repos_url": "https://api.github.com/users/redshiftzero/repos", "events_url": "https://api.github.com/users/redshiftzero/events{/privacy}", "received_events_url": "https://api.github.com/users/redshiftzero/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}, {"id": 118465787, "node_id": "MDU6TGFiZWwxMTg0NjU3ODc=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/docs", "name": "docs", "color": "d4c5f9", "default": false, "description": null}, {"id": 385585080, "node_id": "MDU6TGFiZWwzODU1ODUwODA=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/QA:%20Release", "name": "QA: Release", "color": "fbca04", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "b-meson", "id": 3100220, "node_id": "MDQ6VXNlcjMxMDAyMjA=", "avatar_url": "https://avatars.githubusercontent.com/u/3100220?v=4", "gravatar_id": "", "url": "https://api.github.com/users/b-meson", "html_url": "https://github.com/b-meson", "followers_url": "https://api.github.com/users/b-meson/followers", "following_url": "https://api.github.com/users/b-meson/following{/other_user}", "gists_url": "https://api.github.com/users/b-meson/gists{/gist_id}", "starred_url": "https://api.github.com/users/b-meson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/b-meson/subscriptions", "organizations_url": "https://api.github.com/users/b-meson/orgs", "repos_url": "https://api.github.com/users/b-meson/repos", "events_url": "https://api.github.com/users/b-meson/events{/privacy}", "received_events_url": "https://api.github.com/users/b-meson/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "b-meson", "id": 3100220, "node_id": "MDQ6VXNlcjMxMDAyMjA=", "avatar_url": "https://avatars.githubusercontent.com/u/3100220?v=4", "gravatar_id": "", "url": "https://api.github.com/users/b-meson", "html_url": "https://github.com/b-meson", "followers_url": "https://api.github.com/users/b-meson/followers", "following_url": "https://api.github.com/users/b-meson/following{/other_user}", "gists_url": "https://api.github.com/users/b-meson/gists{/gist_id}", "starred_url": "https://api.github.com/users/b-meson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/b-meson/subscriptions", "organizations_url": "https://api.github.com/users/b-meson/orgs", "repos_url": "https://api.github.com/users/b-meson/repos", "events_url": "https://api.github.com/users/b-meson/events{/privacy}", "received_events_url": "https://api.github.com/users/b-meson/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/freedomofpress/securedrop/milestones/42", "html_url": "https://github.com/freedomofpress/securedrop/milestone/42", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/milestones/42/labels", "id": 3037554, "node_id": "MDk6TWlsZXN0b25lMzAzNzU1NA==", "number": 42, "title": "0.7", "description": "(Release date to match Tails 3.7 release date in https://tails.boum.org/contribute/calendar/). See also the [detailed i18n timeline](https://forum.securedrop.club/t/about-the-translations-category/16). Feature freeze is April 24 EOD. String freeze is May 1 EOD.\r\n\r\nUpdate May 7, 2018: Release was deferred by one week (to May 15) to allow for more time to QA some late stage fixes.", "creator": {"login": "redshiftzero", "id": 7832803, "node_id": "MDQ6VXNlcjc4MzI4MDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7832803?v=4", "gravatar_id": "", "url": "https://api.github.com/users/redshiftzero", "html_url": "https://github.com/redshiftzero", "followers_url": "https://api.github.com/users/redshiftzero/followers", "following_url": "https://api.github.com/users/redshiftzero/following{/other_user}", "gists_url": "https://api.github.com/users/redshiftzero/gists{/gist_id}", "starred_url": "https://api.github.com/users/redshiftzero/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/redshiftzero/subscriptions", "organizations_url": "https://api.github.com/users/redshiftzero/orgs", "repos_url": "https://api.github.com/users/redshiftzero/repos", "events_url": "https://api.github.com/users/redshiftzero/events{/privacy}", "received_events_url": "https://api.github.com/users/redshiftzero/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 75, "state": "closed", "created_at": "2018-01-15T23:46:19Z", "updated_at": "2018-05-16T05:33:37Z", "due_on": "2018-05-15T07:00:00Z", "closed_at": "2018-05-16T05:33:37Z"}, "comments": 3, "created_at": "2018-04-26T17:30:20Z", "updated_at": "2018-04-27T23:12:23Z", "closed_at": "2018-04-27T23:11:48Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "## Description\r\n\r\nReported in: https://forum.securedrop.club/t/gksu-missing-in-tails-3-6-2/661\r\n\r\n## Steps to Reproduce\r\n\r\nFollow admin workstation docs in https://forum.securedrop.club/t/gksu-missing-in-tails-3-6-2/661\r\n\r\n## Expected Behavior\r\n\r\nAll is well and your workstation is backed up!\r\n\r\n## Actual Behavior\r\n\r\n`sudo: gksu: command not found`\r\n\r\n## Comments\r\n\r\nThe suggestion in https://forum.securedrop.club/t/gksu-missing-in-tails-3-6-2/661 seems reasonable: instruct Admins to use nautilus instead", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3314/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3314/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3299", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3299/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3299/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3299/events", "html_url": "https://github.com/freedomofpress/securedrop/issues/3299", "id": 317028423, "node_id": "MDU6SXNzdWUzMTcwMjg0MjM=", "number": 3299, "title": "securedrop-admin sdconfig does not set https-related config variables", "user": {"login": "redshiftzero", "id": 7832803, "node_id": "MDQ6VXNlcjc4MzI4MDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7832803?v=4", "gravatar_id": "", "url": "https://api.github.com/users/redshiftzero", "html_url": "https://github.com/redshiftzero", "followers_url": "https://api.github.com/users/redshiftzero/followers", "following_url": "https://api.github.com/users/redshiftzero/following{/other_user}", "gists_url": "https://api.github.com/users/redshiftzero/gists{/gist_id}", "starred_url": "https://api.github.com/users/redshiftzero/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/redshiftzero/subscriptions", "organizations_url": "https://api.github.com/users/redshiftzero/orgs", "repos_url": "https://api.github.com/users/redshiftzero/repos", "events_url": "https://api.github.com/users/redshiftzero/events{/privacy}", "received_events_url": "https://api.github.com/users/redshiftzero/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}, {"id": 118465787, "node_id": "MDU6TGFiZWwxMTg0NjU3ODc=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/docs", "name": "docs", "color": "d4c5f9", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "redshiftzero", "id": 7832803, "node_id": "MDQ6VXNlcjc4MzI4MDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7832803?v=4", "gravatar_id": "", "url": "https://api.github.com/users/redshiftzero", "html_url": "https://github.com/redshiftzero", "followers_url": "https://api.github.com/users/redshiftzero/followers", "following_url": "https://api.github.com/users/redshiftzero/following{/other_user}", "gists_url": "https://api.github.com/users/redshiftzero/gists{/gist_id}", "starred_url": "https://api.github.com/users/redshiftzero/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/redshiftzero/subscriptions", "organizations_url": "https://api.github.com/users/redshiftzero/orgs", "repos_url": "https://api.github.com/users/redshiftzero/repos", "events_url": "https://api.github.com/users/redshiftzero/events{/privacy}", "received_events_url": "https://api.github.com/users/redshiftzero/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "redshiftzero", "id": 7832803, "node_id": "MDQ6VXNlcjc4MzI4MDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7832803?v=4", "gravatar_id": "", "url": "https://api.github.com/users/redshiftzero", "html_url": "https://github.com/redshiftzero", "followers_url": "https://api.github.com/users/redshiftzero/followers", "following_url": "https://api.github.com/users/redshiftzero/following{/other_user}", "gists_url": "https://api.github.com/users/redshiftzero/gists{/gist_id}", "starred_url": "https://api.github.com/users/redshiftzero/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/redshiftzero/subscriptions", "organizations_url": "https://api.github.com/users/redshiftzero/orgs", "repos_url": "https://api.github.com/users/redshiftzero/repos", "events_url": "https://api.github.com/users/redshiftzero/events{/privacy}", "received_events_url": "https://api.github.com/users/redshiftzero/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/freedomofpress/securedrop/milestones/42", "html_url": "https://github.com/freedomofpress/securedrop/milestone/42", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/milestones/42/labels", "id": 3037554, "node_id": "MDk6TWlsZXN0b25lMzAzNzU1NA==", "number": 42, "title": "0.7", "description": "(Release date to match Tails 3.7 release date in https://tails.boum.org/contribute/calendar/). See also the [detailed i18n timeline](https://forum.securedrop.club/t/about-the-translations-category/16). Feature freeze is April 24 EOD. String freeze is May 1 EOD.\r\n\r\nUpdate May 7, 2018: Release was deferred by one week (to May 15) to allow for more time to QA some late stage fixes.", "creator": {"login": "redshiftzero", "id": 7832803, "node_id": "MDQ6VXNlcjc4MzI4MDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7832803?v=4", "gravatar_id": "", "url": "https://api.github.com/users/redshiftzero", "html_url": "https://github.com/redshiftzero", "followers_url": "https://api.github.com/users/redshiftzero/followers", "following_url": "https://api.github.com/users/redshiftzero/following{/other_user}", "gists_url": "https://api.github.com/users/redshiftzero/gists{/gist_id}", "starred_url": "https://api.github.com/users/redshiftzero/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/redshiftzero/subscriptions", "organizations_url": "https://api.github.com/users/redshiftzero/orgs", "repos_url": "https://api.github.com/users/redshiftzero/repos", "events_url": "https://api.github.com/users/redshiftzero/events{/privacy}", "received_events_url": "https://api.github.com/users/redshiftzero/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 75, "state": "closed", "created_at": "2018-01-15T23:46:19Z", "updated_at": "2018-05-16T05:33:37Z", "due_on": "2018-05-15T07:00:00Z", "closed_at": "2018-05-16T05:33:37Z"}, "comments": 8, "created_at": "2018-04-24T00:30:27Z", "updated_at": "2018-05-04T20:59:37Z", "closed_at": "2018-05-04T20:59:37Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "# Bug\r\n\r\n## Description\r\n\r\n`securedrop-admin sdconfig` does not set `securedrop_app_https_certificate_key_src`, `securedrop_app_https_certificate_cert_src`, or `securedrop_app_https_certificate_chain_src` as explained in https://docs.securedrop.org/en/stable/https_source_interface.html\r\n\r\n## Steps to Reproduce\r\n\r\nIn Tails:\r\n1. `securedrop-admin sdconfig`\r\n2. At the \"Whether HTTPS should be enabled on Source Interface (requires EV cert)\" prompt, enter \"yes\"\r\n\r\n## Expected Behavior\r\n\r\nI am shown prompts to fill out `securedrop_app_https_certificate_key_src`, `securedrop_app_https_certificate_cert_src`, `securedrop_app_https_certificate_chain_src`.\r\n\r\n## Actual Behavior\r\n\r\nI am _not_ shown these prompts.\r\n\r\n## Comments\r\n\r\nAs a temporary workaround, admins _can_ fill out `site-specific` manually, though that is a bit tricky for some admins. As such, we should fix this issue in 0.7 if possible.", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3299/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3299/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3292", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3292/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3292/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3292/events", "html_url": "https://github.com/freedomofpress/securedrop/issues/3292", "id": 316568017, "node_id": "MDU6SXNzdWUzMTY1NjgwMTc=", "number": 3292, "title": "`make update-pip-requirements` fails", "user": {"login": "heartsucker", "id": 3998464, "node_id": "MDQ6VXNlcjM5OTg0NjQ=", "avatar_url": "https://avatars.githubusercontent.com/u/3998464?v=4", "gravatar_id": "", "url": "https://api.github.com/users/heartsucker", "html_url": "https://github.com/heartsucker", "followers_url": "https://api.github.com/users/heartsucker/followers", "following_url": "https://api.github.com/users/heartsucker/following{/other_user}", "gists_url": "https://api.github.com/users/heartsucker/gists{/gist_id}", "starred_url": "https://api.github.com/users/heartsucker/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/heartsucker/subscriptions", "organizations_url": "https://api.github.com/users/heartsucker/orgs", "repos_url": "https://api.github.com/users/heartsucker/repos", "events_url": "https://api.github.com/users/heartsucker/events{/privacy}", "received_events_url": "https://api.github.com/users/heartsucker/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}, {"id": 157793311, "node_id": "MDU6TGFiZWwxNTc3OTMzMTE=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/priority/high", "name": "priority/high", "color": "e64ef4", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": {"login": "redshiftzero", "id": 7832803, "node_id": "MDQ6VXNlcjc4MzI4MDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7832803?v=4", "gravatar_id": "", "url": "https://api.github.com/users/redshiftzero", "html_url": "https://github.com/redshiftzero", "followers_url": "https://api.github.com/users/redshiftzero/followers", "following_url": "https://api.github.com/users/redshiftzero/following{/other_user}", "gists_url": "https://api.github.com/users/redshiftzero/gists{/gist_id}", "starred_url": "https://api.github.com/users/redshiftzero/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/redshiftzero/subscriptions", "organizations_url": "https://api.github.com/users/redshiftzero/orgs", "repos_url": "https://api.github.com/users/redshiftzero/repos", "events_url": "https://api.github.com/users/redshiftzero/events{/privacy}", "received_events_url": "https://api.github.com/users/redshiftzero/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "redshiftzero", "id": 7832803, "node_id": "MDQ6VXNlcjc4MzI4MDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7832803?v=4", "gravatar_id": "", "url": "https://api.github.com/users/redshiftzero", "html_url": "https://github.com/redshiftzero", "followers_url": "https://api.github.com/users/redshiftzero/followers", "following_url": "https://api.github.com/users/redshiftzero/following{/other_user}", "gists_url": "https://api.github.com/users/redshiftzero/gists{/gist_id}", "starred_url": "https://api.github.com/users/redshiftzero/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/redshiftzero/subscriptions", "organizations_url": "https://api.github.com/users/redshiftzero/orgs", "repos_url": "https://api.github.com/users/redshiftzero/repos", "events_url": "https://api.github.com/users/redshiftzero/events{/privacy}", "received_events_url": "https://api.github.com/users/redshiftzero/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/freedomofpress/securedrop/milestones/43", "html_url": "https://github.com/freedomofpress/securedrop/milestone/43", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/milestones/43/labels", "id": 3249122, "node_id": "MDk6TWlsZXN0b25lMzI0OTEyMg==", "number": 43, "title": "0.8", "description": "Release date to match Tails 3.8 release date in https://tails.boum.org/contribute/calendar/.\r\n\r\nSee also the [detailed i18n timeline](https://forum.securedrop.club/t/about-the-translations-category/16)\r\n\r\nFeature freeze: 2018-06-12 (EOD PDT)\r\n\r\nString freeze: 2018-06-19 (EOD PDT)", "creator": {"login": "eloquence", "id": 213636, "node_id": "MDQ6VXNlcjIxMzYzNg==", "avatar_url": "https://avatars.githubusercontent.com/u/213636?v=4", "gravatar_id": "", "url": "https://api.github.com/users/eloquence", "html_url": "https://github.com/eloquence", "followers_url": "https://api.github.com/users/eloquence/followers", "following_url": "https://api.github.com/users/eloquence/following{/other_user}", "gists_url": "https://api.github.com/users/eloquence/gists{/gist_id}", "starred_url": "https://api.github.com/users/eloquence/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/eloquence/subscriptions", "organizations_url": "https://api.github.com/users/eloquence/orgs", "repos_url": "https://api.github.com/users/eloquence/repos", "events_url": "https://api.github.com/users/eloquence/events{/privacy}", "received_events_url": "https://api.github.com/users/eloquence/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 27, "state": "closed", "created_at": "2018-04-06T22:32:59Z", "updated_at": "2018-06-27T01:19:11Z", "due_on": "2018-06-26T07:00:00Z", "closed_at": "2018-06-27T01:19:11Z"}, "comments": 1, "created_at": "2018-04-22T10:40:23Z", "updated_at": "2018-05-18T06:59:49Z", "closed_at": "2018-05-18T06:59:49Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "# Bug\r\n\r\n## Description\r\n\r\nRunning `make update-pip-requirements` from the root directory fails.\r\n\r\n## Steps to Reproduce\r\n\r\n```\r\n$ make update-pip-requirements \r\nmake -C admin update-pip-requirements\r\nmake[1]: Entering directory '/home/heartsucker/code/freedomofpress/securedrop/admin'\r\nbin/dev-shell pip-compile --generate-hashes --output-file requirements.txt requirements.in requirements-ansible.in\r\nRun with DOCKER_BUILD_VERBOSE=true for more information\r\nDocker image build in progress  done !\r\nTraceback (most recent call last):\r\n  File \"/opt/.venv/bin/pip-compile\", line 7, in <module>\r\n    from piptools.scripts.compile import cli\r\n  File \"/opt/.venv/local/lib/python2.7/site-packages/piptools/scripts/compile.py\", line 11, in <module>\r\n    from pip.req import InstallRequirement, parse_requirements\r\nImportError: No module named req\r\nMakefile:9: recipe for target 'update-pip-requirements' failed\r\nmake[1]: *** [update-pip-requirements] Error 1\r\nmake[1]: Leaving directory '/home/heartsucker/code/freedomofpress/securedrop/admin'\r\nMakefile:127: recipe for target 'update-pip-requirements' failed\r\nmake: *** [update-pip-requirements] Error 2\r\n```\r\n\r\n## Expected Behavior\r\n\r\nThe command updates the requirements.\r\n\r\n## Actual Behavior\r\n\r\nIt breaks.", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3292/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3292/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3275", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3275/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3275/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3275/events", "html_url": "https://github.com/freedomofpress/securedrop/pull/3275", "id": 315037969, "node_id": "MDExOlB1bGxSZXF1ZXN0MTgyMTQ5NTk4", "number": 3275, "title": "tests: rename make_account_changes test_make_account_changes", "user": {"login": "ghost", "id": 10137, "node_id": "MDQ6VXNlcjEwMTM3", "avatar_url": "https://avatars.githubusercontent.com/u/10137?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ghost", "html_url": "https://github.com/ghost", "followers_url": "https://api.github.com/users/ghost/followers", "following_url": "https://api.github.com/users/ghost/following{/other_user}", "gists_url": "https://api.github.com/users/ghost/gists{/gist_id}", "starred_url": "https://api.github.com/users/ghost/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ghost/subscriptions", "organizations_url": "https://api.github.com/users/ghost/orgs", "repos_url": "https://api.github.com/users/ghost/repos", "events_url": "https://api.github.com/users/ghost/events{/privacy}", "received_events_url": "https://api.github.com/users/ghost/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}, {"id": 475997849, "node_id": "MDU6TGFiZWw0NzU5OTc4NDk=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/tests", "name": "tests", "color": "f9d0c4", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2018-04-17T12:30:52Z", "updated_at": "2018-04-17T14:07:55Z", "closed_at": "2018-04-17T14:07:55Z", "author_association": "NONE", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/freedomofpress/securedrop/pulls/3275", "html_url": "https://github.com/freedomofpress/securedrop/pull/3275", "diff_url": "https://github.com/freedomofpress/securedrop/pull/3275.diff", "patch_url": "https://github.com/freedomofpress/securedrop/pull/3275.patch", "merged_at": "2018-04-17T14:07:55Z"}, "body": "## Status\r\n\r\nReady for review\r\n\r\n## Description of Changes\r\n\r\nrename make_account_changes test_make_account_changes, otherwise it is ignored and the test it contains are not run. Also fix the test itself which was silently broken because it never ran.\r\n\r\n## Testing\r\n\r\nN/A (run via CI)\r\n\r\n## Deployment\r\n\r\nN/A\r\n\r\n## Checklist\r\n\r\n### If you made changes to the server application code:\r\n\r\n- [x] Linting (`make ci-lint`) and tests (`make -C securedrop test`) pass in the development container\r\n", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3275/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3275/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3272", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3272/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3272/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3272/events", "html_url": "https://github.com/freedomofpress/securedrop/pull/3272", "id": 314561552, "node_id": "MDExOlB1bGxSZXF1ZXN0MTgxNzk1Nzgy", "number": 3272, "title": "added hashes for pluggy python wheels", "user": {"login": "heartsucker", "id": 3998464, "node_id": "MDQ6VXNlcjM5OTg0NjQ=", "avatar_url": "https://avatars.githubusercontent.com/u/3998464?v=4", "gravatar_id": "", "url": "https://api.github.com/users/heartsucker", "html_url": "https://github.com/heartsucker", "followers_url": "https://api.github.com/users/heartsucker/followers", "following_url": "https://api.github.com/users/heartsucker/following{/other_user}", "gists_url": "https://api.github.com/users/heartsucker/gists{/gist_id}", "starred_url": "https://api.github.com/users/heartsucker/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/heartsucker/subscriptions", "organizations_url": "https://api.github.com/users/heartsucker/orgs", "repos_url": "https://api.github.com/users/heartsucker/repos", "events_url": "https://api.github.com/users/heartsucker/events{/privacy}", "received_events_url": "https://api.github.com/users/heartsucker/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}, {"id": 616447641, "node_id": "MDU6TGFiZWw2MTY0NDc2NDE=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/development%20env", "name": "development env", "color": "bfd4f2", "default": false, "description": null}, {"id": 652907032, "node_id": "MDU6TGFiZWw2NTI5MDcwMzI=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/goals:%20sick%20CI", "name": "goals: sick CI", "color": "0e8a16", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/freedomofpress/securedrop/milestones/42", "html_url": "https://github.com/freedomofpress/securedrop/milestone/42", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/milestones/42/labels", "id": 3037554, "node_id": "MDk6TWlsZXN0b25lMzAzNzU1NA==", "number": 42, "title": "0.7", "description": "(Release date to match Tails 3.7 release date in https://tails.boum.org/contribute/calendar/). See also the [detailed i18n timeline](https://forum.securedrop.club/t/about-the-translations-category/16). Feature freeze is April 24 EOD. String freeze is May 1 EOD.\r\n\r\nUpdate May 7, 2018: Release was deferred by one week (to May 15) to allow for more time to QA some late stage fixes.", "creator": {"login": "redshiftzero", "id": 7832803, "node_id": "MDQ6VXNlcjc4MzI4MDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7832803?v=4", "gravatar_id": "", "url": "https://api.github.com/users/redshiftzero", "html_url": "https://github.com/redshiftzero", "followers_url": "https://api.github.com/users/redshiftzero/followers", "following_url": "https://api.github.com/users/redshiftzero/following{/other_user}", "gists_url": "https://api.github.com/users/redshiftzero/gists{/gist_id}", "starred_url": "https://api.github.com/users/redshiftzero/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/redshiftzero/subscriptions", "organizations_url": "https://api.github.com/users/redshiftzero/orgs", "repos_url": "https://api.github.com/users/redshiftzero/repos", "events_url": "https://api.github.com/users/redshiftzero/events{/privacy}", "received_events_url": "https://api.github.com/users/redshiftzero/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 75, "state": "closed", "created_at": "2018-01-15T23:46:19Z", "updated_at": "2018-05-16T05:33:37Z", "due_on": "2018-05-15T07:00:00Z", "closed_at": "2018-05-16T05:33:37Z"}, "comments": 1, "created_at": "2018-04-16T09:08:45Z", "updated_at": "2018-04-24T16:18:56Z", "closed_at": "2018-04-16T09:54:32Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/freedomofpress/securedrop/pulls/3272", "html_url": "https://github.com/freedomofpress/securedrop/pull/3272", "diff_url": "https://github.com/freedomofpress/securedrop/pull/3272.diff", "patch_url": "https://github.com/freedomofpress/securedrop/pull/3272.patch", "merged_at": "2018-04-16T09:54:31Z"}, "body": "## Status\r\n\r\nReady for review\r\n\r\n## Description of Changes\r\n\r\nFixes #3269\r\n\r\nAs we can see from the PyPI [page for `pluggy`](https://pypi.python.org/pypi/pluggy), two python wheels were added yesterday. These are breaking our dev installs.\r\n\r\n## Testing\r\n\r\n```\r\ncd admin && make test\r\n```\r\n\r\n## Checklist\r\n\r\n### If you made changes to `securedrop-admin`:\r\n\r\n- [x] Linting and tests (`make -C admin test`) pass in the admin development container", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3272/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3272/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3271", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3271/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3271/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3271/events", "html_url": "https://github.com/freedomofpress/securedrop/pull/3271", "id": 314554839, "node_id": "MDExOlB1bGxSZXF1ZXN0MTgxNzkxMTg0", "number": 3271, "title": "deprecate the Vagrant development VM", "user": {"login": "ghost", "id": 10137, "node_id": "MDQ6VXNlcjEwMTM3", "avatar_url": "https://avatars.githubusercontent.com/u/10137?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ghost", "html_url": "https://github.com/ghost", "followers_url": "https://api.github.com/users/ghost/followers", "following_url": "https://api.github.com/users/ghost/following{/other_user}", "gists_url": "https://api.github.com/users/ghost/gists{/gist_id}", "starred_url": "https://api.github.com/users/ghost/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ghost/subscriptions", "organizations_url": "https://api.github.com/users/ghost/orgs", "repos_url": "https://api.github.com/users/ghost/repos", "events_url": "https://api.github.com/users/ghost/events{/privacy}", "received_events_url": "https://api.github.com/users/ghost/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}, {"id": 616447641, "node_id": "MDU6TGFiZWw2MTY0NDc2NDE=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/development%20env", "name": "development env", "color": "bfd4f2", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/freedomofpress/securedrop/milestones/42", "html_url": "https://github.com/freedomofpress/securedrop/milestone/42", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/milestones/42/labels", "id": 3037554, "node_id": "MDk6TWlsZXN0b25lMzAzNzU1NA==", "number": 42, "title": "0.7", "description": "(Release date to match Tails 3.7 release date in https://tails.boum.org/contribute/calendar/). See also the [detailed i18n timeline](https://forum.securedrop.club/t/about-the-translations-category/16). Feature freeze is April 24 EOD. String freeze is May 1 EOD.\r\n\r\nUpdate May 7, 2018: Release was deferred by one week (to May 15) to allow for more time to QA some late stage fixes.", "creator": {"login": "redshiftzero", "id": 7832803, "node_id": "MDQ6VXNlcjc4MzI4MDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7832803?v=4", "gravatar_id": "", "url": "https://api.github.com/users/redshiftzero", "html_url": "https://github.com/redshiftzero", "followers_url": "https://api.github.com/users/redshiftzero/followers", "following_url": "https://api.github.com/users/redshiftzero/following{/other_user}", "gists_url": "https://api.github.com/users/redshiftzero/gists{/gist_id}", "starred_url": "https://api.github.com/users/redshiftzero/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/redshiftzero/subscriptions", "organizations_url": "https://api.github.com/users/redshiftzero/orgs", "repos_url": "https://api.github.com/users/redshiftzero/repos", "events_url": "https://api.github.com/users/redshiftzero/events{/privacy}", "received_events_url": "https://api.github.com/users/redshiftzero/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 75, "state": "closed", "created_at": "2018-01-15T23:46:19Z", "updated_at": "2018-05-16T05:33:37Z", "due_on": "2018-05-15T07:00:00Z", "closed_at": "2018-05-16T05:33:37Z"}, "comments": 2, "created_at": "2018-04-16T08:49:36Z", "updated_at": "2018-04-24T16:19:00Z", "closed_at": "2018-04-18T14:57:59Z", "author_association": "NONE", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/freedomofpress/securedrop/pulls/3271", "html_url": "https://github.com/freedomofpress/securedrop/pull/3271", "diff_url": "https://github.com/freedomofpress/securedrop/pull/3271.diff", "patch_url": "https://github.com/freedomofpress/securedrop/pull/3271.patch", "merged_at": "2018-04-18T14:57:58Z"}, "body": "## Status\r\n\r\nReady for review\r\n\r\n## Description of Changes\r\n\r\nFixes #3227\r\n\r\ndeprecate the Vagrant development VM\r\n\r\n## Testing\r\n\r\nN/A\r\n\r\n## Deployment\r\n\r\nN/A\r\n", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3271/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3271/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3269", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3269/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3269/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3269/events", "html_url": "https://github.com/freedomofpress/securedrop/issues/3269", "id": 314549125, "node_id": "MDU6SXNzdWUzMTQ1NDkxMjU=", "number": 3269, "title": "Package install breaks because of pip hash mismatches", "user": {"login": "heartsucker", "id": 3998464, "node_id": "MDQ6VXNlcjM5OTg0NjQ=", "avatar_url": "https://avatars.githubusercontent.com/u/3998464?v=4", "gravatar_id": "", "url": "https://api.github.com/users/heartsucker", "html_url": "https://github.com/heartsucker", "followers_url": "https://api.github.com/users/heartsucker/followers", "following_url": "https://api.github.com/users/heartsucker/following{/other_user}", "gists_url": "https://api.github.com/users/heartsucker/gists{/gist_id}", "starred_url": "https://api.github.com/users/heartsucker/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/heartsucker/subscriptions", "organizations_url": "https://api.github.com/users/heartsucker/orgs", "repos_url": "https://api.github.com/users/heartsucker/repos", "events_url": "https://api.github.com/users/heartsucker/events{/privacy}", "received_events_url": "https://api.github.com/users/heartsucker/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}, {"id": 192545295, "node_id": "MDU6TGFiZWwxOTI1NDUyOTU=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/security", "name": "security", "color": "bfdadc", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2018-04-16T08:32:27Z", "updated_at": "2018-04-16T09:54:32Z", "closed_at": "2018-04-16T09:54:32Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "# Bug\r\n\r\n## Description\r\n\r\nWe cannot build the docker container because the hash of `pluggy` doesn't match what's in the requirements file.\r\n\r\n```\r\nTHESE PACKAGES DO NOT MATCH THE HASHES FROM THE REQUIREMENTS FILE. If you have updated the package versions, please update the hashes. Otherwise, examine the package contents carefully; someone may have tampered with them.\r\n    pluggy==0.6.0 from https://pypi.python.org/packages/82/05/43e3947125a2137cba4746135c75934ceed1863f27e050fc560052104a71/pluggy-0.6.0-py2-none-any.whl#md5=78ae3816cb3f1b843de3af66c0f36a8b (from -r requirements-dev.txt (line 126)):\r\n        Expected sha256 7f8ae7f5bdf75671a718d2daf0a64b7885f74510bcd98b1a0bb420eb9a9d0cff\r\n             Got        d345c8fe681115900d6da8d048ba67c25df42973bda370783cd58826442dcd7c\r\n```\r\n\r\n## Steps to Reproduce\r\n\r\n```\r\ncd admin && DOCKER_BUILD_VERBOSE=true make test\r\n```\r\n\r\n## Expected Behavior\r\n\r\n`pip install -R admin/requirements.txt` works.\r\n\r\n## Actual Behavior\r\n\r\nIt doesn't.", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3269/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3269/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3257", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3257/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3257/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3257/events", "html_url": "https://github.com/freedomofpress/securedrop/pull/3257", "id": 313511704, "node_id": "MDExOlB1bGxSZXF1ZXN0MTgxMDQ2NDkz", "number": 3257, "title": "Securedrop-admin update: Try alternate keyserver if primary is not available", "user": {"login": "redshiftzero", "id": 7832803, "node_id": "MDQ6VXNlcjc4MzI4MDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7832803?v=4", "gravatar_id": "", "url": "https://api.github.com/users/redshiftzero", "html_url": "https://github.com/redshiftzero", "followers_url": "https://api.github.com/users/redshiftzero/followers", "following_url": "https://api.github.com/users/redshiftzero/following{/other_user}", "gists_url": "https://api.github.com/users/redshiftzero/gists{/gist_id}", "starred_url": "https://api.github.com/users/redshiftzero/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/redshiftzero/subscriptions", "organizations_url": "https://api.github.com/users/redshiftzero/orgs", "repos_url": "https://api.github.com/users/redshiftzero/repos", "events_url": "https://api.github.com/users/redshiftzero/events{/privacy}", "received_events_url": "https://api.github.com/users/redshiftzero/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}, {"id": 192539287, "node_id": "MDU6TGFiZWwxOTI1MzkyODc=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/ops/deployment", "name": "ops/deployment", "color": "c7def8", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/freedomofpress/securedrop/milestones/42", "html_url": "https://github.com/freedomofpress/securedrop/milestone/42", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/milestones/42/labels", "id": 3037554, "node_id": "MDk6TWlsZXN0b25lMzAzNzU1NA==", "number": 42, "title": "0.7", "description": "(Release date to match Tails 3.7 release date in https://tails.boum.org/contribute/calendar/). See also the [detailed i18n timeline](https://forum.securedrop.club/t/about-the-translations-category/16). Feature freeze is April 24 EOD. String freeze is May 1 EOD.\r\n\r\nUpdate May 7, 2018: Release was deferred by one week (to May 15) to allow for more time to QA some late stage fixes.", "creator": {"login": "redshiftzero", "id": 7832803, "node_id": "MDQ6VXNlcjc4MzI4MDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7832803?v=4", "gravatar_id": "", "url": "https://api.github.com/users/redshiftzero", "html_url": "https://github.com/redshiftzero", "followers_url": "https://api.github.com/users/redshiftzero/followers", "following_url": "https://api.github.com/users/redshiftzero/following{/other_user}", "gists_url": "https://api.github.com/users/redshiftzero/gists{/gist_id}", "starred_url": "https://api.github.com/users/redshiftzero/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/redshiftzero/subscriptions", "organizations_url": "https://api.github.com/users/redshiftzero/orgs", "repos_url": "https://api.github.com/users/redshiftzero/repos", "events_url": "https://api.github.com/users/redshiftzero/events{/privacy}", "received_events_url": "https://api.github.com/users/redshiftzero/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 75, "state": "closed", "created_at": "2018-01-15T23:46:19Z", "updated_at": "2018-05-16T05:33:37Z", "due_on": "2018-05-15T07:00:00Z", "closed_at": "2018-05-16T05:33:37Z"}, "comments": 3, "created_at": "2018-04-11T22:36:33Z", "updated_at": "2019-02-27T10:47:09Z", "closed_at": "2018-04-16T22:05:17Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/freedomofpress/securedrop/pulls/3257", "html_url": "https://github.com/freedomofpress/securedrop/pull/3257", "diff_url": "https://github.com/freedomofpress/securedrop/pull/3257.diff", "patch_url": "https://github.com/freedomofpress/securedrop/pull/3257.patch", "merged_at": "2018-04-16T22:05:17Z"}, "body": "## Status\r\n\r\nReady for review\r\n\r\n## Description of Changes\r\n\r\nFixes #3243.\r\n\r\nChanges proposed in this pull request:\r\n * Try an alternative keyserver for getting the release key in case the primary is not available. This is basically automating the documented workaround in #1842.\r\n * Note that this implements a timeout strategy such that the failures occur fast so we have a predictable update time for #3230.\r\n\r\n## Testing\r\n\r\nTesting in Tails is probably the best thing to do here, though you'll need to reproduce the issue in #3243 first. Once you've done that check out this branch and:\r\n\r\n```\r\n$ cd ~/Persistent/securedrop\r\n$ gpg --delete-keys 22245C81E3BAEB4138B36061310F561200F4AD77\r\n$ ./securedrop-admin update\r\n```\r\n\r\n## Deployment\r\n\r\nWill be updated along with the entire workstation repo with `securedrop-admin update`\r\n\r\n## Checklist\r\n\r\n### If you made changes to `securedrop-admin`:\r\n\r\n- [x] Linting and tests (`make -C admin test`) pass in the admin development container", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3257/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3257/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3243", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3243/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3243/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3243/events", "html_url": "https://github.com/freedomofpress/securedrop/issues/3243", "id": 312104760, "node_id": "MDU6SXNzdWUzMTIxMDQ3NjA=", "number": 3243, "title": "securedrop-admin update sporadically fails on gpg recv-key", "user": {"login": "msheiny", "id": 1727935, "node_id": "MDQ6VXNlcjE3Mjc5MzU=", "avatar_url": "https://avatars.githubusercontent.com/u/1727935?v=4", "gravatar_id": "", "url": "https://api.github.com/users/msheiny", "html_url": "https://github.com/msheiny", "followers_url": "https://api.github.com/users/msheiny/followers", "following_url": "https://api.github.com/users/msheiny/following{/other_user}", "gists_url": "https://api.github.com/users/msheiny/gists{/gist_id}", "starred_url": "https://api.github.com/users/msheiny/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/msheiny/subscriptions", "organizations_url": "https://api.github.com/users/msheiny/orgs", "repos_url": "https://api.github.com/users/msheiny/repos", "events_url": "https://api.github.com/users/msheiny/events{/privacy}", "received_events_url": "https://api.github.com/users/msheiny/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}, {"id": 625966031, "node_id": "MDU6TGFiZWw2MjU5NjYwMzE=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/able%20to%20reproduce", "name": "able to reproduce", "color": "fbca04", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "redshiftzero", "id": 7832803, "node_id": "MDQ6VXNlcjc4MzI4MDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7832803?v=4", "gravatar_id": "", "url": "https://api.github.com/users/redshiftzero", "html_url": "https://github.com/redshiftzero", "followers_url": "https://api.github.com/users/redshiftzero/followers", "following_url": "https://api.github.com/users/redshiftzero/following{/other_user}", "gists_url": "https://api.github.com/users/redshiftzero/gists{/gist_id}", "starred_url": "https://api.github.com/users/redshiftzero/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/redshiftzero/subscriptions", "organizations_url": "https://api.github.com/users/redshiftzero/orgs", "repos_url": "https://api.github.com/users/redshiftzero/repos", "events_url": "https://api.github.com/users/redshiftzero/events{/privacy}", "received_events_url": "https://api.github.com/users/redshiftzero/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "redshiftzero", "id": 7832803, "node_id": "MDQ6VXNlcjc4MzI4MDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7832803?v=4", "gravatar_id": "", "url": "https://api.github.com/users/redshiftzero", "html_url": "https://github.com/redshiftzero", "followers_url": "https://api.github.com/users/redshiftzero/followers", "following_url": "https://api.github.com/users/redshiftzero/following{/other_user}", "gists_url": "https://api.github.com/users/redshiftzero/gists{/gist_id}", "starred_url": "https://api.github.com/users/redshiftzero/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/redshiftzero/subscriptions", "organizations_url": "https://api.github.com/users/redshiftzero/orgs", "repos_url": "https://api.github.com/users/redshiftzero/repos", "events_url": "https://api.github.com/users/redshiftzero/events{/privacy}", "received_events_url": "https://api.github.com/users/redshiftzero/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/freedomofpress/securedrop/milestones/42", "html_url": "https://github.com/freedomofpress/securedrop/milestone/42", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/milestones/42/labels", "id": 3037554, "node_id": "MDk6TWlsZXN0b25lMzAzNzU1NA==", "number": 42, "title": "0.7", "description": "(Release date to match Tails 3.7 release date in https://tails.boum.org/contribute/calendar/). See also the [detailed i18n timeline](https://forum.securedrop.club/t/about-the-translations-category/16). Feature freeze is April 24 EOD. String freeze is May 1 EOD.\r\n\r\nUpdate May 7, 2018: Release was deferred by one week (to May 15) to allow for more time to QA some late stage fixes.", "creator": {"login": "redshiftzero", "id": 7832803, "node_id": "MDQ6VXNlcjc4MzI4MDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7832803?v=4", "gravatar_id": "", "url": "https://api.github.com/users/redshiftzero", "html_url": "https://github.com/redshiftzero", "followers_url": "https://api.github.com/users/redshiftzero/followers", "following_url": "https://api.github.com/users/redshiftzero/following{/other_user}", "gists_url": "https://api.github.com/users/redshiftzero/gists{/gist_id}", "starred_url": "https://api.github.com/users/redshiftzero/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/redshiftzero/subscriptions", "organizations_url": "https://api.github.com/users/redshiftzero/orgs", "repos_url": "https://api.github.com/users/redshiftzero/repos", "events_url": "https://api.github.com/users/redshiftzero/events{/privacy}", "received_events_url": "https://api.github.com/users/redshiftzero/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 75, "state": "closed", "created_at": "2018-01-15T23:46:19Z", "updated_at": "2018-05-16T05:33:37Z", "due_on": "2018-05-15T07:00:00Z", "closed_at": "2018-05-16T05:33:37Z"}, "comments": 2, "created_at": "2018-04-06T20:19:14Z", "updated_at": "2018-04-16T22:05:17Z", "closed_at": "2018-04-16T22:05:17Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "# Bug\r\n\r\n## Description\r\n\r\nThis an [old issue](https://github.com/freedomofpress/securedrop/issues/1797) that has reared its head again in the latest release inside our automated scripts.\r\n\r\n## Steps to Reproduce\r\n\r\n* Log into Tails\r\n* Hop into the securedrop directory under persistence and checkout a random branch\r\n* Run `./securedrop-admin update`\r\n\r\n## Expected Behavior\r\n\r\nThe branch (at the time of this writing) should be changed to the tag for `0.6` release.\r\n\r\n## Actual Behavior\r\n\r\nDepending on when you run this, it might bomb out during the `gpg recv-key` portion. Might get an error that looks like this:\r\n![image](https://user-images.githubusercontent.com/1727935/38442332-840da5f0-39d7-11e8-9229-768d8f032a14.png)\r\n\r\n## Comments\r\n\r\nLets implement the manual documented fixes that we recommended in #1842 in an automated fashion within the `securedrop-admin` script. Check out this [comment](https://github.com/freedomofpress/securedrop/pull/1842#issuecomment-309579980) specifically.\r\n", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3243/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3243/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3238", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3238/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3238/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3238/events", "html_url": "https://github.com/freedomofpress/securedrop/issues/3238", "id": 311675754, "node_id": "MDU6SXNzdWUzMTE2NzU3NTQ=", "number": 3238, "title": "Debian `postrm` maintainer script for `securedrop-app-code` doesn't actually purge", "user": {"login": "heartsucker", "id": 3998464, "node_id": "MDQ6VXNlcjM5OTg0NjQ=", "avatar_url": "https://avatars.githubusercontent.com/u/3998464?v=4", "gravatar_id": "", "url": "https://api.github.com/users/heartsucker", "html_url": "https://github.com/heartsucker", "followers_url": "https://api.github.com/users/heartsucker/followers", "following_url": "https://api.github.com/users/heartsucker/following{/other_user}", "gists_url": "https://api.github.com/users/heartsucker/gists{/gist_id}", "starred_url": "https://api.github.com/users/heartsucker/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/heartsucker/subscriptions", "organizations_url": "https://api.github.com/users/heartsucker/orgs", "repos_url": "https://api.github.com/users/heartsucker/repos", "events_url": "https://api.github.com/users/heartsucker/events{/privacy}", "received_events_url": "https://api.github.com/users/heartsucker/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}, {"id": 192539287, "node_id": "MDU6TGFiZWwxOTI1MzkyODc=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/ops/deployment", "name": "ops/deployment", "color": "c7def8", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "heartsucker", "id": 3998464, "node_id": "MDQ6VXNlcjM5OTg0NjQ=", "avatar_url": "https://avatars.githubusercontent.com/u/3998464?v=4", "gravatar_id": "", "url": "https://api.github.com/users/heartsucker", "html_url": "https://github.com/heartsucker", "followers_url": "https://api.github.com/users/heartsucker/followers", "following_url": "https://api.github.com/users/heartsucker/following{/other_user}", "gists_url": "https://api.github.com/users/heartsucker/gists{/gist_id}", "starred_url": "https://api.github.com/users/heartsucker/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/heartsucker/subscriptions", "organizations_url": "https://api.github.com/users/heartsucker/orgs", "repos_url": "https://api.github.com/users/heartsucker/repos", "events_url": "https://api.github.com/users/heartsucker/events{/privacy}", "received_events_url": "https://api.github.com/users/heartsucker/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "heartsucker", "id": 3998464, "node_id": "MDQ6VXNlcjM5OTg0NjQ=", "avatar_url": "https://avatars.githubusercontent.com/u/3998464?v=4", "gravatar_id": "", "url": "https://api.github.com/users/heartsucker", "html_url": "https://github.com/heartsucker", "followers_url": "https://api.github.com/users/heartsucker/followers", "following_url": "https://api.github.com/users/heartsucker/following{/other_user}", "gists_url": "https://api.github.com/users/heartsucker/gists{/gist_id}", "starred_url": "https://api.github.com/users/heartsucker/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/heartsucker/subscriptions", "organizations_url": "https://api.github.com/users/heartsucker/orgs", "repos_url": "https://api.github.com/users/heartsucker/repos", "events_url": "https://api.github.com/users/heartsucker/events{/privacy}", "received_events_url": "https://api.github.com/users/heartsucker/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2018-04-05T16:11:22Z", "updated_at": "2018-06-15T23:27:25Z", "closed_at": "2018-06-15T23:27:25Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "# Bug\r\n\r\n## Description\r\n\r\nIf I am testing packages in a staging VM, I may need to run `apt purge -y securedrop-app-code` to reset things before installing again. In `postrm`, we don't fully purge the generated directories which leads to dangling files between installs which may cause issues.\r\n\r\n## Steps to Reproduce\r\n\r\n1. Boot staging VM\r\n2. ssh in\r\n3. `apt purge -y securedrop-app-code`\r\n4. Look at leftovers in `/var/{lib,www}/securedrop`\r\n\r\n## Expected Behavior\r\n\r\nThose directories don't exist.\r\n\r\n## Actual Behavior\r\n\r\nThey do.", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3238/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3238/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3233", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3233/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3233/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3233/events", "html_url": "https://github.com/freedomofpress/securedrop/issues/3233", "id": 311342576, "node_id": "MDU6SXNzdWUzMTEzNDI1NzY=", "number": 3233, "title": "[qt-journalist-updater] Fix window size", "user": {"login": "redshiftzero", "id": 7832803, "node_id": "MDQ6VXNlcjc4MzI4MDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7832803?v=4", "gravatar_id": "", "url": "https://api.github.com/users/redshiftzero", "html_url": "https://github.com/redshiftzero", "followers_url": "https://api.github.com/users/redshiftzero/followers", "following_url": "https://api.github.com/users/redshiftzero/following{/other_user}", "gists_url": "https://api.github.com/users/redshiftzero/gists{/gist_id}", "starred_url": "https://api.github.com/users/redshiftzero/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/redshiftzero/subscriptions", "organizations_url": "https://api.github.com/users/redshiftzero/orgs", "repos_url": "https://api.github.com/users/redshiftzero/repos", "events_url": "https://api.github.com/users/redshiftzero/events{/privacy}", "received_events_url": "https://api.github.com/users/redshiftzero/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}, {"id": 652909251, "node_id": "MDU6TGFiZWw2NTI5MDkyNTE=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/goals:%20journalist%20experience", "name": "goals: journalist experience", "color": "0e8a16", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "redshiftzero", "id": 7832803, "node_id": "MDQ6VXNlcjc4MzI4MDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7832803?v=4", "gravatar_id": "", "url": "https://api.github.com/users/redshiftzero", "html_url": "https://github.com/redshiftzero", "followers_url": "https://api.github.com/users/redshiftzero/followers", "following_url": "https://api.github.com/users/redshiftzero/following{/other_user}", "gists_url": "https://api.github.com/users/redshiftzero/gists{/gist_id}", "starred_url": "https://api.github.com/users/redshiftzero/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/redshiftzero/subscriptions", "organizations_url": "https://api.github.com/users/redshiftzero/orgs", "repos_url": "https://api.github.com/users/redshiftzero/repos", "events_url": "https://api.github.com/users/redshiftzero/events{/privacy}", "received_events_url": "https://api.github.com/users/redshiftzero/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "redshiftzero", "id": 7832803, "node_id": "MDQ6VXNlcjc4MzI4MDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7832803?v=4", "gravatar_id": "", "url": "https://api.github.com/users/redshiftzero", "html_url": "https://github.com/redshiftzero", "followers_url": "https://api.github.com/users/redshiftzero/followers", "following_url": "https://api.github.com/users/redshiftzero/following{/other_user}", "gists_url": "https://api.github.com/users/redshiftzero/gists{/gist_id}", "starred_url": "https://api.github.com/users/redshiftzero/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/redshiftzero/subscriptions", "organizations_url": "https://api.github.com/users/redshiftzero/orgs", "repos_url": "https://api.github.com/users/redshiftzero/repos", "events_url": "https://api.github.com/users/redshiftzero/events{/privacy}", "received_events_url": "https://api.github.com/users/redshiftzero/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 2, "created_at": "2018-04-04T18:32:51Z", "updated_at": "2018-04-10T16:13:57Z", "closed_at": "2018-04-10T16:13:56Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "## Description\r\n\r\n[See epic #3076 for primary feature, PRs for this ticket should go into `qt-journalist-updater`]\r\n\r\n## Steps to Reproduce\r\n\r\n1. Launch the GUI: `python3 SecureDropUpdater`\r\n2. Attempt to resize the window.\r\n\r\n## Expected Behavior\r\n\r\nThe window smoothly adjusts size.\r\n\r\n## Actual Behavior\r\n\r\nThe window resizing is very sluggish. \r\n\r\n## Comments\r\n\r\nLet's adopt a fixed window size.\r\n", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3233/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3233/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3225", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3225/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3225/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3225/events", "html_url": "https://github.com/freedomofpress/securedrop/pull/3225", "id": 311051636, "node_id": "MDExOlB1bGxSZXF1ZXN0MTc5MjU5MDc4", "number": 3225, "title": "AppArmor: Whitelist fa-globe-black.png", "user": {"login": "redshiftzero", "id": 7832803, "node_id": "MDQ6VXNlcjc4MzI4MDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7832803?v=4", "gravatar_id": "", "url": "https://api.github.com/users/redshiftzero", "html_url": "https://github.com/redshiftzero", "followers_url": "https://api.github.com/users/redshiftzero/followers", "following_url": "https://api.github.com/users/redshiftzero/following{/other_user}", "gists_url": "https://api.github.com/users/redshiftzero/gists{/gist_id}", "starred_url": "https://api.github.com/users/redshiftzero/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/redshiftzero/subscriptions", "organizations_url": "https://api.github.com/users/redshiftzero/orgs", "repos_url": "https://api.github.com/users/redshiftzero/repos", "events_url": "https://api.github.com/users/redshiftzero/events{/privacy}", "received_events_url": "https://api.github.com/users/redshiftzero/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}, {"id": 192539287, "node_id": "MDU6TGFiZWwxOTI1MzkyODc=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/ops/deployment", "name": "ops/deployment", "color": "c7def8", "default": false, "description": null}, {"id": 192539755, "node_id": "MDU6TGFiZWwxOTI1Mzk3NTU=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/app", "name": "app", "color": "bfe5bf", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/freedomofpress/securedrop/milestones/42", "html_url": "https://github.com/freedomofpress/securedrop/milestone/42", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/milestones/42/labels", "id": 3037554, "node_id": "MDk6TWlsZXN0b25lMzAzNzU1NA==", "number": 42, "title": "0.7", "description": "(Release date to match Tails 3.7 release date in https://tails.boum.org/contribute/calendar/). See also the [detailed i18n timeline](https://forum.securedrop.club/t/about-the-translations-category/16). Feature freeze is April 24 EOD. String freeze is May 1 EOD.\r\n\r\nUpdate May 7, 2018: Release was deferred by one week (to May 15) to allow for more time to QA some late stage fixes.", "creator": {"login": "redshiftzero", "id": 7832803, "node_id": "MDQ6VXNlcjc4MzI4MDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7832803?v=4", "gravatar_id": "", "url": "https://api.github.com/users/redshiftzero", "html_url": "https://github.com/redshiftzero", "followers_url": "https://api.github.com/users/redshiftzero/followers", "following_url": "https://api.github.com/users/redshiftzero/following{/other_user}", "gists_url": "https://api.github.com/users/redshiftzero/gists{/gist_id}", "starred_url": "https://api.github.com/users/redshiftzero/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/redshiftzero/subscriptions", "organizations_url": "https://api.github.com/users/redshiftzero/orgs", "repos_url": "https://api.github.com/users/redshiftzero/repos", "events_url": "https://api.github.com/users/redshiftzero/events{/privacy}", "received_events_url": "https://api.github.com/users/redshiftzero/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 75, "state": "closed", "created_at": "2018-01-15T23:46:19Z", "updated_at": "2018-05-16T05:33:37Z", "due_on": "2018-05-15T07:00:00Z", "closed_at": "2018-05-16T05:33:37Z"}, "comments": 1, "created_at": "2018-04-04T01:16:23Z", "updated_at": "2018-04-24T16:30:38Z", "closed_at": "2018-04-04T16:36:26Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/freedomofpress/securedrop/pulls/3225", "html_url": "https://github.com/freedomofpress/securedrop/pull/3225", "diff_url": "https://github.com/freedomofpress/securedrop/pull/3225.diff", "patch_url": "https://github.com/freedomofpress/securedrop/pull/3225.patch", "merged_at": "2018-04-04T16:36:26Z"}, "body": "## Status\r\n\r\nReady for review\r\n\r\n## Description of Changes\r\n\r\nFixes #3224.\r\n\r\nChanges proposed in this pull request:\r\n* Update AppArmor to allow Apache to read `fa-globe-black.png`\r\n\r\n## Testing\r\n\r\nIn staging, check that the globe described in #3121 is now visible\r\n\r\n## Deployment\r\n\r\nDelivered in app code package\r\n\r\n## Checklist\r\n\r\n### If you made changes to the system configuration:\r\n\r\n- [ ] [Configuration tests](https://docs.securedrop.org/en/latest/development/testing_configuration_tests.html) pass\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3225/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3225/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3224", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3224/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3224/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3224/events", "html_url": "https://github.com/freedomofpress/securedrop/issues/3224", "id": 311050846, "node_id": "MDU6SXNzdWUzMTEwNTA4NDY=", "number": 3224, "title": "Add AppArmor rule to whitelist fa-globe-black.png", "user": {"login": "redshiftzero", "id": 7832803, "node_id": "MDQ6VXNlcjc4MzI4MDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7832803?v=4", "gravatar_id": "", "url": "https://api.github.com/users/redshiftzero", "html_url": "https://github.com/redshiftzero", "followers_url": "https://api.github.com/users/redshiftzero/followers", "following_url": "https://api.github.com/users/redshiftzero/following{/other_user}", "gists_url": "https://api.github.com/users/redshiftzero/gists{/gist_id}", "starred_url": "https://api.github.com/users/redshiftzero/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/redshiftzero/subscriptions", "organizations_url": "https://api.github.com/users/redshiftzero/orgs", "repos_url": "https://api.github.com/users/redshiftzero/repos", "events_url": "https://api.github.com/users/redshiftzero/events{/privacy}", "received_events_url": "https://api.github.com/users/redshiftzero/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}, {"id": 192539755, "node_id": "MDU6TGFiZWwxOTI1Mzk3NTU=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/app", "name": "app", "color": "bfe5bf", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2018-04-04T01:11:51Z", "updated_at": "2018-04-04T16:36:26Z", "closed_at": "2018-04-04T16:36:26Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "## Description\r\n\r\nAn icon we use on both the source and journalist interfaces is not whitelisted in the Apache AppArmor profile\r\n\r\n## Steps to Reproduce\r\n\r\n1. Spin up staging VMs\r\n2. Access source interface\r\n\r\n## Expected Behavior\r\n\r\nYou see a nice globe icon as described in #3121\r\n\r\n## Actual Behavior\r\n\r\nYou don't see the icon and an AppArmor denial is logged:\r\n\r\n```\r\n[Wed Apr 04 00:46:05.243440 2018] [core:error] [pid 6628:tid 3397292435200] (13)Permission denied: [client 127.0.0.1:54624] AH00132: file permissions deny server access: /var/www/securedrop/static/i/font-awesome/fa-globe-black.png\r\n```\r\n\r\n## Comments\r\n\r\nThis needs to be added to the AppArmor profile for Apache.\r\n\r\nFollowup to #3121 (my bad, I should have caught this in review).", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3224/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3224/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3221", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3221/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3221/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3221/events", "html_url": "https://github.com/freedomofpress/securedrop/issues/3221", "id": 310838075, "node_id": "MDU6SXNzdWUzMTA4MzgwNzU=", "number": 3221, "title": "AppArmor doesn't allow apache to read/write custom logo", "user": {"login": "heartsucker", "id": 3998464, "node_id": "MDQ6VXNlcjM5OTg0NjQ=", "avatar_url": "https://avatars.githubusercontent.com/u/3998464?v=4", "gravatar_id": "", "url": "https://api.github.com/users/heartsucker", "html_url": "https://github.com/heartsucker", "followers_url": "https://api.github.com/users/heartsucker/followers", "following_url": "https://api.github.com/users/heartsucker/following{/other_user}", "gists_url": "https://api.github.com/users/heartsucker/gists{/gist_id}", "starred_url": "https://api.github.com/users/heartsucker/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/heartsucker/subscriptions", "organizations_url": "https://api.github.com/users/heartsucker/orgs", "repos_url": "https://api.github.com/users/heartsucker/repos", "events_url": "https://api.github.com/users/heartsucker/events{/privacy}", "received_events_url": "https://api.github.com/users/heartsucker/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}, {"id": 192539287, "node_id": "MDU6TGFiZWwxOTI1MzkyODc=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/ops/deployment", "name": "ops/deployment", "color": "c7def8", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2018-04-03T13:31:51Z", "updated_at": "2018-04-04T00:04:52Z", "closed_at": "2018-04-04T00:04:52Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "# Bug\r\n\r\n## Description\r\n\r\nAppArmor denies uploading custom logos.\r\n\r\n## Steps to Reproduce\r\n\r\nProvision a prod VM. Try to upload a custom image.\r\n\r\n## Expected Behavior\r\n\r\nThe Apache2 process can read/write to the path for the custom logo.\r\n\r\n## Actual Behavior\r\n\r\nIt will be denied when AA is in enforce mode.\r\n\r\n## Comments\r\n\r\nAdd `/var/www/securedrop/static/i/custom_logo.png rw` to `usr.sbin.apache2` AppArmor profile.\r\n\r\nSide note, this is completely my fault for not catching this while merging #3057.", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3221/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3221/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3216", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3216/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3216/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3216/events", "html_url": "https://github.com/freedomofpress/securedrop/issues/3216", "id": 310507658, "node_id": "MDU6SXNzdWUzMTA1MDc2NTg=", "number": 3216, "title": "Journalist codenames with spaces at the end are still valid", "user": {"login": "ghost", "id": 10137, "node_id": "MDQ6VXNlcjEwMTM3", "avatar_url": "https://avatars.githubusercontent.com/u/10137?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ghost", "html_url": "https://github.com/ghost", "followers_url": "https://api.github.com/users/ghost/followers", "following_url": "https://api.github.com/users/ghost/following{/other_user}", "gists_url": "https://api.github.com/users/ghost/gists{/gist_id}", "starred_url": "https://api.github.com/users/ghost/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ghost/subscriptions", "organizations_url": "https://api.github.com/users/ghost/orgs", "repos_url": "https://api.github.com/users/ghost/repos", "events_url": "https://api.github.com/users/ghost/events{/privacy}", "received_events_url": "https://api.github.com/users/ghost/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}, {"id": 475977470, "node_id": "MDU6TGFiZWw0NzU5Nzc0NzA=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/journalist%20interface%20(JI)", "name": "journalist interface (JI)", "color": "f9d0c4", "default": false, "description": ""}, {"id": 652909251, "node_id": "MDU6TGFiZWw2NTI5MDkyNTE=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/goals:%20journalist%20experience", "name": "goals: journalist experience", "color": "0e8a16", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2018-04-02T14:57:44Z", "updated_at": "2018-04-02T20:28:46Z", "closed_at": "2018-04-02T20:28:46Z", "author_association": "NONE", "active_lock_reason": null, "body": "# Bug\r\n\r\n## Description\r\n\r\nA journalist name with a space at the end cannot login\r\n\r\n## Steps to Reproduce\r\n\r\n* create a journalist user with a space at the end of the journalist name\r\n\r\n## Expected Behavior\r\n\r\n* I am able to login as a journalist even when my name ends with a space\r\n\r\n## Actual Behavior\r\n\r\n* I cannot login if my journalist user name ends with a space\r\n", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3216/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3216/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3205", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3205/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3205/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3205/events", "html_url": "https://github.com/freedomofpress/securedrop/issues/3205", "id": 309933352, "node_id": "MDU6SXNzdWUzMDk5MzMzNTI=", "number": 3205, "title": "Suppress OSSEC alerts asking SecureDrop administrators to upgrade to Xenial", "user": {"login": "eloquence", "id": 213636, "node_id": "MDQ6VXNlcjIxMzYzNg==", "avatar_url": "https://avatars.githubusercontent.com/u/213636?v=4", "gravatar_id": "", "url": "https://api.github.com/users/eloquence", "html_url": "https://github.com/eloquence", "followers_url": "https://api.github.com/users/eloquence/followers", "following_url": "https://api.github.com/users/eloquence/following{/other_user}", "gists_url": "https://api.github.com/users/eloquence/gists{/gist_id}", "starred_url": "https://api.github.com/users/eloquence/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/eloquence/subscriptions", "organizations_url": "https://api.github.com/users/eloquence/orgs", "repos_url": "https://api.github.com/users/eloquence/repos", "events_url": "https://api.github.com/users/eloquence/events{/privacy}", "received_events_url": "https://api.github.com/users/eloquence/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}, {"id": 192539287, "node_id": "MDU6TGFiZWwxOTI1MzkyODc=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/ops/deployment", "name": "ops/deployment", "color": "c7def8", "default": false, "description": null}, {"id": 741396371, "node_id": "MDU6TGFiZWw3NDEzOTYzNzE=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/OSSEC", "name": "OSSEC", "color": "006b75", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "redshiftzero", "id": 7832803, "node_id": "MDQ6VXNlcjc4MzI4MDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7832803?v=4", "gravatar_id": "", "url": "https://api.github.com/users/redshiftzero", "html_url": "https://github.com/redshiftzero", "followers_url": "https://api.github.com/users/redshiftzero/followers", "following_url": "https://api.github.com/users/redshiftzero/following{/other_user}", "gists_url": "https://api.github.com/users/redshiftzero/gists{/gist_id}", "starred_url": "https://api.github.com/users/redshiftzero/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/redshiftzero/subscriptions", "organizations_url": "https://api.github.com/users/redshiftzero/orgs", "repos_url": "https://api.github.com/users/redshiftzero/repos", "events_url": "https://api.github.com/users/redshiftzero/events{/privacy}", "received_events_url": "https://api.github.com/users/redshiftzero/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "redshiftzero", "id": 7832803, "node_id": "MDQ6VXNlcjc4MzI4MDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7832803?v=4", "gravatar_id": "", "url": "https://api.github.com/users/redshiftzero", "html_url": "https://github.com/redshiftzero", "followers_url": "https://api.github.com/users/redshiftzero/followers", "following_url": "https://api.github.com/users/redshiftzero/following{/other_user}", "gists_url": "https://api.github.com/users/redshiftzero/gists{/gist_id}", "starred_url": "https://api.github.com/users/redshiftzero/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/redshiftzero/subscriptions", "organizations_url": "https://api.github.com/users/redshiftzero/orgs", "repos_url": "https://api.github.com/users/redshiftzero/repos", "events_url": "https://api.github.com/users/redshiftzero/events{/privacy}", "received_events_url": "https://api.github.com/users/redshiftzero/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/freedomofpress/securedrop/milestones/43", "html_url": "https://github.com/freedomofpress/securedrop/milestone/43", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/milestones/43/labels", "id": 3249122, "node_id": "MDk6TWlsZXN0b25lMzI0OTEyMg==", "number": 43, "title": "0.8", "description": "Release date to match Tails 3.8 release date in https://tails.boum.org/contribute/calendar/.\r\n\r\nSee also the [detailed i18n timeline](https://forum.securedrop.club/t/about-the-translations-category/16)\r\n\r\nFeature freeze: 2018-06-12 (EOD PDT)\r\n\r\nString freeze: 2018-06-19 (EOD PDT)", "creator": {"login": "eloquence", "id": 213636, "node_id": "MDQ6VXNlcjIxMzYzNg==", "avatar_url": "https://avatars.githubusercontent.com/u/213636?v=4", "gravatar_id": "", "url": "https://api.github.com/users/eloquence", "html_url": "https://github.com/eloquence", "followers_url": "https://api.github.com/users/eloquence/followers", "following_url": "https://api.github.com/users/eloquence/following{/other_user}", "gists_url": "https://api.github.com/users/eloquence/gists{/gist_id}", "starred_url": "https://api.github.com/users/eloquence/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/eloquence/subscriptions", "organizations_url": "https://api.github.com/users/eloquence/orgs", "repos_url": "https://api.github.com/users/eloquence/repos", "events_url": "https://api.github.com/users/eloquence/events{/privacy}", "received_events_url": "https://api.github.com/users/eloquence/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 27, "state": "closed", "created_at": "2018-04-06T22:32:59Z", "updated_at": "2018-06-27T01:19:11Z", "due_on": "2018-06-26T07:00:00Z", "closed_at": "2018-06-27T01:19:11Z"}, "comments": 4, "created_at": "2018-03-29T23:21:30Z", "updated_at": "2018-06-21T21:02:28Z", "closed_at": "2018-06-21T20:31:12Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "Per the original report in #1530, administrators may under some circumstances receive OSSEC alerts asking them to upgrade their SecureDrop servers to Ubuntu Xenial. Doing so would be *a very bad idea* as Ubuntu Xenial is not in fact supported yet (see #3204). We should therefore investigate whether administrators are still receiving such alerts under any circumstances.\r\n\r\nTasks:\r\n- [x] Verify whether these alerts are still sent\r\n- [x] If appropriate, suppress them", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3205/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3205/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3196", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3196/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3196/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3196/events", "html_url": "https://github.com/freedomofpress/securedrop/pull/3196", "id": 308626608, "node_id": "MDExOlB1bGxSZXF1ZXN0MTc3NDg3MjM1", "number": 3196, "title": "Remove installed vanilla kernels via cron-apt", "user": {"login": "emkll", "id": 15223328, "node_id": "MDQ6VXNlcjE1MjIzMzI4", "avatar_url": "https://avatars.githubusercontent.com/u/15223328?v=4", "gravatar_id": "", "url": "https://api.github.com/users/emkll", "html_url": "https://github.com/emkll", "followers_url": "https://api.github.com/users/emkll/followers", "following_url": "https://api.github.com/users/emkll/following{/other_user}", "gists_url": "https://api.github.com/users/emkll/gists{/gist_id}", "starred_url": "https://api.github.com/users/emkll/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/emkll/subscriptions", "organizations_url": "https://api.github.com/users/emkll/orgs", "repos_url": "https://api.github.com/users/emkll/repos", "events_url": "https://api.github.com/users/emkll/events{/privacy}", "received_events_url": "https://api.github.com/users/emkll/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}, {"id": 192539287, "node_id": "MDU6TGFiZWwxOTI1MzkyODc=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/ops/deployment", "name": "ops/deployment", "color": "c7def8", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/freedomofpress/securedrop/milestones/42", "html_url": "https://github.com/freedomofpress/securedrop/milestone/42", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/milestones/42/labels", "id": 3037554, "node_id": "MDk6TWlsZXN0b25lMzAzNzU1NA==", "number": 42, "title": "0.7", "description": "(Release date to match Tails 3.7 release date in https://tails.boum.org/contribute/calendar/). See also the [detailed i18n timeline](https://forum.securedrop.club/t/about-the-translations-category/16). Feature freeze is April 24 EOD. String freeze is May 1 EOD.\r\n\r\nUpdate May 7, 2018: Release was deferred by one week (to May 15) to allow for more time to QA some late stage fixes.", "creator": {"login": "redshiftzero", "id": 7832803, "node_id": "MDQ6VXNlcjc4MzI4MDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7832803?v=4", "gravatar_id": "", "url": "https://api.github.com/users/redshiftzero", "html_url": "https://github.com/redshiftzero", "followers_url": "https://api.github.com/users/redshiftzero/followers", "following_url": "https://api.github.com/users/redshiftzero/following{/other_user}", "gists_url": "https://api.github.com/users/redshiftzero/gists{/gist_id}", "starred_url": "https://api.github.com/users/redshiftzero/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/redshiftzero/subscriptions", "organizations_url": "https://api.github.com/users/redshiftzero/orgs", "repos_url": "https://api.github.com/users/redshiftzero/repos", "events_url": "https://api.github.com/users/redshiftzero/events{/privacy}", "received_events_url": "https://api.github.com/users/redshiftzero/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 75, "state": "closed", "created_at": "2018-01-15T23:46:19Z", "updated_at": "2018-05-16T05:33:37Z", "due_on": "2018-05-15T07:00:00Z", "closed_at": "2018-05-16T05:33:37Z"}, "comments": 3, "created_at": "2018-03-26T15:41:38Z", "updated_at": "2019-01-05T01:00:08Z", "closed_at": "2018-03-31T00:39:31Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/freedomofpress/securedrop/pulls/3196", "html_url": "https://github.com/freedomofpress/securedrop/pull/3196", "diff_url": "https://github.com/freedomofpress/securedrop/pull/3196.diff", "patch_url": "https://github.com/freedomofpress/securedrop/pull/3196.patch", "merged_at": "2018-03-31T00:39:31Z"}, "body": "## Status\r\n\r\nReady for review\r\n\r\n## Description of Changes\r\n\r\nFixes #3180 . A new cron-apt action will ensure that vanilla kernels are always removed from SecureDrop installs.\r\nThe addition of the `1-remove` action in the common role is perhaps excessive, as it will overwritten by the same file as part of the `securedrop-config` is installed. \r\n\r\n## Testing\r\n\r\n### New installs:\r\n\r\n- Install SecureDrop on Production VMs (NOT vagrant boxes, but rather from Ubuntu 14.04.5 server isos).\r\n- Observe that `linux-image-extra-4.4.0-116-generic` is installed by running `dpkg-query -f '${Package} ${Status}\\n' -W 'linux-image*'`.\r\n- Run `sudo cron-apt -i -s` and observe that the `linux-image-extra-4.4.0-116 generic` is uninstalled. Note that #3158 will ensure these kernels are also removed at install-time.\r\n\r\n### Existing installs:\r\n- Install SecureDrop on Production VMs (NOT vagrant boxes, but rather from Ubuntu 14.04.5 server isos) on SecureDrop release 0.6 branch.\r\n- Observe that `linux-image-extra-4.4.0-116-generic` is installed by running `dpkg-query -f '${Package} ${Status}\\n' -W 'linux-image*'`.\r\n- make build-debs on this branch, and install `securedrop-config-0.1.1-0.6-amd64.deb` on apt or mon server\r\n- Verify the existence and content of `/etc/cron-apt/action.d/1-remove`.\r\n- Run `sudo cron-apt -i -s` and observe that  `linux-image-extra-4.4.0-116 generic` is uninstalled.\r\n\r\n## Deployment\r\n\r\n`securedrop-config-0.1.1-$SD_VERSION-amd64.deb` will need to be uploaded to the apt server and served to running SecureDrop instances.\r\n\r\n## Checklist\r\n\r\n### If you made changes to the server application code:\r\n\r\n- [x] Linting (`make ci-lint`) and tests (`make -C securedrop test`) pass in the development container\r\n\r\n### If you made changes to `securedrop-admin`:\r\n\r\n- [ ] Linting and tests (`make -C admin test`) pass in the admin development container\r\n\r\n### If you made changes to the system configuration:\r\n\r\n- [x] [Configuration tests](https://docs.securedrop.org/en/latest/development/testing_configuration_tests.html) pass\r\n\r\n### If you made changes to documentation:\r\n\r\n- [ ] Doc linting (`make docs-lint`) passed locally\r\n", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3196/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3196/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3192", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3192/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3192/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3192/events", "html_url": "https://github.com/freedomofpress/securedrop/pull/3192", "id": 308402385, "node_id": "MDExOlB1bGxSZXF1ZXN0MTc3MzIxNjUw", "number": 3192, "title": "Spelling: language rework", "user": {"login": "comradekingu", "id": 13802408, "node_id": "MDQ6VXNlcjEzODAyNDA4", "avatar_url": "https://avatars.githubusercontent.com/u/13802408?v=4", "gravatar_id": "", "url": "https://api.github.com/users/comradekingu", "html_url": "https://github.com/comradekingu", "followers_url": "https://api.github.com/users/comradekingu/followers", "following_url": "https://api.github.com/users/comradekingu/following{/other_user}", "gists_url": "https://api.github.com/users/comradekingu/gists{/gist_id}", "starred_url": "https://api.github.com/users/comradekingu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/comradekingu/subscriptions", "organizations_url": "https://api.github.com/users/comradekingu/orgs", "repos_url": "https://api.github.com/users/comradekingu/repos", "events_url": "https://api.github.com/users/comradekingu/events{/privacy}", "received_events_url": "https://api.github.com/users/comradekingu/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}, {"id": 652906953, "node_id": "MDU6TGFiZWw2NTI5MDY5NTM=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/i18n", "name": "i18n", "color": "d4c5f9", "default": false, "description": "Anything related to translation or internationalization of SecureDrop"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2018-03-26T00:42:57Z", "updated_at": "2018-03-26T15:18:38Z", "closed_at": "2018-03-26T15:18:38Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/freedomofpress/securedrop/pulls/3192", "html_url": "https://github.com/freedomofpress/securedrop/pull/3192", "diff_url": "https://github.com/freedomofpress/securedrop/pull/3192.diff", "patch_url": "https://github.com/freedomofpress/securedrop/pull/3192.patch", "merged_at": "2018-03-26T15:18:38Z"}, "body": "## Status\r\n\r\nI got to \"fingerprint\", before i threw in the towel on the definitions.\r\n\r\n/ Work in progress\r\n\r\nGoogle authenticator should be replaced with OpenOTP, or similar current recommendation.\r\n\r\nThe placeholder example needs too examples in translation, where the placeholder is moved.\r\nPreferably one where the translation works word-for-word in English too.\r\n\r\n## Description of Changes\r\n\r\nVarious fixes making it easier to read and understand the documentation.\r\n\r\n### If you made changes to documentation:\r\n\r\n- [ ] Doc linting (`make docs-lint`) passed locally\r\n", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3192/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3192/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3189", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3189/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3189/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3189/events", "html_url": "https://github.com/freedomofpress/securedrop/pull/3189", "id": 308222565, "node_id": "MDExOlB1bGxSZXF1ZXN0MTc3MjE2MzA0", "number": 3189, "title": "Removes duplicate tor-apt repo from apt config", "user": {"login": "conorsch", "id": 657862, "node_id": "MDQ6VXNlcjY1Nzg2Mg==", "avatar_url": "https://avatars.githubusercontent.com/u/657862?v=4", "gravatar_id": "", "url": "https://api.github.com/users/conorsch", "html_url": "https://github.com/conorsch", "followers_url": "https://api.github.com/users/conorsch/followers", "following_url": "https://api.github.com/users/conorsch/following{/other_user}", "gists_url": "https://api.github.com/users/conorsch/gists{/gist_id}", "starred_url": "https://api.github.com/users/conorsch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/conorsch/subscriptions", "organizations_url": "https://api.github.com/users/conorsch/orgs", "repos_url": "https://api.github.com/users/conorsch/repos", "events_url": "https://api.github.com/users/conorsch/events{/privacy}", "received_events_url": "https://api.github.com/users/conorsch/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}, {"id": 192539287, "node_id": "MDU6TGFiZWwxOTI1MzkyODc=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/ops/deployment", "name": "ops/deployment", "color": "c7def8", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/freedomofpress/securedrop/milestones/42", "html_url": "https://github.com/freedomofpress/securedrop/milestone/42", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/milestones/42/labels", "id": 3037554, "node_id": "MDk6TWlsZXN0b25lMzAzNzU1NA==", "number": 42, "title": "0.7", "description": "(Release date to match Tails 3.7 release date in https://tails.boum.org/contribute/calendar/). See also the [detailed i18n timeline](https://forum.securedrop.club/t/about-the-translations-category/16). Feature freeze is April 24 EOD. String freeze is May 1 EOD.\r\n\r\nUpdate May 7, 2018: Release was deferred by one week (to May 15) to allow for more time to QA some late stage fixes.", "creator": {"login": "redshiftzero", "id": 7832803, "node_id": "MDQ6VXNlcjc4MzI4MDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7832803?v=4", "gravatar_id": "", "url": "https://api.github.com/users/redshiftzero", "html_url": "https://github.com/redshiftzero", "followers_url": "https://api.github.com/users/redshiftzero/followers", "following_url": "https://api.github.com/users/redshiftzero/following{/other_user}", "gists_url": "https://api.github.com/users/redshiftzero/gists{/gist_id}", "starred_url": "https://api.github.com/users/redshiftzero/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/redshiftzero/subscriptions", "organizations_url": "https://api.github.com/users/redshiftzero/orgs", "repos_url": "https://api.github.com/users/redshiftzero/repos", "events_url": "https://api.github.com/users/redshiftzero/events{/privacy}", "received_events_url": "https://api.github.com/users/redshiftzero/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 75, "state": "closed", "created_at": "2018-01-15T23:46:19Z", "updated_at": "2018-05-16T05:33:37Z", "due_on": "2018-05-15T07:00:00Z", "closed_at": "2018-05-16T05:33:37Z"}, "comments": 2, "created_at": "2018-03-24T02:34:47Z", "updated_at": "2019-02-27T10:35:10Z", "closed_at": "2018-03-26T21:13:49Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/freedomofpress/securedrop/pulls/3189", "html_url": "https://github.com/freedomofpress/securedrop/pull/3189", "diff_url": "https://github.com/freedomofpress/securedrop/pull/3189.diff", "patch_url": "https://github.com/freedomofpress/securedrop/pull/3189.patch", "merged_at": "2018-03-26T21:13:49Z"}, "body": "## Status\r\n\r\nReady for review.\r\n\r\n## Description of Changes\r\n\r\nFixes #2938.\r\n\r\nAchieves the removal by renaming the file inside the `securedrop-config`\r\npackage. We can trust dpkg to remove the file once the package has been\r\nupgraded. The Ansible logic was already using the filepath now used also\r\nby the `securedrop-config` package, so no Ansible changes are required.\r\n\r\n## Testing\r\n\r\n1. Create fresh staging VMs on `develop`.\r\n2. Check out this feature branch. \r\n3. Run `./testinfra/test.py app-staging` and confirm you get 1 failing test (for too many apt repos).\r\n4. Run `make build-debs && vagrant provision /stag/`. \r\n5. Re-run `./testinfra/test.py app-staging` and confirm **all tests pass.**\r\n## Deployment\r\n\r\nAny special considerations for deployment? Consider both:\r\n\r\nYes, designed to clean up existing installs with a duplicate apt repo. Particularly if we consolidate the apt repos down the road, we'll want to make sure we don't leave any dangling references. The changes here should suffice.\r\n\r\n## Checklist\r\n\r\n### If you made changes to the server application code:\r\n\r\n- [ ] Linting (`make ci-lint`) and tests (`make -C securedrop test`) pass in the development container\r\n\r\n### If you made changes to `securedrop-admin`:\r\n\r\n- [ ] Linting and tests (`make -C admin test`) pass in the admin development container\r\n\r\n### If you made changes to the system configuration:\r\n\r\n- [ ] [Configuration tests](https://docs.securedrop.org/en/latest/development/testing_configuration_tests.html) pass\r\n\r\n### If you made changes to documentation:\r\n\r\n- [ ] Doc linting (`make docs-lint`) passed locally\r\n", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3189/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3189/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3187", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3187/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3187/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3187/events", "html_url": "https://github.com/freedomofpress/securedrop/pull/3187", "id": 307725779, "node_id": "MDExOlB1bGxSZXF1ZXN0MTc2ODQxMDQw", "number": 3187, "title": "tests: bump cryptography to 2.2.1", "user": {"login": "ghost", "id": 10137, "node_id": "MDQ6VXNlcjEwMTM3", "avatar_url": "https://avatars.githubusercontent.com/u/10137?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ghost", "html_url": "https://github.com/ghost", "followers_url": "https://api.github.com/users/ghost/followers", "following_url": "https://api.github.com/users/ghost/following{/other_user}", "gists_url": "https://api.github.com/users/ghost/gists{/gist_id}", "starred_url": "https://api.github.com/users/ghost/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ghost/subscriptions", "organizations_url": "https://api.github.com/users/ghost/orgs", "repos_url": "https://api.github.com/users/ghost/repos", "events_url": "https://api.github.com/users/ghost/events{/privacy}", "received_events_url": "https://api.github.com/users/ghost/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}, {"id": 616447641, "node_id": "MDU6TGFiZWw2MTY0NDc2NDE=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/development%20env", "name": "development env", "color": "bfd4f2", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2018-03-22T16:44:39Z", "updated_at": "2019-02-27T10:47:37Z", "closed_at": "2018-03-22T18:42:51Z", "author_association": "NONE", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/freedomofpress/securedrop/pulls/3187", "html_url": "https://github.com/freedomofpress/securedrop/pull/3187", "diff_url": "https://github.com/freedomofpress/securedrop/pull/3187.diff", "patch_url": "https://github.com/freedomofpress/securedrop/pull/3187.patch", "merged_at": "2018-03-22T18:42:51Z"}, "body": "## Status\r\n\r\nReady for review\r\n\r\n## Description of Changes\r\n\r\nWith cryptography version 2.0.3 the following happens:\r\n\r\n> import requests\r\n> requests.get('https://weblate.securedrop.org/exports/stats/securedrop/securedrop/?format=json')\r\nFrom cffi callback <function _verify_callback at 0x7f18204d15f0>:\r\nTraceback (most recent call last):\r\n  File \"/home/loic/software/securedrop/virtualenv/local/lib/python2.7/site-packages/OpenSSL/SSL.py\", line 313, in wrapper\r\n    _lib.X509_up_ref(x509)\r\nAttributeError: 'module' object has no attribute 'X509_up_ref'\r\n\r\nand also in other contexts. Upgrading to 2.2.1 fixes the problem.\r\n\r\n## Testing\r\n\r\nIf CI pases it means the development environment is not broken.\r\n\r\n## Deployment\r\n\r\nN/A only development\r\n", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3187/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3187/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3180", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3180/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3180/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3180/events", "html_url": "https://github.com/freedomofpress/securedrop/issues/3180", "id": 307353680, "node_id": "MDU6SXNzdWUzMDczNTM2ODA=", "number": 3180, "title": "Remove generic kernel packages for existing installs", "user": {"login": "emkll", "id": 15223328, "node_id": "MDQ6VXNlcjE1MjIzMzI4", "avatar_url": "https://avatars.githubusercontent.com/u/15223328?v=4", "gravatar_id": "", "url": "https://api.github.com/users/emkll", "html_url": "https://github.com/emkll", "followers_url": "https://api.github.com/users/emkll/followers", "following_url": "https://api.github.com/users/emkll/following{/other_user}", "gists_url": "https://api.github.com/users/emkll/gists{/gist_id}", "starred_url": "https://api.github.com/users/emkll/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/emkll/subscriptions", "organizations_url": "https://api.github.com/users/emkll/orgs", "repos_url": "https://api.github.com/users/emkll/repos", "events_url": "https://api.github.com/users/emkll/events{/privacy}", "received_events_url": "https://api.github.com/users/emkll/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}, {"id": 385585080, "node_id": "MDU6TGFiZWwzODU1ODUwODA=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/QA:%20Release", "name": "QA: Release", "color": "fbca04", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "emkll", "id": 15223328, "node_id": "MDQ6VXNlcjE1MjIzMzI4", "avatar_url": "https://avatars.githubusercontent.com/u/15223328?v=4", "gravatar_id": "", "url": "https://api.github.com/users/emkll", "html_url": "https://github.com/emkll", "followers_url": "https://api.github.com/users/emkll/followers", "following_url": "https://api.github.com/users/emkll/following{/other_user}", "gists_url": "https://api.github.com/users/emkll/gists{/gist_id}", "starred_url": "https://api.github.com/users/emkll/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/emkll/subscriptions", "organizations_url": "https://api.github.com/users/emkll/orgs", "repos_url": "https://api.github.com/users/emkll/repos", "events_url": "https://api.github.com/users/emkll/events{/privacy}", "received_events_url": "https://api.github.com/users/emkll/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "emkll", "id": 15223328, "node_id": "MDQ6VXNlcjE1MjIzMzI4", "avatar_url": "https://avatars.githubusercontent.com/u/15223328?v=4", "gravatar_id": "", "url": "https://api.github.com/users/emkll", "html_url": "https://github.com/emkll", "followers_url": "https://api.github.com/users/emkll/followers", "following_url": "https://api.github.com/users/emkll/following{/other_user}", "gists_url": "https://api.github.com/users/emkll/gists{/gist_id}", "starred_url": "https://api.github.com/users/emkll/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/emkll/subscriptions", "organizations_url": "https://api.github.com/users/emkll/orgs", "repos_url": "https://api.github.com/users/emkll/repos", "events_url": "https://api.github.com/users/emkll/events{/privacy}", "received_events_url": "https://api.github.com/users/emkll/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/freedomofpress/securedrop/milestones/42", "html_url": "https://github.com/freedomofpress/securedrop/milestone/42", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/milestones/42/labels", "id": 3037554, "node_id": "MDk6TWlsZXN0b25lMzAzNzU1NA==", "number": 42, "title": "0.7", "description": "(Release date to match Tails 3.7 release date in https://tails.boum.org/contribute/calendar/). See also the [detailed i18n timeline](https://forum.securedrop.club/t/about-the-translations-category/16). Feature freeze is April 24 EOD. String freeze is May 1 EOD.\r\n\r\nUpdate May 7, 2018: Release was deferred by one week (to May 15) to allow for more time to QA some late stage fixes.", "creator": {"login": "redshiftzero", "id": 7832803, "node_id": "MDQ6VXNlcjc4MzI4MDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7832803?v=4", "gravatar_id": "", "url": "https://api.github.com/users/redshiftzero", "html_url": "https://github.com/redshiftzero", "followers_url": "https://api.github.com/users/redshiftzero/followers", "following_url": "https://api.github.com/users/redshiftzero/following{/other_user}", "gists_url": "https://api.github.com/users/redshiftzero/gists{/gist_id}", "starred_url": "https://api.github.com/users/redshiftzero/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/redshiftzero/subscriptions", "organizations_url": "https://api.github.com/users/redshiftzero/orgs", "repos_url": "https://api.github.com/users/redshiftzero/repos", "events_url": "https://api.github.com/users/redshiftzero/events{/privacy}", "received_events_url": "https://api.github.com/users/redshiftzero/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 75, "state": "closed", "created_at": "2018-01-15T23:46:19Z", "updated_at": "2018-05-16T05:33:37Z", "due_on": "2018-05-15T07:00:00Z", "closed_at": "2018-05-16T05:33:37Z"}, "comments": 1, "created_at": "2018-03-21T17:50:50Z", "updated_at": "2018-04-05T00:31:48Z", "closed_at": "2018-03-31T00:39:31Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "# Bug\r\n\r\n## Description\r\n\r\nWhen performing a clean install on a physical instance with `ubuntu-14.04.5-server-amd64` iso,  the installer does not remove generic kernel packages, in this instance, `linux-image-4.4.0-115-generic`.\r\n## Steps to Reproduce\r\n\r\n- Install SecureDrop on Ubuntu Server 14.04.5.\r\n- `ssh app` or `ssh mon`\r\n- `sudo apt list --installed | grep linux-image`\r\n- observe the presence of the generic kernel image\r\n\r\n## Expected Behavior\r\n\r\nThese images should be removed as part of the grsecurity role as part of #3135. Postinst script of `securedrop-config` could be used to remove these packages.\r\n\r\n## Actual Behavior\r\n\r\nThe generic images are not removed.\r\n", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3180/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3180/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3173", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3173/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3173/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3173/events", "html_url": "https://github.com/freedomofpress/securedrop/issues/3173", "id": 305868639, "node_id": "MDU6SXNzdWUzMDU4Njg2Mzk=", "number": 3173, "title": "Attempting to change a password right after logging in errors out", "user": {"login": "heartsucker", "id": 3998464, "node_id": "MDQ6VXNlcjM5OTg0NjQ=", "avatar_url": "https://avatars.githubusercontent.com/u/3998464?v=4", "gravatar_id": "", "url": "https://api.github.com/users/heartsucker", "html_url": "https://github.com/heartsucker", "followers_url": "https://api.github.com/users/heartsucker/followers", "following_url": "https://api.github.com/users/heartsucker/following{/other_user}", "gists_url": "https://api.github.com/users/heartsucker/gists{/gist_id}", "starred_url": "https://api.github.com/users/heartsucker/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/heartsucker/subscriptions", "organizations_url": "https://api.github.com/users/heartsucker/orgs", "repos_url": "https://api.github.com/users/heartsucker/repos", "events_url": "https://api.github.com/users/heartsucker/events{/privacy}", "received_events_url": "https://api.github.com/users/heartsucker/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}, {"id": 192539755, "node_id": "MDU6TGFiZWwxOTI1Mzk3NTU=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/app", "name": "app", "color": "bfe5bf", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2018-03-16T10:06:52Z", "updated_at": "2020-10-16T17:24:03Z", "closed_at": "2020-10-16T17:24:02Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "# Bug\r\n\r\n## Description\r\n\r\nPart of the login hardening on SD is preventing OTP token reuse. This means if you login and within the 30 second window attempt to change your password (or take another action that requires token authentication), then you will receive an error message that may not be helpful.\r\n\r\n## Steps to Reproduce\r\n\r\n1. Login\r\n2. Immediately attempt to change your password\r\n\r\nOr\r\n\r\nRun `test_user_edits_password_success_response` without login hardening disabled.\r\n\r\n## Expected Behavior\r\n\r\nLogin hardening only affects the actual login.\r\n\r\n## Actual Behavior\r\n\r\nLogin hardening affects the entire app.", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3173/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3173/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3166", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3166/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3166/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3166/events", "html_url": "https://github.com/freedomofpress/securedrop/pull/3166", "id": 305566106, "node_id": "MDExOlB1bGxSZXF1ZXN0MTc1MjYwNjY0", "number": 3166, "title": "[0.6] docs: update the documentation screenshots", "user": {"login": "ghost", "id": 10137, "node_id": "MDQ6VXNlcjEwMTM3", "avatar_url": "https://avatars.githubusercontent.com/u/10137?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ghost", "html_url": "https://github.com/ghost", "followers_url": "https://api.github.com/users/ghost/followers", "following_url": "https://api.github.com/users/ghost/following{/other_user}", "gists_url": "https://api.github.com/users/ghost/gists{/gist_id}", "starred_url": "https://api.github.com/users/ghost/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ghost/subscriptions", "organizations_url": "https://api.github.com/users/ghost/orgs", "repos_url": "https://api.github.com/users/ghost/repos", "events_url": "https://api.github.com/users/ghost/events{/privacy}", "received_events_url": "https://api.github.com/users/ghost/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}, {"id": 118465787, "node_id": "MDU6TGFiZWwxMTg0NjU3ODc=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/docs", "name": "docs", "color": "d4c5f9", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2018-03-15T14:05:30Z", "updated_at": "2018-03-15T20:47:23Z", "closed_at": "2018-03-15T20:46:44Z", "author_association": "NONE", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/freedomofpress/securedrop/pulls/3166", "html_url": "https://github.com/freedomofpress/securedrop/pull/3166", "diff_url": "https://github.com/freedomofpress/securedrop/pull/3166.diff", "patch_url": "https://github.com/freedomofpress/securedrop/pull/3166.patch", "merged_at": "2018-03-15T20:46:44Z"}, "body": "## Status\r\n\r\nReady for review\r\n\r\n## Description of Changes\r\n\r\nupdate the documentation screenshots\r\n\r\n## Testing\r\n\r\nVerify visually, side by side that the updated screenshots are as expected.\r\n\r\n## Deployment\r\n\r\nN/A\r\n\r\n## Checklist\r\n\r\n### If you made changes to documentation:\r\n\r\n- [x] Doc linting (`make docs-lint`) passed locally\r\n", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3166/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3166/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3165", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3165/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3165/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3165/events", "html_url": "https://github.com/freedomofpress/securedrop/pull/3165", "id": 305560586, "node_id": "MDExOlB1bGxSZXF1ZXN0MTc1MjU2NDQ1", "number": 3165, "title": "docs: update-user-guides needs to force update sass to ensure the latest", "user": {"login": "ghost", "id": 10137, "node_id": "MDQ6VXNlcjEwMTM3", "avatar_url": "https://avatars.githubusercontent.com/u/10137?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ghost", "html_url": "https://github.com/ghost", "followers_url": "https://api.github.com/users/ghost/followers", "following_url": "https://api.github.com/users/ghost/following{/other_user}", "gists_url": "https://api.github.com/users/ghost/gists{/gist_id}", "starred_url": "https://api.github.com/users/ghost/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ghost/subscriptions", "organizations_url": "https://api.github.com/users/ghost/orgs", "repos_url": "https://api.github.com/users/ghost/repos", "events_url": "https://api.github.com/users/ghost/events{/privacy}", "received_events_url": "https://api.github.com/users/ghost/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}, {"id": 118465787, "node_id": "MDU6TGFiZWwxMTg0NjU3ODc=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/docs", "name": "docs", "color": "d4c5f9", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2018-03-15T13:51:02Z", "updated_at": "2018-04-10T15:04:02Z", "closed_at": "2018-03-15T16:18:54Z", "author_association": "NONE", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/freedomofpress/securedrop/pulls/3165", "html_url": "https://github.com/freedomofpress/securedrop/pull/3165", "diff_url": "https://github.com/freedomofpress/securedrop/pull/3165.diff", "patch_url": "https://github.com/freedomofpress/securedrop/pull/3165.patch", "merged_at": "2018-03-15T16:18:54Z"}, "body": "## Status\r\n\r\nReady for review\r\n\r\n## Description of Changes\r\n\r\nIf the directory `sass` already exists, it fails with:\r\n\r\n<pre>\r\nErrno::EISDIR: Is a directory - sass\r\n  Use --trace for backtrace.\r\n</pre>\r\n\r\n## Testing\r\n\r\n* make -C securedrop test # will create the `sass` directory\r\n* make -C securedrop update-user-guides\r\n\r\n## Deployment\r\n\r\nN/A\r\n", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3165/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3165/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3163", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3163/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3163/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3163/events", "html_url": "https://github.com/freedomofpress/securedrop/pull/3163", "id": 305480824, "node_id": "MDExOlB1bGxSZXF1ZXN0MTc1MTk2MzY5", "number": 3163, "title": "docs: add missing unlock step", "user": {"login": "ghost", "id": 10137, "node_id": "MDQ6VXNlcjEwMTM3", "avatar_url": "https://avatars.githubusercontent.com/u/10137?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ghost", "html_url": "https://github.com/ghost", "followers_url": "https://api.github.com/users/ghost/followers", "following_url": "https://api.github.com/users/ghost/following{/other_user}", "gists_url": "https://api.github.com/users/ghost/gists{/gist_id}", "starred_url": "https://api.github.com/users/ghost/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ghost/subscriptions", "organizations_url": "https://api.github.com/users/ghost/orgs", "repos_url": "https://api.github.com/users/ghost/repos", "events_url": "https://api.github.com/users/ghost/events{/privacy}", "received_events_url": "https://api.github.com/users/ghost/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}, {"id": 652906953, "node_id": "MDU6TGFiZWw2NTI5MDY5NTM=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/i18n", "name": "i18n", "color": "d4c5f9", "default": false, "description": "Anything related to translation or internationalization of SecureDrop"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2018-03-15T09:51:47Z", "updated_at": "2018-03-15T13:02:40Z", "closed_at": "2018-03-15T13:02:36Z", "author_association": "NONE", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/freedomofpress/securedrop/pulls/3163", "html_url": "https://github.com/freedomofpress/securedrop/pull/3163", "diff_url": "https://github.com/freedomofpress/securedrop/pull/3163.diff", "patch_url": "https://github.com/freedomofpress/securedrop/pull/3163.patch", "merged_at": "2018-03-15T13:02:36Z"}, "body": "## Status\r\n\r\nReady for review\r\n\r\n## Description of Changes\r\n\r\n* add missing unlock step\r\n\r\n## Testing\r\n\r\nN/A\r\n\r\n## Deployment\r\n\r\nN/A\r\n\r\n## Checklist\r\n\r\n### If you made changes to documentation:\r\n\r\n- [x] Doc linting (`make docs-lint`) passed locally\r\n", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3163/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3163/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3158", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3158/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3158/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3158/events", "html_url": "https://github.com/freedomofpress/securedrop/pull/3158", "id": 305293437, "node_id": "MDExOlB1bGxSZXF1ZXN0MTc1MDU3OTU2", "number": 3158, "title": "Remove vanilla Xenial Ubuntu kernels at install-time", "user": {"login": "emkll", "id": 15223328, "node_id": "MDQ6VXNlcjE1MjIzMzI4", "avatar_url": "https://avatars.githubusercontent.com/u/15223328?v=4", "gravatar_id": "", "url": "https://api.github.com/users/emkll", "html_url": "https://github.com/emkll", "followers_url": "https://api.github.com/users/emkll/followers", "following_url": "https://api.github.com/users/emkll/following{/other_user}", "gists_url": "https://api.github.com/users/emkll/gists{/gist_id}", "starred_url": "https://api.github.com/users/emkll/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/emkll/subscriptions", "organizations_url": "https://api.github.com/users/emkll/orgs", "repos_url": "https://api.github.com/users/emkll/repos", "events_url": "https://api.github.com/users/emkll/events{/privacy}", "received_events_url": "https://api.github.com/users/emkll/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}, {"id": 192539287, "node_id": "MDU6TGFiZWwxOTI1MzkyODc=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/ops/deployment", "name": "ops/deployment", "color": "c7def8", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/freedomofpress/securedrop/milestones/42", "html_url": "https://github.com/freedomofpress/securedrop/milestone/42", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/milestones/42/labels", "id": 3037554, "node_id": "MDk6TWlsZXN0b25lMzAzNzU1NA==", "number": 42, "title": "0.7", "description": "(Release date to match Tails 3.7 release date in https://tails.boum.org/contribute/calendar/). See also the [detailed i18n timeline](https://forum.securedrop.club/t/about-the-translations-category/16). Feature freeze is April 24 EOD. String freeze is May 1 EOD.\r\n\r\nUpdate May 7, 2018: Release was deferred by one week (to May 15) to allow for more time to QA some late stage fixes.", "creator": {"login": "redshiftzero", "id": 7832803, "node_id": "MDQ6VXNlcjc4MzI4MDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7832803?v=4", "gravatar_id": "", "url": "https://api.github.com/users/redshiftzero", "html_url": "https://github.com/redshiftzero", "followers_url": "https://api.github.com/users/redshiftzero/followers", "following_url": "https://api.github.com/users/redshiftzero/following{/other_user}", "gists_url": "https://api.github.com/users/redshiftzero/gists{/gist_id}", "starred_url": "https://api.github.com/users/redshiftzero/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/redshiftzero/subscriptions", "organizations_url": "https://api.github.com/users/redshiftzero/orgs", "repos_url": "https://api.github.com/users/redshiftzero/repos", "events_url": "https://api.github.com/users/redshiftzero/events{/privacy}", "received_events_url": "https://api.github.com/users/redshiftzero/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 75, "state": "closed", "created_at": "2018-01-15T23:46:19Z", "updated_at": "2018-05-16T05:33:37Z", "due_on": "2018-05-15T07:00:00Z", "closed_at": "2018-05-16T05:33:37Z"}, "comments": 6, "created_at": "2018-03-14T19:13:39Z", "updated_at": "2018-03-29T17:16:30Z", "closed_at": "2018-03-29T17:16:21Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/freedomofpress/securedrop/pulls/3158", "html_url": "https://github.com/freedomofpress/securedrop/pull/3158", "diff_url": "https://github.com/freedomofpress/securedrop/pull/3158.diff", "patch_url": "https://github.com/freedomofpress/securedrop/pull/3158.patch", "merged_at": "2018-03-29T17:16:21Z"}, "body": "## Status\r\n\r\nReady for Review\r\n\r\n## Description of Changes\r\n\r\nFixes #3135 .\r\n\r\nNew SecureDrop installs will now remove all vanilla kernels that were installed as dependencies of the  `linux-image-generic-lts-xenial` metapackage.\r\n\r\nA fix to the regex (instead of using wildcard) will ensure the default trusty kernels are correctly removed at install time. The command module instead of apt, as apt module does[ not support regex wildcards](https://docs.ansible.com/ansible/latest/apt_module.html).\r\n\r\n## Testing\r\n\r\n1- Install SecureDrop on Production VMs (NOT vagrant boxes, but rather from Ubuntu 14.04.5 server isos) or hardware with the logic provided in this branch.\r\n2- ssh into server and `ls /boot` or `sudo apt list --installed` and observe no vanilla kernels installed (only 3.14.79-grsec and 4.4.115-grsec)\r\n\r\n## Deployment\r\n\r\nThis will remove vanilla kernels for new installs only. For (if any), see #3180. \r\n\r\n## Checklist\r\n\r\n### If you made changes to the server application code:\r\n\r\n- [ ] Linting (`make ci-lint`) and tests (`make -C securedrop test`) pass in the development container\r\n\r\n### If you made changes to `securedrop-admin`:\r\n\r\n- [ ] Linting and tests (`make -C admin test`) pass in the admin development container\r\n\r\n### If you made changes to the system configuration:\r\n\r\n- [x] [Configuration tests](https://docs.securedrop.org/en/latest/development/testing_configuration_tests.html) pass\r\n\r\n### If you made changes to documentation:\r\n\r\n- [ ] Doc linting (`make docs-lint`) passed locally\r\n", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3158/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3158/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3156", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3156/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3156/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3156/events", "html_url": "https://github.com/freedomofpress/securedrop/pull/3156", "id": 305258516, "node_id": "MDExOlB1bGxSZXF1ZXN0MTc1MDMxNDQx", "number": 3156, "title": "docs: no automatic upgrade path for tails 3.6", "user": {"login": "ghost", "id": 10137, "node_id": "MDQ6VXNlcjEwMTM3", "avatar_url": "https://avatars.githubusercontent.com/u/10137?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ghost", "html_url": "https://github.com/ghost", "followers_url": "https://api.github.com/users/ghost/followers", "following_url": "https://api.github.com/users/ghost/following{/other_user}", "gists_url": "https://api.github.com/users/ghost/gists{/gist_id}", "starred_url": "https://api.github.com/users/ghost/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ghost/subscriptions", "organizations_url": "https://api.github.com/users/ghost/orgs", "repos_url": "https://api.github.com/users/ghost/repos", "events_url": "https://api.github.com/users/ghost/events{/privacy}", "received_events_url": "https://api.github.com/users/ghost/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}, {"id": 118465787, "node_id": "MDU6TGFiZWwxMTg0NjU3ODc=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/docs", "name": "docs", "color": "d4c5f9", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2018-03-14T17:32:31Z", "updated_at": "2018-03-14T18:25:38Z", "closed_at": "2018-03-14T18:25:23Z", "author_association": "NONE", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/freedomofpress/securedrop/pulls/3156", "html_url": "https://github.com/freedomofpress/securedrop/pull/3156", "diff_url": "https://github.com/freedomofpress/securedrop/pull/3156.diff", "patch_url": "https://github.com/freedomofpress/securedrop/pull/3156.patch", "merged_at": "2018-03-14T18:25:23Z"}, "body": "## Status\r\n\r\nReady for review\r\n\r\n## Description of Changes\r\n\r\nThere is no automatic upgrade path for tails 3.6.\r\n\r\n## Testing\r\n\r\n* Get a Tails 3.5 based USB key (Admin or SVS or...)\r\n* Follow the upgrade path\r\n\r\n## Deployment\r\n\r\nN/A\r\n\r\n## Checklist\r\n\r\n### If you made changes to documentation:\r\n\r\n- [x] Doc linting (`make docs-lint`) passed locally\r\n", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3156/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3156/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3147", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3147/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3147/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3147/events", "html_url": "https://github.com/freedomofpress/securedrop/pull/3147", "id": 304758439, "node_id": "MDExOlB1bGxSZXF1ZXN0MTc0NjU0ODk0", "number": 3147, "title": "Updates test_the_installation.rst [fixes #3011]", "user": {"login": "barun511", "id": 12569516, "node_id": "MDQ6VXNlcjEyNTY5NTE2", "avatar_url": "https://avatars.githubusercontent.com/u/12569516?v=4", "gravatar_id": "", "url": "https://api.github.com/users/barun511", "html_url": "https://github.com/barun511", "followers_url": "https://api.github.com/users/barun511/followers", "following_url": "https://api.github.com/users/barun511/following{/other_user}", "gists_url": "https://api.github.com/users/barun511/gists{/gist_id}", "starred_url": "https://api.github.com/users/barun511/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/barun511/subscriptions", "organizations_url": "https://api.github.com/users/barun511/orgs", "repos_url": "https://api.github.com/users/barun511/repos", "events_url": "https://api.github.com/users/barun511/events{/privacy}", "received_events_url": "https://api.github.com/users/barun511/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}, {"id": 118465787, "node_id": "MDU6TGFiZWwxMTg0NjU3ODc=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/docs", "name": "docs", "color": "d4c5f9", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2018-03-13T13:11:26Z", "updated_at": "2018-03-15T13:08:36Z", "closed_at": "2018-03-15T13:08:31Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/freedomofpress/securedrop/pulls/3147", "html_url": "https://github.com/freedomofpress/securedrop/pull/3147", "diff_url": "https://github.com/freedomofpress/securedrop/pull/3147.diff", "patch_url": "https://github.com/freedomofpress/securedrop/pull/3147.patch", "merged_at": "2018-03-15T13:08:31Z"}, "body": "## Status\r\n\r\nReady for review \r\n## Description of Changes\r\n\r\nFixes #3011\r\n\r\nChanges proposed in this pull request:\r\n\r\nFixes typos and stylistic errors in doc/test_the_installation.rst\r\n\r\n## Testing\r\n\r\nHow should the reviewer test this PR?\r\nWrite out any special testing steps here.\r\n\r\n## Deployment\r\n\r\nAny special considerations for deployment? Consider both:\r\n\r\n1. Upgrading existing production instances.\r\n2. New installs.\r\n\r\n## Checklist\r\n\r\n### If you made changes to the server application code:\r\n\r\n- [ ] Linting (`make ci-lint`) and tests (`make -C securedrop test`) pass in the development container\r\n\r\n### If you made changes to `securedrop-admin`:\r\n\r\n- [ ] Linting and tests (`make -C admin test`) pass in the admin development container\r\n\r\n### If you made changes to the system configuration:\r\n\r\n- [ ] [Configuration tests](https://docs.securedrop.org/en/latest/development/testing_configuration_tests.html) pass\r\n\r\n### If you made changes to documentation:\r\n\r\n- [x] Doc linting (`make docs-lint`) passed locally\r\n", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3147/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3147/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3135", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3135/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3135/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3135/events", "html_url": "https://github.com/freedomofpress/securedrop/issues/3135", "id": 303926846, "node_id": "MDU6SXNzdWUzMDM5MjY4NDY=", "number": 3135, "title": "securedrop-admin install does not uninstall generic kernel packages", "user": {"login": "emkll", "id": 15223328, "node_id": "MDQ6VXNlcjE1MjIzMzI4", "avatar_url": "https://avatars.githubusercontent.com/u/15223328?v=4", "gravatar_id": "", "url": "https://api.github.com/users/emkll", "html_url": "https://github.com/emkll", "followers_url": "https://api.github.com/users/emkll/followers", "following_url": "https://api.github.com/users/emkll/following{/other_user}", "gists_url": "https://api.github.com/users/emkll/gists{/gist_id}", "starred_url": "https://api.github.com/users/emkll/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/emkll/subscriptions", "organizations_url": "https://api.github.com/users/emkll/orgs", "repos_url": "https://api.github.com/users/emkll/repos", "events_url": "https://api.github.com/users/emkll/events{/privacy}", "received_events_url": "https://api.github.com/users/emkll/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}, {"id": 385585080, "node_id": "MDU6TGFiZWwzODU1ODUwODA=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/QA:%20Release", "name": "QA: Release", "color": "fbca04", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "emkll", "id": 15223328, "node_id": "MDQ6VXNlcjE1MjIzMzI4", "avatar_url": "https://avatars.githubusercontent.com/u/15223328?v=4", "gravatar_id": "", "url": "https://api.github.com/users/emkll", "html_url": "https://github.com/emkll", "followers_url": "https://api.github.com/users/emkll/followers", "following_url": "https://api.github.com/users/emkll/following{/other_user}", "gists_url": "https://api.github.com/users/emkll/gists{/gist_id}", "starred_url": "https://api.github.com/users/emkll/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/emkll/subscriptions", "organizations_url": "https://api.github.com/users/emkll/orgs", "repos_url": "https://api.github.com/users/emkll/repos", "events_url": "https://api.github.com/users/emkll/events{/privacy}", "received_events_url": "https://api.github.com/users/emkll/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "emkll", "id": 15223328, "node_id": "MDQ6VXNlcjE1MjIzMzI4", "avatar_url": "https://avatars.githubusercontent.com/u/15223328?v=4", "gravatar_id": "", "url": "https://api.github.com/users/emkll", "html_url": "https://github.com/emkll", "followers_url": "https://api.github.com/users/emkll/followers", "following_url": "https://api.github.com/users/emkll/following{/other_user}", "gists_url": "https://api.github.com/users/emkll/gists{/gist_id}", "starred_url": "https://api.github.com/users/emkll/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/emkll/subscriptions", "organizations_url": "https://api.github.com/users/emkll/orgs", "repos_url": "https://api.github.com/users/emkll/repos", "events_url": "https://api.github.com/users/emkll/events{/privacy}", "received_events_url": "https://api.github.com/users/emkll/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/freedomofpress/securedrop/milestones/42", "html_url": "https://github.com/freedomofpress/securedrop/milestone/42", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/milestones/42/labels", "id": 3037554, "node_id": "MDk6TWlsZXN0b25lMzAzNzU1NA==", "number": 42, "title": "0.7", "description": "(Release date to match Tails 3.7 release date in https://tails.boum.org/contribute/calendar/). See also the [detailed i18n timeline](https://forum.securedrop.club/t/about-the-translations-category/16). Feature freeze is April 24 EOD. String freeze is May 1 EOD.\r\n\r\nUpdate May 7, 2018: Release was deferred by one week (to May 15) to allow for more time to QA some late stage fixes.", "creator": {"login": "redshiftzero", "id": 7832803, "node_id": "MDQ6VXNlcjc4MzI4MDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7832803?v=4", "gravatar_id": "", "url": "https://api.github.com/users/redshiftzero", "html_url": "https://github.com/redshiftzero", "followers_url": "https://api.github.com/users/redshiftzero/followers", "following_url": "https://api.github.com/users/redshiftzero/following{/other_user}", "gists_url": "https://api.github.com/users/redshiftzero/gists{/gist_id}", "starred_url": "https://api.github.com/users/redshiftzero/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/redshiftzero/subscriptions", "organizations_url": "https://api.github.com/users/redshiftzero/orgs", "repos_url": "https://api.github.com/users/redshiftzero/repos", "events_url": "https://api.github.com/users/redshiftzero/events{/privacy}", "received_events_url": "https://api.github.com/users/redshiftzero/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 75, "state": "closed", "created_at": "2018-01-15T23:46:19Z", "updated_at": "2018-05-16T05:33:37Z", "due_on": "2018-05-15T07:00:00Z", "closed_at": "2018-05-16T05:33:37Z"}, "comments": 4, "created_at": "2018-03-09T17:55:22Z", "updated_at": "2018-03-29T17:16:21Z", "closed_at": "2018-03-29T17:16:21Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "# Bug\r\n\r\n## Description\r\n\r\nWhen performing a clean install on a physical instance with `ubuntu-14.04.5-server-amd64` iso,  the installer does not remove generic kernel packages, in this instance, `linux-image-4.4.0-115-generic`.\r\n## Steps to Reproduce\r\n\r\n- Install SecureDrop on Ubuntu Server 14.04.5.\r\n- `ssh app` or `ssh mon`\r\n- `sudo apt list --installed | grep linux-image`\r\n- observe the presence of the generic kernel image\r\n\r\n \r\n\r\n## Expected Behavior\r\n\r\nThese images should be removed as part of the grsecurity role [here](https://github.com/freedomofpress/securedrop/blob/develop/install_files/ansible-base/roles/grsecurity/tasks/clean_packages.yml).\r\n\r\n## Actual Behavior\r\n\r\nThe generic images are not removed.\r\n", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3135/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3135/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3129", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3129/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3129/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3129/events", "html_url": "https://github.com/freedomofpress/securedrop/pull/3129", "id": 303676104, "node_id": "MDExOlB1bGxSZXF1ZXN0MTczODg0NTk2", "number": 3129, "title": "[0.6.0] In securedrop-admin setup -v: -v, setup can be passed in any order", "user": {"login": "redshiftzero", "id": 7832803, "node_id": "MDQ6VXNlcjc4MzI4MDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7832803?v=4", "gravatar_id": "", "url": "https://api.github.com/users/redshiftzero", "html_url": "https://github.com/redshiftzero", "followers_url": "https://api.github.com/users/redshiftzero/followers", "following_url": "https://api.github.com/users/redshiftzero/following{/other_user}", "gists_url": "https://api.github.com/users/redshiftzero/gists{/gist_id}", "starred_url": "https://api.github.com/users/redshiftzero/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/redshiftzero/subscriptions", "organizations_url": "https://api.github.com/users/redshiftzero/orgs", "repos_url": "https://api.github.com/users/redshiftzero/repos", "events_url": "https://api.github.com/users/redshiftzero/events{/privacy}", "received_events_url": "https://api.github.com/users/redshiftzero/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/freedomofpress/securedrop/milestones/27", "html_url": "https://github.com/freedomofpress/securedrop/milestone/27", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/milestones/27/labels", "id": 2563515, "node_id": "MDk6TWlsZXN0b25lMjU2MzUxNQ==", "number": 27, "title": "0.6", "description": "End of day February 27: Feature freeze. From this point forward, only merge small fixes and stuff that touches testing.\r\n\r\nMarch 6 String freeze. \r\n(Release date to match Tails 3.6 release date in https://tails.boum.org/contribute/calendar/)", "creator": {"login": "redshiftzero", "id": 7832803, "node_id": "MDQ6VXNlcjc4MzI4MDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7832803?v=4", "gravatar_id": "", "url": "https://api.github.com/users/redshiftzero", "html_url": "https://github.com/redshiftzero", "followers_url": "https://api.github.com/users/redshiftzero/followers", "following_url": "https://api.github.com/users/redshiftzero/following{/other_user}", "gists_url": "https://api.github.com/users/redshiftzero/gists{/gist_id}", "starred_url": "https://api.github.com/users/redshiftzero/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/redshiftzero/subscriptions", "organizations_url": "https://api.github.com/users/redshiftzero/orgs", "repos_url": "https://api.github.com/users/redshiftzero/repos", "events_url": "https://api.github.com/users/redshiftzero/events{/privacy}", "received_events_url": "https://api.github.com/users/redshiftzero/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 68, "state": "closed", "created_at": "2017-06-06T01:31:16Z", "updated_at": "2018-03-16T21:24:40Z", "due_on": "2018-03-13T07:00:00Z", "closed_at": "2018-03-16T21:24:40Z"}, "comments": 1, "created_at": "2018-03-08T23:55:48Z", "updated_at": "2018-03-09T00:42:45Z", "closed_at": "2018-03-09T00:42:41Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/freedomofpress/securedrop/pulls/3129", "html_url": "https://github.com/freedomofpress/securedrop/pull/3129", "diff_url": "https://github.com/freedomofpress/securedrop/pull/3129.diff", "patch_url": "https://github.com/freedomofpress/securedrop/pull/3129.patch", "merged_at": "2018-03-09T00:42:41Z"}, "body": "## Status\r\n\r\nReady for review\r\n\r\n## Description of Changes\r\n\r\nFixes #3109\r\n\r\nChanges proposed in this pull request:\r\n* In securedrop-admin setup -v, enable -v and setup to be passed in any order through the wrapper shell script\r\n\r\n## Testing\r\n\r\nCheck commit here is the same as in #3111\r\n\r\n## Deployment\r\n\r\nNo special considerations\r\n\r\n## Checklist\r\n\r\nTested manually in Tails\r\n", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3129/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3129/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3128", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3128/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3128/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3128/events", "html_url": "https://github.com/freedomofpress/securedrop/pull/3128", "id": 303665445, "node_id": "MDExOlB1bGxSZXF1ZXN0MTczODc2NTAx", "number": 3128, "title": "[0.6.0] Handle TypeErrors on /account/reset-2fa-hotp, add regression tests", "user": {"login": "redshiftzero", "id": 7832803, "node_id": "MDQ6VXNlcjc4MzI4MDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7832803?v=4", "gravatar_id": "", "url": "https://api.github.com/users/redshiftzero", "html_url": "https://github.com/redshiftzero", "followers_url": "https://api.github.com/users/redshiftzero/followers", "following_url": "https://api.github.com/users/redshiftzero/following{/other_user}", "gists_url": "https://api.github.com/users/redshiftzero/gists{/gist_id}", "starred_url": "https://api.github.com/users/redshiftzero/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/redshiftzero/subscriptions", "organizations_url": "https://api.github.com/users/redshiftzero/orgs", "repos_url": "https://api.github.com/users/redshiftzero/repos", "events_url": "https://api.github.com/users/redshiftzero/events{/privacy}", "received_events_url": "https://api.github.com/users/redshiftzero/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}, {"id": 192539755, "node_id": "MDU6TGFiZWwxOTI1Mzk3NTU=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/app", "name": "app", "color": "bfe5bf", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/freedomofpress/securedrop/milestones/27", "html_url": "https://github.com/freedomofpress/securedrop/milestone/27", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/milestones/27/labels", "id": 2563515, "node_id": "MDk6TWlsZXN0b25lMjU2MzUxNQ==", "number": 27, "title": "0.6", "description": "End of day February 27: Feature freeze. From this point forward, only merge small fixes and stuff that touches testing.\r\n\r\nMarch 6 String freeze. \r\n(Release date to match Tails 3.6 release date in https://tails.boum.org/contribute/calendar/)", "creator": {"login": "redshiftzero", "id": 7832803, "node_id": "MDQ6VXNlcjc4MzI4MDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7832803?v=4", "gravatar_id": "", "url": "https://api.github.com/users/redshiftzero", "html_url": "https://github.com/redshiftzero", "followers_url": "https://api.github.com/users/redshiftzero/followers", "following_url": "https://api.github.com/users/redshiftzero/following{/other_user}", "gists_url": "https://api.github.com/users/redshiftzero/gists{/gist_id}", "starred_url": "https://api.github.com/users/redshiftzero/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/redshiftzero/subscriptions", "organizations_url": "https://api.github.com/users/redshiftzero/orgs", "repos_url": "https://api.github.com/users/redshiftzero/repos", "events_url": "https://api.github.com/users/redshiftzero/events{/privacy}", "received_events_url": "https://api.github.com/users/redshiftzero/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 68, "state": "closed", "created_at": "2017-06-06T01:31:16Z", "updated_at": "2018-03-16T21:24:40Z", "due_on": "2018-03-13T07:00:00Z", "closed_at": "2018-03-16T21:24:40Z"}, "comments": 1, "created_at": "2018-03-08T23:06:08Z", "updated_at": "2018-03-09T01:04:58Z", "closed_at": "2018-03-09T01:04:45Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/freedomofpress/securedrop/pulls/3128", "html_url": "https://github.com/freedomofpress/securedrop/pull/3128", "diff_url": "https://github.com/freedomofpress/securedrop/pull/3128.diff", "patch_url": "https://github.com/freedomofpress/securedrop/pull/3128.patch", "merged_at": "2018-03-09T01:04:45Z"}, "body": "## Status\r\n\r\nReady for review\r\n\r\n## Description of Changes\r\n\r\nFixes #3124.\r\n\r\nChanges proposed in this pull request:\r\n * Adds regression tests for the unhandled TypeErrors for the user 2FA HOTP reset functionality. A TypeError is possible via the submission of an odd-length OTP secret, and another is possible via non-hex characters in the OTP secret.\r\n* Fixes by using a common function for validation shared with the admin route (which was not subject to the bug in #3124)\r\n\r\n## Testing\r\n\r\nVerify commits here are the same as #3127\r\n\r\n## Deployment\r\n\r\nNo special considerations\r\n\r\n## Checklist\r\n\r\n### If you made changes to the app code:\r\n\r\n- [x] Unit and functional tests pass on the development VM\r\n", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3128/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3128/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3127", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3127/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3127/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3127/events", "html_url": "https://github.com/freedomofpress/securedrop/pull/3127", "id": 303646701, "node_id": "MDExOlB1bGxSZXF1ZXN0MTczODYxOTMx", "number": 3127, "title": "Handle TypeErrors on /account/reset-2fa-hotp, add regression tests", "user": {"login": "redshiftzero", "id": 7832803, "node_id": "MDQ6VXNlcjc4MzI4MDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7832803?v=4", "gravatar_id": "", "url": "https://api.github.com/users/redshiftzero", "html_url": "https://github.com/redshiftzero", "followers_url": "https://api.github.com/users/redshiftzero/followers", "following_url": "https://api.github.com/users/redshiftzero/following{/other_user}", "gists_url": "https://api.github.com/users/redshiftzero/gists{/gist_id}", "starred_url": "https://api.github.com/users/redshiftzero/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/redshiftzero/subscriptions", "organizations_url": "https://api.github.com/users/redshiftzero/orgs", "repos_url": "https://api.github.com/users/redshiftzero/repos", "events_url": "https://api.github.com/users/redshiftzero/events{/privacy}", "received_events_url": "https://api.github.com/users/redshiftzero/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}, {"id": 192539755, "node_id": "MDU6TGFiZWwxOTI1Mzk3NTU=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/app", "name": "app", "color": "bfe5bf", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2018-03-08T21:56:16Z", "updated_at": "2018-03-08T22:56:14Z", "closed_at": "2018-03-08T22:56:10Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/freedomofpress/securedrop/pulls/3127", "html_url": "https://github.com/freedomofpress/securedrop/pull/3127", "diff_url": "https://github.com/freedomofpress/securedrop/pull/3127.diff", "patch_url": "https://github.com/freedomofpress/securedrop/pull/3127.patch", "merged_at": "2018-03-08T22:56:10Z"}, "body": "## Status\r\n\r\nReady for review\r\n\r\n## Description of Changes\r\n\r\nTowards #3124 (not closing until these changes are backported into the 0.6 release branch). \r\n\r\nChanges proposed in this pull request:\r\n * Adds regression tests for the unhandled `TypeError`s for the user 2FA HOTP reset functionality. A `TypeError` is possible via the submission of an odd-length OTP secret, and another is possible via non-hex characters in the OTP secret.\r\n * Fixes by using a common function for validation shared with the admin route (which was not subject to the bug in #3124)\r\n\r\n## Testing\r\n\r\nI would test both user and admin HOTP reset for the following cases:\r\n1. Odd length input: '123'\r\n2. Non hex characters in input: 'zz'\r\n3. Expected even length hex input e.g. '1234'\r\n\r\nThe following gif shows the expected behavior:\r\n\r\n![hotp-bugfix](https://user-images.githubusercontent.com/7832803/37178736-3e305ec6-22d8-11e8-9d0c-dbbe8249b5b4.gif)\r\n\r\n## Deployment\r\n\r\nNo special considerations\r\n\r\n## Checklist\r\n\r\n### If you made changes to the app code:\r\n\r\n- [x] Unit and functional tests pass in the development container\r\n", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3127/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3127/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3124", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3124/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3124/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3124/events", "html_url": "https://github.com/freedomofpress/securedrop/issues/3124", "id": 303518231, "node_id": "MDU6SXNzdWUzMDM1MTgyMzE=", "number": 3124, "title": "/account/reset-2fa-hotp does not catch TypeError", "user": {"login": "ghost", "id": 10137, "node_id": "MDQ6VXNlcjEwMTM3", "avatar_url": "https://avatars.githubusercontent.com/u/10137?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ghost", "html_url": "https://github.com/ghost", "followers_url": "https://api.github.com/users/ghost/followers", "following_url": "https://api.github.com/users/ghost/following{/other_user}", "gists_url": "https://api.github.com/users/ghost/gists{/gist_id}", "starred_url": "https://api.github.com/users/ghost/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ghost/subscriptions", "organizations_url": "https://api.github.com/users/ghost/orgs", "repos_url": "https://api.github.com/users/ghost/repos", "events_url": "https://api.github.com/users/ghost/events{/privacy}", "received_events_url": "https://api.github.com/users/ghost/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}, {"id": 475977470, "node_id": "MDU6TGFiZWw0NzU5Nzc0NzA=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/journalist%20interface%20(JI)", "name": "journalist interface (JI)", "color": "f9d0c4", "default": false, "description": ""}, {"id": 625966031, "node_id": "MDU6TGFiZWw2MjU5NjYwMzE=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/able%20to%20reproduce", "name": "able to reproduce", "color": "fbca04", "default": false, "description": null}, {"id": 652909251, "node_id": "MDU6TGFiZWw2NTI5MDkyNTE=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/goals:%20journalist%20experience", "name": "goals: journalist experience", "color": "0e8a16", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "redshiftzero", "id": 7832803, "node_id": "MDQ6VXNlcjc4MzI4MDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7832803?v=4", "gravatar_id": "", "url": "https://api.github.com/users/redshiftzero", "html_url": "https://github.com/redshiftzero", "followers_url": "https://api.github.com/users/redshiftzero/followers", "following_url": "https://api.github.com/users/redshiftzero/following{/other_user}", "gists_url": "https://api.github.com/users/redshiftzero/gists{/gist_id}", "starred_url": "https://api.github.com/users/redshiftzero/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/redshiftzero/subscriptions", "organizations_url": "https://api.github.com/users/redshiftzero/orgs", "repos_url": "https://api.github.com/users/redshiftzero/repos", "events_url": "https://api.github.com/users/redshiftzero/events{/privacy}", "received_events_url": "https://api.github.com/users/redshiftzero/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "redshiftzero", "id": 7832803, "node_id": "MDQ6VXNlcjc4MzI4MDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7832803?v=4", "gravatar_id": "", "url": "https://api.github.com/users/redshiftzero", "html_url": "https://github.com/redshiftzero", "followers_url": "https://api.github.com/users/redshiftzero/followers", "following_url": "https://api.github.com/users/redshiftzero/following{/other_user}", "gists_url": "https://api.github.com/users/redshiftzero/gists{/gist_id}", "starred_url": "https://api.github.com/users/redshiftzero/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/redshiftzero/subscriptions", "organizations_url": "https://api.github.com/users/redshiftzero/orgs", "repos_url": "https://api.github.com/users/redshiftzero/repos", "events_url": "https://api.github.com/users/redshiftzero/events{/privacy}", "received_events_url": "https://api.github.com/users/redshiftzero/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/freedomofpress/securedrop/milestones/27", "html_url": "https://github.com/freedomofpress/securedrop/milestone/27", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/milestones/27/labels", "id": 2563515, "node_id": "MDk6TWlsZXN0b25lMjU2MzUxNQ==", "number": 27, "title": "0.6", "description": "End of day February 27: Feature freeze. From this point forward, only merge small fixes and stuff that touches testing.\r\n\r\nMarch 6 String freeze. \r\n(Release date to match Tails 3.6 release date in https://tails.boum.org/contribute/calendar/)", "creator": {"login": "redshiftzero", "id": 7832803, "node_id": "MDQ6VXNlcjc4MzI4MDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7832803?v=4", "gravatar_id": "", "url": "https://api.github.com/users/redshiftzero", "html_url": "https://github.com/redshiftzero", "followers_url": "https://api.github.com/users/redshiftzero/followers", "following_url": "https://api.github.com/users/redshiftzero/following{/other_user}", "gists_url": "https://api.github.com/users/redshiftzero/gists{/gist_id}", "starred_url": "https://api.github.com/users/redshiftzero/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/redshiftzero/subscriptions", "organizations_url": "https://api.github.com/users/redshiftzero/orgs", "repos_url": "https://api.github.com/users/redshiftzero/repos", "events_url": "https://api.github.com/users/redshiftzero/events{/privacy}", "received_events_url": "https://api.github.com/users/redshiftzero/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 68, "state": "closed", "created_at": "2017-06-06T01:31:16Z", "updated_at": "2018-03-16T21:24:40Z", "due_on": "2018-03-13T07:00:00Z", "closed_at": "2018-03-16T21:24:40Z"}, "comments": 2, "created_at": "2018-03-08T15:21:57Z", "updated_at": "2018-03-09T01:12:11Z", "closed_at": "2018-03-09T01:12:11Z", "author_association": "NONE", "active_lock_reason": null, "body": "# Bug\r\n\r\n## Description\r\n\r\nWhen modifying the HOTP as a journalist (not in the admin interface), TypeError are not caught and a stack trace shows when debug is activated. Otherwise it would bubble to whatever catches server errors.\r\n\r\n## Steps to Reproduce\r\n\r\n* login as a journalist\r\n* go to /account/account\r\n* click /account/reset-2fa-hotp\r\n* enter three letters\r\n* click save\r\n\r\n## Expected Behavior\r\n\r\nAn error message similar to what happens with /admin/reset-2fa-hotp\r\n\r\n## Comments\r\n\r\nThe /admin/reset-2fa-hotp error handling code should be shared with /account/reset-2fa-hotp\r\n", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3124/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3124/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3114", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3114/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3114/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3114/events", "html_url": "https://github.com/freedomofpress/securedrop/pull/3114", "id": 302672239, "node_id": "MDExOlB1bGxSZXF1ZXN0MTczMTM2NTQw", "number": 3114, "title": "[0.6.0] instruction to change tor browser security slider updated", "user": {"login": "ghost", "id": 10137, "node_id": "MDQ6VXNlcjEwMTM3", "avatar_url": "https://avatars.githubusercontent.com/u/10137?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ghost", "html_url": "https://github.com/ghost", "followers_url": "https://api.github.com/users/ghost/followers", "following_url": "https://api.github.com/users/ghost/following{/other_user}", "gists_url": "https://api.github.com/users/ghost/gists{/gist_id}", "starred_url": "https://api.github.com/users/ghost/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ghost/subscriptions", "organizations_url": "https://api.github.com/users/ghost/orgs", "repos_url": "https://api.github.com/users/ghost/repos", "events_url": "https://api.github.com/users/ghost/events{/privacy}", "received_events_url": "https://api.github.com/users/ghost/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}, {"id": 118465787, "node_id": "MDU6TGFiZWwxMTg0NjU3ODc=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/docs", "name": "docs", "color": "d4c5f9", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/freedomofpress/securedrop/milestones/27", "html_url": "https://github.com/freedomofpress/securedrop/milestone/27", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/milestones/27/labels", "id": 2563515, "node_id": "MDk6TWlsZXN0b25lMjU2MzUxNQ==", "number": 27, "title": "0.6", "description": "End of day February 27: Feature freeze. From this point forward, only merge small fixes and stuff that touches testing.\r\n\r\nMarch 6 String freeze. \r\n(Release date to match Tails 3.6 release date in https://tails.boum.org/contribute/calendar/)", "creator": {"login": "redshiftzero", "id": 7832803, "node_id": "MDQ6VXNlcjc4MzI4MDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7832803?v=4", "gravatar_id": "", "url": "https://api.github.com/users/redshiftzero", "html_url": "https://github.com/redshiftzero", "followers_url": "https://api.github.com/users/redshiftzero/followers", "following_url": "https://api.github.com/users/redshiftzero/following{/other_user}", "gists_url": "https://api.github.com/users/redshiftzero/gists{/gist_id}", "starred_url": "https://api.github.com/users/redshiftzero/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/redshiftzero/subscriptions", "organizations_url": "https://api.github.com/users/redshiftzero/orgs", "repos_url": "https://api.github.com/users/redshiftzero/repos", "events_url": "https://api.github.com/users/redshiftzero/events{/privacy}", "received_events_url": "https://api.github.com/users/redshiftzero/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 68, "state": "closed", "created_at": "2017-06-06T01:31:16Z", "updated_at": "2018-03-16T21:24:40Z", "due_on": "2018-03-13T07:00:00Z", "closed_at": "2018-03-16T21:24:40Z"}, "comments": 2, "created_at": "2018-03-06T11:56:18Z", "updated_at": "2018-03-06T12:40:36Z", "closed_at": "2018-03-06T12:40:31Z", "author_association": "NONE", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/freedomofpress/securedrop/pulls/3114", "html_url": "https://github.com/freedomofpress/securedrop/pull/3114", "diff_url": "https://github.com/freedomofpress/securedrop/pull/3114.diff", "patch_url": "https://github.com/freedomofpress/securedrop/pull/3114.patch", "merged_at": "2018-03-06T12:40:31Z"}, "body": "(cherry picked from commit 4348e23c8d181fd0e725f0ff0f7473b9aab283c7)\r\n\r\n## Status\r\n\r\nReady for review \r\n\r\n## Description of Changes\r\n\r\nFixes #2962 \r\n\r\nChanges proposed in this pull request: Updated the instructions to change the security in tor browser\r\n\r\n## Testing\r\n\r\nHow should the reviewer test this PR?\r\nWrite out any special testing steps here.\r\n\r\n## Deployment\r\n\r\nAny special considerations for deployment? Consider both:\r\n\r\n1. Upgrading existing production instances.\r\n2. New installs.\r\n\r\n## Checklist\r\n\r\n### If you made changes to the app code:\r\n\r\n- [x] Unit and functional tests pass on the development VM\r\n\r\n### If you made changes to the system configuration:\r\n\r\n- [ ] [Configuration tests](https://docs.securedrop.org/en/latest/development/testing_configuration_tests.html) pass\r\n\r\n### If you made changes to documentation:\r\n\r\n- [x] Doc linting passed locally\r\n", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3114/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3114/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3112", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3112/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3112/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3112/events", "html_url": "https://github.com/freedomofpress/securedrop/pull/3112", "id": 302544040, "node_id": "MDExOlB1bGxSZXF1ZXN0MTczMDQ0MjE1", "number": 3112, "title": "Fix help strings for securedrop-admin check_for_updates", "user": {"login": "redshiftzero", "id": 7832803, "node_id": "MDQ6VXNlcjc4MzI4MDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7832803?v=4", "gravatar_id": "", "url": "https://api.github.com/users/redshiftzero", "html_url": "https://github.com/redshiftzero", "followers_url": "https://api.github.com/users/redshiftzero/followers", "following_url": "https://api.github.com/users/redshiftzero/following{/other_user}", "gists_url": "https://api.github.com/users/redshiftzero/gists{/gist_id}", "starred_url": "https://api.github.com/users/redshiftzero/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/redshiftzero/subscriptions", "organizations_url": "https://api.github.com/users/redshiftzero/orgs", "repos_url": "https://api.github.com/users/redshiftzero/repos", "events_url": "https://api.github.com/users/redshiftzero/events{/privacy}", "received_events_url": "https://api.github.com/users/redshiftzero/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}, {"id": 385585080, "node_id": "MDU6TGFiZWwzODU1ODUwODA=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/QA:%20Release", "name": "QA: Release", "color": "fbca04", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2018-03-06T02:47:24Z", "updated_at": "2018-04-10T15:05:07Z", "closed_at": "2018-03-06T09:32:11Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/freedomofpress/securedrop/pulls/3112", "html_url": "https://github.com/freedomofpress/securedrop/pull/3112", "diff_url": "https://github.com/freedomofpress/securedrop/pull/3112.diff", "patch_url": "https://github.com/freedomofpress/securedrop/pull/3112.patch", "merged_at": "2018-03-06T09:32:11Z"}, "body": "## Status\r\n\r\nReady for review\r\n\r\n## Description of Changes\r\n\r\nTowards #3110 (not resolving ticket until the change is picked into the 0.6.0 branch).\r\n\r\nChanges proposed in this pull request:\r\n * Fix help string for `securedrop-admin check_for_updates`\r\n\r\n## Testing\r\n\r\n`./securedrop-admin -h`\r\n\r\n## Deployment\r\n\r\nAny special considerations for deployment? Consider both:\r\n\r\n1. Upgrading existing production instances.\r\n2. New installs.\r\n\r\n## Checklist\r\n\r\n- [x] All linting, tests pass in `securedrop-admin` dev container\r\n", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3112/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3112/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3111", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3111/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3111/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3111/events", "html_url": "https://github.com/freedomofpress/securedrop/pull/3111", "id": 302541933, "node_id": "MDExOlB1bGxSZXF1ZXN0MTczMDQzMDQx", "number": 3111, "title": "In securedrop-admin setup -v: -v, setup can be passed in any order", "user": {"login": "redshiftzero", "id": 7832803, "node_id": "MDQ6VXNlcjc4MzI4MDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7832803?v=4", "gravatar_id": "", "url": "https://api.github.com/users/redshiftzero", "html_url": "https://github.com/redshiftzero", "followers_url": "https://api.github.com/users/redshiftzero/followers", "following_url": "https://api.github.com/users/redshiftzero/following{/other_user}", "gists_url": "https://api.github.com/users/redshiftzero/gists{/gist_id}", "starred_url": "https://api.github.com/users/redshiftzero/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/redshiftzero/subscriptions", "organizations_url": "https://api.github.com/users/redshiftzero/orgs", "repos_url": "https://api.github.com/users/redshiftzero/repos", "events_url": "https://api.github.com/users/redshiftzero/events{/privacy}", "received_events_url": "https://api.github.com/users/redshiftzero/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}, {"id": 385585080, "node_id": "MDU6TGFiZWwzODU1ODUwODA=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/QA:%20Release", "name": "QA: Release", "color": "fbca04", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2018-03-06T02:37:25Z", "updated_at": "2018-03-08T23:29:56Z", "closed_at": "2018-03-08T23:29:52Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/freedomofpress/securedrop/pulls/3111", "html_url": "https://github.com/freedomofpress/securedrop/pull/3111", "diff_url": "https://github.com/freedomofpress/securedrop/pull/3111.diff", "patch_url": "https://github.com/freedomofpress/securedrop/pull/3111.patch", "merged_at": "2018-03-08T23:29:52Z"}, "body": "## Status\r\n\r\nReady for review\r\n\r\n## Description of Changes\r\n\r\nTowards #3109 (not resolving ticket until the change is picked into the 0.6.0 branch).\r\n\r\nChanges proposed in this pull request:\r\n* In `securedrop-admin setup -v`, enable `-v` and `setup` to be passed in any order through the wrapper shell script\r\n\r\n## Testing\r\n\r\nVerify the behavior of `./securedrop-admin -v setup` and `./securedrop-admin setup -v` is consistent\r\n\r\n## Deployment\r\n\r\nUnder version control and admins will check out this version manually\r\n\r\n## Checklist\r\n\r\nNeeds testing in Tails", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3111/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3111/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3110", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3110/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3110/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3110/events", "html_url": "https://github.com/freedomofpress/securedrop/issues/3110", "id": 302541240, "node_id": "MDU6SXNzdWUzMDI1NDEyNDA=", "number": 3110, "title": "[0.6.0] duplicated help string for update and check_for_updates", "user": {"login": "redshiftzero", "id": 7832803, "node_id": "MDQ6VXNlcjc4MzI4MDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7832803?v=4", "gravatar_id": "", "url": "https://api.github.com/users/redshiftzero", "html_url": "https://github.com/redshiftzero", "followers_url": "https://api.github.com/users/redshiftzero/followers", "following_url": "https://api.github.com/users/redshiftzero/following{/other_user}", "gists_url": "https://api.github.com/users/redshiftzero/gists{/gist_id}", "starred_url": "https://api.github.com/users/redshiftzero/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/redshiftzero/subscriptions", "organizations_url": "https://api.github.com/users/redshiftzero/orgs", "repos_url": "https://api.github.com/users/redshiftzero/repos", "events_url": "https://api.github.com/users/redshiftzero/events{/privacy}", "received_events_url": "https://api.github.com/users/redshiftzero/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}, {"id": 385585080, "node_id": "MDU6TGFiZWwzODU1ODUwODA=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/QA:%20Release", "name": "QA: Release", "color": "fbca04", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/freedomofpress/securedrop/milestones/27", "html_url": "https://github.com/freedomofpress/securedrop/milestone/27", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/milestones/27/labels", "id": 2563515, "node_id": "MDk6TWlsZXN0b25lMjU2MzUxNQ==", "number": 27, "title": "0.6", "description": "End of day February 27: Feature freeze. From this point forward, only merge small fixes and stuff that touches testing.\r\n\r\nMarch 6 String freeze. \r\n(Release date to match Tails 3.6 release date in https://tails.boum.org/contribute/calendar/)", "creator": {"login": "redshiftzero", "id": 7832803, "node_id": "MDQ6VXNlcjc4MzI4MDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7832803?v=4", "gravatar_id": "", "url": "https://api.github.com/users/redshiftzero", "html_url": "https://github.com/redshiftzero", "followers_url": "https://api.github.com/users/redshiftzero/followers", "following_url": "https://api.github.com/users/redshiftzero/following{/other_user}", "gists_url": "https://api.github.com/users/redshiftzero/gists{/gist_id}", "starred_url": "https://api.github.com/users/redshiftzero/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/redshiftzero/subscriptions", "organizations_url": "https://api.github.com/users/redshiftzero/orgs", "repos_url": "https://api.github.com/users/redshiftzero/repos", "events_url": "https://api.github.com/users/redshiftzero/events{/privacy}", "received_events_url": "https://api.github.com/users/redshiftzero/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 68, "state": "closed", "created_at": "2017-06-06T01:31:16Z", "updated_at": "2018-03-16T21:24:40Z", "due_on": "2018-03-13T07:00:00Z", "closed_at": "2018-03-16T21:24:40Z"}, "comments": 1, "created_at": "2018-03-06T02:34:17Z", "updated_at": "2018-03-06T20:41:27Z", "closed_at": "2018-03-06T20:41:27Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "## Description\r\n\r\nHelp strings are accidentally duplicated for two subcommands of `securedrop-admin`\r\n\r\n## Steps to Reproduce\r\n\r\n`./securedrop-admin -h`\r\n\r\n## Expected Behavior\r\n\r\nYou get a unique string describing each possible command\r\n\r\n## Actual Behavior\r\n\r\n```\r\n...\r\n    update              Verify, and apply latest SecureDrop workstation update\r\n    check_for_updates   Verify, and apply latest SecureDrop workstation update\r\n...\r\n```\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3110/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3110/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3109", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3109/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3109/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3109/events", "html_url": "https://github.com/freedomofpress/securedrop/issues/3109", "id": 302539975, "node_id": "MDU6SXNzdWUzMDI1Mzk5NzU=", "number": 3109, "title": "[0.6.0] securedrop-admin -v setup not equivalent to securedrop-admin setup -v", "user": {"login": "redshiftzero", "id": 7832803, "node_id": "MDQ6VXNlcjc4MzI4MDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7832803?v=4", "gravatar_id": "", "url": "https://api.github.com/users/redshiftzero", "html_url": "https://github.com/redshiftzero", "followers_url": "https://api.github.com/users/redshiftzero/followers", "following_url": "https://api.github.com/users/redshiftzero/following{/other_user}", "gists_url": "https://api.github.com/users/redshiftzero/gists{/gist_id}", "starred_url": "https://api.github.com/users/redshiftzero/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/redshiftzero/subscriptions", "organizations_url": "https://api.github.com/users/redshiftzero/orgs", "repos_url": "https://api.github.com/users/redshiftzero/repos", "events_url": "https://api.github.com/users/redshiftzero/events{/privacy}", "received_events_url": "https://api.github.com/users/redshiftzero/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}, {"id": 385585080, "node_id": "MDU6TGFiZWwzODU1ODUwODA=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/QA:%20Release", "name": "QA: Release", "color": "fbca04", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/freedomofpress/securedrop/milestones/27", "html_url": "https://github.com/freedomofpress/securedrop/milestone/27", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/milestones/27/labels", "id": 2563515, "node_id": "MDk6TWlsZXN0b25lMjU2MzUxNQ==", "number": 27, "title": "0.6", "description": "End of day February 27: Feature freeze. From this point forward, only merge small fixes and stuff that touches testing.\r\n\r\nMarch 6 String freeze. \r\n(Release date to match Tails 3.6 release date in https://tails.boum.org/contribute/calendar/)", "creator": {"login": "redshiftzero", "id": 7832803, "node_id": "MDQ6VXNlcjc4MzI4MDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7832803?v=4", "gravatar_id": "", "url": "https://api.github.com/users/redshiftzero", "html_url": "https://github.com/redshiftzero", "followers_url": "https://api.github.com/users/redshiftzero/followers", "following_url": "https://api.github.com/users/redshiftzero/following{/other_user}", "gists_url": "https://api.github.com/users/redshiftzero/gists{/gist_id}", "starred_url": "https://api.github.com/users/redshiftzero/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/redshiftzero/subscriptions", "organizations_url": "https://api.github.com/users/redshiftzero/orgs", "repos_url": "https://api.github.com/users/redshiftzero/repos", "events_url": "https://api.github.com/users/redshiftzero/events{/privacy}", "received_events_url": "https://api.github.com/users/redshiftzero/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 68, "state": "closed", "created_at": "2017-06-06T01:31:16Z", "updated_at": "2018-03-16T21:24:40Z", "due_on": "2018-03-13T07:00:00Z", "closed_at": "2018-03-16T21:24:40Z"}, "comments": 1, "created_at": "2018-03-06T02:28:00Z", "updated_at": "2018-07-29T09:54:23Z", "closed_at": "2018-03-09T00:43:32Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "## Description\r\n\r\n`securedrop-admin -v setup` and `securedrop-admin setup -v` should have the same behavior.\r\n\r\n## Steps to Reproduce\r\n\r\nIn your Tails VM in `~/Persistent/securedrop`:\r\n\r\n1. Run `securedrop-admin -v setup`.\r\n\r\n2. Run `securedrop-admin setup -v`\r\n\r\n## Expected Behavior\r\n\r\nThese two commands are equivalent.\r\n\r\n## Actual Behavior\r\n\r\n```\r\namnesia@amnesia:~/Persistent/securedrop$ ./securedrop-admin -v setup\r\nusage: securedrop-admin [-h] [-v] [-d] --root ROOT [--site-config SITE_CONFIG]\r\n                        [--ansible-path ANSIBLE_PATH] [--app-path APP_PATH]\r\n                        {sdconfig,install,tailsconfig,backup,restore,update,check_for_updates,logs}\r\n                        ...\r\nsecuredrop-admin: error: invalid choice: 'setup' (choose from 'sdconfig', 'install', 'tailsconfig', 'backup', 'restore', 'update', 'check_for_updates', 'logs')\r\namnesia@amnesia:~/Persistent/securedrop$ ./securedrop-admin setup -v\r\nINFO: Virtualenv already exists, not creating\r\nINFO: Checking Python dependencies for securedrop-admin\r\n```\r\n\r\n## Comments\r\n\r\n`./securedrop-admin -v setup` should not return a help prompt, this is a valid command", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3109/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3109/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3108", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3108/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3108/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3108/events", "html_url": "https://github.com/freedomofpress/securedrop/issues/3108", "id": 302517536, "node_id": "MDU6SXNzdWUzMDI1MTc1MzY=", "number": 3108, "title": "[0.6.0] securedrop-admin setup fails to install apt dependencies on Tails 3.6~rc1", "user": {"login": "redshiftzero", "id": 7832803, "node_id": "MDQ6VXNlcjc4MzI4MDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7832803?v=4", "gravatar_id": "", "url": "https://api.github.com/users/redshiftzero", "html_url": "https://github.com/redshiftzero", "followers_url": "https://api.github.com/users/redshiftzero/followers", "following_url": "https://api.github.com/users/redshiftzero/following{/other_user}", "gists_url": "https://api.github.com/users/redshiftzero/gists{/gist_id}", "starred_url": "https://api.github.com/users/redshiftzero/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/redshiftzero/subscriptions", "organizations_url": "https://api.github.com/users/redshiftzero/orgs", "repos_url": "https://api.github.com/users/redshiftzero/repos", "events_url": "https://api.github.com/users/redshiftzero/events{/privacy}", "received_events_url": "https://api.github.com/users/redshiftzero/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}, {"id": 385585080, "node_id": "MDU6TGFiZWwzODU1ODUwODA=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/QA:%20Release", "name": "QA: Release", "color": "fbca04", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/freedomofpress/securedrop/milestones/27", "html_url": "https://github.com/freedomofpress/securedrop/milestone/27", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/milestones/27/labels", "id": 2563515, "node_id": "MDk6TWlsZXN0b25lMjU2MzUxNQ==", "number": 27, "title": "0.6", "description": "End of day February 27: Feature freeze. From this point forward, only merge small fixes and stuff that touches testing.\r\n\r\nMarch 6 String freeze. \r\n(Release date to match Tails 3.6 release date in https://tails.boum.org/contribute/calendar/)", "creator": {"login": "redshiftzero", "id": 7832803, "node_id": "MDQ6VXNlcjc4MzI4MDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7832803?v=4", "gravatar_id": "", "url": "https://api.github.com/users/redshiftzero", "html_url": "https://github.com/redshiftzero", "followers_url": "https://api.github.com/users/redshiftzero/followers", "following_url": "https://api.github.com/users/redshiftzero/following{/other_user}", "gists_url": "https://api.github.com/users/redshiftzero/gists{/gist_id}", "starred_url": "https://api.github.com/users/redshiftzero/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/redshiftzero/subscriptions", "organizations_url": "https://api.github.com/users/redshiftzero/orgs", "repos_url": "https://api.github.com/users/redshiftzero/repos", "events_url": "https://api.github.com/users/redshiftzero/events{/privacy}", "received_events_url": "https://api.github.com/users/redshiftzero/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 68, "state": "closed", "created_at": "2017-06-06T01:31:16Z", "updated_at": "2018-03-16T21:24:40Z", "due_on": "2018-03-13T07:00:00Z", "closed_at": "2018-03-16T21:24:40Z"}, "comments": 7, "created_at": "2018-03-06T00:30:11Z", "updated_at": "2018-03-13T17:17:49Z", "closed_at": "2018-03-13T17:17:49Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "## Description\r\n\r\nA short summary of the issue.\r\n\r\n## Steps to Reproduce\r\n\r\nFrom a fresh Tails 3.6~rc1 VM:\r\n\r\n```\r\namnesia@amnesia:~/Persistent/securedrop$ ./securedrop-admin setup\r\n```\r\n\r\n## Expected Behavior\r\n\r\nAll is merry and well and the virtualenv is set up\r\n\r\n## Actual Behavior\r\n\r\n```\r\nINFO: Installing SecureDrop Admin dependencies\r\n...[snip]...\r\nBuilding dependency tree...\r\nReading state information...\r\nSome packages could not be installed. This may mean that you have\r\nrequested an impossible situation or if you are using the unstable\r\ndistribution that some required packages have not yet been created\r\nor been moved out of Incoming.\r\nThe following information may help to resolve the situation:\r\n\r\nThe following packages have unmet dependencies:\r\n libpython2.7-dev : Depends: libexpat1-dev but it is not going to be installed\r\nE: Unable to correct problems, you have held broken packages.\r\nERROR: Failed to install apt dependencies. Check network connection and try again.\r\n```\r\n\r\n## Comments\r\n\r\n```\r\ndpkg --get-selections | grep hold\r\n```\r\n\r\nreturns nothing", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3108/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3108/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3105", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3105/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3105/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3105/events", "html_url": "https://github.com/freedomofpress/securedrop/issues/3105", "id": 302298867, "node_id": "MDU6SXNzdWUzMDIyOTg4Njc=", "number": 3105, "title": "Update installer.patch (mentioned in the virtualizing_tails.rst) with respect to Tails 3.5", "user": {"login": "Anonymous26", "id": 20697219, "node_id": "MDQ6VXNlcjIwNjk3MjE5", "avatar_url": "https://avatars.githubusercontent.com/u/20697219?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Anonymous26", "html_url": "https://github.com/Anonymous26", "followers_url": "https://api.github.com/users/Anonymous26/followers", "following_url": "https://api.github.com/users/Anonymous26/following{/other_user}", "gists_url": "https://api.github.com/users/Anonymous26/gists{/gist_id}", "starred_url": "https://api.github.com/users/Anonymous26/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Anonymous26/subscriptions", "organizations_url": "https://api.github.com/users/Anonymous26/orgs", "repos_url": "https://api.github.com/users/Anonymous26/repos", "events_url": "https://api.github.com/users/Anonymous26/events{/privacy}", "received_events_url": "https://api.github.com/users/Anonymous26/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}, {"id": 118465787, "node_id": "MDU6TGFiZWwxMTg0NjU3ODc=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/docs", "name": "docs", "color": "d4c5f9", "default": false, "description": null}, {"id": 616447641, "node_id": "MDU6TGFiZWw2MTY0NDc2NDE=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/development%20env", "name": "development env", "color": "bfd4f2", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2018-03-05T13:26:09Z", "updated_at": "2018-03-21T16:27:24Z", "closed_at": "2018-03-21T16:27:24Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "# Bug\r\n\r\n## Description\r\n\r\nThe [installer.patch](https://docs.securedrop.org/en/latest/development/virtualizing_tails.html) is outdated (fails on Tails 3.5).\r\n\r\n## Steps to Reproduce\r\n1. In tails VM create a file installer.patch (copy and paste the patch from virtualizing_tails.rst)\r\n2. Run the following command in the terminal `sudo patch -p0 -d/ < installer.patch`  \r\n\r\n## Actual Behavior\r\n`root@amnesia:/home/amnesia/temp# sudo patch -p0 -d/ < installer.patch\r\npatching file /usr/lib/python2.7/dist-packages/tails_installer/creator.py\r\nReversed (or previously applied) patch detected!  Assume -R? [n] n\r\nApply anyway? [n] y\r\nHunk #1 FAILED at 615.\r\n1 out of 1 hunk FAILED -- saving rejects to file /usr/lib/python2.7/dist-packages/tails_installer/creator.py.rej\r\npatching file /usr/lib/python2.7/dist-packages/tails_installer/gui.py\r\nHunk #1 FAILED at 483.\r\n1 out of 1 hunk FAILED -- saving rejects to file /usr/lib/python2.7/dist-packages/tails_installer/gui.py.rej`\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3105/reactions", "total_count": 1, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3105/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3104", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3104/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3104/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3104/events", "html_url": "https://github.com/freedomofpress/securedrop/pull/3104", "id": 302294210, "node_id": "MDExOlB1bGxSZXF1ZXN0MTcyODYyNzgw", "number": 3104, "title": "Bugfix: Update installer.patch against latest tails-installer 5.0.4", "user": {"login": "ageis", "id": 1161532, "node_id": "MDQ6VXNlcjExNjE1MzI=", "avatar_url": "https://avatars.githubusercontent.com/u/1161532?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ageis", "html_url": "https://github.com/ageis", "followers_url": "https://api.github.com/users/ageis/followers", "following_url": "https://api.github.com/users/ageis/following{/other_user}", "gists_url": "https://api.github.com/users/ageis/gists{/gist_id}", "starred_url": "https://api.github.com/users/ageis/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ageis/subscriptions", "organizations_url": "https://api.github.com/users/ageis/orgs", "repos_url": "https://api.github.com/users/ageis/repos", "events_url": "https://api.github.com/users/ageis/events{/privacy}", "received_events_url": "https://api.github.com/users/ageis/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}, {"id": 616447641, "node_id": "MDU6TGFiZWw2MTY0NDc2NDE=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/development%20env", "name": "development env", "color": "bfd4f2", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2018-03-05T13:11:00Z", "updated_at": "2018-03-10T14:55:31Z", "closed_at": "2018-03-05T22:07:14Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/freedomofpress/securedrop/pulls/3104", "html_url": "https://github.com/freedomofpress/securedrop/pull/3104", "diff_url": "https://github.com/freedomofpress/securedrop/pull/3104.diff", "patch_url": "https://github.com/freedomofpress/securedrop/pull/3104.patch", "merged_at": "2018-03-05T22:07:13Z"}, "body": "[tails-installer](https://anonscm.debian.org/git/pkg-privacy/packages/tails-installer.git) is a Python application, currently at version 5.0.4+dfsg. That version was tagged on January 22nd and uploaded to [Debian repositories](https://packages.debian.org/sid/tails-installer) on Feb 3rd plus [Launchpad PPA](https://launchpad.net/~tails-team/+archive/ubuntu/tails-installer) on Feb 4th, causing the included patch in this document to fail because some lines in `gui.py` and `creator.py` had changed.\r\n\r\nSee: https://klistrain.se/p/0491dbc, bug was discovered by @Anonymous26.\r\n```\r\nroot@amnesia:/home/amnesia/temp# sudo patch -p0 -d/ < installer.patch\r\npatching file /usr/lib/python2.7/dist-packages/tails_installer/creator.py\r\nReversed (or previously applied) patch detected!  Assume -R? [n] n\r\nApply anyway? [n] y\r\nHunk #1 FAILED at 615.\r\n1 out of 1 hunk FAILED -- saving rejects to file /usr/lib/python2.7/dist-packages/tails_installer/creator.py.rej\r\npatching file /usr/lib/python2.7/dist-packages/tails_installer/gui.py\r\nHunk #1 FAILED at 483.\r\n1 out of 1 hunk FAILED -- saving rejects to file /usr/lib/python2.7/dist-packages/tails_installer/gui.py.rej\r\n```\r\n\r\nThis updates the patch in the \"virtualizing Tails\" documentation based on the latest version of tails-installer.\r\n\r\nHere is the new patch ([link](https://paste.cointel.pro/?7b5492e3840adfaa#jdd32xc0lILACFZRozLiDRPwYTdR8SvrIZB9N3IZF2c=)):\r\n```\r\n--- /usr/lib/python2.7/dist-packages/tails_installer/creator.py      2018-01-22 14:59:40.000000000 +0100\r\n+++ /usr/lib/python2.7/dist-packages/tails_installer/creator.py.mod  2018-03-05 05:15:00.000000000 -0800\r\n@@ -595,16 +595,6 @@ class LinuxTailsInstallerCreator(TailsInstallerCreator):\r\n                 self.log.debug('Skipping non-removable device: %s'\r\n                                % data['device'])\r\n\r\n-            # Only pay attention to USB and SDIO devices, unless --force'd\r\n-            iface = drive.props.connection_bus\r\n-            if iface != 'usb' and iface != 'sdio' \\\r\n-               and self.opts.force != data['device']:\r\n-                self.log.warning(\r\n-                    \"Skipping device '%(device)s' connected to '%(interface)s' interface\"\r\n-                    % {'device': data['udi'], 'interface': iface}\r\n-                )\r\n-                continue\r\n-\r\n             # Skip optical drives\r\n             if data['is_optical'] and self.opts.force != data['device']:\r\n                 self.log.debug('Skipping optical device: %s' % data['device'])\r\n--- /usr/lib/python2.7/dist-packages/tails_installer/gui.py      2018-01-22 14:59:40.000000000 +0100\r\n+++ /usr/lib/python2.7/dist-packages/tails_installer/gui.py.mod  2018-03-05 05:15:00.000000000 -0800\r\n@@ -568,16 +568,6 @@ class TailsInstallerWindow(Gtk.ApplicationWindow):\r\n                     self.devices_with_persistence.append(info['parent'])\r\n                     continue\r\n                 pretty_name = self.get_device_pretty_name(info)\r\n-                # Skip devices with non-removable bit enabled\r\n-                if not info['removable']:\r\n-                    message =_('The USB stick \"%(pretty_name)s\"'\r\n-                               ' is configured as non-removable by its'\r\n-                               ' manufacturer and Tails will fail to start on it.'\r\n-                               ' Please try installing on a different model.') % {\r\n-                               'pretty_name':  pretty_name\r\n-                               }\r\n-                    self.status(message)\r\n-                    continue\r\n                 # Skip too small devices, but inform the user\r\n                 if not info['is_device_big_enough_for_installation']:\r\n                     message =_('The device \"%(pretty_name)s\"'\r\n```\r\n\r\n## Status\r\n\r\nReady for review.\r\n\r\n## Description of Changes\r\n\r\nUpdates `installer.patch` in the \"virtualizing Tails\" documentation to work with tails-installer 5.0.4, which was released one month ago. Fixes #3105.\r\n\r\n## Testing\r\n\r\nNeeds to be tested against actual Tails 3.5, with the full procedure described in the documentation of installing to a virtual hard disk image. ", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3104/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3104/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3103", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3103/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3103/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3103/events", "html_url": "https://github.com/freedomofpress/securedrop/pull/3103", "id": 301981560, "node_id": "MDExOlB1bGxSZXF1ZXN0MTcyNjU3Njgz", "number": 3103, "title": "[0.6.0] Docs: Update Admin guide to remove --force option", "user": {"login": "ghost", "id": 10137, "node_id": "MDQ6VXNlcjEwMTM3", "avatar_url": "https://avatars.githubusercontent.com/u/10137?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ghost", "html_url": "https://github.com/ghost", "followers_url": "https://api.github.com/users/ghost/followers", "following_url": "https://api.github.com/users/ghost/following{/other_user}", "gists_url": "https://api.github.com/users/ghost/gists{/gist_id}", "starred_url": "https://api.github.com/users/ghost/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ghost/subscriptions", "organizations_url": "https://api.github.com/users/ghost/orgs", "repos_url": "https://api.github.com/users/ghost/repos", "events_url": "https://api.github.com/users/ghost/events{/privacy}", "received_events_url": "https://api.github.com/users/ghost/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}, {"id": 118465787, "node_id": "MDU6TGFiZWwxMTg0NjU3ODc=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/docs", "name": "docs", "color": "d4c5f9", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/freedomofpress/securedrop/milestones/27", "html_url": "https://github.com/freedomofpress/securedrop/milestone/27", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/milestones/27/labels", "id": 2563515, "node_id": "MDk6TWlsZXN0b25lMjU2MzUxNQ==", "number": 27, "title": "0.6", "description": "End of day February 27: Feature freeze. From this point forward, only merge small fixes and stuff that touches testing.\r\n\r\nMarch 6 String freeze. \r\n(Release date to match Tails 3.6 release date in https://tails.boum.org/contribute/calendar/)", "creator": {"login": "redshiftzero", "id": 7832803, "node_id": "MDQ6VXNlcjc4MzI4MDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7832803?v=4", "gravatar_id": "", "url": "https://api.github.com/users/redshiftzero", "html_url": "https://github.com/redshiftzero", "followers_url": "https://api.github.com/users/redshiftzero/followers", "following_url": "https://api.github.com/users/redshiftzero/following{/other_user}", "gists_url": "https://api.github.com/users/redshiftzero/gists{/gist_id}", "starred_url": "https://api.github.com/users/redshiftzero/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/redshiftzero/subscriptions", "organizations_url": "https://api.github.com/users/redshiftzero/orgs", "repos_url": "https://api.github.com/users/redshiftzero/repos", "events_url": "https://api.github.com/users/redshiftzero/events{/privacy}", "received_events_url": "https://api.github.com/users/redshiftzero/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 68, "state": "closed", "created_at": "2017-06-06T01:31:16Z", "updated_at": "2018-03-16T21:24:40Z", "due_on": "2018-03-13T07:00:00Z", "closed_at": "2018-03-16T21:24:40Z"}, "comments": 1, "created_at": "2018-03-03T08:49:09Z", "updated_at": "2018-03-05T18:21:27Z", "closed_at": "2018-03-05T18:20:33Z", "author_association": "NONE", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/freedomofpress/securedrop/pulls/3103", "html_url": "https://github.com/freedomofpress/securedrop/pull/3103", "diff_url": "https://github.com/freedomofpress/securedrop/pull/3103.diff", "patch_url": "https://github.com/freedomofpress/securedrop/pull/3103.patch", "merged_at": "2018-03-05T18:20:32Z"}, "body": "(cherry picked from commit 342182e709d99d8b555f47968c24504457d1d4dc)\r\n\r\n## Status\r\n\r\nReady for review\r\n\r\n## Description of Changes\r\n\r\nFixes #3101 \r\n\r\nChanges proposed in this pull request:\r\n* The new sdconfig handles the editing of config variables in an\r\nimproved way that doesn't require the admin to retype the variable\r\n\r\n## Testing\r\n\r\nno remaining references to the `--force` option should be in the docs\r\n\r\n## Deployment\r\n\r\nDocs only\r\n\r\n## Checklist\r\n\r\n### If you made changes to documentation:\r\n\r\n- [x] Doc linting passed locally\r\n", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3103/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3103/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3092", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3092/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3092/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3092/events", "html_url": "https://github.com/freedomofpress/securedrop/pull/3092", "id": 301548474, "node_id": "MDExOlB1bGxSZXF1ZXN0MTcyMzQ1MDY4", "number": 3092, "title": "securedrop-admin: symlink ancient .venv to admin/.venv", "user": {"login": "ghost", "id": 10137, "node_id": "MDQ6VXNlcjEwMTM3", "avatar_url": "https://avatars.githubusercontent.com/u/10137?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ghost", "html_url": "https://github.com/ghost", "followers_url": "https://api.github.com/users/ghost/followers", "following_url": "https://api.github.com/users/ghost/following{/other_user}", "gists_url": "https://api.github.com/users/ghost/gists{/gist_id}", "starred_url": "https://api.github.com/users/ghost/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ghost/subscriptions", "organizations_url": "https://api.github.com/users/ghost/orgs", "repos_url": "https://api.github.com/users/ghost/repos", "events_url": "https://api.github.com/users/ghost/events{/privacy}", "received_events_url": "https://api.github.com/users/ghost/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}, {"id": 192539287, "node_id": "MDU6TGFiZWwxOTI1MzkyODc=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/ops/deployment", "name": "ops/deployment", "color": "c7def8", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2018-03-01T20:29:03Z", "updated_at": "2018-04-10T15:04:04Z", "closed_at": "2018-03-02T12:58:06Z", "author_association": "NONE", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/freedomofpress/securedrop/pulls/3092", "html_url": "https://github.com/freedomofpress/securedrop/pull/3092", "diff_url": "https://github.com/freedomofpress/securedrop/pull/3092.diff", "patch_url": "https://github.com/freedomofpress/securedrop/pull/3092.patch", "merged_at": "2018-03-02T12:58:06Z"}, "body": "## Status\r\n\r\nReady for review\r\n\r\n## Description of Changes\r\n\r\nFixes #3088 \r\n\r\nPrior to securedrop-admin moving to the admin directory, its\r\nvirtualenv directory was in the .venv directory at the toplevel of the\r\ngit tree. It is now in the admin/.venv directory instead.\r\n\r\nFor the regular admin following the instructions from the\r\ndocumentation the existence of the ancient .venv will not be noticed\r\nand can be ignored.\r\n\r\nHowever the more knowledgeable SecureDrop admin who manually source\r\nthe .venv will be confused. We remove the .venv and symlink the new\r\nadmin/.venv so the change is transparent.\r\n\r\n## Testing\r\n\r\n* ./securedrop-admin setup # with 0.5.2\r\n* see .venv exits and is a directory\r\n* /securedrop-admin setup # with 0.6 rc2\r\n* see .venv exists and is a symlink to admin/.venv\r\n* source .venv/bin/activate\r\n* ansible --version\r\nansible 2.4.2.0\r\n\r\n## Deployment\r\n\r\n1. SecureDrop admin following the documentation will not be affected. It will however fix a bug for the SecureDrop admin who source .venv even though it is not documented to exist \r\n2. N/A this is only for upgrades\r\n", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3092/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3092/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3091", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3091/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3091/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3091/events", "html_url": "https://github.com/freedomofpress/securedrop/pull/3091", "id": 301536673, "node_id": "MDExOlB1bGxSZXF1ZXN0MTcyMzM2MDkx", "number": 3091, "title": "Monitor only hostname in /var/lib/tor/services", "user": {"login": "emkll", "id": 15223328, "node_id": "MDQ6VXNlcjE1MjIzMzI4", "avatar_url": "https://avatars.githubusercontent.com/u/15223328?v=4", "gravatar_id": "", "url": "https://api.github.com/users/emkll", "html_url": "https://github.com/emkll", "followers_url": "https://api.github.com/users/emkll/followers", "following_url": "https://api.github.com/users/emkll/following{/other_user}", "gists_url": "https://api.github.com/users/emkll/gists{/gist_id}", "starred_url": "https://api.github.com/users/emkll/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/emkll/subscriptions", "organizations_url": "https://api.github.com/users/emkll/orgs", "repos_url": "https://api.github.com/users/emkll/repos", "events_url": "https://api.github.com/users/emkll/events{/privacy}", "received_events_url": "https://api.github.com/users/emkll/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}, {"id": 385585080, "node_id": "MDU6TGFiZWwzODU1ODUwODA=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/QA:%20Release", "name": "QA: Release", "color": "fbca04", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/freedomofpress/securedrop/milestones/27", "html_url": "https://github.com/freedomofpress/securedrop/milestone/27", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/milestones/27/labels", "id": 2563515, "node_id": "MDk6TWlsZXN0b25lMjU2MzUxNQ==", "number": 27, "title": "0.6", "description": "End of day February 27: Feature freeze. From this point forward, only merge small fixes and stuff that touches testing.\r\n\r\nMarch 6 String freeze. \r\n(Release date to match Tails 3.6 release date in https://tails.boum.org/contribute/calendar/)", "creator": {"login": "redshiftzero", "id": 7832803, "node_id": "MDQ6VXNlcjc4MzI4MDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7832803?v=4", "gravatar_id": "", "url": "https://api.github.com/users/redshiftzero", "html_url": "https://github.com/redshiftzero", "followers_url": "https://api.github.com/users/redshiftzero/followers", "following_url": "https://api.github.com/users/redshiftzero/following{/other_user}", "gists_url": "https://api.github.com/users/redshiftzero/gists{/gist_id}", "starred_url": "https://api.github.com/users/redshiftzero/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/redshiftzero/subscriptions", "organizations_url": "https://api.github.com/users/redshiftzero/orgs", "repos_url": "https://api.github.com/users/redshiftzero/repos", "events_url": "https://api.github.com/users/redshiftzero/events{/privacy}", "received_events_url": "https://api.github.com/users/redshiftzero/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 68, "state": "closed", "created_at": "2017-06-06T01:31:16Z", "updated_at": "2018-03-16T21:24:40Z", "due_on": "2018-03-13T07:00:00Z", "closed_at": "2018-03-16T21:24:40Z"}, "comments": 3, "created_at": "2018-03-01T19:51:19Z", "updated_at": "2018-04-02T13:13:52Z", "closed_at": "2018-03-01T20:58:11Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/freedomofpress/securedrop/pulls/3091", "html_url": "https://github.com/freedomofpress/securedrop/pull/3091", "diff_url": "https://github.com/freedomofpress/securedrop/pull/3091.diff", "patch_url": "https://github.com/freedomofpress/securedrop/pull/3091.patch", "merged_at": "2018-03-01T20:58:11Z"}, "body": "PR #2963 introduced monitoring of /var/lib/tor folder, however these folders contain private key material. It would be more prudent (and at no cost integrity monitoring capabilities) to exclusively monitor the hostname.\r\nFixes #3090\r\n\r\n## Status\r\n\r\nReady for review\r\n\r\n## Description of Changes\r\n\r\nFixes #3090 \r\n\r\n## Testing\r\n\r\n`/var/ossec/queue/syscheck/\\(app-staging\\)\\ 10.0.1.2-\\>syscheck` should not contain any file named `private_key` within the `/var/lib/tor/services` directory.\r\n\r\nIt should be monitoring only files named `hostname` which contain the onion URL of the respective services.\r\n\r\n## Checklist\r\n\r\n### If you made changes to the app code:\r\n\r\n- [x] Unit and functional tests pass on the development VM\r\n\r\n### If you made changes to the system configuration:\r\n\r\n- [x] [Configuration tests](https://docs.securedrop.org/en/latest/development/testing_configuration_tests.html) pass\r\n\r\n### If you made changes to documentation:\r\n\r\n- [ ] Doc linting passed locally\r\n", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3091/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3091/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3090", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3090/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3090/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3090/events", "html_url": "https://github.com/freedomofpress/securedrop/issues/3090", "id": 301521131, "node_id": "MDU6SXNzdWUzMDE1MjExMzE=", "number": 3090, "title": "Syscheck should not monitor integrity of Tor hidden service private keys", "user": {"login": "emkll", "id": 15223328, "node_id": "MDQ6VXNlcjE1MjIzMzI4", "avatar_url": "https://avatars.githubusercontent.com/u/15223328?v=4", "gravatar_id": "", "url": "https://api.github.com/users/emkll", "html_url": "https://github.com/emkll", "followers_url": "https://api.github.com/users/emkll/followers", "following_url": "https://api.github.com/users/emkll/following{/other_user}", "gists_url": "https://api.github.com/users/emkll/gists{/gist_id}", "starred_url": "https://api.github.com/users/emkll/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/emkll/subscriptions", "organizations_url": "https://api.github.com/users/emkll/orgs", "repos_url": "https://api.github.com/users/emkll/repos", "events_url": "https://api.github.com/users/emkll/events{/privacy}", "received_events_url": "https://api.github.com/users/emkll/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}, {"id": 385585080, "node_id": "MDU6TGFiZWwzODU1ODUwODA=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/QA:%20Release", "name": "QA: Release", "color": "fbca04", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "emkll", "id": 15223328, "node_id": "MDQ6VXNlcjE1MjIzMzI4", "avatar_url": "https://avatars.githubusercontent.com/u/15223328?v=4", "gravatar_id": "", "url": "https://api.github.com/users/emkll", "html_url": "https://github.com/emkll", "followers_url": "https://api.github.com/users/emkll/followers", "following_url": "https://api.github.com/users/emkll/following{/other_user}", "gists_url": "https://api.github.com/users/emkll/gists{/gist_id}", "starred_url": "https://api.github.com/users/emkll/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/emkll/subscriptions", "organizations_url": "https://api.github.com/users/emkll/orgs", "repos_url": "https://api.github.com/users/emkll/repos", "events_url": "https://api.github.com/users/emkll/events{/privacy}", "received_events_url": "https://api.github.com/users/emkll/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "emkll", "id": 15223328, "node_id": "MDQ6VXNlcjE1MjIzMzI4", "avatar_url": "https://avatars.githubusercontent.com/u/15223328?v=4", "gravatar_id": "", "url": "https://api.github.com/users/emkll", "html_url": "https://github.com/emkll", "followers_url": "https://api.github.com/users/emkll/followers", "following_url": "https://api.github.com/users/emkll/following{/other_user}", "gists_url": "https://api.github.com/users/emkll/gists{/gist_id}", "starred_url": "https://api.github.com/users/emkll/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/emkll/subscriptions", "organizations_url": "https://api.github.com/users/emkll/orgs", "repos_url": "https://api.github.com/users/emkll/repos", "events_url": "https://api.github.com/users/emkll/events{/privacy}", "received_events_url": "https://api.github.com/users/emkll/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/freedomofpress/securedrop/milestones/27", "html_url": "https://github.com/freedomofpress/securedrop/milestone/27", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/milestones/27/labels", "id": 2563515, "node_id": "MDk6TWlsZXN0b25lMjU2MzUxNQ==", "number": 27, "title": "0.6", "description": "End of day February 27: Feature freeze. From this point forward, only merge small fixes and stuff that touches testing.\r\n\r\nMarch 6 String freeze. \r\n(Release date to match Tails 3.6 release date in https://tails.boum.org/contribute/calendar/)", "creator": {"login": "redshiftzero", "id": 7832803, "node_id": "MDQ6VXNlcjc4MzI4MDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7832803?v=4", "gravatar_id": "", "url": "https://api.github.com/users/redshiftzero", "html_url": "https://github.com/redshiftzero", "followers_url": "https://api.github.com/users/redshiftzero/followers", "following_url": "https://api.github.com/users/redshiftzero/following{/other_user}", "gists_url": "https://api.github.com/users/redshiftzero/gists{/gist_id}", "starred_url": "https://api.github.com/users/redshiftzero/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/redshiftzero/subscriptions", "organizations_url": "https://api.github.com/users/redshiftzero/orgs", "repos_url": "https://api.github.com/users/redshiftzero/repos", "events_url": "https://api.github.com/users/redshiftzero/events{/privacy}", "received_events_url": "https://api.github.com/users/redshiftzero/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 68, "state": "closed", "created_at": "2017-06-06T01:31:16Z", "updated_at": "2018-03-16T21:24:40Z", "due_on": "2018-03-13T07:00:00Z", "closed_at": "2018-03-16T21:24:40Z"}, "comments": 2, "created_at": "2018-03-01T19:01:05Z", "updated_at": "2018-03-02T00:46:45Z", "closed_at": "2018-03-02T00:46:45Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "# Bug\r\n\r\n## Description\r\n\r\n#2963 introduced syscheck monitoring of /var/lib/tor/services. @redshiftzero pointed out that with these changes, Tor hidden service private keys are being monitored.\r\nWhile OSSEC will only send an email upon changes to the file and the hash should always remain on the mon server as the key should not change, the hostname file should be sufficient to monitor the integrity of the hidden service.\r\nThis change has only been recently introduced and is not yet running on production SecureDrop instances. \r\nA short summary of the issue.\r\n\r\n## Steps to Reproduce\r\n\r\nInspect `/var/ossec/queue/syscheck/\\(app-staging\\)\\ 10.0.1.2-\\>syscheck` and observe MD5 and SHA1 hashes of:\r\n- /var/lib/tor/services/ssh/private_key\r\n- /var/lib/tor/services/journalist/private_key\r\n- /var/lib/tor/services/source/private_key\r\n\r\n## Expected Behavior\r\n\r\nPrivate key material should not be monitored by the IDS unless it is absolutely necessary for the integrity of the service.\r\n\r\n## Actual Behavior\r\n\r\nPrivate key material is being hashed by the IDS and send to to Monitor server.\r\n", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3090/reactions", "total_count": 1, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3090/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3085", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3085/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3085/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3085/events", "html_url": "https://github.com/freedomofpress/securedrop/issues/3085", "id": 301428155, "node_id": "MDU6SXNzdWUzMDE0MjgxNTU=", "number": 3085, "title": "New source can not login after db reset", "user": {"login": "kushaldas", "id": 272303, "node_id": "MDQ6VXNlcjI3MjMwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/272303?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kushaldas", "html_url": "https://github.com/kushaldas", "followers_url": "https://api.github.com/users/kushaldas/followers", "following_url": "https://api.github.com/users/kushaldas/following{/other_user}", "gists_url": "https://api.github.com/users/kushaldas/gists{/gist_id}", "starred_url": "https://api.github.com/users/kushaldas/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kushaldas/subscriptions", "organizations_url": "https://api.github.com/users/kushaldas/orgs", "repos_url": "https://api.github.com/users/kushaldas/repos", "events_url": "https://api.github.com/users/kushaldas/events{/privacy}", "received_events_url": "https://api.github.com/users/kushaldas/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}, {"id": 475997849, "node_id": "MDU6TGFiZWw0NzU5OTc4NDk=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/tests", "name": "tests", "color": "f9d0c4", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2018-03-01T14:38:48Z", "updated_at": "2018-03-01T15:16:52Z", "closed_at": "2018-03-01T15:16:52Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "# Bug\r\n\r\n## Description\r\n\r\nA new source can not login to the source interface. It generates the \r\n\r\n## Steps to Reproduce\r\n\r\n- ssh into the app server.\r\n- `sudo su`\r\n- `cd /var/www/securedrop`\r\n- `./manage.py reset`\r\n- `service apache2 restart` or `dpkg-reconfigure securedrop-app-code`\r\n- Try to login to the source interface\r\n\r\n## Expected Behavior\r\n\r\nA new source should be able to login and submit documents.\r\n\r\n## Actual Behavior\r\n\r\nShowing server error when we click on the \"SUBMIT DOCUMENTS\" link.\r\n\r\n(This is an updated vm from 0.5.2)", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3085/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3085/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3068", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3068/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3068/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3068/events", "html_url": "https://github.com/freedomofpress/securedrop/pull/3068", "id": 299889519, "node_id": "MDExOlB1bGxSZXF1ZXN0MTcxMTQ2MDg4", "number": 3068, "title": "admin: do not ignore setup arguments", "user": {"login": "ghost", "id": 10137, "node_id": "MDQ6VXNlcjEwMTM3", "avatar_url": "https://avatars.githubusercontent.com/u/10137?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ghost", "html_url": "https://github.com/ghost", "followers_url": "https://api.github.com/users/ghost/followers", "following_url": "https://api.github.com/users/ghost/following{/other_user}", "gists_url": "https://api.github.com/users/ghost/gists{/gist_id}", "starred_url": "https://api.github.com/users/ghost/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ghost/subscriptions", "organizations_url": "https://api.github.com/users/ghost/orgs", "repos_url": "https://api.github.com/users/ghost/repos", "events_url": "https://api.github.com/users/ghost/events{/privacy}", "received_events_url": "https://api.github.com/users/ghost/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}, {"id": 192539287, "node_id": "MDU6TGFiZWwxOTI1MzkyODc=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/ops/deployment", "name": "ops/deployment", "color": "c7def8", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/freedomofpress/securedrop/milestones/27", "html_url": "https://github.com/freedomofpress/securedrop/milestone/27", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/milestones/27/labels", "id": 2563515, "node_id": "MDk6TWlsZXN0b25lMjU2MzUxNQ==", "number": 27, "title": "0.6", "description": "End of day February 27: Feature freeze. From this point forward, only merge small fixes and stuff that touches testing.\r\n\r\nMarch 6 String freeze. \r\n(Release date to match Tails 3.6 release date in https://tails.boum.org/contribute/calendar/)", "creator": {"login": "redshiftzero", "id": 7832803, "node_id": "MDQ6VXNlcjc4MzI4MDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7832803?v=4", "gravatar_id": "", "url": "https://api.github.com/users/redshiftzero", "html_url": "https://github.com/redshiftzero", "followers_url": "https://api.github.com/users/redshiftzero/followers", "following_url": "https://api.github.com/users/redshiftzero/following{/other_user}", "gists_url": "https://api.github.com/users/redshiftzero/gists{/gist_id}", "starred_url": "https://api.github.com/users/redshiftzero/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/redshiftzero/subscriptions", "organizations_url": "https://api.github.com/users/redshiftzero/orgs", "repos_url": "https://api.github.com/users/redshiftzero/repos", "events_url": "https://api.github.com/users/redshiftzero/events{/privacy}", "received_events_url": "https://api.github.com/users/redshiftzero/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 68, "state": "closed", "created_at": "2017-06-06T01:31:16Z", "updated_at": "2018-03-16T21:24:40Z", "due_on": "2018-03-13T07:00:00Z", "closed_at": "2018-03-16T21:24:40Z"}, "comments": 4, "created_at": "2018-02-24T00:15:23Z", "updated_at": "2018-02-27T23:28:50Z", "closed_at": "2018-02-27T17:21:13Z", "author_association": "NONE", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/freedomofpress/securedrop/pulls/3068", "html_url": "https://github.com/freedomofpress/securedrop/pull/3068", "diff_url": "https://github.com/freedomofpress/securedrop/pull/3068.diff", "patch_url": "https://github.com/freedomofpress/securedrop/pull/3068.patch", "merged_at": "2018-02-27T17:21:12Z"}, "body": "## Status\r\n\r\nReady for review\r\n\r\n## Description of Changes\r\n\r\nContributes to: #3060 *\r\n\r\nThe -v argument of ./securedrop-admin setup -v is necessary to debug\r\ninstallation problems because the detailed output of an error only\r\nshows in debug mode.\r\n\r\n## Testing\r\n\r\n* $ ./securedrop-admin -v setup\r\nplease run './securedrop-admin setup' first\r\n* ./securedrop-admin setup\r\n<pre>\r\nINFO: Installing SecureDrop Admin dependencies\r\nINFO: You'll be prompted for the temporary Tails admin password, which was set on Tails login screen\r\nIgn:1 http://ftp.fr.debian.org/debian stretch InRelease\r\nHit:2 http://ftp.fr.debian.org/debian stretch-updates InRelease\r\n...\r\n  nodejs-doc x11-apps x11-session-utils xbitmaps xinit xorg\r\nUse 'sudo apt autoremove' to remove them.\r\n0 upgraded, 0 newly installed, 0 to remove and 58 not upgraded.\r\nINFO: Setting up virtualenv\r\nINFO: Checking Python dependencies for securedrop-admin\r\nINFO: Python dependencies for securedrop-admin upgraded\r\nINFO: Finished installing SecureDrop dependencies\r\n</pre>\r\n* ./securedrop-admin setup -v\r\n<pre>\r\nINFO: Virtualenv already exists, not creating\r\nINFO: Checking Python dependencies for securedrop-admin\r\nDEBUG: Requirement already up-to-date: ansible==2.4.2 in ./admin/.venv/lib/python2.7/site-packages (from -r /home/loic/software/securedrop/securedrop/admin/requirements.txt (line 7))\r\n...\r\nRequirement already up-to-date: wcwidth==0.1.7 in ./admin/.venv/lib/python2.7/site-packages (from -r /home/loic/software/securedrop/securedrop/admin/requirements.txt (line 171))\r\nRequirement not upgraded as not directly required: setuptools in ./admin/.venv/lib/python2.7/site-packages (from ansible==2.4.2->-r /home/loic/software/securedrop/securedrop/admin/requirements.txt (line 7))\r\n\r\nINFO: Python dependencies for securedrop-admin are up-to-date\r\nINFO: Finished installing SecureDrop dependencies\r\n</pre>\r\n* ./securedrop-admin setup --help\r\n</pre>\r\nusage: bootstrap.py [-h] [-v]\r\n\r\noptional arguments:\r\n  -h, --help  show this help message and exit\r\n  -v          Increase verbosity on output\r\n</pre>\r\n## Deployment\r\n\r\nAfter a git pull in a production environment the new ./securedrop-admin will override the previous one and use a different .venv, therefore not be influenced by leftovers.\r\n", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3068/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3068/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3065", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3065/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3065/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3065/events", "html_url": "https://github.com/freedomofpress/securedrop/pull/3065", "id": 299689942, "node_id": "MDExOlB1bGxSZXF1ZXN0MTcwOTk5MDYy", "number": 3065, "title": "build: pip wheel must fail when it does not build a python module", "user": {"login": "ghost", "id": 10137, "node_id": "MDQ6VXNlcjEwMTM3", "avatar_url": "https://avatars.githubusercontent.com/u/10137?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ghost", "html_url": "https://github.com/ghost", "followers_url": "https://api.github.com/users/ghost/followers", "following_url": "https://api.github.com/users/ghost/following{/other_user}", "gists_url": "https://api.github.com/users/ghost/gists{/gist_id}", "starred_url": "https://api.github.com/users/ghost/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ghost/subscriptions", "organizations_url": "https://api.github.com/users/ghost/orgs", "repos_url": "https://api.github.com/users/ghost/repos", "events_url": "https://api.github.com/users/ghost/events{/privacy}", "received_events_url": "https://api.github.com/users/ghost/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}, {"id": 616447722, "node_id": "MDU6TGFiZWw2MTY0NDc3MjI=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/build%20process", "name": "build process", "color": "bfd4f2", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 7, "created_at": "2018-02-23T12:02:58Z", "updated_at": "2018-02-26T23:12:13Z", "closed_at": "2018-02-26T23:12:09Z", "author_association": "NONE", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/freedomofpress/securedrop/pulls/3065", "html_url": "https://github.com/freedomofpress/securedrop/pull/3065", "diff_url": "https://github.com/freedomofpress/securedrop/pull/3065.diff", "patch_url": "https://github.com/freedomofpress/securedrop/pull/3065.patch", "merged_at": "2018-02-26T23:12:09Z"}, "body": "## Status\r\n\r\nReady for review\r\n\r\n## Description of Changes\r\n\r\nIt's not a catastrophy to not fail when pip wheel fails because it will eventually fail when installed. But it's non-intuitive to see a failure during installation and much easier to debug if it fails early.\r\n\r\n## Testing\r\n\r\n* Add **pillow==5.0.0** to `securedrop/requirements/securedrop-app-code-requirements.txt`\r\n* make build-debs # it must fail\r\n* Add libjpeg-dev to **molecule/builder/Dockerfile**\r\n* make build-debs # it must succeed\r\n\r\n## Deployment\r\n\r\nN/A\r\n", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3065/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3065/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3062", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3062/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3062/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3062/events", "html_url": "https://github.com/freedomofpress/securedrop/pull/3062", "id": 299542641, "node_id": "MDExOlB1bGxSZXF1ZXN0MTcwODkyMjU3", "number": 3062, "title": "app: add missing journalist templates in apparmor", "user": {"login": "ghost", "id": 10137, "node_id": "MDQ6VXNlcjEwMTM3", "avatar_url": "https://avatars.githubusercontent.com/u/10137?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ghost", "html_url": "https://github.com/ghost", "followers_url": "https://api.github.com/users/ghost/followers", "following_url": "https://api.github.com/users/ghost/following{/other_user}", "gists_url": "https://api.github.com/users/ghost/gists{/gist_id}", "starred_url": "https://api.github.com/users/ghost/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ghost/subscriptions", "organizations_url": "https://api.github.com/users/ghost/orgs", "repos_url": "https://api.github.com/users/ghost/repos", "events_url": "https://api.github.com/users/ghost/events{/privacy}", "received_events_url": "https://api.github.com/users/ghost/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}, {"id": 192539755, "node_id": "MDU6TGFiZWwxOTI1Mzk3NTU=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/app", "name": "app", "color": "bfe5bf", "default": false, "description": null}, {"id": 475977470, "node_id": "MDU6TGFiZWw0NzU5Nzc0NzA=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/journalist%20interface%20(JI)", "name": "journalist interface (JI)", "color": "f9d0c4", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2018-02-22T23:09:59Z", "updated_at": "2018-02-23T01:50:49Z", "closed_at": "2018-02-23T01:50:46Z", "author_association": "NONE", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/freedomofpress/securedrop/pulls/3062", "html_url": "https://github.com/freedomofpress/securedrop/pull/3062", "diff_url": "https://github.com/freedomofpress/securedrop/pull/3062.diff", "patch_url": "https://github.com/freedomofpress/securedrop/pull/3062.patch", "merged_at": "2018-02-23T01:50:46Z"}, "body": "## Status\r\n\r\nReady for review\r\n\r\n## Description of Changes\r\n\r\nadd missing journalist templates in usr.sbin.apache apparmor\r\n\r\n## Testing\r\n\r\n* make build-debs\r\n* vagrant up /staging/\r\n* register an admin user\r\n* submit documents\r\n* navigate the journalist interface to see all templates that were added and verify they can be accessed\r\n\r\n## Deployment\r\n\r\nThe updated apparmor file will overwrite the current one.\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3062/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3062/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3060", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3060/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3060/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3060/events", "html_url": "https://github.com/freedomofpress/securedrop/issues/3060", "id": 299487669, "node_id": "MDU6SXNzdWUyOTk0ODc2Njk=", "number": 3060, "title": "Various problems with securedrop-admin ", "user": {"login": "conorsch", "id": 657862, "node_id": "MDQ6VXNlcjY1Nzg2Mg==", "avatar_url": "https://avatars.githubusercontent.com/u/657862?v=4", "gravatar_id": "", "url": "https://api.github.com/users/conorsch", "html_url": "https://github.com/conorsch", "followers_url": "https://api.github.com/users/conorsch/followers", "following_url": "https://api.github.com/users/conorsch/following{/other_user}", "gists_url": "https://api.github.com/users/conorsch/gists{/gist_id}", "starred_url": "https://api.github.com/users/conorsch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/conorsch/subscriptions", "organizations_url": "https://api.github.com/users/conorsch/orgs", "repos_url": "https://api.github.com/users/conorsch/repos", "events_url": "https://api.github.com/users/conorsch/events{/privacy}", "received_events_url": "https://api.github.com/users/conorsch/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}, {"id": 385585080, "node_id": "MDU6TGFiZWwzODU1ODUwODA=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/QA:%20Release", "name": "QA: Release", "color": "fbca04", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/freedomofpress/securedrop/milestones/27", "html_url": "https://github.com/freedomofpress/securedrop/milestone/27", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/milestones/27/labels", "id": 2563515, "node_id": "MDk6TWlsZXN0b25lMjU2MzUxNQ==", "number": 27, "title": "0.6", "description": "End of day February 27: Feature freeze. From this point forward, only merge small fixes and stuff that touches testing.\r\n\r\nMarch 6 String freeze. \r\n(Release date to match Tails 3.6 release date in https://tails.boum.org/contribute/calendar/)", "creator": {"login": "redshiftzero", "id": 7832803, "node_id": "MDQ6VXNlcjc4MzI4MDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7832803?v=4", "gravatar_id": "", "url": "https://api.github.com/users/redshiftzero", "html_url": "https://github.com/redshiftzero", "followers_url": "https://api.github.com/users/redshiftzero/followers", "following_url": "https://api.github.com/users/redshiftzero/following{/other_user}", "gists_url": "https://api.github.com/users/redshiftzero/gists{/gist_id}", "starred_url": "https://api.github.com/users/redshiftzero/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/redshiftzero/subscriptions", "organizations_url": "https://api.github.com/users/redshiftzero/orgs", "repos_url": "https://api.github.com/users/redshiftzero/repos", "events_url": "https://api.github.com/users/redshiftzero/events{/privacy}", "received_events_url": "https://api.github.com/users/redshiftzero/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 68, "state": "closed", "created_at": "2017-06-06T01:31:16Z", "updated_at": "2018-03-16T21:24:40Z", "due_on": "2018-03-13T07:00:00Z", "closed_at": "2018-03-16T21:24:40Z"}, "comments": 5, "created_at": "2018-02-22T19:58:07Z", "updated_at": "2018-03-02T21:31:16Z", "closed_at": "2018-03-02T21:31:16Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "# Bug\r\n\r\n## Description\r\n\r\nThe `securedrop-admin` script underwent substantial changes in #2758. Below are a few examples of what seem to be regressions, but all instances bear scrutiny in order to reproduce. \r\n\r\n### \"setup\" subcommand appears broken\r\n\r\nThe project docs instruct Admins to run `./securedrop-admin setup` in order to configure a virtualenv. The new behavior appears buggy:\r\n\r\n```\r\namnesia@amnesia:~/Persistent/securedrop$ ./securedrop-admin setup -v\r\n./securedrop-admin: line 13: /home/amnesia/Persistent/securedrop/admin/.venv/bin/securedrop-admin: No such file or directory\r\namnesia@amnesia:~/Persistent/securedrop$ ./securedrop-admin -v setup\r\nINFO: Virtualenv already exists, not creating\r\nINFO: Checking Python dependencies for securedrop-admin\r\nINFO: Python dependencies for securedrop-admin are up-to-date\r\nERROR: Unable to install self, run with -v for more information\r\namnesia@amnesia:~/Persistent/securedrop$ stat .venv\r\nstat: cannot stat '.venv': No such file or directory\r\namnesia@amnesia:~/Persistent/securedrop$ stat ./admin/.venv\r\n  File: ./admin/.venv\r\n  Size: 4096      \tBlocks: 16         IO Block: 4096   directory\r\nDevice: 2ch/44d\tInode: 10805276    Links: 7\r\nAccess: (0755/drwxr-xr-x)  Uid: ( 1000/ amnesia)   Gid: ( 1000/ amnesia)\r\nAccess: 2018-02-22 00:52:58.362725970 +0000\r\nModify: 2018-02-22 00:41:20.153904179 +0000\r\nChange: 2018-02-22 00:52:58.182727271 +0000\r\n Birth: -\r\namnesia@amnesia:~/Persistent/securedrop$ rm -rf ./admin/.venv\r\namnesia@amnesia:~/Persistent/securedrop$ ./securedrop-admin setup\r\nINFO: Installing SecureDrop Admin dependencies\r\nINFO: You'll be prompted for the temporary Tails admin password, which was set on Tails login screen\r\n[sudo] password for amnesia: \r\n```\r\n\r\nThe script then proceeds with apt installation, which appears to work well. However, the virtualenv stage still fails:\r\n\r\n```\r\nINFO: Setting up virtualenv\r\nINFO: Checking Python dependencies for securedrop-admin\r\nINFO: Python dependencies for securedrop-admin upgraded\r\nERROR: Unable to install self, run with -v for more information\r\n```\r\n\r\n### Lack of verbosity\r\nThe script doesn't reliably produce more verbosity. This is particularly frustrating when the script requests additional verbosity via the `-v` flag, then refuses to provide it:\r\n\r\n```\r\namnesia@amnesia:~/Persistent/securedrop$ ./securedrop-admin setup\r\nINFO: Virtualenv already exists, not creating\r\nINFO: Checking Python dependencies for securedrop-admin\r\nINFO: Python dependencies for securedrop-admin are up-to-date\r\nERROR: Unable to install self, run with -v for more information\r\namnesia@amnesia:~/Persistent/securedrop$ ./securedrop-admin -v setup\r\nINFO: Virtualenv already exists, not creating\r\nINFO: Checking Python dependencies for securedrop-admin\r\nINFO: Python dependencies for securedrop-admin are up-to-date\r\nERROR: Unable to install self, run with -v for more information\r\n```\r\n\r\nEven more confusing:\r\n\r\n\r\n## Loss of helpful messaging\r\nAlso, we lost helpful messaging on the SecureDrop Admin script when the virtualenv is not configured:\r\n```\r\namnesia@amnesia:~/Persistent/securedrop$ ./securedrop-admin sdconfig\r\n./securedrop-admin: line 13: /home/amnesia/Persistent/securedrop/admin/.venv/bin/securedrop-admin: No such file or directory\r\n```\r\n\r\nThe above command, without a virtualenv, _should_ display something more friendly, such as:\r\n\r\n```\r\nERROR: Pre-requisites not in place, re-run command with 'setup'\r\n```\r\n\r\nIt used to do so.\r\n\r\n## Comments\r\n\r\nPerhaps the problems outlined above are specific to my dev env\u2014please try to reproduce with an open mind, and let me know if you have trouble. In particular, the Makefile changes for Linux/libvirt introduced in #2607 may be relevant here\u2014perhaps I have not been diligent in policing the extended attributes, and the permissions errors are masked. Even if that's the case, I would expect more friendly messaging from the script.", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3060/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3060/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3047", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3047/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3047/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3047/events", "html_url": "https://github.com/freedomofpress/securedrop/pull/3047", "id": 298851684, "node_id": "MDExOlB1bGxSZXF1ZXN0MTcwMzgzNDU4", "number": 3047, "title": "Fixes typo and style errors : issue #3011", "user": {"login": "barun511", "id": 12569516, "node_id": "MDQ6VXNlcjEyNTY5NTE2", "avatar_url": "https://avatars.githubusercontent.com/u/12569516?v=4", "gravatar_id": "", "url": "https://api.github.com/users/barun511", "html_url": "https://github.com/barun511", "followers_url": "https://api.github.com/users/barun511/followers", "following_url": "https://api.github.com/users/barun511/following{/other_user}", "gists_url": "https://api.github.com/users/barun511/gists{/gist_id}", "starred_url": "https://api.github.com/users/barun511/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/barun511/subscriptions", "organizations_url": "https://api.github.com/users/barun511/orgs", "repos_url": "https://api.github.com/users/barun511/repos", "events_url": "https://api.github.com/users/barun511/events{/privacy}", "received_events_url": "https://api.github.com/users/barun511/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}, {"id": 118465787, "node_id": "MDU6TGFiZWwxMTg0NjU3ODc=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/docs", "name": "docs", "color": "d4c5f9", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 13, "created_at": "2018-02-21T06:01:22Z", "updated_at": "2018-03-15T12:21:22Z", "closed_at": "2018-03-15T12:21:22Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/freedomofpress/securedrop/pulls/3047", "html_url": "https://github.com/freedomofpress/securedrop/pull/3047", "diff_url": "https://github.com/freedomofpress/securedrop/pull/3047.diff", "patch_url": "https://github.com/freedomofpress/securedrop/pull/3047.patch", "merged_at": null}, "body": "## Status\r\n\r\nReady for review / Work in progress\r\n\r\n## Description of Changes\r\n\r\nFixes #.\r\n\r\nChanges proposed in this pull request:\r\n\r\n## Testing\r\n\r\nHow should the reviewer test this PR?\r\nWrite out any special testing steps here.\r\n\r\n## Deployment\r\n\r\nAny special considerations for deployment? Consider both:\r\n\r\n1. Upgrading existing production instances.\r\n2. New installs.\r\n\r\n## Checklist\r\n\r\n### If you made changes to the app code:\r\n\r\n- [ ] Unit and functional tests pass on the development VM\r\n\r\n### If you made changes to the system configuration:\r\n\r\n- [ ] [Configuration tests](https://docs.securedrop.org/en/latest/development/testing_configuration_tests.html) pass\r\n\r\n### If you made changes to documentation:\r\n\r\n- [ ] Doc linting passed locally\r\n", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3047/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3047/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3045", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3045/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3045/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3045/events", "html_url": "https://github.com/freedomofpress/securedrop/pull/3045", "id": 298827722, "node_id": "MDExOlB1bGxSZXF1ZXN0MTcwMzY2NzQ2", "number": 3045, "title": "terminology.rst: fixed grammer issues", "user": {"login": "Anonymous26", "id": 20697219, "node_id": "MDQ6VXNlcjIwNjk3MjE5", "avatar_url": "https://avatars.githubusercontent.com/u/20697219?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Anonymous26", "html_url": "https://github.com/Anonymous26", "followers_url": "https://api.github.com/users/Anonymous26/followers", "following_url": "https://api.github.com/users/Anonymous26/following{/other_user}", "gists_url": "https://api.github.com/users/Anonymous26/gists{/gist_id}", "starred_url": "https://api.github.com/users/Anonymous26/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Anonymous26/subscriptions", "organizations_url": "https://api.github.com/users/Anonymous26/orgs", "repos_url": "https://api.github.com/users/Anonymous26/repos", "events_url": "https://api.github.com/users/Anonymous26/events{/privacy}", "received_events_url": "https://api.github.com/users/Anonymous26/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}, {"id": 118465787, "node_id": "MDU6TGFiZWwxMTg0NjU3ODc=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/docs", "name": "docs", "color": "d4c5f9", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2018-02-21T03:11:16Z", "updated_at": "2018-02-21T10:09:56Z", "closed_at": "2018-02-21T10:09:43Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/freedomofpress/securedrop/pulls/3045", "html_url": "https://github.com/freedomofpress/securedrop/pull/3045", "diff_url": "https://github.com/freedomofpress/securedrop/pull/3045.diff", "patch_url": "https://github.com/freedomofpress/securedrop/pull/3045.patch", "merged_at": "2018-02-21T10:09:43Z"}, "body": "## Status\r\n\r\nReady for review \r\n\r\n## Description of Changes \r\n\r\nRelates-to: #3012 \r\nFixed few grammatical errors\r\n\r\n## Checklist\r\n\r\n### If you made changes to the app code:\r\n\r\n- [ ] Unit and functional tests pass on the development VM\r\n\r\n### If you made changes to the system configuration:\r\n\r\n- [ ] [Configuration tests](https://docs.securedrop.org/en/latest/development/testing_configuration_tests.html) pass\r\n\r\n### If you made changes to documentation:\r\n\r\n- [x] Doc linting passed locally\r\n", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3045/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3045/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3043", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3043/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3043/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3043/events", "html_url": "https://github.com/freedomofpress/securedrop/issues/3043", "id": 298797931, "node_id": "MDU6SXNzdWUyOTg3OTc5MzE=", "number": 3043, "title": "Image uploaded by journalist is always saved as a PNG file", "user": {"login": "aydwi", "id": 29029116, "node_id": "MDQ6VXNlcjI5MDI5MTE2", "avatar_url": "https://avatars.githubusercontent.com/u/29029116?v=4", "gravatar_id": "", "url": "https://api.github.com/users/aydwi", "html_url": "https://github.com/aydwi", "followers_url": "https://api.github.com/users/aydwi/followers", "following_url": "https://api.github.com/users/aydwi/following{/other_user}", "gists_url": "https://api.github.com/users/aydwi/gists{/gist_id}", "starred_url": "https://api.github.com/users/aydwi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/aydwi/subscriptions", "organizations_url": "https://api.github.com/users/aydwi/orgs", "repos_url": "https://api.github.com/users/aydwi/repos", "events_url": "https://api.github.com/users/aydwi/events{/privacy}", "received_events_url": "https://api.github.com/users/aydwi/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/freedomofpress/securedrop/milestones/42", "html_url": "https://github.com/freedomofpress/securedrop/milestone/42", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/milestones/42/labels", "id": 3037554, "node_id": "MDk6TWlsZXN0b25lMzAzNzU1NA==", "number": 42, "title": "0.7", "description": "(Release date to match Tails 3.7 release date in https://tails.boum.org/contribute/calendar/). See also the [detailed i18n timeline](https://forum.securedrop.club/t/about-the-translations-category/16). Feature freeze is April 24 EOD. String freeze is May 1 EOD.\r\n\r\nUpdate May 7, 2018: Release was deferred by one week (to May 15) to allow for more time to QA some late stage fixes.", "creator": {"login": "redshiftzero", "id": 7832803, "node_id": "MDQ6VXNlcjc4MzI4MDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7832803?v=4", "gravatar_id": "", "url": "https://api.github.com/users/redshiftzero", "html_url": "https://github.com/redshiftzero", "followers_url": "https://api.github.com/users/redshiftzero/followers", "following_url": "https://api.github.com/users/redshiftzero/following{/other_user}", "gists_url": "https://api.github.com/users/redshiftzero/gists{/gist_id}", "starred_url": "https://api.github.com/users/redshiftzero/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/redshiftzero/subscriptions", "organizations_url": "https://api.github.com/users/redshiftzero/orgs", "repos_url": "https://api.github.com/users/redshiftzero/repos", "events_url": "https://api.github.com/users/redshiftzero/events{/privacy}", "received_events_url": "https://api.github.com/users/redshiftzero/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 75, "state": "closed", "created_at": "2018-01-15T23:46:19Z", "updated_at": "2018-05-16T05:33:37Z", "due_on": "2018-05-15T07:00:00Z", "closed_at": "2018-05-16T05:33:37Z"}, "comments": 3, "created_at": "2018-02-21T00:16:55Z", "updated_at": "2018-04-03T13:18:36Z", "closed_at": "2018-04-03T13:18:36Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "# Bug\r\n\r\n## Description\r\n\r\nRegardless of the type of image the journalist uploads (JPG, JPEG or PNG), the image `securedrop/static/i/logo.png`  is always saved with a .png extension. This leads to image viewing applications not being able to read and display the file correctly.\r\n\r\n## Steps to Reproduce\r\n\r\nAs an Admin, navigate to 'Instance Configuration' in the journalist app, and upload a JPG/JPEG image as logo.\r\n\r\nOpen 'logo.png' in the directory `securedrop/static/i/`.\r\n\r\n## Expected Behavior\r\n\r\nThe image should be displayed without any errors.\r\n\r\n## Actual Behavior\r\n\r\n![screenshot from 2018-02-21 05-32-52](https://user-images.githubusercontent.com/29029116/36456299-3cc2f428-16ca-11e8-982a-e63e7a1b5991.png)\r\n\r\n## Comments\r\n\r\nTested using Gnome `eog` on Debian Stretch.\r\n", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3043/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3043/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3041", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3041/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3041/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3041/events", "html_url": "https://github.com/freedomofpress/securedrop/pull/3041", "id": 298756342, "node_id": "MDExOlB1bGxSZXF1ZXN0MTcwMzE0MjY5", "number": 3041, "title": "tests: flake8 --exclude must be combined in the same value", "user": {"login": "ghost", "id": 10137, "node_id": "MDQ6VXNlcjEwMTM3", "avatar_url": "https://avatars.githubusercontent.com/u/10137?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ghost", "html_url": "https://github.com/ghost", "followers_url": "https://api.github.com/users/ghost/followers", "following_url": "https://api.github.com/users/ghost/following{/other_user}", "gists_url": "https://api.github.com/users/ghost/gists{/gist_id}", "starred_url": "https://api.github.com/users/ghost/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ghost/subscriptions", "organizations_url": "https://api.github.com/users/ghost/orgs", "repos_url": "https://api.github.com/users/ghost/repos", "events_url": "https://api.github.com/users/ghost/events{/privacy}", "received_events_url": "https://api.github.com/users/ghost/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}, {"id": 475997849, "node_id": "MDU6TGFiZWw0NzU5OTc4NDk=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/tests", "name": "tests", "color": "f9d0c4", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2018-02-20T21:32:11Z", "updated_at": "2018-02-20T22:59:43Z", "closed_at": "2018-02-20T22:59:41Z", "author_association": "NONE", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/freedomofpress/securedrop/pulls/3041", "html_url": "https://github.com/freedomofpress/securedrop/pull/3041", "diff_url": "https://github.com/freedomofpress/securedrop/pull/3041.diff", "patch_url": "https://github.com/freedomofpress/securedrop/pull/3041.patch", "merged_at": "2018-02-20T22:59:41Z"}, "body": "## Status\r\n\r\nReady for review\r\n\r\n## Description of Changes\r\n\r\nThere cannot be multiple --exclude options, the last one will take\r\nprecedence.\r\n\r\n## Testing\r\n\r\n* checkout develop\r\n* create a securedrop/config.py file\r\n* devops/scripts/dev-shell-ci sudo make flake8\r\n* see that it succeeds instead of complaining on config.py\r\n\r\n## Deployment\r\n\r\nN/A\r\n", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3041/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3041/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3040", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3040/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3040/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3040/events", "html_url": "https://github.com/freedomofpress/securedrop/pull/3040", "id": 298750387, "node_id": "MDExOlB1bGxSZXF1ZXN0MTcwMzA5NzYx", "number": 3040, "title": "test: the demo user needs to be admin", "user": {"login": "ghost", "id": 10137, "node_id": "MDQ6VXNlcjEwMTM3", "avatar_url": "https://avatars.githubusercontent.com/u/10137?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ghost", "html_url": "https://github.com/ghost", "followers_url": "https://api.github.com/users/ghost/followers", "following_url": "https://api.github.com/users/ghost/following{/other_user}", "gists_url": "https://api.github.com/users/ghost/gists{/gist_id}", "starred_url": "https://api.github.com/users/ghost/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ghost/subscriptions", "organizations_url": "https://api.github.com/users/ghost/orgs", "repos_url": "https://api.github.com/users/ghost/repos", "events_url": "https://api.github.com/users/ghost/events{/privacy}", "received_events_url": "https://api.github.com/users/ghost/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}, {"id": 475997849, "node_id": "MDU6TGFiZWw0NzU5OTc4NDk=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/tests", "name": "tests", "color": "f9d0c4", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2018-02-20T21:13:06Z", "updated_at": "2018-02-20T22:19:14Z", "closed_at": "2018-02-20T22:19:14Z", "author_association": "NONE", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/freedomofpress/securedrop/pulls/3040", "html_url": "https://github.com/freedomofpress/securedrop/pull/3040", "diff_url": "https://github.com/freedomofpress/securedrop/pull/3040.diff", "patch_url": "https://github.com/freedomofpress/securedrop/pull/3040.patch", "merged_at": "2018-02-20T22:19:14Z"}, "body": "## Status\r\n\r\nReady for review\r\n\r\n## Description of Changes\r\n\r\nA demo user without admin rights does not allow to exercise all aspects of the journalist interface.\r\n\r\n## Testing\r\n\r\n* make -C securedrop dev\r\n* firefox localhost:8081\r\n* login as the demo user (see http://demo.securedrop.club/)\r\n\r\n## Deployment\r\n\r\nN/A\r\n", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3040/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3040/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3039", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3039/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3039/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3039/events", "html_url": "https://github.com/freedomofpress/securedrop/pull/3039", "id": 298739603, "node_id": "MDExOlB1bGxSZXF1ZXN0MTcwMzAxNjM1", "number": 3039, "title": "tests: use TAG when possible and default to git rev-parse HEAD", "user": {"login": "ghost", "id": 10137, "node_id": "MDQ6VXNlcjEwMTM3", "avatar_url": "https://avatars.githubusercontent.com/u/10137?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ghost", "html_url": "https://github.com/ghost", "followers_url": "https://api.github.com/users/ghost/followers", "following_url": "https://api.github.com/users/ghost/following{/other_user}", "gists_url": "https://api.github.com/users/ghost/gists{/gist_id}", "starred_url": "https://api.github.com/users/ghost/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ghost/subscriptions", "organizations_url": "https://api.github.com/users/ghost/orgs", "repos_url": "https://api.github.com/users/ghost/repos", "events_url": "https://api.github.com/users/ghost/events{/privacy}", "received_events_url": "https://api.github.com/users/ghost/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}, {"id": 475997849, "node_id": "MDU6TGFiZWw0NzU5OTc4NDk=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/tests", "name": "tests", "color": "f9d0c4", "default": false, "description": null}, {"id": 807692602, "node_id": "MDU6TGFiZWw4MDc2OTI2MDI=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/CI-specific%20bug", "name": "CI-specific bug", "color": "b60205", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2018-02-20T20:36:55Z", "updated_at": "2018-04-10T15:04:06Z", "closed_at": "2018-02-21T08:48:56Z", "author_association": "NONE", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/freedomofpress/securedrop/pulls/3039", "html_url": "https://github.com/freedomofpress/securedrop/pull/3039", "diff_url": "https://github.com/freedomofpress/securedrop/pull/3039.diff", "patch_url": "https://github.com/freedomofpress/securedrop/pull/3039.patch", "merged_at": "2018-02-21T08:48:56Z"}, "body": "## Status\r\n\r\nReady for review\r\n\r\n## Description of Changes\r\n\r\nIt is important to obey TAG in CircleCI because it will *not* always\r\nmatch git rev-parse HEAD and will lead to inconsistencies.\r\n\r\n## Testing\r\n\r\n* make ci-lint locally to verify the defaults work\r\n* the CircleCI should always succeed (difficult to verify except by running multiple times)\r\n\r\n## Deployment\r\n\r\nN/A\r\n", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3039/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3039/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3038", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3038/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3038/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3038/events", "html_url": "https://github.com/freedomofpress/securedrop/pull/3038", "id": 298731263, "node_id": "MDExOlB1bGxSZXF1ZXN0MTcwMjk1NDQx", "number": 3038, "title": "Apparmor: allow apache2 to execute /usr/bin/file", "user": {"login": "emkll", "id": 15223328, "node_id": "MDQ6VXNlcjE1MjIzMzI4", "avatar_url": "https://avatars.githubusercontent.com/u/15223328?v=4", "gravatar_id": "", "url": "https://api.github.com/users/emkll", "html_url": "https://github.com/emkll", "followers_url": "https://api.github.com/users/emkll/followers", "following_url": "https://api.github.com/users/emkll/following{/other_user}", "gists_url": "https://api.github.com/users/emkll/gists{/gist_id}", "starred_url": "https://api.github.com/users/emkll/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/emkll/subscriptions", "organizations_url": "https://api.github.com/users/emkll/orgs", "repos_url": "https://api.github.com/users/emkll/repos", "events_url": "https://api.github.com/users/emkll/events{/privacy}", "received_events_url": "https://api.github.com/users/emkll/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}, {"id": 192539287, "node_id": "MDU6TGFiZWwxOTI1MzkyODc=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/ops/deployment", "name": "ops/deployment", "color": "c7def8", "default": false, "description": null}, {"id": 192545295, "node_id": "MDU6TGFiZWwxOTI1NDUyOTU=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/security", "name": "security", "color": "bfdadc", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/freedomofpress/securedrop/milestones/27", "html_url": "https://github.com/freedomofpress/securedrop/milestone/27", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/milestones/27/labels", "id": 2563515, "node_id": "MDk6TWlsZXN0b25lMjU2MzUxNQ==", "number": 27, "title": "0.6", "description": "End of day February 27: Feature freeze. From this point forward, only merge small fixes and stuff that touches testing.\r\n\r\nMarch 6 String freeze. \r\n(Release date to match Tails 3.6 release date in https://tails.boum.org/contribute/calendar/)", "creator": {"login": "redshiftzero", "id": 7832803, "node_id": "MDQ6VXNlcjc4MzI4MDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7832803?v=4", "gravatar_id": "", "url": "https://api.github.com/users/redshiftzero", "html_url": "https://github.com/redshiftzero", "followers_url": "https://api.github.com/users/redshiftzero/followers", "following_url": "https://api.github.com/users/redshiftzero/following{/other_user}", "gists_url": "https://api.github.com/users/redshiftzero/gists{/gist_id}", "starred_url": "https://api.github.com/users/redshiftzero/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/redshiftzero/subscriptions", "organizations_url": "https://api.github.com/users/redshiftzero/orgs", "repos_url": "https://api.github.com/users/redshiftzero/repos", "events_url": "https://api.github.com/users/redshiftzero/events{/privacy}", "received_events_url": "https://api.github.com/users/redshiftzero/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 68, "state": "closed", "created_at": "2017-06-06T01:31:16Z", "updated_at": "2018-03-16T21:24:40Z", "due_on": "2018-03-13T07:00:00Z", "closed_at": "2018-03-16T21:24:40Z"}, "comments": 10, "created_at": "2018-02-20T20:08:46Z", "updated_at": "2018-02-27T23:28:56Z", "closed_at": "2018-02-23T21:38:44Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/freedomofpress/securedrop/pulls/3038", "html_url": "https://github.com/freedomofpress/securedrop/pull/3038", "diff_url": "https://github.com/freedomofpress/securedrop/pull/3038.diff", "patch_url": "https://github.com/freedomofpress/securedrop/pull/3038.patch", "merged_at": "2018-02-23T21:38:44Z"}, "body": "## Status\r\n\r\nReady for review\r\n\r\n## Description of Changes\r\n\r\nFixes #3020.\r\nAppArmor profile now allows `/usr/sbin/apache2` to execute `/usr/bin/file`\r\n\r\nChanges proposed in this pull request:\r\n\r\n## Testing\r\n\r\n- set up prod environment (vms or physical)\r\n- `make build-debs`\r\n- `scp` and install `securedrop-app-code` package\r\n- observe no AppArmor denied messages in `/var/log/syslog` and no ossec email alerts full of apparmor denied messages.\r\n\r\n## Deployment\r\n\r\nNew and existing installs should be covered by the updated `securedrop-app-code` deb package\r\n\r\n## Checklist\r\n\r\n### If you made changes to the app code:\r\n\r\n- [ ] Unit and functional tests pass on the development VM\r\n\r\n### If you made changes to the system configuration:\r\n\r\n- [x] [Configuration tests](https://docs.securedrop.org/en/latest/development/testing_configuration_tests.html) pass\r\n\r\n### If you made changes to documentation:\r\n\r\n- [ ] Doc linting passed locally\r\n", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3038/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3038/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3030", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3030/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3030/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3030/events", "html_url": "https://github.com/freedomofpress/securedrop/issues/3030", "id": 298207395, "node_id": "MDU6SXNzdWUyOTgyMDczOTU=", "number": 3030, "title": "Caching / tagging of docker images in CI causes errant build failures", "user": {"login": "heartsucker", "id": 3998464, "node_id": "MDQ6VXNlcjM5OTg0NjQ=", "avatar_url": "https://avatars.githubusercontent.com/u/3998464?v=4", "gravatar_id": "", "url": "https://api.github.com/users/heartsucker", "html_url": "https://github.com/heartsucker", "followers_url": "https://api.github.com/users/heartsucker/followers", "following_url": "https://api.github.com/users/heartsucker/following{/other_user}", "gists_url": "https://api.github.com/users/heartsucker/gists{/gist_id}", "starred_url": "https://api.github.com/users/heartsucker/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/heartsucker/subscriptions", "organizations_url": "https://api.github.com/users/heartsucker/orgs", "repos_url": "https://api.github.com/users/heartsucker/repos", "events_url": "https://api.github.com/users/heartsucker/events{/privacy}", "received_events_url": "https://api.github.com/users/heartsucker/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}, {"id": 652907032, "node_id": "MDU6TGFiZWw2NTI5MDcwMzI=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/goals:%20sick%20CI", "name": "goals: sick CI", "color": "0e8a16", "default": false, "description": null}, {"id": 807692602, "node_id": "MDU6TGFiZWw4MDc2OTI2MDI=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/CI-specific%20bug", "name": "CI-specific bug", "color": "b60205", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2018-02-19T09:25:24Z", "updated_at": "2018-02-19T13:38:28Z", "closed_at": "2018-02-19T13:38:28Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "# Bug\r\n\r\n## Description\r\n\r\nAs noted in this comment from @kushaldas (https://github.com/freedomofpress/securedrop/pull/2948#issuecomment-366621315) and some chat in gitter, it seems like the caching of Docker images and using tags based off the SHA1 hashes of git commits is causing things to cache when they shouldn't.\r\n\r\n## Steps to Reproduce\r\n\r\nHonestly, I can't think of a guaranteed way to reproduce this. None of the builds for #2948 succeed in CI, but on multiple people's personal machines they succeed.\r\n\r\n## Expected Behavior\r\n\r\nCaching should invalidate correctly and rebuild images?\r\n\r\n## Actual Behavior\r\n\r\nIt does not?\r\n\r\n## Comments\r\n\r\nWe shouldn't use tags for the docker images. We should just use `latest` for everything and let docker handle the caching of layers itself. I would rather have some builds take longer than have the cache behave badly.", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3030/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3030/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3029", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3029/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3029/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3029/events", "html_url": "https://github.com/freedomofpress/securedrop/pull/3029", "id": 298071226, "node_id": "MDExOlB1bGxSZXF1ZXN0MTY5ODIyMTA2", "number": 3029, "title": "tails_printing_guide.rst: fix style issues", "user": {"login": "danishprakash", "id": 19834040, "node_id": "MDQ6VXNlcjE5ODM0MDQw", "avatar_url": "https://avatars.githubusercontent.com/u/19834040?v=4", "gravatar_id": "", "url": "https://api.github.com/users/danishprakash", "html_url": "https://github.com/danishprakash", "followers_url": "https://api.github.com/users/danishprakash/followers", "following_url": "https://api.github.com/users/danishprakash/following{/other_user}", "gists_url": "https://api.github.com/users/danishprakash/gists{/gist_id}", "starred_url": "https://api.github.com/users/danishprakash/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/danishprakash/subscriptions", "organizations_url": "https://api.github.com/users/danishprakash/orgs", "repos_url": "https://api.github.com/users/danishprakash/repos", "events_url": "https://api.github.com/users/danishprakash/events{/privacy}", "received_events_url": "https://api.github.com/users/danishprakash/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}, {"id": 118465787, "node_id": "MDU6TGFiZWwxMTg0NjU3ODc=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/docs", "name": "docs", "color": "d4c5f9", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2018-02-18T09:32:11Z", "updated_at": "2018-02-21T12:58:55Z", "closed_at": "2018-02-21T12:58:55Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/freedomofpress/securedrop/pulls/3029", "html_url": "https://github.com/freedomofpress/securedrop/pull/3029", "diff_url": "https://github.com/freedomofpress/securedrop/pull/3029.diff", "patch_url": "https://github.com/freedomofpress/securedrop/pull/3029.patch", "merged_at": "2018-02-21T12:58:55Z"}, "body": "## Status\r\n\r\nReady for review\r\n\r\n## Description of Changes\r\n\r\nRelated to #3013.\r\n\r\nStyling changes.\r\n\r\n## Checklist\r\n\r\n### If you made changes to documentation:\r\n\r\n- [x] Doc linting passed locally", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3029/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3029/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3027", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3027/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3027/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3027/events", "html_url": "https://github.com/freedomofpress/securedrop/pull/3027", "id": 298013179, "node_id": "MDExOlB1bGxSZXF1ZXN0MTY5Nzg4MjU1", "number": 3027, "title": "securedrop-admin: an empty config is {}, not None", "user": {"login": "ghost", "id": 10137, "node_id": "MDQ6VXNlcjEwMTM3", "avatar_url": "https://avatars.githubusercontent.com/u/10137?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ghost", "html_url": "https://github.com/ghost", "followers_url": "https://api.github.com/users/ghost/followers", "following_url": "https://api.github.com/users/ghost/following{/other_user}", "gists_url": "https://api.github.com/users/ghost/gists{/gist_id}", "starred_url": "https://api.github.com/users/ghost/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ghost/subscriptions", "organizations_url": "https://api.github.com/users/ghost/orgs", "repos_url": "https://api.github.com/users/ghost/repos", "events_url": "https://api.github.com/users/ghost/events{/privacy}", "received_events_url": "https://api.github.com/users/ghost/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}, {"id": 192539287, "node_id": "MDU6TGFiZWwxOTI1MzkyODc=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/ops/deployment", "name": "ops/deployment", "color": "c7def8", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/freedomofpress/securedrop/milestones/27", "html_url": "https://github.com/freedomofpress/securedrop/milestone/27", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/milestones/27/labels", "id": 2563515, "node_id": "MDk6TWlsZXN0b25lMjU2MzUxNQ==", "number": 27, "title": "0.6", "description": "End of day February 27: Feature freeze. From this point forward, only merge small fixes and stuff that touches testing.\r\n\r\nMarch 6 String freeze. \r\n(Release date to match Tails 3.6 release date in https://tails.boum.org/contribute/calendar/)", "creator": {"login": "redshiftzero", "id": 7832803, "node_id": "MDQ6VXNlcjc4MzI4MDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7832803?v=4", "gravatar_id": "", "url": "https://api.github.com/users/redshiftzero", "html_url": "https://github.com/redshiftzero", "followers_url": "https://api.github.com/users/redshiftzero/followers", "following_url": "https://api.github.com/users/redshiftzero/following{/other_user}", "gists_url": "https://api.github.com/users/redshiftzero/gists{/gist_id}", "starred_url": "https://api.github.com/users/redshiftzero/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/redshiftzero/subscriptions", "organizations_url": "https://api.github.com/users/redshiftzero/orgs", "repos_url": "https://api.github.com/users/redshiftzero/repos", "events_url": "https://api.github.com/users/redshiftzero/events{/privacy}", "received_events_url": "https://api.github.com/users/redshiftzero/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 68, "state": "closed", "created_at": "2017-06-06T01:31:16Z", "updated_at": "2018-03-16T21:24:40Z", "due_on": "2018-03-13T07:00:00Z", "closed_at": "2018-03-16T21:24:40Z"}, "comments": 3, "created_at": "2018-02-17T15:39:19Z", "updated_at": "2018-04-10T15:04:07Z", "closed_at": "2018-02-20T19:19:55Z", "author_association": "NONE", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/freedomofpress/securedrop/pulls/3027", "html_url": "https://github.com/freedomofpress/securedrop/pull/3027", "diff_url": "https://github.com/freedomofpress/securedrop/pull/3027.diff", "patch_url": "https://github.com/freedomofpress/securedrop/pull/3027.patch", "merged_at": "2018-02-20T19:19:55Z"}, "body": "## Status\r\n\r\nReady for review / Work in progress\r\n\r\n## Description of Changes\r\n\r\nAn empty config is {}, not None, otherwise it cannot be updated and will fail when starting\r\nfrom scratch when non site-specific file exists\r\n\r\n## Testing\r\n\r\nIn addition to the test added to ensure this regression stays fixed, one can manually test with\r\n\r\n* git clone https://github.com/freedomofpress/securedrop\r\n* cd securedrop/admin\r\n* ./securedrop-admin setup\r\n* ./securedrop-admin sdconfig\r\n\r\n## Deployment\r\n\r\nN/A\r\n\r\n## Checklist\r\n\r\n### If you made changes to the app code:\r\n\r\n- [x] Unit and functional tests pass on the development VM\r\n", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3027/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3027/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3025", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3025/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3025/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3025/events", "html_url": "https://github.com/freedomofpress/securedrop/pull/3025", "id": 297935928, "node_id": "MDExOlB1bGxSZXF1ZXN0MTY5NzM3OTc3", "number": 3025, "title": "tests: cleanup pyc and __pycache__", "user": {"login": "ghost", "id": 10137, "node_id": "MDQ6VXNlcjEwMTM3", "avatar_url": "https://avatars.githubusercontent.com/u/10137?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ghost", "html_url": "https://github.com/ghost", "followers_url": "https://api.github.com/users/ghost/followers", "following_url": "https://api.github.com/users/ghost/following{/other_user}", "gists_url": "https://api.github.com/users/ghost/gists{/gist_id}", "starred_url": "https://api.github.com/users/ghost/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ghost/subscriptions", "organizations_url": "https://api.github.com/users/ghost/orgs", "repos_url": "https://api.github.com/users/ghost/repos", "events_url": "https://api.github.com/users/ghost/events{/privacy}", "received_events_url": "https://api.github.com/users/ghost/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}, {"id": 475997849, "node_id": "MDU6TGFiZWw0NzU5OTc4NDk=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/tests", "name": "tests", "color": "f9d0c4", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2018-02-16T22:12:35Z", "updated_at": "2018-02-17T00:01:31Z", "closed_at": "2018-02-17T00:01:31Z", "author_association": "NONE", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/freedomofpress/securedrop/pulls/3025", "html_url": "https://github.com/freedomofpress/securedrop/pull/3025", "diff_url": "https://github.com/freedomofpress/securedrop/pull/3025.diff", "patch_url": "https://github.com/freedomofpress/securedrop/pull/3025.patch", "merged_at": "2018-02-17T00:01:31Z"}, "body": "## Status\r\n\r\nReady for review\r\n\r\n## Description of Changes\r\n\r\nFixes #3024\r\n\r\ncleanup pyc and __pycache__\r\n\r\n## Testing\r\n\r\n* vagrant ssh development\r\n* cd /vagrant/securedrop\r\n* pytest tests\r\n* exit vagrant\r\n* make -C securedrop test\r\n\r\n## Deployment\r\n\r\nN/A\r\n\r\n## Checklist\r\n\r\n### If you made changes to the app code:\r\n\r\n- [x] Unit and functional tests pass on the development VM\r\n", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3025/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3025/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3024", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3024/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3024/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3024/events", "html_url": "https://github.com/freedomofpress/securedrop/issues/3024", "id": 297920050, "node_id": "MDU6SXNzdWUyOTc5MjAwNTA=", "number": 3024, "title": "`make test` fails because of cached/compiled python files", "user": {"login": "heartsucker", "id": 3998464, "node_id": "MDQ6VXNlcjM5OTg0NjQ=", "avatar_url": "https://avatars.githubusercontent.com/u/3998464?v=4", "gravatar_id": "", "url": "https://api.github.com/users/heartsucker", "html_url": "https://github.com/heartsucker", "followers_url": "https://api.github.com/users/heartsucker/followers", "following_url": "https://api.github.com/users/heartsucker/following{/other_user}", "gists_url": "https://api.github.com/users/heartsucker/gists{/gist_id}", "starred_url": "https://api.github.com/users/heartsucker/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/heartsucker/subscriptions", "organizations_url": "https://api.github.com/users/heartsucker/orgs", "repos_url": "https://api.github.com/users/heartsucker/repos", "events_url": "https://api.github.com/users/heartsucker/events{/privacy}", "received_events_url": "https://api.github.com/users/heartsucker/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}, {"id": 475997849, "node_id": "MDU6TGFiZWw0NzU5OTc4NDk=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/tests", "name": "tests", "color": "f9d0c4", "default": false, "description": null}, {"id": 616447641, "node_id": "MDU6TGFiZWw2MTY0NDc2NDE=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/development%20env", "name": "development env", "color": "bfd4f2", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2018-02-16T21:06:53Z", "updated_at": "2018-02-17T00:01:31Z", "closed_at": "2018-02-17T00:01:31Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "# Bug\r\n\r\n## Description\r\n\r\n`make test` outputs:\r\n\r\n```\r\n__________________________________________________________ ERROR collecting test_secure_tempfile.py __________________________________________________________\r\nimport file mismatch:\r\nimported module 'tests.test_secure_tempfile' has this __file__ attribute:\r\n  /vagrant/securedrop/tests/test_secure_tempfile.py\r\nwhich is not the same as the test file we want to collect:\r\n  /home/heartsucker/code/freedomofpress/securedrop/securedrop/tests/test_secure_tempfile.py\r\nHINT: remove __pycache__ / .pyc files and/or use a unique basename for your test file modules\r\n```\r\n\r\n## Steps to Reproduce\r\n\r\nRun `make test` when there are compiled/cached python resources.\r\n\r\n## Expected Behavior\r\n\r\nThere should be no resources in the container that reference the host.\r\n\r\n## Actual Behavior\r\n\r\nCached resources with references to the host contaminate the container.\r\n\r\n## Comments\r\n\r\n`make test` should clean up resources before building the docker image.", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3024/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3024/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3021", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3021/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3021/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3021/events", "html_url": "https://github.com/freedomofpress/securedrop/pull/3021", "id": 297549197, "node_id": "MDExOlB1bGxSZXF1ZXN0MTY5NDQ5MzUx", "number": 3021, "title": "Replace instances of \"administrator(s)\" with \"admin(s)\" in docs", "user": {"login": "aydwi", "id": 29029116, "node_id": "MDQ6VXNlcjI5MDI5MTE2", "avatar_url": "https://avatars.githubusercontent.com/u/29029116?v=4", "gravatar_id": "", "url": "https://api.github.com/users/aydwi", "html_url": "https://github.com/aydwi", "followers_url": "https://api.github.com/users/aydwi/followers", "following_url": "https://api.github.com/users/aydwi/following{/other_user}", "gists_url": "https://api.github.com/users/aydwi/gists{/gist_id}", "starred_url": "https://api.github.com/users/aydwi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/aydwi/subscriptions", "organizations_url": "https://api.github.com/users/aydwi/orgs", "repos_url": "https://api.github.com/users/aydwi/repos", "events_url": "https://api.github.com/users/aydwi/events{/privacy}", "received_events_url": "https://api.github.com/users/aydwi/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}, {"id": 118465787, "node_id": "MDU6TGFiZWwxMTg0NjU3ODc=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/docs", "name": "docs", "color": "d4c5f9", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2018-02-15T18:27:10Z", "updated_at": "2018-02-16T00:08:03Z", "closed_at": "2018-02-16T00:04:33Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/freedomofpress/securedrop/pulls/3021", "html_url": "https://github.com/freedomofpress/securedrop/pull/3021", "diff_url": "https://github.com/freedomofpress/securedrop/pull/3021.diff", "patch_url": "https://github.com/freedomofpress/securedrop/pull/3021.patch", "merged_at": null}, "body": "## Status\r\n\r\nReady for review\r\n\r\n## Description of Changes\r\n\r\nAs proposed in #2332, this replaces instances of \"Administrator(s)/administrator(s)\" currently present in docs with \"Admin(s)/admin(s)\".\r\n\r\n## Checklist\r\n\r\n### If you made changes to documentation:\r\n\r\n- [x] Doc linting passed locally\r\n", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3021/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3021/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3020", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3020/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3020/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3020/events", "html_url": "https://github.com/freedomofpress/securedrop/issues/3020", "id": 297491653, "node_id": "MDU6SXNzdWUyOTc0OTE2NTM=", "number": 3020, "title": "AppArmor denied /usr/bin/file for apache2", "user": {"login": "emkll", "id": 15223328, "node_id": "MDQ6VXNlcjE1MjIzMzI4", "avatar_url": "https://avatars.githubusercontent.com/u/15223328?v=4", "gravatar_id": "", "url": "https://api.github.com/users/emkll", "html_url": "https://github.com/emkll", "followers_url": "https://api.github.com/users/emkll/followers", "following_url": "https://api.github.com/users/emkll/following{/other_user}", "gists_url": "https://api.github.com/users/emkll/gists{/gist_id}", "starred_url": "https://api.github.com/users/emkll/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/emkll/subscriptions", "organizations_url": "https://api.github.com/users/emkll/orgs", "repos_url": "https://api.github.com/users/emkll/repos", "events_url": "https://api.github.com/users/emkll/events{/privacy}", "received_events_url": "https://api.github.com/users/emkll/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}, {"id": 591701535, "node_id": "MDU6TGFiZWw1OTE3MDE1MzU=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/goals:%20reduce%20IDS%20noise", "name": "goals: reduce IDS noise", "color": "0e8a16", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "emkll", "id": 15223328, "node_id": "MDQ6VXNlcjE1MjIzMzI4", "avatar_url": "https://avatars.githubusercontent.com/u/15223328?v=4", "gravatar_id": "", "url": "https://api.github.com/users/emkll", "html_url": "https://github.com/emkll", "followers_url": "https://api.github.com/users/emkll/followers", "following_url": "https://api.github.com/users/emkll/following{/other_user}", "gists_url": "https://api.github.com/users/emkll/gists{/gist_id}", "starred_url": "https://api.github.com/users/emkll/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/emkll/subscriptions", "organizations_url": "https://api.github.com/users/emkll/orgs", "repos_url": "https://api.github.com/users/emkll/repos", "events_url": "https://api.github.com/users/emkll/events{/privacy}", "received_events_url": "https://api.github.com/users/emkll/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "emkll", "id": 15223328, "node_id": "MDQ6VXNlcjE1MjIzMzI4", "avatar_url": "https://avatars.githubusercontent.com/u/15223328?v=4", "gravatar_id": "", "url": "https://api.github.com/users/emkll", "html_url": "https://github.com/emkll", "followers_url": "https://api.github.com/users/emkll/followers", "following_url": "https://api.github.com/users/emkll/following{/other_user}", "gists_url": "https://api.github.com/users/emkll/gists{/gist_id}", "starred_url": "https://api.github.com/users/emkll/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/emkll/subscriptions", "organizations_url": "https://api.github.com/users/emkll/orgs", "repos_url": "https://api.github.com/users/emkll/repos", "events_url": "https://api.github.com/users/emkll/events{/privacy}", "received_events_url": "https://api.github.com/users/emkll/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/freedomofpress/securedrop/milestones/27", "html_url": "https://github.com/freedomofpress/securedrop/milestone/27", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/milestones/27/labels", "id": 2563515, "node_id": "MDk6TWlsZXN0b25lMjU2MzUxNQ==", "number": 27, "title": "0.6", "description": "End of day February 27: Feature freeze. From this point forward, only merge small fixes and stuff that touches testing.\r\n\r\nMarch 6 String freeze. \r\n(Release date to match Tails 3.6 release date in https://tails.boum.org/contribute/calendar/)", "creator": {"login": "redshiftzero", "id": 7832803, "node_id": "MDQ6VXNlcjc4MzI4MDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7832803?v=4", "gravatar_id": "", "url": "https://api.github.com/users/redshiftzero", "html_url": "https://github.com/redshiftzero", "followers_url": "https://api.github.com/users/redshiftzero/followers", "following_url": "https://api.github.com/users/redshiftzero/following{/other_user}", "gists_url": "https://api.github.com/users/redshiftzero/gists{/gist_id}", "starred_url": "https://api.github.com/users/redshiftzero/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/redshiftzero/subscriptions", "organizations_url": "https://api.github.com/users/redshiftzero/orgs", "repos_url": "https://api.github.com/users/redshiftzero/repos", "events_url": "https://api.github.com/users/redshiftzero/events{/privacy}", "received_events_url": "https://api.github.com/users/redshiftzero/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 68, "state": "closed", "created_at": "2017-06-06T01:31:16Z", "updated_at": "2018-03-16T21:24:40Z", "due_on": "2018-03-13T07:00:00Z", "closed_at": "2018-03-16T21:24:40Z"}, "comments": 0, "created_at": "2018-02-15T15:40:56Z", "updated_at": "2018-02-23T21:38:44Z", "closed_at": "2018-02-23T21:38:44Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "# Bug\r\n\r\n## Description\r\n\r\n```\r\n\r\n\r\nOSSEC HIDS Notification.\r\n2018 Feb 14 05:11:43\r\n\r\nReceived From: (app) 10.20.2.2->/var/log/syslog\r\nRule: 100012 fired (level 7) -> \"Apparmor denied event\"\r\nPortion of the log(s):\r\n\r\nFeb 14 05:11:42 app kernel: [ 2122.691210] audit: type=1400 audit(1518585102.440:46): apparmor=\"DENIED\" operation=\"exec\" profile=\"/usr/sbin/apache2\" name=\"/usr/bin/file\" pid=2693 comm=\"apache2\" requested_mask=\"x\" denied_mask=\"x\" fsuid=33 ouid=0\r\n\r\n\r\n\r\n --END OF NOTIFICATION\r\n```\r\n## Steps to Reproduce\r\n\r\n- Open ossec alert emails with title `OSSEC Notification - (app) - Alert level 7`\r\n- Observe a large amount of errors pasted above\r\n\r\n## Expected Behavior\r\n\r\nAppArmor rules should not alert on nominal apache2 behavior\r\n\r\n## Actual Behavior\r\n\r\nAppArmor and in turn ossec alert on what appears to be nominal webserver behavior\r\n", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3020/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3020/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3017", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3017/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3017/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3017/events", "html_url": "https://github.com/freedomofpress/securedrop/pull/3017", "id": 297169200, "node_id": "MDExOlB1bGxSZXF1ZXN0MTY5MTY0NzE0", "number": 3017, "title": "Update create_admin_account.rst", "user": {"login": "vaibssingh", "id": 21953977, "node_id": "MDQ6VXNlcjIxOTUzOTc3", "avatar_url": "https://avatars.githubusercontent.com/u/21953977?v=4", "gravatar_id": "", "url": "https://api.github.com/users/vaibssingh", "html_url": "https://github.com/vaibssingh", "followers_url": "https://api.github.com/users/vaibssingh/followers", "following_url": "https://api.github.com/users/vaibssingh/following{/other_user}", "gists_url": "https://api.github.com/users/vaibssingh/gists{/gist_id}", "starred_url": "https://api.github.com/users/vaibssingh/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/vaibssingh/subscriptions", "organizations_url": "https://api.github.com/users/vaibssingh/orgs", "repos_url": "https://api.github.com/users/vaibssingh/repos", "events_url": "https://api.github.com/users/vaibssingh/events{/privacy}", "received_events_url": "https://api.github.com/users/vaibssingh/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}, {"id": 118465787, "node_id": "MDU6TGFiZWwxMTg0NjU3ODc=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/docs", "name": "docs", "color": "d4c5f9", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 8, "created_at": "2018-02-14T16:53:08Z", "updated_at": "2018-02-22T01:48:01Z", "closed_at": "2018-02-22T01:48:01Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/freedomofpress/securedrop/pulls/3017", "html_url": "https://github.com/freedomofpress/securedrop/pull/3017", "diff_url": "https://github.com/freedomofpress/securedrop/pull/3017.diff", "patch_url": "https://github.com/freedomofpress/securedrop/pull/3017.patch", "merged_at": "2018-02-22T01:48:01Z"}, "body": "## Status\r\n\r\nReady for review\r\n\r\n## Description of Changes\r\n\r\nFixes #3015 \r\n\r\nItalicized *Journalist Interface*'s\r\n\r\n## Checklist\r\n\r\n### If you made changes to documentation:\r\n\r\n- [x] Doc linting passed locally\r\n", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3017/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3017/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3016", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3016/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3016/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3016/events", "html_url": "https://github.com/freedomofpress/securedrop/pull/3016", "id": 297165604, "node_id": "MDExOlB1bGxSZXF1ZXN0MTY5MTYyMDE3", "number": 3016, "title": "Update documentation_guidelines.rst", "user": {"login": "vaibssingh", "id": 21953977, "node_id": "MDQ6VXNlcjIxOTUzOTc3", "avatar_url": "https://avatars.githubusercontent.com/u/21953977?v=4", "gravatar_id": "", "url": "https://api.github.com/users/vaibssingh", "html_url": "https://github.com/vaibssingh", "followers_url": "https://api.github.com/users/vaibssingh/followers", "following_url": "https://api.github.com/users/vaibssingh/following{/other_user}", "gists_url": "https://api.github.com/users/vaibssingh/gists{/gist_id}", "starred_url": "https://api.github.com/users/vaibssingh/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/vaibssingh/subscriptions", "organizations_url": "https://api.github.com/users/vaibssingh/orgs", "repos_url": "https://api.github.com/users/vaibssingh/repos", "events_url": "https://api.github.com/users/vaibssingh/events{/privacy}", "received_events_url": "https://api.github.com/users/vaibssingh/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}, {"id": 118465787, "node_id": "MDU6TGFiZWwxMTg0NjU3ODc=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/docs", "name": "docs", "color": "d4c5f9", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2018-02-14T16:43:03Z", "updated_at": "2018-02-14T21:43:12Z", "closed_at": "2018-02-14T21:43:12Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/freedomofpress/securedrop/pulls/3016", "html_url": "https://github.com/freedomofpress/securedrop/pull/3016", "diff_url": "https://github.com/freedomofpress/securedrop/pull/3016.diff", "patch_url": "https://github.com/freedomofpress/securedrop/pull/3016.patch", "merged_at": "2018-02-14T21:43:12Z"}, "body": "Fixes #3003 \r\n\r\n## Status\r\n\r\nReady for review / Work in progress\r\n\r\n## Description of Changes\r\n\r\nFixes #3003 \r\n\r\nChanges proposed in this pull request:\r\n\r\n## Testing\r\n\r\nHow should the reviewer test this PR?\r\nWrite out any special testing steps here.\r\n\r\n## Deployment\r\n\r\nAny special considerations for deployment? Consider both:\r\n\r\n1. Upgrading existing production instances.\r\n2. New installs.\r\n\r\n## Checklist\r\n\r\n### If you made changes to the app code:\r\n\r\n- [ ] Unit and functional tests pass on the development VM\r\n\r\n### If you made changes to the system configuration:\r\n\r\n- [ ] [Configuration tests](https://docs.securedrop.org/en/latest/development/testing_configuration_tests.html) pass\r\n\r\n### If you made changes to documentation:\r\n\r\n- [x] Doc linting passed locally\r\n", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3016/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3016/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3010", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3010/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3010/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3010/events", "html_url": "https://github.com/freedomofpress/securedrop/pull/3010", "id": 296988048, "node_id": "MDExOlB1bGxSZXF1ZXN0MTY5MDMwNDU2", "number": 3010, "title": "docs: s/each image in the web/each page in the web/", "user": {"login": "kaustav1996", "id": 21956467, "node_id": "MDQ6VXNlcjIxOTU2NDY3", "avatar_url": "https://avatars.githubusercontent.com/u/21956467?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kaustav1996", "html_url": "https://github.com/kaustav1996", "followers_url": "https://api.github.com/users/kaustav1996/followers", "following_url": "https://api.github.com/users/kaustav1996/following{/other_user}", "gists_url": "https://api.github.com/users/kaustav1996/gists{/gist_id}", "starred_url": "https://api.github.com/users/kaustav1996/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kaustav1996/subscriptions", "organizations_url": "https://api.github.com/users/kaustav1996/orgs", "repos_url": "https://api.github.com/users/kaustav1996/repos", "events_url": "https://api.github.com/users/kaustav1996/events{/privacy}", "received_events_url": "https://api.github.com/users/kaustav1996/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}, {"id": 118465787, "node_id": "MDU6TGFiZWwxMTg0NjU3ODc=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/docs", "name": "docs", "color": "d4c5f9", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2018-02-14T06:19:01Z", "updated_at": "2018-02-16T22:38:45Z", "closed_at": "2018-02-16T22:38:41Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/freedomofpress/securedrop/pulls/3010", "html_url": "https://github.com/freedomofpress/securedrop/pull/3010", "diff_url": "https://github.com/freedomofpress/securedrop/pull/3010.diff", "patch_url": "https://github.com/freedomofpress/securedrop/pull/3010.patch", "merged_at": "2018-02-16T22:38:41Z"}, "body": "Updated according to issue #3004", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3010/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3010/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3009", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3009/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3009/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3009/events", "html_url": "https://github.com/freedomofpress/securedrop/pull/3009", "id": 296987499, "node_id": "MDExOlB1bGxSZXF1ZXN0MTY5MDMwMDQw", "number": 3009, "title": "docs: App Server must be in italics", "user": {"login": "kaustav1996", "id": 21956467, "node_id": "MDQ6VXNlcjIxOTU2NDY3", "avatar_url": "https://avatars.githubusercontent.com/u/21956467?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kaustav1996", "html_url": "https://github.com/kaustav1996", "followers_url": "https://api.github.com/users/kaustav1996/followers", "following_url": "https://api.github.com/users/kaustav1996/following{/other_user}", "gists_url": "https://api.github.com/users/kaustav1996/gists{/gist_id}", "starred_url": "https://api.github.com/users/kaustav1996/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kaustav1996/subscriptions", "organizations_url": "https://api.github.com/users/kaustav1996/orgs", "repos_url": "https://api.github.com/users/kaustav1996/repos", "events_url": "https://api.github.com/users/kaustav1996/events{/privacy}", "received_events_url": "https://api.github.com/users/kaustav1996/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}, {"id": 118465787, "node_id": "MDU6TGFiZWwxMTg0NjU3ODc=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/docs", "name": "docs", "color": "d4c5f9", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2018-02-14T06:15:29Z", "updated_at": "2018-02-14T23:29:37Z", "closed_at": "2018-02-14T23:29:37Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/freedomofpress/securedrop/pulls/3009", "html_url": "https://github.com/freedomofpress/securedrop/pull/3009", "diff_url": "https://github.com/freedomofpress/securedrop/pull/3009.diff", "patch_url": "https://github.com/freedomofpress/securedrop/pull/3009.patch", "merged_at": "2018-02-14T23:29:36Z"}, "body": "## Status\r\n\r\nFixes: #3005 \r\n## Description of Changes\r\nchanged app server to *Application Server*", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3009/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/3009/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2998", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2998/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2998/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2998/events", "html_url": "https://github.com/freedomofpress/securedrop/pull/2998", "id": 296203578, "node_id": "MDExOlB1bGxSZXF1ZXN0MTY4NDYxNDgw", "number": 2998, "title": "securedrop-admin: user defined site-config variables must be preserved", "user": {"login": "ghost", "id": 10137, "node_id": "MDQ6VXNlcjEwMTM3", "avatar_url": "https://avatars.githubusercontent.com/u/10137?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ghost", "html_url": "https://github.com/ghost", "followers_url": "https://api.github.com/users/ghost/followers", "following_url": "https://api.github.com/users/ghost/following{/other_user}", "gists_url": "https://api.github.com/users/ghost/gists{/gist_id}", "starred_url": "https://api.github.com/users/ghost/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ghost/subscriptions", "organizations_url": "https://api.github.com/users/ghost/orgs", "repos_url": "https://api.github.com/users/ghost/repos", "events_url": "https://api.github.com/users/ghost/events{/privacy}", "received_events_url": "https://api.github.com/users/ghost/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}, {"id": 192539287, "node_id": "MDU6TGFiZWwxOTI1MzkyODc=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/ops/deployment", "name": "ops/deployment", "color": "c7def8", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/freedomofpress/securedrop/milestones/27", "html_url": "https://github.com/freedomofpress/securedrop/milestone/27", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/milestones/27/labels", "id": 2563515, "node_id": "MDk6TWlsZXN0b25lMjU2MzUxNQ==", "number": 27, "title": "0.6", "description": "End of day February 27: Feature freeze. From this point forward, only merge small fixes and stuff that touches testing.\r\n\r\nMarch 6 String freeze. \r\n(Release date to match Tails 3.6 release date in https://tails.boum.org/contribute/calendar/)", "creator": {"login": "redshiftzero", "id": 7832803, "node_id": "MDQ6VXNlcjc4MzI4MDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7832803?v=4", "gravatar_id": "", "url": "https://api.github.com/users/redshiftzero", "html_url": "https://github.com/redshiftzero", "followers_url": "https://api.github.com/users/redshiftzero/followers", "following_url": "https://api.github.com/users/redshiftzero/following{/other_user}", "gists_url": "https://api.github.com/users/redshiftzero/gists{/gist_id}", "starred_url": "https://api.github.com/users/redshiftzero/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/redshiftzero/subscriptions", "organizations_url": "https://api.github.com/users/redshiftzero/orgs", "repos_url": "https://api.github.com/users/redshiftzero/repos", "events_url": "https://api.github.com/users/redshiftzero/events{/privacy}", "received_events_url": "https://api.github.com/users/redshiftzero/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 68, "state": "closed", "created_at": "2017-06-06T01:31:16Z", "updated_at": "2018-03-16T21:24:40Z", "due_on": "2018-03-13T07:00:00Z", "closed_at": "2018-03-16T21:24:40Z"}, "comments": 1, "created_at": "2018-02-11T16:35:35Z", "updated_at": "2018-04-10T15:04:10Z", "closed_at": "2018-02-12T17:24:22Z", "author_association": "NONE", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/freedomofpress/securedrop/pulls/2998", "html_url": "https://github.com/freedomofpress/securedrop/pull/2998", "diff_url": "https://github.com/freedomofpress/securedrop/pull/2998.diff", "patch_url": "https://github.com/freedomofpress/securedrop/pull/2998.patch", "merged_at": "2018-02-12T17:24:21Z"}, "body": "## Status\r\n\r\nReady for review\r\n\r\n## Description of Changes\r\n\r\nFixes #2955\r\n\r\n## Testing\r\n\r\n* edit `/install_files/ansible-base/group-vars/all/site-specific` and add another value\r\n* run ./securedrop-admin sdconfig\r\n* open `/install_files/ansible-base/group-vars/all/site-specific` and observe your value is still present\r\n\r\n## Deployment\r\n\r\nN/A\r\n\r\n## Checklist\r\n\r\n### If you made changes to the app code:\r\n\r\n- [x] Unit and functional tests pass on the development VM\r\n", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2998/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2998/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2997", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2997/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2997/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2997/events", "html_url": "https://github.com/freedomofpress/securedrop/pull/2997", "id": 296201673, "node_id": "MDExOlB1bGxSZXF1ZXN0MTY4NDYwMzg2", "number": 2997, "title": "i18n: en is not a valid locale, only en_US is", "user": {"login": "ghost", "id": 10137, "node_id": "MDQ6VXNlcjEwMTM3", "avatar_url": "https://avatars.githubusercontent.com/u/10137?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ghost", "html_url": "https://github.com/ghost", "followers_url": "https://api.github.com/users/ghost/followers", "following_url": "https://api.github.com/users/ghost/following{/other_user}", "gists_url": "https://api.github.com/users/ghost/gists{/gist_id}", "starred_url": "https://api.github.com/users/ghost/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ghost/subscriptions", "organizations_url": "https://api.github.com/users/ghost/orgs", "repos_url": "https://api.github.com/users/ghost/repos", "events_url": "https://api.github.com/users/ghost/events{/privacy}", "received_events_url": "https://api.github.com/users/ghost/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}, {"id": 192539287, "node_id": "MDU6TGFiZWwxOTI1MzkyODc=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/ops/deployment", "name": "ops/deployment", "color": "c7def8", "default": false, "description": null}, {"id": 652906953, "node_id": "MDU6TGFiZWw2NTI5MDY5NTM=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/i18n", "name": "i18n", "color": "d4c5f9", "default": false, "description": "Anything related to translation or internationalization of SecureDrop"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2018-02-11T16:11:40Z", "updated_at": "2018-04-10T15:04:10Z", "closed_at": "2018-02-12T16:30:13Z", "author_association": "NONE", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/freedomofpress/securedrop/pulls/2997", "html_url": "https://github.com/freedomofpress/securedrop/pull/2997", "diff_url": "https://github.com/freedomofpress/securedrop/pull/2997.diff", "patch_url": "https://github.com/freedomofpress/securedrop/pull/2997.patch", "merged_at": "2018-02-12T16:30:13Z"}, "body": "## Status\r\n\r\nReady for review\r\n\r\n## Description of Changes\r\n\r\nFixes #2983\r\n\r\nen is not a valid locale, only en_US is\r\n\r\n## Testing\r\n\r\n* ./securedrop-admin sdconfig\r\n* try to enter **en** in the list of supported locale\r\n* verify **en** triggers an error\r\n\r\n## Deployment\r\n\r\nWe are in no risk of having a SecureDrop deployment running with the faulty **en** locale because it crashes the server.\r\n\r\n## Checklist\r\n\r\n### If you made changes to the app code:\r\n\r\n- [x] Unit and functional tests pass on the development VM\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2997/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2997/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2996", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2996/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2996/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2996/events", "html_url": "https://github.com/freedomofpress/securedrop/pull/2996", "id": 296197454, "node_id": "MDExOlB1bGxSZXF1ZXN0MTY4NDU3ODk4", "number": 2996, "title": "tests: staging tests must be run as root", "user": {"login": "ghost", "id": 10137, "node_id": "MDQ6VXNlcjEwMTM3", "avatar_url": "https://avatars.githubusercontent.com/u/10137?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ghost", "html_url": "https://github.com/ghost", "followers_url": "https://api.github.com/users/ghost/followers", "following_url": "https://api.github.com/users/ghost/following{/other_user}", "gists_url": "https://api.github.com/users/ghost/gists{/gist_id}", "starred_url": "https://api.github.com/users/ghost/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ghost/subscriptions", "organizations_url": "https://api.github.com/users/ghost/orgs", "repos_url": "https://api.github.com/users/ghost/repos", "events_url": "https://api.github.com/users/ghost/events{/privacy}", "received_events_url": "https://api.github.com/users/ghost/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}, {"id": 118465787, "node_id": "MDU6TGFiZWwxMTg0NjU3ODc=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/docs", "name": "docs", "color": "d4c5f9", "default": false, "description": null}, {"id": 475997849, "node_id": "MDU6TGFiZWw0NzU5OTc4NDk=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/tests", "name": "tests", "color": "f9d0c4", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2018-02-11T15:17:50Z", "updated_at": "2018-02-14T19:53:07Z", "closed_at": "2018-02-14T19:53:01Z", "author_association": "NONE", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/freedomofpress/securedrop/pulls/2996", "html_url": "https://github.com/freedomofpress/securedrop/pull/2996", "diff_url": "https://github.com/freedomofpress/securedrop/pull/2996.diff", "patch_url": "https://github.com/freedomofpress/securedrop/pull/2996.patch", "merged_at": "2018-02-14T19:53:01Z"}, "body": "## Status\r\n\r\nReady for review / Work in progress\r\n\r\n## Description of Changes\r\n\r\nFixes #2980\r\n\r\nstaging tests must be run as root because iptables restricts what www-data can do, including\r\nconnecting to arbitrary TCP port and therefore successfully running\r\nfirefox and the selenium driver.\r\n\r\n## Testing\r\n\r\n* Run the modified instructions\r\n\r\n## Deployment\r\n\r\nN/A\r\n\r\n## Checklist\r\n\r\n### If you made changes to documentation:\r\n\r\n- [x] Doc linting passed locally\r\n", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2996/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2996/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2995", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2995/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2995/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2995/events", "html_url": "https://github.com/freedomofpress/securedrop/pull/2995", "id": 296191235, "node_id": "MDExOlB1bGxSZXF1ZXN0MTY4NDU0MjEz", "number": 2995, "title": "Instruction to change tor browser security slider updated", "user": {"login": "Anonymous26", "id": 20697219, "node_id": "MDQ6VXNlcjIwNjk3MjE5", "avatar_url": "https://avatars.githubusercontent.com/u/20697219?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Anonymous26", "html_url": "https://github.com/Anonymous26", "followers_url": "https://api.github.com/users/Anonymous26/followers", "following_url": "https://api.github.com/users/Anonymous26/following{/other_user}", "gists_url": "https://api.github.com/users/Anonymous26/gists{/gist_id}", "starred_url": "https://api.github.com/users/Anonymous26/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Anonymous26/subscriptions", "organizations_url": "https://api.github.com/users/Anonymous26/orgs", "repos_url": "https://api.github.com/users/Anonymous26/repos", "events_url": "https://api.github.com/users/Anonymous26/events{/privacy}", "received_events_url": "https://api.github.com/users/Anonymous26/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}, {"id": 118465787, "node_id": "MDU6TGFiZWwxMTg0NjU3ODc=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/docs", "name": "docs", "color": "d4c5f9", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 10, "created_at": "2018-02-11T13:45:33Z", "updated_at": "2018-03-01T16:49:55Z", "closed_at": "2018-03-01T16:49:55Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/freedomofpress/securedrop/pulls/2995", "html_url": "https://github.com/freedomofpress/securedrop/pull/2995", "diff_url": "https://github.com/freedomofpress/securedrop/pull/2995.diff", "patch_url": "https://github.com/freedomofpress/securedrop/pull/2995.patch", "merged_at": "2018-03-01T16:49:55Z"}, "body": "## Status\r\n\r\nReady for review \r\n\r\n## Description of Changes\r\n\r\nFixes #2962 \r\n\r\nChanges proposed in this pull request: Updated the instructions to change the security in tor browser\r\n\r\n## Testing\r\n\r\nHow should the reviewer test this PR?\r\nWrite out any special testing steps here.\r\n\r\n## Deployment\r\n\r\nAny special considerations for deployment? Consider both:\r\n\r\n1. Upgrading existing production instances.\r\n2. New installs.\r\n\r\n## Checklist\r\n\r\n### If you made changes to the app code:\r\n\r\n- [x] Unit and functional tests pass on the development VM\r\n\r\n### If you made changes to the system configuration:\r\n\r\n- [ ] [Configuration tests](https://docs.securedrop.org/en/latest/development/testing_configuration_tests.html) pass\r\n\r\n### If you made changes to documentation:\r\n\r\n- [x] Doc linting passed locally\r\n", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2995/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2995/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2991", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2991/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2991/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2991/events", "html_url": "https://github.com/freedomofpress/securedrop/pull/2991", "id": 296080456, "node_id": "MDExOlB1bGxSZXF1ZXN0MTY4MzkwMjAz", "number": 2991, "title": "Small fixes in docs. Addresses issues #2910 and #2912", "user": {"login": "aydwi", "id": 29029116, "node_id": "MDQ6VXNlcjI5MDI5MTE2", "avatar_url": "https://avatars.githubusercontent.com/u/29029116?v=4", "gravatar_id": "", "url": "https://api.github.com/users/aydwi", "html_url": "https://github.com/aydwi", "followers_url": "https://api.github.com/users/aydwi/followers", "following_url": "https://api.github.com/users/aydwi/following{/other_user}", "gists_url": "https://api.github.com/users/aydwi/gists{/gist_id}", "starred_url": "https://api.github.com/users/aydwi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/aydwi/subscriptions", "organizations_url": "https://api.github.com/users/aydwi/orgs", "repos_url": "https://api.github.com/users/aydwi/repos", "events_url": "https://api.github.com/users/aydwi/events{/privacy}", "received_events_url": "https://api.github.com/users/aydwi/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}, {"id": 118465787, "node_id": "MDU6TGFiZWwxMTg0NjU3ODc=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/docs", "name": "docs", "color": "d4c5f9", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2018-02-10T07:09:09Z", "updated_at": "2018-02-12T21:10:24Z", "closed_at": "2018-02-10T09:51:21Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/freedomofpress/securedrop/pulls/2991", "html_url": "https://github.com/freedomofpress/securedrop/pull/2991", "diff_url": "https://github.com/freedomofpress/securedrop/pull/2991.diff", "patch_url": "https://github.com/freedomofpress/securedrop/pull/2991.patch", "merged_at": "2018-02-10T09:51:21Z"}, "body": "## Status\r\n\r\nReady for review\r\n\r\n## Description of Changes\r\n\r\nMinor fixes in the documentation. Fixes issues [#2910](https://github.com/freedomofpress/securedrop/issues/2910) and [#2912](https://github.com/freedomofpress/securedrop/issues/2912), and removes an unnecessary word from `docs/overview.rst`.\r\n\r\n## Checklist\r\n\r\n### If you made changes to documentation:\r\n\r\n- [x] Doc linting passed locally\r\n", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2991/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2991/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2988", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2988/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2988/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2988/events", "html_url": "https://github.com/freedomofpress/securedrop/pull/2988", "id": 295972516, "node_id": "MDExOlB1bGxSZXF1ZXN0MTY4MzEzOTQw", "number": 2988, "title": "source: genkey runs in a thread and must have its own session", "user": {"login": "ghost", "id": 10137, "node_id": "MDQ6VXNlcjEwMTM3", "avatar_url": "https://avatars.githubusercontent.com/u/10137?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ghost", "html_url": "https://github.com/ghost", "followers_url": "https://api.github.com/users/ghost/followers", "following_url": "https://api.github.com/users/ghost/following{/other_user}", "gists_url": "https://api.github.com/users/ghost/gists{/gist_id}", "starred_url": "https://api.github.com/users/ghost/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ghost/subscriptions", "organizations_url": "https://api.github.com/users/ghost/orgs", "repos_url": "https://api.github.com/users/ghost/repos", "events_url": "https://api.github.com/users/ghost/events{/privacy}", "received_events_url": "https://api.github.com/users/ghost/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}, {"id": 192539755, "node_id": "MDU6TGFiZWwxOTI1Mzk3NTU=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/app", "name": "app", "color": "bfe5bf", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 10, "created_at": "2018-02-09T18:44:49Z", "updated_at": "2018-02-27T23:55:16Z", "closed_at": "2018-02-14T19:54:09Z", "author_association": "NONE", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/freedomofpress/securedrop/pulls/2988", "html_url": "https://github.com/freedomofpress/securedrop/pull/2988", "diff_url": "https://github.com/freedomofpress/securedrop/pull/2988.diff", "patch_url": "https://github.com/freedomofpress/securedrop/pull/2988.patch", "merged_at": "2018-02-14T19:54:09Z"}, "body": "## Status\r\n\r\nReady for review\r\n\r\n## Description of Changes\r\n\r\nFixes #2978 \r\n\r\nThe session available from Source.query belongs to the main thread\r\nand is bound to a Flask app context. However, since async_genkey runs\r\nin a separate thread, it is entirely possible that there is no active\r\napp context when it tries to access the session and it will fail with\r\nan error like:\r\n\r\n    No application found. Either work inside a view function or\r\n    push an application context.\r\n    See http://flask-sqlalchemy.pocoo.org/contexts/\r\n\r\nIn addition the query from the thread races against the queries from\r\nthe main thread and it may lead to failure or corruption.\r\n\r\nSince there is no need for async_genkey to work in an app_context, we\r\ncreate a new engine and a new session for the duration of the thread.\r\nWriting to SQLite from multiple processes or threads is protected by\r\nlocks (http://www.sqlite.org/wal.html)\r\n\r\n## Testing\r\n\r\nThe modified code is extensively used in the integration tests.\r\n\r\n## Deployment\r\n\r\nN/A\r\n\r\n## Checklist\r\n\r\n### If you made changes to the app code:\r\n\r\n- [x] Unit and functional tests pass on the development VM\r\n", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2988/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2988/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2983", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2983/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2983/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2983/events", "html_url": "https://github.com/freedomofpress/securedrop/issues/2983", "id": 295712062, "node_id": "MDU6SXNzdWUyOTU3MTIwNjI=", "number": 2983, "title": "Error 500 on app startup when language `en` is in `securedrop_supported_locales`", "user": {"login": "emkll", "id": 15223328, "node_id": "MDQ6VXNlcjE1MjIzMzI4", "avatar_url": "https://avatars.githubusercontent.com/u/15223328?v=4", "gravatar_id": "", "url": "https://api.github.com/users/emkll", "html_url": "https://github.com/emkll", "followers_url": "https://api.github.com/users/emkll/followers", "following_url": "https://api.github.com/users/emkll/following{/other_user}", "gists_url": "https://api.github.com/users/emkll/gists{/gist_id}", "starred_url": "https://api.github.com/users/emkll/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/emkll/subscriptions", "organizations_url": "https://api.github.com/users/emkll/orgs", "repos_url": "https://api.github.com/users/emkll/repos", "events_url": "https://api.github.com/users/emkll/events{/privacy}", "received_events_url": "https://api.github.com/users/emkll/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}, {"id": 652906953, "node_id": "MDU6TGFiZWw2NTI5MDY5NTM=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/i18n", "name": "i18n", "color": "d4c5f9", "default": false, "description": "Anything related to translation or internationalization of SecureDrop"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2018-02-09T00:16:15Z", "updated_at": "2018-07-29T09:54:23Z", "closed_at": "2018-02-12T16:30:13Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "# Bug\r\n\r\n## Description\r\nUsing `en` in `securedrop_supported_locales` results in app unable to startup.\r\nValidation logic in both in `develop` (new sdconfig) and in `0.5.2` allow a user to specify `en`\r\n## Steps to Reproduce\r\n\r\n- `vagrant up /prod/ --no-provision`\r\n- in tails, `securedrop_supported_locales` in `install_files/ansible-base/group-vars/all/site-specific`should contain `en` and `fr_FR` \r\n- `securedrop-admin install`\r\n\r\n## Expected Behavior\r\nOnce the installation completes, Source and Journalist interface web interface starts and responds to web requests. \r\n## Actual Behavior\r\nInstallation completes successfully, but when attempting to connect to source or journalist interface results in an Internal Server Error:\r\nfrom `/var/log/apache2/journalist-error.log`\r\n```\r\n[Fri Feb 09 00:14:53.874744 2018] [:error] [pid 1437:tid 2929872570112] [remote 127.0.0.1:48940] LocaleNotFound: config.py SUPPORTED_LOCALES contains [u'en'] which is not among the locales found in the /var/www/securedrop/translations directory: ['en_US', 'nb_NO', 'pt_BR', 'es_ES', 'nl', 'zh_Hant', 'it_IT', 'tr', 'fr_FR', 'ar', 'de_DE', 'nb_NO', 'pt_BR', 'es_ES', 'nl', 'zh_Hant', 'it_IT', 'tr', 'fr_FR', 'ar', 'de_DE', 'nb_NO', 'pt_BR', 'es_ES', 'nl', 'zh_Hant', 'it_IT', 'tr', 'fr_FR', 'ar', 'de_DE', 'nb_NO', 'pt_BR', 'es_ES', 'nl', 'zh_Hant', 'it_IT', 'tr', 'fr_FR', 'ar', 'de_DE', 'nb_NO', 'pt_BR', 'es_ES', 'nl', 'zh_Hant', 'it_IT', 'tr', 'fr_FR', 'ar', 'de_DE', 'nb_NO', 'pt_BR', 'es_ES', 'nl', 'zh_Hant', 'it_IT', 'tr', 'fr_FR', 'ar', 'de_DE', 'nb_NO', 'pt_BR', 'es_ES', 'nl', 'zh_Hant', 'it_IT', 'tr', 'fr_FR', 'ar', 'de_DE', 'nb_NO', 'pt_BR', 'es_ES', 'nl', 'zh_Hant', 'it_IT', 'tr', 'fr_FR', 'ar', 'de_DE', 'nb_NO', 'pt_BR', 'es_ES', 'nl', 'zh_Hant', 'it_IT', 'tr', 'fr_FR', 'ar', 'de_DE', 'nb_NO', 'pt_BR', 'es_ES', 'nl', 'zh_Hant', 'it_IT', 'tr', 'fr_FR', 'ar', 'de_DE', 'nb_NO', 'pt_BR', 'es_ES', 'nl', 'zh_Hant', 'it_IT', 'tr', 'fr_FR', 'ar', 'de_DE', 'nb_NO', 'pt_BR', 'es_ES', 'nl', 'zh_Hant', 'it_IT', 'tr', 'fr_FR', 'ar', 'de_DE', 'nb_NO', 'pt_BR', 'es_ES', 'nl', 'zh_Hant', 'it_IT', 'tr', 'fr_FR', 'ar', 'de_DE']\r\n[Fri Feb 09 00:14:53.874821 2018] [core:error] [pid 1441:tid 2929804687104] [client 127.0.0.1:48470] AH00124: Request exceeded the limit of 10 internal redirects due to probable configuration error. Use 'LimitInternalRecursion' to increase the limit if necessary. Use 'LogLevel debug' to get a backtrace.\r\n```\r\n", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2983/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2983/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2980", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2980/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2980/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2980/events", "html_url": "https://github.com/freedomofpress/securedrop/issues/2980", "id": 295182144, "node_id": "MDU6SXNzdWUyOTUxODIxNDQ=", "number": 2980, "title": "Application integration tests fail in local staging environment", "user": {"login": "emkll", "id": 15223328, "node_id": "MDQ6VXNlcjE1MjIzMzI4", "avatar_url": "https://avatars.githubusercontent.com/u/15223328?v=4", "gravatar_id": "", "url": "https://api.github.com/users/emkll", "html_url": "https://github.com/emkll", "followers_url": "https://api.github.com/users/emkll/followers", "following_url": "https://api.github.com/users/emkll/following{/other_user}", "gists_url": "https://api.github.com/users/emkll/gists{/gist_id}", "starred_url": "https://api.github.com/users/emkll/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/emkll/subscriptions", "organizations_url": "https://api.github.com/users/emkll/orgs", "repos_url": "https://api.github.com/users/emkll/repos", "events_url": "https://api.github.com/users/emkll/events{/privacy}", "received_events_url": "https://api.github.com/users/emkll/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}, {"id": 475996783, "node_id": "MDU6TGFiZWw0NzU5OTY3ODM=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/functional_tests", "name": "functional_tests", "color": "f9d0c4", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "emkll", "id": 15223328, "node_id": "MDQ6VXNlcjE1MjIzMzI4", "avatar_url": "https://avatars.githubusercontent.com/u/15223328?v=4", "gravatar_id": "", "url": "https://api.github.com/users/emkll", "html_url": "https://github.com/emkll", "followers_url": "https://api.github.com/users/emkll/followers", "following_url": "https://api.github.com/users/emkll/following{/other_user}", "gists_url": "https://api.github.com/users/emkll/gists{/gist_id}", "starred_url": "https://api.github.com/users/emkll/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/emkll/subscriptions", "organizations_url": "https://api.github.com/users/emkll/orgs", "repos_url": "https://api.github.com/users/emkll/repos", "events_url": "https://api.github.com/users/emkll/events{/privacy}", "received_events_url": "https://api.github.com/users/emkll/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "emkll", "id": 15223328, "node_id": "MDQ6VXNlcjE1MjIzMzI4", "avatar_url": "https://avatars.githubusercontent.com/u/15223328?v=4", "gravatar_id": "", "url": "https://api.github.com/users/emkll", "html_url": "https://github.com/emkll", "followers_url": "https://api.github.com/users/emkll/followers", "following_url": "https://api.github.com/users/emkll/following{/other_user}", "gists_url": "https://api.github.com/users/emkll/gists{/gist_id}", "starred_url": "https://api.github.com/users/emkll/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/emkll/subscriptions", "organizations_url": "https://api.github.com/users/emkll/orgs", "repos_url": "https://api.github.com/users/emkll/repos", "events_url": "https://api.github.com/users/emkll/events{/privacy}", "received_events_url": "https://api.github.com/users/emkll/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/freedomofpress/securedrop/milestones/27", "html_url": "https://github.com/freedomofpress/securedrop/milestone/27", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/milestones/27/labels", "id": 2563515, "node_id": "MDk6TWlsZXN0b25lMjU2MzUxNQ==", "number": 27, "title": "0.6", "description": "End of day February 27: Feature freeze. From this point forward, only merge small fixes and stuff that touches testing.\r\n\r\nMarch 6 String freeze. \r\n(Release date to match Tails 3.6 release date in https://tails.boum.org/contribute/calendar/)", "creator": {"login": "redshiftzero", "id": 7832803, "node_id": "MDQ6VXNlcjc4MzI4MDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7832803?v=4", "gravatar_id": "", "url": "https://api.github.com/users/redshiftzero", "html_url": "https://github.com/redshiftzero", "followers_url": "https://api.github.com/users/redshiftzero/followers", "following_url": "https://api.github.com/users/redshiftzero/following{/other_user}", "gists_url": "https://api.github.com/users/redshiftzero/gists{/gist_id}", "starred_url": "https://api.github.com/users/redshiftzero/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/redshiftzero/subscriptions", "organizations_url": "https://api.github.com/users/redshiftzero/orgs", "repos_url": "https://api.github.com/users/redshiftzero/repos", "events_url": "https://api.github.com/users/redshiftzero/events{/privacy}", "received_events_url": "https://api.github.com/users/redshiftzero/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 68, "state": "closed", "created_at": "2017-06-06T01:31:16Z", "updated_at": "2018-03-16T21:24:40Z", "due_on": "2018-03-13T07:00:00Z", "closed_at": "2018-03-16T21:24:40Z"}, "comments": 5, "created_at": "2018-02-07T15:34:13Z", "updated_at": "2018-02-14T19:53:01Z", "closed_at": "2018-02-14T19:53:01Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "# Bug\r\n\r\n## Description\r\n\r\nApplication integration tests fail in local staging environment.\r\n\r\n## Steps to Reproduce\r\n\r\n* `make build-debs`\r\n* `vagrant up staging`\r\n* `sudo su www-data -s /bin/bash`\r\n* `cd /var/www/securedrop`\r\n* `pytest -v tests/`\r\n\r\n## Expected Behavior\r\n\r\nAll tests should pass.\r\n\r\n## Actual Behavior\r\n\r\nIntegration tests fail due to selenium/Firefox WebDriver exception:\r\n\r\n```\r\nE               WebDriverException: Message: Can't load the profile. Profile Dir: /tmp/tmpJDEyXO If you specified a log_file in the FirefoxBinary constructor, check it for details.\r\n\r\n/usr/local/lib/python2.7/dist-packages/selenium/webdriver/firefox/firefox_binary.py:108: WebDriverException\r\n```\r\nFull trace here: https://gist.github.com/emkll/e3767437a0aee4c3c40765789d267545\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2980/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2980/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2978", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2978/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2978/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2978/events", "html_url": "https://github.com/freedomofpress/securedrop/issues/2978", "id": 294772990, "node_id": "MDU6SXNzdWUyOTQ3NzI5OTA=", "number": 2978, "title": "async_genkey runs in a thread that has no flask application", "user": {"login": "ghost", "id": 10137, "node_id": "MDQ6VXNlcjEwMTM3", "avatar_url": "https://avatars.githubusercontent.com/u/10137?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ghost", "html_url": "https://github.com/ghost", "followers_url": "https://api.github.com/users/ghost/followers", "following_url": "https://api.github.com/users/ghost/following{/other_user}", "gists_url": "https://api.github.com/users/ghost/gists{/gist_id}", "starred_url": "https://api.github.com/users/ghost/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ghost/subscriptions", "organizations_url": "https://api.github.com/users/ghost/orgs", "repos_url": "https://api.github.com/users/ghost/repos", "events_url": "https://api.github.com/users/ghost/events{/privacy}", "received_events_url": "https://api.github.com/users/ghost/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}, {"id": 475997849, "node_id": "MDU6TGFiZWw0NzU5OTc4NDk=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/tests", "name": "tests", "color": "f9d0c4", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/freedomofpress/securedrop/milestones/27", "html_url": "https://github.com/freedomofpress/securedrop/milestone/27", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/milestones/27/labels", "id": 2563515, "node_id": "MDk6TWlsZXN0b25lMjU2MzUxNQ==", "number": 27, "title": "0.6", "description": "End of day February 27: Feature freeze. From this point forward, only merge small fixes and stuff that touches testing.\r\n\r\nMarch 6 String freeze. \r\n(Release date to match Tails 3.6 release date in https://tails.boum.org/contribute/calendar/)", "creator": {"login": "redshiftzero", "id": 7832803, "node_id": "MDQ6VXNlcjc4MzI4MDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7832803?v=4", "gravatar_id": "", "url": "https://api.github.com/users/redshiftzero", "html_url": "https://github.com/redshiftzero", "followers_url": "https://api.github.com/users/redshiftzero/followers", "following_url": "https://api.github.com/users/redshiftzero/following{/other_user}", "gists_url": "https://api.github.com/users/redshiftzero/gists{/gist_id}", "starred_url": "https://api.github.com/users/redshiftzero/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/redshiftzero/subscriptions", "organizations_url": "https://api.github.com/users/redshiftzero/orgs", "repos_url": "https://api.github.com/users/redshiftzero/repos", "events_url": "https://api.github.com/users/redshiftzero/events{/privacy}", "received_events_url": "https://api.github.com/users/redshiftzero/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 68, "state": "closed", "created_at": "2017-06-06T01:31:16Z", "updated_at": "2018-03-16T21:24:40Z", "due_on": "2018-03-13T07:00:00Z", "closed_at": "2018-03-16T21:24:40Z"}, "comments": 7, "created_at": "2018-02-06T14:11:37Z", "updated_at": "2018-07-29T09:54:23Z", "closed_at": "2018-02-14T19:54:09Z", "author_association": "NONE", "active_lock_reason": null, "body": "# Bug\r\n\r\n## Description\r\n\r\nasync_genkey tries to access the database in a separate thread and fails with the error like\r\n\r\n<pre>\r\n[2018-02-06 00:05:33,620] ERROR in utils: async_genkey for source (filesystem_id=AXT3PQIZMYAMHOZ4MIVX6ZGHCWP3GKWNI5UW2UMMANIGQJ6CUTYH45VTEP63X2DAWPRTS3PUPQBAFCLI4JMOZHVZPOZXGIKWMCFJQ3I=): No application found. Either work inside a view function or push an application context. See http://flask-sqlalchemy.pocoo.org/contexts/.\r\n</pre>\r\n\r\nSee an example of failure probably due to this race https://gist.github.com/conorsch/b76b0ae5f81b1a78428d59e1b4666e7a#file-app-test-failures-log-L358\r\n\r\n## Steps to Reproduce\r\n\r\nNot sure.\r\n\r\n## Expected Behavior\r\n\r\n* pytest tests/test_integration.py runs with no failure.\r\n\r\n## Actual Behavior\r\n\r\n* pytest tests/test_integration.py runs sometime fails with\r\n<pre>\r\nNo application found. Either work inside a view function or push an application context. See http://flask-sqlalchemy.pocoo.org/contexts/.\r\n</pre>\r\n", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2978/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2978/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2977", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2977/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2977/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2977/events", "html_url": "https://github.com/freedomofpress/securedrop/pull/2977", "id": 294708702, "node_id": "MDExOlB1bGxSZXF1ZXN0MTY3Mzc1NjAz", "number": 2977, "title": "s/are generally/is generally/ - Fix #2908.", "user": {"login": "EdOverflow", "id": 18099289, "node_id": "MDQ6VXNlcjE4MDk5Mjg5", "avatar_url": "https://avatars.githubusercontent.com/u/18099289?v=4", "gravatar_id": "", "url": "https://api.github.com/users/EdOverflow", "html_url": "https://github.com/EdOverflow", "followers_url": "https://api.github.com/users/EdOverflow/followers", "following_url": "https://api.github.com/users/EdOverflow/following{/other_user}", "gists_url": "https://api.github.com/users/EdOverflow/gists{/gist_id}", "starred_url": "https://api.github.com/users/EdOverflow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/EdOverflow/subscriptions", "organizations_url": "https://api.github.com/users/EdOverflow/orgs", "repos_url": "https://api.github.com/users/EdOverflow/repos", "events_url": "https://api.github.com/users/EdOverflow/events{/privacy}", "received_events_url": "https://api.github.com/users/EdOverflow/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}, {"id": 118465787, "node_id": "MDU6TGFiZWwxMTg0NjU3ODc=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/docs", "name": "docs", "color": "d4c5f9", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2018-02-06T10:34:06Z", "updated_at": "2018-02-06T13:42:19Z", "closed_at": "2018-02-06T13:04:01Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/freedomofpress/securedrop/pulls/2977", "html_url": "https://github.com/freedomofpress/securedrop/pull/2977", "diff_url": "https://github.com/freedomofpress/securedrop/pull/2977.diff", "patch_url": "https://github.com/freedomofpress/securedrop/pull/2977.patch", "merged_at": "2018-02-06T13:04:01Z"}, "body": "## Status\r\n\r\nReady for review\r\n\r\n## Description of Changes\r\n\r\nFixes #2908 .\r\n\r\nChanges proposed in this pull request: `s/are generally/is generally/`\r\n\r\n## Testing\r\n\r\n\ud83d\udc40 \r\n\r\n### If you made changes to documentation:\r\n\r\n- [x] Doc linting passed locally\r\n", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2977/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2977/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2962", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2962/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2962/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2962/events", "html_url": "https://github.com/freedomofpress/securedrop/issues/2962", "id": 293925926, "node_id": "MDU6SXNzdWUyOTM5MjU5MjY=", "number": 2962, "title": "Instructions to change Tor Browser security slider need updating", "user": {"login": "redshiftzero", "id": 7832803, "node_id": "MDQ6VXNlcjc4MzI4MDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7832803?v=4", "gravatar_id": "", "url": "https://api.github.com/users/redshiftzero", "html_url": "https://github.com/redshiftzero", "followers_url": "https://api.github.com/users/redshiftzero/followers", "following_url": "https://api.github.com/users/redshiftzero/following{/other_user}", "gists_url": "https://api.github.com/users/redshiftzero/gists{/gist_id}", "starred_url": "https://api.github.com/users/redshiftzero/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/redshiftzero/subscriptions", "organizations_url": "https://api.github.com/users/redshiftzero/orgs", "repos_url": "https://api.github.com/users/redshiftzero/repos", "events_url": "https://api.github.com/users/redshiftzero/events{/privacy}", "received_events_url": "https://api.github.com/users/redshiftzero/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}, {"id": 192539755, "node_id": "MDU6TGFiZWwxOTI1Mzk3NTU=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/app", "name": "app", "color": "bfe5bf", "default": false, "description": null}, {"id": 744728978, "node_id": "MDU6TGFiZWw3NDQ3Mjg5Nzg=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/goals:%20improve%20source%20experience", "name": "goals: improve source experience", "color": "0e8a16", "default": false, "description": null}, {"id": 1320823996, "node_id": "MDU6TGFiZWwxMzIwODIzOTk2", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/good%20first%20issue", "name": "good first issue", "color": "ff479a", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2018-02-02T15:30:15Z", "updated_at": "2019-05-16T21:40:41Z", "closed_at": "2018-03-01T16:49:55Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "## Description\r\n\r\nWe have instructions to turn the security slider to its maximum setting on the source interface. These instructions are out of date with the security slider. \r\n\r\n## Steps to Reproduce\r\n\r\n0. Access the source interface in latest Tor Browser (here Tor Browser 7.5)\r\n1. Try to follow the instructions to turn the security slider to \"High\":\r\n\r\n<img width=\"501\" alt=\"screen shot 2018-02-02 at 4 20 43 pm\" src=\"https://user-images.githubusercontent.com/7832803/35740557-70c916ce-0835-11e8-87ea-24faf6a5c2d0.png\">\r\n\r\n## Expected Behavior\r\n\r\nI follow instructions as written and I am not confused\r\n\r\n## Actual Behavior\r\n\r\nThe highest setting is now called \"Safest\":\r\n\r\n<img width=\"494\" alt=\"screen shot 2018-02-02 at 4 24 06 pm\" src=\"https://user-images.githubusercontent.com/7832803/35740587-85ef050e-0835-11e8-9da4-69d891e5cd1d.png\">\r\n\r\n## Comments\r\n\r\nJust replace \"High\" with \"Safest\"", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2962/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2962/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2960", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2960/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2960/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2960/events", "html_url": "https://github.com/freedomofpress/securedrop/issues/2960", "id": 293906273, "node_id": "MDU6SXNzdWUyOTM5MDYyNzM=", "number": 2960, "title": "Syscheck warning on missing directory specified in ossec agent configuration", "user": {"login": "emkll", "id": 15223328, "node_id": "MDQ6VXNlcjE1MjIzMzI4", "avatar_url": "https://avatars.githubusercontent.com/u/15223328?v=4", "gravatar_id": "", "url": "https://api.github.com/users/emkll", "html_url": "https://github.com/emkll", "followers_url": "https://api.github.com/users/emkll/followers", "following_url": "https://api.github.com/users/emkll/following{/other_user}", "gists_url": "https://api.github.com/users/emkll/gists{/gist_id}", "starred_url": "https://api.github.com/users/emkll/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/emkll/subscriptions", "organizations_url": "https://api.github.com/users/emkll/orgs", "repos_url": "https://api.github.com/users/emkll/repos", "events_url": "https://api.github.com/users/emkll/events{/privacy}", "received_events_url": "https://api.github.com/users/emkll/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}, {"id": 741396371, "node_id": "MDU6TGFiZWw3NDEzOTYzNzE=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/OSSEC", "name": "OSSEC", "color": "006b75", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/freedomofpress/securedrop/milestones/27", "html_url": "https://github.com/freedomofpress/securedrop/milestone/27", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/milestones/27/labels", "id": 2563515, "node_id": "MDk6TWlsZXN0b25lMjU2MzUxNQ==", "number": 27, "title": "0.6", "description": "End of day February 27: Feature freeze. From this point forward, only merge small fixes and stuff that touches testing.\r\n\r\nMarch 6 String freeze. \r\n(Release date to match Tails 3.6 release date in https://tails.boum.org/contribute/calendar/)", "creator": {"login": "redshiftzero", "id": 7832803, "node_id": "MDQ6VXNlcjc4MzI4MDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7832803?v=4", "gravatar_id": "", "url": "https://api.github.com/users/redshiftzero", "html_url": "https://github.com/redshiftzero", "followers_url": "https://api.github.com/users/redshiftzero/followers", "following_url": "https://api.github.com/users/redshiftzero/following{/other_user}", "gists_url": "https://api.github.com/users/redshiftzero/gists{/gist_id}", "starred_url": "https://api.github.com/users/redshiftzero/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/redshiftzero/subscriptions", "organizations_url": "https://api.github.com/users/redshiftzero/orgs", "repos_url": "https://api.github.com/users/redshiftzero/repos", "events_url": "https://api.github.com/users/redshiftzero/events{/privacy}", "received_events_url": "https://api.github.com/users/redshiftzero/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 68, "state": "closed", "created_at": "2017-06-06T01:31:16Z", "updated_at": "2018-03-16T21:24:40Z", "due_on": "2018-03-13T07:00:00Z", "closed_at": "2018-03-16T21:24:40Z"}, "comments": 0, "created_at": "2018-02-02T14:30:12Z", "updated_at": "2018-02-27T23:57:06Z", "closed_at": "2018-02-03T22:47:05Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "# Bug\r\n\r\n## Description\r\n\r\nAs of release 0.5.2, ossec logs contain a large number of the following warning message:\r\n```\r\n2018/02/02 14:12:46 ossec-syscheckd: WARN: Error opening directory: '/var/lib/tor/services/hostname': No such file or directory \r\n```\r\n\r\n## Steps to Reproduce\r\n\r\n* ssh into mon\r\n* cat /var/ossec/logs/ossec.log\r\n* observe a large amount of the following warning message:\r\n\r\n```\r\n2018/02/02 14:12:46 ossec-syscheckd: WARN: Error opening directory: '/var/lib/tor/services/hostname': No such file or directory \r\n```\r\n## Expected Behavior\r\n\r\nWarning should not appear in ossec logs, ossec configuration should specify files/folder that exist.\r\n\r\n## Actual Behavior\r\n\r\nWarning appears in ossec logs, ossec configuration does not contain files/folders that exist.\r\n\r\n## Comments\r\n\r\nhttps://github.com/freedomofpress/securedrop/blob/develop/install_files/securedrop-ossec-agent/var/ossec/etc/ossec.conf#L16 specifies the path, which has likely been removed as of tor 0.3.2.*", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2960/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2960/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2959", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2959/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2959/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2959/events", "html_url": "https://github.com/freedomofpress/securedrop/issues/2959", "id": 293816598, "node_id": "MDU6SXNzdWUyOTM4MTY1OTg=", "number": 2959, "title": "css-modal screenshots sometime do not show", "user": {"login": "ghost", "id": 10137, "node_id": "MDQ6VXNlcjEwMTM3", "avatar_url": "https://avatars.githubusercontent.com/u/10137?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ghost", "html_url": "https://github.com/ghost", "followers_url": "https://api.github.com/users/ghost/followers", "following_url": "https://api.github.com/users/ghost/following{/other_user}", "gists_url": "https://api.github.com/users/ghost/gists{/gist_id}", "starred_url": "https://api.github.com/users/ghost/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ghost/subscriptions", "organizations_url": "https://api.github.com/users/ghost/orgs", "repos_url": "https://api.github.com/users/ghost/repos", "events_url": "https://api.github.com/users/ghost/events{/privacy}", "received_events_url": "https://api.github.com/users/ghost/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}, {"id": 475996783, "node_id": "MDU6TGFiZWw0NzU5OTY3ODM=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/functional_tests", "name": "functional_tests", "color": "f9d0c4", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2018-02-02T08:59:15Z", "updated_at": "2018-02-13T11:23:23Z", "closed_at": "2018-02-13T11:23:23Z", "author_association": "NONE", "active_lock_reason": null, "body": "# Bug\r\n\r\n## Description\r\n\r\nBecause of the ease-in display of the modal (**transition: opacity 100ms ease-in**), the screenshot taken right after clicking on the **delete** button may not show the modal.\r\n\r\n## Steps to Reproduce\r\n\r\n* pytest --page-layout tests/pages-layout\r\n* view securedrop/tests/pages-layout/screenshots/en_US/journalist-delete_all_confirmation.png or journalist-delete_one_confirmation.png\r\n\r\n## Expected Behavior\r\n\r\nA screenshot that displays the modal.\r\n\r\n## Actual Behavior\r\n\r\n![journalist-delete_one_confirmation](https://user-images.githubusercontent.com/433594/35724868-937dfcba-07ff-11e8-9ad8-dc60331e0250.png)\r\n", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2959/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2959/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2957", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2957/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2957/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2957/events", "html_url": "https://github.com/freedomofpress/securedrop/issues/2957", "id": 293663347, "node_id": "MDU6SXNzdWUyOTM2NjMzNDc=", "number": 2957, "title": "Repeated sentence in doc page \"What Makes SecureDrop Unique\"", "user": {"login": "aydwi", "id": 29029116, "node_id": "MDQ6VXNlcjI5MDI5MTE2", "avatar_url": "https://avatars.githubusercontent.com/u/29029116?v=4", "gravatar_id": "", "url": "https://api.github.com/users/aydwi", "html_url": "https://github.com/aydwi", "followers_url": "https://api.github.com/users/aydwi/followers", "following_url": "https://api.github.com/users/aydwi/following{/other_user}", "gists_url": "https://api.github.com/users/aydwi/gists{/gist_id}", "starred_url": "https://api.github.com/users/aydwi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/aydwi/subscriptions", "organizations_url": "https://api.github.com/users/aydwi/orgs", "repos_url": "https://api.github.com/users/aydwi/repos", "events_url": "https://api.github.com/users/aydwi/events{/privacy}", "received_events_url": "https://api.github.com/users/aydwi/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}, {"id": 118465787, "node_id": "MDU6TGFiZWwxMTg0NjU3ODc=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/docs", "name": "docs", "color": "d4c5f9", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2018-02-01T19:57:47Z", "updated_at": "2018-02-02T17:46:08Z", "closed_at": "2018-02-02T17:46:08Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "# Bug\r\n\r\n## Description\r\n\r\nIn the doc page **\"What Makes SecureDrop Unique\"**, under the heading **\"Protecting against hackers\"**, the sentence *\"The SecureDrop servers also undergo significant system hardening in order to make it as difficult as possible for hackers to break in.\"* is repeated twice.\r\n\r\nThe first occurrence of the sentence should be removed.\r\n", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2957/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2957/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2955", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2955/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2955/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2955/events", "html_url": "https://github.com/freedomofpress/securedrop/issues/2955", "id": 293236630, "node_id": "MDU6SXNzdWUyOTMyMzY2MzA=", "number": 2955, "title": "securedrop-admin sdconfig erases additional values in site-specific", "user": {"login": "emkll", "id": 15223328, "node_id": "MDQ6VXNlcjE1MjIzMzI4", "avatar_url": "https://avatars.githubusercontent.com/u/15223328?v=4", "gravatar_id": "", "url": "https://api.github.com/users/emkll", "html_url": "https://github.com/emkll", "followers_url": "https://api.github.com/users/emkll/followers", "following_url": "https://api.github.com/users/emkll/following{/other_user}", "gists_url": "https://api.github.com/users/emkll/gists{/gist_id}", "starred_url": "https://api.github.com/users/emkll/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/emkll/subscriptions", "organizations_url": "https://api.github.com/users/emkll/orgs", "repos_url": "https://api.github.com/users/emkll/repos", "events_url": "https://api.github.com/users/emkll/events{/privacy}", "received_events_url": "https://api.github.com/users/emkll/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}, {"id": 660721238, "node_id": "MDU6TGFiZWw2NjA3MjEyMzg=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/goals:%20improve%20developer%20workflow", "name": "goals: improve developer workflow", "color": "0e8a16", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/freedomofpress/securedrop/milestones/27", "html_url": "https://github.com/freedomofpress/securedrop/milestone/27", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/milestones/27/labels", "id": 2563515, "node_id": "MDk6TWlsZXN0b25lMjU2MzUxNQ==", "number": 27, "title": "0.6", "description": "End of day February 27: Feature freeze. From this point forward, only merge small fixes and stuff that touches testing.\r\n\r\nMarch 6 String freeze. \r\n(Release date to match Tails 3.6 release date in https://tails.boum.org/contribute/calendar/)", "creator": {"login": "redshiftzero", "id": 7832803, "node_id": "MDQ6VXNlcjc4MzI4MDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7832803?v=4", "gravatar_id": "", "url": "https://api.github.com/users/redshiftzero", "html_url": "https://github.com/redshiftzero", "followers_url": "https://api.github.com/users/redshiftzero/followers", "following_url": "https://api.github.com/users/redshiftzero/following{/other_user}", "gists_url": "https://api.github.com/users/redshiftzero/gists{/gist_id}", "starred_url": "https://api.github.com/users/redshiftzero/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/redshiftzero/subscriptions", "organizations_url": "https://api.github.com/users/redshiftzero/orgs", "repos_url": "https://api.github.com/users/redshiftzero/repos", "events_url": "https://api.github.com/users/redshiftzero/events{/privacy}", "received_events_url": "https://api.github.com/users/redshiftzero/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 68, "state": "closed", "created_at": "2017-06-06T01:31:16Z", "updated_at": "2018-03-16T21:24:40Z", "due_on": "2018-03-13T07:00:00Z", "closed_at": "2018-03-16T21:24:40Z"}, "comments": 4, "created_at": "2018-01-31T17:02:33Z", "updated_at": "2018-07-29T09:54:23Z", "closed_at": "2018-02-12T17:24:22Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "# Bug\r\n\r\n## Description\r\n\r\nsecuredrop-admin sdconfig erases values in site-specific when they are not prompted for. `securedrop-admin sdconfig` should not erase entries in site-specific, which would help testing (e.g.: releases that are in development or perhaps alpha/beta features).\r\n\r\n## Steps to Reproduce\r\n\r\n* edit `/install_files/ansible-base/group-vars/all/site-specific` and add another value\r\n* run ./securedrop-admin sdconfig\r\n* open `/install_files/ansible-base/group-vars/all/site-specific` and observe your value has disappeared\r\n\r\n## Expected Behavior\r\n\r\n`securedrop-admin sdconfig` should not erase entries in `/install_files/ansible-base/group-vars/all/site-specific`.\r\n\r\n## Actual Behavior\r\n`ecuredrop-admin sdconfig` erases entries in `/install_files/ansible-base/group-vars/all/site-specific`.\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2955/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2955/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2949", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2949/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2949/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2949/events", "html_url": "https://github.com/freedomofpress/securedrop/pull/2949", "id": 292287297, "node_id": "MDExOlB1bGxSZXF1ZXN0MTY1NjE4MTc4", "number": 2949, "title": "tails_guide.rst: style and typo fixes", "user": {"login": "pierwill", "id": 19642016, "node_id": "MDQ6VXNlcjE5NjQyMDE2", "avatar_url": "https://avatars.githubusercontent.com/u/19642016?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pierwill", "html_url": "https://github.com/pierwill", "followers_url": "https://api.github.com/users/pierwill/followers", "following_url": "https://api.github.com/users/pierwill/following{/other_user}", "gists_url": "https://api.github.com/users/pierwill/gists{/gist_id}", "starred_url": "https://api.github.com/users/pierwill/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pierwill/subscriptions", "organizations_url": "https://api.github.com/users/pierwill/orgs", "repos_url": "https://api.github.com/users/pierwill/repos", "events_url": "https://api.github.com/users/pierwill/events{/privacy}", "received_events_url": "https://api.github.com/users/pierwill/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}, {"id": 118465787, "node_id": "MDU6TGFiZWwxMTg0NjU3ODc=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/docs", "name": "docs", "color": "d4c5f9", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2018-01-29T05:19:58Z", "updated_at": "2018-06-12T14:35:22Z", "closed_at": "2018-01-30T21:05:28Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/freedomofpress/securedrop/pulls/2949", "html_url": "https://github.com/freedomofpress/securedrop/pull/2949", "diff_url": "https://github.com/freedomofpress/securedrop/pull/2949.diff", "patch_url": "https://github.com/freedomofpress/securedrop/pull/2949.patch", "merged_at": "2018-01-30T21:05:28Z"}, "body": "Ready for review\r\n\r\n- [x] Doc linting passed locally", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2949/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2949/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2938", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2938/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2938/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2938/events", "html_url": "https://github.com/freedomofpress/securedrop/issues/2938", "id": 292019919, "node_id": "MDU6SXNzdWUyOTIwMTk5MTk=", "number": 2938, "title": "Duplicate tor apt repos installed", "user": {"login": "msheiny", "id": 1727935, "node_id": "MDQ6VXNlcjE3Mjc5MzU=", "avatar_url": "https://avatars.githubusercontent.com/u/1727935?v=4", "gravatar_id": "", "url": "https://api.github.com/users/msheiny", "html_url": "https://github.com/msheiny", "followers_url": "https://api.github.com/users/msheiny/followers", "following_url": "https://api.github.com/users/msheiny/following{/other_user}", "gists_url": "https://api.github.com/users/msheiny/gists{/gist_id}", "starred_url": "https://api.github.com/users/msheiny/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/msheiny/subscriptions", "organizations_url": "https://api.github.com/users/msheiny/orgs", "repos_url": "https://api.github.com/users/msheiny/repos", "events_url": "https://api.github.com/users/msheiny/events{/privacy}", "received_events_url": "https://api.github.com/users/msheiny/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}, {"id": 192539287, "node_id": "MDU6TGFiZWwxOTI1MzkyODc=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/ops/deployment", "name": "ops/deployment", "color": "c7def8", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "conorsch", "id": 657862, "node_id": "MDQ6VXNlcjY1Nzg2Mg==", "avatar_url": "https://avatars.githubusercontent.com/u/657862?v=4", "gravatar_id": "", "url": "https://api.github.com/users/conorsch", "html_url": "https://github.com/conorsch", "followers_url": "https://api.github.com/users/conorsch/followers", "following_url": "https://api.github.com/users/conorsch/following{/other_user}", "gists_url": "https://api.github.com/users/conorsch/gists{/gist_id}", "starred_url": "https://api.github.com/users/conorsch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/conorsch/subscriptions", "organizations_url": "https://api.github.com/users/conorsch/orgs", "repos_url": "https://api.github.com/users/conorsch/repos", "events_url": "https://api.github.com/users/conorsch/events{/privacy}", "received_events_url": "https://api.github.com/users/conorsch/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "conorsch", "id": 657862, "node_id": "MDQ6VXNlcjY1Nzg2Mg==", "avatar_url": "https://avatars.githubusercontent.com/u/657862?v=4", "gravatar_id": "", "url": "https://api.github.com/users/conorsch", "html_url": "https://github.com/conorsch", "followers_url": "https://api.github.com/users/conorsch/followers", "following_url": "https://api.github.com/users/conorsch/following{/other_user}", "gists_url": "https://api.github.com/users/conorsch/gists{/gist_id}", "starred_url": "https://api.github.com/users/conorsch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/conorsch/subscriptions", "organizations_url": "https://api.github.com/users/conorsch/orgs", "repos_url": "https://api.github.com/users/conorsch/repos", "events_url": "https://api.github.com/users/conorsch/events{/privacy}", "received_events_url": "https://api.github.com/users/conorsch/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/freedomofpress/securedrop/milestones/42", "html_url": "https://github.com/freedomofpress/securedrop/milestone/42", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/milestones/42/labels", "id": 3037554, "node_id": "MDk6TWlsZXN0b25lMzAzNzU1NA==", "number": 42, "title": "0.7", "description": "(Release date to match Tails 3.7 release date in https://tails.boum.org/contribute/calendar/). See also the [detailed i18n timeline](https://forum.securedrop.club/t/about-the-translations-category/16). Feature freeze is April 24 EOD. String freeze is May 1 EOD.\r\n\r\nUpdate May 7, 2018: Release was deferred by one week (to May 15) to allow for more time to QA some late stage fixes.", "creator": {"login": "redshiftzero", "id": 7832803, "node_id": "MDQ6VXNlcjc4MzI4MDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7832803?v=4", "gravatar_id": "", "url": "https://api.github.com/users/redshiftzero", "html_url": "https://github.com/redshiftzero", "followers_url": "https://api.github.com/users/redshiftzero/followers", "following_url": "https://api.github.com/users/redshiftzero/following{/other_user}", "gists_url": "https://api.github.com/users/redshiftzero/gists{/gist_id}", "starred_url": "https://api.github.com/users/redshiftzero/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/redshiftzero/subscriptions", "organizations_url": "https://api.github.com/users/redshiftzero/orgs", "repos_url": "https://api.github.com/users/redshiftzero/repos", "events_url": "https://api.github.com/users/redshiftzero/events{/privacy}", "received_events_url": "https://api.github.com/users/redshiftzero/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 75, "state": "closed", "created_at": "2018-01-15T23:46:19Z", "updated_at": "2018-05-16T05:33:37Z", "due_on": "2018-05-15T07:00:00Z", "closed_at": "2018-05-16T05:33:37Z"}, "comments": 7, "created_at": "2018-01-26T20:19:28Z", "updated_at": "2018-04-05T00:32:51Z", "closed_at": "2018-03-26T21:13:49Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "# Bug\r\n\r\n## Description\r\n\r\nOn an new install of 0.5 (or on an instance that has had the install commands run a second time), they will have two repository list files pointing to our securedrop tor apt repo:\r\n\r\n* /etc/apt/sources.list.d/tor_apt_freedom_press.list\r\n* /etc/apt/sources.list.d/tor.apt.freedom.press.list\r\n\r\nThe first one is generated via commit `565c6243a9a340d51879bf32fabb9fe45dd42ab2` and the second is generated via the `securedrop-config` debian package.\r\n\r\nThis shouldn't cause any breaking problems but it is problematic when we want to clean-up later and or redirect repos.\r\n\r\n## Steps to Reproduce\r\n\r\n- Install latest securedrop (0.5.1 as of this PR)\r\n- Do an `ls  -l /etc/apt/sources.list.d/*.list`\r\n\r\n## Expected Behavior\r\n\r\nShould only see `apt_freedom_press.list` and one other file\r\n\r\n## Actual Behavior\r\n\r\nWe see three files `apt_freedom_press.list` and the two files listed above\r\n\r\n## Comments\r\n\r\nPurge one of the files in question and stick to one standard.", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2938/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2938/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2932", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2932/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2932/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2932/events", "html_url": "https://github.com/freedomofpress/securedrop/pull/2932", "id": 291747141, "node_id": "MDExOlB1bGxSZXF1ZXN0MTY1MjUyMjcw", "number": 2932, "title": "Fix CI bug where PR branch was not rebasing on develop", "user": {"login": "redshiftzero", "id": 7832803, "node_id": "MDQ6VXNlcjc4MzI4MDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7832803?v=4", "gravatar_id": "", "url": "https://api.github.com/users/redshiftzero", "html_url": "https://github.com/redshiftzero", "followers_url": "https://api.github.com/users/redshiftzero/followers", "following_url": "https://api.github.com/users/redshiftzero/following{/other_user}", "gists_url": "https://api.github.com/users/redshiftzero/gists{/gist_id}", "starred_url": "https://api.github.com/users/redshiftzero/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/redshiftzero/subscriptions", "organizations_url": "https://api.github.com/users/redshiftzero/orgs", "repos_url": "https://api.github.com/users/redshiftzero/repos", "events_url": "https://api.github.com/users/redshiftzero/events{/privacy}", "received_events_url": "https://api.github.com/users/redshiftzero/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}, {"id": 652907032, "node_id": "MDU6TGFiZWw2NTI5MDcwMzI=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/goals:%20sick%20CI", "name": "goals: sick CI", "color": "0e8a16", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2018-01-25T23:05:15Z", "updated_at": "2018-01-26T00:01:45Z", "closed_at": "2018-01-26T00:01:41Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/freedomofpress/securedrop/pulls/2932", "html_url": "https://github.com/freedomofpress/securedrop/pull/2932", "diff_url": "https://github.com/freedomofpress/securedrop/pull/2932.diff", "patch_url": "https://github.com/freedomofpress/securedrop/pull/2932.patch", "merged_at": "2018-01-26T00:01:41Z"}, "body": "## Status\r\n\r\nReady for review\r\n\r\n## Description of Changes\r\n\r\nFixes #2931.\r\n\r\nChanges proposed in this pull request:\r\n * add back in rebase on develop for staging CI job\r\n\r\n## Testing\r\n\r\nVerify the \"Rebase on-top of latest develop\" step runs in Circle\r\n\r\n## Deployment\r\n\r\nCI only\r\n\r\n## Checklist\r\nCI only\r\n", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2932/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2932/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2921", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2921/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2921/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2921/events", "html_url": "https://github.com/freedomofpress/securedrop/pull/2921", "id": 291066243, "node_id": "MDExOlB1bGxSZXF1ZXN0MTY0NzQzODky", "number": 2921, "title": "Add coverage of js functionality with Selenium and resolve js alert regression", "user": {"login": "redshiftzero", "id": 7832803, "node_id": "MDQ6VXNlcjc4MzI4MDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7832803?v=4", "gravatar_id": "", "url": "https://api.github.com/users/redshiftzero", "html_url": "https://github.com/redshiftzero", "followers_url": "https://api.github.com/users/redshiftzero/followers", "following_url": "https://api.github.com/users/redshiftzero/following{/other_user}", "gists_url": "https://api.github.com/users/redshiftzero/gists{/gist_id}", "starred_url": "https://api.github.com/users/redshiftzero/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/redshiftzero/subscriptions", "organizations_url": "https://api.github.com/users/redshiftzero/orgs", "repos_url": "https://api.github.com/users/redshiftzero/repos", "events_url": "https://api.github.com/users/redshiftzero/events{/privacy}", "received_events_url": "https://api.github.com/users/redshiftzero/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}, {"id": 652907313, "node_id": "MDU6TGFiZWw2NTI5MDczMTM=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/goals:%20more%20tests", "name": "goals: more tests", "color": "0e8a16", "default": false, "description": null}, {"id": 678359760, "node_id": "MDU6TGFiZWw2NzgzNTk3NjA=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/js", "name": "js", "color": "006b75", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2018-01-24T02:46:57Z", "updated_at": "2018-04-10T15:05:34Z", "closed_at": "2018-01-27T09:09:32Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/freedomofpress/securedrop/pulls/2921", "html_url": "https://github.com/freedomofpress/securedrop/pull/2921", "diff_url": "https://github.com/freedomofpress/securedrop/pull/2921.diff", "patch_url": "https://github.com/freedomofpress/securedrop/pull/2921.patch", "merged_at": "2018-01-27T09:09:31Z"}, "body": "## Status\r\n\r\nReady for review\r\n\r\n## Description of Changes\r\n\r\nFixes #2405 and fixes #2920 (happy to split this up into multiple PRs if desired)\r\n\r\nChanges proposed in this pull request:\r\n  * Adds test coverage for js functionality using Selenium -- this should test everything that we can test with _Firefox_ based Selenium tests\r\n\r\nWe would either need to use Selenium with multiple browsers (i.e. Tor Browser and not Tor Browser) to test the remaining source interface functionality and/or have some js unit tests that [check that the right warnings are rendered based on various user agent strings](https://github.com/freedomofpress/securedrop/compare/test-coverage-source-interface-js#diff-2a4e34a719a23a3734bf355b523558beR13) (#2406). Imho adding js unit tests is easier than rigging up functional tests with many browsers (consider how we'd add test coverage for [resolutions](https://github.com/freedomofpress/securedrop/issues/2510#issuecomment-342007810) to defects like #2510). \r\n\r\n## Testing\r\n\r\nDo tests pass? Is there functionality in the js that I have _not_ covered and could via Selenium? \r\n\r\n## Deployment\r\n\r\nJust tests and js\r\n\r\n## Checklist\r\n\r\n### If you made changes to the app code:\r\n\r\n- [x] Unit and functional tests pass on the development VM\r\n", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2921/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2921/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2920", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2920/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2920/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2920/events", "html_url": "https://github.com/freedomofpress/securedrop/issues/2920", "id": 291047073, "node_id": "MDU6SXNzdWUyOTEwNDcwNzM=", "number": 2920, "title": "User confirmation before 2FA reset no longer appears", "user": {"login": "redshiftzero", "id": 7832803, "node_id": "MDQ6VXNlcjc4MzI4MDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7832803?v=4", "gravatar_id": "", "url": "https://api.github.com/users/redshiftzero", "html_url": "https://github.com/redshiftzero", "followers_url": "https://api.github.com/users/redshiftzero/followers", "following_url": "https://api.github.com/users/redshiftzero/following{/other_user}", "gists_url": "https://api.github.com/users/redshiftzero/gists{/gist_id}", "starred_url": "https://api.github.com/users/redshiftzero/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/redshiftzero/subscriptions", "organizations_url": "https://api.github.com/users/redshiftzero/orgs", "repos_url": "https://api.github.com/users/redshiftzero/repos", "events_url": "https://api.github.com/users/redshiftzero/events{/privacy}", "received_events_url": "https://api.github.com/users/redshiftzero/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}, {"id": 678359760, "node_id": "MDU6TGFiZWw2NzgzNTk3NjA=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/js", "name": "js", "color": "006b75", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "redshiftzero", "id": 7832803, "node_id": "MDQ6VXNlcjc4MzI4MDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7832803?v=4", "gravatar_id": "", "url": "https://api.github.com/users/redshiftzero", "html_url": "https://github.com/redshiftzero", "followers_url": "https://api.github.com/users/redshiftzero/followers", "following_url": "https://api.github.com/users/redshiftzero/following{/other_user}", "gists_url": "https://api.github.com/users/redshiftzero/gists{/gist_id}", "starred_url": "https://api.github.com/users/redshiftzero/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/redshiftzero/subscriptions", "organizations_url": "https://api.github.com/users/redshiftzero/orgs", "repos_url": "https://api.github.com/users/redshiftzero/repos", "events_url": "https://api.github.com/users/redshiftzero/events{/privacy}", "received_events_url": "https://api.github.com/users/redshiftzero/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "redshiftzero", "id": 7832803, "node_id": "MDQ6VXNlcjc4MzI4MDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7832803?v=4", "gravatar_id": "", "url": "https://api.github.com/users/redshiftzero", "html_url": "https://github.com/redshiftzero", "followers_url": "https://api.github.com/users/redshiftzero/followers", "following_url": "https://api.github.com/users/redshiftzero/following{/other_user}", "gists_url": "https://api.github.com/users/redshiftzero/gists{/gist_id}", "starred_url": "https://api.github.com/users/redshiftzero/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/redshiftzero/subscriptions", "organizations_url": "https://api.github.com/users/redshiftzero/orgs", "repos_url": "https://api.github.com/users/redshiftzero/repos", "events_url": "https://api.github.com/users/redshiftzero/events{/privacy}", "received_events_url": "https://api.github.com/users/redshiftzero/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/freedomofpress/securedrop/milestones/27", "html_url": "https://github.com/freedomofpress/securedrop/milestone/27", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/milestones/27/labels", "id": 2563515, "node_id": "MDk6TWlsZXN0b25lMjU2MzUxNQ==", "number": 27, "title": "0.6", "description": "End of day February 27: Feature freeze. From this point forward, only merge small fixes and stuff that touches testing.\r\n\r\nMarch 6 String freeze. \r\n(Release date to match Tails 3.6 release date in https://tails.boum.org/contribute/calendar/)", "creator": {"login": "redshiftzero", "id": 7832803, "node_id": "MDQ6VXNlcjc4MzI4MDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7832803?v=4", "gravatar_id": "", "url": "https://api.github.com/users/redshiftzero", "html_url": "https://github.com/redshiftzero", "followers_url": "https://api.github.com/users/redshiftzero/followers", "following_url": "https://api.github.com/users/redshiftzero/following{/other_user}", "gists_url": "https://api.github.com/users/redshiftzero/gists{/gist_id}", "starred_url": "https://api.github.com/users/redshiftzero/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/redshiftzero/subscriptions", "organizations_url": "https://api.github.com/users/redshiftzero/orgs", "repos_url": "https://api.github.com/users/redshiftzero/repos", "events_url": "https://api.github.com/users/redshiftzero/events{/privacy}", "received_events_url": "https://api.github.com/users/redshiftzero/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 68, "state": "closed", "created_at": "2017-06-06T01:31:16Z", "updated_at": "2018-03-16T21:24:40Z", "due_on": "2018-03-13T07:00:00Z", "closed_at": "2018-03-16T21:24:40Z"}, "comments": 1, "created_at": "2018-01-24T00:52:42Z", "updated_at": "2018-02-28T00:03:32Z", "closed_at": "2018-01-27T09:09:31Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "## Description\r\n\r\nThere used to be a js confirmation before resetting 2FA tokens for users but this is no longer working\r\n\r\n## Steps to Reproduce\r\n\r\n1. Sign into journalist interface as admin\r\n2. Go to admin panel and edit a user\r\n3. On the edit user page, click the button to reset the user's 2FA authentication\r\n\r\n## Expected Behavior\r\n\r\nAn alert appears, requesting the user confirm they wish to reset the 2FA token\r\n\r\n## Actual Behavior\r\n\r\nNo alert appears / no confirmation is required\r\n\r\n## Comments\r\n\r\nDiscovered during writing test cases for #2405 - there's a regression in `journalist.js`, this functionality no longer works:\r\n\r\n```\r\n  // Confirm before resetting two-factor authentication on edit user page\r\n  $('form#reset-two-factor').submit(function(event) {\r\n      return confirm(get_string(\"reset-user-mfa-confirm-string\").supplant({ username: username }));\r\n  });\r\n```", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2920/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2920/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2911", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2911/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2911/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2911/events", "html_url": "https://github.com/freedomofpress/securedrop/issues/2911", "id": 290293847, "node_id": "MDU6SXNzdWUyOTAyOTM4NDc=", "number": 2911, "title": "`make lint` doesn't \"just work\"", "user": {"login": "heartsucker", "id": 3998464, "node_id": "MDQ6VXNlcjM5OTg0NjQ=", "avatar_url": "https://avatars.githubusercontent.com/u/3998464?v=4", "gravatar_id": "", "url": "https://api.github.com/users/heartsucker", "html_url": "https://github.com/heartsucker", "followers_url": "https://api.github.com/users/heartsucker/followers", "following_url": "https://api.github.com/users/heartsucker/following{/other_user}", "gists_url": "https://api.github.com/users/heartsucker/gists{/gist_id}", "starred_url": "https://api.github.com/users/heartsucker/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/heartsucker/subscriptions", "organizations_url": "https://api.github.com/users/heartsucker/orgs", "repos_url": "https://api.github.com/users/heartsucker/repos", "events_url": "https://api.github.com/users/heartsucker/events{/privacy}", "received_events_url": "https://api.github.com/users/heartsucker/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2018-01-21T18:24:39Z", "updated_at": "2018-01-22T18:26:17Z", "closed_at": "2018-01-22T18:26:17Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "# Bug\r\n\r\n## Description\r\n\r\nI can't run `make lint` on `develop` in either vagrant or my host.\r\n\r\n## Steps to Reproduce\r\n\r\n`make lint` on `develop`\r\n\r\n## Expected Behavior\r\n\r\nThings are linted, and the command exits 0 unless there is a lint error.\r\n\r\n## Actual Behavior\r\n\r\n```\r\ncd securedrop && make lint\r\nmake[1]: Entering directory `/vagrant/securedrop'\r\nfind . -name '*.py' | xargs pylint --reports=no --errors-only --disable=import-error\r\nUsing config file /vagrant/securedrop/pylintrc\r\nTraceback (most recent call last):\r\n  File \"/usr/local/bin/pylint\", line 11, in <module>\r\n    sys.exit(run_pylint())\r\n  File \"/usr/local/lib/python2.7/dist-packages/pylint/__init__.py\", line 16, in run_pylint\r\n    Run(sys.argv[1:])\r\n  File \"/usr/local/lib/python2.7/dist-packages/pylint/lint.py\", line 1315, in __init__\r\n    linter.load_config_file()\r\n  File \"/usr/local/lib/python2.7/dist-packages/pylint/config.py\", line 678, in load_config_file\r\n    self.global_set_option(option, value)\r\n  File \"/usr/local/lib/python2.7/dist-packages/pylint/config.py\", line 576, in global_set_option\r\n    self._all_options[opt].set_option(opt, value)\r\n  File \"/usr/local/lib/python2.7/dist-packages/pylint/config.py\", line 768, in set_option\r\n    value = _validate(value, optdict, optname)\r\n  File \"/usr/local/lib/python2.7/dist-packages/pylint/config.py\", line 233, in _validate\r\n    return _call_validator(_type, optdict, name, value)\r\n  File \"/usr/local/lib/python2.7/dist-packages/pylint/config.py\", line 214, in _call_validator\r\n    return VALIDATORS[opttype](optdict, option, value)\r\n  File \"/usr/local/lib/python2.7/dist-packages/pylint/config.py\", line 204, in <lambda>\r\n    'choice': lambda opt, name, value: _choice_validator(opt['choices'], name, value),\r\n  File \"/usr/local/lib/python2.7/dist-packages/pylint/config.py\", line 161, in _choice_validator\r\n    raise optparse.OptionValueError(msg % (name, value, choices))\r\noptparse.OptionValueError: option spelling-dict: invalid value: u'en_US', should be in ['']\r\n```\r\n\r\n## Comments\r\n\r\nIf there is something special like sourcing a `venv/bin/activate`, that should be in the script.", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2911/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2911/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2908", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2908/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2908/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2908/events", "html_url": "https://github.com/freedomofpress/securedrop/issues/2908", "id": 290290628, "node_id": "MDU6SXNzdWUyOTAyOTA2Mjg=", "number": 2908, "title": "docs: s/are generally/is generally/", "user": {"login": "ghost", "id": 10137, "node_id": "MDQ6VXNlcjEwMTM3", "avatar_url": "https://avatars.githubusercontent.com/u/10137?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ghost", "html_url": "https://github.com/ghost", "followers_url": "https://api.github.com/users/ghost/followers", "following_url": "https://api.github.com/users/ghost/following{/other_user}", "gists_url": "https://api.github.com/users/ghost/gists{/gist_id}", "starred_url": "https://api.github.com/users/ghost/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ghost/subscriptions", "organizations_url": "https://api.github.com/users/ghost/orgs", "repos_url": "https://api.github.com/users/ghost/repos", "events_url": "https://api.github.com/users/ghost/events{/privacy}", "received_events_url": "https://api.github.com/users/ghost/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}, {"id": 118465787, "node_id": "MDU6TGFiZWwxMTg0NjU3ODc=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/docs", "name": "docs", "color": "d4c5f9", "default": false, "description": null}, {"id": 1320823996, "node_id": "MDU6TGFiZWwxMzIwODIzOTk2", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/good%20first%20issue", "name": "good first issue", "color": "ff479a", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2018-01-21T17:39:52Z", "updated_at": "2019-05-16T21:41:24Z", "closed_at": "2018-02-06T13:04:01Z", "author_association": "NONE", "active_lock_reason": null, "body": "# Bug\r\n\r\n## Description\r\n\r\n**Maintaining periodic backups are generally a good practice** should read **Maintaining periodic backups is generally a good practice** in [develop/docs/backup_and_restore.rst](https://github.com/freedomofpress/securedrop/blob/develop/docs/backup_and_restore.rst)\r\n", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2908/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2908/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2907", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2907/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2907/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2907/events", "html_url": "https://github.com/freedomofpress/securedrop/pull/2907", "id": 290271956, "node_id": "MDExOlB1bGxSZXF1ZXN0MTY0MTc0NjQ0", "number": 2907, "title": "fix pyenchant dependency conflict in development vm", "user": {"login": "heartsucker", "id": 3998464, "node_id": "MDQ6VXNlcjM5OTg0NjQ=", "avatar_url": "https://avatars.githubusercontent.com/u/3998464?v=4", "gravatar_id": "", "url": "https://api.github.com/users/heartsucker", "html_url": "https://github.com/heartsucker", "followers_url": "https://api.github.com/users/heartsucker/followers", "following_url": "https://api.github.com/users/heartsucker/following{/other_user}", "gists_url": "https://api.github.com/users/heartsucker/gists{/gist_id}", "starred_url": "https://api.github.com/users/heartsucker/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/heartsucker/subscriptions", "organizations_url": "https://api.github.com/users/heartsucker/orgs", "repos_url": "https://api.github.com/users/heartsucker/repos", "events_url": "https://api.github.com/users/heartsucker/events{/privacy}", "received_events_url": "https://api.github.com/users/heartsucker/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}, {"id": 660721238, "node_id": "MDU6TGFiZWw2NjA3MjEyMzg=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/goals:%20improve%20developer%20workflow", "name": "goals: improve developer workflow", "color": "0e8a16", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2018-01-21T13:15:19Z", "updated_at": "2018-01-22T09:36:51Z", "closed_at": "2018-01-22T09:29:25Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/freedomofpress/securedrop/pulls/2907", "html_url": "https://github.com/freedomofpress/securedrop/pull/2907", "diff_url": "https://github.com/freedomofpress/securedrop/pull/2907.diff", "patch_url": "https://github.com/freedomofpress/securedrop/pull/2907.patch", "merged_at": "2018-01-22T09:29:25Z"}, "body": "## Status\r\n\r\nReady for review\r\n\r\n## Description of Changes\r\n\r\nFixes #2906\r\n\r\nSplit the dev dependencies further to prevent vagrant env from requiring the `apt` package `enchant`.\r\n\r\nAlso, snuck in a fix to the `.dockerignore` that stops us from sending 400MB to the daemon (now only 70MB).\r\n\r\n## Testing\r\n\r\n`make ci-lint-image && make ci-lint && vagrant destroy -f && vagrant up`", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2907/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2907/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2906", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2906/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2906/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2906/events", "html_url": "https://github.com/freedomofpress/securedrop/issues/2906", "id": 290271789, "node_id": "MDU6SXNzdWUyOTAyNzE3ODk=", "number": 2906, "title": "Pyenchant depends on enchant and dev env is borked", "user": {"login": "heartsucker", "id": 3998464, "node_id": "MDQ6VXNlcjM5OTg0NjQ=", "avatar_url": "https://avatars.githubusercontent.com/u/3998464?v=4", "gravatar_id": "", "url": "https://api.github.com/users/heartsucker", "html_url": "https://github.com/heartsucker", "followers_url": "https://api.github.com/users/heartsucker/followers", "following_url": "https://api.github.com/users/heartsucker/following{/other_user}", "gists_url": "https://api.github.com/users/heartsucker/gists{/gist_id}", "starred_url": "https://api.github.com/users/heartsucker/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/heartsucker/subscriptions", "organizations_url": "https://api.github.com/users/heartsucker/orgs", "repos_url": "https://api.github.com/users/heartsucker/repos", "events_url": "https://api.github.com/users/heartsucker/events{/privacy}", "received_events_url": "https://api.github.com/users/heartsucker/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}, {"id": 616447641, "node_id": "MDU6TGFiZWw2MTY0NDc2NDE=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/development%20env", "name": "development env", "color": "bfd4f2", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2018-01-21T13:13:11Z", "updated_at": "2018-01-22T09:29:25Z", "closed_at": "2018-01-22T09:29:25Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "# Bug\r\n\r\n## Description\r\n\r\n`pyenchant` depends on `enchant` which is incompatible with other dev dependencies.\r\n\r\n## Steps to Reproduce\r\n\r\nRunning `vagrant up` on `develop` yields this error.\r\n\r\n```\r\n Traceback (most recent call last):\r\n File \\\"<string>\\\", line 17, in <module>\r\n File \\\"/tmp/pip_build_root/pyenchant/setup.py\\\", line 212, in <module>\r\n import enchant\r\n File \\\"enchant/__init__.py\\\", line 92, in <module>\r\n from enchant import _enchant as _e\r\n File \\\"enchant/_enchant.py\\\", line 145, in <module>\r\n raise ImportError(msg)\r\n ImportError: The 'enchant' C library was not found. Please install it via your OS package manager, or use a pre-built binary wheel from PyPI.\r\n Complete output from command python setup.py egg_info:\r\n Traceback (most recent call last):\r\n File \\\"<string>\\\", line 17, in <module>\r\n File \\\"/tmp/pip_build_root/pyenchant/setup.py\\\", line 212, in <module>\r\n import enchant\r\n File \\\"enchant/__init__.py\\\", line 92, in <module>\r\n from enchant import _enchant as _e\r\n File \\\"enchant/_enchant.py\\\", line 145, in <module\r\n raise ImportError(msg)\r\nImportError: The 'enchant' C library was not found. Please install it via your OS package manager, or use a pre-built binary wheel from PyPI.\r\n----------------------------------------\r\nCleaning up...\r\nCommand python setup.py egg_info failed with error code 1 in /tmp/pip_build_root/pyenchant\r\nStoring debug log for failure in /root/.pip/pip.log\r\n```\r\n\r\nHowever, adding `enchant` to `development_dependencies` yields this error:\r\n\r\n```\r\nTASK [app-test : Install Firefox 46.0.1 for compatibility with Selenium 2.53.6.] ***\r\nfatal: [development]: FAILED! => {\"changed\": false, \"failed\": true, \"msg\": \"Breaks existing package 'hunspell-en-us' that conflict: 'iceweasel'. But the '/opt/firefox_46.0.1+build1-0ubuntu0.14.04.3_amd64.deb' provides it via: 'gnome-www-browser,iceweasel,www-browser'\"}\r\n```\r\n\r\n## Expected Behavior\r\n\r\nI can start the dev environment.\r\n\r\n## Actual Behavior\r\n\r\nI can't\r\n\r\n## Notes\r\n\r\nThis was introduced by #2905, but I think it came from #2780 originally.", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2906/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2906/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2905", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2905/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2905/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2905/events", "html_url": "https://github.com/freedomofpress/securedrop/pull/2905", "id": 290174584, "node_id": "MDExOlB1bGxSZXF1ZXN0MTY0MTE3MDc5", "number": 2905, "title": "Fix CI environment and sync .in/.txt requirements files", "user": {"login": "heartsucker", "id": 3998464, "node_id": "MDQ6VXNlcjM5OTg0NjQ=", "avatar_url": "https://avatars.githubusercontent.com/u/3998464?v=4", "gravatar_id": "", "url": "https://api.github.com/users/heartsucker", "html_url": "https://github.com/heartsucker", "followers_url": "https://api.github.com/users/heartsucker/followers", "following_url": "https://api.github.com/users/heartsucker/following{/other_user}", "gists_url": "https://api.github.com/users/heartsucker/gists{/gist_id}", "starred_url": "https://api.github.com/users/heartsucker/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/heartsucker/subscriptions", "organizations_url": "https://api.github.com/users/heartsucker/orgs", "repos_url": "https://api.github.com/users/heartsucker/repos", "events_url": "https://api.github.com/users/heartsucker/events{/privacy}", "received_events_url": "https://api.github.com/users/heartsucker/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}, {"id": 652907032, "node_id": "MDU6TGFiZWw2NTI5MDcwMzI=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/goals:%20sick%20CI", "name": "goals: sick CI", "color": "0e8a16", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2018-01-20T08:03:14Z", "updated_at": "2018-01-22T09:37:08Z", "closed_at": "2018-01-21T09:56:35Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/freedomofpress/securedrop/pulls/2905", "html_url": "https://github.com/freedomofpress/securedrop/pull/2905", "diff_url": "https://github.com/freedomofpress/securedrop/pull/2905.diff", "patch_url": "https://github.com/freedomofpress/securedrop/pull/2905.patch", "merged_at": "2018-01-21T09:56:35Z"}, "body": "## Status\r\n\r\nReady for review\r\n\r\n# Description\r\n\r\nFixes #2896\r\nFixes #2898", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2905/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2905/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2896", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2896/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2896/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2896/events", "html_url": "https://github.com/freedomofpress/securedrop/issues/2896", "id": 290003256, "node_id": "MDU6SXNzdWUyOTAwMDMyNTY=", "number": 2896, "title": "requirements files are out of sync (.in vs. .txt)", "user": {"login": "heartsucker", "id": 3998464, "node_id": "MDQ6VXNlcjM5OTg0NjQ=", "avatar_url": "https://avatars.githubusercontent.com/u/3998464?v=4", "gravatar_id": "", "url": "https://api.github.com/users/heartsucker", "html_url": "https://github.com/heartsucker", "followers_url": "https://api.github.com/users/heartsucker/followers", "following_url": "https://api.github.com/users/heartsucker/following{/other_user}", "gists_url": "https://api.github.com/users/heartsucker/gists{/gist_id}", "starred_url": "https://api.github.com/users/heartsucker/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/heartsucker/subscriptions", "organizations_url": "https://api.github.com/users/heartsucker/orgs", "repos_url": "https://api.github.com/users/heartsucker/repos", "events_url": "https://api.github.com/users/heartsucker/events{/privacy}", "received_events_url": "https://api.github.com/users/heartsucker/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}, {"id": 192539755, "node_id": "MDU6TGFiZWwxOTI1Mzk3NTU=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/app", "name": "app", "color": "bfe5bf", "default": false, "description": null}, {"id": 475997849, "node_id": "MDU6TGFiZWw0NzU5OTc4NDk=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/tests", "name": "tests", "color": "f9d0c4", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2018-01-19T15:01:11Z", "updated_at": "2018-01-21T09:56:35Z", "closed_at": "2018-01-21T09:56:35Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "# Bug\r\n\r\n## Description\r\n\r\nNone of the `requirements.in` files have `boto` listed, but this is needed in CI. However, `boto` is still in the `requirements.txt` files.\r\n\r\nFrom circleci:\r\n\r\n```\r\n    TASK [Find security group to utilize] ******************************************\r\n    Friday 19 January 2018  14:41:53 +0000 (0:00:00.765)       0:00:16.641 ********\r\n    fatal: [localhost]: FAILED! => {\"changed\": false, \"failed\": true, \"msg\": \"boto3 required for this module\"}\r\n```\r\n\r\n## Steps to Reproduce\r\n\r\nLook in the requirements files.\r\n\r\n## Expected Behavior\r\n\r\n`boto` is in both the `.in` and `.txt` files.\r\n\r\n## Actual Behavior\r\n\r\n`boto` is only in the `.txt` files", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2896/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2896/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2894", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2894/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2894/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2894/events", "html_url": "https://github.com/freedomofpress/securedrop/pull/2894", "id": 289925970, "node_id": "MDExOlB1bGxSZXF1ZXN0MTYzOTMyMDg5", "number": 2894, "title": "i18n: add new languages securedrop-confiure.yml", "user": {"login": "ghost", "id": 10137, "node_id": "MDQ6VXNlcjEwMTM3", "avatar_url": "https://avatars.githubusercontent.com/u/10137?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ghost", "html_url": "https://github.com/ghost", "followers_url": "https://api.github.com/users/ghost/followers", "following_url": "https://api.github.com/users/ghost/following{/other_user}", "gists_url": "https://api.github.com/users/ghost/gists{/gist_id}", "starred_url": "https://api.github.com/users/ghost/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ghost/subscriptions", "organizations_url": "https://api.github.com/users/ghost/orgs", "repos_url": "https://api.github.com/users/ghost/repos", "events_url": "https://api.github.com/users/ghost/events{/privacy}", "received_events_url": "https://api.github.com/users/ghost/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}, {"id": 652906953, "node_id": "MDU6TGFiZWw2NTI5MDY5NTM=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/i18n", "name": "i18n", "color": "d4c5f9", "default": false, "description": "Anything related to translation or internationalization of SecureDrop"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/freedomofpress/securedrop/milestones/41", "html_url": "https://github.com/freedomofpress/securedrop/milestone/41", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/milestones/41/labels", "id": 3027543, "node_id": "MDk6TWlsZXN0b25lMzAyNzU0Mw==", "number": 41, "title": "0.5.2 ", "description": "", "creator": {"login": "redshiftzero", "id": 7832803, "node_id": "MDQ6VXNlcjc4MzI4MDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7832803?v=4", "gravatar_id": "", "url": "https://api.github.com/users/redshiftzero", "html_url": "https://github.com/redshiftzero", "followers_url": "https://api.github.com/users/redshiftzero/followers", "following_url": "https://api.github.com/users/redshiftzero/following{/other_user}", "gists_url": "https://api.github.com/users/redshiftzero/gists{/gist_id}", "starred_url": "https://api.github.com/users/redshiftzero/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/redshiftzero/subscriptions", "organizations_url": "https://api.github.com/users/redshiftzero/orgs", "repos_url": "https://api.github.com/users/redshiftzero/repos", "events_url": "https://api.github.com/users/redshiftzero/events{/privacy}", "received_events_url": "https://api.github.com/users/redshiftzero/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 10, "state": "closed", "created_at": "2018-01-11T02:21:42Z", "updated_at": "2018-02-15T02:46:00Z", "due_on": null, "closed_at": "2018-02-15T02:46:00Z"}, "comments": 2, "created_at": "2018-01-19T10:18:18Z", "updated_at": "2018-01-19T16:50:49Z", "closed_at": "2018-01-19T16:50:38Z", "author_association": "NONE", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/freedomofpress/securedrop/pulls/2894", "html_url": "https://github.com/freedomofpress/securedrop/pull/2894", "diff_url": "https://github.com/freedomofpress/securedrop/pull/2894.diff", "patch_url": "https://github.com/freedomofpress/securedrop/pull/2894.patch", "merged_at": "2018-01-19T16:50:38Z"}, "body": "## Status\r\n\r\nReady for review\r\n\r\n## Description of Changes\r\n\r\nAdd ar, it_IT, tr, zh_Hant to the YAML prompt used by\r\nsecuredrop-admin sdconfig\r\n\r\n## Testing\r\n\r\nVerify that each code added matches a directory in the securedrop/translations directory\r\n\r\n## Deployment\r\n\r\nN/A because it is only a message displayed to the user\r\n", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2894/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2894/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2858", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2858/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2858/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2858/events", "html_url": "https://github.com/freedomofpress/securedrop/pull/2858", "id": 288365906, "node_id": "MDExOlB1bGxSZXF1ZXN0MTYyODAwOTY5", "number": 2858, "title": "Dockerfile: add x11vnc", "user": {"login": "tmc", "id": 3977, "node_id": "MDQ6VXNlcjM5Nzc=", "avatar_url": "https://avatars.githubusercontent.com/u/3977?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tmc", "html_url": "https://github.com/tmc", "followers_url": "https://api.github.com/users/tmc/followers", "following_url": "https://api.github.com/users/tmc/following{/other_user}", "gists_url": "https://api.github.com/users/tmc/gists{/gist_id}", "starred_url": "https://api.github.com/users/tmc/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tmc/subscriptions", "organizations_url": "https://api.github.com/users/tmc/orgs", "repos_url": "https://api.github.com/users/tmc/repos", "events_url": "https://api.github.com/users/tmc/events{/privacy}", "received_events_url": "https://api.github.com/users/tmc/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}, {"id": 660721238, "node_id": "MDU6TGFiZWw2NjA3MjEyMzg=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/goals:%20improve%20developer%20workflow", "name": "goals: improve developer workflow", "color": "0e8a16", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2018-01-13T22:47:23Z", "updated_at": "2018-01-13T23:40:20Z", "closed_at": "2018-01-13T23:40:20Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/freedomofpress/securedrop/pulls/2858", "html_url": "https://github.com/freedomofpress/securedrop/pull/2858", "diff_url": "https://github.com/freedomofpress/securedrop/pull/2858.diff", "patch_url": "https://github.com/freedomofpress/securedrop/pull/2858.patch", "merged_at": "2018-01-13T23:40:19Z"}, "body": "## Status\r\n\r\nReady for review / Work in progress\r\n\r\n## Description of Changes\r\n\r\nFixes #2857\r\n\r\nChanges proposed in this pull request:\r\n\r\nDockerfile: add x11vnc\r\n\r\n## Testing\r\n\r\nrun `bin/test` or `bin/dev`", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2858/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2858/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2856", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2856/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2856/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2856/events", "html_url": "https://github.com/freedomofpress/securedrop/pull/2856", "id": 288365750, "node_id": "MDExOlB1bGxSZXF1ZXN0MTYyODAwODc5", "number": 2856, "title": "bin/test: allow running tests outside of ci", "user": {"login": "tmc", "id": 3977, "node_id": "MDQ6VXNlcjM5Nzc=", "avatar_url": "https://avatars.githubusercontent.com/u/3977?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tmc", "html_url": "https://github.com/tmc", "followers_url": "https://api.github.com/users/tmc/followers", "following_url": "https://api.github.com/users/tmc/following{/other_user}", "gists_url": "https://api.github.com/users/tmc/gists{/gist_id}", "starred_url": "https://api.github.com/users/tmc/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tmc/subscriptions", "organizations_url": "https://api.github.com/users/tmc/orgs", "repos_url": "https://api.github.com/users/tmc/repos", "events_url": "https://api.github.com/users/tmc/events{/privacy}", "received_events_url": "https://api.github.com/users/tmc/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}, {"id": 660721238, "node_id": "MDU6TGFiZWw2NjA3MjEyMzg=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/goals:%20improve%20developer%20workflow", "name": "goals: improve developer workflow", "color": "0e8a16", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2018-01-13T22:44:26Z", "updated_at": "2018-01-13T23:40:32Z", "closed_at": "2018-01-13T23:40:32Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/freedomofpress/securedrop/pulls/2856", "html_url": "https://github.com/freedomofpress/securedrop/pull/2856", "diff_url": "https://github.com/freedomofpress/securedrop/pull/2856.diff", "patch_url": "https://github.com/freedomofpress/securedrop/pull/2856.patch", "merged_at": "2018-01-13T23:40:32Z"}, "body": "## Status\r\n\r\nReady for review\r\n\r\n## Description of Changes\r\n\r\nFixes #2855\r\n\r\nChanges proposed in this pull request:\r\nbin/test: allow running tests outside of ci\r\n\r\n## Testing\r\n\r\nrun `securedrop/bin/test` outside of CI.", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2856/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2856/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2854", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2854/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2854/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2854/events", "html_url": "https://github.com/freedomofpress/securedrop/pull/2854", "id": 288342368, "node_id": "MDExOlB1bGxSZXF1ZXN0MTYyNzg3Mjk0", "number": 2854, "title": "[0.5.1] app: always chmod u+w the logo in postinst", "user": {"login": "ghost", "id": 10137, "node_id": "MDQ6VXNlcjEwMTM3", "avatar_url": "https://avatars.githubusercontent.com/u/10137?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ghost", "html_url": "https://github.com/ghost", "followers_url": "https://api.github.com/users/ghost/followers", "following_url": "https://api.github.com/users/ghost/following{/other_user}", "gists_url": "https://api.github.com/users/ghost/gists{/gist_id}", "starred_url": "https://api.github.com/users/ghost/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ghost/subscriptions", "organizations_url": "https://api.github.com/users/ghost/orgs", "repos_url": "https://api.github.com/users/ghost/repos", "events_url": "https://api.github.com/users/ghost/events{/privacy}", "received_events_url": "https://api.github.com/users/ghost/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}, {"id": 192539287, "node_id": "MDU6TGFiZWwxOTI1MzkyODc=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/ops/deployment", "name": "ops/deployment", "color": "c7def8", "default": false, "description": null}, {"id": 475977470, "node_id": "MDU6TGFiZWw0NzU5Nzc0NzA=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/journalist%20interface%20(JI)", "name": "journalist interface (JI)", "color": "f9d0c4", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/freedomofpress/securedrop/milestones/37", "html_url": "https://github.com/freedomofpress/securedrop/milestone/37", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/milestones/37/labels", "id": 2945103, "node_id": "MDk6TWlsZXN0b25lMjk0NTEwMw==", "number": 37, "title": "0.5.1", "description": "Tor apt repo", "creator": {"login": "redshiftzero", "id": 7832803, "node_id": "MDQ6VXNlcjc4MzI4MDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7832803?v=4", "gravatar_id": "", "url": "https://api.github.com/users/redshiftzero", "html_url": "https://github.com/redshiftzero", "followers_url": "https://api.github.com/users/redshiftzero/followers", "following_url": "https://api.github.com/users/redshiftzero/following{/other_user}", "gists_url": "https://api.github.com/users/redshiftzero/gists{/gist_id}", "starred_url": "https://api.github.com/users/redshiftzero/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/redshiftzero/subscriptions", "organizations_url": "https://api.github.com/users/redshiftzero/orgs", "repos_url": "https://api.github.com/users/redshiftzero/repos", "events_url": "https://api.github.com/users/redshiftzero/events{/privacy}", "received_events_url": "https://api.github.com/users/redshiftzero/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 28, "state": "closed", "created_at": "2017-11-28T23:08:16Z", "updated_at": "2018-01-26T05:26:23Z", "due_on": "2018-01-16T08:00:00Z", "closed_at": "2018-01-26T05:26:23Z"}, "comments": 1, "created_at": "2018-01-13T16:50:46Z", "updated_at": "2018-01-13T23:27:16Z", "closed_at": "2018-01-13T23:27:10Z", "author_association": "NONE", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/freedomofpress/securedrop/pulls/2854", "html_url": "https://github.com/freedomofpress/securedrop/pull/2854", "diff_url": "https://github.com/freedomofpress/securedrop/pull/2854.diff", "patch_url": "https://github.com/freedomofpress/securedrop/pull/2854.patch", "merged_at": "2018-01-13T23:27:10Z"}, "body": "## Status\r\n\r\nReady for review\r\n\r\n## Description of Changes\r\n\r\nFixes #2853\r\n\r\nPrior to 0.5.1 a custom logo was installed with u-w. Now that the\r\njournalist app can write a new logo, this is a problem and write\r\npermissions must be restored.\r\n\r\nWe chmod u+w unconditionaly because it is cheap although it will be\r\nuseless for upgrades after 0.5.1. And it will help people upgrading\r\nfrom a version < 0.5.1 directly to a version > 0.5.1.\r\n\r\nAlso get rid of a test that prepared a future custom logo test and\r\nbecame obsolete.\r\n\r\n## Testing\r\n\r\nFollow the steps to reproduce from https://github.com/freedomofpress/securedrop/issues/2853\r\n\r\n## Deployment\r\n\r\nFixes a deployment bug (see testing).\r\n", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2854/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2854/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2853", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2853/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2853/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2853/events", "html_url": "https://github.com/freedomofpress/securedrop/issues/2853", "id": 288335384, "node_id": "MDU6SXNzdWUyODgzMzUzODQ=", "number": 2853, "title": "[0.5.1] Cannot change logo in instance config when instance was provisioned with custom logo at install-time", "user": {"login": "emkll", "id": 15223328, "node_id": "MDQ6VXNlcjE1MjIzMzI4", "avatar_url": "https://avatars.githubusercontent.com/u/15223328?v=4", "gravatar_id": "", "url": "https://api.github.com/users/emkll", "html_url": "https://github.com/emkll", "followers_url": "https://api.github.com/users/emkll/followers", "following_url": "https://api.github.com/users/emkll/following{/other_user}", "gists_url": "https://api.github.com/users/emkll/gists{/gist_id}", "starred_url": "https://api.github.com/users/emkll/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/emkll/subscriptions", "organizations_url": "https://api.github.com/users/emkll/orgs", "repos_url": "https://api.github.com/users/emkll/repos", "events_url": "https://api.github.com/users/emkll/events{/privacy}", "received_events_url": "https://api.github.com/users/emkll/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}, {"id": 385585080, "node_id": "MDU6TGFiZWwzODU1ODUwODA=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/QA:%20Release", "name": "QA: Release", "color": "fbca04", "default": false, "description": null}, {"id": 475977470, "node_id": "MDU6TGFiZWw0NzU5Nzc0NzA=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/journalist%20interface%20(JI)", "name": "journalist interface (JI)", "color": "f9d0c4", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2018-01-13T15:03:32Z", "updated_at": "2018-07-29T09:54:23Z", "closed_at": "2018-01-13T23:50:46Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "# Bug\r\n\r\n## Description\r\nSecureDrop logo is the file at `/var/www/securedrop/static/i/logo.png`\r\n\r\nWhen using the default SecureDrop logo at install-time, permissions are\r\n```\r\n# ls -la /var/www/securedrop/static/i/logo.png\r\n-rw-r--r-- 1 www-data www-data   864 Nov 21 23:35 logo.png\r\n```\r\nWhen the `securedrop_header_image` variable in `group_vars/all/site-specific` is set with a different image, files are uploaded with different permissions\r\n```\r\n# ls -la /var/www/securedrop/static/i/logo.png\r\n-r-------- 1 www-data www-data 12506 Jan 13 13:49 logo.png\r\n```\r\nAs such, the Instance Configuration tool cannot update the image as permissions on `/var/www/securedrop/static/i/logo.png` and an `IOError` is thrown`:\r\n```\r\n[Sat Jan 13 13:19:41.407386 2018] [:error] [pid 1222:tid 2687130289920] [remote 127.0.0.1:35750] [2018-01-13 13:19:41,404] ERROR in app: Exception on /admin/config [POST]\r\n[Sat Jan 13 13:19:41.407632 2018] [:error] [pid 1222:tid 2687130289920] [remote 127.0.0.1:35750] Traceback (most recent call last):\r\n[Sat Jan 13 13:19:41.407715 2018] [:error] [pid 1222:tid 2687130289920] [remote 127.0.0.1:35750]   File \"/usr/local/lib/python2.7/dist-packages/flask/app.py\", line 1982, in wsgi_app\r\n[Sat Jan 13 13:19:41.407790 2018] [:error] [pid 1222:tid 2687130289920] [remote 127.0.0.1:35750]     response = self.full_dispatch_request()\r\n[Sat Jan 13 13:19:41.407865 2018] [:error] [pid 1222:tid 2687130289920] [remote 127.0.0.1:35750]   File \"/usr/local/lib/python2.7/dist-packages/flask/app.py\", line 1614, in full_dispatch_request\r\n[Sat Jan 13 13:19:41.407939 2018] [:error] [pid 1222:tid 2687130289920] [remote 127.0.0.1:35750]     rv = self.handle_user_exception(e)\r\n[Sat Jan 13 13:19:41.408009 2018] [:error] [pid 1222:tid 2687130289920] [remote 127.0.0.1:35750]   File \"/usr/local/lib/python2.7/dist-packages/flask/app.py\", line 1517, in handle_user_exception\r\n[Sat Jan 13 13:19:41.408082 2018] [:error] [pid 1222:tid 2687130289920] [remote 127.0.0.1:35750]     reraise(exc_type, exc_value, tb)\r\n[Sat Jan 13 13:19:41.408153 2018] [:error] [pid 1222:tid 2687130289920] [remote 127.0.0.1:35750]   File \"/usr/local/lib/python2.7/dist-packages/flask/app.py\", line 1612, in full_dispatch_request\r\n[Sat Jan 13 13:19:41.408225 2018] [:error] [pid 1222:tid 2687130289920] [remote 127.0.0.1:35750]     rv = self.dispatch_request()\r\n[Sat Jan 13 13:19:41.408295 2018] [:error] [pid 1222:tid 2687130289920] [remote 127.0.0.1:35750]   File \"/usr/local/lib/python2.7/dist-packages/flask/app.py\", line 1598, in dispatch_request\r\n[Sat Jan 13 13:19:41.408370 2018] [:error] [pid 1222:tid 2687130289920] [remote 127.0.0.1:35750]     return self.view_functions[rule.endpoint](**req.view_args)\r\n[Sat Jan 13 13:19:41.408442 2018] [:error] [pid 1222:tid 2687130289920] [remote 127.0.0.1:35750]   File \"/var/www/securedrop/journalist_app/decorators.py\", line 14, in wrapper\r\n[Sat Jan 13 13:19:41.408513 2018] [:error] [pid 1222:tid 2687130289920] [remote 127.0.0.1:35750]     return func(*args, **kwargs)\r\n[Sat Jan 13 13:19:41.408585 2018] [:error] [pid 1222:tid 2687130289920] [remote 127.0.0.1:35750]   File \"/var/www/securedrop/journalist_app/admin.py\", line 36, in manage_config\r\n[Sat Jan 13 13:19:41.408657 2018] [:error] [pid 1222:tid 2687130289920] [remote 127.0.0.1:35750]     f.save(static_filepath)\r\n[Sat Jan 13 13:19:41.408727 2018] [:error] [pid 1222:tid 2687130289920] [remote 127.0.0.1:35750]   File \"/usr/local/lib/python2.7/dist-packages/werkzeug/datastructures.py\", line 2703, in save\r\n[Sat Jan 13 13:19:41.408800 2018] [:error] [pid 1222:tid 2687130289920] [remote 127.0.0.1:35750]     dst = open(dst, 'wb')\r\n[Sat Jan 13 13:19:41.408870 2018] [:error] [pid 1222:tid 2687130289920] [remote 127.0.0.1:35750] IOError: [Errno 13] Permission denied: '/var/www/securedrop/static/i/logo.png'\r\n```\r\n## Steps to Reproduce\r\n\r\n- Set custom logo in `group_vars/all/site-specific` via `securedrop_header_image`\r\n- Provision SecureDrop 0.5 prod vms\r\n- observe permissions of `/var/www/securedrop/static/i/logo.png` on app server\r\n- Update to 0.5.1-rc3\r\n- observe permissions of `/var/www/securedrop/static/i/logo.png`\r\n- Navigate to Journalist interface, Admin, instance config and attempt to change logo\r\n- An error 500 occurs.\r\n\r\n## Expected Behavior\r\n\r\nImage should be changed and error 500 should not occur\r\n## Actual Behavior\r\n\r\nImage is not changed and error 500 occurs.\r\n## Comments\r\nIf this bug is reproducible, I think it will need to be fixed in 2 distinct places:\r\n\r\n- provisioning logic should be fixed to have consistent permissions at install time\r\n- 0.5.1 postinst script should `chmod 644 /var/www/securedrop/static/i/logo.png`", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2853/reactions", "total_count": 1, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 1, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2853/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2850", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2850/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2850/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2850/events", "html_url": "https://github.com/freedomofpress/securedrop/pull/2850", "id": 288319047, "node_id": "MDExOlB1bGxSZXF1ZXN0MTYyNzc0OTEw", "number": 2850, "title": "[0.5.1] app: restore logo", "user": {"login": "ghost", "id": 10137, "node_id": "MDQ6VXNlcjEwMTM3", "avatar_url": "https://avatars.githubusercontent.com/u/10137?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ghost", "html_url": "https://github.com/ghost", "followers_url": "https://api.github.com/users/ghost/followers", "following_url": "https://api.github.com/users/ghost/following{/other_user}", "gists_url": "https://api.github.com/users/ghost/gists{/gist_id}", "starred_url": "https://api.github.com/users/ghost/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ghost/subscriptions", "organizations_url": "https://api.github.com/users/ghost/orgs", "repos_url": "https://api.github.com/users/ghost/repos", "events_url": "https://api.github.com/users/ghost/events{/privacy}", "received_events_url": "https://api.github.com/users/ghost/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}, {"id": 192539755, "node_id": "MDU6TGFiZWwxOTI1Mzk3NTU=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/app", "name": "app", "color": "bfe5bf", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/freedomofpress/securedrop/milestones/37", "html_url": "https://github.com/freedomofpress/securedrop/milestone/37", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/milestones/37/labels", "id": 2945103, "node_id": "MDk6TWlsZXN0b25lMjk0NTEwMw==", "number": 37, "title": "0.5.1", "description": "Tor apt repo", "creator": {"login": "redshiftzero", "id": 7832803, "node_id": "MDQ6VXNlcjc4MzI4MDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7832803?v=4", "gravatar_id": "", "url": "https://api.github.com/users/redshiftzero", "html_url": "https://github.com/redshiftzero", "followers_url": "https://api.github.com/users/redshiftzero/followers", "following_url": "https://api.github.com/users/redshiftzero/following{/other_user}", "gists_url": "https://api.github.com/users/redshiftzero/gists{/gist_id}", "starred_url": "https://api.github.com/users/redshiftzero/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/redshiftzero/subscriptions", "organizations_url": "https://api.github.com/users/redshiftzero/orgs", "repos_url": "https://api.github.com/users/redshiftzero/repos", "events_url": "https://api.github.com/users/redshiftzero/events{/privacy}", "received_events_url": "https://api.github.com/users/redshiftzero/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 28, "state": "closed", "created_at": "2017-11-28T23:08:16Z", "updated_at": "2018-01-26T05:26:23Z", "due_on": "2018-01-16T08:00:00Z", "closed_at": "2018-01-26T05:26:23Z"}, "comments": 1, "created_at": "2018-01-13T10:33:13Z", "updated_at": "2018-01-15T11:17:09Z", "closed_at": "2018-01-13T11:16:03Z", "author_association": "NONE", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/freedomofpress/securedrop/pulls/2850", "html_url": "https://github.com/freedomofpress/securedrop/pull/2850", "diff_url": "https://github.com/freedomofpress/securedrop/pull/2850.diff", "patch_url": "https://github.com/freedomofpress/securedrop/pull/2850.patch", "merged_at": "2018-01-13T11:16:03Z"}, "body": "## Status\r\n\r\nReady for review\r\n\r\n## Description of Changes\r\n\r\nIt was inadvertently changed in 4a0a3e8fbed5dfefdc0876e80871126cecc8ece0\r\n\r\n## Testing\r\n\r\nN/A\r\n\r\n## Deployment\r\n\r\nN/A\r\n", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2850/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2850/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2849", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2849/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2849/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2849/events", "html_url": "https://github.com/freedomofpress/securedrop/issues/2849", "id": 288317223, "node_id": "MDU6SXNzdWUyODgzMTcyMjM=", "number": 2849, "title": "tests: possible test_integration.py race condition on GPG key", "user": {"login": "ghost", "id": 10137, "node_id": "MDQ6VXNlcjEwMTM3", "avatar_url": "https://avatars.githubusercontent.com/u/10137?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ghost", "html_url": "https://github.com/ghost", "followers_url": "https://api.github.com/users/ghost/followers", "following_url": "https://api.github.com/users/ghost/following{/other_user}", "gists_url": "https://api.github.com/users/ghost/gists{/gist_id}", "starred_url": "https://api.github.com/users/ghost/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ghost/subscriptions", "organizations_url": "https://api.github.com/users/ghost/orgs", "repos_url": "https://api.github.com/users/ghost/repos", "events_url": "https://api.github.com/users/ghost/events{/privacy}", "received_events_url": "https://api.github.com/users/ghost/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}, {"id": 475997849, "node_id": "MDU6TGFiZWw0NzU5OTc4NDk=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/tests", "name": "tests", "color": "f9d0c4", "default": false, "description": null}, {"id": 495896968, "node_id": "MDU6TGFiZWw0OTU4OTY5Njg=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/unable%20to%20reproduce", "name": "unable to reproduce", "color": "fbca04", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2018-01-13T09:56:44Z", "updated_at": "2018-03-27T21:33:47Z", "closed_at": "2018-03-27T21:33:47Z", "author_association": "NONE", "active_lock_reason": null, "body": "# Bug\r\n\r\n## Description\r\n\r\nI think this is a race condition and first seen it happen at https://circleci.com/gh/freedomofpress/securedrop/6410?utm_campaign=vcs-integration-link&utm_medium=referral&utm_source=github-build-link\r\n\r\n<pre>\r\nAssertionError: Could not decrypt msg with key, gpg says: [GNUPG:] ENC_TO C154976902EEB545 1 0 [GNUPG:] ENC_TO C3E7C4C0A2201B2A 1 0 gpg: encrypted with RSA key, ID A2201B2A [GNUPG:] NO_SECKEY C3E7C4C0A2201B2A gpg: encrypted with 1024-bit RSA key, ID 02EEB545, created 2018-01-13       \"Autogenerated Key \" [GNUPG:] NO_SECKEY C154976902EEB545 [GNUPG:] BEGIN_DECRYPTION [GNUPG:] DECRYPTION_FAILED gpg: decryption failed: secret key not available [GNUPG:] END_DECRYPTION\r\nself = \r\n\r\n    def test_reply_normal(self):\r\n>       self.helper_test_reply(\"This is a test reply.\", True)\r\n\r\ntests/test_integration.py:239: \r\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \r\ntests/test_integration.py:379: in helper_test_reply\r\n    codename)\r\ntests/test_integration.py:286: in _can_decrypt_with_key\r\n    decrypted_data.stderr))\r\nE   AssertionError: Could not decrypt msg with key, gpg says: [GNUPG:] ENC_TO C154976902EEB545 1 0\r\nE   [GNUPG:] ENC_TO C3E7C4C0A2201B2A 1 0\r\nE   gpg: encrypted with RSA key, ID A2201B2A\r\nE   [GNUPG:] NO_SECKEY C3E7C4C0A2201B2A\r\nE   gpg: encrypted with 1024-bit RSA key, ID 02EEB545, created 2018-01-13\r\nE         \"Autogenerated Key \"\r\nE   [GNUPG:] NO_SECKEY C154976902EEB545\r\nE   [GNUPG:] BEGIN_DECRYPTION\r\nE   [GNUPG:] DECRYPTION_FAILED\r\nE   gpg: decryption failed: secret key not available\r\nE   [GNUPG:] END_DECRYPTION\r\n</pre>\r\n\r\n## Steps to Reproduce\r\n\r\nNo idea how to reproduce. Looking at the code the race that could occur because the GPG key generation of the source is async is guarded properly.\r\n\r\n## Expected Behavior\r\n\r\nNo race, even rare.\r\n\r\n## Actual Behavior\r\n\r\nThe error showed once in the past 3 months. If someone remembers another occurence, please update.\r\n\r\n## Comments\r\n\r\nThis can be closed if it does not happen in the next six months.\r\n", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2849/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2849/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2845", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2845/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2845/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2845/events", "html_url": "https://github.com/freedomofpress/securedrop/pull/2845", "id": 288285324, "node_id": "MDExOlB1bGxSZXF1ZXN0MTYyNzU0Mzcx", "number": 2845, "title": "[0.5.1] Use absolute path in autoversion Jinja2 filter", "user": {"login": "redshiftzero", "id": 7832803, "node_id": "MDQ6VXNlcjc4MzI4MDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7832803?v=4", "gravatar_id": "", "url": "https://api.github.com/users/redshiftzero", "html_url": "https://github.com/redshiftzero", "followers_url": "https://api.github.com/users/redshiftzero/followers", "following_url": "https://api.github.com/users/redshiftzero/following{/other_user}", "gists_url": "https://api.github.com/users/redshiftzero/gists{/gist_id}", "starred_url": "https://api.github.com/users/redshiftzero/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/redshiftzero/subscriptions", "organizations_url": "https://api.github.com/users/redshiftzero/orgs", "repos_url": "https://api.github.com/users/redshiftzero/repos", "events_url": "https://api.github.com/users/redshiftzero/events{/privacy}", "received_events_url": "https://api.github.com/users/redshiftzero/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}, {"id": 385585080, "node_id": "MDU6TGFiZWwzODU1ODUwODA=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/QA:%20Release", "name": "QA: Release", "color": "fbca04", "default": false, "description": null}, {"id": 652909251, "node_id": "MDU6TGFiZWw2NTI5MDkyNTE=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/goals:%20journalist%20experience", "name": "goals: journalist experience", "color": "0e8a16", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/freedomofpress/securedrop/milestones/37", "html_url": "https://github.com/freedomofpress/securedrop/milestone/37", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/milestones/37/labels", "id": 2945103, "node_id": "MDk6TWlsZXN0b25lMjk0NTEwMw==", "number": 37, "title": "0.5.1", "description": "Tor apt repo", "creator": {"login": "redshiftzero", "id": 7832803, "node_id": "MDQ6VXNlcjc4MzI4MDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7832803?v=4", "gravatar_id": "", "url": "https://api.github.com/users/redshiftzero", "html_url": "https://github.com/redshiftzero", "followers_url": "https://api.github.com/users/redshiftzero/followers", "following_url": "https://api.github.com/users/redshiftzero/following{/other_user}", "gists_url": "https://api.github.com/users/redshiftzero/gists{/gist_id}", "starred_url": "https://api.github.com/users/redshiftzero/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/redshiftzero/subscriptions", "organizations_url": "https://api.github.com/users/redshiftzero/orgs", "repos_url": "https://api.github.com/users/redshiftzero/repos", "events_url": "https://api.github.com/users/redshiftzero/events{/privacy}", "received_events_url": "https://api.github.com/users/redshiftzero/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 28, "state": "closed", "created_at": "2017-11-28T23:08:16Z", "updated_at": "2018-01-26T05:26:23Z", "due_on": "2018-01-16T08:00:00Z", "closed_at": "2018-01-26T05:26:23Z"}, "comments": 3, "created_at": "2018-01-13T00:36:24Z", "updated_at": "2018-04-10T15:05:52Z", "closed_at": "2018-01-13T09:42:00Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/freedomofpress/securedrop/pulls/2845", "html_url": "https://github.com/freedomofpress/securedrop/pull/2845", "diff_url": "https://github.com/freedomofpress/securedrop/pull/2845.diff", "patch_url": "https://github.com/freedomofpress/securedrop/pull/2845.patch", "merged_at": "2018-01-13T09:42:00Z"}, "body": "## Status\r\n\r\nReady for review\r\n\r\n## Description of Changes\r\n\r\nFixes item 2 in #2844. This resolves an issue where a relative path caused the autoversioning to fail in staging and prod - see [here](https://github.com/freedomofpress/securedrop/issues/2844#issuecomment-357390944) for full details.\r\n\r\n## Testing\r\n\r\nIn staging, verify that the logo update does not require a hard refresh - the logo in the form should update immediately to provide feedback that it worked.  \r\n\r\n## Deployment\r\n\r\nNo issues\r\n\r\n## Checklist\r\n\r\n### If you made changes to the app code:\r\n\r\n- [x] Unit and functional tests pass on the development VM\r\n", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2845/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2845/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2843", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2843/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2843/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2843/events", "html_url": "https://github.com/freedomofpress/securedrop/pull/2843", "id": 288089275, "node_id": "MDExOlB1bGxSZXF1ZXN0MTYyNjA3Nzg2", "number": 2843, "title": "tests: wait up to 60 seconds to generate a GPG key", "user": {"login": "ghost", "id": 10137, "node_id": "MDQ6VXNlcjEwMTM3", "avatar_url": "https://avatars.githubusercontent.com/u/10137?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ghost", "html_url": "https://github.com/ghost", "followers_url": "https://api.github.com/users/ghost/followers", "following_url": "https://api.github.com/users/ghost/following{/other_user}", "gists_url": "https://api.github.com/users/ghost/gists{/gist_id}", "starred_url": "https://api.github.com/users/ghost/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ghost/subscriptions", "organizations_url": "https://api.github.com/users/ghost/orgs", "repos_url": "https://api.github.com/users/ghost/repos", "events_url": "https://api.github.com/users/ghost/events{/privacy}", "received_events_url": "https://api.github.com/users/ghost/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}, {"id": 475996783, "node_id": "MDU6TGFiZWw0NzU5OTY3ODM=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/functional_tests", "name": "functional_tests", "color": "f9d0c4", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/freedomofpress/securedrop/milestones/37", "html_url": "https://github.com/freedomofpress/securedrop/milestone/37", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/milestones/37/labels", "id": 2945103, "node_id": "MDk6TWlsZXN0b25lMjk0NTEwMw==", "number": 37, "title": "0.5.1", "description": "Tor apt repo", "creator": {"login": "redshiftzero", "id": 7832803, "node_id": "MDQ6VXNlcjc4MzI4MDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7832803?v=4", "gravatar_id": "", "url": "https://api.github.com/users/redshiftzero", "html_url": "https://github.com/redshiftzero", "followers_url": "https://api.github.com/users/redshiftzero/followers", "following_url": "https://api.github.com/users/redshiftzero/following{/other_user}", "gists_url": "https://api.github.com/users/redshiftzero/gists{/gist_id}", "starred_url": "https://api.github.com/users/redshiftzero/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/redshiftzero/subscriptions", "organizations_url": "https://api.github.com/users/redshiftzero/orgs", "repos_url": "https://api.github.com/users/redshiftzero/repos", "events_url": "https://api.github.com/users/redshiftzero/events{/privacy}", "received_events_url": "https://api.github.com/users/redshiftzero/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 28, "state": "closed", "created_at": "2017-11-28T23:08:16Z", "updated_at": "2018-01-26T05:26:23Z", "due_on": "2018-01-16T08:00:00Z", "closed_at": "2018-01-26T05:26:23Z"}, "comments": 1, "created_at": "2018-01-12T11:25:59Z", "updated_at": "2018-01-12T18:25:24Z", "closed_at": "2018-01-12T17:50:54Z", "author_association": "NONE", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/freedomofpress/securedrop/pulls/2843", "html_url": "https://github.com/freedomofpress/securedrop/pull/2843", "diff_url": "https://github.com/freedomofpress/securedrop/pull/2843.diff", "patch_url": "https://github.com/freedomofpress/securedrop/pull/2843.patch", "merged_at": "2018-01-12T17:50:54Z"}, "body": "## Status\r\n\r\nReady for review\r\n\r\n## Description of Changes\r\n\r\nIf the machine is slow, 5 seconds may not be enough. Since there is no entropy shortage (urandom in use), 60 seconds should be plenty.\r\n\r\n## Testing\r\n\r\nUse a slow machine and verify functional tests pass.\r\n\r\n## Deployment\r\n\r\nN/A\r\n\r\n## Checklist\r\n\r\n### If you made changes to the app code:\r\n\r\n- [x] Unit and functional tests pass on the development VM\r\n", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2843/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2843/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2838", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2838/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2838/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2838/events", "html_url": "https://github.com/freedomofpress/securedrop/pull/2838", "id": 287886216, "node_id": "MDExOlB1bGxSZXF1ZXN0MTYyNDU4NDU5", "number": 2838, "title": "[0.5.1] Fix error in alert ID for ossec agent start alert", "user": {"login": "emkll", "id": 15223328, "node_id": "MDQ6VXNlcjE1MjIzMzI4", "avatar_url": "https://avatars.githubusercontent.com/u/15223328?v=4", "gravatar_id": "", "url": "https://api.github.com/users/emkll", "html_url": "https://github.com/emkll", "followers_url": "https://api.github.com/users/emkll/followers", "following_url": "https://api.github.com/users/emkll/following{/other_user}", "gists_url": "https://api.github.com/users/emkll/gists{/gist_id}", "starred_url": "https://api.github.com/users/emkll/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/emkll/subscriptions", "organizations_url": "https://api.github.com/users/emkll/orgs", "repos_url": "https://api.github.com/users/emkll/repos", "events_url": "https://api.github.com/users/emkll/events{/privacy}", "received_events_url": "https://api.github.com/users/emkll/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}, {"id": 192539287, "node_id": "MDU6TGFiZWwxOTI1MzkyODc=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/ops/deployment", "name": "ops/deployment", "color": "c7def8", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/freedomofpress/securedrop/milestones/37", "html_url": "https://github.com/freedomofpress/securedrop/milestone/37", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/milestones/37/labels", "id": 2945103, "node_id": "MDk6TWlsZXN0b25lMjk0NTEwMw==", "number": 37, "title": "0.5.1", "description": "Tor apt repo", "creator": {"login": "redshiftzero", "id": 7832803, "node_id": "MDQ6VXNlcjc4MzI4MDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7832803?v=4", "gravatar_id": "", "url": "https://api.github.com/users/redshiftzero", "html_url": "https://github.com/redshiftzero", "followers_url": "https://api.github.com/users/redshiftzero/followers", "following_url": "https://api.github.com/users/redshiftzero/following{/other_user}", "gists_url": "https://api.github.com/users/redshiftzero/gists{/gist_id}", "starred_url": "https://api.github.com/users/redshiftzero/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/redshiftzero/subscriptions", "organizations_url": "https://api.github.com/users/redshiftzero/orgs", "repos_url": "https://api.github.com/users/redshiftzero/repos", "events_url": "https://api.github.com/users/redshiftzero/events{/privacy}", "received_events_url": "https://api.github.com/users/redshiftzero/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 28, "state": "closed", "created_at": "2017-11-28T23:08:16Z", "updated_at": "2018-01-26T05:26:23Z", "due_on": "2018-01-16T08:00:00Z", "closed_at": "2018-01-26T05:26:23Z"}, "comments": 0, "created_at": "2018-01-11T18:51:41Z", "updated_at": "2018-01-12T21:08:59Z", "closed_at": "2018-01-12T21:08:56Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/freedomofpress/securedrop/pulls/2838", "html_url": "https://github.com/freedomofpress/securedrop/pull/2838", "diff_url": "https://github.com/freedomofpress/securedrop/pull/2838.diff", "patch_url": "https://github.com/freedomofpress/securedrop/pull/2838.patch", "merged_at": "2018-01-12T21:08:56Z"}, "body": "## Status\r\n\r\nReady for review\r\n\r\n## Description of Changes\r\nFixes #2839 \r\nAlerts for ossec agent correctly suppressed on boot.\r\n\r\nChanges proposed in this pull request:\r\n\r\n## Testing\r\n\r\nReboot server\r\nObserve no \"Ossec agent started\" alerts on boot. Also ensure that no additional/other emails are sent at boot-time.\r\n\r\n## Deployment\r\n\r\nAny special considerations for deployment? Consider both:\r\n\r\n1. Upgrading existing production instances.\r\n2. New installs.\r\n\r\n## Checklist\r\n\r\n### If you made changes to the app code:\r\n\r\n- [ ] Unit and functional tests pass on the development VM\r\n\r\n### If you made changes to the system configuration:\r\n\r\n- [ ] [Configuration tests](https://docs.securedrop.org/en/latest/development/testing_configuration_tests.html) pass\r\n\r\n### If you made changes to documentation:\r\n\r\n- [ ] Doc linting passed locally\r\n", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2838/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2838/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2837", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2837/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2837/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2837/events", "html_url": "https://github.com/freedomofpress/securedrop/pull/2837", "id": 287832289, "node_id": "MDExOlB1bGxSZXF1ZXN0MTYyNDE3Nzg0", "number": 2837, "title": "[0.5.1] tests: wait for source key generation in functional tests", "user": {"login": "ghost", "id": 10137, "node_id": "MDQ6VXNlcjEwMTM3", "avatar_url": "https://avatars.githubusercontent.com/u/10137?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ghost", "html_url": "https://github.com/ghost", "followers_url": "https://api.github.com/users/ghost/followers", "following_url": "https://api.github.com/users/ghost/following{/other_user}", "gists_url": "https://api.github.com/users/ghost/gists{/gist_id}", "starred_url": "https://api.github.com/users/ghost/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ghost/subscriptions", "organizations_url": "https://api.github.com/users/ghost/orgs", "repos_url": "https://api.github.com/users/ghost/repos", "events_url": "https://api.github.com/users/ghost/events{/privacy}", "received_events_url": "https://api.github.com/users/ghost/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}, {"id": 475996783, "node_id": "MDU6TGFiZWw0NzU5OTY3ODM=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/functional_tests", "name": "functional_tests", "color": "f9d0c4", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/freedomofpress/securedrop/milestones/37", "html_url": "https://github.com/freedomofpress/securedrop/milestone/37", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/milestones/37/labels", "id": 2945103, "node_id": "MDk6TWlsZXN0b25lMjk0NTEwMw==", "number": 37, "title": "0.5.1", "description": "Tor apt repo", "creator": {"login": "redshiftzero", "id": 7832803, "node_id": "MDQ6VXNlcjc4MzI4MDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7832803?v=4", "gravatar_id": "", "url": "https://api.github.com/users/redshiftzero", "html_url": "https://github.com/redshiftzero", "followers_url": "https://api.github.com/users/redshiftzero/followers", "following_url": "https://api.github.com/users/redshiftzero/following{/other_user}", "gists_url": "https://api.github.com/users/redshiftzero/gists{/gist_id}", "starred_url": "https://api.github.com/users/redshiftzero/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/redshiftzero/subscriptions", "organizations_url": "https://api.github.com/users/redshiftzero/orgs", "repos_url": "https://api.github.com/users/redshiftzero/repos", "events_url": "https://api.github.com/users/redshiftzero/events{/privacy}", "received_events_url": "https://api.github.com/users/redshiftzero/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 28, "state": "closed", "created_at": "2017-11-28T23:08:16Z", "updated_at": "2018-01-26T05:26:23Z", "due_on": "2018-01-16T08:00:00Z", "closed_at": "2018-01-26T05:26:23Z"}, "comments": 3, "created_at": "2018-01-11T16:00:36Z", "updated_at": "2018-01-11T19:58:10Z", "closed_at": "2018-01-11T18:36:44Z", "author_association": "NONE", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/freedomofpress/securedrop/pulls/2837", "html_url": "https://github.com/freedomofpress/securedrop/pull/2837", "diff_url": "https://github.com/freedomofpress/securedrop/pull/2837.diff", "patch_url": "https://github.com/freedomofpress/securedrop/pull/2837.patch", "merged_at": "2018-01-11T18:36:44Z"}, "body": "## Status\r\n\r\nReady for review\r\n\r\n## Description of Changes\r\n\r\nAll functional tests assume the source GPG key is created when a\r\ndocument or a message is submitted. But it really is generated\r\nasynchronously and therefore races with the tests. It is fine most of\r\nthe time but leads to subtle bugs.\r\n\r\nFor instance when a journalist functional test tries to reply to a\r\nsource. If the GPG is being created the selector will not be\r\ndisplayed: instead the \"flagged for reply\" display will show and the\r\ntest will fail to reply.\r\n\r\nThis race was incorrectly fixed by waiting for the key to be generated\r\nbefore deleting it, because it happened relatively frequently.\r\n\r\nA support function is added to wait until the GPG key for a given\r\nsource becomes available. It is called whenever a source submits a\r\ndocument and effectively waits until the async_genkey completes.\r\n\r\n\r\n## Testing\r\n\r\nN/A (covered by CI)\r\n\r\n## Deployment\r\n\r\nN/A\r\n", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2837/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2837/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2836", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2836/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2836/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2836/events", "html_url": "https://github.com/freedomofpress/securedrop/pull/2836", "id": 287818142, "node_id": "MDExOlB1bGxSZXF1ZXN0MTYyNDA2NzI1", "number": 2836, "title": "[0.5.1] Update Apache AppArmor profile to write logo.png", "user": {"login": "emkll", "id": 15223328, "node_id": "MDQ6VXNlcjE1MjIzMzI4", "avatar_url": "https://avatars.githubusercontent.com/u/15223328?v=4", "gravatar_id": "", "url": "https://api.github.com/users/emkll", "html_url": "https://github.com/emkll", "followers_url": "https://api.github.com/users/emkll/followers", "following_url": "https://api.github.com/users/emkll/following{/other_user}", "gists_url": "https://api.github.com/users/emkll/gists{/gist_id}", "starred_url": "https://api.github.com/users/emkll/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/emkll/subscriptions", "organizations_url": "https://api.github.com/users/emkll/orgs", "repos_url": "https://api.github.com/users/emkll/repos", "events_url": "https://api.github.com/users/emkll/events{/privacy}", "received_events_url": "https://api.github.com/users/emkll/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}, {"id": 192539287, "node_id": "MDU6TGFiZWwxOTI1MzkyODc=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/ops/deployment", "name": "ops/deployment", "color": "c7def8", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/freedomofpress/securedrop/milestones/37", "html_url": "https://github.com/freedomofpress/securedrop/milestone/37", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/milestones/37/labels", "id": 2945103, "node_id": "MDk6TWlsZXN0b25lMjk0NTEwMw==", "number": 37, "title": "0.5.1", "description": "Tor apt repo", "creator": {"login": "redshiftzero", "id": 7832803, "node_id": "MDQ6VXNlcjc4MzI4MDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7832803?v=4", "gravatar_id": "", "url": "https://api.github.com/users/redshiftzero", "html_url": "https://github.com/redshiftzero", "followers_url": "https://api.github.com/users/redshiftzero/followers", "following_url": "https://api.github.com/users/redshiftzero/following{/other_user}", "gists_url": "https://api.github.com/users/redshiftzero/gists{/gist_id}", "starred_url": "https://api.github.com/users/redshiftzero/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/redshiftzero/subscriptions", "organizations_url": "https://api.github.com/users/redshiftzero/orgs", "repos_url": "https://api.github.com/users/redshiftzero/repos", "events_url": "https://api.github.com/users/redshiftzero/events{/privacy}", "received_events_url": "https://api.github.com/users/redshiftzero/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 28, "state": "closed", "created_at": "2017-11-28T23:08:16Z", "updated_at": "2018-01-26T05:26:23Z", "due_on": "2018-01-16T08:00:00Z", "closed_at": "2018-01-26T05:26:23Z"}, "comments": 4, "created_at": "2018-01-11T15:07:43Z", "updated_at": "2018-02-08T21:04:54Z", "closed_at": "2018-01-11T19:40:00Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/freedomofpress/securedrop/pulls/2836", "html_url": "https://github.com/freedomofpress/securedrop/pull/2836", "diff_url": "https://github.com/freedomofpress/securedrop/pull/2836.diff", "patch_url": "https://github.com/freedomofpress/securedrop/pull/2836.patch", "merged_at": "2018-01-11T19:40:00Z"}, "body": "## Status\r\n\r\nReady for review \r\n\r\n## Description of Changes\r\n\r\nFixes #2835 .\r\n\r\n## Testing\r\n\r\nHow should the reviewer test this PR?\r\nWrite out any special testing steps here.\r\n\r\n## Checklist\r\n\r\n- Navigate to Journalist Interface\r\n- Click on Admin\r\n- Click on Instance Config\r\n- Click browse and upload an image file\r\n- Click on Update Logo\r\n- Instance logo should be updated on the source interface\r\n\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2836/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2836/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2835", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2835/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2835/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2835/events", "html_url": "https://github.com/freedomofpress/securedrop/issues/2835", "id": 287814115, "node_id": "MDU6SXNzdWUyODc4MTQxMTU=", "number": 2835, "title": "500 internal server error when updating logo via Journalist interface", "user": {"login": "emkll", "id": 15223328, "node_id": "MDQ6VXNlcjE1MjIzMzI4", "avatar_url": "https://avatars.githubusercontent.com/u/15223328?v=4", "gravatar_id": "", "url": "https://api.github.com/users/emkll", "html_url": "https://github.com/emkll", "followers_url": "https://api.github.com/users/emkll/followers", "following_url": "https://api.github.com/users/emkll/following{/other_user}", "gists_url": "https://api.github.com/users/emkll/gists{/gist_id}", "starred_url": "https://api.github.com/users/emkll/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/emkll/subscriptions", "organizations_url": "https://api.github.com/users/emkll/orgs", "repos_url": "https://api.github.com/users/emkll/repos", "events_url": "https://api.github.com/users/emkll/events{/privacy}", "received_events_url": "https://api.github.com/users/emkll/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}, {"id": 385585080, "node_id": "MDU6TGFiZWwzODU1ODUwODA=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/QA:%20Release", "name": "QA: Release", "color": "fbca04", "default": false, "description": null}, {"id": 475977470, "node_id": "MDU6TGFiZWw0NzU5Nzc0NzA=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/journalist%20interface%20(JI)", "name": "journalist interface (JI)", "color": "f9d0c4", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": {"login": "emkll", "id": 15223328, "node_id": "MDQ6VXNlcjE1MjIzMzI4", "avatar_url": "https://avatars.githubusercontent.com/u/15223328?v=4", "gravatar_id": "", "url": "https://api.github.com/users/emkll", "html_url": "https://github.com/emkll", "followers_url": "https://api.github.com/users/emkll/followers", "following_url": "https://api.github.com/users/emkll/following{/other_user}", "gists_url": "https://api.github.com/users/emkll/gists{/gist_id}", "starred_url": "https://api.github.com/users/emkll/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/emkll/subscriptions", "organizations_url": "https://api.github.com/users/emkll/orgs", "repos_url": "https://api.github.com/users/emkll/repos", "events_url": "https://api.github.com/users/emkll/events{/privacy}", "received_events_url": "https://api.github.com/users/emkll/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "emkll", "id": 15223328, "node_id": "MDQ6VXNlcjE1MjIzMzI4", "avatar_url": "https://avatars.githubusercontent.com/u/15223328?v=4", "gravatar_id": "", "url": "https://api.github.com/users/emkll", "html_url": "https://github.com/emkll", "followers_url": "https://api.github.com/users/emkll/followers", "following_url": "https://api.github.com/users/emkll/following{/other_user}", "gists_url": "https://api.github.com/users/emkll/gists{/gist_id}", "starred_url": "https://api.github.com/users/emkll/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/emkll/subscriptions", "organizations_url": "https://api.github.com/users/emkll/orgs", "repos_url": "https://api.github.com/users/emkll/repos", "events_url": "https://api.github.com/users/emkll/events{/privacy}", "received_events_url": "https://api.github.com/users/emkll/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/freedomofpress/securedrop/milestones/37", "html_url": "https://github.com/freedomofpress/securedrop/milestone/37", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/milestones/37/labels", "id": 2945103, "node_id": "MDk6TWlsZXN0b25lMjk0NTEwMw==", "number": 37, "title": "0.5.1", "description": "Tor apt repo", "creator": {"login": "redshiftzero", "id": 7832803, "node_id": "MDQ6VXNlcjc4MzI4MDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7832803?v=4", "gravatar_id": "", "url": "https://api.github.com/users/redshiftzero", "html_url": "https://github.com/redshiftzero", "followers_url": "https://api.github.com/users/redshiftzero/followers", "following_url": "https://api.github.com/users/redshiftzero/following{/other_user}", "gists_url": "https://api.github.com/users/redshiftzero/gists{/gist_id}", "starred_url": "https://api.github.com/users/redshiftzero/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/redshiftzero/subscriptions", "organizations_url": "https://api.github.com/users/redshiftzero/orgs", "repos_url": "https://api.github.com/users/redshiftzero/repos", "events_url": "https://api.github.com/users/redshiftzero/events{/privacy}", "received_events_url": "https://api.github.com/users/redshiftzero/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 28, "state": "closed", "created_at": "2017-11-28T23:08:16Z", "updated_at": "2018-01-26T05:26:23Z", "due_on": "2018-01-16T08:00:00Z", "closed_at": "2018-01-26T05:26:23Z"}, "comments": 1, "created_at": "2018-01-11T14:56:00Z", "updated_at": "2018-01-11T21:01:22Z", "closed_at": "2018-01-11T21:01:22Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "# Bug\r\n\r\n## Description\r\n\r\nWhen updating a logo through the Instance Config functionality of the Admin interface, an internal server error occurs.\r\n \r\n## Steps to Reproduce\r\n\r\n1. Navigate to Journalist Interface\r\n2. Click on Admin\r\n3. Click on Instance Config\r\n4. Click browse and upload an image file\r\n5. Click on Update Logo\r\n\r\n## Expected Behavior\r\nThe logo is updated\r\n\r\n## Actual Behavior\r\n\r\nAn error 500 occurs:\r\n```\r\n[Thu Jan 11 14:34:49.978865 2018] [:error] [pid 1433:tid 3501914679040] [remote 127.0.0.1:58217] [2018-01-11 14:34:49,973] ERROR in app: Exception on /admin/config [POST]\r\n[Thu Jan 11 14:34:49.978893 2018] [:error] [pid 1433:tid 3501914679040] [remote 127.0.0.1:58217] Traceback (most recent call last):\r\n[Thu Jan 11 14:34:49.978899 2018] [:error] [pid 1433:tid 3501914679040] [remote 127.0.0.1:58217]   File \"/usr/local/lib/python2.7/dist-packages/flask/app.py\", line 1982, in wsgi_app\r\n[Thu Jan 11 14:34:49.978904 2018] [:error] [pid 1433:tid 3501914679040] [remote 127.0.0.1:58217]     response = self.full_dispatch_request()\r\n[Thu Jan 11 14:34:49.978910 2018] [:error] [pid 1433:tid 3501914679040] [remote 127.0.0.1:58217]   File \"/usr/local/lib/python2.7/dist-packages/flask/app.py\", line 1614, in full_dispatch_request\r\n[Thu Jan 11 14:34:49.978914 2018] [:error] [pid 1433:tid 3501914679040] [remote 127.0.0.1:58217]     rv = self.handle_user_exception(e)\r\n[Thu Jan 11 14:34:49.978919 2018] [:error] [pid 1433:tid 3501914679040] [remote 127.0.0.1:58217]   File \"/usr/local/lib/python2.7/dist-packages/flask/app.py\", line 1517, in handle_user_exception\r\n[Thu Jan 11 14:34:49.978924 2018] [:error] [pid 1433:tid 3501914679040] [remote 127.0.0.1:58217]     reraise(exc_type, exc_value, tb)\r\n[Thu Jan 11 14:34:49.978928 2018] [:error] [pid 1433:tid 3501914679040] [remote 127.0.0.1:58217]   File \"/usr/local/lib/python2.7/dist-packages/flask/app.py\", line 1612, in full_dispatch_request\r\n[Thu Jan 11 14:34:49.978933 2018] [:error] [pid 1433:tid 3501914679040] [remote 127.0.0.1:58217]     rv = self.dispatch_request()\r\n[Thu Jan 11 14:34:49.978937 2018] [:error] [pid 1433:tid 3501914679040] [remote 127.0.0.1:58217]   File \"/usr/local/lib/python2.7/dist-packages/flask/app.py\", line 1598, in dispatch_request\r\n[Thu Jan 11 14:34:49.978942 2018] [:error] [pid 1433:tid 3501914679040] [remote 127.0.0.1:58217]     return self.view_functions[rule.endpoint](**req.view_args)\r\n[Thu Jan 11 14:34:49.978947 2018] [:error] [pid 1433:tid 3501914679040] [remote 127.0.0.1:58217]   File \"/var/www/securedrop/journalist_app/decorators.py\", line 14, in wrapper\r\n[Thu Jan 11 14:34:49.978958 2018] [:error] [pid 1433:tid 3501914679040] [remote 127.0.0.1:58217]     return func(*args, **kwargs)\r\n[Thu Jan 11 14:34:49.978962 2018] [:error] [pid 1433:tid 3501914679040] [remote 127.0.0.1:58217]   File \"/var/www/securedrop/journalist_app/admin.py\", line 36, in manage_config\r\n[Thu Jan 11 14:34:49.978967 2018] [:error] [pid 1433:tid 3501914679040] [remote 127.0.0.1:58217]     f.save(static_filepath)\r\n[Thu Jan 11 14:34:49.978971 2018] [:error] [pid 1433:tid 3501914679040] [remote 127.0.0.1:58217]   File \"/usr/local/lib/python2.7/dist-packages/werkzeug/datastructures.py\", line 2703, in save\r\n[Thu Jan 11 14:34:49.978976 2018] [:error] [pid 1433:tid 3501914679040] [remote 127.0.0.1:58217]     dst = open(dst, 'wb')\r\n[Thu Jan 11 14:34:49.978980 2018] [:error] [pid 1433:tid 3501914679040] [remote 127.0.0.1:58217] IOError: [Errno 13] Permission denied: '/var/www/securedrop/static/i/logo.png'\r\n```\r\n\r\n## Comments\r\n\r\nRelated to https://github.com/freedomofpress/securedrop/issues/2827\r\nIt appears to be an AppArmor profile \r\n", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2835/reactions", "total_count": 1, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2835/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2834", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2834/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2834/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2834/events", "html_url": "https://github.com/freedomofpress/securedrop/pull/2834", "id": 287794624, "node_id": "MDExOlB1bGxSZXF1ZXN0MTYyMzg4ODky", "number": 2834, "title": "[0.5.1] docs: create files needed to capture screenshots", "user": {"login": "ghost", "id": 10137, "node_id": "MDQ6VXNlcjEwMTM3", "avatar_url": "https://avatars.githubusercontent.com/u/10137?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ghost", "html_url": "https://github.com/ghost", "followers_url": "https://api.github.com/users/ghost/followers", "following_url": "https://api.github.com/users/ghost/following{/other_user}", "gists_url": "https://api.github.com/users/ghost/gists{/gist_id}", "starred_url": "https://api.github.com/users/ghost/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ghost/subscriptions", "organizations_url": "https://api.github.com/users/ghost/orgs", "repos_url": "https://api.github.com/users/ghost/repos", "events_url": "https://api.github.com/users/ghost/events{/privacy}", "received_events_url": "https://api.github.com/users/ghost/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}, {"id": 118465787, "node_id": "MDU6TGFiZWwxMTg0NjU3ODc=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/docs", "name": "docs", "color": "d4c5f9", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/freedomofpress/securedrop/milestones/37", "html_url": "https://github.com/freedomofpress/securedrop/milestone/37", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/milestones/37/labels", "id": 2945103, "node_id": "MDk6TWlsZXN0b25lMjk0NTEwMw==", "number": 37, "title": "0.5.1", "description": "Tor apt repo", "creator": {"login": "redshiftzero", "id": 7832803, "node_id": "MDQ6VXNlcjc4MzI4MDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7832803?v=4", "gravatar_id": "", "url": "https://api.github.com/users/redshiftzero", "html_url": "https://github.com/redshiftzero", "followers_url": "https://api.github.com/users/redshiftzero/followers", "following_url": "https://api.github.com/users/redshiftzero/following{/other_user}", "gists_url": "https://api.github.com/users/redshiftzero/gists{/gist_id}", "starred_url": "https://api.github.com/users/redshiftzero/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/redshiftzero/subscriptions", "organizations_url": "https://api.github.com/users/redshiftzero/orgs", "repos_url": "https://api.github.com/users/redshiftzero/repos", "events_url": "https://api.github.com/users/redshiftzero/events{/privacy}", "received_events_url": "https://api.github.com/users/redshiftzero/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 28, "state": "closed", "created_at": "2017-11-28T23:08:16Z", "updated_at": "2018-01-26T05:26:23Z", "due_on": "2018-01-16T08:00:00Z", "closed_at": "2018-01-26T05:26:23Z"}, "comments": 6, "created_at": "2018-01-11T13:56:36Z", "updated_at": "2018-01-11T20:37:39Z", "closed_at": "2018-01-11T20:37:32Z", "author_association": "NONE", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/freedomofpress/securedrop/pulls/2834", "html_url": "https://github.com/freedomofpress/securedrop/pull/2834", "diff_url": "https://github.com/freedomofpress/securedrop/pull/2834.diff", "patch_url": "https://github.com/freedomofpress/securedrop/pull/2834.patch", "merged_at": "2018-01-11T20:37:32Z"}, "body": "## Status\r\n\r\nReady for review\r\n\r\n## Description of Changes\r\n\r\nOtherwise pytest will fail to include config.py. Also inconditionally\r\nupdate the CSS so they are up to date.\r\n\r\n## Testing\r\n\r\n* git clone -b wip-dachary-0.5.1-update-doc-images https://github.com/freedomofpress/securedrop\r\n* cd securedrop\r\n* make -C securedrop images update-user-guides\r\n\r\n## Deployment\r\n\r\nN/A\r\n", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2834/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2834/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2827", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2827/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2827/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2827/events", "html_url": "https://github.com/freedomofpress/securedrop/issues/2827", "id": 287645753, "node_id": "MDU6SXNzdWUyODc2NDU3NTM=", "number": 2827, "title": "500 internal server error on instance config page due to missing AppArmor rule", "user": {"login": "redshiftzero", "id": 7832803, "node_id": "MDQ6VXNlcjc4MzI4MDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7832803?v=4", "gravatar_id": "", "url": "https://api.github.com/users/redshiftzero", "html_url": "https://github.com/redshiftzero", "followers_url": "https://api.github.com/users/redshiftzero/followers", "following_url": "https://api.github.com/users/redshiftzero/following{/other_user}", "gists_url": "https://api.github.com/users/redshiftzero/gists{/gist_id}", "starred_url": "https://api.github.com/users/redshiftzero/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/redshiftzero/subscriptions", "organizations_url": "https://api.github.com/users/redshiftzero/orgs", "repos_url": "https://api.github.com/users/redshiftzero/repos", "events_url": "https://api.github.com/users/redshiftzero/events{/privacy}", "received_events_url": "https://api.github.com/users/redshiftzero/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}, {"id": 385585080, "node_id": "MDU6TGFiZWwzODU1ODUwODA=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/QA:%20Release", "name": "QA: Release", "color": "fbca04", "default": false, "description": null}, {"id": 475977470, "node_id": "MDU6TGFiZWw0NzU5Nzc0NzA=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/journalist%20interface%20(JI)", "name": "journalist interface (JI)", "color": "f9d0c4", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": {"login": "redshiftzero", "id": 7832803, "node_id": "MDQ6VXNlcjc4MzI4MDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7832803?v=4", "gravatar_id": "", "url": "https://api.github.com/users/redshiftzero", "html_url": "https://github.com/redshiftzero", "followers_url": "https://api.github.com/users/redshiftzero/followers", "following_url": "https://api.github.com/users/redshiftzero/following{/other_user}", "gists_url": "https://api.github.com/users/redshiftzero/gists{/gist_id}", "starred_url": "https://api.github.com/users/redshiftzero/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/redshiftzero/subscriptions", "organizations_url": "https://api.github.com/users/redshiftzero/orgs", "repos_url": "https://api.github.com/users/redshiftzero/repos", "events_url": "https://api.github.com/users/redshiftzero/events{/privacy}", "received_events_url": "https://api.github.com/users/redshiftzero/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "redshiftzero", "id": 7832803, "node_id": "MDQ6VXNlcjc4MzI4MDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7832803?v=4", "gravatar_id": "", "url": "https://api.github.com/users/redshiftzero", "html_url": "https://github.com/redshiftzero", "followers_url": "https://api.github.com/users/redshiftzero/followers", "following_url": "https://api.github.com/users/redshiftzero/following{/other_user}", "gists_url": "https://api.github.com/users/redshiftzero/gists{/gist_id}", "starred_url": "https://api.github.com/users/redshiftzero/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/redshiftzero/subscriptions", "organizations_url": "https://api.github.com/users/redshiftzero/orgs", "repos_url": "https://api.github.com/users/redshiftzero/repos", "events_url": "https://api.github.com/users/redshiftzero/events{/privacy}", "received_events_url": "https://api.github.com/users/redshiftzero/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 4, "created_at": "2018-01-11T02:43:38Z", "updated_at": "2018-01-11T21:02:39Z", "closed_at": "2018-01-11T21:02:31Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "## Description\r\n\r\nI went to the new \"Instance Config\" page and got a 500 internal server error due to a missing AppArmor rule.\r\n\r\n## Steps to Reproduce\r\n\r\n0. Install `0.5.1-rc1` on prod VMs\r\n1. Create an administrator account.\r\n2. Click on \"Instance Config\" in the admin interface:\r\n\r\n![screen shot 2018-01-10 at 6 41 26 pm](https://user-images.githubusercontent.com/7832803/34806050-e51e1f0e-f635-11e7-8261-28e8d99cc3c1.png)\r\n\r\n## Expected Behavior\r\n\r\nYou go to the instance config page and all is merry and well. \r\n\r\n## Actual Behavior\r\n\r\n![screen shot 2018-01-10 at 6 42 11 pm](https://user-images.githubusercontent.com/7832803/34806067-fd0b123e-f635-11e7-96aa-7dfb13760d6c.png)\r\n\r\n## Comments\r\n\r\nA peek at the logs reveals the culprit:\r\n\r\n```\r\n[Thu Jan 11 02:38:16.105986 2018] [:error] [pid 3754:tid 2943491983104] [remote 127.0.0.1:51806] IOError: [Errno 13] Permission denied: '/var/www/securedrop/journalist_templates/config.html'\r\n```\r\n\r\nUpdating the AppArmor profile for Apache will fix this. ", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2827/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2827/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2822", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2822/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2822/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2822/events", "html_url": "https://github.com/freedomofpress/securedrop/pull/2822", "id": 287385229, "node_id": "MDExOlB1bGxSZXF1ZXN0MTYyMDg2NDYz", "number": 2822, "title": "merge Dockerfile RUN commands to fix caching issues", "user": {"login": "heartsucker", "id": 3998464, "node_id": "MDQ6VXNlcjM5OTg0NjQ=", "avatar_url": "https://avatars.githubusercontent.com/u/3998464?v=4", "gravatar_id": "", "url": "https://api.github.com/users/heartsucker", "html_url": "https://github.com/heartsucker", "followers_url": "https://api.github.com/users/heartsucker/followers", "following_url": "https://api.github.com/users/heartsucker/following{/other_user}", "gists_url": "https://api.github.com/users/heartsucker/gists{/gist_id}", "starred_url": "https://api.github.com/users/heartsucker/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/heartsucker/subscriptions", "organizations_url": "https://api.github.com/users/heartsucker/orgs", "repos_url": "https://api.github.com/users/heartsucker/repos", "events_url": "https://api.github.com/users/heartsucker/events{/privacy}", "received_events_url": "https://api.github.com/users/heartsucker/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}, {"id": 660721238, "node_id": "MDU6TGFiZWw2NjA3MjEyMzg=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/goals:%20improve%20developer%20workflow", "name": "goals: improve developer workflow", "color": "0e8a16", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2018-01-10T10:34:42Z", "updated_at": "2018-01-15T11:15:27Z", "closed_at": "2018-01-10T21:01:09Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/freedomofpress/securedrop/pulls/2822", "html_url": "https://github.com/freedomofpress/securedrop/pull/2822", "diff_url": "https://github.com/freedomofpress/securedrop/pull/2822.diff", "patch_url": "https://github.com/freedomofpress/securedrop/pull/2822.patch", "merged_at": "2018-01-10T21:01:09Z"}, "body": "## Status\r\n\r\nReady for review\r\n\r\n## Description of Changes\r\n\r\nAssists with #2797.\r\n\r\n`RUN` commands were merged to prevent caching bugs, and some other command were reordered.\r\n\r\n## Testing\r\n\r\n```\r\ncd securedrop && make images\r\n```", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2822/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2822/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2817", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2817/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2817/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2817/events", "html_url": "https://github.com/freedomofpress/securedrop/pull/2817", "id": 287208569, "node_id": "MDExOlB1bGxSZXF1ZXN0MTYxOTYwMjkz", "number": 2817, "title": "i18n: add missing gettext around flash text", "user": {"login": "ghost", "id": 10137, "node_id": "MDQ6VXNlcjEwMTM3", "avatar_url": "https://avatars.githubusercontent.com/u/10137?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ghost", "html_url": "https://github.com/ghost", "followers_url": "https://api.github.com/users/ghost/followers", "following_url": "https://api.github.com/users/ghost/following{/other_user}", "gists_url": "https://api.github.com/users/ghost/gists{/gist_id}", "starred_url": "https://api.github.com/users/ghost/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ghost/subscriptions", "organizations_url": "https://api.github.com/users/ghost/orgs", "repos_url": "https://api.github.com/users/ghost/repos", "events_url": "https://api.github.com/users/ghost/events{/privacy}", "received_events_url": "https://api.github.com/users/ghost/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}, {"id": 652906953, "node_id": "MDU6TGFiZWw2NTI5MDY5NTM=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/i18n", "name": "i18n", "color": "d4c5f9", "default": false, "description": "Anything related to translation or internationalization of SecureDrop"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2018-01-09T19:49:55Z", "updated_at": "2018-01-09T20:28:38Z", "closed_at": "2018-01-09T20:28:35Z", "author_association": "NONE", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/freedomofpress/securedrop/pulls/2817", "html_url": "https://github.com/freedomofpress/securedrop/pull/2817", "diff_url": "https://github.com/freedomofpress/securedrop/pull/2817.diff", "patch_url": "https://github.com/freedomofpress/securedrop/pull/2817.patch", "merged_at": "2018-01-09T20:28:35Z"}, "body": "## Status\r\n\r\nReady for review\r\n\r\n## Description of Changes\r\n\r\nadd missing gettext around flash text\r\n\r\n## Testing\r\n\r\nN/A\r\n\r\n## Deployment\r\n\r\nN/A\r\n\r\n## Checklist\r\n\r\n### If you made changes to the app code:\r\n\r\n- [x] Unit and functional tests pass on the development VM\r\n", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2817/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2817/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2812", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2812/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2812/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2812/events", "html_url": "https://github.com/freedomofpress/securedrop/pull/2812", "id": 287129852, "node_id": "MDExOlB1bGxSZXF1ZXN0MTYxOTAyMDg5", "number": 2812, "title": "i18n: move format() outside of ngettext", "user": {"login": "ghost", "id": 10137, "node_id": "MDQ6VXNlcjEwMTM3", "avatar_url": "https://avatars.githubusercontent.com/u/10137?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ghost", "html_url": "https://github.com/ghost", "followers_url": "https://api.github.com/users/ghost/followers", "following_url": "https://api.github.com/users/ghost/following{/other_user}", "gists_url": "https://api.github.com/users/ghost/gists{/gist_id}", "starred_url": "https://api.github.com/users/ghost/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ghost/subscriptions", "organizations_url": "https://api.github.com/users/ghost/orgs", "repos_url": "https://api.github.com/users/ghost/repos", "events_url": "https://api.github.com/users/ghost/events{/privacy}", "received_events_url": "https://api.github.com/users/ghost/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}, {"id": 652906953, "node_id": "MDU6TGFiZWw2NTI5MDY5NTM=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/i18n", "name": "i18n", "color": "d4c5f9", "default": false, "description": "Anything related to translation or internationalization of SecureDrop"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2018-01-09T15:33:43Z", "updated_at": "2018-01-09T18:22:08Z", "closed_at": "2018-01-09T18:22:03Z", "author_association": "NONE", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/freedomofpress/securedrop/pulls/2812", "html_url": "https://github.com/freedomofpress/securedrop/pull/2812", "diff_url": "https://github.com/freedomofpress/securedrop/pull/2812.diff", "patch_url": "https://github.com/freedomofpress/securedrop/pull/2812.patch", "merged_at": "2018-01-09T18:22:03Z"}, "body": "## Status\r\n\r\nReady for review\r\n\r\n## Description of Changes\r\n\r\nAlthough it makes more sense to write:\r\n\r\nngettext('1 doc', '{doc_num} docs'.format(doc_num=docs), docs)\r\n\r\nthe pybabel parser fails to recoginize the call and does not include\r\nit in messages.pot. We add the .format() outside instead. It looks\r\nstrange because '1 doc' does not need it but ... it does not hurt.\r\n\r\n## Testing\r\n\r\n* vagrant ssh development\r\n* cd /vagrant\r\n* make translate\r\n* verify messages.pot contains the string \"1 doc\"\r\n\r\n## Deployment\r\n\r\nN/A\r\n\r\n## Checklist\r\n\r\n### If you made changes to the app code:\r\n\r\n- [x] Unit and functional tests pass on the development VM\r\n", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2812/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2812/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2805", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2805/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2805/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2805/events", "html_url": "https://github.com/freedomofpress/securedrop/pull/2805", "id": 286679842, "node_id": "MDExOlB1bGxSZXF1ZXN0MTYxNTgxODU4", "number": 2805, "title": "tests: no need to remove *.pyc before docker build", "user": {"login": "ghost", "id": 10137, "node_id": "MDQ6VXNlcjEwMTM3", "avatar_url": "https://avatars.githubusercontent.com/u/10137?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ghost", "html_url": "https://github.com/ghost", "followers_url": "https://api.github.com/users/ghost/followers", "following_url": "https://api.github.com/users/ghost/following{/other_user}", "gists_url": "https://api.github.com/users/ghost/gists{/gist_id}", "starred_url": "https://api.github.com/users/ghost/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ghost/subscriptions", "organizations_url": "https://api.github.com/users/ghost/orgs", "repos_url": "https://api.github.com/users/ghost/repos", "events_url": "https://api.github.com/users/ghost/events{/privacy}", "received_events_url": "https://api.github.com/users/ghost/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}, {"id": 660721238, "node_id": "MDU6TGFiZWw2NjA3MjEyMzg=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/goals:%20improve%20developer%20workflow", "name": "goals: improve developer workflow", "color": "0e8a16", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2018-01-08T08:50:55Z", "updated_at": "2018-01-10T17:59:05Z", "closed_at": "2018-01-10T17:59:02Z", "author_association": "NONE", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/freedomofpress/securedrop/pulls/2805", "html_url": "https://github.com/freedomofpress/securedrop/pull/2805", "diff_url": "https://github.com/freedomofpress/securedrop/pull/2805.diff", "patch_url": "https://github.com/freedomofpress/securedrop/pull/2805.patch", "merged_at": "2018-01-10T17:59:02Z"}, "body": "## Status\r\n\r\nReady for review\r\n\r\n## Description of Changes\r\n\r\nbecause they are already excluded by .dockerignore. In addition the\r\n--no-run-if-empty option is not implemented on some operating systems\r\nand will fail\r\n\r\n## Testing\r\n\r\nOn MacOS verify that \r\n\r\n* make test\r\n\r\nworks.\r\n\r\n## Deployment\r\n\r\nN/A\r\n\r\n## Checklist\r\n\r\n### If you made changes to the app code:\r\n\r\n- [x] Unit and functional tests pass on the development VM\r\n", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2805/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2805/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2804", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2804/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2804/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2804/events", "html_url": "https://github.com/freedomofpress/securedrop/pull/2804", "id": 286570876, "node_id": "MDExOlB1bGxSZXF1ZXN0MTYxNTIyNzM3", "number": 2804, "title": "tests: only upload coverage information if running on CircleCI", "user": {"login": "ghost", "id": 10137, "node_id": "MDQ6VXNlcjEwMTM3", "avatar_url": "https://avatars.githubusercontent.com/u/10137?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ghost", "html_url": "https://github.com/ghost", "followers_url": "https://api.github.com/users/ghost/followers", "following_url": "https://api.github.com/users/ghost/following{/other_user}", "gists_url": "https://api.github.com/users/ghost/gists{/gist_id}", "starred_url": "https://api.github.com/users/ghost/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ghost/subscriptions", "organizations_url": "https://api.github.com/users/ghost/orgs", "repos_url": "https://api.github.com/users/ghost/repos", "events_url": "https://api.github.com/users/ghost/events{/privacy}", "received_events_url": "https://api.github.com/users/ghost/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}, {"id": 475997849, "node_id": "MDU6TGFiZWw0NzU5OTc4NDk=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/tests", "name": "tests", "color": "f9d0c4", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2018-01-07T13:54:58Z", "updated_at": "2018-04-10T15:05:57Z", "closed_at": "2018-01-10T21:52:56Z", "author_association": "NONE", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/freedomofpress/securedrop/pulls/2804", "html_url": "https://github.com/freedomofpress/securedrop/pull/2804", "diff_url": "https://github.com/freedomofpress/securedrop/pull/2804.diff", "patch_url": "https://github.com/freedomofpress/securedrop/pull/2804.patch", "merged_at": "2018-01-10T21:52:56Z"}, "body": "## Status\r\n\r\nReady for review\r\n\r\n## Description of Changes\r\n\r\nTrying to upload to codecov while running **make dev** on the local machine will likely result in failure. Unless the developer has codecov credentials properly setup which is rare.\r\n\r\n## Testing\r\n\r\n* cd securedrop\r\n* make test\r\n\r\n## Deployment\r\n\r\nN/A\r\n\r\n## Checklist\r\n\r\n### If you made changes to the app code:\r\n\r\n- [x] Unit and functional tests pass on the development VM\r\n", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2804/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2804/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2802", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2802/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2802/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2802/events", "html_url": "https://github.com/freedomofpress/securedrop/pull/2802", "id": 286569775, "node_id": "MDExOlB1bGxSZXF1ZXN0MTYxNTIyMTE4", "number": 2802, "title": "journalist: the admin cannot delete itself", "user": {"login": "singuliere", "id": 35190819, "node_id": "MDQ6VXNlcjM1MTkwODE5", "avatar_url": "https://avatars.githubusercontent.com/u/35190819?v=4", "gravatar_id": "", "url": "https://api.github.com/users/singuliere", "html_url": "https://github.com/singuliere", "followers_url": "https://api.github.com/users/singuliere/followers", "following_url": "https://api.github.com/users/singuliere/following{/other_user}", "gists_url": "https://api.github.com/users/singuliere/gists{/gist_id}", "starred_url": "https://api.github.com/users/singuliere/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/singuliere/subscriptions", "organizations_url": "https://api.github.com/users/singuliere/orgs", "repos_url": "https://api.github.com/users/singuliere/repos", "events_url": "https://api.github.com/users/singuliere/events{/privacy}", "received_events_url": "https://api.github.com/users/singuliere/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}, {"id": 652909251, "node_id": "MDU6TGFiZWw2NTI5MDkyNTE=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/goals:%20journalist%20experience", "name": "goals: journalist experience", "color": "0e8a16", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2018-01-07T13:38:59Z", "updated_at": "2018-01-10T00:20:13Z", "closed_at": "2018-01-10T00:20:13Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/freedomofpress/securedrop/pulls/2802", "html_url": "https://github.com/freedomofpress/securedrop/pull/2802", "diff_url": "https://github.com/freedomofpress/securedrop/pull/2802.diff", "patch_url": "https://github.com/freedomofpress/securedrop/pull/2802.patch", "merged_at": "2018-01-10T00:20:13Z"}, "body": "## Status\r\n\r\nReady for review\r\n\r\n## Description of Changes\r\n\r\nFixes #1562\r\n\r\n## Testing\r\n\r\n* cd securedrop\r\n* make dev\r\n* verify the trashbin cannot be clicked for self\r\n\r\n## Deployment\r\n\r\nN/A\r\n\r\n## Checklist\r\n\r\n### If you made changes to the app code:\r\n\r\n- [x] Unit and functional tests pass on the development VM\r\n", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2802/reactions", "total_count": 1, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2802/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2799", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2799/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2799/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2799/events", "html_url": "https://github.com/freedomofpress/securedrop/pull/2799", "id": 286391287, "node_id": "MDExOlB1bGxSZXF1ZXN0MTYxNDE3MTY5", "number": 2799, "title": "Journalist interface: Add missing singular form on documents/messages ", "user": {"login": "redshiftzero", "id": 7832803, "node_id": "MDQ6VXNlcjc4MzI4MDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7832803?v=4", "gravatar_id": "", "url": "https://api.github.com/users/redshiftzero", "html_url": "https://github.com/redshiftzero", "followers_url": "https://api.github.com/users/redshiftzero/followers", "following_url": "https://api.github.com/users/redshiftzero/following{/other_user}", "gists_url": "https://api.github.com/users/redshiftzero/gists{/gist_id}", "starred_url": "https://api.github.com/users/redshiftzero/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/redshiftzero/subscriptions", "organizations_url": "https://api.github.com/users/redshiftzero/orgs", "repos_url": "https://api.github.com/users/redshiftzero/repos", "events_url": "https://api.github.com/users/redshiftzero/events{/privacy}", "received_events_url": "https://api.github.com/users/redshiftzero/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}, {"id": 475977399, "node_id": "MDU6TGFiZWw0NzU5NzczOTk=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/source%20interface%20(SI)", "name": "source interface (SI)", "color": "f9d0c4", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2018-01-05T20:07:01Z", "updated_at": "2018-04-10T15:05:58Z", "closed_at": "2018-01-06T08:04:35Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/freedomofpress/securedrop/pulls/2799", "html_url": "https://github.com/freedomofpress/securedrop/pull/2799", "diff_url": "https://github.com/freedomofpress/securedrop/pull/2799.diff", "patch_url": "https://github.com/freedomofpress/securedrop/pull/2799.patch", "merged_at": "2018-01-06T08:04:35Z"}, "body": "## Status\r\n\r\nReady for review\r\n\r\n## Description of Changes\r\n\r\nFixes #2670 and updates strings to be translated (dd9842a)\r\n\r\n## Testing\r\n\r\nYou should see the right singular/plural form in the journalist interface now:\r\n\r\n![screen shot 2018-01-05 at 11 51 34 am](https://user-images.githubusercontent.com/7832803/34626066-135b3c50-f210-11e7-87ab-d9400df15877.png)\r\n\r\n## Deployment\r\n\r\nno big surprises\r\n\r\n## Checklist\r\n\r\n### If you made changes to the app code:\r\n\r\n- [x] Unit and functional tests pass on the development VM\r\n", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2799/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2799/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2797", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2797/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2797/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2797/events", "html_url": "https://github.com/freedomofpress/securedrop/pull/2797", "id": 286346903, "node_id": "MDExOlB1bGxSZXF1ZXN0MTYxMzgzOTg1", "number": 2797, "title": "circleci: do not cache docker layers", "user": {"login": "ghost", "id": 10137, "node_id": "MDQ6VXNlcjEwMTM3", "avatar_url": "https://avatars.githubusercontent.com/u/10137?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ghost", "html_url": "https://github.com/ghost", "followers_url": "https://api.github.com/users/ghost/followers", "following_url": "https://api.github.com/users/ghost/following{/other_user}", "gists_url": "https://api.github.com/users/ghost/gists{/gist_id}", "starred_url": "https://api.github.com/users/ghost/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ghost/subscriptions", "organizations_url": "https://api.github.com/users/ghost/orgs", "repos_url": "https://api.github.com/users/ghost/repos", "events_url": "https://api.github.com/users/ghost/events{/privacy}", "received_events_url": "https://api.github.com/users/ghost/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}, {"id": 652907032, "node_id": "MDU6TGFiZWw2NTI5MDcwMzI=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/goals:%20sick%20CI", "name": "goals: sick CI", "color": "0e8a16", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2018-01-05T17:03:33Z", "updated_at": "2018-01-28T13:26:08Z", "closed_at": "2018-01-10T12:10:25Z", "author_association": "NONE", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/freedomofpress/securedrop/pulls/2797", "html_url": "https://github.com/freedomofpress/securedrop/pull/2797", "diff_url": "https://github.com/freedomofpress/securedrop/pull/2797.diff", "patch_url": "https://github.com/freedomofpress/securedrop/pull/2797.patch", "merged_at": null}, "body": "## Status\r\n\r\nReady for review\r\n\r\n## Description of Changes\r\n\r\nWhen a RUN apt-get update layer is cached it may become obsolete. This\r\nwill manifest with apt-get install failing on 404 because the cache\r\nreferences packages that no longer exist.\r\n\r\nThe developer who sees this error is unlikely to link that to the\r\nfact that docker layers are cached accross runs. And it will not occur\r\nto them to change the line of the Dockerfile to force an update.\r\n\r\nThe benefit of maintaining a cache is to speed up tests (skipping\r\napt-get install and pip install on every run). But this benefit is\r\nless appealing when developer are confused by the errors it may\r\ninduce.\r\n\r\n## Testing\r\n\r\nN/A\r\n\r\n## Deployment\r\n\r\nN/A\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2797/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2797/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2776", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2776/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2776/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2776/events", "html_url": "https://github.com/freedomofpress/securedrop/pull/2776", "id": 285234440, "node_id": "MDExOlB1bGxSZXF1ZXN0MTYwNjA2OTIw", "number": 2776, "title": "tests: fix race condition in delete_collection tests", "user": {"login": "tmc", "id": 3977, "node_id": "MDQ6VXNlcjM5Nzc=", "avatar_url": "https://avatars.githubusercontent.com/u/3977?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tmc", "html_url": "https://github.com/tmc", "followers_url": "https://api.github.com/users/tmc/followers", "following_url": "https://api.github.com/users/tmc/following{/other_user}", "gists_url": "https://api.github.com/users/tmc/gists{/gist_id}", "starred_url": "https://api.github.com/users/tmc/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tmc/subscriptions", "organizations_url": "https://api.github.com/users/tmc/orgs", "repos_url": "https://api.github.com/users/tmc/repos", "events_url": "https://api.github.com/users/tmc/events{/privacy}", "received_events_url": "https://api.github.com/users/tmc/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}, {"id": 475997849, "node_id": "MDU6TGFiZWw0NzU5OTc4NDk=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/tests", "name": "tests", "color": "f9d0c4", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 9, "created_at": "2017-12-31T01:41:59Z", "updated_at": "2018-01-03T21:38:47Z", "closed_at": "2018-01-03T21:38:26Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/freedomofpress/securedrop/pulls/2776", "html_url": "https://github.com/freedomofpress/securedrop/pull/2776", "diff_url": "https://github.com/freedomofpress/securedrop/pull/2776.diff", "patch_url": "https://github.com/freedomofpress/securedrop/pull/2776.patch", "merged_at": "2018-01-03T21:38:26Z"}, "body": "## Status\r\n\r\nReady for review\r\n\r\n## Description of Changes\r\n\r\nFixes #2775.\r\n\r\nChanges proposed in this pull request:\r\n\r\nAdd synchronization to these tests to wait for keys to be present before deleting collections.\r\n\r\n## Testing\r\n\r\nCI\r\n\r\n## Deployment\r\n\r\nN/A\r\n\r\n## Checklist\r\n\r\nN/A", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2776/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2776/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2775", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2775/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2775/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2775/events", "html_url": "https://github.com/freedomofpress/securedrop/issues/2775", "id": 285234382, "node_id": "MDU6SXNzdWUyODUyMzQzODI=", "number": 2775, "title": "tests/test_integration.py: test_delete_collections fails in resource-constrained environments", "user": {"login": "tmc", "id": 3977, "node_id": "MDQ6VXNlcjM5Nzc=", "avatar_url": "https://avatars.githubusercontent.com/u/3977?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tmc", "html_url": "https://github.com/tmc", "followers_url": "https://api.github.com/users/tmc/followers", "following_url": "https://api.github.com/users/tmc/following{/other_user}", "gists_url": "https://api.github.com/users/tmc/gists{/gist_id}", "starred_url": "https://api.github.com/users/tmc/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tmc/subscriptions", "organizations_url": "https://api.github.com/users/tmc/orgs", "repos_url": "https://api.github.com/users/tmc/repos", "events_url": "https://api.github.com/users/tmc/events{/privacy}", "received_events_url": "https://api.github.com/users/tmc/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}, {"id": 475997849, "node_id": "MDU6TGFiZWw0NzU5OTc4NDk=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/tests", "name": "tests", "color": "f9d0c4", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2017-12-31T01:39:51Z", "updated_at": "2018-01-03T21:38:26Z", "closed_at": "2018-01-03T21:38:26Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Example failure:\r\n\r\n```\r\nroot@7ac0ec1295f4:/app# pytest -v -s -x tests/test_integration.py::TestIntegration::test_delete_collection\r\n01:38:52 Warm shut down requested\r\n=============================== test session starts ===============================\r\nplatform linux2 -- Python 2.7.6, pytest-3.1.1, py-1.4.34, pluggy-0.4.0 -- /usr/bin/python\r\ncachedir: tests/.cache\r\nrootdir: /app/tests, inifile: pytest.ini\r\nplugins: cov-2.5.1, capturelog-0.7\r\ncollected 11 items \r\n\r\ntests/test_integration.py::TestIntegration::test_delete_collection tail: /tmp/test_rqworker.log: file truncated\r\n01:38:53 RQ worker u'rq:worker:7ac0ec1295f4.11902' started, version 0.8.0\r\n01:38:53 Cleaning registries for queue: test\r\n01:38:53 \r\n01:38:53 *** Listening on test...\r\n01:38:55 test: rm.srm(u'/tmp/securedrop/store/TTNZRXN4NQF4BCA7FLE3F2YZF443UIWDXU6TVGGHA33RPMDX6KJY2ZTEAVROAYTSGSLBTKSSOAOS66IOLHW6BUTEMLNU4LGGNDEE6IQ=') (63ea6f53-d607-4526-b364-e65ccbecf5cb)\r\n01:38:55 test: Job OK (63ea6f53-d607-4526-b364-e65ccbecf5cb)\r\n01:38:55 Result is kept for 500 seconds\r\n01:38:55 \r\n01:38:55 *** Listening on test...\r\n[2017-12-31 01:38:57,900] ERROR in utils: async_genkey for source (filesystem_id=TTNZRXN4NQF4BCA7FLE3F2YZF443UIWDXU6TVGGHA33RPMDX6KJY2ZTEAVROAYTSGSLBTKSSOAOS66IOLHW6BUTEMLNU4LGGNDEE6IQ=): No row was found for one()\r\nPASSED\r\n```\r\nnote: this is the output generated after the patch from #2772 is applied\r\n\r\nThis appears to be a race between collection deletion in the test and the keys being generated in async_keygen (the source is removed while async_keygen is running).", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2775/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2775/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2760", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2760/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2760/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2760/events", "html_url": "https://github.com/freedomofpress/securedrop/issues/2760", "id": 283649717, "node_id": "MDU6SXNzdWUyODM2NDk3MTc=", "number": 2760, "title": "./securedrop-admin sdconfig failure on SMTP host checking", "user": {"login": "kushaldas", "id": 272303, "node_id": "MDQ6VXNlcjI3MjMwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/272303?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kushaldas", "html_url": "https://github.com/kushaldas", "followers_url": "https://api.github.com/users/kushaldas/followers", "following_url": "https://api.github.com/users/kushaldas/following{/other_user}", "gists_url": "https://api.github.com/users/kushaldas/gists{/gist_id}", "starred_url": "https://api.github.com/users/kushaldas/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kushaldas/subscriptions", "organizations_url": "https://api.github.com/users/kushaldas/orgs", "repos_url": "https://api.github.com/users/kushaldas/repos", "events_url": "https://api.github.com/users/kushaldas/events{/privacy}", "received_events_url": "https://api.github.com/users/kushaldas/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}, {"id": 192539287, "node_id": "MDU6TGFiZWwxOTI1MzkyODc=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/ops/deployment", "name": "ops/deployment", "color": "c7def8", "default": false, "description": null}, {"id": 495896968, "node_id": "MDU6TGFiZWw0OTU4OTY5Njg=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/unable%20to%20reproduce", "name": "unable to reproduce", "color": "fbca04", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2017-12-20T18:07:19Z", "updated_at": "2018-03-20T03:56:26Z", "closed_at": "2018-03-20T03:56:26Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "# Bug\r\n\r\n## Description\r\n\r\nSome random times, the `./securedrop-admin sdconfig` command fails on validation on SMTP .\r\n\r\n## Steps to Reproduce\r\n\r\n.`$ ./securedrop-admin sdconfig`\r\n\r\n## Expected Behavior\r\n\r\nIt should pass.\r\n\r\n## Actual Behavior\r\n\r\n```\r\nTASK [validate : Perform SMTP lookup check.] *******************************************************************\r\nfatal: [localhost]: FAILED! => {\"changed\": false, \"cmd\": [\"torify\", \"host\", \"-W=10\", \"-R=3\", \"-T\", \"-4\", \"smtp.gmail.com\", \"8.8.8.8\"], \"delta\": \"0:00:03.061367\", \"end\": \"2017-12-20 17:55:05.760958\", \"failed\": true, \"rc\": 1, \"start\": \"2017-12-20 17:55:02.699591\", \"stderr\": \"\", \"stderr_lines\": [], \"stdout\": \";; connection timed out; no servers could be reached\", \"stdout_lines\": [\";; connection timed out; no servers could be reached\"]}\r\n...ignoring\r\n\r\nTASK [validate : Validate SMTP relay connection.] **************************************************************\r\nfatal: [localhost]: FAILED! => {\r\n    \"assertion\": \"'has address' in smtp_validate_result.stdout\", \r\n    \"changed\": false, \r\n    \"evaluated_to\": false, \r\n    \"failed\": true, \r\n    \"msg\": \"The SMTP relay domain failed during lookup. This domain is the server contacted for authentication in order to send OSSEC email notifications. You should manually edit the file `group_vars/all/site-specific` and confirm that the `smtp_relay` var is set correctly.\"\r\n\r\n```\r\n\r\n\r\n## Comments\r\n\r\nWe can remove the whole validate or something similar.\r\n", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2760/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2760/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2754", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2754/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2754/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2754/events", "html_url": "https://github.com/freedomofpress/securedrop/pull/2754", "id": 282651210, "node_id": "MDExOlB1bGxSZXF1ZXN0MTU4NzYwNjg0", "number": 2754, "title": "Docs - remove 'edit on GitHub' link", "user": {"login": "trankmichael", "id": 8660111, "node_id": "MDQ6VXNlcjg2NjAxMTE=", "avatar_url": "https://avatars.githubusercontent.com/u/8660111?v=4", "gravatar_id": "", "url": "https://api.github.com/users/trankmichael", "html_url": "https://github.com/trankmichael", "followers_url": "https://api.github.com/users/trankmichael/followers", "following_url": "https://api.github.com/users/trankmichael/following{/other_user}", "gists_url": "https://api.github.com/users/trankmichael/gists{/gist_id}", "starred_url": "https://api.github.com/users/trankmichael/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/trankmichael/subscriptions", "organizations_url": "https://api.github.com/users/trankmichael/orgs", "repos_url": "https://api.github.com/users/trankmichael/repos", "events_url": "https://api.github.com/users/trankmichael/events{/privacy}", "received_events_url": "https://api.github.com/users/trankmichael/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}, {"id": 118465787, "node_id": "MDU6TGFiZWwxMTg0NjU3ODc=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/docs", "name": "docs", "color": "d4c5f9", "default": false, "description": null}, {"id": 474552509, "node_id": "MDU6TGFiZWw0NzQ1NTI1MDk=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/PR:%20Pending%20additional%20work", "name": "PR: Pending additional work", "color": "fef2c0", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 10, "created_at": "2017-12-16T21:16:20Z", "updated_at": "2018-02-16T03:44:07Z", "closed_at": "2018-02-16T03:44:07Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/freedomofpress/securedrop/pulls/2754", "html_url": "https://github.com/freedomofpress/securedrop/pull/2754", "diff_url": "https://github.com/freedomofpress/securedrop/pull/2754.diff", "patch_url": "https://github.com/freedomofpress/securedrop/pull/2754.patch", "merged_at": null}, "body": "## Status\r\n\r\nwork needed\r\n\r\n\r\n## Description of Changes\r\n\r\nFixes #2194 .\r\n\r\nRemoves the \"Edit on Github\" link in the top right of the header in the doc template. \r\n\r\nFollowed the fix outlined at [sphinx-doc/sphinx/#2386 ](https://github.com/sphinx-doc/sphinx/issues/2386#issuecomment-217861381)\r\n\r\n## Testing\r\n\r\nLocal builds with `make docs` works and linting passes. I am not sure how to confirm whether or not the link is actually removed because these changes are not included when the docs are built locally with `make docs`. Builds with `make docs` have \"View source\" instead of \"Edit on Github\". Both types of links were removed in these changes. Could someone advise me on how to check whether or not the \"Edit on Github\" link is in fact removed? \r\n\r\n## Deployment\r\n\r\nAny special considerations for deployment? Consider both:\r\n\r\n1. Upgrading existing production instances. **No**\r\n2. New installs. **No** \r\n\r\n## Checklist\r\n\r\n### If you made changes to documentation:\r\n\r\n- [x] Doc linting passed locally\r\n", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2754/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2754/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2749", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2749/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2749/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2749/events", "html_url": "https://github.com/freedomofpress/securedrop/pull/2749", "id": 282070400, "node_id": "MDExOlB1bGxSZXF1ZXN0MTU4MzM0MTEy", "number": 2749, "title": "source: make codename hint visible on first submission", "user": {"login": "ghost", "id": 10137, "node_id": "MDQ6VXNlcjEwMTM3", "avatar_url": "https://avatars.githubusercontent.com/u/10137?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ghost", "html_url": "https://github.com/ghost", "followers_url": "https://api.github.com/users/ghost/followers", "following_url": "https://api.github.com/users/ghost/following{/other_user}", "gists_url": "https://api.github.com/users/ghost/gists{/gist_id}", "starred_url": "https://api.github.com/users/ghost/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ghost/subscriptions", "organizations_url": "https://api.github.com/users/ghost/orgs", "repos_url": "https://api.github.com/users/ghost/repos", "events_url": "https://api.github.com/users/ghost/events{/privacy}", "received_events_url": "https://api.github.com/users/ghost/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}, {"id": 744728978, "node_id": "MDU6TGFiZWw3NDQ3Mjg5Nzg=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/goals:%20improve%20source%20experience", "name": "goals: improve source experience", "color": "0e8a16", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2017-12-14T11:35:35Z", "updated_at": "2017-12-14T19:14:12Z", "closed_at": "2017-12-14T19:14:10Z", "author_association": "NONE", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/freedomofpress/securedrop/pulls/2749", "html_url": "https://github.com/freedomofpress/securedrop/pull/2749", "diff_url": "https://github.com/freedomofpress/securedrop/pull/2749.diff", "patch_url": "https://github.com/freedomofpress/securedrop/pull/2749.patch", "merged_at": "2017-12-14T19:14:10Z"}, "body": "## Status\r\n\r\nReady for review\r\n\r\n## Description of Changes\r\n\r\nThe link is not correct, fix it by adding -visible\r\n\r\n## Testing\r\n\r\n* make images dev # yeah, that's the modern docker way of doing things !\r\n* firefox http://127.0.0.1:8080/generate\r\n* submit a message\r\n* click on \"Forgot your codename? \" in the thank you green box\r\n* see the codename shows at the bottom of the page\r\n\r\n## Deployment\r\n\r\nN/A\r\n\r\n## Checklist\r\n\r\n### If you made changes to the app code:\r\n\r\n- [x] Unit and functional tests pass on the development VM\r\n", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2749/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2749/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2734", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2734/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2734/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2734/events", "html_url": "https://github.com/freedomofpress/securedrop/issues/2734", "id": 281762007, "node_id": "MDU6SXNzdWUyODE3NjIwMDc=", "number": 2734, "title": "Language menu of source journalist lack spacing.", "user": {"login": "fpoulain", "id": 32539071, "node_id": "MDQ6VXNlcjMyNTM5MDcx", "avatar_url": "https://avatars.githubusercontent.com/u/32539071?v=4", "gravatar_id": "", "url": "https://api.github.com/users/fpoulain", "html_url": "https://github.com/fpoulain", "followers_url": "https://api.github.com/users/fpoulain/followers", "following_url": "https://api.github.com/users/fpoulain/following{/other_user}", "gists_url": "https://api.github.com/users/fpoulain/gists{/gist_id}", "starred_url": "https://api.github.com/users/fpoulain/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/fpoulain/subscriptions", "organizations_url": "https://api.github.com/users/fpoulain/orgs", "repos_url": "https://api.github.com/users/fpoulain/repos", "events_url": "https://api.github.com/users/fpoulain/events{/privacy}", "received_events_url": "https://api.github.com/users/fpoulain/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}, {"id": 652906953, "node_id": "MDU6TGFiZWw2NTI5MDY5NTM=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/i18n", "name": "i18n", "color": "d4c5f9", "default": false, "description": "Anything related to translation or internationalization of SecureDrop"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2017-12-13T14:09:19Z", "updated_at": "2017-12-13T16:29:43Z", "closed_at": "2017-12-13T16:24:14Z", "author_association": "NONE", "active_lock_reason": null, "body": "Language menu of source journalist lack spacing.\r\n\r\nSeen on http://source.demo.securedrop.club/ deployed from commit e4fded239f8b7358fc20db57f299a1c22ac5d249.\r\n\r\n![capture d ecran de 2017-12-13 14 54 54](https://user-images.githubusercontent.com/32539071/33942534-8dab8c3c-e016-11e7-8fc2-520a8270ef2b.png)\r\n\r\nAdding something like `margin-left: 1em;` in css makes it better:\r\n\r\n![capture d ecran de 2017-12-13 14 56 44](https://user-images.githubusercontent.com/32539071/33942543-939c6bb6-e016-11e7-9d22-5c1ad694cddb.png)", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2734/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2734/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2707", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2707/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2707/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2707/events", "html_url": "https://github.com/freedomofpress/securedrop/pull/2707", "id": 280655009, "node_id": "MDExOlB1bGxSZXF1ZXN0MTU3MzYwNzI3", "number": 2707, "title": "i18n: s/lazy_gettext/gettext/ for pybabel extract", "user": {"login": "ghost", "id": 10137, "node_id": "MDQ6VXNlcjEwMTM3", "avatar_url": "https://avatars.githubusercontent.com/u/10137?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ghost", "html_url": "https://github.com/ghost", "followers_url": "https://api.github.com/users/ghost/followers", "following_url": "https://api.github.com/users/ghost/following{/other_user}", "gists_url": "https://api.github.com/users/ghost/gists{/gist_id}", "starred_url": "https://api.github.com/users/ghost/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ghost/subscriptions", "organizations_url": "https://api.github.com/users/ghost/orgs", "repos_url": "https://api.github.com/users/ghost/repos", "events_url": "https://api.github.com/users/ghost/events{/privacy}", "received_events_url": "https://api.github.com/users/ghost/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}, {"id": 652906953, "node_id": "MDU6TGFiZWw2NTI5MDY5NTM=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/i18n", "name": "i18n", "color": "d4c5f9", "default": false, "description": "Anything related to translation or internationalization of SecureDrop"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2017-12-09T00:19:12Z", "updated_at": "2017-12-12T19:57:49Z", "closed_at": "2017-12-12T19:57:46Z", "author_association": "NONE", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/freedomofpress/securedrop/pulls/2707", "html_url": "https://github.com/freedomofpress/securedrop/pull/2707", "diff_url": "https://github.com/freedomofpress/securedrop/pull/2707.diff", "patch_url": "https://github.com/freedomofpress/securedrop/pull/2707.patch", "merged_at": "2017-12-12T19:57:46Z"}, "body": "## Status\r\n\r\nReady for review\r\n\r\n## Description of Changes\r\n\r\nlazy_gettext is not recognized by pybabel extract: map it to gettext\r\nintead.\r\n\r\n## Testing\r\n\r\n* vagrant ssh development\r\n* cd /vagrant/securedrop\r\n* ./manage.py translate-messages --extract-update\r\n* verify strings from {source,journalist}_app/forms.py are preserved in translations/messages.pot\r\n\r\n## Deployment\r\n\r\nN/A\r\n\r\n## Checklist\r\n\r\n### If you made changes to the app code:\r\n\r\n- [x] Unit and functional tests pass on the development VM\r\n", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2707/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2707/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2698", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2698/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2698/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2698/events", "html_url": "https://github.com/freedomofpress/securedrop/issues/2698", "id": 280356964, "node_id": "MDU6SXNzdWUyODAzNTY5NjQ=", "number": 2698, "title": "OS X developer guide does not work", "user": {"login": "b-meson", "id": 3100220, "node_id": "MDQ6VXNlcjMxMDAyMjA=", "avatar_url": "https://avatars.githubusercontent.com/u/3100220?v=4", "gravatar_id": "", "url": "https://api.github.com/users/b-meson", "html_url": "https://github.com/b-meson", "followers_url": "https://api.github.com/users/b-meson/followers", "following_url": "https://api.github.com/users/b-meson/following{/other_user}", "gists_url": "https://api.github.com/users/b-meson/gists{/gist_id}", "starred_url": "https://api.github.com/users/b-meson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/b-meson/subscriptions", "organizations_url": "https://api.github.com/users/b-meson/orgs", "repos_url": "https://api.github.com/users/b-meson/repos", "events_url": "https://api.github.com/users/b-meson/events{/privacy}", "received_events_url": "https://api.github.com/users/b-meson/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}, {"id": 118465787, "node_id": "MDU6TGFiZWwxMTg0NjU3ODc=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/docs", "name": "docs", "color": "d4c5f9", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2017-12-08T03:16:50Z", "updated_at": "2017-12-22T17:09:08Z", "closed_at": "2017-12-22T17:09:08Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "# Bug\r\n\r\n## Description\r\n\r\nRunning through the OS X developer guide throws a stacktrace and doesn't actually work on a fresh, new computer.\r\n\r\n## Steps to Reproduce\r\n\r\nIn a new OS X machine run the `pip install -U virtualenvwrapper` described [here](https://raw.githubusercontent.com/freedomofpress/securedrop/develop/docs/development/setup_development.rst).\r\n\r\n## Expected Behavior\r\n\r\nFollowing the developer guide should let a new developer get their dev environment working.\r\n\r\n## Actual Behavior\r\n\r\nSee below stacktrace\r\n```\r\nInstalling collected packages: virtualenv, pbr, six, stevedore, virtualenv-clone, virtualenvwrapper\r\nException:\r\nTraceback (most recent call last):\r\n  File \"/Library/Python/2.7/site-packages/pip-9.0.1-py2.7.egg/pip/basecommand.py\", line 215, in main\r\n    status = self.run(options, args)\r\n  File \"/Library/Python/2.7/site-packages/pip-9.0.1-py2.7.egg/pip/commands/install.py\", line 342, in run\r\n    prefix=options.prefix_path,\r\n  File \"/Library/Python/2.7/site-packages/pip-9.0.1-py2.7.egg/pip/req/req_set.py\", line 784, in install\r\n    **kwargs\r\n  File \"/Library/Python/2.7/site-packages/pip-9.0.1-py2.7.egg/pip/req/req_install.py\", line 851, in install\r\n    self.move_wheel_files(self.source_dir, root=root, prefix=prefix)\r\n  File \"/Library/Python/2.7/site-packages/pip-9.0.1-py2.7.egg/pip/req/req_install.py\", line 1064, in move_wheel_files\r\n    isolated=self.isolated,\r\n  File \"/Library/Python/2.7/site-packages/pip-9.0.1-py2.7.egg/pip/wheel.py\", line 345, in move_wheel_files\r\n    clobber(source, lib_dir, True)\r\n  File \"/Library/Python/2.7/site-packages/pip-9.0.1-py2.7.egg/pip/wheel.py\", line 323, in clobber\r\n    shutil.copyfile(srcfile, destfile)\r\n  File \"/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/shutil.py\", line 83, in copyfile\r\n    with open(dst, 'wb') as fdst:\r\nIOError: [Errno 13] Permission denied: '/Library/Python/2.7/site-packages/virtualenv.pyc'\r\n```\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2698/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2698/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2694", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2694/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2694/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2694/events", "html_url": "https://github.com/freedomofpress/securedrop/pull/2694", "id": 280317629, "node_id": "MDExOlB1bGxSZXF1ZXN0MTU3MTI5NTI5", "number": 2694, "title": "source: explicitly add space for <strong> in flash message", "user": {"login": "ghost", "id": 10137, "node_id": "MDQ6VXNlcjEwMTM3", "avatar_url": "https://avatars.githubusercontent.com/u/10137?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ghost", "html_url": "https://github.com/ghost", "followers_url": "https://api.github.com/users/ghost/followers", "following_url": "https://api.github.com/users/ghost/following{/other_user}", "gists_url": "https://api.github.com/users/ghost/gists{/gist_id}", "starred_url": "https://api.github.com/users/ghost/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ghost/subscriptions", "organizations_url": "https://api.github.com/users/ghost/orgs", "repos_url": "https://api.github.com/users/ghost/repos", "events_url": "https://api.github.com/users/ghost/events{/privacy}", "received_events_url": "https://api.github.com/users/ghost/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}, {"id": 475977399, "node_id": "MDU6TGFiZWw0NzU5NzczOTk=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/source%20interface%20(SI)", "name": "source interface (SI)", "color": "f9d0c4", "default": false, "description": ""}, {"id": 520554056, "node_id": "MDU6TGFiZWw1MjA1NTQwNTY=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/UX", "name": "UX", "color": "5319e7", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2017-12-07T23:34:38Z", "updated_at": "2017-12-09T00:09:59Z", "closed_at": "2017-12-08T23:29:37Z", "author_association": "NONE", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/freedomofpress/securedrop/pulls/2694", "html_url": "https://github.com/freedomofpress/securedrop/pull/2694", "diff_url": "https://github.com/freedomofpress/securedrop/pull/2694.diff", "patch_url": "https://github.com/freedomofpress/securedrop/pull/2694.patch", "merged_at": "2017-12-08T23:29:37Z"}, "body": "## Status\r\n\r\nReady for review\r\n\r\n## Description of Changes\r\n\r\nFixes #2693\r\n\r\nWhen using display: flex CSS on the outer element of &lt;b>A&lt;/b> B, it will\r\nshow as AB instead of A B. Add a non breakable space.\r\n\r\n## Testing\r\n\r\n* vagrant up /staging/\r\n* firefox http://$(cat install_files/ansible-base/app-source-ths).to/\r\n\r\n## Deployment\r\n\r\nN/A\r\n\r\n## Checklist\r\n\r\n### If you made changes to the app code:\r\n\r\n- [x] Unit and functional tests pass on the development VM\r\n", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2694/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2694/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2693", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2693/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2693/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2693/events", "html_url": "https://github.com/freedomofpress/securedrop/issues/2693", "id": 280305562, "node_id": "MDU6SXNzdWUyODAzMDU1NjI=", "number": 2693, "title": "Tor2Web warning does not display well", "user": {"login": "ghost", "id": 10137, "node_id": "MDQ6VXNlcjEwMTM3", "avatar_url": "https://avatars.githubusercontent.com/u/10137?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ghost", "html_url": "https://github.com/ghost", "followers_url": "https://api.github.com/users/ghost/followers", "following_url": "https://api.github.com/users/ghost/following{/other_user}", "gists_url": "https://api.github.com/users/ghost/gists{/gist_id}", "starred_url": "https://api.github.com/users/ghost/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ghost/subscriptions", "organizations_url": "https://api.github.com/users/ghost/orgs", "repos_url": "https://api.github.com/users/ghost/repos", "events_url": "https://api.github.com/users/ghost/events{/privacy}", "received_events_url": "https://api.github.com/users/ghost/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}, {"id": 520554056, "node_id": "MDU6TGFiZWw1MjA1NTQwNTY=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/UX", "name": "UX", "color": "5319e7", "default": false, "description": null}, {"id": 744728978, "node_id": "MDU6TGFiZWw3NDQ3Mjg5Nzg=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/goals:%20improve%20source%20experience", "name": "goals: improve source experience", "color": "0e8a16", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2017-12-07T22:42:25Z", "updated_at": "2017-12-08T23:29:37Z", "closed_at": "2017-12-08T23:29:37Z", "author_association": "NONE", "active_lock_reason": null, "body": "# Bug\r\n\r\n## Description\r\n\r\nThe &lt;strong> tags are incorrectly set.\r\n\r\n## Steps to Reproduce\r\n\r\nfirefox https://zdf4nikyuswdzbt6.onion.to/\r\n\r\n## Expected Behavior\r\n\r\nSpaces between words\r\n\r\n## Actual Behavior\r\n\r\nMissing spaces and weird bold / regular changes.\r\n\r\n![a](https://user-images.githubusercontent.com/433594/33742345-3c1b4d20-dba8-11e7-8e37-1489cc69cffb.png)\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2693/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2693/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2692", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2692/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2692/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2692/events", "html_url": "https://github.com/freedomofpress/securedrop/issues/2692", "id": 280298106, "node_id": "MDU6SXNzdWUyODAyOTgxMDY=", "number": 2692, "title": " \"existing codename\" and \"new codename\" are misleading", "user": {"login": "ghost", "id": 10137, "node_id": "MDQ6VXNlcjEwMTM3", "avatar_url": "https://avatars.githubusercontent.com/u/10137?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ghost", "html_url": "https://github.com/ghost", "followers_url": "https://api.github.com/users/ghost/followers", "following_url": "https://api.github.com/users/ghost/following{/other_user}", "gists_url": "https://api.github.com/users/ghost/gists{/gist_id}", "starred_url": "https://api.github.com/users/ghost/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ghost/subscriptions", "organizations_url": "https://api.github.com/users/ghost/orgs", "repos_url": "https://api.github.com/users/ghost/repos", "events_url": "https://api.github.com/users/ghost/events{/privacy}", "received_events_url": "https://api.github.com/users/ghost/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}, {"id": 520554056, "node_id": "MDU6TGFiZWw1MjA1NTQwNTY=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/UX", "name": "UX", "color": "5319e7", "default": false, "description": null}, {"id": 744728978, "node_id": "MDU6TGFiZWw3NDQ3Mjg5Nzg=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/goals:%20improve%20source%20experience", "name": "goals: improve source experience", "color": "0e8a16", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2017-12-07T22:13:02Z", "updated_at": "2017-12-21T15:23:32Z", "closed_at": "2017-12-21T15:23:32Z", "author_association": "NONE", "active_lock_reason": null, "body": "# Bug\r\n\r\n## Description\r\n\r\nin the [source interface generate page](http://source.i18n.securedrop.club/generate) the  \"existing codename\" can be misread as the codename shown in the page. Using B. Tonasse words:\r\n\r\n`The text on these buttons is actually misleading, even in English, because of the previous string. When I first read this, I thought the \"existing codename\" was the codename that had just been generated and is shown above. But it's actually the other way around: the code above is the \"new codename\". Since the user gets to this page when using the service for the first time, it's weird to assume he might already have a codename.`\r\n\r\n## Steps to Reproduce\r\n\r\n* visit http://source.i18n.securedrop.club/generate\r\n\r\n## Expected Behavior\r\n\r\nNo confusion\r\n\r\n## Actual Behavior\r\n\r\nConfusion\r\n\r\n## Comments\r\n\r\n![a](https://user-images.githubusercontent.com/433594/33741339-2a9a76e2-dba4-11e7-8efe-5ae5e90b322f.png)\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2692/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2692/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2684", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2684/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2684/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2684/events", "html_url": "https://github.com/freedomofpress/securedrop/pull/2684", "id": 279862510, "node_id": "MDExOlB1bGxSZXF1ZXN0MTU2ODA3ODQ2", "number": 2684, "title": "i18n: do not expose unsupported locales", "user": {"login": "ghost", "id": 10137, "node_id": "MDQ6VXNlcjEwMTM3", "avatar_url": "https://avatars.githubusercontent.com/u/10137?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ghost", "html_url": "https://github.com/ghost", "followers_url": "https://api.github.com/users/ghost/followers", "following_url": "https://api.github.com/users/ghost/following{/other_user}", "gists_url": "https://api.github.com/users/ghost/gists{/gist_id}", "starred_url": "https://api.github.com/users/ghost/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ghost/subscriptions", "organizations_url": "https://api.github.com/users/ghost/orgs", "repos_url": "https://api.github.com/users/ghost/repos", "events_url": "https://api.github.com/users/ghost/events{/privacy}", "received_events_url": "https://api.github.com/users/ghost/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}, {"id": 652906953, "node_id": "MDU6TGFiZWw2NTI5MDY5NTM=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/i18n", "name": "i18n", "color": "d4c5f9", "default": false, "description": "Anything related to translation or internationalization of SecureDrop"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/freedomofpress/securedrop/milestones/37", "html_url": "https://github.com/freedomofpress/securedrop/milestone/37", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/milestones/37/labels", "id": 2945103, "node_id": "MDk6TWlsZXN0b25lMjk0NTEwMw==", "number": 37, "title": "0.5.1", "description": "Tor apt repo", "creator": {"login": "redshiftzero", "id": 7832803, "node_id": "MDQ6VXNlcjc4MzI4MDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7832803?v=4", "gravatar_id": "", "url": "https://api.github.com/users/redshiftzero", "html_url": "https://github.com/redshiftzero", "followers_url": "https://api.github.com/users/redshiftzero/followers", "following_url": "https://api.github.com/users/redshiftzero/following{/other_user}", "gists_url": "https://api.github.com/users/redshiftzero/gists{/gist_id}", "starred_url": "https://api.github.com/users/redshiftzero/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/redshiftzero/subscriptions", "organizations_url": "https://api.github.com/users/redshiftzero/orgs", "repos_url": "https://api.github.com/users/redshiftzero/repos", "events_url": "https://api.github.com/users/redshiftzero/events{/privacy}", "received_events_url": "https://api.github.com/users/redshiftzero/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 28, "state": "closed", "created_at": "2017-11-28T23:08:16Z", "updated_at": "2018-01-26T05:26:23Z", "due_on": "2018-01-16T08:00:00Z", "closed_at": "2018-01-26T05:26:23Z"}, "comments": 0, "created_at": "2017-12-06T18:41:46Z", "updated_at": "2017-12-21T16:53:54Z", "closed_at": "2017-12-21T16:20:30Z", "author_association": "NONE", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/freedomofpress/securedrop/pulls/2684", "html_url": "https://github.com/freedomofpress/securedrop/pull/2684", "diff_url": "https://github.com/freedomofpress/securedrop/pull/2684.diff", "patch_url": "https://github.com/freedomofpress/securedrop/pull/2684.patch", "merged_at": "2017-12-21T16:20:30Z"}, "body": "## Status\r\n\r\nReady for review / Work in progress\r\n\r\n## Description of Changes\r\n\r\nFixes #2681\r\n\r\nThe SUPPORTED_LOCALES list is enforced so the user cannot select a\r\nlanguage that it does not contain. The restriction based on the\r\nSUPPORTED_LOCALES variable is done at setup and used to narrow the\r\ncontent of the LOCALES variable.\r\n\r\nThe SUPPORTED_LOCALES content was previously only used to select the\r\nlanguages displayed via the language menu. This is incorrect because\r\nit would allow a user to add ?l=unsupported to see the interface in\r\none of the available languages even if it is not in the\r\nSUPPORTED_LOCALES list. This was also true if the browser it configured\r\nto prefer a given locale.\r\n\r\n## Testing\r\n\r\n* Set the SUPPORTED_LOCALES to ['en_US'] only\r\n* Change the preferred language of your browser to French and visit the source interface\r\n* Visit the source interface and manually add **l=fr_FR** to the URL\r\n* In both cases the interface must show in English\r\n\r\n## Deployment\r\n\r\nOnly changes the locale selection logic, no impact on deployment.\r\n\r\n## Checklist\r\n\r\n### If you made changes to the app code:\r\n\r\n- [x] Unit and functional tests pass on the development VM\r\n\r\n## Comment\r\n\r\nThe **i18n: do not expose unsupported locales** commit is standalone. In the spirit of minimizing the changes for 0.5.1 it can be cherry-picked.", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2684/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2684/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2681", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2681/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2681/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2681/events", "html_url": "https://github.com/freedomofpress/securedrop/issues/2681", "id": 279718933, "node_id": "MDU6SXNzdWUyNzk3MTg5MzM=", "number": 2681, "title": "Disable languages that are not supported", "user": {"login": "ghost", "id": 10137, "node_id": "MDQ6VXNlcjEwMTM3", "avatar_url": "https://avatars.githubusercontent.com/u/10137?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ghost", "html_url": "https://github.com/ghost", "followers_url": "https://api.github.com/users/ghost/followers", "following_url": "https://api.github.com/users/ghost/following{/other_user}", "gists_url": "https://api.github.com/users/ghost/gists{/gist_id}", "starred_url": "https://api.github.com/users/ghost/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ghost/subscriptions", "organizations_url": "https://api.github.com/users/ghost/orgs", "repos_url": "https://api.github.com/users/ghost/repos", "events_url": "https://api.github.com/users/ghost/events{/privacy}", "received_events_url": "https://api.github.com/users/ghost/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}, {"id": 652906953, "node_id": "MDU6TGFiZWw2NTI5MDY5NTM=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/i18n", "name": "i18n", "color": "d4c5f9", "default": false, "description": "Anything related to translation or internationalization of SecureDrop"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/freedomofpress/securedrop/milestones/37", "html_url": "https://github.com/freedomofpress/securedrop/milestone/37", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/milestones/37/labels", "id": 2945103, "node_id": "MDk6TWlsZXN0b25lMjk0NTEwMw==", "number": 37, "title": "0.5.1", "description": "Tor apt repo", "creator": {"login": "redshiftzero", "id": 7832803, "node_id": "MDQ6VXNlcjc4MzI4MDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7832803?v=4", "gravatar_id": "", "url": "https://api.github.com/users/redshiftzero", "html_url": "https://github.com/redshiftzero", "followers_url": "https://api.github.com/users/redshiftzero/followers", "following_url": "https://api.github.com/users/redshiftzero/following{/other_user}", "gists_url": "https://api.github.com/users/redshiftzero/gists{/gist_id}", "starred_url": "https://api.github.com/users/redshiftzero/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/redshiftzero/subscriptions", "organizations_url": "https://api.github.com/users/redshiftzero/orgs", "repos_url": "https://api.github.com/users/redshiftzero/repos", "events_url": "https://api.github.com/users/redshiftzero/events{/privacy}", "received_events_url": "https://api.github.com/users/redshiftzero/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 28, "state": "closed", "created_at": "2017-11-28T23:08:16Z", "updated_at": "2018-01-26T05:26:23Z", "due_on": "2018-01-16T08:00:00Z", "closed_at": "2018-01-26T05:26:23Z"}, "comments": 2, "created_at": "2017-12-06T11:29:33Z", "updated_at": "2018-07-29T09:54:22Z", "closed_at": "2017-12-21T16:20:30Z", "author_association": "NONE", "active_lock_reason": null, "body": "# Bug\r\n\r\n## Description\r\n\r\nThe source and journalist interface can be switched to a non-supported language by:\r\n\r\n* l=fr_FR : this is ok as the person doing that knows details that are unlikely to confuse anyone\r\n* Accept-Languages is set to fr_FR : this is not good because it will lead the person into thinking French is supported\r\n\r\n## Steps to Reproduce\r\n\r\n* Set the SUPPORTED_LOCALES to ['en_US'] only\r\n* Change the preferred language of your browser to French and visit the source interface\r\n\r\n## Expected Behavior\r\n\r\n* The page displays in English\r\n\r\n## Actual Behavior\r\n\r\n* The page displays in French\r\n", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2681/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2681/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2678", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2678/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2678/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2678/events", "html_url": "https://github.com/freedomofpress/securedrop/issues/2678", "id": 279542506, "node_id": "MDU6SXNzdWUyNzk1NDI1MDY=", "number": 2678, "title": "Tails desktop shortcuts for Source and Journalist interface require reboot on first install", "user": {"login": "emkll", "id": 15223328, "node_id": "MDQ6VXNlcjE1MjIzMzI4", "avatar_url": "https://avatars.githubusercontent.com/u/15223328?v=4", "gravatar_id": "", "url": "https://api.github.com/users/emkll", "html_url": "https://github.com/emkll", "followers_url": "https://api.github.com/users/emkll/followers", "following_url": "https://api.github.com/users/emkll/following{/other_user}", "gists_url": "https://api.github.com/users/emkll/gists{/gist_id}", "starred_url": "https://api.github.com/users/emkll/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/emkll/subscriptions", "organizations_url": "https://api.github.com/users/emkll/orgs", "repos_url": "https://api.github.com/users/emkll/repos", "events_url": "https://api.github.com/users/emkll/events{/privacy}", "received_events_url": "https://api.github.com/users/emkll/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}, {"id": 192539287, "node_id": "MDU6TGFiZWwxOTI1MzkyODc=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/ops/deployment", "name": "ops/deployment", "color": "c7def8", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2017-12-05T21:47:08Z", "updated_at": "2020-01-31T23:51:37Z", "closed_at": "2020-01-31T23:51:37Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "# Bug\r\n\r\n## Description\r\n\r\nOn a fresh Tails (3.3+) install, `./securedrop-admin tailsconfig` does not mark `source.desktop` and `journalist.desktop` as trusted.\r\n## Steps to Reproduce\r\n\r\n- Install Tails 3.3 \r\n- Install SecureDrop \r\n- Run `./securedrop-admin tailsconfig'\r\n- Observe the lack of trusted source and journalist icons on desktop\r\n\r\n## Expected Behavior\r\n\r\nDesktop icons should be trusted after running `./securedrop-admin tailsconfig` and not require further user intervention.\r\n\r\n## Actual Behavior\r\n\r\nUsers must either: \r\n- Reboot the Admin tails workstation\r\n- Restart the network interface\r\n\r\n## Comments\r\n\r\nPerhaps we add a final down/up for network interfaces once `./securedrop-admin tailsconfig` changes trust settings for desktop icons.", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2678/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2678/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2665", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2665/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2665/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2665/events", "html_url": "https://github.com/freedomofpress/securedrop/pull/2665", "id": 278770745, "node_id": "MDExOlB1bGxSZXF1ZXN0MTU2MDU4Njk0", "number": 2665, "title": "[0.5] app: remove generated assets after installation", "user": {"login": "ghost", "id": 10137, "node_id": "MDQ6VXNlcjEwMTM3", "avatar_url": "https://avatars.githubusercontent.com/u/10137?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ghost", "html_url": "https://github.com/ghost", "followers_url": "https://api.github.com/users/ghost/followers", "following_url": "https://api.github.com/users/ghost/following{/other_user}", "gists_url": "https://api.github.com/users/ghost/gists{/gist_id}", "starred_url": "https://api.github.com/users/ghost/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ghost/subscriptions", "organizations_url": "https://api.github.com/users/ghost/orgs", "repos_url": "https://api.github.com/users/ghost/repos", "events_url": "https://api.github.com/users/ghost/events{/privacy}", "received_events_url": "https://api.github.com/users/ghost/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}, {"id": 192539287, "node_id": "MDU6TGFiZWwxOTI1MzkyODc=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/ops/deployment", "name": "ops/deployment", "color": "c7def8", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/freedomofpress/securedrop/milestones/26", "html_url": "https://github.com/freedomofpress/securedrop/milestone/26", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/milestones/26/labels", "id": 2555081, "node_id": "MDk6TWlsZXN0b25lMjU1NTA4MQ==", "number": 26, "title": "0.5", "description": "internationalize SecureDrop, app code refactor", "creator": {"login": "redshiftzero", "id": 7832803, "node_id": "MDQ6VXNlcjc4MzI4MDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7832803?v=4", "gravatar_id": "", "url": "https://api.github.com/users/redshiftzero", "html_url": "https://github.com/redshiftzero", "followers_url": "https://api.github.com/users/redshiftzero/followers", "following_url": "https://api.github.com/users/redshiftzero/following{/other_user}", "gists_url": "https://api.github.com/users/redshiftzero/gists{/gist_id}", "starred_url": "https://api.github.com/users/redshiftzero/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/redshiftzero/subscriptions", "organizations_url": "https://api.github.com/users/redshiftzero/orgs", "repos_url": "https://api.github.com/users/redshiftzero/repos", "events_url": "https://api.github.com/users/redshiftzero/events{/privacy}", "received_events_url": "https://api.github.com/users/redshiftzero/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 101, "state": "closed", "created_at": "2017-06-01T00:20:54Z", "updated_at": "2018-01-05T17:54:20Z", "due_on": "2017-12-05T08:00:00Z", "closed_at": "2018-01-05T17:54:20Z"}, "comments": 0, "created_at": "2017-12-03T12:35:58Z", "updated_at": "2017-12-03T23:14:29Z", "closed_at": "2017-12-03T23:14:27Z", "author_association": "NONE", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/freedomofpress/securedrop/pulls/2665", "html_url": "https://github.com/freedomofpress/securedrop/pull/2665", "diff_url": "https://github.com/freedomofpress/securedrop/pull/2665.diff", "patch_url": "https://github.com/freedomofpress/securedrop/pull/2665.patch", "merged_at": "2017-12-03T23:14:27Z"}, "body": "## Status\r\n\r\nReady for review\r\n\r\n## Description of Changes\r\n\r\nFixes #2651\r\n\r\nFlask-Assets uses Python's webassets to rebuild static assets, and\r\nwebassets will not rebuild them in static/gen if the are more\r\nrecent than the installed files. Which typically happens if:\r\n\r\n* package is built at time T\r\n* install package built at time T\r\n* package is built at time T+1\r\n* use installed packages for the first at time T+2 which generates\r\n  assets in static/gen dated T+2\r\n* install package built at time T+1\r\n* the generated assets are more recent (T+2) than the installed\r\n  files sources (T+1) and will not be rebuilt and therefore reflecting\r\n  the content of the package built at time T instead of the content of\r\n  the package built at time T+1\r\n\r\nThis is a rare condition which is only likely to show when testing\r\nrelease candidates\r\n\r\n## Testing\r\n\r\n* make build-debs\r\n* vagrant up /staging/\r\n* vagrant provision app-staging\r\n* torbrowser $(cat install_files/ansible-base/app-source-ths)\r\n* vagrant ssh app-staging\r\n* ls /var/www/securedrop/static/gen/ # contains source.js\r\n* dpkg -i /root/securedrop-app-code-0.5-rc5-amd64.deb\r\n* ls /var/www/securedrop/static/gen/ # contains nothing\r\n* torbrowser $(cat install_files/ansible-base/app-source-ths)\r\n* ls /var/www/securedrop/static/gen/ # contains source.js\r\n\r\n## Deployment\r\n\r\nIt will remove content of the static/gen directory which is empty during a first install and populated automatically when the user first visits the source/journalist page containing javascript.\r\n", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2665/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2665/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2650", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2650/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2650/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2650/events", "html_url": "https://github.com/freedomofpress/securedrop/pull/2650", "id": 278314699, "node_id": "MDExOlB1bGxSZXF1ZXN0MTU1NzUyNTIx", "number": 2650, "title": "[0.5] use lazy_gettext instead of gettext in wtforms", "user": {"login": "redshiftzero", "id": 7832803, "node_id": "MDQ6VXNlcjc4MzI4MDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7832803?v=4", "gravatar_id": "", "url": "https://api.github.com/users/redshiftzero", "html_url": "https://github.com/redshiftzero", "followers_url": "https://api.github.com/users/redshiftzero/followers", "following_url": "https://api.github.com/users/redshiftzero/following{/other_user}", "gists_url": "https://api.github.com/users/redshiftzero/gists{/gist_id}", "starred_url": "https://api.github.com/users/redshiftzero/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/redshiftzero/subscriptions", "organizations_url": "https://api.github.com/users/redshiftzero/orgs", "repos_url": "https://api.github.com/users/redshiftzero/repos", "events_url": "https://api.github.com/users/redshiftzero/events{/privacy}", "received_events_url": "https://api.github.com/users/redshiftzero/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}, {"id": 652906953, "node_id": "MDU6TGFiZWw2NTI5MDY5NTM=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/i18n", "name": "i18n", "color": "d4c5f9", "default": false, "description": "Anything related to translation or internationalization of SecureDrop"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/freedomofpress/securedrop/milestones/26", "html_url": "https://github.com/freedomofpress/securedrop/milestone/26", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/milestones/26/labels", "id": 2555081, "node_id": "MDk6TWlsZXN0b25lMjU1NTA4MQ==", "number": 26, "title": "0.5", "description": "internationalize SecureDrop, app code refactor", "creator": {"login": "redshiftzero", "id": 7832803, "node_id": "MDQ6VXNlcjc4MzI4MDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7832803?v=4", "gravatar_id": "", "url": "https://api.github.com/users/redshiftzero", "html_url": "https://github.com/redshiftzero", "followers_url": "https://api.github.com/users/redshiftzero/followers", "following_url": "https://api.github.com/users/redshiftzero/following{/other_user}", "gists_url": "https://api.github.com/users/redshiftzero/gists{/gist_id}", "starred_url": "https://api.github.com/users/redshiftzero/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/redshiftzero/subscriptions", "organizations_url": "https://api.github.com/users/redshiftzero/orgs", "repos_url": "https://api.github.com/users/redshiftzero/repos", "events_url": "https://api.github.com/users/redshiftzero/events{/privacy}", "received_events_url": "https://api.github.com/users/redshiftzero/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 101, "state": "closed", "created_at": "2017-06-01T00:20:54Z", "updated_at": "2018-01-05T17:54:20Z", "due_on": "2017-12-05T08:00:00Z", "closed_at": "2018-01-05T17:54:20Z"}, "comments": 0, "created_at": "2017-12-01T00:10:30Z", "updated_at": "2018-01-28T13:18:16Z", "closed_at": "2017-12-01T08:42:06Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/freedomofpress/securedrop/pulls/2650", "html_url": "https://github.com/freedomofpress/securedrop/pull/2650", "diff_url": "https://github.com/freedomofpress/securedrop/pull/2650.diff", "patch_url": "https://github.com/freedomofpress/securedrop/pull/2650.patch", "merged_at": "2017-12-01T08:42:06Z"}, "body": "Merge fix for #2644 into release branch", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2650/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2650/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2649", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2649/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2649/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2649/events", "html_url": "https://github.com/freedomofpress/securedrop/pull/2649", "id": 278295541, "node_id": "MDExOlB1bGxSZXF1ZXN0MTU1NzM4Mzcy", "number": 2649, "title": "[0.5] app: use lazy_gettext instead of gettext in wtforms", "user": {"login": "ghost", "id": 10137, "node_id": "MDQ6VXNlcjEwMTM3", "avatar_url": "https://avatars.githubusercontent.com/u/10137?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ghost", "html_url": "https://github.com/ghost", "followers_url": "https://api.github.com/users/ghost/followers", "following_url": "https://api.github.com/users/ghost/following{/other_user}", "gists_url": "https://api.github.com/users/ghost/gists{/gist_id}", "starred_url": "https://api.github.com/users/ghost/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ghost/subscriptions", "organizations_url": "https://api.github.com/users/ghost/orgs", "repos_url": "https://api.github.com/users/ghost/repos", "events_url": "https://api.github.com/users/ghost/events{/privacy}", "received_events_url": "https://api.github.com/users/ghost/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}, {"id": 652906953, "node_id": "MDU6TGFiZWw2NTI5MDY5NTM=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/i18n", "name": "i18n", "color": "d4c5f9", "default": false, "description": "Anything related to translation or internationalization of SecureDrop"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/freedomofpress/securedrop/milestones/26", "html_url": "https://github.com/freedomofpress/securedrop/milestone/26", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/milestones/26/labels", "id": 2555081, "node_id": "MDk6TWlsZXN0b25lMjU1NTA4MQ==", "number": 26, "title": "0.5", "description": "internationalize SecureDrop, app code refactor", "creator": {"login": "redshiftzero", "id": 7832803, "node_id": "MDQ6VXNlcjc4MzI4MDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7832803?v=4", "gravatar_id": "", "url": "https://api.github.com/users/redshiftzero", "html_url": "https://github.com/redshiftzero", "followers_url": "https://api.github.com/users/redshiftzero/followers", "following_url": "https://api.github.com/users/redshiftzero/following{/other_user}", "gists_url": "https://api.github.com/users/redshiftzero/gists{/gist_id}", "starred_url": "https://api.github.com/users/redshiftzero/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/redshiftzero/subscriptions", "organizations_url": "https://api.github.com/users/redshiftzero/orgs", "repos_url": "https://api.github.com/users/redshiftzero/repos", "events_url": "https://api.github.com/users/redshiftzero/events{/privacy}", "received_events_url": "https://api.github.com/users/redshiftzero/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 101, "state": "closed", "created_at": "2017-06-01T00:20:54Z", "updated_at": "2018-01-05T17:54:20Z", "due_on": "2017-12-05T08:00:00Z", "closed_at": "2018-01-05T17:54:20Z"}, "comments": 3, "created_at": "2017-11-30T22:41:18Z", "updated_at": "2018-01-28T13:18:16Z", "closed_at": "2017-12-01T00:07:57Z", "author_association": "NONE", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/freedomofpress/securedrop/pulls/2649", "html_url": "https://github.com/freedomofpress/securedrop/pull/2649", "diff_url": "https://github.com/freedomofpress/securedrop/pull/2649.diff", "patch_url": "https://github.com/freedomofpress/securedrop/pull/2649.patch", "merged_at": "2017-12-01T00:07:57Z"}, "body": "## Status\r\n\r\nReady for review\r\n\r\n## Description of Changes\r\n\r\nFixes #2644\r\n\r\nThe wtforms classes are evaluated outside of the context of a\r\nrequest. When gettext is used to set a parameter, it has no way to\r\nknow which language is going to be used and default to english.\r\n\r\nWe need to use lazy_gettext which delays the evaluation until the\r\nstring is used, i.e. when the user session is active and the language\r\npreferences can influence the translation.\r\n\r\n## Testing\r\n\r\n* vagrant ssh development\r\n* cd /vagrant/securedrop\r\n* ./manage.py run\r\n* firefox http://localhost:8080/login\r\n* switch to non default language\r\n* type enter for an empty passphrase\r\n* verify the error message is not displayed in english\r\n\r\n## Deployment\r\n\r\nUser interface only.\r\n\r\n## Checklist\r\n\r\n### If you made changes to the app code:\r\n\r\n- [x] Unit and functional tests pass on the development VM\r\n", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2649/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2649/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2627", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2627/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2627/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2627/events", "html_url": "https://github.com/freedomofpress/securedrop/pull/2627", "id": 277573163, "node_id": "MDExOlB1bGxSZXF1ZXN0MTU1MjA5NDg0", "number": 2627, "title": "Fix codename bar on source interface in RTL + LTR languages", "user": {"login": "redshiftzero", "id": 7832803, "node_id": "MDQ6VXNlcjc4MzI4MDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7832803?v=4", "gravatar_id": "", "url": "https://api.github.com/users/redshiftzero", "html_url": "https://github.com/redshiftzero", "followers_url": "https://api.github.com/users/redshiftzero/followers", "following_url": "https://api.github.com/users/redshiftzero/following{/other_user}", "gists_url": "https://api.github.com/users/redshiftzero/gists{/gist_id}", "starred_url": "https://api.github.com/users/redshiftzero/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/redshiftzero/subscriptions", "organizations_url": "https://api.github.com/users/redshiftzero/orgs", "repos_url": "https://api.github.com/users/redshiftzero/repos", "events_url": "https://api.github.com/users/redshiftzero/events{/privacy}", "received_events_url": "https://api.github.com/users/redshiftzero/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}, {"id": 385585080, "node_id": "MDU6TGFiZWwzODU1ODUwODA=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/QA:%20Release", "name": "QA: Release", "color": "fbca04", "default": false, "description": null}, {"id": 652906953, "node_id": "MDU6TGFiZWw2NTI5MDY5NTM=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/i18n", "name": "i18n", "color": "d4c5f9", "default": false, "description": "Anything related to translation or internationalization of SecureDrop"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2017-11-28T23:17:36Z", "updated_at": "2017-11-28T23:57:53Z", "closed_at": "2017-11-28T23:57:50Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/freedomofpress/securedrop/pulls/2627", "html_url": "https://github.com/freedomofpress/securedrop/pull/2627", "diff_url": "https://github.com/freedomofpress/securedrop/pull/2627.diff", "patch_url": "https://github.com/freedomofpress/securedrop/pull/2627.patch", "merged_at": "2017-11-28T23:57:50Z"}, "body": "## Status\r\n\r\nReady for review\r\n\r\n## Description of Changes\r\n\r\nFixes #2626 \r\n\r\nChanges proposed in this pull request:\r\n* The padlock and refresh codenames should appear at opposite\r\nsides of the codename in both RTL and LTR languages\r\n* The text should be centered in the middle of the bar:\r\n\r\n<img width=\"775\" alt=\"screen shot 2017-11-28 at 2 53 14 pm\" src=\"https://user-images.githubusercontent.com/7832803/33349478-1ba12b88-d44f-11e7-9641-358dac5e333d.png\">\r\n\r\n## Testing\r\n\r\nView the generate page on the source interface in both arabic and english\r\n\r\n## Deployment\r\n\r\nChange will be delivered in app code package\r\n\r\n## Checklist\r\n\r\n### If you made changes to the app code:\r\n\r\n- [x] Unit and functional tests pass on the development VM\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2627/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2627/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2625", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2625/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2625/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2625/events", "html_url": "https://github.com/freedomofpress/securedrop/pull/2625", "id": 277230879, "node_id": "MDExOlB1bGxSZXF1ZXN0MTU0OTYwOTIz", "number": 2625, "title": "Fix language picker styling in RTL languages", "user": {"login": "redshiftzero", "id": 7832803, "node_id": "MDQ6VXNlcjc4MzI4MDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7832803?v=4", "gravatar_id": "", "url": "https://api.github.com/users/redshiftzero", "html_url": "https://github.com/redshiftzero", "followers_url": "https://api.github.com/users/redshiftzero/followers", "following_url": "https://api.github.com/users/redshiftzero/following{/other_user}", "gists_url": "https://api.github.com/users/redshiftzero/gists{/gist_id}", "starred_url": "https://api.github.com/users/redshiftzero/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/redshiftzero/subscriptions", "organizations_url": "https://api.github.com/users/redshiftzero/orgs", "repos_url": "https://api.github.com/users/redshiftzero/repos", "events_url": "https://api.github.com/users/redshiftzero/events{/privacy}", "received_events_url": "https://api.github.com/users/redshiftzero/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}, {"id": 652906953, "node_id": "MDU6TGFiZWw2NTI5MDY5NTM=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/i18n", "name": "i18n", "color": "d4c5f9", "default": false, "description": "Anything related to translation or internationalization of SecureDrop"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/freedomofpress/securedrop/milestones/26", "html_url": "https://github.com/freedomofpress/securedrop/milestone/26", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/milestones/26/labels", "id": 2555081, "node_id": "MDk6TWlsZXN0b25lMjU1NTA4MQ==", "number": 26, "title": "0.5", "description": "internationalize SecureDrop, app code refactor", "creator": {"login": "redshiftzero", "id": 7832803, "node_id": "MDQ6VXNlcjc4MzI4MDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7832803?v=4", "gravatar_id": "", "url": "https://api.github.com/users/redshiftzero", "html_url": "https://github.com/redshiftzero", "followers_url": "https://api.github.com/users/redshiftzero/followers", "following_url": "https://api.github.com/users/redshiftzero/following{/other_user}", "gists_url": "https://api.github.com/users/redshiftzero/gists{/gist_id}", "starred_url": "https://api.github.com/users/redshiftzero/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/redshiftzero/subscriptions", "organizations_url": "https://api.github.com/users/redshiftzero/orgs", "repos_url": "https://api.github.com/users/redshiftzero/repos", "events_url": "https://api.github.com/users/redshiftzero/events{/privacy}", "received_events_url": "https://api.github.com/users/redshiftzero/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 101, "state": "closed", "created_at": "2017-06-01T00:20:54Z", "updated_at": "2018-01-05T17:54:20Z", "due_on": "2017-12-05T08:00:00Z", "closed_at": "2018-01-05T17:54:20Z"}, "comments": 2, "created_at": "2017-11-28T01:50:56Z", "updated_at": "2018-04-10T15:06:51Z", "closed_at": "2017-11-28T21:41:57Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/freedomofpress/securedrop/pulls/2625", "html_url": "https://github.com/freedomofpress/securedrop/pull/2625", "diff_url": "https://github.com/freedomofpress/securedrop/pull/2625.diff", "patch_url": "https://github.com/freedomofpress/securedrop/pull/2625.patch", "merged_at": "2017-11-28T21:41:57Z"}, "body": "## Status\r\n\r\nReady for review\r\n\r\n## Description of Changes\r\n\r\nFixes #2600.\r\n\r\nChanges proposed in this pull request:\r\n  * There should be a space between the flag icon and the text for\r\nRTL languages.\r\n\r\n## Testing\r\n\r\nIn development VM:\r\n\r\n1. `./manage.py --verbose translate-messages --compile`\r\n2. Add \u2018ar\u2019 to SUPPORTED_LOCALES in config.py\r\n3. Start source interface, select Arabic and you should see a space between the flag and the language label:\r\n\r\n<img width=\"995\" alt=\"screen shot 2017-11-27 at 5 45 09 pm\" src=\"https://user-images.githubusercontent.com/7832803/33298453-4ca701ee-d39b-11e7-921a-e8cc6012d740.png\">\r\n\r\n## Deployment\r\n\r\nSASS will not be directly deployed and instead will be compiled to CSS and shipped in the app code deb package\r\n\r\n## Checklist\r\n\r\n### If you made changes to the app code:\r\n\r\n- [ ] Unit and functional tests pass on the development VM --- CI here I come\r\n", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2625/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2625/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2609", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2609/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2609/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2609/events", "html_url": "https://github.com/freedomofpress/securedrop/issues/2609", "id": 276799337, "node_id": "MDU6SXNzdWUyNzY3OTkzMzc=", "number": 2609, "title": "async_genkey: thread safety issue in async_genkey by calling current_app in separate thread.", "user": {"login": "tmc", "id": 3977, "node_id": "MDQ6VXNlcjM5Nzc=", "avatar_url": "https://avatars.githubusercontent.com/u/3977?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tmc", "html_url": "https://github.com/tmc", "followers_url": "https://api.github.com/users/tmc/followers", "following_url": "https://api.github.com/users/tmc/following{/other_user}", "gists_url": "https://api.github.com/users/tmc/gists{/gist_id}", "starred_url": "https://api.github.com/users/tmc/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tmc/subscriptions", "organizations_url": "https://api.github.com/users/tmc/orgs", "repos_url": "https://api.github.com/users/tmc/repos", "events_url": "https://api.github.com/users/tmc/events{/privacy}", "received_events_url": "https://api.github.com/users/tmc/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}, {"id": 192539755, "node_id": "MDU6TGFiZWwxOTI1Mzk3NTU=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/app", "name": "app", "color": "bfe5bf", "default": false, "description": null}, {"id": 475997849, "node_id": "MDU6TGFiZWw0NzU5OTc4NDk=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/tests", "name": "tests", "color": "f9d0c4", "default": false, "description": null}, {"id": 652907032, "node_id": "MDU6TGFiZWw2NTI5MDcwMzI=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/goals:%20sick%20CI", "name": "goals: sick CI", "color": "0e8a16", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2017-11-26T04:47:21Z", "updated_at": "2017-12-31T03:34:10Z", "closed_at": "2017-12-31T03:34:10Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "# Bug\r\nasync_genkey calls current_app in some conditions and can raise `RuntimeError: Working outside of application context.`\r\n\r\n## Description\r\n\r\nasync_genkey calls current_app in some conditions and can raise `RuntimeError: Working outside of application context.` Example: https://gist.github.com/tmc/095d490608c7cc5e2aa5f4825cd7a4a3#file-gistfile1-txt-L1122\r\n\r\n## Steps to Reproduce\r\n\r\nThis is a flake I have running tests inside of a container in a qubes 3.2 machine.\r\n\r\n## Expected Behavior\r\nTo not break in case of an underlying error.\r\n\r\n## Actual Behavior\r\nBreaks when trying to call current_app.\r\n\r\n## Comments\r\nThere's clearly another underlying issue here but it shouldn't blow up in this manner.\r\n", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2609/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2609/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2600", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2600/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2600/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2600/events", "html_url": "https://github.com/freedomofpress/securedrop/issues/2600", "id": 275970610, "node_id": "MDU6SXNzdWUyNzU5NzA2MTA=", "number": 2600, "title": "i18n: menu needs spacing in arabic", "user": {"login": "ghost", "id": 10137, "node_id": "MDQ6VXNlcjEwMTM3", "avatar_url": "https://avatars.githubusercontent.com/u/10137?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ghost", "html_url": "https://github.com/ghost", "followers_url": "https://api.github.com/users/ghost/followers", "following_url": "https://api.github.com/users/ghost/following{/other_user}", "gists_url": "https://api.github.com/users/ghost/gists{/gist_id}", "starred_url": "https://api.github.com/users/ghost/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ghost/subscriptions", "organizations_url": "https://api.github.com/users/ghost/orgs", "repos_url": "https://api.github.com/users/ghost/repos", "events_url": "https://api.github.com/users/ghost/events{/privacy}", "received_events_url": "https://api.github.com/users/ghost/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}, {"id": 652906953, "node_id": "MDU6TGFiZWw2NTI5MDY5NTM=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/i18n", "name": "i18n", "color": "d4c5f9", "default": false, "description": "Anything related to translation or internationalization of SecureDrop"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/freedomofpress/securedrop/milestones/26", "html_url": "https://github.com/freedomofpress/securedrop/milestone/26", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/milestones/26/labels", "id": 2555081, "node_id": "MDk6TWlsZXN0b25lMjU1NTA4MQ==", "number": 26, "title": "0.5", "description": "internationalize SecureDrop, app code refactor", "creator": {"login": "redshiftzero", "id": 7832803, "node_id": "MDQ6VXNlcjc4MzI4MDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7832803?v=4", "gravatar_id": "", "url": "https://api.github.com/users/redshiftzero", "html_url": "https://github.com/redshiftzero", "followers_url": "https://api.github.com/users/redshiftzero/followers", "following_url": "https://api.github.com/users/redshiftzero/following{/other_user}", "gists_url": "https://api.github.com/users/redshiftzero/gists{/gist_id}", "starred_url": "https://api.github.com/users/redshiftzero/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/redshiftzero/subscriptions", "organizations_url": "https://api.github.com/users/redshiftzero/orgs", "repos_url": "https://api.github.com/users/redshiftzero/repos", "events_url": "https://api.github.com/users/redshiftzero/events{/privacy}", "received_events_url": "https://api.github.com/users/redshiftzero/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 101, "state": "closed", "created_at": "2017-06-01T00:20:54Z", "updated_at": "2018-01-05T17:54:20Z", "due_on": "2017-12-05T08:00:00Z", "closed_at": "2018-01-05T17:54:20Z"}, "comments": 1, "created_at": "2017-11-22T07:38:10Z", "updated_at": "2017-11-28T21:41:57Z", "closed_at": "2017-11-28T21:41:57Z", "author_association": "NONE", "active_lock_reason": null, "body": "# Bug\r\n\r\n## Description\r\n\r\nThere should be a space between the language name and the flag when the page is displayed in arabic.\r\n\r\n## Steps to Reproduce\r\n\r\n* Visit http://source.i18n.securedrop.club/lookup?l=ar\r\n* Click on the flag\r\n\r\n![a](https://user-images.githubusercontent.com/433594/33115191-6fbb2faa-cf60-11e7-8338-ac0b538654ff.png)\r\n", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2600/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2600/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2591", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2591/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2591/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2591/events", "html_url": "https://github.com/freedomofpress/securedrop/issues/2591", "id": 275407465, "node_id": "MDU6SXNzdWUyNzU0MDc0NjU=", "number": 2591, "title": "SecureDrop validate role fails on Tails 3.3", "user": {"login": "msheiny", "id": 1727935, "node_id": "MDQ6VXNlcjE3Mjc5MzU=", "avatar_url": "https://avatars.githubusercontent.com/u/1727935?v=4", "gravatar_id": "", "url": "https://api.github.com/users/msheiny", "html_url": "https://github.com/msheiny", "followers_url": "https://api.github.com/users/msheiny/followers", "following_url": "https://api.github.com/users/msheiny/following{/other_user}", "gists_url": "https://api.github.com/users/msheiny/gists{/gist_id}", "starred_url": "https://api.github.com/users/msheiny/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/msheiny/subscriptions", "organizations_url": "https://api.github.com/users/msheiny/orgs", "repos_url": "https://api.github.com/users/msheiny/repos", "events_url": "https://api.github.com/users/msheiny/events{/privacy}", "received_events_url": "https://api.github.com/users/msheiny/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "msheiny", "id": 1727935, "node_id": "MDQ6VXNlcjE3Mjc5MzU=", "avatar_url": "https://avatars.githubusercontent.com/u/1727935?v=4", "gravatar_id": "", "url": "https://api.github.com/users/msheiny", "html_url": "https://github.com/msheiny", "followers_url": "https://api.github.com/users/msheiny/followers", "following_url": "https://api.github.com/users/msheiny/following{/other_user}", "gists_url": "https://api.github.com/users/msheiny/gists{/gist_id}", "starred_url": "https://api.github.com/users/msheiny/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/msheiny/subscriptions", "organizations_url": "https://api.github.com/users/msheiny/orgs", "repos_url": "https://api.github.com/users/msheiny/repos", "events_url": "https://api.github.com/users/msheiny/events{/privacy}", "received_events_url": "https://api.github.com/users/msheiny/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "msheiny", "id": 1727935, "node_id": "MDQ6VXNlcjE3Mjc5MzU=", "avatar_url": "https://avatars.githubusercontent.com/u/1727935?v=4", "gravatar_id": "", "url": "https://api.github.com/users/msheiny", "html_url": "https://github.com/msheiny", "followers_url": "https://api.github.com/users/msheiny/followers", "following_url": "https://api.github.com/users/msheiny/following{/other_user}", "gists_url": "https://api.github.com/users/msheiny/gists{/gist_id}", "starred_url": "https://api.github.com/users/msheiny/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/msheiny/subscriptions", "organizations_url": "https://api.github.com/users/msheiny/orgs", "repos_url": "https://api.github.com/users/msheiny/repos", "events_url": "https://api.github.com/users/msheiny/events{/privacy}", "received_events_url": "https://api.github.com/users/msheiny/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/freedomofpress/securedrop/milestones/26", "html_url": "https://github.com/freedomofpress/securedrop/milestone/26", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/milestones/26/labels", "id": 2555081, "node_id": "MDk6TWlsZXN0b25lMjU1NTA4MQ==", "number": 26, "title": "0.5", "description": "internationalize SecureDrop, app code refactor", "creator": {"login": "redshiftzero", "id": 7832803, "node_id": "MDQ6VXNlcjc4MzI4MDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7832803?v=4", "gravatar_id": "", "url": "https://api.github.com/users/redshiftzero", "html_url": "https://github.com/redshiftzero", "followers_url": "https://api.github.com/users/redshiftzero/followers", "following_url": "https://api.github.com/users/redshiftzero/following{/other_user}", "gists_url": "https://api.github.com/users/redshiftzero/gists{/gist_id}", "starred_url": "https://api.github.com/users/redshiftzero/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/redshiftzero/subscriptions", "organizations_url": "https://api.github.com/users/redshiftzero/orgs", "repos_url": "https://api.github.com/users/redshiftzero/repos", "events_url": "https://api.github.com/users/redshiftzero/events{/privacy}", "received_events_url": "https://api.github.com/users/redshiftzero/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 101, "state": "closed", "created_at": "2017-06-01T00:20:54Z", "updated_at": "2018-01-05T17:54:20Z", "due_on": "2017-12-05T08:00:00Z", "closed_at": "2018-01-05T17:54:20Z"}, "comments": 3, "created_at": "2017-11-20T16:03:34Z", "updated_at": "2017-11-28T18:13:11Z", "closed_at": "2017-11-28T18:13:11Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "# Bug\r\n\r\n## Description\r\n\r\nUnder Tails `3.3` - the validate script will bomb out because it is trying to shell out to `nslookup` but the deb package `dnsutils` is not installed.\r\n\r\nA short summary of the issue.\r\n\r\n## Steps to Reproduce\r\n\r\nUnder a fresh tails 3.3:\r\n* clone down securedrop, cd into that directory\r\n* run `./securedrop-admin setup`\r\n* run `./securedrop-admin sdconfig` or `./securedrop-admin install`\r\n\r\n## Expected Behavior\r\n\r\nYou'll get prompted for variables and everything should pass validation.\r\n\r\n## Actual Behavior\r\n\r\nThe validation role bombs out with the following output:\r\n\r\n```\r\nTASK [validate : Perform SMTP lookup check.] *******************************************************************\r\nfatal: [localhost]: FAILED! => {\"changed\": false, \"cmd\": [\"torify\", \"nslookup\", \"-vc\", \"-retry=3\", \"-timeout=10\", \"-fail\", \"mail.electricembers.net\", \"8.8.8.8\"], \"delta\": \"0:00:00.029899\", \"end\": \"2017-11-20 16:01:33.483484\", \"failed\": true, \"rc\": 1, \"start\": \"2017-11-20 16:01:33.453585\", \"stderr\": \"ERROR: nslookup cannot be found.\", \"stderr_lines\": [\"ERROR: nslookup cannot be found.\"], \"stdout\": \"\", \"stdout_lines\": []}\r\n...ignoring\r\n\r\nTASK [validate : Validate SMTP relay connection.] **************************************************************\r\nfatal: [localhost]: FAILED! => {\r\n    \"assertion\": false, \r\n    \"changed\": false, \r\n    \"evaluated_to\": false, \r\n    \"failed\": true, \r\n    \"msg\": \"The SMTP relay domain failed during lookup. This domain is the server contacted for authentication in order to send OSSEC email notifications. You should manually edit the file `group_vars/all/site-specific` and confirm that the `smtp_relay` var is set correctly.\"\r\n}\r\n\tto retry, use: --limit @/home/amnesia/Persistent/securedrop/install_files/ansible-base/securedrop-configure.retry\r\n\r\n```\r\n\r\n## Comments\r\n\r\nWe really shouldn't be shellin' out and instead should be taking advantage of either the `dig` lookup or stop using ansible and use python scripts. As the fastest short-term work-around we could install `dnsutils` during the setup step.\r\n", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2591/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2591/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2586", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2586/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2586/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2586/events", "html_url": "https://github.com/freedomofpress/securedrop/issues/2586", "id": 274920443, "node_id": "MDU6SXNzdWUyNzQ5MjA0NDM=", "number": 2586, "title": "SecureDrop desktop shortcuts not displayed correctly on Tails 3.3   ", "user": {"login": "DonnchaC", "id": 3081375, "node_id": "MDQ6VXNlcjMwODEzNzU=", "avatar_url": "https://avatars.githubusercontent.com/u/3081375?v=4", "gravatar_id": "", "url": "https://api.github.com/users/DonnchaC", "html_url": "https://github.com/DonnchaC", "followers_url": "https://api.github.com/users/DonnchaC/followers", "following_url": "https://api.github.com/users/DonnchaC/following{/other_user}", "gists_url": "https://api.github.com/users/DonnchaC/gists{/gist_id}", "starred_url": "https://api.github.com/users/DonnchaC/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/DonnchaC/subscriptions", "organizations_url": "https://api.github.com/users/DonnchaC/orgs", "repos_url": "https://api.github.com/users/DonnchaC/repos", "events_url": "https://api.github.com/users/DonnchaC/events{/privacy}", "received_events_url": "https://api.github.com/users/DonnchaC/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}, {"id": 652909251, "node_id": "MDU6TGFiZWw2NTI5MDkyNTE=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/goals:%20journalist%20experience", "name": "goals: journalist experience", "color": "0e8a16", "default": false, "description": null}, {"id": 750666477, "node_id": "MDU6TGFiZWw3NTA2NjY0Nzc=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/release%20blocker", "name": "release blocker", "color": "000000", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "kushaldas", "id": 272303, "node_id": "MDQ6VXNlcjI3MjMwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/272303?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kushaldas", "html_url": "https://github.com/kushaldas", "followers_url": "https://api.github.com/users/kushaldas/followers", "following_url": "https://api.github.com/users/kushaldas/following{/other_user}", "gists_url": "https://api.github.com/users/kushaldas/gists{/gist_id}", "starred_url": "https://api.github.com/users/kushaldas/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kushaldas/subscriptions", "organizations_url": "https://api.github.com/users/kushaldas/orgs", "repos_url": "https://api.github.com/users/kushaldas/repos", "events_url": "https://api.github.com/users/kushaldas/events{/privacy}", "received_events_url": "https://api.github.com/users/kushaldas/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "kushaldas", "id": 272303, "node_id": "MDQ6VXNlcjI3MjMwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/272303?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kushaldas", "html_url": "https://github.com/kushaldas", "followers_url": "https://api.github.com/users/kushaldas/followers", "following_url": "https://api.github.com/users/kushaldas/following{/other_user}", "gists_url": "https://api.github.com/users/kushaldas/gists{/gist_id}", "starred_url": "https://api.github.com/users/kushaldas/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kushaldas/subscriptions", "organizations_url": "https://api.github.com/users/kushaldas/orgs", "repos_url": "https://api.github.com/users/kushaldas/repos", "events_url": "https://api.github.com/users/kushaldas/events{/privacy}", "received_events_url": "https://api.github.com/users/kushaldas/received_events", "type": "User", "site_admin": false}, {"login": "emkll", "id": 15223328, "node_id": "MDQ6VXNlcjE1MjIzMzI4", "avatar_url": "https://avatars.githubusercontent.com/u/15223328?v=4", "gravatar_id": "", "url": "https://api.github.com/users/emkll", "html_url": "https://github.com/emkll", "followers_url": "https://api.github.com/users/emkll/followers", "following_url": "https://api.github.com/users/emkll/following{/other_user}", "gists_url": "https://api.github.com/users/emkll/gists{/gist_id}", "starred_url": "https://api.github.com/users/emkll/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/emkll/subscriptions", "organizations_url": "https://api.github.com/users/emkll/orgs", "repos_url": "https://api.github.com/users/emkll/repos", "events_url": "https://api.github.com/users/emkll/events{/privacy}", "received_events_url": "https://api.github.com/users/emkll/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/freedomofpress/securedrop/milestones/26", "html_url": "https://github.com/freedomofpress/securedrop/milestone/26", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/milestones/26/labels", "id": 2555081, "node_id": "MDk6TWlsZXN0b25lMjU1NTA4MQ==", "number": 26, "title": "0.5", "description": "internationalize SecureDrop, app code refactor", "creator": {"login": "redshiftzero", "id": 7832803, "node_id": "MDQ6VXNlcjc4MzI4MDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7832803?v=4", "gravatar_id": "", "url": "https://api.github.com/users/redshiftzero", "html_url": "https://github.com/redshiftzero", "followers_url": "https://api.github.com/users/redshiftzero/followers", "following_url": "https://api.github.com/users/redshiftzero/following{/other_user}", "gists_url": "https://api.github.com/users/redshiftzero/gists{/gist_id}", "starred_url": "https://api.github.com/users/redshiftzero/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/redshiftzero/subscriptions", "organizations_url": "https://api.github.com/users/redshiftzero/orgs", "repos_url": "https://api.github.com/users/redshiftzero/repos", "events_url": "https://api.github.com/users/redshiftzero/events{/privacy}", "received_events_url": "https://api.github.com/users/redshiftzero/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 101, "state": "closed", "created_at": "2017-06-01T00:20:54Z", "updated_at": "2018-01-05T17:54:20Z", "due_on": "2017-12-05T08:00:00Z", "closed_at": "2018-01-05T17:54:20Z"}, "comments": 13, "created_at": "2017-11-17T16:26:45Z", "updated_at": "2017-11-27T23:00:39Z", "closed_at": "2017-11-27T22:31:01Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "# Bug\r\n\r\nThe desktop shortcuts for the SecureDrop Source and Journalist interfaces do not show the correct title and logo on Tail 3.3. Tails 3.3 introduces a fix for the `.desktop` file security issue. The fix requires `.desktop` files to have a `trusted` metadata parameter set before the `.desktop` file is parsed and displayed with a custom name and icon.\r\n\r\nThe shortcuts are displayed with a name like `source.desktop` and requires a user to click \"Trust and Launch\" before the shortcut is displayed with the correct name and icon. Requiring users to click-through this warning could cause warning fatigue and result in unsafe user behavior.\r\n\r\n## Steps to reproduce\r\n\r\nClick a SecureDrop .desktop shortcut on a Journalist Workstation running Tails 3.3. \r\n\r\n## Expected Behavior\r\n\r\nThe SecureDrop .onion opens in Tor Browser.\r\n\r\n## Actual Behavior\r\n\r\nThe user receives a warning about an untrusted .desktop file.\r\n\r\n## Comments\r\n\r\nThe SecureDrop `tails-config` Ansible role should set the Nautilus `metadata::trusted` parameter for both the Source and Journalist .desktop files.\r\n", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2586/reactions", "total_count": 2, "+1": 2, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2586/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2581", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2581/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2581/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2581/events", "html_url": "https://github.com/freedomofpress/securedrop/pull/2581", "id": 274093252, "node_id": "MDExOlB1bGxSZXF1ZXN0MTUyNzI3MTcw", "number": 2581, "title": "i18n: manage.py translate --extract needs journalist_app", "user": {"login": "ghost", "id": 10137, "node_id": "MDQ6VXNlcjEwMTM3", "avatar_url": "https://avatars.githubusercontent.com/u/10137?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ghost", "html_url": "https://github.com/ghost", "followers_url": "https://api.github.com/users/ghost/followers", "following_url": "https://api.github.com/users/ghost/following{/other_user}", "gists_url": "https://api.github.com/users/ghost/gists{/gist_id}", "starred_url": "https://api.github.com/users/ghost/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ghost/subscriptions", "organizations_url": "https://api.github.com/users/ghost/orgs", "repos_url": "https://api.github.com/users/ghost/repos", "events_url": "https://api.github.com/users/ghost/events{/privacy}", "received_events_url": "https://api.github.com/users/ghost/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}, {"id": 652906953, "node_id": "MDU6TGFiZWw2NTI5MDY5NTM=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/i18n", "name": "i18n", "color": "d4c5f9", "default": false, "description": "Anything related to translation or internationalization of SecureDrop"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/freedomofpress/securedrop/milestones/26", "html_url": "https://github.com/freedomofpress/securedrop/milestone/26", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/milestones/26/labels", "id": 2555081, "node_id": "MDk6TWlsZXN0b25lMjU1NTA4MQ==", "number": 26, "title": "0.5", "description": "internationalize SecureDrop, app code refactor", "creator": {"login": "redshiftzero", "id": 7832803, "node_id": "MDQ6VXNlcjc4MzI4MDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7832803?v=4", "gravatar_id": "", "url": "https://api.github.com/users/redshiftzero", "html_url": "https://github.com/redshiftzero", "followers_url": "https://api.github.com/users/redshiftzero/followers", "following_url": "https://api.github.com/users/redshiftzero/following{/other_user}", "gists_url": "https://api.github.com/users/redshiftzero/gists{/gist_id}", "starred_url": "https://api.github.com/users/redshiftzero/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/redshiftzero/subscriptions", "organizations_url": "https://api.github.com/users/redshiftzero/orgs", "repos_url": "https://api.github.com/users/redshiftzero/repos", "events_url": "https://api.github.com/users/redshiftzero/events{/privacy}", "received_events_url": "https://api.github.com/users/redshiftzero/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 101, "state": "closed", "created_at": "2017-06-01T00:20:54Z", "updated_at": "2018-01-05T17:54:20Z", "due_on": "2017-12-05T08:00:00Z", "closed_at": "2018-01-05T17:54:20Z"}, "comments": 1, "created_at": "2017-11-15T09:46:30Z", "updated_at": "2017-11-16T07:37:59Z", "closed_at": "2017-11-16T04:56:47Z", "author_association": "NONE", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/freedomofpress/securedrop/pulls/2581", "html_url": "https://github.com/freedomofpress/securedrop/pull/2581", "diff_url": "https://github.com/freedomofpress/securedrop/pull/2581.diff", "patch_url": "https://github.com/freedomofpress/securedrop/pull/2581.patch", "merged_at": "2017-11-16T04:56:47Z"}, "body": "## Status\r\n\r\nReady for review\r\n\r\n## Description of Changes\r\n\r\nbabel.cfg needs to look into the journalist_app directory to catch strings to be translated\r\n\r\n## Testing\r\n\r\n* vagrant ssh development\r\n* cd /vagrant/securedrop\r\n* ./manage.py translate --extract-update\r\n\r\nLook at the result in translations/messages.pot and verify strings from journalist_app/*.py are present.\r\n\r\n## Deployment\r\n\r\nN/A\r\n\r\n## Checklist\r\n\r\n### If you made changes to the app code:\r\n\r\n- [x] Unit and functional tests pass on the development VM\r\n", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2581/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2581/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2568", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2568/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2568/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2568/events", "html_url": "https://github.com/freedomofpress/securedrop/issues/2568", "id": 273226872, "node_id": "MDU6SXNzdWUyNzMyMjY4NzI=", "number": 2568, "title": "transient travis failure: GNUPG ERROR key_generate", "user": {"login": "ghost", "id": 10137, "node_id": "MDQ6VXNlcjEwMTM3", "avatar_url": "https://avatars.githubusercontent.com/u/10137?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ghost", "html_url": "https://github.com/ghost", "followers_url": "https://api.github.com/users/ghost/followers", "following_url": "https://api.github.com/users/ghost/following{/other_user}", "gists_url": "https://api.github.com/users/ghost/gists{/gist_id}", "starred_url": "https://api.github.com/users/ghost/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ghost/subscriptions", "organizations_url": "https://api.github.com/users/ghost/orgs", "repos_url": "https://api.github.com/users/ghost/repos", "events_url": "https://api.github.com/users/ghost/events{/privacy}", "received_events_url": "https://api.github.com/users/ghost/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}, {"id": 475997849, "node_id": "MDU6TGFiZWw0NzU5OTc4NDk=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/tests", "name": "tests", "color": "f9d0c4", "default": false, "description": null}, {"id": 495896968, "node_id": "MDU6TGFiZWw0OTU4OTY5Njg=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/unable%20to%20reproduce", "name": "unable to reproduce", "color": "fbca04", "default": false, "description": null}, {"id": 652907313, "node_id": "MDU6TGFiZWw2NTI5MDczMTM=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/goals:%20more%20tests", "name": "goals: more tests", "color": "0e8a16", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2017-11-12T12:54:09Z", "updated_at": "2018-03-01T12:23:08Z", "closed_at": "2018-03-01T12:23:01Z", "author_association": "NONE", "active_lock_reason": null, "body": "Please use the appropriate part of the template: \"Bug\" or \"Feature Request\"\r\n\r\n# Bug\r\n\r\n## Description\r\n\r\n<pre>\r\n2017-11-11 11:45:56,443 GNUPG PROGRESS primegen X 100 100\r\n2017-11-11 11:45:56,443 GNUPG GOOD_PASSPHRASE\r\n2017-11-11 11:45:56,443 GNUPG ERROR key_generate 32849\r\n2017-11-11 11:45:56,445 DEBUG DELETE http://127.0.0.1:46913/hub/session/f38d4921-a7d6-477d-88f2-0876968d8865 {\"sessionId\": \"f38d4921-a7d6-477d-88f2-0876968d8865\"}\r\nException in thread Thread-2878:\r\nTraceback (most recent call last):\r\n  File \"/usr/lib/python2.7/threading.py\", line 810, in __bootstrap_inner\r\n    self.run()\r\n  File \"/usr/lib/python2.7/threading.py\", line 763, in run\r\n    self.__target(*self.__args, **self.__kwargs)\r\n  File \"/usr/local/lib/python2.7/dist-packages/gnupg/_meta.py\", line 650, in _read_response\r\n    result._handle_status(keyword, value)\r\n  File \"/usr/local/lib/python2.7/dist-packages/gnupg/_parsers.py\", line 993, in _handle_status\r\n    raise ValueError(\"Unknown status message: %r\" % key)\r\nValueError: Unknown status message: u'ERROR'\r\n2017-11-11 11:45:56,447 DEBUG Finishing reading from stream \"<open file '<fdopen>', mode 'rb' at 0x7f2f78d921e0>\"...\r\n2017-11-11 11:45:56,447 DEBUG Read    0 bytes total\r\n2017-11-11 11:45:56,447 INFO Key created. Fingerprint: None\r\n2017-11-11 11:45:56,455 DEBUG Finished Request\r\n=============================== warnings summary ========\r\n</pre>\r\n\r\n## Steps to Reproduce\r\n\r\nUnknown, this is a transient error.\r\n\r\n## Expected Behavior\r\n\r\nNo error ;-)\r\n\r\n## Actual Behavior\r\n\r\nVery very rare failure.\r\n\r\n## Comments\r\n\r\nWait for it to show up again and add a like to the travis logs for debugging:\r\n\r\n* https://travis-ci.org/freedomofpress/securedrop/builds/300571913?utm_source=github_status&utm_medium=notification", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2568/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2568/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2559", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2559/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2559/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2559/events", "html_url": "https://github.com/freedomofpress/securedrop/pull/2559", "id": 272774019, "node_id": "MDExOlB1bGxSZXF1ZXN0MTUxNzk1NjIy", "number": 2559, "title": "Fix Circle CI config", "user": {"login": "redshiftzero", "id": 7832803, "node_id": "MDQ6VXNlcjc4MzI4MDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7832803?v=4", "gravatar_id": "", "url": "https://api.github.com/users/redshiftzero", "html_url": "https://github.com/redshiftzero", "followers_url": "https://api.github.com/users/redshiftzero/followers", "following_url": "https://api.github.com/users/redshiftzero/following{/other_user}", "gists_url": "https://api.github.com/users/redshiftzero/gists{/gist_id}", "starred_url": "https://api.github.com/users/redshiftzero/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/redshiftzero/subscriptions", "organizations_url": "https://api.github.com/users/redshiftzero/orgs", "repos_url": "https://api.github.com/users/redshiftzero/repos", "events_url": "https://api.github.com/users/redshiftzero/events{/privacy}", "received_events_url": "https://api.github.com/users/redshiftzero/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}, {"id": 157793311, "node_id": "MDU6TGFiZWwxNTc3OTMzMTE=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/priority/high", "name": "priority/high", "color": "e64ef4", "default": false, "description": ""}, {"id": 652907032, "node_id": "MDU6TGFiZWw2NTI5MDcwMzI=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/goals:%20sick%20CI", "name": "goals: sick CI", "color": "0e8a16", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2017-11-10T00:03:18Z", "updated_at": "2018-04-10T15:14:13Z", "closed_at": "2017-11-11T08:40:12Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/freedomofpress/securedrop/pulls/2559", "html_url": "https://github.com/freedomofpress/securedrop/pull/2559", "diff_url": "https://github.com/freedomofpress/securedrop/pull/2559.diff", "patch_url": "https://github.com/freedomofpress/securedrop/pull/2559.patch", "merged_at": "2017-11-11T08:40:12Z"}, "body": "## Status\r\n\r\nReady for review\r\n\r\n## Description of Changes\r\n\r\nFixes #2558. Fixes Circle CI config to use the correct (existing!) requirements file\r\n\r\n## Testing\r\n\r\nDoes Circle CI pass?\r\n\r\n## Deployment\r\n\r\nCI only\r\n\r\n## Checklist\r\n\r\nNada, CI change only\r\n", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2559/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2559/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2556", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2556/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2556/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2556/events", "html_url": "https://github.com/freedomofpress/securedrop/pull/2556", "id": 272688711, "node_id": "MDExOlB1bGxSZXF1ZXN0MTUxNzM5MDYz", "number": 2556, "title": "doc: typo in french translation of an example", "user": {"login": "ghost", "id": 10137, "node_id": "MDQ6VXNlcjEwMTM3", "avatar_url": "https://avatars.githubusercontent.com/u/10137?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ghost", "html_url": "https://github.com/ghost", "followers_url": "https://api.github.com/users/ghost/followers", "following_url": "https://api.github.com/users/ghost/following{/other_user}", "gists_url": "https://api.github.com/users/ghost/gists{/gist_id}", "starred_url": "https://api.github.com/users/ghost/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ghost/subscriptions", "organizations_url": "https://api.github.com/users/ghost/orgs", "repos_url": "https://api.github.com/users/ghost/repos", "events_url": "https://api.github.com/users/ghost/events{/privacy}", "received_events_url": "https://api.github.com/users/ghost/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}, {"id": 118465787, "node_id": "MDU6TGFiZWwxMTg0NjU3ODc=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/docs", "name": "docs", "color": "d4c5f9", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2017-11-09T19:18:46Z", "updated_at": "2017-11-13T14:02:06Z", "closed_at": "2017-11-13T14:01:55Z", "author_association": "NONE", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/freedomofpress/securedrop/pulls/2556", "html_url": "https://github.com/freedomofpress/securedrop/pull/2556", "diff_url": "https://github.com/freedomofpress/securedrop/pull/2556.diff", "patch_url": "https://github.com/freedomofpress/securedrop/pull/2556.patch", "merged_at": "2017-11-13T14:01:55Z"}, "body": "## Status\r\n\r\nReady for review\r\n\r\n## Description of Changes\r\n\r\ntypo in french translation of an example\r\n\r\n## Testing\r\n\r\nOne would have to speak french and know the phrase does not make sense originally. My bad.\r\n\r\n## Deployment\r\n\r\nJust a typo.\r\n\r\n## Checklist\r\n\r\n### If you made changes to documentation:\r\n\r\n- [x] Doc linting passed locally\r\n", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2556/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2556/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2542", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2542/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2542/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2542/events", "html_url": "https://github.com/freedomofpress/securedrop/issues/2542", "id": 272139871, "node_id": "MDU6SXNzdWUyNzIxMzk4NzE=", "number": 2542, "title": "Request header language is obeyed even when the language is not supported", "user": {"login": "ghost", "id": 10137, "node_id": "MDQ6VXNlcjEwMTM3", "avatar_url": "https://avatars.githubusercontent.com/u/10137?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ghost", "html_url": "https://github.com/ghost", "followers_url": "https://api.github.com/users/ghost/followers", "following_url": "https://api.github.com/users/ghost/following{/other_user}", "gists_url": "https://api.github.com/users/ghost/gists{/gist_id}", "starred_url": "https://api.github.com/users/ghost/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ghost/subscriptions", "organizations_url": "https://api.github.com/users/ghost/orgs", "repos_url": "https://api.github.com/users/ghost/repos", "events_url": "https://api.github.com/users/ghost/events{/privacy}", "received_events_url": "https://api.github.com/users/ghost/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}, {"id": 652906953, "node_id": "MDU6TGFiZWw2NTI5MDY5NTM=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/i18n", "name": "i18n", "color": "d4c5f9", "default": false, "description": "Anything related to translation or internationalization of SecureDrop"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/freedomofpress/securedrop/milestones/37", "html_url": "https://github.com/freedomofpress/securedrop/milestone/37", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/milestones/37/labels", "id": 2945103, "node_id": "MDk6TWlsZXN0b25lMjk0NTEwMw==", "number": 37, "title": "0.5.1", "description": "Tor apt repo", "creator": {"login": "redshiftzero", "id": 7832803, "node_id": "MDQ6VXNlcjc4MzI4MDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7832803?v=4", "gravatar_id": "", "url": "https://api.github.com/users/redshiftzero", "html_url": "https://github.com/redshiftzero", "followers_url": "https://api.github.com/users/redshiftzero/followers", "following_url": "https://api.github.com/users/redshiftzero/following{/other_user}", "gists_url": "https://api.github.com/users/redshiftzero/gists{/gist_id}", "starred_url": "https://api.github.com/users/redshiftzero/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/redshiftzero/subscriptions", "organizations_url": "https://api.github.com/users/redshiftzero/orgs", "repos_url": "https://api.github.com/users/redshiftzero/repos", "events_url": "https://api.github.com/users/redshiftzero/events{/privacy}", "received_events_url": "https://api.github.com/users/redshiftzero/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 28, "state": "closed", "created_at": "2017-11-28T23:08:16Z", "updated_at": "2018-01-26T05:26:23Z", "due_on": "2018-01-16T08:00:00Z", "closed_at": "2018-01-26T05:26:23Z"}, "comments": 2, "created_at": "2017-11-08T10:02:58Z", "updated_at": "2017-12-21T17:57:45Z", "closed_at": "2017-12-21T17:57:45Z", "author_association": "NONE", "active_lock_reason": null, "body": "# Bug\r\n\r\n## Description\r\n\r\nWhen the browser sends **Accepted-Language: fr** and **SUPPORTED_LOCALES = ['en_US', 'ar']** the page displays in French.\r\n\r\n\r\n## Steps to Reproduce\r\n\r\n* set **SUPPORTED_LOCALES = ['en_US', 'ar']**  in config.py\r\n* vagrant ssh development\r\n* cd /vagrant/securedrop ; ./manage.py run\r\n* configure the browser to favor the **fr** locale (preferences, content, languages)\r\n* firefox http://localhost:8080\r\n\r\n## Expected Behavior\r\n\r\nFallback to **en_US** because it is the default language\r\n\r\n## Actual Behavior\r\n\r\nPage is displayed in French\r\n\r\n![a](https://user-images.githubusercontent.com/433594/32542787-fe704df4-c473-11e7-9dbd-1afacf9a1a46.png)\r\n", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2542/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2542/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2528", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2528/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2528/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2528/events", "html_url": "https://github.com/freedomofpress/securedrop/pull/2528", "id": 271404837, "node_id": "MDExOlB1bGxSZXF1ZXN0MTUwODAxNzIw", "number": 2528, "title": "i18n: add the l param to existing params", "user": {"login": "ghost", "id": 10137, "node_id": "MDQ6VXNlcjEwMTM3", "avatar_url": "https://avatars.githubusercontent.com/u/10137?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ghost", "html_url": "https://github.com/ghost", "followers_url": "https://api.github.com/users/ghost/followers", "following_url": "https://api.github.com/users/ghost/following{/other_user}", "gists_url": "https://api.github.com/users/ghost/gists{/gist_id}", "starred_url": "https://api.github.com/users/ghost/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ghost/subscriptions", "organizations_url": "https://api.github.com/users/ghost/orgs", "repos_url": "https://api.github.com/users/ghost/repos", "events_url": "https://api.github.com/users/ghost/events{/privacy}", "received_events_url": "https://api.github.com/users/ghost/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}, {"id": 652906953, "node_id": "MDU6TGFiZWw2NTI5MDY5NTM=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/i18n", "name": "i18n", "color": "d4c5f9", "default": false, "description": "Anything related to translation or internationalization of SecureDrop"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/freedomofpress/securedrop/milestones/26", "html_url": "https://github.com/freedomofpress/securedrop/milestone/26", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/milestones/26/labels", "id": 2555081, "node_id": "MDk6TWlsZXN0b25lMjU1NTA4MQ==", "number": 26, "title": "0.5", "description": "internationalize SecureDrop, app code refactor", "creator": {"login": "redshiftzero", "id": 7832803, "node_id": "MDQ6VXNlcjc4MzI4MDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7832803?v=4", "gravatar_id": "", "url": "https://api.github.com/users/redshiftzero", "html_url": "https://github.com/redshiftzero", "followers_url": "https://api.github.com/users/redshiftzero/followers", "following_url": "https://api.github.com/users/redshiftzero/following{/other_user}", "gists_url": "https://api.github.com/users/redshiftzero/gists{/gist_id}", "starred_url": "https://api.github.com/users/redshiftzero/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/redshiftzero/subscriptions", "organizations_url": "https://api.github.com/users/redshiftzero/orgs", "repos_url": "https://api.github.com/users/redshiftzero/repos", "events_url": "https://api.github.com/users/redshiftzero/events{/privacy}", "received_events_url": "https://api.github.com/users/redshiftzero/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 101, "state": "closed", "created_at": "2017-06-01T00:20:54Z", "updated_at": "2018-01-05T17:54:20Z", "due_on": "2017-12-05T08:00:00Z", "closed_at": "2018-01-05T17:54:20Z"}, "comments": 7, "created_at": "2017-11-06T09:15:48Z", "updated_at": "2018-07-29T09:54:22Z", "closed_at": "2017-11-08T20:09:24Z", "author_association": "NONE", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/freedomofpress/securedrop/pulls/2528", "html_url": "https://github.com/freedomofpress/securedrop/pull/2528", "diff_url": "https://github.com/freedomofpress/securedrop/pull/2528.diff", "patch_url": "https://github.com/freedomofpress/securedrop/pull/2528.patch", "merged_at": "2017-11-08T20:09:23Z"}, "body": "## Status\r\n\r\nReady for review\r\n\r\n## Description of Changes\r\n\r\nFixes #2517\r\n\r\nThe l param to switch languages must not clobber existing params\r\nwhen they exist.\r\n\r\n## Testing\r\n\r\n* add **SUPPORTED_LOCALES = ['ar', 'en_US']** to config.py\r\n* vagrant ssh development\r\n* cd /vagrant/securedrop\r\n* ./manage.py run\r\n* firefox http://locahost:8081\r\n* change language by clicking the links\r\n* firefox http://locahost:8080\r\n* change language by clicking the links\r\n\r\n## Deployment\r\n\r\nOnly UX change, no impact on deployment.\r\n\r\n## Checklist\r\n\r\n### If you made changes to the app code:\r\n\r\n- [x] Unit and functional tests pass on the development VM\r\n", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2528/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2528/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2527", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2527/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2527/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2527/events", "html_url": "https://github.com/freedomofpress/securedrop/pull/2527", "id": 271370413, "node_id": "MDExOlB1bGxSZXF1ZXN0MTUwNzc4MDYw", "number": 2527, "title": "Fix broken link in threat model doc", "user": {"login": "pierwill", "id": 19642016, "node_id": "MDQ6VXNlcjE5NjQyMDE2", "avatar_url": "https://avatars.githubusercontent.com/u/19642016?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pierwill", "html_url": "https://github.com/pierwill", "followers_url": "https://api.github.com/users/pierwill/followers", "following_url": "https://api.github.com/users/pierwill/following{/other_user}", "gists_url": "https://api.github.com/users/pierwill/gists{/gist_id}", "starred_url": "https://api.github.com/users/pierwill/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pierwill/subscriptions", "organizations_url": "https://api.github.com/users/pierwill/orgs", "repos_url": "https://api.github.com/users/pierwill/repos", "events_url": "https://api.github.com/users/pierwill/events{/privacy}", "received_events_url": "https://api.github.com/users/pierwill/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}, {"id": 118465787, "node_id": "MDU6TGFiZWwxMTg0NjU3ODc=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/docs", "name": "docs", "color": "d4c5f9", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2017-11-06T06:21:40Z", "updated_at": "2017-11-08T01:01:09Z", "closed_at": "2017-11-06T08:13:09Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/freedomofpress/securedrop/pulls/2527", "html_url": "https://github.com/freedomofpress/securedrop/pull/2527", "diff_url": "https://github.com/freedomofpress/securedrop/pull/2527.diff", "patch_url": "https://github.com/freedomofpress/securedrop/pull/2527.patch", "merged_at": "2017-11-06T08:13:09Z"}, "body": "## Status\r\n\r\nReady for review\r\n\r\n## Description of Changes\r\n\r\nFixes #2520\r\n\r\nChanges proposed in this pull request:\r\n\r\nFixed the broken link, and slightly reworded the text.\r\n\r\n## Testing\r\nDoes the link work?\r\n\r\n- [x] Doc linting passed locally\r\n", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2527/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2527/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2526", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2526/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2526/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2526/events", "html_url": "https://github.com/freedomofpress/securedrop/pull/2526", "id": 271352528, "node_id": "MDExOlB1bGxSZXF1ZXN0MTUwNzY1OTA0", "number": 2526, "title": "Rewrite of the Yubikey documentation", "user": {"login": "pierwill", "id": 19642016, "node_id": "MDQ6VXNlcjE5NjQyMDE2", "avatar_url": "https://avatars.githubusercontent.com/u/19642016?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pierwill", "html_url": "https://github.com/pierwill", "followers_url": "https://api.github.com/users/pierwill/followers", "following_url": "https://api.github.com/users/pierwill/following{/other_user}", "gists_url": "https://api.github.com/users/pierwill/gists{/gist_id}", "starred_url": "https://api.github.com/users/pierwill/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pierwill/subscriptions", "organizations_url": "https://api.github.com/users/pierwill/orgs", "repos_url": "https://api.github.com/users/pierwill/repos", "events_url": "https://api.github.com/users/pierwill/events{/privacy}", "received_events_url": "https://api.github.com/users/pierwill/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}, {"id": 118465787, "node_id": "MDU6TGFiZWwxMTg0NjU3ODc=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/docs", "name": "docs", "color": "d4c5f9", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 8, "created_at": "2017-11-06T03:53:21Z", "updated_at": "2017-11-15T02:44:12Z", "closed_at": "2017-11-14T20:59:39Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/freedomofpress/securedrop/pulls/2526", "html_url": "https://github.com/freedomofpress/securedrop/pull/2526", "diff_url": "https://github.com/freedomofpress/securedrop/pull/2526.diff", "patch_url": "https://github.com/freedomofpress/securedrop/pull/2526.patch", "merged_at": "2017-11-14T20:59:39Z"}, "body": "## Status\r\n\r\nReady for review\r\n\r\n## Description of Changes\r\n\r\nFixes #2310 \r\n\r\n## Checklist\r\n\r\n### If you made changes to documentation:\r\n\r\n- [x] Doc linting passed locally\r\n", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2526/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2526/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2520", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2520/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2520/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2520/events", "html_url": "https://github.com/freedomofpress/securedrop/issues/2520", "id": 271322278, "node_id": "MDU6SXNzdWUyNzEzMjIyNzg=", "number": 2520, "title": "404 link in threat modeling doc", "user": {"login": "tommycollison", "id": 398046, "node_id": "MDQ6VXNlcjM5ODA0Ng==", "avatar_url": "https://avatars.githubusercontent.com/u/398046?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tommycollison", "html_url": "https://github.com/tommycollison", "followers_url": "https://api.github.com/users/tommycollison/followers", "following_url": "https://api.github.com/users/tommycollison/following{/other_user}", "gists_url": "https://api.github.com/users/tommycollison/gists{/gist_id}", "starred_url": "https://api.github.com/users/tommycollison/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tommycollison/subscriptions", "organizations_url": "https://api.github.com/users/tommycollison/orgs", "repos_url": "https://api.github.com/users/tommycollison/repos", "events_url": "https://api.github.com/users/tommycollison/events{/privacy}", "received_events_url": "https://api.github.com/users/tommycollison/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}, {"id": 118465787, "node_id": "MDU6TGFiZWwxMTg0NjU3ODc=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/docs", "name": "docs", "color": "d4c5f9", "default": false, "description": null}, {"id": 671921004, "node_id": "MDU6TGFiZWw2NzE5MjEwMDQ=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/help%20wanted", "name": "help wanted", "color": "5319e7", "default": true, "description": "Issues we would definitely appreciate volunteer help with"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2017-11-05T22:52:42Z", "updated_at": "2017-11-06T08:13:09Z", "closed_at": "2017-11-06T08:13:09Z", "author_association": "NONE", "active_lock_reason": null, "body": "# Bug\r\n\r\n## Description\r\n\r\nIn the [threat modeling doc](https://github.com/freedomofpress/securedrop/blob/develop/docs/development/threat_model.rst), [this link](https://web-beta.archive.org/web/20150913065100/https://pond.imperialviolet.org/threat.html) to a Wayback version of the Adam Langley article throws a 404 for me. The original article [link](https://pond.imperialviolet.org/threat.html) also throws me a 404. [This link](https://web.archive.org/web/20150326154506/https://pond.imperialviolet.org/threat.html) works, though.\r\n\r\n## Steps to Reproduce\r\n\r\n1. Click the link.\r\n\r\n## Expected Behavior\r\n\r\n1. The link works.\r\n2. ???\r\n3. Profit!\r\n\r\n## Actual Behavior\r\n\r\n1. The link does not work.\r\n", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2520/reactions", "total_count": 1, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2520/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2519", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2519/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2519/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2519/events", "html_url": "https://github.com/freedomofpress/securedrop/issues/2519", "id": 271316860, "node_id": "MDU6SXNzdWUyNzEzMTY4NjA=", "number": 2519, "title": "Submit page denied for users submitting content on Android with OrFox/OrBot.", "user": {"login": "nsalontay", "id": 4096005, "node_id": "MDQ6VXNlcjQwOTYwMDU=", "avatar_url": "https://avatars.githubusercontent.com/u/4096005?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nsalontay", "html_url": "https://github.com/nsalontay", "followers_url": "https://api.github.com/users/nsalontay/followers", "following_url": "https://api.github.com/users/nsalontay/following{/other_user}", "gists_url": "https://api.github.com/users/nsalontay/gists{/gist_id}", "starred_url": "https://api.github.com/users/nsalontay/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nsalontay/subscriptions", "organizations_url": "https://api.github.com/users/nsalontay/orgs", "repos_url": "https://api.github.com/users/nsalontay/repos", "events_url": "https://api.github.com/users/nsalontay/events{/privacy}", "received_events_url": "https://api.github.com/users/nsalontay/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}, {"id": 475977399, "node_id": "MDU6TGFiZWw0NzU5NzczOTk=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/source%20interface%20(SI)", "name": "source interface (SI)", "color": "f9d0c4", "default": false, "description": ""}, {"id": 1106060106, "node_id": "MDU6TGFiZWwxMTA2MDYwMTA2", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/needs/reproducing", "name": "needs/reproducing", "color": "3dce6b", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2017-11-05T21:42:07Z", "updated_at": "2020-09-18T19:18:36Z", "closed_at": "2020-09-18T19:18:36Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "# Bug\r\n## Description\r\n\r\nSubmit page denied for users submitting content on Android with OrFox/OrBot.\r\n\r\n## Steps to Reproduce\r\n\r\nUsing:\r\n- Pixel 1\r\n- Android 8.0.0\r\n- Orbot and Orfox\r\n\r\nSTR Submit denied:\r\n\r\n1. As a new user, navigate to '/lookup'\r\n2. Browse > Upload\r\n3. Select \"Camera\" or \"Video\"\r\n4. Try to submit\r\n\r\n## Expected Behavior\r\n\r\nUser is able to submit content and receives confirmation of submission.\r\n\r\n## Actual Behavior\r\n\r\nError page:\r\nAccess to file was denied\r\nThe file at http://source.demo.securedrop.club/submit is no readable.\r\n1. It may have been removed, moved, or file permissions may be preventing access.\r\n[Try again]\r\n\r\n## Comments\r\n\r\nSubmitting from file system (like a picture in the user's camera roll) yields a \"413 Request Entity Too Large\" error instead of the aforementioned behavior.\r\n", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2519/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2519/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2517", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2517/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2517/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2517/events", "html_url": "https://github.com/freedomofpress/securedrop/issues/2517", "id": 271294108, "node_id": "MDU6SXNzdWUyNzEyOTQxMDg=", "number": 2517, "title": "Language selection override URL query", "user": {"login": "ghost", "id": 10137, "node_id": "MDQ6VXNlcjEwMTM3", "avatar_url": "https://avatars.githubusercontent.com/u/10137?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ghost", "html_url": "https://github.com/ghost", "followers_url": "https://api.github.com/users/ghost/followers", "following_url": "https://api.github.com/users/ghost/following{/other_user}", "gists_url": "https://api.github.com/users/ghost/gists{/gist_id}", "starred_url": "https://api.github.com/users/ghost/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ghost/subscriptions", "organizations_url": "https://api.github.com/users/ghost/orgs", "repos_url": "https://api.github.com/users/ghost/repos", "events_url": "https://api.github.com/users/ghost/events{/privacy}", "received_events_url": "https://api.github.com/users/ghost/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}, {"id": 652906953, "node_id": "MDU6TGFiZWw2NTI5MDY5NTM=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/i18n", "name": "i18n", "color": "d4c5f9", "default": false, "description": "Anything related to translation or internationalization of SecureDrop"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2017-11-05T16:38:38Z", "updated_at": "2018-07-29T09:54:21Z", "closed_at": "2017-11-08T20:09:23Z", "author_association": "NONE", "active_lock_reason": null, "body": "Please use the appropriate part of the template: \"Bug\" or \"Feature Request\"\r\n\r\n# Bug\r\n\r\n## Description\r\n\r\nThe **/admin/2fa?l=en_US** overrides the parameters set by the caller.\r\n\r\n## Steps to Reproduce\r\n\r\n* add **SUPPORTED_LOCALES = ['en_US', 'ar', 'de_DE', 'fr_FR', 'nb_NO', 'nl']** to config.py\r\n* login the journalist interface\r\n* go to the admin interface\r\n* reset two factor authentication\r\n* click on a language to switch\r\n\r\n## Expected Behavior\r\n\r\nThe page is redisplayed successfully in the desired language.\r\n\r\n## Actual Behavior\r\n\r\nAn error happens\r\n", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2517/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2517/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2487", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2487/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2487/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2487/events", "html_url": "https://github.com/freedomofpress/securedrop/issues/2487", "id": 269438184, "node_id": "MDU6SXNzdWUyNjk0MzgxODQ=", "number": 2487, "title": "Documentation: in nginx `error_log off;` does not turn error logging off!", "user": {"login": "rysiekpl", "id": 6271171, "node_id": "MDQ6VXNlcjYyNzExNzE=", "avatar_url": "https://avatars.githubusercontent.com/u/6271171?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rysiekpl", "html_url": "https://github.com/rysiekpl", "followers_url": "https://api.github.com/users/rysiekpl/followers", "following_url": "https://api.github.com/users/rysiekpl/following{/other_user}", "gists_url": "https://api.github.com/users/rysiekpl/gists{/gist_id}", "starred_url": "https://api.github.com/users/rysiekpl/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rysiekpl/subscriptions", "organizations_url": "https://api.github.com/users/rysiekpl/orgs", "repos_url": "https://api.github.com/users/rysiekpl/repos", "events_url": "https://api.github.com/users/rysiekpl/events{/privacy}", "received_events_url": "https://api.github.com/users/rysiekpl/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}, {"id": 118465787, "node_id": "MDU6TGFiZWwxMTg0NjU3ODc=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/docs", "name": "docs", "color": "d4c5f9", "default": false, "description": null}, {"id": 192545295, "node_id": "MDU6TGFiZWwxOTI1NDUyOTU=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/security", "name": "security", "color": "bfdadc", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2017-10-29T21:35:10Z", "updated_at": "2018-01-31T16:49:17Z", "closed_at": "2018-01-31T08:16:23Z", "author_association": "NONE", "active_lock_reason": null, "body": "Please use the appropriate part of the template: \"Bug\" or \"Feature Request\"\r\n\r\n# Bug\r\n\r\n## Description\r\n\r\n[Deployment Best Practices](https://docs.securedrop.org/en/stable/deployment_practices.html#landing-page) page in SecureDrop documentation contains information that to disable logging on `nginx` one should use:\r\n\r\n```\r\naccess_log off;\r\nerror_log off;\r\n```\r\n\r\nThis is not true. While the first line will work, the second line will set `error_log` to `$NGINX_CONFIG_DIRECTORY/off` -- since [`error_log` cannot be disabled](https://nginx.org/en/docs/ngx_core_module.html#error_log).\r\n\r\nNot only will this potentially cause problems (when `$NGINX_CONFIG_DIRECTORY` is read-only, nginx will not be able to start and will give a cryptic error message), but it also means that contrary to expectations error log for the SecureDrop landing page is in fact being written.\r\n\r\n## Comments\r\n\r\nChanging the suggested logfile config to:\r\n```\r\naccess_log off;\r\nerror_log /dev/null;\r\n```\r\n\r\n...fixes the issue.", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2487/reactions", "total_count": 2, "+1": 1, "-1": 0, "laugh": 0, "hooray": 1, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2487/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2478", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2478/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2478/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2478/events", "html_url": "https://github.com/freedomofpress/securedrop/issues/2478", "id": 268177681, "node_id": "MDU6SXNzdWUyNjgxNzc2ODE=", "number": 2478, "title": "Re-run of playbook against existing server fails on OSSEC registration", "user": {"login": "msheiny", "id": 1727935, "node_id": "MDQ6VXNlcjE3Mjc5MzU=", "avatar_url": "https://avatars.githubusercontent.com/u/1727935?v=4", "gravatar_id": "", "url": "https://api.github.com/users/msheiny", "html_url": "https://github.com/msheiny", "followers_url": "https://api.github.com/users/msheiny/followers", "following_url": "https://api.github.com/users/msheiny/following{/other_user}", "gists_url": "https://api.github.com/users/msheiny/gists{/gist_id}", "starred_url": "https://api.github.com/users/msheiny/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/msheiny/subscriptions", "organizations_url": "https://api.github.com/users/msheiny/orgs", "repos_url": "https://api.github.com/users/msheiny/repos", "events_url": "https://api.github.com/users/msheiny/events{/privacy}", "received_events_url": "https://api.github.com/users/msheiny/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}, {"id": 157793311, "node_id": "MDU6TGFiZWwxNTc3OTMzMTE=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/priority/high", "name": "priority/high", "color": "e64ef4", "default": false, "description": ""}, {"id": 652909222, "node_id": "MDU6TGFiZWw2NTI5MDkyMjI=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/goals:%20Improve%20Ansible%20logic%20/%20smoother%20install", "name": "goals: Improve Ansible logic / smoother install", "color": "0e8a16", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/freedomofpress/securedrop/milestones/41", "html_url": "https://github.com/freedomofpress/securedrop/milestone/41", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/milestones/41/labels", "id": 3027543, "node_id": "MDk6TWlsZXN0b25lMzAyNzU0Mw==", "number": 41, "title": "0.5.2 ", "description": "", "creator": {"login": "redshiftzero", "id": 7832803, "node_id": "MDQ6VXNlcjc4MzI4MDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7832803?v=4", "gravatar_id": "", "url": "https://api.github.com/users/redshiftzero", "html_url": "https://github.com/redshiftzero", "followers_url": "https://api.github.com/users/redshiftzero/followers", "following_url": "https://api.github.com/users/redshiftzero/following{/other_user}", "gists_url": "https://api.github.com/users/redshiftzero/gists{/gist_id}", "starred_url": "https://api.github.com/users/redshiftzero/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/redshiftzero/subscriptions", "organizations_url": "https://api.github.com/users/redshiftzero/orgs", "repos_url": "https://api.github.com/users/redshiftzero/repos", "events_url": "https://api.github.com/users/redshiftzero/events{/privacy}", "received_events_url": "https://api.github.com/users/redshiftzero/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 10, "state": "closed", "created_at": "2018-01-11T02:21:42Z", "updated_at": "2018-02-15T02:46:00Z", "due_on": null, "closed_at": "2018-02-15T02:46:00Z"}, "comments": 6, "created_at": "2017-10-24T20:38:35Z", "updated_at": "2018-01-24T14:42:23Z", "closed_at": "2018-01-24T14:42:23Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "# Bug\r\n\r\n## Description\r\n\r\nUpon re-run of the install playbook against an existing production instance, I found a really weird condition where a few things line up to cause the ossec agent registration tasks to break. ossec fails to detect a registered client AND then bombs out on attempt to register. This is against an existing install that's already been rebooted (and iptables clamped down).\r\n\r\n\r\n\r\n\r\n## Steps to Reproduce\r\n\r\nAttempt to run `./securedrop-admin install` against an existing installation where the IP is listed twice under the ossec-agent list tool. I'm not certain of when this scenario would have occurred but I've found it on mine so I'm guessing it may be present somewhere else.\r\n\r\n## Expected Behavior\r\n\r\nPlaybook runs successfully.\r\n\r\n\r\n## Actual Behavior\r\n\r\nPlaybook bombs out at task `Register OSSEC agent.` under `install_files/ansible-base/roles/ossec-agent/tasks/agent_config.yml` . I confirmed on the app server that there is no iptables hole punched for port 1515 outbound.\r\n\r\n## Comments\r\n\r\n* https://github.com/freedomofpress/securedrop/blob/develop/install_files/ansible-base/roles/ossec-server/tasks/authd.yml#L23 -- detection of existing agent registered can be incorrect. For instance, in my prod, my agent is listed registered as - `{{ app_ip }}-{{ app_ip }} is available.` (vs the expected `{{ app_hostname }}-{{ app_ip }} is available.`)\r\n* okay, that scenario should be fine and ansible attempts to re-register BUT the firewall rule needed (`1515`) will not open right away b/c the logic in https://github.com/freedomofpress/securedrop/blob/develop/install_files/ansible-base/roles/ossec-agent/tasks/agent_config.yml#L17 is flawed. The opening up of the port will not take affect until the handlers are flushed. Which is not done until the role runs ... but it'll fail before that. The entire iptables logic is problematic here and I'm assuming it works on first install because there is no iptables restrictions on in a default ubuntu installation.", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2478/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2478/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2471", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2471/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2471/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2471/events", "html_url": "https://github.com/freedomofpress/securedrop/pull/2471", "id": 267794061, "node_id": "MDExOlB1bGxSZXF1ZXN0MTQ4MjIzMjA3", "number": 2471, "title": "Abort on duplicate codenames", "user": {"login": "heartsucker", "id": 3998464, "node_id": "MDQ6VXNlcjM5OTg0NjQ=", "avatar_url": "https://avatars.githubusercontent.com/u/3998464?v=4", "gravatar_id": "", "url": "https://api.github.com/users/heartsucker", "html_url": "https://github.com/heartsucker", "followers_url": "https://api.github.com/users/heartsucker/followers", "following_url": "https://api.github.com/users/heartsucker/following{/other_user}", "gists_url": "https://api.github.com/users/heartsucker/gists{/gist_id}", "starred_url": "https://api.github.com/users/heartsucker/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/heartsucker/subscriptions", "organizations_url": "https://api.github.com/users/heartsucker/orgs", "repos_url": "https://api.github.com/users/heartsucker/repos", "events_url": "https://api.github.com/users/heartsucker/events{/privacy}", "received_events_url": "https://api.github.com/users/heartsucker/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}, {"id": 192539755, "node_id": "MDU6TGFiZWwxOTI1Mzk3NTU=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/app", "name": "app", "color": "bfe5bf", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2017-10-23T19:47:54Z", "updated_at": "2017-10-26T19:04:45Z", "closed_at": "2017-10-26T19:04:42Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/freedomofpress/securedrop/pulls/2471", "html_url": "https://github.com/freedomofpress/securedrop/pull/2471", "diff_url": "https://github.com/freedomofpress/securedrop/pull/2471.diff", "patch_url": "https://github.com/freedomofpress/securedrop/pull/2471.patch", "merged_at": "2017-10-26T19:04:42Z"}, "body": "## Status\r\n\r\nReady for review\r\n\r\n## Description of Changes\r\n\r\nFixes #2386.\r\n\r\n## Checklist\r\n\r\n### If you made changes to the app code:\r\n\r\n- [x] Unit and functional tests pass on the development VM", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2471/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2471/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2470", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2470/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2470/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2470/events", "html_url": "https://github.com/freedomofpress/securedrop/issues/2470", "id": 267489090, "node_id": "MDU6SXNzdWUyNjc0ODkwOTA=", "number": 2470, "title": "Session expiring do not display a localized logout message.", "user": {"login": "heartsucker", "id": 3998464, "node_id": "MDQ6VXNlcjM5OTg0NjQ=", "avatar_url": "https://avatars.githubusercontent.com/u/3998464?v=4", "gravatar_id": "", "url": "https://api.github.com/users/heartsucker", "html_url": "https://github.com/heartsucker", "followers_url": "https://api.github.com/users/heartsucker/followers", "following_url": "https://api.github.com/users/heartsucker/following{/other_user}", "gists_url": "https://api.github.com/users/heartsucker/gists{/gist_id}", "starred_url": "https://api.github.com/users/heartsucker/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/heartsucker/subscriptions", "organizations_url": "https://api.github.com/users/heartsucker/orgs", "repos_url": "https://api.github.com/users/heartsucker/repos", "events_url": "https://api.github.com/users/heartsucker/events{/privacy}", "received_events_url": "https://api.github.com/users/heartsucker/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}, {"id": 475977399, "node_id": "MDU6TGFiZWw0NzU5NzczOTk=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/source%20interface%20(SI)", "name": "source interface (SI)", "color": "f9d0c4", "default": false, "description": ""}, {"id": 652906953, "node_id": "MDU6TGFiZWw2NTI5MDY5NTM=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/i18n", "name": "i18n", "color": "d4c5f9", "default": false, "description": "Anything related to translation or internationalization of SecureDrop"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/freedomofpress/securedrop/milestones/26", "html_url": "https://github.com/freedomofpress/securedrop/milestone/26", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/milestones/26/labels", "id": 2555081, "node_id": "MDk6TWlsZXN0b25lMjU1NTA4MQ==", "number": 26, "title": "0.5", "description": "internationalize SecureDrop, app code refactor", "creator": {"login": "redshiftzero", "id": 7832803, "node_id": "MDQ6VXNlcjc4MzI4MDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7832803?v=4", "gravatar_id": "", "url": "https://api.github.com/users/redshiftzero", "html_url": "https://github.com/redshiftzero", "followers_url": "https://api.github.com/users/redshiftzero/followers", "following_url": "https://api.github.com/users/redshiftzero/following{/other_user}", "gists_url": "https://api.github.com/users/redshiftzero/gists{/gist_id}", "starred_url": "https://api.github.com/users/redshiftzero/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/redshiftzero/subscriptions", "organizations_url": "https://api.github.com/users/redshiftzero/orgs", "repos_url": "https://api.github.com/users/redshiftzero/repos", "events_url": "https://api.github.com/users/redshiftzero/events{/privacy}", "received_events_url": "https://api.github.com/users/redshiftzero/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 101, "state": "closed", "created_at": "2017-06-01T00:20:54Z", "updated_at": "2018-01-05T17:54:20Z", "due_on": "2017-12-05T08:00:00Z", "closed_at": "2018-01-05T17:54:20Z"}, "comments": 0, "created_at": "2017-10-22T18:53:51Z", "updated_at": "2017-10-25T22:53:12Z", "closed_at": "2017-10-25T22:53:12Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "# Bug\r\n\r\n## Description\r\n\r\nLike #2391, if a source has their session expire, they will not be shown a localized message when they log out.\r\n\r\n## Steps to Reproduce\r\n\r\nSet session expire to 30 seconds. Log in. Set locale to not-english. Wait 30 seconds. Refresh. See no-localized flashed message.\r\n\r\n## Expected Behavior\r\n\r\nThe logout message is localized.\r\n\r\n## Actual Behavior\r\n\r\nIt is not.", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2470/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2470/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2468", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2468/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2468/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2468/events", "html_url": "https://github.com/freedomofpress/securedrop/pull/2468", "id": 267478135, "node_id": "MDExOlB1bGxSZXF1ZXN0MTQ4MDAxMjEy", "number": 2468, "title": "docs: first clone then install reqs", "user": {"login": "ghost", "id": 10137, "node_id": "MDQ6VXNlcjEwMTM3", "avatar_url": "https://avatars.githubusercontent.com/u/10137?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ghost", "html_url": "https://github.com/ghost", "followers_url": "https://api.github.com/users/ghost/followers", "following_url": "https://api.github.com/users/ghost/following{/other_user}", "gists_url": "https://api.github.com/users/ghost/gists{/gist_id}", "starred_url": "https://api.github.com/users/ghost/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ghost/subscriptions", "organizations_url": "https://api.github.com/users/ghost/orgs", "repos_url": "https://api.github.com/users/ghost/repos", "events_url": "https://api.github.com/users/ghost/events{/privacy}", "received_events_url": "https://api.github.com/users/ghost/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}, {"id": 118465787, "node_id": "MDU6TGFiZWwxMTg0NjU3ODc=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/docs", "name": "docs", "color": "d4c5f9", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2017-10-22T16:23:58Z", "updated_at": "2017-10-22T18:43:51Z", "closed_at": "2017-10-22T16:28:46Z", "author_association": "NONE", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/freedomofpress/securedrop/pulls/2468", "html_url": "https://github.com/freedomofpress/securedrop/pull/2468", "diff_url": "https://github.com/freedomofpress/securedrop/pull/2468.diff", "patch_url": "https://github.com/freedomofpress/securedrop/pull/2468.patch", "merged_at": null}, "body": "## Status\r\n\r\nReady for review\r\n\r\n## Description of Changes\r\n\r\nGetting started guide now first guides me through cloning the repo and then installing the requirments.\r\n\r\n### If you made changes to documentation:\r\n\r\n- [x] Doc linting passed locally\r\n", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2468/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2468/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2450", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2450/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2450/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2450/events", "html_url": "https://github.com/freedomofpress/securedrop/issues/2450", "id": 265754078, "node_id": "MDU6SXNzdWUyNjU3NTQwNzg=", "number": 2450, "title": "There is a CVE on the version of ansible we are pinned to", "user": {"login": "heartsucker", "id": 3998464, "node_id": "MDQ6VXNlcjM5OTg0NjQ=", "avatar_url": "https://avatars.githubusercontent.com/u/3998464?v=4", "gravatar_id": "", "url": "https://api.github.com/users/heartsucker", "html_url": "https://github.com/heartsucker", "followers_url": "https://api.github.com/users/heartsucker/followers", "following_url": "https://api.github.com/users/heartsucker/following{/other_user}", "gists_url": "https://api.github.com/users/heartsucker/gists{/gist_id}", "starred_url": "https://api.github.com/users/heartsucker/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/heartsucker/subscriptions", "organizations_url": "https://api.github.com/users/heartsucker/orgs", "repos_url": "https://api.github.com/users/heartsucker/repos", "events_url": "https://api.github.com/users/heartsucker/events{/privacy}", "received_events_url": "https://api.github.com/users/heartsucker/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}, {"id": 192539287, "node_id": "MDU6TGFiZWwxOTI1MzkyODc=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/ops/deployment", "name": "ops/deployment", "color": "c7def8", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/freedomofpress/securedrop/milestones/35", "html_url": "https://github.com/freedomofpress/securedrop/milestone/35", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/milestones/35/labels", "id": 2862860, "node_id": "MDk6TWlsZXN0b25lMjg2Mjg2MA==", "number": 35, "title": "0.4.4", "description": "Security vulnerability hotfix", "creator": {"login": "redshiftzero", "id": 7832803, "node_id": "MDQ6VXNlcjc4MzI4MDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7832803?v=4", "gravatar_id": "", "url": "https://api.github.com/users/redshiftzero", "html_url": "https://github.com/redshiftzero", "followers_url": "https://api.github.com/users/redshiftzero/followers", "following_url": "https://api.github.com/users/redshiftzero/following{/other_user}", "gists_url": "https://api.github.com/users/redshiftzero/gists{/gist_id}", "starred_url": "https://api.github.com/users/redshiftzero/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/redshiftzero/subscriptions", "organizations_url": "https://api.github.com/users/redshiftzero/orgs", "repos_url": "https://api.github.com/users/redshiftzero/repos", "events_url": "https://api.github.com/users/redshiftzero/events{/privacy}", "received_events_url": "https://api.github.com/users/redshiftzero/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 4, "state": "closed", "created_at": "2017-10-24T17:24:51Z", "updated_at": "2017-11-09T01:44:27Z", "due_on": null, "closed_at": "2017-11-09T01:44:27Z"}, "comments": 6, "created_at": "2017-10-16T12:35:44Z", "updated_at": "2017-10-24T20:52:11Z", "closed_at": "2017-10-24T20:52:11Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "# Bug\r\n\r\n## Description\r\n\r\n```json\r\n[\r\n  \"ansible\", \r\n  \"<2.3.1\", \r\n  \"2.2.3.0\", \r\n  \"ansible before 2.3.1 is vulnerable to CVE-2017-7481 - data for lookup plugins used as variables was not being correctly marked as \\\"unsafe\\\".\", \r\n  \"34941\"\r\n], \r\n```\r\n\r\nhttps://access.redhat.com/security/cve/CVE-2017-7481\r\n\r\n## Steps to Reproduce\r\n\r\n```\r\npip install safety\r\nsafety check --json -r securedrop/requirements/develop-requirements.txt\r\n```\r\n\r\n## Expected Behavior\r\n\r\nWe shouldn't have CVEs in our code.\r\n\r\n## Actual Behavior\r\n\r\nWe do. :(", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2450/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2450/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2434", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2434/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2434/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2434/events", "html_url": "https://github.com/freedomofpress/securedrop/pull/2434", "id": 263848545, "node_id": "MDExOlB1bGxSZXF1ZXN0MTQ1NDE4NjUx", "number": 2434, "title": "i18n: add missing ngettext to a string with a quantity", "user": {"login": "ghost", "id": 10137, "node_id": "MDQ6VXNlcjEwMTM3", "avatar_url": "https://avatars.githubusercontent.com/u/10137?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ghost", "html_url": "https://github.com/ghost", "followers_url": "https://api.github.com/users/ghost/followers", "following_url": "https://api.github.com/users/ghost/following{/other_user}", "gists_url": "https://api.github.com/users/ghost/gists{/gist_id}", "starred_url": "https://api.github.com/users/ghost/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ghost/subscriptions", "organizations_url": "https://api.github.com/users/ghost/orgs", "repos_url": "https://api.github.com/users/ghost/repos", "events_url": "https://api.github.com/users/ghost/events{/privacy}", "received_events_url": "https://api.github.com/users/ghost/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}, {"id": 475977470, "node_id": "MDU6TGFiZWw0NzU5Nzc0NzA=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/journalist%20interface%20(JI)", "name": "journalist interface (JI)", "color": "f9d0c4", "default": false, "description": ""}, {"id": 652906953, "node_id": "MDU6TGFiZWw2NTI5MDY5NTM=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/i18n", "name": "i18n", "color": "d4c5f9", "default": false, "description": "Anything related to translation or internationalization of SecureDrop"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2017-10-09T10:29:42Z", "updated_at": "2017-10-12T12:43:27Z", "closed_at": "2017-10-12T12:43:21Z", "author_association": "NONE", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/freedomofpress/securedrop/pulls/2434", "html_url": "https://github.com/freedomofpress/securedrop/pull/2434", "diff_url": "https://github.com/freedomofpress/securedrop/pull/2434.diff", "patch_url": "https://github.com/freedomofpress/securedrop/pull/2434.patch", "merged_at": "2017-10-12T12:43:21Z"}, "body": "## Status\r\n\r\nReady for review\r\n\r\n## Description of Changes\r\n\r\nFixes #2422 \r\n\r\nadd missing ngettext to a string with a quantity\r\n\r\nPlurality is non-trivial in Russian. In short, there are different ways to write things if the number ends in:\r\n\r\n    1\r\n    2, 3, 4\r\n    5, 6, 7, 8, 9, 0\r\n\r\nSo the standard English/French/etc. rule of \"more than one\" is insufficient. I'm also fairly sure Russian isn't the only language with such a pattern.\r\n\r\n## Testing\r\n\r\nRunning the CI should be enough because securedrop/tests/test_journalist.py::test_login_throttle  verifies the string shows as expected. Ideally we would also verify it shows up as a plural form in messages.pot but we don't have that kind of testing right now. And I'm not sure how it would work\r\n\r\n## Deployment\r\n\r\nUser interface change only, no deployment concern.\r\n\r\n## Checklist\r\n\r\n### If you made changes to the app code:\r\n\r\n- [x] Unit and functional tests pass on the development VM\r\n", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2434/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2434/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2431", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2431/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2431/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2431/events", "html_url": "https://github.com/freedomofpress/securedrop/pull/2431", "id": 263748928, "node_id": "MDExOlB1bGxSZXF1ZXN0MTQ1MzUxNjIx", "number": 2431, "title": "journalist: fix typo and remove useless message", "user": {"login": "ghost", "id": 10137, "node_id": "MDQ6VXNlcjEwMTM3", "avatar_url": "https://avatars.githubusercontent.com/u/10137?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ghost", "html_url": "https://github.com/ghost", "followers_url": "https://api.github.com/users/ghost/followers", "following_url": "https://api.github.com/users/ghost/following{/other_user}", "gists_url": "https://api.github.com/users/ghost/gists{/gist_id}", "starred_url": "https://api.github.com/users/ghost/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ghost/subscriptions", "organizations_url": "https://api.github.com/users/ghost/orgs", "repos_url": "https://api.github.com/users/ghost/repos", "events_url": "https://api.github.com/users/ghost/events{/privacy}", "received_events_url": "https://api.github.com/users/ghost/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}, {"id": 475977470, "node_id": "MDU6TGFiZWw0NzU5Nzc0NzA=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/journalist%20interface%20(JI)", "name": "journalist interface (JI)", "color": "f9d0c4", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2017-10-08T20:25:30Z", "updated_at": "2017-10-11T14:01:55Z", "closed_at": "2017-10-11T14:01:52Z", "author_association": "NONE", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/freedomofpress/securedrop/pulls/2431", "html_url": "https://github.com/freedomofpress/securedrop/pull/2431", "diff_url": "https://github.com/freedomofpress/securedrop/pull/2431.diff", "patch_url": "https://github.com/freedomofpress/securedrop/pull/2431.patch", "merged_at": "2017-10-11T14:01:52Z"}, "body": "## Status\r\n\r\nReady for review / Work in progress\r\n\r\n## Description of Changes\r\n\r\nFixes #2420\r\n\r\ns/adminstrator/administrator/\r\n\r\ndo not suggest the user to check the logs as they do not have access\r\nto them.\r\n\r\n## Testing\r\n\r\nRunning the CI should be enough since tests verify exactly all the strings that have been modified.\r\n\r\n## Deployment\r\n\r\nUser interface changes only.\r\n\r\n## Checklist\r\n\r\n### If you made changes to the app code:\r\n\r\n- [x] Unit and functional tests pass on the development VM\r\n", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2431/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2431/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2430", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2430/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2430/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2430/events", "html_url": "https://github.com/freedomofpress/securedrop/pull/2430", "id": 263735342, "node_id": "MDExOlB1bGxSZXF1ZXN0MTQ1MzQ0ODg3", "number": 2430, "title": "Require credentials when changing password", "user": {"login": "jerr0328", "id": 1524722, "node_id": "MDQ6VXNlcjE1MjQ3MjI=", "avatar_url": "https://avatars.githubusercontent.com/u/1524722?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jerr0328", "html_url": "https://github.com/jerr0328", "followers_url": "https://api.github.com/users/jerr0328/followers", "following_url": "https://api.github.com/users/jerr0328/following{/other_user}", "gists_url": "https://api.github.com/users/jerr0328/gists{/gist_id}", "starred_url": "https://api.github.com/users/jerr0328/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jerr0328/subscriptions", "organizations_url": "https://api.github.com/users/jerr0328/orgs", "repos_url": "https://api.github.com/users/jerr0328/repos", "events_url": "https://api.github.com/users/jerr0328/events{/privacy}", "received_events_url": "https://api.github.com/users/jerr0328/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}, {"id": 192545295, "node_id": "MDU6TGFiZWwxOTI1NDUyOTU=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/security", "name": "security", "color": "bfdadc", "default": false, "description": null}, {"id": 475977470, "node_id": "MDU6TGFiZWw0NzU5Nzc0NzA=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/journalist%20interface%20(JI)", "name": "journalist interface (JI)", "color": "f9d0c4", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 8, "created_at": "2017-10-08T17:37:49Z", "updated_at": "2018-02-27T23:27:49Z", "closed_at": "2017-10-24T21:44:12Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/freedomofpress/securedrop/pulls/2430", "html_url": "https://github.com/freedomofpress/securedrop/pull/2430", "diff_url": "https://github.com/freedomofpress/securedrop/pull/2430.diff", "patch_url": "https://github.com/freedomofpress/securedrop/pull/2430.patch", "merged_at": "2017-10-24T21:44:12Z"}, "body": "Users will have to enter their password and TOTP token when changing their passwords. Admins will also need to do the same for their own accounts, although this isn't specifically validated in the backend (I consider it a sanity check more than security from the admin side).\r\n\r\n## Status\r\n\r\nReady for review\r\n\r\n## Description of Changes\r\n\r\nFixes #2304 .\r\n\r\nChanges proposed in this pull request:\r\n\r\n- Users must enter their existing password and two-factor code when changing their passwords.\r\n- Admins changing their own password via the Admin console will also be prompted for their current password and token.\r\n\r\n## Testing\r\n\r\nBesides running unit tests, this can be validated as a user by doing the following:\r\n\r\n1. Login as a user\r\n2. Go to account page (click on username in top right).\r\n3. See login failure by failing to provide valid existing password.\r\n4. See additional failure by failing to provide valid two-factor code.\r\n5. Enter valid credentials and notice the password is appropriately changed.\r\n\r\n## Deployment\r\n\r\nNo special deployment considerations\r\n\r\n## Checklist\r\n\r\n- [X] Unit and functional tests pass on the development VM", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2430/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2430/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2423", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2423/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2423/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2423/events", "html_url": "https://github.com/freedomofpress/securedrop/issues/2423", "id": 263718099, "node_id": "MDU6SXNzdWUyNjM3MTgwOTk=", "number": 2423, "title": "Reset password button does not have \"reset icon\"", "user": {"login": "heartsucker", "id": 3998464, "node_id": "MDQ6VXNlcjM5OTg0NjQ=", "avatar_url": "https://avatars.githubusercontent.com/u/3998464?v=4", "gravatar_id": "", "url": "https://api.github.com/users/heartsucker", "html_url": "https://github.com/heartsucker", "followers_url": "https://api.github.com/users/heartsucker/followers", "following_url": "https://api.github.com/users/heartsucker/following{/other_user}", "gists_url": "https://api.github.com/users/heartsucker/gists{/gist_id}", "starred_url": "https://api.github.com/users/heartsucker/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/heartsucker/subscriptions", "organizations_url": "https://api.github.com/users/heartsucker/orgs", "repos_url": "https://api.github.com/users/heartsucker/repos", "events_url": "https://api.github.com/users/heartsucker/events{/privacy}", "received_events_url": "https://api.github.com/users/heartsucker/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}, {"id": 475977470, "node_id": "MDU6TGFiZWw0NzU5Nzc0NzA=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/journalist%20interface%20(JI)", "name": "journalist interface (JI)", "color": "f9d0c4", "default": false, "description": ""}, {"id": 520554056, "node_id": "MDU6TGFiZWw1MjA1NTQwNTY=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/UX", "name": "UX", "color": "5319e7", "default": false, "description": null}, {"id": 678359810, "node_id": "MDU6TGFiZWw2NzgzNTk4MTA=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/HTML", "name": "HTML", "color": "006b75", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/freedomofpress/securedrop/milestones/26", "html_url": "https://github.com/freedomofpress/securedrop/milestone/26", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/milestones/26/labels", "id": 2555081, "node_id": "MDk6TWlsZXN0b25lMjU1NTA4MQ==", "number": 26, "title": "0.5", "description": "internationalize SecureDrop, app code refactor", "creator": {"login": "redshiftzero", "id": 7832803, "node_id": "MDQ6VXNlcjc4MzI4MDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7832803?v=4", "gravatar_id": "", "url": "https://api.github.com/users/redshiftzero", "html_url": "https://github.com/redshiftzero", "followers_url": "https://api.github.com/users/redshiftzero/followers", "following_url": "https://api.github.com/users/redshiftzero/following{/other_user}", "gists_url": "https://api.github.com/users/redshiftzero/gists{/gist_id}", "starred_url": "https://api.github.com/users/redshiftzero/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/redshiftzero/subscriptions", "organizations_url": "https://api.github.com/users/redshiftzero/orgs", "repos_url": "https://api.github.com/users/redshiftzero/repos", "events_url": "https://api.github.com/users/redshiftzero/events{/privacy}", "received_events_url": "https://api.github.com/users/redshiftzero/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 101, "state": "closed", "created_at": "2017-06-01T00:20:54Z", "updated_at": "2018-01-05T17:54:20Z", "due_on": "2017-12-05T08:00:00Z", "closed_at": "2018-01-05T17:54:20Z"}, "comments": 1, "created_at": "2017-10-08T13:31:50Z", "updated_at": "2017-11-28T23:52:32Z", "closed_at": "2017-10-22T18:14:28Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "# Bug\r\n\r\n## Description\r\n\r\nSee title.\r\n\r\n## Steps to Reproduce\r\n\r\n![screenshot_2017-10-08_15-30-33](https://user-images.githubusercontent.com/3998464/31317240-a6984f30-ac3d-11e7-928d-60c5e34ba9d4.png)\r\n\r\n## Expected Behavior\r\n\r\nThe button has the icon.\r\n\r\n## Actual Behavior\r\n\r\nThe button does not have the icon.", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2423/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2423/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2422", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2422/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2422/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2422/events", "html_url": "https://github.com/freedomofpress/securedrop/issues/2422", "id": 263717288, "node_id": "MDU6SXNzdWUyNjM3MTcyODg=", "number": 2422, "title": "ngettext not used for journalist login throttling", "user": {"login": "heartsucker", "id": 3998464, "node_id": "MDQ6VXNlcjM5OTg0NjQ=", "avatar_url": "https://avatars.githubusercontent.com/u/3998464?v=4", "gravatar_id": "", "url": "https://api.github.com/users/heartsucker", "html_url": "https://github.com/heartsucker", "followers_url": "https://api.github.com/users/heartsucker/followers", "following_url": "https://api.github.com/users/heartsucker/following{/other_user}", "gists_url": "https://api.github.com/users/heartsucker/gists{/gist_id}", "starred_url": "https://api.github.com/users/heartsucker/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/heartsucker/subscriptions", "organizations_url": "https://api.github.com/users/heartsucker/orgs", "repos_url": "https://api.github.com/users/heartsucker/repos", "events_url": "https://api.github.com/users/heartsucker/events{/privacy}", "received_events_url": "https://api.github.com/users/heartsucker/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}, {"id": 475977470, "node_id": "MDU6TGFiZWw0NzU5Nzc0NzA=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/journalist%20interface%20(JI)", "name": "journalist interface (JI)", "color": "f9d0c4", "default": false, "description": ""}, {"id": 652906953, "node_id": "MDU6TGFiZWw2NTI5MDY5NTM=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/i18n", "name": "i18n", "color": "d4c5f9", "default": false, "description": "Anything related to translation or internationalization of SecureDrop"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2017-10-08T13:18:14Z", "updated_at": "2018-07-29T09:54:21Z", "closed_at": "2017-10-12T12:43:21Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "# Bug\r\n\r\n## Description\r\n\r\nWe don't use ngettext for the login throttling and this makes translating into other languages grammatically incorrect (Russian in this case).\r\n\r\nReported by @xella\r\n\r\n## Steps to Reproduce\r\n\r\nGrep for the following string.\r\n\r\n## Expected Behavior\r\n```\r\nngettext('Please wait at least {seconds} seconds before logging in again.'.format(seconds=seconds), seconds)\r\n```\r\n\r\n## Actual Behavior\r\n```\r\ngettext('Please wait at least {seconds} seconds before logging in again.'.format(seconds=seconds))\r\n```", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2422/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2422/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2420", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2420/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2420/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2420/events", "html_url": "https://github.com/freedomofpress/securedrop/issues/2420", "id": 263717008, "node_id": "MDU6SXNzdWUyNjM3MTcwMDg=", "number": 2420, "title": "Typo in string, useless error message.", "user": {"login": "heartsucker", "id": 3998464, "node_id": "MDQ6VXNlcjM5OTg0NjQ=", "avatar_url": "https://avatars.githubusercontent.com/u/3998464?v=4", "gravatar_id": "", "url": "https://api.github.com/users/heartsucker", "html_url": "https://github.com/heartsucker", "followers_url": "https://api.github.com/users/heartsucker/followers", "following_url": "https://api.github.com/users/heartsucker/following{/other_user}", "gists_url": "https://api.github.com/users/heartsucker/gists{/gist_id}", "starred_url": "https://api.github.com/users/heartsucker/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/heartsucker/subscriptions", "organizations_url": "https://api.github.com/users/heartsucker/orgs", "repos_url": "https://api.github.com/users/heartsucker/repos", "events_url": "https://api.github.com/users/heartsucker/events{/privacy}", "received_events_url": "https://api.github.com/users/heartsucker/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}, {"id": 475977470, "node_id": "MDU6TGFiZWw0NzU5Nzc0NzA=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/journalist%20interface%20(JI)", "name": "journalist interface (JI)", "color": "f9d0c4", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2017-10-08T13:13:21Z", "updated_at": "2018-07-29T09:54:21Z", "closed_at": "2017-10-11T14:01:52Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "# Bug\r\n\r\nThere is a typo in one of the strings and also normal users can't check the application logs, so why do we even tell them to?\r\n\r\nFound by @xella\r\n\r\n## Actual Behavior\r\n\r\n> An unexpected error occurred! Please check the application logs or inform your adminstrator.\r\n\r\n## Expected Behavior\r\n\r\n> An unexpected error occurred! Please inform your administrator.\r\n", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2420/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2420/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2410", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2410/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2410/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2410/events", "html_url": "https://github.com/freedomofpress/securedrop/pull/2410", "id": 263592063, "node_id": "MDExOlB1bGxSZXF1ZXN0MTQ1MjYwNzQx", "number": 2410, "title": "Allow dashes in words in login form on source interface and add regression test", "user": {"login": "redshiftzero", "id": 7832803, "node_id": "MDQ6VXNlcjc4MzI4MDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7832803?v=4", "gravatar_id": "", "url": "https://api.github.com/users/redshiftzero", "html_url": "https://github.com/redshiftzero", "followers_url": "https://api.github.com/users/redshiftzero/followers", "following_url": "https://api.github.com/users/redshiftzero/following{/other_user}", "gists_url": "https://api.github.com/users/redshiftzero/gists{/gist_id}", "starred_url": "https://api.github.com/users/redshiftzero/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/redshiftzero/subscriptions", "organizations_url": "https://api.github.com/users/redshiftzero/orgs", "repos_url": "https://api.github.com/users/redshiftzero/repos", "events_url": "https://api.github.com/users/redshiftzero/events{/privacy}", "received_events_url": "https://api.github.com/users/redshiftzero/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}, {"id": 475977399, "node_id": "MDU6TGFiZWw0NzU5NzczOTk=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/source%20interface%20(SI)", "name": "source interface (SI)", "color": "f9d0c4", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2017-10-06T22:50:00Z", "updated_at": "2017-10-06T23:36:17Z", "closed_at": "2017-10-06T23:36:11Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/freedomofpress/securedrop/pulls/2410", "html_url": "https://github.com/freedomofpress/securedrop/pull/2410", "diff_url": "https://github.com/freedomofpress/securedrop/pull/2410.diff", "patch_url": "https://github.com/freedomofpress/securedrop/pull/2410.patch", "merged_at": "2017-10-06T23:36:11Z"}, "body": "## Status\r\n\r\nReady for review\r\n\r\n## Description of Changes\r\n\r\nFixes #2398 using @dachary's suggestion [here](https://github.com/freedomofpress/securedrop/issues/2398#issuecomment-334309339). Adds a test for the default wordlist to make sure each word in the wordlist is valid input in the login form. \r\n\r\n## Testing\r\n\r\nLook at the test `test_all_words_in_wordlist_validate` and check you agree that all words in the default wordlist will be tested based on the logic there. Is the test passing in CI? \r\n\r\n## Deployment\r\n\r\nThis stricter form validation had not been shipped yet. The default wordlist is currently in use. For new wordlists, we can verify that no unexpected characters are present before shipping. I have verified this for the French wordlist. \r\n\r\n## Checklist\r\n\r\n### If you made changes to the app code:\r\n\r\n- [x] Unit and functional tests pass on the development VM\r\n", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2410/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2410/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2401", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2401/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2401/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2401/events", "html_url": "https://github.com/freedomofpress/securedrop/issues/2401", "id": 263269298, "node_id": "MDU6SXNzdWUyNjMyNjkyOTg=", "number": 2401, "title": "localization: various problems", "user": {"login": "ghost", "id": 10137, "node_id": "MDQ6VXNlcjEwMTM3", "avatar_url": "https://avatars.githubusercontent.com/u/10137?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ghost", "html_url": "https://github.com/ghost", "followers_url": "https://api.github.com/users/ghost/followers", "following_url": "https://api.github.com/users/ghost/following{/other_user}", "gists_url": "https://api.github.com/users/ghost/gists{/gist_id}", "starred_url": "https://api.github.com/users/ghost/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ghost/subscriptions", "organizations_url": "https://api.github.com/users/ghost/orgs", "repos_url": "https://api.github.com/users/ghost/repos", "events_url": "https://api.github.com/users/ghost/events{/privacy}", "received_events_url": "https://api.github.com/users/ghost/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}, {"id": 652906953, "node_id": "MDU6TGFiZWw2NTI5MDY5NTM=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/i18n", "name": "i18n", "color": "d4c5f9", "default": false, "description": "Anything related to translation or internationalization of SecureDrop"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/freedomofpress/securedrop/milestones/26", "html_url": "https://github.com/freedomofpress/securedrop/milestone/26", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/milestones/26/labels", "id": 2555081, "node_id": "MDk6TWlsZXN0b25lMjU1NTA4MQ==", "number": 26, "title": "0.5", "description": "internationalize SecureDrop, app code refactor", "creator": {"login": "redshiftzero", "id": 7832803, "node_id": "MDQ6VXNlcjc4MzI4MDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7832803?v=4", "gravatar_id": "", "url": "https://api.github.com/users/redshiftzero", "html_url": "https://github.com/redshiftzero", "followers_url": "https://api.github.com/users/redshiftzero/followers", "following_url": "https://api.github.com/users/redshiftzero/following{/other_user}", "gists_url": "https://api.github.com/users/redshiftzero/gists{/gist_id}", "starred_url": "https://api.github.com/users/redshiftzero/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/redshiftzero/subscriptions", "organizations_url": "https://api.github.com/users/redshiftzero/orgs", "repos_url": "https://api.github.com/users/redshiftzero/repos", "events_url": "https://api.github.com/users/redshiftzero/events{/privacy}", "received_events_url": "https://api.github.com/users/redshiftzero/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 101, "state": "closed", "created_at": "2017-06-01T00:20:54Z", "updated_at": "2018-01-05T17:54:20Z", "due_on": "2017-12-05T08:00:00Z", "closed_at": "2018-01-05T17:54:20Z"}, "comments": 9, "created_at": "2017-10-05T21:17:12Z", "updated_at": "2018-07-29T09:54:21Z", "closed_at": "2017-10-31T21:21:50Z", "author_association": "NONE", "active_lock_reason": null, "body": "# Bug\r\n\r\n## Description\r\n\r\nThis issue is to collect the various localization problems found before the 0.4.4 release and after the **string freeze**\r\n\r\nThey should be fixed in a pull request right after the 0.4.4 release.", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2401/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2401/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2398", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2398/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2398/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2398/events", "html_url": "https://github.com/freedomofpress/securedrop/issues/2398", "id": 262899379, "node_id": "MDU6SXNzdWUyNjI4OTkzNzk=", "number": 2398, "title": "Transient testing errors for source login", "user": {"login": "heartsucker", "id": 3998464, "node_id": "MDQ6VXNlcjM5OTg0NjQ=", "avatar_url": "https://avatars.githubusercontent.com/u/3998464?v=4", "gravatar_id": "", "url": "https://api.github.com/users/heartsucker", "html_url": "https://github.com/heartsucker", "followers_url": "https://api.github.com/users/heartsucker/followers", "following_url": "https://api.github.com/users/heartsucker/following{/other_user}", "gists_url": "https://api.github.com/users/heartsucker/gists{/gist_id}", "starred_url": "https://api.github.com/users/heartsucker/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/heartsucker/subscriptions", "organizations_url": "https://api.github.com/users/heartsucker/orgs", "repos_url": "https://api.github.com/users/heartsucker/repos", "events_url": "https://api.github.com/users/heartsucker/events{/privacy}", "received_events_url": "https://api.github.com/users/heartsucker/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}, {"id": 475977399, "node_id": "MDU6TGFiZWw0NzU5NzczOTk=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/source%20interface%20(SI)", "name": "source interface (SI)", "color": "f9d0c4", "default": false, "description": ""}, {"id": 475997849, "node_id": "MDU6TGFiZWw0NzU5OTc4NDk=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/tests", "name": "tests", "color": "f9d0c4", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/freedomofpress/securedrop/milestones/26", "html_url": "https://github.com/freedomofpress/securedrop/milestone/26", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/milestones/26/labels", "id": 2555081, "node_id": "MDk6TWlsZXN0b25lMjU1NTA4MQ==", "number": 26, "title": "0.5", "description": "internationalize SecureDrop, app code refactor", "creator": {"login": "redshiftzero", "id": 7832803, "node_id": "MDQ6VXNlcjc4MzI4MDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7832803?v=4", "gravatar_id": "", "url": "https://api.github.com/users/redshiftzero", "html_url": "https://github.com/redshiftzero", "followers_url": "https://api.github.com/users/redshiftzero/followers", "following_url": "https://api.github.com/users/redshiftzero/following{/other_user}", "gists_url": "https://api.github.com/users/redshiftzero/gists{/gist_id}", "starred_url": "https://api.github.com/users/redshiftzero/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/redshiftzero/subscriptions", "organizations_url": "https://api.github.com/users/redshiftzero/orgs", "repos_url": "https://api.github.com/users/redshiftzero/repos", "events_url": "https://api.github.com/users/redshiftzero/events{/privacy}", "received_events_url": "https://api.github.com/users/redshiftzero/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 101, "state": "closed", "created_at": "2017-06-01T00:20:54Z", "updated_at": "2018-01-05T17:54:20Z", "due_on": "2017-12-05T08:00:00Z", "closed_at": "2018-01-05T17:54:20Z"}, "comments": 1, "created_at": "2017-10-04T19:14:53Z", "updated_at": "2020-09-18T17:26:57Z", "closed_at": "2017-10-06T23:36:11Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "# Bug\r\n\r\n## Description\r\n\r\n```\r\n____________________________________________________________ TestSourceApp.test_login_and_logout _____________________________________________________________\r\n\r\nself = <tests.test_source.TestSourceApp testMethod=test_login_and_logout>\r\n\r\n    def test_login_and_logout(self):\r\n        resp = self.client.get('/login')\r\n        self.assertEqual(resp.status_code, 200)\r\n        self.assertIn(\"Enter Codename\", resp.data)\r\n    \r\n        codename = self._new_codename()\r\n        with self.client as c:\r\n            resp = c.post('/login', data=dict(codename=codename),\r\n                          follow_redirects=True)\r\n            self.assertEqual(resp.status_code, 200)\r\n>           self.assertIn(\"Submit Materials\", resp.data)\r\nE           AssertionError: 'Submit Materials' not found in '<!DOCTYPE html>\\n<html lang=\"en\" dir=\"ltr\">\\n  <head>\\n    <meta charset=\"utf-8\">\\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1\">\\n    <title>SecureDrop | Protecting Journalists and Sources</title>\\n\\n    <link rel=\"stylesheet\" href=\"/static/css/source.css\">\\n    <link rel=\"icon\" type=\"image/png\" href=\"/static/i/favicon.png\">\\n    \\n  </head>\\n  <body>\\n    \\n\\n  \\n\\n\\n    <div class=\"content\">\\n      \\n      <div id=\"header\">\\n        <a href=\"/lookup\">\\n          <img src=\"/static/i/logo.png\" class=\"logo small\" alt=\"SecureDrop\" width=\"250px\">\\n        </a>\\n        \\n        \\n      </div>\\n      \\n\\n      <div class=\"panel selected\">\\n      \\n        <a href=\"/logout\" class=\"sd-button btn pull-right\" id=\"logout\">LOG OUT</a>\\n      \\n        <hr class=\"no-line\">\\n\\n        \\n\\n<h1>Enter Codename</h1>\\n\\n\\n\\n\\n\\n<form method=\"post\" action=\"/login\" autocomplete=\"off\">\\n<input name=\"csrf_token\" type=\"hidden\" value=\"IjBkMTg0N2ZmYzU4YzExZjgzOGJiYzJjZTFkYjdkOWZlNmI2OWFhN2Ui.DLa79A.Y7lYbUepqRHo6eF63pCNX1nViJI\">\\n\\n<p class=\"center\">\\n  <input autocomplete=\"off\" autofocus class=\"codename-box\" id=\"login-with-existing-codename\" name=\"codename\" placeholder=\"Enter your codename\" type=\"password\" value=\"\">\\n  <br>\\n  \\n    <span class=\"form-validation-error\">Invalid input.</span>\\n  \\n</p>\\n\\n<div class=\"pull-right\">\\n  <a href=\"/\" class=\"sd-button btn secondary\" id=\"cancel\">CANCEL</a>\\n  <button type=\"submit\" class=\"sd-button btn primary\" id=\"login\">\\n    <img class=\"icon off-hover\" src=\"/static/i/font-awesome/fa-arrow-circle-o-right-white.png\" width=\"18px\" height=\"18px\">\\n    <img class=\"icon on-hover\" src=\"/static/i/font-awesome/fa-arrow-circle-o-right-blue.png\" width=\"18px\" height=\"18px\">\\n    CONTINUE\\n  </button>\\n</div>\\n\\n</form>\\n\\n\\n      </div>\\n\\n      \\n      <footer>\\n        Like all software, SecureDrop may contain security bugs. Use at your own risk. Powered by SecureDrop 0.4.3.\\n      </footer>\\n      \\n    </div>\\n  </body>\\n</html>'\r\n\r\ntests/test_source.py:151: AssertionError\r\n```\r\n\r\n## Steps to Reproduce\r\n\r\nI can't reproduce this, but it pops up on occasion and has been fixed by some combination of `vagrant reload` or wiping the translations directory. Though I'm not sure if either of those actually affect it. :/", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2398/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2398/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2391", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2391/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2391/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2391/events", "html_url": "https://github.com/freedomofpress/securedrop/issues/2391", "id": 262355151, "node_id": "MDU6SXNzdWUyNjIzNTUxNTE=", "number": 2391, "title": "Logging out a source does not display a localized \"Thank you for exiting your session!\" message", "user": {"login": "heartsucker", "id": 3998464, "node_id": "MDQ6VXNlcjM5OTg0NjQ=", "avatar_url": "https://avatars.githubusercontent.com/u/3998464?v=4", "gravatar_id": "", "url": "https://api.github.com/users/heartsucker", "html_url": "https://github.com/heartsucker", "followers_url": "https://api.github.com/users/heartsucker/followers", "following_url": "https://api.github.com/users/heartsucker/following{/other_user}", "gists_url": "https://api.github.com/users/heartsucker/gists{/gist_id}", "starred_url": "https://api.github.com/users/heartsucker/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/heartsucker/subscriptions", "organizations_url": "https://api.github.com/users/heartsucker/orgs", "repos_url": "https://api.github.com/users/heartsucker/repos", "events_url": "https://api.github.com/users/heartsucker/events{/privacy}", "received_events_url": "https://api.github.com/users/heartsucker/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}, {"id": 475977399, "node_id": "MDU6TGFiZWw0NzU5NzczOTk=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/source%20interface%20(SI)", "name": "source interface (SI)", "color": "f9d0c4", "default": false, "description": ""}, {"id": 520554056, "node_id": "MDU6TGFiZWw1MjA1NTQwNTY=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/UX", "name": "UX", "color": "5319e7", "default": false, "description": null}, {"id": 652906953, "node_id": "MDU6TGFiZWw2NTI5MDY5NTM=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/i18n", "name": "i18n", "color": "d4c5f9", "default": false, "description": "Anything related to translation or internationalization of SecureDrop"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2017-10-03T09:09:26Z", "updated_at": "2017-10-22T15:09:35Z", "closed_at": "2017-10-22T15:09:35Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "# Bug\r\n\r\n## Description\r\n\r\nWhen a source clears their session via the logout button, their locale is popped as well. Thus, the following message is not displayed in the correct language.\r\n\r\n```\r\nImportant!\r\nThank you for exiting your session! Please select \"New Identity\" from the green Onion\r\nbutton in the Tor browser to clear all history of your SecureDrop usage from this device.\r\n```\r\n\r\n## Steps to Reproduce\r\n\r\n1. Open source interface\r\n2. Create new user\r\n3. Submit doc\r\n4. Log out\r\n\r\n## Expected Behavior\r\n\r\nThe logout page displays the (quite important) log out message in the correct locale (including HTML with `dir=\"rtl\"` set if needed).\r\n\r\n## Actual Behavior\r\n\r\nThe page is displayed in the default locale.", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2391/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2391/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2384", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2384/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2384/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2384/events", "html_url": "https://github.com/freedomofpress/securedrop/issues/2384", "id": 261655296, "node_id": "MDU6SXNzdWUyNjE2NTUyOTY=", "number": 2384, "title": "Ansible fails to \"Add firewall exemption for OSSEC agent registration.\"", "user": {"login": "jvoisin", "id": 325724, "node_id": "MDQ6VXNlcjMyNTcyNA==", "avatar_url": "https://avatars.githubusercontent.com/u/325724?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jvoisin", "html_url": "https://github.com/jvoisin", "followers_url": "https://api.github.com/users/jvoisin/followers", "following_url": "https://api.github.com/users/jvoisin/following{/other_user}", "gists_url": "https://api.github.com/users/jvoisin/gists{/gist_id}", "starred_url": "https://api.github.com/users/jvoisin/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jvoisin/subscriptions", "organizations_url": "https://api.github.com/users/jvoisin/orgs", "repos_url": "https://api.github.com/users/jvoisin/repos", "events_url": "https://api.github.com/users/jvoisin/events{/privacy}", "received_events_url": "https://api.github.com/users/jvoisin/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2017-09-29T14:12:29Z", "updated_at": "2017-10-04T18:04:16Z", "closed_at": "2017-10-04T09:33:31Z", "author_association": "NONE", "active_lock_reason": null, "body": "# Bug\r\n\r\n## Description\r\n\r\nWhen running the `install` part, I've got a stacktrace from Ansible, in the \"Add firewall exemption for OSSEC agent registration.\" step.\r\n\r\n## Steps to Reproduce\r\n\r\nI'm simply running ` ./securedrop-admin install`. I __carefully_ followed the documentation to setup everything, even bought the recommended hardware.\r\n\r\n## Expected Behavior\r\n\r\nAnsible should finish successfully.\r\n\r\n## Actual Behavior\r\n\r\n```\r\nPLAY [Configure SecureDrop Monitor Server.] ************************************\r\n\r\nPLAY [Configure SecureDrop Application Server.] ********************************\r\n\r\nTASK [setup] *******************************************************************\r\nok: [app]\r\n\r\nTASK [ossec-agent : Install securedrop-ossec-agent package.] *******************\r\nok: [app]\r\n\r\nTASK [ossec-agent : Check whether iptables rules exist.] ***********************\r\nok: [app]\r\n\r\nTASK [ossec-agent : Add firewall exemption for OSSEC agent registration.] ******\r\nfatal: [app]: FAILED! => {\"failed\": true, \"msg\": \"The conditional check 'hostvars[groups.securedrop_monitor_server.0].ossec_agent_already_registered == false and iptables_rules_check_result.stat.exists == true' failed. The error was: error while evaluating conditional (hostvars[groups.securedrop_monitor_server.0].ossec_agent_already_registered == false and iptables_rules_check_result.stat.exists == true): 'dict object' has no attribute 'ossec_agent_already_registered'\\n\\nThe error appears to have been in '/live/persistence/TailsData_unlocked/Persistent/securedrop/install_files/ansible-base/roles/ossec-agent/tasks/agent_config.yml': line 17, column 3, but may\\nbe elsewhere in the file depending on the exact syntax problem.\\n\\nThe offending line appears to be:\\n\\n\\n- name: Add firewall exemption for OSSEC agent registration.\\n  ^ here\\n\"}\r\n\tto retry, use: --limit @/live/persistence/TailsData_unlocked/Persistent/securedrop/install_files/ansible-base/securedrop-prod.retry\r\n\r\nPLAY RECAP *********************************************************************\r\napp                        : ok=55   changed=1    unreachable=0    failed=1   \r\nlocalhost                  : ok=23   changed=0    unreachable=0    failed=0   \r\nmon                        : ok=10   changed=0    unreachable=0    failed=1   \r\n\r\nTASK: common : Install tmux. ------------------------------------------- 80.36s\r\nTASK: common : Install ntp for ntpd. ----------------------------------- 80.28s\r\nTASK: grsecurity : Install the grsecurity-patched kernel from the FPF repo. -- 11.40s\r\nTASK: common : Perform safe upgrade to ensure all the packages are updated. --- 3.99s\r\nTASK: common : Remove hold on tor package, to permit automatic upgrades. --- 3.76s\r\nTASK: common : Check whether tor will be upgraded. ---------------------- 2.56s\r\nTASK: common : Set sysctl flags for net.ipv4 config. -------------------- 1.89s\r\nTASK: grsecurity : Remove generic kernel packages. ---------------------- 1.21s\r\nTASK: validate : Confirm public key file and fingerprint match. --------- 1.08s\r\nTASK: validate : Confirm public key file and fingerprint match. --------- 1.08s\r\n\r\nPlaybook finished: Fri Sep 29 13:59:04 2017, 81 total tasks.  0:03:24 elapsed. \r\n\r\nTraceback (most recent call last):\r\n  File \"./securedrop-admin\", line 312, in <module>\r\n    args.func(args)\r\n  File \"./securedrop-admin\", line 215, in install_securedrop\r\n    '--ask-become-pass'], cwd=ANSIBLE_PATH)\r\n  File \"/usr/lib/python2.7/subprocess.py\", line 186, in check_call\r\n    raise CalledProcessError(retcode, cmd)\r\nsubprocess.CalledProcessError: Command '['/live/persistence/TailsData_unlocked/Persistent/securedrop/./install_files/ansible-base/securedrop-prod.yml', '--ask-become-pass']' returned non-zero exit status 2\r\namnesia@amnesia:/live/persistence/TailsData_unlocked/Persistent/securedrop$ \r\n```\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2384/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2384/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2380", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2380/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2380/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2380/events", "html_url": "https://github.com/freedomofpress/securedrop/pull/2380", "id": 261372458, "node_id": "MDExOlB1bGxSZXF1ZXN0MTQzNjg5MTcz", "number": 2380, "title": "i18n: the order of the accepted languages matters", "user": {"login": "ghost", "id": 10137, "node_id": "MDQ6VXNlcjEwMTM3", "avatar_url": "https://avatars.githubusercontent.com/u/10137?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ghost", "html_url": "https://github.com/ghost", "followers_url": "https://api.github.com/users/ghost/followers", "following_url": "https://api.github.com/users/ghost/following{/other_user}", "gists_url": "https://api.github.com/users/ghost/gists{/gist_id}", "starred_url": "https://api.github.com/users/ghost/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ghost/subscriptions", "organizations_url": "https://api.github.com/users/ghost/orgs", "repos_url": "https://api.github.com/users/ghost/repos", "events_url": "https://api.github.com/users/ghost/events{/privacy}", "received_events_url": "https://api.github.com/users/ghost/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}, {"id": 652906953, "node_id": "MDU6TGFiZWw2NTI5MDY5NTM=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/i18n", "name": "i18n", "color": "d4c5f9", "default": false, "description": "Anything related to translation or internationalization of SecureDrop"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2017-09-28T15:57:39Z", "updated_at": "2017-09-29T22:16:21Z", "closed_at": "2017-09-29T22:15:53Z", "author_association": "NONE", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/freedomofpress/securedrop/pulls/2380", "html_url": "https://github.com/freedomofpress/securedrop/pull/2380", "diff_url": "https://github.com/freedomofpress/securedrop/pull/2380.diff", "patch_url": "https://github.com/freedomofpress/securedrop/pull/2380.patch", "merged_at": "2017-09-29T22:15:53Z"}, "body": "## Status\r\n\r\nReady for review\r\n\r\n## Description of Changes\r\n\r\nFixes #2379.\r\n\r\nThe language list from the Accept-Languages header is sorted by order\r\nof preference. Store it in a list instead of a set to preserve the\r\norder.\r\n\r\n## Testing\r\n\r\nIt is difficult to verify manually because the order in which the set is stored depends on how the values are hashed. The best next thing is to read and run the test added to tests/test_i18n.py\r\n\r\nI implemented the test with values that fail on my machine if the patch is not applied. With a little luck you may have the same on yours.\r\n\r\n## Deployment\r\n\r\ni18n is not deployed yet.\r\n\r\n## Checklist\r\n\r\n### If you made changes to the app code:\r\n\r\n- [x] Unit and functional tests pass on the development VM\r\n", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2380/reactions", "total_count": 1, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2380/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2379", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2379/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2379/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2379/events", "html_url": "https://github.com/freedomofpress/securedrop/issues/2379", "id": 261361854, "node_id": "MDU6SXNzdWUyNjEzNjE4NTQ=", "number": 2379, "title": "i18n Doesn't respect user locale preferences", "user": {"login": "KwadroNaut", "id": 99527, "node_id": "MDQ6VXNlcjk5NTI3", "avatar_url": "https://avatars.githubusercontent.com/u/99527?v=4", "gravatar_id": "", "url": "https://api.github.com/users/KwadroNaut", "html_url": "https://github.com/KwadroNaut", "followers_url": "https://api.github.com/users/KwadroNaut/followers", "following_url": "https://api.github.com/users/KwadroNaut/following{/other_user}", "gists_url": "https://api.github.com/users/KwadroNaut/gists{/gist_id}", "starred_url": "https://api.github.com/users/KwadroNaut/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/KwadroNaut/subscriptions", "organizations_url": "https://api.github.com/users/KwadroNaut/orgs", "repos_url": "https://api.github.com/users/KwadroNaut/repos", "events_url": "https://api.github.com/users/KwadroNaut/events{/privacy}", "received_events_url": "https://api.github.com/users/KwadroNaut/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}, {"id": 652906953, "node_id": "MDU6TGFiZWw2NTI5MDY5NTM=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/i18n", "name": "i18n", "color": "d4c5f9", "default": false, "description": "Anything related to translation or internationalization of SecureDrop"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2017-09-28T15:27:20Z", "updated_at": "2018-07-29T09:54:21Z", "closed_at": "2017-09-29T22:15:53Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "# Bug\r\n\r\nI accept several languages, and send a header with a different priority. I prefer for example Dutch to German and a typical Accept-Language header here could look like: \r\n`Accept-Language:en-US,en;q=0.8,nl;q=0.6,fr;q=0.4,de;q=0.2\r\n`\r\nThis will *not* display the Dutch interface but the French one. If I send one like:\r\n`Accept-Language: en-US,en;q=0.8,nl;q=0.6,de;q=0.4\r\n`\r\nI would get the German one.\r\n\r\n## Steps to Reproduce\r\n\r\nBrowse to http://source.i18n.securedrop.club/ and send such headers:\r\n\r\nGET / HTTP/1.1\r\nHost: source.i18n.securedrop.club\r\nConnection: keep-alive\r\nPragma: no-cache\r\nCache-Control: no-cache\r\nUpgrade-Insecure-Requests: 1\r\nUser-Agent: Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chromium/63.0.XXXXX Safari/537.36\r\nAccept: text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8\r\nReferer: http://i18n.securedrop.club/\r\nAccept-Encoding: gzip, deflate\r\nAccept-Language: en-US,en;q=0.8,nl;q=0.6,de;q=0.4\r\n", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2379/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2379/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2376", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2376/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2376/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2376/events", "html_url": "https://github.com/freedomofpress/securedrop/issues/2376", "id": 261092392, "node_id": "MDU6SXNzdWUyNjEwOTIzOTI=", "number": 2376, "title": "Unexpected characters in source codename should not cause 500 error", "user": {"login": "redshiftzero", "id": 7832803, "node_id": "MDQ6VXNlcjc4MzI4MDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7832803?v=4", "gravatar_id": "", "url": "https://api.github.com/users/redshiftzero", "html_url": "https://github.com/redshiftzero", "followers_url": "https://api.github.com/users/redshiftzero/followers", "following_url": "https://api.github.com/users/redshiftzero/following{/other_user}", "gists_url": "https://api.github.com/users/redshiftzero/gists{/gist_id}", "starred_url": "https://api.github.com/users/redshiftzero/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/redshiftzero/subscriptions", "organizations_url": "https://api.github.com/users/redshiftzero/orgs", "repos_url": "https://api.github.com/users/redshiftzero/repos", "events_url": "https://api.github.com/users/redshiftzero/events{/privacy}", "received_events_url": "https://api.github.com/users/redshiftzero/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/freedomofpress/securedrop/milestones/26", "html_url": "https://github.com/freedomofpress/securedrop/milestone/26", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/milestones/26/labels", "id": 2555081, "node_id": "MDk6TWlsZXN0b25lMjU1NTA4MQ==", "number": 26, "title": "0.5", "description": "internationalize SecureDrop, app code refactor", "creator": {"login": "redshiftzero", "id": 7832803, "node_id": "MDQ6VXNlcjc4MzI4MDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7832803?v=4", "gravatar_id": "", "url": "https://api.github.com/users/redshiftzero", "html_url": "https://github.com/redshiftzero", "followers_url": "https://api.github.com/users/redshiftzero/followers", "following_url": "https://api.github.com/users/redshiftzero/following{/other_user}", "gists_url": "https://api.github.com/users/redshiftzero/gists{/gist_id}", "starred_url": "https://api.github.com/users/redshiftzero/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/redshiftzero/subscriptions", "organizations_url": "https://api.github.com/users/redshiftzero/orgs", "repos_url": "https://api.github.com/users/redshiftzero/repos", "events_url": "https://api.github.com/users/redshiftzero/events{/privacy}", "received_events_url": "https://api.github.com/users/redshiftzero/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 101, "state": "closed", "created_at": "2017-06-01T00:20:54Z", "updated_at": "2018-01-05T17:54:20Z", "due_on": "2017-12-05T08:00:00Z", "closed_at": "2018-01-05T17:54:20Z"}, "comments": 0, "created_at": "2017-09-27T19:34:42Z", "updated_at": "2017-10-02T21:55:21Z", "closed_at": "2017-10-02T21:55:21Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "## Description\r\n\r\nOn the source interface, unexpected characters in the source codename login a cause a `CryptoException` and 500 error.\r\n\r\n## Steps to Reproduce\r\n\r\n1. Go to `/login` on source interface.\r\n2. Enter '[]' in the source codename.\r\n3. Hit \"Continue\"\r\n\r\n## Expected Behavior\r\n\r\nA reasonable flow would be to flash a message informing the user of the expected format of the codename or which characters in the form input were invalid. \r\n\r\n## Actual Behavior\r\n\r\nThe generic 500 error page is shown due to a `CryptoException`:\r\n\r\n<img width=\"1026\" alt=\"screen shot 2017-09-27 at 12 16 36 pm\" src=\"https://user-images.githubusercontent.com/7832803/30933009-1837b54a-a37e-11e7-8b6c-7b7b75429a70.png\">\r\n\r\n## Comments\r\n\r\nThe current logic here is overly complicated: `login` calls `source_app.utils.valid_codename` which calls `crypto_util.hash_codename` which calls `crypto_util.clean`. In `crypto_util.clean`, if there are unexpected characters in the codename _then_ a `CryptoException` will be thrown. We could just handle the `CryptoException` and flash a message. However, we should be validating these forms separately from `crypto_util.py` (see #2312) and _not_ throw `CryptoException`s for form validation errors. ", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2376/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2376/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2368", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2368/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2368/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2368/events", "html_url": "https://github.com/freedomofpress/securedrop/pull/2368", "id": 260006622, "node_id": "MDExOlB1bGxSZXF1ZXN0MTQyNzEzNDUx", "number": 2368, "title": "i18n: datetimeformat regression: add {time} ago", "user": {"login": "ghost", "id": 10137, "node_id": "MDQ6VXNlcjEwMTM3", "avatar_url": "https://avatars.githubusercontent.com/u/10137?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ghost", "html_url": "https://github.com/ghost", "followers_url": "https://api.github.com/users/ghost/followers", "following_url": "https://api.github.com/users/ghost/following{/other_user}", "gists_url": "https://api.github.com/users/ghost/gists{/gist_id}", "starred_url": "https://api.github.com/users/ghost/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ghost/subscriptions", "organizations_url": "https://api.github.com/users/ghost/orgs", "repos_url": "https://api.github.com/users/ghost/repos", "events_url": "https://api.github.com/users/ghost/events{/privacy}", "received_events_url": "https://api.github.com/users/ghost/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}, {"id": 652906953, "node_id": "MDU6TGFiZWw2NTI5MDY5NTM=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/i18n", "name": "i18n", "color": "d4c5f9", "default": false, "description": "Anything related to translation or internationalization of SecureDrop"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2017-09-23T13:05:22Z", "updated_at": "2017-09-24T05:53:23Z", "closed_at": "2017-09-24T05:53:22Z", "author_association": "NONE", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/freedomofpress/securedrop/pulls/2368", "html_url": "https://github.com/freedomofpress/securedrop/pull/2368", "diff_url": "https://github.com/freedomofpress/securedrop/pull/2368.diff", "patch_url": "https://github.com/freedomofpress/securedrop/pull/2368.patch", "merged_at": "2017-09-24T05:53:22Z"}, "body": "## Status\r\n\r\nReady for review\r\n\r\n## Description of Changes\r\n\r\nThe refactor of datetimeformat in 56c338f60568518dd1c132e7933f2df7f878522f had a gression. It removed the \"ago\" part of the relative date time display.\r\n\r\n## Testing\r\n\r\n* pytest -v tests/test_template_filters.py\r\n\r\n## Deployment\r\n\r\nUi only.\r\n\r\n## Checklist\r\n\r\n### If you made changes to the app code:\r\n\r\n- [x] Unit and functional tests pass on the development VM\r\n", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2368/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2368/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2338", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2338/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2338/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2338/events", "html_url": "https://github.com/freedomofpress/securedrop/issues/2338", "id": 259077749, "node_id": "MDU6SXNzdWUyNTkwNzc3NDk=", "number": 2338, "title": "Review gettext for i18n to ensure srings aren't split up", "user": {"login": "heartsucker", "id": 3998464, "node_id": "MDQ6VXNlcjM5OTg0NjQ=", "avatar_url": "https://avatars.githubusercontent.com/u/3998464?v=4", "gravatar_id": "", "url": "https://api.github.com/users/heartsucker", "html_url": "https://github.com/heartsucker", "followers_url": "https://api.github.com/users/heartsucker/followers", "following_url": "https://api.github.com/users/heartsucker/following{/other_user}", "gists_url": "https://api.github.com/users/heartsucker/gists{/gist_id}", "starred_url": "https://api.github.com/users/heartsucker/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/heartsucker/subscriptions", "organizations_url": "https://api.github.com/users/heartsucker/orgs", "repos_url": "https://api.github.com/users/heartsucker/repos", "events_url": "https://api.github.com/users/heartsucker/events{/privacy}", "received_events_url": "https://api.github.com/users/heartsucker/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}, {"id": 652906953, "node_id": "MDU6TGFiZWw2NTI5MDY5NTM=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/i18n", "name": "i18n", "color": "d4c5f9", "default": false, "description": "Anything related to translation or internationalization of SecureDrop"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/freedomofpress/securedrop/milestones/26", "html_url": "https://github.com/freedomofpress/securedrop/milestone/26", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/milestones/26/labels", "id": 2555081, "node_id": "MDk6TWlsZXN0b25lMjU1NTA4MQ==", "number": 26, "title": "0.5", "description": "internationalize SecureDrop, app code refactor", "creator": {"login": "redshiftzero", "id": 7832803, "node_id": "MDQ6VXNlcjc4MzI4MDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7832803?v=4", "gravatar_id": "", "url": "https://api.github.com/users/redshiftzero", "html_url": "https://github.com/redshiftzero", "followers_url": "https://api.github.com/users/redshiftzero/followers", "following_url": "https://api.github.com/users/redshiftzero/following{/other_user}", "gists_url": "https://api.github.com/users/redshiftzero/gists{/gist_id}", "starred_url": "https://api.github.com/users/redshiftzero/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/redshiftzero/subscriptions", "organizations_url": "https://api.github.com/users/redshiftzero/orgs", "repos_url": "https://api.github.com/users/redshiftzero/repos", "events_url": "https://api.github.com/users/redshiftzero/events{/privacy}", "received_events_url": "https://api.github.com/users/redshiftzero/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 101, "state": "closed", "created_at": "2017-06-01T00:20:54Z", "updated_at": "2018-01-05T17:54:20Z", "due_on": "2017-12-05T08:00:00Z", "closed_at": "2018-01-05T17:54:20Z"}, "comments": 0, "created_at": "2017-09-20T08:14:24Z", "updated_at": "2017-11-29T00:10:30Z", "closed_at": "2017-09-25T18:21:29Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "# Bug\r\n\r\n## Description\r\n\r\nFrom this comment: https://github.com/freedomofpress/securedrop/pull/2308#issuecomment-330440538\r\n\r\n## Expected Behavior\r\n\r\nAny given sentence is a single string in `messages.pot`.\r\n\r\n## Actual Behavior\r\n\r\nSome sentence are split into two strings in `messages.pot`.", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2338/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2338/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2295", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2295/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2295/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2295/events", "html_url": "https://github.com/freedomofpress/securedrop/pull/2295", "id": 257266483, "node_id": "MDExOlB1bGxSZXF1ZXN0MTQwNzQwODQ5", "number": 2295, "title": "Revert \"silently strip whitespace from fingerprint\"", "user": {"login": "ghost", "id": 10137, "node_id": "MDQ6VXNlcjEwMTM3", "avatar_url": "https://avatars.githubusercontent.com/u/10137?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ghost", "html_url": "https://github.com/ghost", "followers_url": "https://api.github.com/users/ghost/followers", "following_url": "https://api.github.com/users/ghost/following{/other_user}", "gists_url": "https://api.github.com/users/ghost/gists{/gist_id}", "starred_url": "https://api.github.com/users/ghost/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ghost/subscriptions", "organizations_url": "https://api.github.com/users/ghost/orgs", "repos_url": "https://api.github.com/users/ghost/repos", "events_url": "https://api.github.com/users/ghost/events{/privacy}", "received_events_url": "https://api.github.com/users/ghost/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2017-09-13T05:59:45Z", "updated_at": "2018-01-28T13:20:11Z", "closed_at": "2017-09-13T16:57:17Z", "author_association": "NONE", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/freedomofpress/securedrop/pulls/2295", "html_url": "https://github.com/freedomofpress/securedrop/pull/2295", "diff_url": "https://github.com/freedomofpress/securedrop/pull/2295.diff", "patch_url": "https://github.com/freedomofpress/securedrop/pull/2295.patch", "merged_at": "2017-09-13T16:57:17Z"}, "body": "## Status\r\n\r\nReady for review\r\n\r\n## Description of Changes\r\n\r\nRelated #2266 \r\n\r\nThis reverts commit 2227b0f3f59672890b02063910d6f39a131f8052 because it does not work. See https://github.com/freedomofpress/securedrop/issues/2266#issuecomment-329032505 for more.\r\n\r\n## Testing\r\n\r\nThis goes back to a state where tests were conducted already and should not require more.\r\n\r\n## Deployment\r\n\r\nThe change breaks deployment scenarios and it is important to revert it.\r\n", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2295/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2295/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2282", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2282/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2282/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2282/events", "html_url": "https://github.com/freedomofpress/securedrop/issues/2282", "id": 256861079, "node_id": "MDU6SXNzdWUyNTY4NjEwNzk=", "number": 2282, "title": "Pfsense null configuration XML tag format has changed", "user": {"login": "redshiftzero", "id": 7832803, "node_id": "MDQ6VXNlcjc4MzI4MDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7832803?v=4", "gravatar_id": "", "url": "https://api.github.com/users/redshiftzero", "html_url": "https://github.com/redshiftzero", "followers_url": "https://api.github.com/users/redshiftzero/followers", "following_url": "https://api.github.com/users/redshiftzero/following{/other_user}", "gists_url": "https://api.github.com/users/redshiftzero/gists{/gist_id}", "starred_url": "https://api.github.com/users/redshiftzero/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/redshiftzero/subscriptions", "organizations_url": "https://api.github.com/users/redshiftzero/orgs", "repos_url": "https://api.github.com/users/redshiftzero/repos", "events_url": "https://api.github.com/users/redshiftzero/events{/privacy}", "received_events_url": "https://api.github.com/users/redshiftzero/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "b-meson", "id": 3100220, "node_id": "MDQ6VXNlcjMxMDAyMjA=", "avatar_url": "https://avatars.githubusercontent.com/u/3100220?v=4", "gravatar_id": "", "url": "https://api.github.com/users/b-meson", "html_url": "https://github.com/b-meson", "followers_url": "https://api.github.com/users/b-meson/followers", "following_url": "https://api.github.com/users/b-meson/following{/other_user}", "gists_url": "https://api.github.com/users/b-meson/gists{/gist_id}", "starred_url": "https://api.github.com/users/b-meson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/b-meson/subscriptions", "organizations_url": "https://api.github.com/users/b-meson/orgs", "repos_url": "https://api.github.com/users/b-meson/repos", "events_url": "https://api.github.com/users/b-meson/events{/privacy}", "received_events_url": "https://api.github.com/users/b-meson/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "b-meson", "id": 3100220, "node_id": "MDQ6VXNlcjMxMDAyMjA=", "avatar_url": "https://avatars.githubusercontent.com/u/3100220?v=4", "gravatar_id": "", "url": "https://api.github.com/users/b-meson", "html_url": "https://github.com/b-meson", "followers_url": "https://api.github.com/users/b-meson/followers", "following_url": "https://api.github.com/users/b-meson/following{/other_user}", "gists_url": "https://api.github.com/users/b-meson/gists{/gist_id}", "starred_url": "https://api.github.com/users/b-meson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/b-meson/subscriptions", "organizations_url": "https://api.github.com/users/b-meson/orgs", "repos_url": "https://api.github.com/users/b-meson/repos", "events_url": "https://api.github.com/users/b-meson/events{/privacy}", "received_events_url": "https://api.github.com/users/b-meson/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 5, "created_at": "2017-09-11T22:28:19Z", "updated_at": "2020-09-18T18:21:31Z", "closed_at": "2020-09-18T18:21:30Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "## Description \r\n\r\nIt looks like there have been some changes to the XML null configuration tag format used by pfSense, now requiring `<tag></tag>` instead of the `<tag/>` format currently used in the templates that SecureDrop is shipping. \r\n\r\nUpstream issue: https://redmine.pfsense.org/issues/6893\r\n\r\n## Steps to Reproduce\r\n\r\n1. Download firewall templates.\r\n2. Attempt to load.\r\n\r\n## Expected Behavior\r\n\r\nTemplate loads obviating the need for manual config.\r\n\r\n## Actual Behavior\r\n\r\nThe template does not load. \r\n\r\n## Comments\r\n\r\nThis necessitates the templates to be regenerated using the (latest) updated format. \r\n\r\nGiven the tight timeline until 0.4.3 is released, I suggest that we push the resolution of this into 0.4.4 to give sufficient time to generate and test the updated firewall templates. In the meantime, people installing SecureDrop will need to fall back to the manual configuration, and the documentation should indicate that manual configuration is necessary to avoid frustration in current users. \r\n\r\n@freddymartinez9 discovered this while testing #2281 on hardware. ", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2282/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2282/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2273", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2273/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2273/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2273/events", "html_url": "https://github.com/freedomofpress/securedrop/pull/2273", "id": 256257486, "node_id": "MDExOlB1bGxSZXF1ZXN0MTQwMDQwMTMz", "number": 2273, "title": "Revert \"Don't start redis server twice on Travis\"", "user": {"login": "ghost", "id": 10137, "node_id": "MDQ6VXNlcjEwMTM3", "avatar_url": "https://avatars.githubusercontent.com/u/10137?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ghost", "html_url": "https://github.com/ghost", "followers_url": "https://api.github.com/users/ghost/followers", "following_url": "https://api.github.com/users/ghost/following{/other_user}", "gists_url": "https://api.github.com/users/ghost/gists{/gist_id}", "starred_url": "https://api.github.com/users/ghost/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ghost/subscriptions", "organizations_url": "https://api.github.com/users/ghost/orgs", "repos_url": "https://api.github.com/users/ghost/repos", "events_url": "https://api.github.com/users/ghost/events{/privacy}", "received_events_url": "https://api.github.com/users/ghost/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}, {"id": 652907032, "node_id": "MDU6TGFiZWw2NTI5MDcwMzI=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/goals:%20sick%20CI", "name": "goals: sick CI", "color": "0e8a16", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2017-09-08T13:40:53Z", "updated_at": "2018-01-28T13:17:43Z", "closed_at": "2017-09-08T18:27:14Z", "author_association": "NONE", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/freedomofpress/securedrop/pulls/2273", "html_url": "https://github.com/freedomofpress/securedrop/pull/2273", "diff_url": "https://github.com/freedomofpress/securedrop/pull/2273.diff", "patch_url": "https://github.com/freedomofpress/securedrop/pull/2273.patch", "merged_at": "2017-09-08T18:27:14Z"}, "body": "## Status\r\n\r\nReady for review\r\n\r\n## Description of Changes\r\n\r\nFixes #2272\r\n\r\nThis reverts commit e16b36c5eeab2e53862440dfd39d6828ebdcdb76.\r\n\r\n## Testing\r\n\r\nIf travis passes for this PR it means it works. It fails for all other PRs.\r\n\r\n## Deployment\r\n\r\nTest only.", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2273/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2273/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2272", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2272/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2272/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2272/events", "html_url": "https://github.com/freedomofpress/securedrop/issues/2272", "id": 256256553, "node_id": "MDU6SXNzdWUyNTYyNTY1NTM=", "number": 2272, "title": "travis: fails to run redis", "user": {"login": "ghost", "id": 10137, "node_id": "MDQ6VXNlcjEwMTM3", "avatar_url": "https://avatars.githubusercontent.com/u/10137?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ghost", "html_url": "https://github.com/ghost", "followers_url": "https://api.github.com/users/ghost/followers", "following_url": "https://api.github.com/users/ghost/following{/other_user}", "gists_url": "https://api.github.com/users/ghost/gists{/gist_id}", "starred_url": "https://api.github.com/users/ghost/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ghost/subscriptions", "organizations_url": "https://api.github.com/users/ghost/orgs", "repos_url": "https://api.github.com/users/ghost/repos", "events_url": "https://api.github.com/users/ghost/events{/privacy}", "received_events_url": "https://api.github.com/users/ghost/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}, {"id": 475997849, "node_id": "MDU6TGFiZWw0NzU5OTc4NDk=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/tests", "name": "tests", "color": "f9d0c4", "default": false, "description": null}, {"id": 652907032, "node_id": "MDU6TGFiZWw2NTI5MDcwMzI=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/goals:%20sick%20CI", "name": "goals: sick CI", "color": "0e8a16", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2017-09-08T13:37:36Z", "updated_at": "2018-07-29T09:54:21Z", "closed_at": "2017-09-08T19:11:33Z", "author_association": "NONE", "active_lock_reason": null, "body": "# Bug\r\n\r\n## Description\r\n\r\ntravis fails consistently because redis is not running\r\n\r\n## Steps to Reproduce\r\n\r\npush a pull request\r\n\r\n## Expected Behavior\r\n\r\ntravis runs redis\r\n\r\n## Actual Behavior\r\n\r\ntravis does not run redis\r\n\r\n## Comments\r\n\r\nrevert e16b36c5eeab2e53862440dfd39d6828ebdcdb76 which was no longer needed but is now needed again\r\n\r\n# Feature request\r\n\r\n## Description\r\n\r\nA short summary of the idea.\r\n\r\n## User Stories\r\n\r\nIf appropriate\r\n", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2272/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2272/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2271", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2271/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2271/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2271/events", "html_url": "https://github.com/freedomofpress/securedrop/pull/2271", "id": 256244075, "node_id": "MDExOlB1bGxSZXF1ZXN0MTQwMDI5OTMx", "number": 2271, "title": "source: hide the delete confirmation prompt", "user": {"login": "ghost", "id": 10137, "node_id": "MDQ6VXNlcjEwMTM3", "avatar_url": "https://avatars.githubusercontent.com/u/10137?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ghost", "html_url": "https://github.com/ghost", "followers_url": "https://api.github.com/users/ghost/followers", "following_url": "https://api.github.com/users/ghost/following{/other_user}", "gists_url": "https://api.github.com/users/ghost/gists{/gist_id}", "starred_url": "https://api.github.com/users/ghost/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ghost/subscriptions", "organizations_url": "https://api.github.com/users/ghost/orgs", "repos_url": "https://api.github.com/users/ghost/repos", "events_url": "https://api.github.com/users/ghost/events{/privacy}", "received_events_url": "https://api.github.com/users/ghost/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}, {"id": 475977399, "node_id": "MDU6TGFiZWw0NzU5NzczOTk=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/source%20interface%20(SI)", "name": "source interface (SI)", "color": "f9d0c4", "default": false, "description": ""}, {"id": 678359717, "node_id": "MDU6TGFiZWw2NzgzNTk3MTc=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/CSS", "name": "CSS", "color": "006b75", "default": false, "description": "(Formerly also included SASS)"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 7, "created_at": "2017-09-08T12:50:37Z", "updated_at": "2018-01-28T13:15:44Z", "closed_at": "2017-09-08T19:06:35Z", "author_association": "NONE", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/freedomofpress/securedrop/pulls/2271", "html_url": "https://github.com/freedomofpress/securedrop/pull/2271", "diff_url": "https://github.com/freedomofpress/securedrop/pull/2271.diff", "patch_url": "https://github.com/freedomofpress/securedrop/pull/2271.patch", "merged_at": "2017-09-08T19:06:35Z"}, "body": "## Status\r\n\r\nReady for review\r\n\r\n## Description of Changes\r\n\r\nFixes #2269\r\n\r\nThe CSS hiding the source delete confirmation prompt was removed\r\nby b85bffc8dc4a07a24b975485d9cd3f44d7a1418a but it needs to stay.\r\n\r\n## Testing\r\n\r\n* Submit some documents as a source and then reply to that source as a journalist\r\n* Navigate to the source interface\r\n\r\n![s1](https://user-images.githubusercontent.com/433594/30212306-ac65240c-94a4-11e7-952a-000a8d7af63f.png)\r\n\r\n* Click \"Delete all replies\" under the replies from the journalist see it looks like\r\n\r\n![s2](https://user-images.githubusercontent.com/433594/30212358-dfa0a440-94a4-11e7-8ef2-a5bb610fb4f8.png)\r\n\r\n* Click \"Yes delete all replies\"\r\n\r\n![s3](https://user-images.githubusercontent.com/433594/30212388-f8fe313c-94a4-11e7-8526-d13858f6193e.png)\r\n\r\n* Click \"No, Not Yet\" and see the same, except the notification on top.\r\n\r\n## Deployment\r\n\r\nVisual only, no deployment impact.\r\n\r\n## Checklist\r\n\r\n### If you made changes to the app code:\r\n\r\n- [x] Unit and functional tests pass on the development VM\r\n", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2271/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2271/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2262", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2262/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2262/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2262/events", "html_url": "https://github.com/freedomofpress/securedrop/issues/2262", "id": 255772938, "node_id": "MDU6SXNzdWUyNTU3NzI5Mzg=", "number": 2262, "title": "Extra level in zip folders for single sources", "user": {"login": "redshiftzero", "id": 7832803, "node_id": "MDQ6VXNlcjc4MzI4MDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7832803?v=4", "gravatar_id": "", "url": "https://api.github.com/users/redshiftzero", "html_url": "https://github.com/redshiftzero", "followers_url": "https://api.github.com/users/redshiftzero/followers", "following_url": "https://api.github.com/users/redshiftzero/following{/other_user}", "gists_url": "https://api.github.com/users/redshiftzero/gists{/gist_id}", "starred_url": "https://api.github.com/users/redshiftzero/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/redshiftzero/subscriptions", "organizations_url": "https://api.github.com/users/redshiftzero/orgs", "repos_url": "https://api.github.com/users/redshiftzero/repos", "events_url": "https://api.github.com/users/redshiftzero/events{/privacy}", "received_events_url": "https://api.github.com/users/redshiftzero/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/freedomofpress/securedrop/milestones/26", "html_url": "https://github.com/freedomofpress/securedrop/milestone/26", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/milestones/26/labels", "id": 2555081, "node_id": "MDk6TWlsZXN0b25lMjU1NTA4MQ==", "number": 26, "title": "0.5", "description": "internationalize SecureDrop, app code refactor", "creator": {"login": "redshiftzero", "id": 7832803, "node_id": "MDQ6VXNlcjc4MzI4MDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7832803?v=4", "gravatar_id": "", "url": "https://api.github.com/users/redshiftzero", "html_url": "https://github.com/redshiftzero", "followers_url": "https://api.github.com/users/redshiftzero/followers", "following_url": "https://api.github.com/users/redshiftzero/following{/other_user}", "gists_url": "https://api.github.com/users/redshiftzero/gists{/gist_id}", "starred_url": "https://api.github.com/users/redshiftzero/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/redshiftzero/subscriptions", "organizations_url": "https://api.github.com/users/redshiftzero/orgs", "repos_url": "https://api.github.com/users/redshiftzero/repos", "events_url": "https://api.github.com/users/redshiftzero/events{/privacy}", "received_events_url": "https://api.github.com/users/redshiftzero/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 101, "state": "closed", "created_at": "2017-06-01T00:20:54Z", "updated_at": "2018-01-05T17:54:20Z", "due_on": "2017-12-05T08:00:00Z", "closed_at": "2018-01-05T17:54:20Z"}, "comments": 2, "created_at": "2017-09-06T23:38:35Z", "updated_at": "2017-11-29T00:23:14Z", "closed_at": "2017-09-18T23:45:08Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "## Description\r\n\r\nThere is an extra unnecessary folder for zipfiles downloaded from the journalist interface for single sources. \r\n\r\n## Steps to Reproduce\r\n\r\n0. Submit some files to SecureDrop\r\n1. Load the home page of the journalist interface\r\n2. Select one source using the checkbox\r\n3. Select \"Download\"\r\n4. Unzip the resulting file\r\n\r\n## Expected Behavior\r\n\r\nFile structure would ideally be: \r\n\r\n`source-name/number_date`\r\n\r\ne.g.:\r\n\r\n`ecstatic-potato/1_03-20-20`\r\n\r\n## Actual Behavior\r\n\r\nInstead there is an additional layer:\r\n\r\n`ecstatic-potato/ecstatic-potato/1_03-20-20`\r\n\r\n## Comment\r\n\r\nThis additional folder is confusing to users and should be removed.\r\n\r\nNote: if you download unread or download all for multiple sources - the outer folder will not be named after the source and will be e.g. `all`:\r\n\r\n`all/ecstatic-potato/1_03-20-20`", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2262/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2262/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2256", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2256/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2256/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2256/events", "html_url": "https://github.com/freedomofpress/securedrop/pull/2256", "id": 255443973, "node_id": "MDExOlB1bGxSZXF1ZXN0MTM5NDQ3MzQz", "number": 2256, "title": "run srm with minimal dependencies", "user": {"login": "ghost", "id": 10137, "node_id": "MDQ6VXNlcjEwMTM3", "avatar_url": "https://avatars.githubusercontent.com/u/10137?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ghost", "html_url": "https://github.com/ghost", "followers_url": "https://api.github.com/users/ghost/followers", "following_url": "https://api.github.com/users/ghost/following{/other_user}", "gists_url": "https://api.github.com/users/ghost/gists{/gist_id}", "starred_url": "https://api.github.com/users/ghost/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ghost/subscriptions", "organizations_url": "https://api.github.com/users/ghost/orgs", "repos_url": "https://api.github.com/users/ghost/repos", "events_url": "https://api.github.com/users/ghost/events{/privacy}", "received_events_url": "https://api.github.com/users/ghost/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}, {"id": 192539755, "node_id": "MDU6TGFiZWwxOTI1Mzk3NTU=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/app", "name": "app", "color": "bfe5bf", "default": false, "description": null}, {"id": 625966031, "node_id": "MDU6TGFiZWw2MjU5NjYwMzE=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/able%20to%20reproduce", "name": "able to reproduce", "color": "fbca04", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 12, "created_at": "2017-09-06T00:13:43Z", "updated_at": "2018-01-28T13:21:44Z", "closed_at": "2017-09-14T21:01:33Z", "author_association": "NONE", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/freedomofpress/securedrop/pulls/2256", "html_url": "https://github.com/freedomofpress/securedrop/pull/2256", "diff_url": "https://github.com/freedomofpress/securedrop/pull/2256.diff", "patch_url": "https://github.com/freedomofpress/securedrop/pull/2256.patch", "merged_at": "2017-09-14T21:01:33Z"}, "body": "## Status\r\n\r\nWork in progress\r\n\r\n## Description of Changes\r\n\r\nFixes #844\r\n\r\nWhen srm is delegated to a redis worker via rq, the modules it needs\r\nwill be imported in another python interpreter. To keep this to a\r\nminimum, the srm function is isolated in a single file which only\r\ndepends on subprocess.\r\n\r\nThe former implementation was included in the store file which imports\r\ngnupg. But gnupg runs processes and create directories when it is\r\nimported. It will race with the journalist wsgi threads (each thread\r\nhas its own python interpreter) on a production server. And it will\r\nalso race with the journalist application run in a test environment,\r\ninadvertendly re-creating the key directory after the teardown\r\nfunction of the test removed the temporary directory in which it ran.\r\n\r\nThe redis server cannot be replaced by a thread run from the\r\njournalist application because the production server has dozens of\r\nthem ran in each wsgi thread.\r\n\r\n## Testing\r\n\r\n* cherry-pick **reproducer for #844** to develop\r\n* run  `while : ; do pytest -v tests/test_journalist.py || break ; done` in the development VM\r\n* verify that it quickly (less than 5 runs) fails with\r\n<pre>\r\n>           assert not os.path.exists(config.SECUREDROP_DATA_ROOT)  # reproducer for #844\r\nE           AssertionError\r\n</pre>\r\n* cherry-pick **isolate the srm function** on top of **reproducer for #844**\r\n* run  `while : ; do pytest -v tests/test_journalist.py || break ; done` in the development VM\r\n* verify that it loops with no failure during an hour\r\n\r\n## Deployment\r\n\r\n* The new rm.py file was added to apparmor for usr.sbin.apache2\r\n* The code delegating the removal of files is not changed, it is just moved into a separate file which has 100% coverage.\r\n\r\n## Checklist\r\n\r\n### If you made changes to the app code:\r\n\r\n- [x] Unit and functional tests pass on the development VM\r\n", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2256/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2256/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2188", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2188/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2188/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2188/events", "html_url": "https://github.com/freedomofpress/securedrop/issues/2188", "id": 252669986, "node_id": "MDU6SXNzdWUyNTI2Njk5ODY=", "number": 2188, "title": "Tails/SecureDrop is unpacking excel (xlsx) files ", "user": {"login": "msheiny", "id": 1727935, "node_id": "MDQ6VXNlcjE3Mjc5MzU=", "avatar_url": "https://avatars.githubusercontent.com/u/1727935?v=4", "gravatar_id": "", "url": "https://api.github.com/users/msheiny", "html_url": "https://github.com/msheiny", "followers_url": "https://api.github.com/users/msheiny/followers", "following_url": "https://api.github.com/users/msheiny/following{/other_user}", "gists_url": "https://api.github.com/users/msheiny/gists{/gist_id}", "starred_url": "https://api.github.com/users/msheiny/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/msheiny/subscriptions", "organizations_url": "https://api.github.com/users/msheiny/orgs", "repos_url": "https://api.github.com/users/msheiny/repos", "events_url": "https://api.github.com/users/msheiny/events{/privacy}", "received_events_url": "https://api.github.com/users/msheiny/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}, {"id": 625966031, "node_id": "MDU6TGFiZWw2MjU5NjYwMzE=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/able%20to%20reproduce", "name": "able to reproduce", "color": "fbca04", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2017-08-24T17:12:59Z", "updated_at": "2017-08-28T17:41:23Z", "closed_at": "2017-08-28T17:41:23Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "# Bug\r\n\r\n## Description\r\n\r\nWhen a journalist attempts to decrypt a modern excel format (`.xlsx`) under Tails (`3.0.1`+) from a SecureDrop (`0.4.2`) instance the file unpacks in a way that is unreadable. More specifically, it appears that Tails is unpacking the xlsx file into a new directory - which is a confusing experience for a journalist trying to read a source.\r\n\r\n## Steps to Reproduce\r\n\r\n* Generate an xlsx file (you can do this from libreoffice, just make sure you save-as and select `xlsx` )\r\n![image](https://user-images.githubusercontent.com/1727935/29677142-335bba22-88c8-11e7-894d-5c378063b58a.png)\r\n* Upload to a securedrop 0.4.2 instance\r\n* Download and transfer the file to the SVS machine (needs to be running tails `3.0.1`+)\r\n* Open nautlius (`files` app) and unpack the file by double clicking continually. The excel file will eventually unpack to a directory which contains files  looks like the file contents of a typice:\r\n\r\n```\r\n$ unzip -l excel.xlsx \r\nArchive:  excel.xlsx\r\n  Length      Date    Time    Name\r\n---------  ---------- -----   ----\r\n      571  2017-08-24 16:17   _rels/.rels\r\n      380  2017-08-24 16:17   docProps/app.xml\r\n      731  2017-08-24 16:17   docProps/core.xml\r\n      549  2017-08-24 16:17   xl/_rels/workbook.xml.rels\r\n      878  2017-08-24 16:17   xl/workbook.xml\r\n     4583  2017-08-24 16:17   xl/styles.xml\r\n     2501  2017-08-24 16:17   xl/worksheets/sheet1.xml\r\n      318  2017-08-24 16:17   xl/sharedStrings.xml\r\n     1111  2017-08-24 16:17   [Content_Types].xml\r\n---------                     -------\r\n    11622                     9 files\r\n```\r\n\r\n## Expected Behavior\r\nFile should should maintain extension and open up in libreoffice. Note that I have verified the gnome `/usr/bin/dconf` bashrc setting was in place on the SVS.\r\n\r\n## Suggestions to fix, any other relevant information.\r\n\r\nI realize there are previous tickets relating to this -- https://github.com/freedomofpress/securedrop/issues/1862 not sure it is completely resolved though.", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2188/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2188/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2183", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2183/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2183/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2183/events", "html_url": "https://github.com/freedomofpress/securedrop/issues/2183", "id": 252454671, "node_id": "MDU6SXNzdWUyNTI0NTQ2NzE=", "number": 2183, "title": "Fix two page layout screenshot failures", "user": {"login": "redshiftzero", "id": 7832803, "node_id": "MDQ6VXNlcjc4MzI4MDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7832803?v=4", "gravatar_id": "", "url": "https://api.github.com/users/redshiftzero", "html_url": "https://github.com/redshiftzero", "followers_url": "https://api.github.com/users/redshiftzero/followers", "following_url": "https://api.github.com/users/redshiftzero/following{/other_user}", "gists_url": "https://api.github.com/users/redshiftzero/gists{/gist_id}", "starred_url": "https://api.github.com/users/redshiftzero/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/redshiftzero/subscriptions", "organizations_url": "https://api.github.com/users/redshiftzero/orgs", "repos_url": "https://api.github.com/users/redshiftzero/repos", "events_url": "https://api.github.com/users/redshiftzero/events{/privacy}", "received_events_url": "https://api.github.com/users/redshiftzero/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2017-08-24T00:36:35Z", "updated_at": "2017-08-24T16:35:28Z", "closed_at": "2017-08-24T16:35:28Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "## Description\r\n\r\nSince  #2141, we have a flag in `pytest` to generate automatic screenshots for each page of the source and journalist interface in each translated language. There is a previously unused step (`_admin_creates_a_user`) in the `functional/journalist_navigation_steps.py` that are used by these tests of the page layout. Two of these screenshots are failing (details below).\r\n\r\nNote that this was caused by merging in #1509 and #2141 in quick succession. \r\n\r\n## Steps to Reproduce\r\n\r\n1. `vagrant up`\r\n2. `cd /vagrant/securedrop`\r\n3. `pytest -v tests/ --page-layout`\r\n\r\n## Expected Behavior\r\n\r\nAll tests pass (and thus all screenshots are generated)\r\n\r\n## Actual Behavior\r\n\r\nEverything except `test_admin_new_user_two_factor_hotp` and `test_admin_new_user_two_factor_totp` pass. One sees errors like the following:\r\n\r\n```\r\nself = <test_journalist.TestJournalistLayout instance at 0x7f32080daa28>\r\n\r\n    def test_admin_new_user_two_factor_hotp(self):\r\n        self._admin_logs_in()\r\n        self._admin_visits_admin_interface()\r\n>       self._admin_creates_a_user(hotp='123456')\r\n\r\ntests/pages-layout/test_journalist.py:96: \r\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \r\n\r\nself = <test_journalist.TestJournalistLayout instance at 0x7f32080daa28>, hotp = '123456'\r\n\r\n    def _admin_creates_a_user(self, hotp):\r\n        add_user_btn = self.driver.find_element_by_css_selector(\r\n            'button#add-user')\r\n        add_user_btn.click()\r\n    \r\n        self.new_user = dict(\r\n            username='dellsberg',\r\n            password='pentagonpapers')\r\n    \r\n        import pdb; pdb.set_trace()\r\n        self._add_user(self.new_user['username'],\r\n                       self.new_user['password'],\r\n                       is_admin=False,\r\n>                      hotp=hotp)\r\nE       TypeError: _add_user() got multiple values for keyword argument 'is_admin'\r\n\r\ntests/functional/journalist_navigation_steps.py:521: TypeError\r\n```\r\n\r\n## Comments\r\n\r\nFirst I'm going to add these page-layout screenshots to CI so that if this happens again it'll fail the build (#2181). \r\n\r\nThen I'll fix the underlying cause here, which is the following code stanza in `_admin_creates_a_user` still has a reference to the password that we're now auto-generating for all users:\r\n\r\n```py\r\n        self._add_user(self.new_user['username'],\r\n                       self.new_user['password'],\r\n                       is_admin=False,\r\n                       hotp=hotp)\r\n```\r\n\r\nRemoving `self.new_user['password']` fixes.", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2183/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2183/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2121", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2121/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2121/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2121/events", "html_url": "https://github.com/freedomofpress/securedrop/pull/2121", "id": 250457152, "node_id": "MDExOlB1bGxSZXF1ZXN0MTM1OTA1NjU5", "number": 2121, "title": "manage: clean-tmp removes old files to avoid races", "user": {"login": "ghost", "id": 10137, "node_id": "MDQ6VXNlcjEwMTM3", "avatar_url": "https://avatars.githubusercontent.com/u/10137?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ghost", "html_url": "https://github.com/ghost", "followers_url": "https://api.github.com/users/ghost/followers", "following_url": "https://api.github.com/users/ghost/following{/other_user}", "gists_url": "https://api.github.com/users/ghost/gists{/gist_id}", "starred_url": "https://api.github.com/users/ghost/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ghost/subscriptions", "organizations_url": "https://api.github.com/users/ghost/orgs", "repos_url": "https://api.github.com/users/ghost/repos", "events_url": "https://api.github.com/users/ghost/events{/privacy}", "received_events_url": "https://api.github.com/users/ghost/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2017-08-15T22:28:28Z", "updated_at": "2017-10-03T18:55:39Z", "closed_at": "2017-10-03T18:55:35Z", "author_association": "NONE", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/freedomofpress/securedrop/pulls/2121", "html_url": "https://github.com/freedomofpress/securedrop/pull/2121", "diff_url": "https://github.com/freedomofpress/securedrop/pull/2121.diff", "patch_url": "https://github.com/freedomofpress/securedrop/pull/2121.patch", "merged_at": "2017-10-03T18:55:35Z"}, "body": "## Status\r\n\r\nReady for review\r\n\r\n## Description of Changes\r\n\r\nFixes #1849\r\n\r\nA file is considered old if it has not been modified in seven days (or\r\n--days) and is removed from config.TEMP_DIR (or --directory).\r\n\r\nThe files in config.TEMP_DIR are for preparing downloads and they must\r\nnot be deleted before the user gets a chance to start the download. The\r\npreparation of the file may be long for large collections but it will\r\nalways take less than a week.\r\n\r\nIt is not impossible for a the download to take more than a week if the\r\nnetwork is slow. However, once the download has begun it does not matter\r\nif the file is removed: the server still has an open file descriptor and\r\nkeeps serving its content.\r\n\r\n## Testing\r\n\r\nThe test_manage.py has been modified to test the new implementation.\r\n\r\n## Deployment\r\n\r\n1. Upgrading existing production instances.\r\n\r\nThe new implementation will leave temporary files for a week longer than the previous one.\r\n\r\n2. New installs.\r\n\r\nNothing special.\r\n", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2121/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2121/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2114", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2114/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2114/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2114/events", "html_url": "https://github.com/freedomofpress/securedrop/issues/2114", "id": 250448929, "node_id": "MDU6SXNzdWUyNTA0NDg5Mjk=", "number": 2114, "title": "./securedrop-admin tailsconfig fails if parent not named \"securedrop\" ", "user": {"login": "ryantate", "id": 274972, "node_id": "MDQ6VXNlcjI3NDk3Mg==", "avatar_url": "https://avatars.githubusercontent.com/u/274972?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ryantate", "html_url": "https://github.com/ryantate", "followers_url": "https://api.github.com/users/ryantate/followers", "following_url": "https://api.github.com/users/ryantate/following{/other_user}", "gists_url": "https://api.github.com/users/ryantate/gists{/gist_id}", "starred_url": "https://api.github.com/users/ryantate/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ryantate/subscriptions", "organizations_url": "https://api.github.com/users/ryantate/orgs", "repos_url": "https://api.github.com/users/ryantate/repos", "events_url": "https://api.github.com/users/ryantate/events{/privacy}", "received_events_url": "https://api.github.com/users/ryantate/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}, {"id": 192539287, "node_id": "MDU6TGFiZWwxOTI1MzkyODc=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/ops/deployment", "name": "ops/deployment", "color": "c7def8", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2017-08-15T21:47:39Z", "updated_at": "2018-02-20T11:11:48Z", "closed_at": "2018-02-20T11:11:48Z", "author_association": "NONE", "active_lock_reason": null, "body": "\r\n# Bug\r\n\r\n## Description\r\n\r\nRunning `tailsconfig` on a workstation Tails fails unless the directory has a particular name. This doesn't seem to be documented.\r\n\r\n## Steps to Reproduce\r\n\r\nPlace copy of securedrop repo in `~/Persistent` of a properly-configured (dotfiles etc) Tails 3.1 instance running with an admin password enabled. Ensure repo is in dir named `securedrop-develop`, as it is named by default if you downloaded a zip file of the repo from github and unzipped it (not the recommended approach, more below). Copy your working `app-journalist-aths` and `app-source-ths` into `securedrop-develop/install_files/ansible-base`. `cd` into the repo dir and run `./securedrop-admin setup` and then `./securedrop-admin tailsconfig`. Enter admin password as prompted.\r\n\r\n## Expected Behavior\r\n\r\nInstall works, just as it would if the dir were named \"securedrop\".\r\n\r\n## Actual Behavior\r\n\r\n Install fails, see \r\n[securedrop-install-error.txt](https://github.com/freedomofpress/securedrop/files/1226552/securedrop-install-error.txt). I tried this twice with each directory name and the exact same config files and steps to ensure I wasn't borking things with anything other than the dir name. Always worked in `~/Persistent/securedrop` and failed in `~/Persistent/securedrop-develop`.\r\n\r\nThe use of a hardwired dir name seems to emerge in the session like so\r\n```\r\nTASK [tails-config : Migrate site-specific configuration to new location.] *****\r\nfatal: [localhost]: FAILED! => {\"changed\": true, \"cmd\": [\"cp\", \"/home/amnesia/Persistent/securedrop/install_files/ansible-base/prod-specific.yml\", \"/home/amnesia/Persistent/securedrop/install_files/ansible-base/group_vars/all/site-specific\"], \"delta\": \"0:00:00.002211\", \"end\": \"2017-08-15 21:20:57.049969\", \"failed\": true, \"rc\": 1, \"start\": \"2017-08-15 21:20:57.047758\", \"stderr\": \"cp: cannot stat '/home/amnesia/Persistent/securedrop/install_files/ansible-base/prod-specific.yml': No such file or directory\", \"stdout\": \"\", \"stdout_lines\": [], \"warnings\": []}\r\n```\r\n\r\n## Comments\r\n\r\nPeople shouldn't be downloading the zip file, they should be using the git install, so they can use the inbuilt gpg verification and check out a particular tag.  If they do that, and don't rename anything, this won't be an issue. I ultimately did this.\r\n\r\nThat said, it's never explicitly documented that the dir must be named `securedrop`. That should probably be stated explicitly here:\r\n\r\nhttps://docs.securedrop.org/en/stable/set_up_admin_tails.html#download-the-securedrop-repository\r\n\r\nAnd/or here:\r\n\r\nhttps://docs.securedrop.org/en/stable/onboarding.html\r\n\r\nOR the code should be fixed to not depend on a particular dir name. IMO.\r\n", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2114/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2114/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2105", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2105/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2105/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2105/events", "html_url": "https://github.com/freedomofpress/securedrop/issues/2105", "id": 249991244, "node_id": "MDU6SXNzdWUyNDk5OTEyNDQ=", "number": 2105, "title": "After unattended update, can't connect to SecureDrop app", "user": {"login": "sighmon", "id": 314298, "node_id": "MDQ6VXNlcjMxNDI5OA==", "avatar_url": "https://avatars.githubusercontent.com/u/314298?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sighmon", "html_url": "https://github.com/sighmon", "followers_url": "https://api.github.com/users/sighmon/followers", "following_url": "https://api.github.com/users/sighmon/following{/other_user}", "gists_url": "https://api.github.com/users/sighmon/gists{/gist_id}", "starred_url": "https://api.github.com/users/sighmon/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sighmon/subscriptions", "organizations_url": "https://api.github.com/users/sighmon/orgs", "repos_url": "https://api.github.com/users/sighmon/repos", "events_url": "https://api.github.com/users/sighmon/events{/privacy}", "received_events_url": "https://api.github.com/users/sighmon/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}, {"id": 157793311, "node_id": "MDU6TGFiZWwxNTc3OTMzMTE=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/priority/high", "name": "priority/high", "color": "e64ef4", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/freedomofpress/securedrop/milestones/33", "html_url": "https://github.com/freedomofpress/securedrop/milestone/33", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/milestones/33/labels", "id": 2701312, "node_id": "MDk6TWlsZXN0b25lMjcwMTMxMg==", "number": 33, "title": "0.4.2", "description": "Bug fix release to restore web application interfaces broken due to overconfinement.", "creator": {"login": "conorsch", "id": 657862, "node_id": "MDQ6VXNlcjY1Nzg2Mg==", "avatar_url": "https://avatars.githubusercontent.com/u/657862?v=4", "gravatar_id": "", "url": "https://api.github.com/users/conorsch", "html_url": "https://github.com/conorsch", "followers_url": "https://api.github.com/users/conorsch/followers", "following_url": "https://api.github.com/users/conorsch/following{/other_user}", "gists_url": "https://api.github.com/users/conorsch/gists{/gist_id}", "starred_url": "https://api.github.com/users/conorsch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/conorsch/subscriptions", "organizations_url": "https://api.github.com/users/conorsch/orgs", "repos_url": "https://api.github.com/users/conorsch/repos", "events_url": "https://api.github.com/users/conorsch/events{/privacy}", "received_events_url": "https://api.github.com/users/conorsch/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 3, "state": "closed", "created_at": "2017-08-14T23:06:59Z", "updated_at": "2017-08-16T19:51:22Z", "due_on": null, "closed_at": "2017-08-16T19:51:22Z"}, "comments": 27, "created_at": "2017-08-14T10:26:19Z", "updated_at": "2017-08-15T16:29:08Z", "closed_at": "2017-08-15T16:29:08Z", "author_association": "NONE", "active_lock_reason": null, "body": "# Bug\r\n\r\n## Description\r\n\r\nOvernight one of the unattended upgrades left the SecureDrop app server unable to be reached from Tor Browser.\r\n\r\n## Steps to Reproduce\r\n\r\nSecureDrop 0.4.1\r\n\r\n1. SecureDrop had been running upgrades flawlessly.\r\n2. An unattended upgrade last night seems to have caused the break.\r\n\r\n## Expected Behavior\r\n\r\nCan access SecureDrop from Tor Browser.\r\n\r\n## Actual Behavior\r\n\r\nUnable to connect.\r\n\r\n## Comments\r\n\r\n* I've tried restarting the servers twice.\r\n* I can still ssh in to both mon & app from the Admin workstation.\r\n* Searching issues I came across #1078\r\n\r\nFrom the OSSEC logs around the time it became unreachable:\r\n\r\n```bash\r\nRule: 100012 fired (level 7) -> \"Apparmor denied event\"\r\nPortion of the log(s):\r\n\r\nAug 14 XX:00:XX app kernel: [   36.599669] audit: type=1400 audit(XXX): apparmor=\"DENIED\" operation=\"capable\" pid=XXXX comm=\"apache2\" capability=1  capname=\"dac_override\"\r\n\r\n\r\nRule: 1002 fired (level 2) -> \"Unknown problem somewhere in the system.\"\r\nPortion of the log(s):\r\n\r\nAug 14 XX:01:XX app Tor[XXXX]: Onion service connection to [scrubbed] failed (connection refused)\r\n```", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2105/reactions", "total_count": 4, "+1": 3, "-1": 1, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2105/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2070", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2070/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2070/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2070/events", "html_url": "https://github.com/freedomofpress/securedrop/issues/2070", "id": 247866215, "node_id": "MDU6SXNzdWUyNDc4NjYyMTU=", "number": 2070, "title": "Source Interface throwing a 500 in staging on develop", "user": {"login": "conorsch", "id": 657862, "node_id": "MDQ6VXNlcjY1Nzg2Mg==", "avatar_url": "https://avatars.githubusercontent.com/u/657862?v=4", "gravatar_id": "", "url": "https://api.github.com/users/conorsch", "html_url": "https://github.com/conorsch", "followers_url": "https://api.github.com/users/conorsch/followers", "following_url": "https://api.github.com/users/conorsch/following{/other_user}", "gists_url": "https://api.github.com/users/conorsch/gists{/gist_id}", "starred_url": "https://api.github.com/users/conorsch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/conorsch/subscriptions", "organizations_url": "https://api.github.com/users/conorsch/orgs", "repos_url": "https://api.github.com/users/conorsch/repos", "events_url": "https://api.github.com/users/conorsch/events{/privacy}", "received_events_url": "https://api.github.com/users/conorsch/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}, {"id": 625966031, "node_id": "MDU6TGFiZWw2MjU5NjYwMzE=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/able%20to%20reproduce", "name": "able to reproduce", "color": "fbca04", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2017-08-03T23:48:03Z", "updated_at": "2017-08-04T01:07:09Z", "closed_at": "2017-08-04T01:07:09Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "# Bug\r\n\r\n## Description\r\n\r\nThe Source Interface is failing due to an AppArmor violation for apache:\r\n\r\n>Aug  3 23:20:20 app-staging kernel: [  656.377951] audit: type=1400 audit(1501802420.976:32): apparmor=\"DENIED\" operation=\"open\" profile=\"/usr/sbin/apache2\" name=\"/etc/timezone\" pid=10855 comm=\"apache2\" requested_mask=\"r\" denied_mask=\"r\" fsuid=33 ouid=0\r\n\r\n## Steps to Reproduce\r\n\r\n1. Check out `develop` branch.\r\n2. Bring up staging VMs.\r\n3. Try to load the Source Interface (you'll see a 500).\r\n4. Check syslog and you'll see an error similar to the above.\r\n\r\n## Expected Behavior\r\n\r\nSource Interface renders well because apache is happy and able to do its work.\r\n\r\n## Actual Behavior\r\n\r\nSource Interface fails because apache is confined by the restrictive AppArmor profile and falls down before it can serve anything.\r\n\r\n## Comments\r\n\r\nThe regression likely slipped in due to lack of proper CI on PRs coming from forks (#1826). Thankfully the the functional test introduced in #1731 caught the error, when none of the app test suite did.", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2070/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2070/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2069", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2069/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2069/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2069/events", "html_url": "https://github.com/freedomofpress/securedrop/issues/2069", "id": 247849082, "node_id": "MDU6SXNzdWUyNDc4NDkwODI=", "number": 2069, "title": "Tails 3 root nautilus backups", "user": {"login": "KwadroNaut", "id": 99527, "node_id": "MDQ6VXNlcjk5NTI3", "avatar_url": "https://avatars.githubusercontent.com/u/99527?v=4", "gravatar_id": "", "url": "https://api.github.com/users/KwadroNaut", "html_url": "https://github.com/KwadroNaut", "followers_url": "https://api.github.com/users/KwadroNaut/followers", "following_url": "https://api.github.com/users/KwadroNaut/following{/other_user}", "gists_url": "https://api.github.com/users/KwadroNaut/gists{/gist_id}", "starred_url": "https://api.github.com/users/KwadroNaut/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/KwadroNaut/subscriptions", "organizations_url": "https://api.github.com/users/KwadroNaut/orgs", "repos_url": "https://api.github.com/users/KwadroNaut/repos", "events_url": "https://api.github.com/users/KwadroNaut/events{/privacy}", "received_events_url": "https://api.github.com/users/KwadroNaut/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}, {"id": 671921004, "node_id": "MDU6TGFiZWw2NzE5MjEwMDQ=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/help%20wanted", "name": "help wanted", "color": "5319e7", "default": true, "description": "Issues we would definitely appreciate volunteer help with"}], "state": "closed", "locked": false, "assignee": {"login": "infiniteswitchcases", "id": 8506155, "node_id": "MDQ6VXNlcjg1MDYxNTU=", "avatar_url": "https://avatars.githubusercontent.com/u/8506155?v=4", "gravatar_id": "", "url": "https://api.github.com/users/infiniteswitchcases", "html_url": "https://github.com/infiniteswitchcases", "followers_url": "https://api.github.com/users/infiniteswitchcases/followers", "following_url": "https://api.github.com/users/infiniteswitchcases/following{/other_user}", "gists_url": "https://api.github.com/users/infiniteswitchcases/gists{/gist_id}", "starred_url": "https://api.github.com/users/infiniteswitchcases/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/infiniteswitchcases/subscriptions", "organizations_url": "https://api.github.com/users/infiniteswitchcases/orgs", "repos_url": "https://api.github.com/users/infiniteswitchcases/repos", "events_url": "https://api.github.com/users/infiniteswitchcases/events{/privacy}", "received_events_url": "https://api.github.com/users/infiniteswitchcases/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "infiniteswitchcases", "id": 8506155, "node_id": "MDQ6VXNlcjg1MDYxNTU=", "avatar_url": "https://avatars.githubusercontent.com/u/8506155?v=4", "gravatar_id": "", "url": "https://api.github.com/users/infiniteswitchcases", "html_url": "https://github.com/infiniteswitchcases", "followers_url": "https://api.github.com/users/infiniteswitchcases/followers", "following_url": "https://api.github.com/users/infiniteswitchcases/following{/other_user}", "gists_url": "https://api.github.com/users/infiniteswitchcases/gists{/gist_id}", "starred_url": "https://api.github.com/users/infiniteswitchcases/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/infiniteswitchcases/subscriptions", "organizations_url": "https://api.github.com/users/infiniteswitchcases/orgs", "repos_url": "https://api.github.com/users/infiniteswitchcases/repos", "events_url": "https://api.github.com/users/infiniteswitchcases/events{/privacy}", "received_events_url": "https://api.github.com/users/infiniteswitchcases/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 2, "created_at": "2017-08-03T22:06:12Z", "updated_at": "2017-08-22T23:56:09Z", "closed_at": "2017-08-22T23:56:09Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "# Bug\r\n\r\n## Can't start nautilus from root terminal\r\n\r\nSince Tails 3, you'll have to do something like `gksu nautilus` to launch a root nautilus. You'll get a `GTK-Warning cannot open display: :1` **if you have run a root file manager before in the same session**\r\n\r\n\r\n## Steps to Reproduce\r\n\r\nDescribed here:\r\nhttps://docs.securedrop.org/en/latest/upgrade_to_tails_3x.html#upgrade-the-tails-drives\r\nhttps://docs.securedrop.org/en/latest/backup_workstations.html\r\n\r\n## Actual Behavior\r\n\r\n![nope-0](https://user-images.githubusercontent.com/99527/28945880-9a09f5f2-78a8-11e7-8129-364518da7d0f.png)\r\n\r\n## Comments\r\n\r\ngksu nautilus from a regular terminal would work. When reproducing this bug, I found that it only happens when having run a root nautilus in the same sesion before.\r\n", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2069/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2069/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2043", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2043/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2043/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2043/events", "html_url": "https://github.com/freedomofpress/securedrop/issues/2043", "id": 245547554, "node_id": "MDU6SXNzdWUyNDU1NDc1NTQ=", "number": 2043, "title": "db.Source.journalist_designation is not a unique field", "user": {"login": "psivesely", "id": 3538418, "node_id": "MDQ6VXNlcjM1Mzg0MTg=", "avatar_url": "https://avatars.githubusercontent.com/u/3538418?v=4", "gravatar_id": "", "url": "https://api.github.com/users/psivesely", "html_url": "https://github.com/psivesely", "followers_url": "https://api.github.com/users/psivesely/followers", "following_url": "https://api.github.com/users/psivesely/following{/other_user}", "gists_url": "https://api.github.com/users/psivesely/gists{/gist_id}", "starred_url": "https://api.github.com/users/psivesely/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/psivesely/subscriptions", "organizations_url": "https://api.github.com/users/psivesely/orgs", "repos_url": "https://api.github.com/users/psivesely/repos", "events_url": "https://api.github.com/users/psivesely/events{/privacy}", "received_events_url": "https://api.github.com/users/psivesely/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2017-07-25T21:56:53Z", "updated_at": "2020-09-03T16:02:45Z", "closed_at": "2020-09-03T16:02:45Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "# Bug\r\n\r\n## Description\r\n\r\n`db.Source.journalist_designation` provides a 2-word designation which is used in the JI by journalists as the primary mechanism to identify and distinguish between sources (whose real identity and codename remain secret). Since the uniqueness of the field is not being enforced, it's possible that two Sources might end up with the same journalist designation, causing confusion.\r\n\r\n## Comments\r\n\r\nThe fix is pretty straightforward. We should set the column/ attribute with `unique=True` and changes to this attribute/ field should be done with something like this pseudo-Python:\r\n```py\r\nwhile True:\r\n    try:\r\n        journo.journalist_designation = gen_display_id()\r\n        db_session.add(journo)\r\n        db_session.commit()\r\n    except UniquenessConstraintException:\r\n        pass\r\n    else:\r\n       break\r\n````", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2043/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2043/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2024", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2024/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2024/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2024/events", "html_url": "https://github.com/freedomofpress/securedrop/issues/2024", "id": 244809010, "node_id": "MDU6SXNzdWUyNDQ4MDkwMTA=", "number": 2024, "title": "Missing AppArmor rule on fontawesome-webfont.woff2", "user": {"login": "redshiftzero", "id": 7832803, "node_id": "MDQ6VXNlcjc4MzI4MDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7832803?v=4", "gravatar_id": "", "url": "https://api.github.com/users/redshiftzero", "html_url": "https://github.com/redshiftzero", "followers_url": "https://api.github.com/users/redshiftzero/followers", "following_url": "https://api.github.com/users/redshiftzero/following{/other_user}", "gists_url": "https://api.github.com/users/redshiftzero/gists{/gist_id}", "starred_url": "https://api.github.com/users/redshiftzero/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/redshiftzero/subscriptions", "organizations_url": "https://api.github.com/users/redshiftzero/orgs", "repos_url": "https://api.github.com/users/redshiftzero/repos", "events_url": "https://api.github.com/users/redshiftzero/events{/privacy}", "received_events_url": "https://api.github.com/users/redshiftzero/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}, {"id": 385585080, "node_id": "MDU6TGFiZWwzODU1ODUwODA=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/QA:%20Release", "name": "QA: Release", "color": "fbca04", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "redshiftzero", "id": 7832803, "node_id": "MDQ6VXNlcjc4MzI4MDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7832803?v=4", "gravatar_id": "", "url": "https://api.github.com/users/redshiftzero", "html_url": "https://github.com/redshiftzero", "followers_url": "https://api.github.com/users/redshiftzero/followers", "following_url": "https://api.github.com/users/redshiftzero/following{/other_user}", "gists_url": "https://api.github.com/users/redshiftzero/gists{/gist_id}", "starred_url": "https://api.github.com/users/redshiftzero/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/redshiftzero/subscriptions", "organizations_url": "https://api.github.com/users/redshiftzero/orgs", "repos_url": "https://api.github.com/users/redshiftzero/repos", "events_url": "https://api.github.com/users/redshiftzero/events{/privacy}", "received_events_url": "https://api.github.com/users/redshiftzero/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "redshiftzero", "id": 7832803, "node_id": "MDQ6VXNlcjc4MzI4MDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7832803?v=4", "gravatar_id": "", "url": "https://api.github.com/users/redshiftzero", "html_url": "https://github.com/redshiftzero", "followers_url": "https://api.github.com/users/redshiftzero/followers", "following_url": "https://api.github.com/users/redshiftzero/following{/other_user}", "gists_url": "https://api.github.com/users/redshiftzero/gists{/gist_id}", "starred_url": "https://api.github.com/users/redshiftzero/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/redshiftzero/subscriptions", "organizations_url": "https://api.github.com/users/redshiftzero/orgs", "repos_url": "https://api.github.com/users/redshiftzero/repos", "events_url": "https://api.github.com/users/redshiftzero/events{/privacy}", "received_events_url": "https://api.github.com/users/redshiftzero/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/freedomofpress/securedrop/milestones/5", "html_url": "https://github.com/freedomofpress/securedrop/milestone/5", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/milestones/5/labels", "id": 691723, "node_id": "MDk6TWlsZXN0b25lNjkxNzIz", "number": 5, "title": "0.4", "description": "Resolve develop-master diff and smooth out release workflow", "creator": {"login": "garrettr", "id": 407302, "node_id": "MDQ6VXNlcjQwNzMwMg==", "avatar_url": "https://avatars.githubusercontent.com/u/407302?v=4", "gravatar_id": "", "url": "https://api.github.com/users/garrettr", "html_url": "https://github.com/garrettr", "followers_url": "https://api.github.com/users/garrettr/followers", "following_url": "https://api.github.com/users/garrettr/following{/other_user}", "gists_url": "https://api.github.com/users/garrettr/gists{/gist_id}", "starred_url": "https://api.github.com/users/garrettr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/garrettr/subscriptions", "organizations_url": "https://api.github.com/users/garrettr/orgs", "repos_url": "https://api.github.com/users/garrettr/repos", "events_url": "https://api.github.com/users/garrettr/events{/privacy}", "received_events_url": "https://api.github.com/users/garrettr/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 126, "state": "closed", "created_at": "2014-06-15T22:57:42Z", "updated_at": "2020-10-09T18:38:48Z", "due_on": "2017-07-11T07:00:00Z", "closed_at": "2017-07-31T22:15:38Z"}, "comments": 3, "created_at": "2017-07-22T00:01:28Z", "updated_at": "2017-07-22T02:33:31Z", "closed_at": "2017-07-22T02:33:30Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "## Description\r\n\r\nThere is a missing AppArmor rule on one of the web fonts we are using on the journalist interface. \r\n\r\n## Steps to Reproduce\r\n\r\n1. Install SecureDrop 0.4\r\n2. Visit journalist interface\r\n3. Watch `/var/log/apache2/journalist-error.log` (and/or watch your emails for the OSSEC alarms)\r\n\r\n## Expected Behavior\r\n\r\nNo unusual alerts occur or lines appear in the logs. \r\n\r\n## Actual Behavior\r\n\r\nAdmins will get errors due to a missing AppArmor rule for `/var/www/securedrop/static/fonts/fontawesome-webfont.woff2` in their logs as well as the following OSSEC alert:\r\n\r\n```\r\nOSSEC HIDS Notification.\r\n2017 Jul 21 14:07:59\r\n\r\nReceived From: (app) 10.20.2.2->/var/log/syslog\r\nRule: 100012 fired (level 7) -> \"Apparmor denied event\"\r\nPortion of the log(s):\r\n\r\nJul 21 14:07:57 app kernel: [ 9892.514406] audit: type=1400 audit(1500671277.745:21): apparmor=\"DENIED\" operation=\"open\" profile=\"/usr/sbin/apache2\" name=\"/var/www/securedrop/static/fonts/fontawesome-webfont.woff2\" pid=1319 comm=\"apache2\" requested_mask=\"r\" denied_mask=\"r\" fsuid=33 ouid=33\r\n\r\n --END OF NOTIFICATION\r\n\r\nOSSEC HIDS Notification.\r\n2017 Jul 21 14:07:59\r\n\r\nReceived From: (app) 10.20.2.2->/var/log/apache2/journalist-error.log\r\nRule: 1002 fired (level 2) -> \"Unknown problem somewhere in the system.\"\r\nPortion of the log(s):\r\n\r\n[Fri Jul 21 14:07:57.748498 2017] [core:error] [pid 1317:tid 2984486479616] (13)Permission denied: [client 127.0.0.1:53268] AH00132: file permissions deny server access: /var/www/securedrop/static/fonts/fontawesome-webfont.woff2, referer: http://[redacted].onion/static/css/journalist.css\r\n```\r\n\r\n## Comments\r\n\r\nIt looks like this font was left out of the AppArmor rules. ", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2024/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2024/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2019", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2019/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2019/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2019/events", "html_url": "https://github.com/freedomofpress/securedrop/issues/2019", "id": 244780055, "node_id": "MDU6SXNzdWUyNDQ3ODAwNTU=", "number": 2019, "title": "Failure using Backup Ansible role", "user": {"login": "redshiftzero", "id": 7832803, "node_id": "MDQ6VXNlcjc4MzI4MDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7832803?v=4", "gravatar_id": "", "url": "https://api.github.com/users/redshiftzero", "html_url": "https://github.com/redshiftzero", "followers_url": "https://api.github.com/users/redshiftzero/followers", "following_url": "https://api.github.com/users/redshiftzero/following{/other_user}", "gists_url": "https://api.github.com/users/redshiftzero/gists{/gist_id}", "starred_url": "https://api.github.com/users/redshiftzero/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/redshiftzero/subscriptions", "organizations_url": "https://api.github.com/users/redshiftzero/orgs", "repos_url": "https://api.github.com/users/redshiftzero/repos", "events_url": "https://api.github.com/users/redshiftzero/events{/privacy}", "received_events_url": "https://api.github.com/users/redshiftzero/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}, {"id": 385585080, "node_id": "MDU6TGFiZWwzODU1ODUwODA=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/QA:%20Release", "name": "QA: Release", "color": "fbca04", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/freedomofpress/securedrop/milestones/5", "html_url": "https://github.com/freedomofpress/securedrop/milestone/5", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/milestones/5/labels", "id": 691723, "node_id": "MDk6TWlsZXN0b25lNjkxNzIz", "number": 5, "title": "0.4", "description": "Resolve develop-master diff and smooth out release workflow", "creator": {"login": "garrettr", "id": 407302, "node_id": "MDQ6VXNlcjQwNzMwMg==", "avatar_url": "https://avatars.githubusercontent.com/u/407302?v=4", "gravatar_id": "", "url": "https://api.github.com/users/garrettr", "html_url": "https://github.com/garrettr", "followers_url": "https://api.github.com/users/garrettr/followers", "following_url": "https://api.github.com/users/garrettr/following{/other_user}", "gists_url": "https://api.github.com/users/garrettr/gists{/gist_id}", "starred_url": "https://api.github.com/users/garrettr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/garrettr/subscriptions", "organizations_url": "https://api.github.com/users/garrettr/orgs", "repos_url": "https://api.github.com/users/garrettr/repos", "events_url": "https://api.github.com/users/garrettr/events{/privacy}", "received_events_url": "https://api.github.com/users/garrettr/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 126, "state": "closed", "created_at": "2014-06-15T22:57:42Z", "updated_at": "2020-10-09T18:38:48Z", "due_on": "2017-07-11T07:00:00Z", "closed_at": "2017-07-31T22:15:38Z"}, "comments": 5, "created_at": "2017-07-21T20:49:41Z", "updated_at": "2017-07-22T01:44:31Z", "closed_at": "2017-07-22T01:44:31Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "## Description\r\n\r\nBackups fail using \"Backup and restore\" on 0.4\r\n\r\n## Steps to Reproduce\r\n\r\n1. Install 0.4 from test debs and upgrade admin workstation\r\n2. `source .venv/bin/activate`\r\n3. `cd install_files/ansible-base`\r\n4. `ansible-playbook -t backup securedrop-prod.yml -e perform_backup=true`\r\n\r\n## Expected Behavior\r\n\r\nThe backup completes successfully and a backup file `sd-backup*` should appear in the current working directory \r\n\r\n## Actual Behavior\r\n\r\nBackup fails:\r\n\r\n```\r\nTASK [backup : fetch the backup file] ******************************************\r\nfatal: [app]: FAILED! => {\"failed\": true, \"msg\": \"the field 'args' has an invalid value, which appears to include a variable that is undefined. The error was: 'dict object' has no attribute 'stdout'\\n\\nThe error appears to have been in '/home/amnesia/Persistent/securedrop/install_files/ansible-base/roles/backup/tasks/backup.yml': line 17, column 3, but may\\nbe elsewhere in the file depending on the exact syntax problem.\\n\\nThe offending line appears to be:\\n\\n\\n- name: fetch the backup file\\n  ^ here\\n\"}\r\n\tto retry, use: --limit @/home/amnesia/Persistent/securedrop/install_files/ansible-base/securedrop-prod.retry\r\n```", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2019/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2019/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2017", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2017/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2017/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2017/events", "html_url": "https://github.com/freedomofpress/securedrop/issues/2017", "id": 244770074, "node_id": "MDU6SXNzdWUyNDQ3NzAwNzQ=", "number": 2017, "title": "Tails 3 config setup scripts do not enforce ownership", "user": {"login": "conorsch", "id": 657862, "node_id": "MDQ6VXNlcjY1Nzg2Mg==", "avatar_url": "https://avatars.githubusercontent.com/u/657862?v=4", "gravatar_id": "", "url": "https://api.github.com/users/conorsch", "html_url": "https://github.com/conorsch", "followers_url": "https://api.github.com/users/conorsch/followers", "following_url": "https://api.github.com/users/conorsch/following{/other_user}", "gists_url": "https://api.github.com/users/conorsch/gists{/gist_id}", "starred_url": "https://api.github.com/users/conorsch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/conorsch/subscriptions", "organizations_url": "https://api.github.com/users/conorsch/orgs", "repos_url": "https://api.github.com/users/conorsch/repos", "events_url": "https://api.github.com/users/conorsch/events{/privacy}", "received_events_url": "https://api.github.com/users/conorsch/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}, {"id": 385585080, "node_id": "MDU6TGFiZWwzODU1ODUwODA=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/QA:%20Release", "name": "QA: Release", "color": "fbca04", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "conorsch", "id": 657862, "node_id": "MDQ6VXNlcjY1Nzg2Mg==", "avatar_url": "https://avatars.githubusercontent.com/u/657862?v=4", "gravatar_id": "", "url": "https://api.github.com/users/conorsch", "html_url": "https://github.com/conorsch", "followers_url": "https://api.github.com/users/conorsch/followers", "following_url": "https://api.github.com/users/conorsch/following{/other_user}", "gists_url": "https://api.github.com/users/conorsch/gists{/gist_id}", "starred_url": "https://api.github.com/users/conorsch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/conorsch/subscriptions", "organizations_url": "https://api.github.com/users/conorsch/orgs", "repos_url": "https://api.github.com/users/conorsch/repos", "events_url": "https://api.github.com/users/conorsch/events{/privacy}", "received_events_url": "https://api.github.com/users/conorsch/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "conorsch", "id": 657862, "node_id": "MDQ6VXNlcjY1Nzg2Mg==", "avatar_url": "https://avatars.githubusercontent.com/u/657862?v=4", "gravatar_id": "", "url": "https://api.github.com/users/conorsch", "html_url": "https://github.com/conorsch", "followers_url": "https://api.github.com/users/conorsch/followers", "following_url": "https://api.github.com/users/conorsch/following{/other_user}", "gists_url": "https://api.github.com/users/conorsch/gists{/gist_id}", "starred_url": "https://api.github.com/users/conorsch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/conorsch/subscriptions", "organizations_url": "https://api.github.com/users/conorsch/orgs", "repos_url": "https://api.github.com/users/conorsch/repos", "events_url": "https://api.github.com/users/conorsch/events{/privacy}", "received_events_url": "https://api.github.com/users/conorsch/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/freedomofpress/securedrop/milestones/5", "html_url": "https://github.com/freedomofpress/securedrop/milestone/5", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/milestones/5/labels", "id": 691723, "node_id": "MDk6TWlsZXN0b25lNjkxNzIz", "number": 5, "title": "0.4", "description": "Resolve develop-master diff and smooth out release workflow", "creator": {"login": "garrettr", "id": 407302, "node_id": "MDQ6VXNlcjQwNzMwMg==", "avatar_url": "https://avatars.githubusercontent.com/u/407302?v=4", "gravatar_id": "", "url": "https://api.github.com/users/garrettr", "html_url": "https://github.com/garrettr", "followers_url": "https://api.github.com/users/garrettr/followers", "following_url": "https://api.github.com/users/garrettr/following{/other_user}", "gists_url": "https://api.github.com/users/garrettr/gists{/gist_id}", "starred_url": "https://api.github.com/users/garrettr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/garrettr/subscriptions", "organizations_url": "https://api.github.com/users/garrettr/orgs", "repos_url": "https://api.github.com/users/garrettr/repos", "events_url": "https://api.github.com/users/garrettr/events{/privacy}", "received_events_url": "https://api.github.com/users/garrettr/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 126, "state": "closed", "created_at": "2014-06-15T22:57:42Z", "updated_at": "2020-10-09T18:38:48Z", "due_on": "2017-07-11T07:00:00Z", "closed_at": "2017-07-31T22:15:38Z"}, "comments": 1, "created_at": "2017-07-21T20:05:46Z", "updated_at": "2017-07-22T00:32:25Z", "closed_at": "2017-07-22T00:32:25Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "# Bug\r\n\r\n## Description\r\n\r\nWhen upgrading from Tails 2 to Tails 3 on the Admin Workstation, the `./securedrop-admin tailsconfig` task does not explicitly set ownership on the SecureDrop dotfiles directly at `/home/amnesia/Persistent/.securedrop`, which causes the task to fail.\r\n\r\n## Steps to Reproduce\r\n\r\n1. Use the Tails 2 -> 3 Upgrade guide to upgrade an Admin Workstation.\r\n2. Follow the SecureDrop 0.3.x -> 0.4 Upgrade guide to re-establish the config on the Admin Workstation.\r\n3. Observe failure in the `./securedrop-admin tailsconfig` task.\r\n\r\n## Expected Behavior\r\nThe `tailsconfig` task enforces proper permissions on directories it needs to write to. \r\n\r\n## Actual Behavior\r\n\r\nThe `tailsconfig` task fails loudly when it tries to write to the root-owned directory `/home/amnesia/Persistent/.securedrop`. \r\n\r\n## Comments\r\n\r\nThe SecureDrop dotfiles directory will be root owned on upgraded devices because up to 0.3.12, we required Admins to run `sudo ./install.sh` to configure the Tails environment. Since the switch to Ansible for configuring the Tails workstation (#1803), we have much more control over file metadata such as ownership, and we should set the required ownership.\r\n\r\nExplicit documentation of the failure can be found in this terminal session: https://gist.github.com/conorsch/e2348edeb32feb94d4905fa9009d36fb", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2017/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2017/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2013", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2013/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2013/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2013/events", "html_url": "https://github.com/freedomofpress/securedrop/issues/2013", "id": 244560119, "node_id": "MDU6SXNzdWUyNDQ1NjAxMTk=", "number": 2013, "title": "Sudo password on app/mon can't have spaces", "user": {"login": "redshiftzero", "id": 7832803, "node_id": "MDQ6VXNlcjc4MzI4MDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7832803?v=4", "gravatar_id": "", "url": "https://api.github.com/users/redshiftzero", "html_url": "https://github.com/redshiftzero", "followers_url": "https://api.github.com/users/redshiftzero/followers", "following_url": "https://api.github.com/users/redshiftzero/following{/other_user}", "gists_url": "https://api.github.com/users/redshiftzero/gists{/gist_id}", "starred_url": "https://api.github.com/users/redshiftzero/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/redshiftzero/subscriptions", "organizations_url": "https://api.github.com/users/redshiftzero/orgs", "repos_url": "https://api.github.com/users/redshiftzero/repos", "events_url": "https://api.github.com/users/redshiftzero/events{/privacy}", "received_events_url": "https://api.github.com/users/redshiftzero/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}, {"id": 385585080, "node_id": "MDU6TGFiZWwzODU1ODUwODA=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/QA:%20Release", "name": "QA: Release", "color": "fbca04", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/freedomofpress/securedrop/milestones/5", "html_url": "https://github.com/freedomofpress/securedrop/milestone/5", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/milestones/5/labels", "id": 691723, "node_id": "MDk6TWlsZXN0b25lNjkxNzIz", "number": 5, "title": "0.4", "description": "Resolve develop-master diff and smooth out release workflow", "creator": {"login": "garrettr", "id": 407302, "node_id": "MDQ6VXNlcjQwNzMwMg==", "avatar_url": "https://avatars.githubusercontent.com/u/407302?v=4", "gravatar_id": "", "url": "https://api.github.com/users/garrettr", "html_url": "https://github.com/garrettr", "followers_url": "https://api.github.com/users/garrettr/followers", "following_url": "https://api.github.com/users/garrettr/following{/other_user}", "gists_url": "https://api.github.com/users/garrettr/gists{/gist_id}", "starred_url": "https://api.github.com/users/garrettr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/garrettr/subscriptions", "organizations_url": "https://api.github.com/users/garrettr/orgs", "repos_url": "https://api.github.com/users/garrettr/repos", "events_url": "https://api.github.com/users/garrettr/events{/privacy}", "received_events_url": "https://api.github.com/users/garrettr/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 126, "state": "closed", "created_at": "2014-06-15T22:57:42Z", "updated_at": "2020-10-09T18:38:48Z", "due_on": "2017-07-11T07:00:00Z", "closed_at": "2017-07-31T22:15:38Z"}, "comments": 3, "created_at": "2017-07-21T04:16:55Z", "updated_at": "2017-07-21T19:09:04Z", "closed_at": "2017-07-21T19:09:03Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "## Description\r\n\r\nWhen installing SecureDrop, if you set up the user on app and mon to require a sudo password with spaces, an authentication error occurs due to early termination of the password string\r\n\r\n## Steps to Reproduce\r\n\r\n1. `./securedrop-admin sdconfig`\r\n2. You have a sudo password on app and mon with spaces, e.g. `word1 word2`\r\n3. Run `./securedrop-admin install`\r\n\r\n## Expected Behavior\r\n\r\nInstall completes without problems.\r\n\r\n## Actual Behavior\r\n\r\nInstall fails with an error as follows:\r\n\r\n```\r\nTASK [setup] *******************************************************************\r\nfatal: [mon]: FAILED! => {\"failed\": true, \"msg\": \"Incorrect sudo password\"}\r\nfatal: [app]: FAILED! => {\"failed\": true, \"msg\": \"Incorrect sudo password\"}\r\n\tto retry, use: --limit @/home/amnesia/Persistent/securedrop/install_files/ansible-base/securedrop-prod.retry\r\n\r\n[...snip!...]\r\n\r\nTraceback (most recent call last):\r\n  File \"./securedrop-admin\", line 262, in <module>\r\n    args.func(args)\r\n  File \"./securedrop-admin\", line 216, in install_securedrop\r\n    cwd=ANSIBLE_PATH)\r\n  File \"/usr/lib/python2.7/subprocess.py\", line 186, in check_call\r\n    raise CalledProcessError(retcode, cmd)\r\nsubprocess.CalledProcessError: Command '['/home/amnesia/Persistent/securedrop/./install_files/ansible-base/securedrop-prod.yml', '-e ansible_become_pass=word1 word2']' returned non-zero exit status 2\r\n```\r\n\r\n## Comments\r\n\r\nSimple fix: add quotes around the password when constructing the arguments for `subprocess.check_call` in `install_securedrop`\r\n", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2013/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/2013/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/1976", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/1976/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/1976/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/1976/events", "html_url": "https://github.com/freedomofpress/securedrop/issues/1976", "id": 242816014, "node_id": "MDU6SXNzdWUyNDI4MTYwMTQ=", "number": 1976, "title": "Duplicate ATHS file content will crash Tor service on Tails", "user": {"login": "msheiny", "id": 1727935, "node_id": "MDQ6VXNlcjE3Mjc5MzU=", "avatar_url": "https://avatars.githubusercontent.com/u/1727935?v=4", "gravatar_id": "", "url": "https://api.github.com/users/msheiny", "html_url": "https://github.com/msheiny", "followers_url": "https://api.github.com/users/msheiny/followers", "following_url": "https://api.github.com/users/msheiny/following{/other_user}", "gists_url": "https://api.github.com/users/msheiny/gists{/gist_id}", "starred_url": "https://api.github.com/users/msheiny/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/msheiny/subscriptions", "organizations_url": "https://api.github.com/users/msheiny/orgs", "repos_url": "https://api.github.com/users/msheiny/repos", "events_url": "https://api.github.com/users/msheiny/events{/privacy}", "received_events_url": "https://api.github.com/users/msheiny/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}, {"id": 385585080, "node_id": "MDU6TGFiZWwzODU1ODUwODA=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/QA:%20Release", "name": "QA: Release", "color": "fbca04", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/freedomofpress/securedrop/milestones/5", "html_url": "https://github.com/freedomofpress/securedrop/milestone/5", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/milestones/5/labels", "id": 691723, "node_id": "MDk6TWlsZXN0b25lNjkxNzIz", "number": 5, "title": "0.4", "description": "Resolve develop-master diff and smooth out release workflow", "creator": {"login": "garrettr", "id": 407302, "node_id": "MDQ6VXNlcjQwNzMwMg==", "avatar_url": "https://avatars.githubusercontent.com/u/407302?v=4", "gravatar_id": "", "url": "https://api.github.com/users/garrettr", "html_url": "https://github.com/garrettr", "followers_url": "https://api.github.com/users/garrettr/followers", "following_url": "https://api.github.com/users/garrettr/following{/other_user}", "gists_url": "https://api.github.com/users/garrettr/gists{/gist_id}", "starred_url": "https://api.github.com/users/garrettr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/garrettr/subscriptions", "organizations_url": "https://api.github.com/users/garrettr/orgs", "repos_url": "https://api.github.com/users/garrettr/repos", "events_url": "https://api.github.com/users/garrettr/events{/privacy}", "received_events_url": "https://api.github.com/users/garrettr/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 126, "state": "closed", "created_at": "2014-06-15T22:57:42Z", "updated_at": "2020-10-09T18:38:48Z", "due_on": "2017-07-11T07:00:00Z", "closed_at": "2017-07-31T22:15:38Z"}, "comments": 2, "created_at": "2017-07-13T20:09:58Z", "updated_at": "2017-07-20T23:14:03Z", "closed_at": "2017-07-20T23:14:03Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "# Bug\r\n\r\n## Description\r\n\r\nThis is kind of a convoluted issue - if an admin coming from a pre 0.4 release -- carries over their persistent storage from tails, updates the repo to the latest release, then tries to re-run the `securedrop-admin install` they could end up a scenario with two aths files with the same content. When the `tailsconfig` gets re-run the duplicate `HidServAuth`  lines get copied into /etc/tor/torrc and this causes the tor service to die upon restart.\r\n\r\n## Steps to Reproduce\r\n\r\n* Have an existing securedrop 0.3.12 installation and tails stick\r\n* Upgrade that tails stick to 3.0.1 and checkout the `release/0.4` branch in ~/Persistent/securedrop. There should still be an existing file for the old journalist interface naming convention (ie `app-document-aths` )\r\n* Run through ./securedrop-admin, `setup`, `sdconfig`, `install`, `tailsconfig`\r\n* Restart the tails stick. Tor should be inaccessible once our network hook (~/Persistent/.securedrop/securedrop_init.py) is called.\r\n\r\n## Expected Behavior\r\n\r\nThere should be no errors when running through this process and tor should continue to work as expected on the tails admin workstation.\r\n\r\n## Actual Behavior\r\n\r\nTor will crash with the following entries in the error logs:\r\n\r\n```\r\nJul 13 14:35:51 amnesia systemd[1]: Starting Anonymizing overlay network for TCP...\r\nJul 13 14:35:51 amnesia tor[13039]: Jul 13 14:35:51.355 [notice] Tor 0.3.0.9 (git-100816d92ab5664d) running on Linux with Libevent 2.0.21-stable, OpenSSL 1.1.0f and Zlib 1.2.8.\r\nJul 13 14:35:51 amnesia tor[13039]: Jul 13 14:35:51.355 [notice] Tor can't help you if you use it wrong! Learn how to be safe at https://www.torproject.org/download/download#warning\r\nJul 13 14:35:51 amnesia tor[13039]: Jul 13 14:35:51.355 [notice] Read configuration file \"/usr/share/tor/tor-service-defaults-torrc\".\r\nJul 13 14:35:51 amnesia tor[13039]: Jul 13 14:35:51.356 [notice] Read configuration file \"/etc/tor/torrc\".\r\nJul 13 14:35:51 amnesia tor[13039]: Jul 13 14:35:51.358 [warn] The ControlListenAddress option is deprecated, and will most likely be removed in a future version of Tor. Use ControlPort instead.\r\nJul 13 14:35:51 amnesia tor[13039]: Jul 13 14:35:51.358 [warn] The TransListenAddress option is deprecated, and will most likely be removed in a future version of Tor. Use TransPort instead. (If\r\nJul 13 14:35:51 amnesia tor[13039]: Jul 13 14:35:51.358 [warn] The WarnUnsafeSocks option is deprecated, and will most likely be removed in a future version of Tor. Changing this option makes it\r\nJul 13 14:35:51 amnesia tor[13039]: Jul 13 14:35:51.358 [warn] Duplicate authorization for the same hidden service.\r\nJul 13 14:35:51 amnesia tor[13039]: Jul 13 14:35:51.359 [warn] Failed to parse/validate config: Failed to configure client authorization for hidden services. See logs for details.\r\nJul 13 14:35:51 amnesia tor[13039]: Jul 13 14:35:51.359 [err] Reading config failed--see warnings above.\r\nJul 13 14:35:51 amnesia systemd[1]: tor@default.service: Control process exited, code=exited status=1\r\nJul 13 14:35:51 amnesia systemd[1]: Failed to start Anonymizing overlay network for TCP.\r\n```\r\n\r\n## Comments\r\n\r\nNote there are multiple warnings, including some deprecation warnings for other log items we didnt add. I have confirmed that once I removed a duplicate `HidServAuth` line and restarted `tor@default.service` - tor is coming up again.\r\n\r\nSuggestion to fix is to tweak `install_files/ansible-base/roles/tails-config/tasks/configure_torrc_additions.yml` so that either:\r\n\r\n* We use something like `lineinfile` and lookups to ensure duplicate entries dont get dumped into the torrc additions file. Orrrr\r\n* We more explicitly define the file names that are piped to the `assemble` module.\r\n\r\nSuggestions to fix, any other relevant information.", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/1976/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/1976/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/1971", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/1971/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/1971/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/1971/events", "html_url": "https://github.com/freedomofpress/securedrop/issues/1971", "id": 242575781, "node_id": "MDU6SXNzdWUyNDI1NzU3ODE=", "number": 1971, "title": "sass install failing in local development VM and CI", "user": {"login": "redshiftzero", "id": 7832803, "node_id": "MDQ6VXNlcjc4MzI4MDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7832803?v=4", "gravatar_id": "", "url": "https://api.github.com/users/redshiftzero", "html_url": "https://github.com/redshiftzero", "followers_url": "https://api.github.com/users/redshiftzero/followers", "following_url": "https://api.github.com/users/redshiftzero/following{/other_user}", "gists_url": "https://api.github.com/users/redshiftzero/gists{/gist_id}", "starred_url": "https://api.github.com/users/redshiftzero/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/redshiftzero/subscriptions", "organizations_url": "https://api.github.com/users/redshiftzero/orgs", "repos_url": "https://api.github.com/users/redshiftzero/repos", "events_url": "https://api.github.com/users/redshiftzero/events{/privacy}", "received_events_url": "https://api.github.com/users/redshiftzero/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2017-07-13T03:32:12Z", "updated_at": "2017-07-16T18:49:52Z", "closed_at": "2017-07-13T16:17:49Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "## Description\r\n\r\nA few hours prior to this issue being posted the provisioning of local development VMs and CI builds on `develop` and `release/0.4` started failing. Around the same time the failures began occurring, sass 3.5 was released.\r\n\r\n## Steps to Reproduce\r\n\r\n`vagrant up development`\r\n\r\n## Expected Behavior\r\n\r\nThe provisioning completes without failures.\r\n\r\n## Actual Behavior\r\n\r\nThe provisioning started failing at the \"Install sass Ruby gem\" task:\r\n\r\n```TASK [development : Install sass Ruby gem] *************************************\r\nfatal: [development]: FAILED! => {\"changed\": false, \"cmd\": \"/usr/bin/gem install --version 3.5.0 --include-dependencies --no-user-install --no-rdoc --no-ri sass\", \"failed\": true, \"msg\": \"ERROR:  Error installing sass:\\n\\tERROR: Failed to build gem native extension.\\n\\n        /usr/bin/ruby1.9.1 extconf.rb\\n/usr/lib/ruby/1.9.1/rubygems/custom_require.rb:36:in `require': cannot load such file -- mkmf (LoadError)\\n\\tfrom /usr/lib/ruby/1.9.1/rubygems/custom_require.rb:36:in `require'\\n\\tfrom extconf.rb:4:in `<main>'\\n\\n\\nGem files will remain installed in /var/lib/gems/1.9.1/gems/ffi-1.9.18 for inspection.\\nResults logged to /var/lib/gems/1.9.1/gems/ffi-1.9.18/ext/ffi_c/gem_make.out\", \"rc\": 1, \"stderr\": \"ERROR:  Error installing sass:\\n\\tERROR: Failed to build gem native extension.\\n\\n        /usr/bin/ruby1.9.1 extconf.rb\\n/usr/lib/ruby/1.9.1/rubygems/custom_require.rb:36:in `require': cannot load such file -- mkmf (LoadError)\\n\\tfrom /usr/lib/ruby/1.9.1/rubygems/custom_require.rb:36:in `require'\\n\\tfrom extconf.rb:4:in `<main>'\\n\\n\\nGem files will remain installed in /var/lib/gems/1.9.1/gems/ffi-1.9.18 for inspection.\\nResults logged to /var/lib/gems/1.9.1/gems/ffi-1.9.18/ext/ffi_c/gem_make.out\\n\", \"stderr_lines\": [\"ERROR:  Error installing sass:\", \"\\tERROR: Failed to build gem native extension.\", \"\", \"        /usr/bin/ruby1.9.1 extconf.rb\", \"/usr/lib/ruby/1.9.1/rubygems/custom_require.rb:36:in `require': cannot load such file -- mkmf (LoadError)\", \"\\tfrom /usr/lib/ruby/1.9.1/rubygems/custom_require.rb:36:in `require'\", \"\\tfrom extconf.rb:4:in `<main>'\", \"\", \"\", \"Gem files will remain installed in /var/lib/gems/1.9.1/gems/ffi-1.9.18 for inspection.\", \"Results logged to /var/lib/gems/1.9.1/gems/ffi-1.9.18/ext/ffi_c/gem_make.out\"], \"stdout\": \"INFO:  `gem install -y` is now default and will be removed\\nINFO:  use --ignore-dependencies to install only the gems you list\\nBuilding native extensions.  This could take a while...\\n\", \"stdout_lines\": [\"INFO:  `gem install -y` is now default and will be removed\", \"INFO:  use --ignore-dependencies to install only the gems you list\", \"Building native extensions.  This could take a while...\"]} \r\n```\r\n\r\n## Comments\r\n\r\nWe should probably fix by pinning the version of the sass gem in `ansible-base/roles/development/tasks/main.yml` to the same version [pinned in the build role](353e026628acf11f9f904ac8cc1adafd40c1dd8b), 3.4.23.", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/1971/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/1971/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/1969", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/1969/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/1969/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/1969/events", "html_url": "https://github.com/freedomofpress/securedrop/issues/1969", "id": 242451091, "node_id": "MDU6SXNzdWUyNDI0NTEwOTE=", "number": 1969, "title": "Tor Sandbox mode - breaking tor service on app/mon", "user": {"login": "msheiny", "id": 1727935, "node_id": "MDQ6VXNlcjE3Mjc5MzU=", "avatar_url": "https://avatars.githubusercontent.com/u/1727935?v=4", "gravatar_id": "", "url": "https://api.github.com/users/msheiny", "html_url": "https://github.com/msheiny", "followers_url": "https://api.github.com/users/msheiny/followers", "following_url": "https://api.github.com/users/msheiny/following{/other_user}", "gists_url": "https://api.github.com/users/msheiny/gists{/gist_id}", "starred_url": "https://api.github.com/users/msheiny/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/msheiny/subscriptions", "organizations_url": "https://api.github.com/users/msheiny/orgs", "repos_url": "https://api.github.com/users/msheiny/repos", "events_url": "https://api.github.com/users/msheiny/events{/privacy}", "received_events_url": "https://api.github.com/users/msheiny/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}, {"id": 385585080, "node_id": "MDU6TGFiZWwzODU1ODUwODA=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/QA:%20Release", "name": "QA: Release", "color": "fbca04", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/freedomofpress/securedrop/milestones/5", "html_url": "https://github.com/freedomofpress/securedrop/milestone/5", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/milestones/5/labels", "id": 691723, "node_id": "MDk6TWlsZXN0b25lNjkxNzIz", "number": 5, "title": "0.4", "description": "Resolve develop-master diff and smooth out release workflow", "creator": {"login": "garrettr", "id": 407302, "node_id": "MDQ6VXNlcjQwNzMwMg==", "avatar_url": "https://avatars.githubusercontent.com/u/407302?v=4", "gravatar_id": "", "url": "https://api.github.com/users/garrettr", "html_url": "https://github.com/garrettr", "followers_url": "https://api.github.com/users/garrettr/followers", "following_url": "https://api.github.com/users/garrettr/following{/other_user}", "gists_url": "https://api.github.com/users/garrettr/gists{/gist_id}", "starred_url": "https://api.github.com/users/garrettr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/garrettr/subscriptions", "organizations_url": "https://api.github.com/users/garrettr/orgs", "repos_url": "https://api.github.com/users/garrettr/repos", "events_url": "https://api.github.com/users/garrettr/events{/privacy}", "received_events_url": "https://api.github.com/users/garrettr/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 126, "state": "closed", "created_at": "2014-06-15T22:57:42Z", "updated_at": "2020-10-09T18:38:48Z", "due_on": "2017-07-11T07:00:00Z", "closed_at": "2017-07-31T22:15:38Z"}, "comments": 7, "created_at": "2017-07-12T17:06:29Z", "updated_at": "2017-07-13T20:47:20Z", "closed_at": "2017-07-13T20:47:19Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "# Bug\r\n\r\n## Description\r\n\r\nDuring an install sync from an admin workstation  -- tor is not coming back up correctly and I'm unable to re initiate connection.\r\n\r\n## Steps to Reproduce\r\n\r\n* Upgrade a `0.3.12` SD instance to `0.4rc1` by switching the apt repos to point to `apt-test.freedom.press`\r\n* Boot into a `3.0.1` with persistence\r\n* Ensure the latest `release/0.4` branch is cloned into ~/Persistent/securedrop\r\n* Ensure the settings in `install_files/ansible-base/groups_vars/all/site-specific` match the settings on your SD instance.\r\n* Drop all the relevant *ths files in `install_files/ansible-base` accordingly.\r\n* Jump into the virtualenv (`source .venv/bin/activate`)\r\n* cd into `install_files/ansible-base`, and run `./securedrop-prod.yml -t tor --diff -vv`\r\n\r\n\r\n## Expected Behavior\r\n\r\nPlaybook will finish with minimal changes, and any changes that come up should not affect SD service permanently. Tor should reboot and still be accessible.\r\n\r\n## Actual Behavior\r\n\r\nAnsible is bombing out on the `Waiting for SSH connection (slow)...`. Before that you can see that `Sandbox 1` is getting added to the `/etc/tor/torrc` file and triggering a tor restart.\r\n\r\n## Comments\r\n\r\nWe need to do two things:\r\n\r\n* swap the `pause` logic with something smarter that takes advantage of `retries` and `command` (see https://github.com/freedomofpress/securedrop/blob/develop/devops/playbooks/aws-ci-teardown.yml#L48 and http://docs.ansible.com/ansible/playbooks_loops.html#do-until-loops). \r\n\r\n* consider ripping out the `sandbox 1` option before the 0.4 release. I'm not convinced yet this has seen enough testing internally to warrant it'll work in prod without incident.", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/1969/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/1969/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/1963", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/1963/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/1963/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/1963/events", "html_url": "https://github.com/freedomofpress/securedrop/issues/1963", "id": 242219633, "node_id": "MDU6SXNzdWUyNDIyMTk2MzM=", "number": 1963, "title": "Confusing UX: \"Download All\" button does not Download All", "user": {"login": "redshiftzero", "id": 7832803, "node_id": "MDQ6VXNlcjc4MzI4MDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7832803?v=4", "gravatar_id": "", "url": "https://api.github.com/users/redshiftzero", "html_url": "https://github.com/redshiftzero", "followers_url": "https://api.github.com/users/redshiftzero/followers", "following_url": "https://api.github.com/users/redshiftzero/following{/other_user}", "gists_url": "https://api.github.com/users/redshiftzero/gists{/gist_id}", "starred_url": "https://api.github.com/users/redshiftzero/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/redshiftzero/subscriptions", "organizations_url": "https://api.github.com/users/redshiftzero/orgs", "repos_url": "https://api.github.com/users/redshiftzero/repos", "events_url": "https://api.github.com/users/redshiftzero/events{/privacy}", "received_events_url": "https://api.github.com/users/redshiftzero/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}, {"id": 385585080, "node_id": "MDU6TGFiZWwzODU1ODUwODA=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/QA:%20Release", "name": "QA: Release", "color": "fbca04", "default": false, "description": null}, {"id": 520554056, "node_id": "MDU6TGFiZWw1MjA1NTQwNTY=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/UX", "name": "UX", "color": "5319e7", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "redshiftzero", "id": 7832803, "node_id": "MDQ6VXNlcjc4MzI4MDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7832803?v=4", "gravatar_id": "", "url": "https://api.github.com/users/redshiftzero", "html_url": "https://github.com/redshiftzero", "followers_url": "https://api.github.com/users/redshiftzero/followers", "following_url": "https://api.github.com/users/redshiftzero/following{/other_user}", "gists_url": "https://api.github.com/users/redshiftzero/gists{/gist_id}", "starred_url": "https://api.github.com/users/redshiftzero/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/redshiftzero/subscriptions", "organizations_url": "https://api.github.com/users/redshiftzero/orgs", "repos_url": "https://api.github.com/users/redshiftzero/repos", "events_url": "https://api.github.com/users/redshiftzero/events{/privacy}", "received_events_url": "https://api.github.com/users/redshiftzero/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "redshiftzero", "id": 7832803, "node_id": "MDQ6VXNlcjc4MzI4MDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7832803?v=4", "gravatar_id": "", "url": "https://api.github.com/users/redshiftzero", "html_url": "https://github.com/redshiftzero", "followers_url": "https://api.github.com/users/redshiftzero/followers", "following_url": "https://api.github.com/users/redshiftzero/following{/other_user}", "gists_url": "https://api.github.com/users/redshiftzero/gists{/gist_id}", "starred_url": "https://api.github.com/users/redshiftzero/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/redshiftzero/subscriptions", "organizations_url": "https://api.github.com/users/redshiftzero/orgs", "repos_url": "https://api.github.com/users/redshiftzero/repos", "events_url": "https://api.github.com/users/redshiftzero/events{/privacy}", "received_events_url": "https://api.github.com/users/redshiftzero/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/freedomofpress/securedrop/milestones/5", "html_url": "https://github.com/freedomofpress/securedrop/milestone/5", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/milestones/5/labels", "id": 691723, "node_id": "MDk6TWlsZXN0b25lNjkxNzIz", "number": 5, "title": "0.4", "description": "Resolve develop-master diff and smooth out release workflow", "creator": {"login": "garrettr", "id": 407302, "node_id": "MDQ6VXNlcjQwNzMwMg==", "avatar_url": "https://avatars.githubusercontent.com/u/407302?v=4", "gravatar_id": "", "url": "https://api.github.com/users/garrettr", "html_url": "https://github.com/garrettr", "followers_url": "https://api.github.com/users/garrettr/followers", "following_url": "https://api.github.com/users/garrettr/following{/other_user}", "gists_url": "https://api.github.com/users/garrettr/gists{/gist_id}", "starred_url": "https://api.github.com/users/garrettr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/garrettr/subscriptions", "organizations_url": "https://api.github.com/users/garrettr/orgs", "repos_url": "https://api.github.com/users/garrettr/repos", "events_url": "https://api.github.com/users/garrettr/events{/privacy}", "received_events_url": "https://api.github.com/users/garrettr/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 126, "state": "closed", "created_at": "2014-06-15T22:57:42Z", "updated_at": "2020-10-09T18:38:48Z", "due_on": "2017-07-11T07:00:00Z", "closed_at": "2017-07-31T22:15:38Z"}, "comments": 4, "created_at": "2017-07-12T00:08:16Z", "updated_at": "2017-07-19T20:53:13Z", "closed_at": "2017-07-19T20:53:13Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "## Description\r\n\r\nThere is this handy \"Download All\" button on the journalist interface:\r\n\r\n![screen shot 2017-07-11 at 4 52 00 pm](https://user-images.githubusercontent.com/7832803/28095820-7574cad4-6659-11e7-80c5-77a3ae75cf08.png)\r\n\r\nUnfortunately, just clicking the button doesn't download all. \r\n\r\n## Steps to Reproduce\r\n\r\n1. Provision development VM on `release/0.4`\r\n2. Submit some test sources\r\n3. Create a test journalist account and sign into the journalist interface\r\n4. Click \"Download All\" on the index\r\n\r\n## Expected Behavior\r\n\r\nYou get a zipfile of all submissions from all sources. \r\n\r\n## Actual Behavior\r\n\r\nA flashed message \"No collections selected!\" appears: \r\n\r\n![screen shot 2017-07-11 at 4 56 24 pm](https://user-images.githubusercontent.com/7832803/28095908-ee879852-6659-11e7-96db-326194d9548d.png)\r\n\r\nHowever, clicking \"Select All\" and _then_ clicking \"Download All\" does indeed download all submissions from all sources.\r\n\r\n## Comments\r\n\r\nThe fix here is just to rename the button to what it actually does: \"Download Selected\"", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/1963/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/1963/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/1959", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/1959/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/1959/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/1959/events", "html_url": "https://github.com/freedomofpress/securedrop/issues/1959", "id": 241891767, "node_id": "MDU6SXNzdWUyNDE4OTE3Njc=", "number": 1959, "title": "Custom text on source interface cannot handle unicode", "user": {"login": "redshiftzero", "id": 7832803, "node_id": "MDQ6VXNlcjc4MzI4MDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7832803?v=4", "gravatar_id": "", "url": "https://api.github.com/users/redshiftzero", "html_url": "https://github.com/redshiftzero", "followers_url": "https://api.github.com/users/redshiftzero/followers", "following_url": "https://api.github.com/users/redshiftzero/following{/other_user}", "gists_url": "https://api.github.com/users/redshiftzero/gists{/gist_id}", "starred_url": "https://api.github.com/users/redshiftzero/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/redshiftzero/subscriptions", "organizations_url": "https://api.github.com/users/redshiftzero/orgs", "repos_url": "https://api.github.com/users/redshiftzero/repos", "events_url": "https://api.github.com/users/redshiftzero/events{/privacy}", "received_events_url": "https://api.github.com/users/redshiftzero/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2017-07-11T00:43:52Z", "updated_at": "2018-02-27T23:26:35Z", "closed_at": "2018-01-22T19:32:01Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "## Description\r\n\r\nIncluding unicode characters in the custom notification field on the source interface produces a provisioning failure. \r\n\r\n## Steps to Reproduce\r\n\r\n1. Set `custom_notification` in `site-specific` to include \"\u0ca0\"\r\n2. `vagrant provision /prod/`\r\n\r\n## Expected Behavior\r\n\r\nThe app server is provisioned with the custom notification text appearing on the source interface. \r\n\r\n## Actual Behavior\r\n\r\n```\r\n TASK [app : Initialize sqlite database.] ***************************************\r\nfatal: [app-prod]: FAILED! => {\"changed\": true, \"cmd\": \"su -s /bin/bash -c \\\"PYTHONPATH=/var/www/securedrop python -c 'import db; db.init_db()'\\\" www-data\", \"delta\": \"0:00:00.171079\", \"end\": \"2017-07-10 21:43:36.245632\", \"failed\": true, \"rc\": 1, \"start\": \"2017-07-10 21:43:36.074553\", \"stderr\": \"Traceback (most recent call last):\\n  File \\\"<string>\\\", line 1, in <module>\\n  File \\\"/var/www/securedrop/db.py\\\", line 25, in <module>\\n    import config\\n  File \\\"/var/www/securedrop/config.py\\\", line 86\\nSyntaxError: Non-ASCII character '\\\\xe1' in file /var/www/securedrop/config.py on line 86, but no encoding declared; see http://www.python.org/peps/pep-0263.html for details\", \"stderr_lines\": [\"Traceback (most recent call last):\", \"  File \\\"<string>\\\", line 1, in <module>\", \"  File \\\"/var/www/securedrop/db.py\\\", line 25, in <module>\", \"    import config\", \"  File \\\"/var/www/securedrop/config.py\\\", line 86\", \"SyntaxError: Non-ASCII character '\\\\xe1' in file /var/www/securedrop/config.py on line 86, but no encoding declared; see http://www.python.org/peps/pep-0263.html for details\"], \"stdout\": \"\", \"stdout_lines\": []}\r\n```\r\n", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/1959/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/1959/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/1918", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/1918/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/1918/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/1918/events", "html_url": "https://github.com/freedomofpress/securedrop/issues/1918", "id": 239593088, "node_id": "MDU6SXNzdWUyMzk1OTMwODg=", "number": 1918, "title": "Python dependency versions differ on development between local VMs and Travis", "user": {"login": "psivesely", "id": 3538418, "node_id": "MDQ6VXNlcjM1Mzg0MTg=", "avatar_url": "https://avatars.githubusercontent.com/u/3538418?v=4", "gravatar_id": "", "url": "https://api.github.com/users/psivesely", "html_url": "https://github.com/psivesely", "followers_url": "https://api.github.com/users/psivesely/followers", "following_url": "https://api.github.com/users/psivesely/following{/other_user}", "gists_url": "https://api.github.com/users/psivesely/gists{/gist_id}", "starred_url": "https://api.github.com/users/psivesely/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/psivesely/subscriptions", "organizations_url": "https://api.github.com/users/psivesely/orgs", "repos_url": "https://api.github.com/users/psivesely/repos", "events_url": "https://api.github.com/users/psivesely/events{/privacy}", "received_events_url": "https://api.github.com/users/psivesely/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2017-06-29T19:54:43Z", "updated_at": "2017-12-08T00:16:30Z", "closed_at": "2017-12-08T00:16:30Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "# Bug\r\n\r\n## Description\r\n\r\nIn both environments, `pip` is invoked sequentially on multiple requirements files. When a particular dependency is present in more than one requirements file, the version installed will be from whichever requirements file `pip` is is first invoked on. In the local VM context, `pip` is invoked via Ansible in the `development` Ansible role first on `securedrop-requirements.txt` and then on `test-requirements.txt`. In Travis `pip` is first invoked on `testinfra/requirements.txt`, and then the `development` Ansible role is run [1].\r\n\r\nIn #1829 I added the version of `requests` in `test-requirements.txt` to the `test_development_pip_dependencies()` testinfra test, which caused Travis to fail because an older version is present in `testinfra/requirements.txt` (which, again, `pip` is invoked on first in the Travis context). I'm not sure why this and a number of the other `test-requirements.txt` dependencies are missing from the `test_development_pip_dependencies()` testinfra test, but I believe there may be even more conflicts.\r\n\r\nI have not taken the time to check whether or not there is overlap between `testinfra/requirements.txt` and `securedrop-requirements.txt`, but if that is the case, or were to become the case in the future (it's certainly possible with how things now work) that would arguably be an even worse situation.\r\n\r\n[1] In Travis `develop-requirements.txt` is also installed, but after the app code and testinfra tests are run, so we can mostly ignore this for the purpose of this discussion.\r\n\r\n## Comments\r\n\r\nI'm still brainstorming ideas on how to solve this problem in a way that is maintainable, verifiable (i.e., our tests should conclusive prove things are as they should be), easy to follow, and would keep the diff as small as possible. Please chime in if you have ideas to this extent; I intend to follow up myself in the near-term.", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/1918/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/1918/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/1900", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/1900/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/1900/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/1900/events", "html_url": "https://github.com/freedomofpress/securedrop/issues/1900", "id": 239283887, "node_id": "MDU6SXNzdWUyMzkyODM4ODc=", "number": 1900, "title": "Wordlists are not being parsed correctly", "user": {"login": "psivesely", "id": 3538418, "node_id": "MDQ6VXNlcjM1Mzg0MTg=", "avatar_url": "https://avatars.githubusercontent.com/u/3538418?v=4", "gravatar_id": "", "url": "https://api.github.com/users/psivesely", "html_url": "https://github.com/psivesely", "followers_url": "https://api.github.com/users/psivesely/followers", "following_url": "https://api.github.com/users/psivesely/following{/other_user}", "gists_url": "https://api.github.com/users/psivesely/gists{/gist_id}", "starred_url": "https://api.github.com/users/psivesely/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/psivesely/subscriptions", "organizations_url": "https://api.github.com/users/psivesely/orgs", "repos_url": "https://api.github.com/users/psivesely/repos", "events_url": "https://api.github.com/users/psivesely/events{/privacy}", "received_events_url": "https://api.github.com/users/psivesely/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/freedomofpress/securedrop/milestones/5", "html_url": "https://github.com/freedomofpress/securedrop/milestone/5", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/milestones/5/labels", "id": 691723, "node_id": "MDk6TWlsZXN0b25lNjkxNzIz", "number": 5, "title": "0.4", "description": "Resolve develop-master diff and smooth out release workflow", "creator": {"login": "garrettr", "id": 407302, "node_id": "MDQ6VXNlcjQwNzMwMg==", "avatar_url": "https://avatars.githubusercontent.com/u/407302?v=4", "gravatar_id": "", "url": "https://api.github.com/users/garrettr", "html_url": "https://github.com/garrettr", "followers_url": "https://api.github.com/users/garrettr/followers", "following_url": "https://api.github.com/users/garrettr/following{/other_user}", "gists_url": "https://api.github.com/users/garrettr/gists{/gist_id}", "starred_url": "https://api.github.com/users/garrettr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/garrettr/subscriptions", "organizations_url": "https://api.github.com/users/garrettr/orgs", "repos_url": "https://api.github.com/users/garrettr/repos", "events_url": "https://api.github.com/users/garrettr/events{/privacy}", "received_events_url": "https://api.github.com/users/garrettr/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 126, "state": "closed", "created_at": "2014-06-15T22:57:42Z", "updated_at": "2020-10-09T18:38:48Z", "due_on": "2017-07-11T07:00:00Z", "closed_at": "2017-07-31T22:15:38Z"}, "comments": 4, "created_at": "2017-06-28T20:20:25Z", "updated_at": "2017-06-29T22:16:55Z", "closed_at": "2017-06-29T22:16:55Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "# Bug\r\n\r\n## Description\r\n\r\n`crypo_util.{words,nouns,adjectives}` all contain an empty string as their last element.", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/1900/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/1900/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/1887", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/1887/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/1887/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/1887/events", "html_url": "https://github.com/freedomofpress/securedrop/issues/1887", "id": 238994549, "node_id": "MDU6SXNzdWUyMzg5OTQ1NDk=", "number": 1887, "title": "journalist: can login with the current token despite error message saying otherwise", "user": {"login": "ghost", "id": 10137, "node_id": "MDQ6VXNlcjEwMTM3", "avatar_url": "https://avatars.githubusercontent.com/u/10137?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ghost", "html_url": "https://github.com/ghost", "followers_url": "https://api.github.com/users/ghost/followers", "following_url": "https://api.github.com/users/ghost/following{/other_user}", "gists_url": "https://api.github.com/users/ghost/gists{/gist_id}", "starred_url": "https://api.github.com/users/ghost/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ghost/subscriptions", "organizations_url": "https://api.github.com/users/ghost/orgs", "repos_url": "https://api.github.com/users/ghost/repos", "events_url": "https://api.github.com/users/ghost/events{/privacy}", "received_events_url": "https://api.github.com/users/ghost/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2017-06-27T21:54:45Z", "updated_at": "2018-01-07T11:41:26Z", "closed_at": "2018-01-07T11:41:26Z", "author_association": "NONE", "active_lock_reason": null, "body": "# Bug\r\n\r\n## Description\r\n\r\nWhen the journalist makes a mistake entering the password and no token, the message asks that they wait for the next token. However, if they try again and use the correct password and the right token immediately after, it works.\r\n\r\nWhen the journalist makes a mistake entering the password and uses the right token, the message asks that they wait for the next token. And if they try with the right password and the right token it will issue exactly the same message because, not because of the wrong password but because the right token was used twice.\r\n\r\n## Steps to Reproduce\r\n\r\n* Connect to the journalist login page\r\n* Using an existing journalist account name\r\n* Enter the wrong password and no token\r\n* Try to login and see the error message asking to wait for the next token\r\n* Do not wait for the next token\r\n* Enter the right password and the current token\r\n\r\n## Expected Behavior\r\n\r\n* Unable to login because the token is not the next token\r\n\r\n## Actual Behavior\r\n\r\n* Login is successful \r\n\r\n## Comments\r\n\r\nThis is inconsistent and slightly confusing but I'm not sure this can be fixed. And it's probably not a significant user experience problem.\r\n", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/1887/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/1887/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/1866", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/1866/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/1866/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/1866/events", "html_url": "https://github.com/freedomofpress/securedrop/issues/1866", "id": 237383881, "node_id": "MDU6SXNzdWUyMzczODM4ODE=", "number": 1866, "title": "All testinfra tests are being skipped when run locally against the development machine", "user": {"login": "psivesely", "id": 3538418, "node_id": "MDQ6VXNlcjM1Mzg0MTg=", "avatar_url": "https://avatars.githubusercontent.com/u/3538418?v=4", "gravatar_id": "", "url": "https://api.github.com/users/psivesely", "html_url": "https://github.com/psivesely", "followers_url": "https://api.github.com/users/psivesely/followers", "following_url": "https://api.github.com/users/psivesely/following{/other_user}", "gists_url": "https://api.github.com/users/psivesely/gists{/gist_id}", "starred_url": "https://api.github.com/users/psivesely/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/psivesely/subscriptions", "organizations_url": "https://api.github.com/users/psivesely/orgs", "repos_url": "https://api.github.com/users/psivesely/repos", "events_url": "https://api.github.com/users/psivesely/events{/privacy}", "received_events_url": "https://api.github.com/users/psivesely/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}, {"id": 192539287, "node_id": "MDU6TGFiZWwxOTI1MzkyODc=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/ops/deployment", "name": "ops/deployment", "color": "c7def8", "default": false, "description": null}, {"id": 616447641, "node_id": "MDU6TGFiZWw2MTY0NDc2NDE=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/development%20env", "name": "development env", "color": "bfd4f2", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/freedomofpress/securedrop/milestones/22", "html_url": "https://github.com/freedomofpress/securedrop/milestone/22", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/milestones/22/labels", "id": 2513781, "node_id": "MDk6TWlsZXN0b25lMjUxMzc4MQ==", "number": 22, "title": "Long Term Product Backlog", "description": "Issues we think are worthwhile and should be implemented some day. Issues selected for near term development are also added to the \"near term\" backlog on the SecureDrop team's project work board, from which they can move into a sprint.", "creator": {"login": "redshiftzero", "id": 7832803, "node_id": "MDQ6VXNlcjc4MzI4MDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7832803?v=4", "gravatar_id": "", "url": "https://api.github.com/users/redshiftzero", "html_url": "https://github.com/redshiftzero", "followers_url": "https://api.github.com/users/redshiftzero/followers", "following_url": "https://api.github.com/users/redshiftzero/following{/other_user}", "gists_url": "https://api.github.com/users/redshiftzero/gists{/gist_id}", "starred_url": "https://api.github.com/users/redshiftzero/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/redshiftzero/subscriptions", "organizations_url": "https://api.github.com/users/redshiftzero/orgs", "repos_url": "https://api.github.com/users/redshiftzero/repos", "events_url": "https://api.github.com/users/redshiftzero/events{/privacy}", "received_events_url": "https://api.github.com/users/redshiftzero/received_events", "type": "User", "site_admin": false}, "open_issues": 42, "closed_issues": 32, "state": "open", "created_at": "2017-05-10T22:07:00Z", "updated_at": "2022-10-20T15:20:20Z", "due_on": null, "closed_at": null}, "comments": 5, "created_at": "2017-06-21T00:37:57Z", "updated_at": "2018-03-01T12:20:43Z", "closed_at": "2018-03-01T12:20:42Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "# Bug\r\n\r\n## Description\r\n\r\nAll testinfra tests are being skipped when run locally against the development machine. @conorsch believes something in one of the last Travis-related PRs may have tripped this.", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/1866/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/1866/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/1862", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/1862/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/1862/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/1862/events", "html_url": "https://github.com/freedomofpress/securedrop/issues/1862", "id": 237191317, "node_id": "MDU6SXNzdWUyMzcxOTEzMTc=", "number": 1862, "title": "Tails 3.0 does not restore the original filename when uncompressing a file", "user": {"login": "runasand", "id": 85289, "node_id": "MDQ6VXNlcjg1Mjg5", "avatar_url": "https://avatars.githubusercontent.com/u/85289?v=4", "gravatar_id": "", "url": "https://api.github.com/users/runasand", "html_url": "https://github.com/runasand", "followers_url": "https://api.github.com/users/runasand/followers", "following_url": "https://api.github.com/users/runasand/following{/other_user}", "gists_url": "https://api.github.com/users/runasand/gists{/gist_id}", "starred_url": "https://api.github.com/users/runasand/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/runasand/subscriptions", "organizations_url": "https://api.github.com/users/runasand/orgs", "repos_url": "https://api.github.com/users/runasand/repos", "events_url": "https://api.github.com/users/runasand/events{/privacy}", "received_events_url": "https://api.github.com/users/runasand/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}, {"id": 385585080, "node_id": "MDU6TGFiZWwzODU1ODUwODA=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/QA:%20Release", "name": "QA: Release", "color": "fbca04", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "redshiftzero", "id": 7832803, "node_id": "MDQ6VXNlcjc4MzI4MDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7832803?v=4", "gravatar_id": "", "url": "https://api.github.com/users/redshiftzero", "html_url": "https://github.com/redshiftzero", "followers_url": "https://api.github.com/users/redshiftzero/followers", "following_url": "https://api.github.com/users/redshiftzero/following{/other_user}", "gists_url": "https://api.github.com/users/redshiftzero/gists{/gist_id}", "starred_url": "https://api.github.com/users/redshiftzero/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/redshiftzero/subscriptions", "organizations_url": "https://api.github.com/users/redshiftzero/orgs", "repos_url": "https://api.github.com/users/redshiftzero/repos", "events_url": "https://api.github.com/users/redshiftzero/events{/privacy}", "received_events_url": "https://api.github.com/users/redshiftzero/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "redshiftzero", "id": 7832803, "node_id": "MDQ6VXNlcjc4MzI4MDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7832803?v=4", "gravatar_id": "", "url": "https://api.github.com/users/redshiftzero", "html_url": "https://github.com/redshiftzero", "followers_url": "https://api.github.com/users/redshiftzero/followers", "following_url": "https://api.github.com/users/redshiftzero/following{/other_user}", "gists_url": "https://api.github.com/users/redshiftzero/gists{/gist_id}", "starred_url": "https://api.github.com/users/redshiftzero/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/redshiftzero/subscriptions", "organizations_url": "https://api.github.com/users/redshiftzero/orgs", "repos_url": "https://api.github.com/users/redshiftzero/repos", "events_url": "https://api.github.com/users/redshiftzero/events{/privacy}", "received_events_url": "https://api.github.com/users/redshiftzero/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/freedomofpress/securedrop/milestones/5", "html_url": "https://github.com/freedomofpress/securedrop/milestone/5", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/milestones/5/labels", "id": 691723, "node_id": "MDk6TWlsZXN0b25lNjkxNzIz", "number": 5, "title": "0.4", "description": "Resolve develop-master diff and smooth out release workflow", "creator": {"login": "garrettr", "id": 407302, "node_id": "MDQ6VXNlcjQwNzMwMg==", "avatar_url": "https://avatars.githubusercontent.com/u/407302?v=4", "gravatar_id": "", "url": "https://api.github.com/users/garrettr", "html_url": "https://github.com/garrettr", "followers_url": "https://api.github.com/users/garrettr/followers", "following_url": "https://api.github.com/users/garrettr/following{/other_user}", "gists_url": "https://api.github.com/users/garrettr/gists{/gist_id}", "starred_url": "https://api.github.com/users/garrettr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/garrettr/subscriptions", "organizations_url": "https://api.github.com/users/garrettr/orgs", "repos_url": "https://api.github.com/users/garrettr/repos", "events_url": "https://api.github.com/users/garrettr/events{/privacy}", "received_events_url": "https://api.github.com/users/garrettr/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 126, "state": "closed", "created_at": "2014-06-15T22:57:42Z", "updated_at": "2020-10-09T18:38:48Z", "due_on": "2017-07-11T07:00:00Z", "closed_at": "2017-07-31T22:15:38Z"}, "comments": 11, "created_at": "2017-06-20T12:23:39Z", "updated_at": "2017-07-23T22:37:50Z", "closed_at": "2017-07-23T22:37:49Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "# Bug\r\n\r\nTails 3.0 does not preserve the filename when extracting an archive.\r\n\r\n## Description\r\n\r\nWhen extracting an archive, Tails 3.0 will rename the file inside the archive to _data_.\r\n\r\n## Steps to Reproduce\r\n\r\nDownload a SecureDrop submission, decrypt the submission and extract the archive.\r\n\r\n## Expected Behavior\r\n\r\nTails should preserve the filename and leave you with, say, _code_name.pdf_.\r\n\r\n## Actual Behavior\r\n\r\nTails 3.0 leaves you with a file called _data_ instead.\r\n\r\n## Comments\r\n\r\nI suspect this is an issue with Tails 3.0 and not the way SecureDrop creates the archive in the first place. Filing here just in case.", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/1862/reactions", "total_count": 1, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/1862/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/1831", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/1831/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/1831/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/1831/events", "html_url": "https://github.com/freedomofpress/securedrop/issues/1831", "id": 236516476, "node_id": "MDU6SXNzdWUyMzY1MTY0NzY=", "number": 1831, "title": "tails-3.0 KeePassX 2.0 cannot import XML", "user": {"login": "ghost", "id": 10137, "node_id": "MDQ6VXNlcjEwMTM3", "avatar_url": "https://avatars.githubusercontent.com/u/10137?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ghost", "html_url": "https://github.com/ghost", "followers_url": "https://api.github.com/users/ghost/followers", "following_url": "https://api.github.com/users/ghost/following{/other_user}", "gists_url": "https://api.github.com/users/ghost/gists{/gist_id}", "starred_url": "https://api.github.com/users/ghost/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ghost/subscriptions", "organizations_url": "https://api.github.com/users/ghost/orgs", "repos_url": "https://api.github.com/users/ghost/repos", "events_url": "https://api.github.com/users/ghost/events{/privacy}", "received_events_url": "https://api.github.com/users/ghost/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "redshiftzero", "id": 7832803, "node_id": "MDQ6VXNlcjc4MzI4MDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7832803?v=4", "gravatar_id": "", "url": "https://api.github.com/users/redshiftzero", "html_url": "https://github.com/redshiftzero", "followers_url": "https://api.github.com/users/redshiftzero/followers", "following_url": "https://api.github.com/users/redshiftzero/following{/other_user}", "gists_url": "https://api.github.com/users/redshiftzero/gists{/gist_id}", "starred_url": "https://api.github.com/users/redshiftzero/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/redshiftzero/subscriptions", "organizations_url": "https://api.github.com/users/redshiftzero/orgs", "repos_url": "https://api.github.com/users/redshiftzero/repos", "events_url": "https://api.github.com/users/redshiftzero/events{/privacy}", "received_events_url": "https://api.github.com/users/redshiftzero/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "redshiftzero", "id": 7832803, "node_id": "MDQ6VXNlcjc4MzI4MDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7832803?v=4", "gravatar_id": "", "url": "https://api.github.com/users/redshiftzero", "html_url": "https://github.com/redshiftzero", "followers_url": "https://api.github.com/users/redshiftzero/followers", "following_url": "https://api.github.com/users/redshiftzero/following{/other_user}", "gists_url": "https://api.github.com/users/redshiftzero/gists{/gist_id}", "starred_url": "https://api.github.com/users/redshiftzero/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/redshiftzero/subscriptions", "organizations_url": "https://api.github.com/users/redshiftzero/orgs", "repos_url": "https://api.github.com/users/redshiftzero/repos", "events_url": "https://api.github.com/users/redshiftzero/events{/privacy}", "received_events_url": "https://api.github.com/users/redshiftzero/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/freedomofpress/securedrop/milestones/5", "html_url": "https://github.com/freedomofpress/securedrop/milestone/5", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/milestones/5/labels", "id": 691723, "node_id": "MDk6TWlsZXN0b25lNjkxNzIz", "number": 5, "title": "0.4", "description": "Resolve develop-master diff and smooth out release workflow", "creator": {"login": "garrettr", "id": 407302, "node_id": "MDQ6VXNlcjQwNzMwMg==", "avatar_url": "https://avatars.githubusercontent.com/u/407302?v=4", "gravatar_id": "", "url": "https://api.github.com/users/garrettr", "html_url": "https://github.com/garrettr", "followers_url": "https://api.github.com/users/garrettr/followers", "following_url": "https://api.github.com/users/garrettr/following{/other_user}", "gists_url": "https://api.github.com/users/garrettr/gists{/gist_id}", "starred_url": "https://api.github.com/users/garrettr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/garrettr/subscriptions", "organizations_url": "https://api.github.com/users/garrettr/orgs", "repos_url": "https://api.github.com/users/garrettr/repos", "events_url": "https://api.github.com/users/garrettr/events{/privacy}", "received_events_url": "https://api.github.com/users/garrettr/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 126, "state": "closed", "created_at": "2014-06-15T22:57:42Z", "updated_at": "2020-10-09T18:38:48Z", "due_on": "2017-07-11T07:00:00Z", "closed_at": "2017-07-31T22:15:38Z"}, "comments": 13, "created_at": "2017-06-16T15:27:40Z", "updated_at": "2017-06-30T22:18:24Z", "closed_at": "2017-06-30T22:18:23Z", "author_association": "NONE", "active_lock_reason": null, "body": "# Bug\r\n\r\n## Description\r\n\r\ndocs/set_up_admin_tails.rst reads \r\n\r\n-  Open the KeePassX program |KeePassX| which is already installed on Tails\r\n-  Select **File**, **Import from...**, and **KeePassX XML (*.xml)**\r\n\r\nbut there is no **File** menu in KeePassX 2.0.3 as installed in Tails 3.0 by default.\r\n\r\n![keepass](https://user-images.githubusercontent.com/433594/27233210-05ff1500-52b9-11e7-82d6-ce4dff2a6fdb.png)\r\n\r\n![keepass2](https://user-images.githubusercontent.com/433594/27233614-5c93a1d2-52ba-11e7-9efe-40fd9acd2138.png)\r\n\r\n![keepass3](https://user-images.githubusercontent.com/433594/27233634-7248ae3c-52ba-11e7-8775-3ded05469086.png)\r\n\r\n![keepass5](https://user-images.githubusercontent.com/433594/27233655-8613d36a-52ba-11e7-9519-52a6925c49a1.png)\r\n", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/1831/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/1831/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/1797", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/1797/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/1797/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/1797/events", "html_url": "https://github.com/freedomofpress/securedrop/issues/1797", "id": 235524654, "node_id": "MDU6SXNzdWUyMzU1MjQ2NTQ=", "number": 1797, "title": "gpg --recv-key hangs on tails-3.0", "user": {"login": "ghost", "id": 10137, "node_id": "MDQ6VXNlcjEwMTM3", "avatar_url": "https://avatars.githubusercontent.com/u/10137?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ghost", "html_url": "https://github.com/ghost", "followers_url": "https://api.github.com/users/ghost/followers", "following_url": "https://api.github.com/users/ghost/following{/other_user}", "gists_url": "https://api.github.com/users/ghost/gists{/gist_id}", "starred_url": "https://api.github.com/users/ghost/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ghost/subscriptions", "organizations_url": "https://api.github.com/users/ghost/orgs", "repos_url": "https://api.github.com/users/ghost/repos", "events_url": "https://api.github.com/users/ghost/events{/privacy}", "received_events_url": "https://api.github.com/users/ghost/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}, {"id": 118465787, "node_id": "MDU6TGFiZWwxMTg0NjU3ODc=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/docs", "name": "docs", "color": "d4c5f9", "default": false, "description": null}, {"id": 625966031, "node_id": "MDU6TGFiZWw2MjU5NjYwMzE=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/able%20to%20reproduce", "name": "able to reproduce", "color": "fbca04", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/freedomofpress/securedrop/milestones/5", "html_url": "https://github.com/freedomofpress/securedrop/milestone/5", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/milestones/5/labels", "id": 691723, "node_id": "MDk6TWlsZXN0b25lNjkxNzIz", "number": 5, "title": "0.4", "description": "Resolve develop-master diff and smooth out release workflow", "creator": {"login": "garrettr", "id": 407302, "node_id": "MDQ6VXNlcjQwNzMwMg==", "avatar_url": "https://avatars.githubusercontent.com/u/407302?v=4", "gravatar_id": "", "url": "https://api.github.com/users/garrettr", "html_url": "https://github.com/garrettr", "followers_url": "https://api.github.com/users/garrettr/followers", "following_url": "https://api.github.com/users/garrettr/following{/other_user}", "gists_url": "https://api.github.com/users/garrettr/gists{/gist_id}", "starred_url": "https://api.github.com/users/garrettr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/garrettr/subscriptions", "organizations_url": "https://api.github.com/users/garrettr/orgs", "repos_url": "https://api.github.com/users/garrettr/repos", "events_url": "https://api.github.com/users/garrettr/events{/privacy}", "received_events_url": "https://api.github.com/users/garrettr/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 126, "state": "closed", "created_at": "2014-06-15T22:57:42Z", "updated_at": "2020-10-09T18:38:48Z", "due_on": "2017-07-11T07:00:00Z", "closed_at": "2017-07-31T22:15:38Z"}, "comments": 3, "created_at": "2017-06-13T11:39:22Z", "updated_at": "2017-06-20T19:18:35Z", "closed_at": "2017-06-20T19:18:34Z", "author_association": "NONE", "active_lock_reason": null, "body": "# Bug\r\n\r\n## Description\r\n\r\ndocs/set_up_admin_tails.rst suggests:\r\n\r\n<pre>\r\n    gpg --recv-key \"2224 5C81 E3BA EB41 38B3 6061 310F 5612 00F4 AD77\"\r\n</pre>\r\n\r\nbut it hangs and timesout.\r\n\r\n## Steps to Reproduce\r\n\r\n* Install https://tails-dl.urown.net/tails/stable/tails-amd64-3.0/tails-amd64-3.0.iso with persistence and boot with an admin password.\r\n* Connect to internet (via wifi, no firewall)\r\n* Verify connectivity with sudo apt-get update\r\n* Open a terminal\r\n* $ cat /home/amnesia/.gnupg/dirmngr.conf \r\nuse-tor\r\nkeyserver hkp://jirk5u4osbsr34t5.onion\r\n* gpg --debug-all --recv-key \"2224 5C81 E3BA EB41 38B3 6061 310F 5612 00F4 AD77\"\r\n\r\n## Expected Behavior\r\n\r\nThe key is imported.\r\n\r\n## Actual Behavior\r\n\r\ngpg: reading options from '/home/amnesia/.gnupg/gpg.conf'\r\ngpg: enabled debug flags: packet mpi crypto filter iobuf memory cache memstat trust hashing ipc clock lookup extprog\r\ngpg: DBG: [not enabled in the source] start\r\ngpg: DBG: chan_3 <- # Home: /home/amnesia/.gnupg\r\ngpg: DBG: chan_3 <- # Config: /home/amnesia/.gnupg/dirmngr.conf\r\ngpg: DBG: chan_3 <- OK Dirmngr 2.1.18 at your service\r\ngpg: DBG: connection to the dirmngr established\r\ngpg: DBG: chan_3 -> GETINFO version\r\ngpg: DBG: chan_3 <- D 2.1.18\r\ngpg: DBG: chan_3 <- OK\r\ngpg: DBG: chan_3 -> KS_GET -- 0x22245C81E3BAEB4138B36061310F561200F4AD77\r\ngpg: keyserver receive failed: Connection timed out\r\n\r\n## Comments\r\n\r\nIt is entirely possible I'm doing something stupid, this is my first time with tails ;-) I tried --keyserver but gpg would not accept that option.\r\n", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/1797/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/1797/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/1763", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/1763/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/1763/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/1763/events", "html_url": "https://github.com/freedomofpress/securedrop/issues/1763", "id": 232435098, "node_id": "MDU6SXNzdWUyMzI0MzUwOTg=", "number": 1763, "title": "Submission on source interface does not produce flashed message", "user": {"login": "redshiftzero", "id": 7832803, "node_id": "MDQ6VXNlcjc4MzI4MDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7832803?v=4", "gravatar_id": "", "url": "https://api.github.com/users/redshiftzero", "html_url": "https://github.com/redshiftzero", "followers_url": "https://api.github.com/users/redshiftzero/followers", "following_url": "https://api.github.com/users/redshiftzero/following{/other_user}", "gists_url": "https://api.github.com/users/redshiftzero/gists{/gist_id}", "starred_url": "https://api.github.com/users/redshiftzero/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/redshiftzero/subscriptions", "organizations_url": "https://api.github.com/users/redshiftzero/orgs", "repos_url": "https://api.github.com/users/redshiftzero/repos", "events_url": "https://api.github.com/users/redshiftzero/events{/privacy}", "received_events_url": "https://api.github.com/users/redshiftzero/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}, {"id": 157793311, "node_id": "MDU6TGFiZWwxNTc3OTMzMTE=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/priority/high", "name": "priority/high", "color": "e64ef4", "default": false, "description": ""}, {"id": 616447592, "node_id": "MDU6TGFiZWw2MTY0NDc1OTI=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/staging%20VMs", "name": "staging VMs", "color": "bfd4f2", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "garrettr", "id": 407302, "node_id": "MDQ6VXNlcjQwNzMwMg==", "avatar_url": "https://avatars.githubusercontent.com/u/407302?v=4", "gravatar_id": "", "url": "https://api.github.com/users/garrettr", "html_url": "https://github.com/garrettr", "followers_url": "https://api.github.com/users/garrettr/followers", "following_url": "https://api.github.com/users/garrettr/following{/other_user}", "gists_url": "https://api.github.com/users/garrettr/gists{/gist_id}", "starred_url": "https://api.github.com/users/garrettr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/garrettr/subscriptions", "organizations_url": "https://api.github.com/users/garrettr/orgs", "repos_url": "https://api.github.com/users/garrettr/repos", "events_url": "https://api.github.com/users/garrettr/events{/privacy}", "received_events_url": "https://api.github.com/users/garrettr/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "garrettr", "id": 407302, "node_id": "MDQ6VXNlcjQwNzMwMg==", "avatar_url": "https://avatars.githubusercontent.com/u/407302?v=4", "gravatar_id": "", "url": "https://api.github.com/users/garrettr", "html_url": "https://github.com/garrettr", "followers_url": "https://api.github.com/users/garrettr/followers", "following_url": "https://api.github.com/users/garrettr/following{/other_user}", "gists_url": "https://api.github.com/users/garrettr/gists{/gist_id}", "starred_url": "https://api.github.com/users/garrettr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/garrettr/subscriptions", "organizations_url": "https://api.github.com/users/garrettr/orgs", "repos_url": "https://api.github.com/users/garrettr/repos", "events_url": "https://api.github.com/users/garrettr/events{/privacy}", "received_events_url": "https://api.github.com/users/garrettr/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/freedomofpress/securedrop/milestones/5", "html_url": "https://github.com/freedomofpress/securedrop/milestone/5", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/milestones/5/labels", "id": 691723, "node_id": "MDk6TWlsZXN0b25lNjkxNzIz", "number": 5, "title": "0.4", "description": "Resolve develop-master diff and smooth out release workflow", "creator": {"login": "garrettr", "id": 407302, "node_id": "MDQ6VXNlcjQwNzMwMg==", "avatar_url": "https://avatars.githubusercontent.com/u/407302?v=4", "gravatar_id": "", "url": "https://api.github.com/users/garrettr", "html_url": "https://github.com/garrettr", "followers_url": "https://api.github.com/users/garrettr/followers", "following_url": "https://api.github.com/users/garrettr/following{/other_user}", "gists_url": "https://api.github.com/users/garrettr/gists{/gist_id}", "starred_url": "https://api.github.com/users/garrettr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/garrettr/subscriptions", "organizations_url": "https://api.github.com/users/garrettr/orgs", "repos_url": "https://api.github.com/users/garrettr/repos", "events_url": "https://api.github.com/users/garrettr/events{/privacy}", "received_events_url": "https://api.github.com/users/garrettr/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 126, "state": "closed", "created_at": "2014-06-15T22:57:42Z", "updated_at": "2020-10-09T18:38:48Z", "due_on": "2017-07-11T07:00:00Z", "closed_at": "2017-07-31T22:15:38Z"}, "comments": 3, "created_at": "2017-05-31T02:23:55Z", "updated_at": "2017-06-08T00:36:55Z", "closed_at": "2017-06-08T00:36:55Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "# Description\r\n\r\nA first time submission to the source interface does not produce a flashed message in the staging environment using Tor Browser.\r\n\r\n# Steps to reproduce\r\n\r\n1. Provision staging VMs\r\n2. Load the source interface in Tor Browser.\r\n3. Generate a new codename.\r\n4. Submit a test message \"blah\".\r\n\r\n# What should happen\r\n\r\nA flashed message like this one should appear:\r\n\r\n![screen shot 2017-05-30 at 7 17 17 pm](https://cloud.githubusercontent.com/assets/7832803/26612926/d486ed26-456c-11e7-98c0-8347600e3bb9.png)\r\n\r\n# What actually happens\r\n\r\nNo flashed message is shown. If you refresh the page, the flashed message will then appear. Subsequent submissions will produce the flashed message. Also note that this problem does not appear in Chrome.\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/1763/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/1763/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/1728", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/1728/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/1728/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/1728/events", "html_url": "https://github.com/freedomofpress/securedrop/issues/1728", "id": 231175219, "node_id": "MDU6SXNzdWUyMzExNzUyMTk=", "number": 1728, "title": "Possible race condition when two Journalists Reply to same Source simultaneously", "user": {"login": "psivesely", "id": 3538418, "node_id": "MDQ6VXNlcjM1Mzg0MTg=", "avatar_url": "https://avatars.githubusercontent.com/u/3538418?v=4", "gravatar_id": "", "url": "https://api.github.com/users/psivesely", "html_url": "https://github.com/psivesely", "followers_url": "https://api.github.com/users/psivesely/followers", "following_url": "https://api.github.com/users/psivesely/following{/other_user}", "gists_url": "https://api.github.com/users/psivesely/gists{/gist_id}", "starred_url": "https://api.github.com/users/psivesely/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/psivesely/subscriptions", "organizations_url": "https://api.github.com/users/psivesely/orgs", "repos_url": "https://api.github.com/users/psivesely/repos", "events_url": "https://api.github.com/users/psivesely/events{/privacy}", "received_events_url": "https://api.github.com/users/psivesely/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}, {"id": 652909251, "node_id": "MDU6TGFiZWw2NTI5MDkyNTE=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/goals:%20journalist%20experience", "name": "goals: journalist experience", "color": "0e8a16", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2017-05-24T21:21:55Z", "updated_at": "2021-03-01T18:50:08Z", "closed_at": "2021-03-01T18:50:08Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "There may be a race condition in `db.Journalist.reply()`. There are potentially many unexpected outcomes of two Journalists sending a reply to the same source at the same time, and I believe I'm only part of the way to narrowing down the most likely ones. Nonetheless, I'll share my initial determinations and concerns.\r\n\r\nHere's the important bit of `db.Journalist.reply()`:\r\n\r\n```py\r\n    g.source.interaction_count += 1\r\n    filename = \"{0}-{1}-reply.gpg\".format(g.source.interaction_count,\r\n                                          g.source.journalist_filename)\r\n    crypto_util.encrypt(msg,\r\n                        [crypto_util.getkey(g.sid), config.JOURNALIST_KEY],\r\n                        output=store.path(g.sid, filename))\r\n    reply = Reply(g.user, g.source, filename)\r\n\r\n    try:\r\n        db_session.add(reply)\r\n        db_session.commit()\r\n```\r\n\r\nAlso important, the function used to assign `g.source`:\r\n\r\n```py\r\ndef get_source(sid):\r\n    \"\"\"Return a Source object, representing the database row, for the source\r\n    with id `sid`\"\"\"\r\n    source = None\r\n    query = Source.query.filter(Source.filesystem_id == sid)\r\n    source = get_one_or_else(query, app.logger, abort)\r\n\r\n    return source\r\n```\r\n\r\nSo the worry is that the thread-local `g.source` object is the same for both request threads in the case where the second thread executes `get_source()` before the first executes `commit()`.\r\n\r\nIt might be easiest to break down possible outcomes by operation. I confirmed experimentally (`ipython` + tmux's `synchronize-panes` feature) that you can bring a source into your session, inc the `interaction_count` and `commit()` in two interpreters simultaneously and no errors occur. So in such a situation I believe we can assume `interaction_count` will be increased just by one despite two replies, and \r\n\r\nThe database itself will not be updated until `commit()` is called, so both threads can update the `source.interaction_count`, but instead of increasing by two, an increase of only one happens _without exception_.\r\n\r\nNext, let's look at `crypto_util.encrypt()`. Since this the only I/O operation in between execution of our functions/methods of interest, it's almost certainly the most time consuming and highly likely to be a point of overlap (i.e., both threads are statistically most likely to have some overlap in their execution of this procedure). Since `interaction_count` increases are not synced between the threads here, they will both be the same, so `filename` will be the same. This means both replies will be written to the same file. Looking at `gnupg._meta._encrypt`, we see how this is handled:\r\n\r\n```py\r\n        if output:\r\n            if getattr(output, 'fileno', None) is not None:\r\n                ## avoid overwrite confirmation message\r\n                if getattr(output, 'name', None) is not None:\r\n                    output_filename = output.name\r\n                    if os.path.exists(output.name):\r\n                        os.remove(output.name)\r\n                    #args.append('--output %s' % output.name)\r\n            else:\r\n                output_filename = output\r\n                if os.path.exists(output):\r\n                    os.remove(output)\r\n                #args.append('--output %s' % output)\r\n```\r\n\r\nNow, referencing [this StackOverflow answer](https://stackoverflow.com/a/28009230) and my own experimental evidence, ~~the removal will only happen after all file descriptors for the file are closed. Since the second thread will remove the file only to open it for writing immediately afterward, the file is actually removed after the second thread finishes writing.~~\r\n\r\n**Correction:** I don't know how I missed the presence of the file at first, but in this situation the second thread does actually create the file (specifically, `filename` exists and corresponds to the encrypted reply of the second thread, whereas the reply from the first thread simply vanishes). Now, back to analysis...\r\n\r\nRemember, this overlap does not necessarily happen, I just hypothesize that if the conditions for a race condition are satisfied as defined above, it is statistically likely this will happen.\r\n\r\nNow, we have to wonder what happens when we create our `Reply` object. Since a file will be accessible under the name `filename`, the initializer will succeed and each thread will be able to create a `Reply` object regardless if the the other thread has `commit()`ed yet or not. Both `commit()`s should succeed too, and we'll end up with two `Reply` objects added to the database, both of which pointing to the same `filename` that contains the reply from the second thread. Further, the first Journalist won't know their reply did not succeed.\r\n\r\nI won't go much further into the implications, but if this edge-case scenario were to take place, this might in turn cause a lot more problems, such as in the source `/lookup` view, where the source would see two copies of the second thread's reply.\r\n\r\nAs I stated in the beginning of this issue, the possible outcomes are difficult (maybe near impossible) to exhaustively enumerate. What I hope I've done is made a sufficient case for implementing some kind of locking or transactional mechanism here, or at least provided a sufficiently interesting scenario to lead to a thorough discussion that may or may not result in the implementation of such mechanisms. If I'm missing anything, misunderstanding anything, or you just think this is way too unlikely to ever happen in production, please let me know.", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/1728/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/1728/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/1722", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/1722/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/1722/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/1722/events", "html_url": "https://github.com/freedomofpress/securedrop/issues/1722", "id": 230494668, "node_id": "MDU6SXNzdWUyMzA0OTQ2Njg=", "number": 1722, "title": "Fix hard-coded local IPv4 addresses in staging tests", "user": {"login": "conorsch", "id": 657862, "node_id": "MDQ6VXNlcjY1Nzg2Mg==", "avatar_url": "https://avatars.githubusercontent.com/u/657862?v=4", "gravatar_id": "", "url": "https://api.github.com/users/conorsch", "html_url": "https://github.com/conorsch", "followers_url": "https://api.github.com/users/conorsch/followers", "following_url": "https://api.github.com/users/conorsch/following{/other_user}", "gists_url": "https://api.github.com/users/conorsch/gists{/gist_id}", "starred_url": "https://api.github.com/users/conorsch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/conorsch/subscriptions", "organizations_url": "https://api.github.com/users/conorsch/orgs", "repos_url": "https://api.github.com/users/conorsch/repos", "events_url": "https://api.github.com/users/conorsch/events{/privacy}", "received_events_url": "https://api.github.com/users/conorsch/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}, {"id": 475997849, "node_id": "MDU6TGFiZWw0NzU5OTc4NDk=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/tests", "name": "tests", "color": "f9d0c4", "default": false, "description": null}, {"id": 1320823996, "node_id": "MDU6TGFiZWwxMzIwODIzOTk2", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/good%20first%20issue", "name": "good first issue", "color": "ff479a", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/freedomofpress/securedrop/milestones/5", "html_url": "https://github.com/freedomofpress/securedrop/milestone/5", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/milestones/5/labels", "id": 691723, "node_id": "MDk6TWlsZXN0b25lNjkxNzIz", "number": 5, "title": "0.4", "description": "Resolve develop-master diff and smooth out release workflow", "creator": {"login": "garrettr", "id": 407302, "node_id": "MDQ6VXNlcjQwNzMwMg==", "avatar_url": "https://avatars.githubusercontent.com/u/407302?v=4", "gravatar_id": "", "url": "https://api.github.com/users/garrettr", "html_url": "https://github.com/garrettr", "followers_url": "https://api.github.com/users/garrettr/followers", "following_url": "https://api.github.com/users/garrettr/following{/other_user}", "gists_url": "https://api.github.com/users/garrettr/gists{/gist_id}", "starred_url": "https://api.github.com/users/garrettr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/garrettr/subscriptions", "organizations_url": "https://api.github.com/users/garrettr/orgs", "repos_url": "https://api.github.com/users/garrettr/repos", "events_url": "https://api.github.com/users/garrettr/events{/privacy}", "received_events_url": "https://api.github.com/users/garrettr/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 126, "state": "closed", "created_at": "2014-06-15T22:57:42Z", "updated_at": "2020-10-09T18:38:48Z", "due_on": "2017-07-11T07:00:00Z", "closed_at": "2017-07-31T22:15:38Z"}, "comments": 0, "created_at": "2017-05-22T19:29:05Z", "updated_at": "2019-05-16T21:42:27Z", "closed_at": "2017-05-22T22:43:04Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "During merge of #1709, there was a regression in the testinfra tests, so the hardcoded IPv4 addresses used in Vagrant VMs were overwritten with ephemeral IPv4 addresses for CI. Specifically the commt in question is 48db3f57528e69a3e7cbe2e337cec114192d54ef.\r\n\r\nWe'll need to modify the testinfra/vars/ files to use the old, local IPv4 addresses again.", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/1722/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/1722/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/1715", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/1715/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/1715/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/1715/events", "html_url": "https://github.com/freedomofpress/securedrop/issues/1715", "id": 229783996, "node_id": "MDU6SXNzdWUyMjk3ODM5OTY=", "number": 1715, "title": "Empty replies can be sent to a source", "user": {"login": "redshiftzero", "id": 7832803, "node_id": "MDQ6VXNlcjc4MzI4MDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7832803?v=4", "gravatar_id": "", "url": "https://api.github.com/users/redshiftzero", "html_url": "https://github.com/redshiftzero", "followers_url": "https://api.github.com/users/redshiftzero/followers", "following_url": "https://api.github.com/users/redshiftzero/following{/other_user}", "gists_url": "https://api.github.com/users/redshiftzero/gists{/gist_id}", "starred_url": "https://api.github.com/users/redshiftzero/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/redshiftzero/subscriptions", "organizations_url": "https://api.github.com/users/redshiftzero/orgs", "repos_url": "https://api.github.com/users/redshiftzero/repos", "events_url": "https://api.github.com/users/redshiftzero/events{/privacy}", "received_events_url": "https://api.github.com/users/redshiftzero/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/freedomofpress/securedrop/milestones/5", "html_url": "https://github.com/freedomofpress/securedrop/milestone/5", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/milestones/5/labels", "id": 691723, "node_id": "MDk6TWlsZXN0b25lNjkxNzIz", "number": 5, "title": "0.4", "description": "Resolve develop-master diff and smooth out release workflow", "creator": {"login": "garrettr", "id": 407302, "node_id": "MDQ6VXNlcjQwNzMwMg==", "avatar_url": "https://avatars.githubusercontent.com/u/407302?v=4", "gravatar_id": "", "url": "https://api.github.com/users/garrettr", "html_url": "https://github.com/garrettr", "followers_url": "https://api.github.com/users/garrettr/followers", "following_url": "https://api.github.com/users/garrettr/following{/other_user}", "gists_url": "https://api.github.com/users/garrettr/gists{/gist_id}", "starred_url": "https://api.github.com/users/garrettr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/garrettr/subscriptions", "organizations_url": "https://api.github.com/users/garrettr/orgs", "repos_url": "https://api.github.com/users/garrettr/repos", "events_url": "https://api.github.com/users/garrettr/events{/privacy}", "received_events_url": "https://api.github.com/users/garrettr/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 126, "state": "closed", "created_at": "2014-06-15T22:57:42Z", "updated_at": "2020-10-09T18:38:48Z", "due_on": "2017-07-11T07:00:00Z", "closed_at": "2017-07-31T22:15:38Z"}, "comments": 2, "created_at": "2017-05-18T19:44:49Z", "updated_at": "2017-05-31T22:02:34Z", "closed_at": "2017-05-31T22:01:58Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "# Steps to reproduce\r\n\r\n1. Provision development VM\r\n2. Submit some documents through the source interface.\r\n3. Create a journalist account.\r\n4. Click on a source.\r\n5. Attempt to send an empty reply.\r\n\r\n# What should happen\r\n\r\nA flashed message should appear indicating that text must be entered in the reply field.\r\n\r\n# What actually happens\r\n\r\nThe empty reply is uploaded.\r\n\r\n# Comment\r\n\r\nWhoever fixes this ideally should definitely write a functional or unit test to guard against future regressions.", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/1715/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/1715/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/1714", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/1714/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/1714/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/1714/events", "html_url": "https://github.com/freedomofpress/securedrop/issues/1714", "id": 229780541, "node_id": "MDU6SXNzdWUyMjk3ODA1NDE=", "number": 1714, "title": "File upload limit does not work in the development environment", "user": {"login": "redshiftzero", "id": 7832803, "node_id": "MDQ6VXNlcjc4MzI4MDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7832803?v=4", "gravatar_id": "", "url": "https://api.github.com/users/redshiftzero", "html_url": "https://github.com/redshiftzero", "followers_url": "https://api.github.com/users/redshiftzero/followers", "following_url": "https://api.github.com/users/redshiftzero/following{/other_user}", "gists_url": "https://api.github.com/users/redshiftzero/gists{/gist_id}", "starred_url": "https://api.github.com/users/redshiftzero/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/redshiftzero/subscriptions", "organizations_url": "https://api.github.com/users/redshiftzero/orgs", "repos_url": "https://api.github.com/users/redshiftzero/repos", "events_url": "https://api.github.com/users/redshiftzero/events{/privacy}", "received_events_url": "https://api.github.com/users/redshiftzero/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}, {"id": 192539755, "node_id": "MDU6TGFiZWwxOTI1Mzk3NTU=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/app", "name": "app", "color": "bfe5bf", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "garrettr", "id": 407302, "node_id": "MDQ6VXNlcjQwNzMwMg==", "avatar_url": "https://avatars.githubusercontent.com/u/407302?v=4", "gravatar_id": "", "url": "https://api.github.com/users/garrettr", "html_url": "https://github.com/garrettr", "followers_url": "https://api.github.com/users/garrettr/followers", "following_url": "https://api.github.com/users/garrettr/following{/other_user}", "gists_url": "https://api.github.com/users/garrettr/gists{/gist_id}", "starred_url": "https://api.github.com/users/garrettr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/garrettr/subscriptions", "organizations_url": "https://api.github.com/users/garrettr/orgs", "repos_url": "https://api.github.com/users/garrettr/repos", "events_url": "https://api.github.com/users/garrettr/events{/privacy}", "received_events_url": "https://api.github.com/users/garrettr/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "garrettr", "id": 407302, "node_id": "MDQ6VXNlcjQwNzMwMg==", "avatar_url": "https://avatars.githubusercontent.com/u/407302?v=4", "gravatar_id": "", "url": "https://api.github.com/users/garrettr", "html_url": "https://github.com/garrettr", "followers_url": "https://api.github.com/users/garrettr/followers", "following_url": "https://api.github.com/users/garrettr/following{/other_user}", "gists_url": "https://api.github.com/users/garrettr/gists{/gist_id}", "starred_url": "https://api.github.com/users/garrettr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/garrettr/subscriptions", "organizations_url": "https://api.github.com/users/garrettr/orgs", "repos_url": "https://api.github.com/users/garrettr/repos", "events_url": "https://api.github.com/users/garrettr/events{/privacy}", "received_events_url": "https://api.github.com/users/garrettr/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/freedomofpress/securedrop/milestones/5", "html_url": "https://github.com/freedomofpress/securedrop/milestone/5", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/milestones/5/labels", "id": 691723, "node_id": "MDk6TWlsZXN0b25lNjkxNzIz", "number": 5, "title": "0.4", "description": "Resolve develop-master diff and smooth out release workflow", "creator": {"login": "garrettr", "id": 407302, "node_id": "MDQ6VXNlcjQwNzMwMg==", "avatar_url": "https://avatars.githubusercontent.com/u/407302?v=4", "gravatar_id": "", "url": "https://api.github.com/users/garrettr", "html_url": "https://github.com/garrettr", "followers_url": "https://api.github.com/users/garrettr/followers", "following_url": "https://api.github.com/users/garrettr/following{/other_user}", "gists_url": "https://api.github.com/users/garrettr/gists{/gist_id}", "starred_url": "https://api.github.com/users/garrettr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/garrettr/subscriptions", "organizations_url": "https://api.github.com/users/garrettr/orgs", "repos_url": "https://api.github.com/users/garrettr/repos", "events_url": "https://api.github.com/users/garrettr/events{/privacy}", "received_events_url": "https://api.github.com/users/garrettr/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 126, "state": "closed", "created_at": "2014-06-15T22:57:42Z", "updated_at": "2020-10-09T18:38:48Z", "due_on": "2017-07-11T07:00:00Z", "closed_at": "2017-07-31T22:15:38Z"}, "comments": 12, "created_at": "2017-05-18T19:32:07Z", "updated_at": "2017-06-07T19:03:11Z", "closed_at": "2017-06-06T18:35:11Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "# Steps to reproduce\r\n\r\n1. Provision development VM\r\n2. Go to source interface\r\n3. Generate a codename\r\n4. Submit a >0.5 GB file\r\n\r\n# What should happen\r\n\r\nA flashed message should appear indicating that the file is too large for submission.\r\n\r\n# What actually happens\r\n\r\nThe file uploads.\r\n\r\n# Comment\r\n\r\nWhoever fixes this ideally should definitely write a functional or unit test to guard against future regressions.", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/1714/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/1714/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/1693", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/1693/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/1693/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/1693/events", "html_url": "https://github.com/freedomofpress/securedrop/issues/1693", "id": 227196011, "node_id": "MDU6SXNzdWUyMjcxOTYwMTE=", "number": 1693, "title": "Handle IntegrityError on /admin/add", "user": {"login": "redshiftzero", "id": 7832803, "node_id": "MDQ6VXNlcjc4MzI4MDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7832803?v=4", "gravatar_id": "", "url": "https://api.github.com/users/redshiftzero", "html_url": "https://github.com/redshiftzero", "followers_url": "https://api.github.com/users/redshiftzero/followers", "following_url": "https://api.github.com/users/redshiftzero/following{/other_user}", "gists_url": "https://api.github.com/users/redshiftzero/gists{/gist_id}", "starred_url": "https://api.github.com/users/redshiftzero/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/redshiftzero/subscriptions", "organizations_url": "https://api.github.com/users/redshiftzero/orgs", "repos_url": "https://api.github.com/users/redshiftzero/repos", "events_url": "https://api.github.com/users/redshiftzero/events{/privacy}", "received_events_url": "https://api.github.com/users/redshiftzero/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "psivesely", "id": 3538418, "node_id": "MDQ6VXNlcjM1Mzg0MTg=", "avatar_url": "https://avatars.githubusercontent.com/u/3538418?v=4", "gravatar_id": "", "url": "https://api.github.com/users/psivesely", "html_url": "https://github.com/psivesely", "followers_url": "https://api.github.com/users/psivesely/followers", "following_url": "https://api.github.com/users/psivesely/following{/other_user}", "gists_url": "https://api.github.com/users/psivesely/gists{/gist_id}", "starred_url": "https://api.github.com/users/psivesely/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/psivesely/subscriptions", "organizations_url": "https://api.github.com/users/psivesely/orgs", "repos_url": "https://api.github.com/users/psivesely/repos", "events_url": "https://api.github.com/users/psivesely/events{/privacy}", "received_events_url": "https://api.github.com/users/psivesely/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "psivesely", "id": 3538418, "node_id": "MDQ6VXNlcjM1Mzg0MTg=", "avatar_url": "https://avatars.githubusercontent.com/u/3538418?v=4", "gravatar_id": "", "url": "https://api.github.com/users/psivesely", "html_url": "https://github.com/psivesely", "followers_url": "https://api.github.com/users/psivesely/followers", "following_url": "https://api.github.com/users/psivesely/following{/other_user}", "gists_url": "https://api.github.com/users/psivesely/gists{/gist_id}", "starred_url": "https://api.github.com/users/psivesely/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/psivesely/subscriptions", "organizations_url": "https://api.github.com/users/psivesely/orgs", "repos_url": "https://api.github.com/users/psivesely/repos", "events_url": "https://api.github.com/users/psivesely/events{/privacy}", "received_events_url": "https://api.github.com/users/psivesely/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/freedomofpress/securedrop/milestones/5", "html_url": "https://github.com/freedomofpress/securedrop/milestone/5", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/milestones/5/labels", "id": 691723, "node_id": "MDk6TWlsZXN0b25lNjkxNzIz", "number": 5, "title": "0.4", "description": "Resolve develop-master diff and smooth out release workflow", "creator": {"login": "garrettr", "id": 407302, "node_id": "MDQ6VXNlcjQwNzMwMg==", "avatar_url": "https://avatars.githubusercontent.com/u/407302?v=4", "gravatar_id": "", "url": "https://api.github.com/users/garrettr", "html_url": "https://github.com/garrettr", "followers_url": "https://api.github.com/users/garrettr/followers", "following_url": "https://api.github.com/users/garrettr/following{/other_user}", "gists_url": "https://api.github.com/users/garrettr/gists{/gist_id}", "starred_url": "https://api.github.com/users/garrettr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/garrettr/subscriptions", "organizations_url": "https://api.github.com/users/garrettr/orgs", "repos_url": "https://api.github.com/users/garrettr/repos", "events_url": "https://api.github.com/users/garrettr/events{/privacy}", "received_events_url": "https://api.github.com/users/garrettr/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 126, "state": "closed", "created_at": "2014-06-15T22:57:42Z", "updated_at": "2020-10-09T18:38:48Z", "due_on": "2017-07-11T07:00:00Z", "closed_at": "2017-07-31T22:15:38Z"}, "comments": 0, "created_at": "2017-05-08T22:40:57Z", "updated_at": "2017-05-13T01:26:54Z", "closed_at": "2017-05-13T01:26:54Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "# Steps to reproduce\r\n\r\n1. Provision development VM\r\n2. Make an administrator account\r\n3. Sign in \r\n4. Click \"Admin\"\r\n5. Click \"Add user\" button\r\n6. Fill in the form, setting the username to username of an existing user\r\n7. Click \"Add user\"\r\n\r\n# What should happen\r\n\r\nIdeally a flashed message would appear saying \"That username is already in use\".\r\n\r\n# What actually happens\r\n\r\n![screen shot 2017-05-08 at 3 36 59 pm](https://cloud.githubusercontent.com/assets/7832803/25828322/68340ec0-3404-11e7-9fd4-10dc39bd0cc9.png)\r\n\r\n# Proposed Fix\r\n\r\nCatch the exception and flash the friendly error message as suggested above. Whoever fixes this ideally should also write a unit test to guard against future regressions.", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/1693/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/1693/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/1690", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/1690/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/1690/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/1690/events", "html_url": "https://github.com/freedomofpress/securedrop/issues/1690", "id": 226727931, "node_id": "MDU6SXNzdWUyMjY3Mjc5MzE=", "number": 1690, "title": "sqlalchemy.pool.NullPool warning and async ", "user": {"login": "psivesely", "id": 3538418, "node_id": "MDQ6VXNlcjM1Mzg0MTg=", "avatar_url": "https://avatars.githubusercontent.com/u/3538418?v=4", "gravatar_id": "", "url": "https://api.github.com/users/psivesely", "html_url": "https://github.com/psivesely", "followers_url": "https://api.github.com/users/psivesely/followers", "following_url": "https://api.github.com/users/psivesely/following{/other_user}", "gists_url": "https://api.github.com/users/psivesely/gists{/gist_id}", "starred_url": "https://api.github.com/users/psivesely/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/psivesely/subscriptions", "organizations_url": "https://api.github.com/users/psivesely/orgs", "repos_url": "https://api.github.com/users/psivesely/repos", "events_url": "https://api.github.com/users/psivesely/events{/privacy}", "received_events_url": "https://api.github.com/users/psivesely/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "psivesely", "id": 3538418, "node_id": "MDQ6VXNlcjM1Mzg0MTg=", "avatar_url": "https://avatars.githubusercontent.com/u/3538418?v=4", "gravatar_id": "", "url": "https://api.github.com/users/psivesely", "html_url": "https://github.com/psivesely", "followers_url": "https://api.github.com/users/psivesely/followers", "following_url": "https://api.github.com/users/psivesely/following{/other_user}", "gists_url": "https://api.github.com/users/psivesely/gists{/gist_id}", "starred_url": "https://api.github.com/users/psivesely/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/psivesely/subscriptions", "organizations_url": "https://api.github.com/users/psivesely/orgs", "repos_url": "https://api.github.com/users/psivesely/repos", "events_url": "https://api.github.com/users/psivesely/events{/privacy}", "received_events_url": "https://api.github.com/users/psivesely/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "psivesely", "id": 3538418, "node_id": "MDQ6VXNlcjM1Mzg0MTg=", "avatar_url": "https://avatars.githubusercontent.com/u/3538418?v=4", "gravatar_id": "", "url": "https://api.github.com/users/psivesely", "html_url": "https://github.com/psivesely", "followers_url": "https://api.github.com/users/psivesely/followers", "following_url": "https://api.github.com/users/psivesely/following{/other_user}", "gists_url": "https://api.github.com/users/psivesely/gists{/gist_id}", "starred_url": "https://api.github.com/users/psivesely/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/psivesely/subscriptions", "organizations_url": "https://api.github.com/users/psivesely/orgs", "repos_url": "https://api.github.com/users/psivesely/repos", "events_url": "https://api.github.com/users/psivesely/events{/privacy}", "received_events_url": "https://api.github.com/users/psivesely/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 5, "created_at": "2017-05-06T01:37:14Z", "updated_at": "2017-05-08T22:16:39Z", "closed_at": "2017-05-08T22:16:39Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "8 unit tests are reliably failing for me, even cloning the repo fresh and recreating a `development` VM. The failures kick off just as a warning, ` No handlers could be found for logger \"sqlalchemy.pool.NullPool\"`, is abruptly printed to stdout. All failures involve unit tests that wait for asynchronous tasks to complete. This is similar to https://github.com/freedomofpress/securedrop/issues/844#issuecomment-72277896.\r\n\r\n<details>\r\n  <summary>environment details</summary>\r\n% vagrant --version\r\n\r\nVagrant 1.9.1\r\n\r\n% vagrant plugin list\r\nvagrant-libvirt (0.0.40)\r\n\r\n% virsh --version\r\n3.0.0\r\n\r\n% vagrant box list\r\nbento/ubuntu-14.04 (libvirt, 2.3.1)\r\n</details>\r\n\r\n<details>\r\n  <summary>pytest output</summary>\r\nvagrant@development:/vagrant/securedrop$ pytest\r\n========================================================= test session starts ==========================================================\r\nplatform linux2 -- Python 2.7.6, pytest-3.0.3, py-1.4.31, pluggy-0.4.0\r\nrootdir: /vagrant, inifile: setup.cfg\r\nplugins: cov-2.4.0\r\ncollected 125 items\r\n\r\ntests/test_crypto_util.py .\r\ntests/test_db.py .......\r\ntests/test_integration.py No handlers could be found for logger \"sqlalchemy.pool.NullPool\"\r\nFF.F.FFFF.\r\ntests/test_journalist.py .......................F..........................................\r\ntests/test_manage.py .\r\ntests/test_source.py ......................\r\ntests/test_store.py ...\r\ntests/test_template_filters.py ..........\r\ntests/functional/test_admin_interface.py .\r\ntests/functional/test_submit_and_retrieve_file.py ...\r\ntests/functional/test_submit_and_retrieve_message.py .\r\n\r\n=============================================================== FAILURES ===============================================================\r\n________________________________________________ TestIntegration.test_delete_collection ________________________________________________\r\n\r\nself = <tests.test_integration.TestIntegration testMethod=test_delete_collection>\r\n\r\n    def test_delete_collection(self):\r\n        \"\"\"Test the \"delete collection\" button on each collection page\"\"\"\r\n        # first, add a source\r\n        self.source_app.get('/generate')\r\n        self.source_app.post('/create')\r\n        self.source_app.post('/submit', data=dict(\r\n            msg=\"This is a test.\",\r\n            fh=(StringIO(''), ''),\r\n        ), follow_redirects=True)\r\n\r\n        resp = self.journalist_app.get('/')\r\n        # navigate to the collection page\r\n        soup = BeautifulSoup(resp.data)\r\n        first_col_url = soup.select('ul#cols > li a')[0]['href']\r\n        resp = self.journalist_app.get(first_col_url)\r\n        self.assertEqual(resp.status_code, 200)\r\n\r\n        # find the delete form and extract the post parameters\r\n        soup = BeautifulSoup(resp.data)\r\n        delete_form_inputs = soup.select('form#delete_collection')[0]('input')\r\n        sid = delete_form_inputs[1]['value']\r\n        col_name = delete_form_inputs[2]['value']\r\n        resp = self.journalist_app.post('/col/delete/' + sid,\r\n                                      follow_redirects=True)\r\n        self.assertEquals(resp.status_code, 200)\r\n\r\n        self.assertIn(escape(\"%s's collection deleted\" % (col_name,)), resp.data)\r\n        self.assertIn(\"No documents have been submitted!\", resp.data)\r\n\r\n        # Make sure the collection is deleted from the filesystem\r\n        utils.async.wait_for_assertion(\r\n>           lambda: self.assertFalse(os.path.exists(store.path(sid)))\r\n        )\r\n\r\ntests/test_integration.py:442:\r\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\r\ntests/utils/async.py:47: in wait_for_assertion\r\n    return assertion_expression()\r\ntests/test_integration.py:442: in <lambda>\r\n    lambda: self.assertFalse(os.path.exists(store.path(sid)))\r\nE   AssertionError: True is not false\r\n--------------------------------------------------------- Captured stderr call ---------------------------------------------------------\r\n/usr/local/lib/python2.7/dist-packages/bs4/__init__.py:181: UserWarning: No parser was explicitly specified, so I'm using the best available HTML parser for this system (\"html5lib\"). This usually isn't a problem, but if you run this code on another system, or in a different virtual environment, it may use a different parser and behave differently.\r\n\r\nThe code that caused this warning is on line 11 of the file /usr/local/bin/pytest. To get rid of this warning, change code that looks like this:\r\n\r\n BeautifulSoup([your markup])\r\n\r\nto this:\r\n\r\n BeautifulSoup([your markup], \"html5lib\")\r\n\r\n  markup_type=markup_type))\r\n[2017-05-06 00:56:57,546] ERROR in source: async_genkey for source (sid=4NR6ULGYSP547VUN6N4BJHEQBA5LGJG7MU5PXKUSUPMSF3YEFJ22CSXSLLW5S4IOG5QXFOMT5MK4UROWTSN377XYPTTFCJCVVDOGCXA=): No row was found for one()\r\n_______________________________________________ TestIntegration.test_delete_collections ________________________________________________\r\n\r\nself = <tests.test_integration.TestIntegration testMethod=test_delete_collections>\r\n\r\n    def test_delete_collections(self):\r\n        \"\"\"Test the \"delete selected\" checkboxes on the index page that can be\r\n            used to delete multiple collections\"\"\"\r\n        # first, add some sources\r\n        num_sources = 2\r\n        for i in range(num_sources):\r\n            self.source_app.get('/generate')\r\n            self.source_app.post('/create')\r\n            self.source_app.post('/submit', data=dict(\r\n                msg=\"This is a test \" + str(i) + \".\",\r\n                fh=(StringIO(''), ''),\r\n            ), follow_redirects=True)\r\n            self.source_app.get('/logout')\r\n\r\n        resp = self.journalist_app.get('/')\r\n        # get all the checkbox values\r\n        soup = BeautifulSoup(resp.data)\r\n        checkbox_values = [checkbox['value'] for checkbox in\r\n                           soup.select('input[name=\"cols_selected\"]')]\r\n        resp = self.journalist_app.post('/col/process', data=dict(\r\n            action='delete',\r\n            cols_selected=checkbox_values\r\n        ), follow_redirects=True)\r\n        self.assertEqual(resp.status_code, 200)\r\n        self.assertIn(\"%s collections deleted\" % (num_sources,), resp.data)\r\n\r\n        # Make sure the collections are deleted from the filesystem\r\n>       utils.async.wait_for_assertion(lambda: self.assertFalse(\r\n            any([os.path.exists(store.path(sid)) for sid in checkbox_values])))\r\n\r\ntests/test_integration.py:472:\r\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\r\ntests/utils/async.py:47: in wait_for_assertion\r\n    return assertion_expression()\r\ntests/test_integration.py:473: in <lambda>\r\n    any([os.path.exists(store.path(sid)) for sid in checkbox_values])))\r\nE   AssertionError: True is not false\r\n--------------------------------------------------------- Captured stderr call ---------------------------------------------------------\r\n[2017-05-06 00:57:03,696] ERROR in source: async_genkey for source (sid=5XJTHIB47VYS72OVFBBUATNWDGQDXZCHAN3WLVOS4YO2JMXODNLRNM4PY5ZNUEZF52LTQS2JYXNDZGECPHOU6RRGMQXTQF5TUJGUV5Q=): No row was found for one()\r\n[2017-05-06 00:57:04,035] ERROR in source: async_genkey for source (sid=TAK74LXCGSUWESNLEYRMQXSNLMW4CNLRQZLBJXH3SNGC75XICQATSNR2DUMHRW65UXE3TIYYOD7U5PBSATRRD5J6ZE6Z42RNYGFPZXA=): No row was found for one()\r\n________________________________________________ TestIntegration.test_filenames_delete _________________________________________________\r\n\r\nself = <tests.test_integration.TestIntegration testMethod=test_filenames_delete>\r\n\r\n    def test_filenames_delete(self):\r\n        \"\"\"Test pretty, sequential filenames when journalist deletes files\"\"\"\r\n        # add a source and submit stuff\r\n        self.source_app.get('/generate')\r\n        self.source_app.post('/create')\r\n        self.helper_filenames_submit()\r\n\r\n        # navigate to the collection page\r\n        resp = self.journalist_app.get('/')\r\n        soup = BeautifulSoup(resp.data)\r\n        first_col_url = soup.select('ul#cols > li a')[0]['href']\r\n        resp = self.journalist_app.get(first_col_url)\r\n        self.assertEqual(resp.status_code, 200)\r\n        soup = BeautifulSoup(resp.data)\r\n\r\n        # delete file #2\r\n>       self.helper_filenames_delete(soup, 1)\r\n\r\ntests/test_integration.py:514:\r\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\r\ntests/test_integration.py:613: in helper_filenames_delete\r\n    utils.async.wait_for_assertion(lambda: self.assertFalse(\r\ntests/utils/async.py:47: in wait_for_assertion\r\n    return assertion_expression()\r\ntests/test_integration.py:614: in <lambda>\r\n    any([os.path.exists(store.path(sid, doc_name)) for doc_name in checkbox_values])))\r\nE   AssertionError: True is not false\r\n--------------------------------------------------------- Captured stderr call ---------------------------------------------------------\r\n[2017-05-06 00:57:10,621] ERROR in source: async_genkey for source (sid=EVFJWXWF2V2FDV36YZVIA4VTEEECVBZULE372EPVN7KLF4QUA53HMK73ISFOLDOAIDBB7DK3LJJOSQ67KPVKDQGGVNZ5BR55T6COLPQ=): No row was found for one()\r\n__________________________________________________ TestIntegration.test_reply_normal ___________________________________________________\r\n\r\nself = <tests.test_integration.TestIntegration testMethod=test_reply_normal>\r\n\r\n    def test_reply_normal(self):\r\n>       self.helper_test_reply(\"This is a test reply.\", True)\r\n\r\ntests/test_integration.py:235:\r\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\r\ntests/test_integration.py:377: in helper_test_reply\r\n    self.helper_filenames_delete(soup, last_reply_number)\r\ntests/test_integration.py:613: in helper_filenames_delete\r\n    utils.async.wait_for_assertion(lambda: self.assertFalse(\r\ntests/utils/async.py:47: in wait_for_assertion\r\n    return assertion_expression()\r\ntests/test_integration.py:614: in <lambda>\r\n    any([os.path.exists(store.path(sid, doc_name)) for doc_name in checkbox_values])))\r\nE   AssertionError: True is not false\r\n___________________________________________________ TestIntegration.test_submit_file ___________________________________________________\r\n\r\nself = <tests.test_integration.TestIntegration testMethod=test_submit_file>\r\n\r\n    def test_submit_file(self):\r\n        \"\"\"When a source creates an account, test that a new entry appears in the journalist interface\"\"\"\r\n        test_file_contents = \"This is a test file.\"\r\n        test_filename = \"test.txt\"\r\n\r\n        with self.source_app as source_app:\r\n            resp = source_app.get('/generate')\r\n            resp = source_app.post('/create', follow_redirects=True)\r\n            codename = session['codename']\r\n            sid = g.sid\r\n            # redirected to submission form\r\n            resp = self.source_app.post('/submit', data=dict(\r\n                msg=\"\",\r\n                fh=(StringIO(test_file_contents), test_filename),\r\n            ), follow_redirects=True)\r\n            self.assertEqual(resp.status_code, 200)\r\n            source_app.get('/logout')\r\n\r\n        resp = self.journalist_app.get('/')\r\n        self.assertEqual(resp.status_code, 200)\r\n        self.assertIn(\"Sources\", resp.data)\r\n        soup = BeautifulSoup(resp.data)\r\n\r\n        # The source should have a \"download unread\" link that says \"1 unread\"\r\n        col = soup.select('ul#cols > li')[0]\r\n        unread_span = col.select('span.unread a')[0]\r\n        self.assertIn(\"1 unread\", unread_span.get_text())\r\n\r\n        col_url = soup.select('ul#cols > li a')[0]['href']\r\n        resp = self.journalist_app.get(col_url)\r\n        self.assertEqual(resp.status_code, 200)\r\n        soup = BeautifulSoup(resp.data)\r\n        submission_url = soup.select('ul#submissions li a')[0]['href']\r\n        self.assertIn(\"-doc\", submission_url)\r\n        span = soup.select('ul#submissions li span.info span')[0]\r\n        self.assertRegexpMatches(span['title'], \"\\d+ bytes\")\r\n\r\n        resp = self.journalist_app.get(submission_url)\r\n        self.assertEqual(resp.status_code, 200)\r\n        decrypted_data = self.gpg.decrypt(resp.data)\r\n        self.assertTrue(decrypted_data.ok)\r\n\r\n        sio = StringIO(decrypted_data.data)\r\n        with gzip.GzipFile(mode='rb', fileobj=sio) as gzip_file:\r\n            unzipped_decrypted_data = gzip_file.read()\r\n        self.assertEqual(unzipped_decrypted_data, test_file_contents)\r\n\r\n        # delete submission\r\n        resp = self.journalist_app.get(col_url)\r\n        self.assertEqual(resp.status_code, 200)\r\n        soup = BeautifulSoup(resp.data)\r\n        doc_name = soup.select(\r\n            'ul > li > input[name=\"doc_names_selected\"]')[0]['value']\r\n        resp = self.journalist_app.post('/bulk', data=dict(\r\n            action='confirm_delete',\r\n            sid=sid,\r\n            doc_names_selected=doc_name\r\n        ))\r\n\r\n        self.assertEqual(resp.status_code, 200)\r\n        soup = BeautifulSoup(resp.data)\r\n        self.assertIn(\"The following file has been selected for\", resp.data)\r\n\r\n        # confirm delete submission\r\n        doc_name = soup.select\r\n        doc_name = soup.select(\r\n            'ul > li > input[name=\"doc_names_selected\"]')[0]['value']\r\n        resp = self.journalist_app.post('/bulk', data=dict(\r\n            action='delete',\r\n            sid=sid,\r\n            doc_names_selected=doc_name,\r\n        ), follow_redirects=True)\r\n        self.assertEqual(resp.status_code, 200)\r\n        soup = BeautifulSoup(resp.data)\r\n        self.assertIn(\"Submission deleted.\", resp.data)\r\n\r\n        # confirm that submission deleted and absent in list of submissions\r\n        resp = self.journalist_app.get(col_url)\r\n        self.assertEqual(resp.status_code, 200)\r\n        self.assertIn(\"No documents to display.\", resp.data)\r\n\r\n        # the file should be deleted from the filesystem\r\n        # since file deletion is handled by a polling worker, this test needs\r\n        # to wait for the worker to get the job and execute it\r\n        utils.async.wait_for_assertion(\r\n>           lambda: self.assertFalse(os.path.exists(store.path(sid, doc_name)))\r\n        )\r\n\r\ntests/test_integration.py:231:\r\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\r\ntests/utils/async.py:47: in wait_for_assertion\r\n    return assertion_expression()\r\ntests/test_integration.py:231: in <lambda>\r\n    lambda: self.assertFalse(os.path.exists(store.path(sid, doc_name)))\r\nE   AssertionError: True is not false\r\n_________________________________________________ TestIntegration.test_submit_message __________________________________________________\r\n\r\nself = <tests.test_integration.TestIntegration testMethod=test_submit_message>\r\n\r\n    def test_submit_message(self):\r\n        \"\"\"When a source creates an account, test that a new entry appears in the journalist interface\"\"\"\r\n        test_msg = \"This is a test message.\"\r\n\r\n        with self.source_app as source_app:\r\n            resp = source_app.get('/generate')\r\n            resp = source_app.post('/create', follow_redirects=True)\r\n            codename = session['codename']\r\n            sid = g.sid\r\n            # redirected to submission form\r\n            resp = self.source_app.post('/submit', data=dict(\r\n                msg=test_msg,\r\n                fh=(StringIO(''), ''),\r\n            ), follow_redirects=True)\r\n            self.assertEqual(resp.status_code, 200)\r\n            source_app.get('/logout')\r\n\r\n        # Request the Journalist Interface index\r\n        rv = self.journalist_app.get('/')\r\n        self.assertEqual(rv.status_code, 200)\r\n        self.assertIn(\"Sources\", rv.data)\r\n        soup = BeautifulSoup(rv.data)\r\n\r\n        # The source should have a \"download unread\" link that says \"1 unread\"\r\n        col = soup.select('ul#cols > li')[0]\r\n        unread_span = col.select('span.unread a')[0]\r\n        self.assertIn(\"1 unread\", unread_span.get_text())\r\n\r\n        col_url = soup.select('ul#cols > li a')[0]['href']\r\n        resp = self.journalist_app.get(col_url)\r\n        self.assertEqual(resp.status_code, 200)\r\n        soup = BeautifulSoup(resp.data)\r\n        submission_url = soup.select('ul#submissions li a')[0]['href']\r\n        self.assertIn(\"-msg\", submission_url)\r\n        span = soup.select('ul#submissions li span.info span')[0]\r\n        self.assertRegexpMatches(span['title'], \"\\d+ bytes\")\r\n\r\n        resp = self.journalist_app.get(submission_url)\r\n        self.assertEqual(resp.status_code, 200)\r\n        decrypted_data = self.gpg.decrypt(resp.data)\r\n        self.assertTrue(decrypted_data.ok)\r\n        self.assertEqual(decrypted_data.data, test_msg)\r\n\r\n        # delete submission\r\n        resp = self.journalist_app.get(col_url)\r\n        self.assertEqual(resp.status_code, 200)\r\n        soup = BeautifulSoup(resp.data)\r\n        doc_name = soup.select(\r\n            'ul > li > input[name=\"doc_names_selected\"]')[0]['value']\r\n        resp = self.journalist_app.post('/bulk', data=dict(\r\n            action='confirm_delete',\r\n            sid=sid,\r\n            doc_names_selected=doc_name\r\n        ))\r\n\r\n        self.assertEqual(resp.status_code, 200)\r\n        soup = BeautifulSoup(resp.data)\r\n        self.assertIn(\"The following file has been selected for\", resp.data)\r\n\r\n        # confirm delete submission\r\n        doc_name = soup.select\r\n        doc_name = soup.select(\r\n            'ul > li > input[name=\"doc_names_selected\"]')[0]['value']\r\n        resp = self.journalist_app.post('/bulk', data=dict(\r\n            action='delete',\r\n            sid=sid,\r\n            doc_names_selected=doc_name,\r\n        ), follow_redirects=True)\r\n        self.assertEqual(resp.status_code, 200)\r\n        soup = BeautifulSoup(resp.data)\r\n        self.assertIn(\"Submission deleted.\", resp.data)\r\n\r\n        # confirm that submission deleted and absent in list of submissions\r\n        resp = self.journalist_app.get(col_url)\r\n        self.assertEqual(resp.status_code, 200)\r\n        self.assertIn(\"No documents to display.\", resp.data)\r\n\r\n        # the file should be deleted from the filesystem\r\n        # since file deletion is handled by a polling worker, this test needs\r\n        # to wait for the worker to get the job and execute it\r\n        utils.async.wait_for_assertion(\r\n>           lambda: self.assertFalse(os.path.exists(store.path(sid, doc_name)))\r\n        )\r\n\r\ntests/test_integration.py:143:\r\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\r\ntests/utils/async.py:47: in wait_for_assertion\r\n    return assertion_expression()\r\ntests/test_integration.py:143: in <lambda>\r\n    lambda: self.assertFalse(os.path.exists(store.path(sid, doc_name)))\r\nE   AssertionError: True is not false\r\n___________________________________________ TestIntegration.test_unicode_reply_with_ansi_env ___________________________________________\r\n\r\nself = <tests.test_integration.TestIntegration testMethod=test_unicode_reply_with_ansi_env>\r\n\r\n    def test_unicode_reply_with_ansi_env(self):\r\n        # This makes python-gnupg handle encoding equivalent to if we were\r\n        # running SD in an environment where os.getenv(\"LANG\") == \"C\".\r\n        # Unfortunately, with the way our test suite is set up simply setting\r\n        # that env var here will not have the desired effect. Instead we\r\n        # monkey-patch the GPG object that is called crypto_util to imitate the\r\n        # _encoding attribute it would have had it been initialized in a \"C\"\r\n        # environment. See\r\n        # https://github.com/freedomofpress/securedrop/issues/1360 for context.\r\n        old_encoding = crypto_util.gpg._encoding\r\n        crypto_util.gpg._encoding = \"ansi_x3.4_1968\"\r\n        try:\r\n>           self.helper_test_reply(\"\u16a0\u16c7\u16bb\u16eb\u16d2\u16e6\u16a6\u16eb\u16a0\u16b1\u16a9\u16a0\u16a2\u16b1\u16eb\u16a0\u16c1\u16b1\u16aa\u16eb\u16b7\u16d6\u16bb\u16b9\u16e6\u16da\u16b3\u16a2\u16d7\", True)\r\n\r\ntests/test_integration.py:249:\r\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\r\ntests/test_integration.py:377: in helper_test_reply\r\n    self.helper_filenames_delete(soup, last_reply_number)\r\ntests/test_integration.py:613: in helper_filenames_delete\r\n    utils.async.wait_for_assertion(lambda: self.assertFalse(\r\ntests/utils/async.py:47: in wait_for_assertion\r\n    return assertion_expression()\r\ntests/test_integration.py:614: in <lambda>\r\n    any([os.path.exists(store.path(sid, doc_name)) for doc_name in checkbox_values])))\r\nE   AssertionError: True is not false\r\n______________________________________ TestJournalistApp.test_delete_source_deletes_docs_on_disk _______________________________________\r\n\r\nself = <tests.test_journalist.TestJournalistApp testMethod=test_delete_source_deletes_docs_on_disk>\r\n\r\n    def test_delete_source_deletes_docs_on_disk(self):\r\n        \"\"\"Verify that when a source is deleted, the encrypted documents that\r\n            exist on disk is also deleted.\"\"\"\r\n        self._delete_collection_setup()\r\n\r\n        # Encrypted documents exists\r\n        dir_source_docs = os.path.join(config.STORE_DIR, self.source.filesystem_id)\r\n        self.assertTrue(os.path.exists(dir_source_docs))\r\n\r\n        job = journalist.delete_collection(self.source.filesystem_id)\r\n\r\n        # Wait up to 5s to wait for Redis worker `srm` operation to complete\r\n>       utils.async.wait_for_redis_worker(job)\r\n\r\ntests/test_journalist.py:551:\r\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\r\n\r\njob = Job(u'd2cb03d9-8624-4e33-baac-401c212d4d3d', enqueued_at=datetime.datetime(2017, 5, 6, 0, 57, 58, 243655)), timeout = 5\r\n\r\n    def wait_for_redis_worker(job, timeout=5):\r\n        \"\"\"Raise an error if the Redis job doesn't complete successfully\r\n        before a timeout.\r\n\r\n        :param rq.job.Job job: A Redis job to wait for.\r\n\r\n        :param int timeout: Seconds to wait for the job to finish.\r\n\r\n        :raises: An :exc:`AssertionError`.\r\n        \"\"\"\r\n        start_time = time.time()\r\n        while time.time() - start_time < timeout:\r\n            if job.result == REDIS_SUCCESS_RETURN_VALUE:\r\n                return\r\n            elif job.result not in (None, REDIS_SUCCESS_RETURN_VALUE):\r\n                assert False, 'Redis worker failed!'\r\n            time.sleep(0.1)\r\n>       assert False, 'Redis worker timed out!'\r\nE       AssertionError: Redis worker timed out!\r\n\r\ntests/utils/async.py:27: AssertionError\r\n================================================ 8 failed, 117 passed in 184.81 seconds ================================================\r\n</details>", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/1690/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/1690/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/1687", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/1687/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/1687/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/1687/events", "html_url": "https://github.com/freedomofpress/securedrop/issues/1687", "id": 226438858, "node_id": "MDU6SXNzdWUyMjY0Mzg4NTg=", "number": 1687, "title": "Handle BadTokenException in /admin/2fa", "user": {"login": "redshiftzero", "id": 7832803, "node_id": "MDQ6VXNlcjc4MzI4MDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7832803?v=4", "gravatar_id": "", "url": "https://api.github.com/users/redshiftzero", "html_url": "https://github.com/redshiftzero", "followers_url": "https://api.github.com/users/redshiftzero/followers", "following_url": "https://api.github.com/users/redshiftzero/following{/other_user}", "gists_url": "https://api.github.com/users/redshiftzero/gists{/gist_id}", "starred_url": "https://api.github.com/users/redshiftzero/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/redshiftzero/subscriptions", "organizations_url": "https://api.github.com/users/redshiftzero/orgs", "repos_url": "https://api.github.com/users/redshiftzero/repos", "events_url": "https://api.github.com/users/redshiftzero/events{/privacy}", "received_events_url": "https://api.github.com/users/redshiftzero/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "psivesely", "id": 3538418, "node_id": "MDQ6VXNlcjM1Mzg0MTg=", "avatar_url": "https://avatars.githubusercontent.com/u/3538418?v=4", "gravatar_id": "", "url": "https://api.github.com/users/psivesely", "html_url": "https://github.com/psivesely", "followers_url": "https://api.github.com/users/psivesely/followers", "following_url": "https://api.github.com/users/psivesely/following{/other_user}", "gists_url": "https://api.github.com/users/psivesely/gists{/gist_id}", "starred_url": "https://api.github.com/users/psivesely/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/psivesely/subscriptions", "organizations_url": "https://api.github.com/users/psivesely/orgs", "repos_url": "https://api.github.com/users/psivesely/repos", "events_url": "https://api.github.com/users/psivesely/events{/privacy}", "received_events_url": "https://api.github.com/users/psivesely/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "psivesely", "id": 3538418, "node_id": "MDQ6VXNlcjM1Mzg0MTg=", "avatar_url": "https://avatars.githubusercontent.com/u/3538418?v=4", "gravatar_id": "", "url": "https://api.github.com/users/psivesely", "html_url": "https://github.com/psivesely", "followers_url": "https://api.github.com/users/psivesely/followers", "following_url": "https://api.github.com/users/psivesely/following{/other_user}", "gists_url": "https://api.github.com/users/psivesely/gists{/gist_id}", "starred_url": "https://api.github.com/users/psivesely/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/psivesely/subscriptions", "organizations_url": "https://api.github.com/users/psivesely/orgs", "repos_url": "https://api.github.com/users/psivesely/repos", "events_url": "https://api.github.com/users/psivesely/events{/privacy}", "received_events_url": "https://api.github.com/users/psivesely/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/freedomofpress/securedrop/milestones/5", "html_url": "https://github.com/freedomofpress/securedrop/milestone/5", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/milestones/5/labels", "id": 691723, "node_id": "MDk6TWlsZXN0b25lNjkxNzIz", "number": 5, "title": "0.4", "description": "Resolve develop-master diff and smooth out release workflow", "creator": {"login": "garrettr", "id": 407302, "node_id": "MDQ6VXNlcjQwNzMwMg==", "avatar_url": "https://avatars.githubusercontent.com/u/407302?v=4", "gravatar_id": "", "url": "https://api.github.com/users/garrettr", "html_url": "https://github.com/garrettr", "followers_url": "https://api.github.com/users/garrettr/followers", "following_url": "https://api.github.com/users/garrettr/following{/other_user}", "gists_url": "https://api.github.com/users/garrettr/gists{/gist_id}", "starred_url": "https://api.github.com/users/garrettr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/garrettr/subscriptions", "organizations_url": "https://api.github.com/users/garrettr/orgs", "repos_url": "https://api.github.com/users/garrettr/repos", "events_url": "https://api.github.com/users/garrettr/events{/privacy}", "received_events_url": "https://api.github.com/users/garrettr/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 126, "state": "closed", "created_at": "2014-06-15T22:57:42Z", "updated_at": "2020-10-09T18:38:48Z", "due_on": "2017-07-11T07:00:00Z", "closed_at": "2017-07-31T22:15:38Z"}, "comments": 0, "created_at": "2017-05-04T23:47:52Z", "updated_at": "2017-05-23T16:58:27Z", "closed_at": "2017-05-23T16:58:27Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "# Steps to reproduce\r\n\r\n1. Provision development VM\r\n2. Make an administrator account\r\n3. Sign in \r\n4. Click \"Admin\"\r\n5. Click \"Edit\" on the admin account\r\n6. Click \"Reset two factor authentication (Google Authenticator)\"\r\n7. Put in \"123456\" as the verification code\r\n8. Put in \"123456\" again as the verification code\r\n\r\n# What should happen\r\n\r\nIdeally a flashed message would appear saying \"Two factor token failed to verify\".\r\n\r\n# What actually happens\r\n\r\nThe `BadTokenException` in `Journalist.verify_token()` is not handled:\r\n\r\n![screen shot 2017-05-04 at 4 39 38 pm](https://cloud.githubusercontent.com/assets/7832803/25729191/a74188aa-30e8-11e7-868d-aad7e6852a48.png)\r\n\r\n# Proposed Fix\r\n\r\nCatch the exception and flash the friendly error message as suggested above. Whoever fixes this ideally should also write a unit test to guard against future regressions.", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/1687/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/1687/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/1620", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/1620/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/1620/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/1620/events", "html_url": "https://github.com/freedomofpress/securedrop/issues/1620", "id": 214463809, "node_id": "MDU6SXNzdWUyMTQ0NjM4MDk=", "number": 1620, "title": "Swapfile not really disabled", "user": {"login": "conorsch", "id": 657862, "node_id": "MDQ6VXNlcjY1Nzg2Mg==", "avatar_url": "https://avatars.githubusercontent.com/u/657862?v=4", "gravatar_id": "", "url": "https://api.github.com/users/conorsch", "html_url": "https://github.com/conorsch", "followers_url": "https://api.github.com/users/conorsch/followers", "following_url": "https://api.github.com/users/conorsch/following{/other_user}", "gists_url": "https://api.github.com/users/conorsch/gists{/gist_id}", "starred_url": "https://api.github.com/users/conorsch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/conorsch/subscriptions", "organizations_url": "https://api.github.com/users/conorsch/orgs", "repos_url": "https://api.github.com/users/conorsch/repos", "events_url": "https://api.github.com/users/conorsch/events{/privacy}", "received_events_url": "https://api.github.com/users/conorsch/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}, {"id": 192539287, "node_id": "MDU6TGFiZWwxOTI1MzkyODc=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/ops/deployment", "name": "ops/deployment", "color": "c7def8", "default": false, "description": null}, {"id": 192545295, "node_id": "MDU6TGFiZWwxOTI1NDUyOTU=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/security", "name": "security", "color": "bfdadc", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "conorsch", "id": 657862, "node_id": "MDQ6VXNlcjY1Nzg2Mg==", "avatar_url": "https://avatars.githubusercontent.com/u/657862?v=4", "gravatar_id": "", "url": "https://api.github.com/users/conorsch", "html_url": "https://github.com/conorsch", "followers_url": "https://api.github.com/users/conorsch/followers", "following_url": "https://api.github.com/users/conorsch/following{/other_user}", "gists_url": "https://api.github.com/users/conorsch/gists{/gist_id}", "starred_url": "https://api.github.com/users/conorsch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/conorsch/subscriptions", "organizations_url": "https://api.github.com/users/conorsch/orgs", "repos_url": "https://api.github.com/users/conorsch/repos", "events_url": "https://api.github.com/users/conorsch/events{/privacy}", "received_events_url": "https://api.github.com/users/conorsch/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "conorsch", "id": 657862, "node_id": "MDQ6VXNlcjY1Nzg2Mg==", "avatar_url": "https://avatars.githubusercontent.com/u/657862?v=4", "gravatar_id": "", "url": "https://api.github.com/users/conorsch", "html_url": "https://github.com/conorsch", "followers_url": "https://api.github.com/users/conorsch/followers", "following_url": "https://api.github.com/users/conorsch/following{/other_user}", "gists_url": "https://api.github.com/users/conorsch/gists{/gist_id}", "starred_url": "https://api.github.com/users/conorsch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/conorsch/subscriptions", "organizations_url": "https://api.github.com/users/conorsch/orgs", "repos_url": "https://api.github.com/users/conorsch/repos", "events_url": "https://api.github.com/users/conorsch/events{/privacy}", "received_events_url": "https://api.github.com/users/conorsch/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/freedomofpress/securedrop/milestones/21", "html_url": "https://github.com/freedomofpress/securedrop/milestone/21", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/milestones/21/labels", "id": 2388778, "node_id": "MDk6TWlsZXN0b25lMjM4ODc3OA==", "number": 21, "title": "0.3.12", "description": "Make sure swap is disabled.", "creator": {"login": "garrettr", "id": 407302, "node_id": "MDQ6VXNlcjQwNzMwMg==", "avatar_url": "https://avatars.githubusercontent.com/u/407302?v=4", "gravatar_id": "", "url": "https://api.github.com/users/garrettr", "html_url": "https://github.com/garrettr", "followers_url": "https://api.github.com/users/garrettr/followers", "following_url": "https://api.github.com/users/garrettr/following{/other_user}", "gists_url": "https://api.github.com/users/garrettr/gists{/gist_id}", "starred_url": "https://api.github.com/users/garrettr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/garrettr/subscriptions", "organizations_url": "https://api.github.com/users/garrettr/orgs", "repos_url": "https://api.github.com/users/garrettr/repos", "events_url": "https://api.github.com/users/garrettr/events{/privacy}", "received_events_url": "https://api.github.com/users/garrettr/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 1, "state": "closed", "created_at": "2017-03-15T19:16:40Z", "updated_at": "2017-04-24T19:31:37Z", "due_on": null, "closed_at": "2017-04-24T19:31:37Z"}, "comments": 4, "created_at": "2017-03-15T17:17:29Z", "updated_at": "2017-04-04T19:33:20Z", "closed_at": "2017-04-04T19:33:20Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "The Ansible config tries to disable swapfile on the Application and Monitor Servers, via `swapoff -a`. This works, but only for the current boot cycle. If a machine is configured with a swapfile in `/etc/fstab`, that swapfile will be restored on a subsequent reboot. Since the machines reboot nightly, the `swapoff -a` approach is close to useless.\r\n\r\nIn order to disable swap effectively, the first-run Ansible config should ensure that no swap entries exist in fstab, removing them if found. ", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/1620/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/1620/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/1614", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/1614/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/1614/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/1614/events", "html_url": "https://github.com/freedomofpress/securedrop/issues/1614", "id": 213486558, "node_id": "MDU6SXNzdWUyMTM0ODY1NTg=", "number": 1614, "title": "Investigate Document -> Journalist Interface renaming side-effects", "user": {"login": "conorsch", "id": 657862, "node_id": "MDQ6VXNlcjY1Nzg2Mg==", "avatar_url": "https://avatars.githubusercontent.com/u/657862?v=4", "gravatar_id": "", "url": "https://api.github.com/users/conorsch", "html_url": "https://github.com/conorsch", "followers_url": "https://api.github.com/users/conorsch/followers", "following_url": "https://api.github.com/users/conorsch/following{/other_user}", "gists_url": "https://api.github.com/users/conorsch/gists{/gist_id}", "starred_url": "https://api.github.com/users/conorsch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/conorsch/subscriptions", "organizations_url": "https://api.github.com/users/conorsch/orgs", "repos_url": "https://api.github.com/users/conorsch/repos", "events_url": "https://api.github.com/users/conorsch/events{/privacy}", "received_events_url": "https://api.github.com/users/conorsch/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "conorsch", "id": 657862, "node_id": "MDQ6VXNlcjY1Nzg2Mg==", "avatar_url": "https://avatars.githubusercontent.com/u/657862?v=4", "gravatar_id": "", "url": "https://api.github.com/users/conorsch", "html_url": "https://github.com/conorsch", "followers_url": "https://api.github.com/users/conorsch/followers", "following_url": "https://api.github.com/users/conorsch/following{/other_user}", "gists_url": "https://api.github.com/users/conorsch/gists{/gist_id}", "starred_url": "https://api.github.com/users/conorsch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/conorsch/subscriptions", "organizations_url": "https://api.github.com/users/conorsch/orgs", "repos_url": "https://api.github.com/users/conorsch/repos", "events_url": "https://api.github.com/users/conorsch/events{/privacy}", "received_events_url": "https://api.github.com/users/conorsch/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "conorsch", "id": 657862, "node_id": "MDQ6VXNlcjY1Nzg2Mg==", "avatar_url": "https://avatars.githubusercontent.com/u/657862?v=4", "gravatar_id": "", "url": "https://api.github.com/users/conorsch", "html_url": "https://github.com/conorsch", "followers_url": "https://api.github.com/users/conorsch/followers", "following_url": "https://api.github.com/users/conorsch/following{/other_user}", "gists_url": "https://api.github.com/users/conorsch/gists{/gist_id}", "starred_url": "https://api.github.com/users/conorsch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/conorsch/subscriptions", "organizations_url": "https://api.github.com/users/conorsch/orgs", "repos_url": "https://api.github.com/users/conorsch/repos", "events_url": "https://api.github.com/users/conorsch/events{/privacy}", "received_events_url": "https://api.github.com/users/conorsch/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/freedomofpress/securedrop/milestones/5", "html_url": "https://github.com/freedomofpress/securedrop/milestone/5", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/milestones/5/labels", "id": 691723, "node_id": "MDk6TWlsZXN0b25lNjkxNzIz", "number": 5, "title": "0.4", "description": "Resolve develop-master diff and smooth out release workflow", "creator": {"login": "garrettr", "id": 407302, "node_id": "MDQ6VXNlcjQwNzMwMg==", "avatar_url": "https://avatars.githubusercontent.com/u/407302?v=4", "gravatar_id": "", "url": "https://api.github.com/users/garrettr", "html_url": "https://github.com/garrettr", "followers_url": "https://api.github.com/users/garrettr/followers", "following_url": "https://api.github.com/users/garrettr/following{/other_user}", "gists_url": "https://api.github.com/users/garrettr/gists{/gist_id}", "starred_url": "https://api.github.com/users/garrettr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/garrettr/subscriptions", "organizations_url": "https://api.github.com/users/garrettr/orgs", "repos_url": "https://api.github.com/users/garrettr/repos", "events_url": "https://api.github.com/users/garrettr/events{/privacy}", "received_events_url": "https://api.github.com/users/garrettr/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 126, "state": "closed", "created_at": "2014-06-15T22:57:42Z", "updated_at": "2020-10-09T18:38:48Z", "due_on": "2017-07-11T07:00:00Z", "closed_at": "2017-07-31T22:15:38Z"}, "comments": 5, "created_at": "2017-03-11T00:17:48Z", "updated_at": "2017-04-24T23:18:52Z", "closed_at": "2017-04-24T23:18:52Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "In #1395 the \"Document Interface\" was renamed to \"Journalist Interface\". There are a few problems with the current implementation, chiefly that there's no migration strategy in place for currently running instances. \r\n\r\nIf we ship that change to the Ansible playbooks, then production instances will generate a new Authenticated Tor Hidden Services (ATHS) on next run, and lock out Journalists from the interface by updating the Apache vhost to listen to the _new_ service, using a HidServAuth value that Journalists won't have on their workstations.\r\n\r\nCurrently the `app-prod` machine is broken in the develop branch, and fails during the provisioning run, due to the AppArmor profile changes dropping support for the old vhost file. That kind of makes sense: the prod machines install from the FPF apt repo, and changes in e.g. #1464 are intended to provide a more robust staging environment that would allow for testing the new changes. It makes running app-prod impossible right now, though, which has terrible implications for pre-release testing.\r\n\r\nSo the question becomes: do we want to commit to the rename and write migration tasks, or back out the changes to simplify the scope of the 0.4 release?", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/1614/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/1614/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/1610", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/1610/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/1610/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/1610/events", "html_url": "https://github.com/freedomofpress/securedrop/issues/1610", "id": 212862462, "node_id": "MDU6SXNzdWUyMTI4NjI0NjI=", "number": 1610, "title": "Test database teardown is not done correctly", "user": {"login": "psivesely", "id": 3538418, "node_id": "MDQ6VXNlcjM1Mzg0MTg=", "avatar_url": "https://avatars.githubusercontent.com/u/3538418?v=4", "gravatar_id": "", "url": "https://api.github.com/users/psivesely", "html_url": "https://github.com/psivesely", "followers_url": "https://api.github.com/users/psivesely/followers", "following_url": "https://api.github.com/users/psivesely/following{/other_user}", "gists_url": "https://api.github.com/users/psivesely/gists{/gist_id}", "starred_url": "https://api.github.com/users/psivesely/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/psivesely/subscriptions", "organizations_url": "https://api.github.com/users/psivesely/orgs", "repos_url": "https://api.github.com/users/psivesely/repos", "events_url": "https://api.github.com/users/psivesely/events{/privacy}", "received_events_url": "https://api.github.com/users/psivesely/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}, {"id": 475997849, "node_id": "MDU6TGFiZWw0NzU5OTc4NDk=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/tests", "name": "tests", "color": "f9d0c4", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "psivesely", "id": 3538418, "node_id": "MDQ6VXNlcjM1Mzg0MTg=", "avatar_url": "https://avatars.githubusercontent.com/u/3538418?v=4", "gravatar_id": "", "url": "https://api.github.com/users/psivesely", "html_url": "https://github.com/psivesely", "followers_url": "https://api.github.com/users/psivesely/followers", "following_url": "https://api.github.com/users/psivesely/following{/other_user}", "gists_url": "https://api.github.com/users/psivesely/gists{/gist_id}", "starred_url": "https://api.github.com/users/psivesely/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/psivesely/subscriptions", "organizations_url": "https://api.github.com/users/psivesely/orgs", "repos_url": "https://api.github.com/users/psivesely/repos", "events_url": "https://api.github.com/users/psivesely/events{/privacy}", "received_events_url": "https://api.github.com/users/psivesely/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "psivesely", "id": 3538418, "node_id": "MDQ6VXNlcjM1Mzg0MTg=", "avatar_url": "https://avatars.githubusercontent.com/u/3538418?v=4", "gravatar_id": "", "url": "https://api.github.com/users/psivesely", "html_url": "https://github.com/psivesely", "followers_url": "https://api.github.com/users/psivesely/followers", "following_url": "https://api.github.com/users/psivesely/following{/other_user}", "gists_url": "https://api.github.com/users/psivesely/gists{/gist_id}", "starred_url": "https://api.github.com/users/psivesely/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/psivesely/subscriptions", "organizations_url": "https://api.github.com/users/psivesely/orgs", "repos_url": "https://api.github.com/users/psivesely/repos", "events_url": "https://api.github.com/users/psivesely/events{/privacy}", "received_events_url": "https://api.github.com/users/psivesely/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/freedomofpress/securedrop/milestones/5", "html_url": "https://github.com/freedomofpress/securedrop/milestone/5", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/milestones/5/labels", "id": 691723, "node_id": "MDk6TWlsZXN0b25lNjkxNzIz", "number": 5, "title": "0.4", "description": "Resolve develop-master diff and smooth out release workflow", "creator": {"login": "garrettr", "id": 407302, "node_id": "MDQ6VXNlcjQwNzMwMg==", "avatar_url": "https://avatars.githubusercontent.com/u/407302?v=4", "gravatar_id": "", "url": "https://api.github.com/users/garrettr", "html_url": "https://github.com/garrettr", "followers_url": "https://api.github.com/users/garrettr/followers", "following_url": "https://api.github.com/users/garrettr/following{/other_user}", "gists_url": "https://api.github.com/users/garrettr/gists{/gist_id}", "starred_url": "https://api.github.com/users/garrettr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/garrettr/subscriptions", "organizations_url": "https://api.github.com/users/garrettr/orgs", "repos_url": "https://api.github.com/users/garrettr/repos", "events_url": "https://api.github.com/users/garrettr/events{/privacy}", "received_events_url": "https://api.github.com/users/garrettr/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 126, "state": "closed", "created_at": "2014-06-15T22:57:42Z", "updated_at": "2020-10-09T18:38:48Z", "due_on": "2017-07-11T07:00:00Z", "closed_at": "2017-07-31T22:15:38Z"}, "comments": 0, "created_at": "2017-03-08T21:30:20Z", "updated_at": "2017-03-23T16:58:06Z", "closed_at": "2017-03-23T16:58:06Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "For our `TestCase`s we generally call the following functions from `tests.utils.env` in the `setUp` and `tearDown` methods:\r\n\r\n```py\r\ndef setup():\r\n    \"\"\"Set up the file system, GPG, and database.\"\"\"\r\n    create_directories()\r\n    init_gpg()\r\n    init_db()\r\n    # Do tests that should always run on app startup\r\n    crypto_util.do_runtime_tests()\r\n    # Start the Python-RQ worker if it's not already running\r\n    if not os.path.exists(TEST_WORKER_PIDFILE):\r\n        subprocess.Popen([\"rqworker\",\r\n                          \"-P\", config.SECUREDROP_ROOT,\r\n                          \"--pid\", TEST_WORKER_PIDFILE])\r\n\r\n\r\ndef teardown():\r\n    shutil.rmtree(config.SECUREDROP_DATA_ROOT)\r\n```\r\n\r\nAs you can see, we basically just blow away the test data root. Surprisingly, this has been sufficient to get all our tests passing. Working on my `encrypted-at-rest-tagging` branch I discovered that this approach is actually pretty problematic. For example, in the code below the second test will fail with an `ObjectDeletedError` when `self.admin.db_key_salt` is accessed unless you comment out the first. This is because after the database has been deleted and re-created once, we're still using the same session, engine, and connection, which seems to be the problem. I tried playing around with `sqlalchemy.inspect` to get a better idea of the problem and also refreshing and expiring the session, but don't have any particular successful results to share. I think more important than getting a strong handle of exactly what the problem is considering the complexity of the SQLAlchemy package, that we just follow best practices outlined in their documentation such as http://docs.sqlalchemy.org/en/latest/orm/session_transaction.html#joining-a-session-into-an-external-transaction-such-as-for-test-suites. \r\n\r\n```py\r\nclass TestColumnEncryption(unittest.TestCase):\r\n    def setUp(self):\r\n        env.setup()\r\n        self.db_key = crypto_util.gen_db_key()\r\n        self.admin, self.admin_pw = \\\r\n                db_helper.init_journalist(is_admin=True, db_key=self.db_key)\r\n        self.source, _ = db_helper.init_source()\r\n\r\n    def tearDown(self):\r\n        env.teardown()\r\n\r\n    def test_decrypt_db_key(self):\r\n        self.assertEqual(self.admin.decrypt_db_key(self.admin_pw), self.db_key)\r\n\r\n    def test_decrypt_db_key_after_password_change(self):\r\n        old_salt = self.admin.db_key_salt\r\n        old_encrypted_db_key = self.admin.encrypted_db_key\r\n        new_pw = crypto_util.genrandomid()\r\n        self.admin.set_password(new_pw, db_key=self.db_key)\r\n        new_salt = self.admin.db_key_salt\r\n        new_encrypted_db_key = self.admin.encrypted_db_key\r\n\r\n        self.assertNotEqual(self.admin.decrypt_db_key(self.admin_pw), self.db_key)\r\n        self.assertEqual(self.admin.decrypt_db_key(new_pw), self.db_key)\r\n        self.assertNotEqual(old_salt, new_salt)\r\n        self.assertNotEqual(old_encrypted_db_key, new_encrypted_db_key)\r\n```", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/1610/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/1610/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/1597", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/1597/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/1597/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/1597/events", "html_url": "https://github.com/freedomofpress/securedrop/issues/1597", "id": 211248689, "node_id": "MDU6SXNzdWUyMTEyNDg2ODk=", "number": 1597, "title": "Reset 2FA buttons in the `/admin/edit/<int:user_id>` view are way out of alignment", "user": {"login": "psivesely", "id": 3538418, "node_id": "MDQ6VXNlcjM1Mzg0MTg=", "avatar_url": "https://avatars.githubusercontent.com/u/3538418?v=4", "gravatar_id": "", "url": "https://api.github.com/users/psivesely", "html_url": "https://github.com/psivesely", "followers_url": "https://api.github.com/users/psivesely/followers", "following_url": "https://api.github.com/users/psivesely/following{/other_user}", "gists_url": "https://api.github.com/users/psivesely/gists{/gist_id}", "starred_url": "https://api.github.com/users/psivesely/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/psivesely/subscriptions", "organizations_url": "https://api.github.com/users/psivesely/orgs", "repos_url": "https://api.github.com/users/psivesely/repos", "events_url": "https://api.github.com/users/psivesely/events{/privacy}", "received_events_url": "https://api.github.com/users/psivesely/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}, {"id": 475977470, "node_id": "MDU6TGFiZWw0NzU5Nzc0NzA=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/journalist%20interface%20(JI)", "name": "journalist interface (JI)", "color": "f9d0c4", "default": false, "description": ""}, {"id": 520554056, "node_id": "MDU6TGFiZWw1MjA1NTQwNTY=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/UX", "name": "UX", "color": "5319e7", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "psivesely", "id": 3538418, "node_id": "MDQ6VXNlcjM1Mzg0MTg=", "avatar_url": "https://avatars.githubusercontent.com/u/3538418?v=4", "gravatar_id": "", "url": "https://api.github.com/users/psivesely", "html_url": "https://github.com/psivesely", "followers_url": "https://api.github.com/users/psivesely/followers", "following_url": "https://api.github.com/users/psivesely/following{/other_user}", "gists_url": "https://api.github.com/users/psivesely/gists{/gist_id}", "starred_url": "https://api.github.com/users/psivesely/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/psivesely/subscriptions", "organizations_url": "https://api.github.com/users/psivesely/orgs", "repos_url": "https://api.github.com/users/psivesely/repos", "events_url": "https://api.github.com/users/psivesely/events{/privacy}", "received_events_url": "https://api.github.com/users/psivesely/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "psivesely", "id": 3538418, "node_id": "MDQ6VXNlcjM1Mzg0MTg=", "avatar_url": "https://avatars.githubusercontent.com/u/3538418?v=4", "gravatar_id": "", "url": "https://api.github.com/users/psivesely", "html_url": "https://github.com/psivesely", "followers_url": "https://api.github.com/users/psivesely/followers", "following_url": "https://api.github.com/users/psivesely/following{/other_user}", "gists_url": "https://api.github.com/users/psivesely/gists{/gist_id}", "starred_url": "https://api.github.com/users/psivesely/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/psivesely/subscriptions", "organizations_url": "https://api.github.com/users/psivesely/orgs", "repos_url": "https://api.github.com/users/psivesely/repos", "events_url": "https://api.github.com/users/psivesely/events{/privacy}", "received_events_url": "https://api.github.com/users/psivesely/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/freedomofpress/securedrop/milestones/5", "html_url": "https://github.com/freedomofpress/securedrop/milestone/5", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/milestones/5/labels", "id": 691723, "node_id": "MDk6TWlsZXN0b25lNjkxNzIz", "number": 5, "title": "0.4", "description": "Resolve develop-master diff and smooth out release workflow", "creator": {"login": "garrettr", "id": 407302, "node_id": "MDQ6VXNlcjQwNzMwMg==", "avatar_url": "https://avatars.githubusercontent.com/u/407302?v=4", "gravatar_id": "", "url": "https://api.github.com/users/garrettr", "html_url": "https://github.com/garrettr", "followers_url": "https://api.github.com/users/garrettr/followers", "following_url": "https://api.github.com/users/garrettr/following{/other_user}", "gists_url": "https://api.github.com/users/garrettr/gists{/gist_id}", "starred_url": "https://api.github.com/users/garrettr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/garrettr/subscriptions", "organizations_url": "https://api.github.com/users/garrettr/orgs", "repos_url": "https://api.github.com/users/garrettr/repos", "events_url": "https://api.github.com/users/garrettr/events{/privacy}", "received_events_url": "https://api.github.com/users/garrettr/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 126, "state": "closed", "created_at": "2014-06-15T22:57:42Z", "updated_at": "2020-10-09T18:38:48Z", "due_on": "2017-07-11T07:00:00Z", "closed_at": "2017-07-31T22:15:38Z"}, "comments": 0, "created_at": "2017-03-02T00:04:47Z", "updated_at": "2017-04-20T20:52:02Z", "closed_at": "2017-04-20T20:52:02Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "The reset TOTP button is not justified left and there is no div before the reset TOTP and HOTP buttons as there is in the `/account` view. This would be a good time to DRY out the templates here by making a single template for these two views. There is no security risk in doing so as we rely on the `@login_required` decorator, not choice of template, which is irrelevant if you know the right URL to send the right HTTP request to because you've read the SD source. Obviously, the template would not show the admin-only capabilities to the non-admin users, as a matter of design, not security.", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/1597/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/1597/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/1593", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/1593/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/1593/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/1593/events", "html_url": "https://github.com/freedomofpress/securedrop/issues/1593", "id": 210958155, "node_id": "MDU6SXNzdWUyMTA5NTgxNTU=", "number": 1593, "title": "Color of the hover-to-show/hide codename button should match the rest of the blue in the lookup view", "user": {"login": "psivesely", "id": 3538418, "node_id": "MDQ6VXNlcjM1Mzg0MTg=", "avatar_url": "https://avatars.githubusercontent.com/u/3538418?v=4", "gravatar_id": "", "url": "https://api.github.com/users/psivesely", "html_url": "https://github.com/psivesely", "followers_url": "https://api.github.com/users/psivesely/followers", "following_url": "https://api.github.com/users/psivesely/following{/other_user}", "gists_url": "https://api.github.com/users/psivesely/gists{/gist_id}", "starred_url": "https://api.github.com/users/psivesely/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/psivesely/subscriptions", "organizations_url": "https://api.github.com/users/psivesely/orgs", "repos_url": "https://api.github.com/users/psivesely/repos", "events_url": "https://api.github.com/users/psivesely/events{/privacy}", "received_events_url": "https://api.github.com/users/psivesely/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}, {"id": 475977399, "node_id": "MDU6TGFiZWw0NzU5NzczOTk=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/source%20interface%20(SI)", "name": "source interface (SI)", "color": "f9d0c4", "default": false, "description": ""}, {"id": 520554056, "node_id": "MDU6TGFiZWw1MjA1NTQwNTY=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/UX", "name": "UX", "color": "5319e7", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "psivesely", "id": 3538418, "node_id": "MDQ6VXNlcjM1Mzg0MTg=", "avatar_url": "https://avatars.githubusercontent.com/u/3538418?v=4", "gravatar_id": "", "url": "https://api.github.com/users/psivesely", "html_url": "https://github.com/psivesely", "followers_url": "https://api.github.com/users/psivesely/followers", "following_url": "https://api.github.com/users/psivesely/following{/other_user}", "gists_url": "https://api.github.com/users/psivesely/gists{/gist_id}", "starred_url": "https://api.github.com/users/psivesely/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/psivesely/subscriptions", "organizations_url": "https://api.github.com/users/psivesely/orgs", "repos_url": "https://api.github.com/users/psivesely/repos", "events_url": "https://api.github.com/users/psivesely/events{/privacy}", "received_events_url": "https://api.github.com/users/psivesely/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "psivesely", "id": 3538418, "node_id": "MDQ6VXNlcjM1Mzg0MTg=", "avatar_url": "https://avatars.githubusercontent.com/u/3538418?v=4", "gravatar_id": "", "url": "https://api.github.com/users/psivesely", "html_url": "https://github.com/psivesely", "followers_url": "https://api.github.com/users/psivesely/followers", "following_url": "https://api.github.com/users/psivesely/following{/other_user}", "gists_url": "https://api.github.com/users/psivesely/gists{/gist_id}", "starred_url": "https://api.github.com/users/psivesely/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/psivesely/subscriptions", "organizations_url": "https://api.github.com/users/psivesely/orgs", "repos_url": "https://api.github.com/users/psivesely/repos", "events_url": "https://api.github.com/users/psivesely/events{/privacy}", "received_events_url": "https://api.github.com/users/psivesely/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/freedomofpress/securedrop/milestones/5", "html_url": "https://github.com/freedomofpress/securedrop/milestone/5", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/milestones/5/labels", "id": 691723, "node_id": "MDk6TWlsZXN0b25lNjkxNzIz", "number": 5, "title": "0.4", "description": "Resolve develop-master diff and smooth out release workflow", "creator": {"login": "garrettr", "id": 407302, "node_id": "MDQ6VXNlcjQwNzMwMg==", "avatar_url": "https://avatars.githubusercontent.com/u/407302?v=4", "gravatar_id": "", "url": "https://api.github.com/users/garrettr", "html_url": "https://github.com/garrettr", "followers_url": "https://api.github.com/users/garrettr/followers", "following_url": "https://api.github.com/users/garrettr/following{/other_user}", "gists_url": "https://api.github.com/users/garrettr/gists{/gist_id}", "starred_url": "https://api.github.com/users/garrettr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/garrettr/subscriptions", "organizations_url": "https://api.github.com/users/garrettr/orgs", "repos_url": "https://api.github.com/users/garrettr/repos", "events_url": "https://api.github.com/users/garrettr/events{/privacy}", "received_events_url": "https://api.github.com/users/garrettr/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 126, "state": "closed", "created_at": "2014-06-15T22:57:42Z", "updated_at": "2020-10-09T18:38:48Z", "due_on": "2017-07-11T07:00:00Z", "closed_at": "2017-07-31T22:15:38Z"}, "comments": 0, "created_at": "2017-03-01T02:01:33Z", "updated_at": "2017-03-14T18:06:05Z", "closed_at": "2017-03-14T18:06:05Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Currently it's a brighter blue than the rest of the page and that looks bad.", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/1593/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/1593/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/1571", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/1571/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/1571/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/1571/events", "html_url": "https://github.com/freedomofpress/securedrop/issues/1571", "id": 206799088, "node_id": "MDU6SXNzdWUyMDY3OTkwODg=", "number": 1571, "title": "Change delete/download text on Journalist interface", "user": {"login": "heartsucker", "id": 3998464, "node_id": "MDQ6VXNlcjM5OTg0NjQ=", "avatar_url": "https://avatars.githubusercontent.com/u/3998464?v=4", "gravatar_id": "", "url": "https://api.github.com/users/heartsucker", "html_url": "https://github.com/heartsucker", "followers_url": "https://api.github.com/users/heartsucker/followers", "following_url": "https://api.github.com/users/heartsucker/following{/other_user}", "gists_url": "https://api.github.com/users/heartsucker/gists{/gist_id}", "starred_url": "https://api.github.com/users/heartsucker/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/heartsucker/subscriptions", "organizations_url": "https://api.github.com/users/heartsucker/orgs", "repos_url": "https://api.github.com/users/heartsucker/repos", "events_url": "https://api.github.com/users/heartsucker/events{/privacy}", "received_events_url": "https://api.github.com/users/heartsucker/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}, {"id": 475977470, "node_id": "MDU6TGFiZWw0NzU5Nzc0NzA=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/journalist%20interface%20(JI)", "name": "journalist interface (JI)", "color": "f9d0c4", "default": false, "description": ""}, {"id": 520554056, "node_id": "MDU6TGFiZWw1MjA1NTQwNTY=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/UX", "name": "UX", "color": "5319e7", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/freedomofpress/securedrop/milestones/5", "html_url": "https://github.com/freedomofpress/securedrop/milestone/5", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/milestones/5/labels", "id": 691723, "node_id": "MDk6TWlsZXN0b25lNjkxNzIz", "number": 5, "title": "0.4", "description": "Resolve develop-master diff and smooth out release workflow", "creator": {"login": "garrettr", "id": 407302, "node_id": "MDQ6VXNlcjQwNzMwMg==", "avatar_url": "https://avatars.githubusercontent.com/u/407302?v=4", "gravatar_id": "", "url": "https://api.github.com/users/garrettr", "html_url": "https://github.com/garrettr", "followers_url": "https://api.github.com/users/garrettr/followers", "following_url": "https://api.github.com/users/garrettr/following{/other_user}", "gists_url": "https://api.github.com/users/garrettr/gists{/gist_id}", "starred_url": "https://api.github.com/users/garrettr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/garrettr/subscriptions", "organizations_url": "https://api.github.com/users/garrettr/orgs", "repos_url": "https://api.github.com/users/garrettr/repos", "events_url": "https://api.github.com/users/garrettr/events{/privacy}", "received_events_url": "https://api.github.com/users/garrettr/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 126, "state": "closed", "created_at": "2014-06-15T22:57:42Z", "updated_at": "2020-10-09T18:38:48Z", "due_on": "2017-07-11T07:00:00Z", "closed_at": "2017-07-31T22:15:38Z"}, "comments": 1, "created_at": "2017-02-10T13:43:23Z", "updated_at": "2017-04-06T17:24:26Z", "closed_at": "2017-04-06T17:24:26Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "As per the comment from @redshiftzero here https://github.com/freedomofpress/securedrop/pull/1538#issuecomment-277539051:\r\n\r\nChange the buttons that say `Download` and `Delete` to say say `Download Selected` and `Delete Selected` when JS is disabled. Optionally, leave as is when JS is enabled. This may be superseded by additional UI changes that I may have seen in @ninavizz's mock ups.", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/1571/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/1571/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/1562", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/1562/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/1562/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/1562/events", "html_url": "https://github.com/freedomofpress/securedrop/issues/1562", "id": 205662613, "node_id": "MDU6SXNzdWUyMDU2NjI2MTM=", "number": 1562, "title": "Prevent admin journalists from deleting themselves", "user": {"login": "heartsucker", "id": 3998464, "node_id": "MDQ6VXNlcjM5OTg0NjQ=", "avatar_url": "https://avatars.githubusercontent.com/u/3998464?v=4", "gravatar_id": "", "url": "https://api.github.com/users/heartsucker", "html_url": "https://github.com/heartsucker", "followers_url": "https://api.github.com/users/heartsucker/followers", "following_url": "https://api.github.com/users/heartsucker/following{/other_user}", "gists_url": "https://api.github.com/users/heartsucker/gists{/gist_id}", "starred_url": "https://api.github.com/users/heartsucker/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/heartsucker/subscriptions", "organizations_url": "https://api.github.com/users/heartsucker/orgs", "repos_url": "https://api.github.com/users/heartsucker/repos", "events_url": "https://api.github.com/users/heartsucker/events{/privacy}", "received_events_url": "https://api.github.com/users/heartsucker/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}, {"id": 652909251, "node_id": "MDU6TGFiZWw2NTI5MDkyNTE=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/goals:%20journalist%20experience", "name": "goals: journalist experience", "color": "0e8a16", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2017-02-06T18:01:05Z", "updated_at": "2018-01-10T00:20:13Z", "closed_at": "2018-01-10T00:20:13Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "To prevent lockouts and other forms of usability degradation, I propose one of two things:\r\n1) a full ban on any admin from deleting themselves\r\n2) an admin may not delete themselves if they are the last remaining admin", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/1562/reactions", "total_count": 1, "+1": 0, "-1": 0, "laugh": 1, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/1562/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/1511", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/1511/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/1511/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/1511/events", "html_url": "https://github.com/freedomofpress/securedrop/issues/1511", "id": 197916603, "node_id": "MDU6SXNzdWUxOTc5MTY2MDM=", "number": 1511, "title": "some issues with -v 0.3.10", "user": {"login": "bivol", "id": 1446087, "node_id": "MDQ6VXNlcjE0NDYwODc=", "avatar_url": "https://avatars.githubusercontent.com/u/1446087?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bivol", "html_url": "https://github.com/bivol", "followers_url": "https://api.github.com/users/bivol/followers", "following_url": "https://api.github.com/users/bivol/following{/other_user}", "gists_url": "https://api.github.com/users/bivol/gists{/gist_id}", "starred_url": "https://api.github.com/users/bivol/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bivol/subscriptions", "organizations_url": "https://api.github.com/users/bivol/orgs", "repos_url": "https://api.github.com/users/bivol/repos", "events_url": "https://api.github.com/users/bivol/events{/privacy}", "received_events_url": "https://api.github.com/users/bivol/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}, {"id": 192539287, "node_id": "MDU6TGFiZWwxOTI1MzkyODc=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/ops/deployment", "name": "ops/deployment", "color": "c7def8", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "conorsch", "id": 657862, "node_id": "MDQ6VXNlcjY1Nzg2Mg==", "avatar_url": "https://avatars.githubusercontent.com/u/657862?v=4", "gravatar_id": "", "url": "https://api.github.com/users/conorsch", "html_url": "https://github.com/conorsch", "followers_url": "https://api.github.com/users/conorsch/followers", "following_url": "https://api.github.com/users/conorsch/following{/other_user}", "gists_url": "https://api.github.com/users/conorsch/gists{/gist_id}", "starred_url": "https://api.github.com/users/conorsch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/conorsch/subscriptions", "organizations_url": "https://api.github.com/users/conorsch/orgs", "repos_url": "https://api.github.com/users/conorsch/repos", "events_url": "https://api.github.com/users/conorsch/events{/privacy}", "received_events_url": "https://api.github.com/users/conorsch/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "conorsch", "id": 657862, "node_id": "MDQ6VXNlcjY1Nzg2Mg==", "avatar_url": "https://avatars.githubusercontent.com/u/657862?v=4", "gravatar_id": "", "url": "https://api.github.com/users/conorsch", "html_url": "https://github.com/conorsch", "followers_url": "https://api.github.com/users/conorsch/followers", "following_url": "https://api.github.com/users/conorsch/following{/other_user}", "gists_url": "https://api.github.com/users/conorsch/gists{/gist_id}", "starred_url": "https://api.github.com/users/conorsch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/conorsch/subscriptions", "organizations_url": "https://api.github.com/users/conorsch/orgs", "repos_url": "https://api.github.com/users/conorsch/repos", "events_url": "https://api.github.com/users/conorsch/events{/privacy}", "received_events_url": "https://api.github.com/users/conorsch/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 4, "created_at": "2016-12-28T21:11:16Z", "updated_at": "2017-03-09T22:22:35Z", "closed_at": "2017-03-09T22:22:35Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hello, guys,\r\n\r\nFirst of all - thanks for your hard work. SecureDrop is very useful tool for our work. We were getting a lot of leaks with the earlier versions and we are now setuping new servers.\r\n\r\nI'm having some problems with the ansible playbook. I've commented some of the tasks with hope that I can proceed, but I finally gave up. I'm attaching some of the errors I encountered. I would love if somebody can help me in the process... I might be wrong somewhere from the beginning...\r\n\r\n###### paxctl -Cpm grub_pax\r\n\r\nI saw that there is already opened issue for that, but I wanted to write it here, as this is the first problem that a new installation would face.\r\n\r\n> failed: [mon] (item=grub_pax) => {\"changed\": true, \"cmd\": [\"paxctl\", \"-Cpm\", \"grub_pax\"], \"delta\": \"0:00:00.001722\", \"end\": > \"2016-12-28 18:23:28.021067\", \"failed\": true, \"item\": \"grub_pax\", \"rc\": 1, \"start\": \"2016-12-28 18:23:28.019345\", \"stderr\": > \"grub_pax: No such file or directory\", \"stdout\": \"\", \"stdout_lines\": [], \"warnings\": []}\r\n> failed: [app] (item=grub_pax) => {\"changed\": true, \"cmd\": [\"paxctl\", \"-Cpm\", \"grub_pax\"], \"delta\": \"0:00:00.001910\", \"end\": > \"2016-12-28 18:23:28.097517\", \"failed\": true, \"item\": \"grub_pax\", \"rc\": 1, \"start\": \"2016-12-28 18:23:28.095607\", \"stderr\": > \"grub_pax: No such file or directory\", \"stdout\": \"\", \"stdout_lines\": [], \"warnings\": []}\r\n\r\n\r\n###### the field 'args' has an invalid value\r\n\r\n> fatal: [mon]: FAILED! => {\"failed\": true, \"msg\": \"the field 'args' has an invalid value, which appears to include a variable that is undefined. The error was: 'unicode object' has no attribute 'name'\\n\\nThe error appears to have been in '/home/amnesia/Tools/securedrop/install_files/ansible-base/roles/common/tasks/sysctl.yml': line 2, column 3, but may\\nbe elsewhere in the file depending on the exact syntax problem.\\n\\nThe offending line appears to be:\\n\\n---\\n- sysctl: name=\\\"{{ item.name }}\\\" value=\\\"{{ item.value }}\\\" sysctl_set=yes state=present reload=yes\\n  ^ here\\nWe could be wrong, but this one looks like it might be an issue with\\nmissing quotes.  Always quote template expression brackets when they\\nstart a value. For instance:\\n\\n    with_items:\\n      - {{ foo }}\\n\\nShould be written as:\\n\\n    with_items:\\n      - \\\"{{ foo }}\\\"\\n\"}\r\n> fatal: [app]: FAILED! => {\"failed\": true, \"msg\": \"the field 'args' has an invalid value, which appears to include a variable that is undefined. The error was: 'unicode object' has no attribute 'name'\\n\\nThe error appears to have been in '/home/amnesia/Tools/securedrop/install_files/ansible-base/roles/common/tasks/sysctl.yml': line 2, column 3, but may\\nbe elsewhere in the file depending on the exact syntax problem.\\n\\nThe offending line appears to be:\\n\\n---\\n- sysctl: name=\\\"{{ item.name }}\\\" value=\\\"{{ item.value }}\\\" sysctl_set=yes state=present reload=yes\\n  ^ here\\nWe could be wrong, but this one looks like it might be an issue with\\nmissing quotes.  Always quote template expression brackets when they\\nstart a value. For instance:\\n\\n    with_items:\\n      - {{ foo }}\\n\\nShould be written as:\\n\\n    with_items:\\n      - \\\"{{ foo }}\\\"\\n\"}\r\n\r\n> fatal: [mon]: FAILED! => {\"failed\": true, \"msg\": \"the field 'args' has an invalid value, which appears to include a variable that is undefined. The error was: 'unicode object' has no attribute 'name'\\n\\nThe error appears to have been in '/home/amnesia/Tools/securedrop/install_files/ansible-base/roles/common/tasks/apply_grsec_lock.yml': line 33, column 3, but may\\nbe elsewhere in the file depending on the exact syntax problem.\\n\\nThe offending line appears to be:\\n\\n\\n- sysctl: name=\\\"{{ item.name }}\\\" value=\\\"{{ item.value }}\\\" sysctl_set=yes state=present reload=yes\\n  ^ here\\nWe could be wrong, but this one looks like it might be an issue with\\nmissing quotes.  Always quote template expression brackets when they\\nstart a value. For instance:\\n\\n    with_items:\\n      - {{ foo }}\\n\\nShould be written as:\\n\\n    with_items:\\n      - \\\"{{ foo }}\\\"\\n\"}\r\n> fatal: [app]: FAILED! => {\"failed\": true, \"msg\": \"the field 'args' has an invalid value, which appears to include a variable that is undefined. The error was: 'unicode object' has no attribute 'name'\\n\\nThe error appears to have been in '/home/amnesia/Tools/securedrop/install_files/ansible-base/roles/common/tasks/apply_grsec_lock.yml': line 33, column 3, but may\\nbe elsewhere in the file depending on the exact syntax problem.\\n\\nThe offending line appears to be:\\n\\n\\n- sysctl: name=\\\"{{ item.name }}\\\" value=\\\"{{ item.value }}\\\" sysctl_set=yes state=present reload=yes\\n  ^ here\\nWe could be wrong, but this one looks like it might be an issue with\\nmissing quotes.  Always quote template expression brackets when they\\nstart a value. For instance:\\n\\n    with_items:\\n      - {{ foo }}\\n\\nShould be written as:\\n\\n    with_items:\\n      - \\\"{{ foo }}\\\"\\n\"}\r\n\r\n> fatal: [mon]: FAILED! => {\"failed\": true, \"msg\": \"the field 'args' has an invalid value, which appears to include a variable that is undefined. The error was: 'unicode object' has no attribute 'ip'\\n\\nThe error appears to have been in '/home/amnesia/Tools/securedrop/install_files/ansible-base/roles/common-mon/tasks/set_etc_hosts_for_prod_env.yml': line 2, column 3, but may\\nbe elsewhere in the file depending on the exact syntax problem.\\n\\nThe offending line appears to be:\\n\\n---\\n- name: ensure /etc/hosts file has entry for app and monitor servers\\n  ^ here\\n\"}\r\n\r\n> fatal: [app]: FAILED! => {\"failed\": true, \"msg\": \"the field 'args' has an invalid value, which appears to include a variable that is undefined. The error was: 'unicode object' has no attribute 'ip'\\n\\nThe error appears to have been in '/home/amnesia/Tools/securedrop/install_files/ansible-base/roles/common-app/tasks/set_etc_hosts_for_prod_env.yml': line 2, column 3, but may\\nbe elsewhere in the file depending on the exact syntax problem.\\n\\nThe offending line appears to be:\\n\\n---\\n- name: ensure /etc/hosts file has entry for app and monitor servers\\n  ^ here\\n\"}\r\n\r\n######  ossec_postfix_dependencies\r\n\r\n> failed: [mon] (item=[u'ossec_postfix_dependencies']) => {\"failed\": true, \"item\": [\"ossec_postfix_dependencies\"], \"msg\": \"No package matching 'ossec_postfix_dependencies' is available\"}\r\n\r\n######  mon_tor_instances\r\n\r\n> failed: [mon] (item=mon_tor_instances) => {\"elapsed\": 300, \"failed\": true, \"item\": \"mon_tor_instances\", \"msg\": \"Timeout when waiting for file /var/lib/tor/services/mon_tor_instances/hostname\"}\r\n\r\n######  No package matching 'app_deps' is available\r\n> TASK [app : ensure secureDrop web application apt packages are installed] ******\r\n> failed: [app] (item=[u'app_deps']) => {\"failed\": true, \"item\": [\"app_deps\"], \"msg\": \"No package matching 'app_deps' is available\"}\r\n\r\n######  No package matching 'apache_packages' is available\r\n\r\n> failed: [app] (item=[u'apache_packages']) => {\"failed\": true, \"item\": [\"apache_packages\"], \"msg\": \"No package matching 'apache_packages' is available\"}\r\n\r\n######  Unable to find 'apache_files' in expected paths.\r\n> failed: [app] (item=apache_files) => {\"failed\": true, \"item\": \"apache_files\", \"msg\": \"Unable to find 'apache_files' in expected paths.\"}\r\n\r\nThanks for all your help! Please note that those might not be real issues, might be my mistakes. Thanks for you support.", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/1511/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/1511/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/1479", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/1479/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/1479/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/1479/events", "html_url": "https://github.com/freedomofpress/securedrop/issues/1479", "id": 191483950, "node_id": "MDU6SXNzdWUxOTE0ODM5NTA=", "number": 1479, "title": "Documentation and wipefs transfer device broken", "user": {"login": "KwadroNaut", "id": 99527, "node_id": "MDQ6VXNlcjk5NTI3", "avatar_url": "https://avatars.githubusercontent.com/u/99527?v=4", "gravatar_id": "", "url": "https://api.github.com/users/KwadroNaut", "html_url": "https://github.com/KwadroNaut", "followers_url": "https://api.github.com/users/KwadroNaut/followers", "following_url": "https://api.github.com/users/KwadroNaut/following{/other_user}", "gists_url": "https://api.github.com/users/KwadroNaut/gists{/gist_id}", "starred_url": "https://api.github.com/users/KwadroNaut/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/KwadroNaut/subscriptions", "organizations_url": "https://api.github.com/users/KwadroNaut/orgs", "repos_url": "https://api.github.com/users/KwadroNaut/repos", "events_url": "https://api.github.com/users/KwadroNaut/events{/privacy}", "received_events_url": "https://api.github.com/users/KwadroNaut/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}, {"id": 118465787, "node_id": "MDU6TGFiZWwxMTg0NjU3ODc=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/docs", "name": "docs", "color": "d4c5f9", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/freedomofpress/securedrop/milestones/5", "html_url": "https://github.com/freedomofpress/securedrop/milestone/5", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/milestones/5/labels", "id": 691723, "node_id": "MDk6TWlsZXN0b25lNjkxNzIz", "number": 5, "title": "0.4", "description": "Resolve develop-master diff and smooth out release workflow", "creator": {"login": "garrettr", "id": 407302, "node_id": "MDQ6VXNlcjQwNzMwMg==", "avatar_url": "https://avatars.githubusercontent.com/u/407302?v=4", "gravatar_id": "", "url": "https://api.github.com/users/garrettr", "html_url": "https://github.com/garrettr", "followers_url": "https://api.github.com/users/garrettr/followers", "following_url": "https://api.github.com/users/garrettr/following{/other_user}", "gists_url": "https://api.github.com/users/garrettr/gists{/gist_id}", "starred_url": "https://api.github.com/users/garrettr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/garrettr/subscriptions", "organizations_url": "https://api.github.com/users/garrettr/orgs", "repos_url": "https://api.github.com/users/garrettr/repos", "events_url": "https://api.github.com/users/garrettr/events{/privacy}", "received_events_url": "https://api.github.com/users/garrettr/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 126, "state": "closed", "created_at": "2014-06-15T22:57:42Z", "updated_at": "2020-10-09T18:38:48Z", "due_on": "2017-07-11T07:00:00Z", "closed_at": "2017-07-31T22:15:38Z"}, "comments": 3, "created_at": "2016-11-24T10:28:25Z", "updated_at": "2017-05-09T19:06:42Z", "closed_at": "2017-05-09T18:26:06Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "It only showed up after following exactly the documentation and not using the cli: Error wiping newly created partition /dev/sdc1: Command-line `wipefs -a \"/dev/sdc1\"' exited with non-zero exit status 1: wipefs: error: /dev/sdc1: probing initialization failed: No such file or directory\r\n (udisks-error-quark, 0)\r\n\r\nThis is a bug showing up since Wheezy, when using gnome-disk-utility, like explained on https://docs.securedrop.org/en/stable/set_up_dtd.html It can be worked around by issuing the wipefs command manually, then reopening gnome-disk-utility. It is known and now also fixed upstream: https://bugs.freedesktop.org/show_bug.cgi?id=85477\r\n\r\nDo we want to update the documentation to mention this? It might still take a while before these upstream changes get merged back into Debian and Tails.", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/1479/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/1479/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/1459", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/1459/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/1459/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/1459/events", "html_url": "https://github.com/freedomofpress/securedrop/issues/1459", "id": 187538363, "node_id": "MDU6SXNzdWUxODc1MzgzNjM=", "number": 1459, "title": "Exception thrown when submitting document", "user": {"login": "casey-bowman", "id": 837800, "node_id": "MDQ6VXNlcjgzNzgwMA==", "avatar_url": "https://avatars.githubusercontent.com/u/837800?v=4", "gravatar_id": "", "url": "https://api.github.com/users/casey-bowman", "html_url": "https://github.com/casey-bowman", "followers_url": "https://api.github.com/users/casey-bowman/followers", "following_url": "https://api.github.com/users/casey-bowman/following{/other_user}", "gists_url": "https://api.github.com/users/casey-bowman/gists{/gist_id}", "starred_url": "https://api.github.com/users/casey-bowman/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/casey-bowman/subscriptions", "organizations_url": "https://api.github.com/users/casey-bowman/orgs", "repos_url": "https://api.github.com/users/casey-bowman/repos", "events_url": "https://api.github.com/users/casey-bowman/events{/privacy}", "received_events_url": "https://api.github.com/users/casey-bowman/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}, {"id": 495896968, "node_id": "MDU6TGFiZWw0OTU4OTY5Njg=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/unable%20to%20reproduce", "name": "unable to reproduce", "color": "fbca04", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2016-11-06T02:59:20Z", "updated_at": "2017-01-11T21:54:46Z", "closed_at": "2017-01-11T21:54:46Z", "author_association": "NONE", "active_lock_reason": null, "body": "Virtual environment: develop\r\nOS: mac 10.11.6\r\nAnsible: 1.8.4\r\nVirtualenv: 15.0.3\r\nPython: 2.7.12\r\nVagrant: 1.8.6\r\nTor Browser: 6.0.5\r\n\r\nWhen submitting a short .txt document and a short message, an exception was thrown. Jen was here at the Aaron Swartz Hackathon and recommended that I try again after restarting the Tor Browser and destroying the vagrant box. Again I saw this exception when trying to submit my first document.\r\n\r\nvagrant@development:/vagrant/securedrop$ ./manage.py run\r\n\r\n => Source Interface <= \r\n\r\n * Running on http://0.0.0.0:8080/ (Press CTRL+C to quit)\r\n * Restarting with stat\r\n\r\n => Document Interface <= \r\n\r\n * Running on http://0.0.0.0:8081/ (Press CTRL+C to quit)\r\n * Restarting with stat\r\n\r\n => Source Interface <= \r\n\r\n * Debugger is active!\r\n * Debugger pin code: 294-535-668\r\n\r\n => Document Interface <= \r\n\r\n * Debugger is active!\r\n * Debugger pin code: 294-535-668\r\n\r\n => Source Interface <= \r\n\r\n10.0.2.2 - - [06/Nov/2016 02:38:45] \"GET / HTTP/1.1\" 200 -\r\n10.0.2.2 - - [06/Nov/2016 02:38:45] \"GET /static/gen/source.css?f51c01da HTTP/1.1\" 200 -\r\n10.0.2.2 - - [06/Nov/2016 02:38:45] \"GET /static/i/no16-global.png HTTP/1.1\" 200 -\r\n10.0.2.2 - - [06/Nov/2016 02:38:45] \"GET /static/i/no16.png HTTP/1.1\" 200 -\r\n10.0.2.2 - - [06/Nov/2016 02:38:45] \"GET /static/i/logo.png HTTP/1.1\" 200 -\r\n10.0.2.2 - - [06/Nov/2016 02:38:45] \"GET /static/fonts/fontawesome-webfont.woff?v=4.1.0 HTTP/1.1\" 200 -\r\n10.0.2.2 - - [06/Nov/2016 02:38:45] \"GET /favicon.ico HTTP/1.1\" 404 -\r\n10.0.2.2 - - [06/Nov/2016 02:38:48] \"GET /generate HTTP/1.1\" 200 -\r\n10.0.2.2 - - [06/Nov/2016 02:38:48] \"GET /static/i/favicon.png HTTP/1.1\" 200 -\r\n10.0.2.2 - - [06/Nov/2016 02:39:00] \"POST /create HTTP/1.1\" 302 -\r\n10.0.2.2 - - [06/Nov/2016 02:39:00] \"GET /lookup HTTP/1.1\" 200 -\r\nException in thread Thread-1:\r\nTraceback (most recent call last):\r\n  File \"/usr/lib/python2.7/threading.py\", line 810, in __bootstrap_inner\r\n    self.run()\r\n  File \"/usr/lib/python2.7/threading.py\", line 763, in run\r\n    self.__target(*self.__args, **self.__kwargs)\r\n  File \"/usr/local/lib/python2.7/dist-packages/werkzeug/serving.py\", line 659, in inner\r\n    srv.serve_forever()\r\n  File \"/usr/local/lib/python2.7/dist-packages/werkzeug/serving.py\", line 499, in serve_forever\r\n    HTTPServer.serve_forever(self)\r\n  File \"/usr/lib/python2.7/SocketServer.py\", line 238, in serve_forever\r\n    self._handle_request_noblock()\r\n  File \"/usr/lib/python2.7/SocketServer.py\", line 297, in _handle_request_noblock\r\n    self.handle_error(request, client_address)\r\n  File \"/usr/lib/python2.7/SocketServer.py\", line 295, in _handle_request_noblock\r\n    self.process_request(request, client_address)\r\n  File \"/usr/lib/python2.7/SocketServer.py\", line 321, in process_request\r\n    self.finish_request(request, client_address)\r\n  File \"/usr/lib/python2.7/SocketServer.py\", line 334, in finish_request\r\n    self.RequestHandlerClass(request, client_address, self)\r\n  File \"/usr/lib/python2.7/SocketServer.py\", line 649, in __init__\r\n    self.handle()\r\n  File \"/usr/local/lib/python2.7/dist-packages/werkzeug/serving.py\", line 216, in handle\r\n    rv = BaseHTTPRequestHandler.handle(self)\r\n  File \"/usr/lib/python2.7/BaseHTTPServer.py\", line 340, in handle\r\n    self.handle_one_request()\r\n  File \"/usr/local/lib/python2.7/dist-packages/werkzeug/serving.py\", line 247, in handle_one_request\r\n    self.raw_requestline = self.rfile.readline()\r\nIOError: [Errno 104] Connection reset by peer\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/1459/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/1459/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/1394", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/1394/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/1394/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/1394/events", "html_url": "https://github.com/freedomofpress/securedrop/issues/1394", "id": 173534315, "node_id": "MDU6SXNzdWUxNzM1MzQzMTU=", "number": 1394, "title": "install.sh hangs indefinitely due to grep with one argument", "user": {"login": "ryantate", "id": 274972, "node_id": "MDQ6VXNlcjI3NDk3Mg==", "avatar_url": "https://avatars.githubusercontent.com/u/274972?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ryantate", "html_url": "https://github.com/ryantate", "followers_url": "https://api.github.com/users/ryantate/followers", "following_url": "https://api.github.com/users/ryantate/following{/other_user}", "gists_url": "https://api.github.com/users/ryantate/gists{/gist_id}", "starred_url": "https://api.github.com/users/ryantate/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ryantate/subscriptions", "organizations_url": "https://api.github.com/users/ryantate/orgs", "repos_url": "https://api.github.com/users/ryantate/repos", "events_url": "https://api.github.com/users/ryantate/events{/privacy}", "received_events_url": "https://api.github.com/users/ryantate/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "conorsch", "id": 657862, "node_id": "MDQ6VXNlcjY1Nzg2Mg==", "avatar_url": "https://avatars.githubusercontent.com/u/657862?v=4", "gravatar_id": "", "url": "https://api.github.com/users/conorsch", "html_url": "https://github.com/conorsch", "followers_url": "https://api.github.com/users/conorsch/followers", "following_url": "https://api.github.com/users/conorsch/following{/other_user}", "gists_url": "https://api.github.com/users/conorsch/gists{/gist_id}", "starred_url": "https://api.github.com/users/conorsch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/conorsch/subscriptions", "organizations_url": "https://api.github.com/users/conorsch/orgs", "repos_url": "https://api.github.com/users/conorsch/repos", "events_url": "https://api.github.com/users/conorsch/events{/privacy}", "received_events_url": "https://api.github.com/users/conorsch/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "conorsch", "id": 657862, "node_id": "MDQ6VXNlcjY1Nzg2Mg==", "avatar_url": "https://avatars.githubusercontent.com/u/657862?v=4", "gravatar_id": "", "url": "https://api.github.com/users/conorsch", "html_url": "https://github.com/conorsch", "followers_url": "https://api.github.com/users/conorsch/followers", "following_url": "https://api.github.com/users/conorsch/following{/other_user}", "gists_url": "https://api.github.com/users/conorsch/gists{/gist_id}", "starred_url": "https://api.github.com/users/conorsch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/conorsch/subscriptions", "organizations_url": "https://api.github.com/users/conorsch/orgs", "repos_url": "https://api.github.com/users/conorsch/repos", "events_url": "https://api.github.com/users/conorsch/events{/privacy}", "received_events_url": "https://api.github.com/users/conorsch/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/freedomofpress/securedrop/milestones/13", "html_url": "https://github.com/freedomofpress/securedrop/milestone/13", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/milestones/13/labels", "id": 1824365, "node_id": "MDk6TWlsZXN0b25lMTgyNDM2NQ==", "number": 13, "title": "0.3.9", "description": "", "creator": {"login": "garrettr", "id": 407302, "node_id": "MDQ6VXNlcjQwNzMwMg==", "avatar_url": "https://avatars.githubusercontent.com/u/407302?v=4", "gravatar_id": "", "url": "https://api.github.com/users/garrettr", "html_url": "https://github.com/garrettr", "followers_url": "https://api.github.com/users/garrettr/followers", "following_url": "https://api.github.com/users/garrettr/following{/other_user}", "gists_url": "https://api.github.com/users/garrettr/gists{/gist_id}", "starred_url": "https://api.github.com/users/garrettr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/garrettr/subscriptions", "organizations_url": "https://api.github.com/users/garrettr/orgs", "repos_url": "https://api.github.com/users/garrettr/repos", "events_url": "https://api.github.com/users/garrettr/events{/privacy}", "received_events_url": "https://api.github.com/users/garrettr/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 18, "state": "closed", "created_at": "2016-06-13T19:30:54Z", "updated_at": "2016-09-20T23:50:41Z", "due_on": null, "closed_at": "2016-09-20T23:50:41Z"}, "comments": 3, "created_at": "2016-08-26T20:14:18Z", "updated_at": "2016-08-31T17:09:44Z", "closed_at": "2016-08-31T17:09:44Z", "author_association": "NONE", "active_lock_reason": null, "body": "I hit this issue while running `install.sh` on a fresh new TAILS stick, WITHOUT the ATHS info, so entering `torrc` lines via the GUI text prompts.\n\nEverything went fine until eventually \u2014 right between `set_permissions_on_securedrop_dotfiles` and `create_desktop_shortcuts` in `main` \u2014 install.sh would just sit there seemingly stuck. I did some rudimentary print (err, `echo`) debugging in the shell script and discovered it would hang here, on line 222 of `install.sh`:\n\n`app_document_aths=\"$(grep ^Exec=/usr/local/bin/tor-browser | awk '{ print $2 }')\"`\nhttps://github.com/freedomofpress/securedrop/blob/develop/tails_files/install.sh#L222\n\nThe issue seems to be this:\n\n`grep ^Exec=/usr/local/bin/tor-browser`\n\nThis is `grep` with one argument, which causes `grep` to hang waiting for STDIN. Looking at the context of the shell script it's pretty clear there should be a second token here specifying which file to grep, probably `\"${amnesia_desktop}/document.desktop\"` checked for on line 221.\n", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/1394/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/1394/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/1392", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/1392/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/1392/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/1392/events", "html_url": "https://github.com/freedomofpress/securedrop/issues/1392", "id": 173384778, "node_id": "MDU6SXNzdWUxNzMzODQ3Nzg=", "number": 1392, "title": "Double submission of journalist replies", "user": {"login": "heartsucker", "id": 3998464, "node_id": "MDQ6VXNlcjM5OTg0NjQ=", "avatar_url": "https://avatars.githubusercontent.com/u/3998464?v=4", "gravatar_id": "", "url": "https://api.github.com/users/heartsucker", "html_url": "https://github.com/heartsucker", "followers_url": "https://api.github.com/users/heartsucker/followers", "following_url": "https://api.github.com/users/heartsucker/following{/other_user}", "gists_url": "https://api.github.com/users/heartsucker/gists{/gist_id}", "starred_url": "https://api.github.com/users/heartsucker/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/heartsucker/subscriptions", "organizations_url": "https://api.github.com/users/heartsucker/orgs", "repos_url": "https://api.github.com/users/heartsucker/repos", "events_url": "https://api.github.com/users/heartsucker/events{/privacy}", "received_events_url": "https://api.github.com/users/heartsucker/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}, {"id": 495896968, "node_id": "MDU6TGFiZWw0OTU4OTY5Njg=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/unable%20to%20reproduce", "name": "unable to reproduce", "color": "fbca04", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2016-08-26T07:11:36Z", "updated_at": "2017-03-09T22:00:02Z", "closed_at": "2017-03-09T22:00:02Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "I can't reproduce this, but when replying to a source, clicking the submit button sent two replies. When returning to the conversation page, there were two flash messages saying that my reply was went and two entries for my reply in the list. I confirmed that the `db.sqlite` has two entries.\n", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/1392/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/1392/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/1367", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/1367/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/1367/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/1367/events", "html_url": "https://github.com/freedomofpress/securedrop/issues/1367", "id": 170495020, "node_id": "MDU6SXNzdWUxNzA0OTUwMjA=", "number": 1367, "title": "securedrop-app-code python packages not installed when package is already provided by other OS package", "user": {"login": "psivesely", "id": 3538418, "node_id": "MDQ6VXNlcjM1Mzg0MTg=", "avatar_url": "https://avatars.githubusercontent.com/u/3538418?v=4", "gravatar_id": "", "url": "https://api.github.com/users/psivesely", "html_url": "https://github.com/psivesely", "followers_url": "https://api.github.com/users/psivesely/followers", "following_url": "https://api.github.com/users/psivesely/following{/other_user}", "gists_url": "https://api.github.com/users/psivesely/gists{/gist_id}", "starred_url": "https://api.github.com/users/psivesely/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/psivesely/subscriptions", "organizations_url": "https://api.github.com/users/psivesely/orgs", "repos_url": "https://api.github.com/users/psivesely/repos", "events_url": "https://api.github.com/users/psivesely/events{/privacy}", "received_events_url": "https://api.github.com/users/psivesely/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}, {"id": 192545295, "node_id": "MDU6TGFiZWwxOTI1NDUyOTU=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/security", "name": "security", "color": "bfdadc", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "psivesely", "id": 3538418, "node_id": "MDQ6VXNlcjM1Mzg0MTg=", "avatar_url": "https://avatars.githubusercontent.com/u/3538418?v=4", "gravatar_id": "", "url": "https://api.github.com/users/psivesely", "html_url": "https://github.com/psivesely", "followers_url": "https://api.github.com/users/psivesely/followers", "following_url": "https://api.github.com/users/psivesely/following{/other_user}", "gists_url": "https://api.github.com/users/psivesely/gists{/gist_id}", "starred_url": "https://api.github.com/users/psivesely/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/psivesely/subscriptions", "organizations_url": "https://api.github.com/users/psivesely/orgs", "repos_url": "https://api.github.com/users/psivesely/repos", "events_url": "https://api.github.com/users/psivesely/events{/privacy}", "received_events_url": "https://api.github.com/users/psivesely/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "psivesely", "id": 3538418, "node_id": "MDQ6VXNlcjM1Mzg0MTg=", "avatar_url": "https://avatars.githubusercontent.com/u/3538418?v=4", "gravatar_id": "", "url": "https://api.github.com/users/psivesely", "html_url": "https://github.com/psivesely", "followers_url": "https://api.github.com/users/psivesely/followers", "following_url": "https://api.github.com/users/psivesely/following{/other_user}", "gists_url": "https://api.github.com/users/psivesely/gists{/gist_id}", "starred_url": "https://api.github.com/users/psivesely/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/psivesely/subscriptions", "organizations_url": "https://api.github.com/users/psivesely/orgs", "repos_url": "https://api.github.com/users/psivesely/repos", "events_url": "https://api.github.com/users/psivesely/events{/privacy}", "received_events_url": "https://api.github.com/users/psivesely/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/freedomofpress/securedrop/milestones/13", "html_url": "https://github.com/freedomofpress/securedrop/milestone/13", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/milestones/13/labels", "id": 1824365, "node_id": "MDk6TWlsZXN0b25lMTgyNDM2NQ==", "number": 13, "title": "0.3.9", "description": "", "creator": {"login": "garrettr", "id": 407302, "node_id": "MDQ6VXNlcjQwNzMwMg==", "avatar_url": "https://avatars.githubusercontent.com/u/407302?v=4", "gravatar_id": "", "url": "https://api.github.com/users/garrettr", "html_url": "https://github.com/garrettr", "followers_url": "https://api.github.com/users/garrettr/followers", "following_url": "https://api.github.com/users/garrettr/following{/other_user}", "gists_url": "https://api.github.com/users/garrettr/gists{/gist_id}", "starred_url": "https://api.github.com/users/garrettr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/garrettr/subscriptions", "organizations_url": "https://api.github.com/users/garrettr/orgs", "repos_url": "https://api.github.com/users/garrettr/repos", "events_url": "https://api.github.com/users/garrettr/events{/privacy}", "received_events_url": "https://api.github.com/users/garrettr/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 18, "state": "closed", "created_at": "2016-06-13T19:30:54Z", "updated_at": "2016-09-20T23:50:41Z", "due_on": null, "closed_at": "2016-09-20T23:50:41Z"}, "comments": 2, "created_at": "2016-08-10T19:11:28Z", "updated_at": "2016-08-11T23:24:30Z", "closed_at": "2016-08-11T23:24:30Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Although in the Ansible output it was not specified which OS packages provided the conflicting Python packages, it appears that all SecureDrop instances are running out-of-date versions of `colorama` and `six`. I should have realized this was the case when I made #1302 as a fix to #856--the same phenomenon we'd use to our advantage in that PR is here a potentially serious problem.\n\n`colorama` has no git history back to version 0.2.5 and the old Google Code page just redirects to the Github repo now. The changelog does not mention any security issues. Anyway, the only function that is called is `colorama.init()` by `qrcode`. No public Internet facing code uses the out-of-date `colorama` code. Also, as noted in https://github.com/freedomofpress/securedrop/issues/1352#issue-163540675 a PR of mine was merged into `qrcode` such that `colorama` will no longer be a dependency in the next version of SD.\n\n`six` again is only used by `qrcode` and does not seem to have had any security issues between 1.5.2 and the present.\n\nI think it is safe to conclude that, _very fortunately_, this problem has not left us vulnerable. Had some Ubuntu base distro package or some other apt dependency of SD provided or pulled in and installed some out-of-date Python package that did include vulnerable code (or should this happen in the future) that would be a serious security issue. I think it's important we take care of this relatively quickly (again, not urgent because there's not actually a security issue here, just the potential for one) and ship out a 0.3.9 that fixes this and #856.\n\n```\n\"Setting up securedrop-app-code (0.3.8) ...\", \"Ignoring indexes:\nhttps://pypi.python.org/simple/\", \"Downloading/unpacking click==6.6 (from -r\n/var/www/securedrop/requirements/securedrop-requirements.txt (line 8))\",\n\"Downloading/unpacking colorama==0.3.7 (from -r\n/var/www/securedrop/requirements/securedrop-requirements.txt (line 9))\",\n\"Downloading/unpacking Flask-WTF==0.12 (from -r\n/var/www/securedrop/requirements/securedrop-requirements.txt (line 10))\",\n\"Downloading/unpacking Flask==0.10.1 (from -r\n/var/www/securedrop/requirements/securedrop-requirements.txt (line 11))\",\n\"Downloading/unpacking future==0.15.2 (from -r\n/var/www/securedrop/requirements/securedrop-requirements.txt (line 12))\",\n\"Downloading/unpacking gnupg==2.0.2 (from -r\n/var/www/securedrop/requirements/securedrop-requirements.txt (line 13))\",\n\"Downloading/unpacking itsdangerous==0.24 (from -r\n/var/www/securedrop/requirements/securedrop-requirements.txt (line 14))\",\n\"Downloading/unpacking Jinja2==2.8 (from -r\n/var/www/securedrop/requirements/securedrop-requirements.txt (line 15))\",\n\"Downloading/unpacking MarkupSafe==0.23 (from -r\n/var/www/securedrop/requirements/securedrop-requirements.txt (line 16))\",\n\"Downloading/unpacking psutil==4.1.0 (from -r\n/var/www/securedrop/requirements/securedrop-requirements.txt (line 17))\",\n\"Downloading/unpacking pycrypto==2.6.1 (from -r\n/var/www/securedrop/requirements/securedrop-requirements.txt (line 18))\",\n\"Downloading/unpacking pyotp==2.1.1 (from -r\n/var/www/securedrop/requirements/securedrop-requirements.txt (line 19))\",\n\"Downloading/unpacking qrcode==5.2.2 (from -r\n/var/www/securedrop/requirements/securedrop-requirements.txt (line 20))\",\n\"Downloading/unpacking redis==2.10.5 (from -r\n/var/www/securedrop/requirements/securedrop-requirements.txt (line 21))\",\n\"Downloading/unpacking rq==0.6.0 (from -r\n/var/www/securedrop/requirements/securedrop-requirements.txt (line 22))\",\n\"Downloading/unpacking scrypt==0.7.1 (from -r\n/var/www/securedrop/requirements/securedrop-requirements.txt (line 23))\",\n\"Downloading/unpacking six==1.10.0 (from -r\n/var/www/securedrop/requirements/securedrop-requirements.txt (line 24))\",\n\"Downloading/unpacking SQLAlchemy==1.0.13 (from -r\n/var/www/securedrop/requirements/securedrop-requirements.txt (line 25))\",\n\"Downloading/unpacking Werkzeug==0.11.9 (from -r\n/var/www/securedrop/requirements/securedrop-requirements.txt (line 26))\",\n\"Downloading/unpacking WTForms==2.1 (from -r\n/var/www/securedrop/requirements/securedrop-requirements.txt (line 27))\",\n\"Installing collected packages: click, colorama, Flask-WTF, Flask, future,\ngnupg, itsdangerous, Jinja2, MarkupSafe, psutil, pycrypto, pyotp, qrcode, redis,\nrq, scrypt, six, SQLAlchemy, Werkzeug, WTForms\", \"  Found existing installation:\ncolorama 0.2.5\", \"    Not uninstalling colorama at\n/usr/lib/python2.7/dist-packages, owned by OS\", \"  Found existing installation:\nsix 1.5.2\", \"    Not uninstalling six at /usr/lib/python2.7/dist-packages, owned\nby OS\", \"Successfully installed click colorama Flask-WTF Flask future gnupg\nitsdangerous Jinja2 MarkupSafe psutil pycrypto pyotp qrcode redis rq scrypt six\nSQLAlchemy Werkzeug WTForms\"\n```\n", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/1367/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/1367/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/1364", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/1364/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/1364/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/1364/events", "html_url": "https://github.com/freedomofpress/securedrop/issues/1364", "id": 169428734, "node_id": "MDU6SXNzdWUxNjk0Mjg3MzQ=", "number": 1364, "title": "Upgrading to tor 0.2.8.6 breaks hidden services", "user": {"login": "conorsch", "id": 657862, "node_id": "MDQ6VXNlcjY1Nzg2Mg==", "avatar_url": "https://avatars.githubusercontent.com/u/657862?v=4", "gravatar_id": "", "url": "https://api.github.com/users/conorsch", "html_url": "https://github.com/conorsch", "followers_url": "https://api.github.com/users/conorsch/followers", "following_url": "https://api.github.com/users/conorsch/following{/other_user}", "gists_url": "https://api.github.com/users/conorsch/gists{/gist_id}", "starred_url": "https://api.github.com/users/conorsch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/conorsch/subscriptions", "organizations_url": "https://api.github.com/users/conorsch/orgs", "repos_url": "https://api.github.com/users/conorsch/repos", "events_url": "https://api.github.com/users/conorsch/events{/privacy}", "received_events_url": "https://api.github.com/users/conorsch/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}, {"id": 157793311, "node_id": "MDU6TGFiZWwxNTc3OTMzMTE=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/priority/high", "name": "priority/high", "color": "e64ef4", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 7, "created_at": "2016-08-04T17:24:34Z", "updated_at": "2016-08-05T23:52:43Z", "closed_at": "2016-08-05T23:52:43Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "The new version of tor, 0.2.8.6, causes hidden services to fail in SecureDrop. [Release notes for 0.2.8.6 here](https://blog.torproject.org/blog/tor-0286-released). \n\nThis means that all SecureDrop instances are inaccessible. This includes Source Interface, Document Interface, and SSH access. \n\nIn a VM, the problem was simple to reproduce:\n\n```\nvagrant@app-staging:~$ sudo apt-get install --only-upgrade tor\nReading package lists... Done\nBuilding dependency tree       \nReading state information... Done\nSuggested packages:\n  mixmaster torbrowser-launcher socat tor-arm obfsproxy obfs4proxy\nThe following packages will be upgraded:\n  tor\n1 upgraded, 0 newly installed, 0 to remove and 31 not upgraded.\nNeed to get 1,065 kB of archives.\nAfter this operation, 217 kB of additional disk space will be used.\nGet:1 http://deb.torproject.org/torproject.org/ trusty/main tor amd64 0.2.8.6-1~trusty+1 [1,065 kB]\nFetched 1,065 kB in 1s (693 kB/s)\n(Reading database ... 44639 files and directories currently installed.)\nPreparing to unpack .../tor_0.2.8.6-1~trusty+1_amd64.deb ...\n * Stopping tor daemon...\n   ...done.\nUnpacking tor (0.2.8.6-1~trusty+1) over (0.2.7.6-1~trusty+1) ...\nProcessing triggers for man-db (2.6.7.1-1ubuntu1) ...\nProcessing triggers for ureadahead (0.100.0-16) ...\nureadahead will be reprofiled on next reboot\nSetting up tor (0.2.8.6-1~trusty+1) ...\nInstalling new version of config file /etc/apparmor.d/system_tor ...\nWarning from profile system_tor (/etc/apparmor.d/system_tor) ptrace rules not enforced\nWarning from profile system_tor (/etc/apparmor.d/system_tor) signal rules not enforced\nWarning from /etc/apparmor.d/system_tor (/etc/apparmor.d/system_tor line 22): profile system_tor network rules not enforced\n * Starting tor daemon...\nAug 04 17:17:43.779 [warn] Directory /var/lib/tor/services/ssh cannot be read: Permission denied\nAug 04 17:17:43.780 [warn] Failed to parse/validate config: Failed to configure rendezvous options. See logs for details.\nAug 04 17:17:43.780 [err] Reading config failed--see warnings above.\n   ...fail!\ninvoke-rc.d: initscript tor, action \"start\" failed.\nTor was unable to start due to configuration errors.\nPlease fix them and manually restart the tor daemon using\n \u00b4service start tor\u00b4\nvagrant@app-staging:~$\n```\n\nInvestigating solutions now.\n", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/1364/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/1364/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/1279", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/1279/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/1279/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/1279/events", "html_url": "https://github.com/freedomofpress/securedrop/issues/1279", "id": 149955763, "node_id": "MDU6SXNzdWUxNDk5NTU3NjM=", "number": 1279, "title": "zlib inflate problem", "user": {"login": "redshiftzero", "id": 7832803, "node_id": "MDQ6VXNlcjc4MzI4MDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7832803?v=4", "gravatar_id": "", "url": "https://api.github.com/users/redshiftzero", "html_url": "https://github.com/redshiftzero", "followers_url": "https://api.github.com/users/redshiftzero/followers", "following_url": "https://api.github.com/users/redshiftzero/following{/other_user}", "gists_url": "https://api.github.com/users/redshiftzero/gists{/gist_id}", "starred_url": "https://api.github.com/users/redshiftzero/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/redshiftzero/subscriptions", "organizations_url": "https://api.github.com/users/redshiftzero/orgs", "repos_url": "https://api.github.com/users/redshiftzero/repos", "events_url": "https://api.github.com/users/redshiftzero/events{/privacy}", "received_events_url": "https://api.github.com/users/redshiftzero/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}, {"id": 495896968, "node_id": "MDU6TGFiZWw0OTU4OTY5Njg=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/unable%20to%20reproduce", "name": "unable to reproduce", "color": "fbca04", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 15, "created_at": "2016-04-21T03:44:06Z", "updated_at": "2016-12-07T01:06:31Z", "closed_at": "2016-12-07T01:06:31Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "When receiving a submission through SecureDrop, I encountered an error that rendered me unable to decrypt the entire submission. This is on an SD instance where I have downloaded other documents and messages and decrypted them on the SVS no problem. I am using SecureDrop 0.3.6 and the Tails drives use Tails 2.2.1. \n\nAs usual, I download the document (2-firstword-secondword-doc.gz.gpg) from the web interface to to the DTD, transfer it over to the SVS, copy over, and try to decrypt by manually clicking the file. Decryption begins and seems to proceed as usual, until a dialog box appears that reads \"Couldn't decrypt file: 2-firstword-secondword-doc.gz.gpg No data\". \n### What I checked:\n\n1) I have verified that the file was downloaded correctly from the webapp: I downloaded the file from the web interface several times and verified that the hashes of each file were the same (perhaps some option to display a hash in the UI of the webapp may be useful?). \n\n2) In order to see what the issue with the decrypt was, I try to decrypt on the command line:\n`gpg --decrypt 2-firstword-secondword-doc.gz.gpg > 2-firstword-secondword-doc.gz`\n\nWhen I do this, the output displays that the file was indeed encrypted to the SD application public key, then I get the following error:\n\n`gpg: fatal: zlib inflate problem: invalid block type`\n`secmem usage: 2528/12768 bytes in 4/28 blocks of pool 13088/65536`\n\nI've tried both gpg and gpg2 - which are using GnuPG 1.4.18 and GnuPG 2.0.26 respectively - and get the same `zlib inflate problem` for both. \n\nHowever, in order to view some of the documents from the submission, I did the following: \n`gunzip < 2-firstword-secondword-doc.gz > 2-firstword-secondword-doc.tar`\n\nI open the .tar, and see an alphabetic listing of documents, all of which I can open and read no problem, up until but not including the last file (alphabetically) in the partial decrypt (presumably where the decryption failed). \n\nHave you encountered this error/issue before or have any thoughts? \n\nThanks for your time!\n", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/1279/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/1279/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/1249", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/1249/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/1249/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/1249/events", "html_url": "https://github.com/freedomofpress/securedrop/issues/1249", "id": 138697906, "node_id": "MDU6SXNzdWUxMzg2OTc5MDY=", "number": 1249, "title": "Docs as described may lead to DNS lookup failures", "user": {"login": "heartsucker", "id": 3998464, "node_id": "MDQ6VXNlcjM5OTg0NjQ=", "avatar_url": "https://avatars.githubusercontent.com/u/3998464?v=4", "gravatar_id": "", "url": "https://api.github.com/users/heartsucker", "html_url": "https://github.com/heartsucker", "followers_url": "https://api.github.com/users/heartsucker/followers", "following_url": "https://api.github.com/users/heartsucker/following{/other_user}", "gists_url": "https://api.github.com/users/heartsucker/gists{/gist_id}", "starred_url": "https://api.github.com/users/heartsucker/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/heartsucker/subscriptions", "organizations_url": "https://api.github.com/users/heartsucker/orgs", "repos_url": "https://api.github.com/users/heartsucker/repos", "events_url": "https://api.github.com/users/heartsucker/events{/privacy}", "received_events_url": "https://api.github.com/users/heartsucker/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}, {"id": 652909222, "node_id": "MDU6TGFiZWw2NTI5MDkyMjI=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/goals:%20Improve%20Ansible%20logic%20/%20smoother%20install", "name": "goals: Improve Ansible logic / smoother install", "color": "0e8a16", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/freedomofpress/securedrop/milestones/42", "html_url": "https://github.com/freedomofpress/securedrop/milestone/42", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/milestones/42/labels", "id": 3037554, "node_id": "MDk6TWlsZXN0b25lMzAzNzU1NA==", "number": 42, "title": "0.7", "description": "(Release date to match Tails 3.7 release date in https://tails.boum.org/contribute/calendar/). See also the [detailed i18n timeline](https://forum.securedrop.club/t/about-the-translations-category/16). Feature freeze is April 24 EOD. String freeze is May 1 EOD.\r\n\r\nUpdate May 7, 2018: Release was deferred by one week (to May 15) to allow for more time to QA some late stage fixes.", "creator": {"login": "redshiftzero", "id": 7832803, "node_id": "MDQ6VXNlcjc4MzI4MDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7832803?v=4", "gravatar_id": "", "url": "https://api.github.com/users/redshiftzero", "html_url": "https://github.com/redshiftzero", "followers_url": "https://api.github.com/users/redshiftzero/followers", "following_url": "https://api.github.com/users/redshiftzero/following{/other_user}", "gists_url": "https://api.github.com/users/redshiftzero/gists{/gist_id}", "starred_url": "https://api.github.com/users/redshiftzero/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/redshiftzero/subscriptions", "organizations_url": "https://api.github.com/users/redshiftzero/orgs", "repos_url": "https://api.github.com/users/redshiftzero/repos", "events_url": "https://api.github.com/users/redshiftzero/events{/privacy}", "received_events_url": "https://api.github.com/users/redshiftzero/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 75, "state": "closed", "created_at": "2018-01-15T23:46:19Z", "updated_at": "2018-05-16T05:33:37Z", "due_on": "2018-05-15T07:00:00Z", "closed_at": "2018-05-16T05:33:37Z"}, "comments": 6, "created_at": "2016-03-05T17:01:08Z", "updated_at": "2018-03-29T22:45:00Z", "closed_at": "2018-03-29T22:45:00Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "A fresh Ubuntu install is defaulting to have the network gateway as the only DNS server in `resolv.conf`. Adding the Google DNS servers `8.8.8.8` and `8.8.4.4` as `nameserver`s to `/etc/resolvconf/resolv.conf.d/tail` should be added to the docs. Currently the firewall rules listed in the docs only allow DNS lookups to the external DNS servers.\n", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/1249/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/1249/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/974", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/974/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/974/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/974/events", "html_url": "https://github.com/freedomofpress/securedrop/pull/974", "id": 65783290, "node_id": "MDExOlB1bGxSZXF1ZXN0MzI0NjMwMTk=", "number": 974, "title": "Add admin_required to admin_add_user", "user": {"login": "garrettr", "id": 407302, "node_id": "MDQ6VXNlcjQwNzMwMg==", "avatar_url": "https://avatars.githubusercontent.com/u/407302?v=4", "gravatar_id": "", "url": "https://api.github.com/users/garrettr", "html_url": "https://github.com/garrettr", "followers_url": "https://api.github.com/users/garrettr/followers", "following_url": "https://api.github.com/users/garrettr/following{/other_user}", "gists_url": "https://api.github.com/users/garrettr/gists{/gist_id}", "starred_url": "https://api.github.com/users/garrettr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/garrettr/subscriptions", "organizations_url": "https://api.github.com/users/garrettr/orgs", "repos_url": "https://api.github.com/users/garrettr/repos", "events_url": "https://api.github.com/users/garrettr/events{/privacy}", "received_events_url": "https://api.github.com/users/garrettr/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}, {"id": 157793311, "node_id": "MDU6TGFiZWwxNTc3OTMzMTE=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/priority/high", "name": "priority/high", "color": "e64ef4", "default": false, "description": ""}, {"id": 192545295, "node_id": "MDU6TGFiZWwxOTI1NDUyOTU=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/security", "name": "security", "color": "bfdadc", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "garrettr", "id": 407302, "node_id": "MDQ6VXNlcjQwNzMwMg==", "avatar_url": "https://avatars.githubusercontent.com/u/407302?v=4", "gravatar_id": "", "url": "https://api.github.com/users/garrettr", "html_url": "https://github.com/garrettr", "followers_url": "https://api.github.com/users/garrettr/followers", "following_url": "https://api.github.com/users/garrettr/following{/other_user}", "gists_url": "https://api.github.com/users/garrettr/gists{/gist_id}", "starred_url": "https://api.github.com/users/garrettr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/garrettr/subscriptions", "organizations_url": "https://api.github.com/users/garrettr/orgs", "repos_url": "https://api.github.com/users/garrettr/repos", "events_url": "https://api.github.com/users/garrettr/events{/privacy}", "received_events_url": "https://api.github.com/users/garrettr/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "garrettr", "id": 407302, "node_id": "MDQ6VXNlcjQwNzMwMg==", "avatar_url": "https://avatars.githubusercontent.com/u/407302?v=4", "gravatar_id": "", "url": "https://api.github.com/users/garrettr", "html_url": "https://github.com/garrettr", "followers_url": "https://api.github.com/users/garrettr/followers", "following_url": "https://api.github.com/users/garrettr/following{/other_user}", "gists_url": "https://api.github.com/users/garrettr/gists{/gist_id}", "starred_url": "https://api.github.com/users/garrettr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/garrettr/subscriptions", "organizations_url": "https://api.github.com/users/garrettr/orgs", "repos_url": "https://api.github.com/users/garrettr/repos", "events_url": "https://api.github.com/users/garrettr/events{/privacy}", "received_events_url": "https://api.github.com/users/garrettr/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/freedomofpress/securedrop/milestones/9", "html_url": "https://github.com/freedomofpress/securedrop/milestone/9", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/milestones/9/labels", "id": 1049468, "node_id": "MDk6TWlsZXN0b25lMTA0OTQ2OA==", "number": 9, "title": "0.3.2", "description": "Fix for vulnerability reported on Bugtraq mailing list: http://seclists.org/bugtraq/2015/Apr/8", "creator": {"login": "garrettr", "id": 407302, "node_id": "MDQ6VXNlcjQwNzMwMg==", "avatar_url": "https://avatars.githubusercontent.com/u/407302?v=4", "gravatar_id": "", "url": "https://api.github.com/users/garrettr", "html_url": "https://github.com/garrettr", "followers_url": "https://api.github.com/users/garrettr/followers", "following_url": "https://api.github.com/users/garrettr/following{/other_user}", "gists_url": "https://api.github.com/users/garrettr/gists{/gist_id}", "starred_url": "https://api.github.com/users/garrettr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/garrettr/subscriptions", "organizations_url": "https://api.github.com/users/garrettr/orgs", "repos_url": "https://api.github.com/users/garrettr/repos", "events_url": "https://api.github.com/users/garrettr/events{/privacy}", "received_events_url": "https://api.github.com/users/garrettr/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 1, "state": "closed", "created_at": "2015-04-01T21:16:52Z", "updated_at": "2015-04-02T01:30:28Z", "due_on": null, "closed_at": "2015-04-02T01:30:28Z"}, "comments": 11, "created_at": "2015-04-01T21:31:58Z", "updated_at": "2015-04-02T01:33:21Z", "closed_at": "2015-04-02T00:47:32Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/freedomofpress/securedrop/pulls/974", "html_url": "https://github.com/freedomofpress/securedrop/pull/974", "diff_url": "https://github.com/freedomofpress/securedrop/pull/974.diff", "patch_url": "https://github.com/freedomofpress/securedrop/pull/974.patch", "merged_at": "2015-04-02T00:47:32Z"}, "body": "Access to the admin_add_user view should be restricted to administrators\nonly. Unfortunately, I accidentally omitted the `@admin_required`\ndecorator for this view. Since `@admin_required` encapsulates\n`@login_required`, this means that anybody with access to the Document\nInterface would be able to create a user accounts.\n\nThis is a fix for the issue reported on Bugtraq: http://seclists.org/bugtraq/2015/Apr/8\n\nThis is a security-high vulnerability and will be sent out in an immediate auto-update to `securedrop-app-code` by EOD today.\n", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/974/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/974/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/969", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/969/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/969/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/969/events", "html_url": "https://github.com/freedomofpress/securedrop/issues/969", "id": 65711111, "node_id": "MDU6SXNzdWU2NTcxMTExMQ==", "number": 969, "title": "Document interface no longer flags new submissions as unread", "user": {"login": "garrettr", "id": 407302, "node_id": "MDQ6VXNlcjQwNzMwMg==", "avatar_url": "https://avatars.githubusercontent.com/u/407302?v=4", "gravatar_id": "", "url": "https://api.github.com/users/garrettr", "html_url": "https://github.com/garrettr", "followers_url": "https://api.github.com/users/garrettr/followers", "following_url": "https://api.github.com/users/garrettr/following{/other_user}", "gists_url": "https://api.github.com/users/garrettr/gists{/gist_id}", "starred_url": "https://api.github.com/users/garrettr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/garrettr/subscriptions", "organizations_url": "https://api.github.com/users/garrettr/orgs", "repos_url": "https://api.github.com/users/garrettr/repos", "events_url": "https://api.github.com/users/garrettr/events{/privacy}", "received_events_url": "https://api.github.com/users/garrettr/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "garrettr", "id": 407302, "node_id": "MDQ6VXNlcjQwNzMwMg==", "avatar_url": "https://avatars.githubusercontent.com/u/407302?v=4", "gravatar_id": "", "url": "https://api.github.com/users/garrettr", "html_url": "https://github.com/garrettr", "followers_url": "https://api.github.com/users/garrettr/followers", "following_url": "https://api.github.com/users/garrettr/following{/other_user}", "gists_url": "https://api.github.com/users/garrettr/gists{/gist_id}", "starred_url": "https://api.github.com/users/garrettr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/garrettr/subscriptions", "organizations_url": "https://api.github.com/users/garrettr/orgs", "repos_url": "https://api.github.com/users/garrettr/repos", "events_url": "https://api.github.com/users/garrettr/events{/privacy}", "received_events_url": "https://api.github.com/users/garrettr/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "garrettr", "id": 407302, "node_id": "MDQ6VXNlcjQwNzMwMg==", "avatar_url": "https://avatars.githubusercontent.com/u/407302?v=4", "gravatar_id": "", "url": "https://api.github.com/users/garrettr", "html_url": "https://github.com/garrettr", "followers_url": "https://api.github.com/users/garrettr/followers", "following_url": "https://api.github.com/users/garrettr/following{/other_user}", "gists_url": "https://api.github.com/users/garrettr/gists{/gist_id}", "starred_url": "https://api.github.com/users/garrettr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/garrettr/subscriptions", "organizations_url": "https://api.github.com/users/garrettr/orgs", "repos_url": "https://api.github.com/users/garrettr/repos", "events_url": "https://api.github.com/users/garrettr/events{/privacy}", "received_events_url": "https://api.github.com/users/garrettr/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/freedomofpress/securedrop/milestones/8", "html_url": "https://github.com/freedomofpress/securedrop/milestone/8", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/milestones/8/labels", "id": 1038845, "node_id": "MDk6TWlsZXN0b25lMTAzODg0NQ==", "number": 8, "title": "0.3.3", "description": "", "creator": {"login": "garrettr", "id": 407302, "node_id": "MDQ6VXNlcjQwNzMwMg==", "avatar_url": "https://avatars.githubusercontent.com/u/407302?v=4", "gravatar_id": "", "url": "https://api.github.com/users/garrettr", "html_url": "https://github.com/garrettr", "followers_url": "https://api.github.com/users/garrettr/followers", "following_url": "https://api.github.com/users/garrettr/following{/other_user}", "gists_url": "https://api.github.com/users/garrettr/gists{/gist_id}", "starred_url": "https://api.github.com/users/garrettr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/garrettr/subscriptions", "organizations_url": "https://api.github.com/users/garrettr/orgs", "repos_url": "https://api.github.com/users/garrettr/repos", "events_url": "https://api.github.com/users/garrettr/events{/privacy}", "received_events_url": "https://api.github.com/users/garrettr/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 21, "state": "closed", "created_at": "2015-03-25T17:39:44Z", "updated_at": "2015-06-09T19:24:12Z", "due_on": "2015-05-07T07:00:00Z", "closed_at": "2015-06-09T19:24:12Z"}, "comments": 4, "created_at": "2015-04-01T15:24:31Z", "updated_at": "2015-04-11T00:17:17Z", "closed_at": "2015-04-11T00:17:17Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "According to one of the current installations, the document interface no longer flags which submissions are new. They say the behavior appears to have changed when they auto-updated to 0.3.1.\n", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/969/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/969/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/968", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/968/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/968/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/968/events", "html_url": "https://github.com/freedomofpress/securedrop/issues/968", "id": 65710882, "node_id": "MDU6SXNzdWU2NTcxMDg4Mg==", "number": 968, "title": "Empty zip files included when downloading multiple submissions", "user": {"login": "garrettr", "id": 407302, "node_id": "MDQ6VXNlcjQwNzMwMg==", "avatar_url": "https://avatars.githubusercontent.com/u/407302?v=4", "gravatar_id": "", "url": "https://api.github.com/users/garrettr", "html_url": "https://github.com/garrettr", "followers_url": "https://api.github.com/users/garrettr/followers", "following_url": "https://api.github.com/users/garrettr/following{/other_user}", "gists_url": "https://api.github.com/users/garrettr/gists{/gist_id}", "starred_url": "https://api.github.com/users/garrettr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/garrettr/subscriptions", "organizations_url": "https://api.github.com/users/garrettr/orgs", "repos_url": "https://api.github.com/users/garrettr/repos", "events_url": "https://api.github.com/users/garrettr/events{/privacy}", "received_events_url": "https://api.github.com/users/garrettr/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "garrettr", "id": 407302, "node_id": "MDQ6VXNlcjQwNzMwMg==", "avatar_url": "https://avatars.githubusercontent.com/u/407302?v=4", "gravatar_id": "", "url": "https://api.github.com/users/garrettr", "html_url": "https://github.com/garrettr", "followers_url": "https://api.github.com/users/garrettr/followers", "following_url": "https://api.github.com/users/garrettr/following{/other_user}", "gists_url": "https://api.github.com/users/garrettr/gists{/gist_id}", "starred_url": "https://api.github.com/users/garrettr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/garrettr/subscriptions", "organizations_url": "https://api.github.com/users/garrettr/orgs", "repos_url": "https://api.github.com/users/garrettr/repos", "events_url": "https://api.github.com/users/garrettr/events{/privacy}", "received_events_url": "https://api.github.com/users/garrettr/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "garrettr", "id": 407302, "node_id": "MDQ6VXNlcjQwNzMwMg==", "avatar_url": "https://avatars.githubusercontent.com/u/407302?v=4", "gravatar_id": "", "url": "https://api.github.com/users/garrettr", "html_url": "https://github.com/garrettr", "followers_url": "https://api.github.com/users/garrettr/followers", "following_url": "https://api.github.com/users/garrettr/following{/other_user}", "gists_url": "https://api.github.com/users/garrettr/gists{/gist_id}", "starred_url": "https://api.github.com/users/garrettr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/garrettr/subscriptions", "organizations_url": "https://api.github.com/users/garrettr/orgs", "repos_url": "https://api.github.com/users/garrettr/repos", "events_url": "https://api.github.com/users/garrettr/events{/privacy}", "received_events_url": "https://api.github.com/users/garrettr/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/freedomofpress/securedrop/milestones/8", "html_url": "https://github.com/freedomofpress/securedrop/milestone/8", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/milestones/8/labels", "id": 1038845, "node_id": "MDk6TWlsZXN0b25lMTAzODg0NQ==", "number": 8, "title": "0.3.3", "description": "", "creator": {"login": "garrettr", "id": 407302, "node_id": "MDQ6VXNlcjQwNzMwMg==", "avatar_url": "https://avatars.githubusercontent.com/u/407302?v=4", "gravatar_id": "", "url": "https://api.github.com/users/garrettr", "html_url": "https://github.com/garrettr", "followers_url": "https://api.github.com/users/garrettr/followers", "following_url": "https://api.github.com/users/garrettr/following{/other_user}", "gists_url": "https://api.github.com/users/garrettr/gists{/gist_id}", "starred_url": "https://api.github.com/users/garrettr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/garrettr/subscriptions", "organizations_url": "https://api.github.com/users/garrettr/orgs", "repos_url": "https://api.github.com/users/garrettr/repos", "events_url": "https://api.github.com/users/garrettr/events{/privacy}", "received_events_url": "https://api.github.com/users/garrettr/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 21, "state": "closed", "created_at": "2015-03-25T17:39:44Z", "updated_at": "2015-06-09T19:24:12Z", "due_on": "2015-05-07T07:00:00Z", "closed_at": "2015-06-09T19:24:12Z"}, "comments": 3, "created_at": "2015-04-01T15:23:15Z", "updated_at": "2015-04-24T19:46:08Z", "closed_at": "2015-04-24T19:46:08Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "> The only other piece of feedback I have from the team pertains to the  packaging of submissions. We had a case where a message was left but  no document uploaded, and it appeared to give us two files to download but one was an empty zip file.\n\nIn this case, they downloaded multiple submissions (either by clicking \"download unread\" or selecting multiple submissions on a collection page and clicking \"Download selected\"). Either the source submitted an empty zip file (unlikely but possible), or this is a bug.\n\nThis may be related to #709.\n", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/968/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/968/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/948", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/948/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/948/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/948/events", "html_url": "https://github.com/freedomofpress/securedrop/issues/948", "id": 64397950, "node_id": "MDU6SXNzdWU2NDM5Nzk1MA==", "number": 948, "title": "CSS fixes", "user": {"login": "garrettr", "id": 407302, "node_id": "MDQ6VXNlcjQwNzMwMg==", "avatar_url": "https://avatars.githubusercontent.com/u/407302?v=4", "gravatar_id": "", "url": "https://api.github.com/users/garrettr", "html_url": "https://github.com/garrettr", "followers_url": "https://api.github.com/users/garrettr/followers", "following_url": "https://api.github.com/users/garrettr/following{/other_user}", "gists_url": "https://api.github.com/users/garrettr/gists{/gist_id}", "starred_url": "https://api.github.com/users/garrettr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/garrettr/subscriptions", "organizations_url": "https://api.github.com/users/garrettr/orgs", "repos_url": "https://api.github.com/users/garrettr/repos", "events_url": "https://api.github.com/users/garrettr/events{/privacy}", "received_events_url": "https://api.github.com/users/garrettr/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}, {"id": 192539755, "node_id": "MDU6TGFiZWwxOTI1Mzk3NTU=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/app", "name": "app", "color": "bfe5bf", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "garrettr", "id": 407302, "node_id": "MDQ6VXNlcjQwNzMwMg==", "avatar_url": "https://avatars.githubusercontent.com/u/407302?v=4", "gravatar_id": "", "url": "https://api.github.com/users/garrettr", "html_url": "https://github.com/garrettr", "followers_url": "https://api.github.com/users/garrettr/followers", "following_url": "https://api.github.com/users/garrettr/following{/other_user}", "gists_url": "https://api.github.com/users/garrettr/gists{/gist_id}", "starred_url": "https://api.github.com/users/garrettr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/garrettr/subscriptions", "organizations_url": "https://api.github.com/users/garrettr/orgs", "repos_url": "https://api.github.com/users/garrettr/repos", "events_url": "https://api.github.com/users/garrettr/events{/privacy}", "received_events_url": "https://api.github.com/users/garrettr/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "garrettr", "id": 407302, "node_id": "MDQ6VXNlcjQwNzMwMg==", "avatar_url": "https://avatars.githubusercontent.com/u/407302?v=4", "gravatar_id": "", "url": "https://api.github.com/users/garrettr", "html_url": "https://github.com/garrettr", "followers_url": "https://api.github.com/users/garrettr/followers", "following_url": "https://api.github.com/users/garrettr/following{/other_user}", "gists_url": "https://api.github.com/users/garrettr/gists{/gist_id}", "starred_url": "https://api.github.com/users/garrettr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/garrettr/subscriptions", "organizations_url": "https://api.github.com/users/garrettr/orgs", "repos_url": "https://api.github.com/users/garrettr/repos", "events_url": "https://api.github.com/users/garrettr/events{/privacy}", "received_events_url": "https://api.github.com/users/garrettr/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/freedomofpress/securedrop/milestones/8", "html_url": "https://github.com/freedomofpress/securedrop/milestone/8", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/milestones/8/labels", "id": 1038845, "node_id": "MDk6TWlsZXN0b25lMTAzODg0NQ==", "number": 8, "title": "0.3.3", "description": "", "creator": {"login": "garrettr", "id": 407302, "node_id": "MDQ6VXNlcjQwNzMwMg==", "avatar_url": "https://avatars.githubusercontent.com/u/407302?v=4", "gravatar_id": "", "url": "https://api.github.com/users/garrettr", "html_url": "https://github.com/garrettr", "followers_url": "https://api.github.com/users/garrettr/followers", "following_url": "https://api.github.com/users/garrettr/following{/other_user}", "gists_url": "https://api.github.com/users/garrettr/gists{/gist_id}", "starred_url": "https://api.github.com/users/garrettr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/garrettr/subscriptions", "organizations_url": "https://api.github.com/users/garrettr/orgs", "repos_url": "https://api.github.com/users/garrettr/repos", "events_url": "https://api.github.com/users/garrettr/events{/privacy}", "received_events_url": "https://api.github.com/users/garrettr/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 21, "state": "closed", "created_at": "2015-03-25T17:39:44Z", "updated_at": "2015-06-09T19:24:12Z", "due_on": "2015-05-07T07:00:00Z", "closed_at": "2015-06-09T19:24:12Z"}, "comments": 0, "created_at": "2015-03-25T23:46:53Z", "updated_at": "2015-03-30T18:52:14Z", "closed_at": "2015-03-30T18:52:14Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "There are some minor CSS issues that should be addressed relatively soon:\n1. #929 collapsed the bottom margins on the everything in the Document Interface, which means the UI look cramped. Screenshot: ![screen shot 2015-03-25 at 4 43 22 pm](https://cloud.githubusercontent.com/assets/407302/6837805/2a436330-d30e-11e4-8aea-ddc8d93c3bfd.png)\n2. The Source Interface is not centered within the window: ![screen shot 2015-03-25 at 4 44 36 pm](https://cloud.githubusercontent.com/assets/407302/6837813/436577cc-d30e-11e4-9f39-1f726bbf4c1b.png)\n\nI was never able to reproduce #929, and @ageis just failed to reproduce it on his laptop (Linux, in TBB). As a result, I think we can safely revert it.\n\nTasks:\n- [x] Revert #929\n- [x] Center Source Interface in window\n- [x] Split source and journalist CSS into separate files\n  - I've been meaning to do this for a while, and this is a classic example of why it's bad to share those two files: changes meant to fix a display issue on the Source Interface negatively affected the layout on the Document Interface.\n- [x] Document testing styles in the Tor Browser w/ the development server (on localhost)\n", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/948/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/948/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/945", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/945/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/945/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/945/events", "html_url": "https://github.com/freedomofpress/securedrop/issues/945", "id": 64186436, "node_id": "MDU6SXNzdWU2NDE4NjQzNg==", "number": 945, "title": "GRUB gets uninstalled in virtual machines, breaks re-provisioning", "user": {"login": "ageis", "id": 1161532, "node_id": "MDQ6VXNlcjExNjE1MzI=", "avatar_url": "https://avatars.githubusercontent.com/u/1161532?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ageis", "html_url": "https://github.com/ageis", "followers_url": "https://api.github.com/users/ageis/followers", "following_url": "https://api.github.com/users/ageis/following{/other_user}", "gists_url": "https://api.github.com/users/ageis/gists{/gist_id}", "starred_url": "https://api.github.com/users/ageis/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ageis/subscriptions", "organizations_url": "https://api.github.com/users/ageis/orgs", "repos_url": "https://api.github.com/users/ageis/repos", "events_url": "https://api.github.com/users/ageis/events{/privacy}", "received_events_url": "https://api.github.com/users/ageis/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}, {"id": 157793311, "node_id": "MDU6TGFiZWwxNTc3OTMzMTE=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/priority/high", "name": "priority/high", "color": "e64ef4", "default": false, "description": ""}, {"id": 192539287, "node_id": "MDU6TGFiZWwxOTI1MzkyODc=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/ops/deployment", "name": "ops/deployment", "color": "c7def8", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "ageis", "id": 1161532, "node_id": "MDQ6VXNlcjExNjE1MzI=", "avatar_url": "https://avatars.githubusercontent.com/u/1161532?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ageis", "html_url": "https://github.com/ageis", "followers_url": "https://api.github.com/users/ageis/followers", "following_url": "https://api.github.com/users/ageis/following{/other_user}", "gists_url": "https://api.github.com/users/ageis/gists{/gist_id}", "starred_url": "https://api.github.com/users/ageis/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ageis/subscriptions", "organizations_url": "https://api.github.com/users/ageis/orgs", "repos_url": "https://api.github.com/users/ageis/repos", "events_url": "https://api.github.com/users/ageis/events{/privacy}", "received_events_url": "https://api.github.com/users/ageis/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ageis", "id": 1161532, "node_id": "MDQ6VXNlcjExNjE1MzI=", "avatar_url": "https://avatars.githubusercontent.com/u/1161532?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ageis", "html_url": "https://github.com/ageis", "followers_url": "https://api.github.com/users/ageis/followers", "following_url": "https://api.github.com/users/ageis/following{/other_user}", "gists_url": "https://api.github.com/users/ageis/gists{/gist_id}", "starred_url": "https://api.github.com/users/ageis/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ageis/subscriptions", "organizations_url": "https://api.github.com/users/ageis/orgs", "repos_url": "https://api.github.com/users/ageis/repos", "events_url": "https://api.github.com/users/ageis/events{/privacy}", "received_events_url": "https://api.github.com/users/ageis/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/freedomofpress/securedrop/milestones/8", "html_url": "https://github.com/freedomofpress/securedrop/milestone/8", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/milestones/8/labels", "id": 1038845, "node_id": "MDk6TWlsZXN0b25lMTAzODg0NQ==", "number": 8, "title": "0.3.3", "description": "", "creator": {"login": "garrettr", "id": 407302, "node_id": "MDQ6VXNlcjQwNzMwMg==", "avatar_url": "https://avatars.githubusercontent.com/u/407302?v=4", "gravatar_id": "", "url": "https://api.github.com/users/garrettr", "html_url": "https://github.com/garrettr", "followers_url": "https://api.github.com/users/garrettr/followers", "following_url": "https://api.github.com/users/garrettr/following{/other_user}", "gists_url": "https://api.github.com/users/garrettr/gists{/gist_id}", "starred_url": "https://api.github.com/users/garrettr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/garrettr/subscriptions", "organizations_url": "https://api.github.com/users/garrettr/orgs", "repos_url": "https://api.github.com/users/garrettr/repos", "events_url": "https://api.github.com/users/garrettr/events{/privacy}", "received_events_url": "https://api.github.com/users/garrettr/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 21, "state": "closed", "created_at": "2015-03-25T17:39:44Z", "updated_at": "2015-06-09T19:24:12Z", "due_on": "2015-05-07T07:00:00Z", "closed_at": "2015-06-09T19:24:12Z"}, "comments": 2, "created_at": "2015-03-25T06:06:18Z", "updated_at": "2015-04-01T18:11:25Z", "closed_at": "2015-04-01T18:11:25Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "My code which was merged in #919 (fixes #913) includes a task that runs `apt-get autoremove` in order to clean up any dependencies left after the generic Linux kernel and headers packages and metapackages have been removed.\n\nI noticed a couple nights ago that on a Vagrant VM, this has the effect of causing GRUB to be removed. I assume that this might be a peculiarity of the Ubuntu cloud image `trusty-server-cloudimg-amd64-vagrant-disk1.box`, where its kernel (linux-image-virtual/linux-virtual) has a dependency on GRUB. I'm fairly certainly we haven't seen this on hardware.\n\nIn any case, the VM still boots and everything. The problem with this is that it breaks our playbook in case you ever try to re-provision the VM.\n\nAs a fix we may need to add in detection for VMs (perhaps by checking if linux-image-virtual has been installed), and make it so that the grub paxctl task doesn't get run, or so that GRUB is not removed.\n\nThe first snippet shown below is the problematic task, and the second one is the error you get upon re-provisioning. \n\n```\nTASK: [common | cleanup any dependencies left] ******************************** \nchanged: [app-staging] => {\"changed\": true, \"cmd\": [\"apt-get\", \"-y\", \"autoremove\"], \"delta\": \"0:00:01.635721\", \"end\": \"2015-03-25 05:52:18.262199\", \"rc\": 0, \"start\": \"2015-03-25 05:52:16.626478\", \"stderr\": \"debconf: unable to initialize frontend: Dialog\\ndebconf: (Dialog frontend will not work on a dumb terminal, an emacs shell buffer, or without a controlling terminal.)\\ndebconf: falling back to frontend: Readline\\ndebconf: unable to initialize frontend: Readline\\ndebconf: (This frontend requires a controlling tty.)\\ndebconf: falling back to frontend: Teletype\\nSaving menu.lst backup in /boot/grub/menu.lst_backup_by_grub2_prerm\\nRunning update-grub Legacy to remove our core.img in it\\n    Searching for GRUB installation directory ... found: /boot/grub\\n    /usr/lib/grub-legacy/update-grub: line 116: grub: command not found\\n    /usr/lib/grub-legacy/update-grub: line 116: grub: command not found\\n    /usr/lib/grub-legacy/update-grub: line 153: grub: command not found\\n    Searching for default file ... found: /boot/grub/default\\n    Testing for an existing GRUB menu.lst file ... found: /boot/grub/menu.lst\\n    Searching for splash image ... none found, skipping ...\\n    Found kernel: /boot/vmlinuz-3.14.36-grsec\\n    Updating /boot/grub/menu.lst ... done\\n    \", \"stdout\": \"Reading package lists...\\nBuilding dependency tree...\\nReading state information...\\nThe following packages will be REMOVED:\\n  grub-common grub-gfxpayload-lists grub-pc grub-pc-bin grub2-common os-prober\\n0 upgraded, 0 newly installed, 6 to remove and 108 not upgraded.\\nAfter this operation, 16.5 MB disk space will be freed.\\n(Reading database ... 40241 files and directories currently installed.)\\nRemoving os-prober (1.63ubuntu1) ...\\nRemoving grub-gfxpayload-lists (0.6) ...\\nRemoving grub-pc (2.02~beta2-9ubuntu1) ...\\nRemoving grub2-common (2.02~beta2-9ubuntu1) ...\\nRemoving grub-pc-bin (2.02~beta2-9ubuntu1) ...\\nRemoving grub-common (2.02~beta2-9ubuntu1) ...\\nProcessing triggers for man-db (2.6.7.1-1ubuntu1) ...\\nProcessing triggers for install-info (5.2.0.dfsg.1-2) ...\", \"warnings\": [\"Consider using apt-get module rather than running apt-get\"]}\n```\n\n---\n\n```\nTASK: [common | make the required grub paxctl changes] ************************ \nfailed: [app-staging] => (item=/usr/sbin/grub-probe) => {\"changed\": true, \"cmd\": [\"paxctl\", \"-Cpm\", \"/usr/sbin/grub-probe\"], \"delta\": \"0:00:00.012804\", \"end\": \"2015-03-25 05:46:23.918155\", \"item\": \"/usr/sbin/grub-probe\", \"rc\": 1, \"start\": \"2015-03-25 05:46:23.905351\", \"warnings\": []}\nstderr: /usr/sbin/grub-probe: No such file or directory\nfailed: [app-staging] => (item=/usr/sbin/grub-mkdevicemap) => {\"changed\": true, \"cmd\": [\"paxctl\", \"-Cpm\", \"/usr/sbin/grub-mkdevicemap\"], \"delta\": \"0:00:00.004108\", \"end\": \"2015-03-25 05:46:23.998212\", \"item\": \"/usr/sbin/grub-mkdevicemap\", \"rc\": 1, \"start\": \"2015-03-25 05:46:23.994104\", \"warnings\": []}\nstderr: /usr/sbin/grub-mkdevicemap: No such file or directory\n\nFATAL: all hosts have already failed -- aborting\n```\n", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/945/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/945/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/858", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/858/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/858/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/858/events", "html_url": "https://github.com/freedomofpress/securedrop/issues/858", "id": 55972607, "node_id": "MDU6SXNzdWU1NTk3MjYwNw==", "number": 858, "title": "When ossec_gpg_fpr is invalid, OSSEC sends empty emails", "user": {"login": "garrettr", "id": 407302, "node_id": "MDQ6VXNlcjQwNzMwMg==", "avatar_url": "https://avatars.githubusercontent.com/u/407302?v=4", "gravatar_id": "", "url": "https://api.github.com/users/garrettr", "html_url": "https://github.com/garrettr", "followers_url": "https://api.github.com/users/garrettr/followers", "following_url": "https://api.github.com/users/garrettr/following{/other_user}", "gists_url": "https://api.github.com/users/garrettr/gists{/gist_id}", "starred_url": "https://api.github.com/users/garrettr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/garrettr/subscriptions", "organizations_url": "https://api.github.com/users/garrettr/orgs", "repos_url": "https://api.github.com/users/garrettr/repos", "events_url": "https://api.github.com/users/garrettr/events{/privacy}", "received_events_url": "https://api.github.com/users/garrettr/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}, {"id": 192539287, "node_id": "MDU6TGFiZWwxOTI1MzkyODc=", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/ops/deployment", "name": "ops/deployment", "color": "c7def8", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/freedomofpress/securedrop/milestones/5", "html_url": "https://github.com/freedomofpress/securedrop/milestone/5", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/milestones/5/labels", "id": 691723, "node_id": "MDk6TWlsZXN0b25lNjkxNzIz", "number": 5, "title": "0.4", "description": "Resolve develop-master diff and smooth out release workflow", "creator": {"login": "garrettr", "id": 407302, "node_id": "MDQ6VXNlcjQwNzMwMg==", "avatar_url": "https://avatars.githubusercontent.com/u/407302?v=4", "gravatar_id": "", "url": "https://api.github.com/users/garrettr", "html_url": "https://github.com/garrettr", "followers_url": "https://api.github.com/users/garrettr/followers", "following_url": "https://api.github.com/users/garrettr/following{/other_user}", "gists_url": "https://api.github.com/users/garrettr/gists{/gist_id}", "starred_url": "https://api.github.com/users/garrettr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/garrettr/subscriptions", "organizations_url": "https://api.github.com/users/garrettr/orgs", "repos_url": "https://api.github.com/users/garrettr/repos", "events_url": "https://api.github.com/users/garrettr/events{/privacy}", "received_events_url": "https://api.github.com/users/garrettr/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 126, "state": "closed", "created_at": "2014-06-15T22:57:42Z", "updated_at": "2020-10-09T18:38:48Z", "due_on": "2017-07-11T07:00:00Z", "closed_at": "2017-07-31T22:15:38Z"}, "comments": 4, "created_at": "2015-01-29T23:21:21Z", "updated_at": "2017-05-11T18:27:09Z", "closed_at": "2017-05-11T18:27:09Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "**STR**\n1. Fill out the OSSEC information in `staging-specific.yml`, following the instructions in `docs/ossec_alerts.md`.\n2. Mess up the value of `ossec_gpg_fpr`. In my case, I accidentally deleted a character of the fingerprint while manually removing whitespace (which is present by default in the output of `gpg --with-fingerprint`).\n3. `vagrant up /staging$/\n4. Note that the OSSEC emails you receive contain correct-seeming subject lines, but the emails themselves are empty.\n\nAt a minimum, this should trigger errors on the installed system. From a cursory examination, I did not see any errors from encrypting the emails in `/var/ossec/logs/ossec.log` or `/var/log/mail.log`. Even better, we should prevent the install from happening if this kind of error is apparent in the configuration.\n", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/858/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/858/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/802", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/802/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/802/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/802/events", "html_url": "https://github.com/freedomofpress/securedrop/issues/802", "id": 51662729, "node_id": "MDU6SXNzdWU1MTY2MjcyOQ==", "number": 802, "title": "mon-staging provisioning fails with latest Ansible", "user": {"login": "ageis", "id": 1161532, "node_id": "MDQ6VXNlcjExNjE1MzI=", "avatar_url": "https://avatars.githubusercontent.com/u/1161532?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ageis", "html_url": "https://github.com/ageis", "followers_url": "https://api.github.com/users/ageis/followers", "following_url": "https://api.github.com/users/ageis/following{/other_user}", "gists_url": "https://api.github.com/users/ageis/gists{/gist_id}", "starred_url": "https://api.github.com/users/ageis/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ageis/subscriptions", "organizations_url": "https://api.github.com/users/ageis/orgs", "repos_url": "https://api.github.com/users/ageis/repos", "events_url": "https://api.github.com/users/ageis/events{/privacy}", "received_events_url": "https://api.github.com/users/ageis/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/freedomofpress/securedrop/milestones/5", "html_url": "https://github.com/freedomofpress/securedrop/milestone/5", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/milestones/5/labels", "id": 691723, "node_id": "MDk6TWlsZXN0b25lNjkxNzIz", "number": 5, "title": "0.4", "description": "Resolve develop-master diff and smooth out release workflow", "creator": {"login": "garrettr", "id": 407302, "node_id": "MDQ6VXNlcjQwNzMwMg==", "avatar_url": "https://avatars.githubusercontent.com/u/407302?v=4", "gravatar_id": "", "url": "https://api.github.com/users/garrettr", "html_url": "https://github.com/garrettr", "followers_url": "https://api.github.com/users/garrettr/followers", "following_url": "https://api.github.com/users/garrettr/following{/other_user}", "gists_url": "https://api.github.com/users/garrettr/gists{/gist_id}", "starred_url": "https://api.github.com/users/garrettr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/garrettr/subscriptions", "organizations_url": "https://api.github.com/users/garrettr/orgs", "repos_url": "https://api.github.com/users/garrettr/repos", "events_url": "https://api.github.com/users/garrettr/events{/privacy}", "received_events_url": "https://api.github.com/users/garrettr/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 126, "state": "closed", "created_at": "2014-06-15T22:57:42Z", "updated_at": "2020-10-09T18:38:48Z", "due_on": "2017-07-11T07:00:00Z", "closed_at": "2017-07-31T22:15:38Z"}, "comments": 9, "created_at": "2014-12-11T09:10:01Z", "updated_at": "2015-03-23T21:08:43Z", "closed_at": "2015-03-23T21:08:43Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Ran into issues provisioning staging VM running the newest Ansible 1.8.2 and Vagrant 1.7.0:\n\n```\nfatal: [mon-staging] => SSH Error: data could not be sent to the remote host. Make sure this host can be reached over ssh\n```\n\nReproduced by @garrettr.\n", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/802/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/802/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/789", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/789/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/789/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/789/events", "html_url": "https://github.com/freedomofpress/securedrop/issues/789", "id": 51167090, "node_id": "MDU6SXNzdWU1MTE2NzA5MA==", "number": 789, "title": "When sources that are \"flagged\" generate a gpg key they don't move to the top", "user": {"login": "micahflee", "id": 156128, "node_id": "MDQ6VXNlcjE1NjEyOA==", "avatar_url": "https://avatars.githubusercontent.com/u/156128?v=4", "gravatar_id": "", "url": "https://api.github.com/users/micahflee", "html_url": "https://github.com/micahflee", "followers_url": "https://api.github.com/users/micahflee/followers", "following_url": "https://api.github.com/users/micahflee/following{/other_user}", "gists_url": "https://api.github.com/users/micahflee/gists{/gist_id}", "starred_url": "https://api.github.com/users/micahflee/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/micahflee/subscriptions", "organizations_url": "https://api.github.com/users/micahflee/orgs", "repos_url": "https://api.github.com/users/micahflee/repos", "events_url": "https://api.github.com/users/micahflee/events{/privacy}", "received_events_url": "https://api.github.com/users/micahflee/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "garrettr", "id": 407302, "node_id": "MDQ6VXNlcjQwNzMwMg==", "avatar_url": "https://avatars.githubusercontent.com/u/407302?v=4", "gravatar_id": "", "url": "https://api.github.com/users/garrettr", "html_url": "https://github.com/garrettr", "followers_url": "https://api.github.com/users/garrettr/followers", "following_url": "https://api.github.com/users/garrettr/following{/other_user}", "gists_url": "https://api.github.com/users/garrettr/gists{/gist_id}", "starred_url": "https://api.github.com/users/garrettr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/garrettr/subscriptions", "organizations_url": "https://api.github.com/users/garrettr/orgs", "repos_url": "https://api.github.com/users/garrettr/repos", "events_url": "https://api.github.com/users/garrettr/events{/privacy}", "received_events_url": "https://api.github.com/users/garrettr/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "garrettr", "id": 407302, "node_id": "MDQ6VXNlcjQwNzMwMg==", "avatar_url": "https://avatars.githubusercontent.com/u/407302?v=4", "gravatar_id": "", "url": "https://api.github.com/users/garrettr", "html_url": "https://github.com/garrettr", "followers_url": "https://api.github.com/users/garrettr/followers", "following_url": "https://api.github.com/users/garrettr/following{/other_user}", "gists_url": "https://api.github.com/users/garrettr/gists{/gist_id}", "starred_url": "https://api.github.com/users/garrettr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/garrettr/subscriptions", "organizations_url": "https://api.github.com/users/garrettr/orgs", "repos_url": "https://api.github.com/users/garrettr/repos", "events_url": "https://api.github.com/users/garrettr/events{/privacy}", "received_events_url": "https://api.github.com/users/garrettr/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/freedomofpress/securedrop/milestones/6", "html_url": "https://github.com/freedomofpress/securedrop/milestone/6", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/milestones/6/labels", "id": 691725, "node_id": "MDk6TWlsZXN0b25lNjkxNzI1", "number": 6, "title": "0.3", "description": "Issues for the 0.3 release (audit fixes, etc.)", "creator": {"login": "garrettr", "id": 407302, "node_id": "MDQ6VXNlcjQwNzMwMg==", "avatar_url": "https://avatars.githubusercontent.com/u/407302?v=4", "gravatar_id": "", "url": "https://api.github.com/users/garrettr", "html_url": "https://github.com/garrettr", "followers_url": "https://api.github.com/users/garrettr/followers", "following_url": "https://api.github.com/users/garrettr/following{/other_user}", "gists_url": "https://api.github.com/users/garrettr/gists{/gist_id}", "starred_url": "https://api.github.com/users/garrettr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/garrettr/subscriptions", "organizations_url": "https://api.github.com/users/garrettr/orgs", "repos_url": "https://api.github.com/users/garrettr/repos", "events_url": "https://api.github.com/users/garrettr/events{/privacy}", "received_events_url": "https://api.github.com/users/garrettr/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 43, "state": "closed", "created_at": "2014-06-15T22:59:25Z", "updated_at": "2015-03-03T23:29:28Z", "due_on": "2015-01-26T08:00:00Z", "closed_at": "2015-03-03T23:29:28Z"}, "comments": 0, "created_at": "2014-12-06T02:16:44Z", "updated_at": "2014-12-10T23:24:25Z", "closed_at": "2014-12-10T23:24:25Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "The list of sources is sorted chronologically by latest activity.\n\nIf there's a source that's flagged for response and then they login and therefore generate a gpg key, SecureDrop 0.3 doesn't consider that new activity. This means that the journalist is in no way notified that they can now write a response to that source if they want to.\n\nSecureDrop 0.2.1 did consider it new activity, and that source rose to the top of the list.\n\nThis is an extremely minor issue though, since in most cases now the \"flag for response\" feature will never be used anyway, unless there's an entropy DoS.\n", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/789/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/789/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/787", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/787/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/787/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/787/events", "html_url": "https://github.com/freedomofpress/securedrop/issues/787", "id": 51164801, "node_id": "MDU6SXNzdWU1MTE2NDgwMQ==", "number": 787, "title": "\"./manage.py test\" error", "user": {"login": "micahflee", "id": 156128, "node_id": "MDQ6VXNlcjE1NjEyOA==", "avatar_url": "https://avatars.githubusercontent.com/u/156128?v=4", "gravatar_id": "", "url": "https://api.github.com/users/micahflee", "html_url": "https://github.com/micahflee", "followers_url": "https://api.github.com/users/micahflee/followers", "following_url": "https://api.github.com/users/micahflee/following{/other_user}", "gists_url": "https://api.github.com/users/micahflee/gists{/gist_id}", "starred_url": "https://api.github.com/users/micahflee/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/micahflee/subscriptions", "organizations_url": "https://api.github.com/users/micahflee/orgs", "repos_url": "https://api.github.com/users/micahflee/repos", "events_url": "https://api.github.com/users/micahflee/events{/privacy}", "received_events_url": "https://api.github.com/users/micahflee/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "garrettr", "id": 407302, "node_id": "MDQ6VXNlcjQwNzMwMg==", "avatar_url": "https://avatars.githubusercontent.com/u/407302?v=4", "gravatar_id": "", "url": "https://api.github.com/users/garrettr", "html_url": "https://github.com/garrettr", "followers_url": "https://api.github.com/users/garrettr/followers", "following_url": "https://api.github.com/users/garrettr/following{/other_user}", "gists_url": "https://api.github.com/users/garrettr/gists{/gist_id}", "starred_url": "https://api.github.com/users/garrettr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/garrettr/subscriptions", "organizations_url": "https://api.github.com/users/garrettr/orgs", "repos_url": "https://api.github.com/users/garrettr/repos", "events_url": "https://api.github.com/users/garrettr/events{/privacy}", "received_events_url": "https://api.github.com/users/garrettr/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "garrettr", "id": 407302, "node_id": "MDQ6VXNlcjQwNzMwMg==", "avatar_url": "https://avatars.githubusercontent.com/u/407302?v=4", "gravatar_id": "", "url": "https://api.github.com/users/garrettr", "html_url": "https://github.com/garrettr", "followers_url": "https://api.github.com/users/garrettr/followers", "following_url": "https://api.github.com/users/garrettr/following{/other_user}", "gists_url": "https://api.github.com/users/garrettr/gists{/gist_id}", "starred_url": "https://api.github.com/users/garrettr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/garrettr/subscriptions", "organizations_url": "https://api.github.com/users/garrettr/orgs", "repos_url": "https://api.github.com/users/garrettr/repos", "events_url": "https://api.github.com/users/garrettr/events{/privacy}", "received_events_url": "https://api.github.com/users/garrettr/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/freedomofpress/securedrop/milestones/6", "html_url": "https://github.com/freedomofpress/securedrop/milestone/6", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/milestones/6/labels", "id": 691725, "node_id": "MDk6TWlsZXN0b25lNjkxNzI1", "number": 6, "title": "0.3", "description": "Issues for the 0.3 release (audit fixes, etc.)", "creator": {"login": "garrettr", "id": 407302, "node_id": "MDQ6VXNlcjQwNzMwMg==", "avatar_url": "https://avatars.githubusercontent.com/u/407302?v=4", "gravatar_id": "", "url": "https://api.github.com/users/garrettr", "html_url": "https://github.com/garrettr", "followers_url": "https://api.github.com/users/garrettr/followers", "following_url": "https://api.github.com/users/garrettr/following{/other_user}", "gists_url": "https://api.github.com/users/garrettr/gists{/gist_id}", "starred_url": "https://api.github.com/users/garrettr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/garrettr/subscriptions", "organizations_url": "https://api.github.com/users/garrettr/orgs", "repos_url": "https://api.github.com/users/garrettr/repos", "events_url": "https://api.github.com/users/garrettr/events{/privacy}", "received_events_url": "https://api.github.com/users/garrettr/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 43, "state": "closed", "created_at": "2014-06-15T22:59:25Z", "updated_at": "2015-03-03T23:29:28Z", "due_on": "2015-01-26T08:00:00Z", "closed_at": "2015-03-03T23:29:28Z"}, "comments": 2, "created_at": "2014-12-06T01:13:31Z", "updated_at": "2014-12-07T20:51:38Z", "closed_at": "2014-12-07T20:51:38Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "After installing securedrop 0.3, the instructions say to try running unit and functional tests. https://github.com/freedomofpress/securedrop/blob/develop/docs/install.md#additional-testing\n\nIn my test install, when I try running the tests I get this error:\n\n```\nroot@app:/var/www/securedrop# ./manage.py test\nTraceback (most recent call last):\n  File \"./manage.py\", line 230, in <module>\n    main()\n  File \"./manage.py\", line 225, in main\n    getattr(sys.modules[__name__], cmd)()\n  File \"./manage.py\", line 90, in test\n    test_rc = int(any([subprocess.call(cmd) for cmd in test_cmds]))\n  File \"/usr/lib/python2.7/subprocess.py\", line 522, in call\n    return Popen(*popenargs, **kwargs).wait()\n  File \"/usr/lib/python2.7/subprocess.py\", line 710, in __init__\n    errread, errwrite)\n  File \"/usr/lib/python2.7/subprocess.py\", line 1327, in _execute_child\n    raise child_exception\nOSError: [Errno 2] No such file or directory\nroot@app:/var/www/securedrop# \n```\n", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/787/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/787/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/760", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/760/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/760/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/760/events", "html_url": "https://github.com/freedomofpress/securedrop/issues/760", "id": 49768784, "node_id": "MDU6SXNzdWU0OTc2ODc4NA==", "number": 760, "title": "Ansible fails in common on grsec_lock", "user": {"login": "ageis", "id": 1161532, "node_id": "MDQ6VXNlcjExNjE1MzI=", "avatar_url": "https://avatars.githubusercontent.com/u/1161532?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ageis", "html_url": "https://github.com/ageis", "followers_url": "https://api.github.com/users/ageis/followers", "following_url": "https://api.github.com/users/ageis/following{/other_user}", "gists_url": "https://api.github.com/users/ageis/gists{/gist_id}", "starred_url": "https://api.github.com/users/ageis/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ageis/subscriptions", "organizations_url": "https://api.github.com/users/ageis/orgs", "repos_url": "https://api.github.com/users/ageis/repos", "events_url": "https://api.github.com/users/ageis/events{/privacy}", "received_events_url": "https://api.github.com/users/ageis/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2014-11-22T02:02:53Z", "updated_at": "2016-12-15T20:49:13Z", "closed_at": "2015-04-21T23:39:09Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Running OSX Yosemite (10.10.1), with VirtualBox, vagrant and Ansible fully up-to-date. Trying to run `vagrant up /staging$/` here is where the playbook fails (some context provided):\n\n```\nTASK: [common | waiting for server to come back] ****************************** \nok: [mon-staging -> 127.0.0.1] => {\"changed\": false, \"elapsed\": 20, \"path\": null, \"port\": 2222, \"search_regex\": null, \"state\": \"started\"}\nok: [app-staging -> 127.0.0.1] => {\"changed\": false, \"elapsed\": 20, \"path\": null, \"port\": 2200, \"search_regex\": null, \"state\": \"started\"}\n\nTASK: [common | stat path=\"/proc/sys/kernel/grsecurity/grsec_lock\"] *********** \nfatal: [app-staging] => SSH Error: data could not be sent to the remote host. Make sure this host can be reached over ssh\nfatal: [mon-staging] => SSH Error: data could not be sent to the remote host. Make sure this host can be reached over ssh\n\nFATAL: all hosts have already failed -- aborting\n\nPLAY RECAP ******************************************************************** \n           to retry, use: --limit @/Users/kevin/securedrop-staging.retry\n\napp-staging                : ok=25   changed=20   unreachable=1    failed=0   \nmon-staging                : ok=25   changed=20   unreachable=1    failed=0   \n\nAnsible failed to complete successfully. Any error output should be\nvisible above. Please fix these errors and try again.\n```\n", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/760/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/760/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/736", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/736/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/736/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/736/events", "html_url": "https://github.com/freedomofpress/securedrop/issues/736", "id": 48633807, "node_id": "MDU6SXNzdWU0ODYzMzgwNw==", "number": 736, "title": "Document interface - badtokenexception when trying to login", "user": {"login": "dbgdngit", "id": 5290026, "node_id": "MDQ6VXNlcjUyOTAwMjY=", "avatar_url": "https://avatars.githubusercontent.com/u/5290026?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dbgdngit", "html_url": "https://github.com/dbgdngit", "followers_url": "https://api.github.com/users/dbgdngit/followers", "following_url": "https://api.github.com/users/dbgdngit/following{/other_user}", "gists_url": "https://api.github.com/users/dbgdngit/gists{/gist_id}", "starred_url": "https://api.github.com/users/dbgdngit/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dbgdngit/subscriptions", "organizations_url": "https://api.github.com/users/dbgdngit/orgs", "repos_url": "https://api.github.com/users/dbgdngit/repos", "events_url": "https://api.github.com/users/dbgdngit/events{/privacy}", "received_events_url": "https://api.github.com/users/dbgdngit/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/freedomofpress/securedrop/milestones/6", "html_url": "https://github.com/freedomofpress/securedrop/milestone/6", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/milestones/6/labels", "id": 691725, "node_id": "MDk6TWlsZXN0b25lNjkxNzI1", "number": 6, "title": "0.3", "description": "Issues for the 0.3 release (audit fixes, etc.)", "creator": {"login": "garrettr", "id": 407302, "node_id": "MDQ6VXNlcjQwNzMwMg==", "avatar_url": "https://avatars.githubusercontent.com/u/407302?v=4", "gravatar_id": "", "url": "https://api.github.com/users/garrettr", "html_url": "https://github.com/garrettr", "followers_url": "https://api.github.com/users/garrettr/followers", "following_url": "https://api.github.com/users/garrettr/following{/other_user}", "gists_url": "https://api.github.com/users/garrettr/gists{/gist_id}", "starred_url": "https://api.github.com/users/garrettr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/garrettr/subscriptions", "organizations_url": "https://api.github.com/users/garrettr/orgs", "repos_url": "https://api.github.com/users/garrettr/repos", "events_url": "https://api.github.com/users/garrettr/events{/privacy}", "received_events_url": "https://api.github.com/users/garrettr/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 43, "state": "closed", "created_at": "2014-06-15T22:59:25Z", "updated_at": "2015-03-03T23:29:28Z", "due_on": "2015-01-26T08:00:00Z", "closed_at": "2015-03-03T23:29:28Z"}, "comments": 10, "created_at": "2014-11-13T13:07:14Z", "updated_at": "2014-12-08T20:07:47Z", "closed_at": "2014-12-08T20:07:47Z", "author_association": "NONE", "active_lock_reason": null, "body": "Affected all journalist and admin users, preventing login to document interface\n\ndocument_error.log shows db.badtokenexception\n\nReboot of server 'fixed' issue\n\nssh access using authenticator was unaffected.\n", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/736/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/736/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/686", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/686/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/686/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/686/events", "html_url": "https://github.com/freedomofpress/securedrop/issues/686", "id": 46653398, "node_id": "MDU6SXNzdWU0NjY1MzM5OA==", "number": 686, "title": "Replies to the source are displayed in random order", "user": {"login": "runasand", "id": 85289, "node_id": "MDQ6VXNlcjg1Mjg5", "avatar_url": "https://avatars.githubusercontent.com/u/85289?v=4", "gravatar_id": "", "url": "https://api.github.com/users/runasand", "html_url": "https://github.com/runasand", "followers_url": "https://api.github.com/users/runasand/followers", "following_url": "https://api.github.com/users/runasand/following{/other_user}", "gists_url": "https://api.github.com/users/runasand/gists{/gist_id}", "starred_url": "https://api.github.com/users/runasand/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/runasand/subscriptions", "organizations_url": "https://api.github.com/users/runasand/orgs", "repos_url": "https://api.github.com/users/runasand/repos", "events_url": "https://api.github.com/users/runasand/events{/privacy}", "received_events_url": "https://api.github.com/users/runasand/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2014-10-23T17:45:17Z", "updated_at": "2014-10-25T23:14:10Z", "closed_at": "2014-10-25T23:14:10Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "The Source Interface displays replies from the journalist in a random order. From the top, I currently see a message received 7 minutes ago, a message received 1 minute ago, and a message received 3 minutes ago. The Document Interface displays the list of messages in the order they are sent to the source.\n", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/686/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/686/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/598", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/598/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/598/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/598/events", "html_url": "https://github.com/freedomofpress/securedrop/issues/598", "id": 43535068, "node_id": "MDU6SXNzdWU0MzUzNTA2OA==", "number": 598, "title": "TypeError in journalist.js", "user": {"login": "garrettr", "id": 407302, "node_id": "MDQ6VXNlcjQwNzMwMg==", "avatar_url": "https://avatars.githubusercontent.com/u/407302?v=4", "gravatar_id": "", "url": "https://api.github.com/users/garrettr", "html_url": "https://github.com/garrettr", "followers_url": "https://api.github.com/users/garrettr/followers", "following_url": "https://api.github.com/users/garrettr/following{/other_user}", "gists_url": "https://api.github.com/users/garrettr/gists{/gist_id}", "starred_url": "https://api.github.com/users/garrettr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/garrettr/subscriptions", "organizations_url": "https://api.github.com/users/garrettr/orgs", "repos_url": "https://api.github.com/users/garrettr/repos", "events_url": "https://api.github.com/users/garrettr/events{/privacy}", "received_events_url": "https://api.github.com/users/garrettr/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/freedomofpress/securedrop/milestones/6", "html_url": "https://github.com/freedomofpress/securedrop/milestone/6", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/milestones/6/labels", "id": 691725, "node_id": "MDk6TWlsZXN0b25lNjkxNzI1", "number": 6, "title": "0.3", "description": "Issues for the 0.3 release (audit fixes, etc.)", "creator": {"login": "garrettr", "id": 407302, "node_id": "MDQ6VXNlcjQwNzMwMg==", "avatar_url": "https://avatars.githubusercontent.com/u/407302?v=4", "gravatar_id": "", "url": "https://api.github.com/users/garrettr", "html_url": "https://github.com/garrettr", "followers_url": "https://api.github.com/users/garrettr/followers", "following_url": "https://api.github.com/users/garrettr/following{/other_user}", "gists_url": "https://api.github.com/users/garrettr/gists{/gist_id}", "starred_url": "https://api.github.com/users/garrettr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/garrettr/subscriptions", "organizations_url": "https://api.github.com/users/garrettr/orgs", "repos_url": "https://api.github.com/users/garrettr/repos", "events_url": "https://api.github.com/users/garrettr/events{/privacy}", "received_events_url": "https://api.github.com/users/garrettr/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 43, "state": "closed", "created_at": "2014-06-15T22:59:25Z", "updated_at": "2015-03-03T23:29:28Z", "due_on": "2015-01-26T08:00:00Z", "closed_at": "2015-03-03T23:29:28Z"}, "comments": 0, "created_at": "2014-09-22T18:58:33Z", "updated_at": "2014-09-22T22:13:27Z", "closed_at": "2014-09-22T22:13:27Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "On any page in the document interface, if you open the browser development console you will see:\n\n```\nUncaught TypeError: Cannot read property 'replace' of undefined journalist.js:57\n```\n", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/598/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/598/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/547", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/547/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/547/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/547/events", "html_url": "https://github.com/freedomofpress/securedrop/issues/547", "id": 42259255, "node_id": "MDU6SXNzdWU0MjI1OTI1NQ==", "number": 547, "title": "Unit test output appears red in setup_dev", "user": {"login": "garrettr", "id": 407302, "node_id": "MDQ6VXNlcjQwNzMwMg==", "avatar_url": "https://avatars.githubusercontent.com/u/407302?v=4", "gravatar_id": "", "url": "https://api.github.com/users/garrettr", "html_url": "https://github.com/garrettr", "followers_url": "https://api.github.com/users/garrettr/followers", "following_url": "https://api.github.com/users/garrettr/following{/other_user}", "gists_url": "https://api.github.com/users/garrettr/gists{/gist_id}", "starred_url": "https://api.github.com/users/garrettr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/garrettr/subscriptions", "organizations_url": "https://api.github.com/users/garrettr/orgs", "repos_url": "https://api.github.com/users/garrettr/repos", "events_url": "https://api.github.com/users/garrettr/events{/privacy}", "received_events_url": "https://api.github.com/users/garrettr/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2014-09-09T00:32:41Z", "updated_at": "2014-10-27T15:53:27Z", "closed_at": "2014-10-27T15:53:27Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "`setup_dev.sh` uses Terminal color codes to indicate different statuses. Red text usually is meant to indicate an error. When the test suite runs with `manage.py test`, the output appears red in the terminal. This surprised some people at the hackathon this weekend, who interpreted this as an indication of errors in the setup process.\n", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/547/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/547/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/538", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/538/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/538/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/538/events", "html_url": "https://github.com/freedomofpress/securedrop/issues/538", "id": 42012346, "node_id": "MDU6SXNzdWU0MjAxMjM0Ng==", "number": 538, "title": "Functional tests busted on develop", "user": {"login": "garrettr", "id": 407302, "node_id": "MDQ6VXNlcjQwNzMwMg==", "avatar_url": "https://avatars.githubusercontent.com/u/407302?v=4", "gravatar_id": "", "url": "https://api.github.com/users/garrettr", "html_url": "https://github.com/garrettr", "followers_url": "https://api.github.com/users/garrettr/followers", "following_url": "https://api.github.com/users/garrettr/following{/other_user}", "gists_url": "https://api.github.com/users/garrettr/gists{/gist_id}", "starred_url": "https://api.github.com/users/garrettr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/garrettr/subscriptions", "organizations_url": "https://api.github.com/users/garrettr/orgs", "repos_url": "https://api.github.com/users/garrettr/repos", "events_url": "https://api.github.com/users/garrettr/events{/privacy}", "received_events_url": "https://api.github.com/users/garrettr/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2014-09-05T04:04:37Z", "updated_at": "2014-09-05T06:02:30Z", "closed_at": "2014-09-05T06:02:30Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "After merging #499, I re-ran `setup_dev.sh` in preparation for tomorrow's hackathon, and ran into a whole host of problems. There are at least two distinct issues:\n1. There is a [known bug](https://code.google.com/p/selenium/issues/detail?id=7823) in Selenium stable (2.42.1) that leads it to not work with Firefox 32, which became the stable release two days ago. When you run the functional tests, this causes the error \"WebDriverException: Message: Can't load the profile\".\n2. Something appears to have changed with Xvfb recently. After fixing the first issue, I still can't run the functional tests. Now I get the error: \"WebDriverException: Message: 'The browser appears to have exited before we could connect. The output was: None'\"\n\nThe second issue seems similar or the same as #341. I tried merging #365, which purported to fix the idea when it was reproducible for @diracdeltas, but it does fix the issue.\n\nWhat a mess. Since the hackathon is tomorrow, I'm disabling the functional tests for now so we can get work done. @jacksingleton if you have time, it'd be great if you could take a look at this.\n", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/538/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/538/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/459", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/459/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/459/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/459/events", "html_url": "https://github.com/freedomofpress/securedrop/issues/459", "id": 35765838, "node_id": "MDU6SXNzdWUzNTc2NTgzOA==", "number": 459, "title": "./manage.py reset deletes the test db, not development db", "user": {"login": "Hainish", "id": 156137, "node_id": "MDQ6VXNlcjE1NjEzNw==", "avatar_url": "https://avatars.githubusercontent.com/u/156137?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Hainish", "html_url": "https://github.com/Hainish", "followers_url": "https://api.github.com/users/Hainish/followers", "following_url": "https://api.github.com/users/Hainish/following{/other_user}", "gists_url": "https://api.github.com/users/Hainish/gists{/gist_id}", "starred_url": "https://api.github.com/users/Hainish/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Hainish/subscriptions", "organizations_url": "https://api.github.com/users/Hainish/orgs", "repos_url": "https://api.github.com/users/Hainish/repos", "events_url": "https://api.github.com/users/Hainish/events{/privacy}", "received_events_url": "https://api.github.com/users/Hainish/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2014-06-16T03:29:00Z", "updated_at": "2014-06-16T14:59:26Z", "closed_at": "2014-06-16T14:59:26Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "<pre>\nvagrant@precise64:/vagrant/securedrop$ ls -al /home/vagrant/.securedrop/db.sqlite \n-rw-r--r-- 1 vagrant vagrant 6144 Jun 16 02:45 /home/vagrant/.securedrop/db.sqlite\nvagrant@precise64:/vagrant/securedrop$ ./manage.py reset\nvagrant@precise64:/vagrant/securedrop$ ls -al /home/vagrant/.securedrop/db.sqlite \n-rw-r--r-- 1 vagrant vagrant 6144 Jun 16 02:45 /home/vagrant/.securedrop/db.sqlite\n</pre>\n", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/459/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/459/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/453", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/453/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/453/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/453/events", "html_url": "https://github.com/freedomofpress/securedrop/issues/453", "id": 35760755, "node_id": "MDU6SXNzdWUzNTc2MDc1NQ==", "number": 453, "title": "redirect-to-external-link broken in live SD instances", "user": {"login": "diracdeltas", "id": 549654, "node_id": "MDQ6VXNlcjU0OTY1NA==", "avatar_url": "https://avatars.githubusercontent.com/u/549654?v=4", "gravatar_id": "", "url": "https://api.github.com/users/diracdeltas", "html_url": "https://github.com/diracdeltas", "followers_url": "https://api.github.com/users/diracdeltas/followers", "following_url": "https://api.github.com/users/diracdeltas/following{/other_user}", "gists_url": "https://api.github.com/users/diracdeltas/gists{/gist_id}", "starred_url": "https://api.github.com/users/diracdeltas/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/diracdeltas/subscriptions", "organizations_url": "https://api.github.com/users/diracdeltas/orgs", "repos_url": "https://api.github.com/users/diracdeltas/repos", "events_url": "https://api.github.com/users/diracdeltas/events{/privacy}", "received_events_url": "https://api.github.com/users/diracdeltas/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "diracdeltas", "id": 549654, "node_id": "MDQ6VXNlcjU0OTY1NA==", "avatar_url": "https://avatars.githubusercontent.com/u/549654?v=4", "gravatar_id": "", "url": "https://api.github.com/users/diracdeltas", "html_url": "https://github.com/diracdeltas", "followers_url": "https://api.github.com/users/diracdeltas/followers", "following_url": "https://api.github.com/users/diracdeltas/following{/other_user}", "gists_url": "https://api.github.com/users/diracdeltas/gists{/gist_id}", "starred_url": "https://api.github.com/users/diracdeltas/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/diracdeltas/subscriptions", "organizations_url": "https://api.github.com/users/diracdeltas/orgs", "repos_url": "https://api.github.com/users/diracdeltas/repos", "events_url": "https://api.github.com/users/diracdeltas/events{/privacy}", "received_events_url": "https://api.github.com/users/diracdeltas/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "diracdeltas", "id": 549654, "node_id": "MDQ6VXNlcjU0OTY1NA==", "avatar_url": "https://avatars.githubusercontent.com/u/549654?v=4", "gravatar_id": "", "url": "https://api.github.com/users/diracdeltas", "html_url": "https://github.com/diracdeltas", "followers_url": "https://api.github.com/users/diracdeltas/followers", "following_url": "https://api.github.com/users/diracdeltas/following{/other_user}", "gists_url": "https://api.github.com/users/diracdeltas/gists{/gist_id}", "starred_url": "https://api.github.com/users/diracdeltas/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/diracdeltas/subscriptions", "organizations_url": "https://api.github.com/users/diracdeltas/orgs", "repos_url": "https://api.github.com/users/diracdeltas/repos", "events_url": "https://api.github.com/users/diracdeltas/events{/privacy}", "received_events_url": "https://api.github.com/users/diracdeltas/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/freedomofpress/securedrop/milestones/6", "html_url": "https://github.com/freedomofpress/securedrop/milestone/6", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/milestones/6/labels", "id": 691725, "node_id": "MDk6TWlsZXN0b25lNjkxNzI1", "number": 6, "title": "0.3", "description": "Issues for the 0.3 release (audit fixes, etc.)", "creator": {"login": "garrettr", "id": 407302, "node_id": "MDQ6VXNlcjQwNzMwMg==", "avatar_url": "https://avatars.githubusercontent.com/u/407302?v=4", "gravatar_id": "", "url": "https://api.github.com/users/garrettr", "html_url": "https://github.com/garrettr", "followers_url": "https://api.github.com/users/garrettr/followers", "following_url": "https://api.github.com/users/garrettr/following{/other_user}", "gists_url": "https://api.github.com/users/garrettr/gists{/gist_id}", "starred_url": "https://api.github.com/users/garrettr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/garrettr/subscriptions", "organizations_url": "https://api.github.com/users/garrettr/orgs", "repos_url": "https://api.github.com/users/garrettr/repos", "events_url": "https://api.github.com/users/garrettr/events{/privacy}", "received_events_url": "https://api.github.com/users/garrettr/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 43, "state": "closed", "created_at": "2014-06-15T22:59:25Z", "updated_at": "2015-03-03T23:29:28Z", "due_on": "2015-01-26T08:00:00Z", "closed_at": "2015-03-03T23:29:28Z"}, "comments": 9, "created_at": "2014-06-15T23:31:31Z", "updated_at": "2014-08-01T16:20:06Z", "closed_at": "2014-08-01T16:20:06Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "The links at http://y6xjgkgwj47us5ca.onion/howto-disable-js#how and other live SD instances return \"Redirect not allowed\", whereas they seem to work properly in local dev environments (http://localhost:8080/howto-disable-js). \n\nWhat's even weirder is that if you replace the redirect URL parameter with its URL-encoded value (ex: https%3A%2F%2Ftails.boum.org%2F), the live instances return 404, whereas the local instances will still redirect properly.\n", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/453/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/453/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/445", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/445/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/445/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/445/events", "html_url": "https://github.com/freedomofpress/securedrop/issues/445", "id": 35732774, "node_id": "MDU6SXNzdWUzNTczMjc3NA==", "number": 445, "title": "codename collisions", "user": {"login": "dolanjs", "id": 1495205, "node_id": "MDQ6VXNlcjE0OTUyMDU=", "avatar_url": "https://avatars.githubusercontent.com/u/1495205?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dolanjs", "html_url": "https://github.com/dolanjs", "followers_url": "https://api.github.com/users/dolanjs/followers", "following_url": "https://api.github.com/users/dolanjs/following{/other_user}", "gists_url": "https://api.github.com/users/dolanjs/gists{/gist_id}", "starred_url": "https://api.github.com/users/dolanjs/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dolanjs/subscriptions", "organizations_url": "https://api.github.com/users/dolanjs/orgs", "repos_url": "https://api.github.com/users/dolanjs/repos", "events_url": "https://api.github.com/users/dolanjs/events{/privacy}", "received_events_url": "https://api.github.com/users/dolanjs/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "garrettr", "id": 407302, "node_id": "MDQ6VXNlcjQwNzMwMg==", "avatar_url": "https://avatars.githubusercontent.com/u/407302?v=4", "gravatar_id": "", "url": "https://api.github.com/users/garrettr", "html_url": "https://github.com/garrettr", "followers_url": "https://api.github.com/users/garrettr/followers", "following_url": "https://api.github.com/users/garrettr/following{/other_user}", "gists_url": "https://api.github.com/users/garrettr/gists{/gist_id}", "starred_url": "https://api.github.com/users/garrettr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/garrettr/subscriptions", "organizations_url": "https://api.github.com/users/garrettr/orgs", "repos_url": "https://api.github.com/users/garrettr/repos", "events_url": "https://api.github.com/users/garrettr/events{/privacy}", "received_events_url": "https://api.github.com/users/garrettr/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "garrettr", "id": 407302, "node_id": "MDQ6VXNlcjQwNzMwMg==", "avatar_url": "https://avatars.githubusercontent.com/u/407302?v=4", "gravatar_id": "", "url": "https://api.github.com/users/garrettr", "html_url": "https://github.com/garrettr", "followers_url": "https://api.github.com/users/garrettr/followers", "following_url": "https://api.github.com/users/garrettr/following{/other_user}", "gists_url": "https://api.github.com/users/garrettr/gists{/gist_id}", "starred_url": "https://api.github.com/users/garrettr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/garrettr/subscriptions", "organizations_url": "https://api.github.com/users/garrettr/orgs", "repos_url": "https://api.github.com/users/garrettr/repos", "events_url": "https://api.github.com/users/garrettr/events{/privacy}", "received_events_url": "https://api.github.com/users/garrettr/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/freedomofpress/securedrop/milestones/6", "html_url": "https://github.com/freedomofpress/securedrop/milestone/6", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/milestones/6/labels", "id": 691725, "node_id": "MDk6TWlsZXN0b25lNjkxNzI1", "number": 6, "title": "0.3", "description": "Issues for the 0.3 release (audit fixes, etc.)", "creator": {"login": "garrettr", "id": 407302, "node_id": "MDQ6VXNlcjQwNzMwMg==", "avatar_url": "https://avatars.githubusercontent.com/u/407302?v=4", "gravatar_id": "", "url": "https://api.github.com/users/garrettr", "html_url": "https://github.com/garrettr", "followers_url": "https://api.github.com/users/garrettr/followers", "following_url": "https://api.github.com/users/garrettr/following{/other_user}", "gists_url": "https://api.github.com/users/garrettr/gists{/gist_id}", "starred_url": "https://api.github.com/users/garrettr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/garrettr/subscriptions", "organizations_url": "https://api.github.com/users/garrettr/orgs", "repos_url": "https://api.github.com/users/garrettr/repos", "events_url": "https://api.github.com/users/garrettr/events{/privacy}", "received_events_url": "https://api.github.com/users/garrettr/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 43, "state": "closed", "created_at": "2014-06-15T22:59:25Z", "updated_at": "2015-03-03T23:29:28Z", "due_on": "2015-01-26T08:00:00Z", "closed_at": "2015-03-03T23:29:28Z"}, "comments": 0, "created_at": "2014-06-14T17:33:19Z", "updated_at": "2014-06-27T02:17:25Z", "closed_at": "2014-06-27T02:17:25Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "If a codename collision is detected the application only logs a message it does not prevent that codename from being used by a the second source. While this situation should not exist under normal working conditions it is a defense in depth option that should be implemented.\nmentioned by @iSec.\n", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/445/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/445/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/402", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/402/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/402/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/402/events", "html_url": "https://github.com/freedomofpress/securedrop/issues/402", "id": 34329046, "node_id": "MDU6SXNzdWUzNDMyOTA0Ng==", "number": 402, "title": "Remove leading spaces", "user": {"login": "garrettr", "id": 407302, "node_id": "MDQ6VXNlcjQwNzMwMg==", "avatar_url": "https://avatars.githubusercontent.com/u/407302?v=4", "gravatar_id": "", "url": "https://api.github.com/users/garrettr", "html_url": "https://github.com/garrettr", "followers_url": "https://api.github.com/users/garrettr/followers", "following_url": "https://api.github.com/users/garrettr/following{/other_user}", "gists_url": "https://api.github.com/users/garrettr/gists{/gist_id}", "starred_url": "https://api.github.com/users/garrettr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/garrettr/subscriptions", "organizations_url": "https://api.github.com/users/garrettr/orgs", "repos_url": "https://api.github.com/users/garrettr/repos", "events_url": "https://api.github.com/users/garrettr/events{/privacy}", "received_events_url": "https://api.github.com/users/garrettr/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2014-05-26T20:59:16Z", "updated_at": "2014-05-29T18:12:05Z", "closed_at": "2014-05-29T18:12:05Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "There are certain places in the new UI where, if I double-click, I end up with a string that has leading spaces. Example locations:\n1. source names in the journalist interace's source list (localhost:8081)\n2. generated codename in source interface (http://localhost:8080/generate)\n\nThis is especially a problem for copy/pasting a generated codename. If the copied string is pasted verbatim (including the leading space), verification will fail because the extra space will lead to an incorrect authentication hash.\n", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/402/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/402/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/401", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/401/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/401/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/401/events", "html_url": "https://github.com/freedomofpress/securedrop/issues/401", "id": 34328787, "node_id": "MDU6SXNzdWUzNDMyODc4Nw==", "number": 401, "title": "[gpg2] <defunct> processes", "user": {"login": "garrettr", "id": 407302, "node_id": "MDQ6VXNlcjQwNzMwMg==", "avatar_url": "https://avatars.githubusercontent.com/u/407302?v=4", "gravatar_id": "", "url": "https://api.github.com/users/garrettr", "html_url": "https://github.com/garrettr", "followers_url": "https://api.github.com/users/garrettr/followers", "following_url": "https://api.github.com/users/garrettr/following{/other_user}", "gists_url": "https://api.github.com/users/garrettr/gists{/gist_id}", "starred_url": "https://api.github.com/users/garrettr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/garrettr/subscriptions", "organizations_url": "https://api.github.com/users/garrettr/orgs", "repos_url": "https://api.github.com/users/garrettr/repos", "events_url": "https://api.github.com/users/garrettr/events{/privacy}", "received_events_url": "https://api.github.com/users/garrettr/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/freedomofpress/securedrop/milestones/3", "html_url": "https://github.com/freedomofpress/securedrop/milestone/3", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/milestones/3/labels", "id": 463163, "node_id": "MDk6TWlsZXN0b25lNDYzMTYz", "number": 3, "title": "0.3pre", "description": "Issues for the 0.3 release candidate (audit target)", "creator": {"login": "micahflee", "id": 156128, "node_id": "MDQ6VXNlcjE1NjEyOA==", "avatar_url": "https://avatars.githubusercontent.com/u/156128?v=4", "gravatar_id": "", "url": "https://api.github.com/users/micahflee", "html_url": "https://github.com/micahflee", "followers_url": "https://api.github.com/users/micahflee/followers", "following_url": "https://api.github.com/users/micahflee/following{/other_user}", "gists_url": "https://api.github.com/users/micahflee/gists{/gist_id}", "starred_url": "https://api.github.com/users/micahflee/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/micahflee/subscriptions", "organizations_url": "https://api.github.com/users/micahflee/orgs", "repos_url": "https://api.github.com/users/micahflee/repos", "events_url": "https://api.github.com/users/micahflee/events{/privacy}", "received_events_url": "https://api.github.com/users/micahflee/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 17, "state": "closed", "created_at": "2013-10-23T23:31:06Z", "updated_at": "2014-12-04T21:50:32Z", "due_on": "2014-06-01T07:00:00Z", "closed_at": "2014-12-04T21:50:32Z"}, "comments": 3, "created_at": "2014-05-26T20:51:06Z", "updated_at": "2014-05-28T23:34:30Z", "closed_at": "2014-05-28T23:34:30Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Run Securedrop locally on vagrant, make a few submissions, then run `ps ux`. I see:\n\n```\n[...]\nvagrant  28787  0.8 12.0 174480 45124 pts/0    S    20:45   0:01 python source.py\nvagrant  28788  0.8 12.0 174472 45088 pts/0    S    20:45   0:01 python journalist.py\nvagrant  28801  0.0  0.0      0     0 pts/0    Z    20:45   0:00 [gpg2] <defunct>\nvagrant  28802  0.0  0.0      0     0 pts/0    Z    20:45   0:00 [gpg2] <defunct>\nvagrant  28807  2.7 12.7 250832 47712 pts/0    Sl   20:45   0:05 /usr/bin/python journalist.py\nvagrant  28808  4.9 12.8 472040 48264 pts/0    Sl   20:45   0:10 /usr/bin/python source.py\nvagrant  28821  0.0  0.0      0     0 pts/0    Z    20:45   0:00 [gpg2] <defunct>\nvagrant  28822  0.0  0.0      0     0 pts/0    Z    20:45   0:00 [gpg2] <defunct>\nvagrant  28907  0.0  0.3  18364  1196 pts/0    R+   20:48   0:00 ps ux\n```\n\nThese defunct processes must be from when we call out to gpg2 to encrypt the messages. Why are they left lying around?\n", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/401/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/401/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/399", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/399/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/399/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/399/events", "html_url": "https://github.com/freedomofpress/securedrop/issues/399", "id": 34327544, "node_id": "MDU6SXNzdWUzNDMyNzU0NA==", "number": 399, "title": "functional.submit_and_retrieve_message AssertionError", "user": {"login": "garrettr", "id": 407302, "node_id": "MDQ6VXNlcjQwNzMwMg==", "avatar_url": "https://avatars.githubusercontent.com/u/407302?v=4", "gravatar_id": "", "url": "https://api.github.com/users/garrettr", "html_url": "https://github.com/garrettr", "followers_url": "https://api.github.com/users/garrettr/followers", "following_url": "https://api.github.com/users/garrettr/following{/other_user}", "gists_url": "https://api.github.com/users/garrettr/gists{/gist_id}", "starred_url": "https://api.github.com/users/garrettr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/garrettr/subscriptions", "organizations_url": "https://api.github.com/users/garrettr/orgs", "repos_url": "https://api.github.com/users/garrettr/repos", "events_url": "https://api.github.com/users/garrettr/events{/privacy}", "received_events_url": "https://api.github.com/users/garrettr/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/freedomofpress/securedrop/milestones/3", "html_url": "https://github.com/freedomofpress/securedrop/milestone/3", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/milestones/3/labels", "id": 463163, "node_id": "MDk6TWlsZXN0b25lNDYzMTYz", "number": 3, "title": "0.3pre", "description": "Issues for the 0.3 release candidate (audit target)", "creator": {"login": "micahflee", "id": 156128, "node_id": "MDQ6VXNlcjE1NjEyOA==", "avatar_url": "https://avatars.githubusercontent.com/u/156128?v=4", "gravatar_id": "", "url": "https://api.github.com/users/micahflee", "html_url": "https://github.com/micahflee", "followers_url": "https://api.github.com/users/micahflee/followers", "following_url": "https://api.github.com/users/micahflee/following{/other_user}", "gists_url": "https://api.github.com/users/micahflee/gists{/gist_id}", "starred_url": "https://api.github.com/users/micahflee/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/micahflee/subscriptions", "organizations_url": "https://api.github.com/users/micahflee/orgs", "repos_url": "https://api.github.com/users/micahflee/repos", "events_url": "https://api.github.com/users/micahflee/events{/privacy}", "received_events_url": "https://api.github.com/users/micahflee/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 17, "state": "closed", "created_at": "2013-10-23T23:31:06Z", "updated_at": "2014-12-04T21:50:32Z", "due_on": "2014-06-01T07:00:00Z", "closed_at": "2014-12-04T21:50:32Z"}, "comments": 5, "created_at": "2014-05-26T20:19:04Z", "updated_at": "2014-05-27T16:19:47Z", "closed_at": "2014-05-27T16:19:47Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "```\ntest_submit_and_retrieve_happy_path (tests.functional.submit_and_retrieve_message.SubmitAndRetrieveMessage) ... FAIL\n\n======================================================================\nFAIL: test_submit_and_retrieve_happy_path (tests.functional.submit_and_retrieve_message.SubmitAndRetrieveMessage)\n----------------------------------------------------------------------\nTraceback (most recent call last):\n  File \"tests/functional/submit_and_retrieve_message.py\", line 37, in test_submit_and_retrieve_happy_path\n    self._journalist_downloads_message()\n  File \"tests/functional/journalist_navigation_steps.py\", line 31, in _journalist_downloads_message\n    self.assertEqual(1, len(submissions))\nAssertionError: 1 != 0\n\n----------------------------------------------------------------------\nRan 1 test in 15.706s\n\nFAILED (failures=1)\n```\n\nOnly happens in Vagrant, and not on Travis, which is... annoying.\n", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/399/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/399/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/381", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/381/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/381/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/381/events", "html_url": "https://github.com/freedomofpress/securedrop/issues/381", "id": 33862381, "node_id": "MDU6SXNzdWUzMzg2MjM4MQ==", "number": 381, "title": "Delete submission from db when document / msg is deleted", "user": {"login": "Hainish", "id": 156137, "node_id": "MDQ6VXNlcjE1NjEzNw==", "avatar_url": "https://avatars.githubusercontent.com/u/156137?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Hainish", "html_url": "https://github.com/Hainish", "followers_url": "https://api.github.com/users/Hainish/followers", "following_url": "https://api.github.com/users/Hainish/following{/other_user}", "gists_url": "https://api.github.com/users/Hainish/gists{/gist_id}", "starred_url": "https://api.github.com/users/Hainish/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Hainish/subscriptions", "organizations_url": "https://api.github.com/users/Hainish/orgs", "repos_url": "https://api.github.com/users/Hainish/repos", "events_url": "https://api.github.com/users/Hainish/events{/privacy}", "received_events_url": "https://api.github.com/users/Hainish/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/freedomofpress/securedrop/milestones/3", "html_url": "https://github.com/freedomofpress/securedrop/milestone/3", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/milestones/3/labels", "id": 463163, "node_id": "MDk6TWlsZXN0b25lNDYzMTYz", "number": 3, "title": "0.3pre", "description": "Issues for the 0.3 release candidate (audit target)", "creator": {"login": "micahflee", "id": 156128, "node_id": "MDQ6VXNlcjE1NjEyOA==", "avatar_url": "https://avatars.githubusercontent.com/u/156128?v=4", "gravatar_id": "", "url": "https://api.github.com/users/micahflee", "html_url": "https://github.com/micahflee", "followers_url": "https://api.github.com/users/micahflee/followers", "following_url": "https://api.github.com/users/micahflee/following{/other_user}", "gists_url": "https://api.github.com/users/micahflee/gists{/gist_id}", "starred_url": "https://api.github.com/users/micahflee/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/micahflee/subscriptions", "organizations_url": "https://api.github.com/users/micahflee/orgs", "repos_url": "https://api.github.com/users/micahflee/repos", "events_url": "https://api.github.com/users/micahflee/events{/privacy}", "received_events_url": "https://api.github.com/users/micahflee/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 17, "state": "closed", "created_at": "2013-10-23T23:31:06Z", "updated_at": "2014-12-04T21:50:32Z", "due_on": "2014-06-01T07:00:00Z", "closed_at": "2014-12-04T21:50:32Z"}, "comments": 2, "created_at": "2014-05-20T06:51:29Z", "updated_at": "2014-05-24T23:02:52Z", "closed_at": "2014-05-24T23:02:44Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Docs are not deleted from the DB when they are deleted from the filesystem.  This should change\n", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/381/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/381/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/377", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/377/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/377/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/377/events", "html_url": "https://github.com/freedomofpress/securedrop/issues/377", "id": 33770942, "node_id": "MDU6SXNzdWUzMzc3MDk0Mg==", "number": 377, "title": "DOS for sources whose collections are deleted when they are logged in", "user": {"login": "Hainish", "id": 156137, "node_id": "MDQ6VXNlcjE1NjEzNw==", "avatar_url": "https://avatars.githubusercontent.com/u/156137?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Hainish", "html_url": "https://github.com/Hainish", "followers_url": "https://api.github.com/users/Hainish/followers", "following_url": "https://api.github.com/users/Hainish/following{/other_user}", "gists_url": "https://api.github.com/users/Hainish/gists{/gist_id}", "starred_url": "https://api.github.com/users/Hainish/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Hainish/subscriptions", "organizations_url": "https://api.github.com/users/Hainish/orgs", "repos_url": "https://api.github.com/users/Hainish/repos", "events_url": "https://api.github.com/users/Hainish/events{/privacy}", "received_events_url": "https://api.github.com/users/Hainish/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2014-05-19T04:49:06Z", "updated_at": "2014-05-24T20:13:36Z", "closed_at": "2014-05-24T20:13:36Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Issue:\n- A source will be unable to generate a new codename or log in.\n\nOccurs after the following workflow:\n1. The source logs in and submits a document (session['logged_in'] and session['codename'] are set)\n2. The journalist deletes the source's collection\n3. The source refreshes the page or tries to access `/`\n", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/377/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/377/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/369", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/369/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/369/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/369/events", "html_url": "https://github.com/freedomofpress/securedrop/issues/369", "id": 33700639, "node_id": "MDU6SXNzdWUzMzcwMDYzOQ==", "number": 369, "title": "Large downloads often fail", "user": {"login": "micahflee", "id": 156128, "node_id": "MDQ6VXNlcjE1NjEyOA==", "avatar_url": "https://avatars.githubusercontent.com/u/156128?v=4", "gravatar_id": "", "url": "https://api.github.com/users/micahflee", "html_url": "https://github.com/micahflee", "followers_url": "https://api.github.com/users/micahflee/followers", "following_url": "https://api.github.com/users/micahflee/following{/other_user}", "gists_url": "https://api.github.com/users/micahflee/gists{/gist_id}", "starred_url": "https://api.github.com/users/micahflee/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/micahflee/subscriptions", "organizations_url": "https://api.github.com/users/micahflee/orgs", "repos_url": "https://api.github.com/users/micahflee/repos", "events_url": "https://api.github.com/users/micahflee/events{/privacy}", "received_events_url": "https://api.github.com/users/micahflee/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 9, "created_at": "2014-05-16T18:58:15Z", "updated_at": "2014-10-08T21:08:57Z", "closed_at": "2014-10-08T21:08:57Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "If you're a journalist checking SecureDrop and you try downloading a document that a source uploaded that's large, like 50mb, it often takes several attempts before downloading correctly. It looks like at some point the connection just drops, but Tor Browser treats it as a finished download, not an interrupted one.\n\nThe only way to know for sure if the download was successful is by comparing the file size on disk and the file size listed in the document interface.\n\nI don't know if this is a problem with my connection to the Tor network, the hidden service's connection to the Tor network, something else having to do with Tor, or a problem with the web app. Thoughts on how to diagnose and if a fix is possible?\n", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/369/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/369/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/368", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/368/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/368/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/368/events", "html_url": "https://github.com/freedomofpress/securedrop/issues/368", "id": 33652571, "node_id": "MDU6SXNzdWUzMzY1MjU3MQ==", "number": 368, "title": "Functional tests timeout intermittently", "user": {"login": "garrettr", "id": 407302, "node_id": "MDQ6VXNlcjQwNzMwMg==", "avatar_url": "https://avatars.githubusercontent.com/u/407302?v=4", "gravatar_id": "", "url": "https://api.github.com/users/garrettr", "html_url": "https://github.com/garrettr", "followers_url": "https://api.github.com/users/garrettr/followers", "following_url": "https://api.github.com/users/garrettr/following{/other_user}", "gists_url": "https://api.github.com/users/garrettr/gists{/gist_id}", "starred_url": "https://api.github.com/users/garrettr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/garrettr/subscriptions", "organizations_url": "https://api.github.com/users/garrettr/orgs", "repos_url": "https://api.github.com/users/garrettr/repos", "events_url": "https://api.github.com/users/garrettr/events{/privacy}", "received_events_url": "https://api.github.com/users/garrettr/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2014-05-16T07:14:48Z", "updated_at": "2014-05-26T23:36:31Z", "closed_at": "2014-05-26T23:36:31Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Sometimes the functional tests time out when they are first run at the end of `setup_dev.sh`.\n\nStrangely, they always seem to run successfully if you cancel the hung tests from `setup_dev.sh`, `vagrant ssh`, and run the tests again.\n", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/368/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/368/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/367", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/367/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/367/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/367/events", "html_url": "https://github.com/freedomofpress/securedrop/issues/367", "id": 33650715, "node_id": "MDU6SXNzdWUzMzY1MDcxNQ==", "number": 367, "title": "Tests are failing on Travis", "user": {"login": "garrettr", "id": 407302, "node_id": "MDQ6VXNlcjQwNzMwMg==", "avatar_url": "https://avatars.githubusercontent.com/u/407302?v=4", "gravatar_id": "", "url": "https://api.github.com/users/garrettr", "html_url": "https://github.com/garrettr", "followers_url": "https://api.github.com/users/garrettr/followers", "following_url": "https://api.github.com/users/garrettr/following{/other_user}", "gists_url": "https://api.github.com/users/garrettr/gists{/gist_id}", "starred_url": "https://api.github.com/users/garrettr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/garrettr/subscriptions", "organizations_url": "https://api.github.com/users/garrettr/orgs", "repos_url": "https://api.github.com/users/garrettr/repos", "events_url": "https://api.github.com/users/garrettr/events{/privacy}", "received_events_url": "https://api.github.com/users/garrettr/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2014-05-16T06:29:58Z", "updated_at": "2014-05-24T20:21:08Z", "closed_at": "2014-05-24T20:21:08Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "...again. This seemed to happen due to a change in the Travis environment because pull requests that had passed, when restarted in the past few days, would fail.\n", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/367/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/367/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/366", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/366/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/366/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/366/events", "html_url": "https://github.com/freedomofpress/securedrop/issues/366", "id": 33650591, "node_id": "MDU6SXNzdWUzMzY1MDU5MQ==", "number": 366, "title": "gitignore config/flask_defaults.py", "user": {"login": "garrettr", "id": 407302, "node_id": "MDQ6VXNlcjQwNzMwMg==", "avatar_url": "https://avatars.githubusercontent.com/u/407302?v=4", "gravatar_id": "", "url": "https://api.github.com/users/garrettr", "html_url": "https://github.com/garrettr", "followers_url": "https://api.github.com/users/garrettr/followers", "following_url": "https://api.github.com/users/garrettr/following{/other_user}", "gists_url": "https://api.github.com/users/garrettr/gists{/gist_id}", "starred_url": "https://api.github.com/users/garrettr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/garrettr/subscriptions", "organizations_url": "https://api.github.com/users/garrettr/orgs", "repos_url": "https://api.github.com/users/garrettr/repos", "events_url": "https://api.github.com/users/garrettr/events{/privacy}", "received_events_url": "https://api.github.com/users/garrettr/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2014-05-16T06:26:21Z", "updated_at": "2014-05-24T20:21:27Z", "closed_at": "2014-05-24T20:21:27Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "setup_dev.sh creates `config/flask_defaults.py`, which hangs out annoyingly as an untracked file. As a config file that contains site-specific and sensitive (`FLASK_SECRET_KEY`) information, it should be ignored.\n", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/366/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/366/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/351", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/351/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/351/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/351/events", "html_url": "https://github.com/freedomofpress/securedrop/issues/351", "id": 31375097, "node_id": "MDU6SXNzdWUzMTM3NTA5Nw==", "number": 351, "title": "Internal Server Error", "user": {"login": "yozel", "id": 1916237, "node_id": "MDQ6VXNlcjE5MTYyMzc=", "avatar_url": "https://avatars.githubusercontent.com/u/1916237?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yozel", "html_url": "https://github.com/yozel", "followers_url": "https://api.github.com/users/yozel/followers", "following_url": "https://api.github.com/users/yozel/following{/other_user}", "gists_url": "https://api.github.com/users/yozel/gists{/gist_id}", "starred_url": "https://api.github.com/users/yozel/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yozel/subscriptions", "organizations_url": "https://api.github.com/users/yozel/orgs", "repos_url": "https://api.github.com/users/yozel/repos", "events_url": "https://api.github.com/users/yozel/events{/privacy}", "received_events_url": "https://api.github.com/users/yozel/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2014-04-12T03:02:37Z", "updated_at": "2015-03-26T00:06:00Z", "closed_at": "2015-03-26T00:06:00Z", "author_association": "NONE", "active_lock_reason": null, "body": "I have installed SecureDrop exactly as described in docs (with production_installation.sh). But I got 500 Internal Server Error errors in source and document interface.\n\n![](http://i.imgur.com/ILIqArF.png)\n", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/351/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/351/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/348", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/348/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/348/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/348/events", "html_url": "https://github.com/freedomofpress/securedrop/issues/348", "id": 30797676, "node_id": "MDU6SXNzdWUzMDc5NzY3Ng==", "number": 348, "title": "Flask logging disappeared", "user": {"login": "garrettr", "id": 407302, "node_id": "MDQ6VXNlcjQwNzMwMg==", "avatar_url": "https://avatars.githubusercontent.com/u/407302?v=4", "gravatar_id": "", "url": "https://api.github.com/users/garrettr", "html_url": "https://github.com/garrettr", "followers_url": "https://api.github.com/users/garrettr/followers", "following_url": "https://api.github.com/users/garrettr/following{/other_user}", "gists_url": "https://api.github.com/users/garrettr/gists{/gist_id}", "starred_url": "https://api.github.com/users/garrettr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/garrettr/subscriptions", "organizations_url": "https://api.github.com/users/garrettr/orgs", "repos_url": "https://api.github.com/users/garrettr/repos", "events_url": "https://api.github.com/users/garrettr/events{/privacy}", "received_events_url": "https://api.github.com/users/garrettr/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "garrettr", "id": 407302, "node_id": "MDQ6VXNlcjQwNzMwMg==", "avatar_url": "https://avatars.githubusercontent.com/u/407302?v=4", "gravatar_id": "", "url": "https://api.github.com/users/garrettr", "html_url": "https://github.com/garrettr", "followers_url": "https://api.github.com/users/garrettr/followers", "following_url": "https://api.github.com/users/garrettr/following{/other_user}", "gists_url": "https://api.github.com/users/garrettr/gists{/gist_id}", "starred_url": "https://api.github.com/users/garrettr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/garrettr/subscriptions", "organizations_url": "https://api.github.com/users/garrettr/orgs", "repos_url": "https://api.github.com/users/garrettr/repos", "events_url": "https://api.github.com/users/garrettr/events{/privacy}", "received_events_url": "https://api.github.com/users/garrettr/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "garrettr", "id": 407302, "node_id": "MDQ6VXNlcjQwNzMwMg==", "avatar_url": "https://avatars.githubusercontent.com/u/407302?v=4", "gravatar_id": "", "url": "https://api.github.com/users/garrettr", "html_url": "https://github.com/garrettr", "followers_url": "https://api.github.com/users/garrettr/followers", "following_url": "https://api.github.com/users/garrettr/following{/other_user}", "gists_url": "https://api.github.com/users/garrettr/gists{/gist_id}", "starred_url": "https://api.github.com/users/garrettr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/garrettr/subscriptions", "organizations_url": "https://api.github.com/users/garrettr/orgs", "repos_url": "https://api.github.com/users/garrettr/repos", "events_url": "https://api.github.com/users/garrettr/events{/privacy}", "received_events_url": "https://api.github.com/users/garrettr/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2014-04-03T17:51:56Z", "updated_at": "2014-08-03T00:14:12Z", "closed_at": "2014-08-03T00:14:12Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "At some point, running `python {source,journalist}.py` stopped printing the familiar (and useful) default Flask logging of requests, responses, and logger messages. We should get it back, it's very helpful for debugging.\n", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/348/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/348/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/342", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/342/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/342/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/342/events", "html_url": "https://github.com/freedomofpress/securedrop/issues/342", "id": 30484667, "node_id": "MDU6SXNzdWUzMDQ4NDY2Nw==", "number": 342, "title": "Tor2Web warning issues", "user": {"login": "glamrock", "id": 452041, "node_id": "MDQ6VXNlcjQ1MjA0MQ==", "avatar_url": "https://avatars.githubusercontent.com/u/452041?v=4", "gravatar_id": "", "url": "https://api.github.com/users/glamrock", "html_url": "https://github.com/glamrock", "followers_url": "https://api.github.com/users/glamrock/followers", "following_url": "https://api.github.com/users/glamrock/following{/other_user}", "gists_url": "https://api.github.com/users/glamrock/gists{/gist_id}", "starred_url": "https://api.github.com/users/glamrock/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/glamrock/subscriptions", "organizations_url": "https://api.github.com/users/glamrock/orgs", "repos_url": "https://api.github.com/users/glamrock/repos", "events_url": "https://api.github.com/users/glamrock/events{/privacy}", "received_events_url": "https://api.github.com/users/glamrock/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "garrettr", "id": 407302, "node_id": "MDQ6VXNlcjQwNzMwMg==", "avatar_url": "https://avatars.githubusercontent.com/u/407302?v=4", "gravatar_id": "", "url": "https://api.github.com/users/garrettr", "html_url": "https://github.com/garrettr", "followers_url": "https://api.github.com/users/garrettr/followers", "following_url": "https://api.github.com/users/garrettr/following{/other_user}", "gists_url": "https://api.github.com/users/garrettr/gists{/gist_id}", "starred_url": "https://api.github.com/users/garrettr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/garrettr/subscriptions", "organizations_url": "https://api.github.com/users/garrettr/orgs", "repos_url": "https://api.github.com/users/garrettr/repos", "events_url": "https://api.github.com/users/garrettr/events{/privacy}", "received_events_url": "https://api.github.com/users/garrettr/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "garrettr", "id": 407302, "node_id": "MDQ6VXNlcjQwNzMwMg==", "avatar_url": "https://avatars.githubusercontent.com/u/407302?v=4", "gravatar_id": "", "url": "https://api.github.com/users/garrettr", "html_url": "https://github.com/garrettr", "followers_url": "https://api.github.com/users/garrettr/followers", "following_url": "https://api.github.com/users/garrettr/following{/other_user}", "gists_url": "https://api.github.com/users/garrettr/gists{/gist_id}", "starred_url": "https://api.github.com/users/garrettr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/garrettr/subscriptions", "organizations_url": "https://api.github.com/users/garrettr/orgs", "repos_url": "https://api.github.com/users/garrettr/repos", "events_url": "https://api.github.com/users/garrettr/events{/privacy}", "received_events_url": "https://api.github.com/users/garrettr/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/freedomofpress/securedrop/milestones/3", "html_url": "https://github.com/freedomofpress/securedrop/milestone/3", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/milestones/3/labels", "id": 463163, "node_id": "MDk6TWlsZXN0b25lNDYzMTYz", "number": 3, "title": "0.3pre", "description": "Issues for the 0.3 release candidate (audit target)", "creator": {"login": "micahflee", "id": 156128, "node_id": "MDQ6VXNlcjE1NjEyOA==", "avatar_url": "https://avatars.githubusercontent.com/u/156128?v=4", "gravatar_id": "", "url": "https://api.github.com/users/micahflee", "html_url": "https://github.com/micahflee", "followers_url": "https://api.github.com/users/micahflee/followers", "following_url": "https://api.github.com/users/micahflee/following{/other_user}", "gists_url": "https://api.github.com/users/micahflee/gists{/gist_id}", "starred_url": "https://api.github.com/users/micahflee/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/micahflee/subscriptions", "organizations_url": "https://api.github.com/users/micahflee/orgs", "repos_url": "https://api.github.com/users/micahflee/repos", "events_url": "https://api.github.com/users/micahflee/events{/privacy}", "received_events_url": "https://api.github.com/users/micahflee/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 17, "state": "closed", "created_at": "2013-10-23T23:31:06Z", "updated_at": "2014-12-04T21:50:32Z", "due_on": "2014-06-01T07:00:00Z", "closed_at": "2014-12-04T21:50:32Z"}, "comments": 3, "created_at": "2014-03-31T04:28:30Z", "updated_at": "2014-05-25T05:45:48Z", "closed_at": "2014-05-24T03:38:27Z", "author_association": "NONE", "active_lock_reason": null, "body": "So there are some issues with how the Tor2Web warnings appear, namely that `.header-warning` sometimes appears multiple times, and can have styling errors:\n\n![screenshot from 2014-03-30 23 54 09](https://cloud.githubusercontent.com/assets/452041/2563836/92e1dc66-b88c-11e3-99e9-a0a3d705ff12.png)\n\nappeared on `https://poulsenjzbufll63.onion.to/lookup`\n", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/342/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/342/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/325", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/325/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/325/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/325/events", "html_url": "https://github.com/freedomofpress/securedrop/issues/325", "id": 28399121, "node_id": "MDU6SXNzdWUyODM5OTEyMQ==", "number": 325, "title": "Reply keypair generation has wrong type for key length", "user": {"login": "garrettr", "id": 407302, "node_id": "MDQ6VXNlcjQwNzMwMg==", "avatar_url": "https://avatars.githubusercontent.com/u/407302?v=4", "gravatar_id": "", "url": "https://api.github.com/users/garrettr", "html_url": "https://github.com/garrettr", "followers_url": "https://api.github.com/users/garrettr/followers", "following_url": "https://api.github.com/users/garrettr/following{/other_user}", "gists_url": "https://api.github.com/users/garrettr/gists{/gist_id}", "starred_url": "https://api.github.com/users/garrettr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/garrettr/subscriptions", "organizations_url": "https://api.github.com/users/garrettr/orgs", "repos_url": "https://api.github.com/users/garrettr/repos", "events_url": "https://api.github.com/users/garrettr/events{/privacy}", "received_events_url": "https://api.github.com/users/garrettr/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2014-02-27T07:23:30Z", "updated_at": "2014-02-27T07:45:27Z", "closed_at": "2014-02-27T07:45:27Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "```\n10.0.2.2 - - [27/Feb/2014 07:19:58] \"GET /lookup HTTP/1.1\" 200 -\nException in thread Thread-4:\nTraceback (most recent call last):\n  File \"/usr/lib/python2.7/threading.py\", line 551, in __bootstrap_inner\n    self.run()\n  File \"/usr/lib/python2.7/threading.py\", line 504, in run\n    self.__target(*self.__args, **self.__kwargs)\n  File \"source.py\", line 158, in <lambda>\n    background.execute(lambda: crypto_util.genkeypair(sid, codename))\n  File \"/vagrant/securedrop/crypto_util.py\", line 116, in genkeypair\n    name_email=name\n  File \"/usr/local/lib/python2.7/dist-packages/gnupg/gnupg.py\", line 814, in gen_key_input\n    out += \"Key-Length: %d\\n\" % parms.pop('Key-Length')\nTypeError: %d format: a number is required, not str\n```\n\nThis appears to break key generation. @Hainish How did this pass the unit tests?\n", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/325/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/325/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/323", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/323/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/323/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/323/events", "html_url": "https://github.com/freedomofpress/securedrop/issues/323", "id": 28273943, "node_id": "MDU6SXNzdWUyODI3Mzk0Mw==", "number": 323, "title": "Dont create gpg keys in the future", "user": {"login": "dbgdngit", "id": 5290026, "node_id": "MDQ6VXNlcjUyOTAwMjY=", "avatar_url": "https://avatars.githubusercontent.com/u/5290026?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dbgdngit", "html_url": "https://github.com/dbgdngit", "followers_url": "https://api.github.com/users/dbgdngit/followers", "following_url": "https://api.github.com/users/dbgdngit/following{/other_user}", "gists_url": "https://api.github.com/users/dbgdngit/gists{/gist_id}", "starred_url": "https://api.github.com/users/dbgdngit/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dbgdngit/subscriptions", "organizations_url": "https://api.github.com/users/dbgdngit/orgs", "repos_url": "https://api.github.com/users/dbgdngit/repos", "events_url": "https://api.github.com/users/dbgdngit/events{/privacy}", "received_events_url": "https://api.github.com/users/dbgdngit/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/freedomofpress/securedrop/milestones/6", "html_url": "https://github.com/freedomofpress/securedrop/milestone/6", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/milestones/6/labels", "id": 691725, "node_id": "MDk6TWlsZXN0b25lNjkxNzI1", "number": 6, "title": "0.3", "description": "Issues for the 0.3 release (audit fixes, etc.)", "creator": {"login": "garrettr", "id": 407302, "node_id": "MDQ6VXNlcjQwNzMwMg==", "avatar_url": "https://avatars.githubusercontent.com/u/407302?v=4", "gravatar_id": "", "url": "https://api.github.com/users/garrettr", "html_url": "https://github.com/garrettr", "followers_url": "https://api.github.com/users/garrettr/followers", "following_url": "https://api.github.com/users/garrettr/following{/other_user}", "gists_url": "https://api.github.com/users/garrettr/gists{/gist_id}", "starred_url": "https://api.github.com/users/garrettr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/garrettr/subscriptions", "organizations_url": "https://api.github.com/users/garrettr/orgs", "repos_url": "https://api.github.com/users/garrettr/repos", "events_url": "https://api.github.com/users/garrettr/events{/privacy}", "received_events_url": "https://api.github.com/users/garrettr/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 43, "state": "closed", "created_at": "2014-06-15T22:59:25Z", "updated_at": "2015-03-03T23:29:28Z", "due_on": "2015-01-26T08:00:00Z", "closed_at": "2015-03-03T23:29:28Z"}, "comments": 8, "created_at": "2014-02-25T19:09:54Z", "updated_at": "2014-12-08T17:37:05Z", "closed_at": "2014-12-08T17:36:51Z", "author_association": "NONE", "active_lock_reason": null, "body": "On the airgappged tails workstation you need to manually set the system time or else risk creating the application gpg keypair in the future.\n", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/323/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/323/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/299", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/299/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/299/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/299/events", "html_url": "https://github.com/freedomofpress/securedrop/issues/299", "id": 26860619, "node_id": "MDU6SXNzdWUyNjg2MDYxOQ==", "number": 299, "title": "TBB-specific \"Disable JS\" pop-up broken in latest TBB", "user": {"login": "garrettr", "id": 407302, "node_id": "MDQ6VXNlcjQwNzMwMg==", "avatar_url": "https://avatars.githubusercontent.com/u/407302?v=4", "gravatar_id": "", "url": "https://api.github.com/users/garrettr", "html_url": "https://github.com/garrettr", "followers_url": "https://api.github.com/users/garrettr/followers", "following_url": "https://api.github.com/users/garrettr/following{/other_user}", "gists_url": "https://api.github.com/users/garrettr/gists{/gist_id}", "starred_url": "https://api.github.com/users/garrettr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/garrettr/subscriptions", "organizations_url": "https://api.github.com/users/garrettr/orgs", "repos_url": "https://api.github.com/users/garrettr/repos", "events_url": "https://api.github.com/users/garrettr/events{/privacy}", "received_events_url": "https://api.github.com/users/garrettr/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "garrettr", "id": 407302, "node_id": "MDQ6VXNlcjQwNzMwMg==", "avatar_url": "https://avatars.githubusercontent.com/u/407302?v=4", "gravatar_id": "", "url": "https://api.github.com/users/garrettr", "html_url": "https://github.com/garrettr", "followers_url": "https://api.github.com/users/garrettr/followers", "following_url": "https://api.github.com/users/garrettr/following{/other_user}", "gists_url": "https://api.github.com/users/garrettr/gists{/gist_id}", "starred_url": "https://api.github.com/users/garrettr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/garrettr/subscriptions", "organizations_url": "https://api.github.com/users/garrettr/orgs", "repos_url": "https://api.github.com/users/garrettr/repos", "events_url": "https://api.github.com/users/garrettr/events{/privacy}", "received_events_url": "https://api.github.com/users/garrettr/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "garrettr", "id": 407302, "node_id": "MDQ6VXNlcjQwNzMwMg==", "avatar_url": "https://avatars.githubusercontent.com/u/407302?v=4", "gravatar_id": "", "url": "https://api.github.com/users/garrettr", "html_url": "https://github.com/garrettr", "followers_url": "https://api.github.com/users/garrettr/followers", "following_url": "https://api.github.com/users/garrettr/following{/other_user}", "gists_url": "https://api.github.com/users/garrettr/gists{/gist_id}", "starred_url": "https://api.github.com/users/garrettr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/garrettr/subscriptions", "organizations_url": "https://api.github.com/users/garrettr/orgs", "repos_url": "https://api.github.com/users/garrettr/repos", "events_url": "https://api.github.com/users/garrettr/events{/privacy}", "received_events_url": "https://api.github.com/users/garrettr/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/freedomofpress/securedrop/milestones/3", "html_url": "https://github.com/freedomofpress/securedrop/milestone/3", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/milestones/3/labels", "id": 463163, "node_id": "MDk6TWlsZXN0b25lNDYzMTYz", "number": 3, "title": "0.3pre", "description": "Issues for the 0.3 release candidate (audit target)", "creator": {"login": "micahflee", "id": 156128, "node_id": "MDQ6VXNlcjE1NjEyOA==", "avatar_url": "https://avatars.githubusercontent.com/u/156128?v=4", "gravatar_id": "", "url": "https://api.github.com/users/micahflee", "html_url": "https://github.com/micahflee", "followers_url": "https://api.github.com/users/micahflee/followers", "following_url": "https://api.github.com/users/micahflee/following{/other_user}", "gists_url": "https://api.github.com/users/micahflee/gists{/gist_id}", "starred_url": "https://api.github.com/users/micahflee/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/micahflee/subscriptions", "organizations_url": "https://api.github.com/users/micahflee/orgs", "repos_url": "https://api.github.com/users/micahflee/repos", "events_url": "https://api.github.com/users/micahflee/events{/privacy}", "received_events_url": "https://api.github.com/users/micahflee/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 17, "state": "closed", "created_at": "2013-10-23T23:31:06Z", "updated_at": "2014-12-04T21:50:32Z", "due_on": "2014-06-01T07:00:00Z", "closed_at": "2014-12-04T21:50:32Z"}, "comments": 0, "created_at": "2014-02-04T05:25:47Z", "updated_at": "2014-06-02T02:21:59Z", "closed_at": "2014-06-02T02:21:59Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "1. Access a SecureDrop Source Interface in the latest TBB, based on Firefox 24 (I have 24.2.0, and TorButton 1.6.5.2).\n2. In the red \"Your browser has javascript enabled\" warning, click \"Click here\".\n3. You should see a bubble appear in the same window, pointing to the NoScript icon in the toolbar, with instructions for using it to disable Javascripts.\n4. Instead, you are just taken to `/howto-disable-js#how`, the default page with instructions for every browser.\n\nThis is almost certainly due to missing a `TBB_UA` for the latest TBB in `warn.js`.\n", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/299/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/299/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/294", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/294/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/294/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/294/events", "html_url": "https://github.com/freedomofpress/securedrop/issues/294", "id": 26474961, "node_id": "MDU6SXNzdWUyNjQ3NDk2MQ==", "number": 294, "title": "Bug after you submit docs and want to login again", "user": {"login": "trevortimm", "id": 5478801, "node_id": "MDQ6VXNlcjU0Nzg4MDE=", "avatar_url": "https://avatars.githubusercontent.com/u/5478801?v=4", "gravatar_id": "", "url": "https://api.github.com/users/trevortimm", "html_url": "https://github.com/trevortimm", "followers_url": "https://api.github.com/users/trevortimm/followers", "following_url": "https://api.github.com/users/trevortimm/following{/other_user}", "gists_url": "https://api.github.com/users/trevortimm/gists{/gist_id}", "starred_url": "https://api.github.com/users/trevortimm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/trevortimm/subscriptions", "organizations_url": "https://api.github.com/users/trevortimm/orgs", "repos_url": "https://api.github.com/users/trevortimm/repos", "events_url": "https://api.github.com/users/trevortimm/events{/privacy}", "received_events_url": "https://api.github.com/users/trevortimm/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2014-01-28T20:49:31Z", "updated_at": "2016-11-03T16:50:25Z", "closed_at": "2016-11-03T16:50:25Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "I've been doing a bunch of testing and trainings at a news org that will launch SecureDrop soon. \n\nIt seems when you submit a file as a source, you cannot click back to the SecureDrop main page and then login again as with your code name -- or any valid code name. It tells you your codename is invalid. \n\nIn order to login again, you close your current session and open a new window or tab and reload the page.\n\nIs this by design for a security reason or a bug? And if it's a bug can someone try to re-create it?\n", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/294/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/294/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/291", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/291/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/291/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/291/events", "html_url": "https://github.com/freedomofpress/securedrop/pull/291", "id": 26402830, "node_id": "MDExOlB1bGxSZXF1ZXN0MTE5MjUzMTc=", "number": 291, "title": "Fix typo in x-xss-protection header", "user": {"login": "diracdeltas", "id": 549654, "node_id": "MDQ6VXNlcjU0OTY1NA==", "avatar_url": "https://avatars.githubusercontent.com/u/549654?v=4", "gravatar_id": "", "url": "https://api.github.com/users/diracdeltas", "html_url": "https://github.com/diracdeltas", "followers_url": "https://api.github.com/users/diracdeltas/followers", "following_url": "https://api.github.com/users/diracdeltas/following{/other_user}", "gists_url": "https://api.github.com/users/diracdeltas/gists{/gist_id}", "starred_url": "https://api.github.com/users/diracdeltas/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/diracdeltas/subscriptions", "organizations_url": "https://api.github.com/users/diracdeltas/orgs", "repos_url": "https://api.github.com/users/diracdeltas/repos", "events_url": "https://api.github.com/users/diracdeltas/events{/privacy}", "received_events_url": "https://api.github.com/users/diracdeltas/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2014-01-27T23:04:34Z", "updated_at": "2014-06-16T23:03:10Z", "closed_at": "2014-01-29T00:10:00Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/freedomofpress/securedrop/pulls/291", "html_url": "https://github.com/freedomofpress/securedrop/pull/291", "diff_url": "https://github.com/freedomofpress/securedrop/pull/291.diff", "patch_url": "https://github.com/freedomofpress/securedrop/pull/291.patch", "merged_at": "2014-01-29T00:10:00Z"}, "body": "Noticed this one while checking out ProPublica's live SD instance. \n", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/291/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/291/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/284", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/284/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/284/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/284/events", "html_url": "https://github.com/freedomofpress/securedrop/issues/284", "id": 26320487, "node_id": "MDU6SXNzdWUyNjMyMDQ4Nw==", "number": 284, "title": "Tails ssh client version doesn't support any of the currently allowed ssh hmac on servers", "user": {"login": "dolanjs", "id": 1495205, "node_id": "MDQ6VXNlcjE0OTUyMDU=", "avatar_url": "https://avatars.githubusercontent.com/u/1495205?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dolanjs", "html_url": "https://github.com/dolanjs", "followers_url": "https://api.github.com/users/dolanjs/followers", "following_url": "https://api.github.com/users/dolanjs/following{/other_user}", "gists_url": "https://api.github.com/users/dolanjs/gists{/gist_id}", "starred_url": "https://api.github.com/users/dolanjs/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dolanjs/subscriptions", "organizations_url": "https://api.github.com/users/dolanjs/orgs", "repos_url": "https://api.github.com/users/dolanjs/repos", "events_url": "https://api.github.com/users/dolanjs/events{/privacy}", "received_events_url": "https://api.github.com/users/dolanjs/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2014-01-26T19:33:11Z", "updated_at": "2014-09-18T19:50:27Z", "closed_at": "2014-09-18T19:50:27Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "The current ssh config on the app and monitor servers is restricted to the following hmacs: `MACs hmac-sha2-256,hmac-sha2-512`\n\nThe default openssh-client verison on tails is 1:5.5p1-6+squeeze4 and only supports:\n`hmac-md5, hmac-sha1, umac-64, hmac-ripemd160`\n", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/284/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/284/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/282", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/282/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/282/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/282/events", "html_url": "https://github.com/freedomofpress/securedrop/issues/282", "id": 26317634, "node_id": "MDU6SXNzdWUyNjMxNzYzNA==", "number": 282, "title": "The torrc file is not a persistent option on tails ", "user": {"login": "dolanjs", "id": 1495205, "node_id": "MDQ6VXNlcjE0OTUyMDU=", "avatar_url": "https://avatars.githubusercontent.com/u/1495205?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dolanjs", "html_url": "https://github.com/dolanjs", "followers_url": "https://api.github.com/users/dolanjs/followers", "following_url": "https://api.github.com/users/dolanjs/following{/other_user}", "gists_url": "https://api.github.com/users/dolanjs/gists{/gist_id}", "starred_url": "https://api.github.com/users/dolanjs/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dolanjs/subscriptions", "organizations_url": "https://api.github.com/users/dolanjs/orgs", "repos_url": "https://api.github.com/users/dolanjs/repos", "events_url": "https://api.github.com/users/dolanjs/events{/privacy}", "received_events_url": "https://api.github.com/users/dolanjs/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2014-01-26T17:05:36Z", "updated_at": "2014-04-10T06:50:36Z", "closed_at": "2014-04-10T06:50:36Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "The torrc file (needed for the document interface's authenticated tor hidden services) is not a persistent option for tails. Currently each time a journalist boots the SVS they need to set a root password and after Tails boots they need to add the ATHS config line to the torrc file.\n\nPutting a copy of the torrc file and a simple script like the one below on the SVS persistent volume. Where the journalist can just double click the script to add the config back to the torrc file is a workaround until Tails supports persistent torrc files.\n\nThe execute flag needs to be set when the script is copied to the persistent volume because tails sets a default umask of 002. The tor service should be reloaded only after the initial network connection is enabled and synced. \n\n```\n#!/bin/bash\nsudo cp /home/amnesia/Persistent/torrc\nsudo service tor reload\n```\n", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/282/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/282/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/265", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/265/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/265/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/265/events", "html_url": "https://github.com/freedomofpress/securedrop/issues/265", "id": 25826430, "node_id": "MDU6SXNzdWUyNTgyNjQzMA==", "number": 265, "title": "ATHS users do not need to valid OS users", "user": {"login": "dolanjs", "id": 1495205, "node_id": "MDQ6VXNlcjE0OTUyMDU=", "avatar_url": "https://avatars.githubusercontent.com/u/1495205?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dolanjs", "html_url": "https://github.com/dolanjs", "followers_url": "https://api.github.com/users/dolanjs/followers", "following_url": "https://api.github.com/users/dolanjs/following{/other_user}", "gists_url": "https://api.github.com/users/dolanjs/gists{/gist_id}", "starred_url": "https://api.github.com/users/dolanjs/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dolanjs/subscriptions", "organizations_url": "https://api.github.com/users/dolanjs/orgs", "repos_url": "https://api.github.com/users/dolanjs/repos", "events_url": "https://api.github.com/users/dolanjs/events{/privacy}", "received_events_url": "https://api.github.com/users/dolanjs/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2014-01-17T18:24:16Z", "updated_at": "2014-01-26T18:34:35Z", "closed_at": "2014-01-26T18:34:35Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Authenticated Tor Hidden Service users do not need to be valid OS users.\n", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/265/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/265/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/261", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/261/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/261/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/261/events", "html_url": "https://github.com/freedomofpress/securedrop/issues/261", "id": 25696384, "node_id": "MDU6SXNzdWUyNTY5NjM4NA==", "number": 261, "title": "No logging handlers configured", "user": {"login": "garrettr", "id": 407302, "node_id": "MDQ6VXNlcjQwNzMwMg==", "avatar_url": "https://avatars.githubusercontent.com/u/407302?v=4", "gravatar_id": "", "url": "https://api.github.com/users/garrettr", "html_url": "https://github.com/garrettr", "followers_url": "https://api.github.com/users/garrettr/followers", "following_url": "https://api.github.com/users/garrettr/following{/other_user}", "gists_url": "https://api.github.com/users/garrettr/gists{/gist_id}", "starred_url": "https://api.github.com/users/garrettr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/garrettr/subscriptions", "organizations_url": "https://api.github.com/users/garrettr/orgs", "repos_url": "https://api.github.com/users/garrettr/repos", "events_url": "https://api.github.com/users/garrettr/events{/privacy}", "received_events_url": "https://api.github.com/users/garrettr/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "garrettr", "id": 407302, "node_id": "MDQ6VXNlcjQwNzMwMg==", "avatar_url": "https://avatars.githubusercontent.com/u/407302?v=4", "gravatar_id": "", "url": "https://api.github.com/users/garrettr", "html_url": "https://github.com/garrettr", "followers_url": "https://api.github.com/users/garrettr/followers", "following_url": "https://api.github.com/users/garrettr/following{/other_user}", "gists_url": "https://api.github.com/users/garrettr/gists{/gist_id}", "starred_url": "https://api.github.com/users/garrettr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/garrettr/subscriptions", "organizations_url": "https://api.github.com/users/garrettr/orgs", "repos_url": "https://api.github.com/users/garrettr/repos", "events_url": "https://api.github.com/users/garrettr/events{/privacy}", "received_events_url": "https://api.github.com/users/garrettr/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "garrettr", "id": 407302, "node_id": "MDQ6VXNlcjQwNzMwMg==", "avatar_url": "https://avatars.githubusercontent.com/u/407302?v=4", "gravatar_id": "", "url": "https://api.github.com/users/garrettr", "html_url": "https://github.com/garrettr", "followers_url": "https://api.github.com/users/garrettr/followers", "following_url": "https://api.github.com/users/garrettr/following{/other_user}", "gists_url": "https://api.github.com/users/garrettr/gists{/gist_id}", "starred_url": "https://api.github.com/users/garrettr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/garrettr/subscriptions", "organizations_url": "https://api.github.com/users/garrettr/orgs", "repos_url": "https://api.github.com/users/garrettr/repos", "events_url": "https://api.github.com/users/garrettr/events{/privacy}", "received_events_url": "https://api.github.com/users/garrettr/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 4, "created_at": "2014-01-16T01:16:57Z", "updated_at": "2015-03-23T10:13:07Z", "closed_at": "2015-03-23T10:13:07Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "In 59ba7aab217ed6241ce32b0f0047f191e79157b8 (now in master and develop), I added some support for logging with the Python standard library logging module. I also added code to set up handlers (places where logs go) and attach them to the loggers, which was in `config.py`. Unfortunately, I appear to have accidentally forgotten to copy these changes to `example_config.py`, which means they were not committed to the repository. That means that no logging is recorded anywhere. Note that in development, Flask is in debug mode (`app.run(debug=True)`), so the Flask app's logs are printed to stderr. Other logging (done with the `log` objects defined at the top of, currently, `source.py` and `store.py`) is not being recorded. `debug == False` in production, so no logs are recorded in production.\n\nThis is a minor issue because there is very little logging being performed at the moment, and it is mostly for extremely rare/unlikely cases (such as duplicate codename generation). Nonetheless, this needs to be fixed (and hotfixed) because it will make debugging legitimate errors more difficult, especially in production.\n", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/261/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/261/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/254", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/254/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/254/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/254/events", "html_url": "https://github.com/freedomofpress/securedrop/issues/254", "id": 25628409, "node_id": "MDU6SXNzdWUyNTYyODQwOQ==", "number": 254, "title": "NTP doesn't appear to be synchronising the time on the App server which causes Tor to stop working", "user": {"login": "bxjx", "id": 20884, "node_id": "MDQ6VXNlcjIwODg0", "avatar_url": "https://avatars.githubusercontent.com/u/20884?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bxjx", "html_url": "https://github.com/bxjx", "followers_url": "https://api.github.com/users/bxjx/followers", "following_url": "https://api.github.com/users/bxjx/following{/other_user}", "gists_url": "https://api.github.com/users/bxjx/gists{/gist_id}", "starred_url": "https://api.github.com/users/bxjx/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bxjx/subscriptions", "organizations_url": "https://api.github.com/users/bxjx/orgs", "repos_url": "https://api.github.com/users/bxjx/repos", "events_url": "https://api.github.com/users/bxjx/events{/privacy}", "received_events_url": "https://api.github.com/users/bxjx/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2014-01-15T06:11:58Z", "updated_at": "2014-09-15T03:55:16Z", "closed_at": "2014-09-15T03:55:16Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "We're running our servers on virtualbox. In this environment the server times drift. The NTP service does not appear to be correcting the date properly. As a result, Tor complains about the time difference and the hidden service stops working. This occurs daily in our environment if we do not update the time manually.\n\nI can run `ntpupdate` and correct the time manually. If I run `ntp -p`, it times out and I can see a corresponding entry in the system logs of the the firewall blocking the UDP request. So perhaps it's firewall related? I'll try to set up a test server and experiment.\n\nIt only occurs on the App server.\n\nAny suggestions welcome!\n", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/254/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/254/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/207", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/207/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/207/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/207/events", "html_url": "https://github.com/freedomofpress/securedrop/issues/207", "id": 23916925, "node_id": "MDU6SXNzdWUyMzkxNjkyNQ==", "number": 207, "title": "When a source is renamed by the journalist, the download bulk filename should change as well.", "user": {"login": "Hainish", "id": 156137, "node_id": "MDQ6VXNlcjE1NjEzNw==", "avatar_url": "https://avatars.githubusercontent.com/u/156137?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Hainish", "html_url": "https://github.com/Hainish", "followers_url": "https://api.github.com/users/Hainish/followers", "following_url": "https://api.github.com/users/Hainish/following{/other_user}", "gists_url": "https://api.github.com/users/Hainish/gists{/gist_id}", "starred_url": "https://api.github.com/users/Hainish/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Hainish/subscriptions", "organizations_url": "https://api.github.com/users/Hainish/orgs", "repos_url": "https://api.github.com/users/Hainish/repos", "events_url": "https://api.github.com/users/Hainish/events{/privacy}", "received_events_url": "https://api.github.com/users/Hainish/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/freedomofpress/securedrop/milestones/4", "html_url": "https://github.com/freedomofpress/securedrop/milestone/4", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/milestones/4/labels", "id": 502985, "node_id": "MDk6TWlsZXN0b25lNTAyOTg1", "number": 4, "title": "0.2.1", "description": "Issues that were discovered during the 0.2 audit.", "creator": {"login": "garrettr", "id": 407302, "node_id": "MDQ6VXNlcjQwNzMwMg==", "avatar_url": "https://avatars.githubusercontent.com/u/407302?v=4", "gravatar_id": "", "url": "https://api.github.com/users/garrettr", "html_url": "https://github.com/garrettr", "followers_url": "https://api.github.com/users/garrettr/followers", "following_url": "https://api.github.com/users/garrettr/following{/other_user}", "gists_url": "https://api.github.com/users/garrettr/gists{/gist_id}", "starred_url": "https://api.github.com/users/garrettr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/garrettr/subscriptions", "organizations_url": "https://api.github.com/users/garrettr/orgs", "repos_url": "https://api.github.com/users/garrettr/repos", "events_url": "https://api.github.com/users/garrettr/events{/privacy}", "received_events_url": "https://api.github.com/users/garrettr/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 19, "state": "closed", "created_at": "2013-12-02T22:06:01Z", "updated_at": "2014-01-16T01:04:27Z", "due_on": "2013-12-15T08:00:00Z", "closed_at": "2014-01-16T01:04:27Z"}, "comments": 1, "created_at": "2013-12-08T02:12:31Z", "updated_at": "2013-12-08T02:45:21Z", "closed_at": "2013-12-08T02:42:36Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Rename a source from the journalist interface.  The download bulk link, which contains the source designation, has not changed.\n", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/207/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/207/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/198", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/198/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/198/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/198/events", "html_url": "https://github.com/freedomofpress/securedrop/issues/198", "id": 23737862, "node_id": "MDU6SXNzdWUyMzczNzg2Mg==", "number": 198, "title": "Denial-Of-Service for Source via UTF-8 in Journalist-Message", "user": {"login": "garrettr", "id": 407302, "node_id": "MDQ6VXNlcjQwNzMwMg==", "avatar_url": "https://avatars.githubusercontent.com/u/407302?v=4", "gravatar_id": "", "url": "https://api.github.com/users/garrettr", "html_url": "https://github.com/garrettr", "followers_url": "https://api.github.com/users/garrettr/followers", "following_url": "https://api.github.com/users/garrettr/following{/other_user}", "gists_url": "https://api.github.com/users/garrettr/gists{/gist_id}", "starred_url": "https://api.github.com/users/garrettr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/garrettr/subscriptions", "organizations_url": "https://api.github.com/users/garrettr/orgs", "repos_url": "https://api.github.com/users/garrettr/repos", "events_url": "https://api.github.com/users/garrettr/events{/privacy}", "received_events_url": "https://api.github.com/users/garrettr/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/freedomofpress/securedrop/milestones/4", "html_url": "https://github.com/freedomofpress/securedrop/milestone/4", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/milestones/4/labels", "id": 502985, "node_id": "MDk6TWlsZXN0b25lNTAyOTg1", "number": 4, "title": "0.2.1", "description": "Issues that were discovered during the 0.2 audit.", "creator": {"login": "garrettr", "id": 407302, "node_id": "MDQ6VXNlcjQwNzMwMg==", "avatar_url": "https://avatars.githubusercontent.com/u/407302?v=4", "gravatar_id": "", "url": "https://api.github.com/users/garrettr", "html_url": "https://github.com/garrettr", "followers_url": "https://api.github.com/users/garrettr/followers", "following_url": "https://api.github.com/users/garrettr/following{/other_user}", "gists_url": "https://api.github.com/users/garrettr/gists{/gist_id}", "starred_url": "https://api.github.com/users/garrettr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/garrettr/subscriptions", "organizations_url": "https://api.github.com/users/garrettr/orgs", "repos_url": "https://api.github.com/users/garrettr/repos", "events_url": "https://api.github.com/users/garrettr/events{/privacy}", "received_events_url": "https://api.github.com/users/garrettr/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 19, "state": "closed", "created_at": "2013-12-02T22:06:01Z", "updated_at": "2014-01-16T01:04:27Z", "due_on": "2013-12-15T08:00:00Z", "closed_at": "2014-01-16T01:04:27Z"}, "comments": 1, "created_at": "2013-12-04T19:03:07Z", "updated_at": "2013-12-20T05:48:21Z", "closed_at": "2013-12-20T05:48:21Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Once a journalist starts communication with a source, message objects are being created and secured by strong encryption. The journalist can however disable the interface for the source by adding specially formed Unicode characters to the message body. The application will crash upon parsing those and destroy the source\u2019s ability to log in with the formerly chosen pass-phrase.\n\nAn example message was posted and can be tested by using the following pass-phrase:\n\"baird wrath bohr vivid malady flam chris pogo\"\n\nThe following stack-trace is being generated upon parsing the message:\n\n```\n[Wed Dec 04 14:09:36 2013] [error] [client 127.0.0.1] mod_wsgi\n(pid=3034): Exception occurred processing WSGI script\n'/var/www/securedrop/source.wsgi'.\n[Wed Dec 04 14:09:36 2013] [error] [client 127.0.0.1] Traceback (most\nrecent call last):\n...\n[Wed Dec 04 14:09:36 2013] [error] [client 127.0.0.1]     {% extends\n\"base.html\" %}\n[Wed Dec 04 14:09:36 2013] [error] [client 127.0.0.1]   File\n\"/var/www/securedrop/source_templates/base.html\", line 26, in top-level\ntemplate code\n[Wed Dec 04 14:09:36 2013] [error] [client 127.0.0.1]     {% block body\n%}{% endblock %}\n[Wed Dec 04 14:09:36 2013] [error] [client 127.0.0.1]   File\n\"/var/www/securedrop/source_templates/lookup.html\", line 19, in block \"body\"\n[Wed Dec 04 14:09:36 2013] [error] [client 127.0.0.1]     <blockquote\nclass=\"message\">{{ msg.msg }}</blockquote>\n[Wed Dec 04 14:09:36 2013] [error] [client 127.0.0.1]\nUnicodeDecodeError: 'ascii' codec can't decode byte 0xc2 in position\n2582: ordinal not in range(128)\n```\n\nTo mitigate the issue, it must be assumed that all messages exchanged between journalist and source can in fact contain valid and invalid UTF-8 characters. It is recommended to decode the text to avoid crashing the application:\n\n```\ncrypto_util.decrypt(\ng.sid, g.codename, file(store.path(g.sid, fn)).read()\n).decode('utf-8')\n```\n\n**Reported as part of the cure53 audit of 0.2 as: SD-01-010**\n", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/198/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/198/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/194", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/194/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/194/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/194/events", "html_url": "https://github.com/freedomofpress/securedrop/issues/194", "id": 23735644, "node_id": "MDU6SXNzdWUyMzczNTY0NA==", "number": 194, "title": "Possible path confusion / traversal via imprecise store.verify()", "user": {"login": "garrettr", "id": 407302, "node_id": "MDQ6VXNlcjQwNzMwMg==", "avatar_url": "https://avatars.githubusercontent.com/u/407302?v=4", "gravatar_id": "", "url": "https://api.github.com/users/garrettr", "html_url": "https://github.com/garrettr", "followers_url": "https://api.github.com/users/garrettr/followers", "following_url": "https://api.github.com/users/garrettr/following{/other_user}", "gists_url": "https://api.github.com/users/garrettr/gists{/gist_id}", "starred_url": "https://api.github.com/users/garrettr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/garrettr/subscriptions", "organizations_url": "https://api.github.com/users/garrettr/orgs", "repos_url": "https://api.github.com/users/garrettr/repos", "events_url": "https://api.github.com/users/garrettr/events{/privacy}", "received_events_url": "https://api.github.com/users/garrettr/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/freedomofpress/securedrop/milestones/4", "html_url": "https://github.com/freedomofpress/securedrop/milestone/4", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/milestones/4/labels", "id": 502985, "node_id": "MDk6TWlsZXN0b25lNTAyOTg1", "number": 4, "title": "0.2.1", "description": "Issues that were discovered during the 0.2 audit.", "creator": {"login": "garrettr", "id": 407302, "node_id": "MDQ6VXNlcjQwNzMwMg==", "avatar_url": "https://avatars.githubusercontent.com/u/407302?v=4", "gravatar_id": "", "url": "https://api.github.com/users/garrettr", "html_url": "https://github.com/garrettr", "followers_url": "https://api.github.com/users/garrettr/followers", "following_url": "https://api.github.com/users/garrettr/following{/other_user}", "gists_url": "https://api.github.com/users/garrettr/gists{/gist_id}", "starred_url": "https://api.github.com/users/garrettr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/garrettr/subscriptions", "organizations_url": "https://api.github.com/users/garrettr/orgs", "repos_url": "https://api.github.com/users/garrettr/repos", "events_url": "https://api.github.com/users/garrettr/events{/privacy}", "received_events_url": "https://api.github.com/users/garrettr/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 19, "state": "closed", "created_at": "2013-12-02T22:06:01Z", "updated_at": "2014-01-16T01:04:27Z", "due_on": "2013-12-15T08:00:00Z", "closed_at": "2014-01-16T01:04:27Z"}, "comments": 0, "created_at": "2013-12-04T18:30:06Z", "updated_at": "2013-12-20T21:57:57Z", "closed_at": "2013-12-20T21:57:57Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "The method `store.verify()` checks file paths provided via URL and other ways and raises an exception if they are not matching the validation criteria.\n\nA problem with this validation process was spotted: `os.path.commonprefix()` is not sufficient to check if the path is inside the configured store path. It only compares character by character. Thus allows to navigate into another folder when they share the same start string.\n\n```\nExample:     config.STORE_DIR = '/opt/store'\nPoC:         store.verify('/opt/store_backup')\n```\n\nMitigation has to make sure, that the path is inside the configured store folder. A mitigation could be to add another check in `store.verify()` with `os.path.relpath(p, config.STORE_DIR)`. If the absolute path p is not inside the store directory, `os.path.relpath()` will return a string starting with '../'.\n\nExample:\n\n```\nos.path.relpath('/opt/store_backup', config.STORE_DIR) == '../store_backup'\n```\n\n**Reported as part of the cure53 audit of 0.2 as: SD-01-006**\n", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/194/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/194/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/192", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/192/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/192/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/192/events", "html_url": "https://github.com/freedomofpress/securedrop/issues/192", "id": 23691056, "node_id": "MDU6SXNzdWUyMzY5MTA1Ng==", "number": 192, "title": "Send security and cache minimization headers on all pages", "user": {"login": "garrettr", "id": 407302, "node_id": "MDQ6VXNlcjQwNzMwMg==", "avatar_url": "https://avatars.githubusercontent.com/u/407302?v=4", "gravatar_id": "", "url": "https://api.github.com/users/garrettr", "html_url": "https://github.com/garrettr", "followers_url": "https://api.github.com/users/garrettr/followers", "following_url": "https://api.github.com/users/garrettr/following{/other_user}", "gists_url": "https://api.github.com/users/garrettr/gists{/gist_id}", "starred_url": "https://api.github.com/users/garrettr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/garrettr/subscriptions", "organizations_url": "https://api.github.com/users/garrettr/orgs", "repos_url": "https://api.github.com/users/garrettr/repos", "events_url": "https://api.github.com/users/garrettr/events{/privacy}", "received_events_url": "https://api.github.com/users/garrettr/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/freedomofpress/securedrop/milestones/4", "html_url": "https://github.com/freedomofpress/securedrop/milestone/4", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/milestones/4/labels", "id": 502985, "node_id": "MDk6TWlsZXN0b25lNTAyOTg1", "number": 4, "title": "0.2.1", "description": "Issues that were discovered during the 0.2 audit.", "creator": {"login": "garrettr", "id": 407302, "node_id": "MDQ6VXNlcjQwNzMwMg==", "avatar_url": "https://avatars.githubusercontent.com/u/407302?v=4", "gravatar_id": "", "url": "https://api.github.com/users/garrettr", "html_url": "https://github.com/garrettr", "followers_url": "https://api.github.com/users/garrettr/followers", "following_url": "https://api.github.com/users/garrettr/following{/other_user}", "gists_url": "https://api.github.com/users/garrettr/gists{/gist_id}", "starred_url": "https://api.github.com/users/garrettr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/garrettr/subscriptions", "organizations_url": "https://api.github.com/users/garrettr/orgs", "repos_url": "https://api.github.com/users/garrettr/repos", "events_url": "https://api.github.com/users/garrettr/events{/privacy}", "received_events_url": "https://api.github.com/users/garrettr/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 19, "state": "closed", "created_at": "2013-12-02T22:06:01Z", "updated_at": "2014-01-16T01:04:27Z", "due_on": "2013-12-15T08:00:00Z", "closed_at": "2014-01-16T01:04:27Z"}, "comments": 1, "created_at": "2013-12-04T02:50:49Z", "updated_at": "2013-12-20T22:01:35Z", "closed_at": "2013-12-20T22:01:35Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "We currently set headers in Flask (`source.no_cache`) to minimize browser caching of Securedrop's pages. Unfortunately, these headers are only added to the response if it succeeds. If we bail out via `Flask.abort` and return an error code, or if Flask's routing mechanism returns a 404, then these headers are not added. This might result in error pages being cached by the browser, which we leave evidence that the user had visited Securedrop.\n\nWe also set some security headers (X-Frame-Options and X-XSS-Protection) in the apache config, although it appears that X-XSS-Options is also not set on error pages. I am not sure if this is really an XSS vector, as there's no way to get user input on an error page, but it's probably best to apply these headers uniformly across all pages.\n\nWe should set all of these headers in the Apache configuration (not in Flask), and make sure that they are sent for all requests, including error pages.\n\n**Reported as part of the cure53 audit of 0.2 as: SD-01-001, SD-01-005**\n", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/192/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/192/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/191", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/191/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/191/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/191/events", "html_url": "https://github.com/freedomofpress/securedrop/issues/191", "id": 23680636, "node_id": "MDU6SXNzdWUyMzY4MDYzNg==", "number": 191, "title": "store.log is broken due to the file extension checks in verify", "user": {"login": "dolanjs", "id": 1495205, "node_id": "MDQ6VXNlcjE0OTUyMDU=", "avatar_url": "https://avatars.githubusercontent.com/u/1495205?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dolanjs", "html_url": "https://github.com/dolanjs", "followers_url": "https://api.github.com/users/dolanjs/followers", "following_url": "https://api.github.com/users/dolanjs/following{/other_user}", "gists_url": "https://api.github.com/users/dolanjs/gists{/gist_id}", "starred_url": "https://api.github.com/users/dolanjs/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dolanjs/subscriptions", "organizations_url": "https://api.github.com/users/dolanjs/orgs", "repos_url": "https://api.github.com/users/dolanjs/repos", "events_url": "https://api.github.com/users/dolanjs/events{/privacy}", "received_events_url": "https://api.github.com/users/dolanjs/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/freedomofpress/securedrop/milestones/4", "html_url": "https://github.com/freedomofpress/securedrop/milestone/4", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/milestones/4/labels", "id": 502985, "node_id": "MDk6TWlsZXN0b25lNTAyOTg1", "number": 4, "title": "0.2.1", "description": "Issues that were discovered during the 0.2 audit.", "creator": {"login": "garrettr", "id": 407302, "node_id": "MDQ6VXNlcjQwNzMwMg==", "avatar_url": "https://avatars.githubusercontent.com/u/407302?v=4", "gravatar_id": "", "url": "https://api.github.com/users/garrettr", "html_url": "https://github.com/garrettr", "followers_url": "https://api.github.com/users/garrettr/followers", "following_url": "https://api.github.com/users/garrettr/following{/other_user}", "gists_url": "https://api.github.com/users/garrettr/gists{/gist_id}", "starred_url": "https://api.github.com/users/garrettr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/garrettr/subscriptions", "organizations_url": "https://api.github.com/users/garrettr/orgs", "repos_url": "https://api.github.com/users/garrettr/repos", "events_url": "https://api.github.com/users/garrettr/events{/privacy}", "received_events_url": "https://api.github.com/users/garrettr/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 19, "state": "closed", "created_at": "2013-12-02T22:06:01Z", "updated_at": "2014-01-16T01:04:27Z", "due_on": "2013-12-15T08:00:00Z", "closed_at": "2014-01-16T01:04:27Z"}, "comments": 2, "created_at": "2013-12-03T22:50:02Z", "updated_at": "2013-12-27T22:30:52Z", "closed_at": "2013-12-27T22:30:52Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "If a Duplicate ID is ever generated, store.log creates a file named \"NOTES\" in the store/ directory with the error message. The filename fails the extension checks in verify and is not monitored by OSSEC.  \n\n```\n[Tue Dec 03 22:21:49 2013] [error] ERROR:journalist:Exception on / [GET]\n[Tue Dec 03 22:21:49 2013] [error] Traceback (most recent call last):\n[Tue Dec 03 22:21:49 2013] [error]   File \"/usr/local/lib/python2.7/dist-packages/flask/app.py\", line 1817, in wsgi_app\n[Tue Dec 03 22:21:49 2013] [error]     response = self.full_dispatch_request()\n[Tue Dec 03 22:21:49 2013] [error]   File \"/usr/local/lib/python2.7/dist-packages/flask/app.py\", line 1477, in full_dispatch_request\n[Tue Dec 03 22:21:49 2013] [error]     rv = self.handle_user_exception(e)\n[Tue Dec 03 22:21:49 2013] [error]   File \"/usr/local/lib/python2.7/dist-packages/flask/app.py\", line 1381, in handle_user_exception\n[Tue Dec 03 22:21:49 2013] [error]     reraise(exc_type, exc_value, tb)\n[Tue Dec 03 22:21:49 2013] [error]   File \"/usr/local/lib/python2.7/dist-packages/flask/app.py\", line 1475, in full_dispatch_request\n[Tue Dec 03 22:21:49 2013] [error]     rv = self.dispatch_request()\n[Tue Dec 03 22:21:49 2013] [error]   File \"/usr/local/lib/python2.7/dist-packages/flask/app.py\", line 1461, in dispatch_request\n[Tue Dec 03 22:21:49 2013] [error]     return self.view_functions[rule.endpoint](**req.view_args)\n[Tue Dec 03 22:21:49 2013] [error]   File \"/var/www/securedrop/journalist.py\", line 72, in index\n[Tue Dec 03 22:21:49 2013] [error]     date=str(datetime.fromtimestamp(os.stat(store.path(d)).st_mtime)\n[Tue Dec 03 22:21:49 2013] [error]   File \"/var/www/securedrop/store.py\", line 58, in path\n[Tue Dec 03 22:21:49 2013] [error]     verify(absolute)\n[Tue Dec 03 22:21:49 2013] [error]   File \"/var/www/securedrop/store.py\", line 49, in verify\n[Tue Dec 03 22:21:49 2013] [error]     raise PathException(\"Invalid file extension %s\" % (ext, ))\n[Tue Dec 03 22:21:49 2013] [error] PathException: Invalid file extension \n```\n", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/191/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/191/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/185", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/185/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/185/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/185/events", "html_url": "https://github.com/freedomofpress/securedrop/issues/185", "id": 23605643, "node_id": "MDU6SXNzdWUyMzYwNTY0Mw==", "number": 185, "title": "Returning \"flagged for reply\" sources generate an error", "user": {"login": "dolanjs", "id": 1495205, "node_id": "MDQ6VXNlcjE0OTUyMDU=", "avatar_url": "https://avatars.githubusercontent.com/u/1495205?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dolanjs", "html_url": "https://github.com/dolanjs", "followers_url": "https://api.github.com/users/dolanjs/followers", "following_url": "https://api.github.com/users/dolanjs/following{/other_user}", "gists_url": "https://api.github.com/users/dolanjs/gists{/gist_id}", "starred_url": "https://api.github.com/users/dolanjs/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dolanjs/subscriptions", "organizations_url": "https://api.github.com/users/dolanjs/orgs", "repos_url": "https://api.github.com/users/dolanjs/repos", "events_url": "https://api.github.com/users/dolanjs/events{/privacy}", "received_events_url": "https://api.github.com/users/dolanjs/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/freedomofpress/securedrop/milestones/4", "html_url": "https://github.com/freedomofpress/securedrop/milestone/4", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/milestones/4/labels", "id": 502985, "node_id": "MDk6TWlsZXN0b25lNTAyOTg1", "number": 4, "title": "0.2.1", "description": "Issues that were discovered during the 0.2 audit.", "creator": {"login": "garrettr", "id": 407302, "node_id": "MDQ6VXNlcjQwNzMwMg==", "avatar_url": "https://avatars.githubusercontent.com/u/407302?v=4", "gravatar_id": "", "url": "https://api.github.com/users/garrettr", "html_url": "https://github.com/garrettr", "followers_url": "https://api.github.com/users/garrettr/followers", "following_url": "https://api.github.com/users/garrettr/following{/other_user}", "gists_url": "https://api.github.com/users/garrettr/gists{/gist_id}", "starred_url": "https://api.github.com/users/garrettr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/garrettr/subscriptions", "organizations_url": "https://api.github.com/users/garrettr/orgs", "repos_url": "https://api.github.com/users/garrettr/repos", "events_url": "https://api.github.com/users/garrettr/events{/privacy}", "received_events_url": "https://api.github.com/users/garrettr/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 19, "state": "closed", "created_at": "2013-12-02T22:06:01Z", "updated_at": "2014-01-16T01:04:27Z", "due_on": "2013-12-15T08:00:00Z", "closed_at": "2014-01-16T01:04:27Z"}, "comments": 4, "created_at": "2013-12-02T22:09:15Z", "updated_at": "2013-12-09T04:58:09Z", "closed_at": "2013-12-09T04:58:09Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "When a source is flagged for a reply.\nAnd the source returns to the site after initial session is ended. \nIt generates the error below.\n\n```\n[Mon Dec 02 21:49:44 2013] [error] ERROR:source:Exception on / [GET]\n[Mon Dec 02 21:49:44 2013] [error] Traceback (most recent call last):\n[Mon Dec 02 21:49:44 2013] [error]   File\n\"/usr/local/lib/python2.7/dist-packages/flask/app.py\", line 1817, in\nwsgi_app\n[Mon Dec 02 21:49:44 2013] [error]     response =\nself.full_dispatch_request()\n[Mon Dec 02 21:49:44 2013] [error]   File\n\"/usr/local/lib/python2.7/dist-packages/flask/app.py\", line 1477, in\nfull_dispatch_request\n[Mon Dec 02 21:49:44 2013] [error]     rv = self.handle_user_exception(e)\n[Mon Dec 02 21:49:44 2013] [error]   File\n\"/usr/local/lib/python2.7/dist-packages/flask/app.py\", line 1381, in\nhandle_user_exception\n[Mon Dec 02 21:49:44 2013] [error]     reraise(exc_type, exc_value, tb)\n[Mon Dec 02 21:49:44 2013] [error]   File\n\"/usr/local/lib/python2.7/dist-packages/flask/app.py\", line 1473, in\nfull_dispatch_request\n[Mon Dec 02 21:49:44 2013] [error]     rv = self.preprocess_request()\n[Mon Dec 02 21:49:44 2013] [error]   File\n\"/usr/local/lib/python2.7/dist-packages/flask/app.py\", line 1666, in\npreprocess_request\n[Mon Dec 02 21:49:44 2013] [error]     rv = func()\n[Mon Dec 02 21:49:44 2013] [error]   File\n\"/var/www/securedrop/source.py\", line 52, in decorated_function\n[Mon Dec 02 21:49:44 2013] [error]     return f(*args, **kwargs)\n[Mon Dec 02 21:49:44 2013] [error]   File\n\"/var/www/securedrop/source.py\", line 64, in setup_g\n[Mon Dec 02 21:49:44 2013] [error]     g.flagged = session['flagged']\n[Mon Dec 02 21:49:44 2013] [error]   File\n\"/usr/local/lib/python2.7/dist-packages/werkzeug/local.py\", line 368, in\n<lambda>\n[Mon Dec 02 21:49:44 2013] [error]     __getitem__ = lambda x, i:\nx._get_current_object()[i]\n[Mon Dec 02 21:49:44 2013] [error] KeyError: 'flagged'\n```\n", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/185/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/185/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/96", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/96/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/96/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/96/events", "html_url": "https://github.com/freedomofpress/securedrop/issues/96", "id": 21500725, "node_id": "MDU6SXNzdWUyMTUwMDcyNQ==", "number": 96, "title": "crypto.py removes spaces from JOURNALIST_KEY", "user": {"login": "misjoinder", "id": 5694117, "node_id": "MDQ6VXNlcjU2OTQxMTc=", "avatar_url": "https://avatars.githubusercontent.com/u/5694117?v=4", "gravatar_id": "", "url": "https://api.github.com/users/misjoinder", "html_url": "https://github.com/misjoinder", "followers_url": "https://api.github.com/users/misjoinder/followers", "following_url": "https://api.github.com/users/misjoinder/following{/other_user}", "gists_url": "https://api.github.com/users/misjoinder/gists{/gist_id}", "starred_url": "https://api.github.com/users/misjoinder/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/misjoinder/subscriptions", "organizations_url": "https://api.github.com/users/misjoinder/orgs", "repos_url": "https://api.github.com/users/misjoinder/repos", "events_url": "https://api.github.com/users/misjoinder/events{/privacy}", "received_events_url": "https://api.github.com/users/misjoinder/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2013-10-24T04:40:10Z", "updated_at": "2013-10-28T06:34:15Z", "closed_at": "2013-10-28T05:30:14Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "The source.py server was having issues finding my public key, until I commented out a line in /modules/deaddrop/files/deaddrop/crypto.py which removes spaces from my JOURNALIST_KEY\n\n```\nfp = fp.replace(' ', '')\n```\n\nIs it unusual or insecure for JOURNALIST_KEY to have spaces? Is it because I generated it on a Mac?\n", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/96/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/96/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/93", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/93/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/93/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/93/events", "html_url": "https://github.com/freedomofpress/securedrop/issues/93", "id": 21436876, "node_id": "MDU6SXNzdWUyMTQzNjg3Ng==", "number": 93, "title": "Code name with apostrophe results in error when uploading", "user": {"login": "Hainish", "id": 156137, "node_id": "MDQ6VXNlcjE1NjEzNw==", "avatar_url": "https://avatars.githubusercontent.com/u/156137?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Hainish", "html_url": "https://github.com/Hainish", "followers_url": "https://api.github.com/users/Hainish/followers", "following_url": "https://api.github.com/users/Hainish/following{/other_user}", "gists_url": "https://api.github.com/users/Hainish/gists{/gist_id}", "starred_url": "https://api.github.com/users/Hainish/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Hainish/subscriptions", "organizations_url": "https://api.github.com/users/Hainish/orgs", "repos_url": "https://api.github.com/users/Hainish/repos", "events_url": "https://api.github.com/users/Hainish/events{/privacy}", "received_events_url": "https://api.github.com/users/Hainish/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/freedomofpress/securedrop/milestones/2", "html_url": "https://github.com/freedomofpress/securedrop/milestone/2", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/milestones/2/labels", "id": 452310, "node_id": "MDk6TWlsZXN0b25lNDUyMzEw", "number": 2, "title": "0.2", "description": "", "creator": {"login": "micahflee", "id": 156128, "node_id": "MDQ6VXNlcjE1NjEyOA==", "avatar_url": "https://avatars.githubusercontent.com/u/156128?v=4", "gravatar_id": "", "url": "https://api.github.com/users/micahflee", "html_url": "https://github.com/micahflee", "followers_url": "https://api.github.com/users/micahflee/followers", "following_url": "https://api.github.com/users/micahflee/following{/other_user}", "gists_url": "https://api.github.com/users/micahflee/gists{/gist_id}", "starred_url": "https://api.github.com/users/micahflee/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/micahflee/subscriptions", "organizations_url": "https://api.github.com/users/micahflee/orgs", "repos_url": "https://api.github.com/users/micahflee/repos", "events_url": "https://api.github.com/users/micahflee/events{/privacy}", "received_events_url": "https://api.github.com/users/micahflee/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 24, "state": "closed", "created_at": "2013-10-11T03:03:23Z", "updated_at": "2014-11-04T15:19:12Z", "due_on": "2013-12-02T08:00:00Z", "closed_at": "2014-01-16T01:04:22Z"}, "comments": 2, "created_at": "2013-10-23T07:06:14Z", "updated_at": "2013-10-24T00:23:38Z", "closed_at": "2013-10-23T23:54:40Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "When uploading a document, and the codename contains an apostrophe:\n\n```\nException in thread Thread-33:\nTraceback (most recent call last):\n  File \"/usr/lib/python2.7/threading.py\", line 552, in __bootstrap_inner\n    self.run()\n  File \"/usr/lib/python2.7/threading.py\", line 505, in run\n    self.__target(*self.__args, **self.__kwargs)\n  File \"source.py\", line 70, in <lambda>\n    background.execute(lambda: crypto.genkeypair(sid, i.id))\n  File \"/home/legind/workspace/securedrop/modules/deaddrop/files/deaddrop/crypto.py\", line 75, in genkeypair\n    name, secret = clean(name), clean(secret, ' ')\n  File \"/home/legind/workspace/securedrop/modules/deaddrop/files/deaddrop/crypto.py\", line 38, in clean\n    raise CryptoException(\"invalid input: %s\" % s)\nCryptoException: invalid input: ri balsa kayo merck 45 julia aside j's\n```\n", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/93/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/93/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/89", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/89/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/89/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/89/events", "html_url": "https://github.com/freedomofpress/securedrop/issues/89", "id": 21168077, "node_id": "MDU6SXNzdWUyMTE2ODA3Nw==", "number": 89, "title": "CryptoException due to non-alphanumeric characters in codenames", "user": {"login": "garrettr", "id": 407302, "node_id": "MDQ6VXNlcjQwNzMwMg==", "avatar_url": "https://avatars.githubusercontent.com/u/407302?v=4", "gravatar_id": "", "url": "https://api.github.com/users/garrettr", "html_url": "https://github.com/garrettr", "followers_url": "https://api.github.com/users/garrettr/followers", "following_url": "https://api.github.com/users/garrettr/following{/other_user}", "gists_url": "https://api.github.com/users/garrettr/gists{/gist_id}", "starred_url": "https://api.github.com/users/garrettr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/garrettr/subscriptions", "organizations_url": "https://api.github.com/users/garrettr/orgs", "repos_url": "https://api.github.com/users/garrettr/repos", "events_url": "https://api.github.com/users/garrettr/events{/privacy}", "received_events_url": "https://api.github.com/users/garrettr/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/freedomofpress/securedrop/milestones/2", "html_url": "https://github.com/freedomofpress/securedrop/milestone/2", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/milestones/2/labels", "id": 452310, "node_id": "MDk6TWlsZXN0b25lNDUyMzEw", "number": 2, "title": "0.2", "description": "", "creator": {"login": "micahflee", "id": 156128, "node_id": "MDQ6VXNlcjE1NjEyOA==", "avatar_url": "https://avatars.githubusercontent.com/u/156128?v=4", "gravatar_id": "", "url": "https://api.github.com/users/micahflee", "html_url": "https://github.com/micahflee", "followers_url": "https://api.github.com/users/micahflee/followers", "following_url": "https://api.github.com/users/micahflee/following{/other_user}", "gists_url": "https://api.github.com/users/micahflee/gists{/gist_id}", "starred_url": "https://api.github.com/users/micahflee/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/micahflee/subscriptions", "organizations_url": "https://api.github.com/users/micahflee/orgs", "repos_url": "https://api.github.com/users/micahflee/repos", "events_url": "https://api.github.com/users/micahflee/events{/privacy}", "received_events_url": "https://api.github.com/users/micahflee/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 24, "state": "closed", "created_at": "2013-10-11T03:03:23Z", "updated_at": "2014-11-04T15:19:12Z", "due_on": "2013-12-02T08:00:00Z", "closed_at": "2014-01-16T01:04:22Z"}, "comments": 6, "created_at": "2013-10-17T16:54:07Z", "updated_at": "2013-11-30T19:21:28Z", "closed_at": "2013-11-30T19:21:28Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "The `crypto.clean` function is broken in a number of ways. The obvious manifestation is the occasional `CryptoException` that looks like:\n\n```\nTraceback (most recent call last):\n  File \"/usr/lib/python2.7/threading.py\", line 810, in __bootstrap_inner\n    self.run()\n  File \"/usr/lib/python2.7/threading.py\", line 763, in run\n    self.__target(*self.__args, **self.__kwargs)\n  File \"/home/garrett/code/securedrop/modules/deaddrop/files/deaddrop/source.py\", line 69, in <lambda>\n    background.execute(lambda: crypto.genkeypair(sid, i.id))\n  File \"/home/garrett/code/securedrop/modules/deaddrop/files/deaddrop/crypto.py\", line 75, in genkeypair\n    name, secret = clean(name), clean(secret, ' ')\n  File \"/home/garrett/code/securedrop/modules/deaddrop/files/deaddrop/crypto.py\", line 38, in clean\n    raise CryptoException(\"invalid input: %s\" % s)\nCryptoException: invalid input: degas serum ethic dust sob agenda align y&#39;s\n```\n\nYou will see this in the logs of a running web application, and will probably see it if you run the unit tests (`./test.py`) several times.\n\nThe problem in this case is that the codename contained a character that was converted to an HTML entity by the web.py templating system. `crypto.clean` only considers alphanumeric characters to be safe, so we get exceptions whenever codenames contain symbols.\n\nAnother problem is these exceptions are raised, but the code continues. If the goal of this function is to stop malicious user input from being written to disk, then it needs to actually return error conditions that are acknowledged by the calling code.\n\nFinally, it is unclear what sort of attack this function is meant to protect against. At the moment it is only being used to \"clean\" the userid and passphrase for the Source GPG key. I'm not sure what attacks are actually being prevented by cleaning these fields (not directory traversal, possibly shell injection to the GPG process), but I am not convinced that this function is adequate to protect against whatever they might be.\n\nThis needs a fix to remove the spurious CryptoExceptions, and also to consider when, why, and how we sanitize user input throughout the codebase.\n", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/89/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/89/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/86", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/86/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/86/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/86/events", "html_url": "https://github.com/freedomofpress/securedrop/issues/86", "id": 21054337, "node_id": "MDU6SXNzdWUyMTA1NDMzNw==", "number": 86, "title": "Unsafe hmac key generation", "user": {"login": "setharnold", "id": 5447148, "node_id": "MDQ6VXNlcjU0NDcxNDg=", "avatar_url": "https://avatars.githubusercontent.com/u/5447148?v=4", "gravatar_id": "", "url": "https://api.github.com/users/setharnold", "html_url": "https://github.com/setharnold", "followers_url": "https://api.github.com/users/setharnold/followers", "following_url": "https://api.github.com/users/setharnold/following{/other_user}", "gists_url": "https://api.github.com/users/setharnold/gists{/gist_id}", "starred_url": "https://api.github.com/users/setharnold/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/setharnold/subscriptions", "organizations_url": "https://api.github.com/users/setharnold/orgs", "repos_url": "https://api.github.com/users/setharnold/repos", "events_url": "https://api.github.com/users/setharnold/events{/privacy}", "received_events_url": "https://api.github.com/users/setharnold/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/freedomofpress/securedrop/milestones/2", "html_url": "https://github.com/freedomofpress/securedrop/milestone/2", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/milestones/2/labels", "id": 452310, "node_id": "MDk6TWlsZXN0b25lNDUyMzEw", "number": 2, "title": "0.2", "description": "", "creator": {"login": "micahflee", "id": 156128, "node_id": "MDQ6VXNlcjE1NjEyOA==", "avatar_url": "https://avatars.githubusercontent.com/u/156128?v=4", "gravatar_id": "", "url": "https://api.github.com/users/micahflee", "html_url": "https://github.com/micahflee", "followers_url": "https://api.github.com/users/micahflee/followers", "following_url": "https://api.github.com/users/micahflee/following{/other_user}", "gists_url": "https://api.github.com/users/micahflee/gists{/gist_id}", "starred_url": "https://api.github.com/users/micahflee/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/micahflee/subscriptions", "organizations_url": "https://api.github.com/users/micahflee/orgs", "repos_url": "https://api.github.com/users/micahflee/repos", "events_url": "https://api.github.com/users/micahflee/events{/privacy}", "received_events_url": "https://api.github.com/users/micahflee/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 24, "state": "closed", "created_at": "2013-10-11T03:03:23Z", "updated_at": "2014-11-04T15:19:12Z", "due_on": "2013-12-02T08:00:00Z", "closed_at": "2014-01-16T01:04:22Z"}, "comments": 1, "created_at": "2013-10-16T00:55:04Z", "updated_at": "2013-10-17T23:18:34Z", "closed_at": "2013-10-17T23:18:34Z", "author_association": "NONE", "active_lock_reason": null, "body": "Please note how little entropy is included in the hmac key: https://github.com/freedomofpress/securedrop/blob/master/server_setup.sh#L198 -- it would not be difficult for an attacker to generate all 86400 possible datestamps if they can guess the date the server was installed. Since there are only a few hundred days since this software was released, brute forcing every second since release wouldn't even be all that difficult.\n\nBest would use a key derivation function that takes a very long time, such as PBKDF2, in conjunction with more sources of entropy. Maybe even a base64 output from /dev/urandom or something similar...\n\nThanks\n", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/86/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/86/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/56", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/56/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/56/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/56/events", "html_url": "https://github.com/freedomofpress/securedrop/issues/56", "id": 20906558, "node_id": "MDU6SXNzdWUyMDkwNjU1OA==", "number": 56, "title": "When submitting documents there's a gnupg error", "user": {"login": "micahflee", "id": 156128, "node_id": "MDQ6VXNlcjE1NjEyOA==", "avatar_url": "https://avatars.githubusercontent.com/u/156128?v=4", "gravatar_id": "", "url": "https://api.github.com/users/micahflee", "html_url": "https://github.com/micahflee", "followers_url": "https://api.github.com/users/micahflee/followers", "following_url": "https://api.github.com/users/micahflee/following{/other_user}", "gists_url": "https://api.github.com/users/micahflee/gists{/gist_id}", "starred_url": "https://api.github.com/users/micahflee/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/micahflee/subscriptions", "organizations_url": "https://api.github.com/users/micahflee/orgs", "repos_url": "https://api.github.com/users/micahflee/repos", "events_url": "https://api.github.com/users/micahflee/events{/privacy}", "received_events_url": "https://api.github.com/users/micahflee/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/freedomofpress/securedrop/milestones/1", "html_url": "https://github.com/freedomofpress/securedrop/milestone/1", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/milestones/1/labels", "id": 448014, "node_id": "MDk6TWlsZXN0b25lNDQ4MDE0", "number": 1, "title": "0.1", "description": "", "creator": {"login": "micahflee", "id": 156128, "node_id": "MDQ6VXNlcjE1NjEyOA==", "avatar_url": "https://avatars.githubusercontent.com/u/156128?v=4", "gravatar_id": "", "url": "https://api.github.com/users/micahflee", "html_url": "https://github.com/micahflee", "followers_url": "https://api.github.com/users/micahflee/followers", "following_url": "https://api.github.com/users/micahflee/following{/other_user}", "gists_url": "https://api.github.com/users/micahflee/gists{/gist_id}", "starred_url": "https://api.github.com/users/micahflee/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/micahflee/subscriptions", "organizations_url": "https://api.github.com/users/micahflee/orgs", "repos_url": "https://api.github.com/users/micahflee/repos", "events_url": "https://api.github.com/users/micahflee/events{/privacy}", "received_events_url": "https://api.github.com/users/micahflee/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 24, "state": "closed", "created_at": "2013-10-08T01:41:03Z", "updated_at": "2014-01-16T01:04:33Z", "due_on": null, "closed_at": "2014-01-16T01:04:33Z"}, "comments": 4, "created_at": "2013-10-12T06:36:59Z", "updated_at": "2013-10-13T23:05:31Z", "closed_at": "2013-10-13T23:05:31Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "```\n[Fri Oct 11 23:29:37 2013] [error] [client 127.0.0.1] Traceback (most recent call last):\n[Fri Oct 11 23:29:37 2013] [error] [client 127.0.0.1]   File \"/var/www/deaddrop/web/application.py\", line 239, in process\n[Fri Oct 11 23:29:37 2013] [error] [client 127.0.0.1]     return self.handle()\n[Fri Oct 11 23:29:37 2013] [error] [client 127.0.0.1]   File \"/var/www/deaddrop/web/application.py\", line 230, in handle\n[Fri Oct 11 23:29:37 2013] [error] [client 127.0.0.1]     return self._delegate(fn, self.fvars, args)\n[Fri Oct 11 23:29:37 2013] [error] [client 127.0.0.1]   File \"/var/www/deaddrop/web/application.py\", line 462, in _delegate\n[Fri Oct 11 23:29:37 2013] [error] [client 127.0.0.1]     return handle_class(cls)\n[Fri Oct 11 23:29:37 2013] [error] [client 127.0.0.1]   File \"/var/www/deaddrop/web/application.py\", line 438, in handle_class\n[Fri Oct 11 23:29:37 2013] [error] [client 127.0.0.1]     return tocall(*args)\n[Fri Oct 11 23:29:37 2013] [error] [client 127.0.0.1]   File \"/var/www/deaddrop/source.py\", line 57, in POST\n[Fri Oct 11 23:29:37 2013] [error] [client 127.0.0.1]     crypto.encrypt(config.JOURNALIST_KEY, i.msg, loc1)\n[Fri Oct 11 23:29:37 2013] [error] [client 127.0.0.1]   File \"/var/www/deaddrop/crypto.py\", line 107, in encrypt\n[Fri Oct 11 23:29:37 2013] [error] [client 127.0.0.1]     raise CryptoException(out.stderr)\n[Fri Oct 11 23:29:37 2013] [error] [client 127.0.0.1] CryptoException: gpg: WARNING: \"--no-use-agent\" is an obsolete option - it has no effect\n[Fri Oct 11 23:29:37 2013] [error] [client 127.0.0.1] gpg: Sorry, no terminal at all requested - can't get input\n[Fri Oct 11 23:29:37 2013] [error] [client 127.0.0.1] \n[Fri Oct 11 23:29:37 2013] [error] [client 127.0.0.1] \n[Fri Oct 11 23:36:04 2013] [error] [client 127.0.0.1] Traceback (most recent call last):\n[Fri Oct 11 23:36:04 2013] [error] [client 127.0.0.1]   File \"/var/www/deaddrop/web/application.py\", line 239, in process\n[Fri Oct 11 23:36:04 2013] [error] [client 127.0.0.1]     return self.handle()\n[Fri Oct 11 23:36:04 2013] [error] [client 127.0.0.1]   File \"/var/www/deaddrop/web/application.py\", line 230, in handle\n[Fri Oct 11 23:36:04 2013] [error] [client 127.0.0.1]     return self._delegate(fn, self.fvars, args)\n[Fri Oct 11 23:36:04 2013] [error] [client 127.0.0.1]   File \"/var/www/deaddrop/web/application.py\", line 462, in _delegate\n[Fri Oct 11 23:36:04 2013] [error] [client 127.0.0.1]     return handle_class(cls)\n[Fri Oct 11 23:36:04 2013] [error] [client 127.0.0.1]   File \"/var/www/deaddrop/web/application.py\", line 438, in handle_class\n[Fri Oct 11 23:36:04 2013] [error] [client 127.0.0.1]     return tocall(*args)\n[Fri Oct 11 23:36:04 2013] [error] [client 127.0.0.1]   File \"/var/www/deaddrop/source.py\", line 57, in POST\n[Fri Oct 11 23:36:04 2013] [error] [client 127.0.0.1]     crypto.encrypt(config.JOURNALIST_KEY, i.msg, loc1)\n[Fri Oct 11 23:36:04 2013] [error] [client 127.0.0.1]   File \"/var/www/deaddrop/crypto.py\", line 107, in encrypt\n[Fri Oct 11 23:36:04 2013] [error] [client 127.0.0.1]     raise CryptoException(out.stderr)\n[Fri Oct 11 23:36:04 2013] [error] [client 127.0.0.1] CryptoException: gpg: WARNING: \"--no-use-agent\" is an obsolete option - it has no effect\n[Fri Oct 11 23:36:04 2013] [error] [client 127.0.0.1] gpg: Sorry, no terminal at all requested - can't get input\n[Fri Oct 11 23:36:04 2013] [error] [client 127.0.0.1] \n[Fri Oct 11 23:36:04 2013] [error] [client 127.0.0.1] \n```\n", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/56/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/56/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/30", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/30/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/30/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/30/events", "html_url": "https://github.com/freedomofpress/securedrop/issues/30", "id": 20650222, "node_id": "MDU6SXNzdWUyMDY1MDIyMg==", "number": 30, "title": "Install py-bcrypt as part of environment install script", "user": {"login": "micahflee", "id": 156128, "node_id": "MDQ6VXNlcjE1NjEyOA==", "avatar_url": "https://avatars.githubusercontent.com/u/156128?v=4", "gravatar_id": "", "url": "https://api.github.com/users/micahflee", "html_url": "https://github.com/micahflee", "followers_url": "https://api.github.com/users/micahflee/followers", "following_url": "https://api.github.com/users/micahflee/following{/other_user}", "gists_url": "https://api.github.com/users/micahflee/gists{/gist_id}", "starred_url": "https://api.github.com/users/micahflee/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/micahflee/subscriptions", "organizations_url": "https://api.github.com/users/micahflee/orgs", "repos_url": "https://api.github.com/users/micahflee/repos", "events_url": "https://api.github.com/users/micahflee/events{/privacy}", "received_events_url": "https://api.github.com/users/micahflee/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/freedomofpress/securedrop/milestones/1", "html_url": "https://github.com/freedomofpress/securedrop/milestone/1", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/milestones/1/labels", "id": 448014, "node_id": "MDk6TWlsZXN0b25lNDQ4MDE0", "number": 1, "title": "0.1", "description": "", "creator": {"login": "micahflee", "id": 156128, "node_id": "MDQ6VXNlcjE1NjEyOA==", "avatar_url": "https://avatars.githubusercontent.com/u/156128?v=4", "gravatar_id": "", "url": "https://api.github.com/users/micahflee", "html_url": "https://github.com/micahflee", "followers_url": "https://api.github.com/users/micahflee/followers", "following_url": "https://api.github.com/users/micahflee/following{/other_user}", "gists_url": "https://api.github.com/users/micahflee/gists{/gist_id}", "starred_url": "https://api.github.com/users/micahflee/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/micahflee/subscriptions", "organizations_url": "https://api.github.com/users/micahflee/orgs", "repos_url": "https://api.github.com/users/micahflee/repos", "events_url": "https://api.github.com/users/micahflee/events{/privacy}", "received_events_url": "https://api.github.com/users/micahflee/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 24, "state": "closed", "created_at": "2013-10-08T01:41:03Z", "updated_at": "2014-01-16T01:04:33Z", "due_on": null, "closed_at": "2014-01-16T01:04:33Z"}, "comments": 1, "created_at": "2013-10-08T01:47:58Z", "updated_at": "2013-10-12T06:48:03Z", "closed_at": "2013-10-12T06:48:03Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "py-bcrypt needs to be installed on source document and viewing interfaces\n", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/30/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/30/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/29", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/29/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/29/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/29/events", "html_url": "https://github.com/freedomofpress/securedrop/issues/29", "id": 20650212, "node_id": "MDU6SXNzdWUyMDY1MDIxMg==", "number": 29, "title": "Update config.py file with bcrypt salt and automate hmac secret in the install script", "user": {"login": "micahflee", "id": 156128, "node_id": "MDQ6VXNlcjE1NjEyOA==", "avatar_url": "https://avatars.githubusercontent.com/u/156128?v=4", "gravatar_id": "", "url": "https://api.github.com/users/micahflee", "html_url": "https://github.com/micahflee", "followers_url": "https://api.github.com/users/micahflee/followers", "following_url": "https://api.github.com/users/micahflee/following{/other_user}", "gists_url": "https://api.github.com/users/micahflee/gists{/gist_id}", "starred_url": "https://api.github.com/users/micahflee/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/micahflee/subscriptions", "organizations_url": "https://api.github.com/users/micahflee/orgs", "repos_url": "https://api.github.com/users/micahflee/repos", "events_url": "https://api.github.com/users/micahflee/events{/privacy}", "received_events_url": "https://api.github.com/users/micahflee/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/freedomofpress/securedrop/milestones/1", "html_url": "https://github.com/freedomofpress/securedrop/milestone/1", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/milestones/1/labels", "id": 448014, "node_id": "MDk6TWlsZXN0b25lNDQ4MDE0", "number": 1, "title": "0.1", "description": "", "creator": {"login": "micahflee", "id": 156128, "node_id": "MDQ6VXNlcjE1NjEyOA==", "avatar_url": "https://avatars.githubusercontent.com/u/156128?v=4", "gravatar_id": "", "url": "https://api.github.com/users/micahflee", "html_url": "https://github.com/micahflee", "followers_url": "https://api.github.com/users/micahflee/followers", "following_url": "https://api.github.com/users/micahflee/following{/other_user}", "gists_url": "https://api.github.com/users/micahflee/gists{/gist_id}", "starred_url": "https://api.github.com/users/micahflee/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/micahflee/subscriptions", "organizations_url": "https://api.github.com/users/micahflee/orgs", "repos_url": "https://api.github.com/users/micahflee/repos", "events_url": "https://api.github.com/users/micahflee/events{/privacy}", "received_events_url": "https://api.github.com/users/micahflee/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 24, "state": "closed", "created_at": "2013-10-08T01:41:03Z", "updated_at": "2014-01-16T01:04:33Z", "due_on": null, "closed_at": "2014-01-16T01:04:33Z"}, "comments": 1, "created_at": "2013-10-08T01:47:34Z", "updated_at": "2013-10-12T06:47:43Z", "closed_at": "2013-10-12T06:47:43Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "In the install script need to update to config bcrypt salt and hmac random value\n", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/29/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/29/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/28", "repository_url": "https://api.github.com/repos/freedomofpress/securedrop", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/28/labels{/name}", "comments_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/28/comments", "events_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/28/events", "html_url": "https://github.com/freedomofpress/securedrop/issues/28", "id": 20650191, "node_id": "MDU6SXNzdWUyMDY1MDE5MQ==", "number": 28, "title": "Create app gpg keypair in the localca script", "user": {"login": "micahflee", "id": 156128, "node_id": "MDQ6VXNlcjE1NjEyOA==", "avatar_url": "https://avatars.githubusercontent.com/u/156128?v=4", "gravatar_id": "", "url": "https://api.github.com/users/micahflee", "html_url": "https://github.com/micahflee", "followers_url": "https://api.github.com/users/micahflee/followers", "following_url": "https://api.github.com/users/micahflee/following{/other_user}", "gists_url": "https://api.github.com/users/micahflee/gists{/gist_id}", "starred_url": "https://api.github.com/users/micahflee/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/micahflee/subscriptions", "organizations_url": "https://api.github.com/users/micahflee/orgs", "repos_url": "https://api.github.com/users/micahflee/repos", "events_url": "https://api.github.com/users/micahflee/events{/privacy}", "received_events_url": "https://api.github.com/users/micahflee/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 59848063, "node_id": "MDU6TGFiZWw1OTg0ODA2Mw==", "url": "https://api.github.com/repos/freedomofpress/securedrop/labels/bug", "name": "bug", "color": "e11d21", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/freedomofpress/securedrop/milestones/1", "html_url": "https://github.com/freedomofpress/securedrop/milestone/1", "labels_url": "https://api.github.com/repos/freedomofpress/securedrop/milestones/1/labels", "id": 448014, "node_id": "MDk6TWlsZXN0b25lNDQ4MDE0", "number": 1, "title": "0.1", "description": "", "creator": {"login": "micahflee", "id": 156128, "node_id": "MDQ6VXNlcjE1NjEyOA==", "avatar_url": "https://avatars.githubusercontent.com/u/156128?v=4", "gravatar_id": "", "url": "https://api.github.com/users/micahflee", "html_url": "https://github.com/micahflee", "followers_url": "https://api.github.com/users/micahflee/followers", "following_url": "https://api.github.com/users/micahflee/following{/other_user}", "gists_url": "https://api.github.com/users/micahflee/gists{/gist_id}", "starred_url": "https://api.github.com/users/micahflee/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/micahflee/subscriptions", "organizations_url": "https://api.github.com/users/micahflee/orgs", "repos_url": "https://api.github.com/users/micahflee/repos", "events_url": "https://api.github.com/users/micahflee/events{/privacy}", "received_events_url": "https://api.github.com/users/micahflee/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 24, "state": "closed", "created_at": "2013-10-08T01:41:03Z", "updated_at": "2014-01-16T01:04:33Z", "due_on": null, "closed_at": "2014-01-16T01:04:33Z"}, "comments": 1, "created_at": "2013-10-08T01:46:42Z", "updated_at": "2013-10-11T01:16:39Z", "closed_at": "2013-10-11T01:16:39Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Create app gpg keypair in the localca script\n", "reactions": {"url": "https://api.github.com/repos/freedomofpress/securedrop/issues/28/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/freedomofpress/securedrop/issues/28/timeline", "performed_via_github_app": null, "state_reason": "completed"}]